var LC=Object.defineProperty;var xC=(e,t,n)=>t in e?LC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oe=(e,t,n)=>xC(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Lg(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const cn={},Ju=[],$s=()=>{},bC=()=>!1,Xf=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),xg=e=>e.startsWith("onUpdate:"),Vr=Object.assign,bg=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},wC=Object.prototype.hasOwnProperty,rn=(e,t)=>wC.call(e,t),ge=Array.isArray,Qu=e=>$c(e)==="[object Map]",Yf=e=>$c(e)==="[object Set]",_m=e=>$c(e)==="[object Date]",Se=e=>typeof e=="function",Wn=e=>typeof e=="string",eo=e=>typeof e=="symbol",_n=e=>e!==null&&typeof e=="object",n0=e=>(_n(e)||Se(e))&&Se(e.then)&&Se(e.catch),r0=Object.prototype.toString,$c=e=>r0.call(e),SC=e=>$c(e).slice(8,-1),i0=e=>$c(e)==="[object Object]",wg=e=>Wn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Lc=Lg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wf=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},MC=/-(\w)/g,fa=Wf(e=>e.replace(MC,(t,n)=>n?n.toUpperCase():"")),PC=/\B([A-Z])/g,fu=Wf(e=>e.replace(PC,"-$1").toLowerCase()),s0=Wf(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ld=Wf(e=>e?`on${s0(e)}`:""),aa=(e,t)=>!Object.is(e,t),cf=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},o0=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Lf=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ym;const Jf=()=>ym||(ym=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function nl(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Wn(r)?DC(r):nl(r);if(i)for(const o in i)t[o]=i[o]}return t}else if(Wn(e)||_n(e))return e}const IC=/;(?![^(]*\))/g,TC=/:([^]+)/,AC=/\/\*[^]*?\*\//g;function DC(e){const t={};return e.replace(AC,"").split(IC).forEach(n=>{if(n){const r=n.split(TC);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function $u(e){let t="";if(Wn(e))t=e;else if(ge(e))for(let n=0;n<e.length;n++){const r=$u(e[n]);r&&(t+=r+" ")}else if(_n(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const kC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",NC=Lg(kC);function a0(e){return!!e||e===""}function RC(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Qf(e[r],t[r]);return n}function Qf(e,t){if(e===t)return!0;let n=_m(e),r=_m(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=eo(e),r=eo(t),n||r)return e===t;if(n=ge(e),r=ge(t),n||r)return n&&r?RC(e,t):!1;if(n=_n(e),r=_n(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const u in e){const f=e.hasOwnProperty(u),d=t.hasOwnProperty(u);if(f&&!d||!f&&d||!Qf(e[u],t[u]))return!1}}return String(e)===String(t)}function OC(e,t){return e.findIndex(n=>Qf(n,t))}const u0=e=>!!(e&&e.__v_isRef===!0),be=e=>Wn(e)?e:e==null?"":ge(e)||_n(e)&&(e.toString===r0||!Se(e.toString))?u0(e)?be(e.value):JSON.stringify(e,l0,2):String(e),l0=(e,t)=>u0(t)?l0(e,t.value):Qu(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],o)=>(n[xd(r,o)+" =>"]=i,n),{})}:Yf(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>xd(n))}:eo(t)?xd(t):_n(t)&&!ge(t)&&!i0(t)?String(t):t,xd=(e,t="")=>{var n;return eo(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ti;class c0{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ti,!t&&ti&&(this.index=(ti.scopes||(ti.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ti;try{return ti=this,t()}finally{ti=n}}}on(){ti=this}off(){ti=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function h0(e){return new c0(e)}function f0(){return ti}function BC(e,t=!1){ti&&ti.cleanups.push(e)}let dn;const bd=new WeakSet;class p0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ti&&ti.active&&ti.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,bd.has(this)&&(bd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||g0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vm(this),m0(this);const t=dn,n=vs;dn=this,vs=!0;try{return this.fn()}finally{_0(this),dn=t,vs=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Pg(t);this.deps=this.depsTail=void 0,vm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?bd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Kd(this)&&this.run()}get dirty(){return Kd(this)}}let d0=0,xc,bc;function g0(e,t=!1){if(e.flags|=8,t){e.next=bc,bc=e;return}e.next=xc,xc=e}function Sg(){d0++}function Mg(){if(--d0>0)return;if(bc){let t=bc;for(bc=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;xc;){let t=xc;for(xc=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function m0(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function _0(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Pg(r),FC(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function Kd(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(y0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function y0(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ac))return;e.globalVersion=Ac;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Kd(e)){e.flags&=-3;return}const n=dn,r=vs;dn=e,vs=!0;try{m0(e);const i=e.fn(e._value);(t.version===0||aa(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{dn=n,vs=r,_0(e),e.flags&=-3}}function Pg(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Pg(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function FC(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let vs=!0;const v0=[];function La(){v0.push(vs),vs=!1}function xa(){const e=v0.pop();vs=e===void 0?!0:e}function vm(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=dn;dn=void 0;try{t()}finally{dn=n}}}let Ac=0;class zC{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ig{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!dn||!vs||dn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==dn)n=this.activeLink=new zC(dn,this),dn.deps?(n.prevDep=dn.depsTail,dn.depsTail.nextDep=n,dn.depsTail=n):dn.deps=dn.depsTail=n,C0(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=dn.depsTail,n.nextDep=void 0,dn.depsTail.nextDep=n,dn.depsTail=n,dn.deps===n&&(dn.deps=r)}return n}trigger(t){this.version++,Ac++,this.notify(t)}notify(t){Sg();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Mg()}}}function C0(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)C0(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const xf=new WeakMap,Ha=Symbol(""),Xd=Symbol(""),Dc=Symbol("");function Or(e,t,n){if(vs&&dn){let r=xf.get(e);r||xf.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new Ig),i.map=r,i.key=n),i.track()}}function So(e,t,n,r,i,o){const u=xf.get(e);if(!u){Ac++;return}const f=d=>{d&&d.trigger()};if(Sg(),t==="clear")u.forEach(f);else{const d=ge(e),_=d&&wg(n);if(d&&n==="length"){const y=Number(r);u.forEach((E,S)=>{(S==="length"||S===Dc||!eo(S)&&S>=y)&&f(E)})}else switch((n!==void 0||u.has(void 0))&&f(u.get(n)),_&&f(u.get(Dc)),t){case"add":d?_&&f(u.get("length")):(f(u.get(Ha)),Qu(e)&&f(u.get(Xd)));break;case"delete":d||(f(u.get(Ha)),Qu(e)&&f(u.get(Xd)));break;case"set":Qu(e)&&f(u.get(Ha));break}}Mg()}function GC(e,t){const n=xf.get(e);return n&&n.get(t)}function Zu(e){const t=Ye(e);return t===e?t:(Or(t,"iterate",Dc),Qi(e)?t:t.map(Br))}function $f(e){return Or(e=Ye(e),"iterate",Dc),e}const UC={__proto__:null,[Symbol.iterator](){return wd(this,Symbol.iterator,Br)},concat(...e){return Zu(this).concat(...e.map(t=>ge(t)?Zu(t):t))},entries(){return wd(this,"entries",e=>(e[1]=Br(e[1]),e))},every(e,t){return xo(this,"every",e,t,void 0,arguments)},filter(e,t){return xo(this,"filter",e,t,n=>n.map(Br),arguments)},find(e,t){return xo(this,"find",e,t,Br,arguments)},findIndex(e,t){return xo(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return xo(this,"findLast",e,t,Br,arguments)},findLastIndex(e,t){return xo(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return xo(this,"forEach",e,t,void 0,arguments)},includes(...e){return Sd(this,"includes",e)},indexOf(...e){return Sd(this,"indexOf",e)},join(e){return Zu(this).join(e)},lastIndexOf(...e){return Sd(this,"lastIndexOf",e)},map(e,t){return xo(this,"map",e,t,void 0,arguments)},pop(){return dc(this,"pop")},push(...e){return dc(this,"push",e)},reduce(e,...t){return Cm(this,"reduce",e,t)},reduceRight(e,...t){return Cm(this,"reduceRight",e,t)},shift(){return dc(this,"shift")},some(e,t){return xo(this,"some",e,t,void 0,arguments)},splice(...e){return dc(this,"splice",e)},toReversed(){return Zu(this).toReversed()},toSorted(e){return Zu(this).toSorted(e)},toSpliced(...e){return Zu(this).toSpliced(...e)},unshift(...e){return dc(this,"unshift",e)},values(){return wd(this,"values",Br)}};function wd(e,t,n){const r=$f(e),i=r[t]();return r!==e&&!Qi(e)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=n(o.value)),o}),i}const VC=Array.prototype;function xo(e,t,n,r,i,o){const u=$f(e),f=u!==e&&!Qi(e),d=u[t];if(d!==VC[t]){const E=d.apply(e,o);return f?Br(E):E}let _=n;u!==e&&(f?_=function(E,S){return n.call(this,Br(E),S,e)}:n.length>2&&(_=function(E,S){return n.call(this,E,S,e)}));const y=d.call(u,_,r);return f&&i?i(y):y}function Cm(e,t,n,r){const i=$f(e);let o=n;return i!==e&&(Qi(e)?n.length>3&&(o=function(u,f,d){return n.call(this,u,f,d,e)}):o=function(u,f,d){return n.call(this,u,Br(f),d,e)}),i[t](o,...r)}function Sd(e,t,n){const r=Ye(e);Or(r,"iterate",Dc);const i=r[t](...n);return(i===-1||i===!1)&&Dg(n[0])?(n[0]=Ye(n[0]),r[t](...n)):i}function dc(e,t,n=[]){La(),Sg();const r=Ye(e)[t].apply(e,n);return Mg(),xa(),r}const jC=Lg("__proto__,__v_isRef,__isVue"),E0=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(eo));function qC(e){eo(e)||(e=String(e));const t=Ye(this);return Or(t,"has",e),t.hasOwnProperty(e)}class L0{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(i?o?tE:S0:o?w0:b0).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const u=ge(t);if(!i){let d;if(u&&(d=UC[n]))return d;if(n==="hasOwnProperty")return qC}const f=Reflect.get(t,n,zn(t)?t:r);return(eo(n)?E0.has(n):jC(n))||(i||Or(t,"get",n),o)?f:zn(f)?u&&wg(n)?f:f.value:_n(f)?i?P0(f):th(f):f}}class x0 extends L0{constructor(t=!1){super(!1,t)}set(t,n,r,i){let o=t[n];if(!this._isShallow){const d=Ya(o);if(!Qi(r)&&!Ya(r)&&(o=Ye(o),r=Ye(r)),!ge(t)&&zn(o)&&!zn(r))return d?!1:(o.value=r,!0)}const u=ge(t)&&wg(n)?Number(n)<t.length:rn(t,n),f=Reflect.set(t,n,r,zn(t)?t:i);return t===Ye(i)&&(u?aa(r,o)&&So(t,"set",n,r):So(t,"add",n,r)),f}deleteProperty(t,n){const r=rn(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&So(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!eo(n)||!E0.has(n))&&Or(t,"has",n),r}ownKeys(t){return Or(t,"iterate",ge(t)?"length":Ha),Reflect.ownKeys(t)}}class HC extends L0{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const ZC=new x0,KC=new HC,XC=new x0(!0);const Yd=e=>e,Jh=e=>Reflect.getPrototypeOf(e);function YC(e,t,n){return function(...r){const i=this.__v_raw,o=Ye(i),u=Qu(o),f=e==="entries"||e===Symbol.iterator&&u,d=e==="keys"&&u,_=i[e](...r),y=n?Yd:t?Wd:Br;return!t&&Or(o,"iterate",d?Xd:Ha),{next(){const{value:E,done:S}=_.next();return S?{value:E,done:S}:{value:f?[y(E[0]),y(E[1])]:y(E),done:S}},[Symbol.iterator](){return this}}}}function Qh(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function WC(e,t){const n={get(i){const o=this.__v_raw,u=Ye(o),f=Ye(i);e||(aa(i,f)&&Or(u,"get",i),Or(u,"get",f));const{has:d}=Jh(u),_=t?Yd:e?Wd:Br;if(d.call(u,i))return _(o.get(i));if(d.call(u,f))return _(o.get(f));o!==u&&o.get(i)},get size(){const i=this.__v_raw;return!e&&Or(Ye(i),"iterate",Ha),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,u=Ye(o),f=Ye(i);return e||(aa(i,f)&&Or(u,"has",i),Or(u,"has",f)),i===f?o.has(i):o.has(i)||o.has(f)},forEach(i,o){const u=this,f=u.__v_raw,d=Ye(f),_=t?Yd:e?Wd:Br;return!e&&Or(d,"iterate",Ha),f.forEach((y,E)=>i.call(o,_(y),_(E),u))}};return Vr(n,e?{add:Qh("add"),set:Qh("set"),delete:Qh("delete"),clear:Qh("clear")}:{add(i){!t&&!Qi(i)&&!Ya(i)&&(i=Ye(i));const o=Ye(this);return Jh(o).has.call(o,i)||(o.add(i),So(o,"add",i,i)),this},set(i,o){!t&&!Qi(o)&&!Ya(o)&&(o=Ye(o));const u=Ye(this),{has:f,get:d}=Jh(u);let _=f.call(u,i);_||(i=Ye(i),_=f.call(u,i));const y=d.call(u,i);return u.set(i,o),_?aa(o,y)&&So(u,"set",i,o):So(u,"add",i,o),this},delete(i){const o=Ye(this),{has:u,get:f}=Jh(o);let d=u.call(o,i);d||(i=Ye(i),d=u.call(o,i)),f&&f.call(o,i);const _=o.delete(i);return d&&So(o,"delete",i,void 0),_},clear(){const i=Ye(this),o=i.size!==0,u=i.clear();return o&&So(i,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=YC(i,e,t)}),n}function Tg(e,t){const n=WC(e,t);return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(rn(n,i)&&i in r?n:r,i,o)}const JC={get:Tg(!1,!1)},QC={get:Tg(!1,!0)},$C={get:Tg(!0,!1)};const b0=new WeakMap,w0=new WeakMap,S0=new WeakMap,tE=new WeakMap;function eE(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nE(e){return e.__v_skip||!Object.isExtensible(e)?0:eE(SC(e))}function th(e){return Ya(e)?e:Ag(e,!1,ZC,JC,b0)}function M0(e){return Ag(e,!1,XC,QC,w0)}function P0(e){return Ag(e,!0,KC,$C,S0)}function Ag(e,t,n,r,i){if(!_n(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const u=nE(e);if(u===0)return e;const f=new Proxy(e,u===2?r:n);return i.set(e,f),f}function ua(e){return Ya(e)?ua(e.__v_raw):!!(e&&e.__v_isReactive)}function Ya(e){return!!(e&&e.__v_isReadonly)}function Qi(e){return!!(e&&e.__v_isShallow)}function Dg(e){return e?!!e.__v_raw:!1}function Ye(e){const t=e&&e.__v_raw;return t?Ye(t):e}function kg(e){return!rn(e,"__v_skip")&&Object.isExtensible(e)&&o0(e,"__v_skip",!0),e}const Br=e=>_n(e)?th(e):e,Wd=e=>_n(e)?P0(e):e;function zn(e){return e?e.__v_isRef===!0:!1}function Hn(e){return I0(e,!1)}function rE(e){return I0(e,!0)}function I0(e,t){return zn(e)?e:new iE(e,t)}class iE{constructor(t,n){this.dep=new Ig,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ye(t),this._value=n?t:Br(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Qi(t)||Ya(t);t=r?t:Ye(t),aa(t,n)&&(this._rawValue=t,this._value=r?t:Br(t),this.dep.trigger())}}function Za(e){return zn(e)?e.value:e}const sE={get:(e,t,n)=>t==="__v_raw"?e:Za(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return zn(i)&&!zn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function T0(e){return ua(e)?e:new Proxy(e,sE)}function oE(e){const t=ge(e)?new Array(e.length):{};for(const n in e)t[n]=uE(e,n);return t}class aE{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return GC(Ye(this._object),this._key)}}function uE(e,t,n){const r=e[t];return zn(r)?r:new aE(e,t,n)}class lE{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ig(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ac-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&dn!==this)return g0(this,!0),!0}get value(){const t=this.dep.track();return y0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function cE(e,t,n=!1){let r,i;return Se(e)?r=e:(r=e.get,i=e.set),new lE(r,i,n)}const $h={},bf=new WeakMap;let Va;function hE(e,t=!1,n=Va){if(n){let r=bf.get(n);r||bf.set(n,r=[]),r.push(e)}}function fE(e,t,n=cn){const{immediate:r,deep:i,once:o,scheduler:u,augmentJob:f,call:d}=n,_=mt=>i?mt:Qi(mt)||i===!1||i===0?Mo(mt,1):Mo(mt);let y,E,S,T,I=!1,z=!1;if(zn(e)?(E=()=>e.value,I=Qi(e)):ua(e)?(E=()=>_(e),I=!0):ge(e)?(z=!0,I=e.some(mt=>ua(mt)||Qi(mt)),E=()=>e.map(mt=>{if(zn(mt))return mt.value;if(ua(mt))return _(mt);if(Se(mt))return d?d(mt,2):mt()})):Se(e)?t?E=d?()=>d(e,2):e:E=()=>{if(S){La();try{S()}finally{xa()}}const mt=Va;Va=y;try{return d?d(e,3,[T]):e(T)}finally{Va=mt}}:E=$s,t&&i){const mt=E,bt=i===!0?1/0:i;E=()=>Mo(mt(),bt)}const G=f0(),Q=()=>{y.stop(),G&&G.active&&bg(G.effects,y)};if(o&&t){const mt=t;t=(...bt)=>{mt(...bt),Q()}}let $=z?new Array(e.length).fill($h):$h;const rt=mt=>{if(!(!(y.flags&1)||!y.dirty&&!mt))if(t){const bt=y.run();if(i||I||(z?bt.some((Dt,Bt)=>aa(Dt,$[Bt])):aa(bt,$))){S&&S();const Dt=Va;Va=y;try{const Bt=[bt,$===$h?void 0:z&&$[0]===$h?[]:$,T];d?d(t,3,Bt):t(...Bt),$=bt}finally{Va=Dt}}}else y.run()};return f&&f(rt),y=new p0(E),y.scheduler=u?()=>u(rt,!1):rt,T=mt=>hE(mt,!1,y),S=y.onStop=()=>{const mt=bf.get(y);if(mt){if(d)d(mt,4);else for(const bt of mt)bt();bf.delete(y)}},t?r?rt(!0):$=y.run():u?u(rt.bind(null,!0),!0):y.run(),Q.pause=y.pause.bind(y),Q.resume=y.resume.bind(y),Q.stop=Q,Q}function Mo(e,t=1/0,n){if(t<=0||!_n(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,zn(e))Mo(e.value,t,n);else if(ge(e))for(let r=0;r<e.length;r++)Mo(e[r],t,n);else if(Yf(e)||Qu(e))e.forEach(r=>{Mo(r,t,n)});else if(i0(e)){for(const r in e)Mo(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Mo(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function eh(e,t,n,r){try{return r?e(...r):e()}catch(i){tp(i,t,n)}}function no(e,t,n,r){if(Se(e)){const i=eh(e,t,n,r);return i&&n0(i)&&i.catch(o=>{tp(o,t,n)}),i}if(ge(e)){const i=[];for(let o=0;o<e.length;o++)i.push(no(e[o],t,n,r));return i}}function tp(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||cn;if(t){let f=t.parent;const d=t.proxy,_=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const y=f.ec;if(y){for(let E=0;E<y.length;E++)if(y[E](e,d,_)===!1)return}f=f.parent}if(o){La(),eh(o,null,10,[e,d,_]),xa();return}}pE(e,n,i,r,u)}function pE(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const ei=[];let Ks=-1;const tl=[];let ra=null,Xu=0;const A0=Promise.resolve();let wf=null;function ep(e){const t=wf||A0;return e?t.then(this?e.bind(this):e):t}function dE(e){let t=Ks+1,n=ei.length;for(;t<n;){const r=t+n>>>1,i=ei[r],o=kc(i);o<e||o===e&&i.flags&2?t=r+1:n=r}return t}function Ng(e){if(!(e.flags&1)){const t=kc(e),n=ei[ei.length-1];!n||!(e.flags&2)&&t>=kc(n)?ei.push(e):ei.splice(dE(t),0,e),e.flags|=1,D0()}}function D0(){wf||(wf=A0.then(N0))}function gE(e){ge(e)?tl.push(...e):ra&&e.id===-1?ra.splice(Xu+1,0,e):e.flags&1||(tl.push(e),e.flags|=1),D0()}function Em(e,t,n=Ks+1){for(;n<ei.length;n++){const r=ei[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ei.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function k0(e){if(tl.length){const t=[...new Set(tl)].sort((n,r)=>kc(n)-kc(r));if(tl.length=0,ra){ra.push(...t);return}for(ra=t,Xu=0;Xu<ra.length;Xu++){const n=ra[Xu];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ra=null,Xu=0}}const kc=e=>e.id==null?e.flags&2?-1:1/0:e.id;function N0(e){try{for(Ks=0;Ks<ei.length;Ks++){const t=ei[Ks];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),eh(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ks<ei.length;Ks++){const t=ei[Ks];t&&(t.flags&=-2)}Ks=-1,ei.length=0,k0(),wf=null,(ei.length||tl.length)&&N0()}}let wi=null,R0=null;function Sf(e){const t=wi;return wi=e,R0=e&&e.type.__scopeId||null,t}function mE(e,t=wi,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Tm(-1);const o=Sf(t);let u;try{u=e(...i)}finally{Sf(o),r._d&&Tm(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function tf(e,t){if(wi===null)return e;const n=sp(wi),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[o,u,f,d=cn]=t[i];o&&(Se(o)&&(o={mounted:o,updated:o}),o.deep&&Mo(u),r.push({dir:o,instance:n,value:u,oldValue:void 0,arg:f,modifiers:d}))}return e}function Ga(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let u=0;u<i.length;u++){const f=i[u];o&&(f.oldValue=o[u].value);let d=f.dir[r];d&&(La(),no(d,n,8,[e.el,f,e,t]),xa())}}const _E=Symbol("_vte"),yE=e=>e.__isTeleport;function Rg(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Rg(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Ml(e,t){return Se(e)?Vr({name:e.name},t,{setup:e}):e}function O0(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Mf(e,t,n,r,i=!1){if(ge(e)){e.forEach((I,z)=>Mf(I,t&&(ge(t)?t[z]:t),n,r,i));return}if(wc(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Mf(e,t,n,r.component.subTree);return}const o=r.shapeFlag&4?sp(r.component):r.el,u=i?null:o,{i:f,r:d}=e,_=t&&t.r,y=f.refs===cn?f.refs={}:f.refs,E=f.setupState,S=Ye(E),T=E===cn?()=>!1:I=>rn(S,I);if(_!=null&&_!==d&&(Wn(_)?(y[_]=null,T(_)&&(E[_]=null)):zn(_)&&(_.value=null)),Se(d))eh(d,f,12,[u,y]);else{const I=Wn(d),z=zn(d);if(I||z){const G=()=>{if(e.f){const Q=I?T(d)?E[d]:y[d]:d.value;i?ge(Q)&&bg(Q,o):ge(Q)?Q.includes(o)||Q.push(o):I?(y[d]=[o],T(d)&&(E[d]=y[d])):(d.value=[o],e.k&&(y[e.k]=d.value))}else I?(y[d]=u,T(d)&&(E[d]=u)):z&&(d.value=u,e.k&&(y[e.k]=u))};u?(G.id=-1,bi(G,n)):G()}}}Jf().requestIdleCallback;Jf().cancelIdleCallback;const wc=e=>!!e.type.__asyncLoader,B0=e=>e.type.__isKeepAlive;function vE(e,t){F0(e,"a",t)}function CE(e,t){F0(e,"da",t)}function F0(e,t,n=Fr){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(np(t,r,n),n){let i=n.parent;for(;i&&i.parent;)B0(i.parent.vnode)&&EE(r,t,n,i),i=i.parent}}function EE(e,t,n,r){const i=np(t,e,r,!0);Og(()=>{bg(r[t],i)},n)}function np(e,t,n=Fr,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...u)=>{La();const f=nh(n),d=no(t,n,e,u);return f(),xa(),d});return r?i.unshift(o):i.push(o),o}}const Uo=e=>(t,n=Fr)=>{(!Rc||e==="sp")&&np(e,(...r)=>t(...r),n)},LE=Uo("bm"),z0=Uo("m"),xE=Uo("bu"),bE=Uo("u"),wE=Uo("bum"),Og=Uo("um"),SE=Uo("sp"),ME=Uo("rtg"),PE=Uo("rtc");function IE(e,t=Fr){np("ec",e,t)}const TE=Symbol.for("v-ndc");function oa(e,t,n,r){let i;const o=n,u=ge(e);if(u||Wn(e)){const f=u&&ua(e);let d=!1;f&&(d=!Qi(e),e=$f(e)),i=new Array(e.length);for(let _=0,y=e.length;_<y;_++)i[_]=t(d?Br(e[_]):e[_],_,void 0,o)}else if(typeof e=="number"){i=new Array(e);for(let f=0;f<e;f++)i[f]=t(f+1,f,void 0,o)}else if(_n(e))if(e[Symbol.iterator])i=Array.from(e,(f,d)=>t(f,d,void 0,o));else{const f=Object.keys(e);i=new Array(f.length);for(let d=0,_=f.length;d<_;d++){const y=f[d];i[d]=t(e[y],y,d,o)}}else i=[];return i}const Jd=e=>e?uy(e)?sp(e):Jd(e.parent):null,Sc=Vr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Jd(e.parent),$root:e=>Jd(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>U0(e),$forceUpdate:e=>e.f||(e.f=()=>{Ng(e.update)}),$nextTick:e=>e.n||(e.n=ep.bind(e.proxy)),$watch:e=>QE.bind(e)}),Md=(e,t)=>e!==cn&&!e.__isScriptSetup&&rn(e,t),AE={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:o,accessCache:u,type:f,appContext:d}=e;let _;if(t[0]!=="$"){const T=u[t];if(T!==void 0)switch(T){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(Md(r,t))return u[t]=1,r[t];if(i!==cn&&rn(i,t))return u[t]=2,i[t];if((_=e.propsOptions[0])&&rn(_,t))return u[t]=3,o[t];if(n!==cn&&rn(n,t))return u[t]=4,n[t];Qd&&(u[t]=0)}}const y=Sc[t];let E,S;if(y)return t==="$attrs"&&Or(e.attrs,"get",""),y(e);if((E=f.__cssModules)&&(E=E[t]))return E;if(n!==cn&&rn(n,t))return u[t]=4,n[t];if(S=d.config.globalProperties,rn(S,t))return S[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return Md(i,t)?(i[t]=n,!0):r!==cn&&rn(r,t)?(r[t]=n,!0):rn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},u){let f;return!!n[u]||e!==cn&&rn(e,u)||Md(t,u)||(f=o[0])&&rn(f,u)||rn(r,u)||rn(Sc,u)||rn(i.config.globalProperties,u)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:rn(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Lm(e){return ge(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Qd=!0;function DE(e){const t=U0(e),n=e.proxy,r=e.ctx;Qd=!1,t.beforeCreate&&xm(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:u,watch:f,provide:d,inject:_,created:y,beforeMount:E,mounted:S,beforeUpdate:T,updated:I,activated:z,deactivated:G,beforeDestroy:Q,beforeUnmount:$,destroyed:rt,unmounted:mt,render:bt,renderTracked:Dt,renderTriggered:Bt,errorCaptured:Ft,serverPrefetch:Nt,expose:te,inheritAttrs:Ht,components:ee,directives:Ie,filters:Rt}=t;if(_&&kE(_,r,null),u)for(const Zt in u){const kt=u[Zt];Se(kt)&&(r[Zt]=kt.bind(n))}if(i){const Zt=i.call(n,n);_n(Zt)&&(e.data=th(Zt))}if(Qd=!0,o)for(const Zt in o){const kt=o[Zt],tn=Se(kt)?kt.bind(n,n):Se(kt.get)?kt.get.bind(n,n):$s,Yt=!Se(kt)&&Se(kt.set)?kt.set.bind(n):$s,de=bn({get:tn,set:Yt});Object.defineProperty(r,Zt,{enumerable:!0,configurable:!0,get:()=>de.value,set:Me=>de.value=Me})}if(f)for(const Zt in f)G0(f[Zt],r,n,Zt);if(d){const Zt=Se(d)?d.call(n):d;Reflect.ownKeys(Zt).forEach(kt=>{hf(kt,Zt[kt])})}y&&xm(y,e,"c");function jt(Zt,kt){ge(kt)?kt.forEach(tn=>Zt(tn.bind(n))):kt&&Zt(kt.bind(n))}if(jt(LE,E),jt(z0,S),jt(xE,T),jt(bE,I),jt(vE,z),jt(CE,G),jt(IE,Ft),jt(PE,Dt),jt(ME,Bt),jt(wE,$),jt(Og,mt),jt(SE,Nt),ge(te))if(te.length){const Zt=e.exposed||(e.exposed={});te.forEach(kt=>{Object.defineProperty(Zt,kt,{get:()=>n[kt],set:tn=>n[kt]=tn})})}else e.exposed||(e.exposed={});bt&&e.render===$s&&(e.render=bt),Ht!=null&&(e.inheritAttrs=Ht),ee&&(e.components=ee),Ie&&(e.directives=Ie),Nt&&O0(e)}function kE(e,t,n=$s){ge(e)&&(e=$d(e));for(const r in e){const i=e[r];let o;_n(i)?"default"in i?o=Cs(i.from||r,i.default,!0):o=Cs(i.from||r):o=Cs(i),zn(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:u=>o.value=u}):t[r]=o}}function xm(e,t,n){no(ge(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function G0(e,t,n,r){let i=r.includes(".")?ey(n,r):()=>n[r];if(Wn(e)){const o=t[e];Se(o)&&la(i,o)}else if(Se(e))la(i,e.bind(n));else if(_n(e))if(ge(e))e.forEach(o=>G0(o,t,n,r));else{const o=Se(e.handler)?e.handler.bind(n):t[e.handler];Se(o)&&la(i,o,e)}}function U0(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:u}}=e.appContext,f=o.get(t);let d;return f?d=f:!i.length&&!n&&!r?d=t:(d={},i.length&&i.forEach(_=>Pf(d,_,u,!0)),Pf(d,t,u)),_n(t)&&o.set(t,d),d}function Pf(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&Pf(e,o,n,!0),i&&i.forEach(u=>Pf(e,u,n,!0));for(const u in t)if(!(r&&u==="expose")){const f=NE[u]||n&&n[u];e[u]=f?f(e[u],t[u]):t[u]}return e}const NE={data:bm,props:wm,emits:wm,methods:vc,computed:vc,beforeCreate:Qr,created:Qr,beforeMount:Qr,mounted:Qr,beforeUpdate:Qr,updated:Qr,beforeDestroy:Qr,beforeUnmount:Qr,destroyed:Qr,unmounted:Qr,activated:Qr,deactivated:Qr,errorCaptured:Qr,serverPrefetch:Qr,components:vc,directives:vc,watch:OE,provide:bm,inject:RE};function bm(e,t){return t?e?function(){return Vr(Se(e)?e.call(this,this):e,Se(t)?t.call(this,this):t)}:t:e}function RE(e,t){return vc($d(e),$d(t))}function $d(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Qr(e,t){return e?[...new Set([].concat(e,t))]:t}function vc(e,t){return e?Vr(Object.create(null),e,t):t}function wm(e,t){return e?ge(e)&&ge(t)?[...new Set([...e,...t])]:Vr(Object.create(null),Lm(e),Lm(t??{})):t}function OE(e,t){if(!e)return t;if(!t)return e;const n=Vr(Object.create(null),e);for(const r in t)n[r]=Qr(e[r],t[r]);return n}function V0(){return{app:null,config:{isNativeTag:bC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let BE=0;function FE(e,t){return function(r,i=null){Se(r)||(r=Vr({},r)),i!=null&&!_n(i)&&(i=null);const o=V0(),u=new WeakSet,f=[];let d=!1;const _=o.app={_uid:BE++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:vL,get config(){return o.config},set config(y){},use(y,...E){return u.has(y)||(y&&Se(y.install)?(u.add(y),y.install(_,...E)):Se(y)&&(u.add(y),y(_,...E))),_},mixin(y){return o.mixins.includes(y)||o.mixins.push(y),_},component(y,E){return E?(o.components[y]=E,_):o.components[y]},directive(y,E){return E?(o.directives[y]=E,_):o.directives[y]},mount(y,E,S){if(!d){const T=_._ceVNode||Gr(r,i);return T.appContext=o,S===!0?S="svg":S===!1&&(S=void 0),e(T,y,S),d=!0,_._container=y,y.__vue_app__=_,sp(T.component)}},onUnmount(y){f.push(y)},unmount(){d&&(no(f,_._instance,16),e(null,_._container),delete _._container.__vue_app__)},provide(y,E){return o.provides[y]=E,_},runWithContext(y){const E=Ka;Ka=_;try{return y()}finally{Ka=E}}};return _}}let Ka=null;function hf(e,t){if(Fr){let n=Fr.provides;const r=Fr.parent&&Fr.parent.provides;r===n&&(n=Fr.provides=Object.create(r)),n[e]=t}}function Cs(e,t,n=!1){const r=Fr||wi;if(r||Ka){const i=Ka?Ka._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Se(t)?t.call(r&&r.proxy):t}}function zE(){return!!(Fr||wi||Ka)}const j0={},q0=()=>Object.create(j0),H0=e=>Object.getPrototypeOf(e)===j0;function GE(e,t,n,r=!1){const i={},o=q0();e.propsDefaults=Object.create(null),Z0(e,t,i,o);for(const u in e.propsOptions[0])u in i||(i[u]=void 0);n?e.props=r?i:M0(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function UE(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:u}}=e,f=Ye(i),[d]=e.propsOptions;let _=!1;if((r||u>0)&&!(u&16)){if(u&8){const y=e.vnode.dynamicProps;for(let E=0;E<y.length;E++){let S=y[E];if(rp(e.emitsOptions,S))continue;const T=t[S];if(d)if(rn(o,S))T!==o[S]&&(o[S]=T,_=!0);else{const I=fa(S);i[I]=tg(d,f,I,T,e,!1)}else T!==o[S]&&(o[S]=T,_=!0)}}}else{Z0(e,t,i,o)&&(_=!0);let y;for(const E in f)(!t||!rn(t,E)&&((y=fu(E))===E||!rn(t,y)))&&(d?n&&(n[E]!==void 0||n[y]!==void 0)&&(i[E]=tg(d,f,E,void 0,e,!0)):delete i[E]);if(o!==f)for(const E in o)(!t||!rn(t,E))&&(delete o[E],_=!0)}_&&So(e.attrs,"set","")}function Z0(e,t,n,r){const[i,o]=e.propsOptions;let u=!1,f;if(t)for(let d in t){if(Lc(d))continue;const _=t[d];let y;i&&rn(i,y=fa(d))?!o||!o.includes(y)?n[y]=_:(f||(f={}))[y]=_:rp(e.emitsOptions,d)||(!(d in r)||_!==r[d])&&(r[d]=_,u=!0)}if(o){const d=Ye(n),_=f||cn;for(let y=0;y<o.length;y++){const E=o[y];n[E]=tg(i,d,E,_[E],e,!rn(_,E))}}return u}function tg(e,t,n,r,i,o){const u=e[n];if(u!=null){const f=rn(u,"default");if(f&&r===void 0){const d=u.default;if(u.type!==Function&&!u.skipFactory&&Se(d)){const{propsDefaults:_}=i;if(n in _)r=_[n];else{const y=nh(i);r=_[n]=d.call(null,t),y()}}else r=d;i.ce&&i.ce._setProp(n,r)}u[0]&&(o&&!f?r=!1:u[1]&&(r===""||r===fu(n))&&(r=!0))}return r}const VE=new WeakMap;function K0(e,t,n=!1){const r=n?VE:t.propsCache,i=r.get(e);if(i)return i;const o=e.props,u={},f=[];let d=!1;if(!Se(e)){const y=E=>{d=!0;const[S,T]=K0(E,t,!0);Vr(u,S),T&&f.push(...T)};!n&&t.mixins.length&&t.mixins.forEach(y),e.extends&&y(e.extends),e.mixins&&e.mixins.forEach(y)}if(!o&&!d)return _n(e)&&r.set(e,Ju),Ju;if(ge(o))for(let y=0;y<o.length;y++){const E=fa(o[y]);Sm(E)&&(u[E]=cn)}else if(o)for(const y in o){const E=fa(y);if(Sm(E)){const S=o[y],T=u[E]=ge(S)||Se(S)?{type:S}:Vr({},S),I=T.type;let z=!1,G=!0;if(ge(I))for(let Q=0;Q<I.length;++Q){const $=I[Q],rt=Se($)&&$.name;if(rt==="Boolean"){z=!0;break}else rt==="String"&&(G=!1)}else z=Se(I)&&I.name==="Boolean";T[0]=z,T[1]=G,(z||rn(T,"default"))&&f.push(E)}}const _=[u,f];return _n(e)&&r.set(e,_),_}function Sm(e){return e[0]!=="$"&&!Lc(e)}const X0=e=>e[0]==="_"||e==="$stable",Bg=e=>ge(e)?e.map(Js):[Js(e)],jE=(e,t,n)=>{if(t._n)return t;const r=mE((...i)=>Bg(t(...i)),n);return r._c=!1,r},Y0=(e,t,n)=>{const r=e._ctx;for(const i in e){if(X0(i))continue;const o=e[i];if(Se(o))t[i]=jE(i,o,r);else if(o!=null){const u=Bg(o);t[i]=()=>u}}},W0=(e,t)=>{const n=Bg(t);e.slots.default=()=>n},J0=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},qE=(e,t,n)=>{const r=e.slots=q0();if(e.vnode.shapeFlag&32){const i=t._;i?(J0(r,t,n),n&&o0(r,"_",i,!0)):Y0(t,r)}else t&&W0(e,t)},HE=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,u=cn;if(r.shapeFlag&32){const f=t._;f?n&&f===1?o=!1:J0(i,t,n):(o=!t.$stable,Y0(t,i)),u=t}else t&&(W0(e,t),u={default:1});if(o)for(const f in i)!X0(f)&&u[f]==null&&delete i[f]},bi=sL;function ZE(e){return KE(e)}function KE(e,t){const n=Jf();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:u,createText:f,createComment:d,setText:_,setElementText:y,parentNode:E,nextSibling:S,setScopeId:T=$s,insertStaticContent:I}=e,z=(F,V,et,_t=null,Ct=null,yt=null,Mt=void 0,Tt=null,Pt=!!V.dynamicChildren)=>{if(F===V)return;F&&!gc(F,V)&&(_t=Et(F),Me(F,Ct,yt,!0),F=null),V.patchFlag===-2&&(Pt=!1,V.dynamicChildren=null);const{type:xt,ref:Kt,shapeFlag:Ut}=V;switch(xt){case ip:G(F,V,et,_t);break;case Wa:Q(F,V,et,_t);break;case ff:F==null&&$(V,et,_t,Mt);break;case gn:ee(F,V,et,_t,Ct,yt,Mt,Tt,Pt);break;default:Ut&1?bt(F,V,et,_t,Ct,yt,Mt,Tt,Pt):Ut&6?Ie(F,V,et,_t,Ct,yt,Mt,Tt,Pt):(Ut&64||Ut&128)&&xt.process(F,V,et,_t,Ct,yt,Mt,Tt,Pt,W)}Kt!=null&&Ct&&Mf(Kt,F&&F.ref,yt,V||F,!V)},G=(F,V,et,_t)=>{if(F==null)r(V.el=f(V.children),et,_t);else{const Ct=V.el=F.el;V.children!==F.children&&_(Ct,V.children)}},Q=(F,V,et,_t)=>{F==null?r(V.el=d(V.children||""),et,_t):V.el=F.el},$=(F,V,et,_t)=>{[F.el,F.anchor]=I(F.children,V,et,_t,F.el,F.anchor)},rt=({el:F,anchor:V},et,_t)=>{let Ct;for(;F&&F!==V;)Ct=S(F),r(F,et,_t),F=Ct;r(V,et,_t)},mt=({el:F,anchor:V})=>{let et;for(;F&&F!==V;)et=S(F),i(F),F=et;i(V)},bt=(F,V,et,_t,Ct,yt,Mt,Tt,Pt)=>{V.type==="svg"?Mt="svg":V.type==="math"&&(Mt="mathml"),F==null?Dt(V,et,_t,Ct,yt,Mt,Tt,Pt):Nt(F,V,Ct,yt,Mt,Tt,Pt)},Dt=(F,V,et,_t,Ct,yt,Mt,Tt)=>{let Pt,xt;const{props:Kt,shapeFlag:Ut,transition:ne,dirs:he}=F;if(Pt=F.el=u(F.type,yt,Kt&&Kt.is,Kt),Ut&8?y(Pt,F.children):Ut&16&&Ft(F.children,Pt,null,_t,Ct,Pd(F,yt),Mt,Tt),he&&Ga(F,null,_t,"created"),Bt(Pt,F,F.scopeId,Mt,_t),Kt){for(const Je in Kt)Je!=="value"&&!Lc(Je)&&o(Pt,Je,null,Kt[Je],yt,_t);"value"in Kt&&o(Pt,"value",null,Kt.value,yt),(xt=Kt.onVnodeBeforeMount)&&js(xt,_t,F)}he&&Ga(F,null,_t,"beforeMount");const Te=XE(Ct,ne);Te&&ne.beforeEnter(Pt),r(Pt,V,et),((xt=Kt&&Kt.onVnodeMounted)||Te||he)&&bi(()=>{xt&&js(xt,_t,F),Te&&ne.enter(Pt),he&&Ga(F,null,_t,"mounted")},Ct)},Bt=(F,V,et,_t,Ct)=>{if(et&&T(F,et),_t)for(let yt=0;yt<_t.length;yt++)T(F,_t[yt]);if(Ct){let yt=Ct.subTree;if(V===yt||ry(yt.type)&&(yt.ssContent===V||yt.ssFallback===V)){const Mt=Ct.vnode;Bt(F,Mt,Mt.scopeId,Mt.slotScopeIds,Ct.parent)}}},Ft=(F,V,et,_t,Ct,yt,Mt,Tt,Pt=0)=>{for(let xt=Pt;xt<F.length;xt++){const Kt=F[xt]=Tt?ia(F[xt]):Js(F[xt]);z(null,Kt,V,et,_t,Ct,yt,Mt,Tt)}},Nt=(F,V,et,_t,Ct,yt,Mt)=>{const Tt=V.el=F.el;let{patchFlag:Pt,dynamicChildren:xt,dirs:Kt}=V;Pt|=F.patchFlag&16;const Ut=F.props||cn,ne=V.props||cn;let he;if(et&&Ua(et,!1),(he=ne.onVnodeBeforeUpdate)&&js(he,et,V,F),Kt&&Ga(V,F,et,"beforeUpdate"),et&&Ua(et,!0),(Ut.innerHTML&&ne.innerHTML==null||Ut.textContent&&ne.textContent==null)&&y(Tt,""),xt?te(F.dynamicChildren,xt,Tt,et,_t,Pd(V,Ct),yt):Mt||kt(F,V,Tt,null,et,_t,Pd(V,Ct),yt,!1),Pt>0){if(Pt&16)Ht(Tt,Ut,ne,et,Ct);else if(Pt&2&&Ut.class!==ne.class&&o(Tt,"class",null,ne.class,Ct),Pt&4&&o(Tt,"style",Ut.style,ne.style,Ct),Pt&8){const Te=V.dynamicProps;for(let Je=0;Je<Te.length;Je++){const je=Te[Je],ar=Ut[je],jn=ne[je];(jn!==ar||je==="value")&&o(Tt,je,ar,jn,Ct,et)}}Pt&1&&F.children!==V.children&&y(Tt,V.children)}else!Mt&&xt==null&&Ht(Tt,Ut,ne,et,Ct);((he=ne.onVnodeUpdated)||Kt)&&bi(()=>{he&&js(he,et,V,F),Kt&&Ga(V,F,et,"updated")},_t)},te=(F,V,et,_t,Ct,yt,Mt)=>{for(let Tt=0;Tt<V.length;Tt++){const Pt=F[Tt],xt=V[Tt],Kt=Pt.el&&(Pt.type===gn||!gc(Pt,xt)||Pt.shapeFlag&70)?E(Pt.el):et;z(Pt,xt,Kt,null,_t,Ct,yt,Mt,!0)}},Ht=(F,V,et,_t,Ct)=>{if(V!==et){if(V!==cn)for(const yt in V)!Lc(yt)&&!(yt in et)&&o(F,yt,V[yt],null,Ct,_t);for(const yt in et){if(Lc(yt))continue;const Mt=et[yt],Tt=V[yt];Mt!==Tt&&yt!=="value"&&o(F,yt,Tt,Mt,Ct,_t)}"value"in et&&o(F,"value",V.value,et.value,Ct)}},ee=(F,V,et,_t,Ct,yt,Mt,Tt,Pt)=>{const xt=V.el=F?F.el:f(""),Kt=V.anchor=F?F.anchor:f("");let{patchFlag:Ut,dynamicChildren:ne,slotScopeIds:he}=V;he&&(Tt=Tt?Tt.concat(he):he),F==null?(r(xt,et,_t),r(Kt,et,_t),Ft(V.children||[],et,Kt,Ct,yt,Mt,Tt,Pt)):Ut>0&&Ut&64&&ne&&F.dynamicChildren?(te(F.dynamicChildren,ne,et,Ct,yt,Mt,Tt),(V.key!=null||Ct&&V===Ct.subTree)&&Q0(F,V,!0)):kt(F,V,et,Kt,Ct,yt,Mt,Tt,Pt)},Ie=(F,V,et,_t,Ct,yt,Mt,Tt,Pt)=>{V.slotScopeIds=Tt,F==null?V.shapeFlag&512?Ct.ctx.activate(V,et,_t,Mt,Pt):Rt(V,et,_t,Ct,yt,Mt,Pt):le(F,V,Pt)},Rt=(F,V,et,_t,Ct,yt,Mt)=>{const Tt=F.component=pL(F,_t,Ct);if(B0(F)&&(Tt.ctx.renderer=W),dL(Tt,!1,Mt),Tt.asyncDep){if(Ct&&Ct.registerDep(Tt,jt,Mt),!F.el){const Pt=Tt.subTree=Gr(Wa);Q(null,Pt,V,et)}}else jt(Tt,F,V,et,Ct,yt,Mt)},le=(F,V,et)=>{const _t=V.component=F.component;if(rL(F,V,et))if(_t.asyncDep&&!_t.asyncResolved){Zt(_t,V,et);return}else _t.next=V,_t.update();else V.el=F.el,_t.vnode=V},jt=(F,V,et,_t,Ct,yt,Mt)=>{const Tt=()=>{if(F.isMounted){let{next:Ut,bu:ne,u:he,parent:Te,vnode:Je}=F;{const tr=$0(F);if(tr){Ut&&(Ut.el=Je.el,Zt(F,Ut,Mt)),tr.asyncDep.then(()=>{F.isUnmounted||Tt()});return}}let je=Ut,ar;Ua(F,!1),Ut?(Ut.el=Je.el,Zt(F,Ut,Mt)):Ut=Je,ne&&cf(ne),(ar=Ut.props&&Ut.props.onVnodeBeforeUpdate)&&js(ar,Te,Ut,Je),Ua(F,!0);const jn=Pm(F),Kr=F.subTree;F.subTree=jn,z(Kr,jn,E(Kr.el),Et(Kr),F,Ct,yt),Ut.el=jn.el,je===null&&iL(F,jn.el),he&&bi(he,Ct),(ar=Ut.props&&Ut.props.onVnodeUpdated)&&bi(()=>js(ar,Te,Ut,Je),Ct)}else{let Ut;const{el:ne,props:he}=V,{bm:Te,m:Je,parent:je,root:ar,type:jn}=F,Kr=wc(V);Ua(F,!1),Te&&cf(Te),!Kr&&(Ut=he&&he.onVnodeBeforeMount)&&js(Ut,je,V),Ua(F,!0);{ar.ce&&ar.ce._injectChildStyle(jn);const tr=F.subTree=Pm(F);z(null,tr,et,_t,F,Ct,yt),V.el=tr.el}if(Je&&bi(Je,Ct),!Kr&&(Ut=he&&he.onVnodeMounted)){const tr=V;bi(()=>js(Ut,je,tr),Ct)}(V.shapeFlag&256||je&&wc(je.vnode)&&je.vnode.shapeFlag&256)&&F.a&&bi(F.a,Ct),F.isMounted=!0,V=et=_t=null}};F.scope.on();const Pt=F.effect=new p0(Tt);F.scope.off();const xt=F.update=Pt.run.bind(Pt),Kt=F.job=Pt.runIfDirty.bind(Pt);Kt.i=F,Kt.id=F.uid,Pt.scheduler=()=>Ng(Kt),Ua(F,!0),xt()},Zt=(F,V,et)=>{V.component=F;const _t=F.vnode.props;F.vnode=V,F.next=null,UE(F,V.props,_t,et),HE(F,V.children,et),La(),Em(F),xa()},kt=(F,V,et,_t,Ct,yt,Mt,Tt,Pt=!1)=>{const xt=F&&F.children,Kt=F?F.shapeFlag:0,Ut=V.children,{patchFlag:ne,shapeFlag:he}=V;if(ne>0){if(ne&128){Yt(xt,Ut,et,_t,Ct,yt,Mt,Tt,Pt);return}else if(ne&256){tn(xt,Ut,et,_t,Ct,yt,Mt,Tt,Pt);return}}he&8?(Kt&16&&ce(xt,Ct,yt),Ut!==xt&&y(et,Ut)):Kt&16?he&16?Yt(xt,Ut,et,_t,Ct,yt,Mt,Tt,Pt):ce(xt,Ct,yt,!0):(Kt&8&&y(et,""),he&16&&Ft(Ut,et,_t,Ct,yt,Mt,Tt,Pt))},tn=(F,V,et,_t,Ct,yt,Mt,Tt,Pt)=>{F=F||Ju,V=V||Ju;const xt=F.length,Kt=V.length,Ut=Math.min(xt,Kt);let ne;for(ne=0;ne<Ut;ne++){const he=V[ne]=Pt?ia(V[ne]):Js(V[ne]);z(F[ne],he,et,null,Ct,yt,Mt,Tt,Pt)}xt>Kt?ce(F,Ct,yt,!0,!1,Ut):Ft(V,et,_t,Ct,yt,Mt,Tt,Pt,Ut)},Yt=(F,V,et,_t,Ct,yt,Mt,Tt,Pt)=>{let xt=0;const Kt=V.length;let Ut=F.length-1,ne=Kt-1;for(;xt<=Ut&&xt<=ne;){const he=F[xt],Te=V[xt]=Pt?ia(V[xt]):Js(V[xt]);if(gc(he,Te))z(he,Te,et,null,Ct,yt,Mt,Tt,Pt);else break;xt++}for(;xt<=Ut&&xt<=ne;){const he=F[Ut],Te=V[ne]=Pt?ia(V[ne]):Js(V[ne]);if(gc(he,Te))z(he,Te,et,null,Ct,yt,Mt,Tt,Pt);else break;Ut--,ne--}if(xt>Ut){if(xt<=ne){const he=ne+1,Te=he<Kt?V[he].el:_t;for(;xt<=ne;)z(null,V[xt]=Pt?ia(V[xt]):Js(V[xt]),et,Te,Ct,yt,Mt,Tt,Pt),xt++}}else if(xt>ne)for(;xt<=Ut;)Me(F[xt],Ct,yt,!0),xt++;else{const he=xt,Te=xt,Je=new Map;for(xt=Te;xt<=ne;xt++){const On=V[xt]=Pt?ia(V[xt]):Js(V[xt]);On.key!=null&&Je.set(On.key,xt)}let je,ar=0;const jn=ne-Te+1;let Kr=!1,tr=0;const Rs=new Array(jn);for(xt=0;xt<jn;xt++)Rs[xt]=0;for(xt=he;xt<=Ut;xt++){const On=F[xt];if(ar>=jn){Me(On,Ct,yt,!0);continue}let Xr;if(On.key!=null)Xr=Je.get(On.key);else for(je=Te;je<=ne;je++)if(Rs[je-Te]===0&&gc(On,V[je])){Xr=je;break}Xr===void 0?Me(On,Ct,yt,!0):(Rs[Xr-Te]=xt+1,Xr>=tr?tr=Xr:Kr=!0,z(On,V[Xr],et,null,Ct,yt,Mt,Tt,Pt),ar++)}const ho=Kr?YE(Rs):Ju;for(je=ho.length-1,xt=jn-1;xt>=0;xt--){const On=Te+xt,Xr=V[On],zi=On+1<Kt?V[On+1].el:_t;Rs[xt]===0?z(null,Xr,et,zi,Ct,yt,Mt,Tt,Pt):Kr&&(je<0||xt!==ho[je]?de(Xr,et,zi,2):je--)}}},de=(F,V,et,_t,Ct=null)=>{const{el:yt,type:Mt,transition:Tt,children:Pt,shapeFlag:xt}=F;if(xt&6){de(F.component.subTree,V,et,_t);return}if(xt&128){F.suspense.move(V,et,_t);return}if(xt&64){Mt.move(F,V,et,W);return}if(Mt===gn){r(yt,V,et);for(let Ut=0;Ut<Pt.length;Ut++)de(Pt[Ut],V,et,_t);r(F.anchor,V,et);return}if(Mt===ff){rt(F,V,et);return}if(_t!==2&&xt&1&&Tt)if(_t===0)Tt.beforeEnter(yt),r(yt,V,et),bi(()=>Tt.enter(yt),Ct);else{const{leave:Ut,delayLeave:ne,afterLeave:he}=Tt,Te=()=>r(yt,V,et),Je=()=>{Ut(yt,()=>{Te(),he&&he()})};ne?ne(yt,Te,Je):Je()}else r(yt,V,et)},Me=(F,V,et,_t=!1,Ct=!1)=>{const{type:yt,props:Mt,ref:Tt,children:Pt,dynamicChildren:xt,shapeFlag:Kt,patchFlag:Ut,dirs:ne,cacheIndex:he}=F;if(Ut===-2&&(Ct=!1),Tt!=null&&Mf(Tt,null,et,F,!0),he!=null&&(V.renderCache[he]=void 0),Kt&256){V.ctx.deactivate(F);return}const Te=Kt&1&&ne,Je=!wc(F);let je;if(Je&&(je=Mt&&Mt.onVnodeBeforeUnmount)&&js(je,V,F),Kt&6)ye(F.component,et,_t);else{if(Kt&128){F.suspense.unmount(et,_t);return}Te&&Ga(F,null,V,"beforeUnmount"),Kt&64?F.type.remove(F,V,et,W,_t):xt&&!xt.hasOnce&&(yt!==gn||Ut>0&&Ut&64)?ce(xt,V,et,!1,!0):(yt===gn&&Ut&384||!Ct&&Kt&16)&&ce(Pt,V,et),_t&&ze(F)}(Je&&(je=Mt&&Mt.onVnodeUnmounted)||Te)&&bi(()=>{je&&js(je,V,F),Te&&Ga(F,null,V,"unmounted")},et)},ze=F=>{const{type:V,el:et,anchor:_t,transition:Ct}=F;if(V===gn){ke(et,_t);return}if(V===ff){mt(F);return}const yt=()=>{i(et),Ct&&!Ct.persisted&&Ct.afterLeave&&Ct.afterLeave()};if(F.shapeFlag&1&&Ct&&!Ct.persisted){const{leave:Mt,delayLeave:Tt}=Ct,Pt=()=>Mt(et,yt);Tt?Tt(F.el,yt,Pt):Pt()}else yt()},ke=(F,V)=>{let et;for(;F!==V;)et=S(F),i(F),F=et;i(V)},ye=(F,V,et)=>{const{bum:_t,scope:Ct,job:yt,subTree:Mt,um:Tt,m:Pt,a:xt}=F;Mm(Pt),Mm(xt),_t&&cf(_t),Ct.stop(),yt&&(yt.flags|=8,Me(Mt,F,V,et)),Tt&&bi(Tt,V),bi(()=>{F.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},ce=(F,V,et,_t=!1,Ct=!1,yt=0)=>{for(let Mt=yt;Mt<F.length;Mt++)Me(F[Mt],V,et,_t,Ct)},Et=F=>{if(F.shapeFlag&6)return Et(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const V=S(F.anchor||F.el),et=V&&V[_E];return et?S(et):V};let Y=!1;const J=(F,V,et)=>{F==null?V._vnode&&Me(V._vnode,null,null,!0):z(V._vnode||null,F,V,null,null,null,et),V._vnode=F,Y||(Y=!0,Em(),k0(),Y=!1)},W={p:z,um:Me,m:de,r:ze,mt:Rt,mc:Ft,pc:kt,pbc:te,n:Et,o:e};return{render:J,hydrate:void 0,createApp:FE(J)}}function Pd({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Ua({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function XE(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Q0(e,t,n=!1){const r=e.children,i=t.children;if(ge(r)&&ge(i))for(let o=0;o<r.length;o++){const u=r[o];let f=i[o];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=i[o]=ia(i[o]),f.el=u.el),!n&&f.patchFlag!==-2&&Q0(u,f)),f.type===ip&&(f.el=u.el)}}function YE(e){const t=e.slice(),n=[0];let r,i,o,u,f;const d=e.length;for(r=0;r<d;r++){const _=e[r];if(_!==0){if(i=n[n.length-1],e[i]<_){t[r]=i,n.push(r);continue}for(o=0,u=n.length-1;o<u;)f=o+u>>1,e[n[f]]<_?o=f+1:u=f;_<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,u=n[o-1];o-- >0;)n[o]=u,u=t[u];return n}function $0(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:$0(t)}function Mm(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const WE=Symbol.for("v-scx"),JE=()=>Cs(WE);function la(e,t,n){return ty(e,t,n)}function ty(e,t,n=cn){const{immediate:r,deep:i,flush:o,once:u}=n,f=Vr({},n),d=t&&r||!t&&o!=="post";let _;if(Rc){if(o==="sync"){const T=JE();_=T.__watcherHandles||(T.__watcherHandles=[])}else if(!d){const T=()=>{};return T.stop=$s,T.resume=$s,T.pause=$s,T}}const y=Fr;f.call=(T,I,z)=>no(T,y,I,z);let E=!1;o==="post"?f.scheduler=T=>{bi(T,y&&y.suspense)}:o!=="sync"&&(E=!0,f.scheduler=(T,I)=>{I?T():Ng(T)}),f.augmentJob=T=>{t&&(T.flags|=4),E&&(T.flags|=2,y&&(T.id=y.uid,T.i=y))};const S=fE(e,t,f);return Rc&&(_?_.push(S):d&&S()),S}function QE(e,t,n){const r=this.proxy,i=Wn(e)?e.includes(".")?ey(r,e):()=>r[e]:e.bind(r,r);let o;Se(t)?o=t:(o=t.handler,n=t);const u=nh(this),f=ty(i,o.bind(r),n);return u(),f}function ey(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const $E=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${fa(t)}Modifiers`]||e[`${fu(t)}Modifiers`];function tL(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||cn;let i=n;const o=t.startsWith("update:"),u=o&&$E(r,t.slice(7));u&&(u.trim&&(i=n.map(y=>Wn(y)?y.trim():y)),u.number&&(i=n.map(Lf)));let f,d=r[f=Ld(t)]||r[f=Ld(fa(t))];!d&&o&&(d=r[f=Ld(fu(t))]),d&&no(d,e,6,i);const _=r[f+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,no(_,e,6,i)}}function ny(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let u={},f=!1;if(!Se(e)){const d=_=>{const y=ny(_,t,!0);y&&(f=!0,Vr(u,y))};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!o&&!f?(_n(e)&&r.set(e,null),null):(ge(o)?o.forEach(d=>u[d]=null):Vr(u,o),_n(e)&&r.set(e,u),u)}function rp(e,t){return!e||!Xf(t)?!1:(t=t.slice(2).replace(/Once$/,""),rn(e,t[0].toLowerCase()+t.slice(1))||rn(e,fu(t))||rn(e,t))}function Pm(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[o],slots:u,attrs:f,emit:d,render:_,renderCache:y,props:E,data:S,setupState:T,ctx:I,inheritAttrs:z}=e,G=Sf(e);let Q,$;try{if(n.shapeFlag&4){const mt=i||r,bt=mt;Q=Js(_.call(bt,mt,y,E,T,S,I)),$=f}else{const mt=t;Q=Js(mt.length>1?mt(E,{attrs:f,slots:u,emit:d}):mt(E,null)),$=t.props?f:eL(f)}}catch(mt){Mc.length=0,tp(mt,e,1),Q=Gr(Wa)}let rt=Q;if($&&z!==!1){const mt=Object.keys($),{shapeFlag:bt}=rt;mt.length&&bt&7&&(o&&mt.some(xg)&&($=nL($,o)),rt=rl(rt,$,!1,!0))}return n.dirs&&(rt=rl(rt,null,!1,!0),rt.dirs=rt.dirs?rt.dirs.concat(n.dirs):n.dirs),n.transition&&Rg(rt,n.transition),Q=rt,Sf(G),Q}const eL=e=>{let t;for(const n in e)(n==="class"||n==="style"||Xf(n))&&((t||(t={}))[n]=e[n]);return t},nL=(e,t)=>{const n={};for(const r in e)(!xg(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function rL(e,t,n){const{props:r,children:i,component:o}=e,{props:u,children:f,patchFlag:d}=t,_=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return r?Im(r,u,_):!!u;if(d&8){const y=t.dynamicProps;for(let E=0;E<y.length;E++){const S=y[E];if(u[S]!==r[S]&&!rp(_,S))return!0}}}else return(i||f)&&(!f||!f.$stable)?!0:r===u?!1:r?u?Im(r,u,_):!0:!!u;return!1}function Im(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!rp(n,o))return!0}return!1}function iL({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const ry=e=>e.__isSuspense;function sL(e,t){t&&t.pendingBranch?ge(e)?t.effects.push(...e):t.effects.push(e):gE(e)}const gn=Symbol.for("v-fgt"),ip=Symbol.for("v-txt"),Wa=Symbol.for("v-cmt"),ff=Symbol.for("v-stc"),Mc=[];let Si=null;function Ue(e=!1){Mc.push(Si=e?null:[])}function oL(){Mc.pop(),Si=Mc[Mc.length-1]||null}let Nc=1;function Tm(e,t=!1){Nc+=e,e<0&&Si&&t&&(Si.hasOnce=!0)}function iy(e){return e.dynamicChildren=Nc>0?Si||Ju:null,oL(),Nc>0&&Si&&Si.push(e),e}function Ze(e,t,n,r,i,o){return iy(Lt(e,t,n,r,i,o,!0))}function sy(e,t,n,r,i){return iy(Gr(e,t,n,r,i,!0))}function If(e){return e?e.__v_isVNode===!0:!1}function gc(e,t){return e.type===t.type&&e.key===t.key}const oy=({key:e})=>e??null,pf=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Wn(e)||zn(e)||Se(e)?{i:wi,r:e,k:t,f:!!n}:e:null);function Lt(e,t=null,n=null,r=0,i=null,o=e===gn?0:1,u=!1,f=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&oy(t),ref:t&&pf(t),scopeId:R0,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:wi};return f?(Fg(d,n),o&128&&e.normalize(d)):n&&(d.shapeFlag|=Wn(n)?8:16),Nc>0&&!u&&Si&&(d.patchFlag>0||o&6)&&d.patchFlag!==32&&Si.push(d),d}const Gr=aL;function aL(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===TE)&&(e=Wa),If(e)){const f=rl(e,t,!0);return n&&Fg(f,n),Nc>0&&!o&&Si&&(f.shapeFlag&6?Si[Si.indexOf(e)]=f:Si.push(f)),f.patchFlag=-2,f}if(yL(e)&&(e=e.__vccOpts),t){t=uL(t);let{class:f,style:d}=t;f&&!Wn(f)&&(t.class=$u(f)),_n(d)&&(Dg(d)&&!ge(d)&&(d=Vr({},d)),t.style=nl(d))}const u=Wn(e)?1:ry(e)?128:yE(e)?64:_n(e)?4:Se(e)?2:0;return Lt(e,t,n,r,i,u,o,!0)}function uL(e){return e?Dg(e)||H0(e)?Vr({},e):e:null}function rl(e,t,n=!1,r=!1){const{props:i,ref:o,patchFlag:u,children:f,transition:d}=e,_=t?cL(i||{},t):i,y={__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&oy(_),ref:t&&t.ref?n&&o?ge(o)?o.concat(pf(t)):[o,pf(t)]:pf(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==gn?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&rl(e.ssContent),ssFallback:e.ssFallback&&rl(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&r&&Rg(y,d.clone(y)),y}function ay(e=" ",t=0){return Gr(ip,null,e,t)}function lL(e,t){const n=Gr(ff,null,e);return n.staticCount=t,n}function wr(e="",t=!1){return t?(Ue(),sy(Wa,null,e)):Gr(Wa,null,e)}function Js(e){return e==null||typeof e=="boolean"?Gr(Wa):ge(e)?Gr(gn,null,e.slice()):If(e)?ia(e):Gr(ip,null,String(e))}function ia(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:rl(e)}function Fg(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ge(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Fg(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!H0(t)?t._ctx=wi:i===3&&wi&&(wi.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Se(t)?(t={default:t,_ctx:wi},n=32):(t=String(t),r&64?(n=16,t=[ay(t)]):n=8);e.children=t,e.shapeFlag|=n}function cL(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=$u([t.class,r.class]));else if(i==="style")t.style=nl([t.style,r.style]);else if(Xf(i)){const o=t[i],u=r[i];u&&o!==u&&!(ge(o)&&o.includes(u))&&(t[i]=o?[].concat(o,u):u)}else i!==""&&(t[i]=r[i])}return t}function js(e,t,n,r=null){no(e,t,7,[n,r])}const hL=V0();let fL=0;function pL(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||hL,o={uid:fL++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new c0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:K0(r,i),emitsOptions:ny(r,i),emit:null,emitted:null,propsDefaults:cn,inheritAttrs:r.inheritAttrs,ctx:cn,data:cn,props:cn,attrs:cn,slots:cn,refs:cn,setupState:cn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=tL.bind(null,o),e.ce&&e.ce(o),o}let Fr=null,Tf,eg;{const e=Jf(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),o=>{i.length>1?i.forEach(u=>u(o)):i[0](o)}};Tf=t("__VUE_INSTANCE_SETTERS__",n=>Fr=n),eg=t("__VUE_SSR_SETTERS__",n=>Rc=n)}const nh=e=>{const t=Fr;return Tf(e),e.scope.on(),()=>{e.scope.off(),Tf(t)}},Am=()=>{Fr&&Fr.scope.off(),Tf(null)};function uy(e){return e.vnode.shapeFlag&4}let Rc=!1;function dL(e,t=!1,n=!1){t&&eg(t);const{props:r,children:i}=e.vnode,o=uy(e);GE(e,r,o,t),qE(e,i,n);const u=o?gL(e,t):void 0;return t&&eg(!1),u}function gL(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,AE);const{setup:r}=n;if(r){La();const i=e.setupContext=r.length>1?_L(e):null,o=nh(e),u=eh(r,e,0,[e.props,i]),f=n0(u);if(xa(),o(),(f||e.sp)&&!wc(e)&&O0(e),f){if(u.then(Am,Am),t)return u.then(d=>{Dm(e,d)}).catch(d=>{tp(d,e,0)});e.asyncDep=u}else Dm(e,u)}else ly(e)}function Dm(e,t,n){Se(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:_n(t)&&(e.setupState=T0(t)),ly(e)}function ly(e,t,n){const r=e.type;e.render||(e.render=r.render||$s);{const i=nh(e);La();try{DE(e)}finally{xa(),i()}}}const mL={get(e,t){return Or(e,"get",""),e[t]}};function _L(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,mL),slots:e.slots,emit:e.emit,expose:t}}function sp(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(T0(kg(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Sc)return Sc[n](e)},has(t,n){return n in t||n in Sc}})):e.proxy}function yL(e){return Se(e)&&"__vccOpts"in e}const bn=(e,t)=>cE(e,t,Rc);function cy(e,t,n){const r=arguments.length;return r===2?_n(t)&&!ge(t)?If(t)?Gr(e,null,[t]):Gr(e,t):Gr(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&If(n)&&(n=[n]),Gr(e,t,n))}const vL="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ng;const km=typeof window<"u"&&window.trustedTypes;if(km)try{ng=km.createPolicy("vue",{createHTML:e=>e})}catch{}const hy=ng?e=>ng.createHTML(e):e=>e,CL="http://www.w3.org/2000/svg",EL="http://www.w3.org/1998/Math/MathML",wo=typeof document<"u"?document:null,Nm=wo&&wo.createElement("template"),LL={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?wo.createElementNS(CL,e):t==="mathml"?wo.createElementNS(EL,e):n?wo.createElement(e,{is:n}):wo.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>wo.createTextNode(e),createComment:e=>wo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>wo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const u=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Nm.innerHTML=hy(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const f=Nm.content;if(r==="svg"||r==="mathml"){const d=f.firstChild;for(;d.firstChild;)f.appendChild(d.firstChild);f.removeChild(d)}t.insertBefore(f,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},xL=Symbol("_vtc");function bL(e,t,n){const r=e[xL];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Rm=Symbol("_vod"),wL=Symbol("_vsh"),SL=Symbol(""),ML=/(^|;)\s*display\s*:/;function PL(e,t,n){const r=e.style,i=Wn(n);let o=!1;if(n&&!i){if(t)if(Wn(t))for(const u of t.split(";")){const f=u.slice(0,u.indexOf(":")).trim();n[f]==null&&df(r,f,"")}else for(const u in t)n[u]==null&&df(r,u,"");for(const u in n)u==="display"&&(o=!0),df(r,u,n[u])}else if(i){if(t!==n){const u=r[SL];u&&(n+=";"+u),r.cssText=n,o=ML.test(n)}}else t&&e.removeAttribute("style");Rm in e&&(e[Rm]=o?r.display:"",e[wL]&&(r.display="none"))}const Om=/\s*!important$/;function df(e,t,n){if(ge(n))n.forEach(r=>df(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=IL(e,t);Om.test(n)?e.setProperty(fu(r),n.replace(Om,""),"important"):e[r]=n}}const Bm=["Webkit","Moz","ms"],Id={};function IL(e,t){const n=Id[t];if(n)return n;let r=fa(t);if(r!=="filter"&&r in e)return Id[t]=r;r=s0(r);for(let i=0;i<Bm.length;i++){const o=Bm[i]+r;if(o in e)return Id[t]=o}return t}const Fm="http://www.w3.org/1999/xlink";function zm(e,t,n,r,i,o=NC(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Fm,t.slice(6,t.length)):e.setAttributeNS(Fm,t,n):n==null||o&&!a0(n)?e.removeAttribute(t):e.setAttribute(t,o?"":eo(n)?String(n):n)}function Gm(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?hy(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const f=o==="OPTION"?e.getAttribute("value")||"":e.value,d=n==null?e.type==="checkbox"?"on":"":String(n);(f!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let u=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=a0(n):n==null&&f==="string"?(n="",u=!0):f==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(i||t)}function ja(e,t,n,r){e.addEventListener(t,n,r)}function TL(e,t,n,r){e.removeEventListener(t,n,r)}const Um=Symbol("_vei");function AL(e,t,n,r,i=null){const o=e[Um]||(e[Um]={}),u=o[t];if(r&&u)u.value=r;else{const[f,d]=DL(t);if(r){const _=o[t]=RL(r,i);ja(e,f,_,d)}else u&&(TL(e,f,u,d),o[t]=void 0)}}const Vm=/(?:Once|Passive|Capture)$/;function DL(e){let t;if(Vm.test(e)){t={};let r;for(;r=e.match(Vm);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):fu(e.slice(2)),t]}let Td=0;const kL=Promise.resolve(),NL=()=>Td||(kL.then(()=>Td=0),Td=Date.now());function RL(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;no(OL(r,n.value),t,5,[r])};return n.value=e,n.attached=NL(),n}function OL(e,t){if(ge(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const jm=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,BL=(e,t,n,r,i,o)=>{const u=i==="svg";t==="class"?bL(e,r,u):t==="style"?PL(e,n,r):Xf(t)?xg(t)||AL(e,t,n,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):FL(e,t,r,u))?(Gm(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&zm(e,t,r,u,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Wn(r))?Gm(e,fa(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),zm(e,t,r,u))};function FL(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&jm(t)&&Se(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return jm(t)&&Wn(n)?!1:t in e}const Af=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ge(t)?n=>cf(t,n):t};function zL(e){e.target.composing=!0}function qm(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const el=Symbol("_assign"),Ad={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[el]=Af(i);const o=r||i.props&&i.props.type==="number";ja(e,t?"change":"input",u=>{if(u.target.composing)return;let f=e.value;n&&(f=f.trim()),o&&(f=Lf(f)),e[el](f)}),n&&ja(e,"change",()=>{e.value=e.value.trim()}),t||(ja(e,"compositionstart",zL),ja(e,"compositionend",qm),ja(e,"change",qm))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:o}},u){if(e[el]=Af(u),e.composing)return;const f=(o||e.type==="number")&&!/^0\d/.test(e.value)?Lf(e.value):e.value,d=t??"";f!==d&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===d)||(e.value=d))}},GL={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=Yf(t);ja(e,"change",()=>{const o=Array.prototype.filter.call(e.options,u=>u.selected).map(u=>n?Lf(Df(u)):Df(u));e[el](e.multiple?i?new Set(o):o:o[0]),e._assigning=!0,ep(()=>{e._assigning=!1})}),e[el]=Af(r)},mounted(e,{value:t}){Hm(e,t)},beforeUpdate(e,t,n){e[el]=Af(n)},updated(e,{value:t}){e._assigning||Hm(e,t)}};function Hm(e,t){const n=e.multiple,r=ge(t);if(!(n&&!r&&!Yf(t))){for(let i=0,o=e.options.length;i<o;i++){const u=e.options[i],f=Df(u);if(n)if(r){const d=typeof f;d==="string"||d==="number"?u.selected=t.some(_=>String(_)===String(f)):u.selected=OC(t,f)>-1}else u.selected=t.has(f);else if(Qf(Df(u),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Df(e){return"_value"in e?e._value:e.value}const UL=["ctrl","shift","alt","meta"],VL={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>UL.some(n=>e[`${n}Key`]&&!t.includes(n))},jL=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(i,...o)=>{for(let u=0;u<t.length;u++){const f=VL[t[u]];if(f&&f(i,t))return}return e(i,...o)})},qL=Vr({patchProp:BL},LL);let Zm;function HL(){return Zm||(Zm=ZE(qL))}const ZL=(...e)=>{const t=HL().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=XL(r);if(!i)return;const o=t._component;!Se(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const u=n(i,!1,KL(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),u},t};function KL(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function XL(e){return Wn(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let fy;const op=e=>fy=e,py=Symbol();function rg(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Pc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Pc||(Pc={}));function YL(){const e=h0(!0),t=e.run(()=>Hn({}));let n=[],r=[];const i=kg({install(o){op(i),i._a=o,o.provide(py,i),o.config.globalProperties.$pinia=i,r.forEach(u=>n.push(u)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const dy=()=>{};function Km(e,t,n,r=dy){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),r())};return!n&&f0()&&BC(i),i}function Ku(e,...t){e.slice().forEach(n=>{n(...t)})}const WL=e=>e(),Xm=Symbol(),Dd=Symbol();function ig(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];rg(i)&&rg(r)&&e.hasOwnProperty(n)&&!zn(r)&&!ua(r)?e[n]=ig(i,r):e[n]=r}return e}const JL=Symbol();function QL(e){return!rg(e)||!e.hasOwnProperty(JL)}const{assign:na}=Object;function $L(e){return!!(zn(e)&&e.effect)}function tx(e,t,n,r){const{state:i,actions:o,getters:u}=t,f=n.state.value[e];let d;function _(){f||(n.state.value[e]=i?i():{});const y=oE(n.state.value[e]);return na(y,o,Object.keys(u||{}).reduce((E,S)=>(E[S]=kg(bn(()=>{op(n);const T=n._s.get(e);return u[S].call(T,T)})),E),{}))}return d=gy(e,_,t,n,r,!0),d}function gy(e,t,n={},r,i,o){let u;const f=na({actions:{}},n),d={deep:!0};let _,y,E=[],S=[],T;const I=r.state.value[e];!o&&!I&&(r.state.value[e]={}),Hn({});let z;function G(Ft){let Nt;_=y=!1,typeof Ft=="function"?(Ft(r.state.value[e]),Nt={type:Pc.patchFunction,storeId:e,events:T}):(ig(r.state.value[e],Ft),Nt={type:Pc.patchObject,payload:Ft,storeId:e,events:T});const te=z=Symbol();ep().then(()=>{z===te&&(_=!0)}),y=!0,Ku(E,Nt,r.state.value[e])}const Q=o?function(){const{state:Nt}=n,te=Nt?Nt():{};this.$patch(Ht=>{na(Ht,te)})}:dy;function $(){u.stop(),E=[],S=[],r._s.delete(e)}const rt=(Ft,Nt="")=>{if(Xm in Ft)return Ft[Dd]=Nt,Ft;const te=function(){op(r);const Ht=Array.from(arguments),ee=[],Ie=[];function Rt(Zt){ee.push(Zt)}function le(Zt){Ie.push(Zt)}Ku(S,{args:Ht,name:te[Dd],store:bt,after:Rt,onError:le});let jt;try{jt=Ft.apply(this&&this.$id===e?this:bt,Ht)}catch(Zt){throw Ku(Ie,Zt),Zt}return jt instanceof Promise?jt.then(Zt=>(Ku(ee,Zt),Zt)).catch(Zt=>(Ku(Ie,Zt),Promise.reject(Zt))):(Ku(ee,jt),jt)};return te[Xm]=!0,te[Dd]=Nt,te},mt={_p:r,$id:e,$onAction:Km.bind(null,S),$patch:G,$reset:Q,$subscribe(Ft,Nt={}){const te=Km(E,Ft,Nt.detached,()=>Ht()),Ht=u.run(()=>la(()=>r.state.value[e],ee=>{(Nt.flush==="sync"?y:_)&&Ft({storeId:e,type:Pc.direct,events:T},ee)},na({},d,Nt)));return te},$dispose:$},bt=th(mt);r._s.set(e,bt);const Bt=(r._a&&r._a.runWithContext||WL)(()=>r._e.run(()=>(u=h0()).run(()=>t({action:rt}))));for(const Ft in Bt){const Nt=Bt[Ft];if(zn(Nt)&&!$L(Nt)||ua(Nt))o||(I&&QL(Nt)&&(zn(Nt)?Nt.value=I[Ft]:ig(Nt,I[Ft])),r.state.value[e][Ft]=Nt);else if(typeof Nt=="function"){const te=rt(Nt,Ft);Bt[Ft]=te,f.actions[Ft]=Nt}}return na(bt,Bt),na(Ye(bt),Bt),Object.defineProperty(bt,"$state",{get:()=>r.state.value[e],set:Ft=>{G(Nt=>{na(Nt,Ft)})}}),r._p.forEach(Ft=>{na(bt,u.run(()=>Ft({store:bt,app:r._a,pinia:r,options:f})))}),I&&o&&n.hydrate&&n.hydrate(bt.$state,I),_=!0,y=!0,bt}/*! #__NO_SIDE_EFFECTS__ */function my(e,t,n){let r,i;const o=typeof t=="function";typeof e=="string"?(r=e,i=o?n:t):(i=e,r=e.id);function u(f,d){const _=zE();return f=f||(_?Cs(py,null):null),f&&op(f),f=fy,f._s.has(r)||(o?gy(r,t,i,f):tx(r,i,f)),f._s.get(r)}return u.$id=r,u}/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Yu=typeof document<"u";function _y(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ex(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&_y(e.default)}const nn=Object.assign;function kd(e,t){const n={};for(const r in t){const i=t[r];n[r]=xs(i)?i.map(e):e(i)}return n}const Ic=()=>{},xs=Array.isArray,yy=/#/g,nx=/&/g,rx=/\//g,ix=/=/g,sx=/\?/g,vy=/\+/g,ox=/%5B/g,ax=/%5D/g,Cy=/%5E/g,ux=/%60/g,Ey=/%7B/g,lx=/%7C/g,Ly=/%7D/g,cx=/%20/g;function zg(e){return encodeURI(""+e).replace(lx,"|").replace(ox,"[").replace(ax,"]")}function hx(e){return zg(e).replace(Ey,"{").replace(Ly,"}").replace(Cy,"^")}function sg(e){return zg(e).replace(vy,"%2B").replace(cx,"+").replace(yy,"%23").replace(nx,"%26").replace(ux,"`").replace(Ey,"{").replace(Ly,"}").replace(Cy,"^")}function fx(e){return sg(e).replace(ix,"%3D")}function px(e){return zg(e).replace(yy,"%23").replace(sx,"%3F")}function dx(e){return e==null?"":px(e).replace(rx,"%2F")}function Oc(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const gx=/\/$/,mx=e=>e.replace(gx,"");function Nd(e,t,n="/"){let r,i={},o="",u="";const f=t.indexOf("#");let d=t.indexOf("?");return f<d&&f>=0&&(d=-1),d>-1&&(r=t.slice(0,d),o=t.slice(d+1,f>-1?f:t.length),i=e(o)),f>-1&&(r=r||t.slice(0,f),u=t.slice(f,t.length)),r=Cx(r??t,n),{fullPath:r+(o&&"?")+o+u,path:r,query:i,hash:Oc(u)}}function _x(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Ym(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function yx(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&il(t.matched[r],n.matched[i])&&xy(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function il(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function xy(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!vx(e[n],t[n]))return!1;return!0}function vx(e,t){return xs(e)?Wm(e,t):xs(t)?Wm(t,e):e===t}function Wm(e,t){return xs(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Cx(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=n.length-1,u,f;for(u=0;u<r.length;u++)if(f=r[u],f!==".")if(f==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(u).join("/")}const $o={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Bc;(function(e){e.pop="pop",e.push="push"})(Bc||(Bc={}));var Tc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Tc||(Tc={}));function Ex(e){if(!e)if(Yu){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),mx(e)}const Lx=/^[^#]+#/;function xx(e,t){return e.replace(Lx,"#")+t}function bx(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const ap=()=>({left:window.scrollX,top:window.scrollY});function wx(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=bx(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Jm(e,t){return(history.state?history.state.position-t:-1)+e}const og=new Map;function Sx(e,t){og.set(e,t)}function Mx(e){const t=og.get(e);return og.delete(e),t}let Px=()=>location.protocol+"//"+location.host;function by(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let f=i.includes(e.slice(o))?e.slice(o).length:1,d=i.slice(f);return d[0]!=="/"&&(d="/"+d),Ym(d,"")}return Ym(n,e)+r+i}function Ix(e,t,n,r){let i=[],o=[],u=null;const f=({state:S})=>{const T=by(e,location),I=n.value,z=t.value;let G=0;if(S){if(n.value=T,t.value=S,u&&u===I){u=null;return}G=z?S.position-z.position:0}else r(T);i.forEach(Q=>{Q(n.value,I,{delta:G,type:Bc.pop,direction:G?G>0?Tc.forward:Tc.back:Tc.unknown})})};function d(){u=n.value}function _(S){i.push(S);const T=()=>{const I=i.indexOf(S);I>-1&&i.splice(I,1)};return o.push(T),T}function y(){const{history:S}=window;S.state&&S.replaceState(nn({},S.state,{scroll:ap()}),"")}function E(){for(const S of o)S();o=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",y)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",y,{passive:!0}),{pauseListeners:d,listen:_,destroy:E}}function Qm(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?ap():null}}function Tx(e){const{history:t,location:n}=window,r={value:by(e,n)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(d,_,y){const E=e.indexOf("#"),S=E>-1?(n.host&&document.querySelector("base")?e:e.slice(E))+d:Px()+e+d;try{t[y?"replaceState":"pushState"](_,"",S),i.value=_}catch(T){console.error(T),n[y?"replace":"assign"](S)}}function u(d,_){const y=nn({},t.state,Qm(i.value.back,d,i.value.forward,!0),_,{position:i.value.position});o(d,y,!0),r.value=d}function f(d,_){const y=nn({},i.value,t.state,{forward:d,scroll:ap()});o(y.current,y,!0);const E=nn({},Qm(r.value,d,null),{position:y.position+1},_);o(d,E,!1),r.value=d}return{location:r,state:i,push:f,replace:u}}function Ax(e){e=Ex(e);const t=Tx(e),n=Ix(e,t.state,t.location,t.replace);function r(o,u=!0){u||n.pauseListeners(),history.go(o)}const i=nn({location:"",base:e,go:r,createHref:xx.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Dx(e){return typeof e=="string"||e&&typeof e=="object"}function wy(e){return typeof e=="string"||typeof e=="symbol"}const Sy=Symbol("");var $m;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})($m||($m={}));function sl(e,t){return nn(new Error,{type:e,[Sy]:!0},t)}function bo(e,t){return e instanceof Error&&Sy in e&&(t==null||!!(e.type&t))}const t_="[^/]+?",kx={sensitive:!1,strict:!1,start:!0,end:!0},Nx=/[.+*?^${}()[\]/\\]/g;function Rx(e,t){const n=nn({},kx,t),r=[];let i=n.start?"^":"";const o=[];for(const _ of e){const y=_.length?[]:[90];n.strict&&!_.length&&(i+="/");for(let E=0;E<_.length;E++){const S=_[E];let T=40+(n.sensitive?.25:0);if(S.type===0)E||(i+="/"),i+=S.value.replace(Nx,"\\$&"),T+=40;else if(S.type===1){const{value:I,repeatable:z,optional:G,regexp:Q}=S;o.push({name:I,repeatable:z,optional:G});const $=Q||t_;if($!==t_){T+=10;try{new RegExp(`(${$})`)}catch(mt){throw new Error(`Invalid custom RegExp for param "${I}" (${$}): `+mt.message)}}let rt=z?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;E||(rt=G&&_.length<2?`(?:/${rt})`:"/"+rt),G&&(rt+="?"),i+=rt,T+=20,G&&(T+=-8),z&&(T+=-20),$===".*"&&(T+=-50)}y.push(T)}r.push(y)}if(n.strict&&n.end){const _=r.length-1;r[_][r[_].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const u=new RegExp(i,n.sensitive?"":"i");function f(_){const y=_.match(u),E={};if(!y)return null;for(let S=1;S<y.length;S++){const T=y[S]||"",I=o[S-1];E[I.name]=T&&I.repeatable?T.split("/"):T}return E}function d(_){let y="",E=!1;for(const S of e){(!E||!y.endsWith("/"))&&(y+="/"),E=!1;for(const T of S)if(T.type===0)y+=T.value;else if(T.type===1){const{value:I,repeatable:z,optional:G}=T,Q=I in _?_[I]:"";if(xs(Q)&&!z)throw new Error(`Provided param "${I}" is an array but it is not repeatable (* or + modifiers)`);const $=xs(Q)?Q.join("/"):Q;if(!$)if(G)S.length<2&&(y.endsWith("/")?y=y.slice(0,-1):E=!0);else throw new Error(`Missing required param "${I}"`);y+=$}}return y||"/"}return{re:u,score:r,keys:o,parse:f,stringify:d}}function Ox(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function My(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const o=Ox(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(e_(r))return 1;if(e_(i))return-1}return i.length-r.length}function e_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Bx={type:0,value:""},Fx=/[a-zA-Z0-9_]/;function zx(e){if(!e)return[[]];if(e==="/")return[[Bx]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(T){throw new Error(`ERR (${n})/"${_}": ${T}`)}let n=0,r=n;const i=[];let o;function u(){o&&i.push(o),o=[]}let f=0,d,_="",y="";function E(){_&&(n===0?o.push({type:0,value:_}):n===1||n===2||n===3?(o.length>1&&(d==="*"||d==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:_,regexp:y,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):t("Invalid state to consume buffer"),_="")}function S(){_+=d}for(;f<e.length;){if(d=e[f++],d==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:d==="/"?(_&&E(),u()):d===":"?(E(),n=1):S();break;case 4:S(),n=r;break;case 1:d==="("?n=2:Fx.test(d)?S():(E(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&f--);break;case 2:d===")"?y[y.length-1]=="\\"?y=y.slice(0,-1)+d:n=3:y+=d;break;case 3:E(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&f--,y="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${_}"`),E(),u(),i}function Gx(e,t,n){const r=Rx(zx(e.path),n),i=nn(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Ux(e,t){const n=[],r=new Map;t=s_({strict:!1,end:!0,sensitive:!1},t);function i(E){return r.get(E)}function o(E,S,T){const I=!T,z=r_(E);z.aliasOf=T&&T.record;const G=s_(t,E),Q=[z];if("alias"in E){const mt=typeof E.alias=="string"?[E.alias]:E.alias;for(const bt of mt)Q.push(r_(nn({},z,{components:T?T.record.components:z.components,path:bt,aliasOf:T?T.record:z})))}let $,rt;for(const mt of Q){const{path:bt}=mt;if(S&&bt[0]!=="/"){const Dt=S.record.path,Bt=Dt[Dt.length-1]==="/"?"":"/";mt.path=S.record.path+(bt&&Bt+bt)}if($=Gx(mt,S,G),T?T.alias.push($):(rt=rt||$,rt!==$&&rt.alias.push($),I&&E.name&&!i_($)&&u(E.name)),Py($)&&d($),z.children){const Dt=z.children;for(let Bt=0;Bt<Dt.length;Bt++)o(Dt[Bt],$,T&&T.children[Bt])}T=T||$}return rt?()=>{u(rt)}:Ic}function u(E){if(wy(E)){const S=r.get(E);S&&(r.delete(E),n.splice(n.indexOf(S),1),S.children.forEach(u),S.alias.forEach(u))}else{const S=n.indexOf(E);S>-1&&(n.splice(S,1),E.record.name&&r.delete(E.record.name),E.children.forEach(u),E.alias.forEach(u))}}function f(){return n}function d(E){const S=qx(E,n);n.splice(S,0,E),E.record.name&&!i_(E)&&r.set(E.record.name,E)}function _(E,S){let T,I={},z,G;if("name"in E&&E.name){if(T=r.get(E.name),!T)throw sl(1,{location:E});G=T.record.name,I=nn(n_(S.params,T.keys.filter(rt=>!rt.optional).concat(T.parent?T.parent.keys.filter(rt=>rt.optional):[]).map(rt=>rt.name)),E.params&&n_(E.params,T.keys.map(rt=>rt.name))),z=T.stringify(I)}else if(E.path!=null)z=E.path,T=n.find(rt=>rt.re.test(z)),T&&(I=T.parse(z),G=T.record.name);else{if(T=S.name?r.get(S.name):n.find(rt=>rt.re.test(S.path)),!T)throw sl(1,{location:E,currentLocation:S});G=T.record.name,I=nn({},S.params,E.params),z=T.stringify(I)}const Q=[];let $=T;for(;$;)Q.unshift($.record),$=$.parent;return{name:G,path:z,params:I,matched:Q,meta:jx(Q)}}e.forEach(E=>o(E));function y(){n.length=0,r.clear()}return{addRoute:o,resolve:_,removeRoute:u,clearRoutes:y,getRoutes:f,getRecordMatcher:i}}function n_(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function r_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Vx(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Vx(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function i_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function jx(e){return e.reduce((t,n)=>nn(t,n.meta),{})}function s_(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function qx(e,t){let n=0,r=t.length;for(;n!==r;){const o=n+r>>1;My(e,t[o])<0?r=o:n=o+1}const i=Hx(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function Hx(e){let t=e;for(;t=t.parent;)if(Py(t)&&My(e,t)===0)return t}function Py({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Zx(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(vy," "),u=o.indexOf("="),f=Oc(u<0?o:o.slice(0,u)),d=u<0?null:Oc(o.slice(u+1));if(f in t){let _=t[f];xs(_)||(_=t[f]=[_]),_.push(d)}else t[f]=d}return t}function o_(e){let t="";for(let n in e){const r=e[n];if(n=fx(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(xs(r)?r.map(o=>o&&sg(o)):[r&&sg(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function Kx(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=xs(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const Xx=Symbol(""),a_=Symbol(""),up=Symbol(""),Iy=Symbol(""),ag=Symbol("");function mc(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function sa(e,t,n,r,i,o=u=>u()){const u=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((f,d)=>{const _=S=>{S===!1?d(sl(4,{from:n,to:t})):S instanceof Error?d(S):Dx(S)?d(sl(2,{from:t,to:S})):(u&&r.enterCallbacks[i]===u&&typeof S=="function"&&u.push(S),f())},y=o(()=>e.call(r&&r.instances[i],t,n,_));let E=Promise.resolve(y);e.length<3&&(E=E.then(_)),E.catch(S=>d(S))})}function Rd(e,t,n,r,i=o=>o()){const o=[];for(const u of e)for(const f in u.components){let d=u.components[f];if(!(t!=="beforeRouteEnter"&&!u.instances[f]))if(_y(d)){const y=(d.__vccOpts||d)[t];y&&o.push(sa(y,n,r,u,f,i))}else{let _=d();o.push(()=>_.then(y=>{if(!y)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const E=ex(y)?y.default:y;u.mods[f]=y,u.components[f]=E;const T=(E.__vccOpts||E)[t];return T&&sa(T,n,r,u,f,i)()}))}}return o}function u_(e){const t=Cs(up),n=Cs(Iy),r=bn(()=>{const d=Za(e.to);return t.resolve(d)}),i=bn(()=>{const{matched:d}=r.value,{length:_}=d,y=d[_-1],E=n.matched;if(!y||!E.length)return-1;const S=E.findIndex(il.bind(null,y));if(S>-1)return S;const T=l_(d[_-2]);return _>1&&l_(y)===T&&E[E.length-1].path!==T?E.findIndex(il.bind(null,d[_-2])):S}),o=bn(()=>i.value>-1&&$x(n.params,r.value.params)),u=bn(()=>i.value>-1&&i.value===n.matched.length-1&&xy(n.params,r.value.params));function f(d={}){if(Qx(d)){const _=t[Za(e.replace)?"replace":"push"](Za(e.to)).catch(Ic);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>_),_}return Promise.resolve()}return{route:r,href:bn(()=>r.value.href),isActive:o,isExactActive:u,navigate:f}}function Yx(e){return e.length===1?e[0]:e}const Wx=Ml({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:u_,setup(e,{slots:t}){const n=th(u_(e)),{options:r}=Cs(up),i=bn(()=>({[c_(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[c_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&Yx(t.default(n));return e.custom?o:cy("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Jx=Wx;function Qx(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function $x(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!xs(i)||i.length!==r.length||r.some((o,u)=>o!==i[u]))return!1}return!0}function l_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const c_=(e,t,n)=>e??t??n,tb=Ml({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Cs(ag),i=bn(()=>e.route||r.value),o=Cs(a_,0),u=bn(()=>{let _=Za(o);const{matched:y}=i.value;let E;for(;(E=y[_])&&!E.components;)_++;return _}),f=bn(()=>i.value.matched[u.value]);hf(a_,bn(()=>u.value+1)),hf(Xx,f),hf(ag,i);const d=Hn();return la(()=>[d.value,f.value,e.name],([_,y,E],[S,T,I])=>{y&&(y.instances[E]=_,T&&T!==y&&_&&_===S&&(y.leaveGuards.size||(y.leaveGuards=T.leaveGuards),y.updateGuards.size||(y.updateGuards=T.updateGuards))),_&&y&&(!T||!il(y,T)||!S)&&(y.enterCallbacks[E]||[]).forEach(z=>z(_))},{flush:"post"}),()=>{const _=i.value,y=e.name,E=f.value,S=E&&E.components[y];if(!S)return h_(n.default,{Component:S,route:_});const T=E.props[y],I=T?T===!0?_.params:typeof T=="function"?T(_):T:null,G=cy(S,nn({},I,t,{onVnodeUnmounted:Q=>{Q.component.isUnmounted&&(E.instances[y]=null)},ref:d}));return h_(n.default,{Component:G,route:_})||G}}});function h_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Ty=tb;function eb(e){const t=Ux(e.routes,e),n=e.parseQuery||Zx,r=e.stringifyQuery||o_,i=e.history,o=mc(),u=mc(),f=mc(),d=rE($o);let _=$o;Yu&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const y=kd.bind(null,Et=>""+Et),E=kd.bind(null,dx),S=kd.bind(null,Oc);function T(Et,Y){let J,W;return wy(Et)?(J=t.getRecordMatcher(Et),W=Y):W=Et,t.addRoute(W,J)}function I(Et){const Y=t.getRecordMatcher(Et);Y&&t.removeRoute(Y)}function z(){return t.getRoutes().map(Et=>Et.record)}function G(Et){return!!t.getRecordMatcher(Et)}function Q(Et,Y){if(Y=nn({},Y||d.value),typeof Et=="string"){const et=Nd(n,Et,Y.path),_t=t.resolve({path:et.path},Y),Ct=i.createHref(et.fullPath);return nn(et,_t,{params:S(_t.params),hash:Oc(et.hash),redirectedFrom:void 0,href:Ct})}let J;if(Et.path!=null)J=nn({},Et,{path:Nd(n,Et.path,Y.path).path});else{const et=nn({},Et.params);for(const _t in et)et[_t]==null&&delete et[_t];J=nn({},Et,{params:E(et)}),Y.params=E(Y.params)}const W=t.resolve(J,Y),zt=Et.hash||"";W.params=y(S(W.params));const F=_x(r,nn({},Et,{hash:hx(zt),path:W.path})),V=i.createHref(F);return nn({fullPath:F,hash:zt,query:r===o_?Kx(Et.query):Et.query||{}},W,{redirectedFrom:void 0,href:V})}function $(Et){return typeof Et=="string"?Nd(n,Et,d.value.path):nn({},Et)}function rt(Et,Y){if(_!==Et)return sl(8,{from:Y,to:Et})}function mt(Et){return Bt(Et)}function bt(Et){return mt(nn($(Et),{replace:!0}))}function Dt(Et){const Y=Et.matched[Et.matched.length-1];if(Y&&Y.redirect){const{redirect:J}=Y;let W=typeof J=="function"?J(Et):J;return typeof W=="string"&&(W=W.includes("?")||W.includes("#")?W=$(W):{path:W},W.params={}),nn({query:Et.query,hash:Et.hash,params:W.path!=null?{}:Et.params},W)}}function Bt(Et,Y){const J=_=Q(Et),W=d.value,zt=Et.state,F=Et.force,V=Et.replace===!0,et=Dt(J);if(et)return Bt(nn($(et),{state:typeof et=="object"?nn({},zt,et.state):zt,force:F,replace:V}),Y||J);const _t=J;_t.redirectedFrom=Y;let Ct;return!F&&yx(r,W,J)&&(Ct=sl(16,{to:_t,from:W}),de(W,W,!0,!1)),(Ct?Promise.resolve(Ct):te(_t,W)).catch(yt=>bo(yt)?bo(yt,2)?yt:Yt(yt):kt(yt,_t,W)).then(yt=>{if(yt){if(bo(yt,2))return Bt(nn({replace:V},$(yt.to),{state:typeof yt.to=="object"?nn({},zt,yt.to.state):zt,force:F}),Y||_t)}else yt=ee(_t,W,!0,V,zt);return Ht(_t,W,yt),yt})}function Ft(Et,Y){const J=rt(Et,Y);return J?Promise.reject(J):Promise.resolve()}function Nt(Et){const Y=ke.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(Et):Et()}function te(Et,Y){let J;const[W,zt,F]=nb(Et,Y);J=Rd(W.reverse(),"beforeRouteLeave",Et,Y);for(const et of W)et.leaveGuards.forEach(_t=>{J.push(sa(_t,Et,Y))});const V=Ft.bind(null,Et,Y);return J.push(V),ce(J).then(()=>{J=[];for(const et of o.list())J.push(sa(et,Et,Y));return J.push(V),ce(J)}).then(()=>{J=Rd(zt,"beforeRouteUpdate",Et,Y);for(const et of zt)et.updateGuards.forEach(_t=>{J.push(sa(_t,Et,Y))});return J.push(V),ce(J)}).then(()=>{J=[];for(const et of F)if(et.beforeEnter)if(xs(et.beforeEnter))for(const _t of et.beforeEnter)J.push(sa(_t,Et,Y));else J.push(sa(et.beforeEnter,Et,Y));return J.push(V),ce(J)}).then(()=>(Et.matched.forEach(et=>et.enterCallbacks={}),J=Rd(F,"beforeRouteEnter",Et,Y,Nt),J.push(V),ce(J))).then(()=>{J=[];for(const et of u.list())J.push(sa(et,Et,Y));return J.push(V),ce(J)}).catch(et=>bo(et,8)?et:Promise.reject(et))}function Ht(Et,Y,J){f.list().forEach(W=>Nt(()=>W(Et,Y,J)))}function ee(Et,Y,J,W,zt){const F=rt(Et,Y);if(F)return F;const V=Y===$o,et=Yu?history.state:{};J&&(W||V?i.replace(Et.fullPath,nn({scroll:V&&et&&et.scroll},zt)):i.push(Et.fullPath,zt)),d.value=Et,de(Et,Y,J,V),Yt()}let Ie;function Rt(){Ie||(Ie=i.listen((Et,Y,J)=>{if(!ye.listening)return;const W=Q(Et),zt=Dt(W);if(zt){Bt(nn(zt,{replace:!0,force:!0}),W).catch(Ic);return}_=W;const F=d.value;Yu&&Sx(Jm(F.fullPath,J.delta),ap()),te(W,F).catch(V=>bo(V,12)?V:bo(V,2)?(Bt(nn($(V.to),{force:!0}),W).then(et=>{bo(et,20)&&!J.delta&&J.type===Bc.pop&&i.go(-1,!1)}).catch(Ic),Promise.reject()):(J.delta&&i.go(-J.delta,!1),kt(V,W,F))).then(V=>{V=V||ee(W,F,!1),V&&(J.delta&&!bo(V,8)?i.go(-J.delta,!1):J.type===Bc.pop&&bo(V,20)&&i.go(-1,!1)),Ht(W,F,V)}).catch(Ic)}))}let le=mc(),jt=mc(),Zt;function kt(Et,Y,J){Yt(Et);const W=jt.list();return W.length?W.forEach(zt=>zt(Et,Y,J)):console.error(Et),Promise.reject(Et)}function tn(){return Zt&&d.value!==$o?Promise.resolve():new Promise((Et,Y)=>{le.add([Et,Y])})}function Yt(Et){return Zt||(Zt=!Et,Rt(),le.list().forEach(([Y,J])=>Et?J(Et):Y()),le.reset()),Et}function de(Et,Y,J,W){const{scrollBehavior:zt}=e;if(!Yu||!zt)return Promise.resolve();const F=!J&&Mx(Jm(Et.fullPath,0))||(W||!J)&&history.state&&history.state.scroll||null;return ep().then(()=>zt(Et,Y,F)).then(V=>V&&wx(V)).catch(V=>kt(V,Et,Y))}const Me=Et=>i.go(Et);let ze;const ke=new Set,ye={currentRoute:d,listening:!0,addRoute:T,removeRoute:I,clearRoutes:t.clearRoutes,hasRoute:G,getRoutes:z,resolve:Q,options:e,push:mt,replace:bt,go:Me,back:()=>Me(-1),forward:()=>Me(1),beforeEach:o.add,beforeResolve:u.add,afterEach:f.add,onError:jt.add,isReady:tn,install(Et){const Y=this;Et.component("RouterLink",Jx),Et.component("RouterView",Ty),Et.config.globalProperties.$router=Y,Object.defineProperty(Et.config.globalProperties,"$route",{enumerable:!0,get:()=>Za(d)}),Yu&&!ze&&d.value===$o&&(ze=!0,mt(i.location).catch(zt=>{}));const J={};for(const zt in $o)Object.defineProperty(J,zt,{get:()=>d.value[zt],enumerable:!0});Et.provide(up,Y),Et.provide(Iy,M0(J)),Et.provide(ag,d);const W=Et.unmount;ke.add(Et),Et.unmount=function(){ke.delete(Et),ke.size<1&&(_=$o,Ie&&Ie(),Ie=null,d.value=$o,ze=!1,Zt=!1),W()}}};function ce(Et){return Et.reduce((Y,J)=>Y.then(()=>Nt(J)),Promise.resolve())}return ye}function nb(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let u=0;u<o;u++){const f=t.matched[u];f&&(e.matched.find(_=>il(_,f))?r.push(f):n.push(f));const d=e.matched[u];d&&(t.matched.find(_=>il(_,d))||i.push(d))}return[n,r,i]}function rb(){return Cs(up)}function Ay(e,t){return function(){return e.apply(t,arguments)}}const{toString:ib}=Object.prototype,{getPrototypeOf:Gg}=Object,lp=(e=>t=>{const n=ib.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ks=e=>(e=e.toLowerCase(),t=>lp(t)===e),cp=e=>t=>typeof t===e,{isArray:Pl}=Array,Fc=cp("undefined");function sb(e){return e!==null&&!Fc(e)&&e.constructor!==null&&!Fc(e.constructor)&&Mi(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Dy=ks("ArrayBuffer");function ob(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Dy(e.buffer),t}const ab=cp("string"),Mi=cp("function"),ky=cp("number"),hp=e=>e!==null&&typeof e=="object",ub=e=>e===!0||e===!1,gf=e=>{if(lp(e)!=="object")return!1;const t=Gg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lb=ks("Date"),cb=ks("File"),hb=ks("Blob"),fb=ks("FileList"),pb=e=>hp(e)&&Mi(e.pipe),db=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Mi(e.append)&&((t=lp(e))==="formdata"||t==="object"&&Mi(e.toString)&&e.toString()==="[object FormData]"))},gb=ks("URLSearchParams"),[mb,_b,yb,vb]=["ReadableStream","Request","Response","Headers"].map(ks),Cb=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rh(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Pl(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),u=o.length;let f;for(r=0;r<u;r++)f=o[r],t.call(null,e[f],f,e)}}function Ny(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const qa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ry=e=>!Fc(e)&&e!==qa;function ug(){const{caseless:e}=Ry(this)&&this||{},t={},n=(r,i)=>{const o=e&&Ny(t,i)||i;gf(t[o])&&gf(r)?t[o]=ug(t[o],r):gf(r)?t[o]=ug({},r):Pl(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&rh(arguments[r],n);return t}const Eb=(e,t,n,{allOwnKeys:r}={})=>(rh(t,(i,o)=>{n&&Mi(i)?e[o]=Ay(i,n):e[o]=i},{allOwnKeys:r}),e),Lb=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),xb=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},bb=(e,t,n,r)=>{let i,o,u;const f={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)u=i[o],(!r||r(u,e,t))&&!f[u]&&(t[u]=e[u],f[u]=!0);e=n!==!1&&Gg(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},wb=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Sb=e=>{if(!e)return null;if(Pl(e))return e;let t=e.length;if(!ky(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Mb=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Gg(Uint8Array)),Pb=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},Ib=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Tb=ks("HTMLFormElement"),Ab=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),f_=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Db=ks("RegExp"),Oy=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};rh(n,(i,o)=>{let u;(u=t(i,o,e))!==!1&&(r[o]=u||i)}),Object.defineProperties(e,r)},kb=e=>{Oy(e,(t,n)=>{if(Mi(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Mi(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Nb=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Pl(e)?r(e):r(String(e).split(t)),n},Rb=()=>{},Ob=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Od="abcdefghijklmnopqrstuvwxyz",p_="0123456789",By={DIGIT:p_,ALPHA:Od,ALPHA_DIGIT:Od+Od.toUpperCase()+p_},Bb=(e=16,t=By.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Fb(e){return!!(e&&Mi(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const zb=e=>{const t=new Array(10),n=(r,i)=>{if(hp(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=Pl(r)?[]:{};return rh(r,(u,f)=>{const d=n(u,i+1);!Fc(d)&&(o[f]=d)}),t[i]=void 0,o}}return r};return n(e,0)},Gb=ks("AsyncFunction"),Ub=e=>e&&(hp(e)||Mi(e))&&Mi(e.then)&&Mi(e.catch),Fy=((e,t)=>e?setImmediate:t?((n,r)=>(qa.addEventListener("message",({source:i,data:o})=>{i===qa&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),qa.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Mi(qa.postMessage)),Vb=typeof queueMicrotask<"u"?queueMicrotask.bind(qa):typeof process<"u"&&process.nextTick||Fy,vt={isArray:Pl,isArrayBuffer:Dy,isBuffer:sb,isFormData:db,isArrayBufferView:ob,isString:ab,isNumber:ky,isBoolean:ub,isObject:hp,isPlainObject:gf,isReadableStream:mb,isRequest:_b,isResponse:yb,isHeaders:vb,isUndefined:Fc,isDate:lb,isFile:cb,isBlob:hb,isRegExp:Db,isFunction:Mi,isStream:pb,isURLSearchParams:gb,isTypedArray:Mb,isFileList:fb,forEach:rh,merge:ug,extend:Eb,trim:Cb,stripBOM:Lb,inherits:xb,toFlatObject:bb,kindOf:lp,kindOfTest:ks,endsWith:wb,toArray:Sb,forEachEntry:Pb,matchAll:Ib,isHTMLForm:Tb,hasOwnProperty:f_,hasOwnProp:f_,reduceDescriptors:Oy,freezeMethods:kb,toObjectSet:Nb,toCamelCase:Ab,noop:Rb,toFiniteNumber:Ob,findKey:Ny,global:qa,isContextDefined:Ry,ALPHABET:By,generateString:Bb,isSpecCompliantForm:Fb,toJSONObject:zb,isAsyncFn:Gb,isThenable:Ub,setImmediate:Fy,asap:Vb};function we(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}vt.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:vt.toJSONObject(this.config),code:this.code,status:this.status}}});const zy=we.prototype,Gy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Gy[e]={value:e}});Object.defineProperties(we,Gy);Object.defineProperty(zy,"isAxiosError",{value:!0});we.from=(e,t,n,r,i,o)=>{const u=Object.create(zy);return vt.toFlatObject(e,u,function(d){return d!==Error.prototype},f=>f!=="isAxiosError"),we.call(u,e.message,t,n,r,i),u.cause=e,u.name=e.name,o&&Object.assign(u,o),u};const jb=null;function lg(e){return vt.isPlainObject(e)||vt.isArray(e)}function Uy(e){return vt.endsWith(e,"[]")?e.slice(0,-2):e}function d_(e,t,n){return e?e.concat(t).map(function(i,o){return i=Uy(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function qb(e){return vt.isArray(e)&&!e.some(lg)}const Hb=vt.toFlatObject(vt,{},null,function(t){return/^is[A-Z]/.test(t)});function fp(e,t,n){if(!vt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=vt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(z,G){return!vt.isUndefined(G[z])});const r=n.metaTokens,i=n.visitor||y,o=n.dots,u=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&vt.isSpecCompliantForm(t);if(!vt.isFunction(i))throw new TypeError("visitor must be a function");function _(I){if(I===null)return"";if(vt.isDate(I))return I.toISOString();if(!d&&vt.isBlob(I))throw new we("Blob is not supported. Use a Buffer instead.");return vt.isArrayBuffer(I)||vt.isTypedArray(I)?d&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function y(I,z,G){let Q=I;if(I&&!G&&typeof I=="object"){if(vt.endsWith(z,"{}"))z=r?z:z.slice(0,-2),I=JSON.stringify(I);else if(vt.isArray(I)&&qb(I)||(vt.isFileList(I)||vt.endsWith(z,"[]"))&&(Q=vt.toArray(I)))return z=Uy(z),Q.forEach(function(rt,mt){!(vt.isUndefined(rt)||rt===null)&&t.append(u===!0?d_([z],mt,o):u===null?z:z+"[]",_(rt))}),!1}return lg(I)?!0:(t.append(d_(G,z,o),_(I)),!1)}const E=[],S=Object.assign(Hb,{defaultVisitor:y,convertValue:_,isVisitable:lg});function T(I,z){if(!vt.isUndefined(I)){if(E.indexOf(I)!==-1)throw Error("Circular reference detected in "+z.join("."));E.push(I),vt.forEach(I,function(Q,$){(!(vt.isUndefined(Q)||Q===null)&&i.call(t,Q,vt.isString($)?$.trim():$,z,S))===!0&&T(Q,z?z.concat($):[$])}),E.pop()}}if(!vt.isObject(e))throw new TypeError("data must be an object");return T(e),t}function g_(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ug(e,t){this._pairs=[],e&&fp(e,this,t)}const Vy=Ug.prototype;Vy.append=function(t,n){this._pairs.push([t,n])};Vy.toString=function(t){const n=t?function(r){return t.call(this,r,g_)}:g_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Zb(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jy(e,t,n){if(!t)return e;const r=n&&n.encode||Zb;vt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=vt.isURLSearchParams(t)?t.toString():new Ug(t,n).toString(r),o){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class m_{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){vt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const qy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kb=typeof URLSearchParams<"u"?URLSearchParams:Ug,Xb=typeof FormData<"u"?FormData:null,Yb=typeof Blob<"u"?Blob:null,Wb={isBrowser:!0,classes:{URLSearchParams:Kb,FormData:Xb,Blob:Yb},protocols:["http","https","file","blob","url","data"]},Vg=typeof window<"u"&&typeof document<"u",cg=typeof navigator=="object"&&navigator||void 0,Jb=Vg&&(!cg||["ReactNative","NativeScript","NS"].indexOf(cg.product)<0),Qb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$b=Vg&&window.location.href||"http://localhost",t1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vg,hasStandardBrowserEnv:Jb,hasStandardBrowserWebWorkerEnv:Qb,navigator:cg,origin:$b},Symbol.toStringTag,{value:"Module"})),zr={...t1,...Wb};function e1(e,t){return fp(e,new zr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return zr.isNode&&vt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function n1(e){return vt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function r1(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function Hy(e){function t(n,r,i,o){let u=n[o++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),d=o>=n.length;return u=!u&&vt.isArray(i)?i.length:u,d?(vt.hasOwnProp(i,u)?i[u]=[i[u],r]:i[u]=r,!f):((!i[u]||!vt.isObject(i[u]))&&(i[u]=[]),t(n,r,i[u],o)&&vt.isArray(i[u])&&(i[u]=r1(i[u])),!f)}if(vt.isFormData(e)&&vt.isFunction(e.entries)){const n={};return vt.forEachEntry(e,(r,i)=>{t(n1(r),i,n,0)}),n}return null}function i1(e,t,n){if(vt.isString(e))try{return(t||JSON.parse)(e),vt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const ih={transitional:qy,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=vt.isObject(t);if(o&&vt.isHTMLForm(t)&&(t=new FormData(t)),vt.isFormData(t))return i?JSON.stringify(Hy(t)):t;if(vt.isArrayBuffer(t)||vt.isBuffer(t)||vt.isStream(t)||vt.isFile(t)||vt.isBlob(t)||vt.isReadableStream(t))return t;if(vt.isArrayBufferView(t))return t.buffer;if(vt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return e1(t,this.formSerializer).toString();if((f=vt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return fp(f?{"files[]":t}:t,d&&new d,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),i1(t)):t}],transformResponse:[function(t){const n=this.transitional||ih.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(vt.isResponse(t)||vt.isReadableStream(t))return t;if(t&&vt.isString(t)&&(r&&!this.responseType||i)){const u=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(f){if(u)throw f.name==="SyntaxError"?we.from(f,we.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zr.classes.FormData,Blob:zr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};vt.forEach(["delete","get","head","post","put","patch"],e=>{ih.headers[e]={}});const s1=vt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),o1=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(u){i=u.indexOf(":"),n=u.substring(0,i).trim().toLowerCase(),r=u.substring(i+1).trim(),!(!n||t[n]&&s1[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},__=Symbol("internals");function _c(e){return e&&String(e).trim().toLowerCase()}function mf(e){return e===!1||e==null?e:vt.isArray(e)?e.map(mf):String(e)}function a1(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const u1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Bd(e,t,n,r,i){if(vt.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!vt.isString(t)){if(vt.isString(r))return t.indexOf(r)!==-1;if(vt.isRegExp(r))return r.test(t)}}function l1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function c1(e,t){const n=vt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,u){return this[r].call(this,t,i,o,u)},configurable:!0})})}let fi=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(f,d,_){const y=_c(d);if(!y)throw new Error("header name must be a non-empty string");const E=vt.findKey(i,y);(!E||i[E]===void 0||_===!0||_===void 0&&i[E]!==!1)&&(i[E||d]=mf(f))}const u=(f,d)=>vt.forEach(f,(_,y)=>o(_,y,d));if(vt.isPlainObject(t)||t instanceof this.constructor)u(t,n);else if(vt.isString(t)&&(t=t.trim())&&!u1(t))u(o1(t),n);else if(vt.isHeaders(t))for(const[f,d]of t.entries())o(d,f,r);else t!=null&&o(n,t,r);return this}get(t,n){if(t=_c(t),t){const r=vt.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return a1(i);if(vt.isFunction(n))return n.call(this,i,r);if(vt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=_c(t),t){const r=vt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Bd(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(u){if(u=_c(u),u){const f=vt.findKey(r,u);f&&(!n||Bd(r,r[f],f,n))&&(delete r[f],i=!0)}}return vt.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||Bd(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return vt.forEach(this,(i,o)=>{const u=vt.findKey(r,o);if(u){n[u]=mf(i),delete n[o];return}const f=t?l1(o):String(o).trim();f!==o&&delete n[o],n[f]=mf(i),r[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return vt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&vt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[__]=this[__]={accessors:{}}).accessors,i=this.prototype;function o(u){const f=_c(u);r[f]||(c1(i,u),r[f]=!0)}return vt.isArray(t)?t.forEach(o):o(t),this}};fi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);vt.reduceDescriptors(fi.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});vt.freezeMethods(fi);function Fd(e,t){const n=this||ih,r=t||n,i=fi.from(r.headers);let o=r.data;return vt.forEach(e,function(f){o=f.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function Zy(e){return!!(e&&e.__CANCEL__)}function Il(e,t,n){we.call(this,e??"canceled",we.ERR_CANCELED,t,n),this.name="CanceledError"}vt.inherits(Il,we,{__CANCEL__:!0});function Ky(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new we("Request failed with status code "+n.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function h1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function f1(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,u;return t=t!==void 0?t:1e3,function(d){const _=Date.now(),y=r[o];u||(u=_),n[i]=d,r[i]=_;let E=o,S=0;for(;E!==i;)S+=n[E++],E=E%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),_-u<t)return;const T=y&&_-y;return T?Math.round(S*1e3/T):void 0}}function p1(e,t){let n=0,r=1e3/t,i,o;const u=(_,y=Date.now())=>{n=y,i=null,o&&(clearTimeout(o),o=null),e.apply(null,_)};return[(..._)=>{const y=Date.now(),E=y-n;E>=r?u(_,y):(i=_,o||(o=setTimeout(()=>{o=null,u(i)},r-E)))},()=>i&&u(i)]}const kf=(e,t,n=3)=>{let r=0;const i=f1(50,250);return p1(o=>{const u=o.loaded,f=o.lengthComputable?o.total:void 0,d=u-r,_=i(d),y=u<=f;r=u;const E={loaded:u,total:f,progress:f?u/f:void 0,bytes:d,rate:_||void 0,estimated:_&&f&&y?(f-u)/_:void 0,event:o,lengthComputable:f!=null,[t?"download":"upload"]:!0};e(E)},n)},y_=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},v_=e=>(...t)=>vt.asap(()=>e(...t)),d1=zr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,zr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(zr.origin),zr.navigator&&/(msie|trident)/i.test(zr.navigator.userAgent)):()=>!0,g1=zr.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const u=[e+"="+encodeURIComponent(t)];vt.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),vt.isString(r)&&u.push("path="+r),vt.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function m1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Xy(e,t){return e&&!m1(t)?_1(e,t):t}const C_=e=>e instanceof fi?{...e}:e;function Ja(e,t){t=t||{};const n={};function r(_,y,E,S){return vt.isPlainObject(_)&&vt.isPlainObject(y)?vt.merge.call({caseless:S},_,y):vt.isPlainObject(y)?vt.merge({},y):vt.isArray(y)?y.slice():y}function i(_,y,E,S){if(vt.isUndefined(y)){if(!vt.isUndefined(_))return r(void 0,_,E,S)}else return r(_,y,E,S)}function o(_,y){if(!vt.isUndefined(y))return r(void 0,y)}function u(_,y){if(vt.isUndefined(y)){if(!vt.isUndefined(_))return r(void 0,_)}else return r(void 0,y)}function f(_,y,E){if(E in t)return r(_,y);if(E in e)return r(void 0,_)}const d={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(_,y,E)=>i(C_(_),C_(y),E,!0)};return vt.forEach(Object.keys(Object.assign({},e,t)),function(y){const E=d[y]||i,S=E(e[y],t[y],y);vt.isUndefined(S)&&E!==f||(n[y]=S)}),n}const Yy=e=>{const t=Ja({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:u,auth:f}=t;t.headers=u=fi.from(u),t.url=jy(Xy(t.baseURL,t.url),e.params,e.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let d;if(vt.isFormData(n)){if(zr.hasStandardBrowserEnv||zr.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((d=u.getContentType())!==!1){const[_,...y]=d?d.split(";").map(E=>E.trim()).filter(Boolean):[];u.setContentType([_||"multipart/form-data",...y].join("; "))}}if(zr.hasStandardBrowserEnv&&(r&&vt.isFunction(r)&&(r=r(t)),r||r!==!1&&d1(t.url))){const _=i&&o&&g1.read(o);_&&u.set(i,_)}return t},y1=typeof XMLHttpRequest<"u",v1=y1&&function(e){return new Promise(function(n,r){const i=Yy(e);let o=i.data;const u=fi.from(i.headers).normalize();let{responseType:f,onUploadProgress:d,onDownloadProgress:_}=i,y,E,S,T,I;function z(){T&&T(),I&&I(),i.cancelToken&&i.cancelToken.unsubscribe(y),i.signal&&i.signal.removeEventListener("abort",y)}let G=new XMLHttpRequest;G.open(i.method.toUpperCase(),i.url,!0),G.timeout=i.timeout;function Q(){if(!G)return;const rt=fi.from("getAllResponseHeaders"in G&&G.getAllResponseHeaders()),bt={data:!f||f==="text"||f==="json"?G.responseText:G.response,status:G.status,statusText:G.statusText,headers:rt,config:e,request:G};Ky(function(Bt){n(Bt),z()},function(Bt){r(Bt),z()},bt),G=null}"onloadend"in G?G.onloadend=Q:G.onreadystatechange=function(){!G||G.readyState!==4||G.status===0&&!(G.responseURL&&G.responseURL.indexOf("file:")===0)||setTimeout(Q)},G.onabort=function(){G&&(r(new we("Request aborted",we.ECONNABORTED,e,G)),G=null)},G.onerror=function(){r(new we("Network Error",we.ERR_NETWORK,e,G)),G=null},G.ontimeout=function(){let mt=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const bt=i.transitional||qy;i.timeoutErrorMessage&&(mt=i.timeoutErrorMessage),r(new we(mt,bt.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,e,G)),G=null},o===void 0&&u.setContentType(null),"setRequestHeader"in G&&vt.forEach(u.toJSON(),function(mt,bt){G.setRequestHeader(bt,mt)}),vt.isUndefined(i.withCredentials)||(G.withCredentials=!!i.withCredentials),f&&f!=="json"&&(G.responseType=i.responseType),_&&([S,I]=kf(_,!0),G.addEventListener("progress",S)),d&&G.upload&&([E,T]=kf(d),G.upload.addEventListener("progress",E),G.upload.addEventListener("loadend",T)),(i.cancelToken||i.signal)&&(y=rt=>{G&&(r(!rt||rt.type?new Il(null,e,G):rt),G.abort(),G=null)},i.cancelToken&&i.cancelToken.subscribe(y),i.signal&&(i.signal.aborted?y():i.signal.addEventListener("abort",y)));const $=h1(i.url);if($&&zr.protocols.indexOf($)===-1){r(new we("Unsupported protocol "+$+":",we.ERR_BAD_REQUEST,e));return}G.send(o||null)})},C1=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(_){if(!i){i=!0,f();const y=_ instanceof Error?_:this.reason;r.abort(y instanceof we?y:new Il(y instanceof Error?y.message:y))}};let u=t&&setTimeout(()=>{u=null,o(new we(`timeout ${t} of ms exceeded`,we.ETIMEDOUT))},t);const f=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(o):_.removeEventListener("abort",o)}),e=null)};e.forEach(_=>_.addEventListener("abort",o));const{signal:d}=r;return d.unsubscribe=()=>vt.asap(f),d}},E1=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},L1=async function*(e,t){for await(const n of x1(e))yield*E1(n,t)},x1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},E_=(e,t,n,r)=>{const i=L1(e,t);let o=0,u,f=d=>{u||(u=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:_,value:y}=await i.next();if(_){f(),d.close();return}let E=y.byteLength;if(n){let S=o+=E;n(S)}d.enqueue(new Uint8Array(y))}catch(_){throw f(_),_}},cancel(d){return f(d),i.return()}},{highWaterMark:2})},pp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Wy=pp&&typeof ReadableStream=="function",b1=pp&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Jy=(e,...t)=>{try{return!!e(...t)}catch{return!1}},w1=Wy&&Jy(()=>{let e=!1;const t=new Request(zr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),L_=64*1024,hg=Wy&&Jy(()=>vt.isReadableStream(new Response("").body)),Nf={stream:hg&&(e=>e.body)};pp&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Nf[t]&&(Nf[t]=vt.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new we(`Response type '${t}' is not supported`,we.ERR_NOT_SUPPORT,r)})})})(new Response);const S1=async e=>{if(e==null)return 0;if(vt.isBlob(e))return e.size;if(vt.isSpecCompliantForm(e))return(await new Request(zr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(vt.isArrayBufferView(e)||vt.isArrayBuffer(e))return e.byteLength;if(vt.isURLSearchParams(e)&&(e=e+""),vt.isString(e))return(await b1(e)).byteLength},M1=async(e,t)=>{const n=vt.toFiniteNumber(e.getContentLength());return n??S1(t)},P1=pp&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:u,onDownloadProgress:f,onUploadProgress:d,responseType:_,headers:y,withCredentials:E="same-origin",fetchOptions:S}=Yy(e);_=_?(_+"").toLowerCase():"text";let T=C1([i,o&&o.toAbortSignal()],u),I;const z=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let G;try{if(d&&w1&&n!=="get"&&n!=="head"&&(G=await M1(y,r))!==0){let bt=new Request(t,{method:"POST",body:r,duplex:"half"}),Dt;if(vt.isFormData(r)&&(Dt=bt.headers.get("content-type"))&&y.setContentType(Dt),bt.body){const[Bt,Ft]=y_(G,kf(v_(d)));r=E_(bt.body,L_,Bt,Ft)}}vt.isString(E)||(E=E?"include":"omit");const Q="credentials"in Request.prototype;I=new Request(t,{...S,signal:T,method:n.toUpperCase(),headers:y.normalize().toJSON(),body:r,duplex:"half",credentials:Q?E:void 0});let $=await fetch(I);const rt=hg&&(_==="stream"||_==="response");if(hg&&(f||rt&&z)){const bt={};["status","statusText","headers"].forEach(Nt=>{bt[Nt]=$[Nt]});const Dt=vt.toFiniteNumber($.headers.get("content-length")),[Bt,Ft]=f&&y_(Dt,kf(v_(f),!0))||[];$=new Response(E_($.body,L_,Bt,()=>{Ft&&Ft(),z&&z()}),bt)}_=_||"text";let mt=await Nf[vt.findKey(Nf,_)||"text"]($,e);return!rt&&z&&z(),await new Promise((bt,Dt)=>{Ky(bt,Dt,{data:mt,headers:fi.from($.headers),status:$.status,statusText:$.statusText,config:e,request:I})})}catch(Q){throw z&&z(),Q&&Q.name==="TypeError"&&/fetch/i.test(Q.message)?Object.assign(new we("Network Error",we.ERR_NETWORK,e,I),{cause:Q.cause||Q}):we.from(Q,Q&&Q.code,e,I)}}),fg={http:jb,xhr:v1,fetch:P1};vt.forEach(fg,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const x_=e=>`- ${e}`,I1=e=>vt.isFunction(e)||e===null||e===!1,Qy={getAdapter:e=>{e=vt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let u;if(r=n,!I1(n)&&(r=fg[(u=String(n)).toLowerCase()],r===void 0))throw new we(`Unknown adapter '${u}'`);if(r)break;i[u||"#"+o]=r}if(!r){const o=Object.entries(i).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let u=t?o.length>1?`since :
`+o.map(x_).join(`
`):" "+x_(o[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:fg};function zd(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Il(null,e)}function b_(e){return zd(e),e.headers=fi.from(e.headers),e.data=Fd.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Qy.getAdapter(e.adapter||ih.adapter)(e).then(function(r){return zd(e),r.data=Fd.call(e,e.transformResponse,r),r.headers=fi.from(r.headers),r},function(r){return Zy(r)||(zd(e),r&&r.response&&(r.response.data=Fd.call(e,e.transformResponse,r.response),r.response.headers=fi.from(r.response.headers))),Promise.reject(r)})}const $y="1.7.9",dp={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{dp[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const w_={};dp.transitional=function(t,n,r){function i(o,u){return"[Axios v"+$y+"] Transitional option '"+o+"'"+u+(r?". "+r:"")}return(o,u,f)=>{if(t===!1)throw new we(i(u," has been removed"+(n?" in "+n:"")),we.ERR_DEPRECATED);return n&&!w_[u]&&(w_[u]=!0,console.warn(i(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,u,f):!0}};dp.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function T1(e,t,n){if(typeof e!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],u=t[o];if(u){const f=e[o],d=f===void 0||u(f,o,e);if(d!==!0)throw new we("option "+o+" must be "+d,we.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new we("Unknown option "+o,we.ERR_BAD_OPTION)}}const _f={assertOptions:T1,validators:dp},qs=_f.validators;let Xa=class{constructor(t){this.defaults=t,this.interceptors={request:new m_,response:new m_}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ja(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&_f.assertOptions(r,{silentJSONParsing:qs.transitional(qs.boolean),forcedJSONParsing:qs.transitional(qs.boolean),clarifyTimeoutError:qs.transitional(qs.boolean)},!1),i!=null&&(vt.isFunction(i)?n.paramsSerializer={serialize:i}:_f.assertOptions(i,{encode:qs.function,serialize:qs.function},!0)),_f.assertOptions(n,{baseUrl:qs.spelling("baseURL"),withXsrfToken:qs.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=o&&vt.merge(o.common,o[n.method]);o&&vt.forEach(["delete","get","head","post","put","patch","common"],I=>{delete o[I]}),n.headers=fi.concat(u,o);const f=[];let d=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(n)===!1||(d=d&&z.synchronous,f.unshift(z.fulfilled,z.rejected))});const _=[];this.interceptors.response.forEach(function(z){_.push(z.fulfilled,z.rejected)});let y,E=0,S;if(!d){const I=[b_.bind(this),void 0];for(I.unshift.apply(I,f),I.push.apply(I,_),S=I.length,y=Promise.resolve(n);E<S;)y=y.then(I[E++],I[E++]);return y}S=f.length;let T=n;for(E=0;E<S;){const I=f[E++],z=f[E++];try{T=I(T)}catch(G){z.call(this,G);break}}try{y=b_.call(this,T)}catch(I){return Promise.reject(I)}for(E=0,S=_.length;E<S;)y=y.then(_[E++],_[E++]);return y}getUri(t){t=Ja(this.defaults,t);const n=Xy(t.baseURL,t.url);return jy(n,t.params,t.paramsSerializer)}};vt.forEach(["delete","get","head","options"],function(t){Xa.prototype[t]=function(n,r){return this.request(Ja(r||{},{method:t,url:n,data:(r||{}).data}))}});vt.forEach(["post","put","patch"],function(t){function n(r){return function(o,u,f){return this.request(Ja(f||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}Xa.prototype[t]=n(),Xa.prototype[t+"Form"]=n(!0)});let A1=class tv{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const u=new Promise(f=>{r.subscribe(f),o=f}).then(i);return u.cancel=function(){r.unsubscribe(o)},u},t(function(o,u,f){r.reason||(r.reason=new Il(o,u,f),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new tv(function(i){t=i}),cancel:t}}};function D1(e){return function(n){return e.apply(null,n)}}function k1(e){return vt.isObject(e)&&e.isAxiosError===!0}const pg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pg).forEach(([e,t])=>{pg[t]=e});function ev(e){const t=new Xa(e),n=Ay(Xa.prototype.request,t);return vt.extend(n,Xa.prototype,t,{allOwnKeys:!0}),vt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return ev(Ja(e,i))},n}const Xe=ev(ih);Xe.Axios=Xa;Xe.CanceledError=Il;Xe.CancelToken=A1;Xe.isCancel=Zy;Xe.VERSION=$y;Xe.toFormData=fp;Xe.AxiosError=we;Xe.Cancel=Xe.CanceledError;Xe.all=function(t){return Promise.all(t)};Xe.spread=D1;Xe.isAxiosError=k1;Xe.mergeConfig=Ja;Xe.AxiosHeaders=fi;Xe.formToJSON=e=>Hy(vt.isHTMLForm(e)?new FormData(e):e);Xe.getAdapter=Qy.getAdapter;Xe.HttpStatusCode=pg;Xe.default=Xe;const{Axios:LS,AxiosError:xS,CanceledError:bS,isCancel:wS,CancelToken:SS,VERSION:MS,all:PS,Cancel:IS,isAxiosError:TS,spread:AS,toFormData:DS,AxiosHeaders:kS,HttpStatusCode:NS,formToJSON:RS,getAdapter:OS,mergeConfig:BS}=Xe,nv=my("auth",{state:()=>({user:null,token:localStorage.getItem("token"),isAuthenticated:!1,mustChangePassword:!1}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isDealer:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="dealer"},isClient:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var t;return!!((t=e.user)!=null&&t.dealer)}},actions:{async login(e,t){try{const n=await Xe.post("/api/token/",{username:e,password:t}),{access:r,refresh:i}=n.data;return localStorage.setItem("token",r),localStorage.setItem("refresh_token",i),this.token=r,await this.fetchUserProfile(),this.isAuthenticated=!0,!0}catch(n){throw console.error("Login error:",n),n}},async fetchUserProfile(){try{const e=await Xe.get("/api/users/me/");this.user=e.data,this.mustChangePassword=e.data.must_change_password}catch(e){throw console.error("Error fetching user profile:",e),e}},async changePassword(e,t){try{const n=await Xe.post("/api/auth/change-password/",{old_password:e,new_password:t});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw n}},async logout(){localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),this.user=null,this.token=null,this.isAuthenticated=!1},async refreshToken(){try{const e=localStorage.getItem("refresh_token");if(!e)throw new Error("No refresh token");const t=await Xe.post("/api/token/refresh/",{refresh:e}),{access:n}=t.data;return localStorage.setItem("token",n),this.token=n,n}catch(e){throw console.error("Error refreshing token:",e),await this.logout(),e}},async fetchConcessionnaires(){this.loading=!0;try{const e=await Xe.get("/api/utilisateurs/",{params:{role:"CONCESSIONNAIRE"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la récupération des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,t){this.loading=!0;try{await Xe.patch(`/api/utilisateurs/${e}/`,{concessionnaire:t}),this.user&&this.user.id===e&&(this.user.dealer=t)}catch(n){throw this.error="Erreur lors de la mise à jour du concessionnaire",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await Xe.post("/api/utilisateurs/",e)).data}catch(t){throw this.error="Erreur lors de la création de l'utilisateur",t}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await Xe.patch(`/api/utilisateurs/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});var Po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function N1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R1=typeof Po=="object"&&Po&&Po.Object===Object&&Po,O1=R1,B1=O1,F1=typeof self=="object"&&self&&self.Object===Object&&self,z1=B1||F1||Function("return this")(),G1=z1,U1=G1,V1=U1.Symbol,rv=V1,S_=rv;S_&&S_.toStringTag;var M_=rv;M_&&M_.toStringTag;const iv=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},j1={class:"min-h-screen bg-gray-100"},q1=Ml({__name:"App",setup(e){rb();const t=nv();Hn(!1),bn(()=>{var i;return((i=t.user)==null?void 0:i.username)||"Utilisateur"}),bn(()=>{var i;return((i=t.user)==null?void 0:i.role)||"Utilisateur"});const n=bn(()=>{var i;return((i=t.user)==null?void 0:i.role)==="ADMIN"});Hn("");const r=[{name:"Carte",to:"/"},{name:"Projets",to:"/projects"}];return bn(()=>n.value?[...r,{name:"Utilisateurs",to:"/users"}]:r),(i,o)=>(Ue(),Ze("div",j1,[Gr(Za(Ty))]))}}),H1=my("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,n;const e=nv();this.loading=!0;try{let r="/api/plans/";e.isConcessionnaire?r+="?concessionnaire="+((t=e.user)==null?void 0:t.id):e.isUtilisateur&&(r+="?utilisateur="+((n=e.user)==null?void 0:n.id));const i=await Xe.get(r);this.plans=i.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{const t=await Xe.post("/api/plans/",e);return this.plans.push(t.data),t.data}catch(t){throw this.error="Erreur lors de la création du plan",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var t,n;if(this.unsavedChanges){this.loading=!0;try{const r=await Xe.patch(`/api/plans/${e}/`,{...this.currentPlan,version:((t=this.currentPlan)==null?void 0:t.version)||1}),i=this.plans.findIndex(o=>o.id===e);return i!==-1&&(this.plans[i]=r.data),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async fetchPlanHistory(e){this.loading=!0;try{const t=await Xe.get(`/api/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la récupération de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const r=await Xe.post(`/api/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(o=>o.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0}}});var ef={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var P_;function sv(){return P_||(P_=1,function(e,t){(function(n,r){r(t)})(Po,function(n){var r="1.9.4";function i(s){var c,g,v,w;for(g=1,v=arguments.length;g<v;g++){w=arguments[g];for(c in w)s[c]=w[c]}return s}var o=Object.create||function(){function s(){}return function(c){return s.prototype=c,new s}}();function u(s,c){var g=Array.prototype.slice;if(s.bind)return s.bind.apply(s,g.call(arguments,1));var v=g.call(arguments,2);return function(){return s.apply(c,v.length?v.concat(g.call(arguments)):arguments)}}var f=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++f),s._leaflet_id}function _(s,c,g){var v,w,D,H;return H=function(){v=!1,w&&(D.apply(g,w),w=!1)},D=function(){v?w=arguments:(s.apply(g,arguments),setTimeout(H,c),v=!0)},D}function y(s,c,g){var v=c[1],w=c[0],D=v-w;return s===v&&g?s:((s-w)%D+D)%D+w}function E(){return!1}function S(s,c){if(c===!1)return s;var g=Math.pow(10,c===void 0?6:c);return Math.round(s*g)/g}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function I(s){return T(s).split(/\s+/)}function z(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var g in c)s.options[g]=c[g];return s.options}function G(s,c,g){var v=[];for(var w in s)v.push(encodeURIComponent(g?w.toUpperCase():w)+"="+encodeURIComponent(s[w]));return(!c||c.indexOf("?")===-1?"?":"&")+v.join("&")}var Q=/\{ *([\w_ -]+) *\}/g;function $(s,c){return s.replace(Q,function(g,v){var w=c[v];if(w===void 0)throw new Error("No value provided for variable "+g);return typeof w=="function"&&(w=w(c)),w})}var rt=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function mt(s,c){for(var g=0;g<s.length;g++)if(s[g]===c)return g;return-1}var bt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Dt(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Bt=0;function Ft(s){var c=+new Date,g=Math.max(0,16-(c-Bt));return Bt=c+g,window.setTimeout(s,g)}var Nt=window.requestAnimationFrame||Dt("RequestAnimationFrame")||Ft,te=window.cancelAnimationFrame||Dt("CancelAnimationFrame")||Dt("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function Ht(s,c,g){if(g&&Nt===Ft)s.call(c);else return Nt.call(window,u(s,c))}function ee(s){s&&te.call(window,s)}var Ie={__proto__:null,extend:i,create:o,bind:u,get lastId(){return f},stamp:d,throttle:_,wrapNum:y,falseFn:E,formatNum:S,trim:T,splitWords:I,setOptions:z,getParamString:G,template:$,isArray:rt,indexOf:mt,emptyImageUrl:bt,requestFn:Nt,cancelFn:te,requestAnimFrame:Ht,cancelAnimFrame:ee};function Rt(){}Rt.extend=function(s){var c=function(){z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,v=o(g);v.constructor=c,c.prototype=v;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(c[w]=this[w]);return s.statics&&i(c,s.statics),s.includes&&(le(s.includes),i.apply(null,[v].concat(s.includes))),i(v,s),delete v.statics,delete v.includes,v.options&&(v.options=g.options?o(g.options):{},i(v.options,s.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var D=0,H=v._initHooks.length;D<H;D++)v._initHooks[D].call(this)}},c},Rt.include=function(s){var c=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},Rt.mergeOptions=function(s){return i(this.prototype.options,s),this},Rt.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),g=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function le(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=rt(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var jt={on:function(s,c,g){if(typeof s=="object")for(var v in s)this._on(v,s[v],c);else{s=I(s);for(var w=0,D=s.length;w<D;w++)this._on(s[w],c,g)}return this},off:function(s,c,g){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var v in s)this._off(v,s[v],c);else{s=I(s);for(var w=arguments.length===1,D=0,H=s.length;D<H;D++)w?this._off(s[D]):this._off(s[D],c,g)}return this},_on:function(s,c,g,v){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,g)===!1){g===this&&(g=void 0);var w={fn:c,ctx:g};v&&(w.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(w)}},_off:function(s,c,g){var v,w,D;if(this._events&&(v=this._events[s],!!v)){if(arguments.length===1){if(this._firingCount)for(w=0,D=v.length;w<D;w++)v[w].fn=E;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var H=this._listens(s,c,g);if(H!==!1){var ot=v[H];this._firingCount&&(ot.fn=E,this._events[s]=v=v.slice()),v.splice(H,1)}}},fire:function(s,c,g){if(!this.listens(s,g))return this;var v=i({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var w=this._events[s];if(w){this._firingCount=this._firingCount+1||1;for(var D=0,H=w.length;D<H;D++){var ot=w[D],gt=ot.fn;ot.once&&this.off(s,gt,ot.ctx),gt.call(ot.ctx||this,v)}this._firingCount--}}return g&&this._propagateEvent(v),this},listens:function(s,c,g,v){typeof s!="string"&&console.warn('"string" type argument expected');var w=c;typeof c!="function"&&(v=!!c,w=void 0,g=void 0);var D=this._events&&this._events[s];if(D&&D.length&&this._listens(s,w,g)!==!1)return!0;if(v){for(var H in this._eventParents)if(this._eventParents[H].listens(s,c,g,v))return!0}return!1},_listens:function(s,c,g){if(!this._events)return!1;var v=this._events[s]||[];if(!c)return!!v.length;g===this&&(g=void 0);for(var w=0,D=v.length;w<D;w++)if(v[w].fn===c&&v[w].ctx===g)return w;return!1},once:function(s,c,g){if(typeof s=="object")for(var v in s)this._on(v,s[v],c,!0);else{s=I(s);for(var w=0,D=s.length;w<D;w++)this._on(s[w],c,g,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};jt.addEventListener=jt.on,jt.removeEventListener=jt.clearAllEventListeners=jt.off,jt.addOneTimeEventListener=jt.once,jt.fireEvent=jt.fire,jt.hasEventListeners=jt.listens;var Zt=Rt.extend(jt);function kt(s,c,g){this.x=g?Math.round(s):s,this.y=g?Math.round(c):c}var tn=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};kt.prototype={clone:function(){return new kt(this.x,this.y)},add:function(s){return this.clone()._add(Yt(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Yt(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new kt(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new kt(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=tn(this.x),this.y=tn(this.y),this},distanceTo:function(s){s=Yt(s);var c=s.x-this.x,g=s.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(s){return s=Yt(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Yt(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function Yt(s,c,g){return s instanceof kt?s:rt(s)?new kt(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new kt(s.x,s.y):new kt(s,c,g)}function de(s,c){if(s)for(var g=c?[s,c]:s,v=0,w=g.length;v<w;v++)this.extend(g[v])}de.prototype={extend:function(s){var c,g;if(!s)return this;if(s instanceof kt||typeof s[0]=="number"||"x"in s)c=g=Yt(s);else if(s=Me(s),c=s.min,g=s.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(s){return Yt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Yt(this.min.x,this.max.y)},getTopRight:function(){return Yt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,g;return typeof s[0]=="number"||s instanceof kt?s=Yt(s):s=Me(s),s instanceof de?(c=s.min,g=s.max):c=g=s,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(s){s=Me(s);var c=this.min,g=this.max,v=s.min,w=s.max,D=w.x>=c.x&&v.x<=g.x,H=w.y>=c.y&&v.y<=g.y;return D&&H},overlaps:function(s){s=Me(s);var c=this.min,g=this.max,v=s.min,w=s.max,D=w.x>c.x&&v.x<g.x,H=w.y>c.y&&v.y<g.y;return D&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,g=this.max,v=Math.abs(c.x-g.x)*s,w=Math.abs(c.y-g.y)*s;return Me(Yt(c.x-v,c.y-w),Yt(g.x+v,g.y+w))},equals:function(s){return s?(s=Me(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Me(s,c){return!s||s instanceof de?s:new de(s,c)}function ze(s,c){if(s)for(var g=c?[s,c]:s,v=0,w=g.length;v<w;v++)this.extend(g[v])}ze.prototype={extend:function(s){var c=this._southWest,g=this._northEast,v,w;if(s instanceof ye)v=s,w=s;else if(s instanceof ze){if(v=s._southWest,w=s._northEast,!v||!w)return this}else return s?this.extend(ce(s)||ke(s)):this;return!c&&!g?(this._southWest=new ye(v.lat,v.lng),this._northEast=new ye(w.lat,w.lng)):(c.lat=Math.min(v.lat,c.lat),c.lng=Math.min(v.lng,c.lng),g.lat=Math.max(w.lat,g.lat),g.lng=Math.max(w.lng,g.lng)),this},pad:function(s){var c=this._southWest,g=this._northEast,v=Math.abs(c.lat-g.lat)*s,w=Math.abs(c.lng-g.lng)*s;return new ze(new ye(c.lat-v,c.lng-w),new ye(g.lat+v,g.lng+w))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ye||"lat"in s?s=ce(s):s=ke(s);var c=this._southWest,g=this._northEast,v,w;return s instanceof ze?(v=s.getSouthWest(),w=s.getNorthEast()):v=w=s,v.lat>=c.lat&&w.lat<=g.lat&&v.lng>=c.lng&&w.lng<=g.lng},intersects:function(s){s=ke(s);var c=this._southWest,g=this._northEast,v=s.getSouthWest(),w=s.getNorthEast(),D=w.lat>=c.lat&&v.lat<=g.lat,H=w.lng>=c.lng&&v.lng<=g.lng;return D&&H},overlaps:function(s){s=ke(s);var c=this._southWest,g=this._northEast,v=s.getSouthWest(),w=s.getNorthEast(),D=w.lat>c.lat&&v.lat<g.lat,H=w.lng>c.lng&&v.lng<g.lng;return D&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=ke(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ke(s,c){return s instanceof ze?s:new ze(s,c)}function ye(s,c,g){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,g!==void 0&&(this.alt=+g)}ye.prototype={equals:function(s,c){if(!s)return!1;s=ce(s);var g=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return g<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+S(this.lat,s)+", "+S(this.lng,s)+")"},distanceTo:function(s){return Y.distance(this,ce(s))},wrap:function(){return Y.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,g=c/Math.cos(Math.PI/180*this.lat);return ke([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function ce(s,c,g){return s instanceof ye?s:rt(s)&&typeof s[0]!="object"?s.length===3?new ye(s[0],s[1],s[2]):s.length===2?new ye(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ye(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new ye(s,c,g)}var Et={latLngToPoint:function(s,c){var g=this.projection.project(s),v=this.scale(c);return this.transformation._transform(g,v)},pointToLatLng:function(s,c){var g=this.scale(c),v=this.transformation.untransform(s,g);return this.projection.unproject(v)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(s),v=this.transformation.transform(c.min,g),w=this.transformation.transform(c.max,g);return new de(v,w)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?y(s.lng,this.wrapLng,!0):s.lng,g=this.wrapLat?y(s.lat,this.wrapLat,!0):s.lat,v=s.alt;return new ye(g,c,v)},wrapLatLngBounds:function(s){var c=s.getCenter(),g=this.wrapLatLng(c),v=c.lat-g.lat,w=c.lng-g.lng;if(v===0&&w===0)return s;var D=s.getSouthWest(),H=s.getNorthEast(),ot=new ye(D.lat-v,D.lng-w),gt=new ye(H.lat-v,H.lng-w);return new ze(ot,gt)}},Y=i({},Et,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var g=Math.PI/180,v=s.lat*g,w=c.lat*g,D=Math.sin((c.lat-s.lat)*g/2),H=Math.sin((c.lng-s.lng)*g/2),ot=D*D+Math.cos(v)*Math.cos(w)*H*H,gt=2*Math.atan2(Math.sqrt(ot),Math.sqrt(1-ot));return this.R*gt}}),J=6378137,W={R:J,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,g=this.MAX_LATITUDE,v=Math.max(Math.min(g,s.lat),-g),w=Math.sin(v*c);return new kt(this.R*s.lng*c,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(s){var c=180/Math.PI;return new ye((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:function(){var s=J*Math.PI;return new de([-s,-s],[s,s])}()};function zt(s,c,g,v){if(rt(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=g,this._d=v}zt.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new kt((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function F(s,c,g,v){return new zt(s,c,g,v)}var V=i({},Y,{code:"EPSG:3857",projection:W,transformation:function(){var s=.5/(Math.PI*W.R);return F(s,.5,-s,.5)}()}),et=i({},V,{code:"EPSG:900913"});function _t(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ct(s,c){var g="",v,w,D,H,ot,gt;for(v=0,D=s.length;v<D;v++){for(ot=s[v],w=0,H=ot.length;w<H;w++)gt=ot[w],g+=(w?"L":"M")+gt.x+" "+gt.y;g+=c?re.svg?"z":"x":""}return g||"M0 0"}var yt=document.documentElement.style,Mt="ActiveXObject"in window,Tt=Mt&&!document.addEventListener,Pt="msLaunchUri"in navigator&&!("documentMode"in document),xt=Ei("webkit"),Kt=Ei("android"),Ut=Ei("android 2")||Ei("android 3"),ne=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),he=Kt&&Ei("Google")&&ne<537&&!("AudioNode"in window),Te=!!window.opera,Je=!Pt&&Ei("chrome"),je=Ei("gecko")&&!xt&&!Te&&!Mt,ar=!Je&&Ei("safari"),jn=Ei("phantom"),Kr="OTransition"in yt,tr=navigator.platform.indexOf("Win")===0,Rs=Mt&&"transition"in yt,ho="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ut,On="MozPerspective"in yt,Xr=!window.L_DISABLE_3D&&(Rs||ho||On)&&!Kr&&!jn,zi=typeof orientation<"u"||Ei("mobile"),Pp=zi&&xt,Ip=zi&&ho,Rl=!window.PointerEvent&&window.MSPointerEvent,fh=!!(window.PointerEvent||Rl),ph="ontouchstart"in window||!!window.TouchEvent,Tp=!window.L_NO_TOUCH&&(ph||fh),Ap=zi&&Te,dh=zi&&je,gh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Dp=function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",E,c),window.removeEventListener("testPassiveEventSupport",E,c)}catch{}return s}(),kp=function(){return!!document.createElement("canvas").getContext}(),Ol=!!(document.createElementNS&&_t("svg").createSVGRect),mh=!!Ol&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Np=!Ol&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Rp=navigator.platform.indexOf("Mac")===0,Op=navigator.platform.indexOf("Linux")===0;function Ei(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var re={ie:Mt,ielt9:Tt,edge:Pt,webkit:xt,android:Kt,android23:Ut,androidStock:he,opera:Te,chrome:Je,gecko:je,safari:ar,phantom:jn,opera12:Kr,win:tr,ie3d:Rs,webkit3d:ho,gecko3d:On,any3d:Xr,mobile:zi,mobileWebkit:Pp,mobileWebkit3d:Ip,msPointer:Rl,pointer:fh,touch:Tp,touchNative:ph,mobileOpera:Ap,mobileGecko:dh,retina:gh,passiveEvents:Dp,canvas:kp,svg:Ol,vml:Np,inlineSvg:mh,mac:Rp,linux:Op},_h=re.msPointer?"MSPointerDown":"pointerdown",yh=re.msPointer?"MSPointerMove":"pointermove",Bl=re.msPointer?"MSPointerUp":"pointerup",vh=re.msPointer?"MSPointerCancel":"pointercancel",Fl={touchstart:_h,touchmove:yh,touchend:Bl,touchcancel:vh},Ch={touchstart:Up,touchmove:vu,touchend:vu,touchcancel:vu},Vo={},Eh=!1;function Bp(s,c,g){return c==="touchstart"&&zl(),Ch[c]?(g=Ch[c].bind(this,g),s.addEventListener(Fl[c],g,!1),g):(console.warn("wrong event specified:",c),E)}function Fp(s,c,g){if(!Fl[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Fl[c],g,!1)}function zp(s){Vo[s.pointerId]=s}function Gp(s){Vo[s.pointerId]&&(Vo[s.pointerId]=s)}function yu(s){delete Vo[s.pointerId]}function zl(){Eh||(document.addEventListener(_h,zp,!0),document.addEventListener(yh,Gp,!0),document.addEventListener(Bl,yu,!0),document.addEventListener(vh,yu,!0),Eh=!0)}function vu(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in Vo)c.touches.push(Vo[g]);c.changedTouches=[c],s(c)}}function Up(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&er(c),vu(s,c)}function Vp(s){var c={},g,v;for(v in s)g=s[v],c[v]=g&&g.bind?g.bind(s):g;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var jp=200;function qp(s,c){s.addEventListener("dblclick",c);var g=0,v;function w(D){if(D.detail!==1){v=D.detail;return}if(!(D.pointerType==="mouse"||D.sourceCapabilities&&!D.sourceCapabilities.firesTouchEvents)){var H=Sh(D);if(!(H.some(function(gt){return gt instanceof HTMLLabelElement&&gt.attributes.for})&&!H.some(function(gt){return gt instanceof HTMLInputElement||gt instanceof HTMLSelectElement}))){var ot=Date.now();ot-g<=jp?(v++,v===2&&c(Vp(D))):v=1,g=ot}}}return s.addEventListener("click",w),{dblclick:c,simDblclick:w}}function Hp(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var Gl=Eu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Sa=Eu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Lh=Sa==="webkitTransition"||Sa==="OTransition"?Sa+"End":"transitionend";function xh(s){return typeof s=="string"?document.getElementById(s):s}function Os(s,c){var g=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(s,null);g=v?v[c]:null}return g==="auto"?null:g}function qe(s,c,g){var v=document.createElement(s);return v.className=c||"",g&&g.appendChild(v),v}function pn(s){var c=s.parentNode;c&&c.removeChild(s)}function Ma(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function jo(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function fo(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function Ul(s,c){if(s.classList!==void 0)return s.classList.contains(c);var g=Cu(s);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function xe(s,c){if(s.classList!==void 0)for(var g=I(c),v=0,w=g.length;v<w;v++)s.classList.add(g[v]);else if(!Ul(s,c)){var D=Cu(s);Vl(s,(D?D+" ":"")+c)}}function In(s,c){s.classList!==void 0?s.classList.remove(c):Vl(s,T((" "+Cu(s)+" ").replace(" "+c+" "," ")))}function Vl(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function Cu(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function li(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&Zp(s,c)}function Zp(s,c){var g=!1,v="DXImageTransform.Microsoft.Alpha";try{g=s.filters.item(v)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):s.style.filter+=" progid:"+v+"(opacity="+c+")"}function Eu(s){for(var c=document.documentElement.style,g=0;g<s.length;g++)if(s[g]in c)return s[g];return!1}function po(s,c,g){var v=c||new kt(0,0);s.style[Gl]=(re.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(g?" scale("+g+")":"")}function Bn(s,c){s._leaflet_pos=c,re.any3d?po(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function go(s){return s._leaflet_pos||new kt(0,0)}var Pa,Ia,jl;if("onselectstart"in document)Pa=function(){Ce(window,"selectstart",er)},Ia=function(){on(window,"selectstart",er)};else{var qo=Eu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Pa=function(){if(qo){var s=document.documentElement.style;jl=s[qo],s[qo]="none"}},Ia=function(){qo&&(document.documentElement.style[qo]=jl,jl=void 0)}}function ql(){Ce(window,"dragstart",er)}function Hl(){on(window,"dragstart",er)}var Lu,Zl;function Kl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(xu(),Lu=s,Zl=s.style.outlineStyle,s.style.outlineStyle="none",Ce(window,"keydown",xu))}function xu(){Lu&&(Lu.style.outlineStyle=Zl,Lu=void 0,Zl=void 0,on(window,"keydown",xu))}function bh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Xl(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var Kp={__proto__:null,TRANSFORM:Gl,TRANSITION:Sa,TRANSITION_END:Lh,get:xh,getStyle:Os,create:qe,remove:pn,empty:Ma,toFront:jo,toBack:fo,hasClass:Ul,addClass:xe,removeClass:In,setClass:Vl,getClass:Cu,setOpacity:li,testProp:Eu,setTransform:po,setPosition:Bn,getPosition:go,get disableTextSelection(){return Pa},get enableTextSelection(){return Ia},disableImageDrag:ql,enableImageDrag:Hl,preventOutline:Kl,restoreOutline:xu,getSizedParentNode:bh,getScale:Xl};function Ce(s,c,g,v){if(c&&typeof c=="object")for(var w in c)Wl(s,w,c[w],g);else{c=I(c);for(var D=0,H=c.length;D<H;D++)Wl(s,c[D],g,v)}return this}var Gi="_leaflet_events";function on(s,c,g,v){if(arguments.length===1)wh(s),delete s[Gi];else if(c&&typeof c=="object")for(var w in c)Bs(s,w,c[w],g);else if(c=I(c),arguments.length===2)wh(s,function(ot){return mt(c,ot)!==-1});else for(var D=0,H=c.length;D<H;D++)Bs(s,c[D],g,v);return this}function wh(s,c){for(var g in s[Gi]){var v=g.split(/\d/)[0];(!c||c(v))&&Bs(s,v,null,null,g)}}var Yl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Wl(s,c,g,v){var w=c+d(g)+(v?"_"+d(v):"");if(s[Gi]&&s[Gi][w])return this;var D=function(ot){return g.call(v||s,ot||window.event)},H=D;!re.touchNative&&re.pointer&&c.indexOf("touch")===0?D=Bp(s,c,D):re.touch&&c==="dblclick"?D=qp(s,D):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(Yl[c]||c,D,re.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(D=function(ot){ot=ot||window.event,Ql(s,ot)&&H(ot)},s.addEventListener(Yl[c],D,!1)):s.addEventListener(c,H,!1):s.attachEvent("on"+c,D),s[Gi]=s[Gi]||{},s[Gi][w]=D}function Bs(s,c,g,v,w){w=w||c+d(g)+(v?"_"+d(v):"");var D=s[Gi]&&s[Gi][w];if(!D)return this;!re.touchNative&&re.pointer&&c.indexOf("touch")===0?Fp(s,c,D):re.touch&&c==="dblclick"?Hp(s,D):"removeEventListener"in s?s.removeEventListener(Yl[c]||c,D,!1):s.detachEvent("on"+c,D),s[Gi][w]=null}function mo(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Jl(s){return Wl(s,"wheel",mo),this}function Ta(s){return Ce(s,"mousedown touchstart dblclick contextmenu",mo),s._leaflet_disable_click=!0,this}function er(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function _o(s){return er(s),mo(s),this}function Sh(s){if(s.composedPath)return s.composedPath();for(var c=[],g=s.target;g;)c.push(g),g=g.parentNode;return c}function Mh(s,c){if(!c)return new kt(s.clientX,s.clientY);var g=Xl(c),v=g.boundingClientRect;return new kt((s.clientX-v.left)/g.x-c.clientLeft,(s.clientY-v.top)/g.y-c.clientTop)}var Xp=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ph(s){return re.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Xp:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ql(s,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==s;)g=g.parentNode}catch{return!1}return g!==s}var bu={__proto__:null,on:Ce,off:on,stopPropagation:mo,disableScrollPropagation:Jl,disableClickPropagation:Ta,preventDefault:er,stop:_o,getPropagationPath:Sh,getMousePosition:Mh,getWheelDelta:Ph,isExternalTarget:Ql,addListener:Ce,removeListener:on},Ih=Zt.extend({run:function(s,c,g,v){this.stop(),this._el=s,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=go(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ht(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var g=this._startPos.add(this._offset.multiplyBy(s));c&&g._round(),Bn(this._el,g),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Fe=Zt.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=z(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(ce(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Sa&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ce(this._proxy,Lh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(ce(s),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=i({animate:g.animate},g.zoom),g.pan=i({animate:g.animate,duration:g.duration},g.pan));var v=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,g.zoom):this._tryAnimatedPan(s,g.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,g){var v=this.getZoomScale(c),w=this.getSize().divideBy(2),D=s instanceof kt?s:this.latLngToContainerPoint(s),H=D.subtract(w).multiplyBy(1-1/v),ot=this.containerPointToLatLng(w.add(H));return this.setView(ot,c,{zoom:g})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():ke(s);var g=Yt(c.paddingTopLeft||c.padding||[0,0]),v=Yt(c.paddingBottomRight||c.padding||[0,0]),w=this.getBoundsZoom(s,!1,g.add(v));if(w=typeof c.maxZoom=="number"?Math.min(c.maxZoom,w):w,w===1/0)return{center:s.getCenter(),zoom:w};var D=v.subtract(g).divideBy(2),H=this.project(s.getSouthWest(),w),ot=this.project(s.getNorthEast(),w),gt=this.unproject(H.add(ot).divideBy(2).add(D),w);return{center:gt,zoom:w}},fitBounds:function(s,c){if(s=ke(s),!s.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(s,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=Yt(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ih,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,g){if(g=g||{},g.animate===!1||!re.any3d)return this.setView(s,c,g);this._stop();var v=this.project(this.getCenter()),w=this.project(s),D=this.getSize(),H=this._zoom;s=ce(s),c=c===void 0?H:c;var ot=Math.max(D.x,D.y),gt=ot*this.getZoomScale(H,c),St=w.distanceTo(v)||1,qt=1.42,fe=qt*qt;function Ae(Tn){var za=Tn?-1:1,md=Tn?gt:ot,Zi=gt*gt-ot*ot+za*fe*fe*St*St,_d=2*md*fe*St,Jo=Zi/_d,hc=Math.sqrt(Jo*Jo+1)-Jo,yd=hc<1e-9?-18:Math.log(hc);return yd}function xr(Tn){return(Math.exp(Tn)-Math.exp(-Tn))/2}function qn(Tn){return(Math.exp(Tn)+Math.exp(-Tn))/2}function kr(Tn){return xr(Tn)/qn(Tn)}var xn=Ae(0);function Hi(Tn){return ot*(qn(xn)/qn(xn+qt*Tn))}function cc(Tn){return ot*(qn(xn)*kr(xn+qt*Tn)-xr(xn))/fe}function qu(Tn){return 1-Math.pow(1-Tn,1.5)}var qh=Date.now(),Fa=(Ae(1)-xn)/qt,gd=g.duration?1e3*g.duration:1e3*Fa*.8;function Hh(){var Tn=(Date.now()-qh)/gd,za=qu(Tn)*Fa;Tn<=1?(this._flyToFrame=Ht(Hh,this),this._move(this.unproject(v.add(w.subtract(v).multiplyBy(cc(za)/St)),H),this.getScaleZoom(ot/Hi(za),H),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Hh.call(this),this},flyToBounds:function(s,c){var g=this._getBoundsCenterZoom(s,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(s){return s=ke(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var g=this.getCenter(),v=this._limitCenter(g,this._zoom,ke(s));return g.equals(v)||this.panTo(v,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var g=Yt(c.paddingTopLeft||c.padding||[0,0]),v=Yt(c.paddingBottomRight||c.padding||[0,0]),w=this.project(this.getCenter()),D=this.project(s),H=this.getPixelBounds(),ot=Me([H.min.add(g),H.max.subtract(v)]),gt=ot.getSize();if(!ot.contains(D)){this._enforcingBounds=!0;var St=D.subtract(ot.getCenter()),qt=ot.extend(D).getSize().subtract(gt);w.x+=St.x<0?-qt.x:qt.x,w.y+=St.y<0?-qt.y:qt.y,this.panTo(this.unproject(w),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),v=c.divideBy(2).round(),w=g.divideBy(2).round(),D=v.subtract(w);return!D.x&&!D.y?this:(s.animate&&s.pan?this.panBy(D):(s.pan&&this._rawPanBy(D),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,s):navigator.geolocation.getCurrentPosition(c,g,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,g=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,g=s.coords.longitude,v=new ye(c,g),w=v.toBounds(s.coords.accuracy*2),D=this._locateOptions;if(D.setView){var H=this.getBoundsZoom(w);this.setView(v,D.maxZoom?Math.min(H,D.maxZoom):H)}var ot={latlng:v,bounds:w,timestamp:s.timestamp};for(var gt in s.coords)typeof s.coords[gt]=="number"&&(ot[gt]=s.coords[gt]);this.fire("locationfound",ot)}},addHandler:function(s,c){if(!c)return this;var g=this[s]=new c(this);return this._handlers.push(g),this.options[s]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)pn(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var g="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),v=qe("div",g,c||this._mapPane);return s&&(this._panes[s]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),g=this.unproject(s.getTopRight());return new ze(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,g){s=ke(s),g=Yt(g||[0,0]);var v=this.getZoom()||0,w=this.getMinZoom(),D=this.getMaxZoom(),H=s.getNorthWest(),ot=s.getSouthEast(),gt=this.getSize().subtract(g),St=Me(this.project(ot,v),this.project(H,v)).getSize(),qt=re.any3d?this.options.zoomSnap:1,fe=gt.x/St.x,Ae=gt.y/St.y,xr=c?Math.max(fe,Ae):Math.min(fe,Ae);return v=this.getScaleZoom(xr,v),qt&&(v=Math.round(v/(qt/100))*(qt/100),v=c?Math.ceil(v/qt)*qt:Math.floor(v/qt)*qt),Math.max(w,Math.min(D,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new kt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var g=this._getTopLeftPoint(s,c);return new de(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(s)/g.scale(c)},getScaleZoom:function(s,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var v=g.zoom(s*g.scale(c));return isNaN(v)?1/0:v},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(ce(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(Yt(s),c)},layerPointToLatLng:function(s){var c=Yt(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(ce(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ce(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ke(s))},distance:function(s,c){return this.options.crs.distance(ce(s),ce(c))},containerPointToLayerPoint:function(s){return Yt(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Yt(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(Yt(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(s)))},mouseEventToContainerPoint:function(s){return Mh(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=xh(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ce(c,"scroll",this._onScroll,this),this._containerId=d(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,xe(s,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Os(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Bn(this._mapPane,new kt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(s.markerPane,"leaflet-zoom-hide"),xe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,g){Bn(this._mapPane,new kt(0,0));var v=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var w=this._zoom!==c;this._moveStart(w,g)._move(s,c)._moveEnd(w),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,g,v){c===void 0&&(c=this._zoom);var w=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),v?g&&g.pinch&&this.fire("zoom",g):((w||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Bn(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var c=s?on:Ce;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=Ht(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var g=[],v,w=c==="mouseout"||c==="mouseover",D=s.target||s.srcElement,H=!1;D;){if(v=this._targets[d(D)],v&&(c==="click"||c==="preclick")&&this._draggableMoved(v)){H=!0;break}if(v&&v.listens(c,!0)&&(w&&!Ql(D,s)||(g.push(v),w))||D===this._container)break;D=D.parentNode}return!g.length&&!H&&!w&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var g=s.type;g==="mousedown"&&Kl(c),this._fireDOMEvent(s,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,g){if(s.type==="click"){var v=i({},s);v.type="preclick",this._fireDOMEvent(v,v.type,g)}var w=this._findEventTargets(s,c);if(g){for(var D=[],H=0;H<g.length;H++)g[H].listens(c,!0)&&D.push(g[H]);w=D.concat(w)}if(w.length){c==="contextmenu"&&er(s);var ot=w[0],gt={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var St=ot.getLatLng&&(!ot._radius||ot._radius<=10);gt.containerPoint=St?this.latLngToContainerPoint(ot.getLatLng()):this.mouseEventToContainerPoint(s),gt.layerPoint=this.containerPointToLayerPoint(gt.containerPoint),gt.latlng=St?ot.getLatLng():this.layerPointToLatLng(gt.layerPoint)}for(H=0;H<w.length;H++)if(w[H].fire(c,gt,!0),gt.originalEvent._stopped||w[H].options.bubblingMouseEvents===!1&&mt(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return go(this._mapPane)||new kt(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var g=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var g=this.getSize()._divideBy(2);return this.project(s,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,g){var v=this._getNewPixelOrigin(g,c);return this.project(s,c)._subtract(v)},_latLngBoundsToNewLayerBounds:function(s,c,g){var v=this._getNewPixelOrigin(g,c);return Me([this.project(s.getSouthWest(),c)._subtract(v),this.project(s.getNorthWest(),c)._subtract(v),this.project(s.getSouthEast(),c)._subtract(v),this.project(s.getNorthEast(),c)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,g){if(!g)return s;var v=this.project(s,c),w=this.getSize().divideBy(2),D=new de(v.subtract(w),v.add(w)),H=this._getBoundsOffset(D,g,c);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?s:this.unproject(v.add(H),c)},_limitOffset:function(s,c){if(!c)return s;var g=this.getPixelBounds(),v=new de(g.min.add(s),g.max.add(s));return s.add(this._getBoundsOffset(v,c))},_getBoundsOffset:function(s,c,g){var v=Me(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),w=v.min.subtract(s.min),D=v.max.subtract(s.max),H=this._rebound(w.x,-D.x),ot=this._rebound(w.y,-D.y);return new kt(H,ot)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),g=this.getMaxZoom(),v=re.any3d?this.options.zoomSnap:1;return v&&(s=Math.round(s/v)*v),Math.max(c,Math.min(g,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){In(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var g=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var s=this._proxy=qe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var g=Gl,v=this._proxy.style[g];po(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),v===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();po(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(c),w=this._getCenterOffset(s)._divideBy(1-1/v);return g.animate!==!0&&!this.getSize().contains(w)?!1:(Ht(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,g,v){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&In(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Th(s,c){return new Fe(s,c)}var ve=Rt.extend({options:{position:"topright"},initialize:function(s){z(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),g=this.getPosition(),v=s._controlCorners[g];return xe(c,"leaflet-control"),g.indexOf("bottom")!==-1?v.insertBefore(c,v.firstChild):v.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),yo=function(s){return new ve(s)};Fe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",g=this._controlContainer=qe("div",c+"control-container",this._container);function v(w,D){var H=c+w+" "+c+D;s[w+D]=qe("div",H,g)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)pn(this._controlCorners[s]);pn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Aa=ve.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,g,v){return g<v?-1:v<g?1:0}},initialize:function(s,c,g){z(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in s)this._addLayer(s[v],v);for(v in c)this._addLayer(c[v],v,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return ve.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(d(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):In(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return In(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=qe("div",s),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Ta(c),Jl(c);var v=this._section=qe("section",s+"-list");g&&(this._map.on("click",this.collapse,this),Ce(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=qe("a",s+"-toggle",c);w.href="#",w.title="Layers",w.setAttribute("role","button"),Ce(w,{keydown:function(D){D.keyCode===13&&this._expandSafely()},click:function(D){er(D),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=qe("div",s+"-base",v),this._separator=qe("div",s+"-separator",v),this._overlaysList=qe("div",s+"-overlays",v),c.appendChild(v)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&d(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,g){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(v,w){return this.options.sortFunction(v.layer,w.layer,v.name,w.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ma(this._baseLayersList),Ma(this._overlaysList),this._layerControlInputs=[];var s,c,g,v,w=0;for(g=0;g<this._layers.length;g++)v=this._layers[g],this._addItem(v),c=c||v.overlay,s=s||!v.overlay,w+=v.overlay?0:1;return this.options.hideSingleBase&&(s=s&&w>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(d(s.target)),g=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(s,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=g,v.firstChild},_addItem:function(s){var c=document.createElement("label"),g=this._map.hasLayer(s.layer),v;s.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=g):v=this._createRadioElement("leaflet-base-layers_"+d(this),g),this._layerControlInputs.push(v),v.layerId=d(s.layer),Ce(v,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+s.name;var D=document.createElement("span");c.appendChild(D),D.appendChild(v),D.appendChild(w);var H=s.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,g,v=[],w=[];this._handlingClick=!0;for(var D=s.length-1;D>=0;D--)c=s[D],g=this._getLayer(c.layerId).layer,c.checked?v.push(g):c.checked||w.push(g);for(D=0;D<w.length;D++)this._map.hasLayer(w[D])&&this._map.removeLayer(w[D]);for(D=0;D<v.length;D++)this._map.hasLayer(v[D])||this._map.addLayer(v[D]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,g,v=this._map.getZoom(),w=s.length-1;w>=0;w--)c=s[w],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&v<g.options.minZoom||g.options.maxZoom!==void 0&&v>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ce(s,"click",er),this.expand();var c=this;setTimeout(function(){on(s,"click",er),c._preventClick=!1})}}),Yp=function(s,c,g){return new Aa(s,c,g)},wu=ve.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",g=qe("div",c+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,g,v,w){var D=qe("a",g,v);return D.innerHTML=s,D.href="#",D.title=c,D.setAttribute("role","button"),D.setAttribute("aria-label",c),Ta(D),Ce(D,"click",_o),Ce(D,"click",w,this),Ce(D,"click",this._refocusOnMap,this),D},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";In(this._zoomInButton,c),In(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(xe(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(xe(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Fe.mergeOptions({zoomControl:!0}),Fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wu,this.addControl(this.zoomControl))});var Wp=function(s){return new wu(s)},Su=ve.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",g=qe("div",c),v=this.options;return this._addScales(v,c+"-line",g),s.on(v.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),g},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,g){s.metric&&(this._mScale=qe("div",c,g)),s.imperial&&(this._iScale=qe("div",c,g))},_update:function(){var s=this._map,c=s.getSize().y/2,g=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/s)},_updateImperial:function(s){var c=s*3.2808399,g,v,w;c>5280?(g=c/5280,v=this._getRoundNum(g),this._updateScale(this._iScale,v+" mi",v/g)):(w=this._getRoundNum(c),this._updateScale(this._iScale,w+" ft",w/c))},_updateScale:function(s,c,g){s.style.width=Math.round(this.options.maxWidth*g)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),g=s/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),Mu=function(s){return new Su(s)},Jp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ui=ve.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?Jp+" ":"")+"Leaflet</a>"},initialize:function(s){z(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=qe("div","leaflet-control-attribution"),Ta(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),s.length&&g.push(s.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});Fe.mergeOptions({attributionControl:!0}),Fe.addInitHook(function(){this.options.attributionControl&&new Ui().addTo(this)});var Ah=function(s){return new Ui(s)};ve.Layers=Aa,ve.Zoom=wu,ve.Scale=Su,ve.Attribution=Ui,yo.layers=Yp,yo.zoom=Wp,yo.scale=Mu,yo.attribution=Ah;var Cr=Rt.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Cr.addTo=function(s,c){return s.addHandler(c,this),this};var Qp={Events:jt},Dh=re.touch?"touchstart mousedown":"mousedown",Fs=Zt.extend({options:{clickTolerance:3},initialize:function(s,c,g,v){z(this,v),this._element=s,this._dragStartTarget=c||s,this._preventOutline=g},enable:function(){this._enabled||(Ce(this._dragStartTarget,Dh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fs._dragging===this&&this.finishDrag(!0),on(this._dragStartTarget,Dh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ul(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Fs._dragging===this&&this.finishDrag();return}if(!(Fs._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Fs._dragging=this,this._preventOutline&&Kl(this._element),ql(),Pa(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,g=bh(this._element);this._startPoint=new kt(c.clientX,c.clientY),this._startPos=go(this._element),this._parentScale=Xl(g);var v=s.type==="mousedown";Ce(document,v?"mousemove":"touchmove",this._onMove,this),Ce(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,g=new kt(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,er(s),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Bn(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){In(document.body,"leaflet-dragging"),this._lastTarget&&(In(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),on(document,"mousemove touchmove",this._onMove,this),on(document,"mouseup touchend touchcancel",this._onUp,this),Hl(),Ia();var c=this._moved&&this._moving;this._moving=!1,Fs._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function kh(s,c,g){var v,w=[1,4,2,8],D,H,ot,gt,St,qt,fe,Ae;for(D=0,qt=s.length;D<qt;D++)s[D]._code=Tr(s[D],c);for(ot=0;ot<4;ot++){for(fe=w[ot],v=[],D=0,qt=s.length,H=qt-1;D<qt;H=D++)gt=s[D],St=s[H],gt._code&fe?St._code&fe||(Ae=zs(St,gt,fe,c,g),Ae._code=Tr(Ae,c),v.push(Ae)):(St._code&fe&&(Ae=zs(St,gt,fe,c,g),Ae._code=Tr(Ae,c),v.push(Ae)),v.push(gt));s=v}return s}function Nh(s,c){var g,v,w,D,H,ot,gt,St,qt;if(!s||s.length===0)throw new Error("latlngs not passed");Ar(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=ce([0,0]),Ae=ke(s),xr=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());xr<1700&&(fe=$l(s));var qn=s.length,kr=[];for(g=0;g<qn;g++){var xn=ce(s[g]);kr.push(c.project(ce([xn.lat-fe.lat,xn.lng-fe.lng])))}for(ot=gt=St=0,g=0,v=qn-1;g<qn;v=g++)w=kr[g],D=kr[v],H=w.y*D.x-D.y*w.x,gt+=(w.x+D.x)*H,St+=(w.y+D.y)*H,ot+=H*3;ot===0?qt=kr[0]:qt=[gt/ot,St/ot];var Hi=c.unproject(Yt(qt));return ce([Hi.lat+fe.lat,Hi.lng+fe.lng])}function $l(s){for(var c=0,g=0,v=0,w=0;w<s.length;w++){var D=ce(s[w]);c+=D.lat,g+=D.lng,v++}return ce([c/v,g/v])}var $p={__proto__:null,clipPolygon:kh,polygonCenter:Nh,centroid:$l};function Rh(s,c){if(!c||!s.length)return s.slice();var g=c*c;return s=Oh(s,g),s=nr(s,g),s}function tc(s,c,g){return Math.sqrt(Da(s,c,g,!0))}function td(s,c,g){return Da(s,c,g)}function nr(s,c){var g=s.length,v=typeof Uint8Array<"u"?Uint8Array:Array,w=new v(g);w[0]=w[g-1]=1,ur(s,w,c,0,g-1);var D,H=[];for(D=0;D<g;D++)w[D]&&H.push(s[D]);return H}function ur(s,c,g,v,w){var D=0,H,ot,gt;for(ot=v+1;ot<=w-1;ot++)gt=Da(s[ot],s[v],s[w],!0),gt>D&&(H=ot,D=gt);D>g&&(c[H]=1,ur(s,c,g,v,H),ur(s,c,g,H,w))}function Oh(s,c){for(var g=[s[0]],v=1,w=0,D=s.length;v<D;v++)ed(s[v],s[w])>c&&(g.push(s[v]),w=v);return w<D-1&&g.push(s[D-1]),g}var vo;function Co(s,c,g,v,w){var D=v?vo:Tr(s,g),H=Tr(c,g),ot,gt,St;for(vo=H;;){if(!(D|H))return[s,c];if(D&H)return!1;ot=D||H,gt=zs(s,c,ot,g,w),St=Tr(gt,g),ot===D?(s=gt,D=St):(c=gt,H=St)}}function zs(s,c,g,v,w){var D=c.x-s.x,H=c.y-s.y,ot=v.min,gt=v.max,St,qt;return g&8?(St=s.x+D*(gt.y-s.y)/H,qt=gt.y):g&4?(St=s.x+D*(ot.y-s.y)/H,qt=ot.y):g&2?(St=gt.x,qt=s.y+H*(gt.x-s.x)/D):g&1&&(St=ot.x,qt=s.y+H*(ot.x-s.x)/D),new kt(St,qt,w)}function Tr(s,c){var g=0;return s.x<c.min.x?g|=1:s.x>c.max.x&&(g|=2),s.y<c.min.y?g|=4:s.y>c.max.y&&(g|=8),g}function ed(s,c){var g=c.x-s.x,v=c.y-s.y;return g*g+v*v}function Da(s,c,g,v){var w=c.x,D=c.y,H=g.x-w,ot=g.y-D,gt=H*H+ot*ot,St;return gt>0&&(St=((s.x-w)*H+(s.y-D)*ot)/gt,St>1?(w=g.x,D=g.y):St>0&&(w+=H*St,D+=ot*St)),H=s.x-w,ot=s.y-D,v?H*H+ot*ot:new kt(w,D)}function Ar(s){return!rt(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function ci(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ar(s)}function ec(s,c){var g,v,w,D,H,ot,gt,St;if(!s||s.length===0)throw new Error("latlngs not passed");Ar(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var qt=ce([0,0]),fe=ke(s),Ae=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Ae<1700&&(qt=$l(s));var xr=s.length,qn=[];for(g=0;g<xr;g++){var kr=ce(s[g]);qn.push(c.project(ce([kr.lat-qt.lat,kr.lng-qt.lng])))}for(g=0,v=0;g<xr-1;g++)v+=qn[g].distanceTo(qn[g+1])/2;if(v===0)St=qn[0];else for(g=0,D=0;g<xr-1;g++)if(H=qn[g],ot=qn[g+1],w=H.distanceTo(ot),D+=w,D>v){gt=(D-v)/w,St=[ot.x-gt*(ot.x-H.x),ot.y-gt*(ot.y-H.y)];break}var xn=c.unproject(Yt(St));return ce([xn.lat+qt.lat,xn.lng+qt.lng])}var Pu={__proto__:null,simplify:Rh,pointToSegmentDistance:tc,closestPointOnSegment:td,clipSegment:Co,_getEdgeIntersection:zs,_getBitCode:Tr,_sqClosestPointOnSegment:Da,isFlat:Ar,_flat:ci,polylineCenter:ec},nc={project:function(s){return new kt(s.lng,s.lat)},unproject:function(s){return new ye(s.y,s.x)},bounds:new de([-180,-90],[180,90])},hi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,g=this.R,v=s.lat*c,w=this.R_MINOR/g,D=Math.sqrt(1-w*w),H=D*Math.sin(v),ot=Math.tan(Math.PI/4-v/2)/Math.pow((1-H)/(1+H),D/2);return v=-g*Math.log(Math.max(ot,1e-10)),new kt(s.lng*c*g,v)},unproject:function(s){for(var c=180/Math.PI,g=this.R,v=this.R_MINOR/g,w=Math.sqrt(1-v*v),D=Math.exp(-s.y/g),H=Math.PI/2-2*Math.atan(D),ot=0,gt=.1,St;ot<15&&Math.abs(gt)>1e-7;ot++)St=w*Math.sin(H),St=Math.pow((1-St)/(1+St),w/2),gt=Math.PI/2-2*Math.atan(D*St)-H,H+=gt;return new ye(H*c,s.x*c/g)}},Vi={__proto__:null,LonLat:nc,Mercator:hi,SphericalMercator:W},Iu=i({},Y,{code:"EPSG:3395",projection:hi,transformation:function(){var s=.5/(Math.PI*hi.R);return F(s,.5,-s,.5)}()}),rc=i({},Y,{code:"EPSG:4326",projection:nc,transformation:F(1/180,1,-1/180,.5)}),ic=i({},Et,{projection:nc,transformation:F(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var g=c.lng-s.lng,v=c.lat-s.lat;return Math.sqrt(g*g+v*v)},infinite:!0});Et.Earth=Y,Et.EPSG3395=Iu,Et.EPSG3857=V,Et.EPSG900913=et,Et.EPSG4326=rc,Et.Simple=ic;var Er=Zt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Fe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=d(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=d(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,c){for(var g in this._layers)s.call(c,this._layers[g]);return this},_addLayers:function(s){s=s?rt(s)?s:[s]:[];for(var c=0,g=s.length;c<g;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=d(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,g=this._getZoomSpan();for(var v in this._zoomBoundLayers){var w=this._zoomBoundLayers[v].options;s=w.minZoom===void 0?s:Math.min(s,w.minZoom),c=w.maxZoom===void 0?c:Math.max(c,w.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ho=Er.extend({initialize:function(s,c){z(this,c),this._layers={};var g,v;if(s)for(g=0,v=s.length;g<v;g++)this.addLayer(s[g])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),g,v;for(g in this._layers)v=this._layers[g],v[s]&&v[s].apply(v,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var g in this._layers)s.call(c,this._layers[g]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),nd=function(s,c){return new Ho(s,c)},Li=Ho.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Ho.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Ho.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new ze;for(var c in this._layers){var g=this._layers[c];s.extend(g.getBounds?g.getBounds():g.getLatLng())}return s}}),rd=function(s,c){return new Li(s,c)},Zo=Rt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){z(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var g=this._getIconUrl(s);if(!g){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(v,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(s,c){var g=this.options,v=g[c+"Size"];typeof v=="number"&&(v=[v,v]);var w=Yt(v),D=Yt(c==="shadow"&&g.shadowAnchor||g.iconAnchor||w&&w.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(g.className||""),D&&(s.style.marginLeft=-D.x+"px",s.style.marginTop=-D.y+"px"),w&&(s.style.width=w.x+"px",s.style.height=w.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return re.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function id(s){return new Zo(s)}var ka=Zo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof ka.imagePath!="string"&&(ka.imagePath=this._detectIconPath()),(this.options.imagePath||ka.imagePath)+Zo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(g,v,w){var D=v.exec(g);return D&&D[w]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=qe("div","leaflet-default-icon-path",document.body),c=Os(s,"background-image")||Os(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Tu=Cr.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Fs(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&In(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,g=c._map,v=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,D=go(c._icon),H=g.getPixelBounds(),ot=g.getPixelOrigin(),gt=Me(H.min._subtract(ot).add(w),H.max._subtract(ot).subtract(w));if(!gt.contains(D)){var St=Yt((Math.max(gt.max.x,D.x)-gt.max.x)/(H.max.x-gt.max.x)-(Math.min(gt.min.x,D.x)-gt.min.x)/(H.min.x-gt.min.x),(Math.max(gt.max.y,D.y)-gt.max.y)/(H.max.y-gt.max.y)-(Math.min(gt.min.y,D.y)-gt.min.y)/(H.min.y-gt.min.y)).multiplyBy(v);g.panBy(St,{animate:!1}),this._draggable._newPos._add(St),this._draggable._startPos._add(St),Bn(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=Ht(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=Ht(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,g=c._shadow,v=go(c._icon),w=c._map.layerPointToLatLng(v);g&&Bn(g,v),c._latlng=w,s.latlng=w,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Au=Er.extend({options:{icon:new ka,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){z(this,c),this._latlng=ce(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=ce(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=s.icon.createIcon(this._icon),v=!1;g!==this._icon&&(this._icon&&this._removeIcon(),v=!0,s.title&&(g.title=s.title),g.tagName==="IMG"&&(g.alt=s.alt||"")),xe(g,c),s.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ce(g,"focus",this._panOnFocus,this);var w=s.icon.createShadow(this._shadow),D=!1;w!==this._shadow&&(this._removeShadow(),D=!0),w&&(xe(w,c),w.alt=""),this._shadow=w,s.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&D&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&on(this._icon,"focus",this._panOnFocus,this),pn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pn(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Bn(this._icon,s),this._shadow&&Bn(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Tu)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Tu(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&li(this._icon,s),this._shadow&&li(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,g=c.iconSize?Yt(c.iconSize):Yt(0,0),v=c.iconAnchor?Yt(c.iconAnchor):Yt(0,0);s.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:g.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function sd(s,c){return new Au(s,c)}var ps=Er.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return z(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ji=ps.extend({options:{fill:!0,radius:10},initialize:function(s,c){z(this,c),this._latlng=ce(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=ce(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return ps.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,g=this._clickTolerance(),v=[s+g,c+g];this._pxBounds=new de(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bh(s,c){return new ji(s,c)}var sc=ji.extend({initialize:function(s,c,g){if(typeof c=="number"&&(c=i({},g,{radius:c})),z(this,c),this._latlng=ce(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new ze(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:ps.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,g=this._map,v=g.options.crs;if(v.distance===Y.distance){var w=Math.PI/180,D=this._mRadius/Y.R/w,H=g.project([c+D,s]),ot=g.project([c-D,s]),gt=H.add(ot).divideBy(2),St=g.unproject(gt).lat,qt=Math.acos((Math.cos(D*w)-Math.sin(c*w)*Math.sin(St*w))/(Math.cos(c*w)*Math.cos(St*w)))/w;(isNaN(qt)||qt===0)&&(qt=D/Math.cos(Math.PI/180*c)),this._point=gt.subtract(g.getPixelOrigin()),this._radius=isNaN(qt)?0:gt.x-g.project([St,s-qt]).x,this._radiusY=gt.y-H.y}else{var fe=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(fe).x}this._updateBounds()}});function Eo(s,c,g){return new sc(s,c,g)}var ds=ps.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){z(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,g=null,v=Da,w,D,H=0,ot=this._parts.length;H<ot;H++)for(var gt=this._parts[H],St=1,qt=gt.length;St<qt;St++){w=gt[St-1],D=gt[St];var fe=v(s,w,D,!0);fe<c&&(c=fe,g=v(s,w,D))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ec(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=ce(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new ze,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ar(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],g=Ar(s),v=0,w=s.length;v<w;v++)g?(c[v]=ce(s[v]),this._bounds.extend(c[v])):c[v]=this._convertLatLngs(s[v]);return c},_project:function(){var s=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new kt(s,s);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,g){var v=s[0]instanceof ye,w=s.length,D,H;if(v){for(H=[],D=0;D<w;D++)H[D]=this._map.latLngToLayerPoint(s[D]),g.extend(H[D]);c.push(H)}else for(D=0;D<w;D++)this._projectLatlngs(s[D],c,g)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,v,w,D,H,ot,gt;for(g=0,w=0,D=this._rings.length;g<D;g++)for(gt=this._rings[g],v=0,H=gt.length;v<H-1;v++)ot=Co(gt[v],gt[v+1],s,v,!0),ot&&(c[w]=c[w]||[],c[w].push(ot[0]),(ot[1]!==gt[v+1]||v===H-2)&&(c[w].push(ot[1]),w++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,g=0,v=s.length;g<v;g++)s[g]=Rh(s[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var g,v,w,D,H,ot,gt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(g=0,D=this._parts.length;g<D;g++)for(ot=this._parts[g],v=0,H=ot.length,w=H-1;v<H;w=v++)if(!(!c&&v===0)&&tc(s,ot[w],ot[v])<=gt)return!0;return!1}});function od(s,c){return new ds(s,c)}ds._flat=ci;var Gs=ds.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=ds.prototype._convertLatLngs.call(this,s),g=c.length;return g>=2&&c[0]instanceof ye&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(s){ds.prototype._setLatLngs.call(this,s),Ar(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ar(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,g=new kt(c,c);if(s=new de(s.min.subtract(g),s.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,w=this._rings.length,D;v<w;v++)D=kh(this._rings[v],s,!0),D.length&&this._parts.push(D)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,g,v,w,D,H,ot,gt,St;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(D=0,gt=this._parts.length;D<gt;D++)for(g=this._parts[D],H=0,St=g.length,ot=St-1;H<St;ot=H++)v=g[H],w=g[ot],v.y>s.y!=w.y>s.y&&s.x<(w.x-v.x)*(s.y-v.y)/(w.y-v.y)+v.x&&(c=!c);return c||ds.prototype._containsPoint.call(this,s,!0)}});function Na(s,c){return new Gs(s,c)}var gs=Li.extend({initialize:function(s,c){z(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=rt(s)?s:s.features,g,v,w;if(c){for(g=0,v=c.length;g<v;g++)w=c[g],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var D=this.options;if(D.filter&&!D.filter(s))return this;var H=Du(s,D);return H?(H.feature=Bu(s),H.defaultOptions=H.options,this.resetStyle(H),D.onEachFeature&&D.onEachFeature(s,H),this.addLayer(H)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function Du(s,c){var g=s.type==="Feature"?s.geometry:s,v=g?g.coordinates:null,w=[],D=c&&c.pointToLayer,H=c&&c.coordsToLatLng||ku,ot,gt,St,qt;if(!v&&!g)return null;switch(g.type){case"Point":return ot=H(v),Fh(D,s,ot,c);case"MultiPoint":for(St=0,qt=v.length;St<qt;St++)ot=H(v[St]),w.push(Fh(D,s,ot,c));return new Li(w);case"LineString":case"MultiLineString":return gt=Nu(v,g.type==="LineString"?0:1,H),new ds(gt,c);case"Polygon":case"MultiPolygon":return gt=Nu(v,g.type==="Polygon"?1:2,H),new Gs(gt,c);case"GeometryCollection":for(St=0,qt=g.geometries.length;St<qt;St++){var fe=Du({geometry:g.geometries[St],type:"Feature",properties:s.properties},c);fe&&w.push(fe)}return new Li(w);case"FeatureCollection":for(St=0,qt=g.features.length;St<qt;St++){var Ae=Du(g.features[St],c);Ae&&w.push(Ae)}return new Li(w);default:throw new Error("Invalid GeoJSON object.")}}function Fh(s,c,g,v){return s?s(c,g):new Au(g,v&&v.markersInheritOptions&&v)}function ku(s){return new ye(s[1],s[0],s[2])}function Nu(s,c,g){for(var v=[],w=0,D=s.length,H;w<D;w++)H=c?Nu(s[w],c-1,g):(g||ku)(s[w]),v.push(H);return v}function Ru(s,c){return s=ce(s),s.alt!==void 0?[S(s.lng,c),S(s.lat,c),S(s.alt,c)]:[S(s.lng,c),S(s.lat,c)]}function Ou(s,c,g,v){for(var w=[],D=0,H=s.length;D<H;D++)w.push(c?Ou(s[D],Ar(s[D])?0:c-1,g,v):Ru(s[D],v));return!c&&g&&w.length>0&&w.push(w[0].slice()),w}function Ko(s,c){return s.feature?i({},s.feature,{geometry:c}):Bu(c)}function Bu(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Fu={toGeoJSON:function(s){return Ko(this,{type:"Point",coordinates:Ru(this.getLatLng(),s)})}};Au.include(Fu),sc.include(Fu),ji.include(Fu),ds.include({toGeoJSON:function(s){var c=!Ar(this._latlngs),g=Ou(this._latlngs,c?1:0,!1,s);return Ko(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),Gs.include({toGeoJSON:function(s){var c=!Ar(this._latlngs),g=c&&!Ar(this._latlngs[0]),v=Ou(this._latlngs,g?2:c?1:0,!0,s);return c||(v=[v]),Ko(this,{type:(g?"Multi":"")+"Polygon",coordinates:v})}}),Ho.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(s).geometry.coordinates)}),Ko(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var g=c==="GeometryCollection",v=[];return this.eachLayer(function(w){if(w.toGeoJSON){var D=w.toGeoJSON(s);if(g)v.push(D.geometry);else{var H=Bu(D);H.type==="FeatureCollection"?v.push.apply(v,H.features):v.push(H)}}}),g?Ko(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function zu(s,c){return new gs(s,c)}var zh=zu,Xo=Er.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,g){this._url=s,this._bounds=ke(c),z(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&jo(this._image),this},bringToBack:function(){return this._map&&fo(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ke(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:qe("img");if(xe(c,"leaflet-image-layer"),this._zoomAnimated&&xe(c,"leaflet-zoom-animated"),this.options.className&&xe(c,this.options.className),c.onselectstart=E,c.onmousemove=E,c.onload=u(this.fire,this,"load"),c.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;po(this._image,g,c)},_reset:function(){var s=this._image,c=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();Bn(s,c.min),s.style.width=g.x+"px",s.style.height=g.y+"px"},_updateOpacity:function(){li(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),ad=function(s,c,g){return new Xo(s,c,g)},Ra=Xo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:qe("video");if(xe(c,"leaflet-image-layer"),this._zoomAnimated&&xe(c,"leaflet-zoom-animated"),this.options.className&&xe(c,this.options.className),c.onselectstart=E,c.onmousemove=E,c.onloadeddata=u(this.fire,this,"load"),s){for(var g=c.getElementsByTagName("source"),v=[],w=0;w<g.length;w++)v.push(g[w].src);this._url=g.length>0?v:[c.src];return}rt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var D=0;D<this._url.length;D++){var H=qe("source");H.src=this._url[D],c.appendChild(H)}}});function Gh(s,c,g){return new Ra(s,c,g)}var Uh=Xo.extend({_initImage:function(){var s=this._image=this._url;xe(s,"leaflet-image-layer"),this._zoomAnimated&&xe(s,"leaflet-zoom-animated"),this.options.className&&xe(s,this.options.className),s.onselectstart=E,s.onmousemove=E}});function ud(s,c,g){return new Uh(s,c,g)}var qi=Er.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof ye||rt(s))?(this._latlng=ce(s),z(this,c)):(z(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&li(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&li(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(li(this._container,0),this._removeTimeout=setTimeout(u(pn,void 0,this._container),200)):pn(this._container),this.options.interactive&&(In(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ce(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jo(this._container),this},bringToBack:function(){return this._map&&fo(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof Li){c=null;var g=this._source._layers;for(var v in g)if(g[v]._map){c=g[v];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=Yt(this.options.offset),g=this._getAnchor();this._zoomAnimated?Bn(this._container,s.add(g)):c=c.add(s).add(g);var v=this._containerBottom=-c.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=v+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Fe.include({_initOverlay:function(s,c,g,v){var w=c;return w instanceof s||(w=new s(v).setContent(c)),g&&w.setLatLng(g),w}}),Er.include({_initOverlay:function(s,c,g,v){var w=g;return w instanceof s?(z(w,v),w._source=this):(w=c&&!v?c:new s(v,this),w.setContent(g)),w}});var Us=qi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,qi.prototype.openOn.call(this,s)},onAdd:function(s){qi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ps||this._source.on("preclick",mo))},onRemove:function(s){qi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ps||this._source.off("preclick",mo))},getEvents:function(){var s=qi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=qe("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=qe("div",s+"-content-wrapper",c);if(this._contentNode=qe("div",s+"-content",g),Ta(c),Jl(this._contentNode),Ce(c,"contextmenu",mo),this._tipContainer=qe("div",s+"-tip-container",c),this._tip=qe("div",s+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=qe("a",s+"-close-button",c);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',Ce(v,"click",function(w){er(w),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var g=s.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var v=s.offsetHeight,w=this.options.maxHeight,D="leaflet-popup-scrolled";w&&v>w?(c.height=w+"px",xe(s,D)):In(s,D),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),g=this._getAnchor();Bn(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(Os(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,v=this._containerWidth,w=new kt(this._containerLeft,-g-this._containerBottom);w._add(go(this._container));var D=s.layerPointToContainerPoint(w),H=Yt(this.options.autoPanPadding),ot=Yt(this.options.autoPanPaddingTopLeft||H),gt=Yt(this.options.autoPanPaddingBottomRight||H),St=s.getSize(),qt=0,fe=0;D.x+v+gt.x>St.x&&(qt=D.x+v-St.x+gt.x),D.x-qt-ot.x<0&&(qt=D.x-ot.x),D.y+g+gt.y>St.y&&(fe=D.y+g-St.y+gt.y),D.y-fe-ot.y<0&&(fe=D.y-ot.y),(qt||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([qt,fe]))}},_getAnchor:function(){return Yt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ld=function(s,c){return new Us(s,c)};Fe.mergeOptions({closePopupOnClick:!0}),Fe.include({openPopup:function(s,c,g){return this._initOverlay(Us,s,c,g).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Er.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Us,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Li||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){_o(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof ps)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Gu=qi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){qi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){qi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=qi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=qe("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,g,v=this._map,w=this._container,D=v.latLngToContainerPoint(v.getCenter()),H=v.layerPointToContainerPoint(s),ot=this.options.direction,gt=w.offsetWidth,St=w.offsetHeight,qt=Yt(this.options.offset),fe=this._getAnchor();ot==="top"?(c=gt/2,g=St):ot==="bottom"?(c=gt/2,g=0):ot==="center"?(c=gt/2,g=St/2):ot==="right"?(c=0,g=St/2):ot==="left"?(c=gt,g=St/2):H.x<D.x?(ot="right",c=0,g=St/2):(ot="left",c=gt+(qt.x+fe.x)*2,g=St/2),s=s.subtract(Yt(c,g,!0)).add(qt).add(fe),In(w,"leaflet-tooltip-right"),In(w,"leaflet-tooltip-left"),In(w,"leaflet-tooltip-top"),In(w,"leaflet-tooltip-bottom"),xe(w,"leaflet-tooltip-"+ot),Bn(w,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&li(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return Yt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),cd=function(s,c){return new Gu(s,c)};Fe.include({openTooltip:function(s,c,g){return this._initOverlay(Gu,s,c,g).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Er.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Gu,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Li||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(Ce(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ce(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,g,v;this._tooltip.options.sticky&&s.originalEvent&&(g=this._map.mouseEventToContainerPoint(s.originalEvent),v=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(c)}});var Vh=Zo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Ma(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var v=Yt(g.bgPos);c.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function hd(s){return new Vh(s)}Zo.Default=ka;var Oa=Er.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){z(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),pn(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof kt?s:new kt(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,g=-s(-1/0,1/0),v=0,w=c.length,D;v<w;v++)D=c[v].style.zIndex,c[v]!==this._container&&D&&(g=s(g,+D));isFinite(g)&&(this.options.zIndex=g+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){li(this._container,this.options.opacity);var s=+new Date,c=!1,g=!1;for(var v in this._tiles){var w=this._tiles[v];if(!(!w.current||!w.loaded)){var D=Math.min(1,(s-w.loaded)/200);li(w.el,D),D<1?c=!0:(w.active?g=!0:this._onOpaqueTile(w),w.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&(ee(this._fadeFrame),this._fadeFrame=Ht(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=qe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===s?(this._levels[g].el.style.zIndex=c-Math.abs(s-g),this._onUpdateLevel(g)):(pn(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var v=this._levels[s],w=this._map;return v||(v=this._levels[s]={},v.el=qe("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=c,v.origin=w.project(w.unproject(w.getPixelOrigin()),s).round(),v.zoom=s,this._setZoomTransform(v,w.getCenter(),w.getZoom()),E(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var s,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var v=c.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)pn(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,g,v){var w=Math.floor(s/2),D=Math.floor(c/2),H=g-1,ot=new kt(+w,+D);ot.z=+H;var gt=this._tileCoordsToKey(ot),St=this._tiles[gt];return St&&St.active?(St.retain=!0,!0):(St&&St.loaded&&(St.retain=!0),H>v?this._retainParent(w,D,H,v):!1)},_retainChildren:function(s,c,g,v){for(var w=2*s;w<2*s+2;w++)for(var D=2*c;D<2*c+2;D++){var H=new kt(w,D);H.z=g+1;var ot=this._tileCoordsToKey(H),gt=this._tiles[ot];if(gt&&gt.active){gt.retain=!0;continue}else gt&&gt.loaded&&(gt.retain=!0);g+1<v&&this._retainChildren(w,D,g+1,v)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,g,v){var w=Math.round(c);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var D=this.options.updateWhenZooming&&w!==this._tileZoom;(!v||D)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(s),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],s,c)},_setZoomTransform:function(s,c,g){var v=this._map.getZoomScale(g,s.zoom),w=s.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(c,g)).round();re.any3d?po(s.el,w,v):Bn(s.el,w)},_resetGrid:function(){var s=this._map,c=s.options.crs,g=this._tileSize=this.getTileSize(),v=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],v).x/g.x),Math.ceil(s.project([0,c.wrapLng[1]],v).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],v).y/g.x),Math.ceil(s.project([c.wrapLat[1],0],v).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),v=c.getZoomScale(g,this._tileZoom),w=c.project(s,this._tileZoom).floor(),D=c.getSize().divideBy(v*2);return new de(w.subtract(D),w.add(D))},_update:function(s){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(s),w=this._pxBoundsToTileRange(v),D=w.getCenter(),H=[],ot=this.options.keepBuffer,gt=new de(w.getBottomLeft().subtract([ot,-ot]),w.getTopRight().add([ot,-ot]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var St in this._tiles){var qt=this._tiles[St].coords;(qt.z!==this._tileZoom||!gt.contains(new kt(qt.x,qt.y)))&&(this._tiles[St].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(s,g);return}for(var fe=w.min.y;fe<=w.max.y;fe++)for(var Ae=w.min.x;Ae<=w.max.x;Ae++){var xr=new kt(Ae,fe);if(xr.z=this._tileZoom,!!this._isValidTile(xr)){var qn=this._tiles[this._tileCoordsToKey(xr)];qn?qn.current=!0:H.push(xr)}}if(H.sort(function(xn,Hi){return xn.distanceTo(D)-Hi.distanceTo(D)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var kr=document.createDocumentFragment();for(Ae=0;Ae<H.length;Ae++)this._addTile(H[Ae],kr);this._level.el.appendChild(kr)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(s.x<g.min.x||s.x>g.max.x)||!c.wrapLat&&(s.y<g.min.y||s.y>g.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(s);return ke(this.options.bounds).overlaps(v)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,g=this.getTileSize(),v=s.scaleBy(g),w=v.add(g),D=c.unproject(v,s.z),H=c.unproject(w,s.z);return[D,H]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),g=new ze(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),g=new kt(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(s){var c=this._tiles[s];c&&(pn(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){xe(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=E,s.onmousemove=E,re.ielt9&&this.options.opacity<1&&li(s,this.options.opacity)},_addTile:function(s,c){var g=this._getTilePos(s),v=this._tileCoordsToKey(s),w=this.createTile(this._wrapCoords(s),u(this._tileReady,this,s));this._initTile(w),this.createTile.length<2&&Ht(u(this._tileReady,this,s,null,w)),Bn(w,g),this._tiles[v]={el:w,coords:s,current:!0},c.appendChild(w),this.fire("tileloadstart",{tile:w,coords:s})},_tileReady:function(s,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:s});var v=this._tileCoordsToKey(s);g=this._tiles[v],g&&(g.loaded=+new Date,this._map._fadeAnimated?(li(g.el,0),ee(this._fadeFrame),this._fadeFrame=Ht(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(xe(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?Ht(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new kt(this._wrapX?y(s.x,this._wrapX):s.x,this._wrapY?y(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new de(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function fd(s){return new Oa(s)}var Yo=Oa.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=z(this,c),c.detectRetina&&re.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var g=document.createElement("img");return Ce(g,"load",u(this._tileOnLoad,this,c,g)),Ce(g,"error",u(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(s),g},getTileUrl:function(s){var c={r:re.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=g),c["-y"]=g}return $(this._url,i(c,this.options))},_tileOnLoad:function(s,c){re.ielt9?setTimeout(u(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,g){var v=this.options.errorTileUrl;v&&c.getAttribute("src")!==v&&(c.src=v),s(g,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,v=this.options.zoomOffset;return g&&(s=c-s),s+v},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=E,c.onerror=E,!c.complete)){c.src=bt;var g=this._tiles[s].coords;pn(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",bt),Oa.prototype._removeTile.call(this,s)},_tileReady:function(s,c,g){if(!(!this._map||g&&g.getAttribute("src")===bt))return Oa.prototype._tileReady.call(this,s,c,g)}});function oc(s,c){return new Yo(s,c)}var Uu=Yo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var g=i({},this.defaultWmsParams);for(var v in c)v in this.options||(g[v]=c[v]);c=z(this,c);var w=c.detectRetina&&re.retina?2:1,D=this.getTileSize();g.width=D.x*w,g.height=D.y*w,this.wmsParams=g},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Yo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),g=this._crs,v=Me(g.project(c[0]),g.project(c[1])),w=v.min,D=v.max,H=(this._wmsVersion>=1.3&&this._crs===rc?[w.y,w.x,D.y,D.x]:[w.x,w.y,D.x,D.y]).join(","),ot=Yo.prototype.getTileUrl.call(this,s);return ot+G(this.wmsParams,ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(s,c){return i(this.wmsParams,s),c||this.redraw(),this}});function pd(s,c){return new Uu(s,c)}Yo.WMS=Uu,oc.wms=pd;var ms=Er.extend({options:{padding:.1},initialize:function(s){z(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var g=this._map.getZoomScale(c,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,c),D=v.multiplyBy(-g).add(w).subtract(this._map._getNewPixelOrigin(s,c));re.any3d?po(this._container,D,g):Bn(this._container,D)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new de(g,g.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ac=ms.extend({options:{tolerance:0},getEvents:function(){var s=ms.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ms.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ce(s,"mousemove",this._onMouseMove,this),Ce(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ce(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,pn(this._container),on(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ms.prototype._update.call(this);var s=this._bounds,c=this._container,g=s.getSize(),v=re.retina?2:1;Bn(c,s.min),c.width=v*g.x,c.height=v*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){ms.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,g=c.next,v=c.prev;g?g.prev=v:this._drawLast=v,v?v.next=g:this._drawFirst=g,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),g=[],v,w;for(w=0;w<c.length;w++){if(v=Number(c[w]),isNaN(v))return;g.push(v)}s.options._dashArray=g}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||Ht(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)s=v.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var g,v,w,D,H=s._parts,ot=H.length,gt=this._ctx;if(ot){for(gt.beginPath(),g=0;g<ot;g++){for(v=0,w=H[g].length;v<w;v++)D=H[g][v],gt[v?"lineTo":"moveTo"](D.x,D.y);c&&gt.closePath()}this._fillStroke(gt,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,g=this._ctx,v=Math.max(Math.round(s._radius),1),w=(Math.max(Math.round(s._radiusY),1)||v)/v;w!==1&&(g.save(),g.scale(1,w)),g.beginPath(),g.arc(c.x,c.y/w,v,0,Math.PI*2,!1),w!==1&&g.restore(),this._fillStroke(g,s)}},_fillStroke:function(s,c){var g=c.options;g.fill&&(s.globalAlpha=g.fillOpacity,s.fillStyle=g.fillColor||g.color,s.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=g.opacity,s.lineWidth=g.weight,s.strokeStyle=g.color,s.lineCap=g.lineCap,s.lineJoin=g.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),g,v,w=this._drawFirst;w;w=w.next)g=w.layer,g.options.interactive&&g._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(g))&&(v=g);this._fireEvent(v?[v]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(In(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var g,v,w=this._drawFirst;w;w=w.next)g=w.layer,g.options.interactive&&g._containsPoint(c)&&(v=g);v!==this._hoveredLayer&&(this._handleMouseOut(s),v&&(xe(this._container,"leaflet-interactive"),this._fireEvent([v],s,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,g){this._map._fireDOMEvent(c,g||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var g=c.next,v=c.prev;if(g)g.prev=v;else return;v?v.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var g=c.next,v=c.prev;if(v)v.next=g;else return;g?g.prev=v:v&&(this._drawLast=v),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function Vu(s){return re.canvas?new ac(s):null}var Ba=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dd={_initContainer:function(){this._container=qe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ms.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Ba("shape");xe(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Ba("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;pn(c),s.removeInteractiveTarget(c),delete this._layers[d(s)]},_updateStyle:function(s){var c=s._stroke,g=s._fill,v=s.options,w=s._container;w.stroked=!!v.stroke,w.filled=!!v.fill,v.stroke?(c||(c=s._stroke=Ba("stroke")),w.appendChild(c),c.weight=v.weight+"px",c.color=v.color,c.opacity=v.opacity,v.dashArray?c.dashStyle=rt(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=v.lineCap.replace("butt","flat"),c.joinstyle=v.lineJoin):c&&(w.removeChild(c),s._stroke=null),v.fill?(g||(g=s._fill=Ba("fill")),w.appendChild(g),g.color=v.fillColor||v.color,g.opacity=v.fillOpacity):g&&(w.removeChild(g),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),g=Math.round(s._radius),v=Math.round(s._radiusY||g);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+v+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){jo(s._container)},_bringToBack:function(s){fo(s._container)}},Wo=re.vml?Ba:_t,lr=ms.extend({_initContainer:function(){this._container=Wo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Wo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pn(this._container),on(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ms.prototype._update.call(this);var s=this._bounds,c=s.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),Bn(g,s.min),g.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=Wo("path");s.options.className&&xe(c,s.options.className),s.options.interactive&&xe(c,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){pn(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,g=s.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,Ct(s._parts,c))},_updateCircle:function(s){var c=s._point,g=Math.max(Math.round(s._radius),1),v=Math.max(Math.round(s._radiusY),1)||g,w="a"+g+","+v+" 0 1,0 ",D=s._empty()?"M0 0":"M"+(c.x-g)+","+c.y+w+g*2+",0 "+w+-g*2+",0 ";this._setPath(s,D)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){jo(s._path)},_bringToBack:function(s){fo(s._path)}});re.vml&&lr.include(dd);function Lr(s){return re.svg||re.vml?new lr(s):null}Fe.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&Vu(s)||Lr(s)}});var uc=Gs.extend({initialize:function(s,c){Gs.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ke(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function xi(s,c){return new uc(s,c)}lr.create=Wo,lr.pointsToPath=Ct,gs.geometryToLayer=Du,gs.coordsToLatLng=ku,gs.coordsToLatLngs=Nu,gs.latLngToCoords=Ru,gs.latLngsToCoords=Ou,gs.getFeature=Ko,gs.asFeature=Bu,Fe.mergeOptions({boxZoom:!0});var _e=Cr.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){on(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Pa(),ql(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ce(document,{contextmenu:_o,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=qe("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new de(this._point,this._startPoint),g=c.getSize();Bn(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(pn(this._box),In(this._container,"leaflet-crosshair")),Ia(),Hl(),on(document,{contextmenu:_o,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var c=new ze(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Fe.addInitHook("addHandler","boxZoom",_e),Fe.mergeOptions({doubleClickZoom:!0});var lc=Cr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,g=c.getZoom(),v=c.options.zoomDelta,w=s.originalEvent.shiftKey?g-v:g+v;c.options.doubleClickZoom==="center"?c.setZoom(w):c.setZoomAround(s.containerPoint,w)}});Fe.addInitHook("addHandler","doubleClickZoom",lc),Fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ju=Cr.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Fs(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){In(this._map._container,"leaflet-grab"),In(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=ke(this._map.options.maxBounds);this._offsetLimit=Me(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),g=this._initialWorldOffset,v=this._draggable._newPos.x,w=(v-c+g)%s+c-g,D=(v+c+g)%s-c-g,H=Math.abs(w+g)<Math.abs(D+g)?w:D;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(s){var c=this._map,g=c.options,v=!g.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),v)c.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),D=(this._lastTime-this._times[0])/1e3,H=g.easeLinearity,ot=w.multiplyBy(H/D),gt=ot.distanceTo([0,0]),St=Math.min(g.inertiaMaxSpeed,gt),qt=ot.multiplyBy(St/gt),fe=St/(g.inertiaDeceleration*H),Ae=qt.multiplyBy(-fe/2).round();!Ae.x&&!Ae.y?c.fire("moveend"):(Ae=c._limitOffset(Ae,c.options.maxBounds),Ht(function(){c.panBy(Ae,{duration:fe,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});Fe.addInitHook("addHandler","dragging",ju),Fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _s=Cr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ce(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),on(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,g=s.scrollTop||c.scrollTop,v=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(v,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},g=this.keyCodes,v,w;for(v=0,w=g.left.length;v<w;v++)c[g.left[v]]=[-1*s,0];for(v=0,w=g.right.length;v<w;v++)c[g.right[v]]=[s,0];for(v=0,w=g.down.length;v<w;v++)c[g.down[v]]=[0,s];for(v=0,w=g.up.length;v<w;v++)c[g.up[v]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},g=this.keyCodes,v,w;for(v=0,w=g.zoomIn.length;v<w;v++)c[g.zoomIn[v]]=s;for(v=0,w=g.zoomOut.length;v<w;v++)c[g.zoomOut[v]]=-s},_addHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){on(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,g=this._map,v;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(v=this._panKeys[c],s.shiftKey&&(v=Yt(v).multiplyBy(3)),g.options.maxBounds&&(v=g._limitOffset(Yt(v),g.options.maxBounds)),g.options.worldCopyJump){var w=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(v)));g.panTo(w)}else g.panBy(v)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;_o(s)}}});Fe.addInitHook("addHandler","keyboard",_s),Fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Dr=Cr.extend({addHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){on(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=Ph(s),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var v=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),v),_o(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),g=this._map.options.zoomSnap||0;s._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,D=g?Math.ceil(w/g)*g:w,H=s._limitZoom(c+(this._delta>0?D:-D))-c;this._delta=0,this._startTime=null,H&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+H):s.setZoomAround(this._lastMousePos,c+H))}});Fe.addInitHook("addHandler","scrollWheelZoom",Dr);var jh=600;Fe.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var Yr=Cr.extend({addHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){on(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new kt(c.clientX,c.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Ce(document,"touchend",er),Ce(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),jh),Ce(document,"touchend touchcancel contextmenu",this._cancel,this),Ce(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){on(document,"touchend",er),on(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),on(document,"touchend touchcancel contextmenu",this._cancel,this),on(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new kt(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var g=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});Fe.addInitHook("addHandler","tapHold",Yr),Fe.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var Wr=Cr.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){In(this._map._container,"leaflet-touch-zoom"),on(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(s.touches[0]),v=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(v)._divideBy(2))),this._startDist=g.distanceTo(v),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend touchcancel",this._onTouchEnd,this),er(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(s.touches[0]),v=c.mouseEventToContainerPoint(s.touches[1]),w=g.distanceTo(v)/this._startDist;if(this._zoom=c.getScaleZoom(w,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&w<1||this._zoom>c.getMaxZoom()&&w>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var D=g._add(v)._divideBy(2)._subtract(this._centerPoint);if(w===1&&D.x===0&&D.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(D),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var H=u(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ht(H,this,!0),er(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),on(document,"touchmove",this._onTouchMove,this),on(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Fe.addInitHook("addHandler","touchZoom",Wr),Fe.BoxZoom=_e,Fe.DoubleClickZoom=lc,Fe.Drag=ju,Fe.Keyboard=_s,Fe.ScrollWheelZoom=Dr,Fe.TapHold=Yr,Fe.TouchZoom=Wr,n.Bounds=de,n.Browser=re,n.CRS=Et,n.Canvas=ac,n.Circle=sc,n.CircleMarker=ji,n.Class=Rt,n.Control=ve,n.DivIcon=Vh,n.DivOverlay=qi,n.DomEvent=bu,n.DomUtil=Kp,n.Draggable=Fs,n.Evented=Zt,n.FeatureGroup=Li,n.GeoJSON=gs,n.GridLayer=Oa,n.Handler=Cr,n.Icon=Zo,n.ImageOverlay=Xo,n.LatLng=ye,n.LatLngBounds=ze,n.Layer=Er,n.LayerGroup=Ho,n.LineUtil=Pu,n.Map=Fe,n.Marker=Au,n.Mixin=Qp,n.Path=ps,n.Point=kt,n.PolyUtil=$p,n.Polygon=Gs,n.Polyline=ds,n.Popup=Us,n.PosAnimation=Ih,n.Projection=Vi,n.Rectangle=uc,n.Renderer=ms,n.SVG=lr,n.SVGOverlay=Uh,n.TileLayer=Yo,n.Tooltip=Gu,n.Transformation=zt,n.Util=Ie,n.VideoOverlay=Ra,n.bind=u,n.bounds=Me,n.canvas=Vu,n.circle=Eo,n.circleMarker=Bh,n.control=yo,n.divIcon=hd,n.extend=i,n.featureGroup=rd,n.geoJSON=zu,n.geoJson=zh,n.gridLayer=fd,n.icon=id,n.imageOverlay=ad,n.latLng=ce,n.latLngBounds=ke,n.layerGroup=nd,n.map=Th,n.marker=sd,n.point=Yt,n.polygon=Na,n.polyline=od,n.popup=ld,n.rectangle=xi,n.setOptions=z,n.stamp=d,n.svg=Lr,n.svgOverlay=ud,n.tileLayer=oc,n.tooltip=cd,n.transformation=F,n.version=r,n.videoOverlay=Gh;var Lo=window.L;n.noConflict=function(){return window.L=Lo,this},window.L=n})}(ef,ef.exports)),ef.exports}var Z1=sv();const Rr=N1(Z1);(()=>{var gm,mm;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,u=(a,l)=>()=>(l||a((l={exports:{}}).exports,l),l.exports),f=(a,l,h,p)=>{if(l&&typeof l=="object"||typeof l=="function")for(let m of r(l))!o.call(a,m)&&m!==h&&t(a,m,{get:()=>l[m],enumerable:!(p=n(l,m))||p.enumerable});return a},d=(a,l,h)=>(h=a!=null?e(i(a)):{},f(l||!a||!a.__esModule?t(h,"default",{value:a,enumerable:!0}):h,a)),_=u((a,l)=>{function h(){this.__data__=[],this.size=0}l.exports=h}),y=u((a,l)=>{function h(p,m){return p===m||p!==p&&m!==m}l.exports=h}),E=u((a,l)=>{var h=y();function p(m,C){for(var x=m.length;x--;)if(h(m[x][0],C))return x;return-1}l.exports=p}),S=u((a,l)=>{var h=E(),p=Array.prototype,m=p.splice;function C(x){var b=this.__data__,M=h(b,x);if(M<0)return!1;var A=b.length-1;return M==A?b.pop():m.call(b,M,1),--this.size,!0}l.exports=C}),T=u((a,l)=>{var h=E();function p(m){var C=this.__data__,x=h(C,m);return x<0?void 0:C[x][1]}l.exports=p}),I=u((a,l)=>{var h=E();function p(m){return h(this.__data__,m)>-1}l.exports=p}),z=u((a,l)=>{var h=E();function p(m,C){var x=this.__data__,b=h(x,m);return b<0?(++this.size,x.push([m,C])):x[b][1]=C,this}l.exports=p}),G=u((a,l)=>{var h=_(),p=S(),m=T(),C=I(),x=z();function b(M){var A=-1,q=M==null?0:M.length;for(this.clear();++A<q;){var U=M[A];this.set(U[0],U[1])}}b.prototype.clear=h,b.prototype.delete=p,b.prototype.get=m,b.prototype.has=C,b.prototype.set=x,l.exports=b}),Q=u((a,l)=>{var h=G();function p(){this.__data__=new h,this.size=0}l.exports=p}),$=u((a,l)=>{function h(p){var m=this.__data__,C=m.delete(p);return this.size=m.size,C}l.exports=h}),rt=u((a,l)=>{function h(p){return this.__data__.get(p)}l.exports=h}),mt=u((a,l)=>{function h(p){return this.__data__.has(p)}l.exports=h}),bt=u((a,l)=>{var h=typeof Po=="object"&&Po&&Po.Object===Object&&Po;l.exports=h}),Dt=u((a,l)=>{var h=bt(),p=typeof self=="object"&&self&&self.Object===Object&&self,m=h||p||Function("return this")();l.exports=m}),Bt=u((a,l)=>{var h=Dt(),p=h.Symbol;l.exports=p}),Ft=u((a,l)=>{var h=Bt(),p=Object.prototype,m=p.hasOwnProperty,C=p.toString,x=h?h.toStringTag:void 0;function b(M){var A=m.call(M,x),q=M[x];try{M[x]=void 0;var U=!0}catch{}var ct=C.call(M);return U&&(A?M[x]=q:delete M[x]),ct}l.exports=b}),Nt=u((a,l)=>{var h=Object.prototype,p=h.toString;function m(C){return p.call(C)}l.exports=m}),te=u((a,l)=>{var h=Bt(),p=Ft(),m=Nt(),C="[object Null]",x="[object Undefined]",b=h?h.toStringTag:void 0;function M(A){return A==null?A===void 0?x:C:b&&b in Object(A)?p(A):m(A)}l.exports=M}),Ht=u((a,l)=>{function h(p){var m=typeof p;return p!=null&&(m=="object"||m=="function")}l.exports=h}),ee=u((a,l)=>{var h=te(),p=Ht(),m="[object AsyncFunction]",C="[object Function]",x="[object GeneratorFunction]",b="[object Proxy]";function M(A){if(!p(A))return!1;var q=h(A);return q==C||q==x||q==m||q==b}l.exports=M}),Ie=u((a,l)=>{var h=Dt(),p=h["__core-js_shared__"];l.exports=p}),Rt=u((a,l)=>{var h=Ie(),p=function(){var C=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}();function m(C){return!!p&&p in C}l.exports=m}),le=u((a,l)=>{var h=Function.prototype,p=h.toString;function m(C){if(C!=null){try{return p.call(C)}catch{}try{return C+""}catch{}}return""}l.exports=m}),jt=u((a,l)=>{var h=ee(),p=Rt(),m=Ht(),C=le(),x=/[\\^$.*+?()[\]{}|]/g,b=/^\[object .+?Constructor\]$/,M=Function.prototype,A=Object.prototype,q=M.toString,U=A.hasOwnProperty,ct=RegExp("^"+q.call(U).replace(x,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ft(It){if(!m(It)||p(It))return!1;var Vt=h(It)?ct:b;return Vt.test(C(It))}l.exports=ft}),Zt=u((a,l)=>{function h(p,m){return p==null?void 0:p[m]}l.exports=h}),kt=u((a,l)=>{var h=jt(),p=Zt();function m(C,x){var b=p(C,x);return h(b)?b:void 0}l.exports=m}),tn=u((a,l)=>{var h=kt(),p=Dt(),m=h(p,"Map");l.exports=m}),Yt=u((a,l)=>{var h=kt(),p=h(Object,"create");l.exports=p}),de=u((a,l)=>{var h=Yt();function p(){this.__data__=h?h(null):{},this.size=0}l.exports=p}),Me=u((a,l)=>{function h(p){var m=this.has(p)&&delete this.__data__[p];return this.size-=m?1:0,m}l.exports=h}),ze=u((a,l)=>{var h=Yt(),p="__lodash_hash_undefined__",m=Object.prototype,C=m.hasOwnProperty;function x(b){var M=this.__data__;if(h){var A=M[b];return A===p?void 0:A}return C.call(M,b)?M[b]:void 0}l.exports=x}),ke=u((a,l)=>{var h=Yt(),p=Object.prototype,m=p.hasOwnProperty;function C(x){var b=this.__data__;return h?b[x]!==void 0:m.call(b,x)}l.exports=C}),ye=u((a,l)=>{var h=Yt(),p="__lodash_hash_undefined__";function m(C,x){var b=this.__data__;return this.size+=this.has(C)?0:1,b[C]=h&&x===void 0?p:x,this}l.exports=m}),ce=u((a,l)=>{var h=de(),p=Me(),m=ze(),C=ke(),x=ye();function b(M){var A=-1,q=M==null?0:M.length;for(this.clear();++A<q;){var U=M[A];this.set(U[0],U[1])}}b.prototype.clear=h,b.prototype.delete=p,b.prototype.get=m,b.prototype.has=C,b.prototype.set=x,l.exports=b}),Et=u((a,l)=>{var h=ce(),p=G(),m=tn();function C(){this.size=0,this.__data__={hash:new h,map:new(m||p),string:new h}}l.exports=C}),Y=u((a,l)=>{function h(p){var m=typeof p;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?p!=="__proto__":p===null}l.exports=h}),J=u((a,l)=>{var h=Y();function p(m,C){var x=m.__data__;return h(C)?x[typeof C=="string"?"string":"hash"]:x.map}l.exports=p}),W=u((a,l)=>{var h=J();function p(m){var C=h(this,m).delete(m);return this.size-=C?1:0,C}l.exports=p}),zt=u((a,l)=>{var h=J();function p(m){return h(this,m).get(m)}l.exports=p}),F=u((a,l)=>{var h=J();function p(m){return h(this,m).has(m)}l.exports=p}),V=u((a,l)=>{var h=J();function p(m,C){var x=h(this,m),b=x.size;return x.set(m,C),this.size+=x.size==b?0:1,this}l.exports=p}),et=u((a,l)=>{var h=Et(),p=W(),m=zt(),C=F(),x=V();function b(M){var A=-1,q=M==null?0:M.length;for(this.clear();++A<q;){var U=M[A];this.set(U[0],U[1])}}b.prototype.clear=h,b.prototype.delete=p,b.prototype.get=m,b.prototype.has=C,b.prototype.set=x,l.exports=b}),_t=u((a,l)=>{var h=G(),p=tn(),m=et(),C=200;function x(b,M){var A=this.__data__;if(A instanceof h){var q=A.__data__;if(!p||q.length<C-1)return q.push([b,M]),this.size=++A.size,this;A=this.__data__=new m(q)}return A.set(b,M),this.size=A.size,this}l.exports=x}),Ct=u((a,l)=>{var h=G(),p=Q(),m=$(),C=rt(),x=mt(),b=_t();function M(A){var q=this.__data__=new h(A);this.size=q.size}M.prototype.clear=p,M.prototype.delete=m,M.prototype.get=C,M.prototype.has=x,M.prototype.set=b,l.exports=M}),yt=u((a,l)=>{var h=kt(),p=function(){try{var m=h(Object,"defineProperty");return m({},"",{}),m}catch{}}();l.exports=p}),Mt=u((a,l)=>{var h=yt();function p(m,C,x){C=="__proto__"&&h?h(m,C,{configurable:!0,enumerable:!0,value:x,writable:!0}):m[C]=x}l.exports=p}),Tt=u((a,l)=>{var h=Mt(),p=y();function m(C,x,b){(b!==void 0&&!p(C[x],b)||b===void 0&&!(x in C))&&h(C,x,b)}l.exports=m}),Pt=u((a,l)=>{function h(p){return function(m,C,x){for(var b=-1,M=Object(m),A=x(m),q=A.length;q--;){var U=A[p?q:++b];if(C(M[U],U,M)===!1)break}return m}}l.exports=h}),xt=u((a,l)=>{var h=Pt(),p=h();l.exports=p}),Kt=u((a,l)=>{var h=Dt(),p=typeof a=="object"&&a&&!a.nodeType&&a,m=p&&typeof l=="object"&&l&&!l.nodeType&&l,C=m&&m.exports===p,x=C?h.Buffer:void 0,b=x?x.allocUnsafe:void 0;function M(A,q){if(q)return A.slice();var U=A.length,ct=b?b(U):new A.constructor(U);return A.copy(ct),ct}l.exports=M}),Ut=u((a,l)=>{var h=Dt(),p=h.Uint8Array;l.exports=p}),ne=u((a,l)=>{var h=Ut();function p(m){var C=new m.constructor(m.byteLength);return new h(C).set(new h(m)),C}l.exports=p}),he=u((a,l)=>{var h=ne();function p(m,C){var x=C?h(m.buffer):m.buffer;return new m.constructor(x,m.byteOffset,m.length)}l.exports=p}),Te=u((a,l)=>{function h(p,m){var C=-1,x=p.length;for(m||(m=Array(x));++C<x;)m[C]=p[C];return m}l.exports=h}),Je=u((a,l)=>{var h=Ht(),p=Object.create,m=function(){function C(){}return function(x){if(!h(x))return{};if(p)return p(x);C.prototype=x;var b=new C;return C.prototype=void 0,b}}();l.exports=m}),je=u((a,l)=>{function h(p,m){return function(C){return p(m(C))}}l.exports=h}),ar=u((a,l)=>{var h=je(),p=h(Object.getPrototypeOf,Object);l.exports=p}),jn=u((a,l)=>{var h=Object.prototype;function p(m){var C=m&&m.constructor,x=typeof C=="function"&&C.prototype||h;return m===x}l.exports=p}),Kr=u((a,l)=>{var h=Je(),p=ar(),m=jn();function C(x){return typeof x.constructor=="function"&&!m(x)?h(p(x)):{}}l.exports=C}),tr=u((a,l)=>{function h(p){return p!=null&&typeof p=="object"}l.exports=h}),Rs=u((a,l)=>{var h=te(),p=tr(),m="[object Arguments]";function C(x){return p(x)&&h(x)==m}l.exports=C}),ho=u((a,l)=>{var h=Rs(),p=tr(),m=Object.prototype,C=m.hasOwnProperty,x=m.propertyIsEnumerable,b=h(function(){return arguments}())?h:function(M){return p(M)&&C.call(M,"callee")&&!x.call(M,"callee")};l.exports=b}),On=u((a,l)=>{var h=Array.isArray;l.exports=h}),Xr=u((a,l)=>{var h=9007199254740991;function p(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=h}l.exports=p}),zi=u((a,l)=>{var h=ee(),p=Xr();function m(C){return C!=null&&p(C.length)&&!h(C)}l.exports=m}),Pp=u((a,l)=>{var h=zi(),p=tr();function m(C){return p(C)&&h(C)}l.exports=m}),Ip=u((a,l)=>{function h(){return!1}l.exports=h}),Rl=u((a,l)=>{var h=Dt(),p=Ip(),m=typeof a=="object"&&a&&!a.nodeType&&a,C=m&&typeof l=="object"&&l&&!l.nodeType&&l,x=C&&C.exports===m,b=x?h.Buffer:void 0,M=b?b.isBuffer:void 0,A=M||p;l.exports=A}),fh=u((a,l)=>{var h=te(),p=ar(),m=tr(),C="[object Object]",x=Function.prototype,b=Object.prototype,M=x.toString,A=b.hasOwnProperty,q=M.call(Object);function U(ct){if(!m(ct)||h(ct)!=C)return!1;var ft=p(ct);if(ft===null)return!0;var It=A.call(ft,"constructor")&&ft.constructor;return typeof It=="function"&&It instanceof It&&M.call(It)==q}l.exports=U}),ph=u((a,l)=>{var h=te(),p=Xr(),m=tr(),C="[object Arguments]",x="[object Array]",b="[object Boolean]",M="[object Date]",A="[object Error]",q="[object Function]",U="[object Map]",ct="[object Number]",ft="[object Object]",It="[object RegExp]",Vt="[object Set]",Wt="[object String]",Ge="[object WeakMap]",j="[object ArrayBuffer]",Z="[object DataView]",nt="[object Float32Array]",pt="[object Float64Array]",st="[object Int8Array]",ht="[object Int16Array]",P="[object Int32Array]",k="[object Uint8Array]",R="[object Uint8ClampedArray]",N="[object Uint16Array]",O="[object Uint32Array]",B={};B[nt]=B[pt]=B[st]=B[ht]=B[P]=B[k]=B[R]=B[N]=B[O]=!0,B[C]=B[x]=B[j]=B[b]=B[Z]=B[M]=B[A]=B[q]=B[U]=B[ct]=B[ft]=B[It]=B[Vt]=B[Wt]=B[Ge]=!1;function X(K){return m(K)&&p(K.length)&&!!B[h(K)]}l.exports=X}),Tp=u((a,l)=>{function h(p){return function(m){return p(m)}}l.exports=h}),Ap=u((a,l)=>{var h=bt(),p=typeof a=="object"&&a&&!a.nodeType&&a,m=p&&typeof l=="object"&&l&&!l.nodeType&&l,C=m&&m.exports===p,x=C&&h.process,b=function(){try{var M=m&&m.require&&m.require("util").types;return M||x&&x.binding&&x.binding("util")}catch{}}();l.exports=b}),dh=u((a,l)=>{var h=ph(),p=Tp(),m=Ap(),C=m&&m.isTypedArray,x=C?p(C):h;l.exports=x}),gh=u((a,l)=>{function h(p,m){if(!(m==="constructor"&&typeof p[m]=="function")&&m!="__proto__")return p[m]}l.exports=h}),Dp=u((a,l)=>{var h=Mt(),p=y(),m=Object.prototype,C=m.hasOwnProperty;function x(b,M,A){var q=b[M];(!(C.call(b,M)&&p(q,A))||A===void 0&&!(M in b))&&h(b,M,A)}l.exports=x}),kp=u((a,l)=>{var h=Dp(),p=Mt();function m(C,x,b,M){var A=!b;b||(b={});for(var q=-1,U=x.length;++q<U;){var ct=x[q],ft=M?M(b[ct],C[ct],ct,b,C):void 0;ft===void 0&&(ft=C[ct]),A?p(b,ct,ft):h(b,ct,ft)}return b}l.exports=m}),Ol=u((a,l)=>{function h(p,m){for(var C=-1,x=Array(p);++C<p;)x[C]=m(C);return x}l.exports=h}),mh=u((a,l)=>{var h=9007199254740991,p=/^(?:0|[1-9]\d*)$/;function m(C,x){var b=typeof C;return x=x??h,!!x&&(b=="number"||b!="symbol"&&p.test(C))&&C>-1&&C%1==0&&C<x}l.exports=m}),Np=u((a,l)=>{var h=Ol(),p=ho(),m=On(),C=Rl(),x=mh(),b=dh(),M=Object.prototype,A=M.hasOwnProperty;function q(U,ct){var ft=m(U),It=!ft&&p(U),Vt=!ft&&!It&&C(U),Wt=!ft&&!It&&!Vt&&b(U),Ge=ft||It||Vt||Wt,j=Ge?h(U.length,String):[],Z=j.length;for(var nt in U)(ct||A.call(U,nt))&&!(Ge&&(nt=="length"||Vt&&(nt=="offset"||nt=="parent")||Wt&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||x(nt,Z)))&&j.push(nt);return j}l.exports=q}),Rp=u((a,l)=>{function h(p){var m=[];if(p!=null)for(var C in Object(p))m.push(C);return m}l.exports=h}),Op=u((a,l)=>{var h=Ht(),p=jn(),m=Rp(),C=Object.prototype,x=C.hasOwnProperty;function b(M){if(!h(M))return m(M);var A=p(M),q=[];for(var U in M)U=="constructor"&&(A||!x.call(M,U))||q.push(U);return q}l.exports=b}),Ei=u((a,l)=>{var h=Np(),p=Op(),m=zi();function C(x){return m(x)?h(x,!0):p(x)}l.exports=C}),re=u((a,l)=>{var h=kp(),p=Ei();function m(C){return h(C,p(C))}l.exports=m}),_h=u((a,l)=>{var h=Tt(),p=Kt(),m=he(),C=Te(),x=Kr(),b=ho(),M=On(),A=Pp(),q=Rl(),U=ee(),ct=Ht(),ft=fh(),It=dh(),Vt=gh(),Wt=re();function Ge(j,Z,nt,pt,st,ht,P){var k=Vt(j,nt),R=Vt(Z,nt),N=P.get(R);if(N){h(j,nt,N);return}var O=ht?ht(k,R,nt+"",j,Z,P):void 0,B=O===void 0;if(B){var X=M(R),K=!X&&q(R),tt=!X&&!K&&It(R);O=R,X||K||tt?M(k)?O=k:A(k)?O=C(k):K?(B=!1,O=p(R,!0)):tt?(B=!1,O=m(R,!0)):O=[]:ft(R)||b(R)?(O=k,b(k)?O=Wt(k):(!ct(k)||U(k))&&(O=x(R))):B=!1}B&&(P.set(R,O),st(O,R,pt,ht,P),P.delete(R)),h(j,nt,O)}l.exports=Ge}),yh=u((a,l)=>{var h=Ct(),p=Tt(),m=xt(),C=_h(),x=Ht(),b=Ei(),M=gh();function A(q,U,ct,ft,It){q!==U&&m(U,function(Vt,Wt){if(It||(It=new h),x(Vt))C(q,U,Wt,ct,A,ft,It);else{var Ge=ft?ft(M(q,Wt),Vt,Wt+"",q,U,It):void 0;Ge===void 0&&(Ge=Vt),p(q,Wt,Ge)}},b)}l.exports=A}),Bl=u((a,l)=>{function h(p){return p}l.exports=h}),vh=u((a,l)=>{function h(p,m,C){switch(C.length){case 0:return p.call(m);case 1:return p.call(m,C[0]);case 2:return p.call(m,C[0],C[1]);case 3:return p.call(m,C[0],C[1],C[2])}return p.apply(m,C)}l.exports=h}),Fl=u((a,l)=>{var h=vh(),p=Math.max;function m(C,x,b){return x=p(x===void 0?C.length-1:x,0),function(){for(var M=arguments,A=-1,q=p(M.length-x,0),U=Array(q);++A<q;)U[A]=M[x+A];A=-1;for(var ct=Array(x+1);++A<x;)ct[A]=M[A];return ct[x]=b(U),h(C,this,ct)}}l.exports=m}),Ch=u((a,l)=>{function h(p){return function(){return p}}l.exports=h}),Vo=u((a,l)=>{var h=Ch(),p=yt(),m=Bl(),C=p?function(x,b){return p(x,"toString",{configurable:!0,enumerable:!1,value:h(b),writable:!0})}:m;l.exports=C}),Eh=u((a,l)=>{var h=800,p=16,m=Date.now;function C(x){var b=0,M=0;return function(){var A=m(),q=p-(A-M);if(M=A,q>0){if(++b>=h)return arguments[0]}else b=0;return x.apply(void 0,arguments)}}l.exports=C}),Bp=u((a,l)=>{var h=Vo(),p=Eh(),m=p(h);l.exports=m}),Fp=u((a,l)=>{var h=Bl(),p=Fl(),m=Bp();function C(x,b){return m(p(x,b,h),x+"")}l.exports=C}),zp=u((a,l)=>{var h=y(),p=zi(),m=mh(),C=Ht();function x(b,M,A){if(!C(A))return!1;var q=typeof M;return(q=="number"?p(A)&&m(M,A.length):q=="string"&&M in A)?h(A[M],b):!1}l.exports=x}),Gp=u((a,l)=>{var h=Fp(),p=zp();function m(C){return h(function(x,b){var M=-1,A=b.length,q=A>1?b[A-1]:void 0,U=A>2?b[2]:void 0;for(q=C.length>3&&typeof q=="function"?(A--,q):void 0,U&&p(b[0],b[1],U)&&(q=A<3?void 0:q,A=1),x=Object(x);++M<A;){var ct=b[M];ct&&C(x,ct,M,q)}return x})}l.exports=m}),yu=u((a,l)=>{var h=yh(),p=Gp(),m=p(function(C,x,b){h(C,x,b)});l.exports=m}),zl=u((a,l)=>{var h=te(),p=tr(),m="[object Symbol]";function C(x){return typeof x=="symbol"||p(x)&&h(x)==m}l.exports=C}),vu=u((a,l)=>{var h=On(),p=zl(),m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/;function x(b,M){if(h(b))return!1;var A=typeof b;return A=="number"||A=="symbol"||A=="boolean"||b==null||p(b)?!0:C.test(b)||!m.test(b)||M!=null&&b in Object(M)}l.exports=x}),Up=u((a,l)=>{var h=et(),p="Expected a function";function m(C,x){if(typeof C!="function"||x!=null&&typeof x!="function")throw new TypeError(p);var b=function(){var M=arguments,A=x?x.apply(this,M):M[0],q=b.cache;if(q.has(A))return q.get(A);var U=C.apply(this,M);return b.cache=q.set(A,U)||q,U};return b.cache=new(m.Cache||h),b}m.Cache=h,l.exports=m}),Vp=u((a,l)=>{var h=Up(),p=500;function m(C){var x=h(C,function(M){return b.size===p&&b.clear(),M}),b=x.cache;return x}l.exports=m}),jp=u((a,l)=>{var h=Vp(),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,m=/\\(\\)?/g,C=h(function(x){var b=[];return x.charCodeAt(0)===46&&b.push(""),x.replace(p,function(M,A,q,U){b.push(q?U.replace(m,"$1"):A||M)}),b});l.exports=C}),qp=u((a,l)=>{function h(p,m){for(var C=-1,x=p==null?0:p.length,b=Array(x);++C<x;)b[C]=m(p[C],C,p);return b}l.exports=h}),Hp=u((a,l)=>{var h=Bt(),p=qp(),m=On(),C=zl(),x=h?h.prototype:void 0,b=x?x.toString:void 0;function M(A){if(typeof A=="string")return A;if(m(A))return p(A,M)+"";if(C(A))return b?b.call(A):"";var q=A+"";return q=="0"&&1/A==-1/0?"-0":q}l.exports=M}),Gl=u((a,l)=>{var h=Hp();function p(m){return m==null?"":h(m)}l.exports=p}),Sa=u((a,l)=>{var h=On(),p=vu(),m=jp(),C=Gl();function x(b,M){return h(b)?b:p(b,M)?[b]:m(C(b))}l.exports=x}),Lh=u((a,l)=>{var h=zl();function p(m){if(typeof m=="string"||h(m))return m;var C=m+"";return C=="0"&&1/m==-1/0?"-0":C}l.exports=p}),xh=u((a,l)=>{var h=Sa(),p=Lh();function m(C,x){x=h(x,C);for(var b=0,M=x.length;C!=null&&b<M;)C=C[p(x[b++])];return b&&b==M?C:void 0}l.exports=m}),Os=u((a,l)=>{var h=xh();function p(m,C,x){var b=m==null?void 0:h(m,C);return b===void 0?x:b}l.exports=p}),qe=u((a,l)=>{(function(h,p){typeof a=="object"&&typeof l<"u"?l.exports=p():(h=h||self).RBush=p()})(a,function(){function h(j,Z,nt,pt,st){(function ht(P,k,R,N,O){for(;N>R;){if(N-R>600){var B=N-R+1,X=k-R+1,K=Math.log(B),tt=.5*Math.exp(2*K/3),ut=.5*Math.sqrt(K*tt*(B-tt)/B)*(X-B/2<0?-1:1),at=Math.max(R,Math.floor(k-X*tt/B+ut)),wt=Math.min(N,Math.floor(k+(B-X)*tt/B+ut));ht(P,k,at,wt,O)}var Xt=P[k],$t=R,ae=N;for(p(P,R,k),O(P[N],Xt)>0&&p(P,R,N);$t<ae;){for(p(P,$t,ae),$t++,ae--;O(P[$t],Xt)<0;)$t++;for(;O(P[ae],Xt)>0;)ae--}O(P[R],Xt)===0?p(P,R,ae):p(P,++ae,N),ae<=k&&(R=ae+1),k<=ae&&(N=ae-1)}})(j,Z,nt||0,pt||j.length-1,st||m)}function p(j,Z,nt){var pt=j[Z];j[Z]=j[nt],j[nt]=pt}function m(j,Z){return j<Z?-1:j>Z?1:0}var C=function(j){j===void 0&&(j=9),this._maxEntries=Math.max(4,j),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function x(j,Z,nt){if(!nt)return Z.indexOf(j);for(var pt=0;pt<Z.length;pt++)if(nt(j,Z[pt]))return pt;return-1}function b(j,Z){M(j,0,j.children.length,Z,j)}function M(j,Z,nt,pt,st){st||(st=Wt(null)),st.minX=1/0,st.minY=1/0,st.maxX=-1/0,st.maxY=-1/0;for(var ht=Z;ht<nt;ht++){var P=j.children[ht];A(st,j.leaf?pt(P):P)}return st}function A(j,Z){return j.minX=Math.min(j.minX,Z.minX),j.minY=Math.min(j.minY,Z.minY),j.maxX=Math.max(j.maxX,Z.maxX),j.maxY=Math.max(j.maxY,Z.maxY),j}function q(j,Z){return j.minX-Z.minX}function U(j,Z){return j.minY-Z.minY}function ct(j){return(j.maxX-j.minX)*(j.maxY-j.minY)}function ft(j){return j.maxX-j.minX+(j.maxY-j.minY)}function It(j,Z){return j.minX<=Z.minX&&j.minY<=Z.minY&&Z.maxX<=j.maxX&&Z.maxY<=j.maxY}function Vt(j,Z){return Z.minX<=j.maxX&&Z.minY<=j.maxY&&Z.maxX>=j.minX&&Z.maxY>=j.minY}function Wt(j){return{children:j,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ge(j,Z,nt,pt,st){for(var ht=[Z,nt];ht.length;)if(!((nt=ht.pop())-(Z=ht.pop())<=pt)){var P=Z+Math.ceil((nt-Z)/pt/2)*pt;h(j,P,Z,nt,st),ht.push(Z,P,P,nt)}}return C.prototype.all=function(){return this._all(this.data,[])},C.prototype.search=function(j){var Z=this.data,nt=[];if(!Vt(j,Z))return nt;for(var pt=this.toBBox,st=[];Z;){for(var ht=0;ht<Z.children.length;ht++){var P=Z.children[ht],k=Z.leaf?pt(P):P;Vt(j,k)&&(Z.leaf?nt.push(P):It(j,k)?this._all(P,nt):st.push(P))}Z=st.pop()}return nt},C.prototype.collides=function(j){var Z=this.data;if(!Vt(j,Z))return!1;for(var nt=[];Z;){for(var pt=0;pt<Z.children.length;pt++){var st=Z.children[pt],ht=Z.leaf?this.toBBox(st):st;if(Vt(j,ht)){if(Z.leaf||It(j,ht))return!0;nt.push(st)}}Z=nt.pop()}return!1},C.prototype.load=function(j){if(!j||!j.length)return this;if(j.length<this._minEntries){for(var Z=0;Z<j.length;Z++)this.insert(j[Z]);return this}var nt=this._build(j.slice(),0,j.length-1,0);if(this.data.children.length)if(this.data.height===nt.height)this._splitRoot(this.data,nt);else{if(this.data.height<nt.height){var pt=this.data;this.data=nt,nt=pt}this._insert(nt,this.data.height-nt.height-1,!0)}else this.data=nt;return this},C.prototype.insert=function(j){return j&&this._insert(j,this.data.height-1),this},C.prototype.clear=function(){return this.data=Wt([]),this},C.prototype.remove=function(j,Z){if(!j)return this;for(var nt,pt,st,ht=this.data,P=this.toBBox(j),k=[],R=[];ht||k.length;){if(ht||(ht=k.pop(),pt=k[k.length-1],nt=R.pop(),st=!0),ht.leaf){var N=x(j,ht.children,Z);if(N!==-1)return ht.children.splice(N,1),k.push(ht),this._condense(k),this}st||ht.leaf||!It(ht,P)?pt?(nt++,ht=pt.children[nt],st=!1):ht=null:(k.push(ht),R.push(nt),nt=0,pt=ht,ht=ht.children[0])}return this},C.prototype.toBBox=function(j){return j},C.prototype.compareMinX=function(j,Z){return j.minX-Z.minX},C.prototype.compareMinY=function(j,Z){return j.minY-Z.minY},C.prototype.toJSON=function(){return this.data},C.prototype.fromJSON=function(j){return this.data=j,this},C.prototype._all=function(j,Z){for(var nt=[];j;)j.leaf?Z.push.apply(Z,j.children):nt.push.apply(nt,j.children),j=nt.pop();return Z},C.prototype._build=function(j,Z,nt,pt){var st,ht=nt-Z+1,P=this._maxEntries;if(ht<=P)return b(st=Wt(j.slice(Z,nt+1)),this.toBBox),st;pt||(pt=Math.ceil(Math.log(ht)/Math.log(P)),P=Math.ceil(ht/Math.pow(P,pt-1))),(st=Wt([])).leaf=!1,st.height=pt;var k=Math.ceil(ht/P),R=k*Math.ceil(Math.sqrt(P));Ge(j,Z,nt,R,this.compareMinX);for(var N=Z;N<=nt;N+=R){var O=Math.min(N+R-1,nt);Ge(j,N,O,k,this.compareMinY);for(var B=N;B<=O;B+=k){var X=Math.min(B+k-1,O);st.children.push(this._build(j,B,X,pt-1))}}return b(st,this.toBBox),st},C.prototype._chooseSubtree=function(j,Z,nt,pt){for(;pt.push(Z),!Z.leaf&&pt.length-1!==nt;){for(var st=1/0,ht=1/0,P=void 0,k=0;k<Z.children.length;k++){var R=Z.children[k],N=ct(R),O=(B=j,X=R,(Math.max(X.maxX,B.maxX)-Math.min(X.minX,B.minX))*(Math.max(X.maxY,B.maxY)-Math.min(X.minY,B.minY))-N);O<ht?(ht=O,st=N<st?N:st,P=R):O===ht&&N<st&&(st=N,P=R)}Z=P||Z.children[0]}var B,X;return Z},C.prototype._insert=function(j,Z,nt){var pt=nt?j:this.toBBox(j),st=[],ht=this._chooseSubtree(pt,this.data,Z,st);for(ht.children.push(j),A(ht,pt);Z>=0&&st[Z].children.length>this._maxEntries;)this._split(st,Z),Z--;this._adjustParentBBoxes(pt,st,Z)},C.prototype._split=function(j,Z){var nt=j[Z],pt=nt.children.length,st=this._minEntries;this._chooseSplitAxis(nt,st,pt);var ht=this._chooseSplitIndex(nt,st,pt),P=Wt(nt.children.splice(ht,nt.children.length-ht));P.height=nt.height,P.leaf=nt.leaf,b(nt,this.toBBox),b(P,this.toBBox),Z?j[Z-1].children.push(P):this._splitRoot(nt,P)},C.prototype._splitRoot=function(j,Z){this.data=Wt([j,Z]),this.data.height=j.height+1,this.data.leaf=!1,b(this.data,this.toBBox)},C.prototype._chooseSplitIndex=function(j,Z,nt){for(var pt,st,ht,P,k,R,N,O=1/0,B=1/0,X=Z;X<=nt-Z;X++){var K=M(j,0,X,this.toBBox),tt=M(j,X,nt,this.toBBox),ut=(st=K,ht=tt,P=void 0,k=void 0,R=void 0,N=void 0,P=Math.max(st.minX,ht.minX),k=Math.max(st.minY,ht.minY),R=Math.min(st.maxX,ht.maxX),N=Math.min(st.maxY,ht.maxY),Math.max(0,R-P)*Math.max(0,N-k)),at=ct(K)+ct(tt);ut<O?(O=ut,pt=X,B=at<B?at:B):ut===O&&at<B&&(B=at,pt=X)}return pt||nt-Z},C.prototype._chooseSplitAxis=function(j,Z,nt){var pt=j.leaf?this.compareMinX:q,st=j.leaf?this.compareMinY:U;this._allDistMargin(j,Z,nt,pt)<this._allDistMargin(j,Z,nt,st)&&j.children.sort(pt)},C.prototype._allDistMargin=function(j,Z,nt,pt){j.children.sort(pt);for(var st=this.toBBox,ht=M(j,0,Z,st),P=M(j,nt-Z,nt,st),k=ft(ht)+ft(P),R=Z;R<nt-Z;R++){var N=j.children[R];A(ht,j.leaf?st(N):N),k+=ft(ht)}for(var O=nt-Z-1;O>=Z;O--){var B=j.children[O];A(P,j.leaf?st(B):B),k+=ft(P)}return k},C.prototype._adjustParentBBoxes=function(j,Z,nt){for(var pt=nt;pt>=0;pt--)A(Z[pt],j)},C.prototype._condense=function(j){for(var Z=j.length-1,nt=void 0;Z>=0;Z--)j[Z].children.length===0?Z>0?(nt=j[Z-1].children).splice(nt.indexOf(j[Z]),1):this.clear():b(j[Z],this.toBBox)},C})}),pn=u(a=>{Object.defineProperty(a,"__esModule",{value:!0}),a.earthRadius=63710088e-1,a.factors={centimeters:a.earthRadius*100,centimetres:a.earthRadius*100,degrees:a.earthRadius/111325,feet:a.earthRadius*3.28084,inches:a.earthRadius*39.37,kilometers:a.earthRadius/1e3,kilometres:a.earthRadius/1e3,meters:a.earthRadius,metres:a.earthRadius,miles:a.earthRadius/1609.344,millimeters:a.earthRadius*1e3,millimetres:a.earthRadius*1e3,nauticalmiles:a.earthRadius/1852,radians:1,yards:a.earthRadius*1.0936},a.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/a.earthRadius,yards:1.0936133},a.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(N,O,B){B===void 0&&(B={});var X={type:"Feature"};return(B.id===0||B.id)&&(X.id=B.id),B.bbox&&(X.bbox=B.bbox),X.properties=O||{},X.geometry=N,X}a.feature=l;function h(N,O,B){switch(N){case"Point":return p(O).geometry;case"LineString":return b(O).geometry;case"Polygon":return C(O).geometry;case"MultiPoint":return U(O).geometry;case"MultiLineString":return q(O).geometry;case"MultiPolygon":return ct(O).geometry;default:throw new Error(N+" is invalid")}}a.geometry=h;function p(N,O,B){if(B===void 0&&(B={}),!N)throw new Error("coordinates is required");if(!Array.isArray(N))throw new Error("coordinates must be an Array");if(N.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ht(N[0])||!ht(N[1]))throw new Error("coordinates must contain numbers");var X={type:"Point",coordinates:N};return l(X,O,B)}a.point=p;function m(N,O,B){return B===void 0&&(B={}),A(N.map(function(X){return p(X,O)}),B)}a.points=m;function C(N,O,B){B===void 0&&(B={});for(var X=0,K=N;X<K.length;X++){var tt=K[X];if(tt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ut=0;ut<tt[tt.length-1].length;ut++)if(tt[tt.length-1][ut]!==tt[0][ut])throw new Error("First and last Position are not equivalent.")}var at={type:"Polygon",coordinates:N};return l(at,O,B)}a.polygon=C;function x(N,O,B){return B===void 0&&(B={}),A(N.map(function(X){return C(X,O)}),B)}a.polygons=x;function b(N,O,B){if(B===void 0&&(B={}),N.length<2)throw new Error("coordinates must be an array of two or more positions");var X={type:"LineString",coordinates:N};return l(X,O,B)}a.lineString=b;function M(N,O,B){return B===void 0&&(B={}),A(N.map(function(X){return b(X,O)}),B)}a.lineStrings=M;function A(N,O){O===void 0&&(O={});var B={type:"FeatureCollection"};return O.id&&(B.id=O.id),O.bbox&&(B.bbox=O.bbox),B.features=N,B}a.featureCollection=A;function q(N,O,B){B===void 0&&(B={});var X={type:"MultiLineString",coordinates:N};return l(X,O,B)}a.multiLineString=q;function U(N,O,B){B===void 0&&(B={});var X={type:"MultiPoint",coordinates:N};return l(X,O,B)}a.multiPoint=U;function ct(N,O,B){B===void 0&&(B={});var X={type:"MultiPolygon",coordinates:N};return l(X,O,B)}a.multiPolygon=ct;function ft(N,O,B){B===void 0&&(B={});var X={type:"GeometryCollection",geometries:N};return l(X,O,B)}a.geometryCollection=ft;function It(N,O){if(O===void 0&&(O=0),O&&!(O>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,O||0);return Math.round(N*B)/B}a.round=It;function Vt(N,O){O===void 0&&(O="kilometers");var B=a.factors[O];if(!B)throw new Error(O+" units is invalid");return N*B}a.radiansToLength=Vt;function Wt(N,O){O===void 0&&(O="kilometers");var B=a.factors[O];if(!B)throw new Error(O+" units is invalid");return N/B}a.lengthToRadians=Wt;function Ge(N,O){return Z(Wt(N,O))}a.lengthToDegrees=Ge;function j(N){var O=N%360;return O<0&&(O+=360),O}a.bearingToAzimuth=j;function Z(N){var O=N%(2*Math.PI);return O*180/Math.PI}a.radiansToDegrees=Z;function nt(N){var O=N%360;return O*Math.PI/180}a.degreesToRadians=nt;function pt(N,O,B){if(O===void 0&&(O="kilometers"),B===void 0&&(B="kilometers"),!(N>=0))throw new Error("length must be a positive number");return Vt(Wt(N,O),B)}a.convertLength=pt;function st(N,O,B){if(O===void 0&&(O="meters"),B===void 0&&(B="kilometers"),!(N>=0))throw new Error("area must be a positive number");var X=a.areaFactors[O];if(!X)throw new Error("invalid original units");var K=a.areaFactors[B];if(!K)throw new Error("invalid final units");return N/X*K}a.convertArea=st;function ht(N){return!isNaN(N)&&N!==null&&!Array.isArray(N)}a.isNumber=ht;function P(N){return!!N&&N.constructor===Object}a.isObject=P;function k(N){if(!N)throw new Error("bbox is required");if(!Array.isArray(N))throw new Error("bbox must be an Array");if(N.length!==4&&N.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");N.forEach(function(O){if(!ht(O))throw new Error("bbox must only contain numbers")})}a.validateBBox=k;function R(N){if(!N)throw new Error("id is required");if(["string","number"].indexOf(typeof N)===-1)throw new Error("id must be a number or a string")}a.validateId=R}),Ma=u(a=>{Object.defineProperty(a,"__esModule",{value:!0});var l=pn();function h(Z,nt,pt){if(Z!==null)for(var st,ht,P,k,R,N,O,B=0,X=0,K,tt=Z.type,ut=tt==="FeatureCollection",at=tt==="Feature",wt=ut?Z.features.length:1,Xt=0;Xt<wt;Xt++){O=ut?Z.features[Xt].geometry:at?Z.geometry:Z,K=O?O.type==="GeometryCollection":!1,R=K?O.geometries.length:1;for(var $t=0;$t<R;$t++){var ae=0,en=0;if(k=K?O.geometries[$t]:O,k!==null){N=k.coordinates;var an=k.type;switch(B=pt&&(an==="Polygon"||an==="MultiPolygon")?1:0,an){case null:break;case"Point":if(nt(N,X,Xt,ae,en)===!1)return!1;X++,ae++;break;case"LineString":case"MultiPoint":for(st=0;st<N.length;st++){if(nt(N[st],X,Xt,ae,en)===!1)return!1;X++,an==="MultiPoint"&&ae++}an==="LineString"&&ae++;break;case"Polygon":case"MultiLineString":for(st=0;st<N.length;st++){for(ht=0;ht<N[st].length-B;ht++){if(nt(N[st][ht],X,Xt,ae,en)===!1)return!1;X++}an==="MultiLineString"&&ae++,an==="Polygon"&&en++}an==="Polygon"&&ae++;break;case"MultiPolygon":for(st=0;st<N.length;st++){for(en=0,ht=0;ht<N[st].length;ht++){for(P=0;P<N[st][ht].length-B;P++){if(nt(N[st][ht][P],X,Xt,ae,en)===!1)return!1;X++}en++}ae++}break;case"GeometryCollection":for(st=0;st<k.geometries.length;st++)if(h(k.geometries[st],nt,pt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function p(Z,nt,pt,st){var ht=pt;return h(Z,function(P,k,R,N,O){k===0&&pt===void 0?ht=P:ht=nt(ht,P,k,R,N,O)},st),ht}function m(Z,nt){var pt;switch(Z.type){case"FeatureCollection":for(pt=0;pt<Z.features.length&&nt(Z.features[pt].properties,pt)!==!1;pt++);break;case"Feature":nt(Z.properties,0);break}}function C(Z,nt,pt){var st=pt;return m(Z,function(ht,P){P===0&&pt===void 0?st=ht:st=nt(st,ht,P)}),st}function x(Z,nt){if(Z.type==="Feature")nt(Z,0);else if(Z.type==="FeatureCollection")for(var pt=0;pt<Z.features.length&&nt(Z.features[pt],pt)!==!1;pt++);}function b(Z,nt,pt){var st=pt;return x(Z,function(ht,P){P===0&&pt===void 0?st=ht:st=nt(st,ht,P)}),st}function M(Z){var nt=[];return h(Z,function(pt){nt.push(pt)}),nt}function A(Z,nt){var pt,st,ht,P,k,R,N,O,B,X,K=0,tt=Z.type==="FeatureCollection",ut=Z.type==="Feature",at=tt?Z.features.length:1;for(pt=0;pt<at;pt++){for(R=tt?Z.features[pt].geometry:ut?Z.geometry:Z,O=tt?Z.features[pt].properties:ut?Z.properties:{},B=tt?Z.features[pt].bbox:ut?Z.bbox:void 0,X=tt?Z.features[pt].id:ut?Z.id:void 0,N=R?R.type==="GeometryCollection":!1,k=N?R.geometries.length:1,ht=0;ht<k;ht++){if(P=N?R.geometries[ht]:R,P===null){if(nt(null,K,O,B,X)===!1)return!1;continue}switch(P.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(nt(P,K,O,B,X)===!1)return!1;break}case"GeometryCollection":{for(st=0;st<P.geometries.length;st++)if(nt(P.geometries[st],K,O,B,X)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}K++}}function q(Z,nt,pt){var st=pt;return A(Z,function(ht,P,k,R,N){P===0&&pt===void 0?st=ht:st=nt(st,ht,P,k,R,N)}),st}function U(Z,nt){A(Z,function(pt,st,ht,P,k){var R=pt===null?null:pt.type;switch(R){case null:case"Point":case"LineString":case"Polygon":return nt(l.feature(pt,ht,{bbox:P,id:k}),st,0)===!1?!1:void 0}var N;switch(R){case"MultiPoint":N="Point";break;case"MultiLineString":N="LineString";break;case"MultiPolygon":N="Polygon";break}for(var O=0;O<pt.coordinates.length;O++){var B=pt.coordinates[O],X={type:N,coordinates:B};if(nt(l.feature(X,ht),st,O)===!1)return!1}})}function ct(Z,nt,pt){var st=pt;return U(Z,function(ht,P,k){P===0&&k===0&&pt===void 0?st=ht:st=nt(st,ht,P,k)}),st}function ft(Z,nt){U(Z,function(pt,st,ht){var P=0;if(pt.geometry){var k=pt.geometry.type;if(!(k==="Point"||k==="MultiPoint")){var R,N=0,O=0,B=0;if(h(pt,function(X,K,tt,ut,at){if(R===void 0||st>N||ut>O||at>B){R=X,N=st,O=ut,B=at,P=0;return}var wt=l.lineString([R,X],pt.properties);if(nt(wt,st,ht,at,P)===!1)return!1;P++,R=X})===!1)return!1}}})}function It(Z,nt,pt){var st=pt,ht=!1;return ft(Z,function(P,k,R,N,O){ht===!1&&pt===void 0?st=P:st=nt(st,P,k,R,N,O),ht=!0}),st}function Vt(Z,nt){if(!Z)throw new Error("geojson is required");U(Z,function(pt,st,ht){if(pt.geometry!==null){var P=pt.geometry.type,k=pt.geometry.coordinates;switch(P){case"LineString":if(nt(pt,st,ht,0,0)===!1)return!1;break;case"Polygon":for(var R=0;R<k.length;R++)if(nt(l.lineString(k[R],pt.properties),st,ht,R)===!1)return!1;break}}})}function Wt(Z,nt,pt){var st=pt;return Vt(Z,function(ht,P,k,R){P===0&&pt===void 0?st=ht:st=nt(st,ht,P,k,R)}),st}function Ge(Z,nt){if(nt=nt||{},!l.isObject(nt))throw new Error("options is invalid");var pt=nt.featureIndex||0,st=nt.multiFeatureIndex||0,ht=nt.geometryIndex||0,P=nt.segmentIndex||0,k=nt.properties,R;switch(Z.type){case"FeatureCollection":pt<0&&(pt=Z.features.length+pt),k=k||Z.features[pt].properties,R=Z.features[pt].geometry;break;case"Feature":k=k||Z.properties,R=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":R=Z;break;default:throw new Error("geojson is invalid")}if(R===null)return null;var N=R.coordinates;switch(R.type){case"Point":case"MultiPoint":return null;case"LineString":return P<0&&(P=N.length+P-1),l.lineString([N[P],N[P+1]],k,nt);case"Polygon":return ht<0&&(ht=N.length+ht),P<0&&(P=N[ht].length+P-1),l.lineString([N[ht][P],N[ht][P+1]],k,nt);case"MultiLineString":return st<0&&(st=N.length+st),P<0&&(P=N[st].length+P-1),l.lineString([N[st][P],N[st][P+1]],k,nt);case"MultiPolygon":return st<0&&(st=N.length+st),ht<0&&(ht=N[st].length+ht),P<0&&(P=N[st][ht].length-P-1),l.lineString([N[st][ht][P],N[st][ht][P+1]],k,nt)}throw new Error("geojson is invalid")}function j(Z,nt){if(nt=nt||{},!l.isObject(nt))throw new Error("options is invalid");var pt=nt.featureIndex||0,st=nt.multiFeatureIndex||0,ht=nt.geometryIndex||0,P=nt.coordIndex||0,k=nt.properties,R;switch(Z.type){case"FeatureCollection":pt<0&&(pt=Z.features.length+pt),k=k||Z.features[pt].properties,R=Z.features[pt].geometry;break;case"Feature":k=k||Z.properties,R=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":R=Z;break;default:throw new Error("geojson is invalid")}if(R===null)return null;var N=R.coordinates;switch(R.type){case"Point":return l.point(N,k,nt);case"MultiPoint":return st<0&&(st=N.length+st),l.point(N[st],k,nt);case"LineString":return P<0&&(P=N.length+P),l.point(N[P],k,nt);case"Polygon":return ht<0&&(ht=N.length+ht),P<0&&(P=N[ht].length+P),l.point(N[ht][P],k,nt);case"MultiLineString":return st<0&&(st=N.length+st),P<0&&(P=N[st].length+P),l.point(N[st][P],k,nt);case"MultiPolygon":return st<0&&(st=N.length+st),ht<0&&(ht=N[st].length+ht),P<0&&(P=N[st][ht].length-P),l.point(N[st][ht][P],k,nt)}throw new Error("geojson is invalid")}a.coordAll=M,a.coordEach=h,a.coordReduce=p,a.featureEach=x,a.featureReduce=b,a.findPoint=j,a.findSegment=Ge,a.flattenEach=U,a.flattenReduce=ct,a.geomEach=A,a.geomReduce=q,a.lineEach=Vt,a.lineReduce=Wt,a.propEach=m,a.propReduce=C,a.segmentEach=ft,a.segmentReduce=It}),jo=u(a=>{Object.defineProperty(a,"__esModule",{value:!0});var l=Ma();function h(p){var m=[1/0,1/0,-1/0,-1/0];return l.coordEach(p,function(C){m[0]>C[0]&&(m[0]=C[0]),m[1]>C[1]&&(m[1]=C[1]),m[2]<C[0]&&(m[2]=C[0]),m[3]<C[1]&&(m[3]=C[1])}),m}h.default=h,a.default=h}),fo=u((a,l)=>{var h=qe(),p=pn(),m=Ma(),C=jo().default,x=m.featureEach;m.coordEach,p.polygon;var b=p.featureCollection;function M(A){var q=new h(A);return q.insert=function(U){if(U.type!=="Feature")throw new Error("invalid feature");return U.bbox=U.bbox?U.bbox:C(U),h.prototype.insert.call(this,U)},q.load=function(U){var ct=[];return Array.isArray(U)?U.forEach(function(ft){if(ft.type!=="Feature")throw new Error("invalid features");ft.bbox=ft.bbox?ft.bbox:C(ft),ct.push(ft)}):x(U,function(ft){if(ft.type!=="Feature")throw new Error("invalid features");ft.bbox=ft.bbox?ft.bbox:C(ft),ct.push(ft)}),h.prototype.load.call(this,ct)},q.remove=function(U,ct){if(U.type!=="Feature")throw new Error("invalid feature");return U.bbox=U.bbox?U.bbox:C(U),h.prototype.remove.call(this,U,ct)},q.clear=function(){return h.prototype.clear.call(this)},q.search=function(U){var ct=h.prototype.search.call(this,this.toBBox(U));return b(ct)},q.collides=function(U){return h.prototype.collides.call(this,this.toBBox(U))},q.all=function(){var U=h.prototype.all.call(this);return b(U)},q.toJSON=function(){return h.prototype.toJSON.call(this)},q.fromJSON=function(U){return h.prototype.fromJSON.call(this,U)},q.toBBox=function(U){var ct;if(U.bbox)ct=U.bbox;else if(Array.isArray(U)&&U.length===4)ct=U;else if(Array.isArray(U)&&U.length===6)ct=[U[0],U[1],U[3],U[4]];else if(U.type==="Feature")ct=C(U);else if(U.type==="FeatureCollection")ct=C(U);else throw new Error("invalid geojson");return{minX:ct[0],minY:ct[1],maxX:ct[2],maxY:ct[3]}},q}l.exports=M,l.exports.default=M});Array.prototype.findIndex=Array.prototype.findIndex||function(a){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof a!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],m=0;m<h;m++)if(a.call(p,l[m],m,l))return m;return-1},Array.prototype.find=Array.prototype.find||function(a){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof a!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],m=0;m<h;m++){var C=l[m];if(a.call(p,C,m,l))return C}},typeof Object.assign!="function"&&(Object.assign=function(a){if(a==null)throw new TypeError("Cannot convert undefined or null to object");a=Object(a);for(var l=1;l<arguments.length;l++){var h=arguments[l];if(h!=null)for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(a[p]=h[p])}return a}),function(a){a.forEach(function(l){l.hasOwnProperty("remove")||Object.defineProperty(l,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,l){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),p=h.length>>>0;if(p===0)return!1;var m=l|0,C=Math.max(m>=0?m:p-Math.abs(m),0);function x(b,M){return b===M||typeof b=="number"&&typeof M=="number"&&isNaN(b)&&isNaN(M)}for(;C<p;){if(x(h[C],a))return!0;C++}return!1}});var Ul={version:"2.18.3"},xe=d(yu()),In={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Vl={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Cu={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},li={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Zp={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Eu={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},po={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Bn={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},go={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Pa={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Ia={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},jl={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},qo={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ql={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Hl={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Lu={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Zl={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Kl={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},xu={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},bh={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Xl={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},Kp={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Ce={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Gi={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},on={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},wh={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Yl={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Wl=qo,Bs={en:In,de:Vl,it:Cu,id:li,ro:Zp,ru:Eu,es:po,nl:Bn,fr:go,pt:Wl,pt_br:jl,pt_pt:qo,zh:Pa,zh_tw:Ia,pl:ql,sv:Hl,el:Lu,hu:Zl,da:Kl,no:xu,fa:bh,ua:Xl,tr:Kp,cz:Ce,ja:Gi,fi:on,ko:wh,ky:Yl},mo={_globalEditModeEnabled:!1,enableGlobalEditMode(a){let l={...a};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(l)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(a=>{a.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(a=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(a)},handleLayerAdditionInGlobalEditMode(){let a=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let l in a){let h=a[l];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:a}){this._addedLayersEdit[L.stamp(a)]=a},_isRelevantForEdit(a){return a.pm&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.allowEditing}},Jl=mo,Ta={_globalDragModeEnabled:!1,enableGlobalDragMode(){let a=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},a.forEach(l=>{this._isRelevantForDrag(l)&&l.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let a=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,a.forEach(l=>{l.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let a=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let l in a){let h=a[l];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:a}){this._addedLayersDrag[L.stamp(a)]=a},_isRelevantForDrag(a){return a.pm&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.draggable}},er=Ta,_o={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(a=>{this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(a=>{a.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(a){let l=a.target;this._isRelevantForRemoval(l)&&!l.pm.dragging()&&(l.removeFrom(this.map.pm._getContainingLayer()),l.remove(),l instanceof L.LayerGroup?(this._fireRemoveLayerGroup(l),this._fireRemoveLayerGroup(this.map,l)):(l.pm._fireRemove(l),l.pm._fireRemove(this.map,l)))},_isRelevantForRemoval(a){return a.pm&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let a=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let l in a){let h=a[l];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:a}){this._addedLayersRemoval[L.stamp(a)]=a}},Sh=_o,Mh={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(a=>a instanceof L.Polyline).forEach(a=>{this._isRelevantForRotate(a)&&a.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(a=>a instanceof L.Polyline).forEach(a=>{a.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(a){return a.pm&&a instanceof L.Polyline&&!(a instanceof L.LayerGroup)&&(!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1)&&!a._pmTempLayer&&a.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let a=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let l in a){let h=a[l];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:a}){this._addedLayersRotate[L.stamp(a)]=a}},Xp=Mh,Ph=d(yu()),Ql={_fireDrawStart(a="Draw",l={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},a,l)},_fireDrawEnd(a="Draw",l={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},a,l)},_fireCreate(a,l="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:a,layer:a},l,h)},_fireCenterPlaced(a="Draw",l={}){let h=a==="Draw"?this._layer:void 0,p=a!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:p,latlng:this._layer.getLatLng()},a,l)},_fireCut(a,l,h,p="Draw",m={}){this.__fire(a,"pm:cut",{shape:this._shape,layer:l,originalLayer:h},p,m)},_fireEdit(a=this._layer,l="Edit",h={}){this.__fire(a,"pm:edit",{layer:this._layer,shape:this.getShape()},l,h)},_fireEnable(a="Edit",l={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},a,l)},_fireDisable(a="Edit",l={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},a,l)},_fireUpdate(a="Edit",l={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},a,l)},_fireMarkerDragStart(a,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:a,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDrag(a,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:a,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDragEnd(a,l=void 0,h=void 0,p="Edit",m={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:a,shape:this.getShape(),indexPath:l,intersectionReset:h},p,m)},_fireDragStart(a="Edit",l={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},a,l)},_fireDrag(a,l="Edit",h={}){this.__fire(this._layer,"pm:drag",{...a,shape:this.getShape()},l,h)},_fireDragEnd(a="Edit",l={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},a,l)},_fireDragEnable(a="Edit",l={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},a,l)},_fireDragDisable(a="Edit",l={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},a,l)},_fireRemove(a,l=a,h="Edit",p={}){this.__fire(a,"pm:remove",{layer:l,shape:this.getShape()},h,p)},_fireVertexAdded(a,l,h,p="Edit",m={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:a,indexPath:l,latlng:h,shape:this.getShape()},p,m)},_fireVertexRemoved(a,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:a,indexPath:l,shape:this.getShape()},h,p)},_fireVertexClick(a,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:a,indexPath:l,shape:this.getShape()},h,p)},_fireIntersect(a,l=this._layer,h="Edit",p={}){this.__fire(l,"pm:intersect",{layer:this._layer,intersection:a,shape:this.getShape()},h,p)},_fireLayerReset(a,l,h="Edit",p={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:a,indexPath:l,shape:this.getShape()},h,p)},_fireChange(a,l="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:a,shape:this.getShape()},l,h)},_fireTextChange(a,l="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:a,shape:this.getShape()},l,h)},_fireTextFocus(a="Edit",l={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},a,l)},_fireTextBlur(a="Edit",l={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},a,l)},_fireSnapDrag(a,l,h="Snapping",p={}){this.__fire(a,"pm:snapdrag",l,h,p)},_fireSnap(a,l,h="Snapping",p={}){this.__fire(a,"pm:snap",l,h,p)},_fireUnsnap(a,l,h="Snapping",p={}){this.__fire(a,"pm:unsnap",l,h,p)},_fireRotationEnable(a,l,h="Rotation",p={}){this.__fire(a,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,p)},_fireRotationDisable(a,l="Rotation",h={}){this.__fire(a,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRotationStart(a,l,h="Rotation",p={}){this.__fire(a,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:l},h,p)},_fireRotation(a,l,h,p=this._rotationLayer,m="Rotation",C={}){this.__fire(a,"pm:rotate",{layer:p,helpLayer:this._layer,startAngle:this._startAngle,angle:p.pm.getAngle(),angleDiff:l,oldLatLngs:h,newLatLngs:p.getLatLngs()},m,C)},_fireRotationEnd(a,l,h,p="Rotation",m={}){this.__fire(a,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:l,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},p,m)},_fireActionClick(a,l,h,p="Toolbar",m={}){this.__fire(this._map,"pm:actionclick",{text:a.text,action:a,btnName:l,button:h},p,m)},_fireButtonClick(a,l,h="Toolbar",p={}){this.__fire(this._map,"pm:buttonclick",{btnName:a,button:l},h,p)},_fireLangChange(a,l,h,p,m="Global",C={}){this.__fire(this.map,"pm:langchange",{oldLang:a,activeLang:l,fallback:h,translations:p},m,C)},_fireGlobalDragModeToggled(a,l="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:a,map:this.map},l,h)},_fireGlobalEditModeToggled(a,l="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:a,map:this.map},l,h)},_fireGlobalRemovalModeToggled(a,l="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:a,map:this.map},l,h)},_fireGlobalCutModeToggled(a="Global",l={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},a,l)},_fireGlobalDrawModeToggled(a="Global",l={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},a,l)},_fireGlobalRotateModeToggled(a="Global",l={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},a,l)},_fireRemoveLayerGroup(a,l=a,h="Edit",p={}){this.__fire(a,"pm:remove",{layer:l,shape:void 0},h,p)},_fireKeyeventEvent(a,l,h,p="Global",m={}){this.__fire(this.map,"pm:keyevent",{event:a,eventType:l,focusOn:h},p,m)},__fire(a,l,h,p,m={}){h=(0,Ph.default)(h,m,{source:p}),L.PM.Utils._fireEvent(a,l,h)}},bu=Ql,Ih=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(a){this.map=a,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),a.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(a){let l="document";this.map.getContainer().contains(a.target)&&(l="map");let h={event:a,eventType:a.type,focusOn:l};this._lastEvents[a.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(a,a.type,l)},_onBlur(a){a.altKey=!1;let l={event:a,eventType:a.type,focusOn:"document"};this._lastEvents[a.type]=l,this._lastEvents.current=l},getLastKeyEvent(a="current"){return this._lastEvents[a]},isShiftKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.shiftKey},isAltKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.altKey},isCtrlKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.ctrlKey},isMetaKeyPressed(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.metaKey},getPressedKey(){var a;return(a=this._lastEvents.current)==null?void 0:a.event.key}}),Fe=Ih,Th=d(Os());function ve(a){let l=L.PM.activeLang;return(0,Th.default)(Bs[l],a)||(0,Th.default)(Bs.en,a)||a}function yo(a){for(let l=0;l<a.length;l+=1){let h=a[l];if(Array.isArray(h)){if(yo(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Aa(a){return a.reduce((l,h)=>{if(h.length!==0){let p=Array.isArray(h)?Aa(h):h;Array.isArray(p)?p.length!==0&&l.push(p):l.push(p)}return l},[])}function Yp(a,l,h){let p={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:m,b:C,f:x}=p,b=a.lng,M=a.lat,A=h,q=Math.PI,U=l*q/180,ct=Math.sin(U),ft=Math.cos(U),It=(1-x)*Math.tan(M*q/180),Vt=1/Math.sqrt(1+It*It),Wt=It*Vt,Ge=Math.atan2(It,ft),j=Vt*ct,Z=1-j*j,nt=Z*(m*m-C*C)/(C*C),pt=1+nt/16384*(4096+nt*(-768+nt*(320-175*nt))),st=nt/1024*(256+nt*(-128+nt*(74-47*nt))),ht=A/(C*pt),P=2*Math.PI,k,R,N;for(;Math.abs(ht-P)>1e-12;){k=Math.cos(2*Ge+ht),R=Math.sin(ht),N=Math.cos(ht);let wt=st*R*(k+st/4*(N*(-1+2*k*k)-st/6*k*(-3+4*R*R)*(-3+4*k*k)));P=ht,ht=A/(C*pt)+wt}let O=Wt*R-Vt*N*ft,B=Math.atan2(Wt*N+Vt*R*ft,(1-x)*Math.sqrt(j*j+O*O)),X=Math.atan2(R*ct,Vt*N-Wt*R*ft),K=x/16*Z*(4+x*(4-3*Z)),tt=X-(1-K)*x*j*(ht+K*R*(k+K*N*(-1+2*k*k))),ut=b+tt*180/q,at=B*180/q;return L.latLng(ut,at)}function wu(a,l,h,p,m=!0){let C,x,b,M=[];for(let A=0;A<h;A+=1){if(m)C=A*360/h+p,x=Yp(a,C,l),b=L.latLng(x.lng,x.lat);else{let q=a.lat+Math.cos(2*A*Math.PI/h)*l,U=a.lng+Math.sin(2*A*Math.PI/h)*l;b=L.latLng(q,U)}M.push(b)}return M}function Wp(a,l,h){l=(l+360)%360;let p=Math.PI/180,m=180/Math.PI,{R:C}=L.CRS.Earth,x=a.lng*p,b=a.lat*p,M=l*p,A=Math.sin(b),q=Math.cos(b),U=Math.cos(h/C),ct=Math.sin(h/C),ft=Math.asin(A*U+q*ct*Math.cos(M)),It=x+Math.atan2(Math.sin(M)*ct*q,U-A*Math.sin(ft));It*=m;let Vt=It-360,Wt=It<-180?It+360:It;return It=It>180?Vt:Wt,L.latLng([ft*m,It])}function Su(a,l,h){let p=a.latLngToContainerPoint(l),m=a.latLngToContainerPoint(h),C=Math.atan2(m.y-p.y,m.x-p.x)*180/Math.PI+90;return C+=C<0?360:0,C}function Mu(a,l,h,p){let m=Su(a,l,h);return Wp(l,m,p)}function Jp(a,l,h="asc"){if(!l||Object.keys(l).length===0)return(M,A)=>M-A;let p=Object.keys(l),m,C=p.length-1,x={};for(;C>=0;)m=p[C],x[m.toLowerCase()]=l[m],C-=1;function b(M){if(M instanceof L.Marker)return"Marker";if(M instanceof L.Circle)return"Circle";if(M instanceof L.CircleMarker)return"CircleMarker";if(M instanceof L.Rectangle)return"Rectangle";if(M instanceof L.Polygon)return"Polygon";if(M instanceof L.Polyline)return"Line"}return(M,A)=>{let q,U;if(q=b(M.layer).toLowerCase(),U=b(A.layer).toLowerCase(),!q||!U)return 0;let ct=q in x?x[q]:Number.MAX_SAFE_INTEGER,ft=U in x?x[U]:Number.MAX_SAFE_INTEGER,It=0;return ct<ft?It=-1:ct>ft&&(It=1),h==="desc"?It*-1:It}}function Ui(a,l=a.getLatLngs()){return a instanceof L.Polygon?L.polygon(l).getLatLngs():L.polyline(l).getLatLngs()}function Ah(a,l){var h,p,m,C;if((p=(h=l.options.crs)==null?void 0:h.projection)!=null&&p.MAX_LATITUDE){let x=(C=(m=l.options.crs)==null?void 0:m.projection)==null?void 0:C.MAX_LATITUDE;a.lat=Math.max(Math.min(x,a.lat),-x)}return a}function Cr(a){return a.options.renderer||a._map&&(a._map._getPaneRenderer(a.options.pane)||a._map.options.renderer||a._map._renderer)||a._renderer}var Qp=L.Class.extend({includes:[Jl,er,Sh,Xp,bu],initialize(a){this.map=a,this.Draw=new L.PM.Draw(a),this.Toolbar=new L.PM.Toolbar(a),this.Keyboard=Fe(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(a)},setLang(a="en",l,h="en"){if(a=a.trim().toLowerCase(),!/^[a-z]{2}$/.test(a)){let m=a.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(m){let C=[`${m[1]}_${m[2]}`,`${m[1]}`];for(let x of C)if(Bs[x]){a=x;break}}}let p=L.PM.activeLang;l&&(Bs[a]=(0,xe.default)(Bs[h],l)),L.PM.activeLang=a,this.map.pm.Toolbar.reinit(),this._fireLangChange(p,a,h,Bs[a])},addControls(a){this.Toolbar.addControls(a)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(a="Polygon",l){a==="Poly"&&(a="Polygon"),this.Draw.enable(a,l)},disableDraw(a="Polygon"){a==="Poly"&&(a="Polygon"),this.Draw.disable(a)},setPathOptions(a,l={}){let h=l.ignoreShapes||[],p=l.merge||!1;this.map.pm.Draw.shapes.forEach(m=>{h.indexOf(m)===-1&&this.map.pm.Draw[m].setPathOptions(a,p)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(a){let l=(0,xe.default)(this.globalOptions,a);l.editable&&(l.resizeableCircleMarker=l.editable,delete l.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!l.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let p=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!l.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),p=!0),this.map.pm.Draw.shapes.forEach(m=>{this.map.pm.Draw[m].setOptions(l)}),h&&this.map.pm.Draw.CircleMarker.enable(),p&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(m=>{m.pm.setOptions(l)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=l,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(a=>{a.pm.enabled()&&a.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(a){return this.Draw.Cut.enable(a)},toggleGlobalCutMode(a){return this.Draw.Cut.toggle(a)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(a=!1){let l=L.PM.Utils.findLayers(this.map);if(!a)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},getGeomanDrawLayers(a=!1){let l=L.PM.Utils.findLayers(this.map).filter(p=>p._drawnByGeoman===!0);if(!a)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(a){this._touchEventCounter===0&&(L.DomEvent.on(a,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(a,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(a){this._touchEventCounter===1&&(L.DomEvent.off(a,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(a,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(a){Cr(this.map)._onMouseMove(this._createMouseEvent("mousemove",a))},_canvasTouchClick(a){let l="";a.type==="touchstart"||a.type==="pointerdown"?l="mousedown":(a.type==="touchend"||a.type==="pointerup"||a.type==="touchcancel"||a.type==="pointercancel")&&(l="mouseup"),l&&Cr(this.map)._onClick(this._createMouseEvent(l,a))},_createMouseEvent(a,l){let h,p=l.touches[0]||l.changedTouches[0];try{h=new MouseEvent(a,{bubbles:l.bubbles,cancelable:l.cancelable,view:l.view,detail:p.detail,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY,ctrlKey:l.ctrlKey,altKey:l.altKey,shiftKey:l.shiftKey,metaKey:l.metaKey,button:l.button,relatedTarget:l.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(a,l.bubbles,l.cancelable,l.view,p.detail,p.screenX,p.screenY,p.clientX,p.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget)}return h}}),Dh=Qp,Fs=L.Control.extend({includes:[bu],options:{position:"topleft",disableByOtherButtons:!0},initialize(a){this._button=L.Util.extend({},this.options,a)},onAdd(a){return this._map=a,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let a=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),a?a.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(a){return typeof a=="boolean"?this._button.toggleStatus=a:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(a){a&&a.preventDefault(),!this._button.disabled&&(this._button.onClick(a,{button:this,event:a}),this._clicked(a),this._button.afterClick(a,{button:this,event:a}))},_makeButton(a){let l=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${l}`,this._container);a.title&&h.setAttribute("title",a.title);let p=L.DomUtil.create("a","leaflet-buttons-control-button",h);p.setAttribute("role","button"),p.setAttribute("tabindex","0"),p.href="#";let m=L.DomUtil.create("div",`leaflet-pm-actions-container ${l}`,h),C=a.actions,x={cancel:{text:ve("actions.cancel"),title:ve("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:ve("actions.finish"),title:ve("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:ve("actions.removeLastVertex"),title:ve("actions.removeLastVertex"),onClick(){this._map.pm.Draw[a.jsClass]._removeLastVertex()}},finish:{text:ve("actions.finish"),title:ve("actions.finish"),onClick(M){this._map.pm.Draw[a.jsClass]._finishShape(M)}}};a._preparedActions=C.map(M=>{let A=typeof M=="string"?M:M.name,q;if(x[A])q=x[A];else if(M.text)q=M;else return q;let U=L.DomUtil.create("a",`leaflet-pm-action ${l} action-${A}`,m);if(U.setAttribute("role","button"),U.setAttribute("tabindex","0"),U.href="#",q.title&&(U.title=q.title),U.innerHTML=q.text,L.DomEvent.disableClickPropagation(U),L.DomEvent.on(U,"click",L.DomEvent.stop),q._node=U,!a.disabled&&q.onClick){let ct=ft=>{ft.preventDefault();let It="",{buttons:Vt}=this._map.pm.Toolbar;for(let Wt in Vt)if(Vt[Wt]._button===a){It=Wt;break}this._fireActionClick(q,It,a)};L.DomEvent.addListener(U,"click",ct,this),L.DomEvent.addListener(U,"click",q.onClick,this),L.DomEvent.addListener(U,"click",()=>this._updateActiveAction(a))}return q}),this._updateActiveAction(a),a.toggleStatus&&L.DomUtil.addClass(h,"active");let b=L.DomUtil.create("div","control-icon",p);return a.iconUrl&&b.setAttribute("src",a.iconUrl),a.className&&L.DomUtil.addClass(b,a.className),L.DomEvent.disableClickPropagation(p),L.DomEvent.on(p,"click",L.DomEvent.stop),a.disabled||(L.DomEvent.addListener(p,"click",this._onBtnClick,this),L.DomEvent.addListener(p,"click",this._triggerClick,this)),a.disabled&&(L.DomUtil.addClass(p,"pm-disabled"),p.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let a="",{buttons:l}=this._map.pm.Toolbar;for(let h in l)if(l[h]._button===this._button){a=h;break}this._fireButtonClick(a,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let a="pm-disabled",l=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(l,a),l.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(l,a),l.setAttribute("aria-disabled","false"))},_updateActiveAction(a){var l;(l=a._preparedActions)==null||l.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),kh=Fs;L.Control.PMButton=kh;var Nh=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(a){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(a)},reinit(){let a=this.isVisible;this.removeControls(),this._defineButtons(),a&&this.addControls()},init(a){this.map=a,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(a){let l=`${a}Container`;return this[l]||(this[l]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${a} leaflet-bar leaflet-control`)),this[l]},getButtons(){return this.buttons},addControls(a=this.options){typeof a.editPolygon<"u"&&(a.editMode=a.editPolygon),typeof a.deleteLayer<"u"&&(a.removalMode=a.deleteLayer),L.Util.setOptions(this,a),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let a=this.getButtons(),l={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in a){let p=a[h];L.Util.setOptions(p,{className:l.geomanIcons[h]})}},removeControls(){let a=this.getButtons();for(let l in a)a[l].remove();this.isVisible=!1},toggleControls(a=this.options){this.isVisible?this.removeControls():this.addControls(a)},_addButton(a,l){return this.buttons[a]=l,this.options[a]=!!this.options[a]||!1,this.buttons[a]},triggerClickOnToggledButtons(a){for(let l in this.buttons){let h=this.buttons[l];h._button.disableByOtherButtons&&h!==a&&h.toggled()&&h._triggerClick()}},toggleButton(a,l,h=!0){a==="editPolygon"&&(a="editMode"),a==="deleteLayer"&&(a="removalMode");let p=a;return h&&this.triggerClickOnToggledButtons(this.buttons[p]),this.buttons[p]?this.buttons[p].toggle(l):!1},_defineButtons(){let a={className:"control-icon leaflet-pm-icon-marker",title:ve("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},l={title:ve("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:ve("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},p={title:ve("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},m={title:ve("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},C={title:ve("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},x={title:ve("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:ve("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},M={title:ve("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},A={title:ve("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},q={title:ve("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},U={className:"control-icon leaflet-pm-icon-text",title:ve("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(ct,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(a)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(C)),this._addButton("drawPolygon",new L.Control.PMButton(l)),this._addButton("drawCircle",new L.Control.PMButton(p)),this._addButton("drawCircleMarker",new L.Control.PMButton(m)),this._addButton("drawText",new L.Control.PMButton(U)),this._addButton("editMode",new L.Control.PMButton(x)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(M)),this._addButton("removalMode",new L.Control.PMButton(A)),this._addButton("rotateMode",new L.Control.PMButton(q))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let a=this.getButtons(),l=[];this.options.drawControls===!1&&(l=l.concat(Object.keys(a).filter(h=>!a[h]._button.tool))),this.options.editControls===!1&&(l=l.concat(Object.keys(a).filter(h=>a[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(l=l.concat(Object.keys(a).filter(h=>a[h]._button.tool==="options"))),this.options.customControls===!1&&(l=l.concat(Object.keys(a).filter(h=>a[h]._button.tool==="custom")));for(let h in a)if(this.options[h]&&l.indexOf(h)===-1){let p=a[h]._button.tool;p||(p="draw"),a[h].setPosition(this._getBtnPosition(p)),a[h].addTo(this.map)}},_getBtnPosition(a){return this.options.positions&&this.options.positions[a]?this.options.positions[a]:this.options.position},setBlockPosition(a,l){this.options.positions[a]=l,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(a,l){if(l)typeof l!="object"&&(l={name:l});else throw new TypeError("Button has no name");let h=this._btnNameMapping(a);if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");let p=this.map.pm.Draw.createNewDrawInstance(l.name,h);l={...this.buttons[h]._button,...l};let m=this.createCustomControl(l);return{drawInstance:p,control:m}},createCustomControl(a){if(!a.name)throw new TypeError("Button has no name");if(this.buttons[a.name])throw new TypeError("Button with this name already exists");a.onClick||(a.onClick=()=>{}),a.afterClick||(a.afterClick=()=>{}),a.toggle!==!1&&(a.toggle=!0),a.block&&(a.block=a.block.toLowerCase()),(!a.block||a.block==="draw")&&(a.block=""),a.className?a.className.indexOf("control-icon")===-1&&(a.className=`control-icon ${a.className}`):a.className="control-icon";let l={tool:a.block,className:a.className,title:a.title||"",jsClass:a.name,onClick:a.onClick,afterClick:a.afterClick,doToggle:a.toggle,toggleStatus:!1,disableOtherButtons:a.disableOtherButtons??!0,disableByOtherButtons:a.disableByOtherButtons??!0,cssToggle:a.toggle,position:this.options.position,actions:a.actions||[],disabled:!!a.disabled};this.options[a.name]!==!1&&(this.options[a.name]=!0);let h=this._addButton(a.name,new L.Control.PMButton(l));return this.changeControlOrder(),h},controlExists(a){return!!this.getButton(a)},getButton(a){return this.getButtons()[a]},getButtonsInBlock(a){let l={};if(a)for(let h in this.getButtons()){let p=this.getButtons()[h];(p._button.tool===a||a==="draw"&&!p._button.tool)&&(l[h]=p)}return l},changeControlOrder(a=[]){let l=this._shapeMapping(),h=[];a.forEach(C=>{l[C]?h.push(l[C]):h.push(C)});let p=this.getButtons(),m={};h.forEach(C=>{p[C]&&(m[C]=p[C])}),Object.keys(p).filter(C=>!p[C]._button.tool||p[C]._button.tool==="draw").forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),Object.keys(p).filter(C=>p[C]._button.tool==="edit").forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),Object.keys(p).filter(C=>p[C]._button.tool==="options").forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),Object.keys(p).filter(C=>p[C]._button.tool==="custom").forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),Object.keys(p).forEach(C=>{h.indexOf(C)===-1&&(m[C]=p[C])}),this.map.pm.Toolbar.buttons=m,this._showHideButtons()},getControlOrder(){let a=this.getButtons(),l=[];for(let h in a)l.push(h);return l},changeActionsOfControl(a,l){let h=this._btnNameMapping(a);if(!h)throw new TypeError("No name passed");if(!l)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=l,this.changeControlOrder()},setButtonDisabled(a,l){let h=this._btnNameMapping(a);l?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(a){let l=this._shapeMapping();return l[a]?l[a]:a}}),$l=Nh,$p=d(yu()),Rh={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(a){a.forEach(l=>{if(Array.isArray(l)){this._assignEvents(l);return}l.off("drag",this._handleSnapping,this),l.on("drag",this._handleSnapping,this),l.off("dragend",this._cleanupSnapping,this),l.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(a){if(a){let l=a.target;l._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(l=>{l.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(a){var b,M,A;let l=a.target;if(l._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((b=a==null?void 0:a.originalEvent)==null?void 0:b.altKey)||((A=(M=this._map)==null?void 0:M.pm)==null?void 0:A.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(l.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let p=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,m;p?m=h.latlng:m=this._checkPrioritiySnapping(h);let C=this.options.snapDistance,x={marker:l,shape:this._shape,snapLatLng:m,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(x.marker,x),this._fireSnapDrag(this._layer,x),h.distance<C){l._orgLatLng=l.getLatLng(),l.setLatLng(m),l._snapped=!0,l._snapInfo=x;let q=()=>{this._snapLatLng=m,this._fireSnap(l,x),this._fireSnap(this._layer,x)},U=this._snapLatLng||{},ct=m||{};(U.lat!==ct.lat||U.lng!==ct.lng)&&q()}else this._snapLatLng&&(this._unsnap(x),l._snapped=!1,l._snapInfo=void 0,this._fireUnsnap(x.marker,x),this._fireUnsnap(this._layer,x));return!0},_createSnapList(){let a=[],l=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(p=>{if((p instanceof L.Polyline||p instanceof L.Marker||p instanceof L.CircleMarker||p instanceof L.ImageOverlay)&&p.options.snapIgnore!==!0){if(p.options.snapIgnore===void 0&&(!L.PM.optIn&&p.options.pmIgnore===!0||L.PM.optIn&&p.options.pmIgnore!==!1))return;(p instanceof L.Circle||p instanceof L.CircleMarker)&&p.pm&&p.pm._hiddenPolyCircle?a.push(p.pm._hiddenPolyCircle):p instanceof L.ImageOverlay&&(p=L.rectangle(p.getBounds())),a.push(p);let m=L.polyline([],{color:"red",pmIgnore:!0});m._pmTempLayer=!0,l.push(m),(p instanceof L.Circle||p instanceof L.CircleMarker)&&l.push(m)}}),a=a.filter(p=>this._layer!==p),a=a.filter(p=>p._latlng||p._latlngs&&yo(p._latlngs)),a=a.filter(p=>!p._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let p=L.polyline([],{color:"red",pmIgnore:!0});p._pmTempLayer=!0,l.push(p)}),this._snapList=a.concat(this._otherSnapLayers)):this._snapList=a,this.debugIndicatorLines=l},_handleSnapLayerRemoval({layer:a}){if(!a._leaflet_id)return;let l=this._snapList.findIndex(h=>h._leaflet_id===a._leaflet_id);l>-1&&this._snapList.splice(l,1)},_calcClosestLayer(a,l){return this._calcClosestLayers(a,l,1)[0]},_calcClosestLayers(a,l,h=1){let p=[],m={};l.forEach((x,b)=>{var A;if(x._parentCopy&&x._parentCopy===this._layer||((A=x.getLatLngs)==null?void 0:A.call(x).flat(5).length)<2)return;let M=this._calcLayerDistances(a,x);if(M.distance=Math.floor(M.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[b]){let q=L.polyline([],{color:"red",pmIgnore:!0});q._pmTempLayer=!0,this.debugIndicatorLines[b]=q}this.debugIndicatorLines[b].setLatLngs([a,M.latlng])}h===1&&(m.distance===void 0||M.distance-5<=m.distance)?(M.distance+5<m.distance&&(p=[]),m=M,m.layer=x,p.push(m)):h!==1&&(m={},m=M,m.layer=x,p.push(m))}),h!==1&&(p=p.sort((x,b)=>x.distance-b.distance)),h===-1&&(h=p.length);let C=this._getClosestLayerByPriority(p,h);return L.Util.isArray(C)?C:[C]},_calcLayerDistances(a,l){let h=this._map,p=l instanceof L.Marker||l instanceof L.CircleMarker,m=l instanceof L.Polygon,C=a;if(p){let x=l.getLatLng();return{latlng:{...x},distance:this._getDistance(h,x,C)}}return this._calcLatLngDistances(C,l.getLatLngs(),h,m)},_calcLatLngDistances(a,l,h,p=!1){let m,C,x,b=M=>{M.forEach((A,q)=>{if(Array.isArray(A)){b(A);return}if(this.options.snapSegment){let U=A,ct;p?ct=q+1===M.length?0:q+1:ct=q+1===M.length?void 0:q+1;let ft=M[ct];if(ft){let It=this._getDistanceToSegment(h,a,U,ft);(C===void 0||It<C)&&(C=It,x=[U,ft])}}else{let U=this._getDistance(h,a,A);(C===void 0||U<C)&&(C=U,m=A)}})};return b(l),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,a,x[0],x[1])},segment:x,distance:C}:{latlng:m,distance:C}},_getClosestLayerByPriority(a,l=1){a=a.sort((x,b)=>x._leaflet_id-b._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],p=this._map.pm.globalOptions.snappingOrder||[],m=0,C={};return p.concat(h).forEach(x=>{C[x]||(m+=1,C[x]=m)}),a.sort(Jp("instanceofShape",C)),l===1?a[0]||{}:a.slice(0,l)},_checkPrioritiySnapping(a){let l=this._map,h=a.segment[0],p=a.segment[1],m=a.latlng,C=m;if(this.options.snapVertex){let x=this._getDistance(l,h,m),b=this._getDistance(l,p,m),M=x<b?h:p,A=x<b?x:b;if(this.options.snapMiddle){let U=L.PM.Utils.calcMiddleLatLng(l,h,p),ct=this._getDistance(l,U,m);ct<x&&ct<b&&(M=U,A=ct)}let q=this.options.snapDistance;A<q&&(C=M)}return{...C}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(a,l,h,p){let m=a.getMaxZoom();m===1/0&&(m=a.getZoom());let C=a.project(l,m),x=a.project(h,m),b=a.project(p,m),M=L.LineUtil.closestPointOnSegment(C,x,b);return a.unproject(M,m)},_getDistanceToSegment(a,l,h,p){let m=a.latLngToContainerPoint(l),C=a.latLngToContainerPoint(h),x=a.latLngToContainerPoint(p);return L.LineUtil.pointToSegmentDistance(m,C,x)},_getDistance(a,l,h){return a.latLngToContainerPoint(l).distanceTo(a.latLngToContainerPoint(h))}},tc=Rh,td=L.Class.extend({includes:[tc,bu],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(a){L.Util.setOptions(this,a),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(a){let l=new L.Icon.Default;l.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=l,this._map=a,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(a,l=!1){l?this.options.pathOptions=(0,$p.default)(this.options.pathOptions,a):this.options.pathOptions=a},getShapes(){return this.shapes},getShape(){return this._shape},enable(a,l){if(!a)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[a].enable(l)},disable(){this.shapes.forEach(a=>{this[a].disable()})},addControls(){this.shapes.forEach(a=>{this[a].addButton()})},getActiveShape(){let a;return this.shapes.forEach(l=>{this[l]._enabled&&(a=l)}),a},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let a=[];this._map.eachLayer(l=>{(l instanceof L.Polyline||l instanceof L.Marker||l instanceof L.Circle||l instanceof L.CircleMarker||l instanceof L.ImageOverlay)&&(l._pmTempLayer||a.push(l))}),this._enabled?a.forEach(l=>{L.PM.Utils.disablePopup(l)}):a.forEach(l=>{L.PM.Utils.enablePopup(l)})},createNewDrawInstance(a,l){let h=this._getShapeFromBtnName(l);if(this[a])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[a]=new L.PM.Draw[h](this._map),this[a].toolbarButtonName=a,this[a]._shape=a,this.shapes.push(a),this[l]&&this[a].setOptions(this[l].options),this[a].setOptions(this[a].options),this[a]},_getShapeFromBtnName(a){let l={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return l[a]?l[a]:this[a]?this[a]._shape:a},_finishLayer(a){a.pm&&(a.pm.setOptions(this.options),a.pm._shape=this._shape,a.pm._map=this._map),this._addDrawnLayerProp(a)},_addDrawnLayerProp(a){a._drawnByGeoman=!0},_setPane(a,l){l==="layerPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),nr=td;nr.Marker=nr.extend({initialize(a){this._map=a,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(a){L.Util.setOptions(this,a),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(ve("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},isRelevantMarker(a){return a instanceof L.Marker&&a.pm&&!a._pmTempLayer&&!a.pm._initTextMarker},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let l=a;l.target=this._hintMarker,this._handleSnapping(l)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(a){if(!a.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=new L.Marker(l,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var a,l;(a=this.options.markerStyle)!=null&&a.icon&&((l=this._hintMarker)==null||l.setIcon(this.options.markerStyle.icon))}});var ur=63710088e-1,Oh={centimeters:ur*100,centimetres:ur*100,degrees:ur/111325,feet:ur*3.28084,inches:ur*39.37,kilometers:ur/1e3,kilometres:ur/1e3,meters:ur,metres:ur,miles:ur/1609.344,millimeters:ur*1e3,millimetres:ur*1e3,nauticalmiles:ur/1852,radians:1,yards:ur*1.0936};function vo(a,l,h){h===void 0&&(h={});var p={type:"Feature"};return(h.id===0||h.id)&&(p.id=h.id),h.bbox&&(p.bbox=h.bbox),p.properties=l||{},p.geometry=a,p}function Co(a,l,h){if(h===void 0&&(h={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ec(a[0])||!ec(a[1]))throw new Error("coordinates must contain numbers");var p={type:"Point",coordinates:a};return vo(p,l,h)}function zs(a,l,h){if(h===void 0&&(h={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");var p={type:"LineString",coordinates:a};return vo(p,l,h)}function Tr(a,l){l===void 0&&(l={});var h={type:"FeatureCollection"};return l.id&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.features=a,h}function ed(a,l){l===void 0&&(l="kilometers");var h=Oh[l];if(!h)throw new Error(l+" units is invalid");return a*h}function Da(a,l){l===void 0&&(l="kilometers");var h=Oh[l];if(!h)throw new Error(l+" units is invalid");return a/h}function Ar(a){var l=a%(2*Math.PI);return l*180/Math.PI}function ci(a){var l=a%360;return l*Math.PI/180}function ec(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}function Pu(a){var l,h,p={type:"FeatureCollection",features:[]};if(a.type==="Feature"?h=a.geometry:h=a,h.type==="LineString")l=[h.coordinates];else if(h.type==="MultiLineString")l=h.coordinates;else if(h.type==="MultiPolygon")l=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")l=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return l.forEach(function(m){l.forEach(function(C){for(var x=0;x<m.length-1;x++)for(var b=x;b<C.length-1;b++)if(!(m===C&&(Math.abs(x-b)===1||x===0&&b===m.length-2&&m[x][0]===m[m.length-1][0]&&m[x][1]===m[m.length-1][1]))){var M=nc(m[x][0],m[x][1],m[x+1][0],m[x+1][1],C[b][0],C[b][1],C[b+1][0],C[b+1][1]);M&&p.features.push(Co([M[0],M[1]]))}})}),p}function nc(a,l,h,p,m,C,x,b){var M,A,q,U,ct,ft={x:null,y:null,onLine1:!1,onLine2:!1};return M=(b-C)*(h-a)-(x-m)*(p-l),M===0?ft.x!==null&&ft.y!==null?ft:!1:(A=l-C,q=a-m,U=(x-m)*A-(b-C)*q,ct=(h-a)*A-(p-l)*q,A=U/M,q=ct/M,ft.x=a+A*(h-a),ft.y=l+A*(p-l),A>=0&&A<=1&&(ft.onLine1=!0),q>=0&&q<=1&&(ft.onLine2=!0),ft.onLine1&&ft.onLine2?[ft.x,ft.y]:!1)}nr.Line=nr.extend({initialize(a){this._map=a,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(a){L.Util.setOptions(this,a),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ve("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_syncHintLine(){let a=this._layer.getLatLngs();if(a.length>0){let l=a[a.length-1];this._hintline.setLatLngs([l,this._hintMarker.getLatLng()])}},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let h=a;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let l=this._layer._defaultShape().slice();l.push(this._hintMarker.getLatLng()),this._change(l)},hasSelfIntersection(){return Pu(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(a,l){let h=L.polyline(this._layer.getLatLngs());a&&(l||(l=this._hintMarker.getLatLng()),h.addLatLng(l));let p=Pu(h.toGeoJSON(15));this._doesSelfIntersect=p.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(p,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(a){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,a.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),p=h[h.length-1];if(l.equals(h[0])||h.length>0&&l.equals(p)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:l,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(l);let m=this._createMarker(l);this._setTooltipText(),this._setHintLineAfterNewVertex(l),this._fireVertexAdded(m,void 0,l,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(a)},_setHintLineAfterNewVertex(a){this._hintline.setLatLngs([a,a])},_removeLastVertex(){let a=this._markers;if(a.length<=1){this.disable();return}let l=this._layer.getLatLngs(),h=a[a.length-1],{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(a,h);a.pop(),this._layerGroup.removeLayer(h);let m=a[a.length-1],C=l.indexOf(m.getLatLng());l=l.slice(0,C+1),this._layer.setLatLngs(l),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,p,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let a=this._layer.getLatLngs();if(a.length<=1)return;let l=L.polyline(a,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(a){let l=new L.Marker(a,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),l.on("click",this._finishShape,this),l},_setTooltipText(){let{length:a}=this._layer.getLatLngs().flat(),l="";a<=1?l=ve("tooltips.continueLine"):l=ve("tooltips.finishLine"),this._hintMarker.setTooltipContent(l)},_change(a){this._fireChange(a,"Draw")},setStyle(){var a,l;(a=this._layer)==null||a.setStyle(this.options.templineStyle),(l=this._hintline)==null||l.setStyle(this.options.hintlineStyle)}}),nr.Polygon=nr.Line.extend({initialize(a){this._map=a,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(a){L.PM.Draw.Line.prototype.enable.call(this,a),this._layer.pm._shape="Polygon"},_createMarker(a){let l=new L.Marker(a,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),this._layer.getLatLngs().flat().length===1?(l.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(l)-1,this.options.snappable&&this._cleanupSnapping()):l.on("click",()=>1),l},_setTooltipText(){let{length:a}=this._layer.getLatLngs().flat(),l="";a<=2?l=ve("tooltips.continueLine"):l=ve("tooltips.finishPoly"),this._hintMarker.setTooltipContent(l)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let a=this._layer.getLatLngs();if(a.length<=2)return;let l=L.polygon(a,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),nr.Rectangle=nr.extend({initialize(a){this._map=a,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(a){if(L.Util.setOptions(this,a),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ve("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let l=0;l<2;l+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_placeStartingMarkers(a){this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(l),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(l)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(ve("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let a=this._startMarker.getLatLng();a&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([a,a]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let h=a;h.target=this._hintMarker,this._handleSnapping(h)}let l=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(l,"Draw")},_syncRectangleSize(){let a=Ah(this._startMarker.getLatLng(),this._map),l=Ah(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(a,l,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let p=[];h.forEach(m=>{!m.equals(a,1e-8)&&!m.equals(l,1e-8)&&p.push(m)}),p.forEach((m,C)=>{try{this._styleMarkers[C].setLatLng(m)}catch{}})}},_findCorners(){let a=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(a[0],a[2],this.options.rectangleAngle||0,this._map)},_finishShape(a){this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(l))return;let p=L.rectangle([h,l],this.options.pathOptions);if(this.options.rectangleAngle){let C=L.PM.Utils._getRotatedRectangle(h,l,this.options.rectangleAngle||0,this._map);p.setLatLngs(C),p.pm&&p.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),this._fireCreate(p);let m=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(m))},setStyle(){var a;(a=this._layer)==null||a.setStyle(this.options.pathOptions)}}),nr.CircleMarker=nr.extend({initialize(a){this._map=a,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(a){if(L.Util.setOptions(this,a),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let l={};L.extend(l,this.options.templineStyle),l.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),l),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ve("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(ve("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.disable()})},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_placeCenterMarker(a){this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let l=this._hintMarker.getLatLng();this._centerMarker.setLatLng(l),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let a=this._centerMarker.getLatLng();a&&(this._layer.setLatLng(a),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(ve("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let a=this._centerMarker.getLatLng(),l=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([a,l])},_syncCircleRadius(){let a=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(a,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=a;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let l=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(l,"Draw")},isRelevantMarker(a){return a instanceof L.CircleMarker&&!(a instanceof L.Circle)&&a.pm&&!a._pmTempLayer},_createMarker(a){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!a.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(l,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(a){a.pm&&this.options.markerEditable&&a.pm.enable()},_finishShape(a){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let x=this._hintMarker.getLatLng();h=this._distanceCalculation(l,x),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let p={...this.options.pathOptions,radius:h},m=new this._BaseCircleClass(l,p);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),m.pm&&m.pm._updateHiddenPolyCircle(),this._fireCreate(m);let C=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(C))},_getNewDestinationOfHintMarker(){let a=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return a;let l=this._centerMarker.getLatLng(),h=this._distanceCalculation(l,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?a=Mu(this._map,l,a,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(a=Mu(this._map,l,a,this._getMaxDistanceInMeter()))}return a},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let a=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(a,l);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var l,h;let a={};L.extend(a,this.options.templineStyle),this.options[this._editableOption]&&(a.radius=0),(l=this._layer)==null||l.setStyle(a),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(a,l){return this._map.project(a).distanceTo(this._map.project(l))}}),nr.Circle=nr.CircleMarker.extend({initialize(a){this._map=a,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(a,l){return this._map.distance(a,l)}});function hi(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return a.geometry.coordinates;if(a.type==="Point")return a.coordinates}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return a;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Vi(a){if(Array.isArray(a))return a;if(a.type==="Feature"){if(a.geometry!==null)return a.geometry.coordinates}else if(a.coordinates)return a.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Iu(a){return a.type==="Feature"?a.geometry:a}function rc(a,l){return a.type==="FeatureCollection"?"FeatureCollection":a.type==="GeometryCollection"?"GeometryCollection":a.type==="Feature"&&a.geometry!==null?a.geometry.type:a.type}function ic(a,l,h){if(a!==null)for(var p,m,C,x,b,M,A,q=0,U=0,ct,ft=a.type,It=ft==="FeatureCollection",Vt=ft==="Feature",Wt=It?a.features.length:1,Ge=0;Ge<Wt;Ge++){A=It?a.features[Ge].geometry:Vt?a.geometry:a,ct=A?A.type==="GeometryCollection":!1,b=ct?A.geometries.length:1;for(var j=0;j<b;j++){var Z=0,nt=0;if(x=ct?A.geometries[j]:A,x!==null){M=x.coordinates;var pt=x.type;switch(q=0,pt){case null:break;case"Point":if(l(M,U,Ge,Z,nt)===!1)return!1;U++,Z++;break;case"LineString":case"MultiPoint":for(p=0;p<M.length;p++){if(l(M[p],U,Ge,Z,nt)===!1)return!1;U++,pt==="MultiPoint"&&Z++}pt==="LineString"&&Z++;break;case"Polygon":case"MultiLineString":for(p=0;p<M.length;p++){for(m=0;m<M[p].length-q;m++){if(l(M[p][m],U,Ge,Z,nt)===!1)return!1;U++}pt==="MultiLineString"&&Z++,pt==="Polygon"&&nt++}pt==="Polygon"&&Z++;break;case"MultiPolygon":for(p=0;p<M.length;p++){for(nt=0,m=0;m<M[p].length;m++){for(C=0;C<M[p][m].length-q;C++){if(l(M[p][m][C],U,Ge,Z,nt)===!1)return!1;U++}nt++}Z++}break;case"GeometryCollection":for(p=0;p<x.geometries.length;p++)if(ic(x.geometries[p],l)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Er(a,l){if(a.type==="Feature")l(a,0);else if(a.type==="FeatureCollection")for(var h=0;h<a.features.length&&l(a.features[h],h)!==!1;h++);}function Ho(a,l,h){var p=h;return Er(a,function(m,C){C===0&&h===void 0?p=m:p=l(p,m,C)}),p}function nd(a,l){var h,p,m,C,x,b,M,A,q,U,ct=0,ft=a.type==="FeatureCollection",It=a.type==="Feature",Vt=ft?a.features.length:1;for(h=0;h<Vt;h++){for(b=ft?a.features[h].geometry:It?a.geometry:a,A=ft?a.features[h].properties:It?a.properties:{},q=ft?a.features[h].bbox:It?a.bbox:void 0,U=ft?a.features[h].id:It?a.id:void 0,M=b?b.type==="GeometryCollection":!1,x=M?b.geometries.length:1,m=0;m<x;m++){if(C=M?b.geometries[m]:b,C===null){if(l(null,ct,A,q,U)===!1)return!1;continue}switch(C.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(l(C,ct,A,q,U)===!1)return!1;break}case"GeometryCollection":{for(p=0;p<C.geometries.length;p++)if(l(C.geometries[p],ct,A,q,U)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ct++}}function Li(a,l){nd(a,function(h,p,m,C,x){var b=h===null?null:h.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return l(vo(h,m,{bbox:C,id:x}),p,0)===!1?!1:void 0}var M;switch(b){case"MultiPoint":M="Point";break;case"MultiLineString":M="LineString";break;case"MultiPolygon":M="Polygon";break}for(var A=0;A<h.coordinates.length;A++){var q=h.coordinates[A],U={type:M,coordinates:q};if(l(vo(U,m),p,A)===!1)return!1}})}function rd(a){if(!a)throw new Error("geojson is required");var l=[];return Li(a,function(h){Zo(h,l)}),Tr(l)}function Zo(a,l){var h=[],p=a.geometry;if(p!==null){switch(p.type){case"Polygon":h=Vi(p);break;case"LineString":h=[Vi(p)]}h.forEach(function(m){var C=id(m,a.properties);C.forEach(function(x){x.id=l.length,l.push(x)})})}}function id(a,l){var h=[];return a.reduce(function(p,m){var C=zs([p,m],l);return C.bbox=ka(p,m),h.push(C),m}),h}function ka(a,l){var h=a[0],p=a[1],m=l[0],C=l[1],x=h<m?h:m,b=p<C?p:C,M=h>m?h:m,A=p>C?p:C;return[x,b,M,A]}var Tu=rd,Au=d(fo(),1);function sd(a,l){var h={},p=[];if(a.type==="LineString"&&(a=vo(a)),l.type==="LineString"&&(l=vo(l)),a.type==="Feature"&&l.type==="Feature"&&a.geometry!==null&&l.geometry!==null&&a.geometry.type==="LineString"&&l.geometry.type==="LineString"&&a.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var m=ps(a,l);return m&&p.push(m),Tr(p)}var C=(0,Au.default)();return C.load(Tu(l)),Er(Tu(a),function(x){Er(C.search(x),function(b){var M=ps(x,b);if(M){var A=Vi(M).join(",");h[A]||(h[A]=!0,p.push(M))}})}),Tr(p)}function ps(a,l){var h=Vi(a),p=Vi(l);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(p.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var m=h[0][0],C=h[0][1],x=h[1][0],b=h[1][1],M=p[0][0],A=p[0][1],q=p[1][0],U=p[1][1],ct=(U-A)*(x-m)-(q-M)*(b-C),ft=(q-M)*(C-A)-(U-A)*(m-M),It=(x-m)*(C-A)-(b-C)*(m-M);if(ct===0)return null;var Vt=ft/ct,Wt=It/ct;if(Vt>=0&&Vt<=1&&Wt>=0&&Wt<=1){var Ge=m+Vt*(x-m),j=C+Vt*(b-C);return Co([Ge,j])}return null}var ji=sd,Bh=d(fo(),1);function sc(a,l,h){h===void 0&&(h={});var p=hi(a),m=hi(l),C=ci(m[1]-p[1]),x=ci(m[0]-p[0]),b=ci(p[1]),M=ci(m[1]),A=Math.pow(Math.sin(C/2),2)+Math.pow(Math.sin(x/2),2)*Math.cos(b)*Math.cos(M);return ed(2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A)),h.units)}var Eo=sc;function ds(a){var l=a[0],h=a[1],p=a[2],m=a[3],C=Eo(a.slice(0,2),[p,h]),x=Eo(a.slice(0,2),[l,m]);if(C>=x){var b=(h+m)/2;return[l,b-(p-l)/2,p,b+(p-l)/2]}else{var M=(l+p)/2;return[M-(m-h)/2,h,M+(m-h)/2,m]}}var od=ds;function Gs(a){var l=[1/0,1/0,-1/0,-1/0];return ic(a,function(h){l[0]>h[0]&&(l[0]=h[0]),l[1]>h[1]&&(l[1]=h[1]),l[2]<h[0]&&(l[2]=h[0]),l[3]<h[1]&&(l[3]=h[1])}),l}Gs.default=Gs;var Na=Gs;function gs(a,l){l===void 0&&(l={});var h=l.precision,p=l.coordinates,m=l.mutate;if(h=h==null||isNaN(h)?6:h,p=p==null||isNaN(p)?3:p,!a)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof p!="number")throw new Error("<coordinates> must be a number");(m===!1||m===void 0)&&(a=JSON.parse(JSON.stringify(a)));var C=Math.pow(10,h);return ic(a,function(x){Du(x,C,p)}),a}function Du(a,l,h){a.length>h&&a.splice(h,a.length);for(var p=0;p<a.length;p++)a[p]=Math.round(a[p]*l)/l;return a}var Fh=gs;function ku(a,l,h){if(h===void 0&&(h={}),h.final===!0)return Nu(a,l);var p=hi(a),m=hi(l),C=ci(p[0]),x=ci(m[0]),b=ci(p[1]),M=ci(m[1]),A=Math.sin(x-C)*Math.cos(M),q=Math.cos(b)*Math.sin(M)-Math.sin(b)*Math.cos(M)*Math.cos(x-C);return Ar(Math.atan2(A,q))}function Nu(a,l){var h=ku(l,a);return h=(h+180)%360,h}function Ru(a,l,h,p){p===void 0&&(p={});var m=hi(a),C=ci(m[0]),x=ci(m[1]),b=ci(h),M=Da(l,p.units),A=Math.asin(Math.sin(x)*Math.cos(M)+Math.cos(x)*Math.sin(M)*Math.cos(b)),q=C+Math.atan2(Math.sin(b)*Math.sin(M)*Math.cos(x),Math.cos(M)-Math.sin(x)*Math.sin(A)),U=Ar(q),ct=Ar(A);return Co([U,ct],p.properties)}function Ou(a,l,h){h===void 0&&(h={});var p=Co([1/0,1/0],{dist:1/0}),m=0;return Li(a,function(C){for(var x=Vi(C),b=0;b<x.length-1;b++){var M=Co(x[b]);M.properties.dist=Eo(l,M,h);var A=Co(x[b+1]);A.properties.dist=Eo(l,A,h);var q=Eo(M,A,h),U=Math.max(M.properties.dist,A.properties.dist),ct=ku(M,A),ft=Ru(l,U,ct+90,h),It=Ru(l,U,ct-90,h),Vt=ji(zs([ft.geometry.coordinates,It.geometry.coordinates]),zs([M.geometry.coordinates,A.geometry.coordinates])),Wt=null;Vt.features.length>0&&(Wt=Vt.features[0],Wt.properties.dist=Eo(l,Wt,h),Wt.properties.location=m+Eo(M,Wt,h)),M.properties.dist<p.properties.dist&&(p=M,p.properties.index=b,p.properties.location=m),A.properties.dist<p.properties.dist&&(p=A,p.properties.index=b+1,p.properties.location=m+q),Wt&&Wt.properties.dist<p.properties.dist&&(p=Wt,p.properties.index=b),m+=q}}),p}var Ko=Ou;function Bu(a,l){if(!a)throw new Error("line is required");if(!l)throw new Error("splitter is required");var h=rc(a),p=rc(l);if(h!=="LineString")throw new Error("line must be LineString");if(p==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(p==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var m=Fh(l,{precision:7});switch(p){case"Point":return zu(a,m);case"MultiPoint":return Fu(a,m);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Fu(a,ji(a,m))}}function Fu(a,l){var h=[],p=(0,Bh.default)();return Li(l,function(m){if(h.forEach(function(b,M){b.id=M}),!h.length)h=zu(a,m).features,h.forEach(function(b){b.bbox||(b.bbox=od(Na(b)))}),p.load(Tr(h));else{var C=p.search(m);if(C.features.length){var x=zh(m,C);h=h.filter(function(b){return b.id!==x.id}),p.remove(x),Er(zu(x,m),function(b){h.push(b),p.insert(b)})}}}),Tr(h)}function zu(a,l){var h=[],p=Vi(a)[0],m=Vi(a)[a.geometry.coordinates.length-1];if(Xo(p,hi(l))||Xo(m,hi(l)))return Tr([a]);var C=(0,Bh.default)(),x=Tu(a);C.load(x);var b=C.search(l);if(!b.features.length)return Tr([a]);var M=zh(l,b),A=[p],q=Ho(x,function(U,ct,ft){var It=Vi(ct)[1],Vt=hi(l);return ft===M.id?(U.push(Vt),h.push(zs(U)),Xo(Vt,It)?[Vt]:[Vt,It]):(U.push(It),U)},A);return q.length>1&&h.push(zs(q)),Tr(h)}function zh(a,l){if(!l.features.length)throw new Error("lines must contain features");if(l.features.length===1)return l.features[0];var h,p=1/0;return Er(l,function(m){var C=Ko(m,a),x=C.properties.dist;x<p&&(h=m,p=x)}),h}function Xo(a,l){return a[0]===l[0]&&a[1]===l[1]}var ad=Bu;function Ra(a,l,h){if(h===void 0&&(h={}),!a)throw new Error("point is required");if(!l)throw new Error("polygon is required");var p=hi(a),m=Iu(l),C=m.type,x=l.bbox,b=m.coordinates;if(x&&Uh(p,x)===!1)return!1;C==="Polygon"&&(b=[b]);for(var M=!1,A=0;A<b.length&&!M;A++)if(Gh(p,b[A][0],h.ignoreBoundary)){for(var q=!1,U=1;U<b[A].length&&!q;)Gh(p,b[A][U],!h.ignoreBoundary)&&(q=!0),U++;q||(M=!0)}return M}function Gh(a,l,h){var p=!1;l[0][0]===l[l.length-1][0]&&l[0][1]===l[l.length-1][1]&&(l=l.slice(0,l.length-1));for(var m=0,C=l.length-1;m<l.length;C=m++){var x=l[m][0],b=l[m][1],M=l[C][0],A=l[C][1],q=a[1]*(x-M)+b*(M-a[0])+A*(a[0]-x)===0&&(x-a[0])*(M-a[0])<=0&&(b-a[1])*(A-a[1])<=0;if(q)return!h;var U=b>a[1]!=A>a[1]&&a[0]<(M-x)*(a[1]-b)/(A-b)+x;U&&(p=!p)}return p}function Uh(a,l){return l[0]<=a[0]&&l[1]<=a[1]&&l[2]>=a[0]&&l[3]>=a[1]}function ud(a,l,h){h===void 0&&(h={});for(var p=hi(a),m=Vi(l),C=0;C<m.length-1;C++){var x=!1;if(h.ignoreEndVertices&&(C===0&&(x="start"),C===m.length-2&&(x="end"),C===0&&C+1===m.length-1&&(x="both")),qi(m[C],m[C+1],p,x,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function qi(a,l,h,p,m){var C=h[0],x=h[1],b=a[0],M=a[1],A=l[0],q=l[1],U=h[0]-b,ct=h[1]-M,ft=A-b,It=q-M,Vt=U*It-ct*ft;if(m!==null){if(Math.abs(Vt)>m)return!1}else if(Vt!==0)return!1;if(p){if(p==="start")return Math.abs(ft)>=Math.abs(It)?ft>0?b<C&&C<=A:A<=C&&C<b:It>0?M<x&&x<=q:q<=x&&x<M;if(p==="end")return Math.abs(ft)>=Math.abs(It)?ft>0?b<=C&&C<A:A<C&&C<=b:It>0?M<=x&&x<q:q<x&&x<=M;if(p==="both")return Math.abs(ft)>=Math.abs(It)?ft>0?b<C&&C<A:A<C&&C<b:It>0?M<x&&x<q:q<x&&x<M}else return Math.abs(ft)>=Math.abs(It)?ft>0?b<=C&&C<=A:A<=C&&C<=b:It>0?M<=x&&x<=q:q<=x&&x<=M;return!1}var Us=ud;function ld(a,l){var h=Iu(a),p=Iu(l),m=h.type,C=p.type,x=h.coordinates,b=p.coordinates;switch(m){case"Point":switch(C){case"Point":return Uu(x,b);default:throw new Error("feature2 "+C+" geometry not supported")}case"MultiPoint":switch(C){case"Point":return Gu(h,p);case"MultiPoint":return cd(h,p);default:throw new Error("feature2 "+C+" geometry not supported")}case"LineString":switch(C){case"Point":return Us(p,h,{ignoreEndVertices:!0});case"LineString":return Oa(h,p);case"MultiPoint":return Vh(h,p);default:throw new Error("feature2 "+C+" geometry not supported")}case"Polygon":switch(C){case"Point":return Ra(p,h,{ignoreBoundary:!0});case"LineString":return fd(h,p);case"Polygon":return Yo(h,p);case"MultiPoint":return hd(h,p);default:throw new Error("feature2 "+C+" geometry not supported")}default:throw new Error("feature1 "+m+" geometry not supported")}}function Gu(a,l){var h,p=!1;for(h=0;h<a.coordinates.length;h++)if(Uu(a.coordinates[h],l.coordinates)){p=!0;break}return p}function cd(a,l){for(var h=0,p=l.coordinates;h<p.length;h++){for(var m=p[h],C=!1,x=0,b=a.coordinates;x<b.length;x++){var M=b[x];if(Uu(m,M)){C=!0;break}}if(!C)return!1}return!0}function Vh(a,l){for(var h=!1,p=0,m=l.coordinates;p<m.length;p++){var C=m[p];if(Us(C,a,{ignoreEndVertices:!0})&&(h=!0),!Us(C,a))return!1}return!!h}function hd(a,l){for(var h=0,p=l.coordinates;h<p.length;h++){var m=p[h];if(!Ra(m,a,{ignoreBoundary:!0}))return!1}return!0}function Oa(a,l){for(var h=!1,p=0,m=l.coordinates;p<m.length;p++){var C=m[p];if(Us({type:"Point",coordinates:C},a,{ignoreEndVertices:!0})&&(h=!0),!Us({type:"Point",coordinates:C},a,{ignoreEndVertices:!1}))return!1}return h}function fd(a,l){var h=!1,p=0,m=Na(a),C=Na(l);if(!oc(m,C))return!1;for(p;p<l.coordinates.length-1;p++){var x=pd(l.coordinates[p],l.coordinates[p+1]);if(Ra({type:"Point",coordinates:x},a,{ignoreBoundary:!0})){h=!0;break}}return h}function Yo(a,l){if(a.type==="Feature"&&a.geometry===null||l.type==="Feature"&&l.geometry===null)return!1;var h=Na(a),p=Na(l);if(!oc(h,p))return!1;for(var m=Iu(l).coordinates,C=0,x=m;C<x.length;C++)for(var b=x[C],M=0,A=b;M<A.length;M++){var q=A[M];if(!Ra(q,a))return!1}return!0}function oc(a,l){return!(a[0]>l[0]||a[2]<l[2]||a[1]>l[1]||a[3]<l[3])}function Uu(a,l){return a[0]===l[0]&&a[1]===l[1]}function pd(a,l){return[(a[0]+l[0])/2,(a[1]+l[1])/2]}var ms=d(Os()),ac=a=>()=>a,Vu=a=>{let l=a?(h,p)=>p.minus(h).abs().isLessThanOrEqualTo(a):ac(!1);return(h,p)=>l(h,p)?0:h.comparedTo(p)};function Ba(a){let l=a?(h,p,m,C,x)=>h.exponentiatedBy(2).isLessThanOrEqualTo(C.minus(p).exponentiatedBy(2).plus(x.minus(m).exponentiatedBy(2)).times(a)):ac(!1);return(h,p,m)=>{let C=h.x,x=h.y,b=m.x,M=m.y,A=x.minus(M).times(p.x.minus(b)).minus(C.minus(b).times(p.y.minus(M)));return l(A,C,x,b,M)?0:A.comparedTo(0)}}var dd=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Wo=Math.ceil,lr=Math.floor,Lr="[BigNumber Error] ",uc=Lr+"Number primitive has more than 15 significant digits: ",xi=1e14,_e=14,lc=9007199254740991,ju=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],_s=1e7,Dr=1e9;function jh(a){var l,h,p,m=j.prototype={constructor:j,toString:null,valueOf:null},C=new j(1),x=20,b=4,M=-7,A=21,q=-1e7,U=1e7,ct=!1,ft=1,It=0,Vt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Wt="0123456789abcdefghijklmnopqrstuvwxyz",Ge=!0;function j(P,k){var R,N,O,B,X,K,tt,ut,at=this;if(!(at instanceof j))return new j(P,k);if(k==null){if(P&&P._isBigNumber===!0){at.s=P.s,!P.c||P.e>U?at.c=at.e=null:P.e<q?at.c=[at.e=0]:(at.e=P.e,at.c=P.c.slice());return}if((K=typeof P=="number")&&P*0==0){if(at.s=1/P<0?(P=-P,-1):1,P===~~P){for(B=0,X=P;X>=10;X/=10,B++);B>U?at.c=at.e=null:(at.e=B,at.c=[P]);return}ut=String(P)}else{if(!dd.test(ut=String(P)))return p(at,ut,K);at.s=ut.charCodeAt(0)==45?(ut=ut.slice(1),-1):1}(B=ut.indexOf("."))>-1&&(ut=ut.replace(".","")),(X=ut.search(/e/i))>0?(B<0&&(B=X),B+=+ut.slice(X+1),ut=ut.substring(0,X)):B<0&&(B=ut.length)}else{if(s(k,2,Wt.length,"Base"),k==10&&Ge)return at=new j(P),st(at,x+at.e+1,b);if(ut=String(P),K=typeof P=="number"){if(P*0!=0)return p(at,ut,K,k);if(at.s=1/P<0?(ut=ut.slice(1),-1):1,j.DEBUG&&ut.replace(/^0\.0*|\./,"").length>15)throw Error(uc+P)}else at.s=ut.charCodeAt(0)===45?(ut=ut.slice(1),-1):1;for(R=Wt.slice(0,k),B=X=0,tt=ut.length;X<tt;X++)if(R.indexOf(N=ut.charAt(X))<0){if(N=="."){if(X>B){B=tt;continue}}else if(!O&&(ut==ut.toUpperCase()&&(ut=ut.toLowerCase())||ut==ut.toLowerCase()&&(ut=ut.toUpperCase()))){O=!0,X=-1,B=0;continue}return p(at,String(P),K,k)}K=!1,ut=h(ut,k,10,at.s),(B=ut.indexOf("."))>-1?ut=ut.replace(".",""):B=ut.length}for(X=0;ut.charCodeAt(X)===48;X++);for(tt=ut.length;ut.charCodeAt(--tt)===48;);if(ut=ut.slice(X,++tt)){if(tt-=X,K&&j.DEBUG&&tt>15&&(P>lc||P!==lr(P)))throw Error(uc+at.s*P);if((B=B-X-1)>U)at.c=at.e=null;else if(B<q)at.c=[at.e=0];else{if(at.e=B,at.c=[],X=(B+1)%_e,B<0&&(X+=_e),X<tt){for(X&&at.c.push(+ut.slice(0,X)),tt-=_e;X<tt;)at.c.push(+ut.slice(X,X+=_e));X=_e-(ut=ut.slice(X)).length}else X-=tt;for(;X--;ut+="0");at.c.push(+ut)}}else at.c=[at.e=0]}j.clone=jh,j.ROUND_UP=0,j.ROUND_DOWN=1,j.ROUND_CEIL=2,j.ROUND_FLOOR=3,j.ROUND_HALF_UP=4,j.ROUND_HALF_DOWN=5,j.ROUND_HALF_EVEN=6,j.ROUND_HALF_CEIL=7,j.ROUND_HALF_FLOOR=8,j.EUCLID=9,j.config=j.set=function(P){var k,R;if(P!=null)if(typeof P=="object"){if(P.hasOwnProperty(k="DECIMAL_PLACES")&&(R=P[k],s(R,0,Dr,k),x=R),P.hasOwnProperty(k="ROUNDING_MODE")&&(R=P[k],s(R,0,8,k),b=R),P.hasOwnProperty(k="EXPONENTIAL_AT")&&(R=P[k],R&&R.pop?(s(R[0],-1e9,0,k),s(R[1],0,Dr,k),M=R[0],A=R[1]):(s(R,-1e9,Dr,k),M=-(A=R<0?-R:R))),P.hasOwnProperty(k="RANGE"))if(R=P[k],R&&R.pop)s(R[0],-1e9,-1,k),s(R[1],1,Dr,k),q=R[0],U=R[1];else if(s(R,-1e9,Dr,k),R)q=-(U=R<0?-R:R);else throw Error(Lr+k+" cannot be zero: "+R);if(P.hasOwnProperty(k="CRYPTO"))if(R=P[k],R===!!R)if(R)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ct=R;else throw ct=!R,Error(Lr+"crypto unavailable");else ct=R;else throw Error(Lr+k+" not true or false: "+R);if(P.hasOwnProperty(k="MODULO_MODE")&&(R=P[k],s(R,0,9,k),ft=R),P.hasOwnProperty(k="POW_PRECISION")&&(R=P[k],s(R,0,Dr,k),It=R),P.hasOwnProperty(k="FORMAT"))if(R=P[k],typeof R=="object")Vt=R;else throw Error(Lr+k+" not an object: "+R);if(P.hasOwnProperty(k="ALPHABET"))if(R=P[k],typeof R=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(R))Ge=R.slice(0,10)=="0123456789",Wt=R;else throw Error(Lr+k+" invalid: "+R)}else throw Error(Lr+"Object expected: "+P);return{DECIMAL_PLACES:x,ROUNDING_MODE:b,EXPONENTIAL_AT:[M,A],RANGE:[q,U],CRYPTO:ct,MODULO_MODE:ft,POW_PRECISION:It,FORMAT:Vt,ALPHABET:Wt}},j.isBigNumber=function(P){if(!P||P._isBigNumber!==!0)return!1;if(!j.DEBUG)return!0;var k,R,N=P.c,O=P.e,B=P.s;t:if({}.toString.call(N)=="[object Array]"){if((B===1||B===-1)&&O>=-1e9&&O<=Dr&&O===lr(O)){if(N[0]===0){if(O===0&&N.length===1)return!0;break t}if(k=(O+1)%_e,k<1&&(k+=_e),String(N[0]).length==k){for(k=0;k<N.length;k++)if(R=N[k],R<0||R>=xi||R!==lr(R))break t;if(R!==0)return!0}}}else if(N===null&&O===null&&(B===null||B===1||B===-1))return!0;throw Error(Lr+"Invalid BigNumber: "+P)},j.maximum=j.max=function(){return nt(arguments,-1)},j.minimum=j.min=function(){return nt(arguments,1)},j.random=function(){var P=9007199254740992,k=Math.random()*P&2097151?function(){return lr(Math.random()*P)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(R){var N,O,B,X,K,tt=0,ut=[],at=new j(C);if(R==null?R=x:s(R,0,Dr),X=Wo(R/_e),ct)if(crypto.getRandomValues){for(N=crypto.getRandomValues(new Uint32Array(X*=2));tt<X;)K=N[tt]*131072+(N[tt+1]>>>11),K>=9e15?(O=crypto.getRandomValues(new Uint32Array(2)),N[tt]=O[0],N[tt+1]=O[1]):(ut.push(K%1e14),tt+=2);tt=X/2}else if(crypto.randomBytes){for(N=crypto.randomBytes(X*=7);tt<X;)K=(N[tt]&31)*281474976710656+N[tt+1]*1099511627776+N[tt+2]*4294967296+N[tt+3]*16777216+(N[tt+4]<<16)+(N[tt+5]<<8)+N[tt+6],K>=9e15?crypto.randomBytes(7).copy(N,tt):(ut.push(K%1e14),tt+=7);tt=X/7}else throw ct=!1,Error(Lr+"crypto unavailable");if(!ct)for(;tt<X;)K=k(),K<9e15&&(ut[tt++]=K%1e14);for(X=ut[--tt],R%=_e,X&&R&&(K=ju[_e-R],ut[tt]=lr(X/K)*K);ut[tt]===0;ut.pop(),tt--);if(tt<0)ut=[B=0];else{for(B=-1;ut[0]===0;ut.splice(0,1),B-=_e);for(tt=1,K=ut[0];K>=10;K/=10,tt++);tt<_e&&(B-=_e-tt)}return at.e=B,at.c=ut,at}}(),j.sum=function(){for(var P=1,k=arguments,R=new j(k[0]);P<k.length;)R=R.plus(k[P++]);return R},h=function(){var P="0123456789";function k(R,N,O,B){for(var X,K=[0],tt,ut=0,at=R.length;ut<at;){for(tt=K.length;tt--;K[tt]*=N);for(K[0]+=B.indexOf(R.charAt(ut++)),X=0;X<K.length;X++)K[X]>O-1&&(K[X+1]==null&&(K[X+1]=0),K[X+1]+=K[X]/O|0,K[X]%=O)}return K.reverse()}return function(R,N,O,B,X){var K,tt,ut,at,wt,Xt,$t,ae,en=R.indexOf("."),an=x,He=b;for(en>=0&&(at=It,It=0,R=R.replace(".",""),ae=new j(N),Xt=ae.pow(R.length-en),It=at,ae.c=k(v(Wr(Xt.c),Xt.e,"0"),10,O,P),ae.e=ae.c.length),$t=k(R,N,O,X?(K=Wt,P):(K=P,Wt)),ut=at=$t.length;$t[--at]==0;$t.pop());if(!$t[0])return K.charAt(0);if(en<0?--ut:(Xt.c=$t,Xt.e=ut,Xt.s=B,Xt=l(Xt,ae,an,He,O),$t=Xt.c,wt=Xt.r,ut=Xt.e),tt=ut+an+1,en=$t[tt],at=O/2,wt=wt||tt<0||$t[tt+1]!=null,wt=He<4?(en!=null||wt)&&(He==0||He==(Xt.s<0?3:2)):en>at||en==at&&(He==4||wt||He==6&&$t[tt-1]&1||He==(Xt.s<0?8:7)),tt<1||!$t[0])R=wt?v(K.charAt(1),-an,K.charAt(0)):K.charAt(0);else{if($t.length=tt,wt)for(--O;++$t[--tt]>O;)$t[tt]=0,tt||(++ut,$t=[1].concat($t));for(at=$t.length;!$t[--at];);for(en=0,R="";en<=at;R+=K.charAt($t[en++]));R=v(R,ut,K.charAt(0))}return R}}(),l=function(){function P(N,O,B){var X,K,tt,ut,at=0,wt=N.length,Xt=O%_s,$t=O/_s|0;for(N=N.slice();wt--;)tt=N[wt]%_s,ut=N[wt]/_s|0,X=$t*tt+ut*Xt,K=Xt*tt+X%_s*_s+at,at=(K/B|0)+(X/_s|0)+$t*ut,N[wt]=K%B;return at&&(N=[at].concat(N)),N}function k(N,O,B,X){var K,tt;if(B!=X)tt=B>X?1:-1;else for(K=tt=0;K<B;K++)if(N[K]!=O[K]){tt=N[K]>O[K]?1:-1;break}return tt}function R(N,O,B,X){for(var K=0;B--;)N[B]-=K,K=N[B]<O[B]?1:0,N[B]=K*X+N[B]-O[B];for(;!N[0]&&N.length>1;N.splice(0,1));}return function(N,O,B,X,K){var tt,ut,at,wt,Xt,$t,ae,en,an,He,un,Nr,Wh,Cd,Ed,Vs,pc,Ki=N.s==O.s?1:-1,Jr=N.c,Fn=O.c;if(!Jr||!Jr[0]||!Fn||!Fn[0])return new j(!N.s||!O.s||(Jr?Fn&&Jr[0]==Fn[0]:!Fn)?NaN:Jr&&Jr[0]==0||!Fn?Ki*0:Ki/0);for(en=new j(Ki),an=en.c=[],ut=N.e-O.e,Ki=B+ut+1,K||(K=xi,ut=Yr(N.e/_e)-Yr(O.e/_e),Ki=Ki/_e|0),at=0;Fn[at]==(Jr[at]||0);at++);if(Fn[at]>(Jr[at]||0)&&ut--,Ki<0)an.push(1),wt=!0;else{for(Cd=Jr.length,Vs=Fn.length,at=0,Ki+=2,Xt=lr(K/(Fn[0]+1)),Xt>1&&(Fn=P(Fn,Xt,K),Jr=P(Jr,Xt,K),Vs=Fn.length,Cd=Jr.length),Wh=Vs,He=Jr.slice(0,Vs),un=He.length;un<Vs;He[un++]=0);pc=Fn.slice(),pc=[0].concat(pc),Ed=Fn[0],Fn[1]>=K/2&&Ed++;do{if(Xt=0,tt=k(Fn,He,Vs,un),tt<0){if(Nr=He[0],Vs!=un&&(Nr=Nr*K+(He[1]||0)),Xt=lr(Nr/Ed),Xt>1)for(Xt>=K&&(Xt=K-1),$t=P(Fn,Xt,K),ae=$t.length,un=He.length;k($t,He,ae,un)==1;)Xt--,R($t,Vs<ae?pc:Fn,ae,K),ae=$t.length,tt=1;else Xt==0&&(tt=Xt=1),$t=Fn.slice(),ae=$t.length;if(ae<un&&($t=[0].concat($t)),R(He,$t,un,K),un=He.length,tt==-1)for(;k(Fn,He,Vs,un)<1;)Xt++,R(He,Vs<un?pc:Fn,un,K),un=He.length}else tt===0&&(Xt++,He=[0]);an[at++]=Xt,He[0]?He[un++]=Jr[Wh]||0:(He=[Jr[Wh]],un=1)}while((Wh++<Cd||He[0]!=null)&&Ki--);wt=He[0]!=null,an[0]||an.splice(0,1)}if(K==xi){for(at=1,Ki=an[0];Ki>=10;Ki/=10,at++);st(en,B+(en.e=at+ut*_e-1)+1,X,wt)}else en.e=ut,en.r=+wt;return en}}();function Z(P,k,R,N){var O,B,X,K,tt;if(R==null?R=b:s(R,0,8),!P.c)return P.toString();if(O=P.c[0],X=P.e,k==null)tt=Wr(P.c),tt=N==1||N==2&&(X<=M||X>=A)?g(tt,X):v(tt,X,"0");else if(P=st(new j(P),k,R),B=P.e,tt=Wr(P.c),K=tt.length,N==1||N==2&&(k<=B||B<=M)){for(;K<k;tt+="0",K++);tt=g(tt,B)}else if(k-=X,tt=v(tt,B,"0"),B+1>K){if(--k>0)for(tt+=".";k--;tt+="0");}else if(k+=B-K,k>0)for(B+1==K&&(tt+=".");k--;tt+="0");return P.s<0&&O?"-"+tt:tt}function nt(P,k){for(var R,N,O=1,B=new j(P[0]);O<P.length;O++)N=new j(P[O]),(!N.s||(R=Lo(B,N))===k||R===0&&B.s===k)&&(B=N);return B}function pt(P,k,R){for(var N=1,O=k.length;!k[--O];k.pop());for(O=k[0];O>=10;O/=10,N++);return(R=N+R*_e-1)>U?P.c=P.e=null:R<q?P.c=[P.e=0]:(P.e=R,P.c=k),P}p=function(){var P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,R=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(B,X,K,tt){var ut,at=K?X:X.replace(O,"");if(N.test(at))B.s=isNaN(at)?null:at<0?-1:1;else{if(!K&&(at=at.replace(P,function(wt,Xt,$t){return ut=($t=$t.toLowerCase())=="x"?16:$t=="b"?2:8,!tt||tt==ut?Xt:wt}),tt&&(ut=tt,at=at.replace(k,"$1").replace(R,"0.$1")),X!=at))return new j(at,ut);if(j.DEBUG)throw Error(Lr+"Not a"+(tt?" base "+tt:"")+" number: "+X);B.s=null}B.c=B.e=null}}();function st(P,k,R,N){var O,B,X,K,tt,ut,at,wt=P.c,Xt=ju;if(wt){t:{for(O=1,K=wt[0];K>=10;K/=10,O++);if(B=k-O,B<0)B+=_e,X=k,tt=wt[ut=0],at=lr(tt/Xt[O-X-1]%10);else if(ut=Wo((B+1)/_e),ut>=wt.length)if(N){for(;wt.length<=ut;wt.push(0));tt=at=0,O=1,B%=_e,X=B-_e+1}else break t;else{for(tt=K=wt[ut],O=1;K>=10;K/=10,O++);B%=_e,X=B-_e+O,at=X<0?0:lr(tt/Xt[O-X-1]%10)}if(N=N||k<0||wt[ut+1]!=null||(X<0?tt:tt%Xt[O-X-1]),N=R<4?(at||N)&&(R==0||R==(P.s<0?3:2)):at>5||at==5&&(R==4||N||R==6&&(B>0?X>0?tt/Xt[O-X]:0:wt[ut-1])%10&1||R==(P.s<0?8:7)),k<1||!wt[0])return wt.length=0,N?(k-=P.e+1,wt[0]=Xt[(_e-k%_e)%_e],P.e=-k||0):wt[0]=P.e=0,P;if(B==0?(wt.length=ut,K=1,ut--):(wt.length=ut+1,K=Xt[_e-B],wt[ut]=X>0?lr(tt/Xt[O-X]%Xt[X])*K:0),N)for(;;)if(ut==0){for(B=1,X=wt[0];X>=10;X/=10,B++);for(X=wt[0]+=K,K=1;X>=10;X/=10,K++);B!=K&&(P.e++,wt[0]==xi&&(wt[0]=1));break}else{if(wt[ut]+=K,wt[ut]!=xi)break;wt[ut--]=0,K=1}for(B=wt.length;wt[--B]===0;wt.pop());}P.e>U?P.c=P.e=null:P.e<q&&(P.c=[P.e=0])}return P}function ht(P){var k,R=P.e;return R===null?P.toString():(k=Wr(P.c),k=R<=M||R>=A?g(k,R):v(k,R,"0"),P.s<0?"-"+k:k)}return m.absoluteValue=m.abs=function(){var P=new j(this);return P.s<0&&(P.s=1),P},m.comparedTo=function(P,k){return Lo(this,new j(P,k))},m.decimalPlaces=m.dp=function(P,k){var R,N,O,B=this;if(P!=null)return s(P,0,Dr),k==null?k=b:s(k,0,8),st(new j(B),P+B.e+1,k);if(!(R=B.c))return null;if(N=((O=R.length-1)-Yr(this.e/_e))*_e,O=R[O])for(;O%10==0;O/=10,N--);return N<0&&(N=0),N},m.dividedBy=m.div=function(P,k){return l(this,new j(P,k),x,b)},m.dividedToIntegerBy=m.idiv=function(P,k){return l(this,new j(P,k),0,1)},m.exponentiatedBy=m.pow=function(P,k){var R,N,O,B,X,K,tt,ut,at,wt=this;if(P=new j(P),P.c&&!P.isInteger())throw Error(Lr+"Exponent not an integer: "+ht(P));if(k!=null&&(k=new j(k)),K=P.e>14,!wt.c||!wt.c[0]||wt.c[0]==1&&!wt.e&&wt.c.length==1||!P.c||!P.c[0])return at=new j(Math.pow(+ht(wt),K?P.s*(2-c(P)):+ht(P))),k?at.mod(k):at;if(tt=P.s<0,k){if(k.c?!k.c[0]:!k.s)return new j(NaN);N=!tt&&wt.isInteger()&&k.isInteger(),N&&(wt=wt.mod(k))}else{if(P.e>9&&(wt.e>0||wt.e<-1||(wt.e==0?wt.c[0]>1||K&&wt.c[1]>=24e7:wt.c[0]<8e13||K&&wt.c[0]<=9999975e7)))return B=wt.s<0&&c(P)?-0:0,wt.e>-1&&(B=1/B),new j(tt?1/B:B);It&&(B=Wo(It/_e+2))}for(K?(R=new j(.5),tt&&(P.s=1),ut=c(P)):(O=Math.abs(+ht(P)),ut=O%2),at=new j(C);;){if(ut){if(at=at.times(wt),!at.c)break;B?at.c.length>B&&(at.c.length=B):N&&(at=at.mod(k))}if(O){if(O=lr(O/2),O===0)break;ut=O%2}else if(P=P.times(R),st(P,P.e+1,1),P.e>14)ut=c(P);else{if(O=+ht(P),O===0)break;ut=O%2}wt=wt.times(wt),B?wt.c&&wt.c.length>B&&(wt.c.length=B):N&&(wt=wt.mod(k))}return N?at:(tt&&(at=C.div(at)),k?at.mod(k):B?st(at,It,b,X):at)},m.integerValue=function(P){var k=new j(this);return P==null?P=b:s(P,0,8),st(k,k.e+1,P)},m.isEqualTo=m.eq=function(P,k){return Lo(this,new j(P,k))===0},m.isFinite=function(){return!!this.c},m.isGreaterThan=m.gt=function(P,k){return Lo(this,new j(P,k))>0},m.isGreaterThanOrEqualTo=m.gte=function(P,k){return(k=Lo(this,new j(P,k)))===1||k===0},m.isInteger=function(){return!!this.c&&Yr(this.e/_e)>this.c.length-2},m.isLessThan=m.lt=function(P,k){return Lo(this,new j(P,k))<0},m.isLessThanOrEqualTo=m.lte=function(P,k){return(k=Lo(this,new j(P,k)))===-1||k===0},m.isNaN=function(){return!this.s},m.isNegative=function(){return this.s<0},m.isPositive=function(){return this.s>0},m.isZero=function(){return!!this.c&&this.c[0]==0},m.minus=function(P,k){var R,N,O,B,X=this,K=X.s;if(P=new j(P,k),k=P.s,!K||!k)return new j(NaN);if(K!=k)return P.s=-k,X.plus(P);var tt=X.e/_e,ut=P.e/_e,at=X.c,wt=P.c;if(!tt||!ut){if(!at||!wt)return at?(P.s=-k,P):new j(wt?X:NaN);if(!at[0]||!wt[0])return wt[0]?(P.s=-k,P):new j(at[0]?X:b==3?-0:0)}if(tt=Yr(tt),ut=Yr(ut),at=at.slice(),K=tt-ut){for((B=K<0)?(K=-K,O=at):(ut=tt,O=wt),O.reverse(),k=K;k--;O.push(0));O.reverse()}else for(N=(B=(K=at.length)<(k=wt.length))?K:k,K=k=0;k<N;k++)if(at[k]!=wt[k]){B=at[k]<wt[k];break}if(B&&(O=at,at=wt,wt=O,P.s=-P.s),k=(N=wt.length)-(R=at.length),k>0)for(;k--;at[R++]=0);for(k=xi-1;N>K;){if(at[--N]<wt[N]){for(R=N;R&&!at[--R];at[R]=k);--at[R],at[N]+=xi}at[N]-=wt[N]}for(;at[0]==0;at.splice(0,1),--ut);return at[0]?pt(P,at,ut):(P.s=b==3?-1:1,P.c=[P.e=0],P)},m.modulo=m.mod=function(P,k){var R,N,O=this;return P=new j(P,k),!O.c||!P.s||P.c&&!P.c[0]?new j(NaN):!P.c||O.c&&!O.c[0]?new j(O):(ft==9?(N=P.s,P.s=1,R=l(O,P,0,3),P.s=N,R.s*=N):R=l(O,P,0,ft),P=O.minus(R.times(P)),!P.c[0]&&ft==1&&(P.s=O.s),P)},m.multipliedBy=m.times=function(P,k){var R,N,O,B,X,K,tt,ut,at,wt,Xt,$t,ae,en,an,He=this,un=He.c,Nr=(P=new j(P,k)).c;if(!un||!Nr||!un[0]||!Nr[0])return!He.s||!P.s||un&&!un[0]&&!Nr||Nr&&!Nr[0]&&!un?P.c=P.e=P.s=null:(P.s*=He.s,!un||!Nr?P.c=P.e=null:(P.c=[0],P.e=0)),P;for(N=Yr(He.e/_e)+Yr(P.e/_e),P.s*=He.s,tt=un.length,wt=Nr.length,tt<wt&&(ae=un,un=Nr,Nr=ae,O=tt,tt=wt,wt=O),O=tt+wt,ae=[];O--;ae.push(0));for(en=xi,an=_s,O=wt;--O>=0;){for(R=0,Xt=Nr[O]%an,$t=Nr[O]/an|0,X=tt,B=O+X;B>O;)ut=un[--X]%an,at=un[X]/an|0,K=$t*ut+at*Xt,ut=Xt*ut+K%an*an+ae[B]+R,R=(ut/en|0)+(K/an|0)+$t*at,ae[B--]=ut%en;ae[B]=R}return R?++N:ae.splice(0,1),pt(P,ae,N)},m.negated=function(){var P=new j(this);return P.s=-P.s||null,P},m.plus=function(P,k){var R,N=this,O=N.s;if(P=new j(P,k),k=P.s,!O||!k)return new j(NaN);if(O!=k)return P.s=-k,N.minus(P);var B=N.e/_e,X=P.e/_e,K=N.c,tt=P.c;if(!B||!X){if(!K||!tt)return new j(O/0);if(!K[0]||!tt[0])return tt[0]?P:new j(K[0]?N:O*0)}if(B=Yr(B),X=Yr(X),K=K.slice(),O=B-X){for(O>0?(X=B,R=tt):(O=-O,R=K),R.reverse();O--;R.push(0));R.reverse()}for(O=K.length,k=tt.length,O-k<0&&(R=tt,tt=K,K=R,k=O),O=0;k;)O=(K[--k]=K[k]+tt[k]+O)/xi|0,K[k]=xi===K[k]?0:K[k]%xi;return O&&(K=[O].concat(K),++X),pt(P,K,X)},m.precision=m.sd=function(P,k){var R,N,O,B=this;if(P!=null&&P!==!!P)return s(P,1,Dr),k==null?k=b:s(k,0,8),st(new j(B),P,k);if(!(R=B.c))return null;if(O=R.length-1,N=O*_e+1,O=R[O]){for(;O%10==0;O/=10,N--);for(O=R[0];O>=10;O/=10,N++);}return P&&B.e+1>N&&(N=B.e+1),N},m.shiftedBy=function(P){return s(P,-9007199254740991,lc),this.times("1e"+P)},m.squareRoot=m.sqrt=function(){var P,k,R,N,O,B=this,X=B.c,K=B.s,tt=B.e,ut=x+4,at=new j("0.5");if(K!==1||!X||!X[0])return new j(!K||K<0&&(!X||X[0])?NaN:X?B:1/0);if(K=Math.sqrt(+ht(B)),K==0||K==1/0?(k=Wr(X),(k.length+tt)%2==0&&(k+="0"),K=Math.sqrt(+k),tt=Yr((tt+1)/2)-(tt<0||tt%2),K==1/0?k="5e"+tt:(k=K.toExponential(),k=k.slice(0,k.indexOf("e")+1)+tt),R=new j(k)):R=new j(K+""),R.c[0]){for(tt=R.e,K=tt+ut,K<3&&(K=0);;)if(O=R,R=at.times(O.plus(l(B,O,ut,1))),Wr(O.c).slice(0,K)===(k=Wr(R.c)).slice(0,K))if(R.e<tt&&--K,k=k.slice(K-3,K+1),k=="9999"||!N&&k=="4999"){if(!N&&(st(O,O.e+x+2,0),O.times(O).eq(B))){R=O;break}ut+=4,K+=4,N=1}else{(!+k||!+k.slice(1)&&k.charAt(0)=="5")&&(st(R,R.e+x+2,1),P=!R.times(R).eq(B));break}}return st(R,R.e+x+1,b,P)},m.toExponential=function(P,k){return P!=null&&(s(P,0,Dr),P++),Z(this,P,k,1)},m.toFixed=function(P,k){return P!=null&&(s(P,0,Dr),P=P+this.e+1),Z(this,P,k)},m.toFormat=function(P,k,R){var N,O=this;if(R==null)P!=null&&k&&typeof k=="object"?(R=k,k=null):P&&typeof P=="object"?(R=P,P=k=null):R=Vt;else if(typeof R!="object")throw Error(Lr+"Argument not an object: "+R);if(N=O.toFixed(P,k),O.c){var B,X=N.split("."),K=+R.groupSize,tt=+R.secondaryGroupSize,ut=R.groupSeparator||"",at=X[0],wt=X[1],Xt=O.s<0,$t=Xt?at.slice(1):at,ae=$t.length;if(tt&&(B=K,K=tt,tt=B,ae-=B),K>0&&ae>0){for(B=ae%K||K,at=$t.substr(0,B);B<ae;B+=K)at+=ut+$t.substr(B,K);tt>0&&(at+=ut+$t.slice(B)),Xt&&(at="-"+at)}N=wt?at+(R.decimalSeparator||"")+((tt=+R.fractionGroupSize)?wt.replace(new RegExp("\\d{"+tt+"}\\B","g"),"$&"+(R.fractionGroupSeparator||"")):wt):at}return(R.prefix||"")+N+(R.suffix||"")},m.toFraction=function(P){var k,R,N,O,B,X,K,tt,ut,at,wt,Xt,$t=this,ae=$t.c;if(P!=null&&(K=new j(P),!K.isInteger()&&(K.c||K.s!==1)||K.lt(C)))throw Error(Lr+"Argument "+(K.isInteger()?"out of range: ":"not an integer: ")+ht(K));if(!ae)return new j($t);for(k=new j(C),ut=R=new j(C),N=tt=new j(C),Xt=Wr(ae),B=k.e=Xt.length-$t.e-1,k.c[0]=ju[(X=B%_e)<0?_e+X:X],P=!P||K.comparedTo(k)>0?B>0?k:ut:K,X=U,U=1/0,K=new j(Xt),tt.c[0]=0;at=l(K,k,0,1),O=R.plus(at.times(N)),O.comparedTo(P)!=1;)R=N,N=O,ut=tt.plus(at.times(O=ut)),tt=O,k=K.minus(at.times(O=k)),K=O;return O=l(P.minus(R),N,0,1),tt=tt.plus(O.times(ut)),R=R.plus(O.times(N)),tt.s=ut.s=$t.s,B=B*2,wt=l(ut,N,B,b).minus($t).abs().comparedTo(l(tt,R,B,b).minus($t).abs())<1?[ut,N]:[tt,R],U=X,wt},m.toNumber=function(){return+ht(this)},m.toPrecision=function(P,k){return P!=null&&s(P,1,Dr),Z(this,P,k,2)},m.toString=function(P){var k,R=this,N=R.s,O=R.e;return O===null?N?(k="Infinity",N<0&&(k="-"+k)):k="NaN":(P==null?k=O<=M||O>=A?g(Wr(R.c),O):v(Wr(R.c),O,"0"):P===10&&Ge?(R=st(new j(R),x+O+1,b),k=v(Wr(R.c),R.e,"0")):(s(P,2,Wt.length,"Base"),k=h(v(Wr(R.c),O,"0"),10,P,N,!0)),N<0&&R.c[0]&&(k="-"+k)),k},m.valueOf=m.toJSON=function(){return ht(this)},m._isBigNumber=!0,m[Symbol.toStringTag]="BigNumber",m[Symbol.for("nodejs.util.inspect.custom")]=m.valueOf,a!=null&&j.set(a),j}function Yr(a){var l=a|0;return a>0||a===l?l:l-1}function Wr(a){for(var l,h,p=1,m=a.length,C=a[0]+"";p<m;){for(l=a[p++]+"",h=_e-l.length;h--;l="0"+l);C+=l}for(m=C.length;C.charCodeAt(--m)===48;);return C.slice(0,m+1||1)}function Lo(a,l){var h,p,m=a.c,C=l.c,x=a.s,b=l.s,M=a.e,A=l.e;if(!x||!b)return null;if(h=m&&!m[0],p=C&&!C[0],h||p)return h?p?0:-b:x;if(x!=b)return x;if(h=x<0,p=M==A,!m||!C)return p?0:!m^h?1:-1;if(!p)return M>A^h?1:-1;for(b=(M=m.length)<(A=C.length)?M:A,x=0;x<b;x++)if(m[x]!=C[x])return m[x]>C[x]^h?1:-1;return M==A?0:M>A^h?1:-1}function s(a,l,h,p){if(a<l||a>h||a!==lr(a))throw Error(Lr+(p||"Argument")+(typeof a=="number"?a<l||a>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function c(a){var l=a.c.length-1;return Yr(a.e/_e)==l&&a.c[l]%2!=0}function g(a,l){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(l<0?"e":"e+")+l}function v(a,l,h){var p,m;if(l<0){for(m=h+".";++l;m+=h);a=m+a}else if(p=a.length,++l>p){for(m=h,l-=p;--l;m+=h);a+=m}else l<p&&(a=a.slice(0,l)+"."+a.slice(l));return a}var w=jh(),D=w,H=class{constructor(a){oe(this,"key");oe(this,"left",null);oe(this,"right",null);this.key=a}},ot=class extends H{constructor(a){super(a)}},gt=class{constructor(){oe(this,"size",0);oe(this,"modificationCount",0);oe(this,"splayCount",0)}splay(a){let l=this.root;if(l==null)return this.compare(a,a),-1;let h=null,p=null,m=null,C=null,x=l,b=this.compare,M;for(;;)if(M=b(x.key,a),M>0){let A=x.left;if(A==null||(M=b(A.key,a),M>0&&(x.left=A.right,A.right=x,x=A,A=x.left,A==null)))break;h==null?p=x:h.left=x,h=x,x=A}else if(M<0){let A=x.right;if(A==null||(M=b(A.key,a),M<0&&(x.right=A.left,A.left=x,x=A,A=x.right,A==null)))break;m==null?C=x:m.right=x,m=x,x=A}else break;return m!=null&&(m.right=x.left,x.left=C),h!=null&&(h.left=x.right,x.right=p),this.root!==x&&(this.root=x,this.splayCount++),M}splayMin(a){let l=a,h=l.left;for(;h!=null;){let p=h;l.left=p.right,p.right=l,l=p,h=l.left}return l}splayMax(a){let l=a,h=l.right;for(;h!=null;){let p=h;l.right=p.left,p.left=l,l=p,h=l.right}return l}_delete(a){if(this.root==null||this.splay(a)!=0)return null;let l=this.root,h=l,p=l.left;if(this.size--,p==null)this.root=l.right;else{let m=l.right;l=this.splayMax(p),l.right=m,this.root=l}return this.modificationCount++,h}addNewRoot(a,l){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=a;return}l<0?(a.left=h,a.right=h.right,h.right=null):(a.right=h,a.left=h.left,h.left=null),this.root=a}_first(){let a=this.root;return a==null?null:(this.root=this.splayMin(a),this.root)}_last(){let a=this.root;return a==null?null:(this.root=this.splayMax(a),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(a){return this.validKey(a)&&this.splay(a)==0}defaultCompare(){return(a,l)=>a<l?-1:a>l?1:0}wrap(){return{getRoot:()=>this.root,setRoot:a=>{this.root=a},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:a=>{this.splayCount=a},splay:a=>this.splay(a),has:a=>this.has(a)}}},St=class Cc extends gt{constructor(h,p){super();oe(this,"root",null);oe(this,"compare");oe(this,"validKey");oe(this,gm,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=p??(m=>m!=null&&m!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let p of h)this.delete(p)}forEach(h){let p=this[Symbol.iterator](),m;for(;m=p.next(),!m.done;)h(m.value,m.value,this)}add(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ot(h),p),this}addAndReturn(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ot(h),p),this.root.key}addAll(h){for(let p of h)this.add(p)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let p=this.root.left;if(p==null)return null;let m=p.right;for(;m!=null;)p=m,m=p.right;return p.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let p=this.root.right;if(p==null)return null;let m=p.left;for(;m!=null;)p=m,m=p.left;return p.key}retainAll(h){let p=new Cc(this.compare,this.validKey),m=this.modificationCount;for(let C of h){if(m!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(C)&&this.splay(C)==0&&p.add(this.root.key)}p.size!=this.size&&(this.root=p.root,this.size=p.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let p=new Cc(this.compare,this.validKey);for(let m of this)h.has(m)&&p.add(m);return p}difference(h){let p=new Cc(this.compare,this.validKey);for(let m of this)h.has(m)||p.add(m);return p}union(h){let p=this.clone();return p.addAll(h),p}clone(){let h=new Cc(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function p(C,x){let b,M;do{if(b=C.left,M=C.right,b!=null){let A=new ot(b.key);x.left=A,p(b,A)}if(M!=null){let A=new ot(M.key);x.right=A,C=M,x=A}}while(M!=null)}let m=new ot(h.key);return p(h,m),m}toSet(){return this.clone()}entries(){return new Ae(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(mm=Symbol.iterator,gm=Symbol.toStringTag,mm)](){return new fe(this.wrap())}},qt=class{constructor(a){oe(this,"tree");oe(this,"path",new Array);oe(this,"modificationCount",null);oe(this,"splayCount");this.tree=a,this.splayCount=a.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let a=this.path[this.path.length-1];return this.getValue(a)}rebuildPath(a){this.path.splice(0,this.path.length),this.tree.splay(a),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(a){for(;a!=null;)this.path.push(a),a=a.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let a=this.path[this.path.length-1],l=a.right;if(l!=null){for(;l!=null;)this.path.push(l),l=l.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===a;)a=this.path.pop();return this.path.length>0}},fe=class extends qt{getValue(a){return a.key}},Ae=class extends qt{getValue(a){return[a.key,a.key]}},xr=a=>a,qn=a=>{if(a){let l=new St(Vu(a)),h=new St(Vu(a)),p=(C,x)=>x.addAndReturn(C),m=C=>({x:p(C.x,l),y:p(C.y,h)});return m({x:new D(0),y:new D(0)}),m}return xr},kr=a=>({set:l=>{xn=kr(l)},reset:()=>kr(a),compare:Vu(a),snap:qn(a),orient:Ba(a)}),xn=kr(),Hi=(a,l)=>a.ll.x.isLessThanOrEqualTo(l.x)&&l.x.isLessThanOrEqualTo(a.ur.x)&&a.ll.y.isLessThanOrEqualTo(l.y)&&l.y.isLessThanOrEqualTo(a.ur.y),cc=(a,l)=>{if(l.ur.x.isLessThan(a.ll.x)||a.ur.x.isLessThan(l.ll.x)||l.ur.y.isLessThan(a.ll.y)||a.ur.y.isLessThan(l.ll.y))return null;let h=a.ll.x.isLessThan(l.ll.x)?l.ll.x:a.ll.x,p=a.ur.x.isLessThan(l.ur.x)?a.ur.x:l.ur.x,m=a.ll.y.isLessThan(l.ll.y)?l.ll.y:a.ll.y,C=a.ur.y.isLessThan(l.ur.y)?a.ur.y:l.ur.y;return{ll:{x:h,y:m},ur:{x:p,y:C}}},qu=(a,l)=>a.x.times(l.y).minus(a.y.times(l.x)),qh=(a,l)=>a.x.times(l.x).plus(a.y.times(l.y)),Fa=a=>qh(a,a).sqrt(),gd=(a,l,h)=>{let p={x:l.x.minus(a.x),y:l.y.minus(a.y)},m={x:h.x.minus(a.x),y:h.y.minus(a.y)};return qu(m,p).div(Fa(m)).div(Fa(p))},Hh=(a,l,h)=>{let p={x:l.x.minus(a.x),y:l.y.minus(a.y)},m={x:h.x.minus(a.x),y:h.y.minus(a.y)};return qh(m,p).div(Fa(m)).div(Fa(p))},Tn=(a,l,h)=>l.y.isZero()?null:{x:a.x.plus(l.x.div(l.y).times(h.minus(a.y))),y:h},za=(a,l,h)=>l.x.isZero()?null:{x:h,y:a.y.plus(l.y.div(l.x).times(h.minus(a.x)))},md=(a,l,h,p)=>{if(l.x.isZero())return za(h,p,a.x);if(p.x.isZero())return za(a,l,h.x);if(l.y.isZero())return Tn(h,p,a.y);if(p.y.isZero())return Tn(a,l,h.y);let m=qu(l,p);if(m.isZero())return null;let C={x:h.x.minus(a.x),y:h.y.minus(a.y)},x=qu(C,l).div(m),b=qu(C,p).div(m),M=a.x.plus(b.times(l.x)),A=h.x.plus(x.times(p.x)),q=a.y.plus(b.times(l.y)),U=h.y.plus(x.times(p.y)),ct=M.plus(A).div(2),ft=q.plus(U).div(2);return{x:ct,y:ft}},Zi=class ov{constructor(l,h){oe(this,"point");oe(this,"isLeft");oe(this,"segment");oe(this,"otherSE");oe(this,"consumedBy");l.events===void 0?l.events=[this]:l.events.push(this),this.point=l,this.isLeft=h}static compare(l,h){let p=ov.comparePoints(l.point,h.point);return p!==0?p:(l.point!==h.point&&l.link(h),l.isLeft!==h.isLeft?l.isLeft?1:-1:Jo.compare(l.segment,h.segment))}static comparePoints(l,h){return l.x.isLessThan(h.x)?-1:l.x.isGreaterThan(h.x)?1:l.y.isLessThan(h.y)?-1:l.y.isGreaterThan(h.y)?1:0}link(l){if(l.point===this.point)throw new Error("Tried to link already linked events");let h=l.point.events;for(let p=0,m=h.length;p<m;p++){let C=h[p];this.point.events.push(C),C.point=this.point}this.checkForConsuming()}checkForConsuming(){let l=this.point.events.length;for(let h=0;h<l;h++){let p=this.point.events[h];if(p.segment.consumedBy===void 0)for(let m=h+1;m<l;m++){let C=this.point.events[m];C.consumedBy===void 0&&p.otherSE.point.events===C.otherSE.point.events&&p.segment.consume(C.segment)}}}getAvailableLinkedEvents(){let l=[];for(let h=0,p=this.point.events.length;h<p;h++){let m=this.point.events[h];m!==this&&!m.segment.ringOut&&m.segment.isInResult()&&l.push(m)}return l}getLeftmostComparator(l){let h=new Map,p=m=>{let C=m.otherSE;h.set(m,{sine:gd(this.point,l.point,C.point),cosine:Hh(this.point,l.point,C.point)})};return(m,C)=>{h.has(m)||p(m),h.has(C)||p(C);let{sine:x,cosine:b}=h.get(m),{sine:M,cosine:A}=h.get(C);return x.isGreaterThanOrEqualTo(0)&&M.isGreaterThanOrEqualTo(0)?b.isLessThan(A)?1:b.isGreaterThan(A)?-1:0:x.isLessThan(0)&&M.isLessThan(0)?b.isLessThan(A)?-1:b.isGreaterThan(A)?1:0:M.isLessThan(x)?-1:M.isGreaterThan(x)?1:0}}},_d=0,Jo=class yf{constructor(l,h,p,m){oe(this,"id");oe(this,"leftSE");oe(this,"rightSE");oe(this,"rings");oe(this,"windings");oe(this,"ringOut");oe(this,"consumedBy");oe(this,"prev");oe(this,"_prevInResult");oe(this,"_beforeState");oe(this,"_afterState");oe(this,"_isInResult");this.id=++_d,this.leftSE=l,l.segment=this,l.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=l,this.rings=p,this.windings=m}static compare(l,h){let p=l.leftSE.point.x,m=h.leftSE.point.x,C=l.rightSE.point.x,x=h.rightSE.point.x;if(x.isLessThan(p))return 1;if(C.isLessThan(m))return-1;let b=l.leftSE.point.y,M=h.leftSE.point.y,A=l.rightSE.point.y,q=h.rightSE.point.y;if(p.isLessThan(m)){if(M.isLessThan(b)&&M.isLessThan(A))return 1;if(M.isGreaterThan(b)&&M.isGreaterThan(A))return-1;let U=l.comparePoint(h.leftSE.point);if(U<0)return 1;if(U>0)return-1;let ct=h.comparePoint(l.rightSE.point);return ct!==0?ct:-1}if(p.isGreaterThan(m)){if(b.isLessThan(M)&&b.isLessThan(q))return-1;if(b.isGreaterThan(M)&&b.isGreaterThan(q))return 1;let U=h.comparePoint(l.leftSE.point);if(U!==0)return U;let ct=l.comparePoint(h.rightSE.point);return ct<0?1:ct>0?-1:1}if(b.isLessThan(M))return-1;if(b.isGreaterThan(M))return 1;if(C.isLessThan(x)){let U=h.comparePoint(l.rightSE.point);if(U!==0)return U}if(C.isGreaterThan(x)){let U=l.comparePoint(h.rightSE.point);if(U<0)return 1;if(U>0)return-1}if(!C.eq(x)){let U=A.minus(b),ct=C.minus(p),ft=q.minus(M),It=x.minus(m);if(U.isGreaterThan(ct)&&ft.isLessThan(It))return 1;if(U.isLessThan(ct)&&ft.isGreaterThan(It))return-1}return C.isGreaterThan(x)?1:C.isLessThan(x)||A.isLessThan(q)?-1:A.isGreaterThan(q)?1:l.id<h.id?-1:l.id>h.id?1:0}static fromRing(l,h,p){let m,C,x,b=Zi.comparePoints(l,h);if(b<0)m=l,C=h,x=1;else if(b>0)m=h,C=l,x=-1;else throw new Error(`Tried to create degenerate segment at [${l.x}, ${l.y}]`);let M=new Zi(m,!0),A=new Zi(C,!1);return new yf(M,A,[p],[x])}replaceRightSE(l){this.rightSE=l,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let l=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:l.isLessThan(h)?l:h},ur:{x:this.rightSE.point.x,y:l.isGreaterThan(h)?l:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(l){return l.x.eq(this.leftSE.point.x)&&l.y.eq(this.leftSE.point.y)||l.x.eq(this.rightSE.point.x)&&l.y.eq(this.rightSE.point.y)}comparePoint(l){return xn.orient(this.leftSE.point,l,this.rightSE.point)}getIntersection(l){let h=this.bbox(),p=l.bbox(),m=cc(h,p);if(m===null)return null;let C=this.leftSE.point,x=this.rightSE.point,b=l.leftSE.point,M=l.rightSE.point,A=Hi(h,b)&&this.comparePoint(b)===0,q=Hi(p,C)&&l.comparePoint(C)===0,U=Hi(h,M)&&this.comparePoint(M)===0,ct=Hi(p,x)&&l.comparePoint(x)===0;if(q&&A)return ct&&!U?x:!ct&&U?M:null;if(q)return U&&C.x.eq(M.x)&&C.y.eq(M.y)?null:C;if(A)return ct&&x.x.eq(b.x)&&x.y.eq(b.y)?null:b;if(ct&&U)return null;if(ct)return x;if(U)return M;let ft=md(C,this.vector(),b,l.vector());return ft===null||!Hi(m,ft)?null:xn.snap(ft)}split(l){let h=[],p=l.events!==void 0,m=new Zi(l,!0),C=new Zi(l,!1),x=this.rightSE;this.replaceRightSE(C),h.push(C),h.push(m);let b=new yf(m,x,this.rings.slice(),this.windings.slice());return Zi.comparePoints(b.leftSE.point,b.rightSE.point)>0&&b.swapEvents(),Zi.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),p&&(m.checkForConsuming(),C.checkForConsuming()),h}swapEvents(){let l=this.rightSE;this.rightSE=this.leftSE,this.leftSE=l,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,p=this.windings.length;h<p;h++)this.windings[h]*=-1}consume(l){let h=this,p=l;for(;h.consumedBy;)h=h.consumedBy;for(;p.consumedBy;)p=p.consumedBy;let m=yf.compare(h,p);if(m!==0){if(m>0){let C=h;h=p,p=C}if(h.prev===p){let C=h;h=p,p=C}for(let C=0,x=p.rings.length;C<x;C++){let b=p.rings[C],M=p.windings[C],A=h.rings.indexOf(b);A===-1?(h.rings.push(b),h.windings.push(M)):h.windings[A]+=M}p.rings=null,p.windings=null,p.consumedBy=h,p.leftSE.consumedBy=h.leftSE,p.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let l=this.prev.consumedBy||this.prev;this._beforeState=l.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let l=this.beforeState();this._afterState={rings:l.rings.slice(0),windings:l.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,p=this._afterState.windings,m=this._afterState.multiPolys;for(let b=0,M=this.rings.length;b<M;b++){let A=this.rings[b],q=this.windings[b],U=h.indexOf(A);U===-1?(h.push(A),p.push(q)):p[U]+=q}let C=[],x=[];for(let b=0,M=h.length;b<M;b++){if(p[b]===0)continue;let A=h[b],q=A.poly;if(x.indexOf(q)===-1)if(A.isExterior)C.push(q);else{x.indexOf(q)===-1&&x.push(q);let U=C.indexOf(A.poly);U!==-1&&C.splice(U,1)}}for(let b=0,M=C.length;b<M;b++){let A=C[b].multiPoly;m.indexOf(A)===-1&&m.push(A)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let l=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(Zh.type){case"union":{let p=l.length===0,m=h.length===0;this._isInResult=p!==m;break}case"intersection":{let p,m;l.length<h.length?(p=l.length,m=h.length):(p=h.length,m=l.length),this._isInResult=m===Zh.numMultiPolys&&p<m;break}case"xor":{let p=Math.abs(l.length-h.length);this._isInResult=p%2===1;break}case"difference":{let p=m=>m.length===1&&m[0].isSubject;this._isInResult=p(l)!==p(h);break}}return this._isInResult}},hc=class{constructor(a,l,h){oe(this,"poly");oe(this,"isExterior");oe(this,"segments");oe(this,"bbox");if(!Array.isArray(a)||a.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=l,this.isExterior=h,this.segments=[],typeof a[0][0]!="number"||typeof a[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let p=xn.snap({x:new D(a[0][0]),y:new D(a[0][1])});this.bbox={ll:{x:p.x,y:p.y},ur:{x:p.x,y:p.y}};let m=p;for(let C=1,x=a.length;C<x;C++){if(typeof a[C][0]!="number"||typeof a[C][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=xn.snap({x:new D(a[C][0]),y:new D(a[C][1])});b.x.eq(m.x)&&b.y.eq(m.y)||(this.segments.push(Jo.fromRing(m,b,this)),b.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=b.x),b.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=b.y),b.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=b.x),b.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=b.y),m=b)}(!p.x.eq(m.x)||!p.y.eq(m.y))&&this.segments.push(Jo.fromRing(m,p,this))}getSweepEvents(){let a=[];for(let l=0,h=this.segments.length;l<h;l++){let p=this.segments[l];a.push(p.leftSE),a.push(p.rightSE)}return a}},yd=class{constructor(a,l){oe(this,"multiPoly");oe(this,"exteriorRing");oe(this,"interiorRings");oe(this,"bbox");if(!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new hc(a[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,p=a.length;h<p;h++){let m=new hc(a[h],this,!1);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.interiorRings.push(m)}this.multiPoly=l}getSweepEvents(){let a=this.exteriorRing.getSweepEvents();for(let l=0,h=this.interiorRings.length;l<h;l++){let p=this.interiorRings[l].getSweepEvents();for(let m=0,C=p.length;m<C;m++)a.push(p[m])}return a}},um=class{constructor(a,l){oe(this,"isSubject");oe(this,"polys");oe(this,"bbox");if(!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof a[0][0][0]=="number"&&(a=[a])}catch{}this.polys=[],this.bbox={ll:{x:new D(Number.POSITIVE_INFINITY),y:new D(Number.POSITIVE_INFINITY)},ur:{x:new D(Number.NEGATIVE_INFINITY),y:new D(Number.NEGATIVE_INFINITY)}};for(let h=0,p=a.length;h<p;h++){let m=new yd(a[h],this);m.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=m.bbox.ll.x),m.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=m.bbox.ll.y),m.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=m.bbox.ur.x),m.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=m.bbox.ur.y),this.polys.push(m)}this.isSubject=l}getSweepEvents(){let a=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getSweepEvents();for(let m=0,C=p.length;m<C;m++)a.push(p[m])}return a}},Qv=class dg{constructor(l){oe(this,"events");oe(this,"poly");oe(this,"_isExteriorRing");oe(this,"_enclosingRing");this.events=l;for(let h=0,p=l.length;h<p;h++)l[h].segment.ringOut=this;this.poly=null}static factory(l){let h=[];for(let p=0,m=l.length;p<m;p++){let C=l[p];if(!C.isInResult()||C.ringOut)continue;let x=null,b=C.leftSE,M=C.rightSE,A=[b],q=b.point,U=[];for(;x=b,b=M,A.push(b),b.point!==q;)for(;;){let ct=b.getAvailableLinkedEvents();if(ct.length===0){let Vt=A[0].point,Wt=A[A.length-1].point;throw new Error(`Unable to complete output ring starting at [${Vt.x}, ${Vt.y}]. Last matching segment found ends at [${Wt.x}, ${Wt.y}].`)}if(ct.length===1){M=ct[0].otherSE;break}let ft=null;for(let Vt=0,Wt=U.length;Vt<Wt;Vt++)if(U[Vt].point===b.point){ft=Vt;break}if(ft!==null){let Vt=U.splice(ft)[0],Wt=A.splice(Vt.index);Wt.unshift(Wt[0].otherSE),h.push(new dg(Wt.reverse()));continue}U.push({index:A.length,point:b.point});let It=b.getLeftmostComparator(x);M=ct.sort(It)[0].otherSE;break}h.push(new dg(A))}return h}getGeom(){let l=this.events[0].point,h=[l];for(let A=1,q=this.events.length-1;A<q;A++){let U=this.events[A].point,ct=this.events[A+1].point;xn.orient(U,l,ct)!==0&&(h.push(U),l=U)}if(h.length===1)return null;let p=h[0],m=h[1];xn.orient(p,l,m)===0&&h.shift(),h.push(h[0]);let C=this.isExteriorRing()?1:-1,x=this.isExteriorRing()?0:h.length-1,b=this.isExteriorRing()?h.length:-1,M=[];for(let A=x;A!=b;A+=C)M.push([h[A].x.toNumber(),h[A].y.toNumber()]);return M}isExteriorRing(){if(this._isExteriorRing===void 0){let l=this.enclosingRing();this._isExteriorRing=l?!l.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var m,C;let l=this.events[0];for(let x=1,b=this.events.length;x<b;x++){let M=this.events[x];Zi.compare(l,M)>0&&(l=M)}let h=l.segment.prevInResult(),p=h?h.prevInResult():null;for(;;){if(!h)return null;if(!p)return h.ringOut;if(p.ringOut!==h.ringOut)return((m=p.ringOut)==null?void 0:m.enclosingRing())!==h.ringOut?h.ringOut:(C=h.ringOut)==null?void 0:C.enclosingRing();h=p.prevInResult(),p=h?h.prevInResult():null}}},lm=class{constructor(a){oe(this,"exteriorRing");oe(this,"interiorRings");this.exteriorRing=a,a.poly=this,this.interiorRings=[]}addInterior(a){this.interiorRings.push(a),a.poly=this}getGeom(){let a=this.exteriorRing.getGeom();if(a===null)return null;let l=[a];for(let h=0,p=this.interiorRings.length;h<p;h++){let m=this.interiorRings[h].getGeom();m!==null&&l.push(m)}return l}},$v=class{constructor(a){oe(this,"rings");oe(this,"polys");this.rings=a,this.polys=this._composePolys(a)}getGeom(){let a=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getGeom();p!==null&&a.push(p)}return a}_composePolys(a){var h;let l=[];for(let p=0,m=a.length;p<m;p++){let C=a[p];if(!C.poly)if(C.isExteriorRing())l.push(new lm(C));else{let x=C.enclosingRing();x!=null&&x.poly||l.push(new lm(x)),(h=x==null?void 0:x.poly)==null||h.addInterior(C)}}return l}},tC=class{constructor(a,l=Jo.compare){oe(this,"queue");oe(this,"tree");oe(this,"segments");this.queue=a,this.tree=new St(l),this.segments=[]}process(a){let l=a.segment,h=[];if(a.consumedBy)return a.isLeft?this.queue.delete(a.otherSE):this.tree.delete(l),h;a.isLeft&&this.tree.add(l);let p=l,m=l;do p=this.tree.lastBefore(p);while(p!=null&&p.consumedBy!=null);do m=this.tree.firstAfter(m);while(m!=null&&m.consumedBy!=null);if(a.isLeft){let C=null;if(p){let b=p.getIntersection(l);if(b!==null&&(l.isAnEndpoint(b)||(C=b),!p.isAnEndpoint(b))){let M=this._splitSafely(p,b);for(let A=0,q=M.length;A<q;A++)h.push(M[A])}}let x=null;if(m){let b=m.getIntersection(l);if(b!==null&&(l.isAnEndpoint(b)||(x=b),!m.isAnEndpoint(b))){let M=this._splitSafely(m,b);for(let A=0,q=M.length;A<q;A++)h.push(M[A])}}if(C!==null||x!==null){let b=null;C===null?b=x:x===null?b=C:b=Zi.comparePoints(C,x)<=0?C:x,this.queue.delete(l.rightSE),h.push(l.rightSE);let M=l.split(b);for(let A=0,q=M.length;A<q;A++)h.push(M[A])}h.length>0?(this.tree.delete(l),h.push(a)):(this.segments.push(l),l.prev=p)}else{if(p&&m){let C=p.getIntersection(m);if(C!==null){if(!p.isAnEndpoint(C)){let x=this._splitSafely(p,C);for(let b=0,M=x.length;b<M;b++)h.push(x[b])}if(!m.isAnEndpoint(C)){let x=this._splitSafely(m,C);for(let b=0,M=x.length;b<M;b++)h.push(x[b])}}}this.tree.delete(l)}return h}_splitSafely(a,l){this.tree.delete(a);let h=a.rightSE;this.queue.delete(h);let p=a.split(l);return p.push(h),a.consumedBy===void 0&&this.tree.add(a),p}},eC=class{constructor(){oe(this,"type");oe(this,"numMultiPolys")}run(a,l,h){fc.type=a;let p=[new um(l,!0)];for(let M=0,A=h.length;M<A;M++)p.push(new um(h[M],!1));if(fc.numMultiPolys=p.length,fc.type==="difference"){let M=p[0],A=1;for(;A<p.length;)cc(p[A].bbox,M.bbox)!==null?A++:p.splice(A,1)}if(fc.type==="intersection")for(let M=0,A=p.length;M<A;M++){let q=p[M];for(let U=M+1,ct=p.length;U<ct;U++)if(cc(q.bbox,p[U].bbox)===null)return[]}let m=new St(Zi.compare);for(let M=0,A=p.length;M<A;M++){let q=p[M].getSweepEvents();for(let U=0,ct=q.length;U<ct;U++)m.add(q[U])}let C=new tC(m),x=null;for(m.size!=0&&(x=m.first(),m.delete(x));x;){let M=C.process(x);for(let A=0,q=M.length;A<q;A++){let U=M[A];U.consumedBy===void 0&&m.add(U)}m.size!=0?(x=m.first(),m.delete(x)):x=null}xn.reset();let b=Qv.factory(C.segments);return new $v(b).getGeom()}},fc=new eC,Zh=fc,nC=(a,...l)=>Zh.run("intersection",a,l),rC=(a,...l)=>Zh.run("difference",a,l);xn.set;function Kh(a){let l={type:"Feature"};return l.geometry=a,l}function Xh(a){return a.type==="Feature"?a.geometry:a}function cm(a){return a&&a.geometry&&a.geometry.coordinates?a.geometry.coordinates:a}function iC(a){return Kh({type:"LineString",coordinates:a})}function sC(a){return Kh({type:"MultiLineString",coordinates:a})}function hm(a){return Kh({type:"Polygon",coordinates:a})}function fm(a){return Kh({type:"MultiPolygon",coordinates:a})}function oC(a,l){let h=Xh(a),p=Xh(l),m=nC(h.coordinates,p.coordinates);return m.length===0?null:m.length===1?hm(m[0]):fm(m)}function aC(a,l){let h=Xh(a),p=Xh(l),m=rC(h.coordinates,p.coordinates);return m.length===0?null:m.length===1?hm(m[0]):fm(m)}function pm(a){return Array.isArray(a)?1+pm(a[0]):-1}function uC(a){a instanceof L.Polyline&&(a=a.toGeoJSON(15));let l=cm(a),h=pm(l),p=[];return h>1?l.forEach(m=>{p.push(iC(m))}):p.push(a),p}function lC(a){let l=[];return a.eachLayer(h=>{l.push(cm(h.toGeoJSON(15)))}),sC(l)}nr.Cut=nr.Polygon.extend({initialize(a){this._map=a,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let a=this._layer.getLatLngs();if(a.length<=2)return;let l=L.polygon(a,this.options.pathOptions);l._latlngInfos=this._layer._latlngInfo,this.cut(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:p,originalLayer:m})=>{this._fireCut(m,p,m),this._fireCut(this._map,p,m),m.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(a){let l=this._map._layers,h=a._latlngInfos||[];Object.keys(l).map(p=>l[p]).filter(p=>p.pm).filter(p=>!p._pmTempLayer).filter(p=>!L.PM.optIn&&!p.options.pmIgnore||L.PM.optIn&&p.options.pmIgnore===!1).filter(p=>p instanceof L.Polyline).filter(p=>p!==a).filter(p=>p.pm.options.allowCutting).filter(p=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(p)>-1:!0).filter(p=>!this._layerGroup.hasLayer(p)).filter(p=>{try{let m=!!ji(a.toGeoJSON(15),p.toGeoJSON(15)).features.length>0;return m||p instanceof L.Polyline&&!(p instanceof L.Polygon)?m:!!oC(a.toGeoJSON(15),p.toGeoJSON(15))}catch{return p instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(p=>{let m;if(p instanceof L.Polygon){m=L.polygon(p.getLatLngs());let M=m.getLatLngs();h.forEach(A=>{if(A&&A.snapInfo){let{latlng:q}=A,U=this._calcClosestLayer(q,[m]);if(U&&U.segment&&U.distance<this.options.snapDistance){let{segment:ct}=U;if(ct&&ct.length===2){let{indexPath:ft,parentPath:It,newIndex:Vt}=L.PM.Utils._getIndexFromSegment(M,ct);(ft.length>1?(0,ms.default)(M,It):M).splice(Vt,0,q)}}}})}else m=p;let C=this._cutLayer(a,m),x=L.geoJSON(C,p.options);x.getLayers().length===1&&([x]=x.getLayers()),this._setPane(x,"layerPane");let b=x.addTo(this._map.pm._getContainingLayer());if(b.pm.enable(p.pm.options),b.pm.disable(),p._pmTempLayer=!0,a._pmTempLayer=!0,p.remove(),p.removeFrom(this._map.pm._getContainingLayer()),a.remove(),a.removeFrom(this._map.pm._getContainingLayer()),b.getLayers&&b.getLayers().length===0&&this._map.pm.removeLayer({target:b}),b instanceof L.LayerGroup?(b.eachLayer(M=>{this._addDrawnLayerProp(M)}),this._addDrawnLayerProp(b)):this._addDrawnLayerProp(b),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let M=this.options.layersToCut.indexOf(p);M>-1&&this.options.layersToCut.splice(M,1)}this._editedLayers.push({layer:b,originalLayer:p})})},_cutLayer(a,l){let h=L.geoJSON(),p;if(l instanceof L.Polygon)p=aC(l.toGeoJSON(15),a.toGeoJSON(15));else{let m=uC(l);m.forEach(C=>{let x=ad(C,a.toGeoJSON(15)),b;x&&x.features.length>0?b=L.geoJSON(x):b=L.geoJSON(C),b.getLayers().forEach(M=>{ld(a.toGeoJSON(15),M.toGeoJSON(15))||M.addTo(h)})}),m.length>1?p=lC(h):p=h.toGeoJSON(15)}return p},_change:L.Util.falseFn}),nr.Text=nr.extend({initialize(a){this._map=a,this._shape="Text",this.toolbarButtonName="drawText"},enable(a){L.Util.setOptions(this,a),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ve("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var a;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(a=this._hintMarker)==null||a.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(a){this.enabled()?this.disable():this.enable(a)},_syncHintMarker(a){if(this._hintMarker.setLatLng(a.latlng),this.options.snappable){let l=a;l.target=this._hintMarker,this._handleSnapping(l)}},_createMarker(a){var m,C,x,b;if(!a.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(a.latlng);let l=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(m=this.options.textOptions)==null?void 0:m.className){let M=this.options.textOptions.className.split(" ");this.textArea.classList.add(...M)}let h=this._createTextIcon(this.textArea),p=new L.Marker(l,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(p,"markerPane"),this._finishLayer(p),p.pm||(p.options.draggable=!1),p.addTo(this._map.pm._getContainingLayer()),p.pm){p.pm.textArea=this.textArea,L.setOptions(p.pm,{removeIfEmpty:((C=this.options.textOptions)==null?void 0:C.removeIfEmpty)??!0});let M=((x=this.options.textOptions)==null?void 0:x.focusAfterDraw)??!0;p.pm._createTextMarker(M),(b=this.options.textOptions)!=null&&b.text&&p.pm.setText(this.options.textOptions.text)}this._fireCreate(p),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(a){this.enable(),this._hintMarker.setLatLng(a.latlng)},_createTextArea(){let a=document.createElement("textarea");return a.readOnly=!0,a.classList.add("pm-textarea","pm-disabled"),a},_createTextIcon(a){return L.divIcon({className:"pm-text-marker",html:a})}});var cC={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Cr(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let a=this._getDOMElem();a&&(Cr(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(a)):L.DomEvent.on(a,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Cr(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let a=this._getDOMElem();a&&(Cr(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(a)):L.DomEvent.off(a,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(a){let l=a.touches?a.touches[0]:a,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(a){let l=a.touches?a.touches[0]:a,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(a){let l={originalEvent:a.touches?a.touches[0]:a,target:this._layer};return a.type.indexOf("touch")===-1&&(l.containerPoint=this._map.mouseEventToContainerPoint(a),l.latlng=this._map.containerPointToLatLng(l.containerPoint)),this._dragMixinOnMouseUp(l),!1},_dragMixinOnMouseDown(a){if(a.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(a);let l=a._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",a);if(this._layer instanceof L.Marker&&(this.options.snappable&&!l&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let p="resizeableCircleMarker";this._layer instanceof L.Circle&&(p="resizeableCircle"),this.options.snappable&&!l&&!h?this._layer.pm.options[p]||this._initSnappableMarkersDrag():this._layer.pm.options[p]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=a.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(a){this._overwriteEventIfItComesFromMarker(a);let l=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",a),this._dragging||(this._dragging=!0,L.DomUtil.addClass(l,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=a.latlng),this._onLayerDrag(a),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(a){let l=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",a),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,l&&L.DomUtil.removeClass(l,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(a){let{latlng:l}=a,h={lat:l.lat-this._tempDragCoord.lat,lng:l.lng-this._tempDragCoord.lng},p=m=>m.map(C=>{if(Array.isArray(C))return p(C);let x={lat:C.lat+h.lat,lng:C.lng+h.lng};return(C.alt||C.alt===0)&&(x.alt=C.alt),x});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let m=p([this._layer.getLatLng()]);this._layer.setLatLng(m[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let m=this._layer.getLatLng();this._layer._snapped&&(m=this._layer._orgLatLng);let C=p([m]);this._layer.setLatLng(C[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let m=p([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(m),this._fireChange(this._layer.getBounds(),"Edit")}else{let m=p(this._layer.getLatLngs());this._layer.setLatLngs(m),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=l,a.layer=this._layer,this._fireDrag(a)},addDraggingClass(){let a=this._getDOMElem();a&&L.DomUtil.addClass(a,"leaflet-pm-draggable")},removeDraggingClass(){let a=this._getDOMElem();a&&L.DomUtil.removeClass(a,"leaflet-pm-draggable")},_getDOMElem(){let a=null;return this._layer._path?a=this._layer._path:this._layer._renderer&&this._layer._renderer._container?a=this._layer._renderer._container:this._layer._image?a=this._layer._image:this._layer._icon&&(a=this._layer._icon),a},_overwriteEventIfItComesFromMarker(a){a.target.getLatLng&&(!a.target._radius||a.target._radius<=10)&&(a.containerPoint=this._map.mouseEventToContainerPoint(a.originalEvent),a.latlng=this._map.containerPointToLatLng(a.containerPoint))},_syncLayers(a,l){if(this.enabled())return!1;if(!l._fromLayerSync&&this._layer===l.target&&this.options.syncLayersOnDrag){l._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(p=>{p instanceof L.LayerGroup&&(h=h.concat(p.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let p in this._parentLayerGroup){let m=this._parentLayerGroup[p];m.pm&&(h=m.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(p=>!!p.pm).filter(p=>!!p.pm.options.draggable),h.forEach(p=>{p!==this._layer&&p.pm[a]&&(p._snapped=!1,p.pm[a](l))})),h.length>0}return!1},_stopDOMImageDrag(a){return a.preventDefault(),!1}},hC=cC,fC=d(Os());function pC(a,l,h,p){return h.unproject(l.transform(h.project(a,p)),p)}function dm(a,l,h){let p=h.getMaxZoom();if(p===1/0&&(p=h.getZoom()),L.Util.isArray(a)){let m=[];return a.forEach(C=>{m.push(dm(C,l,h))}),m}return a instanceof L.LatLng?pC(a,l,h,p):null}function Hu(a,l){l instanceof L.Layer&&(l=l.getLatLng());let h=a.getMaxZoom();return h===1/0&&(h=a.getZoom()),a.project(l,h)}function Yh(a,l){let h=a.getMaxZoom();return h===1/0&&(h=a.getZoom()),a.unproject(l,h)}var dC={_onRotateStart(a){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Hu(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Hu(this._map,a.target.getLatLng()),this._initialRotateLatLng=Ui(this._layer),this._startAngle=this.getAngle();let l=Ui(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,l),this._fireRotationStart(this._map,l)},_onRotate(a){let l=Hu(this._map,a.target.getLatLng()),h=this._rotationStartPoint,p=this._rotationOriginPoint,m=Math.atan2(l.y-p.y,l.x-p.x)-Math.atan2(h.y-p.y,h.x-p.x);this._layer.setLatLngs(this._rotateLayer(m,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let C=this;function x(q,U=[],ct=-1){if(ct>-1&&U.push(ct),L.Util.isArray(q[0]))q.forEach((ft,It)=>x(ft,U.slice(),It));else{let ft=U.length>0?(0,fC.default)(C._markers,U):C._markers[0];q.forEach((It,Vt)=>{ft[Vt].setLatLng(It)})}}x(this._layer.getLatLngs());let b=Ui(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(m,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let M=m*180/Math.PI;M=M<0?M+360:M;let A=M+this._startAngle;this._setAngle(A),this._rotationLayer.pm._setAngle(A),this._fireRotation(this._rotationLayer,M,b),this._fireRotation(this._map,M,b),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let a=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let l=Ui(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Ui(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,a,l),this._fireRotationEnd(this._map,a,l),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(a,l,h,p,m){let C=Hu(m,h);return this._matrix=p.clone().rotate(a,C).flip(),dm(l,this._matrix,m)},_setAngle(a){a=a<0?a+360:a,this._angle=a%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let a=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),l=a.getCenter();return a.removeFrom(this._layer._map),l},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Su(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let a={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),a),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Ui(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(a){let l=this.getAngle(),h=this._layer.getLatLngs(),p=a*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(p,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+a),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(p,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let m=this.getAngle()-l;m=m<0?m+360:m,this._startAngle=l,this._fireRotation(this._layer,m,h,this._layer),this._fireRotation(this._map||this._layer._map,m,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(a){let l=a-this.getAngle();this.rotateLayer(l)},getAngle(){return this._angle||0},setInitAngle(a){this._setAngle(a)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(a){this._rotationCenter=a,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(a)}},gC=dC,mC=L.Class.extend({includes:[hC,tc,gC,bu],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(a){L.Util.setOptions(this,a)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(a,l){l==="layerPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(a.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(a,l){let h=l.target,p={layer:this._layer,marker:h,event:l},m="";return a==="move"?m="moveVertexValidation":a==="add"?m="addVertexValidation":a==="remove"&&(m="removeVertexValidation"),this.options[m]&&typeof this.options[m]=="function"&&!this.options[m](p)?(a==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(a){return a._cancelDragEventChain?(a._latlng=a._cancelDragEventChain,a.update(),!1):!0},_vertexValidationDragEnd(a){return a._cancelDragEventChain?(a._cancelDragEventChain=null,!1):!0}}),cr=mC;cr.LayerGroup=L.Class.extend({initialize(a){this._layerGroup=a,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(p=>this._initLayer(p));let l=p=>{if(p.layer._pmTempLayer)return;this._layers=this.getLayers();let m=this._layers.filter(C=>!C.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in C.pm._parentLayerGroup));m.forEach(C=>{this._initLayer(C)}),m.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(l,100,this),this),this._layerGroup.on("layerremove",p=>{this._removeLayerFromGroup(p.target)},this);let h=p=>{p.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(a,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=a,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.enable(a,l)):h.pm.enable(a)})},disable(a=[]){a.length===0&&(this._layers=this.getLayers()),this._layers.forEach(l=>{l instanceof L.LayerGroup?a.indexOf(l._leaflet_id)===-1&&(a.push(l._leaflet_id),l.pm.disable(a)):l.pm.disable()})},enabled(a=[]){return a.length===0&&(this._layers=this.getLayers()),!!this._layers.find(l=>l instanceof L.LayerGroup?a.indexOf(l._leaflet_id)===-1?(a.push(l._leaflet_id),l.pm.enabled(a)):!1:l.pm.enabled())},toggleEdit(a,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=a,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.toggleEdit(a,l)):h.pm.toggleEdit(a)})},_initLayer(a){let l=L.Util.stamp(this._layerGroup);a.pm._parentLayerGroup||(a.pm._parentLayerGroup={}),a.pm._parentLayerGroup[l]=this._layerGroup},_removeLayerFromGroup(a){if(a.pm&&a.pm._layerGroup){let l=L.Util.stamp(this._layerGroup);delete a.pm._layerGroup[l]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(a=>a.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var a;return this._map||((a=this._layers.find(l=>!!l._map))==null?void 0:a._map)||null},getLayers(a=!1,l=!0,h=!0,p=[]){let m=[];return a?this._layerGroup.getLayers().forEach(C=>{m.push(C),C instanceof L.LayerGroup&&p.indexOf(C._leaflet_id)===-1&&(p.push(C._leaflet_id),m=m.concat(C.pm.getLayers(!0,!0,!0,p)))}):m=this._layerGroup.getLayers(),h&&(m=m.filter(C=>!(C instanceof L.LayerGroup))),l&&(m=m.filter(C=>!!C.pm),m=m.filter(C=>!C._pmTempLayer),m=m.filter(C=>!L.PM.optIn&&!C.options.pmIgnore||L.PM.optIn&&C.options.pmIgnore===!1)),m},setOptions(a,l=[]){l.length===0&&(this._layers=this.getLayers()),this.options=a,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.setOptions(a,l)):h.pm.setOptions(a))})}}),cr.Marker=cr.extend({_shape:"Marker",initialize(a){this._layer=a,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(a={draggable:!0}){if(L.Util.setOptions(this,a),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(a){let l=a.target;l.remove(),this._fireRemove(l),this._fireRemove(this._map,l)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let a=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,a.off("pm:drag",this._handleSnapping,this),a.on("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.on("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this),a.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let a=this._layer;a.off("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this)}});var Qo=d(Os()),_C={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let a=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=a.filter((l,h,p)=>p.indexOf(l)===h)},_removeFromCache(a){let l=this.markerCache.indexOf(a);l>-1&&this.markerCache.splice(l,1)},renderLimits(a){this.markerCache.forEach(l=>{a.includes(l)?this._markerGroup.addLayer(l):this._markerGroup.removeLayer(l)})},applyLimitFilters({latlng:a={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let l=[...this._filterClosestMarkers(a)];this.renderLimits(l)},_filterClosestMarkers(a){let l=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?l:(l.sort((p,m)=>{let C=p._latlng.distanceTo(a),x=m._latlng.distanceTo(a);return C-x}),l.filter((p,m)=>h>-1?m<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(a){this._preventRenderMarkers=!!a}},yC=_C;cr.Line=cr.extend({includes:[yC],_shape:"Line",initialize(a){this._layer=a,this._enabled=!1},enable(a){if(L.Util.setOptions(this,a),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let a=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(a,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(a){return this.enabled()?this.disable():this.enable(a),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let a=this._map,l=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(a),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=p=>{if(Array.isArray(p[0]))return p.map(h,this);let m=p.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&p.map((C,x)=>{let b=this.isPolygon()?(x+1)%p.length:x+1;return this._createMiddleMarker(m[x],m[b])}),m};this._markers=h(l),this.filterMarkerGroup(),a.addLayer(this._markerGroup)},_createMarker(a){let l=new L.Marker(a,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this.options.rotate?(l.on("dragstart",this._onRotateStart,this),l.on("drag",this._onRotate,this),l.on("dragend",this._onRotateEnd,this)):(l.on("click",this._onVertexClick,this),l.on("dragstart",this._onMarkerDragStart,this),l.on("move",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(l),l},_createMiddleMarker(a,l){if(!a||!l)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,a.getLatLng(),l.getLatLng()),p=this._createMarker(h),m=L.divIcon({className:"marker-icon marker-icon-middle"});return p.setIcon(m),p.leftM=a,p.rightM=l,a._middleMarkerNext=p,l._middleMarkerPrev=p,p.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),p.on("movestart",this._onMiddleMarkerMoveStart,this),p},_onMiddleMarkerClick(a){let l=a.target;if(!this._vertexValidation("add",a))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMoveStart(a){let l=a.target;if(l.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",a)){l.on("move",this._onMiddleMarkerMovePrevent,this);return}l._dragging=!0,this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMovePrevent(a){let l=a.target;this._vertexValidationDrag(l)},_onMiddleMarkerMoveEnd(a){let l=a.target;if(l.off("move",this._onMiddleMarkerMovePrevent,this),l.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(l))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),setTimeout(()=>{delete l._dragging},100)},_addMarker(a,l,h){a.off("movestart",this._onMiddleMarkerMoveStart,this),a.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let p=a.getLatLng(),m=this._layer._latlngs;delete a.leftM,delete a.rightM;let{indexPath:C,index:x,parentPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),M=C.length>1?(0,Qo.default)(m,b):m,A=C.length>1?(0,Qo.default)(this._markers,b):this._markers;M.splice(x+1,0,p),A.splice(x+1,0,a),this._layer.setLatLngs(m),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(l,a),this._createMiddleMarker(a,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(a,L.PM.Utils.findDeepMarkerIndex(this._markers,a).indexPath,p),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Pu(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(a){let l=this._layer,h,p;if(this.options.allowSelfIntersection?h=!1:(p=Pu(this._layer.toGeoJSON(15)),h=p.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;a?this._flashLayer():(l.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(p)}else l.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(a,l){a.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,l):h._icon&&(l&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(a){let l=a.target;if(!this._vertexValidation("remove",a))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ui(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:p,index:m,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!p)return;let x=p.length>1?(0,Qo.default)(h,C):h,b=p.length>1?(0,Qo.default)(this._markers,C):this._markers,M=C[C.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!M&&(x.length<=2||this.isPolygon()&&x.length<=3)){this._flashLayer();return}x.splice(m,1),this._layer.setLatLngs(h),this.isPolygon()&&x.length<=2&&x.splice(0,x.length);let A=!1;if(x.length<=1&&(x.splice(0,x.length),C.length>1&&p.length>1&&(h=Aa(h)),this._layer.setLatLngs(h),this._initMarkers(),A=!0),yo(h)||this._layer.remove(),h=Aa(h),this._layer.setLatLngs(h),this._markers=Aa(this._markers),!A&&(b=p.length>1?(0,Qo.default)(this._markers,C):this._markers,l._middleMarkerPrev&&(this._markerGroup.removeLayer(l._middleMarkerPrev),this._removeFromCache(l._middleMarkerPrev)),l._middleMarkerNext&&(this._markerGroup.removeLayer(l._middleMarkerNext),this._removeFromCache(l._middleMarkerNext)),this._markerGroup.removeLayer(l),this._removeFromCache(l),b)){let q,U;if(this.isPolygon()?(q=(m+1)%b.length,U=(m+(b.length-1))%b.length):(U=m-1<0?void 0:m-1,q=m+1>=b.length?void 0:m+1),q!==U){let ct=b[U],ft=b[q];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(ct,ft)}b.splice(m,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(l,p),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(a){let l=this._layer.getLatLngs(),h=a.getLatLng(),{indexPath:p,index:m,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);(p.length>1?(0,Qo.default)(l,C):l).splice(m,1,h),this._layer.setLatLngs(l)},_getNeighborMarkers(a){let{indexPath:l,index:h,parentPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),m=l.length>1?(0,Qo.default)(this._markers,p):this._markers,C=(h+1)%m.length,x=(h+(m.length-1))%m.length,b=m[x],M=m[C];return{prevMarker:b,nextMarker:M}},_checkMarkerAllowedToDrag(a){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(a),p=L.polyline([l.getLatLng(),a.getLatLng()]),m=L.polyline([a.getLatLng(),h.getLatLng()]),C=ji(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,x=ji(this._layer.toGeoJSON(15),m.toGeoJSON(15)).features.length;return a.getLatLng()===this._markers[0][0].getLatLng()?x+=1:a.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(C+=1),!(C<=2&&x<=2)},_onMarkerDragStart(a){let l=a.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",a))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(a,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ui(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(l):this._markerAllowedToDrag=null},_onMarkerDrag(a){let l=a.target;if(!this._vertexValidationDrag(l))return;let{indexPath:h,index:p,parentPath:m}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(l);let C=h.length>1?(0,Qo.default)(this._markers,m):this._markers,x=(p+1)%C.length,b=(p+(C.length-1))%C.length,M=l.getLatLng(),A=C[b].getLatLng(),q=C[x].getLatLng();if(l._middleMarkerNext){let U=L.PM.Utils.calcMiddleLatLng(this._map,M,q);l._middleMarkerNext.setLatLng(U)}if(l._middleMarkerPrev){let U=L.PM.Utils.calcMiddleLatLng(this._map,M,A);l._middleMarkerPrev.setLatLng(U)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(a,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(a){let l=a.target;if(!this._vertexValidationDragEnd(l))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),p=!this.options.allowSelfIntersection&&this.hasSelfIntersection();p&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(p=!1);let m=!this.options.allowSelfIntersection&&p;if(this._fireMarkerDragEnd(a,h,m),m){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(a,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(a){let l=a.target;if(l._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireVertexClick(a,h)}}),cr.Polygon=cr.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(a){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(a),p=L.polyline([l.getLatLng(),a.getLatLng()]),m=L.polyline([a.getLatLng(),h.getLatLng()]),C=ji(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,x=ji(this._layer.toGeoJSON(15),m.toGeoJSON(15)).features.length;return!(C<=2&&x<=2)}}),cr.Rectangle=cr.Polygon.extend({_shape:"Rectangle",_initMarkers(){let a=this._map,l=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,a.addLayer(this._markerGroup),this._markers=[],this._markers[0]=l.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,p)=>{let m=this._cornerMarkers.find(C=>C._index===p);m&&m.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(a,l){let h=new L.Marker(a,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=a,h._index=l,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(a=>{a.on("dragstart",this._onMarkerDragStart,this),a.on("drag",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||a.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(a){if(!this._vertexValidation("move",a))return;let l=a.target,h=this._cornerMarkers;l._oppositeCornerLatLng=h.find(m=>m._index===(l._index+2)%4).getLatLng(),l._snapped=!1;let{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(a,p)},_onMarkerDrag(a){let l=a.target;if(!this._vertexValidationDrag(l)||l._index===void 0)return;this._adjustRectangleForMarkerMove(l);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDrag(a,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(a){let l=a.target;if(!this._vertexValidationDragEnd(l))return;this._cornerMarkers.forEach(p=>{delete p._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragEnd(a,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(a){L.extend(a._origLatLng,a._latlng);let l=L.PM.Utils._getRotatedRectangle(a.getLatLng(),a._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(l),this._adjustAllMarkers(a),this._layer.redraw()},_adjustAllMarkers(a){let l=this._layer.getLatLngs()[0];if(l&&l.length!==4&&l.length>0)l.forEach((h,p)=>{this._cornerMarkers[p].setLatLng(h)}),this._cornerMarkers.slice(l.length).forEach(h=>{h.setLatLng(l[0])});else if(!l||!l.length)console.error("The layer has no LatLngs");else{let h=l.findIndex(p=>a.getLatLng().equals(p));h>-1?(this._cornerMarkers[(a._index+1)%4].setLatLng(l[(h+1)%4]),this._cornerMarkers[(a._index+2)%4].setLatLng(l[(h+2)%4]),this._cornerMarkers[(a._index+3)%4].setLatLng(l[(h+3)%4])):this._cornerMarkers.forEach(p=>{p.setLatLng(l[p._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Su(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let a=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(a[0],a[2],this.getAngle(),this._map||this)}}),cr.CircleMarker=cr.extend({_shape:"CircleMarker",initialize(a){this._layer=a,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(a={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,a),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let a=this._map;this._helperLayers&&(this._helperLayers.removeFrom(a),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(a);let l=this._layer.getLatLng(),h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._centerMarker=this._createCenterMarker(l),this._outerMarker=this._createOuterMarker(p),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(a,l){let h=this._map.project(a),p=L.point(h.x+l,h.y);return this._map.unproject(p)},_createHintLine(a,l){let h=a.getLatLng(),p=l.getLatLng();this._hintline=L.polyline([h,p],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(a){let l=this._createMarker(a);return this.options.draggable?(L.DomUtil.addClass(l._icon,"leaflet-pm-draggable"),l.on("move",this._moveCircle,this)):l.dragging.disable(),l},_createOuterMarker(a){let l=this._createMarker(a);return l.on("drag",this._resizeCircle,this),l},_createMarker(a){let l=new L.Marker(a,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._origLatLng=a,l._pmTempLayer=!0,l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),l.on("click",this._onVertexClick,this),this._helperLayers.addLayer(l),l},_moveCircle(a){if(a.target._cancelDragEventChain)return;let l=this._centerMarker.getLatLng();this._layer.setLatLng(l);let h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._outerMarker._latlng=p,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let a=this._layer.getLatLng(),l=this._layer._radius,h=this._getLatLngOnCircle(a,l);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(a),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(a,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng();this._hintline.setLatLngs([a,l])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(a){this._vertexValidation("move",a)&&this._fireMarkerDragStart(a)},_onMarkerDrag(a){let l=a.target;l instanceof L.Marker&&!this._vertexValidationDrag(l)||this._fireMarkerDrag(a)},_onMarkerDragEnd(a){this._extedingMarkerDragEnd();let l=a.target;this._vertexValidationDragEnd(l)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(a))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let a=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,a.off("pm:drag",this._handleSnapping,this),a.on("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.on("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this),a.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let a=this._layer;a.off("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let a=this._layer._map||this._map;if(a){let l=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),a,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(l);let p=a&&a.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!p).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!p),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(a,l);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?l=Mu(this._map,a,l,this._getMinDistanceInMeter(a)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(l=Mu(this._map,a,l,this._getMaxDistanceInMeter(a))),l},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let a=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(a,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(a,l){return this._map.project(a).distanceTo(this._map.project(l))},_getMinDistanceInMeter(a){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,a)},_getMaxDistanceInMeter(a){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,a)},_onVertexClick(a){a.target._dragging||this._fireVertexClick(a,void 0)}}),cr.Circle=cr.CircleMarker.extend({_shape:"Circle",initialize(a){this._layer=a,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(a){L.PM.Edit.CircleMarker.prototype.enable.call(this,a||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let a=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(a,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let a=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!a).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!a),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(a,l){return this._map.distance(a,l)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(a){a.target._dragging||this._fireVertexClick(a,void 0)}}),cr.ImageOverlay=cr.extend({_shape:"ImageOverlay",initialize(a){this._layer=a,this._enabled=!1},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},enabled(){return this._enabled},enable(a={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,a),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let a=this._layer.getBounds(),l=a.getNorthWest(),h=a.getNorthEast(),p=a.getSouthEast(),m=a.getSouthWest();return[l,h,p,m]}}),cr.Text=cr.extend({_shape:"Text",initialize(a){this._layer=a,this._enabled=!1},enable(a){if(L.Util.setOptions(this,a),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let a=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),a.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(a){this.enabled()?this.disable():this.enable(a)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let a=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,a.off("pm:drag",this._handleSnapping,this),a.on("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.on("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this),a.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let a=this._layer;a.off("pm:drag",this._handleSnapping,this),a.off("pm:dragend",this._cleanupSnapping,this),a.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let a=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,l=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${a}px`,this.textArea.style.width=`${l}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(a){a.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(a={}){let l=this._hasFocus;this._hasFocus=a.type==="focus",!l!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(a){a&&(this.textArea.value=a),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let l=this.options.className.split(" ");this.textArea.classList.add(...l)}let a=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(a),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(a=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),a===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(a){a.preventDefault()}});var vd=function(a,l,h,p,m,C){this._matrix=[a,l,h,p,m,C]};vd.init=()=>new L.PM.Matrix(1,0,0,1,0,0),vd.prototype={transform(a){return this._transform(a.clone())},_transform(a){let l=this._matrix,{x:h,y:p}=a;return a.x=l[0]*h+l[1]*p+l[4],a.y=l[2]*h+l[3]*p+l[5],a},untransform(a){let l=this._matrix;return new L.Point((a.x/l[0]-l[4])/l[0],(a.y/l[2]-l[5])/l[2])},clone(){let a=this._matrix;return new L.PM.Matrix(a[0],a[1],a[2],a[3],a[4],a[5])},translate(a){if(a===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let l,h;return typeof a=="number"?(l=a,h=a):(l=a.x,h=a.y),this._add(1,0,0,1,l,h)},scale(a,l){if(a===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,p;return l=l||L.point(0,0),typeof a=="number"?(h=a,p=a):(h=a.x,p=a.y),this._add(h,0,0,p,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},rotate(a,l){let h=Math.cos(a),p=Math.sin(a);return l=l||new L.Point(0,0),this._add(h,p,-p,h,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(a,l,h,p,m,C){let x=[[],[],[]],b=this._matrix,M=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],A=[[a,h,m],[l,p,C],[0,0,1]],q;a&&a instanceof L.PM.Matrix&&(b=a._matrix,A=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(let U=0;U<3;U+=1)for(let ct=0;ct<3;ct+=1){q=0;for(let ft=0;ft<3;ft+=1)q+=M[U][ft]*A[ft][ct];x[U][ct]=q}return this._matrix=[x[0][0],x[1][0],x[0][1],x[1][1],x[0][2],x[1][2]],this}};var vC=vd,CC={calcMiddleLatLng(a,l,h){let p=a.project(l),m=a.project(h);return a.unproject(p._add(m)._divideBy(2))},findLayers(a){let l=[];return a.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&l.push(h)}),l=l.filter(h=>!!h.pm),l=l.filter(h=>!h._pmTempLayer),l=l.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),l},circleToPolygon(a,l=60,h=!0){let p=a.getLatLng(),m=a.getRadius(),C=wu(p,m,l,0,h),x=[];for(let b=0;b<C.length;b+=1){let M=[C[b].lat,C[b].lng];x.push(M)}return L.polygon(x,a.options)},disablePopup(a){a.getPopup()&&(a._tempPopupCopy=a.getPopup(),a.unbindPopup())},enablePopup(a){a._tempPopupCopy&&(a.bindPopup(a._tempPopupCopy),delete a._tempPopupCopy)},_fireEvent(a,l,h,p=!1){a.fire(l,h,p);let{groups:m}=this.getAllParentGroups(a);m.forEach(C=>{C.fire(l,h,p)})},getAllParentGroups(a){let l=[],h=[],p=m=>{for(let C in m._eventParents)if(l.indexOf(C)===-1){l.push(C);let x=m._eventParents[C];h.push(x),p(x)}};return!a._pmLastGroupFetch||!a._pmLastGroupFetch.time||new Date().getTime()-a._pmLastGroupFetch.time>1e3?(p(a),a._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:l},{groupIds:l,groups:h}):{groups:a._pmLastGroupFetch.groups,groupIds:a._pmLastGroupFetch.groupIds}},createGeodesicPolygon:wu,getTranslation:ve,findDeepCoordIndex(a,l,h=!0){let p,m=x=>(b,M)=>{let A=x.concat(M);if(h){if(b.lat&&b.lat===l.lat&&b.lng===l.lng)return p=A,!0}else if(b.lat&&L.latLng(b).equals(l))return p=A,!0;return Array.isArray(b)&&b.some(m(A))};a.some(m([]));let C={};return p&&(C={indexPath:p,index:p[p.length-1],parentPath:p.slice(0,p.length-1)}),C},findDeepMarkerIndex(a,l){let h,p=C=>(x,b)=>{let M=C.concat(b);return x._leaflet_id===l._leaflet_id?(h=M,!0):Array.isArray(x)&&x.some(p(M))};a.some(p([]));let m={};return h&&(m={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),m},_getIndexFromSegment(a,l){if(l&&l.length===2){let h=this.findDeepCoordIndex(a,l[0]),p=this.findDeepCoordIndex(a,l[1]),m=Math.max(h.index,p.index);return(h.index===0||p.index===0)&&m!==1&&(m+=1),{indexA:h,indexB:p,newIndex:m,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(a,l,h,p){let m=Hu(p,a),C=Hu(p,l),x=h*Math.PI/180,b=Math.cos(x),M=Math.sin(x),A=(C.x-m.x)*b+(C.y-m.y)*M,q=(C.y-m.y)*b-(C.x-m.x)*M,U=A*b+m.x,ct=A*M+m.y,ft=-q*M+m.x,It=q*b+m.y,Vt=Yh(p,m),Wt=Yh(p,{x:U,y:ct}),Ge=Yh(p,C),j=Yh(p,{x:ft,y:It});return[Vt,Wt,Ge,j]},pxRadiusToMeterRadius(a,l,h){let p=l.project(h),m=L.point(p.x+a,p.y);return l.distance(l.unproject(m),h)}},EC=CC;L.PM=L.PM||{version:Ul.version,Map:Dh,Toolbar:$l,Draw:nr,Edit:cr,Utils:EC,Matrix:vC,activeLang:"en",optIn:!1,initialize(a){this.addInitHooks(a)},setOptIn(a){this.optIn=!!a},addInitHooks(){function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(a);function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function p(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(p);function m(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(m);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(C);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(x);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(b);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(M)},reInitLayer(a){a instanceof L.LayerGroup&&a.eachLayer(l=>{this.reInitLayer(l)}),a.pm||L.PM.optIn&&a.options.pmIgnore!==!1||a.options.pmIgnore||(a instanceof L.Map?a.pm=new L.PM.Map(a):a instanceof L.Marker?a.options.textMarker?(a.pm=new L.PM.Edit.Text(a),a.pm._initTextMarker(),a.pm._createTextMarker(!1)):a.pm=new L.PM.Edit.Marker(a):a instanceof L.Circle?a.pm=new L.PM.Edit.Circle(a):a instanceof L.CircleMarker?a.pm=new L.PM.Edit.CircleMarker(a):a instanceof L.Rectangle?a.pm=new L.PM.Edit.Rectangle(a):a instanceof L.Polygon?a.pm=new L.PM.Edit.Polygon(a):a instanceof L.Polyline?a.pm=new L.PM.Edit.Line(a):a instanceof L.LayerGroup?a.pm=new L.PM.Edit.LayerGroup(a):a instanceof L.ImageOverlay&&(a.pm=new L.PM.Edit.ImageOverlay(a)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(a){let l=this._map.mouseEventToLayerPoint(a),h,p;for(let m=this._drawFirst;m;m=m.next)h=m.layer,h.options.interactive&&h._containsPoint(l)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);p&&(L.DomEvent.fakeStop(a),this._fireEvent([p],a))}}),L.PM.initialize()})();function K1(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var X1={exports:{}};(function(e){(function(t){if(typeof K1<"u")e.exports=t(sv());else{if(typeof window.L>"u")throw"Leaflet must be loaded first";t(window.L)}})(function(t){var n=Math.PI/180;function r(d){return(d-90)*n}function i(d,_,y){return d.add(t.point(Math.cos(_),Math.sin(_)).multiplyBy(y))}t.Point.prototype.rotated=function(d,_){return i(this,d,_)};var o={options:{startAngle:0,stopAngle:359.9999},startAngle:function(){return this.options.startAngle<this.options.stopAngle?r(this.options.startAngle):r(this.options.stopAngle)},stopAngle:function(){return this.options.startAngle<this.options.stopAngle?r(this.options.stopAngle):r(this.options.startAngle)},setStartAngle:function(d){return this.options.startAngle=d,this.redraw()},setStopAngle:function(d){return this.options.stopAngle=d,this.redraw()},setDirection:function(d,_){return _===void 0&&(_=10),this.options.startAngle=d-_/2,this.options.stopAngle=d+_/2,this.redraw()},getDirection:function(){return this.stopAngle()-(this.stopAngle()-this.startAngle())/2},isSemicircle:function(){var d=this.options.startAngle,_=this.options.stopAngle;return!(d===0&&_>359)&&d!==_},_containsPoint:function(d){function _(T){for(;T<=-Math.PI;)T+=2*Math.PI;for(;T>Math.PI;)T-=2*Math.PI;return T}var y=Math.atan2(d.y-this._point.y,d.x-this._point.x),E=_(this.startAngle()),S=_(this.stopAngle());return S<=E&&(S+=2*Math.PI),y<=E&&(y+=2*Math.PI),E<y&&y<=S&&d.distanceTo(this._point)<=this._radius+this._clickTolerance()}};t.SemiCircle=t.Circle.extend(o),t.SemiCircleMarker=t.CircleMarker.extend(o),t.semiCircle=function(d,_){return new t.SemiCircle(d,_)},t.semiCircleMarker=function(d,_){return new t.SemiCircleMarker(d,_)};var u=t.SVG.prototype._updateCircle,f=t.Canvas.prototype._updateCircle;t.SVG.include({_updateCircle:function(d){if(!(d instanceof t.SemiCircle||d instanceof t.SemiCircleMarker)||!d.isSemicircle())return u.call(this,d);if(d._empty())return this._setPath(d,"M0 0");var _=d._map.latLngToLayerPoint(d._latlng),y=d._radius,E=Math.round(d._radiusY||y),S=_.rotated(d.startAngle(),y),T=_.rotated(d.stopAngle(),y),I=d.options.stopAngle-d.options.startAngle>=180?"1":"0",z="M"+_.x+","+_.y+"L"+S.x+","+S.y+"A "+y+","+E+",0,"+I+",1,"+T.x+","+T.y+" z";this._setPath(d,z)}}),t.Canvas.include({_updateCircle:function(d){if(!(d instanceof t.SemiCircle||d instanceof t.SemiCircleMarker)||!d.isSemicircle())return f.call(this,d);if(!(!this._drawing||d._empty())){var _=d._point,y=this._ctx,E=d._radius,S=(d._radiusY||E)/E,T=_.rotated(d.startAngle(),E);S!==1&&(y.save(),y.scale(1,S)),y.beginPath(),y.moveTo(_.x,_.y),y.lineTo(T.x,T.y),y.arc(_.x,_.y,E,d.startAngle(),d.stopAngle()),y.lineTo(_.x,_.y),S!==1&&y.restore(),this._fillStroke(y,d)}}})})})(X1);var $r=63710088e-1,av={centimeters:$r*100,centimetres:$r*100,degrees:$r/111325,feet:$r*3.28084,inches:$r*39.37,kilometers:$r/1e3,kilometres:$r/1e3,meters:$r,metres:$r,miles:$r/1609.344,millimeters:$r*1e3,millimetres:$r*1e3,nauticalmiles:$r/1852,radians:1,yards:$r*1.0936};function Qa(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function vf(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!I_(e[0])||!I_(e[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:e};return Qa(r,t,n)}function Y1(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<o[o.length-1].length;u++)if(o[o.length-1][u]!==o[0][u])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:e};return Qa(f,t,n)}function Rf(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:e};return Qa(r,t,n)}function Of(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function W1(e,t,n){n===void 0&&(n={});var r={type:"MultiLineString",coordinates:e};return Qa(r,t,n)}function uv(e,t){t===void 0&&(t="kilometers");var n=av[t];if(!n)throw new Error(t+" units is invalid");return e*n}function J1(e,t){t===void 0&&(t="kilometers");var n=av[t];if(!n)throw new Error(t+" units is invalid");return e/n}function nf(e){var t=e%360;return t*Math.PI/180}function I_(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function jg(e,t,n){if(e!==null)for(var r,i,o,u,f,d,_,y=0,E=0,S,T=e.type,I=T==="FeatureCollection",z=T==="Feature",G=I?e.features.length:1,Q=0;Q<G;Q++){_=I?e.features[Q].geometry:z?e.geometry:e,S=_?_.type==="GeometryCollection":!1,f=S?_.geometries.length:1;for(var $=0;$<f;$++){var rt=0,mt=0;if(u=S?_.geometries[$]:_,u!==null){d=u.coordinates;var bt=u.type;switch(y=0,bt){case null:break;case"Point":if(t(d,E,Q,rt,mt)===!1)return!1;E++,rt++;break;case"LineString":case"MultiPoint":for(r=0;r<d.length;r++){if(t(d[r],E,Q,rt,mt)===!1)return!1;E++,bt==="MultiPoint"&&rt++}bt==="LineString"&&rt++;break;case"Polygon":case"MultiLineString":for(r=0;r<d.length;r++){for(i=0;i<d[r].length-y;i++){if(t(d[r][i],E,Q,rt,mt)===!1)return!1;E++}bt==="MultiLineString"&&rt++,bt==="Polygon"&&mt++}bt==="Polygon"&&rt++;break;case"MultiPolygon":for(r=0;r<d.length;r++){for(mt=0,i=0;i<d[r].length;i++){for(o=0;o<d[r][i].length-y;o++){if(t(d[r][i][o],E,Q,rt,mt)===!1)return!1;E++}mt++}rt++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(jg(u.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T_(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function gp(e,t){var n,r,i,o,u,f,d,_,y,E,S=0,T=e.type==="FeatureCollection",I=e.type==="Feature",z=T?e.features.length:1;for(n=0;n<z;n++){for(f=T?e.features[n].geometry:I?e.geometry:e,_=T?e.features[n].properties:I?e.properties:{},y=T?e.features[n].bbox:I?e.bbox:void 0,E=T?e.features[n].id:I?e.id:void 0,d=f?f.type==="GeometryCollection":!1,u=d?f.geometries.length:1,i=0;i<u;i++){if(o=d?f.geometries[i]:f,o===null){if(t(null,S,_,y,E)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,S,_,y,E)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],S,_,y,E)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}S++}}function Q1(e,t,n){var r=n;return gp(e,function(i,o,u,f,d){r=t(r,i,o,u,f,d)}),r}function $1(e,t){gp(e,function(n,r,i,o,u){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return t(Qa(n,i,{bbox:o,id:u}),r,0)===!1?!1:void 0}var d;switch(f){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon";break}for(var _=0;_<n.coordinates.length;_++){var y=n.coordinates[_],E={type:d,coordinates:y};if(t(Qa(E,i),r,_)===!1)return!1}})}function tw(e,t){$1(e,function(n,r,i){var o=0;if(n.geometry){var u=n.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var f,d=0,_=0,y=0;if(jg(n,function(E,S,T,I,z){if(f===void 0||r>d||I>_||z>y){f=E,d=r,_=I,y=z,o=0;return}var G=Rf([f,E],n.properties);if(t(G,r,i,z,o)===!1)return!1;o++,f=E})===!1)return!1}}})}function ew(e,t,n){var r=n,i=!1;return tw(e,function(o,u,f,d,_){i===!1&&n===void 0?r=o:r=t(r,o,u,f,d,_),i=!0}),r}function Bf(e){var t=[1/0,1/0,-1/0,-1/0];return jg(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}Bf.default=Bf;function A_(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qg(e){return e.type==="Feature"?e.geometry:e}function gg(e,t,n){n===void 0&&(n={});var r=A_(e),i=A_(t),o=nf(i[1]-r[1]),u=nf(i[0]-r[0]),f=nf(r[1]),d=nf(i[1]),_=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(d);return uv(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}function nw(e,t){t===void 0&&(t={});var n=Number(e[0]),r=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var u=[n,r],f=[n,o],d=[i,o],_=[i,r];return Y1([[u,_,d,f,u]],t.properties,{bbox:e,id:t.id})}function rw(e,t){t===void 0&&(t={});var n=Bf(e),r=(n[0]+n[2])/2,i=(n[1]+n[3])/2;return vf([r,i],t.properties,t)}var D_=6378137;function Gd(e){return Q1(e,function(t,n){return t+iw(n)},0)}function iw(e){var t=0,n;switch(e.type){case"Polygon":return k_(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=k_(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function k_(e){var t=0;if(e&&e.length>0){t+=Math.abs(N_(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(N_(e[n]))}return t}function N_(e){var t,n,r,i,o,u,f,d=0,_=e.length;if(_>2){for(f=0;f<_;f++)f===_-2?(i=_-2,o=_-1,u=0):f===_-1?(i=_-1,o=0,u=1):(i=f,o=f+1,u=f+2),t=e[i],n=e[o],r=e[u],d+=(Ud(r[0])-Ud(t[0]))*Math.sin(Ud(n[1]));d=d*D_*D_/2}return d}function Ud(e){return e*Math.PI/180}function Vd(e,t){return t===void 0&&(t={}),ew(e,function(n,r){var i=r.geometry.coordinates;return n+gg(i[0],i[1],t)},0)}function sw(e,t){t===void 0&&(t={});var n=qg(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return ow(n,t);case"MultiPolygon":return aw(n,t);default:throw new Error("invalid poly")}}function ow(e,t){t===void 0&&(t={});var n=qg(e),r=n.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{};return lv(r,i)}function aw(e,t){t===void 0&&(t={});var n=qg(e),r=n.coordinates,i=t.properties?t.properties:e.type==="Feature"?e.properties:{},o=[];return r.forEach(function(u){o.push(lv(u,i))}),Of(o)}function lv(e,t){return e.length>1?W1(e,t):Rf(e[0],t)}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var n=Object(this),r=Math.max(Math.min(n.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(r+i,0):Math.min(i,r);var o=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:r;for(o=o<0?Math.max(r+arguments[2],0):Math.min(o,r);i<o;)n[i]=t,++i;return n},writable:!0});Number.isFinite=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)};Number.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};Number.parseFloat=Number.parseFloat||parseFloat;Number.isNaN=Number.isNaN||function(e){return e!==e};Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};var $a=function(){};$a.prototype.interfaces_=function(){return[]};$a.prototype.getClass=function(){return $a};$a.prototype.equalsWithTolerance=function(t,n,r){return Math.abs(t-n)<=r};var ln=function(e){function t(n){e.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ue=function(){},cv={MAX_VALUE:{configurable:!0}};ue.isNaN=function(t){return Number.isNaN(t)};ue.doubleToLongBits=function(t){return t};ue.longBitsToDouble=function(t){return t};ue.isInfinite=function(t){return!Number.isFinite(t)};cv.MAX_VALUE.get=function(){return Number.MAX_VALUE};Object.defineProperties(ue,cv);var vi=function(){},mp=function(){},ol=function(){};function Ci(){}var it=function e(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=e.NULL_ORDINATE;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=e.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},pu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};it.prototype.setOrdinate=function(t,n){switch(t){case it.X:this.x=n;break;case it.Y:this.y=n;break;case it.Z:this.z=n;break;default:throw new ln("Invalid ordinate index: "+t)}};it.prototype.equals2D=function(){if(arguments.length===1){var t=arguments[0];return!(this.x!==t.x||this.y!==t.y)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return!(!$a.equalsWithTolerance(this.x,n.x,r)||!$a.equalsWithTolerance(this.y,n.y,r))}};it.prototype.getOrdinate=function(t){switch(t){case it.X:return this.x;case it.Y:return this.y;case it.Z:return this.z}throw new ln("Invalid ordinate index: "+t)};it.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||ue.isNaN(this.z))&&ue.isNaN(t.z)};it.prototype.equals=function(t){return t instanceof it?this.equals2D(t):!1};it.prototype.equalInZ=function(t,n){return $a.equalsWithTolerance(this.z,t.z,n)};it.prototype.compareTo=function(t){var n=t;return this.x<n.x?-1:this.x>n.x?1:this.y<n.y?-1:this.y>n.y?1:0};it.prototype.clone=function(){};it.prototype.copy=function(){return new it(this)};it.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};it.prototype.distance3D=function(t){var n=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return Math.sqrt(n*n+r*r+i*i)};it.prototype.distance=function(t){var n=this.x-t.x,r=this.y-t.y;return Math.sqrt(n*n+r*r)};it.prototype.hashCode=function(){var t=17;return t=37*t+it.hashCode(this.x),t=37*t+it.hashCode(this.y),t};it.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z};it.prototype.interfaces_=function(){return[vi,mp,Ci]};it.prototype.getClass=function(){return it};it.hashCode=function(){if(arguments.length===1){var t=arguments[0],n=ue.doubleToLongBits(t);return Math.trunc((n^n)>>>32)}};pu.DimensionalComparator.get=function(){return Io};pu.serialVersionUID.get=function(){return 6683108902428367e3};pu.NULL_ORDINATE.get=function(){return ue.NaN};pu.X.get=function(){return 0};pu.Y.get=function(){return 1};pu.Z.get=function(){return 2};Object.defineProperties(it,pu);var Io=function(t){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var n=arguments[0];if(n!==2&&n!==3)throw new ln("only 2 or 3 dimensions may be specified");this._dimensionsToTest=n}}};Io.prototype.compare=function(t,n){var r=t,i=n,o=Io.compare(r.x,i.x);if(o!==0)return o;var u=Io.compare(r.y,i.y);if(u!==0)return u;if(this._dimensionsToTest<=2)return 0;var f=Io.compare(r.z,i.z);return f};Io.prototype.interfaces_=function(){return[ol]};Io.prototype.getClass=function(){return Io};Io.compare=function(t,n){return t<n?-1:t>n?1:ue.isNaN(t)?ue.isNaN(n)?0:-1:ue.isNaN(n)?1:0};var al=function(){};al.prototype.create=function(){};al.prototype.interfaces_=function(){return[]};al.prototype.getClass=function(){return al};var lt=function(){},sh={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};lt.prototype.interfaces_=function(){return[]};lt.prototype.getClass=function(){return lt};lt.toLocationSymbol=function(t){switch(t){case lt.EXTERIOR:return"e";case lt.BOUNDARY:return"b";case lt.INTERIOR:return"i";case lt.NONE:return"-"}throw new ln("Unknown location value: "+t)};sh.INTERIOR.get=function(){return 0};sh.BOUNDARY.get=function(){return 1};sh.EXTERIOR.get=function(){return 2};sh.NONE.get=function(){return-1};Object.defineProperties(lt,sh);var se=function(e,t){return e.interfaces_&&e.interfaces_().indexOf(t)>-1},ii=function(){},hv={LOG_10:{configurable:!0}};ii.prototype.interfaces_=function(){return[]};ii.prototype.getClass=function(){return ii};ii.log10=function(t){var n=Math.log(t);return ue.isInfinite(n)||ue.isNaN(n)?n:n/ii.LOG_10};ii.min=function(t,n,r,i){var o=t;return n<o&&(o=n),r<o&&(o=r),i<o&&(o=i),o};ii.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1],r=arguments[2];return t<n?n:t>r?r:t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1],u=arguments[2];return i<o?o:i>u?u:i}};ii.wrap=function(t,n){return t<0?n- -t%n:t%n};ii.max=function(){if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2],i=t;return n>i&&(i=n),r>i&&(i=r),i}else if(arguments.length===4){var o=arguments[0],u=arguments[1],f=arguments[2],d=arguments[3],_=o;return u>_&&(_=u),f>_&&(_=f),d>_&&(_=d),_}};ii.average=function(t,n){return(t+n)/2};hv.LOG_10.get=function(){return Math.log(10)};Object.defineProperties(ii,hv);var hs=function(t){this.str=t};hs.prototype.append=function(t){this.str+=t};hs.prototype.setCharAt=function(t,n){this.str=this.str.substr(0,t)+n+this.str.substr(t+1)};hs.prototype.toString=function(t){return this.str};var es=function(t){this.value=t};es.prototype.intValue=function(){return this.value};es.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0};es.isNaN=function(t){return Number.isNaN(t)};var zc=function(){};zc.isWhitespace=function(t){return t<=32&&t>=0||t===127};zc.toUpperCase=function(t){return t.toUpperCase()};var dt=function e(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if(typeof arguments[0]=="string"){var r=arguments[0];e.call(this,e.parse(r))}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.init(i,o)}},Bi={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};dt.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo};dt.prototype.extractSignificantDigits=function(t,n){var r=this.abs(),i=dt.magnitude(r._hi),o=dt.TEN.pow(i);r=r.divide(o),r.gt(dt.TEN)?(r=r.divide(dt.TEN),i+=1):r.lt(dt.ONE)&&(r=r.multiply(dt.TEN),i-=1);for(var u=i+1,f=new hs,d=dt.MAX_PRINT_DIGITS-1,_=0;_<=d;_++){t&&_===u&&f.append(".");var y=Math.trunc(r._hi);if(y<0)break;var E=!1,S=0;y>9?(E=!0,S="9"):S="0"+y,f.append(S),r=r.subtract(dt.valueOf(y)).multiply(dt.TEN),E&&r.selfAdd(dt.TEN);var T=!0,I=dt.magnitude(r._hi);if(I<0&&Math.abs(I)>=d-_&&(T=!1),!T)break}return n[0]=i,f.toString()};dt.prototype.sqr=function(){return this.multiply(this)};dt.prototype.doubleValue=function(){return this._hi+this._lo};dt.prototype.subtract=function(){if(arguments[0]instanceof dt){var t=arguments[0];return this.add(t.negate())}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.add(-n)}};dt.prototype.equals=function(){if(arguments.length===1){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}};dt.prototype.isZero=function(){return this._hi===0&&this._lo===0};dt.prototype.selfSubtract=function(){if(arguments[0]instanceof dt){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}};dt.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null};dt.prototype.min=function(t){return this.le(t)?this:t};dt.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof dt){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.selfDivide(n,0)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=null,u=null,f=null,d=null,_=null,y=null,E=null,S=null;return _=this._hi/r,y=dt.SPLIT*_,o=y-_,S=dt.SPLIT*r,o=y-o,u=_-o,f=S-r,E=_*r,f=S-f,d=r-f,S=o*f-E+o*d+u*f+u*d,y=(this._hi-E-S+this._lo-_*i)/r,S=_+y,this._hi=S,this._lo=_-S+y,this}};dt.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"};dt.prototype.divide=function(){if(arguments[0]instanceof dt){var t=arguments[0],n=null,r=null,i=null,o=null,u=null,f=null,d=null,_=null;u=this._hi/t._hi,f=dt.SPLIT*u,n=f-u,_=dt.SPLIT*t._hi,n=f-n,r=u-n,i=_-t._hi,d=u*t._hi,i=_-i,o=t._hi-i,_=n*i-d+n*o+r*i+r*o,f=(this._hi-d-_+this._lo-u*t._lo)/t._hi,_=u+f;var y=_,E=u-_+f;return new dt(y,E)}else if(typeof arguments[0]=="number"){var S=arguments[0];return ue.isNaN(S)?dt.createNaN():dt.copy(this).selfDivide(S,0)}};dt.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo};dt.prototype.pow=function(t){if(t===0)return dt.valueOf(1);var n=new dt(this),r=dt.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2===1&&r.selfMultiply(n),i/=2,i>0&&(n=n.sqr());else r=n;return t<0?r.reciprocal():r};dt.prototype.ceil=function(){if(this.isNaN())return dt.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new dt(t,n)};dt.prototype.compareTo=function(t){var n=t;return this._hi<n._hi?-1:this._hi>n._hi?1:this._lo<n._lo?-1:this._lo>n._lo?1:0};dt.prototype.rint=function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()};dt.prototype.setValue=function(){if(arguments[0]instanceof dt){var t=arguments[0];return this.init(t),this}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.init(n),this}};dt.prototype.max=function(t){return this.ge(t)?this:t};dt.prototype.sqrt=function(){if(this.isZero())return dt.valueOf(0);if(this.isNegative())return dt.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,r=dt.valueOf(n),i=this.subtract(r.sqr()),o=i._hi*(t*.5);return r.add(o)};dt.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof dt){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0],r=null,i=null,o=null,u=null,f=null,d=null;return o=this._hi+n,f=o-this._hi,u=o-f,u=n-f+(this._hi-u),d=u+this._lo,r=o+d,i=d+(o-r),this._hi=r+i,this._lo=i+(r-this._hi),this}}else if(arguments.length===2){var _=arguments[0],y=arguments[1],E=null,S=null,T=null,I=null,z=null,G=null,Q=null,$=null;z=this._hi+_,T=this._lo+y,Q=z-this._hi,$=T-this._lo,G=z-Q,I=T-$,G=_-Q+(this._hi-G),I=y-$+(this._lo-I),Q=G+T,E=z+Q,S=Q+(z-E),Q=I+S;var rt=E+Q,mt=Q+(E-rt);return this._hi=rt,this._lo=mt,this}};dt.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof dt){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}else if(typeof arguments[0]=="number"){var n=arguments[0];return this.selfMultiply(n,0)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=null,u=null,f=null,d=null,_=null,y=null;_=dt.SPLIT*this._hi,o=_-this._hi,y=dt.SPLIT*r,o=_-o,u=this._hi-o,f=y-r,_=this._hi*r,f=y-f,d=r-f,y=o*f-_+o*d+u*f+u*d+(this._hi*i+this._lo*r);var E=_+y;o=_-E;var S=y+o;return this._hi=E,this._lo=S,this}};dt.prototype.selfSqr=function(){return this.selfMultiply(this)};dt.prototype.floor=function(){if(this.isNaN())return dt.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new dt(t,n)};dt.prototype.negate=function(){return this.isNaN()?this:new dt(-this._hi,-this._lo)};dt.prototype.clone=function(){};dt.prototype.multiply=function(){if(arguments[0]instanceof dt){var t=arguments[0];return t.isNaN()?dt.createNaN():dt.copy(this).selfMultiply(t)}else if(typeof arguments[0]=="number"){var n=arguments[0];return ue.isNaN(n)?dt.createNaN():dt.copy(this).selfMultiply(n,0)}};dt.prototype.isNaN=function(){return ue.isNaN(this._hi)};dt.prototype.intValue=function(){return Math.trunc(this._hi)};dt.prototype.toString=function(){var t=dt.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()};dt.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(t!==null)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!0,n),i=n[0]+1,o=r;if(r.charAt(0)===".")o="0"+r;else if(i<0)o="0."+dt.stringOfChar("0",-i)+r;else if(r.indexOf(".")===-1){var u=i-r.length,f=dt.stringOfChar("0",u);o=r+f+".0"}return this.isNegative()?"-"+o:o};dt.prototype.reciprocal=function(){var t=null,n=null,r=null,i=null,o=null,u=null,f=null,d=null;o=1/this._hi,u=dt.SPLIT*o,t=u-o,d=dt.SPLIT*this._hi,t=u-t,n=o-t,r=d-this._hi,f=o*this._hi,r=d-r,i=this._hi-r,d=t*r-f+t*i+n*r+n*i,u=(1-f-d-o*this._lo)/this._hi;var _=o+u,y=o-_+u;return new dt(_,y)};dt.prototype.toSciNotation=function(){if(this.isZero())return dt.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!1,n),i=dt.SCI_NOT_EXPONENT_CHAR+n[0];if(r.charAt(0)==="0")throw new Error("Found leading zero: "+r);var o="";r.length>1&&(o=r.substring(1));var u=r.charAt(0)+"."+o;return this.isNegative()?"-"+u+i:u+i};dt.prototype.abs=function(){return this.isNaN()?dt.NaN:this.isNegative()?this.negate():new dt(this)};dt.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0};dt.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo};dt.prototype.add=function(){if(arguments[0]instanceof dt){var t=arguments[0];return dt.copy(this).selfAdd(t)}else if(typeof arguments[0]=="number"){var n=arguments[0];return dt.copy(this).selfAdd(n)}};dt.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof dt){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this._hi=r,this._lo=i}};dt.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo};dt.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0};dt.prototype.trunc=function(){return this.isNaN()?dt.NaN:this.isPositive()?this.floor():this.ceil()};dt.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0};dt.prototype.interfaces_=function(){return[Ci,vi,mp]};dt.prototype.getClass=function(){return dt};dt.sqr=function(t){return dt.valueOf(t).selfMultiply(t)};dt.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return dt.parse(t)}else if(typeof arguments[0]=="number"){var n=arguments[0];return new dt(n)}};dt.sqrt=function(t){return dt.valueOf(t).sqrt()};dt.parse=function(t){for(var n=0,r=t.length;zc.isWhitespace(t.charAt(n));)n++;var i=!1;if(n<r){var o=t.charAt(n);(o==="-"||o==="+")&&(n++,o==="-"&&(i=!0))}for(var u=new dt,f=0,d=0,_=0;!(n>=r);){var y=t.charAt(n);if(n++,zc.isDigit(y)){var E=y-"0";u.selfMultiply(dt.TEN),u.selfAdd(E),f++;continue}if(y==="."){d=f;continue}if(y==="e"||y==="E"){var S=t.substring(n);try{_=es.parseInt(S)}catch(Q){throw Q instanceof Error?new Error("Invalid exponent "+S+" in string "+t):Q}finally{}break}throw new Error("Unexpected character '"+y+"' at position "+n+" in string "+t)}var T=u,I=f-d-_;if(I===0)T=u;else if(I>0){var z=dt.TEN.pow(I);T=u.divide(z)}else if(I<0){var G=dt.TEN.pow(-I);T=u.multiply(G)}return i?T.negate():T};dt.createNaN=function(){return new dt(ue.NaN,ue.NaN)};dt.copy=function(t){return new dt(t)};dt.magnitude=function(t){var n=Math.abs(t),r=Math.log(n)/Math.log(10),i=Math.trunc(Math.floor(r)),o=Math.pow(10,i);return o*10<=n&&(i+=1),i};dt.stringOfChar=function(t,n){for(var r=new hs,i=0;i<n;i++)r.append(t);return r.toString()};Bi.PI.get=function(){return new dt(3.141592653589793,12246467991473532e-32)};Bi.TWO_PI.get=function(){return new dt(6.283185307179586,24492935982947064e-32)};Bi.PI_2.get=function(){return new dt(1.5707963267948966,6123233995736766e-32)};Bi.E.get=function(){return new dt(2.718281828459045,14456468917292502e-32)};Bi.NaN.get=function(){return new dt(ue.NaN,ue.NaN)};Bi.EPS.get=function(){return 123259516440783e-46};Bi.SPLIT.get=function(){return 134217729};Bi.MAX_PRINT_DIGITS.get=function(){return 32};Bi.TEN.get=function(){return dt.valueOf(10)};Bi.ONE.get=function(){return dt.valueOf(1)};Bi.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"};Bi.SCI_NOT_ZERO.get=function(){return"0.0E0"};Object.defineProperties(dt,Bi);var Sr=function(){},fv={DP_SAFE_EPSILON:{configurable:!0}};Sr.prototype.interfaces_=function(){return[]};Sr.prototype.getClass=function(){return Sr};Sr.orientationIndex=function(t,n,r){var i=Sr.orientationIndexFilter(t,n,r);if(i<=1)return i;var o=dt.valueOf(n.x).selfAdd(-t.x),u=dt.valueOf(n.y).selfAdd(-t.y),f=dt.valueOf(r.x).selfAdd(-n.x),d=dt.valueOf(r.y).selfAdd(-n.y);return o.selfMultiply(d).selfSubtract(u.selfMultiply(f)).signum()};Sr.signOfDet2x2=function(t,n,r,i){var o=t.multiply(i).selfSubtract(n.multiply(r));return o.signum()};Sr.intersection=function(t,n,r,i){var o=dt.valueOf(i.y).selfSubtract(r.y).selfMultiply(dt.valueOf(n.x).selfSubtract(t.x)),u=dt.valueOf(i.x).selfSubtract(r.x).selfMultiply(dt.valueOf(n.y).selfSubtract(t.y)),f=o.subtract(u),d=dt.valueOf(i.x).selfSubtract(r.x).selfMultiply(dt.valueOf(t.y).selfSubtract(r.y)),_=dt.valueOf(i.y).selfSubtract(r.y).selfMultiply(dt.valueOf(t.x).selfSubtract(r.x)),y=d.subtract(_),E=y.selfDivide(f).doubleValue(),S=dt.valueOf(t.x).selfAdd(dt.valueOf(n.x).selfSubtract(t.x).selfMultiply(E)).doubleValue(),T=dt.valueOf(n.x).selfSubtract(t.x).selfMultiply(dt.valueOf(t.y).selfSubtract(r.y)),I=dt.valueOf(n.y).selfSubtract(t.y).selfMultiply(dt.valueOf(t.x).selfSubtract(r.x)),z=T.subtract(I),G=z.selfDivide(f).doubleValue(),Q=dt.valueOf(r.y).selfAdd(dt.valueOf(i.y).selfSubtract(r.y).selfMultiply(G)).doubleValue();return new it(S,Q)};Sr.orientationIndexFilter=function(t,n,r){var i=null,o=(t.x-r.x)*(n.y-r.y),u=(t.y-r.y)*(n.x-r.x),f=o-u;if(o>0){if(u<=0)return Sr.signum(f);i=o+u}else if(o<0){if(u>=0)return Sr.signum(f);i=-o-u}else return Sr.signum(f);var d=Sr.DP_SAFE_EPSILON*i;return f>=d||-f>=d?Sr.signum(f):2};Sr.signum=function(t){return t>0?1:t<0?-1:0};fv.DP_SAFE_EPSILON.get=function(){return 1e-15};Object.defineProperties(Sr,fv);var De=function(){},oh={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};oh.X.get=function(){return 0};oh.Y.get=function(){return 1};oh.Z.get=function(){return 2};oh.M.get=function(){return 3};De.prototype.setOrdinate=function(t,n,r){};De.prototype.size=function(){};De.prototype.getOrdinate=function(t,n){};De.prototype.getCoordinate=function(){};De.prototype.getCoordinateCopy=function(t){};De.prototype.getDimension=function(){};De.prototype.getX=function(t){};De.prototype.clone=function(){};De.prototype.expandEnvelope=function(t){};De.prototype.copy=function(){};De.prototype.getY=function(t){};De.prototype.toCoordinateArray=function(){};De.prototype.interfaces_=function(){return[mp]};De.prototype.getClass=function(){return De};Object.defineProperties(De,oh);var pv=function(){},Tl=function(e){function t(){e.call(this,"Projective point not representable on the Cartesian plane.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(pv),Yn=function(){};Yn.arraycopy=function(t,n,r,i,o){for(var u=0,f=n;f<n+o;f++)r[i+u]=t[f],u++};Yn.getProperty=function(t){return{"line.separator":`
`}[t]};var Pi=function e(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof it&&arguments[1]instanceof it){var u=arguments[0],f=arguments[1];this.x=u.y-f.y,this.y=f.x-u.x,this.w=u.x*f.y-f.x*u.y}}else if(arguments.length===3){var d=arguments[0],_=arguments[1],y=arguments[2];this.x=d,this.y=_,this.w=y}else if(arguments.length===4){var E=arguments[0],S=arguments[1],T=arguments[2],I=arguments[3],z=E.y-S.y,G=S.x-E.x,Q=E.x*S.y-S.x*E.y,$=T.y-I.y,rt=I.x-T.x,mt=T.x*I.y-I.x*T.y;this.x=G*mt-rt*Q,this.y=$*Q-z*mt,this.w=z*rt-$*G}};Pi.prototype.getY=function(){var t=this.y/this.w;if(ue.isNaN(t)||ue.isInfinite(t))throw new Tl;return t};Pi.prototype.getX=function(){var t=this.x/this.w;if(ue.isNaN(t)||ue.isInfinite(t))throw new Tl;return t};Pi.prototype.getCoordinate=function(){var t=new it;return t.x=this.getX(),t.y=this.getY(),t};Pi.prototype.interfaces_=function(){return[]};Pi.prototype.getClass=function(){return Pi};Pi.intersection=function(t,n,r,i){var o=t.y-n.y,u=n.x-t.x,f=t.x*n.y-n.x*t.y,d=r.y-i.y,_=i.x-r.x,y=r.x*i.y-i.x*r.y,E=u*y-_*f,S=d*f-o*y,T=o*_-d*u,I=E/T,z=S/T;if(ue.isNaN(I)||ue.isInfinite(I)||ue.isNaN(z)||ue.isInfinite(z))throw new Tl;return new it(I,z)};var Jt=function e(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],u=arguments[1],f=arguments[2],d=arguments[3];this.init(o,u,f,d)}},dv={serialVersionUID:{configurable:!0}};Jt.prototype.getArea=function(){return this.getWidth()*this.getHeight()};Jt.prototype.equals=function(t){if(!(t instanceof Jt))return!1;var n=t;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()};Jt.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Jt;var n=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,o=this._maxy<t._maxy?this._maxy:t._maxy;return new Jt(n,i,r,o)};Jt.prototype.isNull=function(){return this._maxx<this._minx};Jt.prototype.getMaxX=function(){return this._maxx};Jt.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];return this.covers(t.x,t.y)}else if(arguments[0]instanceof Jt){var n=arguments[0];return this.isNull()||n.isNull()?!1:n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isNull()?!1:r>=this._minx&&r<=this._maxx&&i>=this._miny&&i<=this._maxy}};Jt.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Jt){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}else if(arguments[0]instanceof it){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.isNull()?!1:!(r>this._maxx||r<this._minx||i>this._maxy||i<this._miny)}};Jt.prototype.getMinY=function(){return this._miny};Jt.prototype.getMinX=function(){return this._minx};Jt.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Jt){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=i,this._maxy=i):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}};Jt.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return t<n?t:n};Jt.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx};Jt.prototype.compareTo=function(t){var n=t;return this.isNull()?n.isNull()?0:-1:n.isNull()?1:this._minx<n._minx?-1:this._minx>n._minx?1:this._miny<n._miny?-1:this._miny>n._miny?1:this._maxx<n._maxx?-1:this._maxx>n._maxx?1:this._maxy<n._maxy?-1:this._maxy>n._maxy?1:0};Jt.prototype.translate=function(t,n){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+n,this.getMaxY()+n)};Jt.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"};Jt.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1};Jt.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny};Jt.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),n=this.getHeight();return t>n?t:n};Jt.prototype.expandBy=function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this.isNull())return null;this._minx-=n,this._maxx+=n,this._miny-=r,this._maxy+=r,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}};Jt.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Jt){var t=arguments[0];return this.covers(t)}else if(arguments[0]instanceof it){var n=arguments[0];return this.covers(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.covers(r,i)}};Jt.prototype.centre=function(){return this.isNull()?null:new it((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)};Jt.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Jt){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(arguments.length===4){var o=arguments[0],u=arguments[1],f=arguments[2],d=arguments[3];o<u?(this._minx=o,this._maxx=u):(this._minx=u,this._maxx=o),f<d?(this._miny=f,this._maxy=d):(this._miny=d,this._maxy=f)}};Jt.prototype.getMaxY=function(){return this._maxy};Jt.prototype.distance=function(t){if(this.intersects(t))return 0;var n=0;this._maxx<t._minx?n=t._minx-this._maxx:this._minx>t._maxx&&(n=this._minx-t._maxx);var r=0;return this._maxy<t._miny?r=t._miny-this._maxy:this._miny>t._maxy&&(r=this._miny-t._maxy),n===0?r:r===0?n:Math.sqrt(n*n+r*r)};Jt.prototype.hashCode=function(){var t=17;return t=37*t+it.hashCode(this._minx),t=37*t+it.hashCode(this._maxx),t=37*t+it.hashCode(this._miny),t=37*t+it.hashCode(this._maxy),t};Jt.prototype.interfaces_=function(){return[vi,Ci]};Jt.prototype.getClass=function(){return Jt};Jt.intersects=function(){if(arguments.length===3){var t=arguments[0],n=arguments[1],r=arguments[2];return r.x>=(t.x<n.x?t.x:n.x)&&r.x<=(t.x>n.x?t.x:n.x)&&r.y>=(t.y<n.y?t.y:n.y)&&r.y<=(t.y>n.y?t.y:n.y)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3],d=Math.min(u.x,f.x),_=Math.max(u.x,f.x),y=Math.min(i.x,o.x),E=Math.max(i.x,o.x);return!(y>_||E<d||(d=Math.min(u.y,f.y),_=Math.max(u.y,f.y),y=Math.min(i.y,o.y),E=Math.max(i.y,o.y),y>_)||E<d)}};dv.serialVersionUID.get=function(){return 5873921885273102e3};Object.defineProperties(Jt,dv);var Xi={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},_p=function(t){this.geometryFactory=t||new Ee};_p.prototype.read=function(t){var n,r,i;t=t.replace(/[\n\r]/g," ");var o=Xi.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(o=Xi.emptyTypeStr.exec(t),o[2]=void 0),o&&(r=o[1].toLowerCase(),i=o[2],Wu[r]&&(n=Wu[r].apply(this,[i]))),n===void 0)throw new Error("Could not parse WKT "+t);return n};_p.prototype.write=function(t){return this.extractGeometry(t)};_p.prototype.extractGeometry=function(t){var n=t.getGeometryType().toLowerCase();if(!Xs[n])return null;var r=n.toUpperCase(),i;return t.isEmpty()?i=r+" EMPTY":i=r+"("+Xs[n].apply(this,[t])+")",i};var Xs={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Xs.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push("("+Xs.point.apply(n,[t._geometries[i]])+")");return r.join(",")},linestring:function(t){for(var n=this,r=[],i=0,o=t._points._coordinates.length;i<o;++i)r.push(Xs.coordinate.apply(n,[t._points._coordinates[i]]));return r.join(",")},linearring:function(t){for(var n=this,r=[],i=0,o=t._points._coordinates.length;i<o;++i)r.push(Xs.coordinate.apply(n,[t._points._coordinates[i]]));return r.join(",")},multilinestring:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push("("+Xs.linestring.apply(n,[t._geometries[i]])+")");return r.join(",")},polygon:function(t){var n=this,r=[];r.push("("+Xs.linestring.apply(this,[t._shell])+")");for(var i=0,o=t._holes.length;i<o;++i)r.push("("+Xs.linestring.apply(n,[t._holes[i]])+")");return r.join(",")},multipolygon:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push("("+Xs.polygon.apply(n,[t._geometries[i]])+")");return r.join(",")},geometrycollection:function(t){for(var n=this,r=[],i=0,o=t._geometries.length;i<o;++i)r.push(n.extractGeometry(t._geometries[i]));return r.join(",")}},Wu={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var n=t.trim().split(Xi.spaces);return this.geometryFactory.createPoint(new it(Number.parseFloat(n[0]),Number.parseFloat(n[1])))},multipoint:function(t){var n=this;if(t===void 0)return this.geometryFactory.createMultiPoint();for(var r,i=t.trim().split(","),o=[],u=0,f=i.length;u<f;++u)r=i[u].replace(Xi.trimParens,"$1"),o.push(Wu.point.apply(n,[r]));return this.geometryFactory.createMultiPoint(o)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var n=t.trim().split(","),r=[],i,o=0,u=n.length;o<u;++o)i=n[o].trim().split(Xi.spaces),r.push(new it(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var n=t.trim().split(","),r=[],i,o=0,u=n.length;o<u;++o)i=n[o].trim().split(Xi.spaces),r.push(new it(Number.parseFloat(i[0]),Number.parseFloat(i[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var n=this;if(t===void 0)return this.geometryFactory.createMultiLineString();for(var r,i=t.trim().split(Xi.parenComma),o=[],u=0,f=i.length;u<f;++u)r=i[u].replace(Xi.trimParens,"$1"),o.push(Wu.linestring.apply(n,[r]));return this.geometryFactory.createMultiLineString(o)},polygon:function(t){var n=this;if(t===void 0)return this.geometryFactory.createPolygon();for(var r,i,o,u=t.trim().split(Xi.parenComma),f,d=[],_=0,y=u.length;_<y;++_)r=u[_].replace(Xi.trimParens,"$1"),i=Wu.linestring.apply(n,[r]),o=n.geometryFactory.createLinearRing(i._points),_===0?f=o:d.push(o);return this.geometryFactory.createPolygon(f,d)},multipolygon:function(t){var n=this;if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var r,i=t.trim().split(Xi.doubleParenComma),o=[],u=0,f=i.length;u<f;++u)r=i[u].replace(Xi.trimParens,"$1"),o.push(Wu.polygon.apply(n,[r]));return this.geometryFactory.createMultiPolygon(o)},geometrycollection:function(t){var n=this;if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var r=t.trim().split("|"),i=[],o=0,u=r.length;o<u;++o)i.push(n.read(r[o]));return this.geometryFactory.createGeometryCollection(i)}},Ti=function(t){this.parser=new _p(t)};Ti.prototype.write=function(t){return this.parser.write(t)};Ti.toLineString=function(t,n){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+n.x+" "+n.y+" )"};var ro=function(e){function t(n){e.call(this,n),this.name="RuntimeException",this.message=n,this.stack=new e().stack}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Ff=function(e){function t(){if(e.call(this),arguments.length===0)e.call(this);else if(arguments.length===1){var n=arguments[0];e.call(this,n)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(ro),me=function(){};me.prototype.interfaces_=function(){return[]};me.prototype.getClass=function(){return me};me.shouldNeverReachHere=function(){if(arguments.length===0)me.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new Ff("Should never reach here"+(t!==null?": "+t:""))}};me.isTrue=function(){var t,n;if(arguments.length===1)t=arguments[0],me.isTrue(t,null);else if(arguments.length===2&&(t=arguments[0],n=arguments[1],!t))throw n===null?new Ff:new Ff(n)};me.equals=function(){var t,n,r;if(arguments.length===2)t=arguments[0],n=arguments[1],me.equals(t,n,null);else if(arguments.length===3&&(t=arguments[0],n=arguments[1],r=arguments[2],!n.equals(t)))throw new Ff("Expected "+t+" but encountered "+n+(r!==null?": "+r:""))};var hn=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new it,this._intPt[1]=new it,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},du={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};hn.prototype.getIndexAlongSegment=function(t,n){return this.computeIntLineIndex(),this._intLineIndex[t][n]};hn.prototype.getTopologySummary=function(){var t=new hs;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()};hn.prototype.computeIntersection=function(t,n,r,i){this._inputLines[0][0]=t,this._inputLines[0][1]=n,this._inputLines[1][0]=r,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,n,r,i)};hn.prototype.getIntersectionNum=function(){return this._result};hn.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],n=this.getEdgeDistance(t,0),r=this.getEdgeDistance(t,1);n>r?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}};hn.prototype.isProper=function(){return this.hasIntersection()&&this._isProper};hn.prototype.setPrecisionModel=function(t){this._precisionModel=t};hn.prototype.isInteriorIntersection=function(){var t=this;if(arguments.length===0)return!!(this.isInteriorIntersection(0)||this.isInteriorIntersection(1));if(arguments.length===1){for(var n=arguments[0],r=0;r<this._result;r++)if(!(t._intPt[r].equals2D(t._inputLines[n][0])||t._intPt[r].equals2D(t._inputLines[n][1])))return!0;return!1}};hn.prototype.getIntersection=function(t){return this._intPt[t]};hn.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper};hn.prototype.hasIntersection=function(){return this._result!==hn.NO_INTERSECTION};hn.prototype.getEdgeDistance=function(t,n){var r=hn.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1]);return r};hn.prototype.isCollinear=function(){return this._result===hn.COLLINEAR_INTERSECTION};hn.prototype.toString=function(){return Ti.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Ti.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()};hn.prototype.getEndpoint=function(t,n){return this._inputLines[t][n]};hn.prototype.isIntersection=function(t){for(var n=this,r=0;r<this._result;r++)if(n._intPt[r].equals2D(t))return!0;return!1};hn.prototype.getIntersectionAlongSegment=function(t,n){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][n]]};hn.prototype.interfaces_=function(){return[]};hn.prototype.getClass=function(){return hn};hn.computeEdgeDistance=function(t,n,r){var i=Math.abs(r.x-n.x),o=Math.abs(r.y-n.y),u=-1;if(t.equals(n))u=0;else if(t.equals(r))i>o?u=i:u=o;else{var f=Math.abs(t.x-n.x),d=Math.abs(t.y-n.y);i>o?u=f:u=d,u===0&&!t.equals(n)&&(u=Math.max(f,d))}return me.isTrue(!(u===0&&!t.equals(n)),"Bad distance calculation"),u};hn.nonRobustComputeEdgeDistance=function(t,n,r){var i=t.x-n.x,o=t.y-n.y,u=Math.sqrt(i*i+o*o);return me.isTrue(!(u===0&&!t.equals(n)),"Invalid distance calculation"),u};du.DONT_INTERSECT.get=function(){return 0};du.DO_INTERSECT.get=function(){return 1};du.COLLINEAR.get=function(){return 2};du.NO_INTERSECTION.get=function(){return 0};du.POINT_INTERSECTION.get=function(){return 1};du.COLLINEAR_INTERSECTION.get=function(){return 2};Object.defineProperties(hn,du);var ba=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isInSegmentEnvelopes=function(r){var i=new Jt(this._inputLines[0][0],this._inputLines[0][1]),o=new Jt(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(r)&&o.contains(r)},t.prototype.computeIntersection=function(){if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];if(this._isProper=!1,Jt.intersects(i,o,r)&&Gt.orientationIndex(i,o,r)===0&&Gt.orientationIndex(o,i,r)===0)return this._isProper=!0,(r.equals(i)||r.equals(o))&&(this._isProper=!1),this._result=e.POINT_INTERSECTION,null;this._result=e.NO_INTERSECTION}else return e.prototype.computeIntersection.apply(this,arguments)},t.prototype.normalizeToMinimum=function(r,i,o,u,f){f.x=this.smallestInAbsValue(r.x,i.x,o.x,u.x),f.y=this.smallestInAbsValue(r.y,i.y,o.y,u.y),r.x-=f.x,r.y-=f.y,i.x-=f.x,i.y-=f.y,o.x-=f.x,o.y-=f.y,u.x-=f.x,u.y-=f.y},t.prototype.safeHCoordinateIntersection=function(r,i,o,u){var f=null;try{f=Pi.intersection(r,i,o,u)}catch(d){if(d instanceof Tl)f=t.nearestEndpoint(r,i,o,u);else throw d}finally{}return f},t.prototype.intersection=function(r,i,o,u){var f=this.intersectionWithNormalization(r,i,o,u);return this.isInSegmentEnvelopes(f)||(f=new it(t.nearestEndpoint(r,i,o,u))),this._precisionModel!==null&&this._precisionModel.makePrecise(f),f},t.prototype.smallestInAbsValue=function(r,i,o,u){var f=r,d=Math.abs(f);return Math.abs(i)<d&&(f=i,d=Math.abs(i)),Math.abs(o)<d&&(f=o,d=Math.abs(o)),Math.abs(u)<d&&(f=u),f},t.prototype.checkDD=function(r,i,o,u,f){var d=Sr.intersection(r,i,o,u),_=this.isInSegmentEnvelopes(d);Yn.out.println("DD in env = "+_+"  --------------------- "+d),f.distance(d)>1e-4&&Yn.out.println("Distance = "+f.distance(d))},t.prototype.intersectionWithNormalization=function(r,i,o,u){var f=new it(r),d=new it(i),_=new it(o),y=new it(u),E=new it;this.normalizeToEnvCentre(f,d,_,y,E);var S=this.safeHCoordinateIntersection(f,d,_,y);return S.x+=E.x,S.y+=E.y,S},t.prototype.computeCollinearIntersection=function(r,i,o,u){var f=Jt.intersects(r,i,o),d=Jt.intersects(r,i,u),_=Jt.intersects(o,u,r),y=Jt.intersects(o,u,i);return f&&d?(this._intPt[0]=o,this._intPt[1]=u,e.COLLINEAR_INTERSECTION):_&&y?(this._intPt[0]=r,this._intPt[1]=i,e.COLLINEAR_INTERSECTION):f&&_?(this._intPt[0]=o,this._intPt[1]=r,o.equals(r)&&!d&&!y?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):f&&y?(this._intPt[0]=o,this._intPt[1]=i,o.equals(i)&&!d&&!_?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):d&&_?(this._intPt[0]=u,this._intPt[1]=r,u.equals(r)&&!f&&!y?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):d&&y?(this._intPt[0]=u,this._intPt[1]=i,u.equals(i)&&!f&&!_?e.POINT_INTERSECTION:e.COLLINEAR_INTERSECTION):e.NO_INTERSECTION},t.prototype.normalizeToEnvCentre=function(r,i,o,u,f){var d=r.x<i.x?r.x:i.x,_=r.y<i.y?r.y:i.y,y=r.x>i.x?r.x:i.x,E=r.y>i.y?r.y:i.y,S=o.x<u.x?o.x:u.x,T=o.y<u.y?o.y:u.y,I=o.x>u.x?o.x:u.x,z=o.y>u.y?o.y:u.y,G=d>S?d:S,Q=y<I?y:I,$=_>T?_:T,rt=E<z?E:z,mt=(G+Q)/2,bt=($+rt)/2;f.x=mt,f.y=bt,r.x-=f.x,r.y-=f.y,i.x-=f.x,i.y-=f.y,o.x-=f.x,o.y-=f.y,u.x-=f.x,u.y-=f.y},t.prototype.computeIntersect=function(r,i,o,u){if(this._isProper=!1,!Jt.intersects(r,i,o,u))return e.NO_INTERSECTION;var f=Gt.orientationIndex(r,i,o),d=Gt.orientationIndex(r,i,u);if(f>0&&d>0||f<0&&d<0)return e.NO_INTERSECTION;var _=Gt.orientationIndex(o,u,r),y=Gt.orientationIndex(o,u,i);if(_>0&&y>0||_<0&&y<0)return e.NO_INTERSECTION;var E=f===0&&d===0&&_===0&&y===0;return E?this.computeCollinearIntersection(r,i,o,u):(f===0||d===0||_===0||y===0?(this._isProper=!1,r.equals2D(o)||r.equals2D(u)?this._intPt[0]=r:i.equals2D(o)||i.equals2D(u)?this._intPt[0]=i:f===0?this._intPt[0]=new it(o):d===0?this._intPt[0]=new it(u):_===0?this._intPt[0]=new it(r):y===0&&(this._intPt[0]=new it(i))):(this._isProper=!0,this._intPt[0]=this.intersection(r,i,o,u)),e.POINT_INTERSECTION)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.nearestEndpoint=function(r,i,o,u){var f=r,d=Gt.distancePointLine(r,o,u),_=Gt.distancePointLine(i,o,u);return _<d&&(d=_,f=i),_=Gt.distancePointLine(o,r,i),_<d&&(d=_,f=o),_=Gt.distancePointLine(u,r,i),_<d&&(d=_,f=u),f},t}(hn),tu=function(){};tu.prototype.interfaces_=function(){return[]};tu.prototype.getClass=function(){return tu};tu.orientationIndex=function(t,n,r){var i=n.x-t.x,o=n.y-t.y,u=r.x-n.x,f=r.y-n.y;return tu.signOfDet2x2(i,o,u,f)};tu.signOfDet2x2=function(t,n,r,i){var o=null,u=null,f=null;if(o=1,t===0||i===0)return n===0||r===0?0:n>0?r>0?-o:o:r>0?o:-o;if(n===0||r===0)return i>0?t>0?o:-o:t>0?-o:o;if(n>0?i>0?n<=i||(o=-o,u=t,t=r,r=u,u=n,n=i,i=u):n<=-i?(o=-o,r=-r,i=-i):(u=t,t=-r,r=u,u=n,n=-i,i=u):i>0?-n<=i?(o=-o,t=-t,n=-n):(u=-t,t=r,r=u,u=-n,n=i,i=u):n>=i?(t=-t,n=-n,r=-r,i=-i):(o=-o,u=-t,t=-r,r=u,u=-n,n=-i,i=u),t>0)if(r>0){if(!(t<=r))return o}else return o;else{if(r>0)return-o;if(t>=r)o=-o,t=-t,r=-r;else return-o}for(;;){if(f=Math.floor(r/t),r=r-f*t,i=i-f*n,i<0)return-o;if(i>n)return o;if(t>r+r){if(n<i+i)return o}else{if(n>i+i)return-o;r=t-r,i=n-i,o=-o}if(i===0)return r===0?0:-o;if(r===0||(f=Math.floor(t/r),t=t-f*r,n=n-f*i,n<0))return o;if(n>i)return-o;if(r>t+t){if(i<n+n)return-o}else{if(i>n+n)return o;t=r-t,n=i-n,o=-o}if(n===0)return t===0?0:o;if(t===0)return-o}};var $i=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};$i.prototype.countSegment=function(t,n){if(t.x<this._p.x&&n.x<this._p.x)return null;if(this._p.x===n.x&&this._p.y===n.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&n.y===this._p.y){var r=t.x,i=n.x;return r>i&&(r=n.x,i=t.x),this._p.x>=r&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&n.y<=this._p.y||n.y>this._p.y&&t.y<=this._p.y){var o=t.x-this._p.x,u=t.y-this._p.y,f=n.x-this._p.x,d=n.y-this._p.y,_=tu.signOfDet2x2(o,u,f,d);if(_===0)return this._isPointOnSegment=!0,null;d<u&&(_=-_),_>0&&this._crossingCount++}};$i.prototype.isPointInPolygon=function(){return this.getLocation()!==lt.EXTERIOR};$i.prototype.getLocation=function(){return this._isPointOnSegment?lt.BOUNDARY:this._crossingCount%2===1?lt.INTERIOR:lt.EXTERIOR};$i.prototype.isOnSegment=function(){return this._isPointOnSegment};$i.prototype.interfaces_=function(){return[]};$i.prototype.getClass=function(){return $i};$i.locatePointInRing=function(){if(arguments[0]instanceof it&&se(arguments[1],De)){for(var t=arguments[0],n=arguments[1],r=new $i(t),i=new it,o=new it,u=1;u<n.size();u++)if(n.getCoordinate(u,i),n.getCoordinate(u-1,o),r.countSegment(i,o),r.isOnSegment())return r.getLocation();return r.getLocation()}else if(arguments[0]instanceof it&&arguments[1]instanceof Array){for(var f=arguments[0],d=arguments[1],_=new $i(f),y=1;y<d.length;y++){var E=d[y],S=d[y-1];if(_.countSegment(E,S),_.isOnSegment())return _.getLocation()}return _.getLocation()}};var Gt=function(){},gu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Gt.prototype.interfaces_=function(){return[]};Gt.prototype.getClass=function(){return Gt};Gt.orientationIndex=function(t,n,r){return Sr.orientationIndex(t,n,r)};Gt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var n=0,r=t[0].x,i=1;i<t.length-1;i++){var o=t[i].x-r,u=t[i+1].y,f=t[i-1].y;n+=o*(f-u)}return n/2}else if(se(arguments[0],De)){var d=arguments[0],_=d.size();if(_<3)return 0;var y=new it,E=new it,S=new it;d.getCoordinate(0,E),d.getCoordinate(1,S);var T=E.x;S.x-=T;for(var I=0,z=1;z<_-1;z++)y.y=E.y,E.x=S.x,E.y=S.y,d.getCoordinate(z+1,S),S.x-=T,I+=E.x*(y.y-S.y);return I/2}};Gt.distanceLineLine=function(t,n,r,i){if(t.equals(n))return Gt.distancePointLine(t,r,i);if(r.equals(i))return Gt.distancePointLine(i,t,n);var o=!1;if(!Jt.intersects(t,n,r,i))o=!0;else{var u=(n.x-t.x)*(i.y-r.y)-(n.y-t.y)*(i.x-r.x);if(u===0)o=!0;else{var f=(t.y-r.y)*(i.x-r.x)-(t.x-r.x)*(i.y-r.y),d=(t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y),_=d/u,y=f/u;(y<0||y>1||_<0||_>1)&&(o=!0)}}return o?ii.min(Gt.distancePointLine(t,r,i),Gt.distancePointLine(n,r,i),Gt.distancePointLine(r,t,n),Gt.distancePointLine(i,t,n)):0};Gt.isPointInRing=function(t,n){return Gt.locatePointInRing(t,n)!==lt.EXTERIOR};Gt.computeLength=function(t){var n=t.size();if(n<=1)return 0;var r=0,i=new it;t.getCoordinate(0,i);for(var o=i.x,u=i.y,f=1;f<n;f++){t.getCoordinate(f,i);var d=i.x,_=i.y,y=d-o,E=_-u;r+=Math.sqrt(y*y+E*E),o=d,u=_}return r};Gt.isCCW=function(t){var n=t.length-1;if(n<3)throw new ln("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],i=0,o=1;o<=n;o++){var u=t[o];u.y>r.y&&(r=u,i=o)}var f=i;do f=f-1,f<0&&(f=n);while(t[f].equals2D(r)&&f!==i);var d=i;do d=(d+1)%n;while(t[d].equals2D(r)&&d!==i);var _=t[f],y=t[d];if(_.equals2D(r)||y.equals2D(r)||_.equals2D(y))return!1;var E=Gt.computeOrientation(_,r,y),S=!1;return E===0?S=_.x>y.x:S=E>0,S};Gt.locatePointInRing=function(t,n){return $i.locatePointInRing(t,n)};Gt.distancePointLinePerpendicular=function(t,n,r){var i=(r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y),o=((n.y-t.y)*(r.x-n.x)-(n.x-t.x)*(r.y-n.y))/i;return Math.abs(o)*Math.sqrt(i)};Gt.computeOrientation=function(t,n,r){return Gt.orientationIndex(t,n,r)};Gt.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];if(n.length===0)throw new ln("Line array must contain at least one vertex");for(var r=t.distance(n[0]),i=0;i<n.length-1;i++){var o=Gt.distancePointLine(t,n[i],n[i+1]);o<r&&(r=o)}return r}else if(arguments.length===3){var u=arguments[0],f=arguments[1],d=arguments[2];if(f.x===d.x&&f.y===d.y)return u.distance(f);var _=(d.x-f.x)*(d.x-f.x)+(d.y-f.y)*(d.y-f.y),y=((u.x-f.x)*(d.x-f.x)+(u.y-f.y)*(d.y-f.y))/_;if(y<=0)return u.distance(f);if(y>=1)return u.distance(d);var E=((f.y-u.y)*(d.x-f.x)-(f.x-u.x)*(d.y-f.y))/_;return Math.abs(E)*Math.sqrt(_)}};Gt.isOnLine=function(t,n){for(var r=new ba,i=1;i<n.length;i++){var o=n[i-1],u=n[i];if(r.computeIntersection(t,o,u),r.hasIntersection())return!0}return!1};gu.CLOCKWISE.get=function(){return-1};gu.RIGHT.get=function(){return Gt.CLOCKWISE};gu.COUNTERCLOCKWISE.get=function(){return 1};gu.LEFT.get=function(){return Gt.COUNTERCLOCKWISE};gu.COLLINEAR.get=function(){return 0};gu.STRAIGHT.get=function(){return Gt.COLLINEAR};Object.defineProperties(Gt,gu);var io=function(){};io.prototype.filter=function(t){};io.prototype.interfaces_=function(){return[]};io.prototype.getClass=function(){return io};var ie=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Ns={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ie.prototype.isGeometryCollection=function(){return this.getSortIndex()===ie.SORTINDEX_GEOMETRYCOLLECTION};ie.prototype.getFactory=function(){return this._factory};ie.prototype.getGeometryN=function(t){return this};ie.prototype.getArea=function(){return 0};ie.prototype.isRectangle=function(){return!1};ie.prototype.equals=function(){if(arguments[0]instanceof ie){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}else if(arguments[0]instanceof Object){var n=arguments[0];if(!(n instanceof ie))return!1;var r=n;return this.equalsExact(r)}};ie.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)};ie.prototype.geometryChanged=function(){this.apply(ie.geometryChangedFilter)};ie.prototype.geometryChangedAction=function(){this._envelope=null};ie.prototype.equalsNorm=function(t){return t===null?!1:this.norm().equalsExact(t.norm())};ie.prototype.getLength=function(){return 0};ie.prototype.getNumGeometries=function(){return 1};ie.prototype.compareTo=function(){if(arguments.length===1){var t=arguments[0],n=t;return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(t)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.getSortIndex()!==r.getSortIndex()?this.getSortIndex()-r.getSortIndex():this.isEmpty()&&r.isEmpty()?0:this.isEmpty()?-1:r.isEmpty()?1:this.compareToSameClass(r,i)}};ie.prototype.getUserData=function(){return this._userData};ie.prototype.getSRID=function(){return this._SRID};ie.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())};ie.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ie.SORTINDEX_GEOMETRYCOLLECTION)throw new ln("This method does not support GeometryCollection arguments")};ie.prototype.equal=function(t,n,r){return r===0?t.equals(n):t.distance(n)<=r};ie.prototype.norm=function(){var t=this.copy();return t.normalize(),t};ie.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()};ie.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Jt(this._envelope)};ie.prototype.setSRID=function(t){this._SRID=t};ie.prototype.setUserData=function(t){this._userData=t};ie.prototype.compare=function(t,n){for(var r=t.iterator(),i=n.iterator();r.hasNext()&&i.hasNext();){var o=r.next(),u=i.next(),f=o.compareTo(u);if(f!==0)return f}return r.hasNext()?1:i.hasNext()?-1:0};ie.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()};ie.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ie.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ie.SORTINDEX_MULTIPOINT||this.getSortIndex()===ie.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ie.SORTINDEX_MULTIPOLYGON};ie.prototype.interfaces_=function(){return[mp,vi,Ci]};ie.prototype.getClass=function(){return ie};ie.hasNonEmptyElements=function(t){for(var n=0;n<t.length;n++)if(!t[n].isEmpty())return!0;return!1};ie.hasNullElements=function(t){for(var n=0;n<t.length;n++)if(t[n]===null)return!0;return!1};Ns.serialVersionUID.get=function(){return 8763622679187377e3};Ns.SORTINDEX_POINT.get=function(){return 0};Ns.SORTINDEX_MULTIPOINT.get=function(){return 1};Ns.SORTINDEX_LINESTRING.get=function(){return 2};Ns.SORTINDEX_LINEARRING.get=function(){return 3};Ns.SORTINDEX_MULTILINESTRING.get=function(){return 4};Ns.SORTINDEX_POLYGON.get=function(){return 5};Ns.SORTINDEX_MULTIPOLYGON.get=function(){return 6};Ns.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7};Ns.geometryChangedFilter.get=function(){return Hg};Object.defineProperties(ie,Ns);var Hg=function(){};Hg.interfaces_=function(){return[io]};Hg.filter=function(t){t.geometryChangedAction()};var bs=function(){};bs.prototype.filter=function(t){};bs.prototype.interfaces_=function(){return[]};bs.prototype.getClass=function(){return bs};var mi=function(){},lo={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};mi.prototype.isInBoundary=function(t){};mi.prototype.interfaces_=function(){return[]};mi.prototype.getClass=function(){return mi};lo.Mod2BoundaryNodeRule.get=function(){return ul};lo.EndPointBoundaryNodeRule.get=function(){return ll};lo.MultiValentEndPointBoundaryNodeRule.get=function(){return cl};lo.MonoValentEndPointBoundaryNodeRule.get=function(){return hl};lo.MOD2_BOUNDARY_RULE.get=function(){return new ul};lo.ENDPOINT_BOUNDARY_RULE.get=function(){return new ll};lo.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new cl};lo.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new hl};lo.OGC_SFS_BOUNDARY_RULE.get=function(){return mi.MOD2_BOUNDARY_RULE};Object.defineProperties(mi,lo);var ul=function(){};ul.prototype.isInBoundary=function(t){return t%2===1};ul.prototype.interfaces_=function(){return[mi]};ul.prototype.getClass=function(){return ul};var ll=function(){};ll.prototype.isInBoundary=function(t){return t>0};ll.prototype.interfaces_=function(){return[mi]};ll.prototype.getClass=function(){return ll};var cl=function(){};cl.prototype.isInBoundary=function(t){return t>1};cl.prototype.interfaces_=function(){return[mi]};cl.prototype.getClass=function(){return cl};var hl=function(){};hl.prototype.isInBoundary=function(t){return t===1};hl.prototype.interfaces_=function(){return[mi]};hl.prototype.getClass=function(){return hl};var An=function(){};An.prototype.add=function(){};An.prototype.addAll=function(){};An.prototype.isEmpty=function(){};An.prototype.iterator=function(){};An.prototype.size=function(){};An.prototype.toArray=function(){};An.prototype.remove=function(){};function Zg(e){this.message=e||""}Zg.prototype=new Error;Zg.prototype.name="IndexOutOfBoundsException";var Al=function(){};Al.prototype.hasNext=function(){};Al.prototype.next=function(){};Al.prototype.remove=function(){};var Ii=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(){},t.prototype.set=function(){},t.prototype.isEmpty=function(){},t}(An);function Dl(e){this.message=e||""}Dl.prototype=new Error;Dl.prototype.name="NoSuchElementException";var Ot=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof An&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.ensureCapacity=function(){},t.prototype.interfaces_=function(){return[e,An]},t.prototype.add=function(r){return arguments.length===1?this.array_.push(r):this.array_.splice(arguments[0],arguments[1]),!0},t.prototype.clear=function(){this.array_=[]},t.prototype.addAll=function(r){for(var i=this,o=r.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.set=function(r,i){var o=this.array_[r];return this.array_[r]=i,o},t.prototype.iterator=function(){return new uw(this)},t.prototype.get=function(r){if(r<0||r>=this.size())throw new Zg;return this.array_[r]},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.size=function(){return this.array_.length},t.prototype.toArray=function(){for(var r=this,i=[],o=0,u=this.array_.length;o<u;o++)i.push(r.array_[o]);return i},t.prototype.remove=function(r){for(var i=this,o=!1,u=0,f=this.array_.length;u<f;u++)if(i.array_[u]===r){i.array_.splice(u,1),o=!0;break}return o},t}(Ii),uw=function(e){function t(n){e.call(this),this.arrayList_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Dl;return this.arrayList_.get(this.position_++)},t.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},t.prototype.set=function(r){return this.arrayList_.set(this.position_-1,r)},t.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},t}(Al),ah=function(e){function t(){if(e.call(this),arguments.length!==0){if(arguments.length===1){var r=arguments[0];this.ensureCapacity(r.length),this.add(r,!0)}else if(arguments.length===2){var i=arguments[0],o=arguments[1];this.ensureCapacity(i.length),this.add(i,o)}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(i){return this.get(i)},t.prototype.addAll=function(){var i=this;if(arguments.length===2){for(var o=arguments[0],u=arguments[1],f=!1,d=o.iterator();d.hasNext();)i.add(d.next(),u),f=!0;return f}else return e.prototype.addAll.apply(this,arguments)},t.prototype.clone=function(){for(var i=this,o=e.prototype.clone.call(this),u=0;u<this.size();u++)o.add(u,i.get(u).copy());return o},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){var i=this;if(arguments.length===1){var o=arguments[0];e.prototype.add.call(this,o)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var u=arguments[0],f=arguments[1];return this.add(u,f,!0),!0}else if(arguments[0]instanceof it&&typeof arguments[1]=="boolean"){var d=arguments[0],_=arguments[1];if(!_&&this.size()>=1){var y=this.get(this.size()-1);if(y.equals2D(d))return null}e.prototype.add.call(this,d)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var E=arguments[0],S=arguments[1];return this.add(E,S),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var T=arguments[0],I=arguments[1],z=arguments[2];if(z)for(var G=0;G<T.length;G++)i.add(T[G],I);else for(var Q=T.length-1;Q>=0;Q--)i.add(T[Q],I);return!0}else if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof it){var $=arguments[0],rt=arguments[1],mt=arguments[2];if(!mt){var bt=this.size();if(bt>0){if($>0){var Dt=this.get($-1);if(Dt.equals2D(rt))return null}if($<bt){var Bt=this.get($);if(Bt.equals2D(rt))return null}}}e.prototype.add.call(this,$,rt)}}else if(arguments.length===4){var Ft=arguments[0],Nt=arguments[1],te=arguments[2],Ht=arguments[3],ee=1;te>Ht&&(ee=-1);for(var Ie=te;Ie!==Ht;Ie+=ee)i.add(Ft[Ie],Nt);return!0}},t.prototype.closeRing=function(){this.size()>0&&this.add(new it(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,n),t}(Ot),Le=function(){},yp={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};yp.ForwardComparator.get=function(){return Gc};yp.BidirectionalComparator.get=function(){return fl};yp.coordArrayType.get=function(){return new Array(0).fill(null)};Le.prototype.interfaces_=function(){return[]};Le.prototype.getClass=function(){return Le};Le.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))};Le.ptNotInList=function(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(Le.indexOf(i,n)<0)return i}return null};Le.scroll=function(t,n){var r=Le.indexOf(n,t);if(r<0)return null;var i=new Array(t.length).fill(null);Yn.arraycopy(t,r,i,0,t.length-r),Yn.arraycopy(t,0,i,t.length-r,r),Yn.arraycopy(i,0,t,0,t.length)};Le.equals=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];if(t===n)return!0;if(t===null||n===null||t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].equals(n[r]))return!1;return!0}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];if(i===o)return!0;if(i===null||o===null||i.length!==o.length)return!1;for(var f=0;f<i.length;f++)if(u.compare(i[f],o[f])!==0)return!1;return!0}};Le.intersection=function(t,n){for(var r=new ah,i=0;i<t.length;i++)n.intersects(t[i])&&r.add(t[i],!0);return r.toCoordinateArray()};Le.hasRepeatedPoints=function(t){for(var n=1;n<t.length;n++)if(t[n-1].equals(t[n]))return!0;return!1};Le.removeRepeatedPoints=function(t){if(!Le.hasRepeatedPoints(t))return t;var n=new ah(t,!1);return n.toCoordinateArray()};Le.reverse=function(t){for(var n=t.length-1,r=Math.trunc(n/2),i=0;i<=r;i++){var o=t[i];t[i]=t[n-i],t[n-i]=o}};Le.removeNull=function(t){for(var n=0,r=0;r<t.length;r++)t[r]!==null&&n++;var i=new Array(n).fill(null);if(n===0)return i;for(var o=0,u=0;u<t.length;u++)t[u]!==null&&(i[o++]=t[u]);return i};Le.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],n=new Array(t.length).fill(null),r=0;r<t.length;r++)n[r]=new it(t[r]);return n}else if(arguments.length===5)for(var i=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3],d=arguments[4],_=0;_<d;_++)u[f+_]=new it(i[o+_])};Le.isEqualReversed=function(t,n){for(var r=0;r<t.length;r++){var i=t[r],o=n[t.length-r-1];if(i.compareTo(o)!==0)return!1}return!0};Le.envelope=function(t){for(var n=new Jt,r=0;r<t.length;r++)n.expandToInclude(t[r]);return n};Le.toCoordinateArray=function(t){return t.toArray(Le.coordArrayType)};Le.atLeastNCoordinatesOrNothing=function(t,n){return n.length>=t?n:[]};Le.indexOf=function(t,n){for(var r=0;r<n.length;r++)if(t.equals(n[r]))return r;return-1};Le.increasingDirection=function(t){for(var n=0;n<Math.trunc(t.length/2);n++){var r=t.length-1-n,i=t[n].compareTo(t[r]);if(i!==0)return i}return 1};Le.compare=function(t,n){for(var r=0;r<t.length&&r<n.length;){var i=t[r].compareTo(n[r]);if(i!==0)return i;r++}return r<n.length?-1:r<t.length?1:0};Le.minCoordinate=function(t){for(var n=null,r=0;r<t.length;r++)(n===null||n.compareTo(t[r])>0)&&(n=t[r]);return n};Le.extract=function(t,n,r){n=ii.clamp(n,0,t.length),r=ii.clamp(r,-1,t.length);var i=r-n+1;r<0&&(i=0),n>=t.length&&(i=0),r<n&&(i=0);var o=new Array(i).fill(null);if(i===0)return o;for(var u=0,f=n;f<=r;f++)o[u++]=t[f];return o};Object.defineProperties(Le,yp);var Gc=function(){};Gc.prototype.compare=function(t,n){var r=t,i=n;return Le.compare(r,i)};Gc.prototype.interfaces_=function(){return[ol]};Gc.prototype.getClass=function(){return Gc};var fl=function(){};fl.prototype.compare=function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(r.length===0)return 0;var o=Le.compare(r,i),u=Le.isEqualReversed(r,i);return u?0:o};fl.prototype.OLDcompare=function(t,n){var r=t,i=n;if(r.length<i.length)return-1;if(r.length>i.length)return 1;if(r.length===0)return 0;for(var o=Le.increasingDirection(r),u=Le.increasingDirection(i),f=o>0?0:r.length-1,d=u>0?0:r.length-1,_=0;_<r.length;_++){var y=r[f].compareTo(i[d]);if(y!==0)return y;f+=o,d+=u}return 0};fl.prototype.interfaces_=function(){return[ol]};fl.prototype.getClass=function(){return fl};var mu=function(){};mu.prototype.get=function(){};mu.prototype.put=function(){};mu.prototype.size=function(){};mu.prototype.values=function(){};mu.prototype.entrySet=function(){};var lw=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(mu);function uh(e){this.message=e||""}uh.prototype=new Error;uh.prototype.name="OperationNotSupported";function vp(){}vp.prototype=new An;vp.prototype.contains=function(){};var Kg=function(e){function t(){e.call(this),this.array_=[],arguments[0]instanceof An&&this.addAll(arguments[0])}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.contains=function(r){for(var i=this,o=0,u=this.array_.length;o<u;o++){var f=i.array_[o];if(f===r)return!0}return!1},t.prototype.add=function(r){return this.contains(r)?!1:(this.array_.push(r),!0)},t.prototype.addAll=function(r){for(var i=this,o=r.iterator();o.hasNext();)i.add(o.next());return!0},t.prototype.remove=function(r){throw new Error},t.prototype.size=function(){return this.array_.length},t.prototype.isEmpty=function(){return this.array_.length===0},t.prototype.toArray=function(){for(var r=this,i=[],o=0,u=this.array_.length;o<u;o++)i.push(r.array_[o]);return i},t.prototype.iterator=function(){return new cw(this)},t}(vp),cw=function(e){function t(n){e.call(this),this.hashSet_=n,this.position_=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Dl;return this.hashSet_.array_[this.position_++]},t.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},t.prototype.remove=function(){throw new uh},t}(Al),Ws=0,ta=1;function R_(e){return e===null?Ws:e.color}function Qe(e){return e===null?null:e.parent}function Hs(e,t){e!==null&&(e.color=t)}function jd(e){return e===null?null:e.left}function O_(e){return e===null?null:e.right}function ir(){this.root_=null,this.size_=0}ir.prototype=new lw;ir.prototype.get=function(e){for(var t=this.root_;t!==null;){var n=e.compareTo(t.key);if(n<0)t=t.left;else if(n>0)t=t.right;else return t.value}return null};ir.prototype.put=function(e,t){if(this.root_===null)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:Ws,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n=this.root_,r,i;do if(r=n,i=e.compareTo(n.key),i<0)n=n.left;else if(i>0)n=n.right;else{var o=n.value;return n.value=t,o}while(n!==null);var u={key:e,left:null,right:null,value:t,parent:r,color:Ws,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?r.left=u:r.right=u,this.fixAfterInsertion(u),this.size_++,null};ir.prototype.fixAfterInsertion=function(e){var t=this;for(e.color=ta;e!=null&&e!==this.root_&&e.parent.color===ta;)if(Qe(e)===jd(Qe(Qe(e)))){var n=O_(Qe(Qe(e)));R_(n)===ta?(Hs(Qe(e),Ws),Hs(n,Ws),Hs(Qe(Qe(e)),ta),e=Qe(Qe(e))):(e===O_(Qe(e))&&(e=Qe(e),t.rotateLeft(e)),Hs(Qe(e),Ws),Hs(Qe(Qe(e)),ta),t.rotateRight(Qe(Qe(e))))}else{var r=jd(Qe(Qe(e)));R_(r)===ta?(Hs(Qe(e),Ws),Hs(r,Ws),Hs(Qe(Qe(e)),ta),e=Qe(Qe(e))):(e===jd(Qe(e))&&(e=Qe(e),t.rotateRight(e)),Hs(Qe(e),Ws),Hs(Qe(Qe(e)),ta),t.rotateLeft(Qe(Qe(e))))}this.root_.color=Ws};ir.prototype.values=function(){var e=new Ot,t=this.getFirstEntry();if(t!==null)for(e.add(t.value);(t=ir.successor(t))!==null;)e.add(t.value);return e};ir.prototype.entrySet=function(){var e=new Kg,t=this.getFirstEntry();if(t!==null)for(e.add(t);(t=ir.successor(t))!==null;)e.add(t);return e};ir.prototype.rotateLeft=function(e){if(e!=null){var t=e.right;e.right=t.left,t.left!=null&&(t.left.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}};ir.prototype.rotateRight=function(e){if(e!=null){var t=e.left;e.left=t.right,t.right!=null&&(t.right.parent=e),t.parent=e.parent,e.parent===null?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}};ir.prototype.getFirstEntry=function(){var e=this.root_;if(e!=null)for(;e.left!=null;)e=e.left;return e};ir.successor=function(e){if(e===null)return null;if(e.right!==null){for(var t=e.right;t.left!==null;)t=t.left;return t}else{for(var n=e.parent,r=e;n!==null&&r===n.right;)r=n,n=n.parent;return n}};ir.prototype.size=function(){return this.size_};var Uc=function(){};Uc.prototype.interfaces_=function(){return[]};Uc.prototype.getClass=function(){return Uc};function gv(){}gv.prototype=new vp;function ns(){this.array_=[],arguments[0]instanceof An&&this.addAll(arguments[0])}ns.prototype=new gv;ns.prototype.contains=function(e){for(var t=this,n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===0)return!0}return!1};ns.prototype.add=function(e){var t=this;if(this.contains(e))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=t.array_[n];if(i.compareTo(e)===1)return t.array_.splice(n,0,e),!0}return this.array_.push(e),!0};ns.prototype.addAll=function(e){for(var t=this,n=e.iterator();n.hasNext();)t.add(n.next());return!0};ns.prototype.remove=function(e){throw new uh};ns.prototype.size=function(){return this.array_.length};ns.prototype.isEmpty=function(){return this.array_.length===0};ns.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};ns.prototype.iterator=function(){return new Cp(this)};var Cp=function(e){this.treeSet_=e,this.position_=0};Cp.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Dl;return this.treeSet_.array_[this.position_++]};Cp.prototype.hasNext=function(){return this.position_<this.treeSet_.size()};Cp.prototype.remove=function(){throw new uh};var ca=function(){};ca.sort=function(){var t=arguments[0],n,r,i,o;if(arguments.length===1)o=function(f,d){return f.compareTo(d)},t.sort(o);else if(arguments.length===2)i=arguments[1],o=function(f,d){return i.compare(f,d)},t.sort(o);else if(arguments.length===3){r=t.slice(arguments[1],arguments[2]),r.sort();var u=t.slice(0,arguments[1]).concat(r,t.slice(arguments[2],t.length));for(t.splice(0,t.length),n=0;n<u.length;n++)t.push(u[n])}else if(arguments.length===4)for(r=t.slice(arguments[1],arguments[2]),i=arguments[3],o=function(f,d){return i.compare(f,d)},r.sort(o),u=t.slice(0,arguments[1]).concat(r,t.slice(arguments[2],t.length)),t.splice(0,t.length),n=0;n<u.length;n++)t.push(u[n])};ca.asList=function(t){for(var n=new Ot,r=0,i=t.length;r<i;r++)n.add(t[r]);return n};var Ne=function(){},Fi={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Fi.P.get=function(){return 0};Fi.L.get=function(){return 1};Fi.A.get=function(){return 2};Fi.FALSE.get=function(){return-1};Fi.TRUE.get=function(){return-2};Fi.DONTCARE.get=function(){return-3};Fi.SYM_FALSE.get=function(){return"F"};Fi.SYM_TRUE.get=function(){return"T"};Fi.SYM_DONTCARE.get=function(){return"*"};Fi.SYM_P.get=function(){return"0"};Fi.SYM_L.get=function(){return"1"};Fi.SYM_A.get=function(){return"2"};Ne.prototype.interfaces_=function(){return[]};Ne.prototype.getClass=function(){return Ne};Ne.toDimensionSymbol=function(t){switch(t){case Ne.FALSE:return Ne.SYM_FALSE;case Ne.TRUE:return Ne.SYM_TRUE;case Ne.DONTCARE:return Ne.SYM_DONTCARE;case Ne.P:return Ne.SYM_P;case Ne.L:return Ne.SYM_L;case Ne.A:return Ne.SYM_A}throw new ln("Unknown dimension value: "+t)};Ne.toDimensionValue=function(t){switch(zc.toUpperCase(t)){case Ne.SYM_FALSE:return Ne.FALSE;case Ne.SYM_TRUE:return Ne.TRUE;case Ne.SYM_DONTCARE:return Ne.DONTCARE;case Ne.SYM_P:return Ne.P;case Ne.SYM_L:return Ne.L;case Ne.SYM_A:return Ne.A}throw new ln("Unknown dimension symbol: "+t)};Object.defineProperties(Ne,Fi);var rs=function(){};rs.prototype.filter=function(t){};rs.prototype.interfaces_=function(){return[]};rs.prototype.getClass=function(){return rs};var Ai=function(){};Ai.prototype.filter=function(t,n){};Ai.prototype.isDone=function(){};Ai.prototype.isGeometryChanged=function(){};Ai.prototype.interfaces_=function(){return[]};Ai.prototype.getClass=function(){return Ai};var mr=function(e){function t(r,i){if(e.call(this,i),this._geometries=r||[],e.hasNullElements(this._geometries))throw new ln("geometries must not contain null elements")}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){for(var i=this,o=new Jt,u=0;u<this._geometries.length;u++)o.expandToInclude(i._geometries[u].getEnvelopeInternal());return o},t.prototype.getGeometryN=function(i){return this._geometries[i]},t.prototype.getSortIndex=function(){return e.SORTINDEX_GEOMETRYCOLLECTION},t.prototype.getCoordinates=function(){for(var i=this,o=new Array(this.getNumPoints()).fill(null),u=-1,f=0;f<this._geometries.length;f++)for(var d=i._geometries[f].getCoordinates(),_=0;_<d.length;_++)u++,o[u]=d[_];return o},t.prototype.getArea=function(){for(var i=this,o=0,u=0;u<this._geometries.length;u++)o+=i._geometries[u].getArea();return o},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],u=arguments[1];if(!this.isEquivalentClass(o))return!1;var f=o;if(this._geometries.length!==f._geometries.length)return!1;for(var d=0;d<this._geometries.length;d++)if(!i._geometries[d].equalsExact(f._geometries[d],u))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<this._geometries.length;o++)i._geometries[o].normalize();ca.sort(this._geometries)},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},t.prototype.getBoundaryDimension=function(){for(var i=this,o=Ne.FALSE,u=0;u<this._geometries.length;u++)o=Math.max(o,i._geometries[u].getBoundaryDimension());return o},t.prototype.getDimension=function(){for(var i=this,o=Ne.FALSE,u=0;u<this._geometries.length;u++)o=Math.max(o,i._geometries[u].getDimension());return o},t.prototype.getLength=function(){for(var i=this,o=0,u=0;u<this._geometries.length;u++)o+=i._geometries[u].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=0,u=0;u<this._geometries.length;u++)o+=i._geometries[u].getNumPoints();return o},t.prototype.getNumGeometries=function(){return this._geometries.length},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,u=new Array(o).fill(null),f=0;f<this._geometries.length;f++)u[f]=i._geometries[f].reverse();return this.getFactory().createGeometryCollection(u)},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],u=new ns(ca.asList(this._geometries)),f=new ns(ca.asList(o._geometries));return this.compare(u,f)}else if(arguments.length===2){for(var d=arguments[0],_=arguments[1],y=d,E=this.getNumGeometries(),S=y.getNumGeometries(),T=0;T<E&&T<S;){var I=i.getGeometryN(T),z=y.getGeometryN(T),G=I.compareToSameClass(z,_);if(G!==0)return G;T++}return T<E?1:T<S?-1:0}},t.prototype.apply=function(){var i=this;if(se(arguments[0],bs))for(var o=arguments[0],u=0;u<this._geometries.length;u++)i._geometries[u].apply(o);else if(se(arguments[0],Ai)){var f=arguments[0];if(this._geometries.length===0)return null;for(var d=0;d<this._geometries.length&&(i._geometries[d].apply(f),!f.isDone());d++);f.isGeometryChanged()&&this.geometryChanged()}else if(se(arguments[0],rs)){var _=arguments[0];_.filter(this);for(var y=0;y<this._geometries.length;y++)i._geometries[y].apply(_)}else if(se(arguments[0],io)){var E=arguments[0];E.filter(this);for(var S=0;S<this._geometries.length;S++)i._geometries[S].apply(E)}},t.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),me.shouldNeverReachHere(),null},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._geometries=new Array(this._geometries.length).fill(null);for(var u=0;u<this._geometries.length;u++)o._geometries[u]=i._geometries[u].clone();return o},t.prototype.getGeometryType=function(){return"GeometryCollection"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.isEmpty=function(){for(var i=this,o=0;o<this._geometries.length;o++)if(!i._geometries[o].isEmpty())return!1;return!0},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(t,n),t}(ie),pa=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ie.SORTINDEX_MULTILINESTRING},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Ne.FALSE:0},t.prototype.isClosed=function(){var i=this;if(this.isEmpty())return!1;for(var o=0;o<this._geometries.length;o++)if(!i._geometries[o].isClosed())return!1;return!0},t.prototype.getDimension=function(){return 1},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,u=new Array(o).fill(null),f=0;f<this._geometries.length;f++)u[o-1-f]=i._geometries[f].reverse();return this.getFactory().createMultiLineString(u)},t.prototype.getBoundary=function(){return new pi(this).getBoundary()},t.prototype.getGeometryType=function(){return"MultiLineString"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[Uc]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(t,n),t}(mr),pi=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var t=arguments[0],n=mi.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=n}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this._geom=r,this._geomFact=r.getFactory(),this._bnRule=i}};pi.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var n=this.computeBoundaryCoordinates(t);return n.length===1?this._geomFact.createPoint(n[0]):this._geomFact.createMultiPointFromCoords(n)};pi.prototype.getBoundary=function(){return this._geom instanceof mn?this.boundaryLineString(this._geom):this._geom instanceof pa?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()};pi.prototype.boundaryLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var n=this._bnRule.isInBoundary(2);return n?t.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])};pi.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()};pi.prototype.computeBoundaryCoordinates=function(t){var n=this,r=new Ot;this._endpointMap=new ir;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);o.getNumPoints()!==0&&(n.addEndpoint(o.getCoordinateN(0)),n.addEndpoint(o.getCoordinateN(o.getNumPoints()-1)))}for(var u=this._endpointMap.entrySet().iterator();u.hasNext();){var f=u.next(),d=f.getValue(),_=d.count;n._bnRule.isInBoundary(_)&&r.add(f.getKey())}return Le.toCoordinateArray(r)};pi.prototype.addEndpoint=function(t){var n=this._endpointMap.get(t);n===null&&(n=new zf,this._endpointMap.put(t,n)),n.count++};pi.prototype.interfaces_=function(){return[]};pi.prototype.getClass=function(){return pi};pi.getBoundary=function(){if(arguments.length===1){var t=arguments[0],n=new pi(t);return n.getBoundary()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=new pi(r,i);return o.getBoundary()}};var zf=function(){this.count=null};zf.prototype.interfaces_=function(){return[]};zf.prototype.getClass=function(){return zf};function hw(){}function fw(){}var pw=function(){};function dw(){}function gw(){}function mw(){}var di=function(){},Xg={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};di.prototype.interfaces_=function(){return[]};di.prototype.getClass=function(){return di};di.chars=function(t,n){for(var r=new Array(n).fill(null),i=0;i<n;i++)r[i]=t;return String(r)};di.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],n=new dw,r=new hw;return t.printStackTrace(r),n.toString()}else if(arguments.length===2){var i=arguments[0],o=arguments[1],u="";new fw(di.getStackTrace(i));for(var f=new mw,d=0;d<o;d++)try{u+=f.readLine()+di.NEWLINE}catch(_){if(_ instanceof gw)me.shouldNeverReachHere();else throw _}finally{}return u}};di.split=function(t,n){for(var r=n.length,i=new Ot,o=""+t,u=o.indexOf(n);u>=0;){var f=o.substring(0,u);i.add(f),o=o.substring(u+r),u=o.indexOf(n)}o.length>0&&i.add(o);for(var d=new Array(i.size()).fill(null),_=0;_<d.length;_++)d[_]=i.get(_);return d};di.toString=function(){if(arguments.length===1){var t=arguments[0];return di.SIMPLE_ORDINATE_FORMAT.format(t)}};di.spaces=function(t){return di.chars(" ",t)};Xg.NEWLINE.get=function(){return Yn.getProperty("line.separator")};Xg.SIMPLE_ORDINATE_FORMAT.get=function(){return new pw};Object.defineProperties(di,Xg);var En=function(){};En.prototype.interfaces_=function(){return[]};En.prototype.getClass=function(){return En};En.copyCoord=function(t,n,r,i){for(var o=Math.min(t.getDimension(),r.getDimension()),u=0;u<o;u++)r.setOrdinate(i,u,t.getOrdinate(n,u))};En.isRing=function(t){var n=t.size();return n===0?!0:n<=3?!1:t.getOrdinate(0,De.X)===t.getOrdinate(n-1,De.X)&&t.getOrdinate(0,De.Y)===t.getOrdinate(n-1,De.Y)};En.isEqual=function(t,n){var r=t.size(),i=n.size();if(r!==i)return!1;for(var o=Math.min(t.getDimension(),n.getDimension()),u=0;u<r;u++)for(var f=0;f<o;f++){var d=t.getOrdinate(u,f),_=n.getOrdinate(u,f);if(t.getOrdinate(u,f)!==n.getOrdinate(u,f)&&!(ue.isNaN(d)&&ue.isNaN(_)))return!1}return!0};En.extend=function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();if(En.copy(n,0,i,0,o),o>0)for(var u=o;u<r;u++)En.copy(n,o-1,i,u,1);return i};En.reverse=function(t){for(var n=t.size()-1,r=Math.trunc(n/2),i=0;i<=r;i++)En.swap(t,i,n-i)};En.swap=function(t,n,r){if(n===r)return null;for(var i=0;i<t.getDimension();i++){var o=t.getOrdinate(n,i);t.setOrdinate(n,i,t.getOrdinate(r,i)),t.setOrdinate(r,i,o)}};En.copy=function(t,n,r,i,o){for(var u=0;u<o;u++)En.copyCoord(t,n+u,r,i+u)};En.toString=function(){if(arguments.length===1){var t=arguments[0],n=t.size();if(n===0)return"()";var r=t.getDimension(),i=new hs;i.append("(");for(var o=0;o<n;o++){o>0&&i.append(" ");for(var u=0;u<r;u++)u>0&&i.append(","),i.append(di.toString(t.getOrdinate(o,u)))}return i.append(")"),i.toString()}};En.ensureValidRing=function(t,n){var r=n.size();if(r===0)return n;if(r<=3)return En.createClosedRing(t,n,4);var i=n.getOrdinate(0,De.X)===n.getOrdinate(r-1,De.X)&&n.getOrdinate(0,De.Y)===n.getOrdinate(r-1,De.Y);return i?n:En.createClosedRing(t,n,r+1)};En.createClosedRing=function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();En.copy(n,0,i,0,o);for(var u=o;u<r;u++)En.copy(n,0,i,u,1);return i};var mn=function(e){function t(r,i){e.call(this,i),this._points=null,this.init(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Jt:this._points.expandEnvelope(new Jt)},t.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},t.prototype.getSortIndex=function(){return e.SORTINDEX_LINESTRING},t.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],u=arguments[1];if(!this.isEquivalentClass(o))return!1;var f=o;if(this._points.size()!==f._points.size())return!1;for(var d=0;d<this._points.size();d++)if(!i.equal(i._points.getCoordinate(d),f._points.getCoordinate(d),u))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){for(var i=this,o=0;o<Math.trunc(this._points.size()/2);o++){var u=i._points.size()-1-o;if(!i._points.getCoordinate(o).equals(i._points.getCoordinate(u)))return i._points.getCoordinate(o).compareTo(i._points.getCoordinate(u))>0&&En.reverse(i._points),null}},t.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},t.prototype.getBoundaryDimension=function(){return this.isClosed()?Ne.FALSE:0},t.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},t.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},t.prototype.getDimension=function(){return 1},t.prototype.getLength=function(){return Gt.computeLength(this._points)},t.prototype.getNumPoints=function(){return this._points.size()},t.prototype.reverse=function(){var i=this._points.copy();En.reverse(i);var o=this.getFactory().createLineString(i);return o},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){for(var o=arguments[0],u=o,f=0,d=0;f<this._points.size()&&d<u._points.size();){var _=i._points.getCoordinate(f).compareTo(u._points.getCoordinate(d));if(_!==0)return _;f++,d++}return f<this._points.size()?1:d<u._points.size()?-1:0}else if(arguments.length===2){var y=arguments[0],E=arguments[1],S=y;return E.compare(this._points,S._points)}},t.prototype.apply=function(){var i=this;if(se(arguments[0],bs))for(var o=arguments[0],u=0;u<this._points.size();u++)o.filter(i._points.getCoordinate(u));else if(se(arguments[0],Ai)){var f=arguments[0];if(this._points.size()===0)return null;for(var d=0;d<this._points.size()&&(f.filter(i._points,d),!f.isDone());d++);f.isGeometryChanged()&&this.geometryChanged()}else if(se(arguments[0],rs)){var _=arguments[0];_.filter(this)}else if(se(arguments[0],io)){var y=arguments[0];y.filter(this)}},t.prototype.getBoundary=function(){return new pi(this).getBoundary()},t.prototype.isEquivalentClass=function(i){return i instanceof t},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._points=this._points.clone(),i},t.prototype.getCoordinateN=function(i){return this._points.getCoordinate(i)},t.prototype.getGeometryType=function(){return"LineString"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._points},t.prototype.isEmpty=function(){return this._points.size()===0},t.prototype.init=function(i){if(i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),i.size()===1)throw new ln("Invalid number of points in LineString (found "+i.size()+" - must be 0 or >= 2)");this._points=i},t.prototype.isCoordinate=function(i){for(var o=this,u=0;u<this._points.size();u++)if(o._points.getCoordinate(u).equals(i))return!0;return!1},t.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},t.prototype.getPointN=function(i){return this.getFactory().createPoint(this._points.getCoordinate(i))},t.prototype.interfaces_=function(){return[Uc]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(t,n),t}(ie),Vc=function(){};Vc.prototype.interfaces_=function(){return[]};Vc.prototype.getClass=function(){return Vc};var jr=function(e){function t(r,i){e.call(this,i),this._coordinates=r||null,this.init(this._coordinates)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Jt;var i=new Jt;return i.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),i},t.prototype.getSortIndex=function(){return e.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?this.isEmpty()&&i.isEmpty()?!0:this.isEmpty()!==i.isEmpty()?!1:this.equal(i.getCoordinate(),this.getCoordinate(),o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return Ne.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(arguments.length===1){var i=arguments[0],o=i;return this.getCoordinate().compareTo(o.getCoordinate())}else if(arguments.length===2){var u=arguments[0],f=arguments[1],d=u;return f.compare(this._coordinates,d._coordinates)}},t.prototype.apply=function(){if(se(arguments[0],bs)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this.getCoordinate())}else if(se(arguments[0],Ai)){var o=arguments[0];if(this.isEmpty())return null;o.filter(this._coordinates,0),o.isGeometryChanged()&&this.geometryChanged()}else if(se(arguments[0],rs)){var u=arguments[0];u.filter(this)}else if(se(arguments[0],io)){var f=arguments[0];f.filter(this)}},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var i=e.prototype.clone.call(this);return i._coordinates=this._coordinates.clone(),i},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return this._coordinates.size()===0},t.prototype.init=function(i){i===null&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),me.isTrue(i.size()<=1),this._coordinates=i},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[Vc]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(t,n),t}(ie),Do=function(){};Do.prototype.interfaces_=function(){return[]};Do.prototype.getClass=function(){return Do};var Rn=function(e){function t(r,i,o){if(e.call(this,o),this._shell=null,this._holes=null,r===null&&(r=this.getFactory().createLinearRing()),i===null&&(i=[]),e.hasNullElements(i))throw new ln("holes must not contain null elements");if(r.isEmpty()&&e.hasNonEmptyElements(i))throw new ln("shell is empty but holes are not");this._shell=r,this._holes=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},t.prototype.getSortIndex=function(){return e.SORTINDEX_POLYGON},t.prototype.getCoordinates=function(){var i=this;if(this.isEmpty())return[];for(var o=new Array(this.getNumPoints()).fill(null),u=-1,f=this._shell.getCoordinates(),d=0;d<f.length;d++)u++,o[u]=f[d];for(var _=0;_<this._holes.length;_++)for(var y=i._holes[_].getCoordinates(),E=0;E<y.length;E++)u++,o[u]=y[E];return o},t.prototype.getArea=function(){var i=this,o=0;o+=Math.abs(Gt.signedArea(this._shell.getCoordinateSequence()));for(var u=0;u<this._holes.length;u++)o-=Math.abs(Gt.signedArea(i._holes[u].getCoordinateSequence()));return o},t.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var i=this._shell.getCoordinateSequence(),o=this.getEnvelopeInternal(),u=0;u<5;u++){var f=i.getX(u);if(!(f===o.getMinX()||f===o.getMaxX()))return!1;var d=i.getY(u);if(!(d===o.getMinY()||d===o.getMaxY()))return!1}for(var _=i.getX(0),y=i.getY(0),E=1;E<=4;E++){var S=i.getX(E),T=i.getY(E),I=S!==_,z=T!==y;if(I===z)return!1;_=S,y=T}return!0},t.prototype.equalsExact=function(){var i=this;if(arguments.length===2){var o=arguments[0],u=arguments[1];if(!this.isEquivalentClass(o))return!1;var f=o,d=this._shell,_=f._shell;if(!d.equalsExact(_,u)||this._holes.length!==f._holes.length)return!1;for(var y=0;y<this._holes.length;y++)if(!i._holes[y].equalsExact(f._holes[y],u))return!1;return!0}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.normalize=function(){var i=this;if(arguments.length===0){this.normalize(this._shell,!0);for(var o=0;o<this._holes.length;o++)i.normalize(i._holes[o],!1);ca.sort(this._holes)}else if(arguments.length===2){var u=arguments[0],f=arguments[1];if(u.isEmpty())return null;var d=new Array(u.getCoordinates().length-1).fill(null);Yn.arraycopy(u.getCoordinates(),0,d,0,d.length);var _=Le.minCoordinate(u.getCoordinates());Le.scroll(d,_),Yn.arraycopy(d,0,u.getCoordinates(),0,d.length),u.getCoordinates()[d.length]=d[0],Gt.isCCW(u.getCoordinates())===f&&Le.reverse(u.getCoordinates())}},t.prototype.getCoordinate=function(){return this._shell.getCoordinate()},t.prototype.getNumInteriorRing=function(){return this._holes.length},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.getLength=function(){var i=this,o=0;o+=this._shell.getLength();for(var u=0;u<this._holes.length;u++)o+=i._holes[u].getLength();return o},t.prototype.getNumPoints=function(){for(var i=this,o=this._shell.getNumPoints(),u=0;u<this._holes.length;u++)o+=i._holes[u].getNumPoints();return o},t.prototype.reverse=function(){var i=this,o=this.copy();o._shell=this._shell.copy().reverse(),o._holes=new Array(this._holes.length).fill(null);for(var u=0;u<this._holes.length;u++)o._holes[u]=i._holes[u].copy().reverse();return o},t.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},t.prototype.compareToSameClass=function(){var i=this;if(arguments.length===1){var o=arguments[0],u=this._shell,f=o._shell;return u.compareToSameClass(f)}else if(arguments.length===2){var d=arguments[0],_=arguments[1],y=d,E=this._shell,S=y._shell,T=E.compareToSameClass(S,_);if(T!==0)return T;for(var I=this.getNumInteriorRing(),z=y.getNumInteriorRing(),G=0;G<I&&G<z;){var Q=i.getInteriorRingN(G),$=y.getInteriorRingN(G),rt=Q.compareToSameClass($,_);if(rt!==0)return rt;G++}return G<I?1:G<z?-1:0}},t.prototype.apply=function(i){var o=this;if(se(i,bs)){this._shell.apply(i);for(var u=0;u<this._holes.length;u++)o._holes[u].apply(i)}else if(se(i,Ai)){if(this._shell.apply(i),!i.isDone())for(var f=0;f<this._holes.length&&(o._holes[f].apply(i),!i.isDone());f++);i.isGeometryChanged()&&this.geometryChanged()}else if(se(i,rs))i.filter(this);else if(se(i,io)){i.filter(this),this._shell.apply(i);for(var d=0;d<this._holes.length;d++)o._holes[d].apply(i)}},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var o=new Array(this._holes.length+1).fill(null);o[0]=this._shell;for(var u=0;u<this._holes.length;u++)o[u+1]=i._holes[u];return o.length<=1?this.getFactory().createLinearRing(o[0].getCoordinateSequence()):this.getFactory().createMultiLineString(o)},t.prototype.clone=function(){var i=this,o=e.prototype.clone.call(this);o._shell=this._shell.clone(),o._holes=new Array(this._holes.length).fill(null);for(var u=0;u<this._holes.length;u++)o._holes[u]=i._holes[u].clone();return o},t.prototype.getGeometryType=function(){return"Polygon"},t.prototype.copy=function(){for(var i=this,o=this._shell.copy(),u=new Array(this._holes.length).fill(null),f=0;f<u.length;f++)u[f]=i._holes[f].copy();return new t(o,u,this._factory)},t.prototype.getExteriorRing=function(){return this._shell},t.prototype.isEmpty=function(){return this._shell.isEmpty()},t.prototype.getInteriorRingN=function(i){return this._holes[i]},t.prototype.interfaces_=function(){return[Do]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(t,n),t}(ie),pl=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ie.SORTINDEX_MULTIPOINT},t.prototype.isValid=function(){return!0},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getCoordinate=function(){if(arguments.length===1){var i=arguments[0];return this._geometries[i].getCoordinate()}else return e.prototype.getCoordinate.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return Ne.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.getGeometryType=function(){return"MultiPoint"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[Vc]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(t,n),t}(mr),ws=function(e){function t(r,i){r instanceof it&&i instanceof Ee&&(r=i.getCoordinateSequenceFactory().create(r)),e.call(this,r,i),this.validateConstruction()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ie.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return Ne.FALSE},t.prototype.isClosed=function(){return this.isEmpty()?!0:e.prototype.isClosed.call(this)},t.prototype.reverse=function(){var i=this._points.copy();En.reverse(i);var o=this.getFactory().createLinearRing(i);return o},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!e.prototype.isClosed.call(this))throw new ln("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new ln("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,n),t}(mn),Es=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={serialVersionUID:{configurable:!0}};return t.prototype.getSortIndex=function(){return ie.SORTINDEX_MULTIPOLYGON},t.prototype.equalsExact=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return this.isEquivalentClass(i)?e.prototype.equalsExact.call(this,i,o):!1}else return e.prototype.equalsExact.apply(this,arguments)},t.prototype.getBoundaryDimension=function(){return 1},t.prototype.getDimension=function(){return 2},t.prototype.reverse=function(){for(var i=this,o=this._geometries.length,u=new Array(o).fill(null),f=0;f<this._geometries.length;f++)u[f]=i._geometries[f].reverse();return this.getFactory().createMultiPolygon(u)},t.prototype.getBoundary=function(){var i=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var o=new Ot,u=0;u<this._geometries.length;u++)for(var f=i._geometries[u],d=f.getBoundary(),_=0;_<d.getNumGeometries();_++)o.add(d.getGeometryN(_));var y=new Array(o.size()).fill(null);return this.getFactory().createMultiLineString(o.toArray(y))},t.prototype.getGeometryType=function(){return"MultiPolygon"},t.prototype.copy=function(){for(var i=this,o=new Array(this._geometries.length).fill(null),u=0;u<o.length;u++)o[u]=i._geometries[u].copy();return new t(o,this._factory)},t.prototype.interfaces_=function(){return[Do]},t.prototype.getClass=function(){return t},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(t,n),t}(mr),_i=function(t){this._factory=t||null,this._isUserDataCopied=!1},Ep={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};_i.prototype.setCopyUserData=function(t){this._isUserDataCopied=t};_i.prototype.edit=function(t,n){if(t===null)return null;var r=this.editInternal(t,n);return this._isUserDataCopied&&r.setUserData(t.getUserData()),r};_i.prototype.editInternal=function(t,n){return this._factory===null&&(this._factory=t.getFactory()),t instanceof mr?this.editGeometryCollection(t,n):t instanceof Rn?this.editPolygon(t,n):t instanceof jr?n.edit(t,this._factory):t instanceof mn?n.edit(t,this._factory):(me.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)};_i.prototype.editGeometryCollection=function(t,n){for(var r=this,i=n.edit(t,this._factory),o=new Ot,u=0;u<i.getNumGeometries();u++){var f=r.edit(i.getGeometryN(u),n);f===null||f.isEmpty()||o.add(f)}return i.getClass()===pl?this._factory.createMultiPoint(o.toArray([])):i.getClass()===pa?this._factory.createMultiLineString(o.toArray([])):i.getClass()===Es?this._factory.createMultiPolygon(o.toArray([])):this._factory.createGeometryCollection(o.toArray([]))};_i.prototype.editPolygon=function(t,n){var r=this,i=n.edit(t,this._factory);if(i===null&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var o=this.edit(i.getExteriorRing(),n);if(o===null||o.isEmpty())return this._factory.createPolygon();for(var u=new Ot,f=0;f<i.getNumInteriorRing();f++){var d=r.edit(i.getInteriorRingN(f),n);d===null||d.isEmpty()||u.add(d)}return this._factory.createPolygon(o,u.toArray([]))};_i.prototype.interfaces_=function(){return[]};_i.prototype.getClass=function(){return _i};_i.GeometryEditorOperation=function(){};Ep.NoOpGeometryOperation.get=function(){return jc};Ep.CoordinateOperation.get=function(){return qc};Ep.CoordinateSequenceOperation.get=function(){return Hc};Object.defineProperties(_i,Ep);var jc=function(){};jc.prototype.edit=function(t,n){return t};jc.prototype.interfaces_=function(){return[_i.GeometryEditorOperation]};jc.prototype.getClass=function(){return jc};var qc=function(){};qc.prototype.edit=function(t,n){var r=this.editCoordinates(t.getCoordinates(),t);return r===null?t:t instanceof ws?n.createLinearRing(r):t instanceof mn?n.createLineString(r):t instanceof jr?r.length>0?n.createPoint(r[0]):n.createPoint():t};qc.prototype.interfaces_=function(){return[_i.GeometryEditorOperation]};qc.prototype.getClass=function(){return qc};var Hc=function(){};Hc.prototype.edit=function(t,n){return t instanceof ws?n.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof mn?n.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof jr?n.createPoint(this.edit(t.getCoordinateSequence(),t)):t};Hc.prototype.interfaces_=function(){return[_i.GeometryEditorOperation]};Hc.prototype.getClass=function(){return Hc};var vn=function(){var t=this;if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var r=0;r<n;r++)t._coordinates[r]=new it}else if(se(arguments[0],De)){var i=arguments[0];if(i===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)t._coordinates[o]=i.getCoordinateCopy(o)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var u=arguments[0],f=arguments[1];this._coordinates=u,this._dimension=f,u===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var d=arguments[0],_=arguments[1];this._coordinates=new Array(d).fill(null),this._dimension=_;for(var y=0;y<d;y++)t._coordinates[y]=new it}}},mv={serialVersionUID:{configurable:!0}};vn.prototype.setOrdinate=function(t,n,r){switch(n){case De.X:this._coordinates[t].x=r;break;case De.Y:this._coordinates[t].y=r;break;case De.Z:this._coordinates[t].z=r;break;default:throw new ln("invalid ordinateIndex")}};vn.prototype.size=function(){return this._coordinates.length};vn.prototype.getOrdinate=function(t,n){switch(n){case De.X:return this._coordinates[t].x;case De.Y:return this._coordinates[t].y;case De.Z:return this._coordinates[t].z}return ue.NaN};vn.prototype.getCoordinate=function(){if(arguments.length===1){var t=arguments[0];return this._coordinates[t]}else if(arguments.length===2){var n=arguments[0],r=arguments[1];r.x=this._coordinates[n].x,r.y=this._coordinates[n].y,r.z=this._coordinates[n].z}};vn.prototype.getCoordinateCopy=function(t){return new it(this._coordinates[t])};vn.prototype.getDimension=function(){return this._dimension};vn.prototype.getX=function(t){return this._coordinates[t].x};vn.prototype.clone=function(){for(var t=this,n=new Array(this.size()).fill(null),r=0;r<this._coordinates.length;r++)n[r]=t._coordinates[r].clone();return new vn(n,this._dimension)};vn.prototype.expandEnvelope=function(t){for(var n=this,r=0;r<this._coordinates.length;r++)t.expandToInclude(n._coordinates[r]);return t};vn.prototype.copy=function(){for(var t=this,n=new Array(this.size()).fill(null),r=0;r<this._coordinates.length;r++)n[r]=t._coordinates[r].copy();return new vn(n,this._dimension)};vn.prototype.toString=function(){var t=this;if(this._coordinates.length>0){var n=new hs(17*this._coordinates.length);n.append("("),n.append(this._coordinates[0]);for(var r=1;r<this._coordinates.length;r++)n.append(", "),n.append(t._coordinates[r]);return n.append(")"),n.toString()}else return"()"};vn.prototype.getY=function(t){return this._coordinates[t].y};vn.prototype.toCoordinateArray=function(){return this._coordinates};vn.prototype.interfaces_=function(){return[De,Ci]};vn.prototype.getClass=function(){return vn};mv.serialVersionUID.get=function(){return-0xcb44a778db18e00};Object.defineProperties(vn,mv);var Ss=function(){},Yg={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Ss.prototype.readResolve=function(){return Ss.instance()};Ss.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new vn(t)}else if(se(arguments[0],De)){var n=arguments[0];return new vn(n)}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new vn(r):new vn(r,i)}};Ss.prototype.interfaces_=function(){return[al,Ci]};Ss.prototype.getClass=function(){return Ss};Ss.instance=function(){return Ss.instanceObject};Yg.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00};Yg.instanceObject.get=function(){return new Ss};Object.defineProperties(Ss,Yg);var _v=function(e){function t(){e.call(this),this.map_=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r){return this.map_.get(r)||null},t.prototype.put=function(r,i){return this.map_.set(r,i),i},t.prototype.values=function(){for(var r=new Ot,i=this.map_.values(),o=i.next();!o.done;)r.add(o.value),o=i.next();return r},t.prototype.entrySet=function(){var r=new Kg;return this.map_.entries().forEach(function(i){return r.add(i)}),r},t.prototype.size=function(){return this.map_.size()},t}(mu),Oe=function e(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=e.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof is){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},Wg={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Oe.prototype.equals=function(t){if(!(t instanceof Oe))return!1;var n=t;return this._modelType===n._modelType&&this._scale===n._scale};Oe.prototype.compareTo=function(t){var n=t,r=this.getMaximumSignificantDigits(),i=n.getMaximumSignificantDigits();return new es(r).compareTo(new es(i))};Oe.prototype.getScale=function(){return this._scale};Oe.prototype.isFloating=function(){return this._modelType===Oe.FLOATING||this._modelType===Oe.FLOATING_SINGLE};Oe.prototype.getType=function(){return this._modelType};Oe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Oe.FLOATING?t="Floating":this._modelType===Oe.FLOATING_SINGLE?t="Floating-Single":this._modelType===Oe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t};Oe.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(ue.isNaN(t))return t;if(this._modelType===Oe.FLOATING_SINGLE){var n=t;return n}return this._modelType===Oe.FIXED?Math.round(t*this._scale)/this._scale:t}else if(arguments[0]instanceof it){var r=arguments[0];if(this._modelType===Oe.FLOATING)return null;r.x=this.makePrecise(r.x),r.y=this.makePrecise(r.y)}};Oe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Oe.FLOATING?t=16:this._modelType===Oe.FLOATING_SINGLE?t=6:this._modelType===Oe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t};Oe.prototype.setScale=function(t){this._scale=Math.abs(t)};Oe.prototype.interfaces_=function(){return[Ci,vi]};Oe.prototype.getClass=function(){return Oe};Oe.mostPrecise=function(t,n){return t.compareTo(n)>=0?t:n};Wg.serialVersionUID.get=function(){return 7777263578777804e3};Wg.maximumPreciseValue.get=function(){return 9007199254740992};Object.defineProperties(Oe,Wg);var is=function e(t){this._name=t||null,e.nameToTypeMap.put(t,this)},Jg={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};is.prototype.readResolve=function(){return is.nameToTypeMap.get(this._name)};is.prototype.toString=function(){return this._name};is.prototype.interfaces_=function(){return[Ci]};is.prototype.getClass=function(){return is};Jg.serialVersionUID.get=function(){return-552860263173159e4};Jg.nameToTypeMap.get=function(){return new _v};Object.defineProperties(is,Jg);Oe.Type=is;Oe.FIXED=new is("FIXED");Oe.FLOATING=new is("FLOATING");Oe.FLOATING_SINGLE=new is("FLOATING SINGLE");var Ee=function e(){this._precisionModel=new Oe,this._SRID=0,this._coordinateSequenceFactory=e.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?se(arguments[0],al)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Oe&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},yv={serialVersionUID:{configurable:!0}};Ee.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new it(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new it(t.getMinX(),t.getMinY()),new it(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new it(t.getMinX(),t.getMinY()),new it(t.getMinX(),t.getMaxY()),new it(t.getMaxX(),t.getMaxY()),new it(t.getMaxX(),t.getMinY()),new it(t.getMinX(),t.getMinY())]),null)};Ee.prototype.createLineString=function(t){if(t){if(t instanceof Array)return new mn(this.getCoordinateSequenceFactory().create(t),this);if(se(t,De))return new mn(t,this)}else return new mn(this.getCoordinateSequenceFactory().create([]),this)};Ee.prototype.createMultiLineString=function(){if(arguments.length===0)return new pa(null,this);if(arguments.length===1){var t=arguments[0];return new pa(t,this)}};Ee.prototype.buildGeometry=function(t){for(var n=null,r=!1,i=!1,o=t.iterator();o.hasNext();){var u=o.next(),f=u.getClass();n===null&&(n=f),f!==n&&(r=!0),u.isGeometryCollectionOrDerived()&&(i=!0)}if(n===null)return this.createGeometryCollection();if(r||i)return this.createGeometryCollection(Ee.toGeometryArray(t));var d=t.iterator().next(),_=t.size()>1;if(_){if(d instanceof Rn)return this.createMultiPolygon(Ee.toPolygonArray(t));if(d instanceof mn)return this.createMultiLineString(Ee.toLineStringArray(t));if(d instanceof jr)return this.createMultiPoint(Ee.toPointArray(t));me.shouldNeverReachHere("Unhandled class: "+d.getClass().getName())}return d};Ee.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)};Ee.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof it){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}else if(se(arguments[0],De)){var n=arguments[0];return new jr(n,this)}}};Ee.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory};Ee.prototype.createPolygon=function(){if(arguments.length===0)return new Rn(null,null,this);if(arguments.length===1){if(se(arguments[0],De)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}else if(arguments[0]instanceof Array){var n=arguments[0];return this.createPolygon(this.createLinearRing(n))}else if(arguments[0]instanceof ws){var r=arguments[0];return this.createPolygon(r,null)}}else if(arguments.length===2){var i=arguments[0],o=arguments[1];return new Rn(i,o,this)}};Ee.prototype.getSRID=function(){return this._SRID};Ee.prototype.createGeometryCollection=function(){if(arguments.length===0)return new mr(null,this);if(arguments.length===1){var t=arguments[0];return new mr(t,this)}};Ee.prototype.createGeometry=function(t){var n=new _i(this);return n.edit(t,{edit:function(){if(arguments.length===2){var r=arguments[0];return this._coordinateSequenceFactory.create(r)}}})};Ee.prototype.getPrecisionModel=function(){return this._precisionModel};Ee.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}else if(se(arguments[0],De)){var n=arguments[0];return new ws(n,this)}}};Ee.prototype.createMultiPolygon=function(){if(arguments.length===0)return new Es(null,this);if(arguments.length===1){var t=arguments[0];return new Es(t,this)}};Ee.prototype.createMultiPoint=function(){var t=this;if(arguments.length===0)return new pl(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];return new pl(n,this)}else if(arguments[0]instanceof Array){var r=arguments[0];return this.createMultiPoint(r!==null?this.getCoordinateSequenceFactory().create(r):null)}else if(se(arguments[0],De)){var i=arguments[0];if(i===null)return this.createMultiPoint(new Array(0).fill(null));for(var o=new Array(i.size()).fill(null),u=0;u<i.size();u++){var f=t.getCoordinateSequenceFactory().create(1,i.getDimension());En.copy(i,u,f,0,1),o[u]=t.createPoint(f)}return this.createMultiPoint(o)}}};Ee.prototype.interfaces_=function(){return[Ci]};Ee.prototype.getClass=function(){return Ee};Ee.toMultiPolygonArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};Ee.toGeometryArray=function(t){if(t===null)return null;var n=new Array(t.size()).fill(null);return t.toArray(n)};Ee.getDefaultCoordinateSequenceFactory=function(){return Ss.instance()};Ee.toMultiLineStringArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};Ee.toLineStringArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};Ee.toMultiPointArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};Ee.toLinearRingArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};Ee.toPointArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};Ee.toPolygonArray=function(t){var n=new Array(t.size()).fill(null);return t.toArray(n)};Ee.createPointFromInternalCoord=function(t,n){return n.getPrecisionModel().makePrecise(t),n.getFactory().createPoint(t)};yv.serialVersionUID.get=function(){return-6820524753094096e3};Object.defineProperties(Ee,yv);var _w=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Lp=function(t){this.geometryFactory=t||new Ee};Lp.prototype.read=function(t){var n;typeof t=="string"?n=JSON.parse(t):n=t;var r=n.type;if(!Wi[r])throw new Error("Unknown GeoJSON type: "+n.type);return _w.indexOf(r)!==-1?Wi[r].apply(this,[n.coordinates]):r==="GeometryCollection"?Wi[r].apply(this,[n.geometries]):Wi[r].apply(this,[n])};Lp.prototype.write=function(t){var n=t.getGeometryType();if(!Ys[n])throw new Error("Geometry is not supported");return Ys[n].apply(this,[t])};var Wi={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!Wi[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=Wi.bbox.apply(this,[e.bbox])),t},FeatureCollection:function(e){var t=this,n={};if(e.features){n.features=[];for(var r=0;r<e.features.length;++r)n.features.push(t.read(e.features[r]))}return e.bbox&&(n.bbox=this.parse.bbox.apply(this,[e.bbox])),n},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(new it(r[0],r[1]))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new it(e[0],e[1]),new it(e[2],e[1]),new it(e[2],e[3]),new it(e[0],e[3]),new it(e[0],e[1])])},Point:function(e){var t=new it(e[0],e[1]);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(Wi.Point.apply(t,[e[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(e){var t=Wi.coordinates.apply(this,[e]);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e.length;++r)n.push(Wi.LineString.apply(t,[e[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(e){for(var t=this,n=Wi.coordinates.apply(this,[e[0]]),r=this.geometryFactory.createLinearRing(n),i=[],o=1;o<e.length;++o){var u=e[o],f=Wi.coordinates.apply(t,[u]),d=t.geometryFactory.createLinearRing(f);i.push(d)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(Wi.Polygon.apply(t,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e.length;++r){var i=e[r];n.push(t.read(i))}return this.geometryFactory.createGeometryCollection(n)}},Ys={coordinate:function(e){return[e.x,e.y]},Point:function(e){var t=Ys.coordinate.apply(this,[e.getCoordinate()]);return{type:"Point",coordinates:t}},MultiPoint:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Ys.Point.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(e){for(var t=this,n=[],r=e.getCoordinates(),i=0;i<r.length;++i){var o=r[i];n.push(Ys.coordinate.apply(t,[o]))}return{type:"LineString",coordinates:n}},MultiLineString:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Ys.LineString.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(e){var t=this,n=[],r=Ys.LineString.apply(this,[e._shell]);n.push(r.coordinates);for(var i=0;i<e._holes.length;++i){var o=e._holes[i],u=Ys.LineString.apply(t,[o]);n.push(u.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=Ys.Polygon.apply(t,[i]);n.push(o.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(e){for(var t=this,n=[],r=0;r<e._geometries.length;++r){var i=e._geometries[r],o=i.getGeometryType();n.push(Ys[o].apply(t,[i]))}return{type:"GeometryCollection",geometries:n}}},Qg=function(t){this.geometryFactory=t||new Ee,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Lp(this.geometryFactory)};Qg.prototype.read=function(t){var n=this.parser.read(t);return this.precisionModel.getType()===Oe.FIXED&&this.reducePrecision(n),n};Qg.prototype.reducePrecision=function(t){var n=this,r,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(r=0,i=t.points.length;r<i;r++)n.precisionModel.makePrecise(t.points[r]);else if(t.geometries)for(r=0,i=t.geometries.length;r<i;r++)n.reducePrecision(t.geometries[r])};var vv=function(){this.parser=new Lp(this.geometryFactory)};vv.prototype.write=function(t){return this.parser.write(t)};var At=function(){},xp={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};At.prototype.interfaces_=function(){return[]};At.prototype.getClass=function(){return At};At.opposite=function(t){return t===At.LEFT?At.RIGHT:t===At.RIGHT?At.LEFT:t};xp.ON.get=function(){return 0};xp.LEFT.get=function(){return 1};xp.RIGHT.get=function(){return 2};Object.defineProperties(At,xp);function bp(e){this.message=e||""}bp.prototype=new Error;bp.prototype.name="EmptyStackException";function fs(){this.array_=[]}fs.prototype=new Ii;fs.prototype.add=function(e){return this.array_.push(e),!0};fs.prototype.get=function(e){if(e<0||e>=this.size())throw new Error;return this.array_[e]};fs.prototype.push=function(e){return this.array_.push(e),e};fs.prototype.pop=function(e){if(this.array_.length===0)throw new bp;return this.array_.pop()};fs.prototype.peek=function(){if(this.array_.length===0)throw new bp;return this.array_[this.array_.length-1]};fs.prototype.empty=function(){return this.array_.length===0};fs.prototype.isEmpty=function(){return this.empty()};fs.prototype.search=function(e){return this.array_.indexOf(e)};fs.prototype.size=function(){return this.array_.length};fs.prototype.toArray=function(){for(var e=this,t=[],n=0,r=this.array_.length;n<r;n++)t.push(e.array_[n]);return t};var ss=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};ss.prototype.getCoordinate=function(){return this._minCoord};ss.prototype.getRightmostSide=function(t,n){var r=this.getRightmostSideOfSegment(t,n);return r<0&&(r=this.getRightmostSideOfSegment(t,n-1)),r<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),r};ss.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();me.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var n=t[this._minIndex-1],r=t[this._minIndex+1],i=Gt.computeOrientation(this._minCoord,r,n),o=!1;(n.y<this._minCoord.y&&r.y<this._minCoord.y&&i===Gt.COUNTERCLOCKWISE||n.y>this._minCoord.y&&r.y>this._minCoord.y&&i===Gt.CLOCKWISE)&&(o=!0),o&&(this._minIndex=this._minIndex-1)};ss.prototype.getRightmostSideOfSegment=function(t,n){var r=t.getEdge(),i=r.getCoordinates();if(n<0||n+1>=i.length||i[n].y===i[n+1].y)return-1;var o=At.LEFT;return i[n].y<i[n+1].y&&(o=At.RIGHT),o};ss.prototype.getEdge=function(){return this._orientedDe};ss.prototype.checkForRightmostCoordinate=function(t){for(var n=this,r=t.getEdge().getCoordinates(),i=0;i<r.length-1;i++)(n._minCoord===null||r[i].x>n._minCoord.x)&&(n._minDe=t,n._minIndex=i,n._minCoord=r[i])};ss.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode(),n=t.getEdges();this._minDe=n.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)};ss.prototype.findEdge=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();i.isForward()&&n.checkForRightmostCoordinate(i)}me.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var o=this.getRightmostSide(this._minDe,this._minIndex);o===At.LEFT&&(this._orientedDe=this._minDe.getSym())};ss.prototype.interfaces_=function(){return[]};ss.prototype.getClass=function(){return ss};var so=function(e){function t(n,r){e.call(this,t.msgWithCoord(n,r)),this.pt=r?new it(r):null,this.name="TopologyException"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCoordinate=function(){return this.pt},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.msgWithCoord=function(r,i){return i?r:r+" [ "+i+" ]"},t}(ro),wp=function(){this.array_=[]};wp.prototype.addLast=function(t){this.array_.push(t)};wp.prototype.removeFirst=function(){return this.array_.shift()};wp.prototype.isEmpty=function(){return this.array_.length===0};var _r=function(){this._finder=null,this._dirEdgeList=new Ot,this._nodes=new Ot,this._rightMostCoord=null,this._env=null,this._finder=new ss};_r.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var n=t.next();n.setVisited(!1)}};_r.prototype.getRightmostCoordinate=function(){return this._rightMostCoord};_r.prototype.computeNodeDepth=function(t){for(var n=this,r=null,i=t.getEdges().iterator();i.hasNext();){var o=i.next();if(o.isVisited()||o.getSym().isVisited()){r=o;break}}if(r===null)throw new so("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(r);for(var u=t.getEdges().iterator();u.hasNext();){var f=u.next();f.setVisited(!0),n.copySymDepths(f)}};_r.prototype.computeDepth=function(t){this.clearVisitedEdges();var n=this._finder.getEdge();n.setEdgeDepths(At.RIGHT,t),this.copySymDepths(n),this.computeDepths(n)};_r.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()};_r.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var n=t.next();n.getDepth(At.RIGHT)>=1&&n.getDepth(At.LEFT)<=0&&!n.isInteriorAreaEdge()&&n.setInResult(!0)}};_r.prototype.computeDepths=function(t){var n=this,r=new Kg,i=new wp,o=t.getNode();for(i.addLast(o),r.add(o),t.setVisited(!0);!i.isEmpty();){var u=i.removeFirst();r.add(u),n.computeNodeDepth(u);for(var f=u.getEdges().iterator();f.hasNext();){var d=f.next(),_=d.getSym();if(!_.isVisited()){var y=_.getNode();r.contains(y)||(i.addLast(y),r.add(y))}}}};_r.prototype.compareTo=function(t){var n=t;return this._rightMostCoord.x<n._rightMostCoord.x?-1:this._rightMostCoord.x>n._rightMostCoord.x?1:0};_r.prototype.getEnvelope=function(){if(this._env===null){for(var t=new Jt,n=this._dirEdgeList.iterator();n.hasNext();)for(var r=n.next(),i=r.getEdge().getCoordinates(),o=0;o<i.length-1;o++)t.expandToInclude(i[o]);this._env=t}return this._env};_r.prototype.addReachable=function(t){var n=this,r=new fs;for(r.add(t);!r.empty();){var i=r.pop();n.add(i,r)}};_r.prototype.copySymDepths=function(t){var n=t.getSym();n.setDepth(At.LEFT,t.getDepth(At.RIGHT)),n.setDepth(At.RIGHT,t.getDepth(At.LEFT))};_r.prototype.add=function(t,n){var r=this;t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();r._dirEdgeList.add(o);var u=o.getSym(),f=u.getNode();f.isVisited()||n.push(f)}};_r.prototype.getNodes=function(){return this._nodes};_r.prototype.getDirectedEdges=function(){return this._dirEdgeList};_r.prototype.interfaces_=function(){return[vi]};_r.prototype.getClass=function(){return _r};var $e=function e(){var t=this;if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[At.ON]=r}else if(arguments[0]instanceof e){var i=arguments[0];if(this.init(i.location.length),i!==null)for(var o=0;o<this.location.length;o++)t.location[o]=i.location[o]}}else if(arguments.length===3){var u=arguments[0],f=arguments[1],d=arguments[2];this.init(3),this.location[At.ON]=u,this.location[At.LEFT]=f,this.location[At.RIGHT]=d}};$e.prototype.setAllLocations=function(t){for(var n=this,r=0;r<this.location.length;r++)n.location[r]=t};$e.prototype.isNull=function(){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]!==lt.NONE)return!1;return!0};$e.prototype.setAllLocationsIfNull=function(t){for(var n=this,r=0;r<this.location.length;r++)n.location[r]===lt.NONE&&(n.location[r]=t)};$e.prototype.isLine=function(){return this.location.length===1};$e.prototype.merge=function(t){var n=this;if(t.location.length>this.location.length){var r=new Array(3).fill(null);r[At.ON]=this.location[At.ON],r[At.LEFT]=lt.NONE,r[At.RIGHT]=lt.NONE,this.location=r}for(var i=0;i<this.location.length;i++)n.location[i]===lt.NONE&&i<t.location.length&&(n.location[i]=t.location[i])};$e.prototype.getLocations=function(){return this.location};$e.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[At.LEFT];this.location[At.LEFT]=this.location[At.RIGHT],this.location[At.RIGHT]=t};$e.prototype.toString=function(){var t=new hs;return this.location.length>1&&t.append(lt.toLocationSymbol(this.location[At.LEFT])),t.append(lt.toLocationSymbol(this.location[At.ON])),this.location.length>1&&t.append(lt.toLocationSymbol(this.location[At.RIGHT])),t.toString()};$e.prototype.setLocations=function(t,n,r){this.location[At.ON]=t,this.location[At.LEFT]=n,this.location[At.RIGHT]=r};$e.prototype.get=function(t){return t<this.location.length?this.location[t]:lt.NONE};$e.prototype.isArea=function(){return this.location.length>1};$e.prototype.isAnyNull=function(){for(var t=this,n=0;n<this.location.length;n++)if(t.location[n]===lt.NONE)return!0;return!1};$e.prototype.setLocation=function(){if(arguments.length===1){var t=arguments[0];this.setLocation(At.ON,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.location[n]=r}};$e.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(lt.NONE)};$e.prototype.isEqualOnSide=function(t,n){return this.location[n]===t.location[n]};$e.prototype.allPositionsEqual=function(t){for(var n=this,r=0;r<this.location.length;r++)if(n.location[r]!==t)return!1;return!0};$e.prototype.interfaces_=function(){return[]};$e.prototype.getClass=function(){return $e};var Ve=function e(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new $e(t),this.elt[1]=new $e(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new $e(n.elt[0]),this.elt[1]=new $e(n.elt[1])}}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.elt[0]=new $e(lt.NONE),this.elt[1]=new $e(lt.NONE),this.elt[r].setLocation(i)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2];this.elt[0]=new $e(o,u,f),this.elt[1]=new $e(o,u,f)}else if(arguments.length===4){var d=arguments[0],_=arguments[1],y=arguments[2],E=arguments[3];this.elt[0]=new $e(lt.NONE,lt.NONE,lt.NONE),this.elt[1]=new $e(lt.NONE,lt.NONE,lt.NONE),this.elt[d].setLocations(_,y,E)}};Ve.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t};Ve.prototype.setAllLocations=function(t,n){this.elt[t].setAllLocations(n)};Ve.prototype.isNull=function(t){return this.elt[t].isNull()};Ve.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.elt[n].setAllLocationsIfNull(r)}};Ve.prototype.isLine=function(t){return this.elt[t].isLine()};Ve.prototype.merge=function(t){for(var n=this,r=0;r<2;r++)n.elt[r]===null&&t.elt[r]!==null?n.elt[r]=new $e(t.elt[r]):n.elt[r].merge(t.elt[r])};Ve.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()};Ve.prototype.getLocation=function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(At.ON)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.elt[n].get(r)}};Ve.prototype.toString=function(){var t=new hs;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()};Ve.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}};Ve.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()};Ve.prototype.setLocation=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];this.elt[t].setLocation(At.ON,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this.elt[r].setLocation(i,o)}};Ve.prototype.isEqualOnSide=function(t,n){return this.elt[0].isEqualOnSide(t.elt[0],n)&&this.elt[1].isEqualOnSide(t.elt[1],n)};Ve.prototype.allPositionsEqual=function(t,n){return this.elt[t].allPositionsEqual(n)};Ve.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new $e(this.elt[t].location[0]))};Ve.prototype.interfaces_=function(){return[]};Ve.prototype.getClass=function(){return Ve};Ve.toLineLabel=function(t){for(var n=new Ve(lt.NONE),r=0;r<2;r++)n.setLocation(r,t.getLocation(r));return n};var Pn=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ot,this._pts=new Ot,this._label=new Ve(lt.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ot,this._geometryFactory=null;var t=arguments[0],n=arguments[1];this._geometryFactory=n,this.computePoints(t),this.computeRing()};Pn.prototype.computeRing=function(){var t=this;if(this._ring!==null)return null;for(var n=new Array(this._pts.size()).fill(null),r=0;r<this._pts.size();r++)n[r]=t._pts.get(r);this._ring=this._geometryFactory.createLinearRing(n),this._isHole=Gt.isCCW(this._ring.getCoordinates())};Pn.prototype.isIsolated=function(){return this._label.getGeometryCount()===1};Pn.prototype.computePoints=function(t){var n=this;this._startDe=t;var r=t,i=!0;do{if(r===null)throw new so("Found null DirectedEdge");if(r.getEdgeRing()===n)throw new so("Directed Edge visited twice during ring-building at "+r.getCoordinate());n._edges.add(r);var o=r.getLabel();me.isTrue(o.isArea()),n.mergeLabel(o),n.addPoints(r.getEdge(),r.isForward(),i),i=!1,n.setEdgeRing(r,n),r=n.getNext(r)}while(r!==this._startDe)};Pn.prototype.getLinearRing=function(){return this._ring};Pn.prototype.getCoordinate=function(t){return this._pts.get(t)};Pn.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var n=this._startDe;do{var r=n.getNode(),i=r.getEdges().getOutgoingDegree(t);i>t._maxNodeDegree&&(t._maxNodeDegree=i),n=t.getNext(n)}while(n!==this._startDe);this._maxNodeDegree*=2};Pn.prototype.addPoints=function(t,n,r){var i=this,o=t.getCoordinates();if(n){var u=1;r&&(u=0);for(var f=u;f<o.length;f++)i._pts.add(o[f])}else{var d=o.length-2;r&&(d=o.length-1);for(var _=d;_>=0;_--)i._pts.add(o[_])}};Pn.prototype.isHole=function(){return this._isHole};Pn.prototype.setInResult=function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)};Pn.prototype.containsPoint=function(t){var n=this.getLinearRing(),r=n.getEnvelopeInternal();if(!r.contains(t)||!Gt.isPointInRing(t,n.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();){var o=i.next();if(o.containsPoint(t))return!1}return!0};Pn.prototype.addHole=function(t){this._holes.add(t)};Pn.prototype.isShell=function(){return this._shell===null};Pn.prototype.getLabel=function(){return this._label};Pn.prototype.getEdges=function(){return this._edges};Pn.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree};Pn.prototype.getShell=function(){return this._shell};Pn.prototype.mergeLabel=function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=n.getLocation(r,At.RIGHT);if(i===lt.NONE)return null;if(this._label.getLocation(r)===lt.NONE)return this._label.setLocation(r,i),null}};Pn.prototype.setShell=function(t){this._shell=t,t!==null&&t.addHole(this)};Pn.prototype.toPolygon=function(t){for(var n=this,r=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)r[i]=n._holes.get(i).getLinearRing();var o=t.createPolygon(this.getLinearRing(),r);return o};Pn.prototype.interfaces_=function(){return[]};Pn.prototype.getClass=function(){return Pn};var yw=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setEdgeRing=function(r,i){r.setMinEdgeRing(i)},t.prototype.getNext=function(r){return r.getNextMin()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pn),vw=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildMinimalRings=function(){var r=this,i=new Ot,o=this._startDe;do{if(o.getMinEdgeRing()===null){var u=new yw(o,r._geometryFactory);i.add(u)}o=o.getNext()}while(o!==this._startDe);return i},t.prototype.setEdgeRing=function(r,i){r.setEdgeRing(i)},t.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var r=this,i=this._startDe;do{var o=i.getNode();o.getEdges().linkMinimalDirectedEdges(r),i=i.getNext()}while(i!==this._startDe)},t.prototype.getNext=function(r){return r.getNext()},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Pn),si=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._label=t}}};si.prototype.setVisited=function(t){this._isVisited=t};si.prototype.setInResult=function(t){this._isInResult=t};si.prototype.isCovered=function(){return this._isCovered};si.prototype.isCoveredSet=function(){return this._isCoveredSet};si.prototype.setLabel=function(t){this._label=t};si.prototype.getLabel=function(){return this._label};si.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0};si.prototype.updateIM=function(t){me.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)};si.prototype.isInResult=function(){return this._isInResult};si.prototype.isVisited=function(){return this._isVisited};si.prototype.interfaces_=function(){return[]};si.prototype.getClass=function(){return si};var Sp=function(e){function t(){e.call(this),this._coord=null,this._edges=null;var n=arguments[0],r=arguments[1];this._coord=n,this._edges=r,this._label=new Ve(0,lt.NONE)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isIncidentEdgeInResult=function(){for(var r=this.getEdges().getEdges().iterator();r.hasNext();){var i=r.next();if(i.getEdge().isInResult())return!0}return!1},t.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},t.prototype.getCoordinate=function(){return this._coord},t.prototype.print=function(r){r.println("node "+this._coord+" lbl: "+this._label)},t.prototype.computeIM=function(r){},t.prototype.computeMergedLocation=function(r,i){var o=lt.NONE;if(o=this._label.getLocation(i),!r.isNull(i)){var u=r.getLocation(i);o!==lt.BOUNDARY&&(o=u)}return o},t.prototype.setLabel=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];this._label===null?this._label=new Ve(r,i):this._label.setLocation(r,i)}else return e.prototype.setLabel.apply(this,arguments)},t.prototype.getEdges=function(){return this._edges},t.prototype.mergeLabel=function(){var r=this;if(arguments[0]instanceof t){var i=arguments[0];this.mergeLabel(i._label)}else if(arguments[0]instanceof Ve)for(var o=arguments[0],u=0;u<2;u++){var f=r.computeMergedLocation(o,u),d=r._label.getLocation(u);d===lt.NONE&&r._label.setLocation(u,f)}},t.prototype.add=function(r){this._edges.insert(r),r.setNode(this)},t.prototype.setLabelBoundary=function(r){if(this._label===null)return null;var i=lt.NONE;this._label!==null&&(i=this._label.getLocation(r));var o=null;switch(i){case lt.BOUNDARY:o=lt.INTERIOR;break;case lt.INTERIOR:o=lt.BOUNDARY;break;default:o=lt.BOUNDARY;break}this._label.setLocation(r,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(si),os=function(){this.nodeMap=new ir,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};os.prototype.find=function(t){return this.nodeMap.get(t)};os.prototype.addNode=function(){if(arguments[0]instanceof it){var t=arguments[0],n=this.nodeMap.get(t);return n===null&&(n=this.nodeFact.createNode(t),this.nodeMap.put(t,n)),n}else if(arguments[0]instanceof Sp){var r=arguments[0],i=this.nodeMap.get(r.getCoordinate());return i===null?(this.nodeMap.put(r.getCoordinate(),r),r):(i.mergeLabel(r),i)}};os.prototype.print=function(t){for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};os.prototype.iterator=function(){return this.nodeMap.values().iterator()};os.prototype.values=function(){return this.nodeMap.values()};os.prototype.getBoundaryNodes=function(t){for(var n=new Ot,r=this.iterator();r.hasNext();){var i=r.next();i.getLabel().getLocation(t)===lt.BOUNDARY&&n.add(i)}return n};os.prototype.add=function(t){var n=t.getCoordinate(),r=this.addNode(n);r.add(t)};os.prototype.interfaces_=function(){return[]};os.prototype.getClass=function(){return os};var Ke=function(){},lh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ke.prototype.interfaces_=function(){return[]};Ke.prototype.getClass=function(){return Ke};Ke.isNorthern=function(t){return t===Ke.NE||t===Ke.NW};Ke.isOpposite=function(t,n){if(t===n)return!1;var r=(t-n+4)%4;return r===2};Ke.commonHalfPlane=function(t,n){if(t===n)return t;var r=(t-n+4)%4;if(r===2)return-1;var i=t<n?t:n,o=t>n?t:n;return i===0&&o===3?3:i};Ke.isInHalfPlane=function(t,n){return n===Ke.SE?t===Ke.SE||t===Ke.SW:t===n||t===n+1};Ke.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];if(t===0&&n===0)throw new ln("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?Ke.NE:Ke.SE:n>=0?Ke.NW:Ke.SW}else if(arguments[0]instanceof it&&arguments[1]instanceof it){var r=arguments[0],i=arguments[1];if(i.x===r.x&&i.y===r.y)throw new ln("Cannot compute the quadrant for two identical points "+r);return i.x>=r.x?i.y>=r.y?Ke.NE:Ke.SE:i.y>=r.y?Ke.NW:Ke.SW}};lh.NE.get=function(){return 0};lh.NW.get=function(){return 1};lh.SW.get=function(){return 2};lh.SE.get=function(){return 3};Object.defineProperties(Ke,lh);var sr=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var t=arguments[0];this._edge=t}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2],o=null;this._edge=n,this.init(r,i),this._label=o}else if(arguments.length===4){var u=arguments[0],f=arguments[1],d=arguments[2],_=arguments[3];this._edge=u,this.init(f,d),this._label=_}};sr.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Gt.computeOrientation(t._p0,t._p1,this._p1)};sr.prototype.getDy=function(){return this._dy};sr.prototype.getCoordinate=function(){return this._p0};sr.prototype.setNode=function(t){this._node=t};sr.prototype.print=function(t){var n=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),i=r.lastIndexOf("."),o=r.substring(i+1);t.print("  "+o+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+n+"   "+this._label)};sr.prototype.compareTo=function(t){var n=t;return this.compareDirection(n)};sr.prototype.getDirectedCoordinate=function(){return this._p1};sr.prototype.getDx=function(){return this._dx};sr.prototype.getLabel=function(){return this._label};sr.prototype.getEdge=function(){return this._edge};sr.prototype.getQuadrant=function(){return this._quadrant};sr.prototype.getNode=function(){return this._node};sr.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);return"  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label};sr.prototype.computeLabel=function(t){};sr.prototype.init=function(t,n){this._p0=t,this._p1=n,this._dx=n.x-t.x,this._dy=n.y-t.y,this._quadrant=Ke.quadrant(this._dx,this._dy),me.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")};sr.prototype.interfaces_=function(){return[vi]};sr.prototype.getClass=function(){return sr};var mg=function(e){function t(){var n=arguments[0],r=arguments[1];if(e.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=r,r)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var i=n.getNumPoints()-1;this.init(n.getCoordinate(i),n.getCoordinate(i-1))}this.computeDirectedLabel()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getNextMin=function(){return this._nextMin},t.prototype.getDepth=function(r){return this._depth[r]},t.prototype.setVisited=function(r){this._isVisited=r},t.prototype.computeDirectedLabel=function(){this._label=new Ve(this._edge.getLabel()),this._isForward||this._label.flip()},t.prototype.getNext=function(){return this._next},t.prototype.setDepth=function(r,i){if(this._depth[r]!==-999&&this._depth[r]!==i)throw new so("assigned depths do not match",this.getCoordinate());this._depth[r]=i},t.prototype.isInteriorAreaEdge=function(){for(var r=this,i=!0,o=0;o<2;o++)r._label.isArea(o)&&r._label.getLocation(o,At.LEFT)===lt.INTERIOR&&r._label.getLocation(o,At.RIGHT)===lt.INTERIOR||(i=!1);return i},t.prototype.setNextMin=function(r){this._nextMin=r},t.prototype.print=function(r){e.prototype.print.call(this,r),r.print(" "+this._depth[At.LEFT]+"/"+this._depth[At.RIGHT]),r.print(" ("+this.getDepthDelta()+")"),this._isInResult&&r.print(" inResult")},t.prototype.setMinEdgeRing=function(r){this._minEdgeRing=r},t.prototype.isLineEdge=function(){var r=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,lt.EXTERIOR),o=!this._label.isArea(1)||this._label.allPositionsEqual(1,lt.EXTERIOR);return r&&i&&o},t.prototype.setEdgeRing=function(r){this._edgeRing=r},t.prototype.getMinEdgeRing=function(){return this._minEdgeRing},t.prototype.getDepthDelta=function(){var r=this._edge.getDepthDelta();return this._isForward||(r=-r),r},t.prototype.setInResult=function(r){this._isInResult=r},t.prototype.getSym=function(){return this._sym},t.prototype.isForward=function(){return this._isForward},t.prototype.getEdge=function(){return this._edge},t.prototype.printEdge=function(r){this.print(r),r.print(" "),this._isForward?this._edge.print(r):this._edge.printReverse(r)},t.prototype.setSym=function(r){this._sym=r},t.prototype.setVisitedEdge=function(r){this.setVisited(r),this._sym.setVisited(r)},t.prototype.setEdgeDepths=function(r,i){var o=this.getEdge().getDepthDelta();this._isForward||(o=-o);var u=1;r===At.LEFT&&(u=-1);var f=At.opposite(r),d=o*u,_=i+d;this.setDepth(r,i),this.setDepth(f,_)},t.prototype.getEdgeRing=function(){return this._edgeRing},t.prototype.isInResult=function(){return this._isInResult},t.prototype.setNext=function(r){this._next=r},t.prototype.isVisited=function(){return this._isVisited},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.depthFactor=function(r,i){return r===lt.EXTERIOR&&i===lt.INTERIOR?1:r===lt.INTERIOR&&i===lt.EXTERIOR?-1:0},t}(sr),dl=function(){};dl.prototype.createNode=function(t){return new Sp(t,null)};dl.prototype.interfaces_=function(){return[]};dl.prototype.getClass=function(){return dl};var fn=function(){if(this._edges=new Ot,this._nodes=null,this._edgeEndList=new Ot,arguments.length===0)this._nodes=new os(new dl);else if(arguments.length===1){var t=arguments[0];this._nodes=new os(t)}};fn.prototype.printEdges=function(t){var n=this;t.println("Edges:");for(var r=0;r<this._edges.size();r++){t.println("edge "+r+":");var i=n._edges.get(r);i.print(t),i.eiList.print(t)}};fn.prototype.find=function(t){return this._nodes.find(t)};fn.prototype.addNode=function(){if(arguments[0]instanceof Sp){var t=arguments[0];return this._nodes.addNode(t)}else if(arguments[0]instanceof it){var n=arguments[0];return this._nodes.addNode(n)}};fn.prototype.getNodeIterator=function(){return this._nodes.iterator()};fn.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var n=t.next();n.getEdges().linkResultDirectedEdges()}};fn.prototype.debugPrintln=function(t){Yn.out.println(t)};fn.prototype.isBoundaryNode=function(t,n){var r=this._nodes.find(n);if(r===null)return!1;var i=r.getLabel();return i!==null&&i.getLocation(t)===lt.BOUNDARY};fn.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var n=t.next();n.getEdges().linkAllDirectedEdges()}};fn.prototype.matchInSameDirection=function(t,n,r,i){return t.equals(r)?Gt.computeOrientation(t,n,i)===Gt.COLLINEAR&&Ke.quadrant(t,n)===Ke.quadrant(r,i):!1};fn.prototype.getEdgeEnds=function(){return this._edgeEndList};fn.prototype.debugPrint=function(t){Yn.out.print(t)};fn.prototype.getEdgeIterator=function(){return this._edges.iterator()};fn.prototype.findEdgeInSameDirection=function(t,n){for(var r=this,i=0;i<this._edges.size();i++){var o=r._edges.get(i),u=o.getCoordinates();if(r.matchInSameDirection(t,n,u[0],u[1])||r.matchInSameDirection(t,n,u[u.length-1],u[u.length-2]))return o}return null};fn.prototype.insertEdge=function(t){this._edges.add(t)};fn.prototype.findEdgeEnd=function(t){for(var n=this.getEdgeEnds().iterator();n.hasNext();){var r=n.next();if(r.getEdge()===t)return r}return null};fn.prototype.addEdges=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next();n._edges.add(i);var o=new mg(i,!0),u=new mg(i,!1);o.setSym(u),u.setSym(o),n.add(o),n.add(u)}};fn.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)};fn.prototype.getNodes=function(){return this._nodes.values()};fn.prototype.findEdge=function(t,n){for(var r=this,i=0;i<this._edges.size();i++){var o=r._edges.get(i),u=o.getCoordinates();if(t.equals(u[0])&&n.equals(u[1]))return o}return null};fn.prototype.interfaces_=function(){return[]};fn.prototype.getClass=function(){return fn};fn.linkResultDirectedEdges=function(t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.getEdges().linkResultDirectedEdges()}};var qr=function(){this._geometryFactory=null,this._shellList=new Ot;var t=arguments[0];this._geometryFactory=t};qr.prototype.sortShellsAndHoles=function(t,n,r){for(var i=t.iterator();i.hasNext();){var o=i.next();o.isHole()?r.add(o):n.add(o)}};qr.prototype.computePolygons=function(t){for(var n=this,r=new Ot,i=t.iterator();i.hasNext();){var o=i.next(),u=o.toPolygon(n._geometryFactory);r.add(u)}return r};qr.prototype.placeFreeHoles=function(t,n){for(var r=this,i=n.iterator();i.hasNext();){var o=i.next();if(o.getShell()===null){var u=r.findEdgeRingContaining(o,t);if(u===null)throw new so("unable to assign hole to a shell",o.getCoordinate(0));o.setShell(u)}}};qr.prototype.buildMinimalEdgeRings=function(t,n,r){for(var i=this,o=new Ot,u=t.iterator();u.hasNext();){var f=u.next();if(f.getMaxNodeDegree()>2){f.linkDirectedEdgesForMinimalEdgeRings();var d=f.buildMinimalRings(),_=i.findShell(d);_!==null?(i.placePolygonHoles(_,d),n.add(_)):r.addAll(d)}else o.add(f)}return o};qr.prototype.containsPoint=function(t){for(var n=this._shellList.iterator();n.hasNext();){var r=n.next();if(r.containsPoint(t))return!0}return!1};qr.prototype.buildMaximalEdgeRings=function(t){for(var n=this,r=new Ot,i=t.iterator();i.hasNext();){var o=i.next();if(o.isInResult()&&o.getLabel().isArea()&&o.getEdgeRing()===null){var u=new vw(o,n._geometryFactory);r.add(u),u.setInResult()}}return r};qr.prototype.placePolygonHoles=function(t,n){for(var r=n.iterator();r.hasNext();){var i=r.next();i.isHole()&&i.setShell(t)}};qr.prototype.getPolygons=function(){var t=this.computePolygons(this._shellList);return t};qr.prototype.findEdgeRingContaining=function(t,n){for(var r=t.getLinearRing(),i=r.getEnvelopeInternal(),o=r.getCoordinateN(0),u=null,f=null,d=n.iterator();d.hasNext();){var _=d.next(),y=_.getLinearRing(),E=y.getEnvelopeInternal();u!==null&&(f=u.getLinearRing().getEnvelopeInternal());var S=!1;E.contains(i)&&Gt.isPointInRing(o,y.getCoordinates())&&(S=!0),S&&(u===null||f.contains(E))&&(u=_)}return u};qr.prototype.findShell=function(t){for(var n=0,r=null,i=t.iterator();i.hasNext();){var o=i.next();o.isHole()||(r=o,n++)}return me.isTrue(n<=1,"found two shells in MinimalEdgeRing list"),r};qr.prototype.add=function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var n=arguments[0],r=arguments[1];fn.linkResultDirectedEdges(r);var i=this.buildMaximalEdgeRings(n),o=new Ot,u=this.buildMinimalEdgeRings(i,this._shellList,o);this.sortShellsAndHoles(u,this._shellList,o),this.placeFreeHoles(this._shellList,o)}};qr.prototype.interfaces_=function(){return[]};qr.prototype.getClass=function(){return qr};var gl=function(){};gl.prototype.getBounds=function(){};gl.prototype.interfaces_=function(){return[]};gl.prototype.getClass=function(){return gl};var Di=function(){this._bounds=null,this._item=null;var t=arguments[0],n=arguments[1];this._bounds=t,this._item=n};Di.prototype.getItem=function(){return this._item};Di.prototype.getBounds=function(){return this._bounds};Di.prototype.interfaces_=function(){return[gl,Ci]};Di.prototype.getClass=function(){return Di};var oo=function(){this._size=null,this._items=null,this._size=0,this._items=new Ot,this._items.add(null)};oo.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t};oo.prototype.size=function(){return this._size};oo.prototype.reorder=function(t){for(var n=this,r=null,i=this._items.get(t);t*2<=this._size&&(r=t*2,r!==n._size&&n._items.get(r+1).compareTo(n._items.get(r))<0&&r++,n._items.get(r).compareTo(i)<0);t=r)n._items.set(t,n._items.get(r));this._items.set(t,i)};oo.prototype.clear=function(){this._size=0,this._items.clear()};oo.prototype.isEmpty=function(){return this._size===0};oo.prototype.add=function(t){var n=this;this._items.add(null),this._size+=1;var r=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(r/2)))<0;r/=2)n._items.set(r,n._items.get(Math.trunc(r/2)));this._items.set(r,t)};oo.prototype.interfaces_=function(){return[]};oo.prototype.getClass=function(){return oo};var ko=function(){};ko.prototype.visitItem=function(t){};ko.prototype.interfaces_=function(){return[]};ko.prototype.getClass=function(){return ko};var eu=function(){};eu.prototype.insert=function(t,n){};eu.prototype.remove=function(t,n){};eu.prototype.query=function(){};eu.prototype.interfaces_=function(){return[]};eu.prototype.getClass=function(){return eu};var Nn=function(){if(this._childBoundables=new Ot,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this._level=t}}},Cv={serialVersionUID:{configurable:!0}};Nn.prototype.getLevel=function(){return this._level};Nn.prototype.size=function(){return this._childBoundables.size()};Nn.prototype.getChildBoundables=function(){return this._childBoundables};Nn.prototype.addChildBoundable=function(t){me.isTrue(this._bounds===null),this._childBoundables.add(t)};Nn.prototype.isEmpty=function(){return this._childBoundables.isEmpty()};Nn.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds};Nn.prototype.interfaces_=function(){return[gl,Ci]};Nn.prototype.getClass=function(){return Nn};Cv.serialVersionUID.get=function(){return 6493722185909574e3};Object.defineProperties(Nn,Cv);var ki=function(){};ki.reverseOrder=function(){return{compare:function(n,r){return r.compareTo(n)}}};ki.min=function(t){return ki.sort(t),t.get(0)};ki.sort=function(t,n){var r=t.toArray();n?ca.sort(r,n):ca.sort(r);for(var i=t.iterator(),o=0,u=r.length;o<u;o++)i.next(),i.set(r[o])};ki.singletonList=function(t){var n=new Ot;return n.add(t),n};var Sn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundable1=t,this._boundable2=n,this._itemDistance=r,this._distance=this.distance()};Sn.prototype.expandToQueue=function(t,n){var r=Sn.isComposite(this._boundable1),i=Sn.isComposite(this._boundable2);if(r&&i)return Sn.area(this._boundable1)>Sn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,n),null):(this.expand(this._boundable2,this._boundable1,t,n),null);if(r)return this.expand(this._boundable1,this._boundable2,t,n),null;if(i)return this.expand(this._boundable2,this._boundable1,t,n),null;throw new ln("neither boundable is composite")};Sn.prototype.isLeaves=function(){return!(Sn.isComposite(this._boundable1)||Sn.isComposite(this._boundable2))};Sn.prototype.compareTo=function(t){var n=t;return this._distance<n._distance?-1:this._distance>n._distance?1:0};Sn.prototype.expand=function(t,n,r,i){for(var o=this,u=t.getChildBoundables(),f=u.iterator();f.hasNext();){var d=f.next(),_=new Sn(d,n,o._itemDistance);_.getDistance()<i&&r.add(_)}};Sn.prototype.getBoundable=function(t){return t===0?this._boundable1:this._boundable2};Sn.prototype.getDistance=function(){return this._distance};Sn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())};Sn.prototype.interfaces_=function(){return[vi]};Sn.prototype.getClass=function(){return Sn};Sn.area=function(t){return t.getBounds().getArea()};Sn.isComposite=function(t){return t instanceof Nn};var Gn=function e(){if(this._root=null,this._built=!1,this._itemBoundables=new Ot,this._nodeCapacity=null,arguments.length===0){var t=e.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(arguments.length===1){var n=arguments[0];me.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},Mp={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Gn.prototype.getNodeCapacity=function(){return this._nodeCapacity};Gn.prototype.lastNode=function(t){return t.get(t.size()-1)};Gn.prototype.size=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var n=arguments[0],r=0,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof Nn?r+=t.size(o):o instanceof Di&&(r+=1)}return r}};Gn.prototype.removeItem=function(t,n){for(var r=null,i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next();o instanceof Di&&o.getItem()===n&&(r=o)}return r!==null?(t.getChildBoundables().remove(r),!0):!1};Gn.prototype.itemsTree=function(){var t=this;if(arguments.length===0){this.build();var n=this.itemsTree(this._root);return n===null?new Ot:n}else if(arguments.length===1){for(var r=arguments[0],i=new Ot,o=r.getChildBoundables().iterator();o.hasNext();){var u=o.next();if(u instanceof Nn){var f=t.itemsTree(u);f!==null&&i.add(f)}else u instanceof Di?i.add(u.getItem()):me.shouldNeverReachHere()}return i.size()<=0?null:i}};Gn.prototype.insert=function(t,n){me.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Di(t,n))};Gn.prototype.boundablesAtLevel=function(){var t=this;if(arguments.length===1){var n=arguments[0],r=new Ot;return this.boundablesAtLevel(n,this._root,r),r}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];if(me.isTrue(i>-2),o.getLevel()===i)return u.add(o),null;for(var f=o.getChildBoundables().iterator();f.hasNext();){var d=f.next();d instanceof Nn?t.boundablesAtLevel(i,d,u):(me.isTrue(d instanceof Di),i===-1&&u.add(d))}return null}};Gn.prototype.query=function(){var t=this;if(arguments.length===1){var n=arguments[0];this.build();var r=new Ot;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r),r}else if(arguments.length===2){var i=arguments[0],o=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,o)}else if(arguments.length===3){if(se(arguments[2],ko)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn)for(var u=arguments[0],f=arguments[1],d=arguments[2],_=f.getChildBoundables(),y=0;y<_.size();y++){var E=_.get(y);t.getIntersectsOp().intersects(E.getBounds(),u)&&(E instanceof Nn?t.query(u,E,d):E instanceof Di?d.visitItem(E.getItem()):me.shouldNeverReachHere())}else if(se(arguments[2],Ii)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn)for(var S=arguments[0],T=arguments[1],I=arguments[2],z=T.getChildBoundables(),G=0;G<z.size();G++){var Q=z.get(G);t.getIntersectsOp().intersects(Q.getBounds(),S)&&(Q instanceof Nn?t.query(S,Q,I):Q instanceof Di?I.add(Q.getItem()):me.shouldNeverReachHere())}}};Gn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0};Gn.prototype.getRoot=function(){return this.build(),this._root};Gn.prototype.remove=function(){var t=this;if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.build(),this.getIntersectsOp().intersects(this._root.getBounds(),n)?this.remove(n,this._root,r):!1}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],f=this.removeItem(o,u);if(f)return!0;for(var d=null,_=o.getChildBoundables().iterator();_.hasNext();){var y=_.next();if(t.getIntersectsOp().intersects(y.getBounds(),i)&&y instanceof Nn&&(f=t.remove(i,y,u),f)){d=y;break}}return d!==null&&d.getChildBoundables().isEmpty()&&o.getChildBoundables().remove(d),f}};Gn.prototype.createHigherLevels=function(t,n){me.isTrue(!t.isEmpty());var r=this.createParentBoundables(t,n+1);return r.size()===1?r.get(0):this.createHigherLevels(r,n+1)};Gn.prototype.depth=function(){var t=this;if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var n=arguments[0],r=0,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Nn){var u=t.depth(o);u>r&&(r=u)}}return r+1}};Gn.prototype.createParentBoundables=function(t,n){var r=this;me.isTrue(!t.isEmpty());var i=new Ot;i.add(this.createNode(n));var o=new Ot(t);ki.sort(o,this.getComparator());for(var u=o.iterator();u.hasNext();){var f=u.next();r.lastNode(i).getChildBoundables().size()===r.getNodeCapacity()&&i.add(r.createNode(n)),r.lastNode(i).addChildBoundable(f)}return i};Gn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()};Gn.prototype.interfaces_=function(){return[Ci]};Gn.prototype.getClass=function(){return Gn};Gn.compareDoubles=function(t,n){return t>n?1:t<n?-1:0};Mp.IntersectsOp.get=function(){return Cw};Mp.serialVersionUID.get=function(){return-3886435814360241e3};Mp.DEFAULT_NODE_CAPACITY.get=function(){return 10};Object.defineProperties(Gn,Mp);var Cw=function(){},ml=function(){};ml.prototype.distance=function(t,n){};ml.prototype.interfaces_=function(){return[]};ml.prototype.getClass=function(){return ml};var Ev=function(e){function t(r){r=r||t.DEFAULT_NODE_CAPACITY,e.call(this,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return t.prototype.createParentBoundablesFromVerticalSlices=function(i,o){var u=this;me.isTrue(i.length>0);for(var f=new Ot,d=0;d<i.length;d++)f.addAll(u.createParentBoundablesFromVerticalSlice(i[d],o));return f},t.prototype.createNode=function(i){return new B_(i)},t.prototype.size=function(){return arguments.length===0?e.prototype.size.call(this):e.prototype.size.apply(this,arguments)},t.prototype.insert=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];if(i.isNull())return null;e.prototype.insert.call(this,i,o)}else return e.prototype.insert.apply(this,arguments)},t.prototype.getIntersectsOp=function(){return t.intersectsOp},t.prototype.verticalSlices=function(i,o){for(var u=Math.trunc(Math.ceil(i.size()/o)),f=new Array(o).fill(null),d=i.iterator(),_=0;_<o;_++){f[_]=new Ot;for(var y=0;d.hasNext()&&y<u;){var E=d.next();f[_].add(E),y++}}return f},t.prototype.query=function(){if(arguments.length===1){var i=arguments[0];return e.prototype.query.call(this,i)}else if(arguments.length===2){var o=arguments[0],u=arguments[1];e.prototype.query.call(this,o,u)}else if(arguments.length===3){if(se(arguments[2],ko)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn){var f=arguments[0],d=arguments[1],_=arguments[2];e.prototype.query.call(this,f,d,_)}else if(se(arguments[2],Ii)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn){var y=arguments[0],E=arguments[1],S=arguments[2];e.prototype.query.call(this,y,E,S)}}},t.prototype.getComparator=function(){return t.yComparator},t.prototype.createParentBoundablesFromVerticalSlice=function(i,o){return e.prototype.createParentBoundables.call(this,i,o)},t.prototype.remove=function(){if(arguments.length===2){var i=arguments[0],o=arguments[1];return e.prototype.remove.call(this,i,o)}else return e.prototype.remove.apply(this,arguments)},t.prototype.depth=function(){return arguments.length===0?e.prototype.depth.call(this):e.prototype.depth.apply(this,arguments)},t.prototype.createParentBoundables=function(i,o){me.isTrue(!i.isEmpty());var u=Math.trunc(Math.ceil(i.size()/this.getNodeCapacity())),f=new Ot(i);ki.sort(f,t.xComparator);var d=this.verticalSlices(f,Math.trunc(Math.ceil(Math.sqrt(u))));return this.createParentBoundablesFromVerticalSlices(d,o)},t.prototype.nearestNeighbour=function(){if(arguments.length===1){if(se(arguments[0],ml)){var i=arguments[0],o=new Sn(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(o)}else if(arguments[0]instanceof Sn){var u=arguments[0];return this.nearestNeighbour(u,ue.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof t&&se(arguments[1],ml)){var f=arguments[0],d=arguments[1],_=new Sn(this.getRoot(),f.getRoot(),d);return this.nearestNeighbour(_)}else if(arguments[0]instanceof Sn&&typeof arguments[1]=="number"){var y=arguments[0],E=arguments[1],S=E,T=null,I=new oo;for(I.add(y);!I.isEmpty()&&S>0;){var z=I.poll(),G=z.getDistance();if(G>=S)break;z.isLeaves()?(S=G,T=z):z.expandToQueue(I,S)}return[T.getBoundable(0).getItem(),T.getBoundable(1).getItem()]}}else if(arguments.length===3){var Q=arguments[0],$=arguments[1],rt=arguments[2],mt=new Di(Q,$),bt=new Sn(this.getRoot(),mt,rt);return this.nearestNeighbour(bt)[0]}},t.prototype.interfaces_=function(){return[eu,Ci]},t.prototype.getClass=function(){return t},t.centreX=function(i){return t.avg(i.getMinX(),i.getMaxX())},t.avg=function(i,o){return(i+o)/2},t.centreY=function(i){return t.avg(i.getMinY(),i.getMaxY())},n.STRtreeNode.get=function(){return B_},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[ol]},compare:function(r,i){return e.compareDoubles(t.centreX(r.getBounds()),t.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[ol]},compare:function(r,i){return e.compareDoubles(t.centreY(r.getBounds()),t.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[e.IntersectsOp]},intersects:function(r,i){return r.intersects(i)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(t,n),t}(Gn),B_=function(e){function t(){var n=arguments[0];e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.computeBounds=function(){for(var r=null,i=this.getChildBoundables().iterator();i.hasNext();){var o=i.next();r===null?r=new Jt(o.getBounds()):r.expandToInclude(o.getBounds())}return r},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Nn),br=function(){};br.prototype.interfaces_=function(){return[]};br.prototype.getClass=function(){return br};br.relativeSign=function(t,n){return t<n?-1:t>n?1:0};br.compare=function(t,n,r){if(n.equals2D(r))return 0;var i=br.relativeSign(n.x,r.x),o=br.relativeSign(n.y,r.y);switch(t){case 0:return br.compareValue(i,o);case 1:return br.compareValue(o,i);case 2:return br.compareValue(o,-i);case 3:return br.compareValue(-i,o);case 4:return br.compareValue(-i,-o);case 5:return br.compareValue(-o,-i);case 6:return br.compareValue(-o,i);case 7:return br.compareValue(i,-o)}return me.shouldNeverReachHere("invalid octant value"),0};br.compareValue=function(t,n){return t<0?-1:t>0?1:n<0?-1:n>0?1:0};var No=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this._segString=t,this.coord=new it(n),this.segmentIndex=r,this._segmentOctant=i,this._isInterior=!n.equals2D(t.getCoordinate(r))};No.prototype.getCoordinate=function(){return this.coord};No.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)};No.prototype.compareTo=function(t){var n=t;return this.segmentIndex<n.segmentIndex?-1:this.segmentIndex>n.segmentIndex?1:this.coord.equals2D(n.coord)?0:br.compare(this._segmentOctant,this.coord,n.coord)};No.prototype.isEndPoint=function(t){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===t};No.prototype.isInterior=function(){return this._isInterior};No.prototype.interfaces_=function(){return[vi]};No.prototype.getClass=function(){return No};var yr=function(){this._nodeMap=new ir,this._edge=null;var t=arguments[0];this._edge=t};yr.prototype.getSplitCoordinates=function(){var t=this,n=new ah;this.addEndpoints();for(var r=this.iterator(),i=r.next();r.hasNext();){var o=r.next();t.addEdgeCoordinates(i,o,n),i=o}return n.toCoordinateArray()};yr.prototype.addCollapsedNodes=function(){var t=this,n=new Ot;this.findCollapsesFromInsertedNodes(n),this.findCollapsesFromExistingVertices(n);for(var r=n.iterator();r.hasNext();){var i=r.next().intValue();t.add(t._edge.getCoordinate(i),i)}};yr.prototype.print=function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};yr.prototype.findCollapsesFromExistingVertices=function(t){for(var n=this,r=0;r<this._edge.size()-2;r++){var i=n._edge.getCoordinate(r),o=n._edge.getCoordinate(r+2);i.equals2D(o)&&t.add(new es(r+1))}};yr.prototype.addEdgeCoordinates=function(t,n,r){var i=this,o=this._edge.getCoordinate(n.segmentIndex),u=n.isInterior()||!n.coord.equals2D(o);r.add(new it(t.coord),!1);for(var f=t.segmentIndex+1;f<=n.segmentIndex;f++)r.add(i._edge.getCoordinate(f));u&&r.add(new it(n.coord))};yr.prototype.iterator=function(){return this._nodeMap.values().iterator()};yr.prototype.addSplitEdges=function(t){var n=this;this.addEndpoints(),this.addCollapsedNodes();for(var r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),u=n.createSplitEdge(i,o);t.add(u),i=o}};yr.prototype.findCollapseIndex=function(t,n,r){if(!t.coord.equals2D(n.coord))return!1;var i=n.segmentIndex-t.segmentIndex;return n.isInterior()||i--,i===1?(r[0]=t.segmentIndex+1,!0):!1};yr.prototype.findCollapsesFromInsertedNodes=function(t){for(var n=this,r=new Array(1).fill(null),i=this.iterator(),o=i.next();i.hasNext();){var u=i.next(),f=n.findCollapseIndex(o,u,r);f&&t.add(new es(r[0])),o=u}};yr.prototype.getEdge=function(){return this._edge};yr.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)};yr.prototype.createSplitEdge=function(t,n){var r=this,i=n.segmentIndex-t.segmentIndex+2,o=this._edge.getCoordinate(n.segmentIndex),u=n.isInterior()||!n.coord.equals2D(o);u||i--;var f=new Array(i).fill(null),d=0;f[d++]=new it(t.coord);for(var _=t.segmentIndex+1;_<=n.segmentIndex;_++)f[d++]=r._edge.getCoordinate(_);return u&&(f[d]=new it(n.coord)),new Ln(f,this._edge.getData())};yr.prototype.add=function(t,n){var r=new No(this._edge,t,n,this._edge.getSegmentOctant(n)),i=this._nodeMap.get(r);return i!==null?(me.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(r,r),r)};yr.prototype.checkSplitEdgesCorrectness=function(t){var n=this._edge.getCoordinates(),r=t.get(0),i=r.getCoordinate(0);if(!i.equals2D(n[0]))throw new ro("bad split edge start point at "+i);var o=t.get(t.size()-1),u=o.getCoordinates(),f=u[u.length-1];if(!f.equals2D(n[n.length-1]))throw new ro("bad split edge end point at "+f)};yr.prototype.interfaces_=function(){return[]};yr.prototype.getClass=function(){return yr};var nu=function(){};nu.prototype.interfaces_=function(){return[]};nu.prototype.getClass=function(){return nu};nu.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];if(t===0&&n===0)throw new ln("Cannot compute the octant for point ( "+t+", "+n+" )");var r=Math.abs(t),i=Math.abs(n);return t>=0?n>=0?r>=i?0:1:r>=i?7:6:n>=0?r>=i?3:2:r>=i?4:5}else if(arguments[0]instanceof it&&arguments[1]instanceof it){var o=arguments[0],u=arguments[1],f=u.x-o.x,d=u.y-o.y;if(f===0&&d===0)throw new ln("Cannot compute the octant for two identical points "+o);return nu.octant(f,d)}};var Ms=function(){};Ms.prototype.getCoordinates=function(){};Ms.prototype.size=function(){};Ms.prototype.getCoordinate=function(t){};Ms.prototype.isClosed=function(){};Ms.prototype.setData=function(t){};Ms.prototype.getData=function(){};Ms.prototype.interfaces_=function(){return[]};Ms.prototype.getClass=function(){return Ms};var Zc=function(){};Zc.prototype.addIntersection=function(t,n){};Zc.prototype.interfaces_=function(){return[Ms]};Zc.prototype.getClass=function(){return Zc};var Ln=function(){this._nodeList=new yr(this),this._pts=null,this._data=null;var t=arguments[0],n=arguments[1];this._pts=t,this._data=n};Ln.prototype.getCoordinates=function(){return this._pts};Ln.prototype.size=function(){return this._pts.length};Ln.prototype.getCoordinate=function(t){return this._pts[t]};Ln.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};Ln.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))};Ln.prototype.setData=function(t){this._data=t};Ln.prototype.safeOctant=function(t,n){return t.equals2D(n)?0:nu.octant(t,n)};Ln.prototype.getData=function(){return this._data};Ln.prototype.addIntersection=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1];this.addIntersectionNode(t,n)}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[3],u=new it(r.getIntersection(o));this.addIntersection(u,i)}};Ln.prototype.toString=function(){return Ti.toLineString(new vn(this._pts))};Ln.prototype.getNodeList=function(){return this._nodeList};Ln.prototype.addIntersectionNode=function(t,n){var r=n,i=r+1;if(i<this._pts.length){var o=this._pts[i];t.equals2D(o)&&(r=i)}var u=this._nodeList.add(t,r);return u};Ln.prototype.addIntersections=function(t,n,r){for(var i=this,o=0;o<t.getIntersectionNum();o++)i.addIntersection(t,n,r,o)};Ln.prototype.interfaces_=function(){return[Zc]};Ln.prototype.getClass=function(){return Ln};Ln.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],n=new Ot;return Ln.getNodedSubstrings(t,n),n}else if(arguments.length===2)for(var r=arguments[0],i=arguments[1],o=r.iterator();o.hasNext();){var u=o.next();u.getNodeList().addSplitEdges(i)}};var Qt=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new it,this.p1=new it;else if(arguments.length===1){var t=arguments[0];this.p0=new it(t.p0),this.p1=new it(t.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this.p0=new it(n,r),this.p1=new it(i,o)}},Lv={serialVersionUID:{configurable:!0}};Qt.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)};Qt.prototype.orientationIndex=function(){if(arguments[0]instanceof Qt){var t=arguments[0],n=Gt.orientationIndex(this.p0,this.p1,t.p0),r=Gt.orientationIndex(this.p0,this.p1,t.p1);return n>=0&&r>=0||n<=0&&r<=0?Math.max(n,r):0}else if(arguments[0]instanceof it){var i=arguments[0];return Gt.orientationIndex(this.p0,this.p1,i)}};Qt.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])};Qt.prototype.isVertical=function(){return this.p0.x===this.p1.x};Qt.prototype.equals=function(t){if(!(t instanceof Qt))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)};Qt.prototype.intersection=function(t){var n=new ba;return n.computeIntersection(this.p0,this.p1,t.p0,t.p1),n.hasIntersection()?n.getIntersection(0):null};Qt.prototype.project=function(){if(arguments[0]instanceof it){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new it(t);var n=this.projectionFactor(t),r=new it;return r.x=this.p0.x+n*(this.p1.x-this.p0.x),r.y=this.p0.y+n*(this.p1.y-this.p0.y),r}else if(arguments[0]instanceof Qt){var i=arguments[0],o=this.projectionFactor(i.p0),u=this.projectionFactor(i.p1);if(o>=1&&u>=1||o<=0&&u<=0)return null;var f=this.project(i.p0);o<0&&(f=this.p0),o>1&&(f=this.p1);var d=this.project(i.p1);return u<0&&(d=this.p0),u>1&&(d=this.p1),new Qt(f,d)}};Qt.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()};Qt.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)};Qt.prototype.getCoordinate=function(t){return t===0?this.p0:this.p1};Qt.prototype.distancePerpendicular=function(t){return Gt.distancePointLinePerpendicular(t,this.p0,this.p1)};Qt.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)};Qt.prototype.midPoint=function(){return Qt.midPoint(this.p0,this.p1)};Qt.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var n=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,i=n*n+r*r;if(i<=0)return ue.NaN;var o=((t.x-this.p0.x)*n+(t.y-this.p0.y)*r)/i;return o};Qt.prototype.closestPoints=function(t){var n=this.intersection(t);if(n!==null)return[n,n];var r=new Array(2).fill(null),i=ue.MAX_VALUE,o=null,u=this.closestPoint(t.p0);i=u.distance(t.p0),r[0]=u,r[1]=t.p0;var f=this.closestPoint(t.p1);o=f.distance(t.p1),o<i&&(i=o,r[0]=f,r[1]=t.p1);var d=t.closestPoint(this.p0);o=d.distance(this.p0),o<i&&(i=o,r[0]=this.p0,r[1]=d);var _=t.closestPoint(this.p1);return o=_.distance(this.p1),o<i&&(i=o,r[0]=this.p1,r[1]=_),r};Qt.prototype.closestPoint=function(t){var n=this.projectionFactor(t);if(n>0&&n<1)return this.project(t);var r=this.p0.distance(t),i=this.p1.distance(t);return r<i?this.p0:this.p1};Qt.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)};Qt.prototype.getLength=function(){return this.p0.distance(this.p1)};Qt.prototype.compareTo=function(t){var n=t,r=this.p0.compareTo(n.p0);return r!==0?r:this.p1.compareTo(n.p1)};Qt.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t};Qt.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)};Qt.prototype.lineIntersection=function(t){try{var n=Pi.intersection(this.p0,this.p1,t.p0,t.p1);return n}catch(r){if(!(r instanceof Tl))throw r}finally{}return null};Qt.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)};Qt.prototype.pointAlongOffset=function(t,n){var r=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),o=this.p1.x-this.p0.x,u=this.p1.y-this.p0.y,f=Math.sqrt(o*o+u*u),d=0,_=0;if(n!==0){if(f<=0)throw new Error("Cannot compute offset from zero-length line segment");d=n*o/f,_=n*u/f}var y=r-_,E=i+d,S=new it(y,E);return S};Qt.prototype.setCoordinates=function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.p0.x=n.x,this.p0.y=n.y,this.p1.x=r.x,this.p1.y=r.y}};Qt.prototype.segmentFraction=function(t){var n=this.projectionFactor(t);return n<0?n=0:(n>1||ue.isNaN(n))&&(n=1),n};Qt.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"};Qt.prototype.isHorizontal=function(){return this.p0.y===this.p1.y};Qt.prototype.distance=function(){if(arguments[0]instanceof Qt){var t=arguments[0];return Gt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}else if(arguments[0]instanceof it){var n=arguments[0];return Gt.distancePointLine(n,this.p0,this.p1)}};Qt.prototype.pointAlong=function(t){var n=new it;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n};Qt.prototype.hashCode=function(){var t=ue.doubleToLongBits(this.p0.x);t^=ue.doubleToLongBits(this.p0.y)*31;var n=Math.trunc(t)^Math.trunc(t>>32),r=ue.doubleToLongBits(this.p1.x);r^=ue.doubleToLongBits(this.p1.y)*31;var i=Math.trunc(r)^Math.trunc(r>>32);return n^i};Qt.prototype.interfaces_=function(){return[vi,Ci]};Qt.prototype.getClass=function(){return Qt};Qt.midPoint=function(t,n){return new it((t.x+n.x)/2,(t.y+n.y)/2)};Lv.serialVersionUID.get=function(){return 0x2d2172135f411c00};Object.defineProperties(Qt,Lv);var Kc=function(){this.tempEnv1=new Jt,this.tempEnv2=new Jt,this._overlapSeg1=new Qt,this._overlapSeg2=new Qt};Kc.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];t.getLineSegment(n,this._overlapSeg1),r.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}};Kc.prototype.interfaces_=function(){return[]};Kc.prototype.getClass=function(){return Kc};var Hr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this._pts=t,this._start=n,this._end=r,this._context=i};Hr.prototype.getLineSegment=function(t,n){n.p0=this._pts[t],n.p1=this._pts[t+1]};Hr.prototype.computeSelect=function(t,n,r,i){var o=this._pts[n],u=this._pts[r];if(i.tempEnv1.init(o,u),r-n===1)return i.select(this,n),null;if(!t.intersects(i.tempEnv1))return null;var f=Math.trunc((n+r)/2);n<f&&this.computeSelect(t,n,f,i),f<r&&this.computeSelect(t,f,r,i)};Hr.prototype.getCoordinates=function(){for(var t=this,n=new Array(this._end-this._start+1).fill(null),r=0,i=this._start;i<=this._end;i++)n[r++]=t._pts[i];return n};Hr.prototype.computeOverlaps=function(t,n){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,n)};Hr.prototype.setId=function(t){this._id=t};Hr.prototype.select=function(t,n){this.computeSelect(t,this._start,this._end,n)};Hr.prototype.getEnvelope=function(){if(this._env===null){var t=this._pts[this._start],n=this._pts[this._end];this._env=new Jt(t,n)}return this._env};Hr.prototype.getEndIndex=function(){return this._end};Hr.prototype.getStartIndex=function(){return this._start};Hr.prototype.getContext=function(){return this._context};Hr.prototype.getId=function(){return this._id};Hr.prototype.computeOverlapsInternal=function(t,n,r,i,o,u){var f=this._pts[t],d=this._pts[n],_=r._pts[i],y=r._pts[o];if(n-t===1&&o-i===1)return u.overlap(this,t,r,i),null;if(u.tempEnv1.init(f,d),u.tempEnv2.init(_,y),!u.tempEnv1.intersects(u.tempEnv2))return null;var E=Math.trunc((t+n)/2),S=Math.trunc((i+o)/2);t<E&&(i<S&&this.computeOverlapsInternal(t,E,r,i,S,u),S<o&&this.computeOverlapsInternal(t,E,r,S,o,u)),E<n&&(i<S&&this.computeOverlapsInternal(E,n,r,i,S,u),S<o&&this.computeOverlapsInternal(E,n,r,S,o,u))};Hr.prototype.interfaces_=function(){return[]};Hr.prototype.getClass=function(){return Hr};var ts=function(){};ts.prototype.interfaces_=function(){return[]};ts.prototype.getClass=function(){return ts};ts.getChainStartIndices=function(t){var n=0,r=new Ot;r.add(new es(n));do{var i=ts.findChainEnd(t,n);r.add(new es(i)),n=i}while(n<t.length-1);var o=ts.toIntArray(r);return o};ts.findChainEnd=function(t,n){for(var r=n;r<t.length-1&&t[r].equals2D(t[r+1]);)r++;if(r>=t.length-1)return t.length-1;for(var i=Ke.quadrant(t[r],t[r+1]),o=n+1;o<t.length;){if(!t[o-1].equals2D(t[o])){var u=Ke.quadrant(t[o-1],t[o]);if(u!==i)break}o++}return o-1};ts.getChains=function(){if(arguments.length===1){var t=arguments[0];return ts.getChains(t,null)}else if(arguments.length===2){for(var n=arguments[0],r=arguments[1],i=new Ot,o=ts.getChainStartIndices(n),u=0;u<o.length-1;u++){var f=new Hr(n,o[u],o[u+1],r);i.add(f)}return i}};ts.toIntArray=function(t){for(var n=new Array(t.size()).fill(null),r=0;r<n.length;r++)n[r]=t.get(r).intValue();return n};var da=function(){};da.prototype.computeNodes=function(t){};da.prototype.getNodedSubstrings=function(){};da.prototype.interfaces_=function(){return[]};da.prototype.getClass=function(){return da};var Xc=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}};Xc.prototype.setSegmentIntersector=function(t){this._segInt=t};Xc.prototype.interfaces_=function(){return[da]};Xc.prototype.getClass=function(){return Xc};var $g=function(e){function t(r){r?e.call(this,r):e.call(this),this._monoChains=new Ot,this._index=new Ev,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={SegmentOverlapAction:{configurable:!0}};return t.prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Ln.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(i){for(var o=this,u=ts.getChains(i.getCoordinates(),i),f=u.iterator();f.hasNext();){var d=f.next();d.setId(o._idCounter++),o._index.insert(d.getEnvelope(),d),o._monoChains.add(d)}},t.prototype.computeNodes=function(i){var o=this;this._nodedSegStrings=i;for(var u=i.iterator();u.hasNext();)o.add(u.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var i=this,o=new F_(this._segInt),u=this._monoChains.iterator();u.hasNext();)for(var f=u.next(),d=i._index.query(f.getEnvelope()),_=d.iterator();_.hasNext();){var y=_.next();if(y.getId()>f.getId()&&(f.computeOverlaps(y,o),i._nOverlaps++),i._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return F_},Object.defineProperties(t,n),t}(Xc),F_=function(e){function t(){e.call(this),this._si=null;var n=arguments[0];this._si=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.overlap=function(){if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3],f=r.getContext(),d=o.getContext();this._si.processIntersections(f,i,d,u)}else return e.prototype.overlap.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Kc),Re=function e(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(arguments.length===4){var i=arguments[0],o=arguments[1],u=arguments[2],f=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(u),this.setMitreLimit(f)}}},co={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Re.prototype.getEndCapStyle=function(){return this._endCapStyle};Re.prototype.isSingleSided=function(){return this._isSingleSided};Re.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,this._quadrantSegments===0&&(this._joinStyle=Re.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Re.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Re.JOIN_ROUND&&(this._quadrantSegments=Re.DEFAULT_QUADRANT_SEGMENTS)};Re.prototype.getJoinStyle=function(){return this._joinStyle};Re.prototype.setJoinStyle=function(t){this._joinStyle=t};Re.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t};Re.prototype.getSimplifyFactor=function(){return this._simplifyFactor};Re.prototype.getQuadrantSegments=function(){return this._quadrantSegments};Re.prototype.setEndCapStyle=function(t){this._endCapStyle=t};Re.prototype.getMitreLimit=function(){return this._mitreLimit};Re.prototype.setMitreLimit=function(t){this._mitreLimit=t};Re.prototype.setSingleSided=function(t){this._isSingleSided=t};Re.prototype.interfaces_=function(){return[]};Re.prototype.getClass=function(){return Re};Re.bufferDistanceError=function(t){var n=Math.PI/2/t;return 1-Math.cos(n/2)};co.CAP_ROUND.get=function(){return 1};co.CAP_FLAT.get=function(){return 2};co.CAP_SQUARE.get=function(){return 3};co.JOIN_ROUND.get=function(){return 1};co.JOIN_MITRE.get=function(){return 2};co.JOIN_BEVEL.get=function(){return 3};co.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8};co.DEFAULT_MITRE_LIMIT.get=function(){return 5};co.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01};Object.defineProperties(Re,co);var yn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Gt.COUNTERCLOCKWISE,this._inputLine=t||null},ch={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};yn.prototype.isDeletable=function(t,n,r,i){var o=this._inputLine[t],u=this._inputLine[n],f=this._inputLine[r];return!this.isConcave(o,u,f)||!this.isShallow(o,u,f,i)?!1:this.isShallowSampled(o,u,t,r,i)};yn.prototype.deleteShallowConcavities=function(){for(var t=this,n=1,r=this.findNextNonDeletedIndex(n),i=this.findNextNonDeletedIndex(r),o=!1;i<this._inputLine.length;){var u=!1;t.isDeletable(n,r,i,t._distanceTol)&&(t._isDeleted[r]=yn.DELETE,u=!0,o=!0),u?n=i:n=r,r=t.findNextNonDeletedIndex(n),i=t.findNextNonDeletedIndex(r)}return o};yn.prototype.isShallowConcavity=function(t,n,r,i){var o=Gt.computeOrientation(t,n,r),u=o===this._angleOrientation;if(!u)return!1;var f=Gt.distancePointLine(n,t,r);return f<i};yn.prototype.isShallowSampled=function(t,n,r,i,o){var u=this,f=Math.trunc((i-r)/yn.NUM_PTS_TO_CHECK);f<=0&&(f=1);for(var d=r;d<i;d+=f)if(!u.isShallow(t,n,u._inputLine[d],o))return!1;return!0};yn.prototype.isConcave=function(t,n,r){var i=Gt.computeOrientation(t,n,r),o=i===this._angleOrientation;return o};yn.prototype.simplify=function(t){var n=this;this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Gt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var r=!1;do r=n.deleteShallowConcavities();while(r);return this.collapseLine()};yn.prototype.findNextNonDeletedIndex=function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===yn.DELETE;)n++;return n};yn.prototype.isShallow=function(t,n,r,i){var o=Gt.distancePointLine(n,t,r);return o<i};yn.prototype.collapseLine=function(){for(var t=this,n=new ah,r=0;r<this._inputLine.length;r++)t._isDeleted[r]!==yn.DELETE&&n.add(t._inputLine[r]);return n.toCoordinateArray()};yn.prototype.interfaces_=function(){return[]};yn.prototype.getClass=function(){return yn};yn.simplify=function(t,n){var r=new yn(t);return r.simplify(n)};ch.INIT.get=function(){return 0};ch.DELETE.get=function(){return 1};ch.KEEP.get=function(){return 1};ch.NUM_PTS_TO_CHECK.get=function(){return 10};Object.defineProperties(yn,ch);var oi=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ot},xv={COORDINATE_ARRAY_TYPE:{configurable:!0}};oi.prototype.getCoordinates=function(){var t=this._ptList.toArray(oi.COORDINATE_ARRAY_TYPE);return t};oi.prototype.setPrecisionModel=function(t){this._precisionModel=t};oi.prototype.addPt=function(t){var n=new it(t);if(this._precisionModel.makePrecise(n),this.isRedundant(n))return null;this._ptList.add(n)};oi.prototype.revere=function(){};oi.prototype.addPts=function(t,n){var r=this;if(n)for(var i=0;i<t.length;i++)r.addPt(t[i]);else for(var o=t.length-1;o>=0;o--)r.addPt(t[o])};oi.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var n=this._ptList.get(this._ptList.size()-1),r=t.distance(n);return r<this._minimimVertexDistance};oi.prototype.toString=function(){var t=new Ee,n=t.createLineString(this.getCoordinates());return n.toString()};oi.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new it(this._ptList.get(0)),n=this._ptList.get(this._ptList.size()-1);if(t.equals(n))return null;this._ptList.add(t)};oi.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t};oi.prototype.interfaces_=function(){return[]};oi.prototype.getClass=function(){return oi};xv.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)};Object.defineProperties(oi,xv);var Pe=function(){},_u={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Pe.prototype.interfaces_=function(){return[]};Pe.prototype.getClass=function(){return Pe};Pe.toDegrees=function(t){return t*180/Math.PI};Pe.normalize=function(t){for(;t>Math.PI;)t-=Pe.PI_TIMES_2;for(;t<=-Math.PI;)t+=Pe.PI_TIMES_2;return t};Pe.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=r.x-n.x,o=r.y-n.y;return Math.atan2(o,i)}};Pe.isAcute=function(t,n,r){var i=t.x-n.x,o=t.y-n.y,u=r.x-n.x,f=r.y-n.y,d=i*u+o*f;return d>0};Pe.isObtuse=function(t,n,r){var i=t.x-n.x,o=t.y-n.y,u=r.x-n.x,f=r.y-n.y,d=i*u+o*f;return d<0};Pe.interiorAngle=function(t,n,r){var i=Pe.angle(n,t),o=Pe.angle(n,r);return Math.abs(o-i)};Pe.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Pe.PI_TIMES_2;t>=Pe.PI_TIMES_2&&(t=0)}else{for(;t>=Pe.PI_TIMES_2;)t-=Pe.PI_TIMES_2;t<0&&(t=0)}return t};Pe.angleBetween=function(t,n,r){var i=Pe.angle(n,t),o=Pe.angle(n,r);return Pe.diff(i,o)};Pe.diff=function(t,n){var r=null;return t<n?r=n-t:r=t-n,r>Math.PI&&(r=2*Math.PI-r),r};Pe.toRadians=function(t){return t*Math.PI/180};Pe.getTurn=function(t,n){var r=Math.sin(n-t);return r>0?Pe.COUNTERCLOCKWISE:r<0?Pe.CLOCKWISE:Pe.NONE};Pe.angleBetweenOriented=function(t,n,r){var i=Pe.angle(n,t),o=Pe.angle(n,r),u=o-i;return u<=-Math.PI?u+Pe.PI_TIMES_2:u>Math.PI?u-Pe.PI_TIMES_2:u};_u.PI_TIMES_2.get=function(){return 2*Math.PI};_u.PI_OVER_2.get=function(){return Math.PI/2};_u.PI_OVER_4.get=function(){return Math.PI/4};_u.COUNTERCLOCKWISE.get=function(){return Gt.COUNTERCLOCKWISE};_u.CLOCKWISE.get=function(){return Gt.CLOCKWISE};_u.NONE.get=function(){return Gt.COLLINEAR};Object.defineProperties(Pe,_u);var sn=function e(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Qt,this._seg1=new Qt,this._offset0=new Qt,this._offset1=new Qt,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new ba,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Re.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},hh={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};sn.prototype.addNextSegment=function(t,n){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var r=Gt.computeOrientation(this._s0,this._s1,this._s2),i=r===Gt.CLOCKWISE&&this._side===At.LEFT||r===Gt.COUNTERCLOCKWISE&&this._side===At.RIGHT;r===0?this.addCollinear(n):i?this.addOutsideTurn(r,n):this.addInsideTurn(r,n)};sn.prototype.addLineEndCap=function(t,n){var r=new Qt(t,n),i=new Qt;this.computeOffsetSegment(r,At.LEFT,this._distance,i);var o=new Qt;this.computeOffsetSegment(r,At.RIGHT,this._distance,o);var u=n.x-t.x,f=n.y-t.y,d=Math.atan2(f,u);switch(this._bufParams.getEndCapStyle()){case Re.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(n,d+Math.PI/2,d-Math.PI/2,Gt.CLOCKWISE,this._distance),this._segList.addPt(o.p1);break;case Re.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(o.p1);break;case Re.CAP_SQUARE:var _=new it;_.x=Math.abs(this._distance)*Math.cos(d),_.y=Math.abs(this._distance)*Math.sin(d);var y=new it(i.p1.x+_.x,i.p1.y+_.y),E=new it(o.p1.x+_.x,o.p1.y+_.y);this._segList.addPt(y),this._segList.addPt(E);break}};sn.prototype.getCoordinates=function(){var t=this._segList.getCoordinates();return t};sn.prototype.addMitreJoin=function(t,n,r,i){var o=!0,u=null;try{u=Pi.intersection(n.p0,n.p1,r.p0,r.p1);var f=i<=0?1:u.distance(t)/Math.abs(i);f>this._bufParams.getMitreLimit()&&(o=!1)}catch(d){if(d instanceof Tl)u=new it(0,0),o=!1;else throw d}finally{}o?this._segList.addPt(u):this.addLimitedMitreJoin(n,r,i,this._bufParams.getMitreLimit())};sn.prototype.addFilletCorner=function(t,n,r,i,o){var u=n.x-t.x,f=n.y-t.y,d=Math.atan2(f,u),_=r.x-t.x,y=r.y-t.y,E=Math.atan2(y,_);i===Gt.CLOCKWISE?d<=E&&(d+=2*Math.PI):d>=E&&(d-=2*Math.PI),this._segList.addPt(n),this.addFilletArc(t,d,E,i,o),this._segList.addPt(r)};sn.prototype.addOutsideTurn=function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*sn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Re.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Re.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))};sn.prototype.createSquare=function(t){this._segList.addPt(new it(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new it(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new it(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new it(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()};sn.prototype.addSegments=function(t,n){this._segList.addPts(t,n)};sn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)};sn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)};sn.prototype.initSideSegments=function(t,n,r){this._s1=t,this._s2=n,this._side=r,this._seg1.setCoordinates(t,n),this.computeOffsetSegment(this._seg1,r,this._distance,this._offset1)};sn.prototype.addLimitedMitreJoin=function(t,n,r,i){var o=this._seg0.p1,u=Pe.angle(o,this._seg0.p0),f=Pe.angleBetweenOriented(this._seg0.p0,o,this._seg1.p1),d=f/2,_=Pe.normalize(u+d),y=Pe.normalize(_+Math.PI),E=i*r,S=E*Math.abs(Math.sin(d)),T=r-S,I=o.x+E*Math.cos(y),z=o.y+E*Math.sin(y),G=new it(I,z),Q=new Qt(o,G),$=Q.pointAlongOffset(1,T),rt=Q.pointAlongOffset(1,-T);this._side===At.LEFT?(this._segList.addPt($),this._segList.addPt(rt)):(this._segList.addPt(rt),this._segList.addPt($))};sn.prototype.computeOffsetSegment=function(t,n,r,i){var o=n===At.LEFT?1:-1,u=t.p1.x-t.p0.x,f=t.p1.y-t.p0.y,d=Math.sqrt(u*u+f*f),_=o*r*u/d,y=o*r*f/d;i.p0.x=t.p0.x-y,i.p0.y=t.p0.y+_,i.p1.x=t.p1.x-y,i.p1.y=t.p1.y+_};sn.prototype.addFilletArc=function(t,n,r,i,o){var u=this,f=i===Gt.CLOCKWISE?-1:1,d=Math.abs(n-r),_=Math.trunc(d/this._filletAngleQuantum+.5);if(_<1)return null;for(var y=0,E=d/_,S=y,T=new it;S<d;){var I=n+f*S;T.x=t.x+o*Math.cos(I),T.y=t.y+o*Math.sin(I),u._segList.addPt(T),S+=E}};sn.prototype.addInsideTurn=function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*sn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new it((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var i=new it((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}};sn.prototype.createCircle=function(t){var n=new it(t.x+this._distance,t.y);this._segList.addPt(n),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()};sn.prototype.addBevelJoin=function(t,n){this._segList.addPt(t.p1),this._segList.addPt(n.p0)};sn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new oi,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*sn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)};sn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var n=this._li.getIntersectionNum();n>=2&&(this._bufParams.getJoinStyle()===Re.JOIN_BEVEL||this._bufParams.getJoinStyle()===Re.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Gt.CLOCKWISE,this._distance))};sn.prototype.closeRing=function(){this._segList.closeRing()};sn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle};sn.prototype.interfaces_=function(){return[]};sn.prototype.getClass=function(){return sn};hh.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001};hh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001};hh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6};hh.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80};Object.defineProperties(sn,hh);var Mr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],n=arguments[1];this._precisionModel=t,this._bufParams=n};Mr.prototype.getOffsetCurve=function(t,n){if(this._distance=n,n===0)return null;var r=n<0,i=Math.abs(n),o=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],o):this.computeOffsetCurve(t,r,o);var u=o.getCoordinates();return r&&Le.reverse(u),u};Mr.prototype.computeSingleSidedBufferCurve=function(t,n,r){var i=this.simplifyTolerance(this._distance);if(n){r.addSegments(t,!0);var o=yn.simplify(t,-i),u=o.length-1;r.initSideSegments(o[u],o[u-1],At.LEFT),r.addFirstSegment();for(var f=u-2;f>=0;f--)r.addNextSegment(o[f],!0)}else{r.addSegments(t,!1);var d=yn.simplify(t,i),_=d.length-1;r.initSideSegments(d[0],d[1],At.LEFT),r.addFirstSegment();for(var y=2;y<=_;y++)r.addNextSegment(d[y],!0)}r.addLastSegment(),r.closeRing()};Mr.prototype.computeRingBufferCurve=function(t,n,r){var i=this.simplifyTolerance(this._distance);n===At.RIGHT&&(i=-i);var o=yn.simplify(t,i),u=o.length-1;r.initSideSegments(o[u-1],o[0],n);for(var f=1;f<=u;f++){var d=f!==1;r.addNextSegment(o[f],d)}r.closeRing()};Mr.prototype.computeLineBufferCurve=function(t,n){var r=this.simplifyTolerance(this._distance),i=yn.simplify(t,r),o=i.length-1;n.initSideSegments(i[0],i[1],At.LEFT);for(var u=2;u<=o;u++)n.addNextSegment(i[u],!0);n.addLastSegment(),n.addLineEndCap(i[o-1],i[o]);var f=yn.simplify(t,-r),d=f.length-1;n.initSideSegments(f[d],f[d-1],At.LEFT);for(var _=d-2;_>=0;_--)n.addNextSegment(f[_],!0);n.addLastSegment(),n.addLineEndCap(f[1],f[0]),n.closeRing()};Mr.prototype.computePointCurve=function(t,n){switch(this._bufParams.getEndCapStyle()){case Re.CAP_ROUND:n.createCircle(t);break;case Re.CAP_SQUARE:n.createSquare(t);break}};Mr.prototype.getLineCurve=function(t,n){if(this._distance=n,n<0&&!this._bufParams.isSingleSided()||n===0)return null;var r=Math.abs(n),i=this.getSegGen(r);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var o=n<0;this.computeSingleSidedBufferCurve(t,o,i)}else this.computeLineBufferCurve(t,i);var u=i.getCoordinates();return u};Mr.prototype.getBufferParameters=function(){return this._bufParams};Mr.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()};Mr.prototype.getRingCurve=function(t,n,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(r===0)return Mr.copyCoordinates(t);var i=this.getSegGen(r);return this.computeRingBufferCurve(t,n,i),i.getCoordinates()};Mr.prototype.computeOffsetCurve=function(t,n,r){var i=this.simplifyTolerance(this._distance);if(n){var o=yn.simplify(t,-i),u=o.length-1;r.initSideSegments(o[u],o[u-1],At.LEFT),r.addFirstSegment();for(var f=u-2;f>=0;f--)r.addNextSegment(o[f],!0)}else{var d=yn.simplify(t,i),_=d.length-1;r.initSideSegments(d[0],d[1],At.LEFT),r.addFirstSegment();for(var y=2;y<=_;y++)r.addNextSegment(d[y],!0)}r.addLastSegment()};Mr.prototype.getSegGen=function(t){return new sn(this._precisionModel,this._bufParams,t)};Mr.prototype.interfaces_=function(){return[]};Mr.prototype.getClass=function(){return Mr};Mr.copyCoordinates=function(t){for(var n=new Array(t.length).fill(null),r=0;r<n.length;r++)n[r]=new it(t[r]);return n};var ru=function(){this._subgraphs=null,this._seg=new Qt,this._cga=new Gt;var t=arguments[0];this._subgraphs=t},bv={DepthSegment:{configurable:!0}};ru.prototype.findStabbedSegments=function(){var t=this;if(arguments.length===1){for(var n=arguments[0],r=new Ot,i=this._subgraphs.iterator();i.hasNext();){var o=i.next(),u=o.getEnvelope();n.y<u.getMinY()||n.y>u.getMaxY()||t.findStabbedSegments(n,o.getDirectedEdges(),r)}return r}else if(arguments.length===3){if(se(arguments[2],Ii)&&arguments[0]instanceof it&&arguments[1]instanceof mg)for(var f=arguments[0],d=arguments[1],_=arguments[2],y=d.getEdge().getCoordinates(),E=0;E<y.length-1;E++){t._seg.p0=y[E],t._seg.p1=y[E+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var S=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(S<f.x)&&!t._seg.isHorizontal()&&!(f.y<t._seg.p0.y||f.y>t._seg.p1.y)&&Gt.computeOrientation(t._seg.p0,t._seg.p1,f)!==Gt.RIGHT){var T=d.getDepth(At.LEFT);t._seg.p0.equals(y[E])||(T=d.getDepth(At.RIGHT));var I=new ga(t._seg,T);_.add(I)}}else if(se(arguments[2],Ii)&&arguments[0]instanceof it&&se(arguments[1],Ii))for(var z=arguments[0],G=arguments[1],Q=arguments[2],$=G.iterator();$.hasNext();){var rt=$.next();rt.isForward()&&t.findStabbedSegments(z,rt,Q)}}};ru.prototype.getDepth=function(t){var n=this.findStabbedSegments(t);if(n.size()===0)return 0;var r=ki.min(n);return r._leftDepth};ru.prototype.interfaces_=function(){return[]};ru.prototype.getClass=function(){return ru};bv.DepthSegment.get=function(){return ga};Object.defineProperties(ru,bv);var ga=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],n=arguments[1];this._upwardSeg=new Qt(t),this._leftDepth=n};ga.prototype.compareTo=function(t){var n=t;if(this._upwardSeg.minX()>=n._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=n._upwardSeg.minX())return-1;var r=this._upwardSeg.orientationIndex(n._upwardSeg);return r!==0||(r=-1*n._upwardSeg.orientationIndex(this._upwardSeg),r!==0)?r:this._upwardSeg.compareTo(n._upwardSeg)};ga.prototype.compareX=function(t,n){var r=t.p0.compareTo(n.p0);return r!==0?r:t.p1.compareTo(n.p1)};ga.prototype.toString=function(){return this._upwardSeg.toString()};ga.prototype.interfaces_=function(){return[vi]};ga.prototype.getClass=function(){return ga};var Be=function(t,n,r){this.p0=t||null,this.p1=n||null,this.p2=r||null};Be.prototype.area=function(){return Be.area(this.p0,this.p1,this.p2)};Be.prototype.signedArea=function(){return Be.signedArea(this.p0,this.p1,this.p2)};Be.prototype.interpolateZ=function(t){if(t===null)throw new ln("Supplied point is null.");return Be.interpolateZ(t,this.p0,this.p1,this.p2)};Be.prototype.longestSideLength=function(){return Be.longestSideLength(this.p0,this.p1,this.p2)};Be.prototype.isAcute=function(){return Be.isAcute(this.p0,this.p1,this.p2)};Be.prototype.circumcentre=function(){return Be.circumcentre(this.p0,this.p1,this.p2)};Be.prototype.area3D=function(){return Be.area3D(this.p0,this.p1,this.p2)};Be.prototype.centroid=function(){return Be.centroid(this.p0,this.p1,this.p2)};Be.prototype.inCentre=function(){return Be.inCentre(this.p0,this.p1,this.p2)};Be.prototype.interfaces_=function(){return[]};Be.prototype.getClass=function(){return Be};Be.area=function(t,n,r){return Math.abs(((r.x-t.x)*(n.y-t.y)-(n.x-t.x)*(r.y-t.y))/2)};Be.signedArea=function(t,n,r){return((r.x-t.x)*(n.y-t.y)-(n.x-t.x)*(r.y-t.y))/2};Be.det=function(t,n,r,i){return t*i-n*r};Be.interpolateZ=function(t,n,r,i){var o=n.x,u=n.y,f=r.x-o,d=i.x-o,_=r.y-u,y=i.y-u,E=f*y-d*_,S=t.x-o,T=t.y-u,I=(y*S-d*T)/E,z=(-_*S+f*T)/E,G=n.z+I*(r.z-n.z)+z*(i.z-n.z);return G};Be.longestSideLength=function(t,n,r){var i=t.distance(n),o=n.distance(r),u=r.distance(t),f=i;return o>f&&(f=o),u>f&&(f=u),f};Be.isAcute=function(t,n,r){return!(!Pe.isAcute(t,n,r)||!Pe.isAcute(n,r,t)||!Pe.isAcute(r,t,n))};Be.circumcentre=function(t,n,r){var i=r.x,o=r.y,u=t.x-i,f=t.y-o,d=n.x-i,_=n.y-o,y=2*Be.det(u,f,d,_),E=Be.det(f,u*u+f*f,_,d*d+_*_),S=Be.det(u,u*u+f*f,d,d*d+_*_),T=i-E/y,I=o+S/y;return new it(T,I)};Be.perpendicularBisector=function(t,n){var r=n.x-t.x,i=n.y-t.y,o=new Pi(t.x+r/2,t.y+i/2,1),u=new Pi(t.x-i+r/2,t.y+r+i/2,1);return new Pi(o,u)};Be.angleBisector=function(t,n,r){var i=n.distance(t),o=n.distance(r),u=i/(i+o),f=r.x-t.x,d=r.y-t.y,_=new it(t.x+u*f,t.y+u*d);return _};Be.area3D=function(t,n,r){var i=n.x-t.x,o=n.y-t.y,u=n.z-t.z,f=r.x-t.x,d=r.y-t.y,_=r.z-t.z,y=o*_-u*d,E=u*f-i*_,S=i*d-o*f,T=y*y+E*E+S*S,I=Math.sqrt(T)/2;return I};Be.centroid=function(t,n,r){var i=(t.x+n.x+r.x)/3,o=(t.y+n.y+r.y)/3;return new it(i,o)};Be.inCentre=function(t,n,r){var i=n.distance(r),o=t.distance(r),u=t.distance(n),f=i+o+u,d=(i*t.x+o*n.x+u*r.x)/f,_=(i*t.y+o*n.y+u*r.y)/f;return new it(d,_)};var yi=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ot;var t=arguments[0],n=arguments[1],r=arguments[2];this._inputGeom=t,this._distance=n,this._curveBuilder=r};yi.prototype.addPoint=function(t){if(this._distance<=0)return null;var n=t.getCoordinates(),r=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(r,lt.EXTERIOR,lt.INTERIOR)};yi.prototype.addPolygon=function(t){var n=this,r=this._distance,i=At.LEFT;this._distance<0&&(r=-this._distance,i=At.RIGHT);var o=t.getExteriorRing(),u=Le.removeRepeatedPoints(o.getCoordinates());if(this._distance<0&&this.isErodedCompletely(o,this._distance)||this._distance<=0&&u.length<3)return null;this.addPolygonRing(u,r,i,lt.EXTERIOR,lt.INTERIOR);for(var f=0;f<t.getNumInteriorRing();f++){var d=t.getInteriorRingN(f),_=Le.removeRepeatedPoints(d.getCoordinates());n._distance>0&&n.isErodedCompletely(d,-n._distance)||n.addPolygonRing(_,r,At.opposite(i),lt.INTERIOR,lt.EXTERIOR)}};yi.prototype.isTriangleErodedCompletely=function(t,n){var r=new Be(t[0],t[1],t[2]),i=r.inCentre(),o=Gt.distancePointLine(i,r.p0,r.p1);return o<Math.abs(n)};yi.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var n=Le.removeRepeatedPoints(t.getCoordinates()),r=this._curveBuilder.getLineCurve(n,this._distance);this.addCurve(r,lt.EXTERIOR,lt.INTERIOR)};yi.prototype.addCurve=function(t,n,r){if(t===null||t.length<2)return null;var i=new Ln(t,new Ve(0,lt.BOUNDARY,n,r));this._curveList.add(i)};yi.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList};yi.prototype.addPolygonRing=function(t,n,r,i,o){if(n===0&&t.length<ws.MINIMUM_VALID_SIZE)return null;var u=i,f=o;t.length>=ws.MINIMUM_VALID_SIZE&&Gt.isCCW(t)&&(u=o,f=i,r=At.opposite(r));var d=this._curveBuilder.getRingCurve(t,r,n);this.addCurve(d,u,f)};yi.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Rn?this.addPolygon(t):t instanceof mn?this.addLineString(t):t instanceof jr?this.addPoint(t):t instanceof pl?this.addCollection(t):t instanceof pa?this.addCollection(t):t instanceof Es?this.addCollection(t):t instanceof mr&&this.addCollection(t)};yi.prototype.isErodedCompletely=function(t,n){var r=t.getCoordinates();if(r.length<4)return n<0;if(r.length===4)return this.isTriangleErodedCompletely(r,n);var i=t.getEnvelopeInternal(),o=Math.min(i.getHeight(),i.getWidth());return n<0&&2*Math.abs(n)>o};yi.prototype.addCollection=function(t){for(var n=this,r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);n.add(i)}};yi.prototype.interfaces_=function(){return[]};yi.prototype.getClass=function(){return yi};var _l=function(){};_l.prototype.locate=function(t){};_l.prototype.interfaces_=function(){return[]};_l.prototype.getClass=function(){return _l};var Ls=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Ls.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ls.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Dl;var t=this._parent.getGeometryN(this._index++);return t instanceof mr?(this._subcollectionIterator=new Ls(t),this._subcollectionIterator.next()):t};Ls.prototype.remove=function(){throw new Error(this.getClass().getName())};Ls.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)};Ls.prototype.interfaces_=function(){return[Al]};Ls.prototype.getClass=function(){return Ls};Ls.isAtomic=function(t){return!(t instanceof mr)};var ri=function(){this._geom=null;var t=arguments[0];this._geom=t};ri.prototype.locate=function(t){return ri.locate(t,this._geom)};ri.prototype.interfaces_=function(){return[_l]};ri.prototype.getClass=function(){return ri};ri.isPointInRing=function(t,n){return n.getEnvelopeInternal().intersects(t)?Gt.isPointInRing(t,n.getCoordinates()):!1};ri.containsPointInPolygon=function(t,n){if(n.isEmpty())return!1;var r=n.getExteriorRing();if(!ri.isPointInRing(t,r))return!1;for(var i=0;i<n.getNumInteriorRing();i++){var o=n.getInteriorRingN(i);if(ri.isPointInRing(t,o))return!1}return!0};ri.containsPoint=function(t,n){if(n instanceof Rn)return ri.containsPointInPolygon(t,n);if(n instanceof mr)for(var r=new Ls(n);r.hasNext();){var i=r.next();if(i!==n&&ri.containsPoint(t,i))return!0}return!1};ri.locate=function(t,n){return n.isEmpty()?lt.EXTERIOR:ri.containsPoint(t,n)?lt.INTERIOR:lt.EXTERIOR};var or=function(){this._edgeMap=new ir,this._edgeList=null,this._ptInAreaLocation=[lt.NONE,lt.NONE]};or.prototype.getNextCW=function(t){this.getEdges();var n=this._edgeList.indexOf(t),r=n-1;return n===0&&(r=this._edgeList.size()-1),this._edgeList.get(r)};or.prototype.propagateSideLabels=function(t){for(var n=lt.NONE,r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.isArea(t)&&o.getLocation(t,At.LEFT)!==lt.NONE&&(n=o.getLocation(t,At.LEFT))}if(n===lt.NONE)return null;for(var u=n,f=this.iterator();f.hasNext();){var d=f.next(),_=d.getLabel();if(_.getLocation(t,At.ON)===lt.NONE&&_.setLocation(t,At.ON,u),_.isArea(t)){var y=_.getLocation(t,At.LEFT),E=_.getLocation(t,At.RIGHT);if(E!==lt.NONE){if(E!==u)throw new so("side location conflict",d.getCoordinate());y===lt.NONE&&me.shouldNeverReachHere("found single null side (at "+d.getCoordinate()+")"),u=y}else me.isTrue(_.getLocation(t,At.LEFT)===lt.NONE,"found single null side"),_.setLocation(t,At.RIGHT,u),_.setLocation(t,At.LEFT,u)}}};or.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;var n=t.next();return n.getCoordinate()};or.prototype.print=function(t){Yn.out.println("EdgeEndStar:   "+this.getCoordinate());for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};or.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)};or.prototype.checkAreaLabelsConsistent=function(t){var n=this.getEdges();if(n.size()<=0)return!0;var r=n.size()-1,i=n.get(r).getLabel(),o=i.getLocation(t,At.LEFT);me.isTrue(o!==lt.NONE,"Found unlabelled area edge");for(var u=o,f=this.iterator();f.hasNext();){var d=f.next(),_=d.getLabel();me.isTrue(_.isArea(t),"Found non-area edge");var y=_.getLocation(t,At.LEFT),E=_.getLocation(t,At.RIGHT);if(y===E||E!==u)return!1;u=y}return!0};or.prototype.findIndex=function(t){var n=this;this.iterator();for(var r=0;r<this._edgeList.size();r++){var i=n._edgeList.get(r);if(i===t)return r}return-1};or.prototype.iterator=function(){return this.getEdges().iterator()};or.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new Ot(this._edgeMap.values())),this._edgeList};or.prototype.getLocation=function(t,n,r){return this._ptInAreaLocation[t]===lt.NONE&&(this._ptInAreaLocation[t]=ri.locate(n,r[t].getGeometry())),this._ptInAreaLocation[t]};or.prototype.toString=function(){var t=new hs;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var n=this.iterator();n.hasNext();){var r=n.next();t.append(r),t.append(`
`)}return t.toString()};or.prototype.computeEdgeEndLabels=function(t){for(var n=this.iterator();n.hasNext();){var r=n.next();r.computeLabel(t)}};or.prototype.computeLabelling=function(t){var n=this;this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var r=[!1,!1],i=this.iterator();i.hasNext();)for(var o=i.next(),u=o.getLabel(),f=0;f<2;f++)u.isLine(f)&&u.getLocation(f)===lt.BOUNDARY&&(r[f]=!0);for(var d=this.iterator();d.hasNext();)for(var _=d.next(),y=_.getLabel(),E=0;E<2;E++)if(y.isAnyNull(E)){var S=lt.NONE;if(r[E])S=lt.EXTERIOR;else{var T=_.getCoordinate();S=n.getLocation(E,T,t)}y.setAllLocationsIfNull(E,S)}};or.prototype.getDegree=function(){return this._edgeMap.size()};or.prototype.insertEdgeEnd=function(t,n){this._edgeMap.put(t,n),this._edgeList=null};or.prototype.interfaces_=function(){return[]};or.prototype.getClass=function(){return or};var Ew=function(e){function t(){e.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.linkResultDirectedEdges=function(){var r=this;this.getResultAreaEdges();for(var i=null,o=null,u=this._SCANNING_FOR_INCOMING,f=0;f<this._resultAreaEdgeList.size();f++){var d=r._resultAreaEdgeList.get(f),_=d.getSym();if(d.getLabel().isArea())switch(i===null&&d.isInResult()&&(i=d),u){case r._SCANNING_FOR_INCOMING:if(!_.isInResult())continue;o=_,u=r._LINKING_TO_OUTGOING;break;case r._LINKING_TO_OUTGOING:if(!d.isInResult())continue;o.setNext(d),u=r._SCANNING_FOR_INCOMING;break}}if(u===this._LINKING_TO_OUTGOING){if(i===null)throw new so("no outgoing dirEdge found",this.getCoordinate());me.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),o.setNext(i)}},t.prototype.insert=function(r){var i=r;this.insertEdgeEnd(i,i)},t.prototype.getRightmostEdge=function(){var r=this.getEdges(),i=r.size();if(i<1)return null;var o=r.get(0);if(i===1)return o;var u=r.get(i-1),f=o.getQuadrant(),d=u.getQuadrant();return Ke.isNorthern(f)&&Ke.isNorthern(d)?o:!Ke.isNorthern(f)&&!Ke.isNorthern(d)?u:o.getDy()!==0?o:u.getDy()!==0?u:(me.shouldNeverReachHere("found two horizontal edges incident on node"),null)},t.prototype.print=function(r){Yn.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var o=i.next();r.print("out "),o.print(r),r.println(),r.print("in "),o.getSym().print(r),r.println()}},t.prototype.getResultAreaEdges=function(){var r=this;if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ot;for(var i=this.iterator();i.hasNext();){var o=i.next();(o.isInResult()||o.getSym().isInResult())&&r._resultAreaEdgeList.add(o)}return this._resultAreaEdgeList},t.prototype.updateLabelling=function(r){for(var i=this.iterator();i.hasNext();){var o=i.next(),u=o.getLabel();u.setAllLocationsIfNull(0,r.getLocation(0)),u.setAllLocationsIfNull(1,r.getLocation(1))}},t.prototype.linkAllDirectedEdges=function(){var r=this;this.getEdges();for(var i=null,o=null,u=this._edgeList.size()-1;u>=0;u--){var f=r._edgeList.get(u),d=f.getSym();o===null&&(o=d),i!==null&&d.setNext(i),i=f}o.setNext(i)},t.prototype.computeDepths=function(){var r=this;if(arguments.length===1){var i=arguments[0],o=this.findIndex(i),u=i.getDepth(At.LEFT),f=i.getDepth(At.RIGHT),d=this.computeDepths(o+1,this._edgeList.size(),u),_=this.computeDepths(0,o,d);if(_!==f)throw new so("depth mismatch at "+i.getCoordinate())}else if(arguments.length===3){for(var y=arguments[0],E=arguments[1],S=arguments[2],T=S,I=y;I<E;I++){var z=r._edgeList.get(I);z.setEdgeDepths(At.RIGHT,T),T=z.getDepth(At.LEFT)}return T}},t.prototype.mergeSymLabels=function(){for(var r=this.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();o.merge(i.getSym().getLabel())}},t.prototype.linkMinimalDirectedEdges=function(r){for(var i=this,o=null,u=null,f=this._SCANNING_FOR_INCOMING,d=this._resultAreaEdgeList.size()-1;d>=0;d--){var _=i._resultAreaEdgeList.get(d),y=_.getSym();switch(o===null&&_.getEdgeRing()===r&&(o=_),f){case i._SCANNING_FOR_INCOMING:if(y.getEdgeRing()!==r)continue;u=y,f=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(_.getEdgeRing()!==r)continue;u.setNextMin(_),f=i._SCANNING_FOR_INCOMING;break}}f===this._LINKING_TO_OUTGOING&&(me.isTrue(o!==null,"found null for first outgoing dirEdge"),me.isTrue(o.getEdgeRing()===r,"unable to link last incoming dirEdge"),u.setNextMin(o))},t.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var r=0,i=this.iterator();i.hasNext();){var o=i.next();o.isInResult()&&r++}return r}else if(arguments.length===1){for(var u=arguments[0],f=0,d=this.iterator();d.hasNext();){var _=d.next();_.getEdgeRing()===u&&f++}return f}},t.prototype.getLabel=function(){return this._label},t.prototype.findCoveredLineEdges=function(){for(var r=lt.NONE,i=this.iterator();i.hasNext();){var o=i.next(),u=o.getSym();if(!o.isLineEdge()){if(o.isInResult()){r=lt.INTERIOR;break}if(u.isInResult()){r=lt.EXTERIOR;break}}}if(r===lt.NONE)return null;for(var f=r,d=this.iterator();d.hasNext();){var _=d.next(),y=_.getSym();_.isLineEdge()?_.getEdge().setCovered(f===lt.INTERIOR):(_.isInResult()&&(f=lt.EXTERIOR),y.isInResult()&&(f=lt.INTERIOR))}},t.prototype.computeLabelling=function(r){var i=this;e.prototype.computeLabelling.call(this,r),this._label=new Ve(lt.NONE);for(var o=this.iterator();o.hasNext();)for(var u=o.next(),f=u.getEdge(),d=f.getLabel(),_=0;_<2;_++){var y=d.getLocation(_);(y===lt.INTERIOR||y===lt.BOUNDARY)&&i._label.setLocation(_,lt.INTERIOR)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(or),wv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createNode=function(r){return new Sp(r,new Ew)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(dl),Ro=function e(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)};Ro.prototype.compareTo=function(t){var n=t,r=Ro.compareOriented(this._pts,this._orientation,n._pts,n._orientation);return r};Ro.prototype.interfaces_=function(){return[vi]};Ro.prototype.getClass=function(){return Ro};Ro.orientation=function(t){return Le.increasingDirection(t)===1};Ro.compareOriented=function(t,n,r,i){for(var o=n?1:-1,u=i?1:-1,f=n?t.length:-1,d=i?r.length:-1,_=n?0:t.length-1,y=i?0:r.length-1;;){var E=t[_].compareTo(r[y]);if(E!==0)return E;_+=o,y+=u;var S=_===f,T=y===d;if(S&&!T)return-1;if(!S&&T)return 1;if(S&&T)return 0}};var Ni=function(){this._edges=new Ot,this._ocaMap=new ir};Ni.prototype.print=function(t){var n=this;t.print("MULTILINESTRING ( ");for(var r=0;r<this._edges.size();r++){var i=n._edges.get(r);r>0&&t.print(","),t.print("(");for(var o=i.getCoordinates(),u=0;u<o.length;u++)u>0&&t.print(","),t.print(o[u].x+" "+o[u].y);t.println(")")}t.print(")  ")};Ni.prototype.addAll=function(t){for(var n=this,r=t.iterator();r.hasNext();)n.add(r.next())};Ni.prototype.findEdgeIndex=function(t){for(var n=this,r=0;r<this._edges.size();r++)if(n._edges.get(r).equals(t))return r;return-1};Ni.prototype.iterator=function(){return this._edges.iterator()};Ni.prototype.getEdges=function(){return this._edges};Ni.prototype.get=function(t){return this._edges.get(t)};Ni.prototype.findEqualEdge=function(t){var n=new Ro(t.getCoordinates()),r=this._ocaMap.get(n);return r};Ni.prototype.add=function(t){this._edges.add(t);var n=new Ro(t.getCoordinates());this._ocaMap.put(n,t)};Ni.prototype.interfaces_=function(){return[]};Ni.prototype.getClass=function(){return Ni};var ma=function(){};ma.prototype.processIntersections=function(t,n,r,i){};ma.prototype.isDone=function(){};ma.prototype.interfaces_=function(){return[]};ma.prototype.getClass=function(){return ma};var ai=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};ai.prototype.isTrivialIntersection=function(t,n,r,i){if(t===r&&this._li.getIntersectionNum()===1){if(ai.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var o=t.size()-1;if(n===0&&i===o||i===0&&n===o)return!0}}return!1};ai.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};ai.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};ai.prototype.getLineIntersector=function(){return this._li};ai.prototype.hasProperIntersection=function(){return this._hasProper};ai.prototype.processIntersections=function(t,n,r,i){if(t===r&&n===i)return null;this.numTests++;var o=t.getCoordinates()[n],u=t.getCoordinates()[n+1],f=r.getCoordinates()[i],d=r.getCoordinates()[i+1];this._li.computeIntersection(o,u,f,d),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,n,r,i)||(this._hasIntersection=!0,t.addIntersections(this._li,n,0),r.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))};ai.prototype.hasIntersection=function(){return this._hasIntersection};ai.prototype.isDone=function(){return!1};ai.prototype.hasInteriorIntersection=function(){return this._hasInterior};ai.prototype.interfaces_=function(){return[ma]};ai.prototype.getClass=function(){return ai};ai.isAdjacentSegments=function(t,n){return Math.abs(t-n)===1};var as=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],n=arguments[1],r=arguments[2];this.coord=new it(t),this.segmentIndex=n,this.dist=r};as.prototype.getSegmentIndex=function(){return this.segmentIndex};as.prototype.getCoordinate=function(){return this.coord};as.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)};as.prototype.compareTo=function(t){var n=t;return this.compare(n.segmentIndex,n.dist)};as.prototype.isEndPoint=function(t){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===t};as.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist};as.prototype.getDistance=function(){return this.dist};as.prototype.compare=function(t,n){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<n?-1:this.dist>n?1:0};as.prototype.interfaces_=function(){return[vi]};as.prototype.getClass=function(){return as};var Ps=function(){this._nodeMap=new ir,this.edge=null;var t=arguments[0];this.edge=t};Ps.prototype.print=function(t){t.println("Intersections:");for(var n=this.iterator();n.hasNext();){var r=n.next();r.print(t)}};Ps.prototype.iterator=function(){return this._nodeMap.values().iterator()};Ps.prototype.addSplitEdges=function(t){var n=this;this.addEndpoints();for(var r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),u=n.createSplitEdge(i,o);t.add(u),i=o}};Ps.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)};Ps.prototype.createSplitEdge=function(t,n){var r=this,i=n.segmentIndex-t.segmentIndex+2,o=this.edge.pts[n.segmentIndex],u=n.dist>0||!n.coord.equals2D(o);u||i--;var f=new Array(i).fill(null),d=0;f[d++]=new it(t.coord);for(var _=t.segmentIndex+1;_<=n.segmentIndex;_++)f[d++]=r.edge.pts[_];return u&&(f[d]=n.coord),new Gf(f,new Ve(this.edge._label))};Ps.prototype.add=function(t,n,r){var i=new as(t,n,r),o=this._nodeMap.get(i);return o!==null?o:(this._nodeMap.put(i,i),i)};Ps.prototype.isIntersection=function(t){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.coord.equals(t))return!0}return!1};Ps.prototype.interfaces_=function(){return[]};Ps.prototype.getClass=function(){return Ps};var _a=function(){};_a.prototype.getChainStartIndices=function(t){var n=this,r=0,i=new Ot;i.add(new es(r));do{var o=n.findChainEnd(t,r);i.add(new es(o)),r=o}while(r<t.length-1);var u=_a.toIntArray(i);return u};_a.prototype.findChainEnd=function(t,n){for(var r=Ke.quadrant(t[n],t[n+1]),i=n+1;i<t.length;){var o=Ke.quadrant(t[i-1],t[i]);if(o!==r)break;i++}return i-1};_a.prototype.interfaces_=function(){return[]};_a.prototype.getClass=function(){return _a};_a.toIntArray=function(t){for(var n=new Array(t.size()).fill(null),r=0;r<n.length;r++)n[r]=t.get(r).intValue();return n};var ao=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Jt,this.env2=new Jt;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var n=new _a;this.startIndex=n.getChainStartIndices(this.pts)};ao.prototype.getCoordinates=function(){return this.pts};ao.prototype.getMaxX=function(t){var n=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return n>r?n:r};ao.prototype.getMinX=function(t){var n=this.pts[this.startIndex[t]].x,r=this.pts[this.startIndex[t+1]].x;return n<r?n:r};ao.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],n,n.startIndex[r],n.startIndex[r+1],i)}else if(arguments.length===6){var o=arguments[0],u=arguments[1],f=arguments[2],d=arguments[3],_=arguments[4],y=arguments[5],E=this.pts[o],S=this.pts[u],T=f.pts[d],I=f.pts[_];if(u-o===1&&_-d===1)return y.addIntersections(this.e,o,f.e,d),null;if(this.env1.init(E,S),this.env2.init(T,I),!this.env1.intersects(this.env2))return null;var z=Math.trunc((o+u)/2),G=Math.trunc((d+_)/2);o<z&&(d<G&&this.computeIntersectsForChain(o,z,f,d,G,y),G<_&&this.computeIntersectsForChain(o,z,f,G,_,y)),z<u&&(d<G&&this.computeIntersectsForChain(z,u,f,d,G,y),G<_&&this.computeIntersectsForChain(z,u,f,G,_,y))}};ao.prototype.getStartIndexes=function(){return this.startIndex};ao.prototype.computeIntersects=function(t,n){for(var r=this,i=0;i<this.startIndex.length-1;i++)for(var o=0;o<t.startIndex.length-1;o++)r.computeIntersectsForChain(i,t,o,n)};ao.prototype.interfaces_=function(){return[]};ao.prototype.getClass=function(){return ao};var Xn=function e(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var n=0;n<2;n++)for(var r=0;r<3;r++)t._depth[n][r]=e.NULL_VALUE},Sv={NULL_VALUE:{configurable:!0}};Xn.prototype.getDepth=function(t,n){return this._depth[t][n]};Xn.prototype.setDepth=function(t,n,r){this._depth[t][n]=r};Xn.prototype.isNull=function(){var t=this;if(arguments.length===0){for(var n=0;n<2;n++)for(var r=0;r<3;r++)if(t._depth[n][r]!==Xn.NULL_VALUE)return!1;return!0}else if(arguments.length===1){var i=arguments[0];return this._depth[i][1]===Xn.NULL_VALUE}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return this._depth[o][u]===Xn.NULL_VALUE}};Xn.prototype.normalize=function(){for(var t=this,n=0;n<2;n++)if(!t.isNull(n)){var r=t._depth[n][1];t._depth[n][2]<r&&(r=t._depth[n][2]),r<0&&(r=0);for(var i=1;i<3;i++){var o=0;t._depth[n][i]>r&&(o=1),t._depth[n][i]=o}}};Xn.prototype.getDelta=function(t){return this._depth[t][At.RIGHT]-this._depth[t][At.LEFT]};Xn.prototype.getLocation=function(t,n){return this._depth[t][n]<=0?lt.EXTERIOR:lt.INTERIOR};Xn.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]};Xn.prototype.add=function(){var t=this;if(arguments.length===1)for(var n=arguments[0],r=0;r<2;r++)for(var i=1;i<3;i++){var o=n.getLocation(r,i);(o===lt.EXTERIOR||o===lt.INTERIOR)&&(t.isNull(r,i)?t._depth[r][i]=Xn.depthAtLocation(o):t._depth[r][i]+=Xn.depthAtLocation(o))}else if(arguments.length===3){var u=arguments[0],f=arguments[1],d=arguments[2];d===lt.INTERIOR&&this._depth[u][f]++}};Xn.prototype.interfaces_=function(){return[]};Xn.prototype.getClass=function(){return Xn};Xn.depthAtLocation=function(t){return t===lt.EXTERIOR?0:t===lt.INTERIOR?1:Xn.NULL_VALUE};Sv.NULL_VALUE.get=function(){return-1};Object.defineProperties(Xn,Sv);var Gf=function(e){function t(){if(e.call(this),this.pts=null,this._env=null,this.eiList=new Ps(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Xn,this._depthDelta=0,arguments.length===1){var n=arguments[0];t.call(this,n,null)}else if(arguments.length===2){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDepth=function(){return this._depth},t.prototype.getCollapsedEdge=function(){var r=new Array(2).fill(null);r[0]=this.pts[0],r[1]=this.pts[1];var i=new t(r,Ve.toLineLabel(this._label));return i},t.prototype.isIsolated=function(){return this._isIsolated},t.prototype.getCoordinates=function(){return this.pts},t.prototype.setIsolated=function(r){this._isIsolated=r},t.prototype.setName=function(r){this._name=r},t.prototype.equals=function(r){var i=this;if(!(r instanceof t))return!1;var o=r;if(this.pts.length!==o.pts.length)return!1;for(var u=!0,f=!0,d=this.pts.length,_=0;_<this.pts.length;_++)if(i.pts[_].equals2D(o.pts[_])||(u=!1),i.pts[_].equals2D(o.pts[--d])||(f=!1),!u&&!f)return!1;return!0},t.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var r=arguments[0];return this.pts[r]}},t.prototype.print=function(r){var i=this;r.print("edge "+this._name+": "),r.print("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&r.print(","),r.print(i.pts[o].x+" "+i.pts[o].y);r.print(")  "+this._label+" "+this._depthDelta)},t.prototype.computeIM=function(r){t.updateIM(this._label,r)},t.prototype.isCollapsed=function(){return!this._label.isArea()||this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2])},t.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},t.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},t.prototype.getDepthDelta=function(){return this._depthDelta},t.prototype.getNumPoints=function(){return this.pts.length},t.prototype.printReverse=function(r){var i=this;r.print("edge "+this._name+": ");for(var o=this.pts.length-1;o>=0;o--)r.print(i.pts[o]+" ");r.println("")},t.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new ao(this)),this._mce},t.prototype.getEnvelope=function(){var r=this;if(this._env===null){this._env=new Jt;for(var i=0;i<this.pts.length;i++)r._env.expandToInclude(r.pts[i])}return this._env},t.prototype.addIntersection=function(r,i,o,u){var f=new it(r.getIntersection(u)),d=i,_=r.getEdgeDistance(o,u),y=d+1;if(y<this.pts.length){var E=this.pts[y];f.equals2D(E)&&(d=y,_=0)}this.eiList.add(f,d,_)},t.prototype.toString=function(){var r=this,i=new hs;i.append("edge "+this._name+": "),i.append("LINESTRING (");for(var o=0;o<this.pts.length;o++)o>0&&i.append(","),i.append(r.pts[o].x+" "+r.pts[o].y);return i.append(")  "+this._label+" "+this._depthDelta),i.toString()},t.prototype.isPointwiseEqual=function(r){var i=this;if(this.pts.length!==r.pts.length)return!1;for(var o=0;o<this.pts.length;o++)if(!i.pts[o].equals2D(r.pts[o]))return!1;return!0},t.prototype.setDepthDelta=function(r){this._depthDelta=r},t.prototype.getEdgeIntersectionList=function(){return this.eiList},t.prototype.addIntersections=function(r,i,o){for(var u=this,f=0;f<r.getIntersectionNum();f++)u.addIntersection(r,i,o,f)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.updateIM=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];i.setAtLeastIfValid(r.getLocation(0,At.ON),r.getLocation(1,At.ON),1),r.isArea()&&(i.setAtLeastIfValid(r.getLocation(0,At.LEFT),r.getLocation(1,At.LEFT),2),i.setAtLeastIfValid(r.getLocation(0,At.RIGHT),r.getLocation(1,At.RIGHT),2))}else return e.prototype.updateIM.apply(this,arguments)},t}(si),gr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Ni,this._bufParams=t||null};gr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t};gr.prototype.insertUniqueEdge=function(t){var n=this._edgeList.findEqualEdge(t);if(n!==null){var r=n.getLabel(),i=t.getLabel();n.isPointwiseEqual(t)||(i=new Ve(t.getLabel()),i.flip()),r.merge(i);var o=gr.depthDelta(i),u=n.getDepthDelta(),f=u+o;n.setDepthDelta(f)}else this._edgeList.add(t),t.setDepthDelta(gr.depthDelta(t.getLabel()))};gr.prototype.buildSubgraphs=function(t,n){for(var r=new Ot,i=t.iterator();i.hasNext();){var o=i.next(),u=o.getRightmostCoordinate(),f=new ru(r),d=f.getDepth(u);o.computeDepth(d),o.findResultEdges(),r.add(o),n.add(o.getDirectedEdges(),o.getNodes())}};gr.prototype.createSubgraphs=function(t){for(var n=new Ot,r=t.getNodes().iterator();r.hasNext();){var i=r.next();if(!i.isVisited()){var o=new _r;o.create(i),n.add(o)}}return ki.sort(n,ki.reverseOrder()),n};gr.prototype.createEmptyResultGeometry=function(){var t=this._geomFact.createPolygon();return t};gr.prototype.getNoder=function(t){if(this._workingNoder!==null)return this._workingNoder;var n=new $g,r=new ba;return r.setPrecisionModel(t),n.setSegmentIntersector(new ai(r)),n};gr.prototype.buffer=function(t,n){var r=this._workingPrecisionModel;r===null&&(r=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Mr(r,this._bufParams),o=new yi(t,n,i),u=o.getCurves();if(u.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(u,r),this._graph=new fn(new wv),this._graph.addEdges(this._edgeList.getEdges());var f=this.createSubgraphs(this._graph),d=new qr(this._geomFact);this.buildSubgraphs(f,d);var _=d.getPolygons();if(_.size()<=0)return this.createEmptyResultGeometry();var y=this._geomFact.buildGeometry(_);return y};gr.prototype.computeNodedEdges=function(t,n){var r=this,i=this.getNoder(n);i.computeNodes(t);for(var o=i.getNodedSubstrings(),u=o.iterator();u.hasNext();){var f=u.next(),d=f.getCoordinates();if(!(d.length===2&&d[0].equals2D(d[1]))){var _=f.getData(),y=new Gf(f.getCoordinates(),new Ve(_));r.insertUniqueEdge(y)}}};gr.prototype.setNoder=function(t){this._workingNoder=t};gr.prototype.interfaces_=function(){return[]};gr.prototype.getClass=function(){return gr};gr.depthDelta=function(t){var n=t.getLocation(0,At.LEFT),r=t.getLocation(0,At.RIGHT);return n===lt.INTERIOR&&r===lt.EXTERIOR?1:n===lt.EXTERIOR&&r===lt.INTERIOR?-1:0};gr.convertSegStrings=function(t){for(var n=new Ee,r=new Ot;t.hasNext();){var i=t.next(),o=n.createLineString(i.getCoordinates());r.add(o)}return n.buildGeometry(r)};var Oo=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var t=arguments[0],n=arguments[1];this._noder=t,this._scaleFactor=n,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var r=arguments[0],i=arguments[1],o=arguments[2],u=arguments[3];this._noder=r,this._scaleFactor=i,this._offsetX=o,this._offsetY=u,this._isScaled=!this.isIntegerPrecision()}};Oo.prototype.rescale=function(){var t=this;if(se(arguments[0],An))for(var n=arguments[0],r=n.iterator();r.hasNext();){var i=r.next();t.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var o=arguments[0],u=0;u<o.length;u++)o[u].x=o[u].x/t._scaleFactor+t._offsetX,o[u].y=o[u].y/t._scaleFactor+t._offsetY;o.length===2&&o[0].equals2D(o[1])&&Yn.out.println(o)}};Oo.prototype.scale=function(){var t=this;if(se(arguments[0],An)){for(var n=arguments[0],r=new Ot,i=n.iterator();i.hasNext();){var o=i.next();r.add(new Ln(t.scale(o.getCoordinates()),o.getData()))}return r}else if(arguments[0]instanceof Array){for(var u=arguments[0],f=new Array(u.length).fill(null),d=0;d<u.length;d++)f[d]=new it(Math.round((u[d].x-t._offsetX)*t._scaleFactor),Math.round((u[d].y-t._offsetY)*t._scaleFactor),u[d].z);var _=Le.removeRepeatedPoints(f);return _}};Oo.prototype.isIntegerPrecision=function(){return this._scaleFactor===1};Oo.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t};Oo.prototype.computeNodes=function(t){var n=t;this._isScaled&&(n=this.scale(t)),this._noder.computeNodes(n)};Oo.prototype.interfaces_=function(){return[da]};Oo.prototype.getClass=function(){return Oo};var us=function(){this._li=new ba,this._segStrings=null;var t=arguments[0];this._segStrings=t},Mv={fact:{configurable:!0}};us.prototype.checkEndPtVertexIntersections=function(){var t=this;if(arguments.length===0)for(var n=this._segStrings.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinates();t.checkEndPtVertexIntersections(i[0],t._segStrings),t.checkEndPtVertexIntersections(i[i.length-1],t._segStrings)}else if(arguments.length===2){for(var o=arguments[0],u=arguments[1],f=u.iterator();f.hasNext();)for(var d=f.next(),_=d.getCoordinates(),y=1;y<_.length-1;y++)if(_[y].equals(o))throw new ro("found endpt/interior pt intersection at index "+y+" :pt "+o)}};us.prototype.checkInteriorIntersections=function(){var t=this;if(arguments.length===0)for(var n=this._segStrings.iterator();n.hasNext();)for(var r=n.next(),i=this._segStrings.iterator();i.hasNext();){var o=i.next();t.checkInteriorIntersections(r,o)}else if(arguments.length===2)for(var u=arguments[0],f=arguments[1],d=u.getCoordinates(),_=f.getCoordinates(),y=0;y<d.length-1;y++)for(var E=0;E<_.length-1;E++)t.checkInteriorIntersections(u,y,f,E);else if(arguments.length===4){var S=arguments[0],T=arguments[1],I=arguments[2],z=arguments[3];if(S===I&&T===z)return null;var G=S.getCoordinates()[T],Q=S.getCoordinates()[T+1],$=I.getCoordinates()[z],rt=I.getCoordinates()[z+1];if(this._li.computeIntersection(G,Q,$,rt),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,G,Q)||this.hasInteriorIntersection(this._li,$,rt)))throw new ro("found non-noded intersection at "+G+"-"+Q+" and "+$+"-"+rt)}};us.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()};us.prototype.checkCollapses=function(){var t=this;if(arguments.length===0)for(var n=this._segStrings.iterator();n.hasNext();){var r=n.next();t.checkCollapses(r)}else if(arguments.length===1)for(var i=arguments[0],o=i.getCoordinates(),u=0;u<o.length-2;u++)t.checkCollapse(o[u],o[u+1],o[u+2])};us.prototype.hasInteriorIntersection=function(t,n,r){for(var i=0;i<t.getIntersectionNum();i++){var o=t.getIntersection(i);if(!(o.equals(n)||o.equals(r)))return!0}return!1};us.prototype.checkCollapse=function(t,n,r){if(t.equals(r))throw new ro("found non-noded collapse at "+us.fact.createLineString([t,n,r]))};us.prototype.interfaces_=function(){return[]};us.prototype.getClass=function(){return us};Mv.fact.get=function(){return new Ee};Object.defineProperties(us,Mv);var Pr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],n=arguments[1],r=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=n,this._li=r,n<=0)throw new ln("Scale factor must be non-zero");n!==1&&(this._pt=new it(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new it,this._p1Scaled=new it),this.initCorners(this._pt)},Pv={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Pr.prototype.intersectsScaled=function(t,n){var r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),u=Math.max(t.y,n.y),f=this._maxx<r||this._minx>i||this._maxy<o||this._miny>u;if(f)return!1;var d=this.intersectsToleranceSquare(t,n);return me.isTrue(!(f&&d),"Found bad envelope test"),d};Pr.prototype.initCorners=function(t){var n=.5;this._minx=t.x-n,this._maxx=t.x+n,this._miny=t.y-n,this._maxy=t.y+n,this._corner[0]=new it(this._maxx,this._maxy),this._corner[1]=new it(this._minx,this._maxy),this._corner[2]=new it(this._minx,this._miny),this._corner[3]=new it(this._maxx,this._miny)};Pr.prototype.intersects=function(t,n){return this._scaleFactor===1?this.intersectsScaled(t,n):(this.copyScaled(t,this._p0Scaled),this.copyScaled(n,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))};Pr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)};Pr.prototype.getCoordinate=function(){return this._originalPt};Pr.prototype.copyScaled=function(t,n){n.x=this.scale(t.x),n.y=this.scale(t.y)};Pr.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var t=Pr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Jt(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv};Pr.prototype.intersectsPixelClosure=function(t,n){return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.hasIntersection())||(this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.hasIntersection())||(this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.hasIntersection()))};Pr.prototype.intersectsToleranceSquare=function(t,n){var r=!1,i=!1;return this._li.computeIntersection(t,n,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,n,this._corner[1],this._corner[2]),this._li.isProper())||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,n,this._corner[2],this._corner[3]),this._li.isProper())||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,n,this._corner[3],this._corner[0]),this._li.isProper())||r&&i||t.equals(this._pt)||n.equals(this._pt))};Pr.prototype.addSnappedNode=function(t,n){var r=t.getCoordinate(n),i=t.getCoordinate(n+1);return this.intersects(r,i)?(t.addIntersection(this.getCoordinate(),n),!0):!1};Pr.prototype.interfaces_=function(){return[]};Pr.prototype.getClass=function(){return Pr};Pv.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75};Object.defineProperties(Pr,Pv);var Yc=function(){this.tempEnv1=new Jt,this.selectedSegment=new Qt};Yc.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],n=arguments[1];t.getLineSegment(n,this.selectedSegment),this.select(this.selectedSegment)}}};Yc.prototype.interfaces_=function(){return[]};Yc.prototype.getClass=function(){return Yc};var yl=function(){this._index=null;var t=arguments[0];this._index=t},Iv={HotPixelSnapAction:{configurable:!0}};yl.prototype.snap=function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2],o=n.getSafeEnvelope(),u=new Tv(n,r,i);return this._index.query(o,{interfaces_:function(){return[ko]},visitItem:function(f){var d=f;d.select(o,u)}}),u.isNodeAdded()}};yl.prototype.interfaces_=function(){return[]};yl.prototype.getClass=function(){return yl};Iv.HotPixelSnapAction.get=function(){return Tv};Object.defineProperties(yl,Iv);var Tv=function(e){function t(){e.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var n=arguments[0],r=arguments[1],i=arguments[2];this._hotPixel=n,this._parentEdge=r,this._hotPixelVertexIndex=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isNodeAdded=function(){return this._isNodeAdded},t.prototype.select=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1],o=r.getContext();if(this._parentEdge!==null&&o===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(o,i)}else return e.prototype.select.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Yc),iu=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Ot};iu.prototype.processIntersections=function(t,n,r,i){var o=this;if(t===r&&n===i)return null;var u=t.getCoordinates()[n],f=t.getCoordinates()[n+1],d=r.getCoordinates()[i],_=r.getCoordinates()[i+1];if(this._li.computeIntersection(u,f,d,_),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var y=0;y<this._li.getIntersectionNum();y++)o._interiorIntersections.add(o._li.getIntersection(y));t.addIntersections(this._li,n,0),r.addIntersections(this._li,i,1)}};iu.prototype.isDone=function(){return!1};iu.prototype.getInteriorIntersections=function(){return this._interiorIntersections};iu.prototype.interfaces_=function(){return[ma]};iu.prototype.getClass=function(){return iu};var Is=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ba,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Is.prototype.checkCorrectness=function(t){var n=Ln.getNodedSubstrings(t),r=new us(n);try{r.checkValid()}catch(i){if(i instanceof pv)i.printStackTrace();else throw i}finally{}};Is.prototype.getNodedSubstrings=function(){return Ln.getNodedSubstrings(this._nodedSegStrings)};Is.prototype.snapRound=function(t,n){var r=this.findInteriorIntersections(t,n);this.computeIntersectionSnaps(r),this.computeVertexSnaps(t)};Is.prototype.findInteriorIntersections=function(t,n){var r=new iu(n);return this._noder.setSegmentIntersector(r),this._noder.computeNodes(t),r.getInteriorIntersections()};Is.prototype.computeVertexSnaps=function(){var t=this;if(se(arguments[0],An))for(var n=arguments[0],r=n.iterator();r.hasNext();){var i=r.next();t.computeVertexSnaps(i)}else if(arguments[0]instanceof Ln)for(var o=arguments[0],u=o.getCoordinates(),f=0;f<u.length;f++){var d=new Pr(u[f],t._scaleFactor,t._li),_=t._pointSnapper.snap(d,o,f);_&&o.addIntersection(u[f],f)}};Is.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new $g,this._pointSnapper=new yl(this._noder.getIndex()),this.snapRound(t,this._li)};Is.prototype.computeIntersectionSnaps=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next(),o=new Pr(i,n._scaleFactor,n._li);n._pointSnapper.snap(o)}};Is.prototype.interfaces_=function(){return[da]};Is.prototype.getClass=function(){return Is};var Kn=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Re,this._resultGeometry=null,this._saveException=null,arguments.length===1){var t=arguments[0];this._argGeom=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._argGeom=n,this._bufParams=r}},kl={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Kn.prototype.bufferFixedPrecision=function(t){var n=new Oo(new Is(new Oe(1)),t.getScale()),r=new gr(this._bufParams);r.setWorkingPrecisionModel(t),r.setNoder(n),this._resultGeometry=r.buffer(this._argGeom,this._distance)};Kn.prototype.bufferReducedPrecision=function(){var t=this;if(arguments.length===0){for(var n=Kn.MAX_PRECISION_DIGITS;n>=0;n--){try{t.bufferReducedPrecision(n)}catch(u){if(u instanceof so)t._saveException=u;else throw u}finally{}if(t._resultGeometry!==null)return null}throw this._saveException}else if(arguments.length===1){var r=arguments[0],i=Kn.precisionScaleFactor(this._argGeom,this._distance,r),o=new Oe(i);this.bufferFixedPrecision(o)}};Kn.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Oe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()};Kn.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)};Kn.prototype.bufferOriginalPrecision=function(){try{var t=new gr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(n){if(n instanceof ro)this._saveException=n;else throw n}finally{}};Kn.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry};Kn.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)};Kn.prototype.interfaces_=function(){return[]};Kn.prototype.getClass=function(){return Kn};Kn.bufferOp=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new Kn(t),i=r.getResultGeometry(n);return i}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ie&&typeof arguments[1]=="number"){var o=arguments[0],u=arguments[1],f=arguments[2],d=new Kn(o);d.setQuadrantSegments(f);var _=d.getResultGeometry(u);return _}else if(arguments[2]instanceof Re&&arguments[0]instanceof ie&&typeof arguments[1]=="number"){var y=arguments[0],E=arguments[1],S=arguments[2],T=new Kn(y,S),I=T.getResultGeometry(E);return I}}else if(arguments.length===4){var z=arguments[0],G=arguments[1],Q=arguments[2],$=arguments[3],rt=new Kn(z);rt.setQuadrantSegments(Q),rt.setEndCapStyle($);var mt=rt.getResultGeometry(G);return mt}};Kn.precisionScaleFactor=function(t,n,r){var i=t.getEnvelopeInternal(),o=ii.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),u=n>0?n:0,f=o+2*u,d=Math.trunc(Math.log(f)/Math.log(10)+1),_=r-d,y=Math.pow(10,_);return y};kl.CAP_ROUND.get=function(){return Re.CAP_ROUND};kl.CAP_BUTT.get=function(){return Re.CAP_FLAT};kl.CAP_FLAT.get=function(){return Re.CAP_FLAT};kl.CAP_SQUARE.get=function(){return Re.CAP_SQUARE};kl.MAX_PRECISION_DIGITS.get=function(){return 12};Object.defineProperties(Kn,kl);var fr=function(){this._pt=[new it,new it],this._distance=ue.NaN,this._isNull=!0};fr.prototype.getCoordinates=function(){return this._pt};fr.prototype.getCoordinate=function(t){return this._pt[t]};fr.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}};fr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(n),this._distance=t.distance(n),this._isNull=!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};fr.prototype.getDistance=function(){return this._distance};fr.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}};fr.prototype.interfaces_=function(){return[]};fr.prototype.getClass=function(){return fr};var ys=function(){};ys.prototype.interfaces_=function(){return[]};ys.prototype.getClass=function(){return ys};ys.computeDistance=function(){if(arguments[2]instanceof fr&&arguments[0]instanceof mn&&arguments[1]instanceof it)for(var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getCoordinates(),o=new Qt,u=0;u<i.length-1;u++){o.setCoordinates(i[u],i[u+1]);var f=o.closestPoint(n);r.setMinimum(f,n)}else if(arguments[2]instanceof fr&&arguments[0]instanceof Rn&&arguments[1]instanceof it){var d=arguments[0],_=arguments[1],y=arguments[2];ys.computeDistance(d.getExteriorRing(),_,y);for(var E=0;E<d.getNumInteriorRing();E++)ys.computeDistance(d.getInteriorRingN(E),_,y)}else if(arguments[2]instanceof fr&&arguments[0]instanceof ie&&arguments[1]instanceof it){var S=arguments[0],T=arguments[1],I=arguments[2];if(S instanceof mn)ys.computeDistance(S,T,I);else if(S instanceof Rn)ys.computeDistance(S,T,I);else if(S instanceof mr)for(var z=S,G=0;G<z.getNumGeometries();G++){var Q=z.getGeometryN(G);ys.computeDistance(Q,T,I)}else I.setMinimum(S.getCoordinate(),T)}else if(arguments[2]instanceof fr&&arguments[0]instanceof Qt&&arguments[1]instanceof it){var $=arguments[0],rt=arguments[1],mt=arguments[2],bt=$.closestPoint(rt);mt.setMinimum(bt,rt)}};var ya=function(t){this._maxPtDist=new fr,this._inputGeom=t||null},tm={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};ya.prototype.computeMaxMidpointDistance=function(t){var n=new Bo(this._inputGeom);t.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())};ya.prototype.computeMaxVertexDistance=function(t){var n=new su(this._inputGeom);t.apply(n),this._maxPtDist.setMaximum(n.getMaxPointDistance())};ya.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()};ya.prototype.getDistancePoints=function(){return this._maxPtDist};ya.prototype.interfaces_=function(){return[]};ya.prototype.getClass=function(){return ya};tm.MaxPointDistanceFilter.get=function(){return su};tm.MaxMidpointDistanceFilter.get=function(){return Bo};Object.defineProperties(ya,tm);var su=function(t){this._maxPtDist=new fr,this._minPtDist=new fr,this._geom=t||null};su.prototype.filter=function(t){this._minPtDist.initialize(),ys.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};su.prototype.getMaxPointDistance=function(){return this._maxPtDist};su.prototype.interfaces_=function(){return[bs]};su.prototype.getClass=function(){return su};var Bo=function(t){this._maxPtDist=new fr,this._minPtDist=new fr,this._geom=t||null};Bo.prototype.filter=function(t,n){if(n===0)return null;var r=t.getCoordinate(n-1),i=t.getCoordinate(n),o=new it((r.x+i.x)/2,(r.y+i.y)/2);this._minPtDist.initialize(),ys.computeDistance(this._geom,o,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};Bo.prototype.isDone=function(){return!1};Bo.prototype.isGeometryChanged=function(){return!1};Bo.prototype.getMaxPointDistance=function(){return this._maxPtDist};Bo.prototype.interfaces_=function(){return[Ai]};Bo.prototype.getClass=function(){return Bo};var to=function(t){this._comps=t||null};to.prototype.filter=function(t){t instanceof Rn&&this._comps.add(t)};to.prototype.interfaces_=function(){return[rs]};to.prototype.getClass=function(){return to};to.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return to.getPolygons(t,new Ot)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n instanceof Rn?r.add(n):n instanceof mr&&n.apply(new to(r)),r}};var Zn=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this._lines=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this._lines=n,this._isForcedToLineString=r}};Zn.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ws){var n=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(n),null}t instanceof mn&&this._lines.add(t)};Zn.prototype.setForceToLineString=function(t){this._isForcedToLineString=t};Zn.prototype.interfaces_=function(){return[io]};Zn.prototype.getClass=function(){return Zn};Zn.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(Zn.getLines(t))}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n.getFactory().buildGeometry(Zn.getLines(n,r))}};Zn.getLines=function(){if(arguments.length===1){var t=arguments[0];return Zn.getLines(t,!1)}else if(arguments.length===2){if(se(arguments[0],An)&&se(arguments[1],An)){for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();Zn.getLines(o,r)}return r}else if(arguments[0]instanceof ie&&typeof arguments[1]=="boolean"){var u=arguments[0],f=arguments[1],d=new Ot;return u.apply(new Zn(d,f)),d}else if(arguments[0]instanceof ie&&se(arguments[1],An)){var _=arguments[0],y=arguments[1];return _ instanceof mn?y.add(_):_.apply(new Zn(y)),y}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&se(arguments[0],An)&&se(arguments[1],An)){for(var E=arguments[0],S=arguments[1],T=arguments[2],I=E.iterator();I.hasNext();){var z=I.next();Zn.getLines(z,S,T)}return S}else if(typeof arguments[2]=="boolean"&&arguments[0]instanceof ie&&se(arguments[1],An)){var G=arguments[0],Q=arguments[1],$=arguments[2];return G.apply(new Zn(Q,$)),Q}}};var Ri=function(){if(this._boundaryRule=mi.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new ln("Rule must be non-null");this._boundaryRule=t}}};Ri.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof it&&arguments[1]instanceof Rn){var n=arguments[0],r=arguments[1];if(r.isEmpty())return lt.EXTERIOR;var i=r.getExteriorRing(),o=this.locateInPolygonRing(n,i);if(o===lt.EXTERIOR)return lt.EXTERIOR;if(o===lt.BOUNDARY)return lt.BOUNDARY;for(var u=0;u<r.getNumInteriorRing();u++){var f=r.getInteriorRingN(u),d=t.locateInPolygonRing(n,f);if(d===lt.INTERIOR)return lt.EXTERIOR;if(d===lt.BOUNDARY)return lt.BOUNDARY}return lt.INTERIOR}else if(arguments[0]instanceof it&&arguments[1]instanceof mn){var _=arguments[0],y=arguments[1];if(!y.getEnvelopeInternal().intersects(_))return lt.EXTERIOR;var E=y.getCoordinates();return!y.isClosed()&&(_.equals(E[0])||_.equals(E[E.length-1]))?lt.BOUNDARY:Gt.isOnLine(_,E)?lt.INTERIOR:lt.EXTERIOR}else if(arguments[0]instanceof it&&arguments[1]instanceof jr){var S=arguments[0],T=arguments[1],I=T.getCoordinate();return I.equals2D(S)?lt.INTERIOR:lt.EXTERIOR}};Ri.prototype.locateInPolygonRing=function(t,n){return n.getEnvelopeInternal().intersects(t)?Gt.locatePointInRing(t,n.getCoordinates()):lt.EXTERIOR};Ri.prototype.intersects=function(t,n){return this.locate(t,n)!==lt.EXTERIOR};Ri.prototype.updateLocationInfo=function(t){t===lt.INTERIOR&&(this._isIn=!0),t===lt.BOUNDARY&&this._numBoundaries++};Ri.prototype.computeLocation=function(t,n){var r=this;if(n instanceof jr&&this.updateLocationInfo(this.locateInternal(t,n)),n instanceof mn)this.updateLocationInfo(this.locateInternal(t,n));else if(n instanceof Rn)this.updateLocationInfo(this.locateInternal(t,n));else if(n instanceof pa)for(var i=n,o=0;o<i.getNumGeometries();o++){var u=i.getGeometryN(o);r.updateLocationInfo(r.locateInternal(t,u))}else if(n instanceof Es)for(var f=n,d=0;d<f.getNumGeometries();d++){var _=f.getGeometryN(d);r.updateLocationInfo(r.locateInternal(t,_))}else if(n instanceof mr)for(var y=new Ls(n);y.hasNext();){var E=y.next();E!==n&&r.computeLocation(t,E)}};Ri.prototype.locate=function(t,n){return n.isEmpty()?lt.EXTERIOR:n instanceof mn?this.locateInternal(t,n):n instanceof Rn?this.locateInternal(t,n):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,n),this._boundaryRule.isInBoundary(this._numBoundaries)?lt.BOUNDARY:this._numBoundaries>0||this._isIn?lt.INTERIOR:lt.EXTERIOR)};Ri.prototype.interfaces_=function(){return[]};Ri.prototype.getClass=function(){return Ri};var pr=function e(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var t=arguments[0],n=arguments[1];e.call(this,t,e.INSIDE_AREA,n)}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Av={INSIDE_AREA:{configurable:!0}};pr.prototype.isInsideArea=function(){return this._segIndex===pr.INSIDE_AREA};pr.prototype.getCoordinate=function(){return this._pt};pr.prototype.getGeometryComponent=function(){return this._component};pr.prototype.getSegmentIndex=function(){return this._segIndex};pr.prototype.interfaces_=function(){return[]};pr.prototype.getClass=function(){return pr};Av.INSIDE_AREA.get=function(){return-1};Object.defineProperties(pr,Av);var To=function(t){this._pts=t||null};To.prototype.filter=function(t){t instanceof jr&&this._pts.add(t)};To.prototype.interfaces_=function(){return[rs]};To.prototype.getClass=function(){return To};To.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof jr?ki.singletonList(t):To.getPoints(t,new Ot)}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n instanceof jr?r.add(n):n instanceof mr&&n.apply(new To(r)),r}};var ou=function(){this._locations=null;var t=arguments[0];this._locations=t};ou.prototype.filter=function(t){(t instanceof jr||t instanceof mn||t instanceof Rn)&&this._locations.add(new pr(t,0,t.getCoordinate()))};ou.prototype.interfaces_=function(){return[rs]};ou.prototype.getClass=function(){return ou};ou.getLocations=function(t){var n=new Ot;return t.apply(new ou(n)),n};var Jn=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ri,this._minDistanceLocation=null,this._minDistance=ue.MAX_VALUE,arguments.length===2){var t=arguments[0],n=arguments[1];this._geom=[t,n],this._terminateDistance=0}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=i,this._terminateDistance=o}};Jn.prototype.computeContainmentDistance=function(){var t=this;if(arguments.length===0){var n=new Array(2).fill(null);if(this.computeContainmentDistance(0,n),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,n)}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=1-r,u=to.getPolygons(this._geom[r]);if(u.size()>0){var f=ou.getLocations(this._geom[o]);if(this.computeContainmentDistance(f,u,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[o]=i[0],this._minDistanceLocation[r]=i[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&se(arguments[0],Ii)&&se(arguments[1],Ii)){for(var d=arguments[0],_=arguments[1],y=arguments[2],E=0;E<d.size();E++)for(var S=d.get(E),T=0;T<_.size();T++)if(t.computeContainmentDistance(S,_.get(T),y),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof pr&&arguments[1]instanceof Rn){var I=arguments[0],z=arguments[1],G=arguments[2],Q=I.getCoordinate();if(lt.EXTERIOR!==this._ptLocator.locate(Q,z))return this._minDistance=0,G[0]=I,G[1]=new pr(z,Q),null}}};Jn.prototype.computeMinDistanceLinesPoints=function(t,n,r){for(var i=this,o=0;o<t.size();o++)for(var u=t.get(o),f=0;f<n.size();f++){var d=n.get(f);if(i.computeMinDistance(u,d,r),i._minDistance<=i._terminateDistance)return null}};Jn.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),n=Zn.getLines(this._geom[0]),r=Zn.getLines(this._geom[1]),i=To.getPoints(this._geom[0]),o=To.getPoints(this._geom[1]);if(this.computeMinDistanceLines(n,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,o,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance)||(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(r,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance))return null;t[0]=null,t[1]=null,this.computeMinDistancePoints(i,o,t),this.updateMinDistance(t,!1)};Jn.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation};Jn.prototype.updateMinDistance=function(t,n){if(t[0]===null)return null;n?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])};Jn.prototype.nearestPoints=function(){this.computeMinDistance();var t=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return t};Jn.prototype.computeMinDistance=function(){var t=this;if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof mn&&arguments[1]instanceof jr){var n=arguments[0],r=arguments[1],i=arguments[2];if(n.getEnvelopeInternal().distance(r.getEnvelopeInternal())>this._minDistance)return null;for(var o=n.getCoordinates(),u=r.getCoordinate(),f=0;f<o.length-1;f++){var d=Gt.distancePointLine(u,o[f],o[f+1]);if(d<t._minDistance){t._minDistance=d;var _=new Qt(o[f],o[f+1]),y=_.closestPoint(u);i[0]=new pr(n,f,y),i[1]=new pr(r,0,u)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof mn&&arguments[1]instanceof mn){var E=arguments[0],S=arguments[1],T=arguments[2];if(E.getEnvelopeInternal().distance(S.getEnvelopeInternal())>this._minDistance)return null;for(var I=E.getCoordinates(),z=S.getCoordinates(),G=0;G<I.length-1;G++)for(var Q=0;Q<z.length-1;Q++){var $=Gt.distanceLineLine(I[G],I[G+1],z[Q],z[Q+1]);if($<t._minDistance){t._minDistance=$;var rt=new Qt(I[G],I[G+1]),mt=new Qt(z[Q],z[Q+1]),bt=rt.closestPoints(mt);T[0]=new pr(E,G,bt[0]),T[1]=new pr(S,Q,bt[1])}if(t._minDistance<=t._terminateDistance)return null}}}};Jn.prototype.computeMinDistancePoints=function(t,n,r){for(var i=this,o=0;o<t.size();o++)for(var u=t.get(o),f=0;f<n.size();f++){var d=n.get(f),_=u.getCoordinate().distance(d.getCoordinate());if(_<i._minDistance&&(i._minDistance=_,r[0]=new pr(u,0,u.getCoordinate()),r[1]=new pr(d,0,d.getCoordinate())),i._minDistance<=i._terminateDistance)return null}};Jn.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new ln("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)};Jn.prototype.computeMinDistanceLines=function(t,n,r){for(var i=this,o=0;o<t.size();o++)for(var u=t.get(o),f=0;f<n.size();f++){var d=n.get(f);if(i.computeMinDistance(u,d,r),i._minDistance<=i._terminateDistance)return null}};Jn.prototype.interfaces_=function(){return[]};Jn.prototype.getClass=function(){return Jn};Jn.distance=function(t,n){var r=new Jn(t,n);return r.distance()};Jn.isWithinDistance=function(t,n,r){var i=new Jn(t,n,r);return i.distance()<=r};Jn.nearestPoints=function(t,n){var r=new Jn(t,n);return r.nearestPoints()};var rr=function(){this._pt=[new it,new it],this._distance=ue.NaN,this._isNull=!0};rr.prototype.getCoordinates=function(){return this._pt};rr.prototype.getCoordinate=function(t){return this._pt[t]};rr.prototype.setMinimum=function(){if(arguments.length===1){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i<this._distance&&this.initialize(n,r,i)}};rr.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var t=arguments[0],n=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(n),this._distance=t.distance(n),this._isNull=!1}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._pt[0].setCoordinate(r),this._pt[1].setCoordinate(i),this._distance=o,this._isNull=!1}};rr.prototype.toString=function(){return Ti.toLineString(this._pt[0],this._pt[1])};rr.prototype.getDistance=function(){return this._distance};rr.prototype.setMaximum=function(){if(arguments.length===1){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this._isNull)return this.initialize(n,r),null;var i=n.distance(r);i>this._distance&&this.initialize(n,r,i)}};rr.prototype.interfaces_=function(){return[]};rr.prototype.getClass=function(){return rr};var Ji=function(){};Ji.prototype.interfaces_=function(){return[]};Ji.prototype.getClass=function(){return Ji};Ji.computeDistance=function(){if(arguments[2]instanceof rr&&arguments[0]instanceof mn&&arguments[1]instanceof it)for(var t=arguments[0],n=arguments[1],r=arguments[2],i=new Qt,o=t.getCoordinates(),u=0;u<o.length-1;u++){i.setCoordinates(o[u],o[u+1]);var f=i.closestPoint(n);r.setMinimum(f,n)}else if(arguments[2]instanceof rr&&arguments[0]instanceof Rn&&arguments[1]instanceof it){var d=arguments[0],_=arguments[1],y=arguments[2];Ji.computeDistance(d.getExteriorRing(),_,y);for(var E=0;E<d.getNumInteriorRing();E++)Ji.computeDistance(d.getInteriorRingN(E),_,y)}else if(arguments[2]instanceof rr&&arguments[0]instanceof ie&&arguments[1]instanceof it){var S=arguments[0],T=arguments[1],I=arguments[2];if(S instanceof mn)Ji.computeDistance(S,T,I);else if(S instanceof Rn)Ji.computeDistance(S,T,I);else if(S instanceof mr)for(var z=S,G=0;G<z.getNumGeometries();G++){var Q=z.getGeometryN(G);Ji.computeDistance(Q,T,I)}else I.setMinimum(S.getCoordinate(),T)}else if(arguments[2]instanceof rr&&arguments[0]instanceof Qt&&arguments[1]instanceof it){var $=arguments[0],rt=arguments[1],mt=arguments[2],bt=$.closestPoint(rt);mt.setMinimum(bt,rt)}};var gi=function(){this._g0=null,this._g1=null,this._ptDist=new rr,this._densifyFrac=0;var t=arguments[0],n=arguments[1];this._g0=t,this._g1=n},em={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};gi.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()};gi.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new ln("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t};gi.prototype.compute=function(t,n){this.computeOrientedDistance(t,n,this._ptDist),this.computeOrientedDistance(n,t,this._ptDist)};gi.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()};gi.prototype.computeOrientedDistance=function(t,n,r){var i=new au(n);if(t.apply(i),r.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var o=new Fo(n,this._densifyFrac);t.apply(o),r.setMaximum(o.getMaxPointDistance())}};gi.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()};gi.prototype.interfaces_=function(){return[]};gi.prototype.getClass=function(){return gi};gi.distance=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new gi(t,n);return r.distance()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],f=new gi(i,o);return f.setDensifyFraction(u),f.distance()}};em.MaxPointDistanceFilter.get=function(){return au};em.MaxDensifiedByFractionDistanceFilter.get=function(){return Fo};Object.defineProperties(gi,em);var au=function(){this._maxPtDist=new rr,this._minPtDist=new rr,this._euclideanDist=new Ji,this._geom=null;var t=arguments[0];this._geom=t};au.prototype.filter=function(t){this._minPtDist.initialize(),Ji.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)};au.prototype.getMaxPointDistance=function(){return this._maxPtDist};au.prototype.interfaces_=function(){return[bs]};au.prototype.getClass=function(){return au};var Fo=function(){this._maxPtDist=new rr,this._minPtDist=new rr,this._geom=null,this._numSubSegs=0;var t=arguments[0],n=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/n))};Fo.prototype.filter=function(t,n){var r=this;if(n===0)return null;for(var i=t.getCoordinate(n-1),o=t.getCoordinate(n),u=(o.x-i.x)/this._numSubSegs,f=(o.y-i.y)/this._numSubSegs,d=0;d<this._numSubSegs;d++){var _=i.x+d*u,y=i.y+d*f,E=new it(_,y);r._minPtDist.initialize(),Ji.computeDistance(r._geom,E,r._minPtDist),r._maxPtDist.setMaximum(r._minPtDist)}};Fo.prototype.isDone=function(){return!1};Fo.prototype.isGeometryChanged=function(){return!1};Fo.prototype.getMaxPointDistance=function(){return this._maxPtDist};Fo.prototype.interfaces_=function(){return[Ai]};Fo.prototype.getClass=function(){return Fo};var Ur=function(t,n,r){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=n||null,this._result=r||null},nm={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Ur.prototype.checkMaximumDistance=function(t,n,r){var i=new gi(n,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>r){this._isValid=!1;var o=i.getCoordinates();this._errorLocation=o[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Ti.toLineString(o[0],o[1])+")"}};Ur.prototype.isValid=function(){var t=Math.abs(this._bufDistance),n=Ur.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-n,this._maxValidDistance=t+n,this._input.isEmpty()||this._result.isEmpty()?!0:(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Ur.VERBOSE&&Yn.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)};Ur.prototype.checkNegativeValid=function(){if(!(this._input instanceof Rn||this._input instanceof Es||this._input instanceof mr))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)};Ur.prototype.getErrorIndicator=function(){return this._errorIndicator};Ur.prototype.checkMinimumDistance=function(t,n,r){var i=new Jn(t,n,r);if(this._minDistanceFound=i.distance(),this._minDistanceFound<r){this._isValid=!1;var o=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(o),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Ti.toLineString(o[0],o[1])+" )"}};Ur.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)};Ur.prototype.getErrorLocation=function(){return this._errorLocation};Ur.prototype.getPolygonLines=function(t){for(var n=new Ot,r=new Zn(n),i=to.getPolygons(t),o=i.iterator();o.hasNext();){var u=o.next();u.apply(r)}return t.getFactory().buildGeometry(n)};Ur.prototype.getErrorMessage=function(){return this._errMsg};Ur.prototype.interfaces_=function(){return[]};Ur.prototype.getClass=function(){return Ur};nm.VERBOSE.get=function(){return!1};nm.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Ur,nm);var Qn=function(t,n,r){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=n||null,this._result=r||null},rm={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Qn.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid};Qn.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Qn.MAX_ENV_DIFF_FRAC;t===0&&(t=.001);var n=new Jt(this._input.getEnvelopeInternal());n.expandBy(this._distance);var r=new Jt(this._result.getEnvelopeInternal());r.expandBy(t),r.contains(n)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(r)),this.report("Envelope")};Qn.prototype.checkDistance=function(){var t=new Ur(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")};Qn.prototype.checkArea=function(){var t=this._input.getArea(),n=this._result.getArea();this._distance>0&&t>n&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<n&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")};Qn.prototype.checkPolygonal=function(){this._result instanceof Rn||this._result instanceof Es||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")};Qn.prototype.getErrorIndicator=function(){return this._errorIndicator};Qn.prototype.getErrorLocation=function(){return this._errorLocation};Qn.prototype.checkExpectedEmpty=function(){if(this._input.getDimension()>=2||this._distance>0)return null;this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),this.report("ExpectedEmpty")};Qn.prototype.report=function(t){if(!Qn.VERBOSE)return null;Yn.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))};Qn.prototype.getErrorMessage=function(){return this._errorMsg};Qn.prototype.interfaces_=function(){return[]};Qn.prototype.getClass=function(){return Qn};Qn.isValidMsg=function(t,n,r){var i=new Qn(t,n,r);return i.isValid()?null:i.getErrorMessage()};Qn.isValid=function(t,n,r){var i=new Qn(t,n,r);return!!i.isValid()};rm.VERBOSE.get=function(){return!1};rm.MAX_ENV_DIFF_FRAC.get=function(){return .012};Object.defineProperties(Qn,rm);var ls=function(){this._pts=null,this._data=null;var t=arguments[0],n=arguments[1];this._pts=t,this._data=n};ls.prototype.getCoordinates=function(){return this._pts};ls.prototype.size=function(){return this._pts.length};ls.prototype.getCoordinate=function(t){return this._pts[t]};ls.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])};ls.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:nu.octant(this.getCoordinate(t),this.getCoordinate(t+1))};ls.prototype.setData=function(t){this._data=t};ls.prototype.getData=function(){return this._data};ls.prototype.toString=function(){return Ti.toLineString(new vn(this._pts))};ls.prototype.interfaces_=function(){return[Ms]};ls.prototype.getClass=function(){return ls};var Un=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ot,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Un.prototype.getInteriorIntersection=function(){return this._interiorIntersection};Un.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t};Un.prototype.getIntersectionSegments=function(){return this._intSegments};Un.prototype.count=function(){return this._intersectionCount};Un.prototype.getIntersections=function(){return this._intersections};Un.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};Un.prototype.setKeepIntersections=function(t){this._keepIntersections=t};Un.prototype.processIntersections=function(t,n,r,i){if(!this._findAllIntersections&&this.hasIntersection()||t===r&&n===i)return null;if(this._isCheckEndSegmentsOnly){var o=this.isEndSegment(t,n)||this.isEndSegment(r,i);if(!o)return null}var u=t.getCoordinates()[n],f=t.getCoordinates()[n+1],d=r.getCoordinates()[i],_=r.getCoordinates()[i+1];this._li.computeIntersection(u,f,d,_),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=u,this._intSegments[1]=f,this._intSegments[2]=d,this._intSegments[3]=_,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)};Un.prototype.isEndSegment=function(t,n){return n===0||n>=t.size()-2};Un.prototype.hasIntersection=function(){return this._interiorIntersection!==null};Un.prototype.isDone=function(){return this._findAllIntersections?!1:this._interiorIntersection!==null};Un.prototype.interfaces_=function(){return[ma]};Un.prototype.getClass=function(){return Un};Un.createAllIntersectionsFinder=function(t){var n=new Un(t);return n.setFindAllIntersections(!0),n};Un.createAnyIntersectionFinder=function(t){return new Un(t)};Un.createIntersectionCounter=function(t){var n=new Un(t);return n.setFindAllIntersections(!0),n.setKeepIntersections(!1),n};var Oi=function(){this._li=new ba,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Oi.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()};Oi.prototype.getIntersections=function(){return this._segInt.getIntersections()};Oi.prototype.isValid=function(){return this.execute(),this._isValid};Oi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t};Oi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Un(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new $g;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null};Oi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new so(this.getErrorMessage(),this._segInt.getInteriorIntersection())};Oi.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Ti.toLineString(t[0],t[1])+" and "+Ti.toLineString(t[2],t[3])};Oi.prototype.interfaces_=function(){return[]};Oi.prototype.getClass=function(){return Oi};Oi.computeIntersections=function(t){var n=new Oi(t);return n.setFindAllIntersections(!0),n.isValid(),n.getIntersections()};var va=function e(){this._nv=null;var t=arguments[0];this._nv=new Oi(e.toSegmentStrings(t))};va.prototype.checkValid=function(){this._nv.checkValid()};va.prototype.interfaces_=function(){return[]};va.prototype.getClass=function(){return va};va.toSegmentStrings=function(t){for(var n=new Ot,r=t.iterator();r.hasNext();){var i=r.next();n.add(new ls(i.getCoordinates(),i))}return n};va.checkValid=function(t){var n=new va(t);n.checkValid()};var uu=function(t){this._mapOp=t};uu.prototype.map=function(t){for(var n=this,r=new Ot,i=0;i<t.getNumGeometries();i++){var o=n._mapOp.map(t.getGeometryN(i));o.isEmpty()||r.add(o)}return t.getFactory().createGeometryCollection(Ee.toGeometryArray(r))};uu.prototype.interfaces_=function(){return[]};uu.prototype.getClass=function(){return uu};uu.map=function(t,n){var r=new uu(n);return r.map(t)};var cs=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ot,this._resultLineList=new Ot;var t=arguments[0],n=arguments[1],r=arguments[2];this._op=t,this._geometryFactory=n,this._ptLocator=r};cs.prototype.collectLines=function(t){for(var n=this,r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next();n.collectLineEdge(i,t,n._lineEdgesList),n.collectBoundaryTouchEdge(i,t,n._lineEdgesList)}};cs.prototype.labelIsolatedLine=function(t,n){var r=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(n));t.getLabel().setLocation(n,r)};cs.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList};cs.prototype.collectLineEdge=function(t,n,r){var i=t.getLabel(),o=t.getEdge();t.isLineEdge()&&!t.isVisited()&&pe.isResultOfOp(i,n)&&!o.isCovered()&&(r.add(o),t.setVisitedEdge(!0))};cs.prototype.findCoveredLineEdges=function(){for(var t=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();r.getEdges().findCoveredLineEdges()}for(var i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){var o=i.next(),u=o.getEdge();if(o.isLineEdge()&&!u.isCoveredSet()){var f=t._op.isCoveredByA(o.getCoordinate());u.setCovered(f)}}};cs.prototype.labelIsolatedLines=function(t){for(var n=this,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getLabel();i.isIsolated()&&(o.isNull(0)?n.labelIsolatedLine(i,0):n.labelIsolatedLine(i,1))}};cs.prototype.buildLines=function(t){for(var n=this,r=this._lineEdgesList.iterator();r.hasNext();){var i=r.next(),o=n._geometryFactory.createLineString(i.getCoordinates());n._resultLineList.add(o),i.setInResult(!0)}};cs.prototype.collectBoundaryTouchEdge=function(t,n,r){var i=t.getLabel();if(t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult())return null;me.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),pe.isResultOfOp(i,n)&&n===pe.INTERSECTION&&(r.add(t.getEdge()),t.setVisitedEdge(!0))};cs.prototype.interfaces_=function(){return[]};cs.prototype.getClass=function(){return cs};var lu=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Ot;var t=arguments[0],n=arguments[1];this._op=t,this._geometryFactory=n};lu.prototype.filterCoveredNodeToPoint=function(t){var n=t.getCoordinate();if(!this._op.isCoveredByLA(n)){var r=this._geometryFactory.createPoint(n);this._resultPointList.add(r)}};lu.prototype.extractNonCoveredResultNodes=function(t){for(var n=this,r=this._op.getGraph().getNodes().iterator();r.hasNext();){var i=r.next();if(!i.isInResult()&&!i.isIncidentEdgeInResult()&&(i.getEdges().getDegree()===0||t===pe.INTERSECTION)){var o=i.getLabel();pe.isResultOfOp(o,t)&&n.filterCoveredNodeToPoint(i)}}};lu.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList};lu.prototype.interfaces_=function(){return[]};lu.prototype.getClass=function(){return lu};var Ir=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Ir.prototype.transformPoint=function(t,n){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))};Ir.prototype.transformPolygon=function(t,n){var r=this,i=!0,o=this.transformLinearRing(t.getExteriorRing(),t);(o===null||!(o instanceof ws)||o.isEmpty())&&(i=!1);for(var u=new Ot,f=0;f<t.getNumInteriorRing();f++){var d=r.transformLinearRing(t.getInteriorRingN(f),t);d===null||d.isEmpty()||(d instanceof ws||(i=!1),u.add(d))}if(i)return this._factory.createPolygon(o,u.toArray([]));var _=new Ot;return o!==null&&_.add(o),_.addAll(u),this._factory.buildGeometry(_)};Ir.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)};Ir.prototype.getInputGeometry=function(){return this._inputGeom};Ir.prototype.transformMultiLineString=function(t,n){for(var r=this,i=new Ot,o=0;o<t.getNumGeometries();o++){var u=r.transformLineString(t.getGeometryN(o),t);u!==null&&(u.isEmpty()||i.add(u))}return this._factory.buildGeometry(i)};Ir.prototype.transformCoordinates=function(t,n){return this.copy(t)};Ir.prototype.transformLineString=function(t,n){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))};Ir.prototype.transformMultiPoint=function(t,n){for(var r=this,i=new Ot,o=0;o<t.getNumGeometries();o++){var u=r.transformPoint(t.getGeometryN(o),t);u!==null&&(u.isEmpty()||i.add(u))}return this._factory.buildGeometry(i)};Ir.prototype.transformMultiPolygon=function(t,n){for(var r=this,i=new Ot,o=0;o<t.getNumGeometries();o++){var u=r.transformPolygon(t.getGeometryN(o),t);u!==null&&(u.isEmpty()||i.add(u))}return this._factory.buildGeometry(i)};Ir.prototype.copy=function(t){return t.copy()};Ir.prototype.transformGeometryCollection=function(t,n){for(var r=this,i=new Ot,o=0;o<t.getNumGeometries();o++){var u=r.transform(t.getGeometryN(o));u!==null&&(r._pruneEmptyGeometry&&u.isEmpty()||i.add(u))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Ee.toGeometryArray(i)):this._factory.buildGeometry(i)};Ir.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof jr)return this.transformPoint(t,null);if(t instanceof pl)return this.transformMultiPoint(t,null);if(t instanceof ws)return this.transformLinearRing(t,null);if(t instanceof mn)return this.transformLineString(t,null);if(t instanceof pa)return this.transformMultiLineString(t,null);if(t instanceof Rn)return this.transformPolygon(t,null);if(t instanceof Es)return this.transformMultiPolygon(t,null);if(t instanceof mr)return this.transformGeometryCollection(t,null);throw new ln("Unknown Geometry subtype: "+t.getClass().getName())};Ir.prototype.transformLinearRing=function(t,n){var r=this.transformCoordinates(t.getCoordinateSequence(),t);if(r===null)return this._factory.createLinearRing(null);var i=r.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(r):this._factory.createLinearRing(r)};Ir.prototype.interfaces_=function(){return[]};Ir.prototype.getClass=function(){return Ir};var Ts=function e(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Qt,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof mn&&typeof arguments[1]=="number"){var t=arguments[0],n=arguments[1];e.call(this,t.getCoordinates(),n)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=e.isClosed(r),this._snapTolerance=i}};Ts.prototype.snapVertices=function(t,n){for(var r=this,i=this._isClosed?t.size()-1:t.size(),o=0;o<i;o++){var u=t.get(o),f=r.findSnapForVertex(u,n);f!==null&&(t.set(o,new it(f)),o===0&&r._isClosed&&t.set(t.size()-1,new it(f)))}};Ts.prototype.findSnapForVertex=function(t,n){for(var r=this,i=0;i<n.length;i++){if(t.equals2D(n[i]))return null;if(t.distance(n[i])<r._snapTolerance)return n[i]}return null};Ts.prototype.snapTo=function(t){var n=new ah(this._srcPts);this.snapVertices(n,t),this.snapSegments(n,t);var r=n.toCoordinateArray();return r};Ts.prototype.snapSegments=function(t,n){var r=this;if(n.length===0)return null;var i=n.length;n[0].equals2D(n[n.length-1])&&(i=n.length-1);for(var o=0;o<i;o++){var u=n[o],f=r.findSegmentIndexToSnap(u,t);f>=0&&t.add(f+1,new it(u),!1)}};Ts.prototype.findSegmentIndexToSnap=function(t,n){for(var r=this,i=ue.MAX_VALUE,o=-1,u=0;u<n.size()-1;u++){if(r._seg.p0=n.get(u),r._seg.p1=n.get(u+1),r._seg.p0.equals2D(t)||r._seg.p1.equals2D(t)){if(r._allowSnappingToSourceVertices)continue;return-1}var f=r._seg.distance(t);f<r._snapTolerance&&f<i&&(i=f,o=u)}return o};Ts.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t};Ts.prototype.interfaces_=function(){return[]};Ts.prototype.getClass=function(){return Ts};Ts.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])};var Cn=function(t){this._srcGeom=t||null},Dv={SNAP_PRECISION_FACTOR:{configurable:!0}};Cn.prototype.snapTo=function(t,n){var r=this.extractTargetCoordinates(t),i=new kv(n,r);return i.transform(this._srcGeom)};Cn.prototype.snapToSelf=function(t,n){var r=this.extractTargetCoordinates(this._srcGeom),i=new kv(t,r,!0),o=i.transform(this._srcGeom),u=o;return n&&se(u,Do)&&(u=o.buffer(0)),u};Cn.prototype.computeSnapTolerance=function(t){var n=this.computeMinimumSegmentLength(t),r=n/10;return r};Cn.prototype.extractTargetCoordinates=function(t){for(var n=new ns,r=t.getCoordinates(),i=0;i<r.length;i++)n.add(r[i]);return n.toArray(new Array(0).fill(null))};Cn.prototype.computeMinimumSegmentLength=function(t){for(var n=ue.MAX_VALUE,r=0;r<t.length-1;r++){var i=t[r].distance(t[r+1]);i<n&&(n=i)}return n};Cn.prototype.interfaces_=function(){return[]};Cn.prototype.getClass=function(){return Cn};Cn.snap=function(t,n,r){var i=new Array(2).fill(null),o=new Cn(t);i[0]=o.snapTo(n,r);var u=new Cn(n);return i[1]=u.snapTo(i[0],r),i};Cn.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],n=Cn.computeSizeBasedSnapTolerance(t),r=t.getPrecisionModel();if(r.getType()===Oe.FIXED){var i=1/r.getScale()*2/1.415;i>n&&(n=i)}return n}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return Math.min(Cn.computeOverlaySnapTolerance(o),Cn.computeOverlaySnapTolerance(u))}};Cn.computeSizeBasedSnapTolerance=function(t){var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth()),i=r*Cn.SNAP_PRECISION_FACTOR;return i};Cn.snapToSelf=function(t,n,r){var i=new Cn(t);return i.snapToSelf(n,r)};Dv.SNAP_PRECISION_FACTOR.get=function(){return 1e-9};Object.defineProperties(Cn,Dv);var kv=function(e){function t(n,r,i){e.call(this),this._snapTolerance=n||null,this._snapPts=r||null,this._isSelfSnap=i!==void 0?i:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.snapLine=function(r,i){var o=new Ts(r,this._snapTolerance);return o.setAllowSnappingToSourceVertices(this._isSelfSnap),o.snapTo(i)},t.prototype.transformCoordinates=function(r,i){var o=r.toCoordinateArray(),u=this.snapLine(o,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(u)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ir),hr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};hr.prototype.getCommon=function(){return ue.longBitsToDouble(this._commonBits)};hr.prototype.add=function(t){var n=ue.doubleToLongBits(t);if(this._isFirst)return this._commonBits=n,this._commonSignExp=hr.signExpBits(this._commonBits),this._isFirst=!1,null;var r=hr.signExpBits(n);if(r!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=hr.numCommonMostSigMantissaBits(this._commonBits,n),this._commonBits=hr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))};hr.prototype.toString=function(){if(arguments.length===1){var t=arguments[0],n=ue.longBitsToDouble(t),r=ue.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+r,o=i.substring(i.length-64),u=o.substring(0,1)+"  "+o.substring(1,12)+"(exp) "+o.substring(12)+" [ "+n+" ]";return u}};hr.prototype.interfaces_=function(){return[]};hr.prototype.getClass=function(){return hr};hr.getBit=function(t,n){var r=1<<n;return t&r?1:0};hr.signExpBits=function(t){return t>>52};hr.zeroLowerBits=function(t,n){var r=(1<<n)-1,i=~r,o=t&i;return o};hr.numCommonMostSigMantissaBits=function(t,n){for(var r=0,i=52;i>=0;i--){if(hr.getBit(t,i)!==hr.getBit(n,i))return r;r++}return 52};var zo=function(){this._commonCoord=null,this._ccFilter=new cu},im={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};zo.prototype.addCommonBits=function(t){var n=new Go(this._commonCoord);t.apply(n),t.geometryChanged()};zo.prototype.removeCommonBits=function(t){if(this._commonCoord.x===0&&this._commonCoord.y===0)return t;var n=new it(this._commonCoord);n.x=-n.x,n.y=-n.y;var r=new Go(n);return t.apply(r),t.geometryChanged(),t};zo.prototype.getCommonCoordinate=function(){return this._commonCoord};zo.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()};zo.prototype.interfaces_=function(){return[]};zo.prototype.getClass=function(){return zo};im.CommonCoordinateFilter.get=function(){return cu};im.Translater.get=function(){return Go};Object.defineProperties(zo,im);var cu=function(){this._commonBitsX=new hr,this._commonBitsY=new hr};cu.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)};cu.prototype.getCommonCoordinate=function(){return new it(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())};cu.prototype.interfaces_=function(){return[bs]};cu.prototype.getClass=function(){return cu};var Go=function(){this.trans=null;var t=arguments[0];this.trans=t};Go.prototype.filter=function(t,n){var r=t.getOrdinate(n,0)+this.trans.x,i=t.getOrdinate(n,1)+this.trans.y;t.setOrdinate(n,0,r),t.setOrdinate(n,1,i)};Go.prototype.isDone=function(){return!1};Go.prototype.isGeometryChanged=function(){return!0};Go.prototype.interfaces_=function(){return[Ai]};Go.prototype.getClass=function(){return Go};var Vn=function(t,n){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=n,this.computeSnapTolerance()};Vn.prototype.selfSnap=function(t){var n=new Cn(t),r=n.snapTo(t,this._snapTolerance);return r};Vn.prototype.removeCommonBits=function(t){this._cbr=new zo,this._cbr.add(t[0]),this._cbr.add(t[1]);var n=new Array(2).fill(null);return n[0]=this._cbr.removeCommonBits(t[0].copy()),n[1]=this._cbr.removeCommonBits(t[1].copy()),n};Vn.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t};Vn.prototype.getResultGeometry=function(t){var n=this.snap(this._geom),r=pe.overlayOp(n[0],n[1],t);return this.prepareResult(r)};Vn.prototype.checkValid=function(t){t.isValid()||Yn.out.println("Snapped geometry is invalid")};Vn.prototype.computeSnapTolerance=function(){this._snapTolerance=Cn.computeOverlaySnapTolerance(this._geom[0],this._geom[1])};Vn.prototype.snap=function(t){var n=this.removeCommonBits(t),r=Cn.snap(n[0],n[1],this._snapTolerance);return r};Vn.prototype.interfaces_=function(){return[]};Vn.prototype.getClass=function(){return Vn};Vn.overlayOp=function(t,n,r){var i=new Vn(t,n);return i.getResultGeometry(r)};Vn.union=function(t,n){return Vn.overlayOp(t,n,pe.UNION)};Vn.intersection=function(t,n){return Vn.overlayOp(t,n,pe.INTERSECTION)};Vn.symDifference=function(t,n){return Vn.overlayOp(t,n,pe.SYMDIFFERENCE)};Vn.difference=function(t,n){return Vn.overlayOp(t,n,pe.DIFFERENCE)};var vr=function(t,n){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=n};vr.prototype.getResultGeometry=function(t){var n=null,r=!1,i=null;try{n=pe.overlayOp(this._geom[0],this._geom[1],t);var o=!0;o&&(r=!0)}catch(u){if(u instanceof ro)i=u;else throw u}finally{}if(!r)try{n=Vn.overlayOp(this._geom[0],this._geom[1],t)}catch(u){throw u instanceof ro?i:u}finally{}return n};vr.prototype.interfaces_=function(){return[]};vr.prototype.getClass=function(){return vr};vr.overlayOp=function(t,n,r){var i=new vr(t,n);return i.getResultGeometry(r)};vr.union=function(t,n){return vr.overlayOp(t,n,pe.UNION)};vr.intersection=function(t,n){return vr.overlayOp(t,n,pe.INTERSECTION)};vr.symDifference=function(t,n){return vr.overlayOp(t,n,pe.SYMDIFFERENCE)};vr.difference=function(t,n){return vr.overlayOp(t,n,pe.DIFFERENCE)};var Wc=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],n=arguments[1];this.mce=t,this.chainIndex=n};Wc.prototype.computeIntersections=function(t,n){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,n)};Wc.prototype.interfaces_=function(){return[]};Wc.prototype.getClass=function(){return Wc};var Zr=function e(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var t=arguments[0],n=arguments[1];this._eventType=e.DELETE,this._xValue=t,this._insertEvent=n}else if(arguments.length===3){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=e.INSERT,this._label=r,this._xValue=i,this._obj=o}},sm={INSERT:{configurable:!0},DELETE:{configurable:!0}};Zr.prototype.isDelete=function(){return this._eventType===Zr.DELETE};Zr.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t};Zr.prototype.getObject=function(){return this._obj};Zr.prototype.compareTo=function(t){var n=t;return this._xValue<n._xValue?-1:this._xValue>n._xValue?1:this._eventType<n._eventType?-1:this._eventType>n._eventType?1:0};Zr.prototype.getInsertEvent=function(){return this._insertEvent};Zr.prototype.isInsert=function(){return this._eventType===Zr.INSERT};Zr.prototype.isSameLabel=function(t){return this._label===null?!1:this._label===t._label};Zr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex};Zr.prototype.interfaces_=function(){return[vi]};Zr.prototype.getClass=function(){return Zr};sm.INSERT.get=function(){return 1};sm.DELETE.get=function(){return 2};Object.defineProperties(Zr,sm);var Uf=function(){};Uf.prototype.interfaces_=function(){return[]};Uf.prototype.getClass=function(){return Uf};var $n=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._li=t,this._includeProper=n,this._recordIsolated=r};$n.prototype.isTrivialIntersection=function(t,n,r,i){if(t===r&&this._li.getIntersectionNum()===1){if($n.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var o=t.getNumPoints()-1;if(n===0&&i===o||i===0&&n===o)return!0}}return!1};$n.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint};$n.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t};$n.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior};$n.prototype.isBoundaryPointInternal=function(t,n){for(var r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinate();if(t.isIntersection(o))return!0}return!1};$n.prototype.hasProperIntersection=function(){return this._hasProper};$n.prototype.hasIntersection=function(){return this._hasIntersection};$n.prototype.isDone=function(){return this._isDone};$n.prototype.isBoundaryPoint=function(t,n){return n===null?!1:!!(this.isBoundaryPointInternal(t,n[0])||this.isBoundaryPointInternal(t,n[1]))};$n.prototype.setBoundaryNodes=function(t,n){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=n};$n.prototype.addIntersections=function(t,n,r,i){if(t===r&&n===i)return null;this.numTests++;var o=t.getCoordinates()[n],u=t.getCoordinates()[n+1],f=r.getCoordinates()[i],d=r.getCoordinates()[i+1];this._li.computeIntersection(o,u,f,d),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,n,r,i)||(this._hasIntersection=!0,(this._includeProper||!this._li.isProper())&&(t.addIntersections(this._li,n,0),r.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))};$n.prototype.interfaces_=function(){return[]};$n.prototype.getClass=function(){return $n};$n.isAdjacentSegments=function(t,n){return Math.abs(t-n)===1};var Lw=function(e){function t(){e.call(this),this.events=new Ot,this.nOverlaps=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.prepareEvents=function(){var r=this;ki.sort(this.events);for(var i=0;i<this.events.size();i++){var o=r.events.get(i);o.isDelete()&&o.getInsertEvent().setDeleteEventIndex(i)}},t.prototype.computeIntersections=function(){var r=this;if(arguments.length===1){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var o=0;o<this.events.size();o++){var u=r.events.get(o);if(u.isInsert()&&r.processOverlaps(o,u.getDeleteEventIndex(),u,i),i.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof $n&&se(arguments[0],Ii)&&se(arguments[1],Ii)){var f=arguments[0],d=arguments[1],_=arguments[2];this.addEdges(f,f),this.addEdges(d,d),this.computeIntersections(_)}else if(typeof arguments[2]=="boolean"&&se(arguments[0],Ii)&&arguments[1]instanceof $n){var y=arguments[0],E=arguments[1],S=arguments[2];S?this.addEdges(y,null):this.addEdges(y),this.computeIntersections(E)}}},t.prototype.addEdge=function(r,i){for(var o=this,u=r.getMonotoneChainEdge(),f=u.getStartIndexes(),d=0;d<f.length-1;d++){var _=new Wc(u,d),y=new Zr(i,u.getMinX(d),_);o.events.add(y),o.events.add(new Zr(u.getMaxX(d),y))}},t.prototype.processOverlaps=function(r,i,o,u){for(var f=this,d=o.getObject(),_=r;_<i;_++){var y=f.events.get(_);if(y.isInsert()){var E=y.getObject();o.isSameLabel(y)||(d.computeIntersections(E,u),f.nOverlaps++)}}},t.prototype.addEdges=function(){var r=this;if(arguments.length===1)for(var i=arguments[0],o=i.iterator();o.hasNext();){var u=o.next();r.addEdge(u,u)}else if(arguments.length===2)for(var f=arguments[0],d=arguments[1],_=f.iterator();_.hasNext();){var y=_.next();r.addEdge(y,d)}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Uf),As=function(){this._min=ue.POSITIVE_INFINITY,this._max=ue.NEGATIVE_INFINITY},Nv={NodeComparator:{configurable:!0}};As.prototype.getMin=function(){return this._min};As.prototype.intersects=function(t,n){return!(this._min>n||this._max<t)};As.prototype.getMax=function(){return this._max};As.prototype.toString=function(){return Ti.toLineString(new it(this._min,0),new it(this._max,0))};As.prototype.interfaces_=function(){return[]};As.prototype.getClass=function(){return As};Nv.NodeComparator.get=function(){return Jc};Object.defineProperties(As,Nv);var Jc=function(){};Jc.prototype.compare=function(t,n){var r=t,i=n,o=(r._min+r._max)/2,u=(i._min+i._max)/2;return o<u?-1:o>u?1:0};Jc.prototype.interfaces_=function(){return[ol]};Jc.prototype.getClass=function(){return Jc};var xw=function(e){function t(){e.call(this),this._item=null;var n=arguments[0],r=arguments[1],i=arguments[2];this._min=n,this._max=r,this._item=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.query=function(r,i,o){if(!this.intersects(r,i))return null;o.visitItem(this._item)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(As),bw=function(e){function t(){e.call(this),this._node1=null,this._node2=null;var n=arguments[0],r=arguments[1];this._node1=n,this._node2=r,this.buildExtent(this._node1,this._node2)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.buildExtent=function(r,i){this._min=Math.min(r._min,i._min),this._max=Math.max(r._max,i._max)},t.prototype.query=function(r,i,o){if(!this.intersects(r,i))return null;this._node1!==null&&this._node1.query(r,i,o),this._node2!==null&&this._node2.query(r,i,o)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(As),Ds=function(){this._leaves=new Ot,this._root=null,this._level=0};Ds.prototype.buildTree=function(){var t=this;ki.sort(this._leaves,new As.NodeComparator);for(var n=this._leaves,r=null,i=new Ot;;){if(t.buildLevel(n,i),i.size()===1)return i.get(0);r=n,n=i,i=r}};Ds.prototype.insert=function(t,n,r){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new xw(t,n,r))};Ds.prototype.query=function(t,n,r){this.init(),this._root.query(t,n,r)};Ds.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()};Ds.prototype.printNode=function(t){Yn.out.println(Ti.toLineString(new it(t._min,this._level),new it(t._max,this._level)))};Ds.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()};Ds.prototype.buildLevel=function(t,n){this._level++,n.clear();for(var r=0;r<t.size();r+=2){var i=t.get(r),o=r+1<t.size()?t.get(r):null;if(o===null)n.add(i);else{var u=new bw(t.get(r),t.get(r+1));n.add(u)}}};Ds.prototype.interfaces_=function(){return[]};Ds.prototype.getClass=function(){return Ds};var vl=function(){this._items=new Ot};vl.prototype.visitItem=function(t){this._items.add(t)};vl.prototype.getItems=function(){return this._items};vl.prototype.interfaces_=function(){return[ko]};vl.prototype.getClass=function(){return vl};var Cl=function(){this._index=null;var t=arguments[0];if(!se(t,Do))throw new ln("Argument must be Polygonal");this._index=new Ca(t)},om={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Cl.prototype.locate=function(t){var n=new $i(t),r=new El(n);return this._index.query(t.y,t.y,r),n.getLocation()};Cl.prototype.interfaces_=function(){return[_l]};Cl.prototype.getClass=function(){return Cl};om.SegmentVisitor.get=function(){return El};om.IntervalIndexedGeometry.get=function(){return Ca};Object.defineProperties(Cl,om);var El=function(){this._counter=null;var t=arguments[0];this._counter=t};El.prototype.visitItem=function(t){var n=t;this._counter.countSegment(n.getCoordinate(0),n.getCoordinate(1))};El.prototype.interfaces_=function(){return[ko]};El.prototype.getClass=function(){return El};var Ca=function(){this._index=new Ds;var t=arguments[0];this.init(t)};Ca.prototype.init=function(t){for(var n=this,r=Zn.getLines(t),i=r.iterator();i.hasNext();){var o=i.next(),u=o.getCoordinates();n.addLine(u)}};Ca.prototype.addLine=function(t){for(var n=this,r=1;r<t.length;r++){var i=new Qt(t[r-1],t[r]),o=Math.min(i.p0.y,i.p1.y),u=Math.max(i.p0.y,i.p1.y);n._index.insert(o,u,i)}};Ca.prototype.query=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new vl;return this._index.query(t,n,r),r.getItems()}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];this._index.query(i,o,u)}};Ca.prototype.interfaces_=function(){return[]};Ca.prototype.getClass=function(){return Ca};var yc=function(e){function t(){if(e.call(this),this._parentGeom=null,this._lineEdgeMap=new _v,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ri,arguments.length===2){var n=arguments[0],r=arguments[1],i=mi.OGC_SFS_BOUNDARY_RULE;this._argIndex=n,this._parentGeom=r,this._boundaryNodeRule=i,r!==null&&this.add(r)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2];this._argIndex=o,this._parentGeom=u,this._boundaryNodeRule=f,u!==null&&this.add(u)}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertBoundaryPoint=function(r,i){var o=this._nodes.addNode(i),u=o.getLabel(),f=1,d=lt.NONE;d=u.getLocation(r,At.ON),d===lt.BOUNDARY&&f++;var _=t.determineBoundary(this._boundaryNodeRule,f);u.setLocation(r,_)},t.prototype.computeSelfNodes=function(){if(arguments.length===2){var r=arguments[0],i=arguments[1];return this.computeSelfNodes(r,i,!1)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2],d=new $n(o,!0,!1);d.setIsDoneIfProperInt(f);var _=this.createEdgeSetIntersector(),y=this._parentGeom instanceof ws||this._parentGeom instanceof Rn||this._parentGeom instanceof Es,E=u||!y;return _.computeIntersections(this._edges,d,E),this.addSelfIntersectionNodes(this._argIndex),d}},t.prototype.computeSplitEdges=function(r){for(var i=this._edges.iterator();i.hasNext();){var o=i.next();o.eiList.addSplitEdges(r)}},t.prototype.computeEdgeIntersections=function(r,i,o){var u=new $n(i,o,!0);u.setBoundaryNodes(this.getBoundaryNodes(),r.getBoundaryNodes());var f=this.createEdgeSetIntersector();return f.computeIntersections(this._edges,r._edges,u),u},t.prototype.getGeometry=function(){return this._parentGeom},t.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},t.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},t.prototype.addPoint=function(){if(arguments[0]instanceof jr){var r=arguments[0],i=r.getCoordinate();this.insertPoint(this._argIndex,i,lt.INTERIOR)}else if(arguments[0]instanceof it){var o=arguments[0];this.insertPoint(this._argIndex,o,lt.INTERIOR)}},t.prototype.addPolygon=function(r){var i=this;this.addPolygonRing(r.getExteriorRing(),lt.EXTERIOR,lt.INTERIOR);for(var o=0;o<r.getNumInteriorRing();o++){var u=r.getInteriorRingN(o);i.addPolygonRing(u,lt.INTERIOR,lt.EXTERIOR)}},t.prototype.addEdge=function(r){this.insertEdge(r);var i=r.getCoordinates();this.insertPoint(this._argIndex,i[0],lt.BOUNDARY),this.insertPoint(this._argIndex,i[i.length-1],lt.BOUNDARY)},t.prototype.addLineString=function(r){var i=Le.removeRepeatedPoints(r.getCoordinates());if(i.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var o=new Gf(i,new Ve(this._argIndex,lt.INTERIOR));this._lineEdgeMap.put(r,o),this.insertEdge(o),me.isTrue(i.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,i[0]),this.insertBoundaryPoint(this._argIndex,i[i.length-1])},t.prototype.getInvalidPoint=function(){return this._invalidPoint},t.prototype.getBoundaryPoints=function(){for(var r=this.getBoundaryNodes(),i=new Array(r.size()).fill(null),o=0,u=r.iterator();u.hasNext();){var f=u.next();i[o++]=f.getCoordinate().copy()}return i},t.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},t.prototype.addSelfIntersectionNode=function(r,i,o){if(this.isBoundaryNode(r,i))return null;o===lt.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(r,i):this.insertPoint(r,i,o)},t.prototype.addPolygonRing=function(r,i,o){if(r.isEmpty())return null;var u=Le.removeRepeatedPoints(r.getCoordinates());if(u.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=u[0],null;var f=i,d=o;Gt.isCCW(u)&&(f=o,d=i);var _=new Gf(u,new Ve(this._argIndex,lt.BOUNDARY,f,d));this._lineEdgeMap.put(r,_),this.insertEdge(_),this.insertPoint(this._argIndex,u[0],lt.BOUNDARY)},t.prototype.insertPoint=function(r,i,o){var u=this._nodes.addNode(i),f=u.getLabel();f===null?u._label=new Ve(r,o):f.setLocation(r,o)},t.prototype.createEdgeSetIntersector=function(){return new Lw},t.prototype.addSelfIntersectionNodes=function(r){for(var i=this,o=this._edges.iterator();o.hasNext();)for(var u=o.next(),f=u.getLabel().getLocation(r),d=u.eiList.iterator();d.hasNext();){var _=d.next();i.addSelfIntersectionNode(r,_.coord,f)}},t.prototype.add=function(){if(arguments.length===1){var r=arguments[0];if(r.isEmpty())return null;if(r instanceof Es&&(this._useBoundaryDeterminationRule=!1),r instanceof Rn)this.addPolygon(r);else if(r instanceof mn)this.addLineString(r);else if(r instanceof jr)this.addPoint(r);else if(r instanceof pl)this.addCollection(r);else if(r instanceof pa)this.addCollection(r);else if(r instanceof Es)this.addCollection(r);else if(r instanceof mr)this.addCollection(r);else throw new Error(r.getClass().getName())}else return e.prototype.add.apply(this,arguments)},t.prototype.addCollection=function(r){for(var i=this,o=0;o<r.getNumGeometries();o++){var u=r.getGeometryN(o);i.add(u)}},t.prototype.locate=function(r){return se(this._parentGeom,Do)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Cl(this._parentGeom)),this._areaPtLocator.locate(r)):this._ptLocator.locate(r,this._parentGeom)},t.prototype.findEdge=function(){if(arguments.length===1){var r=arguments[0];return this._lineEdgeMap.get(r)}else return e.prototype.findEdge.apply(this,arguments)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t.determineBoundary=function(r,i){return r.isInBoundary(i)?lt.BOUNDARY:lt.INTERIOR},t}(fn),Ll=function(){if(this._li=new ba,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new yc(0,t)}else if(arguments.length===2){var n=arguments[0],r=arguments[1],i=mi.OGC_SFS_BOUNDARY_RULE;n.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(n.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new yc(0,n,i),this._arg[1]=new yc(1,r,i)}else if(arguments.length===3){var o=arguments[0],u=arguments[1],f=arguments[2];o.getPrecisionModel().compareTo(u.getPrecisionModel())>=0?this.setComputationPrecision(o.getPrecisionModel()):this.setComputationPrecision(u.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new yc(0,o,f),this._arg[1]=new yc(1,u,f)}};Ll.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()};Ll.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)};Ll.prototype.interfaces_=function(){return[]};Ll.prototype.getClass=function(){return Ll};var ha=function(){};ha.prototype.interfaces_=function(){return[]};ha.prototype.getClass=function(){return ha};ha.map=function(){if(arguments[0]instanceof ie&&se(arguments[1],ha.MapOp)){for(var t=arguments[0],n=arguments[1],r=new Ot,i=0;i<t.getNumGeometries();i++){var o=n.map(t.getGeometryN(i));o!==null&&r.add(o)}return t.getFactory().buildGeometry(r)}else if(se(arguments[0],An)&&se(arguments[1],ha.MapOp)){for(var u=arguments[0],f=arguments[1],d=new Ot,_=u.iterator();_.hasNext();){var y=_.next(),E=f.map(y);E!==null&&d.add(E)}return d}};ha.MapOp=function(){};var pe=function(e){function t(){var n=arguments[0],r=arguments[1];e.call(this,n,r),this._ptLocator=new Ri,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Ni,this._resultPolyList=new Ot,this._resultLineList=new Ot,this._resultPointList=new Ot,this._graph=new fn(new wv),this._geomFact=n.getFactory()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.insertUniqueEdge=function(r){var i=this._edgeList.findEqualEdge(r);if(i!==null){var o=i.getLabel(),u=r.getLabel();i.isPointwiseEqual(r)||(u=new Ve(r.getLabel()),u.flip());var f=i.getDepth();f.isNull()&&f.add(o),f.add(u),o.merge(u)}else this._edgeList.add(r)},t.prototype.getGraph=function(){return this._graph},t.prototype.cancelDuplicateResultEdges=function(){for(var r=this._graph.getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getSym();i.isInResult()&&o.isInResult()&&(i.setInResult(!1),o.setInResult(!1))}},t.prototype.isCoveredByLA=function(r){return!!(this.isCovered(r,this._resultLineList)||this.isCovered(r,this._resultPolyList))},t.prototype.computeGeometry=function(r,i,o,u){var f=new Ot;return f.addAll(r),f.addAll(i),f.addAll(o),f.isEmpty()?t.createEmptyResult(u,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(f)},t.prototype.mergeSymLabels=function(){for(var r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next();i.getEdges().mergeSymLabels()}},t.prototype.isCovered=function(r,i){for(var o=this,u=i.iterator();u.hasNext();){var f=u.next(),d=o._ptLocator.locate(r,f);if(d!==lt.EXTERIOR)return!0}return!1},t.prototype.replaceCollapsedEdges=function(){for(var r=new Ot,i=this._edgeList.iterator();i.hasNext();){var o=i.next();o.isCollapsed()&&(i.remove(),r.add(o.getCollapsedEdge()))}this._edgeList.addAll(r)},t.prototype.updateNodeLabelling=function(){for(var r=this._graph.getNodes().iterator();r.hasNext();){var i=r.next(),o=i.getEdges().getLabel();i.getLabel().merge(o)}},t.prototype.getResultGeometry=function(r){return this.computeOverlay(r),this._resultGeom},t.prototype.insertUniqueEdges=function(r){for(var i=this,o=r.iterator();o.hasNext();){var u=o.next();i.insertUniqueEdge(u)}},t.prototype.computeOverlay=function(r){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var i=new Ot;this._arg[0].computeSplitEdges(i),this._arg[1].computeSplitEdges(i),this.insertUniqueEdges(i),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),va.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(r),this.cancelDuplicateResultEdges();var o=new qr(this._geomFact);o.add(this._graph),this._resultPolyList=o.getPolygons();var u=new cs(this,this._geomFact,this._ptLocator);this._resultLineList=u.build(r);var f=new lu(this,this._geomFact,this._ptLocator);this._resultPointList=f.build(r),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,r)},t.prototype.labelIncompleteNode=function(r,i){var o=this._ptLocator.locate(r.getCoordinate(),this._arg[i].getGeometry());r.getLabel().setLocation(i,o)},t.prototype.copyPoints=function(r){for(var i=this,o=this._arg[r].getNodeIterator();o.hasNext();){var u=o.next(),f=i._graph.addNode(u.getCoordinate());f.setLabel(r,u.getLabel().getLocation(r))}},t.prototype.findResultAreaEdges=function(r){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var o=i.next(),u=o.getLabel();u.isArea()&&!o.isInteriorAreaEdge()&&t.isResultOfOp(u.getLocation(0,At.RIGHT),u.getLocation(1,At.RIGHT),r)&&o.setInResult(!0)}},t.prototype.computeLabelsFromDepths=function(){for(var r=this._edgeList.iterator();r.hasNext();){var i=r.next(),o=i.getLabel(),u=i.getDepth();if(!u.isNull()){u.normalize();for(var f=0;f<2;f++)!o.isNull(f)&&o.isArea()&&!u.isNull(f)&&(u.getDelta(f)===0?o.toLine(f):(me.isTrue(!u.isNull(f,At.LEFT),"depth of LEFT side has not been initialized"),o.setLocation(f,At.LEFT,u.getLocation(f,At.LEFT)),me.isTrue(!u.isNull(f,At.RIGHT),"depth of RIGHT side has not been initialized"),o.setLocation(f,At.RIGHT,u.getLocation(f,At.RIGHT))))}}},t.prototype.computeLabelling=function(){for(var r=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next();o.getEdges().computeLabelling(r._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},t.prototype.labelIncompleteNodes=function(){for(var r=this,i=this._graph.getNodes().iterator();i.hasNext();){var o=i.next(),u=o.getLabel();o.isIsolated()&&(u.isNull(0)?r.labelIncompleteNode(o,0):r.labelIncompleteNode(o,1)),o.getEdges().updateLabelling(u)}},t.prototype.isCoveredByA=function(r){return!!this.isCovered(r,this._resultPolyList)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},t}(Ll);pe.overlayOp=function(e,t,n){var r=new pe(e,t),i=r.getResultGeometry(n);return i};pe.intersection=function(e,t){if(e.isEmpty()||t.isEmpty())return pe.createEmptyResult(pe.INTERSECTION,e,t,e.getFactory());if(e.isGeometryCollection()){var n=t;return uu.map(e,{interfaces_:function(){return[ha.MapOp]},map:function(r){return r.intersection(n)}})}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),vr.overlayOp(e,t,pe.INTERSECTION)};pe.symDifference=function(e,t){if(e.isEmpty()||t.isEmpty()){if(e.isEmpty()&&t.isEmpty())return pe.createEmptyResult(pe.SYMDIFFERENCE,e,t,e.getFactory());if(e.isEmpty())return t.copy();if(t.isEmpty())return e.copy()}return e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),vr.overlayOp(e,t,pe.SYMDIFFERENCE)};pe.resultDimension=function(e,t,n){var r=t.getDimension(),i=n.getDimension(),o=-1;switch(e){case pe.INTERSECTION:o=Math.min(r,i);break;case pe.UNION:o=Math.max(r,i);break;case pe.DIFFERENCE:o=r;break;case pe.SYMDIFFERENCE:o=Math.max(r,i);break}return o};pe.createEmptyResult=function(e,t,n,r){var i=null;switch(pe.resultDimension(e,t,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon();break}return i};pe.difference=function(e,t){return e.isEmpty()?pe.createEmptyResult(pe.DIFFERENCE,e,t,e.getFactory()):t.isEmpty()?e.copy():(e.checkNotGeometryCollection(e),e.checkNotGeometryCollection(t),vr.overlayOp(e,t,pe.DIFFERENCE))};pe.isResultOfOp=function(){if(arguments.length===2){var e=arguments[0],t=arguments[1],n=e.getLocation(0),r=e.getLocation(1);return pe.isResultOfOp(n,r,t)}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2];switch(i===lt.BOUNDARY&&(i=lt.INTERIOR),o===lt.BOUNDARY&&(o=lt.INTERIOR),u){case pe.INTERSECTION:return i===lt.INTERIOR&&o===lt.INTERIOR;case pe.UNION:return i===lt.INTERIOR||o===lt.INTERIOR;case pe.DIFFERENCE:return i===lt.INTERIOR&&o!==lt.INTERIOR;case pe.SYMDIFFERENCE:return i===lt.INTERIOR&&o!==lt.INTERIOR||i!==lt.INTERIOR&&o===lt.INTERIOR}return!1}};pe.INTERSECTION=1;pe.UNION=2;pe.DIFFERENCE=3;pe.SYMDIFFERENCE=4;var Ao=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ri,this._seg=new Qt;var t=arguments[0],n=arguments[1];this._g=t,this._boundaryDistanceTolerance=n,this._linework=this.extractLinework(t)};Ao.prototype.isWithinToleranceOfBoundary=function(t){for(var n=this,r=0;r<this._linework.getNumGeometries();r++)for(var i=n._linework.getGeometryN(r),o=i.getCoordinateSequence(),u=0;u<o.size()-1;u++){o.getCoordinate(u,n._seg.p0),o.getCoordinate(u+1,n._seg.p1);var f=n._seg.distance(t);if(f<=n._boundaryDistanceTolerance)return!0}return!1};Ao.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?lt.BOUNDARY:this._ptLocator.locate(t,this._g)};Ao.prototype.extractLinework=function(t){var n=new xl;t.apply(n);var r=n.getLinework(),i=Ee.toLineStringArray(r);return t.getFactory().createMultiLineString(i)};Ao.prototype.interfaces_=function(){return[]};Ao.prototype.getClass=function(){return Ao};var xl=function(){this._linework=null,this._linework=new Ot};xl.prototype.getLinework=function(){return this._linework};xl.prototype.filter=function(t){var n=this;if(t instanceof Rn){var r=t;this._linework.add(r.getExteriorRing());for(var i=0;i<r.getNumInteriorRing();i++)n._linework.add(r.getInteriorRingN(i))}};xl.prototype.interfaces_=function(){return[rs]};xl.prototype.getClass=function(){return xl};var Ea=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ea.prototype.extractPoints=function(t,n,r){for(var i=this,o=t.getCoordinates(),u=0;u<o.length-1;u++)i.computeOffsetPoints(o[u],o[u+1],n,r)};Ea.prototype.setSidesToGenerate=function(t,n){this._doLeft=t,this._doRight=n};Ea.prototype.getPoints=function(t){for(var n=this,r=new Ot,i=Zn.getLines(this._g),o=i.iterator();o.hasNext();){var u=o.next();n.extractPoints(u,t,r)}return r};Ea.prototype.computeOffsetPoints=function(t,n,r,i){var o=n.x-t.x,u=n.y-t.y,f=Math.sqrt(o*o+u*u),d=r*o/f,_=r*u/f,y=(n.x+t.x)/2,E=(n.y+t.y)/2;if(this._doLeft){var S=new it(y-_,E+d);i.add(S)}if(this._doRight){var T=new it(y+_,E-d);i.add(T)}};Ea.prototype.interfaces_=function(){return[]};Ea.prototype.getClass=function(){return Ea};var ui=function e(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=e.TOLERANCE,this._testCoords=new Ot;var t=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=e.computeBoundaryDistanceTolerance(t,n),this._geom=[t,n,r],this._locFinder=[new Ao(this._geom[0],this._boundaryDistanceTolerance),new Ao(this._geom[1],this._boundaryDistanceTolerance),new Ao(this._geom[2],this._boundaryDistanceTolerance)]},Rv={TOLERANCE:{configurable:!0}};ui.prototype.reportResult=function(t,n,r){Yn.out.println("Overlay result invalid - A:"+lt.toLocationSymbol(n[0])+" B:"+lt.toLocationSymbol(n[1])+" expected:"+(r?"i":"e")+" actual:"+lt.toLocationSymbol(n[2]))};ui.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var n=this.checkValid(t);return n};ui.prototype.checkValid=function(){var t=this;if(arguments.length===1){for(var n=arguments[0],r=0;r<this._testCoords.size();r++){var i=t._testCoords.get(r);if(!t.checkValid(n,i))return t._invalidLocation=i,!1}return!0}else if(arguments.length===2){var o=arguments[0],u=arguments[1];return this._location[0]=this._locFinder[0].getLocation(u),this._location[1]=this._locFinder[1].getLocation(u),this._location[2]=this._locFinder[2].getLocation(u),ui.hasLocation(this._location,lt.BOUNDARY)?!0:this.isValidResult(o,this._location)}};ui.prototype.addTestPts=function(t){var n=new Ea(t);this._testCoords.addAll(n.getPoints(5*this._boundaryDistanceTolerance))};ui.prototype.isValidResult=function(t,n){var r=pe.isResultOfOp(n[0],n[1],t),i=n[2]===lt.INTERIOR,o=!(r^i);return o||this.reportResult(t,n,r),o};ui.prototype.getInvalidLocation=function(){return this._invalidLocation};ui.prototype.interfaces_=function(){return[]};ui.prototype.getClass=function(){return ui};ui.hasLocation=function(t,n){for(var r=0;r<3;r++)if(t[r]===n)return!0;return!1};ui.computeBoundaryDistanceTolerance=function(t,n){return Math.min(Cn.computeSizeBasedSnapTolerance(t),Cn.computeSizeBasedSnapTolerance(n))};ui.isValid=function(t,n,r,i){var o=new ui(t,n,i);return o.isValid(r)};Rv.TOLERANCE.get=function(){return 1e-6};Object.defineProperties(ui,Rv);var ni=function e(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=e.extractFactory(t),this._inputGeoms=t};ni.prototype.extractElements=function(t,n){var r=this;if(t===null)return null;for(var i=0;i<t.getNumGeometries();i++){var o=t.getGeometryN(i);r._skipEmpty&&o.isEmpty()||n.add(o)}};ni.prototype.combine=function(){for(var t=this,n=new Ot,r=this._inputGeoms.iterator();r.hasNext();){var i=r.next();t.extractElements(i,n)}return n.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(n)};ni.prototype.interfaces_=function(){return[]};ni.prototype.getClass=function(){return ni};ni.combine=function(){if(arguments.length===1){var t=arguments[0],n=new ni(t);return n.combine()}else if(arguments.length===2){var r=arguments[0],i=arguments[1],o=new ni(ni.createList(r,i));return o.combine()}else if(arguments.length===3){var u=arguments[0],f=arguments[1],d=arguments[2],_=new ni(ni.createList(u,f,d));return _.combine()}};ni.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()};ni.createList=function(){if(arguments.length===2){var t=arguments[0],n=arguments[1],r=new Ot;return r.add(t),r.add(n),r}else if(arguments.length===3){var i=arguments[0],o=arguments[1],u=arguments[2],f=new Ot;return f.add(i),f.add(o),f.add(u),f}};var Mn=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,this._inputPolys===null&&(this._inputPolys=new Ot)},Ov={STRTREE_NODE_CAPACITY:{configurable:!0}};Mn.prototype.reduceToGeometries=function(t){for(var n=this,r=new Ot,i=t.iterator();i.hasNext();){var o=i.next(),u=null;se(o,Ii)?u=n.unionTree(o):o instanceof ie&&(u=o),r.add(u)}return r};Mn.prototype.extractByEnvelope=function(t,n,r){for(var i=new Ot,o=0;o<n.getNumGeometries();o++){var u=n.getGeometryN(o);u.getEnvelopeInternal().intersects(t)?i.add(u):r.add(u)}return this._geomFactory.buildGeometry(i)};Mn.prototype.unionOptimized=function(t,n){var r=t.getEnvelopeInternal(),i=n.getEnvelopeInternal();if(!r.intersects(i)){var o=ni.combine(t,n);return o}if(t.getNumGeometries()<=1&&n.getNumGeometries()<=1)return this.unionActual(t,n);var u=r.intersection(i);return this.unionUsingEnvelopeIntersection(t,n,u)};Mn.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Ev(Mn.STRTREE_NODE_CAPACITY),n=this._inputPolys.iterator();n.hasNext();){var r=n.next();t.insert(r.getEnvelopeInternal(),r)}this._inputPolys=null;var i=t.itemsTree(),o=this.unionTree(i);return o};Mn.prototype.binaryUnion=function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}else if(arguments.length===3){var n=arguments[0],r=arguments[1],i=arguments[2];if(i-r<=1){var o=Mn.getGeometry(n,r);return this.unionSafe(o,null)}else{if(i-r===2)return this.unionSafe(Mn.getGeometry(n,r),Mn.getGeometry(n,r+1));var u=Math.trunc((i+r)/2),f=this.binaryUnion(n,r,u),d=this.binaryUnion(n,u,i);return this.unionSafe(f,d)}}};Mn.prototype.repeatedUnion=function(t){for(var n=null,r=t.iterator();r.hasNext();){var i=r.next();n===null?n=i.copy():n=n.union(i)}return n};Mn.prototype.unionSafe=function(t,n){return t===null&&n===null?null:t===null?n.copy():n===null?t.copy():this.unionOptimized(t,n)};Mn.prototype.unionActual=function(t,n){return Mn.restrictToPolygons(t.union(n))};Mn.prototype.unionTree=function(t){var n=this.reduceToGeometries(t),r=this.binaryUnion(n);return r};Mn.prototype.unionUsingEnvelopeIntersection=function(t,n,r){var i=new Ot,o=this.extractByEnvelope(r,t,i),u=this.extractByEnvelope(r,n,i),f=this.unionActual(o,u);i.add(f);var d=ni.combine(i);return d};Mn.prototype.bufferUnion=function(){if(arguments.length===1){var t=arguments[0],n=t.get(0).getFactory(),r=n.buildGeometry(t),i=r.buffer(0);return i}else if(arguments.length===2){var o=arguments[0],u=arguments[1],f=o.getFactory(),d=f.createGeometryCollection([o,u]),_=d.buffer(0);return _}};Mn.prototype.interfaces_=function(){return[]};Mn.prototype.getClass=function(){return Mn};Mn.restrictToPolygons=function(t){if(se(t,Do))return t;var n=to.getPolygons(t);return n.size()===1?n.get(0):t.getFactory().createMultiPolygon(Ee.toPolygonArray(n))};Mn.getGeometry=function(t,n){return n>=t.size()?null:t.get(n)};Mn.union=function(t){var n=new Mn(t);return n.union()};Ov.STRTREE_NODE_CAPACITY.get=function(){return 4};Object.defineProperties(Mn,Ov);var Vf=function(){};Vf.prototype.interfaces_=function(){return[]};Vf.prototype.getClass=function(){return Vf};Vf.union=function(t,n){if(t.isEmpty()||n.isEmpty()){if(t.isEmpty()&&n.isEmpty())return pe.createEmptyResult(pe.UNION,t,n,t.getFactory());if(t.isEmpty())return n.copy();if(n.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(n),vr.overlayOp(t,n,pe.UNION)};function wa(){return new jf}function jf(){this.reset()}jf.prototype={constructor:jf,reset:function(){this.s=this.t=0},add:function(e){z_(rf,e,this.t),z_(this,rf.s,this.s),this.s?this.t+=rf.t:this.s=rf.t},valueOf:function(){return this.s}};var rf=new jf;function z_(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var wn=1e-6,We=Math.PI,Qs=We/2,G_=We/4,uo=We*2,ea=180/We,Yi=We/180,dr=Math.abs,ww=Math.atan,bl=Math.atan2,Dn=Math.cos,kn=Math.sin,Nl=Math.sqrt;function Bv(e){return e>1?0:e<-1?We:Math.acos(e)}function hu(e){return e>1?Qs:e<-1?-Qs:Math.asin(e)}function Ec(){}function qf(e,t){e&&V_.hasOwnProperty(e.type)&&V_[e.type](e,t)}var U_={Feature:function(e,t){qf(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)qf(n[r].geometry,t)}},V_={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){_g(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)_g(n[r],t,0)},Polygon:function(e,t){j_(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)j_(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)qf(n[r],t)}};function _g(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function j_(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)_g(e[n],t,1);t.polygonEnd()}function Sw(e,t){e&&U_.hasOwnProperty(e.type)?U_[e.type](e,t):qf(e,t)}wa();wa();function yg(e){return[bl(e[1],e[0]),hu(e[2])]}function wl(e){var t=e[0],n=e[1],r=Dn(n);return[r*Dn(t),r*kn(t),kn(n)]}function sf(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Hf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function qd(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function of(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function vg(e){var t=Nl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}wa();function Fv(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Cg(e,t){return[e>We?e-uo:e<-We?e+uo:e,t]}Cg.invert=Cg;function Mw(e,t,n){return(e%=uo)?t||n?Fv(H_(e),Z_(t,n)):H_(e):t||n?Z_(t,n):Cg}function q_(e){return function(t,n){return t+=e,[t>We?t-uo:t<-We?t+uo:t,n]}}function H_(e){var t=q_(e);return t.invert=q_(-e),t}function Z_(e,t){var n=Dn(e),r=kn(e),i=Dn(t),o=kn(t);function u(f,d){var _=Dn(d),y=Dn(f)*_,E=kn(f)*_,S=kn(d),T=S*n+y*r;return[bl(E*i-T*o,y*n-S*r),hu(T*i+E*o)]}return u.invert=function(f,d){var _=Dn(d),y=Dn(f)*_,E=kn(f)*_,S=kn(d),T=S*i-E*o;return[bl(E*i+S*o,y*n+T*r),hu(T*n-y*r)]},u}function Pw(e,t,n,r,i,o){if(n){var u=Dn(t),f=kn(t),d=r*n;i==null?(i=t+r*uo,o=t-d/2):(i=K_(u,i),o=K_(u,o),(r>0?i<o:i>o)&&(i+=r*uo));for(var _,y=i;r>0?y>o:y<o;y-=d)_=yg([u,-f*Dn(y),-f*kn(y)]),e.point(_[0],_[1])}}function K_(e,t){t=wl(t),t[0]-=e,vg(t);var n=Bv(-t[1]);return((-t[2]<0?-n:n)+uo-wn)%uo}function zv(){var e=[],t;return{point:function(n,r){t.push([n,r])},lineStart:function(){e.push(t=[])},lineEnd:Ec,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Iw(e,t,n,r,i,o){var u=e[0],f=e[1],d=t[0],_=t[1],y=0,E=1,S=d-u,T=_-f,I;if(I=n-u,!(!S&&I>0)){if(I/=S,S<0){if(I<y)return;I<E&&(E=I)}else if(S>0){if(I>E)return;I>y&&(y=I)}if(I=i-u,!(!S&&I<0)){if(I/=S,S<0){if(I>E)return;I>y&&(y=I)}else if(S>0){if(I<y)return;I<E&&(E=I)}if(I=r-f,!(!T&&I>0)){if(I/=T,T<0){if(I<y)return;I<E&&(E=I)}else if(T>0){if(I>E)return;I>y&&(y=I)}if(I=o-f,!(!T&&I<0)){if(I/=T,T<0){if(I>E)return;I>y&&(y=I)}else if(T>0){if(I<y)return;I<E&&(E=I)}return y>0&&(e[0]=u+y*S,e[1]=f+y*T),E<1&&(t[0]=u+E*S,t[1]=f+E*T),!0}}}}}function Cf(e,t){return dr(e[0]-t[0])<wn&&dr(e[1]-t[1])<wn}function af(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Gv(e,t,n,r,i){var o=[],u=[],f,d;if(e.forEach(function(I){if(!((z=I.length-1)<=0)){var z,G=I[0],Q=I[z],$;if(Cf(G,Q)){for(i.lineStart(),f=0;f<z;++f)i.point((G=I[f])[0],G[1]);i.lineEnd();return}o.push($=new af(G,I,null,!0)),u.push($.o=new af(G,null,$,!1)),o.push($=new af(Q,I,null,!1)),u.push($.o=new af(Q,null,$,!0))}}),!!o.length){for(u.sort(t),X_(o),X_(u),f=0,d=u.length;f<d;++f)u[f].e=n=!n;for(var _=o[0],y,E;;){for(var S=_,T=!0;S.v;)if((S=S.n)===_)return;y=S.z,i.lineStart();do{if(S.v=S.o.v=!0,S.e){if(T)for(f=0,d=y.length;f<d;++f)i.point((E=y[f])[0],E[1]);else r(S.x,S.n.x,1,i);S=S.n}else{if(T)for(y=S.p.z,f=y.length-1;f>=0;--f)i.point((E=y[f])[0],E[1]);else r(S.x,S.p.x,-1,i);S=S.p}S=S.o,y=S.z,T=!T}while(!S.v);i.lineEnd()}}}function X_(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Uv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Tw(e){return e.length===1&&(e=Aw(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function Aw(e){return function(t,n){return Uv(e(t),n)}}Tw(Uv);function Vv(e){for(var t=e.length,n,r=-1,i=0,o,u;++r<t;)i+=e[r].length;for(o=new Array(i);--t>=0;)for(u=e[t],n=u.length;--n>=0;)o[--i]=u[n];return o}var uf=1e9,lf=-1e9;function Dw(e,t,n,r){function i(_,y){return e<=_&&_<=n&&t<=y&&y<=r}function o(_,y,E,S){var T=0,I=0;if(_==null||(T=u(_,E))!==(I=u(y,E))||d(_,y)<0^E>0)do S.point(T===0||T===3?e:n,T>1?r:t);while((T=(T+E+4)%4)!==I);else S.point(y[0],y[1])}function u(_,y){return dr(_[0]-e)<wn?y>0?0:3:dr(_[0]-n)<wn?y>0?2:1:dr(_[1]-t)<wn?y>0?1:0:y>0?3:2}function f(_,y){return d(_.x,y.x)}function d(_,y){var E=u(_,1),S=u(y,1);return E!==S?E-S:E===0?y[1]-_[1]:E===1?_[0]-y[0]:E===2?_[1]-y[1]:y[0]-_[0]}return function(_){var y=_,E=zv(),S,T,I,z,G,Q,$,rt,mt,bt,Dt,Bt={point:Ft,lineStart:ee,lineEnd:Ie,polygonStart:te,polygonEnd:Ht};function Ft(le,jt){i(le,jt)&&y.point(le,jt)}function Nt(){for(var le=0,jt=0,Zt=T.length;jt<Zt;++jt)for(var kt=T[jt],tn=1,Yt=kt.length,de=kt[0],Me,ze,ke=de[0],ye=de[1];tn<Yt;++tn)Me=ke,ze=ye,de=kt[tn],ke=de[0],ye=de[1],ze<=r?ye>r&&(ke-Me)*(r-ze)>(ye-ze)*(e-Me)&&++le:ye<=r&&(ke-Me)*(r-ze)<(ye-ze)*(e-Me)&&--le;return le}function te(){y=E,S=[],T=[],Dt=!0}function Ht(){var le=Nt(),jt=Dt&&le,Zt=(S=Vv(S)).length;(jt||Zt)&&(_.polygonStart(),jt&&(_.lineStart(),o(null,null,1,_),_.lineEnd()),Zt&&Gv(S,f,le,o,_),_.polygonEnd()),y=_,S=T=I=null}function ee(){Bt.point=Rt,T&&T.push(I=[]),bt=!0,mt=!1,$=rt=NaN}function Ie(){S&&(Rt(z,G),Q&&mt&&E.rejoin(),S.push(E.result())),Bt.point=Ft,mt&&y.lineEnd()}function Rt(le,jt){var Zt=i(le,jt);if(T&&I.push([le,jt]),bt)z=le,G=jt,Q=Zt,bt=!1,Zt&&(y.lineStart(),y.point(le,jt));else if(Zt&&mt)y.point(le,jt);else{var kt=[$=Math.max(lf,Math.min(uf,$)),rt=Math.max(lf,Math.min(uf,rt))],tn=[le=Math.max(lf,Math.min(uf,le)),jt=Math.max(lf,Math.min(uf,jt))];Iw(kt,tn,e,t,n,r)?(mt||(y.lineStart(),y.point(kt[0],kt[1])),y.point(tn[0],tn[1]),Zt||y.lineEnd(),Dt=!1):Zt&&(y.lineStart(),y.point(le,jt),Dt=!1)}$=le,rt=jt,mt=Zt}return Bt}}var Hd=wa();function kw(e,t){var n=t[0],r=t[1],i=[kn(n),-Dn(n),0],o=0,u=0;Hd.reset();for(var f=0,d=e.length;f<d;++f)if(y=(_=e[f]).length)for(var _,y,E=_[y-1],S=E[0],T=E[1]/2+G_,I=kn(T),z=Dn(T),G=0;G<y;++G,S=$,I=mt,z=bt,E=Q){var Q=_[G],$=Q[0],rt=Q[1]/2+G_,mt=kn(rt),bt=Dn(rt),Dt=$-S,Bt=Dt>=0?1:-1,Ft=Bt*Dt,Nt=Ft>We,te=I*mt;if(Hd.add(bl(te*Bt*kn(Ft),z*bt+te*Dn(Ft))),o+=Nt?Dt+Bt*uo:Dt,Nt^S>=n^$>=n){var Ht=Hf(wl(E),wl(Q));vg(Ht);var ee=Hf(i,Ht);vg(ee);var Ie=(Nt^Dt>=0?-1:1)*hu(ee[2]);(r>Ie||r===Ie&&(Ht[0]||Ht[1]))&&(u+=Nt^Dt>=0?1:-1)}}return(o<-1e-6||o<wn&&Hd<-1e-6)^u&1}wa();function Y_(e){return e}wa();wa();var Sl=1/0,Zf=Sl,Qc=-Sl,Kf=Qc,W_={point:Nw,lineStart:Ec,lineEnd:Ec,polygonStart:Ec,polygonEnd:Ec,result:function(){var e=[[Sl,Zf],[Qc,Kf]];return Qc=Kf=-(Zf=Sl=1/0),e}};function Nw(e,t){e<Sl&&(Sl=e),e>Qc&&(Qc=e),t<Zf&&(Zf=t),t>Kf&&(Kf=t)}wa();function jv(e,t,n,r){return function(i,o){var u=t(o),f=i.invert(r[0],r[1]),d=zv(),_=t(d),y=!1,E,S,T,I={point:z,lineStart:Q,lineEnd:$,polygonStart:function(){I.point=rt,I.lineStart=mt,I.lineEnd=bt,S=[],E=[]},polygonEnd:function(){I.point=z,I.lineStart=Q,I.lineEnd=$,S=Vv(S);var Dt=kw(E,f);S.length?(y||(o.polygonStart(),y=!0),Gv(S,Ow,Dt,n,o)):Dt&&(y||(o.polygonStart(),y=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),y&&(o.polygonEnd(),y=!1),S=E=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function z(Dt,Bt){var Ft=i(Dt,Bt);e(Dt=Ft[0],Bt=Ft[1])&&o.point(Dt,Bt)}function G(Dt,Bt){var Ft=i(Dt,Bt);u.point(Ft[0],Ft[1])}function Q(){I.point=G,u.lineStart()}function $(){I.point=z,u.lineEnd()}function rt(Dt,Bt){T.push([Dt,Bt]);var Ft=i(Dt,Bt);_.point(Ft[0],Ft[1])}function mt(){_.lineStart(),T=[]}function bt(){rt(T[0][0],T[0][1]),_.lineEnd();var Dt=_.clean(),Bt=d.result(),Ft,Nt=Bt.length,te,Ht,ee;if(T.pop(),E.push(T),T=null,!!Nt){if(Dt&1){if(Ht=Bt[0],(te=Ht.length-1)>0){for(y||(o.polygonStart(),y=!0),o.lineStart(),Ft=0;Ft<te;++Ft)o.point((ee=Ht[Ft])[0],ee[1]);o.lineEnd()}return}Nt>1&&Dt&2&&Bt.push(Bt.pop().concat(Bt.shift())),S.push(Bt.filter(Rw))}}return I}}function Rw(e){return e.length>1}function Ow(e,t){return((e=e.x)[0]<0?e[1]-Qs-wn:Qs-e[1])-((t=t.x)[0]<0?t[1]-Qs-wn:Qs-t[1])}const J_=jv(function(){return!0},Bw,zw,[-We,-Qs]);function Bw(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,u){var f=o>0?We:-We,d=dr(o-t);dr(d-We)<wn?(e.point(t,n=(n+u)/2>0?Qs:-Qs),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),e.point(o,n),i=0):r!==f&&d>=We&&(dr(t-r)<wn&&(t-=r*wn),dr(o-f)<wn&&(o-=f*wn),n=Fw(t,n,o,u),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(f,n),i=0),e.point(t=o,n=u),r=f},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Fw(e,t,n,r){var i,o,u=kn(e-n);return dr(u)>wn?ww((kn(t)*(o=Dn(r))*kn(n)-kn(r)*(i=Dn(t))*kn(e))/(i*o*u)):(t+r)/2}function zw(e,t,n,r){var i;if(e==null)i=n*Qs,r.point(-We,i),r.point(0,i),r.point(We,i),r.point(We,0),r.point(We,-i),r.point(0,-i),r.point(-We,-i),r.point(-We,0),r.point(-We,i);else if(dr(e[0]-t[0])>wn){var o=e[0]<t[0]?We:-We;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Gw(e,t){var n=Dn(e),r=n>0,i=dr(n)>wn;function o(y,E,S,T){Pw(T,e,t,S,y,E)}function u(y,E){return Dn(y)*Dn(E)>n}function f(y){var E,S,T,I,z;return{lineStart:function(){I=T=!1,z=1},point:function(G,Q){var $=[G,Q],rt,mt=u(G,Q),bt=r?mt?0:_(G,Q):mt?_(G+(G<0?We:-We),Q):0;if(!E&&(I=T=mt)&&y.lineStart(),mt!==T&&(rt=d(E,$),(!rt||Cf(E,rt)||Cf($,rt))&&($[0]+=wn,$[1]+=wn,mt=u($[0],$[1]))),mt!==T)z=0,mt?(y.lineStart(),rt=d($,E),y.point(rt[0],rt[1])):(rt=d(E,$),y.point(rt[0],rt[1]),y.lineEnd()),E=rt;else if(i&&E&&r^mt){var Dt;!(bt&S)&&(Dt=d($,E,!0))&&(z=0,r?(y.lineStart(),y.point(Dt[0][0],Dt[0][1]),y.point(Dt[1][0],Dt[1][1]),y.lineEnd()):(y.point(Dt[1][0],Dt[1][1]),y.lineEnd(),y.lineStart(),y.point(Dt[0][0],Dt[0][1])))}mt&&(!E||!Cf(E,$))&&y.point($[0],$[1]),E=$,T=mt,S=bt},lineEnd:function(){T&&y.lineEnd(),E=null},clean:function(){return z|(I&&T)<<1}}}function d(y,E,S){var T=wl(y),I=wl(E),z=[1,0,0],G=Hf(T,I),Q=sf(G,G),$=G[0],rt=Q-$*$;if(!rt)return!S&&y;var mt=n*Q/rt,bt=-n*$/rt,Dt=Hf(z,G),Bt=of(z,mt),Ft=of(G,bt);qd(Bt,Ft);var Nt=Dt,te=sf(Bt,Nt),Ht=sf(Nt,Nt),ee=te*te-Ht*(sf(Bt,Bt)-1);if(!(ee<0)){var Ie=Nl(ee),Rt=of(Nt,(-te-Ie)/Ht);if(qd(Rt,Bt),Rt=yg(Rt),!S)return Rt;var le=y[0],jt=E[0],Zt=y[1],kt=E[1],tn;jt<le&&(tn=le,le=jt,jt=tn);var Yt=jt-le,de=dr(Yt-We)<wn,Me=de||Yt<wn;if(!de&&kt<Zt&&(tn=Zt,Zt=kt,kt=tn),Me?de?Zt+kt>0^Rt[1]<(dr(Rt[0]-le)<wn?Zt:kt):Zt<=Rt[1]&&Rt[1]<=kt:Yt>We^(le<=Rt[0]&&Rt[0]<=jt)){var ze=of(Nt,(-te+Ie)/Ht);return qd(ze,Bt),[Rt,yg(ze)]}}}function _(y,E){var S=r?e:We-e,T=0;return y<-S?T|=1:y>S&&(T|=2),E<-S?T|=4:E>S&&(T|=8),T}return jv(u,f,o,r?[0,-e]:[-We,e-We])}function qv(e){return function(t){var n=new Eg;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Eg(){}Eg.prototype={constructor:Eg,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Hv(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),o!=null&&e.clipExtent(null),Sw(n,e.stream(W_));var u=W_.result(),f=Math.min(r/(u[1][0]-u[0][0]),i/(u[1][1]-u[0][1])),d=+t[0][0]+(r-f*(u[1][0]+u[0][0]))/2,_=+t[0][1]+(i-f*(u[1][1]+u[0][1]))/2;return o!=null&&e.clipExtent(o),e.scale(f*150).translate([d,_])}function Uw(e,t,n){return Hv(e,[[0,0],t],n)}var Q_=16,Vw=Dn(30*Yi);function $_(e,t){return+t?qw(e,t):jw(e)}function jw(e){return qv({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function qw(e,t){function n(r,i,o,u,f,d,_,y,E,S,T,I,z,G){var Q=_-r,$=y-i,rt=Q*Q+$*$;if(rt>4*t&&z--){var mt=u+S,bt=f+T,Dt=d+I,Bt=Nl(mt*mt+bt*bt+Dt*Dt),Ft=hu(Dt/=Bt),Nt=dr(dr(Dt)-1)<wn||dr(o-E)<wn?(o+E)/2:bl(bt,mt),te=e(Nt,Ft),Ht=te[0],ee=te[1],Ie=Ht-r,Rt=ee-i,le=$*Ie-Q*Rt;(le*le/rt>t||dr((Q*Ie+$*Rt)/rt-.5)>.3||u*S+f*T+d*I<Vw)&&(n(r,i,o,u,f,d,Ht,ee,Nt,mt/=Bt,bt/=Bt,Dt,z,G),G.point(Ht,ee),n(Ht,ee,Nt,mt,bt,Dt,_,y,E,S,T,I,z,G))}}return function(r){var i,o,u,f,d,_,y,E,S,T,I,z,G={point:Q,lineStart:$,lineEnd:mt,polygonStart:function(){r.polygonStart(),G.lineStart=bt},polygonEnd:function(){r.polygonEnd(),G.lineStart=$}};function Q(Ft,Nt){Ft=e(Ft,Nt),r.point(Ft[0],Ft[1])}function $(){E=NaN,G.point=rt,r.lineStart()}function rt(Ft,Nt){var te=wl([Ft,Nt]),Ht=e(Ft,Nt);n(E,S,y,T,I,z,E=Ht[0],S=Ht[1],y=Ft,T=te[0],I=te[1],z=te[2],Q_,r),r.point(E,S)}function mt(){G.point=Q,r.lineEnd()}function bt(){$(),G.point=Dt,G.lineEnd=Bt}function Dt(Ft,Nt){rt(i=Ft,Nt),o=E,u=S,f=T,d=I,_=z,G.point=rt}function Bt(){n(E,S,y,T,I,z,o,u,i,f,d,_,Q_,r),G.lineEnd=mt,mt()}return G}}var Hw=qv({point:function(e,t){this.stream.point(e*Yi,t*Yi)}});function Zw(e){return Kw(function(){return e})()}function Kw(e){var t,n=150,r=480,i=250,o,u,f=0,d=0,_=0,y=0,E=0,S,T,I=null,z=J_,G=null,Q,$,rt,mt=Y_,bt=.5,Dt=$_(Ht,bt),Bt,Ft;function Nt(Rt){return Rt=T(Rt[0]*Yi,Rt[1]*Yi),[Rt[0]*n+o,u-Rt[1]*n]}function te(Rt){return Rt=T.invert((Rt[0]-o)/n,(u-Rt[1])/n),Rt&&[Rt[0]*ea,Rt[1]*ea]}function Ht(Rt,le){return Rt=t(Rt,le),[Rt[0]*n+o,u-Rt[1]*n]}Nt.stream=function(Rt){return Bt&&Ft===Rt?Bt:Bt=Hw(z(S,Dt(mt(Ft=Rt))))},Nt.clipAngle=function(Rt){return arguments.length?(z=+Rt?Gw(I=Rt*Yi,6*Yi):(I=null,J_),Ie()):I*ea},Nt.clipExtent=function(Rt){return arguments.length?(mt=Rt==null?(G=Q=$=rt=null,Y_):Dw(G=+Rt[0][0],Q=+Rt[0][1],$=+Rt[1][0],rt=+Rt[1][1]),Ie()):G==null?null:[[G,Q],[$,rt]]},Nt.scale=function(Rt){return arguments.length?(n=+Rt,ee()):n},Nt.translate=function(Rt){return arguments.length?(r=+Rt[0],i=+Rt[1],ee()):[r,i]},Nt.center=function(Rt){return arguments.length?(f=Rt[0]%360*Yi,d=Rt[1]%360*Yi,ee()):[f*ea,d*ea]},Nt.rotate=function(Rt){return arguments.length?(_=Rt[0]%360*Yi,y=Rt[1]%360*Yi,E=Rt.length>2?Rt[2]%360*Yi:0,ee()):[_*ea,y*ea,E*ea]},Nt.precision=function(Rt){return arguments.length?(Dt=$_(Ht,bt=Rt*Rt),Ie()):Nl(bt)},Nt.fitExtent=function(Rt,le){return Hv(Nt,Rt,le)},Nt.fitSize=function(Rt,le){return Uw(Nt,Rt,le)};function ee(){T=Fv(S=Mw(_,y,E),t);var Rt=t(f,d);return o=r-Rt[0]*n,u=i+Rt[1]*n,Ie()}function Ie(){return Bt=Ft=null,Nt}return function(){return t=e.apply(this,arguments),Nt.invert=t.invert&&te,ee()}}function Zv(e){return function(t,n){var r=Dn(t),i=Dn(n),o=e(r*i);return[o*i*kn(t),o*kn(n)]}}function Kv(e){return function(t,n){var r=Nl(t*t+n*n),i=e(r),o=kn(i),u=Dn(i);return[bl(t*o,r*u),hu(r&&n*o/r)]}}var Xw=Zv(function(e){return Nl(2/(1+e))});Xw.invert=Kv(function(e){return 2*hu(e/2)});var Xv=Zv(function(e){return(e=Bv(e))&&e/kn(e)});Xv.invert=Kv(function(e){return e});function Yw(){return Zw(Xv).scale(79.4188).clipAngle(180-.001)}function t0(e,t){return[e,t]}t0.invert=t0;function e0(e,t,n){n=n||{};var r=n.units||"kilometers",i=n.steps||8;if(!e)throw new Error("geojson is required");if(typeof n!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return gp(e,function(u){var f=Ef(u,t,r,i);f&&o.push(f)}),Of(o);case"FeatureCollection":return T_(e,function(u){var f=Ef(u,t,r,i);f&&T_(f,function(d){d&&o.push(d)})}),Of(o)}return Ef(e,t,r,i)}function Ef(e,t,n,r){var i=e.properties||{},o=e.type==="Feature"?e.geometry:e;if(o.type==="GeometryCollection"){var u=[];return gp(e,function(z){var G=Ef(z,t,n,r);G&&u.push(G)}),Of(u)}var f=Ww(o),d={type:o.type,coordinates:Wv(o.coordinates,f)},_=new Qg,y=_.read(d),E=uv(J1(t,n),"meters"),S=Kn.bufferOp(y,E,r),T=new vv;if(S=T.write(S),!Yv(S.coordinates)){var I={type:S.type,coordinates:Jv(S.coordinates,f)};return Qa(I,i)}}function Yv(e){return Array.isArray(e[0])?Yv(e[0]):isNaN(e[0])}function Wv(e,t){return typeof e[0]!="object"?t(e):e.map(function(n){return Wv(n,t)})}function Jv(e,t){return typeof e[0]!="object"?t.invert(e):e.map(function(n){return Jv(n,t)})}function Ww(e){var t=rw(e).geometry.coordinates,n=[-t[0],-t[1]];return Yw().rotate(n).scale($r)}const Jw={class:"elevation-profile"},Qw=["width","height","viewBox"],$w={class:"grid"},t4=["x2","y1","y2"],e4=["x1","x2","y2"],n4=["d"],r4=["cx","cy","onMouseenter"],i4={class:"axes"},s4=["y2"],o4=["y"],a4=["y1","x2","y2"],u4=["x","y"],l4={class:"font-medium"},Zs=20,Zd=40,c4=Ml({__name:"ElevationProfile",props:{points:{type:Array,required:!0},minElevation:{type:Number,required:!0},maxElevation:{type:Number,required:!0},width:{type:Number,default:400},height:{type:Number,default:200},units:{type:String,default:"metric"}},setup(e){const t=e,n=Hn({show:!1,x:0,y:0,pointIndex:0,distance:0,elevation:0}),r=bn(()=>{const I=t.points[t.points.length-1].distance;return(t.width-Zd-Zs)/I}),i=bn(()=>{const I=t.maxElevation-t.minElevation;return(t.height-2*Zs)/I}),o=bn(()=>t.points.map(I=>({x:I.distance*r.value+Zd,y:t.height-Zs-(I.elevation-t.minElevation)*i.value}))),u=bn(()=>o.value.reduce((I,z,G)=>I+(G===0?"M":"L")+z.x+","+z.y,"")),f=bn(()=>{const z=Math.ceil((t.maxElevation-t.minElevation)/4),G=[];for(let Q=0;Q<5;Q++){const $=Math.min(t.minElevation+Q*z,t.maxElevation);G.push({value:$,y:t.height-Zs-($-t.minElevation)*i.value})}return G}),d=bn(()=>{const I=t.points[t.points.length-1].distance,z=4,G=Math.ceil(I/z),Q=[];for(let $=0;$<=z;$++){const rt=$*G;rt<=I&&Q.push({value:rt,x:rt*r.value+Zd})}return Q});function _(I,z){const G=z.target.getBoundingClientRect();n.value={show:!0,x:G.left+window.scrollX,y:G.top+window.scrollY,pointIndex:t.points.findIndex(Q=>Q===I.original),distance:I.original.distance,elevation:I.original.elevation}}function y(){n.value.show=!1}const E=bn(()=>({left:`${n.value.x}px`,top:`${n.value.y-70}px`}));function S(I){return t.units==="imperial"?`${(I*3.28084).toFixed(1)} ft`:`${I.toFixed(1)} m`}function T(I){return t.units==="imperial"?`${(I*3.28084).toFixed(1)} ft`:`${I.toFixed(1)} m`}return(I,z)=>(Ue(),Ze("div",Jw,[(Ue(),Ze("svg",{width:e.width,height:e.height,viewBox:`0 0 ${e.width} ${e.height}`,class:"w-full h-full"},[Lt("g",$w,[(Ue(!0),Ze(gn,null,oa(I.gridLines,G=>(Ue(),Ze("line",{key:"h"+G,x1:"0",x2:e.width,y1:G,y2:G,class:"stroke-gray-200","stroke-dasharray":"4,4"},null,8,t4))),128)),(Ue(),Ze(gn,null,oa(5,G=>Lt("line",{key:"v"+G,x1:e.width/4*(G-1),x2:e.width/4*(G-1),y1:"0",y2:e.height,class:"stroke-gray-200","stroke-dasharray":"4,4"},null,8,e4)),64))]),Lt("path",{d:u.value,fill:"none",class:"stroke-primary-500","stroke-width":"2"},null,8,n4),(Ue(!0),Ze(gn,null,oa(o.value,(G,Q)=>(Ue(),Ze("g",{key:Q},[Lt("circle",{cx:G.x,cy:G.y,r:"3",class:"fill-primary-500",onMouseenter:$=>_(G,$),onMouseleave:y},null,40,r4)]))),128)),Lt("g",i4,[Lt("line",{x1:"0",y1:Zs,x2:"0",y2:e.height-Zs,stroke:"#666","stroke-width":"1"},null,8,s4),(Ue(!0),Ze(gn,null,oa(f.value,G=>(Ue(),Ze("text",{key:G.value,x:"-5",y:G.y,class:"text-xs fill-gray-500","text-anchor":"end","alignment-baseline":"middle"},be(G.value)+"m ",9,o4))),128)),Lt("line",{x1:"padding",y1:e.height-Zs,x2:e.width-Zs,y2:e.height-Zs,stroke:"#666","stroke-width":"1"},null,8,a4),(Ue(!0),Ze(gn,null,oa(d.value,G=>(Ue(),Ze("text",{key:G.value,x:G.x,y:e.height-Zs+15,class:"text-xs fill-gray-500","text-anchor":"middle"},be(S(G.value)),9,u4))),128))])],8,Qw)),n.value.show?(Ue(),Ze("div",{key:0,class:"absolute bg-white shadow-lg rounded-md p-2 text-sm pointer-events-none",style:nl(E.value)},[Lt("p",l4,"Point "+be(n.value.pointIndex+1),1),Lt("p",null,"Distance : "+be(S(n.value.distance)),1),Lt("p",null,"Élévation : "+be(T(n.value.elevation)),1)],4)):wr("",!0)]))}}),h4=iv(c4,[["__scopeId","data-v-3232e264"]]),f4={key:0,class:"shape-info-panel"},p4={class:"title"},d4={class:"info-content"},g4={class:"info-item"},m4={class:"value"},_4={class:"info-item"},y4={class:"value"},v4={class:"info-item"},C4={class:"value"},E4={class:"info-item"},L4={class:"value"},x4={class:"info-item"},b4={class:"value"},w4={class:"info-item"},S4={class:"value"},M4={class:"info-item"},P4={class:"value"},I4={class:"info-item"},T4={class:"value"},A4={class:"info-item"},D4={class:"value"},k4={class:"info-item"},N4={class:"value"},R4={class:"info-item"},O4={class:"value"},B4={key:0,class:"mt-4"},F4={key:2,class:"surface-section"},z4={class:"info-item"},G4={class:"value"},U4={class:"info-item"},V4={class:"value"},j4={class:"info-item"},q4={class:"value"},H4=Ml({__name:"ShapeInfo",props:{shape:{type:Object,default:null},units:{type:String,default:"metric"}},emits:["close","edit","delete"],setup(e,{emit:t}){const n=e,r=t;bn(()=>(console.log("Shape data:",n.shape),n.shape&&n.shape.type&&n.shape.properties&&(n.shape.properties.dimensions&&Object.keys(n.shape.properties.dimensions).length>0||n.shape.properties.length||n.shape.properties.surfaceInterieure)));function i(d){return{rectangle:"Rectangle",cercle:"Cercle","demi-cercle":"Demi-cercle",ligne:"Ligne"}[d.toLowerCase()]||"Forme"}function o(d){return!d&&d!==0?"0 m":`${d.toFixed(2)} m`}function u(d){return!d&&d!==0?"0 m²":`${d.toFixed(2)} m²`}function f(d){return!d&&d!==0?"0 %":`${d.toFixed(1)} %`}return(d,_)=>{var y,E,S,T,I,z,G,Q,$,rt;return e.shape?(Ue(),Ze("div",f4,[Lt("h3",p4,[ay(be(i(e.shape.type))+" ",1),Lt("button",{class:"close-button",onClick:_[0]||(_[0]=mt=>r("close"))},"X")]),Lt("div",d4,[(y=e.shape.properties)!=null&&y.dimensions?(Ue(),Ze(gn,{key:0},[((E=e.shape.type)==null?void 0:E.toLowerCase())==="rectangle"?(Ue(),Ze(gn,{key:0},[Lt("div",g4,[_[1]||(_[1]=Lt("span",{class:"label"},"Largeur:",-1)),Lt("span",m4,be(o(e.shape.properties.dimensions.width)),1)]),Lt("div",_4,[_[2]||(_[2]=Lt("span",{class:"label"},"Longueur:",-1)),Lt("span",y4,be(o(e.shape.properties.dimensions.height)),1)])],64)):wr("",!0),((S=e.shape.type)==null?void 0:S.toLowerCase())==="cercle"?(Ue(),Ze(gn,{key:1},[Lt("div",v4,[_[3]||(_[3]=Lt("span",{class:"label"},"Rayon:",-1)),Lt("span",C4,be(o(e.shape.properties.dimensions.radius)),1)]),Lt("div",E4,[_[4]||(_[4]=Lt("span",{class:"label"},"Diamètre:",-1)),Lt("span",L4,be(o(e.shape.properties.dimensions.diameter)),1)])],64)):wr("",!0),((T=e.shape.type)==null?void 0:T.toLowerCase())==="demi-cercle"?(Ue(),Ze(gn,{key:2},[Lt("div",x4,[_[5]||(_[5]=Lt("span",{class:"label"},"Rayon:",-1)),Lt("span",b4,be(o(e.shape.properties.dimensions.radius)),1)]),Lt("div",w4,[_[6]||(_[6]=Lt("span",{class:"label"},"Orientation:",-1)),Lt("span",S4,be(e.shape.properties.dimensions.orientation)+"°",1)])],64)):wr("",!0)],64)):wr("",!0),((I=e.shape.type)==null?void 0:I.toLowerCase())==="line"&&e.shape.properties?(Ue(),Ze(gn,{key:1},[Lt("div",M4,[_[7]||(_[7]=Lt("span",{class:"label"},"Longueur totale:",-1)),Lt("span",P4,be(o(e.shape.properties.length)),1)]),Lt("div",I4,[_[8]||(_[8]=Lt("span",{class:"label"},"Largeur d'influence:",-1)),Lt("span",T4,be(o(((z=e.shape.properties.dimensions)==null?void 0:z.width)||0)),1)]),Lt("div",A4,[_[9]||(_[9]=Lt("span",{class:"label"},"Zone d'influence:",-1)),Lt("span",D4,be(u(e.shape.properties.surfaceInfluence)),1)]),Lt("div",k4,[_[10]||(_[10]=Lt("span",{class:"label"},"Dénivelé:",-1)),Lt("span",N4,be(o(((G=e.shape.properties.elevation)==null?void 0:G.difference)||0)),1)]),Lt("div",R4,[_[11]||(_[11]=Lt("span",{class:"label"},"Pente moyenne:",-1)),Lt("span",O4,be(f(((Q=e.shape.properties.elevation)==null?void 0:Q.slope)||0)),1)]),($=e.shape.properties.elevation)!=null&&$.profile?(Ue(),Ze("div",B4,[_[12]||(_[12]=Lt("h4",{class:"subtitle"},"Profil d'élévation",-1)),Gr(h4,{points:e.shape.properties.elevation.profile,"min-elevation":e.shape.properties.elevation.minElevation,"max-elevation":e.shape.properties.elevation.maxElevation,width:250,height:150},null,8,["points","min-elevation","max-elevation"])])):wr("",!0)],64)):wr("",!0),(rt=e.shape.properties)!=null&&rt.surfaceInterieure?(Ue(),Ze("div",F4,[Lt("div",z4,[_[13]||(_[13]=Lt("span",{class:"label"},"Surface intérieure:",-1)),Lt("span",G4,be(u(e.shape.properties.surfaceInterieure)),1)]),Lt("div",U4,[_[14]||(_[14]=Lt("span",{class:"label"},"Surface extérieure:",-1)),Lt("span",V4,be(u(e.shape.properties.surfaceExterieure)),1)]),Lt("div",j4,[_[15]||(_[15]=Lt("span",{class:"label"},"Périmètre:",-1)),Lt("span",q4,be(o(e.shape.properties.perimetre)),1)])])):wr("",!0)])])):wr("",!0)}}}),Z4=iv(H4,[["__scopeId","data-v-3ef183eb"]]),K4={class:"h-full flex"},X4={class:"flex-1 relative"},Y4={class:"w-80 bg-white shadow-lg flex flex-col"},W4={class:"p-4 border-b border-gray-200"},J4={class:"grid grid-cols-2 gap-2"},Q4=["onClick"],$4={class:"p-4 border-b border-gray-200"},tS={class:"flex flex-wrap gap-2"},eS=["onClick","title"],nS={class:"relative"},rS={class:"flex items-center justify-between mb-2"},iS={class:"text-sm text-gray-500"},sS={class:"relative"},oS={class:"text-sm text-gray-500 text-right"},aS={class:"flex-1 p-4 overflow-y-auto"},uS={class:"space-y-2"},lS=["onClick"],cS={class:"flex items-center justify-between mb-2"},hS={class:"text-sm font-medium text-gray-700"},fS=["onClick"],pS={class:"space-y-1 text-sm text-gray-600"},dS={key:0},gS={key:0},mS={key:0},_S=Ml({__name:"MapView",setup(e){const t=[{value:"#3388ff",label:"Bleu"},{value:"#33c9ff",label:"Bleu clair"},{value:"#ff3333",label:"Rouge"},{value:"#ff8033",label:"Orange"},{value:"#33ff33",label:"Vert"},{value:"#ffff33",label:"Jaune"},{value:"#9933ff",label:"Violet"},{value:"#ff33ff",label:"Rose"}],n=Hn(null),r=Hn(null),i=Hn(null);Hn("");const o=Hn("Rectangle"),u=Hn([]),f=H1(),d=Hn(null),_=Hn(null),y=Hn({color:"#3388ff",weight:3,opacity:.8,fillOpacity:.2}),E=Hn(!1),S=Hn("idle"),T=Hn(null),I=Hn({color:t[0].value,weight:3,opacity:.8,dashArray:"",radius:10,orientation:0,fixedRadius:!1,lineType:"straight"}),z={position:"topright",drawControls:!1,editControls:!1,cutControls:!1,dragMode:!1,removalMode:!1,drawText:!1,rotateMode:!0,oneBlock:!1,customControls:!1,optionsControls:!1,snappingOption:!0,snapDistance:20,tooltips:!0,rotateControlOptions:{rotateEnabled:!0}},G={OpenStreetMap:Rr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}),Satellite:Rr.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri"}),Terrain:Rr.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"© OpenTopoMap contributors"})};z0(()=>{n.value&&(r.value=Rr.map(n.value,{layers:[G.Satellite]}).setView([48.8566,2.3522],13),Rr.control.layers(G).addTo(r.value),i.value=new Rr.FeatureGroup,r.value.addLayer(i.value),r.value.pm.addControls(z),r.value.on("pm:create",bt),r.value.on("pm:remove",Ft),r.value.on("pm:edit",Y=>{const J=Y.layer,W=Dt(J,J.shape||J.options.shape||"unknown");_.value&&J.id===_.value.id&&(_.value={..._.value,properties:W});const zt=u.value.findIndex(F=>F.layer===J);zt!==-1&&(u.value[zt].properties=W)}),window.addEventListener("map-set-location",Y=>{if(r.value&&Y.detail){const{lat:J,lng:W,zoom:zt}=Y.detail;r.value.setView([J,W],zt)}}),f.currentPlan&&Ie())});function Q(Y){if(!r.value)return;E.value=!0,S.value="drawing",T.value=Y,r.value.getContainer().classList.add("drawing-mode"),r.value.pm.disableDraw(),le(),r.value.getContainer().style.cursor="crosshair";const J={templineStyle:{color:I.value.color,weight:I.value.weight,dashArray:I.value.dashArray},hintlineStyle:{color:I.value.color,weight:I.value.weight,dashArray:I.value.dashArray},pathOptions:{color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,dashArray:I.value.dashArray},tooltips:!0,snapDistance:20,finishOn:"contextmenu"},W={Rectangle:"Cliquez et glissez pour dessiner un rectangle",Cercle:"Cliquez et glissez pour définir le rayon du cercle",Ligne:"Cliquez pour commencer la ligne, double-cliquez pour terminer","Demi-cercle":"Cliquez pour placer le centre, glissez pour définir le rayon"};if(r.value&&W[Y]){const zt=document.createElement("div");zt.className="drawing-help-message",zt.textContent=W[Y],r.value.getContainer().appendChild(zt)}switch(Y){case"Rectangle":r.value.pm.enableDraw("Rectangle",J);break;case"Cercle":r.value.pm.enableDraw("Circle",J);break;case"Ligne":r.value.pm.enableDraw("Line",J);break;case"Demi-cercle":rt(J);break}}let $={mousedown:null,mousemove:null,mouseup:null};function rt(Y={}){if(!r.value)return;let J=null,W=null,zt=0,F=0,V=Rr.tooltip({permanent:!0,direction:"right",className:"drawing-tooltip"});const et=(_t,Ct)=>{V.setLatLng(_t),V.setContent(Ct)};r.value.once("click",_t=>{J=_t.latlng,zt=1,V.setLatLng(_t.latlng),V.setContent("Move mouse to set radius"),V.addTo(r.value),W=Rr.circle(J,{radius:0,color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,dashArray:I.value.dashArray}).addTo(r.value);const Ct=yt=>{zt===1&&(F=J.distanceTo(yt.latlng),W.setRadius(F),et(yt.latlng,"Click to set radius"))};r.value.on("mousemove",Ct),r.value.once("click",yt=>{if(zt===1){F=J.distanceTo(yt.latlng),zt=2,r.value.off("mousemove",Ct),W&&r.value.removeLayer(W),W=Rr.semiCircle(J,{radius:F,color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,startAngle:0,stopAngle:180,dashArray:I.value.dashArray}).addTo(r.value),et(yt.latlng,"Move mouse to set orientation");const Mt=Tt=>{if(zt===2){const Pt=Math.atan2(Tt.latlng.lat-J.lat,Tt.latlng.lng-J.lng)*180/Math.PI;W.setStartAngle(Pt-90),W.setStopAngle(Pt+90),et(Tt.latlng,"Click to finish")}};r.value.on("mousemove",Mt),r.value.once("click",Tt=>{const Pt=Math.atan2(Tt.latlng.lat-J.lat,Tt.latlng.lng-J.lng)*180/Math.PI,xt=Rr.semiCircle(J,{radius:F,color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,startAngle:Pt-90,stopAngle:Pt+90});r.value.removeLayer(W),r.value.removeLayer(V),r.value.off("mousemove",Mt),i.value.addLayer(xt),bt({layer:xt,shape:"semicircle"}),J=null,W=null,zt=0})}})})}async function mt(Y){try{const J=Y.map(F=>`${F.lat},${F.lng}`).join("|");return(await(await fetch("https://api.open-elevation.com/api/v1/lookup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({locations:Y.map(F=>({latitude:F.lat,longitude:F.lng}))})})).json()).results.map((F,V)=>({distance:V===0?0:Vd(Rf(Y.slice(0,V+1).map(et=>[et.lng,et.lat]))),elevation:F.elevation}))}catch(J){return console.error("Erreur lors de la récupération du profil altimétrique:",J),[]}}async function bt(Y){var zt;const{layer:J,shape:W}=Y;if(J)try{console.log("Creating shape:",W,"Layer:",J),ye(J),console.log("Rotation support added to layer"),E.value=!1,S.value="idle",T.value=null,r.value&&r.value.getContainer().classList.remove("drawing-mode");const F={rectangle:"Rectangle",circle:"Cercle",semicircle:"Demi-cercle",line:"Ligne"},V=W.toLowerCase(),et=F[V]||W,_t=Dt(J,V);(zt=J.getElement())==null||zt.classList.add("shape-created"),setTimeout(()=>{var yt;(yt=J.getElement())==null||yt.classList.remove("shape-created")},1e3),J.on("click",()=>{if(console.log("Shape clicked, enabling editing"),r.value){i.value.eachLayer(Mt=>{Mt!==J&&Mt.pm.disable()}),J.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0,removeLayerOnEmpty:!1});const yt=u.value.find(Mt=>Mt.layer===J);yt&&ke(yt)}}),i.value.addLayer(J),f.currentPlan&&Bt(J,V,_t);const Ct={id:J.id||Date.now(),type:et,layer:J,properties:_t};if(u.value.push(Ct),console.log("Shape added to shapes list:",Ct),W.toLowerCase()==="line"){const yt=J.getLatLngs(),Mt=await mt(yt);if(Mt.length>0){const Tt=Mt.map(he=>he.elevation),Pt=Math.min(...Tt),xt=Math.max(...Tt),Kt=xt-Pt,Ut=Mt[Mt.length-1].distance,ne=Kt/Ut*100;_t.elevation={profile:Mt,difference:Kt,slope:ne,minElevation:Pt,maxElevation:xt},_.value={id:J.id||Date.now(),type:W,properties:_t,elevationProfile:Mt}}}ke(Ct)}catch(F){console.error("Error in handleShapeCreated:",F)}}function Dt(Y,J){const W={type:J,surfaceInterieure:0,surfaceExterieure:0,perimetre:0,dimensions:{},elevation:{difference:0,slope:0}},zt=Y.toGeoJSON();switch(J.toLowerCase()){case"rectangle":const F=Bf(zt),V=nw(F);W.surfaceInterieure=Gd(V);const et=e0(V,1,{units:"meters"});W.surfaceExterieure=Gd(et),W.perimetre=Vd(sw(V),{units:"meters"});const _t=vf([F[0],F[1]]),Ct=vf([F[2],F[1]]),yt=vf([F[0],F[3]]);W.dimensions={width:gg(_t,Ct,{units:"meters"}),height:gg(_t,yt,{units:"meters"})};break;case"circle":const Mt=Y.getRadius();W.surfaceInterieure=Math.PI*Math.pow(Mt,2),W.surfaceExterieure=Math.PI*Math.pow(Mt+1,2),W.perimetre=2*Math.PI*Mt,W.dimensions={radius:Mt,diameter:Mt*2};break;case"semicircle":const Tt=Y.getRadius();W.surfaceInterieure=Math.PI*Math.pow(Tt,2)/2,W.surfaceExterieure=Math.PI*Math.pow(Tt+1,2)/2,W.perimetre=Math.PI*Tt+2*Tt,W.dimensions={radius:Tt,orientation:Y.options.startAngle+90};break;case"line":const Pt=Rf(Y.getLatLngs().map(Kt=>[Kt.lng,Kt.lat]));W.length=Vd(Pt,{units:"meters"});const xt=e0(Pt,1,{units:"meters"});if(W.surfaceInfluence=Gd(xt),W.dimensions={width:2},W.elevation={difference:0,slope:0},r.value){const Kt=Y.getLatLngs();if(Kt.length>=2){Kt[0],Kt[Kt.length-1];const Ut=W.length;W.elevation.difference=Ut*.02,W.elevation.slope=2}}break}return W}async function Bt(Y,J,W){try{const zt={plan_id:f.currentPlan.id,type_forme:J.toUpperCase(),geometrie:Y.toGeoJSON().geometry,proprietes:{...W,style:Y.options}},F=await f.createShape(zt);Y.id=F.data.id}catch(zt){console.error("Erreur lors de la sauvegarde de la forme:",zt),i.value.removeLayer(Y)}}function Ft(Y){const{layer:J}=Y;f.currentPlan&&Nt(J)}function Nt(Y){const J=u.value.find(W=>W.id===Y);!J||!r.value||!i.value||(i.value.removeLayer(J.layer),u.value=u.value.filter(W=>W.id!==Y))}function te(){!d.value||!r.value||(E.value=!1,S.value="idle",T.value=null,r.value.getContainer().classList.remove("drawing-mode"),le(),r.value.removeLayer(d.value.layer),d.value=null,r.value.pm.disableDraw())}function Ht(Y){return Y?`${Y.toFixed(2)} m²`:""}Og(()=>{r.value&&(window.removeEventListener("map-set-location",Y=>{if(r.value&&Y.detail){const{lat:J,lng:W,zoom:zt}=Y.detail;r.value.setView([J,W],zt)}}),r.value.remove())}),la(o,Y=>{Y&&Q(Y)});function ee(){var J;if(!r.value)return;const Y={templineStyle:{color:I.value.color,weight:I.value.weight,dashArray:I.value.dashArray},hintlineStyle:{color:I.value.color,weight:I.value.weight,dashArray:I.value.dashArray},pathOptions:{color:I.value.color,fillColor:I.value.color,fillOpacity:.2,weight:I.value.weight,dashArray:I.value.dashArray}};r.value.pm.setGlobalOptions({templineStyle:Y.templineStyle,hintlineStyle:Y.hintlineStyle,pathOptions:Y.pathOptions}),(J=d.value)!=null&&J.layer&&d.value.layer.setStyle(Y.pathOptions)}async function Ie(){if(r.value)try{(await f.getShapes(f.currentPlan.id)).data.forEach(J=>{const W=Rr.geoJSON(J.geometrie,{style:J.proprietes.style}).addTo(r.value);u.value.push({id:J.id,type:J.type_forme,layer:W,surface:J.surface})})}catch(Y){console.error("Erreur lors du chargement des formes:",Y)}}function Rt(){}la(S,(Y,J)=>{if(!r.value)return;const W=r.value.getContainer();switch(W.classList.remove(`state-${J}`),W.classList.add(`state-${Y}`),Y){case"drawing":W.style.cursor="crosshair";break;case"editing":W.style.cursor="pointer";break;default:W.style.cursor=""}});function le(){if(!r.value)return;r.value.dragging.enable(),r.value.getContainer().style.cursor="";const Y=r.value.getContainer().querySelector(".drawing-help-message");Y&&Y.remove(),$.mousedown&&r.value.off("mousedown",$.mousedown),$.mousemove&&r.value.off("mousemove",$.mousemove),$.mouseup&&r.value.off("mouseup",$.mouseup),$={mousedown:null,mousemove:null,mouseup:null}}function jt(Y){return Y?`${Y.toFixed(2)} m`:""}Hn({rectangle:0,circle:0,semicircle:0,line:0});function Zt(Y){const J={rectangle:"Rectangle",circle:"Cercle",semicircle:"Demi-cercle",line:"Ligne"},W=Y.type.toLowerCase();return J[W]||Y.type}function kt(Y){return!Y&&Y!==0?"0 %":`${Y.toFixed(1)} %`}function tn(Y){if(Y.getCenter)return Y.getCenter();if(Y.getBounds)return Y.getBounds().getCenter();if(Y.getLatLng)return Y.getLatLng();if(Y.getLatLngs){const J=Y.getLatLngs(),W=Array.isArray(J[0])?J[0]:J,zt=W.reduce((V,et)=>V+et.lat,0),F=W.reduce((V,et)=>V+et.lng,0);return Rr.latLng(zt/W.length,F/W.length)}return null}function Yt(Y,J){const zt=J/6378137*(180/Math.PI);return Rr.latLng(Y.lat+zt,Y.lng)}function de(Y,J){return Math.atan2(J.lat-Y.lat,J.lng-Y.lng)*180/Math.PI}function Me(Y,J){const W=u.value.find(zt=>zt.layer===Y);W&&W.properties&&(W.properties.rotation=J,_.value&&_.value.id===W.id&&(_.value.properties=W.properties))}function ze(Y){if(!r.value||!Y)return console.warn("Map or layer not initialized"),null;Y._rotationControl&&(r.value.removeLayer(Y._rotationControl),delete Y._rotationControl);const J=tn(Y);if(!J)return console.warn("Cannot determine center of layer"),null;let W=50;if(Y.getRadius){const Pt=Y.getRadius(),xt=r.value.latLngToLayerPoint(J),Kt=Yt(J,Pt),Ut=r.value.latLngToLayerPoint(Kt);W=xt.distanceTo(Ut)}else if(Y.getBounds){const Pt=Y.getBounds(),xt=r.value.latLngToLayerPoint(Pt.getNorth());W=r.value.latLngToLayerPoint(J).distanceTo(xt)}const zt=`rotation-control-${Date.now()}`,F=Rr.divIcon({className:`rotation-control ${zt}`,html:`<svg viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
    </svg>`,iconSize:[32,32],iconAnchor:[16,16]}),V=r.value.latLngToLayerPoint(J).subtract([0,W+40]),et=r.value.layerPointToLatLng(V),_t=Rr.marker(et,{icon:F,draggable:!1,zIndexOffset:1e3,pmIgnore:!0,interactive:!0});let Ct=!1,yt=0;function Mt(Pt){if(!Ct)return;const Kt=de(J,Pt.latlng)-yt,Ut=Math.round(Kt/5)*5;typeof Y.setRotation=="function"&&(Y.setRotation(Ut),Me(Y,Ut))}function Tt(){Ct=!1;const Pt=document.querySelector(`.${zt}`);Pt&&Pt.classList.remove("rotating"),r.value.off("mousemove",Mt),Y.pm&&Y.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0,removeLayerOnEmpty:!1})}return _t.on("click",Pt=>{if(Rr.DomEvent.stopPropagation(Pt),!Ct){Y.pm&&Y.pm.disable(),Ct=!0,yt=de(J,_t.getLatLng());const xt=document.querySelector(`.${zt}`);xt&&xt.classList.add("rotating"),r.value.on("mousemove",Mt),r.value.once("click",Tt)}}),_t.addTo(r.value),Y._rotationControl=_t,_t}function ke(Y){var J,W;if(!r.value){console.warn("Map not initialized");return}try{if(console.log("Selecting shape:",Y),_.value&&_.value.id!==Y.id){const F=(J=u.value.find(V=>V.id===_.value.id))==null?void 0:J.layer;F&&(console.log("Disabling previous shape"),F.pm.disable(),F._rotationControl&&(console.log("Removing previous rotation control"),r.value.removeLayer(F._rotationControl),delete F._rotationControl))}_.value={id:Y.id,type:Y.type,properties:Y.properties,elevationProfile:(W=Y.properties.elevation)==null?void 0:W.profile},console.log("Selected shape info updated:",_.value);const zt=Y.layer;zt?(console.log("Enabling editing on selected shape"),u.value.forEach(F=>{F.layer!==zt&&F.layer.pm.disable()}),typeof zt.setRotation!="function"&&(console.log("Adding rotation support to layer"),ye(zt)),zt.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0,removeLayerOnEmpty:!1}),setTimeout(()=>{console.log("Creating rotation control"),ze(zt)?(console.log("Rotation control created successfully"),zt.getBounds&&r.value.fitBounds(zt.getBounds(),{padding:[50,50]})):console.warn("Failed to create rotation control")},100)):console.warn("No layer found for selected shape")}catch(zt){console.error("Error in selectShape:",zt)}}function ye(Y){!Y||typeof Y.setRotation=="function"||(Y.setRotation=function(J){if(r.value)try{const W=Y.getBounds?Y.getBounds().getCenter():Y.getLatLng?Y.getLatLng():null;if(!W)return;const zt=r.value.latLngToLayerPoint(W),F=Y.getLatLngs(),et=(Array.isArray(F[0])?F[0]:F).map(_t=>{const Ct=r.value.latLngToLayerPoint(_t),yt=rotatePoint(Ct,zt,J);return r.value.layerPointToLatLng(yt)});Array.isArray(F[0])?Y.setLatLngs([et]):Y.setLatLngs(et)}catch(W){console.error("Error rotating shape:",W)}})}la(()=>I,Y=>{ee()},{deep:!0});function ce(Y){I.value.color=Y,ee()}function Et(Y){return!Y&&Y!==0?"0°":`${Math.round(Y)}°`}return(Y,J)=>(Ue(),Ze("div",K4,[Lt("div",X4,[Lt("div",{ref_key:"mapContainer",ref:n,class:"h-full w-full"},null,512),_.value?(Ue(),sy(Z4,{key:0,shape:_.value},null,8,["shape"])):wr("",!0)]),Lt("div",Y4,[J[13]||(J[13]=Lt("div",{class:"p-4 border-b border-gray-200"},[Lt("h2",{class:"text-lg font-medium text-gray-900"},"Outils de dessin")],-1)),Lt("div",W4,[J[4]||(J[4]=Lt("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Type de forme ",-1)),Lt("div",J4,[(Ue(),Ze(gn,null,oa(["Rectangle","Cercle","Demi-cercle","Ligne"],W=>Lt("button",{key:W,onClick:zt=>o.value=W,class:$u(["px-3 py-2 rounded-md text-sm font-medium",[o.value===W?"bg-primary-100 text-primary-700 border-primary-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"]])},be(W),11,Q4)),64))])]),Lt("div",$4,[J[10]||(J[10]=Lt("h3",{class:"text-sm font-medium text-gray-700 mb-4"},"Style",-1)),Lt("div",null,[J[5]||(J[5]=Lt("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Couleur",-1)),Lt("div",tS,[(Ue(),Ze(gn,null,oa(t,W=>Lt("button",{key:W.value,onClick:zt=>ce(W.value),class:$u(["w-8 h-8 rounded-full border-2 transition-all transform hover:scale-110",[I.value.color===W.value?"border-primary-500 scale-110":"border-transparent"]]),style:nl({backgroundColor:W.value}),title:W.label},null,14,eS)),64)),Lt("div",nS,[tf(Lt("input",{type:"color","onUpdate:modelValue":J[0]||(J[0]=W=>I.value.color=W),class:"w-8 h-8 rounded-full cursor-pointer"},null,512),[[Ad,I.value.color]])])])]),Lt("div",null,[J[7]||(J[7]=Lt("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type de trait",-1)),tf(Lt("select",{"onUpdate:modelValue":J[1]||(J[1]=W=>I.value.dashArray=W),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},J[6]||(J[6]=[lL('<option value="">Trait continu</option><option value="5,5">Pointillé simple</option><option value="10,5">Pointillé long</option><option value="2,5">Pointillé court</option><option value="15,10,5,10">Pointillé mixte</option><option value="20,5,5,5">Trait-point</option>',6)]),512),[[GL,I.value.dashArray]])]),Lt("div",null,[Lt("div",rS,[J[8]||(J[8]=Lt("label",{class:"block text-sm font-medium text-gray-700"},"Épaisseur",-1)),Lt("span",iS,be(I.value.weight)+"px",1)]),Lt("div",sS,[tf(Lt("input",{type:"range","onUpdate:modelValue":J[2]||(J[2]=W=>I.value.weight=W),min:"1",max:"10",step:"0.5",class:"w-full accent-primary-600"},null,512),[[Ad,I.value.weight]]),Lt("div",{class:"mt-2 bg-current rounded-full",style:nl({height:I.value.weight+"px",strokeDasharray:I.value.dashArray})},null,4)])]),Lt("div",null,[J[9]||(J[9]=Lt("label",{class:"block text-sm text-gray-600 mb-1"}," Opacité ",-1)),tf(Lt("input",{type:"range","onUpdate:modelValue":J[3]||(J[3]=W=>y.value.opacity=W),min:"0",max:"1",step:"0.1",class:"w-full",onChange:ee},null,544),[[Ad,y.value.opacity]]),Lt("div",oS,be(Math.round(y.value.opacity*100))+"% ",1)])]),Lt("div",aS,[J[12]||(J[12]=Lt("h3",{class:"text-sm font-medium text-gray-700 mb-2"}," Formes dessinées ",-1)),Lt("div",uS,[(Ue(!0),Ze(gn,null,oa(u.value,W=>{var zt,F,V,et,_t,Ct,yt;return Ue(),Ze("div",{key:W.id,class:$u(["p-3 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors cursor-pointer",{"ring-2 ring-primary-500":((zt=_.value)==null?void 0:zt.id)===W.id}]),onClick:Mt=>ke(W)},[Lt("div",cS,[Lt("span",hS,be(Zt(W)),1),Lt("button",{onClick:jL(Mt=>Nt(W.id),["stop"]),class:"text-red-600 hover:text-red-800"},J[11]||(J[11]=[Lt("span",{class:"sr-only"},"Supprimer",-1),Lt("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[Lt("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,fS)]),Lt("div",pS,[W.type.toLowerCase()==="rectangle"&&((F=W.properties)!=null&&F.dimensions)?(Ue(),Ze(gn,{key:0},[Lt("div",null,"Largeur: "+be(jt(W.properties.dimensions.width)),1),Lt("div",null,"Longueur: "+be(jt(W.properties.dimensions.height)),1),Lt("div",null,"Surface: "+be(Ht(W.properties.surfaceInterieure)),1),W.properties.rotation!==void 0?(Ue(),Ze("div",dS,"Rotation: "+be(Et(W.properties.rotation)),1)):wr("",!0)],64)):wr("",!0),W.type.toLowerCase()==="circle"&&((V=W.properties)!=null&&V.dimensions)?(Ue(),Ze(gn,{key:1},[Lt("div",null,"Rayon: "+be(jt(W.properties.dimensions.radius)),1),Lt("div",null,"Diamètre: "+be(jt(W.properties.dimensions.diameter)),1),Lt("div",null,"Surface: "+be(Ht(W.properties.surfaceInterieure)),1),W.properties.rotation!==void 0?(Ue(),Ze("div",gS,"Rotation: "+be(Et(W.properties.rotation)),1)):wr("",!0)],64)):wr("",!0),W.type.toLowerCase()==="semicircle"&&((et=W.properties)!=null&&et.dimensions)?(Ue(),Ze(gn,{key:2},[Lt("div",null,"Rayon: "+be(jt(W.properties.dimensions.radius)),1),Lt("div",null,"Orientation: "+be(Et(W.properties.dimensions.orientation)),1),Lt("div",null,"Surface: "+be(Ht(W.properties.surfaceInterieure)),1),W.properties.rotation!==void 0?(Ue(),Ze("div",mS,"Rotation: "+be(Et(W.properties.rotation)),1)):wr("",!0)],64)):wr("",!0),W.type.toLowerCase()==="line"&&W.properties?(Ue(),Ze(gn,{key:3},[Lt("div",null,"Longueur: "+be(jt(W.properties.length)),1),Lt("div",null,"Largeur d'influence: "+be(jt(((_t=W.properties.dimensions)==null?void 0:_t.width)||0)),1),Lt("div",null,"Zone d'influence: "+be(Ht(W.properties.surfaceInfluence)),1),Lt("div",null,"Dénivelé: "+be(jt(((Ct=W.properties.elevation)==null?void 0:Ct.difference)||0)),1),Lt("div",null,"Pente moyenne: "+be(kt(((yt=W.properties.elevation)==null?void 0:yt.slope)||0)),1)],64)):wr("",!0)])],10,lS)}),128))])]),Lt("div",{class:"p-4 border-t border-gray-200"},[Lt("button",{onClick:te,class:"w-full mb-2 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Annuler le dessin "),Lt("button",{onClick:Rt,class:"w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700"}," Sauvegarder le plan ")])])]))}}),yS=eb({history:Ax("/static/frontend/"),routes:[{path:"/",name:"home",component:_S}]}),am=ZL(q1);am.use(YL());am.use(yS);am.mount("#app");
