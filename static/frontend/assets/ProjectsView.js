import{d as _,u as k,r as c,o as P,c as a,a as t,b as C,F as j,e as D,w as N,f,v as x,t as l,g as M,h as d}from"./index.js";const S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},V={class:"mt-8 flex flex-col"},E={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},B={class:"inline-block min-w-full py-2 align-middle"},F={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5"},L={class:"min-w-full divide-y divide-gray-300"},$={class:"divide-y divide-gray-200 bg-white"},A={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},R={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},U={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},q={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},I={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},T=["onClick"],z=["onClick"],G={key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},H={class:"bg-white rounded-lg p-6 max-w-md w-full"},J={class:"space-y-4"},K={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},W=_({__name:"ProjectsView",setup(O){const y=M(),i=k(),u=c([]),n=c(!1),r=c({nom:"",description:""});P(async()=>{await m()});async function m(){try{await i.fetchPlans(),u.value=i.plans}catch(o){console.error("Erreur lors du chargement des plans:",o)}}function g(){n.value=!0,r.value={nom:"",description:""}}async function v(){try{await i.createPlan(r.value),n.value=!1,await m()}catch(o){console.error("Erreur lors de la création du plan:",o)}}async function w(o){i.setCurrentPlan(o),y.push("/")}async function b(o){if(confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await i.deletePlan(o.id),await m()}catch(e){console.error("Erreur lors de la suppression du plan:",e)}}function p(o){return new Date(o).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return(o,e)=>(d(),a("div",S,[t("div",{class:"sm:flex sm:items-center"},[e[3]||(e[3]=t("div",{class:"sm:flex-auto"},[t("h1",{class:"text-2xl font-semibold text-gray-900"},"Mes Plans"),t("p",{class:"mt-2 text-sm text-gray-700"}," Liste de tous vos plans d'irrigation ")],-1)),t("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[t("button",{onClick:g,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),t("div",V,[t("div",E,[t("div",B,[t("div",F,[t("table",L,[e[4]||(e[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"}," Nom "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Date de création "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Dernière modification "),t("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",$,[(d(!0),a(j,null,D(u.value,s=>(d(),a("tr",{key:s.id},[t("td",A,l(s.nom),1),t("td",R,l(s.description),1),t("td",U,l(p(s.date_creation)),1),t("td",q,l(p(s.date_modification)),1),t("td",I,[t("button",{onClick:h=>w(s),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,T),t("button",{onClick:h=>b(s),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,z)])]))),128))])])])])])]),n.value?(d(),a("div",G,[t("div",H,[e[8]||(e[8]=t("h2",{class:"text-lg font-medium mb-4"},"Nouveau plan",-1)),t("form",{onSubmit:N(v,["prevent"])},[t("div",J,[t("div",null,[e[5]||(e[5]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),f(t("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>r.value.nom=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[x,r.value.nom]])]),t("div",null,[e[6]||(e[6]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),f(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=s=>r.value.description=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[x,r.value.description]])])]),t("div",K,[t("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:e[2]||(e[2]=s=>n.value=!1)}," Annuler "),e[7]||(e[7]=t("button",{type:"submit",class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm"}," Créer ",-1))])],32)])])):C("",!0)]))}});export{W as default};
