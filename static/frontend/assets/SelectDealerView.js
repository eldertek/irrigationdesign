import{d as x,j as y,r as u,o as b,c as l,a as e,w as h,b as g,t as m,f as w,l as _,n as k,F as S,e as C,g as z,h as a}from"./index.js";const D={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},L={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},M={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},V={key:0,class:"flex justify-center"},j={key:0,class:"bg-red-50 p-4 rounded-md"},B={class:"flex"},E={class:"ml-3"},F={class:"text-sm text-red-700"},N=["value"],A=["disabled"],U=x({__name:"SelectDealerView",setup(P){const f=z(),d=y(),c=u([]),i=u(null),o=u(!1),r=u("");b(async()=>{try{o.value=!0,await v()}catch(t){r.value="Erreur lors du chargement des concessionnaires",console.error(t)}finally{o.value=!1}});async function v(){try{const t=await d.fetchConcessionnaires();c.value=t}catch(t){throw r.value="Erreur lors du chargement des concessionnaires",t}}async function p(){var t;if(!i.value){r.value="Veuillez sélectionner un concessionnaire";return}try{o.value=!0,await d.setConcessionnaire((t=d.user)==null?void 0:t.id,i.value),f.push({name:"home"})}catch(s){r.value="Erreur lors de la sélection du concessionnaire",console.error(s)}finally{o.value=!1}}return(t,s)=>(a(),l("div",D,[s[5]||(s[5]=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Sélectionnez votre concessionnaire "),e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour commencer à utiliser l'application, veuillez sélectionner votre concessionnaire ")],-1)),e("div",L,[e("div",M,[o.value?(a(),l("div",V,s[1]||(s[1]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)]))):(a(),l("form",{key:1,onSubmit:h(p,["prevent"]),class:"space-y-6"},[r.value?(a(),l("div",j,[e("div",B,[s[2]||(s[2]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",E,[e("p",F,m(r.value),1)])])])):g("",!0),e("div",null,[s[4]||(s[4]=e("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),w(e("select",{id:"dealer","onUpdate:modelValue":s[0]||(s[0]=n=>i.value=n),class:k(["mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md",{"border-red-300":r.value}])},[s[3]||(s[3]=e("option",{value:"",disabled:"",selected:""},"Sélectionnez un concessionnaire",-1)),(a(!0),l(S,null,C(c.value,n=>(a(),l("option",{key:n.id,value:n.id},m(n.company_name||n.username),9,N))),128))],2),[[_,i.value]])]),e("div",null,[e("button",{type:"submit",disabled:!i.value||o.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"}," Confirmer ",8,A)])],32))])])]))}});export{U as default};
