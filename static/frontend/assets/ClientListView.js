import{d as g,i as _,r,o as h,j as v,c as a,a as t,b as w,F as b,e as C,t as l,h as n}from"./index.js";const k={class:"container mx-auto px-4 py-8"},j={class:"sm:flex sm:items-center"},D={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},A={class:"mt-8 flex flex-col"},V={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},E={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},L={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},N={class:"min-w-full divide-y divide-gray-300"},S={class:"divide-y divide-gray-200 bg-white"},B={key:0,class:"animate-pulse"},M={key:1},$={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},F={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},q={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},z={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},G={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},H=["onClick"],I=["onClick"],O=g({__name:"ClientListView",setup(J){const d=_(),i=r([]),c=r(!0),p=r(!1);h(async()=>{await m()});async function m(){var o;try{const e=await v.get("/api/users/",{params:{dealer:(o=d.user)==null?void 0:o.id,role:"client"}});i.value=e.data}catch(e){console.error("Error fetching clients:",e)}finally{c.value=!1}}function x(o){return new Date(o).toLocaleDateString()}function u(o){console.log("View client details:",o)}function y(o){console.log("Edit client:",o)}return(o,e)=>(n(),a("div",k,[t("div",j,[e[1]||(e[1]=t("div",{class:"sm:flex-auto"},[t("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),t("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),t("div",D,[t("button",{onClick:e[0]||(e[0]=s=>p.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Ajouter un client ")])]),t("div",A,[t("div",V,[t("div",E,[t("div",L,[t("table",N,[e[4]||(e[4]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Nom "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),t("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Dernier plan "),t("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",S,[c.value?(n(),a("tr",B,e[2]||(e[2]=[t("td",{colspan:"5",class:"py-4 px-6"},[t("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):i.value.length===0?(n(),a("tr",M,e[3]||(e[3]=[t("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):w("",!0),(n(!0),a(b,null,C(i.value,s=>(n(),a("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",$,l(s.first_name)+" "+l(s.last_name),1),t("td",F,l(s.email),1),t("td",q,l(s.projects_count),1),t("td",z,l(s.last_project_date?x(s.last_project_date):"-"),1),t("td",G,[t("button",{onClick:f=>u(s),class:"text-primary-600 hover:text-primary-900 mr-4"}," Voir les détails ",8,H),t("button",{onClick:f=>y(s),class:"text-primary-600 hover:text-primary-900"}," Modifier ",8,I)])]))),128))])])])])])])]))}});export{O as default};
