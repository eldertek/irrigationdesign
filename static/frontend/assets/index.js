var vv=Object.defineProperty;var yv=(t,e,n)=>e in t?vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var De=(t,e,n)=>yv(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Rd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const yi={},Du=[],Pa=()=>{},_v=()=>!1,Ih=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Id=t=>t.startsWith("onUpdate:"),Fr=Object.assign,Fd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},bv=Object.prototype.hasOwnProperty,ui=(t,e)=>bv.call(t,e),dn=Array.isArray,Nu=t=>Nc(t)==="[object Map]",$u=t=>Nc(t)==="[object Set]",_p=t=>Nc(t)==="[object Date]",An=t=>typeof t=="function",rr=t=>typeof t=="string",Sa=t=>typeof t=="symbol",_i=t=>t!==null&&typeof t=="object",Lg=t=>(_i(t)||An(t))&&An(t.then)&&An(t.catch),Cg=Object.prototype.toString,Nc=t=>Cg.call(t),wv=t=>Nc(t).slice(8,-1),Pg=t=>Nc(t)==="[object Object]",jd=t=>rr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,uc=Rd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fh=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},xv=/-(\w)/g,To=Fh(t=>t.replace(xv,(e,n)=>n?n.toUpperCase():"")),Lv=/\B([A-Z])/g,uu=Fh(t=>t.replace(Lv,"-$1").toLowerCase()),jh=Fh(t=>t.charAt(0).toUpperCase()+t.slice(1)),bf=Fh(t=>t?`on${jh(t)}`:""),Al=(t,e)=>!Object.is(t,e),oh=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},kg=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},bh=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Cv=t=>{const e=rr(t)?Number(t):NaN;return isNaN(e)?t:e};let bp;const zh=()=>bp||(bp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Uh(t){if(dn(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=rr(i)?Ev(i):Uh(i);if(o)for(const a in o)e[a]=o[a]}return e}else if(rr(t)||_i(t))return t}const Pv=/;(?![^(]*\))/g,kv=/:([^]+)/,Sv=/\/\*[^]*?\*\//g;function Ev(t){const e={};return t.replace(Sv,"").split(Pv).forEach(n=>{if(n){const i=n.split(kv);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Oi(t){let e="";if(rr(t))e=t;else if(dn(t))for(let n=0;n<t.length;n++){const i=Oi(t[n]);i&&(e+=i+" ")}else if(_i(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Av="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mv=Rd(Av);function Sg(t){return!!t||t===""}function Bv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=su(t[i],e[i]);return n}function su(t,e){if(t===e)return!0;let n=_p(t),i=_p(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=Sa(t),i=Sa(e),n||i)return t===e;if(n=dn(t),i=dn(e),n||i)return n&&i?Bv(t,e):!1;if(n=_i(t),i=_i(e),n||i){if(!n||!i)return!1;const o=Object.keys(t).length,a=Object.keys(e).length;if(o!==a)return!1;for(const l in t){const f=t.hasOwnProperty(l),p=e.hasOwnProperty(l);if(f&&!p||!f&&p||!su(t[l],e[l]))return!1}}return String(t)===String(e)}function zd(t,e){return t.findIndex(n=>su(n,e))}const Eg=t=>!!(t&&t.__v_isRef===!0),Pe=t=>rr(t)?t:t==null?"":dn(t)||_i(t)&&(t.toString===Cg||!An(t.toString))?Eg(t)?Pe(t.value):JSON.stringify(t,Ag,2):String(t),Ag=(t,e)=>Eg(e)?Ag(t,e.value):Nu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,o],a)=>(n[wf(i,a)+" =>"]=o,n),{})}:$u(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>wf(n))}:Sa(e)?wf(e):_i(e)&&!dn(e)&&!Pg(e)?String(e):e,wf=(t,e="")=>{var n;return Sa(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _s;class Mg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_s,!e&&_s&&(this.index=(_s.scopes||(_s.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=_s;try{return _s=this,e()}finally{_s=n}}}on(){_s=this}off(){_s=this.parent}stop(e){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Bg(t){return new Mg(t)}function Tg(){return _s}function Tv(t,e=!1){_s&&_s.cleanups.push(t)}let Ci;const xf=new WeakSet;class Dg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_s&&_s.active&&_s.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xf.has(this)&&(xf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Og(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wp(this),Rg(this);const e=Ci,n=Yo;Ci=this,Yo=!0;try{return this.fn()}finally{Ig(this),Ci=e,Yo=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)$d(e);this.deps=this.depsTail=void 0,wp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yf(this)&&this.run()}get dirty(){return Yf(this)}}let Ng=0,cc,hc;function Og(t,e=!1){if(t.flags|=8,e){t.next=hc,hc=t;return}t.next=cc,cc=t}function Ud(){Ng++}function qd(){if(--Ng>0)return;if(hc){let e=hc;for(hc=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;cc;){let e=cc;for(cc=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=n}}if(t)throw t}function Rg(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ig(t){let e,n=t.depsTail,i=n;for(;i;){const o=i.prevDep;i.version===-1?(i===n&&(n=o),$d(i),Dv(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}t.deps=e,t.depsTail=n}function Yf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Fg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Fg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===wc))return;t.globalVersion=wc;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Yf(t)){t.flags&=-3;return}const n=Ci,i=Yo;Ci=t,Yo=!0;try{Rg(t);const o=t.fn(t._value);(e.version===0||Al(o,t._value))&&(t._value=o,e.version++)}catch(o){throw e.version++,o}finally{Ci=n,Yo=i,Ig(t),t.flags&=-3}}function $d(t,e=!1){const{dep:n,prevSub:i,nextSub:o}=t;if(i&&(i.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=i,t.nextSub=void 0),n.subs===t&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)$d(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Dv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Yo=!0;const jg=[];function Ol(){jg.push(Yo),Yo=!1}function Rl(){const t=jg.pop();Yo=t===void 0?!0:t}function wp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ci;Ci=void 0;try{e()}finally{Ci=n}}}let wc=0;class Nv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ci||!Yo||Ci===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ci)n=this.activeLink=new Nv(Ci,this),Ci.deps?(n.prevDep=Ci.depsTail,Ci.depsTail.nextDep=n,Ci.depsTail=n):Ci.deps=Ci.depsTail=n,zg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Ci.depsTail,n.nextDep=void 0,Ci.depsTail.nextDep=n,Ci.depsTail=n,Ci.deps===n&&(Ci.deps=i)}return n}trigger(e){this.version++,wc++,this.notify(e)}notify(e){Ud();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{qd()}}}function zg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)zg(i)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const wh=new WeakMap,eu=Symbol(""),Jf=Symbol(""),xc=Symbol("");function ss(t,e,n){if(Yo&&Ci){let i=wh.get(t);i||wh.set(t,i=new Map);let o=i.get(n);o||(i.set(n,o=new Vd),o.map=i,o.key=n),o.track()}}function Ka(t,e,n,i,o,a){const l=wh.get(t);if(!l){wc++;return}const f=p=>{p&&p.trigger()};if(Ud(),e==="clear")l.forEach(f);else{const p=dn(t),v=p&&jd(n);if(p&&n==="length"){const b=Number(i);l.forEach((w,S)=>{(S==="length"||S===xc||!Sa(S)&&S>=b)&&f(w)})}else switch((n!==void 0||l.has(void 0))&&f(l.get(n)),v&&f(l.get(xc)),e){case"add":p?v&&f(l.get("length")):(f(l.get(eu)),Nu(t)&&f(l.get(Jf)));break;case"delete":p||(f(l.get(eu)),Nu(t)&&f(l.get(Jf)));break;case"set":Nu(t)&&f(l.get(eu));break}}qd()}function Ov(t,e){const n=wh.get(t);return n&&n.get(e)}function _u(t){const e=Xn(t);return e===t?e:(ss(e,"iterate",xc),Ao(t)?e:e.map(os))}function qh(t){return ss(t=Xn(t),"iterate",xc),t}const Rv={__proto__:null,[Symbol.iterator](){return Lf(this,Symbol.iterator,os)},concat(...t){return _u(this).concat(...t.map(e=>dn(e)?_u(e):e))},entries(){return Lf(this,"entries",t=>(t[1]=os(t[1]),t))},every(t,e){return Va(this,"every",t,e,void 0,arguments)},filter(t,e){return Va(this,"filter",t,e,n=>n.map(os),arguments)},find(t,e){return Va(this,"find",t,e,os,arguments)},findIndex(t,e){return Va(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Va(this,"findLast",t,e,os,arguments)},findLastIndex(t,e){return Va(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Va(this,"forEach",t,e,void 0,arguments)},includes(...t){return Cf(this,"includes",t)},indexOf(...t){return Cf(this,"indexOf",t)},join(t){return _u(this).join(t)},lastIndexOf(...t){return Cf(this,"lastIndexOf",t)},map(t,e){return Va(this,"map",t,e,void 0,arguments)},pop(){return Xu(this,"pop")},push(...t){return Xu(this,"push",t)},reduce(t,...e){return xp(this,"reduce",t,e)},reduceRight(t,...e){return xp(this,"reduceRight",t,e)},shift(){return Xu(this,"shift")},some(t,e){return Va(this,"some",t,e,void 0,arguments)},splice(...t){return Xu(this,"splice",t)},toReversed(){return _u(this).toReversed()},toSorted(t){return _u(this).toSorted(t)},toSpliced(...t){return _u(this).toSpliced(...t)},unshift(...t){return Xu(this,"unshift",t)},values(){return Lf(this,"values",os)}};function Lf(t,e,n){const i=qh(t),o=i[e]();return i!==t&&!Ao(t)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=n(a.value)),a}),o}const Iv=Array.prototype;function Va(t,e,n,i,o,a){const l=qh(t),f=l!==t&&!Ao(t),p=l[e];if(p!==Iv[e]){const w=p.apply(t,a);return f?os(w):w}let v=n;l!==t&&(f?v=function(w,S){return n.call(this,os(w),S,t)}:n.length>2&&(v=function(w,S){return n.call(this,w,S,t)}));const b=p.call(l,v,i);return f&&o?o(b):b}function xp(t,e,n,i){const o=qh(t);let a=n;return o!==t&&(Ao(t)?n.length>3&&(a=function(l,f,p){return n.call(this,l,f,p,t)}):a=function(l,f,p){return n.call(this,l,os(f),p,t)}),o[e](a,...i)}function Cf(t,e,n){const i=Xn(t);ss(i,"iterate",xc);const o=i[e](...n);return(o===-1||o===!1)&&Wd(n[0])?(n[0]=Xn(n[0]),i[e](...n)):o}function Xu(t,e,n=[]){Ol(),Ud();const i=Xn(t)[e].apply(t,n);return qd(),Rl(),i}const Fv=Rd("__proto__,__v_isRef,__isVue"),Ug=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sa));function jv(t){Sa(t)||(t=String(t));const e=Xn(this);return ss(e,"has",t),e.hasOwnProperty(t)}class qg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return i===(o?a?Kv:Gg:a?Hg:Vg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const l=dn(e);if(!o){let p;if(l&&(p=Rv[n]))return p;if(n==="hasOwnProperty")return jv}const f=Reflect.get(e,n,ir(e)?e:i);return(Sa(n)?Ug.has(n):Fv(n))||(o||ss(e,"get",n),a)?f:ir(f)?l&&jd(n)?f:f.value:_i(f)?o?Zg(f):el(f):f}}class $g extends qg{constructor(e=!1){super(!1,e)}set(e,n,i,o){let a=e[n];if(!this._isShallow){const p=ou(a);if(!Ao(i)&&!ou(i)&&(a=Xn(a),i=Xn(i)),!dn(e)&&ir(a)&&!ir(i))return p?!1:(a.value=i,!0)}const l=dn(e)&&jd(n)?Number(n)<e.length:ui(e,n),f=Reflect.set(e,n,i,ir(e)?e:o);return e===Xn(o)&&(l?Al(i,a)&&Ka(e,"set",n,i):Ka(e,"add",n,i)),f}deleteProperty(e,n){const i=ui(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&i&&Ka(e,"delete",n,void 0),o}has(e,n){const i=Reflect.has(e,n);return(!Sa(n)||!Ug.has(n))&&ss(e,"has",n),i}ownKeys(e){return ss(e,"iterate",dn(e)?"length":eu),Reflect.ownKeys(e)}}class zv extends qg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Uv=new $g,qv=new zv,$v=new $g(!0);const Xf=t=>t,Yc=t=>Reflect.getPrototypeOf(t);function Vv(t,e,n){return function(...i){const o=this.__v_raw,a=Xn(o),l=Nu(a),f=t==="entries"||t===Symbol.iterator&&l,p=t==="keys"&&l,v=o[t](...i),b=n?Xf:e?Qf:os;return!e&&ss(a,"iterate",p?Jf:eu),{next(){const{value:w,done:S}=v.next();return S?{value:w,done:S}:{value:f?[b(w[0]),b(w[1])]:b(w),done:S}},[Symbol.iterator](){return this}}}}function Jc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Hv(t,e){const n={get(o){const a=this.__v_raw,l=Xn(a),f=Xn(o);t||(Al(o,f)&&ss(l,"get",o),ss(l,"get",f));const{has:p}=Yc(l),v=e?Xf:t?Qf:os;if(p.call(l,o))return v(a.get(o));if(p.call(l,f))return v(a.get(f));a!==l&&a.get(o)},get size(){const o=this.__v_raw;return!t&&ss(Xn(o),"iterate",eu),Reflect.get(o,"size",o)},has(o){const a=this.__v_raw,l=Xn(a),f=Xn(o);return t||(Al(o,f)&&ss(l,"has",o),ss(l,"has",f)),o===f?a.has(o):a.has(o)||a.has(f)},forEach(o,a){const l=this,f=l.__v_raw,p=Xn(f),v=e?Xf:t?Qf:os;return!t&&ss(p,"iterate",eu),f.forEach((b,w)=>o.call(a,v(b),v(w),l))}};return Fr(n,t?{add:Jc("add"),set:Jc("set"),delete:Jc("delete"),clear:Jc("clear")}:{add(o){!e&&!Ao(o)&&!ou(o)&&(o=Xn(o));const a=Xn(this);return Yc(a).has.call(a,o)||(a.add(o),Ka(a,"add",o,o)),this},set(o,a){!e&&!Ao(a)&&!ou(a)&&(a=Xn(a));const l=Xn(this),{has:f,get:p}=Yc(l);let v=f.call(l,o);v||(o=Xn(o),v=f.call(l,o));const b=p.call(l,o);return l.set(o,a),v?Al(a,b)&&Ka(l,"set",o,a):Ka(l,"add",o,a),this},delete(o){const a=Xn(this),{has:l,get:f}=Yc(a);let p=l.call(a,o);p||(o=Xn(o),p=l.call(a,o)),f&&f.call(a,o);const v=a.delete(o);return p&&Ka(a,"delete",o,void 0),v},clear(){const o=Xn(this),a=o.size!==0,l=o.clear();return a&&Ka(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Vv(o,t,e)}),n}function Hd(t,e){const n=Hv(t,e);return(i,o,a)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?i:Reflect.get(ui(n,o)&&o in i?n:i,o,a)}const Gv={get:Hd(!1,!1)},Wv={get:Hd(!1,!0)},Zv={get:Hd(!0,!1)};const Vg=new WeakMap,Hg=new WeakMap,Gg=new WeakMap,Kv=new WeakMap;function Yv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jv(t){return t.__v_skip||!Object.isExtensible(t)?0:Yv(wv(t))}function el(t){return ou(t)?t:Gd(t,!1,Uv,Gv,Vg)}function Wg(t){return Gd(t,!1,$v,Wv,Hg)}function Zg(t){return Gd(t,!0,qv,Zv,Gg)}function Gd(t,e,n,i,o){if(!_i(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=o.get(t);if(a)return a;const l=Jv(t);if(l===0)return t;const f=new Proxy(t,l===2?i:n);return o.set(t,f),f}function Ml(t){return ou(t)?Ml(t.__v_raw):!!(t&&t.__v_isReactive)}function ou(t){return!!(t&&t.__v_isReadonly)}function Ao(t){return!!(t&&t.__v_isShallow)}function Wd(t){return t?!!t.__v_raw:!1}function Xn(t){const e=t&&t.__v_raw;return e?Xn(e):t}function Zd(t){return!ui(t,"__v_skip")&&Object.isExtensible(t)&&kg(t,"__v_skip",!0),t}const os=t=>_i(t)?el(t):t,Qf=t=>_i(t)?Zg(t):t;function ir(t){return t?t.__v_isRef===!0:!1}function Fe(t){return Kg(t,!1)}function Xv(t){return Kg(t,!0)}function Kg(t,e){return ir(t)?t:new Qv(t,e)}class Qv{constructor(e,n){this.dep=new Vd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Xn(e),this._value=n?e:os(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,i=this.__v_isShallow||Ao(e)||ou(e);e=i?e:Xn(e),Al(e,n)&&(this._rawValue=e,this._value=i?e:os(e),this.dep.trigger())}}function Rn(t){return ir(t)?t.value:t}const ty={get:(t,e,n)=>e==="__v_raw"?t:Rn(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const o=t[e];return ir(o)&&!ir(n)?(o.value=n,!0):Reflect.set(t,e,n,i)}};function Yg(t){return Ml(t)?t:new Proxy(t,ty)}function ey(t){const e=dn(t)?new Array(t.length):{};for(const n in t)e[n]=iy(t,n);return e}class ny{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ov(Xn(this._object),this._key)}}function iy(t,e,n){const i=t[e];return ir(i)?i:new ny(t,e,n)}class ry{constructor(e,n,i){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Vd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Ci!==this)return Og(this,!0),!0}get value(){const e=this.dep.track();return Fg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function sy(t,e,n=!1){let i,o;return An(t)?i=t:(i=t.get,o=t.set),new ry(i,o,n)}const Xc={},xh=new WeakMap;let Wl;function oy(t,e=!1,n=Wl){if(n){let i=xh.get(n);i||xh.set(n,i=[]),i.push(t)}}function ay(t,e,n=yi){const{immediate:i,deep:o,once:a,scheduler:l,augmentJob:f,call:p}=n,v=kt=>o?kt:Ao(kt)||o===!1||o===0?Ya(kt,1):Ya(kt);let b,w,S,x,j=!1,R=!1;if(ir(t)?(w=()=>t.value,j=Ao(t)):Ml(t)?(w=()=>v(t),j=!0):dn(t)?(R=!0,j=t.some(kt=>Ml(kt)||Ao(kt)),w=()=>t.map(kt=>{if(ir(kt))return kt.value;if(Ml(kt))return v(kt);if(An(kt))return p?p(kt,2):kt()})):An(t)?e?w=p?()=>p(t,2):t:w=()=>{if(S){Ol();try{S()}finally{Rl()}}const kt=Wl;Wl=b;try{return p?p(t,3,[x]):t(x)}finally{Wl=kt}}:w=Pa,e&&o){const kt=w,At=o===!0?1/0:o;w=()=>Ya(kt(),At)}const U=Tg(),N=()=>{b.stop(),U&&U.active&&Fd(U.effects,b)};if(a&&e){const kt=e;e=(...At)=>{kt(...At),N()}}let Z=R?new Array(t.length).fill(Xc):Xc;const Y=kt=>{if(!(!(b.flags&1)||!b.dirty&&!kt))if(e){const At=b.run();if(o||j||(R?At.some((Dt,xt)=>Al(Dt,Z[xt])):Al(At,Z))){S&&S();const Dt=Wl;Wl=b;try{const xt=[At,Z===Xc?void 0:R&&Z[0]===Xc?[]:Z,x];p?p(e,3,xt):e(...xt),Z=At}finally{Wl=Dt}}}else b.run()};return f&&f(Y),b=new Dg(w),b.scheduler=l?()=>l(Y,!1):Y,x=kt=>oy(kt,!1,b),S=b.onStop=()=>{const kt=xh.get(b);if(kt){if(p)p(kt,4);else for(const At of kt)At();xh.delete(b)}},e?i?Y(!0):Z=b.run():l?l(Y.bind(null,!0),!0):b.run(),N.pause=b.pause.bind(b),N.resume=b.resume.bind(b),N.stop=N,N}function Ya(t,e=1/0,n){if(e<=0||!_i(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ir(t))Ya(t.value,e,n);else if(dn(t))for(let i=0;i<t.length;i++)Ya(t[i],e,n);else if($u(t)||Nu(t))t.forEach(i=>{Ya(i,e,n)});else if(Pg(t)){for(const i in t)Ya(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Ya(t[i],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Oc(t,e,n,i){try{return i?t(...i):t()}catch(o){$h(o,e,n)}}function Jo(t,e,n,i){if(An(t)){const o=Oc(t,e,n,i);return o&&Lg(o)&&o.catch(a=>{$h(a,e,n)}),o}if(dn(t)){const o=[];for(let a=0;a<t.length;a++)o.push(Jo(t[a],e,n,i));return o}}function $h(t,e,n,i=!0){const o=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=e&&e.appContext.config||yi;if(e){let f=e.parent;const p=e.proxy,v=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const b=f.ec;if(b){for(let w=0;w<b.length;w++)if(b[w](t,p,v)===!1)return}f=f.parent}if(a){Ol(),Oc(a,null,10,[t,p,v]),Rl();return}}ly(t,n,o,i,l)}function ly(t,e,n,i=!0,o=!1){if(o)throw t;console.error(t)}const bs=[];let xa=-1;const Ou=[];let xl=null,Cu=0;const Jg=Promise.resolve();let Lh=null;function Ni(t){const e=Lh||Jg;return t?e.then(this?t.bind(this):t):e}function uy(t){let e=xa+1,n=bs.length;for(;e<n;){const i=e+n>>>1,o=bs[i],a=Lc(o);a<t||a===t&&o.flags&2?e=i+1:n=i}return e}function Kd(t){if(!(t.flags&1)){const e=Lc(t),n=bs[bs.length-1];!n||!(t.flags&2)&&e>=Lc(n)?bs.push(t):bs.splice(uy(e),0,t),t.flags|=1,Xg()}}function Xg(){Lh||(Lh=Jg.then(tm))}function cy(t){dn(t)?Ou.push(...t):xl&&t.id===-1?xl.splice(Cu+1,0,t):t.flags&1||(Ou.push(t),t.flags|=1),Xg()}function Lp(t,e,n=xa+1){for(;n<bs.length;n++){const i=bs[n];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;bs.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Qg(t){if(Ou.length){const e=[...new Set(Ou)].sort((n,i)=>Lc(n)-Lc(i));if(Ou.length=0,xl){xl.push(...e);return}for(xl=e,Cu=0;Cu<xl.length;Cu++){const n=xl[Cu];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}xl=null,Cu=0}}const Lc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function tm(t){try{for(xa=0;xa<bs.length;xa++){const e=bs[xa];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Oc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;xa<bs.length;xa++){const e=bs[xa];e&&(e.flags&=-2)}xa=-1,bs.length=0,Qg(),Lh=null,(bs.length||Ou.length)&&tm()}}let ws=null,em=null;function Ch(t){const e=ws;return ws=t,em=t&&t.type.__scopeId||null,e}function Ja(t,e=ws,n){if(!e||t._n)return t;const i=(...o)=>{i._d&&Np(-1);const a=Ch(e);let l;try{l=t(...o)}finally{Ch(a),i._d&&Np(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function gn(t,e){if(ws===null)return t;const n=Yh(ws),i=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[a,l,f,p=yi]=e[o];a&&(An(a)&&(a={mounted:a,updated:a}),a.deep&&Ya(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:f,modifiers:p}))}return t}function $l(t,e,n,i){const o=t.dirs,a=e&&e.dirs;for(let l=0;l<o.length;l++){const f=o[l];a&&(f.oldValue=a[l].value);let p=f.dir[i];p&&(Ol(),Jo(p,n,8,[t.el,f,t,e]),Rl())}}const hy=Symbol("_vte"),nm=t=>t.__isTeleport,Ll=Symbol("_leaveCb"),Qc=Symbol("_enterCb");function fy(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ea(()=>{t.isMounted=!0}),Gh(()=>{t.isUnmounting=!0}),t}const ko=[Function,Array],im={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ko,onEnter:ko,onAfterEnter:ko,onEnterCancelled:ko,onBeforeLeave:ko,onLeave:ko,onAfterLeave:ko,onLeaveCancelled:ko,onBeforeAppear:ko,onAppear:ko,onAfterAppear:ko,onAppearCancelled:ko},rm=t=>{const e=t.subTree;return e.component?rm(e.component):e},dy={name:"BaseTransition",props:im,setup(t,{slots:e}){const n=h_(),i=fy();return()=>{const o=e.default&&am(e.default(),!0);if(!o||!o.length)return;const a=sm(o),l=Xn(t),{mode:f}=l;if(i.isLeaving)return Pf(a);const p=Cp(a);if(!p)return Pf(a);let v=td(p,l,i,n,w=>v=w);p.type!==qs&&Cc(p,v);let b=n.subTree&&Cp(n.subTree);if(b&&b.type!==qs&&!Kl(p,b)&&rm(n).type!==qs){let w=td(b,l,i,n);if(Cc(b,w),f==="out-in"&&p.type!==qs)return i.isLeaving=!0,w.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete w.afterLeave,b=void 0},Pf(a);f==="in-out"&&p.type!==qs?w.delayLeave=(S,x,j)=>{const R=om(i,b);R[String(b.key)]=b,S[Ll]=()=>{x(),S[Ll]=void 0,delete v.delayedLeave,b=void 0},v.delayedLeave=()=>{j(),delete v.delayedLeave,b=void 0}}:b=void 0}else b&&(b=void 0);return a}}};function sm(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==qs){e=n;break}}return e}const py=dy;function om(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function td(t,e,n,i,o){const{appear:a,mode:l,persisted:f=!1,onBeforeEnter:p,onEnter:v,onAfterEnter:b,onEnterCancelled:w,onBeforeLeave:S,onLeave:x,onAfterLeave:j,onLeaveCancelled:R,onBeforeAppear:U,onAppear:N,onAfterAppear:Z,onAppearCancelled:Y}=e,kt=String(t.key),At=om(n,t),Dt=(_t,zt)=>{_t&&Jo(_t,i,9,zt)},xt=(_t,zt)=>{const X=zt[1];Dt(_t,zt),dn(_t)?_t.every(W=>W.length<=1)&&X():_t.length<=1&&X()},gt={mode:l,persisted:f,beforeEnter(_t){let zt=p;if(!n.isMounted)if(a)zt=U||p;else return;_t[Ll]&&_t[Ll](!0);const X=At[kt];X&&Kl(t,X)&&X.el[Ll]&&X.el[Ll](),Dt(zt,[_t])},enter(_t){let zt=v,X=b,W=w;if(!n.isMounted)if(a)zt=N||v,X=Z||b,W=Y||w;else return;let St=!1;const Mt=_t[Qc]=A=>{St||(St=!0,A?Dt(W,[_t]):Dt(X,[_t]),gt.delayedLeave&&gt.delayedLeave(),_t[Qc]=void 0)};zt?xt(zt,[_t,Mt]):Mt()},leave(_t,zt){const X=String(t.key);if(_t[Qc]&&_t[Qc](!0),n.isUnmounting)return zt();Dt(S,[_t]);let W=!1;const St=_t[Ll]=Mt=>{W||(W=!0,zt(),Mt?Dt(R,[_t]):Dt(j,[_t]),_t[Ll]=void 0,At[X]===t&&delete At[X])};At[X]=t,x?xt(x,[_t,St]):St()},clone(_t){const zt=td(_t,e,n,i,o);return o&&o(zt),zt}};return gt}function Pf(t){if(Vh(t))return t=Bl(t),t.children=null,t}function Cp(t){if(!Vh(t))return nm(t.type)&&t.children?sm(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&An(n.default))return n.default()}}function Cc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Cc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function am(t,e=!1,n){let i=[],o=0;for(let a=0;a<t.length;a++){let l=t[a];const f=n==null?l.key:String(n)+String(l.key!=null?l.key:a);l.type===_n?(l.patchFlag&128&&o++,i=i.concat(am(l.children,e,f))):(e||l.type!==qs)&&i.push(f!=null?Bl(l,{key:f}):l)}if(o>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function Ls(t,e){return An(t)?Fr({name:t.name},e,{setup:t}):t}function lm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ph(t,e,n,i,o=!1){if(dn(t)){t.forEach((j,R)=>Ph(j,e&&(dn(e)?e[R]:e),n,i,o));return}if(fc(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Ph(t,e,n,i.component.subTree);return}const a=i.shapeFlag&4?Yh(i.component):i.el,l=o?null:a,{i:f,r:p}=t,v=e&&e.r,b=f.refs===yi?f.refs={}:f.refs,w=f.setupState,S=Xn(w),x=w===yi?()=>!1:j=>ui(S,j);if(v!=null&&v!==p&&(rr(v)?(b[v]=null,x(v)&&(w[v]=null)):ir(v)&&(v.value=null)),An(p))Oc(p,f,12,[l,b]);else{const j=rr(p),R=ir(p);if(j||R){const U=()=>{if(t.f){const N=j?x(p)?w[p]:b[p]:p.value;o?dn(N)&&Fd(N,a):dn(N)?N.includes(a)||N.push(a):j?(b[p]=[a],x(p)&&(w[p]=b[p])):(p.value=[a],t.k&&(b[t.k]=p.value))}else j?(b[p]=l,x(p)&&(w[p]=l)):R&&(p.value=l,t.k&&(b[t.k]=l))};l?(U.id=-1,oo(U,n)):U()}}}zh().requestIdleCallback;zh().cancelIdleCallback;const fc=t=>!!t.type.__asyncLoader,Vh=t=>t.type.__isKeepAlive;function gy(t,e){um(t,"a",e)}function my(t,e){um(t,"da",e)}function um(t,e,n=Ir){const i=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(Hh(e,i,n),n){let o=n.parent;for(;o&&o.parent;)Vh(o.parent.vnode)&&vy(i,e,n,o),o=o.parent}}function vy(t,e,n,i){const o=Hh(e,t,i,!0);Wh(()=>{Fd(i[e],o)},n)}function Hh(t,e,n=Ir,i=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...l)=>{Ol();const f=Rc(n),p=Jo(e,n,t,l);return f(),Rl(),p});return i?o.unshift(a):o.push(a),a}}const nl=t=>(e,n=Ir)=>{(!kc||t==="sp")&&Hh(t,(...i)=>e(...i),n)},yy=nl("bm"),Ea=nl("m"),_y=nl("bu"),by=nl("u"),Gh=nl("bum"),Wh=nl("um"),wy=nl("sp"),xy=nl("rtg"),Ly=nl("rtc");function Cy(t,e=Ir){Hh("ec",t,e)}const Py="components";function ky(t,e){return Ey(Py,t,!0,e)||t}const Sy=Symbol.for("v-ndc");function Ey(t,e,n=!0,i=!1){const o=ws||Ir;if(o){const a=o.type;{const f=m_(a,!1);if(f&&(f===e||f===To(e)||f===jh(To(e))))return a}const l=Pp(o[t]||a[t],e)||Pp(o.appContext[t],e);return!l&&i?a:l}}function Pp(t,e){return t&&(t[e]||t[To(e)]||t[jh(To(e))])}function Gn(t,e,n,i){let o;const a=n,l=dn(t);if(l||rr(t)){const f=l&&Ml(t);let p=!1;f&&(p=!Ao(t),t=qh(t)),o=new Array(t.length);for(let v=0,b=t.length;v<b;v++)o[v]=e(p?os(t[v]):t[v],v,void 0,a)}else if(typeof t=="number"){o=new Array(t);for(let f=0;f<t;f++)o[f]=e(f+1,f,void 0,a)}else if(_i(t))if(t[Symbol.iterator])o=Array.from(t,(f,p)=>e(f,p,void 0,a));else{const f=Object.keys(t);o=new Array(f.length);for(let p=0,v=f.length;p<v;p++){const b=f[p];o[p]=e(t[b],b,p,a)}}else o=[];return o}const ed=t=>t?Mm(t)?Yh(t):ed(t.parent):null,dc=Fr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ed(t.parent),$root:t=>ed(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>hm(t),$forceUpdate:t=>t.f||(t.f=()=>{Kd(t.update)}),$nextTick:t=>t.n||(t.n=Ni.bind(t.proxy)),$watch:t=>Yy.bind(t)}),kf=(t,e)=>t!==yi&&!t.__isScriptSetup&&ui(t,e),Ay={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:o,props:a,accessCache:l,type:f,appContext:p}=t;let v;if(e[0]!=="$"){const x=l[e];if(x!==void 0)switch(x){case 1:return i[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(kf(i,e))return l[e]=1,i[e];if(o!==yi&&ui(o,e))return l[e]=2,o[e];if((v=t.propsOptions[0])&&ui(v,e))return l[e]=3,a[e];if(n!==yi&&ui(n,e))return l[e]=4,n[e];nd&&(l[e]=0)}}const b=dc[e];let w,S;if(b)return e==="$attrs"&&ss(t.attrs,"get",""),b(t);if((w=f.__cssModules)&&(w=w[e]))return w;if(n!==yi&&ui(n,e))return l[e]=4,n[e];if(S=p.config.globalProperties,ui(S,e))return S[e]},set({_:t},e,n){const{data:i,setupState:o,ctx:a}=t;return kf(o,e)?(o[e]=n,!0):i!==yi&&ui(i,e)?(i[e]=n,!0):ui(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:o,propsOptions:a}},l){let f;return!!n[l]||t!==yi&&ui(t,l)||kf(e,l)||(f=a[0])&&ui(f,l)||ui(i,l)||ui(dc,l)||ui(o.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ui(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function kp(t){return dn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let nd=!0;function My(t){const e=hm(t),n=t.proxy,i=t.ctx;nd=!1,e.beforeCreate&&Sp(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:l,watch:f,provide:p,inject:v,created:b,beforeMount:w,mounted:S,beforeUpdate:x,updated:j,activated:R,deactivated:U,beforeDestroy:N,beforeUnmount:Z,destroyed:Y,unmounted:kt,render:At,renderTracked:Dt,renderTriggered:xt,errorCaptured:gt,serverPrefetch:_t,expose:zt,inheritAttrs:X,components:W,directives:St,filters:Mt}=e;if(v&&By(v,i,null),l)for(const V in l){const z=l[V];An(z)&&(i[V]=z.bind(n))}if(o){const V=o.call(n,n);_i(V)&&(t.data=el(V))}if(nd=!0,a)for(const V in a){const z=a[V],mt=An(z)?z.bind(n,n):An(z.get)?z.get.bind(n,n):Pa,ft=!An(z)&&An(z.set)?z.set.bind(n):Pa,ht=zn({get:mt,set:ft});Object.defineProperty(i,V,{enumerable:!0,configurable:!0,get:()=>ht.value,set:I=>ht.value=I})}if(f)for(const V in f)cm(f[V],i,n,V);if(p){const V=An(p)?p.call(n):p;Reflect.ownKeys(V).forEach(z=>{ah(z,V[z])})}b&&Sp(b,t,"c");function H(V,z){dn(z)?z.forEach(mt=>V(mt.bind(n))):z&&V(z.bind(n))}if(H(yy,w),H(Ea,S),H(_y,x),H(by,j),H(gy,R),H(my,U),H(Cy,gt),H(Ly,Dt),H(xy,xt),H(Gh,Z),H(Wh,kt),H(wy,_t),dn(zt))if(zt.length){const V=t.exposed||(t.exposed={});zt.forEach(z=>{Object.defineProperty(V,z,{get:()=>n[z],set:mt=>n[z]=mt})})}else t.exposed||(t.exposed={});At&&t.render===Pa&&(t.render=At),X!=null&&(t.inheritAttrs=X),W&&(t.components=W),St&&(t.directives=St),_t&&lm(t)}function By(t,e,n=Pa){dn(t)&&(t=id(t));for(const i in t){const o=t[i];let a;_i(o)?"default"in o?a=Mo(o.from||i,o.default,!0):a=Mo(o.from||i):a=Mo(o),ir(a)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):e[i]=a}}function Sp(t,e,n){Jo(dn(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function cm(t,e,n,i){let o=i.includes(".")?Pm(n,i):()=>n[i];if(rr(t)){const a=e[t];An(a)&&Rr(o,a)}else if(An(t))Rr(o,t.bind(n));else if(_i(t))if(dn(t))t.forEach(a=>cm(a,e,n,i));else{const a=An(t.handler)?t.handler.bind(n):e[t.handler];An(a)&&Rr(o,a,t)}}function hm(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:l}}=t.appContext,f=a.get(e);let p;return f?p=f:!o.length&&!n&&!i?p=e:(p={},o.length&&o.forEach(v=>kh(p,v,l,!0)),kh(p,e,l)),_i(e)&&a.set(e,p),p}function kh(t,e,n,i=!1){const{mixins:o,extends:a}=e;a&&kh(t,a,n,!0),o&&o.forEach(l=>kh(t,l,n,!0));for(const l in e)if(!(i&&l==="expose")){const f=Ty[l]||n&&n[l];t[l]=f?f(t[l],e[l]):e[l]}return t}const Ty={data:Ep,props:Ap,emits:Ap,methods:ac,computed:ac,beforeCreate:vs,created:vs,beforeMount:vs,mounted:vs,beforeUpdate:vs,updated:vs,beforeDestroy:vs,beforeUnmount:vs,destroyed:vs,unmounted:vs,activated:vs,deactivated:vs,errorCaptured:vs,serverPrefetch:vs,components:ac,directives:ac,watch:Ny,provide:Ep,inject:Dy};function Ep(t,e){return e?t?function(){return Fr(An(t)?t.call(this,this):t,An(e)?e.call(this,this):e)}:e:t}function Dy(t,e){return ac(id(t),id(e))}function id(t){if(dn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function vs(t,e){return t?[...new Set([].concat(t,e))]:e}function ac(t,e){return t?Fr(Object.create(null),t,e):e}function Ap(t,e){return t?dn(t)&&dn(e)?[...new Set([...t,...e])]:Fr(Object.create(null),kp(t),kp(e??{})):e}function Ny(t,e){if(!t)return e;if(!e)return t;const n=Fr(Object.create(null),t);for(const i in e)n[i]=vs(t[i],e[i]);return n}function fm(){return{app:null,config:{isNativeTag:_v,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Oy=0;function Ry(t,e){return function(i,o=null){An(i)||(i=Fr({},i)),o!=null&&!_i(o)&&(o=null);const a=fm(),l=new WeakSet,f=[];let p=!1;const v=a.app={_uid:Oy++,_component:i,_props:o,_container:null,_context:a,_instance:null,version:y_,get config(){return a.config},set config(b){},use(b,...w){return l.has(b)||(b&&An(b.install)?(l.add(b),b.install(v,...w)):An(b)&&(l.add(b),b(v,...w))),v},mixin(b){return a.mixins.includes(b)||a.mixins.push(b),v},component(b,w){return w?(a.components[b]=w,v):a.components[b]},directive(b,w){return w?(a.directives[b]=w,v):a.directives[b]},mount(b,w,S){if(!p){const x=v._ceVNode||Mi(i,o);return x.appContext=a,S===!0?S="svg":S===!1&&(S=void 0),t(x,b,S),p=!0,v._container=b,b.__vue_app__=v,Yh(x.component)}},onUnmount(b){f.push(b)},unmount(){p&&(Jo(f,v._instance,16),t(null,v._container),delete v._container.__vue_app__)},provide(b,w){return a.provides[b]=w,v},runWithContext(b){const w=nu;nu=v;try{return b()}finally{nu=w}}};return v}}let nu=null;function ah(t,e){if(Ir){let n=Ir.provides;const i=Ir.parent&&Ir.parent.provides;i===n&&(n=Ir.provides=Object.create(i)),n[t]=e}}function Mo(t,e,n=!1){const i=Ir||ws;if(i||nu){const o=nu?nu._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&An(e)?e.call(i&&i.proxy):e}}function Iy(){return!!(Ir||ws||nu)}const dm={},pm=()=>Object.create(dm),gm=t=>Object.getPrototypeOf(t)===dm;function Fy(t,e,n,i=!1){const o={},a=pm();t.propsDefaults=Object.create(null),mm(t,e,o,a);for(const l in t.propsOptions[0])l in o||(o[l]=void 0);n?t.props=i?o:Wg(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function jy(t,e,n,i){const{props:o,attrs:a,vnode:{patchFlag:l}}=t,f=Xn(o),[p]=t.propsOptions;let v=!1;if((i||l>0)&&!(l&16)){if(l&8){const b=t.vnode.dynamicProps;for(let w=0;w<b.length;w++){let S=b[w];if(Zh(t.emitsOptions,S))continue;const x=e[S];if(p)if(ui(a,S))x!==a[S]&&(a[S]=x,v=!0);else{const j=To(S);o[j]=rd(p,f,j,x,t,!1)}else x!==a[S]&&(a[S]=x,v=!0)}}}else{mm(t,e,o,a)&&(v=!0);let b;for(const w in f)(!e||!ui(e,w)&&((b=uu(w))===w||!ui(e,b)))&&(p?n&&(n[w]!==void 0||n[b]!==void 0)&&(o[w]=rd(p,f,w,void 0,t,!0)):delete o[w]);if(a!==f)for(const w in a)(!e||!ui(e,w))&&(delete a[w],v=!0)}v&&Ka(t.attrs,"set","")}function mm(t,e,n,i){const[o,a]=t.propsOptions;let l=!1,f;if(e)for(let p in e){if(uc(p))continue;const v=e[p];let b;o&&ui(o,b=To(p))?!a||!a.includes(b)?n[b]=v:(f||(f={}))[b]=v:Zh(t.emitsOptions,p)||(!(p in i)||v!==i[p])&&(i[p]=v,l=!0)}if(a){const p=Xn(n),v=f||yi;for(let b=0;b<a.length;b++){const w=a[b];n[w]=rd(o,p,w,v[w],t,!ui(v,w))}}return l}function rd(t,e,n,i,o,a){const l=t[n];if(l!=null){const f=ui(l,"default");if(f&&i===void 0){const p=l.default;if(l.type!==Function&&!l.skipFactory&&An(p)){const{propsDefaults:v}=o;if(n in v)i=v[n];else{const b=Rc(o);i=v[n]=p.call(null,e),b()}}else i=p;o.ce&&o.ce._setProp(n,i)}l[0]&&(a&&!f?i=!1:l[1]&&(i===""||i===uu(n))&&(i=!0))}return i}const zy=new WeakMap;function vm(t,e,n=!1){const i=n?zy:e.propsCache,o=i.get(t);if(o)return o;const a=t.props,l={},f=[];let p=!1;if(!An(t)){const b=w=>{p=!0;const[S,x]=vm(w,e,!0);Fr(l,S),x&&f.push(...x)};!n&&e.mixins.length&&e.mixins.forEach(b),t.extends&&b(t.extends),t.mixins&&t.mixins.forEach(b)}if(!a&&!p)return _i(t)&&i.set(t,Du),Du;if(dn(a))for(let b=0;b<a.length;b++){const w=To(a[b]);Mp(w)&&(l[w]=yi)}else if(a)for(const b in a){const w=To(b);if(Mp(w)){const S=a[b],x=l[w]=dn(S)||An(S)?{type:S}:Fr({},S),j=x.type;let R=!1,U=!0;if(dn(j))for(let N=0;N<j.length;++N){const Z=j[N],Y=An(Z)&&Z.name;if(Y==="Boolean"){R=!0;break}else Y==="String"&&(U=!1)}else R=An(j)&&j.name==="Boolean";x[0]=R,x[1]=U,(R||ui(x,"default"))&&f.push(w)}}const v=[l,f];return _i(t)&&i.set(t,v),v}function Mp(t){return t[0]!=="$"&&!uc(t)}const ym=t=>t[0]==="_"||t==="$stable",Yd=t=>dn(t)?t.map(La):[La(t)],Uy=(t,e,n)=>{if(e._n)return e;const i=Ja((...o)=>Yd(e(...o)),n);return i._c=!1,i},_m=(t,e,n)=>{const i=t._ctx;for(const o in t){if(ym(o))continue;const a=t[o];if(An(a))e[o]=Uy(o,a,i);else if(a!=null){const l=Yd(a);e[o]=()=>l}}},bm=(t,e)=>{const n=Yd(e);t.slots.default=()=>n},wm=(t,e,n)=>{for(const i in e)(n||i!=="_")&&(t[i]=e[i])},qy=(t,e,n)=>{const i=t.slots=pm();if(t.vnode.shapeFlag&32){const o=e._;o?(wm(i,e,n),n&&kg(i,"_",o,!0)):_m(e,i)}else e&&bm(t,e)},$y=(t,e,n)=>{const{vnode:i,slots:o}=t;let a=!0,l=yi;if(i.shapeFlag&32){const f=e._;f?n&&f===1?a=!1:wm(o,e,n):(a=!e.$stable,_m(e,o)),l=e}else e&&(bm(t,e),l={default:1});if(a)for(const f in o)!ym(f)&&l[f]==null&&delete o[f]},oo=i_;function Vy(t){return Hy(t)}function Hy(t,e){const n=zh();n.__VUE__=!0;const{insert:i,remove:o,patchProp:a,createElement:l,createText:f,createComment:p,setText:v,setElementText:b,parentNode:w,nextSibling:S,setScopeId:x=Pa,insertStaticContent:j}=t,R=(G,tt,yt,vt=null,J=null,qt=null,te=void 0,Vt=null,ee=!!tt.dynamicChildren)=>{if(G===tt)return;G&&!Kl(G,tt)&&(vt=q(G),I(G,J,qt,!0),G=null),tt.patchFlag===-2&&(ee=!1,tt.dynamicChildren=null);const{type:Rt,ref:Ot,shapeFlag:ie}=tt;switch(Rt){case Kh:U(G,tt,yt,vt);break;case qs:N(G,tt,yt,vt);break;case lh:G==null&&Z(tt,yt,vt,te);break;case _n:W(G,tt,yt,vt,J,qt,te,Vt,ee);break;default:ie&1?At(G,tt,yt,vt,J,qt,te,Vt,ee):ie&6?St(G,tt,yt,vt,J,qt,te,Vt,ee):(ie&64||ie&128)&&Rt.process(G,tt,yt,vt,J,qt,te,Vt,ee,Et)}Ot!=null&&J&&Ph(Ot,G&&G.ref,qt,tt||G,!tt)},U=(G,tt,yt,vt)=>{if(G==null)i(tt.el=f(tt.children),yt,vt);else{const J=tt.el=G.el;tt.children!==G.children&&v(J,tt.children)}},N=(G,tt,yt,vt)=>{G==null?i(tt.el=p(tt.children||""),yt,vt):tt.el=G.el},Z=(G,tt,yt,vt)=>{[G.el,G.anchor]=j(G.children,tt,yt,vt,G.el,G.anchor)},Y=({el:G,anchor:tt},yt,vt)=>{let J;for(;G&&G!==tt;)J=S(G),i(G,yt,vt),G=J;i(tt,yt,vt)},kt=({el:G,anchor:tt})=>{let yt;for(;G&&G!==tt;)yt=S(G),o(G),G=yt;o(tt)},At=(G,tt,yt,vt,J,qt,te,Vt,ee)=>{tt.type==="svg"?te="svg":tt.type==="math"&&(te="mathml"),G==null?Dt(tt,yt,vt,J,qt,te,Vt,ee):_t(G,tt,J,qt,te,Vt,ee)},Dt=(G,tt,yt,vt,J,qt,te,Vt)=>{let ee,Rt;const{props:Ot,shapeFlag:ie,transition:pe,dirs:ke}=G;if(ee=G.el=l(G.type,qt,Ot&&Ot.is,Ot),ie&8?b(ee,G.children):ie&16&&gt(G.children,ee,null,vt,J,Sf(G,qt),te,Vt),ke&&$l(G,null,vt,"created"),xt(ee,G,G.scopeId,te,vt),Ot){for(const oe in Ot)oe!=="value"&&!uc(oe)&&a(ee,oe,null,Ot[oe],qt,vt);"value"in Ot&&a(ee,"value",null,Ot.value,qt),(Rt=Ot.onVnodeBeforeMount)&&ya(Rt,vt,G)}ke&&$l(G,null,vt,"beforeMount");const Kt=Gy(J,pe);Kt&&pe.beforeEnter(ee),i(ee,tt,yt),((Rt=Ot&&Ot.onVnodeMounted)||Kt||ke)&&oo(()=>{Rt&&ya(Rt,vt,G),Kt&&pe.enter(ee),ke&&$l(G,null,vt,"mounted")},J)},xt=(G,tt,yt,vt,J)=>{if(yt&&x(G,yt),vt)for(let qt=0;qt<vt.length;qt++)x(G,vt[qt]);if(J){let qt=J.subTree;if(tt===qt||Sm(qt.type)&&(qt.ssContent===tt||qt.ssFallback===tt)){const te=J.vnode;xt(G,te,te.scopeId,te.slotScopeIds,J.parent)}}},gt=(G,tt,yt,vt,J,qt,te,Vt,ee=0)=>{for(let Rt=ee;Rt<G.length;Rt++){const Ot=G[Rt]=Vt?Cl(G[Rt]):La(G[Rt]);R(null,Ot,tt,yt,vt,J,qt,te,Vt)}},_t=(G,tt,yt,vt,J,qt,te)=>{const Vt=tt.el=G.el;let{patchFlag:ee,dynamicChildren:Rt,dirs:Ot}=tt;ee|=G.patchFlag&16;const ie=G.props||yi,pe=tt.props||yi;let ke;if(yt&&Vl(yt,!1),(ke=pe.onVnodeBeforeUpdate)&&ya(ke,yt,tt,G),Ot&&$l(tt,G,yt,"beforeUpdate"),yt&&Vl(yt,!0),(ie.innerHTML&&pe.innerHTML==null||ie.textContent&&pe.textContent==null)&&b(Vt,""),Rt?zt(G.dynamicChildren,Rt,Vt,yt,vt,Sf(tt,J),qt):te||z(G,tt,Vt,null,yt,vt,Sf(tt,J),qt,!1),ee>0){if(ee&16)X(Vt,ie,pe,yt,J);else if(ee&2&&ie.class!==pe.class&&a(Vt,"class",null,pe.class,J),ee&4&&a(Vt,"style",ie.style,pe.style,J),ee&8){const Kt=tt.dynamicProps;for(let oe=0;oe<Kt.length;oe++){const Ve=Kt[oe],Ue=ie[Ve],Ge=pe[Ve];(Ge!==Ue||Ve==="value")&&a(Vt,Ve,Ue,Ge,J,yt)}}ee&1&&G.children!==tt.children&&b(Vt,tt.children)}else!te&&Rt==null&&X(Vt,ie,pe,yt,J);((ke=pe.onVnodeUpdated)||Ot)&&oo(()=>{ke&&ya(ke,yt,tt,G),Ot&&$l(tt,G,yt,"updated")},vt)},zt=(G,tt,yt,vt,J,qt,te)=>{for(let Vt=0;Vt<tt.length;Vt++){const ee=G[Vt],Rt=tt[Vt],Ot=ee.el&&(ee.type===_n||!Kl(ee,Rt)||ee.shapeFlag&70)?w(ee.el):yt;R(ee,Rt,Ot,null,vt,J,qt,te,!0)}},X=(G,tt,yt,vt,J)=>{if(tt!==yt){if(tt!==yi)for(const qt in tt)!uc(qt)&&!(qt in yt)&&a(G,qt,tt[qt],null,J,vt);for(const qt in yt){if(uc(qt))continue;const te=yt[qt],Vt=tt[qt];te!==Vt&&qt!=="value"&&a(G,qt,Vt,te,J,vt)}"value"in yt&&a(G,"value",tt.value,yt.value,J)}},W=(G,tt,yt,vt,J,qt,te,Vt,ee)=>{const Rt=tt.el=G?G.el:f(""),Ot=tt.anchor=G?G.anchor:f("");let{patchFlag:ie,dynamicChildren:pe,slotScopeIds:ke}=tt;ke&&(Vt=Vt?Vt.concat(ke):ke),G==null?(i(Rt,yt,vt),i(Ot,yt,vt),gt(tt.children||[],yt,Ot,J,qt,te,Vt,ee)):ie>0&&ie&64&&pe&&G.dynamicChildren?(zt(G.dynamicChildren,pe,yt,J,qt,te,Vt),(tt.key!=null||J&&tt===J.subTree)&&xm(G,tt,!0)):z(G,tt,yt,Ot,J,qt,te,Vt,ee)},St=(G,tt,yt,vt,J,qt,te,Vt,ee)=>{tt.slotScopeIds=Vt,G==null?tt.shapeFlag&512?J.ctx.activate(tt,yt,vt,te,ee):Mt(tt,yt,vt,J,qt,te,ee):A(G,tt,ee)},Mt=(G,tt,yt,vt,J,qt,te)=>{const Vt=G.component=c_(G,vt,J);if(Vh(G)&&(Vt.ctx.renderer=Et),f_(Vt,!1,te),Vt.asyncDep){if(J&&J.registerDep(Vt,H,te),!G.el){const ee=Vt.subTree=Mi(qs);N(null,ee,tt,yt)}}else H(Vt,G,tt,yt,J,qt,te)},A=(G,tt,yt)=>{const vt=tt.component=G.component;if(e_(G,tt,yt))if(vt.asyncDep&&!vt.asyncResolved){V(vt,tt,yt);return}else vt.next=tt,vt.update();else tt.el=G.el,vt.vnode=tt},H=(G,tt,yt,vt,J,qt,te)=>{const Vt=()=>{if(G.isMounted){let{next:ie,bu:pe,u:ke,parent:Kt,vnode:oe}=G;{const Sn=Lm(G);if(Sn){ie&&(ie.el=oe.el,V(G,ie,te)),Sn.asyncDep.then(()=>{G.isUnmounted||Vt()});return}}let Ve=ie,Ue;Vl(G,!1),ie?(ie.el=oe.el,V(G,ie,te)):ie=oe,pe&&oh(pe),(Ue=ie.props&&ie.props.onVnodeBeforeUpdate)&&ya(Ue,Kt,ie,oe),Vl(G,!0);const Ge=Tp(G),Oe=G.subTree;G.subTree=Ge,R(Oe,Ge,w(Oe.el),q(Oe),G,J,qt),ie.el=Ge.el,Ve===null&&n_(G,Ge.el),ke&&oo(ke,J),(Ue=ie.props&&ie.props.onVnodeUpdated)&&oo(()=>ya(Ue,Kt,ie,oe),J)}else{let ie;const{el:pe,props:ke}=tt,{bm:Kt,m:oe,parent:Ve,root:Ue,type:Ge}=G,Oe=fc(tt);Vl(G,!1),Kt&&oh(Kt),!Oe&&(ie=ke&&ke.onVnodeBeforeMount)&&ya(ie,Ve,tt),Vl(G,!0);{Ue.ce&&Ue.ce._injectChildStyle(Ge);const Sn=G.subTree=Tp(G);R(null,Sn,yt,vt,G,J,qt),tt.el=Sn.el}if(oe&&oo(oe,J),!Oe&&(ie=ke&&ke.onVnodeMounted)){const Sn=tt;oo(()=>ya(ie,Ve,Sn),J)}(tt.shapeFlag&256||Ve&&fc(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&G.a&&oo(G.a,J),G.isMounted=!0,tt=yt=vt=null}};G.scope.on();const ee=G.effect=new Dg(Vt);G.scope.off();const Rt=G.update=ee.run.bind(ee),Ot=G.job=ee.runIfDirty.bind(ee);Ot.i=G,Ot.id=G.uid,ee.scheduler=()=>Kd(Ot),Vl(G,!0),Rt()},V=(G,tt,yt)=>{tt.component=G;const vt=G.vnode.props;G.vnode=tt,G.next=null,jy(G,tt.props,vt,yt),$y(G,tt.children,yt),Ol(),Lp(G),Rl()},z=(G,tt,yt,vt,J,qt,te,Vt,ee=!1)=>{const Rt=G&&G.children,Ot=G?G.shapeFlag:0,ie=tt.children,{patchFlag:pe,shapeFlag:ke}=tt;if(pe>0){if(pe&128){ft(Rt,ie,yt,vt,J,qt,te,Vt,ee);return}else if(pe&256){mt(Rt,ie,yt,vt,J,qt,te,Vt,ee);return}}ke&8?(Ot&16&&D(Rt,J,qt),ie!==Rt&&b(yt,ie)):Ot&16?ke&16?ft(Rt,ie,yt,vt,J,qt,te,Vt,ee):D(Rt,J,qt,!0):(Ot&8&&b(yt,""),ke&16&&gt(ie,yt,vt,J,qt,te,Vt,ee))},mt=(G,tt,yt,vt,J,qt,te,Vt,ee)=>{G=G||Du,tt=tt||Du;const Rt=G.length,Ot=tt.length,ie=Math.min(Rt,Ot);let pe;for(pe=0;pe<ie;pe++){const ke=tt[pe]=ee?Cl(tt[pe]):La(tt[pe]);R(G[pe],ke,yt,null,J,qt,te,Vt,ee)}Rt>Ot?D(G,J,qt,!0,!1,ie):gt(tt,yt,vt,J,qt,te,Vt,ee,ie)},ft=(G,tt,yt,vt,J,qt,te,Vt,ee)=>{let Rt=0;const Ot=tt.length;let ie=G.length-1,pe=Ot-1;for(;Rt<=ie&&Rt<=pe;){const ke=G[Rt],Kt=tt[Rt]=ee?Cl(tt[Rt]):La(tt[Rt]);if(Kl(ke,Kt))R(ke,Kt,yt,null,J,qt,te,Vt,ee);else break;Rt++}for(;Rt<=ie&&Rt<=pe;){const ke=G[ie],Kt=tt[pe]=ee?Cl(tt[pe]):La(tt[pe]);if(Kl(ke,Kt))R(ke,Kt,yt,null,J,qt,te,Vt,ee);else break;ie--,pe--}if(Rt>ie){if(Rt<=pe){const ke=pe+1,Kt=ke<Ot?tt[ke].el:vt;for(;Rt<=pe;)R(null,tt[Rt]=ee?Cl(tt[Rt]):La(tt[Rt]),yt,Kt,J,qt,te,Vt,ee),Rt++}}else if(Rt>pe)for(;Rt<=ie;)I(G[Rt],J,qt,!0),Rt++;else{const ke=Rt,Kt=Rt,oe=new Map;for(Rt=Kt;Rt<=pe;Rt++){const an=tt[Rt]=ee?Cl(tt[Rt]):La(tt[Rt]);an.key!=null&&oe.set(an.key,Rt)}let Ve,Ue=0;const Ge=pe-Kt+1;let Oe=!1,Sn=0;const tn=new Array(Ge);for(Rt=0;Rt<Ge;Rt++)tn[Rt]=0;for(Rt=ke;Rt<=ie;Rt++){const an=G[Rt];if(Ue>=Ge){I(an,J,qt,!0);continue}let bn;if(an.key!=null)bn=oe.get(an.key);else for(Ve=Kt;Ve<=pe;Ve++)if(tn[Ve-Kt]===0&&Kl(an,tt[Ve])){bn=Ve;break}bn===void 0?I(an,J,qt,!0):(tn[bn-Kt]=Rt+1,bn>=Sn?Sn=bn:Oe=!0,R(an,tt[bn],yt,null,J,qt,te,Vt,ee),Ue++)}const si=Oe?Wy(tn):Du;for(Ve=si.length-1,Rt=Ge-1;Rt>=0;Rt--){const an=Kt+Rt,bn=tt[an],Un=an+1<Ot?tt[an+1].el:vt;tn[Rt]===0?R(null,bn,yt,Un,J,qt,te,Vt,ee):Oe&&(Ve<0||Rt!==si[Ve]?ht(bn,yt,Un,2):Ve--)}}},ht=(G,tt,yt,vt,J=null)=>{const{el:qt,type:te,transition:Vt,children:ee,shapeFlag:Rt}=G;if(Rt&6){ht(G.component.subTree,tt,yt,vt);return}if(Rt&128){G.suspense.move(tt,yt,vt);return}if(Rt&64){te.move(G,tt,yt,Et);return}if(te===_n){i(qt,tt,yt);for(let ie=0;ie<ee.length;ie++)ht(ee[ie],tt,yt,vt);i(G.anchor,tt,yt);return}if(te===lh){Y(G,tt,yt);return}if(vt!==2&&Rt&1&&Vt)if(vt===0)Vt.beforeEnter(qt),i(qt,tt,yt),oo(()=>Vt.enter(qt),J);else{const{leave:ie,delayLeave:pe,afterLeave:ke}=Vt,Kt=()=>i(qt,tt,yt),oe=()=>{ie(qt,()=>{Kt(),ke&&ke()})};pe?pe(qt,Kt,oe):oe()}else i(qt,tt,yt)},I=(G,tt,yt,vt=!1,J=!1)=>{const{type:qt,props:te,ref:Vt,children:ee,dynamicChildren:Rt,shapeFlag:Ot,patchFlag:ie,dirs:pe,cacheIndex:ke}=G;if(ie===-2&&(J=!1),Vt!=null&&Ph(Vt,null,yt,G,!0),ke!=null&&(tt.renderCache[ke]=void 0),Ot&256){tt.ctx.deactivate(G);return}const Kt=Ot&1&&pe,oe=!fc(G);let Ve;if(oe&&(Ve=te&&te.onVnodeBeforeUnmount)&&ya(Ve,tt,G),Ot&6)$(G.component,yt,vt);else{if(Ot&128){G.suspense.unmount(yt,vt);return}Kt&&$l(G,null,tt,"beforeUnmount"),Ot&64?G.type.remove(G,tt,yt,Et,vt):Rt&&!Rt.hasOnce&&(qt!==_n||ie>0&&ie&64)?D(Rt,tt,yt,!1,!0):(qt===_n&&ie&384||!J&&Ot&16)&&D(ee,tt,yt),vt&&it(G)}(oe&&(Ve=te&&te.onVnodeUnmounted)||Kt)&&oo(()=>{Ve&&ya(Ve,tt,G),Kt&&$l(G,null,tt,"unmounted")},yt)},it=G=>{const{type:tt,el:yt,anchor:vt,transition:J}=G;if(tt===_n){rt(yt,vt);return}if(tt===lh){kt(G);return}const qt=()=>{o(yt),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(G.shapeFlag&1&&J&&!J.persisted){const{leave:te,delayLeave:Vt}=J,ee=()=>te(yt,qt);Vt?Vt(G.el,qt,ee):ee()}else qt()},rt=(G,tt)=>{let yt;for(;G!==tt;)yt=S(G),o(G),G=yt;o(tt)},$=(G,tt,yt)=>{const{bum:vt,scope:J,job:qt,subTree:te,um:Vt,m:ee,a:Rt}=G;Bp(ee),Bp(Rt),vt&&oh(vt),J.stop(),qt&&(qt.flags|=8,I(te,G,tt,yt)),Vt&&oo(Vt,tt),oo(()=>{G.isUnmounted=!0},tt),tt&&tt.pendingBranch&&!tt.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===tt.pendingId&&(tt.deps--,tt.deps===0&&tt.resolve())},D=(G,tt,yt,vt=!1,J=!1,qt=0)=>{for(let te=qt;te<G.length;te++)I(G[te],tt,yt,vt,J)},q=G=>{if(G.shapeFlag&6)return q(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const tt=S(G.anchor||G.el),yt=tt&&tt[hy];return yt?S(yt):tt};let dt=!1;const ct=(G,tt,yt)=>{G==null?tt._vnode&&I(tt._vnode,null,null,!0):R(tt._vnode||null,G,tt,null,null,null,yt),tt._vnode=G,dt||(dt=!0,Lp(),Qg(),dt=!1)},Et={p:R,um:I,m:ht,r:it,mt:Mt,mc:gt,pc:z,pbc:zt,n:q,o:t};return{render:ct,hydrate:void 0,createApp:Ry(ct)}}function Sf({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Vl({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Gy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function xm(t,e,n=!1){const i=t.children,o=e.children;if(dn(i)&&dn(o))for(let a=0;a<i.length;a++){const l=i[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=Cl(o[a]),f.el=l.el),!n&&f.patchFlag!==-2&&xm(l,f)),f.type===Kh&&(f.el=l.el)}}function Wy(t){const e=t.slice(),n=[0];let i,o,a,l,f;const p=t.length;for(i=0;i<p;i++){const v=t[i];if(v!==0){if(o=n[n.length-1],t[o]<v){e[i]=o,n.push(i);continue}for(a=0,l=n.length-1;a<l;)f=a+l>>1,t[n[f]]<v?a=f+1:l=f;v<t[n[a]]&&(a>0&&(e[i]=n[a-1]),n[a]=i)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=e[l];return n}function Lm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Lm(e)}function Bp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Zy=Symbol.for("v-scx"),Ky=()=>Mo(Zy);function Rr(t,e,n){return Cm(t,e,n)}function Cm(t,e,n=yi){const{immediate:i,deep:o,flush:a,once:l}=n,f=Fr({},n),p=e&&i||!e&&a!=="post";let v;if(kc){if(a==="sync"){const x=Ky();v=x.__watcherHandles||(x.__watcherHandles=[])}else if(!p){const x=()=>{};return x.stop=Pa,x.resume=Pa,x.pause=Pa,x}}const b=Ir;f.call=(x,j,R)=>Jo(x,b,j,R);let w=!1;a==="post"?f.scheduler=x=>{oo(x,b&&b.suspense)}:a!=="sync"&&(w=!0,f.scheduler=(x,j)=>{j?x():Kd(x)}),f.augmentJob=x=>{e&&(x.flags|=4),w&&(x.flags|=2,b&&(x.id=b.uid,x.i=b))};const S=ay(t,e,f);return kc&&(v?v.push(S):p&&S()),S}function Yy(t,e,n){const i=this.proxy,o=rr(t)?t.includes(".")?Pm(i,t):()=>i[t]:t.bind(i,i);let a;An(e)?a=e:(a=e.handler,n=e);const l=Rc(this),f=Cm(o,a.bind(i),n);return l(),f}function Pm(t,e){const n=e.split(".");return()=>{let i=t;for(let o=0;o<n.length&&i;o++)i=i[n[o]];return i}}const Jy=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${To(e)}Modifiers`]||t[`${uu(e)}Modifiers`];function Xy(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||yi;let o=n;const a=e.startsWith("update:"),l=a&&Jy(i,e.slice(7));l&&(l.trim&&(o=n.map(b=>rr(b)?b.trim():b)),l.number&&(o=n.map(bh)));let f,p=i[f=bf(e)]||i[f=bf(To(e))];!p&&a&&(p=i[f=bf(uu(e))]),p&&Jo(p,t,6,o);const v=i[f+"Once"];if(v){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,Jo(v,t,6,o)}}function km(t,e,n=!1){const i=e.emitsCache,o=i.get(t);if(o!==void 0)return o;const a=t.emits;let l={},f=!1;if(!An(t)){const p=v=>{const b=km(v,e,!0);b&&(f=!0,Fr(l,b))};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}return!a&&!f?(_i(t)&&i.set(t,null),null):(dn(a)?a.forEach(p=>l[p]=null):Fr(l,a),_i(t)&&i.set(t,l),l)}function Zh(t,e){return!t||!Ih(e)?!1:(e=e.slice(2).replace(/Once$/,""),ui(t,e[0].toLowerCase()+e.slice(1))||ui(t,uu(e))||ui(t,e))}function Tp(t){const{type:e,vnode:n,proxy:i,withProxy:o,propsOptions:[a],slots:l,attrs:f,emit:p,render:v,renderCache:b,props:w,data:S,setupState:x,ctx:j,inheritAttrs:R}=t,U=Ch(t);let N,Z;try{if(n.shapeFlag&4){const kt=o||i,At=kt;N=La(v.call(At,kt,b,w,x,S,j)),Z=f}else{const kt=e;N=La(kt.length>1?kt(w,{attrs:f,slots:l,emit:p}):kt(w,null)),Z=e.props?f:Qy(f)}}catch(kt){pc.length=0,$h(kt,t,1),N=Mi(qs)}let Y=N;if(Z&&R!==!1){const kt=Object.keys(Z),{shapeFlag:At}=Y;kt.length&&At&7&&(a&&kt.some(Id)&&(Z=t_(Z,a)),Y=Bl(Y,Z,!1,!0))}return n.dirs&&(Y=Bl(Y,null,!1,!0),Y.dirs=Y.dirs?Y.dirs.concat(n.dirs):n.dirs),n.transition&&Cc(Y,n.transition),N=Y,Ch(U),N}const Qy=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ih(n))&&((e||(e={}))[n]=t[n]);return e},t_=(t,e)=>{const n={};for(const i in t)(!Id(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function e_(t,e,n){const{props:i,children:o,component:a}=t,{props:l,children:f,patchFlag:p}=e,v=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return i?Dp(i,l,v):!!l;if(p&8){const b=e.dynamicProps;for(let w=0;w<b.length;w++){const S=b[w];if(l[S]!==i[S]&&!Zh(v,S))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:i===l?!1:i?l?Dp(i,l,v):!0:!!l;return!1}function Dp(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let o=0;o<i.length;o++){const a=i[o];if(e[a]!==t[a]&&!Zh(n,a))return!0}return!1}function n_({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const Sm=t=>t.__isSuspense;function i_(t,e){e&&e.pendingBranch?dn(t)?e.effects.push(...t):e.effects.push(t):cy(t)}const _n=Symbol.for("v-fgt"),Kh=Symbol.for("v-txt"),qs=Symbol.for("v-cmt"),lh=Symbol.for("v-stc"),pc=[];let ao=null;function se(t=!1){pc.push(ao=t?null:[])}function r_(){pc.pop(),ao=pc[pc.length-1]||null}let Pc=1;function Np(t,e=!1){Pc+=t,t<0&&ao&&e&&(ao.hasOnce=!0)}function Em(t){return t.dynamicChildren=Pc>0?ao||Du:null,r_(),Pc>0&&ao&&ao.push(t),t}function ce(t,e,n,i,o,a){return Em(M(t,e,n,i,o,a,!0))}function tl(t,e,n,i,o){return Em(Mi(t,e,n,i,o,!0))}function Sh(t){return t?t.__v_isVNode===!0:!1}function Kl(t,e){return t.type===e.type&&t.key===e.key}const Am=({key:t})=>t??null,uh=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?rr(t)||ir(t)||An(t)?{i:ws,r:t,k:e,f:!!n}:t:null);function M(t,e=null,n=null,i=0,o=null,a=t===_n?0:1,l=!1,f=!1){const p={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Am(e),ref:e&&uh(e),scopeId:em,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ws};return f?(Jd(p,n),a&128&&t.normalize(p)):n&&(p.shapeFlag|=rr(n)?8:16),Pc>0&&!l&&ao&&(p.patchFlag>0||a&6)&&p.patchFlag!==32&&ao.push(p),p}const Mi=s_;function s_(t,e=null,n=null,i=0,o=null,a=!1){if((!t||t===Sy)&&(t=qs),Sh(t)){const f=Bl(t,e,!0);return n&&Jd(f,n),Pc>0&&!a&&ao&&(f.shapeFlag&6?ao[ao.indexOf(t)]=f:ao.push(f)),f.patchFlag=-2,f}if(v_(t)&&(t=t.__vccOpts),e){e=o_(e);let{class:f,style:p}=e;f&&!rr(f)&&(e.class=Oi(f)),_i(p)&&(Wd(p)&&!dn(p)&&(p=Fr({},p)),e.style=Uh(p))}const l=rr(t)?1:Sm(t)?128:nm(t)?64:_i(t)?4:An(t)?2:0;return M(t,e,n,i,o,l,a,!0)}function o_(t){return t?Wd(t)||gm(t)?Fr({},t):t:null}function Bl(t,e,n=!1,i=!1){const{props:o,ref:a,patchFlag:l,children:f,transition:p}=t,v=e?a_(o||{},e):o,b={__v_isVNode:!0,__v_skip:!0,type:t.type,props:v,key:v&&Am(v),ref:e&&e.ref?n&&a?dn(a)?a.concat(uh(e)):[a,uh(e)]:uh(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:f,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_n?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:p,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Bl(t.ssContent),ssFallback:t.ssFallback&&Bl(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return p&&i&&Cc(b,p.clone(b)),b}function Zi(t=" ",e=0){return Mi(Kh,null,t,e)}function gc(t,e){const n=Mi(lh,null,t);return n.staticCount=e,n}function nn(t="",e=!1){return e?(se(),tl(qs,null,t)):Mi(qs,null,t)}function La(t){return t==null||typeof t=="boolean"?Mi(qs):dn(t)?Mi(_n,null,t.slice()):Sh(t)?Cl(t):Mi(Kh,null,String(t))}function Cl(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Bl(t)}function Jd(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(dn(e))n=16;else if(typeof e=="object")if(i&65){const o=e.default;o&&(o._c&&(o._d=!1),Jd(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!gm(e)?e._ctx=ws:o===3&&ws&&(ws.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else An(e)?(e={default:e,_ctx:ws},n=32):(e=String(e),i&64?(n=16,e=[Zi(e)]):n=8);t.children=e,t.shapeFlag|=n}function a_(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const o in i)if(o==="class")e.class!==i.class&&(e.class=Oi([e.class,i.class]));else if(o==="style")e.style=Uh([e.style,i.style]);else if(Ih(o)){const a=e[o],l=i[o];l&&a!==l&&!(dn(a)&&a.includes(l))&&(e[o]=a?[].concat(a,l):l)}else o!==""&&(e[o]=i[o])}return e}function ya(t,e,n,i=null){Jo(t,e,7,[n,i])}const l_=fm();let u_=0;function c_(t,e,n){const i=t.type,o=(e?e.appContext:t.appContext)||l_,a={uid:u_++,vnode:t,type:i,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vm(i,o),emitsOptions:km(i,o),emit:null,emitted:null,propsDefaults:yi,inheritAttrs:i.inheritAttrs,ctx:yi,data:yi,props:yi,attrs:yi,slots:yi,refs:yi,setupState:yi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Xy.bind(null,a),t.ce&&t.ce(a),a}let Ir=null;const h_=()=>Ir||ws;let Eh,sd;{const t=zh(),e=(n,i)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(i),a=>{o.length>1?o.forEach(l=>l(a)):o[0](a)}};Eh=e("__VUE_INSTANCE_SETTERS__",n=>Ir=n),sd=e("__VUE_SSR_SETTERS__",n=>kc=n)}const Rc=t=>{const e=Ir;return Eh(t),t.scope.on(),()=>{t.scope.off(),Eh(e)}},Op=()=>{Ir&&Ir.scope.off(),Eh(null)};function Mm(t){return t.vnode.shapeFlag&4}let kc=!1;function f_(t,e=!1,n=!1){e&&sd(e);const{props:i,children:o}=t.vnode,a=Mm(t);Fy(t,i,a,e),qy(t,o,n);const l=a?d_(t,e):void 0;return e&&sd(!1),l}function d_(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Ay);const{setup:i}=n;if(i){Ol();const o=t.setupContext=i.length>1?g_(t):null,a=Rc(t),l=Oc(i,t,0,[t.props,o]),f=Lg(l);if(Rl(),a(),(f||t.sp)&&!fc(t)&&lm(t),f){if(l.then(Op,Op),e)return l.then(p=>{Rp(t,p)}).catch(p=>{$h(p,t,0)});t.asyncDep=l}else Rp(t,l)}else Bm(t)}function Rp(t,e,n){An(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:_i(e)&&(t.setupState=Yg(e)),Bm(t)}function Bm(t,e,n){const i=t.type;t.render||(t.render=i.render||Pa);{const o=Rc(t);Ol();try{My(t)}finally{Rl(),o()}}}const p_={get(t,e){return ss(t,"get",""),t[e]}};function g_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,p_),slots:t.slots,emit:t.emit,expose:e}}function Yh(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Yg(Zd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in dc)return dc[n](t)},has(e,n){return n in e||n in dc}})):t.proxy}function m_(t,e=!0){return An(t)?t.displayName||t.name:t.name||e&&t.__name}function v_(t){return An(t)&&"__vccOpts"in t}const zn=(t,e)=>sy(t,e,kc);function Xd(t,e,n){const i=arguments.length;return i===2?_i(e)&&!dn(e)?Sh(e)?Mi(t,null,[e]):Mi(t,e):Mi(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Sh(n)&&(n=[n]),Mi(t,e,n))}const y_="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let od;const Ip=typeof window<"u"&&window.trustedTypes;if(Ip)try{od=Ip.createPolicy("vue",{createHTML:t=>t})}catch{}const Tm=od?t=>od.createHTML(t):t=>t,__="http://www.w3.org/2000/svg",b_="http://www.w3.org/1998/Math/MathML",Za=typeof document<"u"?document:null,Fp=Za&&Za.createElement("template"),w_={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const o=e==="svg"?Za.createElementNS(__,t):e==="mathml"?Za.createElementNS(b_,t):n?Za.createElement(t,{is:n}):Za.createElement(t);return t==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:t=>Za.createTextNode(t),createComment:t=>Za.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Za.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,o,a){const l=n?n.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Fp.innerHTML=Tm(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const f=Fp.content;if(i==="svg"||i==="mathml"){const p=f.firstChild;for(;p.firstChild;)f.appendChild(p.firstChild);f.removeChild(p)}e.insertBefore(f,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vl="transition",Qu="animation",Sc=Symbol("_vtc"),Dm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},x_=Fr({},im,Dm),L_=t=>(t.displayName="Transition",t.props=x_,t),jp=L_((t,{slots:e})=>Xd(py,C_(t),e)),Hl=(t,e=[])=>{dn(t)?t.forEach(n=>n(...e)):t&&t(...e)},zp=t=>t?dn(t)?t.some(e=>e.length>1):t.length>1:!1;function C_(t){const e={};for(const W in t)W in Dm||(e[W]=t[W]);if(t.css===!1)return e;const{name:n="v",type:i,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:p=a,appearActiveClass:v=l,appearToClass:b=f,leaveFromClass:w=`${n}-leave-from`,leaveActiveClass:S=`${n}-leave-active`,leaveToClass:x=`${n}-leave-to`}=t,j=P_(o),R=j&&j[0],U=j&&j[1],{onBeforeEnter:N,onEnter:Z,onEnterCancelled:Y,onLeave:kt,onLeaveCancelled:At,onBeforeAppear:Dt=N,onAppear:xt=Z,onAppearCancelled:gt=Y}=e,_t=(W,St,Mt,A)=>{W._enterCancelled=A,Gl(W,St?b:f),Gl(W,St?v:l),Mt&&Mt()},zt=(W,St)=>{W._isLeaving=!1,Gl(W,w),Gl(W,x),Gl(W,S),St&&St()},X=W=>(St,Mt)=>{const A=W?xt:Z,H=()=>_t(St,W,Mt);Hl(A,[St,H]),Up(()=>{Gl(St,W?p:a),Ha(St,W?b:f),zp(A)||qp(St,i,R,H)})};return Fr(e,{onBeforeEnter(W){Hl(N,[W]),Ha(W,a),Ha(W,l)},onBeforeAppear(W){Hl(Dt,[W]),Ha(W,p),Ha(W,v)},onEnter:X(!1),onAppear:X(!0),onLeave(W,St){W._isLeaving=!0;const Mt=()=>zt(W,St);Ha(W,w),W._enterCancelled?(Ha(W,S),Hp()):(Hp(),Ha(W,S)),Up(()=>{W._isLeaving&&(Gl(W,w),Ha(W,x),zp(kt)||qp(W,i,U,Mt))}),Hl(kt,[W,Mt])},onEnterCancelled(W){_t(W,!1,void 0,!0),Hl(Y,[W])},onAppearCancelled(W){_t(W,!0,void 0,!0),Hl(gt,[W])},onLeaveCancelled(W){zt(W),Hl(At,[W])}})}function P_(t){if(t==null)return null;if(_i(t))return[Ef(t.enter),Ef(t.leave)];{const e=Ef(t);return[e,e]}}function Ef(t){return Cv(t)}function Ha(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Sc]||(t[Sc]=new Set)).add(e)}function Gl(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const n=t[Sc];n&&(n.delete(e),n.size||(t[Sc]=void 0))}function Up(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let k_=0;function qp(t,e,n,i){const o=t._endId=++k_,a=()=>{o===t._endId&&i()};if(n!=null)return setTimeout(a,n);const{type:l,timeout:f,propCount:p}=S_(t,e);if(!l)return i();const v=l+"end";let b=0;const w=()=>{t.removeEventListener(v,S),a()},S=x=>{x.target===t&&++b>=p&&w()};setTimeout(()=>{b<p&&w()},f+1),t.addEventListener(v,S)}function S_(t,e){const n=window.getComputedStyle(t),i=j=>(n[j]||"").split(", "),o=i(`${vl}Delay`),a=i(`${vl}Duration`),l=$p(o,a),f=i(`${Qu}Delay`),p=i(`${Qu}Duration`),v=$p(f,p);let b=null,w=0,S=0;e===vl?l>0&&(b=vl,w=l,S=a.length):e===Qu?v>0&&(b=Qu,w=v,S=p.length):(w=Math.max(l,v),b=w>0?l>v?vl:Qu:null,S=b?b===vl?a.length:p.length:0);const x=b===vl&&/\b(transform|all)(,|$)/.test(i(`${vl}Property`).toString());return{type:b,timeout:w,propCount:S,hasTransform:x}}function $p(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>Vp(n)+Vp(t[i])))}function Vp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Hp(){return document.body.offsetHeight}function E_(t,e,n){const i=t[Sc];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ah=Symbol("_vod"),Nm=Symbol("_vsh"),ch={beforeMount(t,{value:e},{transition:n}){t[Ah]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):tc(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),tc(t,!0),i.enter(t)):i.leave(t,()=>{tc(t,!1)}):tc(t,e))},beforeUnmount(t,{value:e}){tc(t,e)}};function tc(t,e){t.style.display=e?t[Ah]:"none",t[Nm]=!e}const A_=Symbol(""),M_=/(^|;)\s*display\s*:/;function B_(t,e,n){const i=t.style,o=rr(n);let a=!1;if(n&&!o){if(e)if(rr(e))for(const l of e.split(";")){const f=l.slice(0,l.indexOf(":")).trim();n[f]==null&&hh(i,f,"")}else for(const l in e)n[l]==null&&hh(i,l,"");for(const l in n)l==="display"&&(a=!0),hh(i,l,n[l])}else if(o){if(e!==n){const l=i[A_];l&&(n+=";"+l),i.cssText=n,a=M_.test(n)}}else e&&t.removeAttribute("style");Ah in t&&(t[Ah]=a?i.display:"",t[Nm]&&(i.display="none"))}const Gp=/\s*!important$/;function hh(t,e,n){if(dn(n))n.forEach(i=>hh(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=T_(t,e);Gp.test(n)?t.setProperty(uu(i),n.replace(Gp,""),"important"):t[i]=n}}const Wp=["Webkit","Moz","ms"],Af={};function T_(t,e){const n=Af[e];if(n)return n;let i=To(e);if(i!=="filter"&&i in t)return Af[e]=i;i=jh(i);for(let o=0;o<Wp.length;o++){const a=Wp[o]+i;if(a in t)return Af[e]=a}return e}const Zp="http://www.w3.org/1999/xlink";function Kp(t,e,n,i,o,a=Mv(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Zp,e.slice(6,e.length)):t.setAttributeNS(Zp,e,n):n==null||a&&!Sg(n)?t.removeAttribute(e):t.setAttribute(e,a?"":Sa(n)?String(n):n)}function Yp(t,e,n,i,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Tm(n):n);return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const f=a==="OPTION"?t.getAttribute("value")||"":t.value,p=n==null?t.type==="checkbox"?"on":"":String(n);(f!==p||!("_value"in t))&&(t.value=p),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const f=typeof t[e];f==="boolean"?n=Sg(n):n==null&&f==="string"?(n="",l=!0):f==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(o||e)}function Xa(t,e,n,i){t.addEventListener(e,n,i)}function D_(t,e,n,i){t.removeEventListener(e,n,i)}const Jp=Symbol("_vei");function N_(t,e,n,i,o=null){const a=t[Jp]||(t[Jp]={}),l=a[e];if(i&&l)l.value=i;else{const[f,p]=O_(e);if(i){const v=a[e]=F_(i,o);Xa(t,f,v,p)}else l&&(D_(t,f,l,p),a[e]=void 0)}}const Xp=/(?:Once|Passive|Capture)$/;function O_(t){let e;if(Xp.test(t)){e={};let i;for(;i=t.match(Xp);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):uu(t.slice(2)),e]}let Mf=0;const R_=Promise.resolve(),I_=()=>Mf||(R_.then(()=>Mf=0),Mf=Date.now());function F_(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Jo(j_(i,n.value),e,5,[i])};return n.value=t,n.attached=I_(),n}function j_(t,e){if(dn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>o=>!o._stopped&&i&&i(o))}else return e}const Qp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,z_=(t,e,n,i,o,a)=>{const l=o==="svg";e==="class"?E_(t,i,l):e==="style"?B_(t,n,i):Ih(e)?Id(e)||N_(t,e,n,i,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):U_(t,e,i,l))?(Yp(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Kp(t,e,i,l,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!rr(i))?Yp(t,To(e),i,a,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Kp(t,e,i,l))};function U_(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Qp(e)&&An(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Qp(e)&&rr(n)?!1:e in t}const Tl=t=>{const e=t.props["onUpdate:modelValue"]||!1;return dn(e)?n=>oh(e,n):e};function q_(t){t.target.composing=!0}function t0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Bo=Symbol("_assign"),Hn={created(t,{modifiers:{lazy:e,trim:n,number:i}},o){t[Bo]=Tl(o);const a=i||o.props&&o.props.type==="number";Xa(t,e?"change":"input",l=>{if(l.target.composing)return;let f=t.value;n&&(f=f.trim()),a&&(f=bh(f)),t[Bo](f)}),n&&Xa(t,"change",()=>{t.value=t.value.trim()}),e||(Xa(t,"compositionstart",q_),Xa(t,"compositionend",t0),Xa(t,"change",t0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:o,number:a}},l){if(t[Bo]=Tl(l),t.composing)return;const f=(a||t.type==="number")&&!/^0\d/.test(t.value)?bh(t.value):t.value,p=e??"";f!==p&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||o&&t.value.trim()===p)||(t.value=p))}},Om={deep:!0,created(t,e,n){t[Bo]=Tl(n),Xa(t,"change",()=>{const i=t._modelValue,o=zu(t),a=t.checked,l=t[Bo];if(dn(i)){const f=zd(i,o),p=f!==-1;if(a&&!p)l(i.concat(o));else if(!a&&p){const v=[...i];v.splice(f,1),l(v)}}else if($u(i)){const f=new Set(i);a?f.add(o):f.delete(o),l(f)}else l(Rm(t,a))})},mounted:e0,beforeUpdate(t,e,n){t[Bo]=Tl(n),e0(t,e,n)}};function e0(t,{value:e,oldValue:n},i){t._modelValue=e;let o;if(dn(e))o=zd(e,i.props.value)>-1;else if($u(e))o=e.has(i.props.value);else{if(e===n)return;o=su(e,Rm(t,!0))}t.checked!==o&&(t.checked=o)}const $_={created(t,{value:e},n){t.checked=su(e,n.props.value),t[Bo]=Tl(n),Xa(t,"change",()=>{t[Bo](zu(t))})},beforeUpdate(t,{value:e,oldValue:n},i){t[Bo]=Tl(i),e!==n&&(t.checked=su(e,i.props.value))}},$s={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const o=$u(e);Xa(t,"change",()=>{const a=Array.prototype.filter.call(t.options,l=>l.selected).map(l=>n?bh(zu(l)):zu(l));t[Bo](t.multiple?o?new Set(a):a:a[0]),t._assigning=!0,Ni(()=>{t._assigning=!1})}),t[Bo]=Tl(i)},mounted(t,{value:e}){n0(t,e)},beforeUpdate(t,e,n){t[Bo]=Tl(n)},updated(t,{value:e}){t._assigning||n0(t,e)}};function n0(t,e){const n=t.multiple,i=dn(e);if(!(n&&!i&&!$u(e))){for(let o=0,a=t.options.length;o<a;o++){const l=t.options[o],f=zu(l);if(n)if(i){const p=typeof f;p==="string"||p==="number"?l.selected=e.some(v=>String(v)===String(f)):l.selected=zd(e,f)>-1}else l.selected=e.has(f);else if(su(zu(l),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function zu(t){return"_value"in t?t._value:t.value}function Rm(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const V_={created(t,e,n){th(t,e,n,null,"created")},mounted(t,e,n){th(t,e,n,null,"mounted")},beforeUpdate(t,e,n,i){th(t,e,n,i,"beforeUpdate")},updated(t,e,n,i){th(t,e,n,i,"updated")}};function H_(t,e){switch(t){case"SELECT":return $s;case"TEXTAREA":return Hn;default:switch(e){case"checkbox":return Om;case"radio":return $_;default:return Hn}}}function th(t,e,n,i,o){const l=H_(t.tagName,n.props&&n.props.type)[o];l&&l(t,e,n,i)}const G_=["ctrl","shift","alt","meta"],W_={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>G_.some(n=>t[`${n}Key`]&&!e.includes(n))},Jh=(t,e)=>{const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=(o,...a)=>{for(let l=0;l<e.length;l++){const f=W_[e[l]];if(f&&f(o,e))return}return t(o,...a)})},Z_=Fr({patchProp:z_},w_);let i0;function K_(){return i0||(i0=Vy(Z_))}const Y_=(...t)=>{const e=K_().createApp(...t),{mount:n}=e;return e.mount=i=>{const o=X_(i);if(!o)return;const a=e._component;!An(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=n(o,!1,J_(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},e};function J_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function X_(t){return rr(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Im;const Xh=t=>Im=t,Fm=Symbol();function ad(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var mc;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(mc||(mc={}));function Q_(){const t=Bg(!0),e=t.run(()=>Fe({}));let n=[],i=[];const o=Zd({install(a){Xh(o),o._a=a,a.provide(Fm,o),a.config.globalProperties.$pinia=o,i.forEach(l=>n.push(l)),i=[]},use(a){return this._a?n.push(a):i.push(a),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return o}const jm=()=>{};function r0(t,e,n,i=jm){t.push(e);const o=()=>{const a=t.indexOf(e);a>-1&&(t.splice(a,1),i())};return!n&&Tg()&&Tv(o),o}function bu(t,...e){t.slice().forEach(n=>{n(...e)})}const t2=t=>t(),s0=Symbol(),Bf=Symbol();function ld(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,i)=>t.set(i,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n],o=t[n];ad(o)&&ad(i)&&t.hasOwnProperty(n)&&!ir(i)&&!Ml(i)?t[n]=ld(o,i):t[n]=i}return t}const e2=Symbol();function n2(t){return!ad(t)||!t.hasOwnProperty(e2)}const{assign:wl}=Object;function i2(t){return!!(ir(t)&&t.effect)}function r2(t,e,n,i){const{state:o,actions:a,getters:l}=e,f=n.state.value[t];let p;function v(){f||(n.state.value[t]=o?o():{});const b=ey(n.state.value[t]);return wl(b,a,Object.keys(l||{}).reduce((w,S)=>(w[S]=Zd(zn(()=>{Xh(n);const x=n._s.get(t);return l[S].call(x,x)})),w),{}))}return p=zm(t,v,e,n,i,!0),p}function zm(t,e,n={},i,o,a){let l;const f=wl({actions:{}},n),p={deep:!0};let v,b,w=[],S=[],x;const j=i.state.value[t];!a&&!j&&(i.state.value[t]={}),Fe({});let R;function U(gt){let _t;v=b=!1,typeof gt=="function"?(gt(i.state.value[t]),_t={type:mc.patchFunction,storeId:t,events:x}):(ld(i.state.value[t],gt),_t={type:mc.patchObject,payload:gt,storeId:t,events:x});const zt=R=Symbol();Ni().then(()=>{R===zt&&(v=!0)}),b=!0,bu(w,_t,i.state.value[t])}const N=a?function(){const{state:_t}=n,zt=_t?_t():{};this.$patch(X=>{wl(X,zt)})}:jm;function Z(){l.stop(),w=[],S=[],i._s.delete(t)}const Y=(gt,_t="")=>{if(s0 in gt)return gt[Bf]=_t,gt;const zt=function(){Xh(i);const X=Array.from(arguments),W=[],St=[];function Mt(V){W.push(V)}function A(V){St.push(V)}bu(S,{args:X,name:zt[Bf],store:At,after:Mt,onError:A});let H;try{H=gt.apply(this&&this.$id===t?this:At,X)}catch(V){throw bu(St,V),V}return H instanceof Promise?H.then(V=>(bu(W,V),V)).catch(V=>(bu(St,V),Promise.reject(V))):(bu(W,H),H)};return zt[s0]=!0,zt[Bf]=_t,zt},kt={_p:i,$id:t,$onAction:r0.bind(null,S),$patch:U,$reset:N,$subscribe(gt,_t={}){const zt=r0(w,gt,_t.detached,()=>X()),X=l.run(()=>Rr(()=>i.state.value[t],W=>{(_t.flush==="sync"?b:v)&&gt({storeId:t,type:mc.direct,events:x},W)},wl({},p,_t)));return zt},$dispose:Z},At=el(kt);i._s.set(t,At);const xt=(i._a&&i._a.runWithContext||t2)(()=>i._e.run(()=>(l=Bg()).run(()=>e({action:Y}))));for(const gt in xt){const _t=xt[gt];if(ir(_t)&&!i2(_t)||Ml(_t))a||(j&&n2(_t)&&(ir(_t)?_t.value=j[gt]:ld(_t,j[gt])),i.state.value[t][gt]=_t);else if(typeof _t=="function"){const zt=Y(_t,gt);xt[gt]=zt,f.actions[gt]=_t}}return wl(At,xt),wl(Xn(At),xt),Object.defineProperty(At,"$state",{get:()=>i.state.value[t],set:gt=>{U(_t=>{wl(_t,gt)})}}),i._p.forEach(gt=>{wl(At,l.run(()=>gt({store:At,app:i._a,pinia:i,options:f})))}),j&&a&&n.hydrate&&n.hydrate(At.$state,j),v=!0,b=!0,At}/*! #__NO_SIDE_EFFECTS__ */function Qd(t,e,n){let i,o;const a=typeof e=="function";typeof t=="string"?(i=t,o=a?n:e):(o=t,i=t.id);function l(f,p){const v=Iy();return f=f||(v?Mo(Fm,null):null),f&&Xh(f),f=Im,f._s.has(i)||(a?zm(i,e,o,f):r2(i,o,f)),f._s.get(i)}return l.$id=i,l}function Um(t,e){return function(){return t.apply(e,arguments)}}const{toString:s2}=Object.prototype,{getPrototypeOf:tp}=Object,Qh=(t=>e=>{const n=s2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qo=t=>(t=t.toLowerCase(),e=>Qh(e)===t),tf=t=>e=>typeof e===t,{isArray:Vu}=Array,Ec=tf("undefined");function o2(t){return t!==null&&!Ec(t)&&t.constructor!==null&&!Ec(t.constructor)&&uo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const qm=Qo("ArrayBuffer");function a2(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&qm(t.buffer),e}const l2=tf("string"),uo=tf("function"),$m=tf("number"),ef=t=>t!==null&&typeof t=="object",u2=t=>t===!0||t===!1,fh=t=>{if(Qh(t)!=="object")return!1;const e=tp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},c2=Qo("Date"),h2=Qo("File"),f2=Qo("Blob"),d2=Qo("FileList"),p2=t=>ef(t)&&uo(t.pipe),g2=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||uo(t.append)&&((e=Qh(t))==="formdata"||e==="object"&&uo(t.toString)&&t.toString()==="[object FormData]"))},m2=Qo("URLSearchParams"),[v2,y2,_2,b2]=["ReadableStream","Request","Response","Headers"].map(Qo),w2=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ic(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,o;if(typeof t!="object"&&(t=[t]),Vu(t))for(i=0,o=t.length;i<o;i++)e.call(null,t[i],i,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),l=a.length;let f;for(i=0;i<l;i++)f=a[i],e.call(null,t[f],f,t)}}function Vm(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],e===o.toLowerCase())return o;return null}const Jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hm=t=>!Ec(t)&&t!==Jl;function ud(){const{caseless:t}=Hm(this)&&this||{},e={},n=(i,o)=>{const a=t&&Vm(e,o)||o;fh(e[a])&&fh(i)?e[a]=ud(e[a],i):fh(i)?e[a]=ud({},i):Vu(i)?e[a]=i.slice():e[a]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Ic(arguments[i],n);return e}const x2=(t,e,n,{allOwnKeys:i}={})=>(Ic(e,(o,a)=>{n&&uo(o)?t[a]=Um(o,n):t[a]=o},{allOwnKeys:i}),t),L2=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),C2=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},P2=(t,e,n,i)=>{let o,a,l;const f={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),a=o.length;a-- >0;)l=o[a],(!i||i(l,t,e))&&!f[l]&&(e[l]=t[l],f[l]=!0);t=n!==!1&&tp(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},k2=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},S2=t=>{if(!t)return null;if(Vu(t))return t;let e=t.length;if(!$m(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},E2=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&tp(Uint8Array)),A2=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=i.next())&&!o.done;){const a=o.value;e.call(t,a[0],a[1])}},M2=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},B2=Qo("HTMLFormElement"),T2=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),o0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),D2=Qo("RegExp"),Gm=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Ic(n,(o,a)=>{let l;(l=e(o,a,t))!==!1&&(i[a]=l||o)}),Object.defineProperties(t,i)},N2=t=>{Gm(t,(e,n)=>{if(uo(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(uo(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},O2=(t,e)=>{const n={},i=o=>{o.forEach(a=>{n[a]=!0})};return Vu(t)?i(t):i(String(t).split(e)),n},R2=()=>{},I2=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,Tf="abcdefghijklmnopqrstuvwxyz",a0="0123456789",Wm={DIGIT:a0,ALPHA:Tf,ALPHA_DIGIT:Tf+Tf.toUpperCase()+a0},F2=(t=16,e=Wm.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function j2(t){return!!(t&&uo(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const z2=t=>{const e=new Array(10),n=(i,o)=>{if(ef(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const a=Vu(i)?[]:{};return Ic(i,(l,f)=>{const p=n(l,o+1);!Ec(p)&&(a[f]=p)}),e[o]=void 0,a}}return i};return n(t,0)},U2=Qo("AsyncFunction"),q2=t=>t&&(ef(t)||uo(t))&&uo(t.then)&&uo(t.catch),Zm=((t,e)=>t?setImmediate:e?((n,i)=>(Jl.addEventListener("message",({source:o,data:a})=>{o===Jl&&a===n&&i.length&&i.shift()()},!1),o=>{i.push(o),Jl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",uo(Jl.postMessage)),$2=typeof queueMicrotask<"u"?queueMicrotask.bind(Jl):typeof process<"u"&&process.nextTick||Zm,Le={isArray:Vu,isArrayBuffer:qm,isBuffer:o2,isFormData:g2,isArrayBufferView:a2,isString:l2,isNumber:$m,isBoolean:u2,isObject:ef,isPlainObject:fh,isReadableStream:v2,isRequest:y2,isResponse:_2,isHeaders:b2,isUndefined:Ec,isDate:c2,isFile:h2,isBlob:f2,isRegExp:D2,isFunction:uo,isStream:p2,isURLSearchParams:m2,isTypedArray:E2,isFileList:d2,forEach:Ic,merge:ud,extend:x2,trim:w2,stripBOM:L2,inherits:C2,toFlatObject:P2,kindOf:Qh,kindOfTest:Qo,endsWith:k2,toArray:S2,forEachEntry:A2,matchAll:M2,isHTMLForm:B2,hasOwnProperty:o0,hasOwnProp:o0,reduceDescriptors:Gm,freezeMethods:N2,toObjectSet:O2,toCamelCase:T2,noop:R2,toFiniteNumber:I2,findKey:Vm,global:Jl,isContextDefined:Hm,ALPHABET:Wm,generateString:F2,isSpecCompliantForm:j2,toJSONObject:z2,isAsyncFn:U2,isThenable:q2,setImmediate:Zm,asap:$2};function Tn(t,e,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}Le.inherits(Tn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Le.toJSONObject(this.config),code:this.code,status:this.status}}});const Km=Tn.prototype,Ym={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ym[t]={value:t}});Object.defineProperties(Tn,Ym);Object.defineProperty(Km,"isAxiosError",{value:!0});Tn.from=(t,e,n,i,o,a)=>{const l=Object.create(Km);return Le.toFlatObject(t,l,function(p){return p!==Error.prototype},f=>f!=="isAxiosError"),Tn.call(l,t.message,e,n,i,o),l.cause=t,l.name=t.name,a&&Object.assign(l,a),l};const V2=null;function cd(t){return Le.isPlainObject(t)||Le.isArray(t)}function Jm(t){return Le.endsWith(t,"[]")?t.slice(0,-2):t}function l0(t,e,n){return t?t.concat(e).map(function(o,a){return o=Jm(o),!n&&a?"["+o+"]":o}).join(n?".":""):e}function H2(t){return Le.isArray(t)&&!t.some(cd)}const G2=Le.toFlatObject(Le,{},null,function(e){return/^is[A-Z]/.test(e)});function nf(t,e,n){if(!Le.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Le.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,U){return!Le.isUndefined(U[R])});const i=n.metaTokens,o=n.visitor||b,a=n.dots,l=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&Le.isSpecCompliantForm(e);if(!Le.isFunction(o))throw new TypeError("visitor must be a function");function v(j){if(j===null)return"";if(Le.isDate(j))return j.toISOString();if(!p&&Le.isBlob(j))throw new Tn("Blob is not supported. Use a Buffer instead.");return Le.isArrayBuffer(j)||Le.isTypedArray(j)?p&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function b(j,R,U){let N=j;if(j&&!U&&typeof j=="object"){if(Le.endsWith(R,"{}"))R=i?R:R.slice(0,-2),j=JSON.stringify(j);else if(Le.isArray(j)&&H2(j)||(Le.isFileList(j)||Le.endsWith(R,"[]"))&&(N=Le.toArray(j)))return R=Jm(R),N.forEach(function(Y,kt){!(Le.isUndefined(Y)||Y===null)&&e.append(l===!0?l0([R],kt,a):l===null?R:R+"[]",v(Y))}),!1}return cd(j)?!0:(e.append(l0(U,R,a),v(j)),!1)}const w=[],S=Object.assign(G2,{defaultVisitor:b,convertValue:v,isVisitable:cd});function x(j,R){if(!Le.isUndefined(j)){if(w.indexOf(j)!==-1)throw Error("Circular reference detected in "+R.join("."));w.push(j),Le.forEach(j,function(N,Z){(!(Le.isUndefined(N)||N===null)&&o.call(e,N,Le.isString(Z)?Z.trim():Z,R,S))===!0&&x(N,R?R.concat(Z):[Z])}),w.pop()}}if(!Le.isObject(t))throw new TypeError("data must be an object");return x(t),e}function u0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function ep(t,e){this._pairs=[],t&&nf(t,this,e)}const Xm=ep.prototype;Xm.append=function(e,n){this._pairs.push([e,n])};Xm.toString=function(e){const n=e?function(i){return e.call(this,i,u0)}:u0;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function W2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qm(t,e,n){if(!e)return t;const i=n&&n.encode||W2;Le.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(o?a=o(e,n):a=Le.isURLSearchParams(e)?e.toString():new ep(e,n).toString(i),a){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class c0{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Le.forEach(this.handlers,function(i){i!==null&&e(i)})}}const t1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z2=typeof URLSearchParams<"u"?URLSearchParams:ep,K2=typeof FormData<"u"?FormData:null,Y2=typeof Blob<"u"?Blob:null,J2={isBrowser:!0,classes:{URLSearchParams:Z2,FormData:K2,Blob:Y2},protocols:["http","https","file","blob","url","data"]},np=typeof window<"u"&&typeof document<"u",hd=typeof navigator=="object"&&navigator||void 0,X2=np&&(!hd||["ReactNative","NativeScript","NS"].indexOf(hd.product)<0),Q2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",t4=np&&window.location.href||"http://localhost",e4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:np,hasStandardBrowserEnv:X2,hasStandardBrowserWebWorkerEnv:Q2,navigator:hd,origin:t4},Symbol.toStringTag,{value:"Module"})),as={...e4,...J2};function n4(t,e){return nf(t,new as.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,a){return as.isNode&&Le.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function i4(t){return Le.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function r4(t){const e={},n=Object.keys(t);let i;const o=n.length;let a;for(i=0;i<o;i++)a=n[i],e[a]=t[a];return e}function e1(t){function e(n,i,o,a){let l=n[a++];if(l==="__proto__")return!0;const f=Number.isFinite(+l),p=a>=n.length;return l=!l&&Le.isArray(o)?o.length:l,p?(Le.hasOwnProp(o,l)?o[l]=[o[l],i]:o[l]=i,!f):((!o[l]||!Le.isObject(o[l]))&&(o[l]=[]),e(n,i,o[l],a)&&Le.isArray(o[l])&&(o[l]=r4(o[l])),!f)}if(Le.isFormData(t)&&Le.isFunction(t.entries)){const n={};return Le.forEachEntry(t,(i,o)=>{e(i4(i),o,n,0)}),n}return null}function s4(t,e,n){if(Le.isString(t))try{return(e||JSON.parse)(t),Le.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Fc={transitional:t1,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,a=Le.isObject(e);if(a&&Le.isHTMLForm(e)&&(e=new FormData(e)),Le.isFormData(e))return o?JSON.stringify(e1(e)):e;if(Le.isArrayBuffer(e)||Le.isBuffer(e)||Le.isStream(e)||Le.isFile(e)||Le.isBlob(e)||Le.isReadableStream(e))return e;if(Le.isArrayBufferView(e))return e.buffer;if(Le.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return n4(e,this.formSerializer).toString();if((f=Le.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return nf(f?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),s4(e)):e}],transformResponse:[function(e){const n=this.transitional||Fc.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Le.isResponse(e)||Le.isReadableStream(e))return e;if(e&&Le.isString(e)&&(i&&!this.responseType||o)){const l=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(f){if(l)throw f.name==="SyntaxError"?Tn.from(f,Tn.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:as.classes.FormData,Blob:as.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Le.forEach(["delete","get","head","post","put","patch"],t=>{Fc.headers[t]={}});const o4=Le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),a4=t=>{const e={};let n,i,o;return t&&t.split(`
`).forEach(function(l){o=l.indexOf(":"),n=l.substring(0,o).trim().toLowerCase(),i=l.substring(o+1).trim(),!(!n||e[n]&&o4[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},h0=Symbol("internals");function ec(t){return t&&String(t).trim().toLowerCase()}function dh(t){return t===!1||t==null?t:Le.isArray(t)?t.map(dh):String(t)}function l4(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const u4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Df(t,e,n,i,o){if(Le.isFunction(i))return i.call(this,e,n);if(o&&(e=n),!!Le.isString(e)){if(Le.isString(i))return e.indexOf(i)!==-1;if(Le.isRegExp(i))return i.test(e)}}function c4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function h4(t,e){const n=Le.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,a,l){return this[i].call(this,e,o,a,l)},configurable:!0})})}let Vs=class{constructor(e){e&&this.set(e)}set(e,n,i){const o=this;function a(f,p,v){const b=ec(p);if(!b)throw new Error("header name must be a non-empty string");const w=Le.findKey(o,b);(!w||o[w]===void 0||v===!0||v===void 0&&o[w]!==!1)&&(o[w||p]=dh(f))}const l=(f,p)=>Le.forEach(f,(v,b)=>a(v,b,p));if(Le.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(Le.isString(e)&&(e=e.trim())&&!u4(e))l(a4(e),n);else if(Le.isHeaders(e))for(const[f,p]of e.entries())a(p,f,i);else e!=null&&a(n,e,i);return this}get(e,n){if(e=ec(e),e){const i=Le.findKey(this,e);if(i){const o=this[i];if(!n)return o;if(n===!0)return l4(o);if(Le.isFunction(n))return n.call(this,o,i);if(Le.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ec(e),e){const i=Le.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Df(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let o=!1;function a(l){if(l=ec(l),l){const f=Le.findKey(i,l);f&&(!n||Df(i,i[f],f,n))&&(delete i[f],o=!0)}}return Le.isArray(e)?e.forEach(a):a(e),o}clear(e){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const a=n[i];(!e||Df(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const n=this,i={};return Le.forEach(this,(o,a)=>{const l=Le.findKey(i,a);if(l){n[l]=dh(o),delete n[a];return}const f=e?c4(a):String(a).trim();f!==a&&delete n[a],n[f]=dh(o),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Le.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=e&&Le.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[h0]=this[h0]={accessors:{}}).accessors,o=this.prototype;function a(l){const f=ec(l);i[f]||(h4(o,l),i[f]=!0)}return Le.isArray(e)?e.forEach(a):a(e),this}};Vs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Le.reduceDescriptors(Vs.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});Le.freezeMethods(Vs);function Nf(t,e){const n=this||Fc,i=e||n,o=Vs.from(i.headers);let a=i.data;return Le.forEach(t,function(f){a=f.call(n,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function n1(t){return!!(t&&t.__CANCEL__)}function Hu(t,e,n){Tn.call(this,t??"canceled",Tn.ERR_CANCELED,e,n),this.name="CanceledError"}Le.inherits(Hu,Tn,{__CANCEL__:!0});function i1(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Tn("Request failed with status code "+n.status,[Tn.ERR_BAD_REQUEST,Tn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function f4(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function d4(t,e){t=t||10;const n=new Array(t),i=new Array(t);let o=0,a=0,l;return e=e!==void 0?e:1e3,function(p){const v=Date.now(),b=i[a];l||(l=v),n[o]=p,i[o]=v;let w=a,S=0;for(;w!==o;)S+=n[w++],w=w%t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),v-l<e)return;const x=b&&v-b;return x?Math.round(S*1e3/x):void 0}}function p4(t,e){let n=0,i=1e3/e,o,a;const l=(v,b=Date.now())=>{n=b,o=null,a&&(clearTimeout(a),a=null),t.apply(null,v)};return[(...v)=>{const b=Date.now(),w=b-n;w>=i?l(v,b):(o=v,a||(a=setTimeout(()=>{a=null,l(o)},i-w)))},()=>o&&l(o)]}const Mh=(t,e,n=3)=>{let i=0;const o=d4(50,250);return p4(a=>{const l=a.loaded,f=a.lengthComputable?a.total:void 0,p=l-i,v=o(p),b=l<=f;i=l;const w={loaded:l,total:f,progress:f?l/f:void 0,bytes:p,rate:v||void 0,estimated:v&&f&&b?(f-l)/v:void 0,event:a,lengthComputable:f!=null,[e?"download":"upload"]:!0};t(w)},n)},f0=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},d0=t=>(...e)=>Le.asap(()=>t(...e)),g4=as.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,as.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(as.origin),as.navigator&&/(msie|trident)/i.test(as.navigator.userAgent)):()=>!0,m4=as.hasStandardBrowserEnv?{write(t,e,n,i,o,a){const l=[t+"="+encodeURIComponent(e)];Le.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),Le.isString(i)&&l.push("path="+i),Le.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function v4(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function y4(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function r1(t,e){return t&&!v4(e)?y4(t,e):e}const p0=t=>t instanceof Vs?{...t}:t;function au(t,e){e=e||{};const n={};function i(v,b,w,S){return Le.isPlainObject(v)&&Le.isPlainObject(b)?Le.merge.call({caseless:S},v,b):Le.isPlainObject(b)?Le.merge({},b):Le.isArray(b)?b.slice():b}function o(v,b,w,S){if(Le.isUndefined(b)){if(!Le.isUndefined(v))return i(void 0,v,w,S)}else return i(v,b,w,S)}function a(v,b){if(!Le.isUndefined(b))return i(void 0,b)}function l(v,b){if(Le.isUndefined(b)){if(!Le.isUndefined(v))return i(void 0,v)}else return i(void 0,b)}function f(v,b,w){if(w in e)return i(v,b);if(w in t)return i(void 0,v)}const p={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:f,headers:(v,b,w)=>o(p0(v),p0(b),w,!0)};return Le.forEach(Object.keys(Object.assign({},t,e)),function(b){const w=p[b]||o,S=w(t[b],e[b],b);Le.isUndefined(S)&&w!==f||(n[b]=S)}),n}const s1=t=>{const e=au({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:l,auth:f}=e;e.headers=l=Vs.from(l),e.url=Qm(r1(e.baseURL,e.url),t.params,t.paramsSerializer),f&&l.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let p;if(Le.isFormData(n)){if(as.hasStandardBrowserEnv||as.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((p=l.getContentType())!==!1){const[v,...b]=p?p.split(";").map(w=>w.trim()).filter(Boolean):[];l.setContentType([v||"multipart/form-data",...b].join("; "))}}if(as.hasStandardBrowserEnv&&(i&&Le.isFunction(i)&&(i=i(e)),i||i!==!1&&g4(e.url))){const v=o&&a&&m4.read(a);v&&l.set(o,v)}return e},_4=typeof XMLHttpRequest<"u",b4=_4&&function(t){return new Promise(function(n,i){const o=s1(t);let a=o.data;const l=Vs.from(o.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:v}=o,b,w,S,x,j;function R(){x&&x(),j&&j(),o.cancelToken&&o.cancelToken.unsubscribe(b),o.signal&&o.signal.removeEventListener("abort",b)}let U=new XMLHttpRequest;U.open(o.method.toUpperCase(),o.url,!0),U.timeout=o.timeout;function N(){if(!U)return;const Y=Vs.from("getAllResponseHeaders"in U&&U.getAllResponseHeaders()),At={data:!f||f==="text"||f==="json"?U.responseText:U.response,status:U.status,statusText:U.statusText,headers:Y,config:t,request:U};i1(function(xt){n(xt),R()},function(xt){i(xt),R()},At),U=null}"onloadend"in U?U.onloadend=N:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(N)},U.onabort=function(){U&&(i(new Tn("Request aborted",Tn.ECONNABORTED,t,U)),U=null)},U.onerror=function(){i(new Tn("Network Error",Tn.ERR_NETWORK,t,U)),U=null},U.ontimeout=function(){let kt=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const At=o.transitional||t1;o.timeoutErrorMessage&&(kt=o.timeoutErrorMessage),i(new Tn(kt,At.clarifyTimeoutError?Tn.ETIMEDOUT:Tn.ECONNABORTED,t,U)),U=null},a===void 0&&l.setContentType(null),"setRequestHeader"in U&&Le.forEach(l.toJSON(),function(kt,At){U.setRequestHeader(At,kt)}),Le.isUndefined(o.withCredentials)||(U.withCredentials=!!o.withCredentials),f&&f!=="json"&&(U.responseType=o.responseType),v&&([S,j]=Mh(v,!0),U.addEventListener("progress",S)),p&&U.upload&&([w,x]=Mh(p),U.upload.addEventListener("progress",w),U.upload.addEventListener("loadend",x)),(o.cancelToken||o.signal)&&(b=Y=>{U&&(i(!Y||Y.type?new Hu(null,t,U):Y),U.abort(),U=null)},o.cancelToken&&o.cancelToken.subscribe(b),o.signal&&(o.signal.aborted?b():o.signal.addEventListener("abort",b)));const Z=f4(o.url);if(Z&&as.protocols.indexOf(Z)===-1){i(new Tn("Unsupported protocol "+Z+":",Tn.ERR_BAD_REQUEST,t));return}U.send(a||null)})},w4=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,o;const a=function(v){if(!o){o=!0,f();const b=v instanceof Error?v:this.reason;i.abort(b instanceof Tn?b:new Hu(b instanceof Error?b.message:b))}};let l=e&&setTimeout(()=>{l=null,a(new Tn(`timeout ${e} of ms exceeded`,Tn.ETIMEDOUT))},e);const f=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(v=>{v.unsubscribe?v.unsubscribe(a):v.removeEventListener("abort",a)}),t=null)};t.forEach(v=>v.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>Le.asap(f),p}},x4=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,o;for(;i<n;)o=i+e,yield t.slice(i,o),i=o},L4=async function*(t,e){for await(const n of C4(t))yield*x4(n,e)},C4=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},g0=(t,e,n,i)=>{const o=L4(t,e);let a=0,l,f=p=>{l||(l=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:v,value:b}=await o.next();if(v){f(),p.close();return}let w=b.byteLength;if(n){let S=a+=w;n(S)}p.enqueue(new Uint8Array(b))}catch(v){throw f(v),v}},cancel(p){return f(p),o.return()}},{highWaterMark:2})},rf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",o1=rf&&typeof ReadableStream=="function",P4=rf&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),a1=(t,...e)=>{try{return!!t(...e)}catch{return!1}},k4=o1&&a1(()=>{let t=!1;const e=new Request(as.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),m0=64*1024,fd=o1&&a1(()=>Le.isReadableStream(new Response("").body)),Bh={stream:fd&&(t=>t.body)};rf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Bh[e]&&(Bh[e]=Le.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new Tn(`Response type '${e}' is not supported`,Tn.ERR_NOT_SUPPORT,i)})})})(new Response);const S4=async t=>{if(t==null)return 0;if(Le.isBlob(t))return t.size;if(Le.isSpecCompliantForm(t))return(await new Request(as.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Le.isArrayBufferView(t)||Le.isArrayBuffer(t))return t.byteLength;if(Le.isURLSearchParams(t)&&(t=t+""),Le.isString(t))return(await P4(t)).byteLength},E4=async(t,e)=>{const n=Le.toFiniteNumber(t.getContentLength());return n??S4(e)},A4=rf&&(async t=>{let{url:e,method:n,data:i,signal:o,cancelToken:a,timeout:l,onDownloadProgress:f,onUploadProgress:p,responseType:v,headers:b,withCredentials:w="same-origin",fetchOptions:S}=s1(t);v=v?(v+"").toLowerCase():"text";let x=w4([o,a&&a.toAbortSignal()],l),j;const R=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let U;try{if(p&&k4&&n!=="get"&&n!=="head"&&(U=await E4(b,i))!==0){let At=new Request(e,{method:"POST",body:i,duplex:"half"}),Dt;if(Le.isFormData(i)&&(Dt=At.headers.get("content-type"))&&b.setContentType(Dt),At.body){const[xt,gt]=f0(U,Mh(d0(p)));i=g0(At.body,m0,xt,gt)}}Le.isString(w)||(w=w?"include":"omit");const N="credentials"in Request.prototype;j=new Request(e,{...S,signal:x,method:n.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:N?w:void 0});let Z=await fetch(j);const Y=fd&&(v==="stream"||v==="response");if(fd&&(f||Y&&R)){const At={};["status","statusText","headers"].forEach(_t=>{At[_t]=Z[_t]});const Dt=Le.toFiniteNumber(Z.headers.get("content-length")),[xt,gt]=f&&f0(Dt,Mh(d0(f),!0))||[];Z=new Response(g0(Z.body,m0,xt,()=>{gt&&gt(),R&&R()}),At)}v=v||"text";let kt=await Bh[Le.findKey(Bh,v)||"text"](Z,t);return!Y&&R&&R(),await new Promise((At,Dt)=>{i1(At,Dt,{data:kt,headers:Vs.from(Z.headers),status:Z.status,statusText:Z.statusText,config:t,request:j})})}catch(N){throw R&&R(),N&&N.name==="TypeError"&&/fetch/i.test(N.message)?Object.assign(new Tn("Network Error",Tn.ERR_NETWORK,t,j),{cause:N.cause||N}):Tn.from(N,N&&N.code,t,j)}}),dd={http:V2,xhr:b4,fetch:A4};Le.forEach(dd,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const v0=t=>`- ${t}`,M4=t=>Le.isFunction(t)||t===null||t===!1,l1={getAdapter:t=>{t=Le.isArray(t)?t:[t];const{length:e}=t;let n,i;const o={};for(let a=0;a<e;a++){n=t[a];let l;if(i=n,!M4(n)&&(i=dd[(l=String(n)).toLowerCase()],i===void 0))throw new Tn(`Unknown adapter '${l}'`);if(i)break;o[l||"#"+a]=i}if(!i){const a=Object.entries(o).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let l=e?a.length>1?`since :
`+a.map(v0).join(`
`):" "+v0(a[0]):"as no adapter specified";throw new Tn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:dd};function Of(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hu(null,t)}function y0(t){return Of(t),t.headers=Vs.from(t.headers),t.data=Nf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),l1.getAdapter(t.adapter||Fc.adapter)(t).then(function(i){return Of(t),i.data=Nf.call(t,t.transformResponse,i),i.headers=Vs.from(i.headers),i},function(i){return n1(i)||(Of(t),i&&i.response&&(i.response.data=Nf.call(t,t.transformResponse,i.response),i.response.headers=Vs.from(i.response.headers))),Promise.reject(i)})}const u1="1.7.9",sf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{sf[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const _0={};sf.transitional=function(e,n,i){function o(a,l){return"[Axios v"+u1+"] Transitional option '"+a+"'"+l+(i?". "+i:"")}return(a,l,f)=>{if(e===!1)throw new Tn(o(l," has been removed"+(n?" in "+n:"")),Tn.ERR_DEPRECATED);return n&&!_0[l]&&(_0[l]=!0,console.warn(o(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,l,f):!0}};sf.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function B4(t,e,n){if(typeof t!="object")throw new Tn("options must be an object",Tn.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const a=i[o],l=e[a];if(l){const f=t[a],p=f===void 0||l(f,a,t);if(p!==!0)throw new Tn("option "+a+" must be "+p,Tn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Tn("Unknown option "+a,Tn.ERR_BAD_OPTION)}}const ph={assertOptions:B4,validators:sf},_a=ph.validators;let iu=class{constructor(e){this.defaults=e,this.interceptors={request:new c0,response:new c0}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=au(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:a}=n;i!==void 0&&ph.assertOptions(i,{silentJSONParsing:_a.transitional(_a.boolean),forcedJSONParsing:_a.transitional(_a.boolean),clarifyTimeoutError:_a.transitional(_a.boolean)},!1),o!=null&&(Le.isFunction(o)?n.paramsSerializer={serialize:o}:ph.assertOptions(o,{encode:_a.function,serialize:_a.function},!0)),ph.assertOptions(n,{baseUrl:_a.spelling("baseURL"),withXsrfToken:_a.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=a&&Le.merge(a.common,a[n.method]);a&&Le.forEach(["delete","get","head","post","put","patch","common"],j=>{delete a[j]}),n.headers=Vs.concat(l,a);const f=[];let p=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(n)===!1||(p=p&&R.synchronous,f.unshift(R.fulfilled,R.rejected))});const v=[];this.interceptors.response.forEach(function(R){v.push(R.fulfilled,R.rejected)});let b,w=0,S;if(!p){const j=[y0.bind(this),void 0];for(j.unshift.apply(j,f),j.push.apply(j,v),S=j.length,b=Promise.resolve(n);w<S;)b=b.then(j[w++],j[w++]);return b}S=f.length;let x=n;for(w=0;w<S;){const j=f[w++],R=f[w++];try{x=j(x)}catch(U){R.call(this,U);break}}try{b=y0.call(this,x)}catch(j){return Promise.reject(j)}for(w=0,S=v.length;w<S;)b=b.then(v[w++],v[w++]);return b}getUri(e){e=au(this.defaults,e);const n=r1(e.baseURL,e.url);return Qm(n,e.params,e.paramsSerializer)}};Le.forEach(["delete","get","head","options"],function(e){iu.prototype[e]=function(n,i){return this.request(au(i||{},{method:e,url:n,data:(i||{}).data}))}});Le.forEach(["post","put","patch"],function(e){function n(i){return function(a,l,f){return this.request(au(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}iu.prototype[e]=n(),iu.prototype[e+"Form"]=n(!0)});let T4=class c1{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const l=new Promise(f=>{i.subscribe(f),a=f}).then(o);return l.cancel=function(){i.unsubscribe(a)},l},e(function(a,l,f){i.reason||(i.reason=new Hu(a,l,f),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new c1(function(o){e=o}),cancel:e}}};function D4(t){return function(n){return t.apply(null,n)}}function N4(t){return Le.isObject(t)&&t.isAxiosError===!0}const pd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pd).forEach(([t,e])=>{pd[e]=t});function h1(t){const e=new iu(t),n=Um(iu.prototype.request,e);return Le.extend(n,iu.prototype,e,{allOwnKeys:!0}),Le.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return h1(au(t,o))},n}const sr=h1(Fc);sr.Axios=iu;sr.CanceledError=Hu;sr.CancelToken=T4;sr.isCancel=n1;sr.VERSION=u1;sr.toFormData=nf;sr.AxiosError=Tn;sr.Cancel=sr.CanceledError;sr.all=function(e){return Promise.all(e)};sr.spread=D4;sr.isAxiosError=N4;sr.mergeConfig=au;sr.AxiosHeaders=Vs;sr.formToJSON=t=>e1(Le.isHTMLForm(t)?new FormData(t):t);sr.getAdapter=l1.getAdapter;sr.HttpStatusCode=pd;sr.default=sr;const{Axios:SS,AxiosError:ES,CanceledError:AS,isCancel:MS,CancelToken:BS,VERSION:TS,all:DS,Cancel:NS,isAxiosError:OS,spread:RS,toFormData:IS,AxiosHeaders:FS,HttpStatusCode:jS,formToJSON:zS,getAdapter:US,mergeConfig:qS}=sr,kn=sr.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function f1(t){var i;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((i=n.pop())==null?void 0:i.split(";").shift())||null}kn.interceptors.request.use(t=>{const e=f1("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));kn.interceptors.response.use(t=>t,async t=>{var n;const e=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!e._retry){e._retry=!0;try{await xs().refreshToken();const o=f1("access_token");if(o)return e.headers.Authorization=`Bearer ${o}`,kn(e)}catch(i){console.error("Token refresh failed:",i),window.location.href="/login"}}return Promise.reject(t)});kn.defaults.baseURL="/api";kn.defaults.headers.common["Content-Type"]="application/json";kn.defaults.withCredentials=!0;function Th(t){var i;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((i=n.pop())==null?void 0:i.split(";").shift())||null}kn.interceptors.request.use(t=>{const e=Th("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));kn.interceptors.response.use(t=>t,async t=>{var i,o;const e=xs(),n=t.config;if(((i=t.response)==null?void 0:i.status)===401&&!n._retry&&!((o=n.url)!=null&&o.includes("/token/refresh/"))){n._retry=!0;try{if(!Th("access_token"))throw new Error("No token available");await e.refreshToken();const l=Th("access_token");if(l)return n.headers.Authorization=`Bearer ${l}`,kn(n)}catch(a){console.error("Token refresh failed:",a),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function O4(t,e,n=1){const i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);const o=`expires=${i.toUTCString()}`;document.cookie=`${t}=${e};${o};path=/;secure;samesite=Strict`}function Xl(t){if(!t)return"Non spécifié";const e=`${t.first_name} ${t.last_name.toUpperCase()}`;return t.company_name?`${e} (${t.company_name})`:e}const xs=Qd("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isDealer:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="dealer"},isClient:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="client"},currentUser:t=>t.user,hasDealer:t=>{var e;return!!((e=t.user)!=null&&e.dealer)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!Th("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await kn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,i,o;try{const a=await kn.post("/token/",{username:t,password:e});if(!a.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${a.data.access}; path=/; secure; samesite=Strict`;const l=await this.fetchUserProfile();return this.user=l,this.isAuthenticated=!0,!0}catch(a){throw this.isAuthenticated=!1,this.user=null,((n=a.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(o=(i=a.response)==null?void 0:i.data)!=null&&o.detail?new Error(a.response.data.detail):a}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await kn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await kn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e,n,i;try{const o=await kn.post("/token/refresh/",{},{withCredentials:!0}),{access:a}=o.data;if(!a)throw new Error("No access token received");return O4("access_token",a,1),this.isAuthenticated=!0,a}catch(o){throw console.error("Error refreshing token:",{status:(t=o.response)==null?void 0:t.status,data:(e=o.response)==null?void 0:e.data}),(((n=o.response)==null?void 0:n.status)===401||((i=o.response)==null?void 0:i.status)===403)&&await this.logout(),o}},async fetchConcessionnaires(){this.loading=!0;try{const t=await kn.get("/users/",{params:{role:"dealer"}});this.concessionnaires=t.data}catch(t){throw this.error="Erreur lors de la récupération des concessionnaires",t}finally{this.loading=!1}},async setConcessionnaire(t,e){this.loading=!0;try{await kn.patch(`/users/${t}/`,{concessionnaire:e}),this.user&&this.user.id===t&&(this.user.dealer=e)}catch(n){throw this.error="Erreur lors de la mise à jour du concessionnaire",n}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await kn.post("/users/",t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await kn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await kn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Pu=typeof document<"u";function d1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function R4(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&d1(t.default)}const li=Object.assign;function Rf(t,e){const n={};for(const i in e){const o=e[i];n[i]=Xo(o)?o.map(t):t(o)}return n}const vc=()=>{},Xo=Array.isArray,p1=/#/g,I4=/&/g,F4=/\//g,j4=/=/g,z4=/\?/g,g1=/\+/g,U4=/%5B/g,q4=/%5D/g,m1=/%5E/g,$4=/%60/g,v1=/%7B/g,V4=/%7C/g,y1=/%7D/g,H4=/%20/g;function ip(t){return encodeURI(""+t).replace(V4,"|").replace(U4,"[").replace(q4,"]")}function G4(t){return ip(t).replace(v1,"{").replace(y1,"}").replace(m1,"^")}function gd(t){return ip(t).replace(g1,"%2B").replace(H4,"+").replace(p1,"%23").replace(I4,"%26").replace($4,"`").replace(v1,"{").replace(y1,"}").replace(m1,"^")}function W4(t){return gd(t).replace(j4,"%3D")}function Z4(t){return ip(t).replace(p1,"%23").replace(z4,"%3F")}function K4(t){return t==null?"":Z4(t).replace(F4,"%2F")}function Ac(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Y4=/\/$/,J4=t=>t.replace(Y4,"");function If(t,e,n="/"){let i,o={},a="",l="";const f=e.indexOf("#");let p=e.indexOf("?");return f<p&&f>=0&&(p=-1),p>-1&&(i=e.slice(0,p),a=e.slice(p+1,f>-1?f:e.length),o=t(a)),f>-1&&(i=i||e.slice(0,f),l=e.slice(f,e.length)),i=e5(i??e,n),{fullPath:i+(a&&"?")+a+l,path:i,query:o,hash:Ac(l)}}function X4(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function b0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Q4(t,e,n){const i=e.matched.length-1,o=n.matched.length-1;return i>-1&&i===o&&Uu(e.matched[i],n.matched[o])&&_1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Uu(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function _1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!t5(t[n],e[n]))return!1;return!0}function t5(t,e){return Xo(t)?w0(t,e):Xo(e)?w0(e,t):t===e}function w0(t,e){return Xo(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function e5(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),o=i[i.length-1];(o===".."||o===".")&&i.push("");let a=n.length-1,l,f;for(l=0;l<i.length;l++)if(f=i[l],f!==".")if(f==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+i.slice(l).join("/")}const yl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Mc;(function(t){t.pop="pop",t.push="push"})(Mc||(Mc={}));var yc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(yc||(yc={}));function n5(t){if(!t)if(Pu){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),J4(t)}const i5=/^[^#]+#/;function r5(t,e){return t.replace(i5,"#")+e}function s5(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const of=()=>({left:window.scrollX,top:window.scrollY});function o5(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=s5(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function x0(t,e){return(history.state?history.state.position-e:-1)+t}const md=new Map;function a5(t,e){md.set(t,e)}function l5(t){const e=md.get(t);return md.delete(t),e}let u5=()=>location.protocol+"//"+location.host;function b1(t,e){const{pathname:n,search:i,hash:o}=e,a=t.indexOf("#");if(a>-1){let f=o.includes(t.slice(a))?t.slice(a).length:1,p=o.slice(f);return p[0]!=="/"&&(p="/"+p),b0(p,"")}return b0(n,t)+i+o}function c5(t,e,n,i){let o=[],a=[],l=null;const f=({state:S})=>{const x=b1(t,location),j=n.value,R=e.value;let U=0;if(S){if(n.value=x,e.value=S,l&&l===j){l=null;return}U=R?S.position-R.position:0}else i(x);o.forEach(N=>{N(n.value,j,{delta:U,type:Mc.pop,direction:U?U>0?yc.forward:yc.back:yc.unknown})})};function p(){l=n.value}function v(S){o.push(S);const x=()=>{const j=o.indexOf(S);j>-1&&o.splice(j,1)};return a.push(x),x}function b(){const{history:S}=window;S.state&&S.replaceState(li({},S.state,{scroll:of()}),"")}function w(){for(const S of a)S();a=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",b,{passive:!0}),{pauseListeners:p,listen:v,destroy:w}}function L0(t,e,n,i=!1,o=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:o?of():null}}function h5(t){const{history:e,location:n}=window,i={value:b1(t,n)},o={value:e.state};o.value||a(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(p,v,b){const w=t.indexOf("#"),S=w>-1?(n.host&&document.querySelector("base")?t:t.slice(w))+p:u5()+t+p;try{e[b?"replaceState":"pushState"](v,"",S),o.value=v}catch(x){console.error(x),n[b?"replace":"assign"](S)}}function l(p,v){const b=li({},e.state,L0(o.value.back,p,o.value.forward,!0),v,{position:o.value.position});a(p,b,!0),i.value=p}function f(p,v){const b=li({},o.value,e.state,{forward:p,scroll:of()});a(b.current,b,!0);const w=li({},L0(i.value,p,null),{position:b.position+1},v);a(p,w,!1),i.value=p}return{location:i,state:o,push:f,replace:l}}function f5(t){t=n5(t);const e=h5(t),n=c5(t,e.state,e.location,e.replace);function i(a,l=!0){l||n.pauseListeners(),history.go(a)}const o=li({location:"",base:t,go:i,createHref:r5.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function d5(t){return typeof t=="string"||t&&typeof t=="object"}function w1(t){return typeof t=="string"||typeof t=="symbol"}const x1=Symbol("");var C0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(C0||(C0={}));function qu(t,e){return li(new Error,{type:t,[x1]:!0},e)}function Ga(t,e){return t instanceof Error&&x1 in t&&(e==null||!!(t.type&e))}const P0="[^/]+?",p5={sensitive:!1,strict:!1,start:!0,end:!0},g5=/[.+*?^${}()[\]/\\]/g;function m5(t,e){const n=li({},p5,e),i=[];let o=n.start?"^":"";const a=[];for(const v of t){const b=v.length?[]:[90];n.strict&&!v.length&&(o+="/");for(let w=0;w<v.length;w++){const S=v[w];let x=40+(n.sensitive?.25:0);if(S.type===0)w||(o+="/"),o+=S.value.replace(g5,"\\$&"),x+=40;else if(S.type===1){const{value:j,repeatable:R,optional:U,regexp:N}=S;a.push({name:j,repeatable:R,optional:U});const Z=N||P0;if(Z!==P0){x+=10;try{new RegExp(`(${Z})`)}catch(kt){throw new Error(`Invalid custom RegExp for param "${j}" (${Z}): `+kt.message)}}let Y=R?`((?:${Z})(?:/(?:${Z}))*)`:`(${Z})`;w||(Y=U&&v.length<2?`(?:/${Y})`:"/"+Y),U&&(Y+="?"),o+=Y,x+=20,U&&(x+=-8),R&&(x+=-20),Z===".*"&&(x+=-50)}b.push(x)}i.push(b)}if(n.strict&&n.end){const v=i.length-1;i[v][i[v].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const l=new RegExp(o,n.sensitive?"":"i");function f(v){const b=v.match(l),w={};if(!b)return null;for(let S=1;S<b.length;S++){const x=b[S]||"",j=a[S-1];w[j.name]=x&&j.repeatable?x.split("/"):x}return w}function p(v){let b="",w=!1;for(const S of t){(!w||!b.endsWith("/"))&&(b+="/"),w=!1;for(const x of S)if(x.type===0)b+=x.value;else if(x.type===1){const{value:j,repeatable:R,optional:U}=x,N=j in v?v[j]:"";if(Xo(N)&&!R)throw new Error(`Provided param "${j}" is an array but it is not repeatable (* or + modifiers)`);const Z=Xo(N)?N.join("/"):N;if(!Z)if(U)S.length<2&&(b.endsWith("/")?b=b.slice(0,-1):w=!0);else throw new Error(`Missing required param "${j}"`);b+=Z}}return b||"/"}return{re:l,score:i,keys:a,parse:f,stringify:p}}function v5(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function L1(t,e){let n=0;const i=t.score,o=e.score;for(;n<i.length&&n<o.length;){const a=v5(i[n],o[n]);if(a)return a;n++}if(Math.abs(o.length-i.length)===1){if(k0(i))return 1;if(k0(o))return-1}return o.length-i.length}function k0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const y5={type:0,value:""},_5=/[a-zA-Z0-9_]/;function b5(t){if(!t)return[[]];if(t==="/")return[[y5]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(x){throw new Error(`ERR (${n})/"${v}": ${x}`)}let n=0,i=n;const o=[];let a;function l(){a&&o.push(a),a=[]}let f=0,p,v="",b="";function w(){v&&(n===0?a.push({type:0,value:v}):n===1||n===2||n===3?(a.length>1&&(p==="*"||p==="+")&&e(`A repeatable param (${v}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:v,regexp:b,repeatable:p==="*"||p==="+",optional:p==="*"||p==="?"})):e("Invalid state to consume buffer"),v="")}function S(){v+=p}for(;f<t.length;){if(p=t[f++],p==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:p==="/"?(v&&w(),l()):p===":"?(w(),n=1):S();break;case 4:S(),n=i;break;case 1:p==="("?n=2:_5.test(p)?S():(w(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&f--);break;case 2:p===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+p:n=3:b+=p;break;case 3:w(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&f--,b="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${v}"`),w(),l(),o}function w5(t,e,n){const i=m5(b5(t.path),n),o=li(i,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function x5(t,e){const n=[],i=new Map;e=M0({strict:!1,end:!0,sensitive:!1},e);function o(w){return i.get(w)}function a(w,S,x){const j=!x,R=E0(w);R.aliasOf=x&&x.record;const U=M0(e,w),N=[R];if("alias"in w){const kt=typeof w.alias=="string"?[w.alias]:w.alias;for(const At of kt)N.push(E0(li({},R,{components:x?x.record.components:R.components,path:At,aliasOf:x?x.record:R})))}let Z,Y;for(const kt of N){const{path:At}=kt;if(S&&At[0]!=="/"){const Dt=S.record.path,xt=Dt[Dt.length-1]==="/"?"":"/";kt.path=S.record.path+(At&&xt+At)}if(Z=w5(kt,S,U),x?x.alias.push(Z):(Y=Y||Z,Y!==Z&&Y.alias.push(Z),j&&w.name&&!A0(Z)&&l(w.name)),C1(Z)&&p(Z),R.children){const Dt=R.children;for(let xt=0;xt<Dt.length;xt++)a(Dt[xt],Z,x&&x.children[xt])}x=x||Z}return Y?()=>{l(Y)}:vc}function l(w){if(w1(w)){const S=i.get(w);S&&(i.delete(w),n.splice(n.indexOf(S),1),S.children.forEach(l),S.alias.forEach(l))}else{const S=n.indexOf(w);S>-1&&(n.splice(S,1),w.record.name&&i.delete(w.record.name),w.children.forEach(l),w.alias.forEach(l))}}function f(){return n}function p(w){const S=P5(w,n);n.splice(S,0,w),w.record.name&&!A0(w)&&i.set(w.record.name,w)}function v(w,S){let x,j={},R,U;if("name"in w&&w.name){if(x=i.get(w.name),!x)throw qu(1,{location:w});U=x.record.name,j=li(S0(S.params,x.keys.filter(Y=>!Y.optional).concat(x.parent?x.parent.keys.filter(Y=>Y.optional):[]).map(Y=>Y.name)),w.params&&S0(w.params,x.keys.map(Y=>Y.name))),R=x.stringify(j)}else if(w.path!=null)R=w.path,x=n.find(Y=>Y.re.test(R)),x&&(j=x.parse(R),U=x.record.name);else{if(x=S.name?i.get(S.name):n.find(Y=>Y.re.test(S.path)),!x)throw qu(1,{location:w,currentLocation:S});U=x.record.name,j=li({},S.params,w.params),R=x.stringify(j)}const N=[];let Z=x;for(;Z;)N.unshift(Z.record),Z=Z.parent;return{name:U,path:R,params:j,matched:N,meta:C5(N)}}t.forEach(w=>a(w));function b(){n.length=0,i.clear()}return{addRoute:a,resolve:v,removeRoute:l,clearRoutes:b,getRoutes:f,getRecordMatcher:o}}function S0(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function E0(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:L5(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function L5(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function A0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function C5(t){return t.reduce((e,n)=>li(e,n.meta),{})}function M0(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function P5(t,e){let n=0,i=e.length;for(;n!==i;){const a=n+i>>1;L1(t,e[a])<0?i=a:n=a+1}const o=k5(t);return o&&(i=e.lastIndexOf(o,i-1)),i}function k5(t){let e=t;for(;e=e.parent;)if(C1(e)&&L1(t,e)===0)return e}function C1({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function S5(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<i.length;++o){const a=i[o].replace(g1," "),l=a.indexOf("="),f=Ac(l<0?a:a.slice(0,l)),p=l<0?null:Ac(a.slice(l+1));if(f in e){let v=e[f];Xo(v)||(v=e[f]=[v]),v.push(p)}else e[f]=p}return e}function B0(t){let e="";for(let n in t){const i=t[n];if(n=W4(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(Xo(i)?i.map(a=>a&&gd(a)):[i&&gd(i)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+n,a!=null&&(e+="="+a))})}return e}function E5(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=Xo(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return e}const A5=Symbol(""),T0=Symbol(""),af=Symbol(""),rp=Symbol(""),vd=Symbol("");function nc(){let t=[];function e(i){return t.push(i),()=>{const o=t.indexOf(i);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Pl(t,e,n,i,o,a=l=>l()){const l=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((f,p)=>{const v=S=>{S===!1?p(qu(4,{from:n,to:e})):S instanceof Error?p(S):d5(S)?p(qu(2,{from:e,to:S})):(l&&i.enterCallbacks[o]===l&&typeof S=="function"&&l.push(S),f())},b=a(()=>t.call(i&&i.instances[o],e,n,v));let w=Promise.resolve(b);t.length<3&&(w=w.then(v)),w.catch(S=>p(S))})}function Ff(t,e,n,i,o=a=>a()){const a=[];for(const l of t)for(const f in l.components){let p=l.components[f];if(!(e!=="beforeRouteEnter"&&!l.instances[f]))if(d1(p)){const b=(p.__vccOpts||p)[e];b&&a.push(Pl(b,n,i,l,f,o))}else{let v=p();a.push(()=>v.then(b=>{if(!b)throw new Error(`Couldn't resolve component "${f}" at "${l.path}"`);const w=R4(b)?b.default:b;l.mods[f]=b,l.components[f]=w;const x=(w.__vccOpts||w)[e];return x&&Pl(x,n,i,l,f,o)()}))}}return a}function D0(t){const e=Mo(af),n=Mo(rp),i=zn(()=>{const p=Rn(t.to);return e.resolve(p)}),o=zn(()=>{const{matched:p}=i.value,{length:v}=p,b=p[v-1],w=n.matched;if(!b||!w.length)return-1;const S=w.findIndex(Uu.bind(null,b));if(S>-1)return S;const x=N0(p[v-2]);return v>1&&N0(b)===x&&w[w.length-1].path!==x?w.findIndex(Uu.bind(null,p[v-2])):S}),a=zn(()=>o.value>-1&&D5(n.params,i.value.params)),l=zn(()=>o.value>-1&&o.value===n.matched.length-1&&_1(n.params,i.value.params));function f(p={}){if(T5(p)){const v=e[Rn(t.replace)?"replace":"push"](Rn(t.to)).catch(vc);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>v),v}return Promise.resolve()}return{route:i,href:zn(()=>i.value.href),isActive:a,isExactActive:l,navigate:f}}function M5(t){return t.length===1?t[0]:t}const B5=Ls({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:D0,setup(t,{slots:e}){const n=el(D0(t)),{options:i}=Mo(af),o=zn(()=>({[O0(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[O0(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=e.default&&M5(e.default(n));return t.custom?a:Xd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},a)}}}),ku=B5;function T5(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function D5(t,e){for(const n in e){const i=e[n],o=t[n];if(typeof i=="string"){if(i!==o)return!1}else if(!Xo(o)||o.length!==i.length||i.some((a,l)=>a!==o[l]))return!1}return!0}function N0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const O0=(t,e,n)=>t??e??n,N5=Ls({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=Mo(vd),o=zn(()=>t.route||i.value),a=Mo(T0,0),l=zn(()=>{let v=Rn(a);const{matched:b}=o.value;let w;for(;(w=b[v])&&!w.components;)v++;return v}),f=zn(()=>o.value.matched[l.value]);ah(T0,zn(()=>l.value+1)),ah(A5,f),ah(vd,o);const p=Fe();return Rr(()=>[p.value,f.value,t.name],([v,b,w],[S,x,j])=>{b&&(b.instances[w]=v,x&&x!==b&&v&&v===S&&(b.leaveGuards.size||(b.leaveGuards=x.leaveGuards),b.updateGuards.size||(b.updateGuards=x.updateGuards))),v&&b&&(!x||!Uu(b,x)||!S)&&(b.enterCallbacks[w]||[]).forEach(R=>R(v))},{flush:"post"}),()=>{const v=o.value,b=t.name,w=f.value,S=w&&w.components[b];if(!S)return R0(n.default,{Component:S,route:v});const x=w.props[b],j=x?x===!0?v.params:typeof x=="function"?x(v):x:null,U=Xd(S,li({},j,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(w.instances[b]=null)},ref:p}));return R0(n.default,{Component:U,route:v})||U}}});function R0(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const P1=N5;function O5(t){const e=x5(t.routes,t),n=t.parseQuery||S5,i=t.stringifyQuery||B0,o=t.history,a=nc(),l=nc(),f=nc(),p=Xv(yl);let v=yl;Pu&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=Rf.bind(null,q=>""+q),w=Rf.bind(null,K4),S=Rf.bind(null,Ac);function x(q,dt){let ct,Et;return w1(q)?(ct=e.getRecordMatcher(q),Et=dt):Et=q,e.addRoute(Et,ct)}function j(q){const dt=e.getRecordMatcher(q);dt&&e.removeRoute(dt)}function R(){return e.getRoutes().map(q=>q.record)}function U(q){return!!e.getRecordMatcher(q)}function N(q,dt){if(dt=li({},dt||p.value),typeof q=="string"){const yt=If(n,q,dt.path),vt=e.resolve({path:yt.path},dt),J=o.createHref(yt.fullPath);return li(yt,vt,{params:S(vt.params),hash:Ac(yt.hash),redirectedFrom:void 0,href:J})}let ct;if(q.path!=null)ct=li({},q,{path:If(n,q.path,dt.path).path});else{const yt=li({},q.params);for(const vt in yt)yt[vt]==null&&delete yt[vt];ct=li({},q,{params:w(yt)}),dt.params=w(dt.params)}const Et=e.resolve(ct,dt),Nt=q.hash||"";Et.params=b(S(Et.params));const G=X4(i,li({},q,{hash:G4(Nt),path:Et.path})),tt=o.createHref(G);return li({fullPath:G,hash:Nt,query:i===B0?E5(q.query):q.query||{}},Et,{redirectedFrom:void 0,href:tt})}function Z(q){return typeof q=="string"?If(n,q,p.value.path):li({},q)}function Y(q,dt){if(v!==q)return qu(8,{from:dt,to:q})}function kt(q){return xt(q)}function At(q){return kt(li(Z(q),{replace:!0}))}function Dt(q){const dt=q.matched[q.matched.length-1];if(dt&&dt.redirect){const{redirect:ct}=dt;let Et=typeof ct=="function"?ct(q):ct;return typeof Et=="string"&&(Et=Et.includes("?")||Et.includes("#")?Et=Z(Et):{path:Et},Et.params={}),li({query:q.query,hash:q.hash,params:Et.path!=null?{}:q.params},Et)}}function xt(q,dt){const ct=v=N(q),Et=p.value,Nt=q.state,G=q.force,tt=q.replace===!0,yt=Dt(ct);if(yt)return xt(li(Z(yt),{state:typeof yt=="object"?li({},Nt,yt.state):Nt,force:G,replace:tt}),dt||ct);const vt=ct;vt.redirectedFrom=dt;let J;return!G&&Q4(i,Et,ct)&&(J=qu(16,{to:vt,from:Et}),ht(Et,Et,!0,!1)),(J?Promise.resolve(J):zt(vt,Et)).catch(qt=>Ga(qt)?Ga(qt,2)?qt:ft(qt):z(qt,vt,Et)).then(qt=>{if(qt){if(Ga(qt,2))return xt(li({replace:tt},Z(qt.to),{state:typeof qt.to=="object"?li({},Nt,qt.to.state):Nt,force:G}),dt||vt)}else qt=W(vt,Et,!0,tt,Nt);return X(vt,Et,qt),qt})}function gt(q,dt){const ct=Y(q,dt);return ct?Promise.reject(ct):Promise.resolve()}function _t(q){const dt=rt.values().next().value;return dt&&typeof dt.runWithContext=="function"?dt.runWithContext(q):q()}function zt(q,dt){let ct;const[Et,Nt,G]=R5(q,dt);ct=Ff(Et.reverse(),"beforeRouteLeave",q,dt);for(const yt of Et)yt.leaveGuards.forEach(vt=>{ct.push(Pl(vt,q,dt))});const tt=gt.bind(null,q,dt);return ct.push(tt),D(ct).then(()=>{ct=[];for(const yt of a.list())ct.push(Pl(yt,q,dt));return ct.push(tt),D(ct)}).then(()=>{ct=Ff(Nt,"beforeRouteUpdate",q,dt);for(const yt of Nt)yt.updateGuards.forEach(vt=>{ct.push(Pl(vt,q,dt))});return ct.push(tt),D(ct)}).then(()=>{ct=[];for(const yt of G)if(yt.beforeEnter)if(Xo(yt.beforeEnter))for(const vt of yt.beforeEnter)ct.push(Pl(vt,q,dt));else ct.push(Pl(yt.beforeEnter,q,dt));return ct.push(tt),D(ct)}).then(()=>(q.matched.forEach(yt=>yt.enterCallbacks={}),ct=Ff(G,"beforeRouteEnter",q,dt,_t),ct.push(tt),D(ct))).then(()=>{ct=[];for(const yt of l.list())ct.push(Pl(yt,q,dt));return ct.push(tt),D(ct)}).catch(yt=>Ga(yt,8)?yt:Promise.reject(yt))}function X(q,dt,ct){f.list().forEach(Et=>_t(()=>Et(q,dt,ct)))}function W(q,dt,ct,Et,Nt){const G=Y(q,dt);if(G)return G;const tt=dt===yl,yt=Pu?history.state:{};ct&&(Et||tt?o.replace(q.fullPath,li({scroll:tt&&yt&&yt.scroll},Nt)):o.push(q.fullPath,Nt)),p.value=q,ht(q,dt,ct,tt),ft()}let St;function Mt(){St||(St=o.listen((q,dt,ct)=>{if(!$.listening)return;const Et=N(q),Nt=Dt(Et);if(Nt){xt(li(Nt,{replace:!0,force:!0}),Et).catch(vc);return}v=Et;const G=p.value;Pu&&a5(x0(G.fullPath,ct.delta),of()),zt(Et,G).catch(tt=>Ga(tt,12)?tt:Ga(tt,2)?(xt(li(Z(tt.to),{force:!0}),Et).then(yt=>{Ga(yt,20)&&!ct.delta&&ct.type===Mc.pop&&o.go(-1,!1)}).catch(vc),Promise.reject()):(ct.delta&&o.go(-ct.delta,!1),z(tt,Et,G))).then(tt=>{tt=tt||W(Et,G,!1),tt&&(ct.delta&&!Ga(tt,8)?o.go(-ct.delta,!1):ct.type===Mc.pop&&Ga(tt,20)&&o.go(-1,!1)),X(Et,G,tt)}).catch(vc)}))}let A=nc(),H=nc(),V;function z(q,dt,ct){ft(q);const Et=H.list();return Et.length?Et.forEach(Nt=>Nt(q,dt,ct)):console.error(q),Promise.reject(q)}function mt(){return V&&p.value!==yl?Promise.resolve():new Promise((q,dt)=>{A.add([q,dt])})}function ft(q){return V||(V=!q,Mt(),A.list().forEach(([dt,ct])=>q?ct(q):dt()),A.reset()),q}function ht(q,dt,ct,Et){const{scrollBehavior:Nt}=t;if(!Pu||!Nt)return Promise.resolve();const G=!ct&&l5(x0(q.fullPath,0))||(Et||!ct)&&history.state&&history.state.scroll||null;return Ni().then(()=>Nt(q,dt,G)).then(tt=>tt&&o5(tt)).catch(tt=>z(tt,q,dt))}const I=q=>o.go(q);let it;const rt=new Set,$={currentRoute:p,listening:!0,addRoute:x,removeRoute:j,clearRoutes:e.clearRoutes,hasRoute:U,getRoutes:R,resolve:N,options:t,push:kt,replace:At,go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:a.add,beforeResolve:l.add,afterEach:f.add,onError:H.add,isReady:mt,install(q){const dt=this;q.component("RouterLink",ku),q.component("RouterView",P1),q.config.globalProperties.$router=dt,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>Rn(p)}),Pu&&!it&&p.value===yl&&(it=!0,kt(o.location).catch(Nt=>{}));const ct={};for(const Nt in yl)Object.defineProperty(ct,Nt,{get:()=>p.value[Nt],enumerable:!0});q.provide(af,dt),q.provide(rp,Wg(ct)),q.provide(vd,p);const Et=q.unmount;rt.add(q),q.unmount=function(){rt.delete(q),rt.size<1&&(v=yl,St&&St(),St=null,p.value=yl,it=!1,V=!1),Et()}}};function D(q){return q.reduce((dt,ct)=>dt.then(()=>_t(ct)),Promise.resolve())}return $}function R5(t,e){const n=[],i=[],o=[],a=Math.max(e.matched.length,t.matched.length);for(let l=0;l<a;l++){const f=e.matched[l];f&&(t.matched.find(v=>Uu(v,f))?i.push(f):n.push(f));const p=t.matched[l];p&&(e.matched.find(v=>Uu(v,p))||o.push(p))}return[n,i,o]}function jc(){return Mo(af)}function $S(t){return Mo(rp)}var Eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function I5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var S1=I5,F5=typeof Eo=="object"&&Eo&&Eo.Object===Object&&Eo,j5=F5,z5=j5,U5=typeof self=="object"&&self&&self.Object===Object&&self,q5=z5||U5||Function("return this")(),E1=q5,$5=E1,V5=function(){return $5.Date.now()},H5=V5,G5=/\s/;function W5(t){for(var e=t.length;e--&&G5.test(t.charAt(e)););return e}var Z5=W5,K5=Z5,Y5=/^\s+/;function J5(t){return t&&t.slice(0,K5(t)+1).replace(Y5,"")}var X5=J5,Q5=E1,tb=Q5.Symbol,A1=tb,I0=A1,M1=Object.prototype,eb=M1.hasOwnProperty,nb=M1.toString,ic=I0?I0.toStringTag:void 0;function ib(t){var e=eb.call(t,ic),n=t[ic];try{t[ic]=void 0;var i=!0}catch{}var o=nb.call(t);return i&&(e?t[ic]=n:delete t[ic]),o}var rb=ib,sb=Object.prototype,ob=sb.toString;function ab(t){return ob.call(t)}var lb=ab,F0=A1,ub=rb,cb=lb,hb="[object Null]",fb="[object Undefined]",j0=F0?F0.toStringTag:void 0;function db(t){return t==null?t===void 0?fb:hb:j0&&j0 in Object(t)?ub(t):cb(t)}var pb=db;function gb(t){return t!=null&&typeof t=="object"}var mb=gb,vb=pb,yb=mb,_b="[object Symbol]";function bb(t){return typeof t=="symbol"||yb(t)&&vb(t)==_b}var wb=bb,xb=X5,z0=S1,Lb=wb,U0=NaN,Cb=/^[-+]0x[0-9a-f]+$/i,Pb=/^0b[01]+$/i,kb=/^0o[0-7]+$/i,Sb=parseInt;function Eb(t){if(typeof t=="number")return t;if(Lb(t))return U0;if(z0(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=z0(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=xb(t);var n=Pb.test(t);return n||kb.test(t)?Sb(t.slice(2),n?2:8):Cb.test(t)?U0:+t}var Ab=Eb,Mb=S1,jf=H5,q0=Ab,Bb="Expected a function",Tb=Math.max,Db=Math.min;function Nb(t,e,n){var i,o,a,l,f,p,v=0,b=!1,w=!1,S=!0;if(typeof t!="function")throw new TypeError(Bb);e=q0(e)||0,Mb(n)&&(b=!!n.leading,w="maxWait"in n,a=w?Tb(q0(n.maxWait)||0,e):a,S="trailing"in n?!!n.trailing:S);function x(Dt){var xt=i,gt=o;return i=o=void 0,v=Dt,l=t.apply(gt,xt),l}function j(Dt){return v=Dt,f=setTimeout(N,e),b?x(Dt):l}function R(Dt){var xt=Dt-p,gt=Dt-v,_t=e-xt;return w?Db(_t,a-gt):_t}function U(Dt){var xt=Dt-p,gt=Dt-v;return p===void 0||xt>=e||xt<0||w&&gt>=a}function N(){var Dt=jf();if(U(Dt))return Z(Dt);f=setTimeout(N,R(Dt))}function Z(Dt){return f=void 0,S&&i?x(Dt):(i=o=void 0,l)}function Y(){f!==void 0&&clearTimeout(f),v=0,i=p=o=f=void 0}function kt(){return f===void 0?l:Z(jf())}function At(){var Dt=jf(),xt=U(Dt);if(i=arguments,o=this,p=Dt,xt){if(f===void 0)return j(p);if(w)return clearTimeout(f),f=setTimeout(N,e),x(p)}return f===void 0&&(f=setTimeout(N,e)),l}return At.cancel=Y,At.flush=kt,At}var Ob=Nb;const Rb=k1(Ob),Ib={class:"relative w-full"},Fb={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},jb=["onClick"],$0=Ls({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Fe(""),i=Fe([]),o=e,a=Rb(async p=>{if(p.length<3){i.value=[];return}try{const b=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(p)}`)).json();i.value=b}catch(v){console.error("Erreur lors de la recherche d'adresse:",v),i.value=[]}},300);function l(){a(n.value)}function f(p){n.value=p.display_name,i.value=[],o("select-location",{lat:parseFloat(p.lat),lng:parseFloat(p.lon)})}return(p,v)=>(se(),ce("div",Ib,[gn(M("input",{"onUpdate:modelValue":v[0]||(v[0]=b=>n.value=b),onInput:l,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Hn,n.value]]),i.value.length>0?(se(),ce("div",Fb,[(se(!0),ce(_n,null,Gn(i.value,b=>(se(),ce("div",{key:b.place_id,onClick:w=>f(b),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Pe(b.display_name),9,jb))),128))])):nn("",!0)]))}}),zb={class:"h-screen flex flex-col"},Ub={key:0,class:"bg-white shadow-sm z-[2000]"},qb={class:"mx-auto px-4 sm:px-6 lg:px-8"},$b={class:"flex h-16 items-center justify-between"},Vb={class:"flex items-center space-x-8"},Hb={class:"hidden md:flex space-x-6"},Gb={key:0,class:"hidden md:block flex-1 mx-8"},Wb={key:1,class:"flex-1"},Zb={class:"flex items-center space-x-2 md:space-x-4"},Kb={class:"flex md:hidden"},Yb={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Jb={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Xb={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},Qb={class:"relative"},t3={class:"hidden md:flex flex-col items-end"},e3={class:"text-sm font-medium text-gray-700"},n3={key:0,class:"text-xs text-gray-500"},i3=["src","alt"],r3={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},s3={class:"md:hidden px-4 py-2 border-b border-gray-100"},o3={class:"text-sm font-medium text-gray-700"},a3={class:"text-xs text-gray-500"},l3={key:0,class:"md:hidden"},u3={class:"space-y-1 px-2 pb-3 pt-2"},c3={key:0,class:"px-4 py-3"},h3={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},f3=Ls({__name:"App",setup(t){const e=jc(),n=xs(),i=Fe(!1),o=Fe(!1),a=Fe(!1);function l(){a.value=window.innerWidth<768}Ea(()=>{l(),window.addEventListener("resize",l)}),Gh(()=>{window.removeEventListener("resize",l)});const f=zn(()=>{const Z=n.user;if(!Z)return"";const Y=`${Z.first_name} ${Z.last_name.toUpperCase()}`;return Z.company_name?`${Y} (${Z.company_name})`:Y}),p=zn(()=>{var Y;switch((Y=n.user)==null?void 0:Y.user_type){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),v=zn(()=>{var Z;return((Z=n.user)==null?void 0:Z.user_type)==="admin"}),b=Fe(""),w=zn(()=>n.isAuthenticated),S=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],x=zn(()=>{var Y;if(!w.value)return[];const Z=[...S];return v.value?Z.push({name:"Utilisateurs",to:"/users"}):((Y=n.user)==null?void 0:Y.user_type)==="dealer"&&Z.push({name:"Clients",to:"/clients"}),Z}),j=zn(()=>w.value?[{name:"Mon profil",to:"/profile"}]:[]);async function R(){try{await n.logout(),e.push("/login")}catch(Z){console.error("Erreur lors de la déconnexion:",Z)}}function U(Z){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:Z.lat,lng:Z.lng,zoom:16}}))}Ea(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(Z){console.error("Auth check error:",Z),e.push("/login")}});const N=zn(()=>{const Z="IrrigationDesign";if(!w.value)return`${Z} - Connexion`;const Y=e.currentRoute.value,At={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[Y.name]||"";return At?`${Z} - ${At}`:Z});return Rr(N,Z=>{document.title=Z},{immediate:!0}),(Z,Y)=>(se(),ce("div",zb,[w.value?(se(),ce("header",Ub,[M("nav",qb,[M("div",$b,[M("div",Vb,[Mi(Rn(ku),{to:"/",class:"text-xl font-semibold text-primary-600 truncate"},{default:Ja(()=>Y[4]||(Y[4]=[M("span",{class:"md:inline hidden"},"IrrigationDesign",-1),M("span",{class:"md:hidden inline"},"ID",-1)])),_:1}),M("div",Hb,[(se(!0),ce(_n,null,Gn(x.value,kt=>(se(),tl(Rn(ku),{key:kt.name,to:kt.to,class:Oi(["text-sm font-medium transition-colors duration-200",[Z.$route.path===kt.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Ja(()=>[Zi(Pe(kt.name),1)]),_:2},1032,["to","class"]))),128))])]),Z.$route.path==="/"?(se(),ce("div",Gb,[Mi($0,{onSelectLocation:U})])):(se(),ce("div",Wb)),M("div",Zb,[M("div",Kb,[M("button",{onClick:Y[0]||(Y[0]=kt=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[Y[5]||(Y[5]=M("span",{class:"sr-only"},"Ouvrir le menu",-1)),(se(),ce("svg",Yb,[o.value?(se(),ce("path",Xb)):(se(),ce("path",Jb))]))])]),Y[6]||(Y[6]=M("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[M("span",{class:"sr-only"},"Voir les notifications"),M("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),M("div",Qb,[M("button",{onClick:Y[1]||(Y[1]=kt=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[M("div",t3,[M("span",e3,Pe(f.value),1),p.value?(se(),ce("span",n3,Pe(p.value),1)):nn("",!0)]),M("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:b.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(f.value),alt:f.value},null,8,i3)]),i.value?(se(),ce("div",r3,[M("div",s3,[M("div",o3,Pe(f.value),1),M("div",a3,Pe(p.value),1)]),(se(!0),ce(_n,null,Gn(j.value,kt=>(se(),tl(Rn(ku),{key:kt.name,to:kt.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:Y[2]||(Y[2]=At=>i.value=!1)},{default:Ja(()=>[Zi(Pe(kt.name),1)]),_:2},1032,["to"]))),128)),M("button",{onClick:R,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):nn("",!0)])])]),o.value?(se(),ce("div",l3,[M("div",u3,[(se(!0),ce(_n,null,Gn(x.value,kt=>(se(),tl(Rn(ku),{key:kt.name,to:kt.to,class:Oi(["block px-3 py-2 rounded-md text-base font-medium",[Z.$route.path===kt.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:Y[3]||(Y[3]=At=>o.value=!1)},{default:Ja(()=>[Zi(Pe(kt.name),1)]),_:2},1032,["to","class"]))),128))]),Z.$route.path==="/"?(se(),ce("div",c3,[Mi($0,{onSelectLocation:U})])):nn("",!0)])):nn("",!0)])])):nn("",!0),M("main",{class:Oi([Z.$route.path==="/"?"overflow-hidden":"overflow-auto","flex-1 flex flex-col"])},[a.value&&Z.$route.path==="/"?(se(),ce("div",h3,[Y[8]||(Y[8]=M("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),Y[9]||(Y[9]=M("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommandée ",-1)),Y[10]||(Y[10]=M("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure expérience de conception d'irrigation, nous vous recommandons d'utiliser un écran plus large ou un ordinateur. ",-1)),Mi(Rn(ku),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Ja(()=>Y[7]||(Y[7]=[Zi(" Voir mes plans ")])),_:1})])):(se(),tl(Rn(P1),{key:1}))],2)]))}}),d3="modulepreload",p3=function(t){return"/static/frontend/"+t},V0={},Ql=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),f=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(n.map(p=>{if(p=p3(p),p in V0)return;V0[p]=!0;const v=p.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":d3,v||(w.as="script"),w.crossOrigin="",w.href=p,f&&w.setAttribute("nonce",f),document.head.appendChild(w),v)return new Promise((S,x)=>{w.addEventListener("load",S),w.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=l,window.dispatchEvent(f),!f.defaultPrevented)throw l}return o.then(l=>{for(const f of l||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})},g3={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},m3={class:"max-w-md w-full space-y-8"},v3={class:"space-y-4"},y3={class:"mt-1"},_3={class:"mt-1"},b3={class:"mt-1"},w3={key:0,class:"rounded-md bg-red-50 p-4"},x3={class:"flex"},L3={class:"ml-3"},C3={class:"text-sm font-medium text-red-800"},P3={key:1,class:"rounded-md bg-yellow-50 p-4"},k3={class:"flex"},S3={class:"ml-3"},E3={class:"mt-2 text-sm text-yellow-700"},A3={class:"list-disc pl-5 space-y-1"},M3=["disabled"],B3={class:"absolute left-0 inset-y-0 flex items-center pl-3"},T3={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},D3={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},N3=Ls({__name:"ChangePasswordForm",setup(t){const e=jc(),n=xs(),i=el({oldPassword:"",newPassword:"",confirmPassword:""}),o=Fe(!1),a=Fe("");Ea(()=>{var v,b;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(v=n.user)==null?void 0:v.id,mustChangePassword:(b=n.user)==null?void 0:b.must_change_password})});const l=zn(()=>{const v=[];return i.newPassword&&i.newPassword.length<8&&v.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),i.newPassword&&i.confirmPassword&&i.newPassword!==i.confirmPassword&&v.push("Les mots de passe ne correspondent pas"),v}),f=zn(()=>i.oldPassword.length>0&&i.newPassword.length>=8&&i.newPassword===i.confirmPassword);async function p(){var v,b,w,S,x,j,R,U;if(!f.value){a.value="Veuillez corriger les erreurs avant de continuer";return}if(!((v=n.user)!=null&&v.id)){a.value="Erreur : utilisateur non identifié";return}o.value=!0,a.value="";try{console.log("Submitting password change..."),await n.changePassword(i.oldPassword,i.newPassword),console.log("Password changed successfully"),e.push("/")}catch(N){console.error("Password change failed:",N),(w=(b=N.response)==null?void 0:b.data)!=null&&w.detail?a.value=N.response.data.detail:(x=(S=N.response)==null?void 0:S.data)!=null&&x.old_password?a.value=N.response.data.old_password[0]:(R=(j=N.response)==null?void 0:j.data)!=null&&R.password?a.value=N.response.data.password[0]:((U=N.response)==null?void 0:U.status)===401?(a.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):a.value="Une erreur est survenue lors du changement de mot de passe"}finally{o.value=!1}}return(v,b)=>(se(),ce("div",g3,[M("div",m3,[b[12]||(b[12]=M("div",null,[M("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),M("form",{class:"mt-8 space-y-6",onSubmit:Jh(p,["prevent"])},[M("div",v3,[M("div",null,[b[3]||(b[3]=M("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),M("div",y3,[gn(M("input",{id:"old-password","onUpdate:modelValue":b[0]||(b[0]=w=>i.oldPassword=w),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Hn,i.oldPassword]])])]),M("div",null,[b[4]||(b[4]=M("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),M("div",_3,[gn(M("input",{id:"new-password","onUpdate:modelValue":b[1]||(b[1]=w=>i.newPassword=w),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Hn,i.newPassword]])]),b[5]||(b[5]=M("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),M("div",null,[b[6]||(b[6]=M("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),M("div",b3,[gn(M("input",{id:"confirm-password","onUpdate:modelValue":b[2]||(b[2]=w=>i.confirmPassword=w),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Hn,i.confirmPassword]])])])]),a.value?(se(),ce("div",w3,[M("div",x3,[b[7]||(b[7]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",L3,[M("h3",C3,Pe(a.value),1)])])])):nn("",!0),l.value.length>0?(se(),ce("div",P3,[M("div",k3,[b[9]||(b[9]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),M("div",S3,[b[8]||(b[8]=M("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),M("div",E3,[M("ul",A3,[(se(!0),ce(_n,null,Gn(l.value,(w,S)=>(se(),ce("li",{key:S},Pe(w),1))),128))])])])])])):nn("",!0),M("div",null,[M("button",{type:"submit",disabled:o.value||!f.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[M("span",B3,[o.value?(se(),ce("svg",D3,b[11]||(b[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(se(),ce("svg",T3,b[10]||(b[10]=[M("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Zi(" "+Pe(o.value?"Modification en cours...":"Changer le mot de passe"),1)],8,M3)])],32)])]))}}),O3="/static/frontend/assets/logo.svg",R3={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},I3={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},F3={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},j3={key:0,class:"rounded-md bg-red-50 p-4"},z3={class:"flex"},U3={class:"ml-3"},q3={class:"text-sm font-medium text-red-800"},$3={class:"mt-1"},V3={class:"mt-1 relative"},H3=["type"],G3={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},W3={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Z3={class:"flex items-center justify-between"},K3={class:"flex items-center"},Y3={class:"text-sm"},J3=["disabled"],X3={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Q3=Ls({__name:"LoginView",setup(t){const e=jc(),n=xs(),i=Fe(!1),o=Fe(null),a=Fe(!1),l=el({username:"",password:"",rememberMe:!1});Ea(()=>{var p;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(p=window.INITIAL_STATE)!=null&&p.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),e.push("/"))});async function f(){var p,v,b,w,S,x;i.value=!0,o.value=null;try{if(!l.username||!l.password){o.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(p=n.user)!=null&&p.must_change_password?e.push("/change-password"):e.push("/")}catch(j){console.error("Login error:",j),o.value=((b=(v=j==null?void 0:j.response)==null?void 0:v.data)==null?void 0:b.detail)||((x=(S=(w=j==null?void 0:j.response)==null?void 0:w.data)==null?void 0:S.non_field_errors)==null?void 0:x[0])||(j==null?void 0:j.message)||"Erreur lors de la connexion"}finally{i.value=!1}}return(p,v)=>{const b=ky("router-link");return se(),ce("div",R3,[v[12]||(v[12]=M("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[M("img",{src:O3,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),M("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),M("div",I3,[M("div",F3,[M("form",{class:"space-y-6",onSubmit:Jh(f,["prevent"])},[o.value?(se(),ce("div",j3,[M("div",z3,[v[4]||(v[4]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",U3,[M("h3",q3,Pe(o.value),1)])])])):nn("",!0),M("div",null,[v[5]||(v[5]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),M("div",$3,[gn(M("input",{id:"username","onUpdate:modelValue":v[0]||(v[0]=w=>l.username=w),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Hn,l.username]])])]),M("div",null,[v[8]||(v[8]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),M("div",V3,[gn(M("input",{id:"password","onUpdate:modelValue":v[1]||(v[1]=w=>l.password=w),type:a.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,H3),[[V_,l.password]]),M("button",{type:"button",onClick:v[2]||(v[2]=w=>a.value=!a.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[a.value?(se(),ce("svg",G3,v[6]||(v[6]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(se(),ce("svg",W3,v[7]||(v[7]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),M("div",Z3,[M("div",K3,[gn(M("input",{id:"remember-me","onUpdate:modelValue":v[3]||(v[3]=w=>l.rememberMe=w),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Om,l.rememberMe]]),v[9]||(v[9]=M("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),M("div",Y3,[Mi(b,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Ja(()=>v[10]||(v[10]=[Zi(" Mot de passe oublié ? ")])),_:1})])]),M("div",null,[M("button",{type:"submit",disabled:i.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[i.value?(se(),ce("svg",X3,v[11]||(v[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),Zi(" "+Pe(i.value?"Connexion en cours...":"Se connecter"),1)],8,J3)])],32)])])])}}}),H0="/static/frontend/assets/logo.jpeg";var yd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Eo,function(n){var i="1.9.4";function o(r){var c,m,k,F;for(m=1,k=arguments.length;m<k;m++){F=arguments[m];for(c in F)r[c]=F[c]}return r}var a=Object.create||function(){function r(){}return function(c){return r.prototype=c,new r}}();function l(r,c){var m=Array.prototype.slice;if(r.bind)return r.bind.apply(r,m.call(arguments,1));var k=m.call(arguments,2);return function(){return r.apply(c,k.length?k.concat(m.call(arguments)):arguments)}}var f=0;function p(r){return"_leaflet_id"in r||(r._leaflet_id=++f),r._leaflet_id}function v(r,c,m){var k,F,lt,$t;return $t=function(){k=!1,F&&(lt.apply(m,F),F=!1)},lt=function(){k?F=arguments:(r.apply(m,arguments),setTimeout($t,c),k=!0)},lt}function b(r,c,m){var k=c[1],F=c[0],lt=k-F;return r===k&&m?r:((r-F)%lt+lt)%lt+F}function w(){return!1}function S(r,c){if(c===!1)return r;var m=Math.pow(10,c===void 0?6:c);return Math.round(r*m)/m}function x(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function j(r){return x(r).split(/\s+/)}function R(r,c){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var m in c)r.options[m]=c[m];return r.options}function U(r,c,m){var k=[];for(var F in r)k.push(encodeURIComponent(m?F.toUpperCase():F)+"="+encodeURIComponent(r[F]));return(!c||c.indexOf("?")===-1?"?":"&")+k.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function Z(r,c){return r.replace(N,function(m,k){var F=c[k];if(F===void 0)throw new Error("No value provided for variable "+m);return typeof F=="function"&&(F=F(c)),F})}var Y=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function kt(r,c){for(var m=0;m<r.length;m++)if(r[m]===c)return m;return-1}var At="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Dt(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var xt=0;function gt(r){var c=+new Date,m=Math.max(0,16-(c-xt));return xt=c+m,window.setTimeout(r,m)}var _t=window.requestAnimationFrame||Dt("RequestAnimationFrame")||gt,zt=window.cancelAnimationFrame||Dt("CancelAnimationFrame")||Dt("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function X(r,c,m){if(m&&_t===gt)r.call(c);else return _t.call(window,l(r,c))}function W(r){r&&zt.call(window,r)}var St={__proto__:null,extend:o,create:a,bind:l,get lastId(){return f},stamp:p,throttle:v,wrapNum:b,falseFn:w,formatNum:S,trim:x,splitWords:j,setOptions:R,getParamString:U,template:Z,isArray:Y,indexOf:kt,emptyImageUrl:At,requestFn:_t,cancelFn:zt,requestAnimFrame:X,cancelAnimFrame:W};function Mt(){}Mt.extend=function(r){var c=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=c.__super__=this.prototype,k=a(m);k.constructor=c,c.prototype=k;for(var F in this)Object.prototype.hasOwnProperty.call(this,F)&&F!=="prototype"&&F!=="__super__"&&(c[F]=this[F]);return r.statics&&o(c,r.statics),r.includes&&(A(r.includes),o.apply(null,[k].concat(r.includes))),o(k,r),delete k.statics,delete k.includes,k.options&&(k.options=m.options?a(m.options):{},o(k.options,r.options)),k._initHooks=[],k.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var lt=0,$t=k._initHooks.length;lt<$t;lt++)k._initHooks[lt].call(this)}},c},Mt.include=function(r){var c=this.prototype.options;return o(this.prototype,r),r.options&&(this.prototype.options=c,this.mergeOptions(r.options)),this},Mt.mergeOptions=function(r){return o(this.prototype.options,r),this},Mt.addInitHook=function(r){var c=Array.prototype.slice.call(arguments,1),m=typeof r=="function"?r:function(){this[r].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function A(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=Y(r)?r:[r];for(var c=0;c<r.length;c++)r[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(r,c,m){if(typeof r=="object")for(var k in r)this._on(k,r[k],c);else{r=j(r);for(var F=0,lt=r.length;F<lt;F++)this._on(r[F],c,m)}return this},off:function(r,c,m){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var k in r)this._off(k,r[k],c);else{r=j(r);for(var F=arguments.length===1,lt=0,$t=r.length;lt<$t;lt++)F?this._off(r[lt]):this._off(r[lt],c,m)}return this},_on:function(r,c,m,k){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(r,c,m)===!1){m===this&&(m=void 0);var F={fn:c,ctx:m};k&&(F.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(F)}},_off:function(r,c,m){var k,F,lt;if(this._events&&(k=this._events[r],!!k)){if(arguments.length===1){if(this._firingCount)for(F=0,lt=k.length;F<lt;F++)k[F].fn=w;delete this._events[r];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var $t=this._listens(r,c,m);if($t!==!1){var de=k[$t];this._firingCount&&(de.fn=w,this._events[r]=k=k.slice()),k.splice($t,1)}}},fire:function(r,c,m){if(!this.listens(r,m))return this;var k=o({},c,{type:r,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var F=this._events[r];if(F){this._firingCount=this._firingCount+1||1;for(var lt=0,$t=F.length;lt<$t;lt++){var de=F[lt],be=de.fn;de.once&&this.off(r,be,de.ctx),be.call(de.ctx||this,k)}this._firingCount--}}return m&&this._propagateEvent(k),this},listens:function(r,c,m,k){typeof r!="string"&&console.warn('"string" type argument expected');var F=c;typeof c!="function"&&(k=!!c,F=void 0,m=void 0);var lt=this._events&&this._events[r];if(lt&&lt.length&&this._listens(r,F,m)!==!1)return!0;if(k){for(var $t in this._eventParents)if(this._eventParents[$t].listens(r,c,m,k))return!0}return!1},_listens:function(r,c,m){if(!this._events)return!1;var k=this._events[r]||[];if(!c)return!!k.length;m===this&&(m=void 0);for(var F=0,lt=k.length;F<lt;F++)if(k[F].fn===c&&k[F].ctx===m)return F;return!1},once:function(r,c,m){if(typeof r=="object")for(var k in r)this._on(k,r[k],c,!0);else{r=j(r);for(var F=0,lt=r.length;F<lt;F++)this._on(r[F],c,m,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[p(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[p(r)],this},_propagateEvent:function(r){for(var c in this._eventParents)this._eventParents[c].fire(r.type,o({layer:r.target,propagatedFrom:r.target},r),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var V=Mt.extend(H);function z(r,c,m){this.x=m?Math.round(r):r,this.y=m?Math.round(c):c}var mt=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(r){return this.clone()._add(ft(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(ft(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new z(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new z(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=mt(this.x),this.y=mt(this.y),this},distanceTo:function(r){r=ft(r);var c=r.x-this.x,m=r.y-this.y;return Math.sqrt(c*c+m*m)},equals:function(r){return r=ft(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=ft(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function ft(r,c,m){return r instanceof z?r:Y(r)?new z(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new z(r.x,r.y):new z(r,c,m)}function ht(r,c){if(r)for(var m=c?[r,c]:r,k=0,F=m.length;k<F;k++)this.extend(m[k])}ht.prototype={extend:function(r){var c,m;if(!r)return this;if(r instanceof z||typeof r[0]=="number"||"x"in r)c=m=ft(r);else if(r=I(r),c=r.min,m=r.max,!c||!m)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=m.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(r){return ft((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return ft(this.min.x,this.max.y)},getTopRight:function(){return ft(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var c,m;return typeof r[0]=="number"||r instanceof z?r=ft(r):r=I(r),r instanceof ht?(c=r.min,m=r.max):c=m=r,c.x>=this.min.x&&m.x<=this.max.x&&c.y>=this.min.y&&m.y<=this.max.y},intersects:function(r){r=I(r);var c=this.min,m=this.max,k=r.min,F=r.max,lt=F.x>=c.x&&k.x<=m.x,$t=F.y>=c.y&&k.y<=m.y;return lt&&$t},overlaps:function(r){r=I(r);var c=this.min,m=this.max,k=r.min,F=r.max,lt=F.x>c.x&&k.x<m.x,$t=F.y>c.y&&k.y<m.y;return lt&&$t},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var c=this.min,m=this.max,k=Math.abs(c.x-m.x)*r,F=Math.abs(c.y-m.y)*r;return I(ft(c.x-k,c.y-F),ft(m.x+k,m.y+F))},equals:function(r){return r?(r=I(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function I(r,c){return!r||r instanceof ht?r:new ht(r,c)}function it(r,c){if(r)for(var m=c?[r,c]:r,k=0,F=m.length;k<F;k++)this.extend(m[k])}it.prototype={extend:function(r){var c=this._southWest,m=this._northEast,k,F;if(r instanceof $)k=r,F=r;else if(r instanceof it){if(k=r._southWest,F=r._northEast,!k||!F)return this}else return r?this.extend(D(r)||rt(r)):this;return!c&&!m?(this._southWest=new $(k.lat,k.lng),this._northEast=new $(F.lat,F.lng)):(c.lat=Math.min(k.lat,c.lat),c.lng=Math.min(k.lng,c.lng),m.lat=Math.max(F.lat,m.lat),m.lng=Math.max(F.lng,m.lng)),this},pad:function(r){var c=this._southWest,m=this._northEast,k=Math.abs(c.lat-m.lat)*r,F=Math.abs(c.lng-m.lng)*r;return new it(new $(c.lat-k,c.lng-F),new $(m.lat+k,m.lng+F))},getCenter:function(){return new $((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $(this.getNorth(),this.getWest())},getSouthEast:function(){return new $(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof $||"lat"in r?r=D(r):r=rt(r);var c=this._southWest,m=this._northEast,k,F;return r instanceof it?(k=r.getSouthWest(),F=r.getNorthEast()):k=F=r,k.lat>=c.lat&&F.lat<=m.lat&&k.lng>=c.lng&&F.lng<=m.lng},intersects:function(r){r=rt(r);var c=this._southWest,m=this._northEast,k=r.getSouthWest(),F=r.getNorthEast(),lt=F.lat>=c.lat&&k.lat<=m.lat,$t=F.lng>=c.lng&&k.lng<=m.lng;return lt&&$t},overlaps:function(r){r=rt(r);var c=this._southWest,m=this._northEast,k=r.getSouthWest(),F=r.getNorthEast(),lt=F.lat>c.lat&&k.lat<m.lat,$t=F.lng>c.lng&&k.lng<m.lng;return lt&&$t},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,c){return r?(r=rt(r),this._southWest.equals(r.getSouthWest(),c)&&this._northEast.equals(r.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function rt(r,c){return r instanceof it?r:new it(r,c)}function $(r,c,m){if(isNaN(r)||isNaN(c))throw new Error("Invalid LatLng object: ("+r+", "+c+")");this.lat=+r,this.lng=+c,m!==void 0&&(this.alt=+m)}$.prototype={equals:function(r,c){if(!r)return!1;r=D(r);var m=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return m<=(c===void 0?1e-9:c)},toString:function(r){return"LatLng("+S(this.lat,r)+", "+S(this.lng,r)+")"},distanceTo:function(r){return dt.distance(this,D(r))},wrap:function(){return dt.wrapLatLng(this)},toBounds:function(r){var c=180*r/40075017,m=c/Math.cos(Math.PI/180*this.lat);return rt([this.lat-c,this.lng-m],[this.lat+c,this.lng+m])},clone:function(){return new $(this.lat,this.lng,this.alt)}};function D(r,c,m){return r instanceof $?r:Y(r)&&typeof r[0]!="object"?r.length===3?new $(r[0],r[1],r[2]):r.length===2?new $(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new $(r.lat,"lng"in r?r.lng:r.lon,r.alt):c===void 0?null:new $(r,c,m)}var q={latLngToPoint:function(r,c){var m=this.projection.project(r),k=this.scale(c);return this.transformation._transform(m,k)},pointToLatLng:function(r,c){var m=this.scale(c),k=this.transformation.untransform(r,m);return this.projection.unproject(k)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var c=this.projection.bounds,m=this.scale(r),k=this.transformation.transform(c.min,m),F=this.transformation.transform(c.max,m);return new ht(k,F)},infinite:!1,wrapLatLng:function(r){var c=this.wrapLng?b(r.lng,this.wrapLng,!0):r.lng,m=this.wrapLat?b(r.lat,this.wrapLat,!0):r.lat,k=r.alt;return new $(m,c,k)},wrapLatLngBounds:function(r){var c=r.getCenter(),m=this.wrapLatLng(c),k=c.lat-m.lat,F=c.lng-m.lng;if(k===0&&F===0)return r;var lt=r.getSouthWest(),$t=r.getNorthEast(),de=new $(lt.lat-k,lt.lng-F),be=new $($t.lat-k,$t.lng-F);return new it(de,be)}},dt=o({},q,{wrapLng:[-180,180],R:6371e3,distance:function(r,c){var m=Math.PI/180,k=r.lat*m,F=c.lat*m,lt=Math.sin((c.lat-r.lat)*m/2),$t=Math.sin((c.lng-r.lng)*m/2),de=lt*lt+Math.cos(k)*Math.cos(F)*$t*$t,be=2*Math.atan2(Math.sqrt(de),Math.sqrt(1-de));return this.R*be}}),ct=6378137,Et={R:ct,MAX_LATITUDE:85.0511287798,project:function(r){var c=Math.PI/180,m=this.MAX_LATITUDE,k=Math.max(Math.min(m,r.lat),-m),F=Math.sin(k*c);return new z(this.R*r.lng*c,this.R*Math.log((1+F)/(1-F))/2)},unproject:function(r){var c=180/Math.PI;return new $((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*c,r.x*c/this.R)},bounds:function(){var r=ct*Math.PI;return new ht([-r,-r],[r,r])}()};function Nt(r,c,m,k){if(Y(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=c,this._c=m,this._d=k}Nt.prototype={transform:function(r,c){return this._transform(r.clone(),c)},_transform:function(r,c){return c=c||1,r.x=c*(this._a*r.x+this._b),r.y=c*(this._c*r.y+this._d),r},untransform:function(r,c){return c=c||1,new z((r.x/c-this._b)/this._a,(r.y/c-this._d)/this._c)}};function G(r,c,m,k){return new Nt(r,c,m,k)}var tt=o({},dt,{code:"EPSG:3857",projection:Et,transformation:function(){var r=.5/(Math.PI*Et.R);return G(r,.5,-r,.5)}()}),yt=o({},tt,{code:"EPSG:900913"});function vt(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function J(r,c){var m="",k,F,lt,$t,de,be;for(k=0,lt=r.length;k<lt;k++){for(de=r[k],F=0,$t=de.length;F<$t;F++)be=de[F],m+=(F?"L":"M")+be.x+" "+be.y;m+=c?qe.svg?"z":"x":""}return m||"M0 0"}var qt=document.documentElement.style,te="ActiveXObject"in window,Vt=te&&!document.addEventListener,ee="msLaunchUri"in navigator&&!("documentMode"in document),Rt=Vn("webkit"),Ot=Vn("android"),ie=Vn("android 2")||Vn("android 3"),pe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ke=Ot&&Vn("Google")&&pe<537&&!("AudioNode"in window),Kt=!!window.opera,oe=!ee&&Vn("chrome"),Ve=Vn("gecko")&&!Rt&&!Kt&&!te,Ue=!oe&&Vn("safari"),Ge=Vn("phantom"),Oe="OTransition"in qt,Sn=navigator.platform.indexOf("Win")===0,tn=te&&"transition"in qt,si="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ie,an="MozPerspective"in qt,bn=!window.L_DISABLE_3D&&(tn||si||an)&&!Oe&&!Ge,Un=typeof orientation<"u"||Vn("mobile"),je=Un&&Rt,qi=Un&&si,Mn=!window.PointerEvent&&window.MSPointerEvent,ci=!!(window.PointerEvent||Mn),gi="ontouchstart"in window||!!window.TouchEvent,In=!window.L_NO_TOUCH&&(gi||ci),ln=Un&&Kt,Ke=Un&&Ve,Ze=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qn=function(){var r=!1;try{var c=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,c),window.removeEventListener("testPassiveEventSupport",w,c)}catch{}return r}(),$i=function(){return!!document.createElement("canvas").getContext}(),Re=!!(document.createElementNS&&vt("svg").createSVGRect),Qe=!!Re&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),pi=!Re&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var c=r.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),hi=navigator.platform.indexOf("Mac")===0,Ki=navigator.platform.indexOf("Linux")===0;function Vn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var qe={ie:te,ielt9:Vt,edge:ee,webkit:Rt,android:Ot,android23:ie,androidStock:ke,opera:Kt,chrome:oe,gecko:Ve,safari:Ue,phantom:Ge,opera12:Oe,win:Sn,ie3d:tn,webkit3d:si,gecko3d:an,any3d:bn,mobile:Un,mobileWebkit:je,mobileWebkit3d:qi,msPointer:Mn,pointer:ci,touch:In,touchNative:gi,mobileOpera:ln,mobileGecko:Ke,retina:Ze,passiveEvents:Qn,canvas:$i,svg:Re,vml:pi,inlineSvg:Qe,mac:hi,linux:Ki},Yi=qe.msPointer?"MSPointerDown":"pointerdown",Cs=qe.msPointer?"MSPointerMove":"pointermove",kr=qe.msPointer?"MSPointerUp":"pointerup",mr=qe.msPointer?"MSPointerCancel":"pointercancel",or={touchstart:Yi,touchmove:Cs,touchend:kr,touchcancel:mr},vr={touchstart:na,touchmove:ks,touchend:ks,touchcancel:ks},Vi={},ar=!1;function jr(r,c,m){return c==="touchstart"&&us(),vr[c]?(m=vr[c].bind(this,m),r.addEventListener(or[c],m,!1),m):(console.warn("wrong event specified:",c),w)}function Ps(r,c,m){if(!or[c]){console.warn("wrong event specified:",c);return}r.removeEventListener(or[c],m,!1)}function Gs(r){Vi[r.pointerId]=r}function Ws(r){Vi[r.pointerId]&&(Vi[r.pointerId]=r)}function Vr(r){delete Vi[r.pointerId]}function us(){ar||(document.addEventListener(Yi,Gs,!0),document.addEventListener(Cs,Ws,!0),document.addEventListener(kr,Vr,!0),document.addEventListener(mr,Vr,!0),ar=!0)}function ks(r,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var m in Vi)c.touches.push(Vi[m]);c.changedTouches=[c],r(c)}}function na(r,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Pi(c),ks(r,c)}function ia(r){var c={},m,k;for(k in r)m=r[k],c[k]=m&&m.bind?m.bind(r):m;return r=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Zs=200;function Do(r,c){r.addEventListener("dblclick",c);var m=0,k;function F(lt){if(lt.detail!==1){k=lt.detail;return}if(!(lt.pointerType==="mouse"||lt.sourceCapabilities&&!lt.sourceCapabilities.firesTouchEvents)){var $t=Xs(lt);if(!($t.some(function(be){return be instanceof HTMLLabelElement&&be.attributes.for})&&!$t.some(function(be){return be instanceof HTMLInputElement||be instanceof HTMLSelectElement}))){var de=Date.now();de-m<=Zs?(k++,k===2&&c(ia(lt))):k=1,m=de}}}return r.addEventListener("click",F),{dblclick:c,simDblclick:F}}function ra(r,c){r.removeEventListener("dblclick",c.dblclick),r.removeEventListener("click",c.simDblclick)}var Ss=sa(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Es=sa(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),co=Es==="webkitTransition"||Es==="OTransition"?Es+"End":"transitionend";function No(r){return typeof r=="string"?document.getElementById(r):r}function lr(r,c){var m=r.style[c]||r.currentStyle&&r.currentStyle[c];if((!m||m==="auto")&&document.defaultView){var k=document.defaultView.getComputedStyle(r,null);m=k?k[c]:null}return m==="auto"?null:m}function Dn(r,c,m){var k=document.createElement(r);return k.className=c||"",m&&m.appendChild(k),k}function mn(r){var c=r.parentNode;c&&c.removeChild(r)}function bi(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function oi(r){var c=r.parentNode;c&&c.lastChild!==r&&c.appendChild(r)}function mi(r){var c=r.parentNode;c&&c.firstChild!==r&&c.insertBefore(r,c.firstChild)}function Zn(r,c){if(r.classList!==void 0)return r.classList.contains(c);var m=Ji(r);return m.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(m)}function pn(r,c){if(r.classList!==void 0)for(var m=j(c),k=0,F=m.length;k<F;k++)r.classList.add(m[k]);else if(!Zn(r,c)){var lt=Ji(r);As(r,(lt?lt+" ":"")+c)}}function qn(r,c){r.classList!==void 0?r.classList.remove(c):As(r,x((" "+Ji(r)+" ").replace(" "+c+" "," ")))}function As(r,c){r.className.baseVal===void 0?r.className=c:r.className.baseVal=c}function Ji(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function ur(r,c){"opacity"in r.style?r.style.opacity=c:"filter"in r.style&&il(r,c)}function il(r,c){var m=!1,k="DXImageTransform.Microsoft.Alpha";try{m=r.filters.item(k)}catch{if(c===1)return}c=Math.round(c*100),m?(m.Enabled=c!==100,m.Opacity=c):r.style.filter+=" progid:"+k+"(opacity="+c+")"}function sa(r){for(var c=document.documentElement.style,m=0;m<r.length;m++)if(r[m]in c)return r[m];return!1}function Ms(r,c,m){var k=c||new z(0,0);r.style[Ss]=(qe.ie3d?"translate("+k.x+"px,"+k.y+"px)":"translate3d("+k.x+"px,"+k.y+"px,0)")+(m?" scale("+m+")":"")}function wi(r,c){r._leaflet_pos=c,qe.any3d?Ms(r,c):(r.style.left=c.x+"px",r.style.top=c.y+"px")}function Bs(r){return r._leaflet_pos||new z(0,0)}var Oo,Ks,Ma;if("onselectstart"in document)Oo=function(){Pn(window,"selectstart",Pi)},Ks=function(){Fn(window,"selectstart",Pi)};else{var ho=sa(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Oo=function(){if(ho){var r=document.documentElement.style;Ma=r[ho],r[ho]="none"}},Ks=function(){ho&&(document.documentElement.style[ho]=Ma,Ma=void 0)}}function Ba(){Pn(window,"dragstart",Pi)}function cs(){Fn(window,"dragstart",Pi)}var Ys,fo;function oa(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Ri(),Ys=r,fo=r.style.outlineStyle,r.style.outlineStyle="none",Pn(window,"keydown",Ri))}function Ri(){Ys&&(Ys.style.outlineStyle=fo,Ys=void 0,fo=void 0,Fn(window,"keydown",Ri))}function rl(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function aa(r){var c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}var Ln={__proto__:null,TRANSFORM:Ss,TRANSITION:Es,TRANSITION_END:co,get:No,getStyle:lr,create:Dn,remove:mn,empty:bi,toFront:oi,toBack:mi,hasClass:Zn,addClass:pn,removeClass:qn,setClass:As,getClass:Ji,setOpacity:ur,testProp:sa,setTransform:Ms,setPosition:wi,getPosition:Bs,get disableTextSelection(){return Oo},get enableTextSelection(){return Ks},disableImageDrag:Ba,enableImageDrag:cs,preventOutline:oa,restoreOutline:Ri,getSizedParentNode:rl,getScale:aa};function Pn(r,c,m,k){if(c&&typeof c=="object")for(var F in c)po(r,F,c[F],m);else{c=j(c);for(var lt=0,$t=c.length;lt<$t;lt++)po(r,c[lt],m,k)}return this}var Hr="_leaflet_events";function Fn(r,c,m,k){if(arguments.length===1)Ta(r),delete r[Hr];else if(c&&typeof c=="object")for(var F in c)Gr(r,F,c[F],m);else if(c=j(c),arguments.length===2)Ta(r,function(de){return kt(c,de)!==-1});else for(var lt=0,$t=c.length;lt<$t;lt++)Gr(r,c[lt],m,k);return this}function Ta(r,c){for(var m in r[Hr]){var k=m.split(/\d/)[0];(!c||c(k))&&Gr(r,k,null,null,m)}}var la={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function po(r,c,m,k){var F=c+p(m)+(k?"_"+p(k):"");if(r[Hr]&&r[Hr][F])return this;var lt=function(de){return m.call(k||r,de||window.event)},$t=lt;!qe.touchNative&&qe.pointer&&c.indexOf("touch")===0?lt=jr(r,c,lt):qe.touch&&c==="dblclick"?lt=Do(r,lt):"addEventListener"in r?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?r.addEventListener(la[c]||c,lt,qe.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(lt=function(de){de=de||window.event,go(r,de)&&$t(de)},r.addEventListener(la[c],lt,!1)):r.addEventListener(c,$t,!1):r.attachEvent("on"+c,lt),r[Hr]=r[Hr]||{},r[Hr][F]=lt}function Gr(r,c,m,k,F){F=F||c+p(m)+(k?"_"+p(k):"");var lt=r[Hr]&&r[Hr][F];if(!lt)return this;!qe.touchNative&&qe.pointer&&c.indexOf("touch")===0?Ps(r,c,lt):qe.touch&&c==="dblclick"?ra(r,lt):"removeEventListener"in r?r.removeEventListener(la[c]||c,lt,!1):r.detachEvent("on"+c,lt),r[Hr][F]=null}function Js(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Da(r){return po(r,"wheel",Js),this}function Ro(r){return Pn(r,"mousedown touchstart dblclick contextmenu",Js),r._leaflet_disable_click=!0,this}function Pi(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function zr(r){return Pi(r),Js(r),this}function Xs(r){if(r.composedPath)return r.composedPath();for(var c=[],m=r.target;m;)c.push(m),m=m.parentNode;return c}function sl(r,c){if(!c)return new z(r.clientX,r.clientY);var m=aa(c),k=m.boundingClientRect;return new z((r.clientX-k.left)/m.x-c.clientLeft,(r.clientY-k.top)/m.y-c.clientTop)}var Io=qe.linux&&qe.chrome?window.devicePixelRatio:qe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ua(r){return qe.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Io:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function go(r,c){var m=c.relatedTarget;if(!m)return!0;try{for(;m&&m!==r;)m=m.parentNode}catch{return!1}return m!==r}var Fo={__proto__:null,on:Pn,off:Fn,stopPropagation:Js,disableScrollPropagation:Da,disableClickPropagation:Ro,preventDefault:Pi,stop:zr,getPropagationPath:Xs,getMousePosition:sl,getWheelDelta:ua,isExternalTarget:go,addListener:Pn,removeListener:Fn},Na=V.extend({run:function(r,c,m,k){this.stop(),this._el=r,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(k||.5,.2),this._startPos=Bs(r),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(r){var c=+new Date-this._startTime,m=this._duration*1e3;c<m?this._runFrame(this._easeOut(c/m),r):(this._runFrame(1),this._complete())},_runFrame:function(r,c){var m=this._startPos.add(this._offset.multiplyBy(r));c&&m._round(),wi(this._el,m),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Nn=V.extend({options:{crs:tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,c){c=R(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(D(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Es&&qe.any3d&&!qe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pn(this._proxy,co,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,c,m){if(c=c===void 0?this._zoom:this._limitZoom(c),r=this._limitCenter(D(r),c,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=o({animate:m.animate},m.zoom),m.pan=o({animate:m.animate,duration:m.duration},m.pan));var k=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,c,m.zoom):this._tryAnimatedPan(r,m.pan);if(k)return clearTimeout(this._sizeTimer),this}return this._resetView(r,c,m.pan&&m.pan.noMoveStart),this},setZoom:function(r,c){return this._loaded?this.setView(this.getCenter(),r,{zoom:c}):(this._zoom=r,this)},zoomIn:function(r,c){return r=r||(qe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,c)},zoomOut:function(r,c){return r=r||(qe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,c)},setZoomAround:function(r,c,m){var k=this.getZoomScale(c),F=this.getSize().divideBy(2),lt=r instanceof z?r:this.latLngToContainerPoint(r),$t=lt.subtract(F).multiplyBy(1-1/k),de=this.containerPointToLatLng(F.add($t));return this.setView(de,c,{zoom:m})},_getBoundsCenterZoom:function(r,c){c=c||{},r=r.getBounds?r.getBounds():rt(r);var m=ft(c.paddingTopLeft||c.padding||[0,0]),k=ft(c.paddingBottomRight||c.padding||[0,0]),F=this.getBoundsZoom(r,!1,m.add(k));if(F=typeof c.maxZoom=="number"?Math.min(c.maxZoom,F):F,F===1/0)return{center:r.getCenter(),zoom:F};var lt=k.subtract(m).divideBy(2),$t=this.project(r.getSouthWest(),F),de=this.project(r.getNorthEast(),F),be=this.unproject($t.add(de).divideBy(2).add(lt),F);return{center:be,zoom:F}},fitBounds:function(r,c){if(r=rt(r),!r.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(r,c);return this.setView(m.center,m.zoom,c)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,c){return this.setView(r,this._zoom,{pan:c})},panBy:function(r,c){if(r=ft(r).round(),c=c||{},!r.x&&!r.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Na,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){pn(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,m,c.duration||.25,c.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,c,m){if(m=m||{},m.animate===!1||!qe.any3d)return this.setView(r,c,m);this._stop();var k=this.project(this.getCenter()),F=this.project(r),lt=this.getSize(),$t=this._zoom;r=D(r),c=c===void 0?$t:c;var de=Math.max(lt.x,lt.y),be=de*this.getZoomScale($t,c),Be=F.distanceTo(k)||1,We=1.42,un=We*We;function Bn(ei){var pr=ei?-1:1,Wu=ei?be:de,zs=be*be-de*de+pr*un*un*Be*Be,hu=2*Wu*un*Be,Ho=zs/hu,hl=Math.sqrt(Ho*Ho+1)-Ho,fu=hl<1e-9?-18:Math.log(hl);return fu}function Pr(ei){return(Math.exp(ei)-Math.exp(-ei))/2}function Ui(ei){return(Math.exp(ei)+Math.exp(-ei))/2}function Dr(ei){return Pr(ei)/Ui(ei)}var Li=Bn(0);function js(ei){return de*(Ui(Li)/Ui(Li+We*ei))}function Fl(ei){return de*(Ui(Li)*Dr(Li+We*ei)-Pr(Li))/un}function ps(ei){return 1-Math.pow(1-ei,1.5)}var ts=Date.now(),$r=(Bn(1)-Li)/We,Gu=m.duration?1e3*m.duration:1e3*$r*.8;function jl(){var ei=(Date.now()-ts)/Gu,pr=ps(ei)*$r;ei<=1?(this._flyToFrame=X(jl,this),this._move(this.unproject(k.add(F.subtract(k).multiplyBy(Fl(pr)/Be)),$t),this.getScaleZoom(de/js(pr),$t),{flyTo:!0})):this._move(r,c)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),jl.call(this),this},flyToBounds:function(r,c){var m=this._getBoundsCenterZoom(r,c);return this.flyTo(m.center,m.zoom,c)},setMaxBounds:function(r){return r=rt(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var c=this.options.minZoom;return this.options.minZoom=r,this._loaded&&c!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var c=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&c!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,c){this._enforcingBounds=!0;var m=this.getCenter(),k=this._limitCenter(m,this._zoom,rt(r));return m.equals(k)||this.panTo(k,c),this._enforcingBounds=!1,this},panInside:function(r,c){c=c||{};var m=ft(c.paddingTopLeft||c.padding||[0,0]),k=ft(c.paddingBottomRight||c.padding||[0,0]),F=this.project(this.getCenter()),lt=this.project(r),$t=this.getPixelBounds(),de=I([$t.min.add(m),$t.max.subtract(k)]),be=de.getSize();if(!de.contains(lt)){this._enforcingBounds=!0;var Be=lt.subtract(de.getCenter()),We=de.extend(lt).getSize().subtract(be);F.x+=Be.x<0?-We.x:We.x,F.y+=Be.y<0?-We.y:We.y,this.panTo(this.unproject(F),c),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=o({animate:!1,pan:!0},r===!0?{animate:!0}:r);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),k=c.divideBy(2).round(),F=m.divideBy(2).round(),lt=k.subtract(F);return!lt.x&&!lt.y?this:(r.animate&&r.pan?this.panBy(lt):(r.pan&&this._rawPanBy(lt),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=o({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=l(this._handleGeolocationResponse,this),m=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,m,r):navigator.geolocation.getCurrentPosition(c,m,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var c=r.code,m=r.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var c=r.coords.latitude,m=r.coords.longitude,k=new $(c,m),F=k.toBounds(r.coords.accuracy*2),lt=this._locateOptions;if(lt.setView){var $t=this.getBoundsZoom(F);this.setView(k,lt.maxZoom?Math.min($t,lt.maxZoom):$t)}var de={latlng:k,bounds:F,timestamp:r.timestamp};for(var be in r.coords)typeof r.coords[be]=="number"&&(de[be]=r.coords[be]);this.fire("locationfound",de)}},addHandler:function(r,c){if(!c)return this;var m=this[r]=new c(this);return this._handlers.push(m),this.options[r]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),mn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)mn(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,c){var m="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),k=Dn("div",m,c||this._mapPane);return r&&(this._panes[r]=k),k},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),c=this.unproject(r.getBottomLeft()),m=this.unproject(r.getTopRight());return new it(c,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,c,m){r=rt(r),m=ft(m||[0,0]);var k=this.getZoom()||0,F=this.getMinZoom(),lt=this.getMaxZoom(),$t=r.getNorthWest(),de=r.getSouthEast(),be=this.getSize().subtract(m),Be=I(this.project(de,k),this.project($t,k)).getSize(),We=qe.any3d?this.options.zoomSnap:1,un=be.x/Be.x,Bn=be.y/Be.y,Pr=c?Math.max(un,Bn):Math.min(un,Bn);return k=this.getScaleZoom(Pr,k),We&&(k=Math.round(k/(We/100))*(We/100),k=c?Math.ceil(k/We)*We:Math.floor(k/We)*We),Math.max(F,Math.min(lt,k))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,c){var m=this._getTopLeftPoint(r,c);return new ht(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,c){var m=this.options.crs;return c=c===void 0?this._zoom:c,m.scale(r)/m.scale(c)},getScaleZoom:function(r,c){var m=this.options.crs;c=c===void 0?this._zoom:c;var k=m.zoom(r*m.scale(c));return isNaN(k)?1/0:k},project:function(r,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(D(r),c)},unproject:function(r,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ft(r),c)},layerPointToLatLng:function(r){var c=ft(r).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(r){var c=this.project(D(r))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(D(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(rt(r))},distance:function(r,c){return this.options.crs.distance(D(r),D(c))},containerPointToLayerPoint:function(r){return ft(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return ft(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var c=this.containerPointToLayerPoint(ft(r));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(D(r)))},mouseEventToContainerPoint:function(r){return sl(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var c=this._container=No(r);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Pn(c,"scroll",this._onScroll,this),this._containerId=p(c)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&qe.any3d,pn(r,"leaflet-container"+(qe.touch?" leaflet-touch":"")+(qe.retina?" leaflet-retina":"")+(qe.ielt9?" leaflet-oldie":"")+(qe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=lr(r,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wi(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pn(r.markerPane,"leaflet-zoom-hide"),pn(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,c,m){wi(this._mapPane,new z(0,0));var k=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var F=this._zoom!==c;this._moveStart(F,m)._move(r,c)._moveEnd(F),this.fire("viewreset"),k&&this.fire("load")},_moveStart:function(r,c){return r&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(r,c,m,k){c===void 0&&(c=this._zoom);var F=this._zoom!==c;return this._zoom=c,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),k?m&&m.pinch&&this.fire("zoom",m):((F||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){wi(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[p(this._container)]=this;var c=r?Fn:Pn;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),qe.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,c){for(var m=[],k,F=c==="mouseout"||c==="mouseover",lt=r.target||r.srcElement,$t=!1;lt;){if(k=this._targets[p(lt)],k&&(c==="click"||c==="preclick")&&this._draggableMoved(k)){$t=!0;break}if(k&&k.listens(c,!0)&&(F&&!go(lt,r)||(m.push(k),F))||lt===this._container)break;lt=lt.parentNode}return!m.length&&!$t&&!F&&this.listens(c,!0)&&(m=[this]),m},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var c=r.target||r.srcElement;if(!(!this._loaded||c._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(c))){var m=r.type;m==="mousedown"&&oa(c),this._fireDOMEvent(r,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,c,m){if(r.type==="click"){var k=o({},r);k.type="preclick",this._fireDOMEvent(k,k.type,m)}var F=this._findEventTargets(r,c);if(m){for(var lt=[],$t=0;$t<m.length;$t++)m[$t].listens(c,!0)&&lt.push(m[$t]);F=lt.concat(F)}if(F.length){c==="contextmenu"&&Pi(r);var de=F[0],be={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Be=de.getLatLng&&(!de._radius||de._radius<=10);be.containerPoint=Be?this.latLngToContainerPoint(de.getLatLng()):this.mouseEventToContainerPoint(r),be.layerPoint=this.containerPointToLayerPoint(be.containerPoint),be.latlng=Be?de.getLatLng():this.layerPointToLatLng(be.layerPoint)}for($t=0;$t<F.length;$t++)if(F[$t].fire(c,be,!0),be.originalEvent._stopped||F[$t].options.bubblingMouseEvents===!1&&kt(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,c=this._handlers.length;r<c;r++)this._handlers[r].disable()},whenReady:function(r,c){return this._loaded?r.call(c||this,{target:this}):this.on("load",r,c),this},_getMapPanePos:function(){return Bs(this._mapPane)||new z(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,c){var m=r&&c!==void 0?this._getNewPixelOrigin(r,c):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,c){var m=this.getSize()._divideBy(2);return this.project(r,c)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,c,m){var k=this._getNewPixelOrigin(m,c);return this.project(r,c)._subtract(k)},_latLngBoundsToNewLayerBounds:function(r,c,m){var k=this._getNewPixelOrigin(m,c);return I([this.project(r.getSouthWest(),c)._subtract(k),this.project(r.getNorthWest(),c)._subtract(k),this.project(r.getSouthEast(),c)._subtract(k),this.project(r.getNorthEast(),c)._subtract(k)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,c,m){if(!m)return r;var k=this.project(r,c),F=this.getSize().divideBy(2),lt=new ht(k.subtract(F),k.add(F)),$t=this._getBoundsOffset(lt,m,c);return Math.abs($t.x)<=1&&Math.abs($t.y)<=1?r:this.unproject(k.add($t),c)},_limitOffset:function(r,c){if(!c)return r;var m=this.getPixelBounds(),k=new ht(m.min.add(r),m.max.add(r));return r.add(this._getBoundsOffset(k,c))},_getBoundsOffset:function(r,c,m){var k=I(this.project(c.getNorthEast(),m),this.project(c.getSouthWest(),m)),F=k.min.subtract(r.min),lt=k.max.subtract(r.max),$t=this._rebound(F.x,-lt.x),de=this._rebound(F.y,-lt.y);return new z($t,de)},_rebound:function(r,c){return r+c>0?Math.round(r-c)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(c))},_limitZoom:function(r){var c=this.getMinZoom(),m=this.getMaxZoom(),k=qe.any3d?this.options.zoomSnap:1;return k&&(r=Math.round(r/k)*k),Math.max(c,Math.min(m,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,c){var m=this._getCenterOffset(r)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,c),!0)},_createAnimProxy:function(){var r=this._proxy=Dn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(c){var m=Ss,k=this._proxy.style[m];Ms(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),k===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){mn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),c=this.getZoom();Ms(this._proxy,this.project(r,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,c,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var k=this.getZoomScale(c),F=this._getCenterOffset(r)._divideBy(1-1/k);return m.animate!==!0&&!this.getSize().contains(F)?!1:(X(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(r,c,!0)},this),!0)},_animateZoom:function(r,c,m,k){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=c,pn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:c,noUpdate:k}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Oa(r,c){return new Nn(r,c)}var hn=Mt.extend({options:{position:"topright"},initialize:function(r){R(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var c=this._map;return c&&c.removeControl(this),this.options.position=r,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var c=this._container=this.onAdd(r),m=this.getPosition(),k=r._controlCorners[m];return pn(c,"leaflet-control"),m.indexOf("bottom")!==-1?k.insertBefore(c,k.firstChild):k.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(mn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),yr=function(r){return new hn(r)};Nn.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},c="leaflet-",m=this._controlContainer=Dn("div",c+"control-container",this._container);function k(F,lt){var $t=c+F+" "+c+lt;r[F+lt]=Dn("div",$t,m)}k("top","left"),k("top","right"),k("bottom","left"),k("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)mn(this._controlCorners[r]);mn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jo=hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,c,m,k){return m<k?-1:k<m?1:0}},initialize:function(r,c,m){R(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var k in r)this._addLayer(r[k],k);for(k in c)this._addLayer(c[k],k,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return hn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,c){return this._addLayer(r,c),this._map?this._update():this},addOverlay:function(r,c){return this._addLayer(r,c,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var c=this._getLayer(p(r));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){pn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(pn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):qn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",c=this._container=Dn("div",r),m=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Ro(c),Da(c);var k=this._section=Dn("section",r+"-list");m&&(this._map.on("click",this.collapse,this),Pn(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var F=this._layersLink=Dn("a",r+"-toggle",c);F.href="#",F.title="Layers",F.setAttribute("role","button"),Pn(F,{keydown:function(lt){lt.keyCode===13&&this._expandSafely()},click:function(lt){Pi(lt),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Dn("div",r+"-base",k),this._separator=Dn("div",r+"-separator",k),this._overlaysList=Dn("div",r+"-overlays",k),c.appendChild(k)},_getLayer:function(r){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&p(this._layers[c].layer)===r)return this._layers[c]},_addLayer:function(r,c,m){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:c,overlay:m}),this.options.sortLayers&&this._layers.sort(l(function(k,F){return this.options.sortFunction(k.layer,F.layer,k.name,F.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bi(this._baseLayersList),bi(this._overlaysList),this._layerControlInputs=[];var r,c,m,k,F=0;for(m=0;m<this._layers.length;m++)k=this._layers[m],this._addItem(k),c=c||k.overlay,r=r||!k.overlay,F+=k.overlay?0:1;return this.options.hideSingleBase&&(r=r&&F>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=c&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var c=this._getLayer(p(r.target)),m=c.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;m&&this._map.fire(m,c)},_createRadioElement:function(r,c){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(c?' checked="checked"':"")+"/>",k=document.createElement("div");return k.innerHTML=m,k.firstChild},_addItem:function(r){var c=document.createElement("label"),m=this._map.hasLayer(r.layer),k;r.overlay?(k=document.createElement("input"),k.type="checkbox",k.className="leaflet-control-layers-selector",k.defaultChecked=m):k=this._createRadioElement("leaflet-base-layers_"+p(this),m),this._layerControlInputs.push(k),k.layerId=p(r.layer),Pn(k,"click",this._onInputClick,this);var F=document.createElement("span");F.innerHTML=" "+r.name;var lt=document.createElement("span");c.appendChild(lt),lt.appendChild(k),lt.appendChild(F);var $t=r.overlay?this._overlaysList:this._baseLayersList;return $t.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,c,m,k=[],F=[];this._handlingClick=!0;for(var lt=r.length-1;lt>=0;lt--)c=r[lt],m=this._getLayer(c.layerId).layer,c.checked?k.push(m):c.checked||F.push(m);for(lt=0;lt<F.length;lt++)this._map.hasLayer(F[lt])&&this._map.removeLayer(F[lt]);for(lt=0;lt<k.length;lt++)this._map.hasLayer(k[lt])||this._map.addLayer(k[lt]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,c,m,k=this._map.getZoom(),F=r.length-1;F>=0;F--)c=r[F],m=this._getLayer(c.layerId).layer,c.disabled=m.options.minZoom!==void 0&&k<m.options.minZoom||m.options.maxZoom!==void 0&&k>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Pn(r,"click",Pi),this.expand();var c=this;setTimeout(function(){Fn(r,"click",Pi),c._preventClick=!1})}}),mo=function(r,c,m){return new jo(r,c,m)},Sr=hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var c="leaflet-control-zoom",m=Dn("div",c+" leaflet-bar"),k=this.options;return this._zoomInButton=this._createButton(k.zoomInText,k.zoomInTitle,c+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(k.zoomOutText,k.zoomOutTitle,c+"-out",m,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,c,m,k,F){var lt=Dn("a",m,k);return lt.innerHTML=r,lt.href="#",lt.title=c,lt.setAttribute("role","button"),lt.setAttribute("aria-label",c),Ro(lt),Pn(lt,"click",zr),Pn(lt,"click",F,this),Pn(lt,"click",this._refocusOnMap,this),lt},_updateDisabled:function(){var r=this._map,c="leaflet-disabled";qn(this._zoomInButton,c),qn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(pn(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(pn(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Nn.mergeOptions({zoomControl:!0}),Nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Sr,this.addControl(this.zoomControl))});var Ra=function(r){return new Sr(r)},Ts=hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var c="leaflet-control-scale",m=Dn("div",c),k=this.options;return this._addScales(k,c+"-line",m),r.on(k.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),m},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,c,m){r.metric&&(this._mScale=Dn("div",c,m)),r.imperial&&(this._iScale=Dn("div",c,m))},_update:function(){var r=this._map,c=r.getSize().y/2,m=r.distance(r.containerPointToLatLng([0,c]),r.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(m)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var c=this._getRoundNum(r),m=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,m,c/r)},_updateImperial:function(r){var c=r*3.2808399,m,k,F;c>5280?(m=c/5280,k=this._getRoundNum(m),this._updateScale(this._iScale,k+" mi",k/m)):(F=this._getRoundNum(c),this._updateScale(this._iScale,F+" ft",F/c))},_updateScale:function(r,c,m){r.style.width=Math.round(this.options.maxWidth*m)+"px",r.innerHTML=c},_getRoundNum:function(r){var c=Math.pow(10,(Math.floor(r)+"").length-1),m=r/c;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,c*m}}),ca=function(r){return new Ts(r)},ha='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Wr=hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(qe.inlineSvg?ha+" ":"")+"Leaflet</a>"},initialize:function(r){R(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Dn("div","leaflet-control-attribution"),Ro(this._container);for(var c in r._layers)r._layers[c].getAttribution&&this.addAttribution(r._layers[c].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var c in this._attributions)this._attributions[c]&&r.push(c);var m=[];this.options.prefix&&m.push(this.options.prefix),r.length&&m.push(r.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Nn.mergeOptions({attributionControl:!0}),Nn.addInitHook(function(){this.options.attributionControl&&new Wr().addTo(this)});var fa=function(r){return new Wr(r)};hn.Layers=jo,hn.Zoom=Sr,hn.Scale=Ts,hn.Attribution=Wr,yr.layers=mo,yr.zoom=Ra,yr.scale=ca,yr.attribution=fa;var Ii=Mt.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ii.addTo=function(r,c){return r.addHandler(c,this),this};var ol={Events:H},zo=qe.touch?"touchstart mousedown":"mousedown",Zr=V.extend({options:{clickTolerance:3},initialize:function(r,c,m,k){R(this,k),this._element=r,this._dragStartTarget=c||r,this._preventOutline=m},enable:function(){this._enabled||(Pn(this._dragStartTarget,zo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Zr._dragging===this&&this.finishDrag(!0),Fn(this._dragStartTarget,zo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Zn(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Zr._dragging===this&&this.finishDrag();return}if(!(Zr._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Zr._dragging=this,this._preventOutline&&oa(this._element),Ba(),Oo(),!this._moving)){this.fire("down");var c=r.touches?r.touches[0]:r,m=rl(this._element);this._startPoint=new z(c.clientX,c.clientY),this._startPos=Bs(this._element),this._parentScale=aa(m);var k=r.type==="mousedown";Pn(document,k?"mousemove":"touchmove",this._onMove,this),Pn(document,k?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var c=r.touches&&r.touches.length===1?r.touches[0]:r,m=new z(c.clientX,c.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,Pi(r),this._moved||(this.fire("dragstart"),this._moved=!0,pn(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),wi(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){qn(document.body,"leaflet-dragging"),this._lastTarget&&(qn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fn(document,"mousemove touchmove",this._onMove,this),Fn(document,"mouseup touchend touchcancel",this._onUp,this),cs(),Ks();var c=this._moved&&this._moving;this._moving=!1,Zr._dragging=!1,c&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function da(r,c,m){var k,F=[1,4,2,8],lt,$t,de,be,Be,We,un,Bn;for(lt=0,We=r.length;lt<We;lt++)r[lt]._code=we(r[lt],c);for(de=0;de<4;de++){for(un=F[de],k=[],lt=0,We=r.length,$t=We-1;lt<We;$t=lt++)be=r[lt],Be=r[$t],be._code&un?Be._code&un||(Bn=ue(Be,be,un,c,m),Bn._code=we(Bn,c),k.push(Bn)):(Be._code&un&&(Bn=ue(Be,be,un,c,m),Bn._code=we(Bn,c),k.push(Bn)),k.push(be));r=k}return r}function Ia(r,c){var m,k,F,lt,$t,de,be,Be,We;if(!r||r.length===0)throw new Error("latlngs not passed");Je(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var un=D([0,0]),Bn=rt(r),Pr=Bn.getNorthWest().distanceTo(Bn.getSouthWest())*Bn.getNorthEast().distanceTo(Bn.getNorthWest());Pr<1700&&(un=Fa(r));var Ui=r.length,Dr=[];for(m=0;m<Ui;m++){var Li=D(r[m]);Dr.push(c.project(D([Li.lat-un.lat,Li.lng-un.lng])))}for(de=be=Be=0,m=0,k=Ui-1;m<Ui;k=m++)F=Dr[m],lt=Dr[k],$t=F.y*lt.x-lt.y*F.x,be+=(F.x+lt.x)*$t,Be+=(F.y+lt.y)*$t,de+=$t*3;de===0?We=Dr[0]:We=[be/de,Be/de];var js=c.unproject(ft(We));return D([js.lat+un.lat,js.lng+un.lng])}function Fa(r){for(var c=0,m=0,k=0,F=0;F<r.length;F++){var lt=D(r[F]);c+=lt.lat,m+=lt.lng,k++}return D([c/k,m/k])}var pa={__proto__:null,clipPolygon:da,polygonCenter:Ia,centroid:Fa};function vo(r,c){if(!c||!r.length)return r.slice();var m=c*c;return r=et(r,m),r=ki(r,m),r}function Uo(r,c,m){return Math.sqrt(He(r,c,m,!0))}function yo(r,c,m){return He(r,c,m)}function ki(r,c){var m=r.length,k=typeof Uint8Array<"u"?Uint8Array:Array,F=new k(m);F[0]=F[m-1]=1,C(r,F,c,0,m-1);var lt,$t=[];for(lt=0;lt<m;lt++)F[lt]&&$t.push(r[lt]);return $t}function C(r,c,m,k,F){var lt=0,$t,de,be;for(de=k+1;de<=F-1;de++)be=He(r[de],r[k],r[F],!0),be>lt&&($t=de,lt=be);lt>m&&(c[$t]=1,C(r,c,m,k,$t),C(r,c,m,$t,F))}function et(r,c){for(var m=[r[0]],k=1,F=0,lt=r.length;k<lt;k++)Ne(r[k],r[F])>c&&(m.push(r[k]),F=k);return F<lt-1&&m.push(r[lt-1]),m}var It;function Gt(r,c,m,k,F){var lt=k?It:we(r,m),$t=we(c,m),de,be,Be;for(It=$t;;){if(!(lt|$t))return[r,c];if(lt&$t)return!1;de=lt||$t,be=ue(r,c,de,m,F),Be=we(be,m),de===lt?(r=be,lt=Be):(c=be,$t=Be)}}function ue(r,c,m,k,F){var lt=c.x-r.x,$t=c.y-r.y,de=k.min,be=k.max,Be,We;return m&8?(Be=r.x+lt*(be.y-r.y)/$t,We=be.y):m&4?(Be=r.x+lt*(de.y-r.y)/$t,We=de.y):m&2?(Be=be.x,We=r.y+$t*(be.x-r.x)/lt):m&1&&(Be=de.x,We=r.y+$t*(de.x-r.x)/lt),new z(Be,We,F)}function we(r,c){var m=0;return r.x<c.min.x?m|=1:r.x>c.max.x&&(m|=2),r.y<c.min.y?m|=4:r.y>c.max.y&&(m|=8),m}function Ne(r,c){var m=c.x-r.x,k=c.y-r.y;return m*m+k*k}function He(r,c,m,k){var F=c.x,lt=c.y,$t=m.x-F,de=m.y-lt,be=$t*$t+de*de,Be;return be>0&&(Be=((r.x-F)*$t+(r.y-lt)*de)/be,Be>1?(F=m.x,lt=m.y):Be>0&&(F+=$t*Be,lt+=de*Be)),$t=r.x-F,de=r.y-lt,k?$t*$t+de*de:new z(F,lt)}function Je(r){return!Y(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function on(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Je(r)}function wn(r,c){var m,k,F,lt,$t,de,be,Be;if(!r||r.length===0)throw new Error("latlngs not passed");Je(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var We=D([0,0]),un=rt(r),Bn=un.getNorthWest().distanceTo(un.getSouthWest())*un.getNorthEast().distanceTo(un.getNorthWest());Bn<1700&&(We=Fa(r));var Pr=r.length,Ui=[];for(m=0;m<Pr;m++){var Dr=D(r[m]);Ui.push(c.project(D([Dr.lat-We.lat,Dr.lng-We.lng])))}for(m=0,k=0;m<Pr-1;m++)k+=Ui[m].distanceTo(Ui[m+1])/2;if(k===0)Be=Ui[0];else for(m=0,lt=0;m<Pr-1;m++)if($t=Ui[m],de=Ui[m+1],F=$t.distanceTo(de),lt+=F,lt>k){be=(lt-k)/F,Be=[de.x-be*(de.x-$t.x),de.y-be*(de.y-$t.y)];break}var Li=c.unproject(ft(Be));return D([Li.lat+We.lat,Li.lng+We.lng])}var On={__proto__:null,simplify:vo,pointToSegmentDistance:Uo,closestPointOnSegment:yo,clipSegment:Gt,_getEdgeIntersection:ue,_getBitCode:we,_sqClosestPointOnSegment:He,isFlat:Je,_flat:on,polylineCenter:wn},fi={project:function(r){return new z(r.lng,r.lat)},unproject:function(r){return new $(r.y,r.x)},bounds:new ht([-180,-90],[180,90])},$n={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ht([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var c=Math.PI/180,m=this.R,k=r.lat*c,F=this.R_MINOR/m,lt=Math.sqrt(1-F*F),$t=lt*Math.sin(k),de=Math.tan(Math.PI/4-k/2)/Math.pow((1-$t)/(1+$t),lt/2);return k=-m*Math.log(Math.max(de,1e-10)),new z(r.lng*c*m,k)},unproject:function(r){for(var c=180/Math.PI,m=this.R,k=this.R_MINOR/m,F=Math.sqrt(1-k*k),lt=Math.exp(-r.y/m),$t=Math.PI/2-2*Math.atan(lt),de=0,be=.1,Be;de<15&&Math.abs(be)>1e-7;de++)Be=F*Math.sin($t),Be=Math.pow((1-Be)/(1+Be),F/2),be=Math.PI/2-2*Math.atan(lt*Be)-$t,$t+=be;return new $($t*c,r.x*c/m)}},Kn={__proto__:null,LonLat:fi,Mercator:$n,SphericalMercator:Et},Fi=o({},dt,{code:"EPSG:3395",projection:$n,transformation:function(){var r=.5/(Math.PI*$n.R);return G(r,.5,-r,.5)}()}),Bi=o({},dt,{code:"EPSG:4326",projection:fi,transformation:G(1/180,1,-1/180,.5)}),Ur=o({},q,{projection:fi,transformation:G(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,c){var m=c.lng-r.lng,k=c.lat-r.lat;return Math.sqrt(m*m+k*k)},infinite:!0});q.Earth=dt,q.EPSG3395=Fi,q.EPSG3857=tt,q.EPSG900913=yt,q.EPSG4326=Bi,q.Simple=Ur;var ni=V.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[p(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[p(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var c=r.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var m=this.getEvents();c.on(m,this),this.once("remove",function(){c.off(m,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Nn.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var c=p(r);return this._layers[c]?this:(this._layers[c]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var c=p(r);return this._layers[c]?(this._loaded&&r.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return p(r)in this._layers},eachLayer:function(r,c){for(var m in this._layers)r.call(c,this._layers[m]);return this},_addLayers:function(r){r=r?Y(r)?r:[r]:[];for(var c=0,m=r.length;c<m;c++)this.addLayer(r[c])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[p(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var c=p(r);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,c=-1/0,m=this._getZoomSpan();for(var k in this._zoomBoundLayers){var F=this._zoomBoundLayers[k].options;r=F.minZoom===void 0?r:Math.min(r,F.minZoom),c=F.maxZoom===void 0?c:Math.max(c,F.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=r===1/0?void 0:r,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _r=ni.extend({initialize:function(r,c){R(this,c),this._layers={};var m,k;if(r)for(m=0,k=r.length;m<k;m++)this.addLayer(r[m])},addLayer:function(r){var c=this.getLayerId(r);return this._layers[c]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var c=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(r){var c=typeof r=="number"?r:this.getLayerId(r);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var c=Array.prototype.slice.call(arguments,1),m,k;for(m in this._layers)k=this._layers[m],k[r]&&k[r].apply(k,c);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,c){for(var m in this._layers)r.call(c,this._layers[m]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return p(r)}}),al=function(r,c){return new _r(r,c)},br=_r.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),_r.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),_r.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new it;for(var c in this._layers){var m=this._layers[c];r.extend(m.getBounds?m.getBounds():m.getLatLng())}return r}}),ja=function(r,c){return new br(r,c)},hs=Mt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){R(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,c){var m=this._getIconUrl(r);if(!m){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var k=this._createImg(m,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(k,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),k},_setIconStyles:function(r,c){var m=this.options,k=m[c+"Size"];typeof k=="number"&&(k=[k,k]);var F=ft(k),lt=ft(c==="shadow"&&m.shadowAnchor||m.iconAnchor||F&&F.divideBy(2,!0));r.className="leaflet-marker-"+c+" "+(m.className||""),lt&&(r.style.marginLeft=-lt.x+"px",r.style.marginTop=-lt.y+"px"),F&&(r.style.width=F.x+"px",r.style.height=F.y+"px")},_createImg:function(r,c){return c=c||document.createElement("img"),c.src=r,c},_getIconUrl:function(r){return qe.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function za(r){return new hs(r)}var Qs=hs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Qs.imagePath!="string"&&(Qs.imagePath=this._detectIconPath()),(this.options.imagePath||Qs.imagePath)+hs.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var c=function(m,k,F){var lt=k.exec(m);return lt&&lt[F]};return r=c(r,/^url\((['"])?(.+)\1\)$/,2),r&&c(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Dn("div","leaflet-default-icon-path",document.body),c=lr(r,"background-image")||lr(r,"backgroundImage");if(document.body.removeChild(r),c=this._stripUrl(c),c)return c;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),to=Ii.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Zr(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pn(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var c=this._marker,m=c._map,k=this._marker.options.autoPanSpeed,F=this._marker.options.autoPanPadding,lt=Bs(c._icon),$t=m.getPixelBounds(),de=m.getPixelOrigin(),be=I($t.min._subtract(de).add(F),$t.max._subtract(de).subtract(F));if(!be.contains(lt)){var Be=ft((Math.max(be.max.x,lt.x)-be.max.x)/($t.max.x-be.max.x)-(Math.min(be.min.x,lt.x)-be.min.x)/($t.min.x-be.min.x),(Math.max(be.max.y,lt.y)-be.max.y)/($t.max.y-be.max.y)-(Math.min(be.min.y,lt.y)-be.min.y)/($t.min.y-be.min.y)).multiplyBy(k);m.panBy(Be,{animate:!1}),this._draggable._newPos._add(Be),this._draggable._startPos._add(Be),wi(c._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=X(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,r)))},_onDrag:function(r){var c=this._marker,m=c._shadow,k=Bs(c._icon),F=c._map.layerPointToLatLng(k);m&&wi(m,k),c._latlng=F,r.latlng=F,r.oldLatLng=this._oldLatLng,c.fire("move",r).fire("drag",r)},_onDragEnd:function(r){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Ti=ni.extend({options:{icon:new Qs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,c){R(this,c),this._latlng=D(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var c=this._latlng;return this._latlng=D(r),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=r.icon.createIcon(this._icon),k=!1;m!==this._icon&&(this._icon&&this._removeIcon(),k=!0,r.title&&(m.title=r.title),m.tagName==="IMG"&&(m.alt=r.alt||"")),pn(m,c),r.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pn(m,"focus",this._panOnFocus,this);var F=r.icon.createShadow(this._shadow),lt=!1;F!==this._shadow&&(this._removeShadow(),lt=!0),F&&(pn(F,c),F.alt=""),this._shadow=F,r.opacity<1&&this._updateOpacity(),k&&this.getPane().appendChild(this._icon),this._initInteraction(),F&&lt&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fn(this._icon,"focus",this._panOnFocus,this),mn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&mn(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&wi(this._icon,r),this._shadow&&wi(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(pn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),to)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new to(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&ur(this._icon,r),this._shadow&&ur(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var c=this.options.icon.options,m=c.iconSize?ft(c.iconSize):ft(0,0),k=c.iconAnchor?ft(c.iconAnchor):ft(0,0);r.panInside(this._latlng,{paddingTopLeft:k,paddingBottomRight:m.subtract(k)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ga(r,c){return new Ti(r,c)}var Er=ni.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return R(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wr=Er.extend({options:{fill:!0,radius:10},initialize:function(r,c){R(this,c),this._latlng=D(r),this._radius=this.options.radius},setLatLng:function(r){var c=this._latlng;return this._latlng=D(r),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var c=r&&r.radius||this._radius;return Er.prototype.setStyle.call(this,r),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,c=this._radiusY||r,m=this._clickTolerance(),k=[r+m,c+m];this._pxBounds=new ht(this._point.subtract(k),this._point.add(k))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ma(r,c){return new wr(r,c)}var cr=wr.extend({initialize:function(r,c,m){if(typeof c=="number"&&(c=o({},m,{radius:c})),R(this,c),this._latlng=D(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new it(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Er.prototype.setStyle,_project:function(){var r=this._latlng.lng,c=this._latlng.lat,m=this._map,k=m.options.crs;if(k.distance===dt.distance){var F=Math.PI/180,lt=this._mRadius/dt.R/F,$t=m.project([c+lt,r]),de=m.project([c-lt,r]),be=$t.add(de).divideBy(2),Be=m.unproject(be).lat,We=Math.acos((Math.cos(lt*F)-Math.sin(c*F)*Math.sin(Be*F))/(Math.cos(c*F)*Math.cos(Be*F)))/F;(isNaN(We)||We===0)&&(We=lt/Math.cos(Math.PI/180*c)),this._point=be.subtract(m.getPixelOrigin()),this._radius=isNaN(We)?0:be.x-m.project([Be,r-We]).x,this._radiusY=be.y-$t.y}else{var un=k.unproject(k.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(un).x}this._updateBounds()}});function eo(r,c,m){return new cr(r,c,m)}var qr=Er.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,c){R(this,c),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var c=1/0,m=null,k=He,F,lt,$t=0,de=this._parts.length;$t<de;$t++)for(var be=this._parts[$t],Be=1,We=be.length;Be<We;Be++){F=be[Be-1],lt=be[Be];var un=k(r,F,lt,!0);un<c&&(c=un,m=k(r,F,lt))}return m&&(m.distance=Math.sqrt(c)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,c){return c=c||this._defaultShape(),r=D(r),c.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new it,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Je(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var c=[],m=Je(r),k=0,F=r.length;k<F;k++)m?(c[k]=D(r[k]),this._bounds.extend(c[k])):c[k]=this._convertLatLngs(r[k]);return c},_project:function(){var r=new ht;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),c=new z(r,r);this._rawPxBounds&&(this._pxBounds=new ht([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(r,c,m){var k=r[0]instanceof $,F=r.length,lt,$t;if(k){for($t=[],lt=0;lt<F;lt++)$t[lt]=this._map.latLngToLayerPoint(r[lt]),m.extend($t[lt]);c.push($t)}else for(lt=0;lt<F;lt++)this._projectLatlngs(r[lt],c,m)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,m,k,F,lt,$t,de,be;for(m=0,F=0,lt=this._rings.length;m<lt;m++)for(be=this._rings[m],k=0,$t=be.length;k<$t-1;k++)de=Gt(be[k],be[k+1],r,k,!0),de&&(c[F]=c[F]||[],c[F].push(de[0]),(de[1]!==be[k+1]||k===$t-2)&&(c[F].push(de[1]),F++))}},_simplifyPoints:function(){for(var r=this._parts,c=this.options.smoothFactor,m=0,k=r.length;m<k;m++)r[m]=vo(r[m],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,c){var m,k,F,lt,$t,de,be=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(m=0,lt=this._parts.length;m<lt;m++)for(de=this._parts[m],k=0,$t=de.length,F=$t-1;k<$t;F=k++)if(!(!c&&k===0)&&Uo(r,de[F],de[k])<=be)return!0;return!1}});function ll(r,c){return new qr(r,c)}qr._flat=on;var ji=qr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ia(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var c=qr.prototype._convertLatLngs.call(this,r),m=c.length;return m>=2&&c[0]instanceof $&&c[0].equals(c[m-1])&&c.pop(),c},_setLatLngs:function(r){qr.prototype._setLatLngs.call(this,r),Je(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Je(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,c=this.options.weight,m=new z(c,c);if(r=new ht(r.min.subtract(m),r.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var k=0,F=this._rings.length,lt;k<F;k++)lt=da(this._rings[k],r,!0),lt.length&&this._parts.push(lt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var c=!1,m,k,F,lt,$t,de,be,Be;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(lt=0,be=this._parts.length;lt<be;lt++)for(m=this._parts[lt],$t=0,Be=m.length,de=Be-1;$t<Be;de=$t++)k=m[$t],F=m[de],k.y>r.y!=F.y>r.y&&r.x<(F.x-k.x)*(r.y-k.y)/(F.y-k.y)+k.x&&(c=!c);return c||qr.prototype._containsPoint.call(this,r,!0)}});function Ds(r,c){return new ji(r,c)}var Kr=br.extend({initialize:function(r,c){R(this,c),this._layers={},r&&this.addData(r)},addData:function(r){var c=Y(r)?r:r.features,m,k,F;if(c){for(m=0,k=c.length;m<k;m++)F=c[m],(F.geometries||F.geometry||F.features||F.coordinates)&&this.addData(F);return this}var lt=this.options;if(lt.filter&&!lt.filter(r))return this;var $t=qo(r,lt);return $t?($t.feature=Yr(r),$t.defaultOptions=$t.options,this.resetStyle($t),lt.onEachFeature&&lt.onEachFeature(r,$t),this.addLayer($t)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=o({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(c){this._setLayerStyle(c,r)},this)},_setLayerStyle:function(r,c){r.setStyle&&(typeof c=="function"&&(c=c(r.feature)),r.setStyle(c))}});function qo(r,c){var m=r.type==="Feature"?r.geometry:r,k=m?m.coordinates:null,F=[],lt=c&&c.pointToLayer,$t=c&&c.coordsToLatLng||Ns,de,be,Be,We;if(!k&&!m)return null;switch(m.type){case"Point":return de=$t(k),no(lt,r,de,c);case"MultiPoint":for(Be=0,We=k.length;Be<We;Be++)de=$t(k[Be]),F.push(no(lt,r,de,c));return new br(F);case"LineString":case"MultiLineString":return be=Xi(k,m.type==="LineString"?0:1,$t),new qr(be,c);case"Polygon":case"MultiPolygon":return be=Xi(k,m.type==="Polygon"?1:2,$t),new ji(be,c);case"GeometryCollection":for(Be=0,We=m.geometries.length;Be<We;Be++){var un=qo({geometry:m.geometries[Be],type:"Feature",properties:r.properties},c);un&&F.push(un)}return new br(F);case"FeatureCollection":for(Be=0,We=m.features.length;Be<We;Be++){var Bn=qo(m.features[Be],c);Bn&&F.push(Bn)}return new br(F);default:throw new Error("Invalid GeoJSON object.")}}function no(r,c,m,k){return r?r(c,m):new Ti(m,k&&k.markersInheritOptions&&k)}function Ns(r){return new $(r[1],r[0],r[2])}function Xi(r,c,m){for(var k=[],F=0,lt=r.length,$t;F<lt;F++)$t=c?Xi(r[F],c-1,m):(m||Ns)(r[F]),k.push($t);return k}function Hi(r,c){return r=D(r),r.alt!==void 0?[S(r.lng,c),S(r.lat,c),S(r.alt,c)]:[S(r.lng,c),S(r.lat,c)]}function fs(r,c,m,k){for(var F=[],lt=0,$t=r.length;lt<$t;lt++)F.push(c?fs(r[lt],Je(r[lt])?0:c-1,m,k):Hi(r[lt],k));return!c&&m&&F.length>0&&F.push(F[0].slice()),F}function Ar(r,c){return r.feature?o({},r.feature,{geometry:c}):Yr(c)}function Yr(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var io={toGeoJSON:function(r){return Ar(this,{type:"Point",coordinates:Hi(this.getLatLng(),r)})}};Ti.include(io),cr.include(io),wr.include(io),qr.include({toGeoJSON:function(r){var c=!Je(this._latlngs),m=fs(this._latlngs,c?1:0,!1,r);return Ar(this,{type:(c?"Multi":"")+"LineString",coordinates:m})}}),ji.include({toGeoJSON:function(r){var c=!Je(this._latlngs),m=c&&!Je(this._latlngs[0]),k=fs(this._latlngs,m?2:c?1:0,!0,r);return c||(k=[k]),Ar(this,{type:(m?"Multi":"")+"Polygon",coordinates:k})}}),_r.include({toMultiPoint:function(r){var c=[];return this.eachLayer(function(m){c.push(m.toGeoJSON(r).geometry.coordinates)}),Ar(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(r){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(r);var m=c==="GeometryCollection",k=[];return this.eachLayer(function(F){if(F.toGeoJSON){var lt=F.toGeoJSON(r);if(m)k.push(lt.geometry);else{var $t=Yr(lt);$t.type==="FeatureCollection"?k.push.apply(k,$t.features):k.push($t)}}}),m?Ar(this,{geometries:k,type:"GeometryCollection"}):{type:"FeatureCollection",features:k}}});function Jr(r,c){return new Kr(r,c)}var xi=Jr,Os=ni.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,c,m){this._url=r,this._bounds=rt(c),R(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){mn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&oi(this._image),this},bringToBack:function(){return this._map&&mi(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=rt(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",c=this._image=r?this._url:Dn("img");if(pn(c,"leaflet-image-layer"),this._zoomAnimated&&pn(c,"leaflet-zoom-animated"),this.options.className&&pn(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onload=l(this.fire,this,"load"),c.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(r){var c=this._map.getZoomScale(r.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Ms(this._image,m,c)},_reset:function(){var r=this._image,c=new ht(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=c.getSize();wi(r,c.min),r.style.width=m.x+"px",r.style.height=m.y+"px"},_updateOpacity:function(){ur(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),xr=function(r,c,m){return new Os(r,c,m)},hr=Os.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",c=this._image=r?this._url:Dn("video");if(pn(c,"leaflet-image-layer"),this._zoomAnimated&&pn(c,"leaflet-zoom-animated"),this.options.className&&pn(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onloadeddata=l(this.fire,this,"load"),r){for(var m=c.getElementsByTagName("source"),k=[],F=0;F<m.length;F++)k.push(m[F].src);this._url=m.length>0?k:[c.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var lt=0;lt<this._url.length;lt++){var $t=Dn("source");$t.src=this._url[lt],c.appendChild($t)}}});function $o(r,c,m){return new hr(r,c,m)}var Ua=Os.extend({_initImage:function(){var r=this._image=this._url;pn(r,"leaflet-image-layer"),this._zoomAnimated&&pn(r,"leaflet-zoom-animated"),this.options.className&&pn(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function qa(r,c,m){return new Ua(r,c,m)}var fr=ni.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,c){r&&(r instanceof $||Y(r))?(this._latlng=D(r),R(this,c)):(R(this,r),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&ur(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&ur(this._container,1),this.bringToFront(),this.options.interactive&&(pn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(ur(this._container,0),this._removeTimeout=setTimeout(l(mn,void 0,this._container),200)):mn(this._container),this.options.interactive&&(qn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=D(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oi(this._container),this},bringToBack:function(){return this._map&&mi(this._container),this},_prepareOpen:function(r){var c=this._source;if(!c._map)return!1;if(c instanceof br){c=null;var m=this._source._layers;for(var k in m)if(m[k]._map){c=m[k];break}if(!c)return!1;this._source=c}if(!r)if(c.getCenter)r=c.getCenter();else if(c.getLatLng)r=c.getLatLng();else if(c.getBounds)r=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")r.innerHTML=c;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),c=ft(this.options.offset),m=this._getAnchor();this._zoomAnimated?wi(this._container,r.add(m)):c=c.add(r).add(m);var k=this._containerBottom=-c.y,F=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=k+"px",this._container.style.left=F+"px"}},_getAnchor:function(){return[0,0]}});Nn.include({_initOverlay:function(r,c,m,k){var F=c;return F instanceof r||(F=new r(k).setContent(c)),m&&F.setLatLng(m),F}}),ni.include({_initOverlay:function(r,c,m,k){var F=m;return F instanceof r?(R(F,k),F._source=this):(F=c&&!k?c:new r(k,this),F.setContent(m)),F}});var Mr=fr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,fr.prototype.openOn.call(this,r)},onAdd:function(r){fr.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Er||this._source.on("preclick",Js))},onRemove:function(r){fr.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Er||this._source.off("preclick",Js))},getEvents:function(){var r=fr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",c=this._container=Dn("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Dn("div",r+"-content-wrapper",c);if(this._contentNode=Dn("div",r+"-content",m),Ro(c),Da(this._contentNode),Pn(c,"contextmenu",Js),this._tipContainer=Dn("div",r+"-tip-container",c),this._tip=Dn("div",r+"-tip",this._tipContainer),this.options.closeButton){var k=this._closeButton=Dn("a",r+"-close-button",c);k.setAttribute("role","button"),k.setAttribute("aria-label","Close popup"),k.href="#close",k.innerHTML='<span aria-hidden="true">&#215;</span>',Pn(k,"click",function(F){Pi(F),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,c=r.style;c.width="",c.whiteSpace="nowrap";var m=r.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),c.width=m+1+"px",c.whiteSpace="",c.height="";var k=r.offsetHeight,F=this.options.maxHeight,lt="leaflet-popup-scrolled";F&&k>F?(c.height=F+"px",pn(r,lt)):qn(r,lt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),m=this._getAnchor();wi(this._container,c.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,c=parseInt(lr(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+c,k=this._containerWidth,F=new z(this._containerLeft,-m-this._containerBottom);F._add(Bs(this._container));var lt=r.layerPointToContainerPoint(F),$t=ft(this.options.autoPanPadding),de=ft(this.options.autoPanPaddingTopLeft||$t),be=ft(this.options.autoPanPaddingBottomRight||$t),Be=r.getSize(),We=0,un=0;lt.x+k+be.x>Be.x&&(We=lt.x+k-Be.x+be.x),lt.x-We-de.x<0&&(We=lt.x-de.x),lt.y+m+be.y>Be.y&&(un=lt.y+m-Be.y+be.y),lt.y-un-de.y<0&&(un=lt.y-de.y),(We||un)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([We,un]))}},_getAnchor:function(){return ft(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_o=function(r,c){return new Mr(r,c)};Nn.mergeOptions({closePopupOnClick:!0}),Nn.include({openPopup:function(r,c,m){return this._initOverlay(Mr,r,c,m).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),ni.include({bindPopup:function(r,c){return this._popup=this._initOverlay(Mr,this._popup,r,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof br||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){zr(r);var c=r.layer||r.target;if(this._popup._source===c&&!(c instanceof Er)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=c,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Rs=fr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){fr.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){fr.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=fr.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",c=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Dn("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var c,m,k=this._map,F=this._container,lt=k.latLngToContainerPoint(k.getCenter()),$t=k.layerPointToContainerPoint(r),de=this.options.direction,be=F.offsetWidth,Be=F.offsetHeight,We=ft(this.options.offset),un=this._getAnchor();de==="top"?(c=be/2,m=Be):de==="bottom"?(c=be/2,m=0):de==="center"?(c=be/2,m=Be/2):de==="right"?(c=0,m=Be/2):de==="left"?(c=be,m=Be/2):$t.x<lt.x?(de="right",c=0,m=Be/2):(de="left",c=be+(We.x+un.x)*2,m=Be/2),r=r.subtract(ft(c,m,!0)).add(We).add(un),qn(F,"leaflet-tooltip-right"),qn(F,"leaflet-tooltip-left"),qn(F,"leaflet-tooltip-top"),qn(F,"leaflet-tooltip-bottom"),pn(F,"leaflet-tooltip-"+de),wi(F,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&ur(this._container,r)},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(c)},_getAnchor:function(){return ft(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),va=function(r,c){return new Rs(r,c)};Nn.include({openTooltip:function(r,c,m){return this._initOverlay(Rs,r,c,m).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),ni.include({bindTooltip:function(r,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Rs,this._tooltip,r,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var c=r?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[c](m),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof br||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var c=typeof r.getElement=="function"&&r.getElement();c&&(Pn(c,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Pn(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var c=typeof r.getElement=="function"&&r.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var c=r.latlng,m,k;this._tooltip.options.sticky&&r.originalEvent&&(m=this._map.mouseEventToContainerPoint(r.originalEvent),k=this._map.containerPointToLayerPoint(m),c=this._map.layerPointToLatLng(k)),this._tooltip.setLatLng(c)}});var bo=hs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var c=r&&r.tagName==="DIV"?r:document.createElement("div"),m=this.options;if(m.html instanceof Element?(bi(c),c.appendChild(m.html)):c.innerHTML=m.html!==!1?m.html:"",m.bgPos){var k=ft(m.bgPos);c.style.backgroundPosition=-k.x+"px "+-k.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function wo(r){return new bo(r)}hs.Default=Qs;var ro=ni.extend({options:{tileSize:256,opacity:1,updateWhenIdle:qe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){R(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),mn(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof z?r:new z(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var c=this.getPane().children,m=-r(-1/0,1/0),k=0,F=c.length,lt;k<F;k++)lt=c[k].style.zIndex,c[k]!==this._container&&lt&&(m=r(m,+lt));isFinite(m)&&(this.options.zIndex=m+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!qe.ielt9){ur(this._container,this.options.opacity);var r=+new Date,c=!1,m=!1;for(var k in this._tiles){var F=this._tiles[k];if(!(!F.current||!F.loaded)){var lt=Math.min(1,(r-F.loaded)/200);ur(F.el,lt),lt<1?c=!0:(F.active?m=!0:this._onOpaqueTile(F),F.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),c&&(W(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Dn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,c=this.options.maxZoom;if(r!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===r?(this._levels[m].el.style.zIndex=c-Math.abs(r-m),this._onUpdateLevel(m)):(mn(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var k=this._levels[r],F=this._map;return k||(k=this._levels[r]={},k.el=Dn("div","leaflet-tile-container leaflet-zoom-animated",this._container),k.el.style.zIndex=c,k.origin=F.project(F.unproject(F.getPixelOrigin()),r).round(),k.zoom=r,this._setZoomTransform(k,F.getCenter(),F.getZoom()),w(k.el.offsetWidth),this._onCreateLevel(k)),this._level=k,k}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,c,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)c=this._tiles[r],c.retain=c.current;for(r in this._tiles)if(c=this._tiles[r],c.current&&!c.active){var k=c.coords;this._retainParent(k.x,k.y,k.z,k.z-5)||this._retainChildren(k.x,k.y,k.z,k.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var c in this._tiles)this._tiles[c].coords.z===r&&this._removeTile(c)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)mn(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,c,m,k){var F=Math.floor(r/2),lt=Math.floor(c/2),$t=m-1,de=new z(+F,+lt);de.z=+$t;var be=this._tileCoordsToKey(de),Be=this._tiles[be];return Be&&Be.active?(Be.retain=!0,!0):(Be&&Be.loaded&&(Be.retain=!0),$t>k?this._retainParent(F,lt,$t,k):!1)},_retainChildren:function(r,c,m,k){for(var F=2*r;F<2*r+2;F++)for(var lt=2*c;lt<2*c+2;lt++){var $t=new z(F,lt);$t.z=m+1;var de=this._tileCoordsToKey($t),be=this._tiles[de];if(be&&be.active){be.retain=!0;continue}else be&&be.loaded&&(be.retain=!0);m+1<k&&this._retainChildren(F,lt,m+1,k)}},_resetView:function(r){var c=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var c=this.options;return c.minNativeZoom!==void 0&&r<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<r?c.maxNativeZoom:r},_setView:function(r,c,m,k){var F=Math.round(c);this.options.maxZoom!==void 0&&F>this.options.maxZoom||this.options.minZoom!==void 0&&F<this.options.minZoom?F=void 0:F=this._clampZoom(F);var lt=this.options.updateWhenZooming&&F!==this._tileZoom;(!k||lt)&&(this._tileZoom=F,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),F!==void 0&&this._update(r),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(r,c)},_setZoomTransforms:function(r,c){for(var m in this._levels)this._setZoomTransform(this._levels[m],r,c)},_setZoomTransform:function(r,c,m){var k=this._map.getZoomScale(m,r.zoom),F=r.origin.multiplyBy(k).subtract(this._map._getNewPixelOrigin(c,m)).round();qe.any3d?Ms(r.el,F,k):wi(r.el,F)},_resetGrid:function(){var r=this._map,c=r.options.crs,m=this._tileSize=this.getTileSize(),k=this._tileZoom,F=this._map.getPixelWorldBounds(this._tileZoom);F&&(this._globalTileRange=this._pxBoundsToTileRange(F)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,c.wrapLng[0]],k).x/m.x),Math.ceil(r.project([0,c.wrapLng[1]],k).x/m.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([c.wrapLat[0],0],k).y/m.x),Math.ceil(r.project([c.wrapLat[1],0],k).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var c=this._map,m=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),k=c.getZoomScale(m,this._tileZoom),F=c.project(r,this._tileZoom).floor(),lt=c.getSize().divideBy(k*2);return new ht(F.subtract(lt),F.add(lt))},_update:function(r){var c=this._map;if(c){var m=this._clampZoom(c.getZoom());if(r===void 0&&(r=c.getCenter()),this._tileZoom!==void 0){var k=this._getTiledPixelBounds(r),F=this._pxBoundsToTileRange(k),lt=F.getCenter(),$t=[],de=this.options.keepBuffer,be=new ht(F.getBottomLeft().subtract([de,-de]),F.getTopRight().add([de,-de]));if(!(isFinite(F.min.x)&&isFinite(F.min.y)&&isFinite(F.max.x)&&isFinite(F.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Be in this._tiles){var We=this._tiles[Be].coords;(We.z!==this._tileZoom||!be.contains(new z(We.x,We.y)))&&(this._tiles[Be].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(r,m);return}for(var un=F.min.y;un<=F.max.y;un++)for(var Bn=F.min.x;Bn<=F.max.x;Bn++){var Pr=new z(Bn,un);if(Pr.z=this._tileZoom,!!this._isValidTile(Pr)){var Ui=this._tiles[this._tileCoordsToKey(Pr)];Ui?Ui.current=!0:$t.push(Pr)}}if($t.sort(function(Li,js){return Li.distanceTo(lt)-js.distanceTo(lt)}),$t.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Dr=document.createDocumentFragment();for(Bn=0;Bn<$t.length;Bn++)this._addTile($t[Bn],Dr);this._level.el.appendChild(Dr)}}}},_isValidTile:function(r){var c=this._map.options.crs;if(!c.infinite){var m=this._globalTileRange;if(!c.wrapLng&&(r.x<m.min.x||r.x>m.max.x)||!c.wrapLat&&(r.y<m.min.y||r.y>m.max.y))return!1}if(!this.options.bounds)return!0;var k=this._tileCoordsToBounds(r);return rt(this.options.bounds).overlaps(k)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var c=this._map,m=this.getTileSize(),k=r.scaleBy(m),F=k.add(m),lt=c.unproject(k,r.z),$t=c.unproject(F,r.z);return[lt,$t]},_tileCoordsToBounds:function(r){var c=this._tileCoordsToNwSe(r),m=new it(c[0],c[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var c=r.split(":"),m=new z(+c[0],+c[1]);return m.z=+c[2],m},_removeTile:function(r){var c=this._tiles[r];c&&(mn(c.el),delete this._tiles[r],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){pn(r,"leaflet-tile");var c=this.getTileSize();r.style.width=c.x+"px",r.style.height=c.y+"px",r.onselectstart=w,r.onmousemove=w,qe.ielt9&&this.options.opacity<1&&ur(r,this.options.opacity)},_addTile:function(r,c){var m=this._getTilePos(r),k=this._tileCoordsToKey(r),F=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(F),this.createTile.length<2&&X(l(this._tileReady,this,r,null,F)),wi(F,m),this._tiles[k]={el:F,coords:r,current:!0},c.appendChild(F),this.fire("tileloadstart",{tile:F,coords:r})},_tileReady:function(r,c,m){c&&this.fire("tileerror",{error:c,tile:m,coords:r});var k=this._tileCoordsToKey(r);m=this._tiles[k],m&&(m.loaded=+new Date,this._map._fadeAnimated?(ur(m.el,0),W(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),c||(pn(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),qe.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var c=new z(this._wrapX?b(r.x,this._wrapX):r.x,this._wrapY?b(r.y,this._wrapY):r.y);return c.z=r.z,c},_pxBoundsToTileRange:function(r){var c=this.getTileSize();return new ht(r.min.unscaleBy(c).floor(),r.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Xr(r){return new ro(r)}var Qi=ro.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,c){this._url=r,c=R(this,c),c.detectRetina&&qe.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,c){return this._url===r&&c===void 0&&(c=!0),this._url=r,c||this.redraw(),this},createTile:function(r,c){var m=document.createElement("img");return Pn(m,"load",l(this._tileOnLoad,this,c,m)),Pn(m,"error",l(this._tileOnError,this,c,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(r),m},getTileUrl:function(r){var c={r:qe.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-r.y;this.options.tms&&(c.y=m),c["-y"]=m}return Z(this._url,o(c,this.options))},_tileOnLoad:function(r,c){qe.ielt9?setTimeout(l(r,this,null,c),0):r(null,c)},_tileOnError:function(r,c,m){var k=this.options.errorTileUrl;k&&c.getAttribute("src")!==k&&(c.src=k),r(m,c)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,c=this.options.maxZoom,m=this.options.zoomReverse,k=this.options.zoomOffset;return m&&(r=c-r),r+k},_getSubdomain:function(r){var c=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var r,c;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(c=this._tiles[r].el,c.onload=w,c.onerror=w,!c.complete)){c.src=At;var m=this._tiles[r].coords;mn(c),delete this._tiles[r],this.fire("tileabort",{tile:c,coords:m})}},_removeTile:function(r){var c=this._tiles[r];if(c)return c.el.setAttribute("src",At),ro.prototype._removeTile.call(this,r)},_tileReady:function(r,c,m){if(!(!this._map||m&&m.getAttribute("src")===At))return ro.prototype._tileReady.call(this,r,c,m)}});function ti(r,c){return new Qi(r,c)}var Yn=Qi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,c){this._url=r;var m=o({},this.defaultWmsParams);for(var k in c)k in this.options||(m[k]=c[k]);c=R(this,c);var F=c.detectRetina&&qe.retina?2:1,lt=this.getTileSize();m.width=lt.x*F,m.height=lt.y*F,this.wmsParams=m},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Qi.prototype.onAdd.call(this,r)},getTileUrl:function(r){var c=this._tileCoordsToNwSe(r),m=this._crs,k=I(m.project(c[0]),m.project(c[1])),F=k.min,lt=k.max,$t=(this._wmsVersion>=1.3&&this._crs===Bi?[F.y,F.x,lt.y,lt.x]:[F.x,F.y,lt.x,lt.y]).join(","),de=Qi.prototype.getTileUrl.call(this,r);return de+U(this.wmsParams,de,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+$t},setParams:function(r,c){return o(this.wmsParams,r),c||this.redraw(),this}});function Si(r,c){return new Yn(r,c)}Qi.WMS=Yn,ti.wms=Si;var ii=ni.extend({options:{padding:.1},initialize:function(r){R(this,r),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,c){var m=this._map.getZoomScale(c,this._zoom),k=this._map.getSize().multiplyBy(.5+this.options.padding),F=this._map.project(this._center,c),lt=k.multiplyBy(-m).add(F).subtract(this._map._getNewPixelOrigin(r,c));qe.any3d?Ms(this._container,lt,m):wi(this._container,lt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,c=this._map.getSize(),m=this._map.containerPointToLayerPoint(c.multiplyBy(-r)).round();this._bounds=new ht(m,m.add(c.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ds=ii.extend({options:{tolerance:0},getEvents:function(){var r=ii.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ii.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Pn(r,"mousemove",this._onMouseMove,this),Pn(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pn(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,mn(this._container),Fn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var c in this._layers)r=this._layers[c],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ii.prototype._update.call(this);var r=this._bounds,c=this._container,m=r.getSize(),k=qe.retina?2:1;wi(c,r.min),c.width=k*m.x,c.height=k*m.y,c.style.width=m.x+"px",c.style.height=m.y+"px",qe.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){ii.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[p(r)]=r;var c=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var c=r._order,m=c.next,k=c.prev;m?m.prev=k:this._drawLast=k,k?k.next=m:this._drawFirst=m,delete r._order,delete this._layers[p(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var c=r.options.dashArray.split(/[, ]+/),m=[],k,F;for(F=0;F<c.length;F++){if(k=Number(c[F]),isNaN(k))return;m.push(k)}r.options._dashArray=m}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var c=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ht,this._redrawBounds.extend(r._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(r._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var c=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,c=this._redrawBounds;if(this._ctx.save(),c){var m=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var k=this._drawFirst;k;k=k.next)r=k.layer,(!c||r._pxBounds&&r._pxBounds.intersects(c))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,c){if(this._drawing){var m,k,F,lt,$t=r._parts,de=$t.length,be=this._ctx;if(de){for(be.beginPath(),m=0;m<de;m++){for(k=0,F=$t[m].length;k<F;k++)lt=$t[m][k],be[k?"lineTo":"moveTo"](lt.x,lt.y);c&&be.closePath()}this._fillStroke(be,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var c=r._point,m=this._ctx,k=Math.max(Math.round(r._radius),1),F=(Math.max(Math.round(r._radiusY),1)||k)/k;F!==1&&(m.save(),m.scale(1,F)),m.beginPath(),m.arc(c.x,c.y/F,k,0,Math.PI*2,!1),F!==1&&m.restore(),this._fillStroke(m,r)}},_fillStroke:function(r,c){var m=c.options;m.fill&&(r.globalAlpha=m.fillOpacity,r.fillStyle=m.fillColor||m.color,r.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(r.setLineDash&&r.setLineDash(c.options&&c.options._dashArray||[]),r.globalAlpha=m.opacity,r.lineWidth=m.weight,r.strokeStyle=m.color,r.lineCap=m.lineCap,r.lineJoin=m.lineJoin,r.stroke())},_onClick:function(r){for(var c=this._map.mouseEventToLayerPoint(r),m,k,F=this._drawFirst;F;F=F.next)m=F.layer,m.options.interactive&&m._containsPoint(c)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(m))&&(k=m);this._fireEvent(k?[k]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,c)}},_handleMouseOut:function(r){var c=this._hoveredLayer;c&&(qn(this._container,"leaflet-interactive"),this._fireEvent([c],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,c){if(!this._mouseHoverThrottled){for(var m,k,F=this._drawFirst;F;F=F.next)m=F.layer,m.options.interactive&&m._containsPoint(c)&&(k=m);k!==this._hoveredLayer&&(this._handleMouseOut(r),k&&(pn(this._container,"leaflet-interactive"),this._fireEvent([k],r,"mouseover"),this._hoveredLayer=k)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,c,m){this._map._fireDOMEvent(c,m||c.type,r)},_bringToFront:function(r){var c=r._order;if(c){var m=c.next,k=c.prev;if(m)m.prev=k;else return;k?k.next=m:m&&(this._drawFirst=m),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(r)}},_bringToBack:function(r){var c=r._order;if(c){var m=c.next,k=c.prev;if(k)k.next=m;else return;m?m.prev=k:k&&(this._drawLast=k),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(r)}}});function xo(r){return qe.canvas?new ds(r):null}var Is=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ul={_initContainer:function(){this._container=Dn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ii.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var c=r._container=Is("shape");pn(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",r._path=Is("path"),c.appendChild(r._path),this._updateStyle(r),this._layers[p(r)]=r},_addPath:function(r){var c=r._container;this._container.appendChild(c),r.options.interactive&&r.addInteractiveTarget(c)},_removePath:function(r){var c=r._container;mn(c),r.removeInteractiveTarget(c),delete this._layers[p(r)]},_updateStyle:function(r){var c=r._stroke,m=r._fill,k=r.options,F=r._container;F.stroked=!!k.stroke,F.filled=!!k.fill,k.stroke?(c||(c=r._stroke=Is("stroke")),F.appendChild(c),c.weight=k.weight+"px",c.color=k.color,c.opacity=k.opacity,k.dashArray?c.dashStyle=Y(k.dashArray)?k.dashArray.join(" "):k.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=k.lineCap.replace("butt","flat"),c.joinstyle=k.lineJoin):c&&(F.removeChild(c),r._stroke=null),k.fill?(m||(m=r._fill=Is("fill")),F.appendChild(m),m.color=k.fillColor||k.color,m.opacity=k.fillOpacity):m&&(F.removeChild(m),r._fill=null)},_updateCircle:function(r){var c=r._point.round(),m=Math.round(r._radius),k=Math.round(r._radiusY||m);this._setPath(r,r._empty()?"M0 0":"AL "+c.x+","+c.y+" "+m+","+k+" 0,"+65535*360)},_setPath:function(r,c){r._path.v=c},_bringToFront:function(r){oi(r._container)},_bringToBack:function(r){mi(r._container)}},Lo=qe.vml?Is:vt,zi=ii.extend({_initContainer:function(){this._container=Lo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Lo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){mn(this._container),Fn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ii.prototype._update.call(this);var r=this._bounds,c=r.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,m.setAttribute("width",c.x),m.setAttribute("height",c.y)),wi(m,r.min),m.setAttribute("viewBox",[r.min.x,r.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(r){var c=r._path=Lo("path");r.options.className&&pn(c,r.options.className),r.options.interactive&&pn(c,"leaflet-interactive"),this._updateStyle(r),this._layers[p(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){mn(r._path),r.removeInteractiveTarget(r._path),delete this._layers[p(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var c=r._path,m=r.options;c&&(m.stroke?(c.setAttribute("stroke",m.color),c.setAttribute("stroke-opacity",m.opacity),c.setAttribute("stroke-width",m.weight),c.setAttribute("stroke-linecap",m.lineCap),c.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?c.setAttribute("stroke-dasharray",m.dashArray):c.removeAttribute("stroke-dasharray"),m.dashOffset?c.setAttribute("stroke-dashoffset",m.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),m.fill?(c.setAttribute("fill",m.fillColor||m.color),c.setAttribute("fill-opacity",m.fillOpacity),c.setAttribute("fill-rule",m.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(r,c){this._setPath(r,J(r._parts,c))},_updateCircle:function(r){var c=r._point,m=Math.max(Math.round(r._radius),1),k=Math.max(Math.round(r._radiusY),1)||m,F="a"+m+","+k+" 0 1,0 ",lt=r._empty()?"M0 0":"M"+(c.x-m)+","+c.y+F+m*2+",0 "+F+-m*2+",0 ";this._setPath(r,lt)},_setPath:function(r,c){r._path.setAttribute("d",c)},_bringToFront:function(r){oi(r._path)},_bringToBack:function(r){mi(r._path)}});qe.vml&&zi.include(ul);function ri(r){return qe.svg||qe.vml?new zi(r):null}Nn.include({getRenderer:function(r){var c=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var c=this._paneRenderers[r];return c===void 0&&(c=this._createRenderer({pane:r}),this._paneRenderers[r]=c),c},_createRenderer:function(r){return this.options.preferCanvas&&xo(r)||ri(r)}});var Br=ji.extend({initialize:function(r,c){ji.prototype.initialize.call(this,this._boundsToLatLngs(r),c)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=rt(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Tr(r,c){return new Br(r,c)}zi.create=Lo,zi.pointsToPath=J,Kr.geometryToLayer=qo,Kr.coordsToLatLng=Ns,Kr.coordsToLatLngs=Xi,Kr.latLngToCoords=Hi,Kr.latLngsToCoords=fs,Kr.getFeature=Ar,Kr.asFeature=Yr,Nn.mergeOptions({boxZoom:!0});var vn=Ii.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Pn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){mn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Oo(),Ba(),this._startPoint=this._map.mouseEventToContainerPoint(r),Pn(document,{contextmenu:zr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Dn("div","leaflet-zoom-box",this._container),pn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var c=new ht(this._point,this._startPoint),m=c.getSize();wi(this._box,c.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(mn(this._box),qn(this._container,"leaflet-crosshair")),Ks(),cs(),Fn(document,{contextmenu:zr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var c=new it(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Nn.addInitHook("addHandler","boxZoom",vn),Nn.mergeOptions({doubleClickZoom:!0});var cl=Ii.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var c=this._map,m=c.getZoom(),k=c.options.zoomDelta,F=r.originalEvent.shiftKey?m-k:m+k;c.options.doubleClickZoom==="center"?c.setZoom(F):c.setZoomAround(r.containerPoint,F)}});Nn.addInitHook("addHandler","doubleClickZoom",cl),Nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vo=Ii.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Zr(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}pn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qn(this._map._container,"leaflet-grab"),qn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=rt(this._map.options.maxBounds);this._offsetLimit=I(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var c=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(c),this._prunePositions(c)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,c){return r-(r-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;r.x<c.min.x&&(r.x=this._viscousLimit(r.x,c.min.x)),r.y<c.min.y&&(r.y=this._viscousLimit(r.y,c.min.y)),r.x>c.max.x&&(r.x=this._viscousLimit(r.x,c.max.x)),r.y>c.max.y&&(r.y=this._viscousLimit(r.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,c=Math.round(r/2),m=this._initialWorldOffset,k=this._draggable._newPos.x,F=(k-c+m)%r+c-m,lt=(k+c+m)%r-c-m,$t=Math.abs(F+m)<Math.abs(lt+m)?F:lt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=$t},_onDragEnd:function(r){var c=this._map,m=c.options,k=!m.inertia||r.noInertia||this._times.length<2;if(c.fire("dragend",r),k)c.fire("moveend");else{this._prunePositions(+new Date);var F=this._lastPos.subtract(this._positions[0]),lt=(this._lastTime-this._times[0])/1e3,$t=m.easeLinearity,de=F.multiplyBy($t/lt),be=de.distanceTo([0,0]),Be=Math.min(m.inertiaMaxSpeed,be),We=de.multiplyBy(Be/be),un=Be/(m.inertiaDeceleration*$t),Bn=We.multiplyBy(-un/2).round();!Bn.x&&!Bn.y?c.fire("moveend"):(Bn=c._limitOffset(Bn,c.options.maxBounds),X(function(){c.panBy(Bn,{duration:un,easeLinearity:$t,noMoveStart:!0,animate:!0})}))}}});Nn.addInitHook("addHandler","dragging",Vo),Nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qr=Ii.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Pn(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,c=document.documentElement,m=r.scrollTop||c.scrollTop,k=r.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(k,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var c=this._panKeys={},m=this.keyCodes,k,F;for(k=0,F=m.left.length;k<F;k++)c[m.left[k]]=[-1*r,0];for(k=0,F=m.right.length;k<F;k++)c[m.right[k]]=[r,0];for(k=0,F=m.down.length;k<F;k++)c[m.down[k]]=[0,r];for(k=0,F=m.up.length;k<F;k++)c[m.up[k]]=[0,-1*r]},_setZoomDelta:function(r){var c=this._zoomKeys={},m=this.keyCodes,k,F;for(k=0,F=m.zoomIn.length;k<F;k++)c[m.zoomIn[k]]=r;for(k=0,F=m.zoomOut.length;k<F;k++)c[m.zoomOut[k]]=-r},_addHooks:function(){Pn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var c=r.keyCode,m=this._map,k;if(c in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(k=this._panKeys[c],r.shiftKey&&(k=ft(k).multiplyBy(3)),m.options.maxBounds&&(k=m._limitOffset(ft(k),m.options.maxBounds)),m.options.worldCopyJump){var F=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(k)));m.panTo(F)}else m.panBy(k)}else if(c in this._zoomKeys)m.setZoom(m.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;zr(r)}}});Nn.addInitHook("addHandler","keyboard",Qr),Nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var dr=Ii.extend({addHooks:function(){Pn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var c=ua(r),m=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var k=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),k),zr(r)},_performZoom:function(){var r=this._map,c=r.getZoom(),m=this._map.options.zoomSnap||0;r._stop();var k=this._delta/(this._map.options.wheelPxPerZoomLevel*4),F=4*Math.log(2/(1+Math.exp(-Math.abs(k))))/Math.LN2,lt=m?Math.ceil(F/m)*m:F,$t=r._limitZoom(c+(this._delta>0?lt:-lt))-c;this._delta=0,this._startTime=null,$t&&(r.options.scrollWheelZoom==="center"?r.setZoom(c+$t):r.setZoomAround(this._lastMousePos,c+$t))}});Nn.addInitHook("addHandler","scrollWheelZoom",dr);var Il=600;Nn.mergeOptions({tapHold:qe.touchNative&&qe.safari&&qe.mobile,tapTolerance:15});var Lr=Ii.extend({addHooks:function(){Pn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var c=r.touches[0];this._startPos=this._newPos=new z(c.clientX,c.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Pn(document,"touchend",Pi),Pn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Il),Pn(document,"touchend touchcancel contextmenu",this._cancel,this),Pn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Fn(document,"touchend",Pi),Fn(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Fn(document,"touchend touchcancel contextmenu",this._cancel,this),Fn(document,"touchmove",this._onMove,this)},_onMove:function(r){var c=r.touches[0];this._newPos=new z(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,c){var m=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});m._simulated=!0,c.target.dispatchEvent(m)}});Nn.addInitHook("addHandler","tapHold",Lr),Nn.mergeOptions({touchZoom:qe.touch,bounceAtZoomLimits:!0});var Cr=Ii.extend({addHooks:function(){pn(this._map._container,"leaflet-touch-zoom"),Pn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qn(this._map._container,"leaflet-touch-zoom"),Fn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var c=this._map;if(!(!r.touches||r.touches.length!==2||c._animatingZoom||this._zooming)){var m=c.mouseEventToContainerPoint(r.touches[0]),k=c.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(m.add(k)._divideBy(2))),this._startDist=m.distanceTo(k),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Pn(document,"touchmove",this._onTouchMove,this),Pn(document,"touchend touchcancel",this._onTouchEnd,this),Pi(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var c=this._map,m=c.mouseEventToContainerPoint(r.touches[0]),k=c.mouseEventToContainerPoint(r.touches[1]),F=m.distanceTo(k)/this._startDist;if(this._zoom=c.getScaleZoom(F,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&F<1||this._zoom>c.getMaxZoom()&&F>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,F===1)return}else{var lt=m._add(k)._divideBy(2)._subtract(this._centerPoint);if(F===1&&lt.x===0&&lt.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(lt),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var $t=l(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X($t,this,!0),Pi(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),Fn(document,"touchmove",this._onTouchMove,this),Fn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Nn.addInitHook("addHandler","touchZoom",Cr),Nn.BoxZoom=vn,Nn.DoubleClickZoom=cl,Nn.Drag=Vo,Nn.Keyboard=Qr,Nn.ScrollWheelZoom=dr,Nn.TapHold=Lr,Nn.TouchZoom=Cr,n.Bounds=ht,n.Browser=qe,n.CRS=q,n.Canvas=ds,n.Circle=cr,n.CircleMarker=wr,n.Class=Mt,n.Control=hn,n.DivIcon=bo,n.DivOverlay=fr,n.DomEvent=Fo,n.DomUtil=Ln,n.Draggable=Zr,n.Evented=V,n.FeatureGroup=br,n.GeoJSON=Kr,n.GridLayer=ro,n.Handler=Ii,n.Icon=hs,n.ImageOverlay=Os,n.LatLng=$,n.LatLngBounds=it,n.Layer=ni,n.LayerGroup=_r,n.LineUtil=On,n.Map=Nn,n.Marker=Ti,n.Mixin=ol,n.Path=Er,n.Point=z,n.PolyUtil=pa,n.Polygon=ji,n.Polyline=qr,n.Popup=Mr,n.PosAnimation=Na,n.Projection=Kn,n.Rectangle=Br,n.Renderer=ii,n.SVG=zi,n.SVGOverlay=Ua,n.TileLayer=Qi,n.Tooltip=Rs,n.Transformation=Nt,n.Util=St,n.VideoOverlay=hr,n.bind=l,n.bounds=I,n.canvas=xo,n.circle=eo,n.circleMarker=ma,n.control=yr,n.divIcon=wo,n.extend=o,n.featureGroup=ja,n.geoJSON=Jr,n.geoJson=xi,n.gridLayer=Xr,n.icon=za,n.imageOverlay=xr,n.latLng=D,n.latLngBounds=rt,n.layerGroup=al,n.map=Oa,n.marker=ga,n.point=ft,n.polygon=Ds,n.polyline=ll,n.popup=_o,n.rectangle=Tr,n.setOptions=R,n.stamp=p,n.svg=ri,n.svgOverlay=qa,n.tileLayer=ti,n.tooltip=va,n.transformation=G,n.version=i,n.videoOverlay=$o;var Fs=window.L;n.noConflict=function(){return window.L=Fs,this},window.L=n})})(yd,yd.exports);var Di=yd.exports;const Zt=k1(Di);var G0={exports:{}};(function(t,e){(function(n,i){i(e)})(Eo,function(n){var i=typeof window<"u"?window:typeof Eo<"u"?Eo:typeof self<"u"?self:{};function o(v,b){return v(b={exports:{}},b.exports),b.exports}var a=o(function(v,b){(function(w){const S={escape:function(A){return A.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:x,mimeType:function(A){return A=x(A).toLowerCase(),function(){var H="application/font-woff",V="image/jpeg";return{woff:H,woff2:H,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:V,jpeg:V,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[A]||""},dataAsUrl:function(A,H){return`data:${H};base64,`+A},isDataUrl:function(A){return A.search(/^(data:)/)!==-1},canvasToBlob:function(A){return A.toBlob?new Promise(function(V){A.toBlob(V)}):(H=A,new Promise(function(V){const z=xt(H.toDataURL().split(",")[1]);var mt=z.length;const ft=new Uint8Array(mt);for(let ht=0;ht<mt;ht++)ft[ht]=z.charCodeAt(ht);V(new Blob([ft],{type:"image/png"}))}));var H},resolveUrl:function(A,H){const V=document.implementation.createHTMLDocument(),z=V.createElement("base"),mt=(V.head.appendChild(z),V.createElement("a"));return V.body.appendChild(mt),z.href=H,mt.href=A,mt.href},getAndEncode:function(A){let H=At.impl.urlCache.find(function(V){return V.url===A});return H||(H={url:A,promise:null},At.impl.urlCache.push(H)),H.promise===null&&(At.impl.options.cacheBust&&(A+=(/\?/.test(A)?"&":"?")+new Date().getTime()),H.promise=new Promise(function(V){const z=At.impl.options.httpTimeout,mt=new XMLHttpRequest;let ft;var ht;function I(it){console.error(it),V("")}mt.onreadystatechange=function(){if(mt.readyState===4)if(mt.status!==200)ft?V(ft):I(`cannot fetch resource: ${A}, status: `+mt.status);else{const it=new FileReader;it.onloadend=function(){var rt=it.result.split(/,/)[1];V(rt)},it.readAsDataURL(mt.response)}},mt.ontimeout=function(){ft?V(ft):I(`timeout of ${z}ms occured while fetching resource: `+A)},mt.responseType="blob",mt.timeout=z,At.impl.options.useCredentials&&(mt.withCredentials=!0),mt.open("GET",A,!0),mt.send(),At.impl.options.imagePlaceholder&&(ht=At.impl.options.imagePlaceholder.split(/,/))&&ht[1]&&(ft=ht[1])})),H.promise},uid:function(){let A=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+A++}}(),delay:function(A){return function(H){return new Promise(function(V){setTimeout(function(){V(H)},A)})}},asArray:function(A){const H=[],V=A.length;for(let z=0;z<V;z++)H.push(A[z]);return H},escapeXhtml:function(A){return A.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(A){return A!=="data:,"?new Promise(function(H,V){const z=new Image;At.impl.options.useCredentials&&(z.crossOrigin="use-credentials"),z.onload=function(){H(z)},z.onerror=V,z.src=A}):Promise.resolve()},width:function(A){var H=j(A,"border-left-width"),V=j(A,"border-right-width");return A.scrollWidth+H+V},height:function(A){var H=j(A,"border-top-width"),V=j(A,"border-bottom-width");return A.scrollHeight+H+V}};function x(A){return(A=/\.([^\.\/]*?)(\?|$)/g.exec(A))?A[1]:""}function j(A,H){const V=Dt(A).getPropertyValue(H);return parseFloat(V.replace("px",""))}const R=function(){const A=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(mt,ft,ht){return H(mt)?Promise.resolve(mt).then(V).then(function(I){let it=Promise.resolve(mt);return I.forEach(function(rt){it=it.then(function($){return z($,rt,ft,ht)})}),it}):Promise.resolve(mt)},shouldProcess:H,impl:{readUrls:V,inline:z}};function H(mt){return mt.search(A)!==-1}function V(mt){const ft=[];for(var ht;(ht=A.exec(mt))!==null;)ft.push(ht[1]);return ft.filter(function(I){return!S.isDataUrl(I)})}function z(mt,ft,ht,I){return Promise.resolve(ft).then(function(it){return ht?S.resolveUrl(it,ht):it}).then(I||S.getAndEncode).then(function(it){return S.dataAsUrl(it,S.mimeType(ft))}).then(function(it){return mt.replace((rt=ft,new RegExp(`(url\\(['"]?)(${S.escape(rt)})(['"]?\\))`,"g")),`$1${it}$3`);var rt})}}(),U={resolveAll:function(){return N().then(function(A){return Promise.all(A.map(function(H){return H.resolve()}))}).then(function(A){return A.join(`
`)})},impl:{readAll:N}};function N(){return Promise.resolve(S.asArray(document.styleSheets)).then(function(H){const V=[];return H.forEach(function(z){if(Object.getPrototypeOf(z).hasOwnProperty("cssRules"))try{S.asArray(z.cssRules||[]).forEach(V.push.bind(V))}catch(mt){console.log("Error while reading CSS rules from "+z.href,mt.toString())}}),V}).then(function(H){return H.filter(function(V){return V.type===CSSRule.FONT_FACE_RULE}).filter(function(V){return R.shouldProcess(V.style.getPropertyValue("src"))})}).then(function(H){return H.map(A)});function A(H){return{resolve:function(){var V=(H.parentStyleSheet||{}).href;return R.inlineAll(H.cssText,V)},src:function(){return H.style.getPropertyValue("src")}}}}const Z={inlineAll:function A(H){return H instanceof Element?function(V){const z=V.style.getPropertyValue("background");return z?R.inlineAll(z).then(function(mt){V.style.setProperty("background",mt,z)}).then(function(){return V}):Promise.resolve(V)}(H).then(function(){return H instanceof HTMLImageElement?Y(H).inline():Promise.all(S.asArray(H.childNodes).map(function(V){return A(V)}))}):Promise.resolve(H)},impl:{newImage:Y}};function Y(A){return{inline:function(H){return S.isDataUrl(A.src)?Promise.resolve():Promise.resolve(A.src).then(H||S.getAndEncode).then(function(V){return S.dataAsUrl(V,S.mimeType(A.src))}).then(function(V){return new Promise(function(z){A.onload=z,A.onerror=z,A.src=V})})}}}const kt={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},At={toSvg:gt,toPng:function(A,H){return(H=H||{}).raster=!0,_t(A,H).then(function(V){return V.toDataURL()})},toJpeg:function(A,H){return(H=H||{}).raster=!0,_t(A,H).then(function(V){return V.toDataURL("image/jpeg",H.quality||1)})},toBlob:function(A,H){return(H=H||{}).raster=!0,_t(A,H).then(S.canvasToBlob)},toPixelData:function(A,H){return(H=H||{}).raster=!0,_t(A,H).then(function(V){return V.getContext("2d").getImageData(0,0,S.width(A),S.height(A)).data})},toCanvas:function(A,H){return(H=H||{}).raster=!0,_t(A,H||{})},impl:{fontFaces:U,images:Z,util:S,inliner:R,urlCache:[],options:{}}},Dt=(v.exports=At,w.getComputedStyle||window.getComputedStyle),xt=w.atob||window.atob;function gt(A,H){var V=H=H||{};return V.imagePlaceholder===void 0?At.impl.options.imagePlaceholder=kt.imagePlaceholder:At.impl.options.imagePlaceholder=V.imagePlaceholder,V.cacheBust===void 0?At.impl.options.cacheBust=kt.cacheBust:At.impl.options.cacheBust=V.cacheBust,V.useCredentials===void 0?At.impl.options.useCredentials=kt.useCredentials:At.impl.options.useCredentials=V.useCredentials,Promise.resolve(A).then(function(z){return function mt(ft,ht,I,it,rt=null){return I||!ht||ht(ft)?Promise.resolve(ft).then(function($){return $ instanceof HTMLCanvasElement?S.makeImage($.toDataURL()):$.nodeName==="IFRAME"?html2canvas($.contentDocument.body).then(D=>D.toDataURL()).then(S.makeImage):$.cloneNode(!1)}).then(function($){return function(D,q){const dt=D.childNodes;return dt.length===0?Promise.resolve(q):function(ct,Et){const Nt=Dt(D);let G=Promise.resolve();return Et.forEach(function(tt){G=G.then(function(){return mt(tt,ht,!1,it,Nt)}).then(function(yt){yt&&ct.appendChild(yt)})}),G}(q,S.asArray(dt)).then(function(){return q})}(ft,$)}).then(function($){return function(D,q,dt){return q instanceof Element?Promise.resolve().then(function(){(function(ct,Et){const Nt=Dt(ct);Nt.cssText?(Et.style.cssText=Nt.cssText,function(G,tt){tt.font=G.font,tt.fontFamily=G.fontFamily,tt.fontFeatureSettings=G.fontFeatureSettings,tt.fontKerning=G.fontKerning,tt.fontSize=G.fontSize,tt.fontStretch=G.fontStretch,tt.fontStyle=G.fontStyle,tt.fontVariant=G.fontVariant,tt.fontVariantCaps=G.fontVariantCaps,tt.fontVariantEastAsian=G.fontVariantEastAsian,tt.fontVariantLigatures=G.fontVariantLigatures,tt.fontVariantNumeric=G.fontVariantNumeric,tt.fontVariationSettings=G.fontVariationSettings,tt.fontWeight=G.fontWeight}(Nt,Et.style)):(dt?function(G,tt,yt,vt){const J=yt.style,qt=G.style;for(var te of tt){var Vt=tt.getPropertyValue(te),ee=qt.getPropertyValue(te),Rt=(qt.setProperty(te,vt?"initial":"unset"),tt.getPropertyValue(te));Rt!==Vt?J.setProperty(te,Vt):J.removeProperty(te),qt.setProperty(te,ee)}}(ct,Nt,Et,I):function(G,tt,yt){const vt=function(qt){if(Mt[qt])return Mt[qt];St||((St=document.createElement("iframe")).style.visibility="hidden",St.style.position="fixed",document.body.appendChild(St),St.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const te=document.createElement(qt),Vt=(St.contentWindow.document.body.appendChild(te),te.textContent=".",St.contentWindow.getComputedStyle(te)),ee={};return S.asArray(Vt).forEach(function(Rt){ee[Rt]=Rt==="width"||Rt==="height"?"auto":Vt.getPropertyValue(Rt)}),St.contentWindow.document.body.removeChild(te),Mt[qt]=ee}(yt.tagName),J=yt.style;S.asArray(G).forEach(function(qt){var te=G.getPropertyValue(qt);(te!==vt[qt]||tt&&te!==tt.getPropertyValue(qt))&&J.setProperty(qt,te,G.getPropertyPriority(qt))})}(Nt,rt,Et),I&&(["inset-block","inset-block-start","inset-block-end"].forEach(G=>Et.style.removeProperty(G)),["left","right","top","bottom"].forEach(G=>{Et.style.getPropertyValue(G)&&Et.style.setProperty(G,"0px")})))})(D,q)}).then(function(){[":before",":after"].forEach(function(ct){(function(Et){const Nt=Dt(D,Et),G=Nt.getPropertyValue("content");if(G!==""&&G!=="none"){const tt=S.uid(),yt=q.getAttribute("class"),vt=(yt&&q.setAttribute("class",yt+" "+tt),document.createElement("style"));vt.appendChild(function(){const J=`.${tt}:`+Et,qt=(Nt.cssText?function(){return`${Nt.cssText} content: ${Nt.getPropertyValue("content")};`}:function(){return S.asArray(Nt).map(function(te){return te+": "+Nt.getPropertyValue(te)+(Nt.getPropertyPriority(te)?" !important":"")}).join("; ")+";"})();return document.createTextNode(J+`{${qt}}`)}()),q.appendChild(vt)}})(ct)})}).then(function(){D instanceof HTMLTextAreaElement&&(q.innerHTML=D.value),D instanceof HTMLInputElement&&q.setAttribute("value",D.value)}).then(function(){q instanceof SVGElement&&(q.setAttribute("xmlns","http://www.w3.org/2000/svg"),q instanceof SVGRectElement&&["width","height"].forEach(function(ct){const Et=q.getAttribute(ct);Et&&q.style.setProperty(ct,Et)}))}).then(function(){return q}):q}(ft,$,it)}):Promise.resolve()}(z,H.filter,!0,!H.raster)}).then(zt).then(X).then(function(z){H.bgcolor&&(z.style.backgroundColor=H.bgcolor),H.width&&(z.style.width=H.width+"px"),H.height&&(z.style.height=H.height+"px"),H.style&&Object.keys(H.style).forEach(function(ft){z.style[ft]=H.style[ft]});let mt=null;return typeof H.onclone=="function"&&(mt=H.onclone(z)),Promise.resolve(mt).then(function(){return z})}).then(function(z){return z=z,mt=H.width||S.width(A),ft=H.height||S.height(A),Promise.resolve(z).then(function(ht){return ht.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(ht)}).then(S.escapeXhtml).then(function(ht){return`<foreignObject x="0" y="0" width="100%" height="100%">${ht}</foreignObject>`}).then(function(ht){return`<svg xmlns="http://www.w3.org/2000/svg" width="${mt}" height="${ft}">${ht}</svg>`}).then(function(ht){return"data:image/svg+xml;charset=utf-8,"+ht});var mt,ft}).then(function(z){return At.impl.urlCache=[],z})}function _t(A,H){return gt(A,H).then(S.makeImage).then(S.delay(0)).then(function(V){var z=typeof H.scale!="number"?1:H.scale;const mt=function(ht,I){const it=document.createElement("canvas");if(it.width=(H.width||S.width(ht))*I,it.height=(H.height||S.height(ht))*I,H.bgcolor){const rt=it.getContext("2d");rt.fillStyle=H.bgcolor,rt.fillRect(0,0,it.width,it.height)}return it}(A,z),ft=mt.getContext("2d");return ft.mozImageSmoothingEnabled=!1,ft.msImageSmoothingEnabled=!1,ft.imageSmoothingEnabled=!1,V&&(ft.scale(z,z),ft.drawImage(V,0,0)),St&&(document.body.removeChild(St),St=null,W&&clearTimeout(W),W=setTimeout(()=>{W=null,Mt={}},2e4)),mt})}function zt(A){return U.resolveAll().then(function(H){const V=document.createElement("style");return A.appendChild(V),V.appendChild(document.createTextNode(H)),A})}function X(A){return Z.inlineAll(A).then(function(){return A})}let W=null,St=null,Mt={}})(i)}),l=o(function(v,b){(function(){function w(U,N,Z){var Y=new XMLHttpRequest;Y.open("GET",U),Y.responseType="blob",Y.onload=function(){R(Y.response,N,Z)},Y.onerror=function(){console.error("could not download file")},Y.send()}function S(U){var N=new XMLHttpRequest;N.open("HEAD",U,!1);try{N.send()}catch{}return 200<=N.status&&299>=N.status}function x(U){try{U.dispatchEvent(new MouseEvent("click"))}catch{var N=document.createEvent("MouseEvents");N.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),U.dispatchEvent(N)}}var j=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof i=="object"&&i.global===i?i:void 0,R=j.saveAs||(typeof window!="object"||window!==j?function(){}:"download"in HTMLAnchorElement.prototype?function(U,N,Z){var Y=j.URL||j.webkitURL,kt=document.createElement("a");N=N||U.name||"download",kt.download=N,kt.rel="noopener",typeof U=="string"?(kt.href=U,kt.origin===location.origin?x(kt):S(kt.href)?w(U,N,Z):x(kt,kt.target="_blank")):(kt.href=Y.createObjectURL(U),setTimeout(function(){Y.revokeObjectURL(kt.href)},4e4),setTimeout(function(){x(kt)},0))}:"msSaveOrOpenBlob"in navigator?function(U,N,Z){if(N=N||U.name||"download",typeof U!="string")navigator.msSaveOrOpenBlob(function(kt,At){return At===void 0?At={autoBom:!1}:typeof At!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),At={autoBom:!At}),At.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(kt.type)?new Blob(["\uFEFF",kt],{type:kt.type}):kt}(U,Z),N);else if(S(U))w(U,N,Z);else{var Y=document.createElement("a");Y.href=U,Y.target="_blank",setTimeout(function(){x(Y)})}}:function(U,N,Z,Y){if((Y=Y||open("","_blank"))&&(Y.document.title=Y.document.body.innerText="downloading..."),typeof U=="string")return w(U,N,Z);var kt=U.type==="application/octet-stream",At=/constructor/i.test(j.HTMLElement)||j.safari,Dt=/CriOS\/[\d]+/.test(navigator.userAgent);if((Dt||kt&&At)&&typeof FileReader=="object"){var xt=new FileReader;xt.onloadend=function(){var zt=xt.result;zt=Dt?zt:zt.replace(/^data:[^;]*;/,"data:attachment/file;"),Y?Y.location.href=zt:location=zt,Y=null},xt.readAsDataURL(U)}else{var gt=j.URL||j.webkitURL,_t=gt.createObjectURL(U);Y?Y.location=_t:location.href=_t,Y=null,setTimeout(function(){gt.revokeObjectURL(_t)},4e4)}});j.saveAs=R.saveAs=R,v.exports=R})()}),f=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(v){var b=v.node,w=v.error;return console.warn("Map node is very big "+b.scrollWidth+"x"+b.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(w)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var v=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S={};for(var x in this.options)w.hasOwnProperty(x)?S[x]=w[x]:S[x]=this.options[x];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return v._getPixelData(S)}).then(function(j){return v._setElementsVisible(!0),v._toCanvas(j,S)}).then(function(j){return b==="image"?v._canvasToImage(j,S):b==="canvas"?j:v._canvasToBlob(j,S)}).then(function(j){return v._screenState.status=1,v._map.fire("simpleMapScreenshoter.done"),j}).catch(function(j){return v._setElementsVisible(!0),v._screenState.status=1,v._map.fire("simpleMapScreenshoter.error",{e:j}),Promise.reject(j)}),this._screenState.promise)},_setElementsVisible:function(){var v=this,b=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(w){var S=v._map._container.querySelectorAll(w),x=!0,j=!1,R=void 0;try{for(var U,N=S[Symbol.iterator]();!(x=(U=N.next()).done);x=!0)U.value.style.opacity=b===!1?0:1}catch(Z){j=!0,R=Z}finally{try{!x&&N.return&&N.return()}finally{if(j)throw R}}})},_canvasToImage:function(v,b){var w=b.mimeType,S=v.toDataURL(w);return S.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(S)},_canvasToBlob:function(v,b){var w=b.mimeType;return new Promise(function(S,x){v.toBlob(function(j){S(j)},w)})},_toCanvas:function(v,b){var w=b.captionOffset,S=b.caption,x=b.captionFontSize,j=b.captionFont,R=b.captionColor,U=b.captionBgColor,N=this._node,Z=N.screenHeight,Y=N.screenWidth,kt=document.createElement("canvas");kt.width=Y,kt.height=Z;for(var At=kt.getContext("2d"),Dt=At.createImageData(Y,Z),xt=0;xt<v.length;++xt)Dt.data[xt]=v[xt];At.putImageData(Dt,0,0),Dt=null;var gt=document.createElement("canvas"),_t=gt.getContext("2d"),zt=0,X=0,W=Z,St=Y;if(this.options.cropImageByInnerWH===!0){for(var Mt=[],A=0,H=0;H<Z;++H){A=0;for(var V=0;V<Y;++V)v[4*H*Y+4*V+4]===0&&A++;A===Y&&Mt.push(H)}var z=this._getMinAndMaxOnValuesBreak(Mt);zt=z.min;for(var mt=Y,ft=z.max,ht=[],I=0,it=X;it<mt;++it){I=0;for(var rt=0;rt<Z;++rt)v[4*rt*Y+4*it+4]===0&&I++;I===Z&&ht.push(it)}var $=this._getMinAndMaxOnValuesBreak(ht);X=$.min,mt=$.max,(X===0&&mt===0||mt===null)&&(mt=Y),(zt===0&&ft===0||ft===null)&&(ft=Z),this.options.debugMode===!0&&(console.log("emptyYLine",Mt),console.log("minMaxY",z),console.log("emptyXLine",ht),console.log("minMaxX",$),console.log("debugX",{}),console.log("debugY",{})),zt===0&&ft===Z&&X===0&&mt===Y||(zt+=this.options.onCropBorderSize,ft-=this.options.onCropBorderSize,X+=this.options.onCropBorderSize,mt-=this.options.onCropBorderSize),W=ft-zt,St=mt-X,gt.width=St,gt.height=W}else gt.width=St,gt.height=W;var D=null;return S&&(D=typeof S=="function"?S.call(this):S),D!==null&&(gt.height=gt.height+(w+x+w),_t.beginPath(),_t.rect(0,0,gt.width,gt.height),_t.fillStyle=U,_t.fill(),_t.save()),_t.drawImage(kt,X,zt,St,W,0,0,St,W),D!==null&&(_t.font=x+"px "+j,_t.fillStyle=R,_t.fillText(D,w,W+w+x)),Promise.resolve(gt)},_getMinAndMaxOnValuesBreak:function(v){for(var b=0,w=0,S=!1,x=1;x<v.length;x++){if(v[x]-1!==v[x-1]){w=v[x],S=!0;break}b=v[x]}return S===!1&&v[0]>1?(b=0,w=v[0]):S===!1&&(b=v[v.length-1]||0,w=null),{min:b,max:w}},_getPixelData:function(v){var b=this,w=v.domtoimageOptions,S=w===void 0?{}:w;return this._getPixelDataOfNormalMap(S).catch(function(x){return console.warn("May be map size very big on that zoom level, we have error:",x.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),b._getPixelDataOfBigMap(S)})},_getPixelDataOfNormalMap:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=this._map.getContainer();return this._node={node:b,screenHeight:b.scrollHeight,screenWidth:b.scrollWidth},a.toPixelData(b,v)},_getPixelDataOfBigMap:function(){var v=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=this._map.getContainer(),S=this._map.getPane("mapPane");S.style.width=2*w.clientWidth+"px",S.style.height=2*w.clientHeight+"px",S.style.overflow="hidden";var x=function(){S.style.width="initial",S.style.height="initial",S.style.overflow="initial"};return this._node={node:w,screenHeight:w.scrollHeight,screenWidth:w.scrollWidth},a.toPixelData(w,b).then(function(j){return x(),j}).catch(function(j){return x(),w.scrollHeight>=4e3||w.scrollWidth>=4e3?v.options.onPixelDataFail({plugin:v,node:w,mapPane:S,error:j,domtoimageOptions:b}):Promise.reject(j)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var v=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,b=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");w.appendChild(document.createTextNode(v)),b.appendChild(w)},_onScreenBtn:function(){var v=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(b){var w=typeof v.options.screenName=="function"?v.options.screenName.call(v):v.options.screenName;l.saveAs(b,w+".png")}).catch(function(b){v._map.fire("simpleMapScreenshoter.error",{e:b})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var v=this;return new Promise(function(b){var w=setInterval(function(){v._interaction||(b(),clearInterval(w))},100)})}}),p=(L.Control.SimpleMapScreenshoter=f,L.simpleMapScreenshoter=function(v){return new L.Control.SimpleMapScreenshoter(v)},f);n.default=p,n.SimpleMapScreenshoter=f,Object.defineProperty(n,"__esModule",{value:!0})})})(G0,G0.exports);const tw={class:"h-full flex flex-col bg-white overflow-y-auto"},ew={class:"p-3 border-b border-gray-200"},nw={class:"grid grid-cols-4 gap-1"},iw=["onClick","title"],rw=["innerHTML"],sw={key:0,class:"flex-1 overflow-y-auto"},ow={class:"p-3 border-b border-gray-200"},aw={class:"p-3"},lw={class:"grid grid-cols-6 gap-2 mb-4"},uw=["onClick","title"],cw={key:0,class:"space-y-4"},hw={class:"flex items-center gap-4"},fw={class:"flex items-center gap-2"},dw={class:"flex items-center gap-4"},pw=["value"],gw={key:0,class:"flex items-center gap-4"},mw={class:"flex items-center gap-2"},vw={key:1,class:"space-y-4"},yw={class:"flex items-center gap-4"},_w={class:"flex items-center gap-2"},bw={class:"flex items-center gap-4"},ww={class:"flex items-center gap-2"},xw={class:"flex items-center gap-4"},Lw={class:"flex items-center gap-2"},Cw={class:"flex items-center gap-4"},Pw={class:"flex items-center gap-2"},kw={class:"flex items-center gap-4"},Sw={class:"flex items-center gap-2"},Ew=["onClick","title"],Aw=["innerHTML"],Mw={key:1,class:"p-3 border-t border-gray-200"},Bw={class:"mt-3"},Tw={key:0},Dw={class:"grid grid-cols-2 gap-4"},Nw={class:"text-sm font-medium text-gray-500"},Ow={class:"text-sm font-medium text-gray-500"},Rw={class:"text-sm font-medium text-gray-500"},Iw={class:"text-sm font-medium text-gray-500"},Fw={class:"text-sm font-medium text-gray-500"},jw={class:"text-sm font-medium text-gray-500"},zw={class:"text-sm font-medium text-gray-500"},Uw={class:"text-sm font-medium text-gray-500"},qw={class:"text-sm font-medium text-gray-500"},$w={class:"text-sm font-medium text-gray-500"},Vw={class:"text-sm font-medium text-gray-500"},Hw={class:"text-sm font-medium text-gray-500"},Gw={class:"text-sm font-medium text-gray-500"},Ww={class:"text-sm font-medium text-gray-500"},Zw={class:"text-sm font-medium text-gray-500"},Kw={class:"text-sm font-medium text-gray-500"},Yw={key:1,class:"text-center text-sm text-gray-500"},Jw={key:2,class:"p-3 border-t border-gray-200"},Xw={class:"mt-3"},Qw={class:"mb-4"},tx={class:"grid grid-cols-2 gap-2"},ex={class:"grid grid-cols-2 gap-2"},nx=Ls({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(t,{emit:e}){const n=t,i=e,o=Fe(null),a=Fe("Double-cliquez pour éditer"),l=Fe("#3B82F6"),f=Fe(.2),p=Fe("#2563EB"),v=Fe(2),b=Fe("solid"),w=Fe("#000000"),S=Fe("Arial, sans-serif"),x=Fe("center"),j=Fe(!1),R=Fe(!1),U=Fe({style:!1,properties:!1,samplePoints:!1}),N=Fe({radius:4,color:"#FF4500",fillColor:"#FF4500",fillOpacity:.6,weight:2,opacity:.8}),Z=Fe({radius:6,weight:3,opacity:1,fillOpacity:1}),Y=zn(()=>{var $,D;return!(($=n.selectedShape)!=null&&$.properties)||n.selectedShape.properties.type!=="TextRectangle"?"center":((D=n.selectedShape.properties.style)==null?void 0:D.textAlign)||"center"});Rr(()=>n.selectedShape,$=>{var D,q,dt;if(!$){o.value=null,x.value="center",j.value=!1,R.value=!1,a.value="Double-cliquez pour éditer";return}if(console.log("[DrawingTools] Changement de forme sélectionnée",{newShape:$,properties:$==null?void 0:$.properties}),$){if(o.value={...$.properties},((D=$.properties)==null?void 0:D.type)==="TextRectangle"){const ct=((q=$.properties)==null?void 0:q.style)||{};w.value=ct.textColor||"#000000",S.value=ct.fontFamily||"Arial, sans-serif",x.value=ct.textAlign||"center",j.value=ct.bold||!1,R.value=ct.italic||!1,a.value=$.properties.text||"Double-cliquez pour éditer",console.log("[DrawingTools] Initialisation du TextRectangle",{text:a.value,style:ct})}((dt=$.properties)==null?void 0:dt.type)==="ElevationLine"&&(N.value={...$.properties.samplePointStyle},Z.value={...$.properties.minMaxPointStyle})}else o.value=null},{immediate:!0}),Rr(()=>{var $,D;return(D=($=n.selectedShape)==null?void 0:$.properties)==null?void 0:D.text},$=>{var D,q;((q=(D=n.selectedShape)==null?void 0:D.properties)==null?void 0:q.type)==="TextRectangle"&&(console.log("[DrawingTools] Mise à jour du texte :",$),a.value=$||"Double-cliquez pour éditer")},{immediate:!0}),Rr(()=>{var $,D;return(D=($=n.selectedShape)==null?void 0:$.properties)==null?void 0:D.style},$=>{var D;(D=n.selectedShape)!=null&&D.properties&&n.selectedShape.properties.type==="TextRectangle"&&$&&(w.value=$.textColor||"#000000",S.value=$.fontFamily||"Arial, sans-serif",j.value=$.bold||!1,R.value=$.italic||!1)},{deep:!0});const kt=($,D)=>{let q=null;return(...dt)=>{q!==null&&clearTimeout(q),q=window.setTimeout(()=>{$(...dt),q=null},D)}},At=($,D)=>{if($===D)return!0;if($===null||D===null)return!1;if(typeof $!="object"||typeof D!="object")return $===D;const q=Object.keys($),dt=Object.keys(D);if(q.length!==dt.length)return!1;for(const ct of q)if(!dt.includes(ct)||!At($[ct],D[ct]))return!1;return!0},Dt=kt(($,D)=>{console.log("[DrawingTools] Changement détecté dans localProperties",{newProperties:$,oldProperties:D,selectedShape:n.selectedShape})},300);Rr(()=>o.value,($,D)=>{$&&D&&!At($,D)&&Dt($,D)},{deep:!0});const xt=$=>({Circle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" /></svg>',Semicircle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 12a10 10 0 0 1 20 0" /></svg>',Rectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" /></svg>',Polygon:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3l9 7-3 9H6l-3-9 9-7z" /></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6" /><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /></svg>',Line:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 19l18-14" /></svg>',TextRectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" /><path d="M9 8h6m-3 0v8" /></svg>',ElevationLine:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h3l3-9 6 18 3-9h3" /></svg>'})[$]||"",gt=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimétrique"},{type:"TextRectangle",label:"Texte"},{type:"delete",label:"Supprimer"}],_t=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],zt=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],X=[{value:"left",label:"Aligné à gauche",icon:"&#8678;"},{value:"center",label:"Centré",icon:"&#8645;"},{value:"right",label:"Aligné à droite",icon:"&#8680;"}],W=zn(()=>{var D,q;const $=(q=(D=n.selectedShape)==null?void 0:D.properties)==null?void 0:q.type;return console.log("[DrawingTools] Calcul de showFillOptions",{shapeType:$,selectedShape:n.selectedShape}),$?["Circle","Rectangle","Polygon","Semicircle"].includes($)&&$!=="ElevationLine":!1}),St=$=>{U.value[$]=!U.value[$]},Mt=$=>{switch($){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},A=$=>{var D,q;p.value=$,(W.value||((D=o.value)==null?void 0:D.type)==="TextRectangle")&&(l.value=$),H({strokeColor:$,fillColor:W.value||((q=o.value)==null?void 0:q.type)==="TextRectangle"?$:void 0})},H=$=>{const D={...$};$.strokeStyle&&(D.dashArray=Mt($.strokeStyle)),$.fillOpacity!==void 0&&(D.fillOpacity=parseFloat($.fillOpacity)),$.strokeOpacity!==void 0&&(D.strokeOpacity=parseFloat($.strokeOpacity)),$.strokeWidth!==void 0&&(D.weight=parseInt($.strokeWidth)),$.strokeColor&&(D.color=$.strokeColor),i("style-update",D)},V=$=>{var q,dt,ct,Et,Nt,G,tt;if(((dt=(q=n.selectedShape)==null?void 0:q.properties)==null?void 0:dt.type)!=="TextRectangle")return;const D={textColor:(ct=n.selectedShape.properties.style)==null?void 0:ct.textColor,fontFamily:(Et=n.selectedShape.properties.style)==null?void 0:Et.fontFamily,textAlign:(Nt=n.selectedShape.properties.style)==null?void 0:Nt.textAlign,bold:(G=n.selectedShape.properties.style)==null?void 0:G.bold,italic:(tt=n.selectedShape.properties.style)==null?void 0:tt.italic,...$};i("style-update",D)},z=()=>{j.value=!j.value,V({bold:j.value})},mt=()=>{R.value=!R.value,V({italic:R.value})},ft=$=>$?$>=1e3?`${($/1e3).toFixed(2)} km`:`${$.toFixed(2)} m`:"0 m",ht=$=>$?`${($/1e4).toFixed(2)} ha`:"0 ha",I=$=>$?`${(($%360+360)%360).toFixed(1)}°`:"0°",it=()=>{var $,D;if(((D=($=n.selectedShape)==null?void 0:$.properties)==null?void 0:D.type)==="ElevationLine"){const q={...N.value,fillColor:N.value.color};n.selectedShape.layer.setSamplePointStyle(q)}},rt=()=>{var $,D;((D=($=n.selectedShape)==null?void 0:$.properties)==null?void 0:D.type)==="ElevationLine"&&n.selectedShape.layer.setMinMaxPointStyle(Z.value)};return($,D)=>(se(),ce("div",tw,[D[74]||(D[74]=M("div",{class:"p-3 bg-gray-50 border-b border-gray-200"},[M("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),M("div",ew,[M("div",nw,[(se(!0),ce(_n,null,Gn(gt.filter(q=>q.type!=="delete"),q=>(se(),ce("button",{key:q.type,class:Oi(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":$.currentTool===q.type}]),onClick:dt=>$.$emit("tool-change",q.type),title:q.label},[M("span",{class:"icon",innerHTML:xt(q.type)},null,8,rw)],10,iw))),128))]),$.selectedShape?(se(),ce("button",{key:0,class:Oi(["w-full mt-2 p-2 rounded border border-red-200 bg-red-50 text-red-600 hover:bg-red-100",{"bg-red-100":$.currentTool==="delete"}]),onClick:D[0]||(D[0]=q=>$.$emit("delete-shape")),title:"Supprimer la forme"},D[33]||(D[33]=[M("svg",{class:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),2)):nn("",!0)]),$.selectedShape&&o.value?(se(),ce("div",sw,[M("div",ow,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:D[1]||(D[1]=q=>St("style"))},[D[35]||(D[35]=M("span",null,"Style",-1)),(se(),ce("svg",{class:Oi(["w-4 h-4",{"rotate-180":!U.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[34]||(D[34]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),gn(M("div",aw,[M("div",lw,[(se(),ce(_n,null,Gn(_t,q=>M("button",{key:q,class:"w-8 h-8 rounded-full",style:Uh({backgroundColor:q}),onClick:dt=>A(q),title:q},null,12,uw)),64))]),o.value.type!=="TextRectangle"?(se(),ce("div",cw,[M("div",hw,[D[36]||(D[36]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),M("div",fw,[gn(M("input",{type:"color","onUpdate:modelValue":D[2]||(D[2]=q=>p.value=q),class:"w-16 h-8 rounded border",onChange:D[3]||(D[3]=q=>H({strokeColor:p.value})),title:"Couleur du contour"},null,544),[[Hn,p.value]]),gn(M("input",{type:"range","onUpdate:modelValue":D[4]||(D[4]=q=>v.value=q),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:D[5]||(D[5]=q=>H({strokeWidth:v.value})),title:"Épaisseur du contour"},null,544),[[Hn,v.value]])])]),M("div",dw,[D[37]||(D[37]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),gn(M("select",{"onUpdate:modelValue":D[6]||(D[6]=q=>b.value=q),class:"w-full rounded border",onChange:D[7]||(D[7]=q=>H({strokeStyle:b.value}))},[(se(),ce(_n,null,Gn(zt,q=>M("option",{key:q.value,value:q.value},Pe(q.label),9,pw)),64))],544),[[$s,b.value]])]),W.value?(se(),ce("div",gw,[D[38]||(D[38]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),M("div",mw,[gn(M("input",{type:"color","onUpdate:modelValue":D[8]||(D[8]=q=>l.value=q),class:"w-16 h-8 rounded border",onChange:D[9]||(D[9]=q=>H({fillColor:l.value})),title:"Couleur de remplissage"},null,544),[[Hn,l.value]]),gn(M("input",{type:"range","onUpdate:modelValue":D[10]||(D[10]=q=>f.value=q),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:D[11]||(D[11]=q=>H({fillOpacity:f.value})),title:"Opacité du remplissage"},null,544),[[Hn,f.value]])])])):nn("",!0)])):nn("",!0),o.value.type==="TextRectangle"?(se(),ce("div",vw,[M("div",yw,[D[39]||(D[39]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),M("div",_w,[gn(M("input",{type:"color","onUpdate:modelValue":D[12]||(D[12]=q=>p.value=q),class:"w-16 h-8 rounded border",onChange:D[13]||(D[13]=q=>H({strokeColor:p.value})),title:"Couleur du contour"},null,544),[[Hn,p.value]]),gn(M("input",{type:"range","onUpdate:modelValue":D[14]||(D[14]=q=>v.value=q),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:D[15]||(D[15]=q=>H({strokeWidth:v.value})),title:"Épaisseur du contour"},null,544),[[Hn,v.value]])])]),M("div",bw,[D[40]||(D[40]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),M("div",ww,[gn(M("input",{type:"color","onUpdate:modelValue":D[16]||(D[16]=q=>l.value=q),class:"w-16 h-8 rounded border",onChange:D[17]||(D[17]=q=>H({fillColor:l.value})),title:"Couleur de remplissage"},null,544),[[Hn,l.value]]),gn(M("input",{type:"range","onUpdate:modelValue":D[18]||(D[18]=q=>f.value=q),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:D[19]||(D[19]=q=>H({fillOpacity:f.value})),title:"Opacité du remplissage"},null,544),[[Hn,f.value]])])]),M("div",xw,[D[41]||(D[41]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Texte",-1)),M("div",Lw,[gn(M("input",{type:"color","onUpdate:modelValue":D[20]||(D[20]=q=>w.value=q),class:"w-16 h-8 rounded border",onChange:D[21]||(D[21]=q=>V({textColor:w.value})),title:"Couleur du texte"},null,544),[[Hn,w.value]])])]),M("div",Cw,[D[43]||(D[43]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Police",-1)),M("div",Pw,[gn(M("select",{"onUpdate:modelValue":D[22]||(D[22]=q=>S.value=q),class:"w-full rounded border",onChange:D[23]||(D[23]=q=>V({fontFamily:S.value}))},D[42]||(D[42]=[gc('<option value="Arial, sans-serif" data-v-4c5f2c80>Arial</option><option value="&#39;Times New Roman&#39;, serif" data-v-4c5f2c80>Times</option><option value="&#39;Courier New&#39;, monospace" data-v-4c5f2c80>Courier</option><option value="Georgia, serif" data-v-4c5f2c80>Georgia</option><option value="Verdana, sans-serif" data-v-4c5f2c80>Verdana</option>',5)]),544),[[$s,S.value]])])]),M("div",kw,[D[44]||(D[44]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Align.",-1)),M("div",Sw,[(se(),ce(_n,null,Gn(X,q=>M("button",{key:q.value,class:Oi(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":Y.value===q.value}]),onClick:dt=>V({textAlign:q.value}),title:q.label},[M("span",{innerHTML:q.icon},null,8,Aw)],10,Ew)),64)),M("button",{class:Oi(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":j.value}]),onClick:z,title:"Gras"}," B ",2),M("button",{class:Oi(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":R.value}]),onClick:mt,title:"Italique"}," I ",2)])])])):nn("",!0)],512),[[ch,!U.value.style]])])):nn("",!0),$.selectedShape&&o.value&&o.value.type!=="TextRectangle"?(se(),ce("div",Mw,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:D[24]||(D[24]=q=>St("properties"))},[D[46]||(D[46]=M("span",null,"Propriétés",-1)),(se(),ce("svg",{class:Oi(["w-4 h-4",{"rotate-180":!U.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[45]||(D[45]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),gn(M("div",Bw,[o.value?(se(),ce("div",Tw,[M("div",Dw,[o.value.type==="Circle"?(se(),ce(_n,{key:0},[D[47]||(D[47]=M("span",{class:"text-sm font-semibold text-gray-700"},"Rayon :",-1)),M("span",Nw,Pe(ft(o.value.radius||0)),1),D[48]||(D[48]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",Ow,Pe(ht(o.value.area||0)),1)],64)):o.value.type==="Rectangle"?(se(),ce(_n,{key:1},[D[49]||(D[49]=M("span",{class:"text-sm font-semibold text-gray-700"},"Largeur :",-1)),M("span",Rw,Pe(ft(o.value.width||0)),1),D[50]||(D[50]=M("span",{class:"text-sm font-semibold text-gray-700"},"Hauteur :",-1)),M("span",Iw,Pe(ft(o.value.height||0)),1),D[51]||(D[51]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",Fw,Pe(ht(o.value.area||0)),1)],64)):o.value.type==="Semicircle"?(se(),ce(_n,{key:2},[D[52]||(D[52]=M("span",{class:"text-sm font-semibold text-gray-700"},"Rayon :",-1)),M("span",jw,Pe(ft(o.value.radius||0)),1),D[53]||(D[53]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",zw,Pe(ht(o.value.area||0)),1),D[54]||(D[54]=M("span",{class:"text-sm font-semibold text-gray-700"},"Angle :",-1)),M("span",Uw,Pe(I(o.value.openingAngle||0)),1)],64)):o.value.type==="Line"?(se(),ce(_n,{key:3},[D[55]||(D[55]=M("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),M("span",qw,Pe(ft(o.value.length||0)),1)],64)):o.value.type==="Polygon"?(se(),ce(_n,{key:4},[D[56]||(D[56]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",$w,Pe(ht(o.value.area||0)),1),D[57]||(D[57]=M("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),M("span",Vw,Pe(ft(o.value.perimeter||0)),1)],64)):o.value.type==="ElevationLine"?(se(),ce(_n,{key:5},[D[58]||(D[58]=M("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),M("span",Hw,Pe(ft(o.value.length||0)),1),D[59]||(D[59]=M("span",{class:"text-sm font-semibold text-gray-700"},"Altitude min :",-1)),M("span",Gw,Pe(ft(o.value.minElevation||0)),1),D[60]||(D[60]=M("span",{class:"text-sm font-semibold text-gray-700"},"Altitude max :",-1)),M("span",Ww,Pe(ft(o.value.maxElevation||0)),1),D[61]||(D[61]=M("span",{class:"text-sm font-semibold text-gray-700"},"Dénivelé + :",-1)),M("span",Zw,Pe(ft(o.value.elevationGain||0)),1),D[62]||(D[62]=M("span",{class:"text-sm font-semibold text-gray-700"},"Dénivelé - :",-1)),M("span",Kw,Pe(ft(o.value.elevationLoss||0)),1)],64)):nn("",!0)])])):(se(),ce("div",Yw," Aucune propriété disponible "))],512),[[ch,!U.value.properties]])])):nn("",!0),$.selectedShape&&o.value&&o.value.type==="ElevationLine"?(se(),ce("div",Jw,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:D[25]||(D[25]=q=>St("samplePoints"))},[D[64]||(D[64]=M("span",null,"Points d'échantillonnage",-1)),(se(),ce("svg",{class:Oi(["w-4 h-4",{"rotate-180":!U.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[63]||(D[63]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),gn(M("div",Xw,[M("div",Qw,[D[69]||(D[69]=M("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),M("div",tx,[M("div",null,[D[65]||(D[65]=M("label",{class:"text-xs text-gray-600"},"Taille",-1)),gn(M("input",{type:"number","onUpdate:modelValue":D[26]||(D[26]=q=>N.value.radius=q),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:it},null,544),[[Hn,N.value.radius]])]),M("div",null,[D[66]||(D[66]=M("label",{class:"text-xs text-gray-600"},"Couleur",-1)),gn(M("input",{type:"color","onUpdate:modelValue":D[27]||(D[27]=q=>N.value.color=q),class:"w-full h-8 px-1 border rounded",onChange:it},null,544),[[Hn,N.value.color]])]),M("div",null,[D[67]||(D[67]=M("label",{class:"text-xs text-gray-600"},"Opacité",-1)),gn(M("input",{type:"range","onUpdate:modelValue":D[28]||(D[28]=q=>N.value.fillOpacity=q),min:"0",max:"1",step:"0.1",class:"w-full",onChange:it},null,544),[[Hn,N.value.fillOpacity]])]),M("div",null,[D[68]||(D[68]=M("label",{class:"text-xs text-gray-600"},"Bordure",-1)),gn(M("input",{type:"number","onUpdate:modelValue":D[29]||(D[29]=q=>N.value.weight=q),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:it},null,544),[[Hn,N.value.weight]])])])]),M("div",null,[D[73]||(D[73]=M("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),M("div",ex,[M("div",null,[D[70]||(D[70]=M("label",{class:"text-xs text-gray-600"},"Taille",-1)),gn(M("input",{type:"number","onUpdate:modelValue":D[30]||(D[30]=q=>Z.value.radius=q),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:rt},null,544),[[Hn,Z.value.radius]])]),M("div",null,[D[71]||(D[71]=M("label",{class:"text-xs text-gray-600"},"Bordure",-1)),gn(M("input",{type:"number","onUpdate:modelValue":D[31]||(D[31]=q=>Z.value.weight=q),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:rt},null,544),[[Hn,Z.value.weight]])]),M("div",null,[D[72]||(D[72]=M("label",{class:"text-xs text-gray-600"},"Opacité",-1)),gn(M("input",{type:"range","onUpdate:modelValue":D[32]||(D[32]=q=>Z.value.fillOpacity=q),min:"0",max:"1",step:"0.1",class:"w-full",onChange:rt},null,544),[[Hn,Z.value.fillOpacity]])])])])],512),[[ch,!U.value.samplePoints]])])):nn("",!0)]))}}),B1=(t,e)=>{const n=t.__vccOpts||t;for(const[i,o]of e)n[i]=o;return n},ix=B1(nx,[["__scopeId","data-v-4c5f2c80"]]),rx={class:"map-toolbar w-full"},sx={class:"hidden md:flex items-center space-x-2"},ox={class:"dropdown"},ax={class:"dropdown-menu"},lx=["onClick"],ux={key:0,class:"border-l pl-2 flex-1"},cx={class:"flex items-center"},hx={class:"plan-info"},fx={class:"plan-name"},dx={key:0,class:"plan-description"},px={class:"border-l pl-2 ml-auto"},gx={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},mx={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},vx={key:"saving"},yx={key:"success",class:"save-success-text"},_x={key:"default"},bx={class:"md:hidden"},wx={class:"flex justify-between items-center"},xx={key:0,class:"truncate mx-2 text-sm font-medium"},Lx={key:0,class:"mobile-menu mt-2 bg-white shadow-md rounded p-2 z-50"},Cx={class:"flex flex-col space-y-2"},Px={key:0,class:"flex flex-col pb-2 border-b"},kx={class:"text-sm font-semibold text-gray-800"},Sx={key:0,class:"text-xs text-gray-600 mt-1"},Ex={class:"flex flex-col"},Ax={class:"grid grid-cols-2 gap-1"},Mx=["onClick"],Bx={key:0,class:"animate-spin h-3 w-3 mr-1 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Tx={key:1,class:"h-3 w-3 mr-1 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Dx={key:"saving"},Nx={key:"success",class:"save-success-text"},Ox={key:"default"},Rx=Ls({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,i=t,o=Fe("Ville"),a=Fe(!1),l=U=>{const N=U.currentTarget,Z=N.nextElementSibling;if(Z&&Z.classList.contains("dropdown-menu")){const Y=N.getBoundingClientRect();Z.style.top=`${Y.bottom}px`,Z.style.left=`${Y.left}px`}},f={Ville:"Ville",Satellite:"Satellite",Cadastre:"Cadastre"},p=zn(()=>i.lastSave?new Date(i.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),v=U=>{o.value=U,n("change-map-type",U),R()},b=()=>{n("create-new-plan"),R()},w=()=>{n("load-plan"),R()},S=()=>{n("save-plan"),R()},x=()=>{n("adjust-view"),R()},j=()=>{n("generate-summary"),R()},R=()=>{a.value=!1};return(U,N)=>(se(),ce("div",rx,[M("div",sx,[M("div",ox,[M("button",{class:"btn-toolbar dropdown-toggle",onMouseover:l},[N[1]||(N[1]=M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),M("span",null,Pe(f[o.value]),1)],32),M("div",ax,[(se(),ce(_n,null,Gn(f,(Z,Y)=>M("button",{key:Y,class:Oi(["dropdown-item",{active:Y===o.value}]),onClick:kt=>v(Y)},Pe(Z),11,lx)),64))])]),U.planName?(se(),ce("div",ux,[M("div",cx,[M("div",hx,[M("h2",fx,Pe(U.planName),1),U.planDescription?(se(),ce("p",dx,Pe(U.planDescription),1)):nn("",!0)])])])):nn("",!0),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:b,class:"btn-toolbar",title:"Nouveau plan"},N[2]||(N[2]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),M("button",{onClick:w,class:"btn-toolbar",title:"Charger un plan"},N[3]||(N[3]=[gc('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-db17e599><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-db17e599></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-db17e599></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-db17e599></path></svg><span class="hidden lg:inline ml-1" data-v-db17e599>Charger</span>',2)])),M("button",{onClick:S,class:"btn-toolbar",title:"Enregistrer le plan"},N[4]||(N[4]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:x,class:"btn-toolbar",title:"Ajuster la vue"},N[5]||(N[5]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),M("button",{onClick:j,class:"btn-toolbar",title:"Générer une synthèse"},N[6]||(N[6]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),M("div",px,[M("div",{class:Oi(["text-xs hidden lg:flex items-center",{"text-gray-500":!U.saveStatus,"text-primary-600 font-medium":U.saveStatus==="success","text-blue-600 font-medium":U.saveStatus==="saving"}])},[U.saveStatus==="saving"?(se(),ce("svg",gx,N[7]||(N[7]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),U.saveStatus==="success"?(se(),ce("svg",mx,N[8]||(N[8]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):nn("",!0),Mi(jp,{name:"fade-slide",mode:"out-in"},{default:Ja(()=>[U.saveStatus==="saving"?(se(),ce("span",vx," Sauvegarde en cours... ")):U.saveStatus==="success"?(se(),ce("span",yx," Sauvegarde réussie ! ")):(se(),ce("span",_x," Dernière modification : "+Pe(p.value),1))]),_:1})],2)])]),M("div",bx,[M("div",wx,[M("button",{onClick:N[0]||(N[0]=Z=>a.value=!a.value),class:"p-1 rounded border"},N[9]||(N[9]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),U.planName?(se(),ce("div",xx,Pe(U.planName),1)):nn("",!0),M("div",{class:"flex space-x-1"},[M("button",{onClick:b,class:"p-1 rounded border bg-white"},N[10]||(N[10]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),M("button",{onClick:S,class:"p-1 rounded border bg-white"},N[11]||(N[11]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),M("button",{onClick:x,class:"p-1 rounded border bg-white"},N[12]||(N[12]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),a.value?(se(),ce("div",Lx,[M("div",Cx,[U.planName?(se(),ce("div",Px,[M("h3",kx,Pe(U.planName),1),U.planDescription?(se(),ce("p",Sx,Pe(U.planDescription),1)):nn("",!0)])):nn("",!0),M("div",Ex,[N[13]||(N[13]=M("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Type de carte",-1)),M("div",Ax,[(se(),ce(_n,null,Gn(f,(Z,Y)=>M("button",{key:Y,class:Oi(["px-2 py-1 text-xs rounded border",{"bg-blue-50 border-blue-200 text-blue-700":Y===o.value}]),onClick:kt=>v(Y)},Pe(Z),11,Mx)),64))])]),M("div",{class:"flex flex-col"},[N[16]||(N[16]=M("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Outils de plan",-1)),M("div",{class:"grid grid-cols-2 gap-1"},[M("button",{onClick:w,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},N[14]||(N[14]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),M("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),M("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Zi(" Charger ")])),M("button",{onClick:j,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},N[15]||(N[15]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),Zi(" Synthèse ")]))])]),M("div",{class:Oi(["text-xs text-center pt-1 border-t flex items-center justify-center space-x-1",{"text-gray-500":!U.saveStatus,"text-primary-600 font-medium":U.saveStatus==="success","text-blue-600 font-medium":U.saveStatus==="saving"}])},[U.saveStatus==="saving"?(se(),ce("svg",Bx,N[17]||(N[17]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),U.saveStatus==="success"?(se(),ce("svg",Tx,N[18]||(N[18]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):nn("",!0),Mi(jp,{name:"fade-slide",mode:"out-in"},{default:Ja(()=>[U.saveStatus==="saving"?(se(),ce("span",Dx," Sauvegarde en cours... ")):U.saveStatus==="success"?(se(),ce("span",Nx," Sauvegarde réussie ! ")):(se(),ce("span",Ox," Dernière modification : "+Pe(p.value),1))]),_:1})],2)])])):nn("",!0)])]))}}),Ix=B1(Rx,[["__scopeId","data-v-db17e599"]]);(()=>{var $e,fn;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=(s,u)=>()=>(u||s((u={exports:{}}).exports,u),u.exports),f=(s,u,h,g)=>{if(u&&typeof u=="object"||typeof u=="function")for(let y of i(u))!a.call(s,y)&&y!==h&&e(s,y,{get:()=>u[y],enumerable:!(g=n(u,y))||g.enumerable});return s},p=(s,u,h)=>(h=s!=null?t(o(s)):{},f(u||!s||!s.__esModule?e(h,"default",{value:s,enumerable:!0}):h,s)),v=l((s,u)=>{function h(){this.__data__=[],this.size=0}u.exports=h}),b=l((s,u)=>{function h(g,y){return g===y||g!==g&&y!==y}u.exports=h}),w=l((s,u)=>{var h=b();function g(y,P){for(var B=y.length;B--;)if(h(y[B][0],P))return B;return-1}u.exports=g}),S=l((s,u)=>{var h=w(),g=Array.prototype,y=g.splice;function P(B){var T=this.__data__,K=h(T,B);if(K<0)return!1;var st=T.length-1;return K==st?T.pop():y.call(T,K,1),--this.size,!0}u.exports=P}),x=l((s,u)=>{var h=w();function g(y){var P=this.__data__,B=h(P,y);return B<0?void 0:P[B][1]}u.exports=g}),j=l((s,u)=>{var h=w();function g(y){return h(this.__data__,y)>-1}u.exports=g}),R=l((s,u)=>{var h=w();function g(y,P){var B=this.__data__,T=h(B,y);return T<0?(++this.size,B.push([y,P])):B[T][1]=P,this}u.exports=g}),U=l((s,u)=>{var h=v(),g=S(),y=x(),P=j(),B=R();function T(K){var st=-1,jt=K==null?0:K.length;for(this.clear();++st<jt;){var Tt=K[st];this.set(Tt[0],Tt[1])}}T.prototype.clear=h,T.prototype.delete=g,T.prototype.get=y,T.prototype.has=P,T.prototype.set=B,u.exports=T}),N=l((s,u)=>{var h=U();function g(){this.__data__=new h,this.size=0}u.exports=g}),Z=l((s,u)=>{function h(g){var y=this.__data__,P=y.delete(g);return this.size=y.size,P}u.exports=h}),Y=l((s,u)=>{function h(g){return this.__data__.get(g)}u.exports=h}),kt=l((s,u)=>{function h(g){return this.__data__.has(g)}u.exports=h}),At=l((s,u)=>{var h=typeof Eo=="object"&&Eo&&Eo.Object===Object&&Eo;u.exports=h}),Dt=l((s,u)=>{var h=At(),g=typeof self=="object"&&self&&self.Object===Object&&self,y=h||g||Function("return this")();u.exports=y}),xt=l((s,u)=>{var h=Dt(),g=h.Symbol;u.exports=g}),gt=l((s,u)=>{var h=xt(),g=Object.prototype,y=g.hasOwnProperty,P=g.toString,B=h?h.toStringTag:void 0;function T(K){var st=y.call(K,B),jt=K[B];try{K[B]=void 0;var Tt=!0}catch{}var ne=P.call(K);return Tt&&(st?K[B]=jt:delete K[B]),ne}u.exports=T}),_t=l((s,u)=>{var h=Object.prototype,g=h.toString;function y(P){return g.call(P)}u.exports=y}),zt=l((s,u)=>{var h=xt(),g=gt(),y=_t(),P="[object Null]",B="[object Undefined]",T=h?h.toStringTag:void 0;function K(st){return st==null?st===void 0?B:P:T&&T in Object(st)?g(st):y(st)}u.exports=K}),X=l((s,u)=>{function h(g){var y=typeof g;return g!=null&&(y=="object"||y=="function")}u.exports=h}),W=l((s,u)=>{var h=zt(),g=X(),y="[object AsyncFunction]",P="[object Function]",B="[object GeneratorFunction]",T="[object Proxy]";function K(st){if(!g(st))return!1;var jt=h(st);return jt==P||jt==B||jt==y||jt==T}u.exports=K}),St=l((s,u)=>{var h=Dt(),g=h["__core-js_shared__"];u.exports=g}),Mt=l((s,u)=>{var h=St(),g=function(){var P=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}();function y(P){return!!g&&g in P}u.exports=y}),A=l((s,u)=>{var h=Function.prototype,g=h.toString;function y(P){if(P!=null){try{return g.call(P)}catch{}try{return P+""}catch{}}return""}u.exports=y}),H=l((s,u)=>{var h=W(),g=Mt(),y=X(),P=A(),B=/[\\^$.*+?()[\]{}|]/g,T=/^\[object .+?Constructor\]$/,K=Function.prototype,st=Object.prototype,jt=K.toString,Tt=st.hasOwnProperty,ne=RegExp("^"+jt.call(Tt).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ge(Ee){if(!y(Ee)||g(Ee))return!1;var Ie=h(Ee)?ne:T;return Ie.test(P(Ee))}u.exports=ge}),V=l((s,u)=>{function h(g,y){return g==null?void 0:g[y]}u.exports=h}),z=l((s,u)=>{var h=H(),g=V();function y(P,B){var T=g(P,B);return h(T)?T:void 0}u.exports=y}),mt=l((s,u)=>{var h=z(),g=Dt(),y=h(g,"Map");u.exports=y}),ft=l((s,u)=>{var h=z(),g=h(Object,"create");u.exports=g}),ht=l((s,u)=>{var h=ft();function g(){this.__data__=h?h(null):{},this.size=0}u.exports=g}),I=l((s,u)=>{function h(g){var y=this.has(g)&&delete this.__data__[g];return this.size-=y?1:0,y}u.exports=h}),it=l((s,u)=>{var h=ft(),g="__lodash_hash_undefined__",y=Object.prototype,P=y.hasOwnProperty;function B(T){var K=this.__data__;if(h){var st=K[T];return st===g?void 0:st}return P.call(K,T)?K[T]:void 0}u.exports=B}),rt=l((s,u)=>{var h=ft(),g=Object.prototype,y=g.hasOwnProperty;function P(B){var T=this.__data__;return h?T[B]!==void 0:y.call(T,B)}u.exports=P}),$=l((s,u)=>{var h=ft(),g="__lodash_hash_undefined__";function y(P,B){var T=this.__data__;return this.size+=this.has(P)?0:1,T[P]=h&&B===void 0?g:B,this}u.exports=y}),D=l((s,u)=>{var h=ht(),g=I(),y=it(),P=rt(),B=$();function T(K){var st=-1,jt=K==null?0:K.length;for(this.clear();++st<jt;){var Tt=K[st];this.set(Tt[0],Tt[1])}}T.prototype.clear=h,T.prototype.delete=g,T.prototype.get=y,T.prototype.has=P,T.prototype.set=B,u.exports=T}),q=l((s,u)=>{var h=D(),g=U(),y=mt();function P(){this.size=0,this.__data__={hash:new h,map:new(y||g),string:new h}}u.exports=P}),dt=l((s,u)=>{function h(g){var y=typeof g;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?g!=="__proto__":g===null}u.exports=h}),ct=l((s,u)=>{var h=dt();function g(y,P){var B=y.__data__;return h(P)?B[typeof P=="string"?"string":"hash"]:B.map}u.exports=g}),Et=l((s,u)=>{var h=ct();function g(y){var P=h(this,y).delete(y);return this.size-=P?1:0,P}u.exports=g}),Nt=l((s,u)=>{var h=ct();function g(y){return h(this,y).get(y)}u.exports=g}),G=l((s,u)=>{var h=ct();function g(y){return h(this,y).has(y)}u.exports=g}),tt=l((s,u)=>{var h=ct();function g(y,P){var B=h(this,y),T=B.size;return B.set(y,P),this.size+=B.size==T?0:1,this}u.exports=g}),yt=l((s,u)=>{var h=q(),g=Et(),y=Nt(),P=G(),B=tt();function T(K){var st=-1,jt=K==null?0:K.length;for(this.clear();++st<jt;){var Tt=K[st];this.set(Tt[0],Tt[1])}}T.prototype.clear=h,T.prototype.delete=g,T.prototype.get=y,T.prototype.has=P,T.prototype.set=B,u.exports=T}),vt=l((s,u)=>{var h=U(),g=mt(),y=yt(),P=200;function B(T,K){var st=this.__data__;if(st instanceof h){var jt=st.__data__;if(!g||jt.length<P-1)return jt.push([T,K]),this.size=++st.size,this;st=this.__data__=new y(jt)}return st.set(T,K),this.size=st.size,this}u.exports=B}),J=l((s,u)=>{var h=U(),g=N(),y=Z(),P=Y(),B=kt(),T=vt();function K(st){var jt=this.__data__=new h(st);this.size=jt.size}K.prototype.clear=g,K.prototype.delete=y,K.prototype.get=P,K.prototype.has=B,K.prototype.set=T,u.exports=K}),qt=l((s,u)=>{var h=z(),g=function(){try{var y=h(Object,"defineProperty");return y({},"",{}),y}catch{}}();u.exports=g}),te=l((s,u)=>{var h=qt();function g(y,P,B){P=="__proto__"&&h?h(y,P,{configurable:!0,enumerable:!0,value:B,writable:!0}):y[P]=B}u.exports=g}),Vt=l((s,u)=>{var h=te(),g=b();function y(P,B,T){(T!==void 0&&!g(P[B],T)||T===void 0&&!(B in P))&&h(P,B,T)}u.exports=y}),ee=l((s,u)=>{function h(g){return function(y,P,B){for(var T=-1,K=Object(y),st=B(y),jt=st.length;jt--;){var Tt=st[g?jt:++T];if(P(K[Tt],Tt,K)===!1)break}return y}}u.exports=h}),Rt=l((s,u)=>{var h=ee(),g=h();u.exports=g}),Ot=l((s,u)=>{var h=Dt(),g=typeof s=="object"&&s&&!s.nodeType&&s,y=g&&typeof u=="object"&&u&&!u.nodeType&&u,P=y&&y.exports===g,B=P?h.Buffer:void 0,T=B?B.allocUnsafe:void 0;function K(st,jt){if(jt)return st.slice();var Tt=st.length,ne=T?T(Tt):new st.constructor(Tt);return st.copy(ne),ne}u.exports=K}),ie=l((s,u)=>{var h=Dt(),g=h.Uint8Array;u.exports=g}),pe=l((s,u)=>{var h=ie();function g(y){var P=new y.constructor(y.byteLength);return new h(P).set(new h(y)),P}u.exports=g}),ke=l((s,u)=>{var h=pe();function g(y,P){var B=P?h(y.buffer):y.buffer;return new y.constructor(B,y.byteOffset,y.length)}u.exports=g}),Kt=l((s,u)=>{function h(g,y){var P=-1,B=g.length;for(y||(y=Array(B));++P<B;)y[P]=g[P];return y}u.exports=h}),oe=l((s,u)=>{var h=X(),g=Object.create,y=function(){function P(){}return function(B){if(!h(B))return{};if(g)return g(B);P.prototype=B;var T=new P;return P.prototype=void 0,T}}();u.exports=y}),Ve=l((s,u)=>{function h(g,y){return function(P){return g(y(P))}}u.exports=h}),Ue=l((s,u)=>{var h=Ve(),g=h(Object.getPrototypeOf,Object);u.exports=g}),Ge=l((s,u)=>{var h=Object.prototype;function g(y){var P=y&&y.constructor,B=typeof P=="function"&&P.prototype||h;return y===B}u.exports=g}),Oe=l((s,u)=>{var h=oe(),g=Ue(),y=Ge();function P(B){return typeof B.constructor=="function"&&!y(B)?h(g(B)):{}}u.exports=P}),Sn=l((s,u)=>{function h(g){return g!=null&&typeof g=="object"}u.exports=h}),tn=l((s,u)=>{var h=zt(),g=Sn(),y="[object Arguments]";function P(B){return g(B)&&h(B)==y}u.exports=P}),si=l((s,u)=>{var h=tn(),g=Sn(),y=Object.prototype,P=y.hasOwnProperty,B=y.propertyIsEnumerable,T=h(function(){return arguments}())?h:function(K){return g(K)&&P.call(K,"callee")&&!B.call(K,"callee")};u.exports=T}),an=l((s,u)=>{var h=Array.isArray;u.exports=h}),bn=l((s,u)=>{var h=9007199254740991;function g(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=h}u.exports=g}),Un=l((s,u)=>{var h=W(),g=bn();function y(P){return P!=null&&g(P.length)&&!h(P)}u.exports=y}),je=l((s,u)=>{var h=Un(),g=Sn();function y(P){return g(P)&&h(P)}u.exports=y}),qi=l((s,u)=>{function h(){return!1}u.exports=h}),Mn=l((s,u)=>{var h=Dt(),g=qi(),y=typeof s=="object"&&s&&!s.nodeType&&s,P=y&&typeof u=="object"&&u&&!u.nodeType&&u,B=P&&P.exports===y,T=B?h.Buffer:void 0,K=T?T.isBuffer:void 0,st=K||g;u.exports=st}),ci=l((s,u)=>{var h=zt(),g=Ue(),y=Sn(),P="[object Object]",B=Function.prototype,T=Object.prototype,K=B.toString,st=T.hasOwnProperty,jt=K.call(Object);function Tt(ne){if(!y(ne)||h(ne)!=P)return!1;var ge=g(ne);if(ge===null)return!0;var Ee=st.call(ge,"constructor")&&ge.constructor;return typeof Ee=="function"&&Ee instanceof Ee&&K.call(Ee)==jt}u.exports=Tt}),gi=l((s,u)=>{var h=zt(),g=bn(),y=Sn(),P="[object Arguments]",B="[object Array]",T="[object Boolean]",K="[object Date]",st="[object Error]",jt="[object Function]",Tt="[object Map]",ne="[object Number]",ge="[object Object]",Ee="[object RegExp]",Ie="[object Set]",ze="[object String]",yn="[object WeakMap]",Ft="[object ArrayBuffer]",Ut="[object DataView]",Jt="[object Float32Array]",_e="[object Float64Array]",ae="[object Int8Array]",me="[object Int16Array]",Q="[object Int32Array]",ot="[object Uint8Array]",Lt="[object Uint8ClampedArray]",wt="[object Uint16Array]",Ct="[object Uint32Array]",Pt={};Pt[Jt]=Pt[_e]=Pt[ae]=Pt[me]=Pt[Q]=Pt[ot]=Pt[Lt]=Pt[wt]=Pt[Ct]=!0,Pt[P]=Pt[B]=Pt[Ft]=Pt[T]=Pt[Ut]=Pt[K]=Pt[st]=Pt[jt]=Pt[Tt]=Pt[ne]=Pt[ge]=Pt[Ee]=Pt[Ie]=Pt[ze]=Pt[yn]=!1;function Wt(Ht){return y(Ht)&&g(Ht.length)&&!!Pt[h(Ht)]}u.exports=Wt}),In=l((s,u)=>{function h(g){return function(y){return g(y)}}u.exports=h}),ln=l((s,u)=>{var h=At(),g=typeof s=="object"&&s&&!s.nodeType&&s,y=g&&typeof u=="object"&&u&&!u.nodeType&&u,P=y&&y.exports===g,B=P&&h.process,T=function(){try{var K=y&&y.require&&y.require("util").types;return K||B&&B.binding&&B.binding("util")}catch{}}();u.exports=T}),Ke=l((s,u)=>{var h=gi(),g=In(),y=ln(),P=y&&y.isTypedArray,B=P?g(P):h;u.exports=B}),Ze=l((s,u)=>{function h(g,y){if(!(y==="constructor"&&typeof g[y]=="function")&&y!="__proto__")return g[y]}u.exports=h}),Qn=l((s,u)=>{var h=te(),g=b(),y=Object.prototype,P=y.hasOwnProperty;function B(T,K,st){var jt=T[K];(!(P.call(T,K)&&g(jt,st))||st===void 0&&!(K in T))&&h(T,K,st)}u.exports=B}),$i=l((s,u)=>{var h=Qn(),g=te();function y(P,B,T,K){var st=!T;T||(T={});for(var jt=-1,Tt=B.length;++jt<Tt;){var ne=B[jt],ge=K?K(T[ne],P[ne],ne,T,P):void 0;ge===void 0&&(ge=P[ne]),st?g(T,ne,ge):h(T,ne,ge)}return T}u.exports=y}),Re=l((s,u)=>{function h(g,y){for(var P=-1,B=Array(g);++P<g;)B[P]=y(P);return B}u.exports=h}),Qe=l((s,u)=>{var h=9007199254740991,g=/^(?:0|[1-9]\d*)$/;function y(P,B){var T=typeof P;return B=B??h,!!B&&(T=="number"||T!="symbol"&&g.test(P))&&P>-1&&P%1==0&&P<B}u.exports=y}),pi=l((s,u)=>{var h=Re(),g=si(),y=an(),P=Mn(),B=Qe(),T=Ke(),K=Object.prototype,st=K.hasOwnProperty;function jt(Tt,ne){var ge=y(Tt),Ee=!ge&&g(Tt),Ie=!ge&&!Ee&&P(Tt),ze=!ge&&!Ee&&!Ie&&T(Tt),yn=ge||Ee||Ie||ze,Ft=yn?h(Tt.length,String):[],Ut=Ft.length;for(var Jt in Tt)(ne||st.call(Tt,Jt))&&!(yn&&(Jt=="length"||Ie&&(Jt=="offset"||Jt=="parent")||ze&&(Jt=="buffer"||Jt=="byteLength"||Jt=="byteOffset")||B(Jt,Ut)))&&Ft.push(Jt);return Ft}u.exports=jt}),hi=l((s,u)=>{function h(g){var y=[];if(g!=null)for(var P in Object(g))y.push(P);return y}u.exports=h}),Ki=l((s,u)=>{var h=X(),g=Ge(),y=hi(),P=Object.prototype,B=P.hasOwnProperty;function T(K){if(!h(K))return y(K);var st=g(K),jt=[];for(var Tt in K)Tt=="constructor"&&(st||!B.call(K,Tt))||jt.push(Tt);return jt}u.exports=T}),Vn=l((s,u)=>{var h=pi(),g=Ki(),y=Un();function P(B){return y(B)?h(B,!0):g(B)}u.exports=P}),qe=l((s,u)=>{var h=$i(),g=Vn();function y(P){return h(P,g(P))}u.exports=y}),Yi=l((s,u)=>{var h=Vt(),g=Ot(),y=ke(),P=Kt(),B=Oe(),T=si(),K=an(),st=je(),jt=Mn(),Tt=W(),ne=X(),ge=ci(),Ee=Ke(),Ie=Ze(),ze=qe();function yn(Ft,Ut,Jt,_e,ae,me,Q){var ot=Ie(Ft,Jt),Lt=Ie(Ut,Jt),wt=Q.get(Lt);if(wt){h(Ft,Jt,wt);return}var Ct=me?me(ot,Lt,Jt+"",Ft,Ut,Q):void 0,Pt=Ct===void 0;if(Pt){var Wt=K(Lt),Ht=!Wt&&jt(Lt),Xt=!Wt&&!Ht&&Ee(Lt);Ct=Lt,Wt||Ht||Xt?K(ot)?Ct=ot:st(ot)?Ct=P(ot):Ht?(Pt=!1,Ct=g(Lt,!0)):Xt?(Pt=!1,Ct=y(Lt,!0)):Ct=[]:ge(Lt)||T(Lt)?(Ct=ot,T(ot)?Ct=ze(ot):(!ne(ot)||Tt(ot))&&(Ct=B(Lt))):Pt=!1}Pt&&(Q.set(Lt,Ct),ae(Ct,Lt,_e,me,Q),Q.delete(Lt)),h(Ft,Jt,Ct)}u.exports=yn}),Cs=l((s,u)=>{var h=J(),g=Vt(),y=Rt(),P=Yi(),B=X(),T=Vn(),K=Ze();function st(jt,Tt,ne,ge,Ee){jt!==Tt&&y(Tt,function(Ie,ze){if(Ee||(Ee=new h),B(Ie))P(jt,Tt,ze,ne,st,ge,Ee);else{var yn=ge?ge(K(jt,ze),Ie,ze+"",jt,Tt,Ee):void 0;yn===void 0&&(yn=Ie),g(jt,ze,yn)}},T)}u.exports=st}),kr=l((s,u)=>{function h(g){return g}u.exports=h}),mr=l((s,u)=>{function h(g,y,P){switch(P.length){case 0:return g.call(y);case 1:return g.call(y,P[0]);case 2:return g.call(y,P[0],P[1]);case 3:return g.call(y,P[0],P[1],P[2])}return g.apply(y,P)}u.exports=h}),or=l((s,u)=>{var h=mr(),g=Math.max;function y(P,B,T){return B=g(B===void 0?P.length-1:B,0),function(){for(var K=arguments,st=-1,jt=g(K.length-B,0),Tt=Array(jt);++st<jt;)Tt[st]=K[B+st];st=-1;for(var ne=Array(B+1);++st<B;)ne[st]=K[st];return ne[B]=T(Tt),h(P,this,ne)}}u.exports=y}),vr=l((s,u)=>{function h(g){return function(){return g}}u.exports=h}),Vi=l((s,u)=>{var h=vr(),g=qt(),y=kr(),P=g?function(B,T){return g(B,"toString",{configurable:!0,enumerable:!1,value:h(T),writable:!0})}:y;u.exports=P}),ar=l((s,u)=>{var h=800,g=16,y=Date.now;function P(B){var T=0,K=0;return function(){var st=y(),jt=g-(st-K);if(K=st,jt>0){if(++T>=h)return arguments[0]}else T=0;return B.apply(void 0,arguments)}}u.exports=P}),jr=l((s,u)=>{var h=Vi(),g=ar(),y=g(h);u.exports=y}),Ps=l((s,u)=>{var h=kr(),g=or(),y=jr();function P(B,T){return y(g(B,T,h),B+"")}u.exports=P}),Gs=l((s,u)=>{var h=b(),g=Un(),y=Qe(),P=X();function B(T,K,st){if(!P(st))return!1;var jt=typeof K;return(jt=="number"?g(st)&&y(K,st.length):jt=="string"&&K in st)?h(st[K],T):!1}u.exports=B}),Ws=l((s,u)=>{var h=Ps(),g=Gs();function y(P){return h(function(B,T){var K=-1,st=T.length,jt=st>1?T[st-1]:void 0,Tt=st>2?T[2]:void 0;for(jt=P.length>3&&typeof jt=="function"?(st--,jt):void 0,Tt&&g(T[0],T[1],Tt)&&(jt=st<3?void 0:jt,st=1),B=Object(B);++K<st;){var ne=T[K];ne&&P(B,ne,K,jt)}return B})}u.exports=y}),Vr=l((s,u)=>{var h=Cs(),g=Ws(),y=g(function(P,B,T){h(P,B,T)});u.exports=y}),us=l((s,u)=>{var h=zt(),g=Sn(),y="[object Symbol]";function P(B){return typeof B=="symbol"||g(B)&&h(B)==y}u.exports=P}),ks=l((s,u)=>{var h=an(),g=us(),y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P=/^\w*$/;function B(T,K){if(h(T))return!1;var st=typeof T;return st=="number"||st=="symbol"||st=="boolean"||T==null||g(T)?!0:P.test(T)||!y.test(T)||K!=null&&T in Object(K)}u.exports=B}),na=l((s,u)=>{var h=yt(),g="Expected a function";function y(P,B){if(typeof P!="function"||B!=null&&typeof B!="function")throw new TypeError(g);var T=function(){var K=arguments,st=B?B.apply(this,K):K[0],jt=T.cache;if(jt.has(st))return jt.get(st);var Tt=P.apply(this,K);return T.cache=jt.set(st,Tt)||jt,Tt};return T.cache=new(y.Cache||h),T}y.Cache=h,u.exports=y}),ia=l((s,u)=>{var h=na(),g=500;function y(P){var B=h(P,function(K){return T.size===g&&T.clear(),K}),T=B.cache;return B}u.exports=y}),Zs=l((s,u)=>{var h=ia(),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/\\(\\)?/g,P=h(function(B){var T=[];return B.charCodeAt(0)===46&&T.push(""),B.replace(g,function(K,st,jt,Tt){T.push(jt?Tt.replace(y,"$1"):st||K)}),T});u.exports=P}),Do=l((s,u)=>{function h(g,y){for(var P=-1,B=g==null?0:g.length,T=Array(B);++P<B;)T[P]=y(g[P],P,g);return T}u.exports=h}),ra=l((s,u)=>{var h=xt(),g=Do(),y=an(),P=us(),B=h?h.prototype:void 0,T=B?B.toString:void 0;function K(st){if(typeof st=="string")return st;if(y(st))return g(st,K)+"";if(P(st))return T?T.call(st):"";var jt=st+"";return jt=="0"&&1/st==-1/0?"-0":jt}u.exports=K}),Ss=l((s,u)=>{var h=ra();function g(y){return y==null?"":h(y)}u.exports=g}),Es=l((s,u)=>{var h=an(),g=ks(),y=Zs(),P=Ss();function B(T,K){return h(T)?T:g(T,K)?[T]:y(P(T))}u.exports=B}),co=l((s,u)=>{var h=us();function g(y){if(typeof y=="string"||h(y))return y;var P=y+"";return P=="0"&&1/y==-1/0?"-0":P}u.exports=g}),No=l((s,u)=>{var h=Es(),g=co();function y(P,B){B=h(B,P);for(var T=0,K=B.length;P!=null&&T<K;)P=P[g(B[T++])];return T&&T==K?P:void 0}u.exports=y}),lr=l((s,u)=>{var h=No();function g(y,P,B){var T=y==null?void 0:h(y,P);return T===void 0?B:T}u.exports=g}),Dn=l((s,u)=>{(function(h,g){typeof s=="object"&&typeof u<"u"?u.exports=g():(h=h||self).RBush=g()})(s,function(){function h(Ft,Ut,Jt,_e,ae){(function me(Q,ot,Lt,wt,Ct){for(;wt>Lt;){if(wt-Lt>600){var Pt=wt-Lt+1,Wt=ot-Lt+1,Ht=Math.log(Pt),Xt=.5*Math.exp(2*Ht/3),fe=.5*Math.sqrt(Ht*Xt*(Pt-Xt)/Pt)*(Wt-Pt/2<0?-1:1),he=Math.max(Lt,Math.floor(ot-Wt*Xt/Pt+fe)),Me=Math.min(wt,Math.floor(ot+(Pt-Wt)*Xt/Pt+fe));me(Q,ot,he,Me,Ct)}var Ye=Q[ot],en=Lt,sn=wt;for(g(Q,Lt,ot),Ct(Q[wt],Ye)>0&&g(Q,Lt,wt);en<sn;){for(g(Q,en,sn),en++,sn--;Ct(Q[en],Ye)<0;)en++;for(;Ct(Q[sn],Ye)>0;)sn--}Ct(Q[Lt],Ye)===0?g(Q,Lt,sn):g(Q,++sn,wt),sn<=ot&&(Lt=sn+1),ot<=sn&&(wt=sn-1)}})(Ft,Ut,Jt||0,_e||Ft.length-1,ae||y)}function g(Ft,Ut,Jt){var _e=Ft[Ut];Ft[Ut]=Ft[Jt],Ft[Jt]=_e}function y(Ft,Ut){return Ft<Ut?-1:Ft>Ut?1:0}var P=function(Ft){Ft===void 0&&(Ft=9),this._maxEntries=Math.max(4,Ft),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function B(Ft,Ut,Jt){if(!Jt)return Ut.indexOf(Ft);for(var _e=0;_e<Ut.length;_e++)if(Jt(Ft,Ut[_e]))return _e;return-1}function T(Ft,Ut){K(Ft,0,Ft.children.length,Ut,Ft)}function K(Ft,Ut,Jt,_e,ae){ae||(ae=ze(null)),ae.minX=1/0,ae.minY=1/0,ae.maxX=-1/0,ae.maxY=-1/0;for(var me=Ut;me<Jt;me++){var Q=Ft.children[me];st(ae,Ft.leaf?_e(Q):Q)}return ae}function st(Ft,Ut){return Ft.minX=Math.min(Ft.minX,Ut.minX),Ft.minY=Math.min(Ft.minY,Ut.minY),Ft.maxX=Math.max(Ft.maxX,Ut.maxX),Ft.maxY=Math.max(Ft.maxY,Ut.maxY),Ft}function jt(Ft,Ut){return Ft.minX-Ut.minX}function Tt(Ft,Ut){return Ft.minY-Ut.minY}function ne(Ft){return(Ft.maxX-Ft.minX)*(Ft.maxY-Ft.minY)}function ge(Ft){return Ft.maxX-Ft.minX+(Ft.maxY-Ft.minY)}function Ee(Ft,Ut){return Ft.minX<=Ut.minX&&Ft.minY<=Ut.minY&&Ut.maxX<=Ft.maxX&&Ut.maxY<=Ft.maxY}function Ie(Ft,Ut){return Ut.minX<=Ft.maxX&&Ut.minY<=Ft.maxY&&Ut.maxX>=Ft.minX&&Ut.maxY>=Ft.minY}function ze(Ft){return{children:Ft,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function yn(Ft,Ut,Jt,_e,ae){for(var me=[Ut,Jt];me.length;)if(!((Jt=me.pop())-(Ut=me.pop())<=_e)){var Q=Ut+Math.ceil((Jt-Ut)/_e/2)*_e;h(Ft,Q,Ut,Jt,ae),me.push(Ut,Q,Q,Jt)}}return P.prototype.all=function(){return this._all(this.data,[])},P.prototype.search=function(Ft){var Ut=this.data,Jt=[];if(!Ie(Ft,Ut))return Jt;for(var _e=this.toBBox,ae=[];Ut;){for(var me=0;me<Ut.children.length;me++){var Q=Ut.children[me],ot=Ut.leaf?_e(Q):Q;Ie(Ft,ot)&&(Ut.leaf?Jt.push(Q):Ee(Ft,ot)?this._all(Q,Jt):ae.push(Q))}Ut=ae.pop()}return Jt},P.prototype.collides=function(Ft){var Ut=this.data;if(!Ie(Ft,Ut))return!1;for(var Jt=[];Ut;){for(var _e=0;_e<Ut.children.length;_e++){var ae=Ut.children[_e],me=Ut.leaf?this.toBBox(ae):ae;if(Ie(Ft,me)){if(Ut.leaf||Ee(Ft,me))return!0;Jt.push(ae)}}Ut=Jt.pop()}return!1},P.prototype.load=function(Ft){if(!Ft||!Ft.length)return this;if(Ft.length<this._minEntries){for(var Ut=0;Ut<Ft.length;Ut++)this.insert(Ft[Ut]);return this}var Jt=this._build(Ft.slice(),0,Ft.length-1,0);if(this.data.children.length)if(this.data.height===Jt.height)this._splitRoot(this.data,Jt);else{if(this.data.height<Jt.height){var _e=this.data;this.data=Jt,Jt=_e}this._insert(Jt,this.data.height-Jt.height-1,!0)}else this.data=Jt;return this},P.prototype.insert=function(Ft){return Ft&&this._insert(Ft,this.data.height-1),this},P.prototype.clear=function(){return this.data=ze([]),this},P.prototype.remove=function(Ft,Ut){if(!Ft)return this;for(var Jt,_e,ae,me=this.data,Q=this.toBBox(Ft),ot=[],Lt=[];me||ot.length;){if(me||(me=ot.pop(),_e=ot[ot.length-1],Jt=Lt.pop(),ae=!0),me.leaf){var wt=B(Ft,me.children,Ut);if(wt!==-1)return me.children.splice(wt,1),ot.push(me),this._condense(ot),this}ae||me.leaf||!Ee(me,Q)?_e?(Jt++,me=_e.children[Jt],ae=!1):me=null:(ot.push(me),Lt.push(Jt),Jt=0,_e=me,me=me.children[0])}return this},P.prototype.toBBox=function(Ft){return Ft},P.prototype.compareMinX=function(Ft,Ut){return Ft.minX-Ut.minX},P.prototype.compareMinY=function(Ft,Ut){return Ft.minY-Ut.minY},P.prototype.toJSON=function(){return this.data},P.prototype.fromJSON=function(Ft){return this.data=Ft,this},P.prototype._all=function(Ft,Ut){for(var Jt=[];Ft;)Ft.leaf?Ut.push.apply(Ut,Ft.children):Jt.push.apply(Jt,Ft.children),Ft=Jt.pop();return Ut},P.prototype._build=function(Ft,Ut,Jt,_e){var ae,me=Jt-Ut+1,Q=this._maxEntries;if(me<=Q)return T(ae=ze(Ft.slice(Ut,Jt+1)),this.toBBox),ae;_e||(_e=Math.ceil(Math.log(me)/Math.log(Q)),Q=Math.ceil(me/Math.pow(Q,_e-1))),(ae=ze([])).leaf=!1,ae.height=_e;var ot=Math.ceil(me/Q),Lt=ot*Math.ceil(Math.sqrt(Q));yn(Ft,Ut,Jt,Lt,this.compareMinX);for(var wt=Ut;wt<=Jt;wt+=Lt){var Ct=Math.min(wt+Lt-1,Jt);yn(Ft,wt,Ct,ot,this.compareMinY);for(var Pt=wt;Pt<=Ct;Pt+=ot){var Wt=Math.min(Pt+ot-1,Ct);ae.children.push(this._build(Ft,Pt,Wt,_e-1))}}return T(ae,this.toBBox),ae},P.prototype._chooseSubtree=function(Ft,Ut,Jt,_e){for(;_e.push(Ut),!Ut.leaf&&_e.length-1!==Jt;){for(var ae=1/0,me=1/0,Q=void 0,ot=0;ot<Ut.children.length;ot++){var Lt=Ut.children[ot],wt=ne(Lt),Ct=(Pt=Ft,Wt=Lt,(Math.max(Wt.maxX,Pt.maxX)-Math.min(Wt.minX,Pt.minX))*(Math.max(Wt.maxY,Pt.maxY)-Math.min(Wt.minY,Pt.minY))-wt);Ct<me?(me=Ct,ae=wt<ae?wt:ae,Q=Lt):Ct===me&&wt<ae&&(ae=wt,Q=Lt)}Ut=Q||Ut.children[0]}var Pt,Wt;return Ut},P.prototype._insert=function(Ft,Ut,Jt){var _e=Jt?Ft:this.toBBox(Ft),ae=[],me=this._chooseSubtree(_e,this.data,Ut,ae);for(me.children.push(Ft),st(me,_e);Ut>=0&&ae[Ut].children.length>this._maxEntries;)this._split(ae,Ut),Ut--;this._adjustParentBBoxes(_e,ae,Ut)},P.prototype._split=function(Ft,Ut){var Jt=Ft[Ut],_e=Jt.children.length,ae=this._minEntries;this._chooseSplitAxis(Jt,ae,_e);var me=this._chooseSplitIndex(Jt,ae,_e),Q=ze(Jt.children.splice(me,Jt.children.length-me));Q.height=Jt.height,Q.leaf=Jt.leaf,T(Jt,this.toBBox),T(Q,this.toBBox),Ut?Ft[Ut-1].children.push(Q):this._splitRoot(Jt,Q)},P.prototype._splitRoot=function(Ft,Ut){this.data=ze([Ft,Ut]),this.data.height=Ft.height+1,this.data.leaf=!1,T(this.data,this.toBBox)},P.prototype._chooseSplitIndex=function(Ft,Ut,Jt){for(var _e,ae,me,Q,ot,Lt,wt,Ct=1/0,Pt=1/0,Wt=Ut;Wt<=Jt-Ut;Wt++){var Ht=K(Ft,0,Wt,this.toBBox),Xt=K(Ft,Wt,Jt,this.toBBox),fe=(ae=Ht,me=Xt,Q=void 0,ot=void 0,Lt=void 0,wt=void 0,Q=Math.max(ae.minX,me.minX),ot=Math.max(ae.minY,me.minY),Lt=Math.min(ae.maxX,me.maxX),wt=Math.min(ae.maxY,me.maxY),Math.max(0,Lt-Q)*Math.max(0,wt-ot)),he=ne(Ht)+ne(Xt);fe<Ct?(Ct=fe,_e=Wt,Pt=he<Pt?he:Pt):fe===Ct&&he<Pt&&(Pt=he,_e=Wt)}return _e||Jt-Ut},P.prototype._chooseSplitAxis=function(Ft,Ut,Jt){var _e=Ft.leaf?this.compareMinX:jt,ae=Ft.leaf?this.compareMinY:Tt;this._allDistMargin(Ft,Ut,Jt,_e)<this._allDistMargin(Ft,Ut,Jt,ae)&&Ft.children.sort(_e)},P.prototype._allDistMargin=function(Ft,Ut,Jt,_e){Ft.children.sort(_e);for(var ae=this.toBBox,me=K(Ft,0,Ut,ae),Q=K(Ft,Jt-Ut,Jt,ae),ot=ge(me)+ge(Q),Lt=Ut;Lt<Jt-Ut;Lt++){var wt=Ft.children[Lt];st(me,Ft.leaf?ae(wt):wt),ot+=ge(me)}for(var Ct=Jt-Ut-1;Ct>=Ut;Ct--){var Pt=Ft.children[Ct];st(Q,Ft.leaf?ae(Pt):Pt),ot+=ge(Q)}return ot},P.prototype._adjustParentBBoxes=function(Ft,Ut,Jt){for(var _e=Jt;_e>=0;_e--)st(Ut[_e],Ft)},P.prototype._condense=function(Ft){for(var Ut=Ft.length-1,Jt=void 0;Ut>=0;Ut--)Ft[Ut].children.length===0?Ut>0?(Jt=Ft[Ut-1].children).splice(Jt.indexOf(Ft[Ut]),1):this.clear():T(Ft[Ut],this.toBBox)},P})}),mn=l(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function u(wt,Ct,Pt){Pt===void 0&&(Pt={});var Wt={type:"Feature"};return(Pt.id===0||Pt.id)&&(Wt.id=Pt.id),Pt.bbox&&(Wt.bbox=Pt.bbox),Wt.properties=Ct||{},Wt.geometry=wt,Wt}s.feature=u;function h(wt,Ct,Pt){switch(wt){case"Point":return g(Ct).geometry;case"LineString":return T(Ct).geometry;case"Polygon":return P(Ct).geometry;case"MultiPoint":return Tt(Ct).geometry;case"MultiLineString":return jt(Ct).geometry;case"MultiPolygon":return ne(Ct).geometry;default:throw new Error(wt+" is invalid")}}s.geometry=h;function g(wt,Ct,Pt){if(Pt===void 0&&(Pt={}),!wt)throw new Error("coordinates is required");if(!Array.isArray(wt))throw new Error("coordinates must be an Array");if(wt.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!me(wt[0])||!me(wt[1]))throw new Error("coordinates must contain numbers");var Wt={type:"Point",coordinates:wt};return u(Wt,Ct,Pt)}s.point=g;function y(wt,Ct,Pt){return Pt===void 0&&(Pt={}),st(wt.map(function(Wt){return g(Wt,Ct)}),Pt)}s.points=y;function P(wt,Ct,Pt){Pt===void 0&&(Pt={});for(var Wt=0,Ht=wt;Wt<Ht.length;Wt++){var Xt=Ht[Wt];if(Xt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var fe=0;fe<Xt[Xt.length-1].length;fe++)if(Xt[Xt.length-1][fe]!==Xt[0][fe])throw new Error("First and last Position are not equivalent.")}var he={type:"Polygon",coordinates:wt};return u(he,Ct,Pt)}s.polygon=P;function B(wt,Ct,Pt){return Pt===void 0&&(Pt={}),st(wt.map(function(Wt){return P(Wt,Ct)}),Pt)}s.polygons=B;function T(wt,Ct,Pt){if(Pt===void 0&&(Pt={}),wt.length<2)throw new Error("coordinates must be an array of two or more positions");var Wt={type:"LineString",coordinates:wt};return u(Wt,Ct,Pt)}s.lineString=T;function K(wt,Ct,Pt){return Pt===void 0&&(Pt={}),st(wt.map(function(Wt){return T(Wt,Ct)}),Pt)}s.lineStrings=K;function st(wt,Ct){Ct===void 0&&(Ct={});var Pt={type:"FeatureCollection"};return Ct.id&&(Pt.id=Ct.id),Ct.bbox&&(Pt.bbox=Ct.bbox),Pt.features=wt,Pt}s.featureCollection=st;function jt(wt,Ct,Pt){Pt===void 0&&(Pt={});var Wt={type:"MultiLineString",coordinates:wt};return u(Wt,Ct,Pt)}s.multiLineString=jt;function Tt(wt,Ct,Pt){Pt===void 0&&(Pt={});var Wt={type:"MultiPoint",coordinates:wt};return u(Wt,Ct,Pt)}s.multiPoint=Tt;function ne(wt,Ct,Pt){Pt===void 0&&(Pt={});var Wt={type:"MultiPolygon",coordinates:wt};return u(Wt,Ct,Pt)}s.multiPolygon=ne;function ge(wt,Ct,Pt){Pt===void 0&&(Pt={});var Wt={type:"GeometryCollection",geometries:wt};return u(Wt,Ct,Pt)}s.geometryCollection=ge;function Ee(wt,Ct){if(Ct===void 0&&(Ct=0),Ct&&!(Ct>=0))throw new Error("precision must be a positive number");var Pt=Math.pow(10,Ct||0);return Math.round(wt*Pt)/Pt}s.round=Ee;function Ie(wt,Ct){Ct===void 0&&(Ct="kilometers");var Pt=s.factors[Ct];if(!Pt)throw new Error(Ct+" units is invalid");return wt*Pt}s.radiansToLength=Ie;function ze(wt,Ct){Ct===void 0&&(Ct="kilometers");var Pt=s.factors[Ct];if(!Pt)throw new Error(Ct+" units is invalid");return wt/Pt}s.lengthToRadians=ze;function yn(wt,Ct){return Ut(ze(wt,Ct))}s.lengthToDegrees=yn;function Ft(wt){var Ct=wt%360;return Ct<0&&(Ct+=360),Ct}s.bearingToAzimuth=Ft;function Ut(wt){var Ct=wt%(2*Math.PI);return Ct*180/Math.PI}s.radiansToDegrees=Ut;function Jt(wt){var Ct=wt%360;return Ct*Math.PI/180}s.degreesToRadians=Jt;function _e(wt,Ct,Pt){if(Ct===void 0&&(Ct="kilometers"),Pt===void 0&&(Pt="kilometers"),!(wt>=0))throw new Error("length must be a positive number");return Ie(ze(wt,Ct),Pt)}s.convertLength=_e;function ae(wt,Ct,Pt){if(Ct===void 0&&(Ct="meters"),Pt===void 0&&(Pt="kilometers"),!(wt>=0))throw new Error("area must be a positive number");var Wt=s.areaFactors[Ct];if(!Wt)throw new Error("invalid original units");var Ht=s.areaFactors[Pt];if(!Ht)throw new Error("invalid final units");return wt/Wt*Ht}s.convertArea=ae;function me(wt){return!isNaN(wt)&&wt!==null&&!Array.isArray(wt)}s.isNumber=me;function Q(wt){return!!wt&&wt.constructor===Object}s.isObject=Q;function ot(wt){if(!wt)throw new Error("bbox is required");if(!Array.isArray(wt))throw new Error("bbox must be an Array");if(wt.length!==4&&wt.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");wt.forEach(function(Ct){if(!me(Ct))throw new Error("bbox must only contain numbers")})}s.validateBBox=ot;function Lt(wt){if(!wt)throw new Error("id is required");if(["string","number"].indexOf(typeof wt)===-1)throw new Error("id must be a number or a string")}s.validateId=Lt}),bi=l(s=>{Object.defineProperty(s,"__esModule",{value:!0});var u=mn();function h(Ut,Jt,_e){if(Ut!==null)for(var ae,me,Q,ot,Lt,wt,Ct,Pt=0,Wt=0,Ht,Xt=Ut.type,fe=Xt==="FeatureCollection",he=Xt==="Feature",Me=fe?Ut.features.length:1,Ye=0;Ye<Me;Ye++){Ct=fe?Ut.features[Ye].geometry:he?Ut.geometry:Ut,Ht=Ct?Ct.type==="GeometryCollection":!1,Lt=Ht?Ct.geometries.length:1;for(var en=0;en<Lt;en++){var sn=0,Wn=0;if(ot=Ht?Ct.geometries[en]:Ct,ot!==null){wt=ot.coordinates;var Jn=ot.type;switch(Pt=_e&&(Jn==="Polygon"||Jn==="MultiPolygon")?1:0,Jn){case null:break;case"Point":if(Jt(wt,Wt,Ye,sn,Wn)===!1)return!1;Wt++,sn++;break;case"LineString":case"MultiPoint":for(ae=0;ae<wt.length;ae++){if(Jt(wt[ae],Wt,Ye,sn,Wn)===!1)return!1;Wt++,Jn==="MultiPoint"&&sn++}Jn==="LineString"&&sn++;break;case"Polygon":case"MultiLineString":for(ae=0;ae<wt.length;ae++){for(me=0;me<wt[ae].length-Pt;me++){if(Jt(wt[ae][me],Wt,Ye,sn,Wn)===!1)return!1;Wt++}Jn==="MultiLineString"&&sn++,Jn==="Polygon"&&Wn++}Jn==="Polygon"&&sn++;break;case"MultiPolygon":for(ae=0;ae<wt.length;ae++){for(Wn=0,me=0;me<wt[ae].length;me++){for(Q=0;Q<wt[ae][me].length-Pt;Q++){if(Jt(wt[ae][me][Q],Wt,Ye,sn,Wn)===!1)return!1;Wt++}Wn++}sn++}break;case"GeometryCollection":for(ae=0;ae<ot.geometries.length;ae++)if(h(ot.geometries[ae],Jt,_e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function g(Ut,Jt,_e,ae){var me=_e;return h(Ut,function(Q,ot,Lt,wt,Ct){ot===0&&_e===void 0?me=Q:me=Jt(me,Q,ot,Lt,wt,Ct)},ae),me}function y(Ut,Jt){var _e;switch(Ut.type){case"FeatureCollection":for(_e=0;_e<Ut.features.length&&Jt(Ut.features[_e].properties,_e)!==!1;_e++);break;case"Feature":Jt(Ut.properties,0);break}}function P(Ut,Jt,_e){var ae=_e;return y(Ut,function(me,Q){Q===0&&_e===void 0?ae=me:ae=Jt(ae,me,Q)}),ae}function B(Ut,Jt){if(Ut.type==="Feature")Jt(Ut,0);else if(Ut.type==="FeatureCollection")for(var _e=0;_e<Ut.features.length&&Jt(Ut.features[_e],_e)!==!1;_e++);}function T(Ut,Jt,_e){var ae=_e;return B(Ut,function(me,Q){Q===0&&_e===void 0?ae=me:ae=Jt(ae,me,Q)}),ae}function K(Ut){var Jt=[];return h(Ut,function(_e){Jt.push(_e)}),Jt}function st(Ut,Jt){var _e,ae,me,Q,ot,Lt,wt,Ct,Pt,Wt,Ht=0,Xt=Ut.type==="FeatureCollection",fe=Ut.type==="Feature",he=Xt?Ut.features.length:1;for(_e=0;_e<he;_e++){for(Lt=Xt?Ut.features[_e].geometry:fe?Ut.geometry:Ut,Ct=Xt?Ut.features[_e].properties:fe?Ut.properties:{},Pt=Xt?Ut.features[_e].bbox:fe?Ut.bbox:void 0,Wt=Xt?Ut.features[_e].id:fe?Ut.id:void 0,wt=Lt?Lt.type==="GeometryCollection":!1,ot=wt?Lt.geometries.length:1,me=0;me<ot;me++){if(Q=wt?Lt.geometries[me]:Lt,Q===null){if(Jt(null,Ht,Ct,Pt,Wt)===!1)return!1;continue}switch(Q.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Jt(Q,Ht,Ct,Pt,Wt)===!1)return!1;break}case"GeometryCollection":{for(ae=0;ae<Q.geometries.length;ae++)if(Jt(Q.geometries[ae],Ht,Ct,Pt,Wt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ht++}}function jt(Ut,Jt,_e){var ae=_e;return st(Ut,function(me,Q,ot,Lt,wt){Q===0&&_e===void 0?ae=me:ae=Jt(ae,me,Q,ot,Lt,wt)}),ae}function Tt(Ut,Jt){st(Ut,function(_e,ae,me,Q,ot){var Lt=_e===null?null:_e.type;switch(Lt){case null:case"Point":case"LineString":case"Polygon":return Jt(u.feature(_e,me,{bbox:Q,id:ot}),ae,0)===!1?!1:void 0}var wt;switch(Lt){case"MultiPoint":wt="Point";break;case"MultiLineString":wt="LineString";break;case"MultiPolygon":wt="Polygon";break}for(var Ct=0;Ct<_e.coordinates.length;Ct++){var Pt=_e.coordinates[Ct],Wt={type:wt,coordinates:Pt};if(Jt(u.feature(Wt,me),ae,Ct)===!1)return!1}})}function ne(Ut,Jt,_e){var ae=_e;return Tt(Ut,function(me,Q,ot){Q===0&&ot===0&&_e===void 0?ae=me:ae=Jt(ae,me,Q,ot)}),ae}function ge(Ut,Jt){Tt(Ut,function(_e,ae,me){var Q=0;if(_e.geometry){var ot=_e.geometry.type;if(!(ot==="Point"||ot==="MultiPoint")){var Lt,wt=0,Ct=0,Pt=0;if(h(_e,function(Wt,Ht,Xt,fe,he){if(Lt===void 0||ae>wt||fe>Ct||he>Pt){Lt=Wt,wt=ae,Ct=fe,Pt=he,Q=0;return}var Me=u.lineString([Lt,Wt],_e.properties);if(Jt(Me,ae,me,he,Q)===!1)return!1;Q++,Lt=Wt})===!1)return!1}}})}function Ee(Ut,Jt,_e){var ae=_e,me=!1;return ge(Ut,function(Q,ot,Lt,wt,Ct){me===!1&&_e===void 0?ae=Q:ae=Jt(ae,Q,ot,Lt,wt,Ct),me=!0}),ae}function Ie(Ut,Jt){if(!Ut)throw new Error("geojson is required");Tt(Ut,function(_e,ae,me){if(_e.geometry!==null){var Q=_e.geometry.type,ot=_e.geometry.coordinates;switch(Q){case"LineString":if(Jt(_e,ae,me,0,0)===!1)return!1;break;case"Polygon":for(var Lt=0;Lt<ot.length;Lt++)if(Jt(u.lineString(ot[Lt],_e.properties),ae,me,Lt)===!1)return!1;break}}})}function ze(Ut,Jt,_e){var ae=_e;return Ie(Ut,function(me,Q,ot,Lt){Q===0&&_e===void 0?ae=me:ae=Jt(ae,me,Q,ot,Lt)}),ae}function yn(Ut,Jt){if(Jt=Jt||{},!u.isObject(Jt))throw new Error("options is invalid");var _e=Jt.featureIndex||0,ae=Jt.multiFeatureIndex||0,me=Jt.geometryIndex||0,Q=Jt.segmentIndex||0,ot=Jt.properties,Lt;switch(Ut.type){case"FeatureCollection":_e<0&&(_e=Ut.features.length+_e),ot=ot||Ut.features[_e].properties,Lt=Ut.features[_e].geometry;break;case"Feature":ot=ot||Ut.properties,Lt=Ut.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Lt=Ut;break;default:throw new Error("geojson is invalid")}if(Lt===null)return null;var wt=Lt.coordinates;switch(Lt.type){case"Point":case"MultiPoint":return null;case"LineString":return Q<0&&(Q=wt.length+Q-1),u.lineString([wt[Q],wt[Q+1]],ot,Jt);case"Polygon":return me<0&&(me=wt.length+me),Q<0&&(Q=wt[me].length+Q-1),u.lineString([wt[me][Q],wt[me][Q+1]],ot,Jt);case"MultiLineString":return ae<0&&(ae=wt.length+ae),Q<0&&(Q=wt[ae].length+Q-1),u.lineString([wt[ae][Q],wt[ae][Q+1]],ot,Jt);case"MultiPolygon":return ae<0&&(ae=wt.length+ae),me<0&&(me=wt[ae].length+me),Q<0&&(Q=wt[ae][me].length-Q-1),u.lineString([wt[ae][me][Q],wt[ae][me][Q+1]],ot,Jt)}throw new Error("geojson is invalid")}function Ft(Ut,Jt){if(Jt=Jt||{},!u.isObject(Jt))throw new Error("options is invalid");var _e=Jt.featureIndex||0,ae=Jt.multiFeatureIndex||0,me=Jt.geometryIndex||0,Q=Jt.coordIndex||0,ot=Jt.properties,Lt;switch(Ut.type){case"FeatureCollection":_e<0&&(_e=Ut.features.length+_e),ot=ot||Ut.features[_e].properties,Lt=Ut.features[_e].geometry;break;case"Feature":ot=ot||Ut.properties,Lt=Ut.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Lt=Ut;break;default:throw new Error("geojson is invalid")}if(Lt===null)return null;var wt=Lt.coordinates;switch(Lt.type){case"Point":return u.point(wt,ot,Jt);case"MultiPoint":return ae<0&&(ae=wt.length+ae),u.point(wt[ae],ot,Jt);case"LineString":return Q<0&&(Q=wt.length+Q),u.point(wt[Q],ot,Jt);case"Polygon":return me<0&&(me=wt.length+me),Q<0&&(Q=wt[me].length+Q),u.point(wt[me][Q],ot,Jt);case"MultiLineString":return ae<0&&(ae=wt.length+ae),Q<0&&(Q=wt[ae].length+Q),u.point(wt[ae][Q],ot,Jt);case"MultiPolygon":return ae<0&&(ae=wt.length+ae),me<0&&(me=wt[ae].length+me),Q<0&&(Q=wt[ae][me].length-Q),u.point(wt[ae][me][Q],ot,Jt)}throw new Error("geojson is invalid")}s.coordAll=K,s.coordEach=h,s.coordReduce=g,s.featureEach=B,s.featureReduce=T,s.findPoint=Ft,s.findSegment=yn,s.flattenEach=Tt,s.flattenReduce=ne,s.geomEach=st,s.geomReduce=jt,s.lineEach=Ie,s.lineReduce=ze,s.propEach=y,s.propReduce=P,s.segmentEach=ge,s.segmentReduce=Ee}),oi=l(s=>{Object.defineProperty(s,"__esModule",{value:!0});var u=bi();function h(g){var y=[1/0,1/0,-1/0,-1/0];return u.coordEach(g,function(P){y[0]>P[0]&&(y[0]=P[0]),y[1]>P[1]&&(y[1]=P[1]),y[2]<P[0]&&(y[2]=P[0]),y[3]<P[1]&&(y[3]=P[1])}),y}h.default=h,s.default=h}),mi=l((s,u)=>{var h=Dn(),g=mn(),y=bi(),P=oi().default,B=y.featureEach;y.coordEach,g.polygon;var T=g.featureCollection;function K(st){var jt=new h(st);return jt.insert=function(Tt){if(Tt.type!=="Feature")throw new Error("invalid feature");return Tt.bbox=Tt.bbox?Tt.bbox:P(Tt),h.prototype.insert.call(this,Tt)},jt.load=function(Tt){var ne=[];return Array.isArray(Tt)?Tt.forEach(function(ge){if(ge.type!=="Feature")throw new Error("invalid features");ge.bbox=ge.bbox?ge.bbox:P(ge),ne.push(ge)}):B(Tt,function(ge){if(ge.type!=="Feature")throw new Error("invalid features");ge.bbox=ge.bbox?ge.bbox:P(ge),ne.push(ge)}),h.prototype.load.call(this,ne)},jt.remove=function(Tt,ne){if(Tt.type!=="Feature")throw new Error("invalid feature");return Tt.bbox=Tt.bbox?Tt.bbox:P(Tt),h.prototype.remove.call(this,Tt,ne)},jt.clear=function(){return h.prototype.clear.call(this)},jt.search=function(Tt){var ne=h.prototype.search.call(this,this.toBBox(Tt));return T(ne)},jt.collides=function(Tt){return h.prototype.collides.call(this,this.toBBox(Tt))},jt.all=function(){var Tt=h.prototype.all.call(this);return T(Tt)},jt.toJSON=function(){return h.prototype.toJSON.call(this)},jt.fromJSON=function(Tt){return h.prototype.fromJSON.call(this,Tt)},jt.toBBox=function(Tt){var ne;if(Tt.bbox)ne=Tt.bbox;else if(Array.isArray(Tt)&&Tt.length===4)ne=Tt;else if(Array.isArray(Tt)&&Tt.length===6)ne=[Tt[0],Tt[1],Tt[3],Tt[4]];else if(Tt.type==="Feature")ne=P(Tt);else if(Tt.type==="FeatureCollection")ne=P(Tt);else throw new Error("invalid geojson");return{minX:ne[0],minY:ne[1],maxX:ne[2],maxY:ne[3]}},jt}u.exports=K,u.exports.default=K});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var u=Object(this),h=u.length>>>0,g=arguments[1],y=0;y<h;y++)if(s.call(g,u[y],y,u))return y;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var u=Object(this),h=u.length>>>0,g=arguments[1],y=0;y<h;y++){var P=u[y];if(s.call(g,P,y,u))return P}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var u=1;u<arguments.length;u++){var h=arguments[u];if(h!=null)for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(s[g]=h[g])}return s}),function(s){s.forEach(function(u){u.hasOwnProperty("remove")||Object.defineProperty(u,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,u){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),g=h.length>>>0;if(g===0)return!1;var y=u|0,P=Math.max(y>=0?y:g-Math.abs(y),0);function B(T,K){return T===K||typeof T=="number"&&typeof K=="number"&&isNaN(T)&&isNaN(K)}for(;P<g;){if(B(h[P],s))return!0;P++}return!1}});var Zn={version:"2.18.3"},pn=p(Vr()),qn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},As={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ji={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},ur={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},il={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},sa={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Ms={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},wi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Bs={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Oo={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Ks={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},Ma={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ho={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ba={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},cs={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Ys={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},fo={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},oa={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Ri={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},rl={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},aa={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},Ln={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Pn={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Hr={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Fn={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Ta={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},la={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},po=ho,Gr={en:qn,de:As,it:Ji,id:ur,ro:il,ru:sa,es:Ms,nl:wi,fr:Bs,pt:po,pt_br:Ma,pt_pt:ho,zh:Oo,zh_tw:Ks,pl:Ba,sv:cs,el:Ys,hu:fo,da:oa,no:Ri,fa:rl,ua:aa,tr:Ln,cz:Pn,ja:Hr,fi:Fn,ko:Ta,ky:la},Js={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let u={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(u)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let u in s){let h=s[u];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},Da=Js,Ro={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(u=>{this._isRelevantForDrag(u)&&u.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(u=>{u.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let u in s){let h=s[u];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},Pi=Ro,zr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let u=s.target;this._isRelevantForRemoval(u)&&!u.pm.dragging()&&(u.removeFrom(this.map.pm._getContainingLayer()),u.remove(),u instanceof L.LayerGroup?(this._fireRemoveLayerGroup(u),this._fireRemoveLayerGroup(this.map,u)):(u.pm._fireRemove(u),u.pm._fireRemove(this.map,u)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let u in s){let h=s[u];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},Xs=zr,sl={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let u in s){let h=s[u];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Io=sl,ua=p(Vr()),go={_fireDrawStart(s="Draw",u={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,u)},_fireDrawEnd(s="Draw",u={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,u)},_fireCreate(s,u="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},u,h)},_fireCenterPlaced(s="Draw",u={}){let h=s==="Draw"?this._layer:void 0,g=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:g,latlng:this._layer.getLatLng()},s,u)},_fireCut(s,u,h,g="Draw",y={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:u,originalLayer:h},g,y)},_fireEdit(s=this._layer,u="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},u,h)},_fireEnable(s="Edit",u={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,u)},_fireDisable(s="Edit",u={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,u)},_fireUpdate(s="Edit",u={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,u)},_fireMarkerDragStart(s,u=void 0,h="Edit",g={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:u},h,g)},_fireMarkerDrag(s,u=void 0,h="Edit",g={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:u},h,g)},_fireMarkerDragEnd(s,u=void 0,h=void 0,g="Edit",y={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:u,intersectionReset:h},g,y)},_fireDragStart(s="Edit",u={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,u)},_fireDrag(s,u="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},u,h)},_fireDragEnd(s="Edit",u={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,u)},_fireDragEnable(s="Edit",u={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,u)},_fireDragDisable(s="Edit",u={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,u)},_fireRemove(s,u=s,h="Edit",g={}){this.__fire(s,"pm:remove",{layer:u,shape:this.getShape()},h,g)},_fireVertexAdded(s,u,h,g="Edit",y={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:u,latlng:h,shape:this.getShape()},g,y)},_fireVertexRemoved(s,u,h="Edit",g={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:u,shape:this.getShape()},h,g)},_fireVertexClick(s,u,h="Edit",g={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:u,shape:this.getShape()},h,g)},_fireIntersect(s,u=this._layer,h="Edit",g={}){this.__fire(u,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,g)},_fireLayerReset(s,u,h="Edit",g={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:u,shape:this.getShape()},h,g)},_fireChange(s,u="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},u,h)},_fireTextChange(s,u="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},u,h)},_fireTextFocus(s="Edit",u={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,u)},_fireTextBlur(s="Edit",u={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,u)},_fireSnapDrag(s,u,h="Snapping",g={}){this.__fire(s,"pm:snapdrag",u,h,g)},_fireSnap(s,u,h="Snapping",g={}){this.__fire(s,"pm:snap",u,h,g)},_fireUnsnap(s,u,h="Snapping",g={}){this.__fire(s,"pm:unsnap",u,h,g)},_fireRotationEnable(s,u,h="Rotation",g={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,g)},_fireRotationDisable(s,u="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},u,h)},_fireRotationStart(s,u,h="Rotation",g={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:u},h,g)},_fireRotation(s,u,h,g=this._rotationLayer,y="Rotation",P={}){this.__fire(s,"pm:rotate",{layer:g,helpLayer:this._layer,startAngle:this._startAngle,angle:g.pm.getAngle(),angleDiff:u,oldLatLngs:h,newLatLngs:g.getLatLngs()},y,P)},_fireRotationEnd(s,u,h,g="Rotation",y={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:u,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},g,y)},_fireActionClick(s,u,h,g="Toolbar",y={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:u,button:h},g,y)},_fireButtonClick(s,u,h="Toolbar",g={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:u},h,g)},_fireLangChange(s,u,h,g,y="Global",P={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:u,fallback:h,translations:g},y,P)},_fireGlobalDragModeToggled(s,u="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},u,h)},_fireGlobalEditModeToggled(s,u="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},u,h)},_fireGlobalRemovalModeToggled(s,u="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},u,h)},_fireGlobalCutModeToggled(s="Global",u={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,u)},_fireGlobalDrawModeToggled(s="Global",u={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,u)},_fireGlobalRotateModeToggled(s="Global",u={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,u)},_fireRemoveLayerGroup(s,u=s,h="Edit",g={}){this.__fire(s,"pm:remove",{layer:u,shape:void 0},h,g)},_fireKeyeventEvent(s,u,h,g="Global",y={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:u,focusOn:h},g,y)},__fire(s,u,h,g,y={}){h=(0,ua.default)(h,y,{source:g}),L.PM.Utils._fireEvent(s,u,h)}},Fo=go,Na=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let u="document";this.map.getContainer().contains(s.target)&&(u="map");let h={event:s,eventType:s.type,focusOn:u};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,u)},_onBlur(s){s.altKey=!1;let u={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=u,this._lastEvents.current=u},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),Nn=Na,Oa=p(lr());function hn(s){let u=L.PM.activeLang;return(0,Oa.default)(Gr[u],s)||(0,Oa.default)(Gr.en,s)||s}function yr(s){for(let u=0;u<s.length;u+=1){let h=s[u];if(Array.isArray(h)){if(yr(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function jo(s){return s.reduce((u,h)=>{if(h.length!==0){let g=Array.isArray(h)?jo(h):h;Array.isArray(g)?g.length!==0&&u.push(g):u.push(g)}return u},[])}function mo(s,u,h){let g={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:y,b:P,f:B}=g,T=s.lng,K=s.lat,st=h,jt=Math.PI,Tt=u*jt/180,ne=Math.sin(Tt),ge=Math.cos(Tt),Ee=(1-B)*Math.tan(K*jt/180),Ie=1/Math.sqrt(1+Ee*Ee),ze=Ee*Ie,yn=Math.atan2(Ee,ge),Ft=Ie*ne,Ut=1-Ft*Ft,Jt=Ut*(y*y-P*P)/(P*P),_e=1+Jt/16384*(4096+Jt*(-768+Jt*(320-175*Jt))),ae=Jt/1024*(256+Jt*(-128+Jt*(74-47*Jt))),me=st/(P*_e),Q=2*Math.PI,ot,Lt,wt;for(;Math.abs(me-Q)>1e-12;){ot=Math.cos(2*yn+me),Lt=Math.sin(me),wt=Math.cos(me);let Me=ae*Lt*(ot+ae/4*(wt*(-1+2*ot*ot)-ae/6*ot*(-3+4*Lt*Lt)*(-3+4*ot*ot)));Q=me,me=st/(P*_e)+Me}let Ct=ze*Lt-Ie*wt*ge,Pt=Math.atan2(ze*wt+Ie*Lt*ge,(1-B)*Math.sqrt(Ft*Ft+Ct*Ct)),Wt=Math.atan2(Lt*ne,Ie*wt-ze*Lt*ge),Ht=B/16*Ut*(4+B*(4-3*Ut)),Xt=Wt-(1-Ht)*B*Ft*(me+Ht*Lt*(ot+Ht*wt*(-1+2*ot*ot))),fe=T+Xt*180/jt,he=Pt*180/jt;return L.latLng(fe,he)}function Sr(s,u,h,g,y=!0){let P,B,T,K=[];for(let st=0;st<h;st+=1){if(y)P=st*360/h+g,B=mo(s,P,u),T=L.latLng(B.lng,B.lat);else{let jt=s.lat+Math.cos(2*st*Math.PI/h)*u,Tt=s.lng+Math.sin(2*st*Math.PI/h)*u;T=L.latLng(jt,Tt)}K.push(T)}return K}function Ra(s,u,h){u=(u+360)%360;let g=Math.PI/180,y=180/Math.PI,{R:P}=L.CRS.Earth,B=s.lng*g,T=s.lat*g,K=u*g,st=Math.sin(T),jt=Math.cos(T),Tt=Math.cos(h/P),ne=Math.sin(h/P),ge=Math.asin(st*Tt+jt*ne*Math.cos(K)),Ee=B+Math.atan2(Math.sin(K)*ne*jt,Tt-st*Math.sin(ge));Ee*=y;let Ie=Ee-360,ze=Ee<-180?Ee+360:Ee;return Ee=Ee>180?Ie:ze,L.latLng([ge*y,Ee])}function Ts(s,u,h){let g=s.latLngToContainerPoint(u),y=s.latLngToContainerPoint(h),P=Math.atan2(y.y-g.y,y.x-g.x)*180/Math.PI+90;return P+=P<0?360:0,P}function ca(s,u,h,g){let y=Ts(s,u,h);return Ra(u,y,g)}function ha(s,u,h="asc"){if(!u||Object.keys(u).length===0)return(K,st)=>K-st;let g=Object.keys(u),y,P=g.length-1,B={};for(;P>=0;)y=g[P],B[y.toLowerCase()]=u[y],P-=1;function T(K){if(K instanceof L.Marker)return"Marker";if(K instanceof L.Circle)return"Circle";if(K instanceof L.CircleMarker)return"CircleMarker";if(K instanceof L.Rectangle)return"Rectangle";if(K instanceof L.Polygon)return"Polygon";if(K instanceof L.Polyline)return"Line"}return(K,st)=>{let jt,Tt;if(jt=T(K.layer).toLowerCase(),Tt=T(st.layer).toLowerCase(),!jt||!Tt)return 0;let ne=jt in B?B[jt]:Number.MAX_SAFE_INTEGER,ge=Tt in B?B[Tt]:Number.MAX_SAFE_INTEGER,Ee=0;return ne<ge?Ee=-1:ne>ge&&(Ee=1),h==="desc"?Ee*-1:Ee}}function Wr(s,u=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(u).getLatLngs():L.polyline(u).getLatLngs()}function fa(s,u){var h,g,y,P;if((g=(h=u.options.crs)==null?void 0:h.projection)!=null&&g.MAX_LATITUDE){let B=(P=(y=u.options.crs)==null?void 0:y.projection)==null?void 0:P.MAX_LATITUDE;s.lat=Math.max(Math.min(B,s.lat),-B)}return s}function Ii(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var ol=L.Class.extend({includes:[Da,Pi,Xs,Io,Fo],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=Nn(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",u,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let y=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(y){let P=[`${y[1]}_${y[2]}`,`${y[1]}`];for(let B of P)if(Gr[B]){s=B;break}}}let g=L.PM.activeLang;u&&(Gr[s]=(0,pn.default)(Gr[h],u)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(g,s,h,Gr[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",u){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,u)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,u={}){let h=u.ignoreShapes||[],g=u.merge||!1;this.map.pm.Draw.shapes.forEach(y=>{h.indexOf(y)===-1&&this.map.pm.Draw[y].setPathOptions(s,g)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let u=(0,pn.default)(this.globalOptions,s);u.editable&&(u.resizeableCircleMarker=u.editable,delete u.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!u.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let g=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!u.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),g=!0),this.map.pm.Draw.shapes.forEach(y=>{this.map.pm.Draw[y].setOptions(u)}),h&&this.map.pm.Draw.CircleMarker.enable(),g&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(y=>{y.pm.setOptions(u)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=u,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let u=L.PM.Utils.findLayers(this.map);if(!s)return u;let h=L.featureGroup();return h._pmTempLayer=!0,u.forEach(g=>{h.addLayer(g)}),h},getGeomanDrawLayers(s=!1){let u=L.PM.Utils.findLayers(this.map).filter(g=>g._drawnByGeoman===!0);if(!s)return u;let h=L.featureGroup();return h._pmTempLayer=!0,u.forEach(g=>{h.addLayer(g)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){Ii(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let u="";s.type==="touchstart"||s.type==="pointerdown"?u="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(u="mouseup"),u&&Ii(this.map)._onClick(this._createMouseEvent(u,s))},_createMouseEvent(s,u){let h,g=u.touches[0]||u.changedTouches[0];try{h=new MouseEvent(s,{bubbles:u.bubbles,cancelable:u.cancelable,view:u.view,detail:g.detail,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY,ctrlKey:u.ctrlKey,altKey:u.altKey,shiftKey:u.shiftKey,metaKey:u.metaKey,button:u.button,relatedTarget:u.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,u.bubbles,u.cancelable,u.view,g.detail,g.screenX,g.screenY,g.clientX,g.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget)}return h}}),zo=ol,Zr=L.Control.extend({includes:[Fo],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let u=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${u}`,this._container);s.title&&h.setAttribute("title",s.title);let g=L.DomUtil.create("a","leaflet-buttons-control-button",h);g.setAttribute("role","button"),g.setAttribute("tabindex","0"),g.href="#";let y=L.DomUtil.create("div",`leaflet-pm-actions-container ${u}`,h),P=s.actions,B={cancel:{text:hn("actions.cancel"),title:hn("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:hn("actions.finish"),title:hn("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:hn("actions.removeLastVertex"),title:hn("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:hn("actions.finish"),title:hn("actions.finish"),onClick(K){this._map.pm.Draw[s.jsClass]._finishShape(K)}}};s._preparedActions=P.map(K=>{let st=typeof K=="string"?K:K.name,jt;if(B[st])jt=B[st];else if(K.text)jt=K;else return jt;let Tt=L.DomUtil.create("a",`leaflet-pm-action ${u} action-${st}`,y);if(Tt.setAttribute("role","button"),Tt.setAttribute("tabindex","0"),Tt.href="#",jt.title&&(Tt.title=jt.title),Tt.innerHTML=jt.text,L.DomEvent.disableClickPropagation(Tt),L.DomEvent.on(Tt,"click",L.DomEvent.stop),jt._node=Tt,!s.disabled&&jt.onClick){let ne=ge=>{ge.preventDefault();let Ee="",{buttons:Ie}=this._map.pm.Toolbar;for(let ze in Ie)if(Ie[ze]._button===s){Ee=ze;break}this._fireActionClick(jt,Ee,s)};L.DomEvent.addListener(Tt,"click",ne,this),L.DomEvent.addListener(Tt,"click",jt.onClick,this),L.DomEvent.addListener(Tt,"click",()=>this._updateActiveAction(s))}return jt}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let T=L.DomUtil.create("div","control-icon",g);return s.iconUrl&&T.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(T,s.className),L.DomEvent.disableClickPropagation(g),L.DomEvent.on(g,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(g,"click",this._onBtnClick,this),L.DomEvent.addListener(g,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(g,"pm-disabled"),g.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:u}=this._map.pm.Toolbar;for(let h in u)if(u[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",u=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(u,s),u.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(u,s),u.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var u;(u=s._preparedActions)==null||u.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),da=Zr;L.Control.PMButton=da;var Ia=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let u=`${s}Container`;return this[u]||(this[u]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[u]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),u={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let g=s[h];L.Util.setOptions(g,{className:u.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let u in s)s[u].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,u){return this.buttons[s]=u,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let u in this.buttons){let h=this.buttons[u];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,u,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let g=s;return h&&this.triggerClickOnToggledButtons(this.buttons[g]),this.buttons[g]?this.buttons[g].toggle(u):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:hn("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(ne,ge)=>{this.map.pm.Draw[ge.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},u={title:hn("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(ne,ge)=>{this.map.pm.Draw[ge.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:hn("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(ne,ge)=>{this.map.pm.Draw[ge.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},g={title:hn("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(ne,ge)=>{this.map.pm.Draw[ge.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},y={title:hn("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(ne,ge)=>{this.map.pm.Draw[ge.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},P={title:hn("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(ne,ge)=>{this.map.pm.Draw[ge.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},B={title:hn("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},T={title:hn("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},K={title:hn("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(ne,ge)=>{this.map.pm.Draw[ge.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},st={title:hn("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},jt={title:hn("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Tt={className:"control-icon leaflet-pm-icon-text",title:hn("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(ne,ge)=>{this.map.pm.Draw[ge.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(P)),this._addButton("drawPolygon",new L.Control.PMButton(u)),this._addButton("drawCircle",new L.Control.PMButton(g)),this._addButton("drawCircleMarker",new L.Control.PMButton(y)),this._addButton("drawText",new L.Control.PMButton(Tt)),this._addButton("editMode",new L.Control.PMButton(B)),this._addButton("dragMode",new L.Control.PMButton(T)),this._addButton("cutPolygon",new L.Control.PMButton(K)),this._addButton("removalMode",new L.Control.PMButton(st)),this._addButton("rotateMode",new L.Control.PMButton(jt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),u=[];this.options.drawControls===!1&&(u=u.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(u=u.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(u=u.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(u=u.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&u.indexOf(h)===-1){let g=s[h]._button.tool;g||(g="draw"),s[h].setPosition(this._getBtnPosition(g)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,u){this.options.positions[s]=u,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,u){if(u)typeof u!="object"&&(u={name:u});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!u.name)throw new TypeError("Button has no name");if(this.buttons[u.name])throw new TypeError("Button with this name already exists");let g=this.map.pm.Draw.createNewDrawInstance(u.name,h);u={...this.buttons[h]._button,...u};let y=this.createCustomControl(u);return{drawInstance:g,control:y}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let u={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(u));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let u={};if(s)for(let h in this.getButtons()){let g=this.getButtons()[h];(g._button.tool===s||s==="draw"&&!g._button.tool)&&(u[h]=g)}return u},changeControlOrder(s=[]){let u=this._shapeMapping(),h=[];s.forEach(P=>{u[P]?h.push(u[P]):h.push(P)});let g=this.getButtons(),y={};h.forEach(P=>{g[P]&&(y[P]=g[P])}),Object.keys(g).filter(P=>!g[P]._button.tool||g[P]._button.tool==="draw").forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),Object.keys(g).filter(P=>g[P]._button.tool==="edit").forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),Object.keys(g).filter(P=>g[P]._button.tool==="options").forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),Object.keys(g).filter(P=>g[P]._button.tool==="custom").forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),Object.keys(g).forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),this.map.pm.Toolbar.buttons=y,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),u=[];for(let h in s)u.push(h);return u},changeActionsOfControl(s,u){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!u)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=u,this.changeControlOrder()},setButtonDisabled(s,u){let h=this._btnNameMapping(s);u?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let u=this._shapeMapping();return u[s]?u[s]:s}}),Fa=Ia,pa=p(Vr()),vo={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(u=>{if(Array.isArray(u)){this._assignEvents(u);return}u.off("drag",this._handleSnapping,this),u.on("drag",this._handleSnapping,this),u.off("dragend",this._cleanupSnapping,this),u.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let u=s.target;u._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(u=>{u.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var T,K,st;let u=s.target;if(u._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((T=s==null?void 0:s.originalEvent)==null?void 0:T.altKey)||((st=(K=this._map)==null?void 0:K.pm)==null?void 0:st.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(u.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let g=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,y;g?y=h.latlng:y=this._checkPrioritiySnapping(h);let P=this.options.snapDistance,B={marker:u,shape:this._shape,snapLatLng:y,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(B.marker,B),this._fireSnapDrag(this._layer,B),h.distance<P){u._orgLatLng=u.getLatLng(),u.setLatLng(y),u._snapped=!0,u._snapInfo=B;let jt=()=>{this._snapLatLng=y,this._fireSnap(u,B),this._fireSnap(this._layer,B)},Tt=this._snapLatLng||{},ne=y||{};(Tt.lat!==ne.lat||Tt.lng!==ne.lng)&&jt()}else this._snapLatLng&&(this._unsnap(B),u._snapped=!1,u._snapInfo=void 0,this._fireUnsnap(B.marker,B),this._fireUnsnap(this._layer,B));return!0},_createSnapList(){let s=[],u=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(g=>{if((g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&g.options.snapIgnore!==!0){if(g.options.snapIgnore===void 0&&(!L.PM.optIn&&g.options.pmIgnore===!0||L.PM.optIn&&g.options.pmIgnore!==!1))return;(g instanceof L.Circle||g instanceof L.CircleMarker)&&g.pm&&g.pm._hiddenPolyCircle?s.push(g.pm._hiddenPolyCircle):g instanceof L.ImageOverlay&&(g=L.rectangle(g.getBounds())),s.push(g);let y=L.polyline([],{color:"red",pmIgnore:!0});y._pmTempLayer=!0,u.push(y),(g instanceof L.Circle||g instanceof L.CircleMarker)&&u.push(y)}}),s=s.filter(g=>this._layer!==g),s=s.filter(g=>g._latlng||g._latlngs&&yr(g._latlngs)),s=s.filter(g=>!g._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let g=L.polyline([],{color:"red",pmIgnore:!0});g._pmTempLayer=!0,u.push(g)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=u},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let u=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);u>-1&&this._snapList.splice(u,1)},_calcClosestLayer(s,u){return this._calcClosestLayers(s,u,1)[0]},_calcClosestLayers(s,u,h=1){let g=[],y={};u.forEach((B,T)=>{var st;if(B._parentCopy&&B._parentCopy===this._layer||((st=B.getLatLngs)==null?void 0:st.call(B).flat(5).length)<2)return;let K=this._calcLayerDistances(s,B);if(K.distance=Math.floor(K.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[T]){let jt=L.polyline([],{color:"red",pmIgnore:!0});jt._pmTempLayer=!0,this.debugIndicatorLines[T]=jt}this.debugIndicatorLines[T].setLatLngs([s,K.latlng])}h===1&&(y.distance===void 0||K.distance-5<=y.distance)?(K.distance+5<y.distance&&(g=[]),y=K,y.layer=B,g.push(y)):h!==1&&(y={},y=K,y.layer=B,g.push(y))}),h!==1&&(g=g.sort((B,T)=>B.distance-T.distance)),h===-1&&(h=g.length);let P=this._getClosestLayerByPriority(g,h);return L.Util.isArray(P)?P:[P]},_calcLayerDistances(s,u){let h=this._map,g=u instanceof L.Marker||u instanceof L.CircleMarker,y=u instanceof L.Polygon,P=s;if(g){let B=u.getLatLng();return{latlng:{...B},distance:this._getDistance(h,B,P)}}return this._calcLatLngDistances(P,u.getLatLngs(),h,y)},_calcLatLngDistances(s,u,h,g=!1){let y,P,B,T=K=>{K.forEach((st,jt)=>{if(Array.isArray(st)){T(st);return}if(this.options.snapSegment){let Tt=st,ne;g?ne=jt+1===K.length?0:jt+1:ne=jt+1===K.length?void 0:jt+1;let ge=K[ne];if(ge){let Ee=this._getDistanceToSegment(h,s,Tt,ge);(P===void 0||Ee<P)&&(P=Ee,B=[Tt,ge])}}else{let Tt=this._getDistance(h,s,st);(P===void 0||Tt<P)&&(P=Tt,y=st)}})};return T(u),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,B[0],B[1])},segment:B,distance:P}:{latlng:y,distance:P}},_getClosestLayerByPriority(s,u=1){s=s.sort((B,T)=>B._leaflet_id-T._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],g=this._map.pm.globalOptions.snappingOrder||[],y=0,P={};return g.concat(h).forEach(B=>{P[B]||(y+=1,P[B]=y)}),s.sort(ha("instanceofShape",P)),u===1?s[0]||{}:s.slice(0,u)},_checkPrioritiySnapping(s){let u=this._map,h=s.segment[0],g=s.segment[1],y=s.latlng,P=y;if(this.options.snapVertex){let B=this._getDistance(u,h,y),T=this._getDistance(u,g,y),K=B<T?h:g,st=B<T?B:T;if(this.options.snapMiddle){let Tt=L.PM.Utils.calcMiddleLatLng(u,h,g),ne=this._getDistance(u,Tt,y);ne<B&&ne<T&&(K=Tt,st=ne)}let jt=this.options.snapDistance;st<jt&&(P=K)}return{...P}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,u,h,g){let y=s.getMaxZoom();y===1/0&&(y=s.getZoom());let P=s.project(u,y),B=s.project(h,y),T=s.project(g,y),K=L.LineUtil.closestPointOnSegment(P,B,T);return s.unproject(K,y)},_getDistanceToSegment(s,u,h,g){let y=s.latLngToContainerPoint(u),P=s.latLngToContainerPoint(h),B=s.latLngToContainerPoint(g);return L.LineUtil.pointToSegmentDistance(y,P,B)},_getDistance(s,u,h){return s.latLngToContainerPoint(u).distanceTo(s.latLngToContainerPoint(h))}},Uo=vo,yo=L.Class.extend({includes:[Uo,Fo],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let u=new L.Icon.Default;u.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=u,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,u=!1){u?this.options.pathOptions=(0,pa.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,u){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(u)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(u=>{this[u]._enabled&&(s=u)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(u=>{(u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.Circle||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&(u._pmTempLayer||s.push(u))}),this._enabled?s.forEach(u=>{L.PM.Utils.disablePopup(u)}):s.forEach(u=>{L.PM.Utils.enablePopup(u)})},createNewDrawInstance(s,u){let h=this._getShapeFromBtnName(u);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[u]&&this[s].setOptions(this[u].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let u={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return u[s]?u[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,u){u==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":u==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":u==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),ki=yo;ki.Marker=ki.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(u=>{this.isRelevantMarker(u)&&u.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let u=s;u.target=this._hintMarker,this._handleSnapping(u)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng(),h=new L.Marker(u,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,u;(s=this.options.markerStyle)!=null&&s.icon&&((u=this._hintMarker)==null||u.setIcon(this.options.markerStyle.icon))}});var C=63710088e-1,et={centimeters:C*100,centimetres:C*100,degrees:C/111325,feet:C*3.28084,inches:C*39.37,kilometers:C/1e3,kilometres:C/1e3,meters:C,metres:C,miles:C/1609.344,millimeters:C*1e3,millimetres:C*1e3,nauticalmiles:C/1852,radians:1,yards:C*1.0936};function It(s,u,h){h===void 0&&(h={});var g={type:"Feature"};return(h.id===0||h.id)&&(g.id=h.id),h.bbox&&(g.bbox=h.bbox),g.properties=u||{},g.geometry=s,g}function Gt(s,u,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wn(s[0])||!wn(s[1]))throw new Error("coordinates must contain numbers");var g={type:"Point",coordinates:s};return It(g,u,h)}function ue(s,u,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var g={type:"LineString",coordinates:s};return It(g,u,h)}function we(s,u){u===void 0&&(u={});var h={type:"FeatureCollection"};return u.id&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.features=s,h}function Ne(s,u){u===void 0&&(u="kilometers");var h=et[u];if(!h)throw new Error(u+" units is invalid");return s*h}function He(s,u){u===void 0&&(u="kilometers");var h=et[u];if(!h)throw new Error(u+" units is invalid");return s/h}function Je(s){var u=s%(2*Math.PI);return u*180/Math.PI}function on(s){var u=s%360;return u*Math.PI/180}function wn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function On(s){var u,h,g={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")u=[h.coordinates];else if(h.type==="MultiLineString")u=h.coordinates;else if(h.type==="MultiPolygon")u=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")u=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return u.forEach(function(y){u.forEach(function(P){for(var B=0;B<y.length-1;B++)for(var T=B;T<P.length-1;T++)if(!(y===P&&(Math.abs(B-T)===1||B===0&&T===y.length-2&&y[B][0]===y[y.length-1][0]&&y[B][1]===y[y.length-1][1]))){var K=fi(y[B][0],y[B][1],y[B+1][0],y[B+1][1],P[T][0],P[T][1],P[T+1][0],P[T+1][1]);K&&g.features.push(Gt([K[0],K[1]]))}})}),g}function fi(s,u,h,g,y,P,B,T){var K,st,jt,Tt,ne,ge={x:null,y:null,onLine1:!1,onLine2:!1};return K=(T-P)*(h-s)-(B-y)*(g-u),K===0?ge.x!==null&&ge.y!==null?ge:!1:(st=u-P,jt=s-y,Tt=(B-y)*st-(T-P)*jt,ne=(h-s)*st-(g-u)*jt,st=Tt/K,jt=ne/K,ge.x=s+st*(h-s),ge.y=u+st*(g-u),st>=0&&st<=1&&(ge.onLine1=!0),jt>=0&&jt<=1&&(ge.onLine2=!0),ge.onLine1&&ge.onLine2?[ge.x,ge.y]:!1)}ki.Line=ki.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let u=s[s.length-1];this._hintline.setLatLngs([u,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let u=this._layer._defaultShape().slice();u.push(this._hintMarker.getLatLng()),this._change(u)},hasSelfIntersection(){return On(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,u){let h=L.polyline(this._layer.getLatLngs());s&&(u||(u=this._hintMarker.getLatLng()),h.addLatLng(u));let g=On(h.toGeoJSON(15));this._doesSelfIntersect=g.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(g,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),g=h[h.length-1];if(u.equals(h[0])||h.length>0&&u.equals(g)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:u,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(u);let y=this._createMarker(u);this._setTooltipText(),this._setHintLineAfterNewVertex(u),this._fireVertexAdded(y,void 0,u,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let u=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:g}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let y=s[s.length-1],P=u.indexOf(y.getLatLng());u=u.slice(0,P+1),this._layer.setLatLngs(u),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,g,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let u=L.polyline(s,this.options.pathOptions);this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let u=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._pmTempLayer=!0,this._layerGroup.addLayer(u),this._markers.push(u),u.on("click",this._finishShape,this),u},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),u="";s<=1?u=hn("tooltips.continueLine"):u=hn("tooltips.finishLine"),this._hintMarker.setTooltipContent(u)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,u;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(u=this._hintline)==null||u.setStyle(this.options.hintlineStyle)}}),ki.Polygon=ki.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let u=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._pmTempLayer=!0,this._layerGroup.addLayer(u),this._markers.push(u),this._layer.getLatLngs().flat().length===1?(u.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(u)-1,this.options.snappable&&this._cleanupSnapping()):u.on("click",()=>1),u},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),u="";s<=2?u=hn("tooltips.continueLine"):u=hn("tooltips.finishPoly"),this._hintMarker.setTooltipContent(u)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let u=L.polygon(s,this.options.pathOptions);this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),ki.Rectangle=ki.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let u=0;u<2;u+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(u),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(u)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(hn("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let u=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(u,"Draw")},_syncRectangleSize(){let s=fa(this._startMarker.getLatLng(),this._map),u=fa(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,u,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let g=[];h.forEach(y=>{!y.equals(s,1e-8)&&!y.equals(u,1e-8)&&g.push(y)}),g.forEach((y,P)=>{try{this._styleMarkers[P].setLatLng(y)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(u))return;let g=L.rectangle([h,u],this.options.pathOptions);if(this.options.rectangleAngle){let P=L.PM.Utils._getRotatedRectangle(h,u,this.options.rectangleAngle||0,this._map);g.setLatLngs(P),g.pm&&g.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g);let y=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(y))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),ki.CircleMarker=ki.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let u={};L.extend(u,this.options.templineStyle),u.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),u),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let u=this._hintMarker.getLatLng();this._centerMarker.setLatLng(u),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(hn("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),u=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,u])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),u=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,u);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let u=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(u,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(u,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let B=this._hintMarker.getLatLng();h=this._distanceCalculation(u,B),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let g={...this.options.pathOptions,radius:h},y=new this._BaseCircleClass(u,g);this._setPane(y,"layerPane"),this._finishLayer(y),y.addTo(this._map.pm._getContainingLayer()),y.pm&&y.pm._updateHiddenPolyCircle(),this._fireCreate(y);let P=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(P))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let u=this._centerMarker.getLatLng(),h=this._distanceCalculation(u,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=ca(this._map,u,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=ca(this._map,u,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),u=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,u);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var u,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(u=this._layer)==null||u.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,u){return this._map.project(s).distanceTo(this._map.project(u))}}),ki.Circle=ki.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,u){return this._map.distance(s,u)}});function $n(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Kn(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Fi(s){return s.type==="Feature"?s.geometry:s}function Bi(s,u){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function Ur(s,u,h){if(s!==null)for(var g,y,P,B,T,K,st,jt=0,Tt=0,ne,ge=s.type,Ee=ge==="FeatureCollection",Ie=ge==="Feature",ze=Ee?s.features.length:1,yn=0;yn<ze;yn++){st=Ee?s.features[yn].geometry:Ie?s.geometry:s,ne=st?st.type==="GeometryCollection":!1,T=ne?st.geometries.length:1;for(var Ft=0;Ft<T;Ft++){var Ut=0,Jt=0;if(B=ne?st.geometries[Ft]:st,B!==null){K=B.coordinates;var _e=B.type;switch(jt=0,_e){case null:break;case"Point":if(u(K,Tt,yn,Ut,Jt)===!1)return!1;Tt++,Ut++;break;case"LineString":case"MultiPoint":for(g=0;g<K.length;g++){if(u(K[g],Tt,yn,Ut,Jt)===!1)return!1;Tt++,_e==="MultiPoint"&&Ut++}_e==="LineString"&&Ut++;break;case"Polygon":case"MultiLineString":for(g=0;g<K.length;g++){for(y=0;y<K[g].length-jt;y++){if(u(K[g][y],Tt,yn,Ut,Jt)===!1)return!1;Tt++}_e==="MultiLineString"&&Ut++,_e==="Polygon"&&Jt++}_e==="Polygon"&&Ut++;break;case"MultiPolygon":for(g=0;g<K.length;g++){for(Jt=0,y=0;y<K[g].length;y++){for(P=0;P<K[g][y].length-jt;P++){if(u(K[g][y][P],Tt,yn,Ut,Jt)===!1)return!1;Tt++}Jt++}Ut++}break;case"GeometryCollection":for(g=0;g<B.geometries.length;g++)if(Ur(B.geometries[g],u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ni(s,u){if(s.type==="Feature")u(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&u(s.features[h],h)!==!1;h++);}function _r(s,u,h){var g=h;return ni(s,function(y,P){P===0&&h===void 0?g=y:g=u(g,y,P)}),g}function al(s,u){var h,g,y,P,B,T,K,st,jt,Tt,ne=0,ge=s.type==="FeatureCollection",Ee=s.type==="Feature",Ie=ge?s.features.length:1;for(h=0;h<Ie;h++){for(T=ge?s.features[h].geometry:Ee?s.geometry:s,st=ge?s.features[h].properties:Ee?s.properties:{},jt=ge?s.features[h].bbox:Ee?s.bbox:void 0,Tt=ge?s.features[h].id:Ee?s.id:void 0,K=T?T.type==="GeometryCollection":!1,B=K?T.geometries.length:1,y=0;y<B;y++){if(P=K?T.geometries[y]:T,P===null){if(u(null,ne,st,jt,Tt)===!1)return!1;continue}switch(P.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(P,ne,st,jt,Tt)===!1)return!1;break}case"GeometryCollection":{for(g=0;g<P.geometries.length;g++)if(u(P.geometries[g],ne,st,jt,Tt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ne++}}function br(s,u){al(s,function(h,g,y,P,B){var T=h===null?null:h.type;switch(T){case null:case"Point":case"LineString":case"Polygon":return u(It(h,y,{bbox:P,id:B}),g,0)===!1?!1:void 0}var K;switch(T){case"MultiPoint":K="Point";break;case"MultiLineString":K="LineString";break;case"MultiPolygon":K="Polygon";break}for(var st=0;st<h.coordinates.length;st++){var jt=h.coordinates[st],Tt={type:K,coordinates:jt};if(u(It(Tt,y),g,st)===!1)return!1}})}function ja(s){if(!s)throw new Error("geojson is required");var u=[];return br(s,function(h){hs(h,u)}),we(u)}function hs(s,u){var h=[],g=s.geometry;if(g!==null){switch(g.type){case"Polygon":h=Kn(g);break;case"LineString":h=[Kn(g)]}h.forEach(function(y){var P=za(y,s.properties);P.forEach(function(B){B.id=u.length,u.push(B)})})}}function za(s,u){var h=[];return s.reduce(function(g,y){var P=ue([g,y],u);return P.bbox=Qs(g,y),h.push(P),y}),h}function Qs(s,u){var h=s[0],g=s[1],y=u[0],P=u[1],B=h<y?h:y,T=g<P?g:P,K=h>y?h:y,st=g>P?g:P;return[B,T,K,st]}var to=ja,Ti=p(mi(),1);function ga(s,u){var h={},g=[];if(s.type==="LineString"&&(s=It(s)),u.type==="LineString"&&(u=It(u)),s.type==="Feature"&&u.type==="Feature"&&s.geometry!==null&&u.geometry!==null&&s.geometry.type==="LineString"&&u.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&u.geometry.coordinates.length===2){var y=Er(s,u);return y&&g.push(y),we(g)}var P=(0,Ti.default)();return P.load(to(u)),ni(to(s),function(B){ni(P.search(B),function(T){var K=Er(B,T);if(K){var st=Kn(K).join(",");h[st]||(h[st]=!0,g.push(K))}})}),we(g)}function Er(s,u){var h=Kn(s),g=Kn(u);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(g.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var y=h[0][0],P=h[0][1],B=h[1][0],T=h[1][1],K=g[0][0],st=g[0][1],jt=g[1][0],Tt=g[1][1],ne=(Tt-st)*(B-y)-(jt-K)*(T-P),ge=(jt-K)*(P-st)-(Tt-st)*(y-K),Ee=(B-y)*(P-st)-(T-P)*(y-K);if(ne===0)return null;var Ie=ge/ne,ze=Ee/ne;if(Ie>=0&&Ie<=1&&ze>=0&&ze<=1){var yn=y+Ie*(B-y),Ft=P+Ie*(T-P);return Gt([yn,Ft])}return null}var wr=ga,ma=p(mi(),1);function cr(s,u,h){h===void 0&&(h={});var g=$n(s),y=$n(u),P=on(y[1]-g[1]),B=on(y[0]-g[0]),T=on(g[1]),K=on(y[1]),st=Math.pow(Math.sin(P/2),2)+Math.pow(Math.sin(B/2),2)*Math.cos(T)*Math.cos(K);return Ne(2*Math.atan2(Math.sqrt(st),Math.sqrt(1-st)),h.units)}var eo=cr;function qr(s){var u=s[0],h=s[1],g=s[2],y=s[3],P=eo(s.slice(0,2),[g,h]),B=eo(s.slice(0,2),[u,y]);if(P>=B){var T=(h+y)/2;return[u,T-(g-u)/2,g,T+(g-u)/2]}else{var K=(u+g)/2;return[K-(y-h)/2,h,K+(y-h)/2,y]}}var ll=qr;function ji(s){var u=[1/0,1/0,-1/0,-1/0];return Ur(s,function(h){u[0]>h[0]&&(u[0]=h[0]),u[1]>h[1]&&(u[1]=h[1]),u[2]<h[0]&&(u[2]=h[0]),u[3]<h[1]&&(u[3]=h[1])}),u}ji.default=ji;var Ds=ji;function Kr(s,u){u===void 0&&(u={});var h=u.precision,g=u.coordinates,y=u.mutate;if(h=h==null||isNaN(h)?6:h,g=g==null||isNaN(g)?3:g,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof g!="number")throw new Error("<coordinates> must be a number");(y===!1||y===void 0)&&(s=JSON.parse(JSON.stringify(s)));var P=Math.pow(10,h);return Ur(s,function(B){qo(B,P,g)}),s}function qo(s,u,h){s.length>h&&s.splice(h,s.length);for(var g=0;g<s.length;g++)s[g]=Math.round(s[g]*u)/u;return s}var no=Kr;function Ns(s,u,h){if(h===void 0&&(h={}),h.final===!0)return Xi(s,u);var g=$n(s),y=$n(u),P=on(g[0]),B=on(y[0]),T=on(g[1]),K=on(y[1]),st=Math.sin(B-P)*Math.cos(K),jt=Math.cos(T)*Math.sin(K)-Math.sin(T)*Math.cos(K)*Math.cos(B-P);return Je(Math.atan2(st,jt))}function Xi(s,u){var h=Ns(u,s);return h=(h+180)%360,h}function Hi(s,u,h,g){g===void 0&&(g={});var y=$n(s),P=on(y[0]),B=on(y[1]),T=on(h),K=He(u,g.units),st=Math.asin(Math.sin(B)*Math.cos(K)+Math.cos(B)*Math.sin(K)*Math.cos(T)),jt=P+Math.atan2(Math.sin(T)*Math.sin(K)*Math.cos(B),Math.cos(K)-Math.sin(B)*Math.sin(st)),Tt=Je(jt),ne=Je(st);return Gt([Tt,ne],g.properties)}function fs(s,u,h){h===void 0&&(h={});var g=Gt([1/0,1/0],{dist:1/0}),y=0;return br(s,function(P){for(var B=Kn(P),T=0;T<B.length-1;T++){var K=Gt(B[T]);K.properties.dist=eo(u,K,h);var st=Gt(B[T+1]);st.properties.dist=eo(u,st,h);var jt=eo(K,st,h),Tt=Math.max(K.properties.dist,st.properties.dist),ne=Ns(K,st),ge=Hi(u,Tt,ne+90,h),Ee=Hi(u,Tt,ne-90,h),Ie=wr(ue([ge.geometry.coordinates,Ee.geometry.coordinates]),ue([K.geometry.coordinates,st.geometry.coordinates])),ze=null;Ie.features.length>0&&(ze=Ie.features[0],ze.properties.dist=eo(u,ze,h),ze.properties.location=y+eo(K,ze,h)),K.properties.dist<g.properties.dist&&(g=K,g.properties.index=T,g.properties.location=y),st.properties.dist<g.properties.dist&&(g=st,g.properties.index=T+1,g.properties.location=y+jt),ze&&ze.properties.dist<g.properties.dist&&(g=ze,g.properties.index=T),y+=jt}}),g}var Ar=fs;function Yr(s,u){if(!s)throw new Error("line is required");if(!u)throw new Error("splitter is required");var h=Bi(s),g=Bi(u);if(h!=="LineString")throw new Error("line must be LineString");if(g==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(g==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var y=no(u,{precision:7});switch(g){case"Point":return Jr(s,y);case"MultiPoint":return io(s,y);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return io(s,wr(s,y))}}function io(s,u){var h=[],g=(0,ma.default)();return br(u,function(y){if(h.forEach(function(T,K){T.id=K}),!h.length)h=Jr(s,y).features,h.forEach(function(T){T.bbox||(T.bbox=ll(Ds(T)))}),g.load(we(h));else{var P=g.search(y);if(P.features.length){var B=xi(y,P);h=h.filter(function(T){return T.id!==B.id}),g.remove(B),ni(Jr(B,y),function(T){h.push(T),g.insert(T)})}}}),we(h)}function Jr(s,u){var h=[],g=Kn(s)[0],y=Kn(s)[s.geometry.coordinates.length-1];if(Os(g,$n(u))||Os(y,$n(u)))return we([s]);var P=(0,ma.default)(),B=to(s);P.load(B);var T=P.search(u);if(!T.features.length)return we([s]);var K=xi(u,T),st=[g],jt=_r(B,function(Tt,ne,ge){var Ee=Kn(ne)[1],Ie=$n(u);return ge===K.id?(Tt.push(Ie),h.push(ue(Tt)),Os(Ie,Ee)?[Ie]:[Ie,Ee]):(Tt.push(Ee),Tt)},st);return jt.length>1&&h.push(ue(jt)),we(h)}function xi(s,u){if(!u.features.length)throw new Error("lines must contain features");if(u.features.length===1)return u.features[0];var h,g=1/0;return ni(u,function(y){var P=Ar(y,s),B=P.properties.dist;B<g&&(h=y,g=B)}),h}function Os(s,u){return s[0]===u[0]&&s[1]===u[1]}var xr=Yr;function hr(s,u,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!u)throw new Error("polygon is required");var g=$n(s),y=Fi(u),P=y.type,B=u.bbox,T=y.coordinates;if(B&&Ua(g,B)===!1)return!1;P==="Polygon"&&(T=[T]);for(var K=!1,st=0;st<T.length&&!K;st++)if($o(g,T[st][0],h.ignoreBoundary)){for(var jt=!1,Tt=1;Tt<T[st].length&&!jt;)$o(g,T[st][Tt],!h.ignoreBoundary)&&(jt=!0),Tt++;jt||(K=!0)}return K}function $o(s,u,h){var g=!1;u[0][0]===u[u.length-1][0]&&u[0][1]===u[u.length-1][1]&&(u=u.slice(0,u.length-1));for(var y=0,P=u.length-1;y<u.length;P=y++){var B=u[y][0],T=u[y][1],K=u[P][0],st=u[P][1],jt=s[1]*(B-K)+T*(K-s[0])+st*(s[0]-B)===0&&(B-s[0])*(K-s[0])<=0&&(T-s[1])*(st-s[1])<=0;if(jt)return!h;var Tt=T>s[1]!=st>s[1]&&s[0]<(K-B)*(s[1]-T)/(st-T)+B;Tt&&(g=!g)}return g}function Ua(s,u){return u[0]<=s[0]&&u[1]<=s[1]&&u[2]>=s[0]&&u[3]>=s[1]}function qa(s,u,h){h===void 0&&(h={});for(var g=$n(s),y=Kn(u),P=0;P<y.length-1;P++){var B=!1;if(h.ignoreEndVertices&&(P===0&&(B="start"),P===y.length-2&&(B="end"),P===0&&P+1===y.length-1&&(B="both")),fr(y[P],y[P+1],g,B,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function fr(s,u,h,g,y){var P=h[0],B=h[1],T=s[0],K=s[1],st=u[0],jt=u[1],Tt=h[0]-T,ne=h[1]-K,ge=st-T,Ee=jt-K,Ie=Tt*Ee-ne*ge;if(y!==null){if(Math.abs(Ie)>y)return!1}else if(Ie!==0)return!1;if(g){if(g==="start")return Math.abs(ge)>=Math.abs(Ee)?ge>0?T<P&&P<=st:st<=P&&P<T:Ee>0?K<B&&B<=jt:jt<=B&&B<K;if(g==="end")return Math.abs(ge)>=Math.abs(Ee)?ge>0?T<=P&&P<st:st<P&&P<=T:Ee>0?K<=B&&B<jt:jt<B&&B<=K;if(g==="both")return Math.abs(ge)>=Math.abs(Ee)?ge>0?T<P&&P<st:st<P&&P<T:Ee>0?K<B&&B<jt:jt<B&&B<K}else return Math.abs(ge)>=Math.abs(Ee)?ge>0?T<=P&&P<=st:st<=P&&P<=T:Ee>0?K<=B&&B<=jt:jt<=B&&B<=K;return!1}var Mr=qa;function _o(s,u){var h=Fi(s),g=Fi(u),y=h.type,P=g.type,B=h.coordinates,T=g.coordinates;switch(y){case"Point":switch(P){case"Point":return Yn(B,T);default:throw new Error("feature2 "+P+" geometry not supported")}case"MultiPoint":switch(P){case"Point":return Rs(h,g);case"MultiPoint":return va(h,g);default:throw new Error("feature2 "+P+" geometry not supported")}case"LineString":switch(P){case"Point":return Mr(g,h,{ignoreEndVertices:!0});case"LineString":return ro(h,g);case"MultiPoint":return bo(h,g);default:throw new Error("feature2 "+P+" geometry not supported")}case"Polygon":switch(P){case"Point":return hr(g,h,{ignoreBoundary:!0});case"LineString":return Xr(h,g);case"Polygon":return Qi(h,g);case"MultiPoint":return wo(h,g);default:throw new Error("feature2 "+P+" geometry not supported")}default:throw new Error("feature1 "+y+" geometry not supported")}}function Rs(s,u){var h,g=!1;for(h=0;h<s.coordinates.length;h++)if(Yn(s.coordinates[h],u.coordinates)){g=!0;break}return g}function va(s,u){for(var h=0,g=u.coordinates;h<g.length;h++){for(var y=g[h],P=!1,B=0,T=s.coordinates;B<T.length;B++){var K=T[B];if(Yn(y,K)){P=!0;break}}if(!P)return!1}return!0}function bo(s,u){for(var h=!1,g=0,y=u.coordinates;g<y.length;g++){var P=y[g];if(Mr(P,s,{ignoreEndVertices:!0})&&(h=!0),!Mr(P,s))return!1}return!!h}function wo(s,u){for(var h=0,g=u.coordinates;h<g.length;h++){var y=g[h];if(!hr(y,s,{ignoreBoundary:!0}))return!1}return!0}function ro(s,u){for(var h=!1,g=0,y=u.coordinates;g<y.length;g++){var P=y[g];if(Mr({type:"Point",coordinates:P},s,{ignoreEndVertices:!0})&&(h=!0),!Mr({type:"Point",coordinates:P},s,{ignoreEndVertices:!1}))return!1}return h}function Xr(s,u){var h=!1,g=0,y=Ds(s),P=Ds(u);if(!ti(y,P))return!1;for(g;g<u.coordinates.length-1;g++){var B=Si(u.coordinates[g],u.coordinates[g+1]);if(hr({type:"Point",coordinates:B},s,{ignoreBoundary:!0})){h=!0;break}}return h}function Qi(s,u){if(s.type==="Feature"&&s.geometry===null||u.type==="Feature"&&u.geometry===null)return!1;var h=Ds(s),g=Ds(u);if(!ti(h,g))return!1;for(var y=Fi(u).coordinates,P=0,B=y;P<B.length;P++)for(var T=B[P],K=0,st=T;K<st.length;K++){var jt=st[K];if(!hr(jt,s))return!1}return!0}function ti(s,u){return!(s[0]>u[0]||s[2]<u[2]||s[1]>u[1]||s[3]<u[3])}function Yn(s,u){return s[0]===u[0]&&s[1]===u[1]}function Si(s,u){return[(s[0]+u[0])/2,(s[1]+u[1])/2]}var ii=p(lr()),ds=s=>()=>s,xo=s=>{let u=s?(h,g)=>g.minus(h).abs().isLessThanOrEqualTo(s):ds(!1);return(h,g)=>u(h,g)?0:h.comparedTo(g)};function Is(s){let u=s?(h,g,y,P,B)=>h.exponentiatedBy(2).isLessThanOrEqualTo(P.minus(g).exponentiatedBy(2).plus(B.minus(y).exponentiatedBy(2)).times(s)):ds(!1);return(h,g,y)=>{let P=h.x,B=h.y,T=y.x,K=y.y,st=B.minus(K).times(g.x.minus(T)).minus(P.minus(T).times(g.y.minus(K)));return u(st,P,B,T,K)?0:st.comparedTo(0)}}var ul=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Lo=Math.ceil,zi=Math.floor,ri="[BigNumber Error] ",Br=ri+"Number primitive has more than 15 significant digits: ",Tr=1e14,vn=14,cl=9007199254740991,Vo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Qr=1e7,dr=1e9;function Il(s){var u,h,g,y=Ft.prototype={constructor:Ft,toString:null,valueOf:null},P=new Ft(1),B=20,T=4,K=-7,st=21,jt=-1e7,Tt=1e7,ne=!1,ge=1,Ee=0,Ie={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ze="0123456789abcdefghijklmnopqrstuvwxyz",yn=!0;function Ft(Q,ot){var Lt,wt,Ct,Pt,Wt,Ht,Xt,fe,he=this;if(!(he instanceof Ft))return new Ft(Q,ot);if(ot==null){if(Q&&Q._isBigNumber===!0){he.s=Q.s,!Q.c||Q.e>Tt?he.c=he.e=null:Q.e<jt?he.c=[he.e=0]:(he.e=Q.e,he.c=Q.c.slice());return}if((Ht=typeof Q=="number")&&Q*0==0){if(he.s=1/Q<0?(Q=-Q,-1):1,Q===~~Q){for(Pt=0,Wt=Q;Wt>=10;Wt/=10,Pt++);Pt>Tt?he.c=he.e=null:(he.e=Pt,he.c=[Q]);return}fe=String(Q)}else{if(!ul.test(fe=String(Q)))return g(he,fe,Ht);he.s=fe.charCodeAt(0)==45?(fe=fe.slice(1),-1):1}(Pt=fe.indexOf("."))>-1&&(fe=fe.replace(".","")),(Wt=fe.search(/e/i))>0?(Pt<0&&(Pt=Wt),Pt+=+fe.slice(Wt+1),fe=fe.substring(0,Wt)):Pt<0&&(Pt=fe.length)}else{if(r(ot,2,ze.length,"Base"),ot==10&&yn)return he=new Ft(Q),ae(he,B+he.e+1,T);if(fe=String(Q),Ht=typeof Q=="number"){if(Q*0!=0)return g(he,fe,Ht,ot);if(he.s=1/Q<0?(fe=fe.slice(1),-1):1,Ft.DEBUG&&fe.replace(/^0\.0*|\./,"").length>15)throw Error(Br+Q)}else he.s=fe.charCodeAt(0)===45?(fe=fe.slice(1),-1):1;for(Lt=ze.slice(0,ot),Pt=Wt=0,Xt=fe.length;Wt<Xt;Wt++)if(Lt.indexOf(wt=fe.charAt(Wt))<0){if(wt=="."){if(Wt>Pt){Pt=Xt;continue}}else if(!Ct&&(fe==fe.toUpperCase()&&(fe=fe.toLowerCase())||fe==fe.toLowerCase()&&(fe=fe.toUpperCase()))){Ct=!0,Wt=-1,Pt=0;continue}return g(he,String(Q),Ht,ot)}Ht=!1,fe=h(fe,ot,10,he.s),(Pt=fe.indexOf("."))>-1?fe=fe.replace(".",""):Pt=fe.length}for(Wt=0;fe.charCodeAt(Wt)===48;Wt++);for(Xt=fe.length;fe.charCodeAt(--Xt)===48;);if(fe=fe.slice(Wt,++Xt)){if(Xt-=Wt,Ht&&Ft.DEBUG&&Xt>15&&(Q>cl||Q!==zi(Q)))throw Error(Br+he.s*Q);if((Pt=Pt-Wt-1)>Tt)he.c=he.e=null;else if(Pt<jt)he.c=[he.e=0];else{if(he.e=Pt,he.c=[],Wt=(Pt+1)%vn,Pt<0&&(Wt+=vn),Wt<Xt){for(Wt&&he.c.push(+fe.slice(0,Wt)),Xt-=vn;Wt<Xt;)he.c.push(+fe.slice(Wt,Wt+=vn));Wt=vn-(fe=fe.slice(Wt)).length}else Wt-=Xt;for(;Wt--;fe+="0");he.c.push(+fe)}}else he.c=[he.e=0]}Ft.clone=Il,Ft.ROUND_UP=0,Ft.ROUND_DOWN=1,Ft.ROUND_CEIL=2,Ft.ROUND_FLOOR=3,Ft.ROUND_HALF_UP=4,Ft.ROUND_HALF_DOWN=5,Ft.ROUND_HALF_EVEN=6,Ft.ROUND_HALF_CEIL=7,Ft.ROUND_HALF_FLOOR=8,Ft.EUCLID=9,Ft.config=Ft.set=function(Q){var ot,Lt;if(Q!=null)if(typeof Q=="object"){if(Q.hasOwnProperty(ot="DECIMAL_PLACES")&&(Lt=Q[ot],r(Lt,0,dr,ot),B=Lt),Q.hasOwnProperty(ot="ROUNDING_MODE")&&(Lt=Q[ot],r(Lt,0,8,ot),T=Lt),Q.hasOwnProperty(ot="EXPONENTIAL_AT")&&(Lt=Q[ot],Lt&&Lt.pop?(r(Lt[0],-1e9,0,ot),r(Lt[1],0,dr,ot),K=Lt[0],st=Lt[1]):(r(Lt,-1e9,dr,ot),K=-(st=Lt<0?-Lt:Lt))),Q.hasOwnProperty(ot="RANGE"))if(Lt=Q[ot],Lt&&Lt.pop)r(Lt[0],-1e9,-1,ot),r(Lt[1],1,dr,ot),jt=Lt[0],Tt=Lt[1];else if(r(Lt,-1e9,dr,ot),Lt)jt=-(Tt=Lt<0?-Lt:Lt);else throw Error(ri+ot+" cannot be zero: "+Lt);if(Q.hasOwnProperty(ot="CRYPTO"))if(Lt=Q[ot],Lt===!!Lt)if(Lt)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ne=Lt;else throw ne=!Lt,Error(ri+"crypto unavailable");else ne=Lt;else throw Error(ri+ot+" not true or false: "+Lt);if(Q.hasOwnProperty(ot="MODULO_MODE")&&(Lt=Q[ot],r(Lt,0,9,ot),ge=Lt),Q.hasOwnProperty(ot="POW_PRECISION")&&(Lt=Q[ot],r(Lt,0,dr,ot),Ee=Lt),Q.hasOwnProperty(ot="FORMAT"))if(Lt=Q[ot],typeof Lt=="object")Ie=Lt;else throw Error(ri+ot+" not an object: "+Lt);if(Q.hasOwnProperty(ot="ALPHABET"))if(Lt=Q[ot],typeof Lt=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Lt))yn=Lt.slice(0,10)=="0123456789",ze=Lt;else throw Error(ri+ot+" invalid: "+Lt)}else throw Error(ri+"Object expected: "+Q);return{DECIMAL_PLACES:B,ROUNDING_MODE:T,EXPONENTIAL_AT:[K,st],RANGE:[jt,Tt],CRYPTO:ne,MODULO_MODE:ge,POW_PRECISION:Ee,FORMAT:Ie,ALPHABET:ze}},Ft.isBigNumber=function(Q){if(!Q||Q._isBigNumber!==!0)return!1;if(!Ft.DEBUG)return!0;var ot,Lt,wt=Q.c,Ct=Q.e,Pt=Q.s;t:if({}.toString.call(wt)=="[object Array]"){if((Pt===1||Pt===-1)&&Ct>=-1e9&&Ct<=dr&&Ct===zi(Ct)){if(wt[0]===0){if(Ct===0&&wt.length===1)return!0;break t}if(ot=(Ct+1)%vn,ot<1&&(ot+=vn),String(wt[0]).length==ot){for(ot=0;ot<wt.length;ot++)if(Lt=wt[ot],Lt<0||Lt>=Tr||Lt!==zi(Lt))break t;if(Lt!==0)return!0}}}else if(wt===null&&Ct===null&&(Pt===null||Pt===1||Pt===-1))return!0;throw Error(ri+"Invalid BigNumber: "+Q)},Ft.maximum=Ft.max=function(){return Jt(arguments,-1)},Ft.minimum=Ft.min=function(){return Jt(arguments,1)},Ft.random=function(){var Q=9007199254740992,ot=Math.random()*Q&2097151?function(){return zi(Math.random()*Q)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Lt){var wt,Ct,Pt,Wt,Ht,Xt=0,fe=[],he=new Ft(P);if(Lt==null?Lt=B:r(Lt,0,dr),Wt=Lo(Lt/vn),ne)if(crypto.getRandomValues){for(wt=crypto.getRandomValues(new Uint32Array(Wt*=2));Xt<Wt;)Ht=wt[Xt]*131072+(wt[Xt+1]>>>11),Ht>=9e15?(Ct=crypto.getRandomValues(new Uint32Array(2)),wt[Xt]=Ct[0],wt[Xt+1]=Ct[1]):(fe.push(Ht%1e14),Xt+=2);Xt=Wt/2}else if(crypto.randomBytes){for(wt=crypto.randomBytes(Wt*=7);Xt<Wt;)Ht=(wt[Xt]&31)*281474976710656+wt[Xt+1]*1099511627776+wt[Xt+2]*4294967296+wt[Xt+3]*16777216+(wt[Xt+4]<<16)+(wt[Xt+5]<<8)+wt[Xt+6],Ht>=9e15?crypto.randomBytes(7).copy(wt,Xt):(fe.push(Ht%1e14),Xt+=7);Xt=Wt/7}else throw ne=!1,Error(ri+"crypto unavailable");if(!ne)for(;Xt<Wt;)Ht=ot(),Ht<9e15&&(fe[Xt++]=Ht%1e14);for(Wt=fe[--Xt],Lt%=vn,Wt&&Lt&&(Ht=Vo[vn-Lt],fe[Xt]=zi(Wt/Ht)*Ht);fe[Xt]===0;fe.pop(),Xt--);if(Xt<0)fe=[Pt=0];else{for(Pt=-1;fe[0]===0;fe.splice(0,1),Pt-=vn);for(Xt=1,Ht=fe[0];Ht>=10;Ht/=10,Xt++);Xt<vn&&(Pt-=vn-Xt)}return he.e=Pt,he.c=fe,he}}(),Ft.sum=function(){for(var Q=1,ot=arguments,Lt=new Ft(ot[0]);Q<ot.length;)Lt=Lt.plus(ot[Q++]);return Lt},h=function(){var Q="0123456789";function ot(Lt,wt,Ct,Pt){for(var Wt,Ht=[0],Xt,fe=0,he=Lt.length;fe<he;){for(Xt=Ht.length;Xt--;Ht[Xt]*=wt);for(Ht[0]+=Pt.indexOf(Lt.charAt(fe++)),Wt=0;Wt<Ht.length;Wt++)Ht[Wt]>Ct-1&&(Ht[Wt+1]==null&&(Ht[Wt+1]=0),Ht[Wt+1]+=Ht[Wt]/Ct|0,Ht[Wt]%=Ct)}return Ht.reverse()}return function(Lt,wt,Ct,Pt,Wt){var Ht,Xt,fe,he,Me,Ye,en,sn,Wn=Lt.indexOf("."),Jn=B,jn=T;for(Wn>=0&&(he=Ee,Ee=0,Lt=Lt.replace(".",""),sn=new Ft(wt),Ye=sn.pow(Lt.length-Wn),Ee=he,sn.c=ot(k(Cr(Ye.c),Ye.e,"0"),10,Ct,Q),sn.e=sn.c.length),en=ot(Lt,wt,Ct,Wt?(Ht=ze,Q):(Ht=Q,ze)),fe=he=en.length;en[--he]==0;en.pop());if(!en[0])return Ht.charAt(0);if(Wn<0?--fe:(Ye.c=en,Ye.e=fe,Ye.s=Pt,Ye=u(Ye,sn,Jn,jn,Ct),en=Ye.c,Me=Ye.r,fe=Ye.e),Xt=fe+Jn+1,Wn=en[Xt],he=Ct/2,Me=Me||Xt<0||en[Xt+1]!=null,Me=jn<4?(Wn!=null||Me)&&(jn==0||jn==(Ye.s<0?3:2)):Wn>he||Wn==he&&(jn==4||Me||jn==6&&en[Xt-1]&1||jn==(Ye.s<0?8:7)),Xt<1||!en[0])Lt=Me?k(Ht.charAt(1),-Jn,Ht.charAt(0)):Ht.charAt(0);else{if(en.length=Xt,Me)for(--Ct;++en[--Xt]>Ct;)en[Xt]=0,Xt||(++fe,en=[1].concat(en));for(he=en.length;!en[--he];);for(Wn=0,Lt="";Wn<=he;Lt+=Ht.charAt(en[Wn++]));Lt=k(Lt,fe,Ht.charAt(0))}return Lt}}(),u=function(){function Q(wt,Ct,Pt){var Wt,Ht,Xt,fe,he=0,Me=wt.length,Ye=Ct%Qr,en=Ct/Qr|0;for(wt=wt.slice();Me--;)Xt=wt[Me]%Qr,fe=wt[Me]/Qr|0,Wt=en*Xt+fe*Ye,Ht=Ye*Xt+Wt%Qr*Qr+he,he=(Ht/Pt|0)+(Wt/Qr|0)+en*fe,wt[Me]=Ht%Pt;return he&&(wt=[he].concat(wt)),wt}function ot(wt,Ct,Pt,Wt){var Ht,Xt;if(Pt!=Wt)Xt=Pt>Wt?1:-1;else for(Ht=Xt=0;Ht<Pt;Ht++)if(wt[Ht]!=Ct[Ht]){Xt=wt[Ht]>Ct[Ht]?1:-1;break}return Xt}function Lt(wt,Ct,Pt,Wt){for(var Ht=0;Pt--;)wt[Pt]-=Ht,Ht=wt[Pt]<Ct[Pt]?1:0,wt[Pt]=Ht*Wt+wt[Pt]-Ct[Pt];for(;!wt[0]&&wt.length>1;wt.splice(0,1));}return function(wt,Ct,Pt,Wt,Ht){var Xt,fe,he,Me,Ye,en,sn,Wn,Jn,jn,ai,Nr,dl,Co,Ku,Po,ql,gs=wt.s==Ct.s?1:-1,gr=wt.c,Ei=Ct.c;if(!gr||!gr[0]||!Ei||!Ei[0])return new Ft(!wt.s||!Ct.s||(gr?Ei&&gr[0]==Ei[0]:!Ei)?NaN:gr&&gr[0]==0||!Ei?gs*0:gs/0);for(Wn=new Ft(gs),Jn=Wn.c=[],fe=wt.e-Ct.e,gs=Pt+fe+1,Ht||(Ht=Tr,fe=Lr(wt.e/vn)-Lr(Ct.e/vn),gs=gs/vn|0),he=0;Ei[he]==(gr[he]||0);he++);if(Ei[he]>(gr[he]||0)&&fe--,gs<0)Jn.push(1),Me=!0;else{for(Co=gr.length,Po=Ei.length,he=0,gs+=2,Ye=zi(Ht/(Ei[0]+1)),Ye>1&&(Ei=Q(Ei,Ye,Ht),gr=Q(gr,Ye,Ht),Po=Ei.length,Co=gr.length),dl=Po,jn=gr.slice(0,Po),ai=jn.length;ai<Po;jn[ai++]=0);ql=Ei.slice(),ql=[0].concat(ql),Ku=Ei[0],Ei[1]>=Ht/2&&Ku++;do{if(Ye=0,Xt=ot(Ei,jn,Po,ai),Xt<0){if(Nr=jn[0],Po!=ai&&(Nr=Nr*Ht+(jn[1]||0)),Ye=zi(Nr/Ku),Ye>1)for(Ye>=Ht&&(Ye=Ht-1),en=Q(Ei,Ye,Ht),sn=en.length,ai=jn.length;ot(en,jn,sn,ai)==1;)Ye--,Lt(en,Po<sn?ql:Ei,sn,Ht),sn=en.length,Xt=1;else Ye==0&&(Xt=Ye=1),en=Ei.slice(),sn=en.length;if(sn<ai&&(en=[0].concat(en)),Lt(jn,en,ai,Ht),ai=jn.length,Xt==-1)for(;ot(Ei,jn,Po,ai)<1;)Ye++,Lt(jn,Po<ai?ql:Ei,ai,Ht),ai=jn.length}else Xt===0&&(Ye++,jn=[0]);Jn[he++]=Ye,jn[0]?jn[ai++]=gr[dl]||0:(jn=[gr[dl]],ai=1)}while((dl++<Co||jn[0]!=null)&&gs--);Me=jn[0]!=null,Jn[0]||Jn.splice(0,1)}if(Ht==Tr){for(he=1,gs=Jn[0];gs>=10;gs/=10,he++);ae(Wn,Pt+(Wn.e=he+fe*vn-1)+1,Wt,Me)}else Wn.e=fe,Wn.r=+Me;return Wn}}();function Ut(Q,ot,Lt,wt){var Ct,Pt,Wt,Ht,Xt;if(Lt==null?Lt=T:r(Lt,0,8),!Q.c)return Q.toString();if(Ct=Q.c[0],Wt=Q.e,ot==null)Xt=Cr(Q.c),Xt=wt==1||wt==2&&(Wt<=K||Wt>=st)?m(Xt,Wt):k(Xt,Wt,"0");else if(Q=ae(new Ft(Q),ot,Lt),Pt=Q.e,Xt=Cr(Q.c),Ht=Xt.length,wt==1||wt==2&&(ot<=Pt||Pt<=K)){for(;Ht<ot;Xt+="0",Ht++);Xt=m(Xt,Pt)}else if(ot-=Wt,Xt=k(Xt,Pt,"0"),Pt+1>Ht){if(--ot>0)for(Xt+=".";ot--;Xt+="0");}else if(ot+=Pt-Ht,ot>0)for(Pt+1==Ht&&(Xt+=".");ot--;Xt+="0");return Q.s<0&&Ct?"-"+Xt:Xt}function Jt(Q,ot){for(var Lt,wt,Ct=1,Pt=new Ft(Q[0]);Ct<Q.length;Ct++)wt=new Ft(Q[Ct]),(!wt.s||(Lt=Fs(Pt,wt))===ot||Lt===0&&Pt.s===ot)&&(Pt=wt);return Pt}function _e(Q,ot,Lt){for(var wt=1,Ct=ot.length;!ot[--Ct];ot.pop());for(Ct=ot[0];Ct>=10;Ct/=10,wt++);return(Lt=wt+Lt*vn-1)>Tt?Q.c=Q.e=null:Lt<jt?Q.c=[Q.e=0]:(Q.e=Lt,Q.c=ot),Q}g=function(){var Q=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ot=/^([^.]+)\.$/,Lt=/^\.([^.]+)$/,wt=/^-?(Infinity|NaN)$/,Ct=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Pt,Wt,Ht,Xt){var fe,he=Ht?Wt:Wt.replace(Ct,"");if(wt.test(he))Pt.s=isNaN(he)?null:he<0?-1:1;else{if(!Ht&&(he=he.replace(Q,function(Me,Ye,en){return fe=(en=en.toLowerCase())=="x"?16:en=="b"?2:8,!Xt||Xt==fe?Ye:Me}),Xt&&(fe=Xt,he=he.replace(ot,"$1").replace(Lt,"0.$1")),Wt!=he))return new Ft(he,fe);if(Ft.DEBUG)throw Error(ri+"Not a"+(Xt?" base "+Xt:"")+" number: "+Wt);Pt.s=null}Pt.c=Pt.e=null}}();function ae(Q,ot,Lt,wt){var Ct,Pt,Wt,Ht,Xt,fe,he,Me=Q.c,Ye=Vo;if(Me){t:{for(Ct=1,Ht=Me[0];Ht>=10;Ht/=10,Ct++);if(Pt=ot-Ct,Pt<0)Pt+=vn,Wt=ot,Xt=Me[fe=0],he=zi(Xt/Ye[Ct-Wt-1]%10);else if(fe=Lo((Pt+1)/vn),fe>=Me.length)if(wt){for(;Me.length<=fe;Me.push(0));Xt=he=0,Ct=1,Pt%=vn,Wt=Pt-vn+1}else break t;else{for(Xt=Ht=Me[fe],Ct=1;Ht>=10;Ht/=10,Ct++);Pt%=vn,Wt=Pt-vn+Ct,he=Wt<0?0:zi(Xt/Ye[Ct-Wt-1]%10)}if(wt=wt||ot<0||Me[fe+1]!=null||(Wt<0?Xt:Xt%Ye[Ct-Wt-1]),wt=Lt<4?(he||wt)&&(Lt==0||Lt==(Q.s<0?3:2)):he>5||he==5&&(Lt==4||wt||Lt==6&&(Pt>0?Wt>0?Xt/Ye[Ct-Wt]:0:Me[fe-1])%10&1||Lt==(Q.s<0?8:7)),ot<1||!Me[0])return Me.length=0,wt?(ot-=Q.e+1,Me[0]=Ye[(vn-ot%vn)%vn],Q.e=-ot||0):Me[0]=Q.e=0,Q;if(Pt==0?(Me.length=fe,Ht=1,fe--):(Me.length=fe+1,Ht=Ye[vn-Pt],Me[fe]=Wt>0?zi(Xt/Ye[Ct-Wt]%Ye[Wt])*Ht:0),wt)for(;;)if(fe==0){for(Pt=1,Wt=Me[0];Wt>=10;Wt/=10,Pt++);for(Wt=Me[0]+=Ht,Ht=1;Wt>=10;Wt/=10,Ht++);Pt!=Ht&&(Q.e++,Me[0]==Tr&&(Me[0]=1));break}else{if(Me[fe]+=Ht,Me[fe]!=Tr)break;Me[fe--]=0,Ht=1}for(Pt=Me.length;Me[--Pt]===0;Me.pop());}Q.e>Tt?Q.c=Q.e=null:Q.e<jt&&(Q.c=[Q.e=0])}return Q}function me(Q){var ot,Lt=Q.e;return Lt===null?Q.toString():(ot=Cr(Q.c),ot=Lt<=K||Lt>=st?m(ot,Lt):k(ot,Lt,"0"),Q.s<0?"-"+ot:ot)}return y.absoluteValue=y.abs=function(){var Q=new Ft(this);return Q.s<0&&(Q.s=1),Q},y.comparedTo=function(Q,ot){return Fs(this,new Ft(Q,ot))},y.decimalPlaces=y.dp=function(Q,ot){var Lt,wt,Ct,Pt=this;if(Q!=null)return r(Q,0,dr),ot==null?ot=T:r(ot,0,8),ae(new Ft(Pt),Q+Pt.e+1,ot);if(!(Lt=Pt.c))return null;if(wt=((Ct=Lt.length-1)-Lr(this.e/vn))*vn,Ct=Lt[Ct])for(;Ct%10==0;Ct/=10,wt--);return wt<0&&(wt=0),wt},y.dividedBy=y.div=function(Q,ot){return u(this,new Ft(Q,ot),B,T)},y.dividedToIntegerBy=y.idiv=function(Q,ot){return u(this,new Ft(Q,ot),0,1)},y.exponentiatedBy=y.pow=function(Q,ot){var Lt,wt,Ct,Pt,Wt,Ht,Xt,fe,he,Me=this;if(Q=new Ft(Q),Q.c&&!Q.isInteger())throw Error(ri+"Exponent not an integer: "+me(Q));if(ot!=null&&(ot=new Ft(ot)),Ht=Q.e>14,!Me.c||!Me.c[0]||Me.c[0]==1&&!Me.e&&Me.c.length==1||!Q.c||!Q.c[0])return he=new Ft(Math.pow(+me(Me),Ht?Q.s*(2-c(Q)):+me(Q))),ot?he.mod(ot):he;if(Xt=Q.s<0,ot){if(ot.c?!ot.c[0]:!ot.s)return new Ft(NaN);wt=!Xt&&Me.isInteger()&&ot.isInteger(),wt&&(Me=Me.mod(ot))}else{if(Q.e>9&&(Me.e>0||Me.e<-1||(Me.e==0?Me.c[0]>1||Ht&&Me.c[1]>=24e7:Me.c[0]<8e13||Ht&&Me.c[0]<=9999975e7)))return Pt=Me.s<0&&c(Q)?-0:0,Me.e>-1&&(Pt=1/Pt),new Ft(Xt?1/Pt:Pt);Ee&&(Pt=Lo(Ee/vn+2))}for(Ht?(Lt=new Ft(.5),Xt&&(Q.s=1),fe=c(Q)):(Ct=Math.abs(+me(Q)),fe=Ct%2),he=new Ft(P);;){if(fe){if(he=he.times(Me),!he.c)break;Pt?he.c.length>Pt&&(he.c.length=Pt):wt&&(he=he.mod(ot))}if(Ct){if(Ct=zi(Ct/2),Ct===0)break;fe=Ct%2}else if(Q=Q.times(Lt),ae(Q,Q.e+1,1),Q.e>14)fe=c(Q);else{if(Ct=+me(Q),Ct===0)break;fe=Ct%2}Me=Me.times(Me),Pt?Me.c&&Me.c.length>Pt&&(Me.c.length=Pt):wt&&(Me=Me.mod(ot))}return wt?he:(Xt&&(he=P.div(he)),ot?he.mod(ot):Pt?ae(he,Ee,T,Wt):he)},y.integerValue=function(Q){var ot=new Ft(this);return Q==null?Q=T:r(Q,0,8),ae(ot,ot.e+1,Q)},y.isEqualTo=y.eq=function(Q,ot){return Fs(this,new Ft(Q,ot))===0},y.isFinite=function(){return!!this.c},y.isGreaterThan=y.gt=function(Q,ot){return Fs(this,new Ft(Q,ot))>0},y.isGreaterThanOrEqualTo=y.gte=function(Q,ot){return(ot=Fs(this,new Ft(Q,ot)))===1||ot===0},y.isInteger=function(){return!!this.c&&Lr(this.e/vn)>this.c.length-2},y.isLessThan=y.lt=function(Q,ot){return Fs(this,new Ft(Q,ot))<0},y.isLessThanOrEqualTo=y.lte=function(Q,ot){return(ot=Fs(this,new Ft(Q,ot)))===-1||ot===0},y.isNaN=function(){return!this.s},y.isNegative=function(){return this.s<0},y.isPositive=function(){return this.s>0},y.isZero=function(){return!!this.c&&this.c[0]==0},y.minus=function(Q,ot){var Lt,wt,Ct,Pt,Wt=this,Ht=Wt.s;if(Q=new Ft(Q,ot),ot=Q.s,!Ht||!ot)return new Ft(NaN);if(Ht!=ot)return Q.s=-ot,Wt.plus(Q);var Xt=Wt.e/vn,fe=Q.e/vn,he=Wt.c,Me=Q.c;if(!Xt||!fe){if(!he||!Me)return he?(Q.s=-ot,Q):new Ft(Me?Wt:NaN);if(!he[0]||!Me[0])return Me[0]?(Q.s=-ot,Q):new Ft(he[0]?Wt:T==3?-0:0)}if(Xt=Lr(Xt),fe=Lr(fe),he=he.slice(),Ht=Xt-fe){for((Pt=Ht<0)?(Ht=-Ht,Ct=he):(fe=Xt,Ct=Me),Ct.reverse(),ot=Ht;ot--;Ct.push(0));Ct.reverse()}else for(wt=(Pt=(Ht=he.length)<(ot=Me.length))?Ht:ot,Ht=ot=0;ot<wt;ot++)if(he[ot]!=Me[ot]){Pt=he[ot]<Me[ot];break}if(Pt&&(Ct=he,he=Me,Me=Ct,Q.s=-Q.s),ot=(wt=Me.length)-(Lt=he.length),ot>0)for(;ot--;he[Lt++]=0);for(ot=Tr-1;wt>Ht;){if(he[--wt]<Me[wt]){for(Lt=wt;Lt&&!he[--Lt];he[Lt]=ot);--he[Lt],he[wt]+=Tr}he[wt]-=Me[wt]}for(;he[0]==0;he.splice(0,1),--fe);return he[0]?_e(Q,he,fe):(Q.s=T==3?-1:1,Q.c=[Q.e=0],Q)},y.modulo=y.mod=function(Q,ot){var Lt,wt,Ct=this;return Q=new Ft(Q,ot),!Ct.c||!Q.s||Q.c&&!Q.c[0]?new Ft(NaN):!Q.c||Ct.c&&!Ct.c[0]?new Ft(Ct):(ge==9?(wt=Q.s,Q.s=1,Lt=u(Ct,Q,0,3),Q.s=wt,Lt.s*=wt):Lt=u(Ct,Q,0,ge),Q=Ct.minus(Lt.times(Q)),!Q.c[0]&&ge==1&&(Q.s=Ct.s),Q)},y.multipliedBy=y.times=function(Q,ot){var Lt,wt,Ct,Pt,Wt,Ht,Xt,fe,he,Me,Ye,en,sn,Wn,Jn,jn=this,ai=jn.c,Nr=(Q=new Ft(Q,ot)).c;if(!ai||!Nr||!ai[0]||!Nr[0])return!jn.s||!Q.s||ai&&!ai[0]&&!Nr||Nr&&!Nr[0]&&!ai?Q.c=Q.e=Q.s=null:(Q.s*=jn.s,!ai||!Nr?Q.c=Q.e=null:(Q.c=[0],Q.e=0)),Q;for(wt=Lr(jn.e/vn)+Lr(Q.e/vn),Q.s*=jn.s,Xt=ai.length,Me=Nr.length,Xt<Me&&(sn=ai,ai=Nr,Nr=sn,Ct=Xt,Xt=Me,Me=Ct),Ct=Xt+Me,sn=[];Ct--;sn.push(0));for(Wn=Tr,Jn=Qr,Ct=Me;--Ct>=0;){for(Lt=0,Ye=Nr[Ct]%Jn,en=Nr[Ct]/Jn|0,Wt=Xt,Pt=Ct+Wt;Pt>Ct;)fe=ai[--Wt]%Jn,he=ai[Wt]/Jn|0,Ht=en*fe+he*Ye,fe=Ye*fe+Ht%Jn*Jn+sn[Pt]+Lt,Lt=(fe/Wn|0)+(Ht/Jn|0)+en*he,sn[Pt--]=fe%Wn;sn[Pt]=Lt}return Lt?++wt:sn.splice(0,1),_e(Q,sn,wt)},y.negated=function(){var Q=new Ft(this);return Q.s=-Q.s||null,Q},y.plus=function(Q,ot){var Lt,wt=this,Ct=wt.s;if(Q=new Ft(Q,ot),ot=Q.s,!Ct||!ot)return new Ft(NaN);if(Ct!=ot)return Q.s=-ot,wt.minus(Q);var Pt=wt.e/vn,Wt=Q.e/vn,Ht=wt.c,Xt=Q.c;if(!Pt||!Wt){if(!Ht||!Xt)return new Ft(Ct/0);if(!Ht[0]||!Xt[0])return Xt[0]?Q:new Ft(Ht[0]?wt:Ct*0)}if(Pt=Lr(Pt),Wt=Lr(Wt),Ht=Ht.slice(),Ct=Pt-Wt){for(Ct>0?(Wt=Pt,Lt=Xt):(Ct=-Ct,Lt=Ht),Lt.reverse();Ct--;Lt.push(0));Lt.reverse()}for(Ct=Ht.length,ot=Xt.length,Ct-ot<0&&(Lt=Xt,Xt=Ht,Ht=Lt,ot=Ct),Ct=0;ot;)Ct=(Ht[--ot]=Ht[ot]+Xt[ot]+Ct)/Tr|0,Ht[ot]=Tr===Ht[ot]?0:Ht[ot]%Tr;return Ct&&(Ht=[Ct].concat(Ht),++Wt),_e(Q,Ht,Wt)},y.precision=y.sd=function(Q,ot){var Lt,wt,Ct,Pt=this;if(Q!=null&&Q!==!!Q)return r(Q,1,dr),ot==null?ot=T:r(ot,0,8),ae(new Ft(Pt),Q,ot);if(!(Lt=Pt.c))return null;if(Ct=Lt.length-1,wt=Ct*vn+1,Ct=Lt[Ct]){for(;Ct%10==0;Ct/=10,wt--);for(Ct=Lt[0];Ct>=10;Ct/=10,wt++);}return Q&&Pt.e+1>wt&&(wt=Pt.e+1),wt},y.shiftedBy=function(Q){return r(Q,-9007199254740991,cl),this.times("1e"+Q)},y.squareRoot=y.sqrt=function(){var Q,ot,Lt,wt,Ct,Pt=this,Wt=Pt.c,Ht=Pt.s,Xt=Pt.e,fe=B+4,he=new Ft("0.5");if(Ht!==1||!Wt||!Wt[0])return new Ft(!Ht||Ht<0&&(!Wt||Wt[0])?NaN:Wt?Pt:1/0);if(Ht=Math.sqrt(+me(Pt)),Ht==0||Ht==1/0?(ot=Cr(Wt),(ot.length+Xt)%2==0&&(ot+="0"),Ht=Math.sqrt(+ot),Xt=Lr((Xt+1)/2)-(Xt<0||Xt%2),Ht==1/0?ot="5e"+Xt:(ot=Ht.toExponential(),ot=ot.slice(0,ot.indexOf("e")+1)+Xt),Lt=new Ft(ot)):Lt=new Ft(Ht+""),Lt.c[0]){for(Xt=Lt.e,Ht=Xt+fe,Ht<3&&(Ht=0);;)if(Ct=Lt,Lt=he.times(Ct.plus(u(Pt,Ct,fe,1))),Cr(Ct.c).slice(0,Ht)===(ot=Cr(Lt.c)).slice(0,Ht))if(Lt.e<Xt&&--Ht,ot=ot.slice(Ht-3,Ht+1),ot=="9999"||!wt&&ot=="4999"){if(!wt&&(ae(Ct,Ct.e+B+2,0),Ct.times(Ct).eq(Pt))){Lt=Ct;break}fe+=4,Ht+=4,wt=1}else{(!+ot||!+ot.slice(1)&&ot.charAt(0)=="5")&&(ae(Lt,Lt.e+B+2,1),Q=!Lt.times(Lt).eq(Pt));break}}return ae(Lt,Lt.e+B+1,T,Q)},y.toExponential=function(Q,ot){return Q!=null&&(r(Q,0,dr),Q++),Ut(this,Q,ot,1)},y.toFixed=function(Q,ot){return Q!=null&&(r(Q,0,dr),Q=Q+this.e+1),Ut(this,Q,ot)},y.toFormat=function(Q,ot,Lt){var wt,Ct=this;if(Lt==null)Q!=null&&ot&&typeof ot=="object"?(Lt=ot,ot=null):Q&&typeof Q=="object"?(Lt=Q,Q=ot=null):Lt=Ie;else if(typeof Lt!="object")throw Error(ri+"Argument not an object: "+Lt);if(wt=Ct.toFixed(Q,ot),Ct.c){var Pt,Wt=wt.split("."),Ht=+Lt.groupSize,Xt=+Lt.secondaryGroupSize,fe=Lt.groupSeparator||"",he=Wt[0],Me=Wt[1],Ye=Ct.s<0,en=Ye?he.slice(1):he,sn=en.length;if(Xt&&(Pt=Ht,Ht=Xt,Xt=Pt,sn-=Pt),Ht>0&&sn>0){for(Pt=sn%Ht||Ht,he=en.substr(0,Pt);Pt<sn;Pt+=Ht)he+=fe+en.substr(Pt,Ht);Xt>0&&(he+=fe+en.slice(Pt)),Ye&&(he="-"+he)}wt=Me?he+(Lt.decimalSeparator||"")+((Xt=+Lt.fractionGroupSize)?Me.replace(new RegExp("\\d{"+Xt+"}\\B","g"),"$&"+(Lt.fractionGroupSeparator||"")):Me):he}return(Lt.prefix||"")+wt+(Lt.suffix||"")},y.toFraction=function(Q){var ot,Lt,wt,Ct,Pt,Wt,Ht,Xt,fe,he,Me,Ye,en=this,sn=en.c;if(Q!=null&&(Ht=new Ft(Q),!Ht.isInteger()&&(Ht.c||Ht.s!==1)||Ht.lt(P)))throw Error(ri+"Argument "+(Ht.isInteger()?"out of range: ":"not an integer: ")+me(Ht));if(!sn)return new Ft(en);for(ot=new Ft(P),fe=Lt=new Ft(P),wt=Xt=new Ft(P),Ye=Cr(sn),Pt=ot.e=Ye.length-en.e-1,ot.c[0]=Vo[(Wt=Pt%vn)<0?vn+Wt:Wt],Q=!Q||Ht.comparedTo(ot)>0?Pt>0?ot:fe:Ht,Wt=Tt,Tt=1/0,Ht=new Ft(Ye),Xt.c[0]=0;he=u(Ht,ot,0,1),Ct=Lt.plus(he.times(wt)),Ct.comparedTo(Q)!=1;)Lt=wt,wt=Ct,fe=Xt.plus(he.times(Ct=fe)),Xt=Ct,ot=Ht.minus(he.times(Ct=ot)),Ht=Ct;return Ct=u(Q.minus(Lt),wt,0,1),Xt=Xt.plus(Ct.times(fe)),Lt=Lt.plus(Ct.times(wt)),Xt.s=fe.s=en.s,Pt=Pt*2,Me=u(fe,wt,Pt,T).minus(en).abs().comparedTo(u(Xt,Lt,Pt,T).minus(en).abs())<1?[fe,wt]:[Xt,Lt],Tt=Wt,Me},y.toNumber=function(){return+me(this)},y.toPrecision=function(Q,ot){return Q!=null&&r(Q,1,dr),Ut(this,Q,ot,2)},y.toString=function(Q){var ot,Lt=this,wt=Lt.s,Ct=Lt.e;return Ct===null?wt?(ot="Infinity",wt<0&&(ot="-"+ot)):ot="NaN":(Q==null?ot=Ct<=K||Ct>=st?m(Cr(Lt.c),Ct):k(Cr(Lt.c),Ct,"0"):Q===10&&yn?(Lt=ae(new Ft(Lt),B+Ct+1,T),ot=k(Cr(Lt.c),Lt.e,"0")):(r(Q,2,ze.length,"Base"),ot=h(k(Cr(Lt.c),Ct,"0"),10,Q,wt,!0)),wt<0&&Lt.c[0]&&(ot="-"+ot)),ot},y.valueOf=y.toJSON=function(){return me(this)},y._isBigNumber=!0,y[Symbol.toStringTag]="BigNumber",y[Symbol.for("nodejs.util.inspect.custom")]=y.valueOf,s!=null&&Ft.set(s),Ft}function Lr(s){var u=s|0;return s>0||s===u?u:u-1}function Cr(s){for(var u,h,g=1,y=s.length,P=s[0]+"";g<y;){for(u=s[g++]+"",h=vn-u.length;h--;u="0"+u);P+=u}for(y=P.length;P.charCodeAt(--y)===48;);return P.slice(0,y+1||1)}function Fs(s,u){var h,g,y=s.c,P=u.c,B=s.s,T=u.s,K=s.e,st=u.e;if(!B||!T)return null;if(h=y&&!y[0],g=P&&!P[0],h||g)return h?g?0:-T:B;if(B!=T)return B;if(h=B<0,g=K==st,!y||!P)return g?0:!y^h?1:-1;if(!g)return K>st^h?1:-1;for(T=(K=y.length)<(st=P.length)?K:st,B=0;B<T;B++)if(y[B]!=P[B])return y[B]>P[B]^h?1:-1;return K==st?0:K>st^h?1:-1}function r(s,u,h,g){if(s<u||s>h||s!==zi(s))throw Error(ri+(g||"Argument")+(typeof s=="number"?s<u||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function c(s){var u=s.c.length-1;return Lr(s.e/vn)==u&&s.c[u]%2!=0}function m(s,u){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(u<0?"e":"e+")+u}function k(s,u,h){var g,y;if(u<0){for(y=h+".";++u;y+=h);s=y+s}else if(g=s.length,++u>g){for(y=h,u-=g;--u;y+=h);s+=y}else u<g&&(s=s.slice(0,u)+"."+s.slice(u));return s}var F=Il(),lt=F,$t=class{constructor(s){De(this,"key");De(this,"left",null);De(this,"right",null);this.key=s}},de=class extends $t{constructor(s){super(s)}},be=class{constructor(){De(this,"size",0);De(this,"modificationCount",0);De(this,"splayCount",0)}splay(s){let u=this.root;if(u==null)return this.compare(s,s),-1;let h=null,g=null,y=null,P=null,B=u,T=this.compare,K;for(;;)if(K=T(B.key,s),K>0){let st=B.left;if(st==null||(K=T(st.key,s),K>0&&(B.left=st.right,st.right=B,B=st,st=B.left,st==null)))break;h==null?g=B:h.left=B,h=B,B=st}else if(K<0){let st=B.right;if(st==null||(K=T(st.key,s),K<0&&(B.right=st.left,st.left=B,B=st,st=B.right,st==null)))break;y==null?P=B:y.right=B,y=B,B=st}else break;return y!=null&&(y.right=B.left,B.left=P),h!=null&&(h.left=B.right,B.right=g),this.root!==B&&(this.root=B,this.splayCount++),K}splayMin(s){let u=s,h=u.left;for(;h!=null;){let g=h;u.left=g.right,g.right=u,u=g,h=u.left}return u}splayMax(s){let u=s,h=u.right;for(;h!=null;){let g=h;u.right=g.left,g.left=u,u=g,h=u.right}return u}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let u=this.root,h=u,g=u.left;if(this.size--,g==null)this.root=u.right;else{let y=u.right;u=this.splayMax(g),u.right=y,this.root=u}return this.modificationCount++,h}addNewRoot(s,u){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}u<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,u)=>s<u?-1:s>u?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},Be=class lc extends be{constructor(h,g){super();De(this,"root",null);De(this,"compare");De(this,"validKey");De(this,$e,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=g??(y=>y!=null&&y!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let g of h)this.delete(g)}forEach(h){let g=this[Symbol.iterator](),y;for(;y=g.next(),!y.done;)h(y.value,y.value,this)}add(h){let g=this.splay(h);return g!=0&&this.addNewRoot(new de(h),g),this}addAndReturn(h){let g=this.splay(h);return g!=0&&this.addNewRoot(new de(h),g),this.root.key}addAll(h){for(let g of h)this.add(g)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let g=this.root.left;if(g==null)return null;let y=g.right;for(;y!=null;)g=y,y=g.right;return g.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let g=this.root.right;if(g==null)return null;let y=g.left;for(;y!=null;)g=y,y=g.left;return g.key}retainAll(h){let g=new lc(this.compare,this.validKey),y=this.modificationCount;for(let P of h){if(y!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(P)&&this.splay(P)==0&&g.add(this.root.key)}g.size!=this.size&&(this.root=g.root,this.size=g.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let g=new lc(this.compare,this.validKey);for(let y of this)h.has(y)&&g.add(y);return g}difference(h){let g=new lc(this.compare,this.validKey);for(let y of this)h.has(y)||g.add(y);return g}union(h){let g=this.clone();return g.addAll(h),g}clone(){let h=new lc(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function g(P,B){let T,K;do{if(T=P.left,K=P.right,T!=null){let st=new de(T.key);B.left=st,g(T,st)}if(K!=null){let st=new de(K.key);B.right=st,P=K,B=st}}while(K!=null)}let y=new de(h.key);return g(h,y),y}toSet(){return this.clone()}entries(){return new Bn(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(fn=Symbol.iterator,$e=Symbol.toStringTag,fn)](){return new un(this.wrap())}},We=class{constructor(s){De(this,"tree");De(this,"path",new Array);De(this,"modificationCount",null);De(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],u=s.right;if(u!=null){for(;u!=null;)this.path.push(u),u=u.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},un=class extends We{getValue(s){return s.key}},Bn=class extends We{getValue(s){return[s.key,s.key]}},Pr=s=>s,Ui=s=>{if(s){let u=new Be(xo(s)),h=new Be(xo(s)),g=(P,B)=>B.addAndReturn(P),y=P=>({x:g(P.x,u),y:g(P.y,h)});return y({x:new lt(0),y:new lt(0)}),y}return Pr},Dr=s=>({set:u=>{Li=Dr(u)},reset:()=>Dr(s),compare:xo(s),snap:Ui(s),orient:Is(s)}),Li=Dr(),js=(s,u)=>s.ll.x.isLessThanOrEqualTo(u.x)&&u.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(u.y)&&u.y.isLessThanOrEqualTo(s.ur.y),Fl=(s,u)=>{if(u.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(u.ll.x)||u.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(u.ll.y))return null;let h=s.ll.x.isLessThan(u.ll.x)?u.ll.x:s.ll.x,g=s.ur.x.isLessThan(u.ur.x)?s.ur.x:u.ur.x,y=s.ll.y.isLessThan(u.ll.y)?u.ll.y:s.ll.y,P=s.ur.y.isLessThan(u.ur.y)?s.ur.y:u.ur.y;return{ll:{x:h,y},ur:{x:g,y:P}}},ps=(s,u)=>s.x.times(u.y).minus(s.y.times(u.x)),ts=(s,u)=>s.x.times(u.x).plus(s.y.times(u.y)),$r=s=>ts(s,s).sqrt(),Gu=(s,u,h)=>{let g={x:u.x.minus(s.x),y:u.y.minus(s.y)},y={x:h.x.minus(s.x),y:h.y.minus(s.y)};return ps(y,g).div($r(y)).div($r(g))},jl=(s,u,h)=>{let g={x:u.x.minus(s.x),y:u.y.minus(s.y)},y={x:h.x.minus(s.x),y:h.y.minus(s.y)};return ts(y,g).div($r(y)).div($r(g))},ei=(s,u,h)=>u.y.isZero()?null:{x:s.x.plus(u.x.div(u.y).times(h.minus(s.y))),y:h},pr=(s,u,h)=>u.x.isZero()?null:{x:h,y:s.y.plus(u.y.div(u.x).times(h.minus(s.x)))},Wu=(s,u,h,g)=>{if(u.x.isZero())return pr(h,g,s.x);if(g.x.isZero())return pr(s,u,h.x);if(u.y.isZero())return ei(h,g,s.y);if(g.y.isZero())return ei(s,u,h.y);let y=ps(u,g);if(y.isZero())return null;let P={x:h.x.minus(s.x),y:h.y.minus(s.y)},B=ps(P,u).div(y),T=ps(P,g).div(y),K=s.x.plus(T.times(u.x)),st=h.x.plus(B.times(g.x)),jt=s.y.plus(T.times(u.y)),Tt=h.y.plus(B.times(g.y)),ne=K.plus(st).div(2),ge=jt.plus(Tt).div(2);return{x:ne,y:ge}},zs=class T1{constructor(u,h){De(this,"point");De(this,"isLeft");De(this,"segment");De(this,"otherSE");De(this,"consumedBy");u.events===void 0?u.events=[this]:u.events.push(this),this.point=u,this.isLeft=h}static compare(u,h){let g=T1.comparePoints(u.point,h.point);return g!==0?g:(u.point!==h.point&&u.link(h),u.isLeft!==h.isLeft?u.isLeft?1:-1:Ho.compare(u.segment,h.segment))}static comparePoints(u,h){return u.x.isLessThan(h.x)?-1:u.x.isGreaterThan(h.x)?1:u.y.isLessThan(h.y)?-1:u.y.isGreaterThan(h.y)?1:0}link(u){if(u.point===this.point)throw new Error("Tried to link already linked events");let h=u.point.events;for(let g=0,y=h.length;g<y;g++){let P=h[g];this.point.events.push(P),P.point=this.point}this.checkForConsuming()}checkForConsuming(){let u=this.point.events.length;for(let h=0;h<u;h++){let g=this.point.events[h];if(g.segment.consumedBy===void 0)for(let y=h+1;y<u;y++){let P=this.point.events[y];P.consumedBy===void 0&&g.otherSE.point.events===P.otherSE.point.events&&g.segment.consume(P.segment)}}}getAvailableLinkedEvents(){let u=[];for(let h=0,g=this.point.events.length;h<g;h++){let y=this.point.events[h];y!==this&&!y.segment.ringOut&&y.segment.isInResult()&&u.push(y)}return u}getLeftmostComparator(u){let h=new Map,g=y=>{let P=y.otherSE;h.set(y,{sine:Gu(this.point,u.point,P.point),cosine:jl(this.point,u.point,P.point)})};return(y,P)=>{h.has(y)||g(y),h.has(P)||g(P);let{sine:B,cosine:T}=h.get(y),{sine:K,cosine:st}=h.get(P);return B.isGreaterThanOrEqualTo(0)&&K.isGreaterThanOrEqualTo(0)?T.isLessThan(st)?1:T.isGreaterThan(st)?-1:0:B.isLessThan(0)&&K.isLessThan(0)?T.isLessThan(st)?-1:T.isGreaterThan(st)?1:0:K.isLessThan(B)?-1:K.isGreaterThan(B)?1:0}}},hu=0,Ho=class gh{constructor(u,h,g,y){De(this,"id");De(this,"leftSE");De(this,"rightSE");De(this,"rings");De(this,"windings");De(this,"ringOut");De(this,"consumedBy");De(this,"prev");De(this,"_prevInResult");De(this,"_beforeState");De(this,"_afterState");De(this,"_isInResult");this.id=++hu,this.leftSE=u,u.segment=this,u.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=u,this.rings=g,this.windings=y}static compare(u,h){let g=u.leftSE.point.x,y=h.leftSE.point.x,P=u.rightSE.point.x,B=h.rightSE.point.x;if(B.isLessThan(g))return 1;if(P.isLessThan(y))return-1;let T=u.leftSE.point.y,K=h.leftSE.point.y,st=u.rightSE.point.y,jt=h.rightSE.point.y;if(g.isLessThan(y)){if(K.isLessThan(T)&&K.isLessThan(st))return 1;if(K.isGreaterThan(T)&&K.isGreaterThan(st))return-1;let Tt=u.comparePoint(h.leftSE.point);if(Tt<0)return 1;if(Tt>0)return-1;let ne=h.comparePoint(u.rightSE.point);return ne!==0?ne:-1}if(g.isGreaterThan(y)){if(T.isLessThan(K)&&T.isLessThan(jt))return-1;if(T.isGreaterThan(K)&&T.isGreaterThan(jt))return 1;let Tt=h.comparePoint(u.leftSE.point);if(Tt!==0)return Tt;let ne=u.comparePoint(h.rightSE.point);return ne<0?1:ne>0?-1:1}if(T.isLessThan(K))return-1;if(T.isGreaterThan(K))return 1;if(P.isLessThan(B)){let Tt=h.comparePoint(u.rightSE.point);if(Tt!==0)return Tt}if(P.isGreaterThan(B)){let Tt=u.comparePoint(h.rightSE.point);if(Tt<0)return 1;if(Tt>0)return-1}if(!P.eq(B)){let Tt=st.minus(T),ne=P.minus(g),ge=jt.minus(K),Ee=B.minus(y);if(Tt.isGreaterThan(ne)&&ge.isLessThan(Ee))return 1;if(Tt.isLessThan(ne)&&ge.isGreaterThan(Ee))return-1}return P.isGreaterThan(B)?1:P.isLessThan(B)||st.isLessThan(jt)?-1:st.isGreaterThan(jt)?1:u.id<h.id?-1:u.id>h.id?1:0}static fromRing(u,h,g){let y,P,B,T=zs.comparePoints(u,h);if(T<0)y=u,P=h,B=1;else if(T>0)y=h,P=u,B=-1;else throw new Error(`Tried to create degenerate segment at [${u.x}, ${u.y}]`);let K=new zs(y,!0),st=new zs(P,!1);return new gh(K,st,[g],[B])}replaceRightSE(u){this.rightSE=u,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let u=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:u.isLessThan(h)?u:h},ur:{x:this.rightSE.point.x,y:u.isGreaterThan(h)?u:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(u){return u.x.eq(this.leftSE.point.x)&&u.y.eq(this.leftSE.point.y)||u.x.eq(this.rightSE.point.x)&&u.y.eq(this.rightSE.point.y)}comparePoint(u){return Li.orient(this.leftSE.point,u,this.rightSE.point)}getIntersection(u){let h=this.bbox(),g=u.bbox(),y=Fl(h,g);if(y===null)return null;let P=this.leftSE.point,B=this.rightSE.point,T=u.leftSE.point,K=u.rightSE.point,st=js(h,T)&&this.comparePoint(T)===0,jt=js(g,P)&&u.comparePoint(P)===0,Tt=js(h,K)&&this.comparePoint(K)===0,ne=js(g,B)&&u.comparePoint(B)===0;if(jt&&st)return ne&&!Tt?B:!ne&&Tt?K:null;if(jt)return Tt&&P.x.eq(K.x)&&P.y.eq(K.y)?null:P;if(st)return ne&&B.x.eq(T.x)&&B.y.eq(T.y)?null:T;if(ne&&Tt)return null;if(ne)return B;if(Tt)return K;let ge=Wu(P,this.vector(),T,u.vector());return ge===null||!js(y,ge)?null:Li.snap(ge)}split(u){let h=[],g=u.events!==void 0,y=new zs(u,!0),P=new zs(u,!1),B=this.rightSE;this.replaceRightSE(P),h.push(P),h.push(y);let T=new gh(y,B,this.rings.slice(),this.windings.slice());return zs.comparePoints(T.leftSE.point,T.rightSE.point)>0&&T.swapEvents(),zs.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),g&&(y.checkForConsuming(),P.checkForConsuming()),h}swapEvents(){let u=this.rightSE;this.rightSE=this.leftSE,this.leftSE=u,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,g=this.windings.length;h<g;h++)this.windings[h]*=-1}consume(u){let h=this,g=u;for(;h.consumedBy;)h=h.consumedBy;for(;g.consumedBy;)g=g.consumedBy;let y=gh.compare(h,g);if(y!==0){if(y>0){let P=h;h=g,g=P}if(h.prev===g){let P=h;h=g,g=P}for(let P=0,B=g.rings.length;P<B;P++){let T=g.rings[P],K=g.windings[P],st=h.rings.indexOf(T);st===-1?(h.rings.push(T),h.windings.push(K)):h.windings[st]+=K}g.rings=null,g.windings=null,g.consumedBy=h,g.leftSE.consumedBy=h.leftSE,g.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let u=this.prev.consumedBy||this.prev;this._beforeState=u.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let u=this.beforeState();this._afterState={rings:u.rings.slice(0),windings:u.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,g=this._afterState.windings,y=this._afterState.multiPolys;for(let T=0,K=this.rings.length;T<K;T++){let st=this.rings[T],jt=this.windings[T],Tt=h.indexOf(st);Tt===-1?(h.push(st),g.push(jt)):g[Tt]+=jt}let P=[],B=[];for(let T=0,K=h.length;T<K;T++){if(g[T]===0)continue;let st=h[T],jt=st.poly;if(B.indexOf(jt)===-1)if(st.isExterior)P.push(jt);else{B.indexOf(jt)===-1&&B.push(jt);let Tt=P.indexOf(st.poly);Tt!==-1&&P.splice(Tt,1)}}for(let T=0,K=P.length;T<K;T++){let st=P[T].multiPoly;y.indexOf(st)===-1&&y.push(st)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let u=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(pu.type){case"union":{let g=u.length===0,y=h.length===0;this._isInResult=g!==y;break}case"intersection":{let g,y;u.length<h.length?(g=u.length,y=h.length):(g=h.length,y=u.length),this._isInResult=y===pu.numMultiPolys&&g<y;break}case"xor":{let g=Math.abs(u.length-h.length);this._isInResult=g%2===1;break}case"difference":{let g=y=>y.length===1&&y[0].isSubject;this._isInResult=g(u)!==g(h);break}}return this._isInResult}},hl=class{constructor(s,u,h){De(this,"poly");De(this,"isExterior");De(this,"segments");De(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=u,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let g=Li.snap({x:new lt(s[0][0]),y:new lt(s[0][1])});this.bbox={ll:{x:g.x,y:g.y},ur:{x:g.x,y:g.y}};let y=g;for(let P=1,B=s.length;P<B;P++){if(typeof s[P][0]!="number"||typeof s[P][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let T=Li.snap({x:new lt(s[P][0]),y:new lt(s[P][1])});T.x.eq(y.x)&&T.y.eq(y.y)||(this.segments.push(Ho.fromRing(y,T,this)),T.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=T.x),T.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=T.y),T.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=T.x),T.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=T.y),y=T)}(!g.x.eq(y.x)||!g.y.eq(y.y))&&this.segments.push(Ho.fromRing(y,g,this))}getSweepEvents(){let s=[];for(let u=0,h=this.segments.length;u<h;u++){let g=this.segments[u];s.push(g.leftSE),s.push(g.rightSE)}return s}},fu=class{constructor(s,u){De(this,"multiPoly");De(this,"exteriorRing");De(this,"interiorRings");De(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new hl(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,g=s.length;h<g;h++){let y=new hl(s[h],this,!1);y.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=y.bbox.ll.x),y.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=y.bbox.ll.y),y.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=y.bbox.ur.x),y.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=y.bbox.ur.y),this.interiorRings.push(y)}this.multiPoly=u}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let u=0,h=this.interiorRings.length;u<h;u++){let g=this.interiorRings[u].getSweepEvents();for(let y=0,P=g.length;y<P;y++)s.push(g[y])}return s}},zc=class{constructor(s,u){De(this,"isSubject");De(this,"polys");De(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new lt(Number.POSITIVE_INFINITY),y:new lt(Number.POSITIVE_INFINITY)},ur:{x:new lt(Number.NEGATIVE_INFINITY),y:new lt(Number.NEGATIVE_INFINITY)}};for(let h=0,g=s.length;h<g;h++){let y=new fu(s[h],this);y.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=y.bbox.ll.x),y.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=y.bbox.ll.y),y.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=y.bbox.ur.x),y.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=y.bbox.ur.y),this.polys.push(y)}this.isSubject=u}getSweepEvents(){let s=[];for(let u=0,h=this.polys.length;u<h;u++){let g=this.polys[u].getSweepEvents();for(let y=0,P=g.length;y<P;y++)s.push(g[y])}return s}},du=class _d{constructor(u){De(this,"events");De(this,"poly");De(this,"_isExteriorRing");De(this,"_enclosingRing");this.events=u;for(let h=0,g=u.length;h<g;h++)u[h].segment.ringOut=this;this.poly=null}static factory(u){let h=[];for(let g=0,y=u.length;g<y;g++){let P=u[g];if(!P.isInResult()||P.ringOut)continue;let B=null,T=P.leftSE,K=P.rightSE,st=[T],jt=T.point,Tt=[];for(;B=T,T=K,st.push(T),T.point!==jt;)for(;;){let ne=T.getAvailableLinkedEvents();if(ne.length===0){let Ie=st[0].point,ze=st[st.length-1].point;throw new Error(`Unable to complete output ring starting at [${Ie.x}, ${Ie.y}]. Last matching segment found ends at [${ze.x}, ${ze.y}].`)}if(ne.length===1){K=ne[0].otherSE;break}let ge=null;for(let Ie=0,ze=Tt.length;Ie<ze;Ie++)if(Tt[Ie].point===T.point){ge=Ie;break}if(ge!==null){let Ie=Tt.splice(ge)[0],ze=st.splice(Ie.index);ze.unshift(ze[0].otherSE),h.push(new _d(ze.reverse()));continue}Tt.push({index:st.length,point:T.point});let Ee=T.getLeftmostComparator(B);K=ne.sort(Ee)[0].otherSE;break}h.push(new _d(st))}return h}getGeom(){let u=this.events[0].point,h=[u];for(let st=1,jt=this.events.length-1;st<jt;st++){let Tt=this.events[st].point,ne=this.events[st+1].point;Li.orient(Tt,u,ne)!==0&&(h.push(Tt),u=Tt)}if(h.length===1)return null;let g=h[0],y=h[1];Li.orient(g,u,y)===0&&h.shift(),h.push(h[0]);let P=this.isExteriorRing()?1:-1,B=this.isExteriorRing()?0:h.length-1,T=this.isExteriorRing()?h.length:-1,K=[];for(let st=B;st!=T;st+=P)K.push([h[st].x.toNumber(),h[st].y.toNumber()]);return K}isExteriorRing(){if(this._isExteriorRing===void 0){let u=this.enclosingRing();this._isExteriorRing=u?!u.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var y,P;let u=this.events[0];for(let B=1,T=this.events.length;B<T;B++){let K=this.events[B];zs.compare(u,K)>0&&(u=K)}let h=u.segment.prevInResult(),g=h?h.prevInResult():null;for(;;){if(!h)return null;if(!g)return h.ringOut;if(g.ringOut!==h.ringOut)return((y=g.ringOut)==null?void 0:y.enclosingRing())!==h.ringOut?h.ringOut:(P=h.ringOut)==null?void 0:P.enclosingRing();h=g.prevInResult(),g=h?h.prevInResult():null}}},zl=class{constructor(s){De(this,"exteriorRing");De(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let u=[s];for(let h=0,g=this.interiorRings.length;h<g;h++){let y=this.interiorRings[h].getGeom();y!==null&&u.push(y)}return u}},Ul=class{constructor(s){De(this,"rings");De(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let u=0,h=this.polys.length;u<h;u++){let g=this.polys[u].getGeom();g!==null&&s.push(g)}return s}_composePolys(s){var h;let u=[];for(let g=0,y=s.length;g<y;g++){let P=s[g];if(!P.poly)if(P.isExteriorRing())u.push(new zl(P));else{let B=P.enclosingRing();B!=null&&B.poly||u.push(new zl(B)),(h=B==null?void 0:B.poly)==null||h.addInterior(P)}}return u}},Zu=class{constructor(s,u=Ho.compare){De(this,"queue");De(this,"tree");De(this,"segments");this.queue=s,this.tree=new Be(u),this.segments=[]}process(s){let u=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(u),h;s.isLeft&&this.tree.add(u);let g=u,y=u;do g=this.tree.lastBefore(g);while(g!=null&&g.consumedBy!=null);do y=this.tree.firstAfter(y);while(y!=null&&y.consumedBy!=null);if(s.isLeft){let P=null;if(g){let T=g.getIntersection(u);if(T!==null&&(u.isAnEndpoint(T)||(P=T),!g.isAnEndpoint(T))){let K=this._splitSafely(g,T);for(let st=0,jt=K.length;st<jt;st++)h.push(K[st])}}let B=null;if(y){let T=y.getIntersection(u);if(T!==null&&(u.isAnEndpoint(T)||(B=T),!y.isAnEndpoint(T))){let K=this._splitSafely(y,T);for(let st=0,jt=K.length;st<jt;st++)h.push(K[st])}}if(P!==null||B!==null){let T=null;P===null?T=B:B===null?T=P:T=zs.comparePoints(P,B)<=0?P:B,this.queue.delete(u.rightSE),h.push(u.rightSE);let K=u.split(T);for(let st=0,jt=K.length;st<jt;st++)h.push(K[st])}h.length>0?(this.tree.delete(u),h.push(s)):(this.segments.push(u),u.prev=g)}else{if(g&&y){let P=g.getIntersection(y);if(P!==null){if(!g.isAnEndpoint(P)){let B=this._splitSafely(g,P);for(let T=0,K=B.length;T<K;T++)h.push(B[T])}if(!y.isAnEndpoint(P)){let B=this._splitSafely(y,P);for(let T=0,K=B.length;T<K;T++)h.push(B[T])}}}this.tree.delete(u)}return h}_splitSafely(s,u){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let g=s.split(u);return g.push(h),s.consumedBy===void 0&&this.tree.add(s),g}},hf=class{constructor(){De(this,"type");De(this,"numMultiPolys")}run(s,u,h){fl.type=s;let g=[new zc(u,!0)];for(let K=0,st=h.length;K<st;K++)g.push(new zc(h[K],!1));if(fl.numMultiPolys=g.length,fl.type==="difference"){let K=g[0],st=1;for(;st<g.length;)Fl(g[st].bbox,K.bbox)!==null?st++:g.splice(st,1)}if(fl.type==="intersection")for(let K=0,st=g.length;K<st;K++){let jt=g[K];for(let Tt=K+1,ne=g.length;Tt<ne;Tt++)if(Fl(jt.bbox,g[Tt].bbox)===null)return[]}let y=new Be(zs.compare);for(let K=0,st=g.length;K<st;K++){let jt=g[K].getSweepEvents();for(let Tt=0,ne=jt.length;Tt<ne;Tt++)y.add(jt[Tt])}let P=new Zu(y),B=null;for(y.size!=0&&(B=y.first(),y.delete(B));B;){let K=P.process(B);for(let st=0,jt=K.length;st<jt;st++){let Tt=K[st];Tt.consumedBy===void 0&&y.add(Tt)}y.size!=0?(B=y.first(),y.delete(B)):B=null}Li.reset();let T=du.factory(P.segments);return new Ul(T).getGeom()}},fl=new hf,pu=fl,ff=(s,...u)=>pu.run("intersection",s,u),df=(s,...u)=>pu.run("difference",s,u);Li.set;function gu(s){let u={type:"Feature"};return u.geometry=s,u}function mu(s){return s.type==="Feature"?s.geometry:s}function Uc(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function qc(s){return gu({type:"LineString",coordinates:s})}function vu(s){return gu({type:"MultiLineString",coordinates:s})}function $c(s){return gu({type:"Polygon",coordinates:s})}function Vc(s){return gu({type:"MultiPolygon",coordinates:s})}function Hc(s,u){let h=mu(s),g=mu(u),y=ff(h.coordinates,g.coordinates);return y.length===0?null:y.length===1?$c(y[0]):Vc(y)}function d(s,u){let h=mu(s),g=mu(u),y=df(h.coordinates,g.coordinates);return y.length===0?null:y.length===1?$c(y[0]):Vc(y)}function _(s){return Array.isArray(s)?1+_(s[0]):-1}function E(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let u=Uc(s),h=_(u),g=[];return h>1?u.forEach(y=>{g.push(qc(y))}):g.push(s),g}function O(s){let u=[];return s.eachLayer(h=>{u.push(Uc(h.toGeoJSON(15)))}),vu(u)}ki.Cut=ki.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let u=L.polygon(s,this.options.pathOptions);u._latlngInfos=this._layer._latlngInfo,this.cut(u),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:g,originalLayer:y})=>{this._fireCut(y,g,y),this._fireCut(this._map,g,y),y.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let u=this._map._layers,h=s._latlngInfos||[];Object.keys(u).map(g=>u[g]).filter(g=>g.pm).filter(g=>!g._pmTempLayer).filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1).filter(g=>g instanceof L.Polyline).filter(g=>g!==s).filter(g=>g.pm.options.allowCutting).filter(g=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(g)>-1:!0).filter(g=>!this._layerGroup.hasLayer(g)).filter(g=>{try{let y=!!wr(s.toGeoJSON(15),g.toGeoJSON(15)).features.length>0;return y||g instanceof L.Polyline&&!(g instanceof L.Polygon)?y:!!Hc(s.toGeoJSON(15),g.toGeoJSON(15))}catch{return g instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(g=>{let y;if(g instanceof L.Polygon){y=L.polygon(g.getLatLngs());let K=y.getLatLngs();h.forEach(st=>{if(st&&st.snapInfo){let{latlng:jt}=st,Tt=this._calcClosestLayer(jt,[y]);if(Tt&&Tt.segment&&Tt.distance<this.options.snapDistance){let{segment:ne}=Tt;if(ne&&ne.length===2){let{indexPath:ge,parentPath:Ee,newIndex:Ie}=L.PM.Utils._getIndexFromSegment(K,ne);(ge.length>1?(0,ii.default)(K,Ee):K).splice(Ie,0,jt)}}}})}else y=g;let P=this._cutLayer(s,y),B=L.geoJSON(P,g.options);B.getLayers().length===1&&([B]=B.getLayers()),this._setPane(B,"layerPane");let T=B.addTo(this._map.pm._getContainingLayer());if(T.pm.enable(g.pm.options),T.pm.disable(),g._pmTempLayer=!0,s._pmTempLayer=!0,g.remove(),g.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),T.getLayers&&T.getLayers().length===0&&this._map.pm.removeLayer({target:T}),T instanceof L.LayerGroup?(T.eachLayer(K=>{this._addDrawnLayerProp(K)}),this._addDrawnLayerProp(T)):this._addDrawnLayerProp(T),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let K=this.options.layersToCut.indexOf(g);K>-1&&this.options.layersToCut.splice(K,1)}this._editedLayers.push({layer:T,originalLayer:g})})},_cutLayer(s,u){let h=L.geoJSON(),g;if(u instanceof L.Polygon)g=d(u.toGeoJSON(15),s.toGeoJSON(15));else{let y=E(u);y.forEach(P=>{let B=xr(P,s.toGeoJSON(15)),T;B&&B.features.length>0?T=L.geoJSON(B):T=L.geoJSON(P),T.getLayers().forEach(K=>{_o(s.toGeoJSON(15),K.toGeoJSON(15))||K.addTo(h)})}),y.length>1?g=O(h):g=h.toGeoJSON(15)}return g},_change:L.Util.falseFn}),ki.Text=ki.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let u=s;u.target=this._hintMarker,this._handleSnapping(u)}},_createMarker(s){var y,P,B,T;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(y=this.options.textOptions)==null?void 0:y.className){let K=this.options.textOptions.className.split(" ");this.textArea.classList.add(...K)}let h=this._createTextIcon(this.textArea),g=new L.Marker(u,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(g,"markerPane"),this._finishLayer(g),g.pm||(g.options.draggable=!1),g.addTo(this._map.pm._getContainingLayer()),g.pm){g.pm.textArea=this.textArea,L.setOptions(g.pm,{removeIfEmpty:((P=this.options.textOptions)==null?void 0:P.removeIfEmpty)??!0});let K=((B=this.options.textOptions)==null?void 0:B.focusAfterDraw)??!0;g.pm._createTextMarker(K),(T=this.options.textOptions)!=null&&T.text&&g.pm.setText(this.options.textOptions.text)}this._fireCreate(g),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var nt={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ii(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(Ii(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Ii(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(Ii(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let u=s.touches?s.touches[0]:s,h={originalEvent:u,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(u),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let u=s.touches?s.touches[0]:s,h={originalEvent:u,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(u),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let u={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(u.containerPoint=this._map.mouseEventToContainerPoint(s),u.latlng=this._map.containerPointToLatLng(u.containerPoint)),this._dragMixinOnMouseUp(u),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let u=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!u&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let g="resizeableCircleMarker";this._layer instanceof L.Circle&&(g="resizeableCircle"),this.options.snappable&&!u&&!h?this._layer.pm.options[g]||this._initSnappableMarkersDrag():this._layer.pm.options[g]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let u=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(u,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let u=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,u&&L.DomUtil.removeClass(u,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:u}=s,h={lat:u.lat-this._tempDragCoord.lat,lng:u.lng-this._tempDragCoord.lng},g=y=>y.map(P=>{if(Array.isArray(P))return g(P);let B={lat:P.lat+h.lat,lng:P.lng+h.lng};return(P.alt||P.alt===0)&&(B.alt=P.alt),B});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let y=g([this._layer.getLatLng()]);this._layer.setLatLng(y[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let y=this._layer.getLatLng();this._layer._snapped&&(y=this._layer._orgLatLng);let P=g([y]);this._layer.setLatLng(P[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let y=g([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(y),this._fireChange(this._layer.getBounds(),"Edit")}else{let y=g(this._layer.getLatLngs());this._layer.setLatLngs(y),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=u,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,u){if(this.enabled())return!1;if(!u._fromLayerSync&&this._layer===u.target&&this.options.syncLayersOnDrag){u._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(g=>{g instanceof L.LayerGroup&&(h=h.concat(g.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let g in this._parentLayerGroup){let y=this._parentLayerGroup[g];y.pm&&(h=y.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(g=>!!g.pm).filter(g=>!!g.pm.options.draggable),h.forEach(g=>{g!==this._layer&&g.pm[s]&&(g._snapped=!1,g.pm[s](u))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},at=nt,ut=p(lr());function pt(s,u,h,g){return h.unproject(u.transform(h.project(s,g)),g)}function bt(s,u,h){let g=h.getMaxZoom();if(g===1/0&&(g=h.getZoom()),L.Util.isArray(s)){let y=[];return s.forEach(P=>{y.push(bt(P,u,h))}),y}return s instanceof L.LatLng?pt(s,u,h,g):null}function Bt(s,u){u instanceof L.Layer&&(u=u.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(u,h)}function Yt(s,u){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(u,h)}var ve={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Bt(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Bt(this._map,s.target.getLatLng()),this._initialRotateLatLng=Wr(this._layer),this._startAngle=this.getAngle();let u=Wr(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,u),this._fireRotationStart(this._map,u)},_onRotate(s){let u=Bt(this._map,s.target.getLatLng()),h=this._rotationStartPoint,g=this._rotationOriginPoint,y=Math.atan2(u.y-g.y,u.x-g.x)-Math.atan2(h.y-g.y,h.x-g.x);this._layer.setLatLngs(this._rotateLayer(y,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let P=this;function B(jt,Tt=[],ne=-1){if(ne>-1&&Tt.push(ne),L.Util.isArray(jt[0]))jt.forEach((ge,Ee)=>B(ge,Tt.slice(),Ee));else{let ge=Tt.length>0?(0,ut.default)(P._markers,Tt):P._markers[0];jt.forEach((Ee,Ie)=>{ge[Ie].setLatLng(Ee)})}}B(this._layer.getLatLngs());let T=Wr(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(y,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let K=y*180/Math.PI;K=K<0?K+360:K;let st=K+this._startAngle;this._setAngle(st),this._rotationLayer.pm._setAngle(st),this._fireRotation(this._rotationLayer,K,T),this._fireRotation(this._map,K,T),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let u=Wr(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Wr(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,u),this._fireRotationEnd(this._map,s,u),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,u,h,g,y){let P=Bt(y,h);return this._matrix=g.clone().rotate(s,P).flip(),bt(u,this._matrix,y)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),u=s.getCenter();return s.removeFrom(this._layer._map),u},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Ts(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Wr(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let u=this.getAngle(),h=this._layer.getLatLngs(),g=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(g,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(g,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let y=this.getAngle()-u;y=y<0?y+360:y,this._startAngle=u,this._fireRotation(this._layer,y,h,this._layer),this._fireRotation(this._map||this._layer._map,y,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let u=s-this.getAngle();this.rotateLayer(u)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},ye=ve,le=L.Class.extend({includes:[at,Uo,ye,Fo],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,u){u==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":u==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":u==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,u){let h=u.target,g={layer:this._layer,marker:h,event:u},y="";return s==="move"?y="moveVertexValidation":s==="add"?y="addVertexValidation":s==="remove"&&(y="removeVertexValidation"),this.options[y]&&typeof this.options[y]=="function"&&!this.options[y](g)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),Ce=le;Ce.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(g=>this._initLayer(g));let u=g=>{if(g.layer._pmTempLayer)return;this._layers=this.getLayers();let y=this._layers.filter(P=>!P.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in P.pm._parentLayerGroup));y.forEach(P=>{this._initLayer(P)}),y.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(u,100,this),this),this._layerGroup.on("layerremove",g=>{this._removeLayerFromGroup(g.target)},this);let h=g=>{g.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,u=[]){u.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?u.indexOf(h._leaflet_id)===-1&&(u.push(h._leaflet_id),h.pm.enable(s,u)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(u=>{u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1&&(s.push(u._leaflet_id),u.pm.disable(s)):u.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(u=>u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1?(s.push(u._leaflet_id),u.pm.enabled(s)):!1:u.pm.enabled())},toggleEdit(s,u=[]){u.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?u.indexOf(h._leaflet_id)===-1&&(u.push(h._leaflet_id),h.pm.toggleEdit(s,u)):h.pm.toggleEdit(s)})},_initLayer(s){let u=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[u]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let u=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[u]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(u=>!!u._map))==null?void 0:s._map)||null},getLayers(s=!1,u=!0,h=!0,g=[]){let y=[];return s?this._layerGroup.getLayers().forEach(P=>{y.push(P),P instanceof L.LayerGroup&&g.indexOf(P._leaflet_id)===-1&&(g.push(P._leaflet_id),y=y.concat(P.pm.getLayers(!0,!0,!0,g)))}):y=this._layerGroup.getLayers(),h&&(y=y.filter(P=>!(P instanceof L.LayerGroup))),u&&(y=y.filter(P=>!!P.pm),y=y.filter(P=>!P._pmTempLayer),y=y.filter(P=>!L.PM.optIn&&!P.options.pmIgnore||L.PM.optIn&&P.options.pmIgnore===!1)),y},setOptions(s,u=[]){u.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?u.indexOf(h._leaflet_id)===-1&&(u.push(h._leaflet_id),h.pm.setOptions(s,u)):h.pm.setOptions(s))})}}),Ce.Marker=Ce.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let u=s.target;u.remove(),this._fireRemove(u),this._fireRemove(this._map,u)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var xe=p(lr()),Qt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((u,h,g)=>g.indexOf(u)===h)},_removeFromCache(s){let u=this.markerCache.indexOf(s);u>-1&&this.markerCache.splice(u,1)},renderLimits(s){this.markerCache.forEach(u=>{s.includes(u)?this._markerGroup.addLayer(u):this._markerGroup.removeLayer(u)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let u=[...this._filterClosestMarkers(s)];this.renderLimits(u)},_filterClosestMarkers(s){let u=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?u:(u.sort((g,y)=>{let P=g._latlng.distanceTo(s),B=y._latlng.distanceTo(s);return P-B}),u.filter((g,y)=>h>-1?y<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},re=Qt;Ce.Line=Ce.extend({includes:[re],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,u=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=g=>{if(Array.isArray(g[0]))return g.map(h,this);let y=g.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&g.map((P,B)=>{let T=this.isPolygon()?(B+1)%g.length:B+1;return this._createMiddleMarker(y[B],y[T])}),y};this._markers=h(u),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let u=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._pmTempLayer=!0,this.options.rotate?(u.on("dragstart",this._onRotateStart,this),u.on("drag",this._onRotate,this),u.on("dragend",this._onRotateEnd,this)):(u.on("click",this._onVertexClick,this),u.on("dragstart",this._onMarkerDragStart,this),u.on("move",this._onMarkerDrag,this),u.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||u.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(u),u},_createMiddleMarker(s,u){if(!s||!u)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),u.getLatLng()),g=this._createMarker(h),y=L.divIcon({className:"marker-icon marker-icon-middle"});return g.setIcon(y),g.leftM=s,g.rightM=u,s._middleMarkerNext=g,u._middleMarkerPrev=g,g.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),g.on("movestart",this._onMiddleMarkerMoveStart,this),g},_onMiddleMarkerClick(s){let u=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});u.setIcon(h),this._addMarker(u,u.leftM,u.rightM)},_onMiddleMarkerMoveStart(s){let u=s.target;if(u.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){u.on("move",this._onMiddleMarkerMovePrevent,this);return}u._dragging=!0,this._addMarker(u,u.leftM,u.rightM)},_onMiddleMarkerMovePrevent(s){let u=s.target;this._vertexValidationDrag(u)},_onMiddleMarkerMoveEnd(s){let u=s.target;if(u.off("move",this._onMiddleMarkerMovePrevent,this),u.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(u))return;let h=L.divIcon({className:"marker-icon"});u.setIcon(h),setTimeout(()=>{delete u._dragging},100)},_addMarker(s,u,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let g=s.getLatLng(),y=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:P,index:B,parentPath:T}=L.PM.Utils.findDeepMarkerIndex(this._markers,u),K=P.length>1?(0,xe.default)(y,T):y,st=P.length>1?(0,xe.default)(this._markers,T):this._markers;K.splice(B+1,0,g),st.splice(B+1,0,s),this._layer.setLatLngs(y),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(u,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,g),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return On(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let u=this._layer,h,g;if(this.options.allowSelfIntersection?h=!1:(g=On(this._layer.toGeoJSON(15)),h=g.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(u.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(g)}else u.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,u){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,u):h._icon&&(u&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let u=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Wr(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:g,index:y,parentPath:P}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);if(!g)return;let B=g.length>1?(0,xe.default)(h,P):h,T=g.length>1?(0,xe.default)(this._markers,P):this._markers,K=P[P.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!K&&(B.length<=2||this.isPolygon()&&B.length<=3)){this._flashLayer();return}B.splice(y,1),this._layer.setLatLngs(h),this.isPolygon()&&B.length<=2&&B.splice(0,B.length);let st=!1;if(B.length<=1&&(B.splice(0,B.length),P.length>1&&g.length>1&&(h=jo(h)),this._layer.setLatLngs(h),this._initMarkers(),st=!0),yr(h)||this._layer.remove(),h=jo(h),this._layer.setLatLngs(h),this._markers=jo(this._markers),!st&&(T=g.length>1?(0,xe.default)(this._markers,P):this._markers,u._middleMarkerPrev&&(this._markerGroup.removeLayer(u._middleMarkerPrev),this._removeFromCache(u._middleMarkerPrev)),u._middleMarkerNext&&(this._markerGroup.removeLayer(u._middleMarkerNext),this._removeFromCache(u._middleMarkerNext)),this._markerGroup.removeLayer(u),this._removeFromCache(u),T)){let jt,Tt;if(this.isPolygon()?(jt=(y+1)%T.length,Tt=(y+(T.length-1))%T.length):(Tt=y-1<0?void 0:y-1,jt=y+1>=T.length?void 0:y+1),jt!==Tt){let ne=T[Tt],ge=T[jt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(ne,ge)}T.splice(y,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(u,g),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let u=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:g,index:y,parentPath:P}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(g.length>1?(0,xe.default)(u,P):u).splice(y,1,h),this._layer.setLatLngs(u)},_getNeighborMarkers(s){let{indexPath:u,index:h,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),y=u.length>1?(0,xe.default)(this._markers,g):this._markers,P=(h+1)%y.length,B=(h+(y.length-1))%y.length,T=y[B],K=y[P];return{prevMarker:T,nextMarker:K}},_checkMarkerAllowedToDrag(s){let{prevMarker:u,nextMarker:h}=this._getNeighborMarkers(s),g=L.polyline([u.getLatLng(),s.getLatLng()]),y=L.polyline([s.getLatLng(),h.getLatLng()]),P=wr(this._layer.toGeoJSON(15),g.toGeoJSON(15)).features.length,B=wr(this._layer.toGeoJSON(15),y.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?B+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(P+=1),!(P<=2&&B<=2)},_onMarkerDragStart(s){let u=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Wr(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(u):this._markerAllowedToDrag=null},_onMarkerDrag(s){let u=s.target;if(!this._vertexValidationDrag(u))return;let{indexPath:h,index:g,parentPath:y}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(u);let P=h.length>1?(0,xe.default)(this._markers,y):this._markers,B=(g+1)%P.length,T=(g+(P.length-1))%P.length,K=u.getLatLng(),st=P[T].getLatLng(),jt=P[B].getLatLng();if(u._middleMarkerNext){let Tt=L.PM.Utils.calcMiddleLatLng(this._map,K,jt);u._middleMarkerNext.setLatLng(Tt)}if(u._middleMarkerPrev){let Tt=L.PM.Utils.calcMiddleLatLng(this._map,K,st);u._middleMarkerPrev.setLatLng(Tt)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let u=s.target;if(!this._vertexValidationDragEnd(u))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u),g=!this.options.allowSelfIntersection&&this.hasSelfIntersection();g&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(g=!1);let y=!this.options.allowSelfIntersection&&g;if(this._fireMarkerDragEnd(s,h,y),y){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let u=s.target;if(u._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireVertexClick(s,h)}}),Ce.Polygon=Ce.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:u,nextMarker:h}=this._getNeighborMarkers(s),g=L.polyline([u.getLatLng(),s.getLatLng()]),y=L.polyline([s.getLatLng(),h.getLatLng()]),P=wr(this._layer.toGeoJSON(15),g.toGeoJSON(15)).features.length,B=wr(this._layer.toGeoJSON(15),y.toGeoJSON(15)).features.length;return!(P<=2&&B<=2)}}),Ce.Rectangle=Ce.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,u=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=u.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,g)=>{let y=this._cornerMarkers.find(P=>P._index===g);y&&y.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,u){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=u,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let u=s.target,h=this._cornerMarkers;u._oppositeCornerLatLng=h.find(y=>y._index===(u._index+2)%4).getLatLng(),u._snapped=!1;let{indexPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireMarkerDragStart(s,g)},_onMarkerDrag(s){let u=s.target;if(!this._vertexValidationDrag(u)||u._index===void 0)return;this._adjustRectangleForMarkerMove(u);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let u=s.target;if(!this._vertexValidationDragEnd(u))return;this._cornerMarkers.forEach(g=>{delete g._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let u=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(u),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let u=this._layer.getLatLngs()[0];if(u&&u.length!==4&&u.length>0)u.forEach((h,g)=>{this._cornerMarkers[g].setLatLng(h)}),this._cornerMarkers.slice(u.length).forEach(h=>{h.setLatLng(u[0])});else if(!u||!u.length)console.error("The layer has no LatLngs");else{let h=u.findIndex(g=>s.getLatLng().equals(g));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(u[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(u[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(u[(h+3)%4])):this._cornerMarkers.forEach(g=>{g.setLatLng(u[g._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Ts(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),Ce.CircleMarker=Ce.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let u=this._layer.getLatLng(),h=this._layer._radius,g=this._getLatLngOnCircle(u,h);this._centerMarker=this._createCenterMarker(u),this._outerMarker=this._createOuterMarker(g),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,u){let h=this._map.project(s),g=L.point(h.x+u,h.y);return this._map.unproject(g)},_createHintLine(s,u){let h=s.getLatLng(),g=u.getLatLng();this._hintline=L.polyline([h,g],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let u=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(u._icon,"leaflet-pm-draggable"),u.on("move",this._moveCircle,this)):u.dragging.disable(),u},_createOuterMarker(s){let u=this._createMarker(s);return u.on("drag",this._resizeCircle,this),u},_createMarker(s){let u=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._origLatLng=s,u._pmTempLayer=!0,u.on("dragstart",this._onMarkerDragStart,this),u.on("drag",this._onMarkerDrag,this),u.on("dragend",this._onMarkerDragEnd,this),u.on("click",this._onVertexClick,this),this._helperLayers.addLayer(u),u},_moveCircle(s){if(s.target._cancelDragEventChain)return;let u=this._centerMarker.getLatLng();this._layer.setLatLng(u);let h=this._layer._radius,g=this._getLatLngOnCircle(u,h);this._outerMarker._latlng=g,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),u=this._layer._radius,h=this._getLatLngOnCircle(s,u);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),u=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,u);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),u=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,u])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let u=s.target;u instanceof L.Marker&&!this._vertexValidationDrag(u)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let u=s.target;this._vertexValidationDragEnd(u)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let u=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(u);let g=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!g).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!g),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),u=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,u);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?u=ca(this._map,s,u,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(u=ca(this._map,s,u,this._getMaxDistanceInMeter(s))),u},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),u=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,u);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,u){return this._map.project(s).distanceTo(this._map.project(u))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Ce.Circle=Ce.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,u){return this._map.distance(s,u)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Ce.ImageOverlay=Ce.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),u=s.getNorthWest(),h=s.getNorthEast(),g=s.getSouthEast(),y=s.getSouthWest();return[u,h,g,y]}}),Ce.Text=Ce.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,u=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${u}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let u=this._hasFocus;this._hasFocus=s.type==="focus",!u!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let u=this.options.className.split(" ");this.textArea.classList.add(...u)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var Se=function(s,u,h,g,y,P){this._matrix=[s,u,h,g,y,P]};Se.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Se.prototype={transform(s){return this._transform(s.clone())},_transform(s){let u=this._matrix,{x:h,y:g}=s;return s.x=u[0]*h+u[1]*g+u[4],s.y=u[2]*h+u[3]*g+u[5],s},untransform(s){let u=this._matrix;return new L.Point((s.x/u[0]-u[4])/u[0],(s.y/u[2]-u[5])/u[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let u,h;return typeof s=="number"?(u=s,h=s):(u=s.x,h=s.y),this._add(1,0,0,1,u,h)},scale(s,u){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,g;return u=u||L.point(0,0),typeof s=="number"?(h=s,g=s):(h=s.x,g=s.y),this._add(h,0,0,g,u.x,u.y)._add(1,0,0,1,-u.x,-u.y)},rotate(s,u){let h=Math.cos(s),g=Math.sin(s);return u=u||new L.Point(0,0),this._add(h,g,-g,h,u.x,u.y)._add(1,0,0,1,-u.x,-u.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,u,h,g,y,P){let B=[[],[],[]],T=this._matrix,K=[[T[0],T[2],T[4]],[T[1],T[3],T[5]],[0,0,1]],st=[[s,h,y],[u,g,P],[0,0,1]],jt;s&&s instanceof L.PM.Matrix&&(T=s._matrix,st=[[T[0],T[2],T[4]],[T[1],T[3],T[5]],[0,0,1]]);for(let Tt=0;Tt<3;Tt+=1)for(let ne=0;ne<3;ne+=1){jt=0;for(let ge=0;ge<3;ge+=1)jt+=K[Tt][ge]*st[ge][ne];B[Tt][ne]=jt}return this._matrix=[B[0][0],B[1][0],B[0][1],B[1][1],B[0][2],B[1][2]],this}};var Te=Se,Ae={calcMiddleLatLng(s,u,h){let g=s.project(u),y=s.project(h);return s.unproject(g._add(y)._divideBy(2))},findLayers(s){let u=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&u.push(h)}),u=u.filter(h=>!!h.pm),u=u.filter(h=>!h._pmTempLayer),u=u.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),u},circleToPolygon(s,u=60,h=!0){let g=s.getLatLng(),y=s.getRadius(),P=Sr(g,y,u,0,h),B=[];for(let T=0;T<P.length;T+=1){let K=[P[T].lat,P[T].lng];B.push(K)}return L.polygon(B,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,u,h,g=!1){s.fire(u,h,g);let{groups:y}=this.getAllParentGroups(s);y.forEach(P=>{P.fire(u,h,g)})},getAllParentGroups(s){let u=[],h=[],g=y=>{for(let P in y._eventParents)if(u.indexOf(P)===-1){u.push(P);let B=y._eventParents[P];h.push(B),g(B)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(g(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:u},{groupIds:u,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Sr,getTranslation:hn,findDeepCoordIndex(s,u,h=!0){let g,y=B=>(T,K)=>{let st=B.concat(K);if(h){if(T.lat&&T.lat===u.lat&&T.lng===u.lng)return g=st,!0}else if(T.lat&&L.latLng(T).equals(u))return g=st,!0;return Array.isArray(T)&&T.some(y(st))};s.some(y([]));let P={};return g&&(P={indexPath:g,index:g[g.length-1],parentPath:g.slice(0,g.length-1)}),P},findDeepMarkerIndex(s,u){let h,g=P=>(B,T)=>{let K=P.concat(T);return B._leaflet_id===u._leaflet_id?(h=K,!0):Array.isArray(B)&&B.some(g(K))};s.some(g([]));let y={};return h&&(y={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),y},_getIndexFromSegment(s,u){if(u&&u.length===2){let h=this.findDeepCoordIndex(s,u[0]),g=this.findDeepCoordIndex(s,u[1]),y=Math.max(h.index,g.index);return(h.index===0||g.index===0)&&y!==1&&(y+=1),{indexA:h,indexB:g,newIndex:y,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,u,h,g){let y=Bt(g,s),P=Bt(g,u),B=h*Math.PI/180,T=Math.cos(B),K=Math.sin(B),st=(P.x-y.x)*T+(P.y-y.y)*K,jt=(P.y-y.y)*T-(P.x-y.x)*K,Tt=st*T+y.x,ne=st*K+y.y,ge=-jt*K+y.x,Ee=jt*T+y.y,Ie=Yt(g,y),ze=Yt(g,{x:Tt,y:ne}),yn=Yt(g,P),Ft=Yt(g,{x:ge,y:Ee});return[Ie,ze,yn,Ft]},pxRadiusToMeterRadius(s,u,h){let g=u.project(h),y=L.point(g.x+s,g.y);return u.distance(u.unproject(y),h)}},Xe=Ae;L.PM=L.PM||{version:Zn.version,Map:zo,Toolbar:Fa,Draw:ki,Edit:Ce,Utils:Xe,Matrix:Te,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(u);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(g);function y(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(y);function P(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(P);function B(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(B);function T(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(T);function K(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(K)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(u=>{this.reInitLayer(u)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let u=this._map.mouseEventToLayerPoint(s),h,g;for(let y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(g=h);g&&(L.DomEvent.fakeStop(s),this._fireEvent([g],s))}}),L.PM.initialize()})();class Qa extends Zt.Polygon{constructor(n,i,o=0,a=180,l={}){super([[]],{...l,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});De(this,"center");De(this,"radius");De(this,"startAngle");De(this,"stopAngle");De(this,"numPoints");De(this,"properties");De(this,"pm");De(this,"getRadius",()=>this.radius);De(this,"getStartAngle",()=>this.startAngle);De(this,"getStopAngle",()=>this.stopAngle);this.center=n,this.radius=i,this.startAngle=this.normalizeAngle(o),this.stopAngle=this.normalizeAngle(a),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...l,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",()=>{var f;this.pm&&(this.pm._layers=[],this.pm._markers=[],(f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("pm:vertexadded",()=>{var f;this.pm&&((f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))}),this.updateProperties()}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],i=this.getOpeningAngle();n.push(this.center);for(let o=0;o<=this.numPoints;o++){const l=(this.startAngle+i*o/this.numPoints)*Math.PI/180,f=this.radius*Math.cos(l),v=this.radius*Math.sin(l)/111319.9,b=f/(111319.9*Math.cos(this.center.lat*Math.PI/180)),w=Zt.latLng(this.center.lat+v,this.center.lng+b);n.push(w)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this.updateProperties(),this)}setAngles(n,i){const o=this.normalizeAngle(n),a=this.normalizeAngle(i),l=this.getOpeningAngle();let f=(a-o+360)%360;const p=45;return Math.abs(f-l)>p&&(f>l?f=l+p:f=l-p),f=Math.max(5,Math.min(355,f)),this.startAngle===n?this.stopAngle=(this.startAngle+f)%360:(this.startAngle=o,this.stopAngle=(o+f)%360),this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.openingAngle=f,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<5||n>355?this:(this.stopAngle=(this.startAngle+n)%360,this.properties.openingAngle=n,this.updateGeometry(),this.updateProperties(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this.updateProperties(),this)}getCenter(){return this.center}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}calculatePointOnArc(n){const i=n*Math.PI/180,o=this.radius*Math.cos(i),l=this.radius*Math.sin(i)/111319.9,f=o/(111319.9*Math.cos(this.center.lat*Math.PI/180));return Zt.latLng(this.center.lat+l,this.center.lng+f)}calculateMidpointPosition(){const n=this.getOpeningAngle(),i=(this.startAngle+n/2)%360;return this.calculatePointOnArc(i)}calculateAngleToPoint(n){return Math.atan2(n.lat-this.center.lat,n.lng-this.center.lng)*180/Math.PI}createControlPoints(n,i){const o=[],a=this.calculatePointOnArc(this.startAngle),l=this.calculatePointOnArc(this.stopAngle),f=this.calculateMidpointPosition(),p=this.createControlPoint(n,this.center,"#059669"),v=this.createControlPoint(n,a,"#DC2626"),b=this.createControlPoint(n,l,"#DC2626"),w=this.createControlPoint(n,f,"#2563EB");o.push(p,v,b,w),i(o)}createControlPoint(n,i,o){return Zt.circleMarker(i,{radius:6,color:o,fillColor:o,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0}).addTo(n)}updateProperties(){const n=this.getOpeningAngle(),i=Math.PI*Math.pow(this.radius,2)*n/360,o=2*Math.PI*this.radius*n/360,a=o+2*this.radius;this.properties.area=i,this.properties.arcLength=o,this.properties.perimeter=a,this.properties.openingAngle=n,this.properties.surfaceInterieure=i,this.properties.surfaceExterieure=i,this.properties.diameter=this.radius*2,this.properties.center=this.center,this.fire("properties:updated",{shape:this,properties:this.properties})}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&(this.setLatLngs([n]),this.updateProperties())}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,openingAngle:this.getOpeningAngle()}}}}class rc extends Zt.Circle{constructor(n,i){const o=i.radius||10;super(n,o,i);De(this,"properties");this.properties={type:"Circle",style:i||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getRadius(),i=this.getLatLng();this.properties={...this.properties,radius:n,diameter:n*2,area:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:i,surfaceInterieure:Math.PI*Math.pow(n,2),surfaceExterieure:Math.PI*Math.pow(n,2),style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setRadius(n){return super.setRadius(n),this.updateProperties(),this}setLatLng(n){return super.setLatLng(n),this.updateProperties(),this}calculatePointOnCircle(n){const i=this.getLatLng(),o=this.getRadius(),a=n*Math.PI/180;return Zt.latLng(i.lat+o/111319.9*Math.sin(a),i.lng+o/(111319.9*Math.cos(i.lat*Math.PI/180))*Math.cos(a))}getCardinalPoints(){return[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n))}calculateAngleFromPoint(n){const i=this.getLatLng(),o=n.lng-i.lng,a=n.lat-i.lat;let l=Math.atan2(a,o)*180/Math.PI;return l<0&&(l+=360),l}resizeFromControlPoint(n){const o=this.getLatLng().distanceTo(n);o>0&&super.setRadius(o)}}var Us=63710088e-1,Fx={centimeters:Us*100,centimetres:Us*100,degrees:Us/111325,feet:Us*3.28084,inches:Us*39.37,kilometers:Us/1e3,kilometres:Us/1e3,meters:Us,metres:Us,miles:Us/1609.344,millimeters:Us*1e3,millimetres:Us*1e3,nauticalmiles:Us/1852,radians:1,yards:Us*1.0936};function Dh(t,e,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function kl(t,e,n){n===void 0&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<a[a.length-1].length;l++)if(a[a.length-1][l]!==a[0][l])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:t};return Dh(f,e,n)}function lu(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:t};return Dh(i,e,n)}function jx(t,e){e===void 0&&(e="kilometers");var n=Fx[e];if(!n)throw new Error(e+" units is invalid");return t*n}function eh(t){var e=t%360;return e*Math.PI/180}function D1(t,e,n){if(t!==null)for(var i,o,a,l,f,p,v,b=0,w=0,S,x=t.type,j=x==="FeatureCollection",R=x==="Feature",U=j?t.features.length:1,N=0;N<U;N++){v=j?t.features[N].geometry:R?t.geometry:t,S=v?v.type==="GeometryCollection":!1,f=S?v.geometries.length:1;for(var Z=0;Z<f;Z++){var Y=0,kt=0;if(l=S?v.geometries[Z]:v,l!==null){p=l.coordinates;var At=l.type;switch(b=0,At){case null:break;case"Point":if(e(p,w,N,Y,kt)===!1)return!1;w++,Y++;break;case"LineString":case"MultiPoint":for(i=0;i<p.length;i++){if(e(p[i],w,N,Y,kt)===!1)return!1;w++,At==="MultiPoint"&&Y++}At==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(i=0;i<p.length;i++){for(o=0;o<p[i].length-b;o++){if(e(p[i][o],w,N,Y,kt)===!1)return!1;w++}At==="MultiLineString"&&Y++,At==="Polygon"&&kt++}At==="Polygon"&&Y++;break;case"MultiPolygon":for(i=0;i<p.length;i++){for(kt=0,o=0;o<p[i].length;o++){for(a=0;a<p[i][o].length-b;a++){if(e(p[i][o][a],w,N,Y,kt)===!1)return!1;w++}kt++}Y++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(D1(l.geometries[i],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function N1(t,e){var n,i,o,a,l,f,p,v,b,w,S=0,x=t.type==="FeatureCollection",j=t.type==="Feature",R=x?t.features.length:1;for(n=0;n<R;n++){for(f=x?t.features[n].geometry:j?t.geometry:t,v=x?t.features[n].properties:j?t.properties:{},b=x?t.features[n].bbox:j?t.bbox:void 0,w=x?t.features[n].id:j?t.id:void 0,p=f?f.type==="GeometryCollection":!1,l=p?f.geometries.length:1,o=0;o<l;o++){if(a=p?f.geometries[o]:f,a===null){if(e(null,S,v,b,w)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(a,S,v,b,w)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(e(a.geometries[i],S,v,b,w)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}S++}}function zx(t,e,n){var i=n;return N1(t,function(o,a,l,f,p){i=e(i,o,a,l,f,p)}),i}function Ux(t,e){N1(t,function(n,i,o,a,l){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return e(Dh(n,o,{bbox:a,id:l}),i,0)===!1?!1:void 0}var p;switch(f){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon";break}for(var v=0;v<n.coordinates.length;v++){var b=n.coordinates[v],w={type:p,coordinates:b};if(e(Dh(w,o),i,v)===!1)return!1}})}function qx(t,e){Ux(t,function(n,i,o){var a=0;if(n.geometry){var l=n.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var f,p=0,v=0,b=0;if(D1(n,function(w,S,x,j,R){if(f===void 0||i>p||j>v||R>b){f=w,p=i,v=j,b=R,a=0;return}var U=lu([f,w],n.properties);if(e(U,i,o,R,a)===!1)return!1;a++,f=w})===!1)return!1}}})}function $x(t,e,n){var i=n,o=!1;return qx(t,function(a,l,f,p,v){o===!1&&n===void 0?i=a:i=e(i,a,l,f,p,v),o=!0}),i}function W0(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function tu(t,e,n){n===void 0&&(n={});var i=W0(t),o=W0(e),a=eh(o[1]-i[1]),l=eh(o[0]-i[0]),f=eh(i[1]),p=eh(o[1]),v=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(f)*Math.cos(p);return jx(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),n.units)}var Z0=6378137;function Su(t){return zx(t,function(e,n){return e+Vx(n)},0)}function Vx(t){var e=0,n;switch(t.type){case"Polygon":return K0(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=K0(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function K0(t){var e=0;if(t&&t.length>0){e+=Math.abs(Y0(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Y0(t[n]))}return e}function Y0(t){var e,n,i,o,a,l,f,p=0,v=t.length;if(v>2){for(f=0;f<v;f++)f===v-2?(o=v-2,a=v-1,l=0):f===v-1?(o=v-1,a=0,l=1):(o=f,a=f+1,l=f+2),e=t[o],n=t[a],i=t[l],p+=(zf(i[0])-zf(e[0]))*Math.sin(zf(n[1]));p=p*Z0*Z0/2}return p}function zf(t){return t*Math.PI/180}function Bc(t,e){return e===void 0&&(e={}),$x(t,function(n,i){var o=i.geometry.coordinates;return n+tu(o[0],o[1],e)},0)}class ba extends Zt.Rectangle{constructor(n,i={}){super(n,{...i,pmIgnore:!1,interactive:!0});De(this,"properties");this.properties={type:"Rectangle",style:i||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var f;const n=this.getBounds(),i=n.getNorthEast(),o=n.getSouthWest(),a=tu([o.lng,o.lat],[i.lng,o.lat],{units:"meters"}),l=tu([o.lng,o.lat],[o.lng,i.lat],{units:"meters"});this.properties={...this.properties,width:a,height:l,area:a*l,perimeter:2*(a+l),center:n.getCenter(),corners:{northEast:i,northWest:n.getNorthWest(),southEast:n.getSouthEast(),southWest:o},bounds:n,surfaceInterieure:a*l,surfaceExterieure:a*l,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((f=this.options)==null?void 0:f.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setBounds(n){return super.setBounds(n),this.updateProperties(),this}getMidPoints(){const n=this.getBounds(),i=n.getNorthWest(),o=n.getNorthEast(),a=n.getSouthEast(),l=n.getSouthWest();return[Zt.latLng((i.lat+o.lat)/2,(i.lng+o.lng)/2),Zt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2),Zt.latLng((l.lat+a.lat)/2,(l.lng+a.lng)/2),Zt.latLng((i.lat+l.lat)/2,(i.lng+l.lng)/2)]}getDimensions(){const n=this.getBounds(),i=n.getNorthEast(),o=n.getSouthWest(),a=tu([o.lng,o.lat],[i.lng,o.lat],{units:"meters"}),l=tu([o.lng,o.lat],[o.lng,i.lat],{units:"meters"});return{width:a,height:l}}resizeFromCorner(n,i){const o=this.getBounds(),a=[o.getNorthWest(),o.getNorthEast(),o.getSouthEast(),o.getSouthWest()],l=(n+2)%4,f=a[l],p=Zt.latLngBounds(f,i);Zt.Rectangle.prototype.setBounds.call(this,p)}resizeFromSide(n,i){const o=this.getBounds(),a=o.getNorthWest(),l=o.getSouthEast(),f=o.getSouthWest();let p;switch(n){case 0:p=Zt.latLngBounds(Zt.latLng(i.lat,a.lng),Zt.latLng(f.lat,l.lng));break;case 1:p=Zt.latLngBounds(Zt.latLng(a.lat,a.lng),Zt.latLng(l.lat,i.lng));break;case 2:p=Zt.latLngBounds(Zt.latLng(a.lat,a.lng),Zt.latLng(i.lat,l.lng));break;case 3:p=Zt.latLngBounds(Zt.latLng(a.lat,i.lng),Zt.latLng(l.lat,l.lng));break}p&&(Zt.Rectangle.prototype.setBounds.call(this,p),this.updateProperties())}moveFromCenter(n){const i=this.getBounds(),o=i.getCenter(),a=n.lng-o.lng,l=n.lat-o.lat,f=i.getNorthWest(),p=i.getSouthEast(),v=Zt.latLng(f.lat+l,f.lng+a),b=Zt.latLng(p.lat+l,p.lng+a);Zt.Rectangle.prototype.setBounds.call(this,Zt.latLngBounds(v,b))}}class So extends Zt.Rectangle{constructor(n,i="Double-cliquez pour éditer",o={}){var p,v,b,w,S,x,j,R;const a=n instanceof Zt.LatLngBounds?n:Zt.latLngBounds(n);if(!a.isValid()){console.warn("[TextRectangle] Limites invalides, utilisation de limites par défaut");const U=Zt.latLng(0,0);a.extend(Zt.latLng(U.lat+.001,U.lng+.001)),a.extend(Zt.latLng(U.lat-.001,U.lng-.001))}const l={...o.textStyle,color:o.textColor||((p=o.textStyle)==null?void 0:p.color)||"#000000",fontFamily:o.fontFamily||((v=o.textStyle)==null?void 0:v.fontFamily)||"Arial, sans-serif",textAlign:o.textAlign||((b=o.textStyle)==null?void 0:b.textAlign)||"center",backgroundColor:o.backgroundColor||((w=o.textStyle)==null?void 0:w.backgroundColor)||"#FFFFFF",backgroundOpacity:o.backgroundOpacity??((S=o.textStyle)==null?void 0:S.backgroundOpacity)??1,bold:o.bold||((x=o.textStyle)==null?void 0:x.bold)||!1,italic:o.italic||((j=o.textStyle)==null?void 0:j.italic)||!1,fontSize:((R=o.textStyle)==null?void 0:R.fontSize)||"14px"},f={pmIgnore:!1,interactive:!0,fill:!0,stroke:!0,className:"leaflet-text-rectangle",...o,textStyle:l};super(a,f);De(this,"properties");De(this,"_textNode",null);De(this,"_isEditing",!1);De(this,"_editableDiv",null);De(this,"_text");De(this,"_rotation",0);De(this,"_textStyle",{color:"#000000",fontSize:"14px",fontFamily:"Arial, sans-serif",textAlign:"center",backgroundColor:"#FFFFFF",backgroundOpacity:1,bold:!1,italic:!1});De(this,"_initialBounds",null);De(this,"_isResizing",!1);De(this,"_resizePreview",null);De(this,"_minWidth",50);De(this,"_minHeight",30);De(this,"_maxWidth",2e3);De(this,"_maxHeight",1e3);De(this,"_onKeyDown",n=>{n.key==="Enter"&&n.ctrlKey?(n.preventDefault(),this._finishEditing()):n.key==="Escape"&&(n.preventDefault(),this._cancelEditing())});De(this,"_finishEditing",()=>{if(this._editableDiv)try{const n=this._editableDiv.innerText.trim()||"Double-cliquez pour éditer";this._cleanupEditableDiv(),this.setText(n),this._textRedraw(),this.fire("edit:end"),this.map&&!this.map.dragging.enabled()&&this.map.dragging.enable()}catch(n){console.error("[TextRectangle] Erreur lors de la finalisation de l'édition :",n),this._cleanupEditableDiv()}});De(this,"_cancelEditing",()=>{this._textRedraw(),this._cleanupEditableDiv(),this.map&&!this.map.dragging.enabled()&&this.map.dragging.enable()});De(this,"_updateTextPosition",()=>{this.updateProperties(),this._textRedraw()});De(this,"_onZoomEnd",()=>{this._textRedraw()});De(this,"_onAdd",()=>{this._textRedraw(),this.map&&this.map.on("zoomend",this._onZoomEnd.bind(this))});De(this,"_onRemove",()=>{this._removeTextNode(),this.map&&this.map.off("zoomend",this._onZoomEnd)});this._text=i,this._textStyle=l,this.properties={type:"TextRectangle",text:this._text,width:0,height:0,area:0,rotation:this._rotation,style:{...f,textStyle:this._textStyle}},this.on({add:this._onAdd,remove:this._onRemove,dblclick:this._onDoubleClick,dragend:this._updateTextPosition,"pm:edit":this._updateTextPosition,"pm:dragend":this._updateTextPosition,"pm:markerdragend":this._updateTextPosition,"pm:vertexadded":this._updateTextPosition,"pm:vertexremoved":this._updateTextPosition}),this.pm&&(this.pm.enableLayerDrag(),console.log("[TextRectangle] Geoman activé pour cette instance"))}get map(){return this._map}set map(n){this._map=n}setText(n,i){const o=this.properties.text;this._text=n,i&&(this._textStyle={...this._textStyle,...i}),this.properties.text=n||"Double-cliquez pour éditer",console.log("[TextRectangle] Mise à jour du texte",{oldText:o,newText:this.properties.text,hasTextNode:!!this._textNode}),this._textRedraw(),this.fire("text:updated",{text:this.properties.text,oldText:o,bounds:this.getBounds(),style:this.properties.style}),this.fire("properties:updated",{shape:this,properties:this.properties,source:"setText"})}setTextStyle(n){this._textStyle={...this._textStyle,...n},this.properties.style.textStyle=this._textStyle,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}setRotation(n){this.properties.rotation=n%360,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}getTextElement(){return this._textNode}updateProperties(){if(this.map)try{const n=this.getBounds(),i=n.getSouthWest(),o=Zt.latLng(n.getSouth(),n.getEast()),a=this.map.distance(i,o),l=this.map.distance(i,Zt.latLng(n.getNorth(),n.getWest()));this.properties.width=a,this.properties.height=l,this.properties.area=a*l,this.properties.center=n.getCenter(),this.fire("properties:updated",{shape:this,properties:this.properties,source:"updateProperties",dimensions:{width:a,height:l}}),console.log("[TextRectangle] Propriétés mises à jour",{width:a,height:l,area:a*l,center:n.getCenter()})}catch(n){console.error("[TextRectangle] Erreur lors de la mise à jour des propriétés :",n)}}setBounds(n){const i=n instanceof Zt.LatLngBounds?n:Zt.latLngBounds(n);return Zt.Rectangle.prototype.setBounds.call(this,i),this._textRedraw(),this.updateProperties(),this}startResize(){if(!this._isResizing&&(this._isResizing=!0,this._initialBounds=this.getBounds(),this.map&&!this._resizePreview))try{if(this._resizePreview=Zt.rectangle(this._initialBounds,{color:this.options.color||"#3388ff",weight:this.options.weight||2,opacity:.8,fillColor:this.options.fillColor||"#3388ff",fillOpacity:.2,dashArray:this.options.dashArray||"5,5",className:"resize-preview"}).addTo(this.map),this._rotation!==0){const n=this._resizePreview._path;n&&(n.style.transformOrigin="center",n.style.transform=`rotate(${this._rotation}deg)`)}this._textNode&&(this._textNode.style.opacity="0.5")}catch(n){console.error("[TextRectangle] Erreur lors de la création du rectangle fantôme:",n),this._cleanupResizePreview()}}updateResizePreview(n){if(!(!this._isResizing||!this._resizePreview||!this.map))try{const i=this.map.latLngToContainerPoint(n.getNorthWest()),o=this.map.latLngToContainerPoint(n.getSouthEast()),a=Math.abs(o.x-i.x),l=Math.abs(o.y-i.y);if(a<this._minWidth||l<this._minHeight||a>this._maxWidth||l>this._maxHeight)return;if(this._resizePreview.setBounds(n),this._rotation!==0){const f=this._resizePreview._path;f&&(f.style.transformOrigin="center",f.style.transform=`rotate(${this._rotation}deg)`)}if(this._textNode){const f=Math.min(a,l)*.1,p=Math.max(10,Math.min(48,f)),v=p*1.2,w=this.properties.text.split(`
`).length*v,S=i.y+(l-w)/2,x=this._calculateTextX(i.x,o.x,5);if(this._textNode.setAttribute("x",x.toString()),this._textNode.setAttribute("y",S.toString()),this._textNode.querySelectorAll("tspan").forEach((j,R)=>{j.setAttribute("x",x.toString()),j.setAttribute("dy",R===0?"0":`${v}px`),j.style.fontSize=`${p}px`}),this._rotation!==0){const j=this.map.latLngToLayerPoint(n.getCenter());this._textNode.setAttribute("transform",`rotate(${this._rotation}, ${j.x}, ${j.y})`)}}this.fire("resize:update",{bounds:n})}catch(i){console.error("[TextRectangle] Erreur lors de la mise à jour du rectangle fantôme:",i),this._cleanupResizePreview()}}endResize(n){if(this._isResizing)try{if(this._cleanupResizePreview(),this._textNode&&(this._textNode.style.opacity="1"),this.map){const i=this.map.latLngToContainerPoint(n.getNorthWest()),o=this.map.latLngToContainerPoint(n.getSouthEast()),a=Math.abs(o.x-i.x),l=Math.abs(o.y-i.y);if(a<this._minWidth||l<this._minHeight||a>this._maxWidth||l>this._maxHeight){this.cancelResize();return}}this.setBounds(n),this._textRedraw(),this.fire("resize:end",{bounds:n})}catch(i){console.error("[TextRectangle] Erreur lors de la fin du redimensionnement:",i),this.cancelResize()}finally{this._isResizing=!1}}cancelResize(){if(!(!this._isResizing||!this._initialBounds))try{this._cleanupResizePreview(),this._textNode&&(this._textNode.style.opacity="1"),this.setBounds(this._initialBounds)}catch(n){console.error("[TextRectangle] Erreur lors de l'annulation du redimensionnement:",n)}finally{this._isResizing=!1,this._initialBounds=null}}_cleanupResizePreview(){if(this._resizePreview&&this.map)try{this.map.removeLayer(this._resizePreview)}catch(n){console.error("[TextRectangle] Erreur lors du nettoyage du rectangle fantôme:",n)}finally{this._resizePreview=null}}_onDoubleClick(n){this._isEditing||this._isResizing||(Zt.DomEvent.stopPropagation(n),this.fire("edit:start"),this._isEditing=!0,this._removeTextNode(),this._createEditableDiv())}_createEditableDiv(){if(this.map)try{const n=this.getBounds(),i=this.map.latLngToContainerPoint(n.getNorthWest()),o=this.map.latLngToContainerPoint(n.getSouthEast()),a=o.x-i.x,l=o.y-i.y,f=document.createElement("div");f.className="leaflet-text-rectangle-editor",f.contentEditable="true",f.innerText=this.properties.text;const p=Math.min(a,l)*.1,v=Math.max(10,Math.min(48,p));if(Object.assign(f.style,{position:"absolute",left:`${i.x}px`,top:`${i.y}px`,width:`${a}px`,height:`${l}px`,backgroundColor:this.properties.style.fillColor||"#FFFFFF",opacity:`${this.properties.style.fillOpacity??1}`,color:this.properties.style.textColor||"#000000",fontSize:`${v}px`,fontFamily:this.properties.style.fontFamily||"Arial, sans-serif",fontWeight:this.properties.style.bold?"bold":"normal",fontStyle:this.properties.style.italic?"italic":"normal",textAlign:this.properties.style.textAlign||"center",border:`${this.properties.style.weight||2}px solid ${this.properties.style.color||"#3388ff"}`,borderRadius:"2px",padding:"4px",boxSizing:"border-box",zIndex:"1000",overflow:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word",cursor:"text",userSelect:"text",outline:"none",display:"flex",alignItems:"center",justifyContent:this._getJustifyContent()}),this.properties.rotation!==0){const x=this.map.latLngToContainerPoint(n.getCenter());f.style.transformOrigin=`${x.x-i.x}px ${x.y-i.y}px`,f.style.transform=`rotate(${this.properties.rotation}deg)`}this.map.getContainer().appendChild(f),this._editableDiv=f,f.focus();const w=window.getSelection(),S=document.createRange();S.selectNodeContents(f),w==null||w.removeAllRanges(),w==null||w.addRange(S),f.addEventListener("keydown",this._onKeyDown.bind(this)),f.addEventListener("blur",this._finishEditing.bind(this)),f.addEventListener("paste",x=>{var R;x.preventDefault();const j=((R=x.clipboardData)==null?void 0:R.getData("text/plain"))||"";document.execCommand("insertText",!1,j)}),this.map.dragging.enabled()&&this.map.dragging.disable(),console.log("[TextRectangle] Div éditable créé",{position:{left:i.x,top:i.y},size:{width:a,height:l},fontSize:v,styles:this.properties.style})}catch(n){console.error("[TextRectangle] Erreur lors de la création de l'éditeur :",n),this._isEditing=!1}}_getJustifyContent(){switch(this.properties.style.textAlign||"center"){case"left":return"flex-start";case"right":return"flex-end";case"center":default:return"center"}}_cleanupEditableDiv(){this._editableDiv&&(this._editableDiv.removeEventListener("keydown",this._onKeyDown),this._editableDiv.removeEventListener("blur",this._finishEditing),this._editableDiv.parentNode&&this._editableDiv.parentNode.removeChild(this._editableDiv),this._editableDiv=null,this._isEditing=!1)}_textRedraw(){if(!Zt.Browser.svg||!this.map||this._isEditing||!this._path){console.log("[TextRectangle] _textRedraw ignoré",{reason:Zt.Browser.svg?this.map?this._isEditing?"En cours d'édition":"Chemin SVG non trouvé":"Carte non disponible":"SVG non supporté"});return}this._removeTextNode();const n=this.properties.text;if(n)try{const i=this._path;if(!i){console.warn("[TextRectangle] Chemin SVG non trouvé");return}const o=i.ownerSVGElement;if(!o){console.warn("[TextRectangle] Élément SVG parent non trouvé");return}const a=Zt.SVG.create("text");a.setAttribute("class","leaflet-text-rectangle-text"),Object.assign(a.style,{fill:this.properties.style.textColor||"#000000",fontFamily:this.properties.style.fontFamily||"Arial, sans-serif",fontWeight:this.properties.style.bold?"bold":"normal",fontStyle:this.properties.style.italic?"italic":"normal"});const l=this.getBounds(),f=this.map.latLngToLayerPoint(l.getNorthWest()),p=this.map.latLngToLayerPoint(l.getSouthEast()),v=p.x-f.x,b=p.y-f.y,w=Math.min(v,b)*.1,S=Math.max(10,Math.min(48,w)),x=n.split(`
`),j=S*1.2,R=x.length*j,U=f.y+(b-R)/2,N=this._getTextAnchor(),Z=this._calculateTextX(f.x,p.x,5);if(a.setAttribute("text-anchor",N),a.setAttribute("dominant-baseline","hanging"),x.forEach((Y,kt)=>{const At=Zt.SVG.create("tspan");At.textContent=Y,At.setAttribute("x",Z.toString()),At.setAttribute("dy",kt===0?"0":`${j}px`),At.style.fontSize=`${S}px`,a.appendChild(At)}),a.setAttribute("y",U.toString()),this.properties.rotation!==0){const Y=this.map.latLngToLayerPoint(l.getCenter());a.setAttribute("transform",`rotate(${this.properties.rotation}, ${Y.x}, ${Y.y})`)}this._textNode=a,o.appendChild(a),this.fire("text:redrawn",{text:n,fontSize:S,position:{x:Z,y:U},dimensions:{width:v,height:b}}),console.log("[TextRectangle] Texte redessiné avec succès",{text:n,fontSize:S,position:{x:Z,y:U},dimensions:{width:v,height:b},lines:x.length,lineHeight:j,totalTextHeight:R})}catch(i){console.error("[TextRectangle] Erreur lors du rendu du texte :",i)}}_calculateTextX(n,i,o){const a=i-n;switch(this.properties.style.textAlign){case"left":return n+o;case"right":return i-o;case"center":default:return n+a/2}}_getTextAnchor(){switch(this.properties.style.textAlign){case"left":return"start";case"right":return"end";case"center":default:return"middle"}}_removeTextNode(){this._textNode&&this._textNode.parentNode&&(this._textNode.parentNode.removeChild(this._textNode),this._textNode=null)}getDimensions(){const n=this.getBounds();if(!this.map)return{width:0,height:0};const i=n.getSouthWest(),o=Zt.latLng(n.getSouth(),n.getEast()),a=this.map.distance(i,o),l=this.map.distance(i,Zt.latLng(n.getNorth(),n.getWest()));return{width:a,height:l}}getMidPoints(){const n=this.getBounds(),i=n.getNorthWest(),o=n.getNorthEast(),a=n.getSouthEast(),l=n.getSouthWest();return[Zt.latLng((i.lat+o.lat)/2,(i.lng+o.lng)/2),Zt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2),Zt.latLng((l.lat+a.lat)/2,(l.lng+a.lng)/2),Zt.latLng((i.lat+l.lat)/2,(i.lng+l.lng)/2)]}}var so=63710088e-1,O1={centimeters:so*100,centimetres:so*100,degrees:360/(2*Math.PI),feet:so*3.28084,inches:so*39.37,kilometers:so/1e3,kilometres:so/1e3,meters:so,metres:so,miles:so/1609.344,millimeters:so*1e3,millimetres:so*1e3,nauticalmiles:so/1852,radians:1,yards:so*1.0936};function Hx(t,e,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function bd(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!J0(t[0])||!J0(t[1]))throw new Error("coordinates must contain numbers");return Hx({type:"Point",coordinates:t},e,n)}function Gx(t,e="kilometers"){const n=O1[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Wx(t,e="kilometers"){const n=O1[e];if(!n)throw new Error(e+" units is invalid");return t/n}function wd(t){return t%(2*Math.PI)*180/Math.PI}function Ko(t){return t%360*Math.PI/180}function J0(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Tc(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Zx(t){return t.type==="Feature"?t.geometry:t}function R1(t,e,n={}){if(n.final===!0)return Kx(t,e);const i=Tc(t),o=Tc(e),a=Ko(i[0]),l=Ko(o[0]),f=Ko(i[1]),p=Ko(o[1]),v=Math.sin(l-a)*Math.cos(p),b=Math.cos(f)*Math.sin(p)-Math.sin(f)*Math.cos(p)*Math.cos(l-a);return wd(Math.atan2(v,b))}function Kx(t,e){let n=R1(e,t);return n=(n+180)%360,n}function Yx(t,e,n,i={}){const o=Tc(t),a=Ko(o[0]),l=Ko(o[1]),f=Ko(n),p=Wx(e,i.units),v=Math.asin(Math.sin(l)*Math.cos(p)+Math.cos(l)*Math.sin(p)*Math.cos(f)),b=a+Math.atan2(Math.sin(f)*Math.sin(p)*Math.cos(l),Math.cos(p)-Math.sin(l)*Math.sin(v)),w=wd(b),S=wd(v);return bd([w,S],i.properties)}function Jx(t,e,n={}){var i=Tc(t),o=Tc(e),a=Ko(o[1]-i[1]),l=Ko(o[0]-i[0]),f=Ko(i[1]),p=Ko(o[1]),v=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(f)*Math.cos(p);return Gx(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),n.units)}function Xx(t,e,n={}){const o=Zx(t).coordinates;let a=0;for(let l=0;l<o.length&&!(e>=a&&l===o.length-1);l++)if(a>=e){const f=e-a;if(f){const p=R1(o[l],o[l-1])-180;return Yx(o[l],f,p,n)}else return bd(o[l])}else a+=Jx(o[l],o[l+1],n);return bd(o[o.length-1])}var xd=Xx;class Gi extends Zt.Polyline{constructor(n,i={}){super(n,{...i,pmIgnore:!1,interactive:!0});De(this,"properties");De(this,"cachedProperties",{});De(this,"needsUpdate",!0);this.properties={type:"Line",style:i||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const i=n.map(a=>[a.lng,a.lat]);try{const a=lu(i),l=Bc(a,{units:"meters"});let f;if(n.length===2)f=Zt.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const v=xd(a,l/2,{units:"meters"});f=Zt.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0])}const p=10;this.properties={...this.properties,length:l,center:f,vertices:n.length,surfaceInfluence:l*p,dimensions:{width:p},style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.cachedProperties.length=l,this.cachedProperties.center=f,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate line properties",a)}finally{}}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.invalidateCache(),this.updateProperties(),this}getMidPoints(){if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),i=[];if(n.length<2)return i;for(let o=0;o<n.length-1;o++){const a=n[o],l=n[o+1];if(!a||!l){console.warn("Points invalides détectés pour le segment",o);continue}i.push(Zt.latLng((a.lat+l.lat)/2,(a.lng+l.lng)/2))}return this.cachedProperties.midPoints=i,i}getMidPointAt(n){const i=this.getLatLngs();if(n<0||n>=i.length-1||i.length<2)return null;const o=i[n],a=i[n+1];return!o||!a?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Zt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2)}moveVertex(n,i,o=!1){const a=this.getLatLngs();n>=0&&n<a.length&&(a[n]=i,Zt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}addVertex(n,i,o=!1){const a=this.getLatLngs();n>=0&&n<a.length-1&&(a.splice(n+1,0,i),Zt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}move(n,i=!0){const a=this.getLatLngs().map(l=>Zt.latLng(l.lat+n.lat,l.lng+n.lng));return Zt.Polyline.prototype.setLatLngs.call(this,a),this.fire("move"),this.needsUpdate=!0,this.cachedProperties.center=void 0,i&&this.updateProperties(),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Zt.LatLng(0,0);try{const i=n.map(p=>[p.lng,p.lat]),o=lu(i),a=Bc(o,{units:"meters"}),l=xd(o,a/2,{units:"meters"}),f=Zt.latLng(l.geometry.coordinates[1],l.geometry.coordinates[0]);return this.cachedProperties.center=f,f}catch(i){console.warn("Error calculating line center with turf.js, using simple method",i);const o=n.reduce((f,p)=>f+p.lat,0)/n.length,a=n.reduce((f,p)=>f+p.lng,0)/n.length,l=new Zt.LatLng(o,a);return this.cachedProperties.center=l,l}}getSegmentLengths(){if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),i=[];if(n.length<2)return i;for(let o=0;o<n.length-1;o++){const a=n[o],l=n[o+1];i.push(a.distanceTo(l))}return this.cachedProperties.segmentLengths=i,i}getSegmentLengthAt(n){const i=this.getLatLngs();if(n<0||n>=i.length-1||i.length<2)return 0;const o=i[n],a=i[n+1];return o.distanceTo(a)}getLengthToVertex(n){const i=this.getLatLngs();let o=0;if(n<=0||i.length<2)return 0;for(let a=0;a<Math.min(n,i.length-1);a++)o+=i[a].distanceTo(i[a+1]);return o}getLength(){if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let i=0;for(let o=0;o<n.length-1;o++)i+=n[o].distanceTo(n[o+1]);return this.cachedProperties.length=i,i}}function Qx(t,e,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function tL(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!X0(t[0])||!X0(t[1]))throw new Error("coordinates must contain numbers");return Qx({type:"Point",coordinates:t},e,n)}function X0(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function I1(t,e,n){if(t!==null)for(var i,o,a,l,f,p,v,b=0,w=0,S,x=t.type,j=x==="FeatureCollection",R=x==="Feature",U=j?t.features.length:1,N=0;N<U;N++){v=j?t.features[N].geometry:R?t.geometry:t,S=v?v.type==="GeometryCollection":!1,f=S?v.geometries.length:1;for(var Z=0;Z<f;Z++){var Y=0,kt=0;if(l=S?v.geometries[Z]:v,l!==null){p=l.coordinates;var At=l.type;switch(b=At==="Polygon"||At==="MultiPolygon"?1:0,At){case null:break;case"Point":if(e(p,w,N,Y,kt)===!1)return!1;w++,Y++;break;case"LineString":case"MultiPoint":for(i=0;i<p.length;i++){if(e(p[i],w,N,Y,kt)===!1)return!1;w++,At==="MultiPoint"&&Y++}At==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(i=0;i<p.length;i++){for(o=0;o<p[i].length-b;o++){if(e(p[i][o],w,N,Y,kt)===!1)return!1;w++}At==="MultiLineString"&&Y++,At==="Polygon"&&kt++}At==="Polygon"&&Y++;break;case"MultiPolygon":for(i=0;i<p.length;i++){for(kt=0,o=0;o<p[i].length;o++){for(a=0;a<p[i][o].length-b;a++){if(e(p[i][o][a],w,N,Y,kt)===!1)return!1;w++}kt++}Y++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(I1(l.geometries[i],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function eL(t,e={}){let n=0,i=0,o=0;return I1(t,function(a){n+=a[0],i+=a[1],o++}),tL([n/o,i/o],e.properties)}var _c=eL;class Bu extends Zt.Polygon{constructor(n,i={}){super(n,{...i,pmIgnore:!1,interactive:!0});De(this,"properties");this.properties={type:"Polygon",style:{color:i.color||"#3388ff",weight:i.weight||3,opacity:i.opacity||1,fillColor:i.fillColor||"#3388ff",fillOpacity:i.fillOpacity||.2,dashArray:i.dashArray||""}},this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){var n;try{const i=this.getLatLngs()[0];if(!i||i.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const o=i.map(b=>[b.lng,b.lat]);o.push(o[0]);const a=kl([o]),l=Su(a),f=Bc(lu([...o]),{units:"meters"}),p=_c(a),v=Zt.latLng(p.geometry.coordinates[1],p.geometry.coordinates[0]);this.properties={...this.properties,area:l,perimeter:f,center:v,vertices:i.length,surfaceInterieure:l,surfaceExterieure:l,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((n=this.options)==null?void 0:n.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(i){console.error("Failed to calculate polygon properties",i)}}setLatLngs(n){return super.setLatLngs(n),this.updateProperties(),this}getMidPoints(){const n=this.getLatLngs()[0],i=[];if(n.length<2)return i;for(let o=0;o<n.length;o++){const a=n[o],l=n[(o+1)%n.length];i.push(Zt.latLng((a.lat+l.lat)/2,(a.lng+l.lng)/2))}return i}moveVertex(n,i){const o=this.getLatLngs()[0];n>=0&&n<o.length&&(o[n]=i,Zt.Polygon.prototype.setLatLngs.call(this,[o]))}addVertex(n,i){const o=this.getLatLngs()[0];n>=0&&n<o.length&&(o.splice((n+1)%o.length,0,i),Zt.Polygon.prototype.setLatLngs.call(this,[o]))}move(n){const o=this.getLatLngs()[0].map(a=>Zt.latLng(a.lat+n.lat,a.lng+n.lng));return Zt.Polygon.prototype.setLatLngs.call(this,[o]),this}getCenter(){const n=this.getLatLngs()[0];if(!n||n.length===0)return new Zt.LatLng(0,0);try{const i=n.filter(v=>v&&typeof v.lat=="number"&&typeof v.lng=="number"&&!isNaN(v.lat)&&!isNaN(v.lng)&&Math.abs(v.lat)<=90&&Math.abs(v.lng)<=180);if(i.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Zt.LatLng(0,0);const o=i.map(v=>[v.lng,v.lat]);o.push(o[0]);const a=kl([o]),l=_c(a),f=l.geometry.coordinates[1],p=l.geometry.coordinates[0];if(typeof f!="number"||typeof p!="number"||isNaN(f)||isNaN(p)||Math.abs(f)>90||Math.abs(p)>180)throw new Error("Centroid calculé invalide");return Zt.latLng(f,p)}catch(i){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",i);let o=0,a=0,l=0;for(const f of n)f&&typeof f.lat=="number"&&typeof f.lng=="number"&&!isNaN(f.lat)&&!isNaN(f.lng)&&Math.abs(f.lat)<=90&&Math.abs(f.lng)<=180&&(o+=f.lat,a+=f.lng,l++);return l===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Zt.LatLng(0,0)):new Zt.LatLng(o/l,a/l)}}getSegmentLengths(){const n=this.getLatLngs()[0],i=[];if(n.length<2)return i;for(let o=0;o<n.length;o++){const a=n[o],l=n[(o+1)%n.length];i.push(a.distanceTo(l))}return i}}const ys=class ys extends Gi{constructor(n,i={}){super(n,{...i,color:"#FF4500",weight:4,opacity:.8});De(this,"elevationData",[]);De(this,"elevationProfile",null);De(this,"elevationMarker",null);De(this,"samplePoints",[]);De(this,"sampleTooltips",[]);De(this,"samplePointStyle",{radius:4,color:"#FF4500",fillColor:"#FF4500",fillOpacity:.6,weight:2,opacity:.8});De(this,"minMaxPointStyle",{radius:6,weight:3,opacity:1,fillOpacity:1});this.properties={...this.properties,type:"ElevationLine",elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending",samplePointStyle:this.samplePointStyle,minMaxPointStyle:this.minMaxPointStyle},this.setupEventListeners()}setupEventListeners(){this.on("edit",()=>this.updateElevationProfile()),this.on("move",()=>this.updateElevationProfile()),this.on("pm:vertexadded",()=>{console.log("[ElevationLine] Vertex added, updating profile"),this.updateElevationProfile()}),this.on("pm:vertexremoved",()=>{console.log("[ElevationLine] Vertex removed, updating profile"),this.updateElevationProfile()}),this.on("pm:dragend",()=>{console.log("[ElevationLine] Drag ended, updating profile"),this.updateElevationProfile()}),this.on("pm:markerdragend",()=>{console.log("[ElevationLine] Marker drag ended, updating profile"),this.updateElevationProfile()}),this.on("pm:edit",n=>{n.layer.properties.type="ElevationLine"})}calculateOptimalSampleCount(){const n=this.getLength(),i=Math.ceil(n/ys.SAMPLE_DISTANCE);return Math.min(Math.max(i,ys.MIN_SAMPLES),ys.MAX_SAMPLES)}async fetchElevationData(n=0){if(this.getLatLngs().length===0)return;const o=this.getLength();let a="";const l=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${l} sample points for ${o.toFixed(0)}m line`);const f=[];for(let p=0;p<l;p++){const v=p/(l-1)*o,b=this.getPointAtDistance(v);b&&f.push(`${b.lat},${b.lng}`)}a=f.join("|");try{const p=await fetch(`${ys.API_URL}?locations=${a}`);if(!p.ok)throw new Error(`HTTP error ${p.status}`);const v=await p.json();if(!v.results||!Array.isArray(v.results))throw new Error("Invalid API response format");this.elevationData=v.results.map((b,w)=>({distance:w/(l-1)*o,elevation:b.elevation})),this.properties.dataSource="api"}catch(p){if(console.warn(`[ElevationLine] API fetch attempt ${n+1}/${ys.MAX_RETRIES} failed:`,p),n<ys.MAX_RETRIES)return await new Promise(v=>setTimeout(v,ys.RETRY_DELAY)),this.fetchElevationData(n+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()}simulateElevationData(){const n=this.getLength(),i=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:i},(o,a)=>{const l=a/(i-1)*n,f=100+Math.sin(l/n*Math.PI*2)*50;return{distance:l,elevation:f}})}calculateElevationStatistics(){if(!this.elevationData.length)return;const n=this.elevationData.map(f=>f.elevation),i=n.length?Math.max(...n):0,o=n.length?Math.min(...n):0;let a=0,l=0;for(let f=1;f<this.elevationData.length;f++){const p=this.elevationData[f].elevation-this.elevationData[f-1].elevation;p>0?a+=p:l+=Math.abs(p)}this.properties.maxElevation=i,this.properties.minElevation=o,this.properties.elevationGain=a,this.properties.elevationLoss=l}showSamplePoints(){if(this.clearSamplePoints(),!this.elevationData.length)return;const n=this.elevationData.map(a=>a.elevation),i=Math.max(...n),o=Math.min(...n);this.elevationData.forEach(a=>{const l=this.getPointAtDistance(a.distance);if(!l)return;const f=a.elevation===o,p=a.elevation===i;let v={...this.samplePointStyle};f?v={...v,...this.minMaxPointStyle,color:"#DC2626",fillColor:"#DC2626"}:p&&(v={...v,...this.minMaxPointStyle,color:"#059669",fillColor:"#059669"});const b=Zt.circleMarker(l,v),w=Zt.tooltip({permanent:!1,direction:"top",className:"elevation-tooltip",offset:[0,-10]});let S=`
        Distance: ${this.formatDistance(a.distance)}<br>
        Altitude: ${this.formatElevation(a.elevation)}
      `;f&&(S+="<br><strong>Point le plus bas</strong>"),p&&(S+="<br><strong>Point le plus haut</strong>"),w.setContent(S),b.on("mouseover",()=>{b.setStyle({...v,radius:v.radius+2,fillOpacity:1}),b.bindTooltip(w).openTooltip()}),b.on("mouseout",()=>{b.setStyle(v),b.closeTooltip()}),this._map&&(b.addTo(this._map),this.samplePoints.push(b),this.sampleTooltips.push(w))})}clearSamplePoints(){this.samplePoints.forEach(n=>n.remove()),this.samplePoints=[],this.sampleTooltips.forEach(n=>n.remove()),this.sampleTooltips=[]}formatDistance(n){return n>=1e3?`${(n/1e3).toFixed(2)} km`:`${n.toFixed(0)} m`}formatElevation(n){return`${n.toFixed(0)} m`}onAdd(n){return super.onAdd(n),this.showSamplePoints(),this}onRemove(n){return this.clearSamplePoints(),this.hideElevationMarker(),this.elevationProfile&&(this.elevationProfile.remove(),this.elevationProfile=null),super.onRemove(n)}async updateElevationProfile(){await this.fetchElevationData(),this.updateProperties(),this._map&&this.showSamplePoints(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}updateProperties(){if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const n=this.elevationData.map(f=>f.elevation),i=Math.max(...n),o=Math.min(...n);let a=0,l=0;for(let f=1;f<this.elevationData.length;f++){const p=this.elevationData[f].elevation-this.elevationData[f-1].elevation;p>0?a+=p:l+=Math.abs(p)}this.properties={...this.properties,type:"ElevationLine",elevationData:this.elevationData,maxElevation:i,minElevation:o,elevationGain:a,elevationLoss:l}}}getElevationData(){return this.elevationData}showElevationAt(n){if(!this.elevationData.length)return;const i=this.elevationData.reduce((a,l)=>Math.abs(l.distance-n)<Math.abs(a.distance-n)?l:a),o=this.getPointAtDistance(n);!this.elevationMarker&&o?(this.elevationMarker=Zt.circleMarker(o,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1}),this.elevationMarker.addTo(this._map)):this.elevationMarker&&o&&this.elevationMarker.setLatLng(o),this.fire("elevation:show",{distance:n,elevation:i.elevation,latLng:o})}hideElevationMarker(){this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)}getPointAtDistance(n){try{const o=this.getLatLngs().map(f=>[f.lng,f.lat]),a=lu(o),l=xd(a,n,{units:"meters"});return Zt.latLng(l.geometry.coordinates[1],l.geometry.coordinates[0])}catch(i){return console.error("Error calculating point at distance",i),null}}moveVertex(n,i,o=!1){super.moveVertex(n,i,!1),this.properties.type="ElevationLine",o&&this.updateElevationProfile()}addVertex(n,i,o=!1){console.warn("[ElevationLine] Tentative d'ajout de vertex ignorée - non autorisé pour un profil altimétrique")}setLatLngs(n){return super.setLatLngs(n),this.properties.type="ElevationLine",this.updateElevationProfile(),this}move(n,i=!0){return super.move(n,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile(),this}setSamplePointStyle(n){this.samplePointStyle={...this.samplePointStyle,...n},this.properties.samplePointStyle=this.samplePointStyle,this._map&&this.showSamplePoints()}setMinMaxPointStyle(n){this.minMaxPointStyle={...this.minMaxPointStyle,...n},this.properties.minMaxPointStyle=this.minMaxPointStyle,this._map&&this.showSamplePoints()}};De(ys,"API_URL","https://api.open-elevation.com/api/v1/lookup"),De(ys,"RETRY_DELAY",2e3),De(ys,"MAX_RETRIES",3),De(ys,"SAMPLE_DISTANCE",100),De(ys,"MIN_SAMPLES",10),De(ys,"MAX_SAMPLES",50);let Sl=ys;const Nh=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return`rgba(${n}, ${i}, ${o}, ${e})`},Q0=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=Nh(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${Nh(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},ms=t=>{document.querySelectorAll(".drawing-help-message").forEach(i=>i.remove());const n=Zt.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function tg(t,e,n){const i=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/i}const cn=(t,e="m",n="")=>{let i,o;return e==="m²"?t>=1e4?(i=(t/1e4).toFixed(2),o="ha"):(i=t.toFixed(2),o="m²"):e==="m"?t>=1e3?(i=(t/1e3).toFixed(2),o="km"):(i=t.toFixed(2),o="m"):(i=t.toFixed(2),o=e),n?`${n}: ${i} ${o}`:`${i} ${o}`},nL=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),iL=(t,e)=>{let n;return function(...i){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,i),e)}},wu=(t,e)=>{let n=0;return function(...i){const o=Date.now();if(!(o-n<e))return n=o,t.apply(this,i)}};function rL(){const t=Fe(null),e=Fe(null),n=Fe(null),i=Fe(null),o=Fe(""),a=Fe(null),l=Fe(!1);window.addEventListener("clearControlPoints",()=>{a.value=null,n.value&&n.value.clearLayers(),i.value&&i.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(A=>A.remove()),document.querySelectorAll(".drawing-help-message").forEach(A=>A.remove())}),Wh(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const f=(A,H="Double-cliquez pour éditer")=>{const V={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},z=(ct,Et)=>{var yt;const Nt=((yt=t.value)==null?void 0:yt.getZoom())||14,G=A.lat,tt=tg(Et.physicalSize,G,Nt);return`<div class="text-container" style="width:${tt}px;height:${tt}px;transform:rotate(${Et.rotation}deg)">
        <div class="text-annotation" style="font-size:${tt*.2}px;color:${Et.color};background-color:${Nh(Et.backgroundColor,Et.backgroundOpacity)};border:${Et.hasBorder?Et.borderWidth+" solid "+Nh(Et.borderColor,Et.borderOpacity):"none"};padding:${Et.padding};border-radius:${Et.borderRadius}">${ct}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},mt=()=>{if(!t.value)return;const ct=ht.getIcon(),Et={html:z(ht.properties.text,ht.properties.style),className:ct.options.className};ht.setIcon(Zt.divIcon(Et))},ft=Zt.divIcon({html:z(H,V),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),ht=Zt.marker(A,{icon:ft,draggable:!1,pmIgnore:!0});ht.properties={type:"text",text:H,style:{...V}},t.value&&(t.value.on("zoomend",mt),ht.on("remove",()=>{var ct;(ct=t.value)==null||ct.off("zoomend",mt)})),mt();let I=!1,it=!1,rt=0,$=0;const D=ct=>{if(!t.value)return;const Et=ct.target;if(Et.classList.contains("rotate")){I=!0;const Nt=ht.getLatLng(),G=t.value.mouseEventToLatLng(ct);rt=Math.atan2(G.lat-Nt.lat,G.lng-Nt.lng)*180/Math.PI,$=ht.properties.style.rotation||0}else Et.classList.contains("move")&&(it=!0);document.addEventListener("mousemove",q),document.addEventListener("mouseup",dt)},q=ct=>{if(!(!it||!t.value)){if(I){const Et=ht.getLatLng(),Nt=t.value.mouseEventToLatLng(ct),G=Math.atan2(Nt.lat-Et.lat,Nt.lng-Et.lng)*180/Math.PI,tt=($+(G-rt))%360;ht.properties.style.rotation=tt;const yt=ht.getIcon(),vt={html:z(ht.properties.text,ht.properties.style),className:yt.options.className};ht.setIcon(Zt.divIcon(vt))}else if(it){const Et=nL(ct),Nt=t.value.mouseEventToLatLng(Et);ht.setLatLng(Nt)}}},dt=()=>{I=!1,it=!1,document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",dt)};return ht.on("add",()=>{const ct=ht.getElement();ct&&ct.querySelectorAll(".control-button").forEach(Nt=>{Nt.addEventListener("mousedown",D)})}),ht.on("remove",()=>{const ct=ht.getElement();ct&&ct.querySelectorAll(".control-button").forEach(Nt=>{Nt.removeEventListener("mousedown",D)})}),ht.on("dblclick",ct=>{var vt;Zt.DomEvent.stopPropagation(ct);const Et=(vt=ht.getElement())==null?void 0:vt.querySelector(".text-annotation");if(!Et)return;Et.contentEditable="true",Et.focus(),Et.classList.add("editing");const Nt=window.getSelection(),G=document.createRange();G.selectNodeContents(Et),Nt==null||Nt.removeAllRanges(),Nt==null||Nt.addRange(G);const tt=()=>{Et.contentEditable="false",Et.classList.remove("editing");const J=Et.innerText.trim();if(J){ht.properties.text=J;const qt=ht.getIcon(),te={html:z(J,ht.properties.style),className:qt.options.className};ht.setIcon(Zt.divIcon(te))}Et.removeEventListener("blur",tt),Et.removeEventListener("keydown",yt)},yt=J=>{J.key==="Enter"&&!J.shiftKey&&(J.preventDefault(),tt())};Et.addEventListener("blur",tt),Et.addEventListener("keydown",yt)}),ht},p=(A,H)=>{const V=Zt.DomUtil.create("div","measure-tooltip");if(V.innerHTML=H,V.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(V),t.value){const z=t.value.latLngToContainerPoint(A);V.style.left=`${z.x+10}px`,V.style.top=`${z.y-25}px`}return V},v=wu((A,H,V)=>{if(A&&(A.innerHTML=V,t.value)){const z=t.value.latLngToContainerPoint(H);A.style.left=`${z.x+10}px`,A.style.top=`${z.y-25}px`}},100),b=(A,H,V)=>{A.on("mouseover",()=>{const z=p(A.getLatLng(),V());A.measureDiv=z}),A.on("mousemove",z=>{A.measureDiv&&t.value&&v(A.measureDiv,z.latlng,V())}),A.on("mouseout",()=>{A.measureDiv&&(A.measureDiv.remove(),A.measureDiv=void 0)})};let w=[];const S=()=>{w.forEach(A=>{A&&A.remove&&("measureDiv"in A&&A.measureDiv&&(A.measureDiv.remove(),A.measureDiv=void 0),n.value&&n.value.removeLayer(A),A.remove())}),w=[],document.querySelectorAll(".measure-tooltip").forEach(A=>{A.remove()})},x=(A,H="#2563EB")=>{const V=Zt.circleMarker(A,{radius:6,color:H,fillColor:H,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(V),V},j=(A,H)=>{var z,mt,ft,ht,I,it;console.log("Input layer:",{type:H,instanceof:{Circle:A instanceof Zt.Circle,Rectangle:A instanceof Zt.Rectangle,Polygon:A instanceof Zt.Polygon,Polyline:A instanceof Zt.Polyline,CircleArc:A instanceof Qa,TextRectangle:A instanceof So,ElevationLine:A instanceof Sl,Line:A instanceof Gi},options:A.options});const V={type:H,style:A.options||{}};try{if(A instanceof So)return A.properties;if(A instanceof Zt.Circle){const rt=A.getRadius(),$=A.getLatLng();V.radius=rt,V.diameter=rt*2,V.area=Math.PI*Math.pow(rt,2),V.perimeter=2*Math.PI*rt,V.center=$,V.surfaceInterieure=V.area,V.surfaceExterieure=V.area}else if(A instanceof Qa){const rt=A.getRadius(),$=A.getCenter(),D=A.getStartAngle(),q=A.getStopAngle(),dt=A.getOpeningAngle();V.radius=rt,V.diameter=rt*2,V.area=Math.PI*Math.pow(rt,2)*dt/360,V.arcLength=2*Math.PI*rt*dt/360,V.perimeter=V.arcLength+2*rt,V.center=$,V.startAngle=D,V.stopAngle=q,V.openingAngle=dt,V.surfaceInterieure=V.area,V.surfaceExterieure=V.area}else if(A instanceof Zt.Rectangle){const rt=A.getBounds(),$=rt.getNorthEast(),D=rt.getSouthWest(),q=tu([D.lng,D.lat],[$.lng,D.lat],{units:"meters"}),dt=tu([D.lng,D.lat],[D.lng,$.lat],{units:"meters"});V.width=q,V.height=dt,V.area=q*dt,V.perimeter=2*(q+dt),V.surfaceInterieure=V.area,V.surfaceExterieure=V.area,V.dimensions={width:q,height:dt}}else if(A instanceof Zt.Polygon){const $=A.getLatLngs()[0].map(q=>[q.lng,q.lat]);$.push($[0]);const D=kl([$]);V.area=Su(D),V.perimeter=Bc(lu([...$]),{units:"meters"}),V.surfaceInterieure=V.area,V.surfaceExterieure=V.area}else if(A instanceof Zt.Polyline&&!(A instanceof Zt.Polygon))if(A instanceof Sl)A.updateProperties(),Object.assign(V,{...A.properties,type:"ElevationLine"}),console.log("[calculateShapeProperties] ElevationLine properties:",V);else if(A instanceof Gi)A.updateProperties(),Object.assign(V,{...A.properties,type:"Line"});else{const $=A.getLatLngs().map(dt=>[dt.lng,dt.lat]),D=lu($);V.length=Bc(D,{units:"meters"});const q=10;V.surfaceInfluence=V.length*q,V.dimensions={width:q},V.type="Line"}V.style={...V.style,color:((z=A.options)==null?void 0:z.color)||"#3388ff",weight:((mt=A.options)==null?void 0:mt.weight)||3,opacity:((ft=A.options)==null?void 0:ft.opacity)||1,fillColor:((ht=A.options)==null?void 0:ht.fillColor)||"#3388ff",fillOpacity:((I=A.options)==null?void 0:I.fillOpacity)||.2,dashArray:((it=A.options)==null?void 0:it.dashArray)||""}}catch(rt){console.error("Error calculating shape properties:",rt)}return V},R=(A,H=2)=>{var ht;if(!t.value){console.warn("Map is not available for text size update");return}const V=t.value.getZoom(),z=A.getLatLng().lat,mt=tg(H,z,V),ft=(ht=A.getElement())==null?void 0:ht.querySelector(".text-annotation");ft&&(A.properties.style.fontSize=`${mt}px`,A.properties.physicalWidth=H,A.properties.physicalHeight=H,Q0(ft,A.properties.style))},U=(A,H,V)=>{const z=Zt.map(A).setView(H,V);t.value=z,Zt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(z);const mt=new Zt.FeatureGroup;return mt.addTo(z),e.value=mt,n.value=Zt.featureGroup().addTo(z),i.value=Zt.featureGroup().addTo(z),z.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:mt,snapLayers:[mt,i.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),z.on("pm:drawstart",ft=>{l.value=!0,ft.shape==="Circle"&&o.value==="Semicircle"&&(z.getContainer().style.cursor="crosshair")}),z.on("pm:drawend",()=>{l.value=!1,z.getContainer().style.cursor="",a.value&&ms("Cliquez sur la forme pour afficher les points de contrôle")}),z.on("pm:create",async ft=>{var it,rt,$,D,q,dt,ct,Et,Nt,G,tt;const ht=ft.layer;(it=e.value)==null||it.addLayer(ht);let I="unknown";if(ht instanceof Zt.Circle?I=o.value==="Semicircle"?"Semicircle":"Circle":ht instanceof Zt.Rectangle?I="Rectangle":ht instanceof Zt.Polygon?I="Polygon":ht instanceof Zt.Polyline&&!(ht instanceof Zt.Polygon)&&(I="Line"),ht.properties=j(ht,I),a.value=ht,window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:ht,type:I,properties:ht.properties}})),ht.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:I,isSelected:a.value===ht}),(!a.value||a.value!==ht)&&St(ht)}),ht.on("mouseout",()=>{var yt;console.log("[mouseout] Sortie de la forme",{type:I,isSelected:a.value===ht}),(!a.value||a.value!==ht)&&((yt=i.value)==null||yt.clearLayers())}),I==="Semicircle"){const yt=ht.getLatLng(),vt=ht.getRadius();(rt=e.value)==null||rt.removeLayer(ht);const J=new Qa(yt,vt);J.properties=j(J,"Semicircle"),($=e.value)==null||$.addLayer(J),a.value=J,W(J)}else if(I==="Circle"){(D=e.value)==null||D.removeLayer(ht);const yt=new rc(ht.getLatLng(),{...ht.options,radius:ht.getRadius()});yt.updateProperties(),(q=e.value)==null||q.addLayer(yt),a.value=yt,gt(yt)}else if(I==="Rectangle"){(dt=e.value)==null||dt.removeLayer(ht);const yt=new ba(ht.getBounds(),{...ht.options});yt.updateProperties(),(ct=e.value)==null||ct.addLayer(yt),a.value=yt,_t(yt)}else if(ht instanceof Zt.Polygon){const yt=ht.getLatLngs()[0],vt=new Bu([yt],{...ht.options});vt.updateProperties(),(Et=e.value)==null||Et.removeLayer(ht),(Nt=e.value)==null||Nt.addLayer(vt),a.value=vt,X(vt)}else if(ht instanceof Gi)zt(ht);else if(ht instanceof Zt.Polyline&&!(ht instanceof Zt.Polygon)){const yt=ht.getLatLngs(),vt=new Gi(yt,{...ht.options});vt.updateProperties(),(G=e.value)==null||G.removeLayer(ht),(tt=e.value)==null||tt.addLayer(vt),a.value=vt,zt(vt)}ms("Cliquez sur la forme pour afficher les points de contrôle")}),mt.on("click",ft=>{var I,it,rt,$,D,q,dt,ct,Et;Zt.DomEvent.stopPropagation(ft);const ht=ft.layer;if(console.log("[featureGroup click] Sélection de forme",{type:(I=ht.properties)==null?void 0:I.type,previouslySelected:a.value===ht}),(it=i.value)==null||it.clearLayers(),S(),(rt=document.querySelector(".drawing-help-message"))==null||rt.remove(),a.value=ht,ht instanceof So){console.log("[featureGroup click] TextRectangle sélectionné",{id:ht._leaflet_id,bounds:ht.getBounds(),hasTextContainer:!!ht.getTextElement(),properties:ht.properties}),($=t.value)!=null&&$.pm.globalEditModeEnabled()&&t.value.pm.disableGlobalEditMode(),Mt(ht),ms("Double-cliquez pour éditer le texte. Utilisez les points rouges pour redimensionner.");return}if(ht instanceof Qa||((D=ht.properties)==null?void 0:D.type)==="Semicircle")W(ht);else if(ht instanceof rc)gt(ht);else if(ht instanceof Zt.Circle){const Nt=new rc(ht.getLatLng(),{...ht.options,radius:ht.getRadius()});Nt.updateProperties(),(q=e.value)==null||q.removeLayer(ht),(dt=e.value)==null||dt.addLayer(Nt),a.value=Nt,gt(Nt)}else if(ht instanceof ba)_t(ht);else if(ht instanceof Zt.Rectangle){const Nt=new ba(ht.getBounds(),{...ht.options});Nt.updateProperties(),(ct=e.value)==null||ct.removeLayer(ht),(Et=e.value)==null||Et.addLayer(Nt),a.value=Nt,_t(Nt)}else ht instanceof Zt.Polygon?X(ht):(ht instanceof Gi||ht instanceof Zt.Polyline&&!(ht instanceof Zt.Polygon))&&zt(ht)}),z.on("pm:edit",ft=>{var I,it,rt;console.log("[pm:edit] Début",{layer:ft.layer,currentProperties:ft.layer.properties});const ht=ft.layer;if(ht){const $=((I=ht.properties)==null?void 0:I.type)||"unknown";if(Dt(ht,$),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:ht.properties,selectedShape:a.value}),$==="Semicircle")W(ht);else if(ht instanceof rc)gt(ht);else if(ht instanceof ba)_t(ht);else if(ht instanceof Zt.Rectangle){const D=new ba(ht.getBounds(),{...ht.options});D.updateProperties(),(it=e.value)==null||it.removeLayer(ht),(rt=e.value)==null||rt.addLayer(D),a.value=D,_t(D)}else ht instanceof Zt.Polygon?X(ht):ht instanceof Gi?(ht.updateProperties(),Dt(ht,"Line"),zt(ht)):ht instanceof Zt.Polyline&&zt(ht)}}),z.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(ft=>ft.remove()),ms("Déplacez la forme à l'endroit souhaité")}),z.on("pm:dragend",ft=>{var I,it,rt;console.log("[pm:dragend] Début",{layer:ft.layer,currentProperties:ft.layer.properties});const ht=ft.layer;if(ht){const $=((I=ht.properties)==null?void 0:I.type)||"unknown";if(ht instanceof Zt.Rectangle&&!(ht instanceof ba)){const D=new ba(ht.getBounds(),{...ht.options});D.updateProperties(),(it=e.value)==null||it.removeLayer(ht),(rt=e.value)==null||rt.addLayer(D),a.value=D,_t(D)}else ht instanceof Gi?(ht.updateProperties(),Dt(ht,"Line"),zt(ht)):Dt(ht,$);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:ht.properties,selectedShape:a.value})}setTimeout(()=>{ms("Cliquez sur la forme pour afficher les points de contrôle")},100)}),z.on("pm:remove",()=>{var ft;(ft=document.querySelector(".drawing-help-message"))==null||ft.remove()}),z.on("pm:select",ft=>{var I;const ht=ft.layer;document.querySelectorAll(".drawing-help-message").forEach(it=>it.remove()),ht instanceof Qa||((I=ht.properties)==null?void 0:I.type)==="Semicircle"?ms(`Points de contrôle : <span style="color: #059669">●</span> Ajuster le rayon, <span style="color: #2563EB">●</span> et <span style="color: #DC2626">●</span> Modifier l'ouverture du demi-cercle`):ms("Utilisez les points de contrôle pour modifier la forme")}),z.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(ft=>ft.remove())}),z.on("zoomstart",()=>{a.value&&(S(),a.value=null,document.querySelectorAll(".drawing-help-message").forEach(ft=>ft.remove()))}),z},N=()=>{if(!t.value||!e.value)return;const A=e.value.getBounds();A.isValid()&&t.value.fitBounds(A,{padding:[50,50],maxZoom:19})},Z=A=>{var H;if(t.value){document.querySelectorAll(".drawing-help-message").forEach(V=>V.remove());try{const V=t.value.pm;V.globalEditModeEnabled()&&V.disableGlobalEditMode(),V.globalRemovalModeEnabled()&&V.disableGlobalRemovalMode(),V.disableDraw(),S(),(H=i.value)==null||H.clearLayers()}catch(V){console.error("Error disabling modes:",V)}if(o.value=A,!A){S();return}setTimeout(()=>{var V,z,mt,ft,ht,I,it,rt,$,D,q,dt,ct;try{switch(A){case"Circle":case"Semicircle":const Et=(V=e.value)==null?void 0:V.getLayers().filter(Nt=>Nt instanceof ba||Nt instanceof So);Et&&Et.length>0&&Et.forEach(Nt=>{var qt;if(!Nt.getBounds)return;const G=Nt.getBounds();[G.getNorthWest(),G.getNorthEast(),G.getSouthEast(),G.getSouthWest()].forEach(te=>{var ee;const Vt=Zt.circleMarker(te,{radius:4,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.4,weight:2,className:"temp-corner-marker",pmIgnore:!0});(ee=i.value)==null||ee.addLayer(Vt)}),(Nt instanceof ba?Nt.getMidPoints():[Zt.latLng((G.getNorth()+G.getSouth())/2,G.getWest()),Zt.latLng(G.getNorth(),(G.getEast()+G.getWest())/2),Zt.latLng((G.getNorth()+G.getSouth())/2,G.getEast()),Zt.latLng(G.getSouth(),(G.getEast()+G.getWest())/2)]).forEach(te=>{var ee;const Vt=Zt.circleMarker(te,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.6,weight:2,className:"temp-midpoint-marker",pmIgnore:!0});(ee=i.value)==null||ee.addLayer(Vt)});const vt=G.getCenter(),J=Zt.circleMarker(vt,{radius:4,color:"#059669",fillColor:"#059669",fillOpacity:.4,weight:2,className:"temp-center-marker",pmIgnore:!0});(qt=i.value)==null||qt.addLayer(J)}),t.value.pm.setGlobalOptions({snapDistance:20,snapSegment:!0,snapLayers:[e.value,i.value]}),ms(A==="Circle"?"Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre":"Positionnez le centre du demi-cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":ms("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(z=t.value)==null||z.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ms("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(mt=t.value)==null||mt.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ms("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(ft=t.value)==null||ft.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(ms("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const Nt=G=>{if(!t.value||!e.value)return;const tt=f(G.latlng);e.value.addLayer(tt),a.value=tt,t.value.off("click",Nt),Z("")};t.value.on("click",Nt)}break;case"delete":ms("Cliquez sur une forme pour la supprimer"),(ht=t.value)==null||ht.pm.enableGlobalRemovalMode();break;case"TextRectangle":ms("Cliquez et maintenez pour dessiner un rectangle avec texte, relâchez pour terminer"),(I=t.value)!=null&&I.pm.globalEditModeEnabled()&&t.value.pm.disableGlobalEditMode(),(it=t.value)==null||it.pm.enableDraw("Rectangle",{finishOn:"mouseup",continueDrawing:!1,templineStyle:{color:"#3B82F6",weight:2,dashArray:"5,5"}}),(rt=t.value)==null||rt.off("pm:create"),($=t.value)==null||$.on("pm:create",Nt=>{var G,tt,yt;if(Nt.shape==="Rectangle"&&Nt.layer){const vt=Nt.layer.getBounds();let J=!1;if(e.value&&e.value.eachLayer(qt=>{if(qt instanceof So){const te=qt.getBounds(),Vt=1e-8;Math.abs(te.getNorth()-vt.getNorth())<Vt&&Math.abs(te.getSouth()-vt.getSouth())<Vt&&Math.abs(te.getEast()-vt.getEast())<Vt&&Math.abs(te.getWest()-vt.getWest())<Vt&&(J=!0,a.value=qt,console.log("[TextRectangle] Rectangle existant trouvé, sélection au lieu de création"))}}),!J){(G=t.value)==null||G.removeLayer(Nt.layer),(tt=e.value)!=null&&tt.hasLayer(Nt.layer)&&e.value.removeLayer(Nt.layer);const qt=new So(vt,"Double-cliquez pour éditer",{color:"#3B82F6",weight:2,fillColor:"#F9FAFB",fillOpacity:.8,textColor:"#000000",fontFamily:"Arial, sans-serif",textAlign:"center",bold:!1,italic:!1});e.value&&(e.value.addLayer(qt),a.value=qt,qt.updateProperties(),Mt(qt),console.log("[TextRectangle] Nouveau rectangle créé avec succès",{bounds:qt.getBounds(),properties:qt.properties,style:qt.properties.style}))}(yt=t.value)==null||yt.pm.disableDraw()}});break;case"ElevationLine":ms("Cliquez et maintenez pour tracer le profil altimétrique"),(D=t.value)==null||D.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(q=t.value)==null||q.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup"}),(dt=t.value)==null||dt.off("pm:create"),(ct=t.value)==null||ct.on("pm:create",async Nt=>{var G,tt,yt;if(Nt.shape==="Line"&&Nt.layer){const vt=Nt.layer.getLatLngs();(G=t.value)==null||G.removeLayer(Nt.layer),(tt=e.value)!=null&&tt.hasLayer(Nt.layer)&&e.value.removeLayer(Nt.layer);const J=new Sl(vt,{color:"#FF4500",weight:4,opacity:.8});e.value&&(e.value.addLayer(J),a.value=J,await J.updateElevationProfile(),zt(J)),(yt=t.value)==null||yt.pm.disableDraw(),o.value=""}});break}}catch(Et){console.error("Error enabling tool:",Et)}},100)}},Y=A=>{var V;if(!a.value)return;const H=a.value;if(H.properties=H.properties||{},H.properties.style=H.properties.style||{},H.properties.style={...H.properties.style,...A},H.properties.type==="text"){const z=H.properties._textLayer,mt=(V=z==null?void 0:z.getElement())==null?void 0:V.querySelector(".text-annotation");mt&&Q0(mt,H.properties.style);const ft={color:A.borderColor||H.properties.style.borderColor,weight:parseInt(A.borderWidth||H.properties.style.borderWidth),opacity:A.borderOpacity??H.properties.style.borderOpacity};"setStyle"in H&&H.setStyle(ft)}else if(H.properties.type==="TextRectangle"){if(H instanceof So){const z={};A.textColor!==void 0&&(z.textColor=A.textColor),A.fontSize!==void 0&&(z.fontSize=A.fontSize),A.fontFamily!==void 0&&(z.fontFamily=A.fontFamily),A.backgroundColor!==void 0&&(z.backgroundColor=A.backgroundColor),A.backgroundOpacity!==void 0&&(z.backgroundOpacity=A.backgroundOpacity),A.textAlign!==void 0&&(z.textAlign=A.textAlign),A.bold!==void 0&&(z.bold=A.bold),A.italic!==void 0&&(z.italic=A.italic),A.fillColor&&(z.fillColor=A.fillColor),A.fillOpacity!==void 0&&(z.fillOpacity=A.fillOpacity),A.strokeColor&&(z.color=A.strokeColor),A.color&&(z.color=A.color),A.strokeOpacity!==void 0&&(z.opacity=A.strokeOpacity),A.strokeWidth!==void 0&&(z.weight=A.strokeWidth),A.weight!==void 0&&(z.weight=A.weight),A.dashArray&&(z.dashArray=A.dashArray),H.setTextStyle(z)}}else{const z={};A.fillColor&&(z.fillColor=A.fillColor),A.fillOpacity!==void 0&&(z.fillOpacity=A.fillOpacity),A.strokeColor&&(z.color=A.strokeColor),A.strokeOpacity!==void 0&&(z.opacity=A.strokeOpacity),A.strokeWidth!==void 0&&(z.weight=A.strokeWidth),A.dashArray&&(z.dashArray=A.dashArray),"setStyle"in H&&H.setStyle(z)}},kt=A=>{if(!a.value)return;const H=a.value;H.properties={...H.properties,...A},A.radius&&H instanceof Zt.Circle&&H.setRadius(A.radius)},At=A=>{console.log("[forceShapeUpdate] Début",{currentProperties:A.properties,selectedShapeRef:a.value}),a.value=null,Ni(()=>{a.value=A,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:a.value,properties:a.value.properties})})},Dt=(A,H)=>{console.log("[updateLayerProperties] Début",{layer:A,shapeType:H,currentProperties:A.properties}),iL((z,mt)=>{const ft=j(z,mt);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:ft}),z.properties={...ft},At(z),z.fire("properties:updated",{shape:z,properties:z.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:z.properties,selectedShape:a.value})},100)(A,H)},xt=(A,H)=>Zt.latLng((A.lat+H.lat)/2,(A.lng+H.lng)/2),gt=A=>{if(!t.value||!e.value)return;S();const H=A.getLatLng(),V=A.getRadius(),z=x(H,"#059669");w.push(z),b(z,A,()=>[cn(V,"m","Rayon"),cn(V*2,"m","Diamètre"),cn(Math.PI*Math.pow(V,2),"m²","Surface")].join("<br>"));const mt=[],ft=[0,45,90,135,180,225,270,315];ft.forEach(ht=>{const I=A.calculatePointOnCircle(ht),it=x(I,"#2563EB");mt.push(it),w.push(it),b(it,A,()=>cn(V,"m","Rayon")),it.on("mousedown",rt=>{if(!t.value)return;Zt.DomEvent.stopPropagation(rt),t.value.dragging.disable();let $=!0;const D=dt=>{$&&(A.resizeFromControlPoint(dt.latlng),mt.forEach((ct,Et)=>{const Nt=A.calculatePointOnCircle(ft[Et]);ct.setLatLng(Nt)}),z.setLatLng(A.getLatLng()),it.measureDiv&&(it.measureDiv.innerHTML=cn(A.getRadius(),"m","Rayon")))},q=()=>{$=!1,t.value&&(t.value.off("mousemove",D),document.removeEventListener("mouseup",q),t.value.dragging.enable(),A.updateProperties(),a.value=null,Ni(()=>{a.value=A}),Dt(A,"Circle"))};t.value.on("mousemove",D),document.addEventListener("mouseup",q)})}),z.on("mousedown",ht=>{if(!t.value)return;Zt.DomEvent.stopPropagation(ht),t.value.dragging.disable();let I=!0;const it=A.getLatLng(),rt=ht.latlng,$=q=>{if(!I)return;const dt=q.latlng.lng-rt.lng,ct=q.latlng.lat-rt.lat,Et=Zt.latLng(it.lat+ct,it.lng+dt);Zt.Circle.prototype.setLatLng.call(A,Et),z.setLatLng(Et),mt.forEach((Nt,G)=>{const tt=A.calculatePointOnCircle(ft[G]);Nt.setLatLng(tt)}),z.measureDiv&&(z.measureDiv.innerHTML=[cn(A.getRadius(),"m","Rayon"),cn(A.getRadius()*2,"m","Diamètre"),cn(Math.PI*Math.pow(A.getRadius(),2),"m²","Surface")].join("<br>"))},D=()=>{I=!1,t.value&&(t.value.off("mousemove",$),document.removeEventListener("mouseup",D),t.value.dragging.enable(),A.updateProperties(),a.value=null,Ni(()=>{a.value=A}),Dt(A,"Circle"))};t.value.on("mousemove",$),document.addEventListener("mouseup",D)}),A.on("circle:resized",()=>{Dt(A,"Circle")}),a.value=A},_t=A=>{if(!t.value||!e.value)return;if(!(A instanceof ba)){console.warn("La couche n'est pas une instance de Rectangle");return}const H=A;S();const V=H.getBounds(),z=V.getCenter(),mt=[V.getNorthWest(),V.getNorthEast(),V.getSouthEast(),V.getSouthWest()],ft=x(z,"#059669");w.push(ft),b(ft,H,()=>{const{width:rt,height:$}=H.getDimensions(),D=rt*$;return[cn(rt,"m","Largeur"),cn($,"m","Hauteur"),cn(D,"m²","Surface")].join("<br>")});const ht=[];mt.forEach((rt,$)=>{const D=x(rt,"#DC2626");ht.push(D),w.push(D),b(D,H,()=>{const{width:q,height:dt}=H.getDimensions();return[cn(q,"m","Largeur"),cn(dt,"m","Hauteur")].join("<br>")}),D.on("mousedown",q=>{if(!t.value)return;Zt.DomEvent.stopPropagation(q),t.value.dragging.disable();const dt=Et=>{H.resizeFromCorner($,Et.latlng);const Nt=H.getBounds(),G=[Nt.getNorthWest(),Nt.getNorthEast(),Nt.getSouthEast(),Nt.getSouthWest()];D.setLatLng(Et.latlng),ft.setLatLng(Nt.getCenter()),ht.forEach((yt,vt)=>{vt!==$&&yt.setLatLng(G[vt])});const tt=H.getMidPoints();I.forEach((yt,vt)=>{yt.setLatLng(tt[vt]);const{width:J,height:qt}=H.getDimensions(),te=vt%2===0?J:qt;yt.measureDiv&&(yt.measureDiv.innerHTML=[cn(te,"m","Longueur du côté"),cn(te/2,"m","Distance au coin")].join("<br>"))})},ct=()=>{t.value&&(t.value.off("mousemove",dt),document.removeEventListener("mouseup",ct),t.value.dragging.enable(),H.updateProperties(),a.value=null,Ni(()=>{a.value=H}))};t.value.on("mousemove",dt),document.addEventListener("mouseup",ct)})});const I=[];H.getMidPoints().forEach((rt,$)=>{const D=x(rt,"#2563EB");I.push(D),w.push(D),b(D,H,()=>{const{width:q,height:dt}=H.getDimensions(),ct=$%2===0?q:dt;return[cn(ct,"m","Longueur du côté"),cn(ct/2,"m","Distance au coin")].join("<br>")}),D.on("mousedown",q=>{Zt.DomEvent.stopPropagation(q),t.value.dragging.disable();const dt=Et=>{const Nt=t.value.mouseEventToLatLng(Et.originalEvent),G=H.getBounds(),tt=G.getNorthWest(),yt=G.getSouthEast();let vt;if($%2===0){const Vt=(tt.lng+yt.lng)/2;vt=Zt.latLng(Nt.lat,Vt)}else{const Vt=(tt.lat+yt.lat)/2;vt=Zt.latLng(Vt,Nt.lng)}H.resizeFromSide($,vt);const J=H.getBounds(),qt=[J.getNorthWest(),J.getNorthEast(),J.getSouthEast(),J.getSouthWest()];ft.setLatLng(J.getCenter()),ht.forEach((Vt,ee)=>{Vt.setLatLng(qt[ee])});const te=H.getMidPoints();I.forEach((Vt,ee)=>{Vt.setLatLng(te[ee]);const{width:Rt,height:Ot}=H.getDimensions(),ie=ee%2===0?Rt:Ot;Vt.measureDiv&&(Vt.measureDiv.innerHTML=[cn(ie,"m","Longueur du côté"),cn(ie/2,"m","Distance au coin")].join("<br>"))})},ct=()=>{t.value.dragging.enable(),t.value.off("mousemove",dt),document.removeEventListener("mouseup",ct),H.updateProperties(),a.value=null,Ni(()=>{a.value=H})};t.value.on("mousemove",dt),document.addEventListener("mouseup",ct)})}),ft.on("mousedown",rt=>{if(!t.value)return;Zt.DomEvent.stopPropagation(rt),t.value.dragging.disable();let $=!0;const D=dt=>{if(!$)return;H.moveFromCenter(dt.latlng),ft.setLatLng(dt.latlng);const ct=H.getBounds(),Et=[ct.getNorthWest(),ct.getNorthEast(),ct.getSouthEast(),ct.getSouthWest()];ht.forEach((G,tt)=>{G.setLatLng(Et[tt])});const Nt=H.getMidPoints();if(I.forEach((G,tt)=>{G.setLatLng(Nt[tt])}),ft.measureDiv){const{width:G,height:tt}=H.getDimensions(),yt=G*tt;ft.measureDiv.innerHTML=[cn(G,"m","Largeur"),cn(tt,"m","Hauteur"),cn(yt,"m²","Surface")].join("<br>")}},q=()=>{$=!1,t.value&&(t.value.off("mousemove",D),document.removeEventListener("mouseup",q),t.value.dragging.enable(),H.updateProperties(),a.value=null,Ni(()=>{a.value=H}))};t.value.on("mousemove",D),document.addEventListener("mouseup",q)})},zt=A=>{if(!t.value||!e.value)return;S();const H=A.getLatLngs();let V=null;if(A instanceof Gi){const ft=A.getCenter();V=x(ft,"#059669"),w.push(V),b(V,A,()=>{const ht=A.getLength()||0;return cn(ht,"m","Longueur totale")}),V.on("mousedown",ht=>{if(!t.value)return;Zt.DomEvent.stopPropagation(ht),t.value.dragging.disable();let I=!0;const it=ht.latlng,rt=[...A.getLatLngs()];w.forEach((q,dt)=>{dt>0&&q.setStyle({opacity:0,fillOpacity:0})});const $=q=>{if(!I)return;const dt=q.latlng.lng-it.lng,ct=q.latlng.lat-it.lat,Et=rt.map(Nt=>Zt.latLng(Nt.lat+ct,Nt.lng+dt));Zt.Polyline.prototype.setLatLngs.call(A,Et),V==null||V.setLatLng(q.latlng)},D=()=>{I=!1,t.value&&(t.value.off("mousemove",$),document.removeEventListener("mouseup",D),t.value.dragging.enable(),S(),zt(A),A instanceof Gi&&(A.updateProperties(),Dt(A,"Line")),a.value=A)};t.value.on("mousemove",$),document.addEventListener("mouseup",D)})}H.forEach((ft,ht)=>{const I=x(ft,"#DC2626");w.push(I),b(I,A,()=>{let it=0,rt=0;return A instanceof Gi?(it=A.getLength()||0,rt=A.getLengthToVertex(ht)):(it=H.reduce(($,D,q)=>q===0?0:$+D.distanceTo(H[q-1]),0),rt=H.slice(0,ht+1).reduce(($,D,q)=>q===0?0:$+D.distanceTo(H[q-1]),0)),[cn(rt,"m","Distance depuis le début"),cn(it,"m","Longueur totale")].join("<br>")}),I.on("mousedown",it=>{if(!t.value)return;Zt.DomEvent.stopPropagation(it),t.value.dragging.disable();let rt=!0;V&&(V.setStyle({opacity:0,fillOpacity:0}),V.measureDiv&&(V.measureDiv.style.display="none"));const $=[];ht>0&&$.push(ht-1),ht<H.length-1&&$.push(ht);const D=$.map(ct=>H.length+ct),q=ct=>{rt&&(A instanceof Gi?A.moveVertex(ht,ct.latlng,!1):(H[ht]=ct.latlng,A.setLatLngs(H)),I.setLatLng(ct.latlng),mt($,D))},dt=()=>{if(rt=!1,!!t.value){if(t.value.off("mousemove",q),document.removeEventListener("mouseup",dt),t.value.dragging.enable(),A instanceof Gi&&(A.updateProperties(),Dt(A,"Line")),V&&A instanceof Gi){const ct=A.getCenter();V.setLatLng(ct),V.setStyle({opacity:1,fillOpacity:1}),V.measureDiv&&(V.measureDiv.style.display="")}a.value=null,Ni(()=>{a.value=A})}};t.value.on("mousemove",q),document.addEventListener("mouseup",dt)})});const z=()=>{const ft=A.getLatLngs(),ht=A instanceof Gi?ft.length+1:ft.length;w.slice(ht).forEach(it=>{var rt;it&&typeof it.remove=="function"&&((rt=n.value)==null||rt.removeLayer(it))}),w=w.slice(0,ht),(A instanceof Gi?A.getMidPoints():Array.from({length:ft.length-1},(it,rt)=>{const $=ft[rt],D=ft[rt+1];return Zt.latLng(($.lat+D.lat)/2,($.lng+D.lng)/2)})).forEach((it,rt)=>{const $=x(it,"#2563EB");w.push($),b($,A,()=>{let D=0,q=0,dt=0;if(A instanceof Gi)D=A.getSegmentLengthAt(rt),q=A.getLength()||0,dt=A.getLengthToVertex(rt)+D/2;else{const ct=ft[rt],Et=ft[rt+1];D=ct.distanceTo(Et),q=ft.reduce((Nt,G,tt)=>tt===0?0:Nt+G.distanceTo(ft[tt-1]),0),dt=ft.slice(0,rt+1).reduce((Nt,G,tt)=>tt===0?0:Nt+G.distanceTo(ft[tt-1]),0)+D/2}return[cn(D,"m","Longueur du segment"),cn(D/2,"m","Demi-segment"),cn(dt,"m","Distance depuis le début"),cn(q,"m","Longueur totale")].join("<br>")}),$.on("mousedown",D=>{if(!t.value)return;Zt.DomEvent.stopPropagation(D),t.value.dragging.disable();let q=!0;const dt=rt,ct=A.getLatLngs(),Et=w.find(tt=>tt.options&&tt.options.color==="#059669");Et&&(Et.setStyle({opacity:0,fillOpacity:0}),Et.measureDiv&&(Et.measureDiv.style.display="none"));const Nt=tt=>{if(q){if(A instanceof Gi)A.addVertex(dt,tt.latlng,!1);else{const yt=ct.slice();yt.splice(dt+1,0,tt.latlng),A.setLatLngs(yt)}S(),zt(A),G()}},G=()=>{q=!1,t.value&&(t.value.off("mousemove",Nt),document.removeEventListener("mouseup",G),t.value.dragging.enable(),A instanceof Gi&&(A.updateProperties(),Dt(A,"Line")),a.value=null,Ni(()=>{a.value=A}))};t.value.on("mousemove",Nt),document.addEventListener("mouseup",G)})})},mt=(ft,ht)=>{const I=A.getLatLngs();ft.forEach((it,rt)=>{if(it<0||it>=I.length-1)return;const $=ht[rt];if($>=0&&$<w.length){let D;if(A instanceof Gi){const dt=A.getMidPointAt(it);if(!dt)return;D=dt}else{const dt=I[it],ct=I[it+1];D=Zt.latLng((dt.lat+ct.lat)/2,(dt.lng+ct.lng)/2)}const q=w[$];if(q&&q.setLatLng){q.setLatLng(D);const dt=q;if(dt.measureDiv){let ct=0,Et=0,Nt=0;if(A instanceof Gi)ct=A.getSegmentLengthAt(it),Et=A.getLength()||0,Nt=A.getLengthToVertex(it)+ct/2;else{const G=I[it],tt=I[it+1];ct=G.distanceTo(tt),Et=0,Nt=0;for(let yt=0;yt<I.length-1;yt++){const vt=I[yt].distanceTo(I[yt+1]);Et+=vt,yt<it?Nt+=vt:yt===it&&(Nt+=vt/2)}}dt.measureDiv.innerHTML=[cn(ct,"m","Longueur du segment"),cn(ct/2,"m","Demi-segment"),cn(Nt,"m","Distance depuis le début"),cn(Et,"m","Longueur totale")].join("<br>")}}}})};z(),A instanceof Sl&&(A.updateElevationProfile().then(()=>{console.log("[useMapDrawing] ElevationLine properties updated:",{length:A.properties.length,elevationData:A.getElevationData()})}),w.forEach((ft,ht)=>{const I=A.getElevationData();I[ht]&&(b(ft,A,()=>{const it=I[ht];return[cn(it.distance,"m","Distance"),cn(it.elevation,"m","Altitude"),cn(A.properties.elevationGain,"m","Dénivelé +"),cn(A.properties.elevationLoss,"m","Dénivelé -")].join("<br>")}),ft.on("mousedown",it=>{if(!t.value)return;Zt.DomEvent.stopPropagation(it),t.value.dragging.disable();const rt=D=>{A.moveVertex(ht,D.latlng,!1),ft.setLatLng(D.latlng)},$=()=>{t.value&&(t.value.off("mousemove",rt),document.removeEventListener("mouseup",$),t.value.dragging.enable(),A instanceof Sl&&(A.updateElevationProfile(),a.value=null,Ni(()=>{a.value=A})))};t.value.on("mousemove",rt),document.addEventListener("mouseup",$)}))}),A.on("elevation:updated",()=>{w.forEach((ft,ht)=>{const I=A.getElevationData();if(I[ht]&&ft.measureDiv){const it=I[ht];ft.measureDiv.innerHTML=[cn(it.distance,"m","Distance"),cn(it.elevation,"m","Altitude"),cn(A.properties.elevationGain,"m","Dénivelé +"),cn(A.properties.elevationLoss,"m","Dénivelé -")].join("<br>")}})}),t.value&&t.value.pm.setGlobalOptions({preventMarkerRemoval:!0,preventVertexEdit:!0}))},X=A=>{if(!t.value||!e.value)return;S();const H=A.getLatLngs()[0],V=H.map(rt=>[rt.lng,rt.lat]);V.push(V[0]);const z=kl([V]),mt=Su(z),ft=H.reduce((rt,$,D)=>{const q=H[(D+1)%H.length];return rt+$.distanceTo(q)},0);let ht;if(typeof A.getCenter=="function")try{ht=A.getCenter()}catch(rt){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",rt);const $=_c(z);ht=Zt.latLng($.geometry.coordinates[1],$.geometry.coordinates[0])}else{const rt=_c(z);ht=Zt.latLng(rt.geometry.coordinates[1],rt.geometry.coordinates[0])}const I=x(ht,"#059669");w.push(I),b(I,A,()=>[cn(ft,"m","Périmètre"),cn(mt,"m²","Surface")].join("<br>")),I.on("mousedown",rt=>{if(!t.value)return;Zt.DomEvent.stopPropagation(rt),t.value.dragging.disable();let $=!0;const D=rt.latlng,q=[...H];w.forEach((Nt,G)=>{G>0&&Nt.setStyle({opacity:0,fillOpacity:0})});const dt=wu(Nt=>{if(!$)return;const G=Nt.latlng.lng-D.lng,tt=Nt.latlng.lat-D.lat,yt=q.map(vt=>Zt.latLng(vt.lat+tt,vt.lng+G));Zt.Polygon.prototype.setLatLngs.call(A,[yt]),I.setLatLng(Nt.latlng)},16),ct=Nt=>{$&&dt(Nt)},Et=()=>{if($=!1,!!t.value){if(t.value.off("mousemove",ct),document.removeEventListener("mouseup",Et),t.value.dragging.enable(),A.properties){const Nt=A.getLatLngs()[0],G=Nt.map(yt=>[yt.lng,yt.lat]);G.push(G[0]);const tt=kl([G]);A.properties.area=Su(tt),A.properties.perimeter=Nt.reduce((yt,vt,J)=>{const qt=Nt[(J+1)%Nt.length];return yt+vt.distanceTo(qt)},0),A.properties.surfaceInterieure=A.properties.area,A.properties.surfaceExterieure=A.properties.area}S(),X(A),a.value=null,Ni(()=>{a.value=A})}};t.value.on("mousemove",ct),document.addEventListener("mouseup",Et)}),H.forEach((rt,$)=>{const D=x(rt,"#DC2626");w.push(D),b(D,A,()=>{const q=H[($-1+H.length)%H.length],dt=H[($+1)%H.length],ct=rt.distanceTo(q),Et=rt.distanceTo(dt);return[cn(ct,"m","Distance au point précédent"),cn(Et,"m","Distance au point suivant"),cn(ft,"m","Périmètre total"),cn(mt,"m²","Surface")].join("<br>")}),D.on("mousedown",q=>{if(Zt.DomEvent.stopPropagation(q),!t.value)return;t.value.dragging.disable();let dt=!0;I&&(I.setStyle({opacity:0,fillOpacity:0}),I.measureDiv&&(I.measureDiv.style.display="none"));const ct=wu(G=>{if(!dt)return;H[$]=G.latlng,Zt.Polygon.prototype.setLatLngs.call(A,[H]),D.setLatLng(G.latlng);const tt=w.slice(H.length+1),yt=($-1+H.length)%H.length,vt=tt[yt];if(vt){const qt=H[yt],te=H[$],Vt=Zt.latLng((qt.lat+te.lat)/2,(qt.lng+te.lng)/2);vt.setLatLng(Vt)}const J=tt[$];if(J){const qt=H[$],te=H[($+1)%H.length],Vt=Zt.latLng((qt.lat+te.lat)/2,(qt.lng+te.lng)/2);J.setLatLng(Vt)}},16),Et=G=>{dt&&ct(G)},Nt=()=>{if(dt=!1,!!t.value){if(t.value.off("mousemove",Et),document.removeEventListener("mouseup",Nt),t.value.dragging.enable(),A.properties){const G=A.getLatLngs()[0].map(yt=>[yt.lng,yt.lat]);G.push(G[0]);const tt=kl([G]);A.properties.area=Su(tt),A.properties.perimeter=H.reduce((yt,vt,J)=>{const qt=H[(J+1)%H.length];return yt+vt.distanceTo(qt)},0),A.properties.surfaceInterieure=A.properties.area,A.properties.surfaceExterieure=A.properties.area}S(),X(A),a.value=null,Ni(()=>{a.value=A})}};t.value.on("mousemove",Et),document.addEventListener("mouseup",Nt)})}),(()=>{const rt=A.getLatLngs()[0];w.slice(rt.length+1).forEach(D=>{n.value&&n.value.removeLayer(D)}),w=w.slice(0,rt.length+1);const $=new Array(rt.length);for(let D=0;D<rt.length;D++){const q=rt[D],dt=rt[(D+1)%rt.length];$[D]=xt(q,dt)}$.forEach((D,q)=>{const dt=x(D,"#2563EB");w.push(dt),b(dt,A,()=>{const ct=rt[q],Et=rt[(q+1)%rt.length],Nt=ct.distanceTo(Et);return[cn(Nt,"m","Longueur du segment"),cn(ft,"m","Périmètre total"),cn(mt,"m²","Surface")].join("<br>")}),dt.on("mousedown",ct=>{if(!t.value)return;Zt.DomEvent.stopPropagation(ct),t.value.dragging.disable();let Et=!0;const Nt=q;I&&(I.setStyle({opacity:0,fillOpacity:0}),I.measureDiv&&(I.measureDiv.style.display="none"));const G=[...A.getLatLngs()[0]];G.splice((Nt+1)%G.length,0,D),A.setLatLngs([G]),S(),X(A);const tt=Nt+1,yt=1+tt,vt=tt<w.length-1?w[yt]:null;if(vt){const J=te=>{if(!Et)return;const Vt=A.getLatLngs()[0];Vt[tt]=te.latlng,A.setLatLngs([Vt]),vt.setLatLng(te.latlng);const ee=w.slice(1+Vt.length),Rt=(tt-1+Vt.length)%Vt.length,Ot=tt;if(ee[Rt]){const ie=Vt[Rt],pe=Vt[tt],ke=Zt.latLng((ie.lat+pe.lat)/2,(ie.lng+pe.lng)/2);ee[Rt].setLatLng(ke)}if(ee[Ot]){const ie=Vt[tt],pe=Vt[(tt+1)%Vt.length],ke=Zt.latLng((ie.lat+pe.lat)/2,(ie.lng+pe.lng)/2);ee[Ot].setLatLng(ke)}},qt=()=>{if(Et=!1,!!t.value){if(t.value.off("mousemove",J),document.removeEventListener("mouseup",qt),t.value.dragging.enable(),A.properties){const te=A.getLatLngs()[0].map(ee=>[ee.lng,ee.lat]);te.push(te[0]);const Vt=kl([te]);A.properties.area=Su(Vt),A.properties.perimeter=A.getLatLngs()[0].reduce((ee,Rt,Ot,ie)=>{const pe=ie[(Ot+1)%ie.length];return ee+Rt.distanceTo(pe)},0)}S(),X(A),a.value=null,Ni(()=>{a.value=A})}};t.value.on("mousemove",J),document.addEventListener("mouseup",qt)}else t.value.dragging.enable(),S(),X(A)})})})()},W=A=>{if(!t.value||!e.value)return;S();const H=A.getCenter(),V=A.getStartAngle(),z=A.getStopAngle(),mt=A.getOpeningAngle(),ft=A.calculatePointOnArc(V),ht=A.calculatePointOnArc(z),I=x(ft,"#DC2626"),it=x(ht,"#DC2626");w.push(I,it);const rt=x(H,"#059669");w.push(rt);let $=null;if(mt>5){const D=A.calculateMidpointPosition();$=x(D,"#2563EB"),w.push($),$.on("mousedown",q=>{if(!t.value)return;Zt.DomEvent.stopPropagation(q),t.value.dragging.disable();let dt=!0;const ct=Nt=>{if(!dt)return;const G=H.distanceTo(Nt.latlng);A.setRadius(G);const tt=A.calculatePointOnArc(V),yt=A.calculatePointOnArc(z),vt=A.calculateMidpointPosition();I.setLatLng(tt),it.setLatLng(yt),$==null||$.setLatLng(vt),A.updateProperties(),a.value=A},Et=()=>{dt=!1,t.value&&(t.value.off("mousemove",ct),document.removeEventListener("mouseup",Et),t.value.dragging.enable(),A.updateProperties(),a.value=null,Ni(()=>{a.value=A}),Dt(A,"Semicircle"))};t.value.on("mousemove",ct),document.addEventListener("mouseup",Et)})}[I,it].forEach((D,q)=>{D.on("mousedown",dt=>{if(!t.value)return;Zt.DomEvent.stopPropagation(dt),t.value.dragging.disable();let ct=!0;const Et=G=>{if(!ct||!t.value)return;const tt=G.latlng.lng-H.lng,yt=G.latlng.lat-H.lat;let vt=(Math.atan2(yt,tt)*180/Math.PI+360)%360;q===0?A.setAngles(vt,A.getStopAngle()):A.setAngles(A.getStartAngle(),vt);const J=A.getStartAngle(),qt=A.getStopAngle(),te=A.getOpeningAngle(),Vt=A.calculatePointOnArc(J),ee=A.calculatePointOnArc(qt);if(I.setLatLng(Vt),it.setLatLng(ee),$&&te>5){const Rt=A.calculateMidpointPosition();$.setLatLng(Rt),$.setStyle({opacity:1,fillOpacity:1})}else $&&$.setStyle({opacity:0,fillOpacity:0});A.updateProperties(),a.value=A},Nt=()=>{ct=!1,t.value&&(t.value.off("mousemove",Et),document.removeEventListener("mouseup",Nt),t.value.dragging.enable(),A.updateProperties(),a.value=null,Ni(()=>{a.value=A}),Dt(A,"Semicircle"),W(A))};t.value.on("mousemove",Et),document.addEventListener("mouseup",Nt)})}),rt.on("mousedown",D=>{if(!t.value)return;Zt.DomEvent.stopPropagation(D),t.value.dragging.disable();let q=!0;const dt=Et=>{if(!q)return;A.setCenter(Et.latlng),rt.setLatLng(Et.latlng);const Nt=A.getStartAngle(),G=A.getStopAngle(),tt=A.getOpeningAngle(),yt=A.calculatePointOnArc(Nt),vt=A.calculatePointOnArc(G);if(I.setLatLng(yt),it.setLatLng(vt),$&&tt>5){const J=A.calculateMidpointPosition();$.setLatLng(J),$.setStyle({opacity:1,fillOpacity:1})}else $&&$.setStyle({opacity:0,fillOpacity:0});A.updateProperties(),a.value=A},ct=()=>{q=!1,t.value&&(t.value.off("mousemove",dt),document.removeEventListener("mouseup",ct),t.value.dragging.enable(),A.updateProperties(),a.value=null,Ni(()=>{a.value=A}),Dt(A,"Semicircle"))};t.value.on("mousemove",dt),document.addEventListener("mouseup",ct)})},St=A=>{var H;if(!(!t.value||!i.value)){if(console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:A.constructor.name,properties:A.properties,isPolygon:A instanceof Bu||A instanceof Zt.Polygon}),i.value.clearLayers(),A instanceof So){const V=(H=A.getBounds)==null?void 0:H.call(A).getCenter();if(V){const z=Zt.circleMarker(V,{radius:0,className:"text-hint-marker",pmIgnore:!0});i.value.addLayer(z)}return}try{if(A instanceof Bu||A instanceof Zt.Polygon){let V=[];try{if("getLatLngs"in A){const mt=A.getLatLngs();if(Array.isArray(mt)&&mt.length>0){const ft=mt[0];Array.isArray(ft)?V=ft:ft instanceof Zt.LatLng&&(V=mt)}}}catch(mt){console.error("[generateTempControlPoints] Erreur lors de la récupération des points du polygone:",mt);return}let z=null;try{if(A instanceof Bu&&typeof A.getCenter=="function")z=A.getCenter();else{const mt=V.map(I=>[I.lng,I.lat]);mt.push(mt[0]);const ft=kl([mt]),ht=_c(ft);z=Zt.latLng(ht.geometry.coordinates[1],ht.geometry.coordinates[0])}if(z&&z.lat!==void 0&&z.lng!==void 0){const mt=x(z,"#059669");i.value.addLayer(mt)}}catch(mt){console.warn("[generateTempControlPoints] Erreur lors du calcul du centre du polygone:",mt)}V.forEach(mt=>{if(mt&&mt.lat!==void 0&&mt.lng!==void 0){const ft=x(mt,"#DC2626");i.value.addLayer(ft)}});for(let mt=0;mt<V.length;mt++){const ft=V[mt],ht=V[(mt+1)%V.length];if(ft&&ht&&ft.lat!==void 0&&ft.lng!==void 0&&ht.lat!==void 0&&ht.lng!==void 0){const I=Zt.latLng((ft.lat+ht.lat)/2,(ft.lng+ht.lng)/2),it=x(I,"#2563EB");i.value.addLayer(it)}}}else A instanceof rc;console.log("[generateTempControlPoints] Points temporaires générés",{count:i.value.getLayers().length})}catch(V){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",V)}}},Mt=A=>{if(!t.value||!e.value||!A.getBounds)return;const H=A;S(),H.on("edit:start",()=>{S()}),H.on("edit:end",()=>{Mt(H)});const V=H.getBounds(),z=V.getCenter(),mt=H.properties.rotation||0,ft=q=>{if(mt===0)return q;const dt=mt*Math.PI/180,ct=Math.cos(dt),Et=Math.sin(dt),Nt=q.lng-z.lng,G=q.lat-z.lat,tt=Nt*ct-G*Et,yt=Nt*Et+G*ct;return Zt.latLng(z.lat+yt,z.lng+tt)},ht=[V.getNorthWest(),V.getNorthEast(),V.getSouthEast(),V.getSouthWest()].map(q=>ft(q)),I=H.getMidPoints().map(q=>ft(q)),it=x(z,"#059669");it.addTo(t.value),w.push(it),b(it,H,()=>{const{width:q,height:dt}=H.getDimensions(),ct=q*dt;return[cn(q,"m","Largeur"),cn(dt,"m","Hauteur"),cn(ct,"m²","Surface"),`Rotation: ${mt.toFixed(1)}°`].join("<br>")});const rt=ht.map((q,dt)=>{const ct=x(q,"#DC2626");return ct.addTo(t.value),w.push(ct),b(ct,H,()=>{const{width:Et,height:Nt}=H.getDimensions();return[cn(Et,"m","Largeur"),cn(Nt,"m","Hauteur")].join("<br>")}),ct.on("mousedown",Et=>{if(!t.value)return;Zt.DomEvent.stopPropagation(Et),t.value.dragging.disable();const Nt=(dt+2)%4,G=ht[Nt];H.startResize();const tt=wu(J=>{const qt=Zt.latLngBounds(G,J.latlng);H.updateResizePreview(qt)},16),yt=J=>tt(J),vt=()=>{if(!t.value)return;t.value.off("mousemove",yt),document.removeEventListener("mouseup",vt),t.value.dragging.enable();const J=Zt.latLngBounds(G,ct.getLatLng());H.endResize(J),a.value=null,Ni(()=>{a.value=H})};t.value.on("mousemove",yt),document.addEventListener("mouseup",vt)}),ct}),$=I.map((q,dt)=>{const ct=x(q,"#2563EB");return ct.addTo(t.value),w.push(ct),b(ct,H,()=>{const{width:Et,height:Nt}=H.getDimensions(),G=dt%2===0?Et:Nt;return[cn(G,"m","Longueur du côté"),cn(G/2,"m","Distance au coin"),`Rotation: ${mt.toFixed(1)}°`].join("<br>")}),ct.on("mousedown",Et=>{if(!t.value)return;Zt.DomEvent.stopPropagation(Et),t.value.dragging.disable(),H.startResize();const Nt=wu(yt=>{const vt=H.getBounds();let J;switch(dt){case 0:J=Zt.latLngBounds(Zt.latLng(yt.latlng.lat,vt.getWest()),Zt.latLng(vt.getSouth(),vt.getEast()));break;case 1:J=Zt.latLngBounds(Zt.latLng(vt.getNorth(),vt.getWest()),Zt.latLng(vt.getSouth(),yt.latlng.lng));break;case 2:J=Zt.latLngBounds(Zt.latLng(vt.getNorth(),vt.getWest()),Zt.latLng(yt.latlng.lat,vt.getEast()));break;case 3:J=Zt.latLngBounds(Zt.latLng(vt.getNorth(),yt.latlng.lng),Zt.latLng(vt.getSouth(),vt.getEast()));break;default:return}H.updateResizePreview(J)},16),G=yt=>Nt(yt),tt=()=>{if(!t.value)return;t.value.off("mousemove",G),document.removeEventListener("mouseup",tt),t.value.dragging.enable();const yt=H.getBounds();let vt;switch(dt){case 0:vt=Zt.latLngBounds(Zt.latLng(ct.getLatLng().lat,yt.getWest()),Zt.latLng(yt.getSouth(),yt.getEast()));break;case 1:vt=Zt.latLngBounds(Zt.latLng(yt.getNorth(),yt.getWest()),Zt.latLng(yt.getSouth(),ct.getLatLng().lng));break;case 2:vt=Zt.latLngBounds(Zt.latLng(yt.getNorth(),yt.getWest()),Zt.latLng(ct.getLatLng().lat,yt.getEast()));break;case 3:vt=Zt.latLngBounds(Zt.latLng(yt.getNorth(),ct.getLatLng().lng),Zt.latLng(yt.getSouth(),yt.getEast()));break;default:return}H.endResize(vt),a.value=null,Ni(()=>{a.value=H})};t.value.on("mousemove",G),document.addEventListener("mouseup",tt)}),ct});it.on("mousedown",q=>{if(!t.value)return;Zt.DomEvent.stopPropagation(q),t.value.dragging.disable();const dt=H.getBounds().getCenter(),ct=q.latlng;H.startResize();const Et=wu(tt=>{const yt=tt.latlng.lng-ct.lng,vt=tt.latlng.lat-ct.lat,J=Zt.latLng(dt.lat+vt,dt.lng+yt),qt=H.getBounds(),te=qt.getEast()-qt.getWest(),Vt=qt.getNorth()-qt.getSouth(),ee=Zt.latLngBounds(Zt.latLng(J.lat-Vt/2,J.lng-te/2),Zt.latLng(J.lat+Vt/2,J.lng+te/2));H.updateResizePreview(ee)},16),Nt=tt=>Et(tt),G=()=>{if(!t.value)return;t.value.off("mousemove",Nt),document.removeEventListener("mouseup",G),t.value.dragging.enable();const tt=H.getBounds(),yt=tt.getEast()-tt.getWest(),vt=tt.getNorth()-tt.getSouth(),J=it.getLatLng(),qt=Zt.latLngBounds(Zt.latLng(J.lat-vt/2,J.lng-yt/2),Zt.latLng(J.lat+vt/2,J.lng+yt/2));H.endResize(qt),a.value=null,Ni(()=>{a.value=H})};t.value.on("mousemove",Nt),document.addEventListener("mouseup",G)}),H.on("resize:update",q=>{const dt=q.bounds,ct=dt.getCenter(),Et=[dt.getNorthWest(),dt.getNorthEast(),dt.getSouthEast(),dt.getSouthWest()].map(G=>ft(G));rt.forEach((G,tt)=>{G.setLatLng(Et[tt])}),it.setLatLng(ct);const Nt=[Zt.latLng((Et[0].lat+Et[1].lat)/2,(Et[0].lng+Et[1].lng)/2),Zt.latLng((Et[1].lat+Et[2].lat)/2,(Et[1].lng+Et[2].lng)/2),Zt.latLng((Et[2].lat+Et[3].lat)/2,(Et[2].lng+Et[3].lng)/2),Zt.latLng((Et[3].lat+Et[0].lat)/2,(Et[3].lng+Et[0].lng)/2)].map(G=>ft(G));$.forEach((G,tt)=>{G.setLatLng(Nt[tt])})});const D=()=>{H.off("edit:start"),H.off("edit:end"),H.off("resize:update")};w.cleanup=D};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:i,currentTool:o,selectedShape:a,isDrawing:l,initMap:U,setDrawingTool:Z,updateShapeStyle:Y,updateShapeProperties:kt,updateTextFixedSize:R,adjustView:N,clearActiveControlPoints:S}}function sL(){const t=Fe(null),e=Fe(""),n=Fe("Ville"),i={Ville:Di.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}),Satellite:Di.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19}),Cadastre:Di.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19})};return{map:t,searchQuery:e,currentBaseMap:n,baseMaps:i,initMap:f=>{t.value=f,Di.control.layers(i).addTo(f),i[n.value].addTo(f)},searchLocation:async()=>{if(!(!t.value||!e.value))try{const p=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e.value)}`)).json();if(p&&p.length>0){const{lat:v,lon:b}=p[0];t.value.setView([v,b],13)}}catch(f){console.error("Erreur lors de la recherche de localisation:",f)}},changeBaseMap:f=>{!t.value||!i[f]||(Object.values(i).forEach(p=>{var v;(v=t.value)!=null&&v.hasLayer(p)&&t.value.removeLayer(p)}),i[f].addTo(t.value),n.value=f)}}}const sp=Qd("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var e,n;const t=xs();this.loading=!0;try{let i="/plans/";t.isDealer?i+="?concessionnaire="+((e=t.user)==null?void 0:e.id):t.isClient&&(i+="?utilisateur="+((n=t.user)==null?void 0:n.id));const o=await kn.get(i);this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1}},async fetchPlansWithDetails(){var e,n;const t=xs();this.loading=!0;try{let i="/plans/";const o={include_details:!0};t.isDealer?o.concessionnaire=(e=t.user)==null?void 0:e.id:t.isClient&&(o.utilisateur=(n=t.user)==null?void 0:n.id);const a=await kn.get(i,{params:o});return this.plans=a.data,a}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1}},async createPlan(t){this.clearCurrentPlan(),this.loading=!0;try{const e=await kn.post("/plans/",t);return this.plans.push(e.data),e.data}catch(e){const n=e instanceof Error?e.message:String(e);throw console.error("Error creating plan:",n),this.error="Erreur lors de la création du plan",e}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var e,n;if(this.unsavedChanges){this.loading=!0;try{const i=await kn.patch(`/plans/${t}/`,{...this.currentPlan,version:((e=this.currentPlan)==null?void 0:e.version)||1}),o=this.plans.findIndex(a=>a.id===t);return o!==-1&&(this.plans[o]=i.data),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=i.data),this.unsavedChanges=!1,i.data}catch(i){throw this.error="Erreur lors de la sauvegarde du plan",i}finally{this.loading=!1}}},async updatePlanDetails(t,e){var n;try{const i=await kn.patch(`/plans/${t}/`,e),o=this.plans.findIndex(a=>a.id===t);return o!==-1&&(this.plans[o]={...this.plans[o],...i.data}),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan={...this.currentPlan,...i.data}),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),i}},async fetchPlanHistory(t){this.loading=!0;try{const e=await kn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const i=await kn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=i.data);const o=this.plans.findIndex(a=>a.id===t);return o!==-1&&(this.plans[o]=i.data),i.data}catch(i){throw this.error="Erreur lors de la restauration de la version",i}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var e;this.loading=!0;try{await kn.delete(`/plans/${t}/`),this.plans=this.plans.filter(n=>n.id!==t),((e=this.currentPlan)==null?void 0:e.id)===t&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}});function Eu(t){return"content"in t&&"bounds"in t}function Ld(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function Cd(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function oL(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function eg(t){var i,o,a,l,f,p,v,b,w,S,x,j,R,U;console.log("[DrawingStore] Conversion de la forme en élément",{type:(i=t.properties)==null?void 0:i.type,properties:t.properties,bounds:(o=t.getBounds)==null?void 0:o.call(t),shape:t});let e,n;if(t instanceof So||((a=t.properties)==null?void 0:a.type)==="TextRectangle"){e="TEXTE";const N=t.getBounds();return n={bounds:{southWest:[N.getSouthWest().lng,N.getSouthWest().lat],northEast:[N.getNorthEast().lng,N.getNorthEast().lat]},content:t.properties.text||"",style:{...t.properties.style,textStyle:{color:((l=t.properties.style.textStyle)==null?void 0:l.color)||"#000000",fontSize:((f=t.properties.style.textStyle)==null?void 0:f.fontSize)||"14px",fontFamily:((p=t.properties.style.textStyle)==null?void 0:p.fontFamily)||"Arial, sans-serif",textAlign:((v=t.properties.style.textStyle)==null?void 0:v.textAlign)||"center",backgroundColor:((b=t.properties.style.textStyle)==null?void 0:b.backgroundColor)||"#FFFFFF",backgroundOpacity:((w=t.properties.style.textStyle)==null?void 0:w.backgroundOpacity)??1,bold:((S=t.properties.style.textStyle)==null?void 0:S.bold)||!1,italic:((x=t.properties.style.textStyle)==null?void 0:x.italic)||!1}},rotation:t.properties.rotation||0},console.log("[DrawingStore] TextRectangle converti",{type_forme:e,data:n,originalProperties:t.properties}),{type_forme:e,data:n}}switch((j=t.properties)==null?void 0:j.type){case"Polygon":e="POLYGON",n={points:t.getLatLngs()[0].map(At=>[At.lng,At.lat]),style:{color:t.properties.style.color||"#3388ff",weight:t.properties.style.weight||3,opacity:t.properties.style.opacity||1,fillColor:t.properties.style.fillColor||"#3388ff",fillOpacity:t.properties.style.fillOpacity||.2,dashArray:t.properties.style.dashArray||""}};break;case"Semicircle":e="DEMI_CERCLE";const Z=t.getCenter?t.getCenter():t.getLatLng();n={center:[Z.lng,Z.lat],radius:t.getRadius(),startAngle:t.properties.startAngle||0,endAngle:t.properties.stopAngle||180,style:{color:t.properties.style.color||"#3388ff",weight:t.properties.style.weight||3,opacity:t.properties.style.opacity||1,fillColor:t.properties.style.fillColor||"#3388ff",fillOpacity:t.properties.style.fillOpacity||.2,dashArray:t.properties.style.dashArray||""}};break;case"ElevationLine":e="ELEVATIONLINE",n={points:t.getLatLngs().map(At=>[At.lng,At.lat]),style:{color:t.properties.style.color||"#FF4500",weight:t.properties.style.weight||4,opacity:t.properties.style.opacity||.8},elevationData:t.getElevationData(),samplePointStyle:t.properties.samplePointStyle,minMaxPointStyle:t.properties.minMaxPointStyle};break;case"Rectangle":e="RECTANGLE",n={bounds:{southWest:[t.getBounds().getSouthWest().lng,t.getBounds().getSouthWest().lat],northEast:[t.getBounds().getNorthEast().lng,t.getBounds().getNorthEast().lat]},style:((R=t.properties)==null?void 0:R.style)||{}};break;case"Line":e="LIGNE",n={points:t.getLatLngs().map(At=>[At.lng,At.lat]),style:t.properties.style||{}};break;default:console.warn("[DrawingStore] Type de forme non géré:",(U=t.properties)==null?void 0:U.type),e="UNKNOWN",n={}}return console.log("[DrawingStore] Élément converti",{type_forme:e,data:n}),{type_forme:e,data:n}}function aL(t){var e,n,i,o,a,l,f,p,v,b,w,S,x,j,R,U,N,Z,Y,kt,At,Dt;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:t}),t.type_forme){case"TEXTE":{if(!Eu(t.data))return console.error("[DrawingStore] Données invalides pour TextRectangle"),null;const xt=t.data;if(!xt.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour TextRectangle"),null;const gt=new Zt.LatLngBounds(Zt.latLng(xt.bounds.southWest[1],xt.bounds.southWest[0]),Zt.latLng(xt.bounds.northEast[1],xt.bounds.northEast[0])),_t={color:((e=xt.style)==null?void 0:e.color)||"#3388ff",fillColor:((n=xt.style)==null?void 0:n.fillColor)||"#3388ff",fillOpacity:((i=xt.style)==null?void 0:i.fillOpacity)||.2,weight:((o=xt.style)==null?void 0:o.weight)||3,opacity:((a=xt.style)==null?void 0:a.opacity)||1,textStyle:{color:((l=xt.style.textStyle)==null?void 0:l.color)||"#000000",fontSize:((f=xt.style.textStyle)==null?void 0:f.fontSize)||"14px",fontFamily:((p=xt.style.textStyle)==null?void 0:p.fontFamily)||"Arial, sans-serif",textAlign:((v=xt.style.textStyle)==null?void 0:v.textAlign)||"center",backgroundColor:((b=xt.style.textStyle)==null?void 0:b.backgroundColor)||"#FFFFFF",backgroundOpacity:((w=xt.style.textStyle)==null?void 0:w.backgroundOpacity)??1,bold:((S=xt.style.textStyle)==null?void 0:S.bold)||!1,italic:((x=xt.style.textStyle)==null?void 0:x.italic)||!1}},zt=new So(gt,xt.content||"Double-cliquez pour éditer",_t);return xt.rotation&&zt.setRotation(xt.rotation),zt}case"POLYGON":{const xt=t.data;if(!Ld(xt))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const gt=xt.points.map(zt=>Zt.latLng(zt[1],zt[0])),_t=new Bu([gt],{color:((j=xt.style)==null?void 0:j.color)||"#3388ff",weight:((R=xt.style)==null?void 0:R.weight)||3,opacity:((U=xt.style)==null?void 0:U.opacity)||1,fillColor:((N=xt.style)==null?void 0:N.fillColor)||"#3388ff",fillOpacity:((Z=xt.style)==null?void 0:Z.fillOpacity)||.2,dashArray:((Y=xt.style)==null?void 0:Y.dashArray)||""});return _t.updateProperties(),_t}case"ELEVATIONLINE":{const xt=t.data;if(!Cd(xt))return console.error("[DrawingStore] Données invalides pour ElevationLine"),null;const gt=xt.points.map(zt=>Zt.latLng(zt[1],zt[0])),_t=new Sl(gt,{color:((kt=xt.style)==null?void 0:kt.color)||"#FF4500",weight:((At=xt.style)==null?void 0:At.weight)||4,opacity:((Dt=xt.style)==null?void 0:Dt.opacity)||.8});return xt.samplePointStyle&&_t.setSamplePointStyle(xt.samplePointStyle),xt.minMaxPointStyle&&_t.setMinMaxPointStyle(xt.minMaxPointStyle),_t.updateElevationProfile(),_t}case"LIGNE":{const xt=t.data;if(!oL(xt))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const gt=xt.points.map(zt=>Zt.latLng(zt[1],zt[0])),_t=new Gi(gt,xt.style);return _t.updateProperties(),_t}case"DEMI_CERCLE":{const xt=t.data;if(!xt.center||!xt.radius)return console.error("[DrawingStore] Données invalides pour Semicircle"),null;const gt=new Qa(Zt.latLng(xt.center[1],xt.center[0]),xt.radius,xt.startAngle,xt.endAngle,xt.style);gt.properties={type:"Semicircle",radius:xt.radius,startAngle:xt.startAngle,stopAngle:xt.endAngle,style:xt.style};const _t=Math.PI*Math.pow(xt.radius,2)*((xt.endAngle-xt.startAngle)/360),zt=2*xt.radius+Math.PI*xt.radius*((xt.endAngle-xt.startAngle)/180),X=Math.PI*xt.radius*((xt.endAngle-xt.startAngle)/180);return gt.properties.area=_t,gt.properties.perimeter=zt,gt.properties.arcLength=X,gt.properties.openingAngle=xt.endAngle-xt.startAngle,gt}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const F1=Qd("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentPlanId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2}},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var e;if(console.log("[DrawingStore] Ajout d'un élément",{element:t,isLeafletLayer:t instanceof Zt.Layer,hasProperties:!!t.properties,properties:t.properties,type:(e=t.properties)==null?void 0:e.type}),t instanceof Zt.Layer&&t.properties){const n=eg(t);console.log("[DrawingStore] Élément converti avant ajout",{original:t,converted:n,type:n.type_forme,data:n.data}),this.elements.push(n)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0,console.log("[DrawingStore] État après ajout",{elements:this.elements,unsavedChanges:this.unsavedChanges})},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){this.currentStyle={...this.currentStyle,...t}},async loadPlanElements(t){this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:t});const n=(await kn.get(`/plans/${t}/`)).data;return console.log("[DrawingStore] Données du plan reçues",{formes:n.formes,preferences:n.preferences}),this.elements=n.formes.map(i=>{if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data,isTextRectangle:i.type_forme==="TEXTE"||i.data&&Eu(i.data)}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=aL(i);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),eg(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme,isTextRectangle:i.type_forme==="TEXTE"||Eu(i.data)}))}),this.currentPlanId=t,this.unsavedChanges=!1,n.preferences&&(console.log("[DrawingStore] Chargement des préférences",n.preferences),n.preferences.currentTool&&this.setCurrentTool(n.preferences.currentTool),n.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...n.preferences.currentStyle}),n.preferences.lastUsedType&&(this.lastUsedType=n.preferences.lastUsedType)),this.elements}catch(e){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",e),this.error="Erreur lors du chargement des éléments du plan",e}finally{this.loading=!1}},async saveToPlan(t,e){this.loading=!0;try{const n=t||this.currentPlanId;if(!n)throw new Error("Aucun plan sélectionné pour la sauvegarde");console.log("[DrawingStore] État des éléments avant sauvegarde:",{elements:this.elements.map(l=>({id:l.id,type_forme:l.type_forme,data:{hasPoints:"points"in l.data,points:"points"in l.data?l.data.points:null,hasBounds:"bounds"in l.data,bounds:"bounds"in l.data?l.data.bounds:null,hasContent:"content"in l.data,content:"content"in l.data?l.data.content:null,style:l.data.style}}))}),console.log("[DrawingStore] Début de la sauvegarde",{planId:n,elementsCount:this.elements.length,elements:this.elements.map(l=>({id:l.id,type_forme:l.type_forme,isTextRectangle:l.type_forme==="TEXTE"||Eu(l.data),isPolygon:l.type_forme==="POLYGON"||Ld(l.data),isElevationLine:l.type_forme==="ELEVATIONLINE"||Cd(l.data)}))});const i=this.elements.map(l=>(console.log("[DrawingStore] Préparation de l'élément pour sauvegarde",{id:l.id,type_forme:l.type_forme,isTextRectangle:l.type_forme==="TEXTE"||Eu(l.data),dataType:l.data?Object.keys(l.data):null,dataContent:l.data}),l.type_forme==="TEXTE"&&Eu(l.data)&&console.log("[DrawingStore] Traitement spécial TextRectangle",{bounds:l.data.bounds,content:l.data.content,style:l.data.style}),l.type_forme==="POLYGON"&&Ld(l.data)&&console.log("[DrawingStore] Traitement spécial Polygon",{points:l.data.points,style:l.data.style}),l.type_forme==="ELEVATIONLINE"&&Cd(l.data)&&console.log("[DrawingStore] Traitement spécial ElevationLine",{points:l.data.points,style:l.data.style,elevationData:l.data.elevationData}),{...l,type_forme:l.type_forme||this.lastUsedType})),o=(e==null?void 0:e.elementsToDelete)||[];console.log("[DrawingStore] Envoi de la sauvegarde",{planId:n,formesCount:i.length,formes:i,elementsToDeleteCount:o.length,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});const a=await kn.post(`/plans/${n}/save_with_elements/`,{formes:i,connexions:[],annotations:[],elementsToDelete:o,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return console.log("[DrawingStore] Réponse de sauvegarde reçue",{formes:a.data.formes,status:a.status}),this.elements=a.data.formes.map(l=>(console.log("[DrawingStore] Mise à jour de l'élément après sauvegarde",{forme:l,type_forme:l.type_forme}),{...l,type_forme:l.type_forme})),this.unsavedChanges=!1,a.data}catch(n){throw console.error("[DrawingStore] Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),lL={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},uL={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},cL={key:0,class:"mb-4"},hL={key:0,class:"animate-pulse"},fL=["value"],dL={key:1,class:"mb-4"},pL={key:0,class:"animate-pulse"},gL=["disabled"],mL={value:null},vL=["value"],yL={class:"mb-4"},_L={class:"mb-6"},bL={class:"flex justify-end space-x-3"},wL=["disabled"],xL={key:0},LL={key:1},j1=Ls({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(t,{expose:e,emit:n}){const i=t,o=n,a=xs(),l=sp(),f=F1();Fe(!1);const p=Fe(!1),v=Fe(null),b=Fe([]),w=Fe([]),S=Fe(null),x=Fe(null),j=Fe(!1),R=Fe(!1),U=Fe({nom:"",description:"",concessionnaire:null,client:null}),N=zn(()=>{var gt,_t;return((gt=a.user)==null?void 0:gt.user_type)==="admin"?U.value.nom.trim()&&U.value.concessionnaire&&U.value.client:((_t=a.user)==null?void 0:_t.user_type)==="dealer"?U.value.nom.trim()&&U.value.client:U.value.nom.trim()});Rr(()=>U.value.concessionnaire,async gt=>{if(i.modelValue)if(gt){const _t=b.value.find(zt=>zt.id===gt);_t&&await kt(_t)}else w.value=[],S.value=null,x.value=null,U.value.client=null}),Rr(()=>i.modelValue,gt=>{var _t,zt;gt?((_t=a.user)==null?void 0:_t.user_type)==="admin"?Z():((zt=a.user)==null?void 0:zt.user_type)==="dealer"&&Y(a.user.id):(U.value={nom:"",description:"",concessionnaire:null,client:null},S.value=null,x.value=null,w.value=[],b.value=[],v.value=null)}),zn(()=>{var gt;return((gt=a.user)==null?void 0:gt.user_type)==="admin"?S.value?w.value:[]:w.value});async function Z(){j.value=!0;try{const gt=await kn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});b.value=gt.data}catch(gt){console.error("[NewPlanModal] Error loading dealers:",gt)}finally{j.value=!1}}async function Y(gt){R.value=!0;try{const _t=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:gt}});w.value=Array.isArray(_t.data)?_t.data:[_t.data]}catch(_t){console.error("[NewPlanModal] Error loading clients:",_t),w.value=[]}finally{R.value=!1}}async function kt(gt){if(i.modelValue){S.value=gt,U.value.concessionnaire=gt.id,R.value=!0;try{const _t=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:gt.id}});w.value=Array.isArray(_t.data)?_t.data:[_t.data]}catch(_t){console.error("[NewPlanModal] Error loading clients:",_t),w.value=[]}finally{R.value=!1}}}function At(gt){i.modelValue&&(x.value=gt,U.value.client=gt.id,o("clientSelected",gt))}function Dt(){o("update:modelValue",!1),U.value={nom:"",description:"",concessionnaire:null,client:null},S.value=null,x.value=null,w.value=[],v.value=null}async function xt(){var gt,_t,zt,X,W;v.value=null,p.value=!0;try{const St={nom:U.value.nom.trim(),description:U.value.description.trim()};((gt=a.user)==null?void 0:gt.user_type)==="admin"?(St.concessionnaire=U.value.concessionnaire,St.client=U.value.client):((_t=a.user)==null?void 0:_t.user_type)==="dealer"?(St.concessionnaire=a.user.id,St.client=U.value.client):((zt=a.user)==null?void 0:zt.user_type)==="client"&&(St.client=a.user.id),l.clearCurrentPlan(),f.setCurrentPlan(null);const Mt=await l.createPlan(St);o("created",Mt.id),Dt()}catch(St){console.error("[NewPlanModal] Error creating plan:",St),v.value=((W=(X=St.response)==null?void 0:X.data)==null?void 0:W.detail)||St.message||"Une erreur est survenue lors de la création du plan"}finally{p.value=!1}}return e({dealers:b,dealerClients:w,selectedDealer:S,selectedClient:x,loadDealers:Z,loadDealerClients:Y,selectDealer:kt,selectClient:At}),(gt,_t)=>{var zt,X;return gt.modelValue?(se(),ce("div",lL,[M("div",uL,[M("div",{class:"flex justify-between items-center mb-4"},[_t[5]||(_t[5]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),M("button",{onClick:Dt,class:"text-gray-400 hover:text-gray-500"},_t[4]||(_t[4]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Rn(a).isAdmin?(se(),ce("div",cL,[_t[8]||(_t[8]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),j.value?(se(),ce("div",hL,_t[6]||(_t[6]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):gn((se(),ce("select",{key:1,"onUpdate:modelValue":_t[0]||(_t[0]=W=>U.value.concessionnaire=W),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[_t[7]||(_t[7]=M("option",{value:null},"Sélectionnez un concessionnaire",-1)),(se(!0),ce(_n,null,Gn(b.value,W=>(se(),ce("option",{key:W.id,value:W.id},Pe(W.first_name)+" "+Pe(W.last_name)+" ("+Pe(W.company_name)+") ",9,fL))),128))],512)),[[$s,U.value.concessionnaire]])])):nn("",!0),((zt=Rn(a).user)==null?void 0:zt.user_type)==="admin"||((X=Rn(a).user)==null?void 0:X.user_type)==="dealer"?(se(),ce("div",dL,[_t[10]||(_t[10]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),R.value?(se(),ce("div",pL,_t[9]||(_t[9]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):gn((se(),ce("select",{key:1,"onUpdate:modelValue":_t[1]||(_t[1]=W=>U.value.client=W),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!w.value.length},[M("option",mL,Pe(w.value.length?"Sélectionnez un client":"Aucun client disponible"),1),(se(!0),ce(_n,null,Gn(w.value,W=>(se(),ce("option",{key:W.id,value:W.id},Pe(W.first_name)+" "+Pe(W.last_name)+" ("+Pe(W.company_name)+") ",9,vL))),128))],8,gL)),[[$s,U.value.client]])])):nn("",!0),M("div",yL,[_t[11]||(_t[11]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),gn(M("input",{"onUpdate:modelValue":_t[2]||(_t[2]=W=>U.value.nom=W),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Hn,U.value.nom]])]),M("div",_L,[_t[12]||(_t[12]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),gn(M("textarea",{"onUpdate:modelValue":_t[3]||(_t[3]=W=>U.value.description=W),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Hn,U.value.description]])]),M("div",bL,[M("button",{onClick:Dt,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),M("button",{onClick:xt,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!N.value||p.value},[p.value?(se(),ce("span",xL,"Création en cours...")):(se(),ce("span",LL,"Créer le plan"))],8,wL)])])])):nn("",!0)}}});function di(t){"@babel/helpers - typeof";return di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},di(t)}var ls=Uint8Array,lo=Uint16Array,op=Int32Array,lf=new ls([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uf=new ls([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Pd=new ls([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),z1=function(t,e){for(var n=new lo(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var o=new op(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)o[a]=a-n[i]<<5|i;return{b:n,r:o}},U1=z1(lf,2),q1=U1.b,kd=U1.r;q1[28]=258,kd[258]=28;var $1=z1(uf,0),CL=$1.b,ng=$1.r,Sd=new lo(32768);for(var Ai=0;Ai<32768;++Ai){var _l=(Ai&43690)>>1|(Ai&21845)<<1;_l=(_l&52428)>>2|(_l&13107)<<2,_l=(_l&61680)>>4|(_l&3855)<<4,Sd[Ai]=((_l&65280)>>8|(_l&255)<<8)>>1}var ka=function(t,e,n){for(var i=t.length,o=0,a=new lo(e);o<i;++o)t[o]&&++a[t[o]-1];var l=new lo(e);for(o=1;o<e;++o)l[o]=l[o-1]+a[o-1]<<1;var f;if(n){f=new lo(1<<e);var p=15-e;for(o=0;o<i;++o)if(t[o])for(var v=o<<4|t[o],b=e-t[o],w=l[t[o]-1]++<<b,S=w|(1<<b)-1;w<=S;++w)f[Sd[w]>>p]=v}else for(f=new lo(i),o=0;o<i;++o)t[o]&&(f[o]=Sd[l[t[o]-1]++]>>15-t[o]);return f},Dl=new ls(288);for(var Ai=0;Ai<144;++Ai)Dl[Ai]=8;for(var Ai=144;Ai<256;++Ai)Dl[Ai]=9;for(var Ai=256;Ai<280;++Ai)Dl[Ai]=7;for(var Ai=280;Ai<288;++Ai)Dl[Ai]=8;var Dc=new ls(32);for(var Ai=0;Ai<32;++Ai)Dc[Ai]=5;var PL=ka(Dl,9,0),kL=ka(Dl,9,1),SL=ka(Dc,5,0),EL=ka(Dc,5,1),Uf=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Go=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},qf=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},ap=function(t){return(t+7)/8|0},V1=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ls(t.subarray(e,n))},AL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zo=function(t,e,n){var i=new Error(e||AL[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,Zo),!n)throw i;return i},ML=function(t,e,n,i){var o=t.length,a=0;if(!o||e.f&&!e.l)return n||new ls(0);var l=!n,f=l||e.i!=2,p=e.i;l&&(n=new ls(o*3));var v=function(Nt){var G=n.length;if(Nt>G){var tt=new ls(Math.max(G*2,Nt));tt.set(n),n=tt}},b=e.f||0,w=e.p||0,S=e.b||0,x=e.l,j=e.d,R=e.m,U=e.n,N=o*8;do{if(!x){b=Go(t,w,1);var Z=Go(t,w+1,3);if(w+=3,Z)if(Z==1)x=kL,j=EL,R=9,U=5;else if(Z==2){var Dt=Go(t,w,31)+257,xt=Go(t,w+10,15)+4,gt=Dt+Go(t,w+5,31)+1;w+=14;for(var _t=new ls(gt),zt=new ls(19),X=0;X<xt;++X)zt[Pd[X]]=Go(t,w+X*3,7);w+=xt*3;for(var W=Uf(zt),St=(1<<W)-1,Mt=ka(zt,W,1),X=0;X<gt;){var A=Mt[Go(t,w,St)];w+=A&15;var Y=A>>4;if(Y<16)_t[X++]=Y;else{var H=0,V=0;for(Y==16?(V=3+Go(t,w,3),w+=2,H=_t[X-1]):Y==17?(V=3+Go(t,w,7),w+=3):Y==18&&(V=11+Go(t,w,127),w+=7);V--;)_t[X++]=H}}var z=_t.subarray(0,Dt),mt=_t.subarray(Dt);R=Uf(z),U=Uf(mt),x=ka(z,R,1),j=ka(mt,U,1)}else Zo(1);else{var Y=ap(w)+4,kt=t[Y-4]|t[Y-3]<<8,At=Y+kt;if(At>o){p&&Zo(0);break}f&&v(S+kt),n.set(t.subarray(Y,At),S),e.b=S+=kt,e.p=w=At*8,e.f=b;continue}if(w>N){p&&Zo(0);break}}f&&v(S+131072);for(var ft=(1<<R)-1,ht=(1<<U)-1,I=w;;I=w){var H=x[qf(t,w)&ft],it=H>>4;if(w+=H&15,w>N){p&&Zo(0);break}if(H||Zo(2),it<256)n[S++]=it;else if(it==256){I=w,x=null;break}else{var rt=it-254;if(it>264){var X=it-257,$=lf[X];rt=Go(t,w,(1<<$)-1)+q1[X],w+=$}var D=j[qf(t,w)&ht],q=D>>4;D||Zo(3),w+=D&15;var mt=CL[q];if(q>3){var $=uf[q];mt+=qf(t,w)&(1<<$)-1,w+=$}if(w>N){p&&Zo(0);break}f&&v(S+131072);var dt=S+rt;if(S<mt){var ct=a-mt,Et=Math.min(mt,dt);for(ct+S<0&&Zo(3);S<Et;++S)n[S]=i[ct+S]}for(;S<dt;++S)n[S]=n[S-mt]}}e.l=x,e.p=I,e.b=S,e.f=b,x&&(b=1,e.m=R,e.d=j,e.n=U)}while(!b);return S!=n.length&&l?V1(n,0,S):n.subarray(0,S)},Wa=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8},sc=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},$f=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var o=n.length,a=n.slice();if(!o)return{t:G1,l:0};if(o==1){var l=new ls(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(At,Dt){return At.f-Dt.f}),n.push({s:-1,f:25001});var f=n[0],p=n[1],v=0,b=1,w=2;for(n[0]={s:-1,f:f.f+p.f,l:f,r:p};b!=o-1;)f=n[n[v].f<n[w].f?v++:w++],p=n[v!=b&&n[v].f<n[w].f?v++:w++],n[b++]={s:-1,f:f.f+p.f,l:f,r:p};for(var S=a[0].s,i=1;i<o;++i)a[i].s>S&&(S=a[i].s);var x=new lo(S+1),j=Ed(n[b-1],x,0);if(j>e){var i=0,R=0,U=j-e,N=1<<U;for(a.sort(function(Dt,xt){return x[xt.s]-x[Dt.s]||Dt.f-xt.f});i<o;++i){var Z=a[i].s;if(x[Z]>e)R+=N-(1<<j-x[Z]),x[Z]=e;else break}for(R>>=U;R>0;){var Y=a[i].s;x[Y]<e?R-=1<<e-x[Y]++-1:++i}for(;i>=0&&R;--i){var kt=a[i].s;x[kt]==e&&(--x[kt],++R)}j=e}return{t:new ls(x),l:j}},Ed=function(t,e,n){return t.s==-1?Math.max(Ed(t.l,e,n+1),Ed(t.r,e,n+1)):e[t.s]=n},ig=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new lo(++e),i=0,o=t[0],a=1,l=function(p){n[i++]=p},f=1;f<=e;++f)if(t[f]==o&&f!=e)++a;else{if(!o&&a>2){for(;a>138;a-=138)l(32754);a>2&&(l(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(l(o),--a;a>6;a-=6)l(8304);a>2&&(l(a-3<<5|8208),a=0)}for(;a--;)l(o);a=1,o=t[f]}return{c:n.subarray(0,i),n:e}},oc=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},H1=function(t,e,n){var i=n.length,o=ap(e+2);t[o]=i&255,t[o+1]=i>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var a=0;a<i;++a)t[o+a+4]=n[a];return(o+4+i)*8},rg=function(t,e,n,i,o,a,l,f,p,v,b){Wa(e,b++,n),++o[256];for(var w=$f(o,15),S=w.t,x=w.l,j=$f(a,15),R=j.t,U=j.l,N=ig(S),Z=N.c,Y=N.n,kt=ig(R),At=kt.c,Dt=kt.n,xt=new lo(19),gt=0;gt<Z.length;++gt)++xt[Z[gt]&31];for(var gt=0;gt<At.length;++gt)++xt[At[gt]&31];for(var _t=$f(xt,7),zt=_t.t,X=_t.l,W=19;W>4&&!zt[Pd[W-1]];--W);var St=v+5<<3,Mt=oc(o,Dl)+oc(a,Dc)+l,A=oc(o,S)+oc(a,R)+l+14+3*W+oc(xt,zt)+2*xt[16]+3*xt[17]+7*xt[18];if(p>=0&&St<=Mt&&St<=A)return H1(e,b,t.subarray(p,p+v));var H,V,z,mt;if(Wa(e,b,1+(A<Mt)),b+=2,A<Mt){H=ka(S,x,0),V=S,z=ka(R,U,0),mt=R;var ft=ka(zt,X,0);Wa(e,b,Y-257),Wa(e,b+5,Dt-1),Wa(e,b+10,W-4),b+=14;for(var gt=0;gt<W;++gt)Wa(e,b+3*gt,zt[Pd[gt]]);b+=3*W;for(var ht=[Z,At],I=0;I<2;++I)for(var it=ht[I],gt=0;gt<it.length;++gt){var rt=it[gt]&31;Wa(e,b,ft[rt]),b+=zt[rt],rt>15&&(Wa(e,b,it[gt]>>5&127),b+=it[gt]>>12)}}else H=PL,V=Dl,z=SL,mt=Dc;for(var gt=0;gt<f;++gt){var $=i[gt];if($>255){var rt=$>>18&31;sc(e,b,H[rt+257]),b+=V[rt+257],rt>7&&(Wa(e,b,$>>23&31),b+=lf[rt]);var D=$&31;sc(e,b,z[D]),b+=mt[D],D>3&&(sc(e,b,$>>5&8191),b+=uf[D])}else sc(e,b,H[$]),b+=V[$]}return sc(e,b,H[256]),b+V[256]},BL=new op([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),G1=new ls(0),TL=function(t,e,n,i,o,a){var l=a.z||t.length,f=new ls(i+l+5*(1+Math.ceil(l/7e3))+o),p=f.subarray(i,f.length-o),v=a.l,b=(a.r||0)&7;if(e){b&&(p[0]=a.r>>3);for(var w=BL[e-1],S=w>>13,x=w&8191,j=(1<<n)-1,R=a.p||new lo(32768),U=a.h||new lo(j+1),N=Math.ceil(n/3),Z=2*N,Y=function(yt){return(t[yt]^t[yt+1]<<N^t[yt+2]<<Z)&j},kt=new op(25e3),At=new lo(288),Dt=new lo(32),xt=0,gt=0,_t=a.i||0,zt=0,X=a.w||0,W=0;_t+2<l;++_t){var St=Y(_t),Mt=_t&32767,A=U[St];if(R[Mt]=A,U[St]=Mt,X<=_t){var H=l-_t;if((xt>7e3||zt>24576)&&(H>423||!v)){b=rg(t,p,0,kt,At,Dt,gt,zt,W,_t-W,b),zt=xt=gt=0,W=_t;for(var V=0;V<286;++V)At[V]=0;for(var V=0;V<30;++V)Dt[V]=0}var z=2,mt=0,ft=x,ht=Mt-A&32767;if(H>2&&St==Y(_t-ht))for(var I=Math.min(S,H)-1,it=Math.min(32767,_t),rt=Math.min(258,H);ht<=it&&--ft&&Mt!=A;){if(t[_t+z]==t[_t+z-ht]){for(var $=0;$<rt&&t[_t+$]==t[_t+$-ht];++$);if($>z){if(z=$,mt=ht,$>I)break;for(var D=Math.min(ht,$-2),q=0,V=0;V<D;++V){var dt=_t-ht+V&32767,ct=R[dt],Et=dt-ct&32767;Et>q&&(q=Et,A=dt)}}}Mt=A,A=R[Mt],ht+=Mt-A&32767}if(mt){kt[zt++]=268435456|kd[z]<<18|ng[mt];var Nt=kd[z]&31,G=ng[mt]&31;gt+=lf[Nt]+uf[G],++At[257+Nt],++Dt[G],X=_t+z,++xt}else kt[zt++]=t[_t],++At[t[_t]]}}for(_t=Math.max(_t,X);_t<l;++_t)kt[zt++]=t[_t],++At[t[_t]];b=rg(t,p,v,kt,At,Dt,gt,zt,W,_t-W,b),v||(a.r=b&7|p[b/8|0]<<3,b-=7,a.h=U,a.p=R,a.i=_t,a.w=X)}else{for(var _t=a.w||0;_t<l+v;_t+=65535){var tt=_t+65535;tt>=l&&(p[b/8|0]=v,tt=l),b=H1(p,b+1,t.subarray(_t,tt))}a.i=l}return V1(f,0,i+ap(b)+o)},W1=function(){var t=1,e=0;return{p:function(n){for(var i=t,o=e,a=n.length|0,l=0;l!=a;){for(var f=Math.min(l+2655,a);l<f;++l)o+=i+=n[l];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}t=i,e=o},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},DL=function(t,e,n,i,o){if(!o&&(o={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),l=new ls(a.length+t.length);l.set(a),l.set(t,a.length),t=l,o.w=a.length}return TL(t,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,i,o)},Z1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},NL=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var o=W1();o.p(e.dictionary),Z1(t,2,o.d())}},OL=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Zo(6,"invalid zlib data"),(t[1]>>5&1)==1&&Zo(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Ad(t,e){e||(e={});var n=W1();n.p(t);var i=DL(t,e,e.dictionary?6:2,4);return NL(i,e),Z1(i,i.length-4,n.d()),i}function RL(t,e){return ML(t.subarray(OL(t),-4),{i:2},e,e)}var IL=typeof TextDecoder<"u"&&new TextDecoder,FL=0;try{IL.decode(G1,{stream:!0}),FL=1}catch{}var Cn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Vf(){Cn.console&&typeof Cn.console.log=="function"&&Cn.console.log.apply(Cn.console,arguments)}var vi={log:Vf,warn:function(t){Cn.console&&(typeof Cn.console.warn=="function"?Cn.console.warn.apply(Cn.console,arguments):Vf.call(null,arguments))},error:function(t){Cn.console&&(typeof Cn.console.error=="function"?Cn.console.error.apply(Cn.console,arguments):Vf(t))}};function Hf(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){Zl(i.response,e,n)},i.onerror=function(){vi.error("could not download file")},i.send()}function sg(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function nh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var bc,Md,Zl=Cn.saveAs||((typeof window>"u"?"undefined":di(window))!=="object"||window!==Cn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=Cn.URL||Cn.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?sg(o.href)?Hf(t,e,n):nh(o,o.target="_blank"):nh(o)):(o.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){nh(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(sg(t))Hf(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){nh(i)})}else navigator.msSaveOrOpenBlob(function(o,a){return a===void 0?a={autoBom:!1}:di(a)!=="object"&&(vi.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return Hf(t,e,n);var o=t.type==="application/octet-stream",a=/constructor/i.test(Cn.HTMLElement)||Cn.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&a)&&(typeof FileReader>"u"?"undefined":di(FileReader))==="object"){var f=new FileReader;f.onloadend=function(){var b=f.result;b=l?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=b:location=b,i=null},f.readAsDataURL(t)}else{var p=Cn.URL||Cn.webkitURL,v=p.createObjectURL(t);i?i.location=v:location.href=v,i=null,setTimeout(function(){p.revokeObjectURL(v)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function K1(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}],i=0;i<n.length;i++){var o=n[i].re,a=n[i].process,l=o.exec(t);l&&(e=a(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var f=this.r.toString(16),p=this.g.toString(16),v=this.b.toString(16);return f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),v.length==1&&(v="0"+v),"#"+f+p+v}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Gf(t,e){var n=t[0],i=t[1],o=t[2],a=t[3];n=es(n,i,o,a,e[0],7,-680876936),a=es(a,n,i,o,e[1],12,-389564586),o=es(o,a,n,i,e[2],17,606105819),i=es(i,o,a,n,e[3],22,-1044525330),n=es(n,i,o,a,e[4],7,-176418897),a=es(a,n,i,o,e[5],12,1200080426),o=es(o,a,n,i,e[6],17,-1473231341),i=es(i,o,a,n,e[7],22,-45705983),n=es(n,i,o,a,e[8],7,1770035416),a=es(a,n,i,o,e[9],12,-1958414417),o=es(o,a,n,i,e[10],17,-42063),i=es(i,o,a,n,e[11],22,-1990404162),n=es(n,i,o,a,e[12],7,1804603682),a=es(a,n,i,o,e[13],12,-40341101),o=es(o,a,n,i,e[14],17,-1502002290),n=ns(n,i=es(i,o,a,n,e[15],22,1236535329),o,a,e[1],5,-165796510),a=ns(a,n,i,o,e[6],9,-1069501632),o=ns(o,a,n,i,e[11],14,643717713),i=ns(i,o,a,n,e[0],20,-373897302),n=ns(n,i,o,a,e[5],5,-701558691),a=ns(a,n,i,o,e[10],9,38016083),o=ns(o,a,n,i,e[15],14,-660478335),i=ns(i,o,a,n,e[4],20,-405537848),n=ns(n,i,o,a,e[9],5,568446438),a=ns(a,n,i,o,e[14],9,-1019803690),o=ns(o,a,n,i,e[3],14,-187363961),i=ns(i,o,a,n,e[8],20,1163531501),n=ns(n,i,o,a,e[13],5,-1444681467),a=ns(a,n,i,o,e[2],9,-51403784),o=ns(o,a,n,i,e[7],14,1735328473),n=is(n,i=ns(i,o,a,n,e[12],20,-1926607734),o,a,e[5],4,-378558),a=is(a,n,i,o,e[8],11,-2022574463),o=is(o,a,n,i,e[11],16,1839030562),i=is(i,o,a,n,e[14],23,-35309556),n=is(n,i,o,a,e[1],4,-1530992060),a=is(a,n,i,o,e[4],11,1272893353),o=is(o,a,n,i,e[7],16,-155497632),i=is(i,o,a,n,e[10],23,-1094730640),n=is(n,i,o,a,e[13],4,681279174),a=is(a,n,i,o,e[0],11,-358537222),o=is(o,a,n,i,e[3],16,-722521979),i=is(i,o,a,n,e[6],23,76029189),n=is(n,i,o,a,e[9],4,-640364487),a=is(a,n,i,o,e[12],11,-421815835),o=is(o,a,n,i,e[15],16,530742520),n=rs(n,i=is(i,o,a,n,e[2],23,-995338651),o,a,e[0],6,-198630844),a=rs(a,n,i,o,e[7],10,1126891415),o=rs(o,a,n,i,e[14],15,-1416354905),i=rs(i,o,a,n,e[5],21,-57434055),n=rs(n,i,o,a,e[12],6,1700485571),a=rs(a,n,i,o,e[3],10,-1894986606),o=rs(o,a,n,i,e[10],15,-1051523),i=rs(i,o,a,n,e[1],21,-2054922799),n=rs(n,i,o,a,e[8],6,1873313359),a=rs(a,n,i,o,e[15],10,-30611744),o=rs(o,a,n,i,e[6],15,-1560198380),i=rs(i,o,a,n,e[13],21,1309151649),n=rs(n,i,o,a,e[4],6,-145523070),a=rs(a,n,i,o,e[11],10,-1120210379),o=rs(o,a,n,i,e[2],15,718787259),i=rs(i,o,a,n,e[9],21,-343485551),t[0]=El(n,t[0]),t[1]=El(i,t[1]),t[2]=El(o,t[2]),t[3]=El(a,t[3])}function cf(t,e,n,i,o,a){return e=El(El(e,t),El(i,a)),El(e<<o|e>>>32-o,n)}function es(t,e,n,i,o,a,l){return cf(e&n|~e&i,t,e,o,a,l)}function ns(t,e,n,i,o,a,l){return cf(e&i|n&~i,t,e,o,a,l)}function is(t,e,n,i,o,a,l){return cf(e^n^i,t,e,o,a,l)}function rs(t,e,n,i,o,a,l){return cf(n^(e|~i),t,e,o,a,l)}function Y1(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Gf(i,jL(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Gf(i,o),e=0;e<16;e++)o[e]=0;return o[14]=8*n,Gf(i,o),i}function jL(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}bc=Cn.atob.bind(Cn),Md=Cn.btoa.bind(Cn);var og="0123456789abcdef".split("");function zL(t){for(var e="",n=0;n<4;n++)e+=og[t>>8*n+4&15]+og[t>>8*n&15];return e}function UL(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Bd(t){return Y1(t).map(UL).join("")}var qL=function(t){for(var e=0;e<t.length;e++)t[e]=zL(t[e]);return t.join("")}(Y1("hello"))!="5d41402abc4b2a76b9719d911017c592";function El(t,e){if(qL){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Td(t,e){var n,i,o,a;if(t!==n){for(var l=(o=t,a=1+(256/t.length>>0),new Array(a+1).join(o)),f=[],p=0;p<256;p++)f[p]=p;var v=0;for(p=0;p<256;p++){var b=f[p];v=(v+b+l.charCodeAt(p))%256,f[p]=f[v],f[v]=b}n=t,i=f}else f=i;var w=e.length,S=0,x=0,j="";for(p=0;p<w;p++)x=(x+(b=f[S=(S+1)%256]))%256,f[S]=f[x],f[x]=b,l=f[(f[S]+f[x])%256],j+=String.fromCharCode(e.charCodeAt(p)^l);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ag={print:4,modify:8,copy:16,"annot-forms":32};function Au(t,e,n,i){this.v=1,this.r=2;var o=192;t.forEach(function(f){if(ag.perm!==void 0)throw new Error("Invalid permission: "+f);o+=ag[f]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),l=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,l),this.P=-(1+(255^o)),this.encryptionKey=Bd(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Td(this.encryptionKey,this.padding)}function Mu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var o=t.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[i]}return e}function lg(t){if(di(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,o){if(o=o||!1,typeof n!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[i,!!o],a},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var a in e[n]){var l=e[n][a];try{l[0].apply(t,i)}catch(f){Cn.console&&vi.error("jsPDF PubSub Error",f.message,f)}l[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Oh(t){if(!(this instanceof Oh))return new Oh(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function J1(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Yl(t,e,n,i,o){if(!(this instanceof Yl))return new Yl(t,e,n,i,o);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,J1.call(this,i,o)}function Tu(t,e,n,i,o){if(!(this instanceof Tu))return new Tu(t,e,n,i,o);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,J1.call(this,i,o)}function xn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],a=arguments[3],l=[],f=1,p=16,v="S",b=null;di(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,o=t.format||o,a=t.compress||t.compressPdf||a,(b=t.encryption||null)!==null&&(b.userPassword=b.userPassword||"",b.ownerPassword=b.ownerPassword||"",b.userPermissions=b.userPermissions||[]),f=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(p=t.floatPrecision),v=t.defaultPathOperation||"S"),l=t.filters||(a===!0?["FlateEncode"]:l),i=i||"mm",n=(""+(n||"P")).toLowerCase();var w=t.putOnlyUsedFonts||!1,S={},x={internal:{},__private__:{}};x.__private__.PubSub=lg;var j="1.3",R=x.__private__.getPdfVersion=function(){return j};x.__private__.setPdfVersion=function(C){j=C};var U={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return U};var N=x.__private__.getPageFormat=function(C){return U[C]};o=o||"a4";var Z={COMPAT:"compat",ADVANCED:"advanced"},Y=Z.COMPAT;function kt(){this.saveGraphicsState(),J(new Qe(Oe,0,0,-Oe,0,yo()*Oe).toString()+" cm"),this.setFontSize(this.getFontSize()/Oe),v="n",Y=Z.ADVANCED}function At(){this.restoreGraphicsState(),v="S",Y=Z.COMPAT}var Dt=x.__private__.combineFontStyleAndFontWeight=function(C,et){if(C=="bold"&&et=="normal"||C=="bold"&&et==400||C=="normal"&&et=="italic"||C=="bold"&&et=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return et&&(C=et==400||et==="normal"?C==="italic"?"italic":"normal":et!=700&&et!=="bold"||C!=="normal"?(et==700?"bold":et)+""+C:"bold"),C};x.advancedAPI=function(C){var et=Y===Z.COMPAT;return et&&kt.call(this),typeof C!="function"||(C(this),et&&At.call(this)),this},x.compatAPI=function(C){var et=Y===Z.ADVANCED;return et&&At.call(this),typeof C!="function"||(C(this),et&&kt.call(this)),this},x.isAdvancedAPI=function(){return Y===Z.ADVANCED};var xt,gt=function(C){if(Y!==Z.ADVANCED)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_t=x.roundToPrecision=x.__private__.roundToPrecision=function(C,et){var It=e||et;if(isNaN(C)||isNaN(It))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(It).replace(/0+$/,"")};xt=x.hpf=x.__private__.hpf=typeof p=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return _t(C,p)}:p==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return _t(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return _t(C,16)};var zt=x.f2=x.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return _t(C,2)},X=x.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return _t(C,3)},W=x.scale=x.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return Y===Z.COMPAT?C*Oe:Y===Z.ADVANCED?C:void 0},St=function(C){return Y===Z.COMPAT?yo()-C:Y===Z.ADVANCED?C:void 0},Mt=function(C){return W(St(C))};x.__private__.setPrecision=x.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(e=parseInt(C,10))};var A,H="00000000000000000000000000000000",V=x.__private__.getFileId=function(){return H},z=x.__private__.setFileId=function(C){return H=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),b!==null&&(Ri=new Au(b.userPermissions,b.userPassword,b.ownerPassword,H)),H};x.setFileId=function(C){return z(C),this},x.getFileId=function(){return V()};var mt=x.__private__.convertDateToPDFDate=function(C){var et=C.getTimezoneOffset(),It=et<0?"+":"-",Gt=Math.floor(Math.abs(et/60)),ue=Math.abs(et%60),we=[It,rt(Gt),"'",rt(ue),"'"].join("");return["D:",C.getFullYear(),rt(C.getMonth()+1),rt(C.getDate()),rt(C.getHours()),rt(C.getMinutes()),rt(C.getSeconds()),we].join("")},ft=x.__private__.convertPDFDateToDate=function(C){var et=parseInt(C.substr(2,4),10),It=parseInt(C.substr(6,2),10)-1,Gt=parseInt(C.substr(8,2),10),ue=parseInt(C.substr(10,2),10),we=parseInt(C.substr(12,2),10),Ne=parseInt(C.substr(14,2),10);return new Date(et,It,Gt,ue,we,Ne,0)},ht=x.__private__.setCreationDate=function(C){var et;if(C===void 0&&(C=new Date),C instanceof Date)et=mt(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");et=C}return A=et},I=x.__private__.getCreationDate=function(C){var et=A;return C==="jsDate"&&(et=ft(A)),et};x.setCreationDate=function(C){return ht(C),this},x.getCreationDate=function(C){return I(C)};var it,rt=x.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},$=x.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},D=0,q=[],dt=[],ct=0,Et=[],Nt=[],G=!1,tt=dt,yt=function(){D=0,ct=0,dt=[],q=[],Et=[],kr=qe(),mr=qe()};x.__private__.setCustomOutputDestination=function(C){G=!0,tt=C};var vt=function(C){G||(tt=C)};x.__private__.resetCustomOutputDestination=function(){G=!1,tt=dt};var J=x.__private__.out=function(C){return C=C.toString(),ct+=C.length+1,tt.push(C),tt},qt=x.__private__.write=function(C){return J(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},te=x.__private__.getArrayBuffer=function(C){for(var et=C.length,It=new ArrayBuffer(et),Gt=new Uint8Array(It);et--;)Gt[et]=C.charCodeAt(et);return It},Vt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Vt};var ee=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(C){return ee=Y===Z.ADVANCED?C/Oe:C,this};var Rt,Ot=x.__private__.getFontSize=x.getFontSize=function(){return Y===Z.COMPAT?ee:ee*Oe},ie=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(C){return ie=C,this},x.__private__.getR2L=x.getR2L=function(){return ie};var pe,ke=x.__private__.setZoomMode=function(C){var et=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))Rt=C;else if(isNaN(C)){if(et.indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');Rt=C}else Rt=parseInt(C,10)};x.__private__.getZoomMode=function(){return Rt};var Kt,oe=x.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');pe=C};x.__private__.getPageMode=function(){return pe};var Ve=x.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');Kt=C};x.__private__.getLayoutMode=function(){return Kt},x.__private__.setDisplayMode=x.setDisplayMode=function(C,et,It){return ke(C),Ve(et),oe(It),this};var Ue={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(C){if(Object.keys(Ue).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ue[C]},x.__private__.getDocumentProperties=function(){return Ue},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(C){for(var et in Ue)Ue.hasOwnProperty(et)&&C[et]&&(Ue[et]=C[et]);return this},x.__private__.setDocumentProperty=function(C,et){if(Object.keys(Ue).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ue[C]=et};var Ge,Oe,Sn,tn,si,an={},bn={},Un=[],je={},qi={},Mn={},ci={},gi=null,In=0,ln=[],Ke=new lg(x),Ze=t.hotfixes||[],Qn={},$i={},Re=[],Qe=function C(et,It,Gt,ue,we,Ne){if(!(this instanceof C))return new C(et,It,Gt,ue,we,Ne);isNaN(et)&&(et=1),isNaN(It)&&(It=0),isNaN(Gt)&&(Gt=0),isNaN(ue)&&(ue=1),isNaN(we)&&(we=0),isNaN(Ne)&&(Ne=0),this._matrix=[et,It,Gt,ue,we,Ne]};Object.defineProperty(Qe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Qe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Qe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Qe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Qe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Qe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Qe.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Qe.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Qe.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Qe.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Qe.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Qe.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Qe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qe.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(xt).join(C)},Qe.prototype.multiply=function(C){var et=C.sx*this.sx+C.shy*this.shx,It=C.sx*this.shy+C.shy*this.sy,Gt=C.shx*this.sx+C.sy*this.shx,ue=C.shx*this.shy+C.sy*this.sy,we=C.tx*this.sx+C.ty*this.shx+this.tx,Ne=C.tx*this.shy+C.ty*this.sy+this.ty;return new Qe(et,It,Gt,ue,we,Ne)},Qe.prototype.decompose=function(){var C=this.sx,et=this.shy,It=this.shx,Gt=this.sy,ue=this.tx,we=this.ty,Ne=Math.sqrt(C*C+et*et),He=(C/=Ne)*It+(et/=Ne)*Gt;It-=C*He,Gt-=et*He;var Je=Math.sqrt(It*It+Gt*Gt);return He/=Je,C*(Gt/=Je)<et*(It/=Je)&&(C=-C,et=-et,He=-He,Ne=-Ne),{scale:new Qe(Ne,0,0,Je,0,0),translate:new Qe(1,0,0,1,ue,we),rotate:new Qe(C,et,-et,C,0,0),skew:new Qe(1,0,He,1,0,0)}},Qe.prototype.toString=function(C){return this.join(" ")},Qe.prototype.inversed=function(){var C=this.sx,et=this.shy,It=this.shx,Gt=this.sy,ue=this.tx,we=this.ty,Ne=1/(C*Gt-et*It),He=Gt*Ne,Je=-et*Ne,on=-It*Ne,wn=C*Ne;return new Qe(He,Je,on,wn,-He*ue-on*we,-Je*ue-wn*we)},Qe.prototype.applyToPoint=function(C){var et=C.x*this.sx+C.y*this.shx+this.tx,It=C.x*this.shy+C.y*this.sy+this.ty;return new zo(et,It)},Qe.prototype.applyToRectangle=function(C){var et=this.applyToPoint(C),It=this.applyToPoint(new zo(C.x+C.w,C.y+C.h));return new Zr(et.x,et.y,It.x-et.x,It.y-et.y)},Qe.prototype.clone=function(){var C=this.sx,et=this.shy,It=this.shx,Gt=this.sy,ue=this.tx,we=this.ty;return new Qe(C,et,It,Gt,ue,we)},x.Matrix=Qe;var pi=x.matrixMult=function(C,et){return et.multiply(C)},hi=new Qe(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=hi;var Ki=function(C,et){if(!qi[C]){var It=(et instanceof Yl?"Sh":"P")+(Object.keys(je).length+1).toString(10);et.id=It,qi[C]=It,je[It]=et,Ke.publish("addPattern",et)}};x.ShadingPattern=Yl,x.TilingPattern=Tu,x.addShadingPattern=function(C,et){return gt("addShadingPattern()"),Ki(C,et),this},x.beginTilingPattern=function(C){gt("beginTilingPattern()"),Ia(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},x.endTilingPattern=function(C,et){gt("endTilingPattern()"),et.stream=Nt[it].join(`
`),Ki(C,et),Ke.publish("endTilingPattern",et),Re.pop().restore()};var Vn=x.__private__.newObject=function(){var C=qe();return Yi(C,!0),C},qe=x.__private__.newObjectDeferred=function(){return D++,q[D]=function(){return ct},D},Yi=function(C,et){return et=typeof et=="boolean"&&et,q[C]=ct,et&&J(C+" 0 obj"),C},Cs=x.__private__.newAdditionalObject=function(){var C={objId:qe(),content:""};return Et.push(C),C},kr=qe(),mr=qe(),or=x.__private__.decodeColorString=function(C){var et=C.split(" ");if(et.length!==2||et[1]!=="g"&&et[1]!=="G")et.length===5&&(et[4]==="k"||et[4]==="K")&&(et=[(1-et[0])*(1-et[3]),(1-et[1])*(1-et[3]),(1-et[2])*(1-et[3]),"r"]);else{var It=parseFloat(et[0]);et=[It,It,It,"r"]}for(var Gt="#",ue=0;ue<3;ue++)Gt+=("0"+Math.floor(255*parseFloat(et[ue])).toString(16)).slice(-2);return Gt},vr=x.__private__.encodeColorString=function(C){var et;typeof C=="string"&&(C={ch1:C});var It=C.ch1,Gt=C.ch2,ue=C.ch3,we=C.ch4,Ne=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof It=="string"&&It.charAt(0)!=="#"){var He=new K1(It);if(He.ok)It=He.toHex();else if(!/^\d*\.?\d*$/.test(It))throw new Error('Invalid color "'+It+'" passed to jsPDF.encodeColorString.')}if(typeof It=="string"&&/^#[0-9A-Fa-f]{3}$/.test(It)&&(It="#"+It[1]+It[1]+It[2]+It[2]+It[3]+It[3]),typeof It=="string"&&/^#[0-9A-Fa-f]{6}$/.test(It)){var Je=parseInt(It.substr(1),16);It=Je>>16&255,Gt=Je>>8&255,ue=255&Je}if(Gt===void 0||we===void 0&&It===Gt&&Gt===ue)if(typeof It=="string")et=It+" "+Ne[0];else switch(C.precision){case 2:et=zt(It/255)+" "+Ne[0];break;case 3:default:et=X(It/255)+" "+Ne[0]}else if(we===void 0||di(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return et=["1.","1.","1.",Ne[1]].join(" ");if(typeof It=="string")et=[It,Gt,ue,Ne[1]].join(" ");else switch(C.precision){case 2:et=[zt(It/255),zt(Gt/255),zt(ue/255),Ne[1]].join(" ");break;default:case 3:et=[X(It/255),X(Gt/255),X(ue/255),Ne[1]].join(" ")}}else if(typeof It=="string")et=[It,Gt,ue,we,Ne[2]].join(" ");else switch(C.precision){case 2:et=[zt(It),zt(Gt),zt(ue),zt(we),Ne[2]].join(" ");break;case 3:default:et=[X(It),X(Gt),X(ue),X(we),Ne[2]].join(" ")}return et},Vi=x.__private__.getFilters=function(){return l},ar=x.__private__.putStream=function(C){var et=(C=C||{}).data||"",It=C.filters||Vi(),Gt=C.alreadyAppliedFilters||[],ue=C.addLength1||!1,we=et.length,Ne=C.objectId,He=function(Fi){return Fi};if(b!==null&&Ne===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");b!==null&&(He=Ri.encryptor(Ne,0));var Je={};It===!0&&(It=["FlateEncode"]);var on=C.additionalKeyValues||[],wn=(Je=xn.API.processDataByFilters!==void 0?xn.API.processDataByFilters(et,It):{data:et,reverseChain:[]}).reverseChain+(Array.isArray(Gt)?Gt.join(" "):Gt.toString());if(Je.data.length!==0&&(on.push({key:"Length",value:Je.data.length}),ue===!0&&on.push({key:"Length1",value:we})),wn.length!=0)if(wn.split("/").length-1==1)on.push({key:"Filter",value:wn});else{on.push({key:"Filter",value:"["+wn+"]"});for(var On=0;On<on.length;On+=1)if(on[On].key==="DecodeParms"){for(var fi=[],$n=0;$n<Je.reverseChain.split("/").length-1;$n+=1)fi.push("null");fi.push(on[On].value),on[On].value="["+fi.join(" ")+"]"}}J("<<");for(var Kn=0;Kn<on.length;Kn++)J("/"+on[Kn].key+" "+on[Kn].value);J(">>"),Je.data.length!==0&&(J("stream"),J(He(Je.data)),J("endstream"))},jr=x.__private__.putPage=function(C){var et=C.number,It=C.data,Gt=C.objId,ue=C.contentsObjId;Yi(Gt,!0),J("<</Type /Page"),J("/Parent "+C.rootDictionaryObjId+" 0 R"),J("/Resources "+C.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(xt(C.mediaBox.bottomLeftX))+" "+parseFloat(xt(C.mediaBox.bottomLeftY))+" "+xt(C.mediaBox.topRightX)+" "+xt(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&J("/CropBox ["+xt(C.cropBox.bottomLeftX)+" "+xt(C.cropBox.bottomLeftY)+" "+xt(C.cropBox.topRightX)+" "+xt(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&J("/BleedBox ["+xt(C.bleedBox.bottomLeftX)+" "+xt(C.bleedBox.bottomLeftY)+" "+xt(C.bleedBox.topRightX)+" "+xt(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&J("/TrimBox ["+xt(C.trimBox.bottomLeftX)+" "+xt(C.trimBox.bottomLeftY)+" "+xt(C.trimBox.topRightX)+" "+xt(C.trimBox.topRightY)+"]"),C.artBox!==null&&J("/ArtBox ["+xt(C.artBox.bottomLeftX)+" "+xt(C.artBox.bottomLeftY)+" "+xt(C.artBox.topRightX)+" "+xt(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&J("/UserUnit "+C.userUnit),Ke.publish("putPage",{objId:Gt,pageContext:ln[et],pageNumber:et,page:It}),J("/Contents "+ue+" 0 R"),J(">>"),J("endobj");var we=It.join(`
`);return Y===Z.ADVANCED&&(we+=`
Q`),Yi(ue,!0),ar({data:we,filters:Vi(),objectId:ue}),J("endobj"),Gt},Ps=x.__private__.putPages=function(){var C,et,It=[];for(C=1;C<=In;C++)ln[C].objId=qe(),ln[C].contentsObjId=qe();for(C=1;C<=In;C++)It.push(jr({number:C,data:Nt[C],objId:ln[C].objId,contentsObjId:ln[C].contentsObjId,mediaBox:ln[C].mediaBox,cropBox:ln[C].cropBox,bleedBox:ln[C].bleedBox,trimBox:ln[C].trimBox,artBox:ln[C].artBox,userUnit:ln[C].userUnit,rootDictionaryObjId:kr,resourceDictionaryObjId:mr}));Yi(kr,!0),J("<</Type /Pages");var Gt="/Kids [";for(et=0;et<In;et++)Gt+=It[et]+" 0 R ";J(Gt+"]"),J("/Count "+In),J(">>"),J("endobj"),Ke.publish("postPutPages")},Gs=function(C){Ke.publish("putFont",{font:C,out:J,newObject:Vn,putStream:ar}),C.isAlreadyPutted!==!0&&(C.objectNumber=Vn(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Mu(C.postScriptName)),J("/Subtype /Type1"),typeof C.encoding=="string"&&J("/Encoding /"+C.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Ws=function(){for(var C in an)an.hasOwnProperty(C)&&(w===!1||w===!0&&S.hasOwnProperty(C))&&Gs(an[C])},Vr=function(C){C.objectNumber=Vn();var et=[];et.push({key:"Type",value:"/XObject"}),et.push({key:"Subtype",value:"/Form"}),et.push({key:"BBox",value:"["+[xt(C.x),xt(C.y),xt(C.x+C.width),xt(C.y+C.height)].join(" ")+"]"}),et.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var It=C.pages[1].join(`
`);ar({data:It,additionalKeyValues:et,objectId:C.objectNumber}),J("endobj")},us=function(){for(var C in Qn)Qn.hasOwnProperty(C)&&Vr(Qn[C])},ks=function(C,et){var It,Gt=[],ue=1/(et-1);for(It=0;It<1;It+=ue)Gt.push(It);if(Gt.push(1),C[0].offset!=0){var we={offset:0,color:C[0].color};C.unshift(we)}if(C[C.length-1].offset!=1){var Ne={offset:1,color:C[C.length-1].color};C.push(Ne)}for(var He="",Je=0,on=0;on<Gt.length;on++){for(It=Gt[on];It>C[Je+1].offset;)Je++;var wn=C[Je].offset,On=(It-wn)/(C[Je+1].offset-wn),fi=C[Je].color,$n=C[Je+1].color;He+=$(Math.round((1-On)*fi[0]+On*$n[0]).toString(16))+$(Math.round((1-On)*fi[1]+On*$n[1]).toString(16))+$(Math.round((1-On)*fi[2]+On*$n[2]).toString(16))}return He.trim()},na=function(C,et){et||(et=21);var It=Vn(),Gt=ks(C.colors,et),ue=[];ue.push({key:"FunctionType",value:"0"}),ue.push({key:"Domain",value:"[0.0 1.0]"}),ue.push({key:"Size",value:"["+et+"]"}),ue.push({key:"BitsPerSample",value:"8"}),ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ar({data:Gt,additionalKeyValues:ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:It}),J("endobj"),C.objectNumber=Vn(),J("<< /ShadingType "+C.type),J("/ColorSpace /DeviceRGB");var we="/Coords ["+xt(parseFloat(C.coords[0]))+" "+xt(parseFloat(C.coords[1]))+" ";C.type===2?we+=xt(parseFloat(C.coords[2]))+" "+xt(parseFloat(C.coords[3])):we+=xt(parseFloat(C.coords[2]))+" "+xt(parseFloat(C.coords[3]))+" "+xt(parseFloat(C.coords[4]))+" "+xt(parseFloat(C.coords[5])),J(we+="]"),C.matrix&&J("/Matrix ["+C.matrix.toString()+"]"),J("/Function "+It+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},ia=function(C,et){var It=qe(),Gt=Vn();et.push({resourcesOid:It,objectOid:Gt}),C.objectNumber=Gt;var ue=[];ue.push({key:"Type",value:"/Pattern"}),ue.push({key:"PatternType",value:"1"}),ue.push({key:"PaintType",value:"1"}),ue.push({key:"TilingType",value:"1"}),ue.push({key:"BBox",value:"["+C.boundingBox.map(xt).join(" ")+"]"}),ue.push({key:"XStep",value:xt(C.xStep)}),ue.push({key:"YStep",value:xt(C.yStep)}),ue.push({key:"Resources",value:It+" 0 R"}),C.matrix&&ue.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),ar({data:C.stream,additionalKeyValues:ue,objectId:C.objectNumber}),J("endobj")},Zs=function(C){var et;for(et in je)je.hasOwnProperty(et)&&(je[et]instanceof Yl?na(je[et]):je[et]instanceof Tu&&ia(je[et],C))},Do=function(C){for(var et in C.objectNumber=Vn(),J("<<"),C)switch(et){case"opacity":J("/ca "+zt(C[et]));break;case"stroke-opacity":J("/CA "+zt(C[et]))}J(">>"),J("endobj")},ra=function(){var C;for(C in Mn)Mn.hasOwnProperty(C)&&Do(Mn[C])},Ss=function(){for(var C in J("/XObject <<"),Qn)Qn.hasOwnProperty(C)&&Qn[C].objectNumber>=0&&J("/"+C+" "+Qn[C].objectNumber+" 0 R");Ke.publish("putXobjectDict"),J(">>")},Es=function(){Ri.oid=Vn(),J("<<"),J("/Filter /Standard"),J("/V "+Ri.v),J("/R "+Ri.r),J("/U <"+Ri.toHexString(Ri.U)+">"),J("/O <"+Ri.toHexString(Ri.O)+">"),J("/P "+Ri.P),J(">>"),J("endobj")},co=function(){for(var C in J("/Font <<"),an)an.hasOwnProperty(C)&&(w===!1||w===!0&&S.hasOwnProperty(C))&&J("/"+C+" "+an[C].objectNumber+" 0 R");J(">>")},No=function(){if(Object.keys(je).length>0){for(var C in J("/Shading <<"),je)je.hasOwnProperty(C)&&je[C]instanceof Yl&&je[C].objectNumber>=0&&J("/"+C+" "+je[C].objectNumber+" 0 R");Ke.publish("putShadingPatternDict"),J(">>")}},lr=function(C){if(Object.keys(je).length>0){for(var et in J("/Pattern <<"),je)je.hasOwnProperty(et)&&je[et]instanceof x.TilingPattern&&je[et].objectNumber>=0&&je[et].objectNumber<C&&J("/"+et+" "+je[et].objectNumber+" 0 R");Ke.publish("putTilingPatternDict"),J(">>")}},Dn=function(){if(Object.keys(Mn).length>0){var C;for(C in J("/ExtGState <<"),Mn)Mn.hasOwnProperty(C)&&Mn[C].objectNumber>=0&&J("/"+C+" "+Mn[C].objectNumber+" 0 R");Ke.publish("putGStateDict"),J(">>")}},mn=function(C){Yi(C.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),co(),No(),lr(C.objectOid),Dn(),Ss(),J(">>"),J("endobj")},bi=function(){var C=[];Ws(),ra(),us(),Zs(C),Ke.publish("putResources"),C.forEach(mn),mn({resourcesOid:mr,objectOid:Number.MAX_SAFE_INTEGER}),Ke.publish("postPutResources")},oi=function(){Ke.publish("putAdditionalObjects");for(var C=0;C<Et.length;C++){var et=Et[C];Yi(et.objId,!0),J(et.content),J("endobj")}Ke.publish("postPutAdditionalObjects")},mi=function(C){bn[C.fontName]=bn[C.fontName]||{},bn[C.fontName][C.fontStyle]=C.id},Zn=function(C,et,It,Gt,ue){var we={id:"F"+(Object.keys(an).length+1).toString(10),postScriptName:C,fontName:et,fontStyle:It,encoding:Gt,isStandardFont:ue||!1,metadata:{}};return Ke.publish("addFont",{font:we,instance:this}),an[we.id]=we,mi(we),we.id},pn=function(C){for(var et=0,It=Vt.length;et<It;et++){var Gt=Zn.call(this,C[et][0],C[et][1],C[et][2],Vt[et][3],!0);w===!1&&(S[Gt]=!0);var ue=C[et][0].split("-");mi({id:Gt,fontName:ue[0],fontStyle:ue[1]||""})}Ke.publish("addFonts",{fonts:an,dictionary:bn})},qn=function(C){return C.foo=function(){try{return C.apply(this,arguments)}catch(Gt){var et=Gt.stack||"";~et.indexOf(" at ")&&(et=et.split(" at ")[1]);var It="Error in function "+et.split(`
`)[0].split("<")[0]+": "+Gt.message;if(!Cn.console)throw new Error(It);Cn.console.error(It,Gt),Cn.alert&&alert(It)}},C.foo.bar=C,C.foo},As=function(C,et){var It,Gt,ue,we,Ne,He,Je,on,wn;if(ue=(et=et||{}).sourceEncoding||"Unicode",Ne=et.outputEncoding,(et.autoencode||Ne)&&an[Ge].metadata&&an[Ge].metadata[ue]&&an[Ge].metadata[ue].encoding&&(we=an[Ge].metadata[ue].encoding,!Ne&&an[Ge].encoding&&(Ne=an[Ge].encoding),!Ne&&we.codePages&&(Ne=we.codePages[0]),typeof Ne=="string"&&(Ne=we[Ne]),Ne)){for(Je=!1,He=[],It=0,Gt=C.length;It<Gt;It++)(on=Ne[C.charCodeAt(It)])?He.push(String.fromCharCode(on)):He.push(C[It]),He[It].charCodeAt(0)>>8&&(Je=!0);C=He.join("")}for(It=C.length;Je===void 0&&It!==0;)C.charCodeAt(It-1)>>8&&(Je=!0),It--;if(!Je)return C;for(He=et.noBOM?[]:[254,255],It=0,Gt=C.length;It<Gt;It++){if((wn=(on=C.charCodeAt(It))>>8)>>8)throw new Error("Character at position "+It+" of string '"+C+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");He.push(wn),He.push(on-(wn<<8))}return String.fromCharCode.apply(void 0,He)},Ji=x.__private__.pdfEscape=x.pdfEscape=function(C,et){return As(C,et).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ur=x.__private__.beginPage=function(C){Nt[++In]=[],ln[In]={objId:0,contentsObjId:0,userUnit:Number(f),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},Ms(In),vt(Nt[it])},il=function(C,et){var It,Gt,ue;switch(n=et||n,typeof C=="string"&&(It=N(C.toLowerCase()),Array.isArray(It)&&(Gt=It[0],ue=It[1])),Array.isArray(C)&&(Gt=C[0]*Oe,ue=C[1]*Oe),isNaN(Gt)&&(Gt=o[0],ue=o[1]),(Gt>14400||ue>14400)&&(vi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Gt=Math.min(14400,Gt),ue=Math.min(14400,ue)),o=[Gt,ue],n.substr(0,1)){case"l":ue>Gt&&(o=[ue,Gt]);break;case"p":Gt>ue&&(o=[ue,Gt])}ur(o),Fo(ua),J(Sr),fa!==0&&J(fa+" J"),Ii!==0&&J(Ii+" j"),Ke.publish("addPage",{pageNumber:In})},sa=function(C){C>0&&C<=In&&(Nt.splice(C,1),ln.splice(C,1),In--,it>In&&(it=In),this.setPage(it))},Ms=function(C){C>0&&C<=In&&(it=C)},wi=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Nt.length-1},Bs=function(C,et,It){var Gt,ue=void 0;return It=It||{},C=C!==void 0?C:an[Ge].fontName,et=et!==void 0?et:an[Ge].fontStyle,Gt=C.toLowerCase(),bn[Gt]!==void 0&&bn[Gt][et]!==void 0?ue=bn[Gt][et]:bn[C]!==void 0&&bn[C][et]!==void 0?ue=bn[C][et]:It.disableWarning===!1&&vi.warn("Unable to look up font label for font '"+C+"', '"+et+"'. Refer to getFontList() for available fonts."),ue||It.noFallback||(ue=bn.times[et])==null&&(ue=bn.times.normal),ue},Oo=x.__private__.putInfo=function(){var C=Vn(),et=function(Gt){return Gt};for(var It in b!==null&&(et=Ri.encryptor(C,0)),J("<<"),J("/Producer ("+Ji(et("jsPDF "+xn.version))+")"),Ue)Ue.hasOwnProperty(It)&&Ue[It]&&J("/"+It.substr(0,1).toUpperCase()+It.substr(1)+" ("+Ji(et(Ue[It]))+")");J("/CreationDate ("+Ji(et(A))+")"),J(">>"),J("endobj")},Ks=x.__private__.putCatalog=function(C){var et=(C=C||{}).rootDictionaryObjId||kr;switch(Vn(),J("<<"),J("/Type /Catalog"),J("/Pages "+et+" 0 R"),Rt||(Rt="fullwidth"),Rt){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var It=""+Rt;It.substr(It.length-1)==="%"&&(Rt=parseInt(Rt)/100),typeof Rt=="number"&&J("/OpenAction [3 0 R /XYZ null null "+zt(Rt)+"]")}switch(Kt||(Kt="continuous"),Kt){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}pe&&J("/PageMode /"+pe),Ke.publish("putCatalog"),J(">>"),J("endobj")},Ma=x.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(D+1)),J("/Root "+D+" 0 R"),J("/Info "+(D-1)+" 0 R"),b!==null&&J("/Encrypt "+Ri.oid+" 0 R"),J("/ID [ <"+H+"> <"+H+"> ]"),J(">>")},ho=x.__private__.putHeader=function(){J("%PDF-"+j),J("%ºß¬à")},Ba=x.__private__.putXRef=function(){var C="0000000000";J("xref"),J("0 "+(D+1)),J("0000000000 65535 f ");for(var et=1;et<=D;et++)typeof q[et]=="function"?J((C+q[et]()).slice(-10)+" 00000 n "):q[et]!==void 0?J((C+q[et]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},cs=x.__private__.buildDocument=function(){yt(),vt(dt),Ke.publish("buildDocument"),ho(),Ps(),oi(),bi(),b!==null&&Es(),Oo(),Ks();var C=ct;return Ba(),Ma(),J("startxref"),J(""+C),J("%%EOF"),vt(Nt[it]),dt.join(`
`)},Ys=x.__private__.getBlob=function(C){return new Blob([te(C)],{type:"application/pdf"})},fo=x.output=x.__private__.output=qn(function(C,et){switch(typeof(et=et||{})=="string"?et={filename:et}:et.filename=et.filename||"generated.pdf",C){case void 0:return cs();case"save":x.save(et.filename);break;case"arraybuffer":return te(cs());case"blob":return Ys(cs());case"bloburi":case"bloburl":if(Cn.URL!==void 0&&typeof Cn.URL.createObjectURL=="function")return Cn.URL&&Cn.URL.createObjectURL(Ys(cs()))||void 0;vi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var It="",Gt=cs();try{It=Md(Gt)}catch{It=Md(unescape(encodeURIComponent(Gt)))}return"data:application/pdf;filename="+et.filename+";base64,"+It;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Cn)==="[object Window]"){var ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';et.pdfObjectUrl&&(ue=et.pdfObjectUrl,we="");var Ne='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ue+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(et)+");<\/script></body></html>",He=Cn.open();return He!==null&&He.document.write(Ne),He}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Cn)==="[object Window]"){var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(et.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+et.filename+'" width="500px" height="400px" /></body></html>',on=Cn.open();if(on!==null){on.document.write(Je);var wn=this;on.document.documentElement.querySelector("#pdfViewer").onload=function(){on.document.title=et.filename,on.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(wn.output("bloburl"))}}return on}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Cn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var On='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",et)+'"></iframe></body></html>',fi=Cn.open();if(fi!==null&&(fi.document.write(On),fi.document.title=et.filename),fi||typeof safari>"u")return fi;break;case"datauri":case"dataurl":return Cn.document.location.href=this.output("datauristring",et);default:return null}}),oa=function(C){return Array.isArray(Ze)===!0&&Ze.indexOf(C)>-1};switch(i){case"pt":Oe=1;break;case"mm":Oe=72/25.4;break;case"cm":Oe=72/2.54;break;case"in":Oe=72;break;case"px":Oe=oa("px_scaling")==1?.75:96/72;break;case"pc":case"em":Oe=12;break;case"ex":Oe=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Oe=i}var Ri=null;ht(),z();var rl=function(C){return b!==null?Ri.encryptor(C,0):function(et){return et}},aa=x.__private__.getPageInfo=x.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ln[C].objId,pageNumber:C,pageContext:ln[C]}},Ln=x.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var et in ln)if(ln[et].objId===C)break;return aa(et)},Pn=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:ln[it].objId,pageNumber:it,pageContext:ln[it]}};x.addPage=function(){return il.apply(this,arguments),this},x.setPage=function(){return Ms.apply(this,arguments),vt.call(this,Nt[it]),this},x.insertPage=function(C){return this.addPage(),this.movePage(it,C),this},x.movePage=function(C,et){var It,Gt;if(C>et){It=Nt[C],Gt=ln[C];for(var ue=C;ue>et;ue--)Nt[ue]=Nt[ue-1],ln[ue]=ln[ue-1];Nt[et]=It,ln[et]=Gt,this.setPage(et)}else if(C<et){It=Nt[C],Gt=ln[C];for(var we=C;we<et;we++)Nt[we]=Nt[we+1],ln[we]=ln[we+1];Nt[et]=It,ln[et]=Gt,this.setPage(et)}return this},x.deletePage=function(){return sa.apply(this,arguments),this},x.__private__.text=x.text=function(C,et,It,Gt,ue){var we,Ne,He,Je,on,wn,On,fi,$n,Kn=(Gt=Gt||{}).scope||this;if(typeof C=="number"&&typeof et=="number"&&(typeof It=="string"||Array.isArray(It))){var Fi=It;It=et,et=C,C=Fi}if(arguments[3]instanceof Qe?(gt("The transform parameter of text() with a Matrix value"),$n=ue):(He=arguments[4],Je=arguments[5],di(On=arguments[3])==="object"&&On!==null||(typeof He=="string"&&(Je=He,He=null),typeof On=="string"&&(Je=On,On=null),typeof On=="number"&&(He=On,On=null),Gt={flags:On,angle:He,align:Je})),isNaN(et)||isNaN(It)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return Kn;var Bi="",Ur=!1,ni=typeof Gt.lineHeightFactor=="number"?Gt.lineHeightFactor:Io,_r=Kn.internal.scaleFactor;function al(ti){return ti=ti.split("	").join(Array(Gt.TabLen||9).join(" ")),Ji(ti,On)}function br(ti){for(var Yn,Si=ti.concat(),ii=[],ds=Si.length;ds--;)typeof(Yn=Si.shift())=="string"?ii.push(Yn):Array.isArray(ti)&&(Yn.length===1||Yn[1]===void 0&&Yn[2]===void 0)?ii.push(Yn[0]):ii.push([Yn[0],Yn[1],Yn[2]]);return ii}function ja(ti,Yn){var Si;if(typeof ti=="string")Si=Yn(ti)[0];else if(Array.isArray(ti)){for(var ii,ds,xo=ti.concat(),Is=[],ul=xo.length;ul--;)typeof(ii=xo.shift())=="string"?Is.push(Yn(ii)[0]):Array.isArray(ii)&&typeof ii[0]=="string"&&(ds=Yn(ii[0],ii[1],ii[2]),Is.push([ds[0],ds[1],ds[2]]));Si=Is}return Si}var hs=!1,za=!0;if(typeof C=="string")hs=!0;else if(Array.isArray(C)){var Qs=C.concat();Ne=[];for(var to,Ti=Qs.length;Ti--;)(typeof(to=Qs.shift())!="string"||Array.isArray(to)&&typeof to[0]!="string")&&(za=!1);hs=za}if(hs===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var ga=ee/Kn.internal.scaleFactor,Er=ga*(ni-1);switch(Gt.baseline){case"bottom":It-=Er;break;case"top":It+=ga-Er;break;case"hanging":It+=ga-2*Er;break;case"middle":It+=ga/2-Er}if((wn=Gt.maxWidth||0)>0&&(typeof C=="string"?C=Kn.splitTextToSize(C,wn):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(ti,Yn){return ti.concat(Kn.splitTextToSize(Yn,wn))},[]))),we={text:C,x:et,y:It,options:Gt,mutex:{pdfEscape:Ji,activeFontKey:Ge,fonts:an,activeFontSize:ee}},Ke.publish("preProcessText",we),C=we.text,He=(Gt=we.options).angle,!($n instanceof Qe)&&He&&typeof He=="number"){He*=Math.PI/180,Gt.rotationDirection===0&&(He=-He),Y===Z.ADVANCED&&(He=-He);var wr=Math.cos(He),ma=Math.sin(He);$n=new Qe(wr,ma,-ma,wr,0,0)}else He&&He instanceof Qe&&($n=He);Y!==Z.ADVANCED||$n||($n=hi),(on=Gt.charSpace||ha)!==void 0&&(Bi+=xt(W(on))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(fi=Gt.horizontalScale)!==void 0&&(Bi+=xt(100*fi)+` Tz
`),Gt.lang;var cr=-1,eo=Gt.renderingMode!==void 0?Gt.renderingMode:Gt.stroke,qr=Kn.internal.getCurrentPageInfo().pageContext;switch(eo){case 0:case!1:case"fill":cr=0;break;case 1:case!0:case"stroke":cr=1;break;case 2:case"fillThenStroke":cr=2;break;case 3:case"invisible":cr=3;break;case 4:case"fillAndAddForClipping":cr=4;break;case 5:case"strokeAndAddPathForClipping":cr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":cr=6;break;case 7:case"addToPathForClipping":cr=7}var ll=qr.usedRenderingMode!==void 0?qr.usedRenderingMode:-1;cr!==-1?Bi+=cr+` Tr
`:ll!==-1&&(Bi+=`0 Tr
`),cr!==-1&&(qr.usedRenderingMode=cr),Je=Gt.align||"left";var ji,Ds=ee*ni,Kr=Kn.internal.pageSize.getWidth(),qo=an[Ge];on=Gt.charSpace||ha,wn=Gt.maxWidth||0,On=Object.assign({autoencode:!0,noBOM:!0},Gt.flags);var no=[],Ns=function(ti){return Kn.getStringUnitWidth(ti,{font:qo,charSpace:on,fontSize:ee,doKerning:!1})*ee/_r};if(Object.prototype.toString.call(C)==="[object Array]"){var Xi;Ne=br(C),Je!=="left"&&(ji=Ne.map(Ns));var Hi,fs=0;if(Je==="right"){et-=ji[0],C=[],Ti=Ne.length;for(var Ar=0;Ar<Ti;Ar++)Ar===0?(Hi=hn(et),Xi=yr(It)):(Hi=W(fs-ji[Ar]),Xi=-Ds),C.push([Ne[Ar],Hi,Xi]),fs=ji[Ar]}else if(Je==="center"){et-=ji[0]/2,C=[],Ti=Ne.length;for(var Yr=0;Yr<Ti;Yr++)Yr===0?(Hi=hn(et),Xi=yr(It)):(Hi=W((fs-ji[Yr])/2),Xi=-Ds),C.push([Ne[Yr],Hi,Xi]),fs=ji[Yr]}else if(Je==="left"){C=[],Ti=Ne.length;for(var io=0;io<Ti;io++)C.push(Ne[io])}else if(Je==="justify"&&qo.encoding==="Identity-H"){C=[],Ti=Ne.length,wn=wn!==0?wn:Kr;for(var Jr=0,xi=0;xi<Ti;xi++)if(Xi=xi===0?yr(It):-Ds,Hi=xi===0?hn(et):Jr,xi<Ti-1){var Os=W((wn-ji[xi])/(Ne[xi].split(" ").length-1)),xr=Ne[xi].split(" ");C.push([xr[0]+" ",Hi,Xi]),Jr=0;for(var hr=1;hr<xr.length;hr++){var $o=(Ns(xr[hr-1]+" "+xr[hr])-Ns(xr[hr]))*_r+Os;hr==xr.length-1?C.push([xr[hr],$o,0]):C.push([xr[hr]+" ",$o,0]),Jr-=$o}}else C.push([Ne[xi],Hi,Xi]);C.push(["",Jr,0])}else{if(Je!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Ti=Ne.length,wn=wn!==0?wn:Kr,xi=0;xi<Ti;xi++)Xi=xi===0?yr(It):-Ds,Hi=xi===0?hn(et):0,xi<Ti-1?no.push(xt(W((wn-ji[xi])/(Ne[xi].split(" ").length-1)))):no.push(0),C.push([Ne[xi],Hi,Xi])}}var Ua=typeof Gt.R2L=="boolean"?Gt.R2L:ie;Ua===!0&&(C=ja(C,function(ti,Yn,Si){return[ti.split("").reverse().join(""),Yn,Si]})),we={text:C,x:et,y:It,options:Gt,mutex:{pdfEscape:Ji,activeFontKey:Ge,fonts:an,activeFontSize:ee}},Ke.publish("postProcessText",we),C=we.text,Ur=we.mutex.isHex||!1;var qa=an[Ge].encoding;qa!=="WinAnsiEncoding"&&qa!=="StandardEncoding"||(C=ja(C,function(ti,Yn,Si){return[al(ti),Yn,Si]})),Ne=br(C),C=[];for(var fr,Mr,_o,Rs=0,va=1,bo=Array.isArray(Ne[0])?va:Rs,wo="",ro=function(ti,Yn,Si){var ii="";return Si instanceof Qe?(Si=typeof Gt.angle=="number"?pi(Si,new Qe(1,0,0,1,ti,Yn)):pi(new Qe(1,0,0,1,ti,Yn),Si),Y===Z.ADVANCED&&(Si=pi(new Qe(1,0,0,-1,0,0),Si)),ii=Si.join(" ")+` Tm
`):ii=xt(ti)+" "+xt(Yn)+` Td
`,ii},Xr=0;Xr<Ne.length;Xr++){switch(wo="",bo){case va:_o=(Ur?"<":"(")+Ne[Xr][0]+(Ur?">":")"),fr=parseFloat(Ne[Xr][1]),Mr=parseFloat(Ne[Xr][2]);break;case Rs:_o=(Ur?"<":"(")+Ne[Xr]+(Ur?">":")"),fr=hn(et),Mr=yr(It)}no!==void 0&&no[Xr]!==void 0&&(wo=no[Xr]+` Tw
`),Xr===0?C.push(wo+ro(fr,Mr,$n)+_o):bo===Rs?C.push(wo+_o):bo===va&&C.push(wo+ro(fr,Mr,$n)+_o)}C=bo===Rs?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var Qi=`BT
/`;return Qi+=Ge+" "+ee+` Tf
`,Qi+=xt(ee*ni)+` TL
`,Qi+=Ts+`
`,Qi+=Bi,Qi+=C,J(Qi+="ET"),S[Ge]=!0,Kn};var Hr=x.__private__.clip=x.clip=function(C){return J(C==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Hr("evenodd")},x.__private__.discardPath=x.discardPath=function(){return J("n"),this};var Fn=x.__private__.isValidStyle=function(C){var et=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(et=!0),et};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(C){return Fn(C)&&(v=C),this};var Ta=x.__private__.getStyle=x.getStyle=function(C){var et=v;switch(C){case"D":case"S":et="S";break;case"F":et="f";break;case"FD":case"DF":et="B";break;case"f":case"f*":case"B":case"B*":et=C}return et},la=x.close=function(){return J("h"),this};x.stroke=function(){return J("S"),this},x.fill=function(C){return po("f",C),this},x.fillEvenOdd=function(C){return po("f*",C),this},x.fillStroke=function(C){return po("B",C),this},x.fillStrokeEvenOdd=function(C){return po("B*",C),this};var po=function(C,et){di(et)==="object"?Da(et,C):J(C)},Gr=function(C){C===null||Y===Z.ADVANCED&&C===void 0||(C=Ta(C),J(C))};function Js(C,et,It,Gt,ue){var we=new Tu(et||this.boundingBox,It||this.xStep,Gt||this.yStep,this.gState,ue||this.matrix);we.stream=this.stream;var Ne=C+"$$"+this.cloneIndex+++"$$";return Ki(Ne,we),we}var Da=function(C,et){var It=qi[C.key],Gt=je[It];if(Gt instanceof Yl)J("q"),J(Ro(et)),Gt.gState&&x.setGState(Gt.gState),J(C.matrix.toString()+" cm"),J("/"+It+" sh"),J("Q");else if(Gt instanceof Tu){var ue=new Qe(1,0,0,-1,0,yo());C.matrix&&(ue=ue.multiply(C.matrix||hi),It=Js.call(Gt,C.key,C.boundingBox,C.xStep,C.yStep,ue).id),J("q"),J("/Pattern cs"),J("/"+It+" scn"),Gt.gState&&x.setGState(Gt.gState),J(et),J("Q")}},Ro=function(C){switch(C){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Pi=x.moveTo=function(C,et){return J(xt(W(C))+" "+xt(Mt(et))+" m"),this},zr=x.lineTo=function(C,et){return J(xt(W(C))+" "+xt(Mt(et))+" l"),this},Xs=x.curveTo=function(C,et,It,Gt,ue,we){return J([xt(W(C)),xt(Mt(et)),xt(W(It)),xt(Mt(Gt)),xt(W(ue)),xt(Mt(we)),"c"].join(" ")),this};x.__private__.line=x.line=function(C,et,It,Gt,ue){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Gt)||!Fn(ue))throw new Error("Invalid arguments passed to jsPDF.line");return Y===Z.COMPAT?this.lines([[It-C,Gt-et]],C,et,[1,1],ue||"S"):this.lines([[It-C,Gt-et]],C,et,[1,1]).stroke()},x.__private__.lines=x.lines=function(C,et,It,Gt,ue,we){var Ne,He,Je,on,wn,On,fi,$n,Kn,Fi,Bi,Ur;if(typeof C=="number"&&(Ur=It,It=et,et=C,C=Ur),Gt=Gt||[1,1],we=we||!1,isNaN(et)||isNaN(It)||!Array.isArray(C)||!Array.isArray(Gt)||!Fn(ue)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pi(et,It),Ne=Gt[0],He=Gt[1],on=C.length,Fi=et,Bi=It,Je=0;Je<on;Je++)(wn=C[Je]).length===2?(Fi=wn[0]*Ne+Fi,Bi=wn[1]*He+Bi,zr(Fi,Bi)):(On=wn[0]*Ne+Fi,fi=wn[1]*He+Bi,$n=wn[2]*Ne+Fi,Kn=wn[3]*He+Bi,Fi=wn[4]*Ne+Fi,Bi=wn[5]*He+Bi,Xs(On,fi,$n,Kn,Fi,Bi));return we&&la(),Gr(ue),this},x.path=function(C){for(var et=0;et<C.length;et++){var It=C[et],Gt=It.c;switch(It.op){case"m":Pi(Gt[0],Gt[1]);break;case"l":zr(Gt[0],Gt[1]);break;case"c":Xs.apply(this,Gt);break;case"h":la()}}return this},x.__private__.rect=x.rect=function(C,et,It,Gt,ue){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Gt)||!Fn(ue))throw new Error("Invalid arguments passed to jsPDF.rect");return Y===Z.COMPAT&&(Gt=-Gt),J([xt(W(C)),xt(Mt(et)),xt(W(It)),xt(W(Gt)),"re"].join(" ")),Gr(ue),this},x.__private__.triangle=x.triangle=function(C,et,It,Gt,ue,we,Ne){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Gt)||isNaN(ue)||isNaN(we)||!Fn(Ne))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[It-C,Gt-et],[ue-It,we-Gt],[C-ue,et-we]],C,et,[1,1],Ne,!0),this},x.__private__.roundedRect=x.roundedRect=function(C,et,It,Gt,ue,we,Ne){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Gt)||isNaN(ue)||isNaN(we)||!Fn(Ne))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var He=4/3*(Math.SQRT2-1);return ue=Math.min(ue,.5*It),we=Math.min(we,.5*Gt),this.lines([[It-2*ue,0],[ue*He,0,ue,we-we*He,ue,we],[0,Gt-2*we],[0,we*He,-ue*He,we,-ue,we],[2*ue-It,0],[-ue*He,0,-ue,-we*He,-ue,-we],[0,2*we-Gt],[0,-we*He,ue*He,-we,ue,-we]],C+ue,et,[1,1],Ne,!0),this},x.__private__.ellipse=x.ellipse=function(C,et,It,Gt,ue){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Gt)||!Fn(ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*It,Ne=4/3*(Math.SQRT2-1)*Gt;return Pi(C+It,et),Xs(C+It,et-Ne,C+we,et-Gt,C,et-Gt),Xs(C-we,et-Gt,C-It,et-Ne,C-It,et),Xs(C-It,et+Ne,C-we,et+Gt,C,et+Gt),Xs(C+we,et+Gt,C+It,et+Ne,C+It,et),Gr(ue),this},x.__private__.circle=x.circle=function(C,et,It,Gt){if(isNaN(C)||isNaN(et)||isNaN(It)||!Fn(Gt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,et,It,It,Gt)},x.setFont=function(C,et,It){return It&&(et=Dt(et,It)),Ge=Bs(C,et,{disableWarning:!1}),this};var sl=x.__private__.getFont=x.getFont=function(){return an[Bs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var C,et,It={};for(C in bn)if(bn.hasOwnProperty(C))for(et in It[C]=[],bn[C])bn[C].hasOwnProperty(et)&&It[C].push(et);return It},x.addFont=function(C,et,It,Gt,ue){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?ue=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(It=Dt(It,Gt)),ue=ue||"Identity-H",Zn.call(this,C,et,It,ue)};var Io,ua=t.lineWidth||.200025,go=x.__private__.getLineWidth=x.getLineWidth=function(){return ua},Fo=x.__private__.setLineWidth=x.setLineWidth=function(C){return ua=C,J(xt(W(C))+" w"),this};x.__private__.setLineDash=xn.API.setLineDash=xn.API.setLineDashPattern=function(C,et){if(C=C||[],et=et||0,isNaN(et)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(It){return xt(W(It))}).join(" "),et=xt(W(et)),J("["+C+"] "+et+" d"),this};var Na=x.__private__.getLineHeight=x.getLineHeight=function(){return ee*Io};x.__private__.getLineHeight=x.getLineHeight=function(){return ee*Io};var Nn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(Io=C),this},Oa=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Io};Nn(t.lineHeight);var hn=x.__private__.getHorizontalCoordinate=function(C){return W(C)},yr=x.__private__.getVerticalCoordinate=function(C){return Y===Z.ADVANCED?C:ln[it].mediaBox.topRightY-ln[it].mediaBox.bottomLeftY-W(C)},jo=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(C){return xt(hn(C))},mo=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(C){return xt(yr(C))},Sr=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return or(Sr)},x.__private__.setStrokeColor=x.setDrawColor=function(C,et,It,Gt){return Sr=vr({ch1:C,ch2:et,ch3:It,ch4:Gt,pdfColorType:"draw",precision:2}),J(Sr),this};var Ra=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return or(Ra)},x.__private__.setFillColor=x.setFillColor=function(C,et,It,Gt){return Ra=vr({ch1:C,ch2:et,ch3:It,ch4:Gt,pdfColorType:"fill",precision:2}),J(Ra),this};var Ts=t.textColor||"0 g",ca=x.__private__.getTextColor=x.getTextColor=function(){return or(Ts)};x.__private__.setTextColor=x.setTextColor=function(C,et,It,Gt){return Ts=vr({ch1:C,ch2:et,ch3:It,ch4:Gt,pdfColorType:"text",precision:3}),this};var ha=t.charSpace,Wr=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(ha||0)};x.__private__.setCharSpace=x.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ha=C,this};var fa=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(C){var et=x.CapJoinStyles[C];if(et===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fa=et,J(et+" J"),this};var Ii=0;x.__private__.setLineJoin=x.setLineJoin=function(C){var et=x.CapJoinStyles[C];if(et===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ii=et,J(et+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(xt(W(C))+" M"),this},x.GState=Oh,x.setGState=function(C){(C=typeof C=="string"?Mn[ci[C]]:ol(null,C)).equals(gi)||(J("/"+C.id+" gs"),gi=C)};var ol=function(C,et){if(!C||!ci[C]){var It=!1;for(var Gt in Mn)if(Mn.hasOwnProperty(Gt)&&Mn[Gt].equals(et)){It=!0;break}if(It)et=Mn[Gt];else{var ue="GS"+(Object.keys(Mn).length+1).toString(10);Mn[ue]=et,et.id=ue}return C&&(ci[C]=et.id),Ke.publish("addGState",et),et}};x.addGState=function(C,et){return ol(C,et),this},x.saveGraphicsState=function(){return J("q"),Un.push({key:Ge,size:ee,color:Ts}),this},x.restoreGraphicsState=function(){J("Q");var C=Un.pop();return Ge=C.key,ee=C.size,Ts=C.color,gi=null,this},x.setCurrentTransformationMatrix=function(C){return J(C.toString()+" cm"),this},x.comment=function(C){return J("#"+C),this};var zo=function(C,et){var It=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return It},set:function(we){isNaN(we)||(It=parseFloat(we))}});var Gt=et||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Gt},set:function(we){isNaN(we)||(Gt=parseFloat(we))}});var ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ue},set:function(we){ue=we.toString()}}),this},Zr=function(C,et,It,Gt){zo.call(this,C,et),this.type="rect";var ue=It||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ue},set:function(Ne){isNaN(Ne)||(ue=parseFloat(Ne))}});var we=Gt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Ne){isNaN(Ne)||(we=parseFloat(Ne))}}),this},da=function(){this.page=In,this.currentPage=it,this.pages=Nt.slice(0),this.pagesContext=ln.slice(0),this.x=Sn,this.y=tn,this.matrix=si,this.width=vo(it),this.height=yo(it),this.outputDestination=tt,this.id="",this.objectNumber=-1};da.prototype.restore=function(){In=this.page,it=this.currentPage,ln=this.pagesContext,Nt=this.pages,Sn=this.x,tn=this.y,si=this.matrix,Uo(it,this.width),ki(it,this.height),tt=this.outputDestination};var Ia=function(C,et,It,Gt,ue){Re.push(new da),In=it=0,Nt=[],Sn=C,tn=et,si=ue,ur([It,Gt])},Fa=function(C){if($i[C])Re.pop().restore();else{var et=new da,It="Xo"+(Object.keys(Qn).length+1).toString(10);et.id=It,$i[C]=It,Qn[It]=et,Ke.publish("addFormObject",et),Re.pop().restore()}};for(var pa in x.beginFormObject=function(C,et,It,Gt,ue){return Ia(C,et,It,Gt,ue),this},x.endFormObject=function(C){return Fa(C),this},x.doFormObject=function(C,et){var It=Qn[$i[C]];return J("q"),J(et.toString()+" cm"),J("/"+It.id+" Do"),J("Q"),this},x.getFormObject=function(C){var et=Qn[$i[C]];return{x:et.x,y:et.y,width:et.width,height:et.height,matrix:et.matrix}},x.save=function(C,et){return C=C||"generated.pdf",(et=et||{}).returnPromise=et.returnPromise||!1,et.returnPromise===!1?(Zl(Ys(cs()),C),typeof Zl.unload=="function"&&Cn.setTimeout&&setTimeout(Zl.unload,911),this):new Promise(function(It,Gt){try{var ue=Zl(Ys(cs()),C);typeof Zl.unload=="function"&&Cn.setTimeout&&setTimeout(Zl.unload,911),It(ue)}catch(we){Gt(we.message)}})},xn.API)xn.API.hasOwnProperty(pa)&&(pa==="events"&&xn.API.events.length?function(C,et){var It,Gt,ue;for(ue=et.length-1;ue!==-1;ue--)It=et[ue][0],Gt=et[ue][1],C.subscribe.apply(C,[It].concat(typeof Gt=="function"?[Gt]:Gt))}(Ke,xn.API.events):x[pa]=xn.API[pa]);var vo=x.getPageWidth=function(C){return(ln[C=C||it].mediaBox.topRightX-ln[C].mediaBox.bottomLeftX)/Oe},Uo=x.setPageWidth=function(C,et){ln[C].mediaBox.topRightX=et*Oe+ln[C].mediaBox.bottomLeftX},yo=x.getPageHeight=function(C){return(ln[C=C||it].mediaBox.topRightY-ln[C].mediaBox.bottomLeftY)/Oe},ki=x.setPageHeight=function(C,et){ln[C].mediaBox.topRightY=et*Oe+ln[C].mediaBox.bottomLeftY};return x.internal={pdfEscape:Ji,getStyle:Ta,getFont:sl,getFontSize:Ot,getCharSpace:Wr,getTextColor:ca,getLineHeight:Na,getLineHeightFactor:Oa,getLineWidth:go,write:qt,getHorizontalCoordinate:hn,getVerticalCoordinate:yr,getCoordinateString:jo,getVerticalCoordinateString:mo,collections:{},newObject:Vn,newAdditionalObject:Cs,newObjectDeferred:qe,newObjectDeferredBegin:Yi,getFilters:Vi,putStream:ar,events:Ke,scaleFactor:Oe,pageSize:{getWidth:function(){return vo(it)},setWidth:function(C){Uo(it,C)},getHeight:function(){return yo(it)},setHeight:function(C){ki(it,C)}},encryptionOptions:b,encryption:Ri,getEncryptor:rl,output:fo,getNumberOfPages:wi,pages:Nt,out:J,f2:zt,f3:X,getPageInfo:aa,getPageInfoByObjId:Ln,getCurrentPageInfo:Pn,getPDFVersion:R,Point:zo,Rectangle:Zr,Matrix:Qe,hasHotfix:oa},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return vo(it)},set:function(C){Uo(it,C)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return yo(it)},set:function(C){ki(it,C)},enumerable:!0,configurable:!0}),pn.call(x,Vt),Ge="F1",il(o,n),Ke.publish("initialized"),x}Au.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Au.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Au.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Au.prototype.processOwnerPassword=function(t,e){return Td(Bd(e).substr(0,5),t)},Au.prototype.encryptor=function(t,e){var n=Bd(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return Td(n,i)}},Oh.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||di(t)!==di(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},xn.API={events:[]},xn.version="3.0.0";var Wi=xn.API,lp=1,cu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},En=function(t){return t.toFixed(2)},bl=function(t){return t.toFixed(5)};Wi.__acroform__={};var Hs=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},ug=function(t){return t*lp},wa=function(t){var e=new Q1,n=rn.internal.getHeight(t)||0,i=rn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(En(i)),Number(En(n))],e},$L=Wi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},VL=Wi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},HL=Wi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},tr=Wi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return HL(t,e-1)},er=Wi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $L(t,e-1)},nr=Wi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return VL(t,e-1)},GL=Wi.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,o=t[0],a=t[1],l=t[2],f=t[3],p={};return p.lowerLeft_X=n(o)||0,p.lowerLeft_Y=i(a+f)||0,p.upperRight_X=n(o+l)||0,p.upperRight_Y=i(a)||0,[Number(En(p.lowerLeft_X)),Number(En(p.lowerLeft_Y)),Number(En(p.upperRight_X)),Number(En(p.upperRight_Y))]},WL=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=Dd(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+En(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=wa(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},Dd=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map(function(X){return X.split(`
`)}):o.map(function(X){return[X]});var a=n,l=rn.internal.getHeight(t)||0;l=l<0?-l:l;var f=rn.internal.getWidth(t)||0;f=f<0?-f:f;var p=function(X,W,St){if(X+1<o.length){var Mt=W+" "+o[X+1][0];return ih(Mt,t,St).width<=f-4}return!1};a++;t:for(;a>0;){e="",a--;var v,b,w=ih("3",t,a).height,S=t.multiline?l-a:(l-w)/2,x=S+=2,j=0,R=0,U=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+ih(e,t,a=12).width+", FieldWidth:"+f+`
`;break}for(var N="",Z=0,Y=0;Y<o.length;Y++)if(o.hasOwnProperty(Y)){var kt=!1;if(o[Y].length!==1&&U!==o[Y].length-1){if((w+2)*(Z+2)+2>l)continue t;N+=o[Y][U],kt=!0,R=Y,Y--}else{N=(N+=o[Y][U]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var At=parseInt(Y),Dt=p(At,N,a),xt=Y>=o.length-1;if(Dt&&!xt){N+=" ",U=0;continue}if(Dt||xt){if(xt)R=At;else if(t.multiline&&(w+2)*(Z+2)+2>l)continue t}else{if(!t.multiline||(w+2)*(Z+2)+2>l)continue t;R=At}}for(var gt="",_t=j;_t<=R;_t++){var zt=o[_t];if(t.multiline){if(_t===R){gt+=zt[U]+" ",U=(U+1)%zt.length;continue}if(_t===j){gt+=zt[zt.length-1]+" ";continue}}gt+=zt[0]+" "}switch(gt=gt.substr(gt.length-1)==" "?gt.substr(0,gt.length-1):gt,b=ih(gt,t,a).width,t.textAlign){case"right":v=f-b-2;break;case"center":v=(f-b)/2;break;case"left":default:v=2}e+=En(v)+" "+En(x)+` Td
`,e+="("+cu(gt)+`) Tj
`,e+=-En(v)+` 0 Td
`,x=-(a+2),b=0,j=kt?R:R+1,Z++,N=""}break}return i.text=e,i.fontSize=a,i},ih=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},ZL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},KL=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},YL=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,o=t[n];e.internal.newObjectDeferredBegin(o.objId,!0),di(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[i]}},JL=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ta.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(ZL)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");lp=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new tv,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];a.objId=void 0,a.hasAnnotation&&KL(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,o){var a=!i;for(var l in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var f=i[l],p=[],v=f.Rect;if(f.Rect&&(f.Rect=GL(f.Rect,o)),o.internal.newObjectDeferredBegin(f.objId,!0),f.DA=rn.createDefaultAppearanceStream(f),di(f)==="object"&&typeof f.getKeyValueListForStream=="function"&&(p=f.getKeyValueListForStream()),f.Rect=v,f.hasAppearanceStream&&!f.appearanceStreamContent){var b=WL(f);p.push({key:"AP",value:"<</N "+b+">>"}),o.internal.acroformPlugin.xForms.push(b)}if(f.appearanceStreamContent){var w="";for(var S in f.appearanceStreamContent)if(f.appearanceStreamContent.hasOwnProperty(S)){var x=f.appearanceStreamContent[S];if(w+="/"+S+" ",w+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var j=x[l];typeof j=="function"&&(j=j.call(o,f)),w+="/"+l+" "+j+" ",o.internal.acroformPlugin.xForms.indexOf(j)>=0||o.internal.acroformPlugin.xForms.push(j)}}else typeof(j=x)=="function"&&(j=j.call(o,f)),w+="/"+l+" "+j,o.internal.acroformPlugin.xForms.indexOf(j)>=0||o.internal.acroformPlugin.xForms.push(j);w+=">>"}p.push({key:"AP",value:`<<
`+w+">>"})}o.internal.putStream({additionalKeyValues:p,objectId:f.objId}),o.internal.out("endobj")}a&&YL(o.internal.acroformPlugin.xForms,o)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},X1=Wi.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(l){return l};if(Array.isArray(t)){for(var o="[",a=0;a<t.length;a++)switch(a!==0&&(o+=" "),di(t[a])){case"boolean":case"number":case"object":o+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),o+="("+cu(i(t[a].toString()))+")"):o+=t[a].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Wf=function(t,e,n){var i=function(o){return o};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+cu(i(t))+")"},Ca=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ca.prototype.toString=function(){return this.objId+" 0 R"},Ca.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ca.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],o=this[i];o&&(Array.isArray(o)?t.push({key:i,value:X1(o,this.objId,this.scope)}):o instanceof Ca?(o.scope=this.scope,t.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:i,value:o}))}return t};var Q1=function(){Ca.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Hs(Q1,Ca);var tv=function(){Ca.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+cu(n(t))+")"}},set:function(n){t=n}})};Hs(tv,Ca);var ta=function t(){Ca.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!tr(e,3)},set:function(N){N?this.F=er(e,3):this.F=nr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');n=N}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(N){i=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(N){i[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(N){i[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(N){i[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(N){i[3]=N}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Rh)return;a="FieldObject"+t.FieldNum++}var N=function(Z){return Z};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+cu(N(a))+")"},set:function(N){a=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(N){a=N}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var f="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return f},set:function(N){f=N}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(N){p=N}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/lp:v},set:function(N){v=N}});var b="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return b},set:function(N){b=N}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof Rh||this instanceof ru))return Wf(w,this.objId,this.scope)},set:function(N){N=N.toString(),w=N}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Or?S:Wf(S,this.objId,this.scope)},set:function(N){N=N.toString(),S=this instanceof Or?N:N.substr(0,1)==="("?xu(N.substr(1,N.length-2)):xu(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Or?xu(S.substr(1,S.length-1)):S},set:function(N){N=N.toString(),S=this instanceof Or?"/"+N:N}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Or?x:Wf(x,this.objId,this.scope)},set:function(N){N=N.toString(),x=this instanceof Or?N:N.substr(0,1)==="("?xu(N.substr(1,N.length-2)):xu(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Or?xu(x.substr(1,x.length-1)):x},set:function(N){N=N.toString(),x=this instanceof Or?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(N){N=!!N,R=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(N){j=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,1)},set:function(N){N?this.Ff=er(this.Ff,1):this.Ff=nr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,2)},set:function(N){N?this.Ff=er(this.Ff,2):this.Ff=nr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,3)},set:function(N){N?this.Ff=er(this.Ff,3):this.Ff=nr(this.Ff,3)}});var U=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(U!==null)return U},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');U=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(U){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:U=2;break;case"center":case 1:U=1;break;case"left":case 0:default:U=0}}})};Hs(ta,Ca);var Ru=function(){ta.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return X1(e,this.objId,this.scope)},set:function(n){var i,o;o=[],typeof(i=n)=="string"&&(o=function(a,l,f){f||(f=1);for(var p,v=[];p=l.exec(a);)v.push(p[f]);return v}(i,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,18)},set:function(n){n?this.Ff=er(this.Ff,18):this.Ff=nr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=er(this.Ff,19):this.Ff=nr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,20)},set:function(n){n?(this.Ff=er(this.Ff,20),e.sort()):this.Ff=nr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,22)},set:function(n){n?this.Ff=er(this.Ff,22):this.Ff=nr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,23)},set:function(n){n?this.Ff=er(this.Ff,23):this.Ff=nr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,27)},set:function(n){n?this.Ff=er(this.Ff,27):this.Ff=nr(this.Ff,27)}}),this.hasAppearanceStream=!1};Hs(Ru,ta);var Iu=function(){Ru.call(this),this.fontName="helvetica",this.combo=!1};Hs(Iu,Ru);var Fu=function(){Iu.call(this),this.combo=!0};Hs(Fu,Iu);var mh=function(){Fu.call(this),this.edit=!0};Hs(mh,Fu);var Or=function(){ta.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,15)},set:function(n){n?this.Ff=er(this.Ff,15):this.Ff=nr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,16)},set:function(n){n?this.Ff=er(this.Ff,16):this.Ff=nr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,17)},set:function(n){n?this.Ff=er(this.Ff,17):this.Ff=nr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,26)},set:function(n){n?this.Ff=er(this.Ff,26):this.Ff=nr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,o=[];for(i in o.push("<<"),e)o.push("/"+i+" ("+cu(n(e[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){di(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Hs(Or,ta);var vh=function(){Or.call(this),this.pushButton=!0};Hs(vh,Or);var ju=function(){Or.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Hs(ju,Or);var Rh=function(){var t,e;ta.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(f){return f};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,l=[];for(a in l.push("<<"),i)l.push("/"+a+" ("+cu(o(i[a]))+")");return l.push(">>"),l.join(`
`)},set:function(o){di(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Hs(Rh,ta),ju.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},ju.prototype.createOption=function(t){var e=new Rh;return e.Parent=this,e.optionName=t,this.Kids.push(e),XL.call(this.scope,e),e};var yh=function(){Or.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rn.CheckBox.createAppearanceStream()};Hs(yh,Or);var ru=function(){ta.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,13)},set:function(e){e?this.Ff=er(this.Ff,13):this.Ff=nr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,21)},set:function(e){e?this.Ff=er(this.Ff,21):this.Ff=nr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,23)},set:function(e){e?this.Ff=er(this.Ff,23):this.Ff=nr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,24)},set:function(e){e?this.Ff=er(this.Ff,24):this.Ff=nr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,25)},set:function(e){e?this.Ff=er(this.Ff,25):this.Ff=nr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,26)},set:function(e){e?this.Ff=er(this.Ff,26):this.Ff=nr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Hs(ru,ta);var _h=function(){ru.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!tr(this.Ff,14)},set:function(t){t?this.Ff=er(this.Ff,14):this.Ff=nr(this.Ff,14)}}),this.password=!0};Hs(_h,ru);var rn={CheckBox:{createAppearanceStream:function(){return{N:{On:rn.CheckBox.YesNormal},D:{On:rn.CheckBox.YesPushDown,Off:rn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),a=Dd(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+En(rn.internal.getWidth(t))+" "+En(rn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+En(a.fontSize)+" Tf "+o),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=wa(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=[],a=rn.internal.getHeight(t),l=rn.internal.getWidth(t),f=Dd(t,t.caption);return o.push("1 g"),o.push("0 0 "+En(l)+" "+En(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+En(l-1)+" "+En(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+En(f.fontSize)+" Tf "+i),o.push(f.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+En(rn.internal.getWidth(t))+" "+En(rn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:rn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=rn.RadioButton.Circle.YesNormal,e.D[t]=rn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=rn.internal.getWidth(t)<=rn.internal.getHeight(t)?rn.internal.getWidth(t)/4:rn.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=rn.internal.Bezier_C,a=Number((i*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+bl(rn.internal.getWidth(t)/2)+" "+bl(rn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=rn.internal.getWidth(t)<=rn.internal.getHeight(t)?rn.internal.getWidth(t)/4:rn.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),a=Number((o*rn.internal.Bezier_C).toFixed(5)),l=Number((i*rn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+bl(rn.internal.getWidth(t)/2)+" "+bl(rn.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+bl(rn.internal.getWidth(t)/2)+" "+bl(rn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=rn.internal.getWidth(t)<=rn.internal.getHeight(t)?rn.internal.getWidth(t)/4:rn.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),a=Number((o*rn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+bl(rn.internal.getWidth(t)/2)+" "+bl(rn.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:rn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=rn.RadioButton.Cross.YesNormal,e.D[t]=rn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=rn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+En(rn.internal.getWidth(t)-2)+" "+En(rn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(En(i.x1.x)+" "+En(i.x1.y)+" m"),n.push(En(i.x2.x)+" "+En(i.x2.y)+" l"),n.push(En(i.x4.x)+" "+En(i.x4.y)+" m"),n.push(En(i.x3.x)+" "+En(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=rn.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+En(rn.internal.getWidth(t))+" "+En(rn.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+En(rn.internal.getWidth(t)-2)+" "+En(rn.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(En(n.x1.x)+" "+En(n.x1.y)+" m"),i.push(En(n.x2.x)+" "+En(n.x2.y)+" l"),i.push(En(n.x4.x)+" "+En(n.x4.y)+" m"),i.push(En(n.x3.x)+" "+En(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+En(rn.internal.getWidth(t))+" "+En(rn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};rn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=rn.internal.getWidth(t),n=rn.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},rn.internal.getWidth=function(t){var e=0;return di(t)==="object"&&(e=ug(t.Rect[2])),e},rn.internal.getHeight=function(t){var e=0;return di(t)==="object"&&(e=ug(t.Rect[3])),e};var XL=Wi.addField=function(t){if(JL(this,t),!(t instanceof ta))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Wi.AcroFormChoiceField=Ru,Wi.AcroFormListBox=Iu,Wi.AcroFormComboBox=Fu,Wi.AcroFormEditBox=mh,Wi.AcroFormButton=Or,Wi.AcroFormPushButton=vh,Wi.AcroFormRadioButton=ju,Wi.AcroFormCheckBox=yh,Wi.AcroFormTextField=ru,Wi.AcroFormPasswordField=_h,Wi.AcroFormAppearance=rn,Wi.AcroForm={ChoiceField:Ru,ListBox:Iu,ComboBox:Fu,EditBox:mh,Button:Or,PushButton:vh,RadioButton:ju,CheckBox:yh,TextField:ru,PasswordField:_h,Appearance:rn},xn.AcroForm={ChoiceField:Ru,ListBox:Iu,ComboBox:Fu,EditBox:mh,Button:Or,PushButton:vh,RadioButton:ju,CheckBox:yh,TextField:ru,PasswordField:_h,Appearance:rn};xn.AcroForm;function ev(t){return t.reduce(function(e,n,i){return e[n]=i,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(X,W){var St,Mt,A,H,V,z=e;if((W=W||e)==="RGBA"||X.data!==void 0&&X.data instanceof Uint8ClampedArray&&"height"in X&&"width"in X)return"RGBA";if(Dt(X))for(V in n)for(A=n[V],St=0;St<A.length;St+=1){for(H=!0,Mt=0;Mt<A[St].length;Mt+=1)if(A[St][Mt]!==void 0&&A[St][Mt]!==X[Mt]){H=!1;break}if(H===!0){z=V;break}}else for(V in n)for(A=n[V],St=0;St<A.length;St+=1){for(H=!0,Mt=0;Mt<A[St].length;Mt+=1)if(A[St][Mt]!==void 0&&A[St][Mt]!==X.charCodeAt(Mt)){H=!1;break}if(H===!0){z=V;break}}return z===e&&W!==e&&(z=W),z},o=function X(W){for(var St=this.internal.write,Mt=this.internal.putStream,A=(0,this.internal.getFilters)();A.indexOf("FlateEncode")!==-1;)A.splice(A.indexOf("FlateEncode"),1);W.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:W.width}),H.push({key:"Height",value:W.height}),W.colorSpace===U.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(W.palette.length/3-1)+" "+("sMask"in W&&W.sMask!==void 0?W.objectId+2:W.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+W.colorSpace}),W.colorSpace===U.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:W.bitsPerComponent}),"decodeParameters"in W&&W.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+W.decodeParameters+">>"}),"transparency"in W&&Array.isArray(W.transparency)){for(var V="",z=0,mt=W.transparency.length;z<mt;z++)V+=W.transparency[z]+" "+W.transparency[z]+" ";H.push({key:"Mask",value:"["+V+"]"})}W.sMask!==void 0&&H.push({key:"SMask",value:W.objectId+1+" 0 R"});var ft=W.filter!==void 0?["/"+W.filter]:void 0;if(Mt({data:W.data,additionalKeyValues:H,alreadyAppliedFilters:ft,objectId:W.objectId}),St("endobj"),"sMask"in W&&W.sMask!==void 0){var ht="/Predictor "+W.predictor+" /Colors 1 /BitsPerComponent "+W.bitsPerComponent+" /Columns "+W.width,I={width:W.width,height:W.height,colorSpace:"DeviceGray",bitsPerComponent:W.bitsPerComponent,decodeParameters:ht,data:W.sMask};"filter"in W&&(I.filter=W.filter),X.call(this,I)}if(W.colorSpace===U.INDEXED){var it=this.internal.newObject();Mt({data:gt(new Uint8Array(W.palette)),objectId:it}),St("endobj")}},a=function(){var X=this.internal.collections.addImage_images;for(var W in X)o.call(this,X[W])},l=function(){var X,W=this.internal.collections.addImage_images,St=this.internal.write;for(var Mt in W)St("/I"+(X=W[Mt]).index,X.objectId,"0","R")},f=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",l))},p=function(){var X=this.internal.collections.addImage_images;return f.call(this),X},v=function(){return Object.keys(this.internal.collections.addImage_images).length},b=function(X){return typeof t["process"+X.toUpperCase()]=="function"},w=function(X){return di(X)==="object"&&X.nodeType===1},S=function(X,W){if(X.nodeName==="IMG"&&X.hasAttribute("src")){var St=""+X.getAttribute("src");if(St.indexOf("data:image/")===0)return bc(unescape(St).split("base64,").pop());var Mt=t.loadFile(St,!0);if(Mt!==void 0)return Mt}if(X.nodeName==="CANVAS"){if(X.width===0||X.height===0)throw new Error("Given canvas must have data. Canvas width: "+X.width+", height: "+X.height);var A;switch(W){case"PNG":A="image/png";break;case"WEBP":A="image/webp";break;case"JPEG":case"JPG":default:A="image/jpeg"}return bc(X.toDataURL(A,1).split("base64,").pop())}},x=function(X){var W=this.internal.collections.addImage_images;if(W){for(var St in W)if(X===W[St].alias)return W[St]}},j=function(X,W,St){return X||W||(X=-96,W=-96),X<0&&(X=-1*St.width*72/X/this.internal.scaleFactor),W<0&&(W=-1*St.height*72/W/this.internal.scaleFactor),X===0&&(X=W*St.width/St.height),W===0&&(W=X*St.height/St.width),[X,W]},R=function(X,W,St,Mt,A,H){var V=j.call(this,St,Mt,A),z=this.internal.getCoordinateString,mt=this.internal.getVerticalCoordinateString,ft=p.call(this);if(St=V[0],Mt=V[1],ft[A.index]=A,H){H*=Math.PI/180;var ht=Math.cos(H),I=Math.sin(H),it=function($){return $.toFixed(4)},rt=[it(ht),it(I),it(-1*I),it(ht),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,z(X),mt(W+Mt),"cm"].join(" ")),this.internal.write(rt.join(" ")),this.internal.write([z(St),"0","0",z(Mt),"0","0","cm"].join(" "))):this.internal.write([z(St),"0","0",z(Mt),z(X),mt(W+Mt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+A.index+" Do"),this.internal.write("Q")},U=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Z=t.__addimage__.sHashCode=function(X){var W,St,Mt=0;if(typeof X=="string")for(St=X.length,W=0;W<St;W++)Mt=(Mt<<5)-Mt+X.charCodeAt(W),Mt|=0;else if(Dt(X))for(St=X.byteLength/2,W=0;W<St;W++)Mt=(Mt<<5)-Mt+X[W],Mt|=0;return Mt},Y=t.__addimage__.validateStringAsBase64=function(X){(X=X||"").toString().trim();var W=!0;return X.length===0&&(W=!1),X.length%4!=0&&(W=!1),/^[A-Za-z0-9+/]+$/.test(X.substr(0,X.length-2))===!1&&(W=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(X.substr(-2))===!1&&(W=!1),W},kt=t.__addimage__.extractImageFromDataUrl=function(X){var W=(X=X||"").split("base64,"),St=null;if(W.length===2){var Mt=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(W[0]);Array.isArray(Mt)&&(St={mimeType:Mt[1],charset:Mt[2],data:W[1]})}return St},At=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(X){return At()&&X instanceof ArrayBuffer};var Dt=t.__addimage__.isArrayBufferView=function(X){return At()&&typeof Uint32Array<"u"&&(X instanceof Int8Array||X instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&X instanceof Uint8ClampedArray||X instanceof Int16Array||X instanceof Uint16Array||X instanceof Int32Array||X instanceof Uint32Array||X instanceof Float32Array||X instanceof Float64Array)},xt=t.__addimage__.binaryStringToUint8Array=function(X){for(var W=X.length,St=new Uint8Array(W),Mt=0;Mt<W;Mt++)St[Mt]=X.charCodeAt(Mt);return St},gt=t.__addimage__.arrayBufferToBinaryString=function(X){for(var W="",St=Dt(X)?X:new Uint8Array(X),Mt=0;Mt<St.length;Mt+=8192)W+=String.fromCharCode.apply(null,St.subarray(Mt,Mt+8192));return W};t.addImage=function(){var X,W,St,Mt,A,H,V,z,mt;if(typeof arguments[1]=="number"?(W=e,St=arguments[1],Mt=arguments[2],A=arguments[3],H=arguments[4],V=arguments[5],z=arguments[6],mt=arguments[7]):(W=arguments[1],St=arguments[2],Mt=arguments[3],A=arguments[4],H=arguments[5],V=arguments[6],z=arguments[7],mt=arguments[8]),di(X=arguments[0])==="object"&&!w(X)&&"imageData"in X){var ft=X;X=ft.imageData,W=ft.format||W||e,St=ft.x||St||0,Mt=ft.y||Mt||0,A=ft.w||ft.width||A,H=ft.h||ft.height||H,V=ft.alias||V,z=ft.compression||z,mt=ft.rotation||ft.angle||mt}var ht=this.internal.getFilters();if(z===void 0&&ht.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(St)||isNaN(Mt))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var I=_t.call(this,X,W,V,z);return R.call(this,St,Mt,A,H,I,mt),this};var _t=function(X,W,St,Mt){var A,H,V;if(typeof X=="string"&&i(X)===e){X=unescape(X);var z=zt(X,!1);(z!==""||(z=t.loadFile(X,!0))!==void 0)&&(X=z)}if(w(X)&&(X=S(X,W)),W=i(X,W),!b(W))throw new Error("addImage does not support files of type '"+W+"', please ensure that a plugin for '"+W+"' support is added.");if(((V=St)==null||V.length===0)&&(St=function(mt){return typeof mt=="string"||Dt(mt)?Z(mt):Dt(mt.data)?Z(mt.data):null}(X)),(A=x.call(this,St))||(At()&&(X instanceof Uint8Array||W==="RGBA"||(H=X,X=xt(X))),A=this["process"+W.toUpperCase()](X,v.call(this),St,function(mt){return mt&&typeof mt=="string"&&(mt=mt.toUpperCase()),mt in t.image_compression?mt:N.NONE}(Mt),H)),!A)throw new Error("An unknown error occurred whilst processing the image.");return A},zt=t.__addimage__.convertBase64ToBinaryString=function(X,W){var St;W=typeof W!="boolean"||W;var Mt,A="";if(typeof X=="string"){Mt=(St=kt(X))!==null?St.data:X;try{A=bc(Mt)}catch(H){if(W)throw Y(Mt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return A};t.getImageProperties=function(X){var W,St,Mt="";if(w(X)&&(X=S(X)),typeof X=="string"&&i(X)===e&&((Mt=zt(X,!1))===""&&(Mt=t.loadFile(X)||""),X=Mt),St=i(X),!b(St))throw new Error("addImage does not support files of type '"+St+"', please ensure that a plugin for '"+St+"' support is added.");if(!At()||X instanceof Uint8Array||(X=xt(X)),!(W=this["process"+St.toUpperCase()](X)))throw new Error("An unknown error occurred whilst processing the image");return W.fileType=St,W}})(xn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};xn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,o,a,l=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(n.objId),v=n.pageContext.annotations,b=!1,w=0;w<v.length&&!b;w++)switch((i=v[w]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(b=!0);break;case"reference":case"text":case"freetext":b=!0}if(b!=0){this.internal.write("/Annots [");for(var S=0;S<v.length;S++){i=v[S];var x=this.internal.pdfEscape,j=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),U=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(R.objId),Z=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+l(i.bounds.x)+" "+f(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+f(i.bounds.y)+"] ")+"/Contents ("+x(N(i.contents))+")",a+=" /Popup "+U.objId+" 0 R",a+=" /P "+p.objId+" 0 R",a+=" /T ("+x(N(Z))+") >>",R.content=a;var Y=R.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+l(i.bounds.x+30)+" "+f(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+f(i.bounds.y)+"] ")+" /Parent "+Y,i.open&&(a+=" /Open true"),a+=" >>",U.content=a,this.internal.write(R.objId,"0 R",U.objId,"0 R");break;case"freetext":o="/Rect ["+l(i.bounds.x)+" "+f(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+f(i.bounds.y+i.bounds.h)+"] ";var kt=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+x(j(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+kt+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var At=this.annotations._nameMap[i.options.name];i.options.pageNumber=At.page,i.options.top=At.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+x(j(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var Dt=f(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+Dt+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,o,a,l){var f=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;f.pageContext.annotations.push({finalBounds:{x:p(n),y:v(i),w:p(n+o),h:v(i+a)},options:l,type:"link"})},t.textWithLink=function(n,i,o,a){var l,f,p=this.getTextWidth(n),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){f=a.maxWidth;var b=this.splitTextToSize(n,f).length;l=Math.ceil(v*b)}else f=p,l=v;return this.text(n,i,o,a),o+=.2*v,a.align==="center"&&(i-=p/2),a.align==="right"&&(i-=p),this.link(i,o-v,f,l,a),p},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(xn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(R){return e[R.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},f=t.__arabicParser__.isArabicEndLetter=function(R){return l(R)&&a(R)&&e[R.charCodeAt(0)].length<=2},p=t.__arabicParser__.isArabicAlfLetter=function(R){return l(R)&&o.indexOf(R.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return l(R)&&a(R)&&e[R.charCodeAt(0)].length>=1};var v=t.__arabicParser__.arabicLetterHasFinalForm=function(R){return l(R)&&a(R)&&e[R.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(R){return l(R)&&a(R)&&e[R.charCodeAt(0)].length>=3};var b=t.__arabicParser__.arabicLetterHasMedialForm=function(R){return l(R)&&a(R)&&e[R.charCodeAt(0)].length==4},w=t.__arabicParser__.resolveLigatures=function(R){var U=0,N=n,Z="",Y=0;for(U=0;U<R.length;U+=1)N[R.charCodeAt(U)]!==void 0?(Y++,typeof(N=N[R.charCodeAt(U)])=="number"&&(Z+=String.fromCharCode(N),N=n,Y=0),U===R.length-1&&(N=n,Z+=R.charAt(U-(Y-1)),U-=Y-1,Y=0)):(N=n,Z+=R.charAt(U-Y),U-=Y,Y=0);return Z};t.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&i[R.charCodeAt(0)]!==void 0};var S=t.__arabicParser__.getCorrectForm=function(R,U,N){return l(R)?a(R)===!1?-1:!v(R)||!l(U)&&!l(N)||!l(N)&&f(U)||f(R)&&!l(U)||f(R)&&p(U)||f(R)&&f(U)?0:b(R)&&l(U)&&!f(U)&&l(N)&&v(N)?3:f(R)||!l(N)?1:2:-1},x=function(R){var U=0,N=0,Z=0,Y="",kt="",At="",Dt=(R=R||"").split("\\s+"),xt=[];for(U=0;U<Dt.length;U+=1){for(xt.push(""),N=0;N<Dt[U].length;N+=1)Y=Dt[U][N],kt=Dt[U][N-1],At=Dt[U][N+1],l(Y)?(Z=S(Y,kt,At),xt[U]+=Z!==-1?String.fromCharCode(e[Y.charCodeAt(0)][Z]):Y):xt[U]+=Y;xt[U]=w(xt[U])}return xt.join(" ")},j=t.__arabicParser__.processArabic=t.processArabic=function(){var R,U=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(U)){var Z=0;for(N=[],Z=0;Z<U.length;Z+=1)Array.isArray(U[Z])?N.push([x(U[Z][0]),U[Z][1],U[Z][2]]):N.push([x(U[Z])]);R=N}else R=x(U);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};t.events.push(["preProcessText",j])}(xn.API),xn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(f){n=f}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(f){i=isNaN(f)||Number.isInteger(f)===!1||f<0?150:f,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(f){o=isNaN(f)||Number.isInteger(f)===!1||f<0?300:f,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(f){a=f}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(f){l=f}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var o;if((n=n||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(xn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(R){p=R}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(R){v=R}});var b=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return b},set:function(R){b=R}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(R){w=R}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(R){S=R}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(R){x=R}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(R){j=R}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(p){return i.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},t.getTextDimensions=function(p,v){i.call(this);var b=(v=v||{}).fontSize||this.getFontSize(),w=v.font||this.getFont(),S=v.scaleFactor||this.internal.scaleFactor,x=0,j=0,R=0,U=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var N=v.maxWidth;N>0?typeof p=="string"?p=this.splitTextToSize(p,N):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(Y,kt){return Y.concat(U.splitTextToSize(kt,N))},[])):p=Array.isArray(p)?p:[p];for(var Z=0;Z<p.length;Z++)x<(R=this.getStringUnitWidth(p[Z],{font:w})*b)&&(x=R);return x!==0&&(j=p.length),{w:x/=S,h:Math.max((j*b*this.getLineHeightFactor()-b*(this.getLineHeightFactor()-1))/S,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var p=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var p;p=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var v=this.internal.__cell__.lastCell,b=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===p.lineNumber?(p.x=(v.x||0)+(v.width||0),p.y=v.y||0):v.y+v.height+p.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=w.top,x&&S&&(this.printHeaderRow(p.lineNumber,!0),p.y+=S[0].height)):p.y=v.y+v.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,n===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-b,p.y+b,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+b,{align:"center",baseline:"top",maxWidth:p.width-b-b}):this.text(p.text,p.x+b,p.y+b,{align:"left",baseline:"top",maxWidth:p.width-b-b})),this.internal.__cell__.lastCell=p,this};t.table=function(p,v,b,w,S){if(i.call(this),!b)throw new Error("No data for PDF table.");var x,j,R,U,N=[],Z=[],Y=[],kt={},At={},Dt=[],xt=[],gt=(S=S||{}).autoSize||!1,_t=S.printHeaders!==!1,zt=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,X=S.margins||Object.assign({width:this.getPageWidth()},e),W=typeof S.padding=="number"?S.padding:3,St=S.headerBackgroundColor||"#c8c8c8",Mt=S.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=_t,this.internal.__cell__.margins=X,this.internal.__cell__.table_font_size=zt,this.internal.__cell__.padding=W,this.internal.__cell__.headerBackgroundColor=St,this.internal.__cell__.headerTextColor=Mt,this.setFontSize(zt),w==null)Z=N=Object.keys(b[0]),Y=N.map(function(){return"left"});else if(Array.isArray(w)&&di(w[0])==="object")for(N=w.map(function(ft){return ft.name}),Z=w.map(function(ft){return ft.prompt||ft.name||""}),Y=w.map(function(ft){return ft.align||"left"}),x=0;x<w.length;x+=1)At[w[x].name]=w[x].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(Z=N=w,Y=N.map(function(){return"left"}));if(gt||Array.isArray(w)&&typeof w[0]=="string")for(x=0;x<N.length;x+=1){for(kt[U=N[x]]=b.map(function(ft){return ft[U]}),this.setFont(void 0,"bold"),Dt.push(this.getTextDimensions(Z[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=kt[U],this.setFont(void 0,"normal"),R=0;R<j.length;R+=1)Dt.push(this.getTextDimensions(j[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);At[U]=Math.max.apply(null,Dt)+W+W,Dt=[]}if(_t){var A={};for(x=0;x<N.length;x+=1)A[N[x]]={},A[N[x]].text=Z[x],A[N[x]].align=Y[x];var H=f.call(this,A,At);xt=N.map(function(ft){return new a(p,v,At[ft],H,A[ft].text,void 0,A[ft].align)}),this.setTableHeaderRow(xt),this.printHeaderRow(1,!1)}var V=w.reduce(function(ft,ht){return ft[ht.name]=ht.align,ft},{});for(x=0;x<b.length;x+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:x,data:b[x]},this);var z=f.call(this,b[x],At);for(R=0;R<N.length;R+=1){var mt=b[x][N[R]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:x,col:R,data:mt},this),l.call(this,new a(p,v,At[N[R]],z,mt,x+2,V[N[R]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=v,this};var f=function(p,v){var b=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(p).map(function(x){var j=p[x];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,v[x]-b-b)},this).map(function(x){return this.getLineHeightFactor()*x.length*w/S+b+b},this).reduce(function(x,j){return Math.max(x,j)},0)};t.setTableHeaderRow=function(p){i.call(this),this.internal.__cell__.tableHeaderRow=p},t.printHeaderRow=function(p,v){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var b;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){b=this.internal.__cell__.tableHeaderRow[x].clone(),v&&(b.y=this.internal.__cell__.margins.top||0,S.push(b)),b.lineNumber=p;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,b),this.setTextColor(j)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),n=!1}}(xn.API);var nv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nd=ev(iv),rv=[100,200,300,400,500,600,700,800,900],QL=ev(rv);function Od(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return nv[a=a||"normal"]?a:"normal"}(t.style),i=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(a){return typeof Nd[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:i,stretch:o,src:t.src||[],ref:t.ref||{name:e,style:[o,n,i].join(" ")}}}function cg(t,e,n,i){var o;for(o=n;o>=0&&o<e.length;o+=i)if(t[e[o]])return t[e[o]];for(o=n;o>=0&&o<e.length;o-=i)if(t[e[o]])return t[e[o]]}var tC={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function fg(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function eC(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},tC,n.genericFontFamilies||{}),a=null,l=null,f=0;f<e.length;++f)if(o[(a=Od(e[f])).family]&&(a.family=o[a.family]),t.hasOwnProperty(a.family)){l=t[a.family];break}if(!(l=l||t[i]))throw new Error("Could not find a font-family for the rule '"+fg(a)+"' and default family '"+i+"'.");if(l=function(p,v){if(v[p])return v[p];var b=Nd[p],w=b<=Nd.normal?-1:1,S=cg(v,iv,b,w);if(!S)throw new Error("Could not find a matching font-stretch value for "+p);return S}(a.stretch,l),l=function(p,v){if(v[p])return v[p];for(var b=nv[p],w=0;w<b.length;++w)if(v[b[w]])return v[b[w]];throw new Error("Could not find a matching font-style for "+p)}(a.style,l),!(l=function(p,v){if(v[p])return v[p];if(p===400&&v[500])return v[500];if(p===500&&v[400])return v[400];var b=QL[p],w=cg(v,rv,b,p<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+p);return w}(a.weight,l)))throw new Error("Failed to resolve a font for the rule '"+fg(a)+"'.");return l}function dg(t){return t.trimLeft()}function nC(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function iC(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var rh,pg,gg,Zf=["times"];(function(t){var e,n,i,o,a,l,f,p,v,b=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new p,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new l,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new l,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,l=this.internal.Point,f=this.internal.Rectangle,p=this.internal.Matrix,v=new b}]);var w=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var it=I;Object.defineProperty(this,"pdf",{get:function(){return it}});var rt=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return rt},set:function(vt){rt=!!vt}});var $=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $},set:function(vt){$=!!vt}});var D=0;Object.defineProperty(this,"posX",{get:function(){return D},set:function(vt){isNaN(vt)||(D=vt)}});var q=0;Object.defineProperty(this,"posY",{get:function(){return q},set:function(vt){isNaN(vt)||(q=vt)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(vt){var J;typeof vt=="number"?J=[vt,vt,vt,vt]:((J=new Array(4))[0]=vt[0],J[1]=vt.length>=2?vt[1]:J[0],J[2]=vt.length>=3?vt[2]:J[0],J[3]=vt.length>=4?vt[3]:J[1]),v.margin=J}});var dt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return dt},set:function(vt){dt=vt}});var ct=0;Object.defineProperty(this,"lastBreak",{get:function(){return ct},set:function(vt){ct=vt}});var Et=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Et},set:function(vt){Et=vt}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(vt){vt instanceof b&&(v=vt)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(vt){v.path=vt}});var Nt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Nt},set:function(vt){Nt=vt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(vt){var J;J=S(vt),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(vt){var J=S(vt);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(vt){["butt","round","square"].indexOf(vt)!==-1&&(this.ctx.lineCap=vt,this.pdf.setLineCap(vt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(vt){isNaN(vt)||(this.ctx.lineWidth=vt,this.pdf.setLineWidth(vt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(vt){["bevel","round","miter"].indexOf(vt)!==-1&&(this.ctx.lineJoin=vt,this.pdf.setLineJoin(vt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(vt){isNaN(vt)||(this.ctx.miterLimit=vt,this.pdf.setMiterLimit(vt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(vt){this.ctx.textBaseline=vt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(vt){["right","end","center","left","start"].indexOf(vt)!==-1&&(this.ctx.textAlign=vt)}});var G=null;function tt(vt,J){if(G===null){var qt=function(te){var Vt=[];return Object.keys(te).forEach(function(ee){te[ee].forEach(function(Rt){var Ot=null;switch(Rt){case"bold":Ot={family:ee,weight:"bold"};break;case"italic":Ot={family:ee,style:"italic"};break;case"bolditalic":Ot={family:ee,weight:"bold",style:"italic"};break;case"":case"normal":Ot={family:ee}}Ot!==null&&(Ot.ref={name:ee,style:Rt},Vt.push(Ot))})}),Vt}(vt.getFontList());G=function(te){for(var Vt={},ee=0;ee<te.length;++ee){var Rt=Od(te[ee]),Ot=Rt.family,ie=Rt.stretch,pe=Rt.style,ke=Rt.weight;Vt[Ot]=Vt[Ot]||{},Vt[Ot][ie]=Vt[Ot][ie]||{},Vt[Ot][ie][pe]=Vt[Ot][ie][pe]||{},Vt[Ot][ie][pe][ke]=Rt}return Vt}(qt.concat(J))}return G}var yt=null;Object.defineProperty(this,"fontFaces",{get:function(){return yt},set:function(vt){G=null,yt=vt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(vt){var J;if(this.ctx.font=vt,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(vt))!==null){var qt=J[1],te=(J[2],J[3]),Vt=J[4],ee=(J[5],J[6]),Rt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Vt)[2];Vt=Math.floor(Rt==="px"?parseFloat(Vt)*this.pdf.internal.scaleFactor:Rt==="em"?parseFloat(Vt)*this.pdf.getFontSize():parseFloat(Vt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Vt);var Ot=function(Ue){var Ge,Oe,Sn=[],tn=Ue.trim();if(tn==="")return Zf;if(tn in hg)return[hg[tn]];for(;tn!=="";){switch(Oe=null,Ge=(tn=dg(tn)).charAt(0)){case'"':case"'":Oe=nC(tn.substring(1),Ge);break;default:Oe=iC(tn)}if(Oe===null||(Sn.push(Oe[0]),(tn=dg(Oe[1]))!==""&&tn.charAt(0)!==","))return Zf;tn=tn.replace(/^,/,"")}return Sn}(ee);if(this.fontFaces){var ie=eC(tt(this.pdf,this.fontFaces),Ot.map(function(Ue){return{family:Ue,stretch:"normal",weight:te,style:qt}}));this.pdf.setFont(ie.ref.name,ie.ref.style)}else{var pe="";(te==="bold"||parseInt(te,10)>=700||qt==="bold")&&(pe="bold"),qt==="italic"&&(pe+="italic"),pe.length===0&&(pe="normal");for(var ke="",Kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},oe=0;oe<Ot.length;oe++){if(this.pdf.internal.getFont(Ot[oe],pe,{noFallback:!0,disableWarning:!0})!==void 0){ke=Ot[oe];break}if(pe==="bolditalic"&&this.pdf.internal.getFont(Ot[oe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ke=Ot[oe],pe="bold";else if(this.pdf.internal.getFont(Ot[oe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ke=Ot[oe],pe="normal";break}}if(ke===""){for(var Ve=0;Ve<Ot.length;Ve++)if(Kt[Ot[Ve]]){ke=Kt[Ot[Ve]];break}}ke=ke===""?"Times":ke,this.pdf.setFont(ke,pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(vt){this.ctx.globalCompositeOperation=vt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(vt){this.ctx.globalAlpha=vt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(vt){this.ctx.lineDashOffset=vt,ht.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(vt){this.ctx.lineDash=vt,ht.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(vt){this.ctx.ignoreClearRect=!!vt}})};w.prototype.setLineDash=function(I){this.lineDash=I},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){kt.call(this,"fill",!1)},w.prototype.stroke=function(){kt.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(I,it){if(isNaN(I)||isNaN(it))throw vi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var rt=this.ctx.transform.applyToPoint(new l(I,it));this.path.push({type:"mt",x:rt.x,y:rt.y}),this.ctx.lastPoint=new l(I,it)},w.prototype.closePath=function(){var I=new l(0,0),it=0;for(it=this.path.length-1;it!==-1;it--)if(this.path[it].type==="begin"&&di(this.path[it+1])==="object"&&typeof this.path[it+1].x=="number"){I=new l(this.path[it+1].x,this.path[it+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(I.x,I.y)},w.prototype.lineTo=function(I,it){if(isNaN(I)||isNaN(it))throw vi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var rt=this.ctx.transform.applyToPoint(new l(I,it));this.path.push({type:"lt",x:rt.x,y:rt.y}),this.ctx.lastPoint=new l(rt.x,rt.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),kt.call(this,null,!0)},w.prototype.quadraticCurveTo=function(I,it,rt,$){if(isNaN(rt)||isNaN($)||isNaN(I)||isNaN(it))throw vi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var D=this.ctx.transform.applyToPoint(new l(rt,$)),q=this.ctx.transform.applyToPoint(new l(I,it));this.path.push({type:"qct",x1:q.x,y1:q.y,x:D.x,y:D.y}),this.ctx.lastPoint=new l(D.x,D.y)},w.prototype.bezierCurveTo=function(I,it,rt,$,D,q){if(isNaN(D)||isNaN(q)||isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw vi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var dt=this.ctx.transform.applyToPoint(new l(D,q)),ct=this.ctx.transform.applyToPoint(new l(I,it)),Et=this.ctx.transform.applyToPoint(new l(rt,$));this.path.push({type:"bct",x1:ct.x,y1:ct.y,x2:Et.x,y2:Et.y,x:dt.x,y:dt.y}),this.ctx.lastPoint=new l(dt.x,dt.y)},w.prototype.arc=function(I,it,rt,$,D,q){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($)||isNaN(D))throw vi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(q=!!q,!this.ctx.transform.isIdentity){var dt=this.ctx.transform.applyToPoint(new l(I,it));I=dt.x,it=dt.y;var ct=this.ctx.transform.applyToPoint(new l(0,rt)),Et=this.ctx.transform.applyToPoint(new l(0,0));rt=Math.sqrt(Math.pow(ct.x-Et.x,2)+Math.pow(ct.y-Et.y,2))}Math.abs(D-$)>=2*Math.PI&&($=0,D=2*Math.PI),this.path.push({type:"arc",x:I,y:it,radius:rt,startAngle:$,endAngle:D,counterclockwise:q})},w.prototype.arcTo=function(I,it,rt,$,D){throw new Error("arcTo not implemented.")},w.prototype.rect=function(I,it,rt,$){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw vi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,it),this.lineTo(I+rt,it),this.lineTo(I+rt,it+$),this.lineTo(I,it+$),this.lineTo(I,it),this.lineTo(I+rt,it),this.lineTo(I,it)},w.prototype.fillRect=function(I,it,rt,$){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw vi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var D={};this.lineCap!=="butt"&&(D.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(D.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,it,rt,$),this.fill(),D.hasOwnProperty("lineCap")&&(this.lineCap=D.lineCap),D.hasOwnProperty("lineJoin")&&(this.lineJoin=D.lineJoin)}},w.prototype.strokeRect=function(I,it,rt,$){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw vi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(I,it,rt,$),this.stroke())},w.prototype.clearRect=function(I,it,rt,$){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw vi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,it,rt,$))},w.prototype.save=function(I){I=typeof I!="boolean"||I;for(var it=this.pdf.internal.getCurrentPageInfo().pageNumber,rt=0;rt<this.pdf.internal.getNumberOfPages();rt++)this.pdf.setPage(rt+1),this.pdf.internal.out("q");if(this.pdf.setPage(it),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var $=new b(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$}},w.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var it=this.pdf.internal.getCurrentPageInfo().pageNumber,rt=0;rt<this.pdf.internal.getNumberOfPages();rt++)this.pdf.setPage(rt+1),this.pdf.internal.out("Q");this.pdf.setPage(it),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(I){var it,rt,$,D;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))it=0,rt=0,$=0,D=0;else{var q=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(q!==null)it=parseInt(q[1]),rt=parseInt(q[2]),$=parseInt(q[3]),D=1;else if((q=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)it=parseInt(q[1]),rt=parseInt(q[2]),$=parseInt(q[3]),D=parseFloat(q[4]);else{if(D=1,typeof I=="string"&&I.charAt(0)!=="#"){var dt=new K1(I);I=dt.ok?dt.toHex():"#000000"}I.length===4?(it=I.substring(1,2),it+=it,rt=I.substring(2,3),rt+=rt,$=I.substring(3,4),$+=$):(it=I.substring(1,3),rt=I.substring(3,5),$=I.substring(5,7)),it=parseInt(it,16),rt=parseInt(rt,16),$=parseInt($,16)}}return{r:it,g:rt,b:$,a:D,style:I}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(I,it,rt,$){if(isNaN(it)||isNaN(rt)||typeof I!="string")throw vi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($=isNaN($)?void 0:$,!x.call(this)){var D=z(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;W.call(this,{text:I,x:it,y:rt,scale:q,angle:D,align:this.textAlign,maxWidth:$})}},w.prototype.strokeText=function(I,it,rt,$){if(isNaN(it)||isNaN(rt)||typeof I!="string")throw vi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){$=isNaN($)?void 0:$;var D=z(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;W.call(this,{text:I,x:it,y:rt,scale:q,renderingMode:"stroke",angle:D,align:this.textAlign,maxWidth:$})}},w.prototype.measureText=function(I){if(typeof I!="string")throw vi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var it=this.pdf,rt=this.pdf.internal.scaleFactor,$=it.internal.getFontSize(),D=it.getStringUnitWidth(I)*$/it.internal.scaleFactor,q=function(dt){var ct=(dt=dt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ct}}),this};return new q({width:D*=Math.round(96*rt/72*1e4)/1e4})},w.prototype.scale=function(I,it){if(isNaN(I)||isNaN(it))throw vi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var rt=new p(I,0,0,it,0,0);this.ctx.transform=this.ctx.transform.multiply(rt)},w.prototype.rotate=function(I){if(isNaN(I))throw vi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var it=new p(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(it)},w.prototype.translate=function(I,it){if(isNaN(I)||isNaN(it))throw vi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var rt=new p(1,0,0,1,I,it);this.ctx.transform=this.ctx.transform.multiply(rt)},w.prototype.transform=function(I,it,rt,$,D,q){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($)||isNaN(D)||isNaN(q))throw vi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var dt=new p(I,it,rt,$,D,q);this.ctx.transform=this.ctx.transform.multiply(dt)},w.prototype.setTransform=function(I,it,rt,$,D,q){I=isNaN(I)?1:I,it=isNaN(it)?0:it,rt=isNaN(rt)?0:rt,$=isNaN($)?1:$,D=isNaN(D)?0:D,q=isNaN(q)?0:q,this.ctx.transform=new p(I,it,rt,$,D,q)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(I,it,rt,$,D,q,dt,ct,Et){var Nt=this.pdf.getImageProperties(I),G=1,tt=1,yt=1,vt=1;$!==void 0&&ct!==void 0&&(yt=ct/$,vt=Et/D,G=Nt.width/$*ct/$,tt=Nt.height/D*Et/D),q===void 0&&(q=it,dt=rt,it=0,rt=0),$!==void 0&&ct===void 0&&(ct=$,Et=D),$===void 0&&ct===void 0&&(ct=Nt.width,Et=Nt.height);for(var J,qt=this.ctx.transform.decompose(),te=z(qt.rotate.shx),Vt=new p,ee=(Vt=(Vt=(Vt=Vt.multiply(qt.translate)).multiply(qt.skew)).multiply(qt.scale)).applyToRectangle(new f(q-it*yt,dt-rt*vt,$*G,D*tt)),Rt=U.call(this,ee),Ot=[],ie=0;ie<Rt.length;ie+=1)Ot.indexOf(Rt[ie])===-1&&Ot.push(Rt[ie]);if(Y(Ot),this.autoPaging)for(var pe=Ot[0],ke=Ot[Ot.length-1],Kt=pe;Kt<ke+1;Kt++){this.pdf.setPage(Kt);var oe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ve=Kt===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Oe=Kt===1?0:Ue+(Kt-2)*Ge;if(this.ctx.clip_path.length!==0){var Sn=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(J,this.posX+this.margin[3],-Oe+Ve+this.ctx.prevPageLastElemOffset),At.call(this,"fill",!0),this.path=Sn}var tn=JSON.parse(JSON.stringify(ee));tn=Z([tn],this.posX+this.margin[3],-Oe+Ve+this.ctx.prevPageLastElemOffset)[0];var si=(Kt>pe||Kt<ke)&&R.call(this);si&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],oe,Ge,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",tn.x,tn.y,tn.w,tn.h,null,null,te),si&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",ee.x,ee.y,ee.w,ee.h,null,null,te)};var U=function(I,it,rt){var $=[];it=it||this.pdf.internal.pageSize.width,rt=rt||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var D=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":$.push(Math.floor((I.y+D)/rt)+1);break;case"arc":$.push(Math.floor((I.y+D-I.radius)/rt)+1),$.push(Math.floor((I.y+D+I.radius)/rt)+1);break;case"qct":var q=mt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);$.push(Math.floor((q.y+D)/rt)+1),$.push(Math.floor((q.y+q.h+D)/rt)+1);break;case"bct":var dt=ft(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);$.push(Math.floor((dt.y+D)/rt)+1),$.push(Math.floor((dt.y+dt.h+D)/rt)+1);break;case"rect":$.push(Math.floor((I.y+D)/rt)+1),$.push(Math.floor((I.y+I.h+D)/rt)+1)}for(var ct=0;ct<$.length;ct+=1)for(;this.pdf.internal.getNumberOfPages()<$[ct];)N.call(this);return $},N=function(){var I=this.fillStyle,it=this.strokeStyle,rt=this.font,$=this.lineCap,D=this.lineWidth,q=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=it,this.font=rt,this.lineCap=$,this.lineWidth=D,this.lineJoin=q},Z=function(I,it,rt){for(var $=0;$<I.length;$++)switch(I[$].type){case"bct":I[$].x2+=it,I[$].y2+=rt;case"qct":I[$].x1+=it,I[$].y1+=rt;case"mt":case"lt":case"arc":default:I[$].x+=it,I[$].y+=rt}return I},Y=function(I){return I.sort(function(it,rt){return it-rt})},kt=function(I,it){for(var rt,$,D=this.fillStyle,q=this.strokeStyle,dt=this.lineCap,ct=this.lineWidth,Et=Math.abs(ct*this.ctx.transform.scaleX),Nt=this.lineJoin,G=JSON.parse(JSON.stringify(this.path)),tt=JSON.parse(JSON.stringify(this.path)),yt=[],vt=0;vt<tt.length;vt++)if(tt[vt].x!==void 0)for(var J=U.call(this,tt[vt]),qt=0;qt<J.length;qt+=1)yt.indexOf(J[qt])===-1&&yt.push(J[qt]);for(var te=0;te<yt.length;te++)for(;this.pdf.internal.getNumberOfPages()<yt[te];)N.call(this);if(Y(yt),this.autoPaging)for(var Vt=yt[0],ee=yt[yt.length-1],Rt=Vt;Rt<ee+1;Rt++){this.pdf.setPage(Rt),this.fillStyle=D,this.strokeStyle=q,this.lineCap=dt,this.lineWidth=Et,this.lineJoin=Nt;var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ie=Rt===1?this.posY+this.margin[0]:this.margin[0],pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ke=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Kt=Rt===1?0:pe+(Rt-2)*ke;if(this.ctx.clip_path.length!==0){var oe=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(rt,this.posX+this.margin[3],-Kt+ie+this.ctx.prevPageLastElemOffset),At.call(this,I,!0),this.path=oe}if($=JSON.parse(JSON.stringify(G)),this.path=Z($,this.posX+this.margin[3],-Kt+ie+this.ctx.prevPageLastElemOffset),it===!1||Rt===0){var Ve=(Rt>Vt||Rt<ee)&&R.call(this);Ve&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,ke,null).clip().discardPath()),At.call(this,I,it),Ve&&this.pdf.restoreGraphicsState()}this.lineWidth=ct}else this.lineWidth=Et,At.call(this,I,it),this.lineWidth=ct;this.path=G},At=function(I,it){if((I!=="stroke"||it||!j.call(this))&&(I==="stroke"||it||!x.call(this))){for(var rt,$,D=[],q=this.path,dt=0;dt<q.length;dt++){var ct=q[dt];switch(ct.type){case"begin":D.push({begin:!0});break;case"close":D.push({close:!0});break;case"mt":D.push({start:ct,deltas:[],abs:[]});break;case"lt":var Et=D.length;if(q[dt-1]&&!isNaN(q[dt-1].x)&&(rt=[ct.x-q[dt-1].x,ct.y-q[dt-1].y],Et>0)){for(;Et>=0;Et--)if(D[Et-1].close!==!0&&D[Et-1].begin!==!0){D[Et-1].deltas.push(rt),D[Et-1].abs.push(ct);break}}break;case"bct":rt=[ct.x1-q[dt-1].x,ct.y1-q[dt-1].y,ct.x2-q[dt-1].x,ct.y2-q[dt-1].y,ct.x-q[dt-1].x,ct.y-q[dt-1].y],D[D.length-1].deltas.push(rt);break;case"qct":var Nt=q[dt-1].x+2/3*(ct.x1-q[dt-1].x),G=q[dt-1].y+2/3*(ct.y1-q[dt-1].y),tt=ct.x+2/3*(ct.x1-ct.x),yt=ct.y+2/3*(ct.y1-ct.y),vt=ct.x,J=ct.y;rt=[Nt-q[dt-1].x,G-q[dt-1].y,tt-q[dt-1].x,yt-q[dt-1].y,vt-q[dt-1].x,J-q[dt-1].y],D[D.length-1].deltas.push(rt);break;case"arc":D.push({deltas:[],abs:[],arc:!0}),Array.isArray(D[D.length-1].abs)&&D[D.length-1].abs.push(ct)}}$=it?null:I==="stroke"?"stroke":"fill";for(var qt=!1,te=0;te<D.length;te++)if(D[te].arc)for(var Vt=D[te].abs,ee=0;ee<Vt.length;ee++){var Rt=Vt[ee];Rt.type==="arc"?gt.call(this,Rt.x,Rt.y,Rt.radius,Rt.startAngle,Rt.endAngle,Rt.counterclockwise,void 0,it,!qt):St.call(this,Rt.x,Rt.y),qt=!0}else if(D[te].close===!0)this.pdf.internal.out("h"),qt=!1;else if(D[te].begin!==!0){var Ot=D[te].start.x,ie=D[te].start.y;Mt.call(this,D[te].deltas,Ot,ie),qt=!0}$&&_t.call(this,$),it&&zt.call(this)}},Dt=function(I){var it=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,rt=it*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-rt;case"top":return I+it-rt;case"hanging":return I+it-2*rt;case"middle":return I+it/2-rt;case"ideographic":return I;case"alphabetic":default:return I}},xt=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(it,rt){this.colorStops.push([it,rt])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var gt=function(I,it,rt,$,D,q,dt,ct,Et){for(var Nt=H.call(this,rt,$,D,q),G=0;G<Nt.length;G++){var tt=Nt[G];G===0&&(Et?X.call(this,tt.x1+I,tt.y1+it):St.call(this,tt.x1+I,tt.y1+it)),A.call(this,I,it,tt.x2,tt.y2,tt.x3,tt.y3,tt.x4,tt.y4)}ct?zt.call(this):_t.call(this,dt)},_t=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},zt=function(){this.pdf.clip(),this.pdf.discardPath()},X=function(I,it){this.pdf.internal.out(n(I)+" "+i(it)+" m")},W=function(I){var it;switch(I.align){case"right":case"end":it="right";break;case"center":it="center";break;case"left":case"start":default:it="left"}var rt=this.pdf.getTextDimensions(I.text),$=Dt.call(this,I.y),D=xt.call(this,$)-rt.h,q=this.ctx.transform.applyToPoint(new l(I.x,$)),dt=this.ctx.transform.decompose(),ct=new p;ct=(ct=(ct=ct.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale);for(var Et,Nt,G,tt=this.ctx.transform.applyToRectangle(new f(I.x,$,rt.w,rt.h)),yt=ct.applyToRectangle(new f(I.x,D,rt.w,rt.h)),vt=U.call(this,yt),J=[],qt=0;qt<vt.length;qt+=1)J.indexOf(vt[qt])===-1&&J.push(vt[qt]);if(Y(J),this.autoPaging)for(var te=J[0],Vt=J[J.length-1],ee=te;ee<Vt+1;ee++){this.pdf.setPage(ee);var Rt=ee===1?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ie=this.pdf.internal.pageSize.height-this.margin[2],pe=ie-this.margin[0],ke=this.pdf.internal.pageSize.width-this.margin[1],Kt=ke-this.margin[3],oe=ee===1?0:Ot+(ee-2)*pe;if(this.ctx.clip_path.length!==0){var Ve=this.path;Et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Z(Et,this.posX+this.margin[3],-1*oe+Rt),At.call(this,"fill",!0),this.path=Ve}var Ue=Z([JSON.parse(JSON.stringify(yt))],this.posX+this.margin[3],-oe+Rt+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(Nt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Nt*I.scale),G=this.lineWidth,this.lineWidth=G*I.scale);var Ge=this.autoPaging!=="text";if(Ge||Ue.y+Ue.h<=ie){if(Ge||Ue.y>=Rt&&Ue.x<=ke){var Oe=Ge?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||ke-Ue.x)[0],Sn=Z([JSON.parse(JSON.stringify(tt))],this.posX+this.margin[3],-oe+Rt+this.ctx.prevPageLastElemOffset)[0],tn=Ge&&(ee>te||ee<Vt)&&R.call(this);tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Kt,pe,null).clip().discardPath()),this.pdf.text(Oe,Sn.x,Sn.y,{angle:I.angle,align:it,renderingMode:I.renderingMode}),tn&&this.pdf.restoreGraphicsState()}}else Ue.y<ie&&(this.ctx.prevPageLastElemOffset+=ie-Ue.y);I.scale>=.01&&(this.pdf.setFontSize(Nt),this.lineWidth=G)}else I.scale>=.01&&(Nt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Nt*I.scale),G=this.lineWidth,this.lineWidth=G*I.scale),this.pdf.text(I.text,q.x+this.posX,q.y+this.posY,{angle:I.angle,align:it,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(Nt),this.lineWidth=G)},St=function(I,it,rt,$){rt=rt||0,$=$||0,this.pdf.internal.out(n(I+rt)+" "+i(it+$)+" l")},Mt=function(I,it,rt){return this.pdf.lines(I,it,rt,null,null)},A=function(I,it,rt,$,D,q,dt,ct){this.pdf.internal.out([e(o(rt+I)),e(a($+it)),e(o(D+I)),e(a(q+it)),e(o(dt+I)),e(a(ct+it)),"c"].join(" "))},H=function(I,it,rt,$){for(var D=2*Math.PI,q=Math.PI/2;it>rt;)it-=D;var dt=Math.abs(rt-it);dt<D&&$&&(dt=D-dt);for(var ct=[],Et=$?-1:1,Nt=it;dt>1e-5;){var G=Nt+Et*Math.min(dt,q);ct.push(V.call(this,I,Nt,G)),dt-=Math.abs(G-Nt),Nt=G}return ct},V=function(I,it,rt){var $=(rt-it)/2,D=I*Math.cos($),q=I*Math.sin($),dt=D,ct=-q,Et=dt*dt+ct*ct,Nt=Et+dt*D+ct*q,G=4/3*(Math.sqrt(2*Et*Nt)-Nt)/(dt*q-ct*D),tt=dt-G*ct,yt=ct+G*dt,vt=tt,J=-yt,qt=$+it,te=Math.cos(qt),Vt=Math.sin(qt);return{x1:I*Math.cos(it),y1:I*Math.sin(it),x2:tt*te-yt*Vt,y2:tt*Vt+yt*te,x3:vt*te-J*Vt,y3:vt*Vt+J*te,x4:I*Math.cos(rt),y4:I*Math.sin(rt)}},z=function(I){return 180*I/Math.PI},mt=function(I,it,rt,$,D,q){var dt=I+.5*(rt-I),ct=it+.5*($-it),Et=D+.5*(rt-D),Nt=q+.5*($-q),G=Math.min(I,D,dt,Et),tt=Math.max(I,D,dt,Et),yt=Math.min(it,q,ct,Nt),vt=Math.max(it,q,ct,Nt);return new f(G,yt,tt-G,vt-yt)},ft=function(I,it,rt,$,D,q,dt,ct){var Et,Nt,G,tt,yt,vt,J,qt,te,Vt,ee,Rt,Ot,ie,pe=rt-I,ke=$-it,Kt=D-rt,oe=q-$,Ve=dt-D,Ue=ct-q;for(Nt=0;Nt<41;Nt++)te=(J=(G=I+(Et=Nt/40)*pe)+Et*((yt=rt+Et*Kt)-G))+Et*(yt+Et*(D+Et*Ve-yt)-J),Vt=(qt=(tt=it+Et*ke)+Et*((vt=$+Et*oe)-tt))+Et*(vt+Et*(q+Et*Ue-vt)-qt),Nt==0?(ee=te,Rt=Vt,Ot=te,ie=Vt):(ee=Math.min(ee,te),Rt=Math.min(Rt,Vt),Ot=Math.max(Ot,te),ie=Math.max(ie,Vt));return new f(Math.round(ee),Math.round(Rt),Math.round(Ot-ee),Math.round(ie-Rt))},ht=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,it,rt=(I=this.ctx.lineDash,it=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:it}));this.prevLineDash!==rt&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=rt)}}})(xn.API),function(t){var e=function(a){var l,f,p,v,b,w,S,x,j,R;for(f=[],p=0,v=(a+=l="\0\0\0\0".slice(a.length%4||4)).length;v>p;p+=4)(b=(a.charCodeAt(p)<<24)+(a.charCodeAt(p+1)<<16)+(a.charCodeAt(p+2)<<8)+a.charCodeAt(p+3))!==0?(w=(b=((b=((b=((b=(b-(R=b%85))/85)-(j=b%85))/85)-(x=b%85))/85)-(S=b%85))/85)%85,f.push(w+33,S+33,x+33,j+33,R+33)):f.push(122);return function(U,N){for(var Z=N;Z>0;Z--)U.pop()}(f,l.length),String.fromCharCode.apply(String,f)+"~>"},n=function(a){var l,f,p,v,b,w=String,S="length",x=255,j="charCodeAt",R="slice",U="replace";for(a[R](-2),a=a[R](0,-2)[U](/\s/g,"")[U]("z","!!!!!"),p=[],v=0,b=(a+=l="uuuuu"[R](a[S]%5||5))[S];b>v;v+=5)f=52200625*(a[j](v)-33)+614125*(a[j](v+1)-33)+7225*(a[j](v+2)-33)+85*(a[j](v+3)-33)+(a[j](v+4)-33),p.push(x&f>>24,x&f>>16,x&f>>8,x&f);return function(N,Z){for(var Y=Z;Y>0;Y--)N.pop()}(p,l[S]),w.fromCharCode.apply(w,p)},i=function(a){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),l.test(a)===!1)return"";for(var f="",p=0;p<a.length;p+=2)f+=String.fromCharCode("0x"+(a[p]+a[p+1]));return f},o=function(a){for(var l=new Uint8Array(a.length),f=a.length;f--;)l[f]=a.charCodeAt(f);return a=(l=Ad(l)).reduce(function(p,v){return p+String.fromCharCode(v)},"")};t.processDataByFilters=function(a,l){var f=0,p=a||"",v=[];for(typeof(l=l||[])=="string"&&(l=[l]),f=0;f<l.length;f+=1)switch(l[f]){case"ASCII85Decode":case"/ASCII85Decode":p=n(p),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=i(p),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=p.split("").map(function(b){return("0"+b.charCodeAt().toString(16)).slice(-2)}).join("")+">",v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[f]+'" is not implemented')}return{data:p,reverseChain:v.reverse().join(" ")}}}(xn.API),function(t){t.loadFile=function(e,n,i){return function(o,a,l){a=a!==!1,l=typeof l=="function"?l:function(){};var f=void 0;try{f=function(p,v,b){var w=new XMLHttpRequest,S=0,x=function(j){var R=j.length,U=[],N=String.fromCharCode;for(S=0;S<R;S+=1)U.push(N(255&j.charCodeAt(S)));return U.join("")};if(w.open("GET",p,!v),w.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(w.onload=function(){w.status===200?b(x(this.responseText)):b(void 0)}),w.send(null),v&&w.status===200)return x(w.responseText)}(o,a,l)}catch{}return f}(e,n,i)},t.loadImageFile=t.loadFile}(xn.API),function(t){function e(){return(Cn.html2canvas?Promise.resolve(Cn.html2canvas):Ql(()=>import("./html2canvas.esm.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(Cn.DOMPurify?Promise.resolve(Cn.DOMPurify):Ql(()=>import("./purify.es.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var i=function(l){var f=di(l);return f==="undefined"?"undefined":f==="string"||l instanceof String?"string":f==="number"||l instanceof Number?"number":f==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":f==="object"?"object":"unknown"},o=function(l,f){var p=document.createElement(l);for(var v in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[v]=f.style[v];return p},a=function l(f){var p=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),v=l.convert(Promise.resolve(),p);return v=(v=v.setProgress(1,l,1,[l])).set(f)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(l,f){return l.__proto__=f||a.prototype,l},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(l,f){return this.then(function(){switch(f=f||function(p){switch(i(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(n).then(function(p){return this.set({src:o("div",{innerHTML:l,dompurify:p})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},a.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=function p(v,b){for(var w=v.nodeType===3?document.createTextNode(v.nodeValue):v.cloneNode(!1),S=v.firstChild;S;S=S.nextSibling)b!==!0&&S.nodeType===1&&S.nodeName==="SCRIPT"||w.appendChild(p(S,b));return v.nodeType===1&&(v.nodeName==="CANVAS"?(w.width=v.width,w.height=v.height,w.getContext("2d").drawImage(v,0,0)):v.nodeName!=="TEXTAREA"&&v.nodeName!=="SELECT"||(w.value=v.value),w.addEventListener("load",function(){w.scrollTop=v.scrollTop,w.scrollLeft=v.scrollLeft},!0)),w}(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(f){var p=this.opt.jsPDF,v=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=v,v)for(var S=0;S<v.length;++S){var x=v[S],j=x.src.find(function(R){return R.format==="truetype"});j&&p.addFont(j.url,x.ref.name,x.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,p.context2d.save(!0),f(this.prop.container,w)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(l,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(l,f):this.outputPdf(l,f)},a.prototype.outputPdf=function(l,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,f)})},a.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},a.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(l){if(i(l)!=="object")return this;var f=Object.keys(l||{}).map(function(p){if(p in a.template.prop)return function(){this.prop[p]=l[p]};switch(p){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[p]=l[p]}}},this);return this.then(function(){return this.thenList(f)})},a.prototype.get=function(l,f){return this.then(function(){var p=l in a.template.prop?this.prop[l]:this.opt[l];return f?f(p):p})},a.prototype.setMargin=function(l){return this.then(function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},a.prototype.setPageSize=function(l){function f(p,v){return Math.floor(p*v/72*96)}return this.then(function(){(l=l||xn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:f(l.inner.width,l.k),height:f(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},a.prototype.setProgress=function(l,f,p,v){return l!=null&&(this.progress.val=l),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(l,f,p,v){return this.setProgress(l?this.progress.val+l:null,f||null,p?this.progress.n+p:null,v?this.progress.stack.concat(v):null)},a.prototype.then=function(l,f){var p=this;return this.thenCore(l,f,function(v,b){return p.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(w){return p.updateProgress(null,v),w}).then(v,b).then(function(w){return p.updateProgress(1),w})})},a.prototype.thenCore=function(l,f,p){p=p||Promise.prototype.then,l&&(l=l.bind(this)),f&&(f=f.bind(this));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),b=p.call(v,l,f);return a.convert(b,this.__proto__)},a.prototype.thenExternal=function(l,f){return Promise.prototype.then.call(this,l,f)},a.prototype.thenList=function(l){var f=this;return l.forEach(function(p){f=f.thenCore(p)}),f},a.prototype.catch=function(l){l&&(l=l.bind(this));var f=Promise.prototype.catch.call(this,l);return a.convert(f,this)},a.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},a.prototype.error=function(l){return this.then(function(){throw new Error(l)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,xn.getPageSize=function(l,f,p){if(di(l)==="object"){var v=l;l=v.orientation,f=v.unit||f,p=v.format||p}f=f||"mm",p=p||"a4",l=(""+(l||"P")).toLowerCase();var b,w=(""+p).toLowerCase(),S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+f}var x,j=0,R=0;if(S.hasOwnProperty(w))j=S[w][1]/b,R=S[w][0]/b;else try{j=p[1],R=p[0]}catch{throw new Error("Invalid format: "+p)}if(l==="p"||l==="portrait")l="p",R>j&&(x=R,R=j,j=x);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",j>R&&(x=R,R=j,j=x)}return{width:R,height:j,unit:f,k:b,orientation:l}},t.html=function(l,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Od):null;var p=new a(f);return f.worker?p:p.from(l).doCallback()}}(xn.API),xn.API.addJS=function(t){return gg=t,this.internal.events.subscribe("postPutResources",function(){rh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),pg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+gg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rh!==void 0&&pg!==void 0&&this.internal.out("/Names <</JavaScript "+rh+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),a=0;a<o.length;a++){var l=o[a],f=i.exec(l);if(f!=null){var p=f[1];n.internal.newObjectDeferredBegin(p,!1)}n.internal.write(l)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,b=[];for(a=0;a<v;a++){var w=n.internal.newObject();b.push(w);var S=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var x=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<b.length;a++)n.internal.write("(page_"+(a+1)+")"+b[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+x+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,o,a){var l={title:o,options:a,children:[]};return i==null&&(i=this.root),i.children.push(l),l},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var l=i.children[a];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var f=this.count=this.count_r({count:0},l);if(f>0&&this.line("/Count "+f),l.options&&l.options.pageNumber){var p=n.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var v=0;v<i.children.length;v++)this.renderItems(i.children[v])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,o){for(var a=0;a<o.children.length;a++)i.count++,this.count_r(i,o.children[a]);return i.count}}])}(xn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,o,a,l,f){var p,v=this.decode.DCT_DECODE,b=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=l||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(p=function(w){for(var S,x=256*w.charCodeAt(4)+w.charCodeAt(5),j=w.length,R={width:0,height:0,numcomponents:1},U=4;U<j;U+=2){if(U+=x,e.indexOf(w.charCodeAt(U+1))!==-1){S=256*w.charCodeAt(U+5)+w.charCodeAt(U+6),R={width:256*w.charCodeAt(U+7)+w.charCodeAt(U+8),height:S,numcomponents:w.charCodeAt(U+9)};break}x=256*w.charCodeAt(U+2)+w.charCodeAt(U+3)}return R}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:f=this.color_spaces.DEVICE_GRAY;break;case 4:f=this.color_spaces.DEVICE_CMYK;break;case 3:f=this.color_spaces.DEVICE_RGB}b={data:n,width:p.width,height:p.height,colorSpace:f,bitsPerComponent:8,filter:v,index:i,alias:o}}return b}}(xn.API);var Lu,sh,mg,vg,yg,rC=function(){var t,e,n;function i(a){var l,f,p,v,b,w,S,x,j,R,U,N,Z,Y;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(l=this.readUInt32(),j=(function(){var kt,At;for(At=[],kt=0;kt<4;++kt)At.push(String.fromCharCode(this.data[this.pos++]));return At}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},b=this.readUInt16(),v=this.readUInt16()||100,w.delay=1e3*b/v,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(j==="fdAT"&&(this.pos+=4,l-=4),a=(w!=null?w.data:void 0)||this.imgData,N=0;0<=l?N<l:N>l;0<=l?++N:--N)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(p=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>p)throw new Error("More transparent colors than palette size");if((R=p-this.transparency.indexed.length)>0)for(Z=0;0<=R?Z<R:Z>R;0<=R?++Z:--Z)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":S=(U=this.read(l)).indexOf(0),x=String.fromCharCode.apply(String,U.slice(0,S)),this.text[x]=String.fromCharCode.apply(String,U.slice(S+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Y=this.colorType)===4||Y===6,f=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*f,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(a){var l,f;for(f=[],l=0;0<=a?l<a:l>a;0<=a?++l:--l)f.push(this.data[this.pos++]);return f},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(a){var l=this.pixelBitlength/8,f=new Uint8Array(this.width*this.height*l),p=0,v=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function b(w,S,x,j){var R,U,N,Z,Y,kt,At,Dt,xt,gt,_t,zt,X,W,St,Mt,A,H,V,z,mt,ft=Math.ceil((v.width-w)/x),ht=Math.ceil((v.height-S)/j),I=v.width==ft&&v.height==ht;for(W=l*ft,zt=I?f:new Uint8Array(W*ht),kt=a.length,X=0,U=0;X<ht&&p<kt;){switch(a[p++]){case 0:for(Z=A=0;A<W;Z=A+=1)zt[U++]=a[p++];break;case 1:for(Z=H=0;H<W;Z=H+=1)R=a[p++],Y=Z<l?0:zt[U-l],zt[U++]=(R+Y)%256;break;case 2:for(Z=V=0;V<W;Z=V+=1)R=a[p++],N=(Z-Z%l)/l,St=X&&zt[(X-1)*W+N*l+Z%l],zt[U++]=(St+R)%256;break;case 3:for(Z=z=0;z<W;Z=z+=1)R=a[p++],N=(Z-Z%l)/l,Y=Z<l?0:zt[U-l],St=X&&zt[(X-1)*W+N*l+Z%l],zt[U++]=(R+Math.floor((Y+St)/2))%256;break;case 4:for(Z=mt=0;mt<W;Z=mt+=1)R=a[p++],N=(Z-Z%l)/l,Y=Z<l?0:zt[U-l],X===0?St=Mt=0:(St=zt[(X-1)*W+N*l+Z%l],Mt=N&&zt[(X-1)*W+(N-1)*l+Z%l]),At=Y+St-Mt,Dt=Math.abs(At-Y),gt=Math.abs(At-St),_t=Math.abs(At-Mt),xt=Dt<=gt&&Dt<=_t?Y:gt<=_t?St:Mt,zt[U++]=(R+xt)%256;break;default:throw new Error("Invalid filter algorithm: "+a[p-1])}if(!I){var it=((S+X*j)*v.width+w)*l,rt=X*W;for(Z=0;Z<ft;Z+=1){for(var $=0;$<l;$+=1)f[it++]=zt[rt++];it+=(x-1)*l}}X++}}return a=RL(a),v.interlaceMethod==1?(b(0,0,8,8),b(4,0,8,8),b(0,4,4,8),b(2,0,4,4),b(0,2,2,4),b(1,0,2,2),b(0,1,1,2)):b(0,0,1,1),f},i.prototype.decodePalette=function(){var a,l,f,p,v,b,w,S,x;for(f=this.palette,b=this.transparency.indexed||[],v=new Uint8Array((b.length||0)+f.length),p=0,a=0,l=w=0,S=f.length;w<S;l=w+=3)v[p++]=f[l],v[p++]=f[l+1],v[p++]=f[l+2],v[p++]=(x=b[a++])!=null?x:255;return v},i.prototype.copyToImageData=function(a,l){var f,p,v,b,w,S,x,j,R,U,N;if(p=this.colors,R=null,f=this.hasAlphaChannel,this.palette.length&&(R=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),p=4,f=!0),j=(v=a.data||a).length,w=R||l,b=S=0,p===1)for(;b<j;)x=R?4*l[b/4]:S,U=w[x++],v[b++]=U,v[b++]=U,v[b++]=U,v[b++]=f?w[x++]:255,S=x;else for(;b<j;)x=R?4*l[b/4]:S,v[b++]=w[x++],v[b++]=w[x++],v[b++]=w[x++],v[b++]=f?w[x++]:255,S=x},i.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var o=function(){if(Object.prototype.toString.call(Cn)==="[object Window]"){try{e=Cn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(a){var l;if(o()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(l=new Image).src=e.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(a){var l,f,p,v,b,w,S,x;if(this.animation){for(x=[],f=b=0,w=(S=this.animation.frames).length;b<w;f=++b)l=S[f],p=a.createImageData(l.width,l.height),v=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(p,v),l.imageData=p,x.push(l.image=t(p));return x}},i.prototype.renderFrame=function(a,l){var f,p,v;return f=(p=this.animation.frames)[l],v=p[l-1],l===0&&a.clearRect(0,0,this.width,this.height),(v!=null?v.disposeOp:void 0)===1?a.clearRect(v.xOffset,v.yOffset,v.width,v.height):(v!=null?v.disposeOp:void 0)===2&&a.putImageData(v.imageData,v.xOffset,v.yOffset),f.blendOp===0&&a.clearRect(f.xOffset,f.yOffset,f.width,f.height),a.drawImage(f.image,f.xOffset,f.yOffset)},i.prototype.animate=function(a){var l,f,p,v,b,w,S=this;return f=0,w=this.animation,v=w.numFrames,p=w.frames,b=w.numPlays,(l=function(){var x,j;if(x=f++%v,j=p[x],S.renderFrame(a,x),v>1&&f/v<b)return S.animation._timeout=setTimeout(l,j.delay)})()},i.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},i.prototype.render=function(a){var l,f;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,l=a.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(f=l.createImageData(this.width,this.height),this.copyToImageData(f,this.decodePixels()),l.putImageData(f,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function sC(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,o=t[e++],a=o>>7,l=1<<(7&o)+1;t[e++],t[e++];var f=null,p=null;a&&(f=e,p=l,e+=3*l);var v=!0,b=[],w=0,S=null,x=0,j=null;for(this.width=n,this.height=i;v&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,j=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((X=t[e++])>=0))throw Error("Invalid block size");if(X===0)break;e+=X}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var R=t[e++];w=t[e++]|t[e++]<<8,S=t[e++],!(1&R)&&(S=null),x=R>>2&7,e++;break;case 254:for(;;){if(!((X=t[e++])>=0))throw Error("Invalid block size");if(X===0)break;e+=X}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var U=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,Z=t[e++]|t[e++]<<8,Y=t[e++]|t[e++]<<8,kt=t[e++],At=kt>>6&1,Dt=1<<(7&kt)+1,xt=f,gt=p,_t=!1;kt>>7&&(_t=!0,xt=e,gt=Dt,e+=3*Dt);var zt=e;for(e++;;){var X;if(!((X=t[e++])>=0))throw Error("Invalid block size");if(X===0)break;e+=X}b.push({x:U,y:N,width:Z,height:Y,has_local_palette:_t,palette_offset:xt,palette_size:gt,data_offset:zt,data_length:e-zt,transparent_index:S,interlaced:!!At,delay:w,disposal:x});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return j},this.frameInfo=function(W){if(W<0||W>=b.length)throw new Error("Frame index out of range.");return b[W]},this.decodeAndBlitFrameBGRA=function(W,St){var Mt=this.frameInfo(W),A=Mt.width*Mt.height,H=new Uint8Array(A);_g(t,Mt.data_offset,H,A);var V=Mt.palette_offset,z=Mt.transparent_index;z===null&&(z=256);var mt=Mt.width,ft=n-mt,ht=mt,I=4*(Mt.y*n+Mt.x),it=4*((Mt.y+Mt.height)*n+Mt.x),rt=I,$=4*ft;Mt.interlaced===!0&&($+=4*n*7);for(var D=8,q=0,dt=H.length;q<dt;++q){var ct=H[q];if(ht===0&&(ht=mt,(rt+=$)>=it&&($=4*ft+4*n*(D-1),rt=I+(mt+ft)*(D<<1),D>>=1)),ct===z)rt+=4;else{var Et=t[V+3*ct],Nt=t[V+3*ct+1],G=t[V+3*ct+2];St[rt++]=G,St[rt++]=Nt,St[rt++]=Et,St[rt++]=255}--ht}},this.decodeAndBlitFrameRGBA=function(W,St){var Mt=this.frameInfo(W),A=Mt.width*Mt.height,H=new Uint8Array(A);_g(t,Mt.data_offset,H,A);var V=Mt.palette_offset,z=Mt.transparent_index;z===null&&(z=256);var mt=Mt.width,ft=n-mt,ht=mt,I=4*(Mt.y*n+Mt.x),it=4*((Mt.y+Mt.height)*n+Mt.x),rt=I,$=4*ft;Mt.interlaced===!0&&($+=4*n*7);for(var D=8,q=0,dt=H.length;q<dt;++q){var ct=H[q];if(ht===0&&(ht=mt,(rt+=$)>=it&&($=4*ft+4*n*(D-1),rt=I+(mt+ft)*(D<<1),D>>=1)),ct===z)rt+=4;else{var Et=t[V+3*ct],Nt=t[V+3*ct+1],G=t[V+3*ct+2];St[rt++]=Et,St[rt++]=Nt,St[rt++]=G,St[rt++]=255}--ht}}}function _g(t,e,n,i){for(var o=t[e++],a=1<<o,l=a+1,f=l+1,p=o+1,v=(1<<p)-1,b=0,w=0,S=0,x=t[e++],j=new Int32Array(4096),R=null;;){for(;b<16&&x!==0;)w|=t[e++]<<b,b+=8,x===1?x=t[e++]:--x;if(b<p)break;var U=w&v;if(w>>=p,b-=p,U!==a){if(U===l)break;for(var N=U<f?U:R,Z=0,Y=N;Y>a;)Y=j[Y]>>8,++Z;var kt=Y;if(S+Z+(N!==U?1:0)>i)return void vi.log("Warning, gif stream longer than expected.");n[S++]=kt;var At=S+=Z;for(N!==U&&(n[S++]=kt),Y=N;Z--;)Y=j[Y],n[--At]=255&Y,Y>>=8;R!==null&&f<4096&&(j[f++]=R<<8|kt,f>=v+1&&p<12&&(++p,v=v<<1|1)),R=U}else f=l+1,v=(1<<(p=o+1))-1,R=null}return S!==i&&vi.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Kf(t){var e,n,i,o,a,l=Math.floor,f=new Array(64),p=new Array(64),v=new Array(64),b=new Array(64),w=new Array(65535),S=new Array(65535),x=new Array(64),j=new Array(64),R=[],U=0,N=7,Z=new Array(64),Y=new Array(64),kt=new Array(64),At=new Array(256),Dt=new Array(2048),xt=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],gt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_t=[0,1,2,3,4,5,6,7,8,9,10,11],zt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],X=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],W=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],St=[0,1,2,3,4,5,6,7,8,9,10,11],Mt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],A=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(I,it){for(var rt=0,$=0,D=new Array,q=1;q<=16;q++){for(var dt=1;dt<=I[q];dt++)D[it[$]]=[],D[it[$]][0]=rt,D[it[$]][1]=q,$++,rt++;rt*=2}return D}function V(I){for(var it=I[0],rt=I[1]-1;rt>=0;)it&1<<rt&&(U|=1<<N),rt--,--N<0&&(U==255?(z(255),z(0)):z(U),N=7,U=0)}function z(I){R.push(I)}function mt(I){z(I>>8&255),z(255&I)}function ft(I,it,rt,$,D){for(var q,dt=D[0],ct=D[240],Et=function(Vt,ee){var Rt,Ot,ie,pe,ke,Kt,oe,Ve,Ue,Ge,Oe=0;for(Ue=0;Ue<8;++Ue){Rt=Vt[Oe],Ot=Vt[Oe+1],ie=Vt[Oe+2],pe=Vt[Oe+3],ke=Vt[Oe+4],Kt=Vt[Oe+5],oe=Vt[Oe+6];var Sn=Rt+(Ve=Vt[Oe+7]),tn=Rt-Ve,si=Ot+oe,an=Ot-oe,bn=ie+Kt,Un=ie-Kt,je=pe+ke,qi=pe-ke,Mn=Sn+je,ci=Sn-je,gi=si+bn,In=si-bn;Vt[Oe]=Mn+gi,Vt[Oe+4]=Mn-gi;var ln=.707106781*(In+ci);Vt[Oe+2]=ci+ln,Vt[Oe+6]=ci-ln;var Ke=.382683433*((Mn=qi+Un)-(In=an+tn)),Ze=.5411961*Mn+Ke,Qn=1.306562965*In+Ke,$i=.707106781*(gi=Un+an),Re=tn+$i,Qe=tn-$i;Vt[Oe+5]=Qe+Ze,Vt[Oe+3]=Qe-Ze,Vt[Oe+1]=Re+Qn,Vt[Oe+7]=Re-Qn,Oe+=8}for(Oe=0,Ue=0;Ue<8;++Ue){Rt=Vt[Oe],Ot=Vt[Oe+8],ie=Vt[Oe+16],pe=Vt[Oe+24],ke=Vt[Oe+32],Kt=Vt[Oe+40],oe=Vt[Oe+48];var pi=Rt+(Ve=Vt[Oe+56]),hi=Rt-Ve,Ki=Ot+oe,Vn=Ot-oe,qe=ie+Kt,Yi=ie-Kt,Cs=pe+ke,kr=pe-ke,mr=pi+Cs,or=pi-Cs,vr=Ki+qe,Vi=Ki-qe;Vt[Oe]=mr+vr,Vt[Oe+32]=mr-vr;var ar=.707106781*(Vi+or);Vt[Oe+16]=or+ar,Vt[Oe+48]=or-ar;var jr=.382683433*((mr=kr+Yi)-(Vi=Vn+hi)),Ps=.5411961*mr+jr,Gs=1.306562965*Vi+jr,Ws=.707106781*(vr=Yi+Vn),Vr=hi+Ws,us=hi-Ws;Vt[Oe+40]=us+Ps,Vt[Oe+24]=us-Ps,Vt[Oe+8]=Vr+Gs,Vt[Oe+56]=Vr-Gs,Oe++}for(Ue=0;Ue<64;++Ue)Ge=Vt[Ue]*ee[Ue],x[Ue]=Ge>0?Ge+.5|0:Ge-.5|0;return x}(I,it),Nt=0;Nt<64;++Nt)j[xt[Nt]]=Et[Nt];var G=j[0]-rt;rt=j[0],G==0?V($[0]):(V($[S[q=32767+G]]),V(w[q]));for(var tt=63;tt>0&&j[tt]==0;)tt--;if(tt==0)return V(dt),rt;for(var yt,vt=1;vt<=tt;){for(var J=vt;j[vt]==0&&vt<=tt;)++vt;var qt=vt-J;if(qt>=16){yt=qt>>4;for(var te=1;te<=yt;++te)V(ct);qt&=15}q=32767+j[vt],V(D[(qt<<4)+S[q]]),V(w[q]),vt++}return tt!=63&&V(dt),rt}function ht(I){I=Math.min(Math.max(I,1),100),a!=I&&(function(it){for(var rt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$=0;$<64;$++){var D=l((rt[$]*it+50)/100);D=Math.min(Math.max(D,1),255),f[xt[$]]=D}for(var q=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],dt=0;dt<64;dt++){var ct=l((q[dt]*it+50)/100);ct=Math.min(Math.max(ct,1),255),p[xt[dt]]=ct}for(var Et=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Nt=0,G=0;G<8;G++)for(var tt=0;tt<8;tt++)v[Nt]=1/(f[xt[Nt]]*Et[G]*Et[tt]*8),b[Nt]=1/(p[xt[Nt]]*Et[G]*Et[tt]*8),Nt++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),a=I)}this.encode=function(I,it){it&&ht(it),R=new Array,U=0,N=7,mt(65496),mt(65504),mt(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),mt(1),mt(1),z(0),z(0),function(){mt(65499),mt(132),z(0);for(var Ot=0;Ot<64;Ot++)z(f[Ot]);z(1);for(var ie=0;ie<64;ie++)z(p[ie])}(),function(Ot,ie){mt(65472),mt(17),z(8),mt(ie),mt(Ot),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(I.width,I.height),function(){mt(65476),mt(418),z(0);for(var Ot=0;Ot<16;Ot++)z(gt[Ot+1]);for(var ie=0;ie<=11;ie++)z(_t[ie]);z(16);for(var pe=0;pe<16;pe++)z(zt[pe+1]);for(var ke=0;ke<=161;ke++)z(X[ke]);z(1);for(var Kt=0;Kt<16;Kt++)z(W[Kt+1]);for(var oe=0;oe<=11;oe++)z(St[oe]);z(17);for(var Ve=0;Ve<16;Ve++)z(Mt[Ve+1]);for(var Ue=0;Ue<=161;Ue++)z(A[Ue])}(),mt(65498),mt(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var rt=0,$=0,D=0;U=0,N=7,this.encode.displayName="_encode_";for(var q,dt,ct,Et,Nt,G,tt,yt,vt,J=I.data,qt=I.width,te=I.height,Vt=4*qt,ee=0;ee<te;){for(q=0;q<Vt;){for(Nt=Vt*ee+q,tt=-1,yt=0,vt=0;vt<64;vt++)G=Nt+(yt=vt>>3)*Vt+(tt=4*(7&vt)),ee+yt>=te&&(G-=Vt*(ee+1+yt-te)),q+tt>=Vt&&(G-=q+tt-Vt+4),dt=J[G++],ct=J[G++],Et=J[G++],Z[vt]=(Dt[dt]+Dt[ct+256>>0]+Dt[Et+512>>0]>>16)-128,Y[vt]=(Dt[dt+768>>0]+Dt[ct+1024>>0]+Dt[Et+1280>>0]>>16)-128,kt[vt]=(Dt[dt+1280>>0]+Dt[ct+1536>>0]+Dt[Et+1792>>0]>>16)-128;rt=ft(Z,v,rt,e,i),$=ft(Y,b,$,n,o),D=ft(kt,b,D,n,o),q+=32}ee+=8}if(N>=0){var Rt=[];Rt[1]=N+1,Rt[0]=(1<<N+1)-1,V(Rt)}return mt(65497),new Uint8Array(R)},t=t||50,function(){for(var I=String.fromCharCode,it=0;it<256;it++)At[it]=I(it)}(),e=H(gt,_t),n=H(W,St),i=H(zt,X),o=H(Mt,A),function(){for(var I=1,it=2,rt=1;rt<=15;rt++){for(var $=I;$<it;$++)S[32767+$]=rt,w[32767+$]=[],w[32767+$][1]=rt,w[32767+$][0]=$;for(var D=-(it-1);D<=-I;D++)S[32767+D]=rt,w[32767+D]=[],w[32767+D][1]=rt,w[32767+D][0]=it-1+D;I<<=1,it<<=1}}(),function(){for(var I=0;I<256;I++)Dt[I]=19595*I,Dt[I+256>>0]=38470*I,Dt[I+512>>0]=7471*I+32768,Dt[I+768>>0]=-11059*I,Dt[I+1024>>0]=-21709*I,Dt[I+1280>>0]=32768*I+8421375,Dt[I+1536>>0]=-27439*I,Dt[I+1792>>0]=-5329*I}(),ht(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Wo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bg(t){function e(gt){if(!gt)throw Error("assert :P")}function n(gt,_t,zt){for(var X=0;4>X;X++)if(gt[_t+X]!=zt.charCodeAt(X))return!0;return!1}function i(gt,_t,zt,X,W){for(var St=0;St<W;St++)gt[_t+St]=zt[X+St]}function o(gt,_t,zt,X){for(var W=0;W<X;W++)gt[_t+W]=zt}function a(gt){return new Int32Array(gt)}function l(gt,_t){for(var zt=[],X=0;X<gt;X++)zt.push(new _t);return zt}function f(gt,_t){var zt=[];return function X(W,St,Mt){for(var A=Mt[St],H=0;H<A&&(W.push(Mt.length>St+1?[]:new _t),!(Mt.length<St+1));H++)X(W[H],St+1,Mt)}(zt,0,gt),zt}var p=function(){var gt=this;function _t(d,_){for(var E=1<<_-1>>>0;d&E;)E>>>=1;return E?(d&E-1)+E:d}function zt(d,_,E,O,nt){e(!(O%E));do d[_+(O-=E)]=nt;while(0<O)}function X(d,_,E,O,nt){if(e(2328>=nt),512>=nt)var at=a(512);else if((at=a(nt))==null)return 0;return function(ut,pt,bt,Bt,Yt,ve){var ye,le,Ce=pt,xe=1<<bt,Qt=a(16),re=a(16);for(e(Yt!=0),e(Bt!=null),e(ut!=null),e(0<bt),le=0;le<Yt;++le){if(15<Bt[le])return 0;++Qt[Bt[le]]}if(Qt[0]==Yt)return 0;for(re[1]=0,ye=1;15>ye;++ye){if(Qt[ye]>1<<ye)return 0;re[ye+1]=re[ye]+Qt[ye]}for(le=0;le<Yt;++le)ye=Bt[le],0<Bt[le]&&(ve[re[ye]++]=le);if(re[15]==1)return(Bt=new W).g=0,Bt.value=ve[0],zt(ut,Ce,1,xe,Bt),xe;var Se,Te=-1,Ae=xe-1,Xe=0,$e=1,fn=1,s=1<<bt;for(le=0,ye=1,Yt=2;ye<=bt;++ye,Yt<<=1){if($e+=fn<<=1,0>(fn-=Qt[ye]))return 0;for(;0<Qt[ye];--Qt[ye])(Bt=new W).g=ye,Bt.value=ve[le++],zt(ut,Ce+Xe,Yt,s,Bt),Xe=_t(Xe,ye)}for(ye=bt+1,Yt=2;15>=ye;++ye,Yt<<=1){if($e+=fn<<=1,0>(fn-=Qt[ye]))return 0;for(;0<Qt[ye];--Qt[ye]){if(Bt=new W,(Xe&Ae)!=Te){for(Ce+=s,Se=1<<(Te=ye)-bt;15>Te&&!(0>=(Se-=Qt[Te]));)++Te,Se<<=1;xe+=s=1<<(Se=Te-bt),ut[pt+(Te=Xe&Ae)].g=Se+bt,ut[pt+Te].value=Ce-pt-Te}Bt.g=ye-bt,Bt.value=ve[le++],zt(ut,Ce+(Xe>>bt),Yt,s,Bt),Xe=_t(Xe,ye)}}return $e!=2*re[15]-1?0:xe}(d,_,E,O,nt,at)}function W(){this.value=this.g=0}function St(){this.value=this.g=0}function Mt(){this.G=l(5,W),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Ti,St)}function A(d,_,E,O){e(d!=null),e(_!=null),e(2147483648>O),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=_,d.pa=E,d.Jd=_,d.Yc=E+O,d.Zc=4<=O?E+O-4+1:E,q(d)}function H(d,_){for(var E=0;0<_--;)E|=ct(d,128)<<_;return E}function V(d,_){var E=H(d,_);return dt(d)?-E:E}function z(d,_,E,O){var nt,at=0;for(e(d!=null),e(_!=null),e(4294967288>O),d.Sb=O,d.Ra=0,d.u=0,d.h=0,4<O&&(O=4),nt=0;nt<O;++nt)at+=_[E+nt]<<8*nt;d.Ra=at,d.bb=O,d.oa=_,d.pa=E}function mt(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<wr-8>>>0,++d.bb,d.u-=8;rt(d)&&(d.h=1,d.u=0)}function ft(d,_){if(e(0<=_),!d.h&&_<=Er){var E=it(d)&ga[_];return d.u+=_,mt(d),E}return d.h=1,d.u=0}function ht(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function it(d){return d.Ra>>>(d.u&wr-1)>>>0}function rt(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>wr}function $(d,_){d.u=_,d.h=rt(d)}function D(d){d.u>=ma&&(e(d.u>=ma),mt(d))}function q(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function dt(d){return H(d,1)}function ct(d,_){var E=d.Ca;0>d.b&&q(d);var O=d.b,nt=E*_>>>8,at=(d.I>>>O>nt)+0;for(at?(E-=nt,d.I-=nt+1<<O>>>0):E=nt+1,O=E,nt=0;256<=O;)nt+=8,O>>=8;return O=7^nt+cr[O],d.b-=O,d.Ca=(E<<O)-1,at}function Et(d,_,E){d[_+0]=E>>24&255,d[_+1]=E>>16&255,d[_+2]=E>>8&255,d[_+3]=E>>0&255}function Nt(d,_){return d[_+0]<<0|d[_+1]<<8}function G(d,_){return Nt(d,_)|d[_+2]<<16}function tt(d,_){return Nt(d,_)|Nt(d,_+2)<<16}function yt(d,_){var E=1<<_;return e(d!=null),e(0<_),d.X=a(E),d.X==null?0:(d.Mb=32-_,d.Xa=_,1)}function vt(d,_){e(d!=null),e(_!=null),e(d.Xa==_.Xa),i(_.X,0,d.X,0,1<<_.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function qt(d,_,E,O){e(E!=null),e(O!=null);var nt=E[0],at=O[0];return nt==0&&(nt=(d*at+_/2)/_),at==0&&(at=(_*nt+d/2)/d),0>=nt||0>=at?0:(E[0]=nt,O[0]=at,1)}function te(d,_){return d+(1<<_)-1>>>_}function Vt(d,_){return((4278255360&d)+(4278255360&_)>>>0&4278255360)+((16711935&d)+(16711935&_)>>>0&16711935)>>>0}function ee(d,_){gt[_]=function(E,O,nt,at,ut,pt,bt){var Bt;for(Bt=0;Bt<ut;++Bt){var Yt=gt[d](pt[bt+Bt-1],nt,at+Bt);pt[bt+Bt]=Vt(E[O+Bt],Yt)}}}function Rt(){this.ud=this.hd=this.jd=0}function Ot(d,_){return((4278124286&(d^_))>>>1)+(d&_)>>>0}function ie(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function pe(d,_){return ie(d+(d-_+.5>>1))}function ke(d,_,E){return Math.abs(_-E)-Math.abs(d-E)}function Kt(d,_,E,O,nt,at,ut){for(O=at[ut-1],E=0;E<nt;++E)at[ut+E]=O=Vt(d[_+E],O)}function oe(d,_,E,O,nt){var at;for(at=0;at<E;++at){var ut=d[_+at],pt=ut>>8&255,bt=16711935&(bt=(bt=16711935&ut)+((pt<<16)+pt));O[nt+at]=(4278255360&ut)+bt>>>0}}function Ve(d,_){_.jd=d>>0&255,_.hd=d>>8&255,_.ud=d>>16&255}function Ue(d,_,E,O,nt,at){var ut;for(ut=0;ut<O;++ut){var pt=_[E+ut],bt=pt>>>8,Bt=pt,Yt=255&(Yt=(Yt=pt>>>16)+((d.jd<<24>>24)*(bt<<24>>24)>>>5));Bt=255&(Bt=(Bt=Bt+((d.hd<<24>>24)*(bt<<24>>24)>>>5))+((d.ud<<24>>24)*(Yt<<24>>24)>>>5)),nt[at+ut]=(4278255360&pt)+(Yt<<16)+Bt}}function Ge(d,_,E,O,nt){gt[_]=function(at,ut,pt,bt,Bt,Yt,ve,ye,le){for(bt=ve;bt<ye;++bt)for(ve=0;ve<le;++ve)Bt[Yt++]=nt(pt[O(at[ut++])])},gt[d]=function(at,ut,pt,bt,Bt,Yt,ve){var ye=8>>at.b,le=at.Ea,Ce=at.K[0],xe=at.w;if(8>ye)for(at=(1<<at.b)-1,xe=(1<<ye)-1;ut<pt;++ut){var Qt,re=0;for(Qt=0;Qt<le;++Qt)Qt&at||(re=O(bt[Bt++])),Yt[ve++]=nt(Ce[re&xe]),re>>=ye}else gt["VP8LMapColor"+E](bt,Bt,Ce,xe,Yt,ve,ut,pt,le)}}function Oe(d,_,E,O,nt){for(E=_+E;_<E;){var at=d[_++];O[nt++]=at>>16&255,O[nt++]=at>>8&255,O[nt++]=at>>0&255}}function Sn(d,_,E,O,nt){for(E=_+E;_<E;){var at=d[_++];O[nt++]=at>>16&255,O[nt++]=at>>8&255,O[nt++]=at>>0&255,O[nt++]=at>>24&255}}function tn(d,_,E,O,nt){for(E=_+E;_<E;){var at=(ut=d[_++])>>16&240|ut>>12&15,ut=ut>>0&240|ut>>28&15;O[nt++]=at,O[nt++]=ut}}function si(d,_,E,O,nt){for(E=_+E;_<E;){var at=(ut=d[_++])>>16&248|ut>>13&7,ut=ut>>5&224|ut>>3&31;O[nt++]=at,O[nt++]=ut}}function an(d,_,E,O,nt){for(E=_+E;_<E;){var at=d[_++];O[nt++]=at>>0&255,O[nt++]=at>>8&255,O[nt++]=at>>16&255}}function bn(d,_,E,O,nt,at){if(at==0)for(E=_+E;_<E;)Et(O,((at=d[_++])[0]>>24|at[1]>>8&65280|at[2]<<8&16711680|at[3]<<24)>>>0),nt+=32;else i(O,nt,d,_,E)}function Un(d,_){gt[_][0]=gt[d+"0"],gt[_][1]=gt[d+"1"],gt[_][2]=gt[d+"2"],gt[_][3]=gt[d+"3"],gt[_][4]=gt[d+"4"],gt[_][5]=gt[d+"5"],gt[_][6]=gt[d+"6"],gt[_][7]=gt[d+"7"],gt[_][8]=gt[d+"8"],gt[_][9]=gt[d+"9"],gt[_][10]=gt[d+"10"],gt[_][11]=gt[d+"11"],gt[_][12]=gt[d+"12"],gt[_][13]=gt[d+"13"],gt[_][14]=gt[d+"0"],gt[_][15]=gt[d+"0"]}function je(d){return d==Lr||d==Cr||d==Fs||d==r}function qi(){this.eb=[],this.size=this.A=this.fb=0}function Mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ci(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qi,this.f.kb=new Mn,this.sd=null}function gi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function In(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ln(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Ke(d,_){var E=d.T,O=_.ba.f.RGBA,nt=O.eb,at=O.fb+d.ka*O.A,ut=pr[_.ba.S],pt=d.y,bt=d.O,Bt=d.f,Yt=d.N,ve=d.ea,ye=d.W,le=_.cc,Ce=_.dc,xe=_.Mc,Qt=_.Nc,re=d.ka,Se=d.ka+d.T,Te=d.U,Ae=Te+1>>1;for(re==0?ut(pt,bt,null,null,Bt,Yt,ve,ye,Bt,Yt,ve,ye,nt,at,null,null,Te):(ut(_.ec,_.fc,pt,bt,le,Ce,xe,Qt,Bt,Yt,ve,ye,nt,at-O.A,nt,at,Te),++E);re+2<Se;re+=2)le=Bt,Ce=Yt,xe=ve,Qt=ye,Yt+=d.Rc,ye+=d.Rc,at+=2*O.A,ut(pt,(bt+=2*d.fa)-d.fa,pt,bt,le,Ce,xe,Qt,Bt,Yt,ve,ye,nt,at-O.A,nt,at,Te);return bt+=d.fa,d.j+Se<d.o?(i(_.ec,_.fc,pt,bt,Te),i(_.cc,_.dc,Bt,Yt,Ae),i(_.Mc,_.Nc,ve,ye,Ae),E--):1&Se||ut(pt,bt,null,null,Bt,Yt,ve,ye,Bt,Yt,ve,ye,nt,at+O.A,null,null,Te),E}function Ze(d,_,E){var O=d.F,nt=[d.J];if(O!=null){var at=d.U,ut=_.ba.S,pt=ut==Qr||ut==Fs;_=_.ba.f.RGBA;var bt=[0],Bt=d.ka;bt[0]=d.T,d.Kb&&(Bt==0?--bt[0]:(--Bt,nt[0]-=d.width),d.j+d.ka+d.T==d.o&&(bt[0]=d.o-d.j-Bt));var Yt=_.eb;Bt=_.fb+Bt*_.A,d=Yn(O,nt[0],d.width,at,bt,Yt,Bt+(pt?0:3),_.A),e(E==bt),d&&je(ut)&&Qi(Yt,Bt,pt,at,bt,_.A)}return 0}function Qn(d){var _=d.ma,E=_.ba.S,O=11>E,nt=E==vn||E==Vo||E==Qr||E==dr||E==12||je(E);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!za(_.Oa,d,nt?11:12))return 0;if(nt&&je(E)&&Ne(),d.da)alert("todo:use_scaling");else{if(O){if(_.Ib=ln,d.Kb){if(E=d.U+1>>1,_.memory=a(d.U+2*E),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+d.U,_.Mc=_.cc,_.Nc=_.dc+E,_.Ib=Ke,Ne()}}else alert("todo:EmitYUV");nt&&(_.Jb=Ze,O&&ue())}if(O&&!fl){for(d=0;256>d;++d)pu[d]=89858*(d-128)+zl>>du,gu[d]=-22014*(d-128)+zl,df[d]=-45773*(d-128),ff[d]=113618*(d-128)+zl>>du;for(d=Ul;d<Zu;++d)_=76283*(d-16)+zl>>du,mu[d-Ul]=ni(_,255),Uc[d-Ul]=ni(_+8>>4,15);fl=1}return 1}function $i(d){var _=d.ma,E=d.U,O=d.T;return e(!(1&d.ka)),0>=E||0>=O?0:(E=_.Ib(d,_),_.Jb!=null&&_.Jb(d,_,E),_.Dc+=E,1)}function Re(d){d.ma.memory=null}function Qe(d,_,E,O){return ft(d,8)!=47?0:(_[0]=ft(d,14)+1,E[0]=ft(d,14)+1,O[0]=ft(d,1),ft(d,3)!=0?0:!d.h)}function pi(d,_){if(4>d)return d+1;var E=d-2>>1;return(2+(1&d)<<E)+ft(_,E)+1}function hi(d,_){return 120<_?_-120:1<=(E=((E=$t[_-1])>>4)*d+(8-(15&E)))?E:1;var E}function Ki(d,_,E){var O=it(E),nt=d[_+=255&O].g-8;return 0<nt&&($(E,E.u+8),O=it(E),_+=d[_].value,_+=O&(1<<nt)-1),$(E,E.u+d[_].g),d[_].value}function Vn(d,_,E){return E.g+=d.g,E.value+=d.value<<_>>>0,e(8>=E.g),d.g}function qe(d,_,E){var O=d.xc;return e((_=O==0?0:d.vc[d.md*(E>>O)+(_>>O)])<d.Wb),d.Ya[_]}function Yi(d,_,E,O){var nt=d.ab,at=d.c*_,ut=d.C;_=ut+_;var pt=E,bt=O;for(O=d.Ta,E=d.Ua;0<nt--;){var Bt=d.gc[nt],Yt=ut,ve=_,ye=pt,le=bt,Ce=(bt=O,pt=E,Bt.Ea);switch(e(Yt<ve),e(ve<=Bt.nc),Bt.hc){case 2:ll(ye,le,(ve-Yt)*Ce,bt,pt);break;case 0:var xe=Yt,Qt=ve,re=bt,Se=pt,Te=(s=Bt).Ea;xe==0&&(eo(ye,le,null,null,1,re,Se),Kt(ye,le+1,0,0,Te-1,re,Se+1),le+=Te,Se+=Te,++xe);for(var Ae=1<<s.b,Xe=Ae-1,$e=te(Te,s.b),fn=s.K,s=s.w+(xe>>s.b)*$e;xe<Qt;){var u=fn,h=s,g=1;for(qr(ye,le,re,Se-Te,1,re,Se);g<Te;){var y=(g&~Xe)+Ae;y>Te&&(y=Te),(0,no[u[h++]>>8&15])(ye,le+ +g,re,Se+g-Te,y-g,re,Se+g),g=y}le+=Te,Se+=Te,++xe&Xe||(s+=$e)}ve!=Bt.nc&&i(bt,pt-Ce,bt,pt+(ve-Yt-1)*Ce,Ce);break;case 1:for(Ce=ye,Qt=le,Te=(ye=Bt.Ea)-(Se=ye&~(re=(le=1<<Bt.b)-1)),xe=te(ye,Bt.b),Ae=Bt.K,Bt=Bt.w+(Yt>>Bt.b)*xe;Yt<ve;){for(Xe=Ae,$e=Bt,fn=new Rt,s=Qt+Se,u=Qt+ye;Qt<s;)Ve(Xe[$e++],fn),Ns(fn,Ce,Qt,le,bt,pt),Qt+=le,pt+=le;Qt<u&&(Ve(Xe[$e++],fn),Ns(fn,Ce,Qt,Te,bt,pt),Qt+=Te,pt+=Te),++Yt&re||(Bt+=xe)}break;case 3:if(ye==bt&&le==pt&&0<Bt.b){for(Qt=bt,ye=Ce=pt+(ve-Yt)*Ce-(Se=(ve-Yt)*te(Bt.Ea,Bt.b)),le=bt,re=pt,xe=[],Se=(Te=Se)-1;0<=Se;--Se)xe[Se]=le[re+Se];for(Se=Te-1;0<=Se;--Se)Qt[ye+Se]=xe[Se];ji(Bt,Yt,ve,bt,Ce,bt,pt)}else ji(Bt,Yt,ve,ye,le,bt,pt)}pt=O,bt=E}bt!=E&&i(O,E,pt,bt,at)}function Cs(d,_){var E=d.V,O=d.Ba+d.c*d.C,nt=_-d.C;if(e(_<=d.l.o),e(16>=nt),0<nt){var at=d.l,ut=d.Ta,pt=d.Ua,bt=at.width;if(Yi(d,nt,E,O),nt=pt=[pt],e((E=d.C)<(O=_)),e(at.v<at.va),O>at.o&&(O=at.o),E<at.j){var Bt=at.j-E;E=at.j,nt[0]+=Bt*bt}if(E>=O?E=0:(nt[0]+=4*at.v,at.ka=E-at.j,at.U=at.va-at.v,at.T=O-E,E=1),E){if(pt=pt[0],11>(E=d.ca).S){var Yt=E.f.RGBA,ve=(O=E.S,nt=at.U,at=at.T,Bt=Yt.eb,Yt.A),ye=at;for(Yt=Yt.fb+d.Ma*Yt.A;0<ye--;){var le=ut,Ce=pt,xe=nt,Qt=Bt,re=Yt;switch(O){case Tr:Xi(le,Ce,xe,Qt,re);break;case vn:Hi(le,Ce,xe,Qt,re);break;case Lr:Hi(le,Ce,xe,Qt,re),Qi(Qt,re,0,xe,1,0);break;case cl:Yr(le,Ce,xe,Qt,re);break;case Vo:bn(le,Ce,xe,Qt,re,1);break;case Cr:bn(le,Ce,xe,Qt,re,1),Qi(Qt,re,0,xe,1,0);break;case Qr:bn(le,Ce,xe,Qt,re,0);break;case Fs:bn(le,Ce,xe,Qt,re,0),Qi(Qt,re,1,xe,1,0);break;case dr:fs(le,Ce,xe,Qt,re);break;case r:fs(le,Ce,xe,Qt,re),ti(Qt,re,xe,1,0);break;case Il:Ar(le,Ce,xe,Qt,re);break;default:e(0)}pt+=bt,Yt+=ve}d.Ma+=at}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=E.height)}}d.C=_,e(d.C<=d.i)}function kr(d){var _;if(0<d.ua)return 0;for(_=0;_<d.Wb;++_){var E=d.Ya[_].G,O=d.Ya[_].H;if(0<E[1][O[1]+0].g||0<E[2][O[2]+0].g||0<E[3][O[3]+0].g)return 0}return 1}function mr(d,_,E,O,nt,at){if(d.Z!=0){var ut=d.qd,pt=d.rd;for(e(ei[d.Z]!=null);_<E;++_)ei[d.Z](ut,pt,O,nt,O,nt,at),ut=O,pt=nt,nt+=at;d.qd=ut,d.rd=pt}}function or(d,_){var E=d.l.ma,O=E.Z==0||E.Z==1?d.l.j:d.C;if(O=d.C<O?O:d.C,e(_<=d.l.o),_>O){var nt=d.l.width,at=E.ca,ut=E.tb+nt*O,pt=d.V,bt=d.Ba+d.c*O,Bt=d.gc;e(d.ab==1),e(Bt[0].hc==3),Kr(Bt[0],O,_,pt,bt,at,ut),mr(E,O,_,at,ut,nt)}d.C=d.Ma=_}function vr(d,_,E,O,nt,at,ut){var pt=d.$/O,bt=d.$%O,Bt=d.m,Yt=d.s,ve=E+d.$,ye=ve;nt=E+O*nt;var le=E+O*at,Ce=280+Yt.ua,xe=d.Pb?pt:16777216,Qt=0<Yt.ua?Yt.Wa:null,re=Yt.wc,Se=ve<le?qe(Yt,bt,pt):null;e(d.C<at),e(le<=nt);var Te=!1;t:for(;;){for(;Te||ve<le;){var Ae=0;if(pt>=xe){var Xe=ve-E;e((xe=d).Pb),xe.wd=xe.m,xe.xd=Xe,0<xe.s.ua&&vt(xe.s.Wa,xe.s.vb),xe=pt+be}if(bt&re||(Se=qe(Yt,bt,pt)),e(Se!=null),Se.Qb&&(_[ve]=Se.qb,Te=!0),!Te)if(D(Bt),Se.jc){Ae=Bt,Xe=_;var $e=ve,fn=Se.pd[it(Ae)&Ti-1];e(Se.jc),256>fn.g?($(Ae,Ae.u+fn.g),Xe[$e]=fn.value,Ae=0):($(Ae,Ae.u+fn.g-256),e(256<=fn.value),Ae=fn.value),Ae==0&&(Te=!0)}else Ae=Ki(Se.G[0],Se.H[0],Bt);if(Bt.h)break;if(Te||256>Ae){if(!Te)if(Se.nd)_[ve]=(Se.qb|Ae<<8)>>>0;else{if(D(Bt),Te=Ki(Se.G[1],Se.H[1],Bt),D(Bt),Xe=Ki(Se.G[2],Se.H[2],Bt),$e=Ki(Se.G[3],Se.H[3],Bt),Bt.h)break;_[ve]=($e<<24|Te<<16|Ae<<8|Xe)>>>0}if(Te=!1,++ve,++bt>=O&&(bt=0,++pt,ut!=null&&pt<=at&&!(pt%16)&&ut(d,pt),Qt!=null))for(;ye<ve;)Ae=_[ye++],Qt.X[(506832829*Ae&4294967295)>>>Qt.Mb]=Ae}else if(280>Ae){if(Ae=pi(Ae-256,Bt),Xe=Ki(Se.G[4],Se.H[4],Bt),D(Bt),Xe=hi(O,Xe=pi(Xe,Bt)),Bt.h)break;if(ve-E<Xe||nt-ve<Ae)break t;for($e=0;$e<Ae;++$e)_[ve+$e]=_[ve+$e-Xe];for(ve+=Ae,bt+=Ae;bt>=O;)bt-=O,++pt,ut!=null&&pt<=at&&!(pt%16)&&ut(d,pt);if(e(ve<=nt),bt&re&&(Se=qe(Yt,bt,pt)),Qt!=null)for(;ye<ve;)Ae=_[ye++],Qt.X[(506832829*Ae&4294967295)>>>Qt.Mb]=Ae}else{if(!(Ae<Ce))break t;for(Te=Ae-280,e(Qt!=null);ye<ve;)Ae=_[ye++],Qt.X[(506832829*Ae&4294967295)>>>Qt.Mb]=Ae;Ae=ve,e(!(Te>>>(Xe=Qt).Xa)),_[Ae]=Xe.X[Te],Te=!0}Te||e(Bt.h==rt(Bt))}if(d.Pb&&Bt.h&&ve<nt)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&vt(d.s.vb,d.s.Wa);else{if(Bt.h)break t;ut!=null&&ut(d,pt>at?at:pt),d.a=0,d.$=ve-E}return 1}return d.a=3,0}function Vi(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var _=d.Wa;_!=null&&(_.X=null),d.vb=null,e(d!=null)}function ar(){var d=new Fa;return d==null?null:(d.a=0,d.xb=jl,Un("Predictor","VP8LPredictors"),Un("Predictor","VP8LPredictors_C"),Un("PredictorAdd","VP8LPredictorsAdd"),Un("PredictorAdd","VP8LPredictorsAdd_C"),ll=oe,Ns=Ue,Xi=Oe,Hi=Sn,fs=tn,Ar=si,Yr=an,gt.VP8LMapColor32b=Ds,gt.VP8LMapColor8b=qo,d)}function jr(d,_,E,O,nt){var at=1,ut=[d],pt=[_],bt=O.m,Bt=O.s,Yt=null,ve=0;t:for(;;){if(E)for(;at&&ft(bt,1);){var ye=ut,le=pt,Ce=O,xe=1,Qt=Ce.m,re=Ce.gc[Ce.ab],Se=ft(Qt,2);if(Ce.Oc&1<<Se)at=0;else{switch(Ce.Oc|=1<<Se,re.hc=Se,re.Ea=ye[0],re.nc=le[0],re.K=[null],++Ce.ab,e(4>=Ce.ab),Se){case 0:case 1:re.b=ft(Qt,3)+2,xe=jr(te(re.Ea,re.b),te(re.nc,re.b),0,Ce,re.K),re.K=re.K[0];break;case 3:var Te,Ae=ft(Qt,8)+1,Xe=16<Ae?0:4<Ae?1:2<Ae?2:3;if(ye[0]=te(re.Ea,Xe),re.b=Xe,Te=xe=jr(Ae,1,0,Ce,re.K)){var $e,fn=Ae,s=re,u=1<<(8>>s.b),h=a(u);if(h==null)Te=0;else{var g=s.K[0],y=s.w;for(h[0]=s.K[0][0],$e=1;$e<1*fn;++$e)h[$e]=Vt(g[y+$e],h[$e-1]);for(;$e<4*u;++$e)h[$e]=0;s.K[0]=null,s.K[0]=h,Te=1}}xe=Te;break;case 2:break;default:e(0)}at=xe}}if(ut=ut[0],pt=pt[0],at&&ft(bt,1)&&!(at=1<=(ve=ft(bt,4))&&11>=ve)){O.a=3;break t}var P;if(P=at)e:{var B,T,K,st=O,jt=ut,Tt=pt,ne=ve,ge=E,Ee=st.m,Ie=st.s,ze=[null],yn=1,Ft=0,Ut=de[ne];n:for(;;){if(ge&&ft(Ee,1)){var Jt=ft(Ee,3)+2,_e=te(jt,Jt),ae=te(Tt,Jt),me=_e*ae;if(!jr(_e,ae,0,st,ze))break n;for(ze=ze[0],Ie.xc=Jt,B=0;B<me;++B){var Q=ze[B]>>8&65535;ze[B]=Q,Q>=yn&&(yn=Q+1)}}if(Ee.h)break n;for(T=0;5>T;++T){var ot=k[T];!T&&0<ne&&(ot+=1<<ne),Ft<ot&&(Ft=ot)}var Lt=l(yn*Ut,W),wt=yn,Ct=l(wt,Mt);if(Ct==null)var Pt=null;else e(65536>=wt),Pt=Ct;var Wt=a(Ft);if(Pt==null||Wt==null||Lt==null){st.a=1;break n}var Ht=Lt;for(B=K=0;B<yn;++B){var Xt=Pt[B],fe=Xt.G,he=Xt.H,Me=0,Ye=1,en=0;for(T=0;5>T;++T){ot=k[T],fe[T]=Ht,he[T]=K,!T&&0<ne&&(ot+=1<<ne);r:{var sn,Wn=ot,Jn=st,jn=Wt,ai=Ht,Nr=K,dl=0,Co=Jn.m,Ku=ft(Co,1);if(o(jn,0,0,Wn),Ku){var Po=ft(Co,1)+1,ql=ft(Co,1),gs=ft(Co,ql==0?1:8);jn[gs]=1,Po==2&&(jn[gs=ft(Co,8)]=1);var gr=1}else{var Ei=a(19),cp=ft(Co,4)+4;if(19<cp){Jn.a=3;var Gc=0;break r}for(sn=0;sn<cp;++sn)Ei[lt[sn]]=ft(Co,3);var pf=void 0,Yu=void 0,hp=Jn,hv=Ei,Wc=Wn,fp=jn,gf=0,pl=hp.m,dp=8,pp=l(128,W);i:for(;X(pp,0,7,hv,19);){if(ft(pl,1)){var fv=2+2*ft(pl,3);if((pf=2+ft(pl,fv))>Wc)break i}else pf=Wc;for(Yu=0;Yu<Wc&&pf--;){D(pl);var gp=pp[0+(127&it(pl))];$(pl,pl.u+gp.g);var yu=gp.value;if(16>yu)fp[Yu++]=yu,yu!=0&&(dp=yu);else{var dv=yu==16,mp=yu-16,pv=m[mp],vp=ft(pl,c[mp])+pv;if(Yu+vp>Wc)break i;for(var gv=dv?dp:0;0<vp--;)fp[Yu++]=gv}}gf=1;break i}gf||(hp.a=3),gr=gf}(gr=gr&&!Co.h)&&(dl=X(ai,Nr,8,jn,Wn)),gr&&dl!=0?Gc=dl:(Jn.a=3,Gc=0)}if(Gc==0)break n;if(Ye&&F[T]==1&&(Ye=Ht[K].g==0),Me+=Ht[K].g,K+=Gc,3>=T){var Ju,mf=Wt[0];for(Ju=1;Ju<ot;++Ju)Wt[Ju]>mf&&(mf=Wt[Ju]);en+=mf}}if(Xt.nd=Ye,Xt.Qb=0,Ye&&(Xt.qb=(fe[3][he[3]+0].value<<24|fe[1][he[1]+0].value<<16|fe[2][he[2]+0].value)>>>0,Me==0&&256>fe[0][he[0]+0].value&&(Xt.Qb=1,Xt.qb+=fe[0][he[0]+0].value<<8)),Xt.jc=!Xt.Qb&&6>en,Xt.jc){var Zc,$a=Xt;for(Zc=0;Zc<Ti;++Zc){var gl=Zc,ml=$a.pd[gl],Kc=$a.G[0][$a.H[0]+gl];256<=Kc.value?(ml.g=Kc.g+256,ml.value=Kc.value):(ml.g=0,ml.value=0,gl>>=Vn(Kc,8,ml),gl>>=Vn($a.G[1][$a.H[1]+gl],16,ml),gl>>=Vn($a.G[2][$a.H[2]+gl],0,ml),Vn($a.G[3][$a.H[3]+gl],24,ml))}}}Ie.vc=ze,Ie.Wb=yn,Ie.Ya=Pt,Ie.yc=Lt,P=1;break e}P=0}if(!(at=P)){O.a=3;break t}if(0<ve){if(Bt.ua=1<<ve,!yt(Bt.Wa,ve)){O.a=1,at=0;break t}}else Bt.ua=0;var vf=O,yp=ut,mv=pt,yf=vf.s,_f=yf.xc;if(vf.c=yp,vf.i=mv,yf.md=te(yp,_f),yf.wc=_f==0?-1:(1<<_f)-1,E){O.xb=Gu;break t}if((Yt=a(ut*pt))==null){O.a=1,at=0;break t}at=(at=vr(O,Yt,0,ut,pt,pt,null))&&!bt.h;break t}return at?(nt!=null?nt[0]=Yt:(e(Yt==null),e(E)),O.$=0,E||Vi(Bt)):Vi(Bt),at}function Ps(d,_){var E=d.c*d.i,O=E+_+16*_;return e(d.c<=_),d.V=a(O),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+E+_,1)}function Gs(d,_){var E=d.C,O=_-E,nt=d.V,at=d.Ba+d.c*E;for(e(_<=d.l.o);0<O;){var ut=16<O?16:O,pt=d.l.ma,bt=d.l.width,Bt=bt*ut,Yt=pt.ca,ve=pt.tb+bt*E,ye=d.Ta,le=d.Ua;Yi(d,ut,nt,at),Si(ye,le,Yt,ve,Bt),mr(pt,E,E+ut,Yt,ve,bt),O-=ut,nt+=ut*d.c,E+=ut}e(E==_),d.C=d.Ma=_}function Ws(){this.ub=this.yd=this.td=this.Rb=0}function Vr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function us(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function ks(){this.Yb=function(){var d=[];return function _(E,O,nt){for(var at=nt[O],ut=0;ut<at&&(E.push(nt.length>O+1?[]:0),!(nt.length<O+1));ut++)_(E[ut],O+1,nt)}(d,0,[3,11]),d}()}function na(){this.jb=a(3),this.Wc=f([4,8],ks),this.Xc=f([4,17],ks)}function ia(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Zs(){this.ld=this.La=this.dd=this.tc=0}function Do(){this.Na=this.la=0}function ra(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ss(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Es(){this.uc=this.M=this.Nb=0,this.wa=Array(new Zs),this.Y=0,this.ya=Array(new Ss),this.aa=0,this.l=new lr}function co(){this.y=a(16),this.f=a(8),this.ea=a(8)}function No(){this.cb=this.a=0,this.sc="",this.m=new ht,this.Od=new Ws,this.Kc=new Vr,this.ed=new ia,this.Qa=new us,this.Ic=this.$c=this.Aa=0,this.D=new Es,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,ht),this.ia=0,this.pb=l(4,ra),this.Pa=new na,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new co),this.Hd=0,this.rb=Array(new Do),this.sb=0,this.wa=Array(new Zs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ss),this.L=this.aa=0,this.gd=f([4,2],Zs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function lr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Dn(){var d=new No;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,un||(un=mi)),d}function mn(d,_,E){return d.a==0&&(d.a=_,d.sc=E,d.cb=0),0}function bi(d,_,E){return 3<=E&&d[_+0]==157&&d[_+1]==1&&d[_+2]==42}function oi(d,_){if(d==null)return 0;if(d.a=0,d.sc="OK",_==null)return mn(d,2,"null VP8Io passed to VP8GetHeaders()");var E=_.data,O=_.w,nt=_.ha;if(4>nt)return mn(d,7,"Truncated header.");var at=E[O+0]|E[O+1]<<8|E[O+2]<<16,ut=d.Od;if(ut.Rb=!(1&at),ut.td=at>>1&7,ut.yd=at>>4&1,ut.ub=at>>5,3<ut.td)return mn(d,3,"Incorrect keyframe parameters.");if(!ut.yd)return mn(d,4,"Frame not displayable.");O+=3,nt-=3;var pt=d.Kc;if(ut.Rb){if(7>nt)return mn(d,7,"cannot parse picture header");if(!bi(E,O,nt))return mn(d,3,"Bad code word");pt.c=16383&(E[O+4]<<8|E[O+3]),pt.Td=E[O+4]>>6,pt.i=16383&(E[O+6]<<8|E[O+5]),pt.Ud=E[O+6]>>6,O+=7,nt-=7,d.za=pt.c+15>>4,d.Ub=pt.i+15>>4,_.width=pt.c,_.height=pt.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,o((at=d.Pa).jb,0,255,at.jb.length),e((at=d.Qa)!=null),at.Cb=0,at.Bb=0,at.Fb=1,o(at.Zb,0,0,at.Zb.length),o(at.Lb,0,0,at.Lb)}if(ut.ub>nt)return mn(d,7,"bad partition length");A(at=d.m,E,O,ut.ub),O+=ut.ub,nt-=ut.ub,ut.Rb&&(pt.Ld=dt(at),pt.Kd=dt(at)),pt=d.Qa;var bt,Bt=d.Pa;if(e(at!=null),e(pt!=null),pt.Cb=dt(at),pt.Cb){if(pt.Bb=dt(at),dt(at)){for(pt.Fb=dt(at),bt=0;4>bt;++bt)pt.Zb[bt]=dt(at)?V(at,7):0;for(bt=0;4>bt;++bt)pt.Lb[bt]=dt(at)?V(at,6):0}if(pt.Bb)for(bt=0;3>bt;++bt)Bt.jb[bt]=dt(at)?H(at,8):255}else pt.Bb=0;if(at.Ka)return mn(d,3,"cannot parse segment header");if((pt=d.ed).zd=dt(at),pt.Tb=H(at,6),pt.wb=H(at,3),pt.Pc=dt(at),pt.Pc&&dt(at)){for(Bt=0;4>Bt;++Bt)dt(at)&&(pt.vd[Bt]=V(at,6));for(Bt=0;4>Bt;++Bt)dt(at)&&(pt.od[Bt]=V(at,6))}if(d.L=pt.Tb==0?0:pt.zd?1:2,at.Ka)return mn(d,3,"cannot parse filter header");var Yt=nt;if(nt=bt=O,O=bt+Yt,pt=Yt,d.Xb=(1<<H(d.m,2))-1,Yt<3*(Bt=d.Xb))E=7;else{for(bt+=3*Bt,pt-=3*Bt,Yt=0;Yt<Bt;++Yt){var ve=E[nt+0]|E[nt+1]<<8|E[nt+2]<<16;ve>pt&&(ve=pt),A(d.Jc[+Yt],E,bt,ve),bt+=ve,pt-=ve,nt+=3}A(d.Jc[+Bt],E,bt,pt),E=bt<O?0:5}if(E!=0)return mn(d,E,"cannot parse partitions");for(E=H(bt=d.m,7),nt=dt(bt)?V(bt,4):0,O=dt(bt)?V(bt,4):0,pt=dt(bt)?V(bt,4):0,Bt=dt(bt)?V(bt,4):0,bt=dt(bt)?V(bt,4):0,Yt=d.Qa,ve=0;4>ve;++ve){if(Yt.Cb){var ye=Yt.Zb[ve];Yt.Fb||(ye+=E)}else{if(0<ve){d.pb[ve]=d.pb[0];continue}ye=E}var le=d.pb[ve];le.Sc[0]=Be[ni(ye+nt,127)],le.Sc[1]=We[ni(ye+0,127)],le.Eb[0]=2*Be[ni(ye+O,127)],le.Eb[1]=101581*We[ni(ye+pt,127)]>>16,8>le.Eb[1]&&(le.Eb[1]=8),le.Qc[0]=Be[ni(ye+Bt,117)],le.Qc[1]=We[ni(ye+bt,127)],le.lc=ye+bt}if(!ut.Rb)return mn(d,4,"Not a key frame.");for(dt(at),ut=d.Pa,E=0;4>E;++E){for(nt=0;8>nt;++nt)for(O=0;3>O;++O)for(pt=0;11>pt;++pt)Bt=ct(at,js[E][nt][O][pt])?H(at,8):Dr[E][nt][O][pt],ut.Wc[E][nt].Yb[O][pt]=Bt;for(nt=0;17>nt;++nt)ut.Xc[E][nt]=ut.Wc[E][Fl[nt]]}return d.kc=dt(at),d.kc&&(d.Bd=H(at,8)),d.cb=1}function mi(d,_,E,O,nt,at,ut){var pt=_[nt].Yb[E];for(E=0;16>nt;++nt){if(!ct(d,pt[E+0]))return nt;for(;!ct(d,pt[E+1]);)if(pt=_[++nt].Yb[0],E=0,nt==16)return 16;var bt=_[nt+1].Yb;if(ct(d,pt[E+2])){var Bt=d,Yt=0;if(ct(Bt,(ye=pt)[(ve=E)+3]))if(ct(Bt,ye[ve+6])){for(pt=0,ve=2*(Yt=ct(Bt,ye[ve+8]))+(ye=ct(Bt,ye[ve+9+Yt])),Yt=0,ye=Bn[ve];ye[pt];++pt)Yt+=Yt+ct(Bt,ye[pt]);Yt+=3+(8<<ve)}else ct(Bt,ye[ve+7])?(Yt=7+2*ct(Bt,165),Yt+=ct(Bt,145)):Yt=5+ct(Bt,159);else Yt=ct(Bt,ye[ve+4])?3+ct(Bt,ye[ve+5]):2;pt=bt[2]}else Yt=1,pt=bt[1];bt=ut+Pr[nt],0>(Bt=d).b&&q(Bt);var ve,ye=Bt.b,le=(ve=Bt.Ca>>1)-(Bt.I>>ye)>>31;--Bt.b,Bt.Ca+=le,Bt.Ca|=1,Bt.I-=(ve+1&le)<<ye,at[bt]=((Yt^le)-le)*O[(0<nt)+0]}return 16}function Zn(d){var _=d.rb[d.sb-1];_.la=0,_.Na=0,o(d.zc,0,0,d.zc.length),d.ja=0}function pn(d,_){if(d==null)return 0;if(_==null)return mn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!oi(d,_))return 0;if(e(d.cb),_.ac==null||_.ac(_)){_.ob&&(d.L=0);var E=vu[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=_.v-E>>4,d.zb=_.j-E>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=_.o+15+E>>4,d.Hb=_.va+15+E>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var O=d.ed;for(E=0;4>E;++E){var nt;if(d.Qa.Cb){var at=d.Qa.Lb[E];d.Qa.Fb||(at+=O.Tb)}else at=O.Tb;for(nt=0;1>=nt;++nt){var ut=d.gd[E][nt],pt=at;if(O.Pc&&(pt+=O.vd[0],nt&&(pt+=O.od[0])),0<(pt=0>pt?0:63<pt?63:pt)){var bt=pt;0<O.wb&&(bt=4<O.wb?bt>>2:bt>>1)>9-O.wb&&(bt=9-O.wb),1>bt&&(bt=1),ut.dd=bt,ut.tc=2*pt+bt,ut.ld=40<=pt?2:15<=pt?1:0}else ut.tc=0;ut.La=nt}}}E=0}else mn(d,6,"Frame setup failed"),E=d.a;if(E=E==0){if(E){d.$c=0,0<d.Aa||(d.Ic=Vc);t:{E=d.Ic,O=4*(bt=d.za);var Bt=32*bt,Yt=bt+1,ve=0<d.L?bt*(0<d.Aa?2:1):0,ye=(d.Aa==2?2:1)*bt;if((ut=O+832+(nt=3*(16*E+vu[d.L])/2*Bt)+(at=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=ut)E=0;else{if(ut>d.Vb){if(d.Vb=0,d.Ec=a(ut),d.Fc=0,d.Ec==null){E=mn(d,1,"no memory during frame initialization.");break t}d.Vb=ut}ut=d.Ec,pt=d.Fc,d.Ac=ut,d.Bc=pt,pt+=O,d.Gd=l(Bt,co),d.Hd=0,d.rb=l(Yt+1,Do),d.sb=1,d.wa=ve?l(ve,Zs):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=bt),e(!0),d.oc=ut,d.pc=pt,pt+=832,d.ya=l(ye,Ss),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=bt),d.R=16*bt,d.B=8*bt,bt=(Bt=vu[d.L])*d.R,Bt=Bt/2*d.B,d.sa=ut,d.ta=pt+bt,d.qa=d.sa,d.ra=d.ta+16*E*d.R+Bt,d.Ha=d.qa,d.Ia=d.ra+8*E*d.B+Bt,d.$c=0,pt+=nt,d.mb=at?ut:null,d.nb=at?pt:null,e(pt+at<=d.Fc+d.Vb),Zn(d),o(d.Ac,d.Bc,0,O),E=1}}if(E){if(_.ka=0,_.y=d.sa,_.O=d.ta,_.f=d.qa,_.N=d.ra,_.ea=d.Ha,_.Vd=d.Ia,_.fa=d.R,_.Rc=d.B,_.F=null,_.J=0,!ul){for(E=-255;255>=E;++E)ii[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)ds[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)xo[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)Is[255+E]=0>E?0:255<E?255:E;ul=1}io=Oo,Jr=sa,Os=Ms,xr=wi,hr=Bs,xi=il,$o=Ra,Ua=Ts,qa=Wr,fr=fa,Mr=ca,_o=ha,Rs=Ii,va=ol,bo=Oa,wo=hn,ro=yr,Xr=jo,ts[0]=Fn,ts[1]=Ma,ts[2]=Pn,ts[3]=Hr,ts[4]=Ta,ts[5]=po,ts[6]=la,ts[7]=Gr,ts[8]=Da,ts[9]=Js,ps[0]=oa,ps[1]=Ba,ps[2]=cs,ps[3]=Ys,ps[4]=Ri,ps[5]=rl,ps[6]=aa,$r[0]=Xs,$r[1]=ho,$r[2]=Ro,$r[3]=Pi,$r[4]=Io,$r[5]=sl,$r[6]=ua,E=1}else E=0}E&&(E=function(le,Ce){for(le.M=0;le.M<le.Va;++le.M){var xe,Qt=le.Jc[le.M&le.Xb],re=le.m,Se=le;for(xe=0;xe<Se.za;++xe){var Te=re,Ae=Se,Xe=Ae.Ac,$e=Ae.Bc+4*xe,fn=Ae.zc,s=Ae.ya[Ae.aa+xe];if(Ae.Qa.Bb?s.$b=ct(Te,Ae.Pa.jb[0])?2+ct(Te,Ae.Pa.jb[2]):ct(Te,Ae.Pa.jb[1]):s.$b=0,Ae.kc&&(s.Ad=ct(Te,Ae.Bd)),s.Za=!ct(Te,145)+0,s.Za){var u=s.Ob,h=0;for(Ae=0;4>Ae;++Ae){var g,y=fn[0+Ae];for(g=0;4>g;++g){y=Li[Xe[$e+g]][y];for(var P=Ui[ct(Te,y[0])];0<P;)P=Ui[2*P+ct(Te,y[P])];y=-P,Xe[$e+g]=y}i(u,h,Xe,$e,4),h+=4,fn[0+Ae]=y}}else y=ct(Te,156)?ct(Te,128)?1:3:ct(Te,163)?2:0,s.Ob[0]=y,o(Xe,$e,y,4),o(fn,0,y,4);s.Dd=ct(Te,142)?ct(Te,114)?ct(Te,183)?1:3:2:0}if(Se.m.Ka)return mn(le,7,"Premature end-of-partition0 encountered.");for(;le.ja<le.za;++le.ja){if(Se=Qt,Te=(re=le).rb[re.sb-1],Xe=re.rb[re.sb+re.ja],xe=re.ya[re.aa+re.ja],$e=re.kc?xe.Ad:0)Te.la=Xe.la=0,xe.Za||(Te.Na=Xe.Na=0),xe.Hc=0,xe.Gc=0,xe.ia=0;else{var B,T;if(Te=Xe,Xe=Se,$e=re.Pa.Xc,fn=re.ya[re.aa+re.ja],s=re.pb[fn.$b],Ae=fn.ad,u=0,h=re.rb[re.sb-1],y=g=0,o(Ae,u,0,384),fn.Za)var K=0,st=$e[3];else{P=a(16);var jt=Te.Na+h.Na;if(jt=un(Xe,$e[1],jt,s.Eb,0,P,0),Te.Na=h.Na=(0<jt)+0,1<jt)io(P,0,Ae,u);else{var Tt=P[0]+3>>3;for(P=0;256>P;P+=16)Ae[u+P]=Tt}K=1,st=$e[0]}var ne=15&Te.la,ge=15&h.la;for(P=0;4>P;++P){var Ee=1&ge;for(Tt=T=0;4>Tt;++Tt)ne=ne>>1|(Ee=(jt=un(Xe,st,jt=Ee+(1&ne),s.Sc,K,Ae,u))>K)<<7,T=T<<2|(3<jt?3:1<jt?2:Ae[u+0]!=0),u+=16;ne>>=4,ge=ge>>1|Ee<<7,g=(g<<8|T)>>>0}for(st=ne,K=ge>>4,B=0;4>B;B+=2){for(T=0,ne=Te.la>>4+B,ge=h.la>>4+B,P=0;2>P;++P){for(Ee=1&ge,Tt=0;2>Tt;++Tt)jt=Ee+(1&ne),ne=ne>>1|(Ee=0<(jt=un(Xe,$e[2],jt,s.Qc,0,Ae,u)))<<3,T=T<<2|(3<jt?3:1<jt?2:Ae[u+0]!=0),u+=16;ne>>=2,ge=ge>>1|Ee<<5}y|=T<<4*B,st|=ne<<4<<B,K|=(240&ge)<<B}Te.la=st,h.la=K,fn.Hc=g,fn.Gc=y,fn.ia=43690&y?0:s.ia,$e=!(g|y)}if(0<re.L&&(re.wa[re.Y+re.ja]=re.gd[xe.$b][xe.Za],re.wa[re.Y+re.ja].La|=!$e),Se.Ka)return mn(le,7,"Premature end-of-file encountered.")}if(Zn(le),re=Ce,Se=1,xe=(Qt=le).D,Te=0<Qt.L&&Qt.M>=Qt.zb&&Qt.M<=Qt.Va,Qt.Aa==0)t:{if(xe.M=Qt.M,xe.uc=Te,ja(Qt,xe),Se=1,xe=(T=Qt.D).Nb,Te=(y=vu[Qt.L])*Qt.R,Xe=y/2*Qt.B,P=16*xe*Qt.R,Tt=8*xe*Qt.B,$e=Qt.sa,fn=Qt.ta-Te+P,s=Qt.qa,Ae=Qt.ra-Xe+Tt,u=Qt.Ha,h=Qt.Ia-Xe+Tt,ge=(ne=T.M)==0,g=ne>=Qt.Va-1,Qt.Aa==2&&ja(Qt,T),T.uc)for(Ee=(jt=Qt).D.M,e(jt.D.uc),T=jt.yb;T<jt.Hb;++T){K=T,st=Ee;var Ie=(ze=(ot=jt).D).Nb;B=ot.R;var ze=ze.wa[ze.Y+K],yn=ot.sa,Ft=ot.ta+16*Ie*B+16*K,Ut=ze.dd,Jt=ze.tc;if(Jt!=0)if(e(3<=Jt),ot.L==1)0<K&&wo(yn,Ft,B,Jt+4),ze.La&&Xr(yn,Ft,B,Jt),0<st&&bo(yn,Ft,B,Jt+4),ze.La&&ro(yn,Ft,B,Jt);else{var _e=ot.B,ae=ot.qa,me=ot.ra+8*Ie*_e+8*K,Q=ot.Ha,ot=ot.Ia+8*Ie*_e+8*K;Ie=ze.ld,0<K&&(Ua(yn,Ft,B,Jt+4,Ut,Ie),fr(ae,me,Q,ot,_e,Jt+4,Ut,Ie)),ze.La&&(_o(yn,Ft,B,Jt,Ut,Ie),va(ae,me,Q,ot,_e,Jt,Ut,Ie)),0<st&&($o(yn,Ft,B,Jt+4,Ut,Ie),qa(ae,me,Q,ot,_e,Jt+4,Ut,Ie)),ze.La&&(Mr(yn,Ft,B,Jt,Ut,Ie),Rs(ae,me,Q,ot,_e,Jt,Ut,Ie))}}if(Qt.ia&&alert("todo:DitherRow"),re.put!=null){if(T=16*ne,ne=16*(ne+1),ge?(re.y=Qt.sa,re.O=Qt.ta+P,re.f=Qt.qa,re.N=Qt.ra+Tt,re.ea=Qt.Ha,re.W=Qt.Ia+Tt):(T-=y,re.y=$e,re.O=fn,re.f=s,re.N=Ae,re.ea=u,re.W=h),g||(ne-=y),ne>re.o&&(ne=re.o),re.F=null,re.J=null,Qt.Fa!=null&&0<Qt.Fa.length&&T<ne&&(re.J=ki(Qt,re,T,ne-T),re.F=Qt.mb,re.F==null&&re.F.length==0)){Se=mn(Qt,3,"Could not decode alpha data.");break t}T<re.j&&(y=re.j-T,T=re.j,e(!(1&y)),re.O+=Qt.R*y,re.N+=Qt.B*(y>>1),re.W+=Qt.B*(y>>1),re.F!=null&&(re.J+=re.width*y)),T<ne&&(re.O+=re.v,re.N+=re.v>>1,re.W+=re.v>>1,re.F!=null&&(re.J+=re.v),re.ka=T-re.j,re.U=re.va-re.v,re.T=ne-T,Se=re.put(re))}xe+1!=Qt.Ic||g||(i(Qt.sa,Qt.ta-Te,$e,fn+16*Qt.R,Te),i(Qt.qa,Qt.ra-Xe,s,Ae+8*Qt.B,Xe),i(Qt.Ha,Qt.Ia-Xe,u,h+8*Qt.B,Xe))}if(!Se)return mn(le,6,"Output aborted.")}return 1}(d,_)),_.bc!=null&&_.bc(_),E&=1}return E?(d.cb=0,E):0}function qn(d,_,E,O,nt){nt=d[_+E+32*O]+(nt>>3),d[_+E+32*O]=-256&nt?0>nt?0:255:nt}function As(d,_,E,O,nt,at){qn(d,_,0,E,O+nt),qn(d,_,1,E,O+at),qn(d,_,2,E,O-at),qn(d,_,3,E,O-nt)}function Ji(d){return(20091*d>>16)+d}function ur(d,_,E,O){var nt,at=0,ut=a(16);for(nt=0;4>nt;++nt){var pt=d[_+0]+d[_+8],bt=d[_+0]-d[_+8],Bt=(35468*d[_+4]>>16)-Ji(d[_+12]),Yt=Ji(d[_+4])+(35468*d[_+12]>>16);ut[at+0]=pt+Yt,ut[at+1]=bt+Bt,ut[at+2]=bt-Bt,ut[at+3]=pt-Yt,at+=4,_++}for(nt=at=0;4>nt;++nt)pt=(d=ut[at+0]+4)+ut[at+8],bt=d-ut[at+8],Bt=(35468*ut[at+4]>>16)-Ji(ut[at+12]),qn(E,O,0,0,pt+(Yt=Ji(ut[at+4])+(35468*ut[at+12]>>16))),qn(E,O,1,0,bt+Bt),qn(E,O,2,0,bt-Bt),qn(E,O,3,0,pt-Yt),at++,O+=32}function il(d,_,E,O){var nt=d[_+0]+4,at=35468*d[_+4]>>16,ut=Ji(d[_+4]),pt=35468*d[_+1]>>16;As(E,O,0,nt+ut,d=Ji(d[_+1]),pt),As(E,O,1,nt+at,d,pt),As(E,O,2,nt-at,d,pt),As(E,O,3,nt-ut,d,pt)}function sa(d,_,E,O,nt){ur(d,_,E,O),nt&&ur(d,_+16,E,O+4)}function Ms(d,_,E,O){Jr(d,_+0,E,O,1),Jr(d,_+32,E,O+128,1)}function wi(d,_,E,O){var nt;for(d=d[_+0]+4,nt=0;4>nt;++nt)for(_=0;4>_;++_)qn(E,O,_,nt,d)}function Bs(d,_,E,O){d[_+0]&&xr(d,_+0,E,O),d[_+16]&&xr(d,_+16,E,O+4),d[_+32]&&xr(d,_+32,E,O+128),d[_+48]&&xr(d,_+48,E,O+128+4)}function Oo(d,_,E,O){var nt,at=a(16);for(nt=0;4>nt;++nt){var ut=d[_+0+nt]+d[_+12+nt],pt=d[_+4+nt]+d[_+8+nt],bt=d[_+4+nt]-d[_+8+nt],Bt=d[_+0+nt]-d[_+12+nt];at[0+nt]=ut+pt,at[8+nt]=ut-pt,at[4+nt]=Bt+bt,at[12+nt]=Bt-bt}for(nt=0;4>nt;++nt)ut=(d=at[0+4*nt]+3)+at[3+4*nt],pt=at[1+4*nt]+at[2+4*nt],bt=at[1+4*nt]-at[2+4*nt],Bt=d-at[3+4*nt],E[O+0]=ut+pt>>3,E[O+16]=Bt+bt>>3,E[O+32]=ut-pt>>3,E[O+48]=Bt-bt>>3,O+=64}function Ks(d,_,E){var O,nt=_-32,at=ri,ut=255-d[nt-1];for(O=0;O<E;++O){var pt,bt=at,Bt=ut+d[_-1];for(pt=0;pt<E;++pt)d[_+pt]=bt[Bt+d[nt+pt]];_+=32}}function Ma(d,_){Ks(d,_,4)}function ho(d,_){Ks(d,_,8)}function Ba(d,_){Ks(d,_,16)}function cs(d,_){var E;for(E=0;16>E;++E)i(d,_+32*E,d,_-32,16)}function Ys(d,_){var E;for(E=16;0<E;--E)o(d,_,d[_-1],16),_+=32}function fo(d,_,E){var O;for(O=0;16>O;++O)o(_,E+32*O,d,16)}function oa(d,_){var E,O=16;for(E=0;16>E;++E)O+=d[_-1+32*E]+d[_+E-32];fo(O>>5,d,_)}function Ri(d,_){var E,O=8;for(E=0;16>E;++E)O+=d[_-1+32*E];fo(O>>4,d,_)}function rl(d,_){var E,O=8;for(E=0;16>E;++E)O+=d[_+E-32];fo(O>>4,d,_)}function aa(d,_){fo(128,d,_)}function Ln(d,_,E){return d+2*_+E+2>>2}function Pn(d,_){var E,O=_-32;for(O=new Uint8Array([Ln(d[O-1],d[O+0],d[O+1]),Ln(d[O+0],d[O+1],d[O+2]),Ln(d[O+1],d[O+2],d[O+3]),Ln(d[O+2],d[O+3],d[O+4])]),E=0;4>E;++E)i(d,_+32*E,O,0,O.length)}function Hr(d,_){var E=d[_-1],O=d[_-1+32],nt=d[_-1+64],at=d[_-1+96];Et(d,_+0,16843009*Ln(d[_-1-32],E,O)),Et(d,_+32,16843009*Ln(E,O,nt)),Et(d,_+64,16843009*Ln(O,nt,at)),Et(d,_+96,16843009*Ln(nt,at,at))}function Fn(d,_){var E,O=4;for(E=0;4>E;++E)O+=d[_+E-32]+d[_-1+32*E];for(O>>=3,E=0;4>E;++E)o(d,_+32*E,O,4)}function Ta(d,_){var E=d[_-1+0],O=d[_-1+32],nt=d[_-1+64],at=d[_-1-32],ut=d[_+0-32],pt=d[_+1-32],bt=d[_+2-32],Bt=d[_+3-32];d[_+0+96]=Ln(O,nt,d[_-1+96]),d[_+1+96]=d[_+0+64]=Ln(E,O,nt),d[_+2+96]=d[_+1+64]=d[_+0+32]=Ln(at,E,O),d[_+3+96]=d[_+2+64]=d[_+1+32]=d[_+0+0]=Ln(ut,at,E),d[_+3+64]=d[_+2+32]=d[_+1+0]=Ln(pt,ut,at),d[_+3+32]=d[_+2+0]=Ln(bt,pt,ut),d[_+3+0]=Ln(Bt,bt,pt)}function la(d,_){var E=d[_+1-32],O=d[_+2-32],nt=d[_+3-32],at=d[_+4-32],ut=d[_+5-32],pt=d[_+6-32],bt=d[_+7-32];d[_+0+0]=Ln(d[_+0-32],E,O),d[_+1+0]=d[_+0+32]=Ln(E,O,nt),d[_+2+0]=d[_+1+32]=d[_+0+64]=Ln(O,nt,at),d[_+3+0]=d[_+2+32]=d[_+1+64]=d[_+0+96]=Ln(nt,at,ut),d[_+3+32]=d[_+2+64]=d[_+1+96]=Ln(at,ut,pt),d[_+3+64]=d[_+2+96]=Ln(ut,pt,bt),d[_+3+96]=Ln(pt,bt,bt)}function po(d,_){var E=d[_-1+0],O=d[_-1+32],nt=d[_-1+64],at=d[_-1-32],ut=d[_+0-32],pt=d[_+1-32],bt=d[_+2-32],Bt=d[_+3-32];d[_+0+0]=d[_+1+64]=at+ut+1>>1,d[_+1+0]=d[_+2+64]=ut+pt+1>>1,d[_+2+0]=d[_+3+64]=pt+bt+1>>1,d[_+3+0]=bt+Bt+1>>1,d[_+0+96]=Ln(nt,O,E),d[_+0+64]=Ln(O,E,at),d[_+0+32]=d[_+1+96]=Ln(E,at,ut),d[_+1+32]=d[_+2+96]=Ln(at,ut,pt),d[_+2+32]=d[_+3+96]=Ln(ut,pt,bt),d[_+3+32]=Ln(pt,bt,Bt)}function Gr(d,_){var E=d[_+0-32],O=d[_+1-32],nt=d[_+2-32],at=d[_+3-32],ut=d[_+4-32],pt=d[_+5-32],bt=d[_+6-32],Bt=d[_+7-32];d[_+0+0]=E+O+1>>1,d[_+1+0]=d[_+0+64]=O+nt+1>>1,d[_+2+0]=d[_+1+64]=nt+at+1>>1,d[_+3+0]=d[_+2+64]=at+ut+1>>1,d[_+0+32]=Ln(E,O,nt),d[_+1+32]=d[_+0+96]=Ln(O,nt,at),d[_+2+32]=d[_+1+96]=Ln(nt,at,ut),d[_+3+32]=d[_+2+96]=Ln(at,ut,pt),d[_+3+64]=Ln(ut,pt,bt),d[_+3+96]=Ln(pt,bt,Bt)}function Js(d,_){var E=d[_-1+0],O=d[_-1+32],nt=d[_-1+64],at=d[_-1+96];d[_+0+0]=E+O+1>>1,d[_+2+0]=d[_+0+32]=O+nt+1>>1,d[_+2+32]=d[_+0+64]=nt+at+1>>1,d[_+1+0]=Ln(E,O,nt),d[_+3+0]=d[_+1+32]=Ln(O,nt,at),d[_+3+32]=d[_+1+64]=Ln(nt,at,at),d[_+3+64]=d[_+2+64]=d[_+0+96]=d[_+1+96]=d[_+2+96]=d[_+3+96]=at}function Da(d,_){var E=d[_-1+0],O=d[_-1+32],nt=d[_-1+64],at=d[_-1+96],ut=d[_-1-32],pt=d[_+0-32],bt=d[_+1-32],Bt=d[_+2-32];d[_+0+0]=d[_+2+32]=E+ut+1>>1,d[_+0+32]=d[_+2+64]=O+E+1>>1,d[_+0+64]=d[_+2+96]=nt+O+1>>1,d[_+0+96]=at+nt+1>>1,d[_+3+0]=Ln(pt,bt,Bt),d[_+2+0]=Ln(ut,pt,bt),d[_+1+0]=d[_+3+32]=Ln(E,ut,pt),d[_+1+32]=d[_+3+64]=Ln(O,E,ut),d[_+1+64]=d[_+3+96]=Ln(nt,O,E),d[_+1+96]=Ln(at,nt,O)}function Ro(d,_){var E;for(E=0;8>E;++E)i(d,_+32*E,d,_-32,8)}function Pi(d,_){var E;for(E=0;8>E;++E)o(d,_,d[_-1],8),_+=32}function zr(d,_,E){var O;for(O=0;8>O;++O)o(_,E+32*O,d,8)}function Xs(d,_){var E,O=8;for(E=0;8>E;++E)O+=d[_+E-32]+d[_-1+32*E];zr(O>>4,d,_)}function sl(d,_){var E,O=4;for(E=0;8>E;++E)O+=d[_+E-32];zr(O>>3,d,_)}function Io(d,_){var E,O=4;for(E=0;8>E;++E)O+=d[_-1+32*E];zr(O>>3,d,_)}function ua(d,_){zr(128,d,_)}function go(d,_,E){var O=d[_-E],nt=d[_+0],at=3*(nt-O)+Lo[1020+d[_-2*E]-d[_+E]],ut=zi[112+(at+4>>3)];d[_-E]=ri[255+O+zi[112+(at+3>>3)]],d[_+0]=ri[255+nt-ut]}function Fo(d,_,E,O){var nt=d[_+0],at=d[_+E];return Br[255+d[_-2*E]-d[_-E]]>O||Br[255+at-nt]>O}function Na(d,_,E,O){return 4*Br[255+d[_-E]-d[_+0]]+Br[255+d[_-2*E]-d[_+E]]<=O}function Nn(d,_,E,O,nt){var at=d[_-3*E],ut=d[_-2*E],pt=d[_-E],bt=d[_+0],Bt=d[_+E],Yt=d[_+2*E],ve=d[_+3*E];return 4*Br[255+pt-bt]+Br[255+ut-Bt]>O?0:Br[255+d[_-4*E]-at]<=nt&&Br[255+at-ut]<=nt&&Br[255+ut-pt]<=nt&&Br[255+ve-Yt]<=nt&&Br[255+Yt-Bt]<=nt&&Br[255+Bt-bt]<=nt}function Oa(d,_,E,O){var nt=2*O+1;for(O=0;16>O;++O)Na(d,_+O,E,nt)&&go(d,_+O,E)}function hn(d,_,E,O){var nt=2*O+1;for(O=0;16>O;++O)Na(d,_+O*E,1,nt)&&go(d,_+O*E,1)}function yr(d,_,E,O){var nt;for(nt=3;0<nt;--nt)Oa(d,_+=4*E,E,O)}function jo(d,_,E,O){var nt;for(nt=3;0<nt;--nt)hn(d,_+=4,E,O)}function mo(d,_,E,O,nt,at,ut,pt){for(at=2*at+1;0<nt--;){if(Nn(d,_,E,at,ut))if(Fo(d,_,E,pt))go(d,_,E);else{var bt=d,Bt=_,Yt=E,ve=bt[Bt-2*Yt],ye=bt[Bt-Yt],le=bt[Bt+0],Ce=bt[Bt+Yt],xe=bt[Bt+2*Yt],Qt=27*(Se=Lo[1020+3*(le-ye)+Lo[1020+ve-Ce]])+63>>7,re=18*Se+63>>7,Se=9*Se+63>>7;bt[Bt-3*Yt]=ri[255+bt[Bt-3*Yt]+Se],bt[Bt-2*Yt]=ri[255+ve+re],bt[Bt-Yt]=ri[255+ye+Qt],bt[Bt+0]=ri[255+le-Qt],bt[Bt+Yt]=ri[255+Ce-re],bt[Bt+2*Yt]=ri[255+xe-Se]}_+=O}}function Sr(d,_,E,O,nt,at,ut,pt){for(at=2*at+1;0<nt--;){if(Nn(d,_,E,at,ut))if(Fo(d,_,E,pt))go(d,_,E);else{var bt=d,Bt=_,Yt=E,ve=bt[Bt-Yt],ye=bt[Bt+0],le=bt[Bt+Yt],Ce=zi[112+((xe=3*(ye-ve))+4>>3)],xe=zi[112+(xe+3>>3)],Qt=Ce+1>>1;bt[Bt-2*Yt]=ri[255+bt[Bt-2*Yt]+Qt],bt[Bt-Yt]=ri[255+ve+xe],bt[Bt+0]=ri[255+ye-Ce],bt[Bt+Yt]=ri[255+le-Qt]}_+=O}}function Ra(d,_,E,O,nt,at){mo(d,_,E,1,16,O,nt,at)}function Ts(d,_,E,O,nt,at){mo(d,_,1,E,16,O,nt,at)}function ca(d,_,E,O,nt,at){var ut;for(ut=3;0<ut;--ut)Sr(d,_+=4*E,E,1,16,O,nt,at)}function ha(d,_,E,O,nt,at){var ut;for(ut=3;0<ut;--ut)Sr(d,_+=4,1,E,16,O,nt,at)}function Wr(d,_,E,O,nt,at,ut,pt){mo(d,_,nt,1,8,at,ut,pt),mo(E,O,nt,1,8,at,ut,pt)}function fa(d,_,E,O,nt,at,ut,pt){mo(d,_,1,nt,8,at,ut,pt),mo(E,O,1,nt,8,at,ut,pt)}function Ii(d,_,E,O,nt,at,ut,pt){Sr(d,_+4*nt,nt,1,8,at,ut,pt),Sr(E,O+4*nt,nt,1,8,at,ut,pt)}function ol(d,_,E,O,nt,at,ut,pt){Sr(d,_+4,1,nt,8,at,ut,pt),Sr(E,O+4,1,nt,8,at,ut,pt)}function zo(){this.ba=new ci,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new In,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Zr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function da(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ia(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Mt,this.yc=new W}function Fa(){this.xb=this.a=0,this.l=new lr,this.ca=new ci,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ia,this.ab=0,this.gc=l(4,da),this.Oc=0}function pa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new lr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vo(d,_,E,O,nt,at,ut){for(d=d==null?0:d[_+0],_=0;_<ut;++_)nt[at+_]=d+E[O+_]&255,d=nt[at+_]}function Uo(d,_,E,O,nt,at,ut){var pt;if(d==null)vo(null,null,E,O,nt,at,ut);else for(pt=0;pt<ut;++pt)nt[at+pt]=d[_+pt]+E[O+pt]&255}function yo(d,_,E,O,nt,at,ut){if(d==null)vo(null,null,E,O,nt,at,ut);else{var pt,bt=d[_+0],Bt=bt,Yt=bt;for(pt=0;pt<ut;++pt)Bt=Yt+(bt=d[_+pt])-Bt,Yt=E[O+pt]+(-256&Bt?0>Bt?0:255:Bt)&255,Bt=bt,nt[at+pt]=Yt}}function ki(d,_,E,O){var nt=_.width,at=_.o;if(e(d!=null&&_!=null),0>E||0>=O||E+O>at)return null;if(!d.Cc){if(d.ga==null){var ut;if(d.ga=new pa,(ut=d.ga==null)||(ut=_.width*_.o,e(d.Gb.length==0),d.Gb=a(ut),d.Uc=0,d.Gb==null?ut=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,ut=1),ut=!ut),!ut){ut=d.ga;var pt=d.Fa,bt=d.P,Bt=d.qc,Yt=d.mb,ve=d.nb,ye=bt+1,le=Bt-1,Ce=ut.l;if(e(pt!=null&&Yt!=null&&_!=null),ei[0]=null,ei[1]=vo,ei[2]=Uo,ei[3]=yo,ut.ca=Yt,ut.tb=ve,ut.c=_.width,ut.i=_.height,e(0<ut.c&&0<ut.i),1>=Bt)_=0;else if(ut.$a=pt[bt+0]>>0&3,ut.Z=pt[bt+0]>>2&3,ut.Lc=pt[bt+0]>>4&3,bt=pt[bt+0]>>6&3,0>ut.$a||1<ut.$a||4<=ut.Z||1<ut.Lc||bt)_=0;else if(Ce.put=$i,Ce.ac=Qn,Ce.bc=Re,Ce.ma=ut,Ce.width=_.width,Ce.height=_.height,Ce.Da=_.Da,Ce.v=_.v,Ce.va=_.va,Ce.j=_.j,Ce.o=_.o,ut.$a)t:{e(ut.$a==1),_=ar();e:for(;;){if(_==null){_=0;break t}if(e(ut!=null),ut.mc=_,_.c=ut.c,_.i=ut.i,_.l=ut.l,_.l.ma=ut,_.l.width=ut.c,_.l.height=ut.i,_.a=0,z(_.m,pt,ye,le),!jr(ut.c,ut.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&kr(_.s)?(ut.ic=1,pt=_.c*_.i,_.Ta=null,_.Ua=0,_.V=a(pt),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(ut.ic=0,_=Ps(_,ut.c)),!_))break e;_=1;break t}ut.mc=null,_=0}else _=le>=ut.c*ut.i;ut=!_}if(ut)return null;d.ga.Lc!=1?d.Ga=0:O=at-E}e(d.ga!=null),e(E+O<=at);t:{if(_=(pt=d.ga).c,at=pt.l.o,pt.$a==0){if(ye=d.rc,le=d.Vc,Ce=d.Fa,bt=d.P+1+E*_,Bt=d.mb,Yt=d.nb+E*_,e(bt<=d.P+d.qc),pt.Z!=0)for(e(ei[pt.Z]!=null),ut=0;ut<O;++ut)ei[pt.Z](ye,le,Ce,bt,Bt,Yt,_),ye=Bt,le=Yt,Yt+=_,bt+=_;else for(ut=0;ut<O;++ut)i(Bt,Yt,Ce,bt,_),ye=Bt,le=Yt,Yt+=_,bt+=_;d.rc=ye,d.Vc=le}else{if(e(pt.mc!=null),_=E+O,e((ut=pt.mc)!=null),e(_<=ut.i),ut.C>=_)_=1;else if(pt.ic||ue(),pt.ic){pt=ut.V,ye=ut.Ba,le=ut.c;var xe=ut.i,Qt=(Ce=1,bt=ut.$/le,Bt=ut.$%le,Yt=ut.m,ve=ut.s,ut.$),re=le*xe,Se=le*_,Te=ve.wc,Ae=Qt<Se?qe(ve,Bt,bt):null;e(Qt<=re),e(_<=xe),e(kr(ve));e:for(;;){for(;!Yt.h&&Qt<Se;){if(Bt&Te||(Ae=qe(ve,Bt,bt)),e(Ae!=null),D(Yt),256>(xe=Ki(Ae.G[0],Ae.H[0],Yt)))pt[ye+Qt]=xe,++Qt,++Bt>=le&&(Bt=0,++bt<=_&&!(bt%16)&&or(ut,bt));else{if(!(280>xe)){Ce=0;break e}xe=pi(xe-256,Yt);var Xe,$e=Ki(Ae.G[4],Ae.H[4],Yt);if(D(Yt),!(Qt>=($e=hi(le,$e=pi($e,Yt)))&&re-Qt>=xe)){Ce=0;break e}for(Xe=0;Xe<xe;++Xe)pt[ye+Qt+Xe]=pt[ye+Qt+Xe-$e];for(Qt+=xe,Bt+=xe;Bt>=le;)Bt-=le,++bt<=_&&!(bt%16)&&or(ut,bt);Qt<Se&&Bt&Te&&(Ae=qe(ve,Bt,bt))}e(Yt.h==rt(Yt))}or(ut,bt>_?_:bt);break e}!Ce||Yt.h&&Qt<re?(Ce=0,ut.a=Yt.h?5:3):ut.$=Qt,_=Ce}else _=vr(ut,ut.V,ut.Ba,ut.c,ut.i,_,Gs);if(!_){O=0;break t}}E+O>=at&&(d.Cc=1),O=1}if(!O)return null;if(d.Cc&&((O=d.ga)!=null&&(O.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+E*nt}function C(d,_,E,O,nt,at){for(;0<nt--;){var ut,pt=d,bt=_+(E?1:0),Bt=d,Yt=_+(E?0:3);for(ut=0;ut<O;++ut){var ve=Bt[Yt+4*ut];ve!=255&&(ve*=32897,pt[bt+4*ut+0]=pt[bt+4*ut+0]*ve>>23,pt[bt+4*ut+1]=pt[bt+4*ut+1]*ve>>23,pt[bt+4*ut+2]=pt[bt+4*ut+2]*ve>>23)}_+=at}}function et(d,_,E,O,nt){for(;0<O--;){var at;for(at=0;at<E;++at){var ut=d[_+2*at+0],pt=15&(Bt=d[_+2*at+1]),bt=4369*pt,Bt=(240&Bt|Bt>>4)*bt>>16;d[_+2*at+0]=(240&ut|ut>>4)*bt>>16&240|(15&ut|ut<<4)*bt>>16>>4&15,d[_+2*at+1]=240&Bt|pt}_+=nt}}function It(d,_,E,O,nt,at,ut,pt){var bt,Bt,Yt=255;for(Bt=0;Bt<nt;++Bt){for(bt=0;bt<O;++bt){var ve=d[_+bt];at[ut+4*bt]=ve,Yt&=ve}_+=E,ut+=pt}return Yt!=255}function Gt(d,_,E,O,nt){var at;for(at=0;at<nt;++at)E[O+at]=d[_+at]>>8}function ue(){Qi=C,ti=et,Yn=It,Si=Gt}function we(d,_,E){gt[d]=function(O,nt,at,ut,pt,bt,Bt,Yt,ve,ye,le,Ce,xe,Qt,re,Se,Te){var Ae,Xe=Te-1>>1,$e=pt[bt+0]|Bt[Yt+0]<<16,fn=ve[ye+0]|le[Ce+0]<<16;e(O!=null);var s=3*$e+fn+131074>>2;for(_(O[nt+0],255&s,s>>16,xe,Qt),at!=null&&(s=3*fn+$e+131074>>2,_(at[ut+0],255&s,s>>16,re,Se)),Ae=1;Ae<=Xe;++Ae){var u=pt[bt+Ae]|Bt[Yt+Ae]<<16,h=ve[ye+Ae]|le[Ce+Ae]<<16,g=$e+u+fn+h+524296,y=g+2*(u+fn)>>3;s=y+$e>>1,$e=(g=g+2*($e+h)>>3)+u>>1,_(O[nt+2*Ae-1],255&s,s>>16,xe,Qt+(2*Ae-1)*E),_(O[nt+2*Ae-0],255&$e,$e>>16,xe,Qt+(2*Ae-0)*E),at!=null&&(s=g+fn>>1,$e=y+h>>1,_(at[ut+2*Ae-1],255&s,s>>16,re,Se+(2*Ae-1)*E),_(at[ut+2*Ae+0],255&$e,$e>>16,re,Se+(2*Ae+0)*E)),$e=u,fn=h}1&Te||(s=3*$e+fn+131074>>2,_(O[nt+Te-1],255&s,s>>16,xe,Qt+(Te-1)*E),at!=null&&(s=3*fn+$e+131074>>2,_(at[ut+Te-1],255&s,s>>16,re,Se+(Te-1)*E)))}}function Ne(){pr[Tr]=Wu,pr[vn]=hu,pr[cl]=zs,pr[Vo]=Ho,pr[Qr]=hl,pr[dr]=fu,pr[Il]=zc,pr[Lr]=hu,pr[Cr]=Ho,pr[Fs]=hl,pr[r]=fu}function He(d){return d&-16384?0>d?0:255:d>>hf}function Je(d,_){return He((19077*d>>8)+(26149*_>>8)-14234)}function on(d,_,E){return He((19077*d>>8)-(6419*_>>8)-(13320*E>>8)+8708)}function wn(d,_){return He((19077*d>>8)+(33050*_>>8)-17685)}function On(d,_,E,O,nt){O[nt+0]=Je(d,E),O[nt+1]=on(d,_,E),O[nt+2]=wn(d,_)}function fi(d,_,E,O,nt){O[nt+0]=wn(d,_),O[nt+1]=on(d,_,E),O[nt+2]=Je(d,E)}function $n(d,_,E,O,nt){var at=on(d,_,E);_=at<<3&224|wn(d,_)>>3,O[nt+0]=248&Je(d,E)|at>>5,O[nt+1]=_}function Kn(d,_,E,O,nt){var at=240&wn(d,_)|15;O[nt+0]=240&Je(d,E)|on(d,_,E)>>4,O[nt+1]=at}function Fi(d,_,E,O,nt){O[nt+0]=255,On(d,_,E,O,nt+1)}function Bi(d,_,E,O,nt){fi(d,_,E,O,nt),O[nt+3]=255}function Ur(d,_,E,O,nt){On(d,_,E,O,nt),O[nt+3]=255}function ni(d,_){return 0>d?0:d>_?_:d}function _r(d,_,E){gt[d]=function(O,nt,at,ut,pt,bt,Bt,Yt,ve){for(var ye=Yt+(-2&ve)*E;Yt!=ye;)_(O[nt+0],at[ut+0],pt[bt+0],Bt,Yt),_(O[nt+1],at[ut+0],pt[bt+0],Bt,Yt+E),nt+=2,++ut,++bt,Yt+=2*E;1&ve&&_(O[nt+0],at[ut+0],pt[bt+0],Bt,Yt)}}function al(d,_,E){return E==0?d==0?_==0?6:5:_==0?4:0:E}function br(d,_,E,O,nt){switch(d>>>30){case 3:Jr(_,E,O,nt,0);break;case 2:xi(_,E,O,nt);break;case 1:xr(_,E,O,nt)}}function ja(d,_){var E,O,nt=_.M,at=_.Nb,ut=d.oc,pt=d.pc+40,bt=d.oc,Bt=d.pc+584,Yt=d.oc,ve=d.pc+600;for(E=0;16>E;++E)ut[pt+32*E-1]=129;for(E=0;8>E;++E)bt[Bt+32*E-1]=129,Yt[ve+32*E-1]=129;for(0<nt?ut[pt-1-32]=bt[Bt-1-32]=Yt[ve-1-32]=129:(o(ut,pt-32-1,127,21),o(bt,Bt-32-1,127,9),o(Yt,ve-32-1,127,9)),O=0;O<d.za;++O){var ye=_.ya[_.aa+O];if(0<O){for(E=-1;16>E;++E)i(ut,pt+32*E-4,ut,pt+32*E+12,4);for(E=-1;8>E;++E)i(bt,Bt+32*E-4,bt,Bt+32*E+4,4),i(Yt,ve+32*E-4,Yt,ve+32*E+4,4)}var le=d.Gd,Ce=d.Hd+O,xe=ye.ad,Qt=ye.Hc;if(0<nt&&(i(ut,pt-32,le[Ce].y,0,16),i(bt,Bt-32,le[Ce].f,0,8),i(Yt,ve-32,le[Ce].ea,0,8)),ye.Za){var re=ut,Se=pt-32+16;for(0<nt&&(O>=d.za-1?o(re,Se,le[Ce].y[15],4):i(re,Se,le[Ce+1].y,0,4)),E=0;4>E;E++)re[Se+128+E]=re[Se+256+E]=re[Se+384+E]=re[Se+0+E];for(E=0;16>E;++E,Qt<<=2)re=ut,Se=pt+qc[E],ts[ye.Ob[E]](re,Se),br(Qt,xe,16*+E,re,Se)}else if(re=al(O,nt,ye.Ob[0]),ps[re](ut,pt),Qt!=0)for(E=0;16>E;++E,Qt<<=2)br(Qt,xe,16*+E,ut,pt+qc[E]);for(E=ye.Gc,re=al(O,nt,ye.Dd),$r[re](bt,Bt),$r[re](Yt,ve),Qt=xe,re=bt,Se=Bt,255&(ye=E>>0)&&(170&ye?Os(Qt,256,re,Se):hr(Qt,256,re,Se)),ye=Yt,Qt=ve,255&(E>>=8)&&(170&E?Os(xe,320,ye,Qt):hr(xe,320,ye,Qt)),nt<d.Ub-1&&(i(le[Ce].y,0,ut,pt+480,16),i(le[Ce].f,0,bt,Bt+224,8),i(le[Ce].ea,0,Yt,ve+224,8)),E=8*at*d.B,le=d.sa,Ce=d.ta+16*O+16*at*d.R,xe=d.qa,ye=d.ra+8*O+E,Qt=d.Ha,re=d.Ia+8*O+E,E=0;16>E;++E)i(le,Ce+E*d.R,ut,pt+32*E,16);for(E=0;8>E;++E)i(xe,ye+E*d.B,bt,Bt+32*E,8),i(Qt,re+E*d.B,Yt,ve+32*E,8)}}function hs(d,_,E,O,nt,at,ut,pt,bt){var Bt=[0],Yt=[0],ve=0,ye=bt!=null?bt.kd:0,le=bt??new Zr;if(d==null||12>E)return 7;le.data=d,le.w=_,le.ha=E,_=[_],E=[E],le.gb=[le.gb];t:{var Ce=_,xe=E,Qt=le.gb;if(e(d!=null),e(xe!=null),e(Qt!=null),Qt[0]=0,12<=xe[0]&&!n(d,Ce[0],"RIFF")){if(n(d,Ce[0]+8,"WEBP")){Qt=3;break t}var re=tt(d,Ce[0]+4);if(12>re||4294967286<re){Qt=3;break t}if(ye&&re>xe[0]-8){Qt=7;break t}Qt[0]=re,Ce[0]+=12,xe[0]-=12}Qt=0}if(Qt!=0)return Qt;for(re=0<le.gb[0],E=E[0];;){t:{var Se=d;xe=_,Qt=E;var Te=Bt,Ae=Yt,Xe=Ce=[0];if((s=ve=[ve])[0]=0,8>Qt[0])Qt=7;else{if(!n(Se,xe[0],"VP8X")){if(tt(Se,xe[0]+4)!=10){Qt=3;break t}if(18>Qt[0]){Qt=7;break t}var $e=tt(Se,xe[0]+8),fn=1+G(Se,xe[0]+12);if(2147483648<=fn*(Se=1+G(Se,xe[0]+15))){Qt=3;break t}Xe!=null&&(Xe[0]=$e),Te!=null&&(Te[0]=fn),Ae!=null&&(Ae[0]=Se),xe[0]+=18,Qt[0]-=18,s[0]=1}Qt=0}}if(ve=ve[0],Ce=Ce[0],Qt!=0)return Qt;if(xe=!!(2&Ce),!re&&ve)return 3;if(at!=null&&(at[0]=!!(16&Ce)),ut!=null&&(ut[0]=xe),pt!=null&&(pt[0]=0),ut=Bt[0],Ce=Yt[0],ve&&xe&&bt==null){Qt=0;break}if(4>E){Qt=7;break}if(re&&ve||!re&&!ve&&!n(d,_[0],"ALPH")){E=[E],le.na=[le.na],le.P=[le.P],le.Sa=[le.Sa];t:{$e=d,Qt=_,re=E;var s=le.gb;Te=le.na,Ae=le.P,Xe=le.Sa,fn=22,e($e!=null),e(re!=null),Se=Qt[0];var u=re[0];for(e(Te!=null),e(Xe!=null),Te[0]=null,Ae[0]=null,Xe[0]=0;;){if(Qt[0]=Se,re[0]=u,8>u){Qt=7;break t}var h=tt($e,Se+4);if(4294967286<h){Qt=3;break t}var g=8+h+1&-2;if(fn+=g,0<s&&fn>s){Qt=3;break t}if(!n($e,Se,"VP8 ")||!n($e,Se,"VP8L")){Qt=0;break t}if(u[0]<g){Qt=7;break t}n($e,Se,"ALPH")||(Te[0]=$e,Ae[0]=Se+8,Xe[0]=h),Se+=g,u-=g}}if(E=E[0],le.na=le.na[0],le.P=le.P[0],le.Sa=le.Sa[0],Qt!=0)break}E=[E],le.Ja=[le.Ja],le.xa=[le.xa];t:if(s=d,Qt=_,re=E,Te=le.gb[0],Ae=le.Ja,Xe=le.xa,$e=Qt[0],Se=!n(s,$e,"VP8 "),fn=!n(s,$e,"VP8L"),e(s!=null),e(re!=null),e(Ae!=null),e(Xe!=null),8>re[0])Qt=7;else{if(Se||fn){if(s=tt(s,$e+4),12<=Te&&s>Te-12){Qt=3;break t}if(ye&&s>re[0]-8){Qt=7;break t}Ae[0]=s,Qt[0]+=8,re[0]-=8,Xe[0]=fn}else Xe[0]=5<=re[0]&&s[$e+0]==47&&!(s[$e+4]>>5),Ae[0]=re[0];Qt=0}if(E=E[0],le.Ja=le.Ja[0],le.xa=le.xa[0],_=_[0],Qt!=0)break;if(4294967286<le.Ja)return 3;if(pt==null||xe||(pt[0]=le.xa?2:1),ut=[ut],Ce=[Ce],le.xa){if(5>E){Qt=7;break}pt=ut,ye=Ce,xe=at,d==null||5>E?d=0:5<=E&&d[_+0]==47&&!(d[_+4]>>5)?(re=[0],s=[0],Te=[0],z(Ae=new I,d,_,E),Qe(Ae,re,s,Te)?(pt!=null&&(pt[0]=re[0]),ye!=null&&(ye[0]=s[0]),xe!=null&&(xe[0]=Te[0]),d=1):d=0):d=0}else{if(10>E){Qt=7;break}pt=Ce,d==null||10>E||!bi(d,_+3,E-3)?d=0:(ye=d[_+0]|d[_+1]<<8|d[_+2]<<16,xe=16383&(d[_+7]<<8|d[_+6]),d=16383&(d[_+9]<<8|d[_+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=le.Ja||!xe||!d?d=0:(ut&&(ut[0]=xe),pt&&(pt[0]=d),d=1))}if(!d||(ut=ut[0],Ce=Ce[0],ve&&(Bt[0]!=ut||Yt[0]!=Ce)))return 3;bt!=null&&(bt[0]=le,bt.offset=_-bt.w,e(4294967286>_-bt.w),e(bt.offset==bt.ha-E));break}return Qt==0||Qt==7&&ve&&bt==null?(at!=null&&(at[0]|=le.na!=null&&0<le.na.length),O!=null&&(O[0]=ut),nt!=null&&(nt[0]=Ce),0):Qt}function za(d,_,E){var O=_.width,nt=_.height,at=0,ut=0,pt=O,bt=nt;if(_.Da=d!=null&&0<d.Da,_.Da&&(pt=d.cd,bt=d.bd,at=d.v,ut=d.j,11>E||(at&=-2,ut&=-2),0>at||0>ut||0>=pt||0>=bt||at+pt>O||ut+bt>nt))return 0;if(_.v=at,_.j=ut,_.va=at+pt,_.o=ut+bt,_.U=pt,_.T=bt,_.da=d!=null&&0<d.da,_.da){if(!qt(pt,bt,E=[d.ib],at=[d.hb]))return 0;_.ib=E[0],_.hb=at[0]}return _.ob=d!=null&&d.ob,_.Kb=d==null||!d.Sd,_.da&&(_.ob=_.ib<3*O/4&&_.hb<3*nt/4,_.Kb=0),1}function Qs(d){if(d==null)return 2;if(11>d.S){var _=d.f.RGBA;_.fb+=(d.height-1)*_.A,_.A=-_.A}else _=d.f.kb,d=d.height,_.O+=(d-1)*_.fa,_.fa=-_.fa,_.N+=(d-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(d-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(d-1)*_.lb,_.lb=-_.lb);return 0}function to(d,_,E,O){if(O==null||0>=d||0>=_)return 2;if(E!=null){if(E.Da){var nt=E.cd,at=E.bd,ut=-2&E.v,pt=-2&E.j;if(0>ut||0>pt||0>=nt||0>=at||ut+nt>d||pt+at>_)return 2;d=nt,_=at}if(E.da){if(!qt(d,_,nt=[E.ib],at=[E.hb]))return 2;d=nt[0],_=at[0]}}O.width=d,O.height=_;t:{var bt=O.width,Bt=O.height;if(d=O.S,0>=bt||0>=Bt||!(d>=Tr&&13>d))d=2;else{if(0>=O.Rd&&O.sd==null){ut=at=nt=_=0;var Yt=(pt=bt*Hc[d])*Bt;if(11>d||(at=(Bt+1)/2*(_=(bt+1)/2),d==12&&(ut=(nt=bt)*Bt)),(Bt=a(Yt+2*at+ut))==null){d=1;break t}O.sd=Bt,11>d?((bt=O.f.RGBA).eb=Bt,bt.fb=0,bt.A=pt,bt.size=Yt):((bt=O.f.kb).y=Bt,bt.O=0,bt.fa=pt,bt.Fd=Yt,bt.f=Bt,bt.N=0+Yt,bt.Ab=_,bt.Cd=at,bt.ea=Bt,bt.W=0+Yt+at,bt.Db=_,bt.Ed=at,d==12&&(bt.F=Bt,bt.J=0+Yt+2*at),bt.Tc=ut,bt.lb=nt)}if(_=1,nt=O.S,at=O.width,ut=O.height,nt>=Tr&&13>nt)if(11>nt)d=O.f.RGBA,_&=(pt=Math.abs(d.A))*(ut-1)+at<=d.size,_&=pt>=at*Hc[nt],_&=d.eb!=null;else{d=O.f.kb,pt=(at+1)/2,Yt=(ut+1)/2,bt=Math.abs(d.fa),Bt=Math.abs(d.Ab);var ve=Math.abs(d.Db),ye=Math.abs(d.lb),le=ye*(ut-1)+at;_&=bt*(ut-1)+at<=d.Fd,_&=Bt*(Yt-1)+pt<=d.Cd,_=(_&=ve*(Yt-1)+pt<=d.Ed)&bt>=at&Bt>=pt&ve>=pt,_&=d.y!=null,_&=d.f!=null,_&=d.ea!=null,nt==12&&(_&=ye>=at,_&=le<=d.Tc,_&=d.F!=null)}else _=0;d=_?0:2}}return d!=0||E!=null&&E.fd&&(d=Qs(O)),d}var Ti=64,ga=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Er=24,wr=32,ma=8,cr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ee("Predictor0","PredictorAdd0"),gt.Predictor0=function(){return 4278190080},gt.Predictor1=function(d){return d},gt.Predictor2=function(d,_,E){return _[E+0]},gt.Predictor3=function(d,_,E){return _[E+1]},gt.Predictor4=function(d,_,E){return _[E-1]},gt.Predictor5=function(d,_,E){return Ot(Ot(d,_[E+1]),_[E+0])},gt.Predictor6=function(d,_,E){return Ot(d,_[E-1])},gt.Predictor7=function(d,_,E){return Ot(d,_[E+0])},gt.Predictor8=function(d,_,E){return Ot(_[E-1],_[E+0])},gt.Predictor9=function(d,_,E){return Ot(_[E+0],_[E+1])},gt.Predictor10=function(d,_,E){return Ot(Ot(d,_[E-1]),Ot(_[E+0],_[E+1]))},gt.Predictor11=function(d,_,E){var O=_[E+0];return 0>=ke(O>>24&255,d>>24&255,(_=_[E-1])>>24&255)+ke(O>>16&255,d>>16&255,_>>16&255)+ke(O>>8&255,d>>8&255,_>>8&255)+ke(255&O,255&d,255&_)?O:d},gt.Predictor12=function(d,_,E){var O=_[E+0];return(ie((d>>24&255)+(O>>24&255)-((_=_[E-1])>>24&255))<<24|ie((d>>16&255)+(O>>16&255)-(_>>16&255))<<16|ie((d>>8&255)+(O>>8&255)-(_>>8&255))<<8|ie((255&d)+(255&O)-(255&_)))>>>0},gt.Predictor13=function(d,_,E){var O=_[E-1];return(pe((d=Ot(d,_[E+0]))>>24&255,O>>24&255)<<24|pe(d>>16&255,O>>16&255)<<16|pe(d>>8&255,O>>8&255)<<8|pe(d>>0&255,O>>0&255))>>>0};var eo=gt.PredictorAdd0;gt.PredictorAdd1=Kt,ee("Predictor2","PredictorAdd2"),ee("Predictor3","PredictorAdd3"),ee("Predictor4","PredictorAdd4"),ee("Predictor5","PredictorAdd5"),ee("Predictor6","PredictorAdd6"),ee("Predictor7","PredictorAdd7"),ee("Predictor8","PredictorAdd8"),ee("Predictor9","PredictorAdd9"),ee("Predictor10","PredictorAdd10"),ee("Predictor11","PredictorAdd11"),ee("Predictor12","PredictorAdd12"),ee("Predictor13","PredictorAdd13");var qr=gt.PredictorAdd2;Ge("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Ge("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var ll,ji=gt.ColorIndexInverseTransform,Ds=gt.MapARGB,Kr=gt.VP8LColorIndexInverseTransformAlpha,qo=gt.MapAlpha,no=gt.VP8LPredictorsAdd=[];no.length=16,(gt.VP8LPredictors=[]).length=16,(gt.VP8LPredictorsAdd_C=[]).length=16,(gt.VP8LPredictors_C=[]).length=16;var Ns,Xi,Hi,fs,Ar,Yr,io,Jr,xi,Os,xr,hr,$o,Ua,qa,fr,Mr,_o,Rs,va,bo,wo,ro,Xr,Qi,ti,Yn,Si,ii=a(511),ds=a(2041),xo=a(225),Is=a(767),ul=0,Lo=ds,zi=xo,ri=Is,Br=ii,Tr=0,vn=1,cl=2,Vo=3,Qr=4,dr=5,Il=6,Lr=7,Cr=8,Fs=9,r=10,c=[2,3,7],m=[3,3,11],k=[280,256,256,256,40],F=[0,1,1,1,0],lt=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$t=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],de=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],be=8,Be=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],We=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],un=null,Bn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Pr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ui=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Dr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],js=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Fl=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ps=[],ts=[],$r=[],Gu=1,jl=2,ei=[],pr=[];we("UpsampleRgbLinePair",On,3),we("UpsampleBgrLinePair",fi,3),we("UpsampleRgbaLinePair",Ur,4),we("UpsampleBgraLinePair",Bi,4),we("UpsampleArgbLinePair",Fi,4),we("UpsampleRgba4444LinePair",Kn,2),we("UpsampleRgb565LinePair",$n,2);var Wu=gt.UpsampleRgbLinePair,zs=gt.UpsampleBgrLinePair,hu=gt.UpsampleRgbaLinePair,Ho=gt.UpsampleBgraLinePair,hl=gt.UpsampleArgbLinePair,fu=gt.UpsampleRgba4444LinePair,zc=gt.UpsampleRgb565LinePair,du=16,zl=1<<du-1,Ul=-227,Zu=482,hf=6,fl=0,pu=a(256),ff=a(256),df=a(256),gu=a(256),mu=a(Zu-Ul),Uc=a(Zu-Ul);_r("YuvToRgbRow",On,3),_r("YuvToBgrRow",fi,3),_r("YuvToRgbaRow",Ur,4),_r("YuvToBgraRow",Bi,4),_r("YuvToArgbRow",Fi,4),_r("YuvToRgba4444Row",Kn,2),_r("YuvToRgb565Row",$n,2);var qc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],vu=[0,2,8],$c=[8,7,6,4,4,2,2,2,1,1,1,1],Vc=1;this.WebPDecodeRGBA=function(d,_,E,O,nt){var at=vn,ut=new zo,pt=new ci;ut.ba=pt,pt.S=at,pt.width=[pt.width],pt.height=[pt.height];var bt=pt.width,Bt=pt.height,Yt=new gi;if(Yt==null||d==null)var ve=2;else e(Yt!=null),ve=hs(d,_,E,Yt.width,Yt.height,Yt.Pd,Yt.Qd,Yt.format,null);if(ve!=0?bt=0:(bt!=null&&(bt[0]=Yt.width[0]),Bt!=null&&(Bt[0]=Yt.height[0]),bt=1),bt){pt.width=pt.width[0],pt.height=pt.height[0],O!=null&&(O[0]=pt.width),nt!=null&&(nt[0]=pt.height);t:{if(O=new lr,(nt=new Zr).data=d,nt.w=_,nt.ha=E,nt.kd=1,_=[0],e(nt!=null),((d=hs(nt.data,nt.w,nt.ha,null,null,null,_,null,nt))==0||d==7)&&_[0]&&(d=4),(_=d)==0){if(e(ut!=null),O.data=nt.data,O.w=nt.w+nt.offset,O.ha=nt.ha-nt.offset,O.put=$i,O.ac=Qn,O.bc=Re,O.ma=ut,nt.xa){if((d=ar())==null){ut=1;break t}if(function(ye,le){var Ce=[0],xe=[0],Qt=[0];e:for(;;){if(ye==null)return 0;if(le==null)return ye.a=2,0;if(ye.l=le,ye.a=0,z(ye.m,le.data,le.w,le.ha),!Qe(ye.m,Ce,xe,Qt)){ye.a=3;break e}if(ye.xb=jl,le.width=Ce[0],le.height=xe[0],!jr(Ce[0],xe[0],1,ye,null))break e;return 1}return e(ye.a!=0),0}(d,O)){if(O=(_=to(O.width,O.height,ut.Oa,ut.ba))==0){e:{O=d;n:for(;;){if(O==null){O=0;break e}if(e(O.s.yc!=null),e(O.s.Ya!=null),e(0<O.s.Wb),e((E=O.l)!=null),e((nt=E.ma)!=null),O.xb!=0){if(O.ca=nt.ba,O.tb=nt.tb,e(O.ca!=null),!za(nt.Oa,E,Vo)){O.a=2;break n}if(!Ps(O,E.width)||E.da)break n;if((E.da||je(O.ca.S))&&ue(),11>O.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),O.ca.f.kb.F!=null&&ue()),O.Pb&&0<O.s.ua&&O.s.vb.X==null&&!yt(O.s.vb,O.s.Wa.Xa)){O.a=1;break n}O.xb=0}if(!vr(O,O.V,O.Ba,O.c,O.i,E.o,Cs))break n;nt.Dc=O.Ma,O=1;break e}e(O.a!=0),O=0}O=!O}O&&(_=d.a)}else _=d.a}else{if((d=new Dn)==null){ut=1;break t}if(d.Fa=nt.na,d.P=nt.P,d.qc=nt.Sa,oi(d,O)){if((_=to(O.width,O.height,ut.Oa,ut.ba))==0){if(d.Aa=0,E=ut.Oa,e((nt=d)!=null),E!=null){if(0<(bt=0>(bt=E.Md)?0:100<bt?255:255*bt/100)){for(Bt=Yt=0;4>Bt;++Bt)12>(ve=nt.pb[Bt]).lc&&(ve.ia=bt*$c[0>ve.lc?0:ve.lc]>>3),Yt|=ve.ia;Yt&&(alert("todo:VP8InitRandom"),nt.ia=1)}nt.Ga=E.Id,100<nt.Ga?nt.Ga=100:0>nt.Ga&&(nt.Ga=0)}pn(d,O)||(_=d.a)}}else _=d.a}_==0&&ut.Oa!=null&&ut.Oa.fd&&(_=Qs(ut.ba))}ut=_}at=ut!=0?null:11>at?pt.f.RGBA.eb:pt.f.kb.y}else at=null;return at};var Hc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(gt,_t){for(var zt="",X=0;X<4;X++)zt+=String.fromCharCode(gt[_t++]);return zt}function b(gt,_t){return(gt[_t+0]<<0|gt[_t+1]<<8|gt[_t+2]<<16)>>>0}function w(gt,_t){return(gt[_t+0]<<0|gt[_t+1]<<8|gt[_t+2]<<16|gt[_t+3]<<24)>>>0}new p;var S=[0],x=[0],j=[],R=new p,U=t,N=function(gt,_t){var zt={},X=0,W=!1,St=0,Mt=0;if(zt.frames=[],!function(it,rt,$,D){for(var q=0;q<D;q++)if(it[rt+q]!=$.charCodeAt(q))return!0;return!1}(gt,_t,"RIFF",4)){var A,H;for(w(gt,_t+=4),_t+=8;_t<gt.length;){var V=v(gt,_t),z=w(gt,_t+=4);_t+=4;var mt=z+(1&z);switch(V){case"VP8 ":case"VP8L":zt.frames[X]===void 0&&(zt.frames[X]={}),(I=zt.frames[X]).src_off=W?Mt:_t-8,I.src_size=St+z+8,X++,W&&(W=!1,St=0,Mt=0);break;case"VP8X":(I=zt.header={}).feature_flags=gt[_t];var ft=_t+4;I.canvas_width=1+b(gt,ft),ft+=3,I.canvas_height=1+b(gt,ft),ft+=3;break;case"ALPH":W=!0,St=mt+8,Mt=_t-8;break;case"ANIM":(I=zt.header).bgcolor=w(gt,_t),ft=_t+4,I.loop_count=(A=gt)[(H=ft)+0]<<0|A[H+1]<<8,ft+=2;break;case"ANMF":var ht,I;(I=zt.frames[X]={}).offset_x=2*b(gt,_t),_t+=3,I.offset_y=2*b(gt,_t),_t+=3,I.width=1+b(gt,_t),_t+=3,I.height=1+b(gt,_t),_t+=3,I.duration=b(gt,_t),_t+=3,ht=gt[_t++],I.dispose=1&ht,I.blend=ht>>1&1}V!="ANMF"&&(_t+=mt)}return zt}}(U,0);N.response=U,N.rgbaoutput=!0,N.dataurl=!1;var Z=N.header?N.header:null,Y=N.frames?N.frames:null;if(Z){Z.loop_counter=Z.loop_count,S=[Z.canvas_height],x=[Z.canvas_width];for(var kt=0;kt<Y.length&&Y[kt].blend!=0;kt++);}var At=Y[0],Dt=R.WebPDecodeRGBA(U,At.src_off,At.src_size,x,S);At.rgba=Dt,At.imgwidth=x[0],At.imgheight=S[0];for(var xt=0;xt<x[0]*S[0]*4;xt++)j[xt]=Dt[xt];return this.width=x,this.height=S,this.data=j,this}(function(t){var e=function(){return typeof Ad=="function"},n=function(S,x,j,R){var U=4,N=l;switch(R){case t.image_compression.FAST:U=1,N=a;break;case t.image_compression.MEDIUM:U=6,N=f;break;case t.image_compression.SLOW:U=9,N=p}S=i(S,x,j,N);var Z=Ad(S,{level:U});return t.__addimage__.arrayBufferToBinaryString(Z)},i=function(S,x,j,R){for(var U,N,Z,Y=S.length/x,kt=new Uint8Array(S.length+Y),At=b(),Dt=0;Dt<Y;Dt+=1){if(Z=Dt*x,U=S.subarray(Z,Z+x),R)kt.set(R(U,j,N),Z+Dt);else{for(var xt,gt=At.length,_t=[];xt<gt;xt+=1)_t[xt]=At[xt](U,j,N);var zt=w(_t.concat());kt.set(_t[zt],Z+Dt)}N=U}return kt},o=function(S){var x=Array.apply([],S);return x.unshift(0),x},a=function(S,x){var j,R=[],U=S.length;R[0]=1;for(var N=0;N<U;N+=1)j=S[N-x]||0,R[N+1]=S[N]-j+256&255;return R},l=function(S,x,j){var R,U=[],N=S.length;U[0]=2;for(var Z=0;Z<N;Z+=1)R=j&&j[Z]||0,U[Z+1]=S[Z]-R+256&255;return U},f=function(S,x,j){var R,U,N=[],Z=S.length;N[0]=3;for(var Y=0;Y<Z;Y+=1)R=S[Y-x]||0,U=j&&j[Y]||0,N[Y+1]=S[Y]+256-(R+U>>>1)&255;return N},p=function(S,x,j){var R,U,N,Z,Y=[],kt=S.length;Y[0]=4;for(var At=0;At<kt;At+=1)R=S[At-x]||0,U=j&&j[At]||0,N=j&&j[At-x]||0,Z=v(R,U,N),Y[At+1]=S[At]-Z+256&255;return Y},v=function(S,x,j){if(S===x&&x===j)return S;var R=Math.abs(x-j),U=Math.abs(S-j),N=Math.abs(S+x-j-j);return R<=U&&R<=N?S:U<=N?x:j},b=function(){return[o,a,l,f,p]},w=function(S){var x=S.map(function(j){return j.reduce(function(R,U){return R+Math.abs(U)},0)});return x.indexOf(Math.min.apply(null,x))};t.processPNG=function(S,x,j,R){var U,N,Z,Y,kt,At,Dt,xt,gt,_t,zt,X,W,St,Mt,A=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(S)&&(S=new Uint8Array(S)),this.__addimage__.isArrayBufferView(S)){if(S=(Z=new rC(S)).imgData,N=Z.bits,U=Z.colorSpace,kt=Z.colors,[4,6].indexOf(Z.colorType)!==-1){if(Z.bits===8){gt=(xt=Z.pixelBitlength==32?new Uint32Array(Z.decodePixels().buffer):Z.pixelBitlength==16?new Uint16Array(Z.decodePixels().buffer):new Uint8Array(Z.decodePixels().buffer)).length,zt=new Uint8Array(gt*Z.colors),_t=new Uint8Array(gt);var V,z=Z.pixelBitlength-Z.bits;for(St=0,Mt=0;St<gt;St++){for(W=xt[St],V=0;V<z;)zt[Mt++]=W>>>V&255,V+=Z.bits;_t[St]=W>>>V&255}}if(Z.bits===16){gt=(xt=new Uint32Array(Z.decodePixels().buffer)).length,zt=new Uint8Array(gt*(32/Z.pixelBitlength)*Z.colors),_t=new Uint8Array(gt*(32/Z.pixelBitlength)),X=Z.colors>1,St=0,Mt=0;for(var mt=0;St<gt;)W=xt[St++],zt[Mt++]=W>>>0&255,X&&(zt[Mt++]=W>>>16&255,W=xt[St++],zt[Mt++]=W>>>0&255),_t[mt++]=W>>>16&255;N=8}R!==t.image_compression.NONE&&e()?(S=n(zt,Z.width*Z.colors,Z.colors,R),Dt=n(_t,Z.width,1,R)):(S=zt,Dt=_t,A=void 0)}if(Z.colorType===3&&(U=this.color_spaces.INDEXED,At=Z.palette,Z.transparency.indexed)){var ft=Z.transparency.indexed,ht=0;for(St=0,gt=ft.length;St<gt;++St)ht+=ft[St];if((ht/=255)===gt-1&&ft.indexOf(0)!==-1)Y=[ft.indexOf(0)];else if(ht!==gt){for(xt=Z.decodePixels(),_t=new Uint8Array(xt.length),St=0,gt=xt.length;St<gt;St++)_t[St]=ft[xt[St]];Dt=n(_t,Z.width,1)}}var I=function(it){var rt;switch(it){case t.image_compression.FAST:rt=11;break;case t.image_compression.MEDIUM:rt=13;break;case t.image_compression.SLOW:rt=14;break;default:rt=12}return rt}(R);return A===this.decode.FLATE_DECODE&&(H="/Predictor "+I+" "),H+="/Colors "+kt+" /BitsPerComponent "+N+" /Columns "+Z.width,(this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),(Dt&&this.__addimage__.isArrayBuffer(Dt)||this.__addimage__.isArrayBufferView(Dt))&&(Dt=this.__addimage__.arrayBufferToBinaryString(Dt)),{alias:j,data:S,index:x,filter:A,decodeParameters:H,transparency:Y,palette:At,sMask:Dt,predictor:I,width:Z.width,height:Z.height,bitsPerComponent:N,colorSpace:U}}}})(xn.API),function(t){t.processGIF89A=function(e,n,i,o){var a=new sC(e),l=a.width,f=a.height,p=[];a.decodeAndBlitFrameRGBA(0,p);var v={data:p,width:l,height:f},b=new Kf(100).encode(v,100);return t.processJPEG.call(this,b,n,i,o)},t.processGIF87A=t.processGIF89A}(xn.API),Wo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:i,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){vi.log("bit decode error:"+n)}},Wo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*o*4,f=0;f<8&&8*o+f<this.width;f++){var p=this.palette[a>>7-f&1];this.data[l+4*f]=p.blue,this.data[l+4*f+1]=p.green,this.data[l+4*f+2]=p.red,this.data[l+4*f+3]=255}n!==0&&(this.pos+=4-n)}},Wo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*o*4,f=a>>4,p=15&a,v=this.palette[f];if(this.data[l]=v.blue,this.data[l+1]=v.green,this.data[l+2]=v.red,this.data[l+3]=255,2*o+1>=this.width)break;v=this.palette[p],this.data[l+4]=v.blue,this.data[l+4+1]=v.green,this.data[l+4+2]=v.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},Wo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*i;if(o<this.palette.length){var l=this.palette[o];this.data[a]=l.red,this.data[a+1]=l.green,this.data[a+2]=l.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Wo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&e)/e*255|0,f=(a>>5&e)/e*255|0,p=(a>>10&e)/e*255|0,v=a>>15?255:0,b=i*this.width*4+4*o;this.data[b]=p,this.data[b+1]=f,this.data[b+2]=l,this.data[b+3]=v}this.pos+=t}},Wo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(l&e)/e*255|0,p=(l>>5&n)/n*255|0,v=(l>>11)/e*255|0,b=o*this.width*4+4*a;this.data[b]=v,this.data[b+1]=p,this.data[b+2]=f,this.data[b+3]=255}this.pos+=t}},Wo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=a,this.data[l+1]=o,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},Wo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),f=e*this.width*4+4*n;this.data[f]=a,this.data[f+1]=o,this.data[f+2]=i,this.data[f+3]=l}},Wo.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,i,o){var a=new Wo(e,!1),l=a.width,f=a.height,p={data:a.getData(),width:l,height:f},v=new Kf(100).encode(p,100);return t.processJPEG.call(this,v,n,i,o)}}(xn.API),bg.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,i,o){var a=new bg(e),l=a.width,f=a.height,p={data:a.getData(),width:l,height:f},v=new Kf(100).encode(p,100);return t.processJPEG.call(this,v,n,i,o)}}(xn.API),xn.API.processRGBA=function(t,e,n){for(var i=t.data,o=i.length,a=new Uint8Array(o/4*3),l=new Uint8Array(o/4),f=0,p=0,v=0;v<o;v+=4){var b=i[v],w=i[v+1],S=i[v+2],x=i[v+3];a[f++]=b,a[f++]=w,a[f++]=S,l[p++]=x}var j=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:j,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},xn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Lu=xn.API,sh=Lu.getCharWidthsArray=function(t,e){var n,i,o=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),f=e.widths?e.widths:o.metadata.Unicode.widths,p=f.fof?f.fof:1,v=e.kerning?e.kerning:o.metadata.Unicode.kerning,b=v.fof?v.fof:1,w=e.doKerning!==!1,S=0,x=t.length,j=0,R=f[0]||p,U=[];for(n=0;n<x;n++)i=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?U.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+l*(1e3/a)||0)/1e3):(S=w&&di(v[i])==="object"&&!isNaN(parseInt(v[i][j],10))?v[i][j]/b:0,U.push((f[i]||R)/p+S)),j=i;return U},mg=Lu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Lu.processArabic&&(t=Lu.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,o)/n:sh.apply(this,arguments).reduce(function(a,l){return a+l},0)},vg=function(t,e,n,i){for(var o=[],a=0,l=t.length,f=0;a!==l&&f+e[a]<n;)f+=e[a],a++;o.push(t.slice(0,a));var p=a;for(f=0;a!==l;)f+e[a]>i&&(o.push(t.slice(p,a)),f=0,p=a),f+=e[a],a++;return p!==a&&o.push(t.slice(p,a)),o},yg=function(t,e,n){n||(n={});var i,o,a,l,f,p,v,b=[],w=[b],S=n.textIndent||0,x=0,j=0,R=t.split(" "),U=sh.apply(this,[" ",n])[0];if(p=n.lineIndent===-1?R[0].length+2:n.lineIndent||0){var N=Array(p).join(" "),Z=[];R.map(function(kt){(kt=kt.split(/\s*\n/)).length>1?Z=Z.concat(kt.map(function(At,Dt){return(Dt&&At.length?`
`:"")+At})):Z.push(kt[0])}),R=Z,p=mg.apply(this,[N,n])}for(a=0,l=R.length;a<l;a++){var Y=0;if(i=R[a],p&&i[0]==`
`&&(i=i.substr(1),Y=1),S+x+(j=(o=sh.apply(this,[i,n])).reduce(function(kt,At){return kt+At},0))>e||Y){if(j>e){for(f=vg.apply(this,[i,o,e-(S+x),e]),b.push(f.shift()),b=[f.pop()];f.length;)w.push([f.shift()]);j=o.slice(i.length-(b[0]?b[0].length:0)).reduce(function(kt,At){return kt+At},0)}else b=[i];w.push(b),S=j+p,x=U}else b.push(i),S+=x+j,x=U}return v=p?function(kt,At){return(At?N:"")+kt.join(" ")}:function(kt){return kt.join(" ")},w.map(v)},Lu.splitTextToSize=function(t,e,n){var i,o=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(b){if(b.widths&&b.kerning)return{widths:b.widths,kerning:b.kerning};var w=this.internal.getFont(b.fontName,b.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/o;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=n.lineIndent;var f,p,v=[];for(f=0,p=i.length;f<p;f++)v=v.concat(yg.apply(this,[i[f],l,a]));return v},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},o=0;o<e.length;o++)n[e[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=e[o];var a=function(w){return"0x"+parseInt(w,10).toString(16)},l=t.__fontmetrics__.compress=function(w){var S,x,j,R,U=["{"];for(var N in w){if(S=w[N],isNaN(parseInt(N,10))?x="'"+N+"'":(N=parseInt(N,10),x=(x=a(N).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof S=="number")S<0?(j=a(S).slice(3),R="-"):(j=a(S).slice(2),R=""),j=R+j.slice(0,-1)+i[j.slice(-1)];else{if(di(S)!=="object")throw new Error("Don't know what to do with value type "+di(S)+".");j=l(S)}U.push(x+j)}return U.push("}"),U.join("")},f=t.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var S,x,j,R,U={},N=1,Z=U,Y=[],kt="",At="",Dt=w.length-1,xt=1;xt<Dt;xt+=1)(R=w[xt])=="'"?S?(j=S.join(""),S=void 0):S=[]:S?S.push(R):R=="{"?(Y.push([Z,j]),Z={},j=void 0):R=="}"?((x=Y.pop())[0][x[1]]=Z,j=void 0,Z=x[0]):R=="-"?N=-1:j===void 0?n.hasOwnProperty(R)?(kt+=n[R],j=parseInt(kt,16)*N,N=1,kt=""):kt+=R:n.hasOwnProperty(R)?(At+=n[R],Z[j]=parseInt(At,16)*N,N=1,j=void 0,At=""):At+=R;return U},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},b={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(w){var S=w.font,x=b.Unicode[S.postScriptName];x&&(S.metadata.Unicode={},S.metadata.Unicode.widths=x.widths,S.metadata.Unicode.kerning=x.kerning);var j=v.Unicode[S.postScriptName];j&&(S.metadata.Unicode.encoding=j,S.encoding=j.codePages[0])}])}(xn.API),function(t){var e=function(n){for(var i=n.length,o=new Uint8Array(i),a=0;a<i;a++)o[a]=n.charCodeAt(a);return o};t.API.events.push(["addFont",function(n){var i=void 0,o=n.font,a=n.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(l,f){f=/^\x00\x01\x00\x00/.test(f)?e(f):e(bc(f)),l.metadata=t.API.TTFFont.open(f),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(o,i)}}])}(xn),function(t){function e(){return(Cn.canvg?Promise.resolve(Cn.canvg):Ql(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}xn.API.addSvgAsImage=function(n,i,o,a,l,f,p,v){if(isNaN(i)||isNaN(o))throw vi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(l))throw vi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=a,b.height=l;var w=b.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,b.width,b.height);var S={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return e().then(function(j){return j.fromString(w,n,S)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(S)}).then(function(){x.addImage(b.toDataURL("image/jpeg",1),i,o,a,l,p,v)})}}(),xn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(e,n);return this},xn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,o,a,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},f=Object.keys(l),p=[],v=0,b=0,w=0;function S(j,R){var U,N=!1;for(U=0;U<j.length;U+=1)j[U]===R&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var x=f.length;for(w=0;w<x;w+=1)n[f[w]].value=n[f[w]].defaultValue,n[f[w]].explicitSet=!1}if(di(t)==="object"){for(o in t)if(a=t[o],S(f,o)&&a!==void 0){if(n[o].type==="boolean"&&typeof a=="boolean")n[o].value=a;else if(n[o].type==="name"&&S(n[o].valueSet,a))n[o].value=a;else if(n[o].type==="integer"&&Number.isInteger(a))n[o].value=a;else if(n[o].type==="array"){for(v=0;v<a.length;v+=1)if(i=!0,a[v].length===1&&typeof a[v][0]=="number")p.push(String(a[v]-1));else if(a[v].length>1){for(b=0;b<a[v].length;b+=1)typeof a[v][b]!="number"&&(i=!1);i===!0&&p.push([a[v][0]-1,a[v][1]-1].join(" "))}n[o].value="["+p.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,R=[];for(j in n)n[j].explicitSet===!0&&(n[j].type==="name"?R.push("/"+j+" /"+n[j].value):R.push("/"+j+" "+n[j].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),f=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),v=a.length+l.length+f.length+o.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(o+a+l+f+p),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(xn.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,l){for(var f,p=l.metadata.Unicode.widths,v=["","0","00","000","0000"],b=[""],w=0,S=a.length;w<S;++w){if(f=l.metadata.characterToGlyph(a.charCodeAt(w)),l.metadata.glyIdsUsed.push(f),l.metadata.toUnicode[f]=a.charCodeAt(w),p.indexOf(f)==-1&&(p.push(f),p.push([parseInt(l.metadata.widthOfGlyph(f),10)])),f=="0")return b.join("");f=f.toString(16),b.push(v[4-f.length],f)}return b.join("")},i=function(a){var l,f,p,v,b,w,S;for(b=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],w=0,S=(f=Object.keys(a).sort(function(x,j){return x-j})).length;w<S;w++)l=f[w],p.length>=100&&(b+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),a[l]!==void 0&&a[l]!==null&&typeof a[l].toString=="function"&&(v=("0000"+a[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),p.push("<"+l+"><"+v+">"));return p.length&&(b+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),b+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(l){var f=l.font,p=l.out,v=l.newObject,b=l.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="Identity-H"){for(var w=f.metadata.Unicode.widths,S=f.metadata.subset.encode(f.metadata.glyIdsUsed,1),x="",j=0;j<S.length;j++)x+=String.fromCharCode(S[j]);var R=v();b({data:x,addLength1:!0,objectId:R}),p("endobj");var U=v();b({data:i(f.metadata.toUnicode),addLength1:!0,objectId:U}),p("endobj");var N=v();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+Mu(f.fontName)),p("/FontFile2 "+R+" 0 R"),p("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),p("/Flags "+f.metadata.flags),p("/StemV "+f.metadata.stemV),p("/ItalicAngle "+f.metadata.italicAngle),p("/Ascent "+f.metadata.ascender),p("/Descent "+f.metadata.decender),p("/CapHeight "+f.metadata.capHeight),p(">>"),p("endobj");var Z=v();p("<<"),p("/Type /Font"),p("/BaseFont /"+Mu(f.fontName)),p("/FontDescriptor "+N+" 0 R"),p("/W "+t.API.PDFObject.convert(w)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+f.encoding+")"),p(">>"),p(">>"),p("endobj"),f.objectNumber=v(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+U+" 0 R"),p("/BaseFont /"+Mu(f.fontName)),p("/Encoding /"+f.encoding),p("/DescendantFonts ["+Z+" 0 R]"),p(">>"),p("endobj"),f.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(l){var f=l.font,p=l.out,v=l.newObject,b=l.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="WinAnsiEncoding"){for(var w=f.metadata.rawData,S="",x=0;x<w.length;x++)S+=String.fromCharCode(w[x]);var j=v();b({data:S,addLength1:!0,objectId:j}),p("endobj");var R=v();b({data:i(f.metadata.toUnicode),addLength1:!0,objectId:R}),p("endobj");var U=v();p("<<"),p("/Descent "+f.metadata.decender),p("/CapHeight "+f.metadata.capHeight),p("/StemV "+f.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+j+" 0 R"),p("/Flags 96"),p("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),p("/FontName /"+Mu(f.fontName)),p("/ItalicAngle "+f.metadata.italicAngle),p("/Ascent "+f.metadata.ascender),p(">>"),p("endobj"),f.objectNumber=v();for(var N=0;N<f.metadata.hmtx.widths.length;N++)f.metadata.hmtx.widths[N]=parseInt(f.metadata.hmtx.widths[N]*(1e3/f.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+Mu(f.fontName)+"/FontDescriptor "+U+" 0 R/Encoding/"+f.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(f.metadata.hmtx.widths)+">>"),p("endobj"),f.isAlreadyPutted=!0}})(a)}]);var o=function(a){var l,f=a.text||"",p=a.x,v=a.y,b=a.options||{},w=a.mutex||{},S=w.pdfEscape,x=w.activeFontKey,j=w.fonts,R=x,U="",N=0,Z="",Y=j[R].encoding;if(j[R].encoding!=="Identity-H")return{text:f,x:p,y:v,options:b,mutex:w};for(Z=f,R=x,Array.isArray(f)&&(Z=f[0]),N=0;N<Z.length;N+=1)j[R].metadata.hasOwnProperty("cmap")&&(l=j[R].metadata.cmap.unicode.codeMap[Z[N].charCodeAt(0)]),l||Z[N].charCodeAt(0)<256&&j[R].metadata.hasOwnProperty("Unicode")?U+=Z[N]:U+="";var kt="";return parseInt(R.slice(1))<14||Y==="WinAnsiEncoding"?kt=S(U,R).split("").map(function(At){return At.charCodeAt(0).toString(16)}).join(""):Y==="Identity-H"&&(kt=n(U,j[R])),w.isHex=!0,{text:kt,x:p,y:v,options:b,mutex:w}};e.events.push(["postProcessText",function(a){var l=a.text||"",f=[],p={text:l,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(l)){var v=0;for(v=0;v<l.length;v+=1)Array.isArray(l[v])&&l[v].length===3?f.push([o(Object.assign({},p,{text:l[v][0]})).text,l[v][1],l[v][2]]):f.push(o(Object.assign({},p,{text:l[v]})).text);a.text=f}else a.text=o(Object.assign({},p,{text:l})).text}])}(xn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(xn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var o,a,l,f,p,v,b,w=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},U=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Z=!1,Y=0;this.__bidiEngine__={};var kt=function(X){var W=X.charCodeAt(),St=W>>8,Mt=R[St];return Mt!==void 0?w[256*Mt+(255&W)]:St===252||St===253?"AL":N.test(St)?"L":St===8?"R":"N"},At=function(X){for(var W,St=0;St<X.length;St++){if((W=kt(X.charAt(St)))==="L")return!1;if(W==="R")return!0}return!1},Dt=function(X,W,St,Mt){var A,H,V,z,mt=W[Mt];switch(mt){case"L":case"R":Z=!1;break;case"N":case"AN":break;case"EN":Z&&(mt="AN");break;case"AL":Z=!0,mt="R";break;case"WS":mt="N";break;case"CS":Mt<1||Mt+1>=W.length||(A=St[Mt-1])!=="EN"&&A!=="AN"||(H=W[Mt+1])!=="EN"&&H!=="AN"?mt="N":Z&&(H="AN"),mt=H===A?H:"N";break;case"ES":mt=(A=Mt>0?St[Mt-1]:"B")==="EN"&&Mt+1<W.length&&W[Mt+1]==="EN"?"EN":"N";break;case"ET":if(Mt>0&&St[Mt-1]==="EN"){mt="EN";break}if(Z){mt="N";break}for(V=Mt+1,z=W.length;V<z&&W[V]==="ET";)V++;mt=V<z&&W[V]==="EN"?"EN":"N";break;case"NSM":if(l&&!f){for(z=W.length,V=Mt+1;V<z&&W[V]==="NSM";)V++;if(V<z){var ft=X[Mt],ht=ft>=1425&&ft<=2303||ft===64286;if(A=W[V],ht&&(A==="R"||A==="AL")){mt="R";break}}}mt=Mt<1||(A=W[Mt-1])==="B"?"N":St[Mt-1];break;case"B":Z=!1,o=!0,mt=Y;break;case"S":a=!0,mt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Z=!1;break;case"BN":mt="N"}return mt},xt=function(X,W,St){var Mt=X.split("");return St&&gt(Mt,St,{hiLevel:Y}),Mt.reverse(),W&&W.reverse(),Mt.join("")},gt=function(X,W,St){var Mt,A,H,V,z,mt=-1,ft=X.length,ht=0,I=[],it=Y?x:S,rt=[];for(Z=!1,o=!1,a=!1,A=0;A<ft;A++)rt[A]=kt(X[A]);for(H=0;H<ft;H++){if(z=ht,I[H]=Dt(X,rt,I,H),Mt=240&(ht=it[z][j[I[H]]]),ht&=15,W[H]=V=it[ht][5],Mt>0)if(Mt===16){for(A=mt;A<H;A++)W[A]=1;mt=-1}else mt=-1;if(it[ht][6])mt===-1&&(mt=H);else if(mt>-1){for(A=mt;A<H;A++)W[A]=V;mt=-1}rt[H]==="B"&&(W[H]=0),St.hiLevel|=V}a&&function($,D,q){for(var dt=0;dt<q;dt++)if($[dt]==="S"){D[dt]=Y;for(var ct=dt-1;ct>=0&&$[ct]==="WS";ct--)D[ct]=Y}}(rt,W,ft)},_t=function(X,W,St,Mt,A){if(!(A.hiLevel<X)){if(X===1&&Y===1&&!o)return W.reverse(),void(St&&St.reverse());for(var H,V,z,mt,ft=W.length,ht=0;ht<ft;){if(Mt[ht]>=X){for(z=ht+1;z<ft&&Mt[z]>=X;)z++;for(mt=ht,V=z-1;mt<V;mt++,V--)H=W[mt],W[mt]=W[V],W[V]=H,St&&(H=St[mt],St[mt]=St[V],St[V]=H);ht=z}ht++}}},zt=function(X,W,St){var Mt=X.split(""),A={hiLevel:Y};return St||(St=[]),gt(Mt,St,A),function(H,V,z){if(z.hiLevel!==0&&b)for(var mt,ft=0;ft<H.length;ft++)V[ft]===1&&(mt=U.indexOf(H[ft]))>=0&&(H[ft]=U[mt+1])}(Mt,St,A),_t(2,Mt,W,St,A),_t(1,Mt,W,St,A),Mt.join("")};return this.__bidiEngine__.doBidiReorder=function(X,W,St){if(function(A,H){if(H)for(var V=0;V<A.length;V++)H[V]=V;f===void 0&&(f=At(A)),v===void 0&&(v=At(A))}(X,W),l||!p||v)if(l&&p&&f^v)Y=f?1:0,X=xt(X,W,St);else if(!l&&p&&v)Y=f?1:0,X=zt(X,W,St),X=xt(X,W);else if(!l||f||p||v){if(l&&!p&&f^v)X=xt(X,W),f?(Y=0,X=zt(X,W,St)):(Y=1,X=zt(X,W,St),X=xt(X,W));else if(l&&f&&!p&&v)Y=1,X=zt(X,W,St),X=xt(X,W);else if(!l&&!p&&f^v){var Mt=b;f?(Y=1,X=zt(X,W,St),Y=0,b=!1,X=zt(X,W,St),b=Mt):(Y=0,X=zt(X,W,St),X=xt(X,W),Y=1,b=!1,X=zt(X,W,St),b=Mt,X=xt(X,W))}}else Y=0,X=zt(X,W,St);else Y=f?1:0,X=zt(X,W,St);return X},this.__bidiEngine__.setOptions=function(X){X&&(l=X.isInputVisual,p=X.isOutputVisual,f=X.isInputRtl,v=X.isOutputRtl,b=X.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var o=i.text,a=(i.x,i.y,i.options||{}),l=(i.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var f=0;for(l=[],f=0;f<o.length;f+=1)Object.prototype.toString.call(o[f])==="[object Array]"?l.push([n.doBidiReorder(o[f][0]),o[f][1],o[f][2]]):l.push([n.doBidiReorder(o[f])]);i.text=l}else i.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(xn),xn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Nl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new bC(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new oC(this.contents),this.head=new lC(this),this.name=new dC(this),this.cmap=new sv(this),this.toUnicode={},this.hhea=new uC(this),this.maxp=new pC(this),this.hmtx=new gC(this),this.post=new hC(this),this.os2=new cC(this),this.loca=new _C(this),this.glyf=new mC(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,f,p,v;for(v=[],l=0,f=(p=this.bbox).length;l<f;l++)e=p[l],v.push(Math.round(e*this.scaleFactor));return v}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var o,a,l,f;for(l=0,a=0,f=(e=""+e).length;0<=f?a<f:a>f;a=0<=f?++a:--a)o=e.charCodeAt(a),l+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/n)||0;return l*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t}();var ea,Nl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,o;for(o=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)o.push(this.writeByte(e.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,o,a,l,f,p;return e=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),f=this.readByte(),p=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^a)+65536*(255^l)+256*(255^f)+(255^p)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*o+16777216*a+65536*l+256*f+p},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,o,a;for(a=[],i=0,o=e.length;i<o;i++)n=e[i],a.push(this.writeByte(n));return a},t}(),oC=function(){var t;function e(n){var i,o,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,o,a,l,f,p,v,b,w,S,x,j,R;for(R in x=Object.keys(n).length,p=Math.log(2),w=16*Math.floor(Math.log(x)/p),l=Math.floor(w/p),b=16*x-w,(o=new Nl).writeInt(this.scalarType),o.writeShort(x),o.writeShort(w),o.writeShort(l),o.writeShort(b),a=16*x,v=o.pos+a,f=null,j=[],n)for(S=n[R],o.writeString(R),o.writeInt(t(S)),o.writeInt(v),o.writeInt(S.length),j=j.concat(S),R==="head"&&(f=v),v+=S.length;v%4;)j.push(0),v++;return o.write(j),i=2981146554-t(o.data),o.pos=f+8,o.writeUInt32(i),o.data},t=function(n){var i,o,a,l;for(n=ov.call(n);n.length%4;)n.push(0);for(a=new Nl(n),o=0,i=0,l=n.length;i<l;i=i+=4)o+=a.readUInt32();return 4294967295&o},e}(),aC={}.hasOwnProperty,Aa=function(t,e){for(var n in e)aC.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};ea=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var lC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new Nl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e}(),wg=function(){function t(e,n){var i,o,a,l,f,p,v,b,w,S,x,j,R,U,N,Z,Y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=e.readByte();break;case 4:for(x=e.readUInt16(),S=x/2,e.pos+=6,a=function(){var kt,At;for(At=[],p=kt=0;0<=S?kt<S:kt>S;p=0<=S?++kt:--kt)At.push(e.readUInt16());return At}(),e.pos+=2,R=function(){var kt,At;for(At=[],p=kt=0;0<=S?kt<S:kt>S;p=0<=S?++kt:--kt)At.push(e.readUInt16());return At}(),v=function(){var kt,At;for(At=[],p=kt=0;0<=S?kt<S:kt>S;p=0<=S?++kt:--kt)At.push(e.readUInt16());return At}(),b=function(){var kt,At;for(At=[],p=kt=0;0<=S?kt<S:kt>S;p=0<=S?++kt:--kt)At.push(e.readUInt16());return At}(),o=(this.length-e.pos+this.offset)/2,f=function(){var kt,At;for(At=[],p=kt=0;0<=o?kt<o:kt>o;p=0<=o?++kt:--kt)At.push(e.readUInt16());return At}(),p=N=0,Y=a.length;N<Y;p=++N)for(U=a[p],i=Z=j=R[p];j<=U?Z<=U:Z>=U;i=j<=U?++Z:--Z)b[p]===0?l=i+v[p]:(l=f[b[p]/2+(i-j)-(S-p)]||0)!==0&&(l+=v[p]),this.codeMap[i]=65535&l}e.pos=w}return t.encode=function(e,n){var i,o,a,l,f,p,v,b,w,S,x,j,R,U,N,Z,Y,kt,At,Dt,xt,gt,_t,zt,X,W,St,Mt,A,H,V,z,mt,ft,ht,I,it,rt,$,D,q,dt,ct,Et,Nt,G;switch(Mt=new Nl,l=Object.keys(e).sort(function(tt,yt){return tt-yt}),n){case"macroman":for(R=0,U=function(){var tt=[];for(j=0;j<256;++j)tt.push(0);return tt}(),Z={0:0},a={},A=0,mt=l.length;A<mt;A++)Z[ct=e[o=l[A]]]==null&&(Z[ct]=++R),a[o]={old:e[o],new:Z[e[o]]},U[o]=Z[e[o]];return Mt.writeUInt16(1),Mt.writeUInt16(0),Mt.writeUInt32(12),Mt.writeUInt16(0),Mt.writeUInt16(262),Mt.writeUInt16(0),Mt.write(U),{charMap:a,subtable:Mt.data,maxGlyphID:R+1};case"unicode":for(W=[],w=[],Y=0,Z={},i={},N=v=null,H=0,ft=l.length;H<ft;H++)Z[At=e[o=l[H]]]==null&&(Z[At]=++Y),i[o]={old:At,new:Z[At]},f=Z[At]-o,N!=null&&f===v||(N&&w.push(N),W.push(o),v=f),N=o;for(N&&w.push(N),w.push(65535),W.push(65535),zt=2*(_t=W.length),gt=2*Math.pow(Math.log(_t)/Math.LN2,2),S=Math.log(gt/2)/Math.LN2,xt=2*_t-gt,p=[],Dt=[],x=[],j=V=0,ht=W.length;V<ht;j=++V){if(X=W[j],b=w[j],X===65535){p.push(0),Dt.push(0);break}if(X-(St=i[X].new)>=32768)for(p.push(0),Dt.push(2*(x.length+_t-j)),o=z=X;X<=b?z<=b:z>=b;o=X<=b?++z:--z)x.push(i[o].new);else p.push(St-X),Dt.push(0)}for(Mt.writeUInt16(3),Mt.writeUInt16(1),Mt.writeUInt32(12),Mt.writeUInt16(4),Mt.writeUInt16(16+8*_t+2*x.length),Mt.writeUInt16(0),Mt.writeUInt16(zt),Mt.writeUInt16(gt),Mt.writeUInt16(S),Mt.writeUInt16(xt),q=0,I=w.length;q<I;q++)o=w[q],Mt.writeUInt16(o);for(Mt.writeUInt16(0),dt=0,it=W.length;dt<it;dt++)o=W[dt],Mt.writeUInt16(o);for(Et=0,rt=p.length;Et<rt;Et++)f=p[Et],Mt.writeUInt16(f);for(Nt=0,$=Dt.length;Nt<$;Nt++)kt=Dt[Nt],Mt.writeUInt16(kt);for(G=0,D=x.length;G<D;G++)R=x[G],Mt.writeUInt16(R);return{charMap:i,subtable:Mt.data,maxGlyphID:Y+1}}},t}(),sv=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,o,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)i=new wg(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var o,a;return i==null&&(i="macroman"),o=wg.encode(n,i),(a=new Nl).writeUInt16(0),a.writeUInt16(1),o.table=a.data.concat(o.subtable),o},e}(),uC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),cC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(n.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),hC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="post",e.prototype.parse=function(n){var i,o,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var l;for(o=n.readUInt16(),this.glyphNameIndex=[],l=0;0<=o?l<o:l>o;l=0<=o?++l:--l)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)i=n.readByte(),a.push(this.names.push(n.readString(i)));return a;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var f,p,v;for(v=[],l=f=0,p=this.file.maxp.numGlyphs;0<=p?f<p:f>p;l=0<=p?++f:--f)v.push(n.readUInt32());return v}).call(this)}},e}(),fC=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},dC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="name",e.prototype.parse=function(n){var i,o,a,l,f,p,v,b,w,S,x;for(n.pos=this.offset,n.readShort(),i=n.readShort(),p=n.readShort(),o=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+p+n.readShort()});for(v={},l=w=0,S=o.length;w<S;l=++w)a=o[l],n.pos=a.offset,b=n.readString(a.length),f=new fC(b,a),v[x=a.nameID]==null&&(v[x]=[]),v[a.nameID].push(f);this.strings=v,this.copyright=v[0],this.fontFamily=v[1],this.fontSubfamily=v[2],this.uniqueSubfamily=v[3],this.fontName=v[4],this.version=v[5];try{this.postscriptName=v[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=v[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=v[7],this.manufacturer=v[8],this.designer=v[9],this.description=v[10],this.vendorUrl=v[11],this.designerUrl=v[12],this.license=v[13],this.licenseUrl=v[14],this.preferredFamily=v[15],this.preferredSubfamily=v[17],this.compatibleFull=v[18],this.sampleText=v[19]},e}(),pC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),gC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,o,a,l,f,p,v;for(n.pos=this.offset,this.metrics=[],i=0,p=this.file.hhea.numberOfMetrics;0<=p?i<p:i>p;i=0<=p?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var b,w;for(w=[],i=b=0;0<=a?b<a:b>a;i=0<=a?++b:--b)w.push(n.readInt16());return w}(),this.widths=(function(){var b,w,S,x;for(x=[],b=0,w=(S=this.metrics).length;b<w;b++)l=S[b],x.push(l.advance);return x}).call(this),o=this.widths[this.widths.length-1],v=[],i=f=0;0<=a?f<a:f>a;i=0<=a?++f:--f)v.push(this.widths.push(o));return v},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),ov=[].slice,mC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,o,a,l,f,p,v,b,w,S;return n in this.cache?this.cache[n]:(l=this.file.loca,i=this.file.contents,o=l.indexOf(n),(a=l.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+o,f=(p=new Nl(i.read(a))).readShort(),b=p.readShort(),S=p.readShort(),v=p.readShort(),w=p.readShort(),this.cache[n]=f===-1?new yC(p,b,S,v,w):new vC(p,f,b,S,v,w),this.cache[n]))},e.prototype.encode=function(n,i,o){var a,l,f,p,v;for(f=[],l=[],p=0,v=i.length;p<v;p++)a=n[i[p]],l.push(f.length),a&&(f=f.concat(a.encode(o)));return l.push(f.length),{table:f,offsets:l}},e}(),vC=function(){function t(e,n,i,o,a,l){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=o,this.xMax=a,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),yC=function(){function t(e,n,i,o,a){var l,f;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;f=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&f;)l.pos+=1&f?4:2,128&f?l.pos+=8:64&f?l.pos+=4:8&f&&(l.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new Nl(ov.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),_C=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="loca",e.prototype.parse=function(n){var i,o;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var a,l;for(l=[],o=0,a=this.length;o<a;o+=2)l.push(2*n.readUInt16());return l}).call(this):(function(){var a,l;for(l=[],o=0,a=this.length;o<a;o+=4)l.push(n.readUInt32());return l}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var o=new Uint32Array(this.offsets.length),a=0,l=0,f=0;f<o.length;++f)if(o[f]=a,l<i.length&&i[l]==f){++l,o[f]=a;var p=this.offsets[f],v=this.offsets[f+1]-p;v>0&&(a+=v)}for(var b=new Array(4*o.length),w=0;w<o.length;++w)b[4*w+3]=255&o[w],b[4*w+2]=(65280&o[w])>>8,b[4*w+1]=(16711680&o[w])>>16,b[4*w]=(4278190080&o[w])>>24;return b},e}(),bC=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,o,a;for(n in o=this.font.cmap.tables[0].codeMap,e={},a=this.subset)i=a[n],e[n]=o[i];return e},t.prototype.glyphsFor=function(e){var n,i,o,a,l,f,p;for(o={},l=0,f=e.length;l<f;l++)o[a=e[l]]=this.font.glyf.glyphFor(a);for(a in n=[],o)(i=o[a])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(a in p=this.glyphsFor(n))i=p[a],o[a]=i;return o},t.prototype.encode=function(e,n){var i,o,a,l,f,p,v,b,w,S,x,j,R,U,N;for(o in i=sv.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),x={0:0},N=i.charMap)x[(p=N[o]).old]=p.new;for(j in S=i.maxGlyphID,l)j in x||(x[j]=S++);return b=function(Z){var Y,kt;for(Y in kt={},Z)kt[Z[Y]]=Y;return kt}(x),w=Object.keys(b).sort(function(Z,Y){return Z-Y}),R=function(){var Z,Y,kt;for(kt=[],Z=0,Y=w.length;Z<Y;Z++)f=w[Z],kt.push(b[f]);return kt}(),a=this.font.glyf.encode(l,R,x),v=this.font.loca.encode(a.offsets,R),U={cmap:this.font.cmap.raw(),glyf:a.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(U["OS/2"]=this.font.os2.raw()),this.font.directory.encode(U)},t}();xn.API.PDFObject=function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,o,a,l;if(Array.isArray(n))return"["+function(){var f,p,v;for(v=[],f=0,p=n.length;f<p;f++)i=n[f],v.push(e.convert(i));return v}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in a=["<<"],n)l=n[o],a.push("/"+o+" "+e.convert(l));return a.push(">>"),a.join(`
`)}return""+n},e}();const wC={class:"h-full flex"},xC={class:"flex-1 relative"},LC={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},CC={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},PC={class:"text-center max-w-lg mx-auto p-8"},kC={class:"space-y-4"},SC={class:"map-parent"},EC={key:0,class:"z-[3000]"},AC={class:"map-content flex"},MC={class:"flex-1 relative"},BC={key:0,class:"w-64 bg-white border-l border-gray-200 flex-shrink-0 z-[2000]"},TC={key:1,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},DC={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3000]"},NC={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},OC={class:"flex justify-between items-center mb-4"},RC={key:0,class:"space-y-4"},IC={key:0,class:"space-y-2"},FC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},jC=["onClick"],zC={class:"font-medium text-gray-900"},UC={key:1,class:"space-y-2"},qC={class:"flex items-center mb-4"},$C={class:"text-sm text-gray-600"},VC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},HC=["onClick"],GC={class:"font-medium text-gray-900"},WC={key:2,class:"space-y-2"},ZC={class:"flex items-center mb-4"},KC={class:"text-sm text-gray-600"},YC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},JC=["onClick"],XC={class:"font-medium text-gray-900"},QC={class:"text-sm text-gray-500"},tP={class:"text-xs text-gray-400 mt-1"},eP={key:1,class:"space-y-4"},nP={key:0,class:"space-y-2"},iP={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},rP=["onClick"],sP={class:"font-medium text-gray-900"},oP={key:1,class:"space-y-2"},aP={class:"flex items-center mb-4"},lP={class:"text-sm text-gray-600"},uP={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},cP=["onClick"],hP={class:"font-medium text-gray-900"},fP={class:"text-sm text-gray-500"},dP={class:"text-xs text-gray-400 mt-1"},pP={key:2,class:"max-h-96 overflow-y-auto"},gP={key:0,class:"text-center py-8"},mP={key:1,class:"space-y-2"},vP=["onClick"],yP={class:"font-medium text-gray-900"},_P={class:"text-sm text-gray-500"},bP={class:"text-xs text-gray-400 mt-1"},xg=Ls({__name:"MapView",setup(t){const e=Fe(null),n=sp(),i=F1(),o=Fe([]),{currentTool:a,selectedShape:l,map:f,initMap:p,setDrawingTool:v,updateShapeStyle:b,updateShapeProperties:w,featureGroup:S,adjustView:x,clearActiveControlPoints:j}=rL(),{initMap:R,changeBaseMap:U}=sL(),N=Fe(!1),Z=Fe(!1),Y=Fe(null),kt=Fe(!1),At=Fe(null),Dt=xs(),xt=Fe([]),gt=Fe([]),_t=Fe([]),zt=Fe(null),X=Fe(null),W=Fe(!1),St=Fe(!1),Mt=Fe(!1),A=Fe(null),H=zn(()=>{var Rt,Ot,ie;return console.log("[MapView][filteredClients] Computing with:",{userType:(Rt=Dt.user)==null?void 0:Rt.user_type,selectedDealer:zt.value,dealerClients:gt.value}),((Ot=Dt.user)==null?void 0:Ot.user_type)==="admin"?zt.value?gt.value:[]:((ie=Dt.user)==null?void 0:ie.user_type)==="dealer"?gt.value:[]}),V=zn(()=>{var Rt;return l.value?{type:((Rt=l.value.properties)==null?void 0:Rt.type)||"unknown",properties:l.value.properties||{},layer:l.value}:null});function z(Rt){const Ot=Rt.getCenter(),ie=Rt.getZoom(),pe={lat:Ot.lat,lng:Ot.lng,zoom:ie};document.cookie=`mapState=${JSON.stringify(pe)};max-age=2592000;path=/`}function mt(){const Ot=document.cookie.split(";").find(ie=>ie.trim().startsWith("mapState="));if(Ot)try{return JSON.parse(Ot.split("=")[1])}catch(ie){return console.error("Erreur lors de la lecture du cookie de position:",ie),null}return null}Ea(async()=>{var Rt,Ot;try{await n.fetchPlans();const ie=mt(),pe=ie?[ie.lat,ie.lng]:[46.603354,1.888334],ke=(ie==null?void 0:ie.zoom)??6;if(e.value&&!f.value){const oe=p(e.value,pe,ke);oe.pm.setLang("fr"),oe.pm.addControls({rotateMode:!1}),R(oe),oe.on("moveend",()=>{z(oe)}),window.addEventListener("map-set-location",Ve=>{if(oe&&Ve.detail){const{lat:Ue,lng:Ge,zoom:Oe}=Ve.detail;oe.flyTo([Ue,Ge],Oe,{duration:1.5,easeLinearity:.25})}})}const Kt=localStorage.getItem("lastPlanId");if(Kt)try{await I(parseInt(Kt))}catch(oe){console.error("Error loading last plan:",oe),Y.value=null,n.clearCurrentPlan(),i.clearCurrentPlan(),ft(),localStorage.removeItem("lastPlanId")}((Rt=Dt.user)==null?void 0:Rt.user_type)==="admin"&&await dt(),((Ot=Dt.user)==null?void 0:Ot.user_type)==="dealer"&&await ct(),window.addEventListener("shape:created",oe=>{const{shape:Ve,type:Ue,properties:Ge}=oe.detail;console.log("[MapView] Nouvelle forme créée",{shape:Ve,type:Ue,properties:Ge}),i.addElement(Ve)})}catch(ie){console.error("Error during component mount:",ie),Y.value=null,n.clearCurrentPlan(),i.clearCurrentPlan(),ft(),localStorage.removeItem("lastPlanId")}}),Rr(()=>i.hasUnsavedChanges,Rt=>{Rt&&Y.value&&n.markUnsavedChanges()}),Rr(f,async Rt=>{Rt&&n.currentPlan&&(ft(),await i.loadPlanElements(n.currentPlan.id),await I(n.currentPlan.id))}),Rr(()=>n.currentPlan,async Rt=>{try{Rt?(Y.value=Rt,n.setCurrentPlan(Rt),i.setCurrentPlan(Rt.id)):(Y.value=null,ft(),n.clearCurrentPlan(),i.clearCurrentPlan())}catch(Ot){console.error("Error in currentPlan watcher:",Ot),Y.value=null,ft(),n.clearCurrentPlan(),i.clearCurrentPlan()}},{immediate:!0}),Gh(()=>{f.value&&f.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function ft(){S.value&&S.value.clearLayers(),o.value=[],j(),l.value=null,a.value=""}async function ht(Rt){try{ft(),await i.loadPlanElements(Rt);const Ot=n.getPlanById(Rt);Ot?(Y.value=Ot,n.setCurrentPlan(Ot),i.setCurrentPlan(Ot.id),localStorage.setItem("lastPlanId",Ot.id.toString()),f.value&&S.value&&(i.getCurrentElements.forEach(ie=>{var oe,Ve,Ue,Ge,Oe,Sn,tn,si,an,bn,Un,je,qi,Mn,ci,gi,In,ln,Ke,Ze,Qn,$i;if(!S.value||!ie.data)return;let pe=null;const{style:ke={},...Kt}=ie.data;switch(ie.type_forme){case"TEXTE":{const Re=ie.data;if(console.log("[refreshMapWithPlan] Création TextRectangle",{bounds:Re.bounds,content:Re.content,style:Re.style}),!Re.bounds){console.error("Bounds manquants pour TextRectangle");return}const Qe=Di.latLngBounds(Di.latLng(Re.bounds.southWest[1],Re.bounds.southWest[0]),Di.latLng(Re.bounds.northEast[1],Re.bounds.northEast[0]));pe=new So(Qe,Re.content||"Double-cliquez pour éditer",{color:((oe=Re.style)==null?void 0:oe.color)||"#3388ff",weight:((Ve=Re.style)==null?void 0:Ve.weight)||3,opacity:((Ue=Re.style)==null?void 0:Ue.opacity)||1,fillColor:((Ge=Re.style)==null?void 0:Ge.fillColor)||"#3388ff",fillOpacity:((Oe=Re.style)==null?void 0:Oe.fillOpacity)||.2,textStyle:{color:((tn=(Sn=Re.style)==null?void 0:Sn.textStyle)==null?void 0:tn.color)||"#000000",fontSize:((an=(si=Re.style)==null?void 0:si.textStyle)==null?void 0:an.fontSize)||"14px",fontFamily:((Un=(bn=Re.style)==null?void 0:bn.textStyle)==null?void 0:Un.fontFamily)||"Arial, sans-serif",textAlign:((qi=(je=Re.style)==null?void 0:je.textStyle)==null?void 0:qi.textAlign)||"center",backgroundColor:((ci=(Mn=Re.style)==null?void 0:Mn.textStyle)==null?void 0:ci.backgroundColor)||"#FFFFFF",backgroundOpacity:((In=(gi=Re.style)==null?void 0:gi.textStyle)==null?void 0:In.backgroundOpacity)??1,bold:((Ke=(ln=Re.style)==null?void 0:ln.textStyle)==null?void 0:Ke.bold)||!1,italic:((Qn=(Ze=Re.style)==null?void 0:Ze.textStyle)==null?void 0:Qn.italic)||!1}}),Re.rotation&&typeof pe.setRotation=="function"&&pe.setRotation(Re.rotation),pe.properties={type:"TextRectangle",text:Re.content||"Double-cliquez pour éditer",style:Re.style,rotation:Re.rotation||0};break}case"POLYGON":{const Re=ie.data;if(Re.points&&Re.points.length>0){const Qe=Re.points.map(pi=>Di.latLng(pi[1],pi[0]));pe=new Bu([Qe],{...Re.style,pmIgnore:!1}),pe.updateProperties(),console.log("[refreshMapWithPlan] Polygon restauré",{points:Qe.length,style:Re.style,properties:pe.properties})}break}case"CERCLE":{const Re=Kt;Re.center&&Re.radius&&(pe=Di.circle([Re.center[1],Re.center[0]],{...ke,radius:Re.radius}));break}case"RECTANGLE":{const Re=Kt;Re.bounds&&(pe=Di.rectangle([[Re.bounds.southWest[1],Re.bounds.southWest[0]],[Re.bounds.northEast[1],Re.bounds.northEast[0]]],ke));break}case"DEMI_CERCLE":{const Re=Kt;if(Re.center&&Re.radius){pe=new Qa(Di.latLng(Re.center[1],Re.center[0]),Re.radius,Re.startAngle,Re.endAngle,ke),pe.properties={type:"Semicircle",radius:Re.radius,startAngle:Re.startAngle,stopAngle:Re.endAngle,style:ke};const Qe=Math.PI*Math.pow(Re.radius,2)*((Re.endAngle-Re.startAngle)/360),pi=2*Re.radius+Math.PI*Re.radius*((Re.endAngle-Re.startAngle)/180),hi=Math.PI*Re.radius*((Re.endAngle-Re.startAngle)/180);pe.properties.area=Qe,pe.properties.perimeter=pi,pe.properties.arcLength=hi,pe.properties.openingAngle=Re.endAngle-Re.startAngle,console.log("[loadPlan] Demi-cercle restauré avec propriétés:",pe.properties)}break}case"LIGNE":{const Re=Kt;if(Re.points){const Qe=Re.points.map(hi=>Di.latLng(hi[1],hi[0]));pe=Di.polyline(Qe,ke),pe.properties={type:"Line",style:ke};let pi=0;for(let hi=1;hi<Qe.length;hi++)pi+=Qe[hi].distanceTo(Qe[hi-1]);if(pe.properties.length=pi,Re.hasOwnProperty("dimensions")&&Re.dimensions&&(pe.properties.dimensions=Re.dimensions,Re.dimensions.width&&pi)){const hi=pi*Re.dimensions.width;pe.properties.surfaceInfluence=hi}console.log("[loadPlan] Ligne restaurée avec propriétés:",pe.properties)}break}}pe&&(pe._dbId=ie.id,($i=S.value)==null||$i.addLayer(pe),o.value.push({id:ie.id,type:ie.type_forme,layer:pe,properties:pe.properties}))}),x()),console.log(`Plan ${Rt} chargé avec succès avec ${i.getCurrentElements.length} formes`)):console.error(`Plan ${Rt} introuvable après chargement`),Z.value=!1}catch(Ot){throw console.error("Erreur lors du rafraîchissement de la carte:",Ot),Ot}}async function I(Rt){var Ot;try{if(console.log(`Tentative de chargement du plan ${Rt}...`),!n.getPlanById(Rt))try{await kn.get(`/plans/${Rt}/`)}catch(pe){throw((Ot=pe.response)==null?void 0:Ot.status)===404&&(console.warn(`Plan ${Rt} non trouvé - Suppression de la référence du localStorage`),localStorage.removeItem("lastPlanId"),Y.value=null,n.clearCurrentPlan(),i.clearCurrentPlan(),ft()),pe}await ht(Rt),Z.value=!1,ee(),console.log(`Plan ${Rt} chargé avec succès avec ${i.getCurrentElements.length} formes`)}catch(ie){throw console.error("Erreur lors du chargement du plan:",ie),Y.value=null,n.clearCurrentPlan(),i.clearCurrentPlan(),ft(),localStorage.removeItem("lastPlanId"),ie}}async function it(){var Rt;if(!Y.value||!S.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}kt.value=!0,At.value="saving";try{const Ot=[],ie=new Set(i.getCurrentElements.filter(oe=>oe.id!==void 0).map(oe=>oe.id)),pe=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:S.value.getLayers().length,existingIds:Array.from(ie),currentElements:i.getCurrentElements}),S.value.eachLayer(oe=>{var Ve,Ue,Ge,Oe,Sn,tn,si,an,bn,Un,je,qi,Mn,ci,gi,In,ln,Ke,Ze,Qn,$i,Re,Qe,pi,hi,Ki,Vn,qe,Yi,Cs,kr,mr,or,vr,Vi,ar,jr,Ps,Gs,Ws,Vr,us,ks,na,ia,Zs,Do,ra,Ss,Es,co,No,lr,Dn,mn;if(console.log("[savePlan] Traitement de la couche",{type:(Ve=oe.properties)==null?void 0:Ve.type,isPolygon:oe instanceof Di.Polygon,isCircleArc:oe instanceof Qa,properties:oe.properties}),oe instanceof So){const bi=oe.getBounds(),oi=((Ue=oe.properties)==null?void 0:Ue.text)||"",mi={style:{color:((Ge=oe.options)==null?void 0:Ge.color)||"#3388ff",fillColor:((Oe=oe.options)==null?void 0:Oe.fillColor)||"#3388ff",fillOpacity:((Sn=oe.options)==null?void 0:Sn.fillOpacity)||.2,weight:((tn=oe.options)==null?void 0:tn.weight)||3,opacity:((si=oe.options)==null?void 0:si.opacity)||1,textStyle:{color:((Un=(bn=(an=oe.properties)==null?void 0:an.style)==null?void 0:bn.textStyle)==null?void 0:Un.color)||"#000000",fontSize:((Mn=(qi=(je=oe.properties)==null?void 0:je.style)==null?void 0:qi.textStyle)==null?void 0:Mn.fontSize)||"14px",fontFamily:((In=(gi=(ci=oe.properties)==null?void 0:ci.style)==null?void 0:gi.textStyle)==null?void 0:In.fontFamily)||"Arial, sans-serif",textAlign:((Ze=(Ke=(ln=oe.properties)==null?void 0:ln.style)==null?void 0:Ke.textStyle)==null?void 0:Ze.textAlign)||"center",backgroundColor:((Re=($i=(Qn=oe.properties)==null?void 0:Qn.style)==null?void 0:$i.textStyle)==null?void 0:Re.backgroundColor)||"#FFFFFF",backgroundOpacity:((hi=(pi=(Qe=oe.properties)==null?void 0:Qe.style)==null?void 0:pi.textStyle)==null?void 0:hi.backgroundOpacity)??1,bold:((qe=(Vn=(Ki=oe.properties)==null?void 0:Ki.style)==null?void 0:Vn.textStyle)==null?void 0:qe.bold)||!1,italic:((kr=(Cs=(Yi=oe.properties)==null?void 0:Yi.style)==null?void 0:Cs.textStyle)==null?void 0:kr.italic)||!1}},bounds:{southWest:[bi.getSouthWest().lng,bi.getSouthWest().lat],northEast:[bi.getNorthEast().lng,bi.getNorthEast().lat]},content:oi};Ot.push({id:oe._dbId,type_forme:"TEXTE",data:mi}),oe._dbId&&pe.add(oe._dbId);return}else if(oe instanceof Qa||((mr=oe.properties)==null?void 0:mr.type)==="Semicircle"){const bi=typeof oe.getCenter=="function"?oe.getCenter():oe.getLatLng(),oi={center:[bi.lng,bi.lat],radius:oe.getRadius(),startAngle:((or=oe.properties)==null?void 0:or.startAngle)||0,endAngle:((vr=oe.properties)==null?void 0:vr.stopAngle)||180,style:{color:((Vi=oe.options)==null?void 0:Vi.color)||"#3388ff",fillColor:((ar=oe.options)==null?void 0:ar.fillColor)||"#3388ff",fillOpacity:((jr=oe.options)==null?void 0:jr.fillOpacity)||.2,weight:((Ps=oe.options)==null?void 0:Ps.weight)||3,opacity:((Gs=oe.options)==null?void 0:Gs.opacity)||1}};Ot.push({id:oe._dbId,type_forme:"DEMI_CERCLE",data:oi}),oe._dbId&&pe.add(oe._dbId),console.log("[savePlan] Demi-cercle ajouté aux éléments",{id:oe._dbId,center:oi.center,radius:oi.radius,angles:[oi.startAngle,oi.endAngle],style:oi.style})}else if(oe instanceof Di.Polygon&&!(oe instanceof Di.Rectangle)){const mi={points:oe.getLatLngs()[0].map(Zn=>[Zn.lng,Zn.lat]),style:{color:((Ws=oe.options)==null?void 0:Ws.color)||"#3388ff",fillColor:((Vr=oe.options)==null?void 0:Vr.fillColor)||"#3388ff",fillOpacity:((us=oe.options)==null?void 0:us.fillOpacity)||.2,weight:((ks=oe.options)==null?void 0:ks.weight)||3,opacity:((na=oe.options)==null?void 0:na.opacity)||1}};Ot.push({id:oe._dbId,type_forme:"POLYGON",data:mi}),oe._dbId&&pe.add(oe._dbId),console.log("[savePlan] Polygone ajouté aux éléments",{id:oe._dbId,points:mi.points.length,style:mi.style})}else{const bi={style:{color:((ia=oe.options)==null?void 0:ia.color)||"#3388ff",fillColor:((Zs=oe.options)==null?void 0:Zs.fillColor)||"#3388ff",fillOpacity:((Do=oe.options)==null?void 0:Do.fillOpacity)||.2,weight:((ra=oe.options)==null?void 0:ra.weight)||3,opacity:((Ss=oe.options)==null?void 0:Ss.opacity)||1}};let oi,mi;if(oe instanceof Di.Circle)oi="CERCLE",mi={...bi,center:[oe.getLatLng().lng,oe.getLatLng().lat],radius:oe.getRadius()};else if(oe instanceof Di.Rectangle){oi="RECTANGLE";const Zn=oe.getBounds();mi={...bi,bounds:{southWest:[Zn.getSouthWest().lng,Zn.getSouthWest().lat],northEast:[Zn.getNorthEast().lng,Zn.getNorthEast().lat]}}}else if(((Es=oe.properties)==null?void 0:Es.type)==="Semicircle"){oi="DEMI_CERCLE";let Zn;typeof oe.getLatLng=="function"?Zn=oe.getLatLng():oe.getCenter&&typeof oe.getCenter=="function"?Zn=oe.getCenter():oe._latlng?Zn=oe._latlng:Zn={lat:0,lng:0};const pn=oe.getRadius?oe.getRadius():0,qn=((No=(co=oe.properties)==null?void 0:co.style)==null?void 0:No.startAngle)||0,As=((Dn=(lr=oe.properties)==null?void 0:lr.style)==null?void 0:Dn.stopAngle)||180;mi={...bi,center:[Zn.lng,Zn.lat],radius:pn,startAngle:qn,endAngle:As}}else if(oe instanceof Di.Polyline&&!(oe instanceof Di.Polygon)){oi="LIGNE";const Zn=oe.getLatLngs();mi={...bi,points:Zn.map(pn=>[pn.lng,pn.lat])}}if(oi&&mi){let Zn=oe._elementId;oe._dbId&&(Zn=oe._dbId,typeof Zn=="number"&&pe.add(Zn)),Ot.push({id:Zn,type_forme:oi,data:{...mi,rotation:((mn=oe.properties)==null?void 0:mn.rotation)||0}})}}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:Ot.length,elements:Ot.map(oe=>({type:oe.type_forme,hasPoints:"points"in oe.data,hasStyle:"style"in oe.data}))});const ke=Array.from(ie).filter(oe=>!pe.has(oe));i.elements=Ot;const Kt=await i.saveToPlan(Y.value.id,{elementsToDelete:ke});if(Kt&&((Rt=Y.value)!=null&&Rt.id)){const oe=Y.value.id;Y.value={...Y.value,...Kt},n.updatePlanDetails(oe,Kt)}At.value="success",setTimeout(()=>{At.value=null},3e3)}catch(Ot){console.error("Erreur lors de la sauvegarde du plan:",Ot),At.value=null}finally{kt.value=!1}}Wh(()=>{Dt.user||vt(),n.clearCurrentPlan(),i.clearCurrentPlan()});function rt(Rt){w(Rt)}function $(Rt){try{const Ot=new Date(Rt);return isNaN(Ot.getTime())?(console.error("Date invalide reçue:",Rt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Ot)}catch(Ot){return console.error("Erreur lors du formatage de la date:",Ot),"Date invalide"}}const D=()=>{S.value&&x()},q=()=>{l.value&&S.value&&(v(""),S.value.removeLayer(l.value),l.value=null)};async function dt(){W.value=!0;try{const Rt=await kn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});xt.value=Rt.data}catch(Rt){console.error("Erreur lors du chargement des concessionnaires:",Rt)}finally{W.value=!1}}async function ct(){var Rt;St.value=!0;try{const Ot=(Rt=Dt.user)==null?void 0:Rt.id;if(!Ot){console.error("[loadDealerClients] No dealer ID available");return}const ie=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Ot}});Array.isArray(ie.data)?gt.value=ie.data:ie.data?gt.value=[ie.data]:gt.value=[]}catch(Ot){console.error("[loadDealerClients] Error:",Ot),gt.value=[]}finally{St.value=!1}}async function Et(Rt){if(console.log("[MapView][selectClient] Current state:",{selectedDealer:zt.value,selectedClient:X.value,newPlanModalRef:!!A.value}),A.value){A.value.selectClient(Rt),X.value=Rt,Mt.value=!0;try{const Ot={client:Rt.id};zt.value&&(Ot.concessionnaire=zt.value.id);const ie=await kn.get("/plans/",{params:Ot});_t.value=ie.data}catch(Ot){console.error("[MapView][selectClient] Error loading client plans:",Ot),_t.value=[]}finally{Mt.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function Nt(){zt.value=null,X.value=null,gt.value=[],_t.value=[]}function G(){X.value=null,_t.value=[]}async function tt(Rt){console.log(`onPlanCreated - Tentative de chargement du plan ${Rt}`),await n.fetchPlans();const Ot=n.getPlanById(Rt);Ot?(console.log(`Plan ${Rt} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",Rt.toString()),Y.value=Ot,n.setCurrentPlan(Ot),i.setCurrentPlan(Ot.id),N.value=!1,ee(),console.log(`Plan ${Rt} chargé avec succès`)):console.error(`Plan ${Rt} introuvable après création! Vérifiez les permissions.`)}async function yt(Rt){try{A.value?(await A.value.selectDealer(Rt),zt.value=Rt,gt.value=A.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(Ot){console.error("[MapView][selectDealer] Error:",Ot)}}Rr(zt,async Rt=>{var Ot;if(Rt&&((Ot=Dt.user)==null?void 0:Ot.user_type)==="admin"){St.value=!0;try{const ie=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Rt.id}});gt.value=Array.isArray(ie.data)?ie.data:[ie.data]}catch(ie){console.error("[MapView][watch selectedDealer] Error loading clients:",ie),gt.value=[]}finally{St.value=!1}}});function vt(){localStorage.removeItem("lastPlanId")}function J(Rt,Ot="m"){return Ot==="m²"?`${(Rt/1e4).toFixed(2)} ha`:Ot==="m"?Rt>=1e3?`${(Rt/1e3).toFixed(2)} km`:`${Rt.toFixed(2)} m`:`${Rt.toFixed(2)} ${Ot}`}const qt=Fe(!1);function te(Rt){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Rectangle avec texte"}[Rt]||Rt}async function Vt(){var Rt,Ot,ie;if(!(!Y.value||!f.value||!S.value))try{console.log("Sauvegarde automatique avant génération de la synthèse..."),await it(),await new Promise(tn=>setTimeout(tn,1e3)),qt.value=!0;const pe=Y.value.concessionnaire_details,ke=Y.value.client_details;l.value&&(j(),l.value=null);const Kt=new xn("l","mm","a4"),oe=Kt.internal.pageSize.getWidth(),Ve=Kt.internal.pageSize.getHeight(),Ue=new Image;Ue.src=H0,await new Promise(tn=>{Ue.onload=()=>tn(),Ue.onerror=()=>tn()}),Kt.addImage(Ue,"JPEG",(oe-60)/2,20,60,60),Kt.setFontSize(24),Kt.setTextColor(0),Kt.text(Y.value.nom||"Sans titre",oe/2,100,{align:"center"});let Ge=120;if(Kt.setFontSize(14),pe&&(Kt.setFont("helvetica","bold"),Kt.text("Concessionnaire:",20,Ge),Kt.setFont("helvetica","normal"),Kt.text(`${pe.first_name} ${pe.last_name}${pe.company_name?` (${pe.company_name})`:""}`,20,Ge+8),Ge+=25),ke&&(Kt.setFont("helvetica","bold"),Kt.text("Client:",20,Ge),Kt.setFont("helvetica","normal"),Kt.text(`${ke.first_name} ${ke.last_name}${ke.company_name?` (${ke.company_name})`:""}`,20,Ge+8),Ge+=25),Y.value.description){Kt.setFont("helvetica","bold"),Kt.text("Description:",20,Ge),Kt.setFont("helvetica","normal");const tn=Kt.splitTextToSize(Y.value.description,150);Kt.text(tn,20,Ge+8),Ge+=10*tn.length+15}Kt.setFontSize(10),Kt.setTextColor(100),Kt.text(`Date de création: ${$(Y.value.date_creation)}`,20,Ve-20),Kt.text(`Dernière modification: ${$(Y.value.date_modification)}`,oe-20,Ve-20,{align:"right"});const Oe=[];S.value.eachLayer(tn=>Oe.push(tn));const Sn=Di.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(f.value);await new Promise(tn=>setTimeout(tn,3e3));for(let tn=0;tn<Oe.length;tn++){Kt.addPage();const si=30;Kt.addImage(Ue,"JPEG",oe-si-10,10,si,30),Kt.setFontSize(8),Kt.setTextColor(100);let bn=25;pe&&(Kt.text(`Concessionnaire: ${pe.first_name} ${pe.last_name}${pe.company_name?` (${pe.company_name})`:""}`,20,bn),bn+=10),ke&&Kt.text(`Client: ${ke.first_name} ${ke.last_name}${ke.company_name?` (${ke.company_name})`:""}`,20,bn),Kt.setDrawColor(200,200,200),Kt.setLineWidth(.5),Kt.line(20,45,oe-20,45);const Un=Oe[tn],je=Un.properties;je&&(Kt.setTextColor(0),Kt.setFontSize(16),Kt.setFont("helvetica","bold"),Kt.text(te(je.type),20,60));const qi=((Rt=Un.getBounds)==null?void 0:Rt.call(Un))||((Ot=Un.getLatLng)==null?void 0:Ot.call(Un));qi&&f.value.fitBounds(qi instanceof Di.LatLng?Di.latLngBounds([qi]):qi,{padding:[50,50]}),await new Promise(Mn=>setTimeout(Mn,2e3)),f.value.invalidateSize(),await new Promise(Mn=>{const ci=()=>{var Ke;const gi=(Ke=f.value)==null?void 0:Ke.getContainer();if(!gi){Mn();return}const In=gi.querySelectorAll(".leaflet-tile-loaded");gi.querySelectorAll(".leaflet-tile-loading").length===0&&In.length>0?Mn():setTimeout(ci,100)};ci()});try{const Mn=await Sn.takeScreen("image"),ci=await new Promise((Ke,Ze)=>{const Qn=new Image;Qn.onload=()=>Ke(Qn),Qn.onerror=$i=>Ze($i),Qn.src=Mn}),gi=oe*.6-30;let In=ci.height*gi/ci.width;In>Ve*.9&&(In=Ve*.9);const ln=Math.max(80,(Ve-In)/2);if(Kt.addImage(ci,"PNG",20,ln,gi,In),je){const Ke=oe*.6+10;let Ze=70;Kt.setFontSize(12),Kt.setFont("helvetica","normal"),je.type==="Circle"?(Kt.text(`Rayon: ${J(je.radius)}`,Ke,Ze),Ze+=10,Kt.text(`Diamètre: ${J(je.radius*2)}`,Ke,Ze),Ze+=10,Kt.text(`Surface: ${J(je.area,"m²")}`,Ke,Ze),Ze+=10,Kt.text(`Périmètre: ${J(je.perimeter)}`,Ke,Ze),Ze+=10,je.surfaceInterieure&&(Kt.text(`Surface intérieure: ${J(je.surfaceInterieure,"m²")}`,Ke,Ze),Ze+=10),je.surfaceExterieure&&(Kt.text(`Surface extérieure: ${J(je.surfaceExterieure,"m²")}`,Ke,Ze),Ze+=10)):je.type==="Rectangle"?(Kt.text(`Largeur: ${J(je.width)}`,Ke,Ze),Ze+=10,Kt.text(`Hauteur: ${J(je.height)}`,Ke,Ze),Ze+=10,Kt.text(`Surface: ${J(je.area,"m²")}`,Ke,Ze),Ze+=10,Kt.text(`Périmètre: ${J(je.perimeter)}`,Ke,Ze),Ze+=10,je.surfaceInterieure&&(Kt.text(`Surface intérieure: ${J(je.surfaceInterieure,"m²")}`,Ke,Ze),Ze+=10),je.surfaceExterieure&&(Kt.text(`Surface extérieure: ${J(je.surfaceExterieure,"m²")}`,Ke,Ze),Ze+=10)):je.type==="Line"?(Kt.text(`Longueur: ${J(je.length)}`,Ke,Ze),Ze+=10,(ie=je.dimensions)!=null&&ie.width&&(Kt.text(`Largeur d'influence: ${J(je.dimensions.width)}`,Ke,Ze),Ze+=10),je.surfaceInfluence&&(Kt.text(`Surface d'influence: ${J(je.surfaceInfluence,"m²")}`,Ke,Ze),Ze+=10)):je.type==="Polygon"?(Kt.text(`Surface: ${J(je.area,"m²")}`,Ke,Ze),Ze+=10,Kt.text(`Périmètre: ${J(je.perimeter)}`,Ke,Ze),Ze+=10,je.surfaceInterieure&&(Kt.text(`Surface intérieure: ${J(je.surfaceInterieure,"m²")}`,Ke,Ze),Ze+=10),je.surfaceExterieure&&(Kt.text(`Surface extérieure: ${J(je.surfaceExterieure,"m²")}`,Ke,Ze),Ze+=10)):je.type==="Semicircle"&&(Kt.text(`Rayon: ${J(je.radius)}`,Ke,Ze),Ze+=10,Kt.text(`Diamètre: ${J(je.radius*2)}`,Ke,Ze),Ze+=10,Kt.text(`Surface: ${J(je.area,"m²")}`,Ke,Ze),Ze+=10,Kt.text(`Périmètre: ${J(je.perimeter)}`,Ke,Ze),Ze+=10,Kt.text(`Longueur d'arc: ${J(je.arcLength)}`,Ke,Ze),Ze+=10,Kt.text(`Angle d'ouverture: ${je.openingAngle.toFixed(1)}°`,Ke,Ze),Ze+=10,je.surfaceInterieure&&(Kt.text(`Surface intérieure: ${J(je.surfaceInterieure,"m²")}`,Ke,Ze),Ze+=10),je.surfaceExterieure&&(Kt.text(`Surface extérieure: ${J(je.surfaceExterieure,"m²")}`,Ke,Ze),Ze+=10))}}catch(Mn){console.error(`[generateSynthesis] Erreur capture forme ${tn+1}:`,Mn)}}f.value.removeControl(Sn),Kt.save(`synthese_${Y.value.nom}.pdf`)}catch(pe){console.error("[generateSynthesis] Erreur:",pe),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{qt.value=!1}}function ee(){f.value&&Ni(()=>{var Rt,Ot;(Rt=f.value)==null||Rt.invalidateSize(),(Ot=S.value)!=null&&Ot.getLayers().length&&x()})}return Rr(Y,Rt=>{Rt&&Ni(()=>{ee()})}),(Rt,Ot)=>{var ie,pe,ke;return se(),ce("div",wC,[M("div",xC,[qt.value?(se(),ce("div",LC,Ot[8]||(Ot[8]=[gc('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):nn("",!0),Y.value?nn("",!0):(se(),ce("div",CC,[M("div",PC,[Ot[11]||(Ot[11]=gc('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+H0+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),M("div",kC,[M("button",{onClick:Ot[0]||(Ot[0]=Kt=>N.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ot[9]||(Ot[9]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Zi(" Créer un nouveau plan ")])),M("button",{onClick:Ot[1]||(Ot[1]=Kt=>Z.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ot[10]||(Ot[10]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Zi(" Charger un plan existant ")]))])])])),gn(M("div",SC,[Y.value&&!qt.value?(se(),ce("div",EC,[Mi(Ix,{"last-save":(ie=Y.value)!=null&&ie.date_modification?new Date(Y.value.date_modification):void 0,"plan-name":(pe=Y.value)==null?void 0:pe.nom,"plan-description":(ke=Y.value)==null?void 0:ke.description,"save-status":At.value,onChangeMapType:Rn(U),onCreateNewPlan:Ot[2]||(Ot[2]=Kt=>N.value=!0),onLoadPlan:Ot[3]||(Ot[3]=Kt=>Z.value=!0),onSavePlan:it,onAdjustView:D,onGenerateSummary:Vt},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):nn("",!0),M("div",AC,[M("div",MC,[M("div",{ref_key:"mapContainer",ref:e,class:"absolute inset-0 z-[1000]"},null,512)]),Y.value&&!qt.value?(se(),ce("div",BC,[Mi(ix,{"current-tool":Rn(a),"selected-shape":V.value,onToolChange:Rn(v),onStyleUpdate:Rn(b),onPropertiesUpdate:rt,onDeleteShape:q},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])])):nn("",!0)]),qt.value?(se(),ce("div",TC,Ot[12]||(Ot[12]=[gc('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):nn("",!0)],512),[[ch,Y.value]]),Mi(j1,{ref_key:"newPlanModalRef",ref:A,modelValue:N.value,"onUpdate:modelValue":Ot[4]||(Ot[4]=Kt=>N.value=Kt),onCreated:tt,onDealerSelected:Ot[5]||(Ot[5]=Kt=>zt.value=Kt),onClientSelected:Ot[6]||(Ot[6]=Kt=>X.value=Kt)},null,8,["modelValue"]),Z.value?(se(),ce("div",DC,[M("div",NC,[M("div",OC,[Ot[14]||(Ot[14]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),M("button",{onClick:Ot[7]||(Ot[7]=Kt=>Z.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Ot[13]||(Ot[13]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Rn(Dt).isAdmin?(se(),ce("div",RC,[zt.value?X.value?(se(),ce("div",WC,[M("div",ZC,[M("button",{onClick:G,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ot[23]||(Ot[23]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Zi(" Retour à la liste des clients ")])),Ot[24]||(Ot[24]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",KC,Pe(X.value.first_name)+" "+Pe(X.value.last_name)+" ("+Pe(X.value.company_name)+") ",1)]),Ot[26]||(Ot[26]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",YC,[Mt.value?(se(),ce(_n,{key:0},Gn(3,Kt=>M("div",{key:Kt,class:"animate-pulse"},Ot[25]||(Ot[25]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(_t.value,Kt=>(se(),ce("button",{key:Kt.id,onClick:oe=>I(Kt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",XC,Pe(Kt.nom),1),M("div",QC,Pe(Kt.description),1),M("div",tP," Modifié le "+Pe($(Kt.date_modification)),1)],8,JC))),128))])])):(se(),ce("div",UC,[M("div",qC,[M("button",{onClick:Nt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ot[18]||(Ot[18]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Zi(" Retour à la liste des concessionnaires ")])),Ot[19]||(Ot[19]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",$C,Pe(zt.value.first_name)+" "+Pe(zt.value.last_name)+" ("+Pe(zt.value.company_name)+") ",1)]),Ot[22]||(Ot[22]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),M("div",VC,[St.value?(se(),ce(_n,{key:0},Gn(3,Kt=>M("div",{key:Kt,class:"animate-pulse"},Ot[20]||(Ot[20]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(H.value,Kt=>(se(),ce("button",{key:Kt.id,onClick:oe=>Et(Kt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",GC,Pe(Kt.first_name)+" "+Pe(Kt.last_name)+" ("+Pe(Kt.company_name)+")",1)]),Ot[21]||(Ot[21]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,HC))),128))])])):(se(),ce("div",IC,[Ot[17]||(Ot[17]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez un concessionnaire",-1)),M("div",FC,[W.value?(se(),ce(_n,{key:0},Gn(3,Kt=>M("div",{key:Kt,class:"animate-pulse"},Ot[15]||(Ot[15]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(xt.value,Kt=>(se(),ce("button",{key:Kt.id,onClick:oe=>yt(Kt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",zC,Pe(Kt.first_name)+" "+Pe(Kt.last_name)+" ("+Pe(Kt.company_name)+")",1)]),Ot[16]||(Ot[16]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,jC))),128))])]))])):Rn(Dt).isDealer?(se(),ce("div",eP,[X.value?(se(),ce("div",oP,[M("div",aP,[M("button",{onClick:G,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ot[30]||(Ot[30]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Zi(" Retour à la liste des clients ")])),Ot[31]||(Ot[31]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",lP,Pe(X.value.first_name)+" "+Pe(X.value.last_name),1)]),Ot[33]||(Ot[33]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",uP,[Mt.value?(se(),ce(_n,{key:0},Gn(3,Kt=>M("div",{key:Kt,class:"animate-pulse"},Ot[32]||(Ot[32]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(_t.value,Kt=>(se(),ce("button",{key:Kt.id,onClick:oe=>I(Kt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",hP,Pe(Kt.nom),1),M("div",fP,Pe(Kt.description),1),M("div",dP," Modifié le "+Pe($(Kt.date_modification)),1)],8,cP))),128))])])):(se(),ce("div",nP,[Ot[29]||(Ot[29]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),M("div",iP,[St.value?(se(),ce(_n,{key:0},Gn(3,Kt=>M("div",{key:Kt,class:"animate-pulse"},Ot[27]||(Ot[27]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(H.value,Kt=>(se(),ce("button",{key:Kt.id,onClick:oe=>Et(Kt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",sP,Pe(Kt.first_name)+" "+Pe(Kt.last_name)+" ("+Pe(Kt.company_name)+")",1)]),Ot[28]||(Ot[28]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,rP))),128))])]))])):(se(),ce("div",pP,[Rn(n).plans.length===0?(se(),ce("div",gP,Ot[34]||(Ot[34]=[M("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(se(),ce("div",mP,[(se(!0),ce(_n,null,Gn(Rn(n).plans,Kt=>(se(),ce("button",{key:Kt.id,onClick:oe=>I(Kt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",yP,Pe(Kt.nom),1),M("div",_P,Pe(Kt.description),1),M("div",bP," Modifié le "+Pe($(Kt.date_modification)),1)],8,vP))),128))]))]))])])):nn("",!0)])])}}}),wP={class:"fixed inset-0 z-50 overflow-y-auto"},xP={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},LP={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},CP={class:"mt-3 text-center sm:mt-0 sm:text-left"},PP={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},kP={class:"mt-4"},SP={class:"grid grid-cols-2 gap-4"},EP=["disabled"],AP={key:0,class:"mt-1 text-sm text-gray-500"},MP={class:"grid grid-cols-2 gap-4"},BP={key:0},TP=["disabled"],DP=["value"],NP={key:1},OP=["disabled"],RP=["value"],IP={key:0},FP={class:"grid grid-cols-2 gap-4"},jP={key:1,class:"rounded-md bg-red-50 p-4"},zP={class:"flex"},UP={class:"ml-3"},qP={class:"text-sm font-medium text-red-800"},$P={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},VP=["disabled"],HP={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},av=Ls({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(t,{emit:e}){var j,R,U,N,Z,Y,kt;const n=t,i=e,o=xs(),a=Fe(!1),l=Fe(null),f=zn(()=>{var At;return n.isAdmin?n.user?n.user.id!==((At=o.user)==null?void 0:At.id):!0:!1}),p=zn(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),v=zn(()=>n.isAdmin?w.role==="UTILISATEUR":!0),b=zn(()=>n.dealers.filter(At=>At.role==="CONCESSIONNAIRE")),w=el({first_name:((j=n.user)==null?void 0:j.first_name)||"",last_name:((R=n.user)==null?void 0:R.last_name)||"",email:((U=n.user)==null?void 0:U.email)||"",username:((N=n.user)==null?void 0:N.username)||"",company_name:((Z=n.user)==null?void 0:Z.company_name)||"",role:((Y=n.user)==null?void 0:Y.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((kt=n.user)==null?void 0:kt.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),S=()=>{if(!w.first_name||!w.last_name)return l.value="Le prénom et le nom sont requis",!1;if(!w.email)return l.value="L'email est requis",!1;if(!w.username)return l.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!w.password)return l.value="Le mot de passe est requis",!1;if(w.password!==w.password_confirm)return l.value="Les mots de passe ne correspondent pas",!1}return w.role==="UTILISATEUR"&&!w.dealer?(l.value="Un concessionnaire doit être sélectionné pour un client",!1):!0},x=async()=>{var At;if(l.value=null,!!S()){a.value=!0;try{const Dt={...w};(At=n.user)!=null&&At.id&&(Dt.id=n.user.id,delete Dt.password,delete Dt.password_confirm),Dt.role==="UTILISATEUR"&&Dt.dealer&&(Dt.concessionnaire=Dt.dealer),delete Dt.dealer,await i("save",Dt),i("close")}catch(Dt){console.error("Erreur formulaire:",Dt),l.value=Dt.message,a.value=!1}}};return(At,Dt)=>(se(),ce("div",wP,[M("div",xP,[Dt[24]||(Dt[24]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),Dt[25]||(Dt[25]=M("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),M("div",LP,[M("div",null,[M("div",CP,[M("h3",PP,Pe(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),M("div",kP,[M("form",{onSubmit:Jh(x,["prevent"]),class:"space-y-4"},[M("div",SP,[M("div",null,[Dt[10]||(Dt[10]=M("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),gn(M("input",{type:"text",id:"first_name","onUpdate:modelValue":Dt[0]||(Dt[0]=xt=>w.first_name=xt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.first_name]])]),M("div",null,[Dt[11]||(Dt[11]=M("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),gn(M("input",{type:"text",id:"last_name","onUpdate:modelValue":Dt[1]||(Dt[1]=xt=>w.last_name=xt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.last_name]])])]),M("div",null,[Dt[12]||(Dt[12]=M("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),gn(M("input",{type:"email",id:"email","onUpdate:modelValue":Dt[2]||(Dt[2]=xt=>w.email=xt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.email]])]),M("div",null,[Dt[13]||(Dt[13]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),gn(M("input",{type:"text",id:"username","onUpdate:modelValue":Dt[3]||(Dt[3]=xt=>w.username=xt),required:"",disabled:!!n.user,class:Oi(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,EP),[[Hn,w.username]]),n.user?(se(),ce("p",AP," Le nom d'utilisateur ne peut pas être modifié après la création. ")):nn("",!0)]),M("div",null,[Dt[14]||(Dt[14]=M("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),gn(M("input",{type:"text",id:"company_name","onUpdate:modelValue":Dt[4]||(Dt[4]=xt=>w.company_name=xt),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.company_name]])]),M("div",MP,[n.isAdmin?(se(),ce("div",BP,[Dt[16]||(Dt[16]=M("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),gn(M("select",{id:"role","onUpdate:modelValue":Dt[5]||(Dt[5]=xt=>w.role=xt),required:"",disabled:!f.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Dt[15]||(Dt[15]=M("option",{value:""},"Sélectionner un rôle",-1)),(se(!0),ce(_n,null,Gn(p.value,xt=>(se(),ce("option",{key:xt.value,value:xt.value},Pe(xt.label),9,DP))),128))],8,TP),[[$s,w.role]])])):nn("",!0),v.value?(se(),ce("div",NP,[Dt[18]||(Dt[18]=M("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),gn(M("select",{id:"dealer","onUpdate:modelValue":Dt[6]||(Dt[6]=xt=>w.dealer=xt),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Dt[17]||(Dt[17]=M("option",{value:""},"Sélectionner un concessionnaire",-1)),(se(!0),ce(_n,null,Gn(b.value,xt=>(se(),ce("option",{key:xt.id,value:xt.id},Pe(Rn(Xl)(xt)),9,RP))),128))],8,OP),[[$s,w.dealer]])])):nn("",!0)]),t.user?nn("",!0):(se(),ce("div",IP,[M("div",FP,[M("div",null,[Dt[19]||(Dt[19]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),gn(M("input",{type:"password",id:"password","onUpdate:modelValue":Dt[7]||(Dt[7]=xt=>w.password=xt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.password]])]),M("div",null,[Dt[20]||(Dt[20]=M("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),gn(M("input",{type:"password",id:"password_confirm","onUpdate:modelValue":Dt[8]||(Dt[8]=xt=>w.password_confirm=xt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.password_confirm]])])]),Dt[21]||(Dt[21]=M("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),l.value?(se(),ce("div",jP,[M("div",zP,[Dt[22]||(Dt[22]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",UP,[M("h3",qP,Pe(l.value),1)])])])):nn("",!0),M("div",$P,[M("button",{type:"submit",disabled:a.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[a.value?(se(),ce("svg",HP,Dt[23]||(Dt[23]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),Zi(" "+Pe(a.value?"Enregistrement...":"Enregistrer"),1)],8,VP),M("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:Dt[9]||(Dt[9]=xt=>At.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),GP={class:"fixed inset-0 z-50 overflow-y-auto"},WP={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},ZP={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},KP={class:"sm:flex sm:items-start"},YP={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},JP={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},XP={class:"mt-2"},QP={class:"text-sm text-gray-500"},t6={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},lv=Ls({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(se(),ce("div",GP,[M("div",WP,[n[3]||(n[3]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=M("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),M("div",ZP,[M("div",KP,[n[2]||(n[2]=M("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[M("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),M("div",YP,[M("h3",JP,Pe(t.title),1),M("div",XP,[M("p",QP,Pe(t.message),1)])])]),M("div",t6,[M("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=i=>e.$emit("confirm"))}," Confirmer "),M("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=i=>e.$emit("cancel"))}," Annuler ")])])])]))}}),e6={class:"h-full bg-gray-50"},n6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},i6={class:"flex justify-between items-center mb-8"},r6={class:"text-3xl font-extrabold text-gray-900"},s6={class:"bg-white shadow rounded-lg mb-6 p-4"},o6={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},a6={key:0},l6=["placeholder"],u6={key:1},c6=["value"],h6={class:"bg-white shadow rounded-lg"},f6={class:"overflow-x-auto"},d6={class:"min-w-full divide-y divide-gray-200"},p6={class:"bg-gray-50"},g6={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},m6={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},v6={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},y6={class:"bg-white divide-y divide-gray-200"},_6={class:"px-6 py-4 whitespace-nowrap"},b6={class:"flex items-center"},w6={class:"flex-shrink-0 h-10 w-10"},x6={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},L6={class:"text-primary-600 font-medium"},C6={class:"ml-4"},P6={class:"text-sm font-medium text-gray-900"},k6={class:"text-sm text-gray-500"},S6={class:"px-6 py-4 whitespace-nowrap"},E6={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},A6={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},M6={class:"px-6 py-4 whitespace-nowrap"},B6={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},T6=["onClick"],D6=["onClick"],N6=Ls({__name:"UserListView",setup(t){const e=xs(),n=Fe([]),i=Fe([]),o=Fe(!1),a=Fe(!1),l=Fe(null),f=Fe(null),p=el({role:"",search:"",dealer:""}),v=zn(()=>e.isAdmin),b=zn(()=>e.isDealer),w=zn(()=>n.value.filter(X=>X.role==="CONCESSIONNAIRE")),S=zn(()=>{var W;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",v.value),console.log("Is dealer:",b.value),console.log("Current filters:",p);let X=n.value;if(b.value&&(console.log("Filtering for dealer:",(W=e.user)==null?void 0:W.id),X=X.filter(St=>{var Mt;return St.role==="UTILISATEUR"&&St.dealer===((Mt=e.user)==null?void 0:Mt.id)}),console.log("Filtered users for dealer:",X)),v.value&&(p.role&&(X=X.filter(St=>St.role===p.role),console.log("Filtered by role:",X)),p.dealer&&(X=X.filter(St=>String(St.dealer)===String(p.dealer)),console.log("Filtered by dealer:",X))),p.search){const St=p.search.toLowerCase();X=X.filter(Mt=>Mt.username.toLowerCase().includes(St)||Mt.email.toLowerCase().includes(St)||Mt.first_name.toLowerCase().includes(St)||Mt.last_name.toLowerCase().includes(St)||Mt.company_name&&Mt.company_name.toLowerCase().includes(St)),console.log("Filtered by search:",X)}return console.log("Final filtered users:",X),X});Ea(async()=>{await x(),v.value&&await j()});async function x(){try{console.log("Fetching users...");const X=await kn.get("/users/");console.log("Users API response:",X.data),n.value=X.data,console.log("Users after assignment:",n.value)}catch(X){console.error("Erreur lors de la récupération des utilisateurs:",X)}}async function j(){try{const X=await kn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});i.value=X.data}catch(X){console.error("Erreur lors de la récupération des concessionnaires:",X)}}function R(){l.value=null,o.value=!0}function U(X){l.value={...X},o.value=!0}function N(){o.value=!1,l.value=null}async function Z(X){var W;try{let St;const Mt=!!X.id,A={...X};return delete A.dealer_name,delete A.full_name,delete A.user_type,delete A.permissions,Mt?St=await kn.patch(`/users/${X.id}/`,A):St=await kn.post("/users/",A),await x(),N(),St.data}catch(St){const Mt=((W=St.response)==null?void 0:W.data)||{};let A="";throw typeof Mt=="object"&&(A=Object.entries(Mt).map(([H,V])=>Array.isArray(V)?V[0]:V).filter(H=>H).join(`
`)),A||(A="Une erreur est survenue lors de la sauvegarde"),new Error(A)}}function Y(X){f.value=X,a.value=!0}async function kt(){if(f.value)try{await kn.delete(`/users/${f.value.id}/`),await x(),a.value=!1,f.value=null}catch(X){throw console.error("Erreur lors de la suppression de l'utilisateur:",X),X}}function At(X,W){return`${(X==null?void 0:X.charAt(0))||""}${(W==null?void 0:W.charAt(0))||""}`.toUpperCase()}const Dt={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function xt(X){return Dt[X]||X}function gt(X){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function _t(X){return X?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function zt(X){var W;return v.value?!0:b.value?X.role==="UTILISATEUR"&&X.dealer===((W=e.user)==null?void 0:W.id):!1}return(X,W)=>{var St,Mt;return se(),ce("div",e6,[M("div",n6,[M("div",i6,[M("h1",r6,Pe(v.value?"Gestion des utilisateurs":"Mes clients"),1),M("button",{onClick:R,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[W[4]||(W[4]=M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),Zi(" "+Pe(v.value?"Nouvel utilisateur":"Nouveau client"),1)])]),M("div",s6,[M("div",o6,[v.value?(se(),ce("div",a6,[W[6]||(W[6]=M("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),gn(M("select",{id:"role-filter","onUpdate:modelValue":W[0]||(W[0]=A=>p.role=A),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},W[5]||(W[5]=[M("option",{value:""},"Tous les rôles",-1),M("option",{value:"ADMIN"},"Admin",-1),M("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),M("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[$s,p.role]])])):nn("",!0),M("div",null,[W[7]||(W[7]=M("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),gn(M("input",{type:"text",id:"search","onUpdate:modelValue":W[1]||(W[1]=A=>p.search=A),placeholder:v.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,l6),[[Hn,p.search]])]),v.value?(se(),ce("div",u6,[W[9]||(W[9]=M("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),gn(M("select",{id:"dealer-filter","onUpdate:modelValue":W[2]||(W[2]=A=>p.dealer=A),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[W[8]||(W[8]=M("option",{value:""},"Tous les concessionnaires",-1)),(se(!0),ce(_n,null,Gn(w.value,A=>(se(),ce("option",{key:A.id,value:A.id},Pe(A.company_name||`${A.first_name} ${A.last_name}`),9,c6))),128))],512),[[$s,p.dealer]])])):nn("",!0)])]),M("div",h6,[M("div",f6,[M("table",d6,[M("thead",p6,[M("tr",null,[M("th",g6,Pe(v.value?"Utilisateur":"Client"),1),v.value?(se(),ce("th",m6," Rôle ")):nn("",!0),W[10]||(W[10]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),v.value?(se(),ce("th",v6," Concessionnaire ")):nn("",!0),W[11]||(W[11]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),W[12]||(W[12]=M("th",{scope:"col",class:"relative px-6 py-3"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",y6,[(se(!0),ce(_n,null,Gn(S.value,A=>(se(),ce("tr",{key:A.id},[M("td",_6,[M("div",b6,[M("div",w6,[M("div",x6,[M("span",L6,Pe(At(A.first_name,A.last_name)),1)])]),M("div",C6,[M("div",P6,Pe(Rn(Xl)(A)),1),M("div",k6,Pe(A.username),1)])])]),M("td",S6,[M("span",{class:Oi(gt(A.role))},Pe(xt(A.role)),3)]),M("td",E6,Pe(A.email),1),M("td",A6,Pe(A.dealer_name||"-"),1),M("td",M6,[M("span",{class:Oi(_t(A.is_active))},Pe(A.is_active?"Actif":"Inactif"),3)]),M("td",B6,[M("button",{onClick:H=>U(A),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,T6),zt(A)?(se(),ce("button",{key:0,onClick:H=>Y(A),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,D6)):nn("",!0)])]))),128))])])])])]),o.value?(se(),tl(av,{key:0,user:l.value,dealers:i.value,"is-admin":v.value,"current-dealer":(Mt=(St=Rn(e).user)==null?void 0:St.id)==null?void 0:Mt.toString(),onClose:N,onSave:Z},null,8,["user","dealers","is-admin","current-dealer"])):nn("",!0),a.value?(se(),tl(lv,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:kt,onCancel:W[3]||(W[3]=A=>a.value=!1)})):nn("",!0)])}}}),O6={class:"h-full bg-gray-50"},R6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},I6={class:"sm:flex sm:items-center"},F6={class:"sm:flex-auto"},j6={class:"text-2xl font-semibold text-gray-900"},z6={class:"mt-2 text-sm text-gray-700"},U6={key:0,class:"mt-8"},q6={class:"mb-6"},$6=["value"],V6={key:0,class:"mb-6"},H6=["value"],G6={key:1,class:"mt-8"},W6={class:"mb-6"},Z6=["value"],K6={class:"mt-8"},Y6={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},J6={class:"overflow-x-auto"},X6={class:"min-w-full divide-y divide-gray-300"},Q6={class:"bg-gray-50"},tk={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},ek={class:"ml-2 flex-none rounded"},nk={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},ik={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},rk={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},sk={class:"ml-2 flex-none rounded"},ok={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},ak={class:"ml-2 flex-none rounded"},lk={class:"divide-y divide-gray-200 bg-white"},uk={key:0},ck={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},hk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},fk={key:0,class:"px-3 py-4 text-sm text-gray-900"},dk={key:0,class:"flex items-center"},pk={class:"h-8 w-8 flex-shrink-0"},gk={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},mk={class:"text-primary-700 font-medium text-sm"},vk={class:"ml-3"},yk={class:"font-medium"},_k={key:1,class:"text-gray-500"},bk={key:1,class:"px-3 py-4 text-sm text-gray-900"},wk={key:0,class:"flex items-center"},xk={class:"h-8 w-8 flex-shrink-0"},Lk={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Ck={class:"text-primary-700 font-medium text-sm"},Pk={class:"ml-3"},kk={class:"font-medium"},Sk={key:1,class:"text-gray-500"},Ek={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Ak={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Mk={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},Bk=["onClick"],Tk=["onClick"],Dk=["onClick"],Nk={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Ok={class:"bg-white rounded-lg p-6 max-w-md w-full"},Rk={class:"flex justify-between items-center mb-4"},Ik={key:0,class:"space-y-4"},Fk=["value"],jk=["value"],zk={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},Uk={class:"flex"},qk={class:"ml-3"},$k={class:"text-sm font-medium text-red-800"},Vk={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},Hk=["disabled"],Gk={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Wk=Ls({__name:"PlansView",setup(t){const e=jc(),n=sp(),i=xs(),o=Fe([]),a=Fe([]),l=Fe([]),f=Fe(!1),p=Fe(!1),v=Fe({nom:"",description:"",client:null}),b=Fe({id:0,nom:"",description:"",concessionnaire:null,client:null}),w=Fe(!1),S=Fe(null),x=Fe(null),j=Fe(null),R=Fe("date_modification"),U=Fe("desc"),N=zn(()=>x.value?l.value.filter(V=>V.concessionnaire===x.value):l.value),Z=zn(()=>{let V=o.value;return i.isAdmin?x.value&&(V=V.filter(z=>z.concessionnaire===x.value),j.value&&(V=V.filter(z=>z.client===j.value))):i.isDealer&&(V=V.filter(z=>{var mt;return z.concessionnaire===((mt=i.user)==null?void 0:mt.id)}),j.value&&(V=V.filter(z=>z.client===j.value))),[...V].sort((z,mt)=>{if(R.value==="nom")return U.value==="asc"?z.nom.localeCompare(mt.nom):mt.nom.localeCompare(z.nom);{const ft=new Date(z[R.value]).getTime(),ht=new Date(mt[R.value]).getTime();return U.value==="asc"?ft-ht:ht-ft}})}),Y=zn(()=>i.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:o.value}:i.isDealer?{title:"Plans des clients",description:"Plans où vous êtes assigné comme concessionnaire",plans:o.value.filter(V=>{var z;return V.concessionnaire===((z=i.user)==null?void 0:z.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:o.value.filter(V=>{var z,mt;return V.client===((z=i.user)==null?void 0:z.id)||V.createur.id===((mt=i.user)==null?void 0:mt.id)})});Ea(async()=>{var V;await kt(),i.isAdmin?await At():i.isDealer&&await W(((V=i.user)==null?void 0:V.id)||0)});async function kt(){try{const V=await n.fetchPlansWithDetails();o.value=V.data}catch(V){console.error("Erreur lors du chargement des plans:",V)}}async function At(){try{const[V,z]=await Promise.all([kn.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),kn.get("/users/",{params:{role:"UTILISATEUR"}})]);a.value=V.data,l.value=z.data}catch(V){console.error("Erreur lors du chargement des dealers et clients:",V)}}function Dt(){f.value=!0,v.value={nom:"",description:"",client:null}}async function xt(V){try{n.setCurrentPlan(V),localStorage.setItem("lastPlanId",V.id.toString()),e.push("/")}catch(z){console.error("Erreur lors du chargement du plan:",z),alert("Une erreur est survenue lors du chargement du plan")}}async function gt(V){var z;if(V!=null&&V.id&&confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await n.deletePlan(V.id),await kt(),((z=n.currentPlan)==null?void 0:z.id)===V.id&&n.clearCurrentPlan()}catch(mt){console.error("Erreur lors de la suppression du plan:",mt),alert("Une erreur est survenue lors de la suppression du plan")}}function _t(V){return new Date(V).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function zt(V){return V?(V.first_name.charAt(0)+V.last_name.charAt(0)).toUpperCase():""}function X(V){b.value={id:V.id,nom:V.nom,description:V.description,concessionnaire:V.concessionnaire||null,client:V.client||null},V.concessionnaire&&W(V.concessionnaire),p.value=!0}async function W(V){try{const z=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:V}});l.value=z.data}catch(z){console.error("Erreur lors du chargement des clients:",z),l.value=[]}}async function St(){var V,z,mt,ft,ht;S.value=null,w.value=!0;try{if(!b.value.nom.trim())throw new Error("Le nom du plan est requis");if(b.value.client&&!b.value.concessionnaire)throw new Error("Un concessionnaire doit être sélectionné pour assigner un client");await n.updatePlanDetails(b.value.id,{nom:b.value.nom.trim(),description:b.value.description.trim(),concessionnaire:b.value.concessionnaire,client:b.value.client})&&(p.value=!1,await kt())}catch(I){if(console.error("Erreur lors de la mise à jour du plan:",I),(z=(V=I.response)==null?void 0:V.data)!=null&&z.detail)S.value=I.response.data.detail;else if((ft=(mt=I.response)==null?void 0:mt.data)!=null&&ft.non_field_errors)S.value=I.response.data.non_field_errors[0];else if((ht=I.response)!=null&&ht.data){const it=Object.entries(I.response.data).map(([rt,$])=>`${rt}: ${Array.isArray($)?$[0]:$}`);S.value=it.join(`
`)}else S.value=I.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{w.value=!1}}Rr(()=>b.value.concessionnaire,async V=>{V?await W(V):(l.value=[],b.value.client=null)});function Mt(V){const z=i.user;return z?z.user_type==="admin"?!0:z.user_type==="dealer"?V.concessionnaire===z.id:V.client===z.id||V.createur.id===z.id:!1}async function A(V){await kt(),localStorage.setItem("lastPlanId",V.toString()),console.log(`Plan ${V} créé et défini comme plan actif`),e.push("/")}function H(V){R.value===V?U.value=U.value==="asc"?"desc":"asc":(R.value=V,U.value="desc")}return(V,z)=>(se(),ce("div",O6,[M("div",R6,[M("div",I6,[M("div",F6,[M("h1",j6,Pe(Y.value.title),1),M("p",z6,Pe(Y.value.description),1)]),M("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[M("button",{onClick:Dt,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Rn(i).isAdmin?(se(),ce("div",U6,[M("div",q6,[z[14]||(z[14]=M("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),gn(M("select",{id:"dealer-filter","onUpdate:modelValue":z[0]||(z[0]=mt=>x.value=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[13]||(z[13]=M("option",{value:null},"Tous les concessionnaires",-1)),(se(!0),ce(_n,null,Gn(a.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(mt.first_name)+" "+Pe(mt.last_name)+" ("+Pe(mt.company_name)+") ",9,$6))),128))],512),[[$s,x.value]])]),x.value?(se(),ce("div",V6,[z[16]||(z[16]=M("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),gn(M("select",{id:"client-filter","onUpdate:modelValue":z[1]||(z[1]=mt=>j.value=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[15]||(z[15]=M("option",{value:null},"Tous les clients",-1)),(se(!0),ce(_n,null,Gn(N.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(mt.first_name)+" "+Pe(mt.last_name)+" ("+Pe(mt.company_name)+") ",9,H6))),128))],512),[[$s,j.value]])])):nn("",!0)])):Rn(i).isDealer?(se(),ce("div",G6,[M("div",W6,[z[18]||(z[18]=M("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),gn(M("select",{id:"client-filter","onUpdate:modelValue":z[2]||(z[2]=mt=>j.value=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[17]||(z[17]=M("option",{value:null},"Tous les clients",-1)),(se(!0),ce(_n,null,Gn(l.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(mt.first_name)+" "+Pe(mt.last_name)+" ("+Pe(mt.company_name)+") ",9,Z6))),128))],512),[[$s,j.value]])])])):nn("",!0),M("div",K6,[M("div",Y6,[M("div",J6,[M("table",X6,[M("thead",Q6,[M("tr",null,[M("th",tk,[M("button",{onClick:z[3]||(z[3]=mt=>H("nom")),class:"group inline-flex items-center"},[z[20]||(z[20]=Zi(" Nom ")),M("span",ek,[(se(),ce("svg",{class:Oi(["h-5 w-5",{"text-gray-900":R.value==="nom","text-gray-400":R.value!=="nom","rotate-180":R.value==="nom"&&U.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},z[19]||(z[19]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),z[25]||(z[25]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Rn(i).isDealer?nn("",!0):(se(),ce("th",nk," Concessionnaire ")),Rn(i).isClient?nn("",!0):(se(),ce("th",ik," Client ")),M("th",rk,[M("button",{onClick:z[4]||(z[4]=mt=>H("date_creation")),class:"group inline-flex items-center"},[z[22]||(z[22]=Zi(" Créé le ")),M("span",sk,[(se(),ce("svg",{class:Oi(["h-5 w-5",{"text-gray-900":R.value==="date_creation","text-gray-400":R.value!=="date_creation","rotate-180":R.value==="date_creation"&&U.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},z[21]||(z[21]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),M("th",ok,[M("button",{onClick:z[5]||(z[5]=mt=>H("date_modification")),class:"group inline-flex items-center"},[z[24]||(z[24]=Zi(" Modifié le ")),M("span",ak,[(se(),ce("svg",{class:Oi(["h-5 w-5",{"text-gray-900":R.value==="date_modification","text-gray-400":R.value!=="date_modification","rotate-180":R.value==="date_modification"&&U.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},z[23]||(z[23]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),z[26]||(z[26]=M("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",lk,[Z.value.length===0?(se(),ce("tr",uk,z[27]||(z[27]=[M("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):nn("",!0),(se(!0),ce(_n,null,Gn(Z.value,mt=>(se(),ce("tr",{key:mt.id,class:"hover:bg-gray-50"},[M("td",ck,Pe(mt.nom),1),M("td",hk,Pe(mt.description||"-"),1),Rn(i).isDealer?nn("",!0):(se(),ce("td",fk,[mt.concessionnaire_details?(se(),ce("div",dk,[M("div",pk,[M("div",gk,[M("span",mk,Pe(zt(mt.concessionnaire_details)),1)])]),M("div",vk,[M("div",yk,Pe(Rn(Xl)(mt.concessionnaire_details)),1)])])):(se(),ce("div",_k,"-"))])),Rn(i).isClient?nn("",!0):(se(),ce("td",bk,[mt.client_details?(se(),ce("div",wk,[M("div",xk,[M("div",Lk,[M("span",Ck,Pe(zt(mt.client_details)),1)])]),M("div",Pk,[M("div",kk,Pe(Rn(Xl)(mt.client_details)),1)])])):(se(),ce("div",Sk,"-"))])),M("td",Ek,Pe(_t(mt.date_creation)),1),M("td",Ak,Pe(_t(mt.date_modification)),1),M("td",Mk,[M("button",{onClick:ft=>xt(mt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,Bk),M("button",{onClick:ft=>X(mt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Tk),Mt(mt)?(se(),ce("button",{key:0,onClick:ft=>gt(mt),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Dk)):nn("",!0)])]))),128))])])])])]),Mi(j1,{modelValue:f.value,"onUpdate:modelValue":z[6]||(z[6]=mt=>f.value=mt),dealers:a.value,clients:l.value,onCreated:A},null,8,["modelValue","dealers","clients"]),p.value?(se(),ce("div",Nk,[M("div",Ok,[M("div",Rk,[z[29]||(z[29]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),M("button",{onClick:z[7]||(z[7]=mt=>p.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},z[28]||(z[28]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("form",{onSubmit:Jh(St,["prevent"]),class:"space-y-4"},[M("div",null,[z[30]||(z[30]=M("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),gn(M("input",{type:"text",id:"edit-nom","onUpdate:modelValue":z[8]||(z[8]=mt=>b.value.nom=mt),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Hn,b.value.nom]])]),M("div",null,[z[31]||(z[31]=M("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),gn(M("textarea",{id:"edit-description","onUpdate:modelValue":z[9]||(z[9]=mt=>b.value.description=mt),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Hn,b.value.description]])]),Rn(i).isAdmin?(se(),ce("div",Ik,[M("div",null,[z[33]||(z[33]=M("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),gn(M("select",{id:"edit-concessionnaire","onUpdate:modelValue":z[10]||(z[10]=mt=>b.value.concessionnaire=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[32]||(z[32]=M("option",{value:null},"Aucun",-1)),(se(!0),ce(_n,null,Gn(a.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(Rn(Xl)(mt)),9,Fk))),128))],512),[[$s,b.value.concessionnaire]])]),M("div",null,[z[35]||(z[35]=M("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),gn(M("select",{id:"edit-client","onUpdate:modelValue":z[11]||(z[11]=mt=>b.value.client=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[34]||(z[34]=M("option",{value:null},"Aucun",-1)),(se(!0),ce(_n,null,Gn(N.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(Rn(Xl)(mt)),9,jk))),128))],512),[[$s,b.value.client]])])])):nn("",!0),S.value?(se(),ce("div",zk,[M("div",Uk,[z[36]||(z[36]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",qk,[M("p",$k,Pe(S.value),1)])])])):nn("",!0),M("div",Vk,[M("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:z[12]||(z[12]=mt=>p.value=!1)}," Annuler "),M("button",{type:"submit",disabled:w.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[w.value?(se(),ce("svg",Gk,z[37]||(z[37]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),Zi(" "+Pe(w.value?"Enregistrement...":"Enregistrer"),1)],8,Hk)])],32)])])):nn("",!0)])]))}}),Zk={class:"h-full bg-gray-50"},Kk={class:"container mx-auto px-4 py-8"},Yk={class:"sm:flex sm:items-center"},Jk={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Xk={class:"mt-8"},Qk={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},tS={class:"overflow-x-auto"},eS={class:"min-w-full divide-y divide-gray-300"},nS={class:"divide-y divide-gray-200 bg-white"},iS={key:0,class:"animate-pulse"},rS={key:1},sS={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},oS={class:"flex items-center"},aS={class:"h-10 w-10 flex-shrink-0"},lS={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},uS={class:"text-primary-600 font-medium"},cS={class:"ml-4"},hS={class:"font-medium text-gray-900"},fS={class:"text-gray-500"},dS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},pS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},gS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},mS={class:"flex items-center"},vS={class:"font-medium"},yS={class:"text-gray-400 ml-1"},_S={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},bS=["onClick"],wS=["onClick"],xS=Ls({__name:"ClientListView",setup(t){jc();const e=xs(),n=Fe([]),i=Fe(!0),o=Fe(!1),a=Fe(!1),l=Fe(null),f=Fe(null);Ea(async()=>{await p()});async function p(){var R;try{const U=await kn.get("/users/",{params:{dealer:(R=e.user)==null?void 0:R.id,role:"UTILISATEUR",include_plans:!0}});n.value=U.data}catch(U){console.error("Error fetching clients:",U)}finally{i.value=!1}}function v(R,U){return`${(R==null?void 0:R.charAt(0))||""}${(U==null?void 0:U.charAt(0))||""}`.toUpperCase()}function b(R){l.value=R,o.value=!0}function w(){o.value=!1,l.value=null}async function S(R){var U;try{const N=!!R.id,Z=N?`/users/${R.id}/`:"/users/",Y=N?"patch":"post";R.role="UTILISATEUR",R.concessionnaire=(U=e.user)==null?void 0:U.id,await kn[Y](Z,R),await p(),w()}catch(N){throw console.error("Erreur lors de la sauvegarde du client:",N),N}}function x(R){f.value=R,a.value=!0}async function j(){if(f.value)try{await kn.delete(`/users/${f.value.id}/`),await p(),a.value=!1,f.value=null}catch(R){throw console.error("Erreur lors de la suppression du client:",R),R}}return(R,U)=>{var N,Z;return se(),ce("div",Zk,[M("div",Kk,[M("div",Yk,[U[3]||(U[3]=M("div",{class:"sm:flex-auto"},[M("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),M("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),M("div",Jk,[M("button",{onClick:U[0]||(U[0]=Y=>o.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},U[2]||(U[2]=[M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Zi(" Ajouter un client ")]))])]),M("div",Xk,[M("div",Qk,[M("div",tS,[M("table",eS,[U[6]||(U[6]=M("thead",{class:"bg-gray-50"},[M("tr",null,[M("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),M("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[M("span",{class:"sr-only"},"Actions")])])],-1)),M("tbody",nS,[i.value?(se(),ce("tr",iS,U[4]||(U[4]=[M("td",{colspan:"5",class:"py-4 px-6"},[M("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(se(),ce("tr",rS,U[5]||(U[5]=[M("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):nn("",!0),(se(!0),ce(_n,null,Gn(n.value,Y=>(se(),ce("tr",{key:Y.id,class:"hover:bg-gray-50"},[M("td",sS,[M("div",oS,[M("div",aS,[M("div",lS,[M("span",uS,Pe(v(Y.first_name,Y.last_name)),1)])]),M("div",cS,[M("div",hS,Pe(Rn(Xl)(Y)),1),M("div",fS,Pe(Y.username),1)])])]),M("td",dS,Pe(Y.email),1),M("td",pS,Pe(Y.company_name||"-"),1),M("td",gS,[M("div",mS,[M("span",vS,Pe(Y.plans_count||0),1),M("span",yS,"plan"+Pe((Y.plans_count||0)>1?"s":""),1)])]),M("td",_S,[M("button",{onClick:kt=>b(Y),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,bS),M("button",{onClick:kt=>x(Y),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,wS)])]))),128))])])])])]),o.value?(se(),tl(av,{key:0,user:l.value||{},dealers:[{...Rn(e).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(Z=(N=Rn(e).user)==null?void 0:N.id)==null?void 0:Z.toString(),onClose:w,onSave:S},null,8,["user","dealers","current-dealer"])):nn("",!0),a.value?(se(),tl(lv,{key:1,title:"Supprimer le client",message:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible.",onConfirm:j,onCancel:U[1]||(U[1]=Y=>a.value=!1)})):nn("",!0)])])}}}),uv=O5({history:f5("/"),routes:[{path:"/",name:"home",component:xg,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:Wk,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:N6,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:xS,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Ql(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:Q3,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Ql(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Ql(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:N3,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:xg,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Ql(()=>import("./NotFoundView.js"),[])}]});uv.beforeEach(async(t,e,n)=>{var f,p;const i=xs();if(console.log("Route:",t.path,"Auth state:",{initialized:i.initialized,isAuthenticated:i.isAuthenticated,user:i.user}),!i.initialized)try{await i.initialize(window.INITIAL_STATE)}catch(v){console.error("Error initializing auth store:",v)}const o=i.isAuthenticated,a=(f=i.user)==null?void 0:f.must_change_password,l=(p=i.user)==null?void 0:p.user_type;if(t.meta.requiresAuth&&!o){n("/login");return}if(o&&a&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!a){n({name:"home"});return}if(t.meta.allowedRoles&&l&&!t.meta.allowedRoles.includes(l)){n({name:"home"});return}if(t.meta.requiresGuest&&o){n({name:"home"});return}n()});const up=Y_(f3),cv=Q_();up.use(cv);up.use(uv);const LS=xs(cv);window.INITIAL_STATE&&LS.initialize(window.INITIAL_STATE);up.mount("#app");export{di as _,el as a,M as b,ce as c,Ls as d,nn as e,gn as f,se as g,gc as h,Zi as i,Mi as j,Ja as k,ky as l,$S as m,Oi as n,Ea as o,jc as p,Eo as q,Fe as r,k1 as s,Pe as t,xs as u,Hn as v,Jh as w};
