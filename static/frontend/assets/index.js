var hv=Object.defineProperty;var fv=(e,t,n)=>t in e?hv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zt=(e,t,n)=>fv(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Md(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ci={},Pu=[],va=()=>{},dv=()=>!1,Bh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Bd=e=>e.startsWith("onUpdate:"),xr=Object.assign,Td=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},pv=Object.prototype.hasOwnProperty,ii=(e,t)=>pv.call(e,t),fn=Array.isArray,Su=e=>Sc(e)==="[object Map]",Iu=e=>Sc(e)==="[object Set]",dp=e=>Sc(e)==="[object Date]",En=e=>typeof e=="function",Gi=e=>typeof e=="string",ya=e=>typeof e=="symbol",hi=e=>e!==null&&typeof e=="object",_m=e=>(hi(e)||En(e))&&En(e.then)&&En(e.catch),ym=Object.prototype.toString,Sc=e=>ym.call(e),mv=e=>Sc(e).slice(8,-1),bm=e=>Sc(e)==="[object Object]",Nd=e=>Gi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,rc=Md(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Th=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},gv=/-(\w)/g,bo=Th(e=>e.replace(gv,(t,n)=>n?n.toUpperCase():"")),vv=/\B([A-Z])/g,su=Th(e=>e.replace(vv,"-$1").toLowerCase()),Nh=Th(e=>e.charAt(0).toUpperCase()+e.slice(1)),pf=Th(e=>e?`on${Nh(e)}`:""),xl=(e,t)=>!Object.is(e,t),eh=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},wm=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},dh=e=>{const t=parseFloat(e);return isNaN(t)?e:t},_v=e=>{const t=Gi(e)?Number(e):NaN;return isNaN(t)?e:t};let pp;const Dh=()=>pp||(pp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Oh(e){if(fn(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=Gi(r)?xv(r):Oh(r);if(o)for(const a in o)t[a]=o[a]}return t}else if(Gi(e)||hi(e))return e}const yv=/;(?![^(]*\))/g,bv=/:([^]+)/,wv=/\/\*[^]*?\*\//g;function xv(e){const t={};return e.replace(wv,"").split(yv).forEach(n=>{if(n){const r=n.split(bv);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ni(e){let t="";if(Gi(e))t=e;else if(fn(e))for(let n=0;n<e.length;n++){const r=Ni(e[n]);r&&(t+=r+" ")}else if(hi(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Lv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Cv=Md(Lv);function xm(e){return!!e||e===""}function kv(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=nu(e[r],t[r]);return n}function nu(e,t){if(e===t)return!0;let n=dp(e),r=dp(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=ya(e),r=ya(t),n||r)return e===t;if(n=fn(e),r=fn(t),n||r)return n&&r?kv(e,t):!1;if(n=hi(e),r=hi(t),n||r){if(!n||!r)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const u in e){const f=e.hasOwnProperty(u),m=t.hasOwnProperty(u);if(f&&!m||!f&&m||!nu(e[u],t[u]))return!1}}return String(e)===String(t)}function Dd(e,t){return e.findIndex(n=>nu(n,t))}const Lm=e=>!!(e&&e.__v_isRef===!0),kt=e=>Gi(e)?e:e==null?"":fn(e)||hi(e)&&(e.toString===ym||!En(e.toString))?Lm(e)?kt(e.value):JSON.stringify(e,Cm,2):String(e),Cm=(e,t)=>Lm(t)?Cm(e,t.value):Su(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,o],a)=>(n[mf(r,a)+" =>"]=o,n),{})}:Iu(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>mf(n))}:ya(t)?mf(t):hi(t)&&!fn(t)&&!bm(t)?String(t):t,mf=(e,t="")=>{var n;return ya(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let us;class km{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=us,!t&&us&&(this.index=(us.scopes||(us.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=us;try{return us=this,t()}finally{us=n}}}on(){us=this}off(){us=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Pm(e){return new km(e)}function Sm(){return us}function Pv(e,t=!1){us&&us.cleanups.push(e)}let gi;const gf=new WeakSet;class Em{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,us&&us.active&&us.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gf.has(this)&&(gf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Mm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,mp(this),Bm(this);const t=gi,n=qo;gi=this,qo=!0;try{return this.fn()}finally{Tm(this),gi=t,qo=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Id(t);this.deps=this.depsTail=void 0,mp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Wf(this)&&this.run()}get dirty(){return Wf(this)}}let Am=0,sc,oc;function Mm(e,t=!1){if(e.flags|=8,t){e.next=oc,oc=e;return}e.next=sc,sc=e}function Od(){Am++}function Rd(){if(--Am>0)return;if(oc){let t=oc;for(oc=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;sc;){let t=sc;for(sc=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Bm(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Tm(e){let t,n=e.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),Id(r),Sv(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}e.deps=t,e.depsTail=n}function Wf(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Nm(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Nm(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===pc))return;e.globalVersion=pc;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Wf(e)){e.flags&=-3;return}const n=gi,r=qo;gi=e,qo=!0;try{Bm(e);const o=e.fn(e._value);(t.version===0||xl(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{gi=n,qo=r,Tm(e),e.flags&=-3}}function Id(e,t=!1){const{dep:n,prevSub:r,nextSub:o}=e;if(r&&(r.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)Id(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Sv(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let qo=!0;const Dm=[];function El(){Dm.push(qo),qo=!1}function Al(){const e=Dm.pop();qo=e===void 0?!0:e}function mp(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=gi;gi=void 0;try{t()}finally{gi=n}}}let pc=0;class Ev{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!gi||!qo||gi===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==gi)n=this.activeLink=new Ev(gi,this),gi.deps?(n.prevDep=gi.depsTail,gi.depsTail.nextDep=n,gi.depsTail=n):gi.deps=gi.depsTail=n,Om(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=gi.depsTail,n.nextDep=void 0,gi.depsTail.nextDep=n,gi.depsTail=n,gi.deps===n&&(gi.deps=r)}return n}trigger(t){this.version++,pc++,this.notify(t)}notify(t){Od();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Rd()}}}function Om(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Om(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ph=new WeakMap,Xl=Symbol(""),Zf=Symbol(""),mc=Symbol("");function Wr(e,t,n){if(qo&&gi){let r=ph.get(e);r||ph.set(e,r=new Map);let o=r.get(n);o||(r.set(n,o=new Fd),o.map=r,o.key=n),o.track()}}function $a(e,t,n,r,o,a){const u=ph.get(e);if(!u){pc++;return}const f=m=>{m&&m.trigger()};if(Od(),t==="clear")u.forEach(f);else{const m=fn(e),_=m&&Nd(n);if(m&&n==="length"){const w=Number(r);u.forEach((b,E)=>{(E==="length"||E===mc||!ya(E)&&E>=w)&&f(b)})}else switch((n!==void 0||u.has(void 0))&&f(u.get(n)),_&&f(u.get(mc)),t){case"add":m?_&&f(u.get("length")):(f(u.get(Xl)),Su(e)&&f(u.get(Zf)));break;case"delete":m||(f(u.get(Xl)),Su(e)&&f(u.get(Zf)));break;case"set":Su(e)&&f(u.get(Xl));break}}Rd()}function Av(e,t){const n=ph.get(e);return n&&n.get(t)}function mu(e){const t=Zn(e);return t===e?t:(Wr(t,"iterate",mc),vo(e)?t:t.map(Zr))}function Rh(e){return Wr(e=Zn(e),"iterate",mc),e}const Mv={__proto__:null,[Symbol.iterator](){return vf(this,Symbol.iterator,Zr)},concat(...e){return mu(this).concat(...e.map(t=>fn(t)?mu(t):t))},entries(){return vf(this,"entries",e=>(e[1]=Zr(e[1]),e))},every(e,t){return Ia(this,"every",e,t,void 0,arguments)},filter(e,t){return Ia(this,"filter",e,t,n=>n.map(Zr),arguments)},find(e,t){return Ia(this,"find",e,t,Zr,arguments)},findIndex(e,t){return Ia(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ia(this,"findLast",e,t,Zr,arguments)},findLastIndex(e,t){return Ia(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ia(this,"forEach",e,t,void 0,arguments)},includes(...e){return _f(this,"includes",e)},indexOf(...e){return _f(this,"indexOf",e)},join(e){return mu(this).join(e)},lastIndexOf(...e){return _f(this,"lastIndexOf",e)},map(e,t){return Ia(this,"map",e,t,void 0,arguments)},pop(){return Gu(this,"pop")},push(...e){return Gu(this,"push",e)},reduce(e,...t){return gp(this,"reduce",e,t)},reduceRight(e,...t){return gp(this,"reduceRight",e,t)},shift(){return Gu(this,"shift")},some(e,t){return Ia(this,"some",e,t,void 0,arguments)},splice(...e){return Gu(this,"splice",e)},toReversed(){return mu(this).toReversed()},toSorted(e){return mu(this).toSorted(e)},toSpliced(...e){return mu(this).toSpliced(...e)},unshift(...e){return Gu(this,"unshift",e)},values(){return vf(this,"values",Zr)}};function vf(e,t,n){const r=Rh(e),o=r[t]();return r!==e&&!vo(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=n(a.value)),a}),o}const Bv=Array.prototype;function Ia(e,t,n,r,o,a){const u=Rh(e),f=u!==e&&!vo(e),m=u[t];if(m!==Bv[t]){const b=m.apply(e,a);return f?Zr(b):b}let _=n;u!==e&&(f?_=function(b,E){return n.call(this,Zr(b),E,e)}:n.length>2&&(_=function(b,E){return n.call(this,b,E,e)}));const w=m.call(u,_,r);return f&&o?o(w):w}function gp(e,t,n,r){const o=Rh(e);let a=n;return o!==e&&(vo(e)?n.length>3&&(a=function(u,f,m){return n.call(this,u,f,m,e)}):a=function(u,f,m){return n.call(this,u,Zr(f),m,e)}),o[t](a,...r)}function _f(e,t,n){const r=Zn(e);Wr(r,"iterate",mc);const o=r[t](...n);return(o===-1||o===!1)&&Ud(n[0])?(n[0]=Zn(n[0]),r[t](...n)):o}function Gu(e,t,n=[]){El(),Od();const r=Zn(e)[t].apply(e,n);return Rd(),Al(),r}const Tv=Md("__proto__,__v_isRef,__isVue"),Rm=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ya));function Nv(e){ya(e)||(e=String(e));const t=Zn(this);return Wr(t,"has",e),t.hasOwnProperty(e)}class Im{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(o?a?$v:Um:a?zm:jm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const u=fn(t);if(!o){let m;if(u&&(m=Mv[n]))return m;if(n==="hasOwnProperty")return Nv}const f=Reflect.get(t,n,Hi(t)?t:r);return(ya(n)?Rm.has(n):Tv(n))||(o||Wr(t,"get",n),a)?f:Hi(f)?u&&Nd(n)?f:f.value:hi(f)?o?$m(f):Wa(f):f}}class Fm extends Im{constructor(t=!1){super(!1,t)}set(t,n,r,o){let a=t[n];if(!this._isShallow){const m=iu(a);if(!vo(r)&&!iu(r)&&(a=Zn(a),r=Zn(r)),!fn(t)&&Hi(a)&&!Hi(r))return m?!1:(a.value=r,!0)}const u=fn(t)&&Nd(n)?Number(n)<t.length:ii(t,n),f=Reflect.set(t,n,r,Hi(t)?t:o);return t===Zn(o)&&(u?xl(r,a)&&$a(t,"set",n,r):$a(t,"add",n,r)),f}deleteProperty(t,n){const r=ii(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&r&&$a(t,"delete",n,void 0),o}has(t,n){const r=Reflect.has(t,n);return(!ya(n)||!Rm.has(n))&&Wr(t,"has",n),r}ownKeys(t){return Wr(t,"iterate",fn(t)?"length":Xl),Reflect.ownKeys(t)}}class Dv extends Im{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Ov=new Fm,Rv=new Dv,Iv=new Fm(!0);const Kf=e=>e,Vc=e=>Reflect.getPrototypeOf(e);function Fv(e,t,n){return function(...r){const o=this.__v_raw,a=Zn(o),u=Su(a),f=e==="entries"||e===Symbol.iterator&&u,m=e==="keys"&&u,_=o[e](...r),w=n?Kf:t?Jf:Zr;return!t&&Wr(a,"iterate",m?Zf:Xl),{next(){const{value:b,done:E}=_.next();return E?{value:b,done:E}:{value:f?[w(b[0]),w(b[1])]:w(b),done:E}},[Symbol.iterator](){return this}}}}function Hc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function jv(e,t){const n={get(o){const a=this.__v_raw,u=Zn(a),f=Zn(o);e||(xl(o,f)&&Wr(u,"get",o),Wr(u,"get",f));const{has:m}=Vc(u),_=t?Kf:e?Jf:Zr;if(m.call(u,o))return _(a.get(o));if(m.call(u,f))return _(a.get(f));a!==u&&a.get(o)},get size(){const o=this.__v_raw;return!e&&Wr(Zn(o),"iterate",Xl),Reflect.get(o,"size",o)},has(o){const a=this.__v_raw,u=Zn(a),f=Zn(o);return e||(xl(o,f)&&Wr(u,"has",o),Wr(u,"has",f)),o===f?a.has(o):a.has(o)||a.has(f)},forEach(o,a){const u=this,f=u.__v_raw,m=Zn(f),_=t?Kf:e?Jf:Zr;return!e&&Wr(m,"iterate",Xl),f.forEach((w,b)=>o.call(a,_(w),_(b),u))}};return xr(n,e?{add:Hc("add"),set:Hc("set"),delete:Hc("delete"),clear:Hc("clear")}:{add(o){!t&&!vo(o)&&!iu(o)&&(o=Zn(o));const a=Zn(this);return Vc(a).has.call(a,o)||(a.add(o),$a(a,"add",o,o)),this},set(o,a){!t&&!vo(a)&&!iu(a)&&(a=Zn(a));const u=Zn(this),{has:f,get:m}=Vc(u);let _=f.call(u,o);_||(o=Zn(o),_=f.call(u,o));const w=m.call(u,o);return u.set(o,a),_?xl(a,w)&&$a(u,"set",o,a):$a(u,"add",o,a),this},delete(o){const a=Zn(this),{has:u,get:f}=Vc(a);let m=u.call(a,o);m||(o=Zn(o),m=u.call(a,o)),f&&f.call(a,o);const _=a.delete(o);return m&&$a(a,"delete",o,void 0),_},clear(){const o=Zn(this),a=o.size!==0,u=o.clear();return a&&$a(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Fv(o,e,t)}),n}function jd(e,t){const n=jv(e,t);return(r,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(ii(n,o)&&o in r?n:r,o,a)}const zv={get:jd(!1,!1)},Uv={get:jd(!1,!0)},qv={get:jd(!0,!1)};const jm=new WeakMap,zm=new WeakMap,Um=new WeakMap,$v=new WeakMap;function Vv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hv(e){return e.__v_skip||!Object.isExtensible(e)?0:Vv(mv(e))}function Wa(e){return iu(e)?e:zd(e,!1,Ov,zv,jm)}function qm(e){return zd(e,!1,Iv,Uv,zm)}function $m(e){return zd(e,!0,Rv,qv,Um)}function zd(e,t,n,r,o){if(!hi(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const u=Hv(e);if(u===0)return e;const f=new Proxy(e,u===2?r:n);return o.set(e,f),f}function Ll(e){return iu(e)?Ll(e.__v_raw):!!(e&&e.__v_isReactive)}function iu(e){return!!(e&&e.__v_isReadonly)}function vo(e){return!!(e&&e.__v_isShallow)}function Ud(e){return e?!!e.__v_raw:!1}function Zn(e){const t=e&&e.__v_raw;return t?Zn(t):e}function qd(e){return!ii(e,"__v_skip")&&Object.isExtensible(e)&&wm(e,"__v_skip",!0),e}const Zr=e=>hi(e)?Wa(e):e,Jf=e=>hi(e)?$m(e):e;function Hi(e){return e?e.__v_isRef===!0:!1}function Ft(e){return Vm(e,!1)}function Gv(e){return Vm(e,!0)}function Vm(e,t){return Hi(e)?e:new Wv(e,t)}class Wv{constructor(t,n){this.dep=new Fd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Zn(t),this._value=n?t:Zr(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||vo(t)||iu(t);t=r?t:Zn(t),xl(t,n)&&(this._rawValue=t,this._value=r?t:Zr(t),this.dep.trigger())}}function Dn(e){return Hi(e)?e.value:e}const Zv={get:(e,t,n)=>t==="__v_raw"?e:Dn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return Hi(o)&&!Hi(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function Hm(e){return Ll(e)?e:new Proxy(e,Zv)}function Kv(e){const t=fn(e)?new Array(e.length):{};for(const n in e)t[n]=Yv(e,n);return t}class Jv{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Av(Zn(this._object),this._key)}}function Yv(e,t,n){const r=e[t];return Hi(r)?r:new Jv(e,t,n)}class Xv{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Fd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&gi!==this)return Mm(this,!0),!0}get value(){const t=this.dep.track();return Nm(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Qv(e,t,n=!1){let r,o;return En(e)?r=e:(r=e.get,o=e.set),new Xv(r,o,n)}const Gc={},mh=new WeakMap;let $l;function e_(e,t=!1,n=$l){if(n){let r=mh.get(n);r||mh.set(n,r=[]),r.push(e)}}function t_(e,t,n=ci){const{immediate:r,deep:o,once:a,scheduler:u,augmentJob:f,call:m}=n,_=ye=>o?ye:vo(ye)||o===!1||o===0?Va(ye,1):Va(ye);let w,b,E,x,F=!1,D=!1;if(Hi(e)?(b=()=>e.value,F=vo(e)):Ll(e)?(b=()=>_(e),F=!0):fn(e)?(D=!0,F=e.some(ye=>Ll(ye)||vo(ye)),b=()=>e.map(ye=>{if(Hi(ye))return ye.value;if(Ll(ye))return _(ye);if(En(ye))return m?m(ye,2):ye()})):En(e)?t?b=m?()=>m(e,2):e:b=()=>{if(E){El();try{E()}finally{Al()}}const ye=$l;$l=w;try{return m?m(e,3,[x]):e(x)}finally{$l=ye}}:b=va,t&&o){const ye=b,we=o===!0?1/0:o;b=()=>Va(ye(),we)}const U=Sm(),j=()=>{w.stop(),U&&U.active&&Td(U.effects,w)};if(a&&t){const ye=t;t=(...we)=>{ye(...we),j()}}let Q=D?new Array(e.length).fill(Gc):Gc;const ie=ye=>{if(!(!(w.flags&1)||!w.dirty&&!ye))if(t){const we=w.run();if(o||F||(D?we.some((Pe,Ee)=>xl(Pe,Q[Ee])):xl(we,Q))){E&&E();const Pe=$l;$l=w;try{const Ee=[we,Q===Gc?void 0:D&&Q[0]===Gc?[]:Q,x];m?m(t,3,Ee):t(...Ee),Q=we}finally{$l=Pe}}}else w.run()};return f&&f(ie),w=new Em(b),w.scheduler=u?()=>u(ie,!1):ie,x=ye=>e_(ye,!1,w),E=w.onStop=()=>{const ye=mh.get(w);if(ye){if(m)m(ye,4);else for(const we of ye)we();mh.delete(w)}},t?r?ie(!0):Q=w.run():u?u(ie.bind(null,!0),!0):w.run(),j.pause=w.pause.bind(w),j.resume=w.resume.bind(w),j.stop=j,j}function Va(e,t=1/0,n){if(t<=0||!hi(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Hi(e))Va(e.value,t,n);else if(fn(e))for(let r=0;r<e.length;r++)Va(e[r],t,n);else if(Iu(e)||Su(e))e.forEach(r=>{Va(r,t,n)});else if(bm(e)){for(const r in e)Va(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Va(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ec(e,t,n,r){try{return r?e(...r):e()}catch(o){Ih(o,t,n)}}function $o(e,t,n,r){if(En(e)){const o=Ec(e,t,n,r);return o&&_m(o)&&o.catch(a=>{Ih(a,t,n)}),o}if(fn(e)){const o=[];for(let a=0;a<e.length;a++)o.push($o(e[a],t,n,r));return o}}function Ih(e,t,n,r=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||ci;if(t){let f=t.parent;const m=t.proxy,_=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const w=f.ec;if(w){for(let b=0;b<w.length;b++)if(w[b](e,m,_)===!1)return}f=f.parent}if(a){El(),Ec(a,null,10,[e,m,_]),Al();return}}n_(e,n,o,r,u)}function n_(e,t,n,r=!0,o=!1){if(o)throw e;console.error(e)}const cs=[];let da=-1;const Eu=[];let gl=null,bu=0;const Gm=Promise.resolve();let gh=null;function ls(e){const t=gh||Gm;return e?t.then(this?e.bind(this):e):t}function i_(e){let t=da+1,n=cs.length;for(;t<n;){const r=t+n>>>1,o=cs[r],a=gc(o);a<e||a===e&&o.flags&2?t=r+1:n=r}return t}function $d(e){if(!(e.flags&1)){const t=gc(e),n=cs[cs.length-1];!n||!(e.flags&2)&&t>=gc(n)?cs.push(e):cs.splice(i_(t),0,e),e.flags|=1,Wm()}}function Wm(){gh||(gh=Gm.then(Km))}function r_(e){fn(e)?Eu.push(...e):gl&&e.id===-1?gl.splice(bu+1,0,e):e.flags&1||(Eu.push(e),e.flags|=1),Wm()}function vp(e,t,n=da+1){for(;n<cs.length;n++){const r=cs[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;cs.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Zm(e){if(Eu.length){const t=[...new Set(Eu)].sort((n,r)=>gc(n)-gc(r));if(Eu.length=0,gl){gl.push(...t);return}for(gl=t,bu=0;bu<gl.length;bu++){const n=gl[bu];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}gl=null,bu=0}}const gc=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Km(e){try{for(da=0;da<cs.length;da++){const t=cs[da];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ec(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;da<cs.length;da++){const t=cs[da];t&&(t.flags&=-2)}da=-1,cs.length=0,Zm(),gh=null,(cs.length||Eu.length)&&Km()}}let fs=null,Jm=null;function vh(e){const t=fs;return fs=e,Jm=e&&e.type.__scopeId||null,t}function Ha(e,t=fs,n){if(!t||e._n)return e;const r=(...o)=>{r._d&&Ep(-1);const a=vh(t);let u;try{u=e(...o)}finally{vh(a),r._d&&Ep(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function Pn(e,t){if(fs===null)return e;const n=Vh(fs),r=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,u,f,m=ci]=t[o];a&&(En(a)&&(a={mounted:a,updated:a}),a.deep&&Va(u),r.push({dir:a,instance:n,value:u,oldValue:void 0,arg:f,modifiers:m}))}return e}function jl(e,t,n,r){const o=e.dirs,a=t&&t.dirs;for(let u=0;u<o.length;u++){const f=o[u];a&&(f.oldValue=a[u].value);let m=f.dir[r];m&&(El(),$o(m,n,8,[e.el,f,e,t]),Al())}}const s_=Symbol("_vte"),Ym=e=>e.__isTeleport,vl=Symbol("_leaveCb"),Wc=Symbol("_enterCb");function o_(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ba(()=>{e.isMounted=!0}),zh(()=>{e.isUnmounting=!0}),e}const mo=[Function,Array],Xm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:mo,onEnter:mo,onAfterEnter:mo,onEnterCancelled:mo,onBeforeLeave:mo,onLeave:mo,onAfterLeave:mo,onLeaveCancelled:mo,onBeforeAppear:mo,onAppear:mo,onAfterAppear:mo,onAppearCancelled:mo},Qm=e=>{const t=e.subTree;return t.component?Qm(t.component):t},a_={name:"BaseTransition",props:Xm,setup(e,{slots:t}){const n=sy(),r=o_();return()=>{const o=t.default&&ng(t.default(),!0);if(!o||!o.length)return;const a=eg(o),u=Zn(e),{mode:f}=u;if(r.isLeaving)return yf(a);const m=_p(a);if(!m)return yf(a);let _=Yf(m,u,r,n,b=>_=b);m.type!==Bs&&vc(m,_);let w=n.subTree&&_p(n.subTree);if(w&&w.type!==Bs&&!Gl(m,w)&&Qm(n).type!==Bs){let b=Yf(w,u,r,n);if(vc(w,b),f==="out-in"&&m.type!==Bs)return r.isLeaving=!0,b.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete b.afterLeave,w=void 0},yf(a);f==="in-out"&&m.type!==Bs?b.delayLeave=(E,x,F)=>{const D=tg(r,w);D[String(w.key)]=w,E[vl]=()=>{x(),E[vl]=void 0,delete _.delayedLeave,w=void 0},_.delayedLeave=()=>{F(),delete _.delayedLeave,w=void 0}}:w=void 0}else w&&(w=void 0);return a}}};function eg(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Bs){t=n;break}}return t}const l_=a_;function tg(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Yf(e,t,n,r,o){const{appear:a,mode:u,persisted:f=!1,onBeforeEnter:m,onEnter:_,onAfterEnter:w,onEnterCancelled:b,onBeforeLeave:E,onLeave:x,onAfterLeave:F,onLeaveCancelled:D,onBeforeAppear:U,onAppear:j,onAfterAppear:Q,onAppearCancelled:ie}=t,ye=String(e.key),we=tg(n,e),Pe=(Te,$e)=>{Te&&$o(Te,r,9,$e)},Ee=(Te,$e)=>{const q=$e[1];Pe(Te,$e),fn(Te)?Te.every($=>$.length<=1)&&q():Te.length<=1&&q()},fe={mode:u,persisted:f,beforeEnter(Te){let $e=m;if(!n.isMounted)if(a)$e=U||m;else return;Te[vl]&&Te[vl](!0);const q=we[ye];q&&Gl(e,q)&&q.el[vl]&&q.el[vl](),Pe($e,[Te])},enter(Te){let $e=_,q=w,$=b;if(!n.isMounted)if(a)$e=j||_,q=Q||w,$=ie||b;else return;let Se=!1;const B=Te[Wc]=K=>{Se||(Se=!0,K?Pe($,[Te]):Pe(q,[Te]),fe.delayedLeave&&fe.delayedLeave(),Te[Wc]=void 0)};$e?Ee($e,[Te,B]):B()},leave(Te,$e){const q=String(e.key);if(Te[Wc]&&Te[Wc](!0),n.isUnmounting)return $e();Pe(E,[Te]);let $=!1;const Se=Te[vl]=B=>{$||($=!0,$e(),B?Pe(D,[Te]):Pe(F,[Te]),Te[vl]=void 0,we[q]===e&&delete we[q])};we[q]=e,x?Ee(x,[Te,Se]):Se()},clone(Te){const $e=Yf(Te,t,n,r,o);return o&&o($e),$e}};return fe}function yf(e){if(Fh(e))return e=Cl(e),e.children=null,e}function _p(e){if(!Fh(e))return Ym(e.type)&&e.children?eg(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&En(n.default))return n.default()}}function vc(e,t){e.shapeFlag&6&&e.component?(e.transition=t,vc(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ng(e,t=!1,n){let r=[],o=0;for(let a=0;a<e.length;a++){let u=e[a];const f=n==null?u.key:String(n)+String(u.key!=null?u.key:a);u.type===gn?(u.patchFlag&128&&o++,r=r.concat(ng(u.children,t,f))):(t||u.type!==Bs)&&r.push(f!=null?Cl(u,{key:f}):u)}if(o>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ps(e,t){return En(e)?xr({name:e.name},t,{setup:e}):e}function ig(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function _h(e,t,n,r,o=!1){if(fn(e)){e.forEach((F,D)=>_h(F,t&&(fn(t)?t[D]:t),n,r,o));return}if(ac(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&_h(e,t,n,r.component.subTree);return}const a=r.shapeFlag&4?Vh(r.component):r.el,u=o?null:a,{i:f,r:m}=e,_=t&&t.r,w=f.refs===ci?f.refs={}:f.refs,b=f.setupState,E=Zn(b),x=b===ci?()=>!1:F=>ii(E,F);if(_!=null&&_!==m&&(Gi(_)?(w[_]=null,x(_)&&(b[_]=null)):Hi(_)&&(_.value=null)),En(m))Ec(m,f,12,[u,w]);else{const F=Gi(m),D=Hi(m);if(F||D){const U=()=>{if(e.f){const j=F?x(m)?b[m]:w[m]:m.value;o?fn(j)&&Td(j,a):fn(j)?j.includes(a)||j.push(a):F?(w[m]=[a],x(m)&&(b[m]=w[m])):(m.value=[a],e.k&&(w[e.k]=m.value))}else F?(w[m]=u,x(m)&&(b[m]=u)):D&&(m.value=u,e.k&&(w[e.k]=u))};u?(U.id=-1,Ws(U,n)):U()}}}Dh().requestIdleCallback;Dh().cancelIdleCallback;const ac=e=>!!e.type.__asyncLoader,Fh=e=>e.type.__isKeepAlive;function u_(e,t){rg(e,"a",t)}function c_(e,t){rg(e,"da",t)}function rg(e,t,n=wr){const r=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(jh(t,r,n),n){let o=n.parent;for(;o&&o.parent;)Fh(o.parent.vnode)&&h_(r,t,n,o),o=o.parent}}function h_(e,t,n,r){const o=jh(t,e,r,!0);Uh(()=>{Td(r[t],o)},n)}function jh(e,t,n=wr,r=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...u)=>{El();const f=Ac(n),m=$o(t,n,e,u);return f(),Al(),m});return r?o.unshift(a):o.push(a),a}}const Za=e=>(t,n=wr)=>{(!yc||e==="sp")&&jh(e,(...r)=>t(...r),n)},f_=Za("bm"),ba=Za("m"),d_=Za("bu"),p_=Za("u"),zh=Za("bum"),Uh=Za("um"),m_=Za("sp"),g_=Za("rtg"),v_=Za("rtc");function __(e,t=wr){jh("ec",e,t)}const y_="components";function b_(e,t){return x_(y_,e,!0,t)||e}const w_=Symbol.for("v-ndc");function x_(e,t,n=!0,r=!1){const o=fs||wr;if(o){const a=o.type;{const f=cy(a,!1);if(f&&(f===t||f===bo(t)||f===Nh(bo(t))))return a}const u=yp(o[e]||a[e],t)||yp(o.appContext[e],t);return!u&&r?a:u}}function yp(e,t){return e&&(e[t]||e[bo(t)]||e[Nh(bo(t))])}function Un(e,t,n,r){let o;const a=n,u=fn(e);if(u||Gi(e)){const f=u&&Ll(e);let m=!1;f&&(m=!vo(e),e=Rh(e)),o=new Array(e.length);for(let _=0,w=e.length;_<w;_++)o[_]=t(m?Zr(e[_]):e[_],_,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let f=0;f<e;f++)o[f]=t(f+1,f,void 0,a)}else if(hi(e))if(e[Symbol.iterator])o=Array.from(e,(f,m)=>t(f,m,void 0,a));else{const f=Object.keys(e);o=new Array(f.length);for(let m=0,_=f.length;m<_;m++){const w=f[m];o[m]=t(e[w],w,m,a)}}else o=[];return o}const Xf=e=>e?kg(e)?Vh(e):Xf(e.parent):null,lc=xr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Xf(e.parent),$root:e=>Xf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>og(e),$forceUpdate:e=>e.f||(e.f=()=>{$d(e.update)}),$nextTick:e=>e.n||(e.n=ls.bind(e.proxy)),$watch:e=>V_.bind(e)}),bf=(e,t)=>e!==ci&&!e.__isScriptSetup&&ii(e,t),L_={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:a,accessCache:u,type:f,appContext:m}=e;let _;if(t[0]!=="$"){const x=u[t];if(x!==void 0)switch(x){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(bf(r,t))return u[t]=1,r[t];if(o!==ci&&ii(o,t))return u[t]=2,o[t];if((_=e.propsOptions[0])&&ii(_,t))return u[t]=3,a[t];if(n!==ci&&ii(n,t))return u[t]=4,n[t];Qf&&(u[t]=0)}}const w=lc[t];let b,E;if(w)return t==="$attrs"&&Wr(e.attrs,"get",""),w(e);if((b=f.__cssModules)&&(b=b[t]))return b;if(n!==ci&&ii(n,t))return u[t]=4,n[t];if(E=m.config.globalProperties,ii(E,t))return E[t]},set({_:e},t,n){const{data:r,setupState:o,ctx:a}=e;return bf(o,t)?(o[t]=n,!0):r!==ci&&ii(r,t)?(r[t]=n,!0):ii(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:a}},u){let f;return!!n[u]||e!==ci&&ii(e,u)||bf(t,u)||(f=a[0])&&ii(f,u)||ii(r,u)||ii(lc,u)||ii(o.config.globalProperties,u)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ii(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function bp(e){return fn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Qf=!0;function C_(e){const t=og(e),n=e.proxy,r=e.ctx;Qf=!1,t.beforeCreate&&wp(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:u,watch:f,provide:m,inject:_,created:w,beforeMount:b,mounted:E,beforeUpdate:x,updated:F,activated:D,deactivated:U,beforeDestroy:j,beforeUnmount:Q,destroyed:ie,unmounted:ye,render:we,renderTracked:Pe,renderTriggered:Ee,errorCaptured:fe,serverPrefetch:Te,expose:$e,inheritAttrs:q,components:$,directives:Se,filters:B}=t;if(_&&k_(_,r,null),u)for(const ne in u){const W=u[ne];En(W)&&(r[ne]=W.bind(n))}if(o){const ne=o.call(n,n);hi(ne)&&(e.data=Wa(ne))}if(Qf=!0,a)for(const ne in a){const W=a[ne],z=En(W)?W.bind(n,n):En(W.get)?W.get.bind(n,n):va,A=!En(W)&&En(W.set)?W.set.bind(n):va,ge=Nn({get:z,set:A});Object.defineProperty(r,ne,{enumerable:!0,configurable:!0,get:()=>ge.value,set:I=>ge.value=I})}if(f)for(const ne in f)sg(f[ne],r,n,ne);if(m){const ne=En(m)?m.call(n):m;Reflect.ownKeys(ne).forEach(W=>{th(W,ne[W])})}w&&wp(w,e,"c");function H(ne,W){fn(W)?W.forEach(z=>ne(z.bind(n))):W&&ne(W.bind(n))}if(H(f_,b),H(ba,E),H(d_,x),H(p_,F),H(u_,D),H(c_,U),H(__,fe),H(v_,Pe),H(g_,Ee),H(zh,Q),H(Uh,ye),H(m_,Te),fn($e))if($e.length){const ne=e.exposed||(e.exposed={});$e.forEach(W=>{Object.defineProperty(ne,W,{get:()=>n[W],set:z=>n[W]=z})})}else e.exposed||(e.exposed={});we&&e.render===va&&(e.render=we),q!=null&&(e.inheritAttrs=q),$&&(e.components=$),Se&&(e.directives=Se),Te&&ig(e)}function k_(e,t,n=va){fn(e)&&(e=ed(e));for(const r in e){const o=e[r];let a;hi(o)?"default"in o?a=_o(o.from||r,o.default,!0):a=_o(o.from||r):a=_o(o),Hi(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):t[r]=a}}function wp(e,t,n){$o(fn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function sg(e,t,n,r){let o=r.includes(".")?bg(n,r):()=>n[r];if(Gi(e)){const a=t[e];En(a)&&Yr(o,a)}else if(En(e))Yr(o,e.bind(n));else if(hi(e))if(fn(e))e.forEach(a=>sg(a,t,n,r));else{const a=En(e.handler)?e.handler.bind(n):t[e.handler];En(a)&&Yr(o,a,e)}}function og(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:u}}=e.appContext,f=a.get(t);let m;return f?m=f:!o.length&&!n&&!r?m=t:(m={},o.length&&o.forEach(_=>yh(m,_,u,!0)),yh(m,t,u)),hi(t)&&a.set(t,m),m}function yh(e,t,n,r=!1){const{mixins:o,extends:a}=t;a&&yh(e,a,n,!0),o&&o.forEach(u=>yh(e,u,n,!0));for(const u in t)if(!(r&&u==="expose")){const f=P_[u]||n&&n[u];e[u]=f?f(e[u],t[u]):t[u]}return e}const P_={data:xp,props:Lp,emits:Lp,methods:nc,computed:nc,beforeCreate:as,created:as,beforeMount:as,mounted:as,beforeUpdate:as,updated:as,beforeDestroy:as,beforeUnmount:as,destroyed:as,unmounted:as,activated:as,deactivated:as,errorCaptured:as,serverPrefetch:as,components:nc,directives:nc,watch:E_,provide:xp,inject:S_};function xp(e,t){return t?e?function(){return xr(En(e)?e.call(this,this):e,En(t)?t.call(this,this):t)}:t:e}function S_(e,t){return nc(ed(e),ed(t))}function ed(e){if(fn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function as(e,t){return e?[...new Set([].concat(e,t))]:t}function nc(e,t){return e?xr(Object.create(null),e,t):t}function Lp(e,t){return e?fn(e)&&fn(t)?[...new Set([...e,...t])]:xr(Object.create(null),bp(e),bp(t??{})):t}function E_(e,t){if(!e)return t;if(!t)return e;const n=xr(Object.create(null),e);for(const r in t)n[r]=as(e[r],t[r]);return n}function ag(){return{app:null,config:{isNativeTag:dv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let A_=0;function M_(e,t){return function(r,o=null){En(r)||(r=xr({},r)),o!=null&&!hi(o)&&(o=null);const a=ag(),u=new WeakSet,f=[];let m=!1;const _=a.app={_uid:A_++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:fy,get config(){return a.config},set config(w){},use(w,...b){return u.has(w)||(w&&En(w.install)?(u.add(w),w.install(_,...b)):En(w)&&(u.add(w),w(_,...b))),_},mixin(w){return a.mixins.includes(w)||a.mixins.push(w),_},component(w,b){return b?(a.components[w]=b,_):a.components[w]},directive(w,b){return b?(a.directives[w]=b,_):a.directives[w]},mount(w,b,E){if(!m){const x=_._ceVNode||Pi(r,o);return x.appContext=a,E===!0?E="svg":E===!1&&(E=void 0),e(x,w,E),m=!0,_._container=w,w.__vue_app__=_,Vh(x.component)}},onUnmount(w){f.push(w)},unmount(){m&&($o(f,_._instance,16),e(null,_._container),delete _._container.__vue_app__)},provide(w,b){return a.provides[w]=b,_},runWithContext(w){const b=Ql;Ql=_;try{return w()}finally{Ql=b}}};return _}}let Ql=null;function th(e,t){if(wr){let n=wr.provides;const r=wr.parent&&wr.parent.provides;r===n&&(n=wr.provides=Object.create(r)),n[e]=t}}function _o(e,t,n=!1){const r=wr||fs;if(r||Ql){const o=Ql?Ql._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&En(t)?t.call(r&&r.proxy):t}}function B_(){return!!(wr||fs||Ql)}const lg={},ug=()=>Object.create(lg),cg=e=>Object.getPrototypeOf(e)===lg;function T_(e,t,n,r=!1){const o={},a=ug();e.propsDefaults=Object.create(null),hg(e,t,o,a);for(const u in e.propsOptions[0])u in o||(o[u]=void 0);n?e.props=r?o:qm(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function N_(e,t,n,r){const{props:o,attrs:a,vnode:{patchFlag:u}}=e,f=Zn(o),[m]=e.propsOptions;let _=!1;if((r||u>0)&&!(u&16)){if(u&8){const w=e.vnode.dynamicProps;for(let b=0;b<w.length;b++){let E=w[b];if(qh(e.emitsOptions,E))continue;const x=t[E];if(m)if(ii(a,E))x!==a[E]&&(a[E]=x,_=!0);else{const F=bo(E);o[F]=td(m,f,F,x,e,!1)}else x!==a[E]&&(a[E]=x,_=!0)}}}else{hg(e,t,o,a)&&(_=!0);let w;for(const b in f)(!t||!ii(t,b)&&((w=su(b))===b||!ii(t,w)))&&(m?n&&(n[b]!==void 0||n[w]!==void 0)&&(o[b]=td(m,f,b,void 0,e,!0)):delete o[b]);if(a!==f)for(const b in a)(!t||!ii(t,b))&&(delete a[b],_=!0)}_&&$a(e.attrs,"set","")}function hg(e,t,n,r){const[o,a]=e.propsOptions;let u=!1,f;if(t)for(let m in t){if(rc(m))continue;const _=t[m];let w;o&&ii(o,w=bo(m))?!a||!a.includes(w)?n[w]=_:(f||(f={}))[w]=_:qh(e.emitsOptions,m)||(!(m in r)||_!==r[m])&&(r[m]=_,u=!0)}if(a){const m=Zn(n),_=f||ci;for(let w=0;w<a.length;w++){const b=a[w];n[b]=td(o,m,b,_[b],e,!ii(_,b))}}return u}function td(e,t,n,r,o,a){const u=e[n];if(u!=null){const f=ii(u,"default");if(f&&r===void 0){const m=u.default;if(u.type!==Function&&!u.skipFactory&&En(m)){const{propsDefaults:_}=o;if(n in _)r=_[n];else{const w=Ac(o);r=_[n]=m.call(null,t),w()}}else r=m;o.ce&&o.ce._setProp(n,r)}u[0]&&(a&&!f?r=!1:u[1]&&(r===""||r===su(n))&&(r=!0))}return r}const D_=new WeakMap;function fg(e,t,n=!1){const r=n?D_:t.propsCache,o=r.get(e);if(o)return o;const a=e.props,u={},f=[];let m=!1;if(!En(e)){const w=b=>{m=!0;const[E,x]=fg(b,t,!0);xr(u,E),x&&f.push(...x)};!n&&t.mixins.length&&t.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}if(!a&&!m)return hi(e)&&r.set(e,Pu),Pu;if(fn(a))for(let w=0;w<a.length;w++){const b=bo(a[w]);Cp(b)&&(u[b]=ci)}else if(a)for(const w in a){const b=bo(w);if(Cp(b)){const E=a[w],x=u[b]=fn(E)||En(E)?{type:E}:xr({},E),F=x.type;let D=!1,U=!0;if(fn(F))for(let j=0;j<F.length;++j){const Q=F[j],ie=En(Q)&&Q.name;if(ie==="Boolean"){D=!0;break}else ie==="String"&&(U=!1)}else D=En(F)&&F.name==="Boolean";x[0]=D,x[1]=U,(D||ii(x,"default"))&&f.push(b)}}const _=[u,f];return hi(e)&&r.set(e,_),_}function Cp(e){return e[0]!=="$"&&!rc(e)}const dg=e=>e[0]==="_"||e==="$stable",Vd=e=>fn(e)?e.map(pa):[pa(e)],O_=(e,t,n)=>{if(t._n)return t;const r=Ha((...o)=>Vd(t(...o)),n);return r._c=!1,r},pg=(e,t,n)=>{const r=e._ctx;for(const o in e){if(dg(o))continue;const a=e[o];if(En(a))t[o]=O_(o,a,r);else if(a!=null){const u=Vd(a);t[o]=()=>u}}},mg=(e,t)=>{const n=Vd(t);e.slots.default=()=>n},gg=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},R_=(e,t,n)=>{const r=e.slots=ug();if(e.vnode.shapeFlag&32){const o=t._;o?(gg(r,t,n),n&&wm(r,"_",o,!0)):pg(t,r)}else t&&mg(e,t)},I_=(e,t,n)=>{const{vnode:r,slots:o}=e;let a=!0,u=ci;if(r.shapeFlag&32){const f=t._;f?n&&f===1?a=!1:gg(o,t,n):(a=!t.$stable,pg(t,o)),u=t}else t&&(mg(e,t),u={default:1});if(a)for(const f in o)!dg(f)&&u[f]==null&&delete o[f]},Ws=Y_;function F_(e){return j_(e)}function j_(e,t){const n=Dh();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:u,createText:f,createComment:m,setText:_,setElementText:w,parentNode:b,nextSibling:E,setScopeId:x=va,insertStaticContent:F}=e,D=(J,te,Ne,Ae=null,ee=null,We=null,et=void 0,Xe=null,Oe=!!te.dynamicChildren)=>{if(J===te)return;J&&!Gl(J,te)&&(Ae=oe(J),I(J,ee,We,!0),J=null),te.patchFlag===-2&&(Oe=!1,te.dynamicChildren=null);const{type:ke,ref:lt,shapeFlag:ht}=te;switch(ke){case $h:U(J,te,Ne,Ae);break;case Bs:j(J,te,Ne,Ae);break;case nh:J==null&&Q(te,Ne,Ae,et);break;case gn:$(J,te,Ne,Ae,ee,We,et,Xe,Oe);break;default:ht&1?we(J,te,Ne,Ae,ee,We,et,Xe,Oe):ht&6?Se(J,te,Ne,Ae,ee,We,et,Xe,Oe):(ht&64||ht&128)&&ke.process(J,te,Ne,Ae,ee,We,et,Xe,Oe,je)}lt!=null&&ee&&_h(lt,J&&J.ref,We,te||J,!te)},U=(J,te,Ne,Ae)=>{if(J==null)r(te.el=f(te.children),Ne,Ae);else{const ee=te.el=J.el;te.children!==J.children&&_(ee,te.children)}},j=(J,te,Ne,Ae)=>{J==null?r(te.el=m(te.children||""),Ne,Ae):te.el=J.el},Q=(J,te,Ne,Ae)=>{[J.el,J.anchor]=F(J.children,te,Ne,Ae,J.el,J.anchor)},ie=({el:J,anchor:te},Ne,Ae)=>{let ee;for(;J&&J!==te;)ee=E(J),r(J,Ne,Ae),J=ee;r(te,Ne,Ae)},ye=({el:J,anchor:te})=>{let Ne;for(;J&&J!==te;)Ne=E(J),o(J),J=Ne;o(te)},we=(J,te,Ne,Ae,ee,We,et,Xe,Oe)=>{te.type==="svg"?et="svg":te.type==="math"&&(et="mathml"),J==null?Pe(te,Ne,Ae,ee,We,et,Xe,Oe):Te(J,te,ee,We,et,Xe,Oe)},Pe=(J,te,Ne,Ae,ee,We,et,Xe)=>{let Oe,ke;const{props:lt,shapeFlag:ht,transition:it,dirs:Fe}=J;if(Oe=J.el=u(J.type,We,lt&&lt.is,lt),ht&8?w(Oe,J.children):ht&16&&fe(J.children,Oe,null,Ae,ee,wf(J,We),et,Xe),Fe&&jl(J,null,Ae,"created"),Ee(Oe,J,J.scopeId,et,Ae),lt){for(const It in lt)It!=="value"&&!rc(It)&&a(Oe,It,null,lt[It],We,Ae);"value"in lt&&a(Oe,"value",null,lt.value,We),(ke=lt.onVnodeBeforeMount)&&ca(ke,Ae,J)}Fe&&jl(J,null,Ae,"beforeMount");const Pt=z_(ee,it);Pt&&it.beforeEnter(Oe),r(Oe,te,Ne),((ke=lt&&lt.onVnodeMounted)||Pt||Fe)&&Ws(()=>{ke&&ca(ke,Ae,J),Pt&&it.enter(Oe),Fe&&jl(J,null,Ae,"mounted")},ee)},Ee=(J,te,Ne,Ae,ee)=>{if(Ne&&x(J,Ne),Ae)for(let We=0;We<Ae.length;We++)x(J,Ae[We]);if(ee){let We=ee.subTree;if(te===We||xg(We.type)&&(We.ssContent===te||We.ssFallback===te)){const et=ee.vnode;Ee(J,et,et.scopeId,et.slotScopeIds,ee.parent)}}},fe=(J,te,Ne,Ae,ee,We,et,Xe,Oe=0)=>{for(let ke=Oe;ke<J.length;ke++){const lt=J[ke]=Xe?_l(J[ke]):pa(J[ke]);D(null,lt,te,Ne,Ae,ee,We,et,Xe)}},Te=(J,te,Ne,Ae,ee,We,et)=>{const Xe=te.el=J.el;let{patchFlag:Oe,dynamicChildren:ke,dirs:lt}=te;Oe|=J.patchFlag&16;const ht=J.props||ci,it=te.props||ci;let Fe;if(Ne&&zl(Ne,!1),(Fe=it.onVnodeBeforeUpdate)&&ca(Fe,Ne,te,J),lt&&jl(te,J,Ne,"beforeUpdate"),Ne&&zl(Ne,!0),(ht.innerHTML&&it.innerHTML==null||ht.textContent&&it.textContent==null)&&w(Xe,""),ke?$e(J.dynamicChildren,ke,Xe,Ne,Ae,wf(te,ee),We):et||W(J,te,Xe,null,Ne,Ae,wf(te,ee),We,!1),Oe>0){if(Oe&16)q(Xe,ht,it,Ne,ee);else if(Oe&2&&ht.class!==it.class&&a(Xe,"class",null,it.class,ee),Oe&4&&a(Xe,"style",ht.style,it.style,ee),Oe&8){const Pt=te.dynamicProps;for(let It=0;It<Pt.length;It++){const Wt=Pt[It],Ut=ht[Wt],Xt=it[Wt];(Xt!==Ut||Wt==="value")&&a(Xe,Wt,Ut,Xt,ee,Ne)}}Oe&1&&J.children!==te.children&&w(Xe,te.children)}else!et&&ke==null&&q(Xe,ht,it,Ne,ee);((Fe=it.onVnodeUpdated)||lt)&&Ws(()=>{Fe&&ca(Fe,Ne,te,J),lt&&jl(te,J,Ne,"updated")},Ae)},$e=(J,te,Ne,Ae,ee,We,et)=>{for(let Xe=0;Xe<te.length;Xe++){const Oe=J[Xe],ke=te[Xe],lt=Oe.el&&(Oe.type===gn||!Gl(Oe,ke)||Oe.shapeFlag&70)?b(Oe.el):Ne;D(Oe,ke,lt,null,Ae,ee,We,et,!0)}},q=(J,te,Ne,Ae,ee)=>{if(te!==Ne){if(te!==ci)for(const We in te)!rc(We)&&!(We in Ne)&&a(J,We,te[We],null,ee,Ae);for(const We in Ne){if(rc(We))continue;const et=Ne[We],Xe=te[We];et!==Xe&&We!=="value"&&a(J,We,Xe,et,ee,Ae)}"value"in Ne&&a(J,"value",te.value,Ne.value,ee)}},$=(J,te,Ne,Ae,ee,We,et,Xe,Oe)=>{const ke=te.el=J?J.el:f(""),lt=te.anchor=J?J.anchor:f("");let{patchFlag:ht,dynamicChildren:it,slotScopeIds:Fe}=te;Fe&&(Xe=Xe?Xe.concat(Fe):Fe),J==null?(r(ke,Ne,Ae),r(lt,Ne,Ae),fe(te.children||[],Ne,lt,ee,We,et,Xe,Oe)):ht>0&&ht&64&&it&&J.dynamicChildren?($e(J.dynamicChildren,it,Ne,ee,We,et,Xe),(te.key!=null||ee&&te===ee.subTree)&&vg(J,te,!0)):W(J,te,Ne,lt,ee,We,et,Xe,Oe)},Se=(J,te,Ne,Ae,ee,We,et,Xe,Oe)=>{te.slotScopeIds=Xe,J==null?te.shapeFlag&512?ee.ctx.activate(te,Ne,Ae,et,Oe):B(te,Ne,Ae,ee,We,et,Oe):K(J,te,Oe)},B=(J,te,Ne,Ae,ee,We,et)=>{const Xe=J.component=ry(J,Ae,ee);if(Fh(J)&&(Xe.ctx.renderer=je),oy(Xe,!1,et),Xe.asyncDep){if(ee&&ee.registerDep(Xe,H,et),!J.el){const Oe=Xe.subTree=Pi(Bs);j(null,Oe,te,Ne)}}else H(Xe,J,te,Ne,ee,We,et)},K=(J,te,Ne)=>{const Ae=te.component=J.component;if(K_(J,te,Ne))if(Ae.asyncDep&&!Ae.asyncResolved){ne(Ae,te,Ne);return}else Ae.next=te,Ae.update();else te.el=J.el,Ae.vnode=te},H=(J,te,Ne,Ae,ee,We,et)=>{const Xe=()=>{if(J.isMounted){let{next:ht,bu:it,u:Fe,parent:Pt,vnode:It}=J;{const on=_g(J);if(on){ht&&(ht.el=It.el,ne(J,ht,et)),on.asyncDep.then(()=>{J.isUnmounted||Xe()});return}}let Wt=ht,Ut;zl(J,!1),ht?(ht.el=It.el,ne(J,ht,et)):ht=It,it&&eh(it),(Ut=ht.props&&ht.props.onVnodeBeforeUpdate)&&ca(Ut,Pt,ht,It),zl(J,!0);const Xt=Pp(J),Rt=J.subTree;J.subTree=Xt,D(Rt,Xt,b(Rt.el),oe(Rt),J,ee,We),ht.el=Xt.el,Wt===null&&J_(J,Xt.el),Fe&&Ws(Fe,ee),(Ut=ht.props&&ht.props.onVnodeUpdated)&&Ws(()=>ca(Ut,Pt,ht,It),ee)}else{let ht;const{el:it,props:Fe}=te,{bm:Pt,m:It,parent:Wt,root:Ut,type:Xt}=J,Rt=ac(te);zl(J,!1),Pt&&eh(Pt),!Rt&&(ht=Fe&&Fe.onVnodeBeforeMount)&&ca(ht,Wt,te),zl(J,!0);{Ut.ce&&Ut.ce._injectChildStyle(Xt);const on=J.subTree=Pp(J);D(null,on,Ne,Ae,J,ee,We),te.el=on.el}if(It&&Ws(It,ee),!Rt&&(ht=Fe&&Fe.onVnodeMounted)){const on=te;Ws(()=>ca(ht,Wt,on),ee)}(te.shapeFlag&256||Wt&&ac(Wt.vnode)&&Wt.vnode.shapeFlag&256)&&J.a&&Ws(J.a,ee),J.isMounted=!0,te=Ne=Ae=null}};J.scope.on();const Oe=J.effect=new Em(Xe);J.scope.off();const ke=J.update=Oe.run.bind(Oe),lt=J.job=Oe.runIfDirty.bind(Oe);lt.i=J,lt.id=J.uid,Oe.scheduler=()=>$d(lt),zl(J,!0),ke()},ne=(J,te,Ne)=>{te.component=J;const Ae=J.vnode.props;J.vnode=te,J.next=null,N_(J,te.props,Ae,Ne),I_(J,te.children,Ne),El(),vp(J),Al()},W=(J,te,Ne,Ae,ee,We,et,Xe,Oe=!1)=>{const ke=J&&J.children,lt=J?J.shapeFlag:0,ht=te.children,{patchFlag:it,shapeFlag:Fe}=te;if(it>0){if(it&128){A(ke,ht,Ne,Ae,ee,We,et,Xe,Oe);return}else if(it&256){z(ke,ht,Ne,Ae,ee,We,et,Xe,Oe);return}}Fe&8?(lt&16&&pe(ke,ee,We),ht!==ke&&w(Ne,ht)):lt&16?Fe&16?A(ke,ht,Ne,Ae,ee,We,et,Xe,Oe):pe(ke,ee,We,!0):(lt&8&&w(Ne,""),Fe&16&&fe(ht,Ne,Ae,ee,We,et,Xe,Oe))},z=(J,te,Ne,Ae,ee,We,et,Xe,Oe)=>{J=J||Pu,te=te||Pu;const ke=J.length,lt=te.length,ht=Math.min(ke,lt);let it;for(it=0;it<ht;it++){const Fe=te[it]=Oe?_l(te[it]):pa(te[it]);D(J[it],Fe,Ne,null,ee,We,et,Xe,Oe)}ke>lt?pe(J,ee,We,!0,!1,ht):fe(te,Ne,Ae,ee,We,et,Xe,Oe,ht)},A=(J,te,Ne,Ae,ee,We,et,Xe,Oe)=>{let ke=0;const lt=te.length;let ht=J.length-1,it=lt-1;for(;ke<=ht&&ke<=it;){const Fe=J[ke],Pt=te[ke]=Oe?_l(te[ke]):pa(te[ke]);if(Gl(Fe,Pt))D(Fe,Pt,Ne,null,ee,We,et,Xe,Oe);else break;ke++}for(;ke<=ht&&ke<=it;){const Fe=J[ht],Pt=te[it]=Oe?_l(te[it]):pa(te[it]);if(Gl(Fe,Pt))D(Fe,Pt,Ne,null,ee,We,et,Xe,Oe);else break;ht--,it--}if(ke>ht){if(ke<=it){const Fe=it+1,Pt=Fe<lt?te[Fe].el:Ae;for(;ke<=it;)D(null,te[ke]=Oe?_l(te[ke]):pa(te[ke]),Ne,Pt,ee,We,et,Xe,Oe),ke++}}else if(ke>it)for(;ke<=ht;)I(J[ke],ee,We,!0),ke++;else{const Fe=ke,Pt=ke,It=new Map;for(ke=Pt;ke<=it;ke++){const Ct=te[ke]=Oe?_l(te[ke]):pa(te[ke]);Ct.key!=null&&It.set(Ct.key,ke)}let Wt,Ut=0;const Xt=it-Pt+1;let Rt=!1,on=0;const dn=new Array(Xt);for(ke=0;ke<Xt;ke++)dn[ke]=0;for(ke=Fe;ke<=ht;ke++){const Ct=J[ke];if(Ut>=Xt){I(Ct,ee,We,!0);continue}let nn;if(Ct.key!=null)nn=It.get(Ct.key);else for(Wt=Pt;Wt<=it;Wt++)if(dn[Wt-Pt]===0&&Gl(Ct,te[Wt])){nn=Wt;break}nn===void 0?I(Ct,ee,We,!0):(dn[nn-Pt]=ke+1,nn>=on?on=nn:Rt=!0,D(Ct,te[nn],Ne,null,ee,We,et,Xe,Oe),Ut++)}const ai=Rt?U_(dn):Pu;for(Wt=ai.length-1,ke=Xt-1;ke>=0;ke--){const Ct=Pt+ke,nn=te[Ct],Vt=Ct+1<lt?te[Ct+1].el:Ae;dn[ke]===0?D(null,nn,Ne,Vt,ee,We,et,Xe,Oe):Rt&&(Wt<0||ke!==ai[Wt]?ge(nn,Ne,Vt,2):Wt--)}}},ge=(J,te,Ne,Ae,ee=null)=>{const{el:We,type:et,transition:Xe,children:Oe,shapeFlag:ke}=J;if(ke&6){ge(J.component.subTree,te,Ne,Ae);return}if(ke&128){J.suspense.move(te,Ne,Ae);return}if(ke&64){et.move(J,te,Ne,je);return}if(et===gn){r(We,te,Ne);for(let ht=0;ht<Oe.length;ht++)ge(Oe[ht],te,Ne,Ae);r(J.anchor,te,Ne);return}if(et===nh){ie(J,te,Ne);return}if(Ae!==2&&ke&1&&Xe)if(Ae===0)Xe.beforeEnter(We),r(We,te,Ne),Ws(()=>Xe.enter(We),ee);else{const{leave:ht,delayLeave:it,afterLeave:Fe}=Xe,Pt=()=>r(We,te,Ne),It=()=>{ht(We,()=>{Pt(),Fe&&Fe()})};it?it(We,Pt,It):It()}else r(We,te,Ne)},I=(J,te,Ne,Ae=!1,ee=!1)=>{const{type:We,props:et,ref:Xe,children:Oe,dynamicChildren:ke,shapeFlag:lt,patchFlag:ht,dirs:it,cacheIndex:Fe}=J;if(ht===-2&&(ee=!1),Xe!=null&&_h(Xe,null,Ne,J,!0),Fe!=null&&(te.renderCache[Fe]=void 0),lt&256){te.ctx.deactivate(J);return}const Pt=lt&1&&it,It=!ac(J);let Wt;if(It&&(Wt=et&&et.onVnodeBeforeUnmount)&&ca(Wt,te,J),lt&6)ce(J.component,Ne,Ae);else{if(lt&128){J.suspense.unmount(Ne,Ae);return}Pt&&jl(J,null,te,"beforeUnmount"),lt&64?J.type.remove(J,te,Ne,je,Ae):ke&&!ke.hasOnce&&(We!==gn||ht>0&&ht&64)?pe(ke,te,Ne,!1,!0):(We===gn&&ht&384||!ee&&lt&16)&&pe(Oe,te,Ne),Ae&&G(J)}(It&&(Wt=et&&et.onVnodeUnmounted)||Pt)&&Ws(()=>{Wt&&ca(Wt,te,J),Pt&&jl(J,null,te,"unmounted")},Ne)},G=J=>{const{type:te,el:Ne,anchor:Ae,transition:ee}=J;if(te===gn){se(Ne,Ae);return}if(te===nh){ye(J);return}const We=()=>{o(Ne),ee&&!ee.persisted&&ee.afterLeave&&ee.afterLeave()};if(J.shapeFlag&1&&ee&&!ee.persisted){const{leave:et,delayLeave:Xe}=ee,Oe=()=>et(Ne,We);Xe?Xe(J.el,We,Oe):Oe()}else We()},se=(J,te)=>{let Ne;for(;J!==te;)Ne=E(J),o(J),J=Ne;o(te)},ce=(J,te,Ne)=>{const{bum:Ae,scope:ee,job:We,subTree:et,um:Xe,m:Oe,a:ke}=J;kp(Oe),kp(ke),Ae&&eh(Ae),ee.stop(),We&&(We.flags|=8,I(et,J,te,Ne)),Xe&&Ws(Xe,te),Ws(()=>{J.isUnmounted=!0},te),te&&te.pendingBranch&&!te.isUnmounted&&J.asyncDep&&!J.asyncResolved&&J.suspenseId===te.pendingId&&(te.deps--,te.deps===0&&te.resolve())},pe=(J,te,Ne,Ae=!1,ee=!1,We=0)=>{for(let et=We;et<J.length;et++)I(J[et],te,Ne,Ae,ee)},oe=J=>{if(J.shapeFlag&6)return oe(J.component.subTree);if(J.shapeFlag&128)return J.suspense.next();const te=E(J.anchor||J.el),Ne=te&&te[s_];return Ne?E(Ne):te};let xe=!1;const me=(J,te,Ne)=>{J==null?te._vnode&&I(te._vnode,null,null,!0):D(te._vnode||null,J,te,null,null,null,Ne),te._vnode=J,xe||(xe=!0,vp(),Zm(),xe=!1)},je={p:D,um:I,m:ge,r:G,mt:B,mc:fe,pc:W,pbc:$e,n:oe,o:e};return{render:me,hydrate:void 0,createApp:M_(me)}}function wf({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function zl({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function z_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function vg(e,t,n=!1){const r=e.children,o=t.children;if(fn(r)&&fn(o))for(let a=0;a<r.length;a++){const u=r[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=_l(o[a]),f.el=u.el),!n&&f.patchFlag!==-2&&vg(u,f)),f.type===$h&&(f.el=u.el)}}function U_(e){const t=e.slice(),n=[0];let r,o,a,u,f;const m=e.length;for(r=0;r<m;r++){const _=e[r];if(_!==0){if(o=n[n.length-1],e[o]<_){t[r]=o,n.push(r);continue}for(a=0,u=n.length-1;a<u;)f=a+u>>1,e[n[f]]<_?a=f+1:u=f;_<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=t[u];return n}function _g(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_g(t)}function kp(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const q_=Symbol.for("v-scx"),$_=()=>_o(q_);function Yr(e,t,n){return yg(e,t,n)}function yg(e,t,n=ci){const{immediate:r,deep:o,flush:a,once:u}=n,f=xr({},n),m=t&&r||!t&&a!=="post";let _;if(yc){if(a==="sync"){const x=$_();_=x.__watcherHandles||(x.__watcherHandles=[])}else if(!m){const x=()=>{};return x.stop=va,x.resume=va,x.pause=va,x}}const w=wr;f.call=(x,F,D)=>$o(x,w,F,D);let b=!1;a==="post"?f.scheduler=x=>{Ws(x,w&&w.suspense)}:a!=="sync"&&(b=!0,f.scheduler=(x,F)=>{F?x():$d(x)}),f.augmentJob=x=>{t&&(x.flags|=4),b&&(x.flags|=2,w&&(x.id=w.uid,x.i=w))};const E=t_(e,t,f);return yc&&(_?_.push(E):m&&E()),E}function V_(e,t,n){const r=this.proxy,o=Gi(e)?e.includes(".")?bg(r,e):()=>r[e]:e.bind(r,r);let a;En(t)?a=t:(a=t.handler,n=t);const u=Ac(this),f=yg(o,a.bind(r),n);return u(),f}function bg(e,t){const n=t.split(".");return()=>{let r=e;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const H_=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${bo(t)}Modifiers`]||e[`${su(t)}Modifiers`];function G_(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ci;let o=n;const a=t.startsWith("update:"),u=a&&H_(r,t.slice(7));u&&(u.trim&&(o=n.map(w=>Gi(w)?w.trim():w)),u.number&&(o=n.map(dh)));let f,m=r[f=pf(t)]||r[f=pf(bo(t))];!m&&a&&(m=r[f=pf(su(t))]),m&&$o(m,e,6,o);const _=r[f+"Once"];if(_){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,$o(_,e,6,o)}}function wg(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(o!==void 0)return o;const a=e.emits;let u={},f=!1;if(!En(e)){const m=_=>{const w=wg(_,t,!0);w&&(f=!0,xr(u,w))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!a&&!f?(hi(e)&&r.set(e,null),null):(fn(a)?a.forEach(m=>u[m]=null):xr(u,a),hi(e)&&r.set(e,u),u)}function qh(e,t){return!e||!Bh(t)?!1:(t=t.slice(2).replace(/Once$/,""),ii(e,t[0].toLowerCase()+t.slice(1))||ii(e,su(t))||ii(e,t))}function Pp(e){const{type:t,vnode:n,proxy:r,withProxy:o,propsOptions:[a],slots:u,attrs:f,emit:m,render:_,renderCache:w,props:b,data:E,setupState:x,ctx:F,inheritAttrs:D}=e,U=vh(e);let j,Q;try{if(n.shapeFlag&4){const ye=o||r,we=ye;j=pa(_.call(we,ye,w,b,x,E,F)),Q=f}else{const ye=t;j=pa(ye.length>1?ye(b,{attrs:f,slots:u,emit:m}):ye(b,null)),Q=t.props?f:W_(f)}}catch(ye){uc.length=0,Ih(ye,e,1),j=Pi(Bs)}let ie=j;if(Q&&D!==!1){const ye=Object.keys(Q),{shapeFlag:we}=ie;ye.length&&we&7&&(a&&ye.some(Bd)&&(Q=Z_(Q,a)),ie=Cl(ie,Q,!1,!0))}return n.dirs&&(ie=Cl(ie,null,!1,!0),ie.dirs=ie.dirs?ie.dirs.concat(n.dirs):n.dirs),n.transition&&vc(ie,n.transition),j=ie,vh(U),j}const W_=e=>{let t;for(const n in e)(n==="class"||n==="style"||Bh(n))&&((t||(t={}))[n]=e[n]);return t},Z_=(e,t)=>{const n={};for(const r in e)(!Bd(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function K_(e,t,n){const{props:r,children:o,component:a}=e,{props:u,children:f,patchFlag:m}=t,_=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return r?Sp(r,u,_):!!u;if(m&8){const w=t.dynamicProps;for(let b=0;b<w.length;b++){const E=w[b];if(u[E]!==r[E]&&!qh(_,E))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:r===u?!1:r?u?Sp(r,u,_):!0:!!u;return!1}function Sp(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(t[a]!==e[a]&&!qh(n,a))return!0}return!1}function J_({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const xg=e=>e.__isSuspense;function Y_(e,t){t&&t.pendingBranch?fn(e)?t.effects.push(...e):t.effects.push(e):r_(e)}const gn=Symbol.for("v-fgt"),$h=Symbol.for("v-txt"),Bs=Symbol.for("v-cmt"),nh=Symbol.for("v-stc"),uc=[];let Zs=null;function nt(e=!1){uc.push(Zs=e?null:[])}function X_(){uc.pop(),Zs=uc[uc.length-1]||null}let _c=1;function Ep(e,t=!1){_c+=e,e<0&&Zs&&t&&(Zs.hasOnce=!0)}function Lg(e){return e.dynamicChildren=_c>0?Zs||Pu:null,X_(),_c>0&&Zs&&Zs.push(e),e}function at(e,t,n,r,o,a){return Lg(M(e,t,n,r,o,a,!0))}function ma(e,t,n,r,o){return Lg(Pi(e,t,n,r,o,!0))}function bh(e){return e?e.__v_isVNode===!0:!1}function Gl(e,t){return e.type===t.type&&e.key===t.key}const Cg=({key:e})=>e??null,ih=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Gi(e)||Hi(e)||En(e)?{i:fs,r:e,k:t,f:!!n}:e:null);function M(e,t=null,n=null,r=0,o=null,a=e===gn?0:1,u=!1,f=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Cg(t),ref:t&&ih(t),scopeId:Jm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:fs};return f?(Hd(m,n),a&128&&e.normalize(m)):n&&(m.shapeFlag|=Gi(n)?8:16),_c>0&&!u&&Zs&&(m.patchFlag>0||a&6)&&m.patchFlag!==32&&Zs.push(m),m}const Pi=Q_;function Q_(e,t=null,n=null,r=0,o=null,a=!1){if((!e||e===w_)&&(e=Bs),bh(e)){const f=Cl(e,t,!0);return n&&Hd(f,n),_c>0&&!a&&Zs&&(f.shapeFlag&6?Zs[Zs.indexOf(e)]=f:Zs.push(f)),f.patchFlag=-2,f}if(hy(e)&&(e=e.__vccOpts),t){t=ey(t);let{class:f,style:m}=t;f&&!Gi(f)&&(t.class=Ni(f)),hi(m)&&(Ud(m)&&!fn(m)&&(m=xr({},m)),t.style=Oh(m))}const u=Gi(e)?1:xg(e)?128:Ym(e)?64:hi(e)?4:En(e)?2:0;return M(e,t,n,r,o,u,a,!0)}function ey(e){return e?Ud(e)||cg(e)?xr({},e):e:null}function Cl(e,t,n=!1,r=!1){const{props:o,ref:a,patchFlag:u,children:f,transition:m}=e,_=t?ty(o||{},t):o,w={__v_isVNode:!0,__v_skip:!0,type:e.type,props:_,key:_&&Cg(_),ref:t&&t.ref?n&&a?fn(a)?a.concat(ih(t)):[a,ih(t)]:ih(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==gn?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Cl(e.ssContent),ssFallback:e.ssFallback&&Cl(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&r&&vc(w,m.clone(w)),w}function ki(e=" ",t=0){return Pi($h,null,e,t)}function Au(e,t){const n=Pi(nh,null,e);return n.staticCount=t,n}function tn(e="",t=!1){return t?(nt(),ma(Bs,null,e)):Pi(Bs,null,e)}function pa(e){return e==null||typeof e=="boolean"?Pi(Bs):fn(e)?Pi(gn,null,e.slice()):bh(e)?_l(e):Pi($h,null,String(e))}function _l(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Cl(e)}function Hd(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(fn(t))n=16;else if(typeof t=="object")if(r&65){const o=t.default;o&&(o._c&&(o._d=!1),Hd(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!cg(t)?t._ctx=fs:o===3&&fs&&(fs.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else En(t)?(t={default:t,_ctx:fs},n=32):(t=String(t),r&64?(n=16,t=[ki(t)]):n=8);e.children=t,e.shapeFlag|=n}function ty(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(o==="class")t.class!==r.class&&(t.class=Ni([t.class,r.class]));else if(o==="style")t.style=Oh([t.style,r.style]);else if(Bh(o)){const a=t[o],u=r[o];u&&a!==u&&!(fn(a)&&a.includes(u))&&(t[o]=a?[].concat(a,u):u)}else o!==""&&(t[o]=r[o])}return t}function ca(e,t,n,r=null){$o(e,t,7,[n,r])}const ny=ag();let iy=0;function ry(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||ny,a={uid:iy++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new km(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fg(r,o),emitsOptions:wg(r,o),emit:null,emitted:null,propsDefaults:ci,inheritAttrs:r.inheritAttrs,ctx:ci,data:ci,props:ci,attrs:ci,slots:ci,refs:ci,setupState:ci,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=G_.bind(null,a),e.ce&&e.ce(a),a}let wr=null;const sy=()=>wr||fs;let wh,nd;{const e=Dh(),t=(n,r)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(r),a=>{o.length>1?o.forEach(u=>u(a)):o[0](a)}};wh=t("__VUE_INSTANCE_SETTERS__",n=>wr=n),nd=t("__VUE_SSR_SETTERS__",n=>yc=n)}const Ac=e=>{const t=wr;return wh(e),e.scope.on(),()=>{e.scope.off(),wh(t)}},Ap=()=>{wr&&wr.scope.off(),wh(null)};function kg(e){return e.vnode.shapeFlag&4}let yc=!1;function oy(e,t=!1,n=!1){t&&nd(t);const{props:r,children:o}=e.vnode,a=kg(e);T_(e,r,a,t),R_(e,o,n);const u=a?ay(e,t):void 0;return t&&nd(!1),u}function ay(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,L_);const{setup:r}=n;if(r){El();const o=e.setupContext=r.length>1?uy(e):null,a=Ac(e),u=Ec(r,e,0,[e.props,o]),f=_m(u);if(Al(),a(),(f||e.sp)&&!ac(e)&&ig(e),f){if(u.then(Ap,Ap),t)return u.then(m=>{Mp(e,m)}).catch(m=>{Ih(m,e,0)});e.asyncDep=u}else Mp(e,u)}else Pg(e)}function Mp(e,t,n){En(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:hi(t)&&(e.setupState=Hm(t)),Pg(e)}function Pg(e,t,n){const r=e.type;e.render||(e.render=r.render||va);{const o=Ac(e);El();try{C_(e)}finally{Al(),o()}}}const ly={get(e,t){return Wr(e,"get",""),e[t]}};function uy(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,ly),slots:e.slots,emit:e.emit,expose:t}}function Vh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Hm(qd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in lc)return lc[n](e)},has(t,n){return n in t||n in lc}})):e.proxy}function cy(e,t=!0){return En(e)?e.displayName||e.name:e.name||t&&e.__name}function hy(e){return En(e)&&"__vccOpts"in e}const Nn=(e,t)=>Qv(e,t,yc);function Gd(e,t,n){const r=arguments.length;return r===2?hi(t)&&!fn(t)?bh(t)?Pi(e,null,[t]):Pi(e,t):Pi(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&bh(n)&&(n=[n]),Pi(e,t,n))}const fy="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let id;const Bp=typeof window<"u"&&window.trustedTypes;if(Bp)try{id=Bp.createPolicy("vue",{createHTML:e=>e})}catch{}const Sg=id?e=>id.createHTML(e):e=>e,dy="http://www.w3.org/2000/svg",py="http://www.w3.org/1998/Math/MathML",qa=typeof document<"u"?document:null,Tp=qa&&qa.createElement("template"),my={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t==="svg"?qa.createElementNS(dy,e):t==="mathml"?qa.createElementNS(py,e):n?qa.createElement(e,{is:n}):qa.createElement(e);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>qa.createTextNode(e),createComment:e=>qa.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qa.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,o,a){const u=n?n.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Tp.innerHTML=Sg(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const f=Tp.content;if(r==="svg"||r==="mathml"){const m=f.firstChild;for(;m.firstChild;)f.appendChild(m.firstChild);f.removeChild(m)}t.insertBefore(f,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},hl="transition",Wu="animation",bc=Symbol("_vtc"),Eg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gy=xr({},Xm,Eg),vy=e=>(e.displayName="Transition",e.props=gy,e),Np=vy((e,{slots:t})=>Gd(l_,_y(e),t)),Ul=(e,t=[])=>{fn(e)?e.forEach(n=>n(...t)):e&&e(...t)},Dp=e=>e?fn(e)?e.some(t=>t.length>1):e.length>1:!1;function _y(e){const t={};for(const $ in e)$ in Eg||(t[$]=e[$]);if(e.css===!1)return t;const{name:n="v",type:r,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:u=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:m=a,appearActiveClass:_=u,appearToClass:w=f,leaveFromClass:b=`${n}-leave-from`,leaveActiveClass:E=`${n}-leave-active`,leaveToClass:x=`${n}-leave-to`}=e,F=yy(o),D=F&&F[0],U=F&&F[1],{onBeforeEnter:j,onEnter:Q,onEnterCancelled:ie,onLeave:ye,onLeaveCancelled:we,onBeforeAppear:Pe=j,onAppear:Ee=Q,onAppearCancelled:fe=ie}=t,Te=($,Se,B,K)=>{$._enterCancelled=K,ql($,Se?w:f),ql($,Se?_:u),B&&B()},$e=($,Se)=>{$._isLeaving=!1,ql($,b),ql($,x),ql($,E),Se&&Se()},q=$=>(Se,B)=>{const K=$?Ee:Q,H=()=>Te(Se,$,B);Ul(K,[Se,H]),Op(()=>{ql(Se,$?m:a),Fa(Se,$?w:f),Dp(K)||Rp(Se,r,D,H)})};return xr(t,{onBeforeEnter($){Ul(j,[$]),Fa($,a),Fa($,u)},onBeforeAppear($){Ul(Pe,[$]),Fa($,m),Fa($,_)},onEnter:q(!1),onAppear:q(!0),onLeave($,Se){$._isLeaving=!0;const B=()=>$e($,Se);Fa($,b),$._enterCancelled?(Fa($,E),jp()):(jp(),Fa($,E)),Op(()=>{$._isLeaving&&(ql($,b),Fa($,x),Dp(ye)||Rp($,r,U,B))}),Ul(ye,[$,B])},onEnterCancelled($){Te($,!1,void 0,!0),Ul(ie,[$])},onAppearCancelled($){Te($,!0,void 0,!0),Ul(fe,[$])},onLeaveCancelled($){$e($),Ul(we,[$])}})}function yy(e){if(e==null)return null;if(hi(e))return[xf(e.enter),xf(e.leave)];{const t=xf(e);return[t,t]}}function xf(e){return _v(e)}function Fa(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[bc]||(e[bc]=new Set)).add(t)}function ql(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[bc];n&&(n.delete(t),n.size||(e[bc]=void 0))}function Op(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let by=0;function Rp(e,t,n,r){const o=e._endId=++by,a=()=>{o===e._endId&&r()};if(n!=null)return setTimeout(a,n);const{type:u,timeout:f,propCount:m}=wy(e,t);if(!u)return r();const _=u+"end";let w=0;const b=()=>{e.removeEventListener(_,E),a()},E=x=>{x.target===e&&++w>=m&&b()};setTimeout(()=>{w<m&&b()},f+1),e.addEventListener(_,E)}function wy(e,t){const n=window.getComputedStyle(e),r=F=>(n[F]||"").split(", "),o=r(`${hl}Delay`),a=r(`${hl}Duration`),u=Ip(o,a),f=r(`${Wu}Delay`),m=r(`${Wu}Duration`),_=Ip(f,m);let w=null,b=0,E=0;t===hl?u>0&&(w=hl,b=u,E=a.length):t===Wu?_>0&&(w=Wu,b=_,E=m.length):(b=Math.max(u,_),w=b>0?u>_?hl:Wu:null,E=w?w===hl?a.length:m.length:0);const x=w===hl&&/\b(transform|all)(,|$)/.test(r(`${hl}Property`).toString());return{type:w,timeout:b,propCount:E,hasTransform:x}}function Ip(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>Fp(n)+Fp(e[r])))}function Fp(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function jp(){return document.body.offsetHeight}function xy(e,t,n){const r=e[bc];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const xh=Symbol("_vod"),Ag=Symbol("_vsh"),zp={beforeMount(e,{value:t},{transition:n}){e[xh]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Zu(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Zu(e,!0),r.enter(e)):r.leave(e,()=>{Zu(e,!1)}):Zu(e,t))},beforeUnmount(e,{value:t}){Zu(e,t)}};function Zu(e,t){e.style.display=t?e[xh]:"none",e[Ag]=!t}const Ly=Symbol(""),Cy=/(^|;)\s*display\s*:/;function ky(e,t,n){const r=e.style,o=Gi(n);let a=!1;if(n&&!o){if(t)if(Gi(t))for(const u of t.split(";")){const f=u.slice(0,u.indexOf(":")).trim();n[f]==null&&rh(r,f,"")}else for(const u in t)n[u]==null&&rh(r,u,"");for(const u in n)u==="display"&&(a=!0),rh(r,u,n[u])}else if(o){if(t!==n){const u=r[Ly];u&&(n+=";"+u),r.cssText=n,a=Cy.test(n)}}else t&&e.removeAttribute("style");xh in e&&(e[xh]=a?r.display:"",e[Ag]&&(r.display="none"))}const Up=/\s*!important$/;function rh(e,t,n){if(fn(n))n.forEach(r=>rh(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Py(e,t);Up.test(n)?e.setProperty(su(r),n.replace(Up,""),"important"):e[r]=n}}const qp=["Webkit","Moz","ms"],Lf={};function Py(e,t){const n=Lf[t];if(n)return n;let r=bo(t);if(r!=="filter"&&r in e)return Lf[t]=r;r=Nh(r);for(let o=0;o<qp.length;o++){const a=qp[o]+r;if(a in e)return Lf[t]=a}return t}const $p="http://www.w3.org/1999/xlink";function Vp(e,t,n,r,o,a=Cv(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS($p,t.slice(6,t.length)):e.setAttributeNS($p,t,n):n==null||a&&!xm(n)?e.removeAttribute(t):e.setAttribute(t,a?"":ya(n)?String(n):n)}function Hp(e,t,n,r,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Sg(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const f=a==="OPTION"?e.getAttribute("value")||"":e.value,m=n==null?e.type==="checkbox"?"on":"":String(n);(f!==m||!("_value"in e))&&(e.value=m),n==null&&e.removeAttribute(t),e._value=n;return}let u=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=xm(n):n==null&&f==="string"?(n="",u=!0):f==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(o||t)}function Ga(e,t,n,r){e.addEventListener(t,n,r)}function Sy(e,t,n,r){e.removeEventListener(t,n,r)}const Gp=Symbol("_vei");function Ey(e,t,n,r,o=null){const a=e[Gp]||(e[Gp]={}),u=a[t];if(r&&u)u.value=r;else{const[f,m]=Ay(t);if(r){const _=a[t]=Ty(r,o);Ga(e,f,_,m)}else u&&(Sy(e,f,u,m),a[t]=void 0)}}const Wp=/(?:Once|Passive|Capture)$/;function Ay(e){let t;if(Wp.test(e)){t={};let r;for(;r=e.match(Wp);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):su(e.slice(2)),t]}let Cf=0;const My=Promise.resolve(),By=()=>Cf||(My.then(()=>Cf=0),Cf=Date.now());function Ty(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$o(Ny(r,n.value),t,5,[r])};return n.value=e,n.attached=By(),n}function Ny(e,t){if(fn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>o=>!o._stopped&&r&&r(o))}else return t}const Zp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Dy=(e,t,n,r,o,a)=>{const u=o==="svg";t==="class"?xy(e,r,u):t==="style"?ky(e,n,r):Bh(t)?Bd(t)||Ey(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Oy(e,t,r,u))?(Hp(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Vp(e,t,r,u,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Gi(r))?Hp(e,bo(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Vp(e,t,r,u))};function Oy(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Zp(t)&&En(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Zp(t)&&Gi(n)?!1:t in e}const kl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return fn(t)?n=>eh(t,n):t};function Ry(e){e.target.composing=!0}function Kp(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const yo=Symbol("_assign"),ri={created(e,{modifiers:{lazy:t,trim:n,number:r}},o){e[yo]=kl(o);const a=r||o.props&&o.props.type==="number";Ga(e,t?"change":"input",u=>{if(u.target.composing)return;let f=e.value;n&&(f=f.trim()),a&&(f=dh(f)),e[yo](f)}),n&&Ga(e,"change",()=>{e.value=e.value.trim()}),t||(Ga(e,"compositionstart",Ry),Ga(e,"compositionend",Kp),Ga(e,"change",Kp))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:o,number:a}},u){if(e[yo]=kl(u),e.composing)return;const f=(a||e.type==="number")&&!/^0\d/.test(e.value)?dh(e.value):e.value,m=t??"";f!==m&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||o&&e.value.trim()===m)||(e.value=m))}},Mg={deep:!0,created(e,t,n){e[yo]=kl(n),Ga(e,"change",()=>{const r=e._modelValue,o=Du(e),a=e.checked,u=e[yo];if(fn(r)){const f=Dd(r,o),m=f!==-1;if(a&&!m)u(r.concat(o));else if(!a&&m){const _=[...r];_.splice(f,1),u(_)}}else if(Iu(r)){const f=new Set(r);a?f.add(o):f.delete(o),u(f)}else u(Bg(e,a))})},mounted:Jp,beforeUpdate(e,t,n){e[yo]=kl(n),Jp(e,t,n)}};function Jp(e,{value:t,oldValue:n},r){e._modelValue=t;let o;if(fn(t))o=Dd(t,r.props.value)>-1;else if(Iu(t))o=t.has(r.props.value);else{if(t===n)return;o=nu(t,Bg(e,!0))}e.checked!==o&&(e.checked=o)}const Iy={created(e,{value:t},n){e.checked=nu(t,n.props.value),e[yo]=kl(n),Ga(e,"change",()=>{e[yo](Du(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[yo]=kl(r),t!==n&&(e.checked=nu(t,r.props.value))}},hs={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const o=Iu(t);Ga(e,"change",()=>{const a=Array.prototype.filter.call(e.options,u=>u.selected).map(u=>n?dh(Du(u)):Du(u));e[yo](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,ls(()=>{e._assigning=!1})}),e[yo]=kl(r)},mounted(e,{value:t}){Yp(e,t)},beforeUpdate(e,t,n){e[yo]=kl(n)},updated(e,{value:t}){e._assigning||Yp(e,t)}};function Yp(e,t){const n=e.multiple,r=fn(t);if(!(n&&!r&&!Iu(t))){for(let o=0,a=e.options.length;o<a;o++){const u=e.options[o],f=Du(u);if(n)if(r){const m=typeof f;m==="string"||m==="number"?u.selected=t.some(_=>String(_)===String(f)):u.selected=Dd(t,f)>-1}else u.selected=t.has(f);else if(nu(Du(u),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Du(e){return"_value"in e?e._value:e.value}function Bg(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Fy={created(e,t,n){Zc(e,t,n,null,"created")},mounted(e,t,n){Zc(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){Zc(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){Zc(e,t,n,r,"updated")}};function jy(e,t){switch(e){case"SELECT":return hs;case"TEXTAREA":return ri;default:switch(t){case"checkbox":return Mg;case"radio":return Iy;default:return ri}}}function Zc(e,t,n,r,o){const u=jy(e.tagName,n.props&&n.props.type)[o];u&&u(e,t,n,r)}const zy=["ctrl","shift","alt","meta"],Uy={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>zy.some(n=>e[`${n}Key`]&&!t.includes(n))},Mc=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(o,...a)=>{for(let u=0;u<t.length;u++){const f=Uy[t[u]];if(f&&f(o,t))return}return e(o,...a)})},qy=xr({patchProp:Dy},my);let Xp;function $y(){return Xp||(Xp=F_(qy))}const Vy=(...e)=>{const t=$y().createApp(...e),{mount:n}=t;return t.mount=r=>{const o=Gy(r);if(!o)return;const a=t._component;!En(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=n(o,!1,Hy(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},t};function Hy(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Gy(e){return Gi(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Tg;const Hh=e=>Tg=e,Ng=Symbol();function rd(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var cc;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(cc||(cc={}));function Wy(){const e=Pm(!0),t=e.run(()=>Ft({}));let n=[],r=[];const o=qd({install(a){Hh(o),o._a=a,a.provide(Ng,o),a.config.globalProperties.$pinia=o,r.forEach(u=>n.push(u)),r=[]},use(a){return this._a?n.push(a):r.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const Dg=()=>{};function Qp(e,t,n,r=Dg){e.push(t);const o=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&Sm()&&Pv(o),o}function gu(e,...t){e.slice().forEach(n=>{n(...t)})}const Zy=e=>e(),e0=Symbol(),kf=Symbol();function sd(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],o=e[n];rd(o)&&rd(r)&&e.hasOwnProperty(n)&&!Hi(r)&&!Ll(r)?e[n]=sd(o,r):e[n]=r}return e}const Ky=Symbol();function Jy(e){return!rd(e)||!e.hasOwnProperty(Ky)}const{assign:ml}=Object;function Yy(e){return!!(Hi(e)&&e.effect)}function Xy(e,t,n,r){const{state:o,actions:a,getters:u}=t,f=n.state.value[e];let m;function _(){f||(n.state.value[e]=o?o():{});const w=Kv(n.state.value[e]);return ml(w,a,Object.keys(u||{}).reduce((b,E)=>(b[E]=qd(Nn(()=>{Hh(n);const x=n._s.get(e);return u[E].call(x,x)})),b),{}))}return m=Og(e,_,t,n,r,!0),m}function Og(e,t,n={},r,o,a){let u;const f=ml({actions:{}},n),m={deep:!0};let _,w,b=[],E=[],x;const F=r.state.value[e];!a&&!F&&(r.state.value[e]={}),Ft({});let D;function U(fe){let Te;_=w=!1,typeof fe=="function"?(fe(r.state.value[e]),Te={type:cc.patchFunction,storeId:e,events:x}):(sd(r.state.value[e],fe),Te={type:cc.patchObject,payload:fe,storeId:e,events:x});const $e=D=Symbol();ls().then(()=>{D===$e&&(_=!0)}),w=!0,gu(b,Te,r.state.value[e])}const j=a?function(){const{state:Te}=n,$e=Te?Te():{};this.$patch(q=>{ml(q,$e)})}:Dg;function Q(){u.stop(),b=[],E=[],r._s.delete(e)}const ie=(fe,Te="")=>{if(e0 in fe)return fe[kf]=Te,fe;const $e=function(){Hh(r);const q=Array.from(arguments),$=[],Se=[];function B(ne){$.push(ne)}function K(ne){Se.push(ne)}gu(E,{args:q,name:$e[kf],store:we,after:B,onError:K});let H;try{H=fe.apply(this&&this.$id===e?this:we,q)}catch(ne){throw gu(Se,ne),ne}return H instanceof Promise?H.then(ne=>(gu($,ne),ne)).catch(ne=>(gu(Se,ne),Promise.reject(ne))):(gu($,H),H)};return $e[e0]=!0,$e[kf]=Te,$e},ye={_p:r,$id:e,$onAction:Qp.bind(null,E),$patch:U,$reset:j,$subscribe(fe,Te={}){const $e=Qp(b,fe,Te.detached,()=>q()),q=u.run(()=>Yr(()=>r.state.value[e],$=>{(Te.flush==="sync"?w:_)&&fe({storeId:e,type:cc.direct,events:x},$)},ml({},m,Te)));return $e},$dispose:Q},we=Wa(ye);r._s.set(e,we);const Ee=(r._a&&r._a.runWithContext||Zy)(()=>r._e.run(()=>(u=Pm()).run(()=>t({action:ie}))));for(const fe in Ee){const Te=Ee[fe];if(Hi(Te)&&!Yy(Te)||Ll(Te))a||(F&&Jy(Te)&&(Hi(Te)?Te.value=F[fe]:sd(Te,F[fe])),r.state.value[e][fe]=Te);else if(typeof Te=="function"){const $e=ie(Te,fe);Ee[fe]=$e,f.actions[fe]=Te}}return ml(we,Ee),ml(Zn(we),Ee),Object.defineProperty(we,"$state",{get:()=>r.state.value[e],set:fe=>{U(Te=>{ml(Te,fe)})}}),r._p.forEach(fe=>{ml(we,u.run(()=>fe({store:we,app:r._a,pinia:r,options:f})))}),F&&a&&n.hydrate&&n.hydrate(we.$state,F),_=!0,w=!0,we}/*! #__NO_SIDE_EFFECTS__ */function Wd(e,t,n){let r,o;const a=typeof t=="function";typeof e=="string"?(r=e,o=a?n:t):(o=e,r=e.id);function u(f,m){const _=B_();return f=f||(_?_o(Ng,null):null),f&&Hh(f),f=Tg,f._s.has(r)||(a?Og(r,t,o,f):Xy(r,o,f)),f._s.get(r)}return u.$id=r,u}function Rg(e,t){return function(){return e.apply(t,arguments)}}const{toString:Qy}=Object.prototype,{getPrototypeOf:Zd}=Object,Gh=(e=>t=>{const n=Qy.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ho=e=>(e=e.toLowerCase(),t=>Gh(t)===e),Wh=e=>t=>typeof t===e,{isArray:Fu}=Array,wc=Wh("undefined");function e2(e){return e!==null&&!wc(e)&&e.constructor!==null&&!wc(e.constructor)&&Js(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ig=Ho("ArrayBuffer");function t2(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ig(e.buffer),t}const n2=Wh("string"),Js=Wh("function"),Fg=Wh("number"),Zh=e=>e!==null&&typeof e=="object",i2=e=>e===!0||e===!1,sh=e=>{if(Gh(e)!=="object")return!1;const t=Zd(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},r2=Ho("Date"),s2=Ho("File"),o2=Ho("Blob"),a2=Ho("FileList"),l2=e=>Zh(e)&&Js(e.pipe),u2=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Js(e.append)&&((t=Gh(e))==="formdata"||t==="object"&&Js(e.toString)&&e.toString()==="[object FormData]"))},c2=Ho("URLSearchParams"),[h2,f2,d2,p2]=["ReadableStream","Request","Response","Headers"].map(Ho),m2=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),Fu(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),u=a.length;let f;for(r=0;r<u;r++)f=a[r],t.call(null,e[f],f,e)}}function jg(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const Zl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zg=e=>!wc(e)&&e!==Zl;function od(){const{caseless:e}=zg(this)&&this||{},t={},n=(r,o)=>{const a=e&&jg(t,o)||o;sh(t[a])&&sh(r)?t[a]=od(t[a],r):sh(r)?t[a]=od({},r):Fu(r)?t[a]=r.slice():t[a]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&Bc(arguments[r],n);return t}const g2=(e,t,n,{allOwnKeys:r}={})=>(Bc(t,(o,a)=>{n&&Js(o)?e[a]=Rg(o,n):e[a]=o},{allOwnKeys:r}),e),v2=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_2=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},y2=(e,t,n,r)=>{let o,a,u;const f={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)u=o[a],(!r||r(u,e,t))&&!f[u]&&(t[u]=e[u],f[u]=!0);e=n!==!1&&Zd(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},b2=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},w2=e=>{if(!e)return null;if(Fu(e))return e;let t=e.length;if(!Fg(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},x2=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Zd(Uint8Array)),L2=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const a=o.value;t.call(e,a[0],a[1])}},C2=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},k2=Ho("HTMLFormElement"),P2=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),t0=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),S2=Ho("RegExp"),Ug=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Bc(n,(o,a)=>{let u;(u=t(o,a,e))!==!1&&(r[a]=u||o)}),Object.defineProperties(e,r)},E2=e=>{Ug(e,(t,n)=>{if(Js(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Js(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},A2=(e,t)=>{const n={},r=o=>{o.forEach(a=>{n[a]=!0})};return Fu(e)?r(e):r(String(e).split(t)),n},M2=()=>{},B2=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Pf="abcdefghijklmnopqrstuvwxyz",n0="0123456789",qg={DIGIT:n0,ALPHA:Pf,ALPHA_DIGIT:Pf+Pf.toUpperCase()+n0},T2=(e=16,t=qg.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function N2(e){return!!(e&&Js(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const D2=e=>{const t=new Array(10),n=(r,o)=>{if(Zh(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const a=Fu(r)?[]:{};return Bc(r,(u,f)=>{const m=n(u,o+1);!wc(m)&&(a[f]=m)}),t[o]=void 0,a}}return r};return n(e,0)},O2=Ho("AsyncFunction"),R2=e=>e&&(Zh(e)||Js(e))&&Js(e.then)&&Js(e.catch),$g=((e,t)=>e?setImmediate:t?((n,r)=>(Zl.addEventListener("message",({source:o,data:a})=>{o===Zl&&a===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Zl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Js(Zl.postMessage)),I2=typeof queueMicrotask<"u"?queueMicrotask.bind(Zl):typeof process<"u"&&process.nextTick||$g,xt={isArray:Fu,isArrayBuffer:Ig,isBuffer:e2,isFormData:u2,isArrayBufferView:t2,isString:n2,isNumber:Fg,isBoolean:i2,isObject:Zh,isPlainObject:sh,isReadableStream:h2,isRequest:f2,isResponse:d2,isHeaders:p2,isUndefined:wc,isDate:r2,isFile:s2,isBlob:o2,isRegExp:S2,isFunction:Js,isStream:l2,isURLSearchParams:c2,isTypedArray:x2,isFileList:a2,forEach:Bc,merge:od,extend:g2,trim:m2,stripBOM:v2,inherits:_2,toFlatObject:y2,kindOf:Gh,kindOfTest:Ho,endsWith:b2,toArray:w2,forEachEntry:L2,matchAll:C2,isHTMLForm:k2,hasOwnProperty:t0,hasOwnProp:t0,reduceDescriptors:Ug,freezeMethods:E2,toObjectSet:A2,toCamelCase:P2,noop:M2,toFiniteNumber:B2,findKey:jg,global:Zl,isContextDefined:zg,ALPHABET:qg,generateString:T2,isSpecCompliantForm:N2,toJSONObject:D2,isAsyncFn:O2,isThenable:R2,setImmediate:$g,asap:I2};function Mn(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}xt.inherits(Mn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xt.toJSONObject(this.config),code:this.code,status:this.status}}});const Vg=Mn.prototype,Hg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Hg[e]={value:e}});Object.defineProperties(Mn,Hg);Object.defineProperty(Vg,"isAxiosError",{value:!0});Mn.from=(e,t,n,r,o,a)=>{const u=Object.create(Vg);return xt.toFlatObject(e,u,function(m){return m!==Error.prototype},f=>f!=="isAxiosError"),Mn.call(u,e.message,t,n,r,o),u.cause=e,u.name=e.name,a&&Object.assign(u,a),u};const F2=null;function ad(e){return xt.isPlainObject(e)||xt.isArray(e)}function Gg(e){return xt.endsWith(e,"[]")?e.slice(0,-2):e}function i0(e,t,n){return e?e.concat(t).map(function(o,a){return o=Gg(o),!n&&a?"["+o+"]":o}).join(n?".":""):t}function j2(e){return xt.isArray(e)&&!e.some(ad)}const z2=xt.toFlatObject(xt,{},null,function(t){return/^is[A-Z]/.test(t)});function Kh(e,t,n){if(!xt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=xt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,U){return!xt.isUndefined(U[D])});const r=n.metaTokens,o=n.visitor||w,a=n.dots,u=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&xt.isSpecCompliantForm(t);if(!xt.isFunction(o))throw new TypeError("visitor must be a function");function _(F){if(F===null)return"";if(xt.isDate(F))return F.toISOString();if(!m&&xt.isBlob(F))throw new Mn("Blob is not supported. Use a Buffer instead.");return xt.isArrayBuffer(F)||xt.isTypedArray(F)?m&&typeof Blob=="function"?new Blob([F]):Buffer.from(F):F}function w(F,D,U){let j=F;if(F&&!U&&typeof F=="object"){if(xt.endsWith(D,"{}"))D=r?D:D.slice(0,-2),F=JSON.stringify(F);else if(xt.isArray(F)&&j2(F)||(xt.isFileList(F)||xt.endsWith(D,"[]"))&&(j=xt.toArray(F)))return D=Gg(D),j.forEach(function(ie,ye){!(xt.isUndefined(ie)||ie===null)&&t.append(u===!0?i0([D],ye,a):u===null?D:D+"[]",_(ie))}),!1}return ad(F)?!0:(t.append(i0(U,D,a),_(F)),!1)}const b=[],E=Object.assign(z2,{defaultVisitor:w,convertValue:_,isVisitable:ad});function x(F,D){if(!xt.isUndefined(F)){if(b.indexOf(F)!==-1)throw Error("Circular reference detected in "+D.join("."));b.push(F),xt.forEach(F,function(j,Q){(!(xt.isUndefined(j)||j===null)&&o.call(t,j,xt.isString(Q)?Q.trim():Q,D,E))===!0&&x(j,D?D.concat(Q):[Q])}),b.pop()}}if(!xt.isObject(e))throw new TypeError("data must be an object");return x(e),t}function r0(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Kd(e,t){this._pairs=[],e&&Kh(e,this,t)}const Wg=Kd.prototype;Wg.append=function(t,n){this._pairs.push([t,n])};Wg.toString=function(t){const n=t?function(r){return t.call(this,r,r0)}:r0;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function U2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zg(e,t,n){if(!t)return e;const r=n&&n.encode||U2;xt.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(o?a=o(t,n):a=xt.isURLSearchParams(t)?t.toString():new Kd(t,n).toString(r),a){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class s0{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){xt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Kg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q2=typeof URLSearchParams<"u"?URLSearchParams:Kd,$2=typeof FormData<"u"?FormData:null,V2=typeof Blob<"u"?Blob:null,H2={isBrowser:!0,classes:{URLSearchParams:q2,FormData:$2,Blob:V2},protocols:["http","https","file","blob","url","data"]},Jd=typeof window<"u"&&typeof document<"u",ld=typeof navigator=="object"&&navigator||void 0,G2=Jd&&(!ld||["ReactNative","NativeScript","NS"].indexOf(ld.product)<0),W2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Z2=Jd&&window.location.href||"http://localhost",K2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jd,hasStandardBrowserEnv:G2,hasStandardBrowserWebWorkerEnv:W2,navigator:ld,origin:Z2},Symbol.toStringTag,{value:"Module"})),Kr={...K2,...H2};function J2(e,t){return Kh(e,new Kr.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,a){return Kr.isNode&&xt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function Y2(e){return xt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function X2(e){const t={},n=Object.keys(e);let r;const o=n.length;let a;for(r=0;r<o;r++)a=n[r],t[a]=e[a];return t}function Jg(e){function t(n,r,o,a){let u=n[a++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),m=a>=n.length;return u=!u&&xt.isArray(o)?o.length:u,m?(xt.hasOwnProp(o,u)?o[u]=[o[u],r]:o[u]=r,!f):((!o[u]||!xt.isObject(o[u]))&&(o[u]=[]),t(n,r,o[u],a)&&xt.isArray(o[u])&&(o[u]=X2(o[u])),!f)}if(xt.isFormData(e)&&xt.isFunction(e.entries)){const n={};return xt.forEachEntry(e,(r,o)=>{t(Y2(r),o,n,0)}),n}return null}function Q2(e,t,n){if(xt.isString(e))try{return(t||JSON.parse)(e),xt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Tc={transitional:Kg,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,a=xt.isObject(t);if(a&&xt.isHTMLForm(t)&&(t=new FormData(t)),xt.isFormData(t))return o?JSON.stringify(Jg(t)):t;if(xt.isArrayBuffer(t)||xt.isBuffer(t)||xt.isStream(t)||xt.isFile(t)||xt.isBlob(t)||xt.isReadableStream(t))return t;if(xt.isArrayBufferView(t))return t.buffer;if(xt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return J2(t,this.formSerializer).toString();if((f=xt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Kh(f?{"files[]":t}:t,m&&new m,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),Q2(t)):t}],transformResponse:[function(t){const n=this.transitional||Tc.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(xt.isResponse(t)||xt.isReadableStream(t))return t;if(t&&xt.isString(t)&&(r&&!this.responseType||o)){const u=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(f){if(u)throw f.name==="SyntaxError"?Mn.from(f,Mn.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Kr.classes.FormData,Blob:Kr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xt.forEach(["delete","get","head","post","put","patch"],e=>{Tc.headers[e]={}});const e4=xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),t4=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(u){o=u.indexOf(":"),n=u.substring(0,o).trim().toLowerCase(),r=u.substring(o+1).trim(),!(!n||t[n]&&e4[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},o0=Symbol("internals");function Ku(e){return e&&String(e).trim().toLowerCase()}function oh(e){return e===!1||e==null?e:xt.isArray(e)?e.map(oh):String(e)}function n4(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const i4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Sf(e,t,n,r,o){if(xt.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!xt.isString(t)){if(xt.isString(r))return t.indexOf(r)!==-1;if(xt.isRegExp(r))return r.test(t)}}function r4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function s4(e,t){const n=xt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,a,u){return this[r].call(this,t,o,a,u)},configurable:!0})})}let Ts=class{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function a(f,m,_){const w=Ku(m);if(!w)throw new Error("header name must be a non-empty string");const b=xt.findKey(o,w);(!b||o[b]===void 0||_===!0||_===void 0&&o[b]!==!1)&&(o[b||m]=oh(f))}const u=(f,m)=>xt.forEach(f,(_,w)=>a(_,w,m));if(xt.isPlainObject(t)||t instanceof this.constructor)u(t,n);else if(xt.isString(t)&&(t=t.trim())&&!i4(t))u(t4(t),n);else if(xt.isHeaders(t))for(const[f,m]of t.entries())a(m,f,r);else t!=null&&a(n,t,r);return this}get(t,n){if(t=Ku(t),t){const r=xt.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return n4(o);if(xt.isFunction(n))return n.call(this,o,r);if(xt.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ku(t),t){const r=xt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Sf(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function a(u){if(u=Ku(u),u){const f=xt.findKey(r,u);f&&(!n||Sf(r,r[f],f,n))&&(delete r[f],o=!0)}}return xt.isArray(t)?t.forEach(a):a(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const a=n[r];(!t||Sf(this,this[a],a,t,!0))&&(delete this[a],o=!0)}return o}normalize(t){const n=this,r={};return xt.forEach(this,(o,a)=>{const u=xt.findKey(r,a);if(u){n[u]=oh(o),delete n[a];return}const f=t?r4(a):String(a).trim();f!==a&&delete n[a],n[f]=oh(o),r[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return xt.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&xt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[o0]=this[o0]={accessors:{}}).accessors,o=this.prototype;function a(u){const f=Ku(u);r[f]||(s4(o,u),r[f]=!0)}return xt.isArray(t)?t.forEach(a):a(t),this}};Ts.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xt.reduceDescriptors(Ts.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});xt.freezeMethods(Ts);function Ef(e,t){const n=this||Tc,r=t||n,o=Ts.from(r.headers);let a=r.data;return xt.forEach(e,function(f){a=f.call(n,a,o.normalize(),t?t.status:void 0)}),o.normalize(),a}function Yg(e){return!!(e&&e.__CANCEL__)}function ju(e,t,n){Mn.call(this,e??"canceled",Mn.ERR_CANCELED,t,n),this.name="CanceledError"}xt.inherits(ju,Mn,{__CANCEL__:!0});function Xg(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Mn("Request failed with status code "+n.status,[Mn.ERR_BAD_REQUEST,Mn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function o4(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function a4(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,a=0,u;return t=t!==void 0?t:1e3,function(m){const _=Date.now(),w=r[a];u||(u=_),n[o]=m,r[o]=_;let b=a,E=0;for(;b!==o;)E+=n[b++],b=b%e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),_-u<t)return;const x=w&&_-w;return x?Math.round(E*1e3/x):void 0}}function l4(e,t){let n=0,r=1e3/t,o,a;const u=(_,w=Date.now())=>{n=w,o=null,a&&(clearTimeout(a),a=null),e.apply(null,_)};return[(..._)=>{const w=Date.now(),b=w-n;b>=r?u(_,w):(o=_,a||(a=setTimeout(()=>{a=null,u(o)},r-b)))},()=>o&&u(o)]}const Lh=(e,t,n=3)=>{let r=0;const o=a4(50,250);return l4(a=>{const u=a.loaded,f=a.lengthComputable?a.total:void 0,m=u-r,_=o(m),w=u<=f;r=u;const b={loaded:u,total:f,progress:f?u/f:void 0,bytes:m,rate:_||void 0,estimated:_&&f&&w?(f-u)/_:void 0,event:a,lengthComputable:f!=null,[t?"download":"upload"]:!0};e(b)},n)},a0=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},l0=e=>(...t)=>xt.asap(()=>e(...t)),u4=Kr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Kr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Kr.origin),Kr.navigator&&/(msie|trident)/i.test(Kr.navigator.userAgent)):()=>!0,c4=Kr.hasStandardBrowserEnv?{write(e,t,n,r,o,a){const u=[e+"="+encodeURIComponent(t)];xt.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),xt.isString(r)&&u.push("path="+r),xt.isString(o)&&u.push("domain="+o),a===!0&&u.push("secure"),document.cookie=u.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function h4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function f4(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Qg(e,t){return e&&!h4(t)?f4(e,t):t}const u0=e=>e instanceof Ts?{...e}:e;function ru(e,t){t=t||{};const n={};function r(_,w,b,E){return xt.isPlainObject(_)&&xt.isPlainObject(w)?xt.merge.call({caseless:E},_,w):xt.isPlainObject(w)?xt.merge({},w):xt.isArray(w)?w.slice():w}function o(_,w,b,E){if(xt.isUndefined(w)){if(!xt.isUndefined(_))return r(void 0,_,b,E)}else return r(_,w,b,E)}function a(_,w){if(!xt.isUndefined(w))return r(void 0,w)}function u(_,w){if(xt.isUndefined(w)){if(!xt.isUndefined(_))return r(void 0,_)}else return r(void 0,w)}function f(_,w,b){if(b in t)return r(_,w);if(b in e)return r(void 0,_)}const m={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(_,w,b)=>o(u0(_),u0(w),b,!0)};return xt.forEach(Object.keys(Object.assign({},e,t)),function(w){const b=m[w]||o,E=b(e[w],t[w],w);xt.isUndefined(E)&&b!==f||(n[w]=E)}),n}const e1=e=>{const t=ru({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:a,headers:u,auth:f}=t;t.headers=u=Ts.from(u),t.url=Zg(Qg(t.baseURL,t.url),e.params,e.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let m;if(xt.isFormData(n)){if(Kr.hasStandardBrowserEnv||Kr.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((m=u.getContentType())!==!1){const[_,...w]=m?m.split(";").map(b=>b.trim()).filter(Boolean):[];u.setContentType([_||"multipart/form-data",...w].join("; "))}}if(Kr.hasStandardBrowserEnv&&(r&&xt.isFunction(r)&&(r=r(t)),r||r!==!1&&u4(t.url))){const _=o&&a&&c4.read(a);_&&u.set(o,_)}return t},d4=typeof XMLHttpRequest<"u",p4=d4&&function(e){return new Promise(function(n,r){const o=e1(e);let a=o.data;const u=Ts.from(o.headers).normalize();let{responseType:f,onUploadProgress:m,onDownloadProgress:_}=o,w,b,E,x,F;function D(){x&&x(),F&&F(),o.cancelToken&&o.cancelToken.unsubscribe(w),o.signal&&o.signal.removeEventListener("abort",w)}let U=new XMLHttpRequest;U.open(o.method.toUpperCase(),o.url,!0),U.timeout=o.timeout;function j(){if(!U)return;const ie=Ts.from("getAllResponseHeaders"in U&&U.getAllResponseHeaders()),we={data:!f||f==="text"||f==="json"?U.responseText:U.response,status:U.status,statusText:U.statusText,headers:ie,config:e,request:U};Xg(function(Ee){n(Ee),D()},function(Ee){r(Ee),D()},we),U=null}"onloadend"in U?U.onloadend=j:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(j)},U.onabort=function(){U&&(r(new Mn("Request aborted",Mn.ECONNABORTED,e,U)),U=null)},U.onerror=function(){r(new Mn("Network Error",Mn.ERR_NETWORK,e,U)),U=null},U.ontimeout=function(){let ye=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const we=o.transitional||Kg;o.timeoutErrorMessage&&(ye=o.timeoutErrorMessage),r(new Mn(ye,we.clarifyTimeoutError?Mn.ETIMEDOUT:Mn.ECONNABORTED,e,U)),U=null},a===void 0&&u.setContentType(null),"setRequestHeader"in U&&xt.forEach(u.toJSON(),function(ye,we){U.setRequestHeader(we,ye)}),xt.isUndefined(o.withCredentials)||(U.withCredentials=!!o.withCredentials),f&&f!=="json"&&(U.responseType=o.responseType),_&&([E,F]=Lh(_,!0),U.addEventListener("progress",E)),m&&U.upload&&([b,x]=Lh(m),U.upload.addEventListener("progress",b),U.upload.addEventListener("loadend",x)),(o.cancelToken||o.signal)&&(w=ie=>{U&&(r(!ie||ie.type?new ju(null,e,U):ie),U.abort(),U=null)},o.cancelToken&&o.cancelToken.subscribe(w),o.signal&&(o.signal.aborted?w():o.signal.addEventListener("abort",w)));const Q=o4(o.url);if(Q&&Kr.protocols.indexOf(Q)===-1){r(new Mn("Unsupported protocol "+Q+":",Mn.ERR_BAD_REQUEST,e));return}U.send(a||null)})},m4=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,o;const a=function(_){if(!o){o=!0,f();const w=_ instanceof Error?_:this.reason;r.abort(w instanceof Mn?w:new ju(w instanceof Error?w.message:w))}};let u=t&&setTimeout(()=>{u=null,a(new Mn(`timeout ${t} of ms exceeded`,Mn.ETIMEDOUT))},t);const f=()=>{e&&(u&&clearTimeout(u),u=null,e.forEach(_=>{_.unsubscribe?_.unsubscribe(a):_.removeEventListener("abort",a)}),e=null)};e.forEach(_=>_.addEventListener("abort",a));const{signal:m}=r;return m.unsubscribe=()=>xt.asap(f),m}},g4=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,o;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},v4=async function*(e,t){for await(const n of _4(e))yield*g4(n,t)},_4=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},c0=(e,t,n,r)=>{const o=v4(e,t);let a=0,u,f=m=>{u||(u=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:_,value:w}=await o.next();if(_){f(),m.close();return}let b=w.byteLength;if(n){let E=a+=b;n(E)}m.enqueue(new Uint8Array(w))}catch(_){throw f(_),_}},cancel(m){return f(m),o.return()}},{highWaterMark:2})},Jh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",t1=Jh&&typeof ReadableStream=="function",y4=Jh&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),n1=(e,...t)=>{try{return!!e(...t)}catch{return!1}},b4=t1&&n1(()=>{let e=!1;const t=new Request(Kr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h0=64*1024,ud=t1&&n1(()=>xt.isReadableStream(new Response("").body)),Ch={stream:ud&&(e=>e.body)};Jh&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Ch[t]&&(Ch[t]=xt.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Mn(`Response type '${t}' is not supported`,Mn.ERR_NOT_SUPPORT,r)})})})(new Response);const w4=async e=>{if(e==null)return 0;if(xt.isBlob(e))return e.size;if(xt.isSpecCompliantForm(e))return(await new Request(Kr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(xt.isArrayBufferView(e)||xt.isArrayBuffer(e))return e.byteLength;if(xt.isURLSearchParams(e)&&(e=e+""),xt.isString(e))return(await y4(e)).byteLength},x4=async(e,t)=>{const n=xt.toFiniteNumber(e.getContentLength());return n??w4(t)},L4=Jh&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:a,timeout:u,onDownloadProgress:f,onUploadProgress:m,responseType:_,headers:w,withCredentials:b="same-origin",fetchOptions:E}=e1(e);_=_?(_+"").toLowerCase():"text";let x=m4([o,a&&a.toAbortSignal()],u),F;const D=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let U;try{if(m&&b4&&n!=="get"&&n!=="head"&&(U=await x4(w,r))!==0){let we=new Request(t,{method:"POST",body:r,duplex:"half"}),Pe;if(xt.isFormData(r)&&(Pe=we.headers.get("content-type"))&&w.setContentType(Pe),we.body){const[Ee,fe]=a0(U,Lh(l0(m)));r=c0(we.body,h0,Ee,fe)}}xt.isString(b)||(b=b?"include":"omit");const j="credentials"in Request.prototype;F=new Request(t,{...E,signal:x,method:n.toUpperCase(),headers:w.normalize().toJSON(),body:r,duplex:"half",credentials:j?b:void 0});let Q=await fetch(F);const ie=ud&&(_==="stream"||_==="response");if(ud&&(f||ie&&D)){const we={};["status","statusText","headers"].forEach(Te=>{we[Te]=Q[Te]});const Pe=xt.toFiniteNumber(Q.headers.get("content-length")),[Ee,fe]=f&&a0(Pe,Lh(l0(f),!0))||[];Q=new Response(c0(Q.body,h0,Ee,()=>{fe&&fe(),D&&D()}),we)}_=_||"text";let ye=await Ch[xt.findKey(Ch,_)||"text"](Q,e);return!ie&&D&&D(),await new Promise((we,Pe)=>{Xg(we,Pe,{data:ye,headers:Ts.from(Q.headers),status:Q.status,statusText:Q.statusText,config:e,request:F})})}catch(j){throw D&&D(),j&&j.name==="TypeError"&&/fetch/i.test(j.message)?Object.assign(new Mn("Network Error",Mn.ERR_NETWORK,e,F),{cause:j.cause||j}):Mn.from(j,j&&j.code,e,F)}}),cd={http:F2,xhr:p4,fetch:L4};xt.forEach(cd,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const f0=e=>`- ${e}`,C4=e=>xt.isFunction(e)||e===null||e===!1,i1={getAdapter:e=>{e=xt.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let a=0;a<t;a++){n=e[a];let u;if(r=n,!C4(n)&&(r=cd[(u=String(n)).toLowerCase()],r===void 0))throw new Mn(`Unknown adapter '${u}'`);if(r)break;o[u||"#"+a]=r}if(!r){const a=Object.entries(o).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let u=t?a.length>1?`since :
`+a.map(f0).join(`
`):" "+f0(a[0]):"as no adapter specified";throw new Mn("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:cd};function Af(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ju(null,e)}function d0(e){return Af(e),e.headers=Ts.from(e.headers),e.data=Ef.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),i1.getAdapter(e.adapter||Tc.adapter)(e).then(function(r){return Af(e),r.data=Ef.call(e,e.transformResponse,r),r.headers=Ts.from(r.headers),r},function(r){return Yg(r)||(Af(e),r&&r.response&&(r.response.data=Ef.call(e,e.transformResponse,r.response),r.response.headers=Ts.from(r.response.headers))),Promise.reject(r)})}const r1="1.7.9",Yh={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Yh[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const p0={};Yh.transitional=function(t,n,r){function o(a,u){return"[Axios v"+r1+"] Transitional option '"+a+"'"+u+(r?". "+r:"")}return(a,u,f)=>{if(t===!1)throw new Mn(o(u," has been removed"+(n?" in "+n:"")),Mn.ERR_DEPRECATED);return n&&!p0[u]&&(p0[u]=!0,console.warn(o(u," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,u,f):!0}};Yh.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function k4(e,t,n){if(typeof e!="object")throw new Mn("options must be an object",Mn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const a=r[o],u=t[a];if(u){const f=e[a],m=f===void 0||u(f,a,e);if(m!==!0)throw new Mn("option "+a+" must be "+m,Mn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Mn("Unknown option "+a,Mn.ERR_BAD_OPTION)}}const ah={assertOptions:k4,validators:Yh},ha=ah.validators;let eu=class{constructor(t){this.defaults=t,this.interceptors={request:new s0,response:new s0}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ru(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:a}=n;r!==void 0&&ah.assertOptions(r,{silentJSONParsing:ha.transitional(ha.boolean),forcedJSONParsing:ha.transitional(ha.boolean),clarifyTimeoutError:ha.transitional(ha.boolean)},!1),o!=null&&(xt.isFunction(o)?n.paramsSerializer={serialize:o}:ah.assertOptions(o,{encode:ha.function,serialize:ha.function},!0)),ah.assertOptions(n,{baseUrl:ha.spelling("baseURL"),withXsrfToken:ha.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=a&&xt.merge(a.common,a[n.method]);a&&xt.forEach(["delete","get","head","post","put","patch","common"],F=>{delete a[F]}),n.headers=Ts.concat(u,a);const f=[];let m=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(n)===!1||(m=m&&D.synchronous,f.unshift(D.fulfilled,D.rejected))});const _=[];this.interceptors.response.forEach(function(D){_.push(D.fulfilled,D.rejected)});let w,b=0,E;if(!m){const F=[d0.bind(this),void 0];for(F.unshift.apply(F,f),F.push.apply(F,_),E=F.length,w=Promise.resolve(n);b<E;)w=w.then(F[b++],F[b++]);return w}E=f.length;let x=n;for(b=0;b<E;){const F=f[b++],D=f[b++];try{x=F(x)}catch(U){D.call(this,U);break}}try{w=d0.call(this,x)}catch(F){return Promise.reject(F)}for(b=0,E=_.length;b<E;)w=w.then(_[b++],_[b++]);return w}getUri(t){t=ru(this.defaults,t);const n=Qg(t.baseURL,t.url);return Zg(n,t.params,t.paramsSerializer)}};xt.forEach(["delete","get","head","options"],function(t){eu.prototype[t]=function(n,r){return this.request(ru(r||{},{method:t,url:n,data:(r||{}).data}))}});xt.forEach(["post","put","patch"],function(t){function n(r){return function(a,u,f){return this.request(ru(f||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}eu.prototype[t]=n(),eu.prototype[t+"Form"]=n(!0)});let P4=class s1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(o=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](o);r._listeners=null}),this.promise.then=o=>{let a;const u=new Promise(f=>{r.subscribe(f),a=f}).then(o);return u.cancel=function(){r.unsubscribe(a)},u},t(function(a,u,f){r.reason||(r.reason=new ju(a,u,f),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new s1(function(o){t=o}),cancel:t}}};function S4(e){return function(n){return e.apply(null,n)}}function E4(e){return xt.isObject(e)&&e.isAxiosError===!0}const hd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hd).forEach(([e,t])=>{hd[t]=e});function o1(e){const t=new eu(e),n=Rg(eu.prototype.request,t);return xt.extend(n,eu.prototype,t,{allOwnKeys:!0}),xt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return o1(ru(e,o))},n}const Wi=o1(Tc);Wi.Axios=eu;Wi.CanceledError=ju;Wi.CancelToken=P4;Wi.isCancel=Yg;Wi.VERSION=r1;Wi.toFormData=Kh;Wi.AxiosError=Mn;Wi.Cancel=Wi.CanceledError;Wi.all=function(t){return Promise.all(t)};Wi.spread=S4;Wi.isAxiosError=E4;Wi.mergeConfig=ru;Wi.AxiosHeaders=Ts;Wi.formToJSON=e=>Jg(xt.isHTMLForm(e)?new FormData(e):e);Wi.getAdapter=i1.getAdapter;Wi.HttpStatusCode=hd;Wi.default=Wi;const{Axios:wS,AxiosError:xS,CanceledError:LS,isCancel:CS,CancelToken:kS,VERSION:PS,all:SS,Cancel:ES,isAxiosError:AS,spread:MS,toFormData:BS,AxiosHeaders:TS,HttpStatusCode:NS,formToJSON:DS,getAdapter:OS,mergeConfig:RS}=Wi,Ln=Wi.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function a1(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Ln.interceptors.request.use(e=>{const t=a1("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Ln.interceptors.response.use(e=>e,async e=>{var n;const t=e.config;if(((n=e.response)==null?void 0:n.status)===401&&!t._retry){t._retry=!0;try{await ds().refreshToken();const o=a1("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Ln(t)}catch(r){console.error("Token refresh failed:",r),window.location.href="/login"}}return Promise.reject(e)});Ln.defaults.baseURL="/api";Ln.defaults.headers.common["Content-Type"]="application/json";Ln.defaults.withCredentials=!0;function kh(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Ln.interceptors.request.use(e=>{const t=kh("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Ln.interceptors.response.use(e=>e,async e=>{var r,o;const t=ds(),n=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((o=n.url)!=null&&o.includes("/token/refresh/"))){n._retry=!0;try{if(!kh("access_token"))throw new Error("No token available");await t.refreshToken();const u=kh("access_token");if(u)return n.headers.Authorization=`Bearer ${u}`,Ln(n)}catch(a){console.error("Token refresh failed:",a),await t.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function A4(e,t,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const o=`expires=${r.toUTCString()}`;document.cookie=`${e}=${t};${o};path=/;secure;samesite=Strict`}function Kl(e){if(!e)return"Non spécifié";const t=`${e.first_name} ${e.last_name.toUpperCase()}`;return e.company_name?`${t} (${e.company_name})`:t}const ds=Wd("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isDealer:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="dealer"},isClient:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var t;return!!((t=e.user)!=null&&t.dealer)}},actions:{async initialize(e){if(!e){const n=await this.restoreSession();return this.initialized=!0,n}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const t=await this.restoreSession();return this.initialized=!0,t},async restoreSession(){try{if(!kh("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const t=await Ln.post("/token/refresh/");return t.data.user?(this.user=t.data.user,this.isAuthenticated=!0,this.mustChangePassword=t.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,t){var n,r,o;try{const a=await Ln.post("/token/",{username:e,password:t});if(!a.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${a.data.access}; path=/; secure; samesite=Strict`;const u=await this.fetchUserProfile();return this.user=u,this.isAuthenticated=!0,!0}catch(a){throw this.isAuthenticated=!1,this.user=null,((n=a.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(o=(r=a.response)==null?void 0:r.data)!=null&&o.detail?new Error(a.response.data.detail):a}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await Ln.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,t){try{const n=await Ln.post("/users/change_password/",{old_password:e,password:t});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var e,t,n,r;try{const o=await Ln.post("/token/refresh/",{},{withCredentials:!0}),{access:a}=o.data;if(!a)throw new Error("No access token received");return A4("access_token",a,1),this.isAuthenticated=!0,a}catch(o){throw console.error("Error refreshing token:",{status:(e=o.response)==null?void 0:e.status,data:(t=o.response)==null?void 0:t.data}),(((n=o.response)==null?void 0:n.status)===401||((r=o.response)==null?void 0:r.status)===403)&&await this.logout(),o}},async fetchConcessionnaires(){this.loading=!0;try{const e=await Ln.get("/users/",{params:{role:"dealer"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la récupération des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,t){this.loading=!0;try{await Ln.patch(`/users/${e}/`,{concessionnaire:t}),this.user&&this.user.id===e&&(this.user.dealer=t)}catch(n){throw this.error="Erreur lors de la mise à jour du concessionnaire",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await Ln.post("/users/",e)).data}catch(t){throw this.error="Erreur lors de la création de l'utilisateur",t}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await Ln.patch(`/users/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(e){var t;this.loading=!0;try{const n=await Ln.patch(`/users/${(t=this.user)==null?void 0:t.id}/`,{email:e});return this.user&&(this.user.email=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const wu=typeof document<"u";function l1(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function M4(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&l1(e.default)}const ni=Object.assign;function Mf(e,t){const n={};for(const r in t){const o=t[r];n[r]=Vo(o)?o.map(e):e(o)}return n}const hc=()=>{},Vo=Array.isArray,u1=/#/g,B4=/&/g,T4=/\//g,N4=/=/g,D4=/\?/g,c1=/\+/g,O4=/%5B/g,R4=/%5D/g,h1=/%5E/g,I4=/%60/g,f1=/%7B/g,F4=/%7C/g,d1=/%7D/g,j4=/%20/g;function Yd(e){return encodeURI(""+e).replace(F4,"|").replace(O4,"[").replace(R4,"]")}function z4(e){return Yd(e).replace(f1,"{").replace(d1,"}").replace(h1,"^")}function fd(e){return Yd(e).replace(c1,"%2B").replace(j4,"+").replace(u1,"%23").replace(B4,"%26").replace(I4,"`").replace(f1,"{").replace(d1,"}").replace(h1,"^")}function U4(e){return fd(e).replace(N4,"%3D")}function q4(e){return Yd(e).replace(u1,"%23").replace(D4,"%3F")}function $4(e){return e==null?"":q4(e).replace(T4,"%2F")}function xc(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const V4=/\/$/,H4=e=>e.replace(V4,"");function Bf(e,t,n="/"){let r,o={},a="",u="";const f=t.indexOf("#");let m=t.indexOf("?");return f<m&&f>=0&&(m=-1),m>-1&&(r=t.slice(0,m),a=t.slice(m+1,f>-1?f:t.length),o=e(a)),f>-1&&(r=r||t.slice(0,f),u=t.slice(f,t.length)),r=K4(r??t,n),{fullPath:r+(a&&"?")+a+u,path:r,query:o,hash:xc(u)}}function G4(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function m0(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function W4(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&Ou(t.matched[r],n.matched[o])&&p1(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ou(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function p1(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Z4(e[n],t[n]))return!1;return!0}function Z4(e,t){return Vo(e)?g0(e,t):Vo(t)?g0(t,e):e===t}function g0(e,t){return Vo(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function K4(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let a=n.length-1,u,f;for(u=0;u<r.length;u++)if(f=r[u],f!==".")if(f==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(u).join("/")}const fl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Lc;(function(e){e.pop="pop",e.push="push"})(Lc||(Lc={}));var fc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(fc||(fc={}));function J4(e){if(!e)if(wu){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),H4(e)}const Y4=/^[^#]+#/;function X4(e,t){return e.replace(Y4,"#")+t}function Q4(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Xh=()=>({left:window.scrollX,top:window.scrollY});function e5(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=Q4(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function v0(e,t){return(history.state?history.state.position-t:-1)+e}const dd=new Map;function t5(e,t){dd.set(e,t)}function n5(e){const t=dd.get(e);return dd.delete(e),t}let i5=()=>location.protocol+"//"+location.host;function m1(e,t){const{pathname:n,search:r,hash:o}=t,a=e.indexOf("#");if(a>-1){let f=o.includes(e.slice(a))?e.slice(a).length:1,m=o.slice(f);return m[0]!=="/"&&(m="/"+m),m0(m,"")}return m0(n,e)+r+o}function r5(e,t,n,r){let o=[],a=[],u=null;const f=({state:E})=>{const x=m1(e,location),F=n.value,D=t.value;let U=0;if(E){if(n.value=x,t.value=E,u&&u===F){u=null;return}U=D?E.position-D.position:0}else r(x);o.forEach(j=>{j(n.value,F,{delta:U,type:Lc.pop,direction:U?U>0?fc.forward:fc.back:fc.unknown})})};function m(){u=n.value}function _(E){o.push(E);const x=()=>{const F=o.indexOf(E);F>-1&&o.splice(F,1)};return a.push(x),x}function w(){const{history:E}=window;E.state&&E.replaceState(ni({},E.state,{scroll:Xh()}),"")}function b(){for(const E of a)E();a=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",w)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",w,{passive:!0}),{pauseListeners:m,listen:_,destroy:b}}function _0(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?Xh():null}}function s5(e){const{history:t,location:n}=window,r={value:m1(e,n)},o={value:t.state};o.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(m,_,w){const b=e.indexOf("#"),E=b>-1?(n.host&&document.querySelector("base")?e:e.slice(b))+m:i5()+e+m;try{t[w?"replaceState":"pushState"](_,"",E),o.value=_}catch(x){console.error(x),n[w?"replace":"assign"](E)}}function u(m,_){const w=ni({},t.state,_0(o.value.back,m,o.value.forward,!0),_,{position:o.value.position});a(m,w,!0),r.value=m}function f(m,_){const w=ni({},o.value,t.state,{forward:m,scroll:Xh()});a(w.current,w,!0);const b=ni({},_0(r.value,m,null),{position:w.position+1},_);a(m,b,!1),r.value=m}return{location:r,state:o,push:f,replace:u}}function o5(e){e=J4(e);const t=s5(e),n=r5(e,t.state,t.location,t.replace);function r(a,u=!0){u||n.pauseListeners(),history.go(a)}const o=ni({location:"",base:e,go:r,createHref:X4.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function a5(e){return typeof e=="string"||e&&typeof e=="object"}function g1(e){return typeof e=="string"||typeof e=="symbol"}const v1=Symbol("");var y0;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(y0||(y0={}));function Ru(e,t){return ni(new Error,{type:e,[v1]:!0},t)}function ja(e,t){return e instanceof Error&&v1 in e&&(t==null||!!(e.type&t))}const b0="[^/]+?",l5={sensitive:!1,strict:!1,start:!0,end:!0},u5=/[.+*?^${}()[\]/\\]/g;function c5(e,t){const n=ni({},l5,t),r=[];let o=n.start?"^":"";const a=[];for(const _ of e){const w=_.length?[]:[90];n.strict&&!_.length&&(o+="/");for(let b=0;b<_.length;b++){const E=_[b];let x=40+(n.sensitive?.25:0);if(E.type===0)b||(o+="/"),o+=E.value.replace(u5,"\\$&"),x+=40;else if(E.type===1){const{value:F,repeatable:D,optional:U,regexp:j}=E;a.push({name:F,repeatable:D,optional:U});const Q=j||b0;if(Q!==b0){x+=10;try{new RegExp(`(${Q})`)}catch(ye){throw new Error(`Invalid custom RegExp for param "${F}" (${Q}): `+ye.message)}}let ie=D?`((?:${Q})(?:/(?:${Q}))*)`:`(${Q})`;b||(ie=U&&_.length<2?`(?:/${ie})`:"/"+ie),U&&(ie+="?"),o+=ie,x+=20,U&&(x+=-8),D&&(x+=-20),Q===".*"&&(x+=-50)}w.push(x)}r.push(w)}if(n.strict&&n.end){const _=r.length-1;r[_][r[_].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const u=new RegExp(o,n.sensitive?"":"i");function f(_){const w=_.match(u),b={};if(!w)return null;for(let E=1;E<w.length;E++){const x=w[E]||"",F=a[E-1];b[F.name]=x&&F.repeatable?x.split("/"):x}return b}function m(_){let w="",b=!1;for(const E of e){(!b||!w.endsWith("/"))&&(w+="/"),b=!1;for(const x of E)if(x.type===0)w+=x.value;else if(x.type===1){const{value:F,repeatable:D,optional:U}=x,j=F in _?_[F]:"";if(Vo(j)&&!D)throw new Error(`Provided param "${F}" is an array but it is not repeatable (* or + modifiers)`);const Q=Vo(j)?j.join("/"):j;if(!Q)if(U)E.length<2&&(w.endsWith("/")?w=w.slice(0,-1):b=!0);else throw new Error(`Missing required param "${F}"`);w+=Q}}return w||"/"}return{re:u,score:r,keys:a,parse:f,stringify:m}}function h5(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function _1(e,t){let n=0;const r=e.score,o=t.score;for(;n<r.length&&n<o.length;){const a=h5(r[n],o[n]);if(a)return a;n++}if(Math.abs(o.length-r.length)===1){if(w0(r))return 1;if(w0(o))return-1}return o.length-r.length}function w0(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const f5={type:0,value:""},d5=/[a-zA-Z0-9_]/;function p5(e){if(!e)return[[]];if(e==="/")return[[f5]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(x){throw new Error(`ERR (${n})/"${_}": ${x}`)}let n=0,r=n;const o=[];let a;function u(){a&&o.push(a),a=[]}let f=0,m,_="",w="";function b(){_&&(n===0?a.push({type:0,value:_}):n===1||n===2||n===3?(a.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:_,regexp:w,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),_="")}function E(){_+=m}for(;f<e.length;){if(m=e[f++],m==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:m==="/"?(_&&b(),u()):m===":"?(b(),n=1):E();break;case 4:E(),n=r;break;case 1:m==="("?n=2:d5.test(m)?E():(b(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&f--);break;case 2:m===")"?w[w.length-1]=="\\"?w=w.slice(0,-1)+m:n=3:w+=m;break;case 3:b(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&f--,w="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${_}"`),b(),u(),o}function m5(e,t,n){const r=c5(p5(e.path),n),o=ni(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function g5(e,t){const n=[],r=new Map;t=k0({strict:!1,end:!0,sensitive:!1},t);function o(b){return r.get(b)}function a(b,E,x){const F=!x,D=L0(b);D.aliasOf=x&&x.record;const U=k0(t,b),j=[D];if("alias"in b){const ye=typeof b.alias=="string"?[b.alias]:b.alias;for(const we of ye)j.push(L0(ni({},D,{components:x?x.record.components:D.components,path:we,aliasOf:x?x.record:D})))}let Q,ie;for(const ye of j){const{path:we}=ye;if(E&&we[0]!=="/"){const Pe=E.record.path,Ee=Pe[Pe.length-1]==="/"?"":"/";ye.path=E.record.path+(we&&Ee+we)}if(Q=m5(ye,E,U),x?x.alias.push(Q):(ie=ie||Q,ie!==Q&&ie.alias.push(Q),F&&b.name&&!C0(Q)&&u(b.name)),y1(Q)&&m(Q),D.children){const Pe=D.children;for(let Ee=0;Ee<Pe.length;Ee++)a(Pe[Ee],Q,x&&x.children[Ee])}x=x||Q}return ie?()=>{u(ie)}:hc}function u(b){if(g1(b)){const E=r.get(b);E&&(r.delete(b),n.splice(n.indexOf(E),1),E.children.forEach(u),E.alias.forEach(u))}else{const E=n.indexOf(b);E>-1&&(n.splice(E,1),b.record.name&&r.delete(b.record.name),b.children.forEach(u),b.alias.forEach(u))}}function f(){return n}function m(b){const E=y5(b,n);n.splice(E,0,b),b.record.name&&!C0(b)&&r.set(b.record.name,b)}function _(b,E){let x,F={},D,U;if("name"in b&&b.name){if(x=r.get(b.name),!x)throw Ru(1,{location:b});U=x.record.name,F=ni(x0(E.params,x.keys.filter(ie=>!ie.optional).concat(x.parent?x.parent.keys.filter(ie=>ie.optional):[]).map(ie=>ie.name)),b.params&&x0(b.params,x.keys.map(ie=>ie.name))),D=x.stringify(F)}else if(b.path!=null)D=b.path,x=n.find(ie=>ie.re.test(D)),x&&(F=x.parse(D),U=x.record.name);else{if(x=E.name?r.get(E.name):n.find(ie=>ie.re.test(E.path)),!x)throw Ru(1,{location:b,currentLocation:E});U=x.record.name,F=ni({},E.params,b.params),D=x.stringify(F)}const j=[];let Q=x;for(;Q;)j.unshift(Q.record),Q=Q.parent;return{name:U,path:D,params:F,matched:j,meta:_5(j)}}e.forEach(b=>a(b));function w(){n.length=0,r.clear()}return{addRoute:a,resolve:_,removeRoute:u,clearRoutes:w,getRoutes:f,getRecordMatcher:o}}function x0(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function L0(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:v5(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function v5(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function C0(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function _5(e){return e.reduce((t,n)=>ni(t,n.meta),{})}function k0(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function y5(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;_1(e,t[a])<0?r=a:n=a+1}const o=b5(e);return o&&(r=t.lastIndexOf(o,r-1)),r}function b5(e){let t=e;for(;t=t.parent;)if(y1(t)&&_1(e,t)===0)return t}function y1({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function w5(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const a=r[o].replace(c1," "),u=a.indexOf("="),f=xc(u<0?a:a.slice(0,u)),m=u<0?null:xc(a.slice(u+1));if(f in t){let _=t[f];Vo(_)||(_=t[f]=[_]),_.push(m)}else t[f]=m}return t}function P0(e){let t="";for(let n in e){const r=e[n];if(n=U4(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Vo(r)?r.map(a=>a&&fd(a)):[r&&fd(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function x5(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Vo(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return t}const L5=Symbol(""),S0=Symbol(""),Qh=Symbol(""),Xd=Symbol(""),pd=Symbol("");function Ju(){let e=[];function t(r){return e.push(r),()=>{const o=e.indexOf(r);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function yl(e,t,n,r,o,a=u=>u()){const u=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((f,m)=>{const _=E=>{E===!1?m(Ru(4,{from:n,to:t})):E instanceof Error?m(E):a5(E)?m(Ru(2,{from:t,to:E})):(u&&r.enterCallbacks[o]===u&&typeof E=="function"&&u.push(E),f())},w=a(()=>e.call(r&&r.instances[o],t,n,_));let b=Promise.resolve(w);e.length<3&&(b=b.then(_)),b.catch(E=>m(E))})}function Tf(e,t,n,r,o=a=>a()){const a=[];for(const u of e)for(const f in u.components){let m=u.components[f];if(!(t!=="beforeRouteEnter"&&!u.instances[f]))if(l1(m)){const w=(m.__vccOpts||m)[t];w&&a.push(yl(w,n,r,u,f,o))}else{let _=m();a.push(()=>_.then(w=>{if(!w)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const b=M4(w)?w.default:w;u.mods[f]=w,u.components[f]=b;const x=(b.__vccOpts||b)[t];return x&&yl(x,n,r,u,f,o)()}))}}return a}function E0(e){const t=_o(Qh),n=_o(Xd),r=Nn(()=>{const m=Dn(e.to);return t.resolve(m)}),o=Nn(()=>{const{matched:m}=r.value,{length:_}=m,w=m[_-1],b=n.matched;if(!w||!b.length)return-1;const E=b.findIndex(Ou.bind(null,w));if(E>-1)return E;const x=A0(m[_-2]);return _>1&&A0(w)===x&&b[b.length-1].path!==x?b.findIndex(Ou.bind(null,m[_-2])):E}),a=Nn(()=>o.value>-1&&S5(n.params,r.value.params)),u=Nn(()=>o.value>-1&&o.value===n.matched.length-1&&p1(n.params,r.value.params));function f(m={}){if(P5(m)){const _=t[Dn(e.replace)?"replace":"push"](Dn(e.to)).catch(hc);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>_),_}return Promise.resolve()}return{route:r,href:Nn(()=>r.value.href),isActive:a,isExactActive:u,navigate:f}}function C5(e){return e.length===1?e[0]:e}const k5=ps({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:E0,setup(e,{slots:t}){const n=Wa(E0(e)),{options:r}=_o(Qh),o=Nn(()=>({[M0(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[M0(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&C5(t.default(n));return e.custom?a:Gd("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},a)}}}),xu=k5;function P5(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function S5(e,t){for(const n in t){const r=t[n],o=e[n];if(typeof r=="string"){if(r!==o)return!1}else if(!Vo(o)||o.length!==r.length||r.some((a,u)=>a!==o[u]))return!1}return!0}function A0(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const M0=(e,t,n)=>e??t??n,E5=ps({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=_o(pd),o=Nn(()=>e.route||r.value),a=_o(S0,0),u=Nn(()=>{let _=Dn(a);const{matched:w}=o.value;let b;for(;(b=w[_])&&!b.components;)_++;return _}),f=Nn(()=>o.value.matched[u.value]);th(S0,Nn(()=>u.value+1)),th(L5,f),th(pd,o);const m=Ft();return Yr(()=>[m.value,f.value,e.name],([_,w,b],[E,x,F])=>{w&&(w.instances[b]=_,x&&x!==w&&_&&_===E&&(w.leaveGuards.size||(w.leaveGuards=x.leaveGuards),w.updateGuards.size||(w.updateGuards=x.updateGuards))),_&&w&&(!x||!Ou(w,x)||!E)&&(w.enterCallbacks[b]||[]).forEach(D=>D(_))},{flush:"post"}),()=>{const _=o.value,w=e.name,b=f.value,E=b&&b.components[w];if(!E)return B0(n.default,{Component:E,route:_});const x=b.props[w],F=x?x===!0?_.params:typeof x=="function"?x(_):x:null,U=Gd(E,ni({},F,t,{onVnodeUnmounted:j=>{j.component.isUnmounted&&(b.instances[w]=null)},ref:m}));return B0(n.default,{Component:U,route:_})||U}}});function B0(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const b1=E5;function A5(e){const t=g5(e.routes,e),n=e.parseQuery||w5,r=e.stringifyQuery||P0,o=e.history,a=Ju(),u=Ju(),f=Ju(),m=Gv(fl);let _=fl;wu&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=Mf.bind(null,oe=>""+oe),b=Mf.bind(null,$4),E=Mf.bind(null,xc);function x(oe,xe){let me,je;return g1(oe)?(me=t.getRecordMatcher(oe),je=xe):je=oe,t.addRoute(je,me)}function F(oe){const xe=t.getRecordMatcher(oe);xe&&t.removeRoute(xe)}function D(){return t.getRoutes().map(oe=>oe.record)}function U(oe){return!!t.getRecordMatcher(oe)}function j(oe,xe){if(xe=ni({},xe||m.value),typeof oe=="string"){const Ne=Bf(n,oe,xe.path),Ae=t.resolve({path:Ne.path},xe),ee=o.createHref(Ne.fullPath);return ni(Ne,Ae,{params:E(Ae.params),hash:xc(Ne.hash),redirectedFrom:void 0,href:ee})}let me;if(oe.path!=null)me=ni({},oe,{path:Bf(n,oe.path,xe.path).path});else{const Ne=ni({},oe.params);for(const Ae in Ne)Ne[Ae]==null&&delete Ne[Ae];me=ni({},oe,{params:b(Ne)}),xe.params=b(xe.params)}const je=t.resolve(me,xe),qe=oe.hash||"";je.params=w(E(je.params));const J=G4(r,ni({},oe,{hash:z4(qe),path:je.path})),te=o.createHref(J);return ni({fullPath:J,hash:qe,query:r===P0?x5(oe.query):oe.query||{}},je,{redirectedFrom:void 0,href:te})}function Q(oe){return typeof oe=="string"?Bf(n,oe,m.value.path):ni({},oe)}function ie(oe,xe){if(_!==oe)return Ru(8,{from:xe,to:oe})}function ye(oe){return Ee(oe)}function we(oe){return ye(ni(Q(oe),{replace:!0}))}function Pe(oe){const xe=oe.matched[oe.matched.length-1];if(xe&&xe.redirect){const{redirect:me}=xe;let je=typeof me=="function"?me(oe):me;return typeof je=="string"&&(je=je.includes("?")||je.includes("#")?je=Q(je):{path:je},je.params={}),ni({query:oe.query,hash:oe.hash,params:je.path!=null?{}:oe.params},je)}}function Ee(oe,xe){const me=_=j(oe),je=m.value,qe=oe.state,J=oe.force,te=oe.replace===!0,Ne=Pe(me);if(Ne)return Ee(ni(Q(Ne),{state:typeof Ne=="object"?ni({},qe,Ne.state):qe,force:J,replace:te}),xe||me);const Ae=me;Ae.redirectedFrom=xe;let ee;return!J&&W4(r,je,me)&&(ee=Ru(16,{to:Ae,from:je}),ge(je,je,!0,!1)),(ee?Promise.resolve(ee):$e(Ae,je)).catch(We=>ja(We)?ja(We,2)?We:A(We):W(We,Ae,je)).then(We=>{if(We){if(ja(We,2))return Ee(ni({replace:te},Q(We.to),{state:typeof We.to=="object"?ni({},qe,We.to.state):qe,force:J}),xe||Ae)}else We=$(Ae,je,!0,te,qe);return q(Ae,je,We),We})}function fe(oe,xe){const me=ie(oe,xe);return me?Promise.reject(me):Promise.resolve()}function Te(oe){const xe=se.values().next().value;return xe&&typeof xe.runWithContext=="function"?xe.runWithContext(oe):oe()}function $e(oe,xe){let me;const[je,qe,J]=M5(oe,xe);me=Tf(je.reverse(),"beforeRouteLeave",oe,xe);for(const Ne of je)Ne.leaveGuards.forEach(Ae=>{me.push(yl(Ae,oe,xe))});const te=fe.bind(null,oe,xe);return me.push(te),pe(me).then(()=>{me=[];for(const Ne of a.list())me.push(yl(Ne,oe,xe));return me.push(te),pe(me)}).then(()=>{me=Tf(qe,"beforeRouteUpdate",oe,xe);for(const Ne of qe)Ne.updateGuards.forEach(Ae=>{me.push(yl(Ae,oe,xe))});return me.push(te),pe(me)}).then(()=>{me=[];for(const Ne of J)if(Ne.beforeEnter)if(Vo(Ne.beforeEnter))for(const Ae of Ne.beforeEnter)me.push(yl(Ae,oe,xe));else me.push(yl(Ne.beforeEnter,oe,xe));return me.push(te),pe(me)}).then(()=>(oe.matched.forEach(Ne=>Ne.enterCallbacks={}),me=Tf(J,"beforeRouteEnter",oe,xe,Te),me.push(te),pe(me))).then(()=>{me=[];for(const Ne of u.list())me.push(yl(Ne,oe,xe));return me.push(te),pe(me)}).catch(Ne=>ja(Ne,8)?Ne:Promise.reject(Ne))}function q(oe,xe,me){f.list().forEach(je=>Te(()=>je(oe,xe,me)))}function $(oe,xe,me,je,qe){const J=ie(oe,xe);if(J)return J;const te=xe===fl,Ne=wu?history.state:{};me&&(je||te?o.replace(oe.fullPath,ni({scroll:te&&Ne&&Ne.scroll},qe)):o.push(oe.fullPath,qe)),m.value=oe,ge(oe,xe,me,te),A()}let Se;function B(){Se||(Se=o.listen((oe,xe,me)=>{if(!ce.listening)return;const je=j(oe),qe=Pe(je);if(qe){Ee(ni(qe,{replace:!0,force:!0}),je).catch(hc);return}_=je;const J=m.value;wu&&t5(v0(J.fullPath,me.delta),Xh()),$e(je,J).catch(te=>ja(te,12)?te:ja(te,2)?(Ee(ni(Q(te.to),{force:!0}),je).then(Ne=>{ja(Ne,20)&&!me.delta&&me.type===Lc.pop&&o.go(-1,!1)}).catch(hc),Promise.reject()):(me.delta&&o.go(-me.delta,!1),W(te,je,J))).then(te=>{te=te||$(je,J,!1),te&&(me.delta&&!ja(te,8)?o.go(-me.delta,!1):me.type===Lc.pop&&ja(te,20)&&o.go(-1,!1)),q(je,J,te)}).catch(hc)}))}let K=Ju(),H=Ju(),ne;function W(oe,xe,me){A(oe);const je=H.list();return je.length?je.forEach(qe=>qe(oe,xe,me)):console.error(oe),Promise.reject(oe)}function z(){return ne&&m.value!==fl?Promise.resolve():new Promise((oe,xe)=>{K.add([oe,xe])})}function A(oe){return ne||(ne=!oe,B(),K.list().forEach(([xe,me])=>oe?me(oe):xe()),K.reset()),oe}function ge(oe,xe,me,je){const{scrollBehavior:qe}=e;if(!wu||!qe)return Promise.resolve();const J=!me&&n5(v0(oe.fullPath,0))||(je||!me)&&history.state&&history.state.scroll||null;return ls().then(()=>qe(oe,xe,J)).then(te=>te&&e5(te)).catch(te=>W(te,oe,xe))}const I=oe=>o.go(oe);let G;const se=new Set,ce={currentRoute:m,listening:!0,addRoute:x,removeRoute:F,clearRoutes:t.clearRoutes,hasRoute:U,getRoutes:D,resolve:j,options:e,push:ye,replace:we,go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:a.add,beforeResolve:u.add,afterEach:f.add,onError:H.add,isReady:z,install(oe){const xe=this;oe.component("RouterLink",xu),oe.component("RouterView",b1),oe.config.globalProperties.$router=xe,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>Dn(m)}),wu&&!G&&m.value===fl&&(G=!0,ye(o.location).catch(qe=>{}));const me={};for(const qe in fl)Object.defineProperty(me,qe,{get:()=>m.value[qe],enumerable:!0});oe.provide(Qh,xe),oe.provide(Xd,qm(me)),oe.provide(pd,m);const je=oe.unmount;se.add(oe),oe.unmount=function(){se.delete(oe),se.size<1&&(_=fl,Se&&Se(),Se=null,m.value=fl,G=!1,ne=!1),je()}}};function pe(oe){return oe.reduce((xe,me)=>xe.then(()=>Te(me)),Promise.resolve())}return ce}function M5(e,t){const n=[],r=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let u=0;u<a;u++){const f=t.matched[u];f&&(e.matched.find(_=>Ou(_,f))?r.push(f):n.push(f));const m=e.matched[u];m&&(t.matched.find(_=>Ou(_,m))||o.push(m))}return[n,r,o]}function Nc(){return _o(Qh)}function IS(e){return _o(Xd)}var go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function B5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var x1=B5,T5=typeof go=="object"&&go&&go.Object===Object&&go,N5=T5,D5=N5,O5=typeof self=="object"&&self&&self.Object===Object&&self,R5=D5||O5||Function("return this")(),L1=R5,I5=L1,F5=function(){return I5.Date.now()},j5=F5,z5=/\s/;function U5(e){for(var t=e.length;t--&&z5.test(e.charAt(t)););return t}var q5=U5,$5=q5,V5=/^\s+/;function H5(e){return e&&e.slice(0,$5(e)+1).replace(V5,"")}var G5=H5,W5=L1,Z5=W5.Symbol,C1=Z5,T0=C1,k1=Object.prototype,K5=k1.hasOwnProperty,J5=k1.toString,Yu=T0?T0.toStringTag:void 0;function Y5(e){var t=K5.call(e,Yu),n=e[Yu];try{e[Yu]=void 0;var r=!0}catch{}var o=J5.call(e);return r&&(t?e[Yu]=n:delete e[Yu]),o}var X5=Y5,Q5=Object.prototype,eb=Q5.toString;function tb(e){return eb.call(e)}var nb=tb,N0=C1,ib=X5,rb=nb,sb="[object Null]",ob="[object Undefined]",D0=N0?N0.toStringTag:void 0;function ab(e){return e==null?e===void 0?ob:sb:D0&&D0 in Object(e)?ib(e):rb(e)}var lb=ab;function ub(e){return e!=null&&typeof e=="object"}var cb=ub,hb=lb,fb=cb,db="[object Symbol]";function pb(e){return typeof e=="symbol"||fb(e)&&hb(e)==db}var mb=pb,gb=G5,O0=x1,vb=mb,R0=NaN,_b=/^[-+]0x[0-9a-f]+$/i,yb=/^0b[01]+$/i,bb=/^0o[0-7]+$/i,wb=parseInt;function xb(e){if(typeof e=="number")return e;if(vb(e))return R0;if(O0(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=O0(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=gb(e);var n=yb.test(e);return n||bb.test(e)?wb(e.slice(2),n?2:8):_b.test(e)?R0:+e}var Lb=xb,Cb=x1,Nf=j5,I0=Lb,kb="Expected a function",Pb=Math.max,Sb=Math.min;function Eb(e,t,n){var r,o,a,u,f,m,_=0,w=!1,b=!1,E=!0;if(typeof e!="function")throw new TypeError(kb);t=I0(t)||0,Cb(n)&&(w=!!n.leading,b="maxWait"in n,a=b?Pb(I0(n.maxWait)||0,t):a,E="trailing"in n?!!n.trailing:E);function x(Pe){var Ee=r,fe=o;return r=o=void 0,_=Pe,u=e.apply(fe,Ee),u}function F(Pe){return _=Pe,f=setTimeout(j,t),w?x(Pe):u}function D(Pe){var Ee=Pe-m,fe=Pe-_,Te=t-Ee;return b?Sb(Te,a-fe):Te}function U(Pe){var Ee=Pe-m,fe=Pe-_;return m===void 0||Ee>=t||Ee<0||b&&fe>=a}function j(){var Pe=Nf();if(U(Pe))return Q(Pe);f=setTimeout(j,D(Pe))}function Q(Pe){return f=void 0,E&&r?x(Pe):(r=o=void 0,u)}function ie(){f!==void 0&&clearTimeout(f),_=0,r=m=o=f=void 0}function ye(){return f===void 0?u:Q(Nf())}function we(){var Pe=Nf(),Ee=U(Pe);if(r=arguments,o=this,m=Pe,Ee){if(f===void 0)return F(m);if(b)return clearTimeout(f),f=setTimeout(j,t),x(m)}return f===void 0&&(f=setTimeout(j,t)),u}return we.cancel=ie,we.flush=ye,we}var Ab=Eb;const Mb=w1(Ab),Bb={class:"relative w-full"},Tb={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},Nb=["onClick"],Db=ps({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=Ft(""),r=Ft([]),o=t,a=Mb(async m=>{if(m.length<3){r.value=[];return}try{const w=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(m)}`)).json();r.value=w}catch(_){console.error("Erreur lors de la recherche d'adresse:",_),r.value=[]}},300);function u(){a(n.value)}function f(m){n.value=m.display_name,r.value=[],o("select-location",{lat:parseFloat(m.lat),lng:parseFloat(m.lon)})}return(m,_)=>(nt(),at("div",Bb,[Pn(M("input",{"onUpdate:modelValue":_[0]||(_[0]=w=>n.value=w),onInput:u,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[ri,n.value]]),r.value.length>0?(nt(),at("div",Tb,[(nt(!0),at(gn,null,Un(r.value,w=>(nt(),at("div",{key:w.place_id,onClick:b=>f(w),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},kt(w.display_name),9,Nb))),128))])):tn("",!0)]))}}),Qd=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},F0=Qd(Db,[["__scopeId","data-v-0102bcad"]]),Ob={class:"h-screen flex flex-col"},Rb={key:0,class:"bg-white shadow-sm z-[2000]"},Ib={class:"mx-auto px-4 sm:px-6 lg:px-8"},Fb={class:"flex h-16 items-center justify-between"},jb={class:"flex items-center space-x-8"},zb={class:"md:inline hidden"},Ub={key:0,class:"inline-flex items-center"},qb={key:1},$b={class:"md:hidden inline"},Vb={key:0,class:"inline-flex items-center"},Hb={key:1},Gb={class:"hidden md:flex space-x-6"},Wb={key:0,class:"hidden md:block flex-1 mx-8"},Zb={key:1,class:"flex-1"},Kb={class:"flex items-center space-x-2 md:space-x-4"},Jb={class:"flex md:hidden"},Yb={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Xb={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Qb={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},e3={class:"relative"},t3={class:"hidden md:flex flex-col items-end"},n3={class:"text-sm font-medium text-gray-700"},i3={key:0,class:"text-xs text-gray-500"},r3=["src","alt"],s3={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},o3={class:"md:hidden px-4 py-2 border-b border-gray-100"},a3={class:"text-sm font-medium text-gray-700"},l3={class:"text-xs text-gray-500"},u3={key:0,class:"md:hidden"},c3={class:"space-y-1 px-2 pb-3 pt-2"},h3={key:0,class:"px-4 py-3"},f3={class:"flex-1 overflow-auto"},d3={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},p3=ps({__name:"App",setup(e){const t=Nc(),n=ds(),r=Ft(!1),o=Ft(!1),a=Ft(!1),u=Ft(!1);function f(){a.value=window.innerWidth<768}ba(()=>{f(),window.addEventListener("resize",f),new URLSearchParams(window.location.search).has("perf")&&(u.value=!0)}),zh(()=>{window.removeEventListener("resize",f)});async function m(){if(u.value)try{await PerformanceTracker.downloadReport()}catch(ye){console.error("Erreur lors du téléchargement du rapport:",ye)}}const _=Nn(()=>{const ye=n.user;if(!ye)return"";const we=`${ye.first_name} ${ye.last_name.toUpperCase()}`;return ye.company_name?`${we} (${ye.company_name})`:we}),w=Nn(()=>{var we;const ye=(we=n.user)==null?void 0:we.user_type;switch(console.log("User type:",ye),ye){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),b=Nn(()=>{var ye;return((ye=n.user)==null?void 0:ye.user_type)==="admin"}),E=Ft(""),x=Nn(()=>n.isAuthenticated),F=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],D=Nn(()=>{var we;if(!x.value)return[];const ye=[...F];return b.value?ye.push({name:"Utilisateurs",to:"/users"}):((we=n.user)==null?void 0:we.user_type)==="dealer"&&ye.push({name:"Clients",to:"/clients"}),ye}),U=Nn(()=>x.value?[{name:"Mon profil",to:"/profile"}]:[]);async function j(){try{await n.logout(),t.push("/login")}catch(ye){console.error("Erreur lors de la déconnexion:",ye)}}function Q(ye){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:ye.lat,lng:ye.lng,zoom:16}}))}ba(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(ye){console.error("Auth check error:",ye),t.push("/login")}});const ie=Nn(()=>{const ye="IrrigationDesign";if(!x.value)return`${ye} - Connexion`;const we=t.currentRoute.value,Ee={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[we.name]||"";return Ee?`${ye} - ${Ee}`:ye});return Yr(ie,ye=>{document.title=ye},{immediate:!0}),(ye,we)=>(nt(),at("div",Ob,[x.value?(nt(),at("header",Rb,[M("nav",Ib,[M("div",Fb,[M("div",jb,[Pi(Dn(xu),{to:"/",class:Ni(["text-xl font-semibold text-primary-600 truncate",{"cursor-download":u.value}]),onClick:we[0]||(we[0]=Mc(Pe=>u.value?m():ye.$router.push("/"),["prevent"]))},{default:Ha(()=>[M("span",zb,[u.value?(nt(),at("span",Ub,we[5]||(we[5]=[ki(" IrrigationDesign "),M("span",{class:"ml-1 bg-red-100 text-red-800 text-xs px-1.5 py-0.5 rounded-full"},"PERF",-1)]))):(nt(),at("span",qb,"IrrigationDesign"))]),M("span",$b,[u.value?(nt(),at("span",Vb,we[6]||(we[6]=[ki(" ID "),M("span",{class:"ml-1 bg-red-100 text-red-800 text-xs px-1 py-0.5 rounded-full"},"PERF",-1)]))):(nt(),at("span",Hb,"ID"))])]),_:1},8,["class"]),M("div",Gb,[(nt(!0),at(gn,null,Un(D.value,Pe=>(nt(),ma(Dn(xu),{key:Pe.name,to:Pe.to,class:Ni(["text-sm font-medium transition-colors duration-200",[ye.$route.path===Pe.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Ha(()=>[ki(kt(Pe.name),1)]),_:2},1032,["to","class"]))),128))])]),ye.$route.path==="/"?(nt(),at("div",Wb,[Pi(F0,{onSelectLocation:Q})])):(nt(),at("div",Zb)),M("div",Kb,[M("div",Jb,[M("button",{onClick:we[1]||(we[1]=Pe=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[we[7]||(we[7]=M("span",{class:"sr-only"},"Ouvrir le menu",-1)),(nt(),at("svg",Yb,[o.value?(nt(),at("path",Qb)):(nt(),at("path",Xb))]))])]),we[8]||(we[8]=M("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[M("span",{class:"sr-only"},"Voir les notifications"),M("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),M("div",e3,[M("button",{onClick:we[2]||(we[2]=Pe=>r.value=!r.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[M("div",t3,[M("span",n3,kt(_.value),1),w.value?(nt(),at("span",i3,kt(w.value),1)):tn("",!0)]),M("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:E.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(_.value),alt:_.value},null,8,r3)]),r.value?(nt(),at("div",s3,[M("div",o3,[M("div",a3,kt(_.value),1),M("div",l3,kt(w.value),1)]),(nt(!0),at(gn,null,Un(U.value,Pe=>(nt(),ma(Dn(xu),{key:Pe.name,to:Pe.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:we[3]||(we[3]=Ee=>r.value=!1)},{default:Ha(()=>[ki(kt(Pe.name),1)]),_:2},1032,["to"]))),128)),M("button",{onClick:j,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):tn("",!0)])])]),o.value?(nt(),at("div",u3,[M("div",c3,[(nt(!0),at(gn,null,Un(D.value,Pe=>(nt(),ma(Dn(xu),{key:Pe.name,to:Pe.to,class:Ni(["block px-3 py-2 rounded-md text-base font-medium",[ye.$route.path===Pe.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:we[4]||(we[4]=Ee=>o.value=!1)},{default:Ha(()=>[ki(kt(Pe.name),1)]),_:2},1032,["to","class"]))),128))]),ye.$route.path==="/"?(nt(),at("div",h3,[Pi(F0,{onSelectLocation:Q})])):tn("",!0)])):tn("",!0)])])):tn("",!0),M("main",f3,[a.value&&ye.$route.path==="/"?(nt(),at("div",d3,[we[10]||(we[10]=M("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),we[11]||(we[11]=M("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommandée ",-1)),we[12]||(we[12]=M("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure expérience de conception d'irrigation, nous vous recommandons d'utiliser un écran plus large ou un ordinateur. ",-1)),Pi(Dn(xu),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Ha(()=>we[9]||(we[9]=[ki(" Voir mes plans ")])),_:1})])):(nt(),ma(Dn(b1),{key:1}))])]))}}),m3="modulepreload",g3=function(e){return"/static/frontend/"+e},j0={},Jl=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(n.map(m=>{if(m=g3(m),m in j0)return;j0[m]=!0;const _=m.endsWith(".css"),w=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${w}`))return;const b=document.createElement("link");if(b.rel=_?"stylesheet":m3,_||(b.as="script"),b.crossOrigin="",b.href=m,f&&b.setAttribute("nonce",f),document.head.appendChild(b),_)return new Promise((E,x)=>{b.addEventListener("load",E),b.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return t().catch(a)})},v3={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},_3={class:"max-w-md w-full space-y-8"},y3={class:"space-y-4"},b3={class:"mt-1"},w3={class:"mt-1"},x3={class:"mt-1"},L3={key:0,class:"rounded-md bg-red-50 p-4"},C3={class:"flex"},k3={class:"ml-3"},P3={class:"text-sm font-medium text-red-800"},S3={key:1,class:"rounded-md bg-yellow-50 p-4"},E3={class:"flex"},A3={class:"ml-3"},M3={class:"mt-2 text-sm text-yellow-700"},B3={class:"list-disc pl-5 space-y-1"},T3=["disabled"],N3={class:"absolute left-0 inset-y-0 flex items-center pl-3"},D3={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},O3={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},R3=ps({__name:"ChangePasswordForm",setup(e){const t=Nc(),n=ds(),r=Wa({oldPassword:"",newPassword:"",confirmPassword:""}),o=Ft(!1),a=Ft("");ba(()=>{var _,w;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(_=n.user)==null?void 0:_.id,mustChangePassword:(w=n.user)==null?void 0:w.must_change_password})});const u=Nn(()=>{const _=[];return r.newPassword&&r.newPassword.length<8&&_.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&_.push("Les mots de passe ne correspondent pas"),_}),f=Nn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function m(){var _,w,b,E,x,F,D,U;if(!f.value){a.value="Veuillez corriger les erreurs avant de continuer";return}if(!((_=n.user)!=null&&_.id)){a.value="Erreur : utilisateur non identifié";return}o.value=!0,a.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),t.push("/")}catch(j){console.error("Password change failed:",j),(b=(w=j.response)==null?void 0:w.data)!=null&&b.detail?a.value=j.response.data.detail:(x=(E=j.response)==null?void 0:E.data)!=null&&x.old_password?a.value=j.response.data.old_password[0]:(D=(F=j.response)==null?void 0:F.data)!=null&&D.password?a.value=j.response.data.password[0]:((U=j.response)==null?void 0:U.status)===401?(a.value="Session expirée, veuillez vous reconnecter",await n.logout(),t.push("/login")):a.value="Une erreur est survenue lors du changement de mot de passe"}finally{o.value=!1}}return(_,w)=>(nt(),at("div",v3,[M("div",_3,[w[12]||(w[12]=M("div",null,[M("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),M("form",{class:"mt-8 space-y-6",onSubmit:Mc(m,["prevent"])},[M("div",y3,[M("div",null,[w[3]||(w[3]=M("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),M("div",b3,[Pn(M("input",{id:"old-password","onUpdate:modelValue":w[0]||(w[0]=b=>r.oldPassword=b),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[ri,r.oldPassword]])])]),M("div",null,[w[4]||(w[4]=M("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),M("div",w3,[Pn(M("input",{id:"new-password","onUpdate:modelValue":w[1]||(w[1]=b=>r.newPassword=b),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[ri,r.newPassword]])]),w[5]||(w[5]=M("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),M("div",null,[w[6]||(w[6]=M("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),M("div",x3,[Pn(M("input",{id:"confirm-password","onUpdate:modelValue":w[2]||(w[2]=b=>r.confirmPassword=b),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[ri,r.confirmPassword]])])])]),a.value?(nt(),at("div",L3,[M("div",C3,[w[7]||(w[7]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",k3,[M("h3",P3,kt(a.value),1)])])])):tn("",!0),u.value.length>0?(nt(),at("div",S3,[M("div",E3,[w[9]||(w[9]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),M("div",A3,[w[8]||(w[8]=M("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),M("div",M3,[M("ul",B3,[(nt(!0),at(gn,null,Un(u.value,(b,E)=>(nt(),at("li",{key:E},kt(b),1))),128))])])])])])):tn("",!0),M("div",null,[M("button",{type:"submit",disabled:o.value||!f.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[M("span",N3,[o.value?(nt(),at("svg",O3,w[11]||(w[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(nt(),at("svg",D3,w[10]||(w[10]=[M("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),ki(" "+kt(o.value?"Modification en cours...":"Changer le mot de passe"),1)],8,T3)])],32)])]))}}),I3="/static/frontend/assets/logo.svg",F3={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},j3={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},z3={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},U3={key:0,class:"rounded-md bg-red-50 p-4"},q3={class:"flex"},$3={class:"ml-3"},V3={class:"text-sm font-medium text-red-800"},H3={class:"mt-1"},G3={class:"mt-1 relative"},W3=["type"],Z3={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K3={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J3={class:"flex items-center justify-between"},Y3={class:"flex items-center"},X3={class:"text-sm"},Q3=["disabled"],ew={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tw=ps({__name:"LoginView",setup(e){const t=Nc(),n=ds(),r=Ft(!1),o=Ft(null),a=Ft(!1),u=Wa({username:"",password:"",rememberMe:!1});ba(()=>{var m;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(m=window.INITIAL_STATE)!=null&&m.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),t.push("/"))});async function f(){var m,_,w,b,E,x;r.value=!0,o.value=null;try{if(!u.username||!u.password){o.value="Veuillez remplir tous les champs";return}await n.login(u.username,u.password),(m=n.user)!=null&&m.must_change_password?t.push("/change-password"):t.push("/")}catch(F){console.error("Login error:",F),o.value=((w=(_=F==null?void 0:F.response)==null?void 0:_.data)==null?void 0:w.detail)||((x=(E=(b=F==null?void 0:F.response)==null?void 0:b.data)==null?void 0:E.non_field_errors)==null?void 0:x[0])||(F==null?void 0:F.message)||"Erreur lors de la connexion"}finally{r.value=!1}}return(m,_)=>{const w=b_("router-link");return nt(),at("div",F3,[_[12]||(_[12]=M("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[M("img",{src:I3,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),M("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),M("div",j3,[M("div",z3,[M("form",{class:"space-y-6",onSubmit:Mc(f,["prevent"])},[o.value?(nt(),at("div",U3,[M("div",q3,[_[4]||(_[4]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",$3,[M("h3",V3,kt(o.value),1)])])])):tn("",!0),M("div",null,[_[5]||(_[5]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),M("div",H3,[Pn(M("input",{id:"username","onUpdate:modelValue":_[0]||(_[0]=b=>u.username=b),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[ri,u.username]])])]),M("div",null,[_[8]||(_[8]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),M("div",G3,[Pn(M("input",{id:"password","onUpdate:modelValue":_[1]||(_[1]=b=>u.password=b),type:a.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,W3),[[Fy,u.password]]),M("button",{type:"button",onClick:_[2]||(_[2]=b=>a.value=!a.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[a.value?(nt(),at("svg",Z3,_[6]||(_[6]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(nt(),at("svg",K3,_[7]||(_[7]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),M("div",J3,[M("div",Y3,[Pn(M("input",{id:"remember-me","onUpdate:modelValue":_[3]||(_[3]=b=>u.rememberMe=b),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Mg,u.rememberMe]]),_[9]||(_[9]=M("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),M("div",X3,[Pi(w,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Ha(()=>_[10]||(_[10]=[ki(" Mot de passe oublié ? ")])),_:1})])]),M("div",null,[M("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(nt(),at("svg",ew,_[11]||(_[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),ki(" "+kt(r.value?"Connexion en cours...":"Se connecter"),1)],8,Q3)])],32)])])])}}}),z0="/static/frontend/assets/logo.jpeg";var md={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(go,function(n){var r="1.9.4";function o(i){var c,g,P,R;for(g=1,P=arguments.length;g<P;g++){R=arguments[g];for(c in R)i[c]=R[c]}return i}var a=Object.create||function(){function i(){}return function(c){return i.prototype=c,new i}}();function u(i,c){var g=Array.prototype.slice;if(i.bind)return i.bind.apply(i,g.call(arguments,1));var P=g.call(arguments,2);return function(){return i.apply(c,P.length?P.concat(g.call(arguments)):arguments)}}var f=0;function m(i){return"_leaflet_id"in i||(i._leaflet_id=++f),i._leaflet_id}function _(i,c,g){var P,R,ue,Ue;return Ue=function(){P=!1,R&&(ue.apply(g,R),R=!1)},ue=function(){P?R=arguments:(i.apply(g,arguments),setTimeout(Ue,c),P=!0)},ue}function w(i,c,g){var P=c[1],R=c[0],ue=P-R;return i===P&&g?i:((i-R)%ue+ue)%ue+R}function b(){return!1}function E(i,c){if(c===!1)return i;var g=Math.pow(10,c===void 0?6:c);return Math.round(i*g)/g}function x(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function F(i){return x(i).split(/\s+/)}function D(i,c){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var g in c)i.options[g]=c[g];return i.options}function U(i,c,g){var P=[];for(var R in i)P.push(encodeURIComponent(g?R.toUpperCase():R)+"="+encodeURIComponent(i[R]));return(!c||c.indexOf("?")===-1?"?":"&")+P.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function Q(i,c){return i.replace(j,function(g,P){var R=c[P];if(R===void 0)throw new Error("No value provided for variable "+g);return typeof R=="function"&&(R=R(c)),R})}var ie=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function ye(i,c){for(var g=0;g<i.length;g++)if(i[g]===c)return g;return-1}var we="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Pe(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var Ee=0;function fe(i){var c=+new Date,g=Math.max(0,16-(c-Ee));return Ee=c+g,window.setTimeout(i,g)}var Te=window.requestAnimationFrame||Pe("RequestAnimationFrame")||fe,$e=window.cancelAnimationFrame||Pe("CancelAnimationFrame")||Pe("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function q(i,c,g){if(g&&Te===fe)i.call(c);else return Te.call(window,u(i,c))}function $(i){i&&$e.call(window,i)}var Se={__proto__:null,extend:o,create:a,bind:u,get lastId(){return f},stamp:m,throttle:_,wrapNum:w,falseFn:b,formatNum:E,trim:x,splitWords:F,setOptions:D,getParamString:U,template:Q,isArray:ie,indexOf:ye,emptyImageUrl:we,requestFn:Te,cancelFn:$e,requestAnimFrame:q,cancelAnimFrame:$};function B(){}B.extend=function(i){var c=function(){D(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=c.__super__=this.prototype,P=a(g);P.constructor=c,c.prototype=P;for(var R in this)Object.prototype.hasOwnProperty.call(this,R)&&R!=="prototype"&&R!=="__super__"&&(c[R]=this[R]);return i.statics&&o(c,i.statics),i.includes&&(K(i.includes),o.apply(null,[P].concat(i.includes))),o(P,i),delete P.statics,delete P.includes,P.options&&(P.options=g.options?a(g.options):{},o(P.options,i.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var ue=0,Ue=P._initHooks.length;ue<Ue;ue++)P._initHooks[ue].call(this)}},c},B.include=function(i){var c=this.prototype.options;return o(this.prototype,i),i.options&&(this.prototype.options=c,this.mergeOptions(i.options)),this},B.mergeOptions=function(i){return o(this.prototype.options,i),this},B.addInitHook=function(i){var c=Array.prototype.slice.call(arguments,1),g=typeof i=="function"?i:function(){this[i].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function K(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=ie(i)?i:[i];for(var c=0;c<i.length;c++)i[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(i,c,g){if(typeof i=="object")for(var P in i)this._on(P,i[P],c);else{i=F(i);for(var R=0,ue=i.length;R<ue;R++)this._on(i[R],c,g)}return this},off:function(i,c,g){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var P in i)this._off(P,i[P],c);else{i=F(i);for(var R=arguments.length===1,ue=0,Ue=i.length;ue<Ue;ue++)R?this._off(i[ue]):this._off(i[ue],c,g)}return this},_on:function(i,c,g,P){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(i,c,g)===!1){g===this&&(g=void 0);var R={fn:c,ctx:g};P&&(R.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(R)}},_off:function(i,c,g){var P,R,ue;if(this._events&&(P=this._events[i],!!P)){if(arguments.length===1){if(this._firingCount)for(R=0,ue=P.length;R<ue;R++)P[R].fn=b;delete this._events[i];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var Ue=this._listens(i,c,g);if(Ue!==!1){var ft=P[Ue];this._firingCount&&(ft.fn=b,this._events[i]=P=P.slice()),P.splice(Ue,1)}}},fire:function(i,c,g){if(!this.listens(i,g))return this;var P=o({},c,{type:i,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var R=this._events[i];if(R){this._firingCount=this._firingCount+1||1;for(var ue=0,Ue=R.length;ue<Ue;ue++){var ft=R[ue],_t=ft.fn;ft.once&&this.off(i,_t,ft.ctx),_t.call(ft.ctx||this,P)}this._firingCount--}}return g&&this._propagateEvent(P),this},listens:function(i,c,g,P){typeof i!="string"&&console.warn('"string" type argument expected');var R=c;typeof c!="function"&&(P=!!c,R=void 0,g=void 0);var ue=this._events&&this._events[i];if(ue&&ue.length&&this._listens(i,R,g)!==!1)return!0;if(P){for(var Ue in this._eventParents)if(this._eventParents[Ue].listens(i,c,g,P))return!0}return!1},_listens:function(i,c,g){if(!this._events)return!1;var P=this._events[i]||[];if(!c)return!!P.length;g===this&&(g=void 0);for(var R=0,ue=P.length;R<ue;R++)if(P[R].fn===c&&P[R].ctx===g)return R;return!1},once:function(i,c,g){if(typeof i=="object")for(var P in i)this._on(P,i[P],c,!0);else{i=F(i);for(var R=0,ue=i.length;R<ue;R++)this._on(i[R],c,g,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[m(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[m(i)],this},_propagateEvent:function(i){for(var c in this._eventParents)this._eventParents[c].fire(i.type,o({layer:i.target,propagatedFrom:i.target},i),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var ne=B.extend(H);function W(i,c,g){this.x=g?Math.round(i):i,this.y=g?Math.round(c):c}var z=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(i){return this.clone()._add(A(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(A(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new W(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new W(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=z(this.x),this.y=z(this.y),this},distanceTo:function(i){i=A(i);var c=i.x-this.x,g=i.y-this.y;return Math.sqrt(c*c+g*g)},equals:function(i){return i=A(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=A(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function A(i,c,g){return i instanceof W?i:ie(i)?new W(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new W(i.x,i.y):new W(i,c,g)}function ge(i,c){if(i)for(var g=c?[i,c]:i,P=0,R=g.length;P<R;P++)this.extend(g[P])}ge.prototype={extend:function(i){var c,g;if(!i)return this;if(i instanceof W||typeof i[0]=="number"||"x"in i)c=g=A(i);else if(i=I(i),c=i.min,g=i.max,!c||!g)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=g.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(i){return A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return A(this.min.x,this.max.y)},getTopRight:function(){return A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var c,g;return typeof i[0]=="number"||i instanceof W?i=A(i):i=I(i),i instanceof ge?(c=i.min,g=i.max):c=g=i,c.x>=this.min.x&&g.x<=this.max.x&&c.y>=this.min.y&&g.y<=this.max.y},intersects:function(i){i=I(i);var c=this.min,g=this.max,P=i.min,R=i.max,ue=R.x>=c.x&&P.x<=g.x,Ue=R.y>=c.y&&P.y<=g.y;return ue&&Ue},overlaps:function(i){i=I(i);var c=this.min,g=this.max,P=i.min,R=i.max,ue=R.x>c.x&&P.x<g.x,Ue=R.y>c.y&&P.y<g.y;return ue&&Ue},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var c=this.min,g=this.max,P=Math.abs(c.x-g.x)*i,R=Math.abs(c.y-g.y)*i;return I(A(c.x-P,c.y-R),A(g.x+P,g.y+R))},equals:function(i){return i?(i=I(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function I(i,c){return!i||i instanceof ge?i:new ge(i,c)}function G(i,c){if(i)for(var g=c?[i,c]:i,P=0,R=g.length;P<R;P++)this.extend(g[P])}G.prototype={extend:function(i){var c=this._southWest,g=this._northEast,P,R;if(i instanceof ce)P=i,R=i;else if(i instanceof G){if(P=i._southWest,R=i._northEast,!P||!R)return this}else return i?this.extend(pe(i)||se(i)):this;return!c&&!g?(this._southWest=new ce(P.lat,P.lng),this._northEast=new ce(R.lat,R.lng)):(c.lat=Math.min(P.lat,c.lat),c.lng=Math.min(P.lng,c.lng),g.lat=Math.max(R.lat,g.lat),g.lng=Math.max(R.lng,g.lng)),this},pad:function(i){var c=this._southWest,g=this._northEast,P=Math.abs(c.lat-g.lat)*i,R=Math.abs(c.lng-g.lng)*i;return new G(new ce(c.lat-P,c.lng-R),new ce(g.lat+P,g.lng+R))},getCenter:function(){return new ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof ce||"lat"in i?i=pe(i):i=se(i);var c=this._southWest,g=this._northEast,P,R;return i instanceof G?(P=i.getSouthWest(),R=i.getNorthEast()):P=R=i,P.lat>=c.lat&&R.lat<=g.lat&&P.lng>=c.lng&&R.lng<=g.lng},intersects:function(i){i=se(i);var c=this._southWest,g=this._northEast,P=i.getSouthWest(),R=i.getNorthEast(),ue=R.lat>=c.lat&&P.lat<=g.lat,Ue=R.lng>=c.lng&&P.lng<=g.lng;return ue&&Ue},overlaps:function(i){i=se(i);var c=this._southWest,g=this._northEast,P=i.getSouthWest(),R=i.getNorthEast(),ue=R.lat>c.lat&&P.lat<g.lat,Ue=R.lng>c.lng&&P.lng<g.lng;return ue&&Ue},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,c){return i?(i=se(i),this._southWest.equals(i.getSouthWest(),c)&&this._northEast.equals(i.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(i,c){return i instanceof G?i:new G(i,c)}function ce(i,c,g){if(isNaN(i)||isNaN(c))throw new Error("Invalid LatLng object: ("+i+", "+c+")");this.lat=+i,this.lng=+c,g!==void 0&&(this.alt=+g)}ce.prototype={equals:function(i,c){if(!i)return!1;i=pe(i);var g=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return g<=(c===void 0?1e-9:c)},toString:function(i){return"LatLng("+E(this.lat,i)+", "+E(this.lng,i)+")"},distanceTo:function(i){return xe.distance(this,pe(i))},wrap:function(){return xe.wrapLatLng(this)},toBounds:function(i){var c=180*i/40075017,g=c/Math.cos(Math.PI/180*this.lat);return se([this.lat-c,this.lng-g],[this.lat+c,this.lng+g])},clone:function(){return new ce(this.lat,this.lng,this.alt)}};function pe(i,c,g){return i instanceof ce?i:ie(i)&&typeof i[0]!="object"?i.length===3?new ce(i[0],i[1],i[2]):i.length===2?new ce(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new ce(i.lat,"lng"in i?i.lng:i.lon,i.alt):c===void 0?null:new ce(i,c,g)}var oe={latLngToPoint:function(i,c){var g=this.projection.project(i),P=this.scale(c);return this.transformation._transform(g,P)},pointToLatLng:function(i,c){var g=this.scale(c),P=this.transformation.untransform(i,g);return this.projection.unproject(P)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var c=this.projection.bounds,g=this.scale(i),P=this.transformation.transform(c.min,g),R=this.transformation.transform(c.max,g);return new ge(P,R)},infinite:!1,wrapLatLng:function(i){var c=this.wrapLng?w(i.lng,this.wrapLng,!0):i.lng,g=this.wrapLat?w(i.lat,this.wrapLat,!0):i.lat,P=i.alt;return new ce(g,c,P)},wrapLatLngBounds:function(i){var c=i.getCenter(),g=this.wrapLatLng(c),P=c.lat-g.lat,R=c.lng-g.lng;if(P===0&&R===0)return i;var ue=i.getSouthWest(),Ue=i.getNorthEast(),ft=new ce(ue.lat-P,ue.lng-R),_t=new ce(Ue.lat-P,Ue.lng-R);return new G(ft,_t)}},xe=o({},oe,{wrapLng:[-180,180],R:6371e3,distance:function(i,c){var g=Math.PI/180,P=i.lat*g,R=c.lat*g,ue=Math.sin((c.lat-i.lat)*g/2),Ue=Math.sin((c.lng-i.lng)*g/2),ft=ue*ue+Math.cos(P)*Math.cos(R)*Ue*Ue,_t=2*Math.atan2(Math.sqrt(ft),Math.sqrt(1-ft));return this.R*_t}}),me=6378137,je={R:me,MAX_LATITUDE:85.0511287798,project:function(i){var c=Math.PI/180,g=this.MAX_LATITUDE,P=Math.max(Math.min(g,i.lat),-g),R=Math.sin(P*c);return new W(this.R*i.lng*c,this.R*Math.log((1+R)/(1-R))/2)},unproject:function(i){var c=180/Math.PI;return new ce((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*c,i.x*c/this.R)},bounds:function(){var i=me*Math.PI;return new ge([-i,-i],[i,i])}()};function qe(i,c,g,P){if(ie(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=c,this._c=g,this._d=P}qe.prototype={transform:function(i,c){return this._transform(i.clone(),c)},_transform:function(i,c){return c=c||1,i.x=c*(this._a*i.x+this._b),i.y=c*(this._c*i.y+this._d),i},untransform:function(i,c){return c=c||1,new W((i.x/c-this._b)/this._a,(i.y/c-this._d)/this._c)}};function J(i,c,g,P){return new qe(i,c,g,P)}var te=o({},xe,{code:"EPSG:3857",projection:je,transformation:function(){var i=.5/(Math.PI*je.R);return J(i,.5,-i,.5)}()}),Ne=o({},te,{code:"EPSG:900913"});function Ae(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function ee(i,c){var g="",P,R,ue,Ue,ft,_t;for(P=0,ue=i.length;P<ue;P++){for(ft=i[P],R=0,Ue=ft.length;R<Ue;R++)_t=ft[R],g+=(R?"L":"M")+_t.x+" "+_t.y;g+=c?Ht.svg?"z":"x":""}return g||"M0 0"}var We=document.documentElement.style,et="ActiveXObject"in window,Xe=et&&!document.addEventListener,Oe="msLaunchUri"in navigator&&!("documentMode"in document),ke=Vn("webkit"),lt=Vn("android"),ht=Vn("android 2")||Vn("android 3"),it=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Fe=lt&&Vn("Google")&&it<537&&!("AudioNode"in window),Pt=!!window.opera,It=!Oe&&Vn("chrome"),Wt=Vn("gecko")&&!ke&&!Pt&&!et,Ut=!It&&Vn("safari"),Xt=Vn("phantom"),Rt="OTransition"in We,on=navigator.platform.indexOf("Win")===0,dn=et&&"transition"in We,ai="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ht,Ct="MozPerspective"in We,nn=!window.L_DISABLE_3D&&(dn||ai||Ct)&&!Rt&&!Xt,Vt=typeof orientation<"u"||Vn("mobile"),ln=Vt&&ke,li=Vt&&ai,In=!window.PointerEvent&&window.MSPointerEvent,fi=!!(window.PointerEvent||In),xi="ontouchstart"in window||!!window.TouchEvent,Kn=!window.L_NO_TOUCH&&(xi||fi),Tt=Vt&&Pt,Dt=Vt&&Wt,Di=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,qn=function(){var i=!1;try{var c=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",b,c),window.removeEventListener("testPassiveEventSupport",b,c)}catch{}return i}(),ms=function(){return!!document.createElement("canvas").getContext}(),Mr=!!(document.createElementNS&&Ae("svg").createSVGRect),cn=!!Mr&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Xr=!Mr&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var c=i.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),gs=navigator.platform.indexOf("Mac")===0,cr=navigator.platform.indexOf("Linux")===0;function Vn(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ht={ie:et,ielt9:Xe,edge:Oe,webkit:ke,android:lt,android23:ht,androidStock:Fe,opera:Pt,chrome:It,gecko:Wt,safari:Ut,phantom:Xt,opera12:Rt,win:on,ie3d:dn,webkit3d:ai,gecko3d:Ct,any3d:nn,mobile:Vt,mobileWebkit:ln,mobileWebkit3d:li,msPointer:In,pointer:fi,touch:Kn,touchNative:xi,mobileOpera:Tt,mobileGecko:Dt,retina:Di,passiveEvents:qn,canvas:ms,svg:Mr,vml:Xr,inlineSvg:cn,mac:gs,linux:cr},hr=Ht.msPointer?"MSPointerDown":"pointerdown",wo=Ht.msPointer?"MSPointerMove":"pointermove",Qr=Ht.msPointer?"MSPointerUp":"pointerup",Br=Ht.msPointer?"MSPointerCancel":"pointercancel",Lr={touchstart:hr,touchmove:wo,touchend:Qr,touchcancel:Br},Tr={touchstart:Ml,touchmove:Lo,touchend:Lo,touchcancel:Lo},tr={},Cr=!1;function vs(i,c,g){return c==="touchstart"&&Ys(),Tr[c]?(g=Tr[c].bind(this,g),i.addEventListener(Lr[c],g,!1),g):(console.warn("wrong event specified:",c),b)}function xo(i,c,g){if(!Lr[c]){console.warn("wrong event specified:",c);return}i.removeEventListener(Lr[c],g,!1)}function Zo(i){tr[i.pointerId]=i}function Ko(i){tr[i.pointerId]&&(tr[i.pointerId]=i)}function Ds(i){delete tr[i.pointerId]}function Ys(){Cr||(document.addEventListener(hr,Zo,!0),document.addEventListener(wo,Ko,!0),document.addEventListener(Qr,Ds,!0),document.addEventListener(Br,Ds,!0),Cr=!0)}function Lo(i,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var g in tr)c.touches.push(tr[g]);c.changedTouches=[c],i(c)}}function Ml(i,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&vi(c),Lo(i,c)}function Bl(i){var c={},g,P;for(P in i)g=i[P],c[P]=g&&g.bind?g.bind(i):g;return i=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Jo=200;function Ka(i,c){i.addEventListener("dblclick",c);var g=0,P;function R(ue){if(ue.detail!==1){P=ue.detail;return}if(!(ue.pointerType==="mouse"||ue.sourceCapabilities&&!ue.sourceCapabilities.firesTouchEvents)){var Ue=js(ue);if(!(Ue.some(function(_t){return _t instanceof HTMLLabelElement&&_t.attributes.for})&&!Ue.some(function(_t){return _t instanceof HTMLInputElement||_t instanceof HTMLSelectElement}))){var ft=Date.now();ft-g<=Jo?(P++,P===2&&c(Bl(ue))):P=1,g=ft}}}return i.addEventListener("click",R),{dblclick:c,simDblclick:R}}function Tl(i,c){i.removeEventListener("dblclick",c.dblclick),i.removeEventListener("click",c.simDblclick)}var Co=Yo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ko=Yo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),xa=ko==="webkitTransition"||ko==="OTransition"?ko+"End":"transitionend";function Ja(i){return typeof i=="string"?document.getElementById(i):i}function kr(i,c){var g=i.style[c]||i.currentStyle&&i.currentStyle[c];if((!g||g==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(i,null);g=P?P[c]:null}return g==="auto"?null:g}function Fn(i,c,g){var P=document.createElement(i);return P.className=c||"",g&&g.appendChild(P),P}function wn(i){var c=i.parentNode;c&&c.removeChild(i)}function Xs(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Os(i){var c=i.parentNode;c&&c.lastChild!==i&&c.appendChild(i)}function _s(i){var c=i.parentNode;c&&c.firstChild!==i&&c.insertBefore(i,c.firstChild)}function Po(i,c){if(i.classList!==void 0)return i.classList.contains(c);var g=Fi(i);return g.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(g)}function Cn(i,c){if(i.classList!==void 0)for(var g=F(c),P=0,R=g.length;P<R;P++)i.classList.add(g[P]);else if(!Po(i,c)){var ue=Fi(i);Qs(i,(ue?ue+" ":"")+c)}}function zn(i,c){i.classList!==void 0?i.classList.remove(c):Qs(i,x((" "+Fi(i)+" ").replace(" "+c+" "," ")))}function Qs(i,c){i.className.baseVal===void 0?i.className=c:i.className.baseVal=c}function Fi(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Zi(i,c){"opacity"in i.style?i.style.opacity=c:"filter"in i.style&&Ya(i,c)}function Ya(i,c){var g=!1,P="DXImageTransform.Microsoft.Alpha";try{g=i.filters.item(P)}catch{if(c===1)return}c=Math.round(c*100),g?(g.Enabled=c!==100,g.Opacity=c):i.style.filter+=" progid:"+P+"(opacity="+c+")"}function Yo(i){for(var c=document.documentElement.style,g=0;g<i.length;g++)if(i[g]in c)return i[g];return!1}function ys(i,c,g){var P=c||new W(0,0);i.style[Co]=(Ht.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(g?" scale("+g+")":"")}function di(i,c){i._leaflet_pos=c,Ht.any3d?ys(i,c):(i.style.left=c.x+"px",i.style.top=c.y+"px")}function bs(i){return i._leaflet_pos||new W(0,0)}var So,Rs,La;if("onselectstart"in document)So=function(){xn(window,"selectstart",vi)},Rs=function(){On(window,"selectstart",vi)};else{var eo=Yo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);So=function(){if(eo){var i=document.documentElement.style;La=i[eo],i[eo]="none"}},Rs=function(){eo&&(document.documentElement.style[eo]=La,La=void 0)}}function Ca(){xn(window,"dragstart",vi)}function es(){On(window,"dragstart",vi)}var Is,to;function Xo(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Si(),Is=i,to=i.style.outlineStyle,i.style.outlineStyle="none",xn(window,"keydown",Si))}function Si(){Is&&(Is.style.outlineStyle=to,Is=void 0,to=void 0,On(window,"keydown",Si))}function Xa(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Qo(i){var c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}var yn={__proto__:null,TRANSFORM:Co,TRANSITION:ko,TRANSITION_END:xa,get:Ja,getStyle:kr,create:Fn,remove:wn,empty:Xs,toFront:Os,toBack:_s,hasClass:Po,addClass:Cn,removeClass:zn,setClass:Qs,getClass:Fi,setOpacity:Zi,testProp:Yo,setTransform:ys,setPosition:di,getPosition:bs,get disableTextSelection(){return So},get enableTextSelection(){return Rs},disableImageDrag:Ca,enableImageDrag:es,preventOutline:Xo,restoreOutline:Si,getSizedParentNode:Xa,getScale:Qo};function xn(i,c,g,P){if(c&&typeof c=="object")for(var R in c)no(i,R,c[R],g);else{c=F(c);for(var ue=0,Ue=c.length;ue<Ue;ue++)no(i,c[ue],g,P)}return this}var Nr="_leaflet_events";function On(i,c,g,P){if(arguments.length===1)ka(i),delete i[Nr];else if(c&&typeof c=="object")for(var R in c)Dr(i,R,c[R],g);else if(c=F(c),arguments.length===2)ka(i,function(ft){return ye(c,ft)!==-1});else for(var ue=0,Ue=c.length;ue<Ue;ue++)Dr(i,c[ue],g,P);return this}function ka(i,c){for(var g in i[Nr]){var P=g.split(/\d/)[0];(!c||c(P))&&Dr(i,P,null,null,g)}}var ea={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function no(i,c,g,P){var R=c+m(g)+(P?"_"+m(P):"");if(i[Nr]&&i[Nr][R])return this;var ue=function(ft){return g.call(P||i,ft||window.event)},Ue=ue;!Ht.touchNative&&Ht.pointer&&c.indexOf("touch")===0?ue=vs(i,c,ue):Ht.touch&&c==="dblclick"?ue=Ka(i,ue):"addEventListener"in i?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?i.addEventListener(ea[c]||c,ue,Ht.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(ue=function(ft){ft=ft||window.event,io(i,ft)&&Ue(ft)},i.addEventListener(ea[c],ue,!1)):i.addEventListener(c,Ue,!1):i.attachEvent("on"+c,ue),i[Nr]=i[Nr]||{},i[Nr][R]=ue}function Dr(i,c,g,P,R){R=R||c+m(g)+(P?"_"+m(P):"");var ue=i[Nr]&&i[Nr][R];if(!ue)return this;!Ht.touchNative&&Ht.pointer&&c.indexOf("touch")===0?xo(i,c,ue):Ht.touch&&c==="dblclick"?Tl(i,ue):"removeEventListener"in i?i.removeEventListener(ea[c]||c,ue,!1):i.detachEvent("on"+c,ue),i[Nr][R]=null}function Fs(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Pa(i){return no(i,"wheel",Fs),this}function Eo(i){return xn(i,"mousedown touchstart dblclick contextmenu",Fs),i._leaflet_disable_click=!0,this}function vi(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Pr(i){return vi(i),Fs(i),this}function js(i){if(i.composedPath)return i.composedPath();for(var c=[],g=i.target;g;)c.push(g),g=g.parentNode;return c}function Qa(i,c){if(!c)return new W(i.clientX,i.clientY);var g=Qo(c),P=g.boundingClientRect;return new W((i.clientX-P.left)/g.x-c.clientLeft,(i.clientY-P.top)/g.y-c.clientTop)}var Ao=Ht.linux&&Ht.chrome?window.devicePixelRatio:Ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ta(i){return Ht.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Ao:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function io(i,c){var g=c.relatedTarget;if(!g)return!0;try{for(;g&&g!==i;)g=g.parentNode}catch{return!1}return g!==i}var Mo={__proto__:null,on:xn,off:On,stopPropagation:Fs,disableScrollPropagation:Pa,disableClickPropagation:Eo,preventDefault:vi,stop:Pr,getPropagationPath:js,getMousePosition:Qa,getWheelDelta:ta,isExternalTarget:io,addListener:xn,removeListener:On},Sa=ne.extend({run:function(i,c,g,P){this.stop(),this._el=i,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=bs(i),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=q(this._animate,this),this._step()},_step:function(i){var c=+new Date-this._startTime,g=this._duration*1e3;c<g?this._runFrame(this._easeOut(c/g),i):(this._runFrame(1),this._complete())},_runFrame:function(i,c){var g=this._startPos.add(this._offset.multiplyBy(i));c&&g._round(),di(this._el,g),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Bn=ne.extend({options:{crs:te,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,c){c=D(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(pe(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ko&&Ht.any3d&&!Ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),xn(this._proxy,xa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,c,g){if(c=c===void 0?this._zoom:this._limitZoom(c),i=this._limitCenter(pe(i),c,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=o({animate:g.animate},g.zoom),g.pan=o({animate:g.animate,duration:g.duration},g.pan));var P=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,c,g.zoom):this._tryAnimatedPan(i,g.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(i,c,g.pan&&g.pan.noMoveStart),this},setZoom:function(i,c){return this._loaded?this.setView(this.getCenter(),i,{zoom:c}):(this._zoom=i,this)},zoomIn:function(i,c){return i=i||(Ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,c)},zoomOut:function(i,c){return i=i||(Ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,c)},setZoomAround:function(i,c,g){var P=this.getZoomScale(c),R=this.getSize().divideBy(2),ue=i instanceof W?i:this.latLngToContainerPoint(i),Ue=ue.subtract(R).multiplyBy(1-1/P),ft=this.containerPointToLatLng(R.add(Ue));return this.setView(ft,c,{zoom:g})},_getBoundsCenterZoom:function(i,c){c=c||{},i=i.getBounds?i.getBounds():se(i);var g=A(c.paddingTopLeft||c.padding||[0,0]),P=A(c.paddingBottomRight||c.padding||[0,0]),R=this.getBoundsZoom(i,!1,g.add(P));if(R=typeof c.maxZoom=="number"?Math.min(c.maxZoom,R):R,R===1/0)return{center:i.getCenter(),zoom:R};var ue=P.subtract(g).divideBy(2),Ue=this.project(i.getSouthWest(),R),ft=this.project(i.getNorthEast(),R),_t=this.unproject(Ue.add(ft).divideBy(2).add(ue),R);return{center:_t,zoom:R}},fitBounds:function(i,c){if(i=se(i),!i.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(i,c);return this.setView(g.center,g.zoom,c)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,c){return this.setView(i,this._zoom,{pan:c})},panBy:function(i,c){if(i=A(i).round(),c=c||{},!i.x&&!i.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Sa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Cn(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,g,c.duration||.25,c.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,c,g){if(g=g||{},g.animate===!1||!Ht.any3d)return this.setView(i,c,g);this._stop();var P=this.project(this.getCenter()),R=this.project(i),ue=this.getSize(),Ue=this._zoom;i=pe(i),c=c===void 0?Ue:c;var ft=Math.max(ue.x,ue.y),_t=ft*this.getZoomScale(Ue,c),Bt=R.distanceTo(P)||1,Zt=1.42,an=Zt*Zt;function An(Yn){var Qi=Yn?-1:1,Uu=Yn?_t:ft,As=_t*_t-ft*ft+Qi*an*an*Bt*Bt,au=2*Uu*an*Bt,Io=As/au,sl=Math.sqrt(Io*Io+1)-Io,lu=sl<1e-9?-18:Math.log(sl);return lu}function ur(Yn){return(Math.exp(Yn)-Math.exp(-Yn))/2}function Ti(Yn){return(Math.exp(Yn)+Math.exp(-Yn))/2}function _r(Yn){return ur(Yn)/Ti(Yn)}var mi=An(0);function Es(Yn){return ft*(Ti(mi)/Ti(mi+Zt*Yn))}function Dl(Yn){return ft*(Ti(mi)*_r(mi+Zt*Yn)-ur(mi))/an}function rs(Yn){return 1-Math.pow(1-Yn,1.5)}var qr=Date.now(),Ar=(An(1)-mi)/Zt,zu=g.duration?1e3*g.duration:1e3*Ar*.8;function Ol(){var Yn=(Date.now()-qr)/zu,Qi=rs(Yn)*Ar;Yn<=1?(this._flyToFrame=q(Ol,this),this._move(this.unproject(P.add(R.subtract(P).multiplyBy(Dl(Qi)/Bt)),Ue),this.getScaleZoom(ft/Es(Qi),Ue),{flyTo:!0})):this._move(i,c)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Ol.call(this),this},flyToBounds:function(i,c){var g=this._getBoundsCenterZoom(i,c);return this.flyTo(g.center,g.zoom,c)},setMaxBounds:function(i){return i=se(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var c=this.options.minZoom;return this.options.minZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var c=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&c!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,c){this._enforcingBounds=!0;var g=this.getCenter(),P=this._limitCenter(g,this._zoom,se(i));return g.equals(P)||this.panTo(P,c),this._enforcingBounds=!1,this},panInside:function(i,c){c=c||{};var g=A(c.paddingTopLeft||c.padding||[0,0]),P=A(c.paddingBottomRight||c.padding||[0,0]),R=this.project(this.getCenter()),ue=this.project(i),Ue=this.getPixelBounds(),ft=I([Ue.min.add(g),Ue.max.subtract(P)]),_t=ft.getSize();if(!ft.contains(ue)){this._enforcingBounds=!0;var Bt=ue.subtract(ft.getCenter()),Zt=ft.extend(ue).getSize().subtract(_t);R.x+=Bt.x<0?-Zt.x:Zt.x,R.y+=Bt.y<0?-Zt.y:Zt.y,this.panTo(this.unproject(R),c),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=o({animate:!1,pan:!0},i===!0?{animate:!0}:i);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),P=c.divideBy(2).round(),R=g.divideBy(2).round(),ue=P.subtract(R);return!ue.x&&!ue.y?this:(i.animate&&i.pan?this.panBy(ue):(i.pan&&this._rawPanBy(ue),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=o({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,g,i):navigator.geolocation.getCurrentPosition(c,g,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var c=i.code,g=i.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var c=i.coords.latitude,g=i.coords.longitude,P=new ce(c,g),R=P.toBounds(i.coords.accuracy*2),ue=this._locateOptions;if(ue.setView){var Ue=this.getBoundsZoom(R);this.setView(P,ue.maxZoom?Math.min(Ue,ue.maxZoom):Ue)}var ft={latlng:P,bounds:R,timestamp:i.timestamp};for(var _t in i.coords)typeof i.coords[_t]=="number"&&(ft[_t]=i.coords[_t]);this.fire("locationfound",ft)}},addHandler:function(i,c){if(!c)return this;var g=this[i]=new c(this);return this._handlers.push(g),this.options[i]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)wn(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,c){var g="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),P=Fn("div",g,c||this._mapPane);return i&&(this._panes[i]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),c=this.unproject(i.getBottomLeft()),g=this.unproject(i.getTopRight());return new G(c,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,c,g){i=se(i),g=A(g||[0,0]);var P=this.getZoom()||0,R=this.getMinZoom(),ue=this.getMaxZoom(),Ue=i.getNorthWest(),ft=i.getSouthEast(),_t=this.getSize().subtract(g),Bt=I(this.project(ft,P),this.project(Ue,P)).getSize(),Zt=Ht.any3d?this.options.zoomSnap:1,an=_t.x/Bt.x,An=_t.y/Bt.y,ur=c?Math.max(an,An):Math.min(an,An);return P=this.getScaleZoom(ur,P),Zt&&(P=Math.round(P/(Zt/100))*(Zt/100),P=c?Math.ceil(P/Zt)*Zt:Math.floor(P/Zt)*Zt),Math.max(R,Math.min(ue,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,c){var g=this._getTopLeftPoint(i,c);return new ge(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,c){var g=this.options.crs;return c=c===void 0?this._zoom:c,g.scale(i)/g.scale(c)},getScaleZoom:function(i,c){var g=this.options.crs;c=c===void 0?this._zoom:c;var P=g.zoom(i*g.scale(c));return isNaN(P)?1/0:P},project:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(pe(i),c)},unproject:function(i,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(A(i),c)},layerPointToLatLng:function(i){var c=A(i).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(i){var c=this.project(pe(i))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(pe(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(se(i))},distance:function(i,c){return this.options.crs.distance(pe(i),pe(c))},containerPointToLayerPoint:function(i){return A(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return A(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var c=this.containerPointToLayerPoint(A(i));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(i)))},mouseEventToContainerPoint:function(i){return Qa(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var c=this._container=Ja(i);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");xn(c,"scroll",this._onScroll,this),this._containerId=m(c)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ht.any3d,Cn(i,"leaflet-container"+(Ht.touch?" leaflet-touch":"")+(Ht.retina?" leaflet-retina":"")+(Ht.ielt9?" leaflet-oldie":"")+(Ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=kr(i,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),di(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Cn(i.markerPane,"leaflet-zoom-hide"),Cn(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,c,g){di(this._mapPane,new W(0,0));var P=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var R=this._zoom!==c;this._moveStart(R,g)._move(i,c)._moveEnd(R),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(i,c){return i&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(i,c,g,P){c===void 0&&(c=this._zoom);var R=this._zoom!==c;return this._zoom=c,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),P?g&&g.pinch&&this.fire("zoom",g):((R||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){di(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[m(this._container)]=this;var c=i?On:xn;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ht.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,c){for(var g=[],P,R=c==="mouseout"||c==="mouseover",ue=i.target||i.srcElement,Ue=!1;ue;){if(P=this._targets[m(ue)],P&&(c==="click"||c==="preclick")&&this._draggableMoved(P)){Ue=!0;break}if(P&&P.listens(c,!0)&&(R&&!io(ue,i)||(g.push(P),R))||ue===this._container)break;ue=ue.parentNode}return!g.length&&!Ue&&!R&&this.listens(c,!0)&&(g=[this]),g},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var c=i.target||i.srcElement;if(!(!this._loaded||c._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(c))){var g=i.type;g==="mousedown"&&Xo(c),this._fireDOMEvent(i,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,c,g){if(i.type==="click"){var P=o({},i);P.type="preclick",this._fireDOMEvent(P,P.type,g)}var R=this._findEventTargets(i,c);if(g){for(var ue=[],Ue=0;Ue<g.length;Ue++)g[Ue].listens(c,!0)&&ue.push(g[Ue]);R=ue.concat(R)}if(R.length){c==="contextmenu"&&vi(i);var ft=R[0],_t={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var Bt=ft.getLatLng&&(!ft._radius||ft._radius<=10);_t.containerPoint=Bt?this.latLngToContainerPoint(ft.getLatLng()):this.mouseEventToContainerPoint(i),_t.layerPoint=this.containerPointToLayerPoint(_t.containerPoint),_t.latlng=Bt?ft.getLatLng():this.layerPointToLatLng(_t.layerPoint)}for(Ue=0;Ue<R.length;Ue++)if(R[Ue].fire(c,_t,!0),_t.originalEvent._stopped||R[Ue].options.bubblingMouseEvents===!1&&ye(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,c=this._handlers.length;i<c;i++)this._handlers[i].disable()},whenReady:function(i,c){return this._loaded?i.call(c||this,{target:this}):this.on("load",i,c),this},_getMapPanePos:function(){return bs(this._mapPane)||new W(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,c){var g=i&&c!==void 0?this._getNewPixelOrigin(i,c):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,c){var g=this.getSize()._divideBy(2);return this.project(i,c)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,c,g){var P=this._getNewPixelOrigin(g,c);return this.project(i,c)._subtract(P)},_latLngBoundsToNewLayerBounds:function(i,c,g){var P=this._getNewPixelOrigin(g,c);return I([this.project(i.getSouthWest(),c)._subtract(P),this.project(i.getNorthWest(),c)._subtract(P),this.project(i.getSouthEast(),c)._subtract(P),this.project(i.getNorthEast(),c)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,c,g){if(!g)return i;var P=this.project(i,c),R=this.getSize().divideBy(2),ue=new ge(P.subtract(R),P.add(R)),Ue=this._getBoundsOffset(ue,g,c);return Math.abs(Ue.x)<=1&&Math.abs(Ue.y)<=1?i:this.unproject(P.add(Ue),c)},_limitOffset:function(i,c){if(!c)return i;var g=this.getPixelBounds(),P=new ge(g.min.add(i),g.max.add(i));return i.add(this._getBoundsOffset(P,c))},_getBoundsOffset:function(i,c,g){var P=I(this.project(c.getNorthEast(),g),this.project(c.getSouthWest(),g)),R=P.min.subtract(i.min),ue=P.max.subtract(i.max),Ue=this._rebound(R.x,-ue.x),ft=this._rebound(R.y,-ue.y);return new W(Ue,ft)},_rebound:function(i,c){return i+c>0?Math.round(i-c)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(c))},_limitZoom:function(i){var c=this.getMinZoom(),g=this.getMaxZoom(),P=Ht.any3d?this.options.zoomSnap:1;return P&&(i=Math.round(i/P)*P),Math.max(c,Math.min(g,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,c){var g=this._getCenterOffset(i)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,c),!0)},_createAnimProxy:function(){var i=this._proxy=Fn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(c){var g=Co,P=this._proxy.style[g];ys(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),P===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),c=this.getZoom();ys(this._proxy,this.project(i,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,c,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(c),R=this._getCenterOffset(i)._divideBy(1-1/P);return g.animate!==!0&&!this.getSize().contains(R)?!1:(q(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(i,c,!0)},this),!0)},_animateZoom:function(i,c,g,P){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=c,Cn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:c,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ea(i,c){return new Bn(i,c)}var un=B.extend({options:{position:"topright"},initialize:function(i){D(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var c=this._map;return c&&c.removeControl(this),this.options.position=i,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var c=this._container=this.onAdd(i),g=this.getPosition(),P=i._controlCorners[g];return Cn(c,"leaflet-control"),g.indexOf("bottom")!==-1?P.insertBefore(c,P.firstChild):P.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),nr=function(i){return new un(i)};Bn.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},c="leaflet-",g=this._controlContainer=Fn("div",c+"control-container",this._container);function P(R,ue){var Ue=c+R+" "+c+ue;i[R+ue]=Fn("div",Ue,g)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)wn(this._controlCorners[i]);wn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bo=un.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,c,g,P){return g<P?-1:P<g?1:0}},initialize:function(i,c,g){D(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in i)this._addLayer(i[P],P);for(P in c)this._addLayer(c[P],P,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return un.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,c){return this._addLayer(i,c),this._map?this._update():this},addOverlay:function(i,c){return this._addLayer(i,c,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var c=this._getLayer(m(i));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Cn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Cn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",c=this._container=Fn("div",i),g=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Eo(c),Pa(c);var P=this._section=Fn("section",i+"-list");g&&(this._map.on("click",this.collapse,this),xn(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var R=this._layersLink=Fn("a",i+"-toggle",c);R.href="#",R.title="Layers",R.setAttribute("role","button"),xn(R,{keydown:function(ue){ue.keyCode===13&&this._expandSafely()},click:function(ue){vi(ue),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=Fn("div",i+"-base",P),this._separator=Fn("div",i+"-separator",P),this._overlaysList=Fn("div",i+"-overlays",P),c.appendChild(P)},_getLayer:function(i){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&m(this._layers[c].layer)===i)return this._layers[c]},_addLayer:function(i,c,g){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:c,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(P,R){return this.options.sortFunction(P.layer,R.layer,P.name,R.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xs(this._baseLayersList),Xs(this._overlaysList),this._layerControlInputs=[];var i,c,g,P,R=0;for(g=0;g<this._layers.length;g++)P=this._layers[g],this._addItem(P),c=c||P.overlay,i=i||!P.overlay,R+=P.overlay?0:1;return this.options.hideSingleBase&&(i=i&&R>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=c&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var c=this._getLayer(m(i.target)),g=c.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;g&&this._map.fire(g,c)},_createRadioElement:function(i,c){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(c?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=g,P.firstChild},_addItem:function(i){var c=document.createElement("label"),g=this._map.hasLayer(i.layer),P;i.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=g):P=this._createRadioElement("leaflet-base-layers_"+m(this),g),this._layerControlInputs.push(P),P.layerId=m(i.layer),xn(P,"click",this._onInputClick,this);var R=document.createElement("span");R.innerHTML=" "+i.name;var ue=document.createElement("span");c.appendChild(ue),ue.appendChild(P),ue.appendChild(R);var Ue=i.overlay?this._overlaysList:this._baseLayersList;return Ue.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,c,g,P=[],R=[];this._handlingClick=!0;for(var ue=i.length-1;ue>=0;ue--)c=i[ue],g=this._getLayer(c.layerId).layer,c.checked?P.push(g):c.checked||R.push(g);for(ue=0;ue<R.length;ue++)this._map.hasLayer(R[ue])&&this._map.removeLayer(R[ue]);for(ue=0;ue<P.length;ue++)this._map.hasLayer(P[ue])||this._map.addLayer(P[ue]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,c,g,P=this._map.getZoom(),R=i.length-1;R>=0;R--)c=i[R],g=this._getLayer(c.layerId).layer,c.disabled=g.options.minZoom!==void 0&&P<g.options.minZoom||g.options.maxZoom!==void 0&&P>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,xn(i,"click",vi),this.expand();var c=this;setTimeout(function(){On(i,"click",vi),c._preventClick=!1})}}),ro=function(i,c,g){return new Bo(i,c,g)},fr=un.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var c="leaflet-control-zoom",g=Fn("div",c+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,c+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,c+"-out",g,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,c,g,P,R){var ue=Fn("a",g,P);return ue.innerHTML=i,ue.href="#",ue.title=c,ue.setAttribute("role","button"),ue.setAttribute("aria-label",c),Eo(ue),xn(ue,"click",Pr),xn(ue,"click",R,this),xn(ue,"click",this._refocusOnMap,this),ue},_updateDisabled:function(){var i=this._map,c="leaflet-disabled";zn(this._zoomInButton,c),zn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Cn(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Cn(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bn.mergeOptions({zoomControl:!0}),Bn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fr,this.addControl(this.zoomControl))});var Aa=function(i){return new fr(i)},ws=un.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var c="leaflet-control-scale",g=Fn("div",c),P=this.options;return this._addScales(P,c+"-line",g),i.on(P.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),g},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,c,g){i.metric&&(this._mScale=Fn("div",c,g)),i.imperial&&(this._iScale=Fn("div",c,g))},_update:function(){var i=this._map,c=i.getSize().y/2,g=i.distance(i.containerPointToLatLng([0,c]),i.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(g)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var c=this._getRoundNum(i),g=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,g,c/i)},_updateImperial:function(i){var c=i*3.2808399,g,P,R;c>5280?(g=c/5280,P=this._getRoundNum(g),this._updateScale(this._iScale,P+" mi",P/g)):(R=this._getRoundNum(c),this._updateScale(this._iScale,R+" ft",R/c))},_updateScale:function(i,c,g){i.style.width=Math.round(this.options.maxWidth*g)+"px",i.innerHTML=c},_getRoundNum:function(i){var c=Math.pow(10,(Math.floor(i)+"").length-1),g=i/c;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,c*g}}),na=function(i){return new ws(i)},ia='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Or=un.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ht.inlineSvg?ia+" ":"")+"Leaflet</a>"},initialize:function(i){D(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Fn("div","leaflet-control-attribution"),Eo(this._container);for(var c in i._layers)i._layers[c].getAttribution&&this.addAttribution(i._layers[c].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var c in this._attributions)this._attributions[c]&&i.push(c);var g=[];this.options.prefix&&g.push(this.options.prefix),i.length&&g.push(i.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});Bn.mergeOptions({attributionControl:!0}),Bn.addInitHook(function(){this.options.attributionControl&&new Or().addTo(this)});var ra=function(i){return new Or(i)};un.Layers=Bo,un.Zoom=fr,un.Scale=ws,un.Attribution=Or,nr.layers=ro,nr.zoom=Aa,nr.scale=na,nr.attribution=ra;var Ei=B.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ei.addTo=function(i,c){return i.addHandler(c,this),this};var el={Events:H},To=Ht.touch?"touchstart mousedown":"mousedown",Rr=ne.extend({options:{clickTolerance:3},initialize:function(i,c,g,P){D(this,P),this._element=i,this._dragStartTarget=c||i,this._preventOutline=g},enable:function(){this._enabled||(xn(this._dragStartTarget,To,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Rr._dragging===this&&this.finishDrag(!0),On(this._dragStartTarget,To,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Po(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Rr._dragging===this&&this.finishDrag();return}if(!(Rr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Rr._dragging=this,this._preventOutline&&Xo(this._element),Ca(),So(),!this._moving)){this.fire("down");var c=i.touches?i.touches[0]:i,g=Xa(this._element);this._startPoint=new W(c.clientX,c.clientY),this._startPos=bs(this._element),this._parentScale=Qo(g);var P=i.type==="mousedown";xn(document,P?"mousemove":"touchmove",this._onMove,this),xn(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var c=i.touches&&i.touches.length===1?i.touches[0]:i,g=new W(c.clientX,c.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,vi(i),this._moved||(this.fire("dragstart"),this._moved=!0,Cn(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Cn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),di(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){zn(document.body,"leaflet-dragging"),this._lastTarget&&(zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),On(document,"mousemove touchmove",this._onMove,this),On(document,"mouseup touchend touchcancel",this._onUp,this),es(),Rs();var c=this._moved&&this._moving;this._moving=!1,Rr._dragging=!1,c&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function sa(i,c,g){var P,R=[1,4,2,8],ue,Ue,ft,_t,Bt,Zt,an,An;for(ue=0,Zt=i.length;ue<Zt;ue++)i[ue]._code=yt(i[ue],c);for(ft=0;ft<4;ft++){for(an=R[ft],P=[],ue=0,Zt=i.length,Ue=Zt-1;ue<Zt;Ue=ue++)_t=i[ue],Bt=i[Ue],_t._code&an?Bt._code&an||(An=ot(Bt,_t,an,c,g),An._code=yt(An,c),P.push(An)):(Bt._code&an&&(An=ot(Bt,_t,an,c,g),An._code=yt(An,c),P.push(An)),P.push(_t));i=P}return i}function Ma(i,c){var g,P,R,ue,Ue,ft,_t,Bt,Zt;if(!i||i.length===0)throw new Error("latlngs not passed");Jt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var an=pe([0,0]),An=se(i),ur=An.getNorthWest().distanceTo(An.getSouthWest())*An.getNorthEast().distanceTo(An.getNorthWest());ur<1700&&(an=Ba(i));var Ti=i.length,_r=[];for(g=0;g<Ti;g++){var mi=pe(i[g]);_r.push(c.project(pe([mi.lat-an.lat,mi.lng-an.lng])))}for(ft=_t=Bt=0,g=0,P=Ti-1;g<Ti;P=g++)R=_r[g],ue=_r[P],Ue=R.y*ue.x-ue.y*R.x,_t+=(R.x+ue.x)*Ue,Bt+=(R.y+ue.y)*Ue,ft+=Ue*3;ft===0?Zt=_r[0]:Zt=[_t/ft,Bt/ft];var Es=c.unproject(A(Zt));return pe([Es.lat+an.lat,Es.lng+an.lng])}function Ba(i){for(var c=0,g=0,P=0,R=0;R<i.length;R++){var ue=pe(i[R]);c+=ue.lat,g+=ue.lng,P++}return pe([c/P,g/P])}var oa={__proto__:null,clipPolygon:sa,polygonCenter:Ma,centroid:Ba};function so(i,c){if(!c||!i.length)return i.slice();var g=c*c;return i=Y(i,g),i=_i(i,g),i}function No(i,c,g){return Math.sqrt(Gt(i,c,g,!0))}function oo(i,c,g){return Gt(i,c,g)}function _i(i,c){var g=i.length,P=typeof Uint8Array<"u"?Uint8Array:Array,R=new P(g);R[0]=R[g-1]=1,C(i,R,c,0,g-1);var ue,Ue=[];for(ue=0;ue<g;ue++)R[ue]&&Ue.push(i[ue]);return Ue}function C(i,c,g,P,R){var ue=0,Ue,ft,_t;for(ft=P+1;ft<=R-1;ft++)_t=Gt(i[ft],i[P],i[R],!0),_t>ue&&(Ue=ft,ue=_t);ue>g&&(c[Ue]=1,C(i,c,g,P,Ue),C(i,c,g,Ue,R))}function Y(i,c){for(var g=[i[0]],P=1,R=0,ue=i.length;P<ue;P++)Ot(i[P],i[R])>c&&(g.push(i[P]),R=P);return R<ue-1&&g.push(i[ue-1]),g}var De;function He(i,c,g,P,R){var ue=P?De:yt(i,g),Ue=yt(c,g),ft,_t,Bt;for(De=Ue;;){if(!(ue|Ue))return[i,c];if(ue&Ue)return!1;ft=ue||Ue,_t=ot(i,c,ft,g,R),Bt=yt(_t,g),ft===ue?(i=_t,ue=Bt):(c=_t,Ue=Bt)}}function ot(i,c,g,P,R){var ue=c.x-i.x,Ue=c.y-i.y,ft=P.min,_t=P.max,Bt,Zt;return g&8?(Bt=i.x+ue*(_t.y-i.y)/Ue,Zt=_t.y):g&4?(Bt=i.x+ue*(ft.y-i.y)/Ue,Zt=ft.y):g&2?(Bt=_t.x,Zt=i.y+Ue*(_t.x-i.x)/ue):g&1&&(Bt=ft.x,Zt=i.y+Ue*(ft.x-i.x)/ue),new W(Bt,Zt,R)}function yt(i,c){var g=0;return i.x<c.min.x?g|=1:i.x>c.max.x&&(g|=2),i.y<c.min.y?g|=4:i.y>c.max.y&&(g|=8),g}function Ot(i,c){var g=c.x-i.x,P=c.y-i.y;return g*g+P*P}function Gt(i,c,g,P){var R=c.x,ue=c.y,Ue=g.x-R,ft=g.y-ue,_t=Ue*Ue+ft*ft,Bt;return _t>0&&(Bt=((i.x-R)*Ue+(i.y-ue)*ft)/_t,Bt>1?(R=g.x,ue=g.y):Bt>0&&(R+=Ue*Bt,ue+=ft*Bt)),Ue=i.x-R,ft=i.y-ue,P?Ue*Ue+ft*ft:new W(R,ue)}function Jt(i){return!ie(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function sn(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Jt(i)}function vn(i,c){var g,P,R,ue,Ue,ft,_t,Bt;if(!i||i.length===0)throw new Error("latlngs not passed");Jt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Zt=pe([0,0]),an=se(i),An=an.getNorthWest().distanceTo(an.getSouthWest())*an.getNorthEast().distanceTo(an.getNorthWest());An<1700&&(Zt=Ba(i));var ur=i.length,Ti=[];for(g=0;g<ur;g++){var _r=pe(i[g]);Ti.push(c.project(pe([_r.lat-Zt.lat,_r.lng-Zt.lng])))}for(g=0,P=0;g<ur-1;g++)P+=Ti[g].distanceTo(Ti[g+1])/2;if(P===0)Bt=Ti[0];else for(g=0,ue=0;g<ur-1;g++)if(Ue=Ti[g],ft=Ti[g+1],R=Ue.distanceTo(ft),ue+=R,ue>P){_t=(ue-P)/R,Bt=[ft.x-_t*(ft.x-Ue.x),ft.y-_t*(ft.y-Ue.y)];break}var mi=c.unproject(A(Bt));return pe([mi.lat+Zt.lat,mi.lng+Zt.lng])}var Tn={__proto__:null,simplify:so,pointToSegmentDistance:No,closestPointOnSegment:oo,clipSegment:He,_getEdgeIntersection:ot,_getBitCode:yt,_sqClosestPointOnSegment:Gt,isFlat:Jt,_flat:sn,polylineCenter:vn},si={project:function(i){return new W(i.lng,i.lat)},unproject:function(i){return new ce(i.y,i.x)},bounds:new ge([-180,-90],[180,90])},jn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ge([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var c=Math.PI/180,g=this.R,P=i.lat*c,R=this.R_MINOR/g,ue=Math.sqrt(1-R*R),Ue=ue*Math.sin(P),ft=Math.tan(Math.PI/4-P/2)/Math.pow((1-Ue)/(1+Ue),ue/2);return P=-g*Math.log(Math.max(ft,1e-10)),new W(i.lng*c*g,P)},unproject:function(i){for(var c=180/Math.PI,g=this.R,P=this.R_MINOR/g,R=Math.sqrt(1-P*P),ue=Math.exp(-i.y/g),Ue=Math.PI/2-2*Math.atan(ue),ft=0,_t=.1,Bt;ft<15&&Math.abs(_t)>1e-7;ft++)Bt=R*Math.sin(Ue),Bt=Math.pow((1-Bt)/(1+Bt),R/2),_t=Math.PI/2-2*Math.atan(ue*Bt)-Ue,Ue+=_t;return new ce(Ue*c,i.x*c/g)}},Hn={__proto__:null,LonLat:si,Mercator:jn,SphericalMercator:je},Ai=o({},xe,{code:"EPSG:3395",projection:jn,transformation:function(){var i=.5/(Math.PI*jn.R);return J(i,.5,-i,.5)}()}),Li=o({},xe,{code:"EPSG:4326",projection:si,transformation:J(1/180,1,-1/180,.5)}),Sr=o({},oe,{projection:si,transformation:J(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,c){var g=c.lng-i.lng,P=c.lat-i.lat;return Math.sqrt(g*g+P*P)},infinite:!0});oe.Earth=xe,oe.EPSG3395=Ai,oe.EPSG3857=te,oe.EPSG900913=Ne,oe.EPSG4326=Li,oe.Simple=Sr;var Xn=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[m(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[m(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var c=i.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var g=this.getEvents();c.on(g,this),this.once("remove",function(){c.off(g,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Bn.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var c=m(i);return this._layers[c]?this:(this._layers[c]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var c=m(i);return this._layers[c]?(this._loaded&&i.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return m(i)in this._layers},eachLayer:function(i,c){for(var g in this._layers)i.call(c,this._layers[g]);return this},_addLayers:function(i){i=i?ie(i)?i:[i]:[];for(var c=0,g=i.length;c<g;c++)this.addLayer(i[c])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[m(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var c=m(i);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,c=-1/0,g=this._getZoomSpan();for(var P in this._zoomBoundLayers){var R=this._zoomBoundLayers[P].options;i=R.minZoom===void 0?i:Math.min(i,R.minZoom),c=R.maxZoom===void 0?c:Math.max(c,R.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=i===1/0?void 0:i,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ir=Xn.extend({initialize:function(i,c){D(this,c),this._layers={};var g,P;if(i)for(g=0,P=i.length;g<P;g++)this.addLayer(i[g])},addLayer:function(i){var c=this.getLayerId(i);return this._layers[c]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var c=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(i){var c=typeof i=="number"?i:this.getLayerId(i);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var c=Array.prototype.slice.call(arguments,1),g,P;for(g in this._layers)P=this._layers[g],P[i]&&P[i].apply(P,c);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,c){for(var g in this._layers)i.call(c,this._layers[g]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return m(i)}}),tl=function(i,c){return new ir(i,c)},rr=ir.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),ir.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),ir.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new G;for(var c in this._layers){var g=this._layers[c];i.extend(g.getBounds?g.getBounds():g.getLatLng())}return i}}),Ta=function(i,c){return new rr(i,c)},ts=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){D(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,c){var g=this._getIconUrl(i);if(!g){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(g,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(P,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(i,c){var g=this.options,P=g[c+"Size"];typeof P=="number"&&(P=[P,P]);var R=A(P),ue=A(c==="shadow"&&g.shadowAnchor||g.iconAnchor||R&&R.divideBy(2,!0));i.className="leaflet-marker-"+c+" "+(g.className||""),ue&&(i.style.marginLeft=-ue.x+"px",i.style.marginTop=-ue.y+"px"),R&&(i.style.width=R.x+"px",i.style.height=R.y+"px")},_createImg:function(i,c){return c=c||document.createElement("img"),c.src=i,c},_getIconUrl:function(i){return Ht.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Na(i){return new ts(i)}var zs=ts.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof zs.imagePath!="string"&&(zs.imagePath=this._detectIconPath()),(this.options.imagePath||zs.imagePath)+ts.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var c=function(g,P,R){var ue=P.exec(g);return ue&&ue[R]};return i=c(i,/^url\((['"])?(.+)\1\)$/,2),i&&c(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Fn("div","leaflet-default-icon-path",document.body),c=kr(i,"background-image")||kr(i,"backgroundImage");if(document.body.removeChild(i),c=this._stripUrl(c),c)return c;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Us=Ei.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Rr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Cn(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var c=this._marker,g=c._map,P=this._marker.options.autoPanSpeed,R=this._marker.options.autoPanPadding,ue=bs(c._icon),Ue=g.getPixelBounds(),ft=g.getPixelOrigin(),_t=I(Ue.min._subtract(ft).add(R),Ue.max._subtract(ft).subtract(R));if(!_t.contains(ue)){var Bt=A((Math.max(_t.max.x,ue.x)-_t.max.x)/(Ue.max.x-_t.max.x)-(Math.min(_t.min.x,ue.x)-_t.min.x)/(Ue.min.x-_t.min.x),(Math.max(_t.max.y,ue.y)-_t.max.y)/(Ue.max.y-_t.max.y)-(Math.min(_t.min.y,ue.y)-_t.min.y)/(Ue.min.y-_t.min.y)).multiplyBy(P);g.panBy(Bt,{animate:!1}),this._draggable._newPos._add(Bt),this._draggable._startPos._add(Bt),di(c._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=q(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=q(this._adjustPan.bind(this,i)))},_onDrag:function(i){var c=this._marker,g=c._shadow,P=bs(c._icon),R=c._map.layerPointToLatLng(P);g&&di(g,P),c._latlng=R,i.latlng=R,i.oldLatLng=this._oldLatLng,c.fire("move",i).fire("drag",i)},_onDragEnd:function(i){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Ci=Xn.extend({options:{icon:new zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,c){D(this,c),this._latlng=pe(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var c=this._latlng;return this._latlng=pe(i),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=i.icon.createIcon(this._icon),P=!1;g!==this._icon&&(this._icon&&this._removeIcon(),P=!0,i.title&&(g.title=i.title),g.tagName==="IMG"&&(g.alt=i.alt||"")),Cn(g,c),i.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xn(g,"focus",this._panOnFocus,this);var R=i.icon.createShadow(this._shadow),ue=!1;R!==this._shadow&&(this._removeShadow(),ue=!0),R&&(Cn(R,c),R.alt=""),this._shadow=R,i.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),R&&ue&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&On(this._icon,"focus",this._panOnFocus,this),wn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wn(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&di(this._icon,i),this._shadow&&di(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Cn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Us)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Us(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Zi(this._icon,i),this._shadow&&Zi(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var c=this.options.icon.options,g=c.iconSize?A(c.iconSize):A(0,0),P=c.iconAnchor?A(c.iconAnchor):A(0,0);i.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:g.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function aa(i,c){return new Ci(i,c)}var dr=Xn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return D(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),sr=dr.extend({options:{fill:!0,radius:10},initialize:function(i,c){D(this,c),this._latlng=pe(i),this._radius=this.options.radius},setLatLng:function(i){var c=this._latlng;return this._latlng=pe(i),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var c=i&&i.radius||this._radius;return dr.prototype.setStyle.call(this,i),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,c=this._radiusY||i,g=this._clickTolerance(),P=[i+g,c+g];this._pxBounds=new ge(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function la(i,c){return new sr(i,c)}var Ki=sr.extend({initialize:function(i,c,g){if(typeof c=="number"&&(c=o({},g,{radius:c})),D(this,c),this._latlng=pe(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new G(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:dr.prototype.setStyle,_project:function(){var i=this._latlng.lng,c=this._latlng.lat,g=this._map,P=g.options.crs;if(P.distance===xe.distance){var R=Math.PI/180,ue=this._mRadius/xe.R/R,Ue=g.project([c+ue,i]),ft=g.project([c-ue,i]),_t=Ue.add(ft).divideBy(2),Bt=g.unproject(_t).lat,Zt=Math.acos((Math.cos(ue*R)-Math.sin(c*R)*Math.sin(Bt*R))/(Math.cos(c*R)*Math.cos(Bt*R)))/R;(isNaN(Zt)||Zt===0)&&(Zt=ue/Math.cos(Math.PI/180*c)),this._point=_t.subtract(g.getPixelOrigin()),this._radius=isNaN(Zt)?0:_t.x-g.project([Bt,i-Zt]).x,this._radiusY=_t.y-Ue.y}else{var an=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(an).x}this._updateBounds()}});function qs(i,c,g){return new Ki(i,c,g)}var Er=dr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,c){D(this,c),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var c=1/0,g=null,P=Gt,R,ue,Ue=0,ft=this._parts.length;Ue<ft;Ue++)for(var _t=this._parts[Ue],Bt=1,Zt=_t.length;Bt<Zt;Bt++){R=_t[Bt-1],ue=_t[Bt];var an=P(i,R,ue,!0);an<c&&(c=an,g=P(i,R,ue))}return g&&(g.distance=Math.sqrt(c)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,c){return c=c||this._defaultShape(),i=pe(i),c.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new G,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Jt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var c=[],g=Jt(i),P=0,R=i.length;P<R;P++)g?(c[P]=pe(i[P]),this._bounds.extend(c[P])):c[P]=this._convertLatLngs(i[P]);return c},_project:function(){var i=new ge;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),c=new W(i,i);this._rawPxBounds&&(this._pxBounds=new ge([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(i,c,g){var P=i[0]instanceof ce,R=i.length,ue,Ue;if(P){for(Ue=[],ue=0;ue<R;ue++)Ue[ue]=this._map.latLngToLayerPoint(i[ue]),g.extend(Ue[ue]);c.push(Ue)}else for(ue=0;ue<R;ue++)this._projectLatlngs(i[ue],c,g)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,g,P,R,ue,Ue,ft,_t;for(g=0,R=0,ue=this._rings.length;g<ue;g++)for(_t=this._rings[g],P=0,Ue=_t.length;P<Ue-1;P++)ft=He(_t[P],_t[P+1],i,P,!0),ft&&(c[R]=c[R]||[],c[R].push(ft[0]),(ft[1]!==_t[P+1]||P===Ue-2)&&(c[R].push(ft[1]),R++))}},_simplifyPoints:function(){for(var i=this._parts,c=this.options.smoothFactor,g=0,P=i.length;g<P;g++)i[g]=so(i[g],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,c){var g,P,R,ue,Ue,ft,_t=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(g=0,ue=this._parts.length;g<ue;g++)for(ft=this._parts[g],P=0,Ue=ft.length,R=Ue-1;P<Ue;R=P++)if(!(!c&&P===0)&&No(i,ft[R],ft[P])<=_t)return!0;return!1}});function nl(i,c){return new Er(i,c)}Er._flat=sn;var Mi=Er.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ma(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var c=Er.prototype._convertLatLngs.call(this,i),g=c.length;return g>=2&&c[0]instanceof ce&&c[0].equals(c[g-1])&&c.pop(),c},_setLatLngs:function(i){Er.prototype._setLatLngs.call(this,i),Jt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Jt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,c=this.options.weight,g=new W(c,c);if(i=new ge(i.min.subtract(g),i.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,R=this._rings.length,ue;P<R;P++)ue=sa(this._rings[P],i,!0),ue.length&&this._parts.push(ue)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var c=!1,g,P,R,ue,Ue,ft,_t,Bt;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(ue=0,_t=this._parts.length;ue<_t;ue++)for(g=this._parts[ue],Ue=0,Bt=g.length,ft=Bt-1;Ue<Bt;ft=Ue++)P=g[Ue],R=g[ft],P.y>i.y!=R.y>i.y&&i.x<(R.x-P.x)*(i.y-P.y)/(R.y-P.y)+P.x&&(c=!c);return c||Er.prototype._containsPoint.call(this,i,!0)}});function xs(i,c){return new Mi(i,c)}var Ir=rr.extend({initialize:function(i,c){D(this,c),this._layers={},i&&this.addData(i)},addData:function(i){var c=ie(i)?i:i.features,g,P,R;if(c){for(g=0,P=c.length;g<P;g++)R=c[g],(R.geometries||R.geometry||R.features||R.coordinates)&&this.addData(R);return this}var ue=this.options;if(ue.filter&&!ue.filter(i))return this;var Ue=Do(i,ue);return Ue?(Ue.feature=Fr(i),Ue.defaultOptions=Ue.options,this.resetStyle(Ue),ue.onEachFeature&&ue.onEachFeature(i,Ue),this.addLayer(Ue)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=o({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(c){this._setLayerStyle(c,i)},this)},_setLayerStyle:function(i,c){i.setStyle&&(typeof c=="function"&&(c=c(i.feature)),i.setStyle(c))}});function Do(i,c){var g=i.type==="Feature"?i.geometry:i,P=g?g.coordinates:null,R=[],ue=c&&c.pointToLayer,Ue=c&&c.coordsToLatLng||Ls,ft,_t,Bt,Zt;if(!P&&!g)return null;switch(g.type){case"Point":return ft=Ue(P),$s(ue,i,ft,c);case"MultiPoint":for(Bt=0,Zt=P.length;Bt<Zt;Bt++)ft=Ue(P[Bt]),R.push($s(ue,i,ft,c));return new rr(R);case"LineString":case"MultiLineString":return _t=ji(P,g.type==="LineString"?0:1,Ue),new Er(_t,c);case"Polygon":case"MultiPolygon":return _t=ji(P,g.type==="Polygon"?1:2,Ue),new Mi(_t,c);case"GeometryCollection":for(Bt=0,Zt=g.geometries.length;Bt<Zt;Bt++){var an=Do({geometry:g.geometries[Bt],type:"Feature",properties:i.properties},c);an&&R.push(an)}return new rr(R);case"FeatureCollection":for(Bt=0,Zt=g.features.length;Bt<Zt;Bt++){var An=Do(g.features[Bt],c);An&&R.push(An)}return new rr(R);default:throw new Error("Invalid GeoJSON object.")}}function $s(i,c,g,P){return i?i(c,g):new Ci(g,P&&P.markersInheritOptions&&P)}function Ls(i){return new ce(i[1],i[0],i[2])}function ji(i,c,g){for(var P=[],R=0,ue=i.length,Ue;R<ue;R++)Ue=c?ji(i[R],c-1,g):(g||Ls)(i[R]),P.push(Ue);return P}function Oi(i,c){return i=pe(i),i.alt!==void 0?[E(i.lng,c),E(i.lat,c),E(i.alt,c)]:[E(i.lng,c),E(i.lat,c)]}function ns(i,c,g,P){for(var R=[],ue=0,Ue=i.length;ue<Ue;ue++)R.push(c?ns(i[ue],Jt(i[ue])?0:c-1,g,P):Oi(i[ue],P));return!c&&g&&R.length>0&&R.push(R[0].slice()),R}function pr(i,c){return i.feature?o({},i.feature,{geometry:c}):Fr(c)}function Fr(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Vs={toGeoJSON:function(i){return pr(this,{type:"Point",coordinates:Oi(this.getLatLng(),i)})}};Ci.include(Vs),Ki.include(Vs),sr.include(Vs),Er.include({toGeoJSON:function(i){var c=!Jt(this._latlngs),g=ns(this._latlngs,c?1:0,!1,i);return pr(this,{type:(c?"Multi":"")+"LineString",coordinates:g})}}),Mi.include({toGeoJSON:function(i){var c=!Jt(this._latlngs),g=c&&!Jt(this._latlngs[0]),P=ns(this._latlngs,g?2:c?1:0,!0,i);return c||(P=[P]),pr(this,{type:(g?"Multi":"")+"Polygon",coordinates:P})}}),ir.include({toMultiPoint:function(i){var c=[];return this.eachLayer(function(g){c.push(g.toGeoJSON(i).geometry.coordinates)}),pr(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(i){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(i);var g=c==="GeometryCollection",P=[];return this.eachLayer(function(R){if(R.toGeoJSON){var ue=R.toGeoJSON(i);if(g)P.push(ue.geometry);else{var Ue=Fr(ue);Ue.type==="FeatureCollection"?P.push.apply(P,Ue.features):P.push(Ue)}}}),g?pr(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function jr(i,c){return new Ir(i,c)}var pi=jr,Cs=Xn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,c,g){this._url=i,this._bounds=se(c),D(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Cn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Os(this._image),this},bringToBack:function(){return this._map&&_s(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=se(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",c=this._image=i?this._url:Fn("img");if(Cn(c,"leaflet-image-layer"),this._zoomAnimated&&Cn(c,"leaflet-zoom-animated"),this.options.className&&Cn(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onload=u(this.fire,this,"load"),c.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(i){var c=this._map.getZoomScale(i.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;ys(this._image,g,c)},_reset:function(){var i=this._image,c=new ge(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=c.getSize();di(i,c.min),i.style.width=g.x+"px",i.style.height=g.y+"px"},_updateOpacity:function(){Zi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),or=function(i,c,g){return new Cs(i,c,g)},Ji=Cs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",c=this._image=i?this._url:Fn("video");if(Cn(c,"leaflet-image-layer"),this._zoomAnimated&&Cn(c,"leaflet-zoom-animated"),this.options.className&&Cn(c,this.options.className),c.onselectstart=b,c.onmousemove=b,c.onloadeddata=u(this.fire,this,"load"),i){for(var g=c.getElementsByTagName("source"),P=[],R=0;R<g.length;R++)P.push(g[R].src);this._url=g.length>0?P:[c.src];return}ie(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var ue=0;ue<this._url.length;ue++){var Ue=Fn("source");Ue.src=this._url[ue],c.appendChild(Ue)}}});function Oo(i,c,g){return new Ji(i,c,g)}var Da=Cs.extend({_initImage:function(){var i=this._image=this._url;Cn(i,"leaflet-image-layer"),this._zoomAnimated&&Cn(i,"leaflet-zoom-animated"),this.options.className&&Cn(i,this.options.className),i.onselectstart=b,i.onmousemove=b}});function Oa(i,c,g){return new Da(i,c,g)}var Yi=Xn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,c){i&&(i instanceof ce||ie(i))?(this._latlng=pe(i),D(this,c)):(D(this,i),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Zi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Zi(this._container,1),this.bringToFront(),this.options.interactive&&(Cn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Zi(this._container,0),this._removeTimeout=setTimeout(u(wn,void 0,this._container),200)):wn(this._container),this.options.interactive&&(zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=pe(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Os(this._container),this},bringToBack:function(){return this._map&&_s(this._container),this},_prepareOpen:function(i){var c=this._source;if(!c._map)return!1;if(c instanceof rr){c=null;var g=this._source._layers;for(var P in g)if(g[P]._map){c=g[P];break}if(!c)return!1;this._source=c}if(!i)if(c.getCenter)i=c.getCenter();else if(c.getLatLng)i=c.getLatLng();else if(c.getBounds)i=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")i.innerHTML=c;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),c=A(this.options.offset),g=this._getAnchor();this._zoomAnimated?di(this._container,i.add(g)):c=c.add(i).add(g);var P=this._containerBottom=-c.y,R=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=P+"px",this._container.style.left=R+"px"}},_getAnchor:function(){return[0,0]}});Bn.include({_initOverlay:function(i,c,g,P){var R=c;return R instanceof i||(R=new i(P).setContent(c)),g&&R.setLatLng(g),R}}),Xn.include({_initOverlay:function(i,c,g,P){var R=g;return R instanceof i?(D(R,P),R._source=this):(R=c&&!P?c:new i(P,this),R.setContent(g)),R}});var mr=Yi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Yi.prototype.openOn.call(this,i)},onAdd:function(i){Yi.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof dr||this._source.on("preclick",Fs))},onRemove:function(i){Yi.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof dr||this._source.off("preclick",Fs))},getEvents:function(){var i=Yi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",c=this._container=Fn("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=Fn("div",i+"-content-wrapper",c);if(this._contentNode=Fn("div",i+"-content",g),Eo(c),Pa(this._contentNode),xn(c,"contextmenu",Fs),this._tipContainer=Fn("div",i+"-tip-container",c),this._tip=Fn("div",i+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=Fn("a",i+"-close-button",c);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',xn(P,"click",function(R){vi(R),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,c=i.style;c.width="",c.whiteSpace="nowrap";var g=i.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),c.width=g+1+"px",c.whiteSpace="",c.height="";var P=i.offsetHeight,R=this.options.maxHeight,ue="leaflet-popup-scrolled";R&&P>R?(c.height=R+"px",Cn(i,ue)):zn(i,ue),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),g=this._getAnchor();di(this._container,c.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,c=parseInt(kr(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+c,P=this._containerWidth,R=new W(this._containerLeft,-g-this._containerBottom);R._add(bs(this._container));var ue=i.layerPointToContainerPoint(R),Ue=A(this.options.autoPanPadding),ft=A(this.options.autoPanPaddingTopLeft||Ue),_t=A(this.options.autoPanPaddingBottomRight||Ue),Bt=i.getSize(),Zt=0,an=0;ue.x+P+_t.x>Bt.x&&(Zt=ue.x+P-Bt.x+_t.x),ue.x-Zt-ft.x<0&&(Zt=ue.x-ft.x),ue.y+g+_t.y>Bt.y&&(an=ue.y+g-Bt.y+_t.y),ue.y-an-ft.y<0&&(an=ue.y-ft.y),(Zt||an)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([Zt,an]))}},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ao=function(i,c){return new mr(i,c)};Bn.mergeOptions({closePopupOnClick:!0}),Bn.include({openPopup:function(i,c,g){return this._initOverlay(mr,i,c,g).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Xn.include({bindPopup:function(i,c){return this._popup=this._initOverlay(mr,this._popup,i,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof rr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Pr(i);var c=i.layer||i.target;if(this._popup._source===c&&!(c instanceof dr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=c,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ks=Yi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Yi.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Yi.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Yi.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",c=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Fn("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var c,g,P=this._map,R=this._container,ue=P.latLngToContainerPoint(P.getCenter()),Ue=P.layerPointToContainerPoint(i),ft=this.options.direction,_t=R.offsetWidth,Bt=R.offsetHeight,Zt=A(this.options.offset),an=this._getAnchor();ft==="top"?(c=_t/2,g=Bt):ft==="bottom"?(c=_t/2,g=0):ft==="center"?(c=_t/2,g=Bt/2):ft==="right"?(c=0,g=Bt/2):ft==="left"?(c=_t,g=Bt/2):Ue.x<ue.x?(ft="right",c=0,g=Bt/2):(ft="left",c=_t+(Zt.x+an.x)*2,g=Bt/2),i=i.subtract(A(c,g,!0)).add(Zt).add(an),zn(R,"leaflet-tooltip-right"),zn(R,"leaflet-tooltip-left"),zn(R,"leaflet-tooltip-top"),zn(R,"leaflet-tooltip-bottom"),Cn(R,"leaflet-tooltip-"+ft),di(R,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Zi(this._container,i)},_animateZoom:function(i){var c=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(c)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ua=function(i,c){return new ks(i,c)};Bn.include({openTooltip:function(i,c,g){return this._initOverlay(ks,i,c,g).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Xn.include({bindTooltip:function(i,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ks,this._tooltip,i,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var c=i?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[c](g),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof rr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&(xn(c,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),xn(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var c=typeof i.getElement=="function"&&i.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var c=i.latlng,g,P;this._tooltip.options.sticky&&i.originalEvent&&(g=this._map.mouseEventToContainerPoint(i.originalEvent),P=this._map.containerPointToLayerPoint(g),c=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(c)}});var lo=ts.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var c=i&&i.tagName==="DIV"?i:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Xs(c),c.appendChild(g.html)):c.innerHTML=g.html!==!1?g.html:"",g.bgPos){var P=A(g.bgPos);c.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function uo(i){return new lo(i)}ts.Default=zs;var Hs=Xn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){D(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),wn(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Os(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_s(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof W?i:new W(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var c=this.getPane().children,g=-i(-1/0,1/0),P=0,R=c.length,ue;P<R;P++)ue=c[P].style.zIndex,c[P]!==this._container&&ue&&(g=i(g,+ue));isFinite(g)&&(this.options.zIndex=g+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ht.ielt9){Zi(this._container,this.options.opacity);var i=+new Date,c=!1,g=!1;for(var P in this._tiles){var R=this._tiles[P];if(!(!R.current||!R.loaded)){var ue=Math.min(1,(i-R.loaded)/200);Zi(R.el,ue),ue<1?c=!0:(R.active?g=!0:this._onOpaqueTile(R),R.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),c&&($(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Fn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,c=this.options.maxZoom;if(i!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===i?(this._levels[g].el.style.zIndex=c-Math.abs(i-g),this._onUpdateLevel(g)):(wn(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var P=this._levels[i],R=this._map;return P||(P=this._levels[i]={},P.el=Fn("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=c,P.origin=R.project(R.unproject(R.getPixelOrigin()),i).round(),P.zoom=i,this._setZoomTransform(P,R.getCenter(),R.getZoom()),b(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var i,c,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)c=this._tiles[i],c.retain=c.current;for(i in this._tiles)if(c=this._tiles[i],c.current&&!c.active){var P=c.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var c in this._tiles)this._tiles[c].coords.z===i&&this._removeTile(c)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)wn(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,c,g,P){var R=Math.floor(i/2),ue=Math.floor(c/2),Ue=g-1,ft=new W(+R,+ue);ft.z=+Ue;var _t=this._tileCoordsToKey(ft),Bt=this._tiles[_t];return Bt&&Bt.active?(Bt.retain=!0,!0):(Bt&&Bt.loaded&&(Bt.retain=!0),Ue>P?this._retainParent(R,ue,Ue,P):!1)},_retainChildren:function(i,c,g,P){for(var R=2*i;R<2*i+2;R++)for(var ue=2*c;ue<2*c+2;ue++){var Ue=new W(R,ue);Ue.z=g+1;var ft=this._tileCoordsToKey(Ue),_t=this._tiles[ft];if(_t&&_t.active){_t.retain=!0;continue}else _t&&_t.loaded&&(_t.retain=!0);g+1<P&&this._retainChildren(R,ue,g+1,P)}},_resetView:function(i){var c=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var c=this.options;return c.minNativeZoom!==void 0&&i<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<i?c.maxNativeZoom:i},_setView:function(i,c,g,P){var R=Math.round(c);this.options.maxZoom!==void 0&&R>this.options.maxZoom||this.options.minZoom!==void 0&&R<this.options.minZoom?R=void 0:R=this._clampZoom(R);var ue=this.options.updateWhenZooming&&R!==this._tileZoom;(!P||ue)&&(this._tileZoom=R,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),R!==void 0&&this._update(i),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(i,c)},_setZoomTransforms:function(i,c){for(var g in this._levels)this._setZoomTransform(this._levels[g],i,c)},_setZoomTransform:function(i,c,g){var P=this._map.getZoomScale(g,i.zoom),R=i.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(c,g)).round();Ht.any3d?ys(i.el,R,P):di(i.el,R)},_resetGrid:function(){var i=this._map,c=i.options.crs,g=this._tileSize=this.getTileSize(),P=this._tileZoom,R=this._map.getPixelWorldBounds(this._tileZoom);R&&(this._globalTileRange=this._pxBoundsToTileRange(R)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,c.wrapLng[0]],P).x/g.x),Math.ceil(i.project([0,c.wrapLng[1]],P).x/g.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([c.wrapLat[0],0],P).y/g.x),Math.ceil(i.project([c.wrapLat[1],0],P).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var c=this._map,g=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),P=c.getZoomScale(g,this._tileZoom),R=c.project(i,this._tileZoom).floor(),ue=c.getSize().divideBy(P*2);return new ge(R.subtract(ue),R.add(ue))},_update:function(i){var c=this._map;if(c){var g=this._clampZoom(c.getZoom());if(i===void 0&&(i=c.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(i),R=this._pxBoundsToTileRange(P),ue=R.getCenter(),Ue=[],ft=this.options.keepBuffer,_t=new ge(R.getBottomLeft().subtract([ft,-ft]),R.getTopRight().add([ft,-ft]));if(!(isFinite(R.min.x)&&isFinite(R.min.y)&&isFinite(R.max.x)&&isFinite(R.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Bt in this._tiles){var Zt=this._tiles[Bt].coords;(Zt.z!==this._tileZoom||!_t.contains(new W(Zt.x,Zt.y)))&&(this._tiles[Bt].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(i,g);return}for(var an=R.min.y;an<=R.max.y;an++)for(var An=R.min.x;An<=R.max.x;An++){var ur=new W(An,an);if(ur.z=this._tileZoom,!!this._isValidTile(ur)){var Ti=this._tiles[this._tileCoordsToKey(ur)];Ti?Ti.current=!0:Ue.push(ur)}}if(Ue.sort(function(mi,Es){return mi.distanceTo(ue)-Es.distanceTo(ue)}),Ue.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _r=document.createDocumentFragment();for(An=0;An<Ue.length;An++)this._addTile(Ue[An],_r);this._level.el.appendChild(_r)}}}},_isValidTile:function(i){var c=this._map.options.crs;if(!c.infinite){var g=this._globalTileRange;if(!c.wrapLng&&(i.x<g.min.x||i.x>g.max.x)||!c.wrapLat&&(i.y<g.min.y||i.y>g.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(i);return se(this.options.bounds).overlaps(P)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var c=this._map,g=this.getTileSize(),P=i.scaleBy(g),R=P.add(g),ue=c.unproject(P,i.z),Ue=c.unproject(R,i.z);return[ue,Ue]},_tileCoordsToBounds:function(i){var c=this._tileCoordsToNwSe(i),g=new G(c[0],c[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var c=i.split(":"),g=new W(+c[0],+c[1]);return g.z=+c[2],g},_removeTile:function(i){var c=this._tiles[i];c&&(wn(c.el),delete this._tiles[i],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Cn(i,"leaflet-tile");var c=this.getTileSize();i.style.width=c.x+"px",i.style.height=c.y+"px",i.onselectstart=b,i.onmousemove=b,Ht.ielt9&&this.options.opacity<1&&Zi(i,this.options.opacity)},_addTile:function(i,c){var g=this._getTilePos(i),P=this._tileCoordsToKey(i),R=this.createTile(this._wrapCoords(i),u(this._tileReady,this,i));this._initTile(R),this.createTile.length<2&&q(u(this._tileReady,this,i,null,R)),di(R,g),this._tiles[P]={el:R,coords:i,current:!0},c.appendChild(R),this.fire("tileloadstart",{tile:R,coords:i})},_tileReady:function(i,c,g){c&&this.fire("tileerror",{error:c,tile:g,coords:i});var P=this._tileCoordsToKey(i);g=this._tiles[P],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Zi(g.el,0),$(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),c||(Cn(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ht.ielt9||!this._map._fadeAnimated?q(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var c=new W(this._wrapX?w(i.x,this._wrapX):i.x,this._wrapY?w(i.y,this._wrapY):i.y);return c.z=i.z,c},_pxBoundsToTileRange:function(i){var c=this.getTileSize();return new ge(i.min.unscaleBy(c).floor(),i.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function zr(i){return new Hs(i)}var zi=Hs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,c){this._url=i,c=D(this,c),c.detectRetina&&Ht.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,c){return this._url===i&&c===void 0&&(c=!0),this._url=i,c||this.redraw(),this},createTile:function(i,c){var g=document.createElement("img");return xn(g,"load",u(this._tileOnLoad,this,c,g)),xn(g,"error",u(this._tileOnError,this,c,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(i),g},getTileUrl:function(i){var c={r:Ht.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-i.y;this.options.tms&&(c.y=g),c["-y"]=g}return Q(this._url,o(c,this.options))},_tileOnLoad:function(i,c){Ht.ielt9?setTimeout(u(i,this,null,c),0):i(null,c)},_tileOnError:function(i,c,g){var P=this.options.errorTileUrl;P&&c.getAttribute("src")!==P&&(c.src=P),i(g,c)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,c=this.options.maxZoom,g=this.options.zoomReverse,P=this.options.zoomOffset;return g&&(i=c-i),i+P},_getSubdomain:function(i){var c=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var i,c;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(c=this._tiles[i].el,c.onload=b,c.onerror=b,!c.complete)){c.src=we;var g=this._tiles[i].coords;wn(c),delete this._tiles[i],this.fire("tileabort",{tile:c,coords:g})}},_removeTile:function(i){var c=this._tiles[i];if(c)return c.el.setAttribute("src",we),Hs.prototype._removeTile.call(this,i)},_tileReady:function(i,c,g){if(!(!this._map||g&&g.getAttribute("src")===we))return Hs.prototype._tileReady.call(this,i,c,g)}});function Jn(i,c){return new zi(i,c)}var Gn=zi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,c){this._url=i;var g=o({},this.defaultWmsParams);for(var P in c)P in this.options||(g[P]=c[P]);c=D(this,c);var R=c.detectRetina&&Ht.retina?2:1,ue=this.getTileSize();g.width=ue.x*R,g.height=ue.y*R,this.wmsParams=g},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,zi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var c=this._tileCoordsToNwSe(i),g=this._crs,P=I(g.project(c[0]),g.project(c[1])),R=P.min,ue=P.max,Ue=(this._wmsVersion>=1.3&&this._crs===Li?[R.y,R.x,ue.y,ue.x]:[R.x,R.y,ue.x,ue.y]).join(","),ft=zi.prototype.getTileUrl.call(this,i);return ft+U(this.wmsParams,ft,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ue},setParams:function(i,c){return o(this.wmsParams,i),c||this.redraw(),this}});function yi(i,c){return new Gn(i,c)}zi.WMS=Gn,Jn.wms=yi;var Qn=Xn.extend({options:{padding:.1},initialize:function(i){D(this,i),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Cn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,c){var g=this._map.getZoomScale(c,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),R=this._map.project(this._center,c),ue=P.multiplyBy(-g).add(R).subtract(this._map._getNewPixelOrigin(i,c));Ht.any3d?ys(this._container,ue,g):di(this._container,ue)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,c=this._map.getSize(),g=this._map.containerPointToLayerPoint(c.multiplyBy(-i)).round();this._bounds=new ge(g,g.add(c.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),is=Qn.extend({options:{tolerance:0},getEvents:function(){var i=Qn.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");xn(i,"mousemove",this._onMouseMove,this),xn(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),xn(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,wn(this._container),On(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var c in this._layers)i=this._layers[c],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var i=this._bounds,c=this._container,g=i.getSize(),P=Ht.retina?2:1;di(c,i.min),c.width=P*g.x,c.height=P*g.y,c.style.width=g.x+"px",c.style.height=g.y+"px",Ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Qn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[m(i)]=i;var c=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var c=i._order,g=c.next,P=c.prev;g?g.prev=P:this._drawLast=P,P?P.next=g:this._drawFirst=g,delete i._order,delete this._layers[m(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var c=i.options.dashArray.split(/[, ]+/),g=[],P,R;for(R=0;R<c.length;R++){if(P=Number(c[R]),isNaN(P))return;g.push(P)}i.options._dashArray=g}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||q(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var c=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ge,this._redrawBounds.extend(i._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(i._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var c=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,c=this._redrawBounds;if(this._ctx.save(),c){var g=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)i=P.layer,(!c||i._pxBounds&&i._pxBounds.intersects(c))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,c){if(this._drawing){var g,P,R,ue,Ue=i._parts,ft=Ue.length,_t=this._ctx;if(ft){for(_t.beginPath(),g=0;g<ft;g++){for(P=0,R=Ue[g].length;P<R;P++)ue=Ue[g][P],_t[P?"lineTo":"moveTo"](ue.x,ue.y);c&&_t.closePath()}this._fillStroke(_t,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var c=i._point,g=this._ctx,P=Math.max(Math.round(i._radius),1),R=(Math.max(Math.round(i._radiusY),1)||P)/P;R!==1&&(g.save(),g.scale(1,R)),g.beginPath(),g.arc(c.x,c.y/R,P,0,Math.PI*2,!1),R!==1&&g.restore(),this._fillStroke(g,i)}},_fillStroke:function(i,c){var g=c.options;g.fill&&(i.globalAlpha=g.fillOpacity,i.fillStyle=g.fillColor||g.color,i.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(i.setLineDash&&i.setLineDash(c.options&&c.options._dashArray||[]),i.globalAlpha=g.opacity,i.lineWidth=g.weight,i.strokeStyle=g.color,i.lineCap=g.lineCap,i.lineJoin=g.lineJoin,i.stroke())},_onClick:function(i){for(var c=this._map.mouseEventToLayerPoint(i),g,P,R=this._drawFirst;R;R=R.next)g=R.layer,g.options.interactive&&g._containsPoint(c)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(g))&&(P=g);this._fireEvent(P?[P]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,c)}},_handleMouseOut:function(i){var c=this._hoveredLayer;c&&(zn(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,c){if(!this._mouseHoverThrottled){for(var g,P,R=this._drawFirst;R;R=R.next)g=R.layer,g.options.interactive&&g._containsPoint(c)&&(P=g);P!==this._hoveredLayer&&(this._handleMouseOut(i),P&&(Cn(this._container,"leaflet-interactive"),this._fireEvent([P],i,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,c,g){this._map._fireDOMEvent(c,g||c.type,i)},_bringToFront:function(i){var c=i._order;if(c){var g=c.next,P=c.prev;if(g)g.prev=P;else return;P?P.next=g:g&&(this._drawFirst=g),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(i)}},_bringToBack:function(i){var c=i._order;if(c){var g=c.next,P=c.prev;if(P)P.next=g;else return;g?g.prev=P:P&&(this._drawLast=P),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(i)}}});function co(i){return Ht.canvas?new is(i):null}var Ps=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),il={_initContainer:function(){this._container=Fn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qn.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var c=i._container=Ps("shape");Cn(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",i._path=Ps("path"),c.appendChild(i._path),this._updateStyle(i),this._layers[m(i)]=i},_addPath:function(i){var c=i._container;this._container.appendChild(c),i.options.interactive&&i.addInteractiveTarget(c)},_removePath:function(i){var c=i._container;wn(c),i.removeInteractiveTarget(c),delete this._layers[m(i)]},_updateStyle:function(i){var c=i._stroke,g=i._fill,P=i.options,R=i._container;R.stroked=!!P.stroke,R.filled=!!P.fill,P.stroke?(c||(c=i._stroke=Ps("stroke")),R.appendChild(c),c.weight=P.weight+"px",c.color=P.color,c.opacity=P.opacity,P.dashArray?c.dashStyle=ie(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=P.lineCap.replace("butt","flat"),c.joinstyle=P.lineJoin):c&&(R.removeChild(c),i._stroke=null),P.fill?(g||(g=i._fill=Ps("fill")),R.appendChild(g),g.color=P.fillColor||P.color,g.opacity=P.fillOpacity):g&&(R.removeChild(g),i._fill=null)},_updateCircle:function(i){var c=i._point.round(),g=Math.round(i._radius),P=Math.round(i._radiusY||g);this._setPath(i,i._empty()?"M0 0":"AL "+c.x+","+c.y+" "+g+","+P+" 0,"+65535*360)},_setPath:function(i,c){i._path.v=c},_bringToFront:function(i){Os(i._container)},_bringToBack:function(i){_s(i._container)}},ho=Ht.vml?Ps:Ae,Bi=Qn.extend({_initContainer:function(){this._container=ho("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ho("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wn(this._container),On(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var i=this._bounds,c=i.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,g.setAttribute("width",c.x),g.setAttribute("height",c.y)),di(g,i.min),g.setAttribute("viewBox",[i.min.x,i.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(i){var c=i._path=ho("path");i.options.className&&Cn(c,i.options.className),i.options.interactive&&Cn(c,"leaflet-interactive"),this._updateStyle(i),this._layers[m(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){wn(i._path),i.removeInteractiveTarget(i._path),delete this._layers[m(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var c=i._path,g=i.options;c&&(g.stroke?(c.setAttribute("stroke",g.color),c.setAttribute("stroke-opacity",g.opacity),c.setAttribute("stroke-width",g.weight),c.setAttribute("stroke-linecap",g.lineCap),c.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?c.setAttribute("stroke-dasharray",g.dashArray):c.removeAttribute("stroke-dasharray"),g.dashOffset?c.setAttribute("stroke-dashoffset",g.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),g.fill?(c.setAttribute("fill",g.fillColor||g.color),c.setAttribute("fill-opacity",g.fillOpacity),c.setAttribute("fill-rule",g.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(i,c){this._setPath(i,ee(i._parts,c))},_updateCircle:function(i){var c=i._point,g=Math.max(Math.round(i._radius),1),P=Math.max(Math.round(i._radiusY),1)||g,R="a"+g+","+P+" 0 1,0 ",ue=i._empty()?"M0 0":"M"+(c.x-g)+","+c.y+R+g*2+",0 "+R+-g*2+",0 ";this._setPath(i,ue)},_setPath:function(i,c){i._path.setAttribute("d",c)},_bringToFront:function(i){Os(i._path)},_bringToBack:function(i){_s(i._path)}});Ht.vml&&Bi.include(il);function ei(i){return Ht.svg||Ht.vml?new Bi(i):null}Bn.include({getRenderer:function(i){var c=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var c=this._paneRenderers[i];return c===void 0&&(c=this._createRenderer({pane:i}),this._paneRenderers[i]=c),c},_createRenderer:function(i){return this.options.preferCanvas&&co(i)||ei(i)}});var gr=Mi.extend({initialize:function(i,c){Mi.prototype.initialize.call(this,this._boundsToLatLngs(i),c)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=se(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function vr(i,c){return new gr(i,c)}Bi.create=ho,Bi.pointsToPath=ee,Ir.geometryToLayer=Do,Ir.coordsToLatLng=Ls,Ir.coordsToLatLngs=ji,Ir.latLngToCoords=Oi,Ir.latLngsToCoords=ns,Ir.getFeature=pr,Ir.asFeature=Fr,Bn.mergeOptions({boxZoom:!0});var pn=Ei.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){xn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){On(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),So(),Ca(),this._startPoint=this._map.mouseEventToContainerPoint(i),xn(document,{contextmenu:Pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Fn("div","leaflet-zoom-box",this._container),Cn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var c=new ge(this._point,this._startPoint),g=c.getSize();di(this._box,c.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(wn(this._box),zn(this._container,"leaflet-crosshair")),Rs(),es(),On(document,{contextmenu:Pr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var c=new G(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bn.addInitHook("addHandler","boxZoom",pn),Bn.mergeOptions({doubleClickZoom:!0});var rl=Ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var c=this._map,g=c.getZoom(),P=c.options.zoomDelta,R=i.originalEvent.shiftKey?g-P:g+P;c.options.doubleClickZoom==="center"?c.setZoom(R):c.setZoomAround(i.containerPoint,R)}});Bn.addInitHook("addHandler","doubleClickZoom",rl),Bn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ro=Ei.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Rr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Cn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zn(this._map._container,"leaflet-grab"),zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=se(this._map.options.maxBounds);this._offsetLimit=I(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var c=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(c),this._prunePositions(c)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,c){return i-(i-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;i.x<c.min.x&&(i.x=this._viscousLimit(i.x,c.min.x)),i.y<c.min.y&&(i.y=this._viscousLimit(i.y,c.min.y)),i.x>c.max.x&&(i.x=this._viscousLimit(i.x,c.max.x)),i.y>c.max.y&&(i.y=this._viscousLimit(i.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,c=Math.round(i/2),g=this._initialWorldOffset,P=this._draggable._newPos.x,R=(P-c+g)%i+c-g,ue=(P+c+g)%i-c-g,Ue=Math.abs(R+g)<Math.abs(ue+g)?R:ue;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ue},_onDragEnd:function(i){var c=this._map,g=c.options,P=!g.inertia||i.noInertia||this._times.length<2;if(c.fire("dragend",i),P)c.fire("moveend");else{this._prunePositions(+new Date);var R=this._lastPos.subtract(this._positions[0]),ue=(this._lastTime-this._times[0])/1e3,Ue=g.easeLinearity,ft=R.multiplyBy(Ue/ue),_t=ft.distanceTo([0,0]),Bt=Math.min(g.inertiaMaxSpeed,_t),Zt=ft.multiplyBy(Bt/_t),an=Bt/(g.inertiaDeceleration*Ue),An=Zt.multiplyBy(-an/2).round();!An.x&&!An.y?c.fire("moveend"):(An=c._limitOffset(An,c.options.maxBounds),q(function(){c.panBy(An,{duration:an,easeLinearity:Ue,noMoveStart:!0,animate:!0})}))}}});Bn.addInitHook("addHandler","dragging",Ro),Bn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ur=Ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),xn(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),On(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,c=document.documentElement,g=i.scrollTop||c.scrollTop,P=i.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(P,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var c=this._panKeys={},g=this.keyCodes,P,R;for(P=0,R=g.left.length;P<R;P++)c[g.left[P]]=[-1*i,0];for(P=0,R=g.right.length;P<R;P++)c[g.right[P]]=[i,0];for(P=0,R=g.down.length;P<R;P++)c[g.down[P]]=[0,i];for(P=0,R=g.up.length;P<R;P++)c[g.up[P]]=[0,-1*i]},_setZoomDelta:function(i){var c=this._zoomKeys={},g=this.keyCodes,P,R;for(P=0,R=g.zoomIn.length;P<R;P++)c[g.zoomIn[P]]=i;for(P=0,R=g.zoomOut.length;P<R;P++)c[g.zoomOut[P]]=-i},_addHooks:function(){xn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){On(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var c=i.keyCode,g=this._map,P;if(c in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(P=this._panKeys[c],i.shiftKey&&(P=A(P).multiplyBy(3)),g.options.maxBounds&&(P=g._limitOffset(A(P),g.options.maxBounds)),g.options.worldCopyJump){var R=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(P)));g.panTo(R)}else g.panBy(P)}else if(c in this._zoomKeys)g.setZoom(g.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;Pr(i)}}});Bn.addInitHook("addHandler","keyboard",Ur),Bn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xi=Ei.extend({addHooks:function(){xn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){On(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var c=ta(i),g=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var P=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),P),Pr(i)},_performZoom:function(){var i=this._map,c=i.getZoom(),g=this._map.options.zoomSnap||0;i._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),R=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,ue=g?Math.ceil(R/g)*g:R,Ue=i._limitZoom(c+(this._delta>0?ue:-ue))-c;this._delta=0,this._startTime=null,Ue&&(i.options.scrollWheelZoom==="center"?i.setZoom(c+Ue):i.setZoomAround(this._lastMousePos,c+Ue))}});Bn.addInitHook("addHandler","scrollWheelZoom",Xi);var Nl=600;Bn.mergeOptions({tapHold:Ht.touchNative&&Ht.safari&&Ht.mobile,tapTolerance:15});var ar=Ei.extend({addHooks:function(){xn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){On(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var c=i.touches[0];this._startPos=this._newPos=new W(c.clientX,c.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(xn(document,"touchend",vi),xn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Nl),xn(document,"touchend touchcancel contextmenu",this._cancel,this),xn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){On(document,"touchend",vi),On(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),On(document,"touchend touchcancel contextmenu",this._cancel,this),On(document,"touchmove",this._onMove,this)},_onMove:function(i){var c=i.touches[0];this._newPos=new W(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,c){var g=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});g._simulated=!0,c.target.dispatchEvent(g)}});Bn.addInitHook("addHandler","tapHold",ar),Bn.mergeOptions({touchZoom:Ht.touch,bounceAtZoomLimits:!0});var lr=Ei.extend({addHooks:function(){Cn(this._map._container,"leaflet-touch-zoom"),xn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zn(this._map._container,"leaflet-touch-zoom"),On(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var c=this._map;if(!(!i.touches||i.touches.length!==2||c._animatingZoom||this._zooming)){var g=c.mouseEventToContainerPoint(i.touches[0]),P=c.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(g.add(P)._divideBy(2))),this._startDist=g.distanceTo(P),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),xn(document,"touchmove",this._onTouchMove,this),xn(document,"touchend touchcancel",this._onTouchEnd,this),vi(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var c=this._map,g=c.mouseEventToContainerPoint(i.touches[0]),P=c.mouseEventToContainerPoint(i.touches[1]),R=g.distanceTo(P)/this._startDist;if(this._zoom=c.getScaleZoom(R,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&R<1||this._zoom>c.getMaxZoom()&&R>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,R===1)return}else{var ue=g._add(P)._divideBy(2)._subtract(this._centerPoint);if(R===1&&ue.x===0&&ue.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(ue),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var Ue=u(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=q(Ue,this,!0),vi(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),On(document,"touchmove",this._onTouchMove,this),On(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bn.addInitHook("addHandler","touchZoom",lr),Bn.BoxZoom=pn,Bn.DoubleClickZoom=rl,Bn.Drag=Ro,Bn.Keyboard=Ur,Bn.ScrollWheelZoom=Xi,Bn.TapHold=ar,Bn.TouchZoom=lr,n.Bounds=ge,n.Browser=Ht,n.CRS=oe,n.Canvas=is,n.Circle=Ki,n.CircleMarker=sr,n.Class=B,n.Control=un,n.DivIcon=lo,n.DivOverlay=Yi,n.DomEvent=Mo,n.DomUtil=yn,n.Draggable=Rr,n.Evented=ne,n.FeatureGroup=rr,n.GeoJSON=Ir,n.GridLayer=Hs,n.Handler=Ei,n.Icon=ts,n.ImageOverlay=Cs,n.LatLng=ce,n.LatLngBounds=G,n.Layer=Xn,n.LayerGroup=ir,n.LineUtil=Tn,n.Map=Bn,n.Marker=Ci,n.Mixin=el,n.Path=dr,n.Point=W,n.PolyUtil=oa,n.Polygon=Mi,n.Polyline=Er,n.Popup=mr,n.PosAnimation=Sa,n.Projection=Hn,n.Rectangle=gr,n.Renderer=Qn,n.SVG=Bi,n.SVGOverlay=Da,n.TileLayer=zi,n.Tooltip=ks,n.Transformation=qe,n.Util=Se,n.VideoOverlay=Ji,n.bind=u,n.bounds=I,n.canvas=co,n.circle=qs,n.circleMarker=la,n.control=nr,n.divIcon=uo,n.extend=o,n.featureGroup=Ta,n.geoJSON=jr,n.geoJson=pi,n.gridLayer=zr,n.icon=Na,n.imageOverlay=or,n.latLng=pe,n.latLngBounds=se,n.layerGroup=tl,n.map=Ea,n.marker=aa,n.point=A,n.polygon=xs,n.polyline=nl,n.popup=ao,n.rectangle=vr,n.setOptions=D,n.stamp=m,n.svg=ei,n.svgOverlay=Oa,n.tileLayer=Jn,n.tooltip=ua,n.transformation=J,n.version=r,n.videoOverlay=Oo;var Ss=window.L;n.noConflict=function(){return window.L=Ss,this},window.L=n})})(md,md.exports);var Ri=md.exports;const wt=w1(Ri);var U0={exports:{}};(function(e,t){(function(n,r){r(t)})(go,function(n){var r=typeof window<"u"?window:typeof go<"u"?go:typeof self<"u"?self:{};function o(_,w){return _(w={exports:{}},w.exports),w.exports}var a=o(function(_,w){(function(b){const E={escape:function(K){return K.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:x,mimeType:function(K){return K=x(K).toLowerCase(),function(){var H="application/font-woff",ne="image/jpeg";return{woff:H,woff2:H,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ne,jpeg:ne,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[K]||""},dataAsUrl:function(K,H){return`data:${H};base64,`+K},isDataUrl:function(K){return K.search(/^(data:)/)!==-1},canvasToBlob:function(K){return K.toBlob?new Promise(function(ne){K.toBlob(ne)}):(H=K,new Promise(function(ne){const W=Ee(H.toDataURL().split(",")[1]);var z=W.length;const A=new Uint8Array(z);for(let ge=0;ge<z;ge++)A[ge]=W.charCodeAt(ge);ne(new Blob([A],{type:"image/png"}))}));var H},resolveUrl:function(K,H){const ne=document.implementation.createHTMLDocument(),W=ne.createElement("base"),z=(ne.head.appendChild(W),ne.createElement("a"));return ne.body.appendChild(z),W.href=H,z.href=K,z.href},getAndEncode:function(K){let H=we.impl.urlCache.find(function(ne){return ne.url===K});return H||(H={url:K,promise:null},we.impl.urlCache.push(H)),H.promise===null&&(we.impl.options.cacheBust&&(K+=(/\?/.test(K)?"&":"?")+new Date().getTime()),H.promise=new Promise(function(ne){const W=we.impl.options.httpTimeout,z=new XMLHttpRequest;let A;var ge;function I(G){console.error(G),ne("")}z.onreadystatechange=function(){if(z.readyState===4)if(z.status!==200)A?ne(A):I(`cannot fetch resource: ${K}, status: `+z.status);else{const G=new FileReader;G.onloadend=function(){var se=G.result.split(/,/)[1];ne(se)},G.readAsDataURL(z.response)}},z.ontimeout=function(){A?ne(A):I(`timeout of ${W}ms occured while fetching resource: `+K)},z.responseType="blob",z.timeout=W,we.impl.options.useCredentials&&(z.withCredentials=!0),z.open("GET",K,!0),z.send(),we.impl.options.imagePlaceholder&&(ge=we.impl.options.imagePlaceholder.split(/,/))&&ge[1]&&(A=ge[1])})),H.promise},uid:function(){let K=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+K++}}(),delay:function(K){return function(H){return new Promise(function(ne){setTimeout(function(){ne(H)},K)})}},asArray:function(K){const H=[],ne=K.length;for(let W=0;W<ne;W++)H.push(K[W]);return H},escapeXhtml:function(K){return K.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(K){return K!=="data:,"?new Promise(function(H,ne){const W=new Image;we.impl.options.useCredentials&&(W.crossOrigin="use-credentials"),W.onload=function(){H(W)},W.onerror=ne,W.src=K}):Promise.resolve()},width:function(K){var H=F(K,"border-left-width"),ne=F(K,"border-right-width");return K.scrollWidth+H+ne},height:function(K){var H=F(K,"border-top-width"),ne=F(K,"border-bottom-width");return K.scrollHeight+H+ne}};function x(K){return(K=/\.([^\.\/]*?)(\?|$)/g.exec(K))?K[1]:""}function F(K,H){const ne=Pe(K).getPropertyValue(H);return parseFloat(ne.replace("px",""))}const D=function(){const K=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(z,A,ge){return H(z)?Promise.resolve(z).then(ne).then(function(I){let G=Promise.resolve(z);return I.forEach(function(se){G=G.then(function(ce){return W(ce,se,A,ge)})}),G}):Promise.resolve(z)},shouldProcess:H,impl:{readUrls:ne,inline:W}};function H(z){return z.search(K)!==-1}function ne(z){const A=[];for(var ge;(ge=K.exec(z))!==null;)A.push(ge[1]);return A.filter(function(I){return!E.isDataUrl(I)})}function W(z,A,ge,I){return Promise.resolve(A).then(function(G){return ge?E.resolveUrl(G,ge):G}).then(I||E.getAndEncode).then(function(G){return E.dataAsUrl(G,E.mimeType(A))}).then(function(G){return z.replace((se=A,new RegExp(`(url\\(['"]?)(${E.escape(se)})(['"]?\\))`,"g")),`$1${G}$3`);var se})}}(),U={resolveAll:function(){return j().then(function(K){return Promise.all(K.map(function(H){return H.resolve()}))}).then(function(K){return K.join(`
`)})},impl:{readAll:j}};function j(){return Promise.resolve(E.asArray(document.styleSheets)).then(function(H){const ne=[];return H.forEach(function(W){if(Object.getPrototypeOf(W).hasOwnProperty("cssRules"))try{E.asArray(W.cssRules||[]).forEach(ne.push.bind(ne))}catch(z){console.log("Error while reading CSS rules from "+W.href,z.toString())}}),ne}).then(function(H){return H.filter(function(ne){return ne.type===CSSRule.FONT_FACE_RULE}).filter(function(ne){return D.shouldProcess(ne.style.getPropertyValue("src"))})}).then(function(H){return H.map(K)});function K(H){return{resolve:function(){var ne=(H.parentStyleSheet||{}).href;return D.inlineAll(H.cssText,ne)},src:function(){return H.style.getPropertyValue("src")}}}}const Q={inlineAll:function K(H){return H instanceof Element?function(ne){const W=ne.style.getPropertyValue("background");return W?D.inlineAll(W).then(function(z){ne.style.setProperty("background",z,W)}).then(function(){return ne}):Promise.resolve(ne)}(H).then(function(){return H instanceof HTMLImageElement?ie(H).inline():Promise.all(E.asArray(H.childNodes).map(function(ne){return K(ne)}))}):Promise.resolve(H)},impl:{newImage:ie}};function ie(K){return{inline:function(H){return E.isDataUrl(K.src)?Promise.resolve():Promise.resolve(K.src).then(H||E.getAndEncode).then(function(ne){return E.dataAsUrl(ne,E.mimeType(K.src))}).then(function(ne){return new Promise(function(W){K.onload=W,K.onerror=W,K.src=ne})})}}}const ye={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},we={toSvg:fe,toPng:function(K,H){return(H=H||{}).raster=!0,Te(K,H).then(function(ne){return ne.toDataURL()})},toJpeg:function(K,H){return(H=H||{}).raster=!0,Te(K,H).then(function(ne){return ne.toDataURL("image/jpeg",H.quality||1)})},toBlob:function(K,H){return(H=H||{}).raster=!0,Te(K,H).then(E.canvasToBlob)},toPixelData:function(K,H){return(H=H||{}).raster=!0,Te(K,H).then(function(ne){return ne.getContext("2d").getImageData(0,0,E.width(K),E.height(K)).data})},toCanvas:function(K,H){return(H=H||{}).raster=!0,Te(K,H||{})},impl:{fontFaces:U,images:Q,util:E,inliner:D,urlCache:[],options:{}}},Pe=(_.exports=we,b.getComputedStyle||window.getComputedStyle),Ee=b.atob||window.atob;function fe(K,H){var ne=H=H||{};return ne.imagePlaceholder===void 0?we.impl.options.imagePlaceholder=ye.imagePlaceholder:we.impl.options.imagePlaceholder=ne.imagePlaceholder,ne.cacheBust===void 0?we.impl.options.cacheBust=ye.cacheBust:we.impl.options.cacheBust=ne.cacheBust,ne.useCredentials===void 0?we.impl.options.useCredentials=ye.useCredentials:we.impl.options.useCredentials=ne.useCredentials,Promise.resolve(K).then(function(W){return function z(A,ge,I,G,se=null){return I||!ge||ge(A)?Promise.resolve(A).then(function(ce){return ce instanceof HTMLCanvasElement?E.makeImage(ce.toDataURL()):ce.nodeName==="IFRAME"?html2canvas(ce.contentDocument.body).then(pe=>pe.toDataURL()).then(E.makeImage):ce.cloneNode(!1)}).then(function(ce){return function(pe,oe){const xe=pe.childNodes;return xe.length===0?Promise.resolve(oe):function(me,je){const qe=Pe(pe);let J=Promise.resolve();return je.forEach(function(te){J=J.then(function(){return z(te,ge,!1,G,qe)}).then(function(Ne){Ne&&me.appendChild(Ne)})}),J}(oe,E.asArray(xe)).then(function(){return oe})}(A,ce)}).then(function(ce){return function(pe,oe,xe){return oe instanceof Element?Promise.resolve().then(function(){(function(me,je){const qe=Pe(me);qe.cssText?(je.style.cssText=qe.cssText,function(J,te){te.font=J.font,te.fontFamily=J.fontFamily,te.fontFeatureSettings=J.fontFeatureSettings,te.fontKerning=J.fontKerning,te.fontSize=J.fontSize,te.fontStretch=J.fontStretch,te.fontStyle=J.fontStyle,te.fontVariant=J.fontVariant,te.fontVariantCaps=J.fontVariantCaps,te.fontVariantEastAsian=J.fontVariantEastAsian,te.fontVariantLigatures=J.fontVariantLigatures,te.fontVariantNumeric=J.fontVariantNumeric,te.fontVariationSettings=J.fontVariationSettings,te.fontWeight=J.fontWeight}(qe,je.style)):(xe?function(J,te,Ne,Ae){const ee=Ne.style,We=J.style;for(var et of te){var Xe=te.getPropertyValue(et),Oe=We.getPropertyValue(et),ke=(We.setProperty(et,Ae?"initial":"unset"),te.getPropertyValue(et));ke!==Xe?ee.setProperty(et,Xe):ee.removeProperty(et),We.setProperty(et,Oe)}}(me,qe,je,I):function(J,te,Ne){const Ae=function(We){if(B[We])return B[We];Se||((Se=document.createElement("iframe")).style.visibility="hidden",Se.style.position="fixed",document.body.appendChild(Se),Se.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const et=document.createElement(We),Xe=(Se.contentWindow.document.body.appendChild(et),et.textContent=".",Se.contentWindow.getComputedStyle(et)),Oe={};return E.asArray(Xe).forEach(function(ke){Oe[ke]=ke==="width"||ke==="height"?"auto":Xe.getPropertyValue(ke)}),Se.contentWindow.document.body.removeChild(et),B[We]=Oe}(Ne.tagName),ee=Ne.style;E.asArray(J).forEach(function(We){var et=J.getPropertyValue(We);(et!==Ae[We]||te&&et!==te.getPropertyValue(We))&&ee.setProperty(We,et,J.getPropertyPriority(We))})}(qe,se,je),I&&(["inset-block","inset-block-start","inset-block-end"].forEach(J=>je.style.removeProperty(J)),["left","right","top","bottom"].forEach(J=>{je.style.getPropertyValue(J)&&je.style.setProperty(J,"0px")})))})(pe,oe)}).then(function(){[":before",":after"].forEach(function(me){(function(je){const qe=Pe(pe,je),J=qe.getPropertyValue("content");if(J!==""&&J!=="none"){const te=E.uid(),Ne=oe.getAttribute("class"),Ae=(Ne&&oe.setAttribute("class",Ne+" "+te),document.createElement("style"));Ae.appendChild(function(){const ee=`.${te}:`+je,We=(qe.cssText?function(){return`${qe.cssText} content: ${qe.getPropertyValue("content")};`}:function(){return E.asArray(qe).map(function(et){return et+": "+qe.getPropertyValue(et)+(qe.getPropertyPriority(et)?" !important":"")}).join("; ")+";"})();return document.createTextNode(ee+`{${We}}`)}()),oe.appendChild(Ae)}})(me)})}).then(function(){pe instanceof HTMLTextAreaElement&&(oe.innerHTML=pe.value),pe instanceof HTMLInputElement&&oe.setAttribute("value",pe.value)}).then(function(){oe instanceof SVGElement&&(oe.setAttribute("xmlns","http://www.w3.org/2000/svg"),oe instanceof SVGRectElement&&["width","height"].forEach(function(me){const je=oe.getAttribute(me);je&&oe.style.setProperty(me,je)}))}).then(function(){return oe}):oe}(A,ce,G)}):Promise.resolve()}(W,H.filter,!0,!H.raster)}).then($e).then(q).then(function(W){H.bgcolor&&(W.style.backgroundColor=H.bgcolor),H.width&&(W.style.width=H.width+"px"),H.height&&(W.style.height=H.height+"px"),H.style&&Object.keys(H.style).forEach(function(A){W.style[A]=H.style[A]});let z=null;return typeof H.onclone=="function"&&(z=H.onclone(W)),Promise.resolve(z).then(function(){return W})}).then(function(W){return W=W,z=H.width||E.width(K),A=H.height||E.height(K),Promise.resolve(W).then(function(ge){return ge.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(ge)}).then(E.escapeXhtml).then(function(ge){return`<foreignObject x="0" y="0" width="100%" height="100%">${ge}</foreignObject>`}).then(function(ge){return`<svg xmlns="http://www.w3.org/2000/svg" width="${z}" height="${A}">${ge}</svg>`}).then(function(ge){return"data:image/svg+xml;charset=utf-8,"+ge});var z,A}).then(function(W){return we.impl.urlCache=[],W})}function Te(K,H){return fe(K,H).then(E.makeImage).then(E.delay(0)).then(function(ne){var W=typeof H.scale!="number"?1:H.scale;const z=function(ge,I){const G=document.createElement("canvas");if(G.width=(H.width||E.width(ge))*I,G.height=(H.height||E.height(ge))*I,H.bgcolor){const se=G.getContext("2d");se.fillStyle=H.bgcolor,se.fillRect(0,0,G.width,G.height)}return G}(K,W),A=z.getContext("2d");return A.mozImageSmoothingEnabled=!1,A.msImageSmoothingEnabled=!1,A.imageSmoothingEnabled=!1,ne&&(A.scale(W,W),A.drawImage(ne,0,0)),Se&&(document.body.removeChild(Se),Se=null,$&&clearTimeout($),$=setTimeout(()=>{$=null,B={}},2e4)),z})}function $e(K){return U.resolveAll().then(function(H){const ne=document.createElement("style");return K.appendChild(ne),ne.appendChild(document.createTextNode(H)),K})}function q(K){return Q.inlineAll(K).then(function(){return K})}let $=null,Se=null,B={}})(r)}),u=o(function(_,w){(function(){function b(U,j,Q){var ie=new XMLHttpRequest;ie.open("GET",U),ie.responseType="blob",ie.onload=function(){D(ie.response,j,Q)},ie.onerror=function(){console.error("could not download file")},ie.send()}function E(U){var j=new XMLHttpRequest;j.open("HEAD",U,!1);try{j.send()}catch{}return 200<=j.status&&299>=j.status}function x(U){try{U.dispatchEvent(new MouseEvent("click"))}catch{var j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),U.dispatchEvent(j)}}var F=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,D=F.saveAs||(typeof window!="object"||window!==F?function(){}:"download"in HTMLAnchorElement.prototype?function(U,j,Q){var ie=F.URL||F.webkitURL,ye=document.createElement("a");j=j||U.name||"download",ye.download=j,ye.rel="noopener",typeof U=="string"?(ye.href=U,ye.origin===location.origin?x(ye):E(ye.href)?b(U,j,Q):x(ye,ye.target="_blank")):(ye.href=ie.createObjectURL(U),setTimeout(function(){ie.revokeObjectURL(ye.href)},4e4),setTimeout(function(){x(ye)},0))}:"msSaveOrOpenBlob"in navigator?function(U,j,Q){if(j=j||U.name||"download",typeof U!="string")navigator.msSaveOrOpenBlob(function(ye,we){return we===void 0?we={autoBom:!1}:typeof we!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),we={autoBom:!we}),we.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ye.type)?new Blob(["\uFEFF",ye],{type:ye.type}):ye}(U,Q),j);else if(E(U))b(U,j,Q);else{var ie=document.createElement("a");ie.href=U,ie.target="_blank",setTimeout(function(){x(ie)})}}:function(U,j,Q,ie){if((ie=ie||open("","_blank"))&&(ie.document.title=ie.document.body.innerText="downloading..."),typeof U=="string")return b(U,j,Q);var ye=U.type==="application/octet-stream",we=/constructor/i.test(F.HTMLElement)||F.safari,Pe=/CriOS\/[\d]+/.test(navigator.userAgent);if((Pe||ye&&we)&&typeof FileReader=="object"){var Ee=new FileReader;Ee.onloadend=function(){var $e=Ee.result;$e=Pe?$e:$e.replace(/^data:[^;]*;/,"data:attachment/file;"),ie?ie.location.href=$e:location=$e,ie=null},Ee.readAsDataURL(U)}else{var fe=F.URL||F.webkitURL,Te=fe.createObjectURL(U);ie?ie.location=Te:location.href=Te,ie=null,setTimeout(function(){fe.revokeObjectURL(Te)},4e4)}});F.saveAs=D.saveAs=D,_.exports=D})()}),f=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(_){var w=_.node,b=_.error;return console.warn("Map node is very big "+w.scrollWidth+"x"+w.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(b)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var _=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E={};for(var x in this.options)b.hasOwnProperty(x)?E[x]=b[x]:E[x]=this.options[x];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return _._getPixelData(E)}).then(function(F){return _._setElementsVisible(!0),_._toCanvas(F,E)}).then(function(F){return w==="image"?_._canvasToImage(F,E):w==="canvas"?F:_._canvasToBlob(F,E)}).then(function(F){return _._screenState.status=1,_._map.fire("simpleMapScreenshoter.done"),F}).catch(function(F){return _._setElementsVisible(!0),_._screenState.status=1,_._map.fire("simpleMapScreenshoter.error",{e:F}),Promise.reject(F)}),this._screenState.promise)},_setElementsVisible:function(){var _=this,w=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(b){var E=_._map._container.querySelectorAll(b),x=!0,F=!1,D=void 0;try{for(var U,j=E[Symbol.iterator]();!(x=(U=j.next()).done);x=!0)U.value.style.opacity=w===!1?0:1}catch(Q){F=!0,D=Q}finally{try{!x&&j.return&&j.return()}finally{if(F)throw D}}})},_canvasToImage:function(_,w){var b=w.mimeType,E=_.toDataURL(b);return E.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(E)},_canvasToBlob:function(_,w){var b=w.mimeType;return new Promise(function(E,x){_.toBlob(function(F){E(F)},b)})},_toCanvas:function(_,w){var b=w.captionOffset,E=w.caption,x=w.captionFontSize,F=w.captionFont,D=w.captionColor,U=w.captionBgColor,j=this._node,Q=j.screenHeight,ie=j.screenWidth,ye=document.createElement("canvas");ye.width=ie,ye.height=Q;for(var we=ye.getContext("2d"),Pe=we.createImageData(ie,Q),Ee=0;Ee<_.length;++Ee)Pe.data[Ee]=_[Ee];we.putImageData(Pe,0,0),Pe=null;var fe=document.createElement("canvas"),Te=fe.getContext("2d"),$e=0,q=0,$=Q,Se=ie;if(this.options.cropImageByInnerWH===!0){for(var B=[],K=0,H=0;H<Q;++H){K=0;for(var ne=0;ne<ie;++ne)_[4*H*ie+4*ne+4]===0&&K++;K===ie&&B.push(H)}var W=this._getMinAndMaxOnValuesBreak(B);$e=W.min;for(var z=ie,A=W.max,ge=[],I=0,G=q;G<z;++G){I=0;for(var se=0;se<Q;++se)_[4*se*ie+4*G+4]===0&&I++;I===Q&&ge.push(G)}var ce=this._getMinAndMaxOnValuesBreak(ge);q=ce.min,z=ce.max,(q===0&&z===0||z===null)&&(z=ie),($e===0&&A===0||A===null)&&(A=Q),this.options.debugMode===!0&&(console.log("emptyYLine",B),console.log("minMaxY",W),console.log("emptyXLine",ge),console.log("minMaxX",ce),console.log("debugX",{}),console.log("debugY",{})),$e===0&&A===Q&&q===0&&z===ie||($e+=this.options.onCropBorderSize,A-=this.options.onCropBorderSize,q+=this.options.onCropBorderSize,z-=this.options.onCropBorderSize),$=A-$e,Se=z-q,fe.width=Se,fe.height=$}else fe.width=Se,fe.height=$;var pe=null;return E&&(pe=typeof E=="function"?E.call(this):E),pe!==null&&(fe.height=fe.height+(b+x+b),Te.beginPath(),Te.rect(0,0,fe.width,fe.height),Te.fillStyle=U,Te.fill(),Te.save()),Te.drawImage(ye,q,$e,Se,$,0,0,Se,$),pe!==null&&(Te.font=x+"px "+F,Te.fillStyle=D,Te.fillText(pe,b,$+b+x)),Promise.resolve(fe)},_getMinAndMaxOnValuesBreak:function(_){for(var w=0,b=0,E=!1,x=1;x<_.length;x++){if(_[x]-1!==_[x-1]){b=_[x],E=!0;break}w=_[x]}return E===!1&&_[0]>1?(w=0,b=_[0]):E===!1&&(w=_[_.length-1]||0,b=null),{min:w,max:b}},_getPixelData:function(_){var w=this,b=_.domtoimageOptions,E=b===void 0?{}:b;return this._getPixelDataOfNormalMap(E).catch(function(x){return console.warn("May be map size very big on that zoom level, we have error:",x.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),w._getPixelDataOfBigMap(E)})},_getPixelDataOfNormalMap:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=this._map.getContainer();return this._node={node:w,screenHeight:w.scrollHeight,screenWidth:w.scrollWidth},a.toPixelData(w,_)},_getPixelDataOfBigMap:function(){var _=this,w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=this._map.getContainer(),E=this._map.getPane("mapPane");E.style.width=2*b.clientWidth+"px",E.style.height=2*b.clientHeight+"px",E.style.overflow="hidden";var x=function(){E.style.width="initial",E.style.height="initial",E.style.overflow="initial"};return this._node={node:b,screenHeight:b.scrollHeight,screenWidth:b.scrollWidth},a.toPixelData(b,w).then(function(F){return x(),F}).catch(function(F){return x(),b.scrollHeight>=4e3||b.scrollWidth>=4e3?_.options.onPixelDataFail({plugin:_,node:b,mapPane:E,error:F,domtoimageOptions:w}):Promise.reject(F)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var _=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,w=document.head||document.getElementsByTagName("head")[0],b=document.createElement("style");b.appendChild(document.createTextNode(_)),w.appendChild(b)},_onScreenBtn:function(){var _=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(w){var b=typeof _.options.screenName=="function"?_.options.screenName.call(_):_.options.screenName;u.saveAs(w,b+".png")}).catch(function(w){_._map.fire("simpleMapScreenshoter.error",{e:w})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var _=this;return new Promise(function(w){var b=setInterval(function(){_._interaction||(w(),clearInterval(b))},100)})}}),m=(L.Control.SimpleMapScreenshoter=f,L.simpleMapScreenshoter=function(_){return new L.Control.SimpleMapScreenshoter(_)},f);n.default=m,n.SimpleMapScreenshoter=f,Object.defineProperty(n,"__esModule",{value:!0})})})(U0,U0.exports);const nw={class:"drawing-tools-sidebar"},iw={class:"tools-section"},rw={class:"tools-grid"},sw=["onClick","title"],ow=["innerHTML"],aw={key:0,class:"properties-container"},lw={class:"sidebar-section"},uw={class:"section-content"},cw={class:"color-grid"},hw=["onClick","title"],fw={key:0,class:"style-controls"},dw={class:"control-row"},pw={class:"control-inputs"},mw={class:"control-row"},gw=["value"],vw={key:0,class:"control-row"},_w={class:"control-inputs"},yw={key:1,class:"text-controls"},bw={class:"control-row"},ww={class:"control-inputs"},xw={class:"control-row"},Lw={class:"control-inputs"},Cw={class:"control-row"},kw={class:"control-inputs"},Pw={class:"control-row"},Sw={class:"control-inputs"},Ew={class:"control-row"},Aw={class:"control-row"},Mw={class:"button-group"},Bw=["onClick","title"],Tw=["innerHTML"],Nw={class:"sidebar-section"},Dw={class:"section-content"},Ow={key:0},Rw={class:"properties-grid"},Iw={class:"property-value"},Fw={class:"property-value"},jw={class:"property-value"},zw={class:"property-value"},Uw={class:"property-value"},qw={class:"property-value"},$w={class:"property-value"},Vw={class:"property-value"},Hw={class:"property-value"},Gw={class:"property-value"},Ww={class:"property-value"},Zw={class:"property-value"},Kw={class:"property-value"},Jw={class:"property-value"},Yw={class:"property-value"},Xw={class:"property-value col-span-2 truncate"},Qw={key:1,class:"no-properties"},ex=ps({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(e,{emit:t}){const n=e,r=t,o=Ft(null);Yr(()=>n.selectedShape,z=>{var A,ge;if(console.log("[DrawingTools] Changement de forme sélectionnée",{newShape:z,properties:z==null?void 0:z.properties}),z){if(o.value={...z.properties},((A=z.properties)==null?void 0:A.type)==="TextRectangle"){const I=((ge=z.properties)==null?void 0:ge.style)||{};D.value=I.textColor||"#000000",U.value=I.fontSize||"14px",j.value=I.backgroundColor||"#FFFFFF",Q.value=I.backgroundOpacity||1,ie.value=I.fontFamily||"Arial, sans-serif",ye.value=I.textAlign||"center",we.value=I.bold||!1,Pe.value=I.italic||!1}}else o.value=null},{deep:!0,immediate:!0}),Yr(()=>o.value,(z,A)=>{console.log("[DrawingTools] Changement détecté dans localProperties",{newProperties:z,oldProperties:A,selectedShape:n.selectedShape})},{deep:!0}),Yr(()=>{var z;return(z=n.selectedShape)==null?void 0:z.properties},z=>{if(z&&n.selectedShape&&(o.value={...z},z.type==="TextRectangle"&&z.style)){const A=z.style;D.value=A.textColor||"#000000",U.value=A.fontSize||"14px",j.value=A.backgroundColor||"#FFFFFF",Q.value=A.backgroundOpacity||1,ie.value=A.fontFamily||"Arial, sans-serif",ye.value=A.textAlign||"center",we.value=A.bold||!1,Pe.value=A.italic||!1}},{deep:!0,immediate:!0});const a=z=>({Circle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" /></svg>',Semicircle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 12a10 10 0 0 1 20 0" /></svg>',Rectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" /></svg>',Polygon:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3l9 7-3 9H6l-3-9 9-7z" /></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6" /><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /></svg>',Line:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 19l18-14" /></svg>',TextRectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" /><path d="M9 8h6m-3 0v8" /></svg>'})[z]||"",u=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"TextRectangle",label:"Texte"},{type:"delete",label:"Supprimer"}],f=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],m=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],_=[{value:"left",label:"Aligné à gauche",icon:"&#8678;"},{value:"center",label:"Centré",icon:"&#8645;"},{value:"right",label:"Aligné à droite",icon:"&#8680;"}],w=Ft("#3B82F6"),b=Ft(.2),E=Ft("#2563EB"),x=Ft(2),F=Ft("solid"),D=Ft("#000000"),U=Ft("14px"),j=Ft("#FFFFFF"),Q=Ft(1),ie=Ft("Arial, sans-serif"),ye=Ft("center"),we=Ft(!1),Pe=Ft(!1),Ee=Ft({style:!1,properties:!1}),fe=Nn(()=>{var A,ge;const z=(ge=(A=n.selectedShape)==null?void 0:A.properties)==null?void 0:ge.type;return console.log("[DrawingTools] Calcul de showFillOptions",{shapeType:z,selectedShape:n.selectedShape}),z?["Circle","Rectangle","Polygon","Semicircle"].includes(z):!1}),Te=z=>{Ee.value[z]=!Ee.value[z]},$e=z=>{switch(z){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},q=z=>{var A,ge;E.value=z,(fe.value||((A=o.value)==null?void 0:A.type)==="TextRectangle")&&(w.value=z),$({strokeColor:z,fillColor:fe.value||((ge=o.value)==null?void 0:ge.type)==="TextRectangle"?z:void 0})},$=z=>{const A={...z};z.strokeStyle&&(A.dashArray=$e(z.strokeStyle)),z.fillOpacity!==void 0&&(A.fillOpacity=parseFloat(z.fillOpacity)),z.strokeOpacity!==void 0&&(A.strokeOpacity=parseFloat(z.strokeOpacity)),z.strokeWidth!==void 0&&(A.weight=parseInt(z.strokeWidth)),z.strokeColor&&(A.color=z.strokeColor),r("style-update",A)},Se=z=>{var A,ge;((ge=(A=n.selectedShape)==null?void 0:A.properties)==null?void 0:ge.type)==="TextRectangle"&&r("style-update",{...z})},B=()=>{we.value=!we.value,Se({bold:we.value})},K=()=>{Pe.value=!Pe.value,Se({italic:Pe.value})},H=z=>z?z>=1e3?`${(z/1e3).toFixed(2)} km`:`${z.toFixed(2)} m`:"0 m",ne=z=>z?`${(z/1e4).toFixed(2)} ha`:"0 ha",W=z=>z?`${((z%360+360)%360).toFixed(1)}°`:"0°";return(z,A)=>(nt(),at("div",nw,[A[63]||(A[63]=M("div",{class:"sidebar-header"},[M("h3",{class:"sidebar-title"},"Outils")],-1)),M("div",iw,[M("div",rw,[(nt(!0),at(gn,null,Un(u.filter(ge=>ge.type!=="delete"),ge=>(nt(),at("button",{key:ge.type,class:Ni(["tool-button",{active:z.currentTool===ge.type}]),onClick:I=>z.$emit("tool-change",ge.type),title:ge.label},[M("span",{class:"icon",innerHTML:a(ge.type)},null,8,ow)],10,sw))),128))]),z.selectedShape?(nt(),at("button",{key:0,class:Ni(["delete-button",{active:z.currentTool==="delete"}]),onClick:A[0]||(A[0]=ge=>z.$emit("delete-shape")),title:"Supprimer la forme"},A[31]||(A[31]=[M("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),2)):tn("",!0)]),A[64]||(A[64]=M("div",{class:"sidebar-divider"},null,-1)),z.selectedShape&&o.value?(nt(),at("div",aw,[M("div",lw,[M("button",{class:"section-header",onClick:A[1]||(A[1]=ge=>Te("style"))},[A[33]||(A[33]=M("span",{class:"section-title"},"Style",-1)),(nt(),at("svg",{class:Ni(["section-icon",{"rotate-180":!Ee.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},A[32]||(A[32]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Pn(M("div",uw,[M("div",cw,[(nt(),at(gn,null,Un(f,ge=>M("button",{key:ge,class:"color-button",style:Oh({backgroundColor:ge}),onClick:I=>q(ge),title:ge},null,12,hw)),64))]),o.value.type!=="TextRectangle"?(nt(),at("div",fw,[M("div",dw,[A[34]||(A[34]=M("span",{class:"control-label"},"Contour",-1)),M("div",pw,[Pn(M("input",{type:"color","onUpdate:modelValue":A[2]||(A[2]=ge=>E.value=ge),class:"color-input",onChange:A[3]||(A[3]=ge=>$({strokeColor:E.value})),title:"Couleur du contour"},null,544),[[ri,E.value]]),Pn(M("input",{type:"range","onUpdate:modelValue":A[4]||(A[4]=ge=>x.value=ge),min:"1",max:"10",class:"range-input",onChange:A[5]||(A[5]=ge=>$({strokeWidth:x.value})),title:"Épaisseur du contour"},null,544),[[ri,x.value]])])]),M("div",mw,[A[35]||(A[35]=M("span",{class:"control-label"},"Style",-1)),Pn(M("select",{"onUpdate:modelValue":A[6]||(A[6]=ge=>F.value=ge),class:"select-input",onChange:A[7]||(A[7]=ge=>$({strokeStyle:F.value}))},[(nt(),at(gn,null,Un(m,ge=>M("option",{key:ge.value,value:ge.value},kt(ge.label),9,gw)),64))],544),[[hs,F.value]])]),fe.value?(nt(),at("div",vw,[A[36]||(A[36]=M("span",{class:"control-label"},"Remplir",-1)),M("div",_w,[Pn(M("input",{type:"color","onUpdate:modelValue":A[8]||(A[8]=ge=>w.value=ge),class:"color-input",onChange:A[9]||(A[9]=ge=>$({fillColor:w.value})),title:"Couleur de remplissage"},null,544),[[ri,w.value]]),Pn(M("input",{type:"range","onUpdate:modelValue":A[10]||(A[10]=ge=>b.value=ge),min:"0",max:"1",step:"0.1",class:"range-input",onChange:A[11]||(A[11]=ge=>$({fillOpacity:b.value})),title:"Opacité du remplissage"},null,544),[[ri,b.value]])])])):tn("",!0)])):tn("",!0),o.value.type==="TextRectangle"?(nt(),at("div",yw,[M("div",bw,[A[37]||(A[37]=M("span",{class:"control-label"},"Contour",-1)),M("div",ww,[Pn(M("input",{type:"color","onUpdate:modelValue":A[12]||(A[12]=ge=>E.value=ge),class:"color-input",onChange:A[13]||(A[13]=ge=>$({strokeColor:E.value})),title:"Couleur du contour"},null,544),[[ri,E.value]]),Pn(M("input",{type:"range","onUpdate:modelValue":A[14]||(A[14]=ge=>x.value=ge),min:"1",max:"10",class:"range-input",onChange:A[15]||(A[15]=ge=>$({strokeWidth:x.value})),title:"Épaisseur du contour"},null,544),[[ri,x.value]])])]),M("div",xw,[A[38]||(A[38]=M("span",{class:"control-label"},"Remplir",-1)),M("div",Lw,[Pn(M("input",{type:"color","onUpdate:modelValue":A[16]||(A[16]=ge=>w.value=ge),class:"color-input",onChange:A[17]||(A[17]=ge=>$({fillColor:w.value})),title:"Couleur de remplissage"},null,544),[[ri,w.value]]),Pn(M("input",{type:"range","onUpdate:modelValue":A[18]||(A[18]=ge=>b.value=ge),min:"0",max:"1",step:"0.1",class:"range-input",onChange:A[19]||(A[19]=ge=>$({fillOpacity:b.value})),title:"Opacité du remplissage"},null,544),[[ri,b.value]])])]),M("div",Cw,[A[40]||(A[40]=M("span",{class:"control-label"},"Texte",-1)),M("div",kw,[Pn(M("input",{type:"color","onUpdate:modelValue":A[20]||(A[20]=ge=>D.value=ge),class:"color-input",onChange:A[21]||(A[21]=ge=>Se({textColor:D.value})),title:"Couleur du texte"},null,544),[[ri,D.value]]),Pn(M("select",{"onUpdate:modelValue":A[22]||(A[22]=ge=>U.value=ge),class:"select-input",onChange:A[23]||(A[23]=ge=>Se({fontSize:U.value}))},A[39]||(A[39]=[Au('<option value="10px" data-v-40cb4e36>10px</option><option value="12px" data-v-40cb4e36>12px</option><option value="14px" data-v-40cb4e36>14px</option><option value="16px" data-v-40cb4e36>16px</option><option value="18px" data-v-40cb4e36>18px</option><option value="20px" data-v-40cb4e36>20px</option><option value="24px" data-v-40cb4e36>24px</option>',7)]),544),[[hs,U.value]])])]),M("div",Pw,[A[41]||(A[41]=M("span",{class:"control-label"},"Fond",-1)),M("div",Sw,[Pn(M("input",{type:"color","onUpdate:modelValue":A[24]||(A[24]=ge=>j.value=ge),class:"color-input",onChange:A[25]||(A[25]=ge=>Se({backgroundColor:j.value})),title:"Couleur de fond"},null,544),[[ri,j.value]]),Pn(M("input",{type:"range","onUpdate:modelValue":A[26]||(A[26]=ge=>Q.value=ge),min:"0",max:"1",step:"0.1",class:"range-input",onChange:A[27]||(A[27]=ge=>Se({backgroundOpacity:Q.value})),title:"Opacité du fond"},null,544),[[ri,Q.value]])])]),M("div",Ew,[A[43]||(A[43]=M("span",{class:"control-label"},"Police",-1)),Pn(M("select",{"onUpdate:modelValue":A[28]||(A[28]=ge=>ie.value=ge),class:"select-input",onChange:A[29]||(A[29]=ge=>Se({fontFamily:ie.value}))},A[42]||(A[42]=[Au('<option value="Arial, sans-serif" data-v-40cb4e36>Arial</option><option value="&#39;Times New Roman&#39;, serif" data-v-40cb4e36>Times</option><option value="&#39;Courier New&#39;, monospace" data-v-40cb4e36>Courier</option><option value="Georgia, serif" data-v-40cb4e36>Georgia</option><option value="Verdana, sans-serif" data-v-40cb4e36>Verdana</option>',5)]),544),[[hs,ie.value]])]),M("div",Aw,[A[44]||(A[44]=M("span",{class:"control-label"},"Align.",-1)),M("div",Mw,[(nt(),at(gn,null,Un(_,ge=>M("button",{key:ge.value,class:Ni(["align-button",{active:ye.value===ge.value}]),onClick:I=>Se({textAlign:ge.value}),title:ge.label},[M("span",{innerHTML:ge.icon},null,8,Tw)],10,Bw)),64)),M("button",{class:Ni(["style-button",{active:we.value}]),onClick:B,title:"Gras"}," B ",2),M("button",{class:Ni(["style-button",{active:Pe.value}]),onClick:K,title:"Italique"}," I ",2)])])])):tn("",!0)],512),[[zp,!Ee.value.style]])]),M("div",Nw,[M("button",{class:"section-header",onClick:A[30]||(A[30]=ge=>Te("properties"))},[A[46]||(A[46]=M("span",{class:"section-title"},"Propriétés",-1)),(nt(),at("svg",{class:Ni(["section-icon",{"rotate-180":!Ee.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},A[45]||(A[45]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Pn(M("div",Dw,[o.value?(nt(),at("div",Ow,[M("div",Rw,[o.value.type==="Circle"?(nt(),at(gn,{key:0},[A[47]||(A[47]=M("span",{class:"property-label"},"Rayon :",-1)),M("span",Iw,kt(H(o.value.radius||0)),1),A[48]||(A[48]=M("span",{class:"property-label"},"Surface :",-1)),M("span",Fw,kt(ne(o.value.area||0)),1)],64)):o.value.type==="Rectangle"?(nt(),at(gn,{key:1},[A[49]||(A[49]=M("span",{class:"property-label"},"Largeur :",-1)),M("span",jw,kt(H(o.value.width||0)),1),A[50]||(A[50]=M("span",{class:"property-label"},"Hauteur :",-1)),M("span",zw,kt(H(o.value.height||0)),1),A[51]||(A[51]=M("span",{class:"property-label"},"Surface :",-1)),M("span",Uw,kt(ne(o.value.area||0)),1)],64)):o.value.type==="Semicircle"?(nt(),at(gn,{key:2},[A[52]||(A[52]=M("span",{class:"property-label"},"Rayon :",-1)),M("span",qw,kt(H(o.value.radius||0)),1),A[53]||(A[53]=M("span",{class:"property-label"},"Surface :",-1)),M("span",$w,kt(ne(o.value.area||0)),1),A[54]||(A[54]=M("span",{class:"property-label"},"Angle :",-1)),M("span",Vw,kt(W(o.value.openingAngle||0)),1)],64)):o.value.type==="Line"?(nt(),at(gn,{key:3},[A[55]||(A[55]=M("span",{class:"property-label"},"Longueur :",-1)),M("span",Hw,kt(H(o.value.length||0)),1)],64)):o.value.type==="Polygon"?(nt(),at(gn,{key:4},[A[56]||(A[56]=M("span",{class:"property-label"},"Surface :",-1)),M("span",Gw,kt(ne(o.value.area||0)),1),A[57]||(A[57]=M("span",{class:"property-label"},"Périmètre :",-1)),M("span",Ww,kt(H(o.value.perimeter||0)),1)],64)):o.value.type==="TextRectangle"?(nt(),at(gn,{key:5},[A[58]||(A[58]=M("span",{class:"property-label"},"Largeur :",-1)),M("span",Zw,kt(H(o.value.width||0)),1),A[59]||(A[59]=M("span",{class:"property-label"},"Hauteur :",-1)),M("span",Kw,kt(H(o.value.height||0)),1),A[60]||(A[60]=M("span",{class:"property-label"},"Surface :",-1)),M("span",Jw,kt(ne(o.value.area||0)),1),A[61]||(A[61]=M("span",{class:"property-label"},"Rotation :",-1)),M("span",Yw,kt(W(o.value.rotation||0)),1),A[62]||(A[62]=M("span",{class:"property-label col-span-2"},"Texte :",-1)),M("span",Xw,kt(o.value.text||"Aucun texte"),1)],64)):tn("",!0)])])):(nt(),at("div",Qw," Aucune propriété disponible "))],512),[[zp,!Ee.value.properties]])])])):tn("",!0)]))}}),tx=Qd(ex,[["__scopeId","data-v-40cb4e36"]]),nx={class:"map-toolbar w-full"},ix={class:"hidden md:flex items-center space-x-2"},rx={class:"dropdown"},sx={class:"btn-toolbar dropdown-toggle"},ox={class:"dropdown-menu"},ax=["onClick"],lx={key:0,class:"border-l pl-2 flex-1"},ux={class:"flex items-center"},cx={class:"plan-info"},hx={class:"plan-name"},fx={key:0,class:"plan-description"},dx={class:"border-l pl-2 ml-auto"},px={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},mx={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},gx={key:"saving"},vx={key:"success",class:"save-success-text"},_x={key:"default"},yx={class:"md:hidden"},bx={class:"flex justify-between items-center"},wx={key:0,class:"truncate mx-2 text-sm font-medium"},xx={key:0,class:"mobile-menu mt-2 bg-white shadow-md rounded p-2 z-50"},Lx={class:"flex flex-col space-y-2"},Cx={key:0,class:"flex flex-col pb-2 border-b"},kx={class:"text-sm font-semibold text-gray-800"},Px={key:0,class:"text-xs text-gray-600 mt-1"},Sx={class:"flex flex-col"},Ex={class:"grid grid-cols-2 gap-1"},Ax=["onClick"],Mx={key:0,class:"animate-spin h-3 w-3 mr-1 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Bx={key:1,class:"h-3 w-3 mr-1 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Tx={key:"saving"},Nx={key:"success",class:"save-success-text"},Dx={key:"default"},Ox=ps({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(e,{emit:t}){const n=t,r=e,o=Ft("Ville"),a=Ft(!1),u={Ville:"Ville",Satellite:"Satellite",Cadastre:"Cadastre"},f=Nn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),m=D=>{o.value=D,n("change-map-type",D),F()},_=()=>{n("create-new-plan"),F()},w=()=>{n("load-plan"),F()},b=()=>{n("save-plan"),F()},E=()=>{n("adjust-view"),F()},x=()=>{n("generate-summary"),F()},F=()=>{a.value=!1};return(D,U)=>(nt(),at("div",nx,[M("div",ix,[M("div",rx,[M("button",sx,[U[1]||(U[1]=M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),M("span",null,kt(u[o.value]),1)]),M("div",ox,[(nt(),at(gn,null,Un(u,(j,Q)=>M("button",{key:Q,class:Ni(["dropdown-item",{active:Q===o.value}]),onClick:ie=>m(Q)},kt(j),11,ax)),64))])]),D.planName?(nt(),at("div",lx,[M("div",ux,[M("div",cx,[M("h2",hx,kt(D.planName),1),D.planDescription?(nt(),at("p",fx,kt(D.planDescription),1)):tn("",!0)])])])):tn("",!0),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:_,class:"btn-toolbar",title:"Nouveau plan"},U[2]||(U[2]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),M("button",{onClick:w,class:"btn-toolbar",title:"Charger un plan"},U[3]||(U[3]=[Au('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-bae949df><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-bae949df></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-bae949df></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-bae949df></path></svg><span class="hidden lg:inline ml-1" data-v-bae949df>Charger</span>',2)])),M("button",{onClick:b,class:"btn-toolbar",title:"Enregistrer le plan"},U[4]||(U[4]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:E,class:"btn-toolbar",title:"Ajuster la vue"},U[5]||(U[5]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),M("button",{onClick:x,class:"btn-toolbar",title:"Générer une synthèse"},U[6]||(U[6]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),M("div",dx,[M("div",{class:Ni(["text-xs hidden lg:flex items-center",{"text-gray-500":!D.saveStatus,"text-primary-600 font-medium":D.saveStatus==="success","text-blue-600 font-medium":D.saveStatus==="saving"}])},[D.saveStatus==="saving"?(nt(),at("svg",px,U[7]||(U[7]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),D.saveStatus==="success"?(nt(),at("svg",mx,U[8]||(U[8]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):tn("",!0),Pi(Np,{name:"fade-slide",mode:"out-in"},{default:Ha(()=>[D.saveStatus==="saving"?(nt(),at("span",gx," Sauvegarde en cours... ")):D.saveStatus==="success"?(nt(),at("span",vx," Sauvegarde réussie ! ")):(nt(),at("span",_x," Dernière modification : "+kt(f.value),1))]),_:1})],2)])]),M("div",yx,[M("div",bx,[M("button",{onClick:U[0]||(U[0]=j=>a.value=!a.value),class:"p-1 rounded border"},U[9]||(U[9]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),D.planName?(nt(),at("div",wx,kt(D.planName),1)):tn("",!0),M("div",{class:"flex space-x-1"},[M("button",{onClick:_,class:"p-1 rounded border bg-white"},U[10]||(U[10]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),M("button",{onClick:b,class:"p-1 rounded border bg-white"},U[11]||(U[11]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),M("button",{onClick:E,class:"p-1 rounded border bg-white"},U[12]||(U[12]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),a.value?(nt(),at("div",xx,[M("div",Lx,[D.planName?(nt(),at("div",Cx,[M("h3",kx,kt(D.planName),1),D.planDescription?(nt(),at("p",Px,kt(D.planDescription),1)):tn("",!0)])):tn("",!0),M("div",Sx,[U[13]||(U[13]=M("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Type de carte",-1)),M("div",Ex,[(nt(),at(gn,null,Un(u,(j,Q)=>M("button",{key:Q,class:Ni(["px-2 py-1 text-xs rounded border",{"bg-blue-50 border-blue-200 text-blue-700":Q===o.value}]),onClick:ie=>m(Q)},kt(j),11,Ax)),64))])]),M("div",{class:"flex flex-col"},[U[16]||(U[16]=M("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Outils de plan",-1)),M("div",{class:"grid grid-cols-2 gap-1"},[M("button",{onClick:w,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},U[14]||(U[14]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),M("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),M("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ki(" Charger ")])),M("button",{onClick:x,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},U[15]||(U[15]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),ki(" Synthèse ")]))])]),M("div",{class:Ni(["text-xs text-center pt-1 border-t flex items-center justify-center space-x-1",{"text-gray-500":!D.saveStatus,"text-primary-600 font-medium":D.saveStatus==="success","text-blue-600 font-medium":D.saveStatus==="saving"}])},[D.saveStatus==="saving"?(nt(),at("svg",Mx,U[17]||(U[17]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),D.saveStatus==="success"?(nt(),at("svg",Bx,U[18]||(U[18]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):tn("",!0),Pi(Np,{name:"fade-slide",mode:"out-in"},{default:Ha(()=>[D.saveStatus==="saving"?(nt(),at("span",Tx," Sauvegarde en cours... ")):D.saveStatus==="success"?(nt(),at("span",Nx," Sauvegarde réussie ! ")):(nt(),at("span",Dx," Dernière modification : "+kt(f.value),1))]),_:1})],2)])])):tn("",!0)])]))}}),Rx=Qd(Ox,[["__scopeId","data-v-bae949df"]]);(()=>{var $t,hn;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,u=(s,l)=>()=>(l||s((l={exports:{}}).exports,l),l.exports),f=(s,l,h,p)=>{if(l&&typeof l=="object"||typeof l=="function")for(let v of r(l))!a.call(s,v)&&v!==h&&t(s,v,{get:()=>l[v],enumerable:!(p=n(l,v))||p.enumerable});return s},m=(s,l,h)=>(h=s!=null?e(o(s)):{},f(l||!s||!s.__esModule?t(h,"default",{value:s,enumerable:!0}):h,s)),_=u((s,l)=>{function h(){this.__data__=[],this.size=0}l.exports=h}),w=u((s,l)=>{function h(p,v){return p===v||p!==p&&v!==v}l.exports=h}),b=u((s,l)=>{var h=w();function p(v,k){for(var T=v.length;T--;)if(h(v[T][0],k))return T;return-1}l.exports=p}),E=u((s,l)=>{var h=b(),p=Array.prototype,v=p.splice;function k(T){var N=this.__data__,V=h(N,T);if(V<0)return!1;var re=N.length-1;return V==re?N.pop():v.call(N,V,1),--this.size,!0}l.exports=k}),x=u((s,l)=>{var h=b();function p(v){var k=this.__data__,T=h(k,v);return T<0?void 0:k[T][1]}l.exports=p}),F=u((s,l)=>{var h=b();function p(v){return h(this.__data__,v)>-1}l.exports=p}),D=u((s,l)=>{var h=b();function p(v,k){var T=this.__data__,N=h(T,v);return N<0?(++this.size,T.push([v,k])):T[N][1]=k,this}l.exports=p}),U=u((s,l)=>{var h=_(),p=E(),v=x(),k=F(),T=D();function N(V){var re=-1,Ie=V==null?0:V.length;for(this.clear();++re<Ie;){var Be=V[re];this.set(Be[0],Be[1])}}N.prototype.clear=h,N.prototype.delete=p,N.prototype.get=v,N.prototype.has=k,N.prototype.set=T,l.exports=N}),j=u((s,l)=>{var h=U();function p(){this.__data__=new h,this.size=0}l.exports=p}),Q=u((s,l)=>{function h(p){var v=this.__data__,k=v.delete(p);return this.size=v.size,k}l.exports=h}),ie=u((s,l)=>{function h(p){return this.__data__.get(p)}l.exports=h}),ye=u((s,l)=>{function h(p){return this.__data__.has(p)}l.exports=h}),we=u((s,l)=>{var h=typeof go=="object"&&go&&go.Object===Object&&go;l.exports=h}),Pe=u((s,l)=>{var h=we(),p=typeof self=="object"&&self&&self.Object===Object&&self,v=h||p||Function("return this")();l.exports=v}),Ee=u((s,l)=>{var h=Pe(),p=h.Symbol;l.exports=p}),fe=u((s,l)=>{var h=Ee(),p=Object.prototype,v=p.hasOwnProperty,k=p.toString,T=h?h.toStringTag:void 0;function N(V){var re=v.call(V,T),Ie=V[T];try{V[T]=void 0;var Be=!0}catch{}var Qe=k.call(V);return Be&&(re?V[T]=Ie:delete V[T]),Qe}l.exports=N}),Te=u((s,l)=>{var h=Object.prototype,p=h.toString;function v(k){return p.call(k)}l.exports=v}),$e=u((s,l)=>{var h=Ee(),p=fe(),v=Te(),k="[object Null]",T="[object Undefined]",N=h?h.toStringTag:void 0;function V(re){return re==null?re===void 0?T:k:N&&N in Object(re)?p(re):v(re)}l.exports=V}),q=u((s,l)=>{function h(p){var v=typeof p;return p!=null&&(v=="object"||v=="function")}l.exports=h}),$=u((s,l)=>{var h=$e(),p=q(),v="[object AsyncFunction]",k="[object Function]",T="[object GeneratorFunction]",N="[object Proxy]";function V(re){if(!p(re))return!1;var Ie=h(re);return Ie==k||Ie==T||Ie==v||Ie==N}l.exports=V}),Se=u((s,l)=>{var h=Pe(),p=h["__core-js_shared__"];l.exports=p}),B=u((s,l)=>{var h=Se(),p=function(){var k=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}();function v(k){return!!p&&p in k}l.exports=v}),K=u((s,l)=>{var h=Function.prototype,p=h.toString;function v(k){if(k!=null){try{return p.call(k)}catch{}try{return k+""}catch{}}return""}l.exports=v}),H=u((s,l)=>{var h=$(),p=B(),v=q(),k=K(),T=/[\\^$.*+?()[\]{}|]/g,N=/^\[object .+?Constructor\]$/,V=Function.prototype,re=Object.prototype,Ie=V.toString,Be=re.hasOwnProperty,Qe=RegExp("^"+Ie.call(Be).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dt(Et){if(!v(Et)||p(Et))return!1;var jt=h(Et)?Qe:N;return jt.test(k(Et))}l.exports=dt}),ne=u((s,l)=>{function h(p,v){return p==null?void 0:p[v]}l.exports=h}),W=u((s,l)=>{var h=H(),p=ne();function v(k,T){var N=p(k,T);return h(N)?N:void 0}l.exports=v}),z=u((s,l)=>{var h=W(),p=Pe(),v=h(p,"Map");l.exports=v}),A=u((s,l)=>{var h=W(),p=h(Object,"create");l.exports=p}),ge=u((s,l)=>{var h=A();function p(){this.__data__=h?h(null):{},this.size=0}l.exports=p}),I=u((s,l)=>{function h(p){var v=this.has(p)&&delete this.__data__[p];return this.size-=v?1:0,v}l.exports=h}),G=u((s,l)=>{var h=A(),p="__lodash_hash_undefined__",v=Object.prototype,k=v.hasOwnProperty;function T(N){var V=this.__data__;if(h){var re=V[N];return re===p?void 0:re}return k.call(V,N)?V[N]:void 0}l.exports=T}),se=u((s,l)=>{var h=A(),p=Object.prototype,v=p.hasOwnProperty;function k(T){var N=this.__data__;return h?N[T]!==void 0:v.call(N,T)}l.exports=k}),ce=u((s,l)=>{var h=A(),p="__lodash_hash_undefined__";function v(k,T){var N=this.__data__;return this.size+=this.has(k)?0:1,N[k]=h&&T===void 0?p:T,this}l.exports=v}),pe=u((s,l)=>{var h=ge(),p=I(),v=G(),k=se(),T=ce();function N(V){var re=-1,Ie=V==null?0:V.length;for(this.clear();++re<Ie;){var Be=V[re];this.set(Be[0],Be[1])}}N.prototype.clear=h,N.prototype.delete=p,N.prototype.get=v,N.prototype.has=k,N.prototype.set=T,l.exports=N}),oe=u((s,l)=>{var h=pe(),p=U(),v=z();function k(){this.size=0,this.__data__={hash:new h,map:new(v||p),string:new h}}l.exports=k}),xe=u((s,l)=>{function h(p){var v=typeof p;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?p!=="__proto__":p===null}l.exports=h}),me=u((s,l)=>{var h=xe();function p(v,k){var T=v.__data__;return h(k)?T[typeof k=="string"?"string":"hash"]:T.map}l.exports=p}),je=u((s,l)=>{var h=me();function p(v){var k=h(this,v).delete(v);return this.size-=k?1:0,k}l.exports=p}),qe=u((s,l)=>{var h=me();function p(v){return h(this,v).get(v)}l.exports=p}),J=u((s,l)=>{var h=me();function p(v){return h(this,v).has(v)}l.exports=p}),te=u((s,l)=>{var h=me();function p(v,k){var T=h(this,v),N=T.size;return T.set(v,k),this.size+=T.size==N?0:1,this}l.exports=p}),Ne=u((s,l)=>{var h=oe(),p=je(),v=qe(),k=J(),T=te();function N(V){var re=-1,Ie=V==null?0:V.length;for(this.clear();++re<Ie;){var Be=V[re];this.set(Be[0],Be[1])}}N.prototype.clear=h,N.prototype.delete=p,N.prototype.get=v,N.prototype.has=k,N.prototype.set=T,l.exports=N}),Ae=u((s,l)=>{var h=U(),p=z(),v=Ne(),k=200;function T(N,V){var re=this.__data__;if(re instanceof h){var Ie=re.__data__;if(!p||Ie.length<k-1)return Ie.push([N,V]),this.size=++re.size,this;re=this.__data__=new v(Ie)}return re.set(N,V),this.size=re.size,this}l.exports=T}),ee=u((s,l)=>{var h=U(),p=j(),v=Q(),k=ie(),T=ye(),N=Ae();function V(re){var Ie=this.__data__=new h(re);this.size=Ie.size}V.prototype.clear=p,V.prototype.delete=v,V.prototype.get=k,V.prototype.has=T,V.prototype.set=N,l.exports=V}),We=u((s,l)=>{var h=W(),p=function(){try{var v=h(Object,"defineProperty");return v({},"",{}),v}catch{}}();l.exports=p}),et=u((s,l)=>{var h=We();function p(v,k,T){k=="__proto__"&&h?h(v,k,{configurable:!0,enumerable:!0,value:T,writable:!0}):v[k]=T}l.exports=p}),Xe=u((s,l)=>{var h=et(),p=w();function v(k,T,N){(N!==void 0&&!p(k[T],N)||N===void 0&&!(T in k))&&h(k,T,N)}l.exports=v}),Oe=u((s,l)=>{function h(p){return function(v,k,T){for(var N=-1,V=Object(v),re=T(v),Ie=re.length;Ie--;){var Be=re[p?Ie:++N];if(k(V[Be],Be,V)===!1)break}return v}}l.exports=h}),ke=u((s,l)=>{var h=Oe(),p=h();l.exports=p}),lt=u((s,l)=>{var h=Pe(),p=typeof s=="object"&&s&&!s.nodeType&&s,v=p&&typeof l=="object"&&l&&!l.nodeType&&l,k=v&&v.exports===p,T=k?h.Buffer:void 0,N=T?T.allocUnsafe:void 0;function V(re,Ie){if(Ie)return re.slice();var Be=re.length,Qe=N?N(Be):new re.constructor(Be);return re.copy(Qe),Qe}l.exports=V}),ht=u((s,l)=>{var h=Pe(),p=h.Uint8Array;l.exports=p}),it=u((s,l)=>{var h=ht();function p(v){var k=new v.constructor(v.byteLength);return new h(k).set(new h(v)),k}l.exports=p}),Fe=u((s,l)=>{var h=it();function p(v,k){var T=k?h(v.buffer):v.buffer;return new v.constructor(T,v.byteOffset,v.length)}l.exports=p}),Pt=u((s,l)=>{function h(p,v){var k=-1,T=p.length;for(v||(v=Array(T));++k<T;)v[k]=p[k];return v}l.exports=h}),It=u((s,l)=>{var h=q(),p=Object.create,v=function(){function k(){}return function(T){if(!h(T))return{};if(p)return p(T);k.prototype=T;var N=new k;return k.prototype=void 0,N}}();l.exports=v}),Wt=u((s,l)=>{function h(p,v){return function(k){return p(v(k))}}l.exports=h}),Ut=u((s,l)=>{var h=Wt(),p=h(Object.getPrototypeOf,Object);l.exports=p}),Xt=u((s,l)=>{var h=Object.prototype;function p(v){var k=v&&v.constructor,T=typeof k=="function"&&k.prototype||h;return v===T}l.exports=p}),Rt=u((s,l)=>{var h=It(),p=Ut(),v=Xt();function k(T){return typeof T.constructor=="function"&&!v(T)?h(p(T)):{}}l.exports=k}),on=u((s,l)=>{function h(p){return p!=null&&typeof p=="object"}l.exports=h}),dn=u((s,l)=>{var h=$e(),p=on(),v="[object Arguments]";function k(T){return p(T)&&h(T)==v}l.exports=k}),ai=u((s,l)=>{var h=dn(),p=on(),v=Object.prototype,k=v.hasOwnProperty,T=v.propertyIsEnumerable,N=h(function(){return arguments}())?h:function(V){return p(V)&&k.call(V,"callee")&&!T.call(V,"callee")};l.exports=N}),Ct=u((s,l)=>{var h=Array.isArray;l.exports=h}),nn=u((s,l)=>{var h=9007199254740991;function p(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=h}l.exports=p}),Vt=u((s,l)=>{var h=$(),p=nn();function v(k){return k!=null&&p(k.length)&&!h(k)}l.exports=v}),ln=u((s,l)=>{var h=Vt(),p=on();function v(k){return p(k)&&h(k)}l.exports=v}),li=u((s,l)=>{function h(){return!1}l.exports=h}),In=u((s,l)=>{var h=Pe(),p=li(),v=typeof s=="object"&&s&&!s.nodeType&&s,k=v&&typeof l=="object"&&l&&!l.nodeType&&l,T=k&&k.exports===v,N=T?h.Buffer:void 0,V=N?N.isBuffer:void 0,re=V||p;l.exports=re}),fi=u((s,l)=>{var h=$e(),p=Ut(),v=on(),k="[object Object]",T=Function.prototype,N=Object.prototype,V=T.toString,re=N.hasOwnProperty,Ie=V.call(Object);function Be(Qe){if(!v(Qe)||h(Qe)!=k)return!1;var dt=p(Qe);if(dt===null)return!0;var Et=re.call(dt,"constructor")&&dt.constructor;return typeof Et=="function"&&Et instanceof Et&&V.call(Et)==Ie}l.exports=Be}),xi=u((s,l)=>{var h=$e(),p=nn(),v=on(),k="[object Arguments]",T="[object Array]",N="[object Boolean]",V="[object Date]",re="[object Error]",Ie="[object Function]",Be="[object Map]",Qe="[object Number]",dt="[object Object]",Et="[object RegExp]",jt="[object Set]",qt="[object String]",mn="[object WeakMap]",Re="[object ArrayBuffer]",ze="[object DataView]",Ke="[object Float32Array]",vt="[object Float64Array]",rt="[object Int8Array]",pt="[object Int16Array]",Z="[object Int32Array]",ae="[object Uint8Array]",be="[object Uint8ClampedArray]",_e="[object Uint16Array]",Le="[object Uint32Array]",Ce={};Ce[Ke]=Ce[vt]=Ce[rt]=Ce[pt]=Ce[Z]=Ce[ae]=Ce[be]=Ce[_e]=Ce[Le]=!0,Ce[k]=Ce[T]=Ce[Re]=Ce[N]=Ce[ze]=Ce[V]=Ce[re]=Ce[Ie]=Ce[Be]=Ce[Qe]=Ce[dt]=Ce[Et]=Ce[jt]=Ce[qt]=Ce[mn]=!1;function Ge(Ve){return v(Ve)&&p(Ve.length)&&!!Ce[h(Ve)]}l.exports=Ge}),Kn=u((s,l)=>{function h(p){return function(v){return p(v)}}l.exports=h}),Tt=u((s,l)=>{var h=we(),p=typeof s=="object"&&s&&!s.nodeType&&s,v=p&&typeof l=="object"&&l&&!l.nodeType&&l,k=v&&v.exports===p,T=k&&h.process,N=function(){try{var V=v&&v.require&&v.require("util").types;return V||T&&T.binding&&T.binding("util")}catch{}}();l.exports=N}),Dt=u((s,l)=>{var h=xi(),p=Kn(),v=Tt(),k=v&&v.isTypedArray,T=k?p(k):h;l.exports=T}),Di=u((s,l)=>{function h(p,v){if(!(v==="constructor"&&typeof p[v]=="function")&&v!="__proto__")return p[v]}l.exports=h}),qn=u((s,l)=>{var h=et(),p=w(),v=Object.prototype,k=v.hasOwnProperty;function T(N,V,re){var Ie=N[V];(!(k.call(N,V)&&p(Ie,re))||re===void 0&&!(V in N))&&h(N,V,re)}l.exports=T}),ms=u((s,l)=>{var h=qn(),p=et();function v(k,T,N,V){var re=!N;N||(N={});for(var Ie=-1,Be=T.length;++Ie<Be;){var Qe=T[Ie],dt=V?V(N[Qe],k[Qe],Qe,N,k):void 0;dt===void 0&&(dt=k[Qe]),re?p(N,Qe,dt):h(N,Qe,dt)}return N}l.exports=v}),Mr=u((s,l)=>{function h(p,v){for(var k=-1,T=Array(p);++k<p;)T[k]=v(k);return T}l.exports=h}),cn=u((s,l)=>{var h=9007199254740991,p=/^(?:0|[1-9]\d*)$/;function v(k,T){var N=typeof k;return T=T??h,!!T&&(N=="number"||N!="symbol"&&p.test(k))&&k>-1&&k%1==0&&k<T}l.exports=v}),Xr=u((s,l)=>{var h=Mr(),p=ai(),v=Ct(),k=In(),T=cn(),N=Dt(),V=Object.prototype,re=V.hasOwnProperty;function Ie(Be,Qe){var dt=v(Be),Et=!dt&&p(Be),jt=!dt&&!Et&&k(Be),qt=!dt&&!Et&&!jt&&N(Be),mn=dt||Et||jt||qt,Re=mn?h(Be.length,String):[],ze=Re.length;for(var Ke in Be)(Qe||re.call(Be,Ke))&&!(mn&&(Ke=="length"||jt&&(Ke=="offset"||Ke=="parent")||qt&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||T(Ke,ze)))&&Re.push(Ke);return Re}l.exports=Ie}),gs=u((s,l)=>{function h(p){var v=[];if(p!=null)for(var k in Object(p))v.push(k);return v}l.exports=h}),cr=u((s,l)=>{var h=q(),p=Xt(),v=gs(),k=Object.prototype,T=k.hasOwnProperty;function N(V){if(!h(V))return v(V);var re=p(V),Ie=[];for(var Be in V)Be=="constructor"&&(re||!T.call(V,Be))||Ie.push(Be);return Ie}l.exports=N}),Vn=u((s,l)=>{var h=Xr(),p=cr(),v=Vt();function k(T){return v(T)?h(T,!0):p(T)}l.exports=k}),Ht=u((s,l)=>{var h=ms(),p=Vn();function v(k){return h(k,p(k))}l.exports=v}),hr=u((s,l)=>{var h=Xe(),p=lt(),v=Fe(),k=Pt(),T=Rt(),N=ai(),V=Ct(),re=ln(),Ie=In(),Be=$(),Qe=q(),dt=fi(),Et=Dt(),jt=Di(),qt=Ht();function mn(Re,ze,Ke,vt,rt,pt,Z){var ae=jt(Re,Ke),be=jt(ze,Ke),_e=Z.get(be);if(_e){h(Re,Ke,_e);return}var Le=pt?pt(ae,be,Ke+"",Re,ze,Z):void 0,Ce=Le===void 0;if(Ce){var Ge=V(be),Ve=!Ge&&Ie(be),Je=!Ge&&!Ve&&Et(be);Le=be,Ge||Ve||Je?V(ae)?Le=ae:re(ae)?Le=k(ae):Ve?(Ce=!1,Le=p(be,!0)):Je?(Ce=!1,Le=v(be,!0)):Le=[]:dt(be)||N(be)?(Le=ae,N(ae)?Le=qt(ae):(!Qe(ae)||Be(ae))&&(Le=T(be))):Ce=!1}Ce&&(Z.set(be,Le),rt(Le,be,vt,pt,Z),Z.delete(be)),h(Re,Ke,Le)}l.exports=mn}),wo=u((s,l)=>{var h=ee(),p=Xe(),v=ke(),k=hr(),T=q(),N=Vn(),V=Di();function re(Ie,Be,Qe,dt,Et){Ie!==Be&&v(Be,function(jt,qt){if(Et||(Et=new h),T(jt))k(Ie,Be,qt,Qe,re,dt,Et);else{var mn=dt?dt(V(Ie,qt),jt,qt+"",Ie,Be,Et):void 0;mn===void 0&&(mn=jt),p(Ie,qt,mn)}},N)}l.exports=re}),Qr=u((s,l)=>{function h(p){return p}l.exports=h}),Br=u((s,l)=>{function h(p,v,k){switch(k.length){case 0:return p.call(v);case 1:return p.call(v,k[0]);case 2:return p.call(v,k[0],k[1]);case 3:return p.call(v,k[0],k[1],k[2])}return p.apply(v,k)}l.exports=h}),Lr=u((s,l)=>{var h=Br(),p=Math.max;function v(k,T,N){return T=p(T===void 0?k.length-1:T,0),function(){for(var V=arguments,re=-1,Ie=p(V.length-T,0),Be=Array(Ie);++re<Ie;)Be[re]=V[T+re];re=-1;for(var Qe=Array(T+1);++re<T;)Qe[re]=V[re];return Qe[T]=N(Be),h(k,this,Qe)}}l.exports=v}),Tr=u((s,l)=>{function h(p){return function(){return p}}l.exports=h}),tr=u((s,l)=>{var h=Tr(),p=We(),v=Qr(),k=p?function(T,N){return p(T,"toString",{configurable:!0,enumerable:!1,value:h(N),writable:!0})}:v;l.exports=k}),Cr=u((s,l)=>{var h=800,p=16,v=Date.now;function k(T){var N=0,V=0;return function(){var re=v(),Ie=p-(re-V);if(V=re,Ie>0){if(++N>=h)return arguments[0]}else N=0;return T.apply(void 0,arguments)}}l.exports=k}),vs=u((s,l)=>{var h=tr(),p=Cr(),v=p(h);l.exports=v}),xo=u((s,l)=>{var h=Qr(),p=Lr(),v=vs();function k(T,N){return v(p(T,N,h),T+"")}l.exports=k}),Zo=u((s,l)=>{var h=w(),p=Vt(),v=cn(),k=q();function T(N,V,re){if(!k(re))return!1;var Ie=typeof V;return(Ie=="number"?p(re)&&v(V,re.length):Ie=="string"&&V in re)?h(re[V],N):!1}l.exports=T}),Ko=u((s,l)=>{var h=xo(),p=Zo();function v(k){return h(function(T,N){var V=-1,re=N.length,Ie=re>1?N[re-1]:void 0,Be=re>2?N[2]:void 0;for(Ie=k.length>3&&typeof Ie=="function"?(re--,Ie):void 0,Be&&p(N[0],N[1],Be)&&(Ie=re<3?void 0:Ie,re=1),T=Object(T);++V<re;){var Qe=N[V];Qe&&k(T,Qe,V,Ie)}return T})}l.exports=v}),Ds=u((s,l)=>{var h=wo(),p=Ko(),v=p(function(k,T,N){h(k,T,N)});l.exports=v}),Ys=u((s,l)=>{var h=$e(),p=on(),v="[object Symbol]";function k(T){return typeof T=="symbol"||p(T)&&h(T)==v}l.exports=k}),Lo=u((s,l)=>{var h=Ct(),p=Ys(),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/;function T(N,V){if(h(N))return!1;var re=typeof N;return re=="number"||re=="symbol"||re=="boolean"||N==null||p(N)?!0:k.test(N)||!v.test(N)||V!=null&&N in Object(V)}l.exports=T}),Ml=u((s,l)=>{var h=Ne(),p="Expected a function";function v(k,T){if(typeof k!="function"||T!=null&&typeof T!="function")throw new TypeError(p);var N=function(){var V=arguments,re=T?T.apply(this,V):V[0],Ie=N.cache;if(Ie.has(re))return Ie.get(re);var Be=k.apply(this,V);return N.cache=Ie.set(re,Be)||Ie,Be};return N.cache=new(v.Cache||h),N}v.Cache=h,l.exports=v}),Bl=u((s,l)=>{var h=Ml(),p=500;function v(k){var T=h(k,function(V){return N.size===p&&N.clear(),V}),N=T.cache;return T}l.exports=v}),Jo=u((s,l)=>{var h=Bl(),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,k=h(function(T){var N=[];return T.charCodeAt(0)===46&&N.push(""),T.replace(p,function(V,re,Ie,Be){N.push(Ie?Be.replace(v,"$1"):re||V)}),N});l.exports=k}),Ka=u((s,l)=>{function h(p,v){for(var k=-1,T=p==null?0:p.length,N=Array(T);++k<T;)N[k]=v(p[k],k,p);return N}l.exports=h}),Tl=u((s,l)=>{var h=Ee(),p=Ka(),v=Ct(),k=Ys(),T=h?h.prototype:void 0,N=T?T.toString:void 0;function V(re){if(typeof re=="string")return re;if(v(re))return p(re,V)+"";if(k(re))return N?N.call(re):"";var Ie=re+"";return Ie=="0"&&1/re==-1/0?"-0":Ie}l.exports=V}),Co=u((s,l)=>{var h=Tl();function p(v){return v==null?"":h(v)}l.exports=p}),ko=u((s,l)=>{var h=Ct(),p=Lo(),v=Jo(),k=Co();function T(N,V){return h(N)?N:p(N,V)?[N]:v(k(N))}l.exports=T}),xa=u((s,l)=>{var h=Ys();function p(v){if(typeof v=="string"||h(v))return v;var k=v+"";return k=="0"&&1/v==-1/0?"-0":k}l.exports=p}),Ja=u((s,l)=>{var h=ko(),p=xa();function v(k,T){T=h(T,k);for(var N=0,V=T.length;k!=null&&N<V;)k=k[p(T[N++])];return N&&N==V?k:void 0}l.exports=v}),kr=u((s,l)=>{var h=Ja();function p(v,k,T){var N=v==null?void 0:h(v,k);return N===void 0?T:N}l.exports=p}),Fn=u((s,l)=>{(function(h,p){typeof s=="object"&&typeof l<"u"?l.exports=p():(h=h||self).RBush=p()})(s,function(){function h(Re,ze,Ke,vt,rt){(function pt(Z,ae,be,_e,Le){for(;_e>be;){if(_e-be>600){var Ce=_e-be+1,Ge=ae-be+1,Ve=Math.log(Ce),Je=.5*Math.exp(2*Ve/3),ct=.5*Math.sqrt(Ve*Je*(Ce-Je)/Ce)*(Ge-Ce/2<0?-1:1),ut=Math.max(be,Math.floor(ae-Ge*Je/Ce+ct)),Mt=Math.min(_e,Math.floor(ae+(Ce-Ge)*Je/Ce+ct));pt(Z,ae,ut,Mt,Le)}var Kt=Z[ae],Qt=be,rn=_e;for(p(Z,be,ae),Le(Z[_e],Kt)>0&&p(Z,be,_e);Qt<rn;){for(p(Z,Qt,rn),Qt++,rn--;Le(Z[Qt],Kt)<0;)Qt++;for(;Le(Z[rn],Kt)>0;)rn--}Le(Z[be],Kt)===0?p(Z,be,rn):p(Z,++rn,_e),rn<=ae&&(be=rn+1),ae<=rn&&(_e=rn-1)}})(Re,ze,Ke||0,vt||Re.length-1,rt||v)}function p(Re,ze,Ke){var vt=Re[ze];Re[ze]=Re[Ke],Re[Ke]=vt}function v(Re,ze){return Re<ze?-1:Re>ze?1:0}var k=function(Re){Re===void 0&&(Re=9),this._maxEntries=Math.max(4,Re),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function T(Re,ze,Ke){if(!Ke)return ze.indexOf(Re);for(var vt=0;vt<ze.length;vt++)if(Ke(Re,ze[vt]))return vt;return-1}function N(Re,ze){V(Re,0,Re.children.length,ze,Re)}function V(Re,ze,Ke,vt,rt){rt||(rt=qt(null)),rt.minX=1/0,rt.minY=1/0,rt.maxX=-1/0,rt.maxY=-1/0;for(var pt=ze;pt<Ke;pt++){var Z=Re.children[pt];re(rt,Re.leaf?vt(Z):Z)}return rt}function re(Re,ze){return Re.minX=Math.min(Re.minX,ze.minX),Re.minY=Math.min(Re.minY,ze.minY),Re.maxX=Math.max(Re.maxX,ze.maxX),Re.maxY=Math.max(Re.maxY,ze.maxY),Re}function Ie(Re,ze){return Re.minX-ze.minX}function Be(Re,ze){return Re.minY-ze.minY}function Qe(Re){return(Re.maxX-Re.minX)*(Re.maxY-Re.minY)}function dt(Re){return Re.maxX-Re.minX+(Re.maxY-Re.minY)}function Et(Re,ze){return Re.minX<=ze.minX&&Re.minY<=ze.minY&&ze.maxX<=Re.maxX&&ze.maxY<=Re.maxY}function jt(Re,ze){return ze.minX<=Re.maxX&&ze.minY<=Re.maxY&&ze.maxX>=Re.minX&&ze.maxY>=Re.minY}function qt(Re){return{children:Re,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mn(Re,ze,Ke,vt,rt){for(var pt=[ze,Ke];pt.length;)if(!((Ke=pt.pop())-(ze=pt.pop())<=vt)){var Z=ze+Math.ceil((Ke-ze)/vt/2)*vt;h(Re,Z,ze,Ke,rt),pt.push(ze,Z,Z,Ke)}}return k.prototype.all=function(){return this._all(this.data,[])},k.prototype.search=function(Re){var ze=this.data,Ke=[];if(!jt(Re,ze))return Ke;for(var vt=this.toBBox,rt=[];ze;){for(var pt=0;pt<ze.children.length;pt++){var Z=ze.children[pt],ae=ze.leaf?vt(Z):Z;jt(Re,ae)&&(ze.leaf?Ke.push(Z):Et(Re,ae)?this._all(Z,Ke):rt.push(Z))}ze=rt.pop()}return Ke},k.prototype.collides=function(Re){var ze=this.data;if(!jt(Re,ze))return!1;for(var Ke=[];ze;){for(var vt=0;vt<ze.children.length;vt++){var rt=ze.children[vt],pt=ze.leaf?this.toBBox(rt):rt;if(jt(Re,pt)){if(ze.leaf||Et(Re,pt))return!0;Ke.push(rt)}}ze=Ke.pop()}return!1},k.prototype.load=function(Re){if(!Re||!Re.length)return this;if(Re.length<this._minEntries){for(var ze=0;ze<Re.length;ze++)this.insert(Re[ze]);return this}var Ke=this._build(Re.slice(),0,Re.length-1,0);if(this.data.children.length)if(this.data.height===Ke.height)this._splitRoot(this.data,Ke);else{if(this.data.height<Ke.height){var vt=this.data;this.data=Ke,Ke=vt}this._insert(Ke,this.data.height-Ke.height-1,!0)}else this.data=Ke;return this},k.prototype.insert=function(Re){return Re&&this._insert(Re,this.data.height-1),this},k.prototype.clear=function(){return this.data=qt([]),this},k.prototype.remove=function(Re,ze){if(!Re)return this;for(var Ke,vt,rt,pt=this.data,Z=this.toBBox(Re),ae=[],be=[];pt||ae.length;){if(pt||(pt=ae.pop(),vt=ae[ae.length-1],Ke=be.pop(),rt=!0),pt.leaf){var _e=T(Re,pt.children,ze);if(_e!==-1)return pt.children.splice(_e,1),ae.push(pt),this._condense(ae),this}rt||pt.leaf||!Et(pt,Z)?vt?(Ke++,pt=vt.children[Ke],rt=!1):pt=null:(ae.push(pt),be.push(Ke),Ke=0,vt=pt,pt=pt.children[0])}return this},k.prototype.toBBox=function(Re){return Re},k.prototype.compareMinX=function(Re,ze){return Re.minX-ze.minX},k.prototype.compareMinY=function(Re,ze){return Re.minY-ze.minY},k.prototype.toJSON=function(){return this.data},k.prototype.fromJSON=function(Re){return this.data=Re,this},k.prototype._all=function(Re,ze){for(var Ke=[];Re;)Re.leaf?ze.push.apply(ze,Re.children):Ke.push.apply(Ke,Re.children),Re=Ke.pop();return ze},k.prototype._build=function(Re,ze,Ke,vt){var rt,pt=Ke-ze+1,Z=this._maxEntries;if(pt<=Z)return N(rt=qt(Re.slice(ze,Ke+1)),this.toBBox),rt;vt||(vt=Math.ceil(Math.log(pt)/Math.log(Z)),Z=Math.ceil(pt/Math.pow(Z,vt-1))),(rt=qt([])).leaf=!1,rt.height=vt;var ae=Math.ceil(pt/Z),be=ae*Math.ceil(Math.sqrt(Z));mn(Re,ze,Ke,be,this.compareMinX);for(var _e=ze;_e<=Ke;_e+=be){var Le=Math.min(_e+be-1,Ke);mn(Re,_e,Le,ae,this.compareMinY);for(var Ce=_e;Ce<=Le;Ce+=ae){var Ge=Math.min(Ce+ae-1,Le);rt.children.push(this._build(Re,Ce,Ge,vt-1))}}return N(rt,this.toBBox),rt},k.prototype._chooseSubtree=function(Re,ze,Ke,vt){for(;vt.push(ze),!ze.leaf&&vt.length-1!==Ke;){for(var rt=1/0,pt=1/0,Z=void 0,ae=0;ae<ze.children.length;ae++){var be=ze.children[ae],_e=Qe(be),Le=(Ce=Re,Ge=be,(Math.max(Ge.maxX,Ce.maxX)-Math.min(Ge.minX,Ce.minX))*(Math.max(Ge.maxY,Ce.maxY)-Math.min(Ge.minY,Ce.minY))-_e);Le<pt?(pt=Le,rt=_e<rt?_e:rt,Z=be):Le===pt&&_e<rt&&(rt=_e,Z=be)}ze=Z||ze.children[0]}var Ce,Ge;return ze},k.prototype._insert=function(Re,ze,Ke){var vt=Ke?Re:this.toBBox(Re),rt=[],pt=this._chooseSubtree(vt,this.data,ze,rt);for(pt.children.push(Re),re(pt,vt);ze>=0&&rt[ze].children.length>this._maxEntries;)this._split(rt,ze),ze--;this._adjustParentBBoxes(vt,rt,ze)},k.prototype._split=function(Re,ze){var Ke=Re[ze],vt=Ke.children.length,rt=this._minEntries;this._chooseSplitAxis(Ke,rt,vt);var pt=this._chooseSplitIndex(Ke,rt,vt),Z=qt(Ke.children.splice(pt,Ke.children.length-pt));Z.height=Ke.height,Z.leaf=Ke.leaf,N(Ke,this.toBBox),N(Z,this.toBBox),ze?Re[ze-1].children.push(Z):this._splitRoot(Ke,Z)},k.prototype._splitRoot=function(Re,ze){this.data=qt([Re,ze]),this.data.height=Re.height+1,this.data.leaf=!1,N(this.data,this.toBBox)},k.prototype._chooseSplitIndex=function(Re,ze,Ke){for(var vt,rt,pt,Z,ae,be,_e,Le=1/0,Ce=1/0,Ge=ze;Ge<=Ke-ze;Ge++){var Ve=V(Re,0,Ge,this.toBBox),Je=V(Re,Ge,Ke,this.toBBox),ct=(rt=Ve,pt=Je,Z=void 0,ae=void 0,be=void 0,_e=void 0,Z=Math.max(rt.minX,pt.minX),ae=Math.max(rt.minY,pt.minY),be=Math.min(rt.maxX,pt.maxX),_e=Math.min(rt.maxY,pt.maxY),Math.max(0,be-Z)*Math.max(0,_e-ae)),ut=Qe(Ve)+Qe(Je);ct<Le?(Le=ct,vt=Ge,Ce=ut<Ce?ut:Ce):ct===Le&&ut<Ce&&(Ce=ut,vt=Ge)}return vt||Ke-ze},k.prototype._chooseSplitAxis=function(Re,ze,Ke){var vt=Re.leaf?this.compareMinX:Ie,rt=Re.leaf?this.compareMinY:Be;this._allDistMargin(Re,ze,Ke,vt)<this._allDistMargin(Re,ze,Ke,rt)&&Re.children.sort(vt)},k.prototype._allDistMargin=function(Re,ze,Ke,vt){Re.children.sort(vt);for(var rt=this.toBBox,pt=V(Re,0,ze,rt),Z=V(Re,Ke-ze,Ke,rt),ae=dt(pt)+dt(Z),be=ze;be<Ke-ze;be++){var _e=Re.children[be];re(pt,Re.leaf?rt(_e):_e),ae+=dt(pt)}for(var Le=Ke-ze-1;Le>=ze;Le--){var Ce=Re.children[Le];re(Z,Re.leaf?rt(Ce):Ce),ae+=dt(Z)}return ae},k.prototype._adjustParentBBoxes=function(Re,ze,Ke){for(var vt=Ke;vt>=0;vt--)re(ze[vt],Re)},k.prototype._condense=function(Re){for(var ze=Re.length-1,Ke=void 0;ze>=0;ze--)Re[ze].children.length===0?ze>0?(Ke=Re[ze-1].children).splice(Ke.indexOf(Re[ze]),1):this.clear():N(Re[ze],this.toBBox)},k})}),wn=u(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(_e,Le,Ce){Ce===void 0&&(Ce={});var Ge={type:"Feature"};return(Ce.id===0||Ce.id)&&(Ge.id=Ce.id),Ce.bbox&&(Ge.bbox=Ce.bbox),Ge.properties=Le||{},Ge.geometry=_e,Ge}s.feature=l;function h(_e,Le,Ce){switch(_e){case"Point":return p(Le).geometry;case"LineString":return N(Le).geometry;case"Polygon":return k(Le).geometry;case"MultiPoint":return Be(Le).geometry;case"MultiLineString":return Ie(Le).geometry;case"MultiPolygon":return Qe(Le).geometry;default:throw new Error(_e+" is invalid")}}s.geometry=h;function p(_e,Le,Ce){if(Ce===void 0&&(Ce={}),!_e)throw new Error("coordinates is required");if(!Array.isArray(_e))throw new Error("coordinates must be an Array");if(_e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!pt(_e[0])||!pt(_e[1]))throw new Error("coordinates must contain numbers");var Ge={type:"Point",coordinates:_e};return l(Ge,Le,Ce)}s.point=p;function v(_e,Le,Ce){return Ce===void 0&&(Ce={}),re(_e.map(function(Ge){return p(Ge,Le)}),Ce)}s.points=v;function k(_e,Le,Ce){Ce===void 0&&(Ce={});for(var Ge=0,Ve=_e;Ge<Ve.length;Ge++){var Je=Ve[Ge];if(Je.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ct=0;ct<Je[Je.length-1].length;ct++)if(Je[Je.length-1][ct]!==Je[0][ct])throw new Error("First and last Position are not equivalent.")}var ut={type:"Polygon",coordinates:_e};return l(ut,Le,Ce)}s.polygon=k;function T(_e,Le,Ce){return Ce===void 0&&(Ce={}),re(_e.map(function(Ge){return k(Ge,Le)}),Ce)}s.polygons=T;function N(_e,Le,Ce){if(Ce===void 0&&(Ce={}),_e.length<2)throw new Error("coordinates must be an array of two or more positions");var Ge={type:"LineString",coordinates:_e};return l(Ge,Le,Ce)}s.lineString=N;function V(_e,Le,Ce){return Ce===void 0&&(Ce={}),re(_e.map(function(Ge){return N(Ge,Le)}),Ce)}s.lineStrings=V;function re(_e,Le){Le===void 0&&(Le={});var Ce={type:"FeatureCollection"};return Le.id&&(Ce.id=Le.id),Le.bbox&&(Ce.bbox=Le.bbox),Ce.features=_e,Ce}s.featureCollection=re;function Ie(_e,Le,Ce){Ce===void 0&&(Ce={});var Ge={type:"MultiLineString",coordinates:_e};return l(Ge,Le,Ce)}s.multiLineString=Ie;function Be(_e,Le,Ce){Ce===void 0&&(Ce={});var Ge={type:"MultiPoint",coordinates:_e};return l(Ge,Le,Ce)}s.multiPoint=Be;function Qe(_e,Le,Ce){Ce===void 0&&(Ce={});var Ge={type:"MultiPolygon",coordinates:_e};return l(Ge,Le,Ce)}s.multiPolygon=Qe;function dt(_e,Le,Ce){Ce===void 0&&(Ce={});var Ge={type:"GeometryCollection",geometries:_e};return l(Ge,Le,Ce)}s.geometryCollection=dt;function Et(_e,Le){if(Le===void 0&&(Le=0),Le&&!(Le>=0))throw new Error("precision must be a positive number");var Ce=Math.pow(10,Le||0);return Math.round(_e*Ce)/Ce}s.round=Et;function jt(_e,Le){Le===void 0&&(Le="kilometers");var Ce=s.factors[Le];if(!Ce)throw new Error(Le+" units is invalid");return _e*Ce}s.radiansToLength=jt;function qt(_e,Le){Le===void 0&&(Le="kilometers");var Ce=s.factors[Le];if(!Ce)throw new Error(Le+" units is invalid");return _e/Ce}s.lengthToRadians=qt;function mn(_e,Le){return ze(qt(_e,Le))}s.lengthToDegrees=mn;function Re(_e){var Le=_e%360;return Le<0&&(Le+=360),Le}s.bearingToAzimuth=Re;function ze(_e){var Le=_e%(2*Math.PI);return Le*180/Math.PI}s.radiansToDegrees=ze;function Ke(_e){var Le=_e%360;return Le*Math.PI/180}s.degreesToRadians=Ke;function vt(_e,Le,Ce){if(Le===void 0&&(Le="kilometers"),Ce===void 0&&(Ce="kilometers"),!(_e>=0))throw new Error("length must be a positive number");return jt(qt(_e,Le),Ce)}s.convertLength=vt;function rt(_e,Le,Ce){if(Le===void 0&&(Le="meters"),Ce===void 0&&(Ce="kilometers"),!(_e>=0))throw new Error("area must be a positive number");var Ge=s.areaFactors[Le];if(!Ge)throw new Error("invalid original units");var Ve=s.areaFactors[Ce];if(!Ve)throw new Error("invalid final units");return _e/Ge*Ve}s.convertArea=rt;function pt(_e){return!isNaN(_e)&&_e!==null&&!Array.isArray(_e)}s.isNumber=pt;function Z(_e){return!!_e&&_e.constructor===Object}s.isObject=Z;function ae(_e){if(!_e)throw new Error("bbox is required");if(!Array.isArray(_e))throw new Error("bbox must be an Array");if(_e.length!==4&&_e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");_e.forEach(function(Le){if(!pt(Le))throw new Error("bbox must only contain numbers")})}s.validateBBox=ae;function be(_e){if(!_e)throw new Error("id is required");if(["string","number"].indexOf(typeof _e)===-1)throw new Error("id must be a number or a string")}s.validateId=be}),Xs=u(s=>{Object.defineProperty(s,"__esModule",{value:!0});var l=wn();function h(ze,Ke,vt){if(ze!==null)for(var rt,pt,Z,ae,be,_e,Le,Ce=0,Ge=0,Ve,Je=ze.type,ct=Je==="FeatureCollection",ut=Je==="Feature",Mt=ct?ze.features.length:1,Kt=0;Kt<Mt;Kt++){Le=ct?ze.features[Kt].geometry:ut?ze.geometry:ze,Ve=Le?Le.type==="GeometryCollection":!1,be=Ve?Le.geometries.length:1;for(var Qt=0;Qt<be;Qt++){var rn=0,$n=0;if(ae=Ve?Le.geometries[Qt]:Le,ae!==null){_e=ae.coordinates;var Wn=ae.type;switch(Ce=vt&&(Wn==="Polygon"||Wn==="MultiPolygon")?1:0,Wn){case null:break;case"Point":if(Ke(_e,Ge,Kt,rn,$n)===!1)return!1;Ge++,rn++;break;case"LineString":case"MultiPoint":for(rt=0;rt<_e.length;rt++){if(Ke(_e[rt],Ge,Kt,rn,$n)===!1)return!1;Ge++,Wn==="MultiPoint"&&rn++}Wn==="LineString"&&rn++;break;case"Polygon":case"MultiLineString":for(rt=0;rt<_e.length;rt++){for(pt=0;pt<_e[rt].length-Ce;pt++){if(Ke(_e[rt][pt],Ge,Kt,rn,$n)===!1)return!1;Ge++}Wn==="MultiLineString"&&rn++,Wn==="Polygon"&&$n++}Wn==="Polygon"&&rn++;break;case"MultiPolygon":for(rt=0;rt<_e.length;rt++){for($n=0,pt=0;pt<_e[rt].length;pt++){for(Z=0;Z<_e[rt][pt].length-Ce;Z++){if(Ke(_e[rt][pt][Z],Ge,Kt,rn,$n)===!1)return!1;Ge++}$n++}rn++}break;case"GeometryCollection":for(rt=0;rt<ae.geometries.length;rt++)if(h(ae.geometries[rt],Ke,vt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function p(ze,Ke,vt,rt){var pt=vt;return h(ze,function(Z,ae,be,_e,Le){ae===0&&vt===void 0?pt=Z:pt=Ke(pt,Z,ae,be,_e,Le)},rt),pt}function v(ze,Ke){var vt;switch(ze.type){case"FeatureCollection":for(vt=0;vt<ze.features.length&&Ke(ze.features[vt].properties,vt)!==!1;vt++);break;case"Feature":Ke(ze.properties,0);break}}function k(ze,Ke,vt){var rt=vt;return v(ze,function(pt,Z){Z===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,Z)}),rt}function T(ze,Ke){if(ze.type==="Feature")Ke(ze,0);else if(ze.type==="FeatureCollection")for(var vt=0;vt<ze.features.length&&Ke(ze.features[vt],vt)!==!1;vt++);}function N(ze,Ke,vt){var rt=vt;return T(ze,function(pt,Z){Z===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,Z)}),rt}function V(ze){var Ke=[];return h(ze,function(vt){Ke.push(vt)}),Ke}function re(ze,Ke){var vt,rt,pt,Z,ae,be,_e,Le,Ce,Ge,Ve=0,Je=ze.type==="FeatureCollection",ct=ze.type==="Feature",ut=Je?ze.features.length:1;for(vt=0;vt<ut;vt++){for(be=Je?ze.features[vt].geometry:ct?ze.geometry:ze,Le=Je?ze.features[vt].properties:ct?ze.properties:{},Ce=Je?ze.features[vt].bbox:ct?ze.bbox:void 0,Ge=Je?ze.features[vt].id:ct?ze.id:void 0,_e=be?be.type==="GeometryCollection":!1,ae=_e?be.geometries.length:1,pt=0;pt<ae;pt++){if(Z=_e?be.geometries[pt]:be,Z===null){if(Ke(null,Ve,Le,Ce,Ge)===!1)return!1;continue}switch(Z.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Ke(Z,Ve,Le,Ce,Ge)===!1)return!1;break}case"GeometryCollection":{for(rt=0;rt<Z.geometries.length;rt++)if(Ke(Z.geometries[rt],Ve,Le,Ce,Ge)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ve++}}function Ie(ze,Ke,vt){var rt=vt;return re(ze,function(pt,Z,ae,be,_e){Z===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,Z,ae,be,_e)}),rt}function Be(ze,Ke){re(ze,function(vt,rt,pt,Z,ae){var be=vt===null?null:vt.type;switch(be){case null:case"Point":case"LineString":case"Polygon":return Ke(l.feature(vt,pt,{bbox:Z,id:ae}),rt,0)===!1?!1:void 0}var _e;switch(be){case"MultiPoint":_e="Point";break;case"MultiLineString":_e="LineString";break;case"MultiPolygon":_e="Polygon";break}for(var Le=0;Le<vt.coordinates.length;Le++){var Ce=vt.coordinates[Le],Ge={type:_e,coordinates:Ce};if(Ke(l.feature(Ge,pt),rt,Le)===!1)return!1}})}function Qe(ze,Ke,vt){var rt=vt;return Be(ze,function(pt,Z,ae){Z===0&&ae===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,Z,ae)}),rt}function dt(ze,Ke){Be(ze,function(vt,rt,pt){var Z=0;if(vt.geometry){var ae=vt.geometry.type;if(!(ae==="Point"||ae==="MultiPoint")){var be,_e=0,Le=0,Ce=0;if(h(vt,function(Ge,Ve,Je,ct,ut){if(be===void 0||rt>_e||ct>Le||ut>Ce){be=Ge,_e=rt,Le=ct,Ce=ut,Z=0;return}var Mt=l.lineString([be,Ge],vt.properties);if(Ke(Mt,rt,pt,ut,Z)===!1)return!1;Z++,be=Ge})===!1)return!1}}})}function Et(ze,Ke,vt){var rt=vt,pt=!1;return dt(ze,function(Z,ae,be,_e,Le){pt===!1&&vt===void 0?rt=Z:rt=Ke(rt,Z,ae,be,_e,Le),pt=!0}),rt}function jt(ze,Ke){if(!ze)throw new Error("geojson is required");Be(ze,function(vt,rt,pt){if(vt.geometry!==null){var Z=vt.geometry.type,ae=vt.geometry.coordinates;switch(Z){case"LineString":if(Ke(vt,rt,pt,0,0)===!1)return!1;break;case"Polygon":for(var be=0;be<ae.length;be++)if(Ke(l.lineString(ae[be],vt.properties),rt,pt,be)===!1)return!1;break}}})}function qt(ze,Ke,vt){var rt=vt;return jt(ze,function(pt,Z,ae,be){Z===0&&vt===void 0?rt=pt:rt=Ke(rt,pt,Z,ae,be)}),rt}function mn(ze,Ke){if(Ke=Ke||{},!l.isObject(Ke))throw new Error("options is invalid");var vt=Ke.featureIndex||0,rt=Ke.multiFeatureIndex||0,pt=Ke.geometryIndex||0,Z=Ke.segmentIndex||0,ae=Ke.properties,be;switch(ze.type){case"FeatureCollection":vt<0&&(vt=ze.features.length+vt),ae=ae||ze.features[vt].properties,be=ze.features[vt].geometry;break;case"Feature":ae=ae||ze.properties,be=ze.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":be=ze;break;default:throw new Error("geojson is invalid")}if(be===null)return null;var _e=be.coordinates;switch(be.type){case"Point":case"MultiPoint":return null;case"LineString":return Z<0&&(Z=_e.length+Z-1),l.lineString([_e[Z],_e[Z+1]],ae,Ke);case"Polygon":return pt<0&&(pt=_e.length+pt),Z<0&&(Z=_e[pt].length+Z-1),l.lineString([_e[pt][Z],_e[pt][Z+1]],ae,Ke);case"MultiLineString":return rt<0&&(rt=_e.length+rt),Z<0&&(Z=_e[rt].length+Z-1),l.lineString([_e[rt][Z],_e[rt][Z+1]],ae,Ke);case"MultiPolygon":return rt<0&&(rt=_e.length+rt),pt<0&&(pt=_e[rt].length+pt),Z<0&&(Z=_e[rt][pt].length-Z-1),l.lineString([_e[rt][pt][Z],_e[rt][pt][Z+1]],ae,Ke)}throw new Error("geojson is invalid")}function Re(ze,Ke){if(Ke=Ke||{},!l.isObject(Ke))throw new Error("options is invalid");var vt=Ke.featureIndex||0,rt=Ke.multiFeatureIndex||0,pt=Ke.geometryIndex||0,Z=Ke.coordIndex||0,ae=Ke.properties,be;switch(ze.type){case"FeatureCollection":vt<0&&(vt=ze.features.length+vt),ae=ae||ze.features[vt].properties,be=ze.features[vt].geometry;break;case"Feature":ae=ae||ze.properties,be=ze.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":be=ze;break;default:throw new Error("geojson is invalid")}if(be===null)return null;var _e=be.coordinates;switch(be.type){case"Point":return l.point(_e,ae,Ke);case"MultiPoint":return rt<0&&(rt=_e.length+rt),l.point(_e[rt],ae,Ke);case"LineString":return Z<0&&(Z=_e.length+Z),l.point(_e[Z],ae,Ke);case"Polygon":return pt<0&&(pt=_e.length+pt),Z<0&&(Z=_e[pt].length+Z),l.point(_e[pt][Z],ae,Ke);case"MultiLineString":return rt<0&&(rt=_e.length+rt),Z<0&&(Z=_e[rt].length+Z),l.point(_e[rt][Z],ae,Ke);case"MultiPolygon":return rt<0&&(rt=_e.length+rt),pt<0&&(pt=_e[rt].length+pt),Z<0&&(Z=_e[rt][pt].length-Z),l.point(_e[rt][pt][Z],ae,Ke)}throw new Error("geojson is invalid")}s.coordAll=V,s.coordEach=h,s.coordReduce=p,s.featureEach=T,s.featureReduce=N,s.findPoint=Re,s.findSegment=mn,s.flattenEach=Be,s.flattenReduce=Qe,s.geomEach=re,s.geomReduce=Ie,s.lineEach=jt,s.lineReduce=qt,s.propEach=v,s.propReduce=k,s.segmentEach=dt,s.segmentReduce=Et}),Os=u(s=>{Object.defineProperty(s,"__esModule",{value:!0});var l=Xs();function h(p){var v=[1/0,1/0,-1/0,-1/0];return l.coordEach(p,function(k){v[0]>k[0]&&(v[0]=k[0]),v[1]>k[1]&&(v[1]=k[1]),v[2]<k[0]&&(v[2]=k[0]),v[3]<k[1]&&(v[3]=k[1])}),v}h.default=h,s.default=h}),_s=u((s,l)=>{var h=Fn(),p=wn(),v=Xs(),k=Os().default,T=v.featureEach;v.coordEach,p.polygon;var N=p.featureCollection;function V(re){var Ie=new h(re);return Ie.insert=function(Be){if(Be.type!=="Feature")throw new Error("invalid feature");return Be.bbox=Be.bbox?Be.bbox:k(Be),h.prototype.insert.call(this,Be)},Ie.load=function(Be){var Qe=[];return Array.isArray(Be)?Be.forEach(function(dt){if(dt.type!=="Feature")throw new Error("invalid features");dt.bbox=dt.bbox?dt.bbox:k(dt),Qe.push(dt)}):T(Be,function(dt){if(dt.type!=="Feature")throw new Error("invalid features");dt.bbox=dt.bbox?dt.bbox:k(dt),Qe.push(dt)}),h.prototype.load.call(this,Qe)},Ie.remove=function(Be,Qe){if(Be.type!=="Feature")throw new Error("invalid feature");return Be.bbox=Be.bbox?Be.bbox:k(Be),h.prototype.remove.call(this,Be,Qe)},Ie.clear=function(){return h.prototype.clear.call(this)},Ie.search=function(Be){var Qe=h.prototype.search.call(this,this.toBBox(Be));return N(Qe)},Ie.collides=function(Be){return h.prototype.collides.call(this,this.toBBox(Be))},Ie.all=function(){var Be=h.prototype.all.call(this);return N(Be)},Ie.toJSON=function(){return h.prototype.toJSON.call(this)},Ie.fromJSON=function(Be){return h.prototype.fromJSON.call(this,Be)},Ie.toBBox=function(Be){var Qe;if(Be.bbox)Qe=Be.bbox;else if(Array.isArray(Be)&&Be.length===4)Qe=Be;else if(Array.isArray(Be)&&Be.length===6)Qe=[Be[0],Be[1],Be[3],Be[4]];else if(Be.type==="Feature")Qe=k(Be);else if(Be.type==="FeatureCollection")Qe=k(Be);else throw new Error("invalid geojson");return{minX:Qe[0],minY:Qe[1],maxX:Qe[2],maxY:Qe[3]}},Ie}l.exports=V,l.exports.default=V});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],v=0;v<h;v++)if(s.call(p,l[v],v,l))return v;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var l=Object(this),h=l.length>>>0,p=arguments[1],v=0;v<h;v++){var k=l[v];if(s.call(p,k,v,l))return k}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var l=1;l<arguments.length;l++){var h=arguments[l];if(h!=null)for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&(s[p]=h[p])}return s}),function(s){s.forEach(function(l){l.hasOwnProperty("remove")||Object.defineProperty(l,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,l){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),p=h.length>>>0;if(p===0)return!1;var v=l|0,k=Math.max(v>=0?v:p-Math.abs(v),0);function T(N,V){return N===V||typeof N=="number"&&typeof V=="number"&&isNaN(N)&&isNaN(V)}for(;k<p;){if(T(h[k],s))return!0;k++}return!1}});var Po={version:"2.18.3"},Cn=m(Ds()),zn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Qs={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Fi={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Zi={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Ya={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Yo={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},ys={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},di={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},bs={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},So={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Rs={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},La={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},eo={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ca={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},es={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Is={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},to={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Xo={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Si={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Xa={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Qo={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},yn={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},xn={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Nr={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},On={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},ka={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},ea={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},no=eo,Dr={en:zn,de:Qs,it:Fi,id:Zi,ro:Ya,ru:Yo,es:ys,nl:di,fr:bs,pt:no,pt_br:La,pt_pt:eo,zh:So,zh_tw:Rs,pl:Ca,sv:es,el:Is,hu:to,da:Xo,no:Si,fa:Xa,ua:Qo,tr:yn,cz:xn,ja:Nr,fi:On,ko:ka,ky:ea},Fs={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let l={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(l)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let l in s){let h=s[l];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},Pa=Fs,Eo={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(l=>{this._isRelevantForDrag(l)&&l.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(l=>{l.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let l in s){let h=s[l];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},vi=Eo,Pr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let l=s.target;this._isRelevantForRemoval(l)&&!l.pm.dragging()&&(l.removeFrom(this.map.pm._getContainingLayer()),l.remove(),l instanceof L.LayerGroup?(this._fireRemoveLayerGroup(l),this._fireRemoveLayerGroup(this.map,l)):(l.pm._fireRemove(l),l.pm._fireRemove(this.map,l)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let l in s){let h=s[l];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},js=Pr,Qa={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let l in s){let h=s[l];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Ao=Qa,ta=m(Ds()),io={_fireDrawStart(s="Draw",l={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,l)},_fireDrawEnd(s="Draw",l={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,l)},_fireCreate(s,l="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},l,h)},_fireCenterPlaced(s="Draw",l={}){let h=s==="Draw"?this._layer:void 0,p=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:p,latlng:this._layer.getLatLng()},s,l)},_fireCut(s,l,h,p="Draw",v={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:l,originalLayer:h},p,v)},_fireEdit(s=this._layer,l="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},l,h)},_fireEnable(s="Edit",l={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,l)},_fireDisable(s="Edit",l={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,l)},_fireUpdate(s="Edit",l={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,l)},_fireMarkerDragStart(s,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDrag(s,l=void 0,h="Edit",p={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l},h,p)},_fireMarkerDragEnd(s,l=void 0,h=void 0,p="Edit",v={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:l,intersectionReset:h},p,v)},_fireDragStart(s="Edit",l={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,l)},_fireDrag(s,l="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},l,h)},_fireDragEnd(s="Edit",l={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,l)},_fireDragEnable(s="Edit",l={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,l)},_fireDragDisable(s="Edit",l={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,l)},_fireRemove(s,l=s,h="Edit",p={}){this.__fire(s,"pm:remove",{layer:l,shape:this.getShape()},h,p)},_fireVertexAdded(s,l,h,p="Edit",v={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:l,latlng:h,shape:this.getShape()},p,v)},_fireVertexRemoved(s,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:l,shape:this.getShape()},h,p)},_fireVertexClick(s,l,h="Edit",p={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:l,shape:this.getShape()},h,p)},_fireIntersect(s,l=this._layer,h="Edit",p={}){this.__fire(l,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,p)},_fireLayerReset(s,l,h="Edit",p={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:l,shape:this.getShape()},h,p)},_fireChange(s,l="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},l,h)},_fireTextChange(s,l="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},l,h)},_fireTextFocus(s="Edit",l={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,l)},_fireTextBlur(s="Edit",l={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,l)},_fireSnapDrag(s,l,h="Snapping",p={}){this.__fire(s,"pm:snapdrag",l,h,p)},_fireSnap(s,l,h="Snapping",p={}){this.__fire(s,"pm:snap",l,h,p)},_fireUnsnap(s,l,h="Snapping",p={}){this.__fire(s,"pm:unsnap",l,h,p)},_fireRotationEnable(s,l,h="Rotation",p={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,p)},_fireRotationDisable(s,l="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRotationStart(s,l,h="Rotation",p={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:l},h,p)},_fireRotation(s,l,h,p=this._rotationLayer,v="Rotation",k={}){this.__fire(s,"pm:rotate",{layer:p,helpLayer:this._layer,startAngle:this._startAngle,angle:p.pm.getAngle(),angleDiff:l,oldLatLngs:h,newLatLngs:p.getLatLngs()},v,k)},_fireRotationEnd(s,l,h,p="Rotation",v={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:l,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},p,v)},_fireActionClick(s,l,h,p="Toolbar",v={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:l,button:h},p,v)},_fireButtonClick(s,l,h="Toolbar",p={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:l},h,p)},_fireLangChange(s,l,h,p,v="Global",k={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:l,fallback:h,translations:p},v,k)},_fireGlobalDragModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalEditModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalRemovalModeToggled(s,l="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},l,h)},_fireGlobalCutModeToggled(s="Global",l={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,l)},_fireGlobalDrawModeToggled(s="Global",l={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,l)},_fireGlobalRotateModeToggled(s="Global",l={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,l)},_fireRemoveLayerGroup(s,l=s,h="Edit",p={}){this.__fire(s,"pm:remove",{layer:l,shape:void 0},h,p)},_fireKeyeventEvent(s,l,h,p="Global",v={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:l,focusOn:h},p,v)},__fire(s,l,h,p,v={}){h=(0,ta.default)(h,v,{source:p}),L.PM.Utils._fireEvent(s,l,h)}},Mo=io,Sa=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let l="document";this.map.getContainer().contains(s.target)&&(l="map");let h={event:s,eventType:s.type,focusOn:l};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,l)},_onBlur(s){s.altKey=!1;let l={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=l,this._lastEvents.current=l},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),Bn=Sa,Ea=m(kr());function un(s){let l=L.PM.activeLang;return(0,Ea.default)(Dr[l],s)||(0,Ea.default)(Dr.en,s)||s}function nr(s){for(let l=0;l<s.length;l+=1){let h=s[l];if(Array.isArray(h)){if(nr(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Bo(s){return s.reduce((l,h)=>{if(h.length!==0){let p=Array.isArray(h)?Bo(h):h;Array.isArray(p)?p.length!==0&&l.push(p):l.push(p)}return l},[])}function ro(s,l,h){let p={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:v,b:k,f:T}=p,N=s.lng,V=s.lat,re=h,Ie=Math.PI,Be=l*Ie/180,Qe=Math.sin(Be),dt=Math.cos(Be),Et=(1-T)*Math.tan(V*Ie/180),jt=1/Math.sqrt(1+Et*Et),qt=Et*jt,mn=Math.atan2(Et,dt),Re=jt*Qe,ze=1-Re*Re,Ke=ze*(v*v-k*k)/(k*k),vt=1+Ke/16384*(4096+Ke*(-768+Ke*(320-175*Ke))),rt=Ke/1024*(256+Ke*(-128+Ke*(74-47*Ke))),pt=re/(k*vt),Z=2*Math.PI,ae,be,_e;for(;Math.abs(pt-Z)>1e-12;){ae=Math.cos(2*mn+pt),be=Math.sin(pt),_e=Math.cos(pt);let Mt=rt*be*(ae+rt/4*(_e*(-1+2*ae*ae)-rt/6*ae*(-3+4*be*be)*(-3+4*ae*ae)));Z=pt,pt=re/(k*vt)+Mt}let Le=qt*be-jt*_e*dt,Ce=Math.atan2(qt*_e+jt*be*dt,(1-T)*Math.sqrt(Re*Re+Le*Le)),Ge=Math.atan2(be*Qe,jt*_e-qt*be*dt),Ve=T/16*ze*(4+T*(4-3*ze)),Je=Ge-(1-Ve)*T*Re*(pt+Ve*be*(ae+Ve*_e*(-1+2*ae*ae))),ct=N+Je*180/Ie,ut=Ce*180/Ie;return L.latLng(ct,ut)}function fr(s,l,h,p,v=!0){let k,T,N,V=[];for(let re=0;re<h;re+=1){if(v)k=re*360/h+p,T=ro(s,k,l),N=L.latLng(T.lng,T.lat);else{let Ie=s.lat+Math.cos(2*re*Math.PI/h)*l,Be=s.lng+Math.sin(2*re*Math.PI/h)*l;N=L.latLng(Ie,Be)}V.push(N)}return V}function Aa(s,l,h){l=(l+360)%360;let p=Math.PI/180,v=180/Math.PI,{R:k}=L.CRS.Earth,T=s.lng*p,N=s.lat*p,V=l*p,re=Math.sin(N),Ie=Math.cos(N),Be=Math.cos(h/k),Qe=Math.sin(h/k),dt=Math.asin(re*Be+Ie*Qe*Math.cos(V)),Et=T+Math.atan2(Math.sin(V)*Qe*Ie,Be-re*Math.sin(dt));Et*=v;let jt=Et-360,qt=Et<-180?Et+360:Et;return Et=Et>180?jt:qt,L.latLng([dt*v,Et])}function ws(s,l,h){let p=s.latLngToContainerPoint(l),v=s.latLngToContainerPoint(h),k=Math.atan2(v.y-p.y,v.x-p.x)*180/Math.PI+90;return k+=k<0?360:0,k}function na(s,l,h,p){let v=ws(s,l,h);return Aa(l,v,p)}function ia(s,l,h="asc"){if(!l||Object.keys(l).length===0)return(V,re)=>V-re;let p=Object.keys(l),v,k=p.length-1,T={};for(;k>=0;)v=p[k],T[v.toLowerCase()]=l[v],k-=1;function N(V){if(V instanceof L.Marker)return"Marker";if(V instanceof L.Circle)return"Circle";if(V instanceof L.CircleMarker)return"CircleMarker";if(V instanceof L.Rectangle)return"Rectangle";if(V instanceof L.Polygon)return"Polygon";if(V instanceof L.Polyline)return"Line"}return(V,re)=>{let Ie,Be;if(Ie=N(V.layer).toLowerCase(),Be=N(re.layer).toLowerCase(),!Ie||!Be)return 0;let Qe=Ie in T?T[Ie]:Number.MAX_SAFE_INTEGER,dt=Be in T?T[Be]:Number.MAX_SAFE_INTEGER,Et=0;return Qe<dt?Et=-1:Qe>dt&&(Et=1),h==="desc"?Et*-1:Et}}function Or(s,l=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(l).getLatLngs():L.polyline(l).getLatLngs()}function ra(s,l){var h,p,v,k;if((p=(h=l.options.crs)==null?void 0:h.projection)!=null&&p.MAX_LATITUDE){let T=(k=(v=l.options.crs)==null?void 0:v.projection)==null?void 0:k.MAX_LATITUDE;s.lat=Math.max(Math.min(T,s.lat),-T)}return s}function Ei(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var el=L.Class.extend({includes:[Pa,vi,js,Ao,Mo],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=Bn(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",l,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let v=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(v){let k=[`${v[1]}_${v[2]}`,`${v[1]}`];for(let T of k)if(Dr[T]){s=T;break}}}let p=L.PM.activeLang;l&&(Dr[s]=(0,Cn.default)(Dr[h],l)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(p,s,h,Dr[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",l){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,l)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,l={}){let h=l.ignoreShapes||[],p=l.merge||!1;this.map.pm.Draw.shapes.forEach(v=>{h.indexOf(v)===-1&&this.map.pm.Draw[v].setPathOptions(s,p)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let l=(0,Cn.default)(this.globalOptions,s);l.editable&&(l.resizeableCircleMarker=l.editable,delete l.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!l.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let p=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!l.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),p=!0),this.map.pm.Draw.shapes.forEach(v=>{this.map.pm.Draw[v].setOptions(l)}),h&&this.map.pm.Draw.CircleMarker.enable(),p&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(v=>{v.pm.setOptions(l)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=l,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let l=L.PM.Utils.findLayers(this.map);if(!s)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},getGeomanDrawLayers(s=!1){let l=L.PM.Utils.findLayers(this.map).filter(p=>p._drawnByGeoman===!0);if(!s)return l;let h=L.featureGroup();return h._pmTempLayer=!0,l.forEach(p=>{h.addLayer(p)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){Ei(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let l="";s.type==="touchstart"||s.type==="pointerdown"?l="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(l="mouseup"),l&&Ei(this.map)._onClick(this._createMouseEvent(l,s))},_createMouseEvent(s,l){let h,p=l.touches[0]||l.changedTouches[0];try{h=new MouseEvent(s,{bubbles:l.bubbles,cancelable:l.cancelable,view:l.view,detail:p.detail,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY,ctrlKey:l.ctrlKey,altKey:l.altKey,shiftKey:l.shiftKey,metaKey:l.metaKey,button:l.button,relatedTarget:l.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,l.bubbles,l.cancelable,l.view,p.detail,p.screenX,p.screenY,p.clientX,p.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget)}return h}}),To=el,Rr=L.Control.extend({includes:[Mo],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let l=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${l}`,this._container);s.title&&h.setAttribute("title",s.title);let p=L.DomUtil.create("a","leaflet-buttons-control-button",h);p.setAttribute("role","button"),p.setAttribute("tabindex","0"),p.href="#";let v=L.DomUtil.create("div",`leaflet-pm-actions-container ${l}`,h),k=s.actions,T={cancel:{text:un("actions.cancel"),title:un("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:un("actions.finish"),title:un("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:un("actions.removeLastVertex"),title:un("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:un("actions.finish"),title:un("actions.finish"),onClick(V){this._map.pm.Draw[s.jsClass]._finishShape(V)}}};s._preparedActions=k.map(V=>{let re=typeof V=="string"?V:V.name,Ie;if(T[re])Ie=T[re];else if(V.text)Ie=V;else return Ie;let Be=L.DomUtil.create("a",`leaflet-pm-action ${l} action-${re}`,v);if(Be.setAttribute("role","button"),Be.setAttribute("tabindex","0"),Be.href="#",Ie.title&&(Be.title=Ie.title),Be.innerHTML=Ie.text,L.DomEvent.disableClickPropagation(Be),L.DomEvent.on(Be,"click",L.DomEvent.stop),Ie._node=Be,!s.disabled&&Ie.onClick){let Qe=dt=>{dt.preventDefault();let Et="",{buttons:jt}=this._map.pm.Toolbar;for(let qt in jt)if(jt[qt]._button===s){Et=qt;break}this._fireActionClick(Ie,Et,s)};L.DomEvent.addListener(Be,"click",Qe,this),L.DomEvent.addListener(Be,"click",Ie.onClick,this),L.DomEvent.addListener(Be,"click",()=>this._updateActiveAction(s))}return Ie}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let N=L.DomUtil.create("div","control-icon",p);return s.iconUrl&&N.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(N,s.className),L.DomEvent.disableClickPropagation(p),L.DomEvent.on(p,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(p,"click",this._onBtnClick,this),L.DomEvent.addListener(p,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(p,"pm-disabled"),p.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:l}=this._map.pm.Toolbar;for(let h in l)if(l[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",l=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(l,s),l.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(l,s),l.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var l;(l=s._preparedActions)==null||l.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),sa=Rr;L.Control.PMButton=sa;var Ma=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let l=`${s}Container`;return this[l]||(this[l]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[l]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),l={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let p=s[h];L.Util.setOptions(p,{className:l.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let l in s)s[l].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,l){return this.buttons[s]=l,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let l in this.buttons){let h=this.buttons[l];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,l,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let p=s;return h&&this.triggerClickOnToggledButtons(this.buttons[p]),this.buttons[p]?this.buttons[p].toggle(l):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:un("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},l={title:un("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:un("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},p={title:un("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},v={title:un("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:un("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},T={title:un("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},N={title:un("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},V={title:un("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},re={title:un("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ie={title:un("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Be={className:"control-icon leaflet-pm-icon-text",title:un("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(Qe,dt)=>{this.map.pm.Draw[dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(k)),this._addButton("drawPolygon",new L.Control.PMButton(l)),this._addButton("drawCircle",new L.Control.PMButton(p)),this._addButton("drawCircleMarker",new L.Control.PMButton(v)),this._addButton("drawText",new L.Control.PMButton(Be)),this._addButton("editMode",new L.Control.PMButton(T)),this._addButton("dragMode",new L.Control.PMButton(N)),this._addButton("cutPolygon",new L.Control.PMButton(V)),this._addButton("removalMode",new L.Control.PMButton(re)),this._addButton("rotateMode",new L.Control.PMButton(Ie))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),l=[];this.options.drawControls===!1&&(l=l.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(l=l.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&l.indexOf(h)===-1){let p=s[h]._button.tool;p||(p="draw"),s[h].setPosition(this._getBtnPosition(p)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,l){this.options.positions[s]=l,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,l){if(l)typeof l!="object"&&(l={name:l});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");let p=this.map.pm.Draw.createNewDrawInstance(l.name,h);l={...this.buttons[h]._button,...l};let v=this.createCustomControl(l);return{drawInstance:p,control:v}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let l={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(l));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let l={};if(s)for(let h in this.getButtons()){let p=this.getButtons()[h];(p._button.tool===s||s==="draw"&&!p._button.tool)&&(l[h]=p)}return l},changeControlOrder(s=[]){let l=this._shapeMapping(),h=[];s.forEach(k=>{l[k]?h.push(l[k]):h.push(k)});let p=this.getButtons(),v={};h.forEach(k=>{p[k]&&(v[k]=p[k])}),Object.keys(p).filter(k=>!p[k]._button.tool||p[k]._button.tool==="draw").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="edit").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="options").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).filter(k=>p[k]._button.tool==="custom").forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),Object.keys(p).forEach(k=>{h.indexOf(k)===-1&&(v[k]=p[k])}),this.map.pm.Toolbar.buttons=v,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),l=[];for(let h in s)l.push(h);return l},changeActionsOfControl(s,l){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!l)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=l,this.changeControlOrder()},setButtonDisabled(s,l){let h=this._btnNameMapping(s);l?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let l=this._shapeMapping();return l[s]?l[s]:s}}),Ba=Ma,oa=m(Ds()),so={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(l=>{if(Array.isArray(l)){this._assignEvents(l);return}l.off("drag",this._handleSnapping,this),l.on("drag",this._handleSnapping,this),l.off("dragend",this._cleanupSnapping,this),l.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let l=s.target;l._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(l=>{l.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var N,V,re;let l=s.target;if(l._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((N=s==null?void 0:s.originalEvent)==null?void 0:N.altKey)||((re=(V=this._map)==null?void 0:V.pm)==null?void 0:re.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(l.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let p=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,v;p?v=h.latlng:v=this._checkPrioritiySnapping(h);let k=this.options.snapDistance,T={marker:l,shape:this._shape,snapLatLng:v,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(T.marker,T),this._fireSnapDrag(this._layer,T),h.distance<k){l._orgLatLng=l.getLatLng(),l.setLatLng(v),l._snapped=!0,l._snapInfo=T;let Ie=()=>{this._snapLatLng=v,this._fireSnap(l,T),this._fireSnap(this._layer,T)},Be=this._snapLatLng||{},Qe=v||{};(Be.lat!==Qe.lat||Be.lng!==Qe.lng)&&Ie()}else this._snapLatLng&&(this._unsnap(T),l._snapped=!1,l._snapInfo=void 0,this._fireUnsnap(T.marker,T),this._fireUnsnap(this._layer,T));return!0},_createSnapList(){let s=[],l=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(p=>{if((p instanceof L.Polyline||p instanceof L.Marker||p instanceof L.CircleMarker||p instanceof L.ImageOverlay)&&p.options.snapIgnore!==!0){if(p.options.snapIgnore===void 0&&(!L.PM.optIn&&p.options.pmIgnore===!0||L.PM.optIn&&p.options.pmIgnore!==!1))return;(p instanceof L.Circle||p instanceof L.CircleMarker)&&p.pm&&p.pm._hiddenPolyCircle?s.push(p.pm._hiddenPolyCircle):p instanceof L.ImageOverlay&&(p=L.rectangle(p.getBounds())),s.push(p);let v=L.polyline([],{color:"red",pmIgnore:!0});v._pmTempLayer=!0,l.push(v),(p instanceof L.Circle||p instanceof L.CircleMarker)&&l.push(v)}}),s=s.filter(p=>this._layer!==p),s=s.filter(p=>p._latlng||p._latlngs&&nr(p._latlngs)),s=s.filter(p=>!p._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let p=L.polyline([],{color:"red",pmIgnore:!0});p._pmTempLayer=!0,l.push(p)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=l},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let l=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);l>-1&&this._snapList.splice(l,1)},_calcClosestLayer(s,l){return this._calcClosestLayers(s,l,1)[0]},_calcClosestLayers(s,l,h=1){let p=[],v={};l.forEach((T,N)=>{var re;if(T._parentCopy&&T._parentCopy===this._layer||((re=T.getLatLngs)==null?void 0:re.call(T).flat(5).length)<2)return;let V=this._calcLayerDistances(s,T);if(V.distance=Math.floor(V.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[N]){let Ie=L.polyline([],{color:"red",pmIgnore:!0});Ie._pmTempLayer=!0,this.debugIndicatorLines[N]=Ie}this.debugIndicatorLines[N].setLatLngs([s,V.latlng])}h===1&&(v.distance===void 0||V.distance-5<=v.distance)?(V.distance+5<v.distance&&(p=[]),v=V,v.layer=T,p.push(v)):h!==1&&(v={},v=V,v.layer=T,p.push(v))}),h!==1&&(p=p.sort((T,N)=>T.distance-N.distance)),h===-1&&(h=p.length);let k=this._getClosestLayerByPriority(p,h);return L.Util.isArray(k)?k:[k]},_calcLayerDistances(s,l){let h=this._map,p=l instanceof L.Marker||l instanceof L.CircleMarker,v=l instanceof L.Polygon,k=s;if(p){let T=l.getLatLng();return{latlng:{...T},distance:this._getDistance(h,T,k)}}return this._calcLatLngDistances(k,l.getLatLngs(),h,v)},_calcLatLngDistances(s,l,h,p=!1){let v,k,T,N=V=>{V.forEach((re,Ie)=>{if(Array.isArray(re)){N(re);return}if(this.options.snapSegment){let Be=re,Qe;p?Qe=Ie+1===V.length?0:Ie+1:Qe=Ie+1===V.length?void 0:Ie+1;let dt=V[Qe];if(dt){let Et=this._getDistanceToSegment(h,s,Be,dt);(k===void 0||Et<k)&&(k=Et,T=[Be,dt])}}else{let Be=this._getDistance(h,s,re);(k===void 0||Be<k)&&(k=Be,v=re)}})};return N(l),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,T[0],T[1])},segment:T,distance:k}:{latlng:v,distance:k}},_getClosestLayerByPriority(s,l=1){s=s.sort((T,N)=>T._leaflet_id-N._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],p=this._map.pm.globalOptions.snappingOrder||[],v=0,k={};return p.concat(h).forEach(T=>{k[T]||(v+=1,k[T]=v)}),s.sort(ia("instanceofShape",k)),l===1?s[0]||{}:s.slice(0,l)},_checkPrioritiySnapping(s){let l=this._map,h=s.segment[0],p=s.segment[1],v=s.latlng,k=v;if(this.options.snapVertex){let T=this._getDistance(l,h,v),N=this._getDistance(l,p,v),V=T<N?h:p,re=T<N?T:N;if(this.options.snapMiddle){let Be=L.PM.Utils.calcMiddleLatLng(l,h,p),Qe=this._getDistance(l,Be,v);Qe<T&&Qe<N&&(V=Be,re=Qe)}let Ie=this.options.snapDistance;re<Ie&&(k=V)}return{...k}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,l,h,p){let v=s.getMaxZoom();v===1/0&&(v=s.getZoom());let k=s.project(l,v),T=s.project(h,v),N=s.project(p,v),V=L.LineUtil.closestPointOnSegment(k,T,N);return s.unproject(V,v)},_getDistanceToSegment(s,l,h,p){let v=s.latLngToContainerPoint(l),k=s.latLngToContainerPoint(h),T=s.latLngToContainerPoint(p);return L.LineUtil.pointToSegmentDistance(v,k,T)},_getDistance(s,l,h){return s.latLngToContainerPoint(l).distanceTo(s.latLngToContainerPoint(h))}},No=so,oo=L.Class.extend({includes:[No,Mo],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let l=new L.Icon.Default;l.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=l,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,l=!1){l?this.options.pathOptions=(0,oa.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,l){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(l)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(l=>{this[l]._enabled&&(s=l)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(l=>{(l instanceof L.Polyline||l instanceof L.Marker||l instanceof L.Circle||l instanceof L.CircleMarker||l instanceof L.ImageOverlay)&&(l._pmTempLayer||s.push(l))}),this._enabled?s.forEach(l=>{L.PM.Utils.disablePopup(l)}):s.forEach(l=>{L.PM.Utils.enablePopup(l)})},createNewDrawInstance(s,l){let h=this._getShapeFromBtnName(l);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[l]&&this[s].setOptions(this[l].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let l={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return l[s]?l[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,l){l==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),_i=oo;_i.Marker=_i.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let l=s;l.target=this._hintMarker,this._handleSnapping(l)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=new L.Marker(l,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,l;(s=this.options.markerStyle)!=null&&s.icon&&((l=this._hintMarker)==null||l.setIcon(this.options.markerStyle.icon))}});var C=63710088e-1,Y={centimeters:C*100,centimetres:C*100,degrees:C/111325,feet:C*3.28084,inches:C*39.37,kilometers:C/1e3,kilometres:C/1e3,meters:C,metres:C,miles:C/1609.344,millimeters:C*1e3,millimetres:C*1e3,nauticalmiles:C/1852,radians:1,yards:C*1.0936};function De(s,l,h){h===void 0&&(h={});var p={type:"Feature"};return(h.id===0||h.id)&&(p.id=h.id),h.bbox&&(p.bbox=h.bbox),p.properties=l||{},p.geometry=s,p}function He(s,l,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!vn(s[0])||!vn(s[1]))throw new Error("coordinates must contain numbers");var p={type:"Point",coordinates:s};return De(p,l,h)}function ot(s,l,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var p={type:"LineString",coordinates:s};return De(p,l,h)}function yt(s,l){l===void 0&&(l={});var h={type:"FeatureCollection"};return l.id&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.features=s,h}function Ot(s,l){l===void 0&&(l="kilometers");var h=Y[l];if(!h)throw new Error(l+" units is invalid");return s*h}function Gt(s,l){l===void 0&&(l="kilometers");var h=Y[l];if(!h)throw new Error(l+" units is invalid");return s/h}function Jt(s){var l=s%(2*Math.PI);return l*180/Math.PI}function sn(s){var l=s%360;return l*Math.PI/180}function vn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Tn(s){var l,h,p={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")l=[h.coordinates];else if(h.type==="MultiLineString")l=h.coordinates;else if(h.type==="MultiPolygon")l=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")l=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return l.forEach(function(v){l.forEach(function(k){for(var T=0;T<v.length-1;T++)for(var N=T;N<k.length-1;N++)if(!(v===k&&(Math.abs(T-N)===1||T===0&&N===v.length-2&&v[T][0]===v[v.length-1][0]&&v[T][1]===v[v.length-1][1]))){var V=si(v[T][0],v[T][1],v[T+1][0],v[T+1][1],k[N][0],k[N][1],k[N+1][0],k[N+1][1]);V&&p.features.push(He([V[0],V[1]]))}})}),p}function si(s,l,h,p,v,k,T,N){var V,re,Ie,Be,Qe,dt={x:null,y:null,onLine1:!1,onLine2:!1};return V=(N-k)*(h-s)-(T-v)*(p-l),V===0?dt.x!==null&&dt.y!==null?dt:!1:(re=l-k,Ie=s-v,Be=(T-v)*re-(N-k)*Ie,Qe=(h-s)*re-(p-l)*Ie,re=Be/V,Ie=Qe/V,dt.x=s+re*(h-s),dt.y=l+re*(p-l),re>=0&&re<=1&&(dt.onLine1=!0),Ie>=0&&Ie<=1&&(dt.onLine2=!0),dt.onLine1&&dt.onLine2?[dt.x,dt.y]:!1)}_i.Line=_i.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let l=s[s.length-1];this._hintline.setLatLngs([l,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let l=this._layer._defaultShape().slice();l.push(this._hintMarker.getLatLng()),this._change(l)},hasSelfIntersection(){return Tn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,l){let h=L.polyline(this._layer.getLatLngs());s&&(l||(l=this._hintMarker.getLatLng()),h.addLatLng(l));let p=Tn(h.toGeoJSON(15));this._doesSelfIntersect=p.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(p,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),p=h[h.length-1];if(l.equals(h[0])||h.length>0&&l.equals(p)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:l,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(l);let v=this._createMarker(l);this._setTooltipText(),this._setHintLineAfterNewVertex(l),this._fireVertexAdded(v,void 0,l,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let l=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let v=s[s.length-1],k=l.indexOf(v.getLatLng());l=l.slice(0,k+1),this._layer.setLatLngs(l),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,p,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let l=L.polyline(s,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let l=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),l.on("click",this._finishShape,this),l},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),l="";s<=1?l=un("tooltips.continueLine"):l=un("tooltips.finishLine"),this._hintMarker.setTooltipContent(l)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,l;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(l=this._hintline)==null||l.setStyle(this.options.hintlineStyle)}}),_i.Polygon=_i.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let l=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this._layerGroup.addLayer(l),this._markers.push(l),this._layer.getLatLngs().flat().length===1?(l.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(l)-1,this.options.snappable&&this._cleanupSnapping()):l.on("click",()=>1),l},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),l="";s<=2?l=un("tooltips.continueLine"):l=un("tooltips.finishPoly"),this._hintMarker.setTooltipContent(l)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let l=L.polygon(s,this.options.pathOptions);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),this._fireCreate(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),_i.Rectangle=_i.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let l=0;l<2;l+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(l),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(l)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(un("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let l=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(l,"Draw")},_syncRectangleSize(){let s=ra(this._startMarker.getLatLng(),this._map),l=ra(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,l,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let p=[];h.forEach(v=>{!v.equals(s,1e-8)&&!v.equals(l,1e-8)&&p.push(v)}),p.forEach((v,k)=>{try{this._styleMarkers[k].setLatLng(v)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(l))return;let p=L.rectangle([h,l],this.options.pathOptions);if(this.options.rectangleAngle){let k=L.PM.Utils._getRotatedRectangle(h,l,this.options.rectangleAngle||0,this._map);p.setLatLngs(k),p.pm&&p.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),this._fireCreate(p);let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),_i.CircleMarker=_i.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let l={};L.extend(l,this.options.templineStyle),l.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),l),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let l=this._hintMarker.getLatLng();this._centerMarker.setLatLng(l),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(un("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),l=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,l])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let l=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(l,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(l,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let T=this._hintMarker.getLatLng();h=this._distanceCalculation(l,T),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let p={...this.options.pathOptions,radius:h},v=new this._BaseCircleClass(l,p);this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),v.pm&&v.pm._updateHiddenPolyCircle(),this._fireCreate(v);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let l=this._centerMarker.getLatLng(),h=this._distanceCalculation(l,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=na(this._map,l,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=na(this._map,l,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),l=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,l);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var l,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(l=this._layer)==null||l.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,l){return this._map.project(s).distanceTo(this._map.project(l))}}),_i.Circle=_i.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,l){return this._map.distance(s,l)}});function jn(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Hn(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ai(s){return s.type==="Feature"?s.geometry:s}function Li(s,l){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function Sr(s,l,h){if(s!==null)for(var p,v,k,T,N,V,re,Ie=0,Be=0,Qe,dt=s.type,Et=dt==="FeatureCollection",jt=dt==="Feature",qt=Et?s.features.length:1,mn=0;mn<qt;mn++){re=Et?s.features[mn].geometry:jt?s.geometry:s,Qe=re?re.type==="GeometryCollection":!1,N=Qe?re.geometries.length:1;for(var Re=0;Re<N;Re++){var ze=0,Ke=0;if(T=Qe?re.geometries[Re]:re,T!==null){V=T.coordinates;var vt=T.type;switch(Ie=0,vt){case null:break;case"Point":if(l(V,Be,mn,ze,Ke)===!1)return!1;Be++,ze++;break;case"LineString":case"MultiPoint":for(p=0;p<V.length;p++){if(l(V[p],Be,mn,ze,Ke)===!1)return!1;Be++,vt==="MultiPoint"&&ze++}vt==="LineString"&&ze++;break;case"Polygon":case"MultiLineString":for(p=0;p<V.length;p++){for(v=0;v<V[p].length-Ie;v++){if(l(V[p][v],Be,mn,ze,Ke)===!1)return!1;Be++}vt==="MultiLineString"&&ze++,vt==="Polygon"&&Ke++}vt==="Polygon"&&ze++;break;case"MultiPolygon":for(p=0;p<V.length;p++){for(Ke=0,v=0;v<V[p].length;v++){for(k=0;k<V[p][v].length-Ie;k++){if(l(V[p][v][k],Be,mn,ze,Ke)===!1)return!1;Be++}Ke++}ze++}break;case"GeometryCollection":for(p=0;p<T.geometries.length;p++)if(Sr(T.geometries[p],l)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Xn(s,l){if(s.type==="Feature")l(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&l(s.features[h],h)!==!1;h++);}function ir(s,l,h){var p=h;return Xn(s,function(v,k){k===0&&h===void 0?p=v:p=l(p,v,k)}),p}function tl(s,l){var h,p,v,k,T,N,V,re,Ie,Be,Qe=0,dt=s.type==="FeatureCollection",Et=s.type==="Feature",jt=dt?s.features.length:1;for(h=0;h<jt;h++){for(N=dt?s.features[h].geometry:Et?s.geometry:s,re=dt?s.features[h].properties:Et?s.properties:{},Ie=dt?s.features[h].bbox:Et?s.bbox:void 0,Be=dt?s.features[h].id:Et?s.id:void 0,V=N?N.type==="GeometryCollection":!1,T=V?N.geometries.length:1,v=0;v<T;v++){if(k=V?N.geometries[v]:N,k===null){if(l(null,Qe,re,Ie,Be)===!1)return!1;continue}switch(k.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(l(k,Qe,re,Ie,Be)===!1)return!1;break}case"GeometryCollection":{for(p=0;p<k.geometries.length;p++)if(l(k.geometries[p],Qe,re,Ie,Be)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Qe++}}function rr(s,l){tl(s,function(h,p,v,k,T){var N=h===null?null:h.type;switch(N){case null:case"Point":case"LineString":case"Polygon":return l(De(h,v,{bbox:k,id:T}),p,0)===!1?!1:void 0}var V;switch(N){case"MultiPoint":V="Point";break;case"MultiLineString":V="LineString";break;case"MultiPolygon":V="Polygon";break}for(var re=0;re<h.coordinates.length;re++){var Ie=h.coordinates[re],Be={type:V,coordinates:Ie};if(l(De(Be,v),p,re)===!1)return!1}})}function Ta(s){if(!s)throw new Error("geojson is required");var l=[];return rr(s,function(h){ts(h,l)}),yt(l)}function ts(s,l){var h=[],p=s.geometry;if(p!==null){switch(p.type){case"Polygon":h=Hn(p);break;case"LineString":h=[Hn(p)]}h.forEach(function(v){var k=Na(v,s.properties);k.forEach(function(T){T.id=l.length,l.push(T)})})}}function Na(s,l){var h=[];return s.reduce(function(p,v){var k=ot([p,v],l);return k.bbox=zs(p,v),h.push(k),v}),h}function zs(s,l){var h=s[0],p=s[1],v=l[0],k=l[1],T=h<v?h:v,N=p<k?p:k,V=h>v?h:v,re=p>k?p:k;return[T,N,V,re]}var Us=Ta,Ci=m(_s(),1);function aa(s,l){var h={},p=[];if(s.type==="LineString"&&(s=De(s)),l.type==="LineString"&&(l=De(l)),s.type==="Feature"&&l.type==="Feature"&&s.geometry!==null&&l.geometry!==null&&s.geometry.type==="LineString"&&l.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var v=dr(s,l);return v&&p.push(v),yt(p)}var k=(0,Ci.default)();return k.load(Us(l)),Xn(Us(s),function(T){Xn(k.search(T),function(N){var V=dr(T,N);if(V){var re=Hn(V).join(",");h[re]||(h[re]=!0,p.push(V))}})}),yt(p)}function dr(s,l){var h=Hn(s),p=Hn(l);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(p.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var v=h[0][0],k=h[0][1],T=h[1][0],N=h[1][1],V=p[0][0],re=p[0][1],Ie=p[1][0],Be=p[1][1],Qe=(Be-re)*(T-v)-(Ie-V)*(N-k),dt=(Ie-V)*(k-re)-(Be-re)*(v-V),Et=(T-v)*(k-re)-(N-k)*(v-V);if(Qe===0)return null;var jt=dt/Qe,qt=Et/Qe;if(jt>=0&&jt<=1&&qt>=0&&qt<=1){var mn=v+jt*(T-v),Re=k+jt*(N-k);return He([mn,Re])}return null}var sr=aa,la=m(_s(),1);function Ki(s,l,h){h===void 0&&(h={});var p=jn(s),v=jn(l),k=sn(v[1]-p[1]),T=sn(v[0]-p[0]),N=sn(p[1]),V=sn(v[1]),re=Math.pow(Math.sin(k/2),2)+Math.pow(Math.sin(T/2),2)*Math.cos(N)*Math.cos(V);return Ot(2*Math.atan2(Math.sqrt(re),Math.sqrt(1-re)),h.units)}var qs=Ki;function Er(s){var l=s[0],h=s[1],p=s[2],v=s[3],k=qs(s.slice(0,2),[p,h]),T=qs(s.slice(0,2),[l,v]);if(k>=T){var N=(h+v)/2;return[l,N-(p-l)/2,p,N+(p-l)/2]}else{var V=(l+p)/2;return[V-(v-h)/2,h,V+(v-h)/2,v]}}var nl=Er;function Mi(s){var l=[1/0,1/0,-1/0,-1/0];return Sr(s,function(h){l[0]>h[0]&&(l[0]=h[0]),l[1]>h[1]&&(l[1]=h[1]),l[2]<h[0]&&(l[2]=h[0]),l[3]<h[1]&&(l[3]=h[1])}),l}Mi.default=Mi;var xs=Mi;function Ir(s,l){l===void 0&&(l={});var h=l.precision,p=l.coordinates,v=l.mutate;if(h=h==null||isNaN(h)?6:h,p=p==null||isNaN(p)?3:p,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof p!="number")throw new Error("<coordinates> must be a number");(v===!1||v===void 0)&&(s=JSON.parse(JSON.stringify(s)));var k=Math.pow(10,h);return Sr(s,function(T){Do(T,k,p)}),s}function Do(s,l,h){s.length>h&&s.splice(h,s.length);for(var p=0;p<s.length;p++)s[p]=Math.round(s[p]*l)/l;return s}var $s=Ir;function Ls(s,l,h){if(h===void 0&&(h={}),h.final===!0)return ji(s,l);var p=jn(s),v=jn(l),k=sn(p[0]),T=sn(v[0]),N=sn(p[1]),V=sn(v[1]),re=Math.sin(T-k)*Math.cos(V),Ie=Math.cos(N)*Math.sin(V)-Math.sin(N)*Math.cos(V)*Math.cos(T-k);return Jt(Math.atan2(re,Ie))}function ji(s,l){var h=Ls(l,s);return h=(h+180)%360,h}function Oi(s,l,h,p){p===void 0&&(p={});var v=jn(s),k=sn(v[0]),T=sn(v[1]),N=sn(h),V=Gt(l,p.units),re=Math.asin(Math.sin(T)*Math.cos(V)+Math.cos(T)*Math.sin(V)*Math.cos(N)),Ie=k+Math.atan2(Math.sin(N)*Math.sin(V)*Math.cos(T),Math.cos(V)-Math.sin(T)*Math.sin(re)),Be=Jt(Ie),Qe=Jt(re);return He([Be,Qe],p.properties)}function ns(s,l,h){h===void 0&&(h={});var p=He([1/0,1/0],{dist:1/0}),v=0;return rr(s,function(k){for(var T=Hn(k),N=0;N<T.length-1;N++){var V=He(T[N]);V.properties.dist=qs(l,V,h);var re=He(T[N+1]);re.properties.dist=qs(l,re,h);var Ie=qs(V,re,h),Be=Math.max(V.properties.dist,re.properties.dist),Qe=Ls(V,re),dt=Oi(l,Be,Qe+90,h),Et=Oi(l,Be,Qe-90,h),jt=sr(ot([dt.geometry.coordinates,Et.geometry.coordinates]),ot([V.geometry.coordinates,re.geometry.coordinates])),qt=null;jt.features.length>0&&(qt=jt.features[0],qt.properties.dist=qs(l,qt,h),qt.properties.location=v+qs(V,qt,h)),V.properties.dist<p.properties.dist&&(p=V,p.properties.index=N,p.properties.location=v),re.properties.dist<p.properties.dist&&(p=re,p.properties.index=N+1,p.properties.location=v+Ie),qt&&qt.properties.dist<p.properties.dist&&(p=qt,p.properties.index=N),v+=Ie}}),p}var pr=ns;function Fr(s,l){if(!s)throw new Error("line is required");if(!l)throw new Error("splitter is required");var h=Li(s),p=Li(l);if(h!=="LineString")throw new Error("line must be LineString");if(p==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(p==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var v=$s(l,{precision:7});switch(p){case"Point":return jr(s,v);case"MultiPoint":return Vs(s,v);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Vs(s,sr(s,v))}}function Vs(s,l){var h=[],p=(0,la.default)();return rr(l,function(v){if(h.forEach(function(N,V){N.id=V}),!h.length)h=jr(s,v).features,h.forEach(function(N){N.bbox||(N.bbox=nl(xs(N)))}),p.load(yt(h));else{var k=p.search(v);if(k.features.length){var T=pi(v,k);h=h.filter(function(N){return N.id!==T.id}),p.remove(T),Xn(jr(T,v),function(N){h.push(N),p.insert(N)})}}}),yt(h)}function jr(s,l){var h=[],p=Hn(s)[0],v=Hn(s)[s.geometry.coordinates.length-1];if(Cs(p,jn(l))||Cs(v,jn(l)))return yt([s]);var k=(0,la.default)(),T=Us(s);k.load(T);var N=k.search(l);if(!N.features.length)return yt([s]);var V=pi(l,N),re=[p],Ie=ir(T,function(Be,Qe,dt){var Et=Hn(Qe)[1],jt=jn(l);return dt===V.id?(Be.push(jt),h.push(ot(Be)),Cs(jt,Et)?[jt]:[jt,Et]):(Be.push(Et),Be)},re);return Ie.length>1&&h.push(ot(Ie)),yt(h)}function pi(s,l){if(!l.features.length)throw new Error("lines must contain features");if(l.features.length===1)return l.features[0];var h,p=1/0;return Xn(l,function(v){var k=pr(v,s),T=k.properties.dist;T<p&&(h=v,p=T)}),h}function Cs(s,l){return s[0]===l[0]&&s[1]===l[1]}var or=Fr;function Ji(s,l,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!l)throw new Error("polygon is required");var p=jn(s),v=Ai(l),k=v.type,T=l.bbox,N=v.coordinates;if(T&&Da(p,T)===!1)return!1;k==="Polygon"&&(N=[N]);for(var V=!1,re=0;re<N.length&&!V;re++)if(Oo(p,N[re][0],h.ignoreBoundary)){for(var Ie=!1,Be=1;Be<N[re].length&&!Ie;)Oo(p,N[re][Be],!h.ignoreBoundary)&&(Ie=!0),Be++;Ie||(V=!0)}return V}function Oo(s,l,h){var p=!1;l[0][0]===l[l.length-1][0]&&l[0][1]===l[l.length-1][1]&&(l=l.slice(0,l.length-1));for(var v=0,k=l.length-1;v<l.length;k=v++){var T=l[v][0],N=l[v][1],V=l[k][0],re=l[k][1],Ie=s[1]*(T-V)+N*(V-s[0])+re*(s[0]-T)===0&&(T-s[0])*(V-s[0])<=0&&(N-s[1])*(re-s[1])<=0;if(Ie)return!h;var Be=N>s[1]!=re>s[1]&&s[0]<(V-T)*(s[1]-N)/(re-N)+T;Be&&(p=!p)}return p}function Da(s,l){return l[0]<=s[0]&&l[1]<=s[1]&&l[2]>=s[0]&&l[3]>=s[1]}function Oa(s,l,h){h===void 0&&(h={});for(var p=jn(s),v=Hn(l),k=0;k<v.length-1;k++){var T=!1;if(h.ignoreEndVertices&&(k===0&&(T="start"),k===v.length-2&&(T="end"),k===0&&k+1===v.length-1&&(T="both")),Yi(v[k],v[k+1],p,T,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function Yi(s,l,h,p,v){var k=h[0],T=h[1],N=s[0],V=s[1],re=l[0],Ie=l[1],Be=h[0]-N,Qe=h[1]-V,dt=re-N,Et=Ie-V,jt=Be*Et-Qe*dt;if(v!==null){if(Math.abs(jt)>v)return!1}else if(jt!==0)return!1;if(p){if(p==="start")return Math.abs(dt)>=Math.abs(Et)?dt>0?N<k&&k<=re:re<=k&&k<N:Et>0?V<T&&T<=Ie:Ie<=T&&T<V;if(p==="end")return Math.abs(dt)>=Math.abs(Et)?dt>0?N<=k&&k<re:re<k&&k<=N:Et>0?V<=T&&T<Ie:Ie<T&&T<=V;if(p==="both")return Math.abs(dt)>=Math.abs(Et)?dt>0?N<k&&k<re:re<k&&k<N:Et>0?V<T&&T<Ie:Ie<T&&T<V}else return Math.abs(dt)>=Math.abs(Et)?dt>0?N<=k&&k<=re:re<=k&&k<=N:Et>0?V<=T&&T<=Ie:Ie<=T&&T<=V;return!1}var mr=Oa;function ao(s,l){var h=Ai(s),p=Ai(l),v=h.type,k=p.type,T=h.coordinates,N=p.coordinates;switch(v){case"Point":switch(k){case"Point":return Gn(T,N);default:throw new Error("feature2 "+k+" geometry not supported")}case"MultiPoint":switch(k){case"Point":return ks(h,p);case"MultiPoint":return ua(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}case"LineString":switch(k){case"Point":return mr(p,h,{ignoreEndVertices:!0});case"LineString":return Hs(h,p);case"MultiPoint":return lo(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}case"Polygon":switch(k){case"Point":return Ji(p,h,{ignoreBoundary:!0});case"LineString":return zr(h,p);case"Polygon":return zi(h,p);case"MultiPoint":return uo(h,p);default:throw new Error("feature2 "+k+" geometry not supported")}default:throw new Error("feature1 "+v+" geometry not supported")}}function ks(s,l){var h,p=!1;for(h=0;h<s.coordinates.length;h++)if(Gn(s.coordinates[h],l.coordinates)){p=!0;break}return p}function ua(s,l){for(var h=0,p=l.coordinates;h<p.length;h++){for(var v=p[h],k=!1,T=0,N=s.coordinates;T<N.length;T++){var V=N[T];if(Gn(v,V)){k=!0;break}}if(!k)return!1}return!0}function lo(s,l){for(var h=!1,p=0,v=l.coordinates;p<v.length;p++){var k=v[p];if(mr(k,s,{ignoreEndVertices:!0})&&(h=!0),!mr(k,s))return!1}return!!h}function uo(s,l){for(var h=0,p=l.coordinates;h<p.length;h++){var v=p[h];if(!Ji(v,s,{ignoreBoundary:!0}))return!1}return!0}function Hs(s,l){for(var h=!1,p=0,v=l.coordinates;p<v.length;p++){var k=v[p];if(mr({type:"Point",coordinates:k},s,{ignoreEndVertices:!0})&&(h=!0),!mr({type:"Point",coordinates:k},s,{ignoreEndVertices:!1}))return!1}return h}function zr(s,l){var h=!1,p=0,v=xs(s),k=xs(l);if(!Jn(v,k))return!1;for(p;p<l.coordinates.length-1;p++){var T=yi(l.coordinates[p],l.coordinates[p+1]);if(Ji({type:"Point",coordinates:T},s,{ignoreBoundary:!0})){h=!0;break}}return h}function zi(s,l){if(s.type==="Feature"&&s.geometry===null||l.type==="Feature"&&l.geometry===null)return!1;var h=xs(s),p=xs(l);if(!Jn(h,p))return!1;for(var v=Ai(l).coordinates,k=0,T=v;k<T.length;k++)for(var N=T[k],V=0,re=N;V<re.length;V++){var Ie=re[V];if(!Ji(Ie,s))return!1}return!0}function Jn(s,l){return!(s[0]>l[0]||s[2]<l[2]||s[1]>l[1]||s[3]<l[3])}function Gn(s,l){return s[0]===l[0]&&s[1]===l[1]}function yi(s,l){return[(s[0]+l[0])/2,(s[1]+l[1])/2]}var Qn=m(kr()),is=s=>()=>s,co=s=>{let l=s?(h,p)=>p.minus(h).abs().isLessThanOrEqualTo(s):is(!1);return(h,p)=>l(h,p)?0:h.comparedTo(p)};function Ps(s){let l=s?(h,p,v,k,T)=>h.exponentiatedBy(2).isLessThanOrEqualTo(k.minus(p).exponentiatedBy(2).plus(T.minus(v).exponentiatedBy(2)).times(s)):is(!1);return(h,p,v)=>{let k=h.x,T=h.y,N=v.x,V=v.y,re=T.minus(V).times(p.x.minus(N)).minus(k.minus(N).times(p.y.minus(V)));return l(re,k,T,N,V)?0:re.comparedTo(0)}}var il=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ho=Math.ceil,Bi=Math.floor,ei="[BigNumber Error] ",gr=ei+"Number primitive has more than 15 significant digits: ",vr=1e14,pn=14,rl=9007199254740991,Ro=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ur=1e7,Xi=1e9;function Nl(s){var l,h,p,v=Re.prototype={constructor:Re,toString:null,valueOf:null},k=new Re(1),T=20,N=4,V=-7,re=21,Ie=-1e7,Be=1e7,Qe=!1,dt=1,Et=0,jt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},qt="0123456789abcdefghijklmnopqrstuvwxyz",mn=!0;function Re(Z,ae){var be,_e,Le,Ce,Ge,Ve,Je,ct,ut=this;if(!(ut instanceof Re))return new Re(Z,ae);if(ae==null){if(Z&&Z._isBigNumber===!0){ut.s=Z.s,!Z.c||Z.e>Be?ut.c=ut.e=null:Z.e<Ie?ut.c=[ut.e=0]:(ut.e=Z.e,ut.c=Z.c.slice());return}if((Ve=typeof Z=="number")&&Z*0==0){if(ut.s=1/Z<0?(Z=-Z,-1):1,Z===~~Z){for(Ce=0,Ge=Z;Ge>=10;Ge/=10,Ce++);Ce>Be?ut.c=ut.e=null:(ut.e=Ce,ut.c=[Z]);return}ct=String(Z)}else{if(!il.test(ct=String(Z)))return p(ut,ct,Ve);ut.s=ct.charCodeAt(0)==45?(ct=ct.slice(1),-1):1}(Ce=ct.indexOf("."))>-1&&(ct=ct.replace(".","")),(Ge=ct.search(/e/i))>0?(Ce<0&&(Ce=Ge),Ce+=+ct.slice(Ge+1),ct=ct.substring(0,Ge)):Ce<0&&(Ce=ct.length)}else{if(i(ae,2,qt.length,"Base"),ae==10&&mn)return ut=new Re(Z),rt(ut,T+ut.e+1,N);if(ct=String(Z),Ve=typeof Z=="number"){if(Z*0!=0)return p(ut,ct,Ve,ae);if(ut.s=1/Z<0?(ct=ct.slice(1),-1):1,Re.DEBUG&&ct.replace(/^0\.0*|\./,"").length>15)throw Error(gr+Z)}else ut.s=ct.charCodeAt(0)===45?(ct=ct.slice(1),-1):1;for(be=qt.slice(0,ae),Ce=Ge=0,Je=ct.length;Ge<Je;Ge++)if(be.indexOf(_e=ct.charAt(Ge))<0){if(_e=="."){if(Ge>Ce){Ce=Je;continue}}else if(!Le&&(ct==ct.toUpperCase()&&(ct=ct.toLowerCase())||ct==ct.toLowerCase()&&(ct=ct.toUpperCase()))){Le=!0,Ge=-1,Ce=0;continue}return p(ut,String(Z),Ve,ae)}Ve=!1,ct=h(ct,ae,10,ut.s),(Ce=ct.indexOf("."))>-1?ct=ct.replace(".",""):Ce=ct.length}for(Ge=0;ct.charCodeAt(Ge)===48;Ge++);for(Je=ct.length;ct.charCodeAt(--Je)===48;);if(ct=ct.slice(Ge,++Je)){if(Je-=Ge,Ve&&Re.DEBUG&&Je>15&&(Z>rl||Z!==Bi(Z)))throw Error(gr+ut.s*Z);if((Ce=Ce-Ge-1)>Be)ut.c=ut.e=null;else if(Ce<Ie)ut.c=[ut.e=0];else{if(ut.e=Ce,ut.c=[],Ge=(Ce+1)%pn,Ce<0&&(Ge+=pn),Ge<Je){for(Ge&&ut.c.push(+ct.slice(0,Ge)),Je-=pn;Ge<Je;)ut.c.push(+ct.slice(Ge,Ge+=pn));Ge=pn-(ct=ct.slice(Ge)).length}else Ge-=Je;for(;Ge--;ct+="0");ut.c.push(+ct)}}else ut.c=[ut.e=0]}Re.clone=Nl,Re.ROUND_UP=0,Re.ROUND_DOWN=1,Re.ROUND_CEIL=2,Re.ROUND_FLOOR=3,Re.ROUND_HALF_UP=4,Re.ROUND_HALF_DOWN=5,Re.ROUND_HALF_EVEN=6,Re.ROUND_HALF_CEIL=7,Re.ROUND_HALF_FLOOR=8,Re.EUCLID=9,Re.config=Re.set=function(Z){var ae,be;if(Z!=null)if(typeof Z=="object"){if(Z.hasOwnProperty(ae="DECIMAL_PLACES")&&(be=Z[ae],i(be,0,Xi,ae),T=be),Z.hasOwnProperty(ae="ROUNDING_MODE")&&(be=Z[ae],i(be,0,8,ae),N=be),Z.hasOwnProperty(ae="EXPONENTIAL_AT")&&(be=Z[ae],be&&be.pop?(i(be[0],-1e9,0,ae),i(be[1],0,Xi,ae),V=be[0],re=be[1]):(i(be,-1e9,Xi,ae),V=-(re=be<0?-be:be))),Z.hasOwnProperty(ae="RANGE"))if(be=Z[ae],be&&be.pop)i(be[0],-1e9,-1,ae),i(be[1],1,Xi,ae),Ie=be[0],Be=be[1];else if(i(be,-1e9,Xi,ae),be)Ie=-(Be=be<0?-be:be);else throw Error(ei+ae+" cannot be zero: "+be);if(Z.hasOwnProperty(ae="CRYPTO"))if(be=Z[ae],be===!!be)if(be)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Qe=be;else throw Qe=!be,Error(ei+"crypto unavailable");else Qe=be;else throw Error(ei+ae+" not true or false: "+be);if(Z.hasOwnProperty(ae="MODULO_MODE")&&(be=Z[ae],i(be,0,9,ae),dt=be),Z.hasOwnProperty(ae="POW_PRECISION")&&(be=Z[ae],i(be,0,Xi,ae),Et=be),Z.hasOwnProperty(ae="FORMAT"))if(be=Z[ae],typeof be=="object")jt=be;else throw Error(ei+ae+" not an object: "+be);if(Z.hasOwnProperty(ae="ALPHABET"))if(be=Z[ae],typeof be=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(be))mn=be.slice(0,10)=="0123456789",qt=be;else throw Error(ei+ae+" invalid: "+be)}else throw Error(ei+"Object expected: "+Z);return{DECIMAL_PLACES:T,ROUNDING_MODE:N,EXPONENTIAL_AT:[V,re],RANGE:[Ie,Be],CRYPTO:Qe,MODULO_MODE:dt,POW_PRECISION:Et,FORMAT:jt,ALPHABET:qt}},Re.isBigNumber=function(Z){if(!Z||Z._isBigNumber!==!0)return!1;if(!Re.DEBUG)return!0;var ae,be,_e=Z.c,Le=Z.e,Ce=Z.s;e:if({}.toString.call(_e)=="[object Array]"){if((Ce===1||Ce===-1)&&Le>=-1e9&&Le<=Xi&&Le===Bi(Le)){if(_e[0]===0){if(Le===0&&_e.length===1)return!0;break e}if(ae=(Le+1)%pn,ae<1&&(ae+=pn),String(_e[0]).length==ae){for(ae=0;ae<_e.length;ae++)if(be=_e[ae],be<0||be>=vr||be!==Bi(be))break e;if(be!==0)return!0}}}else if(_e===null&&Le===null&&(Ce===null||Ce===1||Ce===-1))return!0;throw Error(ei+"Invalid BigNumber: "+Z)},Re.maximum=Re.max=function(){return Ke(arguments,-1)},Re.minimum=Re.min=function(){return Ke(arguments,1)},Re.random=function(){var Z=9007199254740992,ae=Math.random()*Z&2097151?function(){return Bi(Math.random()*Z)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(be){var _e,Le,Ce,Ge,Ve,Je=0,ct=[],ut=new Re(k);if(be==null?be=T:i(be,0,Xi),Ge=ho(be/pn),Qe)if(crypto.getRandomValues){for(_e=crypto.getRandomValues(new Uint32Array(Ge*=2));Je<Ge;)Ve=_e[Je]*131072+(_e[Je+1]>>>11),Ve>=9e15?(Le=crypto.getRandomValues(new Uint32Array(2)),_e[Je]=Le[0],_e[Je+1]=Le[1]):(ct.push(Ve%1e14),Je+=2);Je=Ge/2}else if(crypto.randomBytes){for(_e=crypto.randomBytes(Ge*=7);Je<Ge;)Ve=(_e[Je]&31)*281474976710656+_e[Je+1]*1099511627776+_e[Je+2]*4294967296+_e[Je+3]*16777216+(_e[Je+4]<<16)+(_e[Je+5]<<8)+_e[Je+6],Ve>=9e15?crypto.randomBytes(7).copy(_e,Je):(ct.push(Ve%1e14),Je+=7);Je=Ge/7}else throw Qe=!1,Error(ei+"crypto unavailable");if(!Qe)for(;Je<Ge;)Ve=ae(),Ve<9e15&&(ct[Je++]=Ve%1e14);for(Ge=ct[--Je],be%=pn,Ge&&be&&(Ve=Ro[pn-be],ct[Je]=Bi(Ge/Ve)*Ve);ct[Je]===0;ct.pop(),Je--);if(Je<0)ct=[Ce=0];else{for(Ce=-1;ct[0]===0;ct.splice(0,1),Ce-=pn);for(Je=1,Ve=ct[0];Ve>=10;Ve/=10,Je++);Je<pn&&(Ce-=pn-Je)}return ut.e=Ce,ut.c=ct,ut}}(),Re.sum=function(){for(var Z=1,ae=arguments,be=new Re(ae[0]);Z<ae.length;)be=be.plus(ae[Z++]);return be},h=function(){var Z="0123456789";function ae(be,_e,Le,Ce){for(var Ge,Ve=[0],Je,ct=0,ut=be.length;ct<ut;){for(Je=Ve.length;Je--;Ve[Je]*=_e);for(Ve[0]+=Ce.indexOf(be.charAt(ct++)),Ge=0;Ge<Ve.length;Ge++)Ve[Ge]>Le-1&&(Ve[Ge+1]==null&&(Ve[Ge+1]=0),Ve[Ge+1]+=Ve[Ge]/Le|0,Ve[Ge]%=Le)}return Ve.reverse()}return function(be,_e,Le,Ce,Ge){var Ve,Je,ct,ut,Mt,Kt,Qt,rn,$n=be.indexOf("."),Wn=T,Rn=N;for($n>=0&&(ut=Et,Et=0,be=be.replace(".",""),rn=new Re(_e),Kt=rn.pow(be.length-$n),Et=ut,rn.c=ae(P(lr(Kt.c),Kt.e,"0"),10,Le,Z),rn.e=rn.c.length),Qt=ae(be,_e,Le,Ge?(Ve=qt,Z):(Ve=Z,qt)),ct=ut=Qt.length;Qt[--ut]==0;Qt.pop());if(!Qt[0])return Ve.charAt(0);if($n<0?--ct:(Kt.c=Qt,Kt.e=ct,Kt.s=Ce,Kt=l(Kt,rn,Wn,Rn,Le),Qt=Kt.c,Mt=Kt.r,ct=Kt.e),Je=ct+Wn+1,$n=Qt[Je],ut=Le/2,Mt=Mt||Je<0||Qt[Je+1]!=null,Mt=Rn<4?($n!=null||Mt)&&(Rn==0||Rn==(Kt.s<0?3:2)):$n>ut||$n==ut&&(Rn==4||Mt||Rn==6&&Qt[Je-1]&1||Rn==(Kt.s<0?8:7)),Je<1||!Qt[0])be=Mt?P(Ve.charAt(1),-Wn,Ve.charAt(0)):Ve.charAt(0);else{if(Qt.length=Je,Mt)for(--Le;++Qt[--Je]>Le;)Qt[Je]=0,Je||(++ct,Qt=[1].concat(Qt));for(ut=Qt.length;!Qt[--ut];);for($n=0,be="";$n<=ut;be+=Ve.charAt(Qt[$n++]));be=P(be,ct,Ve.charAt(0))}return be}}(),l=function(){function Z(_e,Le,Ce){var Ge,Ve,Je,ct,ut=0,Mt=_e.length,Kt=Le%Ur,Qt=Le/Ur|0;for(_e=_e.slice();Mt--;)Je=_e[Mt]%Ur,ct=_e[Mt]/Ur|0,Ge=Qt*Je+ct*Kt,Ve=Kt*Je+Ge%Ur*Ur+ut,ut=(Ve/Ce|0)+(Ge/Ur|0)+Qt*ct,_e[Mt]=Ve%Ce;return ut&&(_e=[ut].concat(_e)),_e}function ae(_e,Le,Ce,Ge){var Ve,Je;if(Ce!=Ge)Je=Ce>Ge?1:-1;else for(Ve=Je=0;Ve<Ce;Ve++)if(_e[Ve]!=Le[Ve]){Je=_e[Ve]>Le[Ve]?1:-1;break}return Je}function be(_e,Le,Ce,Ge){for(var Ve=0;Ce--;)_e[Ce]-=Ve,Ve=_e[Ce]<Le[Ce]?1:0,_e[Ce]=Ve*Ge+_e[Ce]-Le[Ce];for(;!_e[0]&&_e.length>1;_e.splice(0,1));}return function(_e,Le,Ce,Ge,Ve){var Je,ct,ut,Mt,Kt,Qt,rn,$n,Wn,Rn,ti,yr,al,fo,$u,po,Fl,ss=_e.s==Le.s?1:-1,er=_e.c,bi=Le.c;if(!er||!er[0]||!bi||!bi[0])return new Re(!_e.s||!Le.s||(er?bi&&er[0]==bi[0]:!bi)?NaN:er&&er[0]==0||!bi?ss*0:ss/0);for($n=new Re(ss),Wn=$n.c=[],ct=_e.e-Le.e,ss=Ce+ct+1,Ve||(Ve=vr,ct=ar(_e.e/pn)-ar(Le.e/pn),ss=ss/pn|0),ut=0;bi[ut]==(er[ut]||0);ut++);if(bi[ut]>(er[ut]||0)&&ct--,ss<0)Wn.push(1),Mt=!0;else{for(fo=er.length,po=bi.length,ut=0,ss+=2,Kt=Bi(Ve/(bi[0]+1)),Kt>1&&(bi=Z(bi,Kt,Ve),er=Z(er,Kt,Ve),po=bi.length,fo=er.length),al=po,Rn=er.slice(0,po),ti=Rn.length;ti<po;Rn[ti++]=0);Fl=bi.slice(),Fl=[0].concat(Fl),$u=bi[0],bi[1]>=Ve/2&&$u++;do{if(Kt=0,Je=ae(bi,Rn,po,ti),Je<0){if(yr=Rn[0],po!=ti&&(yr=yr*Ve+(Rn[1]||0)),Kt=Bi(yr/$u),Kt>1)for(Kt>=Ve&&(Kt=Ve-1),Qt=Z(bi,Kt,Ve),rn=Qt.length,ti=Rn.length;ae(Qt,Rn,rn,ti)==1;)Kt--,be(Qt,po<rn?Fl:bi,rn,Ve),rn=Qt.length,Je=1;else Kt==0&&(Je=Kt=1),Qt=bi.slice(),rn=Qt.length;if(rn<ti&&(Qt=[0].concat(Qt)),be(Rn,Qt,ti,Ve),ti=Rn.length,Je==-1)for(;ae(bi,Rn,po,ti)<1;)Kt++,be(Rn,po<ti?Fl:bi,ti,Ve),ti=Rn.length}else Je===0&&(Kt++,Rn=[0]);Wn[ut++]=Kt,Rn[0]?Rn[ti++]=er[al]||0:(Rn=[er[al]],ti=1)}while((al++<fo||Rn[0]!=null)&&ss--);Mt=Rn[0]!=null,Wn[0]||Wn.splice(0,1)}if(Ve==vr){for(ut=1,ss=Wn[0];ss>=10;ss/=10,ut++);rt($n,Ce+($n.e=ut+ct*pn-1)+1,Ge,Mt)}else $n.e=ct,$n.r=+Mt;return $n}}();function ze(Z,ae,be,_e){var Le,Ce,Ge,Ve,Je;if(be==null?be=N:i(be,0,8),!Z.c)return Z.toString();if(Le=Z.c[0],Ge=Z.e,ae==null)Je=lr(Z.c),Je=_e==1||_e==2&&(Ge<=V||Ge>=re)?g(Je,Ge):P(Je,Ge,"0");else if(Z=rt(new Re(Z),ae,be),Ce=Z.e,Je=lr(Z.c),Ve=Je.length,_e==1||_e==2&&(ae<=Ce||Ce<=V)){for(;Ve<ae;Je+="0",Ve++);Je=g(Je,Ce)}else if(ae-=Ge,Je=P(Je,Ce,"0"),Ce+1>Ve){if(--ae>0)for(Je+=".";ae--;Je+="0");}else if(ae+=Ce-Ve,ae>0)for(Ce+1==Ve&&(Je+=".");ae--;Je+="0");return Z.s<0&&Le?"-"+Je:Je}function Ke(Z,ae){for(var be,_e,Le=1,Ce=new Re(Z[0]);Le<Z.length;Le++)_e=new Re(Z[Le]),(!_e.s||(be=Ss(Ce,_e))===ae||be===0&&Ce.s===ae)&&(Ce=_e);return Ce}function vt(Z,ae,be){for(var _e=1,Le=ae.length;!ae[--Le];ae.pop());for(Le=ae[0];Le>=10;Le/=10,_e++);return(be=_e+be*pn-1)>Be?Z.c=Z.e=null:be<Ie?Z.c=[Z.e=0]:(Z.e=be,Z.c=ae),Z}p=function(){var Z=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ae=/^([^.]+)\.$/,be=/^\.([^.]+)$/,_e=/^-?(Infinity|NaN)$/,Le=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Ce,Ge,Ve,Je){var ct,ut=Ve?Ge:Ge.replace(Le,"");if(_e.test(ut))Ce.s=isNaN(ut)?null:ut<0?-1:1;else{if(!Ve&&(ut=ut.replace(Z,function(Mt,Kt,Qt){return ct=(Qt=Qt.toLowerCase())=="x"?16:Qt=="b"?2:8,!Je||Je==ct?Kt:Mt}),Je&&(ct=Je,ut=ut.replace(ae,"$1").replace(be,"0.$1")),Ge!=ut))return new Re(ut,ct);if(Re.DEBUG)throw Error(ei+"Not a"+(Je?" base "+Je:"")+" number: "+Ge);Ce.s=null}Ce.c=Ce.e=null}}();function rt(Z,ae,be,_e){var Le,Ce,Ge,Ve,Je,ct,ut,Mt=Z.c,Kt=Ro;if(Mt){e:{for(Le=1,Ve=Mt[0];Ve>=10;Ve/=10,Le++);if(Ce=ae-Le,Ce<0)Ce+=pn,Ge=ae,Je=Mt[ct=0],ut=Bi(Je/Kt[Le-Ge-1]%10);else if(ct=ho((Ce+1)/pn),ct>=Mt.length)if(_e){for(;Mt.length<=ct;Mt.push(0));Je=ut=0,Le=1,Ce%=pn,Ge=Ce-pn+1}else break e;else{for(Je=Ve=Mt[ct],Le=1;Ve>=10;Ve/=10,Le++);Ce%=pn,Ge=Ce-pn+Le,ut=Ge<0?0:Bi(Je/Kt[Le-Ge-1]%10)}if(_e=_e||ae<0||Mt[ct+1]!=null||(Ge<0?Je:Je%Kt[Le-Ge-1]),_e=be<4?(ut||_e)&&(be==0||be==(Z.s<0?3:2)):ut>5||ut==5&&(be==4||_e||be==6&&(Ce>0?Ge>0?Je/Kt[Le-Ge]:0:Mt[ct-1])%10&1||be==(Z.s<0?8:7)),ae<1||!Mt[0])return Mt.length=0,_e?(ae-=Z.e+1,Mt[0]=Kt[(pn-ae%pn)%pn],Z.e=-ae||0):Mt[0]=Z.e=0,Z;if(Ce==0?(Mt.length=ct,Ve=1,ct--):(Mt.length=ct+1,Ve=Kt[pn-Ce],Mt[ct]=Ge>0?Bi(Je/Kt[Le-Ge]%Kt[Ge])*Ve:0),_e)for(;;)if(ct==0){for(Ce=1,Ge=Mt[0];Ge>=10;Ge/=10,Ce++);for(Ge=Mt[0]+=Ve,Ve=1;Ge>=10;Ge/=10,Ve++);Ce!=Ve&&(Z.e++,Mt[0]==vr&&(Mt[0]=1));break}else{if(Mt[ct]+=Ve,Mt[ct]!=vr)break;Mt[ct--]=0,Ve=1}for(Ce=Mt.length;Mt[--Ce]===0;Mt.pop());}Z.e>Be?Z.c=Z.e=null:Z.e<Ie&&(Z.c=[Z.e=0])}return Z}function pt(Z){var ae,be=Z.e;return be===null?Z.toString():(ae=lr(Z.c),ae=be<=V||be>=re?g(ae,be):P(ae,be,"0"),Z.s<0?"-"+ae:ae)}return v.absoluteValue=v.abs=function(){var Z=new Re(this);return Z.s<0&&(Z.s=1),Z},v.comparedTo=function(Z,ae){return Ss(this,new Re(Z,ae))},v.decimalPlaces=v.dp=function(Z,ae){var be,_e,Le,Ce=this;if(Z!=null)return i(Z,0,Xi),ae==null?ae=N:i(ae,0,8),rt(new Re(Ce),Z+Ce.e+1,ae);if(!(be=Ce.c))return null;if(_e=((Le=be.length-1)-ar(this.e/pn))*pn,Le=be[Le])for(;Le%10==0;Le/=10,_e--);return _e<0&&(_e=0),_e},v.dividedBy=v.div=function(Z,ae){return l(this,new Re(Z,ae),T,N)},v.dividedToIntegerBy=v.idiv=function(Z,ae){return l(this,new Re(Z,ae),0,1)},v.exponentiatedBy=v.pow=function(Z,ae){var be,_e,Le,Ce,Ge,Ve,Je,ct,ut,Mt=this;if(Z=new Re(Z),Z.c&&!Z.isInteger())throw Error(ei+"Exponent not an integer: "+pt(Z));if(ae!=null&&(ae=new Re(ae)),Ve=Z.e>14,!Mt.c||!Mt.c[0]||Mt.c[0]==1&&!Mt.e&&Mt.c.length==1||!Z.c||!Z.c[0])return ut=new Re(Math.pow(+pt(Mt),Ve?Z.s*(2-c(Z)):+pt(Z))),ae?ut.mod(ae):ut;if(Je=Z.s<0,ae){if(ae.c?!ae.c[0]:!ae.s)return new Re(NaN);_e=!Je&&Mt.isInteger()&&ae.isInteger(),_e&&(Mt=Mt.mod(ae))}else{if(Z.e>9&&(Mt.e>0||Mt.e<-1||(Mt.e==0?Mt.c[0]>1||Ve&&Mt.c[1]>=24e7:Mt.c[0]<8e13||Ve&&Mt.c[0]<=9999975e7)))return Ce=Mt.s<0&&c(Z)?-0:0,Mt.e>-1&&(Ce=1/Ce),new Re(Je?1/Ce:Ce);Et&&(Ce=ho(Et/pn+2))}for(Ve?(be=new Re(.5),Je&&(Z.s=1),ct=c(Z)):(Le=Math.abs(+pt(Z)),ct=Le%2),ut=new Re(k);;){if(ct){if(ut=ut.times(Mt),!ut.c)break;Ce?ut.c.length>Ce&&(ut.c.length=Ce):_e&&(ut=ut.mod(ae))}if(Le){if(Le=Bi(Le/2),Le===0)break;ct=Le%2}else if(Z=Z.times(be),rt(Z,Z.e+1,1),Z.e>14)ct=c(Z);else{if(Le=+pt(Z),Le===0)break;ct=Le%2}Mt=Mt.times(Mt),Ce?Mt.c&&Mt.c.length>Ce&&(Mt.c.length=Ce):_e&&(Mt=Mt.mod(ae))}return _e?ut:(Je&&(ut=k.div(ut)),ae?ut.mod(ae):Ce?rt(ut,Et,N,Ge):ut)},v.integerValue=function(Z){var ae=new Re(this);return Z==null?Z=N:i(Z,0,8),rt(ae,ae.e+1,Z)},v.isEqualTo=v.eq=function(Z,ae){return Ss(this,new Re(Z,ae))===0},v.isFinite=function(){return!!this.c},v.isGreaterThan=v.gt=function(Z,ae){return Ss(this,new Re(Z,ae))>0},v.isGreaterThanOrEqualTo=v.gte=function(Z,ae){return(ae=Ss(this,new Re(Z,ae)))===1||ae===0},v.isInteger=function(){return!!this.c&&ar(this.e/pn)>this.c.length-2},v.isLessThan=v.lt=function(Z,ae){return Ss(this,new Re(Z,ae))<0},v.isLessThanOrEqualTo=v.lte=function(Z,ae){return(ae=Ss(this,new Re(Z,ae)))===-1||ae===0},v.isNaN=function(){return!this.s},v.isNegative=function(){return this.s<0},v.isPositive=function(){return this.s>0},v.isZero=function(){return!!this.c&&this.c[0]==0},v.minus=function(Z,ae){var be,_e,Le,Ce,Ge=this,Ve=Ge.s;if(Z=new Re(Z,ae),ae=Z.s,!Ve||!ae)return new Re(NaN);if(Ve!=ae)return Z.s=-ae,Ge.plus(Z);var Je=Ge.e/pn,ct=Z.e/pn,ut=Ge.c,Mt=Z.c;if(!Je||!ct){if(!ut||!Mt)return ut?(Z.s=-ae,Z):new Re(Mt?Ge:NaN);if(!ut[0]||!Mt[0])return Mt[0]?(Z.s=-ae,Z):new Re(ut[0]?Ge:N==3?-0:0)}if(Je=ar(Je),ct=ar(ct),ut=ut.slice(),Ve=Je-ct){for((Ce=Ve<0)?(Ve=-Ve,Le=ut):(ct=Je,Le=Mt),Le.reverse(),ae=Ve;ae--;Le.push(0));Le.reverse()}else for(_e=(Ce=(Ve=ut.length)<(ae=Mt.length))?Ve:ae,Ve=ae=0;ae<_e;ae++)if(ut[ae]!=Mt[ae]){Ce=ut[ae]<Mt[ae];break}if(Ce&&(Le=ut,ut=Mt,Mt=Le,Z.s=-Z.s),ae=(_e=Mt.length)-(be=ut.length),ae>0)for(;ae--;ut[be++]=0);for(ae=vr-1;_e>Ve;){if(ut[--_e]<Mt[_e]){for(be=_e;be&&!ut[--be];ut[be]=ae);--ut[be],ut[_e]+=vr}ut[_e]-=Mt[_e]}for(;ut[0]==0;ut.splice(0,1),--ct);return ut[0]?vt(Z,ut,ct):(Z.s=N==3?-1:1,Z.c=[Z.e=0],Z)},v.modulo=v.mod=function(Z,ae){var be,_e,Le=this;return Z=new Re(Z,ae),!Le.c||!Z.s||Z.c&&!Z.c[0]?new Re(NaN):!Z.c||Le.c&&!Le.c[0]?new Re(Le):(dt==9?(_e=Z.s,Z.s=1,be=l(Le,Z,0,3),Z.s=_e,be.s*=_e):be=l(Le,Z,0,dt),Z=Le.minus(be.times(Z)),!Z.c[0]&&dt==1&&(Z.s=Le.s),Z)},v.multipliedBy=v.times=function(Z,ae){var be,_e,Le,Ce,Ge,Ve,Je,ct,ut,Mt,Kt,Qt,rn,$n,Wn,Rn=this,ti=Rn.c,yr=(Z=new Re(Z,ae)).c;if(!ti||!yr||!ti[0]||!yr[0])return!Rn.s||!Z.s||ti&&!ti[0]&&!yr||yr&&!yr[0]&&!ti?Z.c=Z.e=Z.s=null:(Z.s*=Rn.s,!ti||!yr?Z.c=Z.e=null:(Z.c=[0],Z.e=0)),Z;for(_e=ar(Rn.e/pn)+ar(Z.e/pn),Z.s*=Rn.s,Je=ti.length,Mt=yr.length,Je<Mt&&(rn=ti,ti=yr,yr=rn,Le=Je,Je=Mt,Mt=Le),Le=Je+Mt,rn=[];Le--;rn.push(0));for($n=vr,Wn=Ur,Le=Mt;--Le>=0;){for(be=0,Kt=yr[Le]%Wn,Qt=yr[Le]/Wn|0,Ge=Je,Ce=Le+Ge;Ce>Le;)ct=ti[--Ge]%Wn,ut=ti[Ge]/Wn|0,Ve=Qt*ct+ut*Kt,ct=Kt*ct+Ve%Wn*Wn+rn[Ce]+be,be=(ct/$n|0)+(Ve/Wn|0)+Qt*ut,rn[Ce--]=ct%$n;rn[Ce]=be}return be?++_e:rn.splice(0,1),vt(Z,rn,_e)},v.negated=function(){var Z=new Re(this);return Z.s=-Z.s||null,Z},v.plus=function(Z,ae){var be,_e=this,Le=_e.s;if(Z=new Re(Z,ae),ae=Z.s,!Le||!ae)return new Re(NaN);if(Le!=ae)return Z.s=-ae,_e.minus(Z);var Ce=_e.e/pn,Ge=Z.e/pn,Ve=_e.c,Je=Z.c;if(!Ce||!Ge){if(!Ve||!Je)return new Re(Le/0);if(!Ve[0]||!Je[0])return Je[0]?Z:new Re(Ve[0]?_e:Le*0)}if(Ce=ar(Ce),Ge=ar(Ge),Ve=Ve.slice(),Le=Ce-Ge){for(Le>0?(Ge=Ce,be=Je):(Le=-Le,be=Ve),be.reverse();Le--;be.push(0));be.reverse()}for(Le=Ve.length,ae=Je.length,Le-ae<0&&(be=Je,Je=Ve,Ve=be,ae=Le),Le=0;ae;)Le=(Ve[--ae]=Ve[ae]+Je[ae]+Le)/vr|0,Ve[ae]=vr===Ve[ae]?0:Ve[ae]%vr;return Le&&(Ve=[Le].concat(Ve),++Ge),vt(Z,Ve,Ge)},v.precision=v.sd=function(Z,ae){var be,_e,Le,Ce=this;if(Z!=null&&Z!==!!Z)return i(Z,1,Xi),ae==null?ae=N:i(ae,0,8),rt(new Re(Ce),Z,ae);if(!(be=Ce.c))return null;if(Le=be.length-1,_e=Le*pn+1,Le=be[Le]){for(;Le%10==0;Le/=10,_e--);for(Le=be[0];Le>=10;Le/=10,_e++);}return Z&&Ce.e+1>_e&&(_e=Ce.e+1),_e},v.shiftedBy=function(Z){return i(Z,-9007199254740991,rl),this.times("1e"+Z)},v.squareRoot=v.sqrt=function(){var Z,ae,be,_e,Le,Ce=this,Ge=Ce.c,Ve=Ce.s,Je=Ce.e,ct=T+4,ut=new Re("0.5");if(Ve!==1||!Ge||!Ge[0])return new Re(!Ve||Ve<0&&(!Ge||Ge[0])?NaN:Ge?Ce:1/0);if(Ve=Math.sqrt(+pt(Ce)),Ve==0||Ve==1/0?(ae=lr(Ge),(ae.length+Je)%2==0&&(ae+="0"),Ve=Math.sqrt(+ae),Je=ar((Je+1)/2)-(Je<0||Je%2),Ve==1/0?ae="5e"+Je:(ae=Ve.toExponential(),ae=ae.slice(0,ae.indexOf("e")+1)+Je),be=new Re(ae)):be=new Re(Ve+""),be.c[0]){for(Je=be.e,Ve=Je+ct,Ve<3&&(Ve=0);;)if(Le=be,be=ut.times(Le.plus(l(Ce,Le,ct,1))),lr(Le.c).slice(0,Ve)===(ae=lr(be.c)).slice(0,Ve))if(be.e<Je&&--Ve,ae=ae.slice(Ve-3,Ve+1),ae=="9999"||!_e&&ae=="4999"){if(!_e&&(rt(Le,Le.e+T+2,0),Le.times(Le).eq(Ce))){be=Le;break}ct+=4,Ve+=4,_e=1}else{(!+ae||!+ae.slice(1)&&ae.charAt(0)=="5")&&(rt(be,be.e+T+2,1),Z=!be.times(be).eq(Ce));break}}return rt(be,be.e+T+1,N,Z)},v.toExponential=function(Z,ae){return Z!=null&&(i(Z,0,Xi),Z++),ze(this,Z,ae,1)},v.toFixed=function(Z,ae){return Z!=null&&(i(Z,0,Xi),Z=Z+this.e+1),ze(this,Z,ae)},v.toFormat=function(Z,ae,be){var _e,Le=this;if(be==null)Z!=null&&ae&&typeof ae=="object"?(be=ae,ae=null):Z&&typeof Z=="object"?(be=Z,Z=ae=null):be=jt;else if(typeof be!="object")throw Error(ei+"Argument not an object: "+be);if(_e=Le.toFixed(Z,ae),Le.c){var Ce,Ge=_e.split("."),Ve=+be.groupSize,Je=+be.secondaryGroupSize,ct=be.groupSeparator||"",ut=Ge[0],Mt=Ge[1],Kt=Le.s<0,Qt=Kt?ut.slice(1):ut,rn=Qt.length;if(Je&&(Ce=Ve,Ve=Je,Je=Ce,rn-=Ce),Ve>0&&rn>0){for(Ce=rn%Ve||Ve,ut=Qt.substr(0,Ce);Ce<rn;Ce+=Ve)ut+=ct+Qt.substr(Ce,Ve);Je>0&&(ut+=ct+Qt.slice(Ce)),Kt&&(ut="-"+ut)}_e=Mt?ut+(be.decimalSeparator||"")+((Je=+be.fractionGroupSize)?Mt.replace(new RegExp("\\d{"+Je+"}\\B","g"),"$&"+(be.fractionGroupSeparator||"")):Mt):ut}return(be.prefix||"")+_e+(be.suffix||"")},v.toFraction=function(Z){var ae,be,_e,Le,Ce,Ge,Ve,Je,ct,ut,Mt,Kt,Qt=this,rn=Qt.c;if(Z!=null&&(Ve=new Re(Z),!Ve.isInteger()&&(Ve.c||Ve.s!==1)||Ve.lt(k)))throw Error(ei+"Argument "+(Ve.isInteger()?"out of range: ":"not an integer: ")+pt(Ve));if(!rn)return new Re(Qt);for(ae=new Re(k),ct=be=new Re(k),_e=Je=new Re(k),Kt=lr(rn),Ce=ae.e=Kt.length-Qt.e-1,ae.c[0]=Ro[(Ge=Ce%pn)<0?pn+Ge:Ge],Z=!Z||Ve.comparedTo(ae)>0?Ce>0?ae:ct:Ve,Ge=Be,Be=1/0,Ve=new Re(Kt),Je.c[0]=0;ut=l(Ve,ae,0,1),Le=be.plus(ut.times(_e)),Le.comparedTo(Z)!=1;)be=_e,_e=Le,ct=Je.plus(ut.times(Le=ct)),Je=Le,ae=Ve.minus(ut.times(Le=ae)),Ve=Le;return Le=l(Z.minus(be),_e,0,1),Je=Je.plus(Le.times(ct)),be=be.plus(Le.times(_e)),Je.s=ct.s=Qt.s,Ce=Ce*2,Mt=l(ct,_e,Ce,N).minus(Qt).abs().comparedTo(l(Je,be,Ce,N).minus(Qt).abs())<1?[ct,_e]:[Je,be],Be=Ge,Mt},v.toNumber=function(){return+pt(this)},v.toPrecision=function(Z,ae){return Z!=null&&i(Z,1,Xi),ze(this,Z,ae,2)},v.toString=function(Z){var ae,be=this,_e=be.s,Le=be.e;return Le===null?_e?(ae="Infinity",_e<0&&(ae="-"+ae)):ae="NaN":(Z==null?ae=Le<=V||Le>=re?g(lr(be.c),Le):P(lr(be.c),Le,"0"):Z===10&&mn?(be=rt(new Re(be),T+Le+1,N),ae=P(lr(be.c),be.e,"0")):(i(Z,2,qt.length,"Base"),ae=h(P(lr(be.c),Le,"0"),10,Z,_e,!0)),_e<0&&be.c[0]&&(ae="-"+ae)),ae},v.valueOf=v.toJSON=function(){return pt(this)},v._isBigNumber=!0,v[Symbol.toStringTag]="BigNumber",v[Symbol.for("nodejs.util.inspect.custom")]=v.valueOf,s!=null&&Re.set(s),Re}function ar(s){var l=s|0;return s>0||s===l?l:l-1}function lr(s){for(var l,h,p=1,v=s.length,k=s[0]+"";p<v;){for(l=s[p++]+"",h=pn-l.length;h--;l="0"+l);k+=l}for(v=k.length;k.charCodeAt(--v)===48;);return k.slice(0,v+1||1)}function Ss(s,l){var h,p,v=s.c,k=l.c,T=s.s,N=l.s,V=s.e,re=l.e;if(!T||!N)return null;if(h=v&&!v[0],p=k&&!k[0],h||p)return h?p?0:-N:T;if(T!=N)return T;if(h=T<0,p=V==re,!v||!k)return p?0:!v^h?1:-1;if(!p)return V>re^h?1:-1;for(N=(V=v.length)<(re=k.length)?V:re,T=0;T<N;T++)if(v[T]!=k[T])return v[T]>k[T]^h?1:-1;return V==re?0:V>re^h?1:-1}function i(s,l,h,p){if(s<l||s>h||s!==Bi(s))throw Error(ei+(p||"Argument")+(typeof s=="number"?s<l||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function c(s){var l=s.c.length-1;return ar(s.e/pn)==l&&s.c[l]%2!=0}function g(s,l){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(l<0?"e":"e+")+l}function P(s,l,h){var p,v;if(l<0){for(v=h+".";++l;v+=h);s=v+s}else if(p=s.length,++l>p){for(v=h,l-=p;--l;v+=h);s+=v}else l<p&&(s=s.slice(0,l)+"."+s.slice(l));return s}var R=Nl(),ue=R,Ue=class{constructor(s){zt(this,"key");zt(this,"left",null);zt(this,"right",null);this.key=s}},ft=class extends Ue{constructor(s){super(s)}},_t=class{constructor(){zt(this,"size",0);zt(this,"modificationCount",0);zt(this,"splayCount",0)}splay(s){let l=this.root;if(l==null)return this.compare(s,s),-1;let h=null,p=null,v=null,k=null,T=l,N=this.compare,V;for(;;)if(V=N(T.key,s),V>0){let re=T.left;if(re==null||(V=N(re.key,s),V>0&&(T.left=re.right,re.right=T,T=re,re=T.left,re==null)))break;h==null?p=T:h.left=T,h=T,T=re}else if(V<0){let re=T.right;if(re==null||(V=N(re.key,s),V<0&&(T.right=re.left,re.left=T,T=re,re=T.right,re==null)))break;v==null?k=T:v.right=T,v=T,T=re}else break;return v!=null&&(v.right=T.left,T.left=k),h!=null&&(h.left=T.right,T.right=p),this.root!==T&&(this.root=T,this.splayCount++),V}splayMin(s){let l=s,h=l.left;for(;h!=null;){let p=h;l.left=p.right,p.right=l,l=p,h=l.left}return l}splayMax(s){let l=s,h=l.right;for(;h!=null;){let p=h;l.right=p.left,p.left=l,l=p,h=l.right}return l}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let l=this.root,h=l,p=l.left;if(this.size--,p==null)this.root=l.right;else{let v=l.right;l=this.splayMax(p),l.right=v,this.root=l}return this.modificationCount++,h}addNewRoot(s,l){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}l<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,l)=>s<l?-1:s>l?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},Bt=class ic extends _t{constructor(h,p){super();zt(this,"root",null);zt(this,"compare");zt(this,"validKey");zt(this,$t,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=p??(v=>v!=null&&v!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let p of h)this.delete(p)}forEach(h){let p=this[Symbol.iterator](),v;for(;v=p.next(),!v.done;)h(v.value,v.value,this)}add(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ft(h),p),this}addAndReturn(h){let p=this.splay(h);return p!=0&&this.addNewRoot(new ft(h),p),this.root.key}addAll(h){for(let p of h)this.add(p)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let p=this.root.left;if(p==null)return null;let v=p.right;for(;v!=null;)p=v,v=p.right;return p.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let p=this.root.right;if(p==null)return null;let v=p.left;for(;v!=null;)p=v,v=p.left;return p.key}retainAll(h){let p=new ic(this.compare,this.validKey),v=this.modificationCount;for(let k of h){if(v!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(k)&&this.splay(k)==0&&p.add(this.root.key)}p.size!=this.size&&(this.root=p.root,this.size=p.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let p=new ic(this.compare,this.validKey);for(let v of this)h.has(v)&&p.add(v);return p}difference(h){let p=new ic(this.compare,this.validKey);for(let v of this)h.has(v)||p.add(v);return p}union(h){let p=this.clone();return p.addAll(h),p}clone(){let h=new ic(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function p(k,T){let N,V;do{if(N=k.left,V=k.right,N!=null){let re=new ft(N.key);T.left=re,p(N,re)}if(V!=null){let re=new ft(V.key);T.right=re,k=V,T=re}}while(V!=null)}let v=new ft(h.key);return p(h,v),v}toSet(){return this.clone()}entries(){return new An(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(hn=Symbol.iterator,$t=Symbol.toStringTag,hn)](){return new an(this.wrap())}},Zt=class{constructor(s){zt(this,"tree");zt(this,"path",new Array);zt(this,"modificationCount",null);zt(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],l=s.right;if(l!=null){for(;l!=null;)this.path.push(l),l=l.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},an=class extends Zt{getValue(s){return s.key}},An=class extends Zt{getValue(s){return[s.key,s.key]}},ur=s=>s,Ti=s=>{if(s){let l=new Bt(co(s)),h=new Bt(co(s)),p=(k,T)=>T.addAndReturn(k),v=k=>({x:p(k.x,l),y:p(k.y,h)});return v({x:new ue(0),y:new ue(0)}),v}return ur},_r=s=>({set:l=>{mi=_r(l)},reset:()=>_r(s),compare:co(s),snap:Ti(s),orient:Ps(s)}),mi=_r(),Es=(s,l)=>s.ll.x.isLessThanOrEqualTo(l.x)&&l.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(l.y)&&l.y.isLessThanOrEqualTo(s.ur.y),Dl=(s,l)=>{if(l.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(l.ll.x)||l.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(l.ll.y))return null;let h=s.ll.x.isLessThan(l.ll.x)?l.ll.x:s.ll.x,p=s.ur.x.isLessThan(l.ur.x)?s.ur.x:l.ur.x,v=s.ll.y.isLessThan(l.ll.y)?l.ll.y:s.ll.y,k=s.ur.y.isLessThan(l.ur.y)?s.ur.y:l.ur.y;return{ll:{x:h,y:v},ur:{x:p,y:k}}},rs=(s,l)=>s.x.times(l.y).minus(s.y.times(l.x)),qr=(s,l)=>s.x.times(l.x).plus(s.y.times(l.y)),Ar=s=>qr(s,s).sqrt(),zu=(s,l,h)=>{let p={x:l.x.minus(s.x),y:l.y.minus(s.y)},v={x:h.x.minus(s.x),y:h.y.minus(s.y)};return rs(v,p).div(Ar(v)).div(Ar(p))},Ol=(s,l,h)=>{let p={x:l.x.minus(s.x),y:l.y.minus(s.y)},v={x:h.x.minus(s.x),y:h.y.minus(s.y)};return qr(v,p).div(Ar(v)).div(Ar(p))},Yn=(s,l,h)=>l.y.isZero()?null:{x:s.x.plus(l.x.div(l.y).times(h.minus(s.y))),y:h},Qi=(s,l,h)=>l.x.isZero()?null:{x:h,y:s.y.plus(l.y.div(l.x).times(h.minus(s.x)))},Uu=(s,l,h,p)=>{if(l.x.isZero())return Qi(h,p,s.x);if(p.x.isZero())return Qi(s,l,h.x);if(l.y.isZero())return Yn(h,p,s.y);if(p.y.isZero())return Yn(s,l,h.y);let v=rs(l,p);if(v.isZero())return null;let k={x:h.x.minus(s.x),y:h.y.minus(s.y)},T=rs(k,l).div(v),N=rs(k,p).div(v),V=s.x.plus(N.times(l.x)),re=h.x.plus(T.times(p.x)),Ie=s.y.plus(N.times(l.y)),Be=h.y.plus(T.times(p.y)),Qe=V.plus(re).div(2),dt=Ie.plus(Be).div(2);return{x:Qe,y:dt}},As=class P1{constructor(l,h){zt(this,"point");zt(this,"isLeft");zt(this,"segment");zt(this,"otherSE");zt(this,"consumedBy");l.events===void 0?l.events=[this]:l.events.push(this),this.point=l,this.isLeft=h}static compare(l,h){let p=P1.comparePoints(l.point,h.point);return p!==0?p:(l.point!==h.point&&l.link(h),l.isLeft!==h.isLeft?l.isLeft?1:-1:Io.compare(l.segment,h.segment))}static comparePoints(l,h){return l.x.isLessThan(h.x)?-1:l.x.isGreaterThan(h.x)?1:l.y.isLessThan(h.y)?-1:l.y.isGreaterThan(h.y)?1:0}link(l){if(l.point===this.point)throw new Error("Tried to link already linked events");let h=l.point.events;for(let p=0,v=h.length;p<v;p++){let k=h[p];this.point.events.push(k),k.point=this.point}this.checkForConsuming()}checkForConsuming(){let l=this.point.events.length;for(let h=0;h<l;h++){let p=this.point.events[h];if(p.segment.consumedBy===void 0)for(let v=h+1;v<l;v++){let k=this.point.events[v];k.consumedBy===void 0&&p.otherSE.point.events===k.otherSE.point.events&&p.segment.consume(k.segment)}}}getAvailableLinkedEvents(){let l=[];for(let h=0,p=this.point.events.length;h<p;h++){let v=this.point.events[h];v!==this&&!v.segment.ringOut&&v.segment.isInResult()&&l.push(v)}return l}getLeftmostComparator(l){let h=new Map,p=v=>{let k=v.otherSE;h.set(v,{sine:zu(this.point,l.point,k.point),cosine:Ol(this.point,l.point,k.point)})};return(v,k)=>{h.has(v)||p(v),h.has(k)||p(k);let{sine:T,cosine:N}=h.get(v),{sine:V,cosine:re}=h.get(k);return T.isGreaterThanOrEqualTo(0)&&V.isGreaterThanOrEqualTo(0)?N.isLessThan(re)?1:N.isGreaterThan(re)?-1:0:T.isLessThan(0)&&V.isLessThan(0)?N.isLessThan(re)?-1:N.isGreaterThan(re)?1:0:V.isLessThan(T)?-1:V.isGreaterThan(T)?1:0}}},au=0,Io=class lh{constructor(l,h,p,v){zt(this,"id");zt(this,"leftSE");zt(this,"rightSE");zt(this,"rings");zt(this,"windings");zt(this,"ringOut");zt(this,"consumedBy");zt(this,"prev");zt(this,"_prevInResult");zt(this,"_beforeState");zt(this,"_afterState");zt(this,"_isInResult");this.id=++au,this.leftSE=l,l.segment=this,l.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=l,this.rings=p,this.windings=v}static compare(l,h){let p=l.leftSE.point.x,v=h.leftSE.point.x,k=l.rightSE.point.x,T=h.rightSE.point.x;if(T.isLessThan(p))return 1;if(k.isLessThan(v))return-1;let N=l.leftSE.point.y,V=h.leftSE.point.y,re=l.rightSE.point.y,Ie=h.rightSE.point.y;if(p.isLessThan(v)){if(V.isLessThan(N)&&V.isLessThan(re))return 1;if(V.isGreaterThan(N)&&V.isGreaterThan(re))return-1;let Be=l.comparePoint(h.leftSE.point);if(Be<0)return 1;if(Be>0)return-1;let Qe=h.comparePoint(l.rightSE.point);return Qe!==0?Qe:-1}if(p.isGreaterThan(v)){if(N.isLessThan(V)&&N.isLessThan(Ie))return-1;if(N.isGreaterThan(V)&&N.isGreaterThan(Ie))return 1;let Be=h.comparePoint(l.leftSE.point);if(Be!==0)return Be;let Qe=l.comparePoint(h.rightSE.point);return Qe<0?1:Qe>0?-1:1}if(N.isLessThan(V))return-1;if(N.isGreaterThan(V))return 1;if(k.isLessThan(T)){let Be=h.comparePoint(l.rightSE.point);if(Be!==0)return Be}if(k.isGreaterThan(T)){let Be=l.comparePoint(h.rightSE.point);if(Be<0)return 1;if(Be>0)return-1}if(!k.eq(T)){let Be=re.minus(N),Qe=k.minus(p),dt=Ie.minus(V),Et=T.minus(v);if(Be.isGreaterThan(Qe)&&dt.isLessThan(Et))return 1;if(Be.isLessThan(Qe)&&dt.isGreaterThan(Et))return-1}return k.isGreaterThan(T)?1:k.isLessThan(T)||re.isLessThan(Ie)?-1:re.isGreaterThan(Ie)?1:l.id<h.id?-1:l.id>h.id?1:0}static fromRing(l,h,p){let v,k,T,N=As.comparePoints(l,h);if(N<0)v=l,k=h,T=1;else if(N>0)v=h,k=l,T=-1;else throw new Error(`Tried to create degenerate segment at [${l.x}, ${l.y}]`);let V=new As(v,!0),re=new As(k,!1);return new lh(V,re,[p],[T])}replaceRightSE(l){this.rightSE=l,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let l=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:l.isLessThan(h)?l:h},ur:{x:this.rightSE.point.x,y:l.isGreaterThan(h)?l:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(l){return l.x.eq(this.leftSE.point.x)&&l.y.eq(this.leftSE.point.y)||l.x.eq(this.rightSE.point.x)&&l.y.eq(this.rightSE.point.y)}comparePoint(l){return mi.orient(this.leftSE.point,l,this.rightSE.point)}getIntersection(l){let h=this.bbox(),p=l.bbox(),v=Dl(h,p);if(v===null)return null;let k=this.leftSE.point,T=this.rightSE.point,N=l.leftSE.point,V=l.rightSE.point,re=Es(h,N)&&this.comparePoint(N)===0,Ie=Es(p,k)&&l.comparePoint(k)===0,Be=Es(h,V)&&this.comparePoint(V)===0,Qe=Es(p,T)&&l.comparePoint(T)===0;if(Ie&&re)return Qe&&!Be?T:!Qe&&Be?V:null;if(Ie)return Be&&k.x.eq(V.x)&&k.y.eq(V.y)?null:k;if(re)return Qe&&T.x.eq(N.x)&&T.y.eq(N.y)?null:N;if(Qe&&Be)return null;if(Qe)return T;if(Be)return V;let dt=Uu(k,this.vector(),N,l.vector());return dt===null||!Es(v,dt)?null:mi.snap(dt)}split(l){let h=[],p=l.events!==void 0,v=new As(l,!0),k=new As(l,!1),T=this.rightSE;this.replaceRightSE(k),h.push(k),h.push(v);let N=new lh(v,T,this.rings.slice(),this.windings.slice());return As.comparePoints(N.leftSE.point,N.rightSE.point)>0&&N.swapEvents(),As.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),p&&(v.checkForConsuming(),k.checkForConsuming()),h}swapEvents(){let l=this.rightSE;this.rightSE=this.leftSE,this.leftSE=l,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,p=this.windings.length;h<p;h++)this.windings[h]*=-1}consume(l){let h=this,p=l;for(;h.consumedBy;)h=h.consumedBy;for(;p.consumedBy;)p=p.consumedBy;let v=lh.compare(h,p);if(v!==0){if(v>0){let k=h;h=p,p=k}if(h.prev===p){let k=h;h=p,p=k}for(let k=0,T=p.rings.length;k<T;k++){let N=p.rings[k],V=p.windings[k],re=h.rings.indexOf(N);re===-1?(h.rings.push(N),h.windings.push(V)):h.windings[re]+=V}p.rings=null,p.windings=null,p.consumedBy=h,p.leftSE.consumedBy=h.leftSE,p.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let l=this.prev.consumedBy||this.prev;this._beforeState=l.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let l=this.beforeState();this._afterState={rings:l.rings.slice(0),windings:l.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,p=this._afterState.windings,v=this._afterState.multiPolys;for(let N=0,V=this.rings.length;N<V;N++){let re=this.rings[N],Ie=this.windings[N],Be=h.indexOf(re);Be===-1?(h.push(re),p.push(Ie)):p[Be]+=Ie}let k=[],T=[];for(let N=0,V=h.length;N<V;N++){if(p[N]===0)continue;let re=h[N],Ie=re.poly;if(T.indexOf(Ie)===-1)if(re.isExterior)k.push(Ie);else{T.indexOf(Ie)===-1&&T.push(Ie);let Be=k.indexOf(re.poly);Be!==-1&&k.splice(Be,1)}}for(let N=0,V=k.length;N<V;N++){let re=k[N].multiPoly;v.indexOf(re)===-1&&v.push(re)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let l=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(cu.type){case"union":{let p=l.length===0,v=h.length===0;this._isInResult=p!==v;break}case"intersection":{let p,v;l.length<h.length?(p=l.length,v=h.length):(p=h.length,v=l.length),this._isInResult=v===cu.numMultiPolys&&p<v;break}case"xor":{let p=Math.abs(l.length-h.length);this._isInResult=p%2===1;break}case"difference":{let p=v=>v.length===1&&v[0].isSubject;this._isInResult=p(l)!==p(h);break}}return this._isInResult}},sl=class{constructor(s,l,h){zt(this,"poly");zt(this,"isExterior");zt(this,"segments");zt(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=l,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let p=mi.snap({x:new ue(s[0][0]),y:new ue(s[0][1])});this.bbox={ll:{x:p.x,y:p.y},ur:{x:p.x,y:p.y}};let v=p;for(let k=1,T=s.length;k<T;k++){if(typeof s[k][0]!="number"||typeof s[k][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let N=mi.snap({x:new ue(s[k][0]),y:new ue(s[k][1])});N.x.eq(v.x)&&N.y.eq(v.y)||(this.segments.push(Io.fromRing(v,N,this)),N.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=N.x),N.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=N.y),N.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=N.x),N.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=N.y),v=N)}(!p.x.eq(v.x)||!p.y.eq(v.y))&&this.segments.push(Io.fromRing(v,p,this))}getSweepEvents(){let s=[];for(let l=0,h=this.segments.length;l<h;l++){let p=this.segments[l];s.push(p.leftSE),s.push(p.rightSE)}return s}},lu=class{constructor(s,l){zt(this,"multiPoly");zt(this,"exteriorRing");zt(this,"interiorRings");zt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new sl(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,p=s.length;h<p;h++){let v=new sl(s[h],this,!1);v.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=v.bbox.ll.x),v.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=v.bbox.ll.y),v.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=v.bbox.ur.x),v.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=v.bbox.ur.y),this.interiorRings.push(v)}this.multiPoly=l}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let l=0,h=this.interiorRings.length;l<h;l++){let p=this.interiorRings[l].getSweepEvents();for(let v=0,k=p.length;v<k;v++)s.push(p[v])}return s}},Dc=class{constructor(s,l){zt(this,"isSubject");zt(this,"polys");zt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new ue(Number.POSITIVE_INFINITY),y:new ue(Number.POSITIVE_INFINITY)},ur:{x:new ue(Number.NEGATIVE_INFINITY),y:new ue(Number.NEGATIVE_INFINITY)}};for(let h=0,p=s.length;h<p;h++){let v=new lu(s[h],this);v.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=v.bbox.ll.x),v.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=v.bbox.ll.y),v.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=v.bbox.ur.x),v.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=v.bbox.ur.y),this.polys.push(v)}this.isSubject=l}getSweepEvents(){let s=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getSweepEvents();for(let v=0,k=p.length;v<k;v++)s.push(p[v])}return s}},uu=class gd{constructor(l){zt(this,"events");zt(this,"poly");zt(this,"_isExteriorRing");zt(this,"_enclosingRing");this.events=l;for(let h=0,p=l.length;h<p;h++)l[h].segment.ringOut=this;this.poly=null}static factory(l){let h=[];for(let p=0,v=l.length;p<v;p++){let k=l[p];if(!k.isInResult()||k.ringOut)continue;let T=null,N=k.leftSE,V=k.rightSE,re=[N],Ie=N.point,Be=[];for(;T=N,N=V,re.push(N),N.point!==Ie;)for(;;){let Qe=N.getAvailableLinkedEvents();if(Qe.length===0){let jt=re[0].point,qt=re[re.length-1].point;throw new Error(`Unable to complete output ring starting at [${jt.x}, ${jt.y}]. Last matching segment found ends at [${qt.x}, ${qt.y}].`)}if(Qe.length===1){V=Qe[0].otherSE;break}let dt=null;for(let jt=0,qt=Be.length;jt<qt;jt++)if(Be[jt].point===N.point){dt=jt;break}if(dt!==null){let jt=Be.splice(dt)[0],qt=re.splice(jt.index);qt.unshift(qt[0].otherSE),h.push(new gd(qt.reverse()));continue}Be.push({index:re.length,point:N.point});let Et=N.getLeftmostComparator(T);V=Qe.sort(Et)[0].otherSE;break}h.push(new gd(re))}return h}getGeom(){let l=this.events[0].point,h=[l];for(let re=1,Ie=this.events.length-1;re<Ie;re++){let Be=this.events[re].point,Qe=this.events[re+1].point;mi.orient(Be,l,Qe)!==0&&(h.push(Be),l=Be)}if(h.length===1)return null;let p=h[0],v=h[1];mi.orient(p,l,v)===0&&h.shift(),h.push(h[0]);let k=this.isExteriorRing()?1:-1,T=this.isExteriorRing()?0:h.length-1,N=this.isExteriorRing()?h.length:-1,V=[];for(let re=T;re!=N;re+=k)V.push([h[re].x.toNumber(),h[re].y.toNumber()]);return V}isExteriorRing(){if(this._isExteriorRing===void 0){let l=this.enclosingRing();this._isExteriorRing=l?!l.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var v,k;let l=this.events[0];for(let T=1,N=this.events.length;T<N;T++){let V=this.events[T];As.compare(l,V)>0&&(l=V)}let h=l.segment.prevInResult(),p=h?h.prevInResult():null;for(;;){if(!h)return null;if(!p)return h.ringOut;if(p.ringOut!==h.ringOut)return((v=p.ringOut)==null?void 0:v.enclosingRing())!==h.ringOut?h.ringOut:(k=h.ringOut)==null?void 0:k.enclosingRing();h=p.prevInResult(),p=h?h.prevInResult():null}}},Rl=class{constructor(s){zt(this,"exteriorRing");zt(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let l=[s];for(let h=0,p=this.interiorRings.length;h<p;h++){let v=this.interiorRings[h].getGeom();v!==null&&l.push(v)}return l}},Il=class{constructor(s){zt(this,"rings");zt(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let l=0,h=this.polys.length;l<h;l++){let p=this.polys[l].getGeom();p!==null&&s.push(p)}return s}_composePolys(s){var h;let l=[];for(let p=0,v=s.length;p<v;p++){let k=s[p];if(!k.poly)if(k.isExteriorRing())l.push(new Rl(k));else{let T=k.enclosingRing();T!=null&&T.poly||l.push(new Rl(T)),(h=T==null?void 0:T.poly)==null||h.addInterior(k)}}return l}},qu=class{constructor(s,l=Io.compare){zt(this,"queue");zt(this,"tree");zt(this,"segments");this.queue=s,this.tree=new Bt(l),this.segments=[]}process(s){let l=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(l),h;s.isLeft&&this.tree.add(l);let p=l,v=l;do p=this.tree.lastBefore(p);while(p!=null&&p.consumedBy!=null);do v=this.tree.firstAfter(v);while(v!=null&&v.consumedBy!=null);if(s.isLeft){let k=null;if(p){let N=p.getIntersection(l);if(N!==null&&(l.isAnEndpoint(N)||(k=N),!p.isAnEndpoint(N))){let V=this._splitSafely(p,N);for(let re=0,Ie=V.length;re<Ie;re++)h.push(V[re])}}let T=null;if(v){let N=v.getIntersection(l);if(N!==null&&(l.isAnEndpoint(N)||(T=N),!v.isAnEndpoint(N))){let V=this._splitSafely(v,N);for(let re=0,Ie=V.length;re<Ie;re++)h.push(V[re])}}if(k!==null||T!==null){let N=null;k===null?N=T:T===null?N=k:N=As.comparePoints(k,T)<=0?k:T,this.queue.delete(l.rightSE),h.push(l.rightSE);let V=l.split(N);for(let re=0,Ie=V.length;re<Ie;re++)h.push(V[re])}h.length>0?(this.tree.delete(l),h.push(s)):(this.segments.push(l),l.prev=p)}else{if(p&&v){let k=p.getIntersection(v);if(k!==null){if(!p.isAnEndpoint(k)){let T=this._splitSafely(p,k);for(let N=0,V=T.length;N<V;N++)h.push(T[N])}if(!v.isAnEndpoint(k)){let T=this._splitSafely(v,k);for(let N=0,V=T.length;N<V;N++)h.push(T[N])}}}this.tree.delete(l)}return h}_splitSafely(s,l){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let p=s.split(l);return p.push(h),s.consumedBy===void 0&&this.tree.add(s),p}},sf=class{constructor(){zt(this,"type");zt(this,"numMultiPolys")}run(s,l,h){ol.type=s;let p=[new Dc(l,!0)];for(let V=0,re=h.length;V<re;V++)p.push(new Dc(h[V],!1));if(ol.numMultiPolys=p.length,ol.type==="difference"){let V=p[0],re=1;for(;re<p.length;)Dl(p[re].bbox,V.bbox)!==null?re++:p.splice(re,1)}if(ol.type==="intersection")for(let V=0,re=p.length;V<re;V++){let Ie=p[V];for(let Be=V+1,Qe=p.length;Be<Qe;Be++)if(Dl(Ie.bbox,p[Be].bbox)===null)return[]}let v=new Bt(As.compare);for(let V=0,re=p.length;V<re;V++){let Ie=p[V].getSweepEvents();for(let Be=0,Qe=Ie.length;Be<Qe;Be++)v.add(Ie[Be])}let k=new qu(v),T=null;for(v.size!=0&&(T=v.first(),v.delete(T));T;){let V=k.process(T);for(let re=0,Ie=V.length;re<Ie;re++){let Be=V[re];Be.consumedBy===void 0&&v.add(Be)}v.size!=0?(T=v.first(),v.delete(T)):T=null}mi.reset();let N=uu.factory(k.segments);return new Il(N).getGeom()}},ol=new sf,cu=ol,of=(s,...l)=>cu.run("intersection",s,l),af=(s,...l)=>cu.run("difference",s,l);mi.set;function hu(s){let l={type:"Feature"};return l.geometry=s,l}function fu(s){return s.type==="Feature"?s.geometry:s}function Oc(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function Rc(s){return hu({type:"LineString",coordinates:s})}function du(s){return hu({type:"MultiLineString",coordinates:s})}function Ic(s){return hu({type:"Polygon",coordinates:s})}function Fc(s){return hu({type:"MultiPolygon",coordinates:s})}function jc(s,l){let h=fu(s),p=fu(l),v=of(h.coordinates,p.coordinates);return v.length===0?null:v.length===1?Ic(v[0]):Fc(v)}function d(s,l){let h=fu(s),p=fu(l),v=af(h.coordinates,p.coordinates);return v.length===0?null:v.length===1?Ic(v[0]):Fc(v)}function y(s){return Array.isArray(s)?1+y(s[0]):-1}function S(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let l=Oc(s),h=y(l),p=[];return h>1?l.forEach(v=>{p.push(Rc(v))}):p.push(s),p}function O(s){let l=[];return s.eachLayer(h=>{l.push(Oc(h.toGeoJSON(15)))}),du(l)}_i.Cut=_i.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let l=L.polygon(s,this.options.pathOptions);l._latlngInfos=this._layer._latlngInfo,this.cut(l),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:p,originalLayer:v})=>{this._fireCut(v,p,v),this._fireCut(this._map,p,v),v.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let l=this._map._layers,h=s._latlngInfos||[];Object.keys(l).map(p=>l[p]).filter(p=>p.pm).filter(p=>!p._pmTempLayer).filter(p=>!L.PM.optIn&&!p.options.pmIgnore||L.PM.optIn&&p.options.pmIgnore===!1).filter(p=>p instanceof L.Polyline).filter(p=>p!==s).filter(p=>p.pm.options.allowCutting).filter(p=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(p)>-1:!0).filter(p=>!this._layerGroup.hasLayer(p)).filter(p=>{try{let v=!!sr(s.toGeoJSON(15),p.toGeoJSON(15)).features.length>0;return v||p instanceof L.Polyline&&!(p instanceof L.Polygon)?v:!!jc(s.toGeoJSON(15),p.toGeoJSON(15))}catch{return p instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(p=>{let v;if(p instanceof L.Polygon){v=L.polygon(p.getLatLngs());let V=v.getLatLngs();h.forEach(re=>{if(re&&re.snapInfo){let{latlng:Ie}=re,Be=this._calcClosestLayer(Ie,[v]);if(Be&&Be.segment&&Be.distance<this.options.snapDistance){let{segment:Qe}=Be;if(Qe&&Qe.length===2){let{indexPath:dt,parentPath:Et,newIndex:jt}=L.PM.Utils._getIndexFromSegment(V,Qe);(dt.length>1?(0,Qn.default)(V,Et):V).splice(jt,0,Ie)}}}})}else v=p;let k=this._cutLayer(s,v),T=L.geoJSON(k,p.options);T.getLayers().length===1&&([T]=T.getLayers()),this._setPane(T,"layerPane");let N=T.addTo(this._map.pm._getContainingLayer());if(N.pm.enable(p.pm.options),N.pm.disable(),p._pmTempLayer=!0,s._pmTempLayer=!0,p.remove(),p.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),N.getLayers&&N.getLayers().length===0&&this._map.pm.removeLayer({target:N}),N instanceof L.LayerGroup?(N.eachLayer(V=>{this._addDrawnLayerProp(V)}),this._addDrawnLayerProp(N)):this._addDrawnLayerProp(N),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let V=this.options.layersToCut.indexOf(p);V>-1&&this.options.layersToCut.splice(V,1)}this._editedLayers.push({layer:N,originalLayer:p})})},_cutLayer(s,l){let h=L.geoJSON(),p;if(l instanceof L.Polygon)p=d(l.toGeoJSON(15),s.toGeoJSON(15));else{let v=S(l);v.forEach(k=>{let T=or(k,s.toGeoJSON(15)),N;T&&T.features.length>0?N=L.geoJSON(T):N=L.geoJSON(k),N.getLayers().forEach(V=>{ao(s.toGeoJSON(15),V.toGeoJSON(15))||V.addTo(h)})}),v.length>1?p=O(h):p=h.toGeoJSON(15)}return p},_change:L.Util.falseFn}),_i.Text=_i.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(un("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let l=s;l.target=this._hintMarker,this._handleSnapping(l)}},_createMarker(s){var v,k,T,N;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let l=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(v=this.options.textOptions)==null?void 0:v.className){let V=this.options.textOptions.className.split(" ");this.textArea.classList.add(...V)}let h=this._createTextIcon(this.textArea),p=new L.Marker(l,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(p,"markerPane"),this._finishLayer(p),p.pm||(p.options.draggable=!1),p.addTo(this._map.pm._getContainingLayer()),p.pm){p.pm.textArea=this.textArea,L.setOptions(p.pm,{removeIfEmpty:((k=this.options.textOptions)==null?void 0:k.removeIfEmpty)??!0});let V=((T=this.options.textOptions)==null?void 0:T.focusAfterDraw)??!0;p.pm._createTextMarker(V),(N=this.options.textOptions)!=null&&N.text&&p.pm.setText(this.options.textOptions.text)}this._fireCreate(p),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var X={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ei(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(Ei(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Ei(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(Ei(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let l=s.touches?s.touches[0]:s,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let l=s.touches?s.touches[0]:s,h={originalEvent:l,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let l={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(l.containerPoint=this._map.mouseEventToContainerPoint(s),l.latlng=this._map.containerPointToLatLng(l.containerPoint)),this._dragMixinOnMouseUp(l),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let l=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!l&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let p="resizeableCircleMarker";this._layer instanceof L.Circle&&(p="resizeableCircle"),this.options.snappable&&!l&&!h?this._layer.pm.options[p]||this._initSnappableMarkersDrag():this._layer.pm.options[p]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let l=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(l,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let l=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,l&&L.DomUtil.removeClass(l,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:l}=s,h={lat:l.lat-this._tempDragCoord.lat,lng:l.lng-this._tempDragCoord.lng},p=v=>v.map(k=>{if(Array.isArray(k))return p(k);let T={lat:k.lat+h.lat,lng:k.lng+h.lng};return(k.alt||k.alt===0)&&(T.alt=k.alt),T});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let v=p([this._layer.getLatLng()]);this._layer.setLatLng(v[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let v=this._layer.getLatLng();this._layer._snapped&&(v=this._layer._orgLatLng);let k=p([v]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let v=p([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(v),this._fireChange(this._layer.getBounds(),"Edit")}else{let v=p(this._layer.getLatLngs());this._layer.setLatLngs(v),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=l,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,l){if(this.enabled())return!1;if(!l._fromLayerSync&&this._layer===l.target&&this.options.syncLayersOnDrag){l._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(p=>{p instanceof L.LayerGroup&&(h=h.concat(p.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let p in this._parentLayerGroup){let v=this._parentLayerGroup[p];v.pm&&(h=v.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(p=>!!p.pm).filter(p=>!!p.pm.options.draggable),h.forEach(p=>{p!==this._layer&&p.pm[s]&&(p._snapped=!1,p.pm[s](l))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},le=X,he=m(kr());function de(s,l,h,p){return h.unproject(l.transform(h.project(s,p)),p)}function ve(s,l,h){let p=h.getMaxZoom();if(p===1/0&&(p=h.getZoom()),L.Util.isArray(s)){let v=[];return s.forEach(k=>{v.push(ve(k,l,h))}),v}return s instanceof L.LatLng?de(s,l,h,p):null}function Me(s,l){l instanceof L.Layer&&(l=l.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(l,h)}function Ze(s,l){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(l,h)}var mt={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Me(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Me(this._map,s.target.getLatLng()),this._initialRotateLatLng=Or(this._layer),this._startAngle=this.getAngle();let l=Or(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,l),this._fireRotationStart(this._map,l)},_onRotate(s){let l=Me(this._map,s.target.getLatLng()),h=this._rotationStartPoint,p=this._rotationOriginPoint,v=Math.atan2(l.y-p.y,l.x-p.x)-Math.atan2(h.y-p.y,h.x-p.x);this._layer.setLatLngs(this._rotateLayer(v,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=this;function T(Ie,Be=[],Qe=-1){if(Qe>-1&&Be.push(Qe),L.Util.isArray(Ie[0]))Ie.forEach((dt,Et)=>T(dt,Be.slice(),Et));else{let dt=Be.length>0?(0,he.default)(k._markers,Be):k._markers[0];Ie.forEach((Et,jt)=>{dt[jt].setLatLng(Et)})}}T(this._layer.getLatLngs());let N=Or(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(v,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let V=v*180/Math.PI;V=V<0?V+360:V;let re=V+this._startAngle;this._setAngle(re),this._rotationLayer.pm._setAngle(re),this._fireRotation(this._rotationLayer,V,N),this._fireRotation(this._map,V,N),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let l=Or(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Or(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,l),this._fireRotationEnd(this._map,s,l),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,l,h,p,v){let k=Me(v,h);return this._matrix=p.clone().rotate(s,k).flip(),ve(l,this._matrix,v)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),l=s.getCenter();return s.removeFrom(this._layer._map),l},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(ws(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Or(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let l=this.getAngle(),h=this._layer.getLatLngs(),p=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(p,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(p,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let v=this.getAngle()-l;v=v<0?v+360:v,this._startAngle=l,this._fireRotation(this._layer,v,h,this._layer),this._fireRotation(this._map||this._layer._map,v,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let l=s-this.getAngle();this.rotateLayer(l)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},gt=mt,st=L.Class.extend({includes:[le,No,gt,Mo],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,l){l==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":l==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":l==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,l){let h=l.target,p={layer:this._layer,marker:h,event:l},v="";return s==="move"?v="moveVertexValidation":s==="add"?v="addVertexValidation":s==="remove"&&(v="removeVertexValidation"),this.options[v]&&typeof this.options[v]=="function"&&!this.options[v](p)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),Lt=st;Lt.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(p=>this._initLayer(p));let l=p=>{if(p.layer._pmTempLayer)return;this._layers=this.getLayers();let v=this._layers.filter(k=>!k.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in k.pm._parentLayerGroup));v.forEach(k=>{this._initLayer(k)}),v.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(l,100,this),this),this._layerGroup.on("layerremove",p=>{this._removeLayerFromGroup(p.target)},this);let h=p=>{p.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.enable(s,l)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(l=>{l instanceof L.LayerGroup?s.indexOf(l._leaflet_id)===-1&&(s.push(l._leaflet_id),l.pm.disable(s)):l.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(l=>l instanceof L.LayerGroup?s.indexOf(l._leaflet_id)===-1?(s.push(l._leaflet_id),l.pm.enabled(s)):!1:l.pm.enabled())},toggleEdit(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.toggleEdit(s,l)):h.pm.toggleEdit(s)})},_initLayer(s){let l=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[l]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let l=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[l]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(l=>!!l._map))==null?void 0:s._map)||null},getLayers(s=!1,l=!0,h=!0,p=[]){let v=[];return s?this._layerGroup.getLayers().forEach(k=>{v.push(k),k instanceof L.LayerGroup&&p.indexOf(k._leaflet_id)===-1&&(p.push(k._leaflet_id),v=v.concat(k.pm.getLayers(!0,!0,!0,p)))}):v=this._layerGroup.getLayers(),h&&(v=v.filter(k=>!(k instanceof L.LayerGroup))),l&&(v=v.filter(k=>!!k.pm),v=v.filter(k=>!k._pmTempLayer),v=v.filter(k=>!L.PM.optIn&&!k.options.pmIgnore||L.PM.optIn&&k.options.pmIgnore===!1)),v},setOptions(s,l=[]){l.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.setOptions(s,l)):h.pm.setOptions(s))})}}),Lt.Marker=Lt.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let l=s.target;l.remove(),this._fireRemove(l),this._fireRemove(this._map,l)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var bt=m(kr()),Ye={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((l,h,p)=>p.indexOf(l)===h)},_removeFromCache(s){let l=this.markerCache.indexOf(s);l>-1&&this.markerCache.splice(l,1)},renderLimits(s){this.markerCache.forEach(l=>{s.includes(l)?this._markerGroup.addLayer(l):this._markerGroup.removeLayer(l)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let l=[...this._filterClosestMarkers(s)];this.renderLimits(l)},_filterClosestMarkers(s){let l=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?l:(l.sort((p,v)=>{let k=p._latlng.distanceTo(s),T=v._latlng.distanceTo(s);return k-T}),l.filter((p,v)=>h>-1?v<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},tt=Ye;Lt.Line=Lt.extend({includes:[tt],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,l=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=p=>{if(Array.isArray(p[0]))return p.map(h,this);let v=p.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&p.map((k,T)=>{let N=this.isPolygon()?(T+1)%p.length:T+1;return this._createMiddleMarker(v[T],v[N])}),v};this._markers=h(l),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let l=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._pmTempLayer=!0,this.options.rotate?(l.on("dragstart",this._onRotateStart,this),l.on("drag",this._onRotate,this),l.on("dragend",this._onRotateEnd,this)):(l.on("click",this._onVertexClick,this),l.on("dragstart",this._onMarkerDragStart,this),l.on("move",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(l),l},_createMiddleMarker(s,l){if(!s||!l)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),l.getLatLng()),p=this._createMarker(h),v=L.divIcon({className:"marker-icon marker-icon-middle"});return p.setIcon(v),p.leftM=s,p.rightM=l,s._middleMarkerNext=p,l._middleMarkerPrev=p,p.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),p.on("movestart",this._onMiddleMarkerMoveStart,this),p},_onMiddleMarkerClick(s){let l=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMoveStart(s){let l=s.target;if(l.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){l.on("move",this._onMiddleMarkerMovePrevent,this);return}l._dragging=!0,this._addMarker(l,l.leftM,l.rightM)},_onMiddleMarkerMovePrevent(s){let l=s.target;this._vertexValidationDrag(l)},_onMiddleMarkerMoveEnd(s){let l=s.target;if(l.off("move",this._onMiddleMarkerMovePrevent,this),l.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(l))return;let h=L.divIcon({className:"marker-icon"});l.setIcon(h),setTimeout(()=>{delete l._dragging},100)},_addMarker(s,l,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let p=s.getLatLng(),v=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:k,index:T,parentPath:N}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),V=k.length>1?(0,bt.default)(v,N):v,re=k.length>1?(0,bt.default)(this._markers,N):this._markers;V.splice(T+1,0,p),re.splice(T+1,0,s),this._layer.setLatLngs(v),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(l,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,p),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Tn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let l=this._layer,h,p;if(this.options.allowSelfIntersection?h=!1:(p=Tn(this._layer.toGeoJSON(15)),h=p.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(l.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(p)}else l.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,l){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,l):h._icon&&(l&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let l=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Or(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:p,index:v,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!p)return;let T=p.length>1?(0,bt.default)(h,k):h,N=p.length>1?(0,bt.default)(this._markers,k):this._markers,V=k[k.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!V&&(T.length<=2||this.isPolygon()&&T.length<=3)){this._flashLayer();return}T.splice(v,1),this._layer.setLatLngs(h),this.isPolygon()&&T.length<=2&&T.splice(0,T.length);let re=!1;if(T.length<=1&&(T.splice(0,T.length),k.length>1&&p.length>1&&(h=Bo(h)),this._layer.setLatLngs(h),this._initMarkers(),re=!0),nr(h)||this._layer.remove(),h=Bo(h),this._layer.setLatLngs(h),this._markers=Bo(this._markers),!re&&(N=p.length>1?(0,bt.default)(this._markers,k):this._markers,l._middleMarkerPrev&&(this._markerGroup.removeLayer(l._middleMarkerPrev),this._removeFromCache(l._middleMarkerPrev)),l._middleMarkerNext&&(this._markerGroup.removeLayer(l._middleMarkerNext),this._removeFromCache(l._middleMarkerNext)),this._markerGroup.removeLayer(l),this._removeFromCache(l),N)){let Ie,Be;if(this.isPolygon()?(Ie=(v+1)%N.length,Be=(v+(N.length-1))%N.length):(Be=v-1<0?void 0:v-1,Ie=v+1>=N.length?void 0:v+1),Ie!==Be){let Qe=N[Be],dt=N[Ie];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Qe,dt)}N.splice(v,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(l,p),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let l=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:p,index:v,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(p.length>1?(0,bt.default)(l,k):l).splice(v,1,h),this._layer.setLatLngs(l)},_getNeighborMarkers(s){let{indexPath:l,index:h,parentPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),v=l.length>1?(0,bt.default)(this._markers,p):this._markers,k=(h+1)%v.length,T=(h+(v.length-1))%v.length,N=v[T],V=v[k];return{prevMarker:N,nextMarker:V}},_checkMarkerAllowedToDrag(s){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(s),p=L.polyline([l.getLatLng(),s.getLatLng()]),v=L.polyline([s.getLatLng(),h.getLatLng()]),k=sr(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,T=sr(this._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?T+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(k+=1),!(k<=2&&T<=2)},_onMarkerDragStart(s){let l=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Or(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(l):this._markerAllowedToDrag=null},_onMarkerDrag(s){let l=s.target;if(!this._vertexValidationDrag(l))return;let{indexPath:h,index:p,parentPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(l);let k=h.length>1?(0,bt.default)(this._markers,v):this._markers,T=(p+1)%k.length,N=(p+(k.length-1))%k.length,V=l.getLatLng(),re=k[N].getLatLng(),Ie=k[T].getLatLng();if(l._middleMarkerNext){let Be=L.PM.Utils.calcMiddleLatLng(this._map,V,Ie);l._middleMarkerNext.setLatLng(Be)}if(l._middleMarkerPrev){let Be=L.PM.Utils.calcMiddleLatLng(this._map,V,re);l._middleMarkerPrev.setLatLng(Be)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let l=s.target;if(!this._vertexValidationDragEnd(l))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),p=!this.options.allowSelfIntersection&&this.hasSelfIntersection();p&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(p=!1);let v=!this.options.allowSelfIntersection&&p;if(this._fireMarkerDragEnd(s,h,v),v){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let l=s.target;if(l._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireVertexClick(s,h)}}),Lt.Polygon=Lt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:l,nextMarker:h}=this._getNeighborMarkers(s),p=L.polyline([l.getLatLng(),s.getLatLng()]),v=L.polyline([s.getLatLng(),h.getLatLng()]),k=sr(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length,T=sr(this._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length;return!(k<=2&&T<=2)}}),Lt.Rectangle=Lt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,l=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=l.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,p)=>{let v=this._cornerMarkers.find(k=>k._index===p);v&&v.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,l){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=l,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let l=s.target,h=this._cornerMarkers;l._oppositeCornerLatLng=h.find(v=>v._index===(l._index+2)%4).getLatLng(),l._snapped=!1;let{indexPath:p}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragStart(s,p)},_onMarkerDrag(s){let l=s.target;if(!this._vertexValidationDrag(l)||l._index===void 0)return;this._adjustRectangleForMarkerMove(l);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let l=s.target;if(!this._vertexValidationDragEnd(l))return;this._cornerMarkers.forEach(p=>{delete p._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let l=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(l),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let l=this._layer.getLatLngs()[0];if(l&&l.length!==4&&l.length>0)l.forEach((h,p)=>{this._cornerMarkers[p].setLatLng(h)}),this._cornerMarkers.slice(l.length).forEach(h=>{h.setLatLng(l[0])});else if(!l||!l.length)console.error("The layer has no LatLngs");else{let h=l.findIndex(p=>s.getLatLng().equals(p));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(l[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(l[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(l[(h+3)%4])):this._cornerMarkers.forEach(p=>{p.setLatLng(l[p._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(ws(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),Lt.CircleMarker=Lt.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let l=this._layer.getLatLng(),h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._centerMarker=this._createCenterMarker(l),this._outerMarker=this._createOuterMarker(p),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,l){let h=this._map.project(s),p=L.point(h.x+l,h.y);return this._map.unproject(p)},_createHintLine(s,l){let h=s.getLatLng(),p=l.getLatLng();this._hintline=L.polyline([h,p],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let l=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(l._icon,"leaflet-pm-draggable"),l.on("move",this._moveCircle,this)):l.dragging.disable(),l},_createOuterMarker(s){let l=this._createMarker(s);return l.on("drag",this._resizeCircle,this),l},_createMarker(s){let l=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(l,"vertexPane"),l._origLatLng=s,l._pmTempLayer=!0,l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),l.on("click",this._onVertexClick,this),this._helperLayers.addLayer(l),l},_moveCircle(s){if(s.target._cancelDragEventChain)return;let l=this._centerMarker.getLatLng();this._layer.setLatLng(l);let h=this._layer._radius,p=this._getLatLngOnCircle(l,h);this._outerMarker._latlng=p,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),l=this._layer._radius,h=this._getLatLngOnCircle(s,l);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,l])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let l=s.target;l instanceof L.Marker&&!this._vertexValidationDrag(l)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let l=s.target;this._vertexValidationDragEnd(l)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let l=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(l);let p=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!p).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!p),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?l=na(this._map,s,l,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(l=na(this._map,s,l,this._getMaxDistanceInMeter(s))),l},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),l=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,l);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,l){return this._map.project(s).distanceTo(this._map.project(l))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Lt.Circle=Lt.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,l){return this._map.distance(s,l)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Lt.ImageOverlay=Lt.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),l=s.getNorthWest(),h=s.getNorthEast(),p=s.getSouthEast(),v=s.getSouthWest();return[l,h,p,v]}}),Lt.Text=Lt.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,l=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${l}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let l=this._hasFocus;this._hasFocus=s.type==="focus",!l!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let l=this.options.className.split(" ");this.textArea.classList.add(...l)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var St=function(s,l,h,p,v,k){this._matrix=[s,l,h,p,v,k]};St.init=()=>new L.PM.Matrix(1,0,0,1,0,0),St.prototype={transform(s){return this._transform(s.clone())},_transform(s){let l=this._matrix,{x:h,y:p}=s;return s.x=l[0]*h+l[1]*p+l[4],s.y=l[2]*h+l[3]*p+l[5],s},untransform(s){let l=this._matrix;return new L.Point((s.x/l[0]-l[4])/l[0],(s.y/l[2]-l[5])/l[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let l,h;return typeof s=="number"?(l=s,h=s):(l=s.x,h=s.y),this._add(1,0,0,1,l,h)},scale(s,l){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,p;return l=l||L.point(0,0),typeof s=="number"?(h=s,p=s):(h=s.x,p=s.y),this._add(h,0,0,p,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},rotate(s,l){let h=Math.cos(s),p=Math.sin(s);return l=l||new L.Point(0,0),this._add(h,p,-p,h,l.x,l.y)._add(1,0,0,1,-l.x,-l.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,l,h,p,v,k){let T=[[],[],[]],N=this._matrix,V=[[N[0],N[2],N[4]],[N[1],N[3],N[5]],[0,0,1]],re=[[s,h,v],[l,p,k],[0,0,1]],Ie;s&&s instanceof L.PM.Matrix&&(N=s._matrix,re=[[N[0],N[2],N[4]],[N[1],N[3],N[5]],[0,0,1]]);for(let Be=0;Be<3;Be+=1)for(let Qe=0;Qe<3;Qe+=1){Ie=0;for(let dt=0;dt<3;dt+=1)Ie+=V[Be][dt]*re[dt][Qe];T[Be][Qe]=Ie}return this._matrix=[T[0][0],T[1][0],T[0][1],T[1][1],T[0][2],T[1][2]],this}};var Nt=St,At={calcMiddleLatLng(s,l,h){let p=s.project(l),v=s.project(h);return s.unproject(p._add(v)._divideBy(2))},findLayers(s){let l=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&l.push(h)}),l=l.filter(h=>!!h.pm),l=l.filter(h=>!h._pmTempLayer),l=l.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),l},circleToPolygon(s,l=60,h=!0){let p=s.getLatLng(),v=s.getRadius(),k=fr(p,v,l,0,h),T=[];for(let N=0;N<k.length;N+=1){let V=[k[N].lat,k[N].lng];T.push(V)}return L.polygon(T,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,l,h,p=!1){s.fire(l,h,p);let{groups:v}=this.getAllParentGroups(s);v.forEach(k=>{k.fire(l,h,p)})},getAllParentGroups(s){let l=[],h=[],p=v=>{for(let k in v._eventParents)if(l.indexOf(k)===-1){l.push(k);let T=v._eventParents[k];h.push(T),p(T)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(p(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:l},{groupIds:l,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:fr,getTranslation:un,findDeepCoordIndex(s,l,h=!0){let p,v=T=>(N,V)=>{let re=T.concat(V);if(h){if(N.lat&&N.lat===l.lat&&N.lng===l.lng)return p=re,!0}else if(N.lat&&L.latLng(N).equals(l))return p=re,!0;return Array.isArray(N)&&N.some(v(re))};s.some(v([]));let k={};return p&&(k={indexPath:p,index:p[p.length-1],parentPath:p.slice(0,p.length-1)}),k},findDeepMarkerIndex(s,l){let h,p=k=>(T,N)=>{let V=k.concat(N);return T._leaflet_id===l._leaflet_id?(h=V,!0):Array.isArray(T)&&T.some(p(V))};s.some(p([]));let v={};return h&&(v={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),v},_getIndexFromSegment(s,l){if(l&&l.length===2){let h=this.findDeepCoordIndex(s,l[0]),p=this.findDeepCoordIndex(s,l[1]),v=Math.max(h.index,p.index);return(h.index===0||p.index===0)&&v!==1&&(v+=1),{indexA:h,indexB:p,newIndex:v,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,l,h,p){let v=Me(p,s),k=Me(p,l),T=h*Math.PI/180,N=Math.cos(T),V=Math.sin(T),re=(k.x-v.x)*N+(k.y-v.y)*V,Ie=(k.y-v.y)*N-(k.x-v.x)*V,Be=re*N+v.x,Qe=re*V+v.y,dt=-Ie*V+v.x,Et=Ie*N+v.y,jt=Ze(p,v),qt=Ze(p,{x:Be,y:Qe}),mn=Ze(p,k),Re=Ze(p,{x:dt,y:Et});return[jt,qt,mn,Re]},pxRadiusToMeterRadius(s,l,h){let p=l.project(h),v=L.point(p.x+s,p.y);return l.distance(l.unproject(v),h)}},Yt=At;L.PM=L.PM||{version:Po.version,Map:To,Toolbar:Ba,Draw:_i,Edit:Lt,Utils:Yt,Matrix:Nt,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function p(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(p);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(v);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(k);function T(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(T);function N(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(N);function V(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(V)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(l=>{this.reInitLayer(l)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let l=this._map.mouseEventToLayerPoint(s),h,p;for(let v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);p&&(L.DomEvent.fakeStop(s),this._fireEvent([p],s))}}),L.PM.initialize()})();class Vl extends wt.Polygon{constructor(n,r,o=0,a=180,u={}){super([[]],{...u,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});zt(this,"center");zt(this,"radius");zt(this,"startAngle");zt(this,"stopAngle");zt(this,"numPoints");zt(this,"properties");zt(this,"pm");zt(this,"getRadius",()=>this.radius);zt(this,"getStartAngle",()=>this.startAngle);zt(this,"getStopAngle",()=>this.stopAngle);this.center=n,this.radius=r,this.startAngle=this.normalizeAngle(o),this.stopAngle=this.normalizeAngle(a),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...u,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",()=>{var f;this.pm&&(this.pm._layers=[],this.pm._markers=[],(f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("pm:vertexadded",()=>{var f;this.pm&&((f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))}),this.updateProperties()}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],r=this.getOpeningAngle();n.push(this.center);for(let o=0;o<=this.numPoints;o++){const u=(this.startAngle+r*o/this.numPoints)*Math.PI/180,f=this.radius*Math.cos(u),_=this.radius*Math.sin(u)/111319.9,w=f/(111319.9*Math.cos(this.center.lat*Math.PI/180)),b=wt.latLng(this.center.lat+_,this.center.lng+w);n.push(b)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this.updateProperties(),this)}setAngles(n,r){const o=this.normalizeAngle(n),a=this.normalizeAngle(r),u=this.getOpeningAngle();let f=(a-o+360)%360;const m=45;return Math.abs(f-u)>m&&(f>u?f=u+m:f=u-m),f=Math.max(5,Math.min(355,f)),this.startAngle=o,this.stopAngle=(o+f)%360,this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.openingAngle=f,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<5||n>355?this:(this.stopAngle=(this.startAngle+n)%360,this.properties.openingAngle=n,this.updateGeometry(),this.updateProperties(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this.updateProperties(),this)}getCenter(){return this.center}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}calculatePointOnArc(n){const r=n*Math.PI/180;return wt.latLng(this.center.lat+this.radius/111319.9*Math.sin(r),this.center.lng+this.radius/(111319.9*Math.cos(this.center.lat*Math.PI/180))*Math.cos(r))}calculateMidpointPosition(){const n=this.getOpeningAngle(),r=(this.startAngle+n/2)%360;return this.calculatePointOnArc(r)}calculateAngleToPoint(n){return Math.atan2(n.lat-this.center.lat,n.lng-this.center.lng)*180/Math.PI}createControlPoints(n,r){const o=[],a=this.calculatePointOnArc(this.startAngle),u=this.calculatePointOnArc(this.stopAngle),f=this.calculateMidpointPosition(),m=this.createControlPoint(n,this.center,"#059669"),_=this.createControlPoint(n,a,"#DC2626"),w=this.createControlPoint(n,u,"#DC2626"),b=this.createControlPoint(n,f,"#2563EB");o.push(m,_,w,b),r(o)}createControlPoint(n,r,o){return wt.circleMarker(r,{radius:6,color:o,fillColor:o,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0}).addTo(n)}updateProperties(){const n=this.getOpeningAngle(),r=Math.PI*Math.pow(this.radius,2)*n/360,o=2*Math.PI*this.radius*n/360,a=o+2*this.radius;this.properties.area=r,this.properties.arcLength=o,this.properties.perimeter=a,this.properties.openingAngle=n,this.properties.surfaceInterieure=r,this.properties.surfaceExterieure=r,this.properties.diameter=this.radius*2,this.properties.center=this.center,this.fire("properties:updated",{shape:this,properties:this.properties})}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&(this.setLatLngs([n]),this.updateProperties())}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,openingAngle:this.getOpeningAngle()}}}}class Xu extends wt.Circle{constructor(n,r){const o=r.radius||10;super(n,o,r);zt(this,"properties");this.properties={type:"Circle",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getRadius(),r=this.getLatLng();this.properties={...this.properties,radius:n,diameter:n*2,area:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:r,surfaceInterieure:Math.PI*Math.pow(n,2),surfaceExterieure:Math.PI*Math.pow(n,2),style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setRadius(n){return super.setRadius(n),this.updateProperties(),this}setLatLng(n){return super.setLatLng(n),this.updateProperties(),this}calculatePointOnCircle(n){const r=this.getLatLng(),o=this.getRadius(),a=n*Math.PI/180;return wt.latLng(r.lat+o/111319.9*Math.sin(a),r.lng+o/(111319.9*Math.cos(r.lat*Math.PI/180))*Math.cos(a))}getCardinalPoints(){return[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n))}calculateAngleFromPoint(n){const r=this.getLatLng(),o=n.lng-r.lng,a=n.lat-r.lat;let u=Math.atan2(a,o)*180/Math.PI;return u<0&&(u+=360),u}resizeFromControlPoint(n){const o=this.getLatLng().distanceTo(n);o>0&&super.setRadius(o)}}var Ms=63710088e-1,Ix={centimeters:Ms*100,centimetres:Ms*100,degrees:Ms/111325,feet:Ms*3.28084,inches:Ms*39.37,kilometers:Ms/1e3,kilometres:Ms/1e3,meters:Ms,metres:Ms,miles:Ms/1609.344,millimeters:Ms*1e3,millimetres:Ms*1e3,nauticalmiles:Ms/1852,radians:1,yards:Ms*1.0936};function Ph(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function vu(e,t,n){n===void 0&&(n={});for(var r=0,o=e;r<o.length;r++){var a=o[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<a[a.length-1].length;u++)if(a[a.length-1][u]!==a[0][u])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:e};return Ph(f,t,n)}function Cc(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:e};return Ph(r,t,n)}function Fx(e,t){t===void 0&&(t="kilometers");var n=Ix[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Kc(e){var t=e%360;return t*Math.PI/180}function S1(e,t,n){if(e!==null)for(var r,o,a,u,f,m,_,w=0,b=0,E,x=e.type,F=x==="FeatureCollection",D=x==="Feature",U=F?e.features.length:1,j=0;j<U;j++){_=F?e.features[j].geometry:D?e.geometry:e,E=_?_.type==="GeometryCollection":!1,f=E?_.geometries.length:1;for(var Q=0;Q<f;Q++){var ie=0,ye=0;if(u=E?_.geometries[Q]:_,u!==null){m=u.coordinates;var we=u.type;switch(w=0,we){case null:break;case"Point":if(t(m,b,j,ie,ye)===!1)return!1;b++,ie++;break;case"LineString":case"MultiPoint":for(r=0;r<m.length;r++){if(t(m[r],b,j,ie,ye)===!1)return!1;b++,we==="MultiPoint"&&ie++}we==="LineString"&&ie++;break;case"Polygon":case"MultiLineString":for(r=0;r<m.length;r++){for(o=0;o<m[r].length-w;o++){if(t(m[r][o],b,j,ie,ye)===!1)return!1;b++}we==="MultiLineString"&&ie++,we==="Polygon"&&ye++}we==="Polygon"&&ie++;break;case"MultiPolygon":for(r=0;r<m.length;r++){for(ye=0,o=0;o<m[r].length;o++){for(a=0;a<m[r][o].length-w;a++){if(t(m[r][o][a],b,j,ie,ye)===!1)return!1;b++}ye++}ie++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(S1(u.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function E1(e,t){var n,r,o,a,u,f,m,_,w,b,E=0,x=e.type==="FeatureCollection",F=e.type==="Feature",D=x?e.features.length:1;for(n=0;n<D;n++){for(f=x?e.features[n].geometry:F?e.geometry:e,_=x?e.features[n].properties:F?e.properties:{},w=x?e.features[n].bbox:F?e.bbox:void 0,b=x?e.features[n].id:F?e.id:void 0,m=f?f.type==="GeometryCollection":!1,u=m?f.geometries.length:1,o=0;o<u;o++){if(a=m?f.geometries[o]:f,a===null){if(t(null,E,_,w,b)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,E,_,w,b)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<a.geometries.length;r++)if(t(a.geometries[r],E,_,w,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}E++}}function jx(e,t,n){var r=n;return E1(e,function(o,a,u,f,m){r=t(r,o,a,u,f,m)}),r}function zx(e,t){E1(e,function(n,r,o,a,u){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return t(Ph(n,o,{bbox:a,id:u}),r,0)===!1?!1:void 0}var m;switch(f){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var _=0;_<n.coordinates.length;_++){var w=n.coordinates[_],b={type:m,coordinates:w};if(t(Ph(b,o),r,_)===!1)return!1}})}function Ux(e,t){zx(e,function(n,r,o){var a=0;if(n.geometry){var u=n.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var f,m=0,_=0,w=0;if(S1(n,function(b,E,x,F,D){if(f===void 0||r>m||F>_||D>w){f=b,m=r,_=F,w=D,a=0;return}var U=Cc([f,b],n.properties);if(t(U,r,o,D,a)===!1)return!1;a++,f=b})===!1)return!1}}})}function qx(e,t,n){var r=n,o=!1;return Ux(e,function(a,u,f,m,_){o===!1&&n===void 0?r=a:r=t(r,a,u,f,m,_),o=!0}),r}function q0(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Yl(e,t,n){n===void 0&&(n={});var r=q0(e),o=q0(t),a=Kc(o[1]-r[1]),u=Kc(o[0]-r[0]),f=Kc(r[1]),m=Kc(o[1]),_=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(m);return Fx(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}var $0=6378137;function Qu(e){return jx(e,function(t,n){return t+$x(n)},0)}function $x(e){var t=0,n;switch(e.type){case"Polygon":return V0(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=V0(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function V0(e){var t=0;if(e&&e.length>0){t+=Math.abs(H0(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(H0(e[n]))}return t}function H0(e){var t,n,r,o,a,u,f,m=0,_=e.length;if(_>2){for(f=0;f<_;f++)f===_-2?(o=_-2,a=_-1,u=0):f===_-1?(o=_-1,a=0,u=1):(o=f,a=f+1,u=f+2),t=e[o],n=e[a],r=e[u],m+=(Df(r[0])-Df(t[0]))*Math.sin(Df(n[1]));m=m*$0*$0/2}return m}function Df(e){return e*Math.PI/180}function Sh(e,t){return t===void 0&&(t={}),qx(e,function(n,r){var o=r.geometry.coordinates;return n+Yl(o[0],o[1],t)},0)}class za extends wt.Rectangle{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});zt(this,"properties");this.properties={type:"Rectangle",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var f;const n=this.getBounds(),r=n.getNorthEast(),o=n.getSouthWest(),a=Yl([o.lng,o.lat],[r.lng,o.lat],{units:"meters"}),u=Yl([o.lng,o.lat],[o.lng,r.lat],{units:"meters"});this.properties={...this.properties,width:a,height:u,area:a*u,perimeter:2*(a+u),center:n.getCenter(),corners:{northEast:r,northWest:n.getNorthWest(),southEast:n.getSouthEast(),southWest:o},bounds:n,surfaceInterieure:a*u,surfaceExterieure:a*u,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((f=this.options)==null?void 0:f.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setBounds(n){return super.setBounds(n),this.updateProperties(),this}getMidPoints(){const n=this.getBounds(),r=n.getNorthWest(),o=n.getNorthEast(),a=n.getSouthEast(),u=n.getSouthWest();return[wt.latLng((r.lat+o.lat)/2,(r.lng+o.lng)/2),wt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2),wt.latLng((u.lat+a.lat)/2,(u.lng+a.lng)/2),wt.latLng((r.lat+u.lat)/2,(r.lng+u.lng)/2)]}getDimensions(){const n=this.getBounds(),r=n.getNorthEast(),o=n.getSouthWest(),a=Yl([o.lng,o.lat],[r.lng,o.lat],{units:"meters"}),u=Yl([o.lng,o.lat],[o.lng,r.lat],{units:"meters"});return{width:a,height:u}}resizeFromCorner(n,r){const o=this.getBounds(),a=[o.getNorthWest(),o.getNorthEast(),o.getSouthEast(),o.getSouthWest()],u=(n+2)%4,f=a[u],m=wt.latLngBounds(f,r);wt.Rectangle.prototype.setBounds.call(this,m)}resizeFromSide(n,r){const o=this.getBounds(),a=o.getNorthWest(),u=o.getSouthEast(),f=o.getSouthWest();let m;switch(n){case 0:m=wt.latLngBounds(wt.latLng(r.lat,a.lng),wt.latLng(f.lat,u.lng));break;case 1:m=wt.latLngBounds(wt.latLng(a.lat,a.lng),wt.latLng(u.lat,r.lng));break;case 2:m=wt.latLngBounds(wt.latLng(a.lat,a.lng),wt.latLng(r.lat,u.lng));break;case 3:m=wt.latLngBounds(wt.latLng(a.lat,r.lng),wt.latLng(u.lat,u.lng));break}m&&(wt.Rectangle.prototype.setBounds.call(this,m),this.updateProperties())}moveFromCenter(n){const r=this.getBounds(),o=r.getCenter(),a=n.lng-o.lng,u=n.lat-o.lat,f=r.getNorthWest(),m=r.getSouthEast(),_=wt.latLng(f.lat+u,f.lng+a),w=wt.latLng(m.lat+u,m.lng+a);wt.Rectangle.prototype.setBounds.call(this,wt.latLngBounds(_,w))}}class bl extends wt.Rectangle{constructor(n,r="Double-cliquez pour éditer",o={}){const a=n instanceof wt.LatLngBounds?n:wt.latLngBounds(n);if(!a.isValid()){console.warn("[TextRectangle] Initialized with invalid bounds, using default bounds");const f=wt.latLng(0,0);a.extend(wt.latLng(f.lat+.001,f.lng+.001)),a.extend(wt.latLng(f.lat-.001,f.lng-.001))}const u={...o,pmIgnore:!1,interactive:!0,fill:!0,stroke:!0,className:"leaflet-text-rectangle"};super(a,u);zt(this,"properties");zt(this,"_textNode",null);zt(this,"_map",null);zt(this,"_isEditing",!1);zt(this,"_editableDiv",null);zt(this,"_originalText","");zt(this,"_fontScale",1);zt(this,"_onAdd",()=>{this.updateProperties(),this._textRedraw()});zt(this,"_onRemove",()=>{this._cleanupEditableDiv(),this._removeTextNode()});zt(this,"_updateTextPosition",()=>{this.updateProperties(),this._textRedraw()});zt(this,"_onDoubleClick",n=>{this._isEditing||(wt.DomEvent.stopPropagation(n),this._isEditing=!0,this._originalText=this.properties.text,this._removeTextNode(),this._createEditableDiv())});zt(this,"_onKeyDown",n=>{n.key==="Enter"&&n.ctrlKey?(n.preventDefault(),this._finishEditing()):n.key==="Escape"&&(n.preventDefault(),this._cancelEditing())});zt(this,"_finishEditing",()=>{if(this._editableDiv)try{const n=this._editableDiv.innerText.trim();this.setText(n||"Double-cliquez pour éditer"),this._cleanupEditableDiv(),this._map&&!this._map.dragging.enabled()&&this._map.dragging.enable()}catch(n){console.error("[TextRectangle] Error finishing editing:",n)}});zt(this,"_cancelEditing",()=>{this.setText(this._originalText),this._cleanupEditableDiv(),this._map&&!this._map.dragging.enabled()&&this._map.dragging.enable()});this.properties={type:"TextRectangle",text:r,width:0,height:0,area:0,rotation:0,style:{color:u.color||"#3388ff",weight:u.weight||2,fillColor:u.fillColor||"#FFFFFF",fillOpacity:u.fillOpacity||.8,textColor:u.textColor||"#000000",fontSize:u.fontSize||"14px",fontFamily:u.fontFamily||"Arial, sans-serif",textAlign:u.textAlign||"center",bold:u.bold||!1,italic:u.italic||!1}},this.on("add",this._onAdd),this.on("remove",this._onRemove),this.on("dblclick",this._onDoubleClick),this.on("dragend",this._updateTextPosition),this.on("pm:edit",this._updateTextPosition),this.on("pm:dragend",this._updateTextPosition),this.on("pm:markerdragend",this._updateTextPosition),this.on("pm:vertexadded",this._updateTextPosition),this.on("pm:vertexremoved",this._updateTextPosition),this.pm&&this.pm.enableLayerDrag()}onAdd(n){return this._map=n,super.onAdd(n),this._textRedraw(),this.updateProperties(),this}onRemove(n){return this._cleanupEditableDiv(),this._removeTextNode(),this._map=null,super.onRemove(n),this}bringToFront(){return super.bringToFront(),this._textRedraw(),this}_update(){super._update(),this._textRedraw()}setText(n){n||(n="Double-cliquez pour éditer"),this.properties.text=n,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}setTextStyle(n){this.properties.style={...this.properties.style,...n};const r={};n.color&&(r.color=n.color),n.weight!==void 0&&(r.weight=n.weight),n.fillColor&&(r.fillColor=n.fillColor),n.fillOpacity!==void 0&&(r.fillOpacity=n.fillOpacity),Object.keys(r).length>0&&this.setStyle(r),this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}setRotation(n){this.properties.rotation=n,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}getTextElement(){return this._textNode}updateProperties(){try{if(!this._map)return;const n=this.getBounds(),r=n.getSouthWest(),o=wt.latLng(n.getSouth(),n.getEast()),a=n.getNorthEast(),u=this._map.distance(r,o),f=this._map.distance(r,wt.latLng(n.getNorth(),n.getWest())),m=u*f;this.properties.width=u,this.properties.height=f,this.properties.area=m,this.properties.center=n.getCenter(),this.fire("properties:updated",{shape:this,properties:this.properties})}catch(n){console.error("[TextRectangle] Error updating properties:",n)}}setBounds(n){return super.setBounds(n),this._textRedraw(),this}_textRedraw(){const n=this.properties.text;if(!(!wt.Browser.svg||!this._map||!n||this._isEditing)){this._removeTextNode();try{const r=this._map.getRenderer(this);if(!r._container)return;const o=r._container,a="textbox-"+wt.Util.stamp(this);this._path&&this._path.setAttribute("id",a);const u=wt.SVG.create("text");u.setAttribute("class","leaflet-text-rectangle-text"),u.style.fill=this.properties.style.textColor||"#000000",u.style.fontFamily=this.properties.style.fontFamily||"Arial, sans-serif",u.style.fontWeight=this.properties.style.bold?"bold":"normal",u.style.fontStyle=this.properties.style.italic?"italic":"normal";const _=this._map.getZoom()-15;this._fontScale=Math.max(.5,Math.min(2,Math.pow(1.2,_)));const w=this.getBounds(),b=w.getNorthWest(),E=w.getSouthEast(),x=this._map.latLngToLayerPoint(b),F=this._map.latLngToLayerPoint(E),D=10,U=x.x+D,j=x.y+D,Q=Math.max(10,F.x-x.x-D*2);if(u.setAttribute("x",U.toString()),u.setAttribute("y",j.toString()),u.setAttribute("text-anchor","start"),u.setAttribute("dominant-baseline","hanging"),this.properties.rotation!==0){const Pe=this._map.latLngToLayerPoint(w.getCenter());u.setAttribute("transform",`rotate(${this.properties.rotation}, ${Pe.x}, ${Pe.y})`)}const ie=parseInt(this.properties.style.fontSize||"14px")*this._fontScale,ye=ie*1.2;n.replace(/ /g," ").split(/\n|\r\n?/).forEach((Pe,Ee)=>{const fe=wt.SVG.create("tspan");fe.setAttribute("x",U.toString()),fe.setAttribute("dy",Ee===0?"0":ye+"px"),fe.style.fontSize=ie+"px";const Te=this.properties.style.textAlign||"left";Te==="center"?(fe.setAttribute("x",((x.x+F.x)/2).toString()),fe.setAttribute("text-anchor","middle")):Te==="right"&&(fe.setAttribute("x",(F.x-D).toString()),fe.setAttribute("text-anchor","end")),fe.textContent=Pe,u.appendChild(fe)}),this._textNode=u,o.appendChild(u)}catch(r){console.error("[TextRectangle] Error drawing text:",r)}}}_removeTextNode(){this._textNode&&this._textNode.parentNode&&(this._textNode.parentNode.removeChild(this._textNode),this._textNode=null)}_createEditableDiv(){if(this._map)try{const n=this.getBounds(),r=n.getNorthWest(),o=n.getSouthEast(),a=this._map.latLngToLayerPoint(r),u=this._map.latLngToLayerPoint(o),f=document.createElement("div");if(f.className="leaflet-text-rectangle-editor",f.style.position="absolute",f.style.left=a.x+"px",f.style.top=a.y+"px",f.style.width=u.x-a.x-20+"px",f.style.maxHeight=u.y-a.y-20+"px",f.style.padding="10px",f.style.backgroundColor=this.properties.style.backgroundColor||"#FFFFFF",f.style.color=this.properties.style.textColor||"#000000",f.style.fontSize=parseInt(this.properties.style.fontSize||"14px")*this._fontScale+"px",f.style.fontFamily=this.properties.style.fontFamily||"Arial, sans-serif",f.style.fontWeight=this.properties.style.bold?"bold":"normal",f.style.fontStyle=this.properties.style.italic?"italic":"normal",f.style.textAlign=this.properties.style.textAlign||"left",f.style.border="2px solid #3388ff",f.style.borderRadius="3px",f.style.boxShadow="0 0 10px rgba(0,0,0,0.2)",f.style.zIndex="1000",f.style.overflow="auto",f.style.whiteSpace="pre-wrap",f.style.wordBreak="break-word",f.contentEditable="true",this.properties.rotation!==0){const m=this._map.latLngToLayerPoint(n.getCenter()),_=(a.x+u.x)/2,w=(a.y+u.y)/2;f.style.transformOrigin=`${m.x-a.x+10}px ${m.y-a.y+10}px`,f.style.transform=`rotate(${this.properties.rotation}deg)`}f.innerText=this.properties.text,document.body.appendChild(f),this._editableDiv=f,f.focus(),f.addEventListener("keydown",this._onKeyDown),f.addEventListener("blur",this._finishEditing),this._map.dragging.enabled()&&this._map.dragging.disable()}catch(n){console.error("[TextRectangle] Error creating editable div:",n),this._isEditing=!1}}_cleanupEditableDiv(){this._editableDiv&&(this._editableDiv.removeEventListener("keydown",this._onKeyDown),this._editableDiv.removeEventListener("blur",this._finishEditing),this._editableDiv.parentNode&&this._editableDiv.parentNode.removeChild(this._editableDiv),this._editableDiv=null,this._isEditing=!1)}}var Gs=63710088e-1,A1={centimeters:Gs*100,centimetres:Gs*100,degrees:360/(2*Math.PI),feet:Gs*3.28084,inches:Gs*39.37,kilometers:Gs/1e3,kilometres:Gs/1e3,meters:Gs,metres:Gs,miles:Gs/1609.344,millimeters:Gs*1e3,millimetres:Gs*1e3,nauticalmiles:Gs/1852,radians:1,yards:Gs*1.0936};function Vx(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function vd(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!G0(e[0])||!G0(e[1]))throw new Error("coordinates must contain numbers");return Vx({type:"Point",coordinates:e},t,n)}function Hx(e,t="kilometers"){const n=A1[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Gx(e,t="kilometers"){const n=A1[t];if(!n)throw new Error(t+" units is invalid");return e/n}function _d(e){return e%(2*Math.PI)*180/Math.PI}function Uo(e){return e%360*Math.PI/180}function G0(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function kc(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Wx(e){return e.type==="Feature"?e.geometry:e}function M1(e,t,n={}){if(n.final===!0)return Zx(e,t);const r=kc(e),o=kc(t),a=Uo(r[0]),u=Uo(o[0]),f=Uo(r[1]),m=Uo(o[1]),_=Math.sin(u-a)*Math.cos(m),w=Math.cos(f)*Math.sin(m)-Math.sin(f)*Math.cos(m)*Math.cos(u-a);return _d(Math.atan2(_,w))}function Zx(e,t){let n=M1(t,e);return n=(n+180)%360,n}function Kx(e,t,n,r={}){const o=kc(e),a=Uo(o[0]),u=Uo(o[1]),f=Uo(n),m=Gx(t,r.units),_=Math.asin(Math.sin(u)*Math.cos(m)+Math.cos(u)*Math.sin(m)*Math.cos(f)),w=a+Math.atan2(Math.sin(f)*Math.sin(m)*Math.cos(u),Math.cos(m)-Math.sin(u)*Math.sin(_)),b=_d(w),E=_d(_);return vd([b,E],r.properties)}function Jx(e,t,n={}){var r=kc(e),o=kc(t),a=Uo(o[1]-r[1]),u=Uo(o[0]-r[0]),f=Uo(r[1]),m=Uo(o[1]),_=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(f)*Math.cos(m);return Hx(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)),n.units)}function Yx(e,t,n={}){const o=Wx(e).coordinates;let a=0;for(let u=0;u<o.length&&!(t>=a&&u===o.length-1);u++)if(a>=t){const f=t-a;if(f){const m=M1(o[u],o[u-1])-180;return Kx(o[u],f,m,n)}else return vd(o[u])}else a+=Jx(o[u],o[u+1],n);return vd(o[o.length-1])}var W0=Yx;class Ui extends wt.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});zt(this,"properties");zt(this,"cachedProperties",{});zt(this,"needsUpdate",!0);this.properties={type:"Line",style:r||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(a=>[a.lng,a.lat]);try{const a=Cc(r),u=Sh(a,{units:"meters"});let f;if(n.length===2)f=wt.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const _=W0(a,u/2,{units:"meters"});f=wt.latLng(_.geometry.coordinates[1],_.geometry.coordinates[0])}const m=10;this.properties={...this.properties,length:u,center:f,vertices:n.length,surfaceInfluence:u*m,dimensions:{width:m},style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.cachedProperties.length=u,this.cachedProperties.center=f,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate line properties",a)}finally{}}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.invalidateCache(),this.updateProperties(),this}getMidPoints(){if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1];if(!a||!u){console.warn("Points invalides détectés pour le segment",o);continue}r.push(wt.latLng((a.lat+u.lat)/2,(a.lng+u.lng)/2))}return this.cachedProperties.midPoints=r,r}getMidPointAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const o=r[n],a=r[n+1];return!o||!a?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):wt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2)}moveVertex(n,r,o=!1){const a=this.getLatLngs();n>=0&&n<a.length&&(a[n]=r,wt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}addVertex(n,r,o=!1){const a=this.getLatLngs();n>=0&&n<a.length-1&&(a.splice(n+1,0,r),wt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}move(n,r=!0){const a=this.getLatLngs().map(u=>wt.latLng(u.lat+n.lat,u.lng+n.lng));return wt.Polyline.prototype.setLatLngs.call(this,a),this.fire("move"),this.needsUpdate=!0,this.cachedProperties.center=void 0,r&&this.updateProperties(),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new wt.LatLng(0,0);try{const r=n.map(m=>[m.lng,m.lat]),o=Cc(r),a=Sh(o,{units:"meters"}),u=W0(o,a/2,{units:"meters"}),f=wt.latLng(u.geometry.coordinates[1],u.geometry.coordinates[0]);return this.cachedProperties.center=f,f}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const o=n.reduce((f,m)=>f+m.lat,0)/n.length,a=n.reduce((f,m)=>f+m.lng,0)/n.length,u=new wt.LatLng(o,a);return this.cachedProperties.center=u,u}}getSegmentLengths(){if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1];r.push(a.distanceTo(u))}return this.cachedProperties.segmentLengths=r,r}getSegmentLengthAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const o=r[n],a=r[n+1];return o.distanceTo(a)}getLengthToVertex(n){const r=this.getLatLngs();let o=0;if(n<=0||r.length<2)return 0;for(let a=0;a<Math.min(n,r.length-1);a++)o+=r[a].distanceTo(r[a+1]);return o}getLength(){if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let o=0;o<n.length-1;o++)r+=n[o].distanceTo(n[o+1]);return this.cachedProperties.length=r,r}}function Xx(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function Qx(e,t,n={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Z0(e[0])||!Z0(e[1]))throw new Error("coordinates must contain numbers");return Xx({type:"Point",coordinates:e},t,n)}function Z0(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function B1(e,t,n){if(e!==null)for(var r,o,a,u,f,m,_,w=0,b=0,E,x=e.type,F=x==="FeatureCollection",D=x==="Feature",U=F?e.features.length:1,j=0;j<U;j++){_=F?e.features[j].geometry:D?e.geometry:e,E=_?_.type==="GeometryCollection":!1,f=E?_.geometries.length:1;for(var Q=0;Q<f;Q++){var ie=0,ye=0;if(u=E?_.geometries[Q]:_,u!==null){m=u.coordinates;var we=u.type;switch(w=we==="Polygon"||we==="MultiPolygon"?1:0,we){case null:break;case"Point":if(t(m,b,j,ie,ye)===!1)return!1;b++,ie++;break;case"LineString":case"MultiPoint":for(r=0;r<m.length;r++){if(t(m[r],b,j,ie,ye)===!1)return!1;b++,we==="MultiPoint"&&ie++}we==="LineString"&&ie++;break;case"Polygon":case"MultiLineString":for(r=0;r<m.length;r++){for(o=0;o<m[r].length-w;o++){if(t(m[r][o],b,j,ie,ye)===!1)return!1;b++}we==="MultiLineString"&&ie++,we==="Polygon"&&ye++}we==="Polygon"&&ie++;break;case"MultiPolygon":for(r=0;r<m.length;r++){for(ye=0,o=0;o<m[r].length;o++){for(a=0;a<m[r][o].length-w;a++){if(t(m[r][o][a],b,j,ie,ye)===!1)return!1;b++}ye++}ie++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(B1(u.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function eL(e,t={}){let n=0,r=0,o=0;return B1(e,function(a){n+=a[0],r+=a[1],o++}),Qx([n/o,r/o],t.properties)}var Of=eL;const Eh=(e,t)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${t})`;const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return`rgba(${n}, ${r}, ${o}, ${t})`},K0=(e,t)=>{e.style.fontSize=t.fontSize,e.style.color=t.color,e.style.backgroundColor=Eh(t.backgroundColor,t.backgroundOpacity),t.hasBorder?e.style.border=`${t.borderWidth} solid ${Eh(t.borderColor,t.borderOpacity)}`:e.style.border="none",e.style.padding=t.padding,e.style.borderRadius=t.borderRadius},os=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=wt.DomUtil.create("div","drawing-help-message");return n.innerHTML=e,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function J0(e,t,n){const r=156543.03392*Math.cos(t*Math.PI/180)/Math.pow(2,n);return e/r}const kn=(e,t="m",n="")=>{let r,o;return t==="m²"?e>=1e4?(r=(e/1e4).toFixed(2),o="ha"):(r=e.toFixed(2),o="m²"):t==="m"?e>=1e3?(r=(e/1e3).toFixed(2),o="km"):(r=e.toFixed(2),o="m"):(r=e.toFixed(2),o=t),n?`${n}: ${r} ${o}`:`${r} ${o}`},Rf=e=>`${((e%360+360)%360).toFixed(1)}°`,tL=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),nL=(e,t)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>e.apply(this,r),t)}},If=(e,t)=>{let n=0;return function(...r){const o=Date.now();if(!(o-n<t))return n=o,e.apply(this,r)}};function iL(){const e=Ft(null),t=Ft(null),n=Ft(null),r=Ft(null),o=Ft(""),a=Ft(null),u=Ft(!1),f=(B,K="Double-cliquez pour éditer")=>{const H={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ne=(xe,me)=>{var te;const je=((te=e.value)==null?void 0:te.getZoom())||14,qe=B.lat,J=J0(me.physicalSize,qe,je);return`<div class="text-container" style="width:${J}px;height:${J}px;transform:rotate(${me.rotation}deg)">
        <div class="text-annotation" style="font-size:${J*.2}px;color:${me.color};background-color:${Eh(me.backgroundColor,me.backgroundOpacity)};border:${me.hasBorder?me.borderWidth+" solid "+Eh(me.borderColor,me.borderOpacity):"none"};padding:${me.padding};border-radius:${me.borderRadius}">${xe}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},W=()=>{if(!e.value)return;const xe=A.getIcon(),me={html:ne(A.properties.text,A.properties.style),className:xe.options.className};A.setIcon(wt.divIcon(me))},z=wt.divIcon({html:ne(K,H),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),A=wt.marker(B,{icon:z,draggable:!1,pmIgnore:!0});A.properties={type:"text",text:K,style:{...H}},e.value&&(e.value.on("zoomend",W),A.on("remove",()=>{var xe;(xe=e.value)==null||xe.off("zoomend",W)})),W();let ge=!1,I=!1,G=0,se=0;const ce=xe=>{if(!e.value)return;const me=xe.target;if(me.classList.contains("rotate")){ge=!0;const je=A.getLatLng(),qe=e.value.mouseEventToLatLng(xe);G=Math.atan2(qe.lat-je.lat,qe.lng-je.lng)*180/Math.PI,se=A.properties.style.rotation||0}else me.classList.contains("move")&&(I=!0);document.addEventListener("mousemove",pe),document.addEventListener("mouseup",oe)},pe=xe=>{if(!(!I||!e.value)){if(ge){const me=A.getLatLng(),je=e.value.mouseEventToLatLng(xe),qe=Math.atan2(je.lat-me.lat,je.lng-me.lng)*180/Math.PI,J=(se+(qe-G))%360;A.properties.style.rotation=J;const te=A.getIcon(),Ne={html:ne(A.properties.text,A.properties.style),className:te.options.className};A.setIcon(wt.divIcon(Ne))}else if(I){const me=tL(xe),je=e.value.mouseEventToLatLng(me);A.setLatLng(je)}}},oe=()=>{ge=!1,I=!1,document.removeEventListener("mousemove",pe),document.removeEventListener("mouseup",oe)};return A.on("add",()=>{const xe=A.getElement();xe&&xe.querySelectorAll(".control-button").forEach(je=>{je.addEventListener("mousedown",ce)})}),A.on("remove",()=>{const xe=A.getElement();xe&&xe.querySelectorAll(".control-button").forEach(je=>{je.removeEventListener("mousedown",ce)})}),A.on("dblclick",xe=>{var Ne;wt.DomEvent.stopPropagation(xe);const me=(Ne=A.getElement())==null?void 0:Ne.querySelector(".text-annotation");if(!me)return;me.contentEditable="true",me.focus(),me.classList.add("editing");const je=window.getSelection(),qe=document.createRange();qe.selectNodeContents(me),je==null||je.removeAllRanges(),je==null||je.addRange(qe);const J=()=>{me.contentEditable="false",me.classList.remove("editing");const Ae=me.innerText.trim();if(Ae){A.properties.text=Ae;const ee=A.getIcon(),We={html:ne(Ae,A.properties.style),className:ee.options.className};A.setIcon(wt.divIcon(We))}me.removeEventListener("blur",J),me.removeEventListener("keydown",te)},te=Ae=>{Ae.key==="Enter"&&!Ae.shiftKey&&(Ae.preventDefault(),J())};me.addEventListener("blur",J),me.addEventListener("keydown",te)}),A},m=(B,K)=>{const H=wt.DomUtil.create("div","measure-tooltip");if(H.innerHTML=K,H.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(H),e.value){const ne=e.value.latLngToContainerPoint(B);H.style.left=`${ne.x+10}px`,H.style.top=`${ne.y-25}px`}return H},_=If((B,K,H)=>{if(B&&(B.innerHTML=H,e.value)){const ne=e.value.latLngToContainerPoint(K);B.style.left=`${ne.x+10}px`,B.style.top=`${ne.y-25}px`}},100),w=(B,K,H)=>{B.on("mouseover",()=>{const ne=m(B.getLatLng(),H());B.measureDiv=ne}),B.on("mousemove",ne=>{B.measureDiv&&e.value&&_(B.measureDiv,ne.latlng,H())}),B.on("mouseout",()=>{B.measureDiv&&(B.measureDiv.remove(),B.measureDiv=void 0)})};let b=[];const E=()=>{b.forEach(B=>{B&&B.remove&&("measureDiv"in B&&B.measureDiv&&(B.measureDiv.remove(),B.measureDiv=void 0),n.value&&n.value.removeLayer(B),B.remove())}),b=[],document.querySelectorAll(".measure-tooltip").forEach(B=>{B.remove()})},x=(B,K="#2563EB")=>{const H=wt.circleMarker(B,{radius:6,color:K,fillColor:K,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(H),H},F=(B,K)=>{var ne,W,z,A,ge,I;console.log("Input layer:",{type:K,instanceof:{Circle:B instanceof wt.Circle,Rectangle:B instanceof wt.Rectangle,Polygon:B instanceof wt.Polygon,Polyline:B instanceof wt.Polyline,CircleArc:B instanceof Vl,TextRectangle:B instanceof bl},options:B.options});const H={type:K,style:B.options||{}};try{if(B instanceof bl)return B.properties;if(B instanceof wt.Circle){const G=B.getRadius(),se=B.getLatLng();H.radius=G,H.diameter=G*2,H.area=Math.PI*Math.pow(G,2),H.perimeter=2*Math.PI*G,H.center=se,H.surfaceInterieure=H.area,H.surfaceExterieure=H.area}else if(B instanceof Vl){const G=B.getRadius(),se=B.getCenter(),ce=B.getStartAngle(),pe=B.getStopAngle(),oe=B.getOpeningAngle();H.radius=G,H.diameter=G*2,H.area=Math.PI*Math.pow(G,2)*oe/360,H.arcLength=2*Math.PI*G*oe/360,H.perimeter=H.arcLength+2*G,H.center=se,H.startAngle=ce,H.stopAngle=pe,H.openingAngle=oe,H.surfaceInterieure=H.area,H.surfaceExterieure=H.area}else if(B instanceof wt.Rectangle){const G=B.getBounds(),se=G.getNorthEast(),ce=G.getSouthWest(),pe=Yl([ce.lng,ce.lat],[se.lng,ce.lat],{units:"meters"}),oe=Yl([ce.lng,ce.lat],[ce.lng,se.lat],{units:"meters"});H.width=pe,H.height=oe,H.area=pe*oe,H.perimeter=2*(pe+oe),H.surfaceInterieure=H.area,H.surfaceExterieure=H.area,H.dimensions={width:pe,height:oe}}else if(B instanceof wt.Polygon){const se=B.getLatLngs()[0].map(pe=>[pe.lng,pe.lat]);se.push(se[0]);const ce=vu([se]);H.area=Qu(ce),H.perimeter=Sh(Cc([...se]),{units:"meters"}),H.surfaceInterieure=H.area,H.surfaceExterieure=H.area}else if(B instanceof wt.Polyline&&!(B instanceof wt.Polygon))if(B instanceof Ui)B.updateProperties(),Object.assign(H,{...B.properties,type:"Line"});else{const se=B.getLatLngs().map(oe=>[oe.lng,oe.lat]),ce=Cc(se);H.length=Sh(ce,{units:"meters"});const pe=10;H.surfaceInfluence=H.length*pe,H.dimensions={width:pe}}H.style={...H.style,color:((ne=B.options)==null?void 0:ne.color)||"#3388ff",weight:((W=B.options)==null?void 0:W.weight)||3,opacity:((z=B.options)==null?void 0:z.opacity)||1,fillColor:((A=B.options)==null?void 0:A.fillColor)||"#3388ff",fillOpacity:((ge=B.options)==null?void 0:ge.fillOpacity)||.2,dashArray:((I=B.options)==null?void 0:I.dashArray)||""}}catch(G){console.error("Error calculating shape properties:",G)}return H},D=(B,K=2)=>{var A;if(!e.value){console.warn("Map is not available for text size update");return}const H=e.value.getZoom(),ne=B.getLatLng().lat,W=J0(K,ne,H),z=(A=B.getElement())==null?void 0:A.querySelector(".text-annotation");z&&(B.properties.style.fontSize=`${W}px`,B.properties.physicalWidth=K,B.properties.physicalHeight=K,K0(z,B.properties.style))},U=(B,K,H)=>{const ne=wt.map(B).setView(K,H);e.value=ne,wt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(ne);const W=new wt.FeatureGroup;return W.addTo(ne),t.value=W,n.value=wt.featureGroup().addTo(ne),r.value=wt.featureGroup().addTo(ne),ne.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:W,snapLayers:[W,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ne.on("pm:drawstart",z=>{u.value=!0,z.shape==="Circle"&&o.value==="Semicircle"&&(ne.getContainer().style.cursor="crosshair")}),ne.on("pm:drawend",()=>{u.value=!1,ne.getContainer().style.cursor="",a.value&&os("Cliquez sur la forme pour afficher les points de contrôle")}),ne.on("pm:create",async z=>{var I,G,se,ce,pe,oe,xe,me,je;const A=z.layer;(I=t.value)==null||I.addLayer(A);let ge="unknown";if(A instanceof wt.Circle?ge=o.value==="Semicircle"?"Semicircle":"Circle":A instanceof wt.Rectangle?ge="Rectangle":A instanceof wt.Polygon?ge="Polygon":A instanceof wt.Polyline&&!(A instanceof wt.Polygon)&&(ge="Line"),A.properties=F(A,ge),a.value=A,A.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:ge,isSelected:a.value===A}),(!a.value||a.value!==A)&&Se(A)}),A.on("mouseout",()=>{var qe;console.log("[mouseout] Sortie de la forme",{type:ge,isSelected:a.value===A}),(!a.value||a.value!==A)&&((qe=r.value)==null||qe.clearLayers())}),ge==="Semicircle"){const qe=A.getLatLng(),J=A.getRadius();(G=t.value)==null||G.removeLayer(A);const te=new Vl(qe,J);te.properties=F(te,"Semicircle"),(se=t.value)==null||se.addLayer(te),a.value=te,$(te)}else if(ge==="Circle"){(ce=t.value)==null||ce.removeLayer(A);const qe=new Xu(A.getLatLng(),{...A.options,radius:A.getRadius()});qe.updateProperties(),(pe=t.value)==null||pe.addLayer(qe),a.value=qe,fe(qe)}else if(ge==="Rectangle"){(oe=t.value)==null||oe.removeLayer(A);const qe=new za(A.getBounds(),{...A.options});qe.updateProperties(),(xe=t.value)==null||xe.addLayer(qe),a.value=qe,Te(qe)}else if(A instanceof wt.Polygon)q(A);else if(A instanceof Ui)$e(A);else if(A instanceof wt.Polyline&&!(A instanceof wt.Polygon)){const qe=A.getLatLngs(),J=new Ui(qe,{...A.options});J.updateProperties(),(me=t.value)==null||me.removeLayer(A),(je=t.value)==null||je.addLayer(J),a.value=J,$e(J)}os("Cliquez sur la forme pour afficher les points de contrôle")}),W.on("click",z=>{var ge,I,G,se,ce,pe,oe,xe;wt.DomEvent.stopPropagation(z);const A=z.layer;if(console.log("[featureGroup click] Sélection de forme",{type:(ge=A.properties)==null?void 0:ge.type,previouslySelected:a.value===A}),(I=r.value)==null||I.clearLayers(),E(),(G=document.querySelector(".drawing-help-message"))==null||G.remove(),a.value=A,A instanceof bl){if(console.log("[featureGroup click] TextRectangle selected",{id:A._leaflet_id,bounds:A.getBounds(),hasTextContainer:!!A.getTextElement(),properties:A.properties}),os("Double-cliquez sur le texte pour le modifier. Cliquez et glissez pour déplacer."),e.value&&e.value.pm)try{if(e.value.pm.globalEditModeEnabled()&&e.value.pm.disableGlobalEditMode(),t.value){const me=t.value.getLayers(),je=A.getBounds(),qe=me.filter(J=>{if(J===A||!(J instanceof wt.Rectangle)||J.properties&&J.properties.type==="TextRectangle")return!1;const te=J.getBounds(),Ne=Math.abs(te.getNorth()-je.getNorth())<1e-6&&Math.abs(te.getSouth()-je.getSouth())<1e-6&&Math.abs(te.getEast()-je.getEast())<1e-6&&Math.abs(te.getWest()-je.getWest())<1e-6;return console.log("[TextRectangle] Comparing with Rectangle:",{id:J._leaflet_id,bounds:te.toBBoxString(),isSameBounds:Ne}),Ne});qe.length>0&&(console.warn(`[TextRectangle] Found ${qe.length} duplicate rectangle(s) with TextRectangle, removing...`),qe.forEach(J=>{var te;(te=t.value)==null||te.removeLayer(J),e.value&&e.value.removeLayer(J)}))}}catch(me){console.error("Error disabling edit mode:",me)}return}if(A instanceof Vl||((se=A.properties)==null?void 0:se.type)==="Semicircle")$(A);else if(A instanceof Xu)fe(A);else if(A instanceof wt.Circle){const me=new Xu(A.getLatLng(),{...A.options,radius:A.getRadius()});me.updateProperties(),(ce=t.value)==null||ce.removeLayer(A),(pe=t.value)==null||pe.addLayer(me),a.value=me,fe(me)}else if(A instanceof za)Te(A);else if(A instanceof wt.Rectangle){const me=new za(A.getBounds(),{...A.options});me.updateProperties(),(oe=t.value)==null||oe.removeLayer(A),(xe=t.value)==null||xe.addLayer(me),a.value=me,Te(me)}else A instanceof wt.Polygon?q(A):(A instanceof Ui||A instanceof wt.Polyline&&!(A instanceof wt.Polygon))&&$e(A)}),ne.on("pm:edit",z=>{var ge,I,G;console.log("[pm:edit] Début",{layer:z.layer,currentProperties:z.layer.properties});const A=z.layer;if(A){const se=((ge=A.properties)==null?void 0:ge.type)||"unknown";if(Pe(A,se),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:A.properties,selectedShape:a.value}),se==="Semicircle")$(A);else if(A instanceof Xu)fe(A);else if(A instanceof za)Te(A);else if(A instanceof wt.Rectangle){const ce=new za(A.getBounds(),{...A.options});ce.updateProperties(),(I=t.value)==null||I.removeLayer(A),(G=t.value)==null||G.addLayer(ce),a.value=ce,Te(ce)}else A instanceof wt.Polygon?q(A):A instanceof Ui?(A.updateProperties(),Pe(A,"Line"),$e(A)):A instanceof wt.Polyline&&$e(A)}}),ne.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(z=>z.remove()),os("Déplacez la forme à l'endroit souhaité")}),ne.on("pm:dragend",z=>{var ge,I,G;console.log("[pm:dragend] Début",{layer:z.layer,currentProperties:z.layer.properties});const A=z.layer;if(A){const se=((ge=A.properties)==null?void 0:ge.type)||"unknown";if(A instanceof wt.Rectangle&&!(A instanceof za)){const ce=new za(A.getBounds(),{...A.options});ce.updateProperties(),(I=t.value)==null||I.removeLayer(A),(G=t.value)==null||G.addLayer(ce),a.value=ce,Te(ce)}else A instanceof Ui?(A.updateProperties(),Pe(A,"Line"),$e(A)):Pe(A,se);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:A.properties,selectedShape:a.value})}setTimeout(()=>{os("Cliquez sur la forme pour afficher les points de contrôle")},100)}),ne.on("pm:remove",()=>{var z;(z=document.querySelector(".drawing-help-message"))==null||z.remove()}),ne.on("pm:select",z=>{var ge;const A=z.layer;document.querySelectorAll(".drawing-help-message").forEach(I=>I.remove()),A instanceof Vl||((ge=A.properties)==null?void 0:ge.type)==="Semicircle"?os(`Points de contrôle : <span style="color: #059669">●</span> Ajuster le rayon, <span style="color: #2563EB">●</span> et <span style="color: #DC2626">●</span> Modifier l'ouverture du demi-cercle`):os("Utilisez les points de contrôle pour modifier la forme")}),ne.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(z=>z.remove())}),ne},j=()=>{if(!e.value||!t.value)return;const B=t.value.getBounds();B.isValid()&&e.value.fitBounds(B,{padding:[50,50],maxZoom:19})},Q=B=>{if(e.value){document.querySelectorAll(".drawing-help-message").forEach(K=>K.remove());try{const K=e.value.pm;K.globalEditModeEnabled()&&K.disableGlobalEditMode(),K.globalRemovalModeEnabled()&&K.disableGlobalRemovalMode(),K.disableDraw(),E()}catch(K){console.error("Error disabling modes:",K)}if(o.value=B,!B){E();return}setTimeout(()=>{var K,H,ne,W,z,A,ge,I;try{switch(B){case"Circle":os("Cliquez et maintenez pour dessiner un cercle, relâchez pour terminer"),(K=e.value)==null||K.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":os("Cliquez et maintenez pour dessiner un demi-cercle, relâchez pour terminer"),(H=e.value)==null||H.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":os("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(ne=e.value)==null||ne.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":os("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(W=e.value)==null||W.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":os("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(z=e.value)==null||z.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(os("Cliquez pour ajouter du texte, double-cliquez pour éditer"),e.value){const G=se=>{if(!e.value||!t.value)return;const ce=f(se.latlng);t.value.addLayer(ce),a.value=ce,e.value.off("click",G),Q("")};e.value.on("click",G)}break;case"delete":os("Cliquez sur une forme pour la supprimer"),(A=e.value)==null||A.pm.enableGlobalRemovalMode();break;case"TextRectangle":os("Cliquez et maintenez pour dessiner un rectangle avec texte, relâchez pour terminer"),(ge=e.value)==null||ge.pm.enableDraw("Rectangle",{finishOn:"mouseup",continueDrawing:!1}),(I=e.value)==null||I.on("pm:create",G=>{var se,ce;if(G.shape==="Rectangle"&&G.layer){const pe=G.layer.getBounds(),oe=new bl(pe,"Double-cliquez pour éditer");oe.properties={type:"TextRectangle",text:"Double-cliquez pour éditer",width:0,height:0,area:0,rotation:0,style:{color:"#3B82F6",weight:2,fillColor:"#F9FAFB",fillOpacity:.8,textColor:"#000000",fontSize:"14px",fontFamily:"Arial, sans-serif",textAlign:"center"}},(se=e.value)==null||se.removeLayer(G.layer),t.value&&(t.value.addLayer(oe),a.value=oe,oe.updateProperties()),(ce=e.value)==null||ce.pm.disableDraw()}});break}}catch(G){console.error("Error enabling tool:",G)}},100)}},ie=B=>{var H;if(!a.value)return;const K=a.value;if(K.properties=K.properties||{},K.properties.style=K.properties.style||{},K.properties.style={...K.properties.style,...B},K.properties.type==="text"){const ne=K.properties._textLayer,W=(H=ne==null?void 0:ne.getElement())==null?void 0:H.querySelector(".text-annotation");W&&K0(W,K.properties.style);const z={color:B.borderColor||K.properties.style.borderColor,weight:parseInt(B.borderWidth||K.properties.style.borderWidth),opacity:B.borderOpacity??K.properties.style.borderOpacity};"setStyle"in K&&K.setStyle(z)}else if(K.properties.type==="TextRectangle"){if(K instanceof bl){const ne={};B.textColor!==void 0&&(ne.textColor=B.textColor),B.fontSize!==void 0&&(ne.fontSize=B.fontSize),B.fontFamily!==void 0&&(ne.fontFamily=B.fontFamily),B.backgroundColor!==void 0&&(ne.backgroundColor=B.backgroundColor),B.backgroundOpacity!==void 0&&(ne.backgroundOpacity=B.backgroundOpacity),B.textAlign!==void 0&&(ne.textAlign=B.textAlign),B.bold!==void 0&&(ne.bold=B.bold),B.italic!==void 0&&(ne.italic=B.italic),B.fillColor&&(ne.fillColor=B.fillColor),B.fillOpacity!==void 0&&(ne.fillOpacity=B.fillOpacity),B.strokeColor&&(ne.color=B.strokeColor),B.color&&(ne.color=B.color),B.strokeOpacity!==void 0&&(ne.opacity=B.strokeOpacity),B.strokeWidth!==void 0&&(ne.weight=B.strokeWidth),B.weight!==void 0&&(ne.weight=B.weight),B.dashArray&&(ne.dashArray=B.dashArray),K.setTextStyle(ne)}}else{const ne={};B.fillColor&&(ne.fillColor=B.fillColor),B.fillOpacity!==void 0&&(ne.fillOpacity=B.fillOpacity),B.strokeColor&&(ne.color=B.strokeColor),B.strokeOpacity!==void 0&&(ne.opacity=B.strokeOpacity),B.strokeWidth!==void 0&&(ne.weight=B.strokeWidth),B.dashArray&&(ne.dashArray=B.dashArray),"setStyle"in K&&K.setStyle(ne)}},ye=B=>{if(!a.value)return;const K=a.value;K.properties={...K.properties,...B},B.radius&&K instanceof wt.Circle&&K.setRadius(B.radius)},we=B=>{console.log("[forceShapeUpdate] Début",{currentProperties:B.properties,selectedShapeRef:a.value}),a.value=null,ls(()=>{a.value=B,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:a.value,properties:a.value.properties})})},Pe=(B,K)=>{console.log("[updateLayerProperties] Début",{layer:B,shapeType:K,currentProperties:B.properties}),nL((ne,W)=>{const z=F(ne,W);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:z}),ne.properties={...z},we(ne),ne.fire("properties:updated",{shape:ne,properties:ne.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:ne.properties,selectedShape:a.value})},100)(B,K)},Ee=(B,K)=>wt.latLng((B.lat+K.lat)/2,(B.lng+K.lng)/2),fe=B=>{if(!e.value||!t.value)return;E();const K=B.getLatLng(),H=B.getRadius(),ne=x(K,"#059669");b.push(ne),w(ne,B,()=>[kn(H,"m","Rayon"),kn(H*2,"m","Diamètre"),kn(Math.PI*Math.pow(H,2),"m²","Surface")].join("<br>"));const W=[],z=[0,45,90,135,180,225,270,315];z.forEach(A=>{const ge=B.calculatePointOnCircle(A),I=x(ge,"#2563EB");W.push(I),b.push(I),w(I,B,()=>kn(H,"m","Rayon")),I.on("mousedown",G=>{if(!e.value)return;wt.DomEvent.stopPropagation(G),e.value.dragging.disable();let se=!0;const ce=oe=>{se&&(B.resizeFromControlPoint(oe.latlng),W.forEach((xe,me)=>{const je=B.calculatePointOnCircle(z[me]);xe.setLatLng(je)}),ne.setLatLng(B.getLatLng()),I.measureDiv&&(I.measureDiv.innerHTML=kn(B.getRadius(),"m","Rayon")))},pe=()=>{se=!1,e.value&&(e.value.off("mousemove",ce),document.removeEventListener("mouseup",pe),e.value.dragging.enable(),B.updateProperties(),a.value=null,ls(()=>{a.value=B}),Pe(B,"Circle"))};e.value.on("mousemove",ce),document.addEventListener("mouseup",pe)})}),ne.on("mousedown",A=>{if(!e.value)return;wt.DomEvent.stopPropagation(A),e.value.dragging.disable();let ge=!0;const I=B.getLatLng(),G=A.latlng,se=pe=>{if(!ge)return;const oe=pe.latlng.lng-G.lng,xe=pe.latlng.lat-G.lat,me=wt.latLng(I.lat+xe,I.lng+oe);wt.Circle.prototype.setLatLng.call(B,me),ne.setLatLng(me),W.forEach((je,qe)=>{const J=B.calculatePointOnCircle(z[qe]);je.setLatLng(J)}),ne.measureDiv&&(ne.measureDiv.innerHTML=[kn(B.getRadius(),"m","Rayon"),kn(B.getRadius()*2,"m","Diamètre"),kn(Math.PI*Math.pow(B.getRadius(),2),"m²","Surface")].join("<br>"))},ce=()=>{ge=!1,e.value&&(e.value.off("mousemove",se),document.removeEventListener("mouseup",ce),e.value.dragging.enable(),B.updateProperties(),a.value=null,ls(()=>{a.value=B}),Pe(B,"Circle"))};e.value.on("mousemove",se),document.addEventListener("mouseup",ce)}),B.on("circle:resized",()=>{Pe(B,"Circle")}),a.value=B},Te=B=>{if(!e.value||!t.value)return;if(!(B instanceof za)){console.warn("La couche n'est pas une instance de Rectangle");return}const K=B;E();const H=K.getBounds(),ne=H.getCenter(),W=[H.getNorthWest(),H.getNorthEast(),H.getSouthEast(),H.getSouthWest()],z=x(ne,"#059669");b.push(z),w(z,K,()=>{const{width:G,height:se}=K.getDimensions(),ce=G*se;return[kn(G,"m","Largeur"),kn(se,"m","Hauteur"),kn(ce,"m²","Surface")].join("<br>")});const A=[];W.forEach((G,se)=>{const ce=x(G,"#DC2626");A.push(ce),b.push(ce),w(ce,K,()=>{const{width:pe,height:oe}=K.getDimensions();return[kn(pe,"m","Largeur"),kn(oe,"m","Hauteur")].join("<br>")}),ce.on("mousedown",pe=>{if(!e.value)return;wt.DomEvent.stopPropagation(pe),e.value.dragging.disable();const oe=me=>{K.resizeFromCorner(se,me.latlng);const je=K.getBounds(),qe=[je.getNorthWest(),je.getNorthEast(),je.getSouthEast(),je.getSouthWest()];ce.setLatLng(me.latlng),z.setLatLng(je.getCenter()),A.forEach((te,Ne)=>{Ne!==se&&te.setLatLng(qe[Ne])});const J=K.getMidPoints();ge.forEach((te,Ne)=>{te.setLatLng(J[Ne]);const{width:Ae,height:ee}=K.getDimensions(),We=Ne%2===0?Ae:ee;te.measureDiv&&(te.measureDiv.innerHTML=[kn(We,"m","Longueur du côté"),kn(We/2,"m","Distance au coin")].join("<br>"))})},xe=()=>{e.value&&(e.value.off("mousemove",oe),document.removeEventListener("mouseup",xe),e.value.dragging.enable(),K.updateProperties(),a.value=null,ls(()=>{a.value=K}))};e.value.on("mousemove",oe),document.addEventListener("mouseup",xe)})});const ge=[];K.getMidPoints().forEach((G,se)=>{const ce=x(G,"#2563EB");ge.push(ce),b.push(ce),w(ce,K,()=>{const{width:pe,height:oe}=K.getDimensions(),xe=se%2===0?pe:oe;return[kn(xe,"m","Longueur du côté"),kn(xe/2,"m","Distance au coin")].join("<br>")}),ce.on("mousedown",pe=>{wt.DomEvent.stopPropagation(pe),e.value.dragging.disable();const oe=me=>{const je=e.value.mouseEventToLatLng(me.originalEvent),qe=K.getBounds(),J=qe.getNorthWest(),te=qe.getSouthEast();let Ne;if(se%2===0){const et=(J.lng+te.lng)/2;Ne=wt.latLng(je.lat,et)}else{const et=(J.lat+te.lat)/2;Ne=wt.latLng(et,je.lng)}K.resizeFromSide(se,Ne);const Ae=K.getBounds(),ee=[Ae.getNorthWest(),Ae.getNorthEast(),Ae.getSouthEast(),Ae.getSouthWest()];z.setLatLng(Ae.getCenter()),A.forEach((et,Xe)=>{et.setLatLng(ee[Xe])});const We=K.getMidPoints();ge.forEach((et,Xe)=>{et.setLatLng(We[Xe]);const{width:Oe,height:ke}=K.getDimensions(),lt=Xe%2===0?Oe:ke;et.measureDiv&&(et.measureDiv.innerHTML=[kn(lt,"m","Longueur du côté"),kn(lt/2,"m","Distance au coin")].join("<br>"))})},xe=()=>{e.value.dragging.enable(),e.value.off("mousemove",oe),document.removeEventListener("mouseup",xe),K.updateProperties(),a.value=null,ls(()=>{a.value=K})};e.value.on("mousemove",oe),document.addEventListener("mouseup",xe)})}),z.on("mousedown",G=>{if(!e.value)return;wt.DomEvent.stopPropagation(G),e.value.dragging.disable();let se=!0;const ce=oe=>{if(!se)return;K.moveFromCenter(oe.latlng),z.setLatLng(oe.latlng);const xe=K.getBounds(),me=[xe.getNorthWest(),xe.getNorthEast(),xe.getSouthEast(),xe.getSouthWest()];A.forEach((qe,J)=>{qe.setLatLng(me[J])});const je=K.getMidPoints();if(ge.forEach((qe,J)=>{qe.setLatLng(je[J])}),z.measureDiv){const{width:qe,height:J}=K.getDimensions(),te=qe*J;z.measureDiv.innerHTML=[kn(qe,"m","Largeur"),kn(J,"m","Hauteur"),kn(te,"m²","Surface")].join("<br>")}},pe=()=>{se=!1,e.value&&(e.value.off("mousemove",ce),document.removeEventListener("mouseup",pe),e.value.dragging.enable(),K.updateProperties(),a.value=null,ls(()=>{a.value=K}))};e.value.on("mousemove",ce),document.addEventListener("mouseup",pe)})},$e=B=>{if(!e.value||!t.value)return;E();const K=B.getLatLngs();let H=null;if(B instanceof Ui){const z=B.getCenter();H=x(z,"#059669"),b.push(H),w(H,B,()=>{const A=B.getLength()||0;return kn(A,"m","Longueur totale")}),H.on("mousedown",A=>{if(!e.value)return;wt.DomEvent.stopPropagation(A),e.value.dragging.disable();let ge=!0;const I=A.latlng,G=[...B.getLatLngs()];b.forEach((pe,oe)=>{oe>0&&pe.setStyle({opacity:0,fillOpacity:0})});const se=pe=>{if(!ge)return;const oe=pe.latlng.lng-I.lng,xe=pe.latlng.lat-I.lat,me=G.map(je=>wt.latLng(je.lat+xe,je.lng+oe));wt.Polyline.prototype.setLatLngs.call(B,me),H==null||H.setLatLng(pe.latlng)},ce=()=>{ge=!1,e.value&&(e.value.off("mousemove",se),document.removeEventListener("mouseup",ce),e.value.dragging.enable(),E(),$e(B),B instanceof Ui&&(B.updateProperties(),Pe(B,"Line")),a.value=B)};e.value.on("mousemove",se),document.addEventListener("mouseup",ce)})}K.forEach((z,A)=>{const ge=x(z,"#DC2626");b.push(ge),w(ge,B,()=>{let I=0,G=0;return B instanceof Ui?(I=B.getLength()||0,G=B.getLengthToVertex(A)):(I=K.reduce((se,ce,pe)=>pe===0?0:se+ce.distanceTo(K[pe-1]),0),G=K.slice(0,A+1).reduce((se,ce,pe)=>pe===0?0:se+ce.distanceTo(K[pe-1]),0)),[kn(G,"m","Distance depuis le début"),kn(I,"m","Longueur totale")].join("<br>")}),ge.on("mousedown",I=>{if(!e.value)return;wt.DomEvent.stopPropagation(I),e.value.dragging.disable();let G=!0;H&&(H.setStyle({opacity:0,fillOpacity:0}),H.measureDiv&&(H.measureDiv.style.display="none"));const se=[];A>0&&se.push(A-1),A<K.length-1&&se.push(A);const ce=se.map(xe=>K.length+xe),pe=xe=>{G&&(B instanceof Ui?B.moveVertex(A,xe.latlng,!1):(K[A]=xe.latlng,B.setLatLngs(K)),ge.setLatLng(xe.latlng),W(se,ce))},oe=()=>{if(G=!1,!!e.value){if(e.value.off("mousemove",pe),document.removeEventListener("mouseup",oe),e.value.dragging.enable(),B instanceof Ui&&(B.updateProperties(),Pe(B,"Line")),H&&B instanceof Ui){const xe=B.getCenter();H.setLatLng(xe),H.setStyle({opacity:1,fillOpacity:1}),H.measureDiv&&(H.measureDiv.style.display="")}a.value=null,ls(()=>{a.value=B})}};e.value.on("mousemove",pe),document.addEventListener("mouseup",oe)})});const ne=()=>{const z=B.getLatLngs(),A=B instanceof Ui?z.length+1:z.length;b.slice(A).forEach(I=>{var G;I&&typeof I.remove=="function"&&((G=n.value)==null||G.removeLayer(I))}),b=b.slice(0,A),(B instanceof Ui?B.getMidPoints():Array.from({length:z.length-1},(I,G)=>{const se=z[G],ce=z[G+1];return wt.latLng((se.lat+ce.lat)/2,(se.lng+ce.lng)/2)})).forEach((I,G)=>{const se=x(I,"#2563EB");b.push(se),w(se,B,()=>{let ce=0,pe=0,oe=0;if(B instanceof Ui)ce=B.getSegmentLengthAt(G),pe=B.getLength()||0,oe=B.getLengthToVertex(G)+ce/2;else{const xe=z[G],me=z[G+1];ce=xe.distanceTo(me),pe=z.reduce((je,qe,J)=>J===0?0:je+qe.distanceTo(z[J-1]),0),oe=z.slice(0,G+1).reduce((je,qe,J)=>J===0?0:je+qe.distanceTo(z[J-1]),0)+ce/2}return[kn(ce,"m","Longueur du segment"),kn(ce/2,"m","Demi-segment"),kn(oe,"m","Distance depuis le début"),kn(pe,"m","Longueur totale")].join("<br>")}),se.on("mousedown",ce=>{if(!e.value)return;wt.DomEvent.stopPropagation(ce),e.value.dragging.disable();let pe=!0;const oe=G,xe=B.getLatLngs(),me=b.find(J=>J.options&&J.options.color==="#059669");me&&(me.setStyle({opacity:0,fillOpacity:0}),me.measureDiv&&(me.measureDiv.style.display="none"));const je=J=>{if(pe){if(B instanceof Ui)B.addVertex(oe,J.latlng,!1);else{const te=xe.slice();te.splice(oe+1,0,J.latlng),B.setLatLngs(te)}E(),$e(B),qe()}},qe=()=>{pe=!1,e.value&&(e.value.off("mousemove",je),document.removeEventListener("mouseup",qe),e.value.dragging.enable(),B instanceof Ui&&(B.updateProperties(),Pe(B,"Line")),a.value=null,ls(()=>{a.value=B}))};e.value.on("mousemove",je),document.addEventListener("mouseup",qe)})})},W=(z,A)=>{const ge=B.getLatLngs();z.forEach((I,G)=>{if(I<0||I>=ge.length-1)return;const se=A[G];if(se>=0&&se<b.length){let ce;if(B instanceof Ui){const oe=B.getMidPointAt(I);if(!oe)return;ce=oe}else{const oe=ge[I],xe=ge[I+1];ce=wt.latLng((oe.lat+xe.lat)/2,(oe.lng+xe.lng)/2)}const pe=b[se];if(pe&&pe.setLatLng){pe.setLatLng(ce);const oe=pe;if(oe.measureDiv){let xe=0,me=0,je=0;if(B instanceof Ui)xe=B.getSegmentLengthAt(I),me=B.getLength()||0,je=B.getLengthToVertex(I)+xe/2;else{const qe=ge[I],J=ge[I+1];xe=qe.distanceTo(J),me=0,je=0;for(let te=0;te<ge.length-1;te++){const Ne=ge[te].distanceTo(ge[te+1]);me+=Ne,te<I?je+=Ne:te===I&&(je+=Ne/2)}}oe.measureDiv.innerHTML=[kn(xe,"m","Longueur du segment"),kn(xe/2,"m","Demi-segment"),kn(je,"m","Distance depuis le début"),kn(me,"m","Longueur totale")].join("<br>")}}}})};ne()},q=B=>{if(!e.value||!t.value)return;E();const K=B.getLatLngs()[0],H=K.map(G=>[G.lng,G.lat]);H.push(H[0]);const ne=vu([H]),W=Qu(ne),z=K.reduce((G,se,ce)=>{const pe=K[(ce+1)%K.length];return G+se.distanceTo(pe)},0);let A;if(typeof B.getCenter=="function")try{A=B.getCenter()}catch(G){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",G);const se=Of(ne);A=wt.latLng(se.geometry.coordinates[1],se.geometry.coordinates[0])}else{const G=Of(ne);A=wt.latLng(G.geometry.coordinates[1],G.geometry.coordinates[0])}const ge=x(A,"#059669");b.push(ge),w(ge,B,()=>[kn(z,"m","Périmètre"),kn(W,"m²","Surface")].join("<br>")),ge.on("mousedown",G=>{if(!e.value)return;wt.DomEvent.stopPropagation(G),e.value.dragging.disable();let se=!0;const ce=G.latlng,pe=[...K];b.forEach((je,qe)=>{qe>0&&je.setStyle({opacity:0,fillOpacity:0})});const oe=If(je=>{if(!se)return;const qe=je.latlng.lng-ce.lng,J=je.latlng.lat-ce.lat,te=pe.map(Ne=>wt.latLng(Ne.lat+J,Ne.lng+qe));wt.Polygon.prototype.setLatLngs.call(B,[te]),ge.setLatLng(je.latlng)},16),xe=je=>{se&&oe(je)},me=()=>{if(se=!1,!!e.value){if(e.value.off("mousemove",xe),document.removeEventListener("mouseup",me),e.value.dragging.enable(),B.properties){const je=B.getLatLngs()[0],qe=je.map(te=>[te.lng,te.lat]);qe.push(qe[0]);const J=vu([qe]);B.properties.area=Qu(J),B.properties.perimeter=je.reduce((te,Ne,Ae)=>{const ee=je[(Ae+1)%je.length];return te+Ne.distanceTo(ee)},0),B.properties.surfaceInterieure=B.properties.area,B.properties.surfaceExterieure=B.properties.area}E(),q(B),a.value=null,ls(()=>{a.value=B})}};e.value.on("mousemove",xe),document.addEventListener("mouseup",me)}),K.forEach((G,se)=>{const ce=x(G,"#DC2626");b.push(ce),w(ce,B,()=>{const pe=K[(se-1+K.length)%K.length],oe=K[(se+1)%K.length],xe=G.distanceTo(pe),me=G.distanceTo(oe);return[kn(xe,"m","Distance au point précédent"),kn(me,"m","Distance au point suivant"),kn(z,"m","Périmètre total"),kn(W,"m²","Surface")].join("<br>")}),ce.on("mousedown",pe=>{if(wt.DomEvent.stopPropagation(pe),!e.value)return;e.value.dragging.disable();let oe=!0;ge&&(ge.setStyle({opacity:0,fillOpacity:0}),ge.measureDiv&&(ge.measureDiv.style.display="none"));const xe=If(qe=>{if(!oe)return;K[se]=qe.latlng,wt.Polygon.prototype.setLatLngs.call(B,[K]),ce.setLatLng(qe.latlng);const J=b.slice(K.length+1),te=(se-1+K.length)%K.length,Ne=J[te];if(Ne){const ee=K[te],We=K[se],et=wt.latLng((ee.lat+We.lat)/2,(ee.lng+We.lng)/2);Ne.setLatLng(et)}const Ae=J[se];if(Ae){const ee=K[se],We=K[(se+1)%K.length],et=wt.latLng((ee.lat+We.lat)/2,(ee.lng+We.lng)/2);Ae.setLatLng(et)}},16),me=qe=>{oe&&xe(qe)},je=()=>{if(oe=!1,!!e.value){if(e.value.off("mousemove",me),document.removeEventListener("mouseup",je),e.value.dragging.enable(),B.properties){const qe=B.getLatLngs()[0].map(te=>[te.lng,te.lat]);qe.push(qe[0]);const J=vu([qe]);B.properties.area=Qu(J),B.properties.perimeter=K.reduce((te,Ne,Ae)=>{const ee=K[(Ae+1)%K.length];return te+Ne.distanceTo(ee)},0),B.properties.surfaceInterieure=B.properties.area,B.properties.surfaceExterieure=B.properties.area}E(),q(B),a.value=null,ls(()=>{a.value=B})}};e.value.on("mousemove",me),document.addEventListener("mouseup",je)})}),(()=>{const G=B.getLatLngs()[0];b.slice(G.length+1).forEach(ce=>{n.value&&n.value.removeLayer(ce)}),b=b.slice(0,G.length+1);const se=new Array(G.length);for(let ce=0;ce<G.length;ce++){const pe=G[ce],oe=G[(ce+1)%G.length];se[ce]=Ee(pe,oe)}se.forEach((ce,pe)=>{const oe=x(ce,"#2563EB");b.push(oe),w(oe,B,()=>{const xe=G[pe],me=G[(pe+1)%G.length],je=xe.distanceTo(me);return[kn(je,"m","Longueur du segment"),kn(z,"m","Périmètre total"),kn(W,"m²","Surface")].join("<br>")}),oe.on("mousedown",xe=>{if(!e.value)return;wt.DomEvent.stopPropagation(xe),e.value.dragging.disable();let me=!0;const je=pe;ge&&(ge.setStyle({opacity:0,fillOpacity:0}),ge.measureDiv&&(ge.measureDiv.style.display="none"));const qe=[...B.getLatLngs()[0]];qe.splice((je+1)%qe.length,0,ce),B.setLatLngs([qe]),E(),q(B);const J=je+1,te=1+J,Ne=J<b.length-1?b[te]:null;if(Ne){const Ae=We=>{if(!me)return;const et=B.getLatLngs()[0];et[J]=We.latlng,B.setLatLngs([et]),Ne.setLatLng(We.latlng);const Xe=b.slice(1+et.length),Oe=(J-1+et.length)%et.length,ke=J;if(Xe[Oe]){const lt=et[Oe],ht=et[J],it=wt.latLng((lt.lat+ht.lat)/2,(lt.lng+ht.lng)/2);Xe[Oe].setLatLng(it)}if(Xe[ke]){const lt=et[J],ht=et[(J+1)%et.length],it=wt.latLng((lt.lat+ht.lat)/2,(lt.lng+ht.lng)/2);Xe[ke].setLatLng(it)}},ee=()=>{if(me=!1,!!e.value){if(e.value.off("mousemove",Ae),document.removeEventListener("mouseup",ee),e.value.dragging.enable(),B.properties){const We=B.getLatLngs()[0].map(Xe=>[Xe.lng,Xe.lat]);We.push(We[0]);const et=vu([We]);B.properties.area=Qu(et),B.properties.perimeter=B.getLatLngs()[0].reduce((Xe,Oe,ke,lt)=>{const ht=lt[(ke+1)%lt.length];return Xe+Oe.distanceTo(ht)},0)}E(),q(B),a.value=null,ls(()=>{a.value=B})}};e.value.on("mousemove",Ae),document.addEventListener("mouseup",ee)}else e.value.dragging.enable(),E(),q(B)})})})()},$=B=>{if(!e.value||!t.value)return;E();const K=B.getCenter(),H=B.getRadius(),ne=B.getStartAngle(),W=B.getStopAngle(),z=B.getOpeningAngle(),A=B.calculatePointOnArc(ne),ge=B.calculatePointOnArc(W),I=x(A,"#DC2626"),G=x(ge,"#DC2626");b.push(I,G),w(I,B,()=>`Angle d'ouverture: ${Rf(z)}`),w(G,B,()=>`Angle d'ouverture: ${Rf(z)}`);const se=x(K,"#059669");if(b.push(se),w(se,B,()=>{const ce=B.properties.area||0;return[kn(H,"m","Rayon"),kn(ce,"m²","Surface"),`Angle: ${Rf(z)}`].join("<br>")}),z>5){const ce=B.calculateMidpointPosition(),pe=x(ce,"#2563EB");b.push(pe),w(pe,B,()=>kn(B.getRadius(),"m","Rayon")),pe.on("mousedown",oe=>{if(!e.value)return;wt.DomEvent.stopPropagation(oe),e.value.dragging.disable();let xe=!0;const me=qe=>{if(!xe)return;const J=K.distanceTo(qe.latlng);B.setRadius(J);const te=B.calculatePointOnArc(ne),Ne=B.calculatePointOnArc(W),Ae=B.calculateMidpointPosition();if(I.setLatLng(te),G.setLatLng(Ne),pe.setLatLng(Ae),a.value=B,pe){const ee=pe.measureDiv;ee&&(ee.innerHTML=kn(J,"m","Rayon"))}},je=()=>{xe=!1,e.value&&(e.value.off("mousemove",me),document.removeEventListener("mouseup",je),e.value.dragging.enable())};e.value.on("mousemove",me),document.addEventListener("mouseup",je)})}[I,G].forEach((ce,pe)=>{ce.on("mousedown",oe=>{if(!e.value)return;wt.DomEvent.stopPropagation(oe),e.value.dragging.disable();let xe=!0;const me=b.find(J=>{var te;return((te=J.options)==null?void 0:te.color)==="#2563EB"}),je=J=>{if(!xe||!e.value)return;const te=Math.atan2(J.latlng.lat-K.lat,J.latlng.lng-K.lng)*180/Math.PI;pe===0?B.setAngles(te,B.getStopAngle()):B.setAngles(B.getStartAngle(),te);const Ne=B.getStartAngle(),Ae=B.getStopAngle(),ee=B.getOpeningAngle(),We=B.calculatePointOnArc(Ne),et=B.calculatePointOnArc(Ae);if(I.setLatLng(We),G.setLatLng(et),me&&ee>5){const Xe=B.calculateMidpointPosition();me.setLatLng(Xe),me.setStyle({opacity:1,fillOpacity:1})}else me&&me.setStyle({opacity:0,fillOpacity:0});a.value=B},qe=()=>{xe=!1,e.value&&(e.value.off("mousemove",je),document.removeEventListener("mouseup",qe),e.value.dragging.enable(),$(B))};e.value.on("mousemove",je),document.addEventListener("mouseup",qe)})}),se.on("mousedown",ce=>{if(!e.value)return;wt.DomEvent.stopPropagation(ce),e.value.dragging.disable();let pe=!0;const oe=me=>{if(!pe)return;B.setCenter(me.latlng),se.setLatLng(me.latlng);const je=B.getStartAngle(),qe=B.getStopAngle(),J=B.getOpeningAngle(),te=B.calculatePointOnArc(je),Ne=B.calculatePointOnArc(qe);I.setLatLng(te),G.setLatLng(Ne);const Ae=b.find(ee=>{var We;return((We=ee.options)==null?void 0:We.color)==="#2563EB"});if(Ae&&J>5){const ee=B.calculateMidpointPosition();Ae.setLatLng(ee),Ae.setStyle({opacity:1,fillOpacity:1})}else Ae&&Ae.setStyle({opacity:0,fillOpacity:0});a.value=B},xe=()=>{pe=!1,e.value&&(e.value.off("mousemove",oe),document.removeEventListener("mouseup",xe),e.value.dragging.enable())};e.value.on("mousemove",oe),document.addEventListener("mouseup",xe)})},Se=B=>{var K;if(!(!e.value||!r.value)){if(console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:B.constructor.name,properties:B.properties}),r.value.clearLayers(),B instanceof bl){if(B.getCenter()){const H=wt.circleMarker(B.getCenter(),{radius:0,className:"text-hint-marker",pmIgnore:!0});r.value.addLayer(H)}return}if(B instanceof Xu){const H=B.getLatLng(),ne=x(H,"#059669");r.value.addLayer(ne),B.getCardinalPoints().forEach(W=>{const z=x(W,"#2563EB");r.value.addLayer(z)})}else if(B instanceof wt.Circle){const H=B.getLatLng(),ne=B.getRadius(),W=x(H,"#059669");r.value.addLayer(W),[0,45,90,135,180,225,270,315].forEach(z=>{const A=z*Math.PI/180,ge=wt.latLng(H.lat+ne/111319.9*Math.sin(A),H.lng+ne/(111319.9*Math.cos(H.lat*Math.PI/180))*Math.cos(A)),I=x(ge,"#2563EB");r.value.addLayer(I)})}else if(B instanceof za){const H=B,ne=H.getBounds(),W=ne.getCenter(),z=[ne.getNorthWest(),ne.getNorthEast(),ne.getSouthEast(),ne.getSouthWest()],A=x(W,"#059669");r.value.addLayer(A),z.forEach(ge=>{const I=x(ge,"#DC2626");r.value.addLayer(I)}),H.getMidPoints().forEach(ge=>{const I=x(ge,"#2563EB");r.value.addLayer(I)})}else if(B instanceof Vl||((K=B.properties)==null?void 0:K.type)==="Semicircle"){const H=B,ne=x(H.getCenter(),"#059669");r.value.addLayer(ne);const W=H.calculatePointOnArc(H.getStartAngle()),z=H.calculatePointOnArc(H.getStopAngle()),A=x(W,"#DC2626"),ge=x(z,"#DC2626");if(r.value.addLayer(A),r.value.addLayer(ge),H.getOpeningAngle()>5){const I=H.calculateMidpointPosition(),G=x(I,"#2563EB");r.value.addLayer(G)}}else if(B instanceof wt.Polyline){const H=B.getLatLngs();if(B instanceof Ui){const ne=B.getCenter(),W=x(ne,"#059669");r.value.addLayer(W)}if(H.forEach(ne=>{const W=x(ne,"#DC2626");r.value.addLayer(W)}),B instanceof Ui)B.getMidPoints().forEach(ne=>{const W=x(ne,"#2563EB");r.value.addLayer(W)});else for(let ne=0;ne<H.length-1;ne++){const W=Ee(H[ne],H[ne+1]),z=x(W,"#2563EB");r.value.addLayer(z)}}else if(B instanceof wt.Polygon){const H=B.getLatLngs()[0];let ne;try{if(typeof B.getCenter=="function")ne=B.getCenter();else{const W=H.map(ge=>[ge.lng,ge.lat]);W.push(W[0]);const z=vu([W]),A=Of(z);ne=wt.latLng(A.geometry.coordinates[1],A.geometry.coordinates[0])}if(ne&&typeof ne.lat=="number"&&typeof ne.lng=="number"&&!isNaN(ne.lat)&&!isNaN(ne.lng)){const W=x(ne,"#059669");r.value.addLayer(W)}}catch(W){console.warn("Erreur lors du calcul du centre temporaire du polygone",W)}H.forEach(W=>{const z=x(W,"#DC2626");r.value.addLayer(z)});for(let W=0;W<H.length;W++){const z=H[(W+1)%H.length],A=Ee(H[W],z),ge=x(A,"#2563EB");r.value.addLayer(ge)}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}};return Uh(()=>{e.value&&(e.value.remove(),e.value=null)}),{map:e,featureGroup:t,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:o,selectedShape:a,isDrawing:u,initMap:U,setDrawingTool:Q,updateShapeStyle:ie,updateShapeProperties:ye,updateTextFixedSize:D,adjustView:j,clearActiveControlPoints:E}}function rL(){const e=Ft(null),t=Ft(""),n=Ft("Ville"),r={Ville:Ri.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}),Satellite:Ri.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19}),Cadastre:Ri.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19})};return{map:e,searchQuery:t,currentBaseMap:n,baseMaps:r,initMap:f=>{e.value=f,Ri.control.layers(r).addTo(f),r[n.value].addTo(f)},searchLocation:async()=>{if(!(!e.value||!t.value))try{const m=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t.value)}`)).json();if(m&&m.length>0){const{lat:_,lon:w}=m[0];e.value.setView([_,w],13)}}catch(f){console.error("Erreur lors de la recherche de localisation:",f)}},changeBaseMap:f=>{!e.value||!r[f]||(Object.values(r).forEach(m=>{var _;(_=e.value)!=null&&_.hasLayer(m)&&e.value.removeLayer(m)}),r[f].addTo(e.value),n.value=f)}}}const ef=Wd("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,n;const e=ds();this.loading=!0;try{let r="/plans/";e.isDealer?r+="?concessionnaire="+((t=e.user)==null?void 0:t.id):e.isClient&&(r+="?utilisateur="+((n=e.user)==null?void 0:n.id));const o=await Ln.get(r);this.plans=o.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var t,n;const e=ds();this.loading=!0;try{let r="/plans/";const o={include_details:!0};e.isDealer?o.concessionnaire=(t=e.user)==null?void 0:t.id:e.isClient&&(o.utilisateur=(n=e.user)==null?void 0:n.id);const a=await Ln.get(r,{params:o});return this.plans=a.data,a}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{const t=await Ln.post("/plans/",e);return this.plans.push(t.data),t.data}catch(t){const n=t instanceof Error?t.message:String(t);throw console.error("Error creating plan:",n),this.error="Erreur lors de la création du plan",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var t,n;if(this.unsavedChanges){this.loading=!0;try{const r=await Ln.patch(`/plans/${e}/`,{...this.currentPlan,version:((t=this.currentPlan)==null?void 0:t.version)||1}),o=this.plans.findIndex(a=>a.id===e);return o!==-1&&(this.plans[o]=r.data),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async updatePlanDetails(e,t){var n;try{const r=await Ln.patch(`/plans/${e}/`,t),o=this.plans.findIndex(a=>a.id===e);return o!==-1&&(this.plans[o]={...this.plans[o],...r.data}),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan={...this.currentPlan,...r.data}),r.data}catch(r){throw console.error("Erreur lors de la mise à jour du plan:",r),r}},async fetchPlanHistory(e){this.loading=!0;try{const t=await Ln.get(`/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la récupération de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const r=await Ln.post(`/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data);const o=this.plans.findIndex(a=>a.id===e);return o!==-1&&(this.plans[o]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;try{await Ln.delete(`/plans/${e}/`),this.plans=this.plans.filter(n=>n.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}}),T1=Wd("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){this.currentPlanId=e,e===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(e){!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e),this.unsavedChanges=!0},updateElement(e){const t=this.elements.findIndex(n=>n.id===e.id);if(t!==-1){const n=this.elements[t].type_forme;this.elements[t]={...e,type_forme:n},this.unsavedChanges=!0}},removeElement(e){const t=this.elements.findIndex(n=>n.id===e);t!==-1&&(this.elements.splice(t,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){var t;this.loading=!0;try{const r=(await Ln.get(`/plans/${e}/`)).data;return this.elements=r.formes.map(o=>({id:o.id,type_forme:o.type_forme,data:o.data||{}})),console.log(`Plan ${e} - Chargé ${this.elements.length} éléments`),this.currentPlanId=e,this.unsavedChanges=!1,r.preferences&&(r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),(t=this.selectedElement)!=null&&t.type_forme&&this.setCurrentTool(this.selectedElement.type_forme),this.elements}catch(n){throw console.error("Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1}},async saveToPlan(e,t){ef(),this.loading=!0;try{const n=e||this.currentPlanId;if(!n)throw new Error("Aucun plan sélectionné pour la sauvegarde");const r=this.elements.map(u=>({...u,type_forme:u.type_forme||this.lastUsedType})),o=(t==null?void 0:t.elementsToDelete)||[];console.log("Store - Sauvegarde du plan:",{planId:n,elementsCount:r.length,elementsToDeleteCount:o.length});const a=await Ln.post(`/plans/${n}/save_with_elements/`,{formes:r,connexions:[],annotations:[],elementsToDelete:o,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=a.data.formes.map(u=>({...u,type_forme:u.type_forme})),this.unsavedChanges=!1,a.data}catch(n){throw console.error("Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),sL={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},oL={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},aL={key:0,class:"mb-4"},lL={key:0,class:"animate-pulse"},uL=["value"],cL={key:1,class:"mb-4"},hL={key:0,class:"animate-pulse"},fL=["disabled"],dL={value:null},pL=["value"],mL={class:"mb-4"},gL={class:"mb-6"},vL={class:"flex justify-end space-x-3"},_L=["disabled"],yL={key:0},bL={key:1},N1=ps({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(e,{expose:t,emit:n}){const r=e,o=n,a=ds(),u=ef();Ft(!1);const f=Ft(!1),m=Ft(null),_=Ft([]),w=Ft([]),b=Ft(null),E=Ft(null),x=Ft(!1),F=Ft(!1),D=Ft({nom:"",description:"",concessionnaire:null,client:null}),U=Nn(()=>{var Ee,fe;return((Ee=a.user)==null?void 0:Ee.user_type)==="admin"?D.value.nom.trim()&&D.value.concessionnaire&&D.value.client:((fe=a.user)==null?void 0:fe.user_type)==="dealer"?D.value.nom.trim()&&D.value.client:D.value.nom.trim()});Yr(()=>D.value.concessionnaire,async Ee=>{if(r.modelValue)if(Ee){const fe=_.value.find(Te=>Te.id===Ee);fe&&await ie(fe)}else w.value=[],b.value=null,E.value=null,D.value.client=null}),Yr(()=>r.modelValue,Ee=>{var fe,Te;Ee?((fe=a.user)==null?void 0:fe.user_type)==="admin"?j():((Te=a.user)==null?void 0:Te.user_type)==="dealer"&&Q(a.user.id):(D.value={nom:"",description:"",concessionnaire:null,client:null},b.value=null,E.value=null,w.value=[],_.value=[],m.value=null)}),Nn(()=>{var Ee;return((Ee=a.user)==null?void 0:Ee.user_type)==="admin"?b.value?w.value:[]:w.value});async function j(){x.value=!0;try{const Ee=await Ln.get("/users/",{params:{role:"CONCESSIONNAIRE"}});_.value=Ee.data}catch(Ee){console.error("[NewPlanModal] Error loading dealers:",Ee)}finally{x.value=!1}}async function Q(Ee){F.value=!0;try{const fe=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Ee}});w.value=Array.isArray(fe.data)?fe.data:[fe.data]}catch(fe){console.error("[NewPlanModal] Error loading clients:",fe),w.value=[]}finally{F.value=!1}}async function ie(Ee){if(r.modelValue){b.value=Ee,D.value.concessionnaire=Ee.id,F.value=!0;try{const fe=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Ee.id}});w.value=Array.isArray(fe.data)?fe.data:[fe.data]}catch(fe){console.error("[NewPlanModal] Error loading clients:",fe),w.value=[]}finally{F.value=!1}}}function ye(Ee){r.modelValue&&(E.value=Ee,D.value.client=Ee.id,o("clientSelected",Ee))}function we(){o("update:modelValue",!1),D.value={nom:"",description:"",concessionnaire:null,client:null},b.value=null,E.value=null,w.value=[],m.value=null}async function Pe(){var Ee,fe,Te,$e,q;m.value=null,f.value=!0;try{const $={nom:D.value.nom.trim(),description:D.value.description.trim()};((Ee=a.user)==null?void 0:Ee.user_type)==="admin"?($.concessionnaire=D.value.concessionnaire,$.client=D.value.client):((fe=a.user)==null?void 0:fe.user_type)==="dealer"?($.concessionnaire=a.user.id,$.client=D.value.client):((Te=a.user)==null?void 0:Te.user_type)==="client"&&($.client=a.user.id);const Se=await u.createPlan($);o("created",Se.id),we()}catch($){console.error("[NewPlanModal] Error creating plan:",$),m.value=((q=($e=$.response)==null?void 0:$e.data)==null?void 0:q.detail)||$.message||"Une erreur est survenue lors de la création du plan"}finally{f.value=!1}}return t({dealers:_,dealerClients:w,selectedDealer:b,selectedClient:E,loadDealers:j,loadDealerClients:Q,selectDealer:ie,selectClient:ye}),(Ee,fe)=>{var Te,$e;return Ee.modelValue?(nt(),at("div",sL,[M("div",oL,[M("div",{class:"flex justify-between items-center mb-4"},[fe[5]||(fe[5]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),M("button",{onClick:we,class:"text-gray-400 hover:text-gray-500"},fe[4]||(fe[4]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Dn(a).isAdmin?(nt(),at("div",aL,[fe[8]||(fe[8]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),x.value?(nt(),at("div",lL,fe[6]||(fe[6]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Pn((nt(),at("select",{key:1,"onUpdate:modelValue":fe[0]||(fe[0]=q=>D.value.concessionnaire=q),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[fe[7]||(fe[7]=M("option",{value:null},"Sélectionnez un concessionnaire",-1)),(nt(!0),at(gn,null,Un(_.value,q=>(nt(),at("option",{key:q.id,value:q.id},kt(q.first_name)+" "+kt(q.last_name)+" ("+kt(q.company_name)+") ",9,uL))),128))],512)),[[hs,D.value.concessionnaire]])])):tn("",!0),((Te=Dn(a).user)==null?void 0:Te.user_type)==="admin"||(($e=Dn(a).user)==null?void 0:$e.user_type)==="dealer"?(nt(),at("div",cL,[fe[10]||(fe[10]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),F.value?(nt(),at("div",hL,fe[9]||(fe[9]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Pn((nt(),at("select",{key:1,"onUpdate:modelValue":fe[1]||(fe[1]=q=>D.value.client=q),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!w.value.length},[M("option",dL,kt(w.value.length?"Sélectionnez un client":"Aucun client disponible"),1),(nt(!0),at(gn,null,Un(w.value,q=>(nt(),at("option",{key:q.id,value:q.id},kt(q.first_name)+" "+kt(q.last_name)+" ("+kt(q.company_name)+") ",9,pL))),128))],8,fL)),[[hs,D.value.client]])])):tn("",!0),M("div",mL,[fe[11]||(fe[11]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Pn(M("input",{"onUpdate:modelValue":fe[2]||(fe[2]=q=>D.value.nom=q),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[ri,D.value.nom]])]),M("div",gL,[fe[12]||(fe[12]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Pn(M("textarea",{"onUpdate:modelValue":fe[3]||(fe[3]=q=>D.value.description=q),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[ri,D.value.description]])]),M("div",vL,[M("button",{onClick:we,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),M("button",{onClick:Pe,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!U.value||f.value},[f.value?(nt(),at("span",yL,"Création en cours...")):(nt(),at("span",bL,"Créer le plan"))],8,_L)])])])):tn("",!0)}}});function oi(e){"@babel/helpers - typeof";return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(e)}var Jr=Uint8Array,Ks=Uint16Array,ep=Int32Array,tf=new Jr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nf=new Jr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),yd=new Jr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),D1=function(e,t){for(var n=new Ks(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var o=new ep(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)o[a]=a-n[r]<<5|r;return{b:n,r:o}},O1=D1(tf,2),R1=O1.b,bd=O1.r;R1[28]=258,bd[258]=28;var I1=D1(nf,0),wL=I1.b,Y0=I1.r,wd=new Ks(32768);for(var wi=0;wi<32768;++wi){var dl=(wi&43690)>>1|(wi&21845)<<1;dl=(dl&52428)>>2|(dl&13107)<<2,dl=(dl&61680)>>4|(dl&3855)<<4,wd[wi]=((dl&65280)>>8|(dl&255)<<8)>>1}var _a=function(e,t,n){for(var r=e.length,o=0,a=new Ks(t);o<r;++o)e[o]&&++a[e[o]-1];var u=new Ks(t);for(o=1;o<t;++o)u[o]=u[o-1]+a[o-1]<<1;var f;if(n){f=new Ks(1<<t);var m=15-t;for(o=0;o<r;++o)if(e[o])for(var _=o<<4|e[o],w=t-e[o],b=u[e[o]-1]++<<w,E=b|(1<<w)-1;b<=E;++b)f[wd[b]>>m]=_}else for(f=new Ks(r),o=0;o<r;++o)e[o]&&(f[o]=wd[u[e[o]-1]++]>>15-e[o]);return f},Pl=new Jr(288);for(var wi=0;wi<144;++wi)Pl[wi]=8;for(var wi=144;wi<256;++wi)Pl[wi]=9;for(var wi=256;wi<280;++wi)Pl[wi]=7;for(var wi=280;wi<288;++wi)Pl[wi]=8;var Pc=new Jr(32);for(var wi=0;wi<32;++wi)Pc[wi]=5;var xL=_a(Pl,9,0),LL=_a(Pl,9,1),CL=_a(Pc,5,0),kL=_a(Pc,5,1),Ff=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Fo=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},jf=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},tp=function(e){return(e+7)/8|0},F1=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Jr(e.subarray(t,n))},PL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zo=function(e,t,n){var r=new Error(t||PL[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,zo),!n)throw r;return r},SL=function(e,t,n,r){var o=e.length,a=0;if(!o||t.f&&!t.l)return n||new Jr(0);var u=!n,f=u||t.i!=2,m=t.i;u&&(n=new Jr(o*3));var _=function(qe){var J=n.length;if(qe>J){var te=new Jr(Math.max(J*2,qe));te.set(n),n=te}},w=t.f||0,b=t.p||0,E=t.b||0,x=t.l,F=t.d,D=t.m,U=t.n,j=o*8;do{if(!x){w=Fo(e,b,1);var Q=Fo(e,b+1,3);if(b+=3,Q)if(Q==1)x=LL,F=kL,D=9,U=5;else if(Q==2){var Pe=Fo(e,b,31)+257,Ee=Fo(e,b+10,15)+4,fe=Pe+Fo(e,b+5,31)+1;b+=14;for(var Te=new Jr(fe),$e=new Jr(19),q=0;q<Ee;++q)$e[yd[q]]=Fo(e,b+q*3,7);b+=Ee*3;for(var $=Ff($e),Se=(1<<$)-1,B=_a($e,$,1),q=0;q<fe;){var K=B[Fo(e,b,Se)];b+=K&15;var ie=K>>4;if(ie<16)Te[q++]=ie;else{var H=0,ne=0;for(ie==16?(ne=3+Fo(e,b,3),b+=2,H=Te[q-1]):ie==17?(ne=3+Fo(e,b,7),b+=3):ie==18&&(ne=11+Fo(e,b,127),b+=7);ne--;)Te[q++]=H}}var W=Te.subarray(0,Pe),z=Te.subarray(Pe);D=Ff(W),U=Ff(z),x=_a(W,D,1),F=_a(z,U,1)}else zo(1);else{var ie=tp(b)+4,ye=e[ie-4]|e[ie-3]<<8,we=ie+ye;if(we>o){m&&zo(0);break}f&&_(E+ye),n.set(e.subarray(ie,we),E),t.b=E+=ye,t.p=b=we*8,t.f=w;continue}if(b>j){m&&zo(0);break}}f&&_(E+131072);for(var A=(1<<D)-1,ge=(1<<U)-1,I=b;;I=b){var H=x[jf(e,b)&A],G=H>>4;if(b+=H&15,b>j){m&&zo(0);break}if(H||zo(2),G<256)n[E++]=G;else if(G==256){I=b,x=null;break}else{var se=G-254;if(G>264){var q=G-257,ce=tf[q];se=Fo(e,b,(1<<ce)-1)+R1[q],b+=ce}var pe=F[jf(e,b)&ge],oe=pe>>4;pe||zo(3),b+=pe&15;var z=wL[oe];if(oe>3){var ce=nf[oe];z+=jf(e,b)&(1<<ce)-1,b+=ce}if(b>j){m&&zo(0);break}f&&_(E+131072);var xe=E+se;if(E<z){var me=a-z,je=Math.min(z,xe);for(me+E<0&&zo(3);E<je;++E)n[E]=r[me+E]}for(;E<xe;++E)n[E]=n[E-z]}}t.l=x,t.p=I,t.b=E,t.f=w,x&&(w=1,t.m=D,t.d=F,t.n=U)}while(!w);return E!=n.length&&u?F1(n,0,E):n.subarray(0,E)},Ua=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},ec=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},zf=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,a=n.slice();if(!o)return{t:z1,l:0};if(o==1){var u=new Jr(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(we,Pe){return we.f-Pe.f}),n.push({s:-1,f:25001});var f=n[0],m=n[1],_=0,w=1,b=2;for(n[0]={s:-1,f:f.f+m.f,l:f,r:m};w!=o-1;)f=n[n[_].f<n[b].f?_++:b++],m=n[_!=w&&n[_].f<n[b].f?_++:b++],n[w++]={s:-1,f:f.f+m.f,l:f,r:m};for(var E=a[0].s,r=1;r<o;++r)a[r].s>E&&(E=a[r].s);var x=new Ks(E+1),F=xd(n[w-1],x,0);if(F>t){var r=0,D=0,U=F-t,j=1<<U;for(a.sort(function(Pe,Ee){return x[Ee.s]-x[Pe.s]||Pe.f-Ee.f});r<o;++r){var Q=a[r].s;if(x[Q]>t)D+=j-(1<<F-x[Q]),x[Q]=t;else break}for(D>>=U;D>0;){var ie=a[r].s;x[ie]<t?D-=1<<t-x[ie]++-1:++r}for(;r>=0&&D;--r){var ye=a[r].s;x[ye]==t&&(--x[ye],++D)}F=t}return{t:new Jr(x),l:F}},xd=function(e,t,n){return e.s==-1?Math.max(xd(e.l,t,n+1),xd(e.r,t,n+1)):t[e.s]=n},X0=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ks(++t),r=0,o=e[0],a=1,u=function(m){n[r++]=m},f=1;f<=t;++f)if(e[f]==o&&f!=t)++a;else{if(!o&&a>2){for(;a>138;a-=138)u(32754);a>2&&(u(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(u(o),--a;a>6;a-=6)u(8304);a>2&&(u(a-3<<5|8208),a=0)}for(;a--;)u(o);a=1,o=e[f]}return{c:n.subarray(0,r),n:t}},tc=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},j1=function(e,t,n){var r=n.length,o=tp(t+2);e[o]=r&255,e[o+1]=r>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var a=0;a<r;++a)e[o+a+4]=n[a];return(o+4+r)*8},Q0=function(e,t,n,r,o,a,u,f,m,_,w){Ua(t,w++,n),++o[256];for(var b=zf(o,15),E=b.t,x=b.l,F=zf(a,15),D=F.t,U=F.l,j=X0(E),Q=j.c,ie=j.n,ye=X0(D),we=ye.c,Pe=ye.n,Ee=new Ks(19),fe=0;fe<Q.length;++fe)++Ee[Q[fe]&31];for(var fe=0;fe<we.length;++fe)++Ee[we[fe]&31];for(var Te=zf(Ee,7),$e=Te.t,q=Te.l,$=19;$>4&&!$e[yd[$-1]];--$);var Se=_+5<<3,B=tc(o,Pl)+tc(a,Pc)+u,K=tc(o,E)+tc(a,D)+u+14+3*$+tc(Ee,$e)+2*Ee[16]+3*Ee[17]+7*Ee[18];if(m>=0&&Se<=B&&Se<=K)return j1(t,w,e.subarray(m,m+_));var H,ne,W,z;if(Ua(t,w,1+(K<B)),w+=2,K<B){H=_a(E,x,0),ne=E,W=_a(D,U,0),z=D;var A=_a($e,q,0);Ua(t,w,ie-257),Ua(t,w+5,Pe-1),Ua(t,w+10,$-4),w+=14;for(var fe=0;fe<$;++fe)Ua(t,w+3*fe,$e[yd[fe]]);w+=3*$;for(var ge=[Q,we],I=0;I<2;++I)for(var G=ge[I],fe=0;fe<G.length;++fe){var se=G[fe]&31;Ua(t,w,A[se]),w+=$e[se],se>15&&(Ua(t,w,G[fe]>>5&127),w+=G[fe]>>12)}}else H=xL,ne=Pl,W=CL,z=Pc;for(var fe=0;fe<f;++fe){var ce=r[fe];if(ce>255){var se=ce>>18&31;ec(t,w,H[se+257]),w+=ne[se+257],se>7&&(Ua(t,w,ce>>23&31),w+=tf[se]);var pe=ce&31;ec(t,w,W[pe]),w+=z[pe],pe>3&&(ec(t,w,ce>>5&8191),w+=nf[pe])}else ec(t,w,H[ce]),w+=ne[ce]}return ec(t,w,H[256]),w+ne[256]},EL=new ep([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),z1=new Jr(0),AL=function(e,t,n,r,o,a){var u=a.z||e.length,f=new Jr(r+u+5*(1+Math.ceil(u/7e3))+o),m=f.subarray(r,f.length-o),_=a.l,w=(a.r||0)&7;if(t){w&&(m[0]=a.r>>3);for(var b=EL[t-1],E=b>>13,x=b&8191,F=(1<<n)-1,D=a.p||new Ks(32768),U=a.h||new Ks(F+1),j=Math.ceil(n/3),Q=2*j,ie=function(Ne){return(e[Ne]^e[Ne+1]<<j^e[Ne+2]<<Q)&F},ye=new ep(25e3),we=new Ks(288),Pe=new Ks(32),Ee=0,fe=0,Te=a.i||0,$e=0,q=a.w||0,$=0;Te+2<u;++Te){var Se=ie(Te),B=Te&32767,K=U[Se];if(D[B]=K,U[Se]=B,q<=Te){var H=u-Te;if((Ee>7e3||$e>24576)&&(H>423||!_)){w=Q0(e,m,0,ye,we,Pe,fe,$e,$,Te-$,w),$e=Ee=fe=0,$=Te;for(var ne=0;ne<286;++ne)we[ne]=0;for(var ne=0;ne<30;++ne)Pe[ne]=0}var W=2,z=0,A=x,ge=B-K&32767;if(H>2&&Se==ie(Te-ge))for(var I=Math.min(E,H)-1,G=Math.min(32767,Te),se=Math.min(258,H);ge<=G&&--A&&B!=K;){if(e[Te+W]==e[Te+W-ge]){for(var ce=0;ce<se&&e[Te+ce]==e[Te+ce-ge];++ce);if(ce>W){if(W=ce,z=ge,ce>I)break;for(var pe=Math.min(ge,ce-2),oe=0,ne=0;ne<pe;++ne){var xe=Te-ge+ne&32767,me=D[xe],je=xe-me&32767;je>oe&&(oe=je,K=xe)}}}B=K,K=D[B],ge+=B-K&32767}if(z){ye[$e++]=268435456|bd[W]<<18|Y0[z];var qe=bd[W]&31,J=Y0[z]&31;fe+=tf[qe]+nf[J],++we[257+qe],++Pe[J],q=Te+W,++Ee}else ye[$e++]=e[Te],++we[e[Te]]}}for(Te=Math.max(Te,q);Te<u;++Te)ye[$e++]=e[Te],++we[e[Te]];w=Q0(e,m,_,ye,we,Pe,fe,$e,$,Te-$,w),_||(a.r=w&7|m[w/8|0]<<3,w-=7,a.h=U,a.p=D,a.i=Te,a.w=q)}else{for(var Te=a.w||0;Te<u+_;Te+=65535){var te=Te+65535;te>=u&&(m[w/8|0]=_,te=u),w=j1(m,w+1,e.subarray(Te,te))}a.i=u}return F1(f,0,r+tp(w)+o)},U1=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=n.length|0,u=0;u!=a;){for(var f=Math.min(u+2655,a);u<f;++u)o+=r+=n[u];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},ML=function(e,t,n,r,o){if(!o&&(o={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),u=new Jr(a.length+e.length);u.set(a),u.set(e,a.length),e=u,o.w=a.length}return AL(e,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,o)},q1=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},BL=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var o=U1();o.p(t.dictionary),q1(e,2,o.d())}},TL=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&zo(6,"invalid zlib data"),(e[1]>>5&1)==1&&zo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Ld(e,t){t||(t={});var n=U1();n.p(e);var r=ML(e,t,t.dictionary?6:2,4);return BL(r,t),q1(r,r.length-4,n.d()),r}function NL(e,t){return SL(e.subarray(TL(e),-4),{i:2},t,t)}var DL=typeof TextDecoder<"u"&&new TextDecoder,OL=0;try{DL.decode(z1,{stream:!0}),OL=1}catch{}var bn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Uf(){bn.console&&typeof bn.console.log=="function"&&bn.console.log.apply(bn.console,arguments)}var ui={log:Uf,warn:function(e){bn.console&&(typeof bn.console.warn=="function"?bn.console.warn.apply(bn.console,arguments):Uf.call(null,arguments))},error:function(e){bn.console&&(typeof bn.console.error=="function"?bn.console.error.apply(bn.console,arguments):Uf(e))}};function qf(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Hl(r.response,t,n)},r.onerror=function(){ui.error("could not download file")},r.send()}function em(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Jc(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var dc,Cd,Hl=bn.saveAs||((typeof window>"u"?"undefined":oi(window))!=="object"||window!==bn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=bn.URL||bn.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?em(o.href)?qf(e,t,n):Jc(o,o.target="_blank"):Jc(o)):(o.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Jc(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(em(e))qf(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Jc(r)})}else navigator.msSaveOrOpenBlob(function(o,a){return a===void 0?a={autoBom:!1}:oi(a)!=="object"&&(ui.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return qf(e,t,n);var o=e.type==="application/octet-stream",a=/constructor/i.test(bn.HTMLElement)||bn.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&a)&&(typeof FileReader>"u"?"undefined":oi(FileReader))==="object"){var f=new FileReader;f.onloadend=function(){var w=f.result;w=u?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=w:location=w,r=null},f.readAsDataURL(e)}else{var m=bn.URL||bn.webkitURL,_=m.createObjectURL(e);r?r.location=_:location.href=_,r=null,setTimeout(function(){m.revokeObjectURL(_)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $1(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,a=n[r].process,u=o.exec(e);u&&(t=a(u),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var f=this.r.toString(16),m=this.g.toString(16),_=this.b.toString(16);return f.length==1&&(f="0"+f),m.length==1&&(m="0"+m),_.length==1&&(_="0"+_),"#"+f+m+_}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function $f(e,t){var n=e[0],r=e[1],o=e[2],a=e[3];n=$r(n,r,o,a,t[0],7,-680876936),a=$r(a,n,r,o,t[1],12,-389564586),o=$r(o,a,n,r,t[2],17,606105819),r=$r(r,o,a,n,t[3],22,-1044525330),n=$r(n,r,o,a,t[4],7,-176418897),a=$r(a,n,r,o,t[5],12,1200080426),o=$r(o,a,n,r,t[6],17,-1473231341),r=$r(r,o,a,n,t[7],22,-45705983),n=$r(n,r,o,a,t[8],7,1770035416),a=$r(a,n,r,o,t[9],12,-1958414417),o=$r(o,a,n,r,t[10],17,-42063),r=$r(r,o,a,n,t[11],22,-1990404162),n=$r(n,r,o,a,t[12],7,1804603682),a=$r(a,n,r,o,t[13],12,-40341101),o=$r(o,a,n,r,t[14],17,-1502002290),n=Vr(n,r=$r(r,o,a,n,t[15],22,1236535329),o,a,t[1],5,-165796510),a=Vr(a,n,r,o,t[6],9,-1069501632),o=Vr(o,a,n,r,t[11],14,643717713),r=Vr(r,o,a,n,t[0],20,-373897302),n=Vr(n,r,o,a,t[5],5,-701558691),a=Vr(a,n,r,o,t[10],9,38016083),o=Vr(o,a,n,r,t[15],14,-660478335),r=Vr(r,o,a,n,t[4],20,-405537848),n=Vr(n,r,o,a,t[9],5,568446438),a=Vr(a,n,r,o,t[14],9,-1019803690),o=Vr(o,a,n,r,t[3],14,-187363961),r=Vr(r,o,a,n,t[8],20,1163531501),n=Vr(n,r,o,a,t[13],5,-1444681467),a=Vr(a,n,r,o,t[2],9,-51403784),o=Vr(o,a,n,r,t[7],14,1735328473),n=Hr(n,r=Vr(r,o,a,n,t[12],20,-1926607734),o,a,t[5],4,-378558),a=Hr(a,n,r,o,t[8],11,-2022574463),o=Hr(o,a,n,r,t[11],16,1839030562),r=Hr(r,o,a,n,t[14],23,-35309556),n=Hr(n,r,o,a,t[1],4,-1530992060),a=Hr(a,n,r,o,t[4],11,1272893353),o=Hr(o,a,n,r,t[7],16,-155497632),r=Hr(r,o,a,n,t[10],23,-1094730640),n=Hr(n,r,o,a,t[13],4,681279174),a=Hr(a,n,r,o,t[0],11,-358537222),o=Hr(o,a,n,r,t[3],16,-722521979),r=Hr(r,o,a,n,t[6],23,76029189),n=Hr(n,r,o,a,t[9],4,-640364487),a=Hr(a,n,r,o,t[12],11,-421815835),o=Hr(o,a,n,r,t[15],16,530742520),n=Gr(n,r=Hr(r,o,a,n,t[2],23,-995338651),o,a,t[0],6,-198630844),a=Gr(a,n,r,o,t[7],10,1126891415),o=Gr(o,a,n,r,t[14],15,-1416354905),r=Gr(r,o,a,n,t[5],21,-57434055),n=Gr(n,r,o,a,t[12],6,1700485571),a=Gr(a,n,r,o,t[3],10,-1894986606),o=Gr(o,a,n,r,t[10],15,-1051523),r=Gr(r,o,a,n,t[1],21,-2054922799),n=Gr(n,r,o,a,t[8],6,1873313359),a=Gr(a,n,r,o,t[15],10,-30611744),o=Gr(o,a,n,r,t[6],15,-1560198380),r=Gr(r,o,a,n,t[13],21,1309151649),n=Gr(n,r,o,a,t[4],6,-145523070),a=Gr(a,n,r,o,t[11],10,-1120210379),o=Gr(o,a,n,r,t[2],15,718787259),r=Gr(r,o,a,n,t[9],21,-343485551),e[0]=wl(n,e[0]),e[1]=wl(r,e[1]),e[2]=wl(o,e[2]),e[3]=wl(a,e[3])}function rf(e,t,n,r,o,a){return t=wl(wl(t,e),wl(r,a)),wl(t<<o|t>>>32-o,n)}function $r(e,t,n,r,o,a,u){return rf(t&n|~t&r,e,t,o,a,u)}function Vr(e,t,n,r,o,a,u){return rf(t&r|n&~r,e,t,o,a,u)}function Hr(e,t,n,r,o,a,u){return rf(t^n^r,e,t,o,a,u)}function Gr(e,t,n,r,o,a,u){return rf(n^(t|~r),e,t,o,a,u)}function V1(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)$f(r,RL(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for($f(r,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,$f(r,o),r}function RL(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}dc=bn.atob.bind(bn),Cd=bn.btoa.bind(bn);var tm="0123456789abcdef".split("");function IL(e){for(var t="",n=0;n<4;n++)t+=tm[e>>8*n+4&15]+tm[e>>8*n&15];return t}function FL(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function kd(e){return V1(e).map(FL).join("")}var jL=function(e){for(var t=0;t<e.length;t++)e[t]=IL(e[t]);return e.join("")}(V1("hello"))!="5d41402abc4b2a76b9719d911017c592";function wl(e,t){if(jL){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Pd(e,t){var n,r,o,a;if(e!==n){for(var u=(o=e,a=1+(256/e.length>>0),new Array(a+1).join(o)),f=[],m=0;m<256;m++)f[m]=m;var _=0;for(m=0;m<256;m++){var w=f[m];_=(_+w+u.charCodeAt(m))%256,f[m]=f[_],f[_]=w}n=e,r=f}else f=r;var b=t.length,E=0,x=0,F="";for(m=0;m<b;m++)x=(x+(w=f[E=(E+1)%256]))%256,f[E]=f[x],f[x]=w,u=f[(f[E]+f[x])%256],F+=String.fromCharCode(t.charCodeAt(m)^u);return F}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var nm={print:4,modify:8,copy:16,"annot-forms":32};function Lu(e,t,n,r){this.v=1,this.r=2;var o=192;e.forEach(function(f){if(nm.perm!==void 0)throw new Error("Invalid permission: "+f);o+=nm[f]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(t+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,u),this.P=-(1+(255^o)),this.encryptionKey=kd(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Pd(this.encryptionKey,this.padding)}function Cu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[r]}return t}function im(e){if(oi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var a=Math.random().toString(35);return t[n][a]=[r,!!o],a},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var a in t[n]){var u=t[n][a];try{u[0].apply(e,r)}catch(f){bn.console&&ui.error("jsPDF PubSub Error",f.message,f)}u[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Ah(e){if(!(this instanceof Ah))return new Ah(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function H1(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Wl(e,t,n,r,o){if(!(this instanceof Wl))return new Wl(e,t,n,r,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,H1.call(this,r,o)}function ku(e,t,n,r,o){if(!(this instanceof ku))return new ku(e,t,n,r,o);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,H1.call(this,r,o)}function _n(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],a=arguments[3],u=[],f=1,m=16,_="S",w=null;oi(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,o=e.format||o,a=e.compress||e.compressPdf||a,(w=e.encryption||null)!==null&&(w.userPassword=w.userPassword||"",w.ownerPassword=w.ownerPassword||"",w.userPermissions=w.userPermissions||[]),f=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(m=e.floatPrecision),_=e.defaultPathOperation||"S"),u=e.filters||(a===!0?["FlateEncode"]:u),r=r||"mm",n=(""+(n||"P")).toLowerCase();var b=e.putOnlyUsedFonts||!1,E={},x={internal:{},__private__:{}};x.__private__.PubSub=im;var F="1.3",D=x.__private__.getPdfVersion=function(){return F};x.__private__.setPdfVersion=function(C){F=C};var U={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return U};var j=x.__private__.getPageFormat=function(C){return U[C]};o=o||"a4";var Q={COMPAT:"compat",ADVANCED:"advanced"},ie=Q.COMPAT;function ye(){this.saveGraphicsState(),ee(new cn(Rt,0,0,-Rt,0,oo()*Rt).toString()+" cm"),this.setFontSize(this.getFontSize()/Rt),_="n",ie=Q.ADVANCED}function we(){this.restoreGraphicsState(),_="S",ie=Q.COMPAT}var Pe=x.__private__.combineFontStyleAndFontWeight=function(C,Y){if(C=="bold"&&Y=="normal"||C=="bold"&&Y==400||C=="normal"&&Y=="italic"||C=="bold"&&Y=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Y&&(C=Y==400||Y==="normal"?C==="italic"?"italic":"normal":Y!=700&&Y!=="bold"||C!=="normal"?(Y==700?"bold":Y)+""+C:"bold"),C};x.advancedAPI=function(C){var Y=ie===Q.COMPAT;return Y&&ye.call(this),typeof C!="function"||(C(this),Y&&we.call(this)),this},x.compatAPI=function(C){var Y=ie===Q.ADVANCED;return Y&&we.call(this),typeof C!="function"||(C(this),Y&&ye.call(this)),this},x.isAdvancedAPI=function(){return ie===Q.ADVANCED};var Ee,fe=function(C){if(ie!==Q.ADVANCED)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Te=x.roundToPrecision=x.__private__.roundToPrecision=function(C,Y){var De=t||Y;if(isNaN(C)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(De).replace(/0+$/,"")};Ee=x.hpf=x.__private__.hpf=typeof m=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return Te(C,m)}:m==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return Te(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return Te(C,16)};var $e=x.f2=x.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return Te(C,2)},q=x.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return Te(C,3)},$=x.scale=x.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return ie===Q.COMPAT?C*Rt:ie===Q.ADVANCED?C:void 0},Se=function(C){return ie===Q.COMPAT?oo()-C:ie===Q.ADVANCED?C:void 0},B=function(C){return $(Se(C))};x.__private__.setPrecision=x.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(t=parseInt(C,10))};var K,H="00000000000000000000000000000000",ne=x.__private__.getFileId=function(){return H},W=x.__private__.setFileId=function(C){return H=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),w!==null&&(Si=new Lu(w.userPermissions,w.userPassword,w.ownerPassword,H)),H};x.setFileId=function(C){return W(C),this},x.getFileId=function(){return ne()};var z=x.__private__.convertDateToPDFDate=function(C){var Y=C.getTimezoneOffset(),De=Y<0?"+":"-",He=Math.floor(Math.abs(Y/60)),ot=Math.abs(Y%60),yt=[De,se(He),"'",se(ot),"'"].join("");return["D:",C.getFullYear(),se(C.getMonth()+1),se(C.getDate()),se(C.getHours()),se(C.getMinutes()),se(C.getSeconds()),yt].join("")},A=x.__private__.convertPDFDateToDate=function(C){var Y=parseInt(C.substr(2,4),10),De=parseInt(C.substr(6,2),10)-1,He=parseInt(C.substr(8,2),10),ot=parseInt(C.substr(10,2),10),yt=parseInt(C.substr(12,2),10),Ot=parseInt(C.substr(14,2),10);return new Date(Y,De,He,ot,yt,Ot,0)},ge=x.__private__.setCreationDate=function(C){var Y;if(C===void 0&&(C=new Date),C instanceof Date)Y=z(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Y=C}return K=Y},I=x.__private__.getCreationDate=function(C){var Y=K;return C==="jsDate"&&(Y=A(K)),Y};x.setCreationDate=function(C){return ge(C),this},x.getCreationDate=function(C){return I(C)};var G,se=x.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},ce=x.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},pe=0,oe=[],xe=[],me=0,je=[],qe=[],J=!1,te=xe,Ne=function(){pe=0,me=0,xe=[],oe=[],je=[],Qr=Ht(),Br=Ht()};x.__private__.setCustomOutputDestination=function(C){J=!0,te=C};var Ae=function(C){J||(te=C)};x.__private__.resetCustomOutputDestination=function(){J=!1,te=xe};var ee=x.__private__.out=function(C){return C=C.toString(),me+=C.length+1,te.push(C),te},We=x.__private__.write=function(C){return ee(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},et=x.__private__.getArrayBuffer=function(C){for(var Y=C.length,De=new ArrayBuffer(Y),He=new Uint8Array(De);Y--;)He[Y]=C.charCodeAt(Y);return De},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Xe};var Oe=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(C){return Oe=ie===Q.ADVANCED?C/Rt:C,this};var ke,lt=x.__private__.getFontSize=x.getFontSize=function(){return ie===Q.COMPAT?Oe:Oe*Rt},ht=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(C){return ht=C,this},x.__private__.getR2L=x.getR2L=function(){return ht};var it,Fe=x.__private__.setZoomMode=function(C){var Y=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))ke=C;else if(isNaN(C)){if(Y.indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');ke=C}else ke=parseInt(C,10)};x.__private__.getZoomMode=function(){return ke};var Pt,It=x.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');it=C};x.__private__.getPageMode=function(){return it};var Wt=x.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');Pt=C};x.__private__.getLayoutMode=function(){return Pt},x.__private__.setDisplayMode=x.setDisplayMode=function(C,Y,De){return Fe(C),Wt(Y),It(De),this};var Ut={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(C){if(Object.keys(Ut).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ut[C]},x.__private__.getDocumentProperties=function(){return Ut},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(C){for(var Y in Ut)Ut.hasOwnProperty(Y)&&C[Y]&&(Ut[Y]=C[Y]);return this},x.__private__.setDocumentProperty=function(C,Y){if(Object.keys(Ut).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ut[C]=Y};var Xt,Rt,on,dn,ai,Ct={},nn={},Vt=[],ln={},li={},In={},fi={},xi=null,Kn=0,Tt=[],Dt=new im(x),Di=e.hotfixes||[],qn={},ms={},Mr=[],cn=function C(Y,De,He,ot,yt,Ot){if(!(this instanceof C))return new C(Y,De,He,ot,yt,Ot);isNaN(Y)&&(Y=1),isNaN(De)&&(De=0),isNaN(He)&&(He=0),isNaN(ot)&&(ot=1),isNaN(yt)&&(yt=0),isNaN(Ot)&&(Ot=0),this._matrix=[Y,De,He,ot,yt,Ot]};Object.defineProperty(cn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(cn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(cn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(cn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(cn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(cn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(cn.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(cn.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(cn.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(cn.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(cn.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(cn.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(cn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(cn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(cn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(cn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),cn.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ee).join(C)},cn.prototype.multiply=function(C){var Y=C.sx*this.sx+C.shy*this.shx,De=C.sx*this.shy+C.shy*this.sy,He=C.shx*this.sx+C.sy*this.shx,ot=C.shx*this.shy+C.sy*this.sy,yt=C.tx*this.sx+C.ty*this.shx+this.tx,Ot=C.tx*this.shy+C.ty*this.sy+this.ty;return new cn(Y,De,He,ot,yt,Ot)},cn.prototype.decompose=function(){var C=this.sx,Y=this.shy,De=this.shx,He=this.sy,ot=this.tx,yt=this.ty,Ot=Math.sqrt(C*C+Y*Y),Gt=(C/=Ot)*De+(Y/=Ot)*He;De-=C*Gt,He-=Y*Gt;var Jt=Math.sqrt(De*De+He*He);return Gt/=Jt,C*(He/=Jt)<Y*(De/=Jt)&&(C=-C,Y=-Y,Gt=-Gt,Ot=-Ot),{scale:new cn(Ot,0,0,Jt,0,0),translate:new cn(1,0,0,1,ot,yt),rotate:new cn(C,Y,-Y,C,0,0),skew:new cn(1,0,Gt,1,0,0)}},cn.prototype.toString=function(C){return this.join(" ")},cn.prototype.inversed=function(){var C=this.sx,Y=this.shy,De=this.shx,He=this.sy,ot=this.tx,yt=this.ty,Ot=1/(C*He-Y*De),Gt=He*Ot,Jt=-Y*Ot,sn=-De*Ot,vn=C*Ot;return new cn(Gt,Jt,sn,vn,-Gt*ot-sn*yt,-Jt*ot-vn*yt)},cn.prototype.applyToPoint=function(C){var Y=C.x*this.sx+C.y*this.shx+this.tx,De=C.x*this.shy+C.y*this.sy+this.ty;return new To(Y,De)},cn.prototype.applyToRectangle=function(C){var Y=this.applyToPoint(C),De=this.applyToPoint(new To(C.x+C.w,C.y+C.h));return new Rr(Y.x,Y.y,De.x-Y.x,De.y-Y.y)},cn.prototype.clone=function(){var C=this.sx,Y=this.shy,De=this.shx,He=this.sy,ot=this.tx,yt=this.ty;return new cn(C,Y,De,He,ot,yt)},x.Matrix=cn;var Xr=x.matrixMult=function(C,Y){return Y.multiply(C)},gs=new cn(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=gs;var cr=function(C,Y){if(!li[C]){var De=(Y instanceof Wl?"Sh":"P")+(Object.keys(ln).length+1).toString(10);Y.id=De,li[C]=De,ln[De]=Y,Dt.publish("addPattern",Y)}};x.ShadingPattern=Wl,x.TilingPattern=ku,x.addShadingPattern=function(C,Y){return fe("addShadingPattern()"),cr(C,Y),this},x.beginTilingPattern=function(C){fe("beginTilingPattern()"),Ma(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},x.endTilingPattern=function(C,Y){fe("endTilingPattern()"),Y.stream=qe[G].join(`
`),cr(C,Y),Dt.publish("endTilingPattern",Y),Mr.pop().restore()};var Vn=x.__private__.newObject=function(){var C=Ht();return hr(C,!0),C},Ht=x.__private__.newObjectDeferred=function(){return pe++,oe[pe]=function(){return me},pe},hr=function(C,Y){return Y=typeof Y=="boolean"&&Y,oe[C]=me,Y&&ee(C+" 0 obj"),C},wo=x.__private__.newAdditionalObject=function(){var C={objId:Ht(),content:""};return je.push(C),C},Qr=Ht(),Br=Ht(),Lr=x.__private__.decodeColorString=function(C){var Y=C.split(" ");if(Y.length!==2||Y[1]!=="g"&&Y[1]!=="G")Y.length===5&&(Y[4]==="k"||Y[4]==="K")&&(Y=[(1-Y[0])*(1-Y[3]),(1-Y[1])*(1-Y[3]),(1-Y[2])*(1-Y[3]),"r"]);else{var De=parseFloat(Y[0]);Y=[De,De,De,"r"]}for(var He="#",ot=0;ot<3;ot++)He+=("0"+Math.floor(255*parseFloat(Y[ot])).toString(16)).slice(-2);return He},Tr=x.__private__.encodeColorString=function(C){var Y;typeof C=="string"&&(C={ch1:C});var De=C.ch1,He=C.ch2,ot=C.ch3,yt=C.ch4,Ot=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof De=="string"&&De.charAt(0)!=="#"){var Gt=new $1(De);if(Gt.ok)De=Gt.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if(typeof De=="string"&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),typeof De=="string"&&/^#[0-9A-Fa-f]{6}$/.test(De)){var Jt=parseInt(De.substr(1),16);De=Jt>>16&255,He=Jt>>8&255,ot=255&Jt}if(He===void 0||yt===void 0&&De===He&&He===ot)if(typeof De=="string")Y=De+" "+Ot[0];else switch(C.precision){case 2:Y=$e(De/255)+" "+Ot[0];break;case 3:default:Y=q(De/255)+" "+Ot[0]}else if(yt===void 0||oi(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return Y=["1.","1.","1.",Ot[1]].join(" ");if(typeof De=="string")Y=[De,He,ot,Ot[1]].join(" ");else switch(C.precision){case 2:Y=[$e(De/255),$e(He/255),$e(ot/255),Ot[1]].join(" ");break;default:case 3:Y=[q(De/255),q(He/255),q(ot/255),Ot[1]].join(" ")}}else if(typeof De=="string")Y=[De,He,ot,yt,Ot[2]].join(" ");else switch(C.precision){case 2:Y=[$e(De),$e(He),$e(ot),$e(yt),Ot[2]].join(" ");break;case 3:default:Y=[q(De),q(He),q(ot),q(yt),Ot[2]].join(" ")}return Y},tr=x.__private__.getFilters=function(){return u},Cr=x.__private__.putStream=function(C){var Y=(C=C||{}).data||"",De=C.filters||tr(),He=C.alreadyAppliedFilters||[],ot=C.addLength1||!1,yt=Y.length,Ot=C.objectId,Gt=function(Ai){return Ai};if(w!==null&&Ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");w!==null&&(Gt=Si.encryptor(Ot,0));var Jt={};De===!0&&(De=["FlateEncode"]);var sn=C.additionalKeyValues||[],vn=(Jt=_n.API.processDataByFilters!==void 0?_n.API.processDataByFilters(Y,De):{data:Y,reverseChain:[]}).reverseChain+(Array.isArray(He)?He.join(" "):He.toString());if(Jt.data.length!==0&&(sn.push({key:"Length",value:Jt.data.length}),ot===!0&&sn.push({key:"Length1",value:yt})),vn.length!=0)if(vn.split("/").length-1==1)sn.push({key:"Filter",value:vn});else{sn.push({key:"Filter",value:"["+vn+"]"});for(var Tn=0;Tn<sn.length;Tn+=1)if(sn[Tn].key==="DecodeParms"){for(var si=[],jn=0;jn<Jt.reverseChain.split("/").length-1;jn+=1)si.push("null");si.push(sn[Tn].value),sn[Tn].value="["+si.join(" ")+"]"}}ee("<<");for(var Hn=0;Hn<sn.length;Hn++)ee("/"+sn[Hn].key+" "+sn[Hn].value);ee(">>"),Jt.data.length!==0&&(ee("stream"),ee(Gt(Jt.data)),ee("endstream"))},vs=x.__private__.putPage=function(C){var Y=C.number,De=C.data,He=C.objId,ot=C.contentsObjId;hr(He,!0),ee("<</Type /Page"),ee("/Parent "+C.rootDictionaryObjId+" 0 R"),ee("/Resources "+C.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(Ee(C.mediaBox.bottomLeftX))+" "+parseFloat(Ee(C.mediaBox.bottomLeftY))+" "+Ee(C.mediaBox.topRightX)+" "+Ee(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&ee("/CropBox ["+Ee(C.cropBox.bottomLeftX)+" "+Ee(C.cropBox.bottomLeftY)+" "+Ee(C.cropBox.topRightX)+" "+Ee(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&ee("/BleedBox ["+Ee(C.bleedBox.bottomLeftX)+" "+Ee(C.bleedBox.bottomLeftY)+" "+Ee(C.bleedBox.topRightX)+" "+Ee(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&ee("/TrimBox ["+Ee(C.trimBox.bottomLeftX)+" "+Ee(C.trimBox.bottomLeftY)+" "+Ee(C.trimBox.topRightX)+" "+Ee(C.trimBox.topRightY)+"]"),C.artBox!==null&&ee("/ArtBox ["+Ee(C.artBox.bottomLeftX)+" "+Ee(C.artBox.bottomLeftY)+" "+Ee(C.artBox.topRightX)+" "+Ee(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&ee("/UserUnit "+C.userUnit),Dt.publish("putPage",{objId:He,pageContext:Tt[Y],pageNumber:Y,page:De}),ee("/Contents "+ot+" 0 R"),ee(">>"),ee("endobj");var yt=De.join(`
`);return ie===Q.ADVANCED&&(yt+=`
Q`),hr(ot,!0),Cr({data:yt,filters:tr(),objectId:ot}),ee("endobj"),He},xo=x.__private__.putPages=function(){var C,Y,De=[];for(C=1;C<=Kn;C++)Tt[C].objId=Ht(),Tt[C].contentsObjId=Ht();for(C=1;C<=Kn;C++)De.push(vs({number:C,data:qe[C],objId:Tt[C].objId,contentsObjId:Tt[C].contentsObjId,mediaBox:Tt[C].mediaBox,cropBox:Tt[C].cropBox,bleedBox:Tt[C].bleedBox,trimBox:Tt[C].trimBox,artBox:Tt[C].artBox,userUnit:Tt[C].userUnit,rootDictionaryObjId:Qr,resourceDictionaryObjId:Br}));hr(Qr,!0),ee("<</Type /Pages");var He="/Kids [";for(Y=0;Y<Kn;Y++)He+=De[Y]+" 0 R ";ee(He+"]"),ee("/Count "+Kn),ee(">>"),ee("endobj"),Dt.publish("postPutPages")},Zo=function(C){Dt.publish("putFont",{font:C,out:ee,newObject:Vn,putStream:Cr}),C.isAlreadyPutted!==!0&&(C.objectNumber=Vn(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Cu(C.postScriptName)),ee("/Subtype /Type1"),typeof C.encoding=="string"&&ee("/Encoding /"+C.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},Ko=function(){for(var C in Ct)Ct.hasOwnProperty(C)&&(b===!1||b===!0&&E.hasOwnProperty(C))&&Zo(Ct[C])},Ds=function(C){C.objectNumber=Vn();var Y=[];Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Form"}),Y.push({key:"BBox",value:"["+[Ee(C.x),Ee(C.y),Ee(C.x+C.width),Ee(C.y+C.height)].join(" ")+"]"}),Y.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var De=C.pages[1].join(`
`);Cr({data:De,additionalKeyValues:Y,objectId:C.objectNumber}),ee("endobj")},Ys=function(){for(var C in qn)qn.hasOwnProperty(C)&&Ds(qn[C])},Lo=function(C,Y){var De,He=[],ot=1/(Y-1);for(De=0;De<1;De+=ot)He.push(De);if(He.push(1),C[0].offset!=0){var yt={offset:0,color:C[0].color};C.unshift(yt)}if(C[C.length-1].offset!=1){var Ot={offset:1,color:C[C.length-1].color};C.push(Ot)}for(var Gt="",Jt=0,sn=0;sn<He.length;sn++){for(De=He[sn];De>C[Jt+1].offset;)Jt++;var vn=C[Jt].offset,Tn=(De-vn)/(C[Jt+1].offset-vn),si=C[Jt].color,jn=C[Jt+1].color;Gt+=ce(Math.round((1-Tn)*si[0]+Tn*jn[0]).toString(16))+ce(Math.round((1-Tn)*si[1]+Tn*jn[1]).toString(16))+ce(Math.round((1-Tn)*si[2]+Tn*jn[2]).toString(16))}return Gt.trim()},Ml=function(C,Y){Y||(Y=21);var De=Vn(),He=Lo(C.colors,Y),ot=[];ot.push({key:"FunctionType",value:"0"}),ot.push({key:"Domain",value:"[0.0 1.0]"}),ot.push({key:"Size",value:"["+Y+"]"}),ot.push({key:"BitsPerSample",value:"8"}),ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cr({data:He,additionalKeyValues:ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),ee("endobj"),C.objectNumber=Vn(),ee("<< /ShadingType "+C.type),ee("/ColorSpace /DeviceRGB");var yt="/Coords ["+Ee(parseFloat(C.coords[0]))+" "+Ee(parseFloat(C.coords[1]))+" ";C.type===2?yt+=Ee(parseFloat(C.coords[2]))+" "+Ee(parseFloat(C.coords[3])):yt+=Ee(parseFloat(C.coords[2]))+" "+Ee(parseFloat(C.coords[3]))+" "+Ee(parseFloat(C.coords[4]))+" "+Ee(parseFloat(C.coords[5])),ee(yt+="]"),C.matrix&&ee("/Matrix ["+C.matrix.toString()+"]"),ee("/Function "+De+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},Bl=function(C,Y){var De=Ht(),He=Vn();Y.push({resourcesOid:De,objectOid:He}),C.objectNumber=He;var ot=[];ot.push({key:"Type",value:"/Pattern"}),ot.push({key:"PatternType",value:"1"}),ot.push({key:"PaintType",value:"1"}),ot.push({key:"TilingType",value:"1"}),ot.push({key:"BBox",value:"["+C.boundingBox.map(Ee).join(" ")+"]"}),ot.push({key:"XStep",value:Ee(C.xStep)}),ot.push({key:"YStep",value:Ee(C.yStep)}),ot.push({key:"Resources",value:De+" 0 R"}),C.matrix&&ot.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),Cr({data:C.stream,additionalKeyValues:ot,objectId:C.objectNumber}),ee("endobj")},Jo=function(C){var Y;for(Y in ln)ln.hasOwnProperty(Y)&&(ln[Y]instanceof Wl?Ml(ln[Y]):ln[Y]instanceof ku&&Bl(ln[Y],C))},Ka=function(C){for(var Y in C.objectNumber=Vn(),ee("<<"),C)switch(Y){case"opacity":ee("/ca "+$e(C[Y]));break;case"stroke-opacity":ee("/CA "+$e(C[Y]))}ee(">>"),ee("endobj")},Tl=function(){var C;for(C in In)In.hasOwnProperty(C)&&Ka(In[C])},Co=function(){for(var C in ee("/XObject <<"),qn)qn.hasOwnProperty(C)&&qn[C].objectNumber>=0&&ee("/"+C+" "+qn[C].objectNumber+" 0 R");Dt.publish("putXobjectDict"),ee(">>")},ko=function(){Si.oid=Vn(),ee("<<"),ee("/Filter /Standard"),ee("/V "+Si.v),ee("/R "+Si.r),ee("/U <"+Si.toHexString(Si.U)+">"),ee("/O <"+Si.toHexString(Si.O)+">"),ee("/P "+Si.P),ee(">>"),ee("endobj")},xa=function(){for(var C in ee("/Font <<"),Ct)Ct.hasOwnProperty(C)&&(b===!1||b===!0&&E.hasOwnProperty(C))&&ee("/"+C+" "+Ct[C].objectNumber+" 0 R");ee(">>")},Ja=function(){if(Object.keys(ln).length>0){for(var C in ee("/Shading <<"),ln)ln.hasOwnProperty(C)&&ln[C]instanceof Wl&&ln[C].objectNumber>=0&&ee("/"+C+" "+ln[C].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),ee(">>")}},kr=function(C){if(Object.keys(ln).length>0){for(var Y in ee("/Pattern <<"),ln)ln.hasOwnProperty(Y)&&ln[Y]instanceof x.TilingPattern&&ln[Y].objectNumber>=0&&ln[Y].objectNumber<C&&ee("/"+Y+" "+ln[Y].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),ee(">>")}},Fn=function(){if(Object.keys(In).length>0){var C;for(C in ee("/ExtGState <<"),In)In.hasOwnProperty(C)&&In[C].objectNumber>=0&&ee("/"+C+" "+In[C].objectNumber+" 0 R");Dt.publish("putGStateDict"),ee(">>")}},wn=function(C){hr(C.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),xa(),Ja(),kr(C.objectOid),Fn(),Co(),ee(">>"),ee("endobj")},Xs=function(){var C=[];Ko(),Tl(),Ys(),Jo(C),Dt.publish("putResources"),C.forEach(wn),wn({resourcesOid:Br,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources")},Os=function(){Dt.publish("putAdditionalObjects");for(var C=0;C<je.length;C++){var Y=je[C];hr(Y.objId,!0),ee(Y.content),ee("endobj")}Dt.publish("postPutAdditionalObjects")},_s=function(C){nn[C.fontName]=nn[C.fontName]||{},nn[C.fontName][C.fontStyle]=C.id},Po=function(C,Y,De,He,ot){var yt={id:"F"+(Object.keys(Ct).length+1).toString(10),postScriptName:C,fontName:Y,fontStyle:De,encoding:He,isStandardFont:ot||!1,metadata:{}};return Dt.publish("addFont",{font:yt,instance:this}),Ct[yt.id]=yt,_s(yt),yt.id},Cn=function(C){for(var Y=0,De=Xe.length;Y<De;Y++){var He=Po.call(this,C[Y][0],C[Y][1],C[Y][2],Xe[Y][3],!0);b===!1&&(E[He]=!0);var ot=C[Y][0].split("-");_s({id:He,fontName:ot[0],fontStyle:ot[1]||""})}Dt.publish("addFonts",{fonts:Ct,dictionary:nn})},zn=function(C){return C.foo=function(){try{return C.apply(this,arguments)}catch(He){var Y=He.stack||"";~Y.indexOf(" at ")&&(Y=Y.split(" at ")[1]);var De="Error in function "+Y.split(`
`)[0].split("<")[0]+": "+He.message;if(!bn.console)throw new Error(De);bn.console.error(De,He),bn.alert&&alert(De)}},C.foo.bar=C,C.foo},Qs=function(C,Y){var De,He,ot,yt,Ot,Gt,Jt,sn,vn;if(ot=(Y=Y||{}).sourceEncoding||"Unicode",Ot=Y.outputEncoding,(Y.autoencode||Ot)&&Ct[Xt].metadata&&Ct[Xt].metadata[ot]&&Ct[Xt].metadata[ot].encoding&&(yt=Ct[Xt].metadata[ot].encoding,!Ot&&Ct[Xt].encoding&&(Ot=Ct[Xt].encoding),!Ot&&yt.codePages&&(Ot=yt.codePages[0]),typeof Ot=="string"&&(Ot=yt[Ot]),Ot)){for(Jt=!1,Gt=[],De=0,He=C.length;De<He;De++)(sn=Ot[C.charCodeAt(De)])?Gt.push(String.fromCharCode(sn)):Gt.push(C[De]),Gt[De].charCodeAt(0)>>8&&(Jt=!0);C=Gt.join("")}for(De=C.length;Jt===void 0&&De!==0;)C.charCodeAt(De-1)>>8&&(Jt=!0),De--;if(!Jt)return C;for(Gt=Y.noBOM?[]:[254,255],De=0,He=C.length;De<He;De++){if((vn=(sn=C.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+C+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Gt.push(vn),Gt.push(sn-(vn<<8))}return String.fromCharCode.apply(void 0,Gt)},Fi=x.__private__.pdfEscape=x.pdfEscape=function(C,Y){return Qs(C,Y).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zi=x.__private__.beginPage=function(C){qe[++Kn]=[],Tt[Kn]={objId:0,contentsObjId:0,userUnit:Number(f),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},ys(Kn),Ae(qe[G])},Ya=function(C,Y){var De,He,ot;switch(n=Y||n,typeof C=="string"&&(De=j(C.toLowerCase()),Array.isArray(De)&&(He=De[0],ot=De[1])),Array.isArray(C)&&(He=C[0]*Rt,ot=C[1]*Rt),isNaN(He)&&(He=o[0],ot=o[1]),(He>14400||ot>14400)&&(ui.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),He=Math.min(14400,He),ot=Math.min(14400,ot)),o=[He,ot],n.substr(0,1)){case"l":ot>He&&(o=[ot,He]);break;case"p":He>ot&&(o=[ot,He])}Zi(o),Mo(ta),ee(fr),ra!==0&&ee(ra+" J"),Ei!==0&&ee(Ei+" j"),Dt.publish("addPage",{pageNumber:Kn})},Yo=function(C){C>0&&C<=Kn&&(qe.splice(C,1),Tt.splice(C,1),Kn--,G>Kn&&(G=Kn),this.setPage(G))},ys=function(C){C>0&&C<=Kn&&(G=C)},di=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return qe.length-1},bs=function(C,Y,De){var He,ot=void 0;return De=De||{},C=C!==void 0?C:Ct[Xt].fontName,Y=Y!==void 0?Y:Ct[Xt].fontStyle,He=C.toLowerCase(),nn[He]!==void 0&&nn[He][Y]!==void 0?ot=nn[He][Y]:nn[C]!==void 0&&nn[C][Y]!==void 0?ot=nn[C][Y]:De.disableWarning===!1&&ui.warn("Unable to look up font label for font '"+C+"', '"+Y+"'. Refer to getFontList() for available fonts."),ot||De.noFallback||(ot=nn.times[Y])==null&&(ot=nn.times.normal),ot},So=x.__private__.putInfo=function(){var C=Vn(),Y=function(He){return He};for(var De in w!==null&&(Y=Si.encryptor(C,0)),ee("<<"),ee("/Producer ("+Fi(Y("jsPDF "+_n.version))+")"),Ut)Ut.hasOwnProperty(De)&&Ut[De]&&ee("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+Fi(Y(Ut[De]))+")");ee("/CreationDate ("+Fi(Y(K))+")"),ee(">>"),ee("endobj")},Rs=x.__private__.putCatalog=function(C){var Y=(C=C||{}).rootDictionaryObjId||Qr;switch(Vn(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+Y+" 0 R"),ke||(ke="fullwidth"),ke){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+ke;De.substr(De.length-1)==="%"&&(ke=parseInt(ke)/100),typeof ke=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+$e(ke)+"]")}switch(Pt||(Pt="continuous"),Pt){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}it&&ee("/PageMode /"+it),Dt.publish("putCatalog"),ee(">>"),ee("endobj")},La=x.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(pe+1)),ee("/Root "+pe+" 0 R"),ee("/Info "+(pe-1)+" 0 R"),w!==null&&ee("/Encrypt "+Si.oid+" 0 R"),ee("/ID [ <"+H+"> <"+H+"> ]"),ee(">>")},eo=x.__private__.putHeader=function(){ee("%PDF-"+F),ee("%ºß¬à")},Ca=x.__private__.putXRef=function(){var C="0000000000";ee("xref"),ee("0 "+(pe+1)),ee("0000000000 65535 f ");for(var Y=1;Y<=pe;Y++)typeof oe[Y]=="function"?ee((C+oe[Y]()).slice(-10)+" 00000 n "):oe[Y]!==void 0?ee((C+oe[Y]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},es=x.__private__.buildDocument=function(){Ne(),Ae(xe),Dt.publish("buildDocument"),eo(),xo(),Os(),Xs(),w!==null&&ko(),So(),Rs();var C=me;return Ca(),La(),ee("startxref"),ee(""+C),ee("%%EOF"),Ae(qe[G]),xe.join(`
`)},Is=x.__private__.getBlob=function(C){return new Blob([et(C)],{type:"application/pdf"})},to=x.output=x.__private__.output=zn(function(C,Y){switch(typeof(Y=Y||{})=="string"?Y={filename:Y}:Y.filename=Y.filename||"generated.pdf",C){case void 0:return es();case"save":x.save(Y.filename);break;case"arraybuffer":return et(es());case"blob":return Is(es());case"bloburi":case"bloburl":if(bn.URL!==void 0&&typeof bn.URL.createObjectURL=="function")return bn.URL&&bn.URL.createObjectURL(Is(es()))||void 0;ui.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",He=es();try{De=Cd(He)}catch{De=Cd(unescape(encodeURIComponent(He)))}return"data:application/pdf;filename="+Y.filename+";base64,"+De;case"pdfobjectnewwindow":if(Object.prototype.toString.call(bn)==="[object Window]"){var ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Y.pdfObjectUrl&&(ot=Y.pdfObjectUrl,yt="");var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ot+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Y)+");<\/script></body></html>",Gt=bn.open();return Gt!==null&&Gt.document.write(Ot),Gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(bn)==="[object Window]"){var Jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Y.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Y.filename+'" width="500px" height="400px" /></body></html>',sn=bn.open();if(sn!==null){sn.document.write(Jt);var vn=this;sn.document.documentElement.querySelector("#pdfViewer").onload=function(){sn.document.title=Y.filename,sn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(vn.output("bloburl"))}}return sn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(bn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Y)+'"></iframe></body></html>',si=bn.open();if(si!==null&&(si.document.write(Tn),si.document.title=Y.filename),si||typeof safari>"u")return si;break;case"datauri":case"dataurl":return bn.document.location.href=this.output("datauristring",Y);default:return null}}),Xo=function(C){return Array.isArray(Di)===!0&&Di.indexOf(C)>-1};switch(r){case"pt":Rt=1;break;case"mm":Rt=72/25.4;break;case"cm":Rt=72/2.54;break;case"in":Rt=72;break;case"px":Rt=Xo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Rt=12;break;case"ex":Rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Rt=r}var Si=null;ge(),W();var Xa=function(C){return w!==null?Si.encryptor(C,0):function(Y){return Y}},Qo=x.__private__.getPageInfo=x.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[C].objId,pageNumber:C,pageContext:Tt[C]}},yn=x.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Y in Tt)if(Tt[Y].objId===C)break;return Qo(Y)},xn=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:Tt[G].objId,pageNumber:G,pageContext:Tt[G]}};x.addPage=function(){return Ya.apply(this,arguments),this},x.setPage=function(){return ys.apply(this,arguments),Ae.call(this,qe[G]),this},x.insertPage=function(C){return this.addPage(),this.movePage(G,C),this},x.movePage=function(C,Y){var De,He;if(C>Y){De=qe[C],He=Tt[C];for(var ot=C;ot>Y;ot--)qe[ot]=qe[ot-1],Tt[ot]=Tt[ot-1];qe[Y]=De,Tt[Y]=He,this.setPage(Y)}else if(C<Y){De=qe[C],He=Tt[C];for(var yt=C;yt<Y;yt++)qe[yt]=qe[yt+1],Tt[yt]=Tt[yt+1];qe[Y]=De,Tt[Y]=He,this.setPage(Y)}return this},x.deletePage=function(){return Yo.apply(this,arguments),this},x.__private__.text=x.text=function(C,Y,De,He,ot){var yt,Ot,Gt,Jt,sn,vn,Tn,si,jn,Hn=(He=He||{}).scope||this;if(typeof C=="number"&&typeof Y=="number"&&(typeof De=="string"||Array.isArray(De))){var Ai=De;De=Y,Y=C,C=Ai}if(arguments[3]instanceof cn?(fe("The transform parameter of text() with a Matrix value"),jn=ot):(Gt=arguments[4],Jt=arguments[5],oi(Tn=arguments[3])==="object"&&Tn!==null||(typeof Gt=="string"&&(Jt=Gt,Gt=null),typeof Tn=="string"&&(Jt=Tn,Tn=null),typeof Tn=="number"&&(Gt=Tn,Tn=null),He={flags:Tn,angle:Gt,align:Jt})),isNaN(Y)||isNaN(De)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return Hn;var Li="",Sr=!1,Xn=typeof He.lineHeightFactor=="number"?He.lineHeightFactor:Ao,ir=Hn.internal.scaleFactor;function tl(Jn){return Jn=Jn.split("	").join(Array(He.TabLen||9).join(" ")),Fi(Jn,Tn)}function rr(Jn){for(var Gn,yi=Jn.concat(),Qn=[],is=yi.length;is--;)typeof(Gn=yi.shift())=="string"?Qn.push(Gn):Array.isArray(Jn)&&(Gn.length===1||Gn[1]===void 0&&Gn[2]===void 0)?Qn.push(Gn[0]):Qn.push([Gn[0],Gn[1],Gn[2]]);return Qn}function Ta(Jn,Gn){var yi;if(typeof Jn=="string")yi=Gn(Jn)[0];else if(Array.isArray(Jn)){for(var Qn,is,co=Jn.concat(),Ps=[],il=co.length;il--;)typeof(Qn=co.shift())=="string"?Ps.push(Gn(Qn)[0]):Array.isArray(Qn)&&typeof Qn[0]=="string"&&(is=Gn(Qn[0],Qn[1],Qn[2]),Ps.push([is[0],is[1],is[2]]));yi=Ps}return yi}var ts=!1,Na=!0;if(typeof C=="string")ts=!0;else if(Array.isArray(C)){var zs=C.concat();Ot=[];for(var Us,Ci=zs.length;Ci--;)(typeof(Us=zs.shift())!="string"||Array.isArray(Us)&&typeof Us[0]!="string")&&(Na=!1);ts=Na}if(ts===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var aa=Oe/Hn.internal.scaleFactor,dr=aa*(Xn-1);switch(He.baseline){case"bottom":De-=dr;break;case"top":De+=aa-dr;break;case"hanging":De+=aa-2*dr;break;case"middle":De+=aa/2-dr}if((vn=He.maxWidth||0)>0&&(typeof C=="string"?C=Hn.splitTextToSize(C,vn):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Jn,Gn){return Jn.concat(Hn.splitTextToSize(Gn,vn))},[]))),yt={text:C,x:Y,y:De,options:He,mutex:{pdfEscape:Fi,activeFontKey:Xt,fonts:Ct,activeFontSize:Oe}},Dt.publish("preProcessText",yt),C=yt.text,Gt=(He=yt.options).angle,!(jn instanceof cn)&&Gt&&typeof Gt=="number"){Gt*=Math.PI/180,He.rotationDirection===0&&(Gt=-Gt),ie===Q.ADVANCED&&(Gt=-Gt);var sr=Math.cos(Gt),la=Math.sin(Gt);jn=new cn(sr,la,-la,sr,0,0)}else Gt&&Gt instanceof cn&&(jn=Gt);ie!==Q.ADVANCED||jn||(jn=gs),(sn=He.charSpace||ia)!==void 0&&(Li+=Ee($(sn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(si=He.horizontalScale)!==void 0&&(Li+=Ee(100*si)+` Tz
`),He.lang;var Ki=-1,qs=He.renderingMode!==void 0?He.renderingMode:He.stroke,Er=Hn.internal.getCurrentPageInfo().pageContext;switch(qs){case 0:case!1:case"fill":Ki=0;break;case 1:case!0:case"stroke":Ki=1;break;case 2:case"fillThenStroke":Ki=2;break;case 3:case"invisible":Ki=3;break;case 4:case"fillAndAddForClipping":Ki=4;break;case 5:case"strokeAndAddPathForClipping":Ki=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ki=6;break;case 7:case"addToPathForClipping":Ki=7}var nl=Er.usedRenderingMode!==void 0?Er.usedRenderingMode:-1;Ki!==-1?Li+=Ki+` Tr
`:nl!==-1&&(Li+=`0 Tr
`),Ki!==-1&&(Er.usedRenderingMode=Ki),Jt=He.align||"left";var Mi,xs=Oe*Xn,Ir=Hn.internal.pageSize.getWidth(),Do=Ct[Xt];sn=He.charSpace||ia,vn=He.maxWidth||0,Tn=Object.assign({autoencode:!0,noBOM:!0},He.flags);var $s=[],Ls=function(Jn){return Hn.getStringUnitWidth(Jn,{font:Do,charSpace:sn,fontSize:Oe,doKerning:!1})*Oe/ir};if(Object.prototype.toString.call(C)==="[object Array]"){var ji;Ot=rr(C),Jt!=="left"&&(Mi=Ot.map(Ls));var Oi,ns=0;if(Jt==="right"){Y-=Mi[0],C=[],Ci=Ot.length;for(var pr=0;pr<Ci;pr++)pr===0?(Oi=un(Y),ji=nr(De)):(Oi=$(ns-Mi[pr]),ji=-xs),C.push([Ot[pr],Oi,ji]),ns=Mi[pr]}else if(Jt==="center"){Y-=Mi[0]/2,C=[],Ci=Ot.length;for(var Fr=0;Fr<Ci;Fr++)Fr===0?(Oi=un(Y),ji=nr(De)):(Oi=$((ns-Mi[Fr])/2),ji=-xs),C.push([Ot[Fr],Oi,ji]),ns=Mi[Fr]}else if(Jt==="left"){C=[],Ci=Ot.length;for(var Vs=0;Vs<Ci;Vs++)C.push(Ot[Vs])}else if(Jt==="justify"&&Do.encoding==="Identity-H"){C=[],Ci=Ot.length,vn=vn!==0?vn:Ir;for(var jr=0,pi=0;pi<Ci;pi++)if(ji=pi===0?nr(De):-xs,Oi=pi===0?un(Y):jr,pi<Ci-1){var Cs=$((vn-Mi[pi])/(Ot[pi].split(" ").length-1)),or=Ot[pi].split(" ");C.push([or[0]+" ",Oi,ji]),jr=0;for(var Ji=1;Ji<or.length;Ji++){var Oo=(Ls(or[Ji-1]+" "+or[Ji])-Ls(or[Ji]))*ir+Cs;Ji==or.length-1?C.push([or[Ji],Oo,0]):C.push([or[Ji]+" ",Oo,0]),jr-=Oo}}else C.push([Ot[pi],Oi,ji]);C.push(["",jr,0])}else{if(Jt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Ci=Ot.length,vn=vn!==0?vn:Ir,pi=0;pi<Ci;pi++)ji=pi===0?nr(De):-xs,Oi=pi===0?un(Y):0,pi<Ci-1?$s.push(Ee($((vn-Mi[pi])/(Ot[pi].split(" ").length-1)))):$s.push(0),C.push([Ot[pi],Oi,ji])}}var Da=typeof He.R2L=="boolean"?He.R2L:ht;Da===!0&&(C=Ta(C,function(Jn,Gn,yi){return[Jn.split("").reverse().join(""),Gn,yi]})),yt={text:C,x:Y,y:De,options:He,mutex:{pdfEscape:Fi,activeFontKey:Xt,fonts:Ct,activeFontSize:Oe}},Dt.publish("postProcessText",yt),C=yt.text,Sr=yt.mutex.isHex||!1;var Oa=Ct[Xt].encoding;Oa!=="WinAnsiEncoding"&&Oa!=="StandardEncoding"||(C=Ta(C,function(Jn,Gn,yi){return[tl(Jn),Gn,yi]})),Ot=rr(C),C=[];for(var Yi,mr,ao,ks=0,ua=1,lo=Array.isArray(Ot[0])?ua:ks,uo="",Hs=function(Jn,Gn,yi){var Qn="";return yi instanceof cn?(yi=typeof He.angle=="number"?Xr(yi,new cn(1,0,0,1,Jn,Gn)):Xr(new cn(1,0,0,1,Jn,Gn),yi),ie===Q.ADVANCED&&(yi=Xr(new cn(1,0,0,-1,0,0),yi)),Qn=yi.join(" ")+` Tm
`):Qn=Ee(Jn)+" "+Ee(Gn)+` Td
`,Qn},zr=0;zr<Ot.length;zr++){switch(uo="",lo){case ua:ao=(Sr?"<":"(")+Ot[zr][0]+(Sr?">":")"),Yi=parseFloat(Ot[zr][1]),mr=parseFloat(Ot[zr][2]);break;case ks:ao=(Sr?"<":"(")+Ot[zr]+(Sr?">":")"),Yi=un(Y),mr=nr(De)}$s!==void 0&&$s[zr]!==void 0&&(uo=$s[zr]+` Tw
`),zr===0?C.push(uo+Hs(Yi,mr,jn)+ao):lo===ks?C.push(uo+ao):lo===ua&&C.push(uo+Hs(Yi,mr,jn)+ao)}C=lo===ks?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var zi=`BT
/`;return zi+=Xt+" "+Oe+` Tf
`,zi+=Ee(Oe*Xn)+` TL
`,zi+=ws+`
`,zi+=Li,zi+=C,ee(zi+="ET"),E[Xt]=!0,Hn};var Nr=x.__private__.clip=x.clip=function(C){return ee(C==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Nr("evenodd")},x.__private__.discardPath=x.discardPath=function(){return ee("n"),this};var On=x.__private__.isValidStyle=function(C){var Y=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(Y=!0),Y};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(C){return On(C)&&(_=C),this};var ka=x.__private__.getStyle=x.getStyle=function(C){var Y=_;switch(C){case"D":case"S":Y="S";break;case"F":Y="f";break;case"FD":case"DF":Y="B";break;case"f":case"f*":case"B":case"B*":Y=C}return Y},ea=x.close=function(){return ee("h"),this};x.stroke=function(){return ee("S"),this},x.fill=function(C){return no("f",C),this},x.fillEvenOdd=function(C){return no("f*",C),this},x.fillStroke=function(C){return no("B",C),this},x.fillStrokeEvenOdd=function(C){return no("B*",C),this};var no=function(C,Y){oi(Y)==="object"?Pa(Y,C):ee(C)},Dr=function(C){C===null||ie===Q.ADVANCED&&C===void 0||(C=ka(C),ee(C))};function Fs(C,Y,De,He,ot){var yt=new ku(Y||this.boundingBox,De||this.xStep,He||this.yStep,this.gState,ot||this.matrix);yt.stream=this.stream;var Ot=C+"$$"+this.cloneIndex+++"$$";return cr(Ot,yt),yt}var Pa=function(C,Y){var De=li[C.key],He=ln[De];if(He instanceof Wl)ee("q"),ee(Eo(Y)),He.gState&&x.setGState(He.gState),ee(C.matrix.toString()+" cm"),ee("/"+De+" sh"),ee("Q");else if(He instanceof ku){var ot=new cn(1,0,0,-1,0,oo());C.matrix&&(ot=ot.multiply(C.matrix||gs),De=Fs.call(He,C.key,C.boundingBox,C.xStep,C.yStep,ot).id),ee("q"),ee("/Pattern cs"),ee("/"+De+" scn"),He.gState&&x.setGState(He.gState),ee(Y),ee("Q")}},Eo=function(C){switch(C){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},vi=x.moveTo=function(C,Y){return ee(Ee($(C))+" "+Ee(B(Y))+" m"),this},Pr=x.lineTo=function(C,Y){return ee(Ee($(C))+" "+Ee(B(Y))+" l"),this},js=x.curveTo=function(C,Y,De,He,ot,yt){return ee([Ee($(C)),Ee(B(Y)),Ee($(De)),Ee(B(He)),Ee($(ot)),Ee(B(yt)),"c"].join(" ")),this};x.__private__.line=x.line=function(C,Y,De,He,ot){if(isNaN(C)||isNaN(Y)||isNaN(De)||isNaN(He)||!On(ot))throw new Error("Invalid arguments passed to jsPDF.line");return ie===Q.COMPAT?this.lines([[De-C,He-Y]],C,Y,[1,1],ot||"S"):this.lines([[De-C,He-Y]],C,Y,[1,1]).stroke()},x.__private__.lines=x.lines=function(C,Y,De,He,ot,yt){var Ot,Gt,Jt,sn,vn,Tn,si,jn,Hn,Ai,Li,Sr;if(typeof C=="number"&&(Sr=De,De=Y,Y=C,C=Sr),He=He||[1,1],yt=yt||!1,isNaN(Y)||isNaN(De)||!Array.isArray(C)||!Array.isArray(He)||!On(ot)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vi(Y,De),Ot=He[0],Gt=He[1],sn=C.length,Ai=Y,Li=De,Jt=0;Jt<sn;Jt++)(vn=C[Jt]).length===2?(Ai=vn[0]*Ot+Ai,Li=vn[1]*Gt+Li,Pr(Ai,Li)):(Tn=vn[0]*Ot+Ai,si=vn[1]*Gt+Li,jn=vn[2]*Ot+Ai,Hn=vn[3]*Gt+Li,Ai=vn[4]*Ot+Ai,Li=vn[5]*Gt+Li,js(Tn,si,jn,Hn,Ai,Li));return yt&&ea(),Dr(ot),this},x.path=function(C){for(var Y=0;Y<C.length;Y++){var De=C[Y],He=De.c;switch(De.op){case"m":vi(He[0],He[1]);break;case"l":Pr(He[0],He[1]);break;case"c":js.apply(this,He);break;case"h":ea()}}return this},x.__private__.rect=x.rect=function(C,Y,De,He,ot){if(isNaN(C)||isNaN(Y)||isNaN(De)||isNaN(He)||!On(ot))throw new Error("Invalid arguments passed to jsPDF.rect");return ie===Q.COMPAT&&(He=-He),ee([Ee($(C)),Ee(B(Y)),Ee($(De)),Ee($(He)),"re"].join(" ")),Dr(ot),this},x.__private__.triangle=x.triangle=function(C,Y,De,He,ot,yt,Ot){if(isNaN(C)||isNaN(Y)||isNaN(De)||isNaN(He)||isNaN(ot)||isNaN(yt)||!On(Ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-C,He-Y],[ot-De,yt-He],[C-ot,Y-yt]],C,Y,[1,1],Ot,!0),this},x.__private__.roundedRect=x.roundedRect=function(C,Y,De,He,ot,yt,Ot){if(isNaN(C)||isNaN(Y)||isNaN(De)||isNaN(He)||isNaN(ot)||isNaN(yt)||!On(Ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Gt=4/3*(Math.SQRT2-1);return ot=Math.min(ot,.5*De),yt=Math.min(yt,.5*He),this.lines([[De-2*ot,0],[ot*Gt,0,ot,yt-yt*Gt,ot,yt],[0,He-2*yt],[0,yt*Gt,-ot*Gt,yt,-ot,yt],[2*ot-De,0],[-ot*Gt,0,-ot,-yt*Gt,-ot,-yt],[0,2*yt-He],[0,-yt*Gt,ot*Gt,-yt,ot,-yt]],C+ot,Y,[1,1],Ot,!0),this},x.__private__.ellipse=x.ellipse=function(C,Y,De,He,ot){if(isNaN(C)||isNaN(Y)||isNaN(De)||isNaN(He)||!On(ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*De,Ot=4/3*(Math.SQRT2-1)*He;return vi(C+De,Y),js(C+De,Y-Ot,C+yt,Y-He,C,Y-He),js(C-yt,Y-He,C-De,Y-Ot,C-De,Y),js(C-De,Y+Ot,C-yt,Y+He,C,Y+He),js(C+yt,Y+He,C+De,Y+Ot,C+De,Y),Dr(ot),this},x.__private__.circle=x.circle=function(C,Y,De,He){if(isNaN(C)||isNaN(Y)||isNaN(De)||!On(He))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,Y,De,De,He)},x.setFont=function(C,Y,De){return De&&(Y=Pe(Y,De)),Xt=bs(C,Y,{disableWarning:!1}),this};var Qa=x.__private__.getFont=x.getFont=function(){return Ct[bs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var C,Y,De={};for(C in nn)if(nn.hasOwnProperty(C))for(Y in De[C]=[],nn[C])nn[C].hasOwnProperty(Y)&&De[C].push(Y);return De},x.addFont=function(C,Y,De,He,ot){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?ot=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(De=Pe(De,He)),ot=ot||"Identity-H",Po.call(this,C,Y,De,ot)};var Ao,ta=e.lineWidth||.200025,io=x.__private__.getLineWidth=x.getLineWidth=function(){return ta},Mo=x.__private__.setLineWidth=x.setLineWidth=function(C){return ta=C,ee(Ee($(C))+" w"),this};x.__private__.setLineDash=_n.API.setLineDash=_n.API.setLineDashPattern=function(C,Y){if(C=C||[],Y=Y||0,isNaN(Y)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(De){return Ee($(De))}).join(" "),Y=Ee($(Y)),ee("["+C+"] "+Y+" d"),this};var Sa=x.__private__.getLineHeight=x.getLineHeight=function(){return Oe*Ao};x.__private__.getLineHeight=x.getLineHeight=function(){return Oe*Ao};var Bn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(Ao=C),this},Ea=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Ao};Bn(e.lineHeight);var un=x.__private__.getHorizontalCoordinate=function(C){return $(C)},nr=x.__private__.getVerticalCoordinate=function(C){return ie===Q.ADVANCED?C:Tt[G].mediaBox.topRightY-Tt[G].mediaBox.bottomLeftY-$(C)},Bo=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(C){return Ee(un(C))},ro=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(C){return Ee(nr(C))},fr=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Lr(fr)},x.__private__.setStrokeColor=x.setDrawColor=function(C,Y,De,He){return fr=Tr({ch1:C,ch2:Y,ch3:De,ch4:He,pdfColorType:"draw",precision:2}),ee(fr),this};var Aa=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Lr(Aa)},x.__private__.setFillColor=x.setFillColor=function(C,Y,De,He){return Aa=Tr({ch1:C,ch2:Y,ch3:De,ch4:He,pdfColorType:"fill",precision:2}),ee(Aa),this};var ws=e.textColor||"0 g",na=x.__private__.getTextColor=x.getTextColor=function(){return Lr(ws)};x.__private__.setTextColor=x.setTextColor=function(C,Y,De,He){return ws=Tr({ch1:C,ch2:Y,ch3:De,ch4:He,pdfColorType:"text",precision:3}),this};var ia=e.charSpace,Or=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(ia||0)};x.__private__.setCharSpace=x.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ia=C,this};var ra=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(C){var Y=x.CapJoinStyles[C];if(Y===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ra=Y,ee(Y+" J"),this};var Ei=0;x.__private__.setLineJoin=x.setLineJoin=function(C){var Y=x.CapJoinStyles[C];if(Y===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ei=Y,ee(Y+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(Ee($(C))+" M"),this},x.GState=Ah,x.setGState=function(C){(C=typeof C=="string"?In[fi[C]]:el(null,C)).equals(xi)||(ee("/"+C.id+" gs"),xi=C)};var el=function(C,Y){if(!C||!fi[C]){var De=!1;for(var He in In)if(In.hasOwnProperty(He)&&In[He].equals(Y)){De=!0;break}if(De)Y=In[He];else{var ot="GS"+(Object.keys(In).length+1).toString(10);In[ot]=Y,Y.id=ot}return C&&(fi[C]=Y.id),Dt.publish("addGState",Y),Y}};x.addGState=function(C,Y){return el(C,Y),this},x.saveGraphicsState=function(){return ee("q"),Vt.push({key:Xt,size:Oe,color:ws}),this},x.restoreGraphicsState=function(){ee("Q");var C=Vt.pop();return Xt=C.key,Oe=C.size,ws=C.color,xi=null,this},x.setCurrentTransformationMatrix=function(C){return ee(C.toString()+" cm"),this},x.comment=function(C){return ee("#"+C),this};var To=function(C,Y){var De=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(yt){isNaN(yt)||(De=parseFloat(yt))}});var He=Y||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return He},set:function(yt){isNaN(yt)||(He=parseFloat(yt))}});var ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ot},set:function(yt){ot=yt.toString()}}),this},Rr=function(C,Y,De,He){To.call(this,C,Y),this.type="rect";var ot=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ot},set:function(Ot){isNaN(Ot)||(ot=parseFloat(Ot))}});var yt=He||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Ot){isNaN(Ot)||(yt=parseFloat(Ot))}}),this},sa=function(){this.page=Kn,this.currentPage=G,this.pages=qe.slice(0),this.pagesContext=Tt.slice(0),this.x=on,this.y=dn,this.matrix=ai,this.width=so(G),this.height=oo(G),this.outputDestination=te,this.id="",this.objectNumber=-1};sa.prototype.restore=function(){Kn=this.page,G=this.currentPage,Tt=this.pagesContext,qe=this.pages,on=this.x,dn=this.y,ai=this.matrix,No(G,this.width),_i(G,this.height),te=this.outputDestination};var Ma=function(C,Y,De,He,ot){Mr.push(new sa),Kn=G=0,qe=[],on=C,dn=Y,ai=ot,Zi([De,He])},Ba=function(C){if(ms[C])Mr.pop().restore();else{var Y=new sa,De="Xo"+(Object.keys(qn).length+1).toString(10);Y.id=De,ms[C]=De,qn[De]=Y,Dt.publish("addFormObject",Y),Mr.pop().restore()}};for(var oa in x.beginFormObject=function(C,Y,De,He,ot){return Ma(C,Y,De,He,ot),this},x.endFormObject=function(C){return Ba(C),this},x.doFormObject=function(C,Y){var De=qn[ms[C]];return ee("q"),ee(Y.toString()+" cm"),ee("/"+De.id+" Do"),ee("Q"),this},x.getFormObject=function(C){var Y=qn[ms[C]];return{x:Y.x,y:Y.y,width:Y.width,height:Y.height,matrix:Y.matrix}},x.save=function(C,Y){return C=C||"generated.pdf",(Y=Y||{}).returnPromise=Y.returnPromise||!1,Y.returnPromise===!1?(Hl(Is(es()),C),typeof Hl.unload=="function"&&bn.setTimeout&&setTimeout(Hl.unload,911),this):new Promise(function(De,He){try{var ot=Hl(Is(es()),C);typeof Hl.unload=="function"&&bn.setTimeout&&setTimeout(Hl.unload,911),De(ot)}catch(yt){He(yt.message)}})},_n.API)_n.API.hasOwnProperty(oa)&&(oa==="events"&&_n.API.events.length?function(C,Y){var De,He,ot;for(ot=Y.length-1;ot!==-1;ot--)De=Y[ot][0],He=Y[ot][1],C.subscribe.apply(C,[De].concat(typeof He=="function"?[He]:He))}(Dt,_n.API.events):x[oa]=_n.API[oa]);var so=x.getPageWidth=function(C){return(Tt[C=C||G].mediaBox.topRightX-Tt[C].mediaBox.bottomLeftX)/Rt},No=x.setPageWidth=function(C,Y){Tt[C].mediaBox.topRightX=Y*Rt+Tt[C].mediaBox.bottomLeftX},oo=x.getPageHeight=function(C){return(Tt[C=C||G].mediaBox.topRightY-Tt[C].mediaBox.bottomLeftY)/Rt},_i=x.setPageHeight=function(C,Y){Tt[C].mediaBox.topRightY=Y*Rt+Tt[C].mediaBox.bottomLeftY};return x.internal={pdfEscape:Fi,getStyle:ka,getFont:Qa,getFontSize:lt,getCharSpace:Or,getTextColor:na,getLineHeight:Sa,getLineHeightFactor:Ea,getLineWidth:io,write:We,getHorizontalCoordinate:un,getVerticalCoordinate:nr,getCoordinateString:Bo,getVerticalCoordinateString:ro,collections:{},newObject:Vn,newAdditionalObject:wo,newObjectDeferred:Ht,newObjectDeferredBegin:hr,getFilters:tr,putStream:Cr,events:Dt,scaleFactor:Rt,pageSize:{getWidth:function(){return so(G)},setWidth:function(C){No(G,C)},getHeight:function(){return oo(G)},setHeight:function(C){_i(G,C)}},encryptionOptions:w,encryption:Si,getEncryptor:Xa,output:to,getNumberOfPages:di,pages:qe,out:ee,f2:$e,f3:q,getPageInfo:Qo,getPageInfoByObjId:yn,getCurrentPageInfo:xn,getPDFVersion:D,Point:To,Rectangle:Rr,Matrix:cn,hasHotfix:Xo},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return so(G)},set:function(C){No(G,C)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return oo(G)},set:function(C){_i(G,C)},enumerable:!0,configurable:!0}),Cn.call(x,Xe),Xt="F1",Ya(o,n),Dt.publish("initialized"),x}Lu.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Lu.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Lu.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Lu.prototype.processOwnerPassword=function(e,t){return Pd(kd(t).substr(0,5),e)},Lu.prototype.encryptor=function(e,t){var n=kd(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return Pd(n,r)}},Ah.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||oi(e)!==oi(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},_n.API={events:[]},_n.version="3.0.0";var Ii=_n.API,np=1,ou=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_u=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Sn=function(e){return e.toFixed(2)},pl=function(e){return e.toFixed(5)};Ii.__acroform__={};var Ns=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},rm=function(e){return e*np},fa=function(e){var t=new W1,n=en.internal.getHeight(e)||0,r=en.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Sn(r)),Number(Sn(n))],t},zL=Ii.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},UL=Ii.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},qL=Ii.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},qi=Ii.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qL(e,t-1)},$i=Ii.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return zL(e,t-1)},Vi=Ii.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return UL(e,t-1)},$L=Ii.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,o=e[0],a=e[1],u=e[2],f=e[3],m={};return m.lowerLeft_X=n(o)||0,m.lowerLeft_Y=r(a+f)||0,m.upperRight_X=n(o+u)||0,m.upperRight_Y=r(a)||0,[Number(Sn(m.lowerLeft_X)),Number(Sn(m.lowerLeft_Y)),Number(Sn(m.upperRight_X)),Number(Sn(m.upperRight_Y))]},VL=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Sd(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+Sn(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=fa(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},Sd=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function(q){return q.split(`
`)}):o.map(function(q){return[q]});var a=n,u=en.internal.getHeight(e)||0;u=u<0?-u:u;var f=en.internal.getWidth(e)||0;f=f<0?-f:f;var m=function(q,$,Se){if(q+1<o.length){var B=$+" "+o[q+1][0];return Yc(B,e,Se).width<=f-4}return!1};a++;e:for(;a>0;){t="",a--;var _,w,b=Yc("3",e,a).height,E=e.multiline?u-a:(u-b)/2,x=E+=2,F=0,D=0,U=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+Yc(t,e,a=12).width+", FieldWidth:"+f+`
`;break}for(var j="",Q=0,ie=0;ie<o.length;ie++)if(o.hasOwnProperty(ie)){var ye=!1;if(o[ie].length!==1&&U!==o[ie].length-1){if((b+2)*(Q+2)+2>u)continue e;j+=o[ie][U],ye=!0,D=ie,ie--}else{j=(j+=o[ie][U]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var we=parseInt(ie),Pe=m(we,j,a),Ee=ie>=o.length-1;if(Pe&&!Ee){j+=" ",U=0;continue}if(Pe||Ee){if(Ee)D=we;else if(e.multiline&&(b+2)*(Q+2)+2>u)continue e}else{if(!e.multiline||(b+2)*(Q+2)+2>u)continue e;D=we}}for(var fe="",Te=F;Te<=D;Te++){var $e=o[Te];if(e.multiline){if(Te===D){fe+=$e[U]+" ",U=(U+1)%$e.length;continue}if(Te===F){fe+=$e[$e.length-1]+" ";continue}}fe+=$e[0]+" "}switch(fe=fe.substr(fe.length-1)==" "?fe.substr(0,fe.length-1):fe,w=Yc(fe,e,a).width,e.textAlign){case"right":_=f-w-2;break;case"center":_=(f-w)/2;break;case"left":default:_=2}t+=Sn(_)+" "+Sn(x)+` Td
`,t+="("+ou(fe)+`) Tj
`,t+=-Sn(_)+` 0 Td
`,x=-(a+2),w=0,F=ye?D:D+1,Q++,j=""}break}return r.text=t,r.fontSize=a,r},Yc=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},HL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},GL=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},WL=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,o=e[n];t.internal.newObjectDeferredBegin(o.objId,!0),oi(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[r]}},ZL=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Go.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(HL)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");np=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Z1,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];a.objId=void 0,a.hasAnnotation&&GL(a,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,o){var a=!r;for(var u in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var f=r[u],m=[],_=f.Rect;if(f.Rect&&(f.Rect=$L(f.Rect,o)),o.internal.newObjectDeferredBegin(f.objId,!0),f.DA=en.createDefaultAppearanceStream(f),oi(f)==="object"&&typeof f.getKeyValueListForStream=="function"&&(m=f.getKeyValueListForStream()),f.Rect=_,f.hasAppearanceStream&&!f.appearanceStreamContent){var w=VL(f);m.push({key:"AP",value:"<</N "+w+">>"}),o.internal.acroformPlugin.xForms.push(w)}if(f.appearanceStreamContent){var b="";for(var E in f.appearanceStreamContent)if(f.appearanceStreamContent.hasOwnProperty(E)){var x=f.appearanceStreamContent[E];if(b+="/"+E+" ",b+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var u in x)if(x.hasOwnProperty(u)){var F=x[u];typeof F=="function"&&(F=F.call(o,f)),b+="/"+u+" "+F+" ",o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F)}}else typeof(F=x)=="function"&&(F=F.call(o,f)),b+="/"+u+" "+F,o.internal.acroformPlugin.xForms.indexOf(F)>=0||o.internal.acroformPlugin.xForms.push(F);b+=">>"}m.push({key:"AP",value:`<<
`+b+">>"})}o.internal.putStream({additionalKeyValues:m,objectId:f.objId}),o.internal.out("endobj")}a&&WL(o.internal.acroformPlugin.xForms,o)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},G1=Ii.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(u){return u};if(Array.isArray(e)){for(var o="[",a=0;a<e.length;a++)switch(a!==0&&(o+=" "),oi(e[a])){case"boolean":case"number":case"object":o+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),o+="("+ou(r(e[a].toString()))+")"):o+=e[a].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Vf=function(e,t,n){var r=function(o){return o};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+ou(r(e))+")"},ga=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ga.prototype.toString=function(){return this.objId+" 0 R"},ga.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ga.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],o=this[r];o&&(Array.isArray(o)?e.push({key:r,value:G1(o,this.objId,this.scope)}):o instanceof ga?(o.scope=this.scope,e.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:r,value:o}))}return e};var W1=function(){ga.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Ns(W1,ga);var Z1=function(){ga.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ou(n(e))+")"}},set:function(n){e=n}})};Ns(Z1,ga);var Go=function e(){ga.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!qi(t,3)},set:function(j){j?this.F=$i(t,3):this.F=Vi(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');n=j}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(j){r=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(j){r[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(j){r[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(j){r[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(j){r[3]=j}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Mh)return;a="FieldObject"+e.FieldNum++}var j=function(Q){return Q};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+ou(j(a))+")"},set:function(j){a=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(j){a=j}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(j){u=j}});var f="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return f},set:function(j){f=j}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(j){m=j}});var _=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return _===void 0?50/np:_},set:function(j){_=j}});var w="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return w},set:function(j){w=j}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof Mh||this instanceof tu))return Vf(b,this.objId,this.scope)},set:function(j){j=j.toString(),b=j}});var E=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof br?E:Vf(E,this.objId,this.scope)},set:function(j){j=j.toString(),E=this instanceof br?j:j.substr(0,1)==="("?_u(j.substr(1,j.length-2)):_u(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof br?_u(E.substr(1,E.length-1)):E},set:function(j){j=j.toString(),E=this instanceof br?"/"+j:j}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof br?x:Vf(x,this.objId,this.scope)},set:function(j){j=j.toString(),x=this instanceof br?j:j.substr(0,1)==="("?_u(j.substr(1,j.length-2)):_u(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof br?_u(x.substr(1,x.length-1)):x},set:function(j){j=j.toString(),x=this instanceof br?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var F,D=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return D},set:function(j){j=!!j,D=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(F)return F},set:function(j){F=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,1)},set:function(j){j?this.Ff=$i(this.Ff,1):this.Ff=Vi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,2)},set:function(j){j?this.Ff=$i(this.Ff,2):this.Ff=Vi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,3)},set:function(j){j?this.Ff=$i(this.Ff,3):this.Ff=Vi(this.Ff,3)}});var U=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(U!==null)return U},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');U=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(U){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:U=2;break;case"center":case 1:U=1;break;case"left":case 0:default:U=0}}})};Ns(Go,ga);var Mu=function(){Go.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return G1(t,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=function(a,u,f){f||(f=1);for(var m,_=[];m=u.exec(a);)_.push(m[f]);return _}(r,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,18)},set:function(n){n?this.Ff=$i(this.Ff,18):this.Ff=Vi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=$i(this.Ff,19):this.Ff=Vi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,20)},set:function(n){n?(this.Ff=$i(this.Ff,20),t.sort()):this.Ff=Vi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,22)},set:function(n){n?this.Ff=$i(this.Ff,22):this.Ff=Vi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,23)},set:function(n){n?this.Ff=$i(this.Ff,23):this.Ff=Vi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,27)},set:function(n){n?this.Ff=$i(this.Ff,27):this.Ff=Vi(this.Ff,27)}}),this.hasAppearanceStream=!1};Ns(Mu,Go);var Bu=function(){Mu.call(this),this.fontName="helvetica",this.combo=!1};Ns(Bu,Mu);var Tu=function(){Bu.call(this),this.combo=!0};Ns(Tu,Bu);var uh=function(){Tu.call(this),this.edit=!0};Ns(uh,Tu);var br=function(){Go.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,15)},set:function(n){n?this.Ff=$i(this.Ff,15):this.Ff=Vi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,16)},set:function(n){n?this.Ff=$i(this.Ff,16):this.Ff=Vi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,17)},set:function(n){n?this.Ff=$i(this.Ff,17):this.Ff=Vi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,26)},set:function(n){n?this.Ff=$i(this.Ff,26):this.Ff=Vi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,o=[];for(r in o.push("<<"),t)o.push("/"+r+" ("+ou(n(t[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){oi(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Ns(br,Go);var ch=function(){br.call(this),this.pushButton=!0};Ns(ch,br);var Nu=function(){br.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ns(Nu,br);var Mh=function(){var e,t;Go.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(f){return f};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,u=[];for(a in u.push("<<"),r)u.push("/"+a+" ("+ou(o(r[a]))+")");return u.push(">>"),u.join(`
`)},set:function(o){oi(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=en.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ns(Mh,Go),Nu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Nu.prototype.createOption=function(e){var t=new Mh;return t.Parent=this,t.optionName=e,this.Kids.push(t),KL.call(this.scope,t),t};var hh=function(){br.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=en.CheckBox.createAppearanceStream()};Ns(hh,br);var tu=function(){Go.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,13)},set:function(t){t?this.Ff=$i(this.Ff,13):this.Ff=Vi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,21)},set:function(t){t?this.Ff=$i(this.Ff,21):this.Ff=Vi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,23)},set:function(t){t?this.Ff=$i(this.Ff,23):this.Ff=Vi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,24)},set:function(t){t?this.Ff=$i(this.Ff,24):this.Ff=Vi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,25)},set:function(t){t?this.Ff=$i(this.Ff,25):this.Ff=Vi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,26)},set:function(t){t?this.Ff=$i(this.Ff,26):this.Ff=Vi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ns(tu,Go);var fh=function(){tu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!qi(this.Ff,14)},set:function(e){e?this.Ff=$i(this.Ff,14):this.Ff=Vi(this.Ff,14)}}),this.password=!0};Ns(fh,tu);var en={CheckBox:{createAppearanceStream:function(){return{N:{On:en.CheckBox.YesNormal},D:{On:en.CheckBox.YesPushDown,Off:en.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),a=Sd(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Sn(en.internal.getWidth(e))+" "+Sn(en.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Sn(a.fontSize)+" Tf "+o),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=fa(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),o=[],a=en.internal.getHeight(e),u=en.internal.getWidth(e),f=Sd(e,e.caption);return o.push("1 g"),o.push("0 0 "+Sn(u)+" "+Sn(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Sn(u-1)+" "+Sn(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Sn(f.fontSize)+" Tf "+r),o.push(f.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Sn(en.internal.getWidth(e))+" "+Sn(en.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:en.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=en.RadioButton.Circle.YesNormal,t.D[e]=en.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=en.internal.getWidth(e)<=en.internal.getHeight(e)?en.internal.getWidth(e)/4:en.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=en.internal.Bezier_C,a=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+pl(en.internal.getWidth(e)/2)+" "+pl(en.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=en.internal.getWidth(e)<=en.internal.getHeight(e)?en.internal.getWidth(e)/4:en.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*en.internal.Bezier_C).toFixed(5)),u=Number((r*en.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pl(en.internal.getWidth(e)/2)+" "+pl(en.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+pl(en.internal.getWidth(e)/2)+" "+pl(en.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),n.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),n.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),n.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=en.internal.getWidth(e)<=en.internal.getHeight(e)?en.internal.getWidth(e)/4:en.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),a=Number((o*en.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+pl(en.internal.getWidth(e)/2)+" "+pl(en.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:en.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=en.RadioButton.Cross.YesNormal,t.D[e]=en.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=fa(e);t.scope=e.scope;var n=[],r=en.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Sn(en.internal.getWidth(e)-2)+" "+Sn(en.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Sn(r.x1.x)+" "+Sn(r.x1.y)+" m"),n.push(Sn(r.x2.x)+" "+Sn(r.x2.y)+" l"),n.push(Sn(r.x4.x)+" "+Sn(r.x4.y)+" m"),n.push(Sn(r.x3.x)+" "+Sn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=en.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Sn(en.internal.getWidth(e))+" "+Sn(en.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Sn(en.internal.getWidth(e)-2)+" "+Sn(en.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Sn(n.x1.x)+" "+Sn(n.x1.y)+" m"),r.push(Sn(n.x2.x)+" "+Sn(n.x2.y)+" l"),r.push(Sn(n.x4.x)+" "+Sn(n.x4.y)+" m"),r.push(Sn(n.x3.x)+" "+Sn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=fa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Sn(en.internal.getWidth(e))+" "+Sn(en.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};en.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=en.internal.getWidth(e),n=en.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},en.internal.getWidth=function(e){var t=0;return oi(e)==="object"&&(t=rm(e.Rect[2])),t},en.internal.getHeight=function(e){var t=0;return oi(e)==="object"&&(t=rm(e.Rect[3])),t};var KL=Ii.addField=function(e){if(ZL(this,e),!(e instanceof Go))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ii.AcroFormChoiceField=Mu,Ii.AcroFormListBox=Bu,Ii.AcroFormComboBox=Tu,Ii.AcroFormEditBox=uh,Ii.AcroFormButton=br,Ii.AcroFormPushButton=ch,Ii.AcroFormRadioButton=Nu,Ii.AcroFormCheckBox=hh,Ii.AcroFormTextField=tu,Ii.AcroFormPasswordField=fh,Ii.AcroFormAppearance=en,Ii.AcroForm={ChoiceField:Mu,ListBox:Bu,ComboBox:Tu,EditBox:uh,Button:br,PushButton:ch,RadioButton:Nu,CheckBox:hh,TextField:tu,PasswordField:fh,Appearance:en},_n.AcroForm={ChoiceField:Mu,ListBox:Bu,ComboBox:Tu,EditBox:uh,Button:br,PushButton:ch,RadioButton:Nu,CheckBox:hh,TextField:tu,PasswordField:fh,Appearance:en};_n.AcroForm;function K1(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(q,$){var Se,B,K,H,ne,W=t;if(($=$||t)==="RGBA"||q.data!==void 0&&q.data instanceof Uint8ClampedArray&&"height"in q&&"width"in q)return"RGBA";if(Pe(q))for(ne in n)for(K=n[ne],Se=0;Se<K.length;Se+=1){for(H=!0,B=0;B<K[Se].length;B+=1)if(K[Se][B]!==void 0&&K[Se][B]!==q[B]){H=!1;break}if(H===!0){W=ne;break}}else for(ne in n)for(K=n[ne],Se=0;Se<K.length;Se+=1){for(H=!0,B=0;B<K[Se].length;B+=1)if(K[Se][B]!==void 0&&K[Se][B]!==q.charCodeAt(B)){H=!1;break}if(H===!0){W=ne;break}}return W===t&&$!==t&&(W=$),W},o=function q($){for(var Se=this.internal.write,B=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);$.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:$.width}),H.push({key:"Height",value:$.height}),$.colorSpace===U.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+($.palette.length/3-1)+" "+("sMask"in $&&$.sMask!==void 0?$.objectId+2:$.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+$.colorSpace}),$.colorSpace===U.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:$.bitsPerComponent}),"decodeParameters"in $&&$.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+$.decodeParameters+">>"}),"transparency"in $&&Array.isArray($.transparency)){for(var ne="",W=0,z=$.transparency.length;W<z;W++)ne+=$.transparency[W]+" "+$.transparency[W]+" ";H.push({key:"Mask",value:"["+ne+"]"})}$.sMask!==void 0&&H.push({key:"SMask",value:$.objectId+1+" 0 R"});var A=$.filter!==void 0?["/"+$.filter]:void 0;if(B({data:$.data,additionalKeyValues:H,alreadyAppliedFilters:A,objectId:$.objectId}),Se("endobj"),"sMask"in $&&$.sMask!==void 0){var ge="/Predictor "+$.predictor+" /Colors 1 /BitsPerComponent "+$.bitsPerComponent+" /Columns "+$.width,I={width:$.width,height:$.height,colorSpace:"DeviceGray",bitsPerComponent:$.bitsPerComponent,decodeParameters:ge,data:$.sMask};"filter"in $&&(I.filter=$.filter),q.call(this,I)}if($.colorSpace===U.INDEXED){var G=this.internal.newObject();B({data:fe(new Uint8Array($.palette)),objectId:G}),Se("endobj")}},a=function(){var q=this.internal.collections.addImage_images;for(var $ in q)o.call(this,q[$])},u=function(){var q,$=this.internal.collections.addImage_images,Se=this.internal.write;for(var B in $)Se("/I"+(q=$[B]).index,q.objectId,"0","R")},f=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",u))},m=function(){var q=this.internal.collections.addImage_images;return f.call(this),q},_=function(){return Object.keys(this.internal.collections.addImage_images).length},w=function(q){return typeof e["process"+q.toUpperCase()]=="function"},b=function(q){return oi(q)==="object"&&q.nodeType===1},E=function(q,$){if(q.nodeName==="IMG"&&q.hasAttribute("src")){var Se=""+q.getAttribute("src");if(Se.indexOf("data:image/")===0)return dc(unescape(Se).split("base64,").pop());var B=e.loadFile(Se,!0);if(B!==void 0)return B}if(q.nodeName==="CANVAS"){if(q.width===0||q.height===0)throw new Error("Given canvas must have data. Canvas width: "+q.width+", height: "+q.height);var K;switch($){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return dc(q.toDataURL(K,1).split("base64,").pop())}},x=function(q){var $=this.internal.collections.addImage_images;if($){for(var Se in $)if(q===$[Se].alias)return $[Se]}},F=function(q,$,Se){return q||$||(q=-96,$=-96),q<0&&(q=-1*Se.width*72/q/this.internal.scaleFactor),$<0&&($=-1*Se.height*72/$/this.internal.scaleFactor),q===0&&(q=$*Se.width/Se.height),$===0&&($=q*Se.height/Se.width),[q,$]},D=function(q,$,Se,B,K,H){var ne=F.call(this,Se,B,K),W=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,A=m.call(this);if(Se=ne[0],B=ne[1],A[K.index]=K,H){H*=Math.PI/180;var ge=Math.cos(H),I=Math.sin(H),G=function(ce){return ce.toFixed(4)},se=[G(ge),G(I),G(-1*I),G(ge),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,W(q),z($+B),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([W(Se),"0","0",W(B),"0","0","cm"].join(" "))):this.internal.write([W(Se),"0","0",W(B),W(q),z($+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},U=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Q=e.__addimage__.sHashCode=function(q){var $,Se,B=0;if(typeof q=="string")for(Se=q.length,$=0;$<Se;$++)B=(B<<5)-B+q.charCodeAt($),B|=0;else if(Pe(q))for(Se=q.byteLength/2,$=0;$<Se;$++)B=(B<<5)-B+q[$],B|=0;return B},ie=e.__addimage__.validateStringAsBase64=function(q){(q=q||"").toString().trim();var $=!0;return q.length===0&&($=!1),q.length%4!=0&&($=!1),/^[A-Za-z0-9+/]+$/.test(q.substr(0,q.length-2))===!1&&($=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(q.substr(-2))===!1&&($=!1),$},ye=e.__addimage__.extractImageFromDataUrl=function(q){var $=(q=q||"").split("base64,"),Se=null;if($.length===2){var B=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec($[0]);Array.isArray(B)&&(Se={mimeType:B[1],charset:B[2],data:$[1]})}return Se},we=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(q){return we()&&q instanceof ArrayBuffer};var Pe=e.__addimage__.isArrayBufferView=function(q){return we()&&typeof Uint32Array<"u"&&(q instanceof Int8Array||q instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Uint16Array||q instanceof Int32Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array)},Ee=e.__addimage__.binaryStringToUint8Array=function(q){for(var $=q.length,Se=new Uint8Array($),B=0;B<$;B++)Se[B]=q.charCodeAt(B);return Se},fe=e.__addimage__.arrayBufferToBinaryString=function(q){for(var $="",Se=Pe(q)?q:new Uint8Array(q),B=0;B<Se.length;B+=8192)$+=String.fromCharCode.apply(null,Se.subarray(B,B+8192));return $};e.addImage=function(){var q,$,Se,B,K,H,ne,W,z;if(typeof arguments[1]=="number"?($=t,Se=arguments[1],B=arguments[2],K=arguments[3],H=arguments[4],ne=arguments[5],W=arguments[6],z=arguments[7]):($=arguments[1],Se=arguments[2],B=arguments[3],K=arguments[4],H=arguments[5],ne=arguments[6],W=arguments[7],z=arguments[8]),oi(q=arguments[0])==="object"&&!b(q)&&"imageData"in q){var A=q;q=A.imageData,$=A.format||$||t,Se=A.x||Se||0,B=A.y||B||0,K=A.w||A.width||K,H=A.h||A.height||H,ne=A.alias||ne,W=A.compression||W,z=A.rotation||A.angle||z}var ge=this.internal.getFilters();if(W===void 0&&ge.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(Se)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var I=Te.call(this,q,$,ne,W);return D.call(this,Se,B,K,H,I,z),this};var Te=function(q,$,Se,B){var K,H,ne;if(typeof q=="string"&&r(q)===t){q=unescape(q);var W=$e(q,!1);(W!==""||(W=e.loadFile(q,!0))!==void 0)&&(q=W)}if(b(q)&&(q=E(q,$)),$=r(q,$),!w($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(((ne=Se)==null||ne.length===0)&&(Se=function(z){return typeof z=="string"||Pe(z)?Q(z):Pe(z.data)?Q(z.data):null}(q)),(K=x.call(this,Se))||(we()&&(q instanceof Uint8Array||$==="RGBA"||(H=q,q=Ee(q))),K=this["process"+$.toUpperCase()](q,_.call(this),Se,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in e.image_compression?z:j.NONE}(B),H)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},$e=e.__addimage__.convertBase64ToBinaryString=function(q,$){var Se;$=typeof $!="boolean"||$;var B,K="";if(typeof q=="string"){B=(Se=ye(q))!==null?Se.data:q;try{K=dc(B)}catch(H){if($)throw ie(B)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return K};e.getImageProperties=function(q){var $,Se,B="";if(b(q)&&(q=E(q)),typeof q=="string"&&r(q)===t&&((B=$e(q,!1))===""&&(B=e.loadFile(q)||""),q=B),Se=r(q),!w(Se))throw new Error("addImage does not support files of type '"+Se+"', please ensure that a plugin for '"+Se+"' support is added.");if(!we()||q instanceof Uint8Array||(q=Ee(q)),!($=this["process"+Se.toUpperCase()](q)))throw new Error("An unknown error occurred whilst processing the image");return $.fileType=Se,$}})(_n.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};_n.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,o,a,u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(n.objId),_=n.pageContext.annotations,w=!1,b=0;b<_.length&&!w;b++)switch((r=_[b]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(w=!0);break;case"reference":case"text":case"freetext":w=!0}if(w!=0){this.internal.write("/Annots [");for(var E=0;E<_.length;E++){r=_[E];var x=this.internal.pdfEscape,F=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var D=this.internal.newAdditionalObject(),U=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(D.objId),Q=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+u(r.bounds.x)+" "+f(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y)+"] ")+"/Contents ("+x(j(r.contents))+")",a+=" /Popup "+U.objId+" 0 R",a+=" /P "+m.objId+" 0 R",a+=" /T ("+x(j(Q))+") >>",D.content=a;var ie=D.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+u(r.bounds.x+30)+" "+f(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+f(r.bounds.y)+"] ")+" /Parent "+ie,r.open&&(a+=" /Open true"),a+=" >>",U.content=a,this.internal.write(D.objId,"0 R",U.objId,"0 R");break;case"freetext":o="/Rect ["+u(r.bounds.x)+" "+f(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y+r.bounds.h)+"] ";var ye=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+x(F(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ye+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var we=this.annotations._nameMap[r.options.name];r.options.pageNumber=we.page,r.options.top=we.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+x(F(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Pe=f(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+Pe+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,o,a,u){var f=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,_=this.internal.getVerticalCoordinateString;f.pageContext.annotations.push({finalBounds:{x:m(n),y:_(r),w:m(n+o),h:_(r+a)},options:u,type:"link"})},e.textWithLink=function(n,r,o,a){var u,f,m=this.getTextWidth(n),_=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){f=a.maxWidth;var w=this.splitTextToSize(n,f).length;u=Math.ceil(_*w)}else f=m,u=_;return this.text(n,r,o,a),o+=.2*_,a.align==="center"&&(r-=m/2),a.align==="right"&&(r-=m),this.link(r,o-_,f,u,a),m},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(_n.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(D){return t[D.charCodeAt(0)]!==void 0},u=e.__arabicParser__.isArabicLetter=function(D){return typeof D=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(D)},f=e.__arabicParser__.isArabicEndLetter=function(D){return u(D)&&a(D)&&t[D.charCodeAt(0)].length<=2},m=e.__arabicParser__.isArabicAlfLetter=function(D){return u(D)&&o.indexOf(D.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(D){return u(D)&&a(D)&&t[D.charCodeAt(0)].length>=1};var _=e.__arabicParser__.arabicLetterHasFinalForm=function(D){return u(D)&&a(D)&&t[D.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(D){return u(D)&&a(D)&&t[D.charCodeAt(0)].length>=3};var w=e.__arabicParser__.arabicLetterHasMedialForm=function(D){return u(D)&&a(D)&&t[D.charCodeAt(0)].length==4},b=e.__arabicParser__.resolveLigatures=function(D){var U=0,j=n,Q="",ie=0;for(U=0;U<D.length;U+=1)j[D.charCodeAt(U)]!==void 0?(ie++,typeof(j=j[D.charCodeAt(U)])=="number"&&(Q+=String.fromCharCode(j),j=n,ie=0),U===D.length-1&&(j=n,Q+=D.charAt(U-(ie-1)),U-=ie-1,ie=0)):(j=n,Q+=D.charAt(U-ie),U-=ie,ie=0);return Q};e.__arabicParser__.isArabicDiacritic=function(D){return D!==void 0&&r[D.charCodeAt(0)]!==void 0};var E=e.__arabicParser__.getCorrectForm=function(D,U,j){return u(D)?a(D)===!1?-1:!_(D)||!u(U)&&!u(j)||!u(j)&&f(U)||f(D)&&!u(U)||f(D)&&m(U)||f(D)&&f(U)?0:w(D)&&u(U)&&!f(U)&&u(j)&&_(j)?3:f(D)||!u(j)?1:2:-1},x=function(D){var U=0,j=0,Q=0,ie="",ye="",we="",Pe=(D=D||"").split("\\s+"),Ee=[];for(U=0;U<Pe.length;U+=1){for(Ee.push(""),j=0;j<Pe[U].length;j+=1)ie=Pe[U][j],ye=Pe[U][j-1],we=Pe[U][j+1],u(ie)?(Q=E(ie,ye,we),Ee[U]+=Q!==-1?String.fromCharCode(t[ie.charCodeAt(0)][Q]):ie):Ee[U]+=ie;Ee[U]=b(Ee[U])}return Ee.join(" ")},F=e.__arabicParser__.processArabic=e.processArabic=function(){var D,U=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(U)){var Q=0;for(j=[],Q=0;Q<U.length;Q+=1)Array.isArray(U[Q])?j.push([x(U[Q][0]),U[Q][1],U[Q][2]]):j.push([x(U[Q])]);D=j}else D=x(U);return typeof arguments[0]=="string"?D:(arguments[0].text=D,arguments[0])};e.events.push(["preProcessText",F])}(_n.API),_n.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(f){n=f}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(f){r=isNaN(f)||Number.isInteger(f)===!1||f<0?150:f,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(f){o=isNaN(f)||Number.isInteger(f)===!1||f<0?300:f,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(f){a=f}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(f){u=f}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(_n.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(D){m=D}});var _=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _},set:function(D){_=D}});var w=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return w},set:function(D){w=D}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(D){b=D}});var E=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return E},set:function(D){E=D}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(D){x=D}});var F=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return F},set:function(D){F=D}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(m){return r.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},e.getTextDimensions=function(m,_){r.call(this);var w=(_=_||{}).fontSize||this.getFontSize(),b=_.font||this.getFont(),E=_.scaleFactor||this.internal.scaleFactor,x=0,F=0,D=0,U=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var j=_.maxWidth;j>0?typeof m=="string"?m=this.splitTextToSize(m,j):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(ie,ye){return ie.concat(U.splitTextToSize(ye,j))},[])):m=Array.isArray(m)?m:[m];for(var Q=0;Q<m.length;Q++)x<(D=this.getStringUnitWidth(m[Q],{font:b})*w)&&(x=D);return x!==0&&(F=m.length),{w:x/=E,h:Math.max((F*w*this.getLineHeightFactor()-w*(this.getLineHeightFactor()-1))/E,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var m=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=e.cell=function(){var m;m=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var _=this.internal.__cell__.lastCell,w=this.internal.__cell__.padding,b=this.internal.__cell__.margins||t,E=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return _.lineNumber!==void 0&&(_.lineNumber===m.lineNumber?(m.x=(_.x||0)+(_.width||0),m.y=_.y||0):_.y+_.height+m.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=b.top,x&&E&&(this.printHeaderRow(m.lineNumber,!0),m.y+=E[0].height)):m.y=_.y+_.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,n===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-w,m.y+w,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+w,{align:"center",baseline:"top",maxWidth:m.width-w-w}):this.text(m.text,m.x+w,m.y+w,{align:"left",baseline:"top",maxWidth:m.width-w-w})),this.internal.__cell__.lastCell=m,this};e.table=function(m,_,w,b,E){if(r.call(this),!w)throw new Error("No data for PDF table.");var x,F,D,U,j=[],Q=[],ie=[],ye={},we={},Pe=[],Ee=[],fe=(E=E||{}).autoSize||!1,Te=E.printHeaders!==!1,$e=E.css&&E.css["font-size"]!==void 0?16*E.css["font-size"]:E.fontSize||12,q=E.margins||Object.assign({width:this.getPageWidth()},t),$=typeof E.padding=="number"?E.padding:3,Se=E.headerBackgroundColor||"#c8c8c8",B=E.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Te,this.internal.__cell__.margins=q,this.internal.__cell__.table_font_size=$e,this.internal.__cell__.padding=$,this.internal.__cell__.headerBackgroundColor=Se,this.internal.__cell__.headerTextColor=B,this.setFontSize($e),b==null)Q=j=Object.keys(w[0]),ie=j.map(function(){return"left"});else if(Array.isArray(b)&&oi(b[0])==="object")for(j=b.map(function(A){return A.name}),Q=b.map(function(A){return A.prompt||A.name||""}),ie=b.map(function(A){return A.align||"left"}),x=0;x<b.length;x+=1)we[b[x].name]=b[x].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(Q=j=b,ie=j.map(function(){return"left"}));if(fe||Array.isArray(b)&&typeof b[0]=="string")for(x=0;x<j.length;x+=1){for(ye[U=j[x]]=w.map(function(A){return A[U]}),this.setFont(void 0,"bold"),Pe.push(this.getTextDimensions(Q[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),F=ye[U],this.setFont(void 0,"normal"),D=0;D<F.length;D+=1)Pe.push(this.getTextDimensions(F[D],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);we[U]=Math.max.apply(null,Pe)+$+$,Pe=[]}if(Te){var K={};for(x=0;x<j.length;x+=1)K[j[x]]={},K[j[x]].text=Q[x],K[j[x]].align=ie[x];var H=f.call(this,K,we);Ee=j.map(function(A){return new a(m,_,we[A],H,K[A].text,void 0,K[A].align)}),this.setTableHeaderRow(Ee),this.printHeaderRow(1,!1)}var ne=b.reduce(function(A,ge){return A[ge.name]=ge.align,A},{});for(x=0;x<w.length;x+=1){"rowStart"in E&&E.rowStart instanceof Function&&E.rowStart({row:x,data:w[x]},this);var W=f.call(this,w[x],we);for(D=0;D<j.length;D+=1){var z=w[x][j[D]];"cellStart"in E&&E.cellStart instanceof Function&&E.cellStart({row:x,col:D,data:z},this),u.call(this,new a(m,_,we[j[D]],W,z,x+2,ne[j[D]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=_,this};var f=function(m,_){var w=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,E=this.internal.scaleFactor;return Object.keys(m).map(function(x){var F=m[x];return this.splitTextToSize(F.hasOwnProperty("text")?F.text:F,_[x]-w-w)},this).map(function(x){return this.getLineHeightFactor()*x.length*b/E+w+w},this).reduce(function(x,F){return Math.max(x,F)},0)};e.setTableHeaderRow=function(m){r.call(this),this.internal.__cell__.tableHeaderRow=m},e.printHeaderRow=function(m,_){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var w;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var E=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){w=this.internal.__cell__.tableHeaderRow[x].clone(),_&&(w.y=this.internal.__cell__.margins.top||0,E.push(w)),w.lineNumber=m;var F=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,w),this.setTextColor(F)}E.length>0&&this.setTableHeaderRow(E),this.setFont(void 0,"normal"),n=!1}}(_n.API);var J1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Y1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ed=K1(Y1),X1=[100,200,300,400,500,600,700,800,900],JL=K1(X1);function Ad(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return J1[a=a||"normal"]?a:"normal"}(e.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(a){return typeof Ed[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,n,r].join(" ")}}}function sm(e,t,n,r){var o;for(o=n;o>=0&&o<t.length;o+=r)if(e[t[o]])return e[t[o]];for(o=n;o>=0&&o<t.length;o-=r)if(e[t[o]])return e[t[o]]}var YL={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},om={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function am(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function XL(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},YL,n.genericFontFamilies||{}),a=null,u=null,f=0;f<t.length;++f)if(o[(a=Ad(t[f])).family]&&(a.family=o[a.family]),e.hasOwnProperty(a.family)){u=e[a.family];break}if(!(u=u||e[r]))throw new Error("Could not find a font-family for the rule '"+am(a)+"' and default family '"+r+"'.");if(u=function(m,_){if(_[m])return _[m];var w=Ed[m],b=w<=Ed.normal?-1:1,E=sm(_,Y1,w,b);if(!E)throw new Error("Could not find a matching font-stretch value for "+m);return E}(a.stretch,u),u=function(m,_){if(_[m])return _[m];for(var w=J1[m],b=0;b<w.length;++b)if(_[w[b]])return _[w[b]];throw new Error("Could not find a matching font-style for "+m)}(a.style,u),!(u=function(m,_){if(_[m])return _[m];if(m===400&&_[500])return _[500];if(m===500&&_[400])return _[400];var w=JL[m],b=sm(_,X1,w,m<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+m);return b}(a.weight,u)))throw new Error("Failed to resolve a font for the rule '"+am(a)+"'.");return u}function lm(e){return e.trimLeft()}function QL(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function eC(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Xc,um,cm,Hf=["times"];(function(e){var t,n,r,o,a,u,f,m,_,w=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new m,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new u,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new u,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new b(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,u=this.internal.Point,f=this.internal.Rectangle,m=this.internal.Matrix,_=new w}]);var b=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=I;Object.defineProperty(this,"pdf",{get:function(){return G}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(Ae){se=!!Ae}});var ce=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ce},set:function(Ae){ce=!!Ae}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(Ae){isNaN(Ae)||(pe=Ae)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(Ae){isNaN(Ae)||(oe=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return _.margin},set:function(Ae){var ee;typeof Ae=="number"?ee=[Ae,Ae,Ae,Ae]:((ee=new Array(4))[0]=Ae[0],ee[1]=Ae.length>=2?Ae[1]:ee[0],ee[2]=Ae.length>=3?Ae[2]:ee[0],ee[3]=Ae.length>=4?Ae[3]:ee[1]),_.margin=ee}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(Ae){xe=Ae}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(Ae){me=Ae}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(Ae){je=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return _},set:function(Ae){Ae instanceof w&&(_=Ae)}}),Object.defineProperty(this,"path",{get:function(){return _.path},set:function(Ae){_.path=Ae}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(Ae){qe=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var ee;ee=E(Ae),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var ee=E(Ae);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var J=null;function te(Ae,ee){if(J===null){var We=function(et){var Xe=[];return Object.keys(et).forEach(function(Oe){et[Oe].forEach(function(ke){var lt=null;switch(ke){case"bold":lt={family:Oe,weight:"bold"};break;case"italic":lt={family:Oe,style:"italic"};break;case"bolditalic":lt={family:Oe,weight:"bold",style:"italic"};break;case"":case"normal":lt={family:Oe}}lt!==null&&(lt.ref={name:Oe,style:ke},Xe.push(lt))})}),Xe}(Ae.getFontList());J=function(et){for(var Xe={},Oe=0;Oe<et.length;++Oe){var ke=Ad(et[Oe]),lt=ke.family,ht=ke.stretch,it=ke.style,Fe=ke.weight;Xe[lt]=Xe[lt]||{},Xe[lt][ht]=Xe[lt][ht]||{},Xe[lt][ht][it]=Xe[lt][ht][it]||{},Xe[lt][ht][it][Fe]=ke}return Xe}(We.concat(ee))}return J}var Ne=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ne},set:function(Ae){J=null,Ne=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var ee;if(this.ctx.font=Ae,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var We=ee[1],et=(ee[2],ee[3]),Xe=ee[4],Oe=(ee[5],ee[6]),ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(ke==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:ke==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var lt=function(Ut){var Xt,Rt,on=[],dn=Ut.trim();if(dn==="")return Hf;if(dn in om)return[om[dn]];for(;dn!=="";){switch(Rt=null,Xt=(dn=lm(dn)).charAt(0)){case'"':case"'":Rt=QL(dn.substring(1),Xt);break;default:Rt=eC(dn)}if(Rt===null||(on.push(Rt[0]),(dn=lm(Rt[1]))!==""&&dn.charAt(0)!==","))return Hf;dn=dn.replace(/^,/,"")}return on}(Oe);if(this.fontFaces){var ht=XL(te(this.pdf,this.fontFaces),lt.map(function(Ut){return{family:Ut,stretch:"normal",weight:et,style:We}}));this.pdf.setFont(ht.ref.name,ht.ref.style)}else{var it="";(et==="bold"||parseInt(et,10)>=700||We==="bold")&&(it="bold"),We==="italic"&&(it+="italic"),it.length===0&&(it="normal");for(var Fe="",Pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},It=0;It<lt.length;It++){if(this.pdf.internal.getFont(lt[It],it,{noFallback:!0,disableWarning:!0})!==void 0){Fe=lt[It];break}if(it==="bolditalic"&&this.pdf.internal.getFont(lt[It],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fe=lt[It],it="bold";else if(this.pdf.internal.getFont(lt[It],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fe=lt[It],it="normal";break}}if(Fe===""){for(var Wt=0;Wt<lt.length;Wt++)if(Pt[lt[Wt]]){Fe=Pt[lt[Wt]];break}}Fe=Fe===""?"Times":Fe,this.pdf.setFont(Fe,it)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=!!Ae}})};b.prototype.setLineDash=function(I){this.lineDash=I},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){ye.call(this,"fill",!1)},b.prototype.stroke=function(){ye.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(I,G){if(isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new u(I,G));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new u(I,G)},b.prototype.closePath=function(){var I=new u(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&oi(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){I=new u(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(I.x,I.y)},b.prototype.lineTo=function(I,G){if(isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new u(I,G));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new u(se.x,se.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ye.call(this,null,!0)},b.prototype.quadraticCurveTo=function(I,G,se,ce){if(isNaN(se)||isNaN(ce)||isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new u(se,ce)),oe=this.ctx.transform.applyToPoint(new u(I,G));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new u(pe.x,pe.y)},b.prototype.bezierCurveTo=function(I,G,se,ce,pe,oe){if(isNaN(pe)||isNaN(oe)||isNaN(I)||isNaN(G)||isNaN(se)||isNaN(ce))throw ui.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new u(pe,oe)),me=this.ctx.transform.applyToPoint(new u(I,G)),je=this.ctx.transform.applyToPoint(new u(se,ce));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:je.x,y2:je.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new u(xe.x,xe.y)},b.prototype.arc=function(I,G,se,ce,pe,oe){if(isNaN(I)||isNaN(G)||isNaN(se)||isNaN(ce)||isNaN(pe))throw ui.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new u(I,G));I=xe.x,G=xe.y;var me=this.ctx.transform.applyToPoint(new u(0,se)),je=this.ctx.transform.applyToPoint(new u(0,0));se=Math.sqrt(Math.pow(me.x-je.x,2)+Math.pow(me.y-je.y,2))}Math.abs(pe-ce)>=2*Math.PI&&(ce=0,pe=2*Math.PI),this.path.push({type:"arc",x:I,y:G,radius:se,startAngle:ce,endAngle:pe,counterclockwise:oe})},b.prototype.arcTo=function(I,G,se,ce,pe){throw new Error("arcTo not implemented.")},b.prototype.rect=function(I,G,se,ce){if(isNaN(I)||isNaN(G)||isNaN(se)||isNaN(ce))throw ui.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,G),this.lineTo(I+se,G),this.lineTo(I+se,G+ce),this.lineTo(I,G+ce),this.lineTo(I,G),this.lineTo(I+se,G),this.lineTo(I,G)},b.prototype.fillRect=function(I,G,se,ce){if(isNaN(I)||isNaN(G)||isNaN(se)||isNaN(ce))throw ui.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,G,se,ce),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},b.prototype.strokeRect=function(I,G,se,ce){if(isNaN(I)||isNaN(G)||isNaN(se)||isNaN(ce))throw ui.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");F.call(this)||(this.beginPath(),this.rect(I,G,se,ce),this.stroke())},b.prototype.clearRect=function(I,G,se,ce){if(isNaN(I)||isNaN(G)||isNaN(se)||isNaN(ce))throw ui.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,G,se,ce))},b.prototype.save=function(I){I=typeof I!="boolean"||I;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var ce=new w(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ce}},b.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(G),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var E=function(I){var G,se,ce,pe;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))G=0,se=0,ce=0,pe=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(oe!==null)G=parseInt(oe[1]),se=parseInt(oe[2]),ce=parseInt(oe[3]),pe=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)G=parseInt(oe[1]),se=parseInt(oe[2]),ce=parseInt(oe[3]),pe=parseFloat(oe[4]);else{if(pe=1,typeof I=="string"&&I.charAt(0)!=="#"){var xe=new $1(I);I=xe.ok?xe.toHex():"#000000"}I.length===4?(G=I.substring(1,2),G+=G,se=I.substring(2,3),se+=se,ce=I.substring(3,4),ce+=ce):(G=I.substring(1,3),se=I.substring(3,5),ce=I.substring(5,7)),G=parseInt(G,16),se=parseInt(se,16),ce=parseInt(ce,16)}}return{r:G,g:se,b:ce,a:pe,style:I}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},F=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(I,G,se,ce){if(isNaN(G)||isNaN(se)||typeof I!="string")throw ui.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ce=isNaN(ce)?void 0:ce,!x.call(this)){var pe=W(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;$.call(this,{text:I,x:G,y:se,scale:oe,angle:pe,align:this.textAlign,maxWidth:ce})}},b.prototype.strokeText=function(I,G,se,ce){if(isNaN(G)||isNaN(se)||typeof I!="string")throw ui.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!F.call(this)){ce=isNaN(ce)?void 0:ce;var pe=W(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;$.call(this,{text:I,x:G,y:se,scale:oe,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:ce})}},b.prototype.measureText=function(I){if(typeof I!="string")throw ui.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,se=this.pdf.internal.scaleFactor,ce=G.internal.getFontSize(),pe=G.getStringUnitWidth(I)*ce/G.internal.scaleFactor,oe=function(xe){var me=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this};return new oe({width:pe*=Math.round(96*se/72*1e4)/1e4})},b.prototype.scale=function(I,G){if(isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new m(I,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},b.prototype.rotate=function(I){if(isNaN(I))throw ui.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new m(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},b.prototype.translate=function(I,G){if(isNaN(I)||isNaN(G))throw ui.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new m(1,0,0,1,I,G);this.ctx.transform=this.ctx.transform.multiply(se)},b.prototype.transform=function(I,G,se,ce,pe,oe){if(isNaN(I)||isNaN(G)||isNaN(se)||isNaN(ce)||isNaN(pe)||isNaN(oe))throw ui.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new m(I,G,se,ce,pe,oe);this.ctx.transform=this.ctx.transform.multiply(xe)},b.prototype.setTransform=function(I,G,se,ce,pe,oe){I=isNaN(I)?1:I,G=isNaN(G)?0:G,se=isNaN(se)?0:se,ce=isNaN(ce)?1:ce,pe=isNaN(pe)?0:pe,oe=isNaN(oe)?0:oe,this.ctx.transform=new m(I,G,se,ce,pe,oe)};var D=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(I,G,se,ce,pe,oe,xe,me,je){var qe=this.pdf.getImageProperties(I),J=1,te=1,Ne=1,Ae=1;ce!==void 0&&me!==void 0&&(Ne=me/ce,Ae=je/pe,J=qe.width/ce*me/ce,te=qe.height/pe*je/pe),oe===void 0&&(oe=G,xe=se,G=0,se=0),ce!==void 0&&me===void 0&&(me=ce,je=pe),ce===void 0&&me===void 0&&(me=qe.width,je=qe.height);for(var ee,We=this.ctx.transform.decompose(),et=W(We.rotate.shx),Xe=new m,Oe=(Xe=(Xe=(Xe=Xe.multiply(We.translate)).multiply(We.skew)).multiply(We.scale)).applyToRectangle(new f(oe-G*Ne,xe-se*Ae,ce*J,pe*te)),ke=U.call(this,Oe),lt=[],ht=0;ht<ke.length;ht+=1)lt.indexOf(ke[ht])===-1&&lt.push(ke[ht]);if(ie(lt),this.autoPaging)for(var it=lt[0],Fe=lt[lt.length-1],Pt=it;Pt<Fe+1;Pt++){this.pdf.setPage(Pt);var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=Pt===1?this.posY+this.margin[0]:this.margin[0],Ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Rt=Pt===1?0:Ut+(Pt-2)*Xt;if(this.ctx.clip_path.length!==0){var on=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(ee,this.posX+this.margin[3],-Rt+Wt+this.ctx.prevPageLastElemOffset),we.call(this,"fill",!0),this.path=on}var dn=JSON.parse(JSON.stringify(Oe));dn=Q([dn],this.posX+this.margin[3],-Rt+Wt+this.ctx.prevPageLastElemOffset)[0];var ai=(Pt>it||Pt<Fe)&&D.call(this);ai&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Xt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",dn.x,dn.y,dn.w,dn.h,null,null,et),ai&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",Oe.x,Oe.y,Oe.w,Oe.h,null,null,et)};var U=function(I,G,se){var ce=[];G=G||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":ce.push(Math.floor((I.y+pe)/se)+1);break;case"arc":ce.push(Math.floor((I.y+pe-I.radius)/se)+1),ce.push(Math.floor((I.y+pe+I.radius)/se)+1);break;case"qct":var oe=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);ce.push(Math.floor((oe.y+pe)/se)+1),ce.push(Math.floor((oe.y+oe.h+pe)/se)+1);break;case"bct":var xe=A(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);ce.push(Math.floor((xe.y+pe)/se)+1),ce.push(Math.floor((xe.y+xe.h+pe)/se)+1);break;case"rect":ce.push(Math.floor((I.y+pe)/se)+1),ce.push(Math.floor((I.y+I.h+pe)/se)+1)}for(var me=0;me<ce.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<ce[me];)j.call(this);return ce},j=function(){var I=this.fillStyle,G=this.strokeStyle,se=this.font,ce=this.lineCap,pe=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=G,this.font=se,this.lineCap=ce,this.lineWidth=pe,this.lineJoin=oe},Q=function(I,G,se){for(var ce=0;ce<I.length;ce++)switch(I[ce].type){case"bct":I[ce].x2+=G,I[ce].y2+=se;case"qct":I[ce].x1+=G,I[ce].y1+=se;case"mt":case"lt":case"arc":default:I[ce].x+=G,I[ce].y+=se}return I},ie=function(I){return I.sort(function(G,se){return G-se})},ye=function(I,G){for(var se,ce,pe=this.fillStyle,oe=this.strokeStyle,xe=this.lineCap,me=this.lineWidth,je=Math.abs(me*this.ctx.transform.scaleX),qe=this.lineJoin,J=JSON.parse(JSON.stringify(this.path)),te=JSON.parse(JSON.stringify(this.path)),Ne=[],Ae=0;Ae<te.length;Ae++)if(te[Ae].x!==void 0)for(var ee=U.call(this,te[Ae]),We=0;We<ee.length;We+=1)Ne.indexOf(ee[We])===-1&&Ne.push(ee[We]);for(var et=0;et<Ne.length;et++)for(;this.pdf.internal.getNumberOfPages()<Ne[et];)j.call(this);if(ie(Ne),this.autoPaging)for(var Xe=Ne[0],Oe=Ne[Ne.length-1],ke=Xe;ke<Oe+1;ke++){this.pdf.setPage(ke),this.fillStyle=pe,this.strokeStyle=oe,this.lineCap=xe,this.lineWidth=je,this.lineJoin=qe;var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ht=ke===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pt=ke===1?0:it+(ke-2)*Fe;if(this.ctx.clip_path.length!==0){var It=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(se,this.posX+this.margin[3],-Pt+ht+this.ctx.prevPageLastElemOffset),we.call(this,I,!0),this.path=It}if(ce=JSON.parse(JSON.stringify(J)),this.path=Q(ce,this.posX+this.margin[3],-Pt+ht+this.ctx.prevPageLastElemOffset),G===!1||ke===0){var Wt=(ke>Xe||ke<Oe)&&D.call(this);Wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Fe,null).clip().discardPath()),we.call(this,I,G),Wt&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=je,we.call(this,I,G),this.lineWidth=me;this.path=J},we=function(I,G){if((I!=="stroke"||G||!F.call(this))&&(I==="stroke"||G||!x.call(this))){for(var se,ce,pe=[],oe=this.path,xe=0;xe<oe.length;xe++){var me=oe[xe];switch(me.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:me,deltas:[],abs:[]});break;case"lt":var je=pe.length;if(oe[xe-1]&&!isNaN(oe[xe-1].x)&&(se=[me.x-oe[xe-1].x,me.y-oe[xe-1].y],je>0)){for(;je>=0;je--)if(pe[je-1].close!==!0&&pe[je-1].begin!==!0){pe[je-1].deltas.push(se),pe[je-1].abs.push(me);break}}break;case"bct":se=[me.x1-oe[xe-1].x,me.y1-oe[xe-1].y,me.x2-oe[xe-1].x,me.y2-oe[xe-1].y,me.x-oe[xe-1].x,me.y-oe[xe-1].y],pe[pe.length-1].deltas.push(se);break;case"qct":var qe=oe[xe-1].x+2/3*(me.x1-oe[xe-1].x),J=oe[xe-1].y+2/3*(me.y1-oe[xe-1].y),te=me.x+2/3*(me.x1-me.x),Ne=me.y+2/3*(me.y1-me.y),Ae=me.x,ee=me.y;se=[qe-oe[xe-1].x,J-oe[xe-1].y,te-oe[xe-1].x,Ne-oe[xe-1].y,Ae-oe[xe-1].x,ee-oe[xe-1].y],pe[pe.length-1].deltas.push(se);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(me)}}ce=G?null:I==="stroke"?"stroke":"fill";for(var We=!1,et=0;et<pe.length;et++)if(pe[et].arc)for(var Xe=pe[et].abs,Oe=0;Oe<Xe.length;Oe++){var ke=Xe[Oe];ke.type==="arc"?fe.call(this,ke.x,ke.y,ke.radius,ke.startAngle,ke.endAngle,ke.counterclockwise,void 0,G,!We):Se.call(this,ke.x,ke.y),We=!0}else if(pe[et].close===!0)this.pdf.internal.out("h"),We=!1;else if(pe[et].begin!==!0){var lt=pe[et].start.x,ht=pe[et].start.y;B.call(this,pe[et].deltas,lt,ht),We=!0}ce&&Te.call(this,ce),G&&$e.call(this)}},Pe=function(I){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-se;case"top":return I+G-se;case"hanging":return I+G-2*se;case"middle":return I+G/2-se;case"ideographic":return I;case"alphabetic":default:return I}},Ee=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(G,se){this.colorStops.push([G,se])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var fe=function(I,G,se,ce,pe,oe,xe,me,je){for(var qe=H.call(this,se,ce,pe,oe),J=0;J<qe.length;J++){var te=qe[J];J===0&&(je?q.call(this,te.x1+I,te.y1+G):Se.call(this,te.x1+I,te.y1+G)),K.call(this,I,G,te.x2,te.y2,te.x3,te.y3,te.x4,te.y4)}me?$e.call(this):Te.call(this,xe)},Te=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$e=function(){this.pdf.clip(),this.pdf.discardPath()},q=function(I,G){this.pdf.internal.out(n(I)+" "+r(G)+" m")},$=function(I){var G;switch(I.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var se=this.pdf.getTextDimensions(I.text),ce=Pe.call(this,I.y),pe=Ee.call(this,ce)-se.h,oe=this.ctx.transform.applyToPoint(new u(I.x,ce)),xe=this.ctx.transform.decompose(),me=new m;me=(me=(me=me.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var je,qe,J,te=this.ctx.transform.applyToRectangle(new f(I.x,ce,se.w,se.h)),Ne=me.applyToRectangle(new f(I.x,pe,se.w,se.h)),Ae=U.call(this,Ne),ee=[],We=0;We<Ae.length;We+=1)ee.indexOf(Ae[We])===-1&&ee.push(Ae[We]);if(ie(ee),this.autoPaging)for(var et=ee[0],Xe=ee[ee.length-1],Oe=et;Oe<Xe+1;Oe++){this.pdf.setPage(Oe);var ke=Oe===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[2],it=ht-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],Pt=Fe-this.margin[3],It=Oe===1?0:lt+(Oe-2)*it;if(this.ctx.clip_path.length!==0){var Wt=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(je,this.posX+this.margin[3],-1*It+ke),we.call(this,"fill",!0),this.path=Wt}var Ut=Q([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-It+ke+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*I.scale),J=this.lineWidth,this.lineWidth=J*I.scale);var Xt=this.autoPaging!=="text";if(Xt||Ut.y+Ut.h<=ht){if(Xt||Ut.y>=ke&&Ut.x<=Fe){var Rt=Xt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Fe-Ut.x)[0],on=Q([JSON.parse(JSON.stringify(te))],this.posX+this.margin[3],-It+ke+this.ctx.prevPageLastElemOffset)[0],dn=Xt&&(Oe>et||Oe<Xe)&&D.call(this);dn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pt,it,null).clip().discardPath()),this.pdf.text(Rt,on.x,on.y,{angle:I.angle,align:G,renderingMode:I.renderingMode}),dn&&this.pdf.restoreGraphicsState()}}else Ut.y<ht&&(this.ctx.prevPageLastElemOffset+=ht-Ut.y);I.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=J)}else I.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*I.scale),J=this.lineWidth,this.lineWidth=J*I.scale),this.pdf.text(I.text,oe.x+this.posX,oe.y+this.posY,{angle:I.angle,align:G,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=J)},Se=function(I,G,se,ce){se=se||0,ce=ce||0,this.pdf.internal.out(n(I+se)+" "+r(G+ce)+" l")},B=function(I,G,se){return this.pdf.lines(I,G,se,null,null)},K=function(I,G,se,ce,pe,oe,xe,me){this.pdf.internal.out([t(o(se+I)),t(a(ce+G)),t(o(pe+I)),t(a(oe+G)),t(o(xe+I)),t(a(me+G)),"c"].join(" "))},H=function(I,G,se,ce){for(var pe=2*Math.PI,oe=Math.PI/2;G>se;)G-=pe;var xe=Math.abs(se-G);xe<pe&&ce&&(xe=pe-xe);for(var me=[],je=ce?-1:1,qe=G;xe>1e-5;){var J=qe+je*Math.min(xe,oe);me.push(ne.call(this,I,qe,J)),xe-=Math.abs(J-qe),qe=J}return me},ne=function(I,G,se){var ce=(se-G)/2,pe=I*Math.cos(ce),oe=I*Math.sin(ce),xe=pe,me=-oe,je=xe*xe+me*me,qe=je+xe*pe+me*oe,J=4/3*(Math.sqrt(2*je*qe)-qe)/(xe*oe-me*pe),te=xe-J*me,Ne=me+J*xe,Ae=te,ee=-Ne,We=ce+G,et=Math.cos(We),Xe=Math.sin(We);return{x1:I*Math.cos(G),y1:I*Math.sin(G),x2:te*et-Ne*Xe,y2:te*Xe+Ne*et,x3:Ae*et-ee*Xe,y3:Ae*Xe+ee*et,x4:I*Math.cos(se),y4:I*Math.sin(se)}},W=function(I){return 180*I/Math.PI},z=function(I,G,se,ce,pe,oe){var xe=I+.5*(se-I),me=G+.5*(ce-G),je=pe+.5*(se-pe),qe=oe+.5*(ce-oe),J=Math.min(I,pe,xe,je),te=Math.max(I,pe,xe,je),Ne=Math.min(G,oe,me,qe),Ae=Math.max(G,oe,me,qe);return new f(J,Ne,te-J,Ae-Ne)},A=function(I,G,se,ce,pe,oe,xe,me){var je,qe,J,te,Ne,Ae,ee,We,et,Xe,Oe,ke,lt,ht,it=se-I,Fe=ce-G,Pt=pe-se,It=oe-ce,Wt=xe-pe,Ut=me-oe;for(qe=0;qe<41;qe++)et=(ee=(J=I+(je=qe/40)*it)+je*((Ne=se+je*Pt)-J))+je*(Ne+je*(pe+je*Wt-Ne)-ee),Xe=(We=(te=G+je*Fe)+je*((Ae=ce+je*It)-te))+je*(Ae+je*(oe+je*Ut-Ae)-We),qe==0?(Oe=et,ke=Xe,lt=et,ht=Xe):(Oe=Math.min(Oe,et),ke=Math.min(ke,Xe),lt=Math.max(lt,et),ht=Math.max(ht,Xe));return new f(Math.round(Oe),Math.round(ke),Math.round(lt-Oe),Math.round(ht-ke))},ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,G,se=(I=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:G}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(_n.API),function(e){var t=function(a){var u,f,m,_,w,b,E,x,F,D;for(f=[],m=0,_=(a+=u="\0\0\0\0".slice(a.length%4||4)).length;_>m;m+=4)(w=(a.charCodeAt(m)<<24)+(a.charCodeAt(m+1)<<16)+(a.charCodeAt(m+2)<<8)+a.charCodeAt(m+3))!==0?(b=(w=((w=((w=((w=(w-(D=w%85))/85)-(F=w%85))/85)-(x=w%85))/85)-(E=w%85))/85)%85,f.push(b+33,E+33,x+33,F+33,D+33)):f.push(122);return function(U,j){for(var Q=j;Q>0;Q--)U.pop()}(f,u.length),String.fromCharCode.apply(String,f)+"~>"},n=function(a){var u,f,m,_,w,b=String,E="length",x=255,F="charCodeAt",D="slice",U="replace";for(a[D](-2),a=a[D](0,-2)[U](/\s/g,"")[U]("z","!!!!!"),m=[],_=0,w=(a+=u="uuuuu"[D](a[E]%5||5))[E];w>_;_+=5)f=52200625*(a[F](_)-33)+614125*(a[F](_+1)-33)+7225*(a[F](_+2)-33)+85*(a[F](_+3)-33)+(a[F](_+4)-33),m.push(x&f>>24,x&f>>16,x&f>>8,x&f);return function(j,Q){for(var ie=Q;ie>0;ie--)j.pop()}(m,u[E]),b.fromCharCode.apply(b,m)},r=function(a){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),u.test(a)===!1)return"";for(var f="",m=0;m<a.length;m+=2)f+=String.fromCharCode("0x"+(a[m]+a[m+1]));return f},o=function(a){for(var u=new Uint8Array(a.length),f=a.length;f--;)u[f]=a.charCodeAt(f);return a=(u=Ld(u)).reduce(function(m,_){return m+String.fromCharCode(_)},"")};e.processDataByFilters=function(a,u){var f=0,m=a||"",_=[];for(typeof(u=u||[])=="string"&&(u=[u]),f=0;f<u.length;f+=1)switch(u[f]){case"ASCII85Decode":case"/ASCII85Decode":m=n(m),_.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=t(m),_.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=r(m),_.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(w){return("0"+w.charCodeAt().toString(16)).slice(-2)}).join("")+">",_.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),_.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[f]+'" is not implemented')}return{data:m,reverseChain:_.reverse().join(" ")}}}(_n.API),function(e){e.loadFile=function(t,n,r){return function(o,a,u){a=a!==!1,u=typeof u=="function"?u:function(){};var f=void 0;try{f=function(m,_,w){var b=new XMLHttpRequest,E=0,x=function(F){var D=F.length,U=[],j=String.fromCharCode;for(E=0;E<D;E+=1)U.push(j(255&F.charCodeAt(E)));return U.join("")};if(b.open("GET",m,!_),b.overrideMimeType("text/plain; charset=x-user-defined"),_===!1&&(b.onload=function(){b.status===200?w(x(this.responseText)):w(void 0)}),b.send(null),_&&b.status===200)return x(b.responseText)}(o,a,u)}catch{}return f}(t,n,r)},e.loadImageFile=e.loadFile}(_n.API),function(e){function t(){return(bn.html2canvas?Promise.resolve(bn.html2canvas):Jl(()=>import("./html2canvas.esm.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function n(){return(bn.DOMPurify?Promise.resolve(bn.DOMPurify):Jl(()=>import("./purify.es.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var f=oi(u);return f==="undefined"?"undefined":f==="string"||u instanceof String?"string":f==="number"||u instanceof Number?"number":f==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":f==="object"?"object":"unknown"},o=function(u,f){var m=document.createElement(u);for(var _ in f.className&&(m.className=f.className),f.innerHTML&&f.dompurify&&(m.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)m.style[_]=f.style[_];return m},a=function u(f){var m=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),_=u.convert(Promise.resolve(),m);return _=(_=_.setProgress(1,u,1,[u])).set(f)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(u,f){return u.__proto__=f||a.prototype,u},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(u,f){return this.then(function(){switch(f=f||function(m){switch(r(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(u)){case"string":return this.then(n).then(function(m){return this.set({src:o("div",{innerHTML:u,dompurify:m})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},a.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=function m(_,w){for(var b=_.nodeType===3?document.createTextNode(_.nodeValue):_.cloneNode(!1),E=_.firstChild;E;E=E.nextSibling)w!==!0&&E.nodeType===1&&E.nodeName==="SCRIPT"||b.appendChild(m(E,w));return _.nodeType===1&&(_.nodeName==="CANVAS"?(b.width=_.width,b.height=_.height,b.getContext("2d").drawImage(_,0,0)):_.nodeName!=="TEXTAREA"&&_.nodeName!=="SELECT"||(b.value=_.value),b.addEventListener("load",function(){b.scrollTop=_.scrollTop,b.scrollLeft=_.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(f){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,f(this.prop.container,m)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(t).then(function(f){var m=this.opt.jsPDF,_=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=_,_)for(var E=0;E<_.length;++E){var x=_[E],F=x.src.find(function(D){return D.format==="truetype"});F&&m.addFont(F.url,x.ref.name,x.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,m.context2d.save(!0),f(this.prop.container,b)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(u,f,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(u,f):this.outputPdf(u,f)},a.prototype.outputPdf=function(u,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,f)})},a.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},a.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(u){if(r(u)!=="object")return this;var f=Object.keys(u||{}).map(function(m){if(m in a.template.prop)return function(){this.prop[m]=u[m]};switch(m){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[m]=u[m]}}},this);return this.then(function(){return this.thenList(f)})},a.prototype.get=function(u,f){return this.then(function(){var m=u in a.template.prop?this.prop[u]:this.opt[u];return f?f(m):m})},a.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},a.prototype.setPageSize=function(u){function f(m,_){return Math.floor(m*_/72*96)}return this.then(function(){(u=u||_n.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:f(u.inner.width,u.k),height:f(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},a.prototype.setProgress=function(u,f,m,_){return u!=null&&(this.progress.val=u),f!=null&&(this.progress.state=f),m!=null&&(this.progress.n=m),_!=null&&(this.progress.stack=_),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(u,f,m,_){return this.setProgress(u?this.progress.val+u:null,f||null,m?this.progress.n+m:null,_?this.progress.stack.concat(_):null)},a.prototype.then=function(u,f){var m=this;return this.thenCore(u,f,function(_,w){return m.updateProgress(null,null,1,[_]),Promise.prototype.then.call(this,function(b){return m.updateProgress(null,_),b}).then(_,w).then(function(b){return m.updateProgress(1),b})})},a.prototype.thenCore=function(u,f,m){m=m||Promise.prototype.then,u&&(u=u.bind(this)),f&&(f=f.bind(this));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),w=m.call(_,u,f);return a.convert(w,this.__proto__)},a.prototype.thenExternal=function(u,f){return Promise.prototype.then.call(this,u,f)},a.prototype.thenList=function(u){var f=this;return u.forEach(function(m){f=f.thenCore(m)}),f},a.prototype.catch=function(u){u&&(u=u.bind(this));var f=Promise.prototype.catch.call(this,u);return a.convert(f,this)},a.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},a.prototype.error=function(u){return this.then(function(){throw new Error(u)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,_n.getPageSize=function(u,f,m){if(oi(u)==="object"){var _=u;u=_.orientation,f=_.unit||f,m=_.format||m}f=f||"mm",m=m||"a4",u=(""+(u||"P")).toLowerCase();var w,b=(""+m).toLowerCase(),E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+f}var x,F=0,D=0;if(E.hasOwnProperty(b))F=E[b][1]/w,D=E[b][0]/w;else try{F=m[1],D=m[0]}catch{throw new Error("Invalid format: "+m)}if(u==="p"||u==="portrait")u="p",D>F&&(x=D,D=F,F=x);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",F>D&&(x=D,D=F,F=x)}return{width:D,height:F,unit:f,k:w,orientation:u}},e.html=function(u,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Ad):null;var m=new a(f);return f.worker?m:m.from(u).doCallback()}}(_n.API),_n.API.addJS=function(e){return cm=e,this.internal.events.subscribe("postPutResources",function(){Xc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Xc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),um=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+cm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Xc!==void 0&&um!==void 0&&this.internal.out("/Names <</JavaScript "+Xc+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),a=0;a<o.length;a++){var u=o[a],f=r.exec(u);if(f!=null){var m=f[1];n.internal.newObjectDeferredBegin(m,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var _=this.internal.pages.length,w=[];for(a=0;a<_;a++){var b=n.internal.newObject();w.push(b);var E=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+E.objId+" 0 R /XYZ null null null]>> endobj")}var x=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<w.length;a++)n.internal.write("(page_"+(a+1)+")"+w[a]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+x+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,a){var u={title:o,options:a,children:[]};return r==null&&(r=this.root),r.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var u=r.children[a];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var f=this.count=this.count_r({count:0},u);if(f>0&&this.line("/Count "+f),u.options&&u.options.pageNumber){var m=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var _=0;_<r.children.length;_++)this.renderItems(r.children[_])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var a=0;a<o.children.length;a++)r.count++,this.count_r(r,o.children[a]);return r.count}}])}(_n.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,o,a,u,f){var m,_=this.decode.DCT_DECODE,w=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(m=function(b){for(var E,x=256*b.charCodeAt(4)+b.charCodeAt(5),F=b.length,D={width:0,height:0,numcomponents:1},U=4;U<F;U+=2){if(U+=x,t.indexOf(b.charCodeAt(U+1))!==-1){E=256*b.charCodeAt(U+5)+b.charCodeAt(U+6),D={width:256*b.charCodeAt(U+7)+b.charCodeAt(U+8),height:E,numcomponents:b.charCodeAt(U+9)};break}x=256*b.charCodeAt(U+2)+b.charCodeAt(U+3)}return D}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:f=this.color_spaces.DEVICE_GRAY;break;case 4:f=this.color_spaces.DEVICE_CMYK;break;case 3:f=this.color_spaces.DEVICE_RGB}w={data:n,width:m.width,height:m.height,colorSpace:f,bitsPerComponent:8,filter:_,index:r,alias:o}}return w}}(_n.API);var yu,Qc,hm,fm,dm,tC=function(){var e,t,n;function r(a){var u,f,m,_,w,b,E,x,F,D,U,j,Q,ie;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(u=this.readUInt32(),F=(function(){var ye,we;for(we=[],ye=0;ye<4;++ye)we.push(String.fromCharCode(this.data[this.pos++]));return we}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},w=this.readUInt16(),_=this.readUInt16()||100,b.delay=1e3*w/_,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(F==="fdAT"&&(this.pos+=4,u-=4),a=(b!=null?b.data:void 0)||this.imgData,j=0;0<=u?j<u:j>u;0<=u?++j:--j)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(u),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((D=m-this.transparency.indexed.length)>0)for(Q=0;0<=D?Q<D:Q>D;0<=D?++Q:--Q)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":E=(U=this.read(u)).indexOf(0),x=String.fromCharCode.apply(String,U.slice(0,E)),this.text[x]=String.fromCharCode.apply(String,U.slice(E+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(ie=this.colorType)===4||ie===6,f=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*f,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var u,f;for(f=[],u=0;0<=a?u<a:u>a;0<=a?++u:--u)f.push(this.data[this.pos++]);return f},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var u=this.pixelBitlength/8,f=new Uint8Array(this.width*this.height*u),m=0,_=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function w(b,E,x,F){var D,U,j,Q,ie,ye,we,Pe,Ee,fe,Te,$e,q,$,Se,B,K,H,ne,W,z,A=Math.ceil((_.width-b)/x),ge=Math.ceil((_.height-E)/F),I=_.width==A&&_.height==ge;for($=u*A,$e=I?f:new Uint8Array($*ge),ye=a.length,q=0,U=0;q<ge&&m<ye;){switch(a[m++]){case 0:for(Q=K=0;K<$;Q=K+=1)$e[U++]=a[m++];break;case 1:for(Q=H=0;H<$;Q=H+=1)D=a[m++],ie=Q<u?0:$e[U-u],$e[U++]=(D+ie)%256;break;case 2:for(Q=ne=0;ne<$;Q=ne+=1)D=a[m++],j=(Q-Q%u)/u,Se=q&&$e[(q-1)*$+j*u+Q%u],$e[U++]=(Se+D)%256;break;case 3:for(Q=W=0;W<$;Q=W+=1)D=a[m++],j=(Q-Q%u)/u,ie=Q<u?0:$e[U-u],Se=q&&$e[(q-1)*$+j*u+Q%u],$e[U++]=(D+Math.floor((ie+Se)/2))%256;break;case 4:for(Q=z=0;z<$;Q=z+=1)D=a[m++],j=(Q-Q%u)/u,ie=Q<u?0:$e[U-u],q===0?Se=B=0:(Se=$e[(q-1)*$+j*u+Q%u],B=j&&$e[(q-1)*$+(j-1)*u+Q%u]),we=ie+Se-B,Pe=Math.abs(we-ie),fe=Math.abs(we-Se),Te=Math.abs(we-B),Ee=Pe<=fe&&Pe<=Te?ie:fe<=Te?Se:B,$e[U++]=(D+Ee)%256;break;default:throw new Error("Invalid filter algorithm: "+a[m-1])}if(!I){var G=((E+q*F)*_.width+b)*u,se=q*$;for(Q=0;Q<A;Q+=1){for(var ce=0;ce<u;ce+=1)f[G++]=$e[se++];G+=(x-1)*u}}q++}}return a=NL(a),_.interlaceMethod==1?(w(0,0,8,8),w(4,0,8,8),w(0,4,4,8),w(2,0,4,4),w(0,2,2,4),w(1,0,2,2),w(0,1,1,2)):w(0,0,1,1),f},r.prototype.decodePalette=function(){var a,u,f,m,_,w,b,E,x;for(f=this.palette,w=this.transparency.indexed||[],_=new Uint8Array((w.length||0)+f.length),m=0,a=0,u=b=0,E=f.length;b<E;u=b+=3)_[m++]=f[u],_[m++]=f[u+1],_[m++]=f[u+2],_[m++]=(x=w[a++])!=null?x:255;return _},r.prototype.copyToImageData=function(a,u){var f,m,_,w,b,E,x,F,D,U,j;if(m=this.colors,D=null,f=this.hasAlphaChannel,this.palette.length&&(D=(j=this._decodedPalette)!=null?j:this._decodedPalette=this.decodePalette(),m=4,f=!0),F=(_=a.data||a).length,b=D||u,w=E=0,m===1)for(;w<F;)x=D?4*u[w/4]:E,U=b[x++],_[w++]=U,_[w++]=U,_[w++]=U,_[w++]=f?b[x++]:255,E=x;else for(;w<F;)x=D?4*u[w/4]:E,_[w++]=b[x++],_[w++]=b[x++],_[w++]=b[x++],_[w++]=f?b[x++]:255,E=x},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var o=function(){if(Object.prototype.toString.call(bn)==="[object Window]"){try{t=bn.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(a){var u;if(o()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(u=new Image).src=t.toDataURL(),u;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var u,f,m,_,w,b,E,x;if(this.animation){for(x=[],f=w=0,b=(E=this.animation.frames).length;w<b;f=++w)u=E[f],m=a.createImageData(u.width,u.height),_=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(m,_),u.imageData=m,x.push(u.image=e(m));return x}},r.prototype.renderFrame=function(a,u){var f,m,_;return f=(m=this.animation.frames)[u],_=m[u-1],u===0&&a.clearRect(0,0,this.width,this.height),(_!=null?_.disposeOp:void 0)===1?a.clearRect(_.xOffset,_.yOffset,_.width,_.height):(_!=null?_.disposeOp:void 0)===2&&a.putImageData(_.imageData,_.xOffset,_.yOffset),f.blendOp===0&&a.clearRect(f.xOffset,f.yOffset,f.width,f.height),a.drawImage(f.image,f.xOffset,f.yOffset)},r.prototype.animate=function(a){var u,f,m,_,w,b,E=this;return f=0,b=this.animation,_=b.numFrames,m=b.frames,w=b.numPlays,(u=function(){var x,F;if(x=f++%_,F=m[x],E.renderFrame(a,x),_>1&&f/_<w)return E.animation._timeout=setTimeout(u,F.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var u,f;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,u=a.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(f=u.createImageData(this.width,this.height),this.copyToImageData(f,this.decodePixels()),u.putImageData(f,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function nC(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,o=e[t++],a=o>>7,u=1<<(7&o)+1;e[t++],e[t++];var f=null,m=null;a&&(f=t,m=u,t+=3*u);var _=!0,w=[],b=0,E=null,x=0,F=null;for(this.width=n,this.height=r;_&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,F=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((q=e[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var D=e[t++];b=e[t++]|e[t++]<<8,E=e[t++],!(1&D)&&(E=null),x=D>>2&7,t++;break;case 254:for(;;){if(!((q=e[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var U=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,Q=e[t++]|e[t++]<<8,ie=e[t++]|e[t++]<<8,ye=e[t++],we=ye>>6&1,Pe=1<<(7&ye)+1,Ee=f,fe=m,Te=!1;ye>>7&&(Te=!0,Ee=t,fe=Pe,t+=3*Pe);var $e=t;for(t++;;){var q;if(!((q=e[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}w.push({x:U,y:j,width:Q,height:ie,has_local_palette:Te,palette_offset:Ee,palette_size:fe,data_offset:$e,data_length:t-$e,transparent_index:E,interlaced:!!we,delay:b,disposal:x});break;case 59:_=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return w.length},this.loopCount=function(){return F},this.frameInfo=function($){if($<0||$>=w.length)throw new Error("Frame index out of range.");return w[$]},this.decodeAndBlitFrameBGRA=function($,Se){var B=this.frameInfo($),K=B.width*B.height,H=new Uint8Array(K);pm(e,B.data_offset,H,K);var ne=B.palette_offset,W=B.transparent_index;W===null&&(W=256);var z=B.width,A=n-z,ge=z,I=4*(B.y*n+B.x),G=4*((B.y+B.height)*n+B.x),se=I,ce=4*A;B.interlaced===!0&&(ce+=4*n*7);for(var pe=8,oe=0,xe=H.length;oe<xe;++oe){var me=H[oe];if(ge===0&&(ge=z,(se+=ce)>=G&&(ce=4*A+4*n*(pe-1),se=I+(z+A)*(pe<<1),pe>>=1)),me===W)se+=4;else{var je=e[ne+3*me],qe=e[ne+3*me+1],J=e[ne+3*me+2];Se[se++]=J,Se[se++]=qe,Se[se++]=je,Se[se++]=255}--ge}},this.decodeAndBlitFrameRGBA=function($,Se){var B=this.frameInfo($),K=B.width*B.height,H=new Uint8Array(K);pm(e,B.data_offset,H,K);var ne=B.palette_offset,W=B.transparent_index;W===null&&(W=256);var z=B.width,A=n-z,ge=z,I=4*(B.y*n+B.x),G=4*((B.y+B.height)*n+B.x),se=I,ce=4*A;B.interlaced===!0&&(ce+=4*n*7);for(var pe=8,oe=0,xe=H.length;oe<xe;++oe){var me=H[oe];if(ge===0&&(ge=z,(se+=ce)>=G&&(ce=4*A+4*n*(pe-1),se=I+(z+A)*(pe<<1),pe>>=1)),me===W)se+=4;else{var je=e[ne+3*me],qe=e[ne+3*me+1],J=e[ne+3*me+2];Se[se++]=je,Se[se++]=qe,Se[se++]=J,Se[se++]=255}--ge}}}function pm(e,t,n,r){for(var o=e[t++],a=1<<o,u=a+1,f=u+1,m=o+1,_=(1<<m)-1,w=0,b=0,E=0,x=e[t++],F=new Int32Array(4096),D=null;;){for(;w<16&&x!==0;)b|=e[t++]<<w,w+=8,x===1?x=e[t++]:--x;if(w<m)break;var U=b&_;if(b>>=m,w-=m,U!==a){if(U===u)break;for(var j=U<f?U:D,Q=0,ie=j;ie>a;)ie=F[ie]>>8,++Q;var ye=ie;if(E+Q+(j!==U?1:0)>r)return void ui.log("Warning, gif stream longer than expected.");n[E++]=ye;var we=E+=Q;for(j!==U&&(n[E++]=ye),ie=j;Q--;)ie=F[ie],n[--we]=255&ie,ie>>=8;D!==null&&f<4096&&(F[f++]=D<<8|ye,f>=_+1&&m<12&&(++m,_=_<<1|1)),D=U}else f=u+1,_=(1<<(m=o+1))-1,D=null}return E!==r&&ui.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Gf(e){var t,n,r,o,a,u=Math.floor,f=new Array(64),m=new Array(64),_=new Array(64),w=new Array(64),b=new Array(65535),E=new Array(65535),x=new Array(64),F=new Array(64),D=[],U=0,j=7,Q=new Array(64),ie=new Array(64),ye=new Array(64),we=new Array(256),Pe=new Array(2048),Ee=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],fe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Te=[0,1,2,3,4,5,6,7,8,9,10,11],$e=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Se=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(I,G){for(var se=0,ce=0,pe=new Array,oe=1;oe<=16;oe++){for(var xe=1;xe<=I[oe];xe++)pe[G[ce]]=[],pe[G[ce]][0]=se,pe[G[ce]][1]=oe,ce++,se++;se*=2}return pe}function ne(I){for(var G=I[0],se=I[1]-1;se>=0;)G&1<<se&&(U|=1<<j),se--,--j<0&&(U==255?(W(255),W(0)):W(U),j=7,U=0)}function W(I){D.push(I)}function z(I){W(I>>8&255),W(255&I)}function A(I,G,se,ce,pe){for(var oe,xe=pe[0],me=pe[240],je=function(Xe,Oe){var ke,lt,ht,it,Fe,Pt,It,Wt,Ut,Xt,Rt=0;for(Ut=0;Ut<8;++Ut){ke=Xe[Rt],lt=Xe[Rt+1],ht=Xe[Rt+2],it=Xe[Rt+3],Fe=Xe[Rt+4],Pt=Xe[Rt+5],It=Xe[Rt+6];var on=ke+(Wt=Xe[Rt+7]),dn=ke-Wt,ai=lt+It,Ct=lt-It,nn=ht+Pt,Vt=ht-Pt,ln=it+Fe,li=it-Fe,In=on+ln,fi=on-ln,xi=ai+nn,Kn=ai-nn;Xe[Rt]=In+xi,Xe[Rt+4]=In-xi;var Tt=.707106781*(Kn+fi);Xe[Rt+2]=fi+Tt,Xe[Rt+6]=fi-Tt;var Dt=.382683433*((In=li+Vt)-(Kn=Ct+dn)),Di=.5411961*In+Dt,qn=1.306562965*Kn+Dt,ms=.707106781*(xi=Vt+Ct),Mr=dn+ms,cn=dn-ms;Xe[Rt+5]=cn+Di,Xe[Rt+3]=cn-Di,Xe[Rt+1]=Mr+qn,Xe[Rt+7]=Mr-qn,Rt+=8}for(Rt=0,Ut=0;Ut<8;++Ut){ke=Xe[Rt],lt=Xe[Rt+8],ht=Xe[Rt+16],it=Xe[Rt+24],Fe=Xe[Rt+32],Pt=Xe[Rt+40],It=Xe[Rt+48];var Xr=ke+(Wt=Xe[Rt+56]),gs=ke-Wt,cr=lt+It,Vn=lt-It,Ht=ht+Pt,hr=ht-Pt,wo=it+Fe,Qr=it-Fe,Br=Xr+wo,Lr=Xr-wo,Tr=cr+Ht,tr=cr-Ht;Xe[Rt]=Br+Tr,Xe[Rt+32]=Br-Tr;var Cr=.707106781*(tr+Lr);Xe[Rt+16]=Lr+Cr,Xe[Rt+48]=Lr-Cr;var vs=.382683433*((Br=Qr+hr)-(tr=Vn+gs)),xo=.5411961*Br+vs,Zo=1.306562965*tr+vs,Ko=.707106781*(Tr=hr+Vn),Ds=gs+Ko,Ys=gs-Ko;Xe[Rt+40]=Ys+xo,Xe[Rt+24]=Ys-xo,Xe[Rt+8]=Ds+Zo,Xe[Rt+56]=Ds-Zo,Rt++}for(Ut=0;Ut<64;++Ut)Xt=Xe[Ut]*Oe[Ut],x[Ut]=Xt>0?Xt+.5|0:Xt-.5|0;return x}(I,G),qe=0;qe<64;++qe)F[Ee[qe]]=je[qe];var J=F[0]-se;se=F[0],J==0?ne(ce[0]):(ne(ce[E[oe=32767+J]]),ne(b[oe]));for(var te=63;te>0&&F[te]==0;)te--;if(te==0)return ne(xe),se;for(var Ne,Ae=1;Ae<=te;){for(var ee=Ae;F[Ae]==0&&Ae<=te;)++Ae;var We=Ae-ee;if(We>=16){Ne=We>>4;for(var et=1;et<=Ne;++et)ne(me);We&=15}oe=32767+F[Ae],ne(pe[(We<<4)+E[oe]]),ne(b[oe]),Ae++}return te!=63&&ne(xe),se}function ge(I){I=Math.min(Math.max(I,1),100),a!=I&&(function(G){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ce=0;ce<64;ce++){var pe=u((se[ce]*G+50)/100);pe=Math.min(Math.max(pe,1),255),f[Ee[ce]]=pe}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var me=u((oe[xe]*G+50)/100);me=Math.min(Math.max(me,1),255),m[Ee[xe]]=me}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,J=0;J<8;J++)for(var te=0;te<8;te++)_[qe]=1/(f[Ee[qe]]*je[J]*je[te]*8),w[qe]=1/(m[Ee[qe]]*je[J]*je[te]*8),qe++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),a=I)}this.encode=function(I,G){G&&ge(G),D=new Array,U=0,j=7,z(65496),z(65504),z(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),z(1),z(1),W(0),W(0),function(){z(65499),z(132),W(0);for(var lt=0;lt<64;lt++)W(f[lt]);W(1);for(var ht=0;ht<64;ht++)W(m[ht])}(),function(lt,ht){z(65472),z(17),W(8),z(ht),z(lt),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(I.width,I.height),function(){z(65476),z(418),W(0);for(var lt=0;lt<16;lt++)W(fe[lt+1]);for(var ht=0;ht<=11;ht++)W(Te[ht]);W(16);for(var it=0;it<16;it++)W($e[it+1]);for(var Fe=0;Fe<=161;Fe++)W(q[Fe]);W(1);for(var Pt=0;Pt<16;Pt++)W($[Pt+1]);for(var It=0;It<=11;It++)W(Se[It]);W(17);for(var Wt=0;Wt<16;Wt++)W(B[Wt+1]);for(var Ut=0;Ut<=161;Ut++)W(K[Ut])}(),z(65498),z(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var se=0,ce=0,pe=0;U=0,j=7,this.encode.displayName="_encode_";for(var oe,xe,me,je,qe,J,te,Ne,Ae,ee=I.data,We=I.width,et=I.height,Xe=4*We,Oe=0;Oe<et;){for(oe=0;oe<Xe;){for(qe=Xe*Oe+oe,te=-1,Ne=0,Ae=0;Ae<64;Ae++)J=qe+(Ne=Ae>>3)*Xe+(te=4*(7&Ae)),Oe+Ne>=et&&(J-=Xe*(Oe+1+Ne-et)),oe+te>=Xe&&(J-=oe+te-Xe+4),xe=ee[J++],me=ee[J++],je=ee[J++],Q[Ae]=(Pe[xe]+Pe[me+256>>0]+Pe[je+512>>0]>>16)-128,ie[Ae]=(Pe[xe+768>>0]+Pe[me+1024>>0]+Pe[je+1280>>0]>>16)-128,ye[Ae]=(Pe[xe+1280>>0]+Pe[me+1536>>0]+Pe[je+1792>>0]>>16)-128;se=A(Q,_,se,t,r),ce=A(ie,w,ce,n,o),pe=A(ye,w,pe,n,o),oe+=32}Oe+=8}if(j>=0){var ke=[];ke[1]=j+1,ke[0]=(1<<j+1)-1,ne(ke)}return z(65497),new Uint8Array(D)},e=e||50,function(){for(var I=String.fromCharCode,G=0;G<256;G++)we[G]=I(G)}(),t=H(fe,Te),n=H($,Se),r=H($e,q),o=H(B,K),function(){for(var I=1,G=2,se=1;se<=15;se++){for(var ce=I;ce<G;ce++)E[32767+ce]=se,b[32767+ce]=[],b[32767+ce][1]=se,b[32767+ce][0]=ce;for(var pe=-(G-1);pe<=-I;pe++)E[32767+pe]=se,b[32767+pe]=[],b[32767+pe][1]=se,b[32767+pe][0]=G-1+pe;I<<=1,G<<=1}}(),function(){for(var I=0;I<256;I++)Pe[I]=19595*I,Pe[I+256>>0]=38470*I,Pe[I+512>>0]=7471*I+32768,Pe[I+768>>0]=-11059*I,Pe[I+1024>>0]=-21709*I,Pe[I+1280>>0]=32768*I+8421375,Pe[I+1536>>0]=-27439*I,Pe[I+1792>>0]=-5329*I}(),ge(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function jo(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function mm(e){function t(fe){if(!fe)throw Error("assert :P")}function n(fe,Te,$e){for(var q=0;4>q;q++)if(fe[Te+q]!=$e.charCodeAt(q))return!0;return!1}function r(fe,Te,$e,q,$){for(var Se=0;Se<$;Se++)fe[Te+Se]=$e[q+Se]}function o(fe,Te,$e,q){for(var $=0;$<q;$++)fe[Te+$]=$e}function a(fe){return new Int32Array(fe)}function u(fe,Te){for(var $e=[],q=0;q<fe;q++)$e.push(new Te);return $e}function f(fe,Te){var $e=[];return function q($,Se,B){for(var K=B[Se],H=0;H<K&&($.push(B.length>Se+1?[]:new Te),!(B.length<Se+1));H++)q($[H],Se+1,B)}($e,0,fe),$e}var m=function(){var fe=this;function Te(d,y){for(var S=1<<y-1>>>0;d&S;)S>>>=1;return S?(d&S-1)+S:d}function $e(d,y,S,O,X){t(!(O%S));do d[y+(O-=S)]=X;while(0<O)}function q(d,y,S,O,X){if(t(2328>=X),512>=X)var le=a(512);else if((le=a(X))==null)return 0;return function(he,de,ve,Me,Ze,mt){var gt,st,Lt=de,bt=1<<ve,Ye=a(16),tt=a(16);for(t(Ze!=0),t(Me!=null),t(he!=null),t(0<ve),st=0;st<Ze;++st){if(15<Me[st])return 0;++Ye[Me[st]]}if(Ye[0]==Ze)return 0;for(tt[1]=0,gt=1;15>gt;++gt){if(Ye[gt]>1<<gt)return 0;tt[gt+1]=tt[gt]+Ye[gt]}for(st=0;st<Ze;++st)gt=Me[st],0<Me[st]&&(mt[tt[gt]++]=st);if(tt[15]==1)return(Me=new $).g=0,Me.value=mt[0],$e(he,Lt,1,bt,Me),bt;var St,Nt=-1,At=bt-1,Yt=0,$t=1,hn=1,s=1<<ve;for(st=0,gt=1,Ze=2;gt<=ve;++gt,Ze<<=1){if($t+=hn<<=1,0>(hn-=Ye[gt]))return 0;for(;0<Ye[gt];--Ye[gt])(Me=new $).g=gt,Me.value=mt[st++],$e(he,Lt+Yt,Ze,s,Me),Yt=Te(Yt,gt)}for(gt=ve+1,Ze=2;15>=gt;++gt,Ze<<=1){if($t+=hn<<=1,0>(hn-=Ye[gt]))return 0;for(;0<Ye[gt];--Ye[gt]){if(Me=new $,(Yt&At)!=Nt){for(Lt+=s,St=1<<(Nt=gt)-ve;15>Nt&&!(0>=(St-=Ye[Nt]));)++Nt,St<<=1;bt+=s=1<<(St=Nt-ve),he[de+(Nt=Yt&At)].g=St+ve,he[de+Nt].value=Lt-de-Nt}Me.g=gt-ve,Me.value=mt[st++],$e(he,Lt+(Yt>>ve),Ze,s,Me),Yt=Te(Yt,gt)}}return $t!=2*tt[15]-1?0:bt}(d,y,S,O,X,le)}function $(){this.value=this.g=0}function Se(){this.value=this.g=0}function B(){this.G=u(5,$),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ci,Se)}function K(d,y,S,O){t(d!=null),t(y!=null),t(2147483648>O),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=y,d.pa=S,d.Jd=y,d.Yc=S+O,d.Zc=4<=O?S+O-4+1:S,oe(d)}function H(d,y){for(var S=0;0<y--;)S|=me(d,128)<<y;return S}function ne(d,y){var S=H(d,y);return xe(d)?-S:S}function W(d,y,S,O){var X,le=0;for(t(d!=null),t(y!=null),t(4294967288>O),d.Sb=O,d.Ra=0,d.u=0,d.h=0,4<O&&(O=4),X=0;X<O;++X)le+=y[S+X]<<8*X;d.Ra=le,d.bb=O,d.oa=y,d.pa=S}function z(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<sr-8>>>0,++d.bb,d.u-=8;se(d)&&(d.h=1,d.u=0)}function A(d,y){if(t(0<=y),!d.h&&y<=dr){var S=G(d)&aa[y];return d.u+=y,z(d),S}return d.h=1,d.u=0}function ge(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(d){return d.Ra>>>(d.u&sr-1)>>>0}function se(d){return t(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>sr}function ce(d,y){d.u=y,d.h=se(d)}function pe(d){d.u>=la&&(t(d.u>=la),z(d))}function oe(d){t(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(t(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function xe(d){return H(d,1)}function me(d,y){var S=d.Ca;0>d.b&&oe(d);var O=d.b,X=S*y>>>8,le=(d.I>>>O>X)+0;for(le?(S-=X,d.I-=X+1<<O>>>0):S=X+1,O=S,X=0;256<=O;)X+=8,O>>=8;return O=7^X+Ki[O],d.b-=O,d.Ca=(S<<O)-1,le}function je(d,y,S){d[y+0]=S>>24&255,d[y+1]=S>>16&255,d[y+2]=S>>8&255,d[y+3]=S>>0&255}function qe(d,y){return d[y+0]<<0|d[y+1]<<8}function J(d,y){return qe(d,y)|d[y+2]<<16}function te(d,y){return qe(d,y)|qe(d,y+2)<<16}function Ne(d,y){var S=1<<y;return t(d!=null),t(0<y),d.X=a(S),d.X==null?0:(d.Mb=32-y,d.Xa=y,1)}function Ae(d,y){t(d!=null),t(y!=null),t(d.Xa==y.Xa),r(y.X,0,d.X,0,1<<y.Xa)}function ee(){this.X=[],this.Xa=this.Mb=0}function We(d,y,S,O){t(S!=null),t(O!=null);var X=S[0],le=O[0];return X==0&&(X=(d*le+y/2)/y),le==0&&(le=(y*X+d/2)/d),0>=X||0>=le?0:(S[0]=X,O[0]=le,1)}function et(d,y){return d+(1<<y)-1>>>y}function Xe(d,y){return((4278255360&d)+(4278255360&y)>>>0&4278255360)+((16711935&d)+(16711935&y)>>>0&16711935)>>>0}function Oe(d,y){fe[y]=function(S,O,X,le,he,de,ve){var Me;for(Me=0;Me<he;++Me){var Ze=fe[d](de[ve+Me-1],X,le+Me);de[ve+Me]=Xe(S[O+Me],Ze)}}}function ke(){this.ud=this.hd=this.jd=0}function lt(d,y){return((4278124286&(d^y))>>>1)+(d&y)>>>0}function ht(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function it(d,y){return ht(d+(d-y+.5>>1))}function Fe(d,y,S){return Math.abs(y-S)-Math.abs(d-S)}function Pt(d,y,S,O,X,le,he){for(O=le[he-1],S=0;S<X;++S)le[he+S]=O=Xe(d[y+S],O)}function It(d,y,S,O,X){var le;for(le=0;le<S;++le){var he=d[y+le],de=he>>8&255,ve=16711935&(ve=(ve=16711935&he)+((de<<16)+de));O[X+le]=(4278255360&he)+ve>>>0}}function Wt(d,y){y.jd=d>>0&255,y.hd=d>>8&255,y.ud=d>>16&255}function Ut(d,y,S,O,X,le){var he;for(he=0;he<O;++he){var de=y[S+he],ve=de>>>8,Me=de,Ze=255&(Ze=(Ze=de>>>16)+((d.jd<<24>>24)*(ve<<24>>24)>>>5));Me=255&(Me=(Me=Me+((d.hd<<24>>24)*(ve<<24>>24)>>>5))+((d.ud<<24>>24)*(Ze<<24>>24)>>>5)),X[le+he]=(4278255360&de)+(Ze<<16)+Me}}function Xt(d,y,S,O,X){fe[y]=function(le,he,de,ve,Me,Ze,mt,gt,st){for(ve=mt;ve<gt;++ve)for(mt=0;mt<st;++mt)Me[Ze++]=X(de[O(le[he++])])},fe[d]=function(le,he,de,ve,Me,Ze,mt){var gt=8>>le.b,st=le.Ea,Lt=le.K[0],bt=le.w;if(8>gt)for(le=(1<<le.b)-1,bt=(1<<gt)-1;he<de;++he){var Ye,tt=0;for(Ye=0;Ye<st;++Ye)Ye&le||(tt=O(ve[Me++])),Ze[mt++]=X(Lt[tt&bt]),tt>>=gt}else fe["VP8LMapColor"+S](ve,Me,Lt,bt,Ze,mt,he,de,st)}}function Rt(d,y,S,O,X){for(S=y+S;y<S;){var le=d[y++];O[X++]=le>>16&255,O[X++]=le>>8&255,O[X++]=le>>0&255}}function on(d,y,S,O,X){for(S=y+S;y<S;){var le=d[y++];O[X++]=le>>16&255,O[X++]=le>>8&255,O[X++]=le>>0&255,O[X++]=le>>24&255}}function dn(d,y,S,O,X){for(S=y+S;y<S;){var le=(he=d[y++])>>16&240|he>>12&15,he=he>>0&240|he>>28&15;O[X++]=le,O[X++]=he}}function ai(d,y,S,O,X){for(S=y+S;y<S;){var le=(he=d[y++])>>16&248|he>>13&7,he=he>>5&224|he>>3&31;O[X++]=le,O[X++]=he}}function Ct(d,y,S,O,X){for(S=y+S;y<S;){var le=d[y++];O[X++]=le>>0&255,O[X++]=le>>8&255,O[X++]=le>>16&255}}function nn(d,y,S,O,X,le){if(le==0)for(S=y+S;y<S;)je(O,((le=d[y++])[0]>>24|le[1]>>8&65280|le[2]<<8&16711680|le[3]<<24)>>>0),X+=32;else r(O,X,d,y,S)}function Vt(d,y){fe[y][0]=fe[d+"0"],fe[y][1]=fe[d+"1"],fe[y][2]=fe[d+"2"],fe[y][3]=fe[d+"3"],fe[y][4]=fe[d+"4"],fe[y][5]=fe[d+"5"],fe[y][6]=fe[d+"6"],fe[y][7]=fe[d+"7"],fe[y][8]=fe[d+"8"],fe[y][9]=fe[d+"9"],fe[y][10]=fe[d+"10"],fe[y][11]=fe[d+"11"],fe[y][12]=fe[d+"12"],fe[y][13]=fe[d+"13"],fe[y][14]=fe[d+"0"],fe[y][15]=fe[d+"0"]}function ln(d){return d==ar||d==lr||d==Ss||d==i}function li(){this.eb=[],this.size=this.A=this.fb=0}function In(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function fi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new li,this.f.kb=new In,this.sd=null}function xi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Kn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Tt(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Dt(d,y){var S=d.T,O=y.ba.f.RGBA,X=O.eb,le=O.fb+d.ka*O.A,he=Qi[y.ba.S],de=d.y,ve=d.O,Me=d.f,Ze=d.N,mt=d.ea,gt=d.W,st=y.cc,Lt=y.dc,bt=y.Mc,Ye=y.Nc,tt=d.ka,St=d.ka+d.T,Nt=d.U,At=Nt+1>>1;for(tt==0?he(de,ve,null,null,Me,Ze,mt,gt,Me,Ze,mt,gt,X,le,null,null,Nt):(he(y.ec,y.fc,de,ve,st,Lt,bt,Ye,Me,Ze,mt,gt,X,le-O.A,X,le,Nt),++S);tt+2<St;tt+=2)st=Me,Lt=Ze,bt=mt,Ye=gt,Ze+=d.Rc,gt+=d.Rc,le+=2*O.A,he(de,(ve+=2*d.fa)-d.fa,de,ve,st,Lt,bt,Ye,Me,Ze,mt,gt,X,le-O.A,X,le,Nt);return ve+=d.fa,d.j+St<d.o?(r(y.ec,y.fc,de,ve,Nt),r(y.cc,y.dc,Me,Ze,At),r(y.Mc,y.Nc,mt,gt,At),S--):1&St||he(de,ve,null,null,Me,Ze,mt,gt,Me,Ze,mt,gt,X,le+O.A,null,null,Nt),S}function Di(d,y,S){var O=d.F,X=[d.J];if(O!=null){var le=d.U,he=y.ba.S,de=he==Ur||he==Ss;y=y.ba.f.RGBA;var ve=[0],Me=d.ka;ve[0]=d.T,d.Kb&&(Me==0?--ve[0]:(--Me,X[0]-=d.width),d.j+d.ka+d.T==d.o&&(ve[0]=d.o-d.j-Me));var Ze=y.eb;Me=y.fb+Me*y.A,d=Gn(O,X[0],d.width,le,ve,Ze,Me+(de?0:3),y.A),t(S==ve),d&&ln(he)&&zi(Ze,Me,de,le,ve,y.A)}return 0}function qn(d){var y=d.ma,S=y.ba.S,O=11>S,X=S==pn||S==Ro||S==Ur||S==Xi||S==12||ln(S);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Na(y.Oa,d,X?11:12))return 0;if(X&&ln(S)&&Ot(),d.da)alert("todo:use_scaling");else{if(O){if(y.Ib=Tt,d.Kb){if(S=d.U+1>>1,y.memory=a(d.U+2*S),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+d.U,y.Mc=y.cc,y.Nc=y.dc+S,y.Ib=Dt,Ot()}}else alert("todo:EmitYUV");X&&(y.Jb=Di,O&&ot())}if(O&&!ol){for(d=0;256>d;++d)cu[d]=89858*(d-128)+Rl>>uu,hu[d]=-22014*(d-128)+Rl,af[d]=-45773*(d-128),of[d]=113618*(d-128)+Rl>>uu;for(d=Il;d<qu;++d)y=76283*(d-16)+Rl>>uu,fu[d-Il]=Xn(y,255),Oc[d-Il]=Xn(y+8>>4,15);ol=1}return 1}function ms(d){var y=d.ma,S=d.U,O=d.T;return t(!(1&d.ka)),0>=S||0>=O?0:(S=y.Ib(d,y),y.Jb!=null&&y.Jb(d,y,S),y.Dc+=S,1)}function Mr(d){d.ma.memory=null}function cn(d,y,S,O){return A(d,8)!=47?0:(y[0]=A(d,14)+1,S[0]=A(d,14)+1,O[0]=A(d,1),A(d,3)!=0?0:!d.h)}function Xr(d,y){if(4>d)return d+1;var S=d-2>>1;return(2+(1&d)<<S)+A(y,S)+1}function gs(d,y){return 120<y?y-120:1<=(S=((S=Ue[y-1])>>4)*d+(8-(15&S)))?S:1;var S}function cr(d,y,S){var O=G(S),X=d[y+=255&O].g-8;return 0<X&&(ce(S,S.u+8),O=G(S),y+=d[y].value,y+=O&(1<<X)-1),ce(S,S.u+d[y].g),d[y].value}function Vn(d,y,S){return S.g+=d.g,S.value+=d.value<<y>>>0,t(8>=S.g),d.g}function Ht(d,y,S){var O=d.xc;return t((y=O==0?0:d.vc[d.md*(S>>O)+(y>>O)])<d.Wb),d.Ya[y]}function hr(d,y,S,O){var X=d.ab,le=d.c*y,he=d.C;y=he+y;var de=S,ve=O;for(O=d.Ta,S=d.Ua;0<X--;){var Me=d.gc[X],Ze=he,mt=y,gt=de,st=ve,Lt=(ve=O,de=S,Me.Ea);switch(t(Ze<mt),t(mt<=Me.nc),Me.hc){case 2:nl(gt,st,(mt-Ze)*Lt,ve,de);break;case 0:var bt=Ze,Ye=mt,tt=ve,St=de,Nt=(s=Me).Ea;bt==0&&(qs(gt,st,null,null,1,tt,St),Pt(gt,st+1,0,0,Nt-1,tt,St+1),st+=Nt,St+=Nt,++bt);for(var At=1<<s.b,Yt=At-1,$t=et(Nt,s.b),hn=s.K,s=s.w+(bt>>s.b)*$t;bt<Ye;){var l=hn,h=s,p=1;for(Er(gt,st,tt,St-Nt,1,tt,St);p<Nt;){var v=(p&~Yt)+At;v>Nt&&(v=Nt),(0,$s[l[h++]>>8&15])(gt,st+ +p,tt,St+p-Nt,v-p,tt,St+p),p=v}st+=Nt,St+=Nt,++bt&Yt||(s+=$t)}mt!=Me.nc&&r(ve,de-Lt,ve,de+(mt-Ze-1)*Lt,Lt);break;case 1:for(Lt=gt,Ye=st,Nt=(gt=Me.Ea)-(St=gt&~(tt=(st=1<<Me.b)-1)),bt=et(gt,Me.b),At=Me.K,Me=Me.w+(Ze>>Me.b)*bt;Ze<mt;){for(Yt=At,$t=Me,hn=new ke,s=Ye+St,l=Ye+gt;Ye<s;)Wt(Yt[$t++],hn),Ls(hn,Lt,Ye,st,ve,de),Ye+=st,de+=st;Ye<l&&(Wt(Yt[$t++],hn),Ls(hn,Lt,Ye,Nt,ve,de),Ye+=Nt,de+=Nt),++Ze&tt||(Me+=bt)}break;case 3:if(gt==ve&&st==de&&0<Me.b){for(Ye=ve,gt=Lt=de+(mt-Ze)*Lt-(St=(mt-Ze)*et(Me.Ea,Me.b)),st=ve,tt=de,bt=[],St=(Nt=St)-1;0<=St;--St)bt[St]=st[tt+St];for(St=Nt-1;0<=St;--St)Ye[gt+St]=bt[St];Mi(Me,Ze,mt,ve,Lt,ve,de)}else Mi(Me,Ze,mt,gt,st,ve,de)}de=O,ve=S}ve!=S&&r(O,S,de,ve,le)}function wo(d,y){var S=d.V,O=d.Ba+d.c*d.C,X=y-d.C;if(t(y<=d.l.o),t(16>=X),0<X){var le=d.l,he=d.Ta,de=d.Ua,ve=le.width;if(hr(d,X,S,O),X=de=[de],t((S=d.C)<(O=y)),t(le.v<le.va),O>le.o&&(O=le.o),S<le.j){var Me=le.j-S;S=le.j,X[0]+=Me*ve}if(S>=O?S=0:(X[0]+=4*le.v,le.ka=S-le.j,le.U=le.va-le.v,le.T=O-S,S=1),S){if(de=de[0],11>(S=d.ca).S){var Ze=S.f.RGBA,mt=(O=S.S,X=le.U,le=le.T,Me=Ze.eb,Ze.A),gt=le;for(Ze=Ze.fb+d.Ma*Ze.A;0<gt--;){var st=he,Lt=de,bt=X,Ye=Me,tt=Ze;switch(O){case vr:ji(st,Lt,bt,Ye,tt);break;case pn:Oi(st,Lt,bt,Ye,tt);break;case ar:Oi(st,Lt,bt,Ye,tt),zi(Ye,tt,0,bt,1,0);break;case rl:Fr(st,Lt,bt,Ye,tt);break;case Ro:nn(st,Lt,bt,Ye,tt,1);break;case lr:nn(st,Lt,bt,Ye,tt,1),zi(Ye,tt,0,bt,1,0);break;case Ur:nn(st,Lt,bt,Ye,tt,0);break;case Ss:nn(st,Lt,bt,Ye,tt,0),zi(Ye,tt,1,bt,1,0);break;case Xi:ns(st,Lt,bt,Ye,tt);break;case i:ns(st,Lt,bt,Ye,tt),Jn(Ye,tt,bt,1,0);break;case Nl:pr(st,Lt,bt,Ye,tt);break;default:t(0)}de+=ve,Ze+=mt}d.Ma+=le}else alert("todo:EmitRescaledRowsYUVA");t(d.Ma<=S.height)}}d.C=y,t(d.C<=d.i)}function Qr(d){var y;if(0<d.ua)return 0;for(y=0;y<d.Wb;++y){var S=d.Ya[y].G,O=d.Ya[y].H;if(0<S[1][O[1]+0].g||0<S[2][O[2]+0].g||0<S[3][O[3]+0].g)return 0}return 1}function Br(d,y,S,O,X,le){if(d.Z!=0){var he=d.qd,de=d.rd;for(t(Yn[d.Z]!=null);y<S;++y)Yn[d.Z](he,de,O,X,O,X,le),he=O,de=X,X+=le;d.qd=he,d.rd=de}}function Lr(d,y){var S=d.l.ma,O=S.Z==0||S.Z==1?d.l.j:d.C;if(O=d.C<O?O:d.C,t(y<=d.l.o),y>O){var X=d.l.width,le=S.ca,he=S.tb+X*O,de=d.V,ve=d.Ba+d.c*O,Me=d.gc;t(d.ab==1),t(Me[0].hc==3),Ir(Me[0],O,y,de,ve,le,he),Br(S,O,y,le,he,X)}d.C=d.Ma=y}function Tr(d,y,S,O,X,le,he){var de=d.$/O,ve=d.$%O,Me=d.m,Ze=d.s,mt=S+d.$,gt=mt;X=S+O*X;var st=S+O*le,Lt=280+Ze.ua,bt=d.Pb?de:16777216,Ye=0<Ze.ua?Ze.Wa:null,tt=Ze.wc,St=mt<st?Ht(Ze,ve,de):null;t(d.C<le),t(st<=X);var Nt=!1;e:for(;;){for(;Nt||mt<st;){var At=0;if(de>=bt){var Yt=mt-S;t((bt=d).Pb),bt.wd=bt.m,bt.xd=Yt,0<bt.s.ua&&Ae(bt.s.Wa,bt.s.vb),bt=de+_t}if(ve&tt||(St=Ht(Ze,ve,de)),t(St!=null),St.Qb&&(y[mt]=St.qb,Nt=!0),!Nt)if(pe(Me),St.jc){At=Me,Yt=y;var $t=mt,hn=St.pd[G(At)&Ci-1];t(St.jc),256>hn.g?(ce(At,At.u+hn.g),Yt[$t]=hn.value,At=0):(ce(At,At.u+hn.g-256),t(256<=hn.value),At=hn.value),At==0&&(Nt=!0)}else At=cr(St.G[0],St.H[0],Me);if(Me.h)break;if(Nt||256>At){if(!Nt)if(St.nd)y[mt]=(St.qb|At<<8)>>>0;else{if(pe(Me),Nt=cr(St.G[1],St.H[1],Me),pe(Me),Yt=cr(St.G[2],St.H[2],Me),$t=cr(St.G[3],St.H[3],Me),Me.h)break;y[mt]=($t<<24|Nt<<16|At<<8|Yt)>>>0}if(Nt=!1,++mt,++ve>=O&&(ve=0,++de,he!=null&&de<=le&&!(de%16)&&he(d,de),Ye!=null))for(;gt<mt;)At=y[gt++],Ye.X[(506832829*At&4294967295)>>>Ye.Mb]=At}else if(280>At){if(At=Xr(At-256,Me),Yt=cr(St.G[4],St.H[4],Me),pe(Me),Yt=gs(O,Yt=Xr(Yt,Me)),Me.h)break;if(mt-S<Yt||X-mt<At)break e;for($t=0;$t<At;++$t)y[mt+$t]=y[mt+$t-Yt];for(mt+=At,ve+=At;ve>=O;)ve-=O,++de,he!=null&&de<=le&&!(de%16)&&he(d,de);if(t(mt<=X),ve&tt&&(St=Ht(Ze,ve,de)),Ye!=null)for(;gt<mt;)At=y[gt++],Ye.X[(506832829*At&4294967295)>>>Ye.Mb]=At}else{if(!(At<Lt))break e;for(Nt=At-280,t(Ye!=null);gt<mt;)At=y[gt++],Ye.X[(506832829*At&4294967295)>>>Ye.Mb]=At;At=mt,t(!(Nt>>>(Yt=Ye).Xa)),y[At]=Yt.X[Nt],Nt=!0}Nt||t(Me.h==se(Me))}if(d.Pb&&Me.h&&mt<X)t(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Ae(d.s.vb,d.s.Wa);else{if(Me.h)break e;he!=null&&he(d,de>le?le:de),d.a=0,d.$=mt-S}return 1}return d.a=3,0}function tr(d){t(d!=null),d.vc=null,d.yc=null,d.Ya=null;var y=d.Wa;y!=null&&(y.X=null),d.vb=null,t(d!=null)}function Cr(){var d=new Ba;return d==null?null:(d.a=0,d.xb=Ol,Vt("Predictor","VP8LPredictors"),Vt("Predictor","VP8LPredictors_C"),Vt("PredictorAdd","VP8LPredictorsAdd"),Vt("PredictorAdd","VP8LPredictorsAdd_C"),nl=It,Ls=Ut,ji=Rt,Oi=on,ns=dn,pr=ai,Fr=Ct,fe.VP8LMapColor32b=xs,fe.VP8LMapColor8b=Do,d)}function vs(d,y,S,O,X){var le=1,he=[d],de=[y],ve=O.m,Me=O.s,Ze=null,mt=0;e:for(;;){if(S)for(;le&&A(ve,1);){var gt=he,st=de,Lt=O,bt=1,Ye=Lt.m,tt=Lt.gc[Lt.ab],St=A(Ye,2);if(Lt.Oc&1<<St)le=0;else{switch(Lt.Oc|=1<<St,tt.hc=St,tt.Ea=gt[0],tt.nc=st[0],tt.K=[null],++Lt.ab,t(4>=Lt.ab),St){case 0:case 1:tt.b=A(Ye,3)+2,bt=vs(et(tt.Ea,tt.b),et(tt.nc,tt.b),0,Lt,tt.K),tt.K=tt.K[0];break;case 3:var Nt,At=A(Ye,8)+1,Yt=16<At?0:4<At?1:2<At?2:3;if(gt[0]=et(tt.Ea,Yt),tt.b=Yt,Nt=bt=vs(At,1,0,Lt,tt.K)){var $t,hn=At,s=tt,l=1<<(8>>s.b),h=a(l);if(h==null)Nt=0;else{var p=s.K[0],v=s.w;for(h[0]=s.K[0][0],$t=1;$t<1*hn;++$t)h[$t]=Xe(p[v+$t],h[$t-1]);for(;$t<4*l;++$t)h[$t]=0;s.K[0]=null,s.K[0]=h,Nt=1}}bt=Nt;break;case 2:break;default:t(0)}le=bt}}if(he=he[0],de=de[0],le&&A(ve,1)&&!(le=1<=(mt=A(ve,4))&&11>=mt)){O.a=3;break e}var k;if(k=le)t:{var T,N,V,re=O,Ie=he,Be=de,Qe=mt,dt=S,Et=re.m,jt=re.s,qt=[null],mn=1,Re=0,ze=ft[Qe];n:for(;;){if(dt&&A(Et,1)){var Ke=A(Et,3)+2,vt=et(Ie,Ke),rt=et(Be,Ke),pt=vt*rt;if(!vs(vt,rt,0,re,qt))break n;for(qt=qt[0],jt.xc=Ke,T=0;T<pt;++T){var Z=qt[T]>>8&65535;qt[T]=Z,Z>=mn&&(mn=Z+1)}}if(Et.h)break n;for(N=0;5>N;++N){var ae=P[N];!N&&0<Qe&&(ae+=1<<Qe),Re<ae&&(Re=ae)}var be=u(mn*ze,$),_e=mn,Le=u(_e,B);if(Le==null)var Ce=null;else t(65536>=_e),Ce=Le;var Ge=a(Re);if(Ce==null||Ge==null||be==null){re.a=1;break n}var Ve=be;for(T=V=0;T<mn;++T){var Je=Ce[T],ct=Je.G,ut=Je.H,Mt=0,Kt=1,Qt=0;for(N=0;5>N;++N){ae=P[N],ct[N]=Ve,ut[N]=V,!N&&0<Qe&&(ae+=1<<Qe);r:{var rn,$n=ae,Wn=re,Rn=Ge,ti=Ve,yr=V,al=0,fo=Wn.m,$u=A(fo,1);if(o(Rn,0,0,$n),$u){var po=A(fo,1)+1,Fl=A(fo,1),ss=A(fo,Fl==0?1:8);Rn[ss]=1,po==2&&(Rn[ss=A(fo,8)]=1);var er=1}else{var bi=a(19),rp=A(fo,4)+4;if(19<rp){Wn.a=3;var zc=0;break r}for(rn=0;rn<rp;++rn)bi[ue[rn]]=A(fo,3);var lf=void 0,Vu=void 0,sp=Wn,sv=bi,Uc=$n,op=Rn,uf=0,ll=sp.m,ap=8,lp=u(128,$);i:for(;q(lp,0,7,sv,19);){if(A(ll,1)){var ov=2+2*A(ll,3);if((lf=2+A(ll,ov))>Uc)break i}else lf=Uc;for(Vu=0;Vu<Uc&&lf--;){pe(ll);var up=lp[0+(127&G(ll))];ce(ll,ll.u+up.g);var pu=up.value;if(16>pu)op[Vu++]=pu,pu!=0&&(ap=pu);else{var av=pu==16,cp=pu-16,lv=g[cp],hp=A(ll,c[cp])+lv;if(Vu+hp>Uc)break i;for(var uv=av?ap:0;0<hp--;)op[Vu++]=uv}}uf=1;break i}uf||(sp.a=3),er=uf}(er=er&&!fo.h)&&(al=q(ti,yr,8,Rn,$n)),er&&al!=0?zc=al:(Wn.a=3,zc=0)}if(zc==0)break n;if(Kt&&R[N]==1&&(Kt=Ve[V].g==0),Mt+=Ve[V].g,V+=zc,3>=N){var Hu,cf=Ge[0];for(Hu=1;Hu<ae;++Hu)Ge[Hu]>cf&&(cf=Ge[Hu]);Qt+=cf}}if(Je.nd=Kt,Je.Qb=0,Kt&&(Je.qb=(ct[3][ut[3]+0].value<<24|ct[1][ut[1]+0].value<<16|ct[2][ut[2]+0].value)>>>0,Mt==0&&256>ct[0][ut[0]+0].value&&(Je.Qb=1,Je.qb+=ct[0][ut[0]+0].value<<8)),Je.jc=!Je.Qb&&6>Qt,Je.jc){var qc,Ra=Je;for(qc=0;qc<Ci;++qc){var ul=qc,cl=Ra.pd[ul],$c=Ra.G[0][Ra.H[0]+ul];256<=$c.value?(cl.g=$c.g+256,cl.value=$c.value):(cl.g=0,cl.value=0,ul>>=Vn($c,8,cl),ul>>=Vn(Ra.G[1][Ra.H[1]+ul],16,cl),ul>>=Vn(Ra.G[2][Ra.H[2]+ul],0,cl),Vn(Ra.G[3][Ra.H[3]+ul],24,cl))}}}jt.vc=qt,jt.Wb=mn,jt.Ya=Ce,jt.yc=be,k=1;break t}k=0}if(!(le=k)){O.a=3;break e}if(0<mt){if(Me.ua=1<<mt,!Ne(Me.Wa,mt)){O.a=1,le=0;break e}}else Me.ua=0;var hf=O,fp=he,cv=de,ff=hf.s,df=ff.xc;if(hf.c=fp,hf.i=cv,ff.md=et(fp,df),ff.wc=df==0?-1:(1<<df)-1,S){O.xb=zu;break e}if((Ze=a(he*de))==null){O.a=1,le=0;break e}le=(le=Tr(O,Ze,0,he,de,de,null))&&!ve.h;break e}return le?(X!=null?X[0]=Ze:(t(Ze==null),t(S)),O.$=0,S||tr(Me)):tr(Me),le}function xo(d,y){var S=d.c*d.i,O=S+y+16*y;return t(d.c<=y),d.V=a(O),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+S+y,1)}function Zo(d,y){var S=d.C,O=y-S,X=d.V,le=d.Ba+d.c*S;for(t(y<=d.l.o);0<O;){var he=16<O?16:O,de=d.l.ma,ve=d.l.width,Me=ve*he,Ze=de.ca,mt=de.tb+ve*S,gt=d.Ta,st=d.Ua;hr(d,he,X,le),yi(gt,st,Ze,mt,Me),Br(de,S,S+he,Ze,mt,ve),O-=he,X+=he*d.c,S+=he}t(S==y),d.C=d.Ma=y}function Ko(){this.ub=this.yd=this.td=this.Rb=0}function Ds(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ys(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Lo(){this.Yb=function(){var d=[];return function y(S,O,X){for(var le=X[O],he=0;he<le&&(S.push(X.length>O+1?[]:0),!(X.length<O+1));he++)y(S[he],O+1,X)}(d,0,[3,11]),d}()}function Ml(){this.jb=a(3),this.Wc=f([4,8],Lo),this.Xc=f([4,17],Lo)}function Bl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Jo(){this.ld=this.La=this.dd=this.tc=0}function Ka(){this.Na=this.la=0}function Tl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Co(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ko(){this.uc=this.M=this.Nb=0,this.wa=Array(new Jo),this.Y=0,this.ya=Array(new Co),this.aa=0,this.l=new kr}function xa(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Ja(){this.cb=this.a=0,this.sc="",this.m=new ge,this.Od=new Ko,this.Kc=new Ds,this.ed=new Bl,this.Qa=new Ys,this.Ic=this.$c=this.Aa=0,this.D=new ko,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,ge),this.ia=0,this.pb=u(4,Tl),this.Pa=new Ml,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xa),this.Hd=0,this.rb=Array(new Ka),this.sb=0,this.wa=Array(new Jo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Co),this.L=this.aa=0,this.gd=f([4,2],Jo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function kr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fn(){var d=new Ja;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,an||(an=_s)),d}function wn(d,y,S){return d.a==0&&(d.a=y,d.sc=S,d.cb=0),0}function Xs(d,y,S){return 3<=S&&d[y+0]==157&&d[y+1]==1&&d[y+2]==42}function Os(d,y){if(d==null)return 0;if(d.a=0,d.sc="OK",y==null)return wn(d,2,"null VP8Io passed to VP8GetHeaders()");var S=y.data,O=y.w,X=y.ha;if(4>X)return wn(d,7,"Truncated header.");var le=S[O+0]|S[O+1]<<8|S[O+2]<<16,he=d.Od;if(he.Rb=!(1&le),he.td=le>>1&7,he.yd=le>>4&1,he.ub=le>>5,3<he.td)return wn(d,3,"Incorrect keyframe parameters.");if(!he.yd)return wn(d,4,"Frame not displayable.");O+=3,X-=3;var de=d.Kc;if(he.Rb){if(7>X)return wn(d,7,"cannot parse picture header");if(!Xs(S,O,X))return wn(d,3,"Bad code word");de.c=16383&(S[O+4]<<8|S[O+3]),de.Td=S[O+4]>>6,de.i=16383&(S[O+6]<<8|S[O+5]),de.Ud=S[O+6]>>6,O+=7,X-=7,d.za=de.c+15>>4,d.Ub=de.i+15>>4,y.width=de.c,y.height=de.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,o((le=d.Pa).jb,0,255,le.jb.length),t((le=d.Qa)!=null),le.Cb=0,le.Bb=0,le.Fb=1,o(le.Zb,0,0,le.Zb.length),o(le.Lb,0,0,le.Lb)}if(he.ub>X)return wn(d,7,"bad partition length");K(le=d.m,S,O,he.ub),O+=he.ub,X-=he.ub,he.Rb&&(de.Ld=xe(le),de.Kd=xe(le)),de=d.Qa;var ve,Me=d.Pa;if(t(le!=null),t(de!=null),de.Cb=xe(le),de.Cb){if(de.Bb=xe(le),xe(le)){for(de.Fb=xe(le),ve=0;4>ve;++ve)de.Zb[ve]=xe(le)?ne(le,7):0;for(ve=0;4>ve;++ve)de.Lb[ve]=xe(le)?ne(le,6):0}if(de.Bb)for(ve=0;3>ve;++ve)Me.jb[ve]=xe(le)?H(le,8):255}else de.Bb=0;if(le.Ka)return wn(d,3,"cannot parse segment header");if((de=d.ed).zd=xe(le),de.Tb=H(le,6),de.wb=H(le,3),de.Pc=xe(le),de.Pc&&xe(le)){for(Me=0;4>Me;++Me)xe(le)&&(de.vd[Me]=ne(le,6));for(Me=0;4>Me;++Me)xe(le)&&(de.od[Me]=ne(le,6))}if(d.L=de.Tb==0?0:de.zd?1:2,le.Ka)return wn(d,3,"cannot parse filter header");var Ze=X;if(X=ve=O,O=ve+Ze,de=Ze,d.Xb=(1<<H(d.m,2))-1,Ze<3*(Me=d.Xb))S=7;else{for(ve+=3*Me,de-=3*Me,Ze=0;Ze<Me;++Ze){var mt=S[X+0]|S[X+1]<<8|S[X+2]<<16;mt>de&&(mt=de),K(d.Jc[+Ze],S,ve,mt),ve+=mt,de-=mt,X+=3}K(d.Jc[+Me],S,ve,de),S=ve<O?0:5}if(S!=0)return wn(d,S,"cannot parse partitions");for(S=H(ve=d.m,7),X=xe(ve)?ne(ve,4):0,O=xe(ve)?ne(ve,4):0,de=xe(ve)?ne(ve,4):0,Me=xe(ve)?ne(ve,4):0,ve=xe(ve)?ne(ve,4):0,Ze=d.Qa,mt=0;4>mt;++mt){if(Ze.Cb){var gt=Ze.Zb[mt];Ze.Fb||(gt+=S)}else{if(0<mt){d.pb[mt]=d.pb[0];continue}gt=S}var st=d.pb[mt];st.Sc[0]=Bt[Xn(gt+X,127)],st.Sc[1]=Zt[Xn(gt+0,127)],st.Eb[0]=2*Bt[Xn(gt+O,127)],st.Eb[1]=101581*Zt[Xn(gt+de,127)]>>16,8>st.Eb[1]&&(st.Eb[1]=8),st.Qc[0]=Bt[Xn(gt+Me,117)],st.Qc[1]=Zt[Xn(gt+ve,127)],st.lc=gt+ve}if(!he.Rb)return wn(d,4,"Not a key frame.");for(xe(le),he=d.Pa,S=0;4>S;++S){for(X=0;8>X;++X)for(O=0;3>O;++O)for(de=0;11>de;++de)Me=me(le,Es[S][X][O][de])?H(le,8):_r[S][X][O][de],he.Wc[S][X].Yb[O][de]=Me;for(X=0;17>X;++X)he.Xc[S][X]=he.Wc[S][Dl[X]]}return d.kc=xe(le),d.kc&&(d.Bd=H(le,8)),d.cb=1}function _s(d,y,S,O,X,le,he){var de=y[X].Yb[S];for(S=0;16>X;++X){if(!me(d,de[S+0]))return X;for(;!me(d,de[S+1]);)if(de=y[++X].Yb[0],S=0,X==16)return 16;var ve=y[X+1].Yb;if(me(d,de[S+2])){var Me=d,Ze=0;if(me(Me,(gt=de)[(mt=S)+3]))if(me(Me,gt[mt+6])){for(de=0,mt=2*(Ze=me(Me,gt[mt+8]))+(gt=me(Me,gt[mt+9+Ze])),Ze=0,gt=An[mt];gt[de];++de)Ze+=Ze+me(Me,gt[de]);Ze+=3+(8<<mt)}else me(Me,gt[mt+7])?(Ze=7+2*me(Me,165),Ze+=me(Me,145)):Ze=5+me(Me,159);else Ze=me(Me,gt[mt+4])?3+me(Me,gt[mt+5]):2;de=ve[2]}else Ze=1,de=ve[1];ve=he+ur[X],0>(Me=d).b&&oe(Me);var mt,gt=Me.b,st=(mt=Me.Ca>>1)-(Me.I>>gt)>>31;--Me.b,Me.Ca+=st,Me.Ca|=1,Me.I-=(mt+1&st)<<gt,le[ve]=((Ze^st)-st)*O[(0<X)+0]}return 16}function Po(d){var y=d.rb[d.sb-1];y.la=0,y.Na=0,o(d.zc,0,0,d.zc.length),d.ja=0}function Cn(d,y){if(d==null)return 0;if(y==null)return wn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Os(d,y))return 0;if(t(d.cb),y.ac==null||y.ac(y)){y.ob&&(d.L=0);var S=du[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=y.v-S>>4,d.zb=y.j-S>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=y.o+15+S>>4,d.Hb=y.va+15+S>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var O=d.ed;for(S=0;4>S;++S){var X;if(d.Qa.Cb){var le=d.Qa.Lb[S];d.Qa.Fb||(le+=O.Tb)}else le=O.Tb;for(X=0;1>=X;++X){var he=d.gd[S][X],de=le;if(O.Pc&&(de+=O.vd[0],X&&(de+=O.od[0])),0<(de=0>de?0:63<de?63:de)){var ve=de;0<O.wb&&(ve=4<O.wb?ve>>2:ve>>1)>9-O.wb&&(ve=9-O.wb),1>ve&&(ve=1),he.dd=ve,he.tc=2*de+ve,he.ld=40<=de?2:15<=de?1:0}else he.tc=0;he.La=X}}}S=0}else wn(d,6,"Frame setup failed"),S=d.a;if(S=S==0){if(S){d.$c=0,0<d.Aa||(d.Ic=Fc);e:{S=d.Ic,O=4*(ve=d.za);var Me=32*ve,Ze=ve+1,mt=0<d.L?ve*(0<d.Aa?2:1):0,gt=(d.Aa==2?2:1)*ve;if((he=O+832+(X=3*(16*S+du[d.L])/2*Me)+(le=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=he)S=0;else{if(he>d.Vb){if(d.Vb=0,d.Ec=a(he),d.Fc=0,d.Ec==null){S=wn(d,1,"no memory during frame initialization.");break e}d.Vb=he}he=d.Ec,de=d.Fc,d.Ac=he,d.Bc=de,de+=O,d.Gd=u(Me,xa),d.Hd=0,d.rb=u(Ze+1,Ka),d.sb=1,d.wa=mt?u(mt,Jo):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=ve),t(!0),d.oc=he,d.pc=de,de+=832,d.ya=u(gt,Co),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=ve),d.R=16*ve,d.B=8*ve,ve=(Me=du[d.L])*d.R,Me=Me/2*d.B,d.sa=he,d.ta=de+ve,d.qa=d.sa,d.ra=d.ta+16*S*d.R+Me,d.Ha=d.qa,d.Ia=d.ra+8*S*d.B+Me,d.$c=0,de+=X,d.mb=le?he:null,d.nb=le?de:null,t(de+le<=d.Fc+d.Vb),Po(d),o(d.Ac,d.Bc,0,O),S=1}}if(S){if(y.ka=0,y.y=d.sa,y.O=d.ta,y.f=d.qa,y.N=d.ra,y.ea=d.Ha,y.Vd=d.Ia,y.fa=d.R,y.Rc=d.B,y.F=null,y.J=0,!il){for(S=-255;255>=S;++S)Qn[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)is[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)co[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)Ps[255+S]=0>S?0:255<S?255:S;il=1}Vs=So,jr=Yo,Cs=ys,or=di,Ji=bs,pi=Ya,Oo=Aa,Da=ws,Oa=Or,Yi=ra,mr=na,ao=ia,ks=Ei,ua=el,lo=Ea,uo=un,Hs=nr,zr=Bo,qr[0]=On,qr[1]=La,qr[2]=xn,qr[3]=Nr,qr[4]=ka,qr[5]=no,qr[6]=ea,qr[7]=Dr,qr[8]=Pa,qr[9]=Fs,rs[0]=Xo,rs[1]=Ca,rs[2]=es,rs[3]=Is,rs[4]=Si,rs[5]=Xa,rs[6]=Qo,Ar[0]=js,Ar[1]=eo,Ar[2]=Eo,Ar[3]=vi,Ar[4]=Ao,Ar[5]=Qa,Ar[6]=ta,S=1}else S=0}S&&(S=function(st,Lt){for(st.M=0;st.M<st.Va;++st.M){var bt,Ye=st.Jc[st.M&st.Xb],tt=st.m,St=st;for(bt=0;bt<St.za;++bt){var Nt=tt,At=St,Yt=At.Ac,$t=At.Bc+4*bt,hn=At.zc,s=At.ya[At.aa+bt];if(At.Qa.Bb?s.$b=me(Nt,At.Pa.jb[0])?2+me(Nt,At.Pa.jb[2]):me(Nt,At.Pa.jb[1]):s.$b=0,At.kc&&(s.Ad=me(Nt,At.Bd)),s.Za=!me(Nt,145)+0,s.Za){var l=s.Ob,h=0;for(At=0;4>At;++At){var p,v=hn[0+At];for(p=0;4>p;++p){v=mi[Yt[$t+p]][v];for(var k=Ti[me(Nt,v[0])];0<k;)k=Ti[2*k+me(Nt,v[k])];v=-k,Yt[$t+p]=v}r(l,h,Yt,$t,4),h+=4,hn[0+At]=v}}else v=me(Nt,156)?me(Nt,128)?1:3:me(Nt,163)?2:0,s.Ob[0]=v,o(Yt,$t,v,4),o(hn,0,v,4);s.Dd=me(Nt,142)?me(Nt,114)?me(Nt,183)?1:3:2:0}if(St.m.Ka)return wn(st,7,"Premature end-of-partition0 encountered.");for(;st.ja<st.za;++st.ja){if(St=Ye,Nt=(tt=st).rb[tt.sb-1],Yt=tt.rb[tt.sb+tt.ja],bt=tt.ya[tt.aa+tt.ja],$t=tt.kc?bt.Ad:0)Nt.la=Yt.la=0,bt.Za||(Nt.Na=Yt.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var T,N;if(Nt=Yt,Yt=St,$t=tt.Pa.Xc,hn=tt.ya[tt.aa+tt.ja],s=tt.pb[hn.$b],At=hn.ad,l=0,h=tt.rb[tt.sb-1],v=p=0,o(At,l,0,384),hn.Za)var V=0,re=$t[3];else{k=a(16);var Ie=Nt.Na+h.Na;if(Ie=an(Yt,$t[1],Ie,s.Eb,0,k,0),Nt.Na=h.Na=(0<Ie)+0,1<Ie)Vs(k,0,At,l);else{var Be=k[0]+3>>3;for(k=0;256>k;k+=16)At[l+k]=Be}V=1,re=$t[0]}var Qe=15&Nt.la,dt=15&h.la;for(k=0;4>k;++k){var Et=1&dt;for(Be=N=0;4>Be;++Be)Qe=Qe>>1|(Et=(Ie=an(Yt,re,Ie=Et+(1&Qe),s.Sc,V,At,l))>V)<<7,N=N<<2|(3<Ie?3:1<Ie?2:At[l+0]!=0),l+=16;Qe>>=4,dt=dt>>1|Et<<7,p=(p<<8|N)>>>0}for(re=Qe,V=dt>>4,T=0;4>T;T+=2){for(N=0,Qe=Nt.la>>4+T,dt=h.la>>4+T,k=0;2>k;++k){for(Et=1&dt,Be=0;2>Be;++Be)Ie=Et+(1&Qe),Qe=Qe>>1|(Et=0<(Ie=an(Yt,$t[2],Ie,s.Qc,0,At,l)))<<3,N=N<<2|(3<Ie?3:1<Ie?2:At[l+0]!=0),l+=16;Qe>>=2,dt=dt>>1|Et<<5}v|=N<<4*T,re|=Qe<<4<<T,V|=(240&dt)<<T}Nt.la=re,h.la=V,hn.Hc=p,hn.Gc=v,hn.ia=43690&v?0:s.ia,$t=!(p|v)}if(0<tt.L&&(tt.wa[tt.Y+tt.ja]=tt.gd[bt.$b][bt.Za],tt.wa[tt.Y+tt.ja].La|=!$t),St.Ka)return wn(st,7,"Premature end-of-file encountered.")}if(Po(st),tt=Lt,St=1,bt=(Ye=st).D,Nt=0<Ye.L&&Ye.M>=Ye.zb&&Ye.M<=Ye.Va,Ye.Aa==0)e:{if(bt.M=Ye.M,bt.uc=Nt,Ta(Ye,bt),St=1,bt=(N=Ye.D).Nb,Nt=(v=du[Ye.L])*Ye.R,Yt=v/2*Ye.B,k=16*bt*Ye.R,Be=8*bt*Ye.B,$t=Ye.sa,hn=Ye.ta-Nt+k,s=Ye.qa,At=Ye.ra-Yt+Be,l=Ye.Ha,h=Ye.Ia-Yt+Be,dt=(Qe=N.M)==0,p=Qe>=Ye.Va-1,Ye.Aa==2&&Ta(Ye,N),N.uc)for(Et=(Ie=Ye).D.M,t(Ie.D.uc),N=Ie.yb;N<Ie.Hb;++N){V=N,re=Et;var jt=(qt=(ae=Ie).D).Nb;T=ae.R;var qt=qt.wa[qt.Y+V],mn=ae.sa,Re=ae.ta+16*jt*T+16*V,ze=qt.dd,Ke=qt.tc;if(Ke!=0)if(t(3<=Ke),ae.L==1)0<V&&uo(mn,Re,T,Ke+4),qt.La&&zr(mn,Re,T,Ke),0<re&&lo(mn,Re,T,Ke+4),qt.La&&Hs(mn,Re,T,Ke);else{var vt=ae.B,rt=ae.qa,pt=ae.ra+8*jt*vt+8*V,Z=ae.Ha,ae=ae.Ia+8*jt*vt+8*V;jt=qt.ld,0<V&&(Da(mn,Re,T,Ke+4,ze,jt),Yi(rt,pt,Z,ae,vt,Ke+4,ze,jt)),qt.La&&(ao(mn,Re,T,Ke,ze,jt),ua(rt,pt,Z,ae,vt,Ke,ze,jt)),0<re&&(Oo(mn,Re,T,Ke+4,ze,jt),Oa(rt,pt,Z,ae,vt,Ke+4,ze,jt)),qt.La&&(mr(mn,Re,T,Ke,ze,jt),ks(rt,pt,Z,ae,vt,Ke,ze,jt))}}if(Ye.ia&&alert("todo:DitherRow"),tt.put!=null){if(N=16*Qe,Qe=16*(Qe+1),dt?(tt.y=Ye.sa,tt.O=Ye.ta+k,tt.f=Ye.qa,tt.N=Ye.ra+Be,tt.ea=Ye.Ha,tt.W=Ye.Ia+Be):(N-=v,tt.y=$t,tt.O=hn,tt.f=s,tt.N=At,tt.ea=l,tt.W=h),p||(Qe-=v),Qe>tt.o&&(Qe=tt.o),tt.F=null,tt.J=null,Ye.Fa!=null&&0<Ye.Fa.length&&N<Qe&&(tt.J=_i(Ye,tt,N,Qe-N),tt.F=Ye.mb,tt.F==null&&tt.F.length==0)){St=wn(Ye,3,"Could not decode alpha data.");break e}N<tt.j&&(v=tt.j-N,N=tt.j,t(!(1&v)),tt.O+=Ye.R*v,tt.N+=Ye.B*(v>>1),tt.W+=Ye.B*(v>>1),tt.F!=null&&(tt.J+=tt.width*v)),N<Qe&&(tt.O+=tt.v,tt.N+=tt.v>>1,tt.W+=tt.v>>1,tt.F!=null&&(tt.J+=tt.v),tt.ka=N-tt.j,tt.U=tt.va-tt.v,tt.T=Qe-N,St=tt.put(tt))}bt+1!=Ye.Ic||p||(r(Ye.sa,Ye.ta-Nt,$t,hn+16*Ye.R,Nt),r(Ye.qa,Ye.ra-Yt,s,At+8*Ye.B,Yt),r(Ye.Ha,Ye.Ia-Yt,l,h+8*Ye.B,Yt))}if(!St)return wn(st,6,"Output aborted.")}return 1}(d,y)),y.bc!=null&&y.bc(y),S&=1}return S?(d.cb=0,S):0}function zn(d,y,S,O,X){X=d[y+S+32*O]+(X>>3),d[y+S+32*O]=-256&X?0>X?0:255:X}function Qs(d,y,S,O,X,le){zn(d,y,0,S,O+X),zn(d,y,1,S,O+le),zn(d,y,2,S,O-le),zn(d,y,3,S,O-X)}function Fi(d){return(20091*d>>16)+d}function Zi(d,y,S,O){var X,le=0,he=a(16);for(X=0;4>X;++X){var de=d[y+0]+d[y+8],ve=d[y+0]-d[y+8],Me=(35468*d[y+4]>>16)-Fi(d[y+12]),Ze=Fi(d[y+4])+(35468*d[y+12]>>16);he[le+0]=de+Ze,he[le+1]=ve+Me,he[le+2]=ve-Me,he[le+3]=de-Ze,le+=4,y++}for(X=le=0;4>X;++X)de=(d=he[le+0]+4)+he[le+8],ve=d-he[le+8],Me=(35468*he[le+4]>>16)-Fi(he[le+12]),zn(S,O,0,0,de+(Ze=Fi(he[le+4])+(35468*he[le+12]>>16))),zn(S,O,1,0,ve+Me),zn(S,O,2,0,ve-Me),zn(S,O,3,0,de-Ze),le++,O+=32}function Ya(d,y,S,O){var X=d[y+0]+4,le=35468*d[y+4]>>16,he=Fi(d[y+4]),de=35468*d[y+1]>>16;Qs(S,O,0,X+he,d=Fi(d[y+1]),de),Qs(S,O,1,X+le,d,de),Qs(S,O,2,X-le,d,de),Qs(S,O,3,X-he,d,de)}function Yo(d,y,S,O,X){Zi(d,y,S,O),X&&Zi(d,y+16,S,O+4)}function ys(d,y,S,O){jr(d,y+0,S,O,1),jr(d,y+32,S,O+128,1)}function di(d,y,S,O){var X;for(d=d[y+0]+4,X=0;4>X;++X)for(y=0;4>y;++y)zn(S,O,y,X,d)}function bs(d,y,S,O){d[y+0]&&or(d,y+0,S,O),d[y+16]&&or(d,y+16,S,O+4),d[y+32]&&or(d,y+32,S,O+128),d[y+48]&&or(d,y+48,S,O+128+4)}function So(d,y,S,O){var X,le=a(16);for(X=0;4>X;++X){var he=d[y+0+X]+d[y+12+X],de=d[y+4+X]+d[y+8+X],ve=d[y+4+X]-d[y+8+X],Me=d[y+0+X]-d[y+12+X];le[0+X]=he+de,le[8+X]=he-de,le[4+X]=Me+ve,le[12+X]=Me-ve}for(X=0;4>X;++X)he=(d=le[0+4*X]+3)+le[3+4*X],de=le[1+4*X]+le[2+4*X],ve=le[1+4*X]-le[2+4*X],Me=d-le[3+4*X],S[O+0]=he+de>>3,S[O+16]=Me+ve>>3,S[O+32]=he-de>>3,S[O+48]=Me-ve>>3,O+=64}function Rs(d,y,S){var O,X=y-32,le=ei,he=255-d[X-1];for(O=0;O<S;++O){var de,ve=le,Me=he+d[y-1];for(de=0;de<S;++de)d[y+de]=ve[Me+d[X+de]];y+=32}}function La(d,y){Rs(d,y,4)}function eo(d,y){Rs(d,y,8)}function Ca(d,y){Rs(d,y,16)}function es(d,y){var S;for(S=0;16>S;++S)r(d,y+32*S,d,y-32,16)}function Is(d,y){var S;for(S=16;0<S;--S)o(d,y,d[y-1],16),y+=32}function to(d,y,S){var O;for(O=0;16>O;++O)o(y,S+32*O,d,16)}function Xo(d,y){var S,O=16;for(S=0;16>S;++S)O+=d[y-1+32*S]+d[y+S-32];to(O>>5,d,y)}function Si(d,y){var S,O=8;for(S=0;16>S;++S)O+=d[y-1+32*S];to(O>>4,d,y)}function Xa(d,y){var S,O=8;for(S=0;16>S;++S)O+=d[y+S-32];to(O>>4,d,y)}function Qo(d,y){to(128,d,y)}function yn(d,y,S){return d+2*y+S+2>>2}function xn(d,y){var S,O=y-32;for(O=new Uint8Array([yn(d[O-1],d[O+0],d[O+1]),yn(d[O+0],d[O+1],d[O+2]),yn(d[O+1],d[O+2],d[O+3]),yn(d[O+2],d[O+3],d[O+4])]),S=0;4>S;++S)r(d,y+32*S,O,0,O.length)}function Nr(d,y){var S=d[y-1],O=d[y-1+32],X=d[y-1+64],le=d[y-1+96];je(d,y+0,16843009*yn(d[y-1-32],S,O)),je(d,y+32,16843009*yn(S,O,X)),je(d,y+64,16843009*yn(O,X,le)),je(d,y+96,16843009*yn(X,le,le))}function On(d,y){var S,O=4;for(S=0;4>S;++S)O+=d[y+S-32]+d[y-1+32*S];for(O>>=3,S=0;4>S;++S)o(d,y+32*S,O,4)}function ka(d,y){var S=d[y-1+0],O=d[y-1+32],X=d[y-1+64],le=d[y-1-32],he=d[y+0-32],de=d[y+1-32],ve=d[y+2-32],Me=d[y+3-32];d[y+0+96]=yn(O,X,d[y-1+96]),d[y+1+96]=d[y+0+64]=yn(S,O,X),d[y+2+96]=d[y+1+64]=d[y+0+32]=yn(le,S,O),d[y+3+96]=d[y+2+64]=d[y+1+32]=d[y+0+0]=yn(he,le,S),d[y+3+64]=d[y+2+32]=d[y+1+0]=yn(de,he,le),d[y+3+32]=d[y+2+0]=yn(ve,de,he),d[y+3+0]=yn(Me,ve,de)}function ea(d,y){var S=d[y+1-32],O=d[y+2-32],X=d[y+3-32],le=d[y+4-32],he=d[y+5-32],de=d[y+6-32],ve=d[y+7-32];d[y+0+0]=yn(d[y+0-32],S,O),d[y+1+0]=d[y+0+32]=yn(S,O,X),d[y+2+0]=d[y+1+32]=d[y+0+64]=yn(O,X,le),d[y+3+0]=d[y+2+32]=d[y+1+64]=d[y+0+96]=yn(X,le,he),d[y+3+32]=d[y+2+64]=d[y+1+96]=yn(le,he,de),d[y+3+64]=d[y+2+96]=yn(he,de,ve),d[y+3+96]=yn(de,ve,ve)}function no(d,y){var S=d[y-1+0],O=d[y-1+32],X=d[y-1+64],le=d[y-1-32],he=d[y+0-32],de=d[y+1-32],ve=d[y+2-32],Me=d[y+3-32];d[y+0+0]=d[y+1+64]=le+he+1>>1,d[y+1+0]=d[y+2+64]=he+de+1>>1,d[y+2+0]=d[y+3+64]=de+ve+1>>1,d[y+3+0]=ve+Me+1>>1,d[y+0+96]=yn(X,O,S),d[y+0+64]=yn(O,S,le),d[y+0+32]=d[y+1+96]=yn(S,le,he),d[y+1+32]=d[y+2+96]=yn(le,he,de),d[y+2+32]=d[y+3+96]=yn(he,de,ve),d[y+3+32]=yn(de,ve,Me)}function Dr(d,y){var S=d[y+0-32],O=d[y+1-32],X=d[y+2-32],le=d[y+3-32],he=d[y+4-32],de=d[y+5-32],ve=d[y+6-32],Me=d[y+7-32];d[y+0+0]=S+O+1>>1,d[y+1+0]=d[y+0+64]=O+X+1>>1,d[y+2+0]=d[y+1+64]=X+le+1>>1,d[y+3+0]=d[y+2+64]=le+he+1>>1,d[y+0+32]=yn(S,O,X),d[y+1+32]=d[y+0+96]=yn(O,X,le),d[y+2+32]=d[y+1+96]=yn(X,le,he),d[y+3+32]=d[y+2+96]=yn(le,he,de),d[y+3+64]=yn(he,de,ve),d[y+3+96]=yn(de,ve,Me)}function Fs(d,y){var S=d[y-1+0],O=d[y-1+32],X=d[y-1+64],le=d[y-1+96];d[y+0+0]=S+O+1>>1,d[y+2+0]=d[y+0+32]=O+X+1>>1,d[y+2+32]=d[y+0+64]=X+le+1>>1,d[y+1+0]=yn(S,O,X),d[y+3+0]=d[y+1+32]=yn(O,X,le),d[y+3+32]=d[y+1+64]=yn(X,le,le),d[y+3+64]=d[y+2+64]=d[y+0+96]=d[y+1+96]=d[y+2+96]=d[y+3+96]=le}function Pa(d,y){var S=d[y-1+0],O=d[y-1+32],X=d[y-1+64],le=d[y-1+96],he=d[y-1-32],de=d[y+0-32],ve=d[y+1-32],Me=d[y+2-32];d[y+0+0]=d[y+2+32]=S+he+1>>1,d[y+0+32]=d[y+2+64]=O+S+1>>1,d[y+0+64]=d[y+2+96]=X+O+1>>1,d[y+0+96]=le+X+1>>1,d[y+3+0]=yn(de,ve,Me),d[y+2+0]=yn(he,de,ve),d[y+1+0]=d[y+3+32]=yn(S,he,de),d[y+1+32]=d[y+3+64]=yn(O,S,he),d[y+1+64]=d[y+3+96]=yn(X,O,S),d[y+1+96]=yn(le,X,O)}function Eo(d,y){var S;for(S=0;8>S;++S)r(d,y+32*S,d,y-32,8)}function vi(d,y){var S;for(S=0;8>S;++S)o(d,y,d[y-1],8),y+=32}function Pr(d,y,S){var O;for(O=0;8>O;++O)o(y,S+32*O,d,8)}function js(d,y){var S,O=8;for(S=0;8>S;++S)O+=d[y+S-32]+d[y-1+32*S];Pr(O>>4,d,y)}function Qa(d,y){var S,O=4;for(S=0;8>S;++S)O+=d[y+S-32];Pr(O>>3,d,y)}function Ao(d,y){var S,O=4;for(S=0;8>S;++S)O+=d[y-1+32*S];Pr(O>>3,d,y)}function ta(d,y){Pr(128,d,y)}function io(d,y,S){var O=d[y-S],X=d[y+0],le=3*(X-O)+ho[1020+d[y-2*S]-d[y+S]],he=Bi[112+(le+4>>3)];d[y-S]=ei[255+O+Bi[112+(le+3>>3)]],d[y+0]=ei[255+X-he]}function Mo(d,y,S,O){var X=d[y+0],le=d[y+S];return gr[255+d[y-2*S]-d[y-S]]>O||gr[255+le-X]>O}function Sa(d,y,S,O){return 4*gr[255+d[y-S]-d[y+0]]+gr[255+d[y-2*S]-d[y+S]]<=O}function Bn(d,y,S,O,X){var le=d[y-3*S],he=d[y-2*S],de=d[y-S],ve=d[y+0],Me=d[y+S],Ze=d[y+2*S],mt=d[y+3*S];return 4*gr[255+de-ve]+gr[255+he-Me]>O?0:gr[255+d[y-4*S]-le]<=X&&gr[255+le-he]<=X&&gr[255+he-de]<=X&&gr[255+mt-Ze]<=X&&gr[255+Ze-Me]<=X&&gr[255+Me-ve]<=X}function Ea(d,y,S,O){var X=2*O+1;for(O=0;16>O;++O)Sa(d,y+O,S,X)&&io(d,y+O,S)}function un(d,y,S,O){var X=2*O+1;for(O=0;16>O;++O)Sa(d,y+O*S,1,X)&&io(d,y+O*S,1)}function nr(d,y,S,O){var X;for(X=3;0<X;--X)Ea(d,y+=4*S,S,O)}function Bo(d,y,S,O){var X;for(X=3;0<X;--X)un(d,y+=4,S,O)}function ro(d,y,S,O,X,le,he,de){for(le=2*le+1;0<X--;){if(Bn(d,y,S,le,he))if(Mo(d,y,S,de))io(d,y,S);else{var ve=d,Me=y,Ze=S,mt=ve[Me-2*Ze],gt=ve[Me-Ze],st=ve[Me+0],Lt=ve[Me+Ze],bt=ve[Me+2*Ze],Ye=27*(St=ho[1020+3*(st-gt)+ho[1020+mt-Lt]])+63>>7,tt=18*St+63>>7,St=9*St+63>>7;ve[Me-3*Ze]=ei[255+ve[Me-3*Ze]+St],ve[Me-2*Ze]=ei[255+mt+tt],ve[Me-Ze]=ei[255+gt+Ye],ve[Me+0]=ei[255+st-Ye],ve[Me+Ze]=ei[255+Lt-tt],ve[Me+2*Ze]=ei[255+bt-St]}y+=O}}function fr(d,y,S,O,X,le,he,de){for(le=2*le+1;0<X--;){if(Bn(d,y,S,le,he))if(Mo(d,y,S,de))io(d,y,S);else{var ve=d,Me=y,Ze=S,mt=ve[Me-Ze],gt=ve[Me+0],st=ve[Me+Ze],Lt=Bi[112+((bt=3*(gt-mt))+4>>3)],bt=Bi[112+(bt+3>>3)],Ye=Lt+1>>1;ve[Me-2*Ze]=ei[255+ve[Me-2*Ze]+Ye],ve[Me-Ze]=ei[255+mt+bt],ve[Me+0]=ei[255+gt-Lt],ve[Me+Ze]=ei[255+st-Ye]}y+=O}}function Aa(d,y,S,O,X,le){ro(d,y,S,1,16,O,X,le)}function ws(d,y,S,O,X,le){ro(d,y,1,S,16,O,X,le)}function na(d,y,S,O,X,le){var he;for(he=3;0<he;--he)fr(d,y+=4*S,S,1,16,O,X,le)}function ia(d,y,S,O,X,le){var he;for(he=3;0<he;--he)fr(d,y+=4,1,S,16,O,X,le)}function Or(d,y,S,O,X,le,he,de){ro(d,y,X,1,8,le,he,de),ro(S,O,X,1,8,le,he,de)}function ra(d,y,S,O,X,le,he,de){ro(d,y,1,X,8,le,he,de),ro(S,O,1,X,8,le,he,de)}function Ei(d,y,S,O,X,le,he,de){fr(d,y+4*X,X,1,8,le,he,de),fr(S,O+4*X,X,1,8,le,he,de)}function el(d,y,S,O,X,le,he,de){fr(d,y+4,1,X,8,le,he,de),fr(S,O+4,1,X,8,le,he,de)}function To(){this.ba=new fi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Kn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Rr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ma(){this.ua=0,this.Wa=new ee,this.vb=new ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new B,this.yc=new $}function Ba(){this.xb=this.a=0,this.l=new kr,this.ca=new fi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ma,this.ab=0,this.gc=u(4,sa),this.Oc=0}function oa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new kr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function so(d,y,S,O,X,le,he){for(d=d==null?0:d[y+0],y=0;y<he;++y)X[le+y]=d+S[O+y]&255,d=X[le+y]}function No(d,y,S,O,X,le,he){var de;if(d==null)so(null,null,S,O,X,le,he);else for(de=0;de<he;++de)X[le+de]=d[y+de]+S[O+de]&255}function oo(d,y,S,O,X,le,he){if(d==null)so(null,null,S,O,X,le,he);else{var de,ve=d[y+0],Me=ve,Ze=ve;for(de=0;de<he;++de)Me=Ze+(ve=d[y+de])-Me,Ze=S[O+de]+(-256&Me?0>Me?0:255:Me)&255,Me=ve,X[le+de]=Ze}}function _i(d,y,S,O){var X=y.width,le=y.o;if(t(d!=null&&y!=null),0>S||0>=O||S+O>le)return null;if(!d.Cc){if(d.ga==null){var he;if(d.ga=new oa,(he=d.ga==null)||(he=y.width*y.o,t(d.Gb.length==0),d.Gb=a(he),d.Uc=0,d.Gb==null?he=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,he=1),he=!he),!he){he=d.ga;var de=d.Fa,ve=d.P,Me=d.qc,Ze=d.mb,mt=d.nb,gt=ve+1,st=Me-1,Lt=he.l;if(t(de!=null&&Ze!=null&&y!=null),Yn[0]=null,Yn[1]=so,Yn[2]=No,Yn[3]=oo,he.ca=Ze,he.tb=mt,he.c=y.width,he.i=y.height,t(0<he.c&&0<he.i),1>=Me)y=0;else if(he.$a=de[ve+0]>>0&3,he.Z=de[ve+0]>>2&3,he.Lc=de[ve+0]>>4&3,ve=de[ve+0]>>6&3,0>he.$a||1<he.$a||4<=he.Z||1<he.Lc||ve)y=0;else if(Lt.put=ms,Lt.ac=qn,Lt.bc=Mr,Lt.ma=he,Lt.width=y.width,Lt.height=y.height,Lt.Da=y.Da,Lt.v=y.v,Lt.va=y.va,Lt.j=y.j,Lt.o=y.o,he.$a)e:{t(he.$a==1),y=Cr();t:for(;;){if(y==null){y=0;break e}if(t(he!=null),he.mc=y,y.c=he.c,y.i=he.i,y.l=he.l,y.l.ma=he,y.l.width=he.c,y.l.height=he.i,y.a=0,W(y.m,de,gt,st),!vs(he.c,he.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&Qr(y.s)?(he.ic=1,de=y.c*y.i,y.Ta=null,y.Ua=0,y.V=a(de),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(he.ic=0,y=xo(y,he.c)),!y))break t;y=1;break e}he.mc=null,y=0}else y=st>=he.c*he.i;he=!y}if(he)return null;d.ga.Lc!=1?d.Ga=0:O=le-S}t(d.ga!=null),t(S+O<=le);e:{if(y=(de=d.ga).c,le=de.l.o,de.$a==0){if(gt=d.rc,st=d.Vc,Lt=d.Fa,ve=d.P+1+S*y,Me=d.mb,Ze=d.nb+S*y,t(ve<=d.P+d.qc),de.Z!=0)for(t(Yn[de.Z]!=null),he=0;he<O;++he)Yn[de.Z](gt,st,Lt,ve,Me,Ze,y),gt=Me,st=Ze,Ze+=y,ve+=y;else for(he=0;he<O;++he)r(Me,Ze,Lt,ve,y),gt=Me,st=Ze,Ze+=y,ve+=y;d.rc=gt,d.Vc=st}else{if(t(de.mc!=null),y=S+O,t((he=de.mc)!=null),t(y<=he.i),he.C>=y)y=1;else if(de.ic||ot(),de.ic){de=he.V,gt=he.Ba,st=he.c;var bt=he.i,Ye=(Lt=1,ve=he.$/st,Me=he.$%st,Ze=he.m,mt=he.s,he.$),tt=st*bt,St=st*y,Nt=mt.wc,At=Ye<St?Ht(mt,Me,ve):null;t(Ye<=tt),t(y<=bt),t(Qr(mt));t:for(;;){for(;!Ze.h&&Ye<St;){if(Me&Nt||(At=Ht(mt,Me,ve)),t(At!=null),pe(Ze),256>(bt=cr(At.G[0],At.H[0],Ze)))de[gt+Ye]=bt,++Ye,++Me>=st&&(Me=0,++ve<=y&&!(ve%16)&&Lr(he,ve));else{if(!(280>bt)){Lt=0;break t}bt=Xr(bt-256,Ze);var Yt,$t=cr(At.G[4],At.H[4],Ze);if(pe(Ze),!(Ye>=($t=gs(st,$t=Xr($t,Ze)))&&tt-Ye>=bt)){Lt=0;break t}for(Yt=0;Yt<bt;++Yt)de[gt+Ye+Yt]=de[gt+Ye+Yt-$t];for(Ye+=bt,Me+=bt;Me>=st;)Me-=st,++ve<=y&&!(ve%16)&&Lr(he,ve);Ye<St&&Me&Nt&&(At=Ht(mt,Me,ve))}t(Ze.h==se(Ze))}Lr(he,ve>y?y:ve);break t}!Lt||Ze.h&&Ye<tt?(Lt=0,he.a=Ze.h?5:3):he.$=Ye,y=Lt}else y=Tr(he,he.V,he.Ba,he.c,he.i,y,Zo);if(!y){O=0;break e}}S+O>=le&&(d.Cc=1),O=1}if(!O)return null;if(d.Cc&&((O=d.ga)!=null&&(O.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+S*X}function C(d,y,S,O,X,le){for(;0<X--;){var he,de=d,ve=y+(S?1:0),Me=d,Ze=y+(S?0:3);for(he=0;he<O;++he){var mt=Me[Ze+4*he];mt!=255&&(mt*=32897,de[ve+4*he+0]=de[ve+4*he+0]*mt>>23,de[ve+4*he+1]=de[ve+4*he+1]*mt>>23,de[ve+4*he+2]=de[ve+4*he+2]*mt>>23)}y+=le}}function Y(d,y,S,O,X){for(;0<O--;){var le;for(le=0;le<S;++le){var he=d[y+2*le+0],de=15&(Me=d[y+2*le+1]),ve=4369*de,Me=(240&Me|Me>>4)*ve>>16;d[y+2*le+0]=(240&he|he>>4)*ve>>16&240|(15&he|he<<4)*ve>>16>>4&15,d[y+2*le+1]=240&Me|de}y+=X}}function De(d,y,S,O,X,le,he,de){var ve,Me,Ze=255;for(Me=0;Me<X;++Me){for(ve=0;ve<O;++ve){var mt=d[y+ve];le[he+4*ve]=mt,Ze&=mt}y+=S,he+=de}return Ze!=255}function He(d,y,S,O,X){var le;for(le=0;le<X;++le)S[O+le]=d[y+le]>>8}function ot(){zi=C,Jn=Y,Gn=De,yi=He}function yt(d,y,S){fe[d]=function(O,X,le,he,de,ve,Me,Ze,mt,gt,st,Lt,bt,Ye,tt,St,Nt){var At,Yt=Nt-1>>1,$t=de[ve+0]|Me[Ze+0]<<16,hn=mt[gt+0]|st[Lt+0]<<16;t(O!=null);var s=3*$t+hn+131074>>2;for(y(O[X+0],255&s,s>>16,bt,Ye),le!=null&&(s=3*hn+$t+131074>>2,y(le[he+0],255&s,s>>16,tt,St)),At=1;At<=Yt;++At){var l=de[ve+At]|Me[Ze+At]<<16,h=mt[gt+At]|st[Lt+At]<<16,p=$t+l+hn+h+524296,v=p+2*(l+hn)>>3;s=v+$t>>1,$t=(p=p+2*($t+h)>>3)+l>>1,y(O[X+2*At-1],255&s,s>>16,bt,Ye+(2*At-1)*S),y(O[X+2*At-0],255&$t,$t>>16,bt,Ye+(2*At-0)*S),le!=null&&(s=p+hn>>1,$t=v+h>>1,y(le[he+2*At-1],255&s,s>>16,tt,St+(2*At-1)*S),y(le[he+2*At+0],255&$t,$t>>16,tt,St+(2*At+0)*S)),$t=l,hn=h}1&Nt||(s=3*$t+hn+131074>>2,y(O[X+Nt-1],255&s,s>>16,bt,Ye+(Nt-1)*S),le!=null&&(s=3*hn+$t+131074>>2,y(le[he+Nt-1],255&s,s>>16,tt,St+(Nt-1)*S)))}}function Ot(){Qi[vr]=Uu,Qi[pn]=au,Qi[rl]=As,Qi[Ro]=Io,Qi[Ur]=sl,Qi[Xi]=lu,Qi[Nl]=Dc,Qi[ar]=au,Qi[lr]=Io,Qi[Ss]=sl,Qi[i]=lu}function Gt(d){return d&-16384?0>d?0:255:d>>sf}function Jt(d,y){return Gt((19077*d>>8)+(26149*y>>8)-14234)}function sn(d,y,S){return Gt((19077*d>>8)-(6419*y>>8)-(13320*S>>8)+8708)}function vn(d,y){return Gt((19077*d>>8)+(33050*y>>8)-17685)}function Tn(d,y,S,O,X){O[X+0]=Jt(d,S),O[X+1]=sn(d,y,S),O[X+2]=vn(d,y)}function si(d,y,S,O,X){O[X+0]=vn(d,y),O[X+1]=sn(d,y,S),O[X+2]=Jt(d,S)}function jn(d,y,S,O,X){var le=sn(d,y,S);y=le<<3&224|vn(d,y)>>3,O[X+0]=248&Jt(d,S)|le>>5,O[X+1]=y}function Hn(d,y,S,O,X){var le=240&vn(d,y)|15;O[X+0]=240&Jt(d,S)|sn(d,y,S)>>4,O[X+1]=le}function Ai(d,y,S,O,X){O[X+0]=255,Tn(d,y,S,O,X+1)}function Li(d,y,S,O,X){si(d,y,S,O,X),O[X+3]=255}function Sr(d,y,S,O,X){Tn(d,y,S,O,X),O[X+3]=255}function Xn(d,y){return 0>d?0:d>y?y:d}function ir(d,y,S){fe[d]=function(O,X,le,he,de,ve,Me,Ze,mt){for(var gt=Ze+(-2&mt)*S;Ze!=gt;)y(O[X+0],le[he+0],de[ve+0],Me,Ze),y(O[X+1],le[he+0],de[ve+0],Me,Ze+S),X+=2,++he,++ve,Ze+=2*S;1&mt&&y(O[X+0],le[he+0],de[ve+0],Me,Ze)}}function tl(d,y,S){return S==0?d==0?y==0?6:5:y==0?4:0:S}function rr(d,y,S,O,X){switch(d>>>30){case 3:jr(y,S,O,X,0);break;case 2:pi(y,S,O,X);break;case 1:or(y,S,O,X)}}function Ta(d,y){var S,O,X=y.M,le=y.Nb,he=d.oc,de=d.pc+40,ve=d.oc,Me=d.pc+584,Ze=d.oc,mt=d.pc+600;for(S=0;16>S;++S)he[de+32*S-1]=129;for(S=0;8>S;++S)ve[Me+32*S-1]=129,Ze[mt+32*S-1]=129;for(0<X?he[de-1-32]=ve[Me-1-32]=Ze[mt-1-32]=129:(o(he,de-32-1,127,21),o(ve,Me-32-1,127,9),o(Ze,mt-32-1,127,9)),O=0;O<d.za;++O){var gt=y.ya[y.aa+O];if(0<O){for(S=-1;16>S;++S)r(he,de+32*S-4,he,de+32*S+12,4);for(S=-1;8>S;++S)r(ve,Me+32*S-4,ve,Me+32*S+4,4),r(Ze,mt+32*S-4,Ze,mt+32*S+4,4)}var st=d.Gd,Lt=d.Hd+O,bt=gt.ad,Ye=gt.Hc;if(0<X&&(r(he,de-32,st[Lt].y,0,16),r(ve,Me-32,st[Lt].f,0,8),r(Ze,mt-32,st[Lt].ea,0,8)),gt.Za){var tt=he,St=de-32+16;for(0<X&&(O>=d.za-1?o(tt,St,st[Lt].y[15],4):r(tt,St,st[Lt+1].y,0,4)),S=0;4>S;S++)tt[St+128+S]=tt[St+256+S]=tt[St+384+S]=tt[St+0+S];for(S=0;16>S;++S,Ye<<=2)tt=he,St=de+Rc[S],qr[gt.Ob[S]](tt,St),rr(Ye,bt,16*+S,tt,St)}else if(tt=tl(O,X,gt.Ob[0]),rs[tt](he,de),Ye!=0)for(S=0;16>S;++S,Ye<<=2)rr(Ye,bt,16*+S,he,de+Rc[S]);for(S=gt.Gc,tt=tl(O,X,gt.Dd),Ar[tt](ve,Me),Ar[tt](Ze,mt),Ye=bt,tt=ve,St=Me,255&(gt=S>>0)&&(170&gt?Cs(Ye,256,tt,St):Ji(Ye,256,tt,St)),gt=Ze,Ye=mt,255&(S>>=8)&&(170&S?Cs(bt,320,gt,Ye):Ji(bt,320,gt,Ye)),X<d.Ub-1&&(r(st[Lt].y,0,he,de+480,16),r(st[Lt].f,0,ve,Me+224,8),r(st[Lt].ea,0,Ze,mt+224,8)),S=8*le*d.B,st=d.sa,Lt=d.ta+16*O+16*le*d.R,bt=d.qa,gt=d.ra+8*O+S,Ye=d.Ha,tt=d.Ia+8*O+S,S=0;16>S;++S)r(st,Lt+S*d.R,he,de+32*S,16);for(S=0;8>S;++S)r(bt,gt+S*d.B,ve,Me+32*S,8),r(Ye,tt+S*d.B,Ze,mt+32*S,8)}}function ts(d,y,S,O,X,le,he,de,ve){var Me=[0],Ze=[0],mt=0,gt=ve!=null?ve.kd:0,st=ve??new Rr;if(d==null||12>S)return 7;st.data=d,st.w=y,st.ha=S,y=[y],S=[S],st.gb=[st.gb];e:{var Lt=y,bt=S,Ye=st.gb;if(t(d!=null),t(bt!=null),t(Ye!=null),Ye[0]=0,12<=bt[0]&&!n(d,Lt[0],"RIFF")){if(n(d,Lt[0]+8,"WEBP")){Ye=3;break e}var tt=te(d,Lt[0]+4);if(12>tt||4294967286<tt){Ye=3;break e}if(gt&&tt>bt[0]-8){Ye=7;break e}Ye[0]=tt,Lt[0]+=12,bt[0]-=12}Ye=0}if(Ye!=0)return Ye;for(tt=0<st.gb[0],S=S[0];;){e:{var St=d;bt=y,Ye=S;var Nt=Me,At=Ze,Yt=Lt=[0];if((s=mt=[mt])[0]=0,8>Ye[0])Ye=7;else{if(!n(St,bt[0],"VP8X")){if(te(St,bt[0]+4)!=10){Ye=3;break e}if(18>Ye[0]){Ye=7;break e}var $t=te(St,bt[0]+8),hn=1+J(St,bt[0]+12);if(2147483648<=hn*(St=1+J(St,bt[0]+15))){Ye=3;break e}Yt!=null&&(Yt[0]=$t),Nt!=null&&(Nt[0]=hn),At!=null&&(At[0]=St),bt[0]+=18,Ye[0]-=18,s[0]=1}Ye=0}}if(mt=mt[0],Lt=Lt[0],Ye!=0)return Ye;if(bt=!!(2&Lt),!tt&&mt)return 3;if(le!=null&&(le[0]=!!(16&Lt)),he!=null&&(he[0]=bt),de!=null&&(de[0]=0),he=Me[0],Lt=Ze[0],mt&&bt&&ve==null){Ye=0;break}if(4>S){Ye=7;break}if(tt&&mt||!tt&&!mt&&!n(d,y[0],"ALPH")){S=[S],st.na=[st.na],st.P=[st.P],st.Sa=[st.Sa];e:{$t=d,Ye=y,tt=S;var s=st.gb;Nt=st.na,At=st.P,Yt=st.Sa,hn=22,t($t!=null),t(tt!=null),St=Ye[0];var l=tt[0];for(t(Nt!=null),t(Yt!=null),Nt[0]=null,At[0]=null,Yt[0]=0;;){if(Ye[0]=St,tt[0]=l,8>l){Ye=7;break e}var h=te($t,St+4);if(4294967286<h){Ye=3;break e}var p=8+h+1&-2;if(hn+=p,0<s&&hn>s){Ye=3;break e}if(!n($t,St,"VP8 ")||!n($t,St,"VP8L")){Ye=0;break e}if(l[0]<p){Ye=7;break e}n($t,St,"ALPH")||(Nt[0]=$t,At[0]=St+8,Yt[0]=h),St+=p,l-=p}}if(S=S[0],st.na=st.na[0],st.P=st.P[0],st.Sa=st.Sa[0],Ye!=0)break}S=[S],st.Ja=[st.Ja],st.xa=[st.xa];e:if(s=d,Ye=y,tt=S,Nt=st.gb[0],At=st.Ja,Yt=st.xa,$t=Ye[0],St=!n(s,$t,"VP8 "),hn=!n(s,$t,"VP8L"),t(s!=null),t(tt!=null),t(At!=null),t(Yt!=null),8>tt[0])Ye=7;else{if(St||hn){if(s=te(s,$t+4),12<=Nt&&s>Nt-12){Ye=3;break e}if(gt&&s>tt[0]-8){Ye=7;break e}At[0]=s,Ye[0]+=8,tt[0]-=8,Yt[0]=hn}else Yt[0]=5<=tt[0]&&s[$t+0]==47&&!(s[$t+4]>>5),At[0]=tt[0];Ye=0}if(S=S[0],st.Ja=st.Ja[0],st.xa=st.xa[0],y=y[0],Ye!=0)break;if(4294967286<st.Ja)return 3;if(de==null||bt||(de[0]=st.xa?2:1),he=[he],Lt=[Lt],st.xa){if(5>S){Ye=7;break}de=he,gt=Lt,bt=le,d==null||5>S?d=0:5<=S&&d[y+0]==47&&!(d[y+4]>>5)?(tt=[0],s=[0],Nt=[0],W(At=new I,d,y,S),cn(At,tt,s,Nt)?(de!=null&&(de[0]=tt[0]),gt!=null&&(gt[0]=s[0]),bt!=null&&(bt[0]=Nt[0]),d=1):d=0):d=0}else{if(10>S){Ye=7;break}de=Lt,d==null||10>S||!Xs(d,y+3,S-3)?d=0:(gt=d[y+0]|d[y+1]<<8|d[y+2]<<16,bt=16383&(d[y+7]<<8|d[y+6]),d=16383&(d[y+9]<<8|d[y+8]),1&gt||3<(gt>>1&7)||!(gt>>4&1)||gt>>5>=st.Ja||!bt||!d?d=0:(he&&(he[0]=bt),de&&(de[0]=d),d=1))}if(!d||(he=he[0],Lt=Lt[0],mt&&(Me[0]!=he||Ze[0]!=Lt)))return 3;ve!=null&&(ve[0]=st,ve.offset=y-ve.w,t(4294967286>y-ve.w),t(ve.offset==ve.ha-S));break}return Ye==0||Ye==7&&mt&&ve==null?(le!=null&&(le[0]|=st.na!=null&&0<st.na.length),O!=null&&(O[0]=he),X!=null&&(X[0]=Lt),0):Ye}function Na(d,y,S){var O=y.width,X=y.height,le=0,he=0,de=O,ve=X;if(y.Da=d!=null&&0<d.Da,y.Da&&(de=d.cd,ve=d.bd,le=d.v,he=d.j,11>S||(le&=-2,he&=-2),0>le||0>he||0>=de||0>=ve||le+de>O||he+ve>X))return 0;if(y.v=le,y.j=he,y.va=le+de,y.o=he+ve,y.U=de,y.T=ve,y.da=d!=null&&0<d.da,y.da){if(!We(de,ve,S=[d.ib],le=[d.hb]))return 0;y.ib=S[0],y.hb=le[0]}return y.ob=d!=null&&d.ob,y.Kb=d==null||!d.Sd,y.da&&(y.ob=y.ib<3*O/4&&y.hb<3*X/4,y.Kb=0),1}function zs(d){if(d==null)return 2;if(11>d.S){var y=d.f.RGBA;y.fb+=(d.height-1)*y.A,y.A=-y.A}else y=d.f.kb,d=d.height,y.O+=(d-1)*y.fa,y.fa=-y.fa,y.N+=(d-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(d-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(d-1)*y.lb,y.lb=-y.lb);return 0}function Us(d,y,S,O){if(O==null||0>=d||0>=y)return 2;if(S!=null){if(S.Da){var X=S.cd,le=S.bd,he=-2&S.v,de=-2&S.j;if(0>he||0>de||0>=X||0>=le||he+X>d||de+le>y)return 2;d=X,y=le}if(S.da){if(!We(d,y,X=[S.ib],le=[S.hb]))return 2;d=X[0],y=le[0]}}O.width=d,O.height=y;e:{var ve=O.width,Me=O.height;if(d=O.S,0>=ve||0>=Me||!(d>=vr&&13>d))d=2;else{if(0>=O.Rd&&O.sd==null){he=le=X=y=0;var Ze=(de=ve*jc[d])*Me;if(11>d||(le=(Me+1)/2*(y=(ve+1)/2),d==12&&(he=(X=ve)*Me)),(Me=a(Ze+2*le+he))==null){d=1;break e}O.sd=Me,11>d?((ve=O.f.RGBA).eb=Me,ve.fb=0,ve.A=de,ve.size=Ze):((ve=O.f.kb).y=Me,ve.O=0,ve.fa=de,ve.Fd=Ze,ve.f=Me,ve.N=0+Ze,ve.Ab=y,ve.Cd=le,ve.ea=Me,ve.W=0+Ze+le,ve.Db=y,ve.Ed=le,d==12&&(ve.F=Me,ve.J=0+Ze+2*le),ve.Tc=he,ve.lb=X)}if(y=1,X=O.S,le=O.width,he=O.height,X>=vr&&13>X)if(11>X)d=O.f.RGBA,y&=(de=Math.abs(d.A))*(he-1)+le<=d.size,y&=de>=le*jc[X],y&=d.eb!=null;else{d=O.f.kb,de=(le+1)/2,Ze=(he+1)/2,ve=Math.abs(d.fa),Me=Math.abs(d.Ab);var mt=Math.abs(d.Db),gt=Math.abs(d.lb),st=gt*(he-1)+le;y&=ve*(he-1)+le<=d.Fd,y&=Me*(Ze-1)+de<=d.Cd,y=(y&=mt*(Ze-1)+de<=d.Ed)&ve>=le&Me>=de&mt>=de,y&=d.y!=null,y&=d.f!=null,y&=d.ea!=null,X==12&&(y&=gt>=le,y&=st<=d.Tc,y&=d.F!=null)}else y=0;d=y?0:2}}return d!=0||S!=null&&S.fd&&(d=zs(O)),d}var Ci=64,aa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],dr=24,sr=32,la=8,Ki=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Oe("Predictor0","PredictorAdd0"),fe.Predictor0=function(){return 4278190080},fe.Predictor1=function(d){return d},fe.Predictor2=function(d,y,S){return y[S+0]},fe.Predictor3=function(d,y,S){return y[S+1]},fe.Predictor4=function(d,y,S){return y[S-1]},fe.Predictor5=function(d,y,S){return lt(lt(d,y[S+1]),y[S+0])},fe.Predictor6=function(d,y,S){return lt(d,y[S-1])},fe.Predictor7=function(d,y,S){return lt(d,y[S+0])},fe.Predictor8=function(d,y,S){return lt(y[S-1],y[S+0])},fe.Predictor9=function(d,y,S){return lt(y[S+0],y[S+1])},fe.Predictor10=function(d,y,S){return lt(lt(d,y[S-1]),lt(y[S+0],y[S+1]))},fe.Predictor11=function(d,y,S){var O=y[S+0];return 0>=Fe(O>>24&255,d>>24&255,(y=y[S-1])>>24&255)+Fe(O>>16&255,d>>16&255,y>>16&255)+Fe(O>>8&255,d>>8&255,y>>8&255)+Fe(255&O,255&d,255&y)?O:d},fe.Predictor12=function(d,y,S){var O=y[S+0];return(ht((d>>24&255)+(O>>24&255)-((y=y[S-1])>>24&255))<<24|ht((d>>16&255)+(O>>16&255)-(y>>16&255))<<16|ht((d>>8&255)+(O>>8&255)-(y>>8&255))<<8|ht((255&d)+(255&O)-(255&y)))>>>0},fe.Predictor13=function(d,y,S){var O=y[S-1];return(it((d=lt(d,y[S+0]))>>24&255,O>>24&255)<<24|it(d>>16&255,O>>16&255)<<16|it(d>>8&255,O>>8&255)<<8|it(d>>0&255,O>>0&255))>>>0};var qs=fe.PredictorAdd0;fe.PredictorAdd1=Pt,Oe("Predictor2","PredictorAdd2"),Oe("Predictor3","PredictorAdd3"),Oe("Predictor4","PredictorAdd4"),Oe("Predictor5","PredictorAdd5"),Oe("Predictor6","PredictorAdd6"),Oe("Predictor7","PredictorAdd7"),Oe("Predictor8","PredictorAdd8"),Oe("Predictor9","PredictorAdd9"),Oe("Predictor10","PredictorAdd10"),Oe("Predictor11","PredictorAdd11"),Oe("Predictor12","PredictorAdd12"),Oe("Predictor13","PredictorAdd13");var Er=fe.PredictorAdd2;Xt("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Xt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var nl,Mi=fe.ColorIndexInverseTransform,xs=fe.MapARGB,Ir=fe.VP8LColorIndexInverseTransformAlpha,Do=fe.MapAlpha,$s=fe.VP8LPredictorsAdd=[];$s.length=16,(fe.VP8LPredictors=[]).length=16,(fe.VP8LPredictorsAdd_C=[]).length=16,(fe.VP8LPredictors_C=[]).length=16;var Ls,ji,Oi,ns,pr,Fr,Vs,jr,pi,Cs,or,Ji,Oo,Da,Oa,Yi,mr,ao,ks,ua,lo,uo,Hs,zr,zi,Jn,Gn,yi,Qn=a(511),is=a(2041),co=a(225),Ps=a(767),il=0,ho=is,Bi=co,ei=Ps,gr=Qn,vr=0,pn=1,rl=2,Ro=3,Ur=4,Xi=5,Nl=6,ar=7,lr=8,Ss=9,i=10,c=[2,3,7],g=[3,3,11],P=[280,256,256,256,40],R=[0,1,1,1,0],ue=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ue=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ft=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_t=8,Bt=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Zt=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],an=null,An=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ur=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ti=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_r=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],mi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Es=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Dl=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],rs=[],qr=[],Ar=[],zu=1,Ol=2,Yn=[],Qi=[];yt("UpsampleRgbLinePair",Tn,3),yt("UpsampleBgrLinePair",si,3),yt("UpsampleRgbaLinePair",Sr,4),yt("UpsampleBgraLinePair",Li,4),yt("UpsampleArgbLinePair",Ai,4),yt("UpsampleRgba4444LinePair",Hn,2),yt("UpsampleRgb565LinePair",jn,2);var Uu=fe.UpsampleRgbLinePair,As=fe.UpsampleBgrLinePair,au=fe.UpsampleRgbaLinePair,Io=fe.UpsampleBgraLinePair,sl=fe.UpsampleArgbLinePair,lu=fe.UpsampleRgba4444LinePair,Dc=fe.UpsampleRgb565LinePair,uu=16,Rl=1<<uu-1,Il=-227,qu=482,sf=6,ol=0,cu=a(256),of=a(256),af=a(256),hu=a(256),fu=a(qu-Il),Oc=a(qu-Il);ir("YuvToRgbRow",Tn,3),ir("YuvToBgrRow",si,3),ir("YuvToRgbaRow",Sr,4),ir("YuvToBgraRow",Li,4),ir("YuvToArgbRow",Ai,4),ir("YuvToRgba4444Row",Hn,2),ir("YuvToRgb565Row",jn,2);var Rc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],du=[0,2,8],Ic=[8,7,6,4,4,2,2,2,1,1,1,1],Fc=1;this.WebPDecodeRGBA=function(d,y,S,O,X){var le=pn,he=new To,de=new fi;he.ba=de,de.S=le,de.width=[de.width],de.height=[de.height];var ve=de.width,Me=de.height,Ze=new xi;if(Ze==null||d==null)var mt=2;else t(Ze!=null),mt=ts(d,y,S,Ze.width,Ze.height,Ze.Pd,Ze.Qd,Ze.format,null);if(mt!=0?ve=0:(ve!=null&&(ve[0]=Ze.width[0]),Me!=null&&(Me[0]=Ze.height[0]),ve=1),ve){de.width=de.width[0],de.height=de.height[0],O!=null&&(O[0]=de.width),X!=null&&(X[0]=de.height);e:{if(O=new kr,(X=new Rr).data=d,X.w=y,X.ha=S,X.kd=1,y=[0],t(X!=null),((d=ts(X.data,X.w,X.ha,null,null,null,y,null,X))==0||d==7)&&y[0]&&(d=4),(y=d)==0){if(t(he!=null),O.data=X.data,O.w=X.w+X.offset,O.ha=X.ha-X.offset,O.put=ms,O.ac=qn,O.bc=Mr,O.ma=he,X.xa){if((d=Cr())==null){he=1;break e}if(function(gt,st){var Lt=[0],bt=[0],Ye=[0];t:for(;;){if(gt==null)return 0;if(st==null)return gt.a=2,0;if(gt.l=st,gt.a=0,W(gt.m,st.data,st.w,st.ha),!cn(gt.m,Lt,bt,Ye)){gt.a=3;break t}if(gt.xb=Ol,st.width=Lt[0],st.height=bt[0],!vs(Lt[0],bt[0],1,gt,null))break t;return 1}return t(gt.a!=0),0}(d,O)){if(O=(y=Us(O.width,O.height,he.Oa,he.ba))==0){t:{O=d;n:for(;;){if(O==null){O=0;break t}if(t(O.s.yc!=null),t(O.s.Ya!=null),t(0<O.s.Wb),t((S=O.l)!=null),t((X=S.ma)!=null),O.xb!=0){if(O.ca=X.ba,O.tb=X.tb,t(O.ca!=null),!Na(X.Oa,S,Ro)){O.a=2;break n}if(!xo(O,S.width)||S.da)break n;if((S.da||ln(O.ca.S))&&ot(),11>O.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),O.ca.f.kb.F!=null&&ot()),O.Pb&&0<O.s.ua&&O.s.vb.X==null&&!Ne(O.s.vb,O.s.Wa.Xa)){O.a=1;break n}O.xb=0}if(!Tr(O,O.V,O.Ba,O.c,O.i,S.o,wo))break n;X.Dc=O.Ma,O=1;break t}t(O.a!=0),O=0}O=!O}O&&(y=d.a)}else y=d.a}else{if((d=new Fn)==null){he=1;break e}if(d.Fa=X.na,d.P=X.P,d.qc=X.Sa,Os(d,O)){if((y=Us(O.width,O.height,he.Oa,he.ba))==0){if(d.Aa=0,S=he.Oa,t((X=d)!=null),S!=null){if(0<(ve=0>(ve=S.Md)?0:100<ve?255:255*ve/100)){for(Me=Ze=0;4>Me;++Me)12>(mt=X.pb[Me]).lc&&(mt.ia=ve*Ic[0>mt.lc?0:mt.lc]>>3),Ze|=mt.ia;Ze&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=S.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}Cn(d,O)||(y=d.a)}}else y=d.a}y==0&&he.Oa!=null&&he.Oa.fd&&(y=zs(he.ba))}he=y}le=he!=0?null:11>le?de.f.RGBA.eb:de.f.kb.y}else le=null;return le};var jc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function _(fe,Te){for(var $e="",q=0;q<4;q++)$e+=String.fromCharCode(fe[Te++]);return $e}function w(fe,Te){return(fe[Te+0]<<0|fe[Te+1]<<8|fe[Te+2]<<16)>>>0}function b(fe,Te){return(fe[Te+0]<<0|fe[Te+1]<<8|fe[Te+2]<<16|fe[Te+3]<<24)>>>0}new m;var E=[0],x=[0],F=[],D=new m,U=e,j=function(fe,Te){var $e={},q=0,$=!1,Se=0,B=0;if($e.frames=[],!function(G,se,ce,pe){for(var oe=0;oe<pe;oe++)if(G[se+oe]!=ce.charCodeAt(oe))return!0;return!1}(fe,Te,"RIFF",4)){var K,H;for(b(fe,Te+=4),Te+=8;Te<fe.length;){var ne=_(fe,Te),W=b(fe,Te+=4);Te+=4;var z=W+(1&W);switch(ne){case"VP8 ":case"VP8L":$e.frames[q]===void 0&&($e.frames[q]={}),(I=$e.frames[q]).src_off=$?B:Te-8,I.src_size=Se+W+8,q++,$&&($=!1,Se=0,B=0);break;case"VP8X":(I=$e.header={}).feature_flags=fe[Te];var A=Te+4;I.canvas_width=1+w(fe,A),A+=3,I.canvas_height=1+w(fe,A),A+=3;break;case"ALPH":$=!0,Se=z+8,B=Te-8;break;case"ANIM":(I=$e.header).bgcolor=b(fe,Te),A=Te+4,I.loop_count=(K=fe)[(H=A)+0]<<0|K[H+1]<<8,A+=2;break;case"ANMF":var ge,I;(I=$e.frames[q]={}).offset_x=2*w(fe,Te),Te+=3,I.offset_y=2*w(fe,Te),Te+=3,I.width=1+w(fe,Te),Te+=3,I.height=1+w(fe,Te),Te+=3,I.duration=w(fe,Te),Te+=3,ge=fe[Te++],I.dispose=1&ge,I.blend=ge>>1&1}ne!="ANMF"&&(Te+=z)}return $e}}(U,0);j.response=U,j.rgbaoutput=!0,j.dataurl=!1;var Q=j.header?j.header:null,ie=j.frames?j.frames:null;if(Q){Q.loop_counter=Q.loop_count,E=[Q.canvas_height],x=[Q.canvas_width];for(var ye=0;ye<ie.length&&ie[ye].blend!=0;ye++);}var we=ie[0],Pe=D.WebPDecodeRGBA(U,we.src_off,we.src_size,x,E);we.rgba=Pe,we.imgwidth=x[0],we.imgheight=E[0];for(var Ee=0;Ee<x[0]*E[0]*4;Ee++)F[Ee]=Pe[Ee];return this.width=x,this.height=E,this.data=F,this}(function(e){var t=function(){return typeof Ld=="function"},n=function(E,x,F,D){var U=4,j=u;switch(D){case e.image_compression.FAST:U=1,j=a;break;case e.image_compression.MEDIUM:U=6,j=f;break;case e.image_compression.SLOW:U=9,j=m}E=r(E,x,F,j);var Q=Ld(E,{level:U});return e.__addimage__.arrayBufferToBinaryString(Q)},r=function(E,x,F,D){for(var U,j,Q,ie=E.length/x,ye=new Uint8Array(E.length+ie),we=w(),Pe=0;Pe<ie;Pe+=1){if(Q=Pe*x,U=E.subarray(Q,Q+x),D)ye.set(D(U,F,j),Q+Pe);else{for(var Ee,fe=we.length,Te=[];Ee<fe;Ee+=1)Te[Ee]=we[Ee](U,F,j);var $e=b(Te.concat());ye.set(Te[$e],Q+Pe)}j=U}return ye},o=function(E){var x=Array.apply([],E);return x.unshift(0),x},a=function(E,x){var F,D=[],U=E.length;D[0]=1;for(var j=0;j<U;j+=1)F=E[j-x]||0,D[j+1]=E[j]-F+256&255;return D},u=function(E,x,F){var D,U=[],j=E.length;U[0]=2;for(var Q=0;Q<j;Q+=1)D=F&&F[Q]||0,U[Q+1]=E[Q]-D+256&255;return U},f=function(E,x,F){var D,U,j=[],Q=E.length;j[0]=3;for(var ie=0;ie<Q;ie+=1)D=E[ie-x]||0,U=F&&F[ie]||0,j[ie+1]=E[ie]+256-(D+U>>>1)&255;return j},m=function(E,x,F){var D,U,j,Q,ie=[],ye=E.length;ie[0]=4;for(var we=0;we<ye;we+=1)D=E[we-x]||0,U=F&&F[we]||0,j=F&&F[we-x]||0,Q=_(D,U,j),ie[we+1]=E[we]-Q+256&255;return ie},_=function(E,x,F){if(E===x&&x===F)return E;var D=Math.abs(x-F),U=Math.abs(E-F),j=Math.abs(E+x-F-F);return D<=U&&D<=j?E:U<=j?x:F},w=function(){return[o,a,u,f,m]},b=function(E){var x=E.map(function(F){return F.reduce(function(D,U){return D+Math.abs(U)},0)});return x.indexOf(Math.min.apply(null,x))};e.processPNG=function(E,x,F,D){var U,j,Q,ie,ye,we,Pe,Ee,fe,Te,$e,q,$,Se,B,K=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(E)&&(E=new Uint8Array(E)),this.__addimage__.isArrayBufferView(E)){if(E=(Q=new tC(E)).imgData,j=Q.bits,U=Q.colorSpace,ye=Q.colors,[4,6].indexOf(Q.colorType)!==-1){if(Q.bits===8){fe=(Ee=Q.pixelBitlength==32?new Uint32Array(Q.decodePixels().buffer):Q.pixelBitlength==16?new Uint16Array(Q.decodePixels().buffer):new Uint8Array(Q.decodePixels().buffer)).length,$e=new Uint8Array(fe*Q.colors),Te=new Uint8Array(fe);var ne,W=Q.pixelBitlength-Q.bits;for(Se=0,B=0;Se<fe;Se++){for($=Ee[Se],ne=0;ne<W;)$e[B++]=$>>>ne&255,ne+=Q.bits;Te[Se]=$>>>ne&255}}if(Q.bits===16){fe=(Ee=new Uint32Array(Q.decodePixels().buffer)).length,$e=new Uint8Array(fe*(32/Q.pixelBitlength)*Q.colors),Te=new Uint8Array(fe*(32/Q.pixelBitlength)),q=Q.colors>1,Se=0,B=0;for(var z=0;Se<fe;)$=Ee[Se++],$e[B++]=$>>>0&255,q&&($e[B++]=$>>>16&255,$=Ee[Se++],$e[B++]=$>>>0&255),Te[z++]=$>>>16&255;j=8}D!==e.image_compression.NONE&&t()?(E=n($e,Q.width*Q.colors,Q.colors,D),Pe=n(Te,Q.width,1,D)):(E=$e,Pe=Te,K=void 0)}if(Q.colorType===3&&(U=this.color_spaces.INDEXED,we=Q.palette,Q.transparency.indexed)){var A=Q.transparency.indexed,ge=0;for(Se=0,fe=A.length;Se<fe;++Se)ge+=A[Se];if((ge/=255)===fe-1&&A.indexOf(0)!==-1)ie=[A.indexOf(0)];else if(ge!==fe){for(Ee=Q.decodePixels(),Te=new Uint8Array(Ee.length),Se=0,fe=Ee.length;Se<fe;Se++)Te[Se]=A[Ee[Se]];Pe=n(Te,Q.width,1)}}var I=function(G){var se;switch(G){case e.image_compression.FAST:se=11;break;case e.image_compression.MEDIUM:se=13;break;case e.image_compression.SLOW:se=14;break;default:se=12}return se}(D);return K===this.decode.FLATE_DECODE&&(H="/Predictor "+I+" "),H+="/Colors "+ye+" /BitsPerComponent "+j+" /Columns "+Q.width,(this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),(Pe&&this.__addimage__.isArrayBuffer(Pe)||this.__addimage__.isArrayBufferView(Pe))&&(Pe=this.__addimage__.arrayBufferToBinaryString(Pe)),{alias:F,data:E,index:x,filter:K,decodeParameters:H,transparency:ie,palette:we,sMask:Pe,predictor:I,width:Q.width,height:Q.height,bitsPerComponent:j,colorSpace:U}}}})(_n.API),function(e){e.processGIF89A=function(t,n,r,o){var a=new nC(t),u=a.width,f=a.height,m=[];a.decodeAndBlitFrameRGBA(0,m);var _={data:m,width:u,height:f},w=new Gf(100).encode(_,100);return e.processJPEG.call(this,w,n,r,o)},e.processGIF87A=e.processGIF89A}(_n.API),jo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},jo.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){ui.log("bit decode error:"+n)}},jo.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var a=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*o*4,f=0;f<8&&8*o+f<this.width;f++){var m=this.palette[a>>7-f&1];this.data[u+4*f]=m.blue,this.data[u+4*f+1]=m.green,this.data[u+4*f+2]=m.red,this.data[u+4*f+3]=255}n!==0&&(this.pos+=4-n)}},jo.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var a=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*o*4,f=a>>4,m=15&a,_=this.palette[f];if(this.data[u]=_.blue,this.data[u+1]=_.green,this.data[u+2]=_.red,this.data[u+3]=255,2*o+1>=this.width)break;_=this.palette[m],this.data[u+4]=_.blue,this.data[u+4+1]=_.green,this.data[u+4+2]=_.red,this.data[u+4+3]=255}t!==0&&(this.pos+=4-t)}},jo.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(o<this.palette.length){var u=this.palette[o];this.data[a]=u.red,this.data[a+1]=u.green,this.data[a+2]=u.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},jo.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(a&t)/t*255|0,f=(a>>5&t)/t*255|0,m=(a>>10&t)/t*255|0,_=a>>15?255:0,w=r*this.width*4+4*o;this.data[w]=m,this.data[w+1]=f,this.data[w+2]=u,this.data[w+3]=_}this.pos+=e}},jo.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(u&t)/t*255|0,m=(u>>5&n)/n*255|0,_=(u>>11)/t*255|0,w=o*this.width*4+4*a;this.data[w]=_,this.data[w+1]=m,this.data[w+2]=f,this.data[w+3]=255}this.pos+=e}},jo.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=t*this.width*4+4*n;this.data[u]=a,this.data[u+1]=o,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},jo.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=t*this.width*4+4*n;this.data[f]=a,this.data[f+1]=o,this.data[f+2]=r,this.data[f+3]=u}},jo.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,o){var a=new jo(t,!1),u=a.width,f=a.height,m={data:a.getData(),width:u,height:f},_=new Gf(100).encode(m,100);return e.processJPEG.call(this,_,n,r,o)}}(_n.API),mm.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,o){var a=new mm(t),u=a.width,f=a.height,m={data:a.getData(),width:u,height:f},_=new Gf(100).encode(m,100);return e.processJPEG.call(this,_,n,r,o)}}(_n.API),_n.API.processRGBA=function(e,t,n){for(var r=e.data,o=r.length,a=new Uint8Array(o/4*3),u=new Uint8Array(o/4),f=0,m=0,_=0;_<o;_+=4){var w=r[_],b=r[_+1],E=r[_+2],x=r[_+3];a[f++]=w,a[f++]=b,a[f++]=E,u[m++]=x}var F=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:F,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},_n.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},yu=_n.API,Qc=yu.getCharWidthsArray=function(e,t){var n,r,o=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),u=t.charSpace||this.internal.getCharSpace(),f=t.widths?t.widths:o.metadata.Unicode.widths,m=f.fof?f.fof:1,_=t.kerning?t.kerning:o.metadata.Unicode.kerning,w=_.fof?_.fof:1,b=t.doKerning!==!1,E=0,x=e.length,F=0,D=f[0]||m,U=[];for(n=0;n<x;n++)r=e.charCodeAt(n),typeof o.metadata.widthOfString=="function"?U.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+u*(1e3/a)||0)/1e3):(E=b&&oi(_[r])==="object"&&!isNaN(parseInt(_[r][F],10))?_[r][F]/w:0,U.push((f[r]||D)/m+E)),F=r;return U},hm=yu.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return yu.processArabic&&(e=yu.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,o)/n:Qc.apply(this,arguments).reduce(function(a,u){return a+u},0)},fm=function(e,t,n,r){for(var o=[],a=0,u=e.length,f=0;a!==u&&f+t[a]<n;)f+=t[a],a++;o.push(e.slice(0,a));var m=a;for(f=0;a!==u;)f+t[a]>r&&(o.push(e.slice(m,a)),f=0,m=a),f+=t[a],a++;return m!==a&&o.push(e.slice(m,a)),o},dm=function(e,t,n){n||(n={});var r,o,a,u,f,m,_,w=[],b=[w],E=n.textIndent||0,x=0,F=0,D=e.split(" "),U=Qc.apply(this,[" ",n])[0];if(m=n.lineIndent===-1?D[0].length+2:n.lineIndent||0){var j=Array(m).join(" "),Q=[];D.map(function(ye){(ye=ye.split(/\s*\n/)).length>1?Q=Q.concat(ye.map(function(we,Pe){return(Pe&&we.length?`
`:"")+we})):Q.push(ye[0])}),D=Q,m=hm.apply(this,[j,n])}for(a=0,u=D.length;a<u;a++){var ie=0;if(r=D[a],m&&r[0]==`
`&&(r=r.substr(1),ie=1),E+x+(F=(o=Qc.apply(this,[r,n])).reduce(function(ye,we){return ye+we},0))>t||ie){if(F>t){for(f=fm.apply(this,[r,o,t-(E+x),t]),w.push(f.shift()),w=[f.pop()];f.length;)b.push([f.shift()]);F=o.slice(r.length-(w[0]?w[0].length:0)).reduce(function(ye,we){return ye+we},0)}else w=[r];b.push(w),E=F+m,x=U}else w.push(r),E+=x+F,x=U}return _=m?function(ye,we){return(we?j:"")+ye.join(" ")}:function(ye){return ye.join(" ")},b.map(_)},yu.splitTextToSize=function(e,t,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(w){if(w.widths&&w.kerning)return{widths:w.widths,kerning:w.kerning};var b=this.internal.getFont(w.fontName,w.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var u=1*this.internal.scaleFactor*t/o;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=n.lineIndent;var f,m,_=[];for(f=0,m=r.length;f<m;f++)_=_.concat(dm.apply(this,[r[f],u,a]));return _},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},o=0;o<t.length;o++)n[t[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=t[o];var a=function(b){return"0x"+parseInt(b,10).toString(16)},u=e.__fontmetrics__.compress=function(b){var E,x,F,D,U=["{"];for(var j in b){if(E=b[j],isNaN(parseInt(j,10))?x="'"+j+"'":(j=parseInt(j,10),x=(x=a(j).slice(2)).slice(0,-1)+r[x.slice(-1)]),typeof E=="number")E<0?(F=a(E).slice(3),D="-"):(F=a(E).slice(2),D=""),F=D+F.slice(0,-1)+r[F.slice(-1)];else{if(oi(E)!=="object")throw new Error("Don't know what to do with value type "+oi(E)+".");F=u(E)}U.push(x+F)}return U.push("}"),U.join("")},f=e.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var E,x,F,D,U={},j=1,Q=U,ie=[],ye="",we="",Pe=b.length-1,Ee=1;Ee<Pe;Ee+=1)(D=b[Ee])=="'"?E?(F=E.join(""),E=void 0):E=[]:E?E.push(D):D=="{"?(ie.push([Q,F]),Q={},F=void 0):D=="}"?((x=ie.pop())[0][x[1]]=Q,F=void 0,Q=x[0]):D=="-"?j=-1:F===void 0?n.hasOwnProperty(D)?(ye+=n[D],F=parseInt(ye,16)*j,j=1,ye=""):ye+=D:n.hasOwnProperty(D)?(we+=n[D],Q[F]=parseInt(we,16)*j,j=1,F=void 0,we=""):we+=D;return U},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},_={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},w={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(b){var E=b.font,x=w.Unicode[E.postScriptName];x&&(E.metadata.Unicode={},E.metadata.Unicode.widths=x.widths,E.metadata.Unicode.kerning=x.kerning);var F=_.Unicode[E.postScriptName];F&&(E.metadata.Unicode.encoding=F,E.encoding=F.codePages[0])}])}(_n.API),function(e){var t=function(n){for(var r=n.length,o=new Uint8Array(r),a=0;a<r;a++)o[a]=n.charCodeAt(a);return o};e.API.events.push(["addFont",function(n){var r=void 0,o=n.font,a=n.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(u,f){f=/^\x00\x01\x00\x00/.test(f)?t(f):t(dc(f)),u.metadata=e.API.TTFFont.open(f),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(o,r)}}])}(_n),function(e){function t(){return(bn.canvg?Promise.resolve(bn.canvg):Jl(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}_n.API.addSvgAsImage=function(n,r,o,a,u,f,m,_){if(isNaN(r)||isNaN(o))throw ui.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(u))throw ui.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=a,w.height=u;var b=w.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,w.width,w.height);var E={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return t().then(function(F){return F.fromString(b,n,E)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(F){return F.render(E)}).then(function(){x.addImage(w.toDataURL("image/jpeg",1),r,o,a,u,m,_)})}}(),_n.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(t,n);return this},_n.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,o,a,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},f=Object.keys(u),m=[],_=0,w=0,b=0;function E(F,D){var U,j=!1;for(U=0;U<F.length;U+=1)F[U]===D&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=f.length;for(b=0;b<x;b+=1)n[f[b]].value=n[f[b]].defaultValue,n[f[b]].explicitSet=!1}if(oi(e)==="object"){for(o in e)if(a=e[o],E(f,o)&&a!==void 0){if(n[o].type==="boolean"&&typeof a=="boolean")n[o].value=a;else if(n[o].type==="name"&&E(n[o].valueSet,a))n[o].value=a;else if(n[o].type==="integer"&&Number.isInteger(a))n[o].value=a;else if(n[o].type==="array"){for(_=0;_<a.length;_+=1)if(r=!0,a[_].length===1&&typeof a[_][0]=="number")m.push(String(a[_]-1));else if(a[_].length>1){for(w=0;w<a[_].length;w+=1)typeof a[_][w]!="number"&&(r=!1);r===!0&&m.push([a[_][0]-1,a[_][1]-1].join(" "))}n[o].value="["+m.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var F,D=[];for(F in n)n[F].explicitSet===!0&&(n[F].type==="name"?D.push("/"+F+" /"+n[F].value):D.push("/"+F+" "+n[F].value));D.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+D.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),f=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),_=a.length+u.length+f.length+o.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+_+" >>"),this.internal.write("stream"),this.internal.write(o+a+u+f+m),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(_n.API),function(e){var t=e.API,n=t.pdfEscape16=function(a,u){for(var f,m=u.metadata.Unicode.widths,_=["","0","00","000","0000"],w=[""],b=0,E=a.length;b<E;++b){if(f=u.metadata.characterToGlyph(a.charCodeAt(b)),u.metadata.glyIdsUsed.push(f),u.metadata.toUnicode[f]=a.charCodeAt(b),m.indexOf(f)==-1&&(m.push(f),m.push([parseInt(u.metadata.widthOfGlyph(f),10)])),f=="0")return w.join("");f=f.toString(16),w.push(_[4-f.length],f)}return w.join("")},r=function(a){var u,f,m,_,w,b,E;for(w=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],b=0,E=(f=Object.keys(a).sort(function(x,F){return x-F})).length;b<E;b++)u=f[b],m.length>=100&&(w+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),a[u]!==void 0&&a[u]!==null&&typeof a[u].toString=="function"&&(_=("0000"+a[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),m.push("<"+u+"><"+_+">"));return m.length&&(w+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),w+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(u){var f=u.font,m=u.out,_=u.newObject,w=u.putStream;if(f.metadata instanceof e.API.TTFFont&&f.encoding==="Identity-H"){for(var b=f.metadata.Unicode.widths,E=f.metadata.subset.encode(f.metadata.glyIdsUsed,1),x="",F=0;F<E.length;F++)x+=String.fromCharCode(E[F]);var D=_();w({data:x,addLength1:!0,objectId:D}),m("endobj");var U=_();w({data:r(f.metadata.toUnicode),addLength1:!0,objectId:U}),m("endobj");var j=_();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+Cu(f.fontName)),m("/FontFile2 "+D+" 0 R"),m("/FontBBox "+e.API.PDFObject.convert(f.metadata.bbox)),m("/Flags "+f.metadata.flags),m("/StemV "+f.metadata.stemV),m("/ItalicAngle "+f.metadata.italicAngle),m("/Ascent "+f.metadata.ascender),m("/Descent "+f.metadata.decender),m("/CapHeight "+f.metadata.capHeight),m(">>"),m("endobj");var Q=_();m("<<"),m("/Type /Font"),m("/BaseFont /"+Cu(f.fontName)),m("/FontDescriptor "+j+" 0 R"),m("/W "+e.API.PDFObject.convert(b)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+f.encoding+")"),m(">>"),m(">>"),m("endobj"),f.objectNumber=_(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+U+" 0 R"),m("/BaseFont /"+Cu(f.fontName)),m("/Encoding /"+f.encoding),m("/DescendantFonts ["+Q+" 0 R]"),m(">>"),m("endobj"),f.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(u){var f=u.font,m=u.out,_=u.newObject,w=u.putStream;if(f.metadata instanceof e.API.TTFFont&&f.encoding==="WinAnsiEncoding"){for(var b=f.metadata.rawData,E="",x=0;x<b.length;x++)E+=String.fromCharCode(b[x]);var F=_();w({data:E,addLength1:!0,objectId:F}),m("endobj");var D=_();w({data:r(f.metadata.toUnicode),addLength1:!0,objectId:D}),m("endobj");var U=_();m("<<"),m("/Descent "+f.metadata.decender),m("/CapHeight "+f.metadata.capHeight),m("/StemV "+f.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+F+" 0 R"),m("/Flags 96"),m("/FontBBox "+e.API.PDFObject.convert(f.metadata.bbox)),m("/FontName /"+Cu(f.fontName)),m("/ItalicAngle "+f.metadata.italicAngle),m("/Ascent "+f.metadata.ascender),m(">>"),m("endobj"),f.objectNumber=_();for(var j=0;j<f.metadata.hmtx.widths.length;j++)f.metadata.hmtx.widths[j]=parseInt(f.metadata.hmtx.widths[j]*(1e3/f.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+D+" 0 R/BaseFont/"+Cu(f.fontName)+"/FontDescriptor "+U+" 0 R/Encoding/"+f.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(f.metadata.hmtx.widths)+">>"),m("endobj"),f.isAlreadyPutted=!0}})(a)}]);var o=function(a){var u,f=a.text||"",m=a.x,_=a.y,w=a.options||{},b=a.mutex||{},E=b.pdfEscape,x=b.activeFontKey,F=b.fonts,D=x,U="",j=0,Q="",ie=F[D].encoding;if(F[D].encoding!=="Identity-H")return{text:f,x:m,y:_,options:w,mutex:b};for(Q=f,D=x,Array.isArray(f)&&(Q=f[0]),j=0;j<Q.length;j+=1)F[D].metadata.hasOwnProperty("cmap")&&(u=F[D].metadata.cmap.unicode.codeMap[Q[j].charCodeAt(0)]),u||Q[j].charCodeAt(0)<256&&F[D].metadata.hasOwnProperty("Unicode")?U+=Q[j]:U+="";var ye="";return parseInt(D.slice(1))<14||ie==="WinAnsiEncoding"?ye=E(U,D).split("").map(function(we){return we.charCodeAt(0).toString(16)}).join(""):ie==="Identity-H"&&(ye=n(U,F[D])),b.isHex=!0,{text:ye,x:m,y:_,options:w,mutex:b}};t.events.push(["postProcessText",function(a){var u=a.text||"",f=[],m={text:u,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(u)){var _=0;for(_=0;_<u.length;_+=1)Array.isArray(u[_])&&u[_].length===3?f.push([o(Object.assign({},m,{text:u[_][0]})).text,u[_][1],u[_][2]]):f.push(o(Object.assign({},m,{text:u[_]})).text);a.text=f}else a.text=o(Object.assign({},m,{text:u})).text}])}(_n),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(_n.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var o,a,u,f,m,_,w,b=t,E=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],F={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},D={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},U=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Q=!1,ie=0;this.__bidiEngine__={};var ye=function(q){var $=q.charCodeAt(),Se=$>>8,B=D[Se];return B!==void 0?b[256*B+(255&$)]:Se===252||Se===253?"AL":j.test(Se)?"L":Se===8?"R":"N"},we=function(q){for(var $,Se=0;Se<q.length;Se++){if(($=ye(q.charAt(Se)))==="L")return!1;if($==="R")return!0}return!1},Pe=function(q,$,Se,B){var K,H,ne,W,z=$[B];switch(z){case"L":case"R":Q=!1;break;case"N":case"AN":break;case"EN":Q&&(z="AN");break;case"AL":Q=!0,z="R";break;case"WS":z="N";break;case"CS":B<1||B+1>=$.length||(K=Se[B-1])!=="EN"&&K!=="AN"||(H=$[B+1])!=="EN"&&H!=="AN"?z="N":Q&&(H="AN"),z=H===K?H:"N";break;case"ES":z=(K=B>0?Se[B-1]:"B")==="EN"&&B+1<$.length&&$[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&Se[B-1]==="EN"){z="EN";break}if(Q){z="N";break}for(ne=B+1,W=$.length;ne<W&&$[ne]==="ET";)ne++;z=ne<W&&$[ne]==="EN"?"EN":"N";break;case"NSM":if(u&&!f){for(W=$.length,ne=B+1;ne<W&&$[ne]==="NSM";)ne++;if(ne<W){var A=q[B],ge=A>=1425&&A<=2303||A===64286;if(K=$[ne],ge&&(K==="R"||K==="AL")){z="R";break}}}z=B<1||(K=$[B-1])==="B"?"N":Se[B-1];break;case"B":Q=!1,o=!0,z=ie;break;case"S":a=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Q=!1;break;case"BN":z="N"}return z},Ee=function(q,$,Se){var B=q.split("");return Se&&fe(B,Se,{hiLevel:ie}),B.reverse(),$&&$.reverse(),B.join("")},fe=function(q,$,Se){var B,K,H,ne,W,z=-1,A=q.length,ge=0,I=[],G=ie?x:E,se=[];for(Q=!1,o=!1,a=!1,K=0;K<A;K++)se[K]=ye(q[K]);for(H=0;H<A;H++){if(W=ge,I[H]=Pe(q,se,I,H),B=240&(ge=G[W][F[I[H]]]),ge&=15,$[H]=ne=G[ge][5],B>0)if(B===16){for(K=z;K<H;K++)$[K]=1;z=-1}else z=-1;if(G[ge][6])z===-1&&(z=H);else if(z>-1){for(K=z;K<H;K++)$[K]=ne;z=-1}se[H]==="B"&&($[H]=0),Se.hiLevel|=ne}a&&function(ce,pe,oe){for(var xe=0;xe<oe;xe++)if(ce[xe]==="S"){pe[xe]=ie;for(var me=xe-1;me>=0&&ce[me]==="WS";me--)pe[me]=ie}}(se,$,A)},Te=function(q,$,Se,B,K){if(!(K.hiLevel<q)){if(q===1&&ie===1&&!o)return $.reverse(),void(Se&&Se.reverse());for(var H,ne,W,z,A=$.length,ge=0;ge<A;){if(B[ge]>=q){for(W=ge+1;W<A&&B[W]>=q;)W++;for(z=ge,ne=W-1;z<ne;z++,ne--)H=$[z],$[z]=$[ne],$[ne]=H,Se&&(H=Se[z],Se[z]=Se[ne],Se[ne]=H);ge=W}ge++}}},$e=function(q,$,Se){var B=q.split(""),K={hiLevel:ie};return Se||(Se=[]),fe(B,Se,K),function(H,ne,W){if(W.hiLevel!==0&&w)for(var z,A=0;A<H.length;A++)ne[A]===1&&(z=U.indexOf(H[A]))>=0&&(H[A]=U[z+1])}(B,Se,K),Te(2,B,$,Se,K),Te(1,B,$,Se,K),B.join("")};return this.__bidiEngine__.doBidiReorder=function(q,$,Se){if(function(K,H){if(H)for(var ne=0;ne<K.length;ne++)H[ne]=ne;f===void 0&&(f=we(K)),_===void 0&&(_=we(K))}(q,$),u||!m||_)if(u&&m&&f^_)ie=f?1:0,q=Ee(q,$,Se);else if(!u&&m&&_)ie=f?1:0,q=$e(q,$,Se),q=Ee(q,$);else if(!u||f||m||_){if(u&&!m&&f^_)q=Ee(q,$),f?(ie=0,q=$e(q,$,Se)):(ie=1,q=$e(q,$,Se),q=Ee(q,$));else if(u&&f&&!m&&_)ie=1,q=$e(q,$,Se),q=Ee(q,$);else if(!u&&!m&&f^_){var B=w;f?(ie=1,q=$e(q,$,Se),ie=0,w=!1,q=$e(q,$,Se),w=B):(ie=0,q=$e(q,$,Se),q=Ee(q,$),ie=1,w=!1,q=$e(q,$,Se),w=B,q=Ee(q,$))}}else ie=0,q=$e(q,$,Se);else ie=f?1:0,q=$e(q,$,Se);return q},this.__bidiEngine__.setOptions=function(q){q&&(u=q.isInputVisual,m=q.isOutputVisual,f=q.isInputRtl,_=q.isOutputRtl,w=q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var o=r.text,a=(r.x,r.y,r.options||{}),u=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var f=0;for(u=[],f=0;f<o.length;f+=1)Object.prototype.toString.call(o[f])==="[object Array]"?u.push([n.doBidiReorder(o[f][0]),o[f][1],o[f][2]]):u.push([n.doBidiReorder(o[f])]);r.text=u}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(_n),_n.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Sl(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new vC(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new iC(this.contents),this.head=new sC(this),this.name=new cC(this),this.cmap=new Q1(this),this.toUnicode={},this.hhea=new oC(this),this.maxp=new hC(this),this.hmtx=new fC(this),this.post=new lC(this),this.os2=new aC(this),this.loca=new gC(this),this.glyf=new dC(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,f,m,_;for(_=[],u=0,f=(m=this.bbox).length;u<f;u++)t=m[u],_.push(Math.round(t*this.scaleFactor));return _}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var o,a,u,f;for(u=0,a=0,f=(t=""+t).length;0<=f?a<f:a>f;a=0<=f?++a:--a)o=t.charCodeAt(a),u+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return u*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var Wo,Sl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,o;for(o=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(t.charCodeAt(n)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,o,a,u,f,m;return t=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),a=this.readByte(),u=this.readByte(),f=this.readByte(),m=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^a)+65536*(255^u)+256*(255^f)+(255^m)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*o+16777216*a+65536*u+256*f+m},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,o,a;for(a=[],r=0,o=t.length;r<o;r++)n=t[r],a.push(this.writeByte(n));return a},e}(),iC=function(){var e;function t(n){var r,o,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,o,a,u,f,m,_,w,b,E,x,F,D;for(D in x=Object.keys(n).length,m=Math.log(2),b=16*Math.floor(Math.log(x)/m),u=Math.floor(b/m),w=16*x-b,(o=new Sl).writeInt(this.scalarType),o.writeShort(x),o.writeShort(b),o.writeShort(u),o.writeShort(w),a=16*x,_=o.pos+a,f=null,F=[],n)for(E=n[D],o.writeString(D),o.writeInt(e(E)),o.writeInt(_),o.writeInt(E.length),F=F.concat(E),D==="head"&&(f=_),_+=E.length;_%4;)F.push(0),_++;return o.write(F),r=2981146554-e(o.data),o.pos=f+8,o.writeUInt32(r),o.data},e=function(n){var r,o,a,u;for(n=ev.call(n);n.length%4;)n.push(0);for(a=new Sl(n),o=0,r=0,u=n.length;r<u;r=r+=4)o+=a.readUInt32();return 4294967295&o},t}(),rC={}.hasOwnProperty,wa=function(e,t){for(var n in t)rC.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Wo=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var sC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Sl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),gm=function(){function e(t,n){var r,o,a,u,f,m,_,w,b,E,x,F,D,U,j,Q,ie;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),b=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=t.readByte();break;case 4:for(x=t.readUInt16(),E=x/2,t.pos+=6,a=function(){var ye,we;for(we=[],m=ye=0;0<=E?ye<E:ye>E;m=0<=E?++ye:--ye)we.push(t.readUInt16());return we}(),t.pos+=2,D=function(){var ye,we;for(we=[],m=ye=0;0<=E?ye<E:ye>E;m=0<=E?++ye:--ye)we.push(t.readUInt16());return we}(),_=function(){var ye,we;for(we=[],m=ye=0;0<=E?ye<E:ye>E;m=0<=E?++ye:--ye)we.push(t.readUInt16());return we}(),w=function(){var ye,we;for(we=[],m=ye=0;0<=E?ye<E:ye>E;m=0<=E?++ye:--ye)we.push(t.readUInt16());return we}(),o=(this.length-t.pos+this.offset)/2,f=function(){var ye,we;for(we=[],m=ye=0;0<=o?ye<o:ye>o;m=0<=o?++ye:--ye)we.push(t.readUInt16());return we}(),m=j=0,ie=a.length;j<ie;m=++j)for(U=a[m],r=Q=F=D[m];F<=U?Q<=U:Q>=U;r=F<=U?++Q:--Q)w[m]===0?u=r+_[m]:(u=f[w[m]/2+(r-F)-(E-m)]||0)!==0&&(u+=_[m]),this.codeMap[r]=65535&u}t.pos=b}return e.encode=function(t,n){var r,o,a,u,f,m,_,w,b,E,x,F,D,U,j,Q,ie,ye,we,Pe,Ee,fe,Te,$e,q,$,Se,B,K,H,ne,W,z,A,ge,I,G,se,ce,pe,oe,xe,me,je,qe,J;switch(B=new Sl,u=Object.keys(t).sort(function(te,Ne){return te-Ne}),n){case"macroman":for(D=0,U=function(){var te=[];for(F=0;F<256;++F)te.push(0);return te}(),Q={0:0},a={},K=0,z=u.length;K<z;K++)Q[me=t[o=u[K]]]==null&&(Q[me]=++D),a[o]={old:t[o],new:Q[t[o]]},U[o]=Q[t[o]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(U),{charMap:a,subtable:B.data,maxGlyphID:D+1};case"unicode":for($=[],b=[],ie=0,Q={},r={},j=_=null,H=0,A=u.length;H<A;H++)Q[we=t[o=u[H]]]==null&&(Q[we]=++ie),r[o]={old:we,new:Q[we]},f=Q[we]-o,j!=null&&f===_||(j&&b.push(j),$.push(o),_=f),j=o;for(j&&b.push(j),b.push(65535),$.push(65535),$e=2*(Te=$.length),fe=2*Math.pow(Math.log(Te)/Math.LN2,2),E=Math.log(fe/2)/Math.LN2,Ee=2*Te-fe,m=[],Pe=[],x=[],F=ne=0,ge=$.length;ne<ge;F=++ne){if(q=$[F],w=b[F],q===65535){m.push(0),Pe.push(0);break}if(q-(Se=r[q].new)>=32768)for(m.push(0),Pe.push(2*(x.length+Te-F)),o=W=q;q<=w?W<=w:W>=w;o=q<=w?++W:--W)x.push(r[o].new);else m.push(Se-q),Pe.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*Te+2*x.length),B.writeUInt16(0),B.writeUInt16($e),B.writeUInt16(fe),B.writeUInt16(E),B.writeUInt16(Ee),oe=0,I=b.length;oe<I;oe++)o=b[oe],B.writeUInt16(o);for(B.writeUInt16(0),xe=0,G=$.length;xe<G;xe++)o=$[xe],B.writeUInt16(o);for(je=0,se=m.length;je<se;je++)f=m[je],B.writeUInt16(f);for(qe=0,ce=Pe.length;qe<ce;qe++)ye=Pe[qe],B.writeUInt16(ye);for(J=0,pe=x.length;J<pe;J++)D=x[J],B.writeUInt16(D);return{charMap:r,subtable:B.data,maxGlyphID:ie+1}}},e}(),Q1=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,o,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)r=new gm(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var o,a;return r==null&&(r="macroman"),o=gm.encode(n,r),(a=new Sl).writeUInt16(0),a.writeUInt16(1),o.table=a.data.concat(o.subtable),o},t}(),oC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),aC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(n.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),lC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="post",t.prototype.parse=function(n){var r,o,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var u;for(o=n.readUInt16(),this.glyphNameIndex=[],u=0;0<=o?u<o:u>o;u=0<=o?++u:--u)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var f,m,_;for(_=[],u=f=0,m=this.file.maxp.numGlyphs;0<=m?f<m:f>m;u=0<=m?++f:--f)_.push(n.readUInt32());return _}).call(this)}},t}(),uC=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="name",t.prototype.parse=function(n){var r,o,a,u,f,m,_,w,b,E,x;for(n.pos=this.offset,n.readShort(),r=n.readShort(),m=n.readShort(),o=[],u=0;0<=r?u<r:u>r;u=0<=r?++u:--u)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+m+n.readShort()});for(_={},u=b=0,E=o.length;b<E;u=++b)a=o[u],n.pos=a.offset,w=n.readString(a.length),f=new uC(w,a),_[x=a.nameID]==null&&(_[x]=[]),_[a.nameID].push(f);this.strings=_,this.copyright=_[0],this.fontFamily=_[1],this.fontSubfamily=_[2],this.uniqueSubfamily=_[3],this.fontName=_[4],this.version=_[5];try{this.postscriptName=_[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=_[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=_[7],this.manufacturer=_[8],this.designer=_[9],this.description=_[10],this.vendorUrl=_[11],this.designerUrl=_[12],this.license=_[13],this.licenseUrl=_[14],this.preferredFamily=_[15],this.preferredSubfamily=_[17],this.compatibleFull=_[18],this.sampleText=_[19]},t}(),hC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),fC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,o,a,u,f,m,_;for(n.pos=this.offset,this.metrics=[],r=0,m=this.file.hhea.numberOfMetrics;0<=m?r<m:r>m;r=0<=m?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var w,b;for(b=[],r=w=0;0<=a?w<a:w>a;r=0<=a?++w:--w)b.push(n.readInt16());return b}(),this.widths=(function(){var w,b,E,x;for(x=[],w=0,b=(E=this.metrics).length;w<b;w++)u=E[w],x.push(u.advance);return x}).call(this),o=this.widths[this.widths.length-1],_=[],r=f=0;0<=a?f<a:f>a;r=0<=a?++f:--f)_.push(this.widths.push(o));return _},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),ev=[].slice,dC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,o,a,u,f,m,_,w,b,E;return n in this.cache?this.cache[n]:(u=this.file.loca,r=this.file.contents,o=u.indexOf(n),(a=u.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+o,f=(m=new Sl(r.read(a))).readShort(),w=m.readShort(),E=m.readShort(),_=m.readShort(),b=m.readShort(),this.cache[n]=f===-1?new mC(m,w,E,_,b):new pC(m,f,w,E,_,b),this.cache[n]))},t.prototype.encode=function(n,r,o){var a,u,f,m,_;for(f=[],u=[],m=0,_=r.length;m<_;m++)a=n[r[m]],u.push(f.length),a&&(f=f.concat(a.encode(o)));return u.push(f.length),{table:f,offsets:u}},t}(),pC=function(){function e(t,n,r,o,a,u){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=a,this.yMax=u,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),mC=function(){function e(t,n,r,o,a){var u,f;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;f=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&f;)u.pos+=1&f?4:2,128&f?u.pos+=8:64&f?u.pos+=4:8&f&&(u.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Sl(ev.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),gC=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return wa(t,Wo),t.prototype.tag="loca",t.prototype.parse=function(n){var r,o;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,u;for(u=[],o=0,a=this.length;o<a;o+=2)u.push(2*n.readUInt16());return u}).call(this):(function(){var a,u;for(u=[],o=0,a=this.length;o<a;o+=4)u.push(n.readUInt32());return u}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var o=new Uint32Array(this.offsets.length),a=0,u=0,f=0;f<o.length;++f)if(o[f]=a,u<r.length&&r[u]==f){++u,o[f]=a;var m=this.offsets[f],_=this.offsets[f+1]-m;_>0&&(a+=_)}for(var w=new Array(4*o.length),b=0;b<o.length;++b)w[4*b+3]=255&o[b],w[4*b+2]=(65280&o[b])>>8,w[4*b+1]=(16711680&o[b])>>16,w[4*b]=(4278190080&o[b])>>24;return w},t}(),vC=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,o,a;for(n in o=this.font.cmap.tables[0].codeMap,t={},a=this.subset)r=a[n],t[n]=o[r];return t},e.prototype.glyphsFor=function(t){var n,r,o,a,u,f,m;for(o={},u=0,f=t.length;u<f;u++)o[a=t[u]]=this.font.glyf.glyphFor(a);for(a in n=[],o)(r=o[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in m=this.glyphsFor(n))r=m[a],o[a]=r;return o},e.prototype.encode=function(t,n){var r,o,a,u,f,m,_,w,b,E,x,F,D,U,j;for(o in r=Q1.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(t),x={0:0},j=r.charMap)x[(m=j[o]).old]=m.new;for(F in E=r.maxGlyphID,u)F in x||(x[F]=E++);return w=function(Q){var ie,ye;for(ie in ye={},Q)ye[Q[ie]]=ie;return ye}(x),b=Object.keys(w).sort(function(Q,ie){return Q-ie}),D=function(){var Q,ie,ye;for(ye=[],Q=0,ie=b.length;Q<ie;Q++)f=b[Q],ye.push(w[f]);return ye}(),a=this.font.glyf.encode(u,D,x),_=this.font.loca.encode(a.offsets,D),U={cmap:this.font.cmap.raw(),glyf:a.table,loca:_,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(U["OS/2"]=this.font.os2.raw()),this.font.directory.encode(U)},e}();_n.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,o,a,u;if(Array.isArray(n))return"["+function(){var f,m,_;for(_=[],f=0,m=n.length;f<m;f++)r=n[f],_.push(t.convert(r));return _}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in a=["<<"],n)u=n[o],a.push("/"+o+" "+t.convert(u));return a.push(">>"),a.join(`
`)}return""+n},t}();const _C={class:"h-full flex"},yC={class:"flex-1 relative"},bC={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},wC={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},xC={class:"text-center max-w-lg mx-auto p-8"},LC={class:"space-y-4"},CC={class:"relative h-full w-full overflow-hidden"},kC={key:0,class:"absolute top-0 left-0 right-0 z-[1000]"},PC={key:2,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},SC={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},EC={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},AC={class:"flex justify-between items-center mb-4"},MC={key:0,class:"space-y-4"},BC={key:0,class:"space-y-2"},TC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},NC=["onClick"],DC={class:"font-medium text-gray-900"},OC={key:1,class:"space-y-2"},RC={class:"flex items-center mb-4"},IC={class:"text-sm text-gray-600"},FC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},jC=["onClick"],zC={class:"font-medium text-gray-900"},UC={key:2,class:"space-y-2"},qC={class:"flex items-center mb-4"},$C={class:"text-sm text-gray-600"},VC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},HC=["onClick"],GC={class:"font-medium text-gray-900"},WC={class:"text-sm text-gray-500"},ZC={class:"text-xs text-gray-400 mt-1"},KC={key:1,class:"space-y-4"},JC={key:0,class:"space-y-2"},YC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},XC=["onClick"],QC={class:"font-medium text-gray-900"},e6={key:1,class:"space-y-2"},t6={class:"flex items-center mb-4"},n6={class:"text-sm text-gray-600"},i6={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},r6=["onClick"],s6={class:"font-medium text-gray-900"},o6={class:"text-sm text-gray-500"},a6={class:"text-xs text-gray-400 mt-1"},l6={key:2,class:"max-h-96 overflow-y-auto"},u6={key:0,class:"text-center py-8"},c6={key:1,class:"space-y-2"},h6=["onClick"],f6={class:"font-medium text-gray-900"},d6={class:"text-sm text-gray-500"},p6={class:"text-xs text-gray-400 mt-1"},vm=ps({__name:"MapView",setup(e){const t=Ft(null),n=ef(),r=T1(),o=Ft([]),{currentTool:a,selectedShape:u,map:f,initMap:m,setDrawingTool:_,updateShapeStyle:w,updateShapeProperties:b,featureGroup:E,adjustView:x,clearActiveControlPoints:F}=iL(),{initMap:D,changeBaseMap:U}=rL(),j=Ft(!1),Q=Ft(!1),ie=Ft(null),ye=Ft(!1),we=Ft(null),Pe=ds(),Ee=Ft([]),fe=Ft([]),Te=Ft([]),$e=Ft(null),q=Ft(null),$=Ft(!1),Se=Ft(!1),B=Ft(!1),K=Ft(null),H=Nn(()=>{var Oe,ke,lt;return console.log("[MapView][filteredClients] Computing with:",{userType:(Oe=Pe.user)==null?void 0:Oe.user_type,selectedDealer:$e.value,dealerClients:fe.value}),((ke=Pe.user)==null?void 0:ke.user_type)==="admin"?$e.value?fe.value:[]:((lt=Pe.user)==null?void 0:lt.user_type)==="dealer"?fe.value:[]}),ne=Nn(()=>{var Oe;return u.value?{type:((Oe=u.value.properties)==null?void 0:Oe.type)||"unknown",properties:u.value.properties||{},layer:u.value}:null});function W(Oe){const ke=Oe.getCenter(),lt=Oe.getZoom(),ht={lat:ke.lat,lng:ke.lng,zoom:lt};document.cookie=`mapState=${JSON.stringify(ht)};max-age=2592000;path=/`}function z(){const ke=document.cookie.split(";").find(lt=>lt.trim().startsWith("mapState="));if(ke)try{return JSON.parse(ke.split("=")[1])}catch(lt){return console.error("Erreur lors de la lecture du cookie de position:",lt),null}return null}function A(Oe,ke,lt){const ht=lt/2/111111,it=ke/2/(111111*Math.cos(Oe.lat*Math.PI/180));return Ri.latLngBounds(Ri.latLng(Oe.lat-ht,Oe.lng-it),Ri.latLng(Oe.lat+ht,Oe.lng+it))}ba(async()=>{var it,Fe;await n.fetchPlans();const Oe=z(),ke=Oe?[Oe.lat,Oe.lng]:[46.603354,1.888334],lt=(Oe==null?void 0:Oe.zoom)??6;if(t.value&&!f.value){const Pt=m(t.value,ke,lt);Pt.pm.setLang("fr"),Pt.pm.addControls({rotateMode:!1}),D(Pt),Pt.on("moveend",()=>{W(Pt)}),window.addEventListener("map-set-location",It=>{if(Pt&&It.detail){const{lat:Wt,lng:Ut,zoom:Xt}=It.detail;Pt.flyTo([Wt,Ut],Xt,{duration:1.5,easeLinearity:.25})}})}const ht=localStorage.getItem("lastPlanId");if(ht)try{await ge(parseInt(ht))}catch(Pt){console.error("Error loading last plan:",Pt)}((it=Pe.user)==null?void 0:it.user_type)==="admin"&&await oe(),((Fe=Pe.user)==null?void 0:Fe.user_type)==="dealer"&&await xe()}),Yr(()=>r.hasUnsavedChanges,Oe=>{Oe&&ie.value&&n.markUnsavedChanges()}),Yr(f,async Oe=>{Oe&&n.currentPlan&&(Ae(),await r.loadPlanElements(n.currentPlan.id),await ge(n.currentPlan.id))}),Yr(()=>n.currentPlan,async Oe=>{Oe?(ie.value=Oe,n.setCurrentPlan(Oe),r.setCurrentPlan(Oe.id)):(ie.value=null,Ae())},{immediate:!0}),zh(()=>{f.value&&f.value.off("moveend")});async function ge(Oe){var ke;try{if(Ae(),console.log(`Tentative de chargement du plan ${Oe}...`),!n.getPlanById(Oe))try{await Ln.get(`/plans/${Oe}/`)}catch(it){throw((ke=it.response)==null?void 0:ke.status)===404&&(console.warn(`Plan ${Oe} non trouvé - Suppression de la référence du localStorage`),localStorage.removeItem("lastPlanId")),it}await r.loadPlanElements(Oe);const ht=n.getPlanById(Oe);ht?(ie.value=ht,n.setCurrentPlan(ht),r.setCurrentPlan(ht.id),localStorage.setItem("lastPlanId",ht.id.toString()),f.value&&E.value&&r.getCurrentElements.forEach(it=>{var Wt,Ut,Xt,Rt,on,dn,ai;if(!E.value||!it.data)return;let Fe=null;const{style:Pt={},...It}=it.data;switch(it.type_forme){case"CERCLE":{const Ct=It;Ct.center&&Ct.radius&&(Fe=Ri.circle([Ct.center[1],Ct.center[0]],{...Pt,radius:Ct.radius}));break}case"RECTANGLE":{const Ct=It;Ct.bounds&&(Fe=Ri.rectangle([[Ct.bounds.southWest[1],Ct.bounds.southWest[0]],[Ct.bounds.northEast[1],Ct.bounds.northEast[0]]],Pt));break}case"DEMI_CERCLE":{const Ct=It;if(Ct.center&&Ct.radius){Fe=new Vl(Ri.latLng(Ct.center[1],Ct.center[0]),Ct.radius,Ct.startAngle,Ct.endAngle,Pt),Fe.properties={type:"Semicircle",radius:Ct.radius,startAngle:Ct.startAngle,stopAngle:Ct.endAngle,style:Pt};const nn=Math.PI*Math.pow(Ct.radius,2)*((Ct.endAngle-Ct.startAngle)/360),Vt=2*Ct.radius+Math.PI*Ct.radius*((Ct.endAngle-Ct.startAngle)/180),ln=Math.PI*Ct.radius*((Ct.endAngle-Ct.startAngle)/180);Fe.properties.area=nn,Fe.properties.perimeter=Vt,Fe.properties.arcLength=ln,Fe.properties.openingAngle=Ct.endAngle-Ct.startAngle,console.log("[loadPlan] Demi-cercle restauré avec propriétés:",Fe.properties)}break}case"LIGNE":{const Ct=It;if(Ct.points){const nn=Ct.points.map(ln=>Ri.latLng(ln[1],ln[0]));Fe=Ri.polyline(nn,Pt),Fe.properties={type:"Line",style:Pt};let Vt=0;for(let ln=1;ln<nn.length;ln++)Vt+=nn[ln].distanceTo(nn[ln-1]);if(Fe.properties.length=Vt,Ct.hasOwnProperty("dimensions")&&Ct.dimensions&&(Fe.properties.dimensions=Ct.dimensions,Ct.dimensions.width&&Vt)){const ln=Vt*Ct.dimensions.width;Fe.properties.surfaceInfluence=ln}console.log("[loadPlan] Ligne restaurée avec propriétés:",Fe.properties)}break}case"TEXTE":{const Ct=It;if(Ct.position&&Ct.content){console.log("[loadPlan] Chargement d'un élément texte avec données:",Ct);const nn=Ri.latLng(Ct.position[1],Ct.position[0]),Vt=Ct.width||100,ln=Ct.height||50;let li;Ct.bounds?li=Ri.latLngBounds([Ct.bounds.southWest[1],Ct.bounds.southWest[0]],[Ct.bounds.northEast[1],Ct.bounds.northEast[0]]):li=A(nn,Vt,ln),Fe=new bl(li,Ct.content,{...Pt,textColor:((Wt=Ct.style)==null?void 0:Wt.textColor)||"#000000",fontSize:((Ut=Ct.style)==null?void 0:Ut.fontSize)||"14px",fontFamily:((Xt=Ct.style)==null?void 0:Xt.fontFamily)||"Arial, sans-serif",textAlign:((Rt=Ct.style)==null?void 0:Rt.textAlign)||"center",backgroundColor:((on=Ct.style)==null?void 0:on.backgroundColor)||"#FFFFFF",backgroundOpacity:((dn=Ct.style)==null?void 0:dn.backgroundOpacity)!==void 0?Ct.style.backgroundOpacity:1}),Ct.rotation&&typeof Fe.setRotation=="function"&&Fe.setRotation(Ct.rotation),console.log("[loadPlan] TextRectangle créé avec succès:",Fe)}break}}Fe&&(Fe._dbId=it.id,Fe.properties?(It.rotation&&(Fe.properties.rotation=It.rotation),console.log(`[loadPlan] Propriétés enrichies pour ${it.type_forme}:`,Fe.properties)):(Fe.properties={type:it.type_forme==="DEMI_CERCLE"?"Semicircle":it.type_forme,style:Pt,...It},console.log(`[loadPlan] Propriétés initialisées pour ${it.type_forme}:`,Fe.properties)),(ai=E.value)==null||ai.addLayer(Fe),o.value.push({id:it.id,type:it.type_forme,layer:Fe,properties:Fe.properties}),It.rotation&&typeof Fe.setRotation=="function"&&Fe.setRotation(It.rotation))}),console.log(`Plan ${Oe} chargé avec succès avec ${r.getCurrentElements.length} formes`)):console.error(`Plan ${Oe} introuvable après chargement`),Q.value=!1}catch(lt){console.error("Erreur lors du chargement du plan:",lt)}}async function I(){if(!ie.value||!E.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}ye.value=!0,we.value="saving";try{const Oe=[],ke=new Set(r.getCurrentElements.filter(it=>it.id!==void 0).map(it=>it.id)),lt=new Set;E.value.eachLayer(it=>{var Wt,Ut,Xt,Rt,on,dn,ai,Ct,nn,Vt,ln,li,In,fi,xi,Kn;const Fe={style:{color:((Wt=it.options)==null?void 0:Wt.color)||"#3388ff",fillColor:((Ut=it.options)==null?void 0:Ut.fillColor)||"#3388ff",fillOpacity:((Xt=it.options)==null?void 0:Xt.fillOpacity)||.2,weight:((Rt=it.options)==null?void 0:Rt.weight)||3,opacity:((on=it.options)==null?void 0:on.opacity)||1}};let Pt,It;if(it instanceof Ri.Circle)Pt="CERCLE",It={...Fe,center:[it.getLatLng().lng,it.getLatLng().lat],radius:it.getRadius()};else if(it instanceof Ri.Rectangle){Pt="RECTANGLE";const Tt=it.getBounds();It={...Fe,bounds:{southWest:[Tt.getSouthWest().lng,Tt.getSouthWest().lat],northEast:[Tt.getNorthEast().lng,Tt.getNorthEast().lat]}}}else if(((dn=it.properties)==null?void 0:dn.type)==="Semicircle"){Pt="DEMI_CERCLE";let Tt;typeof it.getLatLng=="function"?(Tt=it.getLatLng(),console.log("[savePlan] Demi-cercle - centre récupéré avec getLatLng",Tt)):it.getCenter&&typeof it.getCenter=="function"?(Tt=it.getCenter(),console.log("[savePlan] Demi-cercle - centre récupéré avec getCenter",Tt)):it._latlng?(Tt=it._latlng,console.log("[savePlan] Demi-cercle - centre récupéré via _latlng",Tt)):(console.warn("Impossible de récupérer le centre du demi-cercle",it),Tt={lat:0,lng:0});const Dt=it.getRadius?it.getRadius():0;console.log("[savePlan] Demi-cercle - rayon:",Dt);const Di=((Ct=(ai=it.properties)==null?void 0:ai.style)==null?void 0:Ct.startAngle)||0,qn=((Vt=(nn=it.properties)==null?void 0:nn.style)==null?void 0:Vt.stopAngle)||180;console.log("[savePlan] Demi-cercle - angles:",{startAngle:Di,endAngle:qn}),It={...Fe,center:[Tt.lng,Tt.lat],radius:Dt,startAngle:Di,endAngle:qn},console.log("[savePlan] Données du demi-cercle préparées:",It)}else if(it instanceof Ri.Polyline&&!(it instanceof Ri.Polygon)){Pt="LIGNE";const Tt=it.getLatLngs();It={...Fe,points:Tt.map(Dt=>[Dt.lng,Dt.lat])}}else if(it instanceof bl||((ln=it.properties)==null?void 0:ln.type)==="TextRectangle"){Pt="TEXTE";const Tt=it,Dt=Tt.getBounds(),Di=((li=Tt.properties)==null?void 0:li.text)||"",qn={...((In=Tt.properties)==null?void 0:In.style)||{},...Tt.options||{}};It={...Fe,position:[Dt.getCenter().lng,Dt.getCenter().lat],content:Di,bounds:{southWest:[Dt.getSouthWest().lng,Dt.getSouthWest().lat],northEast:[Dt.getNorthEast().lng,Dt.getNorthEast().lat]},style:{...Fe.style,textColor:qn.textColor||"#000000",fontSize:qn.fontSize||"14px",fontFamily:qn.fontFamily||"Arial, sans-serif",textAlign:qn.textAlign||"center",backgroundColor:qn.backgroundColor||"#FFFFFF",backgroundOpacity:qn.backgroundOpacity!==void 0?qn.backgroundOpacity:1},rotation:((fi=it.properties)==null?void 0:fi.rotation)||0},console.log("[savePlan] Sauvegarde TextRectangle avec données:",It)}else((xi=it.properties)==null?void 0:xi.type)==="text"&&(Pt="TEXTE",It={...Fe,position:[it.getLatLng().lng,it.getLatLng().lat],content:it.properties.text,style:{...it.properties.style,fontSize:it.properties.style.fontSize}});if(Pt&&It){let Tt=it._elementId;it._dbId&&(Tt=it._dbId,typeof Tt=="number"&&lt.add(Tt)),Oe.push({id:Tt,type_forme:Pt,data:{...It,rotation:((Kn=it.properties)==null?void 0:Kn.rotation)||0}})}});const ht=Array.from(ke).filter(it=>!lt.has(it));console.log("Sauvegarde du plan:",{totalElements:Oe.length,elementsToDelete:ht.length,details:{elements:Oe,elementsToDelete:ht}}),r.elements=Oe,await r.saveToPlan(ie.value.id,{elementsToDelete:ht}),we.value="success",setTimeout(()=>{we.value=null},3e3)}catch(Oe){console.error("Erreur lors de la sauvegarde du plan:",Oe),we.value=null}finally{ye.value=!1}}Uh(()=>{Pe.user||Ne(),n.clearCurrentPlan(),r.clearCurrentPlan()});function G(Oe){b(Oe)}function se(Oe){try{const ke=new Date(Oe);return isNaN(ke.getTime())?(console.error("Date invalide reçue:",Oe),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(ke)}catch(ke){return console.error("Erreur lors du formatage de la date:",ke),"Date invalide"}}const ce=()=>{E.value&&x()},pe=()=>{u.value&&E.value&&(_(""),E.value.removeLayer(u.value),u.value=null)};async function oe(){$.value=!0;try{const Oe=await Ln.get("/users/",{params:{role:"CONCESSIONNAIRE"}});Ee.value=Oe.data}catch(Oe){console.error("Erreur lors du chargement des concessionnaires:",Oe)}finally{$.value=!1}}async function xe(){var Oe;Se.value=!0;try{const ke=(Oe=Pe.user)==null?void 0:Oe.id;if(!ke){console.error("[loadDealerClients] No dealer ID available");return}const lt=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:ke}});Array.isArray(lt.data)?fe.value=lt.data:lt.data?fe.value=[lt.data]:fe.value=[]}catch(ke){console.error("[loadDealerClients] Error:",ke),fe.value=[]}finally{Se.value=!1}}async function me(Oe){if(console.log("[MapView][selectClient] Current state:",{selectedDealer:$e.value,selectedClient:q.value,newPlanModalRef:!!K.value}),K.value){K.value.selectClient(Oe),q.value=Oe,B.value=!0;try{const ke={client:Oe.id};$e.value&&(ke.concessionnaire=$e.value.id);const lt=await Ln.get("/plans/",{params:ke});Te.value=lt.data}catch(ke){console.error("[MapView][selectClient] Error loading client plans:",ke),Te.value=[]}finally{B.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function je(){$e.value=null,q.value=null,fe.value=[],Te.value=[]}function qe(){q.value=null,Te.value=[]}async function J(Oe){console.log(`onPlanCreated - Tentative de chargement du plan ${Oe}`),await n.fetchPlans();const ke=n.getPlanById(Oe);ke?(console.log(`Plan ${Oe} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",Oe.toString()),ie.value=ke,n.setCurrentPlan(ke),r.setCurrentPlan(ke.id),j.value=!1,console.log(`Plan ${Oe} chargé avec succès`)):console.error(`Plan ${Oe} introuvable après création! Vérifiez les permissions.`)}async function te(Oe){try{K.value?(await K.value.selectDealer(Oe),$e.value=Oe,fe.value=K.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(ke){console.error("[MapView][selectDealer] Error:",ke)}}Yr($e,async Oe=>{var ke;if(Oe&&((ke=Pe.user)==null?void 0:ke.user_type)==="admin"){Se.value=!0;try{const lt=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Oe.id}});fe.value=Array.isArray(lt.data)?lt.data:[lt.data]}catch(lt){console.error("[MapView][watch selectedDealer] Error loading clients:",lt),fe.value=[]}finally{Se.value=!1}}});function Ne(){localStorage.removeItem("lastPlanId")}function Ae(){E.value&&E.value.clearLayers(),o.value=[]}function ee(Oe,ke="m"){return ke==="m²"?`${(Oe/1e4).toFixed(2)} ha`:ke==="m"?Oe>=1e3?`${(Oe/1e3).toFixed(2)} km`:`${Oe.toFixed(2)} m`:`${Oe.toFixed(2)} ${ke}`}const We=Ft(!1);function et(Oe){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Rectangle avec texte"}[Oe]||Oe}async function Xe(){var Oe,ke,lt;if(!(!ie.value||!f.value||!E.value))try{We.value=!0;const ht=ie.value.concessionnaire_details,it=ie.value.client_details;u.value&&(F(),u.value=null);const Fe=new _n("l","mm","a4"),Pt=Fe.internal.pageSize.getWidth(),It=Fe.internal.pageSize.getHeight(),Wt=new Image;Wt.src=z0,await new Promise(on=>{Wt.onload=()=>on(),Wt.onerror=()=>on()}),Fe.addImage(Wt,"JPEG",(Pt-60)/2,20,60,60),Fe.setFontSize(24),Fe.setTextColor(0),Fe.text(ie.value.nom||"Sans titre",Pt/2,100,{align:"center"});let Ut=120;if(Fe.setFontSize(14),ht&&(Fe.setFont("helvetica","bold"),Fe.text("Concessionnaire:",20,Ut),Fe.setFont("helvetica","normal"),Fe.text(`${ht.first_name} ${ht.last_name}${ht.company_name?` (${ht.company_name})`:""}`,20,Ut+8),Ut+=25),it&&(Fe.setFont("helvetica","bold"),Fe.text("Client:",20,Ut),Fe.setFont("helvetica","normal"),Fe.text(`${it.first_name} ${it.last_name}${it.company_name?` (${it.company_name})`:""}`,20,Ut+8),Ut+=25),ie.value.description){Fe.setFont("helvetica","bold"),Fe.text("Description:",20,Ut),Fe.setFont("helvetica","normal");const on=Fe.splitTextToSize(ie.value.description,150);Fe.text(on,20,Ut+8),Ut+=10*on.length+15}Fe.setFontSize(10),Fe.setTextColor(100),Fe.text(`Date de création: ${se(ie.value.date_creation)}`,20,It-20),Fe.text(`Dernière modification: ${se(ie.value.date_modification)}`,Pt-20,It-20,{align:"right"});const Xt=[];E.value.eachLayer(on=>Xt.push(on));const Rt=Ri.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(f.value);await new Promise(on=>setTimeout(on,3e3));for(let on=0;on<Xt.length;on++){Fe.addPage();const dn=30;Fe.addImage(Wt,"JPEG",Pt-dn-10,10,dn,30),Fe.setFontSize(8),Fe.setTextColor(100);let Ct=25;ht&&(Fe.text(`Concessionnaire: ${ht.first_name} ${ht.last_name}${ht.company_name?` (${ht.company_name})`:""}`,20,Ct),Ct+=10),it&&Fe.text(`Client: ${it.first_name} ${it.last_name}${it.company_name?` (${it.company_name})`:""}`,20,Ct),Fe.setDrawColor(200,200,200),Fe.setLineWidth(.5),Fe.line(20,45,Pt-20,45);const nn=Xt[on],Vt=nn.properties;Vt&&(Fe.setTextColor(0),Fe.setFontSize(16),Fe.setFont("helvetica","bold"),Fe.text(et(Vt.type),20,60));const ln=((Oe=nn.getBounds)==null?void 0:Oe.call(nn))||((ke=nn.getLatLng)==null?void 0:ke.call(nn));ln&&f.value.fitBounds(ln instanceof Ri.LatLng?Ri.latLngBounds([ln]):ln,{padding:[50,50]}),await new Promise(li=>setTimeout(li,2e3)),f.value.invalidateSize(),await new Promise(li=>{const In=()=>{var Tt;const fi=(Tt=f.value)==null?void 0:Tt.getContainer();if(!fi){li();return}const xi=fi.querySelectorAll(".leaflet-tile-loaded");fi.querySelectorAll(".leaflet-tile-loading").length===0&&xi.length>0?li():setTimeout(In,100)};In()});try{const li=await Rt.takeScreen("image"),In=await new Promise((Tt,Dt)=>{const Di=new Image;Di.onload=()=>Tt(Di),Di.onerror=qn=>Dt(qn),Di.src=li}),fi=Pt*.6-30;let xi=In.height*fi/In.width;xi>It*.9&&(xi=It*.9);const Kn=Math.max(80,(It-xi)/2);if(Fe.addImage(In,"PNG",20,Kn,fi,xi),Vt){const Tt=Pt*.6+10;let Dt=70;Fe.setFontSize(12),Fe.setFont("helvetica","normal"),Vt.type==="Circle"?(Fe.text(`Rayon: ${ee(Vt.radius)}`,Tt,Dt),Dt+=10,Fe.text(`Diamètre: ${ee(Vt.radius*2)}`,Tt,Dt),Dt+=10,Fe.text(`Surface: ${ee(Vt.area,"m²")}`,Tt,Dt),Dt+=10,Fe.text(`Périmètre: ${ee(Vt.perimeter)}`,Tt,Dt),Dt+=10,Vt.surfaceInterieure&&(Fe.text(`Surface intérieure: ${ee(Vt.surfaceInterieure,"m²")}`,Tt,Dt),Dt+=10),Vt.surfaceExterieure&&(Fe.text(`Surface extérieure: ${ee(Vt.surfaceExterieure,"m²")}`,Tt,Dt),Dt+=10)):Vt.type==="Rectangle"?(Fe.text(`Largeur: ${ee(Vt.width)}`,Tt,Dt),Dt+=10,Fe.text(`Hauteur: ${ee(Vt.height)}`,Tt,Dt),Dt+=10,Fe.text(`Surface: ${ee(Vt.area,"m²")}`,Tt,Dt),Dt+=10,Fe.text(`Périmètre: ${ee(Vt.perimeter)}`,Tt,Dt),Dt+=10,Vt.surfaceInterieure&&(Fe.text(`Surface intérieure: ${ee(Vt.surfaceInterieure,"m²")}`,Tt,Dt),Dt+=10),Vt.surfaceExterieure&&(Fe.text(`Surface extérieure: ${ee(Vt.surfaceExterieure,"m²")}`,Tt,Dt),Dt+=10)):Vt.type==="Line"?(Fe.text(`Longueur: ${ee(Vt.length)}`,Tt,Dt),Dt+=10,(lt=Vt.dimensions)!=null&&lt.width&&(Fe.text(`Largeur d'influence: ${ee(Vt.dimensions.width)}`,Tt,Dt),Dt+=10),Vt.surfaceInfluence&&(Fe.text(`Surface d'influence: ${ee(Vt.surfaceInfluence,"m²")}`,Tt,Dt),Dt+=10)):Vt.type==="Polygon"?(Fe.text(`Surface: ${ee(Vt.area,"m²")}`,Tt,Dt),Dt+=10,Fe.text(`Périmètre: ${ee(Vt.perimeter)}`,Tt,Dt),Dt+=10,Vt.surfaceInterieure&&(Fe.text(`Surface intérieure: ${ee(Vt.surfaceInterieure,"m²")}`,Tt,Dt),Dt+=10),Vt.surfaceExterieure&&(Fe.text(`Surface extérieure: ${ee(Vt.surfaceExterieure,"m²")}`,Tt,Dt),Dt+=10)):Vt.type==="Semicircle"&&(Fe.text(`Rayon: ${ee(Vt.radius)}`,Tt,Dt),Dt+=10,Fe.text(`Diamètre: ${ee(Vt.radius*2)}`,Tt,Dt),Dt+=10,Fe.text(`Surface: ${ee(Vt.area,"m²")}`,Tt,Dt),Dt+=10,Fe.text(`Périmètre: ${ee(Vt.perimeter)}`,Tt,Dt),Dt+=10,Fe.text(`Longueur d'arc: ${ee(Vt.arcLength)}`,Tt,Dt),Dt+=10,Fe.text(`Angle d'ouverture: ${Vt.openingAngle.toFixed(1)}°`,Tt,Dt),Dt+=10,Vt.surfaceInterieure&&(Fe.text(`Surface intérieure: ${ee(Vt.surfaceInterieure,"m²")}`,Tt,Dt),Dt+=10),Vt.surfaceExterieure&&(Fe.text(`Surface extérieure: ${ee(Vt.surfaceExterieure,"m²")}`,Tt,Dt),Dt+=10))}}catch(li){console.error(`[generateSynthesis] Erreur capture forme ${on+1}:`,li)}}f.value.removeControl(Rt),Fe.save(`synthese_${ie.value.nom}.pdf`)}catch(ht){console.error("[generateSynthesis] Erreur:",ht)}finally{We.value=!1}}return(Oe,ke)=>{var lt,ht,it;return nt(),at("div",_C,[M("div",yC,[We.value?(nt(),at("div",bC,ke[8]||(ke[8]=[Au('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):tn("",!0),ie.value?tn("",!0):(nt(),at("div",wC,[M("div",xC,[ke[11]||(ke[11]=Au('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+z0+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),M("div",LC,[M("button",{onClick:ke[0]||(ke[0]=Fe=>j.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},ke[9]||(ke[9]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ki(" Créer un nouveau plan ")])),M("button",{onClick:ke[1]||(ke[1]=Fe=>Q.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},ke[10]||(ke[10]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),ki(" Charger un plan existant ")]))])])])),M("div",CC,[M("div",{ref_key:"mapContainer",ref:t,class:"absolute inset-0 w-full h-full"},null,512),ie.value&&!We.value?(nt(),at("div",kC,[Pi(Rx,{"last-save":(lt=ie.value)!=null&&lt.date_modification?new Date(ie.value.date_modification):void 0,"plan-name":(ht=ie.value)==null?void 0:ht.nom,"plan-description":(it=ie.value)==null?void 0:it.description,"save-status":we.value,onChangeMapType:Dn(U),onCreateNewPlan:ke[2]||(ke[2]=Fe=>j.value=!0),onLoadPlan:ke[3]||(ke[3]=Fe=>Q.value=!0),onSavePlan:I,onAdjustView:ce,onGenerateSummary:Xe},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):tn("",!0),ie.value&&!We.value?(nt(),ma(tx,{key:1,"current-tool":Dn(a),"selected-shape":ne.value,onToolChange:Dn(_),onStyleUpdate:Dn(w),onPropertiesUpdate:G,onDeleteShape:pe,class:"drawing-tools-wrapper"},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])):tn("",!0),We.value?(nt(),at("div",PC,ke[12]||(ke[12]=[Au('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):tn("",!0)]),Pi(N1,{ref_key:"newPlanModalRef",ref:K,modelValue:j.value,"onUpdate:modelValue":ke[4]||(ke[4]=Fe=>j.value=Fe),onCreated:J,onDealerSelected:ke[5]||(ke[5]=Fe=>$e.value=Fe),onClientSelected:ke[6]||(ke[6]=Fe=>q.value=Fe)},null,8,["modelValue"]),Q.value?(nt(),at("div",SC,[M("div",EC,[M("div",AC,[ke[14]||(ke[14]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),M("button",{onClick:ke[7]||(ke[7]=Fe=>Q.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ke[13]||(ke[13]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Dn(Pe).isAdmin?(nt(),at("div",MC,[$e.value?q.value?(nt(),at("div",UC,[M("div",qC,[M("button",{onClick:qe,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},ke[23]||(ke[23]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ki(" Retour à la liste des clients ")])),ke[24]||(ke[24]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",$C,kt(q.value.first_name)+" "+kt(q.value.last_name)+" ("+kt(q.value.company_name)+") ",1)]),ke[26]||(ke[26]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",VC,[B.value?(nt(),at(gn,{key:0},Un(3,Fe=>M("div",{key:Fe,class:"animate-pulse"},ke[25]||(ke[25]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(Te.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>ge(Fe.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",GC,kt(Fe.nom),1),M("div",WC,kt(Fe.description),1),M("div",ZC," Modifié le "+kt(se(Fe.date_modification)),1)],8,HC))),128))])])):(nt(),at("div",OC,[M("div",RC,[M("button",{onClick:je,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},ke[18]||(ke[18]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ki(" Retour à la liste des concessionnaires ")])),ke[19]||(ke[19]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",IC,kt($e.value.first_name)+" "+kt($e.value.last_name)+" ("+kt($e.value.company_name)+") ",1)]),ke[22]||(ke[22]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),M("div",FC,[Se.value?(nt(),at(gn,{key:0},Un(3,Fe=>M("div",{key:Fe,class:"animate-pulse"},ke[20]||(ke[20]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(H.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>me(Fe),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",zC,kt(Fe.first_name)+" "+kt(Fe.last_name)+" ("+kt(Fe.company_name)+")",1)]),ke[21]||(ke[21]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,jC))),128))])])):(nt(),at("div",BC,[ke[17]||(ke[17]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez un concessionnaire",-1)),M("div",TC,[$.value?(nt(),at(gn,{key:0},Un(3,Fe=>M("div",{key:Fe,class:"animate-pulse"},ke[15]||(ke[15]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(Ee.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>te(Fe),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",DC,kt(Fe.first_name)+" "+kt(Fe.last_name)+" ("+kt(Fe.company_name)+")",1)]),ke[16]||(ke[16]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,NC))),128))])]))])):Dn(Pe).isDealer?(nt(),at("div",KC,[q.value?(nt(),at("div",e6,[M("div",t6,[M("button",{onClick:qe,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},ke[30]||(ke[30]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ki(" Retour à la liste des clients ")])),ke[31]||(ke[31]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",n6,kt(q.value.first_name)+" "+kt(q.value.last_name),1)]),ke[33]||(ke[33]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",i6,[B.value?(nt(),at(gn,{key:0},Un(3,Fe=>M("div",{key:Fe,class:"animate-pulse"},ke[32]||(ke[32]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(Te.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>ge(Fe.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",s6,kt(Fe.nom),1),M("div",o6,kt(Fe.description),1),M("div",a6," Modifié le "+kt(se(Fe.date_modification)),1)],8,r6))),128))])])):(nt(),at("div",JC,[ke[29]||(ke[29]=M("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),M("div",YC,[Se.value?(nt(),at(gn,{key:0},Un(3,Fe=>M("div",{key:Fe,class:"animate-pulse"},ke[27]||(ke[27]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(nt(!0),at(gn,{key:1},Un(H.value,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>me(Fe),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",QC,kt(Fe.first_name)+" "+kt(Fe.last_name)+" ("+kt(Fe.company_name)+")",1)]),ke[28]||(ke[28]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,XC))),128))])]))])):(nt(),at("div",l6,[Dn(n).plans.length===0?(nt(),at("div",u6,ke[34]||(ke[34]=[M("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(nt(),at("div",c6,[(nt(!0),at(gn,null,Un(Dn(n).plans,Fe=>(nt(),at("button",{key:Fe.id,onClick:Pt=>ge(Fe.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",f6,kt(Fe.nom),1),M("div",d6,kt(Fe.description),1),M("div",p6," Modifié le "+kt(se(Fe.date_modification)),1)],8,h6))),128))]))]))])])):tn("",!0)])])}}}),m6={class:"fixed inset-0 z-50 overflow-y-auto"},g6={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},v6={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},_6={class:"mt-3 text-center sm:mt-0 sm:text-left"},y6={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},b6={class:"mt-4"},w6={class:"grid grid-cols-2 gap-4"},x6=["disabled"],L6={key:0,class:"mt-1 text-sm text-gray-500"},C6={class:"grid grid-cols-2 gap-4"},k6={key:0},P6=["disabled"],S6=["value"],E6={key:1},A6=["disabled"],M6=["value"],B6={key:0},T6={class:"grid grid-cols-2 gap-4"},N6={key:1,class:"rounded-md bg-red-50 p-4"},D6={class:"flex"},O6={class:"ml-3"},R6={class:"text-sm font-medium text-red-800"},I6={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},F6=["disabled"],j6={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tv=ps({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(e,{emit:t}){var F,D,U,j,Q,ie,ye;const n=e,r=t,o=ds(),a=Ft(!1),u=Ft(null),f=Nn(()=>{var we;return n.isAdmin?n.user?n.user.id!==((we=o.user)==null?void 0:we.id):!0:!1}),m=Nn(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),_=Nn(()=>n.isAdmin?b.role==="UTILISATEUR":!0),w=Nn(()=>n.dealers.filter(we=>we.role==="CONCESSIONNAIRE")),b=Wa({first_name:((F=n.user)==null?void 0:F.first_name)||"",last_name:((D=n.user)==null?void 0:D.last_name)||"",email:((U=n.user)==null?void 0:U.email)||"",username:((j=n.user)==null?void 0:j.username)||"",company_name:((Q=n.user)==null?void 0:Q.company_name)||"",role:((ie=n.user)==null?void 0:ie.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((ye=n.user)==null?void 0:ye.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),E=()=>{if(!b.first_name||!b.last_name)return u.value="Le prénom et le nom sont requis",!1;if(!b.email)return u.value="L'email est requis",!1;if(!b.username)return u.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!b.password)return u.value="Le mot de passe est requis",!1;if(b.password!==b.password_confirm)return u.value="Les mots de passe ne correspondent pas",!1}return b.role==="UTILISATEUR"&&!b.dealer?(u.value="Un concessionnaire doit être sélectionné pour un client",!1):!0},x=async()=>{var we;if(u.value=null,!!E()){a.value=!0;try{const Pe={...b};(we=n.user)!=null&&we.id&&(Pe.id=n.user.id,delete Pe.password,delete Pe.password_confirm),Pe.role==="UTILISATEUR"&&Pe.dealer&&(Pe.concessionnaire=Pe.dealer),delete Pe.dealer,await r("save",Pe),r("close")}catch(Pe){console.error("Erreur formulaire:",Pe),u.value=Pe.message,a.value=!1}}};return(we,Pe)=>(nt(),at("div",m6,[M("div",g6,[Pe[24]||(Pe[24]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),Pe[25]||(Pe[25]=M("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),M("div",v6,[M("div",null,[M("div",_6,[M("h3",y6,kt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),M("div",b6,[M("form",{onSubmit:Mc(x,["prevent"]),class:"space-y-4"},[M("div",w6,[M("div",null,[Pe[10]||(Pe[10]=M("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),Pn(M("input",{type:"text",id:"first_name","onUpdate:modelValue":Pe[0]||(Pe[0]=Ee=>b.first_name=Ee),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.first_name]])]),M("div",null,[Pe[11]||(Pe[11]=M("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Pn(M("input",{type:"text",id:"last_name","onUpdate:modelValue":Pe[1]||(Pe[1]=Ee=>b.last_name=Ee),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.last_name]])])]),M("div",null,[Pe[12]||(Pe[12]=M("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Pn(M("input",{type:"email",id:"email","onUpdate:modelValue":Pe[2]||(Pe[2]=Ee=>b.email=Ee),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.email]])]),M("div",null,[Pe[13]||(Pe[13]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Pn(M("input",{type:"text",id:"username","onUpdate:modelValue":Pe[3]||(Pe[3]=Ee=>b.username=Ee),required:"",disabled:!!n.user,class:Ni(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,x6),[[ri,b.username]]),n.user?(nt(),at("p",L6," Le nom d'utilisateur ne peut pas être modifié après la création. ")):tn("",!0)]),M("div",null,[Pe[14]||(Pe[14]=M("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),Pn(M("input",{type:"text",id:"company_name","onUpdate:modelValue":Pe[4]||(Pe[4]=Ee=>b.company_name=Ee),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.company_name]])]),M("div",C6,[n.isAdmin?(nt(),at("div",k6,[Pe[16]||(Pe[16]=M("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Pn(M("select",{id:"role","onUpdate:modelValue":Pe[5]||(Pe[5]=Ee=>b.role=Ee),required:"",disabled:!f.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Pe[15]||(Pe[15]=M("option",{value:""},"Sélectionner un rôle",-1)),(nt(!0),at(gn,null,Un(m.value,Ee=>(nt(),at("option",{key:Ee.value,value:Ee.value},kt(Ee.label),9,S6))),128))],8,P6),[[hs,b.role]])])):tn("",!0),_.value?(nt(),at("div",E6,[Pe[18]||(Pe[18]=M("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Pn(M("select",{id:"dealer","onUpdate:modelValue":Pe[6]||(Pe[6]=Ee=>b.dealer=Ee),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Pe[17]||(Pe[17]=M("option",{value:""},"Sélectionner un concessionnaire",-1)),(nt(!0),at(gn,null,Un(w.value,Ee=>(nt(),at("option",{key:Ee.id,value:Ee.id},kt(Dn(Kl)(Ee)),9,M6))),128))],8,A6),[[hs,b.dealer]])])):tn("",!0)]),e.user?tn("",!0):(nt(),at("div",B6,[M("div",T6,[M("div",null,[Pe[19]||(Pe[19]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Pn(M("input",{type:"password",id:"password","onUpdate:modelValue":Pe[7]||(Pe[7]=Ee=>b.password=Ee),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.password]])]),M("div",null,[Pe[20]||(Pe[20]=M("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Pn(M("input",{type:"password",id:"password_confirm","onUpdate:modelValue":Pe[8]||(Pe[8]=Ee=>b.password_confirm=Ee),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ri,b.password_confirm]])])]),Pe[21]||(Pe[21]=M("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),u.value?(nt(),at("div",N6,[M("div",D6,[Pe[22]||(Pe[22]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",O6,[M("h3",R6,kt(u.value),1)])])])):tn("",!0),M("div",I6,[M("button",{type:"submit",disabled:a.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[a.value?(nt(),at("svg",j6,Pe[23]||(Pe[23]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),ki(" "+kt(a.value?"Enregistrement...":"Enregistrer"),1)],8,F6),M("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:Pe[9]||(Pe[9]=Ee=>we.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),z6={class:"fixed inset-0 z-50 overflow-y-auto"},U6={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},q6={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},$6={class:"sm:flex sm:items-start"},V6={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},H6={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},G6={class:"mt-2"},W6={class:"text-sm text-gray-500"},Z6={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},nv=ps({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(t,n)=>(nt(),at("div",z6,[M("div",U6,[n[3]||(n[3]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=M("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),M("div",q6,[M("div",$6,[n[2]||(n[2]=M("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[M("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),M("div",V6,[M("h3",H6,kt(e.title),1),M("div",G6,[M("p",W6,kt(e.message),1)])])]),M("div",Z6,[M("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>t.$emit("confirm"))}," Confirmer "),M("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>t.$emit("cancel"))}," Annuler ")])])])]))}}),K6={class:"h-full bg-gray-50"},J6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Y6={class:"flex justify-between items-center mb-8"},X6={class:"text-3xl font-extrabold text-gray-900"},Q6={class:"bg-white shadow rounded-lg mb-6 p-4"},ek={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},tk={key:0},nk=["placeholder"],ik={key:1},rk=["value"],sk={class:"bg-white shadow rounded-lg"},ok={class:"overflow-x-auto"},ak={class:"min-w-full divide-y divide-gray-200"},lk={class:"bg-gray-50"},uk={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ck={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},hk={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},fk={class:"bg-white divide-y divide-gray-200"},dk={class:"px-6 py-4 whitespace-nowrap"},pk={class:"flex items-center"},mk={class:"flex-shrink-0 h-10 w-10"},gk={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},vk={class:"text-primary-600 font-medium"},_k={class:"ml-4"},yk={class:"text-sm font-medium text-gray-900"},bk={class:"text-sm text-gray-500"},wk={class:"px-6 py-4 whitespace-nowrap"},xk={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Lk={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ck={class:"px-6 py-4 whitespace-nowrap"},kk={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Pk=["onClick"],Sk=["onClick"],Ek=ps({__name:"UserListView",setup(e){const t=ds(),n=Ft([]),r=Ft([]),o=Ft(!1),a=Ft(!1),u=Ft(null),f=Ft(null),m=Wa({role:"",search:"",dealer:""}),_=Nn(()=>t.isAdmin),w=Nn(()=>t.isDealer),b=Nn(()=>n.value.filter(q=>q.role==="CONCESSIONNAIRE")),E=Nn(()=>{var $;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",_.value),console.log("Is dealer:",w.value),console.log("Current filters:",m);let q=n.value;if(w.value&&(console.log("Filtering for dealer:",($=t.user)==null?void 0:$.id),q=q.filter(Se=>{var B;return Se.role==="UTILISATEUR"&&Se.dealer===((B=t.user)==null?void 0:B.id)}),console.log("Filtered users for dealer:",q)),_.value&&(m.role&&(q=q.filter(Se=>Se.role===m.role),console.log("Filtered by role:",q)),m.dealer&&(q=q.filter(Se=>String(Se.dealer)===String(m.dealer)),console.log("Filtered by dealer:",q))),m.search){const Se=m.search.toLowerCase();q=q.filter(B=>B.username.toLowerCase().includes(Se)||B.email.toLowerCase().includes(Se)||B.first_name.toLowerCase().includes(Se)||B.last_name.toLowerCase().includes(Se)||B.company_name&&B.company_name.toLowerCase().includes(Se)),console.log("Filtered by search:",q)}return console.log("Final filtered users:",q),q});ba(async()=>{await x(),_.value&&await F()});async function x(){try{console.log("Fetching users...");const q=await Ln.get("/users/");console.log("Users API response:",q.data),n.value=q.data,console.log("Users after assignment:",n.value)}catch(q){console.error("Erreur lors de la récupération des utilisateurs:",q)}}async function F(){try{const q=await Ln.get("/users/",{params:{role:"CONCESSIONNAIRE"}});r.value=q.data}catch(q){console.error("Erreur lors de la récupération des concessionnaires:",q)}}function D(){u.value=null,o.value=!0}function U(q){u.value={...q},o.value=!0}function j(){o.value=!1,u.value=null}async function Q(q){var $;try{let Se;const B=!!q.id,K={...q};return delete K.dealer_name,delete K.full_name,delete K.user_type,delete K.permissions,B?Se=await Ln.patch(`/users/${q.id}/`,K):Se=await Ln.post("/users/",K),await x(),j(),Se.data}catch(Se){const B=(($=Se.response)==null?void 0:$.data)||{};let K="";throw typeof B=="object"&&(K=Object.entries(B).map(([H,ne])=>Array.isArray(ne)?ne[0]:ne).filter(H=>H).join(`
`)),K||(K="Une erreur est survenue lors de la sauvegarde"),new Error(K)}}function ie(q){f.value=q,a.value=!0}async function ye(){if(f.value)try{await Ln.delete(`/users/${f.value.id}/`),await x(),a.value=!1,f.value=null}catch(q){throw console.error("Erreur lors de la suppression de l'utilisateur:",q),q}}function we(q,$){return`${(q==null?void 0:q.charAt(0))||""}${($==null?void 0:$.charAt(0))||""}`.toUpperCase()}const Pe={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function Ee(q){return Pe[q]||q}function fe(q){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Te(q){return q?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function $e(q){var $;return _.value?!0:w.value?q.role==="UTILISATEUR"&&q.dealer===(($=t.user)==null?void 0:$.id):!1}return(q,$)=>{var Se,B;return nt(),at("div",K6,[M("div",J6,[M("div",Y6,[M("h1",X6,kt(_.value?"Gestion des utilisateurs":"Mes clients"),1),M("button",{onClick:D,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[$[4]||($[4]=M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),ki(" "+kt(_.value?"Nouvel utilisateur":"Nouveau client"),1)])]),M("div",Q6,[M("div",ek,[_.value?(nt(),at("div",tk,[$[6]||($[6]=M("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Pn(M("select",{id:"role-filter","onUpdate:modelValue":$[0]||($[0]=K=>m.role=K),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},$[5]||($[5]=[M("option",{value:""},"Tous les rôles",-1),M("option",{value:"ADMIN"},"Admin",-1),M("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),M("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[hs,m.role]])])):tn("",!0),M("div",null,[$[7]||($[7]=M("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Pn(M("input",{type:"text",id:"search","onUpdate:modelValue":$[1]||($[1]=K=>m.search=K),placeholder:_.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,nk),[[ri,m.search]])]),_.value?(nt(),at("div",ik,[$[9]||($[9]=M("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Pn(M("select",{id:"dealer-filter","onUpdate:modelValue":$[2]||($[2]=K=>m.dealer=K),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[$[8]||($[8]=M("option",{value:""},"Tous les concessionnaires",-1)),(nt(!0),at(gn,null,Un(b.value,K=>(nt(),at("option",{key:K.id,value:K.id},kt(K.company_name||`${K.first_name} ${K.last_name}`),9,rk))),128))],512),[[hs,m.dealer]])])):tn("",!0)])]),M("div",sk,[M("div",ok,[M("table",ak,[M("thead",lk,[M("tr",null,[M("th",uk,kt(_.value?"Utilisateur":"Client"),1),_.value?(nt(),at("th",ck," Rôle ")):tn("",!0),$[10]||($[10]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),_.value?(nt(),at("th",hk," Concessionnaire ")):tn("",!0),$[11]||($[11]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),$[12]||($[12]=M("th",{scope:"col",class:"relative px-6 py-3"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",fk,[(nt(!0),at(gn,null,Un(E.value,K=>(nt(),at("tr",{key:K.id},[M("td",dk,[M("div",pk,[M("div",mk,[M("div",gk,[M("span",vk,kt(we(K.first_name,K.last_name)),1)])]),M("div",_k,[M("div",yk,kt(Dn(Kl)(K)),1),M("div",bk,kt(K.username),1)])])]),M("td",wk,[M("span",{class:Ni(fe(K.role))},kt(Ee(K.role)),3)]),M("td",xk,kt(K.email),1),M("td",Lk,kt(K.dealer_name||"-"),1),M("td",Ck,[M("span",{class:Ni(Te(K.is_active))},kt(K.is_active?"Actif":"Inactif"),3)]),M("td",kk,[M("button",{onClick:H=>U(K),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Pk),$e(K)?(nt(),at("button",{key:0,onClick:H=>ie(K),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Sk)):tn("",!0)])]))),128))])])])])]),o.value?(nt(),ma(tv,{key:0,user:u.value,dealers:r.value,"is-admin":_.value,"current-dealer":(B=(Se=Dn(t).user)==null?void 0:Se.id)==null?void 0:B.toString(),onClose:j,onSave:Q},null,8,["user","dealers","is-admin","current-dealer"])):tn("",!0),a.value?(nt(),ma(nv,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:ye,onCancel:$[3]||($[3]=K=>a.value=!1)})):tn("",!0)])}}}),Ak={class:"h-full bg-gray-50"},Mk={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Bk={class:"sm:flex sm:items-center"},Tk={class:"sm:flex-auto"},Nk={class:"text-2xl font-semibold text-gray-900"},Dk={class:"mt-2 text-sm text-gray-700"},Ok={key:0,class:"mt-8"},Rk={class:"mb-6"},Ik=["value"],Fk={key:0,class:"mb-6"},jk=["value"],zk={key:1,class:"mt-8"},Uk={class:"mb-6"},qk=["value"],$k={class:"mt-8"},Vk={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},Hk={class:"overflow-x-auto"},Gk={class:"min-w-full divide-y divide-gray-300"},Wk={class:"bg-gray-50"},Zk={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},Kk={class:"ml-2 flex-none rounded"},Jk={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Yk={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Xk={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Qk={class:"ml-2 flex-none rounded"},eP={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},tP={class:"ml-2 flex-none rounded"},nP={class:"divide-y divide-gray-200 bg-white"},iP={key:0},rP={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},sP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},oP={key:0,class:"px-3 py-4 text-sm text-gray-900"},aP={key:0,class:"flex items-center"},lP={class:"h-8 w-8 flex-shrink-0"},uP={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},cP={class:"text-primary-700 font-medium text-sm"},hP={class:"ml-3"},fP={class:"font-medium"},dP={key:1,class:"text-gray-500"},pP={key:1,class:"px-3 py-4 text-sm text-gray-900"},mP={key:0,class:"flex items-center"},gP={class:"h-8 w-8 flex-shrink-0"},vP={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},_P={class:"text-primary-700 font-medium text-sm"},yP={class:"ml-3"},bP={class:"font-medium"},wP={key:1,class:"text-gray-500"},xP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},LP={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},CP={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},kP=["onClick"],PP=["onClick"],SP=["onClick"],EP={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},AP={class:"bg-white rounded-lg p-6 max-w-md w-full"},MP={class:"flex justify-between items-center mb-4"},BP={key:0,class:"space-y-4"},TP=["value"],NP=["value"],DP={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},OP={class:"flex"},RP={class:"ml-3"},IP={class:"text-sm font-medium text-red-800"},FP={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},jP=["disabled"],zP={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},UP=ps({__name:"PlansView",setup(e){const t=Nc(),n=ef(),r=ds(),o=T1(),a=Ft([]),u=Ft([]),f=Ft([]),m=Ft(!1),_=Ft(!1),w=Ft({nom:"",description:"",client:null}),b=Ft({id:0,nom:"",description:"",concessionnaire:null,client:null}),E=Ft(!1),x=Ft(null),F=Ft(null),D=Ft(null),U=Ft("date_modification"),j=Ft("desc"),Q=Nn(()=>F.value?f.value.filter(W=>W.concessionnaire===F.value):f.value),ie=Nn(()=>{let W=a.value;return r.isAdmin?F.value&&(W=W.filter(z=>z.concessionnaire===F.value),D.value&&(W=W.filter(z=>z.client===D.value))):r.isDealer&&(W=W.filter(z=>{var A;return z.concessionnaire===((A=r.user)==null?void 0:A.id)}),D.value&&(W=W.filter(z=>z.client===D.value))),[...W].sort((z,A)=>{if(U.value==="nom")return j.value==="asc"?z.nom.localeCompare(A.nom):A.nom.localeCompare(z.nom);{const ge=new Date(z[U.value]).getTime(),I=new Date(A[U.value]).getTime();return j.value==="asc"?ge-I:I-ge}})});Nn(()=>a.value.filter(W=>{var z;return W.createur.id===((z=r.user)==null?void 0:z.id)})),Nn(()=>a.value.filter(W=>{var z,A,ge;return r.isAdmin?W.createur.id!==((z=r.user)==null?void 0:z.id):r.isDealer?W.concessionnaire===((A=r.user)==null?void 0:A.id):W.client===((ge=r.user)==null?void 0:ge.id)}));const ye=Nn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:a.value}:r.isDealer?{title:"Plans des clients",description:"Plans où vous êtes assigné comme concessionnaire",plans:a.value.filter(W=>{var z;return W.concessionnaire===((z=r.user)==null?void 0:z.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:a.value.filter(W=>{var z,A;return W.client===((z=r.user)==null?void 0:z.id)||W.createur.id===((A=r.user)==null?void 0:A.id)})});ba(async()=>{var W;await we(),r.isAdmin?await Pe():r.isDealer&&await Se(((W=r.user)==null?void 0:W.id)||0)});async function we(){try{const W=await n.fetchPlansWithDetails();a.value=W.data}catch(W){console.error("Erreur lors du chargement des plans:",W)}}async function Pe(){try{const[W,z]=await Promise.all([Ln.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),Ln.get("/users/",{params:{role:"UTILISATEUR"}})]);u.value=W.data,f.value=z.data}catch(W){console.error("Erreur lors du chargement des dealers et clients:",W)}}function Ee(){m.value=!0,w.value={nom:"",description:"",client:null}}async function fe(W){try{n.setCurrentPlan(W),await o.loadPlanElements(W.id),t.push("/")}catch(z){console.error("Erreur lors du chargement du plan:",z),alert("Une erreur est survenue lors du chargement du plan")}}async function Te(W){var z;if(W!=null&&W.id&&confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await n.deletePlan(W.id),await we(),((z=n.currentPlan)==null?void 0:z.id)===W.id&&n.clearCurrentPlan()}catch(A){console.error("Erreur lors de la suppression du plan:",A),alert("Une erreur est survenue lors de la suppression du plan")}}function $e(W){return new Date(W).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function q(W){return W?(W.first_name.charAt(0)+W.last_name.charAt(0)).toUpperCase():""}function $(W){b.value={id:W.id,nom:W.nom,description:W.description,concessionnaire:W.concessionnaire||null,client:W.client||null},W.concessionnaire&&Se(W.concessionnaire),_.value=!0}async function Se(W){try{const z=await Ln.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:W}});f.value=z.data}catch(z){console.error("Erreur lors du chargement des clients:",z),f.value=[]}}async function B(){var W,z,A,ge,I;x.value=null,E.value=!0;try{if(!b.value.nom.trim())throw new Error("Le nom du plan est requis");if(b.value.client&&!b.value.concessionnaire)throw new Error("Un concessionnaire doit être sélectionné pour assigner un client");await n.updatePlanDetails(b.value.id,{nom:b.value.nom.trim(),description:b.value.description.trim(),concessionnaire:b.value.concessionnaire,client:b.value.client})&&(_.value=!1,await we())}catch(G){if(console.error("Erreur lors de la mise à jour du plan:",G),(z=(W=G.response)==null?void 0:W.data)!=null&&z.detail)x.value=G.response.data.detail;else if((ge=(A=G.response)==null?void 0:A.data)!=null&&ge.non_field_errors)x.value=G.response.data.non_field_errors[0];else if((I=G.response)!=null&&I.data){const se=Object.entries(G.response.data).map(([ce,pe])=>`${ce}: ${Array.isArray(pe)?pe[0]:pe}`);x.value=se.join(`
`)}else x.value=G.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{E.value=!1}}Yr(()=>b.value.concessionnaire,async W=>{W?await Se(W):(f.value=[],b.value.client=null)});function K(W){const z=r.user;return z?z.user_type==="admin"?!0:z.user_type==="dealer"?W.concessionnaire===z.id:W.client===z.id||W.createur.id===z.id:!1}Nn(()=>{const W=new Map;return a.value.forEach(z=>{z.createur&&W.set(z.createur.id,z.createur),z.concessionnaire_details&&W.set(z.concessionnaire_details.id,z.concessionnaire_details),z.client_details&&W.set(z.client_details.id,z.client_details)}),W});async function H(W){await we(),localStorage.setItem("lastPlanId",W.toString()),console.log(`Plan ${W} créé et défini comme plan actif`),t.push("/")}function ne(W){U.value===W?j.value=j.value==="asc"?"desc":"asc":(U.value=W,j.value="desc")}return(W,z)=>(nt(),at("div",Ak,[M("div",Mk,[M("div",Bk,[M("div",Tk,[M("h1",Nk,kt(ye.value.title),1),M("p",Dk,kt(ye.value.description),1)]),M("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[M("button",{onClick:Ee,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Dn(r).isAdmin?(nt(),at("div",Ok,[M("div",Rk,[z[14]||(z[14]=M("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),Pn(M("select",{id:"dealer-filter","onUpdate:modelValue":z[0]||(z[0]=A=>F.value=A),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[13]||(z[13]=M("option",{value:null},"Tous les concessionnaires",-1)),(nt(!0),at(gn,null,Un(u.value,A=>(nt(),at("option",{key:A.id,value:A.id},kt(A.first_name)+" "+kt(A.last_name)+" ("+kt(A.company_name)+") ",9,Ik))),128))],512),[[hs,F.value]])]),F.value?(nt(),at("div",Fk,[z[16]||(z[16]=M("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),Pn(M("select",{id:"client-filter","onUpdate:modelValue":z[1]||(z[1]=A=>D.value=A),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[15]||(z[15]=M("option",{value:null},"Tous les clients",-1)),(nt(!0),at(gn,null,Un(Q.value,A=>(nt(),at("option",{key:A.id,value:A.id},kt(A.first_name)+" "+kt(A.last_name)+" ("+kt(A.company_name)+") ",9,jk))),128))],512),[[hs,D.value]])])):tn("",!0)])):Dn(r).isDealer?(nt(),at("div",zk,[M("div",Uk,[z[18]||(z[18]=M("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),Pn(M("select",{id:"client-filter","onUpdate:modelValue":z[2]||(z[2]=A=>D.value=A),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[17]||(z[17]=M("option",{value:null},"Tous les clients",-1)),(nt(!0),at(gn,null,Un(f.value,A=>(nt(),at("option",{key:A.id,value:A.id},kt(A.first_name)+" "+kt(A.last_name)+" ("+kt(A.company_name)+") ",9,qk))),128))],512),[[hs,D.value]])])])):tn("",!0),M("div",$k,[M("div",Vk,[M("div",Hk,[M("table",Gk,[M("thead",Wk,[M("tr",null,[M("th",Zk,[M("button",{onClick:z[3]||(z[3]=A=>ne("nom")),class:"group inline-flex items-center"},[z[20]||(z[20]=ki(" Nom ")),M("span",Kk,[(nt(),at("svg",{class:Ni(["h-5 w-5",{"text-gray-900":U.value==="nom","text-gray-400":U.value!=="nom","rotate-180":U.value==="nom"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},z[19]||(z[19]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),z[25]||(z[25]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Dn(r).isDealer?tn("",!0):(nt(),at("th",Jk," Concessionnaire ")),Dn(r).isClient?tn("",!0):(nt(),at("th",Yk," Client ")),M("th",Xk,[M("button",{onClick:z[4]||(z[4]=A=>ne("date_creation")),class:"group inline-flex items-center"},[z[22]||(z[22]=ki(" Créé le ")),M("span",Qk,[(nt(),at("svg",{class:Ni(["h-5 w-5",{"text-gray-900":U.value==="date_creation","text-gray-400":U.value!=="date_creation","rotate-180":U.value==="date_creation"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},z[21]||(z[21]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),M("th",eP,[M("button",{onClick:z[5]||(z[5]=A=>ne("date_modification")),class:"group inline-flex items-center"},[z[24]||(z[24]=ki(" Modifié le ")),M("span",tP,[(nt(),at("svg",{class:Ni(["h-5 w-5",{"text-gray-900":U.value==="date_modification","text-gray-400":U.value!=="date_modification","rotate-180":U.value==="date_modification"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},z[23]||(z[23]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),z[26]||(z[26]=M("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",nP,[ie.value.length===0?(nt(),at("tr",iP,z[27]||(z[27]=[M("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):tn("",!0),(nt(!0),at(gn,null,Un(ie.value,A=>(nt(),at("tr",{key:A.id,class:"hover:bg-gray-50"},[M("td",rP,kt(A.nom),1),M("td",sP,kt(A.description||"-"),1),Dn(r).isDealer?tn("",!0):(nt(),at("td",oP,[A.concessionnaire_details?(nt(),at("div",aP,[M("div",lP,[M("div",uP,[M("span",cP,kt(q(A.concessionnaire_details)),1)])]),M("div",hP,[M("div",fP,kt(Dn(Kl)(A.concessionnaire_details)),1)])])):(nt(),at("div",dP,"-"))])),Dn(r).isClient?tn("",!0):(nt(),at("td",pP,[A.client_details?(nt(),at("div",mP,[M("div",gP,[M("div",vP,[M("span",_P,kt(q(A.client_details)),1)])]),M("div",yP,[M("div",bP,kt(Dn(Kl)(A.client_details)),1)])])):(nt(),at("div",wP,"-"))])),M("td",xP,kt($e(A.date_creation)),1),M("td",LP,kt($e(A.date_modification)),1),M("td",CP,[M("button",{onClick:ge=>fe(A),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,kP),M("button",{onClick:ge=>$(A),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,PP),K(A)?(nt(),at("button",{key:0,onClick:ge=>Te(A),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,SP)):tn("",!0)])]))),128))])])])])]),Pi(N1,{modelValue:m.value,"onUpdate:modelValue":z[6]||(z[6]=A=>m.value=A),dealers:u.value,clients:f.value,onCreated:H},null,8,["modelValue","dealers","clients"]),_.value?(nt(),at("div",EP,[M("div",AP,[M("div",MP,[z[29]||(z[29]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),M("button",{onClick:z[7]||(z[7]=A=>_.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},z[28]||(z[28]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("form",{onSubmit:Mc(B,["prevent"]),class:"space-y-4"},[M("div",null,[z[30]||(z[30]=M("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Pn(M("input",{type:"text",id:"edit-nom","onUpdate:modelValue":z[8]||(z[8]=A=>b.value.nom=A),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[ri,b.value.nom]])]),M("div",null,[z[31]||(z[31]=M("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Pn(M("textarea",{id:"edit-description","onUpdate:modelValue":z[9]||(z[9]=A=>b.value.description=A),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ri,b.value.description]])]),Dn(r).isAdmin?(nt(),at("div",BP,[M("div",null,[z[33]||(z[33]=M("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),Pn(M("select",{id:"edit-concessionnaire","onUpdate:modelValue":z[10]||(z[10]=A=>b.value.concessionnaire=A),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[32]||(z[32]=M("option",{value:null},"Aucun",-1)),(nt(!0),at(gn,null,Un(u.value,A=>(nt(),at("option",{key:A.id,value:A.id},kt(Dn(Kl)(A)),9,TP))),128))],512),[[hs,b.value.concessionnaire]])]),M("div",null,[z[35]||(z[35]=M("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),Pn(M("select",{id:"edit-client","onUpdate:modelValue":z[11]||(z[11]=A=>b.value.client=A),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[34]||(z[34]=M("option",{value:null},"Aucun",-1)),(nt(!0),at(gn,null,Un(Q.value,A=>(nt(),at("option",{key:A.id,value:A.id},kt(Dn(Kl)(A)),9,NP))),128))],512),[[hs,b.value.client]])])])):tn("",!0),x.value?(nt(),at("div",DP,[M("div",OP,[z[36]||(z[36]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",RP,[M("p",IP,kt(x.value),1)])])])):tn("",!0),M("div",FP,[M("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:z[12]||(z[12]=A=>_.value=!1)}," Annuler "),M("button",{type:"submit",disabled:E.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[E.value?(nt(),at("svg",zP,z[37]||(z[37]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),ki(" "+kt(E.value?"Enregistrement...":"Enregistrer"),1)],8,jP)])],32)])])):tn("",!0)])]))}}),qP={class:"h-full bg-gray-50"},$P={class:"container mx-auto px-4 py-8"},VP={class:"sm:flex sm:items-center"},HP={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},GP={class:"mt-8"},WP={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},ZP={class:"overflow-x-auto"},KP={class:"min-w-full divide-y divide-gray-300"},JP={class:"divide-y divide-gray-200 bg-white"},YP={key:0,class:"animate-pulse"},XP={key:1},QP={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},eS={class:"flex items-center"},tS={class:"h-10 w-10 flex-shrink-0"},nS={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},iS={class:"text-primary-600 font-medium"},rS={class:"ml-4"},sS={class:"font-medium text-gray-900"},oS={class:"text-gray-500"},aS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},lS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},uS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},cS={class:"flex items-center"},hS={class:"font-medium"},fS={class:"text-gray-400 ml-1"},dS={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},pS=["onClick"],mS=["onClick"],gS=ps({__name:"ClientListView",setup(e){Nc();const t=ds(),n=Ft([]),r=Ft(!0),o=Ft(!1),a=Ft(!1),u=Ft(null),f=Ft(null);ba(async()=>{await m()});async function m(){var D;try{const U=await Ln.get("/users/",{params:{dealer:(D=t.user)==null?void 0:D.id,role:"UTILISATEUR",include_plans:!0}});n.value=U.data}catch(U){console.error("Error fetching clients:",U)}finally{r.value=!1}}function _(D,U){return`${(D==null?void 0:D.charAt(0))||""}${(U==null?void 0:U.charAt(0))||""}`.toUpperCase()}function w(D){u.value=D,o.value=!0}function b(){o.value=!1,u.value=null}async function E(D){var U;try{const j=!!D.id,Q=j?`/users/${D.id}/`:"/users/",ie=j?"patch":"post";D.role="UTILISATEUR",D.concessionnaire=(U=t.user)==null?void 0:U.id,await Ln[ie](Q,D),await m(),b()}catch(j){throw console.error("Erreur lors de la sauvegarde du client:",j),j}}function x(D){f.value=D,a.value=!0}async function F(){if(f.value)try{await Ln.delete(`/users/${f.value.id}/`),await m(),a.value=!1,f.value=null}catch(D){throw console.error("Erreur lors de la suppression du client:",D),D}}return(D,U)=>{var j,Q;return nt(),at("div",qP,[M("div",$P,[M("div",VP,[U[3]||(U[3]=M("div",{class:"sm:flex-auto"},[M("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),M("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),M("div",HP,[M("button",{onClick:U[0]||(U[0]=ie=>o.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},U[2]||(U[2]=[M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ki(" Ajouter un client ")]))])]),M("div",GP,[M("div",WP,[M("div",ZP,[M("table",KP,[U[6]||(U[6]=M("thead",{class:"bg-gray-50"},[M("tr",null,[M("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),M("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[M("span",{class:"sr-only"},"Actions")])])],-1)),M("tbody",JP,[r.value?(nt(),at("tr",YP,U[4]||(U[4]=[M("td",{colspan:"5",class:"py-4 px-6"},[M("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(nt(),at("tr",XP,U[5]||(U[5]=[M("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):tn("",!0),(nt(!0),at(gn,null,Un(n.value,ie=>(nt(),at("tr",{key:ie.id,class:"hover:bg-gray-50"},[M("td",QP,[M("div",eS,[M("div",tS,[M("div",nS,[M("span",iS,kt(_(ie.first_name,ie.last_name)),1)])]),M("div",rS,[M("div",sS,kt(Dn(Kl)(ie)),1),M("div",oS,kt(ie.username),1)])])]),M("td",aS,kt(ie.email),1),M("td",lS,kt(ie.company_name||"-"),1),M("td",uS,[M("div",cS,[M("span",hS,kt(ie.plans_count||0),1),M("span",fS,"plan"+kt((ie.plans_count||0)>1?"s":""),1)])]),M("td",dS,[M("button",{onClick:ye=>w(ie),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,pS),M("button",{onClick:ye=>x(ie),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,mS)])]))),128))])])])])]),o.value?(nt(),ma(tv,{key:0,user:u.value||{},dealers:[{...Dn(t).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(Q=(j=Dn(t).user)==null?void 0:j.id)==null?void 0:Q.toString(),onClose:b,onSave:E},null,8,["user","dealers","current-dealer"])):tn("",!0),a.value?(nt(),ma(nv,{key:1,title:"Supprimer le client",message:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible.",onConfirm:F,onCancel:U[1]||(U[1]=ie=>a.value=!1)})):tn("",!0)])])}}}),iv=A5({history:o5("/"),routes:[{path:"/",name:"home",component:vm,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:UP,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:Ek,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:gS,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Jl(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:tw,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Jl(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Jl(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:R3,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:vm,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Jl(()=>import("./NotFoundView.js"),[])}]});iv.beforeEach(async(e,t,n)=>{var f,m;const r=ds();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(_){console.error("Error initializing auth store:",_)}const o=r.isAuthenticated,a=(f=r.user)==null?void 0:f.must_change_password,u=(m=r.user)==null?void 0:m.user_type;if(e.meta.requiresAuth&&!o){n("/login");return}if(o&&a&&e.name!=="changePassword"){n({name:"changePassword"});return}if(e.name==="changePassword"&&!a){n({name:"home"});return}if(e.meta.allowedRoles&&u&&!e.meta.allowedRoles.includes(u)){n({name:"home"});return}if(e.meta.requiresGuest&&o){n({name:"home"});return}n()});const ip=Vy(p3),rv=Wy();ip.use(rv);ip.use(iv);const vS=ds(rv);window.INITIAL_STATE&&vS.initialize(window.INITIAL_STATE);ip.mount("#app");export{oi as _,Wa as a,M as b,at as c,ps as d,tn as e,Pn as f,nt as g,Au as h,ki as i,Pi as j,Ha as k,b_ as l,IS as m,Ni as n,ba as o,Nc as p,go as q,Ft as r,w1 as s,kt as t,ds as u,ri as v,Mc as w};
