var w1=Object.defineProperty;var x1=(e,t,n)=>t in e?w1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Xt=(e,t,n)=>x1(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ed(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ai={},cu=[],ua=()=>{},L1=()=>!1,ah=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),td=e=>e.startsWith("onUpdate:"),Jr=Object.assign,nd=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},C1=Object.prototype.hasOwnProperty,ii=(e,t)=>C1.call(e,t),dn=Array.isArray,hu=e=>sc(e)==="[object Map]",wu=e=>sc(e)==="[object Set]",Rd=e=>sc(e)==="[object Date]",kn=e=>typeof e=="function",Yi=e=>typeof e=="string",ha=e=>typeof e=="symbol",di=e=>e!==null&&typeof e=="object",O0=e=>(di(e)||kn(e))&&kn(e.then)&&kn(e.catch),I0=Object.prototype.toString,sc=e=>I0.call(e),k1=e=>sc(e).slice(8,-1),R0=e=>sc(e)==="[object Object]",id=e=>Yi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,zu=ed(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lh=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},P1=/-(\w)/g,mo=lh(e=>e.replace(P1,(t,n)=>n?n.toUpperCase():"")),S1=/\B([A-Z])/g,Vl=lh(e=>e.replace(S1,"-$1").toLowerCase()),uh=lh(e=>e.charAt(0).toUpperCase()+e.slice(1)),qh=lh(e=>e?`on${uh(e)}`:""),cl=(e,t)=>!Object.is(e,t),Bc=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},F0=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Vc=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Fd;const ch=()=>Fd||(Fd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hh(e){if(dn(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=Yi(r)?B1(r):hh(r);if(o)for(const l in o)t[l]=o[l]}return t}else if(Yi(e)||di(e))return e}const E1=/;(?![^(]*\))/g,A1=/:([^]+)/,M1=/\/\*[^]*?\*\//g;function B1(e){const t={};return e.replace(M1,"").split(E1).forEach(n=>{if(n){const r=n.split(A1);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Kr(e){let t="";if(Yi(e))t=e;else if(dn(e))for(let n=0;n<e.length;n++){const r=Kr(e[n]);r&&(t+=r+" ")}else if(di(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const T1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",N1=ed(T1);function j0(e){return!!e||e===""}function D1(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=zl(e[r],t[r]);return n}function zl(e,t){if(e===t)return!0;let n=Rd(e),r=Rd(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=ha(e),r=ha(t),n||r)return e===t;if(n=dn(e),r=dn(t),n||r)return n&&r?D1(e,t):!1;if(n=di(e),r=di(t),n||r){if(!n||!r)return!1;const o=Object.keys(e).length,l=Object.keys(t).length;if(o!==l)return!1;for(const c in e){const p=e.hasOwnProperty(c),m=t.hasOwnProperty(c);if(p&&!m||!p&&m||!zl(e[c],t[c]))return!1}}return String(e)===String(t)}function rd(e,t){return e.findIndex(n=>zl(n,t))}const z0=e=>!!(e&&e.__v_isRef===!0),kt=e=>Yi(e)?e:e==null?"":dn(e)||di(e)&&(e.toString===I0||!kn(e.toString))?z0(e)?kt(e.value):JSON.stringify(e,U0,2):String(e),U0=(e,t)=>z0(t)?U0(e,t.value):hu(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,o],l)=>(n[$h(r,l)+" =>"]=o,n),{})}:wu(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>$h(n))}:ha(t)?$h(t):di(t)&&!dn(t)&&!R0(t)?String(t):t,$h=(e,t="")=>{var n;return ha(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let os;class q0{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=os,!t&&os&&(this.index=(os.scopes||(os.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=os;try{return os=this,t()}finally{os=n}}}on(){os=this}off(){os=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function $0(e){return new q0(e)}function V0(){return os}function O1(e,t=!1){os&&os.cleanups.push(e)}let fi;const Vh=new WeakSet;class G0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,os&&os.active&&os.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Vh.has(this)&&(Vh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||W0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jd(this),Z0(this);const t=fi,n=Io;fi=this,Io=!0;try{return this.fn()}finally{K0(this),fi=t,Io=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ad(t);this.deps=this.depsTail=void 0,jd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Vh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_f(this)&&this.run()}get dirty(){return _f(this)}}let H0=0,Uu,qu;function W0(e,t=!1){if(e.flags|=8,t){e.next=qu,qu=e;return}e.next=Uu,Uu=e}function sd(){H0++}function od(){if(--H0>0)return;if(qu){let t=qu;for(qu=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Uu;){let t=Uu;for(Uu=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Z0(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function K0(e){let t,n=e.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),ad(r),I1(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}e.deps=t,e.depsTail=n}function _f(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(J0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function J0(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ju))return;e.globalVersion=Ju;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!_f(e)){e.flags&=-3;return}const n=fi,r=Io;fi=e,Io=!0;try{Z0(e);const o=e.fn(e._value);(t.version===0||cl(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{fi=n,Io=r,K0(e),e.flags&=-3}}function ad(e,t=!1){const{dep:n,prevSub:r,nextSub:o}=e;if(r&&(r.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)ad(l,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function I1(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Io=!0;const Y0=[];function ml(){Y0.push(Io),Io=!1}function gl(){const e=Y0.pop();Io=e===void 0?!0:e}function jd(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=fi;fi=void 0;try{t()}finally{fi=n}}}let Ju=0;class R1{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ld{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!fi||!Io||fi===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==fi)n=this.activeLink=new R1(fi,this),fi.deps?(n.prevDep=fi.depsTail,fi.depsTail.nextDep=n,fi.depsTail=n):fi.deps=fi.depsTail=n,X0(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=fi.depsTail,n.nextDep=void 0,fi.depsTail.nextDep=n,fi.depsTail=n,fi.deps===n&&(fi.deps=r)}return n}trigger(t){this.version++,Ju++,this.notify(t)}notify(t){sd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{od()}}}function X0(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)X0(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Gc=new WeakMap,Il=Symbol(""),yf=Symbol(""),Yu=Symbol("");function Gr(e,t,n){if(Io&&fi){let r=Gc.get(e);r||Gc.set(e,r=new Map);let o=r.get(n);o||(r.set(n,o=new ld),o.map=r,o.key=n),o.track()}}function Na(e,t,n,r,o,l){const c=Gc.get(e);if(!c){Ju++;return}const p=m=>{m&&m.trigger()};if(sd(),t==="clear")c.forEach(p);else{const m=dn(e),y=m&&id(n);if(m&&n==="length"){const b=Number(r);c.forEach((w,E)=>{(E==="length"||E===Yu||!ha(E)&&E>=b)&&p(w)})}else switch((n!==void 0||c.has(void 0))&&p(c.get(n)),y&&p(c.get(Yu)),t){case"add":m?y&&p(c.get("length")):(p(c.get(Il)),hu(e)&&p(c.get(yf)));break;case"delete":m||(p(c.get(Il)),hu(e)&&p(c.get(yf)));break;case"set":hu(e)&&p(c.get(Il));break}}od()}function F1(e,t){const n=Gc.get(e);return n&&n.get(t)}function eu(e){const t=Kn(e);return t===e?t:(Gr(t,"iterate",Yu),ho(e)?t:t.map(Hr))}function fh(e){return Gr(e=Kn(e),"iterate",Yu),e}const j1={__proto__:null,[Symbol.iterator](){return Gh(this,Symbol.iterator,Hr)},concat(...e){return eu(this).concat(...e.map(t=>dn(t)?eu(t):t))},entries(){return Gh(this,"entries",e=>(e[1]=Hr(e[1]),e))},every(e,t){return Aa(this,"every",e,t,void 0,arguments)},filter(e,t){return Aa(this,"filter",e,t,n=>n.map(Hr),arguments)},find(e,t){return Aa(this,"find",e,t,Hr,arguments)},findIndex(e,t){return Aa(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Aa(this,"findLast",e,t,Hr,arguments)},findLastIndex(e,t){return Aa(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Aa(this,"forEach",e,t,void 0,arguments)},includes(...e){return Hh(this,"includes",e)},indexOf(...e){return Hh(this,"indexOf",e)},join(e){return eu(this).join(e)},lastIndexOf(...e){return Hh(this,"lastIndexOf",e)},map(e,t){return Aa(this,"map",e,t,void 0,arguments)},pop(){return Mu(this,"pop")},push(...e){return Mu(this,"push",e)},reduce(e,...t){return zd(this,"reduce",e,t)},reduceRight(e,...t){return zd(this,"reduceRight",e,t)},shift(){return Mu(this,"shift")},some(e,t){return Aa(this,"some",e,t,void 0,arguments)},splice(...e){return Mu(this,"splice",e)},toReversed(){return eu(this).toReversed()},toSorted(e){return eu(this).toSorted(e)},toSpliced(...e){return eu(this).toSpliced(...e)},unshift(...e){return Mu(this,"unshift",e)},values(){return Gh(this,"values",Hr)}};function Gh(e,t,n){const r=fh(e),o=r[t]();return r!==e&&!ho(e)&&(o._next=o.next,o.next=()=>{const l=o._next();return l.value&&(l.value=n(l.value)),l}),o}const z1=Array.prototype;function Aa(e,t,n,r,o,l){const c=fh(e),p=c!==e&&!ho(e),m=c[t];if(m!==z1[t]){const w=m.apply(e,l);return p?Hr(w):w}let y=n;c!==e&&(p?y=function(w,E){return n.call(this,Hr(w),E,e)}:n.length>2&&(y=function(w,E){return n.call(this,w,E,e)}));const b=m.call(c,y,r);return p&&o?o(b):b}function zd(e,t,n,r){const o=fh(e);let l=n;return o!==e&&(ho(e)?n.length>3&&(l=function(c,p,m){return n.call(this,c,p,m,e)}):l=function(c,p,m){return n.call(this,c,Hr(p),m,e)}),o[t](l,...r)}function Hh(e,t,n){const r=Kn(e);Gr(r,"iterate",Yu);const o=r[t](...n);return(o===-1||o===!1)&&hd(n[0])?(n[0]=Kn(n[0]),r[t](...n)):o}function Mu(e,t,n=[]){ml(),sd();const r=Kn(e)[t].apply(e,n);return od(),gl(),r}const U1=ed("__proto__,__v_isRef,__isVue"),Q0=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ha));function q1(e){ha(e)||(e=String(e));const t=Kn(this);return Gr(t,"has",e),t.hasOwnProperty(e)}class em{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return l;if(n==="__v_raw")return r===(o?l?X1:rm:l?im:nm).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const c=dn(t);if(!o){let m;if(c&&(m=j1[n]))return m;if(n==="hasOwnProperty")return q1}const p=Reflect.get(t,n,Ui(t)?t:r);return(ha(n)?Q0.has(n):U1(n))||(o||Gr(t,"get",n),l)?p:Ui(p)?c&&id(n)?p:p.value:di(p)?o?om(p):Fa(p):p}}class tm extends em{constructor(t=!1){super(!1,t)}set(t,n,r,o){let l=t[n];if(!this._isShallow){const m=Ul(l);if(!ho(r)&&!Ul(r)&&(l=Kn(l),r=Kn(r)),!dn(t)&&Ui(l)&&!Ui(r))return m?!1:(l.value=r,!0)}const c=dn(t)&&id(n)?Number(n)<t.length:ii(t,n),p=Reflect.set(t,n,r,Ui(t)?t:o);return t===Kn(o)&&(c?cl(r,l)&&Na(t,"set",n,r):Na(t,"add",n,r)),p}deleteProperty(t,n){const r=ii(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&r&&Na(t,"delete",n,void 0),o}has(t,n){const r=Reflect.has(t,n);return(!ha(n)||!Q0.has(n))&&Gr(t,"has",n),r}ownKeys(t){return Gr(t,"iterate",dn(t)?"length":Il),Reflect.ownKeys(t)}}class $1 extends em{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const V1=new tm,G1=new $1,H1=new tm(!0);const bf=e=>e,xc=e=>Reflect.getPrototypeOf(e);function W1(e,t,n){return function(...r){const o=this.__v_raw,l=Kn(o),c=hu(l),p=e==="entries"||e===Symbol.iterator&&c,m=e==="keys"&&c,y=o[e](...r),b=n?bf:t?wf:Hr;return!t&&Gr(l,"iterate",m?yf:Il),{next(){const{value:w,done:E}=y.next();return E?{value:w,done:E}:{value:p?[b(w[0]),b(w[1])]:b(w),done:E}},[Symbol.iterator](){return this}}}}function Lc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Z1(e,t){const n={get(o){const l=this.__v_raw,c=Kn(l),p=Kn(o);e||(cl(o,p)&&Gr(c,"get",o),Gr(c,"get",p));const{has:m}=xc(c),y=t?bf:e?wf:Hr;if(m.call(c,o))return y(l.get(o));if(m.call(c,p))return y(l.get(p));l!==c&&l.get(o)},get size(){const o=this.__v_raw;return!e&&Gr(Kn(o),"iterate",Il),Reflect.get(o,"size",o)},has(o){const l=this.__v_raw,c=Kn(l),p=Kn(o);return e||(cl(o,p)&&Gr(c,"has",o),Gr(c,"has",p)),o===p?l.has(o):l.has(o)||l.has(p)},forEach(o,l){const c=this,p=c.__v_raw,m=Kn(p),y=t?bf:e?wf:Hr;return!e&&Gr(m,"iterate",Il),p.forEach((b,w)=>o.call(l,y(b),y(w),c))}};return Jr(n,e?{add:Lc("add"),set:Lc("set"),delete:Lc("delete"),clear:Lc("clear")}:{add(o){!t&&!ho(o)&&!Ul(o)&&(o=Kn(o));const l=Kn(this);return xc(l).has.call(l,o)||(l.add(o),Na(l,"add",o,o)),this},set(o,l){!t&&!ho(l)&&!Ul(l)&&(l=Kn(l));const c=Kn(this),{has:p,get:m}=xc(c);let y=p.call(c,o);y||(o=Kn(o),y=p.call(c,o));const b=m.call(c,o);return c.set(o,l),y?cl(l,b)&&Na(c,"set",o,l):Na(c,"add",o,l),this},delete(o){const l=Kn(this),{has:c,get:p}=xc(l);let m=c.call(l,o);m||(o=Kn(o),m=c.call(l,o)),p&&p.call(l,o);const y=l.delete(o);return m&&Na(l,"delete",o,void 0),y},clear(){const o=Kn(this),l=o.size!==0,c=o.clear();return l&&Na(o,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=W1(o,e,t)}),n}function ud(e,t){const n=Z1(e,t);return(r,o,l)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(ii(n,o)&&o in r?n:r,o,l)}const K1={get:ud(!1,!1)},J1={get:ud(!1,!0)},Y1={get:ud(!0,!1)};const nm=new WeakMap,im=new WeakMap,rm=new WeakMap,X1=new WeakMap;function Q1(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ev(e){return e.__v_skip||!Object.isExtensible(e)?0:Q1(k1(e))}function Fa(e){return Ul(e)?e:cd(e,!1,V1,K1,nm)}function sm(e){return cd(e,!1,H1,J1,im)}function om(e){return cd(e,!0,G1,Y1,rm)}function cd(e,t,n,r,o){if(!di(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=o.get(e);if(l)return l;const c=ev(e);if(c===0)return e;const p=new Proxy(e,c===2?r:n);return o.set(e,p),p}function hl(e){return Ul(e)?hl(e.__v_raw):!!(e&&e.__v_isReactive)}function Ul(e){return!!(e&&e.__v_isReadonly)}function ho(e){return!!(e&&e.__v_isShallow)}function hd(e){return e?!!e.__v_raw:!1}function Kn(e){const t=e&&e.__v_raw;return t?Kn(t):e}function fd(e){return!ii(e,"__v_skip")&&Object.isExtensible(e)&&F0(e,"__v_skip",!0),e}const Hr=e=>di(e)?Fa(e):e,wf=e=>di(e)?om(e):e;function Ui(e){return e?e.__v_isRef===!0:!1}function It(e){return am(e,!1)}function tv(e){return am(e,!0)}function am(e,t){return Ui(e)?e:new nv(e,t)}class nv{constructor(t,n){this.dep=new ld,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Kn(t),this._value=n?t:Hr(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||ho(t)||Ul(t);t=r?t:Kn(t),cl(t,n)&&(this._rawValue=t,this._value=r?t:Hr(t),this.dep.trigger())}}function Cn(e){return Ui(e)?e.value:e}const iv={get:(e,t,n)=>t==="__v_raw"?e:Cn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return Ui(o)&&!Ui(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function lm(e){return hl(e)?e:new Proxy(e,iv)}function rv(e){const t=dn(e)?new Array(e.length):{};for(const n in e)t[n]=ov(e,n);return t}class sv{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return F1(Kn(this._object),this._key)}}function ov(e,t,n){const r=e[t];return Ui(r)?r:new sv(e,t,n)}class av{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ld(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ju-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&fi!==this)return W0(this,!0),!0}get value(){const t=this.dep.track();return J0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function lv(e,t,n=!1){let r,o;return kn(e)?r=e:(r=e.get,o=e.set),new av(r,o,n)}const Cc={},Hc=new WeakMap;let El;function uv(e,t=!1,n=El){if(n){let r=Hc.get(n);r||Hc.set(n,r=[]),r.push(e)}}function cv(e,t,n=ai){const{immediate:r,deep:o,once:l,scheduler:c,augmentJob:p,call:m}=n,y=Ce=>o?Ce:ho(Ce)||o===!1||o===0?Da(Ce,1):Da(Ce);let b,w,E,C,R=!1,O=!1;if(Ui(e)?(w=()=>e.value,R=ho(e)):hl(e)?(w=()=>y(e),R=!0):dn(e)?(O=!0,R=e.some(Ce=>hl(Ce)||ho(Ce)),w=()=>e.map(Ce=>{if(Ui(Ce))return Ce.value;if(hl(Ce))return y(Ce);if(kn(Ce))return m?m(Ce,2):Ce()})):kn(e)?t?w=m?()=>m(e,2):e:w=()=>{if(E){ml();try{E()}finally{gl()}}const Ce=El;El=b;try{return m?m(e,3,[C]):e(C)}finally{El=Ce}}:w=ua,t&&o){const Ce=w,Pe=o===!0?1/0:o;w=()=>Da(Ce(),Pe)}const q=V0(),F=()=>{b.stop(),q&&q.active&&nd(q.effects,b)};if(l&&t){const Ce=t;t=(...Pe)=>{Ce(...Pe),F()}}let G=O?new Array(e.length).fill(Cc):Cc;const X=Ce=>{if(!(!(b.flags&1)||!b.dirty&&!Ce))if(t){const Pe=b.run();if(o||R||(O?Pe.some((we,se)=>cl(we,G[se])):cl(Pe,G))){E&&E();const we=El;El=b;try{const se=[Pe,G===Cc?void 0:O&&G[0]===Cc?[]:G,C];m?m(t,3,se):t(...se),G=Pe}finally{El=we}}}else b.run()};return p&&p(X),b=new G0(w),b.scheduler=c?()=>c(X,!1):X,C=Ce=>uv(Ce,!1,b),E=b.onStop=()=>{const Ce=Hc.get(b);if(Ce){if(m)m(Ce,4);else for(const Pe of Ce)Pe();Hc.delete(b)}},t?r?X(!0):G=b.run():c?c(X.bind(null,!0),!0):b.run(),F.pause=b.pause.bind(b),F.resume=b.resume.bind(b),F.stop=F,F}function Da(e,t=1/0,n){if(t<=0||!di(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ui(e))Da(e.value,t,n);else if(dn(e))for(let r=0;r<e.length;r++)Da(e[r],t,n);else if(wu(e)||hu(e))e.forEach(r=>{Da(r,t,n)});else if(R0(e)){for(const r in e)Da(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Da(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function oc(e,t,n,r){try{return r?e(...r):e()}catch(o){dh(o,t,n)}}function fa(e,t,n,r){if(kn(e)){const o=oc(e,t,n,r);return o&&O0(o)&&o.catch(l=>{dh(l,t,n)}),o}if(dn(e)){const o=[];for(let l=0;l<e.length;l++)o.push(fa(e[l],t,n,r));return o}}function dh(e,t,n,r=!0){const o=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:c}=t&&t.appContext.config||ai;if(t){let p=t.parent;const m=t.proxy,y=`https://vuejs.org/error-reference/#runtime-${n}`;for(;p;){const b=p.ec;if(b){for(let w=0;w<b.length;w++)if(b[w](e,m,y)===!1)return}p=p.parent}if(l){ml(),oc(l,null,10,[e,m,y]),gl();return}}hv(e,n,o,r,c)}function hv(e,t,n,r=!0,o=!1){if(o)throw e;console.error(e)}const as=[];let oa=-1;const fu=[];let ol=null,ru=0;const um=Promise.resolve();let Wc=null;function ac(e){const t=Wc||um;return e?t.then(this?e.bind(this):e):t}function fv(e){let t=oa+1,n=as.length;for(;t<n;){const r=t+n>>>1,o=as[r],l=Xu(o);l<e||l===e&&o.flags&2?t=r+1:n=r}return t}function dd(e){if(!(e.flags&1)){const t=Xu(e),n=as[as.length-1];!n||!(e.flags&2)&&t>=Xu(n)?as.push(e):as.splice(fv(t),0,e),e.flags|=1,cm()}}function cm(){Wc||(Wc=um.then(fm))}function dv(e){dn(e)?fu.push(...e):ol&&e.id===-1?ol.splice(ru+1,0,e):e.flags&1||(fu.push(e),e.flags|=1),cm()}function Ud(e,t,n=oa+1){for(;n<as.length;n++){const r=as[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;as.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function hm(e){if(fu.length){const t=[...new Set(fu)].sort((n,r)=>Xu(n)-Xu(r));if(fu.length=0,ol){ol.push(...t);return}for(ol=t,ru=0;ru<ol.length;ru++){const n=ol[ru];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ol=null,ru=0}}const Xu=e=>e.id==null?e.flags&2?-1:1/0:e.id;function fm(e){try{for(oa=0;oa<as.length;oa++){const t=as[oa];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),oc(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;oa<as.length;oa++){const t=as[oa];t&&(t.flags&=-2)}oa=-1,as.length=0,hm(),Wc=null,(as.length||fu.length)&&fm()}}let Ps=null,dm=null;function Zc(e){const t=Ps;return Ps=e,dm=e&&e.type.__scopeId||null,t}function Bl(e,t=Ps,n){if(!t||e._n)return e;const r=(...o)=>{r._d&&Yd(-1);const l=Zc(t);let c;try{c=e(...o)}finally{Zc(l),r._d&&Yd(1)}return c};return r._n=!0,r._c=!0,r._d=!0,r}function Fn(e,t){if(Ps===null)return e;const n=_h(Ps),r=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[l,c,p,m=ai]=t[o];l&&(kn(l)&&(l={mounted:l,updated:l}),l.deep&&Da(c),r.push({dir:l,instance:n,value:c,oldValue:void 0,arg:p,modifiers:m}))}return e}function Pl(e,t,n,r){const o=e.dirs,l=t&&t.dirs;for(let c=0;c<o.length;c++){const p=o[c];l&&(p.oldValue=l[c].value);let m=p.dir[r];m&&(ml(),fa(m,n,8,[e.el,p,e,t]),gl())}}const pv=Symbol("_vte"),mv=e=>e.__isTeleport;function pd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,pd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Es(e,t){return kn(e)?Jr({name:e.name},t,{setup:e}):e}function pm(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Kc(e,t,n,r,o=!1){if(dn(e)){e.forEach((R,O)=>Kc(R,t&&(dn(t)?t[O]:t),n,r,o));return}if($u(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Kc(e,t,n,r.component.subTree);return}const l=r.shapeFlag&4?_h(r.component):r.el,c=o?null:l,{i:p,r:m}=e,y=t&&t.r,b=p.refs===ai?p.refs={}:p.refs,w=p.setupState,E=Kn(w),C=w===ai?()=>!1:R=>ii(E,R);if(y!=null&&y!==m&&(Yi(y)?(b[y]=null,C(y)&&(w[y]=null)):Ui(y)&&(y.value=null)),kn(m))oc(m,p,12,[c,b]);else{const R=Yi(m),O=Ui(m);if(R||O){const q=()=>{if(e.f){const F=R?C(m)?w[m]:b[m]:m.value;o?dn(F)&&nd(F,l):dn(F)?F.includes(l)||F.push(l):R?(b[m]=[l],C(m)&&(w[m]=b[m])):(m.value=[l],e.k&&(b[e.k]=m.value))}else R?(b[m]=c,C(m)&&(w[m]=c)):O&&(m.value=c,e.k&&(b[e.k]=c))};c?(q.id=-1,qs(q,n)):q()}}}ch().requestIdleCallback;ch().cancelIdleCallback;const $u=e=>!!e.type.__asyncLoader,mm=e=>e.type.__isKeepAlive;function gv(e,t){gm(e,"a",t)}function vv(e,t){gm(e,"da",t)}function gm(e,t,n=kr){const r=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(ph(t,r,n),n){let o=n.parent;for(;o&&o.parent;)mm(o.parent.vnode)&&_v(r,t,n,o),o=o.parent}}function _v(e,t,n,r){const o=ph(t,e,r,!0);mh(()=>{nd(r[t],o)},n)}function ph(e,t,n=kr,r=!1){if(n){const o=n[e]||(n[e]=[]),l=t.__weh||(t.__weh=(...c)=>{ml();const p=lc(n),m=fa(t,n,e,c);return p(),gl(),m});return r?o.unshift(l):o.push(l),l}}const ja=e=>(t,n=kr)=>{(!ec||e==="sp")&&ph(e,(...r)=>t(...r),n)},yv=ja("bm"),Ra=ja("m"),bv=ja("bu"),wv=ja("u"),md=ja("bum"),mh=ja("um"),xv=ja("sp"),Lv=ja("rtg"),Cv=ja("rtc");function kv(e,t=kr){ph("ec",e,t)}const Pv="components";function Sv(e,t){return Av(Pv,e,!0,t)||e}const Ev=Symbol.for("v-ndc");function Av(e,t,n=!0,r=!1){const o=Ps||kr;if(o){const l=o.type;{const p=g_(l,!1);if(p&&(p===t||p===mo(t)||p===uh(mo(t))))return l}const c=qd(o[e]||l[e],t)||qd(o.appContext[e],t);return!c&&r?l:c}}function qd(e,t){return e&&(e[t]||e[mo(t)]||e[uh(mo(t))])}function Hn(e,t,n,r){let o;const l=n,c=dn(e);if(c||Yi(e)){const p=c&&hl(e);let m=!1;p&&(m=!ho(e),e=fh(e)),o=new Array(e.length);for(let y=0,b=e.length;y<b;y++)o[y]=t(m?Hr(e[y]):e[y],y,void 0,l)}else if(typeof e=="number"){o=new Array(e);for(let p=0;p<e;p++)o[p]=t(p+1,p,void 0,l)}else if(di(e))if(e[Symbol.iterator])o=Array.from(e,(p,m)=>t(p,m,void 0,l));else{const p=Object.keys(e);o=new Array(p.length);for(let m=0,y=p.length;m<y;m++){const b=p[m];o[m]=t(e[b],b,m,l)}}else o=[];return o}const xf=e=>e?Rm(e)?_h(e):xf(e.parent):null,Vu=Jr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>xf(e.parent),$root:e=>xf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>_m(e),$forceUpdate:e=>e.f||(e.f=()=>{dd(e.update)}),$nextTick:e=>e.n||(e.n=ac.bind(e.proxy)),$watch:e=>Yv.bind(e)}),Wh=(e,t)=>e!==ai&&!e.__isScriptSetup&&ii(e,t),Mv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:l,accessCache:c,type:p,appContext:m}=e;let y;if(t[0]!=="$"){const C=c[t];if(C!==void 0)switch(C){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return l[t]}else{if(Wh(r,t))return c[t]=1,r[t];if(o!==ai&&ii(o,t))return c[t]=2,o[t];if((y=e.propsOptions[0])&&ii(y,t))return c[t]=3,l[t];if(n!==ai&&ii(n,t))return c[t]=4,n[t];Lf&&(c[t]=0)}}const b=Vu[t];let w,E;if(b)return t==="$attrs"&&Gr(e.attrs,"get",""),b(e);if((w=p.__cssModules)&&(w=w[t]))return w;if(n!==ai&&ii(n,t))return c[t]=4,n[t];if(E=m.config.globalProperties,ii(E,t))return E[t]},set({_:e},t,n){const{data:r,setupState:o,ctx:l}=e;return Wh(o,t)?(o[t]=n,!0):r!==ai&&ii(r,t)?(r[t]=n,!0):ii(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:l}},c){let p;return!!n[c]||e!==ai&&ii(e,c)||Wh(t,c)||(p=l[0])&&ii(p,c)||ii(r,c)||ii(Vu,c)||ii(o.config.globalProperties,c)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ii(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function $d(e){return dn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Lf=!0;function Bv(e){const t=_m(e),n=e.proxy,r=e.ctx;Lf=!1,t.beforeCreate&&Vd(t.beforeCreate,e,"bc");const{data:o,computed:l,methods:c,watch:p,provide:m,inject:y,created:b,beforeMount:w,mounted:E,beforeUpdate:C,updated:R,activated:O,deactivated:q,beforeDestroy:F,beforeUnmount:G,destroyed:X,unmounted:Ce,render:Pe,renderTracked:we,renderTriggered:se,errorCaptured:ue,serverPrefetch:Be,expose:Je,inheritAttrs:$,components:J,directives:I,filters:te}=t;if(y&&Tv(y,r,null),c)for(const ve in c){const V=c[ve];kn(V)&&(r[ve]=V.bind(n))}if(o){const ve=o.call(n,n);di(ve)&&(e.data=Fa(ve))}if(Lf=!0,l)for(const ve in l){const V=l[ve],j=kn(V)?V.bind(n,n):kn(V.get)?V.get.bind(n,n):ua,Y=!kn(V)&&kn(V.set)?V.set.bind(n):ua,Ie=Tn({get:j,set:Y});Object.defineProperty(r,ve,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:D=>Ie.value=D})}if(p)for(const ve in p)vm(p[ve],r,n,ve);if(m){const ve=kn(m)?m.call(n):m;Reflect.ownKeys(ve).forEach(V=>{Tc(V,ve[V])})}b&&Vd(b,e,"c");function ee(ve,V){dn(V)?V.forEach(j=>ve(j.bind(n))):V&&ve(V.bind(n))}if(ee(yv,w),ee(Ra,E),ee(bv,C),ee(wv,R),ee(gv,O),ee(vv,q),ee(kv,ue),ee(Cv,we),ee(Lv,se),ee(md,G),ee(mh,Ce),ee(xv,Be),dn(Je))if(Je.length){const ve=e.exposed||(e.exposed={});Je.forEach(V=>{Object.defineProperty(ve,V,{get:()=>n[V],set:j=>n[V]=j})})}else e.exposed||(e.exposed={});Pe&&e.render===ua&&(e.render=Pe),$!=null&&(e.inheritAttrs=$),J&&(e.components=J),I&&(e.directives=I),Be&&pm(e)}function Tv(e,t,n=ua){dn(e)&&(e=Cf(e));for(const r in e){const o=e[r];let l;di(o)?"default"in o?l=fo(o.from||r,o.default,!0):l=fo(o.from||r):l=fo(o),Ui(l)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):t[r]=l}}function Vd(e,t,n){fa(dn(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function vm(e,t,n,r){let o=r.includes(".")?Tm(n,r):()=>n[r];if(Yi(e)){const l=t[e];kn(l)&&ls(o,l)}else if(kn(e))ls(o,e.bind(n));else if(di(e))if(dn(e))e.forEach(l=>vm(l,t,n,r));else{const l=kn(e.handler)?e.handler.bind(n):t[e.handler];kn(l)&&ls(o,l,e)}}function _m(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:l,config:{optionMergeStrategies:c}}=e.appContext,p=l.get(t);let m;return p?m=p:!o.length&&!n&&!r?m=t:(m={},o.length&&o.forEach(y=>Jc(m,y,c,!0)),Jc(m,t,c)),di(t)&&l.set(t,m),m}function Jc(e,t,n,r=!1){const{mixins:o,extends:l}=t;l&&Jc(e,l,n,!0),o&&o.forEach(c=>Jc(e,c,n,!0));for(const c in t)if(!(r&&c==="expose")){const p=Nv[c]||n&&n[c];e[c]=p?p(e[c],t[c]):t[c]}return e}const Nv={data:Gd,props:Hd,emits:Hd,methods:Fu,computed:Fu,beforeCreate:ss,created:ss,beforeMount:ss,mounted:ss,beforeUpdate:ss,updated:ss,beforeDestroy:ss,beforeUnmount:ss,destroyed:ss,unmounted:ss,activated:ss,deactivated:ss,errorCaptured:ss,serverPrefetch:ss,components:Fu,directives:Fu,watch:Ov,provide:Gd,inject:Dv};function Gd(e,t){return t?e?function(){return Jr(kn(e)?e.call(this,this):e,kn(t)?t.call(this,this):t)}:t:e}function Dv(e,t){return Fu(Cf(e),Cf(t))}function Cf(e){if(dn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ss(e,t){return e?[...new Set([].concat(e,t))]:t}function Fu(e,t){return e?Jr(Object.create(null),e,t):t}function Hd(e,t){return e?dn(e)&&dn(t)?[...new Set([...e,...t])]:Jr(Object.create(null),$d(e),$d(t??{})):t}function Ov(e,t){if(!e)return t;if(!t)return e;const n=Jr(Object.create(null),e);for(const r in t)n[r]=ss(e[r],t[r]);return n}function ym(){return{app:null,config:{isNativeTag:L1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Iv=0;function Rv(e,t){return function(r,o=null){kn(r)||(r=Jr({},r)),o!=null&&!di(o)&&(o=null);const l=ym(),c=new WeakSet,p=[];let m=!1;const y=l.app={_uid:Iv++,_component:r,_props:o,_container:null,_context:l,_instance:null,version:__,get config(){return l.config},set config(b){},use(b,...w){return c.has(b)||(b&&kn(b.install)?(c.add(b),b.install(y,...w)):kn(b)&&(c.add(b),b(y,...w))),y},mixin(b){return l.mixins.includes(b)||l.mixins.push(b),y},component(b,w){return w?(l.components[b]=w,y):l.components[b]},directive(b,w){return w?(l.directives[b]=w,y):l.directives[b]},mount(b,w,E){if(!m){const C=y._ceVNode||Ni(r,o);return C.appContext=l,E===!0?E="svg":E===!1&&(E=void 0),e(C,b,E),m=!0,y._container=b,b.__vue_app__=y,_h(C.component)}},onUnmount(b){p.push(b)},unmount(){m&&(fa(p,y._instance,16),e(null,y._container),delete y._container.__vue_app__)},provide(b,w){return l.provides[b]=w,y},runWithContext(b){const w=Rl;Rl=y;try{return b()}finally{Rl=w}}};return y}}let Rl=null;function Tc(e,t){if(kr){let n=kr.provides;const r=kr.parent&&kr.parent.provides;r===n&&(n=kr.provides=Object.create(r)),n[e]=t}}function fo(e,t,n=!1){const r=kr||Ps;if(r||Rl){const o=Rl?Rl._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&kn(t)?t.call(r&&r.proxy):t}}function Fv(){return!!(kr||Ps||Rl)}const bm={},wm=()=>Object.create(bm),xm=e=>Object.getPrototypeOf(e)===bm;function jv(e,t,n,r=!1){const o={},l=wm();e.propsDefaults=Object.create(null),Lm(e,t,o,l);for(const c in e.propsOptions[0])c in o||(o[c]=void 0);n?e.props=r?o:sm(o):e.type.props?e.props=o:e.props=l,e.attrs=l}function zv(e,t,n,r){const{props:o,attrs:l,vnode:{patchFlag:c}}=e,p=Kn(o),[m]=e.propsOptions;let y=!1;if((r||c>0)&&!(c&16)){if(c&8){const b=e.vnode.dynamicProps;for(let w=0;w<b.length;w++){let E=b[w];if(gh(e.emitsOptions,E))continue;const C=t[E];if(m)if(ii(l,E))C!==l[E]&&(l[E]=C,y=!0);else{const R=mo(E);o[R]=kf(m,p,R,C,e,!1)}else C!==l[E]&&(l[E]=C,y=!0)}}}else{Lm(e,t,o,l)&&(y=!0);let b;for(const w in p)(!t||!ii(t,w)&&((b=Vl(w))===w||!ii(t,b)))&&(m?n&&(n[w]!==void 0||n[b]!==void 0)&&(o[w]=kf(m,p,w,void 0,e,!0)):delete o[w]);if(l!==p)for(const w in l)(!t||!ii(t,w))&&(delete l[w],y=!0)}y&&Na(e.attrs,"set","")}function Lm(e,t,n,r){const[o,l]=e.propsOptions;let c=!1,p;if(t)for(let m in t){if(zu(m))continue;const y=t[m];let b;o&&ii(o,b=mo(m))?!l||!l.includes(b)?n[b]=y:(p||(p={}))[b]=y:gh(e.emitsOptions,m)||(!(m in r)||y!==r[m])&&(r[m]=y,c=!0)}if(l){const m=Kn(n),y=p||ai;for(let b=0;b<l.length;b++){const w=l[b];n[w]=kf(o,m,w,y[w],e,!ii(y,w))}}return c}function kf(e,t,n,r,o,l){const c=e[n];if(c!=null){const p=ii(c,"default");if(p&&r===void 0){const m=c.default;if(c.type!==Function&&!c.skipFactory&&kn(m)){const{propsDefaults:y}=o;if(n in y)r=y[n];else{const b=lc(o);r=y[n]=m.call(null,t),b()}}else r=m;o.ce&&o.ce._setProp(n,r)}c[0]&&(l&&!p?r=!1:c[1]&&(r===""||r===Vl(n))&&(r=!0))}return r}const Uv=new WeakMap;function Cm(e,t,n=!1){const r=n?Uv:t.propsCache,o=r.get(e);if(o)return o;const l=e.props,c={},p=[];let m=!1;if(!kn(e)){const b=w=>{m=!0;const[E,C]=Cm(w,t,!0);Jr(c,E),C&&p.push(...C)};!n&&t.mixins.length&&t.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}if(!l&&!m)return di(e)&&r.set(e,cu),cu;if(dn(l))for(let b=0;b<l.length;b++){const w=mo(l[b]);Wd(w)&&(c[w]=ai)}else if(l)for(const b in l){const w=mo(b);if(Wd(w)){const E=l[b],C=c[w]=dn(E)||kn(E)?{type:E}:Jr({},E),R=C.type;let O=!1,q=!0;if(dn(R))for(let F=0;F<R.length;++F){const G=R[F],X=kn(G)&&G.name;if(X==="Boolean"){O=!0;break}else X==="String"&&(q=!1)}else O=kn(R)&&R.name==="Boolean";C[0]=O,C[1]=q,(O||ii(C,"default"))&&p.push(w)}}const y=[c,p];return di(e)&&r.set(e,y),y}function Wd(e){return e[0]!=="$"&&!zu(e)}const km=e=>e[0]==="_"||e==="$stable",gd=e=>dn(e)?e.map(aa):[aa(e)],qv=(e,t,n)=>{if(t._n)return t;const r=Bl((...o)=>gd(t(...o)),n);return r._c=!1,r},Pm=(e,t,n)=>{const r=e._ctx;for(const o in e){if(km(o))continue;const l=e[o];if(kn(l))t[o]=qv(o,l,r);else if(l!=null){const c=gd(l);t[o]=()=>c}}},Sm=(e,t)=>{const n=gd(t);e.slots.default=()=>n},Em=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},$v=(e,t,n)=>{const r=e.slots=wm();if(e.vnode.shapeFlag&32){const o=t._;o?(Em(r,t,n),n&&F0(r,"_",o,!0)):Pm(t,r)}else t&&Sm(e,t)},Vv=(e,t,n)=>{const{vnode:r,slots:o}=e;let l=!0,c=ai;if(r.shapeFlag&32){const p=t._;p?n&&p===1?l=!1:Em(o,t,n):(l=!t.$stable,Pm(t,o)),c=t}else t&&(Sm(e,t),c={default:1});if(l)for(const p in o)!km(p)&&c[p]==null&&delete o[p]},qs=r_;function Gv(e){return Hv(e)}function Hv(e,t){const n=ch();n.__VUE__=!0;const{insert:r,remove:o,patchProp:l,createElement:c,createText:p,createComment:m,setText:y,setElementText:b,parentNode:w,nextSibling:E,setScopeId:C=ua,insertStaticContent:R}=e,O=(ne,ce,Re,De=null,le=null,Ve=null,st=void 0,Qe=null,ot=!!ce.dynamicChildren)=>{if(ne===ce)return;ne&&!Bu(ne,ce)&&(De=de(ne),D(ne,le,Ve,!0),ne=null),ce.patchFlag===-2&&(ot=!1,ce.dynamicChildren=null);const{type:Oe,ref:xe,shapeFlag:it}=ce;switch(Oe){case vh:q(ne,ce,Re,De);break;case ql:F(ne,ce,Re,De);break;case Nc:ne==null&&G(ce,Re,De,st);break;case En:J(ne,ce,Re,De,le,Ve,st,Qe,ot);break;default:it&1?Pe(ne,ce,Re,De,le,Ve,st,Qe,ot):it&6?I(ne,ce,Re,De,le,Ve,st,Qe,ot):(it&64||it&128)&&Oe.process(ne,ce,Re,De,le,Ve,st,Qe,ot,Ke)}xe!=null&&le&&Kc(xe,ne&&ne.ref,Ve,ce||ne,!ce)},q=(ne,ce,Re,De)=>{if(ne==null)r(ce.el=p(ce.children),Re,De);else{const le=ce.el=ne.el;ce.children!==ne.children&&y(le,ce.children)}},F=(ne,ce,Re,De)=>{ne==null?r(ce.el=m(ce.children||""),Re,De):ce.el=ne.el},G=(ne,ce,Re,De)=>{[ne.el,ne.anchor]=R(ne.children,ce,Re,De,ne.el,ne.anchor)},X=({el:ne,anchor:ce},Re,De)=>{let le;for(;ne&&ne!==ce;)le=E(ne),r(ne,Re,De),ne=le;r(ce,Re,De)},Ce=({el:ne,anchor:ce})=>{let Re;for(;ne&&ne!==ce;)Re=E(ne),o(ne),ne=Re;o(ce)},Pe=(ne,ce,Re,De,le,Ve,st,Qe,ot)=>{ce.type==="svg"?st="svg":ce.type==="math"&&(st="mathml"),ne==null?we(ce,Re,De,le,Ve,st,Qe,ot):Be(ne,ce,le,Ve,st,Qe,ot)},we=(ne,ce,Re,De,le,Ve,st,Qe)=>{let ot,Oe;const{props:xe,shapeFlag:it,transition:vt,dirs:Lt}=ne;if(ot=ne.el=c(ne.type,Ve,xe&&xe.is,xe),it&8?b(ot,ne.children):it&16&&ue(ne.children,ot,null,De,le,Zh(ne,Ve),st,Qe),Lt&&Pl(ne,null,De,"created"),se(ot,ne,ne.scopeId,st,De),xe){for(const Dt in xe)Dt!=="value"&&!zu(Dt)&&l(ot,Dt,null,xe[Dt],Ve,De);"value"in xe&&l(ot,"value",null,xe.value,Ve),(Oe=xe.onVnodeBeforeMount)&&ia(Oe,De,ne)}Lt&&Pl(ne,null,De,"beforeMount");const ze=Wv(le,vt);ze&&vt.beforeEnter(ot),r(ot,ce,Re),((Oe=xe&&xe.onVnodeMounted)||ze||Lt)&&qs(()=>{Oe&&ia(Oe,De,ne),ze&&vt.enter(ot),Lt&&Pl(ne,null,De,"mounted")},le)},se=(ne,ce,Re,De,le)=>{if(Re&&C(ne,Re),De)for(let Ve=0;Ve<De.length;Ve++)C(ne,De[Ve]);if(le){let Ve=le.subTree;if(ce===Ve||Dm(Ve.type)&&(Ve.ssContent===ce||Ve.ssFallback===ce)){const st=le.vnode;se(ne,st,st.scopeId,st.slotScopeIds,le.parent)}}},ue=(ne,ce,Re,De,le,Ve,st,Qe,ot=0)=>{for(let Oe=ot;Oe<ne.length;Oe++){const xe=ne[Oe]=Qe?al(ne[Oe]):aa(ne[Oe]);O(null,xe,ce,Re,De,le,Ve,st,Qe)}},Be=(ne,ce,Re,De,le,Ve,st)=>{const Qe=ce.el=ne.el;let{patchFlag:ot,dynamicChildren:Oe,dirs:xe}=ce;ot|=ne.patchFlag&16;const it=ne.props||ai,vt=ce.props||ai;let Lt;if(Re&&Sl(Re,!1),(Lt=vt.onVnodeBeforeUpdate)&&ia(Lt,Re,ce,ne),xe&&Pl(ce,ne,Re,"beforeUpdate"),Re&&Sl(Re,!0),(it.innerHTML&&vt.innerHTML==null||it.textContent&&vt.textContent==null)&&b(Qe,""),Oe?Je(ne.dynamicChildren,Oe,Qe,Re,De,Zh(ce,le),Ve):st||V(ne,ce,Qe,null,Re,De,Zh(ce,le),Ve,!1),ot>0){if(ot&16)$(Qe,it,vt,Re,le);else if(ot&2&&it.class!==vt.class&&l(Qe,"class",null,vt.class,le),ot&4&&l(Qe,"style",it.style,vt.style,le),ot&8){const ze=ce.dynamicProps;for(let Dt=0;Dt<ze.length;Dt++){const Tt=ze[Dt],jt=it[Tt],Vt=vt[Tt];(Vt!==jt||Tt==="value")&&l(Qe,Tt,jt,Vt,le,Re)}}ot&1&&ne.children!==ce.children&&b(Qe,ce.children)}else!st&&Oe==null&&$(Qe,it,vt,Re,le);((Lt=vt.onVnodeUpdated)||xe)&&qs(()=>{Lt&&ia(Lt,Re,ce,ne),xe&&Pl(ce,ne,Re,"updated")},De)},Je=(ne,ce,Re,De,le,Ve,st)=>{for(let Qe=0;Qe<ce.length;Qe++){const ot=ne[Qe],Oe=ce[Qe],xe=ot.el&&(ot.type===En||!Bu(ot,Oe)||ot.shapeFlag&70)?w(ot.el):Re;O(ot,Oe,xe,null,De,le,Ve,st,!0)}},$=(ne,ce,Re,De,le)=>{if(ce!==Re){if(ce!==ai)for(const Ve in ce)!zu(Ve)&&!(Ve in Re)&&l(ne,Ve,ce[Ve],null,le,De);for(const Ve in Re){if(zu(Ve))continue;const st=Re[Ve],Qe=ce[Ve];st!==Qe&&Ve!=="value"&&l(ne,Ve,Qe,st,le,De)}"value"in Re&&l(ne,"value",ce.value,Re.value,le)}},J=(ne,ce,Re,De,le,Ve,st,Qe,ot)=>{const Oe=ce.el=ne?ne.el:p(""),xe=ce.anchor=ne?ne.anchor:p("");let{patchFlag:it,dynamicChildren:vt,slotScopeIds:Lt}=ce;Lt&&(Qe=Qe?Qe.concat(Lt):Lt),ne==null?(r(Oe,Re,De),r(xe,Re,De),ue(ce.children||[],Re,xe,le,Ve,st,Qe,ot)):it>0&&it&64&&vt&&ne.dynamicChildren?(Je(ne.dynamicChildren,vt,Re,le,Ve,st,Qe),(ce.key!=null||le&&ce===le.subTree)&&Am(ne,ce,!0)):V(ne,ce,Re,xe,le,Ve,st,Qe,ot)},I=(ne,ce,Re,De,le,Ve,st,Qe,ot)=>{ce.slotScopeIds=Qe,ne==null?ce.shapeFlag&512?le.ctx.activate(ce,Re,De,st,ot):te(ce,Re,De,le,Ve,st,ot):Z(ne,ce,ot)},te=(ne,ce,Re,De,le,Ve,st)=>{const Qe=ne.component=h_(ne,De,le);if(mm(ne)&&(Qe.ctx.renderer=Ke),f_(Qe,!1,st),Qe.asyncDep){if(le&&le.registerDep(Qe,ee,st),!ne.el){const ot=Qe.subTree=Ni(ql);F(null,ot,ce,Re)}}else ee(Qe,ne,ce,Re,le,Ve,st)},Z=(ne,ce,Re)=>{const De=ce.component=ne.component;if(n_(ne,ce,Re))if(De.asyncDep&&!De.asyncResolved){ve(De,ce,Re);return}else De.next=ce,De.update();else ce.el=ne.el,De.vnode=ce},ee=(ne,ce,Re,De,le,Ve,st)=>{const Qe=()=>{if(ne.isMounted){let{next:it,bu:vt,u:Lt,parent:ze,vnode:Dt}=ne;{const Pn=Mm(ne);if(Pn){it&&(it.el=Dt.el,ve(ne,it,st)),Pn.asyncDep.then(()=>{ne.isUnmounted||Qe()});return}}let Tt=it,jt;Sl(ne,!1),it?(it.el=Dt.el,ve(ne,it,st)):it=Dt,vt&&Bc(vt),(jt=it.props&&it.props.onVnodeBeforeUpdate)&&ia(jt,ze,it,Dt),Sl(ne,!0);const Vt=Kd(ne),Nt=ne.subTree;ne.subTree=Vt,O(Nt,Vt,w(Nt.el),de(Nt),ne,le,Ve),it.el=Vt.el,Tt===null&&i_(ne,Vt.el),Lt&&qs(Lt,le),(jt=it.props&&it.props.onVnodeUpdated)&&qs(()=>ia(jt,ze,it,Dt),le)}else{let it;const{el:vt,props:Lt}=ce,{bm:ze,m:Dt,parent:Tt,root:jt,type:Vt}=ne,Nt=$u(ce);Sl(ne,!1),ze&&Bc(ze),!Nt&&(it=Lt&&Lt.onVnodeBeforeMount)&&ia(it,Tt,ce),Sl(ne,!0);{jt.ce&&jt.ce._injectChildStyle(Vt);const Pn=ne.subTree=Kd(ne);O(null,Pn,Re,De,ne,le,Ve),ce.el=Pn.el}if(Dt&&qs(Dt,le),!Nt&&(it=Lt&&Lt.onVnodeMounted)){const Pn=ce;qs(()=>ia(it,Tt,Pn),le)}(ce.shapeFlag&256||Tt&&$u(Tt.vnode)&&Tt.vnode.shapeFlag&256)&&ne.a&&qs(ne.a,le),ne.isMounted=!0,ce=Re=De=null}};ne.scope.on();const ot=ne.effect=new G0(Qe);ne.scope.off();const Oe=ne.update=ot.run.bind(ot),xe=ne.job=ot.runIfDirty.bind(ot);xe.i=ne,xe.id=ne.uid,ot.scheduler=()=>dd(xe),Sl(ne,!0),Oe()},ve=(ne,ce,Re)=>{ce.component=ne;const De=ne.vnode.props;ne.vnode=ce,ne.next=null,zv(ne,ce.props,De,Re),Vv(ne,ce.children,Re),ml(),Ud(ne),gl()},V=(ne,ce,Re,De,le,Ve,st,Qe,ot=!1)=>{const Oe=ne&&ne.children,xe=ne?ne.shapeFlag:0,it=ce.children,{patchFlag:vt,shapeFlag:Lt}=ce;if(vt>0){if(vt&128){Y(Oe,it,Re,De,le,Ve,st,Qe,ot);return}else if(vt&256){j(Oe,it,Re,De,le,Ve,st,Qe,ot);return}}Lt&8?(xe&16&&Le(Oe,le,Ve),it!==Oe&&b(Re,it)):xe&16?Lt&16?Y(Oe,it,Re,De,le,Ve,st,Qe,ot):Le(Oe,le,Ve,!0):(xe&8&&b(Re,""),Lt&16&&ue(it,Re,De,le,Ve,st,Qe,ot))},j=(ne,ce,Re,De,le,Ve,st,Qe,ot)=>{ne=ne||cu,ce=ce||cu;const Oe=ne.length,xe=ce.length,it=Math.min(Oe,xe);let vt;for(vt=0;vt<it;vt++){const Lt=ce[vt]=ot?al(ce[vt]):aa(ce[vt]);O(ne[vt],Lt,Re,null,le,Ve,st,Qe,ot)}Oe>xe?Le(ne,le,Ve,!0,!1,it):ue(ce,Re,De,le,Ve,st,Qe,ot,it)},Y=(ne,ce,Re,De,le,Ve,st,Qe,ot)=>{let Oe=0;const xe=ce.length;let it=ne.length-1,vt=xe-1;for(;Oe<=it&&Oe<=vt;){const Lt=ne[Oe],ze=ce[Oe]=ot?al(ce[Oe]):aa(ce[Oe]);if(Bu(Lt,ze))O(Lt,ze,Re,null,le,Ve,st,Qe,ot);else break;Oe++}for(;Oe<=it&&Oe<=vt;){const Lt=ne[it],ze=ce[vt]=ot?al(ce[vt]):aa(ce[vt]);if(Bu(Lt,ze))O(Lt,ze,Re,null,le,Ve,st,Qe,ot);else break;it--,vt--}if(Oe>it){if(Oe<=vt){const Lt=vt+1,ze=Lt<xe?ce[Lt].el:De;for(;Oe<=vt;)O(null,ce[Oe]=ot?al(ce[Oe]):aa(ce[Oe]),Re,ze,le,Ve,st,Qe,ot),Oe++}}else if(Oe>vt)for(;Oe<=it;)D(ne[Oe],le,Ve,!0),Oe++;else{const Lt=Oe,ze=Oe,Dt=new Map;for(Oe=ze;Oe<=vt;Oe++){const un=ce[Oe]=ot?al(ce[Oe]):aa(ce[Oe]);un.key!=null&&Dt.set(un.key,Oe)}let Tt,jt=0;const Vt=vt-ze+1;let Nt=!1,Pn=0;const en=new Array(Vt);for(Oe=0;Oe<Vt;Oe++)en[Oe]=0;for(Oe=Lt;Oe<=it;Oe++){const un=ne[Oe];if(jt>=Vt){D(un,le,Ve,!0);continue}let xn;if(un.key!=null)xn=Dt.get(un.key);else for(Tt=ze;Tt<=vt;Tt++)if(en[Tt-ze]===0&&Bu(un,ce[Tt])){xn=Tt;break}xn===void 0?D(un,le,Ve,!0):(en[xn-ze]=Oe+1,xn>=Pn?Pn=xn:Nt=!0,O(un,ce[xn],Re,null,le,Ve,st,Qe,ot),jt++)}const Jn=Nt?Zv(en):cu;for(Tt=Jn.length-1,Oe=Vt-1;Oe>=0;Oe--){const un=ze+Oe,xn=ce[un],Yn=un+1<xe?ce[un+1].el:De;en[Oe]===0?O(null,xn,Re,Yn,le,Ve,st,Qe,ot):Nt&&(Tt<0||Oe!==Jn[Tt]?Ie(xn,Re,Yn,2):Tt--)}}},Ie=(ne,ce,Re,De,le=null)=>{const{el:Ve,type:st,transition:Qe,children:ot,shapeFlag:Oe}=ne;if(Oe&6){Ie(ne.component.subTree,ce,Re,De);return}if(Oe&128){ne.suspense.move(ce,Re,De);return}if(Oe&64){st.move(ne,ce,Re,Ke);return}if(st===En){r(Ve,ce,Re);for(let it=0;it<ot.length;it++)Ie(ot[it],ce,Re,De);r(ne.anchor,ce,Re);return}if(st===Nc){X(ne,ce,Re);return}if(De!==2&&Oe&1&&Qe)if(De===0)Qe.beforeEnter(Ve),r(Ve,ce,Re),qs(()=>Qe.enter(Ve),le);else{const{leave:it,delayLeave:vt,afterLeave:Lt}=Qe,ze=()=>r(Ve,ce,Re),Dt=()=>{it(Ve,()=>{ze(),Lt&&Lt()})};vt?vt(Ve,ze,Dt):Dt()}else r(Ve,ce,Re)},D=(ne,ce,Re,De=!1,le=!1)=>{const{type:Ve,props:st,ref:Qe,children:ot,dynamicChildren:Oe,shapeFlag:xe,patchFlag:it,dirs:vt,cacheIndex:Lt}=ne;if(it===-2&&(le=!1),Qe!=null&&Kc(Qe,null,Re,ne,!0),Lt!=null&&(ce.renderCache[Lt]=void 0),xe&256){ce.ctx.deactivate(ne);return}const ze=xe&1&&vt,Dt=!$u(ne);let Tt;if(Dt&&(Tt=st&&st.onVnodeBeforeUnmount)&&ia(Tt,ce,ne),xe&6)_e(ne.component,Re,De);else{if(xe&128){ne.suspense.unmount(Re,De);return}ze&&Pl(ne,null,ce,"beforeUnmount"),xe&64?ne.type.remove(ne,ce,Re,Ke,De):Oe&&!Oe.hasOnce&&(Ve!==En||it>0&&it&64)?Le(Oe,ce,Re,!1,!0):(Ve===En&&it&384||!le&&xe&16)&&Le(ot,ce,Re),De&&K(ne)}(Dt&&(Tt=st&&st.onVnodeUnmounted)||ze)&&qs(()=>{Tt&&ia(Tt,ce,ne),ze&&Pl(ne,null,ce,"unmounted")},Re)},K=ne=>{const{type:ce,el:Re,anchor:De,transition:le}=ne;if(ce===En){he(Re,De);return}if(ce===Nc){Ce(ne);return}const Ve=()=>{o(Re),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(ne.shapeFlag&1&&le&&!le.persisted){const{leave:st,delayLeave:Qe}=le,ot=()=>st(Re,Ve);Qe?Qe(ne.el,Ve,ot):ot()}else Ve()},he=(ne,ce)=>{let Re;for(;ne!==ce;)Re=E(ne),o(ne),ne=Re;o(ce)},_e=(ne,ce,Re)=>{const{bum:De,scope:le,job:Ve,subTree:st,um:Qe,m:ot,a:Oe}=ne;Zd(ot),Zd(Oe),De&&Bc(De),le.stop(),Ve&&(Ve.flags|=8,D(st,ne,ce,Re)),Qe&&qs(Qe,ce),qs(()=>{ne.isUnmounted=!0},ce),ce&&ce.pendingBranch&&!ce.isUnmounted&&ne.asyncDep&&!ne.asyncResolved&&ne.suspenseId===ce.pendingId&&(ce.deps--,ce.deps===0&&ce.resolve())},Le=(ne,ce,Re,De=!1,le=!1,Ve=0)=>{for(let st=Ve;st<ne.length;st++)D(ne[st],ce,Re,De,le)},de=ne=>{if(ne.shapeFlag&6)return de(ne.component.subTree);if(ne.shapeFlag&128)return ne.suspense.next();const ce=E(ne.anchor||ne.el),Re=ce&&ce[pv];return Re?E(Re):ce};let Se=!1;const Ae=(ne,ce,Re)=>{ne==null?ce._vnode&&D(ce._vnode,null,null,!0):O(ce._vnode||null,ne,ce,null,null,null,Re),ce._vnode=ne,Se||(Se=!0,Ud(),hm(),Se=!1)},Ke={p:O,um:D,m:Ie,r:K,mt:te,mc:ue,pc:V,pbc:Je,n:de,o:e};return{render:Ae,hydrate:void 0,createApp:Rv(Ae)}}function Zh({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Sl({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Wv(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Am(e,t,n=!1){const r=e.children,o=t.children;if(dn(r)&&dn(o))for(let l=0;l<r.length;l++){const c=r[l];let p=o[l];p.shapeFlag&1&&!p.dynamicChildren&&((p.patchFlag<=0||p.patchFlag===32)&&(p=o[l]=al(o[l]),p.el=c.el),!n&&p.patchFlag!==-2&&Am(c,p)),p.type===vh&&(p.el=c.el)}}function Zv(e){const t=e.slice(),n=[0];let r,o,l,c,p;const m=e.length;for(r=0;r<m;r++){const y=e[r];if(y!==0){if(o=n[n.length-1],e[o]<y){t[r]=o,n.push(r);continue}for(l=0,c=n.length-1;l<c;)p=l+c>>1,e[n[p]]<y?l=p+1:c=p;y<e[n[l]]&&(l>0&&(t[r]=n[l-1]),n[l]=r)}}for(l=n.length,c=n[l-1];l-- >0;)n[l]=c,c=t[c];return n}function Mm(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Mm(t)}function Zd(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Kv=Symbol.for("v-scx"),Jv=()=>fo(Kv);function ls(e,t,n){return Bm(e,t,n)}function Bm(e,t,n=ai){const{immediate:r,deep:o,flush:l,once:c}=n,p=Jr({},n),m=t&&r||!t&&l!=="post";let y;if(ec){if(l==="sync"){const C=Jv();y=C.__watcherHandles||(C.__watcherHandles=[])}else if(!m){const C=()=>{};return C.stop=ua,C.resume=ua,C.pause=ua,C}}const b=kr;p.call=(C,R,O)=>fa(C,b,R,O);let w=!1;l==="post"?p.scheduler=C=>{qs(C,b&&b.suspense)}:l!=="sync"&&(w=!0,p.scheduler=(C,R)=>{R?C():dd(C)}),p.augmentJob=C=>{t&&(C.flags|=4),w&&(C.flags|=2,b&&(C.id=b.uid,C.i=b))};const E=cv(e,t,p);return ec&&(y?y.push(E):m&&E()),E}function Yv(e,t,n){const r=this.proxy,o=Yi(e)?e.includes(".")?Tm(r,e):()=>r[e]:e.bind(r,r);let l;kn(t)?l=t:(l=t.handler,n=t);const c=lc(this),p=Bm(o,l.bind(r),n);return c(),p}function Tm(e,t){const n=t.split(".");return()=>{let r=e;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const Xv=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${mo(t)}Modifiers`]||e[`${Vl(t)}Modifiers`];function Qv(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ai;let o=n;const l=t.startsWith("update:"),c=l&&Xv(r,t.slice(7));c&&(c.trim&&(o=n.map(b=>Yi(b)?b.trim():b)),c.number&&(o=n.map(Vc)));let p,m=r[p=qh(t)]||r[p=qh(mo(t))];!m&&l&&(m=r[p=qh(Vl(t))]),m&&fa(m,e,6,o);const y=r[p+"Once"];if(y){if(!e.emitted)e.emitted={};else if(e.emitted[p])return;e.emitted[p]=!0,fa(y,e,6,o)}}function Nm(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(o!==void 0)return o;const l=e.emits;let c={},p=!1;if(!kn(e)){const m=y=>{const b=Nm(y,t,!0);b&&(p=!0,Jr(c,b))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!l&&!p?(di(e)&&r.set(e,null),null):(dn(l)?l.forEach(m=>c[m]=null):Jr(c,l),di(e)&&r.set(e,c),c)}function gh(e,t){return!e||!ah(t)?!1:(t=t.slice(2).replace(/Once$/,""),ii(e,t[0].toLowerCase()+t.slice(1))||ii(e,Vl(t))||ii(e,t))}function Kd(e){const{type:t,vnode:n,proxy:r,withProxy:o,propsOptions:[l],slots:c,attrs:p,emit:m,render:y,renderCache:b,props:w,data:E,setupState:C,ctx:R,inheritAttrs:O}=e,q=Zc(e);let F,G;try{if(n.shapeFlag&4){const Ce=o||r,Pe=Ce;F=aa(y.call(Pe,Ce,b,w,C,E,R)),G=p}else{const Ce=t;F=aa(Ce.length>1?Ce(w,{attrs:p,slots:c,emit:m}):Ce(w,null)),G=t.props?p:e_(p)}}catch(Ce){Gu.length=0,dh(Ce,e,1),F=Ni(ql)}let X=F;if(G&&O!==!1){const Ce=Object.keys(G),{shapeFlag:Pe}=X;Ce.length&&Pe&7&&(l&&Ce.some(td)&&(G=t_(G,l)),X=vu(X,G,!1,!0))}return n.dirs&&(X=vu(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(n.dirs):n.dirs),n.transition&&pd(X,n.transition),F=X,Zc(q),F}const e_=e=>{let t;for(const n in e)(n==="class"||n==="style"||ah(n))&&((t||(t={}))[n]=e[n]);return t},t_=(e,t)=>{const n={};for(const r in e)(!td(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function n_(e,t,n){const{props:r,children:o,component:l}=e,{props:c,children:p,patchFlag:m}=t,y=l.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return r?Jd(r,c,y):!!c;if(m&8){const b=t.dynamicProps;for(let w=0;w<b.length;w++){const E=b[w];if(c[E]!==r[E]&&!gh(y,E))return!0}}}else return(o||p)&&(!p||!p.$stable)?!0:r===c?!1:r?c?Jd(r,c,y):!0:!!c;return!1}function Jd(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const l=r[o];if(t[l]!==e[l]&&!gh(n,l))return!0}return!1}function i_({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Dm=e=>e.__isSuspense;function r_(e,t){t&&t.pendingBranch?dn(e)?t.effects.push(...e):t.effects.push(e):dv(e)}const En=Symbol.for("v-fgt"),vh=Symbol.for("v-txt"),ql=Symbol.for("v-cmt"),Nc=Symbol.for("v-stc"),Gu=[];let Vs=null;function ut(e=!1){Gu.push(Vs=e?null:[])}function s_(){Gu.pop(),Vs=Gu[Gu.length-1]||null}let Qu=1;function Yd(e,t=!1){Qu+=e,e<0&&Vs&&t&&(Vs.hasOnce=!0)}function Om(e){return e.dynamicChildren=Qu>0?Vs||cu:null,s_(),Qu>0&&Vs&&Vs.push(e),e}function dt(e,t,n,r,o,l){return Om(B(e,t,n,r,o,l,!0))}function Ia(e,t,n,r,o){return Om(Ni(e,t,n,r,o,!0))}function Yc(e){return e?e.__v_isVNode===!0:!1}function Bu(e,t){return e.type===t.type&&e.key===t.key}const Im=({key:e})=>e??null,Dc=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Yi(e)||Ui(e)||kn(e)?{i:Ps,r:e,k:t,f:!!n}:e:null);function B(e,t=null,n=null,r=0,o=null,l=e===En?0:1,c=!1,p=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Im(t),ref:t&&Dc(t),scopeId:dm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ps};return p?(vd(m,n),l&128&&e.normalize(m)):n&&(m.shapeFlag|=Yi(n)?8:16),Qu>0&&!c&&Vs&&(m.patchFlag>0||l&6)&&m.patchFlag!==32&&Vs.push(m),m}const Ni=o_;function o_(e,t=null,n=null,r=0,o=null,l=!1){if((!e||e===Ev)&&(e=ql),Yc(e)){const p=vu(e,t,!0);return n&&vd(p,n),Qu>0&&!l&&Vs&&(p.shapeFlag&6?Vs[Vs.indexOf(e)]=p:Vs.push(p)),p.patchFlag=-2,p}if(v_(e)&&(e=e.__vccOpts),t){t=a_(t);let{class:p,style:m}=t;p&&!Yi(p)&&(t.class=Kr(p)),di(m)&&(hd(m)&&!dn(m)&&(m=Jr({},m)),t.style=hh(m))}const c=Yi(e)?1:Dm(e)?128:mv(e)?64:di(e)?4:kn(e)?2:0;return B(e,t,n,r,o,c,l,!0)}function a_(e){return e?hd(e)||xm(e)?Jr({},e):e:null}function vu(e,t,n=!1,r=!1){const{props:o,ref:l,patchFlag:c,children:p,transition:m}=e,y=t?l_(o||{},t):o,b={__v_isVNode:!0,__v_skip:!0,type:e.type,props:y,key:y&&Im(y),ref:t&&t.ref?n&&l?dn(l)?l.concat(Dc(t)):[l,Dc(t)]:Dc(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:p,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==En?c===-1?16:c|16:c,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vu(e.ssContent),ssFallback:e.ssFallback&&vu(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&r&&pd(b,m.clone(b)),b}function _i(e=" ",t=0){return Ni(vh,null,e,t)}function Xd(e,t){const n=Ni(Nc,null,e);return n.staticCount=t,n}function on(e="",t=!1){return t?(ut(),Ia(ql,null,e)):Ni(ql,null,e)}function aa(e){return e==null||typeof e=="boolean"?Ni(ql):dn(e)?Ni(En,null,e.slice()):Yc(e)?al(e):Ni(vh,null,String(e))}function al(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vu(e)}function vd(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(dn(t))n=16;else if(typeof t=="object")if(r&65){const o=t.default;o&&(o._c&&(o._d=!1),vd(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!xm(t)?t._ctx=Ps:o===3&&Ps&&(Ps.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else kn(t)?(t={default:t,_ctx:Ps},n=32):(t=String(t),r&64?(n=16,t=[_i(t)]):n=8);e.children=t,e.shapeFlag|=n}function l_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(o==="class")t.class!==r.class&&(t.class=Kr([t.class,r.class]));else if(o==="style")t.style=hh([t.style,r.style]);else if(ah(o)){const l=t[o],c=r[o];c&&l!==c&&!(dn(l)&&l.includes(c))&&(t[o]=l?[].concat(l,c):c)}else o!==""&&(t[o]=r[o])}return t}function ia(e,t,n,r=null){fa(e,t,7,[n,r])}const u_=ym();let c_=0;function h_(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||u_,l={uid:c_++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new q0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cm(r,o),emitsOptions:Nm(r,o),emit:null,emitted:null,propsDefaults:ai,inheritAttrs:r.inheritAttrs,ctx:ai,data:ai,props:ai,attrs:ai,slots:ai,refs:ai,setupState:ai,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=Qv.bind(null,l),e.ce&&e.ce(l),l}let kr=null,Xc,Pf;{const e=ch(),t=(n,r)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(r),l=>{o.length>1?o.forEach(c=>c(l)):o[0](l)}};Xc=t("__VUE_INSTANCE_SETTERS__",n=>kr=n),Pf=t("__VUE_SSR_SETTERS__",n=>ec=n)}const lc=e=>{const t=kr;return Xc(e),e.scope.on(),()=>{e.scope.off(),Xc(t)}},Qd=()=>{kr&&kr.scope.off(),Xc(null)};function Rm(e){return e.vnode.shapeFlag&4}let ec=!1;function f_(e,t=!1,n=!1){t&&Pf(t);const{props:r,children:o}=e.vnode,l=Rm(e);jv(e,r,l,t),$v(e,o,n);const c=l?d_(e,t):void 0;return t&&Pf(!1),c}function d_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Mv);const{setup:r}=n;if(r){ml();const o=e.setupContext=r.length>1?m_(e):null,l=lc(e),c=oc(r,e,0,[e.props,o]),p=O0(c);if(gl(),l(),(p||e.sp)&&!$u(e)&&pm(e),p){if(c.then(Qd,Qd),t)return c.then(m=>{ep(e,m)}).catch(m=>{dh(m,e,0)});e.asyncDep=c}else ep(e,c)}else Fm(e)}function ep(e,t,n){kn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:di(t)&&(e.setupState=lm(t)),Fm(e)}function Fm(e,t,n){const r=e.type;e.render||(e.render=r.render||ua);{const o=lc(e);ml();try{Bv(e)}finally{gl(),o()}}}const p_={get(e,t){return Gr(e,"get",""),e[t]}};function m_(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,p_),slots:e.slots,emit:e.emit,expose:t}}function _h(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(lm(fd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Vu)return Vu[n](e)},has(t,n){return n in t||n in Vu}})):e.proxy}function g_(e,t=!0){return kn(e)?e.displayName||e.name:e.name||t&&e.__name}function v_(e){return kn(e)&&"__vccOpts"in e}const Tn=(e,t)=>lv(e,t,ec);function jm(e,t,n){const r=arguments.length;return r===2?di(t)&&!dn(t)?Yc(t)?Ni(e,null,[t]):Ni(e,t):Ni(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Yc(n)&&(n=[n]),Ni(e,t,n))}const __="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Sf;const tp=typeof window<"u"&&window.trustedTypes;if(tp)try{Sf=tp.createPolicy("vue",{createHTML:e=>e})}catch{}const zm=Sf?e=>Sf.createHTML(e):e=>e,y_="http://www.w3.org/2000/svg",b_="http://www.w3.org/1998/Math/MathML",Ta=typeof document<"u"?document:null,np=Ta&&Ta.createElement("template"),w_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t==="svg"?Ta.createElementNS(y_,e):t==="mathml"?Ta.createElementNS(b_,e):n?Ta.createElement(e,{is:n}):Ta.createElement(e);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>Ta.createTextNode(e),createComment:e=>Ta.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ta.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,o,l){const c=n?n.previousSibling:t.lastChild;if(o&&(o===l||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===l||!(o=o.nextSibling)););else{np.innerHTML=zm(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const p=np.content;if(r==="svg"||r==="mathml"){const m=p.firstChild;for(;m.firstChild;)p.appendChild(m.firstChild);p.removeChild(m)}t.insertBefore(p,n)}return[c?c.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},x_=Symbol("_vtc");function L_(e,t,n){const r=e[x_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Qc=Symbol("_vod"),Um=Symbol("_vsh"),ip={beforeMount(e,{value:t},{transition:n}){e[Qc]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Tu(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Tu(e,!0),r.enter(e)):r.leave(e,()=>{Tu(e,!1)}):Tu(e,t))},beforeUnmount(e,{value:t}){Tu(e,t)}};function Tu(e,t){e.style.display=t?e[Qc]:"none",e[Um]=!t}const C_=Symbol(""),k_=/(^|;)\s*display\s*:/;function P_(e,t,n){const r=e.style,o=Yi(n);let l=!1;if(n&&!o){if(t)if(Yi(t))for(const c of t.split(";")){const p=c.slice(0,c.indexOf(":")).trim();n[p]==null&&Oc(r,p,"")}else for(const c in t)n[c]==null&&Oc(r,c,"");for(const c in n)c==="display"&&(l=!0),Oc(r,c,n[c])}else if(o){if(t!==n){const c=r[C_];c&&(n+=";"+c),r.cssText=n,l=k_.test(n)}}else t&&e.removeAttribute("style");Qc in e&&(e[Qc]=l?r.display:"",e[Um]&&(r.display="none"))}const rp=/\s*!important$/;function Oc(e,t,n){if(dn(n))n.forEach(r=>Oc(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=S_(e,t);rp.test(n)?e.setProperty(Vl(r),n.replace(rp,""),"important"):e[r]=n}}const sp=["Webkit","Moz","ms"],Kh={};function S_(e,t){const n=Kh[t];if(n)return n;let r=mo(t);if(r!=="filter"&&r in e)return Kh[t]=r;r=uh(r);for(let o=0;o<sp.length;o++){const l=sp[o]+r;if(l in e)return Kh[t]=l}return t}const op="http://www.w3.org/1999/xlink";function ap(e,t,n,r,o,l=N1(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(op,t.slice(6,t.length)):e.setAttributeNS(op,t,n):n==null||l&&!j0(n)?e.removeAttribute(t):e.setAttribute(t,l?"":ha(n)?String(n):n)}function lp(e,t,n,r,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?zm(n):n);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const p=l==="OPTION"?e.getAttribute("value")||"":e.value,m=n==null?e.type==="checkbox"?"on":"":String(n);(p!==m||!("_value"in e))&&(e.value=m),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const p=typeof e[t];p==="boolean"?n=j0(n):n==null&&p==="string"?(n="",c=!0):p==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(o||t)}function Oa(e,t,n,r){e.addEventListener(t,n,r)}function E_(e,t,n,r){e.removeEventListener(t,n,r)}const up=Symbol("_vei");function A_(e,t,n,r,o=null){const l=e[up]||(e[up]={}),c=l[t];if(r&&c)c.value=r;else{const[p,m]=M_(t);if(r){const y=l[t]=N_(r,o);Oa(e,p,y,m)}else c&&(E_(e,p,c,m),l[t]=void 0)}}const cp=/(?:Once|Passive|Capture)$/;function M_(e){let t;if(cp.test(e)){t={};let r;for(;r=e.match(cp);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Vl(e.slice(2)),t]}let Jh=0;const B_=Promise.resolve(),T_=()=>Jh||(B_.then(()=>Jh=0),Jh=Date.now());function N_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;fa(D_(r,n.value),t,5,[r])};return n.value=e,n.attached=T_(),n}function D_(e,t){if(dn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>o=>!o._stopped&&r&&r(o))}else return t}const hp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,O_=(e,t,n,r,o,l)=>{const c=o==="svg";t==="class"?L_(e,r,c):t==="style"?P_(e,n,r):ah(t)?td(t)||A_(e,t,n,r,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):I_(e,t,r,c))?(lp(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ap(e,t,r,c,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Yi(r))?lp(e,mo(t),r,l,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),ap(e,t,r,c))};function I_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&hp(t)&&kn(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return hp(t)&&Yi(n)?!1:t in e}const fl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return dn(t)?n=>Bc(t,n):t};function R_(e){e.target.composing=!0}function fp(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const po=Symbol("_assign"),Mi={created(e,{modifiers:{lazy:t,trim:n,number:r}},o){e[po]=fl(o);const l=r||o.props&&o.props.type==="number";Oa(e,t?"change":"input",c=>{if(c.target.composing)return;let p=e.value;n&&(p=p.trim()),l&&(p=Vc(p)),e[po](p)}),n&&Oa(e,"change",()=>{e.value=e.value.trim()}),t||(Oa(e,"compositionstart",R_),Oa(e,"compositionend",fp),Oa(e,"change",fp))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:o,number:l}},c){if(e[po]=fl(c),e.composing)return;const p=(l||e.type==="number")&&!/^0\d/.test(e.value)?Vc(e.value):e.value,m=t??"";p!==m&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||o&&e.value.trim()===m)||(e.value=m))}},qm={deep:!0,created(e,t,n){e[po]=fl(n),Oa(e,"change",()=>{const r=e._modelValue,o=_u(e),l=e.checked,c=e[po];if(dn(r)){const p=rd(r,o),m=p!==-1;if(l&&!m)c(r.concat(o));else if(!l&&m){const y=[...r];y.splice(p,1),c(y)}}else if(wu(r)){const p=new Set(r);l?p.add(o):p.delete(o),c(p)}else c($m(e,l))})},mounted:dp,beforeUpdate(e,t,n){e[po]=fl(n),dp(e,t,n)}};function dp(e,{value:t,oldValue:n},r){e._modelValue=t;let o;if(dn(t))o=rd(t,r.props.value)>-1;else if(wu(t))o=t.has(r.props.value);else{if(t===n)return;o=zl(t,$m(e,!0))}e.checked!==o&&(e.checked=o)}const F_={created(e,{value:t},n){e.checked=zl(t,n.props.value),e[po]=fl(n),Oa(e,"change",()=>{e[po](_u(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[po]=fl(r),t!==n&&(e.checked=zl(t,r.props.value))}},$s={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const o=wu(t);Oa(e,"change",()=>{const l=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>n?Vc(_u(c)):_u(c));e[po](e.multiple?o?new Set(l):l:l[0]),e._assigning=!0,ac(()=>{e._assigning=!1})}),e[po]=fl(r)},mounted(e,{value:t}){pp(e,t)},beforeUpdate(e,t,n){e[po]=fl(n)},updated(e,{value:t}){e._assigning||pp(e,t)}};function pp(e,t){const n=e.multiple,r=dn(t);if(!(n&&!r&&!wu(t))){for(let o=0,l=e.options.length;o<l;o++){const c=e.options[o],p=_u(c);if(n)if(r){const m=typeof p;m==="string"||m==="number"?c.selected=t.some(y=>String(y)===String(p)):c.selected=rd(t,p)>-1}else c.selected=t.has(p);else if(zl(_u(c),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function _u(e){return"_value"in e?e._value:e.value}function $m(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const j_={created(e,t,n){kc(e,t,n,null,"created")},mounted(e,t,n){kc(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){kc(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){kc(e,t,n,r,"updated")}};function z_(e,t){switch(e){case"SELECT":return $s;case"TEXTAREA":return Mi;default:switch(t){case"checkbox":return qm;case"radio":return F_;default:return Mi}}}function kc(e,t,n,r,o){const c=z_(e.tagName,n.props&&n.props.type)[o];c&&c(e,t,n,r)}const U_=["ctrl","shift","alt","meta"],q_={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>U_.some(n=>e[`${n}Key`]&&!t.includes(n))},yh=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(o,...l)=>{for(let c=0;c<t.length;c++){const p=q_[t[c]];if(p&&p(o,t))return}return e(o,...l)})},$_=Jr({patchProp:O_},w_);let mp;function V_(){return mp||(mp=Gv($_))}const G_=(...e)=>{const t=V_().createApp(...e),{mount:n}=t;return t.mount=r=>{const o=W_(r);if(!o)return;const l=t._component;!kn(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const c=n(o,!1,H_(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},t};function H_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function W_(e){return Yi(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Vm;const bh=e=>Vm=e,Gm=Symbol();function Ef(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Hu;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Hu||(Hu={}));function Z_(){const e=$0(!0),t=e.run(()=>It({}));let n=[],r=[];const o=fd({install(l){bh(o),o._a=l,l.provide(Gm,o),l.config.globalProperties.$pinia=o,r.forEach(c=>n.push(c)),r=[]},use(l){return this._a?n.push(l):r.push(l),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const Hm=()=>{};function gp(e,t,n,r=Hm){e.push(t);const o=()=>{const l=e.indexOf(t);l>-1&&(e.splice(l,1),r())};return!n&&V0()&&O1(o),o}function tu(e,...t){e.slice().forEach(n=>{n(...t)})}const K_=e=>e(),vp=Symbol(),Yh=Symbol();function Af(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],o=e[n];Ef(o)&&Ef(r)&&e.hasOwnProperty(n)&&!Ui(r)&&!hl(r)?e[n]=Af(o,r):e[n]=r}return e}const J_=Symbol();function Y_(e){return!Ef(e)||!e.hasOwnProperty(J_)}const{assign:sl}=Object;function X_(e){return!!(Ui(e)&&e.effect)}function Q_(e,t,n,r){const{state:o,actions:l,getters:c}=t,p=n.state.value[e];let m;function y(){p||(n.state.value[e]=o?o():{});const b=rv(n.state.value[e]);return sl(b,l,Object.keys(c||{}).reduce((w,E)=>(w[E]=fd(Tn(()=>{bh(n);const C=n._s.get(e);return c[E].call(C,C)})),w),{}))}return m=Wm(e,y,t,n,r,!0),m}function Wm(e,t,n={},r,o,l){let c;const p=sl({actions:{}},n),m={deep:!0};let y,b,w=[],E=[],C;const R=r.state.value[e];!l&&!R&&(r.state.value[e]={}),It({});let O;function q(ue){let Be;y=b=!1,typeof ue=="function"?(ue(r.state.value[e]),Be={type:Hu.patchFunction,storeId:e,events:C}):(Af(r.state.value[e],ue),Be={type:Hu.patchObject,payload:ue,storeId:e,events:C});const Je=O=Symbol();ac().then(()=>{O===Je&&(y=!0)}),b=!0,tu(w,Be,r.state.value[e])}const F=l?function(){const{state:Be}=n,Je=Be?Be():{};this.$patch($=>{sl($,Je)})}:Hm;function G(){c.stop(),w=[],E=[],r._s.delete(e)}const X=(ue,Be="")=>{if(vp in ue)return ue[Yh]=Be,ue;const Je=function(){bh(r);const $=Array.from(arguments),J=[],I=[];function te(ve){J.push(ve)}function Z(ve){I.push(ve)}tu(E,{args:$,name:Je[Yh],store:Pe,after:te,onError:Z});let ee;try{ee=ue.apply(this&&this.$id===e?this:Pe,$)}catch(ve){throw tu(I,ve),ve}return ee instanceof Promise?ee.then(ve=>(tu(J,ve),ve)).catch(ve=>(tu(I,ve),Promise.reject(ve))):(tu(J,ee),ee)};return Je[vp]=!0,Je[Yh]=Be,Je},Ce={_p:r,$id:e,$onAction:gp.bind(null,E),$patch:q,$reset:F,$subscribe(ue,Be={}){const Je=gp(w,ue,Be.detached,()=>$()),$=c.run(()=>ls(()=>r.state.value[e],J=>{(Be.flush==="sync"?b:y)&&ue({storeId:e,type:Hu.direct,events:C},J)},sl({},m,Be)));return Je},$dispose:G},Pe=Fa(Ce);r._s.set(e,Pe);const se=(r._a&&r._a.runWithContext||K_)(()=>r._e.run(()=>(c=$0()).run(()=>t({action:X}))));for(const ue in se){const Be=se[ue];if(Ui(Be)&&!X_(Be)||hl(Be))l||(R&&Y_(Be)&&(Ui(Be)?Be.value=R[ue]:Af(Be,R[ue])),r.state.value[e][ue]=Be);else if(typeof Be=="function"){const Je=X(Be,ue);se[ue]=Je,p.actions[ue]=Be}}return sl(Pe,se),sl(Kn(Pe),se),Object.defineProperty(Pe,"$state",{get:()=>r.state.value[e],set:ue=>{q(Be=>{sl(Be,ue)})}}),r._p.forEach(ue=>{sl(Pe,c.run(()=>ue({store:Pe,app:r._a,pinia:r,options:p})))}),R&&l&&n.hydrate&&n.hydrate(Pe.$state,R),y=!0,b=!0,Pe}/*! #__NO_SIDE_EFFECTS__ */function _d(e,t,n){let r,o;const l=typeof t=="function";typeof e=="string"?(r=e,o=l?n:t):(o=e,r=e.id);function c(p,m){const y=Fv();return p=p||(y?fo(Gm,null):null),p&&bh(p),p=Vm,p._s.has(r)||(l?Wm(r,t,o,p):Q_(r,o,p)),p._s.get(r)}return c.$id=r,c}function Zm(e,t){return function(){return e.apply(t,arguments)}}const{toString:ey}=Object.prototype,{getPrototypeOf:yd}=Object,wh=(e=>t=>{const n=ey.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fo=e=>(e=e.toLowerCase(),t=>wh(t)===e),xh=e=>t=>typeof t===e,{isArray:xu}=Array,tc=xh("undefined");function ty(e){return e!==null&&!tc(e)&&e.constructor!==null&&!tc(e.constructor)&&Hs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Km=Fo("ArrayBuffer");function ny(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Km(e.buffer),t}const iy=xh("string"),Hs=xh("function"),Jm=xh("number"),Lh=e=>e!==null&&typeof e=="object",ry=e=>e===!0||e===!1,Ic=e=>{if(wh(e)!=="object")return!1;const t=yd(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},sy=Fo("Date"),oy=Fo("File"),ay=Fo("Blob"),ly=Fo("FileList"),uy=e=>Lh(e)&&Hs(e.pipe),cy=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Hs(e.append)&&((t=wh(e))==="formdata"||t==="object"&&Hs(e.toString)&&e.toString()==="[object FormData]"))},hy=Fo("URLSearchParams"),[fy,dy,py,my]=["ReadableStream","Request","Response","Headers"].map(Fo),gy=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),xu(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const l=n?Object.getOwnPropertyNames(e):Object.keys(e),c=l.length;let p;for(r=0;r<c;r++)p=l[r],t.call(null,e[p],p,e)}}function Ym(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const Nl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Xm=e=>!tc(e)&&e!==Nl;function Mf(){const{caseless:e}=Xm(this)&&this||{},t={},n=(r,o)=>{const l=e&&Ym(t,o)||o;Ic(t[l])&&Ic(r)?t[l]=Mf(t[l],r):Ic(r)?t[l]=Mf({},r):xu(r)?t[l]=r.slice():t[l]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&uc(arguments[r],n);return t}const vy=(e,t,n,{allOwnKeys:r}={})=>(uc(t,(o,l)=>{n&&Hs(o)?e[l]=Zm(o,n):e[l]=o},{allOwnKeys:r}),e),_y=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),yy=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},by=(e,t,n,r)=>{let o,l,c;const p={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),l=o.length;l-- >0;)c=o[l],(!r||r(c,e,t))&&!p[c]&&(t[c]=e[c],p[c]=!0);e=n!==!1&&yd(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},wy=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},xy=e=>{if(!e)return null;if(xu(e))return e;let t=e.length;if(!Jm(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Ly=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&yd(Uint8Array)),Cy=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const l=o.value;t.call(e,l[0],l[1])}},ky=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Py=Fo("HTMLFormElement"),Sy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),_p=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ey=Fo("RegExp"),Qm=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};uc(n,(o,l)=>{let c;(c=t(o,l,e))!==!1&&(r[l]=c||o)}),Object.defineProperties(e,r)},Ay=e=>{Qm(e,(t,n)=>{if(Hs(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Hs(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},My=(e,t)=>{const n={},r=o=>{o.forEach(l=>{n[l]=!0})};return xu(e)?r(e):r(String(e).split(t)),n},By=()=>{},Ty=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Xh="abcdefghijklmnopqrstuvwxyz",yp="0123456789",eg={DIGIT:yp,ALPHA:Xh,ALPHA_DIGIT:Xh+Xh.toUpperCase()+yp},Ny=(e=16,t=eg.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Dy(e){return!!(e&&Hs(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Oy=e=>{const t=new Array(10),n=(r,o)=>{if(Lh(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const l=xu(r)?[]:{};return uc(r,(c,p)=>{const m=n(c,o+1);!tc(m)&&(l[p]=m)}),t[o]=void 0,l}}return r};return n(e,0)},Iy=Fo("AsyncFunction"),Ry=e=>e&&(Lh(e)||Hs(e))&&Hs(e.then)&&Hs(e.catch),tg=((e,t)=>e?setImmediate:t?((n,r)=>(Nl.addEventListener("message",({source:o,data:l})=>{o===Nl&&l===n&&r.length&&r.shift()()},!1),o=>{r.push(o),Nl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Hs(Nl.postMessage)),Fy=typeof queueMicrotask<"u"?queueMicrotask.bind(Nl):typeof process<"u"&&process.nextTick||tg,wt={isArray:xu,isArrayBuffer:Km,isBuffer:ty,isFormData:cy,isArrayBufferView:ny,isString:iy,isNumber:Jm,isBoolean:ry,isObject:Lh,isPlainObject:Ic,isReadableStream:fy,isRequest:dy,isResponse:py,isHeaders:my,isUndefined:tc,isDate:sy,isFile:oy,isBlob:ay,isRegExp:Ey,isFunction:Hs,isStream:uy,isURLSearchParams:hy,isTypedArray:Ly,isFileList:ly,forEach:uc,merge:Mf,extend:vy,trim:gy,stripBOM:_y,inherits:yy,toFlatObject:by,kindOf:wh,kindOfTest:Fo,endsWith:wy,toArray:xy,forEachEntry:Cy,matchAll:ky,isHTMLForm:Py,hasOwnProperty:_p,hasOwnProp:_p,reduceDescriptors:Qm,freezeMethods:Ay,toObjectSet:My,toCamelCase:Sy,noop:By,toFiniteNumber:Ty,findKey:Ym,global:Nl,isContextDefined:Xm,ALPHABET:eg,generateString:Ny,isSpecCompliantForm:Dy,toJSONObject:Oy,isAsyncFn:Iy,isThenable:Ry,setImmediate:tg,asap:Fy};function An(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}wt.inherits(An,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const ng=An.prototype,ig={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ig[e]={value:e}});Object.defineProperties(An,ig);Object.defineProperty(ng,"isAxiosError",{value:!0});An.from=(e,t,n,r,o,l)=>{const c=Object.create(ng);return wt.toFlatObject(e,c,function(m){return m!==Error.prototype},p=>p!=="isAxiosError"),An.call(c,e.message,t,n,r,o),c.cause=e,c.name=e.name,l&&Object.assign(c,l),c};const jy=null;function Bf(e){return wt.isPlainObject(e)||wt.isArray(e)}function rg(e){return wt.endsWith(e,"[]")?e.slice(0,-2):e}function bp(e,t,n){return e?e.concat(t).map(function(o,l){return o=rg(o),!n&&l?"["+o+"]":o}).join(n?".":""):t}function zy(e){return wt.isArray(e)&&!e.some(Bf)}const Uy=wt.toFlatObject(wt,{},null,function(t){return/^is[A-Z]/.test(t)});function Ch(e,t,n){if(!wt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,q){return!wt.isUndefined(q[O])});const r=n.metaTokens,o=n.visitor||b,l=n.dots,c=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(t);if(!wt.isFunction(o))throw new TypeError("visitor must be a function");function y(R){if(R===null)return"";if(wt.isDate(R))return R.toISOString();if(!m&&wt.isBlob(R))throw new An("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(R)||wt.isTypedArray(R)?m&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function b(R,O,q){let F=R;if(R&&!q&&typeof R=="object"){if(wt.endsWith(O,"{}"))O=r?O:O.slice(0,-2),R=JSON.stringify(R);else if(wt.isArray(R)&&zy(R)||(wt.isFileList(R)||wt.endsWith(O,"[]"))&&(F=wt.toArray(R)))return O=rg(O),F.forEach(function(X,Ce){!(wt.isUndefined(X)||X===null)&&t.append(c===!0?bp([O],Ce,l):c===null?O:O+"[]",y(X))}),!1}return Bf(R)?!0:(t.append(bp(q,O,l),y(R)),!1)}const w=[],E=Object.assign(Uy,{defaultVisitor:b,convertValue:y,isVisitable:Bf});function C(R,O){if(!wt.isUndefined(R)){if(w.indexOf(R)!==-1)throw Error("Circular reference detected in "+O.join("."));w.push(R),wt.forEach(R,function(F,G){(!(wt.isUndefined(F)||F===null)&&o.call(t,F,wt.isString(G)?G.trim():G,O,E))===!0&&C(F,O?O.concat(G):[G])}),w.pop()}}if(!wt.isObject(e))throw new TypeError("data must be an object");return C(e),t}function wp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function bd(e,t){this._pairs=[],e&&Ch(e,this,t)}const sg=bd.prototype;sg.append=function(t,n){this._pairs.push([t,n])};sg.toString=function(t){const n=t?function(r){return t.call(this,r,wp)}:wp;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function qy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function og(e,t,n){if(!t)return e;const r=n&&n.encode||qy;wt.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let l;if(o?l=o(t,n):l=wt.isURLSearchParams(t)?t.toString():new bd(t,n).toString(r),l){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class xp{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){wt.forEach(this.handlers,function(r){r!==null&&t(r)})}}const ag={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$y=typeof URLSearchParams<"u"?URLSearchParams:bd,Vy=typeof FormData<"u"?FormData:null,Gy=typeof Blob<"u"?Blob:null,Hy={isBrowser:!0,classes:{URLSearchParams:$y,FormData:Vy,Blob:Gy},protocols:["http","https","file","blob","url","data"]},wd=typeof window<"u"&&typeof document<"u",Tf=typeof navigator=="object"&&navigator||void 0,Wy=wd&&(!Tf||["ReactNative","NativeScript","NS"].indexOf(Tf.product)<0),Zy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ky=wd&&window.location.href||"http://localhost",Jy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:wd,hasStandardBrowserEnv:Wy,hasStandardBrowserWebWorkerEnv:Zy,navigator:Tf,origin:Ky},Symbol.toStringTag,{value:"Module"})),Wr={...Jy,...Hy};function Yy(e,t){return Ch(e,new Wr.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,l){return Wr.isNode&&wt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function Xy(e){return wt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Qy(e){const t={},n=Object.keys(e);let r;const o=n.length;let l;for(r=0;r<o;r++)l=n[r],t[l]=e[l];return t}function lg(e){function t(n,r,o,l){let c=n[l++];if(c==="__proto__")return!0;const p=Number.isFinite(+c),m=l>=n.length;return c=!c&&wt.isArray(o)?o.length:c,m?(wt.hasOwnProp(o,c)?o[c]=[o[c],r]:o[c]=r,!p):((!o[c]||!wt.isObject(o[c]))&&(o[c]=[]),t(n,r,o[c],l)&&wt.isArray(o[c])&&(o[c]=Qy(o[c])),!p)}if(wt.isFormData(e)&&wt.isFunction(e.entries)){const n={};return wt.forEachEntry(e,(r,o)=>{t(Xy(r),o,n,0)}),n}return null}function e2(e,t,n){if(wt.isString(e))try{return(t||JSON.parse)(e),wt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const cc={transitional:ag,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,l=wt.isObject(t);if(l&&wt.isHTMLForm(t)&&(t=new FormData(t)),wt.isFormData(t))return o?JSON.stringify(lg(t)):t;if(wt.isArrayBuffer(t)||wt.isBuffer(t)||wt.isStream(t)||wt.isFile(t)||wt.isBlob(t)||wt.isReadableStream(t))return t;if(wt.isArrayBufferView(t))return t.buffer;if(wt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let p;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Yy(t,this.formSerializer).toString();if((p=wt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Ch(p?{"files[]":t}:t,m&&new m,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),e2(t)):t}],transformResponse:[function(t){const n=this.transitional||cc.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(wt.isResponse(t)||wt.isReadableStream(t))return t;if(t&&wt.isString(t)&&(r&&!this.responseType||o)){const c=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(p){if(c)throw p.name==="SyntaxError"?An.from(p,An.ERR_BAD_RESPONSE,this,null,this.response):p}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wr.classes.FormData,Blob:Wr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],e=>{cc.headers[e]={}});const t2=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),n2=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(c){o=c.indexOf(":"),n=c.substring(0,o).trim().toLowerCase(),r=c.substring(o+1).trim(),!(!n||t[n]&&t2[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Lp=Symbol("internals");function Nu(e){return e&&String(e).trim().toLowerCase()}function Rc(e){return e===!1||e==null?e:wt.isArray(e)?e.map(Rc):String(e)}function i2(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const r2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Qh(e,t,n,r,o){if(wt.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!wt.isString(t)){if(wt.isString(r))return t.indexOf(r)!==-1;if(wt.isRegExp(r))return r.test(t)}}function s2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function o2(e,t){const n=wt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,l,c){return this[r].call(this,t,o,l,c)},configurable:!0})})}let Ss=class{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function l(p,m,y){const b=Nu(m);if(!b)throw new Error("header name must be a non-empty string");const w=wt.findKey(o,b);(!w||o[w]===void 0||y===!0||y===void 0&&o[w]!==!1)&&(o[w||m]=Rc(p))}const c=(p,m)=>wt.forEach(p,(y,b)=>l(y,b,m));if(wt.isPlainObject(t)||t instanceof this.constructor)c(t,n);else if(wt.isString(t)&&(t=t.trim())&&!r2(t))c(n2(t),n);else if(wt.isHeaders(t))for(const[p,m]of t.entries())l(m,p,r);else t!=null&&l(n,t,r);return this}get(t,n){if(t=Nu(t),t){const r=wt.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return i2(o);if(wt.isFunction(n))return n.call(this,o,r);if(wt.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Nu(t),t){const r=wt.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Qh(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function l(c){if(c=Nu(c),c){const p=wt.findKey(r,c);p&&(!n||Qh(r,r[p],p,n))&&(delete r[p],o=!0)}}return wt.isArray(t)?t.forEach(l):l(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const l=n[r];(!t||Qh(this,this[l],l,t,!0))&&(delete this[l],o=!0)}return o}normalize(t){const n=this,r={};return wt.forEach(this,(o,l)=>{const c=wt.findKey(r,l);if(c){n[c]=Rc(o),delete n[l];return}const p=t?s2(l):String(l).trim();p!==l&&delete n[l],n[p]=Rc(o),r[p]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return wt.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&wt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[Lp]=this[Lp]={accessors:{}}).accessors,o=this.prototype;function l(c){const p=Nu(c);r[p]||(o2(o,c),r[p]=!0)}return wt.isArray(t)?t.forEach(l):l(t),this}};Ss.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(Ss.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});wt.freezeMethods(Ss);function ef(e,t){const n=this||cc,r=t||n,o=Ss.from(r.headers);let l=r.data;return wt.forEach(e,function(p){l=p.call(n,l,o.normalize(),t?t.status:void 0)}),o.normalize(),l}function ug(e){return!!(e&&e.__CANCEL__)}function Lu(e,t,n){An.call(this,e??"canceled",An.ERR_CANCELED,t,n),this.name="CanceledError"}wt.inherits(Lu,An,{__CANCEL__:!0});function cg(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new An("Request failed with status code "+n.status,[An.ERR_BAD_REQUEST,An.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function a2(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function l2(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,l=0,c;return t=t!==void 0?t:1e3,function(m){const y=Date.now(),b=r[l];c||(c=y),n[o]=m,r[o]=y;let w=l,E=0;for(;w!==o;)E+=n[w++],w=w%e;if(o=(o+1)%e,o===l&&(l=(l+1)%e),y-c<t)return;const C=b&&y-b;return C?Math.round(E*1e3/C):void 0}}function u2(e,t){let n=0,r=1e3/t,o,l;const c=(y,b=Date.now())=>{n=b,o=null,l&&(clearTimeout(l),l=null),e.apply(null,y)};return[(...y)=>{const b=Date.now(),w=b-n;w>=r?c(y,b):(o=y,l||(l=setTimeout(()=>{l=null,c(o)},r-w)))},()=>o&&c(o)]}const eh=(e,t,n=3)=>{let r=0;const o=l2(50,250);return u2(l=>{const c=l.loaded,p=l.lengthComputable?l.total:void 0,m=c-r,y=o(m),b=c<=p;r=c;const w={loaded:c,total:p,progress:p?c/p:void 0,bytes:m,rate:y||void 0,estimated:y&&p&&b?(p-c)/y:void 0,event:l,lengthComputable:p!=null,[t?"download":"upload"]:!0};e(w)},n)},Cp=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},kp=e=>(...t)=>wt.asap(()=>e(...t)),c2=Wr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Wr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Wr.origin),Wr.navigator&&/(msie|trident)/i.test(Wr.navigator.userAgent)):()=>!0,h2=Wr.hasStandardBrowserEnv?{write(e,t,n,r,o,l){const c=[e+"="+encodeURIComponent(t)];wt.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),wt.isString(r)&&c.push("path="+r),wt.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function f2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function d2(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function hg(e,t){return e&&!f2(t)?d2(e,t):t}const Pp=e=>e instanceof Ss?{...e}:e;function $l(e,t){t=t||{};const n={};function r(y,b,w,E){return wt.isPlainObject(y)&&wt.isPlainObject(b)?wt.merge.call({caseless:E},y,b):wt.isPlainObject(b)?wt.merge({},b):wt.isArray(b)?b.slice():b}function o(y,b,w,E){if(wt.isUndefined(b)){if(!wt.isUndefined(y))return r(void 0,y,w,E)}else return r(y,b,w,E)}function l(y,b){if(!wt.isUndefined(b))return r(void 0,b)}function c(y,b){if(wt.isUndefined(b)){if(!wt.isUndefined(y))return r(void 0,y)}else return r(void 0,b)}function p(y,b,w){if(w in t)return r(y,b);if(w in e)return r(void 0,y)}const m={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:p,headers:(y,b,w)=>o(Pp(y),Pp(b),w,!0)};return wt.forEach(Object.keys(Object.assign({},e,t)),function(b){const w=m[b]||o,E=w(e[b],t[b],b);wt.isUndefined(E)&&w!==p||(n[b]=E)}),n}const fg=e=>{const t=$l({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:l,headers:c,auth:p}=t;t.headers=c=Ss.from(c),t.url=og(hg(t.baseURL,t.url),e.params,e.paramsSerializer),p&&c.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let m;if(wt.isFormData(n)){if(Wr.hasStandardBrowserEnv||Wr.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((m=c.getContentType())!==!1){const[y,...b]=m?m.split(";").map(w=>w.trim()).filter(Boolean):[];c.setContentType([y||"multipart/form-data",...b].join("; "))}}if(Wr.hasStandardBrowserEnv&&(r&&wt.isFunction(r)&&(r=r(t)),r||r!==!1&&c2(t.url))){const y=o&&l&&h2.read(l);y&&c.set(o,y)}return t},p2=typeof XMLHttpRequest<"u",m2=p2&&function(e){return new Promise(function(n,r){const o=fg(e);let l=o.data;const c=Ss.from(o.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:y}=o,b,w,E,C,R;function O(){C&&C(),R&&R(),o.cancelToken&&o.cancelToken.unsubscribe(b),o.signal&&o.signal.removeEventListener("abort",b)}let q=new XMLHttpRequest;q.open(o.method.toUpperCase(),o.url,!0),q.timeout=o.timeout;function F(){if(!q)return;const X=Ss.from("getAllResponseHeaders"in q&&q.getAllResponseHeaders()),Pe={data:!p||p==="text"||p==="json"?q.responseText:q.response,status:q.status,statusText:q.statusText,headers:X,config:e,request:q};cg(function(se){n(se),O()},function(se){r(se),O()},Pe),q=null}"onloadend"in q?q.onloadend=F:q.onreadystatechange=function(){!q||q.readyState!==4||q.status===0&&!(q.responseURL&&q.responseURL.indexOf("file:")===0)||setTimeout(F)},q.onabort=function(){q&&(r(new An("Request aborted",An.ECONNABORTED,e,q)),q=null)},q.onerror=function(){r(new An("Network Error",An.ERR_NETWORK,e,q)),q=null},q.ontimeout=function(){let Ce=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Pe=o.transitional||ag;o.timeoutErrorMessage&&(Ce=o.timeoutErrorMessage),r(new An(Ce,Pe.clarifyTimeoutError?An.ETIMEDOUT:An.ECONNABORTED,e,q)),q=null},l===void 0&&c.setContentType(null),"setRequestHeader"in q&&wt.forEach(c.toJSON(),function(Ce,Pe){q.setRequestHeader(Pe,Ce)}),wt.isUndefined(o.withCredentials)||(q.withCredentials=!!o.withCredentials),p&&p!=="json"&&(q.responseType=o.responseType),y&&([E,R]=eh(y,!0),q.addEventListener("progress",E)),m&&q.upload&&([w,C]=eh(m),q.upload.addEventListener("progress",w),q.upload.addEventListener("loadend",C)),(o.cancelToken||o.signal)&&(b=X=>{q&&(r(!X||X.type?new Lu(null,e,q):X),q.abort(),q=null)},o.cancelToken&&o.cancelToken.subscribe(b),o.signal&&(o.signal.aborted?b():o.signal.addEventListener("abort",b)));const G=a2(o.url);if(G&&Wr.protocols.indexOf(G)===-1){r(new An("Unsupported protocol "+G+":",An.ERR_BAD_REQUEST,e));return}q.send(l||null)})},g2=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,o;const l=function(y){if(!o){o=!0,p();const b=y instanceof Error?y:this.reason;r.abort(b instanceof An?b:new Lu(b instanceof Error?b.message:b))}};let c=t&&setTimeout(()=>{c=null,l(new An(`timeout ${t} of ms exceeded`,An.ETIMEDOUT))},t);const p=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),e=null)};e.forEach(y=>y.addEventListener("abort",l));const{signal:m}=r;return m.unsubscribe=()=>wt.asap(p),m}},v2=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,o;for(;r<n;)o=r+t,yield e.slice(r,o),r=o},_2=async function*(e,t){for await(const n of y2(e))yield*v2(n,t)},y2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Sp=(e,t,n,r)=>{const o=_2(e,t);let l=0,c,p=m=>{c||(c=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:y,value:b}=await o.next();if(y){p(),m.close();return}let w=b.byteLength;if(n){let E=l+=w;n(E)}m.enqueue(new Uint8Array(b))}catch(y){throw p(y),y}},cancel(m){return p(m),o.return()}},{highWaterMark:2})},kh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",dg=kh&&typeof ReadableStream=="function",b2=kh&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),pg=(e,...t)=>{try{return!!e(...t)}catch{return!1}},w2=dg&&pg(()=>{let e=!1;const t=new Request(Wr.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ep=64*1024,Nf=dg&&pg(()=>wt.isReadableStream(new Response("").body)),th={stream:Nf&&(e=>e.body)};kh&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!th[t]&&(th[t]=wt.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new An(`Response type '${t}' is not supported`,An.ERR_NOT_SUPPORT,r)})})})(new Response);const x2=async e=>{if(e==null)return 0;if(wt.isBlob(e))return e.size;if(wt.isSpecCompliantForm(e))return(await new Request(Wr.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(wt.isArrayBufferView(e)||wt.isArrayBuffer(e))return e.byteLength;if(wt.isURLSearchParams(e)&&(e=e+""),wt.isString(e))return(await b2(e)).byteLength},L2=async(e,t)=>{const n=wt.toFiniteNumber(e.getContentLength());return n??x2(t)},C2=kh&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:l,timeout:c,onDownloadProgress:p,onUploadProgress:m,responseType:y,headers:b,withCredentials:w="same-origin",fetchOptions:E}=fg(e);y=y?(y+"").toLowerCase():"text";let C=g2([o,l&&l.toAbortSignal()],c),R;const O=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let q;try{if(m&&w2&&n!=="get"&&n!=="head"&&(q=await L2(b,r))!==0){let Pe=new Request(t,{method:"POST",body:r,duplex:"half"}),we;if(wt.isFormData(r)&&(we=Pe.headers.get("content-type"))&&b.setContentType(we),Pe.body){const[se,ue]=Cp(q,eh(kp(m)));r=Sp(Pe.body,Ep,se,ue)}}wt.isString(w)||(w=w?"include":"omit");const F="credentials"in Request.prototype;R=new Request(t,{...E,signal:C,method:n.toUpperCase(),headers:b.normalize().toJSON(),body:r,duplex:"half",credentials:F?w:void 0});let G=await fetch(R);const X=Nf&&(y==="stream"||y==="response");if(Nf&&(p||X&&O)){const Pe={};["status","statusText","headers"].forEach(Be=>{Pe[Be]=G[Be]});const we=wt.toFiniteNumber(G.headers.get("content-length")),[se,ue]=p&&Cp(we,eh(kp(p),!0))||[];G=new Response(Sp(G.body,Ep,se,()=>{ue&&ue(),O&&O()}),Pe)}y=y||"text";let Ce=await th[wt.findKey(th,y)||"text"](G,e);return!X&&O&&O(),await new Promise((Pe,we)=>{cg(Pe,we,{data:Ce,headers:Ss.from(G.headers),status:G.status,statusText:G.statusText,config:e,request:R})})}catch(F){throw O&&O(),F&&F.name==="TypeError"&&/fetch/i.test(F.message)?Object.assign(new An("Network Error",An.ERR_NETWORK,e,R),{cause:F.cause||F}):An.from(F,F&&F.code,e,R)}}),Df={http:jy,xhr:m2,fetch:C2};wt.forEach(Df,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ap=e=>`- ${e}`,k2=e=>wt.isFunction(e)||e===null||e===!1,mg={getAdapter:e=>{e=wt.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let l=0;l<t;l++){n=e[l];let c;if(r=n,!k2(n)&&(r=Df[(c=String(n)).toLowerCase()],r===void 0))throw new An(`Unknown adapter '${c}'`);if(r)break;o[c||"#"+l]=r}if(!r){const l=Object.entries(o).map(([p,m])=>`adapter ${p} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=t?l.length>1?`since :
`+l.map(Ap).join(`
`):" "+Ap(l[0]):"as no adapter specified";throw new An("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:Df};function tf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Lu(null,e)}function Mp(e){return tf(e),e.headers=Ss.from(e.headers),e.data=ef.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),mg.getAdapter(e.adapter||cc.adapter)(e).then(function(r){return tf(e),r.data=ef.call(e,e.transformResponse,r),r.headers=Ss.from(r.headers),r},function(r){return ug(r)||(tf(e),r&&r.response&&(r.response.data=ef.call(e,e.transformResponse,r.response),r.response.headers=Ss.from(r.response.headers))),Promise.reject(r)})}const gg="1.7.9",Ph={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ph[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Bp={};Ph.transitional=function(t,n,r){function o(l,c){return"[Axios v"+gg+"] Transitional option '"+l+"'"+c+(r?". "+r:"")}return(l,c,p)=>{if(t===!1)throw new An(o(c," has been removed"+(n?" in "+n:"")),An.ERR_DEPRECATED);return n&&!Bp[c]&&(Bp[c]=!0,console.warn(o(c," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,c,p):!0}};Ph.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function P2(e,t,n){if(typeof e!="object")throw new An("options must be an object",An.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const l=r[o],c=t[l];if(c){const p=e[l],m=p===void 0||c(p,l,e);if(m!==!0)throw new An("option "+l+" must be "+m,An.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new An("Unknown option "+l,An.ERR_BAD_OPTION)}}const Fc={assertOptions:P2,validators:Ph},ra=Fc.validators;let Fl=class{constructor(t){this.defaults=t,this.interceptors={request:new xp,response:new xp}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=$l(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:l}=n;r!==void 0&&Fc.assertOptions(r,{silentJSONParsing:ra.transitional(ra.boolean),forcedJSONParsing:ra.transitional(ra.boolean),clarifyTimeoutError:ra.transitional(ra.boolean)},!1),o!=null&&(wt.isFunction(o)?n.paramsSerializer={serialize:o}:Fc.assertOptions(o,{encode:ra.function,serialize:ra.function},!0)),Fc.assertOptions(n,{baseUrl:ra.spelling("baseURL"),withXsrfToken:ra.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=l&&wt.merge(l.common,l[n.method]);l&&wt.forEach(["delete","get","head","post","put","patch","common"],R=>{delete l[R]}),n.headers=Ss.concat(c,l);const p=[];let m=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(n)===!1||(m=m&&O.synchronous,p.unshift(O.fulfilled,O.rejected))});const y=[];this.interceptors.response.forEach(function(O){y.push(O.fulfilled,O.rejected)});let b,w=0,E;if(!m){const R=[Mp.bind(this),void 0];for(R.unshift.apply(R,p),R.push.apply(R,y),E=R.length,b=Promise.resolve(n);w<E;)b=b.then(R[w++],R[w++]);return b}E=p.length;let C=n;for(w=0;w<E;){const R=p[w++],O=p[w++];try{C=R(C)}catch(q){O.call(this,q);break}}try{b=Mp.call(this,C)}catch(R){return Promise.reject(R)}for(w=0,E=y.length;w<E;)b=b.then(y[w++],y[w++]);return b}getUri(t){t=$l(this.defaults,t);const n=hg(t.baseURL,t.url);return og(n,t.params,t.paramsSerializer)}};wt.forEach(["delete","get","head","options"],function(t){Fl.prototype[t]=function(n,r){return this.request($l(r||{},{method:t,url:n,data:(r||{}).data}))}});wt.forEach(["post","put","patch"],function(t){function n(r){return function(l,c,p){return this.request($l(p||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Fl.prototype[t]=n(),Fl.prototype[t+"Form"]=n(!0)});let S2=class vg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(o=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](o);r._listeners=null}),this.promise.then=o=>{let l;const c=new Promise(p=>{r.subscribe(p),l=p}).then(o);return c.cancel=function(){r.unsubscribe(l)},c},t(function(l,c,p){r.reason||(r.reason=new Lu(l,c,p),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new vg(function(o){t=o}),cancel:t}}};function E2(e){return function(n){return e.apply(null,n)}}function A2(e){return wt.isObject(e)&&e.isAxiosError===!0}const Of={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Of).forEach(([e,t])=>{Of[t]=e});function _g(e){const t=new Fl(e),n=Zm(Fl.prototype.request,t);return wt.extend(n,Fl.prototype,t,{allOwnKeys:!0}),wt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return _g($l(e,o))},n}const qi=_g(cc);qi.Axios=Fl;qi.CanceledError=Lu;qi.CancelToken=S2;qi.isCancel=ug;qi.VERSION=gg;qi.toFormData=Ch;qi.AxiosError=An;qi.Cancel=qi.CanceledError;qi.all=function(t){return Promise.all(t)};qi.spread=E2;qi.isAxiosError=A2;qi.mergeConfig=$l;qi.AxiosHeaders=Ss;qi.formToJSON=e=>lg(wt.isHTMLForm(e)?new FormData(e):e);qi.getAdapter=mg.getAdapter;qi.HttpStatusCode=Of;qi.default=qi;const{Axios:$k,AxiosError:Vk,CanceledError:Gk,isCancel:Hk,CancelToken:Wk,VERSION:Zk,all:Kk,Cancel:Jk,isAxiosError:Yk,spread:Xk,toFormData:Qk,AxiosHeaders:eP,HttpStatusCode:tP,formToJSON:nP,getAdapter:iP,mergeConfig:rP}=qi,wn=qi.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function yg(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}wn.interceptors.request.use(e=>{const t=yg("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));wn.interceptors.response.use(e=>e,async e=>{var n;const t=e.config;if(((n=e.response)==null?void 0:n.status)===401&&!t._retry){t._retry=!0;try{await us().refreshToken();const o=yg("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,wn(t)}catch(r){console.error("Token refresh failed:",r),window.location.href="/login"}}return Promise.reject(e)});wn.defaults.baseURL="/api";wn.defaults.headers.common["Content-Type"]="application/json";wn.defaults.withCredentials=!0;function nh(e){var r;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}wn.interceptors.request.use(e=>{const t=nh("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));wn.interceptors.response.use(e=>e,async e=>{var r,o;const t=us(),n=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!n._retry&&!((o=n.url)!=null&&o.includes("/token/refresh/"))){n._retry=!0;try{if(!nh("access_token"))throw new Error("No token available");await t.refreshToken();const c=nh("access_token");if(c)return n.headers.Authorization=`Bearer ${c}`,wn(n)}catch(l){console.error("Token refresh failed:",l),await t.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function M2(e,t,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const o=`expires=${r.toUTCString()}`;document.cookie=`${e}=${t};${o};path=/;secure;samesite=Strict`}function Dl(e){if(!e)return"Non spécifié";const t=`${e.first_name} ${e.last_name.toUpperCase()}`;return e.company_name?`${t} (${e.company_name})`:t}const us=_d("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isDealer:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="dealer"},isClient:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var t;return!!((t=e.user)!=null&&t.dealer)}},actions:{async initialize(e){if(console.log("Initializing auth store with state:",e),!e){console.log("No initial state, attempting to restore session...");const n=await this.restoreSession();return this.initialized=!0,n}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const t=await this.restoreSession();return this.initialized=!0,t},async restoreSession(){console.log("Attempting to restore session...");try{if(!nh("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const t=await wn.post("/token/refresh/");return t.data.user?(this.user=t.data.user,this.isAuthenticated=!0,this.mustChangePassword=t.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,t){var n,r,o;try{const l=await wn.post("/token/",{username:e,password:t});if(!l.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${l.data.access}; path=/; secure; samesite=Strict`;const c=await this.fetchUserProfile();return this.user=c,this.isAuthenticated=!0,!0}catch(l){throw this.isAuthenticated=!1,this.user=null,((n=l.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(o=(r=l.response)==null?void 0:r.data)!=null&&o.detail?new Error(l.response.data.detail):l}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await wn.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,t){try{console.log("Attempting to change password...");const n=await wn.post("/users/change_password/",{old_password:e,password:t});return console.log("Password change response:",n.data),this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var e,t,n,r;try{console.log("Attempting to refresh token...");const o=await wn.post("/token/refresh/",{},{withCredentials:!0}),{access:l}=o.data;if(!l)throw new Error("No access token received");return console.log("Token refreshed successfully"),M2("access_token",l,1),this.isAuthenticated=!0,l}catch(o){throw console.error("Error refreshing token:",{status:(e=o.response)==null?void 0:e.status,data:(t=o.response)==null?void 0:t.data}),(((n=o.response)==null?void 0:n.status)===401||((r=o.response)==null?void 0:r.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),o}},async fetchConcessionnaires(){this.loading=!0;try{const e=await wn.get("/users/",{params:{role:"dealer"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la récupération des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,t){this.loading=!0;try{await wn.patch(`/users/${e}/`,{concessionnaire:t}),this.user&&this.user.id===e&&(this.user.dealer=t)}catch(n){throw this.error="Erreur lors de la mise à jour du concessionnaire",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await wn.post("/users/",e)).data}catch(t){throw this.error="Erreur lors de la création de l'utilisateur",t}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await wn.patch(`/users/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(e){var t;this.loading=!0;try{const n=await wn.patch(`/users/${(t=this.user)==null?void 0:t.id}/`,{email:e});return this.user&&(this.user.email=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const su=typeof document<"u";function bg(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function B2(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&bg(e.default)}const ni=Object.assign;function nf(e,t){const n={};for(const r in t){const o=t[r];n[r]=Ro(o)?o.map(e):e(o)}return n}const Wu=()=>{},Ro=Array.isArray,wg=/#/g,T2=/&/g,N2=/\//g,D2=/=/g,O2=/\?/g,xg=/\+/g,I2=/%5B/g,R2=/%5D/g,Lg=/%5E/g,F2=/%60/g,Cg=/%7B/g,j2=/%7C/g,kg=/%7D/g,z2=/%20/g;function xd(e){return encodeURI(""+e).replace(j2,"|").replace(I2,"[").replace(R2,"]")}function U2(e){return xd(e).replace(Cg,"{").replace(kg,"}").replace(Lg,"^")}function If(e){return xd(e).replace(xg,"%2B").replace(z2,"+").replace(wg,"%23").replace(T2,"%26").replace(F2,"`").replace(Cg,"{").replace(kg,"}").replace(Lg,"^")}function q2(e){return If(e).replace(D2,"%3D")}function $2(e){return xd(e).replace(wg,"%23").replace(O2,"%3F")}function V2(e){return e==null?"":$2(e).replace(N2,"%2F")}function nc(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const G2=/\/$/,H2=e=>e.replace(G2,"");function rf(e,t,n="/"){let r,o={},l="",c="";const p=t.indexOf("#");let m=t.indexOf("?");return p<m&&p>=0&&(m=-1),m>-1&&(r=t.slice(0,m),l=t.slice(m+1,p>-1?p:t.length),o=e(l)),p>-1&&(r=r||t.slice(0,p),c=t.slice(p,t.length)),r=J2(r??t,n),{fullPath:r+(l&&"?")+l+c,path:r,query:o,hash:nc(c)}}function W2(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Tp(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Z2(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&yu(t.matched[r],n.matched[o])&&Pg(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function yu(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Pg(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!K2(e[n],t[n]))return!1;return!0}function K2(e,t){return Ro(e)?Np(e,t):Ro(t)?Np(t,e):e===t}function Np(e,t){return Ro(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function J2(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let l=n.length-1,c,p;for(c=0;c<r.length;c++)if(p=r[c],p!==".")if(p==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+r.slice(c).join("/")}const nl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ic;(function(e){e.pop="pop",e.push="push"})(ic||(ic={}));var Zu;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Zu||(Zu={}));function Y2(e){if(!e)if(su){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),H2(e)}const X2=/^[^#]+#/;function Q2(e,t){return e.replace(X2,"#")+t}function e5(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Sh=()=>({left:window.scrollX,top:window.scrollY});function t5(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=e5(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Dp(e,t){return(history.state?history.state.position-t:-1)+e}const Rf=new Map;function n5(e,t){Rf.set(e,t)}function i5(e){const t=Rf.get(e);return Rf.delete(e),t}let r5=()=>location.protocol+"//"+location.host;function Sg(e,t){const{pathname:n,search:r,hash:o}=t,l=e.indexOf("#");if(l>-1){let p=o.includes(e.slice(l))?e.slice(l).length:1,m=o.slice(p);return m[0]!=="/"&&(m="/"+m),Tp(m,"")}return Tp(n,e)+r+o}function s5(e,t,n,r){let o=[],l=[],c=null;const p=({state:E})=>{const C=Sg(e,location),R=n.value,O=t.value;let q=0;if(E){if(n.value=C,t.value=E,c&&c===R){c=null;return}q=O?E.position-O.position:0}else r(C);o.forEach(F=>{F(n.value,R,{delta:q,type:ic.pop,direction:q?q>0?Zu.forward:Zu.back:Zu.unknown})})};function m(){c=n.value}function y(E){o.push(E);const C=()=>{const R=o.indexOf(E);R>-1&&o.splice(R,1)};return l.push(C),C}function b(){const{history:E}=window;E.state&&E.replaceState(ni({},E.state,{scroll:Sh()}),"")}function w(){for(const E of l)E();l=[],window.removeEventListener("popstate",p),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",p),window.addEventListener("beforeunload",b,{passive:!0}),{pauseListeners:m,listen:y,destroy:w}}function Op(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?Sh():null}}function o5(e){const{history:t,location:n}=window,r={value:Sg(e,n)},o={value:t.state};o.value||l(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function l(m,y,b){const w=e.indexOf("#"),E=w>-1?(n.host&&document.querySelector("base")?e:e.slice(w))+m:r5()+e+m;try{t[b?"replaceState":"pushState"](y,"",E),o.value=y}catch(C){console.error(C),n[b?"replace":"assign"](E)}}function c(m,y){const b=ni({},t.state,Op(o.value.back,m,o.value.forward,!0),y,{position:o.value.position});l(m,b,!0),r.value=m}function p(m,y){const b=ni({},o.value,t.state,{forward:m,scroll:Sh()});l(b.current,b,!0);const w=ni({},Op(r.value,m,null),{position:b.position+1},y);l(m,w,!1),r.value=m}return{location:r,state:o,push:p,replace:c}}function a5(e){e=Y2(e);const t=o5(e),n=s5(e,t.state,t.location,t.replace);function r(l,c=!0){c||n.pauseListeners(),history.go(l)}const o=ni({location:"",base:e,go:r,createHref:Q2.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function l5(e){return typeof e=="string"||e&&typeof e=="object"}function Eg(e){return typeof e=="string"||typeof e=="symbol"}const Ag=Symbol("");var Ip;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Ip||(Ip={}));function bu(e,t){return ni(new Error,{type:e,[Ag]:!0},t)}function Ma(e,t){return e instanceof Error&&Ag in e&&(t==null||!!(e.type&t))}const Rp="[^/]+?",u5={sensitive:!1,strict:!1,start:!0,end:!0},c5=/[.+*?^${}()[\]/\\]/g;function h5(e,t){const n=ni({},u5,t),r=[];let o=n.start?"^":"";const l=[];for(const y of e){const b=y.length?[]:[90];n.strict&&!y.length&&(o+="/");for(let w=0;w<y.length;w++){const E=y[w];let C=40+(n.sensitive?.25:0);if(E.type===0)w||(o+="/"),o+=E.value.replace(c5,"\\$&"),C+=40;else if(E.type===1){const{value:R,repeatable:O,optional:q,regexp:F}=E;l.push({name:R,repeatable:O,optional:q});const G=F||Rp;if(G!==Rp){C+=10;try{new RegExp(`(${G})`)}catch(Ce){throw new Error(`Invalid custom RegExp for param "${R}" (${G}): `+Ce.message)}}let X=O?`((?:${G})(?:/(?:${G}))*)`:`(${G})`;w||(X=q&&y.length<2?`(?:/${X})`:"/"+X),q&&(X+="?"),o+=X,C+=20,q&&(C+=-8),O&&(C+=-20),G===".*"&&(C+=-50)}b.push(C)}r.push(b)}if(n.strict&&n.end){const y=r.length-1;r[y][r[y].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const c=new RegExp(o,n.sensitive?"":"i");function p(y){const b=y.match(c),w={};if(!b)return null;for(let E=1;E<b.length;E++){const C=b[E]||"",R=l[E-1];w[R.name]=C&&R.repeatable?C.split("/"):C}return w}function m(y){let b="",w=!1;for(const E of e){(!w||!b.endsWith("/"))&&(b+="/"),w=!1;for(const C of E)if(C.type===0)b+=C.value;else if(C.type===1){const{value:R,repeatable:O,optional:q}=C,F=R in y?y[R]:"";if(Ro(F)&&!O)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const G=Ro(F)?F.join("/"):F;if(!G)if(q)E.length<2&&(b.endsWith("/")?b=b.slice(0,-1):w=!0);else throw new Error(`Missing required param "${R}"`);b+=G}}return b||"/"}return{re:c,score:r,keys:l,parse:p,stringify:m}}function f5(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Mg(e,t){let n=0;const r=e.score,o=t.score;for(;n<r.length&&n<o.length;){const l=f5(r[n],o[n]);if(l)return l;n++}if(Math.abs(o.length-r.length)===1){if(Fp(r))return 1;if(Fp(o))return-1}return o.length-r.length}function Fp(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const d5={type:0,value:""},p5=/[a-zA-Z0-9_]/;function m5(e){if(!e)return[[]];if(e==="/")return[[d5]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(C){throw new Error(`ERR (${n})/"${y}": ${C}`)}let n=0,r=n;const o=[];let l;function c(){l&&o.push(l),l=[]}let p=0,m,y="",b="";function w(){y&&(n===0?l.push({type:0,value:y}):n===1||n===2||n===3?(l.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:y,regexp:b,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),y="")}function E(){y+=m}for(;p<e.length;){if(m=e[p++],m==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:m==="/"?(y&&w(),c()):m===":"?(w(),n=1):E();break;case 4:E(),n=r;break;case 1:m==="("?n=2:p5.test(m)?E():(w(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&p--);break;case 2:m===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+m:n=3:b+=m;break;case 3:w(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&p--,b="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${y}"`),w(),c(),o}function g5(e,t,n){const r=h5(m5(e.path),n),o=ni(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function v5(e,t){const n=[],r=new Map;t=qp({strict:!1,end:!0,sensitive:!1},t);function o(w){return r.get(w)}function l(w,E,C){const R=!C,O=zp(w);O.aliasOf=C&&C.record;const q=qp(t,w),F=[O];if("alias"in w){const Ce=typeof w.alias=="string"?[w.alias]:w.alias;for(const Pe of Ce)F.push(zp(ni({},O,{components:C?C.record.components:O.components,path:Pe,aliasOf:C?C.record:O})))}let G,X;for(const Ce of F){const{path:Pe}=Ce;if(E&&Pe[0]!=="/"){const we=E.record.path,se=we[we.length-1]==="/"?"":"/";Ce.path=E.record.path+(Pe&&se+Pe)}if(G=g5(Ce,E,q),C?C.alias.push(G):(X=X||G,X!==G&&X.alias.push(G),R&&w.name&&!Up(G)&&c(w.name)),Bg(G)&&m(G),O.children){const we=O.children;for(let se=0;se<we.length;se++)l(we[se],G,C&&C.children[se])}C=C||G}return X?()=>{c(X)}:Wu}function c(w){if(Eg(w)){const E=r.get(w);E&&(r.delete(w),n.splice(n.indexOf(E),1),E.children.forEach(c),E.alias.forEach(c))}else{const E=n.indexOf(w);E>-1&&(n.splice(E,1),w.record.name&&r.delete(w.record.name),w.children.forEach(c),w.alias.forEach(c))}}function p(){return n}function m(w){const E=b5(w,n);n.splice(E,0,w),w.record.name&&!Up(w)&&r.set(w.record.name,w)}function y(w,E){let C,R={},O,q;if("name"in w&&w.name){if(C=r.get(w.name),!C)throw bu(1,{location:w});q=C.record.name,R=ni(jp(E.params,C.keys.filter(X=>!X.optional).concat(C.parent?C.parent.keys.filter(X=>X.optional):[]).map(X=>X.name)),w.params&&jp(w.params,C.keys.map(X=>X.name))),O=C.stringify(R)}else if(w.path!=null)O=w.path,C=n.find(X=>X.re.test(O)),C&&(R=C.parse(O),q=C.record.name);else{if(C=E.name?r.get(E.name):n.find(X=>X.re.test(E.path)),!C)throw bu(1,{location:w,currentLocation:E});q=C.record.name,R=ni({},E.params,w.params),O=C.stringify(R)}const F=[];let G=C;for(;G;)F.unshift(G.record),G=G.parent;return{name:q,path:O,params:R,matched:F,meta:y5(F)}}e.forEach(w=>l(w));function b(){n.length=0,r.clear()}return{addRoute:l,resolve:y,removeRoute:c,clearRoutes:b,getRoutes:p,getRecordMatcher:o}}function jp(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function zp(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:_5(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function _5(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Up(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function y5(e){return e.reduce((t,n)=>ni(t,n.meta),{})}function qp(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function b5(e,t){let n=0,r=t.length;for(;n!==r;){const l=n+r>>1;Mg(e,t[l])<0?r=l:n=l+1}const o=w5(e);return o&&(r=t.lastIndexOf(o,r-1)),r}function w5(e){let t=e;for(;t=t.parent;)if(Bg(t)&&Mg(e,t)===0)return t}function Bg({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function x5(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const l=r[o].replace(xg," "),c=l.indexOf("="),p=nc(c<0?l:l.slice(0,c)),m=c<0?null:nc(l.slice(c+1));if(p in t){let y=t[p];Ro(y)||(y=t[p]=[y]),y.push(m)}else t[p]=m}return t}function $p(e){let t="";for(let n in e){const r=e[n];if(n=q2(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ro(r)?r.map(l=>l&&If(l)):[r&&If(r)]).forEach(l=>{l!==void 0&&(t+=(t.length?"&":"")+n,l!=null&&(t+="="+l))})}return t}function L5(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Ro(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return t}const C5=Symbol(""),Vp=Symbol(""),Eh=Symbol(""),Ld=Symbol(""),Ff=Symbol("");function Du(){let e=[];function t(r){return e.push(r),()=>{const o=e.indexOf(r);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ll(e,t,n,r,o,l=c=>c()){const c=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((p,m)=>{const y=E=>{E===!1?m(bu(4,{from:n,to:t})):E instanceof Error?m(E):l5(E)?m(bu(2,{from:t,to:E})):(c&&r.enterCallbacks[o]===c&&typeof E=="function"&&c.push(E),p())},b=l(()=>e.call(r&&r.instances[o],t,n,y));let w=Promise.resolve(b);e.length<3&&(w=w.then(y)),w.catch(E=>m(E))})}function sf(e,t,n,r,o=l=>l()){const l=[];for(const c of e)for(const p in c.components){let m=c.components[p];if(!(t!=="beforeRouteEnter"&&!c.instances[p]))if(bg(m)){const b=(m.__vccOpts||m)[t];b&&l.push(ll(b,n,r,c,p,o))}else{let y=m();l.push(()=>y.then(b=>{if(!b)throw new Error(`Couldn't resolve component "${p}" at "${c.path}"`);const w=B2(b)?b.default:b;c.mods[p]=b,c.components[p]=w;const C=(w.__vccOpts||w)[t];return C&&ll(C,n,r,c,p,o)()}))}}return l}function Gp(e){const t=fo(Eh),n=fo(Ld),r=Tn(()=>{const m=Cn(e.to);return t.resolve(m)}),o=Tn(()=>{const{matched:m}=r.value,{length:y}=m,b=m[y-1],w=n.matched;if(!b||!w.length)return-1;const E=w.findIndex(yu.bind(null,b));if(E>-1)return E;const C=Hp(m[y-2]);return y>1&&Hp(b)===C&&w[w.length-1].path!==C?w.findIndex(yu.bind(null,m[y-2])):E}),l=Tn(()=>o.value>-1&&E5(n.params,r.value.params)),c=Tn(()=>o.value>-1&&o.value===n.matched.length-1&&Pg(n.params,r.value.params));function p(m={}){if(S5(m)){const y=t[Cn(e.replace)?"replace":"push"](Cn(e.to)).catch(Wu);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>y),y}return Promise.resolve()}return{route:r,href:Tn(()=>r.value.href),isActive:l,isExactActive:c,navigate:p}}function k5(e){return e.length===1?e[0]:e}const P5=Es({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Gp,setup(e,{slots:t}){const n=Fa(Gp(e)),{options:r}=fo(Eh),o=Tn(()=>({[Wp(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Wp(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=t.default&&k5(t.default(n));return e.custom?l:jm("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},l)}}}),ou=P5;function S5(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function E5(e,t){for(const n in t){const r=t[n],o=e[n];if(typeof r=="string"){if(r!==o)return!1}else if(!Ro(o)||o.length!==r.length||r.some((l,c)=>l!==o[c]))return!1}return!0}function Hp(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Wp=(e,t,n)=>e??t??n,A5=Es({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=fo(Ff),o=Tn(()=>e.route||r.value),l=fo(Vp,0),c=Tn(()=>{let y=Cn(l);const{matched:b}=o.value;let w;for(;(w=b[y])&&!w.components;)y++;return y}),p=Tn(()=>o.value.matched[c.value]);Tc(Vp,Tn(()=>c.value+1)),Tc(C5,p),Tc(Ff,o);const m=It();return ls(()=>[m.value,p.value,e.name],([y,b,w],[E,C,R])=>{b&&(b.instances[w]=y,C&&C!==b&&y&&y===E&&(b.leaveGuards.size||(b.leaveGuards=C.leaveGuards),b.updateGuards.size||(b.updateGuards=C.updateGuards))),y&&b&&(!C||!yu(b,C)||!E)&&(b.enterCallbacks[w]||[]).forEach(O=>O(y))},{flush:"post"}),()=>{const y=o.value,b=e.name,w=p.value,E=w&&w.components[b];if(!E)return Zp(n.default,{Component:E,route:y});const C=w.props[b],R=C?C===!0?y.params:typeof C=="function"?C(y):C:null,q=jm(E,ni({},R,t,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(w.instances[b]=null)},ref:m}));return Zp(n.default,{Component:q,route:y})||q}}});function Zp(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Tg=A5;function M5(e){const t=v5(e.routes,e),n=e.parseQuery||x5,r=e.stringifyQuery||$p,o=e.history,l=Du(),c=Du(),p=Du(),m=tv(nl);let y=nl;su&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=nf.bind(null,de=>""+de),w=nf.bind(null,V2),E=nf.bind(null,nc);function C(de,Se){let Ae,Ke;return Eg(de)?(Ae=t.getRecordMatcher(de),Ke=Se):Ke=de,t.addRoute(Ke,Ae)}function R(de){const Se=t.getRecordMatcher(de);Se&&t.removeRoute(Se)}function O(){return t.getRoutes().map(de=>de.record)}function q(de){return!!t.getRecordMatcher(de)}function F(de,Se){if(Se=ni({},Se||m.value),typeof de=="string"){const Re=rf(n,de,Se.path),De=t.resolve({path:Re.path},Se),le=o.createHref(Re.fullPath);return ni(Re,De,{params:E(De.params),hash:nc(Re.hash),redirectedFrom:void 0,href:le})}let Ae;if(de.path!=null)Ae=ni({},de,{path:rf(n,de.path,Se.path).path});else{const Re=ni({},de.params);for(const De in Re)Re[De]==null&&delete Re[De];Ae=ni({},de,{params:w(Re)}),Se.params=w(Se.params)}const Ke=t.resolve(Ae,Se),rt=de.hash||"";Ke.params=b(E(Ke.params));const ne=W2(r,ni({},de,{hash:U2(rt),path:Ke.path})),ce=o.createHref(ne);return ni({fullPath:ne,hash:rt,query:r===$p?L5(de.query):de.query||{}},Ke,{redirectedFrom:void 0,href:ce})}function G(de){return typeof de=="string"?rf(n,de,m.value.path):ni({},de)}function X(de,Se){if(y!==de)return bu(8,{from:Se,to:de})}function Ce(de){return se(de)}function Pe(de){return Ce(ni(G(de),{replace:!0}))}function we(de){const Se=de.matched[de.matched.length-1];if(Se&&Se.redirect){const{redirect:Ae}=Se;let Ke=typeof Ae=="function"?Ae(de):Ae;return typeof Ke=="string"&&(Ke=Ke.includes("?")||Ke.includes("#")?Ke=G(Ke):{path:Ke},Ke.params={}),ni({query:de.query,hash:de.hash,params:Ke.path!=null?{}:de.params},Ke)}}function se(de,Se){const Ae=y=F(de),Ke=m.value,rt=de.state,ne=de.force,ce=de.replace===!0,Re=we(Ae);if(Re)return se(ni(G(Re),{state:typeof Re=="object"?ni({},rt,Re.state):rt,force:ne,replace:ce}),Se||Ae);const De=Ae;De.redirectedFrom=Se;let le;return!ne&&Z2(r,Ke,Ae)&&(le=bu(16,{to:De,from:Ke}),Ie(Ke,Ke,!0,!1)),(le?Promise.resolve(le):Je(De,Ke)).catch(Ve=>Ma(Ve)?Ma(Ve,2)?Ve:Y(Ve):V(Ve,De,Ke)).then(Ve=>{if(Ve){if(Ma(Ve,2))return se(ni({replace:ce},G(Ve.to),{state:typeof Ve.to=="object"?ni({},rt,Ve.to.state):rt,force:ne}),Se||De)}else Ve=J(De,Ke,!0,ce,rt);return $(De,Ke,Ve),Ve})}function ue(de,Se){const Ae=X(de,Se);return Ae?Promise.reject(Ae):Promise.resolve()}function Be(de){const Se=he.values().next().value;return Se&&typeof Se.runWithContext=="function"?Se.runWithContext(de):de()}function Je(de,Se){let Ae;const[Ke,rt,ne]=B5(de,Se);Ae=sf(Ke.reverse(),"beforeRouteLeave",de,Se);for(const Re of Ke)Re.leaveGuards.forEach(De=>{Ae.push(ll(De,de,Se))});const ce=ue.bind(null,de,Se);return Ae.push(ce),Le(Ae).then(()=>{Ae=[];for(const Re of l.list())Ae.push(ll(Re,de,Se));return Ae.push(ce),Le(Ae)}).then(()=>{Ae=sf(rt,"beforeRouteUpdate",de,Se);for(const Re of rt)Re.updateGuards.forEach(De=>{Ae.push(ll(De,de,Se))});return Ae.push(ce),Le(Ae)}).then(()=>{Ae=[];for(const Re of ne)if(Re.beforeEnter)if(Ro(Re.beforeEnter))for(const De of Re.beforeEnter)Ae.push(ll(De,de,Se));else Ae.push(ll(Re.beforeEnter,de,Se));return Ae.push(ce),Le(Ae)}).then(()=>(de.matched.forEach(Re=>Re.enterCallbacks={}),Ae=sf(ne,"beforeRouteEnter",de,Se,Be),Ae.push(ce),Le(Ae))).then(()=>{Ae=[];for(const Re of c.list())Ae.push(ll(Re,de,Se));return Ae.push(ce),Le(Ae)}).catch(Re=>Ma(Re,8)?Re:Promise.reject(Re))}function $(de,Se,Ae){p.list().forEach(Ke=>Be(()=>Ke(de,Se,Ae)))}function J(de,Se,Ae,Ke,rt){const ne=X(de,Se);if(ne)return ne;const ce=Se===nl,Re=su?history.state:{};Ae&&(Ke||ce?o.replace(de.fullPath,ni({scroll:ce&&Re&&Re.scroll},rt)):o.push(de.fullPath,rt)),m.value=de,Ie(de,Se,Ae,ce),Y()}let I;function te(){I||(I=o.listen((de,Se,Ae)=>{if(!_e.listening)return;const Ke=F(de),rt=we(Ke);if(rt){se(ni(rt,{replace:!0,force:!0}),Ke).catch(Wu);return}y=Ke;const ne=m.value;su&&n5(Dp(ne.fullPath,Ae.delta),Sh()),Je(Ke,ne).catch(ce=>Ma(ce,12)?ce:Ma(ce,2)?(se(ni(G(ce.to),{force:!0}),Ke).then(Re=>{Ma(Re,20)&&!Ae.delta&&Ae.type===ic.pop&&o.go(-1,!1)}).catch(Wu),Promise.reject()):(Ae.delta&&o.go(-Ae.delta,!1),V(ce,Ke,ne))).then(ce=>{ce=ce||J(Ke,ne,!1),ce&&(Ae.delta&&!Ma(ce,8)?o.go(-Ae.delta,!1):Ae.type===ic.pop&&Ma(ce,20)&&o.go(-1,!1)),$(Ke,ne,ce)}).catch(Wu)}))}let Z=Du(),ee=Du(),ve;function V(de,Se,Ae){Y(de);const Ke=ee.list();return Ke.length?Ke.forEach(rt=>rt(de,Se,Ae)):console.error(de),Promise.reject(de)}function j(){return ve&&m.value!==nl?Promise.resolve():new Promise((de,Se)=>{Z.add([de,Se])})}function Y(de){return ve||(ve=!de,te(),Z.list().forEach(([Se,Ae])=>de?Ae(de):Se()),Z.reset()),de}function Ie(de,Se,Ae,Ke){const{scrollBehavior:rt}=e;if(!su||!rt)return Promise.resolve();const ne=!Ae&&i5(Dp(de.fullPath,0))||(Ke||!Ae)&&history.state&&history.state.scroll||null;return ac().then(()=>rt(de,Se,ne)).then(ce=>ce&&t5(ce)).catch(ce=>V(ce,de,Se))}const D=de=>o.go(de);let K;const he=new Set,_e={currentRoute:m,listening:!0,addRoute:C,removeRoute:R,clearRoutes:t.clearRoutes,hasRoute:q,getRoutes:O,resolve:F,options:e,push:Ce,replace:Pe,go:D,back:()=>D(-1),forward:()=>D(1),beforeEach:l.add,beforeResolve:c.add,afterEach:p.add,onError:ee.add,isReady:j,install(de){const Se=this;de.component("RouterLink",ou),de.component("RouterView",Tg),de.config.globalProperties.$router=Se,Object.defineProperty(de.config.globalProperties,"$route",{enumerable:!0,get:()=>Cn(m)}),su&&!K&&m.value===nl&&(K=!0,Ce(o.location).catch(rt=>{}));const Ae={};for(const rt in nl)Object.defineProperty(Ae,rt,{get:()=>m.value[rt],enumerable:!0});de.provide(Eh,Se),de.provide(Ld,sm(Ae)),de.provide(Ff,m);const Ke=de.unmount;he.add(de),de.unmount=function(){he.delete(de),he.size<1&&(y=nl,I&&I(),I=null,m.value=nl,K=!1,ve=!1),Ke()}}};function Le(de){return de.reduce((Se,Ae)=>Se.then(()=>Be(Ae)),Promise.resolve())}return _e}function B5(e,t){const n=[],r=[],o=[],l=Math.max(t.matched.length,e.matched.length);for(let c=0;c<l;c++){const p=t.matched[c];p&&(e.matched.find(y=>yu(y,p))?r.push(p):n.push(p));const m=e.matched[c];m&&(t.matched.find(y=>yu(y,m))||o.push(m))}return[n,r,o]}function hc(){return fo(Eh)}function sP(e){return fo(Ld)}var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ng(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Dg=T5,N5=typeof co=="object"&&co&&co.Object===Object&&co,D5=N5,O5=D5,I5=typeof self=="object"&&self&&self.Object===Object&&self,R5=O5||I5||Function("return this")(),Og=R5,F5=Og,j5=function(){return F5.Date.now()},z5=j5,U5=/\s/;function q5(e){for(var t=e.length;t--&&U5.test(e.charAt(t)););return t}var $5=q5,V5=$5,G5=/^\s+/;function H5(e){return e&&e.slice(0,V5(e)+1).replace(G5,"")}var W5=H5,Z5=Og,K5=Z5.Symbol,Ig=K5,Kp=Ig,Rg=Object.prototype,J5=Rg.hasOwnProperty,Y5=Rg.toString,Ou=Kp?Kp.toStringTag:void 0;function X5(e){var t=J5.call(e,Ou),n=e[Ou];try{e[Ou]=void 0;var r=!0}catch{}var o=Y5.call(e);return r&&(t?e[Ou]=n:delete e[Ou]),o}var Q5=X5,e4=Object.prototype,t4=e4.toString;function n4(e){return t4.call(e)}var i4=n4,Jp=Ig,r4=Q5,s4=i4,o4="[object Null]",a4="[object Undefined]",Yp=Jp?Jp.toStringTag:void 0;function l4(e){return e==null?e===void 0?a4:o4:Yp&&Yp in Object(e)?r4(e):s4(e)}var u4=l4;function c4(e){return e!=null&&typeof e=="object"}var h4=c4,f4=u4,d4=h4,p4="[object Symbol]";function m4(e){return typeof e=="symbol"||d4(e)&&f4(e)==p4}var g4=m4,v4=W5,Xp=Dg,_4=g4,Qp=NaN,y4=/^[-+]0x[0-9a-f]+$/i,b4=/^0b[01]+$/i,w4=/^0o[0-7]+$/i,x4=parseInt;function L4(e){if(typeof e=="number")return e;if(_4(e))return Qp;if(Xp(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Xp(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=v4(e);var n=b4.test(e);return n||w4.test(e)?x4(e.slice(2),n?2:8):y4.test(e)?Qp:+e}var C4=L4,k4=Dg,of=z5,e0=C4,P4="Expected a function",S4=Math.max,E4=Math.min;function A4(e,t,n){var r,o,l,c,p,m,y=0,b=!1,w=!1,E=!0;if(typeof e!="function")throw new TypeError(P4);t=e0(t)||0,k4(n)&&(b=!!n.leading,w="maxWait"in n,l=w?S4(e0(n.maxWait)||0,t):l,E="trailing"in n?!!n.trailing:E);function C(we){var se=r,ue=o;return r=o=void 0,y=we,c=e.apply(ue,se),c}function R(we){return y=we,p=setTimeout(F,t),b?C(we):c}function O(we){var se=we-m,ue=we-y,Be=t-se;return w?E4(Be,l-ue):Be}function q(we){var se=we-m,ue=we-y;return m===void 0||se>=t||se<0||w&&ue>=l}function F(){var we=of();if(q(we))return G(we);p=setTimeout(F,O(we))}function G(we){return p=void 0,E&&r?C(we):(r=o=void 0,c)}function X(){p!==void 0&&clearTimeout(p),y=0,r=m=o=p=void 0}function Ce(){return p===void 0?c:G(of())}function Pe(){var we=of(),se=q(we);if(r=arguments,o=this,m=we,se){if(p===void 0)return R(m);if(w)return clearTimeout(p),p=setTimeout(F,t),C(m)}return p===void 0&&(p=setTimeout(F,t)),c}return Pe.cancel=X,Pe.flush=Ce,Pe}var M4=A4;const B4=Ng(M4),T4={class:"relative w-full"},N4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},D4=["onClick"],O4=Es({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=It(""),r=It([]),o=t,l=B4(async m=>{if(m.length<3){r.value=[];return}try{const b=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(m)}`)).json();r.value=b}catch(y){console.error("Erreur lors de la recherche d'adresse:",y),r.value=[]}},300);function c(){l(n.value)}function p(m){n.value=m.display_name,r.value=[],o("select-location",{lat:parseFloat(m.lat),lng:parseFloat(m.lon)})}return(m,y)=>(ut(),dt("div",T4,[Fn(B("input",{"onUpdate:modelValue":y[0]||(y[0]=b=>n.value=b),onInput:c,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Mi,n.value]]),r.value.length>0?(ut(),dt("div",N4,[(ut(!0),dt(En,null,Hn(r.value,b=>(ut(),dt("div",{key:b.place_id,onClick:w=>p(b),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},kt(b.display_name),9,D4))),128))])):on("",!0)]))}}),Fg=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},t0=Fg(O4,[["__scopeId","data-v-0102bcad"]]),I4={class:"h-screen flex flex-col"},R4={key:0,class:"bg-white shadow-sm z-[2000]"},F4={class:"mx-auto px-4 sm:px-6 lg:px-8"},j4={class:"flex h-16 items-center justify-between"},z4={class:"flex items-center space-x-8"},U4={class:"hidden md:flex space-x-6"},q4={key:0,class:"hidden md:block flex-1 mx-8"},$4={key:1,class:"flex-1"},V4={class:"flex items-center space-x-2 md:space-x-4"},G4={class:"flex md:hidden"},H4={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},W4={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Z4={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},K4={class:"relative"},J4={class:"hidden md:flex flex-col items-end"},Y4={class:"text-sm font-medium text-gray-700"},X4={key:0,class:"text-xs text-gray-500"},Q4=["src","alt"],eb={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},tb={class:"md:hidden px-4 py-2 border-b border-gray-100"},nb={class:"text-sm font-medium text-gray-700"},ib={class:"text-xs text-gray-500"},rb={key:0,class:"md:hidden"},sb={class:"space-y-1 px-2 pb-3 pt-2"},ob={key:0,class:"px-4 py-3"},ab={class:"flex-1 overflow-auto"},lb={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},ub=Es({__name:"App",setup(e){const t=hc(),n=us(),r=It(!1),o=It(!1),l=It(!1);function c(){l.value=window.innerWidth<768}Ra(()=>{c(),window.addEventListener("resize",c)}),md(()=>{window.removeEventListener("resize",c)});const p=Tn(()=>{const G=n.user;if(!G)return"";const X=`${G.first_name} ${G.last_name.toUpperCase()}`;return G.company_name?`${X} (${G.company_name})`:X}),m=Tn(()=>{var X;const G=(X=n.user)==null?void 0:X.user_type;switch(console.log("User type:",G),G){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),y=Tn(()=>{var G;return((G=n.user)==null?void 0:G.user_type)==="admin"}),b=It(""),w=Tn(()=>n.isAuthenticated),E=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],C=Tn(()=>{var X;if(!w.value)return[];const G=[...E];return y.value?G.push({name:"Utilisateurs",to:"/users"}):((X=n.user)==null?void 0:X.user_type)==="dealer"&&G.push({name:"Clients",to:"/clients"}),G}),R=Tn(()=>w.value?[{name:"Mon profil",to:"/profile"}]:[]);async function O(){try{await n.logout(),t.push("/login")}catch(G){console.error("Erreur lors de la déconnexion:",G)}}function q(G){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:G.lat,lng:G.lng,zoom:16}}))}Ra(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(G){console.error("Auth check error:",G),t.push("/login")}});const F=Tn(()=>{const G="IrrigationDesign";if(!w.value)return`${G} - Connexion`;const X=t.currentRoute.value,Pe={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[X.name]||"";return Pe?`${G} - ${Pe}`:G});return ls(F,G=>{document.title=G},{immediate:!0}),(G,X)=>(ut(),dt("div",I4,[w.value?(ut(),dt("header",R4,[B("nav",F4,[B("div",j4,[B("div",z4,[Ni(Cn(ou),{to:"/",class:"text-xl font-semibold text-primary-600 truncate"},{default:Bl(()=>X[4]||(X[4]=[B("span",{class:"md:inline hidden"},"IrrigationDesign",-1),B("span",{class:"md:hidden inline"},"ID",-1)])),_:1}),B("div",U4,[(ut(!0),dt(En,null,Hn(C.value,Ce=>(ut(),Ia(Cn(ou),{key:Ce.name,to:Ce.to,class:Kr(["text-sm font-medium transition-colors duration-200",[G.$route.path===Ce.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Bl(()=>[_i(kt(Ce.name),1)]),_:2},1032,["to","class"]))),128))])]),G.$route.path==="/"?(ut(),dt("div",q4,[Ni(t0,{onSelectLocation:q})])):(ut(),dt("div",$4)),B("div",V4,[B("div",G4,[B("button",{onClick:X[0]||(X[0]=Ce=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[X[5]||(X[5]=B("span",{class:"sr-only"},"Ouvrir le menu",-1)),(ut(),dt("svg",H4,[o.value?(ut(),dt("path",Z4)):(ut(),dt("path",W4))]))])]),X[6]||(X[6]=B("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[B("span",{class:"sr-only"},"Voir les notifications"),B("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),B("div",K4,[B("button",{onClick:X[1]||(X[1]=Ce=>r.value=!r.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[B("div",J4,[B("span",Y4,kt(p.value),1),m.value?(ut(),dt("span",X4,kt(m.value),1)):on("",!0)]),B("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:b.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(p.value),alt:p.value},null,8,Q4)]),r.value?(ut(),dt("div",eb,[B("div",tb,[B("div",nb,kt(p.value),1),B("div",ib,kt(m.value),1)]),(ut(!0),dt(En,null,Hn(R.value,Ce=>(ut(),Ia(Cn(ou),{key:Ce.name,to:Ce.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:X[2]||(X[2]=Pe=>r.value=!1)},{default:Bl(()=>[_i(kt(Ce.name),1)]),_:2},1032,["to"]))),128)),B("button",{onClick:O,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):on("",!0)])])]),o.value?(ut(),dt("div",rb,[B("div",sb,[(ut(!0),dt(En,null,Hn(C.value,Ce=>(ut(),Ia(Cn(ou),{key:Ce.name,to:Ce.to,class:Kr(["block px-3 py-2 rounded-md text-base font-medium",[G.$route.path===Ce.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:X[3]||(X[3]=Pe=>o.value=!1)},{default:Bl(()=>[_i(kt(Ce.name),1)]),_:2},1032,["to","class"]))),128))]),G.$route.path==="/"?(ut(),dt("div",ob,[Ni(t0,{onSelectLocation:q})])):on("",!0)])):on("",!0)])])):on("",!0),B("main",ab,[l.value&&G.$route.path==="/"?(ut(),dt("div",lb,[X[8]||(X[8]=B("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),X[9]||(X[9]=B("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommandée ",-1)),X[10]||(X[10]=B("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure expérience de conception d'irrigation, nous vous recommandons d'utiliser un écran plus large ou un ordinateur. ",-1)),Ni(Cn(ou),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Bl(()=>X[7]||(X[7]=[_i(" Voir mes plans ")])),_:1})])):(ut(),Ia(Cn(Tg),{key:1}))])]))}}),cb="modulepreload",hb=function(e){return"/static/frontend/"+e},n0={},Ol=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(n.map(m=>{if(m=hb(m),m in n0)return;n0[m]=!0;const y=m.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":cb,y||(w.as="script"),w.crossOrigin="",w.href=m,p&&w.setAttribute("nonce",p),document.head.appendChild(w),y)return new Promise((E,C)=>{w.addEventListener("load",E),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=c,window.dispatchEvent(p),!p.defaultPrevented)throw c}return o.then(c=>{for(const p of c||[])p.status==="rejected"&&l(p.reason);return t().catch(l)})},fb={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},db={class:"max-w-md w-full space-y-8"},pb={class:"space-y-4"},mb={class:"mt-1"},gb={class:"mt-1"},vb={class:"mt-1"},_b={key:0,class:"rounded-md bg-red-50 p-4"},yb={class:"flex"},bb={class:"ml-3"},wb={class:"text-sm font-medium text-red-800"},xb={key:1,class:"rounded-md bg-yellow-50 p-4"},Lb={class:"flex"},Cb={class:"ml-3"},kb={class:"mt-2 text-sm text-yellow-700"},Pb={class:"list-disc pl-5 space-y-1"},Sb=["disabled"],Eb={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Ab={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Mb={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Bb=Es({__name:"ChangePasswordForm",setup(e){const t=hc(),n=us(),r=Fa({oldPassword:"",newPassword:"",confirmPassword:""}),o=It(!1),l=It("");Ra(()=>{var y,b;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(y=n.user)==null?void 0:y.id,mustChangePassword:(b=n.user)==null?void 0:b.must_change_password})});const c=Tn(()=>{const y=[];return r.newPassword&&r.newPassword.length<8&&y.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&y.push("Les mots de passe ne correspondent pas"),y}),p=Tn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function m(){var y,b,w,E,C,R,O,q;if(!p.value){l.value="Veuillez corriger les erreurs avant de continuer";return}if(!((y=n.user)!=null&&y.id)){l.value="Erreur : utilisateur non identifié";return}o.value=!0,l.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),t.push("/")}catch(F){console.error("Password change failed:",F),(w=(b=F.response)==null?void 0:b.data)!=null&&w.detail?l.value=F.response.data.detail:(C=(E=F.response)==null?void 0:E.data)!=null&&C.old_password?l.value=F.response.data.old_password[0]:(O=(R=F.response)==null?void 0:R.data)!=null&&O.password?l.value=F.response.data.password[0]:((q=F.response)==null?void 0:q.status)===401?(l.value="Session expirée, veuillez vous reconnecter",await n.logout(),t.push("/login")):l.value="Une erreur est survenue lors du changement de mot de passe"}finally{o.value=!1}}return(y,b)=>(ut(),dt("div",fb,[B("div",db,[b[12]||(b[12]=B("div",null,[B("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),B("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),B("form",{class:"mt-8 space-y-6",onSubmit:yh(m,["prevent"])},[B("div",pb,[B("div",null,[b[3]||(b[3]=B("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),B("div",mb,[Fn(B("input",{id:"old-password","onUpdate:modelValue":b[0]||(b[0]=w=>r.oldPassword=w),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Mi,r.oldPassword]])])]),B("div",null,[b[4]||(b[4]=B("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),B("div",gb,[Fn(B("input",{id:"new-password","onUpdate:modelValue":b[1]||(b[1]=w=>r.newPassword=w),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Mi,r.newPassword]])]),b[5]||(b[5]=B("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),B("div",null,[b[6]||(b[6]=B("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),B("div",vb,[Fn(B("input",{id:"confirm-password","onUpdate:modelValue":b[2]||(b[2]=w=>r.confirmPassword=w),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Mi,r.confirmPassword]])])])]),l.value?(ut(),dt("div",_b,[B("div",yb,[b[7]||(b[7]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",bb,[B("h3",wb,kt(l.value),1)])])])):on("",!0),c.value.length>0?(ut(),dt("div",xb,[B("div",Lb,[b[9]||(b[9]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),B("div",Cb,[b[8]||(b[8]=B("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),B("div",kb,[B("ul",Pb,[(ut(!0),dt(En,null,Hn(c.value,(w,E)=>(ut(),dt("li",{key:E},kt(w),1))),128))])])])])])):on("",!0),B("div",null,[B("button",{type:"submit",disabled:o.value||!p.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[B("span",Eb,[o.value?(ut(),dt("svg",Mb,b[11]||(b[11]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ut(),dt("svg",Ab,b[10]||(b[10]=[B("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),_i(" "+kt(o.value?"Modification en cours...":"Changer le mot de passe"),1)],8,Sb)])],32)])]))}}),Tb="/static/frontend/assets/logo.svg",Nb={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Db={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},Ob={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},Ib={key:0,class:"rounded-md bg-red-50 p-4"},Rb={class:"flex"},Fb={class:"ml-3"},jb={class:"text-sm font-medium text-red-800"},zb={class:"mt-1"},Ub={class:"mt-1 relative"},qb=["type"],$b={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Vb={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Gb={class:"flex items-center justify-between"},Hb={class:"flex items-center"},Wb={class:"text-sm"},Zb=["disabled"],Kb={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Jb=Es({__name:"LoginView",setup(e){const t=hc(),n=us(),r=It(!1),o=It(null),l=It(!1),c=Fa({username:"",password:"",rememberMe:!1});Ra(()=>{var m;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(m=window.INITIAL_STATE)!=null&&m.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),t.push("/"))});async function p(){var m,y,b,w,E,C;r.value=!0,o.value=null;try{if(!c.username||!c.password){o.value="Veuillez remplir tous les champs";return}await n.login(c.username,c.password),(m=n.user)!=null&&m.must_change_password?t.push("/change-password"):t.push("/")}catch(R){console.error("Login error:",R),o.value=((b=(y=R==null?void 0:R.response)==null?void 0:y.data)==null?void 0:b.detail)||((C=(E=(w=R==null?void 0:R.response)==null?void 0:w.data)==null?void 0:E.non_field_errors)==null?void 0:C[0])||(R==null?void 0:R.message)||"Erreur lors de la connexion"}finally{r.value=!1}}return(m,y)=>{const b=Sv("router-link");return ut(),dt("div",Nb,[y[12]||(y[12]=B("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[B("img",{src:Tb,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),B("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),B("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),B("div",Db,[B("div",Ob,[B("form",{class:"space-y-6",onSubmit:yh(p,["prevent"])},[o.value?(ut(),dt("div",Ib,[B("div",Rb,[y[4]||(y[4]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",Fb,[B("h3",jb,kt(o.value),1)])])])):on("",!0),B("div",null,[y[5]||(y[5]=B("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),B("div",zb,[Fn(B("input",{id:"username","onUpdate:modelValue":y[0]||(y[0]=w=>c.username=w),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Mi,c.username]])])]),B("div",null,[y[8]||(y[8]=B("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),B("div",Ub,[Fn(B("input",{id:"password","onUpdate:modelValue":y[1]||(y[1]=w=>c.password=w),type:l.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,qb),[[j_,c.password]]),B("button",{type:"button",onClick:y[2]||(y[2]=w=>l.value=!l.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[l.value?(ut(),dt("svg",$b,y[6]||(y[6]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(ut(),dt("svg",Vb,y[7]||(y[7]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),B("div",Gb,[B("div",Hb,[Fn(B("input",{id:"remember-me","onUpdate:modelValue":y[3]||(y[3]=w=>c.rememberMe=w),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[qm,c.rememberMe]]),y[9]||(y[9]=B("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),B("div",Wb,[Ni(b,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Bl(()=>y[10]||(y[10]=[_i(" Mot de passe oublié ? ")])),_:1})])]),B("div",null,[B("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(ut(),dt("svg",Kb,y[11]||(y[11]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):on("",!0),_i(" "+kt(r.value?"Connexion en cours...":"Se connecter"),1)],8,Zb)])],32)])])])}}}),af="/static/frontend/assets/logo.jpeg";var jf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(co,function(n){var r="1.9.4";function o(i){var u,g,P,N;for(g=1,P=arguments.length;g<P;g++){N=arguments[g];for(u in N)i[u]=N[u]}return i}var l=Object.create||function(){function i(){}return function(u){return i.prototype=u,new i}}();function c(i,u){var g=Array.prototype.slice;if(i.bind)return i.bind.apply(i,g.call(arguments,1));var P=g.call(arguments,2);return function(){return i.apply(u,P.length?P.concat(g.call(arguments)):arguments)}}var p=0;function m(i){return"_leaflet_id"in i||(i._leaflet_id=++p),i._leaflet_id}function y(i,u,g){var P,N,oe,je;return je=function(){P=!1,N&&(oe.apply(g,N),N=!1)},oe=function(){P?N=arguments:(i.apply(g,arguments),setTimeout(je,u),P=!0)},oe}function b(i,u,g){var P=u[1],N=u[0],oe=P-N;return i===P&&g?i:((i-N)%oe+oe)%oe+N}function w(){return!1}function E(i,u){if(u===!1)return i;var g=Math.pow(10,u===void 0?6:u);return Math.round(i*g)/g}function C(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function R(i){return C(i).split(/\s+/)}function O(i,u){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?l(i.options):{});for(var g in u)i.options[g]=u[g];return i.options}function q(i,u,g){var P=[];for(var N in i)P.push(encodeURIComponent(g?N.toUpperCase():N)+"="+encodeURIComponent(i[N]));return(!u||u.indexOf("?")===-1?"?":"&")+P.join("&")}var F=/\{ *([\w_ -]+) *\}/g;function G(i,u){return i.replace(F,function(g,P){var N=u[P];if(N===void 0)throw new Error("No value provided for variable "+g);return typeof N=="function"&&(N=N(u)),N})}var X=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Ce(i,u){for(var g=0;g<i.length;g++)if(i[g]===u)return g;return-1}var Pe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function we(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var se=0;function ue(i){var u=+new Date,g=Math.max(0,16-(u-se));return se=u+g,window.setTimeout(i,g)}var Be=window.requestAnimationFrame||we("RequestAnimationFrame")||ue,Je=window.cancelAnimationFrame||we("CancelAnimationFrame")||we("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function $(i,u,g){if(g&&Be===ue)i.call(u);else return Be.call(window,c(i,u))}function J(i){i&&Je.call(window,i)}var I={__proto__:null,extend:o,create:l,bind:c,get lastId(){return p},stamp:m,throttle:y,wrapNum:b,falseFn:w,formatNum:E,trim:C,splitWords:R,setOptions:O,getParamString:q,template:G,isArray:X,indexOf:Ce,emptyImageUrl:Pe,requestFn:Be,cancelFn:Je,requestAnimFrame:$,cancelAnimFrame:J};function te(){}te.extend=function(i){var u=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=u.__super__=this.prototype,P=l(g);P.constructor=u,u.prototype=P;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(u[N]=this[N]);return i.statics&&o(u,i.statics),i.includes&&(Z(i.includes),o.apply(null,[P].concat(i.includes))),o(P,i),delete P.statics,delete P.includes,P.options&&(P.options=g.options?l(g.options):{},o(P.options,i.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var oe=0,je=P._initHooks.length;oe<je;oe++)P._initHooks[oe].call(this)}},u},te.include=function(i){var u=this.prototype.options;return o(this.prototype,i),i.options&&(this.prototype.options=u,this.mergeOptions(i.options)),this},te.mergeOptions=function(i){return o(this.prototype.options,i),this},te.addInitHook=function(i){var u=Array.prototype.slice.call(arguments,1),g=typeof i=="function"?i:function(){this[i].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function Z(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=X(i)?i:[i];for(var u=0;u<i.length;u++)i[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(i,u,g){if(typeof i=="object")for(var P in i)this._on(P,i[P],u);else{i=R(i);for(var N=0,oe=i.length;N<oe;N++)this._on(i[N],u,g)}return this},off:function(i,u,g){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var P in i)this._off(P,i[P],u);else{i=R(i);for(var N=arguments.length===1,oe=0,je=i.length;oe<je;oe++)N?this._off(i[oe]):this._off(i[oe],u,g)}return this},_on:function(i,u,g,P){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(i,u,g)===!1){g===this&&(g=void 0);var N={fn:u,ctx:g};P&&(N.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(N)}},_off:function(i,u,g){var P,N,oe;if(this._events&&(P=this._events[i],!!P)){if(arguments.length===1){if(this._firingCount)for(N=0,oe=P.length;N<oe;N++)P[N].fn=w;delete this._events[i];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var je=this._listens(i,u,g);if(je!==!1){var ct=P[je];this._firingCount&&(ct.fn=w,this._events[i]=P=P.slice()),P.splice(je,1)}}},fire:function(i,u,g){if(!this.listens(i,g))return this;var P=o({},u,{type:i,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var N=this._events[i];if(N){this._firingCount=this._firingCount+1||1;for(var oe=0,je=N.length;oe<je;oe++){var ct=N[oe],_t=ct.fn;ct.once&&this.off(i,_t,ct.ctx),_t.call(ct.ctx||this,P)}this._firingCount--}}return g&&this._propagateEvent(P),this},listens:function(i,u,g,P){typeof i!="string"&&console.warn('"string" type argument expected');var N=u;typeof u!="function"&&(P=!!u,N=void 0,g=void 0);var oe=this._events&&this._events[i];if(oe&&oe.length&&this._listens(i,N,g)!==!1)return!0;if(P){for(var je in this._eventParents)if(this._eventParents[je].listens(i,u,g,P))return!0}return!1},_listens:function(i,u,g){if(!this._events)return!1;var P=this._events[i]||[];if(!u)return!!P.length;g===this&&(g=void 0);for(var N=0,oe=P.length;N<oe;N++)if(P[N].fn===u&&P[N].ctx===g)return N;return!1},once:function(i,u,g){if(typeof i=="object")for(var P in i)this._on(P,i[P],u,!0);else{i=R(i);for(var N=0,oe=i.length;N<oe;N++)this._on(i[N],u,g,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[m(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[m(i)],this},_propagateEvent:function(i){for(var u in this._eventParents)this._eventParents[u].fire(i.type,o({layer:i.target,propagatedFrom:i.target},i),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var ve=te.extend(ee);function V(i,u,g){this.x=g?Math.round(i):i,this.y=g?Math.round(u):u}var j=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};V.prototype={clone:function(){return new V(this.x,this.y)},add:function(i){return this.clone()._add(Y(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(Y(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new V(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new V(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=j(this.x),this.y=j(this.y),this},distanceTo:function(i){i=Y(i);var u=i.x-this.x,g=i.y-this.y;return Math.sqrt(u*u+g*g)},equals:function(i){return i=Y(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=Y(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function Y(i,u,g){return i instanceof V?i:X(i)?new V(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new V(i.x,i.y):new V(i,u,g)}function Ie(i,u){if(i)for(var g=u?[i,u]:i,P=0,N=g.length;P<N;P++)this.extend(g[P])}Ie.prototype={extend:function(i){var u,g;if(!i)return this;if(i instanceof V||typeof i[0]=="number"||"x"in i)u=g=Y(i);else if(i=D(i),u=i.min,g=i.max,!u||!g)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=g.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(i){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var u,g;return typeof i[0]=="number"||i instanceof V?i=Y(i):i=D(i),i instanceof Ie?(u=i.min,g=i.max):u=g=i,u.x>=this.min.x&&g.x<=this.max.x&&u.y>=this.min.y&&g.y<=this.max.y},intersects:function(i){i=D(i);var u=this.min,g=this.max,P=i.min,N=i.max,oe=N.x>=u.x&&P.x<=g.x,je=N.y>=u.y&&P.y<=g.y;return oe&&je},overlaps:function(i){i=D(i);var u=this.min,g=this.max,P=i.min,N=i.max,oe=N.x>u.x&&P.x<g.x,je=N.y>u.y&&P.y<g.y;return oe&&je},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var u=this.min,g=this.max,P=Math.abs(u.x-g.x)*i,N=Math.abs(u.y-g.y)*i;return D(Y(u.x-P,u.y-N),Y(g.x+P,g.y+N))},equals:function(i){return i?(i=D(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function D(i,u){return!i||i instanceof Ie?i:new Ie(i,u)}function K(i,u){if(i)for(var g=u?[i,u]:i,P=0,N=g.length;P<N;P++)this.extend(g[P])}K.prototype={extend:function(i){var u=this._southWest,g=this._northEast,P,N;if(i instanceof _e)P=i,N=i;else if(i instanceof K){if(P=i._southWest,N=i._northEast,!P||!N)return this}else return i?this.extend(Le(i)||he(i)):this;return!u&&!g?(this._southWest=new _e(P.lat,P.lng),this._northEast=new _e(N.lat,N.lng)):(u.lat=Math.min(P.lat,u.lat),u.lng=Math.min(P.lng,u.lng),g.lat=Math.max(N.lat,g.lat),g.lng=Math.max(N.lng,g.lng)),this},pad:function(i){var u=this._southWest,g=this._northEast,P=Math.abs(u.lat-g.lat)*i,N=Math.abs(u.lng-g.lng)*i;return new K(new _e(u.lat-P,u.lng-N),new _e(g.lat+P,g.lng+N))},getCenter:function(){return new _e((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new _e(this.getNorth(),this.getWest())},getSouthEast:function(){return new _e(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof _e||"lat"in i?i=Le(i):i=he(i);var u=this._southWest,g=this._northEast,P,N;return i instanceof K?(P=i.getSouthWest(),N=i.getNorthEast()):P=N=i,P.lat>=u.lat&&N.lat<=g.lat&&P.lng>=u.lng&&N.lng<=g.lng},intersects:function(i){i=he(i);var u=this._southWest,g=this._northEast,P=i.getSouthWest(),N=i.getNorthEast(),oe=N.lat>=u.lat&&P.lat<=g.lat,je=N.lng>=u.lng&&P.lng<=g.lng;return oe&&je},overlaps:function(i){i=he(i);var u=this._southWest,g=this._northEast,P=i.getSouthWest(),N=i.getNorthEast(),oe=N.lat>u.lat&&P.lat<g.lat,je=N.lng>u.lng&&P.lng<g.lng;return oe&&je},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,u){return i?(i=he(i),this._southWest.equals(i.getSouthWest(),u)&&this._northEast.equals(i.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function he(i,u){return i instanceof K?i:new K(i,u)}function _e(i,u,g){if(isNaN(i)||isNaN(u))throw new Error("Invalid LatLng object: ("+i+", "+u+")");this.lat=+i,this.lng=+u,g!==void 0&&(this.alt=+g)}_e.prototype={equals:function(i,u){if(!i)return!1;i=Le(i);var g=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return g<=(u===void 0?1e-9:u)},toString:function(i){return"LatLng("+E(this.lat,i)+", "+E(this.lng,i)+")"},distanceTo:function(i){return Se.distance(this,Le(i))},wrap:function(){return Se.wrapLatLng(this)},toBounds:function(i){var u=180*i/40075017,g=u/Math.cos(Math.PI/180*this.lat);return he([this.lat-u,this.lng-g],[this.lat+u,this.lng+g])},clone:function(){return new _e(this.lat,this.lng,this.alt)}};function Le(i,u,g){return i instanceof _e?i:X(i)&&typeof i[0]!="object"?i.length===3?new _e(i[0],i[1],i[2]):i.length===2?new _e(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new _e(i.lat,"lng"in i?i.lng:i.lon,i.alt):u===void 0?null:new _e(i,u,g)}var de={latLngToPoint:function(i,u){var g=this.projection.project(i),P=this.scale(u);return this.transformation._transform(g,P)},pointToLatLng:function(i,u){var g=this.scale(u),P=this.transformation.untransform(i,g);return this.projection.unproject(P)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var u=this.projection.bounds,g=this.scale(i),P=this.transformation.transform(u.min,g),N=this.transformation.transform(u.max,g);return new Ie(P,N)},infinite:!1,wrapLatLng:function(i){var u=this.wrapLng?b(i.lng,this.wrapLng,!0):i.lng,g=this.wrapLat?b(i.lat,this.wrapLat,!0):i.lat,P=i.alt;return new _e(g,u,P)},wrapLatLngBounds:function(i){var u=i.getCenter(),g=this.wrapLatLng(u),P=u.lat-g.lat,N=u.lng-g.lng;if(P===0&&N===0)return i;var oe=i.getSouthWest(),je=i.getNorthEast(),ct=new _e(oe.lat-P,oe.lng-N),_t=new _e(je.lat-P,je.lng-N);return new K(ct,_t)}},Se=o({},de,{wrapLng:[-180,180],R:6371e3,distance:function(i,u){var g=Math.PI/180,P=i.lat*g,N=u.lat*g,oe=Math.sin((u.lat-i.lat)*g/2),je=Math.sin((u.lng-i.lng)*g/2),ct=oe*oe+Math.cos(P)*Math.cos(N)*je*je,_t=2*Math.atan2(Math.sqrt(ct),Math.sqrt(1-ct));return this.R*_t}}),Ae=6378137,Ke={R:Ae,MAX_LATITUDE:85.0511287798,project:function(i){var u=Math.PI/180,g=this.MAX_LATITUDE,P=Math.max(Math.min(g,i.lat),-g),N=Math.sin(P*u);return new V(this.R*i.lng*u,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(i){var u=180/Math.PI;return new _e((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*u,i.x*u/this.R)},bounds:function(){var i=Ae*Math.PI;return new Ie([-i,-i],[i,i])}()};function rt(i,u,g,P){if(X(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=u,this._c=g,this._d=P}rt.prototype={transform:function(i,u){return this._transform(i.clone(),u)},_transform:function(i,u){return u=u||1,i.x=u*(this._a*i.x+this._b),i.y=u*(this._c*i.y+this._d),i},untransform:function(i,u){return u=u||1,new V((i.x/u-this._b)/this._a,(i.y/u-this._d)/this._c)}};function ne(i,u,g,P){return new rt(i,u,g,P)}var ce=o({},Se,{code:"EPSG:3857",projection:Ke,transformation:function(){var i=.5/(Math.PI*Ke.R);return ne(i,.5,-i,.5)}()}),Re=o({},ce,{code:"EPSG:900913"});function De(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function le(i,u){var g="",P,N,oe,je,ct,_t;for(P=0,oe=i.length;P<oe;P++){for(ct=i[P],N=0,je=ct.length;N<je;N++)_t=ct[N],g+=(N?"L":"M")+_t.x+" "+_t.y;g+=u?Ut.svg?"z":"x":""}return g||"M0 0"}var Ve=document.documentElement.style,st="ActiveXObject"in window,Qe=st&&!document.addEventListener,ot="msLaunchUri"in navigator&&!("documentMode"in document),Oe=qn("webkit"),xe=qn("android"),it=qn("android 2")||qn("android 3"),vt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Lt=xe&&qn("Google")&&vt<537&&!("AudioNode"in window),ze=!!window.opera,Dt=!ot&&qn("chrome"),Tt=qn("gecko")&&!Oe&&!ze&&!st,jt=!Dt&&qn("safari"),Vt=qn("phantom"),Nt="OTransition"in Ve,Pn=navigator.platform.indexOf("Win")===0,en=st&&"transition"in Ve,Jn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,un="MozPerspective"in Ve,xn=!window.L_DISABLE_3D&&(en||Jn||un)&&!Nt&&!Vt,Yn=typeof orientation<"u"||qn("mobile"),zt=Yn&&Oe,Pr=Yn&&Jn,In=!window.PointerEvent&&window.MSPointerEvent,xi=!!(window.PointerEvent||In),Di="ontouchstart"in window||!!window.TouchEvent,Un=!window.L_NO_TOUCH&&(Di||xi),cn=Yn&&ze,Jt=Yn&&Tt,Kt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,li=function(){var i=!1;try{var u=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",w,u),window.removeEventListener("testPassiveEventSupport",w,u)}catch{}return i}(),Sr=function(){return!!document.createElement("canvas").getContext}(),Er=!!(document.createElementNS&&De("svg").createSVGRect),an=!!Er&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Yr=!Er&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var u=i.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),cs=navigator.platform.indexOf("Mac")===0,ar=navigator.platform.indexOf("Linux")===0;function qn(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ut={ie:st,ielt9:Qe,edge:ot,webkit:Oe,android:xe,android23:it,androidStock:Lt,opera:ze,chrome:Dt,gecko:Tt,safari:jt,phantom:Vt,opera12:Nt,win:Pn,ie3d:en,webkit3d:Jn,gecko3d:un,any3d:xn,mobile:Yn,mobileWebkit:zt,mobileWebkit3d:Pr,msPointer:In,pointer:xi,touch:Un,touchNative:Di,mobileOpera:cn,mobileGecko:Jt,retina:Kt,passiveEvents:li,canvas:Sr,svg:Er,vml:Yr,inlineSvg:an,mac:cs,linux:ar},lr=Ut.msPointer?"MSPointerDown":"pointerdown",go=Ut.msPointer?"MSPointerMove":"pointermove",Xr=Ut.msPointer?"MSPointerUp":"pointerup",Ar=Ut.msPointer?"MSPointerCancel":"pointercancel",_r={touchstart:lr,touchmove:go,touchend:Xr,touchcancel:Ar},Mr={touchstart:vl,touchmove:_o,touchend:_o,touchcancel:_o},Xi={},yr=!1;function hs(i,u,g){return u==="touchstart"&&Ws(),Mr[u]?(g=Mr[u].bind(this,g),i.addEventListener(_r[u],g,!1),g):(console.warn("wrong event specified:",u),w)}function vo(i,u,g){if(!_r[u]){console.warn("wrong event specified:",u);return}i.removeEventListener(_r[u],g,!1)}function Uo(i){Xi[i.pointerId]=i}function qo(i){Xi[i.pointerId]&&(Xi[i.pointerId]=i)}function Ms(i){delete Xi[i.pointerId]}function Ws(){yr||(document.addEventListener(lr,Uo,!0),document.addEventListener(go,qo,!0),document.addEventListener(Xr,Ms,!0),document.addEventListener(Ar,Ms,!0),yr=!0)}function _o(i,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var g in Xi)u.touches.push(Xi[g]);u.changedTouches=[u],i(u)}}function vl(i,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&pi(u),_o(i,u)}function _l(i){var u={},g,P;for(P in i)g=i[P],u[P]=g&&g.bind?g.bind(i):g;return i=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var $o=200;function za(i,u){i.addEventListener("dblclick",u);var g=0,P;function N(oe){if(oe.detail!==1){P=oe.detail;return}if(!(oe.pointerType==="mouse"||oe.sourceCapabilities&&!oe.sourceCapabilities.firesTouchEvents)){var je=Os(oe);if(!(je.some(function(_t){return _t instanceof HTMLLabelElement&&_t.attributes.for})&&!je.some(function(_t){return _t instanceof HTMLInputElement||_t instanceof HTMLSelectElement}))){var ct=Date.now();ct-g<=$o?(P++,P===2&&u(_l(oe))):P=1,g=ct}}}return i.addEventListener("click",N),{dblclick:u,simDblclick:N}}function yl(i,u){i.removeEventListener("dblclick",u.dblclick),i.removeEventListener("click",u.simDblclick)}var yo=Vo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),bo=Vo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pa=bo==="webkitTransition"||bo==="OTransition"?bo+"End":"transitionend";function Ua(i){return typeof i=="string"?document.getElementById(i):i}function br(i,u){var g=i.style[u]||i.currentStyle&&i.currentStyle[u];if((!g||g==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(i,null);g=P?P[u]:null}return g==="auto"?null:g}function On(i,u,g){var P=document.createElement(i);return P.className=u||"",g&&g.appendChild(P),P}function _n(i){var u=i.parentNode;u&&u.removeChild(i)}function Zs(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Bs(i){var u=i.parentNode;u&&u.lastChild!==i&&u.appendChild(i)}function fs(i){var u=i.parentNode;u&&u.firstChild!==i&&u.insertBefore(i,u.firstChild)}function wo(i,u){if(i.classList!==void 0)return i.classList.contains(u);var g=Oi(i);return g.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(g)}function bn(i,u){if(i.classList!==void 0)for(var g=R(u),P=0,N=g.length;P<N;P++)i.classList.add(g[P]);else if(!wo(i,u)){var oe=Oi(i);Ks(i,(oe?oe+" ":"")+u)}}function jn(i,u){i.classList!==void 0?i.classList.remove(u):Ks(i,C((" "+Oi(i)+" ").replace(" "+u+" "," ")))}function Ks(i,u){i.className.baseVal===void 0?i.className=u:i.className.baseVal=u}function Oi(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function $i(i,u){"opacity"in i.style?i.style.opacity=u:"filter"in i.style&&qa(i,u)}function qa(i,u){var g=!1,P="DXImageTransform.Microsoft.Alpha";try{g=i.filters.item(P)}catch{if(u===1)return}u=Math.round(u*100),g?(g.Enabled=u!==100,g.Opacity=u):i.style.filter+=" progid:"+P+"(opacity="+u+")"}function Vo(i){for(var u=document.documentElement.style,g=0;g<i.length;g++)if(i[g]in u)return i[g];return!1}function ds(i,u,g){var P=u||new V(0,0);i.style[yo]=(Ut.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(g?" scale("+g+")":"")}function ui(i,u){i._leaflet_pos=u,Ut.any3d?ds(i,u):(i.style.left=u.x+"px",i.style.top=u.y+"px")}function ps(i){return i._leaflet_pos||new V(0,0)}var xo,Ts,ma;if("onselectstart"in document)xo=function(){yn(window,"selectstart",pi)},Ts=function(){Nn(window,"selectstart",pi)};else{var Js=Vo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);xo=function(){if(Js){var i=document.documentElement.style;ma=i[Js],i[Js]="none"}},Ts=function(){Js&&(document.documentElement.style[Js]=ma,ma=void 0)}}function ga(){yn(window,"dragstart",pi)}function Qr(){Nn(window,"dragstart",pi)}var Ns,Ys;function Go(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Li(),Ns=i,Ys=i.style.outlineStyle,i.style.outlineStyle="none",yn(window,"keydown",Li))}function Li(){Ns&&(Ns.style.outlineStyle=Ys,Ns=void 0,Ys=void 0,Nn(window,"keydown",Li))}function $a(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Ho(i){var u=i.getBoundingClientRect();return{x:u.width/i.offsetWidth||1,y:u.height/i.offsetHeight||1,boundingClientRect:u}}var gn={__proto__:null,TRANSFORM:yo,TRANSITION:bo,TRANSITION_END:pa,get:Ua,getStyle:br,create:On,remove:_n,empty:Zs,toFront:Bs,toBack:fs,hasClass:wo,addClass:bn,removeClass:jn,setClass:Ks,getClass:Oi,setOpacity:$i,testProp:Vo,setTransform:ds,setPosition:ui,getPosition:ps,get disableTextSelection(){return xo},get enableTextSelection(){return Ts},disableImageDrag:ga,enableImageDrag:Qr,preventOutline:Go,restoreOutline:Li,getSizedParentNode:$a,getScale:Ho};function yn(i,u,g,P){if(u&&typeof u=="object")for(var N in u)Xs(i,N,u[N],g);else{u=R(u);for(var oe=0,je=u.length;oe<je;oe++)Xs(i,u[oe],g,P)}return this}var Br="_leaflet_events";function Nn(i,u,g,P){if(arguments.length===1)va(i),delete i[Br];else if(u&&typeof u=="object")for(var N in u)Tr(i,N,u[N],g);else if(u=R(u),arguments.length===2)va(i,function(ct){return Ce(u,ct)!==-1});else for(var oe=0,je=u.length;oe<je;oe++)Tr(i,u[oe],g,P);return this}function va(i,u){for(var g in i[Br]){var P=g.split(/\d/)[0];(!u||u(P))&&Tr(i,P,null,null,g)}}var Wo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(i,u,g,P){var N=u+m(g)+(P?"_"+m(P):"");if(i[Br]&&i[Br][N])return this;var oe=function(ct){return g.call(P||i,ct||window.event)},je=oe;!Ut.touchNative&&Ut.pointer&&u.indexOf("touch")===0?oe=hs(i,u,oe):Ut.touch&&u==="dblclick"?oe=za(i,oe):"addEventListener"in i?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?i.addEventListener(Wo[u]||u,oe,Ut.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(oe=function(ct){ct=ct||window.event,Qs(i,ct)&&je(ct)},i.addEventListener(Wo[u],oe,!1)):i.addEventListener(u,je,!1):i.attachEvent("on"+u,oe),i[Br]=i[Br]||{},i[Br][N]=oe}function Tr(i,u,g,P,N){N=N||u+m(g)+(P?"_"+m(P):"");var oe=i[Br]&&i[Br][N];if(!oe)return this;!Ut.touchNative&&Ut.pointer&&u.indexOf("touch")===0?vo(i,u,oe):Ut.touch&&u==="dblclick"?yl(i,oe):"removeEventListener"in i?i.removeEventListener(Wo[u]||u,oe,!1):i.detachEvent("on"+u,oe),i[Br][N]=null}function Ds(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function _a(i){return Xs(i,"wheel",Ds),this}function Lo(i){return yn(i,"mousedown touchstart dblclick contextmenu",Ds),i._leaflet_disable_click=!0,this}function pi(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function wr(i){return pi(i),Ds(i),this}function Os(i){if(i.composedPath)return i.composedPath();for(var u=[],g=i.target;g;)u.push(g),g=g.parentNode;return u}function Va(i,u){if(!u)return new V(i.clientX,i.clientY);var g=Ho(u),P=g.boundingClientRect;return new V((i.clientX-P.left)/g.x-u.clientLeft,(i.clientY-P.top)/g.y-u.clientTop)}var Co=Ut.linux&&Ut.chrome?window.devicePixelRatio:Ut.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zo(i){return Ut.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Co:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Qs(i,u){var g=u.relatedTarget;if(!g)return!0;try{for(;g&&g!==i;)g=g.parentNode}catch{return!1}return g!==i}var ko={__proto__:null,on:yn,off:Nn,stopPropagation:Ds,disableScrollPropagation:_a,disableClickPropagation:Lo,preventDefault:pi,stop:wr,getPropagationPath:Os,getMousePosition:Va,getWheelDelta:Zo,isExternalTarget:Qs,addListener:yn,removeListener:Nn},ya=ve.extend({run:function(i,u,g,P){this.stop(),this._el=i,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=ps(i),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(i){var u=+new Date-this._startTime,g=this._duration*1e3;u<g?this._runFrame(this._easeOut(u/g),i):(this._runFrame(1),this._complete())},_runFrame:function(i,u){var g=this._startPos.add(this._offset.multiplyBy(i));u&&g._round(),ui(this._el,g),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Mn=ve.extend({options:{crs:ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,u){u=O(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Le(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=bo&&Ut.any3d&&!Ut.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),yn(this._proxy,pa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,u,g){if(u=u===void 0?this._zoom:this._limitZoom(u),i=this._limitCenter(Le(i),u,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=o({animate:g.animate},g.zoom),g.pan=o({animate:g.animate,duration:g.duration},g.pan));var P=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,u,g.zoom):this._tryAnimatedPan(i,g.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(i,u,g.pan&&g.pan.noMoveStart),this},setZoom:function(i,u){return this._loaded?this.setView(this.getCenter(),i,{zoom:u}):(this._zoom=i,this)},zoomIn:function(i,u){return i=i||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,u)},zoomOut:function(i,u){return i=i||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,u)},setZoomAround:function(i,u,g){var P=this.getZoomScale(u),N=this.getSize().divideBy(2),oe=i instanceof V?i:this.latLngToContainerPoint(i),je=oe.subtract(N).multiplyBy(1-1/P),ct=this.containerPointToLatLng(N.add(je));return this.setView(ct,u,{zoom:g})},_getBoundsCenterZoom:function(i,u){u=u||{},i=i.getBounds?i.getBounds():he(i);var g=Y(u.paddingTopLeft||u.padding||[0,0]),P=Y(u.paddingBottomRight||u.padding||[0,0]),N=this.getBoundsZoom(i,!1,g.add(P));if(N=typeof u.maxZoom=="number"?Math.min(u.maxZoom,N):N,N===1/0)return{center:i.getCenter(),zoom:N};var oe=P.subtract(g).divideBy(2),je=this.project(i.getSouthWest(),N),ct=this.project(i.getNorthEast(),N),_t=this.unproject(je.add(ct).divideBy(2).add(oe),N);return{center:_t,zoom:N}},fitBounds:function(i,u){if(i=he(i),!i.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(i,u);return this.setView(g.center,g.zoom,u)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,u){return this.setView(i,this._zoom,{pan:u})},panBy:function(i,u){if(i=Y(i).round(),u=u||{},!i.x&&!i.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ya,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){bn(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,g,u.duration||.25,u.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,u,g){if(g=g||{},g.animate===!1||!Ut.any3d)return this.setView(i,u,g);this._stop();var P=this.project(this.getCenter()),N=this.project(i),oe=this.getSize(),je=this._zoom;i=Le(i),u=u===void 0?je:u;var ct=Math.max(oe.x,oe.y),_t=ct*this.getZoomScale(je,u),At=N.distanceTo(P)||1,$t=1.42,rn=$t*$t;function Sn(Zn){var Zi=Zn?-1:1,ku=Zn?_t:ct,Ls=_t*_t-ct*ct+Zi*rn*rn*At*At,Hl=2*ku*rn*At,To=Ls/Hl,Ja=Math.sqrt(To*To+1)-To,Wl=Ja<1e-9?-18:Math.log(Ja);return Wl}function or(Zn){return(Math.exp(Zn)-Math.exp(-Zn))/2}function Ei(Zn){return(Math.exp(Zn)+Math.exp(-Zn))/2}function mr(Zn){return or(Zn)/Ei(Zn)}var hi=Sn(0);function xs(Zn){return ct*(Ei(hi)/Ei(hi+$t*Zn))}function wl(Zn){return ct*(Ei(hi)*mr(hi+$t*Zn)-or(hi))/rn}function is(Zn){return 1-Math.pow(1-Zn,1.5)}var zr=Date.now(),Cr=(Sn(1)-hi)/$t,Cu=g.duration?1e3*g.duration:1e3*Cr*.8;function xl(){var Zn=(Date.now()-zr)/Cu,Zi=is(Zn)*Cr;Zn<=1?(this._flyToFrame=$(xl,this),this._move(this.unproject(P.add(N.subtract(P).multiplyBy(wl(Zi)/At)),je),this.getScaleZoom(ct/xs(Zi),je),{flyTo:!0})):this._move(i,u)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),xl.call(this),this},flyToBounds:function(i,u){var g=this._getBoundsCenterZoom(i,u);return this.flyTo(g.center,g.zoom,u)},setMaxBounds:function(i){return i=he(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var u=this.options.minZoom;return this.options.minZoom=i,this._loaded&&u!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var u=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&u!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,u){this._enforcingBounds=!0;var g=this.getCenter(),P=this._limitCenter(g,this._zoom,he(i));return g.equals(P)||this.panTo(P,u),this._enforcingBounds=!1,this},panInside:function(i,u){u=u||{};var g=Y(u.paddingTopLeft||u.padding||[0,0]),P=Y(u.paddingBottomRight||u.padding||[0,0]),N=this.project(this.getCenter()),oe=this.project(i),je=this.getPixelBounds(),ct=D([je.min.add(g),je.max.subtract(P)]),_t=ct.getSize();if(!ct.contains(oe)){this._enforcingBounds=!0;var At=oe.subtract(ct.getCenter()),$t=ct.extend(oe).getSize().subtract(_t);N.x+=At.x<0?-$t.x:$t.x,N.y+=At.y<0?-$t.y:$t.y,this.panTo(this.unproject(N),u),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=o({animate:!1,pan:!0},i===!0?{animate:!0}:i);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),P=u.divideBy(2).round(),N=g.divideBy(2).round(),oe=P.subtract(N);return!oe.x&&!oe.y?this:(i.animate&&i.pan?this.panBy(oe):(i.pan&&this._rawPanBy(oe),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=o({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=c(this._handleGeolocationResponse,this),g=c(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,g,i):navigator.geolocation.getCurrentPosition(u,g,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var u=i.code,g=i.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var u=i.coords.latitude,g=i.coords.longitude,P=new _e(u,g),N=P.toBounds(i.coords.accuracy*2),oe=this._locateOptions;if(oe.setView){var je=this.getBoundsZoom(N);this.setView(P,oe.maxZoom?Math.min(je,oe.maxZoom):je)}var ct={latlng:P,bounds:N,timestamp:i.timestamp};for(var _t in i.coords)typeof i.coords[_t]=="number"&&(ct[_t]=i.coords[_t]);this.fire("locationfound",ct)}},addHandler:function(i,u){if(!u)return this;var g=this[i]=new u(this);return this._handlers.push(g),this.options[i]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_n(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)_n(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,u){var g="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),P=On("div",g,u||this._mapPane);return i&&(this._panes[i]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),u=this.unproject(i.getBottomLeft()),g=this.unproject(i.getTopRight());return new K(u,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,u,g){i=he(i),g=Y(g||[0,0]);var P=this.getZoom()||0,N=this.getMinZoom(),oe=this.getMaxZoom(),je=i.getNorthWest(),ct=i.getSouthEast(),_t=this.getSize().subtract(g),At=D(this.project(ct,P),this.project(je,P)).getSize(),$t=Ut.any3d?this.options.zoomSnap:1,rn=_t.x/At.x,Sn=_t.y/At.y,or=u?Math.max(rn,Sn):Math.min(rn,Sn);return P=this.getScaleZoom(or,P),$t&&(P=Math.round(P/($t/100))*($t/100),P=u?Math.ceil(P/$t)*$t:Math.floor(P/$t)*$t),Math.max(N,Math.min(oe,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new V(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,u){var g=this._getTopLeftPoint(i,u);return new Ie(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,u){var g=this.options.crs;return u=u===void 0?this._zoom:u,g.scale(i)/g.scale(u)},getScaleZoom:function(i,u){var g=this.options.crs;u=u===void 0?this._zoom:u;var P=g.zoom(i*g.scale(u));return isNaN(P)?1/0:P},project:function(i,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Le(i),u)},unproject:function(i,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(Y(i),u)},layerPointToLatLng:function(i){var u=Y(i).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(i){var u=this.project(Le(i))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Le(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(he(i))},distance:function(i,u){return this.options.crs.distance(Le(i),Le(u))},containerPointToLayerPoint:function(i){return Y(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return Y(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var u=this.containerPointToLayerPoint(Y(i));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Le(i)))},mouseEventToContainerPoint:function(i){return Va(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var u=this._container=Ua(i);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");yn(u,"scroll",this._onScroll,this),this._containerId=m(u)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ut.any3d,bn(i,"leaflet-container"+(Ut.touch?" leaflet-touch":"")+(Ut.retina?" leaflet-retina":"")+(Ut.ielt9?" leaflet-oldie":"")+(Ut.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=br(i,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ui(this._mapPane,new V(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bn(i.markerPane,"leaflet-zoom-hide"),bn(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,u,g){ui(this._mapPane,new V(0,0));var P=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var N=this._zoom!==u;this._moveStart(N,g)._move(i,u)._moveEnd(N),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(i,u){return i&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(i,u,g,P){u===void 0&&(u=this._zoom);var N=this._zoom!==u;return this._zoom=u,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),P?g&&g.pinch&&this.fire("zoom",g):((N||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){ui(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[m(this._container)]=this;var u=i?Nn:yn;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ut.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,u){for(var g=[],P,N=u==="mouseout"||u==="mouseover",oe=i.target||i.srcElement,je=!1;oe;){if(P=this._targets[m(oe)],P&&(u==="click"||u==="preclick")&&this._draggableMoved(P)){je=!0;break}if(P&&P.listens(u,!0)&&(N&&!Qs(oe,i)||(g.push(P),N))||oe===this._container)break;oe=oe.parentNode}return!g.length&&!je&&!N&&this.listens(u,!0)&&(g=[this]),g},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var u=i.target||i.srcElement;if(!(!this._loaded||u._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(u))){var g=i.type;g==="mousedown"&&Go(u),this._fireDOMEvent(i,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,u,g){if(i.type==="click"){var P=o({},i);P.type="preclick",this._fireDOMEvent(P,P.type,g)}var N=this._findEventTargets(i,u);if(g){for(var oe=[],je=0;je<g.length;je++)g[je].listens(u,!0)&&oe.push(g[je]);N=oe.concat(N)}if(N.length){u==="contextmenu"&&pi(i);var ct=N[0],_t={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var At=ct.getLatLng&&(!ct._radius||ct._radius<=10);_t.containerPoint=At?this.latLngToContainerPoint(ct.getLatLng()):this.mouseEventToContainerPoint(i),_t.layerPoint=this.containerPointToLayerPoint(_t.containerPoint),_t.latlng=At?ct.getLatLng():this.layerPointToLatLng(_t.layerPoint)}for(je=0;je<N.length;je++)if(N[je].fire(u,_t,!0),_t.originalEvent._stopped||N[je].options.bubblingMouseEvents===!1&&Ce(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,u=this._handlers.length;i<u;i++)this._handlers[i].disable()},whenReady:function(i,u){return this._loaded?i.call(u||this,{target:this}):this.on("load",i,u),this},_getMapPanePos:function(){return ps(this._mapPane)||new V(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,u){var g=i&&u!==void 0?this._getNewPixelOrigin(i,u):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,u){var g=this.getSize()._divideBy(2);return this.project(i,u)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,u,g){var P=this._getNewPixelOrigin(g,u);return this.project(i,u)._subtract(P)},_latLngBoundsToNewLayerBounds:function(i,u,g){var P=this._getNewPixelOrigin(g,u);return D([this.project(i.getSouthWest(),u)._subtract(P),this.project(i.getNorthWest(),u)._subtract(P),this.project(i.getSouthEast(),u)._subtract(P),this.project(i.getNorthEast(),u)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,u,g){if(!g)return i;var P=this.project(i,u),N=this.getSize().divideBy(2),oe=new Ie(P.subtract(N),P.add(N)),je=this._getBoundsOffset(oe,g,u);return Math.abs(je.x)<=1&&Math.abs(je.y)<=1?i:this.unproject(P.add(je),u)},_limitOffset:function(i,u){if(!u)return i;var g=this.getPixelBounds(),P=new Ie(g.min.add(i),g.max.add(i));return i.add(this._getBoundsOffset(P,u))},_getBoundsOffset:function(i,u,g){var P=D(this.project(u.getNorthEast(),g),this.project(u.getSouthWest(),g)),N=P.min.subtract(i.min),oe=P.max.subtract(i.max),je=this._rebound(N.x,-oe.x),ct=this._rebound(N.y,-oe.y);return new V(je,ct)},_rebound:function(i,u){return i+u>0?Math.round(i-u)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(u))},_limitZoom:function(i){var u=this.getMinZoom(),g=this.getMaxZoom(),P=Ut.any3d?this.options.zoomSnap:1;return P&&(i=Math.round(i/P)*P),Math.max(u,Math.min(g,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){jn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,u){var g=this._getCenterOffset(i)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,u),!0)},_createAnimProxy:function(){var i=this._proxy=On("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(u){var g=yo,P=this._proxy.style[g];ds(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),P===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_n(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),u=this.getZoom();ds(this._proxy,this.project(i,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,u,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(u),N=this._getCenterOffset(i)._divideBy(1-1/P);return g.animate!==!0&&!this.getSize().contains(N)?!1:($(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(i,u,!0)},this),!0)},_animateZoom:function(i,u,g,P){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=u,bn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:u,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&jn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ba(i,u){return new Mn(i,u)}var sn=te.extend({options:{position:"topright"},initialize:function(i){O(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var u=this._map;return u&&u.removeControl(this),this.options.position=i,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var u=this._container=this.onAdd(i),g=this.getPosition(),P=i._controlCorners[g];return bn(u,"leaflet-control"),g.indexOf("bottom")!==-1?P.insertBefore(u,P.firstChild):P.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_n(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Qi=function(i){return new sn(i)};Mn.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},u="leaflet-",g=this._controlContainer=On("div",u+"control-container",this._container);function P(N,oe){var je=u+N+" "+u+oe;i[N+oe]=On("div",je,g)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)_n(this._controlCorners[i]);_n(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Po=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,u,g,P){return g<P?-1:P<g?1:0}},initialize:function(i,u,g){O(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in i)this._addLayer(i[P],P);for(P in u)this._addLayer(u[P],P,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return sn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,u){return this._addLayer(i,u),this._map?this._update():this},addOverlay:function(i,u){return this._addLayer(i,u,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var u=this._getLayer(m(i));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){bn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(bn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):jn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return jn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",u=this._container=On("div",i),g=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Lo(u),_a(u);var P=this._section=On("section",i+"-list");g&&(this._map.on("click",this.collapse,this),yn(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=On("a",i+"-toggle",u);N.href="#",N.title="Layers",N.setAttribute("role","button"),yn(N,{keydown:function(oe){oe.keyCode===13&&this._expandSafely()},click:function(oe){pi(oe),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=On("div",i+"-base",P),this._separator=On("div",i+"-separator",P),this._overlaysList=On("div",i+"-overlays",P),u.appendChild(P)},_getLayer:function(i){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&m(this._layers[u].layer)===i)return this._layers[u]},_addLayer:function(i,u,g){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:u,overlay:g}),this.options.sortLayers&&this._layers.sort(c(function(P,N){return this.options.sortFunction(P.layer,N.layer,P.name,N.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zs(this._baseLayersList),Zs(this._overlaysList),this._layerControlInputs=[];var i,u,g,P,N=0;for(g=0;g<this._layers.length;g++)P=this._layers[g],this._addItem(P),u=u||P.overlay,i=i||!P.overlay,N+=P.overlay?0:1;return this.options.hideSingleBase&&(i=i&&N>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=u&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var u=this._getLayer(m(i.target)),g=u.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;g&&this._map.fire(g,u)},_createRadioElement:function(i,u){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(u?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=g,P.firstChild},_addItem:function(i){var u=document.createElement("label"),g=this._map.hasLayer(i.layer),P;i.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=g):P=this._createRadioElement("leaflet-base-layers_"+m(this),g),this._layerControlInputs.push(P),P.layerId=m(i.layer),yn(P,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+i.name;var oe=document.createElement("span");u.appendChild(oe),oe.appendChild(P),oe.appendChild(N);var je=i.overlay?this._overlaysList:this._baseLayersList;return je.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,u,g,P=[],N=[];this._handlingClick=!0;for(var oe=i.length-1;oe>=0;oe--)u=i[oe],g=this._getLayer(u.layerId).layer,u.checked?P.push(g):u.checked||N.push(g);for(oe=0;oe<N.length;oe++)this._map.hasLayer(N[oe])&&this._map.removeLayer(N[oe]);for(oe=0;oe<P.length;oe++)this._map.hasLayer(P[oe])||this._map.addLayer(P[oe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,u,g,P=this._map.getZoom(),N=i.length-1;N>=0;N--)u=i[N],g=this._getLayer(u.layerId).layer,u.disabled=g.options.minZoom!==void 0&&P<g.options.minZoom||g.options.maxZoom!==void 0&&P>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,yn(i,"click",pi),this.expand();var u=this;setTimeout(function(){Nn(i,"click",pi),u._preventClick=!1})}}),eo=function(i,u,g){return new Po(i,u,g)},ur=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var u="leaflet-control-zoom",g=On("div",u+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,u+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,u+"-out",g,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,u,g,P,N){var oe=On("a",g,P);return oe.innerHTML=i,oe.href="#",oe.title=u,oe.setAttribute("role","button"),oe.setAttribute("aria-label",u),Lo(oe),yn(oe,"click",wr),yn(oe,"click",N,this),yn(oe,"click",this._refocusOnMap,this),oe},_updateDisabled:function(){var i=this._map,u="leaflet-disabled";jn(this._zoomInButton,u),jn(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(bn(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(bn(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Mn.mergeOptions({zoomControl:!0}),Mn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ur,this.addControl(this.zoomControl))});var wa=function(i){return new ur(i)},ms=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var u="leaflet-control-scale",g=On("div",u),P=this.options;return this._addScales(P,u+"-line",g),i.on(P.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),g},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,u,g){i.metric&&(this._mScale=On("div",u,g)),i.imperial&&(this._iScale=On("div",u,g))},_update:function(){var i=this._map,u=i.getSize().y/2,g=i.distance(i.containerPointToLatLng([0,u]),i.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(g)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var u=this._getRoundNum(i),g=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,g,u/i)},_updateImperial:function(i){var u=i*3.2808399,g,P,N;u>5280?(g=u/5280,P=this._getRoundNum(g),this._updateScale(this._iScale,P+" mi",P/g)):(N=this._getRoundNum(u),this._updateScale(this._iScale,N+" ft",N/u))},_updateScale:function(i,u,g){i.style.width=Math.round(this.options.maxWidth*g)+"px",i.innerHTML=u},_getRoundNum:function(i){var u=Math.pow(10,(Math.floor(i)+"").length-1),g=i/u;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,u*g}}),Ko=function(i){return new ms(i)},Jo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Nr=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ut.inlineSvg?Jo+" ":"")+"Leaflet</a>"},initialize:function(i){O(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=On("div","leaflet-control-attribution"),Lo(this._container);for(var u in i._layers)i._layers[u].getAttribution&&this.addAttribution(i._layers[u].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var u in this._attributions)this._attributions[u]&&i.push(u);var g=[];this.options.prefix&&g.push(this.options.prefix),i.length&&g.push(i.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});Mn.mergeOptions({attributionControl:!0}),Mn.addInitHook(function(){this.options.attributionControl&&new Nr().addTo(this)});var Yo=function(i){return new Nr(i)};sn.Layers=Po,sn.Zoom=ur,sn.Scale=ms,sn.Attribution=Nr,Qi.layers=eo,Qi.zoom=wa,Qi.scale=Ko,Qi.attribution=Yo;var Ci=te.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ci.addTo=function(i,u){return i.addHandler(u,this),this};var Ga={Events:ee},So=Ut.touch?"touchstart mousedown":"mousedown",Dr=ve.extend({options:{clickTolerance:3},initialize:function(i,u,g,P){O(this,P),this._element=i,this._dragStartTarget=u||i,this._preventOutline=g},enable:function(){this._enabled||(yn(this._dragStartTarget,So,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Dr._dragging===this&&this.finishDrag(!0),Nn(this._dragStartTarget,So,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!wo(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Dr._dragging===this&&this.finishDrag();return}if(!(Dr._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Dr._dragging=this,this._preventOutline&&Go(this._element),ga(),xo(),!this._moving)){this.fire("down");var u=i.touches?i.touches[0]:i,g=$a(this._element);this._startPoint=new V(u.clientX,u.clientY),this._startPos=ps(this._element),this._parentScale=Ho(g);var P=i.type==="mousedown";yn(document,P?"mousemove":"touchmove",this._onMove,this),yn(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var u=i.touches&&i.touches.length===1?i.touches[0]:i,g=new V(u.clientX,u.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,pi(i),this._moved||(this.fire("dragstart"),this._moved=!0,bn(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),ui(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){jn(document.body,"leaflet-dragging"),this._lastTarget&&(jn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Nn(document,"mousemove touchmove",this._onMove,this),Nn(document,"mouseup touchend touchcancel",this._onUp,this),Qr(),Ts();var u=this._moved&&this._moving;this._moving=!1,Dr._dragging=!1,u&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Xo(i,u,g){var P,N=[1,4,2,8],oe,je,ct,_t,At,$t,rn,Sn;for(oe=0,$t=i.length;oe<$t;oe++)i[oe]._code=yt(i[oe],u);for(ct=0;ct<4;ct++){for(rn=N[ct],P=[],oe=0,$t=i.length,je=$t-1;oe<$t;je=oe++)_t=i[oe],At=i[je],_t._code&rn?At._code&rn||(Sn=nt(At,_t,rn,u,g),Sn._code=yt(Sn,u),P.push(Sn)):(At._code&rn&&(Sn=nt(At,_t,rn,u,g),Sn._code=yt(Sn,u),P.push(Sn)),P.push(_t));i=P}return i}function xa(i,u){var g,P,N,oe,je,ct,_t,At,$t;if(!i||i.length===0)throw new Error("latlngs not passed");Wt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var rn=Le([0,0]),Sn=he(i),or=Sn.getNorthWest().distanceTo(Sn.getSouthWest())*Sn.getNorthEast().distanceTo(Sn.getNorthWest());or<1700&&(rn=La(i));var Ei=i.length,mr=[];for(g=0;g<Ei;g++){var hi=Le(i[g]);mr.push(u.project(Le([hi.lat-rn.lat,hi.lng-rn.lng])))}for(ct=_t=At=0,g=0,P=Ei-1;g<Ei;P=g++)N=mr[g],oe=mr[P],je=N.y*oe.x-oe.y*N.x,_t+=(N.x+oe.x)*je,At+=(N.y+oe.y)*je,ct+=je*3;ct===0?$t=mr[0]:$t=[_t/ct,At/ct];var xs=u.unproject(Y($t));return Le([xs.lat+rn.lat,xs.lng+rn.lng])}function La(i){for(var u=0,g=0,P=0,N=0;N<i.length;N++){var oe=Le(i[N]);u+=oe.lat,g+=oe.lng,P++}return Le([u/P,g/P])}var Qo={__proto__:null,clipPolygon:Xo,polygonCenter:xa,centroid:La};function to(i,u){if(!u||!i.length)return i.slice();var g=u*u;return i=H(i,g),i=mi(i,g),i}function Eo(i,u,g){return Math.sqrt(qt(i,u,g,!0))}function no(i,u,g){return qt(i,u,g)}function mi(i,u){var g=i.length,P=typeof Uint8Array<"u"?Uint8Array:Array,N=new P(g);N[0]=N[g-1]=1,x(i,N,u,0,g-1);var oe,je=[];for(oe=0;oe<g;oe++)N[oe]&&je.push(i[oe]);return je}function x(i,u,g,P,N){var oe=0,je,ct,_t;for(ct=P+1;ct<=N-1;ct++)_t=qt(i[ct],i[P],i[N],!0),_t>oe&&(je=ct,oe=_t);oe>g&&(u[je]=1,x(i,u,g,P,je),x(i,u,g,je,N))}function H(i,u){for(var g=[i[0]],P=1,N=0,oe=i.length;P<oe;P++)Bt(i[P],i[N])>u&&(g.push(i[P]),N=P);return N<oe-1&&g.push(i[oe-1]),g}var Me;function qe(i,u,g,P,N){var oe=P?Me:yt(i,g),je=yt(u,g),ct,_t,At;for(Me=je;;){if(!(oe|je))return[i,u];if(oe&je)return!1;ct=oe||je,_t=nt(i,u,ct,g,N),At=yt(_t,g),ct===oe?(i=_t,oe=At):(u=_t,je=At)}}function nt(i,u,g,P,N){var oe=u.x-i.x,je=u.y-i.y,ct=P.min,_t=P.max,At,$t;return g&8?(At=i.x+oe*(_t.y-i.y)/je,$t=_t.y):g&4?(At=i.x+oe*(ct.y-i.y)/je,$t=ct.y):g&2?(At=_t.x,$t=i.y+je*(_t.x-i.x)/oe):g&1&&(At=ct.x,$t=i.y+je*(ct.x-i.x)/oe),new V(At,$t,N)}function yt(i,u){var g=0;return i.x<u.min.x?g|=1:i.x>u.max.x&&(g|=2),i.y<u.min.y?g|=4:i.y>u.max.y&&(g|=8),g}function Bt(i,u){var g=u.x-i.x,P=u.y-i.y;return g*g+P*P}function qt(i,u,g,P){var N=u.x,oe=u.y,je=g.x-N,ct=g.y-oe,_t=je*je+ct*ct,At;return _t>0&&(At=((i.x-N)*je+(i.y-oe)*ct)/_t,At>1?(N=g.x,oe=g.y):At>0&&(N+=je*At,oe+=ct*At)),je=i.x-N,ct=i.y-oe,P?je*je+ct*ct:new V(N,oe)}function Wt(i){return!X(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function nn(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Wt(i)}function pn(i,u){var g,P,N,oe,je,ct,_t,At;if(!i||i.length===0)throw new Error("latlngs not passed");Wt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var $t=Le([0,0]),rn=he(i),Sn=rn.getNorthWest().distanceTo(rn.getSouthWest())*rn.getNorthEast().distanceTo(rn.getNorthWest());Sn<1700&&($t=La(i));var or=i.length,Ei=[];for(g=0;g<or;g++){var mr=Le(i[g]);Ei.push(u.project(Le([mr.lat-$t.lat,mr.lng-$t.lng])))}for(g=0,P=0;g<or-1;g++)P+=Ei[g].distanceTo(Ei[g+1])/2;if(P===0)At=Ei[0];else for(g=0,oe=0;g<or-1;g++)if(je=Ei[g],ct=Ei[g+1],N=je.distanceTo(ct),oe+=N,oe>P){_t=(oe-P)/N,At=[ct.x-_t*(ct.x-je.x),ct.y-_t*(ct.y-je.y)];break}var hi=u.unproject(Y(At));return Le([hi.lat+$t.lat,hi.lng+$t.lng])}var Bn={__proto__:null,simplify:to,pointToSegmentDistance:Eo,closestPointOnSegment:no,clipSegment:qe,_getEdgeIntersection:nt,_getBitCode:yt,_sqClosestPointOnSegment:qt,isFlat:Wt,_flat:nn,polylineCenter:pn},ri={project:function(i){return new V(i.lng,i.lat)},unproject:function(i){return new _e(i.y,i.x)},bounds:new Ie([-180,-90],[180,90])},Rn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var u=Math.PI/180,g=this.R,P=i.lat*u,N=this.R_MINOR/g,oe=Math.sqrt(1-N*N),je=oe*Math.sin(P),ct=Math.tan(Math.PI/4-P/2)/Math.pow((1-je)/(1+je),oe/2);return P=-g*Math.log(Math.max(ct,1e-10)),new V(i.lng*u*g,P)},unproject:function(i){for(var u=180/Math.PI,g=this.R,P=this.R_MINOR/g,N=Math.sqrt(1-P*P),oe=Math.exp(-i.y/g),je=Math.PI/2-2*Math.atan(oe),ct=0,_t=.1,At;ct<15&&Math.abs(_t)>1e-7;ct++)At=N*Math.sin(je),At=Math.pow((1-At)/(1+At),N/2),_t=Math.PI/2-2*Math.atan(oe*At)-je,je+=_t;return new _e(je*u,i.x*u/g)}},$n={__proto__:null,LonLat:ri,Mercator:Rn,SphericalMercator:Ke},ki=o({},Se,{code:"EPSG:3395",projection:Rn,transformation:function(){var i=.5/(Math.PI*Rn.R);return ne(i,.5,-i,.5)}()}),bi=o({},Se,{code:"EPSG:4326",projection:ri,transformation:ne(1/180,1,-1/180,.5)}),xr=o({},de,{projection:ri,transformation:ne(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,u){var g=u.lng-i.lng,P=u.lat-i.lat;return Math.sqrt(g*g+P*P)},infinite:!0});de.Earth=Se,de.EPSG3395=ki,de.EPSG3857=ce,de.EPSG900913=Re,de.EPSG4326=bi,de.Simple=xr;var Xn=ve.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[m(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[m(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var u=i.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var g=this.getEvents();u.on(g,this),this.once("remove",function(){u.off(g,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Mn.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var u=m(i);return this._layers[u]?this:(this._layers[u]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var u=m(i);return this._layers[u]?(this._loaded&&i.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return m(i)in this._layers},eachLayer:function(i,u){for(var g in this._layers)i.call(u,this._layers[g]);return this},_addLayers:function(i){i=i?X(i)?i:[i]:[];for(var u=0,g=i.length;u<g;u++)this.addLayer(i[u])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[m(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var u=m(i);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,u=-1/0,g=this._getZoomSpan();for(var P in this._zoomBoundLayers){var N=this._zoomBoundLayers[P].options;i=N.minZoom===void 0?i:Math.min(i,N.minZoom),u=N.maxZoom===void 0?u:Math.max(u,N.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=i===1/0?void 0:i,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var er=Xn.extend({initialize:function(i,u){O(this,u),this._layers={};var g,P;if(i)for(g=0,P=i.length;g<P;g++)this.addLayer(i[g])},addLayer:function(i){var u=this.getLayerId(i);return this._layers[u]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var u=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(i){var u=typeof i=="number"?i:this.getLayerId(i);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var u=Array.prototype.slice.call(arguments,1),g,P;for(g in this._layers)P=this._layers[g],P[i]&&P[i].apply(P,u);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,u){for(var g in this._layers)i.call(u,this._layers[g]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return m(i)}}),Ha=function(i,u){return new er(i,u)},tr=er.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),er.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),er.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new K;for(var u in this._layers){var g=this._layers[u];i.extend(g.getBounds?g.getBounds():g.getLatLng())}return i}}),Ca=function(i,u){return new tr(i,u)},es=te.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){O(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,u){var g=this._getIconUrl(i);if(!g){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(g,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(P,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(i,u){var g=this.options,P=g[u+"Size"];typeof P=="number"&&(P=[P,P]);var N=Y(P),oe=Y(u==="shadow"&&g.shadowAnchor||g.iconAnchor||N&&N.divideBy(2,!0));i.className="leaflet-marker-"+u+" "+(g.className||""),oe&&(i.style.marginLeft=-oe.x+"px",i.style.marginTop=-oe.y+"px"),N&&(i.style.width=N.x+"px",i.style.height=N.y+"px")},_createImg:function(i,u){return u=u||document.createElement("img"),u.src=i,u},_getIconUrl:function(i){return Ut.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function ka(i){return new es(i)}var Is=es.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Is.imagePath!="string"&&(Is.imagePath=this._detectIconPath()),(this.options.imagePath||Is.imagePath)+es.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var u=function(g,P,N){var oe=P.exec(g);return oe&&oe[N]};return i=u(i,/^url\((['"])?(.+)\1\)$/,2),i&&u(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=On("div","leaflet-default-icon-path",document.body),u=br(i,"background-image")||br(i,"backgroundImage");if(document.body.removeChild(i),u=this._stripUrl(u),u)return u;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Rs=Ci.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Dr(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bn(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&jn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var u=this._marker,g=u._map,P=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,oe=ps(u._icon),je=g.getPixelBounds(),ct=g.getPixelOrigin(),_t=D(je.min._subtract(ct).add(N),je.max._subtract(ct).subtract(N));if(!_t.contains(oe)){var At=Y((Math.max(_t.max.x,oe.x)-_t.max.x)/(je.max.x-_t.max.x)-(Math.min(_t.min.x,oe.x)-_t.min.x)/(je.min.x-_t.min.x),(Math.max(_t.max.y,oe.y)-_t.max.y)/(je.max.y-_t.max.y)-(Math.min(_t.min.y,oe.y)-_t.min.y)/(je.min.y-_t.min.y)).multiplyBy(P);g.panBy(At,{animate:!1}),this._draggable._newPos._add(At),this._draggable._startPos._add(At),ui(u._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=$(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,i)))},_onDrag:function(i){var u=this._marker,g=u._shadow,P=ps(u._icon),N=u._map.layerPointToLatLng(P);g&&ui(g,P),u._latlng=N,i.latlng=N,i.oldLatLng=this._oldLatLng,u.fire("move",i).fire("drag",i)},_onDragEnd:function(i){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),wi=Xn.extend({options:{icon:new Is,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,u){O(this,u),this._latlng=Le(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var u=this._latlng;return this._latlng=Le(i),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=i.icon.createIcon(this._icon),P=!1;g!==this._icon&&(this._icon&&this._removeIcon(),P=!0,i.title&&(g.title=i.title),g.tagName==="IMG"&&(g.alt=i.alt||"")),bn(g,u),i.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yn(g,"focus",this._panOnFocus,this);var N=i.icon.createShadow(this._shadow),oe=!1;N!==this._shadow&&(this._removeShadow(),oe=!0),N&&(bn(N,u),N.alt=""),this._shadow=N,i.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&oe&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nn(this._icon,"focus",this._panOnFocus,this),_n(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_n(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&ui(this._icon,i),this._shadow&&ui(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(bn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Rs)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Rs(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&$i(this._icon,i),this._shadow&&$i(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var u=this.options.icon.options,g=u.iconSize?Y(u.iconSize):Y(0,0),P=u.iconAnchor?Y(u.iconAnchor):Y(0,0);i.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:g.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ea(i,u){return new wi(i,u)}var cr=Xn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return O(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),nr=cr.extend({options:{fill:!0,radius:10},initialize:function(i,u){O(this,u),this._latlng=Le(i),this._radius=this.options.radius},setLatLng:function(i){var u=this._latlng;return this._latlng=Le(i),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var u=i&&i.radius||this._radius;return cr.prototype.setStyle.call(this,i),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,u=this._radiusY||i,g=this._clickTolerance(),P=[i+g,u+g];this._pxBounds=new Ie(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ta(i,u){return new nr(i,u)}var Vi=nr.extend({initialize:function(i,u,g){if(typeof u=="number"&&(u=o({},g,{radius:u})),O(this,u),this._latlng=Le(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new K(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:cr.prototype.setStyle,_project:function(){var i=this._latlng.lng,u=this._latlng.lat,g=this._map,P=g.options.crs;if(P.distance===Se.distance){var N=Math.PI/180,oe=this._mRadius/Se.R/N,je=g.project([u+oe,i]),ct=g.project([u-oe,i]),_t=je.add(ct).divideBy(2),At=g.unproject(_t).lat,$t=Math.acos((Math.cos(oe*N)-Math.sin(u*N)*Math.sin(At*N))/(Math.cos(u*N)*Math.cos(At*N)))/N;(isNaN($t)||$t===0)&&($t=oe/Math.cos(Math.PI/180*u)),this._point=_t.subtract(g.getPixelOrigin()),this._radius=isNaN($t)?0:_t.x-g.project([At,i-$t]).x,this._radiusY=_t.y-je.y}else{var rn=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(rn).x}this._updateBounds()}});function Fs(i,u,g){return new Vi(i,u,g)}var Lr=cr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,u){O(this,u),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var u=1/0,g=null,P=qt,N,oe,je=0,ct=this._parts.length;je<ct;je++)for(var _t=this._parts[je],At=1,$t=_t.length;At<$t;At++){N=_t[At-1],oe=_t[At];var rn=P(i,N,oe,!0);rn<u&&(u=rn,g=P(i,N,oe))}return g&&(g.distance=Math.sqrt(u)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,u){return u=u||this._defaultShape(),i=Le(i),u.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new K,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return Wt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var u=[],g=Wt(i),P=0,N=i.length;P<N;P++)g?(u[P]=Le(i[P]),this._bounds.extend(u[P])):u[P]=this._convertLatLngs(i[P]);return u},_project:function(){var i=new Ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),u=new V(i,i);this._rawPxBounds&&(this._pxBounds=new Ie([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(i,u,g){var P=i[0]instanceof _e,N=i.length,oe,je;if(P){for(je=[],oe=0;oe<N;oe++)je[oe]=this._map.latLngToLayerPoint(i[oe]),g.extend(je[oe]);u.push(je)}else for(oe=0;oe<N;oe++)this._projectLatlngs(i[oe],u,g)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,g,P,N,oe,je,ct,_t;for(g=0,N=0,oe=this._rings.length;g<oe;g++)for(_t=this._rings[g],P=0,je=_t.length;P<je-1;P++)ct=qe(_t[P],_t[P+1],i,P,!0),ct&&(u[N]=u[N]||[],u[N].push(ct[0]),(ct[1]!==_t[P+1]||P===je-2)&&(u[N].push(ct[1]),N++))}},_simplifyPoints:function(){for(var i=this._parts,u=this.options.smoothFactor,g=0,P=i.length;g<P;g++)i[g]=to(i[g],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,u){var g,P,N,oe,je,ct,_t=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(g=0,oe=this._parts.length;g<oe;g++)for(ct=this._parts[g],P=0,je=ct.length,N=je-1;P<je;N=P++)if(!(!u&&P===0)&&Eo(i,ct[N],ct[P])<=_t)return!0;return!1}});function Wa(i,u){return new Lr(i,u)}Lr._flat=nn;var Pi=Lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var u=Lr.prototype._convertLatLngs.call(this,i),g=u.length;return g>=2&&u[0]instanceof _e&&u[0].equals(u[g-1])&&u.pop(),u},_setLatLngs:function(i){Lr.prototype._setLatLngs.call(this,i),Wt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Wt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,u=this.options.weight,g=new V(u,u);if(i=new Ie(i.min.subtract(g),i.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,N=this._rings.length,oe;P<N;P++)oe=Xo(this._rings[P],i,!0),oe.length&&this._parts.push(oe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var u=!1,g,P,N,oe,je,ct,_t,At;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(oe=0,_t=this._parts.length;oe<_t;oe++)for(g=this._parts[oe],je=0,At=g.length,ct=At-1;je<At;ct=je++)P=g[je],N=g[ct],P.y>i.y!=N.y>i.y&&i.x<(N.x-P.x)*(i.y-P.y)/(N.y-P.y)+P.x&&(u=!u);return u||Lr.prototype._containsPoint.call(this,i,!0)}});function gs(i,u){return new Pi(i,u)}var Or=tr.extend({initialize:function(i,u){O(this,u),this._layers={},i&&this.addData(i)},addData:function(i){var u=X(i)?i:i.features,g,P,N;if(u){for(g=0,P=u.length;g<P;g++)N=u[g],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var oe=this.options;if(oe.filter&&!oe.filter(i))return this;var je=Ao(i,oe);return je?(je.feature=Ir(i),je.defaultOptions=je.options,this.resetStyle(je),oe.onEachFeature&&oe.onEachFeature(i,je),this.addLayer(je)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=o({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(u){this._setLayerStyle(u,i)},this)},_setLayerStyle:function(i,u){i.setStyle&&(typeof u=="function"&&(u=u(i.feature)),i.setStyle(u))}});function Ao(i,u){var g=i.type==="Feature"?i.geometry:i,P=g?g.coordinates:null,N=[],oe=u&&u.pointToLayer,je=u&&u.coordsToLatLng||vs,ct,_t,At,$t;if(!P&&!g)return null;switch(g.type){case"Point":return ct=je(P),js(oe,i,ct,u);case"MultiPoint":for(At=0,$t=P.length;At<$t;At++)ct=je(P[At]),N.push(js(oe,i,ct,u));return new tr(N);case"LineString":case"MultiLineString":return _t=Ii(P,g.type==="LineString"?0:1,je),new Lr(_t,u);case"Polygon":case"MultiPolygon":return _t=Ii(P,g.type==="Polygon"?1:2,je),new Pi(_t,u);case"GeometryCollection":for(At=0,$t=g.geometries.length;At<$t;At++){var rn=Ao({geometry:g.geometries[At],type:"Feature",properties:i.properties},u);rn&&N.push(rn)}return new tr(N);case"FeatureCollection":for(At=0,$t=g.features.length;At<$t;At++){var Sn=Ao(g.features[At],u);Sn&&N.push(Sn)}return new tr(N);default:throw new Error("Invalid GeoJSON object.")}}function js(i,u,g,P){return i?i(u,g):new wi(g,P&&P.markersInheritOptions&&P)}function vs(i){return new _e(i[1],i[0],i[2])}function Ii(i,u,g){for(var P=[],N=0,oe=i.length,je;N<oe;N++)je=u?Ii(i[N],u-1,g):(g||vs)(i[N]),P.push(je);return P}function Bi(i,u){return i=Le(i),i.alt!==void 0?[E(i.lng,u),E(i.lat,u),E(i.alt,u)]:[E(i.lng,u),E(i.lat,u)]}function ts(i,u,g,P){for(var N=[],oe=0,je=i.length;oe<je;oe++)N.push(u?ts(i[oe],Wt(i[oe])?0:u-1,g,P):Bi(i[oe],P));return!u&&g&&N.length>0&&N.push(N[0].slice()),N}function hr(i,u){return i.feature?o({},i.feature,{geometry:u}):Ir(u)}function Ir(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var zs={toGeoJSON:function(i){return hr(this,{type:"Point",coordinates:Bi(this.getLatLng(),i)})}};wi.include(zs),Vi.include(zs),nr.include(zs),Lr.include({toGeoJSON:function(i){var u=!Wt(this._latlngs),g=ts(this._latlngs,u?1:0,!1,i);return hr(this,{type:(u?"Multi":"")+"LineString",coordinates:g})}}),Pi.include({toGeoJSON:function(i){var u=!Wt(this._latlngs),g=u&&!Wt(this._latlngs[0]),P=ts(this._latlngs,g?2:u?1:0,!0,i);return u||(P=[P]),hr(this,{type:(g?"Multi":"")+"Polygon",coordinates:P})}}),er.include({toMultiPoint:function(i){var u=[];return this.eachLayer(function(g){u.push(g.toGeoJSON(i).geometry.coordinates)}),hr(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(i){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(i);var g=u==="GeometryCollection",P=[];return this.eachLayer(function(N){if(N.toGeoJSON){var oe=N.toGeoJSON(i);if(g)P.push(oe.geometry);else{var je=Ir(oe);je.type==="FeatureCollection"?P.push.apply(P,je.features):P.push(je)}}}),g?hr(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function Rr(i,u){return new Or(i,u)}var ci=Rr,_s=Xn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,u,g){this._url=i,this._bounds=he(u),O(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_n(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Bs(this._image),this},bringToBack:function(){return this._map&&fs(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=he(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",u=this._image=i?this._url:On("img");if(bn(u,"leaflet-image-layer"),this._zoomAnimated&&bn(u,"leaflet-zoom-animated"),this.options.className&&bn(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onload=c(this.fire,this,"load"),u.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(i){var u=this._map.getZoomScale(i.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;ds(this._image,g,u)},_reset:function(){var i=this._image,u=new Ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=u.getSize();ui(i,u.min),i.style.width=g.x+"px",i.style.height=g.y+"px"},_updateOpacity:function(){$i(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),ir=function(i,u,g){return new _s(i,u,g)},Gi=_s.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",u=this._image=i?this._url:On("video");if(bn(u,"leaflet-image-layer"),this._zoomAnimated&&bn(u,"leaflet-zoom-animated"),this.options.className&&bn(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onloadeddata=c(this.fire,this,"load"),i){for(var g=u.getElementsByTagName("source"),P=[],N=0;N<g.length;N++)P.push(g[N].src);this._url=g.length>0?P:[u.src];return}X(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var oe=0;oe<this._url.length;oe++){var je=On("source");je.src=this._url[oe],u.appendChild(je)}}});function Mo(i,u,g){return new Gi(i,u,g)}var Pa=_s.extend({_initImage:function(){var i=this._image=this._url;bn(i,"leaflet-image-layer"),this._zoomAnimated&&bn(i,"leaflet-zoom-animated"),this.options.className&&bn(i,this.options.className),i.onselectstart=w,i.onmousemove=w}});function Sa(i,u,g){return new Pa(i,u,g)}var Hi=Xn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,u){i&&(i instanceof _e||X(i))?(this._latlng=Le(i),O(this,u)):(O(this,i),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&$i(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&$i(this._container,1),this.bringToFront(),this.options.interactive&&(bn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?($i(this._container,0),this._removeTimeout=setTimeout(c(_n,void 0,this._container),200)):_n(this._container),this.options.interactive&&(jn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Le(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bs(this._container),this},bringToBack:function(){return this._map&&fs(this._container),this},_prepareOpen:function(i){var u=this._source;if(!u._map)return!1;if(u instanceof tr){u=null;var g=this._source._layers;for(var P in g)if(g[P]._map){u=g[P];break}if(!u)return!1;this._source=u}if(!i)if(u.getCenter)i=u.getCenter();else if(u.getLatLng)i=u.getLatLng();else if(u.getBounds)i=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")i.innerHTML=u;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),u=Y(this.options.offset),g=this._getAnchor();this._zoomAnimated?ui(this._container,i.add(g)):u=u.add(i).add(g);var P=this._containerBottom=-u.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=P+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});Mn.include({_initOverlay:function(i,u,g,P){var N=u;return N instanceof i||(N=new i(P).setContent(u)),g&&N.setLatLng(g),N}}),Xn.include({_initOverlay:function(i,u,g,P){var N=g;return N instanceof i?(O(N,P),N._source=this):(N=u&&!P?u:new i(P,this),N.setContent(g)),N}});var fr=Hi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Hi.prototype.openOn.call(this,i)},onAdd:function(i){Hi.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof cr||this._source.on("preclick",Ds))},onRemove:function(i){Hi.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof cr||this._source.off("preclick",Ds))},getEvents:function(){var i=Hi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",u=this._container=On("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=On("div",i+"-content-wrapper",u);if(this._contentNode=On("div",i+"-content",g),Lo(u),_a(this._contentNode),yn(u,"contextmenu",Ds),this._tipContainer=On("div",i+"-tip-container",u),this._tip=On("div",i+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=On("a",i+"-close-button",u);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',yn(P,"click",function(N){pi(N),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,u=i.style;u.width="",u.whiteSpace="nowrap";var g=i.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),u.width=g+1+"px",u.whiteSpace="",u.height="";var P=i.offsetHeight,N=this.options.maxHeight,oe="leaflet-popup-scrolled";N&&P>N?(u.height=N+"px",bn(i,oe)):jn(i,oe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),g=this._getAnchor();ui(this._container,u.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,u=parseInt(br(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+u,P=this._containerWidth,N=new V(this._containerLeft,-g-this._containerBottom);N._add(ps(this._container));var oe=i.layerPointToContainerPoint(N),je=Y(this.options.autoPanPadding),ct=Y(this.options.autoPanPaddingTopLeft||je),_t=Y(this.options.autoPanPaddingBottomRight||je),At=i.getSize(),$t=0,rn=0;oe.x+P+_t.x>At.x&&($t=oe.x+P-At.x+_t.x),oe.x-$t-ct.x<0&&($t=oe.x-ct.x),oe.y+g+_t.y>At.y&&(rn=oe.y+g-At.y+_t.y),oe.y-rn-ct.y<0&&(rn=oe.y-ct.y),($t||rn)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([$t,rn]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),io=function(i,u){return new fr(i,u)};Mn.mergeOptions({closePopupOnClick:!0}),Mn.include({openPopup:function(i,u,g){return this._initOverlay(fr,i,u,g).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Xn.include({bindPopup:function(i,u){return this._popup=this._initOverlay(fr,this._popup,i,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof tr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){wr(i);var u=i.layer||i.target;if(this._popup._source===u&&!(u instanceof cr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=u,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var ys=Hi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Hi.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Hi.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Hi.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",u=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=On("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var u,g,P=this._map,N=this._container,oe=P.latLngToContainerPoint(P.getCenter()),je=P.layerPointToContainerPoint(i),ct=this.options.direction,_t=N.offsetWidth,At=N.offsetHeight,$t=Y(this.options.offset),rn=this._getAnchor();ct==="top"?(u=_t/2,g=At):ct==="bottom"?(u=_t/2,g=0):ct==="center"?(u=_t/2,g=At/2):ct==="right"?(u=0,g=At/2):ct==="left"?(u=_t,g=At/2):je.x<oe.x?(ct="right",u=0,g=At/2):(ct="left",u=_t+($t.x+rn.x)*2,g=At/2),i=i.subtract(Y(u,g,!0)).add($t).add(rn),jn(N,"leaflet-tooltip-right"),jn(N,"leaflet-tooltip-left"),jn(N,"leaflet-tooltip-top"),jn(N,"leaflet-tooltip-bottom"),bn(N,"leaflet-tooltip-"+ct),ui(N,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&$i(this._container,i)},_animateZoom:function(i){var u=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(u)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),na=function(i,u){return new ys(i,u)};Mn.include({openTooltip:function(i,u,g){return this._initOverlay(ys,i,u,g).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Xn.include({bindTooltip:function(i,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ys,this._tooltip,i,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var u=i?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[u](g),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof tr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var u=typeof i.getElement=="function"&&i.getElement();u&&(yn(u,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),yn(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var u=typeof i.getElement=="function"&&i.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var u=i.latlng,g,P;this._tooltip.options.sticky&&i.originalEvent&&(g=this._map.mouseEventToContainerPoint(i.originalEvent),P=this._map.containerPointToLayerPoint(g),u=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(u)}});var ro=es.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var u=i&&i.tagName==="DIV"?i:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Zs(u),u.appendChild(g.html)):u.innerHTML=g.html!==!1?g.html:"",g.bgPos){var P=Y(g.bgPos);u.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function so(i){return new ro(i)}es.Default=Is;var Us=Xn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ut.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){O(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),_n(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof V?i:new V(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var u=this.getPane().children,g=-i(-1/0,1/0),P=0,N=u.length,oe;P<N;P++)oe=u[P].style.zIndex,u[P]!==this._container&&oe&&(g=i(g,+oe));isFinite(g)&&(this.options.zIndex=g+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ut.ielt9){$i(this._container,this.options.opacity);var i=+new Date,u=!1,g=!1;for(var P in this._tiles){var N=this._tiles[P];if(!(!N.current||!N.loaded)){var oe=Math.min(1,(i-N.loaded)/200);$i(N.el,oe),oe<1?u=!0:(N.active?g=!0:this._onOpaqueTile(N),N.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),u&&(J(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=On("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,u=this.options.maxZoom;if(i!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===i?(this._levels[g].el.style.zIndex=u-Math.abs(i-g),this._onUpdateLevel(g)):(_n(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var P=this._levels[i],N=this._map;return P||(P=this._levels[i]={},P.el=On("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=u,P.origin=N.project(N.unproject(N.getPixelOrigin()),i).round(),P.zoom=i,this._setZoomTransform(P,N.getCenter(),N.getZoom()),w(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var i,u,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)u=this._tiles[i],u.retain=u.current;for(i in this._tiles)if(u=this._tiles[i],u.current&&!u.active){var P=u.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var u in this._tiles)this._tiles[u].coords.z===i&&this._removeTile(u)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)_n(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,u,g,P){var N=Math.floor(i/2),oe=Math.floor(u/2),je=g-1,ct=new V(+N,+oe);ct.z=+je;var _t=this._tileCoordsToKey(ct),At=this._tiles[_t];return At&&At.active?(At.retain=!0,!0):(At&&At.loaded&&(At.retain=!0),je>P?this._retainParent(N,oe,je,P):!1)},_retainChildren:function(i,u,g,P){for(var N=2*i;N<2*i+2;N++)for(var oe=2*u;oe<2*u+2;oe++){var je=new V(N,oe);je.z=g+1;var ct=this._tileCoordsToKey(je),_t=this._tiles[ct];if(_t&&_t.active){_t.retain=!0;continue}else _t&&_t.loaded&&(_t.retain=!0);g+1<P&&this._retainChildren(N,oe,g+1,P)}},_resetView:function(i){var u=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var u=this.options;return u.minNativeZoom!==void 0&&i<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<i?u.maxNativeZoom:i},_setView:function(i,u,g,P){var N=Math.round(u);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var oe=this.options.updateWhenZooming&&N!==this._tileZoom;(!P||oe)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(i),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(i,u)},_setZoomTransforms:function(i,u){for(var g in this._levels)this._setZoomTransform(this._levels[g],i,u)},_setZoomTransform:function(i,u,g){var P=this._map.getZoomScale(g,i.zoom),N=i.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(u,g)).round();Ut.any3d?ds(i.el,N,P):ui(i.el,N)},_resetGrid:function(){var i=this._map,u=i.options.crs,g=this._tileSize=this.getTileSize(),P=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,u.wrapLng[0]],P).x/g.x),Math.ceil(i.project([0,u.wrapLng[1]],P).x/g.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([u.wrapLat[0],0],P).y/g.x),Math.ceil(i.project([u.wrapLat[1],0],P).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var u=this._map,g=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),P=u.getZoomScale(g,this._tileZoom),N=u.project(i,this._tileZoom).floor(),oe=u.getSize().divideBy(P*2);return new Ie(N.subtract(oe),N.add(oe))},_update:function(i){var u=this._map;if(u){var g=this._clampZoom(u.getZoom());if(i===void 0&&(i=u.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(i),N=this._pxBoundsToTileRange(P),oe=N.getCenter(),je=[],ct=this.options.keepBuffer,_t=new Ie(N.getBottomLeft().subtract([ct,-ct]),N.getTopRight().add([ct,-ct]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var At in this._tiles){var $t=this._tiles[At].coords;($t.z!==this._tileZoom||!_t.contains(new V($t.x,$t.y)))&&(this._tiles[At].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(i,g);return}for(var rn=N.min.y;rn<=N.max.y;rn++)for(var Sn=N.min.x;Sn<=N.max.x;Sn++){var or=new V(Sn,rn);if(or.z=this._tileZoom,!!this._isValidTile(or)){var Ei=this._tiles[this._tileCoordsToKey(or)];Ei?Ei.current=!0:je.push(or)}}if(je.sort(function(hi,xs){return hi.distanceTo(oe)-xs.distanceTo(oe)}),je.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var mr=document.createDocumentFragment();for(Sn=0;Sn<je.length;Sn++)this._addTile(je[Sn],mr);this._level.el.appendChild(mr)}}}},_isValidTile:function(i){var u=this._map.options.crs;if(!u.infinite){var g=this._globalTileRange;if(!u.wrapLng&&(i.x<g.min.x||i.x>g.max.x)||!u.wrapLat&&(i.y<g.min.y||i.y>g.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(i);return he(this.options.bounds).overlaps(P)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var u=this._map,g=this.getTileSize(),P=i.scaleBy(g),N=P.add(g),oe=u.unproject(P,i.z),je=u.unproject(N,i.z);return[oe,je]},_tileCoordsToBounds:function(i){var u=this._tileCoordsToNwSe(i),g=new K(u[0],u[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var u=i.split(":"),g=new V(+u[0],+u[1]);return g.z=+u[2],g},_removeTile:function(i){var u=this._tiles[i];u&&(_n(u.el),delete this._tiles[i],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){bn(i,"leaflet-tile");var u=this.getTileSize();i.style.width=u.x+"px",i.style.height=u.y+"px",i.onselectstart=w,i.onmousemove=w,Ut.ielt9&&this.options.opacity<1&&$i(i,this.options.opacity)},_addTile:function(i,u){var g=this._getTilePos(i),P=this._tileCoordsToKey(i),N=this.createTile(this._wrapCoords(i),c(this._tileReady,this,i));this._initTile(N),this.createTile.length<2&&$(c(this._tileReady,this,i,null,N)),ui(N,g),this._tiles[P]={el:N,coords:i,current:!0},u.appendChild(N),this.fire("tileloadstart",{tile:N,coords:i})},_tileReady:function(i,u,g){u&&this.fire("tileerror",{error:u,tile:g,coords:i});var P=this._tileCoordsToKey(i);g=this._tiles[P],g&&(g.loaded=+new Date,this._map._fadeAnimated?($i(g.el,0),J(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),u||(bn(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ut.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var u=new V(this._wrapX?b(i.x,this._wrapX):i.x,this._wrapY?b(i.y,this._wrapY):i.y);return u.z=i.z,u},_pxBoundsToTileRange:function(i){var u=this.getTileSize();return new Ie(i.min.unscaleBy(u).floor(),i.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Fr(i){return new Us(i)}var Ri=Us.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,u){this._url=i,u=O(this,u),u.detectRetina&&Ut.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,u){return this._url===i&&u===void 0&&(u=!0),this._url=i,u||this.redraw(),this},createTile:function(i,u){var g=document.createElement("img");return yn(g,"load",c(this._tileOnLoad,this,u,g)),yn(g,"error",c(this._tileOnError,this,u,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(i),g},getTileUrl:function(i){var u={r:Ut.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-i.y;this.options.tms&&(u.y=g),u["-y"]=g}return G(this._url,o(u,this.options))},_tileOnLoad:function(i,u){Ut.ielt9?setTimeout(c(i,this,null,u),0):i(null,u)},_tileOnError:function(i,u,g){var P=this.options.errorTileUrl;P&&u.getAttribute("src")!==P&&(u.src=P),i(g,u)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,u=this.options.maxZoom,g=this.options.zoomReverse,P=this.options.zoomOffset;return g&&(i=u-i),i+P},_getSubdomain:function(i){var u=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var i,u;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(u=this._tiles[i].el,u.onload=w,u.onerror=w,!u.complete)){u.src=Pe;var g=this._tiles[i].coords;_n(u),delete this._tiles[i],this.fire("tileabort",{tile:u,coords:g})}},_removeTile:function(i){var u=this._tiles[i];if(u)return u.el.setAttribute("src",Pe),Us.prototype._removeTile.call(this,i)},_tileReady:function(i,u,g){if(!(!this._map||g&&g.getAttribute("src")===Pe))return Us.prototype._tileReady.call(this,i,u,g)}});function Wn(i,u){return new Ri(i,u)}var Vn=Ri.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,u){this._url=i;var g=o({},this.defaultWmsParams);for(var P in u)P in this.options||(g[P]=u[P]);u=O(this,u);var N=u.detectRetina&&Ut.retina?2:1,oe=this.getTileSize();g.width=oe.x*N,g.height=oe.y*N,this.wmsParams=g},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Ri.prototype.onAdd.call(this,i)},getTileUrl:function(i){var u=this._tileCoordsToNwSe(i),g=this._crs,P=D(g.project(u[0]),g.project(u[1])),N=P.min,oe=P.max,je=(this._wmsVersion>=1.3&&this._crs===bi?[N.y,N.x,oe.y,oe.x]:[N.x,N.y,oe.x,oe.y]).join(","),ct=Ri.prototype.getTileUrl.call(this,i);return ct+q(this.wmsParams,ct,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+je},setParams:function(i,u){return o(this.wmsParams,i),u||this.redraw(),this}});function gi(i,u){return new Vn(i,u)}Ri.WMS=Vn,Wn.wms=gi;var Qn=Xn.extend({options:{padding:.1},initialize:function(i){O(this,i),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,u){var g=this._map.getZoomScale(u,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,u),oe=P.multiplyBy(-g).add(N).subtract(this._map._getNewPixelOrigin(i,u));Ut.any3d?ds(this._container,oe,g):ui(this._container,oe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,u=this._map.getSize(),g=this._map.containerPointToLayerPoint(u.multiplyBy(-i)).round();this._bounds=new Ie(g,g.add(u.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ns=Qn.extend({options:{tolerance:0},getEvents:function(){var i=Qn.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");yn(i,"mousemove",this._onMouseMove,this),yn(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),yn(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,_n(this._container),Nn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var u in this._layers)i=this._layers[u],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var i=this._bounds,u=this._container,g=i.getSize(),P=Ut.retina?2:1;ui(u,i.min),u.width=P*g.x,u.height=P*g.y,u.style.width=g.x+"px",u.style.height=g.y+"px",Ut.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Qn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[m(i)]=i;var u=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var u=i._order,g=u.next,P=u.prev;g?g.prev=P:this._drawLast=P,P?P.next=g:this._drawFirst=g,delete i._order,delete this._layers[m(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var u=i.options.dashArray.split(/[, ]+/),g=[],P,N;for(N=0;N<u.length;N++){if(P=Number(u[N]),isNaN(P))return;g.push(P)}i.options._dashArray=g}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var u=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ie,this._redrawBounds.extend(i._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(i._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var u=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,u=this._redrawBounds;if(this._ctx.save(),u){var g=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)i=P.layer,(!u||i._pxBounds&&i._pxBounds.intersects(u))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,u){if(this._drawing){var g,P,N,oe,je=i._parts,ct=je.length,_t=this._ctx;if(ct){for(_t.beginPath(),g=0;g<ct;g++){for(P=0,N=je[g].length;P<N;P++)oe=je[g][P],_t[P?"lineTo":"moveTo"](oe.x,oe.y);u&&_t.closePath()}this._fillStroke(_t,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var u=i._point,g=this._ctx,P=Math.max(Math.round(i._radius),1),N=(Math.max(Math.round(i._radiusY),1)||P)/P;N!==1&&(g.save(),g.scale(1,N)),g.beginPath(),g.arc(u.x,u.y/N,P,0,Math.PI*2,!1),N!==1&&g.restore(),this._fillStroke(g,i)}},_fillStroke:function(i,u){var g=u.options;g.fill&&(i.globalAlpha=g.fillOpacity,i.fillStyle=g.fillColor||g.color,i.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(i.setLineDash&&i.setLineDash(u.options&&u.options._dashArray||[]),i.globalAlpha=g.opacity,i.lineWidth=g.weight,i.strokeStyle=g.color,i.lineCap=g.lineCap,i.lineJoin=g.lineJoin,i.stroke())},_onClick:function(i){for(var u=this._map.mouseEventToLayerPoint(i),g,P,N=this._drawFirst;N;N=N.next)g=N.layer,g.options.interactive&&g._containsPoint(u)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(g))&&(P=g);this._fireEvent(P?[P]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,u)}},_handleMouseOut:function(i){var u=this._hoveredLayer;u&&(jn(this._container,"leaflet-interactive"),this._fireEvent([u],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,u){if(!this._mouseHoverThrottled){for(var g,P,N=this._drawFirst;N;N=N.next)g=N.layer,g.options.interactive&&g._containsPoint(u)&&(P=g);P!==this._hoveredLayer&&(this._handleMouseOut(i),P&&(bn(this._container,"leaflet-interactive"),this._fireEvent([P],i,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,u,g){this._map._fireDOMEvent(u,g||u.type,i)},_bringToFront:function(i){var u=i._order;if(u){var g=u.next,P=u.prev;if(g)g.prev=P;else return;P?P.next=g:g&&(this._drawFirst=g),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(i)}},_bringToBack:function(i){var u=i._order;if(u){var g=u.next,P=u.prev;if(P)P.next=g;else return;g?g.prev=P:P&&(this._drawLast=P),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(i)}}});function oo(i){return Ut.canvas?new ns(i):null}var bs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Za={_initContainer:function(){this._container=On("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qn.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var u=i._container=bs("shape");bn(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",i._path=bs("path"),u.appendChild(i._path),this._updateStyle(i),this._layers[m(i)]=i},_addPath:function(i){var u=i._container;this._container.appendChild(u),i.options.interactive&&i.addInteractiveTarget(u)},_removePath:function(i){var u=i._container;_n(u),i.removeInteractiveTarget(u),delete this._layers[m(i)]},_updateStyle:function(i){var u=i._stroke,g=i._fill,P=i.options,N=i._container;N.stroked=!!P.stroke,N.filled=!!P.fill,P.stroke?(u||(u=i._stroke=bs("stroke")),N.appendChild(u),u.weight=P.weight+"px",u.color=P.color,u.opacity=P.opacity,P.dashArray?u.dashStyle=X(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=P.lineCap.replace("butt","flat"),u.joinstyle=P.lineJoin):u&&(N.removeChild(u),i._stroke=null),P.fill?(g||(g=i._fill=bs("fill")),N.appendChild(g),g.color=P.fillColor||P.color,g.opacity=P.fillOpacity):g&&(N.removeChild(g),i._fill=null)},_updateCircle:function(i){var u=i._point.round(),g=Math.round(i._radius),P=Math.round(i._radiusY||g);this._setPath(i,i._empty()?"M0 0":"AL "+u.x+","+u.y+" "+g+","+P+" 0,"+65535*360)},_setPath:function(i,u){i._path.v=u},_bringToFront:function(i){Bs(i._container)},_bringToBack:function(i){fs(i._container)}},ao=Ut.vml?bs:De,Si=Qn.extend({_initContainer:function(){this._container=ao("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ao("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_n(this._container),Nn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var i=this._bounds,u=i.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,g.setAttribute("width",u.x),g.setAttribute("height",u.y)),ui(g,i.min),g.setAttribute("viewBox",[i.min.x,i.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(i){var u=i._path=ao("path");i.options.className&&bn(u,i.options.className),i.options.interactive&&bn(u,"leaflet-interactive"),this._updateStyle(i),this._layers[m(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){_n(i._path),i.removeInteractiveTarget(i._path),delete this._layers[m(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var u=i._path,g=i.options;u&&(g.stroke?(u.setAttribute("stroke",g.color),u.setAttribute("stroke-opacity",g.opacity),u.setAttribute("stroke-width",g.weight),u.setAttribute("stroke-linecap",g.lineCap),u.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?u.setAttribute("stroke-dasharray",g.dashArray):u.removeAttribute("stroke-dasharray"),g.dashOffset?u.setAttribute("stroke-dashoffset",g.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),g.fill?(u.setAttribute("fill",g.fillColor||g.color),u.setAttribute("fill-opacity",g.fillOpacity),u.setAttribute("fill-rule",g.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(i,u){this._setPath(i,le(i._parts,u))},_updateCircle:function(i){var u=i._point,g=Math.max(Math.round(i._radius),1),P=Math.max(Math.round(i._radiusY),1)||g,N="a"+g+","+P+" 0 1,0 ",oe=i._empty()?"M0 0":"M"+(u.x-g)+","+u.y+N+g*2+",0 "+N+-g*2+",0 ";this._setPath(i,oe)},_setPath:function(i,u){i._path.setAttribute("d",u)},_bringToFront:function(i){Bs(i._path)},_bringToBack:function(i){fs(i._path)}});Ut.vml&&Si.include(Za);function ei(i){return Ut.svg||Ut.vml?new Si(i):null}Mn.include({getRenderer:function(i){var u=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var u=this._paneRenderers[i];return u===void 0&&(u=this._createRenderer({pane:i}),this._paneRenderers[i]=u),u},_createRenderer:function(i){return this.options.preferCanvas&&oo(i)||ei(i)}});var dr=Pi.extend({initialize:function(i,u){Pi.prototype.initialize.call(this,this._boundsToLatLngs(i),u)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=he(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function pr(i,u){return new dr(i,u)}Si.create=ao,Si.pointsToPath=le,Or.geometryToLayer=Ao,Or.coordsToLatLng=vs,Or.coordsToLatLngs=Ii,Or.latLngToCoords=Bi,Or.latLngsToCoords=ts,Or.getFeature=hr,Or.asFeature=Ir,Mn.mergeOptions({boxZoom:!0});var hn=Ci.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){yn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Nn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_n(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),xo(),ga(),this._startPoint=this._map.mouseEventToContainerPoint(i),yn(document,{contextmenu:wr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=On("div","leaflet-zoom-box",this._container),bn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var u=new Ie(this._point,this._startPoint),g=u.getSize();ui(this._box,u.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(_n(this._box),jn(this._container,"leaflet-crosshair")),Ts(),Qr(),Nn(document,{contextmenu:wr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var u=new K(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Mn.addInitHook("addHandler","boxZoom",hn),Mn.mergeOptions({doubleClickZoom:!0});var Ka=Ci.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var u=this._map,g=u.getZoom(),P=u.options.zoomDelta,N=i.originalEvent.shiftKey?g-P:g+P;u.options.doubleClickZoom==="center"?u.setZoom(N):u.setZoomAround(i.containerPoint,N)}});Mn.addInitHook("addHandler","doubleClickZoom",Ka),Mn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Bo=Ci.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Dr(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}bn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){jn(this._map._container,"leaflet-grab"),jn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=he(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var u=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(u),this._prunePositions(u)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,u){return i-(i-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;i.x<u.min.x&&(i.x=this._viscousLimit(i.x,u.min.x)),i.y<u.min.y&&(i.y=this._viscousLimit(i.y,u.min.y)),i.x>u.max.x&&(i.x=this._viscousLimit(i.x,u.max.x)),i.y>u.max.y&&(i.y=this._viscousLimit(i.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,u=Math.round(i/2),g=this._initialWorldOffset,P=this._draggable._newPos.x,N=(P-u+g)%i+u-g,oe=(P+u+g)%i-u-g,je=Math.abs(N+g)<Math.abs(oe+g)?N:oe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=je},_onDragEnd:function(i){var u=this._map,g=u.options,P=!g.inertia||i.noInertia||this._times.length<2;if(u.fire("dragend",i),P)u.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),oe=(this._lastTime-this._times[0])/1e3,je=g.easeLinearity,ct=N.multiplyBy(je/oe),_t=ct.distanceTo([0,0]),At=Math.min(g.inertiaMaxSpeed,_t),$t=ct.multiplyBy(At/_t),rn=At/(g.inertiaDeceleration*je),Sn=$t.multiplyBy(-rn/2).round();!Sn.x&&!Sn.y?u.fire("moveend"):(Sn=u._limitOffset(Sn,u.options.maxBounds),$(function(){u.panBy(Sn,{duration:rn,easeLinearity:je,noMoveStart:!0,animate:!0})}))}}});Mn.addInitHook("addHandler","dragging",Bo),Mn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var jr=Ci.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),yn(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Nn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,u=document.documentElement,g=i.scrollTop||u.scrollTop,P=i.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(P,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var u=this._panKeys={},g=this.keyCodes,P,N;for(P=0,N=g.left.length;P<N;P++)u[g.left[P]]=[-1*i,0];for(P=0,N=g.right.length;P<N;P++)u[g.right[P]]=[i,0];for(P=0,N=g.down.length;P<N;P++)u[g.down[P]]=[0,i];for(P=0,N=g.up.length;P<N;P++)u[g.up[P]]=[0,-1*i]},_setZoomDelta:function(i){var u=this._zoomKeys={},g=this.keyCodes,P,N;for(P=0,N=g.zoomIn.length;P<N;P++)u[g.zoomIn[P]]=i;for(P=0,N=g.zoomOut.length;P<N;P++)u[g.zoomOut[P]]=-i},_addHooks:function(){yn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Nn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var u=i.keyCode,g=this._map,P;if(u in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(P=this._panKeys[u],i.shiftKey&&(P=Y(P).multiplyBy(3)),g.options.maxBounds&&(P=g._limitOffset(Y(P),g.options.maxBounds)),g.options.worldCopyJump){var N=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(P)));g.panTo(N)}else g.panBy(P)}else if(u in this._zoomKeys)g.setZoom(g.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;wr(i)}}});Mn.addInitHook("addHandler","keyboard",jr),Mn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Wi=Ci.extend({addHooks:function(){yn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Nn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var u=Zo(i),g=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var P=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),P),wr(i)},_performZoom:function(){var i=this._map,u=i.getZoom(),g=this._map.options.zoomSnap||0;i._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,oe=g?Math.ceil(N/g)*g:N,je=i._limitZoom(u+(this._delta>0?oe:-oe))-u;this._delta=0,this._startTime=null,je&&(i.options.scrollWheelZoom==="center"?i.setZoom(u+je):i.setZoomAround(this._lastMousePos,u+je))}});Mn.addInitHook("addHandler","scrollWheelZoom",Wi);var bl=600;Mn.mergeOptions({tapHold:Ut.touchNative&&Ut.safari&&Ut.mobile,tapTolerance:15});var rr=Ci.extend({addHooks:function(){yn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Nn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var u=i.touches[0];this._startPos=this._newPos=new V(u.clientX,u.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(yn(document,"touchend",pi),yn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),bl),yn(document,"touchend touchcancel contextmenu",this._cancel,this),yn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Nn(document,"touchend",pi),Nn(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Nn(document,"touchend touchcancel contextmenu",this._cancel,this),Nn(document,"touchmove",this._onMove,this)},_onMove:function(i){var u=i.touches[0];this._newPos=new V(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,u){var g=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});g._simulated=!0,u.target.dispatchEvent(g)}});Mn.addInitHook("addHandler","tapHold",rr),Mn.mergeOptions({touchZoom:Ut.touch,bounceAtZoomLimits:!0});var sr=Ci.extend({addHooks:function(){bn(this._map._container,"leaflet-touch-zoom"),yn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){jn(this._map._container,"leaflet-touch-zoom"),Nn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var u=this._map;if(!(!i.touches||i.touches.length!==2||u._animatingZoom||this._zooming)){var g=u.mouseEventToContainerPoint(i.touches[0]),P=u.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(g.add(P)._divideBy(2))),this._startDist=g.distanceTo(P),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),yn(document,"touchmove",this._onTouchMove,this),yn(document,"touchend touchcancel",this._onTouchEnd,this),pi(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var u=this._map,g=u.mouseEventToContainerPoint(i.touches[0]),P=u.mouseEventToContainerPoint(i.touches[1]),N=g.distanceTo(P)/this._startDist;if(this._zoom=u.getScaleZoom(N,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&N<1||this._zoom>u.getMaxZoom()&&N>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var oe=g._add(P)._divideBy(2)._subtract(this._centerPoint);if(N===1&&oe.x===0&&oe.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(oe),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var je=c(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(je,this,!0),pi(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),Nn(document,"touchmove",this._onTouchMove,this),Nn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mn.addInitHook("addHandler","touchZoom",sr),Mn.BoxZoom=hn,Mn.DoubleClickZoom=Ka,Mn.Drag=Bo,Mn.Keyboard=jr,Mn.ScrollWheelZoom=Wi,Mn.TapHold=rr,Mn.TouchZoom=sr,n.Bounds=Ie,n.Browser=Ut,n.CRS=de,n.Canvas=ns,n.Circle=Vi,n.CircleMarker=nr,n.Class=te,n.Control=sn,n.DivIcon=ro,n.DivOverlay=Hi,n.DomEvent=ko,n.DomUtil=gn,n.Draggable=Dr,n.Evented=ve,n.FeatureGroup=tr,n.GeoJSON=Or,n.GridLayer=Us,n.Handler=Ci,n.Icon=es,n.ImageOverlay=_s,n.LatLng=_e,n.LatLngBounds=K,n.Layer=Xn,n.LayerGroup=er,n.LineUtil=Bn,n.Map=Mn,n.Marker=wi,n.Mixin=Ga,n.Path=cr,n.Point=V,n.PolyUtil=Qo,n.Polygon=Pi,n.Polyline=Lr,n.Popup=fr,n.PosAnimation=ya,n.Projection=$n,n.Rectangle=dr,n.Renderer=Qn,n.SVG=Si,n.SVGOverlay=Pa,n.TileLayer=Ri,n.Tooltip=ys,n.Transformation=rt,n.Util=I,n.VideoOverlay=Gi,n.bind=c,n.bounds=D,n.canvas=oo,n.circle=Fs,n.circleMarker=ta,n.control=Qi,n.divIcon=so,n.extend=o,n.featureGroup=Ca,n.geoJSON=Rr,n.geoJson=ci,n.gridLayer=Fr,n.icon=ka,n.imageOverlay=ir,n.latLng=Le,n.latLngBounds=he,n.layerGroup=Ha,n.map=ba,n.marker=ea,n.point=Y,n.polygon=gs,n.polyline=Wa,n.popup=io,n.rectangle=pr,n.setOptions=O,n.stamp=m,n.svg=ei,n.svgOverlay=Sa,n.tileLayer=Wn,n.tooltip=na,n.transformation=ne,n.version=r,n.videoOverlay=Mo;var ws=window.L;n.noConflict=function(){return window.L=ws,this},window.L=n})})(jf,jf.exports);var Ji=jf.exports;const Gt=Ng(Ji);var i0={exports:{}};(function(e,t){(function(n,r){r(t)})(co,function(n){var r=typeof window<"u"?window:typeof co<"u"?co:typeof self<"u"?self:{};function o(y,b){return y(b={exports:{}},b.exports),b.exports}var l=o(function(y,b){(function(w){const E={escape:function(Z){return Z.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:C,mimeType:function(Z){return Z=C(Z).toLowerCase(),function(){var ee="application/font-woff",ve="image/jpeg";return{woff:ee,woff2:ee,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ve,jpeg:ve,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[Z]||""},dataAsUrl:function(Z,ee){return`data:${ee};base64,`+Z},isDataUrl:function(Z){return Z.search(/^(data:)/)!==-1},canvasToBlob:function(Z){return Z.toBlob?new Promise(function(ve){Z.toBlob(ve)}):(ee=Z,new Promise(function(ve){const V=se(ee.toDataURL().split(",")[1]);var j=V.length;const Y=new Uint8Array(j);for(let Ie=0;Ie<j;Ie++)Y[Ie]=V.charCodeAt(Ie);ve(new Blob([Y],{type:"image/png"}))}));var ee},resolveUrl:function(Z,ee){const ve=document.implementation.createHTMLDocument(),V=ve.createElement("base"),j=(ve.head.appendChild(V),ve.createElement("a"));return ve.body.appendChild(j),V.href=ee,j.href=Z,j.href},getAndEncode:function(Z){let ee=Pe.impl.urlCache.find(function(ve){return ve.url===Z});return ee||(ee={url:Z,promise:null},Pe.impl.urlCache.push(ee)),ee.promise===null&&(Pe.impl.options.cacheBust&&(Z+=(/\?/.test(Z)?"&":"?")+new Date().getTime()),ee.promise=new Promise(function(ve){const V=Pe.impl.options.httpTimeout,j=new XMLHttpRequest;let Y;var Ie;function D(K){console.error(K),ve("")}j.onreadystatechange=function(){if(j.readyState===4)if(j.status!==200)Y?ve(Y):D(`cannot fetch resource: ${Z}, status: `+j.status);else{const K=new FileReader;K.onloadend=function(){var he=K.result.split(/,/)[1];ve(he)},K.readAsDataURL(j.response)}},j.ontimeout=function(){Y?ve(Y):D(`timeout of ${V}ms occured while fetching resource: `+Z)},j.responseType="blob",j.timeout=V,Pe.impl.options.useCredentials&&(j.withCredentials=!0),j.open("GET",Z,!0),j.send(),Pe.impl.options.imagePlaceholder&&(Ie=Pe.impl.options.imagePlaceholder.split(/,/))&&Ie[1]&&(Y=Ie[1])})),ee.promise},uid:function(){let Z=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+Z++}}(),delay:function(Z){return function(ee){return new Promise(function(ve){setTimeout(function(){ve(ee)},Z)})}},asArray:function(Z){const ee=[],ve=Z.length;for(let V=0;V<ve;V++)ee.push(Z[V]);return ee},escapeXhtml:function(Z){return Z.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(Z){return Z!=="data:,"?new Promise(function(ee,ve){const V=new Image;Pe.impl.options.useCredentials&&(V.crossOrigin="use-credentials"),V.onload=function(){ee(V)},V.onerror=ve,V.src=Z}):Promise.resolve()},width:function(Z){var ee=R(Z,"border-left-width"),ve=R(Z,"border-right-width");return Z.scrollWidth+ee+ve},height:function(Z){var ee=R(Z,"border-top-width"),ve=R(Z,"border-bottom-width");return Z.scrollHeight+ee+ve}};function C(Z){return(Z=/\.([^\.\/]*?)(\?|$)/g.exec(Z))?Z[1]:""}function R(Z,ee){const ve=we(Z).getPropertyValue(ee);return parseFloat(ve.replace("px",""))}const O=function(){const Z=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(j,Y,Ie){return ee(j)?Promise.resolve(j).then(ve).then(function(D){let K=Promise.resolve(j);return D.forEach(function(he){K=K.then(function(_e){return V(_e,he,Y,Ie)})}),K}):Promise.resolve(j)},shouldProcess:ee,impl:{readUrls:ve,inline:V}};function ee(j){return j.search(Z)!==-1}function ve(j){const Y=[];for(var Ie;(Ie=Z.exec(j))!==null;)Y.push(Ie[1]);return Y.filter(function(D){return!E.isDataUrl(D)})}function V(j,Y,Ie,D){return Promise.resolve(Y).then(function(K){return Ie?E.resolveUrl(K,Ie):K}).then(D||E.getAndEncode).then(function(K){return E.dataAsUrl(K,E.mimeType(Y))}).then(function(K){return j.replace((he=Y,new RegExp(`(url\\(['"]?)(${E.escape(he)})(['"]?\\))`,"g")),`$1${K}$3`);var he})}}(),q={resolveAll:function(){return F().then(function(Z){return Promise.all(Z.map(function(ee){return ee.resolve()}))}).then(function(Z){return Z.join(`
`)})},impl:{readAll:F}};function F(){return Promise.resolve(E.asArray(document.styleSheets)).then(function(ee){const ve=[];return ee.forEach(function(V){if(Object.getPrototypeOf(V).hasOwnProperty("cssRules"))try{E.asArray(V.cssRules||[]).forEach(ve.push.bind(ve))}catch(j){console.log("Error while reading CSS rules from "+V.href,j.toString())}}),ve}).then(function(ee){return ee.filter(function(ve){return ve.type===CSSRule.FONT_FACE_RULE}).filter(function(ve){return O.shouldProcess(ve.style.getPropertyValue("src"))})}).then(function(ee){return ee.map(Z)});function Z(ee){return{resolve:function(){var ve=(ee.parentStyleSheet||{}).href;return O.inlineAll(ee.cssText,ve)},src:function(){return ee.style.getPropertyValue("src")}}}}const G={inlineAll:function Z(ee){return ee instanceof Element?function(ve){const V=ve.style.getPropertyValue("background");return V?O.inlineAll(V).then(function(j){ve.style.setProperty("background",j,V)}).then(function(){return ve}):Promise.resolve(ve)}(ee).then(function(){return ee instanceof HTMLImageElement?X(ee).inline():Promise.all(E.asArray(ee.childNodes).map(function(ve){return Z(ve)}))}):Promise.resolve(ee)},impl:{newImage:X}};function X(Z){return{inline:function(ee){return E.isDataUrl(Z.src)?Promise.resolve():Promise.resolve(Z.src).then(ee||E.getAndEncode).then(function(ve){return E.dataAsUrl(ve,E.mimeType(Z.src))}).then(function(ve){return new Promise(function(V){Z.onload=V,Z.onerror=V,Z.src=ve})})}}}const Ce={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},Pe={toSvg:ue,toPng:function(Z,ee){return(ee=ee||{}).raster=!0,Be(Z,ee).then(function(ve){return ve.toDataURL()})},toJpeg:function(Z,ee){return(ee=ee||{}).raster=!0,Be(Z,ee).then(function(ve){return ve.toDataURL("image/jpeg",ee.quality||1)})},toBlob:function(Z,ee){return(ee=ee||{}).raster=!0,Be(Z,ee).then(E.canvasToBlob)},toPixelData:function(Z,ee){return(ee=ee||{}).raster=!0,Be(Z,ee).then(function(ve){return ve.getContext("2d").getImageData(0,0,E.width(Z),E.height(Z)).data})},toCanvas:function(Z,ee){return(ee=ee||{}).raster=!0,Be(Z,ee||{})},impl:{fontFaces:q,images:G,util:E,inliner:O,urlCache:[],options:{}}},we=(y.exports=Pe,w.getComputedStyle||window.getComputedStyle),se=w.atob||window.atob;function ue(Z,ee){var ve=ee=ee||{};return ve.imagePlaceholder===void 0?Pe.impl.options.imagePlaceholder=Ce.imagePlaceholder:Pe.impl.options.imagePlaceholder=ve.imagePlaceholder,ve.cacheBust===void 0?Pe.impl.options.cacheBust=Ce.cacheBust:Pe.impl.options.cacheBust=ve.cacheBust,ve.useCredentials===void 0?Pe.impl.options.useCredentials=Ce.useCredentials:Pe.impl.options.useCredentials=ve.useCredentials,Promise.resolve(Z).then(function(V){return function j(Y,Ie,D,K,he=null){return D||!Ie||Ie(Y)?Promise.resolve(Y).then(function(_e){return _e instanceof HTMLCanvasElement?E.makeImage(_e.toDataURL()):_e.nodeName==="IFRAME"?html2canvas(_e.contentDocument.body).then(Le=>Le.toDataURL()).then(E.makeImage):_e.cloneNode(!1)}).then(function(_e){return function(Le,de){const Se=Le.childNodes;return Se.length===0?Promise.resolve(de):function(Ae,Ke){const rt=we(Le);let ne=Promise.resolve();return Ke.forEach(function(ce){ne=ne.then(function(){return j(ce,Ie,!1,K,rt)}).then(function(Re){Re&&Ae.appendChild(Re)})}),ne}(de,E.asArray(Se)).then(function(){return de})}(Y,_e)}).then(function(_e){return function(Le,de,Se){return de instanceof Element?Promise.resolve().then(function(){(function(Ae,Ke){const rt=we(Ae);rt.cssText?(Ke.style.cssText=rt.cssText,function(ne,ce){ce.font=ne.font,ce.fontFamily=ne.fontFamily,ce.fontFeatureSettings=ne.fontFeatureSettings,ce.fontKerning=ne.fontKerning,ce.fontSize=ne.fontSize,ce.fontStretch=ne.fontStretch,ce.fontStyle=ne.fontStyle,ce.fontVariant=ne.fontVariant,ce.fontVariantCaps=ne.fontVariantCaps,ce.fontVariantEastAsian=ne.fontVariantEastAsian,ce.fontVariantLigatures=ne.fontVariantLigatures,ce.fontVariantNumeric=ne.fontVariantNumeric,ce.fontVariationSettings=ne.fontVariationSettings,ce.fontWeight=ne.fontWeight}(rt,Ke.style)):(Se?function(ne,ce,Re,De){const le=Re.style,Ve=ne.style;for(var st of ce){var Qe=ce.getPropertyValue(st),ot=Ve.getPropertyValue(st),Oe=(Ve.setProperty(st,De?"initial":"unset"),ce.getPropertyValue(st));Oe!==Qe?le.setProperty(st,Qe):le.removeProperty(st),Ve.setProperty(st,ot)}}(Ae,rt,Ke,D):function(ne,ce,Re){const De=function(Ve){if(te[Ve])return te[Ve];I||((I=document.createElement("iframe")).style.visibility="hidden",I.style.position="fixed",document.body.appendChild(I),I.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const st=document.createElement(Ve),Qe=(I.contentWindow.document.body.appendChild(st),st.textContent=".",I.contentWindow.getComputedStyle(st)),ot={};return E.asArray(Qe).forEach(function(Oe){ot[Oe]=Oe==="width"||Oe==="height"?"auto":Qe.getPropertyValue(Oe)}),I.contentWindow.document.body.removeChild(st),te[Ve]=ot}(Re.tagName),le=Re.style;E.asArray(ne).forEach(function(Ve){var st=ne.getPropertyValue(Ve);(st!==De[Ve]||ce&&st!==ce.getPropertyValue(Ve))&&le.setProperty(Ve,st,ne.getPropertyPriority(Ve))})}(rt,he,Ke),D&&(["inset-block","inset-block-start","inset-block-end"].forEach(ne=>Ke.style.removeProperty(ne)),["left","right","top","bottom"].forEach(ne=>{Ke.style.getPropertyValue(ne)&&Ke.style.setProperty(ne,"0px")})))})(Le,de)}).then(function(){[":before",":after"].forEach(function(Ae){(function(Ke){const rt=we(Le,Ke),ne=rt.getPropertyValue("content");if(ne!==""&&ne!=="none"){const ce=E.uid(),Re=de.getAttribute("class"),De=(Re&&de.setAttribute("class",Re+" "+ce),document.createElement("style"));De.appendChild(function(){const le=`.${ce}:`+Ke,Ve=(rt.cssText?function(){return`${rt.cssText} content: ${rt.getPropertyValue("content")};`}:function(){return E.asArray(rt).map(function(st){return st+": "+rt.getPropertyValue(st)+(rt.getPropertyPriority(st)?" !important":"")}).join("; ")+";"})();return document.createTextNode(le+`{${Ve}}`)}()),de.appendChild(De)}})(Ae)})}).then(function(){Le instanceof HTMLTextAreaElement&&(de.innerHTML=Le.value),Le instanceof HTMLInputElement&&de.setAttribute("value",Le.value)}).then(function(){de instanceof SVGElement&&(de.setAttribute("xmlns","http://www.w3.org/2000/svg"),de instanceof SVGRectElement&&["width","height"].forEach(function(Ae){const Ke=de.getAttribute(Ae);Ke&&de.style.setProperty(Ae,Ke)}))}).then(function(){return de}):de}(Y,_e,K)}):Promise.resolve()}(V,ee.filter,!0,!ee.raster)}).then(Je).then($).then(function(V){ee.bgcolor&&(V.style.backgroundColor=ee.bgcolor),ee.width&&(V.style.width=ee.width+"px"),ee.height&&(V.style.height=ee.height+"px"),ee.style&&Object.keys(ee.style).forEach(function(Y){V.style[Y]=ee.style[Y]});let j=null;return typeof ee.onclone=="function"&&(j=ee.onclone(V)),Promise.resolve(j).then(function(){return V})}).then(function(V){return V=V,j=ee.width||E.width(Z),Y=ee.height||E.height(Z),Promise.resolve(V).then(function(Ie){return Ie.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Ie)}).then(E.escapeXhtml).then(function(Ie){return`<foreignObject x="0" y="0" width="100%" height="100%">${Ie}</foreignObject>`}).then(function(Ie){return`<svg xmlns="http://www.w3.org/2000/svg" width="${j}" height="${Y}">${Ie}</svg>`}).then(function(Ie){return"data:image/svg+xml;charset=utf-8,"+Ie});var j,Y}).then(function(V){return Pe.impl.urlCache=[],V})}function Be(Z,ee){return ue(Z,ee).then(E.makeImage).then(E.delay(0)).then(function(ve){var V=typeof ee.scale!="number"?1:ee.scale;const j=function(Ie,D){const K=document.createElement("canvas");if(K.width=(ee.width||E.width(Ie))*D,K.height=(ee.height||E.height(Ie))*D,ee.bgcolor){const he=K.getContext("2d");he.fillStyle=ee.bgcolor,he.fillRect(0,0,K.width,K.height)}return K}(Z,V),Y=j.getContext("2d");return Y.mozImageSmoothingEnabled=!1,Y.msImageSmoothingEnabled=!1,Y.imageSmoothingEnabled=!1,ve&&(Y.scale(V,V),Y.drawImage(ve,0,0)),I&&(document.body.removeChild(I),I=null,J&&clearTimeout(J),J=setTimeout(()=>{J=null,te={}},2e4)),j})}function Je(Z){return q.resolveAll().then(function(ee){const ve=document.createElement("style");return Z.appendChild(ve),ve.appendChild(document.createTextNode(ee)),Z})}function $(Z){return G.inlineAll(Z).then(function(){return Z})}let J=null,I=null,te={}})(r)}),c=o(function(y,b){(function(){function w(q,F,G){var X=new XMLHttpRequest;X.open("GET",q),X.responseType="blob",X.onload=function(){O(X.response,F,G)},X.onerror=function(){console.error("could not download file")},X.send()}function E(q){var F=new XMLHttpRequest;F.open("HEAD",q,!1);try{F.send()}catch{}return 200<=F.status&&299>=F.status}function C(q){try{q.dispatchEvent(new MouseEvent("click"))}catch{var F=document.createEvent("MouseEvents");F.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),q.dispatchEvent(F)}}var R=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,O=R.saveAs||(typeof window!="object"||window!==R?function(){}:"download"in HTMLAnchorElement.prototype?function(q,F,G){var X=R.URL||R.webkitURL,Ce=document.createElement("a");F=F||q.name||"download",Ce.download=F,Ce.rel="noopener",typeof q=="string"?(Ce.href=q,Ce.origin===location.origin?C(Ce):E(Ce.href)?w(q,F,G):C(Ce,Ce.target="_blank")):(Ce.href=X.createObjectURL(q),setTimeout(function(){X.revokeObjectURL(Ce.href)},4e4),setTimeout(function(){C(Ce)},0))}:"msSaveOrOpenBlob"in navigator?function(q,F,G){if(F=F||q.name||"download",typeof q!="string")navigator.msSaveOrOpenBlob(function(Ce,Pe){return Pe===void 0?Pe={autoBom:!1}:typeof Pe!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Pe={autoBom:!Pe}),Pe.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Ce.type)?new Blob(["\uFEFF",Ce],{type:Ce.type}):Ce}(q,G),F);else if(E(q))w(q,F,G);else{var X=document.createElement("a");X.href=q,X.target="_blank",setTimeout(function(){C(X)})}}:function(q,F,G,X){if((X=X||open("","_blank"))&&(X.document.title=X.document.body.innerText="downloading..."),typeof q=="string")return w(q,F,G);var Ce=q.type==="application/octet-stream",Pe=/constructor/i.test(R.HTMLElement)||R.safari,we=/CriOS\/[\d]+/.test(navigator.userAgent);if((we||Ce&&Pe)&&typeof FileReader=="object"){var se=new FileReader;se.onloadend=function(){var Je=se.result;Je=we?Je:Je.replace(/^data:[^;]*;/,"data:attachment/file;"),X?X.location.href=Je:location=Je,X=null},se.readAsDataURL(q)}else{var ue=R.URL||R.webkitURL,Be=ue.createObjectURL(q);X?X.location=Be:location.href=Be,X=null,setTimeout(function(){ue.revokeObjectURL(Be)},4e4)}});R.saveAs=O.saveAs=O,y.exports=O})()}),p=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(y){var b=y.node,w=y.error;return console.warn("Map node is very big "+b.scrollWidth+"x"+b.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(w)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E={};for(var C in this.options)w.hasOwnProperty(C)?E[C]=w[C]:E[C]=this.options[C];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return y._getPixelData(E)}).then(function(R){return y._setElementsVisible(!0),y._toCanvas(R,E)}).then(function(R){return b==="image"?y._canvasToImage(R,E):b==="canvas"?R:y._canvasToBlob(R,E)}).then(function(R){return y._screenState.status=1,y._map.fire("simpleMapScreenshoter.done"),R}).catch(function(R){return y._setElementsVisible(!0),y._screenState.status=1,y._map.fire("simpleMapScreenshoter.error",{e:R}),Promise.reject(R)}),this._screenState.promise)},_setElementsVisible:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(w){var E=y._map._container.querySelectorAll(w),C=!0,R=!1,O=void 0;try{for(var q,F=E[Symbol.iterator]();!(C=(q=F.next()).done);C=!0)q.value.style.opacity=b===!1?0:1}catch(G){R=!0,O=G}finally{try{!C&&F.return&&F.return()}finally{if(R)throw O}}})},_canvasToImage:function(y,b){var w=b.mimeType,E=y.toDataURL(w);return E.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(E)},_canvasToBlob:function(y,b){var w=b.mimeType;return new Promise(function(E,C){y.toBlob(function(R){E(R)},w)})},_toCanvas:function(y,b){var w=b.captionOffset,E=b.caption,C=b.captionFontSize,R=b.captionFont,O=b.captionColor,q=b.captionBgColor,F=this._node,G=F.screenHeight,X=F.screenWidth,Ce=document.createElement("canvas");Ce.width=X,Ce.height=G;for(var Pe=Ce.getContext("2d"),we=Pe.createImageData(X,G),se=0;se<y.length;++se)we.data[se]=y[se];Pe.putImageData(we,0,0),we=null;var ue=document.createElement("canvas"),Be=ue.getContext("2d"),Je=0,$=0,J=G,I=X;if(this.options.cropImageByInnerWH===!0){for(var te=[],Z=0,ee=0;ee<G;++ee){Z=0;for(var ve=0;ve<X;++ve)y[4*ee*X+4*ve+4]===0&&Z++;Z===X&&te.push(ee)}var V=this._getMinAndMaxOnValuesBreak(te);Je=V.min;for(var j=X,Y=V.max,Ie=[],D=0,K=$;K<j;++K){D=0;for(var he=0;he<G;++he)y[4*he*X+4*K+4]===0&&D++;D===G&&Ie.push(K)}var _e=this._getMinAndMaxOnValuesBreak(Ie);$=_e.min,j=_e.max,($===0&&j===0||j===null)&&(j=X),(Je===0&&Y===0||Y===null)&&(Y=G),this.options.debugMode===!0&&(console.log("emptyYLine",te),console.log("minMaxY",V),console.log("emptyXLine",Ie),console.log("minMaxX",_e),console.log("debugX",{}),console.log("debugY",{})),Je===0&&Y===G&&$===0&&j===X||(Je+=this.options.onCropBorderSize,Y-=this.options.onCropBorderSize,$+=this.options.onCropBorderSize,j-=this.options.onCropBorderSize),J=Y-Je,I=j-$,ue.width=I,ue.height=J}else ue.width=I,ue.height=J;var Le=null;return E&&(Le=typeof E=="function"?E.call(this):E),Le!==null&&(ue.height=ue.height+(w+C+w),Be.beginPath(),Be.rect(0,0,ue.width,ue.height),Be.fillStyle=q,Be.fill(),Be.save()),Be.drawImage(Ce,$,Je,I,J,0,0,I,J),Le!==null&&(Be.font=C+"px "+R,Be.fillStyle=O,Be.fillText(Le,w,J+w+C)),Promise.resolve(ue)},_getMinAndMaxOnValuesBreak:function(y){for(var b=0,w=0,E=!1,C=1;C<y.length;C++){if(y[C]-1!==y[C-1]){w=y[C],E=!0;break}b=y[C]}return E===!1&&y[0]>1?(b=0,w=y[0]):E===!1&&(b=y[y.length-1]||0,w=null),{min:b,max:w}},_getPixelData:function(y){var b=this,w=y.domtoimageOptions,E=w===void 0?{}:w;return this._getPixelDataOfNormalMap(E).catch(function(C){return console.warn("May be map size very big on that zoom level, we have error:",C.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),b._getPixelDataOfBigMap(E)})},_getPixelDataOfNormalMap:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=this._map.getContainer();return this._node={node:b,screenHeight:b.scrollHeight,screenWidth:b.scrollWidth},l.toPixelData(b,y)},_getPixelDataOfBigMap:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=this._map.getContainer(),E=this._map.getPane("mapPane");E.style.width=2*w.clientWidth+"px",E.style.height=2*w.clientHeight+"px",E.style.overflow="hidden";var C=function(){E.style.width="initial",E.style.height="initial",E.style.overflow="initial"};return this._node={node:w,screenHeight:w.scrollHeight,screenWidth:w.scrollWidth},l.toPixelData(w,b).then(function(R){return C(),R}).catch(function(R){return C(),w.scrollHeight>=4e3||w.scrollWidth>=4e3?y.options.onPixelDataFail({plugin:y,node:w,mapPane:E,error:R,domtoimageOptions:b}):Promise.reject(R)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var y=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,b=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");w.appendChild(document.createTextNode(y)),b.appendChild(w)},_onScreenBtn:function(){var y=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(b){var w=typeof y.options.screenName=="function"?y.options.screenName.call(y):y.options.screenName;c.saveAs(b,w+".png")}).catch(function(b){y._map.fire("simpleMapScreenshoter.error",{e:b})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var y=this;return new Promise(function(b){var w=setInterval(function(){y._interaction||(b(),clearInterval(w))},100)})}}),m=(L.Control.SimpleMapScreenshoter=p,L.simpleMapScreenshoter=function(y){return new L.Control.SimpleMapScreenshoter(y)},p);n.default=m,n.SimpleMapScreenshoter=p,Object.defineProperty(n,"__esModule",{value:!0})})})(i0,i0.exports);const Yb={class:"drawing-tools"},Xb={class:"mb-4"},Qb={class:"grid grid-cols-2 gap-2"},e3=["onClick"],t3={class:"text-sm"},n3={key:0,class:"space-y-2"},i3={class:"border rounded overflow-hidden"},r3={class:"p-3 space-y-3"},s3={class:"grid grid-cols-6 gap-2"},o3=["onClick"],a3={class:"space-y-2"},l3={class:"flex items-center gap-2"},u3={class:"flex items-center gap-2"},c3=["value"],h3={key:0,class:"flex items-center gap-2"},f3={class:"border rounded overflow-hidden mt-4"},d3={class:"p-3 space-y-2 text-sm"},p3={key:0},m3={key:0,class:"space-y-1"},g3={class:"flex justify-between"},v3={class:"font-medium"},_3={class:"flex justify-between"},y3={class:"font-medium"},b3={class:"flex justify-between"},w3={class:"font-medium"},x3={class:"flex justify-between"},L3={class:"font-medium"},C3={key:1,class:"space-y-1"},k3={class:"flex justify-between"},P3={class:"font-medium"},S3={class:"flex justify-between"},E3={class:"font-medium"},A3={class:"flex justify-between"},M3={class:"font-medium"},B3={class:"flex justify-between"},T3={class:"font-medium"},N3={key:2,class:"space-y-1"},D3={class:"flex justify-between"},O3={class:"font-medium"},I3={class:"flex justify-between"},R3={class:"font-medium"},F3={class:"flex justify-between"},j3={class:"font-medium"},z3={class:"flex justify-between"},U3={class:"font-medium"},q3={class:"flex justify-between"},$3={class:"font-medium"},V3={key:3,class:"space-y-1"},G3={class:"flex justify-between"},H3={class:"font-medium"},W3={key:0,class:"flex justify-between"},Z3={class:"font-medium"},K3={key:1,class:"flex justify-between"},J3={class:"font-medium"},Y3={key:4,class:"space-y-1"},X3={class:"flex justify-between"},Q3={class:"font-medium"},ew={class:"flex justify-between"},tw={class:"font-medium"},nw={key:1,class:"text-gray-500 text-center"},iw=Es({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(e,{emit:t}){const n=e,r=t,o=It(null);ls(()=>n.selectedShape,we=>{console.log("[DrawingTools] Changement de forme sélectionnée",{newShape:we,properties:we==null?void 0:we.properties}),we?o.value={...we.properties}:o.value=null},{deep:!0,immediate:!0}),ls(()=>o.value,(we,se)=>{console.log("[DrawingTools] Changement détecté dans localProperties",{newProperties:we,oldProperties:se,selectedShape:n.selectedShape})},{deep:!0});const l=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"},{type:"delete",label:"Supprimer"}],c=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],p=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],m=It("#3B82F6"),y=It(.2),b=It("#2563EB"),w=It(2),E=It("solid"),C=It({style:!1,properties:!1}),R=Tn(()=>{var se,ue;const we=(ue=(se=n.selectedShape)==null?void 0:se.properties)==null?void 0:ue.type;return console.log("[DrawingTools] Calcul de showFillOptions",{shapeType:we,selectedShape:n.selectedShape}),we?["Circle","Rectangle","Polygon"].includes(we):!1}),O=we=>{C.value[we]=!C.value[we]},q=we=>{switch(we){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},F=we=>{b.value=we,R.value&&(m.value=we),G({strokeColor:we,fillColor:R.value?we:void 0})},G=we=>{const se={...we};we.strokeStyle&&(se.dashArray=q(we.strokeStyle)),we.fillOpacity!==void 0&&(se.fillOpacity=parseFloat(we.fillOpacity)),we.strokeOpacity!==void 0&&(se.strokeOpacity=parseFloat(we.strokeOpacity)),we.strokeWidth!==void 0&&(se.weight=parseInt(we.strokeWidth)),we.strokeColor&&(se.color=we.strokeColor),r("style-update",se)},X=we=>we?we>=1e3?`${(we/1e3).toFixed(2)} km`:`${we.toFixed(2)} m`:"0 m",Ce=we=>we?`${(we/1e4).toFixed(2)} ha`:"0 ha",Pe=we=>we?`${((we%360+360)%360).toFixed(1)}°`:"0°";return(we,se)=>{var ue;return ut(),dt("div",Yb,[B("div",Xb,[B("div",Qb,[(ut(!0),dt(En,null,Hn(l.filter(Be=>Be.type!=="delete"),Be=>(ut(),dt("button",{key:Be.type,class:Kr(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":we.currentTool===Be.type,"hover:bg-gray-50 border-gray-200":we.currentTool!==Be.type}]),onClick:Je=>we.$emit("tool-change",Be.type)},[B("span",t3,kt(Be.label),1)],10,e3))),128))]),we.selectedShape?(ut(),dt("button",{key:0,class:Kr(["w-full mt-2 flex items-center justify-center p-2 rounded border border-red-500 bg-red-50 hover:bg-red-100 text-red-700 transition-colors duration-200",{"bg-red-100 border-red-600":we.currentTool==="delete"}]),onClick:se[0]||(se[0]=Be=>we.$emit("delete-shape"))},se[13]||(se[13]=[B("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),B("span",{class:"text-sm font-medium"},"Supprimer la forme",-1)]),2)):on("",!0)]),we.selectedShape&&o.value?(ut(),dt("div",n3,[B("div",i3,[B("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:se[1]||(se[1]=Be=>O("style"))},[se[15]||(se[15]=B("span",{class:"font-medium"},"Style",-1)),(ut(),dt("svg",{class:Kr(["w-5 h-5 transform transition-transform",{"rotate-180":!C.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se[14]||(se[14]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Fn(B("div",r3,[B("div",s3,[(ut(),dt(En,null,Hn(c,Be=>B("button",{key:Be,class:"w-6 h-6 rounded-full border hover:scale-110 transition-transform",style:hh({backgroundColor:Be}),onClick:Je=>F(Be)},null,12,o3)),64))]),B("div",a3,[B("div",l3,[se[16]||(se[16]=B("span",{class:"text-xs text-gray-500"},"Contour",-1)),Fn(B("input",{type:"color","onUpdate:modelValue":se[2]||(se[2]=Be=>b.value=Be),class:"w-6 h-6",onChange:se[3]||(se[3]=Be=>G({strokeColor:b.value})),title:"Couleur du contour"},null,544),[[Mi,b.value]]),Fn(B("input",{type:"range","onUpdate:modelValue":se[4]||(se[4]=Be=>w.value=Be),min:"1",max:"10",class:"flex-1",onChange:se[5]||(se[5]=Be=>G({strokeWidth:w.value})),title:"Épaisseur du contour"},null,544),[[Mi,w.value]])]),B("div",u3,[se[17]||(se[17]=B("span",{class:"text-xs text-gray-500"},"Style",-1)),Fn(B("select",{"onUpdate:modelValue":se[6]||(se[6]=Be=>E.value=Be),class:"flex-1 text-sm border rounded px-1 py-0.5",onChange:se[7]||(se[7]=Be=>G({strokeStyle:E.value}))},[(ut(),dt(En,null,Hn(p,Be=>B("option",{key:Be.value,value:Be.value},kt(Be.label),9,c3)),64))],544),[[$s,E.value]])]),R.value?(ut(),dt("div",h3,[se[18]||(se[18]=B("span",{class:"text-xs text-gray-500"},"Remplissage",-1)),Fn(B("input",{type:"color","onUpdate:modelValue":se[8]||(se[8]=Be=>m.value=Be),class:"w-6 h-6",onChange:se[9]||(se[9]=Be=>G({fillColor:m.value})),title:"Couleur de remplissage"},null,544),[[Mi,m.value]]),Fn(B("input",{type:"range","onUpdate:modelValue":se[10]||(se[10]=Be=>y.value=Be),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:se[11]||(se[11]=Be=>G({fillOpacity:y.value})),title:"Opacité du remplissage"},null,544),[[Mi,y.value]])])):on("",!0)])],512),[[ip,!C.value.style]])]),B("div",f3,[B("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:se[12]||(se[12]=Be=>O("properties"))},[se[20]||(se[20]=B("span",{class:"font-medium"},"Propriétés",-1)),(ut(),dt("svg",{class:Kr(["w-5 h-5 transform transition-transform",{"rotate-180":!C.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se[19]||(se[19]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Fn(B("div",d3,[o.value?(ut(),dt("div",p3,[o.value.type==="Circle"?(ut(),dt("div",m3,[B("div",g3,[se[21]||(se[21]=B("span",{class:"text-gray-600"},"Rayon :",-1)),B("span",v3,kt(X(o.value.radius||0)),1)]),B("div",_3,[se[22]||(se[22]=B("span",{class:"text-gray-600"},"Diamètre :",-1)),B("span",y3,kt(X(o.value.diameter||0)),1)]),B("div",b3,[se[23]||(se[23]=B("span",{class:"text-gray-600"},"Surface :",-1)),B("span",w3,kt(Ce(o.value.area||0)),1)]),B("div",x3,[se[24]||(se[24]=B("span",{class:"text-gray-600"},"Périmètre :",-1)),B("span",L3,kt(X(o.value.perimeter||0)),1)])])):o.value.type==="Rectangle"?(ut(),dt("div",C3,[B("div",k3,[se[25]||(se[25]=B("span",{class:"text-gray-600"},"Largeur :",-1)),B("span",P3,kt(X(o.value.width||0)),1)]),B("div",S3,[se[26]||(se[26]=B("span",{class:"text-gray-600"},"Hauteur :",-1)),B("span",E3,kt(X(o.value.height||0)),1)]),B("div",A3,[se[27]||(se[27]=B("span",{class:"text-gray-600"},"Surface :",-1)),B("span",M3,kt(Ce(o.value.area||0)),1)]),B("div",B3,[se[28]||(se[28]=B("span",{class:"text-gray-600"},"Périmètre :",-1)),B("span",T3,kt(X(o.value.perimeter||0)),1)])])):o.value.type==="Semicircle"?(ut(),dt("div",N3,[B("div",D3,[se[29]||(se[29]=B("span",{class:"text-gray-600"},"Rayon :",-1)),B("span",O3,kt(X(o.value.radius||0)),1)]),B("div",I3,[se[30]||(se[30]=B("span",{class:"text-gray-600"},"Surface :",-1)),B("span",R3,kt(Ce(o.value.area||0)),1)]),B("div",F3,[se[31]||(se[31]=B("span",{class:"text-gray-600"},"Périmètre :",-1)),B("span",j3,kt(X(o.value.perimeter||0)),1)]),B("div",z3,[se[32]||(se[32]=B("span",{class:"text-gray-600"},"Longueur d'arc :",-1)),B("span",U3,kt(X(o.value.arcLength||0)),1)]),B("div",q3,[se[33]||(se[33]=B("span",{class:"text-gray-600"},"Angle d'ouverture :",-1)),B("span",$3,kt(Pe(o.value.openingAngle||0)),1)])])):o.value.type==="Line"?(ut(),dt("div",V3,[B("div",G3,[se[34]||(se[34]=B("span",{class:"text-gray-600"},"Longueur :",-1)),B("span",H3,kt(X(o.value.length||0)),1)]),(ue=o.value.dimensions)!=null&&ue.width?(ut(),dt("div",W3,[se[35]||(se[35]=B("span",{class:"text-gray-600"},"Largeur d'influence :",-1)),B("span",Z3,kt(X(o.value.dimensions.width)),1)])):on("",!0),o.value.surfaceInfluence?(ut(),dt("div",K3,[se[36]||(se[36]=B("span",{class:"text-gray-600"},"Surface d'influence :",-1)),B("span",J3,kt(Ce(o.value.surfaceInfluence)),1)])):on("",!0)])):o.value.type==="Polygon"?(ut(),dt("div",Y3,[B("div",X3,[se[37]||(se[37]=B("span",{class:"text-gray-600"},"Surface :",-1)),B("span",Q3,kt(Ce(o.value.area||0)),1)]),B("div",ew,[se[38]||(se[38]=B("span",{class:"text-gray-600"},"Périmètre :",-1)),B("span",tw,kt(X(o.value.perimeter||0)),1)])])):on("",!0)])):(ut(),dt("div",nw," Aucune propriété disponible "))],512),[[ip,!C.value.properties]])])])):on("",!0)])}}}),rw=Fg(iw,[["__scopeId","data-v-cd6e1050"]]);(()=>{var Ft,ln;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,o=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),p=(s,a,h,d)=>{if(a&&typeof a=="object"||typeof a=="function")for(let v of r(a))!l.call(s,v)&&v!==h&&t(s,v,{get:()=>a[v],enumerable:!(d=n(a,v))||d.enumerable});return s},m=(s,a,h)=>(h=s!=null?e(o(s)):{},p(a||!s||!s.__esModule?t(h,"default",{value:s,enumerable:!0}):h,s)),y=c((s,a)=>{function h(){this.__data__=[],this.size=0}a.exports=h}),b=c((s,a)=>{function h(d,v){return d===v||d!==d&&v!==v}a.exports=h}),w=c((s,a)=>{var h=b();function d(v,k){for(var A=v.length;A--;)if(h(v[A][0],k))return A;return-1}a.exports=d}),E=c((s,a)=>{var h=w(),d=Array.prototype,v=d.splice;function k(A){var M=this.__data__,z=h(M,A);if(z<0)return!1;var Q=M.length-1;return z==Q?M.pop():v.call(M,z,1),--this.size,!0}a.exports=k}),C=c((s,a)=>{var h=w();function d(v){var k=this.__data__,A=h(k,v);return A<0?void 0:k[A][1]}a.exports=d}),R=c((s,a)=>{var h=w();function d(v){return h(this.__data__,v)>-1}a.exports=d}),O=c((s,a)=>{var h=w();function d(v,k){var A=this.__data__,M=h(A,v);return M<0?(++this.size,A.push([v,k])):A[M][1]=k,this}a.exports=d}),q=c((s,a)=>{var h=y(),d=E(),v=C(),k=R(),A=O();function M(z){var Q=-1,Ne=z==null?0:z.length;for(this.clear();++Q<Ne;){var Ee=z[Q];this.set(Ee[0],Ee[1])}}M.prototype.clear=h,M.prototype.delete=d,M.prototype.get=v,M.prototype.has=k,M.prototype.set=A,a.exports=M}),F=c((s,a)=>{var h=q();function d(){this.__data__=new h,this.size=0}a.exports=d}),G=c((s,a)=>{function h(d){var v=this.__data__,k=v.delete(d);return this.size=v.size,k}a.exports=h}),X=c((s,a)=>{function h(d){return this.__data__.get(d)}a.exports=h}),Ce=c((s,a)=>{function h(d){return this.__data__.has(d)}a.exports=h}),Pe=c((s,a)=>{var h=typeof co=="object"&&co&&co.Object===Object&&co;a.exports=h}),we=c((s,a)=>{var h=Pe(),d=typeof self=="object"&&self&&self.Object===Object&&self,v=h||d||Function("return this")();a.exports=v}),se=c((s,a)=>{var h=we(),d=h.Symbol;a.exports=d}),ue=c((s,a)=>{var h=se(),d=Object.prototype,v=d.hasOwnProperty,k=d.toString,A=h?h.toStringTag:void 0;function M(z){var Q=v.call(z,A),Ne=z[A];try{z[A]=void 0;var Ee=!0}catch{}var Ye=k.call(z);return Ee&&(Q?z[A]=Ne:delete z[A]),Ye}a.exports=M}),Be=c((s,a)=>{var h=Object.prototype,d=h.toString;function v(k){return d.call(k)}a.exports=v}),Je=c((s,a)=>{var h=se(),d=ue(),v=Be(),k="[object Null]",A="[object Undefined]",M=h?h.toStringTag:void 0;function z(Q){return Q==null?Q===void 0?A:k:M&&M in Object(Q)?d(Q):v(Q)}a.exports=z}),$=c((s,a)=>{function h(d){var v=typeof d;return d!=null&&(v=="object"||v=="function")}a.exports=h}),J=c((s,a)=>{var h=Je(),d=$(),v="[object AsyncFunction]",k="[object Function]",A="[object GeneratorFunction]",M="[object Proxy]";function z(Q){if(!d(Q))return!1;var Ne=h(Q);return Ne==k||Ne==A||Ne==v||Ne==M}a.exports=z}),I=c((s,a)=>{var h=we(),d=h["__core-js_shared__"];a.exports=d}),te=c((s,a)=>{var h=I(),d=function(){var k=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}();function v(k){return!!d&&d in k}a.exports=v}),Z=c((s,a)=>{var h=Function.prototype,d=h.toString;function v(k){if(k!=null){try{return d.call(k)}catch{}try{return k+""}catch{}}return""}a.exports=v}),ee=c((s,a)=>{var h=J(),d=te(),v=$(),k=Z(),A=/[\\^$.*+?()[\]{}|]/g,M=/^\[object .+?Constructor\]$/,z=Function.prototype,Q=Object.prototype,Ne=z.toString,Ee=Q.hasOwnProperty,Ye=RegExp("^"+Ne.call(Ee).replace(A,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ht(Pt){if(!v(Pt)||d(Pt))return!1;var Ot=h(Pt)?Ye:M;return Ot.test(k(Pt))}a.exports=ht}),ve=c((s,a)=>{function h(d,v){return d==null?void 0:d[v]}a.exports=h}),V=c((s,a)=>{var h=ee(),d=ve();function v(k,A){var M=d(k,A);return h(M)?M:void 0}a.exports=v}),j=c((s,a)=>{var h=V(),d=we(),v=h(d,"Map");a.exports=v}),Y=c((s,a)=>{var h=V(),d=h(Object,"create");a.exports=d}),Ie=c((s,a)=>{var h=Y();function d(){this.__data__=h?h(null):{},this.size=0}a.exports=d}),D=c((s,a)=>{function h(d){var v=this.has(d)&&delete this.__data__[d];return this.size-=v?1:0,v}a.exports=h}),K=c((s,a)=>{var h=Y(),d="__lodash_hash_undefined__",v=Object.prototype,k=v.hasOwnProperty;function A(M){var z=this.__data__;if(h){var Q=z[M];return Q===d?void 0:Q}return k.call(z,M)?z[M]:void 0}a.exports=A}),he=c((s,a)=>{var h=Y(),d=Object.prototype,v=d.hasOwnProperty;function k(A){var M=this.__data__;return h?M[A]!==void 0:v.call(M,A)}a.exports=k}),_e=c((s,a)=>{var h=Y(),d="__lodash_hash_undefined__";function v(k,A){var M=this.__data__;return this.size+=this.has(k)?0:1,M[k]=h&&A===void 0?d:A,this}a.exports=v}),Le=c((s,a)=>{var h=Ie(),d=D(),v=K(),k=he(),A=_e();function M(z){var Q=-1,Ne=z==null?0:z.length;for(this.clear();++Q<Ne;){var Ee=z[Q];this.set(Ee[0],Ee[1])}}M.prototype.clear=h,M.prototype.delete=d,M.prototype.get=v,M.prototype.has=k,M.prototype.set=A,a.exports=M}),de=c((s,a)=>{var h=Le(),d=q(),v=j();function k(){this.size=0,this.__data__={hash:new h,map:new(v||d),string:new h}}a.exports=k}),Se=c((s,a)=>{function h(d){var v=typeof d;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?d!=="__proto__":d===null}a.exports=h}),Ae=c((s,a)=>{var h=Se();function d(v,k){var A=v.__data__;return h(k)?A[typeof k=="string"?"string":"hash"]:A.map}a.exports=d}),Ke=c((s,a)=>{var h=Ae();function d(v){var k=h(this,v).delete(v);return this.size-=k?1:0,k}a.exports=d}),rt=c((s,a)=>{var h=Ae();function d(v){return h(this,v).get(v)}a.exports=d}),ne=c((s,a)=>{var h=Ae();function d(v){return h(this,v).has(v)}a.exports=d}),ce=c((s,a)=>{var h=Ae();function d(v,k){var A=h(this,v),M=A.size;return A.set(v,k),this.size+=A.size==M?0:1,this}a.exports=d}),Re=c((s,a)=>{var h=de(),d=Ke(),v=rt(),k=ne(),A=ce();function M(z){var Q=-1,Ne=z==null?0:z.length;for(this.clear();++Q<Ne;){var Ee=z[Q];this.set(Ee[0],Ee[1])}}M.prototype.clear=h,M.prototype.delete=d,M.prototype.get=v,M.prototype.has=k,M.prototype.set=A,a.exports=M}),De=c((s,a)=>{var h=q(),d=j(),v=Re(),k=200;function A(M,z){var Q=this.__data__;if(Q instanceof h){var Ne=Q.__data__;if(!d||Ne.length<k-1)return Ne.push([M,z]),this.size=++Q.size,this;Q=this.__data__=new v(Ne)}return Q.set(M,z),this.size=Q.size,this}a.exports=A}),le=c((s,a)=>{var h=q(),d=F(),v=G(),k=X(),A=Ce(),M=De();function z(Q){var Ne=this.__data__=new h(Q);this.size=Ne.size}z.prototype.clear=d,z.prototype.delete=v,z.prototype.get=k,z.prototype.has=A,z.prototype.set=M,a.exports=z}),Ve=c((s,a)=>{var h=V(),d=function(){try{var v=h(Object,"defineProperty");return v({},"",{}),v}catch{}}();a.exports=d}),st=c((s,a)=>{var h=Ve();function d(v,k,A){k=="__proto__"&&h?h(v,k,{configurable:!0,enumerable:!0,value:A,writable:!0}):v[k]=A}a.exports=d}),Qe=c((s,a)=>{var h=st(),d=b();function v(k,A,M){(M!==void 0&&!d(k[A],M)||M===void 0&&!(A in k))&&h(k,A,M)}a.exports=v}),ot=c((s,a)=>{function h(d){return function(v,k,A){for(var M=-1,z=Object(v),Q=A(v),Ne=Q.length;Ne--;){var Ee=Q[d?Ne:++M];if(k(z[Ee],Ee,z)===!1)break}return v}}a.exports=h}),Oe=c((s,a)=>{var h=ot(),d=h();a.exports=d}),xe=c((s,a)=>{var h=we(),d=typeof s=="object"&&s&&!s.nodeType&&s,v=d&&typeof a=="object"&&a&&!a.nodeType&&a,k=v&&v.exports===d,A=k?h.Buffer:void 0,M=A?A.allocUnsafe:void 0;function z(Q,Ne){if(Ne)return Q.slice();var Ee=Q.length,Ye=M?M(Ee):new Q.constructor(Ee);return Q.copy(Ye),Ye}a.exports=z}),it=c((s,a)=>{var h=we(),d=h.Uint8Array;a.exports=d}),vt=c((s,a)=>{var h=it();function d(v){var k=new v.constructor(v.byteLength);return new h(k).set(new h(v)),k}a.exports=d}),Lt=c((s,a)=>{var h=vt();function d(v,k){var A=k?h(v.buffer):v.buffer;return new v.constructor(A,v.byteOffset,v.length)}a.exports=d}),ze=c((s,a)=>{function h(d,v){var k=-1,A=d.length;for(v||(v=Array(A));++k<A;)v[k]=d[k];return v}a.exports=h}),Dt=c((s,a)=>{var h=$(),d=Object.create,v=function(){function k(){}return function(A){if(!h(A))return{};if(d)return d(A);k.prototype=A;var M=new k;return k.prototype=void 0,M}}();a.exports=v}),Tt=c((s,a)=>{function h(d,v){return function(k){return d(v(k))}}a.exports=h}),jt=c((s,a)=>{var h=Tt(),d=h(Object.getPrototypeOf,Object);a.exports=d}),Vt=c((s,a)=>{var h=Object.prototype;function d(v){var k=v&&v.constructor,A=typeof k=="function"&&k.prototype||h;return v===A}a.exports=d}),Nt=c((s,a)=>{var h=Dt(),d=jt(),v=Vt();function k(A){return typeof A.constructor=="function"&&!v(A)?h(d(A)):{}}a.exports=k}),Pn=c((s,a)=>{function h(d){return d!=null&&typeof d=="object"}a.exports=h}),en=c((s,a)=>{var h=Je(),d=Pn(),v="[object Arguments]";function k(A){return d(A)&&h(A)==v}a.exports=k}),Jn=c((s,a)=>{var h=en(),d=Pn(),v=Object.prototype,k=v.hasOwnProperty,A=v.propertyIsEnumerable,M=h(function(){return arguments}())?h:function(z){return d(z)&&k.call(z,"callee")&&!A.call(z,"callee")};a.exports=M}),un=c((s,a)=>{var h=Array.isArray;a.exports=h}),xn=c((s,a)=>{var h=9007199254740991;function d(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=h}a.exports=d}),Yn=c((s,a)=>{var h=J(),d=xn();function v(k){return k!=null&&d(k.length)&&!h(k)}a.exports=v}),zt=c((s,a)=>{var h=Yn(),d=Pn();function v(k){return d(k)&&h(k)}a.exports=v}),Pr=c((s,a)=>{function h(){return!1}a.exports=h}),In=c((s,a)=>{var h=we(),d=Pr(),v=typeof s=="object"&&s&&!s.nodeType&&s,k=v&&typeof a=="object"&&a&&!a.nodeType&&a,A=k&&k.exports===v,M=A?h.Buffer:void 0,z=M?M.isBuffer:void 0,Q=z||d;a.exports=Q}),xi=c((s,a)=>{var h=Je(),d=jt(),v=Pn(),k="[object Object]",A=Function.prototype,M=Object.prototype,z=A.toString,Q=M.hasOwnProperty,Ne=z.call(Object);function Ee(Ye){if(!v(Ye)||h(Ye)!=k)return!1;var ht=d(Ye);if(ht===null)return!0;var Pt=Q.call(ht,"constructor")&&ht.constructor;return typeof Pt=="function"&&Pt instanceof Pt&&z.call(Pt)==Ne}a.exports=Ee}),Di=c((s,a)=>{var h=Je(),d=xn(),v=Pn(),k="[object Arguments]",A="[object Array]",M="[object Boolean]",z="[object Date]",Q="[object Error]",Ne="[object Function]",Ee="[object Map]",Ye="[object Number]",ht="[object Object]",Pt="[object RegExp]",Ot="[object Set]",Rt="[object String]",fn="[object WeakMap]",Te="[object ArrayBuffer]",Fe="[object DataView]",He="[object Float32Array]",gt="[object Float64Array]",et="[object Int8Array]",ft="[object Int16Array]",U="[object Int32Array]",ie="[object Uint8Array]",ge="[object Uint8ClampedArray]",me="[object Uint16Array]",ye="[object Uint32Array]",be={};be[He]=be[gt]=be[et]=be[ft]=be[U]=be[ie]=be[ge]=be[me]=be[ye]=!0,be[k]=be[A]=be[Te]=be[M]=be[Fe]=be[z]=be[Q]=be[Ne]=be[Ee]=be[Ye]=be[ht]=be[Pt]=be[Ot]=be[Rt]=be[fn]=!1;function $e(Ue){return v(Ue)&&d(Ue.length)&&!!be[h(Ue)]}a.exports=$e}),Un=c((s,a)=>{function h(d){return function(v){return d(v)}}a.exports=h}),cn=c((s,a)=>{var h=Pe(),d=typeof s=="object"&&s&&!s.nodeType&&s,v=d&&typeof a=="object"&&a&&!a.nodeType&&a,k=v&&v.exports===d,A=k&&h.process,M=function(){try{var z=v&&v.require&&v.require("util").types;return z||A&&A.binding&&A.binding("util")}catch{}}();a.exports=M}),Jt=c((s,a)=>{var h=Di(),d=Un(),v=cn(),k=v&&v.isTypedArray,A=k?d(k):h;a.exports=A}),Kt=c((s,a)=>{function h(d,v){if(!(v==="constructor"&&typeof d[v]=="function")&&v!="__proto__")return d[v]}a.exports=h}),li=c((s,a)=>{var h=st(),d=b(),v=Object.prototype,k=v.hasOwnProperty;function A(M,z,Q){var Ne=M[z];(!(k.call(M,z)&&d(Ne,Q))||Q===void 0&&!(z in M))&&h(M,z,Q)}a.exports=A}),Sr=c((s,a)=>{var h=li(),d=st();function v(k,A,M,z){var Q=!M;M||(M={});for(var Ne=-1,Ee=A.length;++Ne<Ee;){var Ye=A[Ne],ht=z?z(M[Ye],k[Ye],Ye,M,k):void 0;ht===void 0&&(ht=k[Ye]),Q?d(M,Ye,ht):h(M,Ye,ht)}return M}a.exports=v}),Er=c((s,a)=>{function h(d,v){for(var k=-1,A=Array(d);++k<d;)A[k]=v(k);return A}a.exports=h}),an=c((s,a)=>{var h=9007199254740991,d=/^(?:0|[1-9]\d*)$/;function v(k,A){var M=typeof k;return A=A??h,!!A&&(M=="number"||M!="symbol"&&d.test(k))&&k>-1&&k%1==0&&k<A}a.exports=v}),Yr=c((s,a)=>{var h=Er(),d=Jn(),v=un(),k=In(),A=an(),M=Jt(),z=Object.prototype,Q=z.hasOwnProperty;function Ne(Ee,Ye){var ht=v(Ee),Pt=!ht&&d(Ee),Ot=!ht&&!Pt&&k(Ee),Rt=!ht&&!Pt&&!Ot&&M(Ee),fn=ht||Pt||Ot||Rt,Te=fn?h(Ee.length,String):[],Fe=Te.length;for(var He in Ee)(Ye||Q.call(Ee,He))&&!(fn&&(He=="length"||Ot&&(He=="offset"||He=="parent")||Rt&&(He=="buffer"||He=="byteLength"||He=="byteOffset")||A(He,Fe)))&&Te.push(He);return Te}a.exports=Ne}),cs=c((s,a)=>{function h(d){var v=[];if(d!=null)for(var k in Object(d))v.push(k);return v}a.exports=h}),ar=c((s,a)=>{var h=$(),d=Vt(),v=cs(),k=Object.prototype,A=k.hasOwnProperty;function M(z){if(!h(z))return v(z);var Q=d(z),Ne=[];for(var Ee in z)Ee=="constructor"&&(Q||!A.call(z,Ee))||Ne.push(Ee);return Ne}a.exports=M}),qn=c((s,a)=>{var h=Yr(),d=ar(),v=Yn();function k(A){return v(A)?h(A,!0):d(A)}a.exports=k}),Ut=c((s,a)=>{var h=Sr(),d=qn();function v(k){return h(k,d(k))}a.exports=v}),lr=c((s,a)=>{var h=Qe(),d=xe(),v=Lt(),k=ze(),A=Nt(),M=Jn(),z=un(),Q=zt(),Ne=In(),Ee=J(),Ye=$(),ht=xi(),Pt=Jt(),Ot=Kt(),Rt=Ut();function fn(Te,Fe,He,gt,et,ft,U){var ie=Ot(Te,He),ge=Ot(Fe,He),me=U.get(ge);if(me){h(Te,He,me);return}var ye=ft?ft(ie,ge,He+"",Te,Fe,U):void 0,be=ye===void 0;if(be){var $e=z(ge),Ue=!$e&&Ne(ge),We=!$e&&!Ue&&Pt(ge);ye=ge,$e||Ue||We?z(ie)?ye=ie:Q(ie)?ye=k(ie):Ue?(be=!1,ye=d(ge,!0)):We?(be=!1,ye=v(ge,!0)):ye=[]:ht(ge)||M(ge)?(ye=ie,M(ie)?ye=Rt(ie):(!Ye(ie)||Ee(ie))&&(ye=A(ge))):be=!1}be&&(U.set(ge,ye),et(ye,ge,gt,ft,U),U.delete(ge)),h(Te,He,ye)}a.exports=fn}),go=c((s,a)=>{var h=le(),d=Qe(),v=Oe(),k=lr(),A=$(),M=qn(),z=Kt();function Q(Ne,Ee,Ye,ht,Pt){Ne!==Ee&&v(Ee,function(Ot,Rt){if(Pt||(Pt=new h),A(Ot))k(Ne,Ee,Rt,Ye,Q,ht,Pt);else{var fn=ht?ht(z(Ne,Rt),Ot,Rt+"",Ne,Ee,Pt):void 0;fn===void 0&&(fn=Ot),d(Ne,Rt,fn)}},M)}a.exports=Q}),Xr=c((s,a)=>{function h(d){return d}a.exports=h}),Ar=c((s,a)=>{function h(d,v,k){switch(k.length){case 0:return d.call(v);case 1:return d.call(v,k[0]);case 2:return d.call(v,k[0],k[1]);case 3:return d.call(v,k[0],k[1],k[2])}return d.apply(v,k)}a.exports=h}),_r=c((s,a)=>{var h=Ar(),d=Math.max;function v(k,A,M){return A=d(A===void 0?k.length-1:A,0),function(){for(var z=arguments,Q=-1,Ne=d(z.length-A,0),Ee=Array(Ne);++Q<Ne;)Ee[Q]=z[A+Q];Q=-1;for(var Ye=Array(A+1);++Q<A;)Ye[Q]=z[Q];return Ye[A]=M(Ee),h(k,this,Ye)}}a.exports=v}),Mr=c((s,a)=>{function h(d){return function(){return d}}a.exports=h}),Xi=c((s,a)=>{var h=Mr(),d=Ve(),v=Xr(),k=d?function(A,M){return d(A,"toString",{configurable:!0,enumerable:!1,value:h(M),writable:!0})}:v;a.exports=k}),yr=c((s,a)=>{var h=800,d=16,v=Date.now;function k(A){var M=0,z=0;return function(){var Q=v(),Ne=d-(Q-z);if(z=Q,Ne>0){if(++M>=h)return arguments[0]}else M=0;return A.apply(void 0,arguments)}}a.exports=k}),hs=c((s,a)=>{var h=Xi(),d=yr(),v=d(h);a.exports=v}),vo=c((s,a)=>{var h=Xr(),d=_r(),v=hs();function k(A,M){return v(d(A,M,h),A+"")}a.exports=k}),Uo=c((s,a)=>{var h=b(),d=Yn(),v=an(),k=$();function A(M,z,Q){if(!k(Q))return!1;var Ne=typeof z;return(Ne=="number"?d(Q)&&v(z,Q.length):Ne=="string"&&z in Q)?h(Q[z],M):!1}a.exports=A}),qo=c((s,a)=>{var h=vo(),d=Uo();function v(k){return h(function(A,M){var z=-1,Q=M.length,Ne=Q>1?M[Q-1]:void 0,Ee=Q>2?M[2]:void 0;for(Ne=k.length>3&&typeof Ne=="function"?(Q--,Ne):void 0,Ee&&d(M[0],M[1],Ee)&&(Ne=Q<3?void 0:Ne,Q=1),A=Object(A);++z<Q;){var Ye=M[z];Ye&&k(A,Ye,z,Ne)}return A})}a.exports=v}),Ms=c((s,a)=>{var h=go(),d=qo(),v=d(function(k,A,M){h(k,A,M)});a.exports=v}),Ws=c((s,a)=>{var h=Je(),d=Pn(),v="[object Symbol]";function k(A){return typeof A=="symbol"||d(A)&&h(A)==v}a.exports=k}),_o=c((s,a)=>{var h=un(),d=Ws(),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/;function A(M,z){if(h(M))return!1;var Q=typeof M;return Q=="number"||Q=="symbol"||Q=="boolean"||M==null||d(M)?!0:k.test(M)||!v.test(M)||z!=null&&M in Object(z)}a.exports=A}),vl=c((s,a)=>{var h=Re(),d="Expected a function";function v(k,A){if(typeof k!="function"||A!=null&&typeof A!="function")throw new TypeError(d);var M=function(){var z=arguments,Q=A?A.apply(this,z):z[0],Ne=M.cache;if(Ne.has(Q))return Ne.get(Q);var Ee=k.apply(this,z);return M.cache=Ne.set(Q,Ee)||Ne,Ee};return M.cache=new(v.Cache||h),M}v.Cache=h,a.exports=v}),_l=c((s,a)=>{var h=vl(),d=500;function v(k){var A=h(k,function(z){return M.size===d&&M.clear(),z}),M=A.cache;return A}a.exports=v}),$o=c((s,a)=>{var h=_l(),d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,k=h(function(A){var M=[];return A.charCodeAt(0)===46&&M.push(""),A.replace(d,function(z,Q,Ne,Ee){M.push(Ne?Ee.replace(v,"$1"):Q||z)}),M});a.exports=k}),za=c((s,a)=>{function h(d,v){for(var k=-1,A=d==null?0:d.length,M=Array(A);++k<A;)M[k]=v(d[k],k,d);return M}a.exports=h}),yl=c((s,a)=>{var h=se(),d=za(),v=un(),k=Ws(),A=h?h.prototype:void 0,M=A?A.toString:void 0;function z(Q){if(typeof Q=="string")return Q;if(v(Q))return d(Q,z)+"";if(k(Q))return M?M.call(Q):"";var Ne=Q+"";return Ne=="0"&&1/Q==-1/0?"-0":Ne}a.exports=z}),yo=c((s,a)=>{var h=yl();function d(v){return v==null?"":h(v)}a.exports=d}),bo=c((s,a)=>{var h=un(),d=_o(),v=$o(),k=yo();function A(M,z){return h(M)?M:d(M,z)?[M]:v(k(M))}a.exports=A}),pa=c((s,a)=>{var h=Ws();function d(v){if(typeof v=="string"||h(v))return v;var k=v+"";return k=="0"&&1/v==-1/0?"-0":k}a.exports=d}),Ua=c((s,a)=>{var h=bo(),d=pa();function v(k,A){A=h(A,k);for(var M=0,z=A.length;k!=null&&M<z;)k=k[d(A[M++])];return M&&M==z?k:void 0}a.exports=v}),br=c((s,a)=>{var h=Ua();function d(v,k,A){var M=v==null?void 0:h(v,k);return M===void 0?A:M}a.exports=d}),On=c((s,a)=>{(function(h,d){typeof s=="object"&&typeof a<"u"?a.exports=d():(h=h||self).RBush=d()})(s,function(){function h(Te,Fe,He,gt,et){(function ft(U,ie,ge,me,ye){for(;me>ge;){if(me-ge>600){var be=me-ge+1,$e=ie-ge+1,Ue=Math.log(be),We=.5*Math.exp(2*Ue/3),lt=.5*Math.sqrt(Ue*We*(be-We)/be)*($e-be/2<0?-1:1),at=Math.max(ge,Math.floor(ie-$e*We/be+lt)),Et=Math.min(me,Math.floor(ie+(be-$e)*We/be+lt));ft(U,ie,at,Et,ye)}var Ht=U[ie],Yt=ge,tn=me;for(d(U,ge,ie),ye(U[me],Ht)>0&&d(U,ge,me);Yt<tn;){for(d(U,Yt,tn),Yt++,tn--;ye(U[Yt],Ht)<0;)Yt++;for(;ye(U[tn],Ht)>0;)tn--}ye(U[ge],Ht)===0?d(U,ge,tn):d(U,++tn,me),tn<=ie&&(ge=tn+1),ie<=tn&&(me=tn-1)}})(Te,Fe,He||0,gt||Te.length-1,et||v)}function d(Te,Fe,He){var gt=Te[Fe];Te[Fe]=Te[He],Te[He]=gt}function v(Te,Fe){return Te<Fe?-1:Te>Fe?1:0}var k=function(Te){Te===void 0&&(Te=9),this._maxEntries=Math.max(4,Te),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function A(Te,Fe,He){if(!He)return Fe.indexOf(Te);for(var gt=0;gt<Fe.length;gt++)if(He(Te,Fe[gt]))return gt;return-1}function M(Te,Fe){z(Te,0,Te.children.length,Fe,Te)}function z(Te,Fe,He,gt,et){et||(et=Rt(null)),et.minX=1/0,et.minY=1/0,et.maxX=-1/0,et.maxY=-1/0;for(var ft=Fe;ft<He;ft++){var U=Te.children[ft];Q(et,Te.leaf?gt(U):U)}return et}function Q(Te,Fe){return Te.minX=Math.min(Te.minX,Fe.minX),Te.minY=Math.min(Te.minY,Fe.minY),Te.maxX=Math.max(Te.maxX,Fe.maxX),Te.maxY=Math.max(Te.maxY,Fe.maxY),Te}function Ne(Te,Fe){return Te.minX-Fe.minX}function Ee(Te,Fe){return Te.minY-Fe.minY}function Ye(Te){return(Te.maxX-Te.minX)*(Te.maxY-Te.minY)}function ht(Te){return Te.maxX-Te.minX+(Te.maxY-Te.minY)}function Pt(Te,Fe){return Te.minX<=Fe.minX&&Te.minY<=Fe.minY&&Fe.maxX<=Te.maxX&&Fe.maxY<=Te.maxY}function Ot(Te,Fe){return Fe.minX<=Te.maxX&&Fe.minY<=Te.maxY&&Fe.maxX>=Te.minX&&Fe.maxY>=Te.minY}function Rt(Te){return{children:Te,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function fn(Te,Fe,He,gt,et){for(var ft=[Fe,He];ft.length;)if(!((He=ft.pop())-(Fe=ft.pop())<=gt)){var U=Fe+Math.ceil((He-Fe)/gt/2)*gt;h(Te,U,Fe,He,et),ft.push(Fe,U,U,He)}}return k.prototype.all=function(){return this._all(this.data,[])},k.prototype.search=function(Te){var Fe=this.data,He=[];if(!Ot(Te,Fe))return He;for(var gt=this.toBBox,et=[];Fe;){for(var ft=0;ft<Fe.children.length;ft++){var U=Fe.children[ft],ie=Fe.leaf?gt(U):U;Ot(Te,ie)&&(Fe.leaf?He.push(U):Pt(Te,ie)?this._all(U,He):et.push(U))}Fe=et.pop()}return He},k.prototype.collides=function(Te){var Fe=this.data;if(!Ot(Te,Fe))return!1;for(var He=[];Fe;){for(var gt=0;gt<Fe.children.length;gt++){var et=Fe.children[gt],ft=Fe.leaf?this.toBBox(et):et;if(Ot(Te,ft)){if(Fe.leaf||Pt(Te,ft))return!0;He.push(et)}}Fe=He.pop()}return!1},k.prototype.load=function(Te){if(!Te||!Te.length)return this;if(Te.length<this._minEntries){for(var Fe=0;Fe<Te.length;Fe++)this.insert(Te[Fe]);return this}var He=this._build(Te.slice(),0,Te.length-1,0);if(this.data.children.length)if(this.data.height===He.height)this._splitRoot(this.data,He);else{if(this.data.height<He.height){var gt=this.data;this.data=He,He=gt}this._insert(He,this.data.height-He.height-1,!0)}else this.data=He;return this},k.prototype.insert=function(Te){return Te&&this._insert(Te,this.data.height-1),this},k.prototype.clear=function(){return this.data=Rt([]),this},k.prototype.remove=function(Te,Fe){if(!Te)return this;for(var He,gt,et,ft=this.data,U=this.toBBox(Te),ie=[],ge=[];ft||ie.length;){if(ft||(ft=ie.pop(),gt=ie[ie.length-1],He=ge.pop(),et=!0),ft.leaf){var me=A(Te,ft.children,Fe);if(me!==-1)return ft.children.splice(me,1),ie.push(ft),this._condense(ie),this}et||ft.leaf||!Pt(ft,U)?gt?(He++,ft=gt.children[He],et=!1):ft=null:(ie.push(ft),ge.push(He),He=0,gt=ft,ft=ft.children[0])}return this},k.prototype.toBBox=function(Te){return Te},k.prototype.compareMinX=function(Te,Fe){return Te.minX-Fe.minX},k.prototype.compareMinY=function(Te,Fe){return Te.minY-Fe.minY},k.prototype.toJSON=function(){return this.data},k.prototype.fromJSON=function(Te){return this.data=Te,this},k.prototype._all=function(Te,Fe){for(var He=[];Te;)Te.leaf?Fe.push.apply(Fe,Te.children):He.push.apply(He,Te.children),Te=He.pop();return Fe},k.prototype._build=function(Te,Fe,He,gt){var et,ft=He-Fe+1,U=this._maxEntries;if(ft<=U)return M(et=Rt(Te.slice(Fe,He+1)),this.toBBox),et;gt||(gt=Math.ceil(Math.log(ft)/Math.log(U)),U=Math.ceil(ft/Math.pow(U,gt-1))),(et=Rt([])).leaf=!1,et.height=gt;var ie=Math.ceil(ft/U),ge=ie*Math.ceil(Math.sqrt(U));fn(Te,Fe,He,ge,this.compareMinX);for(var me=Fe;me<=He;me+=ge){var ye=Math.min(me+ge-1,He);fn(Te,me,ye,ie,this.compareMinY);for(var be=me;be<=ye;be+=ie){var $e=Math.min(be+ie-1,ye);et.children.push(this._build(Te,be,$e,gt-1))}}return M(et,this.toBBox),et},k.prototype._chooseSubtree=function(Te,Fe,He,gt){for(;gt.push(Fe),!Fe.leaf&&gt.length-1!==He;){for(var et=1/0,ft=1/0,U=void 0,ie=0;ie<Fe.children.length;ie++){var ge=Fe.children[ie],me=Ye(ge),ye=(be=Te,$e=ge,(Math.max($e.maxX,be.maxX)-Math.min($e.minX,be.minX))*(Math.max($e.maxY,be.maxY)-Math.min($e.minY,be.minY))-me);ye<ft?(ft=ye,et=me<et?me:et,U=ge):ye===ft&&me<et&&(et=me,U=ge)}Fe=U||Fe.children[0]}var be,$e;return Fe},k.prototype._insert=function(Te,Fe,He){var gt=He?Te:this.toBBox(Te),et=[],ft=this._chooseSubtree(gt,this.data,Fe,et);for(ft.children.push(Te),Q(ft,gt);Fe>=0&&et[Fe].children.length>this._maxEntries;)this._split(et,Fe),Fe--;this._adjustParentBBoxes(gt,et,Fe)},k.prototype._split=function(Te,Fe){var He=Te[Fe],gt=He.children.length,et=this._minEntries;this._chooseSplitAxis(He,et,gt);var ft=this._chooseSplitIndex(He,et,gt),U=Rt(He.children.splice(ft,He.children.length-ft));U.height=He.height,U.leaf=He.leaf,M(He,this.toBBox),M(U,this.toBBox),Fe?Te[Fe-1].children.push(U):this._splitRoot(He,U)},k.prototype._splitRoot=function(Te,Fe){this.data=Rt([Te,Fe]),this.data.height=Te.height+1,this.data.leaf=!1,M(this.data,this.toBBox)},k.prototype._chooseSplitIndex=function(Te,Fe,He){for(var gt,et,ft,U,ie,ge,me,ye=1/0,be=1/0,$e=Fe;$e<=He-Fe;$e++){var Ue=z(Te,0,$e,this.toBBox),We=z(Te,$e,He,this.toBBox),lt=(et=Ue,ft=We,U=void 0,ie=void 0,ge=void 0,me=void 0,U=Math.max(et.minX,ft.minX),ie=Math.max(et.minY,ft.minY),ge=Math.min(et.maxX,ft.maxX),me=Math.min(et.maxY,ft.maxY),Math.max(0,ge-U)*Math.max(0,me-ie)),at=Ye(Ue)+Ye(We);lt<ye?(ye=lt,gt=$e,be=at<be?at:be):lt===ye&&at<be&&(be=at,gt=$e)}return gt||He-Fe},k.prototype._chooseSplitAxis=function(Te,Fe,He){var gt=Te.leaf?this.compareMinX:Ne,et=Te.leaf?this.compareMinY:Ee;this._allDistMargin(Te,Fe,He,gt)<this._allDistMargin(Te,Fe,He,et)&&Te.children.sort(gt)},k.prototype._allDistMargin=function(Te,Fe,He,gt){Te.children.sort(gt);for(var et=this.toBBox,ft=z(Te,0,Fe,et),U=z(Te,He-Fe,He,et),ie=ht(ft)+ht(U),ge=Fe;ge<He-Fe;ge++){var me=Te.children[ge];Q(ft,Te.leaf?et(me):me),ie+=ht(ft)}for(var ye=He-Fe-1;ye>=Fe;ye--){var be=Te.children[ye];Q(U,Te.leaf?et(be):be),ie+=ht(U)}return ie},k.prototype._adjustParentBBoxes=function(Te,Fe,He){for(var gt=He;gt>=0;gt--)Q(Fe[gt],Te)},k.prototype._condense=function(Te){for(var Fe=Te.length-1,He=void 0;Fe>=0;Fe--)Te[Fe].children.length===0?Fe>0?(He=Te[Fe-1].children).splice(He.indexOf(Te[Fe]),1):this.clear():M(Te[Fe],this.toBBox)},k})}),_n=c(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(me,ye,be){be===void 0&&(be={});var $e={type:"Feature"};return(be.id===0||be.id)&&($e.id=be.id),be.bbox&&($e.bbox=be.bbox),$e.properties=ye||{},$e.geometry=me,$e}s.feature=a;function h(me,ye,be){switch(me){case"Point":return d(ye).geometry;case"LineString":return M(ye).geometry;case"Polygon":return k(ye).geometry;case"MultiPoint":return Ee(ye).geometry;case"MultiLineString":return Ne(ye).geometry;case"MultiPolygon":return Ye(ye).geometry;default:throw new Error(me+" is invalid")}}s.geometry=h;function d(me,ye,be){if(be===void 0&&(be={}),!me)throw new Error("coordinates is required");if(!Array.isArray(me))throw new Error("coordinates must be an Array");if(me.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ft(me[0])||!ft(me[1]))throw new Error("coordinates must contain numbers");var $e={type:"Point",coordinates:me};return a($e,ye,be)}s.point=d;function v(me,ye,be){return be===void 0&&(be={}),Q(me.map(function($e){return d($e,ye)}),be)}s.points=v;function k(me,ye,be){be===void 0&&(be={});for(var $e=0,Ue=me;$e<Ue.length;$e++){var We=Ue[$e];if(We.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var lt=0;lt<We[We.length-1].length;lt++)if(We[We.length-1][lt]!==We[0][lt])throw new Error("First and last Position are not equivalent.")}var at={type:"Polygon",coordinates:me};return a(at,ye,be)}s.polygon=k;function A(me,ye,be){return be===void 0&&(be={}),Q(me.map(function($e){return k($e,ye)}),be)}s.polygons=A;function M(me,ye,be){if(be===void 0&&(be={}),me.length<2)throw new Error("coordinates must be an array of two or more positions");var $e={type:"LineString",coordinates:me};return a($e,ye,be)}s.lineString=M;function z(me,ye,be){return be===void 0&&(be={}),Q(me.map(function($e){return M($e,ye)}),be)}s.lineStrings=z;function Q(me,ye){ye===void 0&&(ye={});var be={type:"FeatureCollection"};return ye.id&&(be.id=ye.id),ye.bbox&&(be.bbox=ye.bbox),be.features=me,be}s.featureCollection=Q;function Ne(me,ye,be){be===void 0&&(be={});var $e={type:"MultiLineString",coordinates:me};return a($e,ye,be)}s.multiLineString=Ne;function Ee(me,ye,be){be===void 0&&(be={});var $e={type:"MultiPoint",coordinates:me};return a($e,ye,be)}s.multiPoint=Ee;function Ye(me,ye,be){be===void 0&&(be={});var $e={type:"MultiPolygon",coordinates:me};return a($e,ye,be)}s.multiPolygon=Ye;function ht(me,ye,be){be===void 0&&(be={});var $e={type:"GeometryCollection",geometries:me};return a($e,ye,be)}s.geometryCollection=ht;function Pt(me,ye){if(ye===void 0&&(ye=0),ye&&!(ye>=0))throw new Error("precision must be a positive number");var be=Math.pow(10,ye||0);return Math.round(me*be)/be}s.round=Pt;function Ot(me,ye){ye===void 0&&(ye="kilometers");var be=s.factors[ye];if(!be)throw new Error(ye+" units is invalid");return me*be}s.radiansToLength=Ot;function Rt(me,ye){ye===void 0&&(ye="kilometers");var be=s.factors[ye];if(!be)throw new Error(ye+" units is invalid");return me/be}s.lengthToRadians=Rt;function fn(me,ye){return Fe(Rt(me,ye))}s.lengthToDegrees=fn;function Te(me){var ye=me%360;return ye<0&&(ye+=360),ye}s.bearingToAzimuth=Te;function Fe(me){var ye=me%(2*Math.PI);return ye*180/Math.PI}s.radiansToDegrees=Fe;function He(me){var ye=me%360;return ye*Math.PI/180}s.degreesToRadians=He;function gt(me,ye,be){if(ye===void 0&&(ye="kilometers"),be===void 0&&(be="kilometers"),!(me>=0))throw new Error("length must be a positive number");return Ot(Rt(me,ye),be)}s.convertLength=gt;function et(me,ye,be){if(ye===void 0&&(ye="meters"),be===void 0&&(be="kilometers"),!(me>=0))throw new Error("area must be a positive number");var $e=s.areaFactors[ye];if(!$e)throw new Error("invalid original units");var Ue=s.areaFactors[be];if(!Ue)throw new Error("invalid final units");return me/$e*Ue}s.convertArea=et;function ft(me){return!isNaN(me)&&me!==null&&!Array.isArray(me)}s.isNumber=ft;function U(me){return!!me&&me.constructor===Object}s.isObject=U;function ie(me){if(!me)throw new Error("bbox is required");if(!Array.isArray(me))throw new Error("bbox must be an Array");if(me.length!==4&&me.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");me.forEach(function(ye){if(!ft(ye))throw new Error("bbox must only contain numbers")})}s.validateBBox=ie;function ge(me){if(!me)throw new Error("id is required");if(["string","number"].indexOf(typeof me)===-1)throw new Error("id must be a number or a string")}s.validateId=ge}),Zs=c(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=_n();function h(Fe,He,gt){if(Fe!==null)for(var et,ft,U,ie,ge,me,ye,be=0,$e=0,Ue,We=Fe.type,lt=We==="FeatureCollection",at=We==="Feature",Et=lt?Fe.features.length:1,Ht=0;Ht<Et;Ht++){ye=lt?Fe.features[Ht].geometry:at?Fe.geometry:Fe,Ue=ye?ye.type==="GeometryCollection":!1,ge=Ue?ye.geometries.length:1;for(var Yt=0;Yt<ge;Yt++){var tn=0,zn=0;if(ie=Ue?ye.geometries[Yt]:ye,ie!==null){me=ie.coordinates;var Gn=ie.type;switch(be=gt&&(Gn==="Polygon"||Gn==="MultiPolygon")?1:0,Gn){case null:break;case"Point":if(He(me,$e,Ht,tn,zn)===!1)return!1;$e++,tn++;break;case"LineString":case"MultiPoint":for(et=0;et<me.length;et++){if(He(me[et],$e,Ht,tn,zn)===!1)return!1;$e++,Gn==="MultiPoint"&&tn++}Gn==="LineString"&&tn++;break;case"Polygon":case"MultiLineString":for(et=0;et<me.length;et++){for(ft=0;ft<me[et].length-be;ft++){if(He(me[et][ft],$e,Ht,tn,zn)===!1)return!1;$e++}Gn==="MultiLineString"&&tn++,Gn==="Polygon"&&zn++}Gn==="Polygon"&&tn++;break;case"MultiPolygon":for(et=0;et<me.length;et++){for(zn=0,ft=0;ft<me[et].length;ft++){for(U=0;U<me[et][ft].length-be;U++){if(He(me[et][ft][U],$e,Ht,tn,zn)===!1)return!1;$e++}zn++}tn++}break;case"GeometryCollection":for(et=0;et<ie.geometries.length;et++)if(h(ie.geometries[et],He,gt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function d(Fe,He,gt,et){var ft=gt;return h(Fe,function(U,ie,ge,me,ye){ie===0&&gt===void 0?ft=U:ft=He(ft,U,ie,ge,me,ye)},et),ft}function v(Fe,He){var gt;switch(Fe.type){case"FeatureCollection":for(gt=0;gt<Fe.features.length&&He(Fe.features[gt].properties,gt)!==!1;gt++);break;case"Feature":He(Fe.properties,0);break}}function k(Fe,He,gt){var et=gt;return v(Fe,function(ft,U){U===0&&gt===void 0?et=ft:et=He(et,ft,U)}),et}function A(Fe,He){if(Fe.type==="Feature")He(Fe,0);else if(Fe.type==="FeatureCollection")for(var gt=0;gt<Fe.features.length&&He(Fe.features[gt],gt)!==!1;gt++);}function M(Fe,He,gt){var et=gt;return A(Fe,function(ft,U){U===0&&gt===void 0?et=ft:et=He(et,ft,U)}),et}function z(Fe){var He=[];return h(Fe,function(gt){He.push(gt)}),He}function Q(Fe,He){var gt,et,ft,U,ie,ge,me,ye,be,$e,Ue=0,We=Fe.type==="FeatureCollection",lt=Fe.type==="Feature",at=We?Fe.features.length:1;for(gt=0;gt<at;gt++){for(ge=We?Fe.features[gt].geometry:lt?Fe.geometry:Fe,ye=We?Fe.features[gt].properties:lt?Fe.properties:{},be=We?Fe.features[gt].bbox:lt?Fe.bbox:void 0,$e=We?Fe.features[gt].id:lt?Fe.id:void 0,me=ge?ge.type==="GeometryCollection":!1,ie=me?ge.geometries.length:1,ft=0;ft<ie;ft++){if(U=me?ge.geometries[ft]:ge,U===null){if(He(null,Ue,ye,be,$e)===!1)return!1;continue}switch(U.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(He(U,Ue,ye,be,$e)===!1)return!1;break}case"GeometryCollection":{for(et=0;et<U.geometries.length;et++)if(He(U.geometries[et],Ue,ye,be,$e)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ue++}}function Ne(Fe,He,gt){var et=gt;return Q(Fe,function(ft,U,ie,ge,me){U===0&&gt===void 0?et=ft:et=He(et,ft,U,ie,ge,me)}),et}function Ee(Fe,He){Q(Fe,function(gt,et,ft,U,ie){var ge=gt===null?null:gt.type;switch(ge){case null:case"Point":case"LineString":case"Polygon":return He(a.feature(gt,ft,{bbox:U,id:ie}),et,0)===!1?!1:void 0}var me;switch(ge){case"MultiPoint":me="Point";break;case"MultiLineString":me="LineString";break;case"MultiPolygon":me="Polygon";break}for(var ye=0;ye<gt.coordinates.length;ye++){var be=gt.coordinates[ye],$e={type:me,coordinates:be};if(He(a.feature($e,ft),et,ye)===!1)return!1}})}function Ye(Fe,He,gt){var et=gt;return Ee(Fe,function(ft,U,ie){U===0&&ie===0&&gt===void 0?et=ft:et=He(et,ft,U,ie)}),et}function ht(Fe,He){Ee(Fe,function(gt,et,ft){var U=0;if(gt.geometry){var ie=gt.geometry.type;if(!(ie==="Point"||ie==="MultiPoint")){var ge,me=0,ye=0,be=0;if(h(gt,function($e,Ue,We,lt,at){if(ge===void 0||et>me||lt>ye||at>be){ge=$e,me=et,ye=lt,be=at,U=0;return}var Et=a.lineString([ge,$e],gt.properties);if(He(Et,et,ft,at,U)===!1)return!1;U++,ge=$e})===!1)return!1}}})}function Pt(Fe,He,gt){var et=gt,ft=!1;return ht(Fe,function(U,ie,ge,me,ye){ft===!1&&gt===void 0?et=U:et=He(et,U,ie,ge,me,ye),ft=!0}),et}function Ot(Fe,He){if(!Fe)throw new Error("geojson is required");Ee(Fe,function(gt,et,ft){if(gt.geometry!==null){var U=gt.geometry.type,ie=gt.geometry.coordinates;switch(U){case"LineString":if(He(gt,et,ft,0,0)===!1)return!1;break;case"Polygon":for(var ge=0;ge<ie.length;ge++)if(He(a.lineString(ie[ge],gt.properties),et,ft,ge)===!1)return!1;break}}})}function Rt(Fe,He,gt){var et=gt;return Ot(Fe,function(ft,U,ie,ge){U===0&&gt===void 0?et=ft:et=He(et,ft,U,ie,ge)}),et}function fn(Fe,He){if(He=He||{},!a.isObject(He))throw new Error("options is invalid");var gt=He.featureIndex||0,et=He.multiFeatureIndex||0,ft=He.geometryIndex||0,U=He.segmentIndex||0,ie=He.properties,ge;switch(Fe.type){case"FeatureCollection":gt<0&&(gt=Fe.features.length+gt),ie=ie||Fe.features[gt].properties,ge=Fe.features[gt].geometry;break;case"Feature":ie=ie||Fe.properties,ge=Fe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ge=Fe;break;default:throw new Error("geojson is invalid")}if(ge===null)return null;var me=ge.coordinates;switch(ge.type){case"Point":case"MultiPoint":return null;case"LineString":return U<0&&(U=me.length+U-1),a.lineString([me[U],me[U+1]],ie,He);case"Polygon":return ft<0&&(ft=me.length+ft),U<0&&(U=me[ft].length+U-1),a.lineString([me[ft][U],me[ft][U+1]],ie,He);case"MultiLineString":return et<0&&(et=me.length+et),U<0&&(U=me[et].length+U-1),a.lineString([me[et][U],me[et][U+1]],ie,He);case"MultiPolygon":return et<0&&(et=me.length+et),ft<0&&(ft=me[et].length+ft),U<0&&(U=me[et][ft].length-U-1),a.lineString([me[et][ft][U],me[et][ft][U+1]],ie,He)}throw new Error("geojson is invalid")}function Te(Fe,He){if(He=He||{},!a.isObject(He))throw new Error("options is invalid");var gt=He.featureIndex||0,et=He.multiFeatureIndex||0,ft=He.geometryIndex||0,U=He.coordIndex||0,ie=He.properties,ge;switch(Fe.type){case"FeatureCollection":gt<0&&(gt=Fe.features.length+gt),ie=ie||Fe.features[gt].properties,ge=Fe.features[gt].geometry;break;case"Feature":ie=ie||Fe.properties,ge=Fe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ge=Fe;break;default:throw new Error("geojson is invalid")}if(ge===null)return null;var me=ge.coordinates;switch(ge.type){case"Point":return a.point(me,ie,He);case"MultiPoint":return et<0&&(et=me.length+et),a.point(me[et],ie,He);case"LineString":return U<0&&(U=me.length+U),a.point(me[U],ie,He);case"Polygon":return ft<0&&(ft=me.length+ft),U<0&&(U=me[ft].length+U),a.point(me[ft][U],ie,He);case"MultiLineString":return et<0&&(et=me.length+et),U<0&&(U=me[et].length+U),a.point(me[et][U],ie,He);case"MultiPolygon":return et<0&&(et=me.length+et),ft<0&&(ft=me[et].length+ft),U<0&&(U=me[et][ft].length-U),a.point(me[et][ft][U],ie,He)}throw new Error("geojson is invalid")}s.coordAll=z,s.coordEach=h,s.coordReduce=d,s.featureEach=A,s.featureReduce=M,s.findPoint=Te,s.findSegment=fn,s.flattenEach=Ee,s.flattenReduce=Ye,s.geomEach=Q,s.geomReduce=Ne,s.lineEach=Ot,s.lineReduce=Rt,s.propEach=v,s.propReduce=k,s.segmentEach=ht,s.segmentReduce=Pt}),Bs=c(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=Zs();function h(d){var v=[1/0,1/0,-1/0,-1/0];return a.coordEach(d,function(k){v[0]>k[0]&&(v[0]=k[0]),v[1]>k[1]&&(v[1]=k[1]),v[2]<k[0]&&(v[2]=k[0]),v[3]<k[1]&&(v[3]=k[1])}),v}h.default=h,s.default=h}),fs=c((s,a)=>{var h=On(),d=_n(),v=Zs(),k=Bs().default,A=v.featureEach;v.coordEach,d.polygon;var M=d.featureCollection;function z(Q){var Ne=new h(Q);return Ne.insert=function(Ee){if(Ee.type!=="Feature")throw new Error("invalid feature");return Ee.bbox=Ee.bbox?Ee.bbox:k(Ee),h.prototype.insert.call(this,Ee)},Ne.load=function(Ee){var Ye=[];return Array.isArray(Ee)?Ee.forEach(function(ht){if(ht.type!=="Feature")throw new Error("invalid features");ht.bbox=ht.bbox?ht.bbox:k(ht),Ye.push(ht)}):A(Ee,function(ht){if(ht.type!=="Feature")throw new Error("invalid features");ht.bbox=ht.bbox?ht.bbox:k(ht),Ye.push(ht)}),h.prototype.load.call(this,Ye)},Ne.remove=function(Ee,Ye){if(Ee.type!=="Feature")throw new Error("invalid feature");return Ee.bbox=Ee.bbox?Ee.bbox:k(Ee),h.prototype.remove.call(this,Ee,Ye)},Ne.clear=function(){return h.prototype.clear.call(this)},Ne.search=function(Ee){var Ye=h.prototype.search.call(this,this.toBBox(Ee));return M(Ye)},Ne.collides=function(Ee){return h.prototype.collides.call(this,this.toBBox(Ee))},Ne.all=function(){var Ee=h.prototype.all.call(this);return M(Ee)},Ne.toJSON=function(){return h.prototype.toJSON.call(this)},Ne.fromJSON=function(Ee){return h.prototype.fromJSON.call(this,Ee)},Ne.toBBox=function(Ee){var Ye;if(Ee.bbox)Ye=Ee.bbox;else if(Array.isArray(Ee)&&Ee.length===4)Ye=Ee;else if(Array.isArray(Ee)&&Ee.length===6)Ye=[Ee[0],Ee[1],Ee[3],Ee[4]];else if(Ee.type==="Feature")Ye=k(Ee);else if(Ee.type==="FeatureCollection")Ye=k(Ee);else throw new Error("invalid geojson");return{minX:Ye[0],minY:Ye[1],maxX:Ye[2],maxY:Ye[3]}},Ne}a.exports=z,a.exports.default=z});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,d=arguments[1],v=0;v<h;v++)if(s.call(d,a[v],v,a))return v;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,d=arguments[1],v=0;v<h;v++){var k=a[v];if(s.call(d,k,v,a))return k}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var a=1;a<arguments.length;a++){var h=arguments[a];if(h!=null)for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(s[d]=h[d])}return s}),function(s){s.forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,a){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),d=h.length>>>0;if(d===0)return!1;var v=a|0,k=Math.max(v>=0?v:d-Math.abs(v),0);function A(M,z){return M===z||typeof M=="number"&&typeof z=="number"&&isNaN(M)&&isNaN(z)}for(;k<d;){if(A(h[k],s))return!0;k++}return!1}});var wo={version:"2.18.3"},bn=m(Ms()),jn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ks={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Oi={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},$i={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},qa={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Vo={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},ds={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},ui={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},ps={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},xo={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Ts={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},ma={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Js={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ga={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Qr={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Ns={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Ys={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Go={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Li={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},$a={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Ho={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},gn={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},yn={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Br={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Nn={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},va={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Wo={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Xs=Js,Tr={en:jn,de:Ks,it:Oi,id:$i,ro:qa,ru:Vo,es:ds,nl:ui,fr:ps,pt:Xs,pt_br:ma,pt_pt:Js,zh:xo,zh_tw:Ts,pl:ga,sv:Qr,el:Ns,hu:Ys,da:Go,no:Li,fa:$a,ua:Ho,tr:gn,cz:yn,ja:Br,fi:Nn,ko:va,ky:Wo},Ds={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let a={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(a)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let a in s){let h=s[a];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},_a=Ds,Lo={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(a=>{this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(a=>{a.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let a in s){let h=s[a];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},pi=Lo,wr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let a=s.target;this._isRelevantForRemoval(a)&&!a.pm.dragging()&&(a.removeFrom(this.map.pm._getContainingLayer()),a.remove(),a instanceof L.LayerGroup?(this._fireRemoveLayerGroup(a),this._fireRemoveLayerGroup(this.map,a)):(a.pm._fireRemove(a),a.pm._fireRemove(this.map,a)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},Os=wr,Va={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Co=Va,Zo=m(Ms()),Qs={_fireDrawStart(s="Draw",a={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,a)},_fireDrawEnd(s="Draw",a={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,a)},_fireCreate(s,a="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},a,h)},_fireCenterPlaced(s="Draw",a={}){let h=s==="Draw"?this._layer:void 0,d=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:d,latlng:this._layer.getLatLng()},s,a)},_fireCut(s,a,h,d="Draw",v={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:a,originalLayer:h},d,v)},_fireEdit(s=this._layer,a="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},a,h)},_fireEnable(s="Edit",a={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDisable(s="Edit",a={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,a)},_fireUpdate(s="Edit",a={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,a)},_fireMarkerDragStart(s,a=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,d)},_fireMarkerDrag(s,a=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,d)},_fireMarkerDragEnd(s,a=void 0,h=void 0,d="Edit",v={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a,intersectionReset:h},d,v)},_fireDragStart(s="Edit",a={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,a)},_fireDrag(s,a="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},a,h)},_fireDragEnd(s="Edit",a={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragEnable(s="Edit",a={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragDisable(s="Edit",a={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,a)},_fireRemove(s,a=s,h="Edit",d={}){this.__fire(s,"pm:remove",{layer:a,shape:this.getShape()},h,d)},_fireVertexAdded(s,a,h,d="Edit",v={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:a,latlng:h,shape:this.getShape()},d,v)},_fireVertexRemoved(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:a,shape:this.getShape()},h,d)},_fireVertexClick(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,d)},_fireIntersect(s,a=this._layer,h="Edit",d={}){this.__fire(a,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,d)},_fireLayerReset(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,d)},_fireChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},a,h)},_fireTextChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},a,h)},_fireTextFocus(s="Edit",a={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,a)},_fireTextBlur(s="Edit",a={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,a)},_fireSnapDrag(s,a,h="Snapping",d={}){this.__fire(s,"pm:snapdrag",a,h,d)},_fireSnap(s,a,h="Snapping",d={}){this.__fire(s,"pm:snap",a,h,d)},_fireUnsnap(s,a,h="Snapping",d={}){this.__fire(s,"pm:unsnap",a,h,d)},_fireRotationEnable(s,a,h="Rotation",d={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,d)},_fireRotationDisable(s,a="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},a,h)},_fireRotationStart(s,a,h="Rotation",d={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:a},h,d)},_fireRotation(s,a,h,d=this._rotationLayer,v="Rotation",k={}){this.__fire(s,"pm:rotate",{layer:d,helpLayer:this._layer,startAngle:this._startAngle,angle:d.pm.getAngle(),angleDiff:a,oldLatLngs:h,newLatLngs:d.getLatLngs()},v,k)},_fireRotationEnd(s,a,h,d="Rotation",v={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:a,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},d,v)},_fireActionClick(s,a,h,d="Toolbar",v={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:a,button:h},d,v)},_fireButtonClick(s,a,h="Toolbar",d={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:a},h,d)},_fireLangChange(s,a,h,d,v="Global",k={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:a,fallback:h,translations:d},v,k)},_fireGlobalDragModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalEditModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalRemovalModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalCutModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,a)},_fireGlobalDrawModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,a)},_fireGlobalRotateModeToggled(s="Global",a={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,a)},_fireRemoveLayerGroup(s,a=s,h="Edit",d={}){this.__fire(s,"pm:remove",{layer:a,shape:void 0},h,d)},_fireKeyeventEvent(s,a,h,d="Global",v={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:a,focusOn:h},d,v)},__fire(s,a,h,d,v={}){h=(0,Zo.default)(h,v,{source:d}),L.PM.Utils._fireEvent(s,a,h)}},ko=Qs,ya=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let a="document";this.map.getContainer().contains(s.target)&&(a="map");let h={event:s,eventType:s.type,focusOn:a};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,a)},_onBlur(s){s.altKey=!1;let a={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=a,this._lastEvents.current=a},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),Mn=ya,ba=m(br());function sn(s){let a=L.PM.activeLang;return(0,ba.default)(Tr[a],s)||(0,ba.default)(Tr.en,s)||s}function Qi(s){for(let a=0;a<s.length;a+=1){let h=s[a];if(Array.isArray(h)){if(Qi(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Po(s){return s.reduce((a,h)=>{if(h.length!==0){let d=Array.isArray(h)?Po(h):h;Array.isArray(d)?d.length!==0&&a.push(d):a.push(d)}return a},[])}function eo(s,a,h){let d={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:v,b:k,f:A}=d,M=s.lng,z=s.lat,Q=h,Ne=Math.PI,Ee=a*Ne/180,Ye=Math.sin(Ee),ht=Math.cos(Ee),Pt=(1-A)*Math.tan(z*Ne/180),Ot=1/Math.sqrt(1+Pt*Pt),Rt=Pt*Ot,fn=Math.atan2(Pt,ht),Te=Ot*Ye,Fe=1-Te*Te,He=Fe*(v*v-k*k)/(k*k),gt=1+He/16384*(4096+He*(-768+He*(320-175*He))),et=He/1024*(256+He*(-128+He*(74-47*He))),ft=Q/(k*gt),U=2*Math.PI,ie,ge,me;for(;Math.abs(ft-U)>1e-12;){ie=Math.cos(2*fn+ft),ge=Math.sin(ft),me=Math.cos(ft);let Et=et*ge*(ie+et/4*(me*(-1+2*ie*ie)-et/6*ie*(-3+4*ge*ge)*(-3+4*ie*ie)));U=ft,ft=Q/(k*gt)+Et}let ye=Rt*ge-Ot*me*ht,be=Math.atan2(Rt*me+Ot*ge*ht,(1-A)*Math.sqrt(Te*Te+ye*ye)),$e=Math.atan2(ge*Ye,Ot*me-Rt*ge*ht),Ue=A/16*Fe*(4+A*(4-3*Fe)),We=$e-(1-Ue)*A*Te*(ft+Ue*ge*(ie+Ue*me*(-1+2*ie*ie))),lt=M+We*180/Ne,at=be*180/Ne;return L.latLng(lt,at)}function ur(s,a,h,d,v=!0){let k,A,M,z=[];for(let Q=0;Q<h;Q+=1){if(v)k=Q*360/h+d,A=eo(s,k,a),M=L.latLng(A.lng,A.lat);else{let Ne=s.lat+Math.cos(2*Q*Math.PI/h)*a,Ee=s.lng+Math.sin(2*Q*Math.PI/h)*a;M=L.latLng(Ne,Ee)}z.push(M)}return z}function wa(s,a,h){a=(a+360)%360;let d=Math.PI/180,v=180/Math.PI,{R:k}=L.CRS.Earth,A=s.lng*d,M=s.lat*d,z=a*d,Q=Math.sin(M),Ne=Math.cos(M),Ee=Math.cos(h/k),Ye=Math.sin(h/k),ht=Math.asin(Q*Ee+Ne*Ye*Math.cos(z)),Pt=A+Math.atan2(Math.sin(z)*Ye*Ne,Ee-Q*Math.sin(ht));Pt*=v;let Ot=Pt-360,Rt=Pt<-180?Pt+360:Pt;return Pt=Pt>180?Ot:Rt,L.latLng([ht*v,Pt])}function ms(s,a,h){let d=s.latLngToContainerPoint(a),v=s.latLngToContainerPoint(h),k=Math.atan2(v.y-d.y,v.x-d.x)*180/Math.PI+90;return k+=k<0?360:0,k}function Ko(s,a,h,d){let v=ms(s,a,h);return wa(a,v,d)}function Jo(s,a,h="asc"){if(!a||Object.keys(a).length===0)return(z,Q)=>z-Q;let d=Object.keys(a),v,k=d.length-1,A={};for(;k>=0;)v=d[k],A[v.toLowerCase()]=a[v],k-=1;function M(z){if(z instanceof L.Marker)return"Marker";if(z instanceof L.Circle)return"Circle";if(z instanceof L.CircleMarker)return"CircleMarker";if(z instanceof L.Rectangle)return"Rectangle";if(z instanceof L.Polygon)return"Polygon";if(z instanceof L.Polyline)return"Line"}return(z,Q)=>{let Ne,Ee;if(Ne=M(z.layer).toLowerCase(),Ee=M(Q.layer).toLowerCase(),!Ne||!Ee)return 0;let Ye=Ne in A?A[Ne]:Number.MAX_SAFE_INTEGER,ht=Ee in A?A[Ee]:Number.MAX_SAFE_INTEGER,Pt=0;return Ye<ht?Pt=-1:Ye>ht&&(Pt=1),h==="desc"?Pt*-1:Pt}}function Nr(s,a=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(a).getLatLngs():L.polyline(a).getLatLngs()}function Yo(s,a){var h,d,v,k;if((d=(h=a.options.crs)==null?void 0:h.projection)!=null&&d.MAX_LATITUDE){let A=(k=(v=a.options.crs)==null?void 0:v.projection)==null?void 0:k.MAX_LATITUDE;s.lat=Math.max(Math.min(A,s.lat),-A)}return s}function Ci(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var Ga=L.Class.extend({includes:[_a,pi,Os,Co,ko],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=Mn(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",a,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let v=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(v){let k=[`${v[1]}_${v[2]}`,`${v[1]}`];for(let A of k)if(Tr[A]){s=A;break}}}let d=L.PM.activeLang;a&&(Tr[s]=(0,bn.default)(Tr[h],a)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(d,s,h,Tr[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",a){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,a)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,a={}){let h=a.ignoreShapes||[],d=a.merge||!1;this.map.pm.Draw.shapes.forEach(v=>{h.indexOf(v)===-1&&this.map.pm.Draw[v].setPathOptions(s,d)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let a=(0,bn.default)(this.globalOptions,s);a.editable&&(a.resizeableCircleMarker=a.editable,delete a.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!a.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let d=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!a.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),d=!0),this.map.pm.Draw.shapes.forEach(v=>{this.map.pm.Draw[v].setOptions(a)}),h&&this.map.pm.Draw.CircleMarker.enable(),d&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(v=>{v.pm.setOptions(a)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=a,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let a=L.PM.Utils.findLayers(this.map);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(d=>{h.addLayer(d)}),h},getGeomanDrawLayers(s=!1){let a=L.PM.Utils.findLayers(this.map).filter(d=>d._drawnByGeoman===!0);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(d=>{h.addLayer(d)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){Ci(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let a="";s.type==="touchstart"||s.type==="pointerdown"?a="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(a="mouseup"),a&&Ci(this.map)._onClick(this._createMouseEvent(a,s))},_createMouseEvent(s,a){let h,d=a.touches[0]||a.changedTouches[0];try{h=new MouseEvent(s,{bubbles:a.bubbles,cancelable:a.cancelable,view:a.view,detail:d.detail,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey,button:a.button,relatedTarget:a.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,a.bubbles,a.cancelable,a.view,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget)}return h}}),So=Ga,Dr=L.Control.extend({includes:[ko],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let a=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${a}`,this._container);s.title&&h.setAttribute("title",s.title);let d=L.DomUtil.create("a","leaflet-buttons-control-button",h);d.setAttribute("role","button"),d.setAttribute("tabindex","0"),d.href="#";let v=L.DomUtil.create("div",`leaflet-pm-actions-container ${a}`,h),k=s.actions,A={cancel:{text:sn("actions.cancel"),title:sn("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:sn("actions.finish"),title:sn("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:sn("actions.removeLastVertex"),title:sn("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:sn("actions.finish"),title:sn("actions.finish"),onClick(z){this._map.pm.Draw[s.jsClass]._finishShape(z)}}};s._preparedActions=k.map(z=>{let Q=typeof z=="string"?z:z.name,Ne;if(A[Q])Ne=A[Q];else if(z.text)Ne=z;else return Ne;let Ee=L.DomUtil.create("a",`leaflet-pm-action ${a} action-${Q}`,v);if(Ee.setAttribute("role","button"),Ee.setAttribute("tabindex","0"),Ee.href="#",Ne.title&&(Ee.title=Ne.title),Ee.innerHTML=Ne.text,L.DomEvent.disableClickPropagation(Ee),L.DomEvent.on(Ee,"click",L.DomEvent.stop),Ne._node=Ee,!s.disabled&&Ne.onClick){let Ye=ht=>{ht.preventDefault();let Pt="",{buttons:Ot}=this._map.pm.Toolbar;for(let Rt in Ot)if(Ot[Rt]._button===s){Pt=Rt;break}this._fireActionClick(Ne,Pt,s)};L.DomEvent.addListener(Ee,"click",Ye,this),L.DomEvent.addListener(Ee,"click",Ne.onClick,this),L.DomEvent.addListener(Ee,"click",()=>this._updateActiveAction(s))}return Ne}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let M=L.DomUtil.create("div","control-icon",d);return s.iconUrl&&M.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(M,s.className),L.DomEvent.disableClickPropagation(d),L.DomEvent.on(d,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(d,"click",this._onBtnClick,this),L.DomEvent.addListener(d,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(d,"pm-disabled"),d.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:a}=this._map.pm.Toolbar;for(let h in a)if(a[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",a=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(a,s),a.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(a,s),a.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var a;(a=s._preparedActions)==null||a.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),Xo=Dr;L.Control.PMButton=Xo;var xa=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let a=`${s}Container`;return this[a]||(this[a]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[a]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),a={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let d=s[h];L.Util.setOptions(d,{className:a.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let a in s)s[a].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,a){return this.buttons[s]=a,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let a in this.buttons){let h=this.buttons[a];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,a,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let d=s;return h&&this.triggerClickOnToggledButtons(this.buttons[d]),this.buttons[d]?this.buttons[d].toggle(a):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:sn("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},a={title:sn("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:sn("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},d={title:sn("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},v={title:sn("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:sn("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},A={title:sn("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},M={title:sn("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},z={title:sn("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Q={title:sn("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ne={title:sn("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ee={className:"control-icon leaflet-pm-icon-text",title:sn("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(Ye,ht)=>{this.map.pm.Draw[ht.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(k)),this._addButton("drawPolygon",new L.Control.PMButton(a)),this._addButton("drawCircle",new L.Control.PMButton(d)),this._addButton("drawCircleMarker",new L.Control.PMButton(v)),this._addButton("drawText",new L.Control.PMButton(Ee)),this._addButton("editMode",new L.Control.PMButton(A)),this._addButton("dragMode",new L.Control.PMButton(M)),this._addButton("cutPolygon",new L.Control.PMButton(z)),this._addButton("removalMode",new L.Control.PMButton(Q)),this._addButton("rotateMode",new L.Control.PMButton(Ne))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),a=[];this.options.drawControls===!1&&(a=a.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&a.indexOf(h)===-1){let d=s[h]._button.tool;d||(d="draw"),s[h].setPosition(this._getBtnPosition(d)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,a){this.options.positions[s]=a,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,a){if(a)typeof a!="object"&&(a={name:a});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!a.name)throw new TypeError("Button has no name");if(this.buttons[a.name])throw new TypeError("Button with this name already exists");let d=this.map.pm.Draw.createNewDrawInstance(a.name,h);a={...this.buttons[h]._button,...a};let v=this.createCustomControl(a);return{drawInstance:d,control:v}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let a={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(a));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let a={};if(s)for(let h in this.getButtons()){let d=this.getButtons()[h];(d._button.tool===s||s==="draw"&&!d._button.tool)&&(a[h]=d)}return a},changeControlOrder(s=[]){let a=this._shapeMapping(),h=[];s.forEach(k=>{a[k]?h.push(a[k]):h.push(k)});let d=this.getButtons(),v={};h.forEach(k=>{d[k]&&(v[k]=d[k])}),Object.keys(d).filter(k=>!d[k]._button.tool||d[k]._button.tool==="draw").forEach(k=>{h.indexOf(k)===-1&&(v[k]=d[k])}),Object.keys(d).filter(k=>d[k]._button.tool==="edit").forEach(k=>{h.indexOf(k)===-1&&(v[k]=d[k])}),Object.keys(d).filter(k=>d[k]._button.tool==="options").forEach(k=>{h.indexOf(k)===-1&&(v[k]=d[k])}),Object.keys(d).filter(k=>d[k]._button.tool==="custom").forEach(k=>{h.indexOf(k)===-1&&(v[k]=d[k])}),Object.keys(d).forEach(k=>{h.indexOf(k)===-1&&(v[k]=d[k])}),this.map.pm.Toolbar.buttons=v,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),a=[];for(let h in s)a.push(h);return a},changeActionsOfControl(s,a){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!a)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=a,this.changeControlOrder()},setButtonDisabled(s,a){let h=this._btnNameMapping(s);a?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let a=this._shapeMapping();return a[s]?a[s]:s}}),La=xa,Qo=m(Ms()),to={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(a=>{if(Array.isArray(a)){this._assignEvents(a);return}a.off("drag",this._handleSnapping,this),a.on("drag",this._handleSnapping,this),a.off("dragend",this._cleanupSnapping,this),a.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let a=s.target;a._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(a=>{a.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var M,z,Q;let a=s.target;if(a._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((M=s==null?void 0:s.originalEvent)==null?void 0:M.altKey)||((Q=(z=this._map)==null?void 0:z.pm)==null?void 0:Q.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(a.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let d=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,v;d?v=h.latlng:v=this._checkPrioritiySnapping(h);let k=this.options.snapDistance,A={marker:a,shape:this._shape,snapLatLng:v,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(A.marker,A),this._fireSnapDrag(this._layer,A),h.distance<k){a._orgLatLng=a.getLatLng(),a.setLatLng(v),a._snapped=!0,a._snapInfo=A;let Ne=()=>{this._snapLatLng=v,this._fireSnap(a,A),this._fireSnap(this._layer,A)},Ee=this._snapLatLng||{},Ye=v||{};(Ee.lat!==Ye.lat||Ee.lng!==Ye.lng)&&Ne()}else this._snapLatLng&&(this._unsnap(A),a._snapped=!1,a._snapInfo=void 0,this._fireUnsnap(A.marker,A),this._fireUnsnap(this._layer,A));return!0},_createSnapList(){let s=[],a=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(d=>{if((d instanceof L.Polyline||d instanceof L.Marker||d instanceof L.CircleMarker||d instanceof L.ImageOverlay)&&d.options.snapIgnore!==!0){if(d.options.snapIgnore===void 0&&(!L.PM.optIn&&d.options.pmIgnore===!0||L.PM.optIn&&d.options.pmIgnore!==!1))return;(d instanceof L.Circle||d instanceof L.CircleMarker)&&d.pm&&d.pm._hiddenPolyCircle?s.push(d.pm._hiddenPolyCircle):d instanceof L.ImageOverlay&&(d=L.rectangle(d.getBounds())),s.push(d);let v=L.polyline([],{color:"red",pmIgnore:!0});v._pmTempLayer=!0,a.push(v),(d instanceof L.Circle||d instanceof L.CircleMarker)&&a.push(v)}}),s=s.filter(d=>this._layer!==d),s=s.filter(d=>d._latlng||d._latlngs&&Qi(d._latlngs)),s=s.filter(d=>!d._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,a.push(d)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=a},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let a=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);a>-1&&this._snapList.splice(a,1)},_calcClosestLayer(s,a){return this._calcClosestLayers(s,a,1)[0]},_calcClosestLayers(s,a,h=1){let d=[],v={};a.forEach((A,M)=>{var Q;if(A._parentCopy&&A._parentCopy===this._layer||((Q=A.getLatLngs)==null?void 0:Q.call(A).flat(5).length)<2)return;let z=this._calcLayerDistances(s,A);if(z.distance=Math.floor(z.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[M]){let Ne=L.polyline([],{color:"red",pmIgnore:!0});Ne._pmTempLayer=!0,this.debugIndicatorLines[M]=Ne}this.debugIndicatorLines[M].setLatLngs([s,z.latlng])}h===1&&(v.distance===void 0||z.distance-5<=v.distance)?(z.distance+5<v.distance&&(d=[]),v=z,v.layer=A,d.push(v)):h!==1&&(v={},v=z,v.layer=A,d.push(v))}),h!==1&&(d=d.sort((A,M)=>A.distance-M.distance)),h===-1&&(h=d.length);let k=this._getClosestLayerByPriority(d,h);return L.Util.isArray(k)?k:[k]},_calcLayerDistances(s,a){let h=this._map,d=a instanceof L.Marker||a instanceof L.CircleMarker,v=a instanceof L.Polygon,k=s;if(d){let A=a.getLatLng();return{latlng:{...A},distance:this._getDistance(h,A,k)}}return this._calcLatLngDistances(k,a.getLatLngs(),h,v)},_calcLatLngDistances(s,a,h,d=!1){let v,k,A,M=z=>{z.forEach((Q,Ne)=>{if(Array.isArray(Q)){M(Q);return}if(this.options.snapSegment){let Ee=Q,Ye;d?Ye=Ne+1===z.length?0:Ne+1:Ye=Ne+1===z.length?void 0:Ne+1;let ht=z[Ye];if(ht){let Pt=this._getDistanceToSegment(h,s,Ee,ht);(k===void 0||Pt<k)&&(k=Pt,A=[Ee,ht])}}else{let Ee=this._getDistance(h,s,Q);(k===void 0||Ee<k)&&(k=Ee,v=Q)}})};return M(a),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,A[0],A[1])},segment:A,distance:k}:{latlng:v,distance:k}},_getClosestLayerByPriority(s,a=1){s=s.sort((A,M)=>A._leaflet_id-M._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],d=this._map.pm.globalOptions.snappingOrder||[],v=0,k={};return d.concat(h).forEach(A=>{k[A]||(v+=1,k[A]=v)}),s.sort(Jo("instanceofShape",k)),a===1?s[0]||{}:s.slice(0,a)},_checkPrioritiySnapping(s){let a=this._map,h=s.segment[0],d=s.segment[1],v=s.latlng,k=v;if(this.options.snapVertex){let A=this._getDistance(a,h,v),M=this._getDistance(a,d,v),z=A<M?h:d,Q=A<M?A:M;if(this.options.snapMiddle){let Ee=L.PM.Utils.calcMiddleLatLng(a,h,d),Ye=this._getDistance(a,Ee,v);Ye<A&&Ye<M&&(z=Ee,Q=Ye)}let Ne=this.options.snapDistance;Q<Ne&&(k=z)}return{...k}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,a,h,d){let v=s.getMaxZoom();v===1/0&&(v=s.getZoom());let k=s.project(a,v),A=s.project(h,v),M=s.project(d,v),z=L.LineUtil.closestPointOnSegment(k,A,M);return s.unproject(z,v)},_getDistanceToSegment(s,a,h,d){let v=s.latLngToContainerPoint(a),k=s.latLngToContainerPoint(h),A=s.latLngToContainerPoint(d);return L.LineUtil.pointToSegmentDistance(v,k,A)},_getDistance(s,a,h){return s.latLngToContainerPoint(a).distanceTo(s.latLngToContainerPoint(h))}},Eo=to,no=L.Class.extend({includes:[Eo,ko],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let a=new L.Icon.Default;a.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=a,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,a=!1){a?this.options.pathOptions=(0,Qo.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,a){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(a)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(a=>{this[a]._enabled&&(s=a)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&(a._pmTempLayer||s.push(a))}),this._enabled?s.forEach(a=>{L.PM.Utils.disablePopup(a)}):s.forEach(a=>{L.PM.Utils.enablePopup(a)})},createNewDrawInstance(s,a){let h=this._getShapeFromBtnName(a);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[a]&&this[s].setOptions(this[a].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let a={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return a[s]?a[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),mi=no;mi.Marker=mi.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new L.Marker(a,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,a;(s=this.options.markerStyle)!=null&&s.icon&&((a=this._hintMarker)==null||a.setIcon(this.options.markerStyle.icon))}});var x=63710088e-1,H={centimeters:x*100,centimetres:x*100,degrees:x/111325,feet:x*3.28084,inches:x*39.37,kilometers:x/1e3,kilometres:x/1e3,meters:x,metres:x,miles:x/1609.344,millimeters:x*1e3,millimetres:x*1e3,nauticalmiles:x/1852,radians:1,yards:x*1.0936};function Me(s,a,h){h===void 0&&(h={});var d={type:"Feature"};return(h.id===0||h.id)&&(d.id=h.id),h.bbox&&(d.bbox=h.bbox),d.properties=a||{},d.geometry=s,d}function qe(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!pn(s[0])||!pn(s[1]))throw new Error("coordinates must contain numbers");var d={type:"Point",coordinates:s};return Me(d,a,h)}function nt(s,a,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var d={type:"LineString",coordinates:s};return Me(d,a,h)}function yt(s,a){a===void 0&&(a={});var h={type:"FeatureCollection"};return a.id&&(h.id=a.id),a.bbox&&(h.bbox=a.bbox),h.features=s,h}function Bt(s,a){a===void 0&&(a="kilometers");var h=H[a];if(!h)throw new Error(a+" units is invalid");return s*h}function qt(s,a){a===void 0&&(a="kilometers");var h=H[a];if(!h)throw new Error(a+" units is invalid");return s/h}function Wt(s){var a=s%(2*Math.PI);return a*180/Math.PI}function nn(s){var a=s%360;return a*Math.PI/180}function pn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Bn(s){var a,h,d={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")a=[h.coordinates];else if(h.type==="MultiLineString")a=h.coordinates;else if(h.type==="MultiPolygon")a=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")a=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return a.forEach(function(v){a.forEach(function(k){for(var A=0;A<v.length-1;A++)for(var M=A;M<k.length-1;M++)if(!(v===k&&(Math.abs(A-M)===1||A===0&&M===v.length-2&&v[A][0]===v[v.length-1][0]&&v[A][1]===v[v.length-1][1]))){var z=ri(v[A][0],v[A][1],v[A+1][0],v[A+1][1],k[M][0],k[M][1],k[M+1][0],k[M+1][1]);z&&d.features.push(qe([z[0],z[1]]))}})}),d}function ri(s,a,h,d,v,k,A,M){var z,Q,Ne,Ee,Ye,ht={x:null,y:null,onLine1:!1,onLine2:!1};return z=(M-k)*(h-s)-(A-v)*(d-a),z===0?ht.x!==null&&ht.y!==null?ht:!1:(Q=a-k,Ne=s-v,Ee=(A-v)*Q-(M-k)*Ne,Ye=(h-s)*Q-(d-a)*Ne,Q=Ee/z,Ne=Ye/z,ht.x=s+Q*(h-s),ht.y=a+Q*(d-a),Q>=0&&Q<=1&&(ht.onLine1=!0),Ne>=0&&Ne<=1&&(ht.onLine2=!0),ht.onLine1&&ht.onLine2?[ht.x,ht.y]:!1)}mi.Line=mi.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let a=s[s.length-1];this._hintline.setLatLngs([a,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let a=this._layer._defaultShape().slice();a.push(this._hintMarker.getLatLng()),this._change(a)},hasSelfIntersection(){return Bn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,a){let h=L.polyline(this._layer.getLatLngs());s&&(a||(a=this._hintMarker.getLatLng()),h.addLatLng(a));let d=Bn(h.toGeoJSON(15));this._doesSelfIntersect=d.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(d,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),d=h[h.length-1];if(a.equals(h[0])||h.length>0&&a.equals(d)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:a,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(a);let v=this._createMarker(a);this._setTooltipText(),this._setHintLineAfterNewVertex(a),this._fireVertexAdded(v,void 0,a,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let a=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let v=s[s.length-1],k=a.indexOf(v.getLatLng());a=a.slice(0,k+1),this._layer.setLatLngs(a),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,d,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let a=L.polyline(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),a.on("click",this._finishShape,this),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=1?a=sn("tooltips.continueLine"):a=sn("tooltips.finishLine"),this._hintMarker.setTooltipContent(a)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,a;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)}}),mi.Polygon=mi.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),this._layer.getLatLngs().flat().length===1?(a.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(a)-1,this.options.snappable&&this._cleanupSnapping()):a.on("click",()=>1),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=2?a=sn("tooltips.continueLine"):a=sn("tooltips.finishPoly"),this._hintMarker.setTooltipContent(a)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),mi.Rectangle=mi.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let a=0;a<2;a+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(a),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(a)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(sn("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let a=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(a,"Draw")},_syncRectangleSize(){let s=Yo(this._startMarker.getLatLng(),this._map),a=Yo(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,a,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let d=[];h.forEach(v=>{!v.equals(s,1e-8)&&!v.equals(a,1e-8)&&d.push(v)}),d.forEach((v,k)=>{try{this._styleMarkers[k].setLatLng(v)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(a))return;let d=L.rectangle([h,a],this.options.pathOptions);if(this.options.rectangleAngle){let k=L.PM.Utils._getRotatedRectangle(h,a,this.options.rectangleAngle||0,this._map);d.setLatLngs(k),d.pm&&d.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),this._fireCreate(d);let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),mi.CircleMarker=mi.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let a={};L.extend(a,this.options.templineStyle),a.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),a),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let a=this._hintMarker.getLatLng();this._centerMarker.setLatLng(a),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(sn("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,a])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let a=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(a,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(a,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let A=this._hintMarker.getLatLng();h=this._distanceCalculation(a,A),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let d={...this.options.pathOptions,radius:h},v=new this._BaseCircleClass(a,d);this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),v.pm&&v.pm._updateHiddenPolyCircle(),this._fireCreate(v);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let a=this._centerMarker.getLatLng(),h=this._distanceCalculation(a,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=Ko(this._map,a,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=Ko(this._map,a,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var a,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(a=this._layer)==null||a.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))}}),mi.Circle=mi.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,a){return this._map.distance(s,a)}});function Rn(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $n(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ki(s){return s.type==="Feature"?s.geometry:s}function bi(s,a){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function xr(s,a,h){if(s!==null)for(var d,v,k,A,M,z,Q,Ne=0,Ee=0,Ye,ht=s.type,Pt=ht==="FeatureCollection",Ot=ht==="Feature",Rt=Pt?s.features.length:1,fn=0;fn<Rt;fn++){Q=Pt?s.features[fn].geometry:Ot?s.geometry:s,Ye=Q?Q.type==="GeometryCollection":!1,M=Ye?Q.geometries.length:1;for(var Te=0;Te<M;Te++){var Fe=0,He=0;if(A=Ye?Q.geometries[Te]:Q,A!==null){z=A.coordinates;var gt=A.type;switch(Ne=0,gt){case null:break;case"Point":if(a(z,Ee,fn,Fe,He)===!1)return!1;Ee++,Fe++;break;case"LineString":case"MultiPoint":for(d=0;d<z.length;d++){if(a(z[d],Ee,fn,Fe,He)===!1)return!1;Ee++,gt==="MultiPoint"&&Fe++}gt==="LineString"&&Fe++;break;case"Polygon":case"MultiLineString":for(d=0;d<z.length;d++){for(v=0;v<z[d].length-Ne;v++){if(a(z[d][v],Ee,fn,Fe,He)===!1)return!1;Ee++}gt==="MultiLineString"&&Fe++,gt==="Polygon"&&He++}gt==="Polygon"&&Fe++;break;case"MultiPolygon":for(d=0;d<z.length;d++){for(He=0,v=0;v<z[d].length;v++){for(k=0;k<z[d][v].length-Ne;k++){if(a(z[d][v][k],Ee,fn,Fe,He)===!1)return!1;Ee++}He++}Fe++}break;case"GeometryCollection":for(d=0;d<A.geometries.length;d++)if(xr(A.geometries[d],a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Xn(s,a){if(s.type==="Feature")a(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&a(s.features[h],h)!==!1;h++);}function er(s,a,h){var d=h;return Xn(s,function(v,k){k===0&&h===void 0?d=v:d=a(d,v,k)}),d}function Ha(s,a){var h,d,v,k,A,M,z,Q,Ne,Ee,Ye=0,ht=s.type==="FeatureCollection",Pt=s.type==="Feature",Ot=ht?s.features.length:1;for(h=0;h<Ot;h++){for(M=ht?s.features[h].geometry:Pt?s.geometry:s,Q=ht?s.features[h].properties:Pt?s.properties:{},Ne=ht?s.features[h].bbox:Pt?s.bbox:void 0,Ee=ht?s.features[h].id:Pt?s.id:void 0,z=M?M.type==="GeometryCollection":!1,A=z?M.geometries.length:1,v=0;v<A;v++){if(k=z?M.geometries[v]:M,k===null){if(a(null,Ye,Q,Ne,Ee)===!1)return!1;continue}switch(k.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(a(k,Ye,Q,Ne,Ee)===!1)return!1;break}case"GeometryCollection":{for(d=0;d<k.geometries.length;d++)if(a(k.geometries[d],Ye,Q,Ne,Ee)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Ye++}}function tr(s,a){Ha(s,function(h,d,v,k,A){var M=h===null?null:h.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return a(Me(h,v,{bbox:k,id:A}),d,0)===!1?!1:void 0}var z;switch(M){case"MultiPoint":z="Point";break;case"MultiLineString":z="LineString";break;case"MultiPolygon":z="Polygon";break}for(var Q=0;Q<h.coordinates.length;Q++){var Ne=h.coordinates[Q],Ee={type:z,coordinates:Ne};if(a(Me(Ee,v),d,Q)===!1)return!1}})}function Ca(s){if(!s)throw new Error("geojson is required");var a=[];return tr(s,function(h){es(h,a)}),yt(a)}function es(s,a){var h=[],d=s.geometry;if(d!==null){switch(d.type){case"Polygon":h=$n(d);break;case"LineString":h=[$n(d)]}h.forEach(function(v){var k=ka(v,s.properties);k.forEach(function(A){A.id=a.length,a.push(A)})})}}function ka(s,a){var h=[];return s.reduce(function(d,v){var k=nt([d,v],a);return k.bbox=Is(d,v),h.push(k),v}),h}function Is(s,a){var h=s[0],d=s[1],v=a[0],k=a[1],A=h<v?h:v,M=d<k?d:k,z=h>v?h:v,Q=d>k?d:k;return[A,M,z,Q]}var Rs=Ca,wi=m(fs(),1);function ea(s,a){var h={},d=[];if(s.type==="LineString"&&(s=Me(s)),a.type==="LineString"&&(a=Me(a)),s.type==="Feature"&&a.type==="Feature"&&s.geometry!==null&&a.geometry!==null&&s.geometry.type==="LineString"&&a.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&a.geometry.coordinates.length===2){var v=cr(s,a);return v&&d.push(v),yt(d)}var k=(0,wi.default)();return k.load(Rs(a)),Xn(Rs(s),function(A){Xn(k.search(A),function(M){var z=cr(A,M);if(z){var Q=$n(z).join(",");h[Q]||(h[Q]=!0,d.push(z))}})}),yt(d)}function cr(s,a){var h=$n(s),d=$n(a);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(d.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var v=h[0][0],k=h[0][1],A=h[1][0],M=h[1][1],z=d[0][0],Q=d[0][1],Ne=d[1][0],Ee=d[1][1],Ye=(Ee-Q)*(A-v)-(Ne-z)*(M-k),ht=(Ne-z)*(k-Q)-(Ee-Q)*(v-z),Pt=(A-v)*(k-Q)-(M-k)*(v-z);if(Ye===0)return null;var Ot=ht/Ye,Rt=Pt/Ye;if(Ot>=0&&Ot<=1&&Rt>=0&&Rt<=1){var fn=v+Ot*(A-v),Te=k+Ot*(M-k);return qe([fn,Te])}return null}var nr=ea,ta=m(fs(),1);function Vi(s,a,h){h===void 0&&(h={});var d=Rn(s),v=Rn(a),k=nn(v[1]-d[1]),A=nn(v[0]-d[0]),M=nn(d[1]),z=nn(v[1]),Q=Math.pow(Math.sin(k/2),2)+Math.pow(Math.sin(A/2),2)*Math.cos(M)*Math.cos(z);return Bt(2*Math.atan2(Math.sqrt(Q),Math.sqrt(1-Q)),h.units)}var Fs=Vi;function Lr(s){var a=s[0],h=s[1],d=s[2],v=s[3],k=Fs(s.slice(0,2),[d,h]),A=Fs(s.slice(0,2),[a,v]);if(k>=A){var M=(h+v)/2;return[a,M-(d-a)/2,d,M+(d-a)/2]}else{var z=(a+d)/2;return[z-(v-h)/2,h,z+(v-h)/2,v]}}var Wa=Lr;function Pi(s){var a=[1/0,1/0,-1/0,-1/0];return xr(s,function(h){a[0]>h[0]&&(a[0]=h[0]),a[1]>h[1]&&(a[1]=h[1]),a[2]<h[0]&&(a[2]=h[0]),a[3]<h[1]&&(a[3]=h[1])}),a}Pi.default=Pi;var gs=Pi;function Or(s,a){a===void 0&&(a={});var h=a.precision,d=a.coordinates,v=a.mutate;if(h=h==null||isNaN(h)?6:h,d=d==null||isNaN(d)?3:d,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof d!="number")throw new Error("<coordinates> must be a number");(v===!1||v===void 0)&&(s=JSON.parse(JSON.stringify(s)));var k=Math.pow(10,h);return xr(s,function(A){Ao(A,k,d)}),s}function Ao(s,a,h){s.length>h&&s.splice(h,s.length);for(var d=0;d<s.length;d++)s[d]=Math.round(s[d]*a)/a;return s}var js=Or;function vs(s,a,h){if(h===void 0&&(h={}),h.final===!0)return Ii(s,a);var d=Rn(s),v=Rn(a),k=nn(d[0]),A=nn(v[0]),M=nn(d[1]),z=nn(v[1]),Q=Math.sin(A-k)*Math.cos(z),Ne=Math.cos(M)*Math.sin(z)-Math.sin(M)*Math.cos(z)*Math.cos(A-k);return Wt(Math.atan2(Q,Ne))}function Ii(s,a){var h=vs(a,s);return h=(h+180)%360,h}function Bi(s,a,h,d){d===void 0&&(d={});var v=Rn(s),k=nn(v[0]),A=nn(v[1]),M=nn(h),z=qt(a,d.units),Q=Math.asin(Math.sin(A)*Math.cos(z)+Math.cos(A)*Math.sin(z)*Math.cos(M)),Ne=k+Math.atan2(Math.sin(M)*Math.sin(z)*Math.cos(A),Math.cos(z)-Math.sin(A)*Math.sin(Q)),Ee=Wt(Ne),Ye=Wt(Q);return qe([Ee,Ye],d.properties)}function ts(s,a,h){h===void 0&&(h={});var d=qe([1/0,1/0],{dist:1/0}),v=0;return tr(s,function(k){for(var A=$n(k),M=0;M<A.length-1;M++){var z=qe(A[M]);z.properties.dist=Fs(a,z,h);var Q=qe(A[M+1]);Q.properties.dist=Fs(a,Q,h);var Ne=Fs(z,Q,h),Ee=Math.max(z.properties.dist,Q.properties.dist),Ye=vs(z,Q),ht=Bi(a,Ee,Ye+90,h),Pt=Bi(a,Ee,Ye-90,h),Ot=nr(nt([ht.geometry.coordinates,Pt.geometry.coordinates]),nt([z.geometry.coordinates,Q.geometry.coordinates])),Rt=null;Ot.features.length>0&&(Rt=Ot.features[0],Rt.properties.dist=Fs(a,Rt,h),Rt.properties.location=v+Fs(z,Rt,h)),z.properties.dist<d.properties.dist&&(d=z,d.properties.index=M,d.properties.location=v),Q.properties.dist<d.properties.dist&&(d=Q,d.properties.index=M+1,d.properties.location=v+Ne),Rt&&Rt.properties.dist<d.properties.dist&&(d=Rt,d.properties.index=M),v+=Ne}}),d}var hr=ts;function Ir(s,a){if(!s)throw new Error("line is required");if(!a)throw new Error("splitter is required");var h=bi(s),d=bi(a);if(h!=="LineString")throw new Error("line must be LineString");if(d==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(d==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var v=js(a,{precision:7});switch(d){case"Point":return Rr(s,v);case"MultiPoint":return zs(s,v);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return zs(s,nr(s,v))}}function zs(s,a){var h=[],d=(0,ta.default)();return tr(a,function(v){if(h.forEach(function(M,z){M.id=z}),!h.length)h=Rr(s,v).features,h.forEach(function(M){M.bbox||(M.bbox=Wa(gs(M)))}),d.load(yt(h));else{var k=d.search(v);if(k.features.length){var A=ci(v,k);h=h.filter(function(M){return M.id!==A.id}),d.remove(A),Xn(Rr(A,v),function(M){h.push(M),d.insert(M)})}}}),yt(h)}function Rr(s,a){var h=[],d=$n(s)[0],v=$n(s)[s.geometry.coordinates.length-1];if(_s(d,Rn(a))||_s(v,Rn(a)))return yt([s]);var k=(0,ta.default)(),A=Rs(s);k.load(A);var M=k.search(a);if(!M.features.length)return yt([s]);var z=ci(a,M),Q=[d],Ne=er(A,function(Ee,Ye,ht){var Pt=$n(Ye)[1],Ot=Rn(a);return ht===z.id?(Ee.push(Ot),h.push(nt(Ee)),_s(Ot,Pt)?[Ot]:[Ot,Pt]):(Ee.push(Pt),Ee)},Q);return Ne.length>1&&h.push(nt(Ne)),yt(h)}function ci(s,a){if(!a.features.length)throw new Error("lines must contain features");if(a.features.length===1)return a.features[0];var h,d=1/0;return Xn(a,function(v){var k=hr(v,s),A=k.properties.dist;A<d&&(h=v,d=A)}),h}function _s(s,a){return s[0]===a[0]&&s[1]===a[1]}var ir=Ir;function Gi(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!a)throw new Error("polygon is required");var d=Rn(s),v=ki(a),k=v.type,A=a.bbox,M=v.coordinates;if(A&&Pa(d,A)===!1)return!1;k==="Polygon"&&(M=[M]);for(var z=!1,Q=0;Q<M.length&&!z;Q++)if(Mo(d,M[Q][0],h.ignoreBoundary)){for(var Ne=!1,Ee=1;Ee<M[Q].length&&!Ne;)Mo(d,M[Q][Ee],!h.ignoreBoundary)&&(Ne=!0),Ee++;Ne||(z=!0)}return z}function Mo(s,a,h){var d=!1;a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]&&(a=a.slice(0,a.length-1));for(var v=0,k=a.length-1;v<a.length;k=v++){var A=a[v][0],M=a[v][1],z=a[k][0],Q=a[k][1],Ne=s[1]*(A-z)+M*(z-s[0])+Q*(s[0]-A)===0&&(A-s[0])*(z-s[0])<=0&&(M-s[1])*(Q-s[1])<=0;if(Ne)return!h;var Ee=M>s[1]!=Q>s[1]&&s[0]<(z-A)*(s[1]-M)/(Q-M)+A;Ee&&(d=!d)}return d}function Pa(s,a){return a[0]<=s[0]&&a[1]<=s[1]&&a[2]>=s[0]&&a[3]>=s[1]}function Sa(s,a,h){h===void 0&&(h={});for(var d=Rn(s),v=$n(a),k=0;k<v.length-1;k++){var A=!1;if(h.ignoreEndVertices&&(k===0&&(A="start"),k===v.length-2&&(A="end"),k===0&&k+1===v.length-1&&(A="both")),Hi(v[k],v[k+1],d,A,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function Hi(s,a,h,d,v){var k=h[0],A=h[1],M=s[0],z=s[1],Q=a[0],Ne=a[1],Ee=h[0]-M,Ye=h[1]-z,ht=Q-M,Pt=Ne-z,Ot=Ee*Pt-Ye*ht;if(v!==null){if(Math.abs(Ot)>v)return!1}else if(Ot!==0)return!1;if(d){if(d==="start")return Math.abs(ht)>=Math.abs(Pt)?ht>0?M<k&&k<=Q:Q<=k&&k<M:Pt>0?z<A&&A<=Ne:Ne<=A&&A<z;if(d==="end")return Math.abs(ht)>=Math.abs(Pt)?ht>0?M<=k&&k<Q:Q<k&&k<=M:Pt>0?z<=A&&A<Ne:Ne<A&&A<=z;if(d==="both")return Math.abs(ht)>=Math.abs(Pt)?ht>0?M<k&&k<Q:Q<k&&k<M:Pt>0?z<A&&A<Ne:Ne<A&&A<z}else return Math.abs(ht)>=Math.abs(Pt)?ht>0?M<=k&&k<=Q:Q<=k&&k<=M:Pt>0?z<=A&&A<=Ne:Ne<=A&&A<=z;return!1}var fr=Sa;function io(s,a){var h=ki(s),d=ki(a),v=h.type,k=d.type,A=h.coordinates,M=d.coordinates;switch(v){case"Point":switch(k){case"Point":return Vn(A,M);default:throw new Error("feature2 "+k+" geometry not supported")}case"MultiPoint":switch(k){case"Point":return ys(h,d);case"MultiPoint":return na(h,d);default:throw new Error("feature2 "+k+" geometry not supported")}case"LineString":switch(k){case"Point":return fr(d,h,{ignoreEndVertices:!0});case"LineString":return Us(h,d);case"MultiPoint":return ro(h,d);default:throw new Error("feature2 "+k+" geometry not supported")}case"Polygon":switch(k){case"Point":return Gi(d,h,{ignoreBoundary:!0});case"LineString":return Fr(h,d);case"Polygon":return Ri(h,d);case"MultiPoint":return so(h,d);default:throw new Error("feature2 "+k+" geometry not supported")}default:throw new Error("feature1 "+v+" geometry not supported")}}function ys(s,a){var h,d=!1;for(h=0;h<s.coordinates.length;h++)if(Vn(s.coordinates[h],a.coordinates)){d=!0;break}return d}function na(s,a){for(var h=0,d=a.coordinates;h<d.length;h++){for(var v=d[h],k=!1,A=0,M=s.coordinates;A<M.length;A++){var z=M[A];if(Vn(v,z)){k=!0;break}}if(!k)return!1}return!0}function ro(s,a){for(var h=!1,d=0,v=a.coordinates;d<v.length;d++){var k=v[d];if(fr(k,s,{ignoreEndVertices:!0})&&(h=!0),!fr(k,s))return!1}return!!h}function so(s,a){for(var h=0,d=a.coordinates;h<d.length;h++){var v=d[h];if(!Gi(v,s,{ignoreBoundary:!0}))return!1}return!0}function Us(s,a){for(var h=!1,d=0,v=a.coordinates;d<v.length;d++){var k=v[d];if(fr({type:"Point",coordinates:k},s,{ignoreEndVertices:!0})&&(h=!0),!fr({type:"Point",coordinates:k},s,{ignoreEndVertices:!1}))return!1}return h}function Fr(s,a){var h=!1,d=0,v=gs(s),k=gs(a);if(!Wn(v,k))return!1;for(d;d<a.coordinates.length-1;d++){var A=gi(a.coordinates[d],a.coordinates[d+1]);if(Gi({type:"Point",coordinates:A},s,{ignoreBoundary:!0})){h=!0;break}}return h}function Ri(s,a){if(s.type==="Feature"&&s.geometry===null||a.type==="Feature"&&a.geometry===null)return!1;var h=gs(s),d=gs(a);if(!Wn(h,d))return!1;for(var v=ki(a).coordinates,k=0,A=v;k<A.length;k++)for(var M=A[k],z=0,Q=M;z<Q.length;z++){var Ne=Q[z];if(!Gi(Ne,s))return!1}return!0}function Wn(s,a){return!(s[0]>a[0]||s[2]<a[2]||s[1]>a[1]||s[3]<a[3])}function Vn(s,a){return s[0]===a[0]&&s[1]===a[1]}function gi(s,a){return[(s[0]+a[0])/2,(s[1]+a[1])/2]}var Qn=m(br()),ns=s=>()=>s,oo=s=>{let a=s?(h,d)=>d.minus(h).abs().isLessThanOrEqualTo(s):ns(!1);return(h,d)=>a(h,d)?0:h.comparedTo(d)};function bs(s){let a=s?(h,d,v,k,A)=>h.exponentiatedBy(2).isLessThanOrEqualTo(k.minus(d).exponentiatedBy(2).plus(A.minus(v).exponentiatedBy(2)).times(s)):ns(!1);return(h,d,v)=>{let k=h.x,A=h.y,M=v.x,z=v.y,Q=A.minus(z).times(d.x.minus(M)).minus(k.minus(M).times(d.y.minus(z)));return a(Q,k,A,M,z)?0:Q.comparedTo(0)}}var Za=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ao=Math.ceil,Si=Math.floor,ei="[BigNumber Error] ",dr=ei+"Number primitive has more than 15 significant digits: ",pr=1e14,hn=14,Ka=9007199254740991,Bo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],jr=1e7,Wi=1e9;function bl(s){var a,h,d,v=Te.prototype={constructor:Te,toString:null,valueOf:null},k=new Te(1),A=20,M=4,z=-7,Q=21,Ne=-1e7,Ee=1e7,Ye=!1,ht=1,Pt=0,Ot={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Rt="0123456789abcdefghijklmnopqrstuvwxyz",fn=!0;function Te(U,ie){var ge,me,ye,be,$e,Ue,We,lt,at=this;if(!(at instanceof Te))return new Te(U,ie);if(ie==null){if(U&&U._isBigNumber===!0){at.s=U.s,!U.c||U.e>Ee?at.c=at.e=null:U.e<Ne?at.c=[at.e=0]:(at.e=U.e,at.c=U.c.slice());return}if((Ue=typeof U=="number")&&U*0==0){if(at.s=1/U<0?(U=-U,-1):1,U===~~U){for(be=0,$e=U;$e>=10;$e/=10,be++);be>Ee?at.c=at.e=null:(at.e=be,at.c=[U]);return}lt=String(U)}else{if(!Za.test(lt=String(U)))return d(at,lt,Ue);at.s=lt.charCodeAt(0)==45?(lt=lt.slice(1),-1):1}(be=lt.indexOf("."))>-1&&(lt=lt.replace(".","")),($e=lt.search(/e/i))>0?(be<0&&(be=$e),be+=+lt.slice($e+1),lt=lt.substring(0,$e)):be<0&&(be=lt.length)}else{if(i(ie,2,Rt.length,"Base"),ie==10&&fn)return at=new Te(U),et(at,A+at.e+1,M);if(lt=String(U),Ue=typeof U=="number"){if(U*0!=0)return d(at,lt,Ue,ie);if(at.s=1/U<0?(lt=lt.slice(1),-1):1,Te.DEBUG&&lt.replace(/^0\.0*|\./,"").length>15)throw Error(dr+U)}else at.s=lt.charCodeAt(0)===45?(lt=lt.slice(1),-1):1;for(ge=Rt.slice(0,ie),be=$e=0,We=lt.length;$e<We;$e++)if(ge.indexOf(me=lt.charAt($e))<0){if(me=="."){if($e>be){be=We;continue}}else if(!ye&&(lt==lt.toUpperCase()&&(lt=lt.toLowerCase())||lt==lt.toLowerCase()&&(lt=lt.toUpperCase()))){ye=!0,$e=-1,be=0;continue}return d(at,String(U),Ue,ie)}Ue=!1,lt=h(lt,ie,10,at.s),(be=lt.indexOf("."))>-1?lt=lt.replace(".",""):be=lt.length}for($e=0;lt.charCodeAt($e)===48;$e++);for(We=lt.length;lt.charCodeAt(--We)===48;);if(lt=lt.slice($e,++We)){if(We-=$e,Ue&&Te.DEBUG&&We>15&&(U>Ka||U!==Si(U)))throw Error(dr+at.s*U);if((be=be-$e-1)>Ee)at.c=at.e=null;else if(be<Ne)at.c=[at.e=0];else{if(at.e=be,at.c=[],$e=(be+1)%hn,be<0&&($e+=hn),$e<We){for($e&&at.c.push(+lt.slice(0,$e)),We-=hn;$e<We;)at.c.push(+lt.slice($e,$e+=hn));$e=hn-(lt=lt.slice($e)).length}else $e-=We;for(;$e--;lt+="0");at.c.push(+lt)}}else at.c=[at.e=0]}Te.clone=bl,Te.ROUND_UP=0,Te.ROUND_DOWN=1,Te.ROUND_CEIL=2,Te.ROUND_FLOOR=3,Te.ROUND_HALF_UP=4,Te.ROUND_HALF_DOWN=5,Te.ROUND_HALF_EVEN=6,Te.ROUND_HALF_CEIL=7,Te.ROUND_HALF_FLOOR=8,Te.EUCLID=9,Te.config=Te.set=function(U){var ie,ge;if(U!=null)if(typeof U=="object"){if(U.hasOwnProperty(ie="DECIMAL_PLACES")&&(ge=U[ie],i(ge,0,Wi,ie),A=ge),U.hasOwnProperty(ie="ROUNDING_MODE")&&(ge=U[ie],i(ge,0,8,ie),M=ge),U.hasOwnProperty(ie="EXPONENTIAL_AT")&&(ge=U[ie],ge&&ge.pop?(i(ge[0],-1e9,0,ie),i(ge[1],0,Wi,ie),z=ge[0],Q=ge[1]):(i(ge,-1e9,Wi,ie),z=-(Q=ge<0?-ge:ge))),U.hasOwnProperty(ie="RANGE"))if(ge=U[ie],ge&&ge.pop)i(ge[0],-1e9,-1,ie),i(ge[1],1,Wi,ie),Ne=ge[0],Ee=ge[1];else if(i(ge,-1e9,Wi,ie),ge)Ne=-(Ee=ge<0?-ge:ge);else throw Error(ei+ie+" cannot be zero: "+ge);if(U.hasOwnProperty(ie="CRYPTO"))if(ge=U[ie],ge===!!ge)if(ge)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Ye=ge;else throw Ye=!ge,Error(ei+"crypto unavailable");else Ye=ge;else throw Error(ei+ie+" not true or false: "+ge);if(U.hasOwnProperty(ie="MODULO_MODE")&&(ge=U[ie],i(ge,0,9,ie),ht=ge),U.hasOwnProperty(ie="POW_PRECISION")&&(ge=U[ie],i(ge,0,Wi,ie),Pt=ge),U.hasOwnProperty(ie="FORMAT"))if(ge=U[ie],typeof ge=="object")Ot=ge;else throw Error(ei+ie+" not an object: "+ge);if(U.hasOwnProperty(ie="ALPHABET"))if(ge=U[ie],typeof ge=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(ge))fn=ge.slice(0,10)=="0123456789",Rt=ge;else throw Error(ei+ie+" invalid: "+ge)}else throw Error(ei+"Object expected: "+U);return{DECIMAL_PLACES:A,ROUNDING_MODE:M,EXPONENTIAL_AT:[z,Q],RANGE:[Ne,Ee],CRYPTO:Ye,MODULO_MODE:ht,POW_PRECISION:Pt,FORMAT:Ot,ALPHABET:Rt}},Te.isBigNumber=function(U){if(!U||U._isBigNumber!==!0)return!1;if(!Te.DEBUG)return!0;var ie,ge,me=U.c,ye=U.e,be=U.s;e:if({}.toString.call(me)=="[object Array]"){if((be===1||be===-1)&&ye>=-1e9&&ye<=Wi&&ye===Si(ye)){if(me[0]===0){if(ye===0&&me.length===1)return!0;break e}if(ie=(ye+1)%hn,ie<1&&(ie+=hn),String(me[0]).length==ie){for(ie=0;ie<me.length;ie++)if(ge=me[ie],ge<0||ge>=pr||ge!==Si(ge))break e;if(ge!==0)return!0}}}else if(me===null&&ye===null&&(be===null||be===1||be===-1))return!0;throw Error(ei+"Invalid BigNumber: "+U)},Te.maximum=Te.max=function(){return He(arguments,-1)},Te.minimum=Te.min=function(){return He(arguments,1)},Te.random=function(){var U=9007199254740992,ie=Math.random()*U&2097151?function(){return Si(Math.random()*U)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(ge){var me,ye,be,$e,Ue,We=0,lt=[],at=new Te(k);if(ge==null?ge=A:i(ge,0,Wi),$e=ao(ge/hn),Ye)if(crypto.getRandomValues){for(me=crypto.getRandomValues(new Uint32Array($e*=2));We<$e;)Ue=me[We]*131072+(me[We+1]>>>11),Ue>=9e15?(ye=crypto.getRandomValues(new Uint32Array(2)),me[We]=ye[0],me[We+1]=ye[1]):(lt.push(Ue%1e14),We+=2);We=$e/2}else if(crypto.randomBytes){for(me=crypto.randomBytes($e*=7);We<$e;)Ue=(me[We]&31)*281474976710656+me[We+1]*1099511627776+me[We+2]*4294967296+me[We+3]*16777216+(me[We+4]<<16)+(me[We+5]<<8)+me[We+6],Ue>=9e15?crypto.randomBytes(7).copy(me,We):(lt.push(Ue%1e14),We+=7);We=$e/7}else throw Ye=!1,Error(ei+"crypto unavailable");if(!Ye)for(;We<$e;)Ue=ie(),Ue<9e15&&(lt[We++]=Ue%1e14);for($e=lt[--We],ge%=hn,$e&&ge&&(Ue=Bo[hn-ge],lt[We]=Si($e/Ue)*Ue);lt[We]===0;lt.pop(),We--);if(We<0)lt=[be=0];else{for(be=-1;lt[0]===0;lt.splice(0,1),be-=hn);for(We=1,Ue=lt[0];Ue>=10;Ue/=10,We++);We<hn&&(be-=hn-We)}return at.e=be,at.c=lt,at}}(),Te.sum=function(){for(var U=1,ie=arguments,ge=new Te(ie[0]);U<ie.length;)ge=ge.plus(ie[U++]);return ge},h=function(){var U="0123456789";function ie(ge,me,ye,be){for(var $e,Ue=[0],We,lt=0,at=ge.length;lt<at;){for(We=Ue.length;We--;Ue[We]*=me);for(Ue[0]+=be.indexOf(ge.charAt(lt++)),$e=0;$e<Ue.length;$e++)Ue[$e]>ye-1&&(Ue[$e+1]==null&&(Ue[$e+1]=0),Ue[$e+1]+=Ue[$e]/ye|0,Ue[$e]%=ye)}return Ue.reverse()}return function(ge,me,ye,be,$e){var Ue,We,lt,at,Et,Ht,Yt,tn,zn=ge.indexOf("."),Gn=A,Dn=M;for(zn>=0&&(at=Pt,Pt=0,ge=ge.replace(".",""),tn=new Te(me),Ht=tn.pow(ge.length-zn),Pt=at,tn.c=ie(P(sr(Ht.c),Ht.e,"0"),10,ye,U),tn.e=tn.c.length),Yt=ie(ge,me,ye,$e?(Ue=Rt,U):(Ue=U,Rt)),lt=at=Yt.length;Yt[--at]==0;Yt.pop());if(!Yt[0])return Ue.charAt(0);if(zn<0?--lt:(Ht.c=Yt,Ht.e=lt,Ht.s=be,Ht=a(Ht,tn,Gn,Dn,ye),Yt=Ht.c,Et=Ht.r,lt=Ht.e),We=lt+Gn+1,zn=Yt[We],at=ye/2,Et=Et||We<0||Yt[We+1]!=null,Et=Dn<4?(zn!=null||Et)&&(Dn==0||Dn==(Ht.s<0?3:2)):zn>at||zn==at&&(Dn==4||Et||Dn==6&&Yt[We-1]&1||Dn==(Ht.s<0?8:7)),We<1||!Yt[0])ge=Et?P(Ue.charAt(1),-Gn,Ue.charAt(0)):Ue.charAt(0);else{if(Yt.length=We,Et)for(--ye;++Yt[--We]>ye;)Yt[We]=0,We||(++lt,Yt=[1].concat(Yt));for(at=Yt.length;!Yt[--at];);for(zn=0,ge="";zn<=at;ge+=Ue.charAt(Yt[zn++]));ge=P(ge,lt,Ue.charAt(0))}return ge}}(),a=function(){function U(me,ye,be){var $e,Ue,We,lt,at=0,Et=me.length,Ht=ye%jr,Yt=ye/jr|0;for(me=me.slice();Et--;)We=me[Et]%jr,lt=me[Et]/jr|0,$e=Yt*We+lt*Ht,Ue=Ht*We+$e%jr*jr+at,at=(Ue/be|0)+($e/jr|0)+Yt*lt,me[Et]=Ue%be;return at&&(me=[at].concat(me)),me}function ie(me,ye,be,$e){var Ue,We;if(be!=$e)We=be>$e?1:-1;else for(Ue=We=0;Ue<be;Ue++)if(me[Ue]!=ye[Ue]){We=me[Ue]>ye[Ue]?1:-1;break}return We}function ge(me,ye,be,$e){for(var Ue=0;be--;)me[be]-=Ue,Ue=me[be]<ye[be]?1:0,me[be]=Ue*$e+me[be]-ye[be];for(;!me[0]&&me.length>1;me.splice(0,1));}return function(me,ye,be,$e,Ue){var We,lt,at,Et,Ht,Yt,tn,zn,Gn,Dn,ti,gr,Xa,lo,Su,uo,kl,rs=me.s==ye.s?1:-1,Ki=me.c,vi=ye.c;if(!Ki||!Ki[0]||!vi||!vi[0])return new Te(!me.s||!ye.s||(Ki?vi&&Ki[0]==vi[0]:!vi)?NaN:Ki&&Ki[0]==0||!vi?rs*0:rs/0);for(zn=new Te(rs),Gn=zn.c=[],lt=me.e-ye.e,rs=be+lt+1,Ue||(Ue=pr,lt=rr(me.e/hn)-rr(ye.e/hn),rs=rs/hn|0),at=0;vi[at]==(Ki[at]||0);at++);if(vi[at]>(Ki[at]||0)&&lt--,rs<0)Gn.push(1),Et=!0;else{for(lo=Ki.length,uo=vi.length,at=0,rs+=2,Ht=Si(Ue/(vi[0]+1)),Ht>1&&(vi=U(vi,Ht,Ue),Ki=U(Ki,Ht,Ue),uo=vi.length,lo=Ki.length),Xa=uo,Dn=Ki.slice(0,uo),ti=Dn.length;ti<uo;Dn[ti++]=0);kl=vi.slice(),kl=[0].concat(kl),Su=vi[0],vi[1]>=Ue/2&&Su++;do{if(Ht=0,We=ie(vi,Dn,uo,ti),We<0){if(gr=Dn[0],uo!=ti&&(gr=gr*Ue+(Dn[1]||0)),Ht=Si(gr/Su),Ht>1)for(Ht>=Ue&&(Ht=Ue-1),Yt=U(vi,Ht,Ue),tn=Yt.length,ti=Dn.length;ie(Yt,Dn,tn,ti)==1;)Ht--,ge(Yt,uo<tn?kl:vi,tn,Ue),tn=Yt.length,We=1;else Ht==0&&(We=Ht=1),Yt=vi.slice(),tn=Yt.length;if(tn<ti&&(Yt=[0].concat(Yt)),ge(Dn,Yt,ti,Ue),ti=Dn.length,We==-1)for(;ie(vi,Dn,uo,ti)<1;)Ht++,ge(Dn,uo<ti?kl:vi,ti,Ue),ti=Dn.length}else We===0&&(Ht++,Dn=[0]);Gn[at++]=Ht,Dn[0]?Dn[ti++]=Ki[Xa]||0:(Dn=[Ki[Xa]],ti=1)}while((Xa++<lo||Dn[0]!=null)&&rs--);Et=Dn[0]!=null,Gn[0]||Gn.splice(0,1)}if(Ue==pr){for(at=1,rs=Gn[0];rs>=10;rs/=10,at++);et(zn,be+(zn.e=at+lt*hn-1)+1,$e,Et)}else zn.e=lt,zn.r=+Et;return zn}}();function Fe(U,ie,ge,me){var ye,be,$e,Ue,We;if(ge==null?ge=M:i(ge,0,8),!U.c)return U.toString();if(ye=U.c[0],$e=U.e,ie==null)We=sr(U.c),We=me==1||me==2&&($e<=z||$e>=Q)?g(We,$e):P(We,$e,"0");else if(U=et(new Te(U),ie,ge),be=U.e,We=sr(U.c),Ue=We.length,me==1||me==2&&(ie<=be||be<=z)){for(;Ue<ie;We+="0",Ue++);We=g(We,be)}else if(ie-=$e,We=P(We,be,"0"),be+1>Ue){if(--ie>0)for(We+=".";ie--;We+="0");}else if(ie+=be-Ue,ie>0)for(be+1==Ue&&(We+=".");ie--;We+="0");return U.s<0&&ye?"-"+We:We}function He(U,ie){for(var ge,me,ye=1,be=new Te(U[0]);ye<U.length;ye++)me=new Te(U[ye]),(!me.s||(ge=ws(be,me))===ie||ge===0&&be.s===ie)&&(be=me);return be}function gt(U,ie,ge){for(var me=1,ye=ie.length;!ie[--ye];ie.pop());for(ye=ie[0];ye>=10;ye/=10,me++);return(ge=me+ge*hn-1)>Ee?U.c=U.e=null:ge<Ne?U.c=[U.e=0]:(U.e=ge,U.c=ie),U}d=function(){var U=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ie=/^([^.]+)\.$/,ge=/^\.([^.]+)$/,me=/^-?(Infinity|NaN)$/,ye=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(be,$e,Ue,We){var lt,at=Ue?$e:$e.replace(ye,"");if(me.test(at))be.s=isNaN(at)?null:at<0?-1:1;else{if(!Ue&&(at=at.replace(U,function(Et,Ht,Yt){return lt=(Yt=Yt.toLowerCase())=="x"?16:Yt=="b"?2:8,!We||We==lt?Ht:Et}),We&&(lt=We,at=at.replace(ie,"$1").replace(ge,"0.$1")),$e!=at))return new Te(at,lt);if(Te.DEBUG)throw Error(ei+"Not a"+(We?" base "+We:"")+" number: "+$e);be.s=null}be.c=be.e=null}}();function et(U,ie,ge,me){var ye,be,$e,Ue,We,lt,at,Et=U.c,Ht=Bo;if(Et){e:{for(ye=1,Ue=Et[0];Ue>=10;Ue/=10,ye++);if(be=ie-ye,be<0)be+=hn,$e=ie,We=Et[lt=0],at=Si(We/Ht[ye-$e-1]%10);else if(lt=ao((be+1)/hn),lt>=Et.length)if(me){for(;Et.length<=lt;Et.push(0));We=at=0,ye=1,be%=hn,$e=be-hn+1}else break e;else{for(We=Ue=Et[lt],ye=1;Ue>=10;Ue/=10,ye++);be%=hn,$e=be-hn+ye,at=$e<0?0:Si(We/Ht[ye-$e-1]%10)}if(me=me||ie<0||Et[lt+1]!=null||($e<0?We:We%Ht[ye-$e-1]),me=ge<4?(at||me)&&(ge==0||ge==(U.s<0?3:2)):at>5||at==5&&(ge==4||me||ge==6&&(be>0?$e>0?We/Ht[ye-$e]:0:Et[lt-1])%10&1||ge==(U.s<0?8:7)),ie<1||!Et[0])return Et.length=0,me?(ie-=U.e+1,Et[0]=Ht[(hn-ie%hn)%hn],U.e=-ie||0):Et[0]=U.e=0,U;if(be==0?(Et.length=lt,Ue=1,lt--):(Et.length=lt+1,Ue=Ht[hn-be],Et[lt]=$e>0?Si(We/Ht[ye-$e]%Ht[$e])*Ue:0),me)for(;;)if(lt==0){for(be=1,$e=Et[0];$e>=10;$e/=10,be++);for($e=Et[0]+=Ue,Ue=1;$e>=10;$e/=10,Ue++);be!=Ue&&(U.e++,Et[0]==pr&&(Et[0]=1));break}else{if(Et[lt]+=Ue,Et[lt]!=pr)break;Et[lt--]=0,Ue=1}for(be=Et.length;Et[--be]===0;Et.pop());}U.e>Ee?U.c=U.e=null:U.e<Ne&&(U.c=[U.e=0])}return U}function ft(U){var ie,ge=U.e;return ge===null?U.toString():(ie=sr(U.c),ie=ge<=z||ge>=Q?g(ie,ge):P(ie,ge,"0"),U.s<0?"-"+ie:ie)}return v.absoluteValue=v.abs=function(){var U=new Te(this);return U.s<0&&(U.s=1),U},v.comparedTo=function(U,ie){return ws(this,new Te(U,ie))},v.decimalPlaces=v.dp=function(U,ie){var ge,me,ye,be=this;if(U!=null)return i(U,0,Wi),ie==null?ie=M:i(ie,0,8),et(new Te(be),U+be.e+1,ie);if(!(ge=be.c))return null;if(me=((ye=ge.length-1)-rr(this.e/hn))*hn,ye=ge[ye])for(;ye%10==0;ye/=10,me--);return me<0&&(me=0),me},v.dividedBy=v.div=function(U,ie){return a(this,new Te(U,ie),A,M)},v.dividedToIntegerBy=v.idiv=function(U,ie){return a(this,new Te(U,ie),0,1)},v.exponentiatedBy=v.pow=function(U,ie){var ge,me,ye,be,$e,Ue,We,lt,at,Et=this;if(U=new Te(U),U.c&&!U.isInteger())throw Error(ei+"Exponent not an integer: "+ft(U));if(ie!=null&&(ie=new Te(ie)),Ue=U.e>14,!Et.c||!Et.c[0]||Et.c[0]==1&&!Et.e&&Et.c.length==1||!U.c||!U.c[0])return at=new Te(Math.pow(+ft(Et),Ue?U.s*(2-u(U)):+ft(U))),ie?at.mod(ie):at;if(We=U.s<0,ie){if(ie.c?!ie.c[0]:!ie.s)return new Te(NaN);me=!We&&Et.isInteger()&&ie.isInteger(),me&&(Et=Et.mod(ie))}else{if(U.e>9&&(Et.e>0||Et.e<-1||(Et.e==0?Et.c[0]>1||Ue&&Et.c[1]>=24e7:Et.c[0]<8e13||Ue&&Et.c[0]<=9999975e7)))return be=Et.s<0&&u(U)?-0:0,Et.e>-1&&(be=1/be),new Te(We?1/be:be);Pt&&(be=ao(Pt/hn+2))}for(Ue?(ge=new Te(.5),We&&(U.s=1),lt=u(U)):(ye=Math.abs(+ft(U)),lt=ye%2),at=new Te(k);;){if(lt){if(at=at.times(Et),!at.c)break;be?at.c.length>be&&(at.c.length=be):me&&(at=at.mod(ie))}if(ye){if(ye=Si(ye/2),ye===0)break;lt=ye%2}else if(U=U.times(ge),et(U,U.e+1,1),U.e>14)lt=u(U);else{if(ye=+ft(U),ye===0)break;lt=ye%2}Et=Et.times(Et),be?Et.c&&Et.c.length>be&&(Et.c.length=be):me&&(Et=Et.mod(ie))}return me?at:(We&&(at=k.div(at)),ie?at.mod(ie):be?et(at,Pt,M,$e):at)},v.integerValue=function(U){var ie=new Te(this);return U==null?U=M:i(U,0,8),et(ie,ie.e+1,U)},v.isEqualTo=v.eq=function(U,ie){return ws(this,new Te(U,ie))===0},v.isFinite=function(){return!!this.c},v.isGreaterThan=v.gt=function(U,ie){return ws(this,new Te(U,ie))>0},v.isGreaterThanOrEqualTo=v.gte=function(U,ie){return(ie=ws(this,new Te(U,ie)))===1||ie===0},v.isInteger=function(){return!!this.c&&rr(this.e/hn)>this.c.length-2},v.isLessThan=v.lt=function(U,ie){return ws(this,new Te(U,ie))<0},v.isLessThanOrEqualTo=v.lte=function(U,ie){return(ie=ws(this,new Te(U,ie)))===-1||ie===0},v.isNaN=function(){return!this.s},v.isNegative=function(){return this.s<0},v.isPositive=function(){return this.s>0},v.isZero=function(){return!!this.c&&this.c[0]==0},v.minus=function(U,ie){var ge,me,ye,be,$e=this,Ue=$e.s;if(U=new Te(U,ie),ie=U.s,!Ue||!ie)return new Te(NaN);if(Ue!=ie)return U.s=-ie,$e.plus(U);var We=$e.e/hn,lt=U.e/hn,at=$e.c,Et=U.c;if(!We||!lt){if(!at||!Et)return at?(U.s=-ie,U):new Te(Et?$e:NaN);if(!at[0]||!Et[0])return Et[0]?(U.s=-ie,U):new Te(at[0]?$e:M==3?-0:0)}if(We=rr(We),lt=rr(lt),at=at.slice(),Ue=We-lt){for((be=Ue<0)?(Ue=-Ue,ye=at):(lt=We,ye=Et),ye.reverse(),ie=Ue;ie--;ye.push(0));ye.reverse()}else for(me=(be=(Ue=at.length)<(ie=Et.length))?Ue:ie,Ue=ie=0;ie<me;ie++)if(at[ie]!=Et[ie]){be=at[ie]<Et[ie];break}if(be&&(ye=at,at=Et,Et=ye,U.s=-U.s),ie=(me=Et.length)-(ge=at.length),ie>0)for(;ie--;at[ge++]=0);for(ie=pr-1;me>Ue;){if(at[--me]<Et[me]){for(ge=me;ge&&!at[--ge];at[ge]=ie);--at[ge],at[me]+=pr}at[me]-=Et[me]}for(;at[0]==0;at.splice(0,1),--lt);return at[0]?gt(U,at,lt):(U.s=M==3?-1:1,U.c=[U.e=0],U)},v.modulo=v.mod=function(U,ie){var ge,me,ye=this;return U=new Te(U,ie),!ye.c||!U.s||U.c&&!U.c[0]?new Te(NaN):!U.c||ye.c&&!ye.c[0]?new Te(ye):(ht==9?(me=U.s,U.s=1,ge=a(ye,U,0,3),U.s=me,ge.s*=me):ge=a(ye,U,0,ht),U=ye.minus(ge.times(U)),!U.c[0]&&ht==1&&(U.s=ye.s),U)},v.multipliedBy=v.times=function(U,ie){var ge,me,ye,be,$e,Ue,We,lt,at,Et,Ht,Yt,tn,zn,Gn,Dn=this,ti=Dn.c,gr=(U=new Te(U,ie)).c;if(!ti||!gr||!ti[0]||!gr[0])return!Dn.s||!U.s||ti&&!ti[0]&&!gr||gr&&!gr[0]&&!ti?U.c=U.e=U.s=null:(U.s*=Dn.s,!ti||!gr?U.c=U.e=null:(U.c=[0],U.e=0)),U;for(me=rr(Dn.e/hn)+rr(U.e/hn),U.s*=Dn.s,We=ti.length,Et=gr.length,We<Et&&(tn=ti,ti=gr,gr=tn,ye=We,We=Et,Et=ye),ye=We+Et,tn=[];ye--;tn.push(0));for(zn=pr,Gn=jr,ye=Et;--ye>=0;){for(ge=0,Ht=gr[ye]%Gn,Yt=gr[ye]/Gn|0,$e=We,be=ye+$e;be>ye;)lt=ti[--$e]%Gn,at=ti[$e]/Gn|0,Ue=Yt*lt+at*Ht,lt=Ht*lt+Ue%Gn*Gn+tn[be]+ge,ge=(lt/zn|0)+(Ue/Gn|0)+Yt*at,tn[be--]=lt%zn;tn[be]=ge}return ge?++me:tn.splice(0,1),gt(U,tn,me)},v.negated=function(){var U=new Te(this);return U.s=-U.s||null,U},v.plus=function(U,ie){var ge,me=this,ye=me.s;if(U=new Te(U,ie),ie=U.s,!ye||!ie)return new Te(NaN);if(ye!=ie)return U.s=-ie,me.minus(U);var be=me.e/hn,$e=U.e/hn,Ue=me.c,We=U.c;if(!be||!$e){if(!Ue||!We)return new Te(ye/0);if(!Ue[0]||!We[0])return We[0]?U:new Te(Ue[0]?me:ye*0)}if(be=rr(be),$e=rr($e),Ue=Ue.slice(),ye=be-$e){for(ye>0?($e=be,ge=We):(ye=-ye,ge=Ue),ge.reverse();ye--;ge.push(0));ge.reverse()}for(ye=Ue.length,ie=We.length,ye-ie<0&&(ge=We,We=Ue,Ue=ge,ie=ye),ye=0;ie;)ye=(Ue[--ie]=Ue[ie]+We[ie]+ye)/pr|0,Ue[ie]=pr===Ue[ie]?0:Ue[ie]%pr;return ye&&(Ue=[ye].concat(Ue),++$e),gt(U,Ue,$e)},v.precision=v.sd=function(U,ie){var ge,me,ye,be=this;if(U!=null&&U!==!!U)return i(U,1,Wi),ie==null?ie=M:i(ie,0,8),et(new Te(be),U,ie);if(!(ge=be.c))return null;if(ye=ge.length-1,me=ye*hn+1,ye=ge[ye]){for(;ye%10==0;ye/=10,me--);for(ye=ge[0];ye>=10;ye/=10,me++);}return U&&be.e+1>me&&(me=be.e+1),me},v.shiftedBy=function(U){return i(U,-9007199254740991,Ka),this.times("1e"+U)},v.squareRoot=v.sqrt=function(){var U,ie,ge,me,ye,be=this,$e=be.c,Ue=be.s,We=be.e,lt=A+4,at=new Te("0.5");if(Ue!==1||!$e||!$e[0])return new Te(!Ue||Ue<0&&(!$e||$e[0])?NaN:$e?be:1/0);if(Ue=Math.sqrt(+ft(be)),Ue==0||Ue==1/0?(ie=sr($e),(ie.length+We)%2==0&&(ie+="0"),Ue=Math.sqrt(+ie),We=rr((We+1)/2)-(We<0||We%2),Ue==1/0?ie="5e"+We:(ie=Ue.toExponential(),ie=ie.slice(0,ie.indexOf("e")+1)+We),ge=new Te(ie)):ge=new Te(Ue+""),ge.c[0]){for(We=ge.e,Ue=We+lt,Ue<3&&(Ue=0);;)if(ye=ge,ge=at.times(ye.plus(a(be,ye,lt,1))),sr(ye.c).slice(0,Ue)===(ie=sr(ge.c)).slice(0,Ue))if(ge.e<We&&--Ue,ie=ie.slice(Ue-3,Ue+1),ie=="9999"||!me&&ie=="4999"){if(!me&&(et(ye,ye.e+A+2,0),ye.times(ye).eq(be))){ge=ye;break}lt+=4,Ue+=4,me=1}else{(!+ie||!+ie.slice(1)&&ie.charAt(0)=="5")&&(et(ge,ge.e+A+2,1),U=!ge.times(ge).eq(be));break}}return et(ge,ge.e+A+1,M,U)},v.toExponential=function(U,ie){return U!=null&&(i(U,0,Wi),U++),Fe(this,U,ie,1)},v.toFixed=function(U,ie){return U!=null&&(i(U,0,Wi),U=U+this.e+1),Fe(this,U,ie)},v.toFormat=function(U,ie,ge){var me,ye=this;if(ge==null)U!=null&&ie&&typeof ie=="object"?(ge=ie,ie=null):U&&typeof U=="object"?(ge=U,U=ie=null):ge=Ot;else if(typeof ge!="object")throw Error(ei+"Argument not an object: "+ge);if(me=ye.toFixed(U,ie),ye.c){var be,$e=me.split("."),Ue=+ge.groupSize,We=+ge.secondaryGroupSize,lt=ge.groupSeparator||"",at=$e[0],Et=$e[1],Ht=ye.s<0,Yt=Ht?at.slice(1):at,tn=Yt.length;if(We&&(be=Ue,Ue=We,We=be,tn-=be),Ue>0&&tn>0){for(be=tn%Ue||Ue,at=Yt.substr(0,be);be<tn;be+=Ue)at+=lt+Yt.substr(be,Ue);We>0&&(at+=lt+Yt.slice(be)),Ht&&(at="-"+at)}me=Et?at+(ge.decimalSeparator||"")+((We=+ge.fractionGroupSize)?Et.replace(new RegExp("\\d{"+We+"}\\B","g"),"$&"+(ge.fractionGroupSeparator||"")):Et):at}return(ge.prefix||"")+me+(ge.suffix||"")},v.toFraction=function(U){var ie,ge,me,ye,be,$e,Ue,We,lt,at,Et,Ht,Yt=this,tn=Yt.c;if(U!=null&&(Ue=new Te(U),!Ue.isInteger()&&(Ue.c||Ue.s!==1)||Ue.lt(k)))throw Error(ei+"Argument "+(Ue.isInteger()?"out of range: ":"not an integer: ")+ft(Ue));if(!tn)return new Te(Yt);for(ie=new Te(k),lt=ge=new Te(k),me=We=new Te(k),Ht=sr(tn),be=ie.e=Ht.length-Yt.e-1,ie.c[0]=Bo[($e=be%hn)<0?hn+$e:$e],U=!U||Ue.comparedTo(ie)>0?be>0?ie:lt:Ue,$e=Ee,Ee=1/0,Ue=new Te(Ht),We.c[0]=0;at=a(Ue,ie,0,1),ye=ge.plus(at.times(me)),ye.comparedTo(U)!=1;)ge=me,me=ye,lt=We.plus(at.times(ye=lt)),We=ye,ie=Ue.minus(at.times(ye=ie)),Ue=ye;return ye=a(U.minus(ge),me,0,1),We=We.plus(ye.times(lt)),ge=ge.plus(ye.times(me)),We.s=lt.s=Yt.s,be=be*2,Et=a(lt,me,be,M).minus(Yt).abs().comparedTo(a(We,ge,be,M).minus(Yt).abs())<1?[lt,me]:[We,ge],Ee=$e,Et},v.toNumber=function(){return+ft(this)},v.toPrecision=function(U,ie){return U!=null&&i(U,1,Wi),Fe(this,U,ie,2)},v.toString=function(U){var ie,ge=this,me=ge.s,ye=ge.e;return ye===null?me?(ie="Infinity",me<0&&(ie="-"+ie)):ie="NaN":(U==null?ie=ye<=z||ye>=Q?g(sr(ge.c),ye):P(sr(ge.c),ye,"0"):U===10&&fn?(ge=et(new Te(ge),A+ye+1,M),ie=P(sr(ge.c),ge.e,"0")):(i(U,2,Rt.length,"Base"),ie=h(P(sr(ge.c),ye,"0"),10,U,me,!0)),me<0&&ge.c[0]&&(ie="-"+ie)),ie},v.valueOf=v.toJSON=function(){return ft(this)},v._isBigNumber=!0,v[Symbol.toStringTag]="BigNumber",v[Symbol.for("nodejs.util.inspect.custom")]=v.valueOf,s!=null&&Te.set(s),Te}function rr(s){var a=s|0;return s>0||s===a?a:a-1}function sr(s){for(var a,h,d=1,v=s.length,k=s[0]+"";d<v;){for(a=s[d++]+"",h=hn-a.length;h--;a="0"+a);k+=a}for(v=k.length;k.charCodeAt(--v)===48;);return k.slice(0,v+1||1)}function ws(s,a){var h,d,v=s.c,k=a.c,A=s.s,M=a.s,z=s.e,Q=a.e;if(!A||!M)return null;if(h=v&&!v[0],d=k&&!k[0],h||d)return h?d?0:-M:A;if(A!=M)return A;if(h=A<0,d=z==Q,!v||!k)return d?0:!v^h?1:-1;if(!d)return z>Q^h?1:-1;for(M=(z=v.length)<(Q=k.length)?z:Q,A=0;A<M;A++)if(v[A]!=k[A])return v[A]>k[A]^h?1:-1;return z==Q?0:z>Q^h?1:-1}function i(s,a,h,d){if(s<a||s>h||s!==Si(s))throw Error(ei+(d||"Argument")+(typeof s=="number"?s<a||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function u(s){var a=s.c.length-1;return rr(s.e/hn)==a&&s.c[a]%2!=0}function g(s,a){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(a<0?"e":"e+")+a}function P(s,a,h){var d,v;if(a<0){for(v=h+".";++a;v+=h);s=v+s}else if(d=s.length,++a>d){for(v=h,a-=d;--a;v+=h);s+=v}else a<d&&(s=s.slice(0,a)+"."+s.slice(a));return s}var N=bl(),oe=N,je=class{constructor(s){Xt(this,"key");Xt(this,"left",null);Xt(this,"right",null);this.key=s}},ct=class extends je{constructor(s){super(s)}},_t=class{constructor(){Xt(this,"size",0);Xt(this,"modificationCount",0);Xt(this,"splayCount",0)}splay(s){let a=this.root;if(a==null)return this.compare(s,s),-1;let h=null,d=null,v=null,k=null,A=a,M=this.compare,z;for(;;)if(z=M(A.key,s),z>0){let Q=A.left;if(Q==null||(z=M(Q.key,s),z>0&&(A.left=Q.right,Q.right=A,A=Q,Q=A.left,Q==null)))break;h==null?d=A:h.left=A,h=A,A=Q}else if(z<0){let Q=A.right;if(Q==null||(z=M(Q.key,s),z<0&&(A.right=Q.left,Q.left=A,A=Q,Q=A.right,Q==null)))break;v==null?k=A:v.right=A,v=A,A=Q}else break;return v!=null&&(v.right=A.left,A.left=k),h!=null&&(h.left=A.right,A.right=d),this.root!==A&&(this.root=A,this.splayCount++),z}splayMin(s){let a=s,h=a.left;for(;h!=null;){let d=h;a.left=d.right,d.right=a,a=d,h=a.left}return a}splayMax(s){let a=s,h=a.right;for(;h!=null;){let d=h;a.right=d.left,d.left=a,a=d,h=a.right}return a}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let a=this.root,h=a,d=a.left;if(this.size--,d==null)this.root=a.right;else{let v=a.right;a=this.splayMax(d),a.right=v,this.root=a}return this.modificationCount++,h}addNewRoot(s,a){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}a<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,a)=>s<a?-1:s>a?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},At=class ju extends _t{constructor(h,d){super();Xt(this,"root",null);Xt(this,"compare");Xt(this,"validKey");Xt(this,Ft,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=d??(v=>v!=null&&v!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let d of h)this.delete(d)}forEach(h){let d=this[Symbol.iterator](),v;for(;v=d.next(),!v.done;)h(v.value,v.value,this)}add(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new ct(h),d),this}addAndReturn(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new ct(h),d),this.root.key}addAll(h){for(let d of h)this.add(d)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let d=this.root.left;if(d==null)return null;let v=d.right;for(;v!=null;)d=v,v=d.right;return d.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let d=this.root.right;if(d==null)return null;let v=d.left;for(;v!=null;)d=v,v=d.left;return d.key}retainAll(h){let d=new ju(this.compare,this.validKey),v=this.modificationCount;for(let k of h){if(v!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(k)&&this.splay(k)==0&&d.add(this.root.key)}d.size!=this.size&&(this.root=d.root,this.size=d.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let d=new ju(this.compare,this.validKey);for(let v of this)h.has(v)&&d.add(v);return d}difference(h){let d=new ju(this.compare,this.validKey);for(let v of this)h.has(v)||d.add(v);return d}union(h){let d=this.clone();return d.addAll(h),d}clone(){let h=new ju(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function d(k,A){let M,z;do{if(M=k.left,z=k.right,M!=null){let Q=new ct(M.key);A.left=Q,d(M,Q)}if(z!=null){let Q=new ct(z.key);A.right=Q,k=z,A=Q}}while(z!=null)}let v=new ct(h.key);return d(h,v),v}toSet(){return this.clone()}entries(){return new Sn(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(ln=Symbol.iterator,Ft=Symbol.toStringTag,ln)](){return new rn(this.wrap())}},$t=class{constructor(s){Xt(this,"tree");Xt(this,"path",new Array);Xt(this,"modificationCount",null);Xt(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],a=s.right;if(a!=null){for(;a!=null;)this.path.push(a),a=a.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},rn=class extends $t{getValue(s){return s.key}},Sn=class extends $t{getValue(s){return[s.key,s.key]}},or=s=>s,Ei=s=>{if(s){let a=new At(oo(s)),h=new At(oo(s)),d=(k,A)=>A.addAndReturn(k),v=k=>({x:d(k.x,a),y:d(k.y,h)});return v({x:new oe(0),y:new oe(0)}),v}return or},mr=s=>({set:a=>{hi=mr(a)},reset:()=>mr(s),compare:oo(s),snap:Ei(s),orient:bs(s)}),hi=mr(),xs=(s,a)=>s.ll.x.isLessThanOrEqualTo(a.x)&&a.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(a.y)&&a.y.isLessThanOrEqualTo(s.ur.y),wl=(s,a)=>{if(a.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(a.ll.x)||a.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(a.ll.y))return null;let h=s.ll.x.isLessThan(a.ll.x)?a.ll.x:s.ll.x,d=s.ur.x.isLessThan(a.ur.x)?s.ur.x:a.ur.x,v=s.ll.y.isLessThan(a.ll.y)?a.ll.y:s.ll.y,k=s.ur.y.isLessThan(a.ur.y)?s.ur.y:a.ur.y;return{ll:{x:h,y:v},ur:{x:d,y:k}}},is=(s,a)=>s.x.times(a.y).minus(s.y.times(a.x)),zr=(s,a)=>s.x.times(a.x).plus(s.y.times(a.y)),Cr=s=>zr(s,s).sqrt(),Cu=(s,a,h)=>{let d={x:a.x.minus(s.x),y:a.y.minus(s.y)},v={x:h.x.minus(s.x),y:h.y.minus(s.y)};return is(v,d).div(Cr(v)).div(Cr(d))},xl=(s,a,h)=>{let d={x:a.x.minus(s.x),y:a.y.minus(s.y)},v={x:h.x.minus(s.x),y:h.y.minus(s.y)};return zr(v,d).div(Cr(v)).div(Cr(d))},Zn=(s,a,h)=>a.y.isZero()?null:{x:s.x.plus(a.x.div(a.y).times(h.minus(s.y))),y:h},Zi=(s,a,h)=>a.x.isZero()?null:{x:h,y:s.y.plus(a.y.div(a.x).times(h.minus(s.x)))},ku=(s,a,h,d)=>{if(a.x.isZero())return Zi(h,d,s.x);if(d.x.isZero())return Zi(s,a,h.x);if(a.y.isZero())return Zn(h,d,s.y);if(d.y.isZero())return Zn(s,a,h.y);let v=is(a,d);if(v.isZero())return null;let k={x:h.x.minus(s.x),y:h.y.minus(s.y)},A=is(k,a).div(v),M=is(k,d).div(v),z=s.x.plus(M.times(a.x)),Q=h.x.plus(A.times(d.x)),Ne=s.y.plus(M.times(a.y)),Ee=h.y.plus(A.times(d.y)),Ye=z.plus(Q).div(2),ht=Ne.plus(Ee).div(2);return{x:Ye,y:ht}},Ls=class jg{constructor(a,h){Xt(this,"point");Xt(this,"isLeft");Xt(this,"segment");Xt(this,"otherSE");Xt(this,"consumedBy");a.events===void 0?a.events=[this]:a.events.push(this),this.point=a,this.isLeft=h}static compare(a,h){let d=jg.comparePoints(a.point,h.point);return d!==0?d:(a.point!==h.point&&a.link(h),a.isLeft!==h.isLeft?a.isLeft?1:-1:To.compare(a.segment,h.segment))}static comparePoints(a,h){return a.x.isLessThan(h.x)?-1:a.x.isGreaterThan(h.x)?1:a.y.isLessThan(h.y)?-1:a.y.isGreaterThan(h.y)?1:0}link(a){if(a.point===this.point)throw new Error("Tried to link already linked events");let h=a.point.events;for(let d=0,v=h.length;d<v;d++){let k=h[d];this.point.events.push(k),k.point=this.point}this.checkForConsuming()}checkForConsuming(){let a=this.point.events.length;for(let h=0;h<a;h++){let d=this.point.events[h];if(d.segment.consumedBy===void 0)for(let v=h+1;v<a;v++){let k=this.point.events[v];k.consumedBy===void 0&&d.otherSE.point.events===k.otherSE.point.events&&d.segment.consume(k.segment)}}}getAvailableLinkedEvents(){let a=[];for(let h=0,d=this.point.events.length;h<d;h++){let v=this.point.events[h];v!==this&&!v.segment.ringOut&&v.segment.isInResult()&&a.push(v)}return a}getLeftmostComparator(a){let h=new Map,d=v=>{let k=v.otherSE;h.set(v,{sine:Cu(this.point,a.point,k.point),cosine:xl(this.point,a.point,k.point)})};return(v,k)=>{h.has(v)||d(v),h.has(k)||d(k);let{sine:A,cosine:M}=h.get(v),{sine:z,cosine:Q}=h.get(k);return A.isGreaterThanOrEqualTo(0)&&z.isGreaterThanOrEqualTo(0)?M.isLessThan(Q)?1:M.isGreaterThan(Q)?-1:0:A.isLessThan(0)&&z.isLessThan(0)?M.isLessThan(Q)?-1:M.isGreaterThan(Q)?1:0:z.isLessThan(A)?-1:z.isGreaterThan(A)?1:0}}},Hl=0,To=class jc{constructor(a,h,d,v){Xt(this,"id");Xt(this,"leftSE");Xt(this,"rightSE");Xt(this,"rings");Xt(this,"windings");Xt(this,"ringOut");Xt(this,"consumedBy");Xt(this,"prev");Xt(this,"_prevInResult");Xt(this,"_beforeState");Xt(this,"_afterState");Xt(this,"_isInResult");this.id=++Hl,this.leftSE=a,a.segment=this,a.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=a,this.rings=d,this.windings=v}static compare(a,h){let d=a.leftSE.point.x,v=h.leftSE.point.x,k=a.rightSE.point.x,A=h.rightSE.point.x;if(A.isLessThan(d))return 1;if(k.isLessThan(v))return-1;let M=a.leftSE.point.y,z=h.leftSE.point.y,Q=a.rightSE.point.y,Ne=h.rightSE.point.y;if(d.isLessThan(v)){if(z.isLessThan(M)&&z.isLessThan(Q))return 1;if(z.isGreaterThan(M)&&z.isGreaterThan(Q))return-1;let Ee=a.comparePoint(h.leftSE.point);if(Ee<0)return 1;if(Ee>0)return-1;let Ye=h.comparePoint(a.rightSE.point);return Ye!==0?Ye:-1}if(d.isGreaterThan(v)){if(M.isLessThan(z)&&M.isLessThan(Ne))return-1;if(M.isGreaterThan(z)&&M.isGreaterThan(Ne))return 1;let Ee=h.comparePoint(a.leftSE.point);if(Ee!==0)return Ee;let Ye=a.comparePoint(h.rightSE.point);return Ye<0?1:Ye>0?-1:1}if(M.isLessThan(z))return-1;if(M.isGreaterThan(z))return 1;if(k.isLessThan(A)){let Ee=h.comparePoint(a.rightSE.point);if(Ee!==0)return Ee}if(k.isGreaterThan(A)){let Ee=a.comparePoint(h.rightSE.point);if(Ee<0)return 1;if(Ee>0)return-1}if(!k.eq(A)){let Ee=Q.minus(M),Ye=k.minus(d),ht=Ne.minus(z),Pt=A.minus(v);if(Ee.isGreaterThan(Ye)&&ht.isLessThan(Pt))return 1;if(Ee.isLessThan(Ye)&&ht.isGreaterThan(Pt))return-1}return k.isGreaterThan(A)?1:k.isLessThan(A)||Q.isLessThan(Ne)?-1:Q.isGreaterThan(Ne)?1:a.id<h.id?-1:a.id>h.id?1:0}static fromRing(a,h,d){let v,k,A,M=Ls.comparePoints(a,h);if(M<0)v=a,k=h,A=1;else if(M>0)v=h,k=a,A=-1;else throw new Error(`Tried to create degenerate segment at [${a.x}, ${a.y}]`);let z=new Ls(v,!0),Q=new Ls(k,!1);return new jc(z,Q,[d],[A])}replaceRightSE(a){this.rightSE=a,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let a=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:a.isLessThan(h)?a:h},ur:{x:this.rightSE.point.x,y:a.isGreaterThan(h)?a:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(a){return a.x.eq(this.leftSE.point.x)&&a.y.eq(this.leftSE.point.y)||a.x.eq(this.rightSE.point.x)&&a.y.eq(this.rightSE.point.y)}comparePoint(a){return hi.orient(this.leftSE.point,a,this.rightSE.point)}getIntersection(a){let h=this.bbox(),d=a.bbox(),v=wl(h,d);if(v===null)return null;let k=this.leftSE.point,A=this.rightSE.point,M=a.leftSE.point,z=a.rightSE.point,Q=xs(h,M)&&this.comparePoint(M)===0,Ne=xs(d,k)&&a.comparePoint(k)===0,Ee=xs(h,z)&&this.comparePoint(z)===0,Ye=xs(d,A)&&a.comparePoint(A)===0;if(Ne&&Q)return Ye&&!Ee?A:!Ye&&Ee?z:null;if(Ne)return Ee&&k.x.eq(z.x)&&k.y.eq(z.y)?null:k;if(Q)return Ye&&A.x.eq(M.x)&&A.y.eq(M.y)?null:M;if(Ye&&Ee)return null;if(Ye)return A;if(Ee)return z;let ht=ku(k,this.vector(),M,a.vector());return ht===null||!xs(v,ht)?null:hi.snap(ht)}split(a){let h=[],d=a.events!==void 0,v=new Ls(a,!0),k=new Ls(a,!1),A=this.rightSE;this.replaceRightSE(k),h.push(k),h.push(v);let M=new jc(v,A,this.rings.slice(),this.windings.slice());return Ls.comparePoints(M.leftSE.point,M.rightSE.point)>0&&M.swapEvents(),Ls.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),d&&(v.checkForConsuming(),k.checkForConsuming()),h}swapEvents(){let a=this.rightSE;this.rightSE=this.leftSE,this.leftSE=a,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,d=this.windings.length;h<d;h++)this.windings[h]*=-1}consume(a){let h=this,d=a;for(;h.consumedBy;)h=h.consumedBy;for(;d.consumedBy;)d=d.consumedBy;let v=jc.compare(h,d);if(v!==0){if(v>0){let k=h;h=d,d=k}if(h.prev===d){let k=h;h=d,d=k}for(let k=0,A=d.rings.length;k<A;k++){let M=d.rings[k],z=d.windings[k],Q=h.rings.indexOf(M);Q===-1?(h.rings.push(M),h.windings.push(z)):h.windings[Q]+=z}d.rings=null,d.windings=null,d.consumedBy=h,d.leftSE.consumedBy=h.leftSE,d.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let a=this.prev.consumedBy||this.prev;this._beforeState=a.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let a=this.beforeState();this._afterState={rings:a.rings.slice(0),windings:a.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,d=this._afterState.windings,v=this._afterState.multiPolys;for(let M=0,z=this.rings.length;M<z;M++){let Q=this.rings[M],Ne=this.windings[M],Ee=h.indexOf(Q);Ee===-1?(h.push(Q),d.push(Ne)):d[Ee]+=Ne}let k=[],A=[];for(let M=0,z=h.length;M<z;M++){if(d[M]===0)continue;let Q=h[M],Ne=Q.poly;if(A.indexOf(Ne)===-1)if(Q.isExterior)k.push(Ne);else{A.indexOf(Ne)===-1&&A.push(Ne);let Ee=k.indexOf(Q.poly);Ee!==-1&&k.splice(Ee,1)}}for(let M=0,z=k.length;M<z;M++){let Q=k[M].multiPoly;v.indexOf(Q)===-1&&v.push(Q)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let a=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(Kl.type){case"union":{let d=a.length===0,v=h.length===0;this._isInResult=d!==v;break}case"intersection":{let d,v;a.length<h.length?(d=a.length,v=h.length):(d=h.length,v=a.length),this._isInResult=v===Kl.numMultiPolys&&d<v;break}case"xor":{let d=Math.abs(a.length-h.length);this._isInResult=d%2===1;break}case"difference":{let d=v=>v.length===1&&v[0].isSubject;this._isInResult=d(a)!==d(h);break}}return this._isInResult}},Ja=class{constructor(s,a,h){Xt(this,"poly");Xt(this,"isExterior");Xt(this,"segments");Xt(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=a,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let d=hi.snap({x:new oe(s[0][0]),y:new oe(s[0][1])});this.bbox={ll:{x:d.x,y:d.y},ur:{x:d.x,y:d.y}};let v=d;for(let k=1,A=s.length;k<A;k++){if(typeof s[k][0]!="number"||typeof s[k][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let M=hi.snap({x:new oe(s[k][0]),y:new oe(s[k][1])});M.x.eq(v.x)&&M.y.eq(v.y)||(this.segments.push(To.fromRing(v,M,this)),M.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.x),M.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.y),M.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.x),M.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.y),v=M)}(!d.x.eq(v.x)||!d.y.eq(v.y))&&this.segments.push(To.fromRing(v,d,this))}getSweepEvents(){let s=[];for(let a=0,h=this.segments.length;a<h;a++){let d=this.segments[a];s.push(d.leftSE),s.push(d.rightSE)}return s}},Wl=class{constructor(s,a){Xt(this,"multiPoly");Xt(this,"exteriorRing");Xt(this,"interiorRings");Xt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ja(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,d=s.length;h<d;h++){let v=new Ja(s[h],this,!1);v.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=v.bbox.ll.x),v.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=v.bbox.ll.y),v.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=v.bbox.ur.x),v.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=v.bbox.ur.y),this.interiorRings.push(v)}this.multiPoly=a}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let a=0,h=this.interiorRings.length;a<h;a++){let d=this.interiorRings[a].getSweepEvents();for(let v=0,k=d.length;v<k;v++)s.push(d[v])}return s}},fc=class{constructor(s,a){Xt(this,"isSubject");Xt(this,"polys");Xt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new oe(Number.POSITIVE_INFINITY),y:new oe(Number.POSITIVE_INFINITY)},ur:{x:new oe(Number.NEGATIVE_INFINITY),y:new oe(Number.NEGATIVE_INFINITY)}};for(let h=0,d=s.length;h<d;h++){let v=new Wl(s[h],this);v.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=v.bbox.ll.x),v.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=v.bbox.ll.y),v.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=v.bbox.ur.x),v.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=v.bbox.ur.y),this.polys.push(v)}this.isSubject=a}getSweepEvents(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let d=this.polys[a].getSweepEvents();for(let v=0,k=d.length;v<k;v++)s.push(d[v])}return s}},Zl=class zf{constructor(a){Xt(this,"events");Xt(this,"poly");Xt(this,"_isExteriorRing");Xt(this,"_enclosingRing");this.events=a;for(let h=0,d=a.length;h<d;h++)a[h].segment.ringOut=this;this.poly=null}static factory(a){let h=[];for(let d=0,v=a.length;d<v;d++){let k=a[d];if(!k.isInResult()||k.ringOut)continue;let A=null,M=k.leftSE,z=k.rightSE,Q=[M],Ne=M.point,Ee=[];for(;A=M,M=z,Q.push(M),M.point!==Ne;)for(;;){let Ye=M.getAvailableLinkedEvents();if(Ye.length===0){let Ot=Q[0].point,Rt=Q[Q.length-1].point;throw new Error(`Unable to complete output ring starting at [${Ot.x}, ${Ot.y}]. Last matching segment found ends at [${Rt.x}, ${Rt.y}].`)}if(Ye.length===1){z=Ye[0].otherSE;break}let ht=null;for(let Ot=0,Rt=Ee.length;Ot<Rt;Ot++)if(Ee[Ot].point===M.point){ht=Ot;break}if(ht!==null){let Ot=Ee.splice(ht)[0],Rt=Q.splice(Ot.index);Rt.unshift(Rt[0].otherSE),h.push(new zf(Rt.reverse()));continue}Ee.push({index:Q.length,point:M.point});let Pt=M.getLeftmostComparator(A);z=Ye.sort(Pt)[0].otherSE;break}h.push(new zf(Q))}return h}getGeom(){let a=this.events[0].point,h=[a];for(let Q=1,Ne=this.events.length-1;Q<Ne;Q++){let Ee=this.events[Q].point,Ye=this.events[Q+1].point;hi.orient(Ee,a,Ye)!==0&&(h.push(Ee),a=Ee)}if(h.length===1)return null;let d=h[0],v=h[1];hi.orient(d,a,v)===0&&h.shift(),h.push(h[0]);let k=this.isExteriorRing()?1:-1,A=this.isExteriorRing()?0:h.length-1,M=this.isExteriorRing()?h.length:-1,z=[];for(let Q=A;Q!=M;Q+=k)z.push([h[Q].x.toNumber(),h[Q].y.toNumber()]);return z}isExteriorRing(){if(this._isExteriorRing===void 0){let a=this.enclosingRing();this._isExteriorRing=a?!a.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var v,k;let a=this.events[0];for(let A=1,M=this.events.length;A<M;A++){let z=this.events[A];Ls.compare(a,z)>0&&(a=z)}let h=a.segment.prevInResult(),d=h?h.prevInResult():null;for(;;){if(!h)return null;if(!d)return h.ringOut;if(d.ringOut!==h.ringOut)return((v=d.ringOut)==null?void 0:v.enclosingRing())!==h.ringOut?h.ringOut:(k=h.ringOut)==null?void 0:k.enclosingRing();h=d.prevInResult(),d=h?h.prevInResult():null}}},Ll=class{constructor(s){Xt(this,"exteriorRing");Xt(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let a=[s];for(let h=0,d=this.interiorRings.length;h<d;h++){let v=this.interiorRings[h].getGeom();v!==null&&a.push(v)}return a}},Cl=class{constructor(s){Xt(this,"rings");Xt(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let d=this.polys[a].getGeom();d!==null&&s.push(d)}return s}_composePolys(s){var h;let a=[];for(let d=0,v=s.length;d<v;d++){let k=s[d];if(!k.poly)if(k.isExteriorRing())a.push(new Ll(k));else{let A=k.enclosingRing();A!=null&&A.poly||a.push(new Ll(A)),(h=A==null?void 0:A.poly)==null||h.addInterior(k)}}return a}},Pu=class{constructor(s,a=To.compare){Xt(this,"queue");Xt(this,"tree");Xt(this,"segments");this.queue=s,this.tree=new At(a),this.segments=[]}process(s){let a=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(a),h;s.isLeft&&this.tree.add(a);let d=a,v=a;do d=this.tree.lastBefore(d);while(d!=null&&d.consumedBy!=null);do v=this.tree.firstAfter(v);while(v!=null&&v.consumedBy!=null);if(s.isLeft){let k=null;if(d){let M=d.getIntersection(a);if(M!==null&&(a.isAnEndpoint(M)||(k=M),!d.isAnEndpoint(M))){let z=this._splitSafely(d,M);for(let Q=0,Ne=z.length;Q<Ne;Q++)h.push(z[Q])}}let A=null;if(v){let M=v.getIntersection(a);if(M!==null&&(a.isAnEndpoint(M)||(A=M),!v.isAnEndpoint(M))){let z=this._splitSafely(v,M);for(let Q=0,Ne=z.length;Q<Ne;Q++)h.push(z[Q])}}if(k!==null||A!==null){let M=null;k===null?M=A:A===null?M=k:M=Ls.comparePoints(k,A)<=0?k:A,this.queue.delete(a.rightSE),h.push(a.rightSE);let z=a.split(M);for(let Q=0,Ne=z.length;Q<Ne;Q++)h.push(z[Q])}h.length>0?(this.tree.delete(a),h.push(s)):(this.segments.push(a),a.prev=d)}else{if(d&&v){let k=d.getIntersection(v);if(k!==null){if(!d.isAnEndpoint(k)){let A=this._splitSafely(d,k);for(let M=0,z=A.length;M<z;M++)h.push(A[M])}if(!v.isAnEndpoint(k)){let A=this._splitSafely(v,k);for(let M=0,z=A.length;M<z;M++)h.push(A[M])}}}this.tree.delete(a)}return h}_splitSafely(s,a){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let d=s.split(a);return d.push(h),s.consumedBy===void 0&&this.tree.add(s),d}},Nh=class{constructor(){Xt(this,"type");Xt(this,"numMultiPolys")}run(s,a,h){Ya.type=s;let d=[new fc(a,!0)];for(let z=0,Q=h.length;z<Q;z++)d.push(new fc(h[z],!1));if(Ya.numMultiPolys=d.length,Ya.type==="difference"){let z=d[0],Q=1;for(;Q<d.length;)wl(d[Q].bbox,z.bbox)!==null?Q++:d.splice(Q,1)}if(Ya.type==="intersection")for(let z=0,Q=d.length;z<Q;z++){let Ne=d[z];for(let Ee=z+1,Ye=d.length;Ee<Ye;Ee++)if(wl(Ne.bbox,d[Ee].bbox)===null)return[]}let v=new At(Ls.compare);for(let z=0,Q=d.length;z<Q;z++){let Ne=d[z].getSweepEvents();for(let Ee=0,Ye=Ne.length;Ee<Ye;Ee++)v.add(Ne[Ee])}let k=new Pu(v),A=null;for(v.size!=0&&(A=v.first(),v.delete(A));A;){let z=k.process(A);for(let Q=0,Ne=z.length;Q<Ne;Q++){let Ee=z[Q];Ee.consumedBy===void 0&&v.add(Ee)}v.size!=0?(A=v.first(),v.delete(A)):A=null}hi.reset();let M=Zl.factory(k.segments);return new Cl(M).getGeom()}},Ya=new Nh,Kl=Ya,Dh=(s,...a)=>Kl.run("intersection",s,a),Oh=(s,...a)=>Kl.run("difference",s,a);hi.set;function Jl(s){let a={type:"Feature"};return a.geometry=s,a}function Yl(s){return s.type==="Feature"?s.geometry:s}function dc(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function pc(s){return Jl({type:"LineString",coordinates:s})}function Xl(s){return Jl({type:"MultiLineString",coordinates:s})}function mc(s){return Jl({type:"Polygon",coordinates:s})}function gc(s){return Jl({type:"MultiPolygon",coordinates:s})}function vc(s,a){let h=Yl(s),d=Yl(a),v=Dh(h.coordinates,d.coordinates);return v.length===0?null:v.length===1?mc(v[0]):gc(v)}function f(s,a){let h=Yl(s),d=Yl(a),v=Oh(h.coordinates,d.coordinates);return v.length===0?null:v.length===1?mc(v[0]):gc(v)}function _(s){return Array.isArray(s)?1+_(s[0]):-1}function S(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let a=dc(s),h=_(a),d=[];return h>1?a.forEach(v=>{d.push(pc(v))}):d.push(s),d}function T(s){let a=[];return s.eachLayer(h=>{a.push(dc(h.toGeoJSON(15)))}),Xl(a)}mi.Cut=mi.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);a._latlngInfos=this._layer._latlngInfo,this.cut(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:d,originalLayer:v})=>{this._fireCut(v,d,v),this._fireCut(this._map,d,v),v.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let a=this._map._layers,h=s._latlngInfos||[];Object.keys(a).map(d=>a[d]).filter(d=>d.pm).filter(d=>!d._pmTempLayer).filter(d=>!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1).filter(d=>d instanceof L.Polyline).filter(d=>d!==s).filter(d=>d.pm.options.allowCutting).filter(d=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(d)>-1:!0).filter(d=>!this._layerGroup.hasLayer(d)).filter(d=>{try{let v=!!nr(s.toGeoJSON(15),d.toGeoJSON(15)).features.length>0;return v||d instanceof L.Polyline&&!(d instanceof L.Polygon)?v:!!vc(s.toGeoJSON(15),d.toGeoJSON(15))}catch{return d instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(d=>{let v;if(d instanceof L.Polygon){v=L.polygon(d.getLatLngs());let z=v.getLatLngs();h.forEach(Q=>{if(Q&&Q.snapInfo){let{latlng:Ne}=Q,Ee=this._calcClosestLayer(Ne,[v]);if(Ee&&Ee.segment&&Ee.distance<this.options.snapDistance){let{segment:Ye}=Ee;if(Ye&&Ye.length===2){let{indexPath:ht,parentPath:Pt,newIndex:Ot}=L.PM.Utils._getIndexFromSegment(z,Ye);(ht.length>1?(0,Qn.default)(z,Pt):z).splice(Ot,0,Ne)}}}})}else v=d;let k=this._cutLayer(s,v),A=L.geoJSON(k,d.options);A.getLayers().length===1&&([A]=A.getLayers()),this._setPane(A,"layerPane");let M=A.addTo(this._map.pm._getContainingLayer());if(M.pm.enable(d.pm.options),M.pm.disable(),d._pmTempLayer=!0,s._pmTempLayer=!0,d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),M.getLayers&&M.getLayers().length===0&&this._map.pm.removeLayer({target:M}),M instanceof L.LayerGroup?(M.eachLayer(z=>{this._addDrawnLayerProp(z)}),this._addDrawnLayerProp(M)):this._addDrawnLayerProp(M),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let z=this.options.layersToCut.indexOf(d);z>-1&&this.options.layersToCut.splice(z,1)}this._editedLayers.push({layer:M,originalLayer:d})})},_cutLayer(s,a){let h=L.geoJSON(),d;if(a instanceof L.Polygon)d=f(a.toGeoJSON(15),s.toGeoJSON(15));else{let v=S(a);v.forEach(k=>{let A=ir(k,s.toGeoJSON(15)),M;A&&A.features.length>0?M=L.geoJSON(A):M=L.geoJSON(k),M.getLayers().forEach(z=>{io(s.toGeoJSON(15),z.toGeoJSON(15))||z.addTo(h)})}),v.length>1?d=T(h):d=h.toGeoJSON(15)}return d},_change:L.Util.falseFn}),mi.Text=mi.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}},_createMarker(s){var v,k,A,M;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(v=this.options.textOptions)==null?void 0:v.className){let z=this.options.textOptions.className.split(" ");this.textArea.classList.add(...z)}let h=this._createTextIcon(this.textArea),d=new L.Marker(a,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(d,"markerPane"),this._finishLayer(d),d.pm||(d.options.draggable=!1),d.addTo(this._map.pm._getContainingLayer()),d.pm){d.pm.textArea=this.textArea,L.setOptions(d.pm,{removeIfEmpty:((k=this.options.textOptions)==null?void 0:k.removeIfEmpty)??!0});let z=((A=this.options.textOptions)==null?void 0:A.focusAfterDraw)??!0;d.pm._createTextMarker(z),(M=this.options.textOptions)!=null&&M.text&&d.pm.setText(this.options.textOptions.text)}this._fireCreate(d),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var W={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ci(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(Ci(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Ci(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(Ci(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let a={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(a.containerPoint=this._map.mouseEventToContainerPoint(s),a.latlng=this._map.containerPointToLatLng(a.containerPoint)),this._dragMixinOnMouseUp(a),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let a=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!a&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let d="resizeableCircleMarker";this._layer instanceof L.Circle&&(d="resizeableCircle"),this.options.snappable&&!a&&!h?this._layer.pm.options[d]||this._initSnappableMarkersDrag():this._layer.pm.options[d]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let a=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(a,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let a=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,a&&L.DomUtil.removeClass(a,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:a}=s,h={lat:a.lat-this._tempDragCoord.lat,lng:a.lng-this._tempDragCoord.lng},d=v=>v.map(k=>{if(Array.isArray(k))return d(k);let A={lat:k.lat+h.lat,lng:k.lng+h.lng};return(k.alt||k.alt===0)&&(A.alt=k.alt),A});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let v=d([this._layer.getLatLng()]);this._layer.setLatLng(v[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let v=this._layer.getLatLng();this._layer._snapped&&(v=this._layer._orgLatLng);let k=d([v]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let v=d([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(v),this._fireChange(this._layer.getBounds(),"Edit")}else{let v=d(this._layer.getLatLngs());this._layer.setLatLngs(v),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=a,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,a){if(this.enabled())return!1;if(!a._fromLayerSync&&this._layer===a.target&&this.options.syncLayersOnDrag){a._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(d=>{d instanceof L.LayerGroup&&(h=h.concat(d.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let d in this._parentLayerGroup){let v=this._parentLayerGroup[d];v.pm&&(h=v.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(d=>!!d.pm).filter(d=>!!d.pm.options.draggable),h.forEach(d=>{d!==this._layer&&d.pm[s]&&(d._snapped=!1,d.pm[s](a))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},re=W,ae=m(br());function fe(s,a,h,d){return h.unproject(a.transform(h.project(s,d)),d)}function pe(s,a,h){let d=h.getMaxZoom();if(d===1/0&&(d=h.getZoom()),L.Util.isArray(s)){let v=[];return s.forEach(k=>{v.push(pe(k,a,h))}),v}return s instanceof L.LatLng?fe(s,a,h,d):null}function ke(s,a){a instanceof L.Layer&&(a=a.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(a,h)}function Ge(s,a){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(a,h)}var pt={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=ke(this._map,this._rotationOriginLatLng),this._rotationStartPoint=ke(this._map,s.target.getLatLng()),this._initialRotateLatLng=Nr(this._layer),this._startAngle=this.getAngle();let a=Nr(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,a),this._fireRotationStart(this._map,a)},_onRotate(s){let a=ke(this._map,s.target.getLatLng()),h=this._rotationStartPoint,d=this._rotationOriginPoint,v=Math.atan2(a.y-d.y,a.x-d.x)-Math.atan2(h.y-d.y,h.x-d.x);this._layer.setLatLngs(this._rotateLayer(v,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=this;function A(Ne,Ee=[],Ye=-1){if(Ye>-1&&Ee.push(Ye),L.Util.isArray(Ne[0]))Ne.forEach((ht,Pt)=>A(ht,Ee.slice(),Pt));else{let ht=Ee.length>0?(0,ae.default)(k._markers,Ee):k._markers[0];Ne.forEach((Pt,Ot)=>{ht[Ot].setLatLng(Pt)})}}A(this._layer.getLatLngs());let M=Nr(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(v,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let z=v*180/Math.PI;z=z<0?z+360:z;let Q=z+this._startAngle;this._setAngle(Q),this._rotationLayer.pm._setAngle(Q),this._fireRotation(this._rotationLayer,z,M),this._fireRotation(this._map,z,M),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let a=Nr(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Nr(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,a),this._fireRotationEnd(this._map,s,a),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,a,h,d,v){let k=ke(v,h);return this._matrix=d.clone().rotate(s,k).flip(),pe(a,this._matrix,v)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),a=s.getCenter();return s.removeFrom(this._layer._map),a},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(ms(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Nr(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let a=this.getAngle(),h=this._layer.getLatLngs(),d=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(d,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(d,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let v=this.getAngle()-a;v=v<0?v+360:v,this._startAngle=a,this._fireRotation(this._layer,v,h,this._layer),this._fireRotation(this._map||this._layer._map,v,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let a=s-this.getAngle();this.rotateLayer(a)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},mt=pt,tt=L.Class.extend({includes:[re,Eo,mt,ko],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,a){let h=a.target,d={layer:this._layer,marker:h,event:a},v="";return s==="move"?v="moveVertexValidation":s==="add"?v="addVertexValidation":s==="remove"&&(v="removeVertexValidation"),this.options[v]&&typeof this.options[v]=="function"&&!this.options[v](d)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),xt=tt;xt.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(d=>this._initLayer(d));let a=d=>{if(d.layer._pmTempLayer)return;this._layers=this.getLayers();let v=this._layers.filter(k=>!k.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in k.pm._parentLayerGroup));v.forEach(k=>{this._initLayer(k)}),v.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(a,100,this),this),this._layerGroup.on("layerremove",d=>{this._removeLayerFromGroup(d.target)},this);let h=d=>{d.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.enable(s,a)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(a=>{a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1&&(s.push(a._leaflet_id),a.pm.disable(s)):a.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(a=>a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1?(s.push(a._leaflet_id),a.pm.enabled(s)):!1:a.pm.enabled())},toggleEdit(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.toggleEdit(s,a)):h.pm.toggleEdit(s)})},_initLayer(s){let a=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[a]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let a=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[a]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(a=>!!a._map))==null?void 0:s._map)||null},getLayers(s=!1,a=!0,h=!0,d=[]){let v=[];return s?this._layerGroup.getLayers().forEach(k=>{v.push(k),k instanceof L.LayerGroup&&d.indexOf(k._leaflet_id)===-1&&(d.push(k._leaflet_id),v=v.concat(k.pm.getLayers(!0,!0,!0,d)))}):v=this._layerGroup.getLayers(),h&&(v=v.filter(k=>!(k instanceof L.LayerGroup))),a&&(v=v.filter(k=>!!k.pm),v=v.filter(k=>!k._pmTempLayer),v=v.filter(k=>!L.PM.optIn&&!k.options.pmIgnore||L.PM.optIn&&k.options.pmIgnore===!1)),v},setOptions(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.setOptions(s,a)):h.pm.setOptions(s))})}}),xt.Marker=xt.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let a=s.target;a.remove(),this._fireRemove(a),this._fireRemove(this._map,a)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var bt=m(br()),Ze={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((a,h,d)=>d.indexOf(a)===h)},_removeFromCache(s){let a=this.markerCache.indexOf(s);a>-1&&this.markerCache.splice(a,1)},renderLimits(s){this.markerCache.forEach(a=>{s.includes(a)?this._markerGroup.addLayer(a):this._markerGroup.removeLayer(a)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let a=[...this._filterClosestMarkers(s)];this.renderLimits(a)},_filterClosestMarkers(s){let a=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?a:(a.sort((d,v)=>{let k=d._latlng.distanceTo(s),A=v._latlng.distanceTo(s);return k-A}),a.filter((d,v)=>h>-1?v<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},Xe=Ze;xt.Line=xt.extend({includes:[Xe],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,a=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=d=>{if(Array.isArray(d[0]))return d.map(h,this);let v=d.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&d.map((k,A)=>{let M=this.isPolygon()?(A+1)%d.length:A+1;return this._createMiddleMarker(v[A],v[M])}),v};this._markers=h(a),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this.options.rotate?(a.on("dragstart",this._onRotateStart,this),a.on("drag",this._onRotate,this),a.on("dragend",this._onRotateEnd,this)):(a.on("click",this._onVertexClick,this),a.on("dragstart",this._onMarkerDragStart,this),a.on("move",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||a.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(a),a},_createMiddleMarker(s,a){if(!s||!a)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),a.getLatLng()),d=this._createMarker(h),v=L.divIcon({className:"marker-icon marker-icon-middle"});return d.setIcon(v),d.leftM=s,d.rightM=a,s._middleMarkerNext=d,a._middleMarkerPrev=d,d.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),d.on("movestart",this._onMiddleMarkerMoveStart,this),d},_onMiddleMarkerClick(s){let a=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMoveStart(s){let a=s.target;if(a.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){a.on("move",this._onMiddleMarkerMovePrevent,this);return}a._dragging=!0,this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMovePrevent(s){let a=s.target;this._vertexValidationDrag(a)},_onMiddleMarkerMoveEnd(s){let a=s.target;if(a.off("move",this._onMiddleMarkerMovePrevent,this),a.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(a))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),setTimeout(()=>{delete a._dragging},100)},_addMarker(s,a,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let d=s.getLatLng(),v=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:k,index:A,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),z=k.length>1?(0,bt.default)(v,M):v,Q=k.length>1?(0,bt.default)(this._markers,M):this._markers;z.splice(A+1,0,d),Q.splice(A+1,0,s),this._layer.setLatLngs(v),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(a,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,d),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Bn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let a=this._layer,h,d;if(this.options.allowSelfIntersection?h=!1:(d=Bn(this._layer.toGeoJSON(15)),h=d.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(a.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(d)}else a.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,a){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,a):h._icon&&(a&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let a=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Nr(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:d,index:v,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!d)return;let A=d.length>1?(0,bt.default)(h,k):h,M=d.length>1?(0,bt.default)(this._markers,k):this._markers,z=k[k.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!z&&(A.length<=2||this.isPolygon()&&A.length<=3)){this._flashLayer();return}A.splice(v,1),this._layer.setLatLngs(h),this.isPolygon()&&A.length<=2&&A.splice(0,A.length);let Q=!1;if(A.length<=1&&(A.splice(0,A.length),k.length>1&&d.length>1&&(h=Po(h)),this._layer.setLatLngs(h),this._initMarkers(),Q=!0),Qi(h)||this._layer.remove(),h=Po(h),this._layer.setLatLngs(h),this._markers=Po(this._markers),!Q&&(M=d.length>1?(0,bt.default)(this._markers,k):this._markers,a._middleMarkerPrev&&(this._markerGroup.removeLayer(a._middleMarkerPrev),this._removeFromCache(a._middleMarkerPrev)),a._middleMarkerNext&&(this._markerGroup.removeLayer(a._middleMarkerNext),this._removeFromCache(a._middleMarkerNext)),this._markerGroup.removeLayer(a),this._removeFromCache(a),M)){let Ne,Ee;if(this.isPolygon()?(Ne=(v+1)%M.length,Ee=(v+(M.length-1))%M.length):(Ee=v-1<0?void 0:v-1,Ne=v+1>=M.length?void 0:v+1),Ne!==Ee){let Ye=M[Ee],ht=M[Ne];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Ye,ht)}M.splice(v,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(a,d),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let a=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:d,index:v,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(d.length>1?(0,bt.default)(a,k):a).splice(v,1,h),this._layer.setLatLngs(a)},_getNeighborMarkers(s){let{indexPath:a,index:h,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),v=a.length>1?(0,bt.default)(this._markers,d):this._markers,k=(h+1)%v.length,A=(h+(v.length-1))%v.length,M=v[A],z=v[k];return{prevMarker:M,nextMarker:z}},_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),d=L.polyline([a.getLatLng(),s.getLatLng()]),v=L.polyline([s.getLatLng(),h.getLatLng()]),k=nr(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,A=nr(this._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?A+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(k+=1),!(k<=2&&A<=2)},_onMarkerDragStart(s){let a=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Nr(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(a):this._markerAllowedToDrag=null},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a))return;let{indexPath:h,index:d,parentPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(a);let k=h.length>1?(0,bt.default)(this._markers,v):this._markers,A=(d+1)%k.length,M=(d+(k.length-1))%k.length,z=a.getLatLng(),Q=k[M].getLatLng(),Ne=k[A].getLatLng();if(a._middleMarkerNext){let Ee=L.PM.Utils.calcMiddleLatLng(this._map,z,Ne);a._middleMarkerNext.setLatLng(Ee)}if(a._middleMarkerPrev){let Ee=L.PM.Utils.calcMiddleLatLng(this._map,z,Q);a._middleMarkerPrev.setLatLng(Ee)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),d=!this.options.allowSelfIntersection&&this.hasSelfIntersection();d&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(d=!1);let v=!this.options.allowSelfIntersection&&d;if(this._fireMarkerDragEnd(s,h,v),v){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let a=s.target;if(a._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireVertexClick(s,h)}}),xt.Polygon=xt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),d=L.polyline([a.getLatLng(),s.getLatLng()]),v=L.polyline([s.getLatLng(),h.getLatLng()]),k=nr(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,A=nr(this._layer.toGeoJSON(15),v.toGeoJSON(15)).features.length;return!(k<=2&&A<=2)}}),xt.Rectangle=xt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,a=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=a.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,d)=>{let v=this._cornerMarkers.find(k=>k._index===d);v&&v.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,a){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=a,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let a=s.target,h=this._cornerMarkers;a._oppositeCornerLatLng=h.find(v=>v._index===(a._index+2)%4).getLatLng(),a._snapped=!1;let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,d)},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a)||a._index===void 0)return;this._adjustRectangleForMarkerMove(a);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;this._cornerMarkers.forEach(d=>{delete d._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let a=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(a),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let a=this._layer.getLatLngs()[0];if(a&&a.length!==4&&a.length>0)a.forEach((h,d)=>{this._cornerMarkers[d].setLatLng(h)}),this._cornerMarkers.slice(a.length).forEach(h=>{h.setLatLng(a[0])});else if(!a||!a.length)console.error("The layer has no LatLngs");else{let h=a.findIndex(d=>s.getLatLng().equals(d));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(a[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(a[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(a[(h+3)%4])):this._cornerMarkers.forEach(d=>{d.setLatLng(a[d._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(ms(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),xt.CircleMarker=xt.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let a=this._layer.getLatLng(),h=this._layer._radius,d=this._getLatLngOnCircle(a,h);this._centerMarker=this._createCenterMarker(a),this._outerMarker=this._createOuterMarker(d),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,a){let h=this._map.project(s),d=L.point(h.x+a,h.y);return this._map.unproject(d)},_createHintLine(s,a){let h=s.getLatLng(),d=a.getLatLng();this._hintline=L.polyline([h,d],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let a=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(a._icon,"leaflet-pm-draggable"),a.on("move",this._moveCircle,this)):a.dragging.disable(),a},_createOuterMarker(s){let a=this._createMarker(s);return a.on("drag",this._resizeCircle,this),a},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=s,a._pmTempLayer=!0,a.on("dragstart",this._onMarkerDragStart,this),a.on("drag",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),a.on("click",this._onVertexClick,this),this._helperLayers.addLayer(a),a},_moveCircle(s){if(s.target._cancelDragEventChain)return;let a=this._centerMarker.getLatLng();this._layer.setLatLng(a);let h=this._layer._radius,d=this._getLatLngOnCircle(a,h);this._outerMarker._latlng=d,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),a=this._layer._radius,h=this._getLatLngOnCircle(s,a);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,a])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let a=s.target;a instanceof L.Marker&&!this._vertexValidationDrag(a)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let a=s.target;this._vertexValidationDragEnd(a)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let a=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(a);let d=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?a=Ko(this._map,s,a,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(a=Ko(this._map,s,a,this._getMaxDistanceInMeter(s))),a},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),xt.Circle=xt.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,a){return this._map.distance(s,a)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),xt.ImageOverlay=xt.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),a=s.getNorthWest(),h=s.getNorthEast(),d=s.getSouthEast(),v=s.getSouthWest();return[a,h,d,v]}}),xt.Text=xt.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,a=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${a}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let a=this._hasFocus;this._hasFocus=s.type==="focus",!a!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let a=this.options.className.split(" ");this.textArea.classList.add(...a)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var Ct=function(s,a,h,d,v,k){this._matrix=[s,a,h,d,v,k]};Ct.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Ct.prototype={transform(s){return this._transform(s.clone())},_transform(s){let a=this._matrix,{x:h,y:d}=s;return s.x=a[0]*h+a[1]*d+a[4],s.y=a[2]*h+a[3]*d+a[5],s},untransform(s){let a=this._matrix;return new L.Point((s.x/a[0]-a[4])/a[0],(s.y/a[2]-a[5])/a[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let a,h;return typeof s=="number"?(a=s,h=s):(a=s.x,h=s.y),this._add(1,0,0,1,a,h)},scale(s,a){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,d;return a=a||L.point(0,0),typeof s=="number"?(h=s,d=s):(h=s.x,d=s.y),this._add(h,0,0,d,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},rotate(s,a){let h=Math.cos(s),d=Math.sin(s);return a=a||new L.Point(0,0),this._add(h,d,-d,h,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,a,h,d,v,k){let A=[[],[],[]],M=this._matrix,z=[[M[0],M[2],M[4]],[M[1],M[3],M[5]],[0,0,1]],Q=[[s,h,v],[a,d,k],[0,0,1]],Ne;s&&s instanceof L.PM.Matrix&&(M=s._matrix,Q=[[M[0],M[2],M[4]],[M[1],M[3],M[5]],[0,0,1]]);for(let Ee=0;Ee<3;Ee+=1)for(let Ye=0;Ye<3;Ye+=1){Ne=0;for(let ht=0;ht<3;ht+=1)Ne+=z[Ee][ht]*Q[ht][Ye];A[Ee][Ye]=Ne}return this._matrix=[A[0][0],A[1][0],A[0][1],A[1][1],A[0][2],A[1][2]],this}};var Mt=Ct,St={calcMiddleLatLng(s,a,h){let d=s.project(a),v=s.project(h);return s.unproject(d._add(v)._divideBy(2))},findLayers(s){let a=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&a.push(h)}),a=a.filter(h=>!!h.pm),a=a.filter(h=>!h._pmTempLayer),a=a.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),a},circleToPolygon(s,a=60,h=!0){let d=s.getLatLng(),v=s.getRadius(),k=ur(d,v,a,0,h),A=[];for(let M=0;M<k.length;M+=1){let z=[k[M].lat,k[M].lng];A.push(z)}return L.polygon(A,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,a,h,d=!1){s.fire(a,h,d);let{groups:v}=this.getAllParentGroups(s);v.forEach(k=>{k.fire(a,h,d)})},getAllParentGroups(s){let a=[],h=[],d=v=>{for(let k in v._eventParents)if(a.indexOf(k)===-1){a.push(k);let A=v._eventParents[k];h.push(A),d(A)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(d(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:a},{groupIds:a,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ur,getTranslation:sn,findDeepCoordIndex(s,a,h=!0){let d,v=A=>(M,z)=>{let Q=A.concat(z);if(h){if(M.lat&&M.lat===a.lat&&M.lng===a.lng)return d=Q,!0}else if(M.lat&&L.latLng(M).equals(a))return d=Q,!0;return Array.isArray(M)&&M.some(v(Q))};s.some(v([]));let k={};return d&&(k={indexPath:d,index:d[d.length-1],parentPath:d.slice(0,d.length-1)}),k},findDeepMarkerIndex(s,a){let h,d=k=>(A,M)=>{let z=k.concat(M);return A._leaflet_id===a._leaflet_id?(h=z,!0):Array.isArray(A)&&A.some(d(z))};s.some(d([]));let v={};return h&&(v={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),v},_getIndexFromSegment(s,a){if(a&&a.length===2){let h=this.findDeepCoordIndex(s,a[0]),d=this.findDeepCoordIndex(s,a[1]),v=Math.max(h.index,d.index);return(h.index===0||d.index===0)&&v!==1&&(v+=1),{indexA:h,indexB:d,newIndex:v,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,a,h,d){let v=ke(d,s),k=ke(d,a),A=h*Math.PI/180,M=Math.cos(A),z=Math.sin(A),Q=(k.x-v.x)*M+(k.y-v.y)*z,Ne=(k.y-v.y)*M-(k.x-v.x)*z,Ee=Q*M+v.x,Ye=Q*z+v.y,ht=-Ne*z+v.x,Pt=Ne*M+v.y,Ot=Ge(d,v),Rt=Ge(d,{x:Ee,y:Ye}),fn=Ge(d,k),Te=Ge(d,{x:ht,y:Pt});return[Ot,Rt,fn,Te]},pxRadiusToMeterRadius(s,a,h){let d=a.project(h),v=L.point(d.x+s,d.y);return a.distance(a.unproject(v),h)}},Zt=St;L.PM=L.PM||{version:wo.version,Map:So,Toolbar:La,Draw:mi,Edit:xt,Utils:Zt,Matrix:Mt,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(a);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(d);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(v);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(k);function A(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(A);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(M);function z(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(z)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(a=>{this.reInitLayer(a)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let a=this._map.mouseEventToLayerPoint(s),h,d;for(let v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(d=h);d&&(L.DomEvent.fakeStop(s),this._fireEvent([d],s))}}),L.PM.initialize()})();class Al extends Gt.Polygon{constructor(n,r,o=0,l=180,c={}){super([[]],{...c,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});Xt(this,"center");Xt(this,"radius");Xt(this,"startAngle");Xt(this,"stopAngle");Xt(this,"numPoints");Xt(this,"properties");Xt(this,"pm");Xt(this,"getRadius",()=>this.radius);Xt(this,"getStartAngle",()=>this.startAngle);Xt(this,"getStopAngle",()=>this.stopAngle);this.center=n,this.radius=r,this.startAngle=this.normalizeAngle(o),this.stopAngle=this.normalizeAngle(l),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...c,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",()=>{var p;this.pm&&(this.pm._layers=[],this.pm._markers=[],(p=this.pm._markerGroup)==null||p.clearLayers())}),this.on("pm:vertexadded",()=>{var p;this.pm&&((p=this.pm._markerGroup)==null||p.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))})}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],r=(this.stopAngle-this.startAngle+360)%360;n.push(this.center);for(let o=0;o<=this.numPoints;o++){const c=(this.startAngle+r*o/this.numPoints)*Math.PI/180,p=this.radius*Math.cos(c),y=this.radius*Math.sin(c)/111319.9,b=p/(111319.9*Math.cos(this.center.lat*Math.PI/180)),w=Gt.latLng(this.center.lat+y,this.center.lng+b);n.push(w)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this)}setAngles(n,r){const o=this.normalizeAngle(n),l=this.normalizeAngle(r),c=this.getOpeningAngle();let p=(l-o+360)%360;const m=45;return Math.abs(p-c)>m&&(p>c?p=c+m:p=c-m),p=Math.max(0,Math.min(360,p)),this.startAngle=o,this.stopAngle=(o+p)%360,this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<0||n>360?this:(this.stopAngle=this.normalizeAngle(this.startAngle+n),this.updateGeometry(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this)}getCenter(){return this.center}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&this.setLatLngs([n])}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle}}}}var Cs=63710088e-1,sw={centimeters:Cs*100,centimetres:Cs*100,degrees:Cs/111325,feet:Cs*3.28084,inches:Cs*39.37,kilometers:Cs/1e3,kilometres:Cs/1e3,meters:Cs,metres:Cs,miles:Cs/1609.344,millimeters:Cs*1e3,millimetres:Cs*1e3,nauticalmiles:Cs/1852,radians:1,yards:Cs*1.0936};function ih(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function r0(e,t,n){n===void 0&&(n={});for(var r=0,o=e;r<o.length;r++){var l=o[r];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var c=0;c<l[l.length-1].length;c++)if(l[l.length-1][c]!==l[0][c])throw new Error("First and last Position are not equivalent.")}var p={type:"Polygon",coordinates:e};return ih(p,t,n)}function Uf(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:e};return ih(r,t,n)}function ow(e,t){t===void 0&&(t="kilometers");var n=sw[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Pc(e){var t=e%360;return t*Math.PI/180}function zg(e,t,n){if(e!==null)for(var r,o,l,c,p,m,y,b=0,w=0,E,C=e.type,R=C==="FeatureCollection",O=C==="Feature",q=R?e.features.length:1,F=0;F<q;F++){y=R?e.features[F].geometry:O?e.geometry:e,E=y?y.type==="GeometryCollection":!1,p=E?y.geometries.length:1;for(var G=0;G<p;G++){var X=0,Ce=0;if(c=E?y.geometries[G]:y,c!==null){m=c.coordinates;var Pe=c.type;switch(b=0,Pe){case null:break;case"Point":if(t(m,w,F,X,Ce)===!1)return!1;w++,X++;break;case"LineString":case"MultiPoint":for(r=0;r<m.length;r++){if(t(m[r],w,F,X,Ce)===!1)return!1;w++,Pe==="MultiPoint"&&X++}Pe==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(r=0;r<m.length;r++){for(o=0;o<m[r].length-b;o++){if(t(m[r][o],w,F,X,Ce)===!1)return!1;w++}Pe==="MultiLineString"&&X++,Pe==="Polygon"&&Ce++}Pe==="Polygon"&&X++;break;case"MultiPolygon":for(r=0;r<m.length;r++){for(Ce=0,o=0;o<m[r].length;o++){for(l=0;l<m[r][o].length-b;l++){if(t(m[r][o][l],w,F,X,Ce)===!1)return!1;w++}Ce++}X++}break;case"GeometryCollection":for(r=0;r<c.geometries.length;r++)if(zg(c.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ug(e,t){var n,r,o,l,c,p,m,y,b,w,E=0,C=e.type==="FeatureCollection",R=e.type==="Feature",O=C?e.features.length:1;for(n=0;n<O;n++){for(p=C?e.features[n].geometry:R?e.geometry:e,y=C?e.features[n].properties:R?e.properties:{},b=C?e.features[n].bbox:R?e.bbox:void 0,w=C?e.features[n].id:R?e.id:void 0,m=p?p.type==="GeometryCollection":!1,c=m?p.geometries.length:1,o=0;o<c;o++){if(l=m?p.geometries[o]:p,l===null){if(t(null,E,y,b,w)===!1)return!1;continue}switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(l,E,y,b,w)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<l.geometries.length;r++)if(t(l.geometries[r],E,y,b,w)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}E++}}function aw(e,t,n){var r=n;return Ug(e,function(o,l,c,p,m){r=t(r,o,l,c,p,m)}),r}function lw(e,t){Ug(e,function(n,r,o,l,c){var p=n===null?null:n.type;switch(p){case null:case"Point":case"LineString":case"Polygon":return t(ih(n,o,{bbox:l,id:c}),r,0)===!1?!1:void 0}var m;switch(p){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var y=0;y<n.coordinates.length;y++){var b=n.coordinates[y],w={type:m,coordinates:b};if(t(ih(w,o),r,y)===!1)return!1}})}function uw(e,t){lw(e,function(n,r,o){var l=0;if(n.geometry){var c=n.geometry.type;if(!(c==="Point"||c==="MultiPoint")){var p,m=0,y=0,b=0;if(zg(n,function(w,E,C,R,O){if(p===void 0||r>m||R>y||O>b){p=w,m=r,y=R,b=O,l=0;return}var q=Uf([p,w],n.properties);if(t(q,r,o,O,l)===!1)return!1;l++,p=w})===!1)return!1}}})}function cw(e,t,n){var r=n,o=!1;return uw(e,function(l,c,p,m,y){o===!1&&n===void 0?r=l:r=t(r,l,c,p,m,y),o=!0}),r}function s0(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qf(e,t,n){n===void 0&&(n={});var r=s0(e),o=s0(t),l=Pc(o[1]-r[1]),c=Pc(o[0]-r[0]),p=Pc(r[1]),m=Pc(o[1]),y=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(p)*Math.cos(m);return ow(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),n.units)}var o0=6378137;function a0(e){return aw(e,function(t,n){return t+hw(n)},0)}function hw(e){var t=0,n;switch(e.type){case"Polygon":return l0(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=l0(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function l0(e){var t=0;if(e&&e.length>0){t+=Math.abs(u0(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(u0(e[n]))}return t}function u0(e){var t,n,r,o,l,c,p,m=0,y=e.length;if(y>2){for(p=0;p<y;p++)p===y-2?(o=y-2,l=y-1,c=0):p===y-1?(o=y-1,l=0,c=1):(o=p,l=p+1,c=p+2),t=e[o],n=e[l],r=e[c],m+=(lf(r[0])-lf(t[0]))*Math.sin(lf(n[1]));m=m*o0*o0/2}return m}function lf(e){return e*Math.PI/180}function c0(e,t){return t===void 0&&(t={}),cw(e,function(n,r){var o=r.geometry.coordinates;return n+qf(o[0],o[1],t)},0)}const rh=(e,t)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${t})`;const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return`rgba(${n}, ${r}, ${o}, ${t})`},h0=(e,t)=>{e.style.fontSize=t.fontSize,e.style.color=t.color,e.style.backgroundColor=rh(t.backgroundColor,t.backgroundOpacity),t.hasBorder?e.style.border=`${t.borderWidth} solid ${rh(t.borderColor,t.borderOpacity)}`:e.style.border="none",e.style.padding=t.padding,e.style.borderRadius=t.borderRadius},ks=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Gt.DomUtil.create("div","drawing-help-message");return n.innerHTML=e,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function f0(e,t,n){const r=156543.03392*Math.cos(t*Math.PI/180)/Math.pow(2,n);return e/r}const Ai=(e,t="m",n="")=>{let r,o;return t==="m²"?e>=1e4?(r=(e/1e4).toFixed(2),o="ha"):(r=e.toFixed(2),o="m²"):t==="m"?e>=1e3?(r=(e/1e3).toFixed(2),o="km"):(r=e.toFixed(2),o="m"):(r=e.toFixed(2),o=t),n?`${n}: ${r} ${o}`:`${r} ${o}`},d0=e=>`${((e%360+360)%360).toFixed(1)}°`,fw=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1});function dw(){const e=It(null),t=It(null),n=It(null),r=It(null),o=It(""),l=It(null),c=It(!1),p=(I,te="Double-cliquez pour éditer")=>{const Z={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ee=(de,Se)=>{var ne;const Ae=((ne=e.value)==null?void 0:ne.getZoom())||14,Ke=I.lat,rt=f0(Se.physicalSize,Ke,Ae);return`<div class="text-container" style="width:${rt}px;height:${rt}px;transform:rotate(${Se.rotation}deg)">
        <div class="text-annotation" style="font-size:${rt*.2}px;color:${Se.color};background-color:${rh(Se.backgroundColor,Se.backgroundOpacity)};border:${Se.hasBorder?Se.borderWidth+" solid "+rh(Se.borderColor,Se.borderOpacity):"none"};padding:${Se.padding};border-radius:${Se.borderRadius}">${de}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},ve=()=>{if(!e.value)return;const de=j.getIcon(),Se={html:ee(j.properties.text,j.properties.style),className:de.options.className};j.setIcon(Gt.divIcon(Se))},V=Gt.divIcon({html:ee(te,Z),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),j=Gt.marker(I,{icon:V,draggable:!1,pmIgnore:!0});j.properties={type:"text",text:te,style:{...Z}},e.value&&(e.value.on("zoomend",ve),j.on("remove",()=>{var de;(de=e.value)==null||de.off("zoomend",ve)})),ve();let Y=!1,Ie=!1,D=0,K=0;const he=de=>{if(!e.value)return;const Se=de.target;if(Se.classList.contains("rotate")){Y=!0;const Ae=j.getLatLng(),Ke=e.value.mouseEventToLatLng(de);D=Math.atan2(Ke.lat-Ae.lat,Ke.lng-Ae.lng)*180/Math.PI,K=j.properties.style.rotation||0}else Se.classList.contains("move")&&(Ie=!0);document.addEventListener("mousemove",_e),document.addEventListener("mouseup",Le)},_e=de=>{if(!(!Ie||!e.value)){if(Y){const Se=j.getLatLng(),Ae=e.value.mouseEventToLatLng(de),Ke=Math.atan2(Ae.lat-Se.lat,Ae.lng-Se.lng)*180/Math.PI,rt=(K+(Ke-D))%360;j.properties.style.rotation=rt;const ne=j.getIcon(),ce={html:ee(j.properties.text,j.properties.style),className:ne.options.className};j.setIcon(Gt.divIcon(ce))}else if(Ie){const Se=fw(de),Ae=e.value.mouseEventToLatLng(Se);j.setLatLng(Ae)}}},Le=()=>{Y=!1,Ie=!1,document.removeEventListener("mousemove",_e),document.removeEventListener("mouseup",Le)};return j.on("add",()=>{const de=j.getElement();de&&de.querySelectorAll(".control-button").forEach(Ae=>{Ae.addEventListener("mousedown",he)})}),j.on("remove",()=>{const de=j.getElement();de&&de.querySelectorAll(".control-button").forEach(Ae=>{Ae.removeEventListener("mousedown",he)})}),j.on("dblclick",de=>{var ce;Gt.DomEvent.stopPropagation(de);const Se=(ce=j.getElement())==null?void 0:ce.querySelector(".text-annotation");if(!Se)return;Se.contentEditable="true",Se.focus(),Se.classList.add("editing");const Ae=window.getSelection(),Ke=document.createRange();Ke.selectNodeContents(Se),Ae==null||Ae.removeAllRanges(),Ae==null||Ae.addRange(Ke);const rt=()=>{Se.contentEditable="false",Se.classList.remove("editing");const Re=Se.innerText.trim();if(Re){j.properties.text=Re;const De=j.getIcon(),le={html:ee(Re,j.properties.style),className:De.options.className};j.setIcon(Gt.divIcon(le))}Se.removeEventListener("blur",rt),Se.removeEventListener("keydown",ne)},ne=Re=>{Re.key==="Enter"&&!Re.shiftKey&&(Re.preventDefault(),rt())};Se.addEventListener("blur",rt),Se.addEventListener("keydown",ne)}),j},m=(I,te)=>{const Z=Gt.DomUtil.create("div","measure-tooltip");if(Z.innerHTML=te,Z.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(Z),e.value){const ee=e.value.latLngToContainerPoint(I);Z.style.left=`${ee.x+10}px`,Z.style.top=`${ee.y-25}px`}return Z},y=(I,te,Z)=>{I.on("mouseover",()=>{const ee=m(I.getLatLng(),Z());I.measureDiv=ee}),I.on("mousemove",ee=>{if(I.measureDiv&&e.value){const ve=e.value.latLngToContainerPoint(ee.latlng);I.measureDiv.style.left=`${ve.x+10}px`,I.measureDiv.style.top=`${ve.y-25}px`}}),I.on("mouseout",()=>{I.measureDiv&&(I.measureDiv.remove(),I.measureDiv=void 0)})};let b=[];const w=()=>{b.forEach(I=>{I&&I.remove&&("measureDiv"in I&&I.measureDiv&&(I.measureDiv.remove(),I.measureDiv=void 0),n.value&&n.value.removeLayer(I),I.remove())}),b=[],document.querySelectorAll(".measure-tooltip").forEach(I=>{I.remove()})},E=(I,te="#2563EB")=>{const Z=Gt.circleMarker(I,{radius:6,color:te,fillColor:te,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(Z),Z},C=(I,te)=>{var ee,ve,V,j,Y,Ie;console.log("=== CALCULATING SHAPE PROPERTIES START ==="),console.log("Input layer:",{type:te,instanceof:{Circle:I instanceof Gt.Circle,Rectangle:I instanceof Gt.Rectangle,Polygon:I instanceof Gt.Polygon,Polyline:I instanceof Gt.Polyline,CircleArc:I instanceof Al},options:I.options});const Z={type:te,style:I.options||{}};try{if(I instanceof Gt.Circle){const D=I.getRadius(),K=I.getLatLng();Z.radius=D,Z.diameter=D*2,Z.area=Math.PI*Math.pow(D,2),Z.perimeter=2*Math.PI*D,Z.center=K,Z.surfaceInterieure=Z.area,Z.surfaceExterieure=Z.area,console.log("Circle properties calculated:",Z)}else if(I instanceof Al){const D=I.getRadius(),K=I.getCenter(),he=I.getStartAngle(),_e=I.getStopAngle(),Le=I.getOpeningAngle();Z.radius=D,Z.diameter=D*2,Z.area=Math.PI*Math.pow(D,2)*Le/360,Z.arcLength=2*Math.PI*D*Le/360,Z.perimeter=Z.arcLength+2*D,Z.center=K,Z.startAngle=he,Z.stopAngle=_e,Z.openingAngle=Le,Z.surfaceInterieure=Z.area,Z.surfaceExterieure=Z.area,console.log("CircleArc properties calculated:",Z)}else if(I instanceof Gt.Rectangle){const D=I.getBounds(),K=D.getNorthEast(),he=D.getSouthWest(),_e=qf([he.lng,he.lat],[K.lng,he.lat],{units:"meters"}),Le=qf([he.lng,he.lat],[he.lng,K.lat],{units:"meters"});Z.width=_e,Z.height=Le,Z.area=_e*Le,Z.perimeter=2*(_e+Le),Z.surfaceInterieure=Z.area,Z.surfaceExterieure=Z.area,Z.dimensions={width:_e,height:Le},console.log("Rectangle properties calculated:",Z)}else if(I instanceof Gt.Polygon){const K=I.getLatLngs()[0].map(_e=>[_e.lng,_e.lat]);K.push(K[0]);const he=r0([K]);Z.area=a0(he),Z.perimeter=c0(Uf([...K]),{units:"meters"}),Z.surfaceInterieure=Z.area,Z.surfaceExterieure=Z.area,console.log("Polygon properties calculated:",Z)}else if(I instanceof Gt.Polyline&&!(I instanceof Gt.Polygon)){const K=I.getLatLngs().map(Le=>[Le.lng,Le.lat]),he=Uf(K);Z.length=c0(he,{units:"meters"});const _e=10;Z.surfaceInfluence=Z.length*_e,Z.dimensions={width:_e},console.log("Polyline properties calculated:",Z)}Z.style={...Z.style,color:((ee=I.options)==null?void 0:ee.color)||"#3388ff",weight:((ve=I.options)==null?void 0:ve.weight)||3,opacity:((V=I.options)==null?void 0:V.opacity)||1,fillColor:((j=I.options)==null?void 0:j.fillColor)||"#3388ff",fillOpacity:((Y=I.options)==null?void 0:Y.fillOpacity)||.2,dashArray:((Ie=I.options)==null?void 0:Ie.dashArray)||""}}catch(D){console.error("Error calculating shape properties:",D)}return console.log("=== CALCULATING SHAPE PROPERTIES END ==="),console.log("Final properties:",Z),Z},R=(I,te=2)=>{var j;if(!e.value){console.warn("Map is not available for text size update");return}const Z=e.value.getZoom(),ee=I.getLatLng().lat,ve=f0(te,ee,Z),V=(j=I.getElement())==null?void 0:j.querySelector(".text-annotation");V&&(I.properties.style.fontSize=`${ve}px`,I.properties.physicalWidth=te,I.properties.physicalHeight=te,h0(V,I.properties.style))},O=(I,te,Z)=>{const ee=Gt.map(I).setView(te,Z);e.value=ee,Gt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(ee);const ve=new Gt.FeatureGroup;return ve.addTo(ee),t.value=ve,n.value=Gt.featureGroup().addTo(ee),r.value=Gt.featureGroup().addTo(ee),ee.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:ve,snapLayers:[ve,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ee.on("pm:drawstart",V=>{c.value=!0,V.shape==="Circle"&&o.value==="Semicircle"&&(ee.getContainer().style.cursor="crosshair")}),ee.on("pm:drawend",()=>{c.value=!1,ee.getContainer().style.cursor="",l.value&&ks("Cliquez sur la forme pour afficher les points de contrôle")}),ee.on("pm:create",async V=>{var Ie,D,K;const j=V.layer;(Ie=t.value)==null||Ie.addLayer(j);let Y="unknown";if(j instanceof Gt.Circle?Y=o.value==="Semicircle"?"Semicircle":"Circle":j instanceof Gt.Rectangle?Y="Rectangle":j instanceof Gt.Polygon?Y="Polygon":j instanceof Gt.Polyline&&!(j instanceof Gt.Polygon)&&(Y="Line"),j.properties=C(j,Y),l.value=j,j.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:Y,isSelected:l.value===j}),(!l.value||l.value!==j)&&J(j)}),j.on("mouseout",()=>{var he;console.log("[mouseout] Sortie de la forme",{type:Y,isSelected:l.value===j}),(!l.value||l.value!==j)&&((he=r.value)==null||he.clearLayers())}),Y==="Semicircle"){const he=j.getLatLng(),_e=j.getRadius();(D=t.value)==null||D.removeLayer(j);const Le=new Al(he,_e);Le.properties=C(Le,"Semicircle"),(K=t.value)==null||K.addLayer(Le),l.value=Le,$(Le)}else j instanceof Gt.Circle?se(j):j instanceof Gt.Rectangle?ue(j):j instanceof Gt.Polygon?Je(j):j instanceof Gt.Polyline&&!(j instanceof Gt.Polygon)&&Be(j);ks("Cliquez sur la forme pour afficher les points de contrôle")}),ve.on("click",V=>{var Y,Ie,D,K;Gt.DomEvent.stopPropagation(V);const j=V.layer;console.log("[featureGroup click] Sélection de forme",{type:(Y=j.properties)==null?void 0:Y.type,previouslySelected:l.value===j}),(Ie=r.value)==null||Ie.clearLayers(),w(),(D=document.querySelector(".drawing-help-message"))==null||D.remove(),l.value=j,j instanceof Al||((K=j.properties)==null?void 0:K.type)==="Semicircle"?$(j):j instanceof Gt.Circle?se(j):j instanceof Gt.Rectangle?ue(j):j instanceof Gt.Polygon?Je(j):j instanceof Gt.Polyline&&!(j instanceof Gt.Polygon)&&Be(j)}),ee.on("pm:edit",V=>{var Y;console.log("[pm:edit] Début",{layer:V.layer,currentProperties:V.layer.properties});const j=V.layer;if(j){const Ie=((Y=j.properties)==null?void 0:Y.type)||"unknown";Pe(j,Ie),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:j.properties,selectedShape:l.value}),Ie==="Semicircle"?$(j):j instanceof Gt.Circle?se(j):j instanceof Gt.Rectangle?ue(j):j instanceof Gt.Polygon?Je(j):j instanceof Gt.Polyline&&Be(j)}}),ee.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(V=>V.remove()),ks("Déplacez la forme à l'endroit souhaité")}),ee.on("pm:dragend",V=>{var Y;console.log("[pm:dragend] Début",{layer:V.layer,currentProperties:V.layer.properties});const j=V.layer;if(j){const Ie=((Y=j.properties)==null?void 0:Y.type)||"unknown";Pe(j,Ie),console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:j.properties,selectedShape:l.value})}setTimeout(()=>{ks("Cliquez sur la forme pour afficher les points de contrôle")},100)}),ee.on("pm:remove",()=>{var V;(V=document.querySelector(".drawing-help-message"))==null||V.remove()}),ee.on("pm:select",V=>{var Y;const j=V.layer;document.querySelectorAll(".drawing-help-message").forEach(Ie=>Ie.remove()),j instanceof Al||((Y=j.properties)==null?void 0:Y.type)==="Semicircle"?ks(`Points de contrôle : <span style="color: #059669">●</span> Ajuster le rayon, <span style="color: #2563EB">●</span> et <span style="color: #DC2626">●</span> Modifier l'ouverture du demi-cercle`):ks("Utilisez les points de contrôle pour modifier la forme")}),ee.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(V=>V.remove())}),ee},q=()=>{if(!e.value||!t.value)return;const I=t.value.getBounds();I.isValid()&&e.value.fitBounds(I,{padding:[50,50],maxZoom:19})},F=I=>{if(e.value){console.log("=== SETTING DRAWING TOOL START ==="),console.log("Current tool:",o.value),console.log("New tool:",I),document.querySelectorAll(".drawing-help-message").forEach(te=>te.remove());try{console.log("Disabling all modes...");const te=e.value.pm;te.globalEditModeEnabled()&&te.disableGlobalEditMode(),te.globalDragModeEnabled()&&te.disableGlobalDragMode(),te.globalRemovalModeEnabled()&&te.disableGlobalRemovalMode(),te.disableDraw(),w()}catch(te){console.error("Error disabling modes:",te)}if(o.value=I,console.log("Tool set to:",o.value),!I){console.log("No tool selected, clearing control points"),w();return}setTimeout(()=>{var te,Z,ee,ve,V,j,Y;try{switch(console.log("Enabling tool:",I),I){case"Circle":ks("Cliquez et maintenez pour dessiner un cercle, relâchez pour terminer"),(te=e.value)==null||te.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":ks("Cliquez et maintenez pour dessiner un demi-cercle, relâchez pour terminer"),(Z=e.value)==null||Z.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":ks("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(ee=e.value)==null||ee.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ks("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ve=e.value)==null||ve.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ks("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(V=e.value)==null||V.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(ks("Cliquez pour ajouter du texte, double-cliquez pour éditer"),e.value){const Ie=D=>{if(!e.value||!t.value)return;const K=p(D.latlng);t.value.addLayer(K),l.value=K,e.value.off("click",Ie),F("")};e.value.on("click",Ie)}break;case"drag":ks("Cliquez et maintenez une forme pour la déplacer"),(j=e.value)==null||j.pm.enableGlobalDragMode();break;case"delete":ks("Cliquez sur une forme pour la supprimer"),(Y=e.value)==null||Y.pm.enableGlobalRemovalMode();break}console.log("Tool enabled successfully")}catch(Ie){console.error("Error enabling tool:",Ie)}},100),console.log("=== SETTING DRAWING TOOL END ===")}},G=I=>{var Z;if(!l.value)return;const te=l.value;if(te.properties=te.properties||{},te.properties.style=te.properties.style||{},te.properties.style={...te.properties.style,...I},te.properties.type==="text"){const ee=te.properties._textLayer,ve=(Z=ee==null?void 0:ee.getElement())==null?void 0:Z.querySelector(".text-annotation");ve&&h0(ve,te.properties.style);const V={color:I.borderColor||te.properties.style.borderColor,weight:parseInt(I.borderWidth||te.properties.style.borderWidth),opacity:I.borderOpacity??te.properties.style.borderOpacity};"setStyle"in te&&te.setStyle(V)}else{const ee={};I.fillColor&&(ee.fillColor=I.fillColor),I.fillOpacity!==void 0&&(ee.fillOpacity=I.fillOpacity),I.strokeColor&&(ee.color=I.strokeColor),I.strokeOpacity!==void 0&&(ee.opacity=I.strokeOpacity),I.strokeWidth!==void 0&&(ee.weight=I.strokeWidth),I.dashArray&&(ee.dashArray=I.dashArray),"setStyle"in te&&te.setStyle(ee)}},X=I=>{if(!l.value)return;const te=l.value;te.properties={...te.properties,...I},I.radius&&te instanceof Gt.Circle&&te.setRadius(I.radius)},Ce=I=>{console.log("[forceShapeUpdate] Début",{currentProperties:I.properties,selectedShapeRef:l.value}),l.value=null,ac(()=>{l.value=I,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:l.value,properties:l.value.properties})})},Pe=(I,te)=>{console.log("[updateLayerProperties] Début",{layer:I,shapeType:te,currentProperties:I.properties});const Z=C(I,te);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:Z}),I.properties={...Z},Ce(I),I.fire("properties:updated",{shape:I,properties:I.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:I.properties,selectedShape:l.value})},we=(I,te)=>Gt.latLng((I.lat+te.lat)/2,(I.lng+te.lng)/2),se=I=>{if(!e.value||!t.value)return;w();const te=I.getLatLng(),Z=I.getRadius(),ee=E(te,"#059669");b.push(ee);const ve=[];[0,45,90,135,180,225,270,315].forEach(V=>{const j=V*Math.PI/180,Y=Gt.latLng(te.lat+Z/111319.9*Math.sin(j),te.lng+Z/(111319.9*Math.cos(te.lat*Math.PI/180))*Math.cos(j)),Ie=E(Y,"#2563EB");ve.push(Ie),b.push(Ie),Ie.on("mousedown",D=>{if(!e.value)return;Gt.DomEvent.stopPropagation(D),e.value.dragging.disable();let K=!0;const he=Le=>{if(!K)return;console.log("[Circle Control Point] Début du mouvement",{currentRadius:I.getRadius(),currentProperties:I.properties});const de=te.distanceTo(Le.latlng);I.setRadius(de),ve.forEach((Se,Ae)=>{const Ke=Ae*45*Math.PI/180,rt=Gt.latLng(te.lat+de/111319.9*Math.sin(Ke),te.lng+de/(111319.9*Math.cos(te.lat*Math.PI/180))*Math.cos(Ke));Se.setLatLng(rt)}),Pe(I,"Circle"),l.value=I,console.log("[Circle Control Point] Après mise à jour",{newRadius:de,updatedProperties:I.properties,selectedShape:l.value})},_e=()=>{K=!1,e.value&&(e.value.off("mousemove",he),document.removeEventListener("mouseup",_e),e.value.dragging.enable())};e.value.on("mousemove",he),document.addEventListener("mouseup",_e)})}),l.value=I},ue=I=>{if(!e.value||!t.value)return;w();const te=I.getBounds(),Z=te.getCenter(),ee=[te.getNorthWest(),te.getNorthEast(),te.getSouthEast(),te.getSouthWest()],ve=E(Z,"#059669");b.push(ve),y(ve,I,()=>{const Y=I.getBounds(),Ie=Y.getNorthEast().distanceTo(Y.getNorthWest()),D=Y.getNorthWest().distanceTo(Y.getSouthWest()),K=Ie*D;return[Ai(Ie,"m","Largeur"),Ai(D,"m","Hauteur"),Ai(K,"m²","Surface")].join("<br>")});const V=[];ee.forEach(Y=>{const Ie=E(Y,"#DC2626");V.push(Ie),b.push(Ie),y(Ie,I,()=>{const D=I.getBounds(),K=D.getNorthEast().distanceTo(D.getNorthWest()),he=D.getNorthWest().distanceTo(D.getSouthWest());return[Ai(K,"m","Largeur"),Ai(he,"m","Hauteur")].join("<br>")})});const j=[];ee.forEach((Y,Ie)=>{const D=ee[(Ie+1)%4],K=we(Y,D),he=E(K,"#2563EB");j.push(he),b.push(he),y(he,I,()=>{const _e=I.getBounds(),Le=_e.getNorthEast().distanceTo(_e.getNorthWest()),de=_e.getNorthWest().distanceTo(_e.getSouthWest());return[Ai(Le,"m","Largeur"),Ai(de,"m","Hauteur")].join("<br>")})}),ve.on("mousedown",Y=>{if(!e.value)return;Gt.DomEvent.stopPropagation(Y),e.value.dragging.disable();let Ie=!0;const D=I.getBounds(),K=Y.latlng,he=Le=>{if(!Ie)return;const de=Le.latlng.lng-K.lng,Se=Le.latlng.lat-K.lat,Ae=Gt.latLngBounds(Gt.latLng(D.getSouth()+Se,D.getWest()+de),Gt.latLng(D.getNorth()+Se,D.getEast()+de));I.setBounds(Ae);const Ke=[Ae.getNorthWest(),Ae.getNorthEast(),Ae.getSouthEast(),Ae.getSouthWest()];ve.setLatLng(Ae.getCenter()),V.forEach((rt,ne)=>{rt.setLatLng(Ke[ne])}),j.forEach((rt,ne)=>{const ce=Ke[ne],Re=Ke[(ne+1)%4];rt.setLatLng(we(ce,Re))}),Pe(I,"Rectangle")},_e=()=>{Ie=!1,e.value&&(e.value.off("mousemove",he),document.removeEventListener("mouseup",_e),e.value.dragging.enable())};e.value.on("mousemove",he),document.addEventListener("mouseup",_e)}),V.forEach((Y,Ie)=>{Y.on("mousedown",D=>{if(!e.value)return;Gt.DomEvent.stopPropagation(D),e.value.dragging.disable();let K=!0;const he=Le=>{if(!K)return;const de=(Ie+2)%4,Se=ee[de],Ae=Gt.latLngBounds(Se,Le.latlng);I.setBounds(Ae);const Ke=[Ae.getNorthWest(),Ae.getNorthEast(),Ae.getSouthEast(),Ae.getSouthWest()];ve.setLatLng(Ae.getCenter()),V.forEach((rt,ne)=>{rt.setLatLng(Ke[ne])}),j.forEach((rt,ne)=>{const ce=Ke[ne],Re=Ke[(ne+1)%4];rt.setLatLng(we(ce,Re))}),Pe(I,"Rectangle")},_e=()=>{K=!1,e.value&&(e.value.off("mousemove",he),document.removeEventListener("mouseup",_e),e.value.dragging.enable())};e.value.on("mousemove",he),document.addEventListener("mouseup",_e)})})},Be=I=>{if(!e.value||!t.value)return;w();const te=I.getLatLngs();te.forEach((ee,ve)=>{const V=E(ee,"#059669");b.push(V),y(V,I,()=>{const j=te.reduce((Ie,D,K)=>K===0?0:Ie+D.distanceTo(te[K-1]),0);let Y=te.slice(0,ve+1).reduce((Ie,D,K)=>K===0?0:Ie+D.distanceTo(te[K-1]),0);return[Ai(Y,"m","Distance depuis le début"),Ai(j,"m","Longueur totale")].join("<br>")}),V.on("mousedown",j=>{if(!e.value)return;Gt.DomEvent.stopPropagation(j),e.value.dragging.disable();let Y=!0;const Ie=K=>{Y&&(te[ve]=K.latlng,I.setLatLngs(te),V.setLatLng(K.latlng),Z())},D=()=>{Y=!1,e.value&&(e.value.off("mousemove",Ie),document.removeEventListener("mouseup",D),e.value.dragging.enable(),Be(I))};e.value.on("mousemove",Ie),document.addEventListener("mouseup",D)})});const Z=()=>{b.slice(te.length).forEach(ee=>{t.value&&t.value.removeLayer(ee)}),b=b.slice(0,te.length);for(let ee=0;ee<te.length-1;ee++){const ve=we(te[ee],te[ee+1]),V=E(ve,"#2563EB");b.push(V),y(V,I,()=>{const j=te[ee].distanceTo(te[ee+1]),Y=te.reduce((D,K,he)=>he===0?0:D+K.distanceTo(te[he-1]),0),Ie=te.slice(0,ee+1).reduce((D,K,he)=>he===0?0:D+K.distanceTo(te[he-1]),0)+j/2;return[Ai(j,"m","Longueur du segment"),Ai(j/2,"m","Demi-segment"),Ai(Ie,"m","Distance depuis le début"),Ai(Y,"m","Longueur totale")].join("<br>")}),V.on("mousedown",j=>{if(!e.value)return;Gt.DomEvent.stopPropagation(j),e.value.dragging.disable();let Y=!0;const Ie=K=>{Y&&(te.splice(ee+1,0,K.latlng),I.setLatLngs(te),Be(I))},D=()=>{Y=!1,e.value&&(e.value.off("mousemove",Ie),e.value.dragging.enable())};e.value.on("mousemove",Ie),document.addEventListener("mouseup",D)})}};Z()},Je=I=>{if(!e.value||!t.value)return;w();const te=I.getLatLngs()[0],Z=te.map(Y=>[Y.lng,Y.lat]);Z.push(Z[0]);const ee=r0([Z]),ve=a0(ee),V=te.reduce((Y,Ie,D)=>{const K=te[(D+1)%te.length];return Y+Ie.distanceTo(K)},0);te.forEach((Y,Ie)=>{const D=E(Y,"#059669");b.push(D),y(D,I,()=>{const K=te[(Ie-1+te.length)%te.length],he=te[(Ie+1)%te.length],_e=Y.distanceTo(K),Le=Y.distanceTo(he);return[Ai(_e,"m","Distance au point précédent"),Ai(Le,"m","Distance au point suivant"),Ai(V,"m","Périmètre total"),Ai(ve,"m²","Surface")].join("<br>")}),D.on("mousedown",K=>{if(Gt.DomEvent.stopPropagation(K),!e.value)return;e.value.dragging.disable();let he=!0;const _e=de=>{he&&(Gt.DomEvent.stopPropagation(de),te[Ie]=de.latlng,I.setLatLngs([te]),D.setLatLng(de.latlng),j())},Le=()=>{he=!1,e.value&&(e.value.off("mousemove",_e),document.removeEventListener("mouseup",Le),e.value.dragging.enable())};e.value.on("mousemove",_e),document.addEventListener("mouseup",Le)})});const j=()=>{const Y=I.getLatLngs()[0];b.slice(Y.length).forEach(Ie=>{t.value&&t.value.removeLayer(Ie)}),b=b.slice(0,Y.length);for(let Ie=0;Ie<Y.length;Ie++){const D=Y[(Ie+1)%Y.length],K=we(Y[Ie],D),he=E(K,"#2563EB");b.push(he),y(he,I,()=>{const _e=Y[Ie].distanceTo(D);return[Ai(_e,"m","Longueur du segment"),Ai(V,"m","Périmètre total"),Ai(ve,"m²","Surface")].join("<br>")})}};j()},$=I=>{var D,K,he,_e,Le;if(!e.value||!t.value)return;w();const te=Gt.latLng(0,0),Z=(((D=I.getCenter)==null?void 0:D.call(I))||((K=I.getLatLng)==null?void 0:K.call(I)))??te,ee=((he=I.getRadius)==null?void 0:he.call(I))??0,ve=((_e=I.getStartAngle)==null?void 0:_e.call(I))??0,V=((Le=I.getStopAngle)==null?void 0:Le.call(I))??180,j=[ve,V];j.forEach((de,Se)=>{const Ae=de*Math.PI/180,Ke=Gt.latLng(Z.lat+ee/111319.9*Math.sin(Ae),Z.lng+ee/(111319.9*Math.cos(Z.lat*Math.PI/180))*Math.cos(Ae)),rt=E(Ke,"#DC2626");b.push(rt),y(rt,I,()=>`Angle: ${d0(de)}`),rt.on("mousedown",ne=>{if(!e.value)return;Gt.DomEvent.stopPropagation(ne),e.value.dragging.disable();let ce=!0;const Re=b.find(Ve=>Ve.options.color==="#2563EB");Re&&Re.setStyle({opacity:0,fillOpacity:0});const De=Ve=>{if(!ce||!e.value)return;const st=Math.atan2(Ve.latlng.lat-Z.lat,Ve.latlng.lng-Z.lng)*180/Math.PI,Qe=Gt.latLng(Z.lat+ee/111319.9*Math.sin(st*Math.PI/180),Z.lng+ee/(111319.9*Math.cos(Z.lat*Math.PI/180))*Math.cos(st*Math.PI/180));rt.setLatLng(Qe),Se===0?I.setAngles(st,I.getStopAngle()):I.setAngles(I.getStartAngle(),st);const ot=C(I,"Semicircle");I.properties={...ot},I.fire("properties:updated",{shape:I,properties:I.properties})},le=()=>{ce=!1,e.value&&(e.value.off("mousemove",De),document.removeEventListener("mouseup",le),e.value.dragging.enable(),$(I))};e.value.on("mousemove",De),document.addEventListener("mouseup",le)})});const Y=E(Z,"#059669");if(b.push(Y),y(Y,I,()=>{const de=Math.PI*ee*ee*I.getOpeningAngle()/360;return[Ai(ee,"m","Rayon"),Ai(de,"m²","Surface"),`Angle: ${d0(I.getOpeningAngle())}`].join("<br>")}),I.getOpeningAngle()>5){const Se=((ve+V)/2+360)%360*Math.PI/180,Ae=Gt.latLng(Z.lat+ee/111319.9*Math.sin(Se),Z.lng+ee/(111319.9*Math.cos(Z.lat*Math.PI/180))*Math.cos(Se)),Ke=E(Ae,"#2563EB");b.push(Ke),y(Ke,I,()=>Ai(ee,"m","Rayon")),Ke.on("mousedown",rt=>{if(!e.value)return;Gt.DomEvent.stopPropagation(rt),e.value.dragging.disable();let ne=!0;const ce=De=>{if(!ne)return;const le=Z.distanceTo(De.latlng);I.setRadius(le);const Ve=Math.atan2(De.latlng.lat-Z.lat,De.latlng.lng-Z.lng)*180/Math.PI,st=I.getOpeningAngle();if((Ve-ve+360)%360<=st){const ot=Gt.latLng(Z.lat+le/111319.9*Math.sin(Se),Z.lng+le/(111319.9*Math.cos(Z.lat*Math.PI/180))*Math.cos(Se));Ke.setLatLng(ot),Pe(I,"Semicircle"),j.forEach((Oe,xe)=>{const it=Oe*Math.PI/180,vt=Gt.latLng(Z.lat+le/111319.9*Math.sin(it),Z.lng+le/(111319.9*Math.cos(Z.lat*Math.PI/180))*Math.cos(it));b[xe].setLatLng(vt)})}},Re=()=>{ne=!1,e.value&&(e.value.off("mousemove",ce),document.removeEventListener("mouseup",Re),e.value.dragging.enable())};e.value.on("mousemove",ce),document.addEventListener("mouseup",Re)})}Y.on("mousedown",de=>{if(!e.value)return;Gt.DomEvent.stopPropagation(de),e.value.dragging.disable();let Se=!0;const Ae=rt=>{if(!Se)return;I.setCenter(rt.latlng),Y.setLatLng(rt.latlng);const ne=C(I,"Semicircle");I.properties={...ne},I.fire("properties:updated",{shape:I,properties:I.properties}),$(I)},Ke=()=>{Se=!1,e.value&&(e.value.off("mousemove",Ae),document.removeEventListener("mouseup",Ke),e.value.dragging.enable())};e.value.on("mousemove",Ae),document.addEventListener("mouseup",Ke)})},J=I=>{var te,Z,ee,ve,V,j;if(!(!e.value||!r.value)){if(console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:I.constructor.name,properties:I.properties}),r.value.clearLayers(),I instanceof Gt.Circle){const Y=I.getLatLng(),Ie=I.getRadius(),D=E(Y,"#059669");r.value.addLayer(D),[0,45,90,135,180,225,270,315].forEach(K=>{const he=K*Math.PI/180,_e=Gt.latLng(Y.lat+Ie/111319.9*Math.sin(he),Y.lng+Ie/(111319.9*Math.cos(Y.lat*Math.PI/180))*Math.cos(he)),Le=E(_e,"#2563EB");r.value.addLayer(Le)})}else if(I instanceof Gt.Rectangle){const Y=I.getBounds(),Ie=Y.getCenter(),D=[Y.getNorthWest(),Y.getNorthEast(),Y.getSouthEast(),Y.getSouthWest()],K=E(Ie,"#059669");r.value.addLayer(K),D.forEach(he=>{const _e=E(he,"#DC2626");r.value.addLayer(_e)}),D.forEach((he,_e)=>{const Le=D[(_e+1)%4],de=we(he,Le),Se=E(de,"#2563EB");r.value.addLayer(Se)})}else if(I instanceof Al||((te=I.properties)==null?void 0:te.type)==="Semicircle"){const Y=Gt.latLng(0,0),Ie=(((Z=I.getCenter)==null?void 0:Z.call(I))||((ee=I.getLatLng)==null?void 0:ee.call(I)))??Y,D=((ve=I.getRadius)==null?void 0:ve.call(I))??0,K=((V=I.getStartAngle)==null?void 0:V.call(I))??0,he=((j=I.getStopAngle)==null?void 0:j.call(I))??180,_e=E(Ie,"#059669");r.value.addLayer(_e),[K,he].forEach(Ke=>{const rt=Ke*Math.PI/180,ne=Gt.latLng(Ie.lat+D/111319.9*Math.sin(rt),Ie.lng+D/(111319.9*Math.cos(Ie.lat*Math.PI/180))*Math.cos(rt)),ce=E(ne,"#DC2626");r.value.addLayer(ce)});const de=((K+he)/2+360)%360*Math.PI/180,Se=Gt.latLng(Ie.lat+D/111319.9*Math.sin(de),Ie.lng+D/(111319.9*Math.cos(Ie.lat*Math.PI/180))*Math.cos(de)),Ae=E(Se,"#2563EB");r.value.addLayer(Ae)}else if(I instanceof Gt.Polyline){const Y=I.getLatLngs();Y.forEach(Ie=>{const D=E(Ie,"#059669");r.value.addLayer(D)});for(let Ie=0;Ie<Y.length-1;Ie++){const D=we(Y[Ie],Y[Ie+1]),K=E(D,"#2563EB");r.value.addLayer(K)}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}};return mh(()=>{e.value&&(e.value.remove(),e.value=null)}),{map:e,featureGroup:t,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:o,selectedShape:l,isDrawing:c,initMap:O,setDrawingTool:F,updateShapeStyle:G,updateShapeProperties:X,updateTextFixedSize:R,adjustView:q,clearActiveControlPoints:w}}function pw(){const e=It(null),t=It(""),n=It("Ville"),r={Ville:Ji.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}),Satellite:Ji.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19}),Cadastre:Ji.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19})};return{map:e,searchQuery:t,currentBaseMap:n,baseMaps:r,initMap:p=>{e.value=p,Ji.control.layers(r).addTo(p),r[n.value].addTo(p)},searchLocation:async()=>{if(!(!e.value||!t.value))try{const m=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t.value)}`)).json();if(m&&m.length>0){const{lat:y,lon:b}=m[0];e.value.setView([y,b],13)}}catch(p){console.error("Erreur lors de la recherche de localisation:",p)}},changeBaseMap:p=>{!e.value||!r[p]||(Object.values(r).forEach(m=>{var y;(y=e.value)!=null&&y.hasLayer(m)&&e.value.removeLayer(m)}),r[p].addTo(e.value),n.value=p)}}}const Ah=_d("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,n;const e=us();this.loading=!0;try{let r="/plans/";e.isDealer?r+="?concessionnaire="+((t=e.user)==null?void 0:t.id):e.isClient&&(r+="?utilisateur="+((n=e.user)==null?void 0:n.id));const o=await wn.get(r);this.plans=o.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var t,n;const e=us();this.loading=!0;try{let r="/plans/";const o={include_details:!0};e.isDealer?o.concessionnaire=(t=e.user)==null?void 0:t.id:e.isClient&&(o.utilisateur=(n=e.user)==null?void 0:n.id);const l=await wn.get(r,{params:o});return this.plans=l.data,l}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{console.log("Creating plan with data:",e);const t=await wn.post("/plans/",e);return console.log("Plan creation response:",t.data),this.plans.push(t.data),t.data}catch(t){const n=t instanceof Error?t.message:String(t);throw console.error("Error creating plan:",n),this.error="Erreur lors de la création du plan",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var t,n;if(this.unsavedChanges){this.loading=!0;try{const r=await wn.patch(`/plans/${e}/`,{...this.currentPlan,version:((t=this.currentPlan)==null?void 0:t.version)||1}),o=this.plans.findIndex(l=>l.id===e);return o!==-1&&(this.plans[o]=r.data),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async updatePlanDetails(e,t){var n;try{const r=await wn.patch(`/plans/${e}/`,t),o=this.plans.findIndex(l=>l.id===e);return o!==-1&&(this.plans[o]={...this.plans[o],...r.data}),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan={...this.currentPlan,...r.data}),r.data}catch(r){throw console.error("Erreur lors de la mise à jour du plan:",r),r}},async fetchPlanHistory(e){this.loading=!0;try{const t=await wn.get(`/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la récupération de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const r=await wn.post(`/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=r.data);const o=this.plans.findIndex(l=>l.id===e);return o!==-1&&(this.plans[o]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;try{await wn.delete(`/plans/${e}/`),this.plans=this.plans.filter(n=>n.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}}),qg=_d("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){this.currentPlanId=e,e===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(e){!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e),this.unsavedChanges=!0},updateElement(e){const t=this.elements.findIndex(n=>n.id===e.id);if(t!==-1){const n=this.elements[t].type_forme;this.elements[t]={...e,type_forme:n},this.unsavedChanges=!0}},removeElement(e){const t=this.elements.findIndex(n=>n.id===e);t!==-1&&(this.elements.splice(t,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){var t;this.loading=!0;try{const r=(await wn.get(`/plans/${e}/`)).data;this.elements=r.formes.map(o=>({...o,type_forme:o.type_forme})),this.currentPlanId=e,this.unsavedChanges=!1,r.preferences&&(r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),(t=this.selectedElement)!=null&&t.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(n){throw console.error("Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1}},async saveToPlan(e){Ah(),this.loading=!0;try{const t=e||this.currentPlanId;if(!t)throw new Error("Aucun plan sélectionné pour la sauvegarde");const n=this.elements.map(o=>({...o,type_forme:o.type_forme||this.lastUsedType})),r=await wn.post(`/plans/${t}/save_with_elements/`,{formes:n,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=r.data.formes.map(o=>({...o,type_forme:o.type_forme})),this.unsavedChanges=!1,r.data}catch(t){throw console.error("Erreur lors de la sauvegarde:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1}}}}),mw={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},gw={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},vw={key:0,class:"mb-4"},_w={key:0,class:"animate-pulse"},yw=["value"],bw={key:1,class:"mb-4"},ww={key:0,class:"animate-pulse"},xw=["disabled"],Lw={value:null},Cw=["value"],kw={class:"mb-4"},Pw={class:"mb-6"},Sw={class:"flex justify-end space-x-3"},Ew=["disabled"],Aw={key:0},Mw={key:1},$g=Es({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(e,{expose:t,emit:n}){const r=e,o=n,l=us(),c=Ah();It(!1);const p=It(!1),m=It(null),y=It([]),b=It([]),w=It(null),E=It(null),C=It(!1),R=It(!1),O=It({nom:"",description:"",concessionnaire:null,client:null}),q=Tn(()=>{var se,ue;return((se=l.user)==null?void 0:se.user_type)==="admin"?O.value.nom.trim()&&O.value.concessionnaire&&O.value.client:((ue=l.user)==null?void 0:ue.user_type)==="dealer"?O.value.nom.trim()&&O.value.client:O.value.nom.trim()});ls(()=>O.value.concessionnaire,async se=>{if(r.modelValue)if(console.log("[NewPlanModal] Concessionnaire changed:",se),se){const ue=y.value.find(Be=>Be.id===se);ue&&await X(ue)}else b.value=[],w.value=null,E.value=null,O.value.client=null}),ls(()=>r.modelValue,se=>{var ue,Be;se?((ue=l.user)==null?void 0:ue.user_type)==="admin"?F():((Be=l.user)==null?void 0:Be.user_type)==="dealer"&&G(l.user.id):(O.value={nom:"",description:"",concessionnaire:null,client:null},w.value=null,E.value=null,b.value=[],y.value=[],m.value=null)}),Tn(()=>{var se;return((se=l.user)==null?void 0:se.user_type)==="admin"?w.value?b.value:[]:b.value});async function F(){console.log("[NewPlanModal] Loading dealers..."),C.value=!0;try{const se=await wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});console.log("[NewPlanModal] Dealers loaded:",se.data),y.value=se.data}catch(se){console.error("[NewPlanModal] Error loading dealers:",se)}finally{C.value=!1}}async function G(se){console.log("[NewPlanModal] Loading clients for dealer:",se),R.value=!0;try{const ue=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:se}});console.log("[NewPlanModal] Clients loaded:",ue.data),b.value=Array.isArray(ue.data)?ue.data:[ue.data]}catch(ue){console.error("[NewPlanModal] Error loading clients:",ue),b.value=[]}finally{R.value=!1}}async function X(se){if(r.modelValue){console.log("[NewPlanModal] Selecting dealer:",se),w.value=se,O.value.concessionnaire=se.id,R.value=!0;try{const ue=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:se.id}});console.log("[NewPlanModal] Clients loaded:",ue.data),b.value=Array.isArray(ue.data)?ue.data:[ue.data]}catch(ue){console.error("[NewPlanModal] Error loading clients:",ue),b.value=[]}finally{R.value=!1}}}function Ce(se){r.modelValue&&(console.log("[NewPlanModal] Client selected:",se),E.value=se,O.value.client=se.id,o("clientSelected",se))}function Pe(){o("update:modelValue",!1),O.value={nom:"",description:"",concessionnaire:null,client:null},w.value=null,E.value=null,b.value=[],m.value=null}async function we(){var se,ue,Be,Je,$;m.value=null,p.value=!0;try{const J={nom:O.value.nom.trim(),description:O.value.description.trim()};((se=l.user)==null?void 0:se.user_type)==="admin"?(J.concessionnaire=O.value.concessionnaire,J.client=O.value.client):((ue=l.user)==null?void 0:ue.user_type)==="dealer"?(J.concessionnaire=l.user.id,J.client=O.value.client):((Be=l.user)==null?void 0:Be.user_type)==="client"&&(J.client=l.user.id);const I=await c.createPlan(J);o("created",I.id),Pe()}catch(J){console.error("[NewPlanModal] Error creating plan:",J),m.value=(($=(Je=J.response)==null?void 0:Je.data)==null?void 0:$.detail)||J.message||"Une erreur est survenue lors de la création du plan"}finally{p.value=!1}}return t({dealers:y,dealerClients:b,selectedDealer:w,selectedClient:E,loadDealers:F,loadDealerClients:G,selectDealer:X,selectClient:Ce}),(se,ue)=>{var Be,Je;return se.modelValue?(ut(),dt("div",mw,[B("div",gw,[B("div",{class:"flex justify-between items-center mb-4"},[ue[5]||(ue[5]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),B("button",{onClick:Pe,class:"text-gray-400 hover:text-gray-500"},ue[4]||(ue[4]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Cn(l).isAdmin?(ut(),dt("div",vw,[ue[8]||(ue[8]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),C.value?(ut(),dt("div",_w,ue[6]||(ue[6]=[B("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Fn((ut(),dt("select",{key:1,"onUpdate:modelValue":ue[0]||(ue[0]=$=>O.value.concessionnaire=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[ue[7]||(ue[7]=B("option",{value:null},"Sélectionnez un concessionnaire",-1)),(ut(!0),dt(En,null,Hn(y.value,$=>(ut(),dt("option",{key:$.id,value:$.id},kt($.first_name)+" "+kt($.last_name)+" ("+kt($.company_name)+") ",9,yw))),128))],512)),[[$s,O.value.concessionnaire]])])):on("",!0),((Be=Cn(l).user)==null?void 0:Be.user_type)==="admin"||((Je=Cn(l).user)==null?void 0:Je.user_type)==="dealer"?(ut(),dt("div",bw,[ue[10]||(ue[10]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),R.value?(ut(),dt("div",ww,ue[9]||(ue[9]=[B("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Fn((ut(),dt("select",{key:1,"onUpdate:modelValue":ue[1]||(ue[1]=$=>O.value.client=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!b.value.length},[B("option",Lw,kt(b.value.length?"Sélectionnez un client":"Aucun client disponible"),1),(ut(!0),dt(En,null,Hn(b.value,$=>(ut(),dt("option",{key:$.id,value:$.id},kt($.first_name)+" "+kt($.last_name)+" ("+kt($.company_name)+") ",9,Cw))),128))],8,xw)),[[$s,O.value.client]])])):on("",!0),B("div",kw,[ue[11]||(ue[11]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Fn(B("input",{"onUpdate:modelValue":ue[2]||(ue[2]=$=>O.value.nom=$),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Mi,O.value.nom]])]),B("div",Pw,[ue[12]||(ue[12]=B("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Fn(B("textarea",{"onUpdate:modelValue":ue[3]||(ue[3]=$=>O.value.description=$),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Mi,O.value.description]])]),B("div",Sw,[B("button",{onClick:Pe,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),B("button",{onClick:we,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!q.value||p.value},[p.value?(ut(),dt("span",Aw,"Création en cours...")):(ut(),dt("span",Mw,"Créer le plan"))],8,Ew)])])])):on("",!0)}}});function si(e){"@babel/helpers - typeof";return si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(e)}var Zr=Uint8Array,Gs=Uint16Array,Cd=Int32Array,Mh=new Zr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bh=new Zr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$f=new Zr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vg=function(e,t){for(var n=new Gs(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var o=new Cd(n[30]),r=1;r<30;++r)for(var l=n[r];l<n[r+1];++l)o[l]=l-n[r]<<5|r;return{b:n,r:o}},Gg=Vg(Mh,2),Hg=Gg.b,Vf=Gg.r;Hg[28]=258,Vf[258]=28;var Wg=Vg(Bh,0),Bw=Wg.b,p0=Wg.r,Gf=new Gs(32768);for(var yi=0;yi<32768;++yi){var il=(yi&43690)>>1|(yi&21845)<<1;il=(il&52428)>>2|(il&13107)<<2,il=(il&61680)>>4|(il&3855)<<4,Gf[yi]=((il&65280)>>8|(il&255)<<8)>>1}var ca=function(e,t,n){for(var r=e.length,o=0,l=new Gs(t);o<r;++o)e[o]&&++l[e[o]-1];var c=new Gs(t);for(o=1;o<t;++o)c[o]=c[o-1]+l[o-1]<<1;var p;if(n){p=new Gs(1<<t);var m=15-t;for(o=0;o<r;++o)if(e[o])for(var y=o<<4|e[o],b=t-e[o],w=c[e[o]-1]++<<b,E=w|(1<<b)-1;w<=E;++w)p[Gf[w]>>m]=y}else for(p=new Gs(r),o=0;o<r;++o)e[o]&&(p[o]=Gf[c[e[o]-1]++]>>15-e[o]);return p},dl=new Zr(288);for(var yi=0;yi<144;++yi)dl[yi]=8;for(var yi=144;yi<256;++yi)dl[yi]=9;for(var yi=256;yi<280;++yi)dl[yi]=7;for(var yi=280;yi<288;++yi)dl[yi]=8;var rc=new Zr(32);for(var yi=0;yi<32;++yi)rc[yi]=5;var Tw=ca(dl,9,0),Nw=ca(dl,9,1),Dw=ca(rc,5,0),Ow=ca(rc,5,1),uf=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},No=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},cf=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},kd=function(e){return(e+7)/8|0},Zg=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Zr(e.subarray(t,n))},Iw=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oo=function(e,t,n){var r=new Error(t||Iw[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Oo),!n)throw r;return r},Rw=function(e,t,n,r){var o=e.length,l=0;if(!o||t.f&&!t.l)return n||new Zr(0);var c=!n,p=c||t.i!=2,m=t.i;c&&(n=new Zr(o*3));var y=function(rt){var ne=n.length;if(rt>ne){var ce=new Zr(Math.max(ne*2,rt));ce.set(n),n=ce}},b=t.f||0,w=t.p||0,E=t.b||0,C=t.l,R=t.d,O=t.m,q=t.n,F=o*8;do{if(!C){b=No(e,w,1);var G=No(e,w+1,3);if(w+=3,G)if(G==1)C=Nw,R=Ow,O=9,q=5;else if(G==2){var we=No(e,w,31)+257,se=No(e,w+10,15)+4,ue=we+No(e,w+5,31)+1;w+=14;for(var Be=new Zr(ue),Je=new Zr(19),$=0;$<se;++$)Je[$f[$]]=No(e,w+$*3,7);w+=se*3;for(var J=uf(Je),I=(1<<J)-1,te=ca(Je,J,1),$=0;$<ue;){var Z=te[No(e,w,I)];w+=Z&15;var X=Z>>4;if(X<16)Be[$++]=X;else{var ee=0,ve=0;for(X==16?(ve=3+No(e,w,3),w+=2,ee=Be[$-1]):X==17?(ve=3+No(e,w,7),w+=3):X==18&&(ve=11+No(e,w,127),w+=7);ve--;)Be[$++]=ee}}var V=Be.subarray(0,we),j=Be.subarray(we);O=uf(V),q=uf(j),C=ca(V,O,1),R=ca(j,q,1)}else Oo(1);else{var X=kd(w)+4,Ce=e[X-4]|e[X-3]<<8,Pe=X+Ce;if(Pe>o){m&&Oo(0);break}p&&y(E+Ce),n.set(e.subarray(X,Pe),E),t.b=E+=Ce,t.p=w=Pe*8,t.f=b;continue}if(w>F){m&&Oo(0);break}}p&&y(E+131072);for(var Y=(1<<O)-1,Ie=(1<<q)-1,D=w;;D=w){var ee=C[cf(e,w)&Y],K=ee>>4;if(w+=ee&15,w>F){m&&Oo(0);break}if(ee||Oo(2),K<256)n[E++]=K;else if(K==256){D=w,C=null;break}else{var he=K-254;if(K>264){var $=K-257,_e=Mh[$];he=No(e,w,(1<<_e)-1)+Hg[$],w+=_e}var Le=R[cf(e,w)&Ie],de=Le>>4;Le||Oo(3),w+=Le&15;var j=Bw[de];if(de>3){var _e=Bh[de];j+=cf(e,w)&(1<<_e)-1,w+=_e}if(w>F){m&&Oo(0);break}p&&y(E+131072);var Se=E+he;if(E<j){var Ae=l-j,Ke=Math.min(j,Se);for(Ae+E<0&&Oo(3);E<Ke;++E)n[E]=r[Ae+E]}for(;E<Se;++E)n[E]=n[E-j]}}t.l=C,t.p=D,t.b=E,t.f=b,C&&(b=1,t.m=O,t.d=R,t.n=q)}while(!b);return E!=n.length&&c?Zg(n,0,E):n.subarray(0,E)},Ba=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Iu=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},hf=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,l=n.slice();if(!o)return{t:Jg,l:0};if(o==1){var c=new Zr(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort(function(Pe,we){return Pe.f-we.f}),n.push({s:-1,f:25001});var p=n[0],m=n[1],y=0,b=1,w=2;for(n[0]={s:-1,f:p.f+m.f,l:p,r:m};b!=o-1;)p=n[n[y].f<n[w].f?y++:w++],m=n[y!=b&&n[y].f<n[w].f?y++:w++],n[b++]={s:-1,f:p.f+m.f,l:p,r:m};for(var E=l[0].s,r=1;r<o;++r)l[r].s>E&&(E=l[r].s);var C=new Gs(E+1),R=Hf(n[b-1],C,0);if(R>t){var r=0,O=0,q=R-t,F=1<<q;for(l.sort(function(we,se){return C[se.s]-C[we.s]||we.f-se.f});r<o;++r){var G=l[r].s;if(C[G]>t)O+=F-(1<<R-C[G]),C[G]=t;else break}for(O>>=q;O>0;){var X=l[r].s;C[X]<t?O-=1<<t-C[X]++-1:++r}for(;r>=0&&O;--r){var Ce=l[r].s;C[Ce]==t&&(--C[Ce],++O)}R=t}return{t:new Zr(C),l:R}},Hf=function(e,t,n){return e.s==-1?Math.max(Hf(e.l,t,n+1),Hf(e.r,t,n+1)):t[e.s]=n},m0=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Gs(++t),r=0,o=e[0],l=1,c=function(m){n[r++]=m},p=1;p<=t;++p)if(e[p]==o&&p!=t)++l;else{if(!o&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(o),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(o);l=1,o=e[p]}return{c:n.subarray(0,r),n:t}},Ru=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Kg=function(e,t,n){var r=n.length,o=kd(t+2);e[o]=r&255,e[o+1]=r>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var l=0;l<r;++l)e[o+l+4]=n[l];return(o+4+r)*8},g0=function(e,t,n,r,o,l,c,p,m,y,b){Ba(t,b++,n),++o[256];for(var w=hf(o,15),E=w.t,C=w.l,R=hf(l,15),O=R.t,q=R.l,F=m0(E),G=F.c,X=F.n,Ce=m0(O),Pe=Ce.c,we=Ce.n,se=new Gs(19),ue=0;ue<G.length;++ue)++se[G[ue]&31];for(var ue=0;ue<Pe.length;++ue)++se[Pe[ue]&31];for(var Be=hf(se,7),Je=Be.t,$=Be.l,J=19;J>4&&!Je[$f[J-1]];--J);var I=y+5<<3,te=Ru(o,dl)+Ru(l,rc)+c,Z=Ru(o,E)+Ru(l,O)+c+14+3*J+Ru(se,Je)+2*se[16]+3*se[17]+7*se[18];if(m>=0&&I<=te&&I<=Z)return Kg(t,b,e.subarray(m,m+y));var ee,ve,V,j;if(Ba(t,b,1+(Z<te)),b+=2,Z<te){ee=ca(E,C,0),ve=E,V=ca(O,q,0),j=O;var Y=ca(Je,$,0);Ba(t,b,X-257),Ba(t,b+5,we-1),Ba(t,b+10,J-4),b+=14;for(var ue=0;ue<J;++ue)Ba(t,b+3*ue,Je[$f[ue]]);b+=3*J;for(var Ie=[G,Pe],D=0;D<2;++D)for(var K=Ie[D],ue=0;ue<K.length;++ue){var he=K[ue]&31;Ba(t,b,Y[he]),b+=Je[he],he>15&&(Ba(t,b,K[ue]>>5&127),b+=K[ue]>>12)}}else ee=Tw,ve=dl,V=Dw,j=rc;for(var ue=0;ue<p;++ue){var _e=r[ue];if(_e>255){var he=_e>>18&31;Iu(t,b,ee[he+257]),b+=ve[he+257],he>7&&(Ba(t,b,_e>>23&31),b+=Mh[he]);var Le=_e&31;Iu(t,b,V[Le]),b+=j[Le],Le>3&&(Iu(t,b,_e>>5&8191),b+=Bh[Le])}else Iu(t,b,ee[_e]),b+=ve[_e]}return Iu(t,b,ee[256]),b+ve[256]},Fw=new Cd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Jg=new Zr(0),jw=function(e,t,n,r,o,l){var c=l.z||e.length,p=new Zr(r+c+5*(1+Math.ceil(c/7e3))+o),m=p.subarray(r,p.length-o),y=l.l,b=(l.r||0)&7;if(t){b&&(m[0]=l.r>>3);for(var w=Fw[t-1],E=w>>13,C=w&8191,R=(1<<n)-1,O=l.p||new Gs(32768),q=l.h||new Gs(R+1),F=Math.ceil(n/3),G=2*F,X=function(Re){return(e[Re]^e[Re+1]<<F^e[Re+2]<<G)&R},Ce=new Cd(25e3),Pe=new Gs(288),we=new Gs(32),se=0,ue=0,Be=l.i||0,Je=0,$=l.w||0,J=0;Be+2<c;++Be){var I=X(Be),te=Be&32767,Z=q[I];if(O[te]=Z,q[I]=te,$<=Be){var ee=c-Be;if((se>7e3||Je>24576)&&(ee>423||!y)){b=g0(e,m,0,Ce,Pe,we,ue,Je,J,Be-J,b),Je=se=ue=0,J=Be;for(var ve=0;ve<286;++ve)Pe[ve]=0;for(var ve=0;ve<30;++ve)we[ve]=0}var V=2,j=0,Y=C,Ie=te-Z&32767;if(ee>2&&I==X(Be-Ie))for(var D=Math.min(E,ee)-1,K=Math.min(32767,Be),he=Math.min(258,ee);Ie<=K&&--Y&&te!=Z;){if(e[Be+V]==e[Be+V-Ie]){for(var _e=0;_e<he&&e[Be+_e]==e[Be+_e-Ie];++_e);if(_e>V){if(V=_e,j=Ie,_e>D)break;for(var Le=Math.min(Ie,_e-2),de=0,ve=0;ve<Le;++ve){var Se=Be-Ie+ve&32767,Ae=O[Se],Ke=Se-Ae&32767;Ke>de&&(de=Ke,Z=Se)}}}te=Z,Z=O[te],Ie+=te-Z&32767}if(j){Ce[Je++]=268435456|Vf[V]<<18|p0[j];var rt=Vf[V]&31,ne=p0[j]&31;ue+=Mh[rt]+Bh[ne],++Pe[257+rt],++we[ne],$=Be+V,++se}else Ce[Je++]=e[Be],++Pe[e[Be]]}}for(Be=Math.max(Be,$);Be<c;++Be)Ce[Je++]=e[Be],++Pe[e[Be]];b=g0(e,m,y,Ce,Pe,we,ue,Je,J,Be-J,b),y||(l.r=b&7|m[b/8|0]<<3,b-=7,l.h=q,l.p=O,l.i=Be,l.w=$)}else{for(var Be=l.w||0;Be<c+y;Be+=65535){var ce=Be+65535;ce>=c&&(m[b/8|0]=y,ce=c),b=Kg(m,b+1,e.subarray(Be,ce))}l.i=c}return Zg(p,0,r+kd(b)+o)},Yg=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,l=n.length|0,c=0;c!=l;){for(var p=Math.min(c+2655,l);c<p;++c)o+=r+=n[c];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},zw=function(e,t,n,r,o){if(!o&&(o={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),c=new Zr(l.length+e.length);c.set(l),c.set(e,l.length),e=c,o.w=l.length}return jw(e,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,o)},Xg=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Uw=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var o=Yg();o.p(t.dictionary),Xg(e,2,o.d())}},qw=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Oo(6,"invalid zlib data"),(e[1]>>5&1)==1&&Oo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Wf(e,t){t||(t={});var n=Yg();n.p(e);var r=zw(e,t,t.dictionary?6:2,4);return Uw(r,t),Xg(r,r.length-4,n.d()),r}function $w(e,t){return Rw(e.subarray(qw(e),-4),{i:2},t,t)}var Vw=typeof TextDecoder<"u"&&new TextDecoder,Gw=0;try{Vw.decode(Jg,{stream:!0}),Gw=1}catch{}var vn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ff(){vn.console&&typeof vn.console.log=="function"&&vn.console.log.apply(vn.console,arguments)}var oi={log:ff,warn:function(e){vn.console&&(typeof vn.console.warn=="function"?vn.console.warn.apply(vn.console,arguments):ff.call(null,arguments))},error:function(e){vn.console&&(typeof vn.console.error=="function"?vn.console.error.apply(vn.console,arguments):ff(e))}};function df(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Ml(r.response,t,n)},r.onerror=function(){oi.error("could not download file")},r.send()}function v0(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Sc(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ku,Zf,Ml=vn.saveAs||((typeof window>"u"?"undefined":si(window))!=="object"||window!==vn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=vn.URL||vn.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?v0(o.href)?df(e,t,n):Sc(o,o.target="_blank"):Sc(o)):(o.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Sc(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(v0(e))df(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Sc(r)})}else navigator.msSaveOrOpenBlob(function(o,l){return l===void 0?l={autoBom:!1}:si(l)!=="object"&&(oi.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return df(e,t,n);var o=e.type==="application/octet-stream",l=/constructor/i.test(vn.HTMLElement)||vn.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l)&&(typeof FileReader>"u"?"undefined":si(FileReader))==="object"){var p=new FileReader;p.onloadend=function(){var b=p.result;b=c?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=b:location=b,r=null},p.readAsDataURL(e)}else{var m=vn.URL||vn.webkitURL,y=m.createObjectURL(e);r?r.location=y:location.href=y,r=null,setTimeout(function(){m.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Qg(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(p){return[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,l=n[r].process,c=o.exec(e);c&&(t=l(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var p=this.r.toString(16),m=this.g.toString(16),y=this.b.toString(16);return p.length==1&&(p="0"+p),m.length==1&&(m="0"+m),y.length==1&&(y="0"+y),"#"+p+m+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function pf(e,t){var n=e[0],r=e[1],o=e[2],l=e[3];n=Ur(n,r,o,l,t[0],7,-680876936),l=Ur(l,n,r,o,t[1],12,-389564586),o=Ur(o,l,n,r,t[2],17,606105819),r=Ur(r,o,l,n,t[3],22,-1044525330),n=Ur(n,r,o,l,t[4],7,-176418897),l=Ur(l,n,r,o,t[5],12,1200080426),o=Ur(o,l,n,r,t[6],17,-1473231341),r=Ur(r,o,l,n,t[7],22,-45705983),n=Ur(n,r,o,l,t[8],7,1770035416),l=Ur(l,n,r,o,t[9],12,-1958414417),o=Ur(o,l,n,r,t[10],17,-42063),r=Ur(r,o,l,n,t[11],22,-1990404162),n=Ur(n,r,o,l,t[12],7,1804603682),l=Ur(l,n,r,o,t[13],12,-40341101),o=Ur(o,l,n,r,t[14],17,-1502002290),n=qr(n,r=Ur(r,o,l,n,t[15],22,1236535329),o,l,t[1],5,-165796510),l=qr(l,n,r,o,t[6],9,-1069501632),o=qr(o,l,n,r,t[11],14,643717713),r=qr(r,o,l,n,t[0],20,-373897302),n=qr(n,r,o,l,t[5],5,-701558691),l=qr(l,n,r,o,t[10],9,38016083),o=qr(o,l,n,r,t[15],14,-660478335),r=qr(r,o,l,n,t[4],20,-405537848),n=qr(n,r,o,l,t[9],5,568446438),l=qr(l,n,r,o,t[14],9,-1019803690),o=qr(o,l,n,r,t[3],14,-187363961),r=qr(r,o,l,n,t[8],20,1163531501),n=qr(n,r,o,l,t[13],5,-1444681467),l=qr(l,n,r,o,t[2],9,-51403784),o=qr(o,l,n,r,t[7],14,1735328473),n=$r(n,r=qr(r,o,l,n,t[12],20,-1926607734),o,l,t[5],4,-378558),l=$r(l,n,r,o,t[8],11,-2022574463),o=$r(o,l,n,r,t[11],16,1839030562),r=$r(r,o,l,n,t[14],23,-35309556),n=$r(n,r,o,l,t[1],4,-1530992060),l=$r(l,n,r,o,t[4],11,1272893353),o=$r(o,l,n,r,t[7],16,-155497632),r=$r(r,o,l,n,t[10],23,-1094730640),n=$r(n,r,o,l,t[13],4,681279174),l=$r(l,n,r,o,t[0],11,-358537222),o=$r(o,l,n,r,t[3],16,-722521979),r=$r(r,o,l,n,t[6],23,76029189),n=$r(n,r,o,l,t[9],4,-640364487),l=$r(l,n,r,o,t[12],11,-421815835),o=$r(o,l,n,r,t[15],16,530742520),n=Vr(n,r=$r(r,o,l,n,t[2],23,-995338651),o,l,t[0],6,-198630844),l=Vr(l,n,r,o,t[7],10,1126891415),o=Vr(o,l,n,r,t[14],15,-1416354905),r=Vr(r,o,l,n,t[5],21,-57434055),n=Vr(n,r,o,l,t[12],6,1700485571),l=Vr(l,n,r,o,t[3],10,-1894986606),o=Vr(o,l,n,r,t[10],15,-1051523),r=Vr(r,o,l,n,t[1],21,-2054922799),n=Vr(n,r,o,l,t[8],6,1873313359),l=Vr(l,n,r,o,t[15],10,-30611744),o=Vr(o,l,n,r,t[6],15,-1560198380),r=Vr(r,o,l,n,t[13],21,1309151649),n=Vr(n,r,o,l,t[4],6,-145523070),l=Vr(l,n,r,o,t[11],10,-1120210379),o=Vr(o,l,n,r,t[2],15,718787259),r=Vr(r,o,l,n,t[9],21,-343485551),e[0]=ul(n,e[0]),e[1]=ul(r,e[1]),e[2]=ul(o,e[2]),e[3]=ul(l,e[3])}function Th(e,t,n,r,o,l){return t=ul(ul(t,e),ul(r,l)),ul(t<<o|t>>>32-o,n)}function Ur(e,t,n,r,o,l,c){return Th(t&n|~t&r,e,t,o,l,c)}function qr(e,t,n,r,o,l,c){return Th(t&r|n&~r,e,t,o,l,c)}function $r(e,t,n,r,o,l,c){return Th(t^n^r,e,t,o,l,c)}function Vr(e,t,n,r,o,l,c){return Th(n^(t|~r),e,t,o,l,c)}function e1(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)pf(r,Hw(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(pf(r,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,pf(r,o),r}function Hw(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Ku=vn.atob.bind(vn),Zf=vn.btoa.bind(vn);var _0="0123456789abcdef".split("");function Ww(e){for(var t="",n=0;n<4;n++)t+=_0[e>>8*n+4&15]+_0[e>>8*n&15];return t}function Zw(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Kf(e){return e1(e).map(Zw).join("")}var Kw=function(e){for(var t=0;t<e.length;t++)e[t]=Ww(e[t]);return e.join("")}(e1("hello"))!="5d41402abc4b2a76b9719d911017c592";function ul(e,t){if(Kw){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Jf(e,t){var n,r,o,l;if(e!==n){for(var c=(o=e,l=1+(256/e.length>>0),new Array(l+1).join(o)),p=[],m=0;m<256;m++)p[m]=m;var y=0;for(m=0;m<256;m++){var b=p[m];y=(y+b+c.charCodeAt(m))%256,p[m]=p[y],p[y]=b}n=e,r=p}else p=r;var w=t.length,E=0,C=0,R="";for(m=0;m<w;m++)C=(C+(b=p[E=(E+1)%256]))%256,p[E]=p[C],p[C]=b,c=p[(p[E]+p[C])%256],R+=String.fromCharCode(t.charCodeAt(m)^c);return R}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var y0={print:4,modify:8,copy:16,"annot-forms":32};function au(e,t,n,r){this.v=1,this.r=2;var o=192;e.forEach(function(p){if(y0.perm!==void 0)throw new Error("Invalid permission: "+p);o+=y0[p]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(t+this.padding).substr(0,32),c=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,c),this.P=-(1+(255^o)),this.encryptionKey=Kf(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Jf(this.encryptionKey,this.padding)}function lu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[r]}return t}function b0(e){if(si(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var l=Math.random().toString(35);return t[n][l]=[r,!!o],l},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var l in t[n]){var c=t[n][l];try{c[0].apply(e,r)}catch(p){vn.console&&oi.error("jsPDF PubSub Error",p.message,p)}c[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function sh(e){if(!(this instanceof sh))return new sh(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function t1(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Tl(e,t,n,r,o){if(!(this instanceof Tl))return new Tl(e,t,n,r,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,t1.call(this,r,o)}function uu(e,t,n,r,o){if(!(this instanceof uu))return new uu(e,t,n,r,o);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,t1.call(this,r,o)}function mn(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],l=arguments[3],c=[],p=1,m=16,y="S",b=null;si(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,o=e.format||o,l=e.compress||e.compressPdf||l,(b=e.encryption||null)!==null&&(b.userPassword=b.userPassword||"",b.ownerPassword=b.ownerPassword||"",b.userPermissions=b.userPermissions||[]),p=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(m=e.floatPrecision),y=e.defaultPathOperation||"S"),c=e.filters||(l===!0?["FlateEncode"]:c),r=r||"mm",n=(""+(n||"P")).toLowerCase();var w=e.putOnlyUsedFonts||!1,E={},C={internal:{},__private__:{}};C.__private__.PubSub=b0;var R="1.3",O=C.__private__.getPdfVersion=function(){return R};C.__private__.setPdfVersion=function(x){R=x};var q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return q};var F=C.__private__.getPageFormat=function(x){return q[x]};o=o||"a4";var G={COMPAT:"compat",ADVANCED:"advanced"},X=G.COMPAT;function Ce(){this.saveGraphicsState(),le(new an(Nt,0,0,-Nt,0,no()*Nt).toString()+" cm"),this.setFontSize(this.getFontSize()/Nt),y="n",X=G.ADVANCED}function Pe(){this.restoreGraphicsState(),y="S",X=G.COMPAT}var we=C.__private__.combineFontStyleAndFontWeight=function(x,H){if(x=="bold"&&H=="normal"||x=="bold"&&H==400||x=="normal"&&H=="italic"||x=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(x=H==400||H==="normal"?x==="italic"?"italic":"normal":H!=700&&H!=="bold"||x!=="normal"?(H==700?"bold":H)+""+x:"bold"),x};C.advancedAPI=function(x){var H=X===G.COMPAT;return H&&Ce.call(this),typeof x!="function"||(x(this),H&&Pe.call(this)),this},C.compatAPI=function(x){var H=X===G.ADVANCED;return H&&Pe.call(this),typeof x!="function"||(x(this),H&&Ce.call(this)),this},C.isAdvancedAPI=function(){return X===G.ADVANCED};var se,ue=function(x){if(X!==G.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Be=C.roundToPrecision=C.__private__.roundToPrecision=function(x,H){var Me=t||H;if(isNaN(x)||isNaN(Me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(Me).replace(/0+$/,"")};se=C.hpf=C.__private__.hpf=typeof m=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(x,m)}:m==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(x,16)};var Je=C.f2=C.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return Be(x,2)},$=C.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return Be(x,3)},J=C.scale=C.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return X===G.COMPAT?x*Nt:X===G.ADVANCED?x:void 0},I=function(x){return X===G.COMPAT?no()-x:X===G.ADVANCED?x:void 0},te=function(x){return J(I(x))};C.__private__.setPrecision=C.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var Z,ee="00000000000000000000000000000000",ve=C.__private__.getFileId=function(){return ee},V=C.__private__.setFileId=function(x){return ee=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),b!==null&&(Li=new au(b.userPermissions,b.userPassword,b.ownerPassword,ee)),ee};C.setFileId=function(x){return V(x),this},C.getFileId=function(){return ve()};var j=C.__private__.convertDateToPDFDate=function(x){var H=x.getTimezoneOffset(),Me=H<0?"+":"-",qe=Math.floor(Math.abs(H/60)),nt=Math.abs(H%60),yt=[Me,he(qe),"'",he(nt),"'"].join("");return["D:",x.getFullYear(),he(x.getMonth()+1),he(x.getDate()),he(x.getHours()),he(x.getMinutes()),he(x.getSeconds()),yt].join("")},Y=C.__private__.convertPDFDateToDate=function(x){var H=parseInt(x.substr(2,4),10),Me=parseInt(x.substr(6,2),10)-1,qe=parseInt(x.substr(8,2),10),nt=parseInt(x.substr(10,2),10),yt=parseInt(x.substr(12,2),10),Bt=parseInt(x.substr(14,2),10);return new Date(H,Me,qe,nt,yt,Bt,0)},Ie=C.__private__.setCreationDate=function(x){var H;if(x===void 0&&(x=new Date),x instanceof Date)H=j(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=x}return Z=H},D=C.__private__.getCreationDate=function(x){var H=Z;return x==="jsDate"&&(H=Y(Z)),H};C.setCreationDate=function(x){return Ie(x),this},C.getCreationDate=function(x){return D(x)};var K,he=C.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},_e=C.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},Le=0,de=[],Se=[],Ae=0,Ke=[],rt=[],ne=!1,ce=Se,Re=function(){Le=0,Ae=0,Se=[],de=[],Ke=[],Xr=Ut(),Ar=Ut()};C.__private__.setCustomOutputDestination=function(x){ne=!0,ce=x};var De=function(x){ne||(ce=x)};C.__private__.resetCustomOutputDestination=function(){ne=!1,ce=Se};var le=C.__private__.out=function(x){return x=x.toString(),Ae+=x.length+1,ce.push(x),ce},Ve=C.__private__.write=function(x){return le(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},st=C.__private__.getArrayBuffer=function(x){for(var H=x.length,Me=new ArrayBuffer(H),qe=new Uint8Array(Me);H--;)qe[H]=x.charCodeAt(H);return Me},Qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return Qe};var ot=e.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(x){return ot=X===G.ADVANCED?x/Nt:x,this};var Oe,xe=C.__private__.getFontSize=C.getFontSize=function(){return X===G.COMPAT?ot:ot*Nt},it=e.R2L||!1;C.__private__.setR2L=C.setR2L=function(x){return it=x,this},C.__private__.getR2L=C.getR2L=function(){return it};var vt,Lt=C.__private__.setZoomMode=function(x){var H=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Oe=x;else if(isNaN(x)){if(H.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Oe=x}else Oe=parseInt(x,10)};C.__private__.getZoomMode=function(){return Oe};var ze,Dt=C.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');vt=x};C.__private__.getPageMode=function(){return vt};var Tt=C.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');ze=x};C.__private__.getLayoutMode=function(){return ze},C.__private__.setDisplayMode=C.setDisplayMode=function(x,H,Me){return Lt(x),Tt(H),Dt(Me),this};var jt={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(x){if(Object.keys(jt).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return jt[x]},C.__private__.getDocumentProperties=function(){return jt},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(x){for(var H in jt)jt.hasOwnProperty(H)&&x[H]&&(jt[H]=x[H]);return this},C.__private__.setDocumentProperty=function(x,H){if(Object.keys(jt).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return jt[x]=H};var Vt,Nt,Pn,en,Jn,un={},xn={},Yn=[],zt={},Pr={},In={},xi={},Di=null,Un=0,cn=[],Jt=new b0(C),Kt=e.hotfixes||[],li={},Sr={},Er=[],an=function x(H,Me,qe,nt,yt,Bt){if(!(this instanceof x))return new x(H,Me,qe,nt,yt,Bt);isNaN(H)&&(H=1),isNaN(Me)&&(Me=0),isNaN(qe)&&(qe=0),isNaN(nt)&&(nt=1),isNaN(yt)&&(yt=0),isNaN(Bt)&&(Bt=0),this._matrix=[H,Me,qe,nt,yt,Bt]};Object.defineProperty(an.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(an.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(an.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(an.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(an.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(an.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(an.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(an.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(an.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(an.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(an.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(an.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(an.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(an.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(an.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(an.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),an.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(se).join(x)},an.prototype.multiply=function(x){var H=x.sx*this.sx+x.shy*this.shx,Me=x.sx*this.shy+x.shy*this.sy,qe=x.shx*this.sx+x.sy*this.shx,nt=x.shx*this.shy+x.sy*this.sy,yt=x.tx*this.sx+x.ty*this.shx+this.tx,Bt=x.tx*this.shy+x.ty*this.sy+this.ty;return new an(H,Me,qe,nt,yt,Bt)},an.prototype.decompose=function(){var x=this.sx,H=this.shy,Me=this.shx,qe=this.sy,nt=this.tx,yt=this.ty,Bt=Math.sqrt(x*x+H*H),qt=(x/=Bt)*Me+(H/=Bt)*qe;Me-=x*qt,qe-=H*qt;var Wt=Math.sqrt(Me*Me+qe*qe);return qt/=Wt,x*(qe/=Wt)<H*(Me/=Wt)&&(x=-x,H=-H,qt=-qt,Bt=-Bt),{scale:new an(Bt,0,0,Wt,0,0),translate:new an(1,0,0,1,nt,yt),rotate:new an(x,H,-H,x,0,0),skew:new an(1,0,qt,1,0,0)}},an.prototype.toString=function(x){return this.join(" ")},an.prototype.inversed=function(){var x=this.sx,H=this.shy,Me=this.shx,qe=this.sy,nt=this.tx,yt=this.ty,Bt=1/(x*qe-H*Me),qt=qe*Bt,Wt=-H*Bt,nn=-Me*Bt,pn=x*Bt;return new an(qt,Wt,nn,pn,-qt*nt-nn*yt,-Wt*nt-pn*yt)},an.prototype.applyToPoint=function(x){var H=x.x*this.sx+x.y*this.shx+this.tx,Me=x.x*this.shy+x.y*this.sy+this.ty;return new So(H,Me)},an.prototype.applyToRectangle=function(x){var H=this.applyToPoint(x),Me=this.applyToPoint(new So(x.x+x.w,x.y+x.h));return new Dr(H.x,H.y,Me.x-H.x,Me.y-H.y)},an.prototype.clone=function(){var x=this.sx,H=this.shy,Me=this.shx,qe=this.sy,nt=this.tx,yt=this.ty;return new an(x,H,Me,qe,nt,yt)},C.Matrix=an;var Yr=C.matrixMult=function(x,H){return H.multiply(x)},cs=new an(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=cs;var ar=function(x,H){if(!Pr[x]){var Me=(H instanceof Tl?"Sh":"P")+(Object.keys(zt).length+1).toString(10);H.id=Me,Pr[x]=Me,zt[Me]=H,Jt.publish("addPattern",H)}};C.ShadingPattern=Tl,C.TilingPattern=uu,C.addShadingPattern=function(x,H){return ue("addShadingPattern()"),ar(x,H),this},C.beginTilingPattern=function(x){ue("beginTilingPattern()"),xa(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},C.endTilingPattern=function(x,H){ue("endTilingPattern()"),H.stream=rt[K].join(`
`),ar(x,H),Jt.publish("endTilingPattern",H),Er.pop().restore()};var qn=C.__private__.newObject=function(){var x=Ut();return lr(x,!0),x},Ut=C.__private__.newObjectDeferred=function(){return Le++,de[Le]=function(){return Ae},Le},lr=function(x,H){return H=typeof H=="boolean"&&H,de[x]=Ae,H&&le(x+" 0 obj"),x},go=C.__private__.newAdditionalObject=function(){var x={objId:Ut(),content:""};return Ke.push(x),x},Xr=Ut(),Ar=Ut(),_r=C.__private__.decodeColorString=function(x){var H=x.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length===5&&(H[4]==="k"||H[4]==="K")&&(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var Me=parseFloat(H[0]);H=[Me,Me,Me,"r"]}for(var qe="#",nt=0;nt<3;nt++)qe+=("0"+Math.floor(255*parseFloat(H[nt])).toString(16)).slice(-2);return qe},Mr=C.__private__.encodeColorString=function(x){var H;typeof x=="string"&&(x={ch1:x});var Me=x.ch1,qe=x.ch2,nt=x.ch3,yt=x.ch4,Bt=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Me=="string"&&Me.charAt(0)!=="#"){var qt=new Qg(Me);if(qt.ok)Me=qt.toHex();else if(!/^\d*\.?\d*$/.test(Me))throw new Error('Invalid color "'+Me+'" passed to jsPDF.encodeColorString.')}if(typeof Me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Me)&&(Me="#"+Me[1]+Me[1]+Me[2]+Me[2]+Me[3]+Me[3]),typeof Me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Me)){var Wt=parseInt(Me.substr(1),16);Me=Wt>>16&255,qe=Wt>>8&255,nt=255&Wt}if(qe===void 0||yt===void 0&&Me===qe&&qe===nt)if(typeof Me=="string")H=Me+" "+Bt[0];else switch(x.precision){case 2:H=Je(Me/255)+" "+Bt[0];break;case 3:default:H=$(Me/255)+" "+Bt[0]}else if(yt===void 0||si(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return H=["1.","1.","1.",Bt[1]].join(" ");if(typeof Me=="string")H=[Me,qe,nt,Bt[1]].join(" ");else switch(x.precision){case 2:H=[Je(Me/255),Je(qe/255),Je(nt/255),Bt[1]].join(" ");break;default:case 3:H=[$(Me/255),$(qe/255),$(nt/255),Bt[1]].join(" ")}}else if(typeof Me=="string")H=[Me,qe,nt,yt,Bt[2]].join(" ");else switch(x.precision){case 2:H=[Je(Me),Je(qe),Je(nt),Je(yt),Bt[2]].join(" ");break;case 3:default:H=[$(Me),$(qe),$(nt),$(yt),Bt[2]].join(" ")}return H},Xi=C.__private__.getFilters=function(){return c},yr=C.__private__.putStream=function(x){var H=(x=x||{}).data||"",Me=x.filters||Xi(),qe=x.alreadyAppliedFilters||[],nt=x.addLength1||!1,yt=H.length,Bt=x.objectId,qt=function(ki){return ki};if(b!==null&&Bt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");b!==null&&(qt=Li.encryptor(Bt,0));var Wt={};Me===!0&&(Me=["FlateEncode"]);var nn=x.additionalKeyValues||[],pn=(Wt=mn.API.processDataByFilters!==void 0?mn.API.processDataByFilters(H,Me):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(qe)?qe.join(" "):qe.toString());if(Wt.data.length!==0&&(nn.push({key:"Length",value:Wt.data.length}),nt===!0&&nn.push({key:"Length1",value:yt})),pn.length!=0)if(pn.split("/").length-1==1)nn.push({key:"Filter",value:pn});else{nn.push({key:"Filter",value:"["+pn+"]"});for(var Bn=0;Bn<nn.length;Bn+=1)if(nn[Bn].key==="DecodeParms"){for(var ri=[],Rn=0;Rn<Wt.reverseChain.split("/").length-1;Rn+=1)ri.push("null");ri.push(nn[Bn].value),nn[Bn].value="["+ri.join(" ")+"]"}}le("<<");for(var $n=0;$n<nn.length;$n++)le("/"+nn[$n].key+" "+nn[$n].value);le(">>"),Wt.data.length!==0&&(le("stream"),le(qt(Wt.data)),le("endstream"))},hs=C.__private__.putPage=function(x){var H=x.number,Me=x.data,qe=x.objId,nt=x.contentsObjId;lr(qe,!0),le("<</Type /Page"),le("/Parent "+x.rootDictionaryObjId+" 0 R"),le("/Resources "+x.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(se(x.mediaBox.bottomLeftX))+" "+parseFloat(se(x.mediaBox.bottomLeftY))+" "+se(x.mediaBox.topRightX)+" "+se(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&le("/CropBox ["+se(x.cropBox.bottomLeftX)+" "+se(x.cropBox.bottomLeftY)+" "+se(x.cropBox.topRightX)+" "+se(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&le("/BleedBox ["+se(x.bleedBox.bottomLeftX)+" "+se(x.bleedBox.bottomLeftY)+" "+se(x.bleedBox.topRightX)+" "+se(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&le("/TrimBox ["+se(x.trimBox.bottomLeftX)+" "+se(x.trimBox.bottomLeftY)+" "+se(x.trimBox.topRightX)+" "+se(x.trimBox.topRightY)+"]"),x.artBox!==null&&le("/ArtBox ["+se(x.artBox.bottomLeftX)+" "+se(x.artBox.bottomLeftY)+" "+se(x.artBox.topRightX)+" "+se(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&le("/UserUnit "+x.userUnit),Jt.publish("putPage",{objId:qe,pageContext:cn[H],pageNumber:H,page:Me}),le("/Contents "+nt+" 0 R"),le(">>"),le("endobj");var yt=Me.join(`
`);return X===G.ADVANCED&&(yt+=`
Q`),lr(nt,!0),yr({data:yt,filters:Xi(),objectId:nt}),le("endobj"),qe},vo=C.__private__.putPages=function(){var x,H,Me=[];for(x=1;x<=Un;x++)cn[x].objId=Ut(),cn[x].contentsObjId=Ut();for(x=1;x<=Un;x++)Me.push(hs({number:x,data:rt[x],objId:cn[x].objId,contentsObjId:cn[x].contentsObjId,mediaBox:cn[x].mediaBox,cropBox:cn[x].cropBox,bleedBox:cn[x].bleedBox,trimBox:cn[x].trimBox,artBox:cn[x].artBox,userUnit:cn[x].userUnit,rootDictionaryObjId:Xr,resourceDictionaryObjId:Ar}));lr(Xr,!0),le("<</Type /Pages");var qe="/Kids [";for(H=0;H<Un;H++)qe+=Me[H]+" 0 R ";le(qe+"]"),le("/Count "+Un),le(">>"),le("endobj"),Jt.publish("postPutPages")},Uo=function(x){Jt.publish("putFont",{font:x,out:le,newObject:qn,putStream:yr}),x.isAlreadyPutted!==!0&&(x.objectNumber=qn(),le("<<"),le("/Type /Font"),le("/BaseFont /"+lu(x.postScriptName)),le("/Subtype /Type1"),typeof x.encoding=="string"&&le("/Encoding /"+x.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},qo=function(){for(var x in un)un.hasOwnProperty(x)&&(w===!1||w===!0&&E.hasOwnProperty(x))&&Uo(un[x])},Ms=function(x){x.objectNumber=qn();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[se(x.x),se(x.y),se(x.x+x.width),se(x.y+x.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var Me=x.pages[1].join(`
`);yr({data:Me,additionalKeyValues:H,objectId:x.objectNumber}),le("endobj")},Ws=function(){for(var x in li)li.hasOwnProperty(x)&&Ms(li[x])},_o=function(x,H){var Me,qe=[],nt=1/(H-1);for(Me=0;Me<1;Me+=nt)qe.push(Me);if(qe.push(1),x[0].offset!=0){var yt={offset:0,color:x[0].color};x.unshift(yt)}if(x[x.length-1].offset!=1){var Bt={offset:1,color:x[x.length-1].color};x.push(Bt)}for(var qt="",Wt=0,nn=0;nn<qe.length;nn++){for(Me=qe[nn];Me>x[Wt+1].offset;)Wt++;var pn=x[Wt].offset,Bn=(Me-pn)/(x[Wt+1].offset-pn),ri=x[Wt].color,Rn=x[Wt+1].color;qt+=_e(Math.round((1-Bn)*ri[0]+Bn*Rn[0]).toString(16))+_e(Math.round((1-Bn)*ri[1]+Bn*Rn[1]).toString(16))+_e(Math.round((1-Bn)*ri[2]+Bn*Rn[2]).toString(16))}return qt.trim()},vl=function(x,H){H||(H=21);var Me=qn(),qe=_o(x.colors,H),nt=[];nt.push({key:"FunctionType",value:"0"}),nt.push({key:"Domain",value:"[0.0 1.0]"}),nt.push({key:"Size",value:"["+H+"]"}),nt.push({key:"BitsPerSample",value:"8"}),nt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yr({data:qe,additionalKeyValues:nt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Me}),le("endobj"),x.objectNumber=qn(),le("<< /ShadingType "+x.type),le("/ColorSpace /DeviceRGB");var yt="/Coords ["+se(parseFloat(x.coords[0]))+" "+se(parseFloat(x.coords[1]))+" ";x.type===2?yt+=se(parseFloat(x.coords[2]))+" "+se(parseFloat(x.coords[3])):yt+=se(parseFloat(x.coords[2]))+" "+se(parseFloat(x.coords[3]))+" "+se(parseFloat(x.coords[4]))+" "+se(parseFloat(x.coords[5])),le(yt+="]"),x.matrix&&le("/Matrix ["+x.matrix.toString()+"]"),le("/Function "+Me+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},_l=function(x,H){var Me=Ut(),qe=qn();H.push({resourcesOid:Me,objectOid:qe}),x.objectNumber=qe;var nt=[];nt.push({key:"Type",value:"/Pattern"}),nt.push({key:"PatternType",value:"1"}),nt.push({key:"PaintType",value:"1"}),nt.push({key:"TilingType",value:"1"}),nt.push({key:"BBox",value:"["+x.boundingBox.map(se).join(" ")+"]"}),nt.push({key:"XStep",value:se(x.xStep)}),nt.push({key:"YStep",value:se(x.yStep)}),nt.push({key:"Resources",value:Me+" 0 R"}),x.matrix&&nt.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),yr({data:x.stream,additionalKeyValues:nt,objectId:x.objectNumber}),le("endobj")},$o=function(x){var H;for(H in zt)zt.hasOwnProperty(H)&&(zt[H]instanceof Tl?vl(zt[H]):zt[H]instanceof uu&&_l(zt[H],x))},za=function(x){for(var H in x.objectNumber=qn(),le("<<"),x)switch(H){case"opacity":le("/ca "+Je(x[H]));break;case"stroke-opacity":le("/CA "+Je(x[H]))}le(">>"),le("endobj")},yl=function(){var x;for(x in In)In.hasOwnProperty(x)&&za(In[x])},yo=function(){for(var x in le("/XObject <<"),li)li.hasOwnProperty(x)&&li[x].objectNumber>=0&&le("/"+x+" "+li[x].objectNumber+" 0 R");Jt.publish("putXobjectDict"),le(">>")},bo=function(){Li.oid=qn(),le("<<"),le("/Filter /Standard"),le("/V "+Li.v),le("/R "+Li.r),le("/U <"+Li.toHexString(Li.U)+">"),le("/O <"+Li.toHexString(Li.O)+">"),le("/P "+Li.P),le(">>"),le("endobj")},pa=function(){for(var x in le("/Font <<"),un)un.hasOwnProperty(x)&&(w===!1||w===!0&&E.hasOwnProperty(x))&&le("/"+x+" "+un[x].objectNumber+" 0 R");le(">>")},Ua=function(){if(Object.keys(zt).length>0){for(var x in le("/Shading <<"),zt)zt.hasOwnProperty(x)&&zt[x]instanceof Tl&&zt[x].objectNumber>=0&&le("/"+x+" "+zt[x].objectNumber+" 0 R");Jt.publish("putShadingPatternDict"),le(">>")}},br=function(x){if(Object.keys(zt).length>0){for(var H in le("/Pattern <<"),zt)zt.hasOwnProperty(H)&&zt[H]instanceof C.TilingPattern&&zt[H].objectNumber>=0&&zt[H].objectNumber<x&&le("/"+H+" "+zt[H].objectNumber+" 0 R");Jt.publish("putTilingPatternDict"),le(">>")}},On=function(){if(Object.keys(In).length>0){var x;for(x in le("/ExtGState <<"),In)In.hasOwnProperty(x)&&In[x].objectNumber>=0&&le("/"+x+" "+In[x].objectNumber+" 0 R");Jt.publish("putGStateDict"),le(">>")}},_n=function(x){lr(x.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),pa(),Ua(),br(x.objectOid),On(),yo(),le(">>"),le("endobj")},Zs=function(){var x=[];qo(),yl(),Ws(),$o(x),Jt.publish("putResources"),x.forEach(_n),_n({resourcesOid:Ar,objectOid:Number.MAX_SAFE_INTEGER}),Jt.publish("postPutResources")},Bs=function(){Jt.publish("putAdditionalObjects");for(var x=0;x<Ke.length;x++){var H=Ke[x];lr(H.objId,!0),le(H.content),le("endobj")}Jt.publish("postPutAdditionalObjects")},fs=function(x){xn[x.fontName]=xn[x.fontName]||{},xn[x.fontName][x.fontStyle]=x.id},wo=function(x,H,Me,qe,nt){var yt={id:"F"+(Object.keys(un).length+1).toString(10),postScriptName:x,fontName:H,fontStyle:Me,encoding:qe,isStandardFont:nt||!1,metadata:{}};return Jt.publish("addFont",{font:yt,instance:this}),un[yt.id]=yt,fs(yt),yt.id},bn=function(x){for(var H=0,Me=Qe.length;H<Me;H++){var qe=wo.call(this,x[H][0],x[H][1],x[H][2],Qe[H][3],!0);w===!1&&(E[qe]=!0);var nt=x[H][0].split("-");fs({id:qe,fontName:nt[0],fontStyle:nt[1]||""})}Jt.publish("addFonts",{fonts:un,dictionary:xn})},jn=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(qe){var H=qe.stack||"";~H.indexOf(" at ")&&(H=H.split(" at ")[1]);var Me="Error in function "+H.split(`
`)[0].split("<")[0]+": "+qe.message;if(!vn.console)throw new Error(Me);vn.console.error(Me,qe),vn.alert&&alert(Me)}},x.foo.bar=x,x.foo},Ks=function(x,H){var Me,qe,nt,yt,Bt,qt,Wt,nn,pn;if(nt=(H=H||{}).sourceEncoding||"Unicode",Bt=H.outputEncoding,(H.autoencode||Bt)&&un[Vt].metadata&&un[Vt].metadata[nt]&&un[Vt].metadata[nt].encoding&&(yt=un[Vt].metadata[nt].encoding,!Bt&&un[Vt].encoding&&(Bt=un[Vt].encoding),!Bt&&yt.codePages&&(Bt=yt.codePages[0]),typeof Bt=="string"&&(Bt=yt[Bt]),Bt)){for(Wt=!1,qt=[],Me=0,qe=x.length;Me<qe;Me++)(nn=Bt[x.charCodeAt(Me)])?qt.push(String.fromCharCode(nn)):qt.push(x[Me]),qt[Me].charCodeAt(0)>>8&&(Wt=!0);x=qt.join("")}for(Me=x.length;Wt===void 0&&Me!==0;)x.charCodeAt(Me-1)>>8&&(Wt=!0),Me--;if(!Wt)return x;for(qt=H.noBOM?[]:[254,255],Me=0,qe=x.length;Me<qe;Me++){if((pn=(nn=x.charCodeAt(Me))>>8)>>8)throw new Error("Character at position "+Me+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(pn),qt.push(nn-(pn<<8))}return String.fromCharCode.apply(void 0,qt)},Oi=C.__private__.pdfEscape=C.pdfEscape=function(x,H){return Ks(x,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$i=C.__private__.beginPage=function(x){rt[++Un]=[],cn[Un]={objId:0,contentsObjId:0,userUnit:Number(p),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ds(Un),De(rt[K])},qa=function(x,H){var Me,qe,nt;switch(n=H||n,typeof x=="string"&&(Me=F(x.toLowerCase()),Array.isArray(Me)&&(qe=Me[0],nt=Me[1])),Array.isArray(x)&&(qe=x[0]*Nt,nt=x[1]*Nt),isNaN(qe)&&(qe=o[0],nt=o[1]),(qe>14400||nt>14400)&&(oi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qe=Math.min(14400,qe),nt=Math.min(14400,nt)),o=[qe,nt],n.substr(0,1)){case"l":nt>qe&&(o=[nt,qe]);break;case"p":qe>nt&&(o=[nt,qe])}$i(o),ko(Zo),le(ur),Yo!==0&&le(Yo+" J"),Ci!==0&&le(Ci+" j"),Jt.publish("addPage",{pageNumber:Un})},Vo=function(x){x>0&&x<=Un&&(rt.splice(x,1),cn.splice(x,1),Un--,K>Un&&(K=Un),this.setPage(K))},ds=function(x){x>0&&x<=Un&&(K=x)},ui=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return rt.length-1},ps=function(x,H,Me){var qe,nt=void 0;return Me=Me||{},x=x!==void 0?x:un[Vt].fontName,H=H!==void 0?H:un[Vt].fontStyle,qe=x.toLowerCase(),xn[qe]!==void 0&&xn[qe][H]!==void 0?nt=xn[qe][H]:xn[x]!==void 0&&xn[x][H]!==void 0?nt=xn[x][H]:Me.disableWarning===!1&&oi.warn("Unable to look up font label for font '"+x+"', '"+H+"'. Refer to getFontList() for available fonts."),nt||Me.noFallback||(nt=xn.times[H])==null&&(nt=xn.times.normal),nt},xo=C.__private__.putInfo=function(){var x=qn(),H=function(qe){return qe};for(var Me in b!==null&&(H=Li.encryptor(x,0)),le("<<"),le("/Producer ("+Oi(H("jsPDF "+mn.version))+")"),jt)jt.hasOwnProperty(Me)&&jt[Me]&&le("/"+Me.substr(0,1).toUpperCase()+Me.substr(1)+" ("+Oi(H(jt[Me]))+")");le("/CreationDate ("+Oi(H(Z))+")"),le(">>"),le("endobj")},Ts=C.__private__.putCatalog=function(x){var H=(x=x||{}).rootDictionaryObjId||Xr;switch(qn(),le("<<"),le("/Type /Catalog"),le("/Pages "+H+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Me=""+Oe;Me.substr(Me.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&le("/OpenAction [3 0 R /XYZ null null "+Je(Oe)+"]")}switch(ze||(ze="continuous"),ze){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}vt&&le("/PageMode /"+vt),Jt.publish("putCatalog"),le(">>"),le("endobj")},ma=C.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(Le+1)),le("/Root "+Le+" 0 R"),le("/Info "+(Le-1)+" 0 R"),b!==null&&le("/Encrypt "+Li.oid+" 0 R"),le("/ID [ <"+ee+"> <"+ee+"> ]"),le(">>")},Js=C.__private__.putHeader=function(){le("%PDF-"+R),le("%ºß¬à")},ga=C.__private__.putXRef=function(){var x="0000000000";le("xref"),le("0 "+(Le+1)),le("0000000000 65535 f ");for(var H=1;H<=Le;H++)typeof de[H]=="function"?le((x+de[H]()).slice(-10)+" 00000 n "):de[H]!==void 0?le((x+de[H]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},Qr=C.__private__.buildDocument=function(){Re(),De(Se),Jt.publish("buildDocument"),Js(),vo(),Bs(),Zs(),b!==null&&bo(),xo(),Ts();var x=Ae;return ga(),ma(),le("startxref"),le(""+x),le("%%EOF"),De(rt[K]),Se.join(`
`)},Ns=C.__private__.getBlob=function(x){return new Blob([st(x)],{type:"application/pdf"})},Ys=C.output=C.__private__.output=jn(function(x,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",x){case void 0:return Qr();case"save":C.save(H.filename);break;case"arraybuffer":return st(Qr());case"blob":return Ns(Qr());case"bloburi":case"bloburl":if(vn.URL!==void 0&&typeof vn.URL.createObjectURL=="function")return vn.URL&&vn.URL.createObjectURL(Ns(Qr()))||void 0;oi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Me="",qe=Qr();try{Me=Zf(qe)}catch{Me=Zf(unescape(encodeURIComponent(qe)))}return"data:application/pdf;filename="+H.filename+";base64,"+Me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(vn)==="[object Window]"){var nt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(nt=H.pdfObjectUrl,yt="");var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+nt+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",qt=vn.open();return qt!==null&&qt.document.write(Bt),qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(vn)==="[object Window]"){var Wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',nn=vn.open();if(nn!==null){nn.document.write(Wt);var pn=this;nn.document.documentElement.querySelector("#pdfViewer").onload=function(){nn.document.title=H.filename,nn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(pn.output("bloburl"))}}return nn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(vn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',ri=vn.open();if(ri!==null&&(ri.document.write(Bn),ri.document.title=H.filename),ri||typeof safari>"u")return ri;break;case"datauri":case"dataurl":return vn.document.location.href=this.output("datauristring",H);default:return null}}),Go=function(x){return Array.isArray(Kt)===!0&&Kt.indexOf(x)>-1};switch(r){case"pt":Nt=1;break;case"mm":Nt=72/25.4;break;case"cm":Nt=72/2.54;break;case"in":Nt=72;break;case"px":Nt=Go("px_scaling")==1?.75:96/72;break;case"pc":case"em":Nt=12;break;case"ex":Nt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Nt=r}var Li=null;Ie(),V();var $a=function(x){return b!==null?Li.encryptor(x,0):function(H){return H}},Ho=C.__private__.getPageInfo=C.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:cn[x].objId,pageNumber:x,pageContext:cn[x]}},gn=C.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in cn)if(cn[H].objId===x)break;return Ho(H)},yn=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:cn[K].objId,pageNumber:K,pageContext:cn[K]}};C.addPage=function(){return qa.apply(this,arguments),this},C.setPage=function(){return ds.apply(this,arguments),De.call(this,rt[K]),this},C.insertPage=function(x){return this.addPage(),this.movePage(K,x),this},C.movePage=function(x,H){var Me,qe;if(x>H){Me=rt[x],qe=cn[x];for(var nt=x;nt>H;nt--)rt[nt]=rt[nt-1],cn[nt]=cn[nt-1];rt[H]=Me,cn[H]=qe,this.setPage(H)}else if(x<H){Me=rt[x],qe=cn[x];for(var yt=x;yt<H;yt++)rt[yt]=rt[yt+1],cn[yt]=cn[yt+1];rt[H]=Me,cn[H]=qe,this.setPage(H)}return this},C.deletePage=function(){return Vo.apply(this,arguments),this},C.__private__.text=C.text=function(x,H,Me,qe,nt){var yt,Bt,qt,Wt,nn,pn,Bn,ri,Rn,$n=(qe=qe||{}).scope||this;if(typeof x=="number"&&typeof H=="number"&&(typeof Me=="string"||Array.isArray(Me))){var ki=Me;Me=H,H=x,x=ki}if(arguments[3]instanceof an?(ue("The transform parameter of text() with a Matrix value"),Rn=nt):(qt=arguments[4],Wt=arguments[5],si(Bn=arguments[3])==="object"&&Bn!==null||(typeof qt=="string"&&(Wt=qt,qt=null),typeof Bn=="string"&&(Wt=Bn,Bn=null),typeof Bn=="number"&&(qt=Bn,Bn=null),qe={flags:Bn,angle:qt,align:Wt})),isNaN(H)||isNaN(Me)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return $n;var bi="",xr=!1,Xn=typeof qe.lineHeightFactor=="number"?qe.lineHeightFactor:Co,er=$n.internal.scaleFactor;function Ha(Wn){return Wn=Wn.split("	").join(Array(qe.TabLen||9).join(" ")),Oi(Wn,Bn)}function tr(Wn){for(var Vn,gi=Wn.concat(),Qn=[],ns=gi.length;ns--;)typeof(Vn=gi.shift())=="string"?Qn.push(Vn):Array.isArray(Wn)&&(Vn.length===1||Vn[1]===void 0&&Vn[2]===void 0)?Qn.push(Vn[0]):Qn.push([Vn[0],Vn[1],Vn[2]]);return Qn}function Ca(Wn,Vn){var gi;if(typeof Wn=="string")gi=Vn(Wn)[0];else if(Array.isArray(Wn)){for(var Qn,ns,oo=Wn.concat(),bs=[],Za=oo.length;Za--;)typeof(Qn=oo.shift())=="string"?bs.push(Vn(Qn)[0]):Array.isArray(Qn)&&typeof Qn[0]=="string"&&(ns=Vn(Qn[0],Qn[1],Qn[2]),bs.push([ns[0],ns[1],ns[2]]));gi=bs}return gi}var es=!1,ka=!0;if(typeof x=="string")es=!0;else if(Array.isArray(x)){var Is=x.concat();Bt=[];for(var Rs,wi=Is.length;wi--;)(typeof(Rs=Is.shift())!="string"||Array.isArray(Rs)&&typeof Rs[0]!="string")&&(ka=!1);es=ka}if(es===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var ea=ot/$n.internal.scaleFactor,cr=ea*(Xn-1);switch(qe.baseline){case"bottom":Me-=cr;break;case"top":Me+=ea-cr;break;case"hanging":Me+=ea-2*cr;break;case"middle":Me+=ea/2-cr}if((pn=qe.maxWidth||0)>0&&(typeof x=="string"?x=$n.splitTextToSize(x,pn):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(Wn,Vn){return Wn.concat($n.splitTextToSize(Vn,pn))},[]))),yt={text:x,x:H,y:Me,options:qe,mutex:{pdfEscape:Oi,activeFontKey:Vt,fonts:un,activeFontSize:ot}},Jt.publish("preProcessText",yt),x=yt.text,qt=(qe=yt.options).angle,!(Rn instanceof an)&&qt&&typeof qt=="number"){qt*=Math.PI/180,qe.rotationDirection===0&&(qt=-qt),X===G.ADVANCED&&(qt=-qt);var nr=Math.cos(qt),ta=Math.sin(qt);Rn=new an(nr,ta,-ta,nr,0,0)}else qt&&qt instanceof an&&(Rn=qt);X!==G.ADVANCED||Rn||(Rn=cs),(nn=qe.charSpace||Jo)!==void 0&&(bi+=se(J(nn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ri=qe.horizontalScale)!==void 0&&(bi+=se(100*ri)+` Tz
`),qe.lang;var Vi=-1,Fs=qe.renderingMode!==void 0?qe.renderingMode:qe.stroke,Lr=$n.internal.getCurrentPageInfo().pageContext;switch(Fs){case 0:case!1:case"fill":Vi=0;break;case 1:case!0:case"stroke":Vi=1;break;case 2:case"fillThenStroke":Vi=2;break;case 3:case"invisible":Vi=3;break;case 4:case"fillAndAddForClipping":Vi=4;break;case 5:case"strokeAndAddPathForClipping":Vi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vi=6;break;case 7:case"addToPathForClipping":Vi=7}var Wa=Lr.usedRenderingMode!==void 0?Lr.usedRenderingMode:-1;Vi!==-1?bi+=Vi+` Tr
`:Wa!==-1&&(bi+=`0 Tr
`),Vi!==-1&&(Lr.usedRenderingMode=Vi),Wt=qe.align||"left";var Pi,gs=ot*Xn,Or=$n.internal.pageSize.getWidth(),Ao=un[Vt];nn=qe.charSpace||Jo,pn=qe.maxWidth||0,Bn=Object.assign({autoencode:!0,noBOM:!0},qe.flags);var js=[],vs=function(Wn){return $n.getStringUnitWidth(Wn,{font:Ao,charSpace:nn,fontSize:ot,doKerning:!1})*ot/er};if(Object.prototype.toString.call(x)==="[object Array]"){var Ii;Bt=tr(x),Wt!=="left"&&(Pi=Bt.map(vs));var Bi,ts=0;if(Wt==="right"){H-=Pi[0],x=[],wi=Bt.length;for(var hr=0;hr<wi;hr++)hr===0?(Bi=sn(H),Ii=Qi(Me)):(Bi=J(ts-Pi[hr]),Ii=-gs),x.push([Bt[hr],Bi,Ii]),ts=Pi[hr]}else if(Wt==="center"){H-=Pi[0]/2,x=[],wi=Bt.length;for(var Ir=0;Ir<wi;Ir++)Ir===0?(Bi=sn(H),Ii=Qi(Me)):(Bi=J((ts-Pi[Ir])/2),Ii=-gs),x.push([Bt[Ir],Bi,Ii]),ts=Pi[Ir]}else if(Wt==="left"){x=[],wi=Bt.length;for(var zs=0;zs<wi;zs++)x.push(Bt[zs])}else if(Wt==="justify"&&Ao.encoding==="Identity-H"){x=[],wi=Bt.length,pn=pn!==0?pn:Or;for(var Rr=0,ci=0;ci<wi;ci++)if(Ii=ci===0?Qi(Me):-gs,Bi=ci===0?sn(H):Rr,ci<wi-1){var _s=J((pn-Pi[ci])/(Bt[ci].split(" ").length-1)),ir=Bt[ci].split(" ");x.push([ir[0]+" ",Bi,Ii]),Rr=0;for(var Gi=1;Gi<ir.length;Gi++){var Mo=(vs(ir[Gi-1]+" "+ir[Gi])-vs(ir[Gi]))*er+_s;Gi==ir.length-1?x.push([ir[Gi],Mo,0]):x.push([ir[Gi]+" ",Mo,0]),Rr-=Mo}}else x.push([Bt[ci],Bi,Ii]);x.push(["",Rr,0])}else{if(Wt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],wi=Bt.length,pn=pn!==0?pn:Or,ci=0;ci<wi;ci++)Ii=ci===0?Qi(Me):-gs,Bi=ci===0?sn(H):0,ci<wi-1?js.push(se(J((pn-Pi[ci])/(Bt[ci].split(" ").length-1)))):js.push(0),x.push([Bt[ci],Bi,Ii])}}var Pa=typeof qe.R2L=="boolean"?qe.R2L:it;Pa===!0&&(x=Ca(x,function(Wn,Vn,gi){return[Wn.split("").reverse().join(""),Vn,gi]})),yt={text:x,x:H,y:Me,options:qe,mutex:{pdfEscape:Oi,activeFontKey:Vt,fonts:un,activeFontSize:ot}},Jt.publish("postProcessText",yt),x=yt.text,xr=yt.mutex.isHex||!1;var Sa=un[Vt].encoding;Sa!=="WinAnsiEncoding"&&Sa!=="StandardEncoding"||(x=Ca(x,function(Wn,Vn,gi){return[Ha(Wn),Vn,gi]})),Bt=tr(x),x=[];for(var Hi,fr,io,ys=0,na=1,ro=Array.isArray(Bt[0])?na:ys,so="",Us=function(Wn,Vn,gi){var Qn="";return gi instanceof an?(gi=typeof qe.angle=="number"?Yr(gi,new an(1,0,0,1,Wn,Vn)):Yr(new an(1,0,0,1,Wn,Vn),gi),X===G.ADVANCED&&(gi=Yr(new an(1,0,0,-1,0,0),gi)),Qn=gi.join(" ")+` Tm
`):Qn=se(Wn)+" "+se(Vn)+` Td
`,Qn},Fr=0;Fr<Bt.length;Fr++){switch(so="",ro){case na:io=(xr?"<":"(")+Bt[Fr][0]+(xr?">":")"),Hi=parseFloat(Bt[Fr][1]),fr=parseFloat(Bt[Fr][2]);break;case ys:io=(xr?"<":"(")+Bt[Fr]+(xr?">":")"),Hi=sn(H),fr=Qi(Me)}js!==void 0&&js[Fr]!==void 0&&(so=js[Fr]+` Tw
`),Fr===0?x.push(so+Us(Hi,fr,Rn)+io):ro===ys?x.push(so+io):ro===na&&x.push(so+Us(Hi,fr,Rn)+io)}x=ro===ys?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Ri=`BT
/`;return Ri+=Vt+" "+ot+` Tf
`,Ri+=se(ot*Xn)+` TL
`,Ri+=ms+`
`,Ri+=bi,Ri+=x,le(Ri+="ET"),E[Vt]=!0,$n};var Br=C.__private__.clip=C.clip=function(x){return le(x==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return Br("evenodd")},C.__private__.discardPath=C.discardPath=function(){return le("n"),this};var Nn=C.__private__.isValidStyle=function(x){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(H=!0),H};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(x){return Nn(x)&&(y=x),this};var va=C.__private__.getStyle=C.getStyle=function(x){var H=y;switch(x){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=x}return H},Wo=C.close=function(){return le("h"),this};C.stroke=function(){return le("S"),this},C.fill=function(x){return Xs("f",x),this},C.fillEvenOdd=function(x){return Xs("f*",x),this},C.fillStroke=function(x){return Xs("B",x),this},C.fillStrokeEvenOdd=function(x){return Xs("B*",x),this};var Xs=function(x,H){si(H)==="object"?_a(H,x):le(x)},Tr=function(x){x===null||X===G.ADVANCED&&x===void 0||(x=va(x),le(x))};function Ds(x,H,Me,qe,nt){var yt=new uu(H||this.boundingBox,Me||this.xStep,qe||this.yStep,this.gState,nt||this.matrix);yt.stream=this.stream;var Bt=x+"$$"+this.cloneIndex+++"$$";return ar(Bt,yt),yt}var _a=function(x,H){var Me=Pr[x.key],qe=zt[Me];if(qe instanceof Tl)le("q"),le(Lo(H)),qe.gState&&C.setGState(qe.gState),le(x.matrix.toString()+" cm"),le("/"+Me+" sh"),le("Q");else if(qe instanceof uu){var nt=new an(1,0,0,-1,0,no());x.matrix&&(nt=nt.multiply(x.matrix||cs),Me=Ds.call(qe,x.key,x.boundingBox,x.xStep,x.yStep,nt).id),le("q"),le("/Pattern cs"),le("/"+Me+" scn"),qe.gState&&C.setGState(qe.gState),le(H),le("Q")}},Lo=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},pi=C.moveTo=function(x,H){return le(se(J(x))+" "+se(te(H))+" m"),this},wr=C.lineTo=function(x,H){return le(se(J(x))+" "+se(te(H))+" l"),this},Os=C.curveTo=function(x,H,Me,qe,nt,yt){return le([se(J(x)),se(te(H)),se(J(Me)),se(te(qe)),se(J(nt)),se(te(yt)),"c"].join(" ")),this};C.__private__.line=C.line=function(x,H,Me,qe,nt){if(isNaN(x)||isNaN(H)||isNaN(Me)||isNaN(qe)||!Nn(nt))throw new Error("Invalid arguments passed to jsPDF.line");return X===G.COMPAT?this.lines([[Me-x,qe-H]],x,H,[1,1],nt||"S"):this.lines([[Me-x,qe-H]],x,H,[1,1]).stroke()},C.__private__.lines=C.lines=function(x,H,Me,qe,nt,yt){var Bt,qt,Wt,nn,pn,Bn,ri,Rn,$n,ki,bi,xr;if(typeof x=="number"&&(xr=Me,Me=H,H=x,x=xr),qe=qe||[1,1],yt=yt||!1,isNaN(H)||isNaN(Me)||!Array.isArray(x)||!Array.isArray(qe)||!Nn(nt)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(pi(H,Me),Bt=qe[0],qt=qe[1],nn=x.length,ki=H,bi=Me,Wt=0;Wt<nn;Wt++)(pn=x[Wt]).length===2?(ki=pn[0]*Bt+ki,bi=pn[1]*qt+bi,wr(ki,bi)):(Bn=pn[0]*Bt+ki,ri=pn[1]*qt+bi,Rn=pn[2]*Bt+ki,$n=pn[3]*qt+bi,ki=pn[4]*Bt+ki,bi=pn[5]*qt+bi,Os(Bn,ri,Rn,$n,ki,bi));return yt&&Wo(),Tr(nt),this},C.path=function(x){for(var H=0;H<x.length;H++){var Me=x[H],qe=Me.c;switch(Me.op){case"m":pi(qe[0],qe[1]);break;case"l":wr(qe[0],qe[1]);break;case"c":Os.apply(this,qe);break;case"h":Wo()}}return this},C.__private__.rect=C.rect=function(x,H,Me,qe,nt){if(isNaN(x)||isNaN(H)||isNaN(Me)||isNaN(qe)||!Nn(nt))throw new Error("Invalid arguments passed to jsPDF.rect");return X===G.COMPAT&&(qe=-qe),le([se(J(x)),se(te(H)),se(J(Me)),se(J(qe)),"re"].join(" ")),Tr(nt),this},C.__private__.triangle=C.triangle=function(x,H,Me,qe,nt,yt,Bt){if(isNaN(x)||isNaN(H)||isNaN(Me)||isNaN(qe)||isNaN(nt)||isNaN(yt)||!Nn(Bt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Me-x,qe-H],[nt-Me,yt-qe],[x-nt,H-yt]],x,H,[1,1],Bt,!0),this},C.__private__.roundedRect=C.roundedRect=function(x,H,Me,qe,nt,yt,Bt){if(isNaN(x)||isNaN(H)||isNaN(Me)||isNaN(qe)||isNaN(nt)||isNaN(yt)||!Nn(Bt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qt=4/3*(Math.SQRT2-1);return nt=Math.min(nt,.5*Me),yt=Math.min(yt,.5*qe),this.lines([[Me-2*nt,0],[nt*qt,0,nt,yt-yt*qt,nt,yt],[0,qe-2*yt],[0,yt*qt,-nt*qt,yt,-nt,yt],[2*nt-Me,0],[-nt*qt,0,-nt,-yt*qt,-nt,-yt],[0,2*yt-qe],[0,-yt*qt,nt*qt,-yt,nt,-yt]],x+nt,H,[1,1],Bt,!0),this},C.__private__.ellipse=C.ellipse=function(x,H,Me,qe,nt){if(isNaN(x)||isNaN(H)||isNaN(Me)||isNaN(qe)||!Nn(nt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*Me,Bt=4/3*(Math.SQRT2-1)*qe;return pi(x+Me,H),Os(x+Me,H-Bt,x+yt,H-qe,x,H-qe),Os(x-yt,H-qe,x-Me,H-Bt,x-Me,H),Os(x-Me,H+Bt,x-yt,H+qe,x,H+qe),Os(x+yt,H+qe,x+Me,H+Bt,x+Me,H),Tr(nt),this},C.__private__.circle=C.circle=function(x,H,Me,qe){if(isNaN(x)||isNaN(H)||isNaN(Me)||!Nn(qe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,H,Me,Me,qe)},C.setFont=function(x,H,Me){return Me&&(H=we(H,Me)),Vt=ps(x,H,{disableWarning:!1}),this};var Va=C.__private__.getFont=C.getFont=function(){return un[ps.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var x,H,Me={};for(x in xn)if(xn.hasOwnProperty(x))for(H in Me[x]=[],xn[x])xn[x].hasOwnProperty(H)&&Me[x].push(H);return Me},C.addFont=function(x,H,Me,qe,nt){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?nt=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(Me=we(Me,qe)),nt=nt||"Identity-H",wo.call(this,x,H,Me,nt)};var Co,Zo=e.lineWidth||.200025,Qs=C.__private__.getLineWidth=C.getLineWidth=function(){return Zo},ko=C.__private__.setLineWidth=C.setLineWidth=function(x){return Zo=x,le(se(J(x))+" w"),this};C.__private__.setLineDash=mn.API.setLineDash=mn.API.setLineDashPattern=function(x,H){if(x=x||[],H=H||0,isNaN(H)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(Me){return se(J(Me))}).join(" "),H=se(J(H)),le("["+x+"] "+H+" d"),this};var ya=C.__private__.getLineHeight=C.getLineHeight=function(){return ot*Co};C.__private__.getLineHeight=C.getLineHeight=function(){return ot*Co};var Mn=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Co=x),this},ba=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return Co};Mn(e.lineHeight);var sn=C.__private__.getHorizontalCoordinate=function(x){return J(x)},Qi=C.__private__.getVerticalCoordinate=function(x){return X===G.ADVANCED?x:cn[K].mediaBox.topRightY-cn[K].mediaBox.bottomLeftY-J(x)},Po=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(x){return se(sn(x))},eo=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(x){return se(Qi(x))},ur=e.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return _r(ur)},C.__private__.setStrokeColor=C.setDrawColor=function(x,H,Me,qe){return ur=Mr({ch1:x,ch2:H,ch3:Me,ch4:qe,pdfColorType:"draw",precision:2}),le(ur),this};var wa=e.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return _r(wa)},C.__private__.setFillColor=C.setFillColor=function(x,H,Me,qe){return wa=Mr({ch1:x,ch2:H,ch3:Me,ch4:qe,pdfColorType:"fill",precision:2}),le(wa),this};var ms=e.textColor||"0 g",Ko=C.__private__.getTextColor=C.getTextColor=function(){return _r(ms)};C.__private__.setTextColor=C.setTextColor=function(x,H,Me,qe){return ms=Mr({ch1:x,ch2:H,ch3:Me,ch4:qe,pdfColorType:"text",precision:3}),this};var Jo=e.charSpace,Nr=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(Jo||0)};C.__private__.setCharSpace=C.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jo=x,this};var Yo=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(x){var H=C.CapJoinStyles[x];if(H===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yo=H,le(H+" J"),this};var Ci=0;C.__private__.setLineJoin=C.setLineJoin=function(x){var H=C.CapJoinStyles[x];if(H===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ci=H,le(H+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(se(J(x))+" M"),this},C.GState=sh,C.setGState=function(x){(x=typeof x=="string"?In[xi[x]]:Ga(null,x)).equals(Di)||(le("/"+x.id+" gs"),Di=x)};var Ga=function(x,H){if(!x||!xi[x]){var Me=!1;for(var qe in In)if(In.hasOwnProperty(qe)&&In[qe].equals(H)){Me=!0;break}if(Me)H=In[qe];else{var nt="GS"+(Object.keys(In).length+1).toString(10);In[nt]=H,H.id=nt}return x&&(xi[x]=H.id),Jt.publish("addGState",H),H}};C.addGState=function(x,H){return Ga(x,H),this},C.saveGraphicsState=function(){return le("q"),Yn.push({key:Vt,size:ot,color:ms}),this},C.restoreGraphicsState=function(){le("Q");var x=Yn.pop();return Vt=x.key,ot=x.size,ms=x.color,Di=null,this},C.setCurrentTransformationMatrix=function(x){return le(x.toString()+" cm"),this},C.comment=function(x){return le("#"+x),this};var So=function(x,H){var Me=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Me},set:function(yt){isNaN(yt)||(Me=parseFloat(yt))}});var qe=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qe},set:function(yt){isNaN(yt)||(qe=parseFloat(yt))}});var nt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return nt},set:function(yt){nt=yt.toString()}}),this},Dr=function(x,H,Me,qe){So.call(this,x,H),this.type="rect";var nt=Me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return nt},set:function(Bt){isNaN(Bt)||(nt=parseFloat(Bt))}});var yt=qe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Bt){isNaN(Bt)||(yt=parseFloat(Bt))}}),this},Xo=function(){this.page=Un,this.currentPage=K,this.pages=rt.slice(0),this.pagesContext=cn.slice(0),this.x=Pn,this.y=en,this.matrix=Jn,this.width=to(K),this.height=no(K),this.outputDestination=ce,this.id="",this.objectNumber=-1};Xo.prototype.restore=function(){Un=this.page,K=this.currentPage,cn=this.pagesContext,rt=this.pages,Pn=this.x,en=this.y,Jn=this.matrix,Eo(K,this.width),mi(K,this.height),ce=this.outputDestination};var xa=function(x,H,Me,qe,nt){Er.push(new Xo),Un=K=0,rt=[],Pn=x,en=H,Jn=nt,$i([Me,qe])},La=function(x){if(Sr[x])Er.pop().restore();else{var H=new Xo,Me="Xo"+(Object.keys(li).length+1).toString(10);H.id=Me,Sr[x]=Me,li[Me]=H,Jt.publish("addFormObject",H),Er.pop().restore()}};for(var Qo in C.beginFormObject=function(x,H,Me,qe,nt){return xa(x,H,Me,qe,nt),this},C.endFormObject=function(x){return La(x),this},C.doFormObject=function(x,H){var Me=li[Sr[x]];return le("q"),le(H.toString()+" cm"),le("/"+Me.id+" Do"),le("Q"),this},C.getFormObject=function(x){var H=li[Sr[x]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},C.save=function(x,H){return x=x||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Ml(Ns(Qr()),x),typeof Ml.unload=="function"&&vn.setTimeout&&setTimeout(Ml.unload,911),this):new Promise(function(Me,qe){try{var nt=Ml(Ns(Qr()),x);typeof Ml.unload=="function"&&vn.setTimeout&&setTimeout(Ml.unload,911),Me(nt)}catch(yt){qe(yt.message)}})},mn.API)mn.API.hasOwnProperty(Qo)&&(Qo==="events"&&mn.API.events.length?function(x,H){var Me,qe,nt;for(nt=H.length-1;nt!==-1;nt--)Me=H[nt][0],qe=H[nt][1],x.subscribe.apply(x,[Me].concat(typeof qe=="function"?[qe]:qe))}(Jt,mn.API.events):C[Qo]=mn.API[Qo]);var to=C.getPageWidth=function(x){return(cn[x=x||K].mediaBox.topRightX-cn[x].mediaBox.bottomLeftX)/Nt},Eo=C.setPageWidth=function(x,H){cn[x].mediaBox.topRightX=H*Nt+cn[x].mediaBox.bottomLeftX},no=C.getPageHeight=function(x){return(cn[x=x||K].mediaBox.topRightY-cn[x].mediaBox.bottomLeftY)/Nt},mi=C.setPageHeight=function(x,H){cn[x].mediaBox.topRightY=H*Nt+cn[x].mediaBox.bottomLeftY};return C.internal={pdfEscape:Oi,getStyle:va,getFont:Va,getFontSize:xe,getCharSpace:Nr,getTextColor:Ko,getLineHeight:ya,getLineHeightFactor:ba,getLineWidth:Qs,write:Ve,getHorizontalCoordinate:sn,getVerticalCoordinate:Qi,getCoordinateString:Po,getVerticalCoordinateString:eo,collections:{},newObject:qn,newAdditionalObject:go,newObjectDeferred:Ut,newObjectDeferredBegin:lr,getFilters:Xi,putStream:yr,events:Jt,scaleFactor:Nt,pageSize:{getWidth:function(){return to(K)},setWidth:function(x){Eo(K,x)},getHeight:function(){return no(K)},setHeight:function(x){mi(K,x)}},encryptionOptions:b,encryption:Li,getEncryptor:$a,output:Ys,getNumberOfPages:ui,pages:rt,out:le,f2:Je,f3:$,getPageInfo:Ho,getPageInfoByObjId:gn,getCurrentPageInfo:yn,getPDFVersion:O,Point:So,Rectangle:Dr,Matrix:an,hasHotfix:Go},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return to(K)},set:function(x){Eo(K,x)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return no(K)},set:function(x){mi(K,x)},enumerable:!0,configurable:!0}),bn.call(C,Qe),Vt="F1",qa(o,n),Jt.publish("initialized"),C}au.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},au.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},au.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},au.prototype.processOwnerPassword=function(e,t){return Jf(Kf(t).substr(0,5),e)},au.prototype.encryptor=function(e,t){var n=Kf(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return Jf(n,r)}},sh.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||si(e)!==si(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},mn.API={events:[]},mn.version="3.0.0";var Ti=mn.API,Pd=1,Gl=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nu=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ln=function(e){return e.toFixed(2)},rl=function(e){return e.toFixed(5)};Ti.__acroform__={};var As=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},w0=function(e){return e*Pd},sa=function(e){var t=new i1,n=Qt.internal.getHeight(e)||0,r=Qt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ln(r)),Number(Ln(n))],t},Jw=Ti.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Yw=Ti.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Xw=Ti.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Fi=Ti.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Xw(e,t-1)},ji=Ti.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Jw(e,t-1)},zi=Ti.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Yw(e,t-1)},Qw=Ti.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,o=e[0],l=e[1],c=e[2],p=e[3],m={};return m.lowerLeft_X=n(o)||0,m.lowerLeft_Y=r(l+p)||0,m.upperRight_X=n(o+c)||0,m.upperRight_Y=r(l)||0,[Number(Ln(m.lowerLeft_X)),Number(Ln(m.lowerLeft_Y)),Number(Ln(m.upperRight_X)),Number(Ln(m.upperRight_Y))]},ex=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Yf(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+Ln(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var l=sa(e);return l.scope=e.scope,l.stream=t.join(`
`),l}},Yf=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function($){return $.split(`
`)}):o.map(function($){return[$]});var l=n,c=Qt.internal.getHeight(e)||0;c=c<0?-c:c;var p=Qt.internal.getWidth(e)||0;p=p<0?-p:p;var m=function($,J,I){if($+1<o.length){var te=J+" "+o[$+1][0];return Ec(te,e,I).width<=p-4}return!1};l++;e:for(;l>0;){t="",l--;var y,b,w=Ec("3",e,l).height,E=e.multiline?c-l:(c-w)/2,C=E+=2,R=0,O=0,q=0;if(l<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ec(t,e,l=12).width+", FieldWidth:"+p+`
`;break}for(var F="",G=0,X=0;X<o.length;X++)if(o.hasOwnProperty(X)){var Ce=!1;if(o[X].length!==1&&q!==o[X].length-1){if((w+2)*(G+2)+2>c)continue e;F+=o[X][q],Ce=!0,O=X,X--}else{F=(F+=o[X][q]+" ").substr(F.length-1)==" "?F.substr(0,F.length-1):F;var Pe=parseInt(X),we=m(Pe,F,l),se=X>=o.length-1;if(we&&!se){F+=" ",q=0;continue}if(we||se){if(se)O=Pe;else if(e.multiline&&(w+2)*(G+2)+2>c)continue e}else{if(!e.multiline||(w+2)*(G+2)+2>c)continue e;O=Pe}}for(var ue="",Be=R;Be<=O;Be++){var Je=o[Be];if(e.multiline){if(Be===O){ue+=Je[q]+" ",q=(q+1)%Je.length;continue}if(Be===R){ue+=Je[Je.length-1]+" ";continue}}ue+=Je[0]+" "}switch(ue=ue.substr(ue.length-1)==" "?ue.substr(0,ue.length-1):ue,b=Ec(ue,e,l).width,e.textAlign){case"right":y=p-b-2;break;case"center":y=(p-b)/2;break;case"left":default:y=2}t+=Ln(y)+" "+Ln(C)+` Td
`,t+="("+Gl(ue)+`) Tj
`,t+=-Ln(y)+` 0 Td
`,C=-(l+2),b=0,R=Ce?O:O+1,G++,F=""}break}return r.text=t,r.fontSize=l,r},Ec=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},tx={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nx=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},ix=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,o=e[n];t.internal.newObjectDeferredBegin(o.objId,!0),si(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[r]}},rx=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(jo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(tx)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Pd=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new r1,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];l.objId=void 0,l.hasAnnotation&&nx(l,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,o){var l=!r;for(var c in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var p=r[c],m=[],y=p.Rect;if(p.Rect&&(p.Rect=Qw(p.Rect,o)),o.internal.newObjectDeferredBegin(p.objId,!0),p.DA=Qt.createDefaultAppearanceStream(p),si(p)==="object"&&typeof p.getKeyValueListForStream=="function"&&(m=p.getKeyValueListForStream()),p.Rect=y,p.hasAppearanceStream&&!p.appearanceStreamContent){var b=ex(p);m.push({key:"AP",value:"<</N "+b+">>"}),o.internal.acroformPlugin.xForms.push(b)}if(p.appearanceStreamContent){var w="";for(var E in p.appearanceStreamContent)if(p.appearanceStreamContent.hasOwnProperty(E)){var C=p.appearanceStreamContent[E];if(w+="/"+E+" ",w+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var c in C)if(C.hasOwnProperty(c)){var R=C[c];typeof R=="function"&&(R=R.call(o,p)),w+="/"+c+" "+R+" ",o.internal.acroformPlugin.xForms.indexOf(R)>=0||o.internal.acroformPlugin.xForms.push(R)}}else typeof(R=C)=="function"&&(R=R.call(o,p)),w+="/"+c+" "+R,o.internal.acroformPlugin.xForms.indexOf(R)>=0||o.internal.acroformPlugin.xForms.push(R);w+=">>"}m.push({key:"AP",value:`<<
`+w+">>"})}o.internal.putStream({additionalKeyValues:m,objectId:p.objId}),o.internal.out("endobj")}l&&ix(o.internal.acroformPlugin.xForms,o)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},n1=Ti.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(c){return c};if(Array.isArray(e)){for(var o="[",l=0;l<e.length;l++)switch(l!==0&&(o+=" "),si(e[l])){case"boolean":case"number":case"object":o+=e[l].toString();break;case"string":e[l].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),o+="("+Gl(r(e[l].toString()))+")"):o+=e[l].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},mf=function(e,t,n){var r=function(o){return o};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Gl(r(e))+")"},la=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};la.prototype.toString=function(){return this.objId+" 0 R"},la.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},la.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],o=this[r];o&&(Array.isArray(o)?e.push({key:r,value:n1(o,this.objId,this.scope)}):o instanceof la?(o.scope=this.scope,e.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:r,value:o}))}return e};var i1=function(){la.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};As(i1,la);var r1=function(){la.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Gl(n(e))+")"}},set:function(n){e=n}})};As(r1,la);var jo=function e(){la.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute F supplied.');t=F}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Fi(t,3)},set:function(F){F?this.F=ji(t,3):this.F=zi(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(F){if(isNaN(F))throw new Error('Invalid value "'+F+'" for attribute Ff supplied.');n=F}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(F){r=F!==void 0?F:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(F){r[0]=F}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(F){r[1]=F}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(F){r[2]=F}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(F){r[3]=F}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(F){switch(F){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=F;break;default:throw new Error('Invalid value "'+F+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof oh)return;l="FieldObject"+e.FieldNum++}var F=function(G){return G};return this.scope&&(F=this.scope.internal.getEncryptor(this.objId)),"("+Gl(F(l))+")"},set:function(F){l=F.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(F){l=F}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(F){c=F}});var p="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return p},set:function(F){p=F}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(F){m=F}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/Pd:y},set:function(F){y=F}});var b="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return b},set:function(F){b=F}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof oh||this instanceof jl))return mf(w,this.objId,this.scope)},set:function(F){F=F.toString(),w=F}});var E=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof vr?E:mf(E,this.objId,this.scope)},set:function(F){F=F.toString(),E=this instanceof vr?F:F.substr(0,1)==="("?nu(F.substr(1,F.length-2)):nu(F)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof vr?nu(E.substr(1,E.length-1)):E},set:function(F){F=F.toString(),E=this instanceof vr?"/"+F:F}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(F){this.V=F}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof vr?C:mf(C,this.objId,this.scope)},set:function(F){F=F.toString(),C=this instanceof vr?F:F.substr(0,1)==="("?nu(F.substr(1,F.length-2)):nu(F)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof vr?nu(C.substr(1,C.length-1)):C},set:function(F){F=F.toString(),C=this instanceof vr?"/"+F:F}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var R,O=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return O},set:function(F){F=!!F,O=F}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(R)return R},set:function(F){R=F}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,1)},set:function(F){F?this.Ff=ji(this.Ff,1):this.Ff=zi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,2)},set:function(F){F?this.Ff=ji(this.Ff,2):this.Ff=zi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,3)},set:function(F){F?this.Ff=ji(this.Ff,3):this.Ff=zi(this.Ff,3)}});var q=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(q!==null)return q},set:function(F){if([0,1,2].indexOf(F)===-1)throw new Error('Invalid value "'+F+'" for attribute Q supplied.');q=F}}),Object.defineProperty(this,"textAlign",{get:function(){var F;switch(q){case 0:default:F="left";break;case 1:F="center";break;case 2:F="right"}return F},configurable:!0,enumerable:!0,set:function(F){switch(F){case"right":case 2:q=2;break;case"center":case 1:q=1;break;case"left":case 0:default:q=0}}})};As(jo,la);var du=function(){jo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return n1(t,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=function(l,c,p){p||(p=1);for(var m,y=[];m=c.exec(l);)y.push(m[p]);return y}(r,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,18)},set:function(n){n?this.Ff=ji(this.Ff,18):this.Ff=zi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ji(this.Ff,19):this.Ff=zi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,20)},set:function(n){n?(this.Ff=ji(this.Ff,20),t.sort()):this.Ff=zi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,22)},set:function(n){n?this.Ff=ji(this.Ff,22):this.Ff=zi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,23)},set:function(n){n?this.Ff=ji(this.Ff,23):this.Ff=zi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,27)},set:function(n){n?this.Ff=ji(this.Ff,27):this.Ff=zi(this.Ff,27)}}),this.hasAppearanceStream=!1};As(du,jo);var pu=function(){du.call(this),this.fontName="helvetica",this.combo=!1};As(pu,du);var mu=function(){pu.call(this),this.combo=!0};As(mu,pu);var zc=function(){mu.call(this),this.edit=!0};As(zc,mu);var vr=function(){jo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,15)},set:function(n){n?this.Ff=ji(this.Ff,15):this.Ff=zi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,16)},set:function(n){n?this.Ff=ji(this.Ff,16):this.Ff=zi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,17)},set:function(n){n?this.Ff=ji(this.Ff,17):this.Ff=zi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,26)},set:function(n){n?this.Ff=ji(this.Ff,26):this.Ff=zi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,o=[];for(r in o.push("<<"),t)o.push("/"+r+" ("+Gl(n(t[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){si(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};As(vr,jo);var Uc=function(){vr.call(this),this.pushButton=!0};As(Uc,vr);var gu=function(){vr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};As(gu,vr);var oh=function(){var e,t;jo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(p){return p};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,c=[];for(l in c.push("<<"),r)c.push("/"+l+" ("+Gl(o(r[l]))+")");return c.push(">>"),c.join(`
`)},set:function(o){si(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};As(oh,jo),gu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},gu.prototype.createOption=function(e){var t=new oh;return t.Parent=this,t.optionName=e,this.Kids.push(t),sx.call(this.scope,t),t};var qc=function(){vr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qt.CheckBox.createAppearanceStream()};As(qc,vr);var jl=function(){jo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,13)},set:function(t){t?this.Ff=ji(this.Ff,13):this.Ff=zi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,21)},set:function(t){t?this.Ff=ji(this.Ff,21):this.Ff=zi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,23)},set:function(t){t?this.Ff=ji(this.Ff,23):this.Ff=zi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,24)},set:function(t){t?this.Ff=ji(this.Ff,24):this.Ff=zi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,25)},set:function(t){t?this.Ff=ji(this.Ff,25):this.Ff=zi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,26)},set:function(t){t?this.Ff=ji(this.Ff,26):this.Ff=zi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};As(jl,jo);var $c=function(){jl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Fi(this.Ff,14)},set:function(e){e?this.Ff=ji(this.Ff,14):this.Ff=zi(this.Ff,14)}}),this.password=!0};As($c,jl);var Qt={CheckBox:{createAppearanceStream:function(){return{N:{On:Qt.CheckBox.YesNormal},D:{On:Qt.CheckBox.YesPushDown,Off:Qt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),l=Yf(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Ln(Qt.internal.getWidth(e))+" "+Ln(Qt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Ln(l.fontSize)+" Tf "+o),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=sa(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),o=[],l=Qt.internal.getHeight(e),c=Qt.internal.getWidth(e),p=Yf(e,e.caption);return o.push("1 g"),o.push("0 0 "+Ln(c)+" "+Ln(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Ln(c-1)+" "+Ln(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Ln(p.fontSize)+" Tf "+r),o.push(p.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ln(Qt.internal.getWidth(e))+" "+Ln(Qt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Qt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Qt.RadioButton.Circle.YesNormal,t.D[e]=Qt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=Qt.internal.getWidth(e)<=Qt.internal.getHeight(e)?Qt.internal.getWidth(e)/4:Qt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Qt.internal.Bezier_C,l=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+rl(Qt.internal.getWidth(e)/2)+" "+rl(Qt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=Qt.internal.getWidth(e)<=Qt.internal.getHeight(e)?Qt.internal.getWidth(e)/4:Qt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*Qt.internal.Bezier_C).toFixed(5)),c=Number((r*Qt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+rl(Qt.internal.getWidth(e)/2)+" "+rl(Qt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+rl(Qt.internal.getWidth(e)/2)+" "+rl(Qt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),n.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),n.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),n.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=Qt.internal.getWidth(e)<=Qt.internal.getHeight(e)?Qt.internal.getWidth(e)/4:Qt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*Qt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+rl(Qt.internal.getWidth(e)/2)+" "+rl(Qt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Qt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Qt.RadioButton.Cross.YesNormal,t.D[e]=Qt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=sa(e);t.scope=e.scope;var n=[],r=Qt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Ln(Qt.internal.getWidth(e)-2)+" "+Ln(Qt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ln(r.x1.x)+" "+Ln(r.x1.y)+" m"),n.push(Ln(r.x2.x)+" "+Ln(r.x2.y)+" l"),n.push(Ln(r.x4.x)+" "+Ln(r.x4.y)+" m"),n.push(Ln(r.x3.x)+" "+Ln(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=Qt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ln(Qt.internal.getWidth(e))+" "+Ln(Qt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ln(Qt.internal.getWidth(e)-2)+" "+Ln(Qt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ln(n.x1.x)+" "+Ln(n.x1.y)+" m"),r.push(Ln(n.x2.x)+" "+Ln(n.x2.y)+" l"),r.push(Ln(n.x4.x)+" "+Ln(n.x4.y)+" m"),r.push(Ln(n.x3.x)+" "+Ln(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ln(Qt.internal.getWidth(e))+" "+Ln(Qt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Qt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Qt.internal.getWidth(e),n=Qt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Qt.internal.getWidth=function(e){var t=0;return si(e)==="object"&&(t=w0(e.Rect[2])),t},Qt.internal.getHeight=function(e){var t=0;return si(e)==="object"&&(t=w0(e.Rect[3])),t};var sx=Ti.addField=function(e){if(rx(this,e),!(e instanceof jo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ti.AcroFormChoiceField=du,Ti.AcroFormListBox=pu,Ti.AcroFormComboBox=mu,Ti.AcroFormEditBox=zc,Ti.AcroFormButton=vr,Ti.AcroFormPushButton=Uc,Ti.AcroFormRadioButton=gu,Ti.AcroFormCheckBox=qc,Ti.AcroFormTextField=jl,Ti.AcroFormPasswordField=$c,Ti.AcroFormAppearance=Qt,Ti.AcroForm={ChoiceField:du,ListBox:pu,ComboBox:mu,EditBox:zc,Button:vr,PushButton:Uc,RadioButton:gu,CheckBox:qc,TextField:jl,PasswordField:$c,Appearance:Qt},mn.AcroForm={ChoiceField:du,ListBox:pu,ComboBox:mu,EditBox:zc,Button:vr,PushButton:Uc,RadioButton:gu,CheckBox:qc,TextField:jl,PasswordField:$c,Appearance:Qt};mn.AcroForm;function s1(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function($,J){var I,te,Z,ee,ve,V=t;if((J=J||t)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(we($))for(ve in n)for(Z=n[ve],I=0;I<Z.length;I+=1){for(ee=!0,te=0;te<Z[I].length;te+=1)if(Z[I][te]!==void 0&&Z[I][te]!==$[te]){ee=!1;break}if(ee===!0){V=ve;break}}else for(ve in n)for(Z=n[ve],I=0;I<Z.length;I+=1){for(ee=!0,te=0;te<Z[I].length;te+=1)if(Z[I][te]!==void 0&&Z[I][te]!==$.charCodeAt(te)){ee=!1;break}if(ee===!0){V=ve;break}}return V===t&&J!==t&&(V=J),V},o=function $(J){for(var I=this.internal.write,te=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);J.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:J.width}),ee.push({key:"Height",value:J.height}),J.colorSpace===q.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(J.palette.length/3-1)+" "+("sMask"in J&&J.sMask!==void 0?J.objectId+2:J.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+J.colorSpace}),J.colorSpace===q.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:J.bitsPerComponent}),"decodeParameters"in J&&J.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+J.decodeParameters+">>"}),"transparency"in J&&Array.isArray(J.transparency)){for(var ve="",V=0,j=J.transparency.length;V<j;V++)ve+=J.transparency[V]+" "+J.transparency[V]+" ";ee.push({key:"Mask",value:"["+ve+"]"})}J.sMask!==void 0&&ee.push({key:"SMask",value:J.objectId+1+" 0 R"});var Y=J.filter!==void 0?["/"+J.filter]:void 0;if(te({data:J.data,additionalKeyValues:ee,alreadyAppliedFilters:Y,objectId:J.objectId}),I("endobj"),"sMask"in J&&J.sMask!==void 0){var Ie="/Predictor "+J.predictor+" /Colors 1 /BitsPerComponent "+J.bitsPerComponent+" /Columns "+J.width,D={width:J.width,height:J.height,colorSpace:"DeviceGray",bitsPerComponent:J.bitsPerComponent,decodeParameters:Ie,data:J.sMask};"filter"in J&&(D.filter=J.filter),$.call(this,D)}if(J.colorSpace===q.INDEXED){var K=this.internal.newObject();te({data:ue(new Uint8Array(J.palette)),objectId:K}),I("endobj")}},l=function(){var $=this.internal.collections.addImage_images;for(var J in $)o.call(this,$[J])},c=function(){var $,J=this.internal.collections.addImage_images,I=this.internal.write;for(var te in J)I("/I"+($=J[te]).index,$.objectId,"0","R")},p=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},m=function(){var $=this.internal.collections.addImage_images;return p.call(this),$},y=function(){return Object.keys(this.internal.collections.addImage_images).length},b=function($){return typeof e["process"+$.toUpperCase()]=="function"},w=function($){return si($)==="object"&&$.nodeType===1},E=function($,J){if($.nodeName==="IMG"&&$.hasAttribute("src")){var I=""+$.getAttribute("src");if(I.indexOf("data:image/")===0)return Ku(unescape(I).split("base64,").pop());var te=e.loadFile(I,!0);if(te!==void 0)return te}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var Z;switch(J){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return Ku($.toDataURL(Z,1).split("base64,").pop())}},C=function($){var J=this.internal.collections.addImage_images;if(J){for(var I in J)if($===J[I].alias)return J[I]}},R=function($,J,I){return $||J||($=-96,J=-96),$<0&&($=-1*I.width*72/$/this.internal.scaleFactor),J<0&&(J=-1*I.height*72/J/this.internal.scaleFactor),$===0&&($=J*I.width/I.height),J===0&&(J=$*I.height/I.width),[$,J]},O=function($,J,I,te,Z,ee){var ve=R.call(this,I,te,Z),V=this.internal.getCoordinateString,j=this.internal.getVerticalCoordinateString,Y=m.call(this);if(I=ve[0],te=ve[1],Y[Z.index]=Z,ee){ee*=Math.PI/180;var Ie=Math.cos(ee),D=Math.sin(ee),K=function(_e){return _e.toFixed(4)},he=[K(Ie),K(D),K(-1*D),K(Ie),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,V($),j(J+te),"cm"].join(" ")),this.internal.write(he.join(" ")),this.internal.write([V(I),"0","0",V(te),"0","0","cm"].join(" "))):this.internal.write([V(I),"0","0",V(te),V($),j(J+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},q=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},G=e.__addimage__.sHashCode=function($){var J,I,te=0;if(typeof $=="string")for(I=$.length,J=0;J<I;J++)te=(te<<5)-te+$.charCodeAt(J),te|=0;else if(we($))for(I=$.byteLength/2,J=0;J<I;J++)te=(te<<5)-te+$[J],te|=0;return te},X=e.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var J=!0;return $.length===0&&(J=!1),$.length%4!=0&&(J=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(J=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(J=!1),J},Ce=e.__addimage__.extractImageFromDataUrl=function($){var J=($=$||"").split("base64,"),I=null;if(J.length===2){var te=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(J[0]);Array.isArray(te)&&(I={mimeType:te[1],charset:te[2],data:J[1]})}return I},Pe=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function($){return Pe()&&$ instanceof ArrayBuffer};var we=e.__addimage__.isArrayBufferView=function($){return Pe()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},se=e.__addimage__.binaryStringToUint8Array=function($){for(var J=$.length,I=new Uint8Array(J),te=0;te<J;te++)I[te]=$.charCodeAt(te);return I},ue=e.__addimage__.arrayBufferToBinaryString=function($){for(var J="",I=we($)?$:new Uint8Array($),te=0;te<I.length;te+=8192)J+=String.fromCharCode.apply(null,I.subarray(te,te+8192));return J};e.addImage=function(){var $,J,I,te,Z,ee,ve,V,j;if(typeof arguments[1]=="number"?(J=t,I=arguments[1],te=arguments[2],Z=arguments[3],ee=arguments[4],ve=arguments[5],V=arguments[6],j=arguments[7]):(J=arguments[1],I=arguments[2],te=arguments[3],Z=arguments[4],ee=arguments[5],ve=arguments[6],V=arguments[7],j=arguments[8]),si($=arguments[0])==="object"&&!w($)&&"imageData"in $){var Y=$;$=Y.imageData,J=Y.format||J||t,I=Y.x||I||0,te=Y.y||te||0,Z=Y.w||Y.width||Z,ee=Y.h||Y.height||ee,ve=Y.alias||ve,V=Y.compression||V,j=Y.rotation||Y.angle||j}var Ie=this.internal.getFilters();if(V===void 0&&Ie.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(I)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var D=Be.call(this,$,J,ve,V);return O.call(this,I,te,Z,ee,D,j),this};var Be=function($,J,I,te){var Z,ee,ve;if(typeof $=="string"&&r($)===t){$=unescape($);var V=Je($,!1);(V!==""||(V=e.loadFile($,!0))!==void 0)&&($=V)}if(w($)&&($=E($,J)),J=r($,J),!b(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(((ve=I)==null||ve.length===0)&&(I=function(j){return typeof j=="string"||we(j)?G(j):we(j.data)?G(j.data):null}($)),(Z=C.call(this,I))||(Pe()&&($ instanceof Uint8Array||J==="RGBA"||(ee=$,$=se($))),Z=this["process"+J.toUpperCase()]($,y.call(this),I,function(j){return j&&typeof j=="string"&&(j=j.toUpperCase()),j in e.image_compression?j:F.NONE}(te),ee)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},Je=e.__addimage__.convertBase64ToBinaryString=function($,J){var I;J=typeof J!="boolean"||J;var te,Z="";if(typeof $=="string"){te=(I=Ce($))!==null?I.data:$;try{Z=Ku(te)}catch(ee){if(J)throw X(te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};e.getImageProperties=function($){var J,I,te="";if(w($)&&($=E($)),typeof $=="string"&&r($)===t&&((te=Je($,!1))===""&&(te=e.loadFile($)||""),$=te),I=r($),!b(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(!Pe()||$ instanceof Uint8Array||($=se($)),!(J=this["process"+I.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return J.fileType=I,J}})(mn.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};mn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,o,l,c=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(n.objId),y=n.pageContext.annotations,b=!1,w=0;w<y.length&&!b;w++)switch((r=y[w]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(b=!0);break;case"reference":case"text":case"freetext":b=!0}if(b!=0){this.internal.write("/Annots [");for(var E=0;E<y.length;E++){r=y[E];var C=this.internal.pdfEscape,R=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var O=this.internal.newAdditionalObject(),q=this.internal.newAdditionalObject(),F=this.internal.getEncryptor(O.objId),G=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+c(r.bounds.x)+" "+p(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+p(r.bounds.y)+"] ")+"/Contents ("+C(F(r.contents))+")",l+=" /Popup "+q.objId+" 0 R",l+=" /P "+m.objId+" 0 R",l+=" /T ("+C(F(G))+") >>",O.content=l;var X=O.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+c(r.bounds.x+30)+" "+p(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+p(r.bounds.y)+"] ")+" /Parent "+X,r.open&&(l+=" /Open true"),l+=" >>",q.content=l,this.internal.write(O.objId,"0 R",q.objId,"0 R");break;case"freetext":o="/Rect ["+c(r.bounds.x)+" "+p(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+p(r.bounds.y+r.bounds.h)+"] ";var Ce=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+C(R(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Ce+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var Pe=this.annotations._nameMap[r.options.name];r.options.pageNumber=Pe.page,r.options.top=Pe.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+C(R(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var we=p(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+we+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,o,l,c){var p=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;p.pageContext.annotations.push({finalBounds:{x:m(n),y:y(r),w:m(n+o),h:y(r+l)},options:c,type:"link"})},e.textWithLink=function(n,r,o,l){var c,p,m=this.getTextWidth(n),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){p=l.maxWidth;var b=this.splitTextToSize(n,p).length;c=Math.ceil(y*b)}else p=m,c=y;return this.text(n,r,o,l),o+=.2*y,l.align==="center"&&(r-=m/2),l.align==="right"&&(r-=m),this.link(r,o-y,p,c,l),m},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(mn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var l=e.__arabicParser__.isInArabicSubstitutionA=function(O){return t[O.charCodeAt(0)]!==void 0},c=e.__arabicParser__.isArabicLetter=function(O){return typeof O=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(O)},p=e.__arabicParser__.isArabicEndLetter=function(O){return c(O)&&l(O)&&t[O.charCodeAt(0)].length<=2},m=e.__arabicParser__.isArabicAlfLetter=function(O){return c(O)&&o.indexOf(O.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(O){return c(O)&&l(O)&&t[O.charCodeAt(0)].length>=1};var y=e.__arabicParser__.arabicLetterHasFinalForm=function(O){return c(O)&&l(O)&&t[O.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(O){return c(O)&&l(O)&&t[O.charCodeAt(0)].length>=3};var b=e.__arabicParser__.arabicLetterHasMedialForm=function(O){return c(O)&&l(O)&&t[O.charCodeAt(0)].length==4},w=e.__arabicParser__.resolveLigatures=function(O){var q=0,F=n,G="",X=0;for(q=0;q<O.length;q+=1)F[O.charCodeAt(q)]!==void 0?(X++,typeof(F=F[O.charCodeAt(q)])=="number"&&(G+=String.fromCharCode(F),F=n,X=0),q===O.length-1&&(F=n,G+=O.charAt(q-(X-1)),q-=X-1,X=0)):(F=n,G+=O.charAt(q-X),q-=X,X=0);return G};e.__arabicParser__.isArabicDiacritic=function(O){return O!==void 0&&r[O.charCodeAt(0)]!==void 0};var E=e.__arabicParser__.getCorrectForm=function(O,q,F){return c(O)?l(O)===!1?-1:!y(O)||!c(q)&&!c(F)||!c(F)&&p(q)||p(O)&&!c(q)||p(O)&&m(q)||p(O)&&p(q)?0:b(O)&&c(q)&&!p(q)&&c(F)&&y(F)?3:p(O)||!c(F)?1:2:-1},C=function(O){var q=0,F=0,G=0,X="",Ce="",Pe="",we=(O=O||"").split("\\s+"),se=[];for(q=0;q<we.length;q+=1){for(se.push(""),F=0;F<we[q].length;F+=1)X=we[q][F],Ce=we[q][F-1],Pe=we[q][F+1],c(X)?(G=E(X,Ce,Pe),se[q]+=G!==-1?String.fromCharCode(t[X.charCodeAt(0)][G]):X):se[q]+=X;se[q]=w(se[q])}return se.join(" ")},R=e.__arabicParser__.processArabic=e.processArabic=function(){var O,q=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,F=[];if(Array.isArray(q)){var G=0;for(F=[],G=0;G<q.length;G+=1)Array.isArray(q[G])?F.push([C(q[G][0]),q[G][1],q[G][2]]):F.push([C(q[G])]);O=F}else O=C(q);return typeof arguments[0]=="string"?O:(arguments[0].text=O,arguments[0])};e.events.push(["preProcessText",R])}(mn.API),mn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(p){n=p}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(p){r=isNaN(p)||Number.isInteger(p)===!1||p<0?150:p,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(p){o=isNaN(p)||Number.isInteger(p)===!1||p<0?300:p,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(p){l=p}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(p){c=p}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(mn.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(O){m=O}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(O){y=O}});var b=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return b},set:function(O){b=O}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(O){w=O}});var E=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return E},set:function(O){E=O}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(O){C=O}});var R=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return R},set:function(O){R=O}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(m){return r.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},e.getTextDimensions=function(m,y){r.call(this);var b=(y=y||{}).fontSize||this.getFontSize(),w=y.font||this.getFont(),E=y.scaleFactor||this.internal.scaleFactor,C=0,R=0,O=0,q=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var F=y.maxWidth;F>0?typeof m=="string"?m=this.splitTextToSize(m,F):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(X,Ce){return X.concat(q.splitTextToSize(Ce,F))},[])):m=Array.isArray(m)?m:[m];for(var G=0;G<m.length;G++)C<(O=this.getStringUnitWidth(m[G],{font:w})*b)&&(C=O);return C!==0&&(R=m.length),{w:C/=E,h:Math.max((R*b*this.getLineHeightFactor()-b*(this.getLineHeightFactor()-1))/E,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var m=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new l(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=e.cell=function(){var m;m=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var y=this.internal.__cell__.lastCell,b=this.internal.__cell__.padding,w=this.internal.__cell__.margins||t,E=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===m.lineNumber?(m.x=(y.x||0)+(y.width||0),m.y=y.y||0):y.y+y.height+m.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=w.top,C&&E&&(this.printHeaderRow(m.lineNumber,!0),m.y+=E[0].height)):m.y=y.y+y.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,n===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-b,m.y+b,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+b,{align:"center",baseline:"top",maxWidth:m.width-b-b}):this.text(m.text,m.x+b,m.y+b,{align:"left",baseline:"top",maxWidth:m.width-b-b})),this.internal.__cell__.lastCell=m,this};e.table=function(m,y,b,w,E){if(r.call(this),!b)throw new Error("No data for PDF table.");var C,R,O,q,F=[],G=[],X=[],Ce={},Pe={},we=[],se=[],ue=(E=E||{}).autoSize||!1,Be=E.printHeaders!==!1,Je=E.css&&E.css["font-size"]!==void 0?16*E.css["font-size"]:E.fontSize||12,$=E.margins||Object.assign({width:this.getPageWidth()},t),J=typeof E.padding=="number"?E.padding:3,I=E.headerBackgroundColor||"#c8c8c8",te=E.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Be,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=Je,this.internal.__cell__.padding=J,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=te,this.setFontSize(Je),w==null)G=F=Object.keys(b[0]),X=F.map(function(){return"left"});else if(Array.isArray(w)&&si(w[0])==="object")for(F=w.map(function(Y){return Y.name}),G=w.map(function(Y){return Y.prompt||Y.name||""}),X=w.map(function(Y){return Y.align||"left"}),C=0;C<w.length;C+=1)Pe[w[C].name]=w[C].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(G=F=w,X=F.map(function(){return"left"}));if(ue||Array.isArray(w)&&typeof w[0]=="string")for(C=0;C<F.length;C+=1){for(Ce[q=F[C]]=b.map(function(Y){return Y[q]}),this.setFont(void 0,"bold"),we.push(this.getTextDimensions(G[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),R=Ce[q],this.setFont(void 0,"normal"),O=0;O<R.length;O+=1)we.push(this.getTextDimensions(R[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Pe[q]=Math.max.apply(null,we)+J+J,we=[]}if(Be){var Z={};for(C=0;C<F.length;C+=1)Z[F[C]]={},Z[F[C]].text=G[C],Z[F[C]].align=X[C];var ee=p.call(this,Z,Pe);se=F.map(function(Y){return new l(m,y,Pe[Y],ee,Z[Y].text,void 0,Z[Y].align)}),this.setTableHeaderRow(se),this.printHeaderRow(1,!1)}var ve=w.reduce(function(Y,Ie){return Y[Ie.name]=Ie.align,Y},{});for(C=0;C<b.length;C+=1){"rowStart"in E&&E.rowStart instanceof Function&&E.rowStart({row:C,data:b[C]},this);var V=p.call(this,b[C],Pe);for(O=0;O<F.length;O+=1){var j=b[C][F[O]];"cellStart"in E&&E.cellStart instanceof Function&&E.cellStart({row:C,col:O,data:j},this),c.call(this,new l(m,y,Pe[F[O]],V,j,C+2,ve[F[O]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=y,this};var p=function(m,y){var b=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,E=this.internal.scaleFactor;return Object.keys(m).map(function(C){var R=m[C];return this.splitTextToSize(R.hasOwnProperty("text")?R.text:R,y[C]-b-b)},this).map(function(C){return this.getLineHeightFactor()*C.length*w/E+b+b},this).reduce(function(C,R){return Math.max(C,R)},0)};e.setTableHeaderRow=function(m){r.call(this),this.internal.__cell__.tableHeaderRow=m},e.printHeaderRow=function(m,y){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var b;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var E=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){b=this.internal.__cell__.tableHeaderRow[C].clone(),y&&(b.y=this.internal.__cell__.margins.top||0,E.push(b)),b.lineNumber=m;var R=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,b),this.setTextColor(R)}E.length>0&&this.setTableHeaderRow(E),this.setFont(void 0,"normal"),n=!1}}(mn.API);var o1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},a1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Xf=s1(a1),l1=[100,200,300,400,500,600,700,800,900],ox=s1(l1);function Qf(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(l){return o1[l=l||"normal"]?l:"normal"}(e.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(l){return typeof Xf[l=l||"normal"]=="number"?l:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,n,r].join(" ")}}}function x0(e,t,n,r){var o;for(o=n;o>=0&&o<t.length;o+=r)if(e[t[o]])return e[t[o]];for(o=n;o>=0&&o<t.length;o-=r)if(e[t[o]])return e[t[o]]}var ax={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},L0={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function C0(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function lx(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},ax,n.genericFontFamilies||{}),l=null,c=null,p=0;p<t.length;++p)if(o[(l=Qf(t[p])).family]&&(l.family=o[l.family]),e.hasOwnProperty(l.family)){c=e[l.family];break}if(!(c=c||e[r]))throw new Error("Could not find a font-family for the rule '"+C0(l)+"' and default family '"+r+"'.");if(c=function(m,y){if(y[m])return y[m];var b=Xf[m],w=b<=Xf.normal?-1:1,E=x0(y,a1,b,w);if(!E)throw new Error("Could not find a matching font-stretch value for "+m);return E}(l.stretch,c),c=function(m,y){if(y[m])return y[m];for(var b=o1[m],w=0;w<b.length;++w)if(y[b[w]])return y[b[w]];throw new Error("Could not find a matching font-style for "+m)}(l.style,c),!(c=function(m,y){if(y[m])return y[m];if(m===400&&y[500])return y[500];if(m===500&&y[400])return y[400];var b=ox[m],w=x0(y,l1,b,m<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+m);return w}(l.weight,c)))throw new Error("Failed to resolve a font for the rule '"+C0(l)+"'.");return c}function k0(e){return e.trimLeft()}function ux(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function cx(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Ac,P0,S0,gf=["times"];(function(e){var t,n,r,o,l,c,p,m,y,b=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new m,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new c,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new c,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new w(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,c=this.internal.Point,p=this.internal.Rectangle,m=this.internal.Matrix,y=new b}]);var w=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=D;Object.defineProperty(this,"pdf",{get:function(){return K}});var he=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return he},set:function(De){he=!!De}});var _e=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return _e},set:function(De){_e=!!De}});var Le=0;Object.defineProperty(this,"posX",{get:function(){return Le},set:function(De){isNaN(De)||(Le=De)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(De){isNaN(De)||(de=De)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(De){var le;typeof De=="number"?le=[De,De,De,De]:((le=new Array(4))[0]=De[0],le[1]=De.length>=2?De[1]:le[0],le[2]=De.length>=3?De[2]:le[0],le[3]=De.length>=4?De[3]:le[1]),y.margin=le}});var Se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Se},set:function(De){Se=De}});var Ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ae},set:function(De){Ae=De}});var Ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ke},set:function(De){Ke=De}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(De){De instanceof b&&(y=De)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(De){y.path=De}});var rt=[];Object.defineProperty(this,"ctxStack",{get:function(){return rt},set:function(De){rt=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var le;le=E(De),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var le=E(De);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var ne=null;function ce(De,le){if(ne===null){var Ve=function(st){var Qe=[];return Object.keys(st).forEach(function(ot){st[ot].forEach(function(Oe){var xe=null;switch(Oe){case"bold":xe={family:ot,weight:"bold"};break;case"italic":xe={family:ot,style:"italic"};break;case"bolditalic":xe={family:ot,weight:"bold",style:"italic"};break;case"":case"normal":xe={family:ot}}xe!==null&&(xe.ref={name:ot,style:Oe},Qe.push(xe))})}),Qe}(De.getFontList());ne=function(st){for(var Qe={},ot=0;ot<st.length;++ot){var Oe=Qf(st[ot]),xe=Oe.family,it=Oe.stretch,vt=Oe.style,Lt=Oe.weight;Qe[xe]=Qe[xe]||{},Qe[xe][it]=Qe[xe][it]||{},Qe[xe][it][vt]=Qe[xe][it][vt]||{},Qe[xe][it][vt][Lt]=Oe}return Qe}(Ve.concat(le))}return ne}var Re=null;Object.defineProperty(this,"fontFaces",{get:function(){return Re},set:function(De){ne=null,Re=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var le;if(this.ctx.font=De,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var Ve=le[1],st=(le[2],le[3]),Qe=le[4],ot=(le[5],le[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qe)[2];Qe=Math.floor(Oe==="px"?parseFloat(Qe)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Qe)*this.pdf.getFontSize():parseFloat(Qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qe);var xe=function(jt){var Vt,Nt,Pn=[],en=jt.trim();if(en==="")return gf;if(en in L0)return[L0[en]];for(;en!=="";){switch(Nt=null,Vt=(en=k0(en)).charAt(0)){case'"':case"'":Nt=ux(en.substring(1),Vt);break;default:Nt=cx(en)}if(Nt===null||(Pn.push(Nt[0]),(en=k0(Nt[1]))!==""&&en.charAt(0)!==","))return gf;en=en.replace(/^,/,"")}return Pn}(ot);if(this.fontFaces){var it=lx(ce(this.pdf,this.fontFaces),xe.map(function(jt){return{family:jt,stretch:"normal",weight:st,style:Ve}}));this.pdf.setFont(it.ref.name,it.ref.style)}else{var vt="";(st==="bold"||parseInt(st,10)>=700||Ve==="bold")&&(vt="bold"),Ve==="italic"&&(vt+="italic"),vt.length===0&&(vt="normal");for(var Lt="",ze={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Dt=0;Dt<xe.length;Dt++){if(this.pdf.internal.getFont(xe[Dt],vt,{noFallback:!0,disableWarning:!0})!==void 0){Lt=xe[Dt];break}if(vt==="bolditalic"&&this.pdf.internal.getFont(xe[Dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Lt=xe[Dt],vt="bold";else if(this.pdf.internal.getFont(xe[Dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Lt=xe[Dt],vt="normal";break}}if(Lt===""){for(var Tt=0;Tt<xe.length;Tt++)if(ze[xe[Tt]]){Lt=ze[xe[Tt]];break}}Lt=Lt===""?"Times":Lt,this.pdf.setFont(Lt,vt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,Ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,Ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};w.prototype.setLineDash=function(D){this.lineDash=D},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){Ce.call(this,"fill",!1)},w.prototype.stroke=function(){Ce.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(D,K){if(isNaN(D)||isNaN(K))throw oi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var he=this.ctx.transform.applyToPoint(new c(D,K));this.path.push({type:"mt",x:he.x,y:he.y}),this.ctx.lastPoint=new c(D,K)},w.prototype.closePath=function(){var D=new c(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&si(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){D=new c(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(D.x,D.y)},w.prototype.lineTo=function(D,K){if(isNaN(D)||isNaN(K))throw oi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var he=this.ctx.transform.applyToPoint(new c(D,K));this.path.push({type:"lt",x:he.x,y:he.y}),this.ctx.lastPoint=new c(he.x,he.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Ce.call(this,null,!0)},w.prototype.quadraticCurveTo=function(D,K,he,_e){if(isNaN(he)||isNaN(_e)||isNaN(D)||isNaN(K))throw oi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Le=this.ctx.transform.applyToPoint(new c(he,_e)),de=this.ctx.transform.applyToPoint(new c(D,K));this.path.push({type:"qct",x1:de.x,y1:de.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new c(Le.x,Le.y)},w.prototype.bezierCurveTo=function(D,K,he,_e,Le,de){if(isNaN(Le)||isNaN(de)||isNaN(D)||isNaN(K)||isNaN(he)||isNaN(_e))throw oi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Se=this.ctx.transform.applyToPoint(new c(Le,de)),Ae=this.ctx.transform.applyToPoint(new c(D,K)),Ke=this.ctx.transform.applyToPoint(new c(he,_e));this.path.push({type:"bct",x1:Ae.x,y1:Ae.y,x2:Ke.x,y2:Ke.y,x:Se.x,y:Se.y}),this.ctx.lastPoint=new c(Se.x,Se.y)},w.prototype.arc=function(D,K,he,_e,Le,de){if(isNaN(D)||isNaN(K)||isNaN(he)||isNaN(_e)||isNaN(Le))throw oi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var Se=this.ctx.transform.applyToPoint(new c(D,K));D=Se.x,K=Se.y;var Ae=this.ctx.transform.applyToPoint(new c(0,he)),Ke=this.ctx.transform.applyToPoint(new c(0,0));he=Math.sqrt(Math.pow(Ae.x-Ke.x,2)+Math.pow(Ae.y-Ke.y,2))}Math.abs(Le-_e)>=2*Math.PI&&(_e=0,Le=2*Math.PI),this.path.push({type:"arc",x:D,y:K,radius:he,startAngle:_e,endAngle:Le,counterclockwise:de})},w.prototype.arcTo=function(D,K,he,_e,Le){throw new Error("arcTo not implemented.")},w.prototype.rect=function(D,K,he,_e){if(isNaN(D)||isNaN(K)||isNaN(he)||isNaN(_e))throw oi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,K),this.lineTo(D+he,K),this.lineTo(D+he,K+_e),this.lineTo(D,K+_e),this.lineTo(D,K),this.lineTo(D+he,K),this.lineTo(D,K)},w.prototype.fillRect=function(D,K,he,_e){if(isNaN(D)||isNaN(K)||isNaN(he)||isNaN(_e))throw oi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var Le={};this.lineCap!=="butt"&&(Le.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Le.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,K,he,_e),this.fill(),Le.hasOwnProperty("lineCap")&&(this.lineCap=Le.lineCap),Le.hasOwnProperty("lineJoin")&&(this.lineJoin=Le.lineJoin)}},w.prototype.strokeRect=function(D,K,he,_e){if(isNaN(D)||isNaN(K)||isNaN(he)||isNaN(_e))throw oi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");R.call(this)||(this.beginPath(),this.rect(D,K,he,_e),this.stroke())},w.prototype.clearRect=function(D,K,he,_e){if(isNaN(D)||isNaN(K)||isNaN(he)||isNaN(_e))throw oi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,K,he,_e))},w.prototype.save=function(D){D=typeof D!="boolean"||D;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var _e=new b(this.ctx);this.ctxStack.push(this.ctx),this.ctx=_e}},w.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,he=0;he<this.pdf.internal.getNumberOfPages();he++)this.pdf.setPage(he+1),this.pdf.internal.out("Q");this.pdf.setPage(K),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var E=function(D){var K,he,_e,Le;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))K=0,he=0,_e=0,Le=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(de!==null)K=parseInt(de[1]),he=parseInt(de[2]),_e=parseInt(de[3]),Le=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)K=parseInt(de[1]),he=parseInt(de[2]),_e=parseInt(de[3]),Le=parseFloat(de[4]);else{if(Le=1,typeof D=="string"&&D.charAt(0)!=="#"){var Se=new Qg(D);D=Se.ok?Se.toHex():"#000000"}D.length===4?(K=D.substring(1,2),K+=K,he=D.substring(2,3),he+=he,_e=D.substring(3,4),_e+=_e):(K=D.substring(1,3),he=D.substring(3,5),_e=D.substring(5,7)),K=parseInt(K,16),he=parseInt(he,16),_e=parseInt(_e,16)}}return{r:K,g:he,b:_e,a:Le,style:D}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},R=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(D,K,he,_e){if(isNaN(K)||isNaN(he)||typeof D!="string")throw oi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(_e=isNaN(_e)?void 0:_e,!C.call(this)){var Le=V(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;J.call(this,{text:D,x:K,y:he,scale:de,angle:Le,align:this.textAlign,maxWidth:_e})}},w.prototype.strokeText=function(D,K,he,_e){if(isNaN(K)||isNaN(he)||typeof D!="string")throw oi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!R.call(this)){_e=isNaN(_e)?void 0:_e;var Le=V(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;J.call(this,{text:D,x:K,y:he,scale:de,renderingMode:"stroke",angle:Le,align:this.textAlign,maxWidth:_e})}},w.prototype.measureText=function(D){if(typeof D!="string")throw oi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,he=this.pdf.internal.scaleFactor,_e=K.internal.getFontSize(),Le=K.getStringUnitWidth(D)*_e/K.internal.scaleFactor,de=function(Se){var Ae=(Se=Se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this};return new de({width:Le*=Math.round(96*he/72*1e4)/1e4})},w.prototype.scale=function(D,K){if(isNaN(D)||isNaN(K))throw oi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var he=new m(D,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(he)},w.prototype.rotate=function(D){if(isNaN(D))throw oi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new m(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},w.prototype.translate=function(D,K){if(isNaN(D)||isNaN(K))throw oi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var he=new m(1,0,0,1,D,K);this.ctx.transform=this.ctx.transform.multiply(he)},w.prototype.transform=function(D,K,he,_e,Le,de){if(isNaN(D)||isNaN(K)||isNaN(he)||isNaN(_e)||isNaN(Le)||isNaN(de))throw oi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Se=new m(D,K,he,_e,Le,de);this.ctx.transform=this.ctx.transform.multiply(Se)},w.prototype.setTransform=function(D,K,he,_e,Le,de){D=isNaN(D)?1:D,K=isNaN(K)?0:K,he=isNaN(he)?0:he,_e=isNaN(_e)?1:_e,Le=isNaN(Le)?0:Le,de=isNaN(de)?0:de,this.ctx.transform=new m(D,K,he,_e,Le,de)};var O=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(D,K,he,_e,Le,de,Se,Ae,Ke){var rt=this.pdf.getImageProperties(D),ne=1,ce=1,Re=1,De=1;_e!==void 0&&Ae!==void 0&&(Re=Ae/_e,De=Ke/Le,ne=rt.width/_e*Ae/_e,ce=rt.height/Le*Ke/Le),de===void 0&&(de=K,Se=he,K=0,he=0),_e!==void 0&&Ae===void 0&&(Ae=_e,Ke=Le),_e===void 0&&Ae===void 0&&(Ae=rt.width,Ke=rt.height);for(var le,Ve=this.ctx.transform.decompose(),st=V(Ve.rotate.shx),Qe=new m,ot=(Qe=(Qe=(Qe=Qe.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale)).applyToRectangle(new p(de-K*Re,Se-he*De,_e*ne,Le*ce)),Oe=q.call(this,ot),xe=[],it=0;it<Oe.length;it+=1)xe.indexOf(Oe[it])===-1&&xe.push(Oe[it]);if(X(xe),this.autoPaging)for(var vt=xe[0],Lt=xe[xe.length-1],ze=vt;ze<Lt+1;ze++){this.pdf.setPage(ze);var Dt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=ze===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Nt=ze===1?0:jt+(ze-2)*Vt;if(this.ctx.clip_path.length!==0){var Pn=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(le,this.posX+this.margin[3],-Nt+Tt+this.ctx.prevPageLastElemOffset),Pe.call(this,"fill",!0),this.path=Pn}var en=JSON.parse(JSON.stringify(ot));en=G([en],this.posX+this.margin[3],-Nt+Tt+this.ctx.prevPageLastElemOffset)[0];var Jn=(ze>vt||ze<Lt)&&O.call(this);Jn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dt,Vt,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",en.x,en.y,en.w,en.h,null,null,st),Jn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,st)};var q=function(D,K,he){var _e=[];K=K||this.pdf.internal.pageSize.width,he=he||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Le=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":_e.push(Math.floor((D.y+Le)/he)+1);break;case"arc":_e.push(Math.floor((D.y+Le-D.radius)/he)+1),_e.push(Math.floor((D.y+Le+D.radius)/he)+1);break;case"qct":var de=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);_e.push(Math.floor((de.y+Le)/he)+1),_e.push(Math.floor((de.y+de.h+Le)/he)+1);break;case"bct":var Se=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);_e.push(Math.floor((Se.y+Le)/he)+1),_e.push(Math.floor((Se.y+Se.h+Le)/he)+1);break;case"rect":_e.push(Math.floor((D.y+Le)/he)+1),_e.push(Math.floor((D.y+D.h+Le)/he)+1)}for(var Ae=0;Ae<_e.length;Ae+=1)for(;this.pdf.internal.getNumberOfPages()<_e[Ae];)F.call(this);return _e},F=function(){var D=this.fillStyle,K=this.strokeStyle,he=this.font,_e=this.lineCap,Le=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=K,this.font=he,this.lineCap=_e,this.lineWidth=Le,this.lineJoin=de},G=function(D,K,he){for(var _e=0;_e<D.length;_e++)switch(D[_e].type){case"bct":D[_e].x2+=K,D[_e].y2+=he;case"qct":D[_e].x1+=K,D[_e].y1+=he;case"mt":case"lt":case"arc":default:D[_e].x+=K,D[_e].y+=he}return D},X=function(D){return D.sort(function(K,he){return K-he})},Ce=function(D,K){for(var he,_e,Le=this.fillStyle,de=this.strokeStyle,Se=this.lineCap,Ae=this.lineWidth,Ke=Math.abs(Ae*this.ctx.transform.scaleX),rt=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),ce=JSON.parse(JSON.stringify(this.path)),Re=[],De=0;De<ce.length;De++)if(ce[De].x!==void 0)for(var le=q.call(this,ce[De]),Ve=0;Ve<le.length;Ve+=1)Re.indexOf(le[Ve])===-1&&Re.push(le[Ve]);for(var st=0;st<Re.length;st++)for(;this.pdf.internal.getNumberOfPages()<Re[st];)F.call(this);if(X(Re),this.autoPaging)for(var Qe=Re[0],ot=Re[Re.length-1],Oe=Qe;Oe<ot+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=Le,this.strokeStyle=de,this.lineCap=Se,this.lineWidth=Ke,this.lineJoin=rt;var xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=Oe===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=Oe===1?0:vt+(Oe-2)*Lt;if(this.ctx.clip_path.length!==0){var Dt=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(he,this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset),Pe.call(this,D,!0),this.path=Dt}if(_e=JSON.parse(JSON.stringify(ne)),this.path=G(_e,this.posX+this.margin[3],-ze+it+this.ctx.prevPageLastElemOffset),K===!1||Oe===0){var Tt=(Oe>Qe||Oe<ot)&&O.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xe,Lt,null).clip().discardPath()),Pe.call(this,D,K),Tt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ae}else this.lineWidth=Ke,Pe.call(this,D,K),this.lineWidth=Ae;this.path=ne},Pe=function(D,K){if((D!=="stroke"||K||!R.call(this))&&(D==="stroke"||K||!C.call(this))){for(var he,_e,Le=[],de=this.path,Se=0;Se<de.length;Se++){var Ae=de[Se];switch(Ae.type){case"begin":Le.push({begin:!0});break;case"close":Le.push({close:!0});break;case"mt":Le.push({start:Ae,deltas:[],abs:[]});break;case"lt":var Ke=Le.length;if(de[Se-1]&&!isNaN(de[Se-1].x)&&(he=[Ae.x-de[Se-1].x,Ae.y-de[Se-1].y],Ke>0)){for(;Ke>=0;Ke--)if(Le[Ke-1].close!==!0&&Le[Ke-1].begin!==!0){Le[Ke-1].deltas.push(he),Le[Ke-1].abs.push(Ae);break}}break;case"bct":he=[Ae.x1-de[Se-1].x,Ae.y1-de[Se-1].y,Ae.x2-de[Se-1].x,Ae.y2-de[Se-1].y,Ae.x-de[Se-1].x,Ae.y-de[Se-1].y],Le[Le.length-1].deltas.push(he);break;case"qct":var rt=de[Se-1].x+2/3*(Ae.x1-de[Se-1].x),ne=de[Se-1].y+2/3*(Ae.y1-de[Se-1].y),ce=Ae.x+2/3*(Ae.x1-Ae.x),Re=Ae.y+2/3*(Ae.y1-Ae.y),De=Ae.x,le=Ae.y;he=[rt-de[Se-1].x,ne-de[Se-1].y,ce-de[Se-1].x,Re-de[Se-1].y,De-de[Se-1].x,le-de[Se-1].y],Le[Le.length-1].deltas.push(he);break;case"arc":Le.push({deltas:[],abs:[],arc:!0}),Array.isArray(Le[Le.length-1].abs)&&Le[Le.length-1].abs.push(Ae)}}_e=K?null:D==="stroke"?"stroke":"fill";for(var Ve=!1,st=0;st<Le.length;st++)if(Le[st].arc)for(var Qe=Le[st].abs,ot=0;ot<Qe.length;ot++){var Oe=Qe[ot];Oe.type==="arc"?ue.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,K,!Ve):I.call(this,Oe.x,Oe.y),Ve=!0}else if(Le[st].close===!0)this.pdf.internal.out("h"),Ve=!1;else if(Le[st].begin!==!0){var xe=Le[st].start.x,it=Le[st].start.y;te.call(this,Le[st].deltas,xe,it),Ve=!0}_e&&Be.call(this,_e),K&&Je.call(this)}},we=function(D){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,he=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-he;case"top":return D+K-he;case"hanging":return D+K-2*he;case"middle":return D+K/2-he;case"ideographic":return D;case"alphabetic":default:return D}},se=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(K,he){this.colorStops.push([K,he])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ue=function(D,K,he,_e,Le,de,Se,Ae,Ke){for(var rt=ee.call(this,he,_e,Le,de),ne=0;ne<rt.length;ne++){var ce=rt[ne];ne===0&&(Ke?$.call(this,ce.x1+D,ce.y1+K):I.call(this,ce.x1+D,ce.y1+K)),Z.call(this,D,K,ce.x2,ce.y2,ce.x3,ce.y3,ce.x4,ce.y4)}Ae?Je.call(this):Be.call(this,Se)},Be=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Je=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(D,K){this.pdf.internal.out(n(D)+" "+r(K)+" m")},J=function(D){var K;switch(D.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var he=this.pdf.getTextDimensions(D.text),_e=we.call(this,D.y),Le=se.call(this,_e)-he.h,de=this.ctx.transform.applyToPoint(new c(D.x,_e)),Se=this.ctx.transform.decompose(),Ae=new m;Ae=(Ae=(Ae=Ae.multiply(Se.translate)).multiply(Se.skew)).multiply(Se.scale);for(var Ke,rt,ne,ce=this.ctx.transform.applyToRectangle(new p(D.x,_e,he.w,he.h)),Re=Ae.applyToRectangle(new p(D.x,Le,he.w,he.h)),De=q.call(this,Re),le=[],Ve=0;Ve<De.length;Ve+=1)le.indexOf(De[Ve])===-1&&le.push(De[Ve]);if(X(le),this.autoPaging)for(var st=le[0],Qe=le[le.length-1],ot=st;ot<Qe+1;ot++){this.pdf.setPage(ot);var Oe=ot===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[2],vt=it-this.margin[0],Lt=this.pdf.internal.pageSize.width-this.margin[1],ze=Lt-this.margin[3],Dt=ot===1?0:xe+(ot-2)*vt;if(this.ctx.clip_path.length!==0){var Tt=this.path;Ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(Ke,this.posX+this.margin[3],-1*Dt+Oe),Pe.call(this,"fill",!0),this.path=Tt}var jt=G([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Dt+Oe+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(rt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(rt*D.scale),ne=this.lineWidth,this.lineWidth=ne*D.scale);var Vt=this.autoPaging!=="text";if(Vt||jt.y+jt.h<=it){if(Vt||jt.y>=Oe&&jt.x<=Lt){var Nt=Vt?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Lt-jt.x)[0],Pn=G([JSON.parse(JSON.stringify(ce))],this.posX+this.margin[3],-Dt+Oe+this.ctx.prevPageLastElemOffset)[0],en=Vt&&(ot>st||ot<Qe)&&O.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,vt,null).clip().discardPath()),this.pdf.text(Nt,Pn.x,Pn.y,{angle:D.angle,align:K,renderingMode:D.renderingMode}),en&&this.pdf.restoreGraphicsState()}}else jt.y<it&&(this.ctx.prevPageLastElemOffset+=it-jt.y);D.scale>=.01&&(this.pdf.setFontSize(rt),this.lineWidth=ne)}else D.scale>=.01&&(rt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(rt*D.scale),ne=this.lineWidth,this.lineWidth=ne*D.scale),this.pdf.text(D.text,de.x+this.posX,de.y+this.posY,{angle:D.angle,align:K,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(rt),this.lineWidth=ne)},I=function(D,K,he,_e){he=he||0,_e=_e||0,this.pdf.internal.out(n(D+he)+" "+r(K+_e)+" l")},te=function(D,K,he){return this.pdf.lines(D,K,he,null,null)},Z=function(D,K,he,_e,Le,de,Se,Ae){this.pdf.internal.out([t(o(he+D)),t(l(_e+K)),t(o(Le+D)),t(l(de+K)),t(o(Se+D)),t(l(Ae+K)),"c"].join(" "))},ee=function(D,K,he,_e){for(var Le=2*Math.PI,de=Math.PI/2;K>he;)K-=Le;var Se=Math.abs(he-K);Se<Le&&_e&&(Se=Le-Se);for(var Ae=[],Ke=_e?-1:1,rt=K;Se>1e-5;){var ne=rt+Ke*Math.min(Se,de);Ae.push(ve.call(this,D,rt,ne)),Se-=Math.abs(ne-rt),rt=ne}return Ae},ve=function(D,K,he){var _e=(he-K)/2,Le=D*Math.cos(_e),de=D*Math.sin(_e),Se=Le,Ae=-de,Ke=Se*Se+Ae*Ae,rt=Ke+Se*Le+Ae*de,ne=4/3*(Math.sqrt(2*Ke*rt)-rt)/(Se*de-Ae*Le),ce=Se-ne*Ae,Re=Ae+ne*Se,De=ce,le=-Re,Ve=_e+K,st=Math.cos(Ve),Qe=Math.sin(Ve);return{x1:D*Math.cos(K),y1:D*Math.sin(K),x2:ce*st-Re*Qe,y2:ce*Qe+Re*st,x3:De*st-le*Qe,y3:De*Qe+le*st,x4:D*Math.cos(he),y4:D*Math.sin(he)}},V=function(D){return 180*D/Math.PI},j=function(D,K,he,_e,Le,de){var Se=D+.5*(he-D),Ae=K+.5*(_e-K),Ke=Le+.5*(he-Le),rt=de+.5*(_e-de),ne=Math.min(D,Le,Se,Ke),ce=Math.max(D,Le,Se,Ke),Re=Math.min(K,de,Ae,rt),De=Math.max(K,de,Ae,rt);return new p(ne,Re,ce-ne,De-Re)},Y=function(D,K,he,_e,Le,de,Se,Ae){var Ke,rt,ne,ce,Re,De,le,Ve,st,Qe,ot,Oe,xe,it,vt=he-D,Lt=_e-K,ze=Le-he,Dt=de-_e,Tt=Se-Le,jt=Ae-de;for(rt=0;rt<41;rt++)st=(le=(ne=D+(Ke=rt/40)*vt)+Ke*((Re=he+Ke*ze)-ne))+Ke*(Re+Ke*(Le+Ke*Tt-Re)-le),Qe=(Ve=(ce=K+Ke*Lt)+Ke*((De=_e+Ke*Dt)-ce))+Ke*(De+Ke*(de+Ke*jt-De)-Ve),rt==0?(ot=st,Oe=Qe,xe=st,it=Qe):(ot=Math.min(ot,st),Oe=Math.min(Oe,Qe),xe=Math.max(xe,st),it=Math.max(it,Qe));return new p(Math.round(ot),Math.round(Oe),Math.round(xe-ot),Math.round(it-Oe))},Ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,K,he=(D=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:K}));this.prevLineDash!==he&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=he)}}})(mn.API),function(e){var t=function(l){var c,p,m,y,b,w,E,C,R,O;for(p=[],m=0,y=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;y>m;m+=4)(b=(l.charCodeAt(m)<<24)+(l.charCodeAt(m+1)<<16)+(l.charCodeAt(m+2)<<8)+l.charCodeAt(m+3))!==0?(w=(b=((b=((b=((b=(b-(O=b%85))/85)-(R=b%85))/85)-(C=b%85))/85)-(E=b%85))/85)%85,p.push(w+33,E+33,C+33,R+33,O+33)):p.push(122);return function(q,F){for(var G=F;G>0;G--)q.pop()}(p,c.length),String.fromCharCode.apply(String,p)+"~>"},n=function(l){var c,p,m,y,b,w=String,E="length",C=255,R="charCodeAt",O="slice",q="replace";for(l[O](-2),l=l[O](0,-2)[q](/\s/g,"")[q]("z","!!!!!"),m=[],y=0,b=(l+=c="uuuuu"[O](l[E]%5||5))[E];b>y;y+=5)p=52200625*(l[R](y)-33)+614125*(l[R](y+1)-33)+7225*(l[R](y+2)-33)+85*(l[R](y+3)-33)+(l[R](y+4)-33),m.push(C&p>>24,C&p>>16,C&p>>8,C&p);return function(F,G){for(var X=G;X>0;X--)F.pop()}(m,c[E]),w.fromCharCode.apply(w,m)},r=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var p="",m=0;m<l.length;m+=2)p+=String.fromCharCode("0x"+(l[m]+l[m+1]));return p},o=function(l){for(var c=new Uint8Array(l.length),p=l.length;p--;)c[p]=l.charCodeAt(p);return l=(c=Wf(c)).reduce(function(m,y){return m+String.fromCharCode(y)},"")};e.processDataByFilters=function(l,c){var p=0,m=l||"",y=[];for(typeof(c=c||[])=="string"&&(c=[c]),p=0;p<c.length;p+=1)switch(c[p]){case"ASCII85Decode":case"/ASCII85Decode":m=n(m),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=t(m),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=r(m),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(b){return("0"+b.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[p]+'" is not implemented')}return{data:m,reverseChain:y.reverse().join(" ")}}}(mn.API),function(e){e.loadFile=function(t,n,r){return function(o,l,c){l=l!==!1,c=typeof c=="function"?c:function(){};var p=void 0;try{p=function(m,y,b){var w=new XMLHttpRequest,E=0,C=function(R){var O=R.length,q=[],F=String.fromCharCode;for(E=0;E<O;E+=1)q.push(F(255&R.charCodeAt(E)));return q.join("")};if(w.open("GET",m,!y),w.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(w.onload=function(){w.status===200?b(C(this.responseText)):b(void 0)}),w.send(null),y&&w.status===200)return C(w.responseText)}(o,l,c)}catch{}return p}(t,n,r)},e.loadImageFile=e.loadFile}(mn.API),function(e){function t(){return(vn.html2canvas?Promise.resolve(vn.html2canvas):Ol(()=>import("./html2canvas.esm.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(vn.DOMPurify?Promise.resolve(vn.DOMPurify):Ol(()=>import("./purify.es.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var p=si(c);return p==="undefined"?"undefined":p==="string"||c instanceof String?"string":p==="number"||c instanceof Number?"number":p==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":p==="object"?"object":"unknown"},o=function(c,p){var m=document.createElement(c);for(var y in p.className&&(m.className=p.className),p.innerHTML&&p.dompurify&&(m.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)m.style[y]=p.style[y];return m},l=function c(p){var m=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),y=c.convert(Promise.resolve(),m);return y=(y=y.setProgress(1,c,1,[c])).set(p)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,p){return c.__proto__=p||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,p){return this.then(function(){switch(p=p||function(m){switch(r(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(n).then(function(m){return this.set({src:o("div",{innerHTML:c,dompurify:m})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=function m(y,b){for(var w=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),E=y.firstChild;E;E=E.nextSibling)b!==!0&&E.nodeType===1&&E.nodeName==="SCRIPT"||w.appendChild(m(E,b));return y.nodeType===1&&(y.nodeName==="CANVAS"?(w.width=y.width,w.height=y.height,w.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(w.value=y.value),w.addEventListener("load",function(){w.scrollTop=y.scrollTop,w.scrollLeft=y.scrollLeft},!0)),w}(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(p){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,p(this.prop.container,m)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(p){var m=this.opt.jsPDF,y=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=y,y)for(var E=0;E<y.length;++E){var C=y[E],R=C.src.find(function(O){return O.format==="truetype"});R&&m.addFont(R.url,C.ref.name,C.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,m.context2d.save(!0),p(this.prop.container,w)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,p,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(c,p):this.outputPdf(c,p)},l.prototype.outputPdf=function(c,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,p)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(r(c)!=="object")return this;var p=Object.keys(c||{}).map(function(m){if(m in l.template.prop)return function(){this.prop[m]=c[m]};switch(m){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[m]=c[m]}}},this);return this.then(function(){return this.thenList(p)})},l.prototype.get=function(c,p){return this.then(function(){var m=c in l.template.prop?this.prop[c]:this.opt[c];return p?p(m):m})},l.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function p(m,y){return Math.floor(m*y/72*96)}return this.then(function(){(c=c||mn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:p(c.inner.width,c.k),height:p(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,p,m,y){return c!=null&&(this.progress.val=c),p!=null&&(this.progress.state=p),m!=null&&(this.progress.n=m),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,p,m,y){return this.setProgress(c?this.progress.val+c:null,p||null,m?this.progress.n+m:null,y?this.progress.stack.concat(y):null)},l.prototype.then=function(c,p){var m=this;return this.thenCore(c,p,function(y,b){return m.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(w){return m.updateProgress(null,y),w}).then(y,b).then(function(w){return m.updateProgress(1),w})})},l.prototype.thenCore=function(c,p,m){m=m||Promise.prototype.then,c&&(c=c.bind(this)),p&&(p=p.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),b=m.call(y,c,p);return l.convert(b,this.__proto__)},l.prototype.thenExternal=function(c,p){return Promise.prototype.then.call(this,c,p)},l.prototype.thenList=function(c){var p=this;return c.forEach(function(m){p=p.thenCore(m)}),p},l.prototype.catch=function(c){c&&(c=c.bind(this));var p=Promise.prototype.catch.call(this,c);return l.convert(p,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,mn.getPageSize=function(c,p,m){if(si(c)==="object"){var y=c;c=y.orientation,p=y.unit||p,m=y.format||m}p=p||"mm",m=m||"a4",c=(""+(c||"P")).toLowerCase();var b,w=(""+m).toLowerCase(),E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+p}var C,R=0,O=0;if(E.hasOwnProperty(w))R=E[w][1]/b,O=E[w][0]/b;else try{R=m[1],O=m[0]}catch{throw new Error("Invalid format: "+m)}if(c==="p"||c==="portrait")c="p",O>R&&(C=O,O=R,R=C);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",R>O&&(C=O,O=R,R=C)}return{width:O,height:R,unit:p,k:b,orientation:c}},e.html=function(c,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(Qf):null;var m=new l(p);return p.worker?m:m.from(c).doCallback()}}(mn.API),mn.API.addJS=function(e){return S0=e,this.internal.events.subscribe("postPutResources",function(){Ac=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ac+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),P0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+S0+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ac!==void 0&&P0!==void 0&&this.internal.out("/Names <</JavaScript "+Ac+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),l=0;l<o.length;l++){var c=o[l],p=r.exec(c);if(p!=null){var m=p[1];n.internal.newObjectDeferredBegin(m,!1)}n.internal.write(c)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,b=[];for(l=0;l<y;l++){var w=n.internal.newObject();b.push(w);var E=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+E.objId+" 0 R /XYZ null null null]>> endobj")}var C=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<b.length;l++)n.internal.write("(page_"+(l+1)+")"+b[l]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+C+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,l){var c={title:o,options:l,children:[]};return r==null&&(r=this.root),r.children.push(c),c},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var c=r.children[l];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var p=this.count=this.count_r({count:0},c);if(p>0&&this.line("/Count "+p),c.options&&c.options.pageNumber){var m=n.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var y=0;y<r.children.length;y++)this.renderItems(r.children[y])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var l=0;l<o.children.length;l++)r.count++,this.count_r(r,o.children[l]);return r.count}}])}(mn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,o,l,c,p){var m,y=this.decode.DCT_DECODE,b=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=c||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(m=function(w){for(var E,C=256*w.charCodeAt(4)+w.charCodeAt(5),R=w.length,O={width:0,height:0,numcomponents:1},q=4;q<R;q+=2){if(q+=C,t.indexOf(w.charCodeAt(q+1))!==-1){E=256*w.charCodeAt(q+5)+w.charCodeAt(q+6),O={width:256*w.charCodeAt(q+7)+w.charCodeAt(q+8),height:E,numcomponents:w.charCodeAt(q+9)};break}C=256*w.charCodeAt(q+2)+w.charCodeAt(q+3)}return O}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:p=this.color_spaces.DEVICE_GRAY;break;case 4:p=this.color_spaces.DEVICE_CMYK;break;case 3:p=this.color_spaces.DEVICE_RGB}b={data:n,width:m.width,height:m.height,colorSpace:p,bitsPerComponent:8,filter:y,index:r,alias:o}}return b}}(mn.API);var iu,Mc,E0,A0,M0,hx=function(){var e,t,n;function r(l){var c,p,m,y,b,w,E,C,R,O,q,F,G,X;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(c=this.readUInt32(),R=(function(){var Ce,Pe;for(Pe=[],Ce=0;Ce<4;++Ce)Pe.push(String.fromCharCode(this.data[this.pos++]));return Pe}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},b=this.readUInt16(),y=this.readUInt16()||100,w.delay=1e3*b/y,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(R==="fdAT"&&(this.pos+=4,c-=4),l=(w!=null?w.data:void 0)||this.imgData,F=0;0<=c?F<c:F>c;0<=c?++F:--F)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((O=m-this.transparency.indexed.length)>0)for(G=0;0<=O?G<O:G>O;0<=O?++G:--G)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":E=(q=this.read(c)).indexOf(0),C=String.fromCharCode.apply(String,q.slice(0,E)),this.text[C]=String.fromCharCode.apply(String,q.slice(E+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(X=this.colorType)===4||X===6,p=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*p,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var c,p;for(p=[],c=0;0<=l?c<l:c>l;0<=l?++c:--c)p.push(this.data[this.pos++]);return p},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var c=this.pixelBitlength/8,p=new Uint8Array(this.width*this.height*c),m=0,y=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function b(w,E,C,R){var O,q,F,G,X,Ce,Pe,we,se,ue,Be,Je,$,J,I,te,Z,ee,ve,V,j,Y=Math.ceil((y.width-w)/C),Ie=Math.ceil((y.height-E)/R),D=y.width==Y&&y.height==Ie;for(J=c*Y,Je=D?p:new Uint8Array(J*Ie),Ce=l.length,$=0,q=0;$<Ie&&m<Ce;){switch(l[m++]){case 0:for(G=Z=0;Z<J;G=Z+=1)Je[q++]=l[m++];break;case 1:for(G=ee=0;ee<J;G=ee+=1)O=l[m++],X=G<c?0:Je[q-c],Je[q++]=(O+X)%256;break;case 2:for(G=ve=0;ve<J;G=ve+=1)O=l[m++],F=(G-G%c)/c,I=$&&Je[($-1)*J+F*c+G%c],Je[q++]=(I+O)%256;break;case 3:for(G=V=0;V<J;G=V+=1)O=l[m++],F=(G-G%c)/c,X=G<c?0:Je[q-c],I=$&&Je[($-1)*J+F*c+G%c],Je[q++]=(O+Math.floor((X+I)/2))%256;break;case 4:for(G=j=0;j<J;G=j+=1)O=l[m++],F=(G-G%c)/c,X=G<c?0:Je[q-c],$===0?I=te=0:(I=Je[($-1)*J+F*c+G%c],te=F&&Je[($-1)*J+(F-1)*c+G%c]),Pe=X+I-te,we=Math.abs(Pe-X),ue=Math.abs(Pe-I),Be=Math.abs(Pe-te),se=we<=ue&&we<=Be?X:ue<=Be?I:te,Je[q++]=(O+se)%256;break;default:throw new Error("Invalid filter algorithm: "+l[m-1])}if(!D){var K=((E+$*R)*y.width+w)*c,he=$*J;for(G=0;G<Y;G+=1){for(var _e=0;_e<c;_e+=1)p[K++]=Je[he++];K+=(C-1)*c}}$++}}return l=$w(l),y.interlaceMethod==1?(b(0,0,8,8),b(4,0,8,8),b(0,4,4,8),b(2,0,4,4),b(0,2,2,4),b(1,0,2,2),b(0,1,1,2)):b(0,0,1,1),p},r.prototype.decodePalette=function(){var l,c,p,m,y,b,w,E,C;for(p=this.palette,b=this.transparency.indexed||[],y=new Uint8Array((b.length||0)+p.length),m=0,l=0,c=w=0,E=p.length;w<E;c=w+=3)y[m++]=p[c],y[m++]=p[c+1],y[m++]=p[c+2],y[m++]=(C=b[l++])!=null?C:255;return y},r.prototype.copyToImageData=function(l,c){var p,m,y,b,w,E,C,R,O,q,F;if(m=this.colors,O=null,p=this.hasAlphaChannel,this.palette.length&&(O=(F=this._decodedPalette)!=null?F:this._decodedPalette=this.decodePalette(),m=4,p=!0),R=(y=l.data||l).length,w=O||c,b=E=0,m===1)for(;b<R;)C=O?4*c[b/4]:E,q=w[C++],y[b++]=q,y[b++]=q,y[b++]=q,y[b++]=p?w[C++]:255,E=C;else for(;b<R;)C=O?4*c[b/4]:E,y[b++]=w[C++],y[b++]=w[C++],y[b++]=w[C++],y[b++]=p?w[C++]:255,E=C},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var o=function(){if(Object.prototype.toString.call(vn)==="[object Window]"){try{t=vn.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(l){var c;if(o()===!0)return n.width=l.width,n.height=l.height,n.clearRect(0,0,l.width,l.height),n.putImageData(l,0,0),(c=new Image).src=t.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var c,p,m,y,b,w,E,C;if(this.animation){for(C=[],p=b=0,w=(E=this.animation.frames).length;b<w;p=++b)c=E[p],m=l.createImageData(c.width,c.height),y=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(m,y),c.imageData=m,C.push(c.image=e(m));return C}},r.prototype.renderFrame=function(l,c){var p,m,y;return p=(m=this.animation.frames)[c],y=m[c-1],c===0&&l.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?l.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&l.putImageData(y.imageData,y.xOffset,y.yOffset),p.blendOp===0&&l.clearRect(p.xOffset,p.yOffset,p.width,p.height),l.drawImage(p.image,p.xOffset,p.yOffset)},r.prototype.animate=function(l){var c,p,m,y,b,w,E=this;return p=0,w=this.animation,y=w.numFrames,m=w.frames,b=w.numPlays,(c=function(){var C,R;if(C=p++%y,R=m[C],E.renderFrame(l,C),y>1&&p/y<b)return E.animation._timeout=setTimeout(c,R.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var c,p;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,c=l.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(p=c.createImageData(this.width,this.height),this.copyToImageData(p,this.decodePixels()),c.putImageData(p,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function fx(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,o=e[t++],l=o>>7,c=1<<(7&o)+1;e[t++],e[t++];var p=null,m=null;l&&(p=t,m=c,t+=3*c);var y=!0,b=[],w=0,E=null,C=0,R=null;for(this.width=n,this.height=r;y&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,R=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var O=e[t++];w=e[t++]|e[t++]<<8,E=e[t++],!(1&O)&&(E=null),C=O>>2&7,t++;break;case 254:for(;;){if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var q=e[t++]|e[t++]<<8,F=e[t++]|e[t++]<<8,G=e[t++]|e[t++]<<8,X=e[t++]|e[t++]<<8,Ce=e[t++],Pe=Ce>>6&1,we=1<<(7&Ce)+1,se=p,ue=m,Be=!1;Ce>>7&&(Be=!0,se=t,ue=we,t+=3*we);var Je=t;for(t++;;){var $;if(!(($=e[t++])>=0))throw Error("Invalid block size");if($===0)break;t+=$}b.push({x:q,y:F,width:G,height:X,has_local_palette:Be,palette_offset:se,palette_size:ue,data_offset:Je,data_length:t-Je,transparent_index:E,interlaced:!!Pe,delay:w,disposal:C});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return R},this.frameInfo=function(J){if(J<0||J>=b.length)throw new Error("Frame index out of range.");return b[J]},this.decodeAndBlitFrameBGRA=function(J,I){var te=this.frameInfo(J),Z=te.width*te.height,ee=new Uint8Array(Z);B0(e,te.data_offset,ee,Z);var ve=te.palette_offset,V=te.transparent_index;V===null&&(V=256);var j=te.width,Y=n-j,Ie=j,D=4*(te.y*n+te.x),K=4*((te.y+te.height)*n+te.x),he=D,_e=4*Y;te.interlaced===!0&&(_e+=4*n*7);for(var Le=8,de=0,Se=ee.length;de<Se;++de){var Ae=ee[de];if(Ie===0&&(Ie=j,(he+=_e)>=K&&(_e=4*Y+4*n*(Le-1),he=D+(j+Y)*(Le<<1),Le>>=1)),Ae===V)he+=4;else{var Ke=e[ve+3*Ae],rt=e[ve+3*Ae+1],ne=e[ve+3*Ae+2];I[he++]=ne,I[he++]=rt,I[he++]=Ke,I[he++]=255}--Ie}},this.decodeAndBlitFrameRGBA=function(J,I){var te=this.frameInfo(J),Z=te.width*te.height,ee=new Uint8Array(Z);B0(e,te.data_offset,ee,Z);var ve=te.palette_offset,V=te.transparent_index;V===null&&(V=256);var j=te.width,Y=n-j,Ie=j,D=4*(te.y*n+te.x),K=4*((te.y+te.height)*n+te.x),he=D,_e=4*Y;te.interlaced===!0&&(_e+=4*n*7);for(var Le=8,de=0,Se=ee.length;de<Se;++de){var Ae=ee[de];if(Ie===0&&(Ie=j,(he+=_e)>=K&&(_e=4*Y+4*n*(Le-1),he=D+(j+Y)*(Le<<1),Le>>=1)),Ae===V)he+=4;else{var Ke=e[ve+3*Ae],rt=e[ve+3*Ae+1],ne=e[ve+3*Ae+2];I[he++]=Ke,I[he++]=rt,I[he++]=ne,I[he++]=255}--Ie}}}function B0(e,t,n,r){for(var o=e[t++],l=1<<o,c=l+1,p=c+1,m=o+1,y=(1<<m)-1,b=0,w=0,E=0,C=e[t++],R=new Int32Array(4096),O=null;;){for(;b<16&&C!==0;)w|=e[t++]<<b,b+=8,C===1?C=e[t++]:--C;if(b<m)break;var q=w&y;if(w>>=m,b-=m,q!==l){if(q===c)break;for(var F=q<p?q:O,G=0,X=F;X>l;)X=R[X]>>8,++G;var Ce=X;if(E+G+(F!==q?1:0)>r)return void oi.log("Warning, gif stream longer than expected.");n[E++]=Ce;var Pe=E+=G;for(F!==q&&(n[E++]=Ce),X=F;G--;)X=R[X],n[--Pe]=255&X,X>>=8;O!==null&&p<4096&&(R[p++]=O<<8|Ce,p>=y+1&&m<12&&(++m,y=y<<1|1)),O=q}else p=c+1,y=(1<<(m=o+1))-1,O=null}return E!==r&&oi.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function vf(e){var t,n,r,o,l,c=Math.floor,p=new Array(64),m=new Array(64),y=new Array(64),b=new Array(64),w=new Array(65535),E=new Array(65535),C=new Array(64),R=new Array(64),O=[],q=0,F=7,G=new Array(64),X=new Array(64),Ce=new Array(64),Pe=new Array(256),we=new Array(2048),se=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ue=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Be=[0,1,2,3,4,5,6,7,8,9,10,11],Je=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],J=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(D,K){for(var he=0,_e=0,Le=new Array,de=1;de<=16;de++){for(var Se=1;Se<=D[de];Se++)Le[K[_e]]=[],Le[K[_e]][0]=he,Le[K[_e]][1]=de,_e++,he++;he*=2}return Le}function ve(D){for(var K=D[0],he=D[1]-1;he>=0;)K&1<<he&&(q|=1<<F),he--,--F<0&&(q==255?(V(255),V(0)):V(q),F=7,q=0)}function V(D){O.push(D)}function j(D){V(D>>8&255),V(255&D)}function Y(D,K,he,_e,Le){for(var de,Se=Le[0],Ae=Le[240],Ke=function(Qe,ot){var Oe,xe,it,vt,Lt,ze,Dt,Tt,jt,Vt,Nt=0;for(jt=0;jt<8;++jt){Oe=Qe[Nt],xe=Qe[Nt+1],it=Qe[Nt+2],vt=Qe[Nt+3],Lt=Qe[Nt+4],ze=Qe[Nt+5],Dt=Qe[Nt+6];var Pn=Oe+(Tt=Qe[Nt+7]),en=Oe-Tt,Jn=xe+Dt,un=xe-Dt,xn=it+ze,Yn=it-ze,zt=vt+Lt,Pr=vt-Lt,In=Pn+zt,xi=Pn-zt,Di=Jn+xn,Un=Jn-xn;Qe[Nt]=In+Di,Qe[Nt+4]=In-Di;var cn=.707106781*(Un+xi);Qe[Nt+2]=xi+cn,Qe[Nt+6]=xi-cn;var Jt=.382683433*((In=Pr+Yn)-(Un=un+en)),Kt=.5411961*In+Jt,li=1.306562965*Un+Jt,Sr=.707106781*(Di=Yn+un),Er=en+Sr,an=en-Sr;Qe[Nt+5]=an+Kt,Qe[Nt+3]=an-Kt,Qe[Nt+1]=Er+li,Qe[Nt+7]=Er-li,Nt+=8}for(Nt=0,jt=0;jt<8;++jt){Oe=Qe[Nt],xe=Qe[Nt+8],it=Qe[Nt+16],vt=Qe[Nt+24],Lt=Qe[Nt+32],ze=Qe[Nt+40],Dt=Qe[Nt+48];var Yr=Oe+(Tt=Qe[Nt+56]),cs=Oe-Tt,ar=xe+Dt,qn=xe-Dt,Ut=it+ze,lr=it-ze,go=vt+Lt,Xr=vt-Lt,Ar=Yr+go,_r=Yr-go,Mr=ar+Ut,Xi=ar-Ut;Qe[Nt]=Ar+Mr,Qe[Nt+32]=Ar-Mr;var yr=.707106781*(Xi+_r);Qe[Nt+16]=_r+yr,Qe[Nt+48]=_r-yr;var hs=.382683433*((Ar=Xr+lr)-(Xi=qn+cs)),vo=.5411961*Ar+hs,Uo=1.306562965*Xi+hs,qo=.707106781*(Mr=lr+qn),Ms=cs+qo,Ws=cs-qo;Qe[Nt+40]=Ws+vo,Qe[Nt+24]=Ws-vo,Qe[Nt+8]=Ms+Uo,Qe[Nt+56]=Ms-Uo,Nt++}for(jt=0;jt<64;++jt)Vt=Qe[jt]*ot[jt],C[jt]=Vt>0?Vt+.5|0:Vt-.5|0;return C}(D,K),rt=0;rt<64;++rt)R[se[rt]]=Ke[rt];var ne=R[0]-he;he=R[0],ne==0?ve(_e[0]):(ve(_e[E[de=32767+ne]]),ve(w[de]));for(var ce=63;ce>0&&R[ce]==0;)ce--;if(ce==0)return ve(Se),he;for(var Re,De=1;De<=ce;){for(var le=De;R[De]==0&&De<=ce;)++De;var Ve=De-le;if(Ve>=16){Re=Ve>>4;for(var st=1;st<=Re;++st)ve(Ae);Ve&=15}de=32767+R[De],ve(Le[(Ve<<4)+E[de]]),ve(w[de]),De++}return ce!=63&&ve(Se),he}function Ie(D){D=Math.min(Math.max(D,1),100),l!=D&&(function(K){for(var he=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],_e=0;_e<64;_e++){var Le=c((he[_e]*K+50)/100);Le=Math.min(Math.max(Le,1),255),p[se[_e]]=Le}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Se=0;Se<64;Se++){var Ae=c((de[Se]*K+50)/100);Ae=Math.min(Math.max(Ae,1),255),m[se[Se]]=Ae}for(var Ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],rt=0,ne=0;ne<8;ne++)for(var ce=0;ce<8;ce++)y[rt]=1/(p[se[rt]]*Ke[ne]*Ke[ce]*8),b[rt]=1/(m[se[rt]]*Ke[ne]*Ke[ce]*8),rt++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),l=D)}this.encode=function(D,K){K&&Ie(K),O=new Array,q=0,F=7,j(65496),j(65504),j(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),j(1),j(1),V(0),V(0),function(){j(65499),j(132),V(0);for(var xe=0;xe<64;xe++)V(p[xe]);V(1);for(var it=0;it<64;it++)V(m[it])}(),function(xe,it){j(65472),j(17),V(8),j(it),j(xe),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(D.width,D.height),function(){j(65476),j(418),V(0);for(var xe=0;xe<16;xe++)V(ue[xe+1]);for(var it=0;it<=11;it++)V(Be[it]);V(16);for(var vt=0;vt<16;vt++)V(Je[vt+1]);for(var Lt=0;Lt<=161;Lt++)V($[Lt]);V(1);for(var ze=0;ze<16;ze++)V(J[ze+1]);for(var Dt=0;Dt<=11;Dt++)V(I[Dt]);V(17);for(var Tt=0;Tt<16;Tt++)V(te[Tt+1]);for(var jt=0;jt<=161;jt++)V(Z[jt])}(),j(65498),j(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var he=0,_e=0,Le=0;q=0,F=7,this.encode.displayName="_encode_";for(var de,Se,Ae,Ke,rt,ne,ce,Re,De,le=D.data,Ve=D.width,st=D.height,Qe=4*Ve,ot=0;ot<st;){for(de=0;de<Qe;){for(rt=Qe*ot+de,ce=-1,Re=0,De=0;De<64;De++)ne=rt+(Re=De>>3)*Qe+(ce=4*(7&De)),ot+Re>=st&&(ne-=Qe*(ot+1+Re-st)),de+ce>=Qe&&(ne-=de+ce-Qe+4),Se=le[ne++],Ae=le[ne++],Ke=le[ne++],G[De]=(we[Se]+we[Ae+256>>0]+we[Ke+512>>0]>>16)-128,X[De]=(we[Se+768>>0]+we[Ae+1024>>0]+we[Ke+1280>>0]>>16)-128,Ce[De]=(we[Se+1280>>0]+we[Ae+1536>>0]+we[Ke+1792>>0]>>16)-128;he=Y(G,y,he,t,r),_e=Y(X,b,_e,n,o),Le=Y(Ce,b,Le,n,o),de+=32}ot+=8}if(F>=0){var Oe=[];Oe[1]=F+1,Oe[0]=(1<<F+1)-1,ve(Oe)}return j(65497),new Uint8Array(O)},e=e||50,function(){for(var D=String.fromCharCode,K=0;K<256;K++)Pe[K]=D(K)}(),t=ee(ue,Be),n=ee(J,I),r=ee(Je,$),o=ee(te,Z),function(){for(var D=1,K=2,he=1;he<=15;he++){for(var _e=D;_e<K;_e++)E[32767+_e]=he,w[32767+_e]=[],w[32767+_e][1]=he,w[32767+_e][0]=_e;for(var Le=-(K-1);Le<=-D;Le++)E[32767+Le]=he,w[32767+Le]=[],w[32767+Le][1]=he,w[32767+Le][0]=K-1+Le;D<<=1,K<<=1}}(),function(){for(var D=0;D<256;D++)we[D]=19595*D,we[D+256>>0]=38470*D,we[D+512>>0]=7471*D+32768,we[D+768>>0]=-11059*D,we[D+1024>>0]=-21709*D,we[D+1280>>0]=32768*D+8421375,we[D+1536>>0]=-27439*D,we[D+1792>>0]=-5329*D}(),Ie(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Do(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function T0(e){function t(ue){if(!ue)throw Error("assert :P")}function n(ue,Be,Je){for(var $=0;4>$;$++)if(ue[Be+$]!=Je.charCodeAt($))return!0;return!1}function r(ue,Be,Je,$,J){for(var I=0;I<J;I++)ue[Be+I]=Je[$+I]}function o(ue,Be,Je,$){for(var J=0;J<$;J++)ue[Be+J]=Je}function l(ue){return new Int32Array(ue)}function c(ue,Be){for(var Je=[],$=0;$<ue;$++)Je.push(new Be);return Je}function p(ue,Be){var Je=[];return function $(J,I,te){for(var Z=te[I],ee=0;ee<Z&&(J.push(te.length>I+1?[]:new Be),!(te.length<I+1));ee++)$(J[ee],I+1,te)}(Je,0,ue),Je}var m=function(){var ue=this;function Be(f,_){for(var S=1<<_-1>>>0;f&S;)S>>>=1;return S?(f&S-1)+S:f}function Je(f,_,S,T,W){t(!(T%S));do f[_+(T-=S)]=W;while(0<T)}function $(f,_,S,T,W){if(t(2328>=W),512>=W)var re=l(512);else if((re=l(W))==null)return 0;return function(ae,fe,pe,ke,Ge,pt){var mt,tt,xt=fe,bt=1<<pe,Ze=l(16),Xe=l(16);for(t(Ge!=0),t(ke!=null),t(ae!=null),t(0<pe),tt=0;tt<Ge;++tt){if(15<ke[tt])return 0;++Ze[ke[tt]]}if(Ze[0]==Ge)return 0;for(Xe[1]=0,mt=1;15>mt;++mt){if(Ze[mt]>1<<mt)return 0;Xe[mt+1]=Xe[mt]+Ze[mt]}for(tt=0;tt<Ge;++tt)mt=ke[tt],0<ke[tt]&&(pt[Xe[mt]++]=tt);if(Xe[15]==1)return(ke=new J).g=0,ke.value=pt[0],Je(ae,xt,1,bt,ke),bt;var Ct,Mt=-1,St=bt-1,Zt=0,Ft=1,ln=1,s=1<<pe;for(tt=0,mt=1,Ge=2;mt<=pe;++mt,Ge<<=1){if(Ft+=ln<<=1,0>(ln-=Ze[mt]))return 0;for(;0<Ze[mt];--Ze[mt])(ke=new J).g=mt,ke.value=pt[tt++],Je(ae,xt+Zt,Ge,s,ke),Zt=Be(Zt,mt)}for(mt=pe+1,Ge=2;15>=mt;++mt,Ge<<=1){if(Ft+=ln<<=1,0>(ln-=Ze[mt]))return 0;for(;0<Ze[mt];--Ze[mt]){if(ke=new J,(Zt&St)!=Mt){for(xt+=s,Ct=1<<(Mt=mt)-pe;15>Mt&&!(0>=(Ct-=Ze[Mt]));)++Mt,Ct<<=1;bt+=s=1<<(Ct=Mt-pe),ae[fe+(Mt=Zt&St)].g=Ct+pe,ae[fe+Mt].value=xt-fe-Mt}ke.g=mt-pe,ke.value=pt[tt++],Je(ae,xt+(Zt>>pe),Ge,s,ke),Zt=Be(Zt,mt)}}return Ft!=2*Xe[15]-1?0:bt}(f,_,S,T,W,re)}function J(){this.value=this.g=0}function I(){this.value=this.g=0}function te(){this.G=c(5,J),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(wi,I)}function Z(f,_,S,T){t(f!=null),t(_!=null),t(2147483648>T),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=_,f.pa=S,f.Jd=_,f.Yc=S+T,f.Zc=4<=T?S+T-4+1:S,de(f)}function ee(f,_){for(var S=0;0<_--;)S|=Ae(f,128)<<_;return S}function ve(f,_){var S=ee(f,_);return Se(f)?-S:S}function V(f,_,S,T){var W,re=0;for(t(f!=null),t(_!=null),t(4294967288>T),f.Sb=T,f.Ra=0,f.u=0,f.h=0,4<T&&(T=4),W=0;W<T;++W)re+=_[S+W]<<8*W;f.Ra=re,f.bb=T,f.oa=_,f.pa=S}function j(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<nr-8>>>0,++f.bb,f.u-=8;he(f)&&(f.h=1,f.u=0)}function Y(f,_){if(t(0<=_),!f.h&&_<=cr){var S=K(f)&ea[_];return f.u+=_,j(f),S}return f.h=1,f.u=0}function Ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(f){return f.Ra>>>(f.u&nr-1)>>>0}function he(f){return t(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>nr}function _e(f,_){f.u=_,f.h=he(f)}function Le(f){f.u>=ta&&(t(f.u>=ta),j(f))}function de(f){t(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(t(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function Se(f){return ee(f,1)}function Ae(f,_){var S=f.Ca;0>f.b&&de(f);var T=f.b,W=S*_>>>8,re=(f.I>>>T>W)+0;for(re?(S-=W,f.I-=W+1<<T>>>0):S=W+1,T=S,W=0;256<=T;)W+=8,T>>=8;return T=7^W+Vi[T],f.b-=T,f.Ca=(S<<T)-1,re}function Ke(f,_,S){f[_+0]=S>>24&255,f[_+1]=S>>16&255,f[_+2]=S>>8&255,f[_+3]=S>>0&255}function rt(f,_){return f[_+0]<<0|f[_+1]<<8}function ne(f,_){return rt(f,_)|f[_+2]<<16}function ce(f,_){return rt(f,_)|rt(f,_+2)<<16}function Re(f,_){var S=1<<_;return t(f!=null),t(0<_),f.X=l(S),f.X==null?0:(f.Mb=32-_,f.Xa=_,1)}function De(f,_){t(f!=null),t(_!=null),t(f.Xa==_.Xa),r(_.X,0,f.X,0,1<<_.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function Ve(f,_,S,T){t(S!=null),t(T!=null);var W=S[0],re=T[0];return W==0&&(W=(f*re+_/2)/_),re==0&&(re=(_*W+f/2)/f),0>=W||0>=re?0:(S[0]=W,T[0]=re,1)}function st(f,_){return f+(1<<_)-1>>>_}function Qe(f,_){return((4278255360&f)+(4278255360&_)>>>0&4278255360)+((16711935&f)+(16711935&_)>>>0&16711935)>>>0}function ot(f,_){ue[_]=function(S,T,W,re,ae,fe,pe){var ke;for(ke=0;ke<ae;++ke){var Ge=ue[f](fe[pe+ke-1],W,re+ke);fe[pe+ke]=Qe(S[T+ke],Ge)}}}function Oe(){this.ud=this.hd=this.jd=0}function xe(f,_){return((4278124286&(f^_))>>>1)+(f&_)>>>0}function it(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function vt(f,_){return it(f+(f-_+.5>>1))}function Lt(f,_,S){return Math.abs(_-S)-Math.abs(f-S)}function ze(f,_,S,T,W,re,ae){for(T=re[ae-1],S=0;S<W;++S)re[ae+S]=T=Qe(f[_+S],T)}function Dt(f,_,S,T,W){var re;for(re=0;re<S;++re){var ae=f[_+re],fe=ae>>8&255,pe=16711935&(pe=(pe=16711935&ae)+((fe<<16)+fe));T[W+re]=(4278255360&ae)+pe>>>0}}function Tt(f,_){_.jd=f>>0&255,_.hd=f>>8&255,_.ud=f>>16&255}function jt(f,_,S,T,W,re){var ae;for(ae=0;ae<T;++ae){var fe=_[S+ae],pe=fe>>>8,ke=fe,Ge=255&(Ge=(Ge=fe>>>16)+((f.jd<<24>>24)*(pe<<24>>24)>>>5));ke=255&(ke=(ke=ke+((f.hd<<24>>24)*(pe<<24>>24)>>>5))+((f.ud<<24>>24)*(Ge<<24>>24)>>>5)),W[re+ae]=(4278255360&fe)+(Ge<<16)+ke}}function Vt(f,_,S,T,W){ue[_]=function(re,ae,fe,pe,ke,Ge,pt,mt,tt){for(pe=pt;pe<mt;++pe)for(pt=0;pt<tt;++pt)ke[Ge++]=W(fe[T(re[ae++])])},ue[f]=function(re,ae,fe,pe,ke,Ge,pt){var mt=8>>re.b,tt=re.Ea,xt=re.K[0],bt=re.w;if(8>mt)for(re=(1<<re.b)-1,bt=(1<<mt)-1;ae<fe;++ae){var Ze,Xe=0;for(Ze=0;Ze<tt;++Ze)Ze&re||(Xe=T(pe[ke++])),Ge[pt++]=W(xt[Xe&bt]),Xe>>=mt}else ue["VP8LMapColor"+S](pe,ke,xt,bt,Ge,pt,ae,fe,tt)}}function Nt(f,_,S,T,W){for(S=_+S;_<S;){var re=f[_++];T[W++]=re>>16&255,T[W++]=re>>8&255,T[W++]=re>>0&255}}function Pn(f,_,S,T,W){for(S=_+S;_<S;){var re=f[_++];T[W++]=re>>16&255,T[W++]=re>>8&255,T[W++]=re>>0&255,T[W++]=re>>24&255}}function en(f,_,S,T,W){for(S=_+S;_<S;){var re=(ae=f[_++])>>16&240|ae>>12&15,ae=ae>>0&240|ae>>28&15;T[W++]=re,T[W++]=ae}}function Jn(f,_,S,T,W){for(S=_+S;_<S;){var re=(ae=f[_++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;T[W++]=re,T[W++]=ae}}function un(f,_,S,T,W){for(S=_+S;_<S;){var re=f[_++];T[W++]=re>>0&255,T[W++]=re>>8&255,T[W++]=re>>16&255}}function xn(f,_,S,T,W,re){if(re==0)for(S=_+S;_<S;)Ke(T,((re=f[_++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),W+=32;else r(T,W,f,_,S)}function Yn(f,_){ue[_][0]=ue[f+"0"],ue[_][1]=ue[f+"1"],ue[_][2]=ue[f+"2"],ue[_][3]=ue[f+"3"],ue[_][4]=ue[f+"4"],ue[_][5]=ue[f+"5"],ue[_][6]=ue[f+"6"],ue[_][7]=ue[f+"7"],ue[_][8]=ue[f+"8"],ue[_][9]=ue[f+"9"],ue[_][10]=ue[f+"10"],ue[_][11]=ue[f+"11"],ue[_][12]=ue[f+"12"],ue[_][13]=ue[f+"13"],ue[_][14]=ue[f+"0"],ue[_][15]=ue[f+"0"]}function zt(f){return f==rr||f==sr||f==ws||f==i}function Pr(){this.eb=[],this.size=this.A=this.fb=0}function In(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function xi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pr,this.f.kb=new In,this.sd=null}function Di(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function cn(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Jt(f,_){var S=f.T,T=_.ba.f.RGBA,W=T.eb,re=T.fb+f.ka*T.A,ae=Zi[_.ba.S],fe=f.y,pe=f.O,ke=f.f,Ge=f.N,pt=f.ea,mt=f.W,tt=_.cc,xt=_.dc,bt=_.Mc,Ze=_.Nc,Xe=f.ka,Ct=f.ka+f.T,Mt=f.U,St=Mt+1>>1;for(Xe==0?ae(fe,pe,null,null,ke,Ge,pt,mt,ke,Ge,pt,mt,W,re,null,null,Mt):(ae(_.ec,_.fc,fe,pe,tt,xt,bt,Ze,ke,Ge,pt,mt,W,re-T.A,W,re,Mt),++S);Xe+2<Ct;Xe+=2)tt=ke,xt=Ge,bt=pt,Ze=mt,Ge+=f.Rc,mt+=f.Rc,re+=2*T.A,ae(fe,(pe+=2*f.fa)-f.fa,fe,pe,tt,xt,bt,Ze,ke,Ge,pt,mt,W,re-T.A,W,re,Mt);return pe+=f.fa,f.j+Ct<f.o?(r(_.ec,_.fc,fe,pe,Mt),r(_.cc,_.dc,ke,Ge,St),r(_.Mc,_.Nc,pt,mt,St),S--):1&Ct||ae(fe,pe,null,null,ke,Ge,pt,mt,ke,Ge,pt,mt,W,re+T.A,null,null,Mt),S}function Kt(f,_,S){var T=f.F,W=[f.J];if(T!=null){var re=f.U,ae=_.ba.S,fe=ae==jr||ae==ws;_=_.ba.f.RGBA;var pe=[0],ke=f.ka;pe[0]=f.T,f.Kb&&(ke==0?--pe[0]:(--ke,W[0]-=f.width),f.j+f.ka+f.T==f.o&&(pe[0]=f.o-f.j-ke));var Ge=_.eb;ke=_.fb+ke*_.A,f=Vn(T,W[0],f.width,re,pe,Ge,ke+(fe?0:3),_.A),t(S==pe),f&&zt(ae)&&Ri(Ge,ke,fe,re,pe,_.A)}return 0}function li(f){var _=f.ma,S=_.ba.S,T=11>S,W=S==hn||S==Bo||S==jr||S==Wi||S==12||zt(S);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!ka(_.Oa,f,W?11:12))return 0;if(W&&zt(S)&&Bt(),f.da)alert("todo:use_scaling");else{if(T){if(_.Ib=cn,f.Kb){if(S=f.U+1>>1,_.memory=l(f.U+2*S),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+f.U,_.Mc=_.cc,_.Nc=_.dc+S,_.Ib=Jt,Bt()}}else alert("todo:EmitYUV");W&&(_.Jb=Kt,T&&nt())}if(T&&!Ya){for(f=0;256>f;++f)Kl[f]=89858*(f-128)+Ll>>Zl,Jl[f]=-22014*(f-128)+Ll,Oh[f]=-45773*(f-128),Dh[f]=113618*(f-128)+Ll>>Zl;for(f=Cl;f<Pu;++f)_=76283*(f-16)+Ll>>Zl,Yl[f-Cl]=Xn(_,255),dc[f-Cl]=Xn(_+8>>4,15);Ya=1}return 1}function Sr(f){var _=f.ma,S=f.U,T=f.T;return t(!(1&f.ka)),0>=S||0>=T?0:(S=_.Ib(f,_),_.Jb!=null&&_.Jb(f,_,S),_.Dc+=S,1)}function Er(f){f.ma.memory=null}function an(f,_,S,T){return Y(f,8)!=47?0:(_[0]=Y(f,14)+1,S[0]=Y(f,14)+1,T[0]=Y(f,1),Y(f,3)!=0?0:!f.h)}function Yr(f,_){if(4>f)return f+1;var S=f-2>>1;return(2+(1&f)<<S)+Y(_,S)+1}function cs(f,_){return 120<_?_-120:1<=(S=((S=je[_-1])>>4)*f+(8-(15&S)))?S:1;var S}function ar(f,_,S){var T=K(S),W=f[_+=255&T].g-8;return 0<W&&(_e(S,S.u+8),T=K(S),_+=f[_].value,_+=T&(1<<W)-1),_e(S,S.u+f[_].g),f[_].value}function qn(f,_,S){return S.g+=f.g,S.value+=f.value<<_>>>0,t(8>=S.g),f.g}function Ut(f,_,S){var T=f.xc;return t((_=T==0?0:f.vc[f.md*(S>>T)+(_>>T)])<f.Wb),f.Ya[_]}function lr(f,_,S,T){var W=f.ab,re=f.c*_,ae=f.C;_=ae+_;var fe=S,pe=T;for(T=f.Ta,S=f.Ua;0<W--;){var ke=f.gc[W],Ge=ae,pt=_,mt=fe,tt=pe,xt=(pe=T,fe=S,ke.Ea);switch(t(Ge<pt),t(pt<=ke.nc),ke.hc){case 2:Wa(mt,tt,(pt-Ge)*xt,pe,fe);break;case 0:var bt=Ge,Ze=pt,Xe=pe,Ct=fe,Mt=(s=ke).Ea;bt==0&&(Fs(mt,tt,null,null,1,Xe,Ct),ze(mt,tt+1,0,0,Mt-1,Xe,Ct+1),tt+=Mt,Ct+=Mt,++bt);for(var St=1<<s.b,Zt=St-1,Ft=st(Mt,s.b),ln=s.K,s=s.w+(bt>>s.b)*Ft;bt<Ze;){var a=ln,h=s,d=1;for(Lr(mt,tt,Xe,Ct-Mt,1,Xe,Ct);d<Mt;){var v=(d&~Zt)+St;v>Mt&&(v=Mt),(0,js[a[h++]>>8&15])(mt,tt+ +d,Xe,Ct+d-Mt,v-d,Xe,Ct+d),d=v}tt+=Mt,Ct+=Mt,++bt&Zt||(s+=Ft)}pt!=ke.nc&&r(pe,fe-xt,pe,fe+(pt-Ge-1)*xt,xt);break;case 1:for(xt=mt,Ze=tt,Mt=(mt=ke.Ea)-(Ct=mt&~(Xe=(tt=1<<ke.b)-1)),bt=st(mt,ke.b),St=ke.K,ke=ke.w+(Ge>>ke.b)*bt;Ge<pt;){for(Zt=St,Ft=ke,ln=new Oe,s=Ze+Ct,a=Ze+mt;Ze<s;)Tt(Zt[Ft++],ln),vs(ln,xt,Ze,tt,pe,fe),Ze+=tt,fe+=tt;Ze<a&&(Tt(Zt[Ft++],ln),vs(ln,xt,Ze,Mt,pe,fe),Ze+=Mt,fe+=Mt),++Ge&Xe||(ke+=bt)}break;case 3:if(mt==pe&&tt==fe&&0<ke.b){for(Ze=pe,mt=xt=fe+(pt-Ge)*xt-(Ct=(pt-Ge)*st(ke.Ea,ke.b)),tt=pe,Xe=fe,bt=[],Ct=(Mt=Ct)-1;0<=Ct;--Ct)bt[Ct]=tt[Xe+Ct];for(Ct=Mt-1;0<=Ct;--Ct)Ze[mt+Ct]=bt[Ct];Pi(ke,Ge,pt,pe,xt,pe,fe)}else Pi(ke,Ge,pt,mt,tt,pe,fe)}fe=T,pe=S}pe!=S&&r(T,S,fe,pe,re)}function go(f,_){var S=f.V,T=f.Ba+f.c*f.C,W=_-f.C;if(t(_<=f.l.o),t(16>=W),0<W){var re=f.l,ae=f.Ta,fe=f.Ua,pe=re.width;if(lr(f,W,S,T),W=fe=[fe],t((S=f.C)<(T=_)),t(re.v<re.va),T>re.o&&(T=re.o),S<re.j){var ke=re.j-S;S=re.j,W[0]+=ke*pe}if(S>=T?S=0:(W[0]+=4*re.v,re.ka=S-re.j,re.U=re.va-re.v,re.T=T-S,S=1),S){if(fe=fe[0],11>(S=f.ca).S){var Ge=S.f.RGBA,pt=(T=S.S,W=re.U,re=re.T,ke=Ge.eb,Ge.A),mt=re;for(Ge=Ge.fb+f.Ma*Ge.A;0<mt--;){var tt=ae,xt=fe,bt=W,Ze=ke,Xe=Ge;switch(T){case pr:Ii(tt,xt,bt,Ze,Xe);break;case hn:Bi(tt,xt,bt,Ze,Xe);break;case rr:Bi(tt,xt,bt,Ze,Xe),Ri(Ze,Xe,0,bt,1,0);break;case Ka:Ir(tt,xt,bt,Ze,Xe);break;case Bo:xn(tt,xt,bt,Ze,Xe,1);break;case sr:xn(tt,xt,bt,Ze,Xe,1),Ri(Ze,Xe,0,bt,1,0);break;case jr:xn(tt,xt,bt,Ze,Xe,0);break;case ws:xn(tt,xt,bt,Ze,Xe,0),Ri(Ze,Xe,1,bt,1,0);break;case Wi:ts(tt,xt,bt,Ze,Xe);break;case i:ts(tt,xt,bt,Ze,Xe),Wn(Ze,Xe,bt,1,0);break;case bl:hr(tt,xt,bt,Ze,Xe);break;default:t(0)}fe+=pe,Ge+=pt}f.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");t(f.Ma<=S.height)}}f.C=_,t(f.C<=f.i)}function Xr(f){var _;if(0<f.ua)return 0;for(_=0;_<f.Wb;++_){var S=f.Ya[_].G,T=f.Ya[_].H;if(0<S[1][T[1]+0].g||0<S[2][T[2]+0].g||0<S[3][T[3]+0].g)return 0}return 1}function Ar(f,_,S,T,W,re){if(f.Z!=0){var ae=f.qd,fe=f.rd;for(t(Zn[f.Z]!=null);_<S;++_)Zn[f.Z](ae,fe,T,W,T,W,re),ae=T,fe=W,W+=re;f.qd=ae,f.rd=fe}}function _r(f,_){var S=f.l.ma,T=S.Z==0||S.Z==1?f.l.j:f.C;if(T=f.C<T?T:f.C,t(_<=f.l.o),_>T){var W=f.l.width,re=S.ca,ae=S.tb+W*T,fe=f.V,pe=f.Ba+f.c*T,ke=f.gc;t(f.ab==1),t(ke[0].hc==3),Or(ke[0],T,_,fe,pe,re,ae),Ar(S,T,_,re,ae,W)}f.C=f.Ma=_}function Mr(f,_,S,T,W,re,ae){var fe=f.$/T,pe=f.$%T,ke=f.m,Ge=f.s,pt=S+f.$,mt=pt;W=S+T*W;var tt=S+T*re,xt=280+Ge.ua,bt=f.Pb?fe:16777216,Ze=0<Ge.ua?Ge.Wa:null,Xe=Ge.wc,Ct=pt<tt?Ut(Ge,pe,fe):null;t(f.C<re),t(tt<=W);var Mt=!1;e:for(;;){for(;Mt||pt<tt;){var St=0;if(fe>=bt){var Zt=pt-S;t((bt=f).Pb),bt.wd=bt.m,bt.xd=Zt,0<bt.s.ua&&De(bt.s.Wa,bt.s.vb),bt=fe+_t}if(pe&Xe||(Ct=Ut(Ge,pe,fe)),t(Ct!=null),Ct.Qb&&(_[pt]=Ct.qb,Mt=!0),!Mt)if(Le(ke),Ct.jc){St=ke,Zt=_;var Ft=pt,ln=Ct.pd[K(St)&wi-1];t(Ct.jc),256>ln.g?(_e(St,St.u+ln.g),Zt[Ft]=ln.value,St=0):(_e(St,St.u+ln.g-256),t(256<=ln.value),St=ln.value),St==0&&(Mt=!0)}else St=ar(Ct.G[0],Ct.H[0],ke);if(ke.h)break;if(Mt||256>St){if(!Mt)if(Ct.nd)_[pt]=(Ct.qb|St<<8)>>>0;else{if(Le(ke),Mt=ar(Ct.G[1],Ct.H[1],ke),Le(ke),Zt=ar(Ct.G[2],Ct.H[2],ke),Ft=ar(Ct.G[3],Ct.H[3],ke),ke.h)break;_[pt]=(Ft<<24|Mt<<16|St<<8|Zt)>>>0}if(Mt=!1,++pt,++pe>=T&&(pe=0,++fe,ae!=null&&fe<=re&&!(fe%16)&&ae(f,fe),Ze!=null))for(;mt<pt;)St=_[mt++],Ze.X[(506832829*St&4294967295)>>>Ze.Mb]=St}else if(280>St){if(St=Yr(St-256,ke),Zt=ar(Ct.G[4],Ct.H[4],ke),Le(ke),Zt=cs(T,Zt=Yr(Zt,ke)),ke.h)break;if(pt-S<Zt||W-pt<St)break e;for(Ft=0;Ft<St;++Ft)_[pt+Ft]=_[pt+Ft-Zt];for(pt+=St,pe+=St;pe>=T;)pe-=T,++fe,ae!=null&&fe<=re&&!(fe%16)&&ae(f,fe);if(t(pt<=W),pe&Xe&&(Ct=Ut(Ge,pe,fe)),Ze!=null)for(;mt<pt;)St=_[mt++],Ze.X[(506832829*St&4294967295)>>>Ze.Mb]=St}else{if(!(St<xt))break e;for(Mt=St-280,t(Ze!=null);mt<pt;)St=_[mt++],Ze.X[(506832829*St&4294967295)>>>Ze.Mb]=St;St=pt,t(!(Mt>>>(Zt=Ze).Xa)),_[St]=Zt.X[Mt],Mt=!0}Mt||t(ke.h==he(ke))}if(f.Pb&&ke.h&&pt<W)t(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&De(f.s.vb,f.s.Wa);else{if(ke.h)break e;ae!=null&&ae(f,fe>re?re:fe),f.a=0,f.$=pt-S}return 1}return f.a=3,0}function Xi(f){t(f!=null),f.vc=null,f.yc=null,f.Ya=null;var _=f.Wa;_!=null&&(_.X=null),f.vb=null,t(f!=null)}function yr(){var f=new La;return f==null?null:(f.a=0,f.xb=xl,Yn("Predictor","VP8LPredictors"),Yn("Predictor","VP8LPredictors_C"),Yn("PredictorAdd","VP8LPredictorsAdd"),Yn("PredictorAdd","VP8LPredictorsAdd_C"),Wa=Dt,vs=jt,Ii=Nt,Bi=Pn,ts=en,hr=Jn,Ir=un,ue.VP8LMapColor32b=gs,ue.VP8LMapColor8b=Ao,f)}function hs(f,_,S,T,W){var re=1,ae=[f],fe=[_],pe=T.m,ke=T.s,Ge=null,pt=0;e:for(;;){if(S)for(;re&&Y(pe,1);){var mt=ae,tt=fe,xt=T,bt=1,Ze=xt.m,Xe=xt.gc[xt.ab],Ct=Y(Ze,2);if(xt.Oc&1<<Ct)re=0;else{switch(xt.Oc|=1<<Ct,Xe.hc=Ct,Xe.Ea=mt[0],Xe.nc=tt[0],Xe.K=[null],++xt.ab,t(4>=xt.ab),Ct){case 0:case 1:Xe.b=Y(Ze,3)+2,bt=hs(st(Xe.Ea,Xe.b),st(Xe.nc,Xe.b),0,xt,Xe.K),Xe.K=Xe.K[0];break;case 3:var Mt,St=Y(Ze,8)+1,Zt=16<St?0:4<St?1:2<St?2:3;if(mt[0]=st(Xe.Ea,Zt),Xe.b=Zt,Mt=bt=hs(St,1,0,xt,Xe.K)){var Ft,ln=St,s=Xe,a=1<<(8>>s.b),h=l(a);if(h==null)Mt=0;else{var d=s.K[0],v=s.w;for(h[0]=s.K[0][0],Ft=1;Ft<1*ln;++Ft)h[Ft]=Qe(d[v+Ft],h[Ft-1]);for(;Ft<4*a;++Ft)h[Ft]=0;s.K[0]=null,s.K[0]=h,Mt=1}}bt=Mt;break;case 2:break;default:t(0)}re=bt}}if(ae=ae[0],fe=fe[0],re&&Y(pe,1)&&!(re=1<=(pt=Y(pe,4))&&11>=pt)){T.a=3;break e}var k;if(k=re)t:{var A,M,z,Q=T,Ne=ae,Ee=fe,Ye=pt,ht=S,Pt=Q.m,Ot=Q.s,Rt=[null],fn=1,Te=0,Fe=ct[Ye];n:for(;;){if(ht&&Y(Pt,1)){var He=Y(Pt,3)+2,gt=st(Ne,He),et=st(Ee,He),ft=gt*et;if(!hs(gt,et,0,Q,Rt))break n;for(Rt=Rt[0],Ot.xc=He,A=0;A<ft;++A){var U=Rt[A]>>8&65535;Rt[A]=U,U>=fn&&(fn=U+1)}}if(Pt.h)break n;for(M=0;5>M;++M){var ie=P[M];!M&&0<Ye&&(ie+=1<<Ye),Te<ie&&(Te=ie)}var ge=c(fn*Fe,J),me=fn,ye=c(me,te);if(ye==null)var be=null;else t(65536>=me),be=ye;var $e=l(Te);if(be==null||$e==null||ge==null){Q.a=1;break n}var Ue=ge;for(A=z=0;A<fn;++A){var We=be[A],lt=We.G,at=We.H,Et=0,Ht=1,Yt=0;for(M=0;5>M;++M){ie=P[M],lt[M]=Ue,at[M]=z,!M&&0<Ye&&(ie+=1<<Ye);r:{var tn,zn=ie,Gn=Q,Dn=$e,ti=Ue,gr=z,Xa=0,lo=Gn.m,Su=Y(lo,1);if(o(Dn,0,0,zn),Su){var uo=Y(lo,1)+1,kl=Y(lo,1),rs=Y(lo,kl==0?1:8);Dn[rs]=1,uo==2&&(Dn[rs=Y(lo,8)]=1);var Ki=1}else{var vi=l(19),Ed=Y(lo,4)+4;if(19<Ed){Gn.a=3;var _c=0;break r}for(tn=0;tn<Ed;++tn)vi[oe[tn]]=Y(lo,3);var Ih=void 0,Eu=void 0,Ad=Gn,m1=vi,yc=zn,Md=Dn,Rh=0,Qa=Ad.m,Bd=8,Td=c(128,J);i:for(;$(Td,0,7,m1,19);){if(Y(Qa,1)){var g1=2+2*Y(Qa,3);if((Ih=2+Y(Qa,g1))>yc)break i}else Ih=yc;for(Eu=0;Eu<yc&&Ih--;){Le(Qa);var Nd=Td[0+(127&K(Qa))];_e(Qa,Qa.u+Nd.g);var Ql=Nd.value;if(16>Ql)Md[Eu++]=Ql,Ql!=0&&(Bd=Ql);else{var v1=Ql==16,Dd=Ql-16,_1=g[Dd],Od=Y(Qa,u[Dd])+_1;if(Eu+Od>yc)break i;for(var y1=v1?Bd:0;0<Od--;)Md[Eu++]=y1}}Rh=1;break i}Rh||(Ad.a=3),Ki=Rh}(Ki=Ki&&!lo.h)&&(Xa=$(ti,gr,8,Dn,zn)),Ki&&Xa!=0?_c=Xa:(Gn.a=3,_c=0)}if(_c==0)break n;if(Ht&&N[M]==1&&(Ht=Ue[z].g==0),Et+=Ue[z].g,z+=_c,3>=M){var Au,Fh=$e[0];for(Au=1;Au<ie;++Au)$e[Au]>Fh&&(Fh=$e[Au]);Yt+=Fh}}if(We.nd=Ht,We.Qb=0,Ht&&(We.qb=(lt[3][at[3]+0].value<<24|lt[1][at[1]+0].value<<16|lt[2][at[2]+0].value)>>>0,Et==0&&256>lt[0][at[0]+0].value&&(We.Qb=1,We.qb+=lt[0][at[0]+0].value<<8)),We.jc=!We.Qb&&6>Yt,We.jc){var bc,Ea=We;for(bc=0;bc<wi;++bc){var el=bc,tl=Ea.pd[el],wc=Ea.G[0][Ea.H[0]+el];256<=wc.value?(tl.g=wc.g+256,tl.value=wc.value):(tl.g=0,tl.value=0,el>>=qn(wc,8,tl),el>>=qn(Ea.G[1][Ea.H[1]+el],16,tl),el>>=qn(Ea.G[2][Ea.H[2]+el],0,tl),qn(Ea.G[3][Ea.H[3]+el],24,tl))}}}Ot.vc=Rt,Ot.Wb=fn,Ot.Ya=be,Ot.yc=ge,k=1;break t}k=0}if(!(re=k)){T.a=3;break e}if(0<pt){if(ke.ua=1<<pt,!Re(ke.Wa,pt)){T.a=1,re=0;break e}}else ke.ua=0;var jh=T,Id=ae,b1=fe,zh=jh.s,Uh=zh.xc;if(jh.c=Id,jh.i=b1,zh.md=st(Id,Uh),zh.wc=Uh==0?-1:(1<<Uh)-1,S){T.xb=Cu;break e}if((Ge=l(ae*fe))==null){T.a=1,re=0;break e}re=(re=Mr(T,Ge,0,ae,fe,fe,null))&&!pe.h;break e}return re?(W!=null?W[0]=Ge:(t(Ge==null),t(S)),T.$=0,S||Xi(ke)):Xi(ke),re}function vo(f,_){var S=f.c*f.i,T=S+_+16*_;return t(f.c<=_),f.V=l(T),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+S+_,1)}function Uo(f,_){var S=f.C,T=_-S,W=f.V,re=f.Ba+f.c*S;for(t(_<=f.l.o);0<T;){var ae=16<T?16:T,fe=f.l.ma,pe=f.l.width,ke=pe*ae,Ge=fe.ca,pt=fe.tb+pe*S,mt=f.Ta,tt=f.Ua;lr(f,ae,W,re),gi(mt,tt,Ge,pt,ke),Ar(fe,S,S+ae,Ge,pt,pe),T-=ae,W+=ae*f.c,S+=ae}t(S==_),f.C=f.Ma=_}function qo(){this.ub=this.yd=this.td=this.Rb=0}function Ms(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ws(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function _o(){this.Yb=function(){var f=[];return function _(S,T,W){for(var re=W[T],ae=0;ae<re&&(S.push(W.length>T+1?[]:0),!(W.length<T+1));ae++)_(S[ae],T+1,W)}(f,0,[3,11]),f}()}function vl(){this.jb=l(3),this.Wc=p([4,8],_o),this.Xc=p([4,17],_o)}function _l(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function $o(){this.ld=this.La=this.dd=this.tc=0}function za(){this.Na=this.la=0}function yl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yo(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new $o),this.Y=0,this.ya=Array(new yo),this.aa=0,this.l=new br}function pa(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Ua(){this.cb=this.a=0,this.sc="",this.m=new Ie,this.Od=new qo,this.Kc=new Ms,this.ed=new _l,this.Qa=new Ws,this.Ic=this.$c=this.Aa=0,this.D=new bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,Ie),this.ia=0,this.pb=c(4,yl),this.Pa=new vl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new pa),this.Hd=0,this.rb=Array(new za),this.sb=0,this.wa=Array(new $o),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yo),this.L=this.aa=0,this.gd=p([4,2],$o),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function br(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function On(){var f=new Ua;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,rn||(rn=fs)),f}function _n(f,_,S){return f.a==0&&(f.a=_,f.sc=S,f.cb=0),0}function Zs(f,_,S){return 3<=S&&f[_+0]==157&&f[_+1]==1&&f[_+2]==42}function Bs(f,_){if(f==null)return 0;if(f.a=0,f.sc="OK",_==null)return _n(f,2,"null VP8Io passed to VP8GetHeaders()");var S=_.data,T=_.w,W=_.ha;if(4>W)return _n(f,7,"Truncated header.");var re=S[T+0]|S[T+1]<<8|S[T+2]<<16,ae=f.Od;if(ae.Rb=!(1&re),ae.td=re>>1&7,ae.yd=re>>4&1,ae.ub=re>>5,3<ae.td)return _n(f,3,"Incorrect keyframe parameters.");if(!ae.yd)return _n(f,4,"Frame not displayable.");T+=3,W-=3;var fe=f.Kc;if(ae.Rb){if(7>W)return _n(f,7,"cannot parse picture header");if(!Zs(S,T,W))return _n(f,3,"Bad code word");fe.c=16383&(S[T+4]<<8|S[T+3]),fe.Td=S[T+4]>>6,fe.i=16383&(S[T+6]<<8|S[T+5]),fe.Ud=S[T+6]>>6,T+=7,W-=7,f.za=fe.c+15>>4,f.Ub=fe.i+15>>4,_.width=fe.c,_.height=fe.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,o((re=f.Pa).jb,0,255,re.jb.length),t((re=f.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,o(re.Zb,0,0,re.Zb.length),o(re.Lb,0,0,re.Lb)}if(ae.ub>W)return _n(f,7,"bad partition length");Z(re=f.m,S,T,ae.ub),T+=ae.ub,W-=ae.ub,ae.Rb&&(fe.Ld=Se(re),fe.Kd=Se(re)),fe=f.Qa;var pe,ke=f.Pa;if(t(re!=null),t(fe!=null),fe.Cb=Se(re),fe.Cb){if(fe.Bb=Se(re),Se(re)){for(fe.Fb=Se(re),pe=0;4>pe;++pe)fe.Zb[pe]=Se(re)?ve(re,7):0;for(pe=0;4>pe;++pe)fe.Lb[pe]=Se(re)?ve(re,6):0}if(fe.Bb)for(pe=0;3>pe;++pe)ke.jb[pe]=Se(re)?ee(re,8):255}else fe.Bb=0;if(re.Ka)return _n(f,3,"cannot parse segment header");if((fe=f.ed).zd=Se(re),fe.Tb=ee(re,6),fe.wb=ee(re,3),fe.Pc=Se(re),fe.Pc&&Se(re)){for(ke=0;4>ke;++ke)Se(re)&&(fe.vd[ke]=ve(re,6));for(ke=0;4>ke;++ke)Se(re)&&(fe.od[ke]=ve(re,6))}if(f.L=fe.Tb==0?0:fe.zd?1:2,re.Ka)return _n(f,3,"cannot parse filter header");var Ge=W;if(W=pe=T,T=pe+Ge,fe=Ge,f.Xb=(1<<ee(f.m,2))-1,Ge<3*(ke=f.Xb))S=7;else{for(pe+=3*ke,fe-=3*ke,Ge=0;Ge<ke;++Ge){var pt=S[W+0]|S[W+1]<<8|S[W+2]<<16;pt>fe&&(pt=fe),Z(f.Jc[+Ge],S,pe,pt),pe+=pt,fe-=pt,W+=3}Z(f.Jc[+ke],S,pe,fe),S=pe<T?0:5}if(S!=0)return _n(f,S,"cannot parse partitions");for(S=ee(pe=f.m,7),W=Se(pe)?ve(pe,4):0,T=Se(pe)?ve(pe,4):0,fe=Se(pe)?ve(pe,4):0,ke=Se(pe)?ve(pe,4):0,pe=Se(pe)?ve(pe,4):0,Ge=f.Qa,pt=0;4>pt;++pt){if(Ge.Cb){var mt=Ge.Zb[pt];Ge.Fb||(mt+=S)}else{if(0<pt){f.pb[pt]=f.pb[0];continue}mt=S}var tt=f.pb[pt];tt.Sc[0]=At[Xn(mt+W,127)],tt.Sc[1]=$t[Xn(mt+0,127)],tt.Eb[0]=2*At[Xn(mt+T,127)],tt.Eb[1]=101581*$t[Xn(mt+fe,127)]>>16,8>tt.Eb[1]&&(tt.Eb[1]=8),tt.Qc[0]=At[Xn(mt+ke,117)],tt.Qc[1]=$t[Xn(mt+pe,127)],tt.lc=mt+pe}if(!ae.Rb)return _n(f,4,"Not a key frame.");for(Se(re),ae=f.Pa,S=0;4>S;++S){for(W=0;8>W;++W)for(T=0;3>T;++T)for(fe=0;11>fe;++fe)ke=Ae(re,xs[S][W][T][fe])?ee(re,8):mr[S][W][T][fe],ae.Wc[S][W].Yb[T][fe]=ke;for(W=0;17>W;++W)ae.Xc[S][W]=ae.Wc[S][wl[W]]}return f.kc=Se(re),f.kc&&(f.Bd=ee(re,8)),f.cb=1}function fs(f,_,S,T,W,re,ae){var fe=_[W].Yb[S];for(S=0;16>W;++W){if(!Ae(f,fe[S+0]))return W;for(;!Ae(f,fe[S+1]);)if(fe=_[++W].Yb[0],S=0,W==16)return 16;var pe=_[W+1].Yb;if(Ae(f,fe[S+2])){var ke=f,Ge=0;if(Ae(ke,(mt=fe)[(pt=S)+3]))if(Ae(ke,mt[pt+6])){for(fe=0,pt=2*(Ge=Ae(ke,mt[pt+8]))+(mt=Ae(ke,mt[pt+9+Ge])),Ge=0,mt=Sn[pt];mt[fe];++fe)Ge+=Ge+Ae(ke,mt[fe]);Ge+=3+(8<<pt)}else Ae(ke,mt[pt+7])?(Ge=7+2*Ae(ke,165),Ge+=Ae(ke,145)):Ge=5+Ae(ke,159);else Ge=Ae(ke,mt[pt+4])?3+Ae(ke,mt[pt+5]):2;fe=pe[2]}else Ge=1,fe=pe[1];pe=ae+or[W],0>(ke=f).b&&de(ke);var pt,mt=ke.b,tt=(pt=ke.Ca>>1)-(ke.I>>mt)>>31;--ke.b,ke.Ca+=tt,ke.Ca|=1,ke.I-=(pt+1&tt)<<mt,re[pe]=((Ge^tt)-tt)*T[(0<W)+0]}return 16}function wo(f){var _=f.rb[f.sb-1];_.la=0,_.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function bn(f,_){if(f==null)return 0;if(_==null)return _n(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!Bs(f,_))return 0;if(t(f.cb),_.ac==null||_.ac(_)){_.ob&&(f.L=0);var S=Xl[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=_.v-S>>4,f.zb=_.j-S>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=_.o+15+S>>4,f.Hb=_.va+15+S>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var T=f.ed;for(S=0;4>S;++S){var W;if(f.Qa.Cb){var re=f.Qa.Lb[S];f.Qa.Fb||(re+=T.Tb)}else re=T.Tb;for(W=0;1>=W;++W){var ae=f.gd[S][W],fe=re;if(T.Pc&&(fe+=T.vd[0],W&&(fe+=T.od[0])),0<(fe=0>fe?0:63<fe?63:fe)){var pe=fe;0<T.wb&&(pe=4<T.wb?pe>>2:pe>>1)>9-T.wb&&(pe=9-T.wb),1>pe&&(pe=1),ae.dd=pe,ae.tc=2*fe+pe,ae.ld=40<=fe?2:15<=fe?1:0}else ae.tc=0;ae.La=W}}}S=0}else _n(f,6,"Frame setup failed"),S=f.a;if(S=S==0){if(S){f.$c=0,0<f.Aa||(f.Ic=gc);e:{S=f.Ic,T=4*(pe=f.za);var ke=32*pe,Ge=pe+1,pt=0<f.L?pe*(0<f.Aa?2:1):0,mt=(f.Aa==2?2:1)*pe;if((ae=T+832+(W=3*(16*S+Xl[f.L])/2*ke)+(re=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=ae)S=0;else{if(ae>f.Vb){if(f.Vb=0,f.Ec=l(ae),f.Fc=0,f.Ec==null){S=_n(f,1,"no memory during frame initialization.");break e}f.Vb=ae}ae=f.Ec,fe=f.Fc,f.Ac=ae,f.Bc=fe,fe+=T,f.Gd=c(ke,pa),f.Hd=0,f.rb=c(Ge+1,za),f.sb=1,f.wa=pt?c(pt,$o):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=pe),t(!0),f.oc=ae,f.pc=fe,fe+=832,f.ya=c(mt,yo),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=pe),f.R=16*pe,f.B=8*pe,pe=(ke=Xl[f.L])*f.R,ke=ke/2*f.B,f.sa=ae,f.ta=fe+pe,f.qa=f.sa,f.ra=f.ta+16*S*f.R+ke,f.Ha=f.qa,f.Ia=f.ra+8*S*f.B+ke,f.$c=0,fe+=W,f.mb=re?ae:null,f.nb=re?fe:null,t(fe+re<=f.Fc+f.Vb),wo(f),o(f.Ac,f.Bc,0,T),S=1}}if(S){if(_.ka=0,_.y=f.sa,_.O=f.ta,_.f=f.qa,_.N=f.ra,_.ea=f.Ha,_.Vd=f.Ia,_.fa=f.R,_.Rc=f.B,_.F=null,_.J=0,!Za){for(S=-255;255>=S;++S)Qn[255+S]=0>S?-S:S;for(S=-1020;1020>=S;++S)ns[1020+S]=-128>S?-128:127<S?127:S;for(S=-112;112>=S;++S)oo[112+S]=-16>S?-16:15<S?15:S;for(S=-255;510>=S;++S)bs[255+S]=0>S?0:255<S?255:S;Za=1}zs=xo,Rr=Vo,_s=ds,ir=ui,Gi=ps,ci=qa,Mo=wa,Pa=ms,Sa=Nr,Hi=Yo,fr=Ko,io=Jo,ys=Ci,na=Ga,ro=ba,so=sn,Us=Qi,Fr=Po,zr[0]=Nn,zr[1]=ma,zr[2]=yn,zr[3]=Br,zr[4]=va,zr[5]=Xs,zr[6]=Wo,zr[7]=Tr,zr[8]=_a,zr[9]=Ds,is[0]=Go,is[1]=ga,is[2]=Qr,is[3]=Ns,is[4]=Li,is[5]=$a,is[6]=Ho,Cr[0]=Os,Cr[1]=Js,Cr[2]=Lo,Cr[3]=pi,Cr[4]=Co,Cr[5]=Va,Cr[6]=Zo,S=1}else S=0}S&&(S=function(tt,xt){for(tt.M=0;tt.M<tt.Va;++tt.M){var bt,Ze=tt.Jc[tt.M&tt.Xb],Xe=tt.m,Ct=tt;for(bt=0;bt<Ct.za;++bt){var Mt=Xe,St=Ct,Zt=St.Ac,Ft=St.Bc+4*bt,ln=St.zc,s=St.ya[St.aa+bt];if(St.Qa.Bb?s.$b=Ae(Mt,St.Pa.jb[0])?2+Ae(Mt,St.Pa.jb[2]):Ae(Mt,St.Pa.jb[1]):s.$b=0,St.kc&&(s.Ad=Ae(Mt,St.Bd)),s.Za=!Ae(Mt,145)+0,s.Za){var a=s.Ob,h=0;for(St=0;4>St;++St){var d,v=ln[0+St];for(d=0;4>d;++d){v=hi[Zt[Ft+d]][v];for(var k=Ei[Ae(Mt,v[0])];0<k;)k=Ei[2*k+Ae(Mt,v[k])];v=-k,Zt[Ft+d]=v}r(a,h,Zt,Ft,4),h+=4,ln[0+St]=v}}else v=Ae(Mt,156)?Ae(Mt,128)?1:3:Ae(Mt,163)?2:0,s.Ob[0]=v,o(Zt,Ft,v,4),o(ln,0,v,4);s.Dd=Ae(Mt,142)?Ae(Mt,114)?Ae(Mt,183)?1:3:2:0}if(Ct.m.Ka)return _n(tt,7,"Premature end-of-partition0 encountered.");for(;tt.ja<tt.za;++tt.ja){if(Ct=Ze,Mt=(Xe=tt).rb[Xe.sb-1],Zt=Xe.rb[Xe.sb+Xe.ja],bt=Xe.ya[Xe.aa+Xe.ja],Ft=Xe.kc?bt.Ad:0)Mt.la=Zt.la=0,bt.Za||(Mt.Na=Zt.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var A,M;if(Mt=Zt,Zt=Ct,Ft=Xe.Pa.Xc,ln=Xe.ya[Xe.aa+Xe.ja],s=Xe.pb[ln.$b],St=ln.ad,a=0,h=Xe.rb[Xe.sb-1],v=d=0,o(St,a,0,384),ln.Za)var z=0,Q=Ft[3];else{k=l(16);var Ne=Mt.Na+h.Na;if(Ne=rn(Zt,Ft[1],Ne,s.Eb,0,k,0),Mt.Na=h.Na=(0<Ne)+0,1<Ne)zs(k,0,St,a);else{var Ee=k[0]+3>>3;for(k=0;256>k;k+=16)St[a+k]=Ee}z=1,Q=Ft[0]}var Ye=15&Mt.la,ht=15&h.la;for(k=0;4>k;++k){var Pt=1&ht;for(Ee=M=0;4>Ee;++Ee)Ye=Ye>>1|(Pt=(Ne=rn(Zt,Q,Ne=Pt+(1&Ye),s.Sc,z,St,a))>z)<<7,M=M<<2|(3<Ne?3:1<Ne?2:St[a+0]!=0),a+=16;Ye>>=4,ht=ht>>1|Pt<<7,d=(d<<8|M)>>>0}for(Q=Ye,z=ht>>4,A=0;4>A;A+=2){for(M=0,Ye=Mt.la>>4+A,ht=h.la>>4+A,k=0;2>k;++k){for(Pt=1&ht,Ee=0;2>Ee;++Ee)Ne=Pt+(1&Ye),Ye=Ye>>1|(Pt=0<(Ne=rn(Zt,Ft[2],Ne,s.Qc,0,St,a)))<<3,M=M<<2|(3<Ne?3:1<Ne?2:St[a+0]!=0),a+=16;Ye>>=2,ht=ht>>1|Pt<<5}v|=M<<4*A,Q|=Ye<<4<<A,z|=(240&ht)<<A}Mt.la=Q,h.la=z,ln.Hc=d,ln.Gc=v,ln.ia=43690&v?0:s.ia,Ft=!(d|v)}if(0<Xe.L&&(Xe.wa[Xe.Y+Xe.ja]=Xe.gd[bt.$b][bt.Za],Xe.wa[Xe.Y+Xe.ja].La|=!Ft),Ct.Ka)return _n(tt,7,"Premature end-of-file encountered.")}if(wo(tt),Xe=xt,Ct=1,bt=(Ze=tt).D,Mt=0<Ze.L&&Ze.M>=Ze.zb&&Ze.M<=Ze.Va,Ze.Aa==0)e:{if(bt.M=Ze.M,bt.uc=Mt,Ca(Ze,bt),Ct=1,bt=(M=Ze.D).Nb,Mt=(v=Xl[Ze.L])*Ze.R,Zt=v/2*Ze.B,k=16*bt*Ze.R,Ee=8*bt*Ze.B,Ft=Ze.sa,ln=Ze.ta-Mt+k,s=Ze.qa,St=Ze.ra-Zt+Ee,a=Ze.Ha,h=Ze.Ia-Zt+Ee,ht=(Ye=M.M)==0,d=Ye>=Ze.Va-1,Ze.Aa==2&&Ca(Ze,M),M.uc)for(Pt=(Ne=Ze).D.M,t(Ne.D.uc),M=Ne.yb;M<Ne.Hb;++M){z=M,Q=Pt;var Ot=(Rt=(ie=Ne).D).Nb;A=ie.R;var Rt=Rt.wa[Rt.Y+z],fn=ie.sa,Te=ie.ta+16*Ot*A+16*z,Fe=Rt.dd,He=Rt.tc;if(He!=0)if(t(3<=He),ie.L==1)0<z&&so(fn,Te,A,He+4),Rt.La&&Fr(fn,Te,A,He),0<Q&&ro(fn,Te,A,He+4),Rt.La&&Us(fn,Te,A,He);else{var gt=ie.B,et=ie.qa,ft=ie.ra+8*Ot*gt+8*z,U=ie.Ha,ie=ie.Ia+8*Ot*gt+8*z;Ot=Rt.ld,0<z&&(Pa(fn,Te,A,He+4,Fe,Ot),Hi(et,ft,U,ie,gt,He+4,Fe,Ot)),Rt.La&&(io(fn,Te,A,He,Fe,Ot),na(et,ft,U,ie,gt,He,Fe,Ot)),0<Q&&(Mo(fn,Te,A,He+4,Fe,Ot),Sa(et,ft,U,ie,gt,He+4,Fe,Ot)),Rt.La&&(fr(fn,Te,A,He,Fe,Ot),ys(et,ft,U,ie,gt,He,Fe,Ot))}}if(Ze.ia&&alert("todo:DitherRow"),Xe.put!=null){if(M=16*Ye,Ye=16*(Ye+1),ht?(Xe.y=Ze.sa,Xe.O=Ze.ta+k,Xe.f=Ze.qa,Xe.N=Ze.ra+Ee,Xe.ea=Ze.Ha,Xe.W=Ze.Ia+Ee):(M-=v,Xe.y=Ft,Xe.O=ln,Xe.f=s,Xe.N=St,Xe.ea=a,Xe.W=h),d||(Ye-=v),Ye>Xe.o&&(Ye=Xe.o),Xe.F=null,Xe.J=null,Ze.Fa!=null&&0<Ze.Fa.length&&M<Ye&&(Xe.J=mi(Ze,Xe,M,Ye-M),Xe.F=Ze.mb,Xe.F==null&&Xe.F.length==0)){Ct=_n(Ze,3,"Could not decode alpha data.");break e}M<Xe.j&&(v=Xe.j-M,M=Xe.j,t(!(1&v)),Xe.O+=Ze.R*v,Xe.N+=Ze.B*(v>>1),Xe.W+=Ze.B*(v>>1),Xe.F!=null&&(Xe.J+=Xe.width*v)),M<Ye&&(Xe.O+=Xe.v,Xe.N+=Xe.v>>1,Xe.W+=Xe.v>>1,Xe.F!=null&&(Xe.J+=Xe.v),Xe.ka=M-Xe.j,Xe.U=Xe.va-Xe.v,Xe.T=Ye-M,Ct=Xe.put(Xe))}bt+1!=Ze.Ic||d||(r(Ze.sa,Ze.ta-Mt,Ft,ln+16*Ze.R,Mt),r(Ze.qa,Ze.ra-Zt,s,St+8*Ze.B,Zt),r(Ze.Ha,Ze.Ia-Zt,a,h+8*Ze.B,Zt))}if(!Ct)return _n(tt,6,"Output aborted.")}return 1}(f,_)),_.bc!=null&&_.bc(_),S&=1}return S?(f.cb=0,S):0}function jn(f,_,S,T,W){W=f[_+S+32*T]+(W>>3),f[_+S+32*T]=-256&W?0>W?0:255:W}function Ks(f,_,S,T,W,re){jn(f,_,0,S,T+W),jn(f,_,1,S,T+re),jn(f,_,2,S,T-re),jn(f,_,3,S,T-W)}function Oi(f){return(20091*f>>16)+f}function $i(f,_,S,T){var W,re=0,ae=l(16);for(W=0;4>W;++W){var fe=f[_+0]+f[_+8],pe=f[_+0]-f[_+8],ke=(35468*f[_+4]>>16)-Oi(f[_+12]),Ge=Oi(f[_+4])+(35468*f[_+12]>>16);ae[re+0]=fe+Ge,ae[re+1]=pe+ke,ae[re+2]=pe-ke,ae[re+3]=fe-Ge,re+=4,_++}for(W=re=0;4>W;++W)fe=(f=ae[re+0]+4)+ae[re+8],pe=f-ae[re+8],ke=(35468*ae[re+4]>>16)-Oi(ae[re+12]),jn(S,T,0,0,fe+(Ge=Oi(ae[re+4])+(35468*ae[re+12]>>16))),jn(S,T,1,0,pe+ke),jn(S,T,2,0,pe-ke),jn(S,T,3,0,fe-Ge),re++,T+=32}function qa(f,_,S,T){var W=f[_+0]+4,re=35468*f[_+4]>>16,ae=Oi(f[_+4]),fe=35468*f[_+1]>>16;Ks(S,T,0,W+ae,f=Oi(f[_+1]),fe),Ks(S,T,1,W+re,f,fe),Ks(S,T,2,W-re,f,fe),Ks(S,T,3,W-ae,f,fe)}function Vo(f,_,S,T,W){$i(f,_,S,T),W&&$i(f,_+16,S,T+4)}function ds(f,_,S,T){Rr(f,_+0,S,T,1),Rr(f,_+32,S,T+128,1)}function ui(f,_,S,T){var W;for(f=f[_+0]+4,W=0;4>W;++W)for(_=0;4>_;++_)jn(S,T,_,W,f)}function ps(f,_,S,T){f[_+0]&&ir(f,_+0,S,T),f[_+16]&&ir(f,_+16,S,T+4),f[_+32]&&ir(f,_+32,S,T+128),f[_+48]&&ir(f,_+48,S,T+128+4)}function xo(f,_,S,T){var W,re=l(16);for(W=0;4>W;++W){var ae=f[_+0+W]+f[_+12+W],fe=f[_+4+W]+f[_+8+W],pe=f[_+4+W]-f[_+8+W],ke=f[_+0+W]-f[_+12+W];re[0+W]=ae+fe,re[8+W]=ae-fe,re[4+W]=ke+pe,re[12+W]=ke-pe}for(W=0;4>W;++W)ae=(f=re[0+4*W]+3)+re[3+4*W],fe=re[1+4*W]+re[2+4*W],pe=re[1+4*W]-re[2+4*W],ke=f-re[3+4*W],S[T+0]=ae+fe>>3,S[T+16]=ke+pe>>3,S[T+32]=ae-fe>>3,S[T+48]=ke-pe>>3,T+=64}function Ts(f,_,S){var T,W=_-32,re=ei,ae=255-f[W-1];for(T=0;T<S;++T){var fe,pe=re,ke=ae+f[_-1];for(fe=0;fe<S;++fe)f[_+fe]=pe[ke+f[W+fe]];_+=32}}function ma(f,_){Ts(f,_,4)}function Js(f,_){Ts(f,_,8)}function ga(f,_){Ts(f,_,16)}function Qr(f,_){var S;for(S=0;16>S;++S)r(f,_+32*S,f,_-32,16)}function Ns(f,_){var S;for(S=16;0<S;--S)o(f,_,f[_-1],16),_+=32}function Ys(f,_,S){var T;for(T=0;16>T;++T)o(_,S+32*T,f,16)}function Go(f,_){var S,T=16;for(S=0;16>S;++S)T+=f[_-1+32*S]+f[_+S-32];Ys(T>>5,f,_)}function Li(f,_){var S,T=8;for(S=0;16>S;++S)T+=f[_-1+32*S];Ys(T>>4,f,_)}function $a(f,_){var S,T=8;for(S=0;16>S;++S)T+=f[_+S-32];Ys(T>>4,f,_)}function Ho(f,_){Ys(128,f,_)}function gn(f,_,S){return f+2*_+S+2>>2}function yn(f,_){var S,T=_-32;for(T=new Uint8Array([gn(f[T-1],f[T+0],f[T+1]),gn(f[T+0],f[T+1],f[T+2]),gn(f[T+1],f[T+2],f[T+3]),gn(f[T+2],f[T+3],f[T+4])]),S=0;4>S;++S)r(f,_+32*S,T,0,T.length)}function Br(f,_){var S=f[_-1],T=f[_-1+32],W=f[_-1+64],re=f[_-1+96];Ke(f,_+0,16843009*gn(f[_-1-32],S,T)),Ke(f,_+32,16843009*gn(S,T,W)),Ke(f,_+64,16843009*gn(T,W,re)),Ke(f,_+96,16843009*gn(W,re,re))}function Nn(f,_){var S,T=4;for(S=0;4>S;++S)T+=f[_+S-32]+f[_-1+32*S];for(T>>=3,S=0;4>S;++S)o(f,_+32*S,T,4)}function va(f,_){var S=f[_-1+0],T=f[_-1+32],W=f[_-1+64],re=f[_-1-32],ae=f[_+0-32],fe=f[_+1-32],pe=f[_+2-32],ke=f[_+3-32];f[_+0+96]=gn(T,W,f[_-1+96]),f[_+1+96]=f[_+0+64]=gn(S,T,W),f[_+2+96]=f[_+1+64]=f[_+0+32]=gn(re,S,T),f[_+3+96]=f[_+2+64]=f[_+1+32]=f[_+0+0]=gn(ae,re,S),f[_+3+64]=f[_+2+32]=f[_+1+0]=gn(fe,ae,re),f[_+3+32]=f[_+2+0]=gn(pe,fe,ae),f[_+3+0]=gn(ke,pe,fe)}function Wo(f,_){var S=f[_+1-32],T=f[_+2-32],W=f[_+3-32],re=f[_+4-32],ae=f[_+5-32],fe=f[_+6-32],pe=f[_+7-32];f[_+0+0]=gn(f[_+0-32],S,T),f[_+1+0]=f[_+0+32]=gn(S,T,W),f[_+2+0]=f[_+1+32]=f[_+0+64]=gn(T,W,re),f[_+3+0]=f[_+2+32]=f[_+1+64]=f[_+0+96]=gn(W,re,ae),f[_+3+32]=f[_+2+64]=f[_+1+96]=gn(re,ae,fe),f[_+3+64]=f[_+2+96]=gn(ae,fe,pe),f[_+3+96]=gn(fe,pe,pe)}function Xs(f,_){var S=f[_-1+0],T=f[_-1+32],W=f[_-1+64],re=f[_-1-32],ae=f[_+0-32],fe=f[_+1-32],pe=f[_+2-32],ke=f[_+3-32];f[_+0+0]=f[_+1+64]=re+ae+1>>1,f[_+1+0]=f[_+2+64]=ae+fe+1>>1,f[_+2+0]=f[_+3+64]=fe+pe+1>>1,f[_+3+0]=pe+ke+1>>1,f[_+0+96]=gn(W,T,S),f[_+0+64]=gn(T,S,re),f[_+0+32]=f[_+1+96]=gn(S,re,ae),f[_+1+32]=f[_+2+96]=gn(re,ae,fe),f[_+2+32]=f[_+3+96]=gn(ae,fe,pe),f[_+3+32]=gn(fe,pe,ke)}function Tr(f,_){var S=f[_+0-32],T=f[_+1-32],W=f[_+2-32],re=f[_+3-32],ae=f[_+4-32],fe=f[_+5-32],pe=f[_+6-32],ke=f[_+7-32];f[_+0+0]=S+T+1>>1,f[_+1+0]=f[_+0+64]=T+W+1>>1,f[_+2+0]=f[_+1+64]=W+re+1>>1,f[_+3+0]=f[_+2+64]=re+ae+1>>1,f[_+0+32]=gn(S,T,W),f[_+1+32]=f[_+0+96]=gn(T,W,re),f[_+2+32]=f[_+1+96]=gn(W,re,ae),f[_+3+32]=f[_+2+96]=gn(re,ae,fe),f[_+3+64]=gn(ae,fe,pe),f[_+3+96]=gn(fe,pe,ke)}function Ds(f,_){var S=f[_-1+0],T=f[_-1+32],W=f[_-1+64],re=f[_-1+96];f[_+0+0]=S+T+1>>1,f[_+2+0]=f[_+0+32]=T+W+1>>1,f[_+2+32]=f[_+0+64]=W+re+1>>1,f[_+1+0]=gn(S,T,W),f[_+3+0]=f[_+1+32]=gn(T,W,re),f[_+3+32]=f[_+1+64]=gn(W,re,re),f[_+3+64]=f[_+2+64]=f[_+0+96]=f[_+1+96]=f[_+2+96]=f[_+3+96]=re}function _a(f,_){var S=f[_-1+0],T=f[_-1+32],W=f[_-1+64],re=f[_-1+96],ae=f[_-1-32],fe=f[_+0-32],pe=f[_+1-32],ke=f[_+2-32];f[_+0+0]=f[_+2+32]=S+ae+1>>1,f[_+0+32]=f[_+2+64]=T+S+1>>1,f[_+0+64]=f[_+2+96]=W+T+1>>1,f[_+0+96]=re+W+1>>1,f[_+3+0]=gn(fe,pe,ke),f[_+2+0]=gn(ae,fe,pe),f[_+1+0]=f[_+3+32]=gn(S,ae,fe),f[_+1+32]=f[_+3+64]=gn(T,S,ae),f[_+1+64]=f[_+3+96]=gn(W,T,S),f[_+1+96]=gn(re,W,T)}function Lo(f,_){var S;for(S=0;8>S;++S)r(f,_+32*S,f,_-32,8)}function pi(f,_){var S;for(S=0;8>S;++S)o(f,_,f[_-1],8),_+=32}function wr(f,_,S){var T;for(T=0;8>T;++T)o(_,S+32*T,f,8)}function Os(f,_){var S,T=8;for(S=0;8>S;++S)T+=f[_+S-32]+f[_-1+32*S];wr(T>>4,f,_)}function Va(f,_){var S,T=4;for(S=0;8>S;++S)T+=f[_+S-32];wr(T>>3,f,_)}function Co(f,_){var S,T=4;for(S=0;8>S;++S)T+=f[_-1+32*S];wr(T>>3,f,_)}function Zo(f,_){wr(128,f,_)}function Qs(f,_,S){var T=f[_-S],W=f[_+0],re=3*(W-T)+ao[1020+f[_-2*S]-f[_+S]],ae=Si[112+(re+4>>3)];f[_-S]=ei[255+T+Si[112+(re+3>>3)]],f[_+0]=ei[255+W-ae]}function ko(f,_,S,T){var W=f[_+0],re=f[_+S];return dr[255+f[_-2*S]-f[_-S]]>T||dr[255+re-W]>T}function ya(f,_,S,T){return 4*dr[255+f[_-S]-f[_+0]]+dr[255+f[_-2*S]-f[_+S]]<=T}function Mn(f,_,S,T,W){var re=f[_-3*S],ae=f[_-2*S],fe=f[_-S],pe=f[_+0],ke=f[_+S],Ge=f[_+2*S],pt=f[_+3*S];return 4*dr[255+fe-pe]+dr[255+ae-ke]>T?0:dr[255+f[_-4*S]-re]<=W&&dr[255+re-ae]<=W&&dr[255+ae-fe]<=W&&dr[255+pt-Ge]<=W&&dr[255+Ge-ke]<=W&&dr[255+ke-pe]<=W}function ba(f,_,S,T){var W=2*T+1;for(T=0;16>T;++T)ya(f,_+T,S,W)&&Qs(f,_+T,S)}function sn(f,_,S,T){var W=2*T+1;for(T=0;16>T;++T)ya(f,_+T*S,1,W)&&Qs(f,_+T*S,1)}function Qi(f,_,S,T){var W;for(W=3;0<W;--W)ba(f,_+=4*S,S,T)}function Po(f,_,S,T){var W;for(W=3;0<W;--W)sn(f,_+=4,S,T)}function eo(f,_,S,T,W,re,ae,fe){for(re=2*re+1;0<W--;){if(Mn(f,_,S,re,ae))if(ko(f,_,S,fe))Qs(f,_,S);else{var pe=f,ke=_,Ge=S,pt=pe[ke-2*Ge],mt=pe[ke-Ge],tt=pe[ke+0],xt=pe[ke+Ge],bt=pe[ke+2*Ge],Ze=27*(Ct=ao[1020+3*(tt-mt)+ao[1020+pt-xt]])+63>>7,Xe=18*Ct+63>>7,Ct=9*Ct+63>>7;pe[ke-3*Ge]=ei[255+pe[ke-3*Ge]+Ct],pe[ke-2*Ge]=ei[255+pt+Xe],pe[ke-Ge]=ei[255+mt+Ze],pe[ke+0]=ei[255+tt-Ze],pe[ke+Ge]=ei[255+xt-Xe],pe[ke+2*Ge]=ei[255+bt-Ct]}_+=T}}function ur(f,_,S,T,W,re,ae,fe){for(re=2*re+1;0<W--;){if(Mn(f,_,S,re,ae))if(ko(f,_,S,fe))Qs(f,_,S);else{var pe=f,ke=_,Ge=S,pt=pe[ke-Ge],mt=pe[ke+0],tt=pe[ke+Ge],xt=Si[112+((bt=3*(mt-pt))+4>>3)],bt=Si[112+(bt+3>>3)],Ze=xt+1>>1;pe[ke-2*Ge]=ei[255+pe[ke-2*Ge]+Ze],pe[ke-Ge]=ei[255+pt+bt],pe[ke+0]=ei[255+mt-xt],pe[ke+Ge]=ei[255+tt-Ze]}_+=T}}function wa(f,_,S,T,W,re){eo(f,_,S,1,16,T,W,re)}function ms(f,_,S,T,W,re){eo(f,_,1,S,16,T,W,re)}function Ko(f,_,S,T,W,re){var ae;for(ae=3;0<ae;--ae)ur(f,_+=4*S,S,1,16,T,W,re)}function Jo(f,_,S,T,W,re){var ae;for(ae=3;0<ae;--ae)ur(f,_+=4,1,S,16,T,W,re)}function Nr(f,_,S,T,W,re,ae,fe){eo(f,_,W,1,8,re,ae,fe),eo(S,T,W,1,8,re,ae,fe)}function Yo(f,_,S,T,W,re,ae,fe){eo(f,_,1,W,8,re,ae,fe),eo(S,T,1,W,8,re,ae,fe)}function Ci(f,_,S,T,W,re,ae,fe){ur(f,_+4*W,W,1,8,re,ae,fe),ur(S,T+4*W,W,1,8,re,ae,fe)}function Ga(f,_,S,T,W,re,ae,fe){ur(f,_+4,1,W,8,re,ae,fe),ur(S,T+4,1,W,8,re,ae,fe)}function So(){this.ba=new xi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Dr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Xo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xa(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new te,this.yc=new J}function La(){this.xb=this.a=0,this.l=new br,this.ca=new xi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xa,this.ab=0,this.gc=c(4,Xo),this.Oc=0}function Qo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new br,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function to(f,_,S,T,W,re,ae){for(f=f==null?0:f[_+0],_=0;_<ae;++_)W[re+_]=f+S[T+_]&255,f=W[re+_]}function Eo(f,_,S,T,W,re,ae){var fe;if(f==null)to(null,null,S,T,W,re,ae);else for(fe=0;fe<ae;++fe)W[re+fe]=f[_+fe]+S[T+fe]&255}function no(f,_,S,T,W,re,ae){if(f==null)to(null,null,S,T,W,re,ae);else{var fe,pe=f[_+0],ke=pe,Ge=pe;for(fe=0;fe<ae;++fe)ke=Ge+(pe=f[_+fe])-ke,Ge=S[T+fe]+(-256&ke?0>ke?0:255:ke)&255,ke=pe,W[re+fe]=Ge}}function mi(f,_,S,T){var W=_.width,re=_.o;if(t(f!=null&&_!=null),0>S||0>=T||S+T>re)return null;if(!f.Cc){if(f.ga==null){var ae;if(f.ga=new Qo,(ae=f.ga==null)||(ae=_.width*_.o,t(f.Gb.length==0),f.Gb=l(ae),f.Uc=0,f.Gb==null?ae=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,ae=1),ae=!ae),!ae){ae=f.ga;var fe=f.Fa,pe=f.P,ke=f.qc,Ge=f.mb,pt=f.nb,mt=pe+1,tt=ke-1,xt=ae.l;if(t(fe!=null&&Ge!=null&&_!=null),Zn[0]=null,Zn[1]=to,Zn[2]=Eo,Zn[3]=no,ae.ca=Ge,ae.tb=pt,ae.c=_.width,ae.i=_.height,t(0<ae.c&&0<ae.i),1>=ke)_=0;else if(ae.$a=fe[pe+0]>>0&3,ae.Z=fe[pe+0]>>2&3,ae.Lc=fe[pe+0]>>4&3,pe=fe[pe+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||pe)_=0;else if(xt.put=Sr,xt.ac=li,xt.bc=Er,xt.ma=ae,xt.width=_.width,xt.height=_.height,xt.Da=_.Da,xt.v=_.v,xt.va=_.va,xt.j=_.j,xt.o=_.o,ae.$a)e:{t(ae.$a==1),_=yr();t:for(;;){if(_==null){_=0;break e}if(t(ae!=null),ae.mc=_,_.c=ae.c,_.i=ae.i,_.l=ae.l,_.l.ma=ae,_.l.width=ae.c,_.l.height=ae.i,_.a=0,V(_.m,fe,mt,tt),!hs(ae.c,ae.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&Xr(_.s)?(ae.ic=1,fe=_.c*_.i,_.Ta=null,_.Ua=0,_.V=l(fe),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(ae.ic=0,_=vo(_,ae.c)),!_))break t;_=1;break e}ae.mc=null,_=0}else _=tt>=ae.c*ae.i;ae=!_}if(ae)return null;f.ga.Lc!=1?f.Ga=0:T=re-S}t(f.ga!=null),t(S+T<=re);e:{if(_=(fe=f.ga).c,re=fe.l.o,fe.$a==0){if(mt=f.rc,tt=f.Vc,xt=f.Fa,pe=f.P+1+S*_,ke=f.mb,Ge=f.nb+S*_,t(pe<=f.P+f.qc),fe.Z!=0)for(t(Zn[fe.Z]!=null),ae=0;ae<T;++ae)Zn[fe.Z](mt,tt,xt,pe,ke,Ge,_),mt=ke,tt=Ge,Ge+=_,pe+=_;else for(ae=0;ae<T;++ae)r(ke,Ge,xt,pe,_),mt=ke,tt=Ge,Ge+=_,pe+=_;f.rc=mt,f.Vc=tt}else{if(t(fe.mc!=null),_=S+T,t((ae=fe.mc)!=null),t(_<=ae.i),ae.C>=_)_=1;else if(fe.ic||nt(),fe.ic){fe=ae.V,mt=ae.Ba,tt=ae.c;var bt=ae.i,Ze=(xt=1,pe=ae.$/tt,ke=ae.$%tt,Ge=ae.m,pt=ae.s,ae.$),Xe=tt*bt,Ct=tt*_,Mt=pt.wc,St=Ze<Ct?Ut(pt,ke,pe):null;t(Ze<=Xe),t(_<=bt),t(Xr(pt));t:for(;;){for(;!Ge.h&&Ze<Ct;){if(ke&Mt||(St=Ut(pt,ke,pe)),t(St!=null),Le(Ge),256>(bt=ar(St.G[0],St.H[0],Ge)))fe[mt+Ze]=bt,++Ze,++ke>=tt&&(ke=0,++pe<=_&&!(pe%16)&&_r(ae,pe));else{if(!(280>bt)){xt=0;break t}bt=Yr(bt-256,Ge);var Zt,Ft=ar(St.G[4],St.H[4],Ge);if(Le(Ge),!(Ze>=(Ft=cs(tt,Ft=Yr(Ft,Ge)))&&Xe-Ze>=bt)){xt=0;break t}for(Zt=0;Zt<bt;++Zt)fe[mt+Ze+Zt]=fe[mt+Ze+Zt-Ft];for(Ze+=bt,ke+=bt;ke>=tt;)ke-=tt,++pe<=_&&!(pe%16)&&_r(ae,pe);Ze<Ct&&ke&Mt&&(St=Ut(pt,ke,pe))}t(Ge.h==he(Ge))}_r(ae,pe>_?_:pe);break t}!xt||Ge.h&&Ze<Xe?(xt=0,ae.a=Ge.h?5:3):ae.$=Ze,_=xt}else _=Mr(ae,ae.V,ae.Ba,ae.c,ae.i,_,Uo);if(!_){T=0;break e}}S+T>=re&&(f.Cc=1),T=1}if(!T)return null;if(f.Cc&&((T=f.ga)!=null&&(T.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+S*W}function x(f,_,S,T,W,re){for(;0<W--;){var ae,fe=f,pe=_+(S?1:0),ke=f,Ge=_+(S?0:3);for(ae=0;ae<T;++ae){var pt=ke[Ge+4*ae];pt!=255&&(pt*=32897,fe[pe+4*ae+0]=fe[pe+4*ae+0]*pt>>23,fe[pe+4*ae+1]=fe[pe+4*ae+1]*pt>>23,fe[pe+4*ae+2]=fe[pe+4*ae+2]*pt>>23)}_+=re}}function H(f,_,S,T,W){for(;0<T--;){var re;for(re=0;re<S;++re){var ae=f[_+2*re+0],fe=15&(ke=f[_+2*re+1]),pe=4369*fe,ke=(240&ke|ke>>4)*pe>>16;f[_+2*re+0]=(240&ae|ae>>4)*pe>>16&240|(15&ae|ae<<4)*pe>>16>>4&15,f[_+2*re+1]=240&ke|fe}_+=W}}function Me(f,_,S,T,W,re,ae,fe){var pe,ke,Ge=255;for(ke=0;ke<W;++ke){for(pe=0;pe<T;++pe){var pt=f[_+pe];re[ae+4*pe]=pt,Ge&=pt}_+=S,ae+=fe}return Ge!=255}function qe(f,_,S,T,W){var re;for(re=0;re<W;++re)S[T+re]=f[_+re]>>8}function nt(){Ri=x,Wn=H,Vn=Me,gi=qe}function yt(f,_,S){ue[f]=function(T,W,re,ae,fe,pe,ke,Ge,pt,mt,tt,xt,bt,Ze,Xe,Ct,Mt){var St,Zt=Mt-1>>1,Ft=fe[pe+0]|ke[Ge+0]<<16,ln=pt[mt+0]|tt[xt+0]<<16;t(T!=null);var s=3*Ft+ln+131074>>2;for(_(T[W+0],255&s,s>>16,bt,Ze),re!=null&&(s=3*ln+Ft+131074>>2,_(re[ae+0],255&s,s>>16,Xe,Ct)),St=1;St<=Zt;++St){var a=fe[pe+St]|ke[Ge+St]<<16,h=pt[mt+St]|tt[xt+St]<<16,d=Ft+a+ln+h+524296,v=d+2*(a+ln)>>3;s=v+Ft>>1,Ft=(d=d+2*(Ft+h)>>3)+a>>1,_(T[W+2*St-1],255&s,s>>16,bt,Ze+(2*St-1)*S),_(T[W+2*St-0],255&Ft,Ft>>16,bt,Ze+(2*St-0)*S),re!=null&&(s=d+ln>>1,Ft=v+h>>1,_(re[ae+2*St-1],255&s,s>>16,Xe,Ct+(2*St-1)*S),_(re[ae+2*St+0],255&Ft,Ft>>16,Xe,Ct+(2*St+0)*S)),Ft=a,ln=h}1&Mt||(s=3*Ft+ln+131074>>2,_(T[W+Mt-1],255&s,s>>16,bt,Ze+(Mt-1)*S),re!=null&&(s=3*ln+Ft+131074>>2,_(re[ae+Mt-1],255&s,s>>16,Xe,Ct+(Mt-1)*S)))}}function Bt(){Zi[pr]=ku,Zi[hn]=Hl,Zi[Ka]=Ls,Zi[Bo]=To,Zi[jr]=Ja,Zi[Wi]=Wl,Zi[bl]=fc,Zi[rr]=Hl,Zi[sr]=To,Zi[ws]=Ja,Zi[i]=Wl}function qt(f){return f&-16384?0>f?0:255:f>>Nh}function Wt(f,_){return qt((19077*f>>8)+(26149*_>>8)-14234)}function nn(f,_,S){return qt((19077*f>>8)-(6419*_>>8)-(13320*S>>8)+8708)}function pn(f,_){return qt((19077*f>>8)+(33050*_>>8)-17685)}function Bn(f,_,S,T,W){T[W+0]=Wt(f,S),T[W+1]=nn(f,_,S),T[W+2]=pn(f,_)}function ri(f,_,S,T,W){T[W+0]=pn(f,_),T[W+1]=nn(f,_,S),T[W+2]=Wt(f,S)}function Rn(f,_,S,T,W){var re=nn(f,_,S);_=re<<3&224|pn(f,_)>>3,T[W+0]=248&Wt(f,S)|re>>5,T[W+1]=_}function $n(f,_,S,T,W){var re=240&pn(f,_)|15;T[W+0]=240&Wt(f,S)|nn(f,_,S)>>4,T[W+1]=re}function ki(f,_,S,T,W){T[W+0]=255,Bn(f,_,S,T,W+1)}function bi(f,_,S,T,W){ri(f,_,S,T,W),T[W+3]=255}function xr(f,_,S,T,W){Bn(f,_,S,T,W),T[W+3]=255}function Xn(f,_){return 0>f?0:f>_?_:f}function er(f,_,S){ue[f]=function(T,W,re,ae,fe,pe,ke,Ge,pt){for(var mt=Ge+(-2&pt)*S;Ge!=mt;)_(T[W+0],re[ae+0],fe[pe+0],ke,Ge),_(T[W+1],re[ae+0],fe[pe+0],ke,Ge+S),W+=2,++ae,++pe,Ge+=2*S;1&pt&&_(T[W+0],re[ae+0],fe[pe+0],ke,Ge)}}function Ha(f,_,S){return S==0?f==0?_==0?6:5:_==0?4:0:S}function tr(f,_,S,T,W){switch(f>>>30){case 3:Rr(_,S,T,W,0);break;case 2:ci(_,S,T,W);break;case 1:ir(_,S,T,W)}}function Ca(f,_){var S,T,W=_.M,re=_.Nb,ae=f.oc,fe=f.pc+40,pe=f.oc,ke=f.pc+584,Ge=f.oc,pt=f.pc+600;for(S=0;16>S;++S)ae[fe+32*S-1]=129;for(S=0;8>S;++S)pe[ke+32*S-1]=129,Ge[pt+32*S-1]=129;for(0<W?ae[fe-1-32]=pe[ke-1-32]=Ge[pt-1-32]=129:(o(ae,fe-32-1,127,21),o(pe,ke-32-1,127,9),o(Ge,pt-32-1,127,9)),T=0;T<f.za;++T){var mt=_.ya[_.aa+T];if(0<T){for(S=-1;16>S;++S)r(ae,fe+32*S-4,ae,fe+32*S+12,4);for(S=-1;8>S;++S)r(pe,ke+32*S-4,pe,ke+32*S+4,4),r(Ge,pt+32*S-4,Ge,pt+32*S+4,4)}var tt=f.Gd,xt=f.Hd+T,bt=mt.ad,Ze=mt.Hc;if(0<W&&(r(ae,fe-32,tt[xt].y,0,16),r(pe,ke-32,tt[xt].f,0,8),r(Ge,pt-32,tt[xt].ea,0,8)),mt.Za){var Xe=ae,Ct=fe-32+16;for(0<W&&(T>=f.za-1?o(Xe,Ct,tt[xt].y[15],4):r(Xe,Ct,tt[xt+1].y,0,4)),S=0;4>S;S++)Xe[Ct+128+S]=Xe[Ct+256+S]=Xe[Ct+384+S]=Xe[Ct+0+S];for(S=0;16>S;++S,Ze<<=2)Xe=ae,Ct=fe+pc[S],zr[mt.Ob[S]](Xe,Ct),tr(Ze,bt,16*+S,Xe,Ct)}else if(Xe=Ha(T,W,mt.Ob[0]),is[Xe](ae,fe),Ze!=0)for(S=0;16>S;++S,Ze<<=2)tr(Ze,bt,16*+S,ae,fe+pc[S]);for(S=mt.Gc,Xe=Ha(T,W,mt.Dd),Cr[Xe](pe,ke),Cr[Xe](Ge,pt),Ze=bt,Xe=pe,Ct=ke,255&(mt=S>>0)&&(170&mt?_s(Ze,256,Xe,Ct):Gi(Ze,256,Xe,Ct)),mt=Ge,Ze=pt,255&(S>>=8)&&(170&S?_s(bt,320,mt,Ze):Gi(bt,320,mt,Ze)),W<f.Ub-1&&(r(tt[xt].y,0,ae,fe+480,16),r(tt[xt].f,0,pe,ke+224,8),r(tt[xt].ea,0,Ge,pt+224,8)),S=8*re*f.B,tt=f.sa,xt=f.ta+16*T+16*re*f.R,bt=f.qa,mt=f.ra+8*T+S,Ze=f.Ha,Xe=f.Ia+8*T+S,S=0;16>S;++S)r(tt,xt+S*f.R,ae,fe+32*S,16);for(S=0;8>S;++S)r(bt,mt+S*f.B,pe,ke+32*S,8),r(Ze,Xe+S*f.B,Ge,pt+32*S,8)}}function es(f,_,S,T,W,re,ae,fe,pe){var ke=[0],Ge=[0],pt=0,mt=pe!=null?pe.kd:0,tt=pe??new Dr;if(f==null||12>S)return 7;tt.data=f,tt.w=_,tt.ha=S,_=[_],S=[S],tt.gb=[tt.gb];e:{var xt=_,bt=S,Ze=tt.gb;if(t(f!=null),t(bt!=null),t(Ze!=null),Ze[0]=0,12<=bt[0]&&!n(f,xt[0],"RIFF")){if(n(f,xt[0]+8,"WEBP")){Ze=3;break e}var Xe=ce(f,xt[0]+4);if(12>Xe||4294967286<Xe){Ze=3;break e}if(mt&&Xe>bt[0]-8){Ze=7;break e}Ze[0]=Xe,xt[0]+=12,bt[0]-=12}Ze=0}if(Ze!=0)return Ze;for(Xe=0<tt.gb[0],S=S[0];;){e:{var Ct=f;bt=_,Ze=S;var Mt=ke,St=Ge,Zt=xt=[0];if((s=pt=[pt])[0]=0,8>Ze[0])Ze=7;else{if(!n(Ct,bt[0],"VP8X")){if(ce(Ct,bt[0]+4)!=10){Ze=3;break e}if(18>Ze[0]){Ze=7;break e}var Ft=ce(Ct,bt[0]+8),ln=1+ne(Ct,bt[0]+12);if(2147483648<=ln*(Ct=1+ne(Ct,bt[0]+15))){Ze=3;break e}Zt!=null&&(Zt[0]=Ft),Mt!=null&&(Mt[0]=ln),St!=null&&(St[0]=Ct),bt[0]+=18,Ze[0]-=18,s[0]=1}Ze=0}}if(pt=pt[0],xt=xt[0],Ze!=0)return Ze;if(bt=!!(2&xt),!Xe&&pt)return 3;if(re!=null&&(re[0]=!!(16&xt)),ae!=null&&(ae[0]=bt),fe!=null&&(fe[0]=0),ae=ke[0],xt=Ge[0],pt&&bt&&pe==null){Ze=0;break}if(4>S){Ze=7;break}if(Xe&&pt||!Xe&&!pt&&!n(f,_[0],"ALPH")){S=[S],tt.na=[tt.na],tt.P=[tt.P],tt.Sa=[tt.Sa];e:{Ft=f,Ze=_,Xe=S;var s=tt.gb;Mt=tt.na,St=tt.P,Zt=tt.Sa,ln=22,t(Ft!=null),t(Xe!=null),Ct=Ze[0];var a=Xe[0];for(t(Mt!=null),t(Zt!=null),Mt[0]=null,St[0]=null,Zt[0]=0;;){if(Ze[0]=Ct,Xe[0]=a,8>a){Ze=7;break e}var h=ce(Ft,Ct+4);if(4294967286<h){Ze=3;break e}var d=8+h+1&-2;if(ln+=d,0<s&&ln>s){Ze=3;break e}if(!n(Ft,Ct,"VP8 ")||!n(Ft,Ct,"VP8L")){Ze=0;break e}if(a[0]<d){Ze=7;break e}n(Ft,Ct,"ALPH")||(Mt[0]=Ft,St[0]=Ct+8,Zt[0]=h),Ct+=d,a-=d}}if(S=S[0],tt.na=tt.na[0],tt.P=tt.P[0],tt.Sa=tt.Sa[0],Ze!=0)break}S=[S],tt.Ja=[tt.Ja],tt.xa=[tt.xa];e:if(s=f,Ze=_,Xe=S,Mt=tt.gb[0],St=tt.Ja,Zt=tt.xa,Ft=Ze[0],Ct=!n(s,Ft,"VP8 "),ln=!n(s,Ft,"VP8L"),t(s!=null),t(Xe!=null),t(St!=null),t(Zt!=null),8>Xe[0])Ze=7;else{if(Ct||ln){if(s=ce(s,Ft+4),12<=Mt&&s>Mt-12){Ze=3;break e}if(mt&&s>Xe[0]-8){Ze=7;break e}St[0]=s,Ze[0]+=8,Xe[0]-=8,Zt[0]=ln}else Zt[0]=5<=Xe[0]&&s[Ft+0]==47&&!(s[Ft+4]>>5),St[0]=Xe[0];Ze=0}if(S=S[0],tt.Ja=tt.Ja[0],tt.xa=tt.xa[0],_=_[0],Ze!=0)break;if(4294967286<tt.Ja)return 3;if(fe==null||bt||(fe[0]=tt.xa?2:1),ae=[ae],xt=[xt],tt.xa){if(5>S){Ze=7;break}fe=ae,mt=xt,bt=re,f==null||5>S?f=0:5<=S&&f[_+0]==47&&!(f[_+4]>>5)?(Xe=[0],s=[0],Mt=[0],V(St=new D,f,_,S),an(St,Xe,s,Mt)?(fe!=null&&(fe[0]=Xe[0]),mt!=null&&(mt[0]=s[0]),bt!=null&&(bt[0]=Mt[0]),f=1):f=0):f=0}else{if(10>S){Ze=7;break}fe=xt,f==null||10>S||!Zs(f,_+3,S-3)?f=0:(mt=f[_+0]|f[_+1]<<8|f[_+2]<<16,bt=16383&(f[_+7]<<8|f[_+6]),f=16383&(f[_+9]<<8|f[_+8]),1&mt||3<(mt>>1&7)||!(mt>>4&1)||mt>>5>=tt.Ja||!bt||!f?f=0:(ae&&(ae[0]=bt),fe&&(fe[0]=f),f=1))}if(!f||(ae=ae[0],xt=xt[0],pt&&(ke[0]!=ae||Ge[0]!=xt)))return 3;pe!=null&&(pe[0]=tt,pe.offset=_-pe.w,t(4294967286>_-pe.w),t(pe.offset==pe.ha-S));break}return Ze==0||Ze==7&&pt&&pe==null?(re!=null&&(re[0]|=tt.na!=null&&0<tt.na.length),T!=null&&(T[0]=ae),W!=null&&(W[0]=xt),0):Ze}function ka(f,_,S){var T=_.width,W=_.height,re=0,ae=0,fe=T,pe=W;if(_.Da=f!=null&&0<f.Da,_.Da&&(fe=f.cd,pe=f.bd,re=f.v,ae=f.j,11>S||(re&=-2,ae&=-2),0>re||0>ae||0>=fe||0>=pe||re+fe>T||ae+pe>W))return 0;if(_.v=re,_.j=ae,_.va=re+fe,_.o=ae+pe,_.U=fe,_.T=pe,_.da=f!=null&&0<f.da,_.da){if(!Ve(fe,pe,S=[f.ib],re=[f.hb]))return 0;_.ib=S[0],_.hb=re[0]}return _.ob=f!=null&&f.ob,_.Kb=f==null||!f.Sd,_.da&&(_.ob=_.ib<3*T/4&&_.hb<3*W/4,_.Kb=0),1}function Is(f){if(f==null)return 2;if(11>f.S){var _=f.f.RGBA;_.fb+=(f.height-1)*_.A,_.A=-_.A}else _=f.f.kb,f=f.height,_.O+=(f-1)*_.fa,_.fa=-_.fa,_.N+=(f-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(f-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(f-1)*_.lb,_.lb=-_.lb);return 0}function Rs(f,_,S,T){if(T==null||0>=f||0>=_)return 2;if(S!=null){if(S.Da){var W=S.cd,re=S.bd,ae=-2&S.v,fe=-2&S.j;if(0>ae||0>fe||0>=W||0>=re||ae+W>f||fe+re>_)return 2;f=W,_=re}if(S.da){if(!Ve(f,_,W=[S.ib],re=[S.hb]))return 2;f=W[0],_=re[0]}}T.width=f,T.height=_;e:{var pe=T.width,ke=T.height;if(f=T.S,0>=pe||0>=ke||!(f>=pr&&13>f))f=2;else{if(0>=T.Rd&&T.sd==null){ae=re=W=_=0;var Ge=(fe=pe*vc[f])*ke;if(11>f||(re=(ke+1)/2*(_=(pe+1)/2),f==12&&(ae=(W=pe)*ke)),(ke=l(Ge+2*re+ae))==null){f=1;break e}T.sd=ke,11>f?((pe=T.f.RGBA).eb=ke,pe.fb=0,pe.A=fe,pe.size=Ge):((pe=T.f.kb).y=ke,pe.O=0,pe.fa=fe,pe.Fd=Ge,pe.f=ke,pe.N=0+Ge,pe.Ab=_,pe.Cd=re,pe.ea=ke,pe.W=0+Ge+re,pe.Db=_,pe.Ed=re,f==12&&(pe.F=ke,pe.J=0+Ge+2*re),pe.Tc=ae,pe.lb=W)}if(_=1,W=T.S,re=T.width,ae=T.height,W>=pr&&13>W)if(11>W)f=T.f.RGBA,_&=(fe=Math.abs(f.A))*(ae-1)+re<=f.size,_&=fe>=re*vc[W],_&=f.eb!=null;else{f=T.f.kb,fe=(re+1)/2,Ge=(ae+1)/2,pe=Math.abs(f.fa),ke=Math.abs(f.Ab);var pt=Math.abs(f.Db),mt=Math.abs(f.lb),tt=mt*(ae-1)+re;_&=pe*(ae-1)+re<=f.Fd,_&=ke*(Ge-1)+fe<=f.Cd,_=(_&=pt*(Ge-1)+fe<=f.Ed)&pe>=re&ke>=fe&pt>=fe,_&=f.y!=null,_&=f.f!=null,_&=f.ea!=null,W==12&&(_&=mt>=re,_&=tt<=f.Tc,_&=f.F!=null)}else _=0;f=_?0:2}}return f!=0||S!=null&&S.fd&&(f=Is(T)),f}var wi=64,ea=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cr=24,nr=32,ta=8,Vi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ot("Predictor0","PredictorAdd0"),ue.Predictor0=function(){return 4278190080},ue.Predictor1=function(f){return f},ue.Predictor2=function(f,_,S){return _[S+0]},ue.Predictor3=function(f,_,S){return _[S+1]},ue.Predictor4=function(f,_,S){return _[S-1]},ue.Predictor5=function(f,_,S){return xe(xe(f,_[S+1]),_[S+0])},ue.Predictor6=function(f,_,S){return xe(f,_[S-1])},ue.Predictor7=function(f,_,S){return xe(f,_[S+0])},ue.Predictor8=function(f,_,S){return xe(_[S-1],_[S+0])},ue.Predictor9=function(f,_,S){return xe(_[S+0],_[S+1])},ue.Predictor10=function(f,_,S){return xe(xe(f,_[S-1]),xe(_[S+0],_[S+1]))},ue.Predictor11=function(f,_,S){var T=_[S+0];return 0>=Lt(T>>24&255,f>>24&255,(_=_[S-1])>>24&255)+Lt(T>>16&255,f>>16&255,_>>16&255)+Lt(T>>8&255,f>>8&255,_>>8&255)+Lt(255&T,255&f,255&_)?T:f},ue.Predictor12=function(f,_,S){var T=_[S+0];return(it((f>>24&255)+(T>>24&255)-((_=_[S-1])>>24&255))<<24|it((f>>16&255)+(T>>16&255)-(_>>16&255))<<16|it((f>>8&255)+(T>>8&255)-(_>>8&255))<<8|it((255&f)+(255&T)-(255&_)))>>>0},ue.Predictor13=function(f,_,S){var T=_[S-1];return(vt((f=xe(f,_[S+0]))>>24&255,T>>24&255)<<24|vt(f>>16&255,T>>16&255)<<16|vt(f>>8&255,T>>8&255)<<8|vt(f>>0&255,T>>0&255))>>>0};var Fs=ue.PredictorAdd0;ue.PredictorAdd1=ze,ot("Predictor2","PredictorAdd2"),ot("Predictor3","PredictorAdd3"),ot("Predictor4","PredictorAdd4"),ot("Predictor5","PredictorAdd5"),ot("Predictor6","PredictorAdd6"),ot("Predictor7","PredictorAdd7"),ot("Predictor8","PredictorAdd8"),ot("Predictor9","PredictorAdd9"),ot("Predictor10","PredictorAdd10"),ot("Predictor11","PredictorAdd11"),ot("Predictor12","PredictorAdd12"),ot("Predictor13","PredictorAdd13");var Lr=ue.PredictorAdd2;Vt("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Vt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Wa,Pi=ue.ColorIndexInverseTransform,gs=ue.MapARGB,Or=ue.VP8LColorIndexInverseTransformAlpha,Ao=ue.MapAlpha,js=ue.VP8LPredictorsAdd=[];js.length=16,(ue.VP8LPredictors=[]).length=16,(ue.VP8LPredictorsAdd_C=[]).length=16,(ue.VP8LPredictors_C=[]).length=16;var vs,Ii,Bi,ts,hr,Ir,zs,Rr,ci,_s,ir,Gi,Mo,Pa,Sa,Hi,fr,io,ys,na,ro,so,Us,Fr,Ri,Wn,Vn,gi,Qn=l(511),ns=l(2041),oo=l(225),bs=l(767),Za=0,ao=ns,Si=oo,ei=bs,dr=Qn,pr=0,hn=1,Ka=2,Bo=3,jr=4,Wi=5,bl=6,rr=7,sr=8,ws=9,i=10,u=[2,3,7],g=[3,3,11],P=[280,256,256,256,40],N=[0,1,1,1,0],oe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],je=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ct=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_t=8,At=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$t=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rn=null,Sn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],or=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ei=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wl=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],is=[],zr=[],Cr=[],Cu=1,xl=2,Zn=[],Zi=[];yt("UpsampleRgbLinePair",Bn,3),yt("UpsampleBgrLinePair",ri,3),yt("UpsampleRgbaLinePair",xr,4),yt("UpsampleBgraLinePair",bi,4),yt("UpsampleArgbLinePair",ki,4),yt("UpsampleRgba4444LinePair",$n,2),yt("UpsampleRgb565LinePair",Rn,2);var ku=ue.UpsampleRgbLinePair,Ls=ue.UpsampleBgrLinePair,Hl=ue.UpsampleRgbaLinePair,To=ue.UpsampleBgraLinePair,Ja=ue.UpsampleArgbLinePair,Wl=ue.UpsampleRgba4444LinePair,fc=ue.UpsampleRgb565LinePair,Zl=16,Ll=1<<Zl-1,Cl=-227,Pu=482,Nh=6,Ya=0,Kl=l(256),Dh=l(256),Oh=l(256),Jl=l(256),Yl=l(Pu-Cl),dc=l(Pu-Cl);er("YuvToRgbRow",Bn,3),er("YuvToBgrRow",ri,3),er("YuvToRgbaRow",xr,4),er("YuvToBgraRow",bi,4),er("YuvToArgbRow",ki,4),er("YuvToRgba4444Row",$n,2),er("YuvToRgb565Row",Rn,2);var pc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xl=[0,2,8],mc=[8,7,6,4,4,2,2,2,1,1,1,1],gc=1;this.WebPDecodeRGBA=function(f,_,S,T,W){var re=hn,ae=new So,fe=new xi;ae.ba=fe,fe.S=re,fe.width=[fe.width],fe.height=[fe.height];var pe=fe.width,ke=fe.height,Ge=new Di;if(Ge==null||f==null)var pt=2;else t(Ge!=null),pt=es(f,_,S,Ge.width,Ge.height,Ge.Pd,Ge.Qd,Ge.format,null);if(pt!=0?pe=0:(pe!=null&&(pe[0]=Ge.width[0]),ke!=null&&(ke[0]=Ge.height[0]),pe=1),pe){fe.width=fe.width[0],fe.height=fe.height[0],T!=null&&(T[0]=fe.width),W!=null&&(W[0]=fe.height);e:{if(T=new br,(W=new Dr).data=f,W.w=_,W.ha=S,W.kd=1,_=[0],t(W!=null),((f=es(W.data,W.w,W.ha,null,null,null,_,null,W))==0||f==7)&&_[0]&&(f=4),(_=f)==0){if(t(ae!=null),T.data=W.data,T.w=W.w+W.offset,T.ha=W.ha-W.offset,T.put=Sr,T.ac=li,T.bc=Er,T.ma=ae,W.xa){if((f=yr())==null){ae=1;break e}if(function(mt,tt){var xt=[0],bt=[0],Ze=[0];t:for(;;){if(mt==null)return 0;if(tt==null)return mt.a=2,0;if(mt.l=tt,mt.a=0,V(mt.m,tt.data,tt.w,tt.ha),!an(mt.m,xt,bt,Ze)){mt.a=3;break t}if(mt.xb=xl,tt.width=xt[0],tt.height=bt[0],!hs(xt[0],bt[0],1,mt,null))break t;return 1}return t(mt.a!=0),0}(f,T)){if(T=(_=Rs(T.width,T.height,ae.Oa,ae.ba))==0){t:{T=f;n:for(;;){if(T==null){T=0;break t}if(t(T.s.yc!=null),t(T.s.Ya!=null),t(0<T.s.Wb),t((S=T.l)!=null),t((W=S.ma)!=null),T.xb!=0){if(T.ca=W.ba,T.tb=W.tb,t(T.ca!=null),!ka(W.Oa,S,Bo)){T.a=2;break n}if(!vo(T,S.width)||S.da)break n;if((S.da||zt(T.ca.S))&&nt(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&nt()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!Re(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!Mr(T,T.V,T.Ba,T.c,T.i,S.o,go))break n;W.Dc=T.Ma,T=1;break t}t(T.a!=0),T=0}T=!T}T&&(_=f.a)}else _=f.a}else{if((f=new On)==null){ae=1;break e}if(f.Fa=W.na,f.P=W.P,f.qc=W.Sa,Bs(f,T)){if((_=Rs(T.width,T.height,ae.Oa,ae.ba))==0){if(f.Aa=0,S=ae.Oa,t((W=f)!=null),S!=null){if(0<(pe=0>(pe=S.Md)?0:100<pe?255:255*pe/100)){for(ke=Ge=0;4>ke;++ke)12>(pt=W.pb[ke]).lc&&(pt.ia=pe*mc[0>pt.lc?0:pt.lc]>>3),Ge|=pt.ia;Ge&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=S.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}bn(f,T)||(_=f.a)}}else _=f.a}_==0&&ae.Oa!=null&&ae.Oa.fd&&(_=Is(ae.ba))}ae=_}re=ae!=0?null:11>re?fe.f.RGBA.eb:fe.f.kb.y}else re=null;return re};var vc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(ue,Be){for(var Je="",$=0;$<4;$++)Je+=String.fromCharCode(ue[Be++]);return Je}function b(ue,Be){return(ue[Be+0]<<0|ue[Be+1]<<8|ue[Be+2]<<16)>>>0}function w(ue,Be){return(ue[Be+0]<<0|ue[Be+1]<<8|ue[Be+2]<<16|ue[Be+3]<<24)>>>0}new m;var E=[0],C=[0],R=[],O=new m,q=e,F=function(ue,Be){var Je={},$=0,J=!1,I=0,te=0;if(Je.frames=[],!function(K,he,_e,Le){for(var de=0;de<Le;de++)if(K[he+de]!=_e.charCodeAt(de))return!0;return!1}(ue,Be,"RIFF",4)){var Z,ee;for(w(ue,Be+=4),Be+=8;Be<ue.length;){var ve=y(ue,Be),V=w(ue,Be+=4);Be+=4;var j=V+(1&V);switch(ve){case"VP8 ":case"VP8L":Je.frames[$]===void 0&&(Je.frames[$]={}),(D=Je.frames[$]).src_off=J?te:Be-8,D.src_size=I+V+8,$++,J&&(J=!1,I=0,te=0);break;case"VP8X":(D=Je.header={}).feature_flags=ue[Be];var Y=Be+4;D.canvas_width=1+b(ue,Y),Y+=3,D.canvas_height=1+b(ue,Y),Y+=3;break;case"ALPH":J=!0,I=j+8,te=Be-8;break;case"ANIM":(D=Je.header).bgcolor=w(ue,Be),Y=Be+4,D.loop_count=(Z=ue)[(ee=Y)+0]<<0|Z[ee+1]<<8,Y+=2;break;case"ANMF":var Ie,D;(D=Je.frames[$]={}).offset_x=2*b(ue,Be),Be+=3,D.offset_y=2*b(ue,Be),Be+=3,D.width=1+b(ue,Be),Be+=3,D.height=1+b(ue,Be),Be+=3,D.duration=b(ue,Be),Be+=3,Ie=ue[Be++],D.dispose=1&Ie,D.blend=Ie>>1&1}ve!="ANMF"&&(Be+=j)}return Je}}(q,0);F.response=q,F.rgbaoutput=!0,F.dataurl=!1;var G=F.header?F.header:null,X=F.frames?F.frames:null;if(G){G.loop_counter=G.loop_count,E=[G.canvas_height],C=[G.canvas_width];for(var Ce=0;Ce<X.length&&X[Ce].blend!=0;Ce++);}var Pe=X[0],we=O.WebPDecodeRGBA(q,Pe.src_off,Pe.src_size,C,E);Pe.rgba=we,Pe.imgwidth=C[0],Pe.imgheight=E[0];for(var se=0;se<C[0]*E[0]*4;se++)R[se]=we[se];return this.width=C,this.height=E,this.data=R,this}(function(e){var t=function(){return typeof Wf=="function"},n=function(E,C,R,O){var q=4,F=c;switch(O){case e.image_compression.FAST:q=1,F=l;break;case e.image_compression.MEDIUM:q=6,F=p;break;case e.image_compression.SLOW:q=9,F=m}E=r(E,C,R,F);var G=Wf(E,{level:q});return e.__addimage__.arrayBufferToBinaryString(G)},r=function(E,C,R,O){for(var q,F,G,X=E.length/C,Ce=new Uint8Array(E.length+X),Pe=b(),we=0;we<X;we+=1){if(G=we*C,q=E.subarray(G,G+C),O)Ce.set(O(q,R,F),G+we);else{for(var se,ue=Pe.length,Be=[];se<ue;se+=1)Be[se]=Pe[se](q,R,F);var Je=w(Be.concat());Ce.set(Be[Je],G+we)}F=q}return Ce},o=function(E){var C=Array.apply([],E);return C.unshift(0),C},l=function(E,C){var R,O=[],q=E.length;O[0]=1;for(var F=0;F<q;F+=1)R=E[F-C]||0,O[F+1]=E[F]-R+256&255;return O},c=function(E,C,R){var O,q=[],F=E.length;q[0]=2;for(var G=0;G<F;G+=1)O=R&&R[G]||0,q[G+1]=E[G]-O+256&255;return q},p=function(E,C,R){var O,q,F=[],G=E.length;F[0]=3;for(var X=0;X<G;X+=1)O=E[X-C]||0,q=R&&R[X]||0,F[X+1]=E[X]+256-(O+q>>>1)&255;return F},m=function(E,C,R){var O,q,F,G,X=[],Ce=E.length;X[0]=4;for(var Pe=0;Pe<Ce;Pe+=1)O=E[Pe-C]||0,q=R&&R[Pe]||0,F=R&&R[Pe-C]||0,G=y(O,q,F),X[Pe+1]=E[Pe]-G+256&255;return X},y=function(E,C,R){if(E===C&&C===R)return E;var O=Math.abs(C-R),q=Math.abs(E-R),F=Math.abs(E+C-R-R);return O<=q&&O<=F?E:q<=F?C:R},b=function(){return[o,l,c,p,m]},w=function(E){var C=E.map(function(R){return R.reduce(function(O,q){return O+Math.abs(q)},0)});return C.indexOf(Math.min.apply(null,C))};e.processPNG=function(E,C,R,O){var q,F,G,X,Ce,Pe,we,se,ue,Be,Je,$,J,I,te,Z=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(E)&&(E=new Uint8Array(E)),this.__addimage__.isArrayBufferView(E)){if(E=(G=new hx(E)).imgData,F=G.bits,q=G.colorSpace,Ce=G.colors,[4,6].indexOf(G.colorType)!==-1){if(G.bits===8){ue=(se=G.pixelBitlength==32?new Uint32Array(G.decodePixels().buffer):G.pixelBitlength==16?new Uint16Array(G.decodePixels().buffer):new Uint8Array(G.decodePixels().buffer)).length,Je=new Uint8Array(ue*G.colors),Be=new Uint8Array(ue);var ve,V=G.pixelBitlength-G.bits;for(I=0,te=0;I<ue;I++){for(J=se[I],ve=0;ve<V;)Je[te++]=J>>>ve&255,ve+=G.bits;Be[I]=J>>>ve&255}}if(G.bits===16){ue=(se=new Uint32Array(G.decodePixels().buffer)).length,Je=new Uint8Array(ue*(32/G.pixelBitlength)*G.colors),Be=new Uint8Array(ue*(32/G.pixelBitlength)),$=G.colors>1,I=0,te=0;for(var j=0;I<ue;)J=se[I++],Je[te++]=J>>>0&255,$&&(Je[te++]=J>>>16&255,J=se[I++],Je[te++]=J>>>0&255),Be[j++]=J>>>16&255;F=8}O!==e.image_compression.NONE&&t()?(E=n(Je,G.width*G.colors,G.colors,O),we=n(Be,G.width,1,O)):(E=Je,we=Be,Z=void 0)}if(G.colorType===3&&(q=this.color_spaces.INDEXED,Pe=G.palette,G.transparency.indexed)){var Y=G.transparency.indexed,Ie=0;for(I=0,ue=Y.length;I<ue;++I)Ie+=Y[I];if((Ie/=255)===ue-1&&Y.indexOf(0)!==-1)X=[Y.indexOf(0)];else if(Ie!==ue){for(se=G.decodePixels(),Be=new Uint8Array(se.length),I=0,ue=se.length;I<ue;I++)Be[I]=Y[se[I]];we=n(Be,G.width,1)}}var D=function(K){var he;switch(K){case e.image_compression.FAST:he=11;break;case e.image_compression.MEDIUM:he=13;break;case e.image_compression.SLOW:he=14;break;default:he=12}return he}(O);return Z===this.decode.FLATE_DECODE&&(ee="/Predictor "+D+" "),ee+="/Colors "+Ce+" /BitsPerComponent "+F+" /Columns "+G.width,(this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),(we&&this.__addimage__.isArrayBuffer(we)||this.__addimage__.isArrayBufferView(we))&&(we=this.__addimage__.arrayBufferToBinaryString(we)),{alias:R,data:E,index:C,filter:Z,decodeParameters:ee,transparency:X,palette:Pe,sMask:we,predictor:D,width:G.width,height:G.height,bitsPerComponent:F,colorSpace:q}}}})(mn.API),function(e){e.processGIF89A=function(t,n,r,o){var l=new fx(t),c=l.width,p=l.height,m=[];l.decodeAndBlitFrameRGBA(0,m);var y={data:m,width:c,height:p},b=new vf(100).encode(y,100);return e.processJPEG.call(this,b,n,r,o)},e.processGIF87A=e.processGIF89A}(mn.API),Do.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:r,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Do.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){oi.log("bit decode error:"+n)}},Do.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*o*4,p=0;p<8&&8*o+p<this.width;p++){var m=this.palette[l>>7-p&1];this.data[c+4*p]=m.blue,this.data[c+4*p+1]=m.green,this.data[c+4*p+2]=m.red,this.data[c+4*p+3]=255}n!==0&&(this.pos+=4-n)}},Do.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*o*4,p=l>>4,m=15&l,y=this.palette[p];if(this.data[c]=y.blue,this.data[c+1]=y.green,this.data[c+2]=y.red,this.data[c+3]=255,2*o+1>=this.width)break;y=this.palette[m],this.data[c+4]=y.blue,this.data[c+4+1]=y.green,this.data[c+4+2]=y.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},Do.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*r;if(o<this.palette.length){var c=this.palette[o];this.data[l]=c.red,this.data[l+1]=c.green,this.data[l+2]=c.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}e!==0&&(this.pos+=4-e)}},Do.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&t)/t*255|0,p=(l>>5&t)/t*255|0,m=(l>>10&t)/t*255|0,y=l>>15?255:0,b=r*this.width*4+4*o;this.data[b]=m,this.data[b+1]=p,this.data[b+2]=c,this.data[b+3]=y}this.pos+=e}},Do.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(c&t)/t*255|0,m=(c>>5&n)/n*255|0,y=(c>>11)/t*255|0,b=o*this.width*4+4*l;this.data[b]=y,this.data[b+1]=m,this.data[b+2]=p,this.data[b+3]=255}this.pos+=e}},Do.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*n;this.data[c]=l,this.data[c+1]=o,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},Do.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),p=t*this.width*4+4*n;this.data[p]=l,this.data[p+1]=o,this.data[p+2]=r,this.data[p+3]=c}},Do.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,o){var l=new Do(t,!1),c=l.width,p=l.height,m={data:l.getData(),width:c,height:p},y=new vf(100).encode(m,100);return e.processJPEG.call(this,y,n,r,o)}}(mn.API),T0.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,o){var l=new T0(t),c=l.width,p=l.height,m={data:l.getData(),width:c,height:p},y=new vf(100).encode(m,100);return e.processJPEG.call(this,y,n,r,o)}}(mn.API),mn.API.processRGBA=function(e,t,n){for(var r=e.data,o=r.length,l=new Uint8Array(o/4*3),c=new Uint8Array(o/4),p=0,m=0,y=0;y<o;y+=4){var b=r[y],w=r[y+1],E=r[y+2],C=r[y+3];l[p++]=b,l[p++]=w,l[p++]=E,c[m++]=C}var R=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:R,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},mn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},iu=mn.API,Mc=iu.getCharWidthsArray=function(e,t){var n,r,o=(t=t||{}).font||this.internal.getFont(),l=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),p=t.widths?t.widths:o.metadata.Unicode.widths,m=p.fof?p.fof:1,y=t.kerning?t.kerning:o.metadata.Unicode.kerning,b=y.fof?y.fof:1,w=t.doKerning!==!1,E=0,C=e.length,R=0,O=p[0]||m,q=[];for(n=0;n<C;n++)r=e.charCodeAt(n),typeof o.metadata.widthOfString=="function"?q.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+c*(1e3/l)||0)/1e3):(E=w&&si(y[r])==="object"&&!isNaN(parseInt(y[r][R],10))?y[r][R]/b:0,q.push((p[r]||O)/m+E)),R=r;return q},E0=iu.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return iu.processArabic&&(e=iu.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,o)/n:Mc.apply(this,arguments).reduce(function(l,c){return l+c},0)},A0=function(e,t,n,r){for(var o=[],l=0,c=e.length,p=0;l!==c&&p+t[l]<n;)p+=t[l],l++;o.push(e.slice(0,l));var m=l;for(p=0;l!==c;)p+t[l]>r&&(o.push(e.slice(m,l)),p=0,m=l),p+=t[l],l++;return m!==l&&o.push(e.slice(m,l)),o},M0=function(e,t,n){n||(n={});var r,o,l,c,p,m,y,b=[],w=[b],E=n.textIndent||0,C=0,R=0,O=e.split(" "),q=Mc.apply(this,[" ",n])[0];if(m=n.lineIndent===-1?O[0].length+2:n.lineIndent||0){var F=Array(m).join(" "),G=[];O.map(function(Ce){(Ce=Ce.split(/\s*\n/)).length>1?G=G.concat(Ce.map(function(Pe,we){return(we&&Pe.length?`
`:"")+Pe})):G.push(Ce[0])}),O=G,m=E0.apply(this,[F,n])}for(l=0,c=O.length;l<c;l++){var X=0;if(r=O[l],m&&r[0]==`
`&&(r=r.substr(1),X=1),E+C+(R=(o=Mc.apply(this,[r,n])).reduce(function(Ce,Pe){return Ce+Pe},0))>t||X){if(R>t){for(p=A0.apply(this,[r,o,t-(E+C),t]),b.push(p.shift()),b=[p.pop()];p.length;)w.push([p.shift()]);R=o.slice(r.length-(b[0]?b[0].length:0)).reduce(function(Ce,Pe){return Ce+Pe},0)}else b=[r];w.push(b),E=R+m,C=q}else b.push(r),E+=C+R,C=q}return y=m?function(Ce,Pe){return(Pe?F:"")+Ce.join(" ")}:function(Ce){return Ce.join(" ")},w.map(y)},iu.splitTextToSize=function(e,t,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(b){if(b.widths&&b.kerning)return{widths:b.widths,kerning:b.kerning};var w=this.internal.getFont(b.fontName,b.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/o;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=n.lineIndent;var p,m,y=[];for(p=0,m=r.length;p<m;p++)y=y.concat(M0.apply(this,[r[p],c,l]));return y},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},o=0;o<t.length;o++)n[t[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=t[o];var l=function(w){return"0x"+parseInt(w,10).toString(16)},c=e.__fontmetrics__.compress=function(w){var E,C,R,O,q=["{"];for(var F in w){if(E=w[F],isNaN(parseInt(F,10))?C="'"+F+"'":(F=parseInt(F,10),C=(C=l(F).slice(2)).slice(0,-1)+r[C.slice(-1)]),typeof E=="number")E<0?(R=l(E).slice(3),O="-"):(R=l(E).slice(2),O=""),R=O+R.slice(0,-1)+r[R.slice(-1)];else{if(si(E)!=="object")throw new Error("Don't know what to do with value type "+si(E)+".");R=c(E)}q.push(C+R)}return q.push("}"),q.join("")},p=e.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var E,C,R,O,q={},F=1,G=q,X=[],Ce="",Pe="",we=w.length-1,se=1;se<we;se+=1)(O=w[se])=="'"?E?(R=E.join(""),E=void 0):E=[]:E?E.push(O):O=="{"?(X.push([G,R]),G={},R=void 0):O=="}"?((C=X.pop())[0][C[1]]=G,R=void 0,G=C[0]):O=="-"?F=-1:R===void 0?n.hasOwnProperty(O)?(Ce+=n[O],R=parseInt(Ce,16)*F,F=1,Ce=""):Ce+=O:n.hasOwnProperty(O)?(Pe+=n[O],G[R]=parseInt(Pe,16)*F,F=1,R=void 0,Pe=""):Pe+=O;return q},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},b={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(w){var E=w.font,C=b.Unicode[E.postScriptName];C&&(E.metadata.Unicode={},E.metadata.Unicode.widths=C.widths,E.metadata.Unicode.kerning=C.kerning);var R=y.Unicode[E.postScriptName];R&&(E.metadata.Unicode.encoding=R,E.encoding=R.codePages[0])}])}(mn.API),function(e){var t=function(n){for(var r=n.length,o=new Uint8Array(r),l=0;l<r;l++)o[l]=n.charCodeAt(l);return o};e.API.events.push(["addFont",function(n){var r=void 0,o=n.font,l=n.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(c,p){p=/^\x00\x01\x00\x00/.test(p)?t(p):t(Ku(p)),c.metadata=e.API.TTFFont.open(p),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(o,r)}}])}(mn),function(e){function t(){return(vn.canvg?Promise.resolve(vn.canvg):Ol(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}mn.API.addSvgAsImage=function(n,r,o,l,c,p,m,y){if(isNaN(r)||isNaN(o))throw oi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(c))throw oi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=l,b.height=c;var w=b.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,b.width,b.height);var E={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},C=this;return t().then(function(R){return R.fromString(w,n,E)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(R){return R.render(E)}).then(function(){C.addImage(b.toDataURL("image/jpeg",1),r,o,l,c,m,y)})}}(),mn.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(t,n);return this},mn.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,o,l,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},p=Object.keys(c),m=[],y=0,b=0,w=0;function E(R,O){var q,F=!1;for(q=0;q<R.length;q+=1)R[q]===O&&(F=!0);return F}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var C=p.length;for(w=0;w<C;w+=1)n[p[w]].value=n[p[w]].defaultValue,n[p[w]].explicitSet=!1}if(si(e)==="object"){for(o in e)if(l=e[o],E(p,o)&&l!==void 0){if(n[o].type==="boolean"&&typeof l=="boolean")n[o].value=l;else if(n[o].type==="name"&&E(n[o].valueSet,l))n[o].value=l;else if(n[o].type==="integer"&&Number.isInteger(l))n[o].value=l;else if(n[o].type==="array"){for(y=0;y<l.length;y+=1)if(r=!0,l[y].length===1&&typeof l[y][0]=="number")m.push(String(l[y]-1));else if(l[y].length>1){for(b=0;b<l[y].length;b+=1)typeof l[y][b]!="number"&&(r=!1);r===!0&&m.push([l[y][0]-1,l[y][1]-1].join(" "))}n[o].value="["+m.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var R,O=[];for(R in n)n[R].explicitSet===!0&&(n[R].type==="name"?O.push("/"+R+" /"+n[R].value):O.push("/"+R+" "+n[R].value));O.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+O.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),p=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),y=l.length+c.length+p.length+o.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(o+l+c+p+m),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(mn.API),function(e){var t=e.API,n=t.pdfEscape16=function(l,c){for(var p,m=c.metadata.Unicode.widths,y=["","0","00","000","0000"],b=[""],w=0,E=l.length;w<E;++w){if(p=c.metadata.characterToGlyph(l.charCodeAt(w)),c.metadata.glyIdsUsed.push(p),c.metadata.toUnicode[p]=l.charCodeAt(w),m.indexOf(p)==-1&&(m.push(p),m.push([parseInt(c.metadata.widthOfGlyph(p),10)])),p=="0")return b.join("");p=p.toString(16),b.push(y[4-p.length],p)}return b.join("")},r=function(l){var c,p,m,y,b,w,E;for(b=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],w=0,E=(p=Object.keys(l).sort(function(C,R){return C-R})).length;w<E;w++)c=p[w],m.length>=100&&(b+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),l[c]!==void 0&&l[c]!==null&&typeof l[c].toString=="function"&&(y=("0000"+l[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),m.push("<"+c+"><"+y+">"));return m.length&&(b+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),b+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(l){(function(c){var p=c.font,m=c.out,y=c.newObject,b=c.putStream;if(p.metadata instanceof e.API.TTFFont&&p.encoding==="Identity-H"){for(var w=p.metadata.Unicode.widths,E=p.metadata.subset.encode(p.metadata.glyIdsUsed,1),C="",R=0;R<E.length;R++)C+=String.fromCharCode(E[R]);var O=y();b({data:C,addLength1:!0,objectId:O}),m("endobj");var q=y();b({data:r(p.metadata.toUnicode),addLength1:!0,objectId:q}),m("endobj");var F=y();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+lu(p.fontName)),m("/FontFile2 "+O+" 0 R"),m("/FontBBox "+e.API.PDFObject.convert(p.metadata.bbox)),m("/Flags "+p.metadata.flags),m("/StemV "+p.metadata.stemV),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m(">>"),m("endobj");var G=y();m("<<"),m("/Type /Font"),m("/BaseFont /"+lu(p.fontName)),m("/FontDescriptor "+F+" 0 R"),m("/W "+e.API.PDFObject.convert(w)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+p.encoding+")"),m(">>"),m(">>"),m("endobj"),p.objectNumber=y(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+q+" 0 R"),m("/BaseFont /"+lu(p.fontName)),m("/Encoding /"+p.encoding),m("/DescendantFonts ["+G+" 0 R]"),m(">>"),m("endobj"),p.isAlreadyPutted=!0}})(l)}]),t.events.push(["putFont",function(l){(function(c){var p=c.font,m=c.out,y=c.newObject,b=c.putStream;if(p.metadata instanceof e.API.TTFFont&&p.encoding==="WinAnsiEncoding"){for(var w=p.metadata.rawData,E="",C=0;C<w.length;C++)E+=String.fromCharCode(w[C]);var R=y();b({data:E,addLength1:!0,objectId:R}),m("endobj");var O=y();b({data:r(p.metadata.toUnicode),addLength1:!0,objectId:O}),m("endobj");var q=y();m("<<"),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m("/StemV "+p.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+R+" 0 R"),m("/Flags 96"),m("/FontBBox "+e.API.PDFObject.convert(p.metadata.bbox)),m("/FontName /"+lu(p.fontName)),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m(">>"),m("endobj"),p.objectNumber=y();for(var F=0;F<p.metadata.hmtx.widths.length;F++)p.metadata.hmtx.widths[F]=parseInt(p.metadata.hmtx.widths[F]*(1e3/p.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+O+" 0 R/BaseFont/"+lu(p.fontName)+"/FontDescriptor "+q+" 0 R/Encoding/"+p.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(p.metadata.hmtx.widths)+">>"),m("endobj"),p.isAlreadyPutted=!0}})(l)}]);var o=function(l){var c,p=l.text||"",m=l.x,y=l.y,b=l.options||{},w=l.mutex||{},E=w.pdfEscape,C=w.activeFontKey,R=w.fonts,O=C,q="",F=0,G="",X=R[O].encoding;if(R[O].encoding!=="Identity-H")return{text:p,x:m,y,options:b,mutex:w};for(G=p,O=C,Array.isArray(p)&&(G=p[0]),F=0;F<G.length;F+=1)R[O].metadata.hasOwnProperty("cmap")&&(c=R[O].metadata.cmap.unicode.codeMap[G[F].charCodeAt(0)]),c||G[F].charCodeAt(0)<256&&R[O].metadata.hasOwnProperty("Unicode")?q+=G[F]:q+="";var Ce="";return parseInt(O.slice(1))<14||X==="WinAnsiEncoding"?Ce=E(q,O).split("").map(function(Pe){return Pe.charCodeAt(0).toString(16)}).join(""):X==="Identity-H"&&(Ce=n(q,R[O])),w.isHex=!0,{text:Ce,x:m,y,options:b,mutex:w}};t.events.push(["postProcessText",function(l){var c=l.text||"",p=[],m={text:c,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(c)){var y=0;for(y=0;y<c.length;y+=1)Array.isArray(c[y])&&c[y].length===3?p.push([o(Object.assign({},m,{text:c[y][0]})).text,c[y][1],c[y][2]]):p.push(o(Object.assign({},m,{text:c[y]})).text);l.text=p}else l.text=o(Object.assign({},m,{text:c})).text}])}(mn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(mn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var o,l,c,p,m,y,b,w=t,E=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],R={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},O={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},q=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],F=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),G=!1,X=0;this.__bidiEngine__={};var Ce=function($){var J=$.charCodeAt(),I=J>>8,te=O[I];return te!==void 0?w[256*te+(255&J)]:I===252||I===253?"AL":F.test(I)?"L":I===8?"R":"N"},Pe=function($){for(var J,I=0;I<$.length;I++){if((J=Ce($.charAt(I)))==="L")return!1;if(J==="R")return!0}return!1},we=function($,J,I,te){var Z,ee,ve,V,j=J[te];switch(j){case"L":case"R":G=!1;break;case"N":case"AN":break;case"EN":G&&(j="AN");break;case"AL":G=!0,j="R";break;case"WS":j="N";break;case"CS":te<1||te+1>=J.length||(Z=I[te-1])!=="EN"&&Z!=="AN"||(ee=J[te+1])!=="EN"&&ee!=="AN"?j="N":G&&(ee="AN"),j=ee===Z?ee:"N";break;case"ES":j=(Z=te>0?I[te-1]:"B")==="EN"&&te+1<J.length&&J[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&I[te-1]==="EN"){j="EN";break}if(G){j="N";break}for(ve=te+1,V=J.length;ve<V&&J[ve]==="ET";)ve++;j=ve<V&&J[ve]==="EN"?"EN":"N";break;case"NSM":if(c&&!p){for(V=J.length,ve=te+1;ve<V&&J[ve]==="NSM";)ve++;if(ve<V){var Y=$[te],Ie=Y>=1425&&Y<=2303||Y===64286;if(Z=J[ve],Ie&&(Z==="R"||Z==="AL")){j="R";break}}}j=te<1||(Z=J[te-1])==="B"?"N":I[te-1];break;case"B":G=!1,o=!0,j=X;break;case"S":l=!0,j="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":G=!1;break;case"BN":j="N"}return j},se=function($,J,I){var te=$.split("");return I&&ue(te,I,{hiLevel:X}),te.reverse(),J&&J.reverse(),te.join("")},ue=function($,J,I){var te,Z,ee,ve,V,j=-1,Y=$.length,Ie=0,D=[],K=X?C:E,he=[];for(G=!1,o=!1,l=!1,Z=0;Z<Y;Z++)he[Z]=Ce($[Z]);for(ee=0;ee<Y;ee++){if(V=Ie,D[ee]=we($,he,D,ee),te=240&(Ie=K[V][R[D[ee]]]),Ie&=15,J[ee]=ve=K[Ie][5],te>0)if(te===16){for(Z=j;Z<ee;Z++)J[Z]=1;j=-1}else j=-1;if(K[Ie][6])j===-1&&(j=ee);else if(j>-1){for(Z=j;Z<ee;Z++)J[Z]=ve;j=-1}he[ee]==="B"&&(J[ee]=0),I.hiLevel|=ve}l&&function(_e,Le,de){for(var Se=0;Se<de;Se++)if(_e[Se]==="S"){Le[Se]=X;for(var Ae=Se-1;Ae>=0&&_e[Ae]==="WS";Ae--)Le[Ae]=X}}(he,J,Y)},Be=function($,J,I,te,Z){if(!(Z.hiLevel<$)){if($===1&&X===1&&!o)return J.reverse(),void(I&&I.reverse());for(var ee,ve,V,j,Y=J.length,Ie=0;Ie<Y;){if(te[Ie]>=$){for(V=Ie+1;V<Y&&te[V]>=$;)V++;for(j=Ie,ve=V-1;j<ve;j++,ve--)ee=J[j],J[j]=J[ve],J[ve]=ee,I&&(ee=I[j],I[j]=I[ve],I[ve]=ee);Ie=V}Ie++}}},Je=function($,J,I){var te=$.split(""),Z={hiLevel:X};return I||(I=[]),ue(te,I,Z),function(ee,ve,V){if(V.hiLevel!==0&&b)for(var j,Y=0;Y<ee.length;Y++)ve[Y]===1&&(j=q.indexOf(ee[Y]))>=0&&(ee[Y]=q[j+1])}(te,I,Z),Be(2,te,J,I,Z),Be(1,te,J,I,Z),te.join("")};return this.__bidiEngine__.doBidiReorder=function($,J,I){if(function(Z,ee){if(ee)for(var ve=0;ve<Z.length;ve++)ee[ve]=ve;p===void 0&&(p=Pe(Z)),y===void 0&&(y=Pe(Z))}($,J),c||!m||y)if(c&&m&&p^y)X=p?1:0,$=se($,J,I);else if(!c&&m&&y)X=p?1:0,$=Je($,J,I),$=se($,J);else if(!c||p||m||y){if(c&&!m&&p^y)$=se($,J),p?(X=0,$=Je($,J,I)):(X=1,$=Je($,J,I),$=se($,J));else if(c&&p&&!m&&y)X=1,$=Je($,J,I),$=se($,J);else if(!c&&!m&&p^y){var te=b;p?(X=1,$=Je($,J,I),X=0,b=!1,$=Je($,J,I),b=te):(X=0,$=Je($,J,I),$=se($,J),X=1,b=!1,$=Je($,J,I),b=te,$=se($,J))}}else X=0,$=Je($,J,I);else X=p?1:0,$=Je($,J,I);return $},this.__bidiEngine__.setOptions=function($){$&&(c=$.isInputVisual,m=$.isOutputVisual,p=$.isInputRtl,y=$.isOutputRtl,b=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var o=r.text,l=(r.x,r.y,r.options||{}),c=(r.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var p=0;for(c=[],p=0;p<o.length;p+=1)Object.prototype.toString.call(o[p])==="[object Array]"?c.push([n.doBidiReorder(o[p][0]),o[p][1],o[p][2]]):c.push([n.doBidiReorder(o[p])]);r.text=c}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(mn),mn.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new pl(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Sx(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new dx(this.contents),this.head=new mx(this),this.name=new bx(this),this.cmap=new u1(this),this.toUnicode={},this.hhea=new gx(this),this.maxp=new wx(this),this.hmtx=new xx(this),this.post=new _x(this),this.os2=new vx(this),this.loca=new Px(this),this.glyf=new Lx(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,p,m,y;for(y=[],c=0,p=(m=this.bbox).length;c<p;c++)t=m[c],y.push(Math.round(t*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var o,l,c,p;for(c=0,l=0,p=(t=""+t).length;0<=p?l<p:l>p;l=0<=p?++l:--l)o=t.charCodeAt(l),c+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return c*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var zo,pl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,o;for(o=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(t.charCodeAt(n)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,o,l,c,p,m;return t=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),p=this.readByte(),m=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^l)+65536*(255^c)+256*(255^p)+(255^m)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*o+16777216*l+65536*c+256*p+m},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,o,l;for(l=[],r=0,o=t.length;r<o;r++)n=t[r],l.push(this.writeByte(n));return l},e}(),dx=function(){var e;function t(n){var r,o,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,o,l,c,p,m,y,b,w,E,C,R,O;for(O in C=Object.keys(n).length,m=Math.log(2),w=16*Math.floor(Math.log(C)/m),c=Math.floor(w/m),b=16*C-w,(o=new pl).writeInt(this.scalarType),o.writeShort(C),o.writeShort(w),o.writeShort(c),o.writeShort(b),l=16*C,y=o.pos+l,p=null,R=[],n)for(E=n[O],o.writeString(O),o.writeInt(e(E)),o.writeInt(y),o.writeInt(E.length),R=R.concat(E),O==="head"&&(p=y),y+=E.length;y%4;)R.push(0),y++;return o.write(R),r=2981146554-e(o.data),o.pos=p+8,o.writeUInt32(r),o.data},e=function(n){var r,o,l,c;for(n=c1.call(n);n.length%4;)n.push(0);for(l=new pl(n),o=0,r=0,c=n.length;r<c;r=r+=4)o+=l.readUInt32();return 4294967295&o},t}(),px={}.hasOwnProperty,da=function(e,t){for(var n in t)px.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};zo=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var mx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new pl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),N0=function(){function e(t,n){var r,o,l,c,p,m,y,b,w,E,C,R,O,q,F,G,X;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),w=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=t.readByte();break;case 4:for(C=t.readUInt16(),E=C/2,t.pos+=6,l=function(){var Ce,Pe;for(Pe=[],m=Ce=0;0<=E?Ce<E:Ce>E;m=0<=E?++Ce:--Ce)Pe.push(t.readUInt16());return Pe}(),t.pos+=2,O=function(){var Ce,Pe;for(Pe=[],m=Ce=0;0<=E?Ce<E:Ce>E;m=0<=E?++Ce:--Ce)Pe.push(t.readUInt16());return Pe}(),y=function(){var Ce,Pe;for(Pe=[],m=Ce=0;0<=E?Ce<E:Ce>E;m=0<=E?++Ce:--Ce)Pe.push(t.readUInt16());return Pe}(),b=function(){var Ce,Pe;for(Pe=[],m=Ce=0;0<=E?Ce<E:Ce>E;m=0<=E?++Ce:--Ce)Pe.push(t.readUInt16());return Pe}(),o=(this.length-t.pos+this.offset)/2,p=function(){var Ce,Pe;for(Pe=[],m=Ce=0;0<=o?Ce<o:Ce>o;m=0<=o?++Ce:--Ce)Pe.push(t.readUInt16());return Pe}(),m=F=0,X=l.length;F<X;m=++F)for(q=l[m],r=G=R=O[m];R<=q?G<=q:G>=q;r=R<=q?++G:--G)b[m]===0?c=r+y[m]:(c=p[b[m]/2+(r-R)-(E-m)]||0)!==0&&(c+=y[m]),this.codeMap[r]=65535&c}t.pos=w}return e.encode=function(t,n){var r,o,l,c,p,m,y,b,w,E,C,R,O,q,F,G,X,Ce,Pe,we,se,ue,Be,Je,$,J,I,te,Z,ee,ve,V,j,Y,Ie,D,K,he,_e,Le,de,Se,Ae,Ke,rt,ne;switch(te=new pl,c=Object.keys(t).sort(function(ce,Re){return ce-Re}),n){case"macroman":for(O=0,q=function(){var ce=[];for(R=0;R<256;++R)ce.push(0);return ce}(),G={0:0},l={},Z=0,j=c.length;Z<j;Z++)G[Ae=t[o=c[Z]]]==null&&(G[Ae]=++O),l[o]={old:t[o],new:G[t[o]]},q[o]=G[t[o]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(q),{charMap:l,subtable:te.data,maxGlyphID:O+1};case"unicode":for(J=[],w=[],X=0,G={},r={},F=y=null,ee=0,Y=c.length;ee<Y;ee++)G[Pe=t[o=c[ee]]]==null&&(G[Pe]=++X),r[o]={old:Pe,new:G[Pe]},p=G[Pe]-o,F!=null&&p===y||(F&&w.push(F),J.push(o),y=p),F=o;for(F&&w.push(F),w.push(65535),J.push(65535),Je=2*(Be=J.length),ue=2*Math.pow(Math.log(Be)/Math.LN2,2),E=Math.log(ue/2)/Math.LN2,se=2*Be-ue,m=[],we=[],C=[],R=ve=0,Ie=J.length;ve<Ie;R=++ve){if($=J[R],b=w[R],$===65535){m.push(0),we.push(0);break}if($-(I=r[$].new)>=32768)for(m.push(0),we.push(2*(C.length+Be-R)),o=V=$;$<=b?V<=b:V>=b;o=$<=b?++V:--V)C.push(r[o].new);else m.push(I-$),we.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*Be+2*C.length),te.writeUInt16(0),te.writeUInt16(Je),te.writeUInt16(ue),te.writeUInt16(E),te.writeUInt16(se),de=0,D=w.length;de<D;de++)o=w[de],te.writeUInt16(o);for(te.writeUInt16(0),Se=0,K=J.length;Se<K;Se++)o=J[Se],te.writeUInt16(o);for(Ke=0,he=m.length;Ke<he;Ke++)p=m[Ke],te.writeUInt16(p);for(rt=0,_e=we.length;rt<_e;rt++)Ce=we[rt],te.writeUInt16(Ce);for(ne=0,Le=C.length;ne<Le;ne++)O=C[ne],te.writeUInt16(O);return{charMap:r,subtable:te.data,maxGlyphID:X+1}}},e}(),u1=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,o,l;for(n.pos=this.offset,this.version=n.readUInt16(),l=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=l?o<l:o>l;o=0<=l?++o:--o)r=new N0(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var o,l;return r==null&&(r="macroman"),o=N0.encode(n,r),(l=new pl).writeUInt16(0),l.writeUInt16(1),o.table=l.data.concat(o.subtable),o},t}(),gx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),vx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,o;for(o=[],r=0;r<10;++r)o.push(n.readByte());return o}(),this.charRange=function(){var r,o;for(o=[],r=0;r<4;++r)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),_x=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="post",t.prototype.parse=function(n){var r,o,l;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var c;for(o=n.readUInt16(),this.glyphNameIndex=[],c=0;0<=o?c<o:c>o;c=0<=o?++c:--c)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],l=[];n.pos<this.offset+this.length;)r=n.readByte(),l.push(this.names.push(n.readString(r)));return l;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var p,m,y;for(y=[],c=p=0,m=this.file.maxp.numGlyphs;0<=m?p<m:p>m;c=0<=m?++p:--p)y.push(n.readUInt32());return y}).call(this)}},t}(),yx=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},bx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="name",t.prototype.parse=function(n){var r,o,l,c,p,m,y,b,w,E,C;for(n.pos=this.offset,n.readShort(),r=n.readShort(),m=n.readShort(),o=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+m+n.readShort()});for(y={},c=w=0,E=o.length;w<E;c=++w)l=o[c],n.pos=l.offset,b=n.readString(l.length),p=new yx(b,l),y[C=l.nameID]==null&&(y[C]=[]),y[l.nameID].push(p);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},t}(),wx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),xx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,o,l,c,p,m,y;for(n.pos=this.offset,this.metrics=[],r=0,m=this.file.hhea.numberOfMetrics;0<=m?r<m:r>m;r=0<=m?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var b,w;for(w=[],r=b=0;0<=l?b<l:b>l;r=0<=l?++b:--b)w.push(n.readInt16());return w}(),this.widths=(function(){var b,w,E,C;for(C=[],b=0,w=(E=this.metrics).length;b<w;b++)c=E[b],C.push(c.advance);return C}).call(this),o=this.widths[this.widths.length-1],y=[],r=p=0;0<=l?p<l:p>l;r=0<=l?++p:--p)y.push(this.widths.push(o));return y},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),c1=[].slice,Lx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,o,l,c,p,m,y,b,w,E;return n in this.cache?this.cache[n]:(c=this.file.loca,r=this.file.contents,o=c.indexOf(n),(l=c.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+o,p=(m=new pl(r.read(l))).readShort(),b=m.readShort(),E=m.readShort(),y=m.readShort(),w=m.readShort(),this.cache[n]=p===-1?new kx(m,b,E,y,w):new Cx(m,p,b,E,y,w),this.cache[n]))},t.prototype.encode=function(n,r,o){var l,c,p,m,y;for(p=[],c=[],m=0,y=r.length;m<y;m++)l=n[r[m]],c.push(p.length),l&&(p=p.concat(l.encode(o)));return c.push(p.length),{table:p,offsets:c}},t}(),Cx=function(){function e(t,n,r,o,l,c){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=l,this.yMax=c,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),kx=function(){function e(t,n,r,o,l){var c,p;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;p=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&p;)c.pos+=1&p?4:2,128&p?c.pos+=8:64&p?c.pos+=4:8&p&&(c.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new pl(c1.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),Px=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="loca",t.prototype.parse=function(n){var r,o;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,c;for(c=[],o=0,l=this.length;o<l;o+=2)c.push(2*n.readUInt16());return c}).call(this):(function(){var l,c;for(c=[],o=0,l=this.length;o<l;o+=4)c.push(n.readUInt32());return c}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var o=new Uint32Array(this.offsets.length),l=0,c=0,p=0;p<o.length;++p)if(o[p]=l,c<r.length&&r[c]==p){++c,o[p]=l;var m=this.offsets[p],y=this.offsets[p+1]-m;y>0&&(l+=y)}for(var b=new Array(4*o.length),w=0;w<o.length;++w)b[4*w+3]=255&o[w],b[4*w+2]=(65280&o[w])>>8,b[4*w+1]=(16711680&o[w])>>16,b[4*w]=(4278190080&o[w])>>24;return b},t}(),Sx=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,o,l;for(n in o=this.font.cmap.tables[0].codeMap,t={},l=this.subset)r=l[n],t[n]=o[r];return t},e.prototype.glyphsFor=function(t){var n,r,o,l,c,p,m;for(o={},c=0,p=t.length;c<p;c++)o[l=t[c]]=this.font.glyf.glyphFor(l);for(l in n=[],o)(r=o[l])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(l in m=this.glyphsFor(n))r=m[l],o[l]=r;return o},e.prototype.encode=function(t,n){var r,o,l,c,p,m,y,b,w,E,C,R,O,q,F;for(o in r=u1.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),C={0:0},F=r.charMap)C[(m=F[o]).old]=m.new;for(R in E=r.maxGlyphID,c)R in C||(C[R]=E++);return b=function(G){var X,Ce;for(X in Ce={},G)Ce[G[X]]=X;return Ce}(C),w=Object.keys(b).sort(function(G,X){return G-X}),O=function(){var G,X,Ce;for(Ce=[],G=0,X=w.length;G<X;G++)p=w[G],Ce.push(b[p]);return Ce}(),l=this.font.glyf.encode(c,O,C),y=this.font.loca.encode(l.offsets,O),q={cmap:this.font.cmap.raw(),glyf:l.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(q["OS/2"]=this.font.os2.raw()),this.font.directory.encode(q)},e}();mn.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,o,l,c;if(Array.isArray(n))return"["+function(){var p,m,y;for(y=[],p=0,m=n.length;p<m;p++)r=n[p],y.push(t.convert(r));return y}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in l=["<<"],n)c=n[o],l.push("/"+o+" "+t.convert(c));return l.push(">>"),l.join(`
`)}return""+n},t}();const Ex={class:"h-full flex"},Ax={class:"flex-1 relative"},Mx={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},Bx={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},Tx={class:"text-center max-w-lg mx-auto p-8"},Nx={class:"space-y-4"},Dx={key:2,class:"absolute bottom-6 left-6 z-[1000]"},Ox={class:"bg-white rounded-lg shadow-lg p-3 mb-3"},Ix={class:"grid grid-cols-3 gap-2"},Rx=["onClick"],Fx={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},jx={class:"flex flex-col mb-2"},zx={class:"text-xl font-bold text-gray-800 mb-1"},Ux={key:0,class:"text-sm text-gray-500"},qx={class:"grid grid-cols-1 gap-2"},$x=["disabled"],Vx={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Gx={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Hx={key:0,class:"text-xs text-gray-500 mt-2"},Wx={key:3,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},Zx={key:4,class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},Kx={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Jx={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},Yx={class:"flex justify-between items-center mb-4"},Xx={key:0,class:"space-y-4"},Qx={key:0,class:"space-y-2"},eL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},tL=["onClick"],nL={class:"font-medium text-gray-900"},iL={key:1,class:"space-y-2"},rL={class:"flex items-center mb-4"},sL={class:"text-sm text-gray-600"},oL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},aL=["onClick"],lL={class:"font-medium text-gray-900"},uL={key:2,class:"space-y-2"},cL={class:"flex items-center mb-4"},hL={class:"text-sm text-gray-600"},fL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},dL=["onClick"],pL={class:"font-medium text-gray-900"},mL={class:"text-sm text-gray-500"},gL={class:"text-xs text-gray-400 mt-1"},vL={key:1,class:"space-y-4"},_L={key:0,class:"space-y-2"},yL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},bL=["onClick"],wL={class:"font-medium text-gray-900"},xL={key:1,class:"space-y-2"},LL={class:"flex items-center mb-4"},CL={class:"text-sm text-gray-600"},kL={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},PL=["onClick"],SL={class:"font-medium text-gray-900"},EL={class:"text-sm text-gray-500"},AL={class:"text-xs text-gray-400 mt-1"},ML={key:2,class:"max-h-96 overflow-y-auto"},BL={key:0,class:"text-center py-8"},TL={key:1,class:"space-y-2"},NL=["onClick"],DL={class:"font-medium text-gray-900"},OL={class:"text-sm text-gray-500"},IL={class:"text-xs text-gray-400 mt-1"},D0=Es({__name:"MapView",setup(e){const t=It(null),n=Ah(),r=qg(),o=It([]),{currentTool:l,selectedShape:c,map:p,initMap:m,setDrawingTool:y,updateShapeStyle:b,updateShapeProperties:w,featureGroup:E,adjustView:C,clearActiveControlPoints:R}=dw(),{initMap:O,baseMaps:q,currentBaseMap:F,changeBaseMap:G}=pw(),X=It(!1),Ce=It(!1),Pe=It(null),we=It(!1),se=It(!1),ue=us(),Be=It([]),Je=It([]),$=It([]),J=It(null),I=It(null),te=It(!1),Z=It(!1),ee=It(!1),ve=It(null),V=Tn(()=>{var Oe,xe,it;if(console.log("[MapView][filteredClients] Computing with:",{userType:(Oe=ue.user)==null?void 0:Oe.user_type,selectedDealer:J.value,dealerClients:Je.value}),((xe=ue.user)==null?void 0:xe.user_type)==="admin"){const vt=J.value?Je.value:[];return console.log("[MapView][filteredClients] Admin clients:",vt),vt}else if(((it=ue.user)==null?void 0:it.user_type)==="dealer")return console.log("[MapView][filteredClients] Dealer clients:",Je.value),Je.value;return console.log("[MapView][filteredClients] No clients returned"),[]}),j=Tn(()=>{var Oe;return c.value?{type:((Oe=c.value.properties)==null?void 0:Oe.type)||"unknown",properties:c.value.properties||{},layer:c.value}:null});function Y(Oe){const xe=Oe.getCenter(),it=Oe.getZoom(),vt={lat:xe.lat,lng:xe.lng,zoom:it};document.cookie=`mapState=${JSON.stringify(vt)};max-age=2592000;path=/`}function Ie(){const xe=document.cookie.split(";").find(it=>it.trim().startsWith("mapState="));if(xe)try{return JSON.parse(xe.split("=")[1])}catch(it){return console.error("Erreur lors de la lecture du cookie de position:",it),null}return null}Ra(async()=>{var Lt,ze;console.log("[onMounted] Starting initialization..."),await n.fetchPlans();const Oe=Ie(),xe=Oe?[Oe.lat,Oe.lng]:[46.603354,1.888334],it=(Oe==null?void 0:Oe.zoom)??6;if(t.value&&!p.value){const Dt=m(t.value,xe,it);Dt.pm.setLang("fr"),Dt.pm.addControls({rotateMode:!1}),Ji.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(Dt),O(Dt),Dt.on("moveend",()=>{Y(Dt)}),window.addEventListener("map-set-location",Tt=>{if(Dt&&Tt.detail){const{lat:jt,lng:Vt,zoom:Nt}=Tt.detail;Dt.flyTo([jt,Vt],Nt,{duration:1.5,easeLinearity:.25})}})}const vt=localStorage.getItem("lastPlanId");if(vt)try{await D(parseInt(vt))}catch(Dt){console.error("Error loading last plan:",Dt)}((Lt=ue.user)==null?void 0:Lt.user_type)==="admin"&&(console.log("[onMounted] Loading dealers for admin..."),await Se()),((ze=ue.user)==null?void 0:ze.user_type)==="dealer"&&(console.log("[onMounted] Loading clients for dealer..."),await Ae())}),ls(()=>r.hasUnsavedChanges,Oe=>{Oe&&Pe.value&&n.markUnsavedChanges()}),ls(p,async Oe=>{Oe&&n.currentPlan&&(le(),await r.loadPlanElements(n.currentPlan.id),await D(n.currentPlan.id))}),ls(()=>n.currentPlan,async Oe=>{Oe?(Pe.value=Oe,n.setCurrentPlan(Oe),r.setCurrentPlan(Oe.id)):(Pe.value=null,le())},{immediate:!0}),md(()=>{p.value&&p.value.off("moveend")});async function D(Oe){try{le(),await r.loadPlanElements(Oe);const xe=n.getPlanById(Oe);xe&&(Pe.value=xe,n.setCurrentPlan(xe),r.setCurrentPlan(xe.id),localStorage.setItem("lastPlanId",xe.id.toString()),p.value&&E.value&&r.getCurrentElements.forEach(it=>{var Dt;if(!E.value||!it.data)return;let vt=null;const{style:Lt={},...ze}=it.data;switch(it.type_forme){case"CERCLE":{const Tt=ze;Tt.center&&Tt.radius&&(vt=Ji.circle([Tt.center[1],Tt.center[0]],{...Lt,radius:Tt.radius}));break}case"RECTANGLE":{const Tt=ze;Tt.bounds&&(vt=Ji.rectangle([[Tt.bounds.southWest[1],Tt.bounds.southWest[0]],[Tt.bounds.northEast[1],Tt.bounds.northEast[0]]],Lt));break}case"DEMI_CERCLE":{const Tt=ze;Tt.center&&Tt.radius&&(vt=new Al(Ji.latLng(Tt.center[1],Tt.center[0]),Tt.radius,Tt.startAngle,Tt.endAngle,Lt));break}case"LIGNE":{const Tt=ze;if(Tt.points){const jt=Tt.points.map(Vt=>Ji.latLng(Vt[1],Vt[0]));vt=Ji.polyline(jt,Lt)}break}case"TEXTE":{const Tt=ze;if(Tt.position&&Tt.content){const jt=Ji.divIcon({html:`<div class="text-annotation" style="font-size: ${Lt.fontSize||"14px"}">${Tt.content}</div>`,className:"text-container"});vt=Ji.marker([Tt.position[1],Tt.position[0]],{icon:jt,...Lt})}break}}vt&&(vt.properties={type:it.type_forme,style:Lt,...ze},(Dt=E.value)==null||Dt.addLayer(vt),o.value.push({id:it.id,type:it.type_forme,layer:vt,properties:vt.properties}),ze.rotation&&typeof vt.setRotation=="function"&&vt.setRotation(ze.rotation))})),Ce.value=!1}catch(xe){console.error("Erreur lors du chargement du plan:",xe)}}async function K(){if(!Pe.value||!E.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}we.value=!0;try{const Oe=[];E.value.eachLayer(xe=>{var ze,Dt,Tt,jt,Vt,Nt,Pn,en;const it={style:{color:((ze=xe.options)==null?void 0:ze.color)||"#3388ff",fillColor:((Dt=xe.options)==null?void 0:Dt.fillColor)||"#3388ff",fillOpacity:((Tt=xe.options)==null?void 0:Tt.fillOpacity)||.2,weight:((jt=xe.options)==null?void 0:jt.weight)||3,opacity:((Vt=xe.options)==null?void 0:Vt.opacity)||1}};let vt,Lt;if(xe instanceof Ji.Circle)vt="CERCLE",Lt={...it,center:[xe.getLatLng().lng,xe.getLatLng().lat],radius:xe.getRadius()};else if(xe instanceof Ji.Rectangle){vt="RECTANGLE";const Jn=xe.getBounds();Lt={...it,bounds:{southWest:[Jn.getSouthWest().lng,Jn.getSouthWest().lat],northEast:[Jn.getNorthEast().lng,Jn.getNorthEast().lat]}}}else if(((Nt=xe.properties)==null?void 0:Nt.type)==="Semicircle")vt="DEMI_CERCLE",Lt={...it,center:[xe.getLatLng().lng,xe.getLatLng().lat],radius:xe.getRadius(),startAngle:xe.properties.style.startAngle||0,endAngle:xe.properties.style.stopAngle||180};else if(xe instanceof Ji.Polyline&&!(xe instanceof Ji.Polygon)){vt="LIGNE";const Jn=xe.getLatLngs();Lt={...it,points:Jn.map(un=>[un.lng,un.lat])}}else((Pn=xe.properties)==null?void 0:Pn.type)==="text"&&(vt="TEXTE",Lt={...it,position:[xe.getLatLng().lng,xe.getLatLng().lat],content:xe.properties.text,style:{...xe.properties.style,fontSize:xe.properties.style.fontSize}});vt&&Lt&&Oe.push({id:xe.id,type_forme:vt,data:{...Lt,rotation:((en=xe.properties)==null?void 0:en.rotation)||0}})}),r.elements=Oe,await r.saveToPlan(Pe.value.id),se.value=!0,setTimeout(()=>{se.value=!1},3e3)}catch(Oe){console.error("Erreur lors de la sauvegarde du plan:",Oe)}finally{we.value=!1}}mh(()=>{ue.user||De(),n.clearCurrentPlan(),r.clearCurrentPlan()});function he(Oe){w(Oe)}function _e(Oe){try{const xe=new Date(Oe);return isNaN(xe.getTime())?(console.error("Date invalide reçue:",Oe),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(xe)}catch(xe){return console.error("Erreur lors du formatage de la date:",xe),"Date invalide"}}const Le=()=>{C()},de=()=>{c.value&&E.value&&(y(""),E.value.removeLayer(c.value),c.value=null)};async function Se(){te.value=!0;try{const Oe=await wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});Be.value=Oe.data}catch(Oe){console.error("Erreur lors du chargement des concessionnaires:",Oe)}finally{te.value=!1}}async function Ae(){var Oe;console.log("[loadDealerClients] Starting..."),console.log("[loadDealerClients] authStore.user:",ue.user),Z.value=!0;try{const xe=(Oe=ue.user)==null?void 0:Oe.id;if(console.log("[loadDealerClients] Using dealerId:",xe),!xe){console.error("[loadDealerClients] No dealer ID available");return}const it=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:xe}});console.log("[loadDealerClients] Response:",it.data),Array.isArray(it.data)?Je.value=it.data:it.data?Je.value=[it.data]:Je.value=[],console.log("[loadDealerClients] Processed clients:",Je.value)}catch(xe){console.error("[loadDealerClients] Error:",xe),Je.value=[]}finally{Z.value=!1}}async function Ke(Oe){if(console.log("[MapView][selectClient] Starting with client:",Oe),console.log("[MapView][selectClient] Current state:",{selectedDealer:J.value,selectedClient:I.value,newPlanModalRef:!!ve.value}),ve.value){console.log("[MapView][selectClient] Using NewPlanModal ref"),ve.value.selectClient(Oe),I.value=Oe,console.log("[MapView][selectClient] Updated selectedClient:",I.value),ee.value=!0;try{const xe={client:Oe.id};J.value&&(xe.concessionnaire=J.value.id);const it=await wn.get("/plans/",{params:xe});console.log("[MapView][selectClient] Loaded client plans:",it.data),$.value=it.data}catch(xe){console.error("[MapView][selectClient] Error loading client plans:",xe),$.value=[]}finally{ee.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function rt(){J.value=null,I.value=null,Je.value=[],$.value=[]}function ne(){I.value=null,$.value=[]}async function ce(Oe){const xe=await n.getPlanById(Oe);xe&&(Pe.value=xe,n.setCurrentPlan(xe),r.setCurrentPlan(xe.id),X.value=!1)}async function Re(Oe){try{ve.value?(await ve.value.selectDealer(Oe),J.value=Oe,Je.value=ve.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(xe){console.error("[MapView][selectDealer] Error:",xe)}}ls(J,async Oe=>{var xe;if(Oe&&((xe=ue.user)==null?void 0:xe.user_type)==="admin"){Z.value=!0;try{const it=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Oe.id}});Je.value=Array.isArray(it.data)?it.data:[it.data]}catch(it){console.error("[MapView][watch selectedDealer] Error loading clients:",it),Je.value=[]}finally{Z.value=!1}}});function De(){localStorage.removeItem("lastPlanId")}function le(){E.value&&E.value.clearLayers(),o.value=[]}function Ve(Oe,xe="m"){return xe==="m²"?`${(Oe/1e4).toFixed(2)} ha`:xe==="m"?Oe>=1e3?`${(Oe/1e3).toFixed(2)} km`:`${Oe.toFixed(2)} m`:`${Oe.toFixed(2)} ${xe}`}const st=It(!1);function Qe(Oe){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",Text:"Texte"}[Oe]||Oe}async function ot(){var Oe,xe,it;if(!Pe.value||!p.value||!E.value){console.log("[generateSynthesis] Conditions initiales non remplies");return}try{console.log("[generateSynthesis] Début de la génération"),st.value=!0;const vt=Pe.value.concessionnaire_details,Lt=Pe.value.client_details;c.value&&(R(),c.value=null);const ze=new mn("l","mm","a4"),Dt=ze.internal.pageSize.getWidth(),Tt=ze.internal.pageSize.getHeight(),jt=new Image;jt.src=af,await new Promise(en=>{jt.onload=()=>en(),jt.onerror=()=>en()}),ze.addImage(jt,"JPEG",(Dt-60)/2,20,60,60),ze.setFontSize(24),ze.setTextColor(0),ze.text(Pe.value.nom||"Sans titre",Dt/2,100,{align:"center"});let Vt=120;if(ze.setFontSize(14),vt&&(ze.setFont("helvetica","bold"),ze.text("Concessionnaire:",20,Vt),ze.setFont("helvetica","normal"),ze.text(`${vt.first_name} ${vt.last_name}${vt.company_name?` (${vt.company_name})`:""}`,20,Vt+8),Vt+=25),Lt&&(ze.setFont("helvetica","bold"),ze.text("Client:",20,Vt),ze.setFont("helvetica","normal"),ze.text(`${Lt.first_name} ${Lt.last_name}${Lt.company_name?` (${Lt.company_name})`:""}`,20,Vt+8),Vt+=25),Pe.value.description){ze.setFont("helvetica","bold"),ze.text("Description:",20,Vt),ze.setFont("helvetica","normal");const en=ze.splitTextToSize(Pe.value.description,150);ze.text(en,20,Vt+8),Vt+=10*en.length+15}ze.setFontSize(10),ze.setTextColor(100),ze.text(`Date de création: ${_e(Pe.value.date_creation)}`,20,Tt-20),ze.text(`Dernière modification: ${_e(Pe.value.date_modification)}`,Dt-20,Tt-20,{align:"right"});const Nt=[];E.value.eachLayer(en=>Nt.push(en)),console.log(`[generateSynthesis] Nombre de formes à traiter: ${Nt.length}`);const Pn=Ji.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(p.value);await new Promise(en=>setTimeout(en,3e3));for(let en=0;en<Nt.length;en++){ze.addPage();const Jn=30;ze.addImage(af,"JPEG",Dt-Jn-10,10,Jn,30),ze.setFontSize(8),ze.setTextColor(100);let xn=25;vt&&(ze.text(`Concessionnaire: ${vt.first_name} ${vt.last_name}${vt.company_name?` (${vt.company_name})`:""}`,20,xn),xn+=10),Lt&&ze.text(`Client: ${Lt.first_name} ${Lt.last_name}${Lt.company_name?` (${Lt.company_name})`:""}`,20,xn),ze.setDrawColor(200,200,200),ze.setLineWidth(.5),ze.line(20,45,Dt-20,45);const Yn=Nt[en],zt=Yn.properties;zt&&(ze.setTextColor(0),ze.setFontSize(16),ze.setFont("helvetica","bold"),ze.text(Qe(zt.type),20,60));const Pr=((Oe=Yn.getBounds)==null?void 0:Oe.call(Yn))||((xe=Yn.getLatLng)==null?void 0:xe.call(Yn));Pr&&p.value.fitBounds(Pr instanceof Ji.LatLng?Ji.latLngBounds([Pr]):Pr,{padding:[50,50]}),await new Promise(In=>setTimeout(In,2e3)),p.value.invalidateSize(),await new Promise(In=>{const xi=()=>{var Jt;const Di=(Jt=p.value)==null?void 0:Jt.getContainer();if(!Di){In();return}const Un=Di.querySelectorAll(".leaflet-tile-loaded");Di.querySelectorAll(".leaflet-tile-loading").length===0&&Un.length>0?In():setTimeout(xi,100)};xi()});try{const In=await Pn.takeScreen("image"),xi=await new Promise((Jt,Kt)=>{const li=new Image;li.onload=()=>Jt(li),li.onerror=Sr=>Kt(Sr),li.src=In}),Di=Dt*.6-30;let Un=xi.height*Di/xi.width;Un>Tt*.9&&(Un=Tt*.9);const cn=Math.max(80,(Tt-Un)/2);if(ze.addImage(xi,"PNG",20,cn,Di,Un),zt){const Jt=Dt*.6+10;let Kt=70;ze.setFontSize(12),ze.setFont("helvetica","normal"),zt.type==="Circle"?(ze.text(`Rayon: ${Ve(zt.radius)}`,Jt,Kt),Kt+=10,ze.text(`Diamètre: ${Ve(zt.radius*2)}`,Jt,Kt),Kt+=10,ze.text(`Surface: ${Ve(zt.area,"m²")}`,Jt,Kt),Kt+=10,ze.text(`Périmètre: ${Ve(zt.perimeter)}`,Jt,Kt),Kt+=10,zt.surfaceInterieure&&(ze.text(`Surface intérieure: ${Ve(zt.surfaceInterieure,"m²")}`,Jt,Kt),Kt+=10),zt.surfaceExterieure&&(ze.text(`Surface extérieure: ${Ve(zt.surfaceExterieure,"m²")}`,Jt,Kt),Kt+=10)):zt.type==="Rectangle"?(ze.text(`Largeur: ${Ve(zt.width)}`,Jt,Kt),Kt+=10,ze.text(`Hauteur: ${Ve(zt.height)}`,Jt,Kt),Kt+=10,ze.text(`Surface: ${Ve(zt.area,"m²")}`,Jt,Kt),Kt+=10,ze.text(`Périmètre: ${Ve(zt.perimeter)}`,Jt,Kt),Kt+=10,zt.surfaceInterieure&&(ze.text(`Surface intérieure: ${Ve(zt.surfaceInterieure,"m²")}`,Jt,Kt),Kt+=10),zt.surfaceExterieure&&(ze.text(`Surface extérieure: ${Ve(zt.surfaceExterieure,"m²")}`,Jt,Kt),Kt+=10)):zt.type==="Line"?(ze.text(`Longueur: ${Ve(zt.length)}`,Jt,Kt),Kt+=10,(it=zt.dimensions)!=null&&it.width&&(ze.text(`Largeur d'influence: ${Ve(zt.dimensions.width)}`,Jt,Kt),Kt+=10),zt.surfaceInfluence&&(ze.text(`Surface d'influence: ${Ve(zt.surfaceInfluence,"m²")}`,Jt,Kt),Kt+=10)):zt.type==="Polygon"?(ze.text(`Surface: ${Ve(zt.area,"m²")}`,Jt,Kt),Kt+=10,ze.text(`Périmètre: ${Ve(zt.perimeter)}`,Jt,Kt),Kt+=10,zt.surfaceInterieure&&(ze.text(`Surface intérieure: ${Ve(zt.surfaceInterieure,"m²")}`,Jt,Kt),Kt+=10),zt.surfaceExterieure&&(ze.text(`Surface extérieure: ${Ve(zt.surfaceExterieure,"m²")}`,Jt,Kt),Kt+=10)):zt.type==="Semicircle"&&(ze.text(`Rayon: ${Ve(zt.radius)}`,Jt,Kt),Kt+=10,ze.text(`Diamètre: ${Ve(zt.radius*2)}`,Jt,Kt),Kt+=10,ze.text(`Surface: ${Ve(zt.area,"m²")}`,Jt,Kt),Kt+=10,ze.text(`Périmètre: ${Ve(zt.perimeter)}`,Jt,Kt),Kt+=10,ze.text(`Longueur d'arc: ${Ve(zt.arcLength)}`,Jt,Kt),Kt+=10,ze.text(`Angle d'ouverture: ${zt.openingAngle.toFixed(1)}°`,Jt,Kt),Kt+=10,zt.surfaceInterieure&&(ze.text(`Surface intérieure: ${Ve(zt.surfaceInterieure,"m²")}`,Jt,Kt),Kt+=10),zt.surfaceExterieure&&(ze.text(`Surface extérieure: ${Ve(zt.surfaceExterieure,"m²")}`,Jt,Kt),Kt+=10))}}catch(In){console.error(`[generateSynthesis] Erreur capture forme ${en+1}:`,In)}}p.value.removeControl(Pn),console.log("[generateSynthesis] Génération du PDF terminée"),ze.save(`synthese_${Pe.value.nom}.pdf`)}catch(vt){console.error("[generateSynthesis] Erreur:",vt)}finally{st.value=!1}}return(Oe,xe)=>{var it,vt,Lt;return ut(),dt("div",Ex,[B("div",Ax,[st.value?(ut(),dt("div",Mx,xe[8]||(xe[8]=[Xd('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):on("",!0),Pe.value?on("",!0):(ut(),dt("div",Bx,[B("div",Tx,[xe[11]||(xe[11]=Xd('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+af+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),B("div",Nx,[B("button",{onClick:xe[0]||(xe[0]=ze=>X.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},xe[9]||(xe[9]=[B("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),_i(" Créer un nouveau plan ")])),B("button",{onClick:xe[1]||(xe[1]=ze=>Ce.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},xe[10]||(xe[10]=[B("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),_i(" Charger un plan existant ")]))])])])),B("div",{ref_key:"mapContainer",ref:t,class:"absolute inset-0 w-full h-full"},null,512),Pe.value&&!st.value?(ut(),dt("div",Dx,[B("div",Ox,[xe[12]||(xe[12]=B("h2",{class:"text-sm font-semibold text-gray-700 mb-2"},"Type de carte",-1)),B("div",Ix,[(ut(!0),dt(En,null,Hn(Object.keys(Cn(q)),ze=>(ut(),dt("button",{key:ze,onClick:Dt=>Cn(G)(ze),class:Kr(["px-3 py-2 text-sm rounded-md transition-colors duration-200",{"bg-primary-600 text-white":Cn(F)===ze,"bg-gray-100 text-gray-700 hover:bg-gray-200":Cn(F)!==ze}])},kt(ze),11,Rx))),128))])]),B("div",Fx,[B("div",jx,[B("h1",zx,kt(((it=Pe.value)==null?void 0:it.nom)||"Aucun plan chargé"),1),(vt=Pe.value)!=null&&vt.description?(ut(),dt("span",Ux,kt(Pe.value.description),1)):on("",!0)]),B("div",qx,[B("button",{onClick:xe[2]||(xe[2]=ze=>X.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},xe[13]||(xe[13]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),_i(" Nouveau plan ")])),B("button",{onClick:xe[3]||(xe[3]=ze=>Ce.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},xe[14]||(xe[14]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),_i(" Charger un plan ")])),Pe.value?(ut(),dt("button",{key:0,onClick:K,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:we.value},[we.value?(ut(),dt("svg",Gx,xe[16]||(xe[16]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ut(),dt("svg",Vx,xe[15]||(xe[15]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),_i(" "+kt(we.value?"Sauvegarde...":"Enregistrer"),1)],8,$x)):on("",!0),B("button",{onClick:Le,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},xe[17]||(xe[17]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),_i(" Ajuster la vue ")])),B("button",{onClick:ot,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200"},xe[18]||(xe[18]=[B("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),_i(" Générer synthèse ")]))]),(Lt=Pe.value)!=null&&Lt.date_modification?(ut(),dt("div",Hx," Dernière sauvegarde : "+kt(_e(Pe.value.date_modification)),1)):on("",!0)])])):on("",!0),se.value?(ut(),dt("div",Wx,xe[19]||(xe[19]=[B("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),B("span",{class:"font-medium"},"Plan sauvegardé avec succès",-1)]))):on("",!0),Pe.value&&!st.value?(ut(),dt("div",Zx,[Ni(rw,{"current-tool":Cn(l),"selected-shape":j.value,onToolChange:Cn(y),onStyleUpdate:Cn(b),onPropertiesUpdate:he,onDeleteShape:de},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])])):on("",!0),Ni($g,{ref_key:"newPlanModalRef",ref:ve,modelValue:X.value,"onUpdate:modelValue":xe[4]||(xe[4]=ze=>X.value=ze),onCreated:ce,onDealerSelected:xe[5]||(xe[5]=ze=>J.value=ze),onClientSelected:xe[6]||(xe[6]=ze=>I.value=ze)},null,8,["modelValue"]),Ce.value?(ut(),dt("div",Kx,[B("div",Jx,[B("div",Yx,[xe[21]||(xe[21]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),B("button",{onClick:xe[7]||(xe[7]=ze=>Ce.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},xe[20]||(xe[20]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Cn(ue).isAdmin?(ut(),dt("div",Xx,[J.value?I.value?(ut(),dt("div",uL,[B("div",cL,[B("button",{onClick:ne,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},xe[30]||(xe[30]=[B("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),_i(" Retour à la liste des clients ")])),xe[31]||(xe[31]=B("span",{class:"mx-2 text-gray-400"},"|",-1)),B("span",hL,kt(I.value.first_name)+" "+kt(I.value.last_name)+" ("+kt(I.value.company_name)+") ",1)]),xe[33]||(xe[33]=B("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),B("div",fL,[ee.value?(ut(),dt(En,{key:0},Hn(3,ze=>B("div",{key:ze,class:"animate-pulse"},xe[32]||(xe[32]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),B("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ut(!0),dt(En,{key:1},Hn($.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Dt=>D(ze.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",pL,kt(ze.nom),1),B("div",mL,kt(ze.description),1),B("div",gL," Modifié le "+kt(_e(ze.date_modification)),1)],8,dL))),128))])])):(ut(),dt("div",iL,[B("div",rL,[B("button",{onClick:rt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},xe[25]||(xe[25]=[B("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),_i(" Retour à la liste des concessionnaires ")])),xe[26]||(xe[26]=B("span",{class:"mx-2 text-gray-400"},"|",-1)),B("span",sL,kt(J.value.first_name)+" "+kt(J.value.last_name)+" ("+kt(J.value.company_name)+") ",1)]),xe[29]||(xe[29]=B("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),B("div",oL,[Z.value?(ut(),dt(En,{key:0},Hn(3,ze=>B("div",{key:ze,class:"animate-pulse"},xe[27]||(xe[27]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ut(!0),dt(En,{key:1},Hn(V.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Dt=>Ke(ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",null,[B("div",lL,kt(ze.first_name)+" "+kt(ze.last_name)+" ("+kt(ze.company_name)+")",1)]),xe[28]||(xe[28]=B("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,aL))),128))])])):(ut(),dt("div",Qx,[xe[24]||(xe[24]=B("h3",{class:"font-medium text-gray-700"},"Sélectionnez un concessionnaire",-1)),B("div",eL,[te.value?(ut(),dt(En,{key:0},Hn(3,ze=>B("div",{key:ze,class:"animate-pulse"},xe[22]||(xe[22]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ut(!0),dt(En,{key:1},Hn(Be.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Dt=>Re(ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",null,[B("div",nL,kt(ze.first_name)+" "+kt(ze.last_name)+" ("+kt(ze.company_name)+")",1)]),xe[23]||(xe[23]=B("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,tL))),128))])]))])):Cn(ue).isDealer?(ut(),dt("div",vL,[I.value?(ut(),dt("div",xL,[B("div",LL,[B("button",{onClick:ne,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},xe[37]||(xe[37]=[B("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),_i(" Retour à la liste des clients ")])),xe[38]||(xe[38]=B("span",{class:"mx-2 text-gray-400"},"|",-1)),B("span",CL,kt(I.value.first_name)+" "+kt(I.value.last_name),1)]),xe[40]||(xe[40]=B("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),B("div",kL,[ee.value?(ut(),dt(En,{key:0},Hn(3,ze=>B("div",{key:ze,class:"animate-pulse"},xe[39]||(xe[39]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),B("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ut(!0),dt(En,{key:1},Hn($.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Dt=>D(ze.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",SL,kt(ze.nom),1),B("div",EL,kt(ze.description),1),B("div",AL," Modifié le "+kt(_e(ze.date_modification)),1)],8,PL))),128))])])):(ut(),dt("div",_L,[xe[36]||(xe[36]=B("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),B("div",yL,[Z.value?(ut(),dt(En,{key:0},Hn(3,ze=>B("div",{key:ze,class:"animate-pulse"},xe[34]||(xe[34]=[B("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[B("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),B("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ut(!0),dt(En,{key:1},Hn(V.value,ze=>(ut(),dt("button",{key:ze.id,onClick:Dt=>Ke(ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",null,[B("div",wL,kt(ze.first_name)+" "+kt(ze.last_name)+" ("+kt(ze.company_name)+")",1)]),xe[35]||(xe[35]=B("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,bL))),128))])]))])):(ut(),dt("div",ML,[Cn(n).plans.length===0?(ut(),dt("div",BL,xe[41]||(xe[41]=[B("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(ut(),dt("div",TL,[(ut(!0),dt(En,null,Hn(Cn(n).plans,ze=>(ut(),dt("button",{key:ze.id,onClick:Dt=>D(ze.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[B("div",DL,kt(ze.nom),1),B("div",OL,kt(ze.description),1),B("div",IL," Modifié le "+kt(_e(ze.date_modification)),1)],8,NL))),128))]))]))])])):on("",!0)])])}}}),RL={class:"fixed inset-0 z-50 overflow-y-auto"},FL={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},jL={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},zL={class:"mt-3 text-center sm:mt-0 sm:text-left"},UL={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},qL={class:"mt-4"},$L={class:"grid grid-cols-2 gap-4"},VL=["disabled"],GL={key:0,class:"mt-1 text-sm text-gray-500"},HL={class:"grid grid-cols-2 gap-4"},WL={key:0},ZL=["disabled"],KL=["value"],JL={key:1},YL=["disabled"],XL=["value"],QL={key:0},eC={class:"grid grid-cols-2 gap-4"},tC={key:1,class:"rounded-md bg-red-50 p-4"},nC={class:"flex"},iC={class:"ml-3"},rC={class:"text-sm font-medium text-red-800"},sC={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},oC=["disabled"],aC={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},h1=Es({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(e,{emit:t}){var R,O,q,F,G,X,Ce;const n=e,r=t,o=us(),l=It(!1),c=It(null),p=Tn(()=>{var Pe;return n.isAdmin?n.user?n.user.id!==((Pe=o.user)==null?void 0:Pe.id):!0:!1}),m=Tn(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),y=Tn(()=>n.isAdmin?w.role==="UTILISATEUR":!0),b=Tn(()=>n.dealers.filter(Pe=>Pe.role==="CONCESSIONNAIRE")),w=Fa({first_name:((R=n.user)==null?void 0:R.first_name)||"",last_name:((O=n.user)==null?void 0:O.last_name)||"",email:((q=n.user)==null?void 0:q.email)||"",username:((F=n.user)==null?void 0:F.username)||"",company_name:((G=n.user)==null?void 0:G.company_name)||"",role:((X=n.user)==null?void 0:X.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((Ce=n.user)==null?void 0:Ce.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),E=()=>{if(!w.first_name||!w.last_name)return c.value="Le prénom et le nom sont requis",!1;if(!w.email)return c.value="L'email est requis",!1;if(!w.username)return c.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!w.password)return c.value="Le mot de passe est requis",!1;if(w.password!==w.password_confirm)return c.value="Les mots de passe ne correspondent pas",!1}return w.role==="UTILISATEUR"&&!w.dealer?(c.value="Un concessionnaire doit être sélectionné pour un client",!1):!0},C=async()=>{var Pe;if(c.value=null,!!E()){l.value=!0;try{const we={...w};(Pe=n.user)!=null&&Pe.id&&(we.id=n.user.id,delete we.password,delete we.password_confirm),we.role==="UTILISATEUR"&&we.dealer&&(we.concessionnaire=we.dealer),delete we.dealer,await r("save",we),r("close")}catch(we){console.error("Erreur formulaire:",we),c.value=we.message,l.value=!1}}};return(Pe,we)=>(ut(),dt("div",RL,[B("div",FL,[we[24]||(we[24]=B("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[B("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),we[25]||(we[25]=B("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),B("div",jL,[B("div",null,[B("div",zL,[B("h3",UL,kt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),B("div",qL,[B("form",{onSubmit:yh(C,["prevent"]),class:"space-y-4"},[B("div",$L,[B("div",null,[we[10]||(we[10]=B("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),Fn(B("input",{type:"text",id:"first_name","onUpdate:modelValue":we[0]||(we[0]=se=>w.first_name=se),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Mi,w.first_name]])]),B("div",null,[we[11]||(we[11]=B("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Fn(B("input",{type:"text",id:"last_name","onUpdate:modelValue":we[1]||(we[1]=se=>w.last_name=se),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Mi,w.last_name]])])]),B("div",null,[we[12]||(we[12]=B("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Fn(B("input",{type:"email",id:"email","onUpdate:modelValue":we[2]||(we[2]=se=>w.email=se),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Mi,w.email]])]),B("div",null,[we[13]||(we[13]=B("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Fn(B("input",{type:"text",id:"username","onUpdate:modelValue":we[3]||(we[3]=se=>w.username=se),required:"",disabled:!!n.user,class:Kr(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,VL),[[Mi,w.username]]),n.user?(ut(),dt("p",GL," Le nom d'utilisateur ne peut pas être modifié après la création. ")):on("",!0)]),B("div",null,[we[14]||(we[14]=B("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),Fn(B("input",{type:"text",id:"company_name","onUpdate:modelValue":we[4]||(we[4]=se=>w.company_name=se),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Mi,w.company_name]])]),B("div",HL,[n.isAdmin?(ut(),dt("div",WL,[we[16]||(we[16]=B("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Fn(B("select",{id:"role","onUpdate:modelValue":we[5]||(we[5]=se=>w.role=se),required:"",disabled:!p.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[we[15]||(we[15]=B("option",{value:""},"Sélectionner un rôle",-1)),(ut(!0),dt(En,null,Hn(m.value,se=>(ut(),dt("option",{key:se.value,value:se.value},kt(se.label),9,KL))),128))],8,ZL),[[$s,w.role]])])):on("",!0),y.value?(ut(),dt("div",JL,[we[18]||(we[18]=B("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Fn(B("select",{id:"dealer","onUpdate:modelValue":we[6]||(we[6]=se=>w.dealer=se),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[we[17]||(we[17]=B("option",{value:""},"Sélectionner un concessionnaire",-1)),(ut(!0),dt(En,null,Hn(b.value,se=>(ut(),dt("option",{key:se.id,value:se.id},kt(Cn(Dl)(se)),9,XL))),128))],8,YL),[[$s,w.dealer]])])):on("",!0)]),e.user?on("",!0):(ut(),dt("div",QL,[B("div",eC,[B("div",null,[we[19]||(we[19]=B("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Fn(B("input",{type:"password",id:"password","onUpdate:modelValue":we[7]||(we[7]=se=>w.password=se),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Mi,w.password]])]),B("div",null,[we[20]||(we[20]=B("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Fn(B("input",{type:"password",id:"password_confirm","onUpdate:modelValue":we[8]||(we[8]=se=>w.password_confirm=se),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Mi,w.password_confirm]])])]),we[21]||(we[21]=B("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),c.value?(ut(),dt("div",tC,[B("div",nC,[we[22]||(we[22]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",iC,[B("h3",rC,kt(c.value),1)])])])):on("",!0),B("div",sC,[B("button",{type:"submit",disabled:l.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(ut(),dt("svg",aC,we[23]||(we[23]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):on("",!0),_i(" "+kt(l.value?"Enregistrement...":"Enregistrer"),1)],8,oC),B("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:we[9]||(we[9]=se=>Pe.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),lC={class:"fixed inset-0 z-50 overflow-y-auto"},uC={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},cC={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},hC={class:"sm:flex sm:items-start"},fC={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},dC={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},pC={class:"mt-2"},mC={class:"text-sm text-gray-500"},gC={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},f1=Es({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(t,n)=>(ut(),dt("div",lC,[B("div",uC,[n[3]||(n[3]=B("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[B("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=B("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),B("div",cC,[B("div",hC,[n[2]||(n[2]=B("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[B("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),B("div",fC,[B("h3",dC,kt(e.title),1),B("div",pC,[B("p",mC,kt(e.message),1)])])]),B("div",gC,[B("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>t.$emit("confirm"))}," Confirmer "),B("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>t.$emit("cancel"))}," Annuler ")])])])]))}}),vC={class:"h-full bg-gray-50"},_C={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},yC={class:"flex justify-between items-center mb-8"},bC={class:"text-3xl font-extrabold text-gray-900"},wC={class:"bg-white shadow rounded-lg mb-6 p-4"},xC={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},LC={key:0},CC=["placeholder"],kC={key:1},PC=["value"],SC={class:"bg-white shadow rounded-lg"},EC={class:"overflow-x-auto"},AC={class:"min-w-full divide-y divide-gray-200"},MC={class:"bg-gray-50"},BC={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},TC={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},NC={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},DC={class:"bg-white divide-y divide-gray-200"},OC={class:"px-6 py-4 whitespace-nowrap"},IC={class:"flex items-center"},RC={class:"flex-shrink-0 h-10 w-10"},FC={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},jC={class:"text-primary-600 font-medium"},zC={class:"ml-4"},UC={class:"text-sm font-medium text-gray-900"},qC={class:"text-sm text-gray-500"},$C={class:"px-6 py-4 whitespace-nowrap"},VC={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},GC={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},HC={class:"px-6 py-4 whitespace-nowrap"},WC={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ZC=["onClick"],KC=["onClick"],JC=Es({__name:"UserListView",setup(e){const t=us(),n=It([]),r=It([]),o=It(!1),l=It(!1),c=It(null),p=It(null),m=Fa({role:"",search:"",dealer:""}),y=Tn(()=>t.isAdmin),b=Tn(()=>t.isDealer),w=Tn(()=>n.value.filter($=>$.role==="CONCESSIONNAIRE")),E=Tn(()=>{var J;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",y.value),console.log("Is dealer:",b.value),console.log("Current filters:",m);let $=n.value;if(b.value&&(console.log("Filtering for dealer:",(J=t.user)==null?void 0:J.id),$=$.filter(I=>{var te;return I.role==="UTILISATEUR"&&I.dealer===((te=t.user)==null?void 0:te.id)}),console.log("Filtered users for dealer:",$)),y.value&&(m.role&&($=$.filter(I=>I.role===m.role),console.log("Filtered by role:",$)),m.dealer&&($=$.filter(I=>String(I.dealer)===String(m.dealer)),console.log("Filtered by dealer:",$))),m.search){const I=m.search.toLowerCase();$=$.filter(te=>te.username.toLowerCase().includes(I)||te.email.toLowerCase().includes(I)||te.first_name.toLowerCase().includes(I)||te.last_name.toLowerCase().includes(I)||te.company_name&&te.company_name.toLowerCase().includes(I)),console.log("Filtered by search:",$)}return console.log("Final filtered users:",$),$});Ra(async()=>{await C(),y.value&&await R()});async function C(){try{console.log("Fetching users...");const $=await wn.get("/users/");console.log("Users API response:",$.data),n.value=$.data,console.log("Users after assignment:",n.value)}catch($){console.error("Erreur lors de la récupération des utilisateurs:",$)}}async function R(){try{const $=await wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});r.value=$.data}catch($){console.error("Erreur lors de la récupération des concessionnaires:",$)}}function O(){c.value=null,o.value=!0}function q($){c.value={...$},o.value=!0}function F(){o.value=!1,c.value=null}async function G($){var J;try{let I;const te=!!$.id,Z={...$};return delete Z.dealer_name,delete Z.full_name,delete Z.user_type,delete Z.permissions,te?I=await wn.patch(`/users/${$.id}/`,Z):I=await wn.post("/users/",Z),await C(),F(),I.data}catch(I){const te=((J=I.response)==null?void 0:J.data)||{};let Z="";throw typeof te=="object"&&(Z=Object.entries(te).map(([ee,ve])=>Array.isArray(ve)?ve[0]:ve).filter(ee=>ee).join(`
`)),Z||(Z="Une erreur est survenue lors de la sauvegarde"),new Error(Z)}}function X($){p.value=$,l.value=!0}async function Ce(){if(p.value)try{await wn.delete(`/users/${p.value.id}/`),await C(),l.value=!1,p.value=null}catch($){throw console.error("Erreur lors de la suppression de l'utilisateur:",$),$}}function Pe($,J){return`${($==null?void 0:$.charAt(0))||""}${(J==null?void 0:J.charAt(0))||""}`.toUpperCase()}const we={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function se($){return we[$]||$}function ue($){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Be($){return $?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function Je($){var J;return y.value?!0:b.value?$.role==="UTILISATEUR"&&$.dealer===((J=t.user)==null?void 0:J.id):!1}return($,J)=>{var I,te;return ut(),dt("div",vC,[B("div",_C,[B("div",yC,[B("h1",bC,kt(y.value?"Gestion des utilisateurs":"Mes clients"),1),B("button",{onClick:O,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[J[4]||(J[4]=B("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),_i(" "+kt(y.value?"Nouvel utilisateur":"Nouveau client"),1)])]),B("div",wC,[B("div",xC,[y.value?(ut(),dt("div",LC,[J[6]||(J[6]=B("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Fn(B("select",{id:"role-filter","onUpdate:modelValue":J[0]||(J[0]=Z=>m.role=Z),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},J[5]||(J[5]=[B("option",{value:""},"Tous les rôles",-1),B("option",{value:"ADMIN"},"Admin",-1),B("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),B("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[$s,m.role]])])):on("",!0),B("div",null,[J[7]||(J[7]=B("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Fn(B("input",{type:"text",id:"search","onUpdate:modelValue":J[1]||(J[1]=Z=>m.search=Z),placeholder:y.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,CC),[[Mi,m.search]])]),y.value?(ut(),dt("div",kC,[J[9]||(J[9]=B("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Fn(B("select",{id:"dealer-filter","onUpdate:modelValue":J[2]||(J[2]=Z=>m.dealer=Z),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[8]||(J[8]=B("option",{value:""},"Tous les concessionnaires",-1)),(ut(!0),dt(En,null,Hn(w.value,Z=>(ut(),dt("option",{key:Z.id,value:Z.id},kt(Z.company_name||`${Z.first_name} ${Z.last_name}`),9,PC))),128))],512),[[$s,m.dealer]])])):on("",!0)])]),B("div",SC,[B("div",EC,[B("table",AC,[B("thead",MC,[B("tr",null,[B("th",BC,kt(y.value?"Utilisateur":"Client"),1),y.value?(ut(),dt("th",TC," Rôle ")):on("",!0),J[10]||(J[10]=B("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),y.value?(ut(),dt("th",NC," Concessionnaire ")):on("",!0),J[11]||(J[11]=B("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),J[12]||(J[12]=B("th",{scope:"col",class:"relative px-6 py-3"},[B("span",{class:"sr-only"},"Actions")],-1))])]),B("tbody",DC,[(ut(!0),dt(En,null,Hn(E.value,Z=>(ut(),dt("tr",{key:Z.id},[B("td",OC,[B("div",IC,[B("div",RC,[B("div",FC,[B("span",jC,kt(Pe(Z.first_name,Z.last_name)),1)])]),B("div",zC,[B("div",UC,kt(Cn(Dl)(Z)),1),B("div",qC,kt(Z.username),1)])])]),B("td",$C,[B("span",{class:Kr(ue(Z.role))},kt(se(Z.role)),3)]),B("td",VC,kt(Z.email),1),B("td",GC,kt(Z.dealer_name||"-"),1),B("td",HC,[B("span",{class:Kr(Be(Z.is_active))},kt(Z.is_active?"Actif":"Inactif"),3)]),B("td",WC,[B("button",{onClick:ee=>q(Z),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,ZC),Je(Z)?(ut(),dt("button",{key:0,onClick:ee=>X(Z),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,KC)):on("",!0)])]))),128))])])])])]),o.value?(ut(),Ia(h1,{key:0,user:c.value,dealers:r.value,"is-admin":y.value,"current-dealer":(te=(I=Cn(t).user)==null?void 0:I.id)==null?void 0:te.toString(),onClose:F,onSave:G},null,8,["user","dealers","is-admin","current-dealer"])):on("",!0),l.value?(ut(),Ia(f1,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:Ce,onCancel:J[3]||(J[3]=Z=>l.value=!1)})):on("",!0)])}}}),YC={class:"h-full bg-gray-50"},XC={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},QC={class:"sm:flex sm:items-center"},e6={class:"sm:flex-auto"},t6={class:"text-2xl font-semibold text-gray-900"},n6={class:"mt-2 text-sm text-gray-700"},i6={key:0,class:"mt-8"},r6={class:"mb-6"},s6=["value"],o6={key:0,class:"mb-6"},a6=["value"],l6={key:1,class:"mt-8"},u6={class:"mb-6"},c6=["value"],h6={class:"mt-8"},f6={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},d6={class:"overflow-x-auto"},p6={class:"min-w-full divide-y divide-gray-300"},m6={class:"bg-gray-50"},g6={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},v6={class:"ml-2 flex-none rounded"},_6={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},y6={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},b6={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},w6={class:"ml-2 flex-none rounded"},x6={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},L6={class:"ml-2 flex-none rounded"},C6={class:"divide-y divide-gray-200 bg-white"},k6={key:0},P6={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},S6={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},E6={key:0,class:"px-3 py-4 text-sm text-gray-900"},A6={key:0,class:"flex items-center"},M6={class:"h-8 w-8 flex-shrink-0"},B6={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},T6={class:"text-primary-700 font-medium text-sm"},N6={class:"ml-3"},D6={class:"font-medium"},O6={key:1,class:"text-gray-500"},I6={key:1,class:"px-3 py-4 text-sm text-gray-900"},R6={key:0,class:"flex items-center"},F6={class:"h-8 w-8 flex-shrink-0"},j6={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},z6={class:"text-primary-700 font-medium text-sm"},U6={class:"ml-3"},q6={class:"font-medium"},$6={key:1,class:"text-gray-500"},V6={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},G6={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},H6={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},W6=["onClick"],Z6=["onClick"],K6=["onClick"],J6={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Y6={class:"bg-white rounded-lg p-6 max-w-md w-full"},X6={class:"flex justify-between items-center mb-4"},Q6={key:0,class:"space-y-4"},ek=["value"],tk=["value"],nk={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},ik={class:"flex"},rk={class:"ml-3"},sk={class:"text-sm font-medium text-red-800"},ok={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},ak=["disabled"],lk={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},uk=Es({__name:"PlansView",setup(e){const t=hc(),n=Ah(),r=us(),o=qg(),l=It([]),c=It([]),p=It([]),m=It(!1),y=It(!1),b=It({nom:"",description:"",client:null}),w=It({id:0,nom:"",description:"",concessionnaire:null,client:null}),E=It(!1),C=It(null),R=It(null),O=It(null),q=It("date_modification"),F=It("desc"),G=Tn(()=>R.value?p.value.filter(V=>V.concessionnaire===R.value):p.value),X=Tn(()=>{let V=l.value;return r.isAdmin?R.value&&(V=V.filter(j=>j.concessionnaire===R.value),O.value&&(V=V.filter(j=>j.client===O.value))):r.isDealer&&(V=V.filter(j=>{var Y;return j.concessionnaire===((Y=r.user)==null?void 0:Y.id)}),O.value&&(V=V.filter(j=>j.client===O.value))),[...V].sort((j,Y)=>{if(q.value==="nom")return F.value==="asc"?j.nom.localeCompare(Y.nom):Y.nom.localeCompare(j.nom);{const Ie=new Date(j[q.value]).getTime(),D=new Date(Y[q.value]).getTime();return F.value==="asc"?Ie-D:D-Ie}})});Tn(()=>l.value.filter(V=>{var j;return V.createur.id===((j=r.user)==null?void 0:j.id)})),Tn(()=>l.value.filter(V=>{var j,Y,Ie;return r.isAdmin?V.createur.id!==((j=r.user)==null?void 0:j.id):r.isDealer?V.concessionnaire===((Y=r.user)==null?void 0:Y.id):V.client===((Ie=r.user)==null?void 0:Ie.id)}));const Ce=Tn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:l.value}:r.isDealer?{title:"Plans des clients",description:"Plans où vous êtes assigné comme concessionnaire",plans:l.value.filter(V=>{var j;return V.concessionnaire===((j=r.user)==null?void 0:j.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:l.value.filter(V=>{var j,Y;return V.client===((j=r.user)==null?void 0:j.id)||V.createur.id===((Y=r.user)==null?void 0:Y.id)})});Ra(async()=>{var V;await Pe(),r.isAdmin?await we():r.isDealer&&await I(((V=r.user)==null?void 0:V.id)||0)});async function Pe(){try{const V=await n.fetchPlansWithDetails();l.value=V.data}catch(V){console.error("Erreur lors du chargement des plans:",V)}}async function we(){try{const[V,j]=await Promise.all([wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),wn.get("/users/",{params:{role:"UTILISATEUR"}})]);c.value=V.data,p.value=j.data}catch(V){console.error("Erreur lors du chargement des dealers et clients:",V)}}function se(){m.value=!0,b.value={nom:"",description:"",client:null}}async function ue(V){try{n.setCurrentPlan(V),await o.loadPlanElements(V.id),t.push("/")}catch(j){console.error("Erreur lors du chargement du plan:",j),alert("Une erreur est survenue lors du chargement du plan")}}async function Be(V){var j;if(V!=null&&V.id&&confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await n.deletePlan(V.id),await Pe(),((j=n.currentPlan)==null?void 0:j.id)===V.id&&n.clearCurrentPlan()}catch(Y){console.error("Erreur lors de la suppression du plan:",Y),alert("Une erreur est survenue lors de la suppression du plan")}}function Je(V){return new Date(V).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function $(V){return V?(V.first_name.charAt(0)+V.last_name.charAt(0)).toUpperCase():""}function J(V){w.value={id:V.id,nom:V.nom,description:V.description,concessionnaire:V.concessionnaire||null,client:V.client||null},V.concessionnaire&&I(V.concessionnaire),y.value=!0}async function I(V){try{const j=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:V}});p.value=j.data}catch(j){console.error("Erreur lors du chargement des clients:",j),p.value=[]}}async function te(){var V,j,Y,Ie,D;C.value=null,E.value=!0;try{if(!w.value.nom.trim())throw new Error("Le nom du plan est requis");if(w.value.client&&!w.value.concessionnaire)throw new Error("Un concessionnaire doit être sélectionné pour assigner un client");await n.updatePlanDetails(w.value.id,{nom:w.value.nom.trim(),description:w.value.description.trim(),concessionnaire:w.value.concessionnaire,client:w.value.client})&&(y.value=!1,await Pe())}catch(K){if(console.error("Erreur lors de la mise à jour du plan:",K),(j=(V=K.response)==null?void 0:V.data)!=null&&j.detail)C.value=K.response.data.detail;else if((Ie=(Y=K.response)==null?void 0:Y.data)!=null&&Ie.non_field_errors)C.value=K.response.data.non_field_errors[0];else if((D=K.response)!=null&&D.data){const he=Object.entries(K.response.data).map(([_e,Le])=>`${_e}: ${Array.isArray(Le)?Le[0]:Le}`);C.value=he.join(`
`)}else C.value=K.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{E.value=!1}}ls(()=>w.value.concessionnaire,async V=>{V?await I(V):(p.value=[],w.value.client=null)});function Z(V){const j=r.user;return j?j.user_type==="admin"?!0:j.user_type==="dealer"?V.concessionnaire===j.id:V.client===j.id||V.createur.id===j.id:!1}Tn(()=>{const V=new Map;return l.value.forEach(j=>{j.createur&&V.set(j.createur.id,j.createur),j.concessionnaire_details&&V.set(j.concessionnaire_details.id,j.concessionnaire_details),j.client_details&&V.set(j.client_details.id,j.client_details)}),V});async function ee(V){await Pe(),t.push("/")}function ve(V){q.value===V?F.value=F.value==="asc"?"desc":"asc":(q.value=V,F.value="desc")}return(V,j)=>(ut(),dt("div",YC,[B("div",XC,[B("div",QC,[B("div",e6,[B("h1",t6,kt(Ce.value.title),1),B("p",n6,kt(Ce.value.description),1)]),B("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[B("button",{onClick:se,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Cn(r).isAdmin?(ut(),dt("div",i6,[B("div",r6,[j[14]||(j[14]=B("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),Fn(B("select",{id:"dealer-filter","onUpdate:modelValue":j[0]||(j[0]=Y=>R.value=Y),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[13]||(j[13]=B("option",{value:null},"Tous les concessionnaires",-1)),(ut(!0),dt(En,null,Hn(c.value,Y=>(ut(),dt("option",{key:Y.id,value:Y.id},kt(Y.first_name)+" "+kt(Y.last_name)+" ("+kt(Y.company_name)+") ",9,s6))),128))],512),[[$s,R.value]])]),R.value?(ut(),dt("div",o6,[j[16]||(j[16]=B("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),Fn(B("select",{id:"client-filter","onUpdate:modelValue":j[1]||(j[1]=Y=>O.value=Y),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[15]||(j[15]=B("option",{value:null},"Tous les clients",-1)),(ut(!0),dt(En,null,Hn(G.value,Y=>(ut(),dt("option",{key:Y.id,value:Y.id},kt(Y.first_name)+" "+kt(Y.last_name)+" ("+kt(Y.company_name)+") ",9,a6))),128))],512),[[$s,O.value]])])):on("",!0)])):Cn(r).isDealer?(ut(),dt("div",l6,[B("div",u6,[j[18]||(j[18]=B("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),Fn(B("select",{id:"client-filter","onUpdate:modelValue":j[2]||(j[2]=Y=>O.value=Y),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[17]||(j[17]=B("option",{value:null},"Tous les clients",-1)),(ut(!0),dt(En,null,Hn(p.value,Y=>(ut(),dt("option",{key:Y.id,value:Y.id},kt(Y.first_name)+" "+kt(Y.last_name)+" ("+kt(Y.company_name)+") ",9,c6))),128))],512),[[$s,O.value]])])])):on("",!0),B("div",h6,[B("div",f6,[B("div",d6,[B("table",p6,[B("thead",m6,[B("tr",null,[B("th",g6,[B("button",{onClick:j[3]||(j[3]=Y=>ve("nom")),class:"group inline-flex items-center"},[j[20]||(j[20]=_i(" Nom ")),B("span",v6,[(ut(),dt("svg",{class:Kr(["h-5 w-5",{"text-gray-900":q.value==="nom","text-gray-400":q.value!=="nom","rotate-180":q.value==="nom"&&F.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},j[19]||(j[19]=[B("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),j[25]||(j[25]=B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Cn(r).isDealer?on("",!0):(ut(),dt("th",_6," Concessionnaire ")),Cn(r).isClient?on("",!0):(ut(),dt("th",y6," Client ")),B("th",b6,[B("button",{onClick:j[4]||(j[4]=Y=>ve("date_creation")),class:"group inline-flex items-center"},[j[22]||(j[22]=_i(" Créé le ")),B("span",w6,[(ut(),dt("svg",{class:Kr(["h-5 w-5",{"text-gray-900":q.value==="date_creation","text-gray-400":q.value!=="date_creation","rotate-180":q.value==="date_creation"&&F.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},j[21]||(j[21]=[B("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),B("th",x6,[B("button",{onClick:j[5]||(j[5]=Y=>ve("date_modification")),class:"group inline-flex items-center"},[j[24]||(j[24]=_i(" Modifié le ")),B("span",L6,[(ut(),dt("svg",{class:Kr(["h-5 w-5",{"text-gray-900":q.value==="date_modification","text-gray-400":q.value!=="date_modification","rotate-180":q.value==="date_modification"&&F.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},j[23]||(j[23]=[B("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),j[26]||(j[26]=B("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[B("span",{class:"sr-only"},"Actions")],-1))])]),B("tbody",C6,[X.value.length===0?(ut(),dt("tr",k6,j[27]||(j[27]=[B("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):on("",!0),(ut(!0),dt(En,null,Hn(X.value,Y=>(ut(),dt("tr",{key:Y.id,class:"hover:bg-gray-50"},[B("td",P6,kt(Y.nom),1),B("td",S6,kt(Y.description||"-"),1),Cn(r).isDealer?on("",!0):(ut(),dt("td",E6,[Y.concessionnaire_details?(ut(),dt("div",A6,[B("div",M6,[B("div",B6,[B("span",T6,kt($(Y.concessionnaire_details)),1)])]),B("div",N6,[B("div",D6,kt(Cn(Dl)(Y.concessionnaire_details)),1)])])):(ut(),dt("div",O6,"-"))])),Cn(r).isClient?on("",!0):(ut(),dt("td",I6,[Y.client_details?(ut(),dt("div",R6,[B("div",F6,[B("div",j6,[B("span",z6,kt($(Y.client_details)),1)])]),B("div",U6,[B("div",q6,kt(Cn(Dl)(Y.client_details)),1)])])):(ut(),dt("div",$6,"-"))])),B("td",V6,kt(Je(Y.date_creation)),1),B("td",G6,kt(Je(Y.date_modification)),1),B("td",H6,[B("button",{onClick:Ie=>ue(Y),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,W6),B("button",{onClick:Ie=>J(Y),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Z6),Z(Y)?(ut(),dt("button",{key:0,onClick:Ie=>Be(Y),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,K6)):on("",!0)])]))),128))])])])])]),Ni($g,{modelValue:m.value,"onUpdate:modelValue":j[6]||(j[6]=Y=>m.value=Y),dealers:c.value,clients:p.value,onCreated:ee},null,8,["modelValue","dealers","clients"]),y.value?(ut(),dt("div",J6,[B("div",Y6,[B("div",X6,[j[29]||(j[29]=B("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),B("button",{onClick:j[7]||(j[7]=Y=>y.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},j[28]||(j[28]=[B("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),B("form",{onSubmit:yh(te,["prevent"]),class:"space-y-4"},[B("div",null,[j[30]||(j[30]=B("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Fn(B("input",{type:"text",id:"edit-nom","onUpdate:modelValue":j[8]||(j[8]=Y=>w.value.nom=Y),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Mi,w.value.nom]])]),B("div",null,[j[31]||(j[31]=B("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Fn(B("textarea",{id:"edit-description","onUpdate:modelValue":j[9]||(j[9]=Y=>w.value.description=Y),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Mi,w.value.description]])]),Cn(r).isAdmin?(ut(),dt("div",Q6,[B("div",null,[j[33]||(j[33]=B("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),Fn(B("select",{id:"edit-concessionnaire","onUpdate:modelValue":j[10]||(j[10]=Y=>w.value.concessionnaire=Y),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[32]||(j[32]=B("option",{value:null},"Aucun",-1)),(ut(!0),dt(En,null,Hn(c.value,Y=>(ut(),dt("option",{key:Y.id,value:Y.id},kt(Cn(Dl)(Y)),9,ek))),128))],512),[[$s,w.value.concessionnaire]])]),B("div",null,[j[35]||(j[35]=B("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),Fn(B("select",{id:"edit-client","onUpdate:modelValue":j[11]||(j[11]=Y=>w.value.client=Y),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[34]||(j[34]=B("option",{value:null},"Aucun",-1)),(ut(!0),dt(En,null,Hn(G.value,Y=>(ut(),dt("option",{key:Y.id,value:Y.id},kt(Cn(Dl)(Y)),9,tk))),128))],512),[[$s,w.value.client]])])])):on("",!0),C.value?(ut(),dt("div",nk,[B("div",ik,[j[36]||(j[36]=B("div",{class:"flex-shrink-0"},[B("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),B("div",rk,[B("p",sk,kt(C.value),1)])])])):on("",!0),B("div",ok,[B("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:j[12]||(j[12]=Y=>y.value=!1)}," Annuler "),B("button",{type:"submit",disabled:E.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[E.value?(ut(),dt("svg",lk,j[37]||(j[37]=[B("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),B("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):on("",!0),_i(" "+kt(E.value?"Enregistrement...":"Enregistrer"),1)],8,ak)])],32)])])):on("",!0)])]))}}),ck={class:"h-full bg-gray-50"},hk={class:"container mx-auto px-4 py-8"},fk={class:"sm:flex sm:items-center"},dk={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},pk={class:"mt-8"},mk={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},gk={class:"overflow-x-auto"},vk={class:"min-w-full divide-y divide-gray-300"},_k={class:"divide-y divide-gray-200 bg-white"},yk={key:0,class:"animate-pulse"},bk={key:1},wk={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},xk={class:"flex items-center"},Lk={class:"h-10 w-10 flex-shrink-0"},Ck={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},kk={class:"text-primary-600 font-medium"},Pk={class:"ml-4"},Sk={class:"font-medium text-gray-900"},Ek={class:"text-gray-500"},Ak={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Mk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Bk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Tk={class:"flex items-center"},Nk={class:"font-medium"},Dk={class:"text-gray-400 ml-1"},Ok={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},Ik=["onClick"],Rk=["onClick"],Fk=Es({__name:"ClientListView",setup(e){hc();const t=us(),n=It([]),r=It(!0),o=It(!1),l=It(!1),c=It(null),p=It(null);Ra(async()=>{await m()});async function m(){var O;try{const q=await wn.get("/users/",{params:{dealer:(O=t.user)==null?void 0:O.id,role:"UTILISATEUR",include_plans:!0}});n.value=q.data}catch(q){console.error("Error fetching clients:",q)}finally{r.value=!1}}function y(O,q){return`${(O==null?void 0:O.charAt(0))||""}${(q==null?void 0:q.charAt(0))||""}`.toUpperCase()}function b(O){c.value=O,o.value=!0}function w(){o.value=!1,c.value=null}async function E(O){var q;try{const F=!!O.id,G=F?`/users/${O.id}/`:"/users/",X=F?"patch":"post";O.role="UTILISATEUR",O.concessionnaire=(q=t.user)==null?void 0:q.id,await wn[X](G,O),await m(),w()}catch(F){throw console.error("Erreur lors de la sauvegarde du client:",F),F}}function C(O){p.value=O,l.value=!0}async function R(){if(p.value)try{await wn.delete(`/users/${p.value.id}/`),await m(),l.value=!1,p.value=null}catch(O){throw console.error("Erreur lors de la suppression du client:",O),O}}return(O,q)=>{var F,G;return ut(),dt("div",ck,[B("div",hk,[B("div",fk,[q[3]||(q[3]=B("div",{class:"sm:flex-auto"},[B("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),B("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),B("div",dk,[B("button",{onClick:q[0]||(q[0]=X=>o.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},q[2]||(q[2]=[B("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[B("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),_i(" Ajouter un client ")]))])]),B("div",pk,[B("div",mk,[B("div",gk,[B("table",vk,[q[6]||(q[6]=B("thead",{class:"bg-gray-50"},[B("tr",null,[B("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),B("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),B("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[B("span",{class:"sr-only"},"Actions")])])],-1)),B("tbody",_k,[r.value?(ut(),dt("tr",yk,q[4]||(q[4]=[B("td",{colspan:"5",class:"py-4 px-6"},[B("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(ut(),dt("tr",bk,q[5]||(q[5]=[B("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):on("",!0),(ut(!0),dt(En,null,Hn(n.value,X=>(ut(),dt("tr",{key:X.id,class:"hover:bg-gray-50"},[B("td",wk,[B("div",xk,[B("div",Lk,[B("div",Ck,[B("span",kk,kt(y(X.first_name,X.last_name)),1)])]),B("div",Pk,[B("div",Sk,kt(Cn(Dl)(X)),1),B("div",Ek,kt(X.username),1)])])]),B("td",Ak,kt(X.email),1),B("td",Mk,kt(X.company_name||"-"),1),B("td",Bk,[B("div",Tk,[B("span",Nk,kt(X.plans_count||0),1),B("span",Dk,"plan"+kt((X.plans_count||0)>1?"s":""),1)])]),B("td",Ok,[B("button",{onClick:Ce=>b(X),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Ik),B("button",{onClick:Ce=>C(X),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Rk)])]))),128))])])])])]),o.value?(ut(),Ia(h1,{key:0,user:c.value||{},dealers:[{...Cn(t).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(G=(F=Cn(t).user)==null?void 0:F.id)==null?void 0:G.toString(),onClose:w,onSave:E},null,8,["user","dealers","current-dealer"])):on("",!0),l.value?(ut(),Ia(f1,{key:1,title:"Supprimer le client",message:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible.",onConfirm:R,onCancel:q[1]||(q[1]=X=>l.value=!1)})):on("",!0)])])}}}),d1=M5({history:a5("/"),routes:[{path:"/",name:"home",component:D0,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:uk,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:JC,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:Fk,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Ol(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:Jb,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Ol(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Ol(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:Bb,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:D0,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Ol(()=>import("./NotFoundView.js"),[])}]});d1.beforeEach(async(e,t,n)=>{var p,m;const r=us();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(y){console.error("Error initializing auth store:",y)}const o=r.isAuthenticated,l=(p=r.user)==null?void 0:p.must_change_password,c=(m=r.user)==null?void 0:m.user_type;if(e.meta.requiresAuth&&!o){n("/login");return}if(o&&l&&e.name!=="changePassword"){n({name:"changePassword"});return}if(e.name==="changePassword"&&!l){n({name:"home"});return}if(e.meta.allowedRoles&&c&&!e.meta.allowedRoles.includes(c)){n({name:"home"});return}if(e.meta.requiresGuest&&o){n({name:"home"});return}n()});const Sd=G_(ub),p1=Z_();Sd.use(p1);Sd.use(d1);const jk=us(p1);window.INITIAL_STATE&&jk.initialize(window.INITIAL_STATE);Sd.mount("#app");export{si as _,Fa as a,B as b,dt as c,Es as d,on as e,Fn as f,ut as g,Xd as h,_i as i,Ni as j,Bl as k,Sv as l,sP as m,Kr as n,Ra as o,hc as p,co as q,It as r,Ng as s,kt as t,us as u,Mi as v,yh as w};
