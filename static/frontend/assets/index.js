var y1=Object.defineProperty;var b1=(e,t,n)=>t in e?y1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qt=(e,t,n)=>b1(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function id(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const ar={},hu=[],ua=()=>{},w1=()=>!1,uh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),sd=e=>e.startsWith("onUpdate:"),Zi=Object.assign,od=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},x1=Object.prototype.hasOwnProperty,rr=(e,t)=>x1.call(e,t),fn=Array.isArray,fu=e=>lc(e)==="[object Map]",xu=e=>lc(e)==="[object Set]",Ud=e=>lc(e)==="[object Date]",kn=e=>typeof e=="function",Kr=e=>typeof e=="string",ha=e=>typeof e=="symbol",pr=e=>e!==null&&typeof e=="object",N0=e=>(pr(e)||kn(e))&&kn(e.then)&&kn(e.catch),D0=Object.prototype.toString,lc=e=>D0.call(e),L1=e=>lc(e).slice(8,-1),O0=e=>lc(e)==="[object Object]",ad=e=>Kr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qu=id(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ch=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},C1=/-(\w)/g,mo=ch(e=>e.replace(C1,(t,n)=>n?n.toUpperCase():"")),k1=/\B([A-Z])/g,Vl=ch(e=>e.replace(k1,"-$1").toLowerCase()),hh=ch(e=>e.charAt(0).toUpperCase()+e.slice(1)),Vh=ch(e=>e?`on${hh(e)}`:""),cl=(e,t)=>!Object.is(e,t),Tc=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},I0=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Gc=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let qd;const fh=()=>qd||(qd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dh(e){if(fn(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=Kr(i)?S1(i):dh(i);if(o)for(const l in o)t[l]=o[l]}return t}else if(Kr(e)||pr(e))return e}const P1=/;(?![^(]*\))/g,E1=/:([^]+)/,A1=/\/\*[^]*?\*\//g;function S1(e){const t={};return e.replace(A1,"").split(P1).forEach(n=>{if(n){const i=n.split(E1);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function as(e){let t="";if(Kr(e))t=e;else if(fn(e))for(let n=0;n<e.length;n++){const i=as(e[n]);i&&(t+=i+" ")}else if(pr(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const M1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",B1=id(M1);function R0(e){return!!e||e===""}function T1(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=jl(e[i],t[i]);return n}function jl(e,t){if(e===t)return!0;let n=Ud(e),i=Ud(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=ha(e),i=ha(t),n||i)return e===t;if(n=fn(e),i=fn(t),n||i)return n&&i?T1(e,t):!1;if(n=pr(e),i=pr(t),n||i){if(!n||!i)return!1;const o=Object.keys(e).length,l=Object.keys(t).length;if(o!==l)return!1;for(const c in e){const p=e.hasOwnProperty(c),m=t.hasOwnProperty(c);if(p&&!m||!p&&m||!jl(e[c],t[c]))return!1}}return String(e)===String(t)}function ld(e,t){return e.findIndex(n=>jl(n,t))}const F0=e=>!!(e&&e.__v_isRef===!0),Nt=e=>Kr(e)?e:e==null?"":fn(e)||pr(e)&&(e.toString===D0||!kn(e.toString))?F0(e)?Nt(e.value):JSON.stringify(e,j0,2):String(e),j0=(e,t)=>F0(t)?j0(e,t.value):fu(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,o],l)=>(n[Gh(i,l)+" =>"]=o,n),{})}:xu(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Gh(n))}:ha(t)?Gh(t):pr(t)&&!fn(t)&&!O0(t)?String(t):t,Gh=(e,t="")=>{var n;return ha(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ss;class z0{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ss,!t&&ss&&(this.index=(ss.scopes||(ss.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ss;try{return ss=this,t()}finally{ss=n}}}on(){ss=this}off(){ss=this.parent}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function U0(e){return new z0(e)}function q0(){return ss}function N1(e,t=!1){ss&&ss.cleanups.push(e)}let dr;const Hh=new WeakSet;class $0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ss&&ss.active&&ss.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Hh.has(this)&&(Hh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||G0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$d(this),H0(this);const t=dr,n=Io;dr=this,Io=!0;try{return this.fn()}finally{W0(this),dr=t,Io=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)hd(t);this.deps=this.depsTail=void 0,$d(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Hh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wf(this)&&this.run()}get dirty(){return wf(this)}}let V0=0,$u,Vu;function G0(e,t=!1){if(e.flags|=8,t){e.next=Vu,Vu=e;return}e.next=$u,$u=e}function ud(){V0++}function cd(){if(--V0>0)return;if(Vu){let t=Vu;for(Vu=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;$u;){let t=$u;for($u=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function H0(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function W0(e){let t,n=e.depsTail,i=n;for(;i;){const o=i.prevDep;i.version===-1?(i===n&&(n=o),hd(i),D1(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}e.deps=t,e.depsTail=n}function wf(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Z0(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Z0(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Xu))return;e.globalVersion=Xu;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!wf(e)){e.flags&=-3;return}const n=dr,i=Io;dr=e,Io=!0;try{H0(e);const o=e.fn(e._value);(t.version===0||cl(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{dr=n,Io=i,W0(e),e.flags&=-3}}function hd(e,t=!1){const{dep:n,prevSub:i,nextSub:o}=e;if(i&&(i.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)hd(l,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function D1(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Io=!0;const K0=[];function ml(){K0.push(Io),Io=!1}function gl(){const e=K0.pop();Io=e===void 0?!0:e}function $d(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=dr;dr=void 0;try{t()}finally{dr=n}}}let Xu=0;class O1{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class fd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!dr||!Io||dr===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==dr)n=this.activeLink=new O1(dr,this),dr.deps?(n.prevDep=dr.depsTail,dr.depsTail.nextDep=n,dr.depsTail=n):dr.deps=dr.depsTail=n,J0(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=dr.depsTail,n.nextDep=void 0,dr.depsTail.nextDep=n,dr.depsTail=n,dr.deps===n&&(dr.deps=i)}return n}trigger(t){this.version++,Xu++,this.notify(t)}notify(t){ud();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{cd()}}}function J0(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)J0(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Hc=new WeakMap,Ol=Symbol(""),xf=Symbol(""),Qu=Symbol("");function Vi(e,t,n){if(Io&&dr){let i=Hc.get(e);i||Hc.set(e,i=new Map);let o=i.get(n);o||(i.set(n,o=new fd),o.map=i,o.key=n),o.track()}}function Na(e,t,n,i,o,l){const c=Hc.get(e);if(!c){Xu++;return}const p=m=>{m&&m.trigger()};if(ud(),t==="clear")c.forEach(p);else{const m=fn(e),y=m&&ad(n);if(m&&n==="length"){const b=Number(i);c.forEach((w,A)=>{(A==="length"||A===Qu||!ha(A)&&A>=b)&&p(w)})}else switch((n!==void 0||c.has(void 0))&&p(c.get(n)),y&&p(c.get(Qu)),t){case"add":m?y&&p(c.get("length")):(p(c.get(Ol)),fu(e)&&p(c.get(xf)));break;case"delete":m||(p(c.get(Ol)),fu(e)&&p(c.get(xf)));break;case"set":fu(e)&&p(c.get(Ol));break}}cd()}function I1(e,t){const n=Hc.get(e);return n&&n.get(t)}function eu(e){const t=Zn(e);return t===e?t:(Vi(t,"iterate",Qu),ho(e)?t:t.map(Gi))}function ph(e){return Vi(e=Zn(e),"iterate",Qu),e}const R1={__proto__:null,[Symbol.iterator](){return Wh(this,Symbol.iterator,Gi)},concat(...e){return eu(this).concat(...e.map(t=>fn(t)?eu(t):t))},entries(){return Wh(this,"entries",e=>(e[1]=Gi(e[1]),e))},every(e,t){return Sa(this,"every",e,t,void 0,arguments)},filter(e,t){return Sa(this,"filter",e,t,n=>n.map(Gi),arguments)},find(e,t){return Sa(this,"find",e,t,Gi,arguments)},findIndex(e,t){return Sa(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Sa(this,"findLast",e,t,Gi,arguments)},findLastIndex(e,t){return Sa(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Sa(this,"forEach",e,t,void 0,arguments)},includes(...e){return Zh(this,"includes",e)},indexOf(...e){return Zh(this,"indexOf",e)},join(e){return eu(this).join(e)},lastIndexOf(...e){return Zh(this,"lastIndexOf",e)},map(e,t){return Sa(this,"map",e,t,void 0,arguments)},pop(){return Tu(this,"pop")},push(...e){return Tu(this,"push",e)},reduce(e,...t){return Vd(this,"reduce",e,t)},reduceRight(e,...t){return Vd(this,"reduceRight",e,t)},shift(){return Tu(this,"shift")},some(e,t){return Sa(this,"some",e,t,void 0,arguments)},splice(...e){return Tu(this,"splice",e)},toReversed(){return eu(this).toReversed()},toSorted(e){return eu(this).toSorted(e)},toSpliced(...e){return eu(this).toSpliced(...e)},unshift(...e){return Tu(this,"unshift",e)},values(){return Wh(this,"values",Gi)}};function Wh(e,t,n){const i=ph(e),o=i[t]();return i!==e&&!ho(e)&&(o._next=o.next,o.next=()=>{const l=o._next();return l.value&&(l.value=n(l.value)),l}),o}const F1=Array.prototype;function Sa(e,t,n,i,o,l){const c=ph(e),p=c!==e&&!ho(e),m=c[t];if(m!==F1[t]){const w=m.apply(e,l);return p?Gi(w):w}let y=n;c!==e&&(p?y=function(w,A){return n.call(this,Gi(w),A,e)}:n.length>2&&(y=function(w,A){return n.call(this,w,A,e)}));const b=m.call(c,y,i);return p&&o?o(b):b}function Vd(e,t,n,i){const o=ph(e);let l=n;return o!==e&&(ho(e)?n.length>3&&(l=function(c,p,m){return n.call(this,c,p,m,e)}):l=function(c,p,m){return n.call(this,c,Gi(p),m,e)}),o[t](l,...i)}function Zh(e,t,n){const i=Zn(e);Vi(i,"iterate",Qu);const o=i[t](...n);return(o===-1||o===!1)&&md(n[0])?(n[0]=Zn(n[0]),i[t](...n)):o}function Tu(e,t,n=[]){ml(),ud();const i=Zn(e)[t].apply(e,n);return cd(),gl(),i}const j1=id("__proto__,__v_isRef,__isVue"),Y0=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ha));function z1(e){ha(e)||(e=String(e));const t=Zn(this);return Vi(t,"has",e),t.hasOwnProperty(e)}class X0{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return l;if(n==="__v_raw")return i===(o?l?J1:nm:l?tm:em).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const c=fn(t);if(!o){let m;if(c&&(m=R1[n]))return m;if(n==="hasOwnProperty")return z1}const p=Reflect.get(t,n,jr(t)?t:i);return(ha(n)?Y0.has(n):j1(n))||(o||Vi(t,"get",n),l)?p:jr(p)?c&&ad(n)?p:p.value:pr(p)?o?im(p):Fa(p):p}}class Q0 extends X0{constructor(t=!1){super(!1,t)}set(t,n,i,o){let l=t[n];if(!this._isShallow){const m=zl(l);if(!ho(i)&&!zl(i)&&(l=Zn(l),i=Zn(i)),!fn(t)&&jr(l)&&!jr(i))return m?!1:(l.value=i,!0)}const c=fn(t)&&ad(n)?Number(n)<t.length:rr(t,n),p=Reflect.set(t,n,i,jr(t)?t:o);return t===Zn(o)&&(c?cl(i,l)&&Na(t,"set",n,i):Na(t,"add",n,i)),p}deleteProperty(t,n){const i=rr(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&i&&Na(t,"delete",n,void 0),o}has(t,n){const i=Reflect.has(t,n);return(!ha(n)||!Y0.has(n))&&Vi(t,"has",n),i}ownKeys(t){return Vi(t,"iterate",fn(t)?"length":Ol),Reflect.ownKeys(t)}}class U1 extends X0{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const q1=new Q0,$1=new U1,V1=new Q0(!0);const Lf=e=>e,Lc=e=>Reflect.getPrototypeOf(e);function G1(e,t,n){return function(...i){const o=this.__v_raw,l=Zn(o),c=fu(l),p=e==="entries"||e===Symbol.iterator&&c,m=e==="keys"&&c,y=o[e](...i),b=n?Lf:t?Cf:Gi;return!t&&Vi(l,"iterate",m?xf:Ol),{next(){const{value:w,done:A}=y.next();return A?{value:w,done:A}:{value:p?[b(w[0]),b(w[1])]:b(w),done:A}},[Symbol.iterator](){return this}}}}function Cc(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function H1(e,t){const n={get(o){const l=this.__v_raw,c=Zn(l),p=Zn(o);e||(cl(o,p)&&Vi(c,"get",o),Vi(c,"get",p));const{has:m}=Lc(c),y=t?Lf:e?Cf:Gi;if(m.call(c,o))return y(l.get(o));if(m.call(c,p))return y(l.get(p));l!==c&&l.get(o)},get size(){const o=this.__v_raw;return!e&&Vi(Zn(o),"iterate",Ol),Reflect.get(o,"size",o)},has(o){const l=this.__v_raw,c=Zn(l),p=Zn(o);return e||(cl(o,p)&&Vi(c,"has",o),Vi(c,"has",p)),o===p?l.has(o):l.has(o)||l.has(p)},forEach(o,l){const c=this,p=c.__v_raw,m=Zn(p),y=t?Lf:e?Cf:Gi;return!e&&Vi(m,"iterate",Ol),p.forEach((b,w)=>o.call(l,y(b),y(w),c))}};return Zi(n,e?{add:Cc("add"),set:Cc("set"),delete:Cc("delete"),clear:Cc("clear")}:{add(o){!t&&!ho(o)&&!zl(o)&&(o=Zn(o));const l=Zn(this);return Lc(l).has.call(l,o)||(l.add(o),Na(l,"add",o,o)),this},set(o,l){!t&&!ho(l)&&!zl(l)&&(l=Zn(l));const c=Zn(this),{has:p,get:m}=Lc(c);let y=p.call(c,o);y||(o=Zn(o),y=p.call(c,o));const b=m.call(c,o);return c.set(o,l),y?cl(l,b)&&Na(c,"set",o,l):Na(c,"add",o,l),this},delete(o){const l=Zn(this),{has:c,get:p}=Lc(l);let m=c.call(l,o);m||(o=Zn(o),m=c.call(l,o)),p&&p.call(l,o);const y=l.delete(o);return m&&Na(l,"delete",o,void 0),y},clear(){const o=Zn(this),l=o.size!==0,c=o.clear();return l&&Na(o,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=G1(o,e,t)}),n}function dd(e,t){const n=H1(e,t);return(i,o,l)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?i:Reflect.get(rr(n,o)&&o in i?n:i,o,l)}const W1={get:dd(!1,!1)},Z1={get:dd(!1,!0)},K1={get:dd(!0,!1)};const em=new WeakMap,tm=new WeakMap,nm=new WeakMap,J1=new WeakMap;function Y1(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function X1(e){return e.__v_skip||!Object.isExtensible(e)?0:Y1(L1(e))}function Fa(e){return zl(e)?e:pd(e,!1,q1,W1,em)}function rm(e){return pd(e,!1,V1,Z1,tm)}function im(e){return pd(e,!0,$1,K1,nm)}function pd(e,t,n,i,o){if(!pr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=o.get(e);if(l)return l;const c=X1(e);if(c===0)return e;const p=new Proxy(e,c===2?i:n);return o.set(e,p),p}function hl(e){return zl(e)?hl(e.__v_raw):!!(e&&e.__v_isReactive)}function zl(e){return!!(e&&e.__v_isReadonly)}function ho(e){return!!(e&&e.__v_isShallow)}function md(e){return e?!!e.__v_raw:!1}function Zn(e){const t=e&&e.__v_raw;return t?Zn(t):e}function gd(e){return!rr(e,"__v_skip")&&Object.isExtensible(e)&&I0(e,"__v_skip",!0),e}const Gi=e=>pr(e)?Fa(e):e,Cf=e=>pr(e)?im(e):e;function jr(e){return e?e.__v_isRef===!0:!1}function It(e){return sm(e,!1)}function Q1(e){return sm(e,!0)}function sm(e,t){return jr(e)?e:new e_(e,t)}class e_{constructor(t,n){this.dep=new fd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Zn(t),this._value=n?t:Gi(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||ho(t)||zl(t);t=i?t:Zn(t),cl(t,n)&&(this._rawValue=t,this._value=i?t:Gi(t),this.dep.trigger())}}function Cn(e){return jr(e)?e.value:e}const t_={get:(e,t,n)=>t==="__v_raw"?e:Cn(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const o=e[t];return jr(o)&&!jr(n)?(o.value=n,!0):Reflect.set(e,t,n,i)}};function om(e){return hl(e)?e:new Proxy(e,t_)}function n_(e){const t=fn(e)?new Array(e.length):{};for(const n in e)t[n]=i_(e,n);return t}class r_{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return I1(Zn(this._object),this._key)}}function i_(e,t,n){const i=e[t];return jr(i)?i:new r_(e,t,n)}class s_{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new fd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Xu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&dr!==this)return G0(this,!0),!0}get value(){const t=this.dep.track();return Z0(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function o_(e,t,n=!1){let i,o;return kn(e)?i=e:(i=e.get,o=e.set),new s_(i,o,n)}const kc={},Wc=new WeakMap;let Al;function a_(e,t=!1,n=Al){if(n){let i=Wc.get(n);i||Wc.set(n,i=[]),i.push(e)}}function l_(e,t,n=ar){const{immediate:i,deep:o,once:l,scheduler:c,augmentJob:p,call:m}=n,y=pe=>o?pe:ho(pe)||o===!1||o===0?Da(pe,1):Da(pe);let b,w,A,C,M=!1,N=!1;if(jr(e)?(w=()=>e.value,M=ho(e)):hl(e)?(w=()=>y(e),M=!0):fn(e)?(N=!0,M=e.some(pe=>hl(pe)||ho(pe)),w=()=>e.map(pe=>{if(jr(pe))return pe.value;if(hl(pe))return y(pe);if(kn(pe))return m?m(pe,2):pe()})):kn(e)?t?w=m?()=>m(e,2):e:w=()=>{if(A){ml();try{A()}finally{gl()}}const pe=Al;Al=b;try{return m?m(e,3,[C]):e(C)}finally{Al=pe}}:w=ua,t&&o){const pe=w,Ce=o===!0?1/0:o;w=()=>Da(pe(),Ce)}const F=q0(),j=()=>{b.stop(),F&&F.active&&od(F.effects,b)};if(l&&t){const pe=t;t=(...Ce)=>{pe(...Ce),j()}}let z=N?new Array(e.length).fill(kc):kc;const $=pe=>{if(!(!(b.flags&1)||!b.dirty&&!pe))if(t){const Ce=b.run();if(o||M||(N?Ce.some((Te,ke)=>cl(Te,z[ke])):cl(Ce,z))){A&&A();const Te=Al;Al=b;try{const ke=[Ce,z===kc?void 0:N&&z[0]===kc?[]:z,C];m?m(t,3,ke):t(...ke),z=Ce}finally{Al=Te}}}else b.run()};return p&&p($),b=new $0(w),b.scheduler=c?()=>c($,!1):$,C=pe=>a_(pe,!1,b),A=b.onStop=()=>{const pe=Wc.get(b);if(pe){if(m)m(pe,4);else for(const Ce of pe)Ce();Wc.delete(b)}},t?i?$(!0):z=b.run():c?c($.bind(null,!0),!0):b.run(),j.pause=b.pause.bind(b),j.resume=b.resume.bind(b),j.stop=j,j}function Da(e,t=1/0,n){if(t<=0||!pr(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,jr(e))Da(e.value,t,n);else if(fn(e))for(let i=0;i<e.length;i++)Da(e[i],t,n);else if(xu(e)||fu(e))e.forEach(i=>{Da(i,t,n)});else if(O0(e)){for(const i in e)Da(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&Da(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function uc(e,t,n,i){try{return i?e(...i):e()}catch(o){mh(o,t,n)}}function fa(e,t,n,i){if(kn(e)){const o=uc(e,t,n,i);return o&&N0(o)&&o.catch(l=>{mh(l,t,n)}),o}if(fn(e)){const o=[];for(let l=0;l<e.length;l++)o.push(fa(e[l],t,n,i));return o}}function mh(e,t,n,i=!0){const o=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:c}=t&&t.appContext.config||ar;if(t){let p=t.parent;const m=t.proxy,y=`https://vuejs.org/error-reference/#runtime-${n}`;for(;p;){const b=p.ec;if(b){for(let w=0;w<b.length;w++)if(b[w](e,m,y)===!1)return}p=p.parent}if(l){ml(),uc(l,null,10,[e,m,y]),gl();return}}u_(e,n,o,i,c)}function u_(e,t,n,i=!0,o=!1){if(o)throw e;console.error(e)}const os=[];let oa=-1;const du=[];let ol=null,iu=0;const am=Promise.resolve();let Zc=null;function Ul(e){const t=Zc||am;return e?t.then(this?e.bind(this):e):t}function c_(e){let t=oa+1,n=os.length;for(;t<n;){const i=t+n>>>1,o=os[i],l=ec(o);l<e||l===e&&o.flags&2?t=i+1:n=i}return t}function _d(e){if(!(e.flags&1)){const t=ec(e),n=os[os.length-1];!n||!(e.flags&2)&&t>=ec(n)?os.push(e):os.splice(c_(t),0,e),e.flags|=1,lm()}}function lm(){Zc||(Zc=am.then(cm))}function h_(e){fn(e)?du.push(...e):ol&&e.id===-1?ol.splice(iu+1,0,e):e.flags&1||(du.push(e),e.flags|=1),lm()}function Gd(e,t,n=oa+1){for(;n<os.length;n++){const i=os[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;os.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function um(e){if(du.length){const t=[...new Set(du)].sort((n,i)=>ec(n)-ec(i));if(du.length=0,ol){ol.push(...t);return}for(ol=t,iu=0;iu<ol.length;iu++){const n=ol[iu];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ol=null,iu=0}}const ec=e=>e.id==null?e.flags&2?-1:1/0:e.id;function cm(e){try{for(oa=0;oa<os.length;oa++){const t=os[oa];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),uc(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;oa<os.length;oa++){const t=os[oa];t&&(t.flags&=-2)}oa=-1,os.length=0,um(),Zc=null,(os.length||du.length)&&cm()}}let ks=null,hm=null;function Kc(e){const t=ks;return ks=e,hm=e&&e.type.__scopeId||null,t}function Ml(e,t=ks,n){if(!t||e._n)return e;const i=(...o)=>{i._d&&tp(-1);const l=Kc(t);let c;try{c=e(...o)}finally{Kc(l),i._d&&tp(1)}return c};return i._n=!0,i._c=!0,i._d=!0,i}function Rn(e,t){if(ks===null)return e;const n=bh(ks),i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[l,c,p,m=ar]=t[o];l&&(kn(l)&&(l={mounted:l,updated:l}),l.deep&&Da(c),i.push({dir:l,instance:n,value:c,oldValue:void 0,arg:p,modifiers:m}))}return e}function Pl(e,t,n,i){const o=e.dirs,l=t&&t.dirs;for(let c=0;c<o.length;c++){const p=o[c];l&&(p.oldValue=l[c].value);let m=p.dir[i];m&&(ml(),fa(m,n,8,[e.el,p,e,t]),gl())}}const f_=Symbol("_vte"),d_=e=>e.__isTeleport;function vd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,vd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Es(e,t){return kn(e)?Zi({name:e.name},t,{setup:e}):e}function fm(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Jc(e,t,n,i,o=!1){if(fn(e)){e.forEach((M,N)=>Jc(M,t&&(fn(t)?t[N]:t),n,i,o));return}if(Gu(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Jc(e,t,n,i.component.subTree);return}const l=i.shapeFlag&4?bh(i.component):i.el,c=o?null:l,{i:p,r:m}=e,y=t&&t.r,b=p.refs===ar?p.refs={}:p.refs,w=p.setupState,A=Zn(w),C=w===ar?()=>!1:M=>rr(A,M);if(y!=null&&y!==m&&(Kr(y)?(b[y]=null,C(y)&&(w[y]=null)):jr(y)&&(y.value=null)),kn(m))uc(m,p,12,[c,b]);else{const M=Kr(m),N=jr(m);if(M||N){const F=()=>{if(e.f){const j=M?C(m)?w[m]:b[m]:m.value;o?fn(j)&&od(j,l):fn(j)?j.includes(l)||j.push(l):M?(b[m]=[l],C(m)&&(w[m]=b[m])):(m.value=[l],e.k&&(b[e.k]=m.value))}else M?(b[m]=c,C(m)&&(w[m]=c)):N&&(m.value=c,e.k&&(b[e.k]=c))};c?(F.id=-1,Us(F,n)):F()}}}fh().requestIdleCallback;fh().cancelIdleCallback;const Gu=e=>!!e.type.__asyncLoader,dm=e=>e.type.__isKeepAlive;function p_(e,t){pm(e,"a",t)}function m_(e,t){pm(e,"da",t)}function pm(e,t,n=ki){const i=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(gh(t,i,n),n){let o=n.parent;for(;o&&o.parent;)dm(o.parent.vnode)&&g_(i,t,n,o),o=o.parent}}function g_(e,t,n,i){const o=gh(t,e,i,!0);_h(()=>{od(i[t],o)},n)}function gh(e,t,n=ki,i=!1){if(n){const o=n[e]||(n[e]=[]),l=t.__weh||(t.__weh=(...c)=>{ml();const p=cc(n),m=fa(t,n,e,c);return p(),gl(),m});return i?o.unshift(l):o.push(l),l}}const ja=e=>(t,n=ki)=>{(!nc||e==="sp")&&gh(e,(...i)=>t(...i),n)},__=ja("bm"),Ra=ja("m"),v_=ja("bu"),y_=ja("u"),yd=ja("bum"),_h=ja("um"),b_=ja("sp"),w_=ja("rtg"),x_=ja("rtc");function L_(e,t=ki){gh("ec",e,t)}const C_="components";function k_(e,t){return E_(C_,e,!0,t)||e}const P_=Symbol.for("v-ndc");function E_(e,t,n=!0,i=!1){const o=ks||ki;if(o){const l=o.type;{const p=mv(l,!1);if(p&&(p===t||p===mo(t)||p===hh(mo(t))))return l}const c=Hd(o[e]||l[e],t)||Hd(o.appContext[e],t);return!c&&i?l:c}}function Hd(e,t){return e&&(e[t]||e[mo(t)]||e[hh(mo(t))])}function Gn(e,t,n,i){let o;const l=n,c=fn(e);if(c||Kr(e)){const p=c&&hl(e);let m=!1;p&&(m=!ho(e),e=ph(e)),o=new Array(e.length);for(let y=0,b=e.length;y<b;y++)o[y]=t(m?Gi(e[y]):e[y],y,void 0,l)}else if(typeof e=="number"){o=new Array(e);for(let p=0;p<e;p++)o[p]=t(p+1,p,void 0,l)}else if(pr(e))if(e[Symbol.iterator])o=Array.from(e,(p,m)=>t(p,m,void 0,l));else{const p=Object.keys(e);o=new Array(p.length);for(let m=0,y=p.length;m<y;m++){const b=p[m];o[m]=t(e[b],b,m,l)}}else o=[];return o}const kf=e=>e?Om(e)?bh(e):kf(e.parent):null,Hu=Zi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>kf(e.parent),$root:e=>kf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>gm(e),$forceUpdate:e=>e.f||(e.f=()=>{_d(e.update)}),$nextTick:e=>e.n||(e.n=Ul.bind(e.proxy)),$watch:e=>K_.bind(e)}),Kh=(e,t)=>e!==ar&&!e.__isScriptSetup&&rr(e,t),A_={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:o,props:l,accessCache:c,type:p,appContext:m}=e;let y;if(t[0]!=="$"){const C=c[t];if(C!==void 0)switch(C){case 1:return i[t];case 2:return o[t];case 4:return n[t];case 3:return l[t]}else{if(Kh(i,t))return c[t]=1,i[t];if(o!==ar&&rr(o,t))return c[t]=2,o[t];if((y=e.propsOptions[0])&&rr(y,t))return c[t]=3,l[t];if(n!==ar&&rr(n,t))return c[t]=4,n[t];Pf&&(c[t]=0)}}const b=Hu[t];let w,A;if(b)return t==="$attrs"&&Vi(e.attrs,"get",""),b(e);if((w=p.__cssModules)&&(w=w[t]))return w;if(n!==ar&&rr(n,t))return c[t]=4,n[t];if(A=m.config.globalProperties,rr(A,t))return A[t]},set({_:e},t,n){const{data:i,setupState:o,ctx:l}=e;return Kh(o,t)?(o[t]=n,!0):i!==ar&&rr(i,t)?(i[t]=n,!0):rr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:l}},c){let p;return!!n[c]||e!==ar&&rr(e,c)||Kh(t,c)||(p=l[0])&&rr(p,c)||rr(i,c)||rr(Hu,c)||rr(o.config.globalProperties,c)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:rr(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Wd(e){return fn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Pf=!0;function S_(e){const t=gm(e),n=e.proxy,i=e.ctx;Pf=!1,t.beforeCreate&&Zd(t.beforeCreate,e,"bc");const{data:o,computed:l,methods:c,watch:p,provide:m,inject:y,created:b,beforeMount:w,mounted:A,beforeUpdate:C,updated:M,activated:N,deactivated:F,beforeDestroy:j,beforeUnmount:z,destroyed:$,unmounted:pe,render:Ce,renderTracked:Te,renderTriggered:ke,errorCaptured:O,serverPrefetch:oe,expose:we,inheritAttrs:R,components:G,directives:he,filters:W}=t;if(y&&M_(y,i,null),c)for(const se in c){const V=c[se];kn(V)&&(i[se]=V.bind(n))}if(o){const se=o.call(n,n);pr(se)&&(e.data=Fa(se))}if(Pf=!0,l)for(const se in l){const V=l[se],Y=kn(V)?V.bind(n,n):kn(V.get)?V.get.bind(n,n):ua,ue=!kn(V)&&kn(V.set)?V.set.bind(n):ua,We=Tn({get:Y,set:ue});Object.defineProperty(i,se,{enumerable:!0,configurable:!0,get:()=>We.value,set:U=>We.value=U})}if(p)for(const se in p)mm(p[se],i,n,se);if(m){const se=kn(m)?m.call(n):m;Reflect.ownKeys(se).forEach(V=>{Nc(V,se[V])})}b&&Zd(b,e,"c");function X(se,V){fn(V)?V.forEach(Y=>se(Y.bind(n))):V&&se(V.bind(n))}if(X(__,w),X(Ra,A),X(v_,C),X(y_,M),X(p_,N),X(m_,F),X(L_,O),X(x_,Te),X(w_,ke),X(yd,z),X(_h,pe),X(b_,oe),fn(we))if(we.length){const se=e.exposed||(e.exposed={});we.forEach(V=>{Object.defineProperty(se,V,{get:()=>n[V],set:Y=>n[V]=Y})})}else e.exposed||(e.exposed={});Ce&&e.render===ua&&(e.render=Ce),R!=null&&(e.inheritAttrs=R),G&&(e.components=G),he&&(e.directives=he),oe&&fm(e)}function M_(e,t,n=ua){fn(e)&&(e=Ef(e));for(const i in e){const o=e[i];let l;pr(o)?"default"in o?l=fo(o.from||i,o.default,!0):l=fo(o.from||i):l=fo(o),jr(l)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:c=>l.value=c}):t[i]=l}}function Zd(e,t,n){fa(fn(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function mm(e,t,n,i){let o=i.includes(".")?Mm(n,i):()=>n[i];if(Kr(e)){const l=t[e];kn(l)&&$s(o,l)}else if(kn(e))$s(o,e.bind(n));else if(pr(e))if(fn(e))e.forEach(l=>mm(l,t,n,i));else{const l=kn(e.handler)?e.handler.bind(n):t[e.handler];kn(l)&&$s(o,l,e)}}function gm(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:o,optionsCache:l,config:{optionMergeStrategies:c}}=e.appContext,p=l.get(t);let m;return p?m=p:!o.length&&!n&&!i?m=t:(m={},o.length&&o.forEach(y=>Yc(m,y,c,!0)),Yc(m,t,c)),pr(t)&&l.set(t,m),m}function Yc(e,t,n,i=!1){const{mixins:o,extends:l}=t;l&&Yc(e,l,n,!0),o&&o.forEach(c=>Yc(e,c,n,!0));for(const c in t)if(!(i&&c==="expose")){const p=B_[c]||n&&n[c];e[c]=p?p(e[c],t[c]):t[c]}return e}const B_={data:Kd,props:Jd,emits:Jd,methods:zu,computed:zu,beforeCreate:is,created:is,beforeMount:is,mounted:is,beforeUpdate:is,updated:is,beforeDestroy:is,beforeUnmount:is,destroyed:is,unmounted:is,activated:is,deactivated:is,errorCaptured:is,serverPrefetch:is,components:zu,directives:zu,watch:N_,provide:Kd,inject:T_};function Kd(e,t){return t?e?function(){return Zi(kn(e)?e.call(this,this):e,kn(t)?t.call(this,this):t)}:t:e}function T_(e,t){return zu(Ef(e),Ef(t))}function Ef(e){if(fn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function is(e,t){return e?[...new Set([].concat(e,t))]:t}function zu(e,t){return e?Zi(Object.create(null),e,t):t}function Jd(e,t){return e?fn(e)&&fn(t)?[...new Set([...e,...t])]:Zi(Object.create(null),Wd(e),Wd(t??{})):t}function N_(e,t){if(!e)return t;if(!t)return e;const n=Zi(Object.create(null),e);for(const i in t)n[i]=is(e[i],t[i]);return n}function _m(){return{app:null,config:{isNativeTag:w1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let D_=0;function O_(e,t){return function(i,o=null){kn(i)||(i=Zi({},i)),o!=null&&!pr(o)&&(o=null);const l=_m(),c=new WeakSet,p=[];let m=!1;const y=l.app={_uid:D_++,_component:i,_props:o,_container:null,_context:l,_instance:null,version:_v,get config(){return l.config},set config(b){},use(b,...w){return c.has(b)||(b&&kn(b.install)?(c.add(b),b.install(y,...w)):kn(b)&&(c.add(b),b(y,...w))),y},mixin(b){return l.mixins.includes(b)||l.mixins.push(b),y},component(b,w){return w?(l.components[b]=w,y):l.components[b]},directive(b,w){return w?(l.directives[b]=w,y):l.directives[b]},mount(b,w,A){if(!m){const C=y._ceVNode||Tr(i,o);return C.appContext=l,A===!0?A="svg":A===!1&&(A=void 0),e(C,b,A),m=!0,y._container=b,b.__vue_app__=y,bh(C.component)}},onUnmount(b){p.push(b)},unmount(){m&&(fa(p,y._instance,16),e(null,y._container),delete y._container.__vue_app__)},provide(b,w){return l.provides[b]=w,y},runWithContext(b){const w=Il;Il=y;try{return b()}finally{Il=w}}};return y}}let Il=null;function Nc(e,t){if(ki){let n=ki.provides;const i=ki.parent&&ki.parent.provides;i===n&&(n=ki.provides=Object.create(i)),n[e]=t}}function fo(e,t,n=!1){const i=ki||ks;if(i||Il){const o=Il?Il._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&kn(t)?t.call(i&&i.proxy):t}}function I_(){return!!(ki||ks||Il)}const vm={},ym=()=>Object.create(vm),bm=e=>Object.getPrototypeOf(e)===vm;function R_(e,t,n,i=!1){const o={},l=ym();e.propsDefaults=Object.create(null),wm(e,t,o,l);for(const c in e.propsOptions[0])c in o||(o[c]=void 0);n?e.props=i?o:rm(o):e.type.props?e.props=o:e.props=l,e.attrs=l}function F_(e,t,n,i){const{props:o,attrs:l,vnode:{patchFlag:c}}=e,p=Zn(o),[m]=e.propsOptions;let y=!1;if((i||c>0)&&!(c&16)){if(c&8){const b=e.vnode.dynamicProps;for(let w=0;w<b.length;w++){let A=b[w];if(vh(e.emitsOptions,A))continue;const C=t[A];if(m)if(rr(l,A))C!==l[A]&&(l[A]=C,y=!0);else{const M=mo(A);o[M]=Af(m,p,M,C,e,!1)}else C!==l[A]&&(l[A]=C,y=!0)}}}else{wm(e,t,o,l)&&(y=!0);let b;for(const w in p)(!t||!rr(t,w)&&((b=Vl(w))===w||!rr(t,b)))&&(m?n&&(n[w]!==void 0||n[b]!==void 0)&&(o[w]=Af(m,p,w,void 0,e,!0)):delete o[w]);if(l!==p)for(const w in l)(!t||!rr(t,w))&&(delete l[w],y=!0)}y&&Na(e.attrs,"set","")}function wm(e,t,n,i){const[o,l]=e.propsOptions;let c=!1,p;if(t)for(let m in t){if(qu(m))continue;const y=t[m];let b;o&&rr(o,b=mo(m))?!l||!l.includes(b)?n[b]=y:(p||(p={}))[b]=y:vh(e.emitsOptions,m)||(!(m in i)||y!==i[m])&&(i[m]=y,c=!0)}if(l){const m=Zn(n),y=p||ar;for(let b=0;b<l.length;b++){const w=l[b];n[w]=Af(o,m,w,y[w],e,!rr(y,w))}}return c}function Af(e,t,n,i,o,l){const c=e[n];if(c!=null){const p=rr(c,"default");if(p&&i===void 0){const m=c.default;if(c.type!==Function&&!c.skipFactory&&kn(m)){const{propsDefaults:y}=o;if(n in y)i=y[n];else{const b=cc(o);i=y[n]=m.call(null,t),b()}}else i=m;o.ce&&o.ce._setProp(n,i)}c[0]&&(l&&!p?i=!1:c[1]&&(i===""||i===Vl(n))&&(i=!0))}return i}const j_=new WeakMap;function xm(e,t,n=!1){const i=n?j_:t.propsCache,o=i.get(e);if(o)return o;const l=e.props,c={},p=[];let m=!1;if(!kn(e)){const b=w=>{m=!0;const[A,C]=xm(w,t,!0);Zi(c,A),C&&p.push(...C)};!n&&t.mixins.length&&t.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}if(!l&&!m)return pr(e)&&i.set(e,hu),hu;if(fn(l))for(let b=0;b<l.length;b++){const w=mo(l[b]);Yd(w)&&(c[w]=ar)}else if(l)for(const b in l){const w=mo(b);if(Yd(w)){const A=l[b],C=c[w]=fn(A)||kn(A)?{type:A}:Zi({},A),M=C.type;let N=!1,F=!0;if(fn(M))for(let j=0;j<M.length;++j){const z=M[j],$=kn(z)&&z.name;if($==="Boolean"){N=!0;break}else $==="String"&&(F=!1)}else N=kn(M)&&M.name==="Boolean";C[0]=N,C[1]=F,(N||rr(C,"default"))&&p.push(w)}}const y=[c,p];return pr(e)&&i.set(e,y),y}function Yd(e){return e[0]!=="$"&&!qu(e)}const Lm=e=>e[0]==="_"||e==="$stable",bd=e=>fn(e)?e.map(aa):[aa(e)],z_=(e,t,n)=>{if(t._n)return t;const i=Ml((...o)=>bd(t(...o)),n);return i._c=!1,i},Cm=(e,t,n)=>{const i=e._ctx;for(const o in e){if(Lm(o))continue;const l=e[o];if(kn(l))t[o]=z_(o,l,i);else if(l!=null){const c=bd(l);t[o]=()=>c}}},km=(e,t)=>{const n=bd(t);e.slots.default=()=>n},Pm=(e,t,n)=>{for(const i in t)(n||i!=="_")&&(e[i]=t[i])},U_=(e,t,n)=>{const i=e.slots=ym();if(e.vnode.shapeFlag&32){const o=t._;o?(Pm(i,t,n),n&&I0(i,"_",o,!0)):Cm(t,i)}else t&&km(e,t)},q_=(e,t,n)=>{const{vnode:i,slots:o}=e;let l=!0,c=ar;if(i.shapeFlag&32){const p=t._;p?n&&p===1?l=!1:Pm(o,t,n):(l=!t.$stable,Cm(t,o)),c=t}else t&&(km(e,t),c={default:1});if(l)for(const p in o)!Lm(p)&&c[p]==null&&delete o[p]},Us=nv;function $_(e){return V_(e)}function V_(e,t){const n=fh();n.__VUE__=!0;const{insert:i,remove:o,patchProp:l,createElement:c,createText:p,createComment:m,setText:y,setElementText:b,parentNode:w,nextSibling:A,setScopeId:C=ua,insertStaticContent:M}=e,N=(ae,fe,Re,De=null,le=null,Ze=null,lt=void 0,Qe=null,ot=!!fe.dynamicChildren)=>{if(ae===fe)return;ae&&!Nu(ae,fe)&&(De=_e(ae),U(ae,le,Ze,!0),ae=null),fe.patchFlag===-2&&(ot=!1,fe.dynamicChildren=null);const{type:Oe,ref:Le,shapeFlag:rt}=fe;switch(Oe){case yh:F(ae,fe,Re,De);break;case ql:j(ae,fe,Re,De);break;case Dc:ae==null&&z(fe,Re,De,lt);break;case An:G(ae,fe,Re,De,le,Ze,lt,Qe,ot);break;default:rt&1?Ce(ae,fe,Re,De,le,Ze,lt,Qe,ot):rt&6?he(ae,fe,Re,De,le,Ze,lt,Qe,ot):(rt&64||rt&128)&&Oe.process(ae,fe,Re,De,le,Ze,lt,Qe,ot,st)}Le!=null&&le&&Jc(Le,ae&&ae.ref,Ze,fe||ae,!fe)},F=(ae,fe,Re,De)=>{if(ae==null)i(fe.el=p(fe.children),Re,De);else{const le=fe.el=ae.el;fe.children!==ae.children&&y(le,fe.children)}},j=(ae,fe,Re,De)=>{ae==null?i(fe.el=m(fe.children||""),Re,De):fe.el=ae.el},z=(ae,fe,Re,De)=>{[ae.el,ae.anchor]=M(ae.children,fe,Re,De,ae.el,ae.anchor)},$=({el:ae,anchor:fe},Re,De)=>{let le;for(;ae&&ae!==fe;)le=A(ae),i(ae,Re,De),ae=le;i(fe,Re,De)},pe=({el:ae,anchor:fe})=>{let Re;for(;ae&&ae!==fe;)Re=A(ae),o(ae),ae=Re;o(fe)},Ce=(ae,fe,Re,De,le,Ze,lt,Qe,ot)=>{fe.type==="svg"?lt="svg":fe.type==="math"&&(lt="mathml"),ae==null?Te(fe,Re,De,le,Ze,lt,Qe,ot):oe(ae,fe,le,Ze,lt,Qe,ot)},Te=(ae,fe,Re,De,le,Ze,lt,Qe)=>{let ot,Oe;const{props:Le,shapeFlag:rt,transition:vt,dirs:Lt}=ae;if(ot=ae.el=c(ae.type,Ze,Le&&Le.is,Le),rt&8?b(ot,ae.children):rt&16&&O(ae.children,ot,null,De,le,Jh(ae,Ze),lt,Qe),Lt&&Pl(ae,null,De,"created"),ke(ot,ae,ae.scopeId,lt,De),Le){for(const Tt in Le)Tt!=="value"&&!qu(Tt)&&l(ot,Tt,null,Le[Tt],Ze,De);"value"in Le&&l(ot,"value",null,Le.value,Ze),(Oe=Le.onVnodeBeforeMount)&&ra(Oe,De,ae)}Lt&&Pl(ae,null,De,"beforeMount");const Ue=G_(le,vt);Ue&&vt.beforeEnter(ot),i(ot,fe,Re),((Oe=Le&&Le.onVnodeMounted)||Ue||Lt)&&Us(()=>{Oe&&ra(Oe,De,ae),Ue&&vt.enter(ot),Lt&&Pl(ae,null,De,"mounted")},le)},ke=(ae,fe,Re,De,le)=>{if(Re&&C(ae,Re),De)for(let Ze=0;Ze<De.length;Ze++)C(ae,De[Ze]);if(le){let Ze=le.subTree;if(fe===Ze||Tm(Ze.type)&&(Ze.ssContent===fe||Ze.ssFallback===fe)){const lt=le.vnode;ke(ae,lt,lt.scopeId,lt.slotScopeIds,le.parent)}}},O=(ae,fe,Re,De,le,Ze,lt,Qe,ot=0)=>{for(let Oe=ot;Oe<ae.length;Oe++){const Le=ae[Oe]=Qe?al(ae[Oe]):aa(ae[Oe]);N(null,Le,fe,Re,De,le,Ze,lt,Qe)}},oe=(ae,fe,Re,De,le,Ze,lt)=>{const Qe=fe.el=ae.el;let{patchFlag:ot,dynamicChildren:Oe,dirs:Le}=fe;ot|=ae.patchFlag&16;const rt=ae.props||ar,vt=fe.props||ar;let Lt;if(Re&&El(Re,!1),(Lt=vt.onVnodeBeforeUpdate)&&ra(Lt,Re,fe,ae),Le&&Pl(fe,ae,Re,"beforeUpdate"),Re&&El(Re,!0),(rt.innerHTML&&vt.innerHTML==null||rt.textContent&&vt.textContent==null)&&b(Qe,""),Oe?we(ae.dynamicChildren,Oe,Qe,Re,De,Jh(fe,le),Ze):lt||V(ae,fe,Qe,null,Re,De,Jh(fe,le),Ze,!1),ot>0){if(ot&16)R(Qe,rt,vt,Re,le);else if(ot&2&&rt.class!==vt.class&&l(Qe,"class",null,vt.class,le),ot&4&&l(Qe,"style",rt.style,vt.style,le),ot&8){const Ue=fe.dynamicProps;for(let Tt=0;Tt<Ue.length;Tt++){const Mt=Ue[Tt],jt=rt[Mt],Vt=vt[Mt];(Vt!==jt||Mt==="value")&&l(Qe,Mt,jt,Vt,le,Re)}}ot&1&&ae.children!==fe.children&&b(Qe,fe.children)}else!lt&&Oe==null&&R(Qe,rt,vt,Re,le);((Lt=vt.onVnodeUpdated)||Le)&&Us(()=>{Lt&&ra(Lt,Re,fe,ae),Le&&Pl(fe,ae,Re,"updated")},De)},we=(ae,fe,Re,De,le,Ze,lt)=>{for(let Qe=0;Qe<fe.length;Qe++){const ot=ae[Qe],Oe=fe[Qe],Le=ot.el&&(ot.type===An||!Nu(ot,Oe)||ot.shapeFlag&70)?w(ot.el):Re;N(ot,Oe,Le,null,De,le,Ze,lt,!0)}},R=(ae,fe,Re,De,le)=>{if(fe!==Re){if(fe!==ar)for(const Ze in fe)!qu(Ze)&&!(Ze in Re)&&l(ae,Ze,fe[Ze],null,le,De);for(const Ze in Re){if(qu(Ze))continue;const lt=Re[Ze],Qe=fe[Ze];lt!==Qe&&Ze!=="value"&&l(ae,Ze,Qe,lt,le,De)}"value"in Re&&l(ae,"value",fe.value,Re.value,le)}},G=(ae,fe,Re,De,le,Ze,lt,Qe,ot)=>{const Oe=fe.el=ae?ae.el:p(""),Le=fe.anchor=ae?ae.anchor:p("");let{patchFlag:rt,dynamicChildren:vt,slotScopeIds:Lt}=fe;Lt&&(Qe=Qe?Qe.concat(Lt):Lt),ae==null?(i(Oe,Re,De),i(Le,Re,De),O(fe.children||[],Re,Le,le,Ze,lt,Qe,ot)):rt>0&&rt&64&&vt&&ae.dynamicChildren?(we(ae.dynamicChildren,vt,Re,le,Ze,lt,Qe),(fe.key!=null||le&&fe===le.subTree)&&Em(ae,fe,!0)):V(ae,fe,Re,Le,le,Ze,lt,Qe,ot)},he=(ae,fe,Re,De,le,Ze,lt,Qe,ot)=>{fe.slotScopeIds=Qe,ae==null?fe.shapeFlag&512?le.ctx.activate(fe,Re,De,lt,ot):W(fe,Re,De,le,Ze,lt,ot):ne(ae,fe,ot)},W=(ae,fe,Re,De,le,Ze,lt)=>{const Qe=ae.component=cv(ae,De,le);if(dm(ae)&&(Qe.ctx.renderer=st),hv(Qe,!1,lt),Qe.asyncDep){if(le&&le.registerDep(Qe,X,lt),!ae.el){const ot=Qe.subTree=Tr(ql);j(null,ot,fe,Re)}}else X(Qe,ae,fe,Re,le,Ze,lt)},ne=(ae,fe,Re)=>{const De=fe.component=ae.component;if(ev(ae,fe,Re))if(De.asyncDep&&!De.asyncResolved){se(De,fe,Re);return}else De.next=fe,De.update();else fe.el=ae.el,De.vnode=fe},X=(ae,fe,Re,De,le,Ze,lt)=>{const Qe=()=>{if(ae.isMounted){let{next:rt,bu:vt,u:Lt,parent:Ue,vnode:Tt}=ae;{const Pn=Am(ae);if(Pn){rt&&(rt.el=Tt.el,se(ae,rt,lt)),Pn.asyncDep.then(()=>{ae.isUnmounted||Qe()});return}}let Mt=rt,jt;El(ae,!1),rt?(rt.el=Tt.el,se(ae,rt,lt)):rt=Tt,vt&&Tc(vt),(jt=rt.props&&rt.props.onVnodeBeforeUpdate)&&ra(jt,Ue,rt,Tt),El(ae,!0);const Vt=Qd(ae),Dt=ae.subTree;ae.subTree=Vt,N(Dt,Vt,w(Dt.el),_e(Dt),ae,le,Ze),rt.el=Vt.el,Mt===null&&tv(ae,Vt.el),Lt&&Us(Lt,le),(jt=rt.props&&rt.props.onVnodeUpdated)&&Us(()=>ra(jt,Ue,rt,Tt),le)}else{let rt;const{el:vt,props:Lt}=fe,{bm:Ue,m:Tt,parent:Mt,root:jt,type:Vt}=ae,Dt=Gu(fe);El(ae,!1),Ue&&Tc(Ue),!Dt&&(rt=Lt&&Lt.onVnodeBeforeMount)&&ra(rt,Mt,fe),El(ae,!0);{jt.ce&&jt.ce._injectChildStyle(Vt);const Pn=ae.subTree=Qd(ae);N(null,Pn,Re,De,ae,le,Ze),fe.el=Pn.el}if(Tt&&Us(Tt,le),!Dt&&(rt=Lt&&Lt.onVnodeMounted)){const Pn=fe;Us(()=>ra(rt,Mt,Pn),le)}(fe.shapeFlag&256||Mt&&Gu(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&ae.a&&Us(ae.a,le),ae.isMounted=!0,fe=Re=De=null}};ae.scope.on();const ot=ae.effect=new $0(Qe);ae.scope.off();const Oe=ae.update=ot.run.bind(ot),Le=ae.job=ot.runIfDirty.bind(ot);Le.i=ae,Le.id=ae.uid,ot.scheduler=()=>_d(Le),El(ae,!0),Oe()},se=(ae,fe,Re)=>{fe.component=ae;const De=ae.vnode.props;ae.vnode=fe,ae.next=null,F_(ae,fe.props,De,Re),q_(ae,fe.children,Re),ml(),Gd(ae),gl()},V=(ae,fe,Re,De,le,Ze,lt,Qe,ot=!1)=>{const Oe=ae&&ae.children,Le=ae?ae.shapeFlag:0,rt=fe.children,{patchFlag:vt,shapeFlag:Lt}=fe;if(vt>0){if(vt&128){ue(Oe,rt,Re,De,le,Ze,lt,Qe,ot);return}else if(vt&256){Y(Oe,rt,Re,De,le,Ze,lt,Qe,ot);return}}Lt&8?(Le&16&&Ae(Oe,le,Ze),rt!==Oe&&b(Re,rt)):Le&16?Lt&16?ue(Oe,rt,Re,De,le,Ze,lt,Qe,ot):Ae(Oe,le,Ze,!0):(Le&8&&b(Re,""),Lt&16&&O(rt,Re,De,le,Ze,lt,Qe,ot))},Y=(ae,fe,Re,De,le,Ze,lt,Qe,ot)=>{ae=ae||hu,fe=fe||hu;const Oe=ae.length,Le=fe.length,rt=Math.min(Oe,Le);let vt;for(vt=0;vt<rt;vt++){const Lt=fe[vt]=ot?al(fe[vt]):aa(fe[vt]);N(ae[vt],Lt,Re,null,le,Ze,lt,Qe,ot)}Oe>Le?Ae(ae,le,Ze,!0,!1,rt):O(fe,Re,De,le,Ze,lt,Qe,ot,rt)},ue=(ae,fe,Re,De,le,Ze,lt,Qe,ot)=>{let Oe=0;const Le=fe.length;let rt=ae.length-1,vt=Le-1;for(;Oe<=rt&&Oe<=vt;){const Lt=ae[Oe],Ue=fe[Oe]=ot?al(fe[Oe]):aa(fe[Oe]);if(Nu(Lt,Ue))N(Lt,Ue,Re,null,le,Ze,lt,Qe,ot);else break;Oe++}for(;Oe<=rt&&Oe<=vt;){const Lt=ae[rt],Ue=fe[vt]=ot?al(fe[vt]):aa(fe[vt]);if(Nu(Lt,Ue))N(Lt,Ue,Re,null,le,Ze,lt,Qe,ot);else break;rt--,vt--}if(Oe>rt){if(Oe<=vt){const Lt=vt+1,Ue=Lt<Le?fe[Lt].el:De;for(;Oe<=vt;)N(null,fe[Oe]=ot?al(fe[Oe]):aa(fe[Oe]),Re,Ue,le,Ze,lt,Qe,ot),Oe++}}else if(Oe>vt)for(;Oe<=rt;)U(ae[Oe],le,Ze,!0),Oe++;else{const Lt=Oe,Ue=Oe,Tt=new Map;for(Oe=Ue;Oe<=vt;Oe++){const ln=fe[Oe]=ot?al(fe[Oe]):aa(fe[Oe]);ln.key!=null&&Tt.set(ln.key,Oe)}let Mt,jt=0;const Vt=vt-Ue+1;let Dt=!1,Pn=0;const tn=new Array(Vt);for(Oe=0;Oe<Vt;Oe++)tn[Oe]=0;for(Oe=Lt;Oe<=rt;Oe++){const ln=ae[Oe];if(jt>=Vt){U(ln,le,Ze,!0);continue}let xn;if(ln.key!=null)xn=Tt.get(ln.key);else for(Mt=Ue;Mt<=vt;Mt++)if(tn[Mt-Ue]===0&&Nu(ln,fe[Mt])){xn=Mt;break}xn===void 0?U(ln,le,Ze,!0):(tn[xn-Ue]=Oe+1,xn>=Pn?Pn=xn:Dt=!0,N(ln,fe[xn],Re,null,le,Ze,lt,Qe,ot),jt++)}const Kn=Dt?H_(tn):hu;for(Mt=Kn.length-1,Oe=Vt-1;Oe>=0;Oe--){const ln=Ue+Oe,xn=fe[ln],Jn=ln+1<Le?fe[ln+1].el:De;tn[Oe]===0?N(null,xn,Re,Jn,le,Ze,lt,Qe,ot):Dt&&(Mt<0||Oe!==Kn[Mt]?We(xn,Re,Jn,2):Mt--)}}},We=(ae,fe,Re,De,le=null)=>{const{el:Ze,type:lt,transition:Qe,children:ot,shapeFlag:Oe}=ae;if(Oe&6){We(ae.component.subTree,fe,Re,De);return}if(Oe&128){ae.suspense.move(fe,Re,De);return}if(Oe&64){lt.move(ae,fe,Re,st);return}if(lt===An){i(Ze,fe,Re);for(let rt=0;rt<ot.length;rt++)We(ot[rt],fe,Re,De);i(ae.anchor,fe,Re);return}if(lt===Dc){$(ae,fe,Re);return}if(De!==2&&Oe&1&&Qe)if(De===0)Qe.beforeEnter(Ze),i(Ze,fe,Re),Us(()=>Qe.enter(Ze),le);else{const{leave:rt,delayLeave:vt,afterLeave:Lt}=Qe,Ue=()=>i(Ze,fe,Re),Tt=()=>{rt(Ze,()=>{Ue(),Lt&&Lt()})};vt?vt(Ze,Ue,Tt):Tt()}else i(Ze,fe,Re)},U=(ae,fe,Re,De=!1,le=!1)=>{const{type:Ze,props:lt,ref:Qe,children:ot,dynamicChildren:Oe,shapeFlag:Le,patchFlag:rt,dirs:vt,cacheIndex:Lt}=ae;if(rt===-2&&(le=!1),Qe!=null&&Jc(Qe,null,Re,ae,!0),Lt!=null&&(fe.renderCache[Lt]=void 0),Le&256){fe.ctx.deactivate(ae);return}const Ue=Le&1&&vt,Tt=!Gu(ae);let Mt;if(Tt&&(Mt=lt&&lt.onVnodeBeforeUnmount)&&ra(Mt,fe,ae),Le&6)xe(ae.component,Re,De);else{if(Le&128){ae.suspense.unmount(Re,De);return}Ue&&Pl(ae,null,fe,"beforeUnmount"),Le&64?ae.type.remove(ae,fe,Re,st,De):Oe&&!Oe.hasOnce&&(Ze!==An||rt>0&&rt&64)?Ae(Oe,fe,Re,!1,!0):(Ze===An&&rt&384||!le&&Le&16)&&Ae(ot,fe,Re),De&&ee(ae)}(Tt&&(Mt=lt&&lt.onVnodeUnmounted)||Ue)&&Us(()=>{Mt&&ra(Mt,fe,ae),Ue&&Pl(ae,null,fe,"unmounted")},Re)},ee=ae=>{const{type:fe,el:Re,anchor:De,transition:le}=ae;if(fe===An){de(Re,De);return}if(fe===Dc){pe(ae);return}const Ze=()=>{o(Re),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(ae.shapeFlag&1&&le&&!le.persisted){const{leave:lt,delayLeave:Qe}=le,ot=()=>lt(Re,Ze);Qe?Qe(ae.el,Ze,ot):ot()}else Ze()},de=(ae,fe)=>{let Re;for(;ae!==fe;)Re=A(ae),o(ae),ae=Re;o(fe)},xe=(ae,fe,Re)=>{const{bum:De,scope:le,job:Ze,subTree:lt,um:Qe,m:ot,a:Oe}=ae;Xd(ot),Xd(Oe),De&&Tc(De),le.stop(),Ze&&(Ze.flags|=8,U(lt,ae,fe,Re)),Qe&&Us(Qe,fe),Us(()=>{ae.isUnmounted=!0},fe),fe&&fe.pendingBranch&&!fe.isUnmounted&&ae.asyncDep&&!ae.asyncResolved&&ae.suspenseId===fe.pendingId&&(fe.deps--,fe.deps===0&&fe.resolve())},Ae=(ae,fe,Re,De=!1,le=!1,Ze=0)=>{for(let lt=Ze;lt<ae.length;lt++)U(ae[lt],fe,Re,De,le)},_e=ae=>{if(ae.shapeFlag&6)return _e(ae.component.subTree);if(ae.shapeFlag&128)return ae.suspense.next();const fe=A(ae.anchor||ae.el),Re=fe&&fe[f_];return Re?A(Re):fe};let Ie=!1;const Ne=(ae,fe,Re)=>{ae==null?fe._vnode&&U(fe._vnode,null,null,!0):N(fe._vnode||null,ae,fe,null,null,null,Re),fe._vnode=ae,Ie||(Ie=!0,Gd(),um(),Ie=!1)},st={p:N,um:U,m:We,r:ee,mt:W,mc:O,pc:V,pbc:we,n:_e,o:e};return{render:Ne,hydrate:void 0,createApp:O_(Ne)}}function Jh({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function El({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function G_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Em(e,t,n=!1){const i=e.children,o=t.children;if(fn(i)&&fn(o))for(let l=0;l<i.length;l++){const c=i[l];let p=o[l];p.shapeFlag&1&&!p.dynamicChildren&&((p.patchFlag<=0||p.patchFlag===32)&&(p=o[l]=al(o[l]),p.el=c.el),!n&&p.patchFlag!==-2&&Em(c,p)),p.type===yh&&(p.el=c.el)}}function H_(e){const t=e.slice(),n=[0];let i,o,l,c,p;const m=e.length;for(i=0;i<m;i++){const y=e[i];if(y!==0){if(o=n[n.length-1],e[o]<y){t[i]=o,n.push(i);continue}for(l=0,c=n.length-1;l<c;)p=l+c>>1,e[n[p]]<y?l=p+1:c=p;y<e[n[l]]&&(l>0&&(t[i]=n[l-1]),n[l]=i)}}for(l=n.length,c=n[l-1];l-- >0;)n[l]=c,c=t[c];return n}function Am(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Am(t)}function Xd(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const W_=Symbol.for("v-scx"),Z_=()=>fo(W_);function $s(e,t,n){return Sm(e,t,n)}function Sm(e,t,n=ar){const{immediate:i,deep:o,flush:l,once:c}=n,p=Zi({},n),m=t&&i||!t&&l!=="post";let y;if(nc){if(l==="sync"){const C=Z_();y=C.__watcherHandles||(C.__watcherHandles=[])}else if(!m){const C=()=>{};return C.stop=ua,C.resume=ua,C.pause=ua,C}}const b=ki;p.call=(C,M,N)=>fa(C,b,M,N);let w=!1;l==="post"?p.scheduler=C=>{Us(C,b&&b.suspense)}:l!=="sync"&&(w=!0,p.scheduler=(C,M)=>{M?C():_d(C)}),p.augmentJob=C=>{t&&(C.flags|=4),w&&(C.flags|=2,b&&(C.id=b.uid,C.i=b))};const A=l_(e,t,p);return nc&&(y?y.push(A):m&&A()),A}function K_(e,t,n){const i=this.proxy,o=Kr(e)?e.includes(".")?Mm(i,e):()=>i[e]:e.bind(i,i);let l;kn(t)?l=t:(l=t.handler,n=t);const c=cc(this),p=Sm(o,l.bind(i),n);return c(),p}function Mm(e,t){const n=t.split(".");return()=>{let i=e;for(let o=0;o<n.length&&i;o++)i=i[n[o]];return i}}const J_=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${mo(t)}Modifiers`]||e[`${Vl(t)}Modifiers`];function Y_(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||ar;let o=n;const l=t.startsWith("update:"),c=l&&J_(i,t.slice(7));c&&(c.trim&&(o=n.map(b=>Kr(b)?b.trim():b)),c.number&&(o=n.map(Gc)));let p,m=i[p=Vh(t)]||i[p=Vh(mo(t))];!m&&l&&(m=i[p=Vh(Vl(t))]),m&&fa(m,e,6,o);const y=i[p+"Once"];if(y){if(!e.emitted)e.emitted={};else if(e.emitted[p])return;e.emitted[p]=!0,fa(y,e,6,o)}}function Bm(e,t,n=!1){const i=t.emitsCache,o=i.get(e);if(o!==void 0)return o;const l=e.emits;let c={},p=!1;if(!kn(e)){const m=y=>{const b=Bm(y,t,!0);b&&(p=!0,Zi(c,b))};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}return!l&&!p?(pr(e)&&i.set(e,null),null):(fn(l)?l.forEach(m=>c[m]=null):Zi(c,l),pr(e)&&i.set(e,c),c)}function vh(e,t){return!e||!uh(t)?!1:(t=t.slice(2).replace(/Once$/,""),rr(e,t[0].toLowerCase()+t.slice(1))||rr(e,Vl(t))||rr(e,t))}function Qd(e){const{type:t,vnode:n,proxy:i,withProxy:o,propsOptions:[l],slots:c,attrs:p,emit:m,render:y,renderCache:b,props:w,data:A,setupState:C,ctx:M,inheritAttrs:N}=e,F=Kc(e);let j,z;try{if(n.shapeFlag&4){const pe=o||i,Ce=pe;j=aa(y.call(Ce,pe,b,w,C,A,M)),z=p}else{const pe=t;j=aa(pe.length>1?pe(w,{attrs:p,slots:c,emit:m}):pe(w,null)),z=t.props?p:X_(p)}}catch(pe){Wu.length=0,mh(pe,e,1),j=Tr(ql)}let $=j;if(z&&N!==!1){const pe=Object.keys(z),{shapeFlag:Ce}=$;pe.length&&Ce&7&&(l&&pe.some(sd)&&(z=Q_(z,l)),$=vu($,z,!1,!0))}return n.dirs&&($=vu($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&vd($,n.transition),j=$,Kc(F),j}const X_=e=>{let t;for(const n in e)(n==="class"||n==="style"||uh(n))&&((t||(t={}))[n]=e[n]);return t},Q_=(e,t)=>{const n={};for(const i in e)(!sd(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function ev(e,t,n){const{props:i,children:o,component:l}=e,{props:c,children:p,patchFlag:m}=t,y=l.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return i?ep(i,c,y):!!c;if(m&8){const b=t.dynamicProps;for(let w=0;w<b.length;w++){const A=b[w];if(c[A]!==i[A]&&!vh(y,A))return!0}}}else return(o||p)&&(!p||!p.$stable)?!0:i===c?!1:i?c?ep(i,c,y):!0:!!c;return!1}function ep(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let o=0;o<i.length;o++){const l=i[o];if(t[l]!==e[l]&&!vh(n,l))return!0}return!1}function tv({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const Tm=e=>e.__isSuspense;function nv(e,t){t&&t.pendingBranch?fn(e)?t.effects.push(...e):t.effects.push(e):h_(e)}const An=Symbol.for("v-fgt"),yh=Symbol.for("v-txt"),ql=Symbol.for("v-cmt"),Dc=Symbol.for("v-stc"),Wu=[];let Vs=null;function ht(e=!1){Wu.push(Vs=e?null:[])}function rv(){Wu.pop(),Vs=Wu[Wu.length-1]||null}let tc=1;function tp(e,t=!1){tc+=e,e<0&&Vs&&t&&(Vs.hasOnce=!0)}function Nm(e){return e.dynamicChildren=tc>0?Vs||hu:null,rv(),tc>0&&Vs&&Vs.push(e),e}function mt(e,t,n,i,o,l){return Nm(I(e,t,n,i,o,l,!0))}function Ia(e,t,n,i,o){return Nm(Tr(e,t,n,i,o,!0))}function Xc(e){return e?e.__v_isVNode===!0:!1}function Nu(e,t){return e.type===t.type&&e.key===t.key}const Dm=({key:e})=>e??null,Oc=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Kr(e)||jr(e)||kn(e)?{i:ks,r:e,k:t,f:!!n}:e:null);function I(e,t=null,n=null,i=0,o=null,l=e===An?0:1,c=!1,p=!1){const m={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Dm(t),ref:t&&Oc(t),scopeId:hm,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ks};return p?(wd(m,n),l&128&&e.normalize(m)):n&&(m.shapeFlag|=Kr(n)?8:16),tc>0&&!c&&Vs&&(m.patchFlag>0||l&6)&&m.patchFlag!==32&&Vs.push(m),m}const Tr=iv;function iv(e,t=null,n=null,i=0,o=null,l=!1){if((!e||e===P_)&&(e=ql),Xc(e)){const p=vu(e,t,!0);return n&&wd(p,n),tc>0&&!l&&Vs&&(p.shapeFlag&6?Vs[Vs.indexOf(e)]=p:Vs.push(p)),p.patchFlag=-2,p}if(gv(e)&&(e=e.__vccOpts),t){t=sv(t);let{class:p,style:m}=t;p&&!Kr(p)&&(t.class=as(p)),pr(m)&&(md(m)&&!fn(m)&&(m=Zi({},m)),t.style=dh(m))}const c=Kr(e)?1:Tm(e)?128:d_(e)?64:pr(e)?4:kn(e)?2:0;return I(e,t,n,i,o,c,l,!0)}function sv(e){return e?md(e)||bm(e)?Zi({},e):e:null}function vu(e,t,n=!1,i=!1){const{props:o,ref:l,patchFlag:c,children:p,transition:m}=e,y=t?av(o||{},t):o,b={__v_isVNode:!0,__v_skip:!0,type:e.type,props:y,key:y&&Dm(y),ref:t&&t.ref?n&&l?fn(l)?l.concat(Oc(t)):[l,Oc(t)]:Oc(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:p,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==An?c===-1?16:c|16:c,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:m,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vu(e.ssContent),ssFallback:e.ssFallback&&vu(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return m&&i&&vd(b,m.clone(b)),b}function yr(e=" ",t=0){return Tr(yh,null,e,t)}function ov(e,t){const n=Tr(Dc,null,e);return n.staticCount=t,n}function un(e="",t=!1){return t?(ht(),Ia(ql,null,e)):Tr(ql,null,e)}function aa(e){return e==null||typeof e=="boolean"?Tr(ql):fn(e)?Tr(An,null,e.slice()):Xc(e)?al(e):Tr(yh,null,String(e))}function al(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vu(e)}function wd(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(fn(t))n=16;else if(typeof t=="object")if(i&65){const o=t.default;o&&(o._c&&(o._d=!1),wd(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!bm(t)?t._ctx=ks:o===3&&ks&&(ks.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else kn(t)?(t={default:t,_ctx:ks},n=32):(t=String(t),i&64?(n=16,t=[yr(t)]):n=8);e.children=t,e.shapeFlag|=n}function av(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const o in i)if(o==="class")t.class!==i.class&&(t.class=as([t.class,i.class]));else if(o==="style")t.style=dh([t.style,i.style]);else if(uh(o)){const l=t[o],c=i[o];c&&l!==c&&!(fn(l)&&l.includes(c))&&(t[o]=l?[].concat(l,c):c)}else o!==""&&(t[o]=i[o])}return t}function ra(e,t,n,i=null){fa(e,t,7,[n,i])}const lv=_m();let uv=0;function cv(e,t,n){const i=e.type,o=(t?t.appContext:e.appContext)||lv,l={uid:uv++,vnode:e,type:i,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new z0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xm(i,o),emitsOptions:Bm(i,o),emit:null,emitted:null,propsDefaults:ar,inheritAttrs:i.inheritAttrs,ctx:ar,data:ar,props:ar,attrs:ar,slots:ar,refs:ar,setupState:ar,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=Y_.bind(null,l),e.ce&&e.ce(l),l}let ki=null,Qc,Sf;{const e=fh(),t=(n,i)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(i),l=>{o.length>1?o.forEach(c=>c(l)):o[0](l)}};Qc=t("__VUE_INSTANCE_SETTERS__",n=>ki=n),Sf=t("__VUE_SSR_SETTERS__",n=>nc=n)}const cc=e=>{const t=ki;return Qc(e),e.scope.on(),()=>{e.scope.off(),Qc(t)}},np=()=>{ki&&ki.scope.off(),Qc(null)};function Om(e){return e.vnode.shapeFlag&4}let nc=!1;function hv(e,t=!1,n=!1){t&&Sf(t);const{props:i,children:o}=e.vnode,l=Om(e);R_(e,i,l,t),U_(e,o,n);const c=l?fv(e,t):void 0;return t&&Sf(!1),c}function fv(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,A_);const{setup:i}=n;if(i){ml();const o=e.setupContext=i.length>1?pv(e):null,l=cc(e),c=uc(i,e,0,[e.props,o]),p=N0(c);if(gl(),l(),(p||e.sp)&&!Gu(e)&&fm(e),p){if(c.then(np,np),t)return c.then(m=>{rp(e,m)}).catch(m=>{mh(m,e,0)});e.asyncDep=c}else rp(e,c)}else Im(e)}function rp(e,t,n){kn(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:pr(t)&&(e.setupState=om(t)),Im(e)}function Im(e,t,n){const i=e.type;e.render||(e.render=i.render||ua);{const o=cc(e);ml();try{S_(e)}finally{gl(),o()}}}const dv={get(e,t){return Vi(e,"get",""),e[t]}};function pv(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,dv),slots:e.slots,emit:e.emit,expose:t}}function bh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(om(gd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Hu)return Hu[n](e)},has(t,n){return n in t||n in Hu}})):e.proxy}function mv(e,t=!0){return kn(e)?e.displayName||e.name:e.name||t&&e.__name}function gv(e){return kn(e)&&"__vccOpts"in e}const Tn=(e,t)=>o_(e,t,nc);function Rm(e,t,n){const i=arguments.length;return i===2?pr(t)&&!fn(t)?Xc(t)?Tr(e,null,[t]):Tr(e,t):Tr(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Xc(n)&&(n=[n]),Tr(e,t,n))}const _v="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mf;const ip=typeof window<"u"&&window.trustedTypes;if(ip)try{Mf=ip.createPolicy("vue",{createHTML:e=>e})}catch{}const Fm=Mf?e=>Mf.createHTML(e):e=>e,vv="http://www.w3.org/2000/svg",yv="http://www.w3.org/1998/Math/MathML",Ta=typeof document<"u"?document:null,sp=Ta&&Ta.createElement("template"),bv={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const o=t==="svg"?Ta.createElementNS(vv,e):t==="mathml"?Ta.createElementNS(yv,e):n?Ta.createElement(e,{is:n}):Ta.createElement(e);return e==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:e=>Ta.createTextNode(e),createComment:e=>Ta.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ta.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,o,l){const c=n?n.previousSibling:t.lastChild;if(o&&(o===l||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===l||!(o=o.nextSibling)););else{sp.innerHTML=Fm(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const p=sp.content;if(i==="svg"||i==="mathml"){const m=p.firstChild;for(;m.firstChild;)p.appendChild(m.firstChild);p.removeChild(m)}t.insertBefore(p,n)}return[c?c.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},wv=Symbol("_vtc");function xv(e,t,n){const i=e[wv];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const eh=Symbol("_vod"),jm=Symbol("_vsh"),Lv={beforeMount(e,{value:t},{transition:n}){e[eh]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Du(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Du(e,!0),i.enter(e)):i.leave(e,()=>{Du(e,!1)}):Du(e,t))},beforeUnmount(e,{value:t}){Du(e,t)}};function Du(e,t){e.style.display=t?e[eh]:"none",e[jm]=!t}const Cv=Symbol(""),kv=/(^|;)\s*display\s*:/;function Pv(e,t,n){const i=e.style,o=Kr(n);let l=!1;if(n&&!o){if(t)if(Kr(t))for(const c of t.split(";")){const p=c.slice(0,c.indexOf(":")).trim();n[p]==null&&Ic(i,p,"")}else for(const c in t)n[c]==null&&Ic(i,c,"");for(const c in n)c==="display"&&(l=!0),Ic(i,c,n[c])}else if(o){if(t!==n){const c=i[Cv];c&&(n+=";"+c),i.cssText=n,l=kv.test(n)}}else t&&e.removeAttribute("style");eh in e&&(e[eh]=l?i.display:"",e[jm]&&(i.display="none"))}const op=/\s*!important$/;function Ic(e,t,n){if(fn(n))n.forEach(i=>Ic(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=Ev(e,t);op.test(n)?e.setProperty(Vl(i),n.replace(op,""),"important"):e[i]=n}}const ap=["Webkit","Moz","ms"],Yh={};function Ev(e,t){const n=Yh[t];if(n)return n;let i=mo(t);if(i!=="filter"&&i in e)return Yh[t]=i;i=hh(i);for(let o=0;o<ap.length;o++){const l=ap[o]+i;if(l in e)return Yh[t]=l}return t}const lp="http://www.w3.org/1999/xlink";function up(e,t,n,i,o,l=B1(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(lp,t.slice(6,t.length)):e.setAttributeNS(lp,t,n):n==null||l&&!R0(n)?e.removeAttribute(t):e.setAttribute(t,l?"":ha(n)?String(n):n)}function cp(e,t,n,i,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Fm(n):n);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const p=l==="OPTION"?e.getAttribute("value")||"":e.value,m=n==null?e.type==="checkbox"?"on":"":String(n);(p!==m||!("_value"in e))&&(e.value=m),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const p=typeof e[t];p==="boolean"?n=R0(n):n==null&&p==="string"?(n="",c=!0):p==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(o||t)}function Oa(e,t,n,i){e.addEventListener(t,n,i)}function Av(e,t,n,i){e.removeEventListener(t,n,i)}const hp=Symbol("_vei");function Sv(e,t,n,i,o=null){const l=e[hp]||(e[hp]={}),c=l[t];if(i&&c)c.value=i;else{const[p,m]=Mv(t);if(i){const y=l[t]=Nv(i,o);Oa(e,p,y,m)}else c&&(Av(e,p,c,m),l[t]=void 0)}}const fp=/(?:Once|Passive|Capture)$/;function Mv(e){let t;if(fp.test(e)){t={};let i;for(;i=e.match(fp);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Vl(e.slice(2)),t]}let Xh=0;const Bv=Promise.resolve(),Tv=()=>Xh||(Bv.then(()=>Xh=0),Xh=Date.now());function Nv(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;fa(Dv(i,n.value),t,5,[i])};return n.value=e,n.attached=Tv(),n}function Dv(e,t){if(fn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>o=>!o._stopped&&i&&i(o))}else return t}const dp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ov=(e,t,n,i,o,l)=>{const c=o==="svg";t==="class"?xv(e,i,c):t==="style"?Pv(e,n,i):uh(t)?sd(t)||Sv(e,t,n,i,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Iv(e,t,i,c))?(cp(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&up(e,t,i,c,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Kr(i))?cp(e,mo(t),i,l,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),up(e,t,i,c))};function Iv(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&dp(t)&&kn(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return dp(t)&&Kr(n)?!1:t in e}const fl=e=>{const t=e.props["onUpdate:modelValue"]||!1;return fn(t)?n=>Tc(t,n):t};function Rv(e){e.target.composing=!0}function pp(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const po=Symbol("_assign"),Sr={created(e,{modifiers:{lazy:t,trim:n,number:i}},o){e[po]=fl(o);const l=i||o.props&&o.props.type==="number";Oa(e,t?"change":"input",c=>{if(c.target.composing)return;let p=e.value;n&&(p=p.trim()),l&&(p=Gc(p)),e[po](p)}),n&&Oa(e,"change",()=>{e.value=e.value.trim()}),t||(Oa(e,"compositionstart",Rv),Oa(e,"compositionend",pp),Oa(e,"change",pp))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:o,number:l}},c){if(e[po]=fl(c),e.composing)return;const p=(l||e.type==="number")&&!/^0\d/.test(e.value)?Gc(e.value):e.value,m=t??"";p!==m&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||o&&e.value.trim()===m)||(e.value=m))}},zm={deep:!0,created(e,t,n){e[po]=fl(n),Oa(e,"change",()=>{const i=e._modelValue,o=yu(e),l=e.checked,c=e[po];if(fn(i)){const p=ld(i,o),m=p!==-1;if(l&&!m)c(i.concat(o));else if(!l&&m){const y=[...i];y.splice(p,1),c(y)}}else if(xu(i)){const p=new Set(i);l?p.add(o):p.delete(o),c(p)}else c(Um(e,l))})},mounted:mp,beforeUpdate(e,t,n){e[po]=fl(n),mp(e,t,n)}};function mp(e,{value:t,oldValue:n},i){e._modelValue=t;let o;if(fn(t))o=ld(t,i.props.value)>-1;else if(xu(t))o=t.has(i.props.value);else{if(t===n)return;o=jl(t,Um(e,!0))}e.checked!==o&&(e.checked=o)}const Fv={created(e,{value:t},n){e.checked=jl(t,n.props.value),e[po]=fl(n),Oa(e,"change",()=>{e[po](yu(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e[po]=fl(i),t!==n&&(e.checked=jl(t,i.props.value))}},qs={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const o=xu(t);Oa(e,"change",()=>{const l=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>n?Gc(yu(c)):yu(c));e[po](e.multiple?o?new Set(l):l:l[0]),e._assigning=!0,Ul(()=>{e._assigning=!1})}),e[po]=fl(i)},mounted(e,{value:t}){gp(e,t)},beforeUpdate(e,t,n){e[po]=fl(n)},updated(e,{value:t}){e._assigning||gp(e,t)}};function gp(e,t){const n=e.multiple,i=fn(t);if(!(n&&!i&&!xu(t))){for(let o=0,l=e.options.length;o<l;o++){const c=e.options[o],p=yu(c);if(n)if(i){const m=typeof p;m==="string"||m==="number"?c.selected=t.some(y=>String(y)===String(p)):c.selected=ld(t,p)>-1}else c.selected=t.has(p);else if(jl(yu(c),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function yu(e){return"_value"in e?e._value:e.value}function Um(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const jv={created(e,t,n){Pc(e,t,n,null,"created")},mounted(e,t,n){Pc(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Pc(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Pc(e,t,n,i,"updated")}};function zv(e,t){switch(e){case"SELECT":return qs;case"TEXTAREA":return Sr;default:switch(t){case"checkbox":return zm;case"radio":return Fv;default:return Sr}}}function Pc(e,t,n,i,o){const c=zv(e.tagName,n.props&&n.props.type)[o];c&&c(e,t,n,i)}const Uv=["ctrl","shift","alt","meta"],qv={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Uv.some(n=>e[`${n}Key`]&&!t.includes(n))},wh=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(o,...l)=>{for(let c=0;c<t.length;c++){const p=qv[t[c]];if(p&&p(o,t))return}return e(o,...l)})},$v=Zi({patchProp:Ov},bv);let _p;function Vv(){return _p||(_p=$_($v))}const Gv=(...e)=>{const t=Vv().createApp(...e),{mount:n}=t;return t.mount=i=>{const o=Wv(i);if(!o)return;const l=t._component;!kn(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const c=n(o,!1,Hv(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},t};function Hv(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Wv(e){return Kr(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let qm;const xh=e=>qm=e,$m=Symbol();function Bf(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Zu;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Zu||(Zu={}));function Zv(){const e=U0(!0),t=e.run(()=>It({}));let n=[],i=[];const o=gd({install(l){xh(o),o._a=l,l.provide($m,o),l.config.globalProperties.$pinia=o,i.forEach(c=>n.push(c)),i=[]},use(l){return this._a?n.push(l):i.push(l),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const Vm=()=>{};function vp(e,t,n,i=Vm){e.push(t);const o=()=>{const l=e.indexOf(t);l>-1&&(e.splice(l,1),i())};return!n&&q0()&&N1(o),o}function tu(e,...t){e.slice().forEach(n=>{n(...t)})}const Kv=e=>e(),yp=Symbol(),Qh=Symbol();function Tf(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,i)=>e.set(i,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],o=e[n];Bf(o)&&Bf(i)&&e.hasOwnProperty(n)&&!jr(i)&&!hl(i)?e[n]=Tf(o,i):e[n]=i}return e}const Jv=Symbol();function Yv(e){return!Bf(e)||!e.hasOwnProperty(Jv)}const{assign:sl}=Object;function Xv(e){return!!(jr(e)&&e.effect)}function Qv(e,t,n,i){const{state:o,actions:l,getters:c}=t,p=n.state.value[e];let m;function y(){p||(n.state.value[e]=o?o():{});const b=n_(n.state.value[e]);return sl(b,l,Object.keys(c||{}).reduce((w,A)=>(w[A]=gd(Tn(()=>{xh(n);const C=n._s.get(e);return c[A].call(C,C)})),w),{}))}return m=Gm(e,y,t,n,i,!0),m}function Gm(e,t,n={},i,o,l){let c;const p=sl({actions:{}},n),m={deep:!0};let y,b,w=[],A=[],C;const M=i.state.value[e];!l&&!M&&(i.state.value[e]={}),It({});let N;function F(O){let oe;y=b=!1,typeof O=="function"?(O(i.state.value[e]),oe={type:Zu.patchFunction,storeId:e,events:C}):(Tf(i.state.value[e],O),oe={type:Zu.patchObject,payload:O,storeId:e,events:C});const we=N=Symbol();Ul().then(()=>{N===we&&(y=!0)}),b=!0,tu(w,oe,i.state.value[e])}const j=l?function(){const{state:oe}=n,we=oe?oe():{};this.$patch(R=>{sl(R,we)})}:Vm;function z(){c.stop(),w=[],A=[],i._s.delete(e)}const $=(O,oe="")=>{if(yp in O)return O[Qh]=oe,O;const we=function(){xh(i);const R=Array.from(arguments),G=[],he=[];function W(se){G.push(se)}function ne(se){he.push(se)}tu(A,{args:R,name:we[Qh],store:Ce,after:W,onError:ne});let X;try{X=O.apply(this&&this.$id===e?this:Ce,R)}catch(se){throw tu(he,se),se}return X instanceof Promise?X.then(se=>(tu(G,se),se)).catch(se=>(tu(he,se),Promise.reject(se))):(tu(G,X),X)};return we[yp]=!0,we[Qh]=oe,we},pe={_p:i,$id:e,$onAction:vp.bind(null,A),$patch:F,$reset:j,$subscribe(O,oe={}){const we=vp(w,O,oe.detached,()=>R()),R=c.run(()=>$s(()=>i.state.value[e],G=>{(oe.flush==="sync"?b:y)&&O({storeId:e,type:Zu.direct,events:C},G)},sl({},m,oe)));return we},$dispose:z},Ce=Fa(pe);i._s.set(e,Ce);const ke=(i._a&&i._a.runWithContext||Kv)(()=>i._e.run(()=>(c=U0()).run(()=>t({action:$}))));for(const O in ke){const oe=ke[O];if(jr(oe)&&!Xv(oe)||hl(oe))l||(M&&Yv(oe)&&(jr(oe)?oe.value=M[O]:Tf(oe,M[O])),i.state.value[e][O]=oe);else if(typeof oe=="function"){const we=$(oe,O);ke[O]=we,p.actions[O]=oe}}return sl(Ce,ke),sl(Zn(Ce),ke),Object.defineProperty(Ce,"$state",{get:()=>i.state.value[e],set:O=>{F(oe=>{sl(oe,O)})}}),i._p.forEach(O=>{sl(Ce,c.run(()=>O({store:Ce,app:i._a,pinia:i,options:p})))}),M&&l&&n.hydrate&&n.hydrate(Ce.$state,M),y=!0,b=!0,Ce}/*! #__NO_SIDE_EFFECTS__ */function xd(e,t,n){let i,o;const l=typeof t=="function";typeof e=="string"?(i=e,o=l?n:t):(o=e,i=e.id);function c(p,m){const y=I_();return p=p||(y?fo($m,null):null),p&&xh(p),p=qm,p._s.has(i)||(l?Gm(i,t,o,p):Qv(i,o,p)),p._s.get(i)}return c.$id=i,c}function Hm(e,t){return function(){return e.apply(t,arguments)}}const{toString:ey}=Object.prototype,{getPrototypeOf:Ld}=Object,Lh=(e=>t=>{const n=ey.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fo=e=>(e=e.toLowerCase(),t=>Lh(t)===e),Ch=e=>t=>typeof t===e,{isArray:Lu}=Array,rc=Ch("undefined");function ty(e){return e!==null&&!rc(e)&&e.constructor!==null&&!rc(e.constructor)&&Hs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Wm=Fo("ArrayBuffer");function ny(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Wm(e.buffer),t}const ry=Ch("string"),Hs=Ch("function"),Zm=Ch("number"),kh=e=>e!==null&&typeof e=="object",iy=e=>e===!0||e===!1,Rc=e=>{if(Lh(e)!=="object")return!1;const t=Ld(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},sy=Fo("Date"),oy=Fo("File"),ay=Fo("Blob"),ly=Fo("FileList"),uy=e=>kh(e)&&Hs(e.pipe),cy=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Hs(e.append)&&((t=Lh(e))==="formdata"||t==="object"&&Hs(e.toString)&&e.toString()==="[object FormData]"))},hy=Fo("URLSearchParams"),[fy,dy,py,my]=["ReadableStream","Request","Response","Headers"].map(Fo),gy=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hc(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),Lu(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{const l=n?Object.getOwnPropertyNames(e):Object.keys(e),c=l.length;let p;for(i=0;i<c;i++)p=l[i],t.call(null,e[p],p,e)}}function Km(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const Tl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Jm=e=>!rc(e)&&e!==Tl;function Nf(){const{caseless:e}=Jm(this)&&this||{},t={},n=(i,o)=>{const l=e&&Km(t,o)||o;Rc(t[l])&&Rc(i)?t[l]=Nf(t[l],i):Rc(i)?t[l]=Nf({},i):Lu(i)?t[l]=i.slice():t[l]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&hc(arguments[i],n);return t}const _y=(e,t,n,{allOwnKeys:i}={})=>(hc(t,(o,l)=>{n&&Hs(o)?e[l]=Hm(o,n):e[l]=o},{allOwnKeys:i}),e),vy=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),yy=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},by=(e,t,n,i)=>{let o,l,c;const p={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),l=o.length;l-- >0;)c=o[l],(!i||i(c,e,t))&&!p[c]&&(t[c]=e[c],p[c]=!0);e=n!==!1&&Ld(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},wy=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},xy=e=>{if(!e)return null;if(Lu(e))return e;let t=e.length;if(!Zm(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Ly=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ld(Uint8Array)),Cy=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=i.next())&&!o.done;){const l=o.value;t.call(e,l[0],l[1])}},ky=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},Py=Fo("HTMLFormElement"),Ey=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),bp=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ay=Fo("RegExp"),Ym=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};hc(n,(o,l)=>{let c;(c=t(o,l,e))!==!1&&(i[l]=c||o)}),Object.defineProperties(e,i)},Sy=e=>{Ym(e,(t,n)=>{if(Hs(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Hs(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},My=(e,t)=>{const n={},i=o=>{o.forEach(l=>{n[l]=!0})};return Lu(e)?i(e):i(String(e).split(t)),n},By=()=>{},Ty=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,ef="abcdefghijklmnopqrstuvwxyz",wp="0123456789",Xm={DIGIT:wp,ALPHA:ef,ALPHA_DIGIT:ef+ef.toUpperCase()+wp},Ny=(e=16,t=Xm.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function Dy(e){return!!(e&&Hs(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Oy=e=>{const t=new Array(10),n=(i,o)=>{if(kh(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;const l=Lu(i)?[]:{};return hc(i,(c,p)=>{const m=n(c,o+1);!rc(m)&&(l[p]=m)}),t[o]=void 0,l}}return i};return n(e,0)},Iy=Fo("AsyncFunction"),Ry=e=>e&&(kh(e)||Hs(e))&&Hs(e.then)&&Hs(e.catch),Qm=((e,t)=>e?setImmediate:t?((n,i)=>(Tl.addEventListener("message",({source:o,data:l})=>{o===Tl&&l===n&&i.length&&i.shift()()},!1),o=>{i.push(o),Tl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Hs(Tl.postMessage)),Fy=typeof queueMicrotask<"u"?queueMicrotask.bind(Tl):typeof process<"u"&&process.nextTick||Qm,wt={isArray:Lu,isArrayBuffer:Wm,isBuffer:ty,isFormData:cy,isArrayBufferView:ny,isString:ry,isNumber:Zm,isBoolean:iy,isObject:kh,isPlainObject:Rc,isReadableStream:fy,isRequest:dy,isResponse:py,isHeaders:my,isUndefined:rc,isDate:sy,isFile:oy,isBlob:ay,isRegExp:Ay,isFunction:Hs,isStream:uy,isURLSearchParams:hy,isTypedArray:Ly,isFileList:ly,forEach:hc,merge:Nf,extend:_y,trim:gy,stripBOM:vy,inherits:yy,toFlatObject:by,kindOf:Lh,kindOfTest:Fo,endsWith:wy,toArray:xy,forEachEntry:Cy,matchAll:ky,isHTMLForm:Py,hasOwnProperty:bp,hasOwnProp:bp,reduceDescriptors:Ym,freezeMethods:Sy,toObjectSet:My,toCamelCase:Ey,noop:By,toFiniteNumber:Ty,findKey:Km,global:Tl,isContextDefined:Jm,ALPHABET:Xm,generateString:Ny,isSpecCompliantForm:Dy,toJSONObject:Oy,isAsyncFn:Iy,isThenable:Ry,setImmediate:Qm,asap:Fy};function Sn(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}wt.inherits(Sn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const eg=Sn.prototype,tg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{tg[e]={value:e}});Object.defineProperties(Sn,tg);Object.defineProperty(eg,"isAxiosError",{value:!0});Sn.from=(e,t,n,i,o,l)=>{const c=Object.create(eg);return wt.toFlatObject(e,c,function(m){return m!==Error.prototype},p=>p!=="isAxiosError"),Sn.call(c,e.message,t,n,i,o),c.cause=e,c.name=e.name,l&&Object.assign(c,l),c};const jy=null;function Df(e){return wt.isPlainObject(e)||wt.isArray(e)}function ng(e){return wt.endsWith(e,"[]")?e.slice(0,-2):e}function xp(e,t,n){return e?e.concat(t).map(function(o,l){return o=ng(o),!n&&l?"["+o+"]":o}).join(n?".":""):t}function zy(e){return wt.isArray(e)&&!e.some(Df)}const Uy=wt.toFlatObject(wt,{},null,function(t){return/^is[A-Z]/.test(t)});function Ph(e,t,n){if(!wt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,F){return!wt.isUndefined(F[N])});const i=n.metaTokens,o=n.visitor||b,l=n.dots,c=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(t);if(!wt.isFunction(o))throw new TypeError("visitor must be a function");function y(M){if(M===null)return"";if(wt.isDate(M))return M.toISOString();if(!m&&wt.isBlob(M))throw new Sn("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(M)||wt.isTypedArray(M)?m&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function b(M,N,F){let j=M;if(M&&!F&&typeof M=="object"){if(wt.endsWith(N,"{}"))N=i?N:N.slice(0,-2),M=JSON.stringify(M);else if(wt.isArray(M)&&zy(M)||(wt.isFileList(M)||wt.endsWith(N,"[]"))&&(j=wt.toArray(M)))return N=ng(N),j.forEach(function($,pe){!(wt.isUndefined($)||$===null)&&t.append(c===!0?xp([N],pe,l):c===null?N:N+"[]",y($))}),!1}return Df(M)?!0:(t.append(xp(F,N,l),y(M)),!1)}const w=[],A=Object.assign(Uy,{defaultVisitor:b,convertValue:y,isVisitable:Df});function C(M,N){if(!wt.isUndefined(M)){if(w.indexOf(M)!==-1)throw Error("Circular reference detected in "+N.join("."));w.push(M),wt.forEach(M,function(j,z){(!(wt.isUndefined(j)||j===null)&&o.call(t,j,wt.isString(z)?z.trim():z,N,A))===!0&&C(j,N?N.concat(z):[z])}),w.pop()}}if(!wt.isObject(e))throw new TypeError("data must be an object");return C(e),t}function Lp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Cd(e,t){this._pairs=[],e&&Ph(e,this,t)}const rg=Cd.prototype;rg.append=function(t,n){this._pairs.push([t,n])};rg.toString=function(t){const n=t?function(i){return t.call(this,i,Lp)}:Lp;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function qy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ig(e,t,n){if(!t)return e;const i=n&&n.encode||qy;wt.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let l;if(o?l=o(t,n):l=wt.isURLSearchParams(t)?t.toString():new Cd(t,n).toString(i),l){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Cp{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){wt.forEach(this.handlers,function(i){i!==null&&t(i)})}}const sg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$y=typeof URLSearchParams<"u"?URLSearchParams:Cd,Vy=typeof FormData<"u"?FormData:null,Gy=typeof Blob<"u"?Blob:null,Hy={isBrowser:!0,classes:{URLSearchParams:$y,FormData:Vy,Blob:Gy},protocols:["http","https","file","blob","url","data"]},kd=typeof window<"u"&&typeof document<"u",Of=typeof navigator=="object"&&navigator||void 0,Wy=kd&&(!Of||["ReactNative","NativeScript","NS"].indexOf(Of.product)<0),Zy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ky=kd&&window.location.href||"http://localhost",Jy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kd,hasStandardBrowserEnv:Wy,hasStandardBrowserWebWorkerEnv:Zy,navigator:Of,origin:Ky},Symbol.toStringTag,{value:"Module"})),Hi={...Jy,...Hy};function Yy(e,t){return Ph(e,new Hi.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,l){return Hi.isNode&&wt.isBuffer(n)?(this.append(i,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function Xy(e){return wt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Qy(e){const t={},n=Object.keys(e);let i;const o=n.length;let l;for(i=0;i<o;i++)l=n[i],t[l]=e[l];return t}function og(e){function t(n,i,o,l){let c=n[l++];if(c==="__proto__")return!0;const p=Number.isFinite(+c),m=l>=n.length;return c=!c&&wt.isArray(o)?o.length:c,m?(wt.hasOwnProp(o,c)?o[c]=[o[c],i]:o[c]=i,!p):((!o[c]||!wt.isObject(o[c]))&&(o[c]=[]),t(n,i,o[c],l)&&wt.isArray(o[c])&&(o[c]=Qy(o[c])),!p)}if(wt.isFormData(e)&&wt.isFunction(e.entries)){const n={};return wt.forEachEntry(e,(i,o)=>{t(Xy(i),o,n,0)}),n}return null}function e2(e,t,n){if(wt.isString(e))try{return(t||JSON.parse)(e),wt.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const fc={transitional:sg,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,l=wt.isObject(t);if(l&&wt.isHTMLForm(t)&&(t=new FormData(t)),wt.isFormData(t))return o?JSON.stringify(og(t)):t;if(wt.isArrayBuffer(t)||wt.isBuffer(t)||wt.isStream(t)||wt.isFile(t)||wt.isBlob(t)||wt.isReadableStream(t))return t;if(wt.isArrayBufferView(t))return t.buffer;if(wt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let p;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Yy(t,this.formSerializer).toString();if((p=wt.isFileList(t))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Ph(p?{"files[]":t}:t,m&&new m,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),e2(t)):t}],transformResponse:[function(t){const n=this.transitional||fc.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(wt.isResponse(t)||wt.isReadableStream(t))return t;if(t&&wt.isString(t)&&(i&&!this.responseType||o)){const c=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(p){if(c)throw p.name==="SyntaxError"?Sn.from(p,Sn.ERR_BAD_RESPONSE,this,null,this.response):p}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hi.classes.FormData,Blob:Hi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],e=>{fc.headers[e]={}});const t2=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),n2=e=>{const t={};let n,i,o;return e&&e.split(`
`).forEach(function(c){o=c.indexOf(":"),n=c.substring(0,o).trim().toLowerCase(),i=c.substring(o+1).trim(),!(!n||t[n]&&t2[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},kp=Symbol("internals");function Ou(e){return e&&String(e).trim().toLowerCase()}function Fc(e){return e===!1||e==null?e:wt.isArray(e)?e.map(Fc):String(e)}function r2(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const i2=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function tf(e,t,n,i,o){if(wt.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!wt.isString(t)){if(wt.isString(i))return t.indexOf(i)!==-1;if(wt.isRegExp(i))return i.test(t)}}function s2(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function o2(e,t){const n=wt.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,l,c){return this[i].call(this,t,o,l,c)},configurable:!0})})}let Ps=class{constructor(t){t&&this.set(t)}set(t,n,i){const o=this;function l(p,m,y){const b=Ou(m);if(!b)throw new Error("header name must be a non-empty string");const w=wt.findKey(o,b);(!w||o[w]===void 0||y===!0||y===void 0&&o[w]!==!1)&&(o[w||m]=Fc(p))}const c=(p,m)=>wt.forEach(p,(y,b)=>l(y,b,m));if(wt.isPlainObject(t)||t instanceof this.constructor)c(t,n);else if(wt.isString(t)&&(t=t.trim())&&!i2(t))c(n2(t),n);else if(wt.isHeaders(t))for(const[p,m]of t.entries())l(m,p,i);else t!=null&&l(n,t,i);return this}get(t,n){if(t=Ou(t),t){const i=wt.findKey(this,t);if(i){const o=this[i];if(!n)return o;if(n===!0)return r2(o);if(wt.isFunction(n))return n.call(this,o,i);if(wt.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ou(t),t){const i=wt.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||tf(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let o=!1;function l(c){if(c=Ou(c),c){const p=wt.findKey(i,c);p&&(!n||tf(i,i[p],p,n))&&(delete i[p],o=!0)}}return wt.isArray(t)?t.forEach(l):l(t),o}clear(t){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const l=n[i];(!t||tf(this,this[l],l,t,!0))&&(delete this[l],o=!0)}return o}normalize(t){const n=this,i={};return wt.forEach(this,(o,l)=>{const c=wt.findKey(i,l);if(c){n[c]=Fc(o),delete n[l];return}const p=t?s2(l):String(l).trim();p!==l&&delete n[l],n[p]=Fc(o),i[p]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return wt.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&wt.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[kp]=this[kp]={accessors:{}}).accessors,o=this.prototype;function l(c){const p=Ou(c);i[p]||(o2(o,c),i[p]=!0)}return wt.isArray(t)?t.forEach(l):l(t),this}};Ps.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(Ps.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});wt.freezeMethods(Ps);function nf(e,t){const n=this||fc,i=t||n,o=Ps.from(i.headers);let l=i.data;return wt.forEach(e,function(p){l=p.call(n,l,o.normalize(),t?t.status:void 0)}),o.normalize(),l}function ag(e){return!!(e&&e.__CANCEL__)}function Cu(e,t,n){Sn.call(this,e??"canceled",Sn.ERR_CANCELED,t,n),this.name="CanceledError"}wt.inherits(Cu,Sn,{__CANCEL__:!0});function lg(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new Sn("Request failed with status code "+n.status,[Sn.ERR_BAD_REQUEST,Sn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function a2(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function l2(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o=0,l=0,c;return t=t!==void 0?t:1e3,function(m){const y=Date.now(),b=i[l];c||(c=y),n[o]=m,i[o]=y;let w=l,A=0;for(;w!==o;)A+=n[w++],w=w%e;if(o=(o+1)%e,o===l&&(l=(l+1)%e),y-c<t)return;const C=b&&y-b;return C?Math.round(A*1e3/C):void 0}}function u2(e,t){let n=0,i=1e3/t,o,l;const c=(y,b=Date.now())=>{n=b,o=null,l&&(clearTimeout(l),l=null),e.apply(null,y)};return[(...y)=>{const b=Date.now(),w=b-n;w>=i?c(y,b):(o=y,l||(l=setTimeout(()=>{l=null,c(o)},i-w)))},()=>o&&c(o)]}const th=(e,t,n=3)=>{let i=0;const o=l2(50,250);return u2(l=>{const c=l.loaded,p=l.lengthComputable?l.total:void 0,m=c-i,y=o(m),b=c<=p;i=c;const w={loaded:c,total:p,progress:p?c/p:void 0,bytes:m,rate:y||void 0,estimated:y&&p&&b?(p-c)/y:void 0,event:l,lengthComputable:p!=null,[t?"download":"upload"]:!0};e(w)},n)},Pp=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},Ep=e=>(...t)=>wt.asap(()=>e(...t)),c2=Hi.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Hi.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Hi.origin),Hi.navigator&&/(msie|trident)/i.test(Hi.navigator.userAgent)):()=>!0,h2=Hi.hasStandardBrowserEnv?{write(e,t,n,i,o,l){const c=[e+"="+encodeURIComponent(t)];wt.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),wt.isString(i)&&c.push("path="+i),wt.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function f2(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function d2(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ug(e,t){return e&&!f2(t)?d2(e,t):t}const Ap=e=>e instanceof Ps?{...e}:e;function $l(e,t){t=t||{};const n={};function i(y,b,w,A){return wt.isPlainObject(y)&&wt.isPlainObject(b)?wt.merge.call({caseless:A},y,b):wt.isPlainObject(b)?wt.merge({},b):wt.isArray(b)?b.slice():b}function o(y,b,w,A){if(wt.isUndefined(b)){if(!wt.isUndefined(y))return i(void 0,y,w,A)}else return i(y,b,w,A)}function l(y,b){if(!wt.isUndefined(b))return i(void 0,b)}function c(y,b){if(wt.isUndefined(b)){if(!wt.isUndefined(y))return i(void 0,y)}else return i(void 0,b)}function p(y,b,w){if(w in t)return i(y,b);if(w in e)return i(void 0,y)}const m={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:p,headers:(y,b,w)=>o(Ap(y),Ap(b),w,!0)};return wt.forEach(Object.keys(Object.assign({},e,t)),function(b){const w=m[b]||o,A=w(e[b],t[b],b);wt.isUndefined(A)&&w!==p||(n[b]=A)}),n}const cg=e=>{const t=$l({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:c,auth:p}=t;t.headers=c=Ps.from(c),t.url=ig(ug(t.baseURL,t.url),e.params,e.paramsSerializer),p&&c.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let m;if(wt.isFormData(n)){if(Hi.hasStandardBrowserEnv||Hi.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((m=c.getContentType())!==!1){const[y,...b]=m?m.split(";").map(w=>w.trim()).filter(Boolean):[];c.setContentType([y||"multipart/form-data",...b].join("; "))}}if(Hi.hasStandardBrowserEnv&&(i&&wt.isFunction(i)&&(i=i(t)),i||i!==!1&&c2(t.url))){const y=o&&l&&h2.read(l);y&&c.set(o,y)}return t},p2=typeof XMLHttpRequest<"u",m2=p2&&function(e){return new Promise(function(n,i){const o=cg(e);let l=o.data;const c=Ps.from(o.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:y}=o,b,w,A,C,M;function N(){C&&C(),M&&M(),o.cancelToken&&o.cancelToken.unsubscribe(b),o.signal&&o.signal.removeEventListener("abort",b)}let F=new XMLHttpRequest;F.open(o.method.toUpperCase(),o.url,!0),F.timeout=o.timeout;function j(){if(!F)return;const $=Ps.from("getAllResponseHeaders"in F&&F.getAllResponseHeaders()),Ce={data:!p||p==="text"||p==="json"?F.responseText:F.response,status:F.status,statusText:F.statusText,headers:$,config:e,request:F};lg(function(ke){n(ke),N()},function(ke){i(ke),N()},Ce),F=null}"onloadend"in F?F.onloadend=j:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(j)},F.onabort=function(){F&&(i(new Sn("Request aborted",Sn.ECONNABORTED,e,F)),F=null)},F.onerror=function(){i(new Sn("Network Error",Sn.ERR_NETWORK,e,F)),F=null},F.ontimeout=function(){let pe=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Ce=o.transitional||sg;o.timeoutErrorMessage&&(pe=o.timeoutErrorMessage),i(new Sn(pe,Ce.clarifyTimeoutError?Sn.ETIMEDOUT:Sn.ECONNABORTED,e,F)),F=null},l===void 0&&c.setContentType(null),"setRequestHeader"in F&&wt.forEach(c.toJSON(),function(pe,Ce){F.setRequestHeader(Ce,pe)}),wt.isUndefined(o.withCredentials)||(F.withCredentials=!!o.withCredentials),p&&p!=="json"&&(F.responseType=o.responseType),y&&([A,M]=th(y,!0),F.addEventListener("progress",A)),m&&F.upload&&([w,C]=th(m),F.upload.addEventListener("progress",w),F.upload.addEventListener("loadend",C)),(o.cancelToken||o.signal)&&(b=$=>{F&&(i(!$||$.type?new Cu(null,e,F):$),F.abort(),F=null)},o.cancelToken&&o.cancelToken.subscribe(b),o.signal&&(o.signal.aborted?b():o.signal.addEventListener("abort",b)));const z=a2(o.url);if(z&&Hi.protocols.indexOf(z)===-1){i(new Sn("Unsupported protocol "+z+":",Sn.ERR_BAD_REQUEST,e));return}F.send(l||null)})},g2=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let i=new AbortController,o;const l=function(y){if(!o){o=!0,p();const b=y instanceof Error?y:this.reason;i.abort(b instanceof Sn?b:new Cu(b instanceof Error?b.message:b))}};let c=t&&setTimeout(()=>{c=null,l(new Sn(`timeout ${t} of ms exceeded`,Sn.ETIMEDOUT))},t);const p=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),e=null)};e.forEach(y=>y.addEventListener("abort",l));const{signal:m}=i;return m.unsubscribe=()=>wt.asap(p),m}},_2=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let i=0,o;for(;i<n;)o=i+t,yield e.slice(i,o),i=o},v2=async function*(e,t){for await(const n of y2(e))yield*_2(n,t)},y2=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:i}=await t.read();if(n)break;yield i}}finally{await t.cancel()}},Sp=(e,t,n,i)=>{const o=v2(e,t);let l=0,c,p=m=>{c||(c=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:y,value:b}=await o.next();if(y){p(),m.close();return}let w=b.byteLength;if(n){let A=l+=w;n(A)}m.enqueue(new Uint8Array(b))}catch(y){throw p(y),y}},cancel(m){return p(m),o.return()}},{highWaterMark:2})},Eh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",hg=Eh&&typeof ReadableStream=="function",b2=Eh&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),fg=(e,...t)=>{try{return!!e(...t)}catch{return!1}},w2=hg&&fg(()=>{let e=!1;const t=new Request(Hi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Mp=64*1024,If=hg&&fg(()=>wt.isReadableStream(new Response("").body)),nh={stream:If&&(e=>e.body)};Eh&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!nh[t]&&(nh[t]=wt.isFunction(e[t])?n=>n[t]():(n,i)=>{throw new Sn(`Response type '${t}' is not supported`,Sn.ERR_NOT_SUPPORT,i)})})})(new Response);const x2=async e=>{if(e==null)return 0;if(wt.isBlob(e))return e.size;if(wt.isSpecCompliantForm(e))return(await new Request(Hi.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(wt.isArrayBufferView(e)||wt.isArrayBuffer(e))return e.byteLength;if(wt.isURLSearchParams(e)&&(e=e+""),wt.isString(e))return(await b2(e)).byteLength},L2=async(e,t)=>{const n=wt.toFiniteNumber(e.getContentLength());return n??x2(t)},C2=Eh&&(async e=>{let{url:t,method:n,data:i,signal:o,cancelToken:l,timeout:c,onDownloadProgress:p,onUploadProgress:m,responseType:y,headers:b,withCredentials:w="same-origin",fetchOptions:A}=cg(e);y=y?(y+"").toLowerCase():"text";let C=g2([o,l&&l.toAbortSignal()],c),M;const N=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let F;try{if(m&&w2&&n!=="get"&&n!=="head"&&(F=await L2(b,i))!==0){let Ce=new Request(t,{method:"POST",body:i,duplex:"half"}),Te;if(wt.isFormData(i)&&(Te=Ce.headers.get("content-type"))&&b.setContentType(Te),Ce.body){const[ke,O]=Pp(F,th(Ep(m)));i=Sp(Ce.body,Mp,ke,O)}}wt.isString(w)||(w=w?"include":"omit");const j="credentials"in Request.prototype;M=new Request(t,{...A,signal:C,method:n.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:j?w:void 0});let z=await fetch(M);const $=If&&(y==="stream"||y==="response");if(If&&(p||$&&N)){const Ce={};["status","statusText","headers"].forEach(oe=>{Ce[oe]=z[oe]});const Te=wt.toFiniteNumber(z.headers.get("content-length")),[ke,O]=p&&Pp(Te,th(Ep(p),!0))||[];z=new Response(Sp(z.body,Mp,ke,()=>{O&&O(),N&&N()}),Ce)}y=y||"text";let pe=await nh[wt.findKey(nh,y)||"text"](z,e);return!$&&N&&N(),await new Promise((Ce,Te)=>{lg(Ce,Te,{data:pe,headers:Ps.from(z.headers),status:z.status,statusText:z.statusText,config:e,request:M})})}catch(j){throw N&&N(),j&&j.name==="TypeError"&&/fetch/i.test(j.message)?Object.assign(new Sn("Network Error",Sn.ERR_NETWORK,e,M),{cause:j.cause||j}):Sn.from(j,j&&j.code,e,M)}}),Rf={http:jy,xhr:m2,fetch:C2};wt.forEach(Rf,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Bp=e=>`- ${e}`,k2=e=>wt.isFunction(e)||e===null||e===!1,dg={getAdapter:e=>{e=wt.isArray(e)?e:[e];const{length:t}=e;let n,i;const o={};for(let l=0;l<t;l++){n=e[l];let c;if(i=n,!k2(n)&&(i=Rf[(c=String(n)).toLowerCase()],i===void 0))throw new Sn(`Unknown adapter '${c}'`);if(i)break;o[c||"#"+l]=i}if(!i){const l=Object.entries(o).map(([p,m])=>`adapter ${p} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=t?l.length>1?`since :
`+l.map(Bp).join(`
`):" "+Bp(l[0]):"as no adapter specified";throw new Sn("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:Rf};function rf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Cu(null,e)}function Tp(e){return rf(e),e.headers=Ps.from(e.headers),e.data=nf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),dg.getAdapter(e.adapter||fc.adapter)(e).then(function(i){return rf(e),i.data=nf.call(e,e.transformResponse,i),i.headers=Ps.from(i.headers),i},function(i){return ag(i)||(rf(e),i&&i.response&&(i.response.data=nf.call(e,e.transformResponse,i.response),i.response.headers=Ps.from(i.response.headers))),Promise.reject(i)})}const pg="1.7.9",Ah={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ah[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Np={};Ah.transitional=function(t,n,i){function o(l,c){return"[Axios v"+pg+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,p)=>{if(t===!1)throw new Sn(o(c," has been removed"+(n?" in "+n:"")),Sn.ERR_DEPRECATED);return n&&!Np[c]&&(Np[c]=!0,console.warn(o(c," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(l,c,p):!0}};Ah.spelling=function(t){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function P2(e,t,n){if(typeof e!="object")throw new Sn("options must be an object",Sn.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const l=i[o],c=t[l];if(c){const p=e[l],m=p===void 0||c(p,l,e);if(m!==!0)throw new Sn("option "+l+" must be "+m,Sn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Sn("Unknown option "+l,Sn.ERR_BAD_OPTION)}}const jc={assertOptions:P2,validators:Ah},ia=jc.validators;let Rl=class{constructor(t){this.defaults=t,this.interceptors={request:new Cp,response:new Cp}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=$l(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:l}=n;i!==void 0&&jc.assertOptions(i,{silentJSONParsing:ia.transitional(ia.boolean),forcedJSONParsing:ia.transitional(ia.boolean),clarifyTimeoutError:ia.transitional(ia.boolean)},!1),o!=null&&(wt.isFunction(o)?n.paramsSerializer={serialize:o}:jc.assertOptions(o,{encode:ia.function,serialize:ia.function},!0)),jc.assertOptions(n,{baseUrl:ia.spelling("baseURL"),withXsrfToken:ia.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=l&&wt.merge(l.common,l[n.method]);l&&wt.forEach(["delete","get","head","post","put","patch","common"],M=>{delete l[M]}),n.headers=Ps.concat(c,l);const p=[];let m=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(m=m&&N.synchronous,p.unshift(N.fulfilled,N.rejected))});const y=[];this.interceptors.response.forEach(function(N){y.push(N.fulfilled,N.rejected)});let b,w=0,A;if(!m){const M=[Tp.bind(this),void 0];for(M.unshift.apply(M,p),M.push.apply(M,y),A=M.length,b=Promise.resolve(n);w<A;)b=b.then(M[w++],M[w++]);return b}A=p.length;let C=n;for(w=0;w<A;){const M=p[w++],N=p[w++];try{C=M(C)}catch(F){N.call(this,F);break}}try{b=Tp.call(this,C)}catch(M){return Promise.reject(M)}for(w=0,A=y.length;w<A;)b=b.then(y[w++],y[w++]);return b}getUri(t){t=$l(this.defaults,t);const n=ug(t.baseURL,t.url);return ig(n,t.params,t.paramsSerializer)}};wt.forEach(["delete","get","head","options"],function(t){Rl.prototype[t]=function(n,i){return this.request($l(i||{},{method:t,url:n,data:(i||{}).data}))}});wt.forEach(["post","put","patch"],function(t){function n(i){return function(l,c,p){return this.request($l(p||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Rl.prototype[t]=n(),Rl.prototype[t+"Form"]=n(!0)});let E2=class mg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const c=new Promise(p=>{i.subscribe(p),l=p}).then(o);return c.cancel=function(){i.unsubscribe(l)},c},t(function(l,c,p){i.reason||(i.reason=new Cu(l,c,p),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=i=>{t.abort(i)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new mg(function(o){t=o}),cancel:t}}};function A2(e){return function(n){return e.apply(null,n)}}function S2(e){return wt.isObject(e)&&e.isAxiosError===!0}const Ff={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ff).forEach(([e,t])=>{Ff[t]=e});function gg(e){const t=new Rl(e),n=Hm(Rl.prototype.request,t);return wt.extend(n,Rl.prototype,t,{allOwnKeys:!0}),wt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return gg($l(e,o))},n}const zr=gg(fc);zr.Axios=Rl;zr.CanceledError=Cu;zr.CancelToken=E2;zr.isCancel=ag;zr.VERSION=pg;zr.toFormData=Ph;zr.AxiosError=Sn;zr.Cancel=zr.CanceledError;zr.all=function(t){return Promise.all(t)};zr.spread=A2;zr.isAxiosError=S2;zr.mergeConfig=$l;zr.AxiosHeaders=Ps;zr.formToJSON=e=>og(wt.isHTMLForm(e)?new FormData(e):e);zr.getAdapter=dg.getAdapter;zr.HttpStatusCode=Ff;zr.default=zr;const{Axios:Q6,AxiosError:ek,CanceledError:tk,isCancel:nk,CancelToken:rk,VERSION:ik,all:sk,Cancel:ok,isAxiosError:ak,spread:lk,toFormData:uk,AxiosHeaders:ck,HttpStatusCode:hk,formToJSON:fk,getAdapter:dk,mergeConfig:pk}=zr,wn=zr.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function _g(e){var i;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((i=n.pop())==null?void 0:i.split(";").shift())||null}wn.interceptors.request.use(e=>{const t=_g("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));wn.interceptors.response.use(e=>e,async e=>{var n;const t=e.config;if(((n=e.response)==null?void 0:n.status)===401&&!t._retry){t._retry=!0;try{await ls().refreshToken();const o=_g("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,wn(t)}catch(i){console.error("Token refresh failed:",i),window.location.href="/login"}}return Promise.reject(e)});wn.defaults.baseURL="/api";wn.defaults.headers.common["Content-Type"]="application/json";wn.defaults.withCredentials=!0;function rh(e){var i;const n=`; ${document.cookie}`.split(`; ${e}=`);return n.length===2&&((i=n.pop())==null?void 0:i.split(";").shift())||null}wn.interceptors.request.use(e=>{const t=rh("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));wn.interceptors.response.use(e=>e,async e=>{var i,o;const t=ls(),n=e.config;if(((i=e.response)==null?void 0:i.status)===401&&!n._retry&&!((o=n.url)!=null&&o.includes("/token/refresh/"))){n._retry=!0;try{if(!rh("access_token"))throw new Error("No token available");await t.refreshToken();const c=rh("access_token");if(c)return n.headers.Authorization=`Bearer ${c}`,wn(n)}catch(l){console.error("Token refresh failed:",l),await t.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function M2(e,t,n=1){const i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);const o=`expires=${i.toUTCString()}`;document.cookie=`${e}=${t};${o};path=/;secure;samesite=Strict`}function Nl(e){if(!e)return"Non spcifi";const t=`${e.first_name} ${e.last_name.toUpperCase()}`;return e.company_name?`${t} (${e.company_name})`:t}const ls=xd("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="admin"},isDealer:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="dealer"},isClient:e=>{var t;return((t=e.user)==null?void 0:t.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var t;return!!((t=e.user)!=null&&t.dealer)}},actions:{async initialize(e){if(console.log("Initializing auth store with state:",e),!e){console.log("No initial state, attempting to restore session...");const n=await this.restoreSession();return this.initialized=!0,n}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const t=await this.restoreSession();return this.initialized=!0,t},async restoreSession(){console.log("Attempting to restore session...");try{if(!rh("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const t=await wn.post("/token/refresh/");return t.data.user?(this.user=t.data.user,this.isAuthenticated=!0,this.mustChangePassword=t.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,t){var n,i,o;try{const l=await wn.post("/token/",{username:e,password:t});if(!l.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${l.data.access}; path=/; secure; samesite=Strict`;const c=await this.fetchUserProfile();return this.user=c,this.isAuthenticated=!0,!0}catch(l){throw this.isAuthenticated=!1,this.user=null,((n=l.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(o=(i=l.response)==null?void 0:i.data)!=null&&o.detail?new Error(l.response.data.detail):l}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await wn.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,t){try{console.log("Attempting to change password...");const n=await wn.post("/users/change_password/",{old_password:e,password:t});return console.log("Password change response:",n.data),this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var e,t,n,i;try{console.log("Attempting to refresh token...");const o=await wn.post("/token/refresh/",{},{withCredentials:!0}),{access:l}=o.data;if(!l)throw new Error("No access token received");return console.log("Token refreshed successfully"),M2("access_token",l,1),this.isAuthenticated=!0,l}catch(o){throw console.error("Error refreshing token:",{status:(e=o.response)==null?void 0:e.status,data:(t=o.response)==null?void 0:t.data}),(((n=o.response)==null?void 0:n.status)===401||((i=o.response)==null?void 0:i.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),o}},async fetchConcessionnaires(){this.loading=!0;try{const e=await wn.get("/users/",{params:{role:"dealer"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la rcupration des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,t){this.loading=!0;try{await wn.patch(`/users/${e}/`,{concessionnaire:t}),this.user&&this.user.id===e&&(this.user.dealer=t)}catch(n){throw this.error="Erreur lors de la mise  jour du concessionnaire",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await wn.post("/users/",e)).data}catch(t){throw this.error="Erreur lors de la cration de l'utilisateur",t}finally{this.loading=!1}},async updateUserRole(e,t){this.loading=!0;try{const n=await wn.patch(`/users/${e}/`,{role:t});return this.user&&this.user.id===e&&(this.user.user_type=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(e){var t;this.loading=!0;try{const n=await wn.patch(`/users/${(t=this.user)==null?void 0:t.id}/`,{email:e});return this.user&&(this.user.email=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const su=typeof document<"u";function vg(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function B2(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&vg(e.default)}const nr=Object.assign;function sf(e,t){const n={};for(const i in t){const o=t[i];n[i]=Ro(o)?o.map(e):e(o)}return n}const Ku=()=>{},Ro=Array.isArray,yg=/#/g,T2=/&/g,N2=/\//g,D2=/=/g,O2=/\?/g,bg=/\+/g,I2=/%5B/g,R2=/%5D/g,wg=/%5E/g,F2=/%60/g,xg=/%7B/g,j2=/%7C/g,Lg=/%7D/g,z2=/%20/g;function Pd(e){return encodeURI(""+e).replace(j2,"|").replace(I2,"[").replace(R2,"]")}function U2(e){return Pd(e).replace(xg,"{").replace(Lg,"}").replace(wg,"^")}function jf(e){return Pd(e).replace(bg,"%2B").replace(z2,"+").replace(yg,"%23").replace(T2,"%26").replace(F2,"`").replace(xg,"{").replace(Lg,"}").replace(wg,"^")}function q2(e){return jf(e).replace(D2,"%3D")}function $2(e){return Pd(e).replace(yg,"%23").replace(O2,"%3F")}function V2(e){return e==null?"":$2(e).replace(N2,"%2F")}function ic(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const G2=/\/$/,H2=e=>e.replace(G2,"");function of(e,t,n="/"){let i,o={},l="",c="";const p=t.indexOf("#");let m=t.indexOf("?");return p<m&&p>=0&&(m=-1),m>-1&&(i=t.slice(0,m),l=t.slice(m+1,p>-1?p:t.length),o=e(l)),p>-1&&(i=i||t.slice(0,p),c=t.slice(p,t.length)),i=J2(i??t,n),{fullPath:i+(l&&"?")+l+c,path:i,query:o,hash:ic(c)}}function W2(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Dp(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Z2(e,t,n){const i=t.matched.length-1,o=n.matched.length-1;return i>-1&&i===o&&bu(t.matched[i],n.matched[o])&&Cg(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function bu(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Cg(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!K2(e[n],t[n]))return!1;return!0}function K2(e,t){return Ro(e)?Op(e,t):Ro(t)?Op(t,e):e===t}function Op(e,t){return Ro(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function J2(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),o=i[i.length-1];(o===".."||o===".")&&i.push("");let l=n.length-1,c,p;for(c=0;c<i.length;c++)if(p=i[c],p!==".")if(p==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+i.slice(c).join("/")}const nl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var sc;(function(e){e.pop="pop",e.push="push"})(sc||(sc={}));var Ju;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ju||(Ju={}));function Y2(e){if(!e)if(su){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),H2(e)}const X2=/^[^#]+#/;function Q2(e,t){return e.replace(X2,"#")+t}function e5(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Sh=()=>({left:window.scrollX,top:window.scrollY});function t5(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=e5(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ip(e,t){return(history.state?history.state.position-t:-1)+e}const zf=new Map;function n5(e,t){zf.set(e,t)}function r5(e){const t=zf.get(e);return zf.delete(e),t}let i5=()=>location.protocol+"//"+location.host;function kg(e,t){const{pathname:n,search:i,hash:o}=t,l=e.indexOf("#");if(l>-1){let p=o.includes(e.slice(l))?e.slice(l).length:1,m=o.slice(p);return m[0]!=="/"&&(m="/"+m),Dp(m,"")}return Dp(n,e)+i+o}function s5(e,t,n,i){let o=[],l=[],c=null;const p=({state:A})=>{const C=kg(e,location),M=n.value,N=t.value;let F=0;if(A){if(n.value=C,t.value=A,c&&c===M){c=null;return}F=N?A.position-N.position:0}else i(C);o.forEach(j=>{j(n.value,M,{delta:F,type:sc.pop,direction:F?F>0?Ju.forward:Ju.back:Ju.unknown})})};function m(){c=n.value}function y(A){o.push(A);const C=()=>{const M=o.indexOf(A);M>-1&&o.splice(M,1)};return l.push(C),C}function b(){const{history:A}=window;A.state&&A.replaceState(nr({},A.state,{scroll:Sh()}),"")}function w(){for(const A of l)A();l=[],window.removeEventListener("popstate",p),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",p),window.addEventListener("beforeunload",b,{passive:!0}),{pauseListeners:m,listen:y,destroy:w}}function Rp(e,t,n,i=!1,o=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:o?Sh():null}}function o5(e){const{history:t,location:n}=window,i={value:kg(e,n)},o={value:t.state};o.value||l(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function l(m,y,b){const w=e.indexOf("#"),A=w>-1?(n.host&&document.querySelector("base")?e:e.slice(w))+m:i5()+e+m;try{t[b?"replaceState":"pushState"](y,"",A),o.value=y}catch(C){console.error(C),n[b?"replace":"assign"](A)}}function c(m,y){const b=nr({},t.state,Rp(o.value.back,m,o.value.forward,!0),y,{position:o.value.position});l(m,b,!0),i.value=m}function p(m,y){const b=nr({},o.value,t.state,{forward:m,scroll:Sh()});l(b.current,b,!0);const w=nr({},Rp(i.value,m,null),{position:b.position+1},y);l(m,w,!1),i.value=m}return{location:i,state:o,push:p,replace:c}}function a5(e){e=Y2(e);const t=o5(e),n=s5(e,t.state,t.location,t.replace);function i(l,c=!0){c||n.pauseListeners(),history.go(l)}const o=nr({location:"",base:e,go:i,createHref:Q2.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function l5(e){return typeof e=="string"||e&&typeof e=="object"}function Pg(e){return typeof e=="string"||typeof e=="symbol"}const Eg=Symbol("");var Fp;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Fp||(Fp={}));function wu(e,t){return nr(new Error,{type:e,[Eg]:!0},t)}function Ma(e,t){return e instanceof Error&&Eg in e&&(t==null||!!(e.type&t))}const jp="[^/]+?",u5={sensitive:!1,strict:!1,start:!0,end:!0},c5=/[.+*?^${}()[\]/\\]/g;function h5(e,t){const n=nr({},u5,t),i=[];let o=n.start?"^":"";const l=[];for(const y of e){const b=y.length?[]:[90];n.strict&&!y.length&&(o+="/");for(let w=0;w<y.length;w++){const A=y[w];let C=40+(n.sensitive?.25:0);if(A.type===0)w||(o+="/"),o+=A.value.replace(c5,"\\$&"),C+=40;else if(A.type===1){const{value:M,repeatable:N,optional:F,regexp:j}=A;l.push({name:M,repeatable:N,optional:F});const z=j||jp;if(z!==jp){C+=10;try{new RegExp(`(${z})`)}catch(pe){throw new Error(`Invalid custom RegExp for param "${M}" (${z}): `+pe.message)}}let $=N?`((?:${z})(?:/(?:${z}))*)`:`(${z})`;w||($=F&&y.length<2?`(?:/${$})`:"/"+$),F&&($+="?"),o+=$,C+=20,F&&(C+=-8),N&&(C+=-20),z===".*"&&(C+=-50)}b.push(C)}i.push(b)}if(n.strict&&n.end){const y=i.length-1;i[y][i[y].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const c=new RegExp(o,n.sensitive?"":"i");function p(y){const b=y.match(c),w={};if(!b)return null;for(let A=1;A<b.length;A++){const C=b[A]||"",M=l[A-1];w[M.name]=C&&M.repeatable?C.split("/"):C}return w}function m(y){let b="",w=!1;for(const A of e){(!w||!b.endsWith("/"))&&(b+="/"),w=!1;for(const C of A)if(C.type===0)b+=C.value;else if(C.type===1){const{value:M,repeatable:N,optional:F}=C,j=M in y?y[M]:"";if(Ro(j)&&!N)throw new Error(`Provided param "${M}" is an array but it is not repeatable (* or + modifiers)`);const z=Ro(j)?j.join("/"):j;if(!z)if(F)A.length<2&&(b.endsWith("/")?b=b.slice(0,-1):w=!0);else throw new Error(`Missing required param "${M}"`);b+=z}}return b||"/"}return{re:c,score:i,keys:l,parse:p,stringify:m}}function f5(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ag(e,t){let n=0;const i=e.score,o=t.score;for(;n<i.length&&n<o.length;){const l=f5(i[n],o[n]);if(l)return l;n++}if(Math.abs(o.length-i.length)===1){if(zp(i))return 1;if(zp(o))return-1}return o.length-i.length}function zp(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const d5={type:0,value:""},p5=/[a-zA-Z0-9_]/;function m5(e){if(!e)return[[]];if(e==="/")return[[d5]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(C){throw new Error(`ERR (${n})/"${y}": ${C}`)}let n=0,i=n;const o=[];let l;function c(){l&&o.push(l),l=[]}let p=0,m,y="",b="";function w(){y&&(n===0?l.push({type:0,value:y}):n===1||n===2||n===3?(l.length>1&&(m==="*"||m==="+")&&t(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:y,regexp:b,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):t("Invalid state to consume buffer"),y="")}function A(){y+=m}for(;p<e.length;){if(m=e[p++],m==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:m==="/"?(y&&w(),c()):m===":"?(w(),n=1):A();break;case 4:A(),n=i;break;case 1:m==="("?n=2:p5.test(m)?A():(w(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&p--);break;case 2:m===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+m:n=3:b+=m;break;case 3:w(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&p--,b="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${y}"`),w(),c(),o}function g5(e,t,n){const i=h5(m5(e.path),n),o=nr(i,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function _5(e,t){const n=[],i=new Map;t=Vp({strict:!1,end:!0,sensitive:!1},t);function o(w){return i.get(w)}function l(w,A,C){const M=!C,N=qp(w);N.aliasOf=C&&C.record;const F=Vp(t,w),j=[N];if("alias"in w){const pe=typeof w.alias=="string"?[w.alias]:w.alias;for(const Ce of pe)j.push(qp(nr({},N,{components:C?C.record.components:N.components,path:Ce,aliasOf:C?C.record:N})))}let z,$;for(const pe of j){const{path:Ce}=pe;if(A&&Ce[0]!=="/"){const Te=A.record.path,ke=Te[Te.length-1]==="/"?"":"/";pe.path=A.record.path+(Ce&&ke+Ce)}if(z=g5(pe,A,F),C?C.alias.push(z):($=$||z,$!==z&&$.alias.push(z),M&&w.name&&!$p(z)&&c(w.name)),Sg(z)&&m(z),N.children){const Te=N.children;for(let ke=0;ke<Te.length;ke++)l(Te[ke],z,C&&C.children[ke])}C=C||z}return $?()=>{c($)}:Ku}function c(w){if(Pg(w)){const A=i.get(w);A&&(i.delete(w),n.splice(n.indexOf(A),1),A.children.forEach(c),A.alias.forEach(c))}else{const A=n.indexOf(w);A>-1&&(n.splice(A,1),w.record.name&&i.delete(w.record.name),w.children.forEach(c),w.alias.forEach(c))}}function p(){return n}function m(w){const A=b5(w,n);n.splice(A,0,w),w.record.name&&!$p(w)&&i.set(w.record.name,w)}function y(w,A){let C,M={},N,F;if("name"in w&&w.name){if(C=i.get(w.name),!C)throw wu(1,{location:w});F=C.record.name,M=nr(Up(A.params,C.keys.filter($=>!$.optional).concat(C.parent?C.parent.keys.filter($=>$.optional):[]).map($=>$.name)),w.params&&Up(w.params,C.keys.map($=>$.name))),N=C.stringify(M)}else if(w.path!=null)N=w.path,C=n.find($=>$.re.test(N)),C&&(M=C.parse(N),F=C.record.name);else{if(C=A.name?i.get(A.name):n.find($=>$.re.test(A.path)),!C)throw wu(1,{location:w,currentLocation:A});F=C.record.name,M=nr({},A.params,w.params),N=C.stringify(M)}const j=[];let z=C;for(;z;)j.unshift(z.record),z=z.parent;return{name:F,path:N,params:M,matched:j,meta:y5(j)}}e.forEach(w=>l(w));function b(){n.length=0,i.clear()}return{addRoute:l,resolve:y,removeRoute:c,clearRoutes:b,getRoutes:p,getRecordMatcher:o}}function Up(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function qp(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:v5(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function v5(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function $p(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function y5(e){return e.reduce((t,n)=>nr(t,n.meta),{})}function Vp(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function b5(e,t){let n=0,i=t.length;for(;n!==i;){const l=n+i>>1;Ag(e,t[l])<0?i=l:n=l+1}const o=w5(e);return o&&(i=t.lastIndexOf(o,i-1)),i}function w5(e){let t=e;for(;t=t.parent;)if(Sg(t)&&Ag(e,t)===0)return t}function Sg({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function x5(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<i.length;++o){const l=i[o].replace(bg," "),c=l.indexOf("="),p=ic(c<0?l:l.slice(0,c)),m=c<0?null:ic(l.slice(c+1));if(p in t){let y=t[p];Ro(y)||(y=t[p]=[y]),y.push(m)}else t[p]=m}return t}function Gp(e){let t="";for(let n in e){const i=e[n];if(n=q2(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ro(i)?i.map(l=>l&&jf(l)):[i&&jf(i)]).forEach(l=>{l!==void 0&&(t+=(t.length?"&":"")+n,l!=null&&(t+="="+l))})}return t}function L5(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Ro(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return t}const C5=Symbol(""),Hp=Symbol(""),Mh=Symbol(""),Ed=Symbol(""),Uf=Symbol("");function Iu(){let e=[];function t(i){return e.push(i),()=>{const o=e.indexOf(i);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function ll(e,t,n,i,o,l=c=>c()){const c=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((p,m)=>{const y=A=>{A===!1?m(wu(4,{from:n,to:t})):A instanceof Error?m(A):l5(A)?m(wu(2,{from:t,to:A})):(c&&i.enterCallbacks[o]===c&&typeof A=="function"&&c.push(A),p())},b=l(()=>e.call(i&&i.instances[o],t,n,y));let w=Promise.resolve(b);e.length<3&&(w=w.then(y)),w.catch(A=>m(A))})}function af(e,t,n,i,o=l=>l()){const l=[];for(const c of e)for(const p in c.components){let m=c.components[p];if(!(t!=="beforeRouteEnter"&&!c.instances[p]))if(vg(m)){const b=(m.__vccOpts||m)[t];b&&l.push(ll(b,n,i,c,p,o))}else{let y=m();l.push(()=>y.then(b=>{if(!b)throw new Error(`Couldn't resolve component "${p}" at "${c.path}"`);const w=B2(b)?b.default:b;c.mods[p]=b,c.components[p]=w;const C=(w.__vccOpts||w)[t];return C&&ll(C,n,i,c,p,o)()}))}}return l}function Wp(e){const t=fo(Mh),n=fo(Ed),i=Tn(()=>{const m=Cn(e.to);return t.resolve(m)}),o=Tn(()=>{const{matched:m}=i.value,{length:y}=m,b=m[y-1],w=n.matched;if(!b||!w.length)return-1;const A=w.findIndex(bu.bind(null,b));if(A>-1)return A;const C=Zp(m[y-2]);return y>1&&Zp(b)===C&&w[w.length-1].path!==C?w.findIndex(bu.bind(null,m[y-2])):A}),l=Tn(()=>o.value>-1&&A5(n.params,i.value.params)),c=Tn(()=>o.value>-1&&o.value===n.matched.length-1&&Cg(n.params,i.value.params));function p(m={}){if(E5(m)){const y=t[Cn(e.replace)?"replace":"push"](Cn(e.to)).catch(Ku);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>y),y}return Promise.resolve()}return{route:i,href:Tn(()=>i.value.href),isActive:l,isExactActive:c,navigate:p}}function k5(e){return e.length===1?e[0]:e}const P5=Es({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Wp,setup(e,{slots:t}){const n=Fa(Wp(e)),{options:i}=fo(Mh),o=Tn(()=>({[Kp(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Kp(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=t.default&&k5(t.default(n));return e.custom?l:Rm("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},l)}}}),ou=P5;function E5(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function A5(e,t){for(const n in t){const i=t[n],o=e[n];if(typeof i=="string"){if(i!==o)return!1}else if(!Ro(o)||o.length!==i.length||i.some((l,c)=>l!==o[c]))return!1}return!0}function Zp(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Kp=(e,t,n)=>e??t??n,S5=Es({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=fo(Uf),o=Tn(()=>e.route||i.value),l=fo(Hp,0),c=Tn(()=>{let y=Cn(l);const{matched:b}=o.value;let w;for(;(w=b[y])&&!w.components;)y++;return y}),p=Tn(()=>o.value.matched[c.value]);Nc(Hp,Tn(()=>c.value+1)),Nc(C5,p),Nc(Uf,o);const m=It();return $s(()=>[m.value,p.value,e.name],([y,b,w],[A,C,M])=>{b&&(b.instances[w]=y,C&&C!==b&&y&&y===A&&(b.leaveGuards.size||(b.leaveGuards=C.leaveGuards),b.updateGuards.size||(b.updateGuards=C.updateGuards))),y&&b&&(!C||!bu(b,C)||!A)&&(b.enterCallbacks[w]||[]).forEach(N=>N(y))},{flush:"post"}),()=>{const y=o.value,b=e.name,w=p.value,A=w&&w.components[b];if(!A)return Jp(n.default,{Component:A,route:y});const C=w.props[b],M=C?C===!0?y.params:typeof C=="function"?C(y):C:null,F=Rm(A,nr({},M,t,{onVnodeUnmounted:j=>{j.component.isUnmounted&&(w.instances[b]=null)},ref:m}));return Jp(n.default,{Component:F,route:y})||F}}});function Jp(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Mg=S5;function M5(e){const t=_5(e.routes,e),n=e.parseQuery||x5,i=e.stringifyQuery||Gp,o=e.history,l=Iu(),c=Iu(),p=Iu(),m=Q1(nl);let y=nl;su&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=sf.bind(null,_e=>""+_e),w=sf.bind(null,V2),A=sf.bind(null,ic);function C(_e,Ie){let Ne,st;return Pg(_e)?(Ne=t.getRecordMatcher(_e),st=Ie):st=_e,t.addRoute(st,Ne)}function M(_e){const Ie=t.getRecordMatcher(_e);Ie&&t.removeRoute(Ie)}function N(){return t.getRoutes().map(_e=>_e.record)}function F(_e){return!!t.getRecordMatcher(_e)}function j(_e,Ie){if(Ie=nr({},Ie||m.value),typeof _e=="string"){const Re=of(n,_e,Ie.path),De=t.resolve({path:Re.path},Ie),le=o.createHref(Re.fullPath);return nr(Re,De,{params:A(De.params),hash:ic(Re.hash),redirectedFrom:void 0,href:le})}let Ne;if(_e.path!=null)Ne=nr({},_e,{path:of(n,_e.path,Ie.path).path});else{const Re=nr({},_e.params);for(const De in Re)Re[De]==null&&delete Re[De];Ne=nr({},_e,{params:w(Re)}),Ie.params=w(Ie.params)}const st=t.resolve(Ne,Ie),gt=_e.hash||"";st.params=b(A(st.params));const ae=W2(i,nr({},_e,{hash:U2(gt),path:st.path})),fe=o.createHref(ae);return nr({fullPath:ae,hash:gt,query:i===Gp?L5(_e.query):_e.query||{}},st,{redirectedFrom:void 0,href:fe})}function z(_e){return typeof _e=="string"?of(n,_e,m.value.path):nr({},_e)}function $(_e,Ie){if(y!==_e)return wu(8,{from:Ie,to:_e})}function pe(_e){return ke(_e)}function Ce(_e){return pe(nr(z(_e),{replace:!0}))}function Te(_e){const Ie=_e.matched[_e.matched.length-1];if(Ie&&Ie.redirect){const{redirect:Ne}=Ie;let st=typeof Ne=="function"?Ne(_e):Ne;return typeof st=="string"&&(st=st.includes("?")||st.includes("#")?st=z(st):{path:st},st.params={}),nr({query:_e.query,hash:_e.hash,params:st.path!=null?{}:_e.params},st)}}function ke(_e,Ie){const Ne=y=j(_e),st=m.value,gt=_e.state,ae=_e.force,fe=_e.replace===!0,Re=Te(Ne);if(Re)return ke(nr(z(Re),{state:typeof Re=="object"?nr({},gt,Re.state):gt,force:ae,replace:fe}),Ie||Ne);const De=Ne;De.redirectedFrom=Ie;let le;return!ae&&Z2(i,st,Ne)&&(le=wu(16,{to:De,from:st}),We(st,st,!0,!1)),(le?Promise.resolve(le):we(De,st)).catch(Ze=>Ma(Ze)?Ma(Ze,2)?Ze:ue(Ze):V(Ze,De,st)).then(Ze=>{if(Ze){if(Ma(Ze,2))return ke(nr({replace:fe},z(Ze.to),{state:typeof Ze.to=="object"?nr({},gt,Ze.to.state):gt,force:ae}),Ie||De)}else Ze=G(De,st,!0,fe,gt);return R(De,st,Ze),Ze})}function O(_e,Ie){const Ne=$(_e,Ie);return Ne?Promise.reject(Ne):Promise.resolve()}function oe(_e){const Ie=de.values().next().value;return Ie&&typeof Ie.runWithContext=="function"?Ie.runWithContext(_e):_e()}function we(_e,Ie){let Ne;const[st,gt,ae]=B5(_e,Ie);Ne=af(st.reverse(),"beforeRouteLeave",_e,Ie);for(const Re of st)Re.leaveGuards.forEach(De=>{Ne.push(ll(De,_e,Ie))});const fe=O.bind(null,_e,Ie);return Ne.push(fe),Ae(Ne).then(()=>{Ne=[];for(const Re of l.list())Ne.push(ll(Re,_e,Ie));return Ne.push(fe),Ae(Ne)}).then(()=>{Ne=af(gt,"beforeRouteUpdate",_e,Ie);for(const Re of gt)Re.updateGuards.forEach(De=>{Ne.push(ll(De,_e,Ie))});return Ne.push(fe),Ae(Ne)}).then(()=>{Ne=[];for(const Re of ae)if(Re.beforeEnter)if(Ro(Re.beforeEnter))for(const De of Re.beforeEnter)Ne.push(ll(De,_e,Ie));else Ne.push(ll(Re.beforeEnter,_e,Ie));return Ne.push(fe),Ae(Ne)}).then(()=>(_e.matched.forEach(Re=>Re.enterCallbacks={}),Ne=af(ae,"beforeRouteEnter",_e,Ie,oe),Ne.push(fe),Ae(Ne))).then(()=>{Ne=[];for(const Re of c.list())Ne.push(ll(Re,_e,Ie));return Ne.push(fe),Ae(Ne)}).catch(Re=>Ma(Re,8)?Re:Promise.reject(Re))}function R(_e,Ie,Ne){p.list().forEach(st=>oe(()=>st(_e,Ie,Ne)))}function G(_e,Ie,Ne,st,gt){const ae=$(_e,Ie);if(ae)return ae;const fe=Ie===nl,Re=su?history.state:{};Ne&&(st||fe?o.replace(_e.fullPath,nr({scroll:fe&&Re&&Re.scroll},gt)):o.push(_e.fullPath,gt)),m.value=_e,We(_e,Ie,Ne,fe),ue()}let he;function W(){he||(he=o.listen((_e,Ie,Ne)=>{if(!xe.listening)return;const st=j(_e),gt=Te(st);if(gt){ke(nr(gt,{replace:!0,force:!0}),st).catch(Ku);return}y=st;const ae=m.value;su&&n5(Ip(ae.fullPath,Ne.delta),Sh()),we(st,ae).catch(fe=>Ma(fe,12)?fe:Ma(fe,2)?(ke(nr(z(fe.to),{force:!0}),st).then(Re=>{Ma(Re,20)&&!Ne.delta&&Ne.type===sc.pop&&o.go(-1,!1)}).catch(Ku),Promise.reject()):(Ne.delta&&o.go(-Ne.delta,!1),V(fe,st,ae))).then(fe=>{fe=fe||G(st,ae,!1),fe&&(Ne.delta&&!Ma(fe,8)?o.go(-Ne.delta,!1):Ne.type===sc.pop&&Ma(fe,20)&&o.go(-1,!1)),R(st,ae,fe)}).catch(Ku)}))}let ne=Iu(),X=Iu(),se;function V(_e,Ie,Ne){ue(_e);const st=X.list();return st.length?st.forEach(gt=>gt(_e,Ie,Ne)):console.error(_e),Promise.reject(_e)}function Y(){return se&&m.value!==nl?Promise.resolve():new Promise((_e,Ie)=>{ne.add([_e,Ie])})}function ue(_e){return se||(se=!_e,W(),ne.list().forEach(([Ie,Ne])=>_e?Ne(_e):Ie()),ne.reset()),_e}function We(_e,Ie,Ne,st){const{scrollBehavior:gt}=e;if(!su||!gt)return Promise.resolve();const ae=!Ne&&r5(Ip(_e.fullPath,0))||(st||!Ne)&&history.state&&history.state.scroll||null;return Ul().then(()=>gt(_e,Ie,ae)).then(fe=>fe&&t5(fe)).catch(fe=>V(fe,_e,Ie))}const U=_e=>o.go(_e);let ee;const de=new Set,xe={currentRoute:m,listening:!0,addRoute:C,removeRoute:M,clearRoutes:t.clearRoutes,hasRoute:F,getRoutes:N,resolve:j,options:e,push:pe,replace:Ce,go:U,back:()=>U(-1),forward:()=>U(1),beforeEach:l.add,beforeResolve:c.add,afterEach:p.add,onError:X.add,isReady:Y,install(_e){const Ie=this;_e.component("RouterLink",ou),_e.component("RouterView",Mg),_e.config.globalProperties.$router=Ie,Object.defineProperty(_e.config.globalProperties,"$route",{enumerable:!0,get:()=>Cn(m)}),su&&!ee&&m.value===nl&&(ee=!0,pe(o.location).catch(gt=>{}));const Ne={};for(const gt in nl)Object.defineProperty(Ne,gt,{get:()=>m.value[gt],enumerable:!0});_e.provide(Mh,Ie),_e.provide(Ed,rm(Ne)),_e.provide(Uf,m);const st=_e.unmount;de.add(_e),_e.unmount=function(){de.delete(_e),de.size<1&&(y=nl,he&&he(),he=null,m.value=nl,ee=!1,se=!1),st()}}};function Ae(_e){return _e.reduce((Ie,Ne)=>Ie.then(()=>oe(Ne)),Promise.resolve())}return xe}function B5(e,t){const n=[],i=[],o=[],l=Math.max(t.matched.length,e.matched.length);for(let c=0;c<l;c++){const p=t.matched[c];p&&(e.matched.find(y=>bu(y,p))?i.push(p):n.push(p));const m=e.matched[c];m&&(t.matched.find(y=>bu(y,m))||o.push(m))}return[n,i,o]}function ku(){return fo(Mh)}function mk(e){return fo(Ed)}var co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Tg=T5,N5=typeof co=="object"&&co&&co.Object===Object&&co,D5=N5,O5=D5,I5=typeof self=="object"&&self&&self.Object===Object&&self,R5=O5||I5||Function("return this")(),Ng=R5,F5=Ng,j5=function(){return F5.Date.now()},z5=j5,U5=/\s/;function q5(e){for(var t=e.length;t--&&U5.test(e.charAt(t)););return t}var $5=q5,V5=$5,G5=/^\s+/;function H5(e){return e&&e.slice(0,V5(e)+1).replace(G5,"")}var W5=H5,Z5=Ng,K5=Z5.Symbol,Dg=K5,Yp=Dg,Og=Object.prototype,J5=Og.hasOwnProperty,Y5=Og.toString,Ru=Yp?Yp.toStringTag:void 0;function X5(e){var t=J5.call(e,Ru),n=e[Ru];try{e[Ru]=void 0;var i=!0}catch{}var o=Y5.call(e);return i&&(t?e[Ru]=n:delete e[Ru]),o}var Q5=X5,e4=Object.prototype,t4=e4.toString;function n4(e){return t4.call(e)}var r4=n4,Xp=Dg,i4=Q5,s4=r4,o4="[object Null]",a4="[object Undefined]",Qp=Xp?Xp.toStringTag:void 0;function l4(e){return e==null?e===void 0?a4:o4:Qp&&Qp in Object(e)?i4(e):s4(e)}var u4=l4;function c4(e){return e!=null&&typeof e=="object"}var h4=c4,f4=u4,d4=h4,p4="[object Symbol]";function m4(e){return typeof e=="symbol"||d4(e)&&f4(e)==p4}var g4=m4,_4=W5,e0=Tg,v4=g4,t0=NaN,y4=/^[-+]0x[0-9a-f]+$/i,b4=/^0b[01]+$/i,w4=/^0o[0-7]+$/i,x4=parseInt;function L4(e){if(typeof e=="number")return e;if(v4(e))return t0;if(e0(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=e0(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=_4(e);var n=b4.test(e);return n||w4.test(e)?x4(e.slice(2),n?2:8):y4.test(e)?t0:+e}var C4=L4,k4=Tg,lf=z5,n0=C4,P4="Expected a function",E4=Math.max,A4=Math.min;function S4(e,t,n){var i,o,l,c,p,m,y=0,b=!1,w=!1,A=!0;if(typeof e!="function")throw new TypeError(P4);t=n0(t)||0,k4(n)&&(b=!!n.leading,w="maxWait"in n,l=w?E4(n0(n.maxWait)||0,t):l,A="trailing"in n?!!n.trailing:A);function C(Te){var ke=i,O=o;return i=o=void 0,y=Te,c=e.apply(O,ke),c}function M(Te){return y=Te,p=setTimeout(j,t),b?C(Te):c}function N(Te){var ke=Te-m,O=Te-y,oe=t-ke;return w?A4(oe,l-O):oe}function F(Te){var ke=Te-m,O=Te-y;return m===void 0||ke>=t||ke<0||w&&O>=l}function j(){var Te=lf();if(F(Te))return z(Te);p=setTimeout(j,N(Te))}function z(Te){return p=void 0,A&&i?C(Te):(i=o=void 0,c)}function $(){p!==void 0&&clearTimeout(p),y=0,i=m=o=p=void 0}function pe(){return p===void 0?c:z(lf())}function Ce(){var Te=lf(),ke=F(Te);if(i=arguments,o=this,m=Te,ke){if(p===void 0)return M(m);if(w)return clearTimeout(p),p=setTimeout(j,t),C(m)}return p===void 0&&(p=setTimeout(j,t)),c}return Ce.cancel=$,Ce.flush=pe,Ce}var M4=S4;const B4=Bg(M4),T4={class:"relative w-full"},N4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},D4=["onClick"],O4=Es({__name:"SearchBar",emits:["select-location"],setup(e,{emit:t}){const n=It(""),i=It([]),o=t,l=B4(async m=>{if(m.length<3){i.value=[];return}try{const b=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(m)}`)).json();i.value=b}catch(y){console.error("Erreur lors de la recherche d'adresse:",y),i.value=[]}},300);function c(){l(n.value)}function p(m){n.value=m.display_name,i.value=[],o("select-location",{lat:parseFloat(m.lat),lng:parseFloat(m.lon)})}return(m,y)=>(ht(),mt("div",T4,[Rn(I("input",{"onUpdate:modelValue":y[0]||(y[0]=b=>n.value=b),onInput:c,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Sr,n.value]]),i.value.length>0?(ht(),mt("div",N4,[(ht(!0),mt(An,null,Gn(i.value,b=>(ht(),mt("div",{key:b.place_id,onClick:w=>p(b),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Nt(b.display_name),9,D4))),128))])):un("",!0)]))}}),Ig=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n},r0=Ig(O4,[["__scopeId","data-v-0102bcad"]]),I4={class:"h-screen flex flex-col"},R4={key:0,class:"bg-white shadow-sm z-[2000]"},F4={class:"mx-auto px-4 sm:px-6 lg:px-8"},j4={class:"flex h-16 items-center justify-between"},z4={class:"flex items-center space-x-8"},U4={class:"hidden md:flex space-x-6"},q4={key:0,class:"hidden md:block flex-1 mx-8"},$4={key:1,class:"flex-1"},V4={class:"flex items-center space-x-2 md:space-x-4"},G4={class:"flex md:hidden"},H4={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},W4={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Z4={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},K4={class:"relative"},J4={class:"hidden md:flex flex-col items-end"},Y4={class:"text-sm font-medium text-gray-700"},X4={key:0,class:"text-xs text-gray-500"},Q4=["src","alt"],eb={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},tb={class:"md:hidden px-4 py-2 border-b border-gray-100"},nb={class:"text-sm font-medium text-gray-700"},rb={class:"text-xs text-gray-500"},ib={key:0,class:"md:hidden"},sb={class:"space-y-1 px-2 pb-3 pt-2"},ob={key:0,class:"px-4 py-3"},ab={class:"flex-1 overflow-auto"},lb={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},ub=Es({__name:"App",setup(e){const t=ku(),n=ls(),i=It(!1),o=It(!1),l=It(!1);function c(){l.value=window.innerWidth<768}Ra(()=>{c(),window.addEventListener("resize",c)}),yd(()=>{window.removeEventListener("resize",c)});const p=Tn(()=>{const z=n.user;if(!z)return"";const $=`${z.first_name} ${z.last_name.toUpperCase()}`;return z.company_name?`${$} (${z.company_name})`:$}),m=Tn(()=>{var $;const z=($=n.user)==null?void 0:$.user_type;switch(console.log("User type:",z),z){case"admin":return"Accs administrateur";case"dealer":return"Accs concessionnaire";case"client":return"Accs client";default:return""}}),y=Tn(()=>{var z;return((z=n.user)==null?void 0:z.user_type)==="admin"}),b=It(""),w=Tn(()=>n.isAuthenticated),A=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],C=Tn(()=>{var $;if(!w.value)return[];const z=[...A];return y.value?z.push({name:"Utilisateurs",to:"/users"}):(($=n.user)==null?void 0:$.user_type)==="dealer"&&z.push({name:"Clients",to:"/clients"}),z}),M=Tn(()=>w.value?[{name:"Mon profil",to:"/profile"}]:[]);async function N(){try{await n.logout(),t.push("/login")}catch(z){console.error("Erreur lors de la dconnexion:",z)}}function F(z){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:z.lat,lng:z.lng,zoom:16}}))}Ra(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(z){console.error("Auth check error:",z),t.push("/login")}});const j=Tn(()=>{const z="IrrigationDesign";if(!w.value)return`${z} - Connexion`;const $=t.currentRoute.value,Ce={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Slection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[$.name]||"";return Ce?`${z} - ${Ce}`:z});return $s(j,z=>{document.title=z},{immediate:!0}),(z,$)=>(ht(),mt("div",I4,[w.value?(ht(),mt("header",R4,[I("nav",F4,[I("div",j4,[I("div",z4,[Tr(Cn(ou),{to:"/",class:"text-xl font-semibold text-primary-600 truncate"},{default:Ml(()=>$[4]||($[4]=[I("span",{class:"md:inline hidden"},"IrrigationDesign",-1),I("span",{class:"md:hidden inline"},"ID",-1)])),_:1}),I("div",U4,[(ht(!0),mt(An,null,Gn(C.value,pe=>(ht(),Ia(Cn(ou),{key:pe.name,to:pe.to,class:as(["text-sm font-medium transition-colors duration-200",[z.$route.path===pe.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Ml(()=>[yr(Nt(pe.name),1)]),_:2},1032,["to","class"]))),128))])]),z.$route.path==="/"?(ht(),mt("div",q4,[Tr(r0,{onSelectLocation:F})])):(ht(),mt("div",$4)),I("div",V4,[I("div",G4,[I("button",{onClick:$[0]||($[0]=pe=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[$[5]||($[5]=I("span",{class:"sr-only"},"Ouvrir le menu",-1)),(ht(),mt("svg",H4,[o.value?(ht(),mt("path",Z4)):(ht(),mt("path",W4))]))])]),$[6]||($[6]=I("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[I("span",{class:"sr-only"},"Voir les notifications"),I("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),I("div",K4,[I("button",{onClick:$[1]||($[1]=pe=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[I("div",J4,[I("span",Y4,Nt(p.value),1),m.value?(ht(),mt("span",X4,Nt(m.value),1)):un("",!0)]),I("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:b.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(p.value),alt:p.value},null,8,Q4)]),i.value?(ht(),mt("div",eb,[I("div",tb,[I("div",nb,Nt(p.value),1),I("div",rb,Nt(m.value),1)]),(ht(!0),mt(An,null,Gn(M.value,pe=>(ht(),Ia(Cn(ou),{key:pe.name,to:pe.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:$[2]||($[2]=Ce=>i.value=!1)},{default:Ml(()=>[yr(Nt(pe.name),1)]),_:2},1032,["to"]))),128)),I("button",{onClick:N,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Dconnexion ")])):un("",!0)])])]),o.value?(ht(),mt("div",ib,[I("div",sb,[(ht(!0),mt(An,null,Gn(C.value,pe=>(ht(),Ia(Cn(ou),{key:pe.name,to:pe.to,class:as(["block px-3 py-2 rounded-md text-base font-medium",[z.$route.path===pe.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:$[3]||($[3]=Ce=>o.value=!1)},{default:Ml(()=>[yr(Nt(pe.name),1)]),_:2},1032,["to","class"]))),128))]),z.$route.path==="/"?(ht(),mt("div",ob,[Tr(r0,{onSelectLocation:F})])):un("",!0)])):un("",!0)])])):un("",!0),I("main",ab,[l.value&&z.$route.path==="/"?(ht(),mt("div",lb,[$[8]||($[8]=I("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),$[9]||($[9]=I("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommande ",-1)),$[10]||($[10]=I("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure exprience de conception d'irrigation, nous vous recommandons d'utiliser un cran plus large ou un ordinateur. ",-1)),Tr(Cn(ou),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Ml(()=>$[7]||($[7]=[yr(" Voir mes plans ")])),_:1})])):(ht(),Ia(Cn(Mg),{key:1}))])]))}}),cb="modulepreload",hb=function(e){return"/static/frontend/"+e},i0={},Dl=function(t,n,i){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(n.map(m=>{if(m=hb(m),m in i0)return;i0[m]=!0;const y=m.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":cb,y||(w.as="script"),w.crossOrigin="",w.href=m,p&&w.setAttribute("nonce",p),document.head.appendChild(w),y)return new Promise((A,C)=>{w.addEventListener("load",A),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=c,window.dispatchEvent(p),!p.defaultPrevented)throw c}return o.then(c=>{for(const p of c||[])p.status==="rejected"&&l(p.reason);return t().catch(l)})},fb={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},db={class:"max-w-md w-full space-y-8"},pb={class:"space-y-4"},mb={class:"mt-1"},gb={class:"mt-1"},_b={class:"mt-1"},vb={key:0,class:"rounded-md bg-red-50 p-4"},yb={class:"flex"},bb={class:"ml-3"},wb={class:"text-sm font-medium text-red-800"},xb={key:1,class:"rounded-md bg-yellow-50 p-4"},Lb={class:"flex"},Cb={class:"ml-3"},kb={class:"mt-2 text-sm text-yellow-700"},Pb={class:"list-disc pl-5 space-y-1"},Eb=["disabled"],Ab={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Sb={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Mb={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Bb=Es({__name:"ChangePasswordForm",setup(e){const t=ku(),n=ls(),i=Fa({oldPassword:"",newPassword:"",confirmPassword:""}),o=It(!1),l=It("");Ra(()=>{var y,b;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(y=n.user)==null?void 0:y.id,mustChangePassword:(b=n.user)==null?void 0:b.must_change_password})});const c=Tn(()=>{const y=[];return i.newPassword&&i.newPassword.length<8&&y.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),i.newPassword&&i.confirmPassword&&i.newPassword!==i.confirmPassword&&y.push("Les mots de passe ne correspondent pas"),y}),p=Tn(()=>i.oldPassword.length>0&&i.newPassword.length>=8&&i.newPassword===i.confirmPassword);async function m(){var y,b,w,A,C,M,N,F;if(!p.value){l.value="Veuillez corriger les erreurs avant de continuer";return}if(!((y=n.user)!=null&&y.id)){l.value="Erreur : utilisateur non identifi";return}o.value=!0,l.value="";try{console.log("Submitting password change..."),await n.changePassword(i.oldPassword,i.newPassword),console.log("Password changed successfully"),t.push("/")}catch(j){console.error("Password change failed:",j),(w=(b=j.response)==null?void 0:b.data)!=null&&w.detail?l.value=j.response.data.detail:(C=(A=j.response)==null?void 0:A.data)!=null&&C.old_password?l.value=j.response.data.old_password[0]:(N=(M=j.response)==null?void 0:M.data)!=null&&N.password?l.value=j.response.data.password[0]:((F=j.response)==null?void 0:F.status)===401?(l.value="Session expire, veuillez vous reconnecter",await n.logout(),t.push("/login")):l.value="Une erreur est survenue lors du changement de mot de passe"}finally{o.value=!1}}return(y,b)=>(ht(),mt("div",fb,[I("div",db,[b[12]||(b[12]=I("div",null,[I("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),I("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),I("form",{class:"mt-8 space-y-6",onSubmit:wh(m,["prevent"])},[I("div",pb,[I("div",null,[b[3]||(b[3]=I("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),I("div",mb,[Rn(I("input",{id:"old-password","onUpdate:modelValue":b[0]||(b[0]=w=>i.oldPassword=w),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Sr,i.oldPassword]])])]),I("div",null,[b[4]||(b[4]=I("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),I("div",gb,[Rn(I("input",{id:"new-password","onUpdate:modelValue":b[1]||(b[1]=w=>i.newPassword=w),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Sr,i.newPassword]])]),b[5]||(b[5]=I("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),I("div",null,[b[6]||(b[6]=I("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),I("div",_b,[Rn(I("input",{id:"confirm-password","onUpdate:modelValue":b[2]||(b[2]=w=>i.confirmPassword=w),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Sr,i.confirmPassword]])])])]),l.value?(ht(),mt("div",vb,[I("div",yb,[b[7]||(b[7]=I("div",{class:"flex-shrink-0"},[I("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),I("div",bb,[I("h3",wb,Nt(l.value),1)])])])):un("",!0),c.value.length>0?(ht(),mt("div",xb,[I("div",Lb,[b[9]||(b[9]=I("div",{class:"flex-shrink-0"},[I("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),I("div",Cb,[b[8]||(b[8]=I("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),I("div",kb,[I("ul",Pb,[(ht(!0),mt(An,null,Gn(c.value,(w,A)=>(ht(),mt("li",{key:A},Nt(w),1))),128))])])])])])):un("",!0),I("div",null,[I("button",{type:"submit",disabled:o.value||!p.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[I("span",Ab,[o.value?(ht(),mt("svg",Mb,b[11]||(b[11]=[I("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),I("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ht(),mt("svg",Sb,b[10]||(b[10]=[I("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),yr(" "+Nt(o.value?"Modification en cours...":"Changer le mot de passe"),1)],8,Eb)])],32)])]))}}),Tb="/static/frontend/assets/logo.svg",Nb={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Db={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},Ob={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},Ib={key:0,class:"rounded-md bg-red-50 p-4"},Rb={class:"flex"},Fb={class:"ml-3"},jb={class:"text-sm font-medium text-red-800"},zb={class:"mt-1"},Ub={class:"mt-1 relative"},qb=["type"],$b={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Vb={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Gb={class:"flex items-center justify-between"},Hb={class:"flex items-center"},Wb={class:"text-sm"},Zb=["disabled"],Kb={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Jb=Es({__name:"LoginView",setup(e){const t=ku(),n=ls(),i=It(!1),o=It(null),l=It(!1),c=Fa({username:"",password:"",rememberMe:!1});Ra(()=>{var m;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(m=window.INITIAL_STATE)!=null&&m.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),t.push("/"))});async function p(){var m,y,b,w,A,C;i.value=!0,o.value=null;try{if(!c.username||!c.password){o.value="Veuillez remplir tous les champs";return}await n.login(c.username,c.password),(m=n.user)!=null&&m.must_change_password?t.push("/change-password"):t.push("/")}catch(M){console.error("Login error:",M),o.value=((b=(y=M==null?void 0:M.response)==null?void 0:y.data)==null?void 0:b.detail)||((C=(A=(w=M==null?void 0:M.response)==null?void 0:w.data)==null?void 0:A.non_field_errors)==null?void 0:C[0])||(M==null?void 0:M.message)||"Erreur lors de la connexion"}finally{i.value=!1}}return(m,y)=>{const b=k_("router-link");return ht(),mt("div",Nb,[y[12]||(y[12]=I("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[I("img",{src:Tb,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),I("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),I("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accder  votre espace ")],-1)),I("div",Db,[I("div",Ob,[I("form",{class:"space-y-6",onSubmit:wh(p,["prevent"])},[o.value?(ht(),mt("div",Ib,[I("div",Rb,[y[4]||(y[4]=I("div",{class:"flex-shrink-0"},[I("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),I("div",Fb,[I("h3",jb,Nt(o.value),1)])])])):un("",!0),I("div",null,[y[5]||(y[5]=I("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),I("div",zb,[Rn(I("input",{id:"username","onUpdate:modelValue":y[0]||(y[0]=w=>c.username=w),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Sr,c.username]])])]),I("div",null,[y[8]||(y[8]=I("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),I("div",Ub,[Rn(I("input",{id:"password","onUpdate:modelValue":y[1]||(y[1]=w=>c.password=w),type:l.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,qb),[[jv,c.password]]),I("button",{type:"button",onClick:y[2]||(y[2]=w=>l.value=!l.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[l.value?(ht(),mt("svg",$b,y[6]||(y[6]=[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(ht(),mt("svg",Vb,y[7]||(y[7]=[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),I("div",Gb,[I("div",Hb,[Rn(I("input",{id:"remember-me","onUpdate:modelValue":y[3]||(y[3]=w=>c.rememberMe=w),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[zm,c.rememberMe]]),y[9]||(y[9]=I("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),I("div",Wb,[Tr(b,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Ml(()=>y[10]||(y[10]=[yr(" Mot de passe oubli ? ")])),_:1})])]),I("div",null,[I("button",{type:"submit",disabled:i.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[i.value?(ht(),mt("svg",Kb,y[11]||(y[11]=[I("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),I("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),yr(" "+Nt(i.value?"Connexion en cours...":"Se connecter"),1)],8,Zb)])],32)])])])}}}),uf="/static/frontend/assets/logo.jpeg";var qf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(co,function(n){var i="1.9.4";function o(r){var u,g,P,D;for(g=1,P=arguments.length;g<P;g++){D=arguments[g];for(u in D)r[u]=D[u]}return r}var l=Object.create||function(){function r(){}return function(u){return r.prototype=u,new r}}();function c(r,u){var g=Array.prototype.slice;if(r.bind)return r.bind.apply(r,g.call(arguments,1));var P=g.call(arguments,2);return function(){return r.apply(u,P.length?P.concat(g.call(arguments)):arguments)}}var p=0;function m(r){return"_leaflet_id"in r||(r._leaflet_id=++p),r._leaflet_id}function y(r,u,g){var P,D,re,je;return je=function(){P=!1,D&&(re.apply(g,D),D=!1)},re=function(){P?D=arguments:(r.apply(g,arguments),setTimeout(je,u),P=!0)},re}function b(r,u,g){var P=u[1],D=u[0],re=P-D;return r===P&&g?r:((r-D)%re+re)%re+D}function w(){return!1}function A(r,u){if(u===!1)return r;var g=Math.pow(10,u===void 0?6:u);return Math.round(r*g)/g}function C(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function M(r){return C(r).split(/\s+/)}function N(r,u){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?l(r.options):{});for(var g in u)r.options[g]=u[g];return r.options}function F(r,u,g){var P=[];for(var D in r)P.push(encodeURIComponent(g?D.toUpperCase():D)+"="+encodeURIComponent(r[D]));return(!u||u.indexOf("?")===-1?"?":"&")+P.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function z(r,u){return r.replace(j,function(g,P){var D=u[P];if(D===void 0)throw new Error("No value provided for variable "+g);return typeof D=="function"&&(D=D(u)),D})}var $=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function pe(r,u){for(var g=0;g<r.length;g++)if(r[g]===u)return g;return-1}var Ce="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Te(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var ke=0;function O(r){var u=+new Date,g=Math.max(0,16-(u-ke));return ke=u+g,window.setTimeout(r,g)}var oe=window.requestAnimationFrame||Te("RequestAnimationFrame")||O,we=window.cancelAnimationFrame||Te("CancelAnimationFrame")||Te("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function R(r,u,g){if(g&&oe===O)r.call(u);else return oe.call(window,c(r,u))}function G(r){r&&we.call(window,r)}var he={__proto__:null,extend:o,create:l,bind:c,get lastId(){return p},stamp:m,throttle:y,wrapNum:b,falseFn:w,formatNum:A,trim:C,splitWords:M,setOptions:N,getParamString:F,template:z,isArray:$,indexOf:pe,emptyImageUrl:Ce,requestFn:oe,cancelFn:we,requestAnimFrame:R,cancelAnimFrame:G};function W(){}W.extend=function(r){var u=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=u.__super__=this.prototype,P=l(g);P.constructor=u,u.prototype=P;for(var D in this)Object.prototype.hasOwnProperty.call(this,D)&&D!=="prototype"&&D!=="__super__"&&(u[D]=this[D]);return r.statics&&o(u,r.statics),r.includes&&(ne(r.includes),o.apply(null,[P].concat(r.includes))),o(P,r),delete P.statics,delete P.includes,P.options&&(P.options=g.options?l(g.options):{},o(P.options,r.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var re=0,je=P._initHooks.length;re<je;re++)P._initHooks[re].call(this)}},u},W.include=function(r){var u=this.prototype.options;return o(this.prototype,r),r.options&&(this.prototype.options=u,this.mergeOptions(r.options)),this},W.mergeOptions=function(r){return o(this.prototype.options,r),this},W.addInitHook=function(r){var u=Array.prototype.slice.call(arguments,1),g=typeof r=="function"?r:function(){this[r].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function ne(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=$(r)?r:[r];for(var u=0;u<r.length;u++)r[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var X={on:function(r,u,g){if(typeof r=="object")for(var P in r)this._on(P,r[P],u);else{r=M(r);for(var D=0,re=r.length;D<re;D++)this._on(r[D],u,g)}return this},off:function(r,u,g){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var P in r)this._off(P,r[P],u);else{r=M(r);for(var D=arguments.length===1,re=0,je=r.length;re<je;re++)D?this._off(r[re]):this._off(r[re],u,g)}return this},_on:function(r,u,g,P){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(r,u,g)===!1){g===this&&(g=void 0);var D={fn:u,ctx:g};P&&(D.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(D)}},_off:function(r,u,g){var P,D,re;if(this._events&&(P=this._events[r],!!P)){if(arguments.length===1){if(this._firingCount)for(D=0,re=P.length;D<re;D++)P[D].fn=w;delete this._events[r];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var je=this._listens(r,u,g);if(je!==!1){var at=P[je];this._firingCount&&(at.fn=w,this._events[r]=P=P.slice()),P.splice(je,1)}}},fire:function(r,u,g){if(!this.listens(r,g))return this;var P=o({},u,{type:r,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var D=this._events[r];if(D){this._firingCount=this._firingCount+1||1;for(var re=0,je=D.length;re<je;re++){var at=D[re],_t=at.fn;at.once&&this.off(r,_t,at.ctx),_t.call(at.ctx||this,P)}this._firingCount--}}return g&&this._propagateEvent(P),this},listens:function(r,u,g,P){typeof r!="string"&&console.warn('"string" type argument expected');var D=u;typeof u!="function"&&(P=!!u,D=void 0,g=void 0);var re=this._events&&this._events[r];if(re&&re.length&&this._listens(r,D,g)!==!1)return!0;if(P){for(var je in this._eventParents)if(this._eventParents[je].listens(r,u,g,P))return!0}return!1},_listens:function(r,u,g){if(!this._events)return!1;var P=this._events[r]||[];if(!u)return!!P.length;g===this&&(g=void 0);for(var D=0,re=P.length;D<re;D++)if(P[D].fn===u&&P[D].ctx===g)return D;return!1},once:function(r,u,g){if(typeof r=="object")for(var P in r)this._on(P,r[P],u,!0);else{r=M(r);for(var D=0,re=r.length;D<re;D++)this._on(r[D],u,g,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[m(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[m(r)],this},_propagateEvent:function(r){for(var u in this._eventParents)this._eventParents[u].fire(r.type,o({layer:r.target,propagatedFrom:r.target},r),!0)}};X.addEventListener=X.on,X.removeEventListener=X.clearAllEventListeners=X.off,X.addOneTimeEventListener=X.once,X.fireEvent=X.fire,X.hasEventListeners=X.listens;var se=W.extend(X);function V(r,u,g){this.x=g?Math.round(r):r,this.y=g?Math.round(u):u}var Y=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};V.prototype={clone:function(){return new V(this.x,this.y)},add:function(r){return this.clone()._add(ue(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(ue(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new V(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new V(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Y(this.x),this.y=Y(this.y),this},distanceTo:function(r){r=ue(r);var u=r.x-this.x,g=r.y-this.y;return Math.sqrt(u*u+g*g)},equals:function(r){return r=ue(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=ue(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+A(this.x)+", "+A(this.y)+")"}};function ue(r,u,g){return r instanceof V?r:$(r)?new V(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new V(r.x,r.y):new V(r,u,g)}function We(r,u){if(r)for(var g=u?[r,u]:r,P=0,D=g.length;P<D;P++)this.extend(g[P])}We.prototype={extend:function(r){var u,g;if(!r)return this;if(r instanceof V||typeof r[0]=="number"||"x"in r)u=g=ue(r);else if(r=U(r),u=r.min,g=r.max,!u||!g)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=g.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(r){return ue((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return ue(this.min.x,this.max.y)},getTopRight:function(){return ue(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var u,g;return typeof r[0]=="number"||r instanceof V?r=ue(r):r=U(r),r instanceof We?(u=r.min,g=r.max):u=g=r,u.x>=this.min.x&&g.x<=this.max.x&&u.y>=this.min.y&&g.y<=this.max.y},intersects:function(r){r=U(r);var u=this.min,g=this.max,P=r.min,D=r.max,re=D.x>=u.x&&P.x<=g.x,je=D.y>=u.y&&P.y<=g.y;return re&&je},overlaps:function(r){r=U(r);var u=this.min,g=this.max,P=r.min,D=r.max,re=D.x>u.x&&P.x<g.x,je=D.y>u.y&&P.y<g.y;return re&&je},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var u=this.min,g=this.max,P=Math.abs(u.x-g.x)*r,D=Math.abs(u.y-g.y)*r;return U(ue(u.x-P,u.y-D),ue(g.x+P,g.y+D))},equals:function(r){return r?(r=U(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function U(r,u){return!r||r instanceof We?r:new We(r,u)}function ee(r,u){if(r)for(var g=u?[r,u]:r,P=0,D=g.length;P<D;P++)this.extend(g[P])}ee.prototype={extend:function(r){var u=this._southWest,g=this._northEast,P,D;if(r instanceof xe)P=r,D=r;else if(r instanceof ee){if(P=r._southWest,D=r._northEast,!P||!D)return this}else return r?this.extend(Ae(r)||de(r)):this;return!u&&!g?(this._southWest=new xe(P.lat,P.lng),this._northEast=new xe(D.lat,D.lng)):(u.lat=Math.min(P.lat,u.lat),u.lng=Math.min(P.lng,u.lng),g.lat=Math.max(D.lat,g.lat),g.lng=Math.max(D.lng,g.lng)),this},pad:function(r){var u=this._southWest,g=this._northEast,P=Math.abs(u.lat-g.lat)*r,D=Math.abs(u.lng-g.lng)*r;return new ee(new xe(u.lat-P,u.lng-D),new xe(g.lat+P,g.lng+D))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof xe||"lat"in r?r=Ae(r):r=de(r);var u=this._southWest,g=this._northEast,P,D;return r instanceof ee?(P=r.getSouthWest(),D=r.getNorthEast()):P=D=r,P.lat>=u.lat&&D.lat<=g.lat&&P.lng>=u.lng&&D.lng<=g.lng},intersects:function(r){r=de(r);var u=this._southWest,g=this._northEast,P=r.getSouthWest(),D=r.getNorthEast(),re=D.lat>=u.lat&&P.lat<=g.lat,je=D.lng>=u.lng&&P.lng<=g.lng;return re&&je},overlaps:function(r){r=de(r);var u=this._southWest,g=this._northEast,P=r.getSouthWest(),D=r.getNorthEast(),re=D.lat>u.lat&&P.lat<g.lat,je=D.lng>u.lng&&P.lng<g.lng;return re&&je},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,u){return r?(r=de(r),this._southWest.equals(r.getSouthWest(),u)&&this._northEast.equals(r.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function de(r,u){return r instanceof ee?r:new ee(r,u)}function xe(r,u,g){if(isNaN(r)||isNaN(u))throw new Error("Invalid LatLng object: ("+r+", "+u+")");this.lat=+r,this.lng=+u,g!==void 0&&(this.alt=+g)}xe.prototype={equals:function(r,u){if(!r)return!1;r=Ae(r);var g=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return g<=(u===void 0?1e-9:u)},toString:function(r){return"LatLng("+A(this.lat,r)+", "+A(this.lng,r)+")"},distanceTo:function(r){return Ie.distance(this,Ae(r))},wrap:function(){return Ie.wrapLatLng(this)},toBounds:function(r){var u=180*r/40075017,g=u/Math.cos(Math.PI/180*this.lat);return de([this.lat-u,this.lng-g],[this.lat+u,this.lng+g])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function Ae(r,u,g){return r instanceof xe?r:$(r)&&typeof r[0]!="object"?r.length===3?new xe(r[0],r[1],r[2]):r.length===2?new xe(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new xe(r.lat,"lng"in r?r.lng:r.lon,r.alt):u===void 0?null:new xe(r,u,g)}var _e={latLngToPoint:function(r,u){var g=this.projection.project(r),P=this.scale(u);return this.transformation._transform(g,P)},pointToLatLng:function(r,u){var g=this.scale(u),P=this.transformation.untransform(r,g);return this.projection.unproject(P)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var u=this.projection.bounds,g=this.scale(r),P=this.transformation.transform(u.min,g),D=this.transformation.transform(u.max,g);return new We(P,D)},infinite:!1,wrapLatLng:function(r){var u=this.wrapLng?b(r.lng,this.wrapLng,!0):r.lng,g=this.wrapLat?b(r.lat,this.wrapLat,!0):r.lat,P=r.alt;return new xe(g,u,P)},wrapLatLngBounds:function(r){var u=r.getCenter(),g=this.wrapLatLng(u),P=u.lat-g.lat,D=u.lng-g.lng;if(P===0&&D===0)return r;var re=r.getSouthWest(),je=r.getNorthEast(),at=new xe(re.lat-P,re.lng-D),_t=new xe(je.lat-P,je.lng-D);return new ee(at,_t)}},Ie=o({},_e,{wrapLng:[-180,180],R:6371e3,distance:function(r,u){var g=Math.PI/180,P=r.lat*g,D=u.lat*g,re=Math.sin((u.lat-r.lat)*g/2),je=Math.sin((u.lng-r.lng)*g/2),at=re*re+Math.cos(P)*Math.cos(D)*je*je,_t=2*Math.atan2(Math.sqrt(at),Math.sqrt(1-at));return this.R*_t}}),Ne=6378137,st={R:Ne,MAX_LATITUDE:85.0511287798,project:function(r){var u=Math.PI/180,g=this.MAX_LATITUDE,P=Math.max(Math.min(g,r.lat),-g),D=Math.sin(P*u);return new V(this.R*r.lng*u,this.R*Math.log((1+D)/(1-D))/2)},unproject:function(r){var u=180/Math.PI;return new xe((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*u,r.x*u/this.R)},bounds:function(){var r=Ne*Math.PI;return new We([-r,-r],[r,r])}()};function gt(r,u,g,P){if($(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=u,this._c=g,this._d=P}gt.prototype={transform:function(r,u){return this._transform(r.clone(),u)},_transform:function(r,u){return u=u||1,r.x=u*(this._a*r.x+this._b),r.y=u*(this._c*r.y+this._d),r},untransform:function(r,u){return u=u||1,new V((r.x/u-this._b)/this._a,(r.y/u-this._d)/this._c)}};function ae(r,u,g,P){return new gt(r,u,g,P)}var fe=o({},Ie,{code:"EPSG:3857",projection:st,transformation:function(){var r=.5/(Math.PI*st.R);return ae(r,.5,-r,.5)}()}),Re=o({},fe,{code:"EPSG:900913"});function De(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function le(r,u){var g="",P,D,re,je,at,_t;for(P=0,re=r.length;P<re;P++){for(at=r[P],D=0,je=at.length;D<je;D++)_t=at[D],g+=(D?"L":"M")+_t.x+" "+_t.y;g+=u?Ut.svg?"z":"x":""}return g||"M0 0"}var Ze=document.documentElement.style,lt="ActiveXObject"in window,Qe=lt&&!document.addEventListener,ot="msLaunchUri"in navigator&&!("documentMode"in document),Oe=Un("webkit"),Le=Un("android"),rt=Un("android 2")||Un("android 3"),vt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Lt=Le&&Un("Google")&&vt<537&&!("AudioNode"in window),Ue=!!window.opera,Tt=!ot&&Un("chrome"),Mt=Un("gecko")&&!Oe&&!Ue&&!lt,jt=!Tt&&Un("safari"),Vt=Un("phantom"),Dt="OTransition"in Ze,Pn=navigator.platform.indexOf("Win")===0,tn=lt&&"transition"in Ze,Kn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,ln="MozPerspective"in Ze,xn=!window.L_DISABLE_3D&&(tn||Kn||ln)&&!Dt&&!Vt,Jn=typeof orientation<"u"||Un("mobile"),zt=Jn&&Oe,Pi=Jn&&Kn,Fn=!window.PointerEvent&&window.MSPointerEvent,Jr=!!(window.PointerEvent||Fn),_i="ontouchstart"in window||!!window.TouchEvent,Yn=!window.L_NO_TOUCH&&(_i||Jr),dn=Jn&&Ue,Yt=Jn&&Mt,Kt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,lr=function(){var r=!1;try{var u=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,u),window.removeEventListener("testPassiveEventSupport",w,u)}catch{}return r}(),us=function(){return!!document.createElement("canvas").getContext}(),Ei=!!(document.createElementNS&&De("svg").createSVGRect),on=!!Ei&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ki=!Ei&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var u=r.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),cs=navigator.platform.indexOf("Mac")===0,oi=navigator.platform.indexOf("Linux")===0;function Un(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var Ut={ie:lt,ielt9:Qe,edge:ot,webkit:Oe,android:Le,android23:rt,androidStock:Lt,opera:Ue,chrome:Tt,gecko:Mt,safari:jt,phantom:Vt,opera12:Dt,win:Pn,ie3d:tn,webkit3d:Kn,gecko3d:ln,any3d:xn,mobile:Jn,mobileWebkit:zt,mobileWebkit3d:Pi,msPointer:Fn,pointer:Jr,touch:Yn,touchNative:_i,mobileOpera:dn,mobileGecko:Yt,retina:Kt,passiveEvents:lr,canvas:us,svg:Ei,vml:Ki,inlineSvg:on,mac:cs,linux:oi},ai=Ut.msPointer?"MSPointerDown":"pointerdown",go=Ut.msPointer?"MSPointerMove":"pointermove",Ji=Ut.msPointer?"MSPointerUp":"pointerup",Ai=Ut.msPointer?"MSPointerCancel":"pointercancel",vi={touchstart:ai,touchmove:go,touchend:Ji,touchcancel:Ai},Si={touchstart:_l,touchmove:vo,touchend:vo,touchcancel:vo},Yr={},yi=!1;function hs(r,u,g){return u==="touchstart"&&Ws(),Si[u]?(g=Si[u].bind(this,g),r.addEventListener(vi[u],g,!1),g):(console.warn("wrong event specified:",u),w)}function _o(r,u,g){if(!vi[u]){console.warn("wrong event specified:",u);return}r.removeEventListener(vi[u],g,!1)}function Uo(r){Yr[r.pointerId]=r}function qo(r){Yr[r.pointerId]&&(Yr[r.pointerId]=r)}function Ss(r){delete Yr[r.pointerId]}function Ws(){yi||(document.addEventListener(ai,Uo,!0),document.addEventListener(go,qo,!0),document.addEventListener(Ji,Ss,!0),document.addEventListener(Ai,Ss,!0),yi=!0)}function vo(r,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var g in Yr)u.touches.push(Yr[g]);u.changedTouches=[u],r(u)}}function _l(r,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&mr(u),vo(r,u)}function vl(r){var u={},g,P;for(P in r)g=r[P],u[P]=g&&g.bind?g.bind(r):g;return r=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var $o=200;function za(r,u){r.addEventListener("dblclick",u);var g=0,P;function D(re){if(re.detail!==1){P=re.detail;return}if(!(re.pointerType==="mouse"||re.sourceCapabilities&&!re.sourceCapabilities.firesTouchEvents)){var je=Ds(re);if(!(je.some(function(_t){return _t instanceof HTMLLabelElement&&_t.attributes.for})&&!je.some(function(_t){return _t instanceof HTMLInputElement||_t instanceof HTMLSelectElement}))){var at=Date.now();at-g<=$o?(P++,P===2&&u(vl(re))):P=1,g=at}}}return r.addEventListener("click",D),{dblclick:u,simDblclick:D}}function yl(r,u){r.removeEventListener("dblclick",u.dblclick),r.removeEventListener("click",u.simDblclick)}var yo=Vo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),bo=Vo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),pa=bo==="webkitTransition"||bo==="OTransition"?bo+"End":"transitionend";function Ua(r){return typeof r=="string"?document.getElementById(r):r}function bi(r,u){var g=r.style[u]||r.currentStyle&&r.currentStyle[u];if((!g||g==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(r,null);g=P?P[u]:null}return g==="auto"?null:g}function On(r,u,g){var P=document.createElement(r);return P.className=u||"",g&&g.appendChild(P),P}function vn(r){var u=r.parentNode;u&&u.removeChild(r)}function Zs(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Ms(r){var u=r.parentNode;u&&u.lastChild!==r&&u.appendChild(r)}function fs(r){var u=r.parentNode;u&&u.firstChild!==r&&u.insertBefore(r,u.firstChild)}function wo(r,u){if(r.classList!==void 0)return r.classList.contains(u);var g=Nr(r);return g.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(g)}function bn(r,u){if(r.classList!==void 0)for(var g=M(u),P=0,D=g.length;P<D;P++)r.classList.add(g[P]);else if(!wo(r,u)){var re=Nr(r);Ks(r,(re?re+" ":"")+u)}}function jn(r,u){r.classList!==void 0?r.classList.remove(u):Ks(r,C((" "+Nr(r)+" ").replace(" "+u+" "," ")))}function Ks(r,u){r.className.baseVal===void 0?r.className=u:r.className.baseVal=u}function Nr(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Ur(r,u){"opacity"in r.style?r.style.opacity=u:"filter"in r.style&&qa(r,u)}function qa(r,u){var g=!1,P="DXImageTransform.Microsoft.Alpha";try{g=r.filters.item(P)}catch{if(u===1)return}u=Math.round(u*100),g?(g.Enabled=u!==100,g.Opacity=u):r.style.filter+=" progid:"+P+"(opacity="+u+")"}function Vo(r){for(var u=document.documentElement.style,g=0;g<r.length;g++)if(r[g]in u)return r[g];return!1}function ds(r,u,g){var P=u||new V(0,0);r.style[yo]=(Ut.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(g?" scale("+g+")":"")}function ur(r,u){r._leaflet_pos=u,Ut.any3d?ds(r,u):(r.style.left=u.x+"px",r.style.top=u.y+"px")}function ps(r){return r._leaflet_pos||new V(0,0)}var xo,Bs,ma;if("onselectstart"in document)xo=function(){yn(window,"selectstart",mr)},Bs=function(){Nn(window,"selectstart",mr)};else{var Js=Vo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);xo=function(){if(Js){var r=document.documentElement.style;ma=r[Js],r[Js]="none"}},Bs=function(){Js&&(document.documentElement.style[Js]=ma,ma=void 0)}}function ga(){yn(window,"dragstart",mr)}function Yi(){Nn(window,"dragstart",mr)}var Ts,Ys;function Go(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Lr(),Ts=r,Ys=r.style.outlineStyle,r.style.outlineStyle="none",yn(window,"keydown",Lr))}function Lr(){Ts&&(Ts.style.outlineStyle=Ys,Ts=void 0,Ys=void 0,Nn(window,"keydown",Lr))}function $a(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Ho(r){var u=r.getBoundingClientRect();return{x:u.width/r.offsetWidth||1,y:u.height/r.offsetHeight||1,boundingClientRect:u}}var gn={__proto__:null,TRANSFORM:yo,TRANSITION:bo,TRANSITION_END:pa,get:Ua,getStyle:bi,create:On,remove:vn,empty:Zs,toFront:Ms,toBack:fs,hasClass:wo,addClass:bn,removeClass:jn,setClass:Ks,getClass:Nr,setOpacity:Ur,testProp:Vo,setTransform:ds,setPosition:ur,getPosition:ps,get disableTextSelection(){return xo},get enableTextSelection(){return Bs},disableImageDrag:ga,enableImageDrag:Yi,preventOutline:Go,restoreOutline:Lr,getSizedParentNode:$a,getScale:Ho};function yn(r,u,g,P){if(u&&typeof u=="object")for(var D in u)Xs(r,D,u[D],g);else{u=M(u);for(var re=0,je=u.length;re<je;re++)Xs(r,u[re],g,P)}return this}var Mi="_leaflet_events";function Nn(r,u,g,P){if(arguments.length===1)_a(r),delete r[Mi];else if(u&&typeof u=="object")for(var D in u)Bi(r,D,u[D],g);else if(u=M(u),arguments.length===2)_a(r,function(at){return pe(u,at)!==-1});else for(var re=0,je=u.length;re<je;re++)Bi(r,u[re],g,P);return this}function _a(r,u){for(var g in r[Mi]){var P=g.split(/\d/)[0];(!u||u(P))&&Bi(r,P,null,null,g)}}var Wo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xs(r,u,g,P){var D=u+m(g)+(P?"_"+m(P):"");if(r[Mi]&&r[Mi][D])return this;var re=function(at){return g.call(P||r,at||window.event)},je=re;!Ut.touchNative&&Ut.pointer&&u.indexOf("touch")===0?re=hs(r,u,re):Ut.touch&&u==="dblclick"?re=za(r,re):"addEventListener"in r?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?r.addEventListener(Wo[u]||u,re,Ut.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(re=function(at){at=at||window.event,Qs(r,at)&&je(at)},r.addEventListener(Wo[u],re,!1)):r.addEventListener(u,je,!1):r.attachEvent("on"+u,re),r[Mi]=r[Mi]||{},r[Mi][D]=re}function Bi(r,u,g,P,D){D=D||u+m(g)+(P?"_"+m(P):"");var re=r[Mi]&&r[Mi][D];if(!re)return this;!Ut.touchNative&&Ut.pointer&&u.indexOf("touch")===0?_o(r,u,re):Ut.touch&&u==="dblclick"?yl(r,re):"removeEventListener"in r?r.removeEventListener(Wo[u]||u,re,!1):r.detachEvent("on"+u,re),r[Mi][D]=null}function Ns(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function va(r){return Xs(r,"wheel",Ns),this}function Lo(r){return yn(r,"mousedown touchstart dblclick contextmenu",Ns),r._leaflet_disable_click=!0,this}function mr(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function wi(r){return mr(r),Ns(r),this}function Ds(r){if(r.composedPath)return r.composedPath();for(var u=[],g=r.target;g;)u.push(g),g=g.parentNode;return u}function Va(r,u){if(!u)return new V(r.clientX,r.clientY);var g=Ho(u),P=g.boundingClientRect;return new V((r.clientX-P.left)/g.x-u.clientLeft,(r.clientY-P.top)/g.y-u.clientTop)}var Co=Ut.linux&&Ut.chrome?window.devicePixelRatio:Ut.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Zo(r){return Ut.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Co:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function Qs(r,u){var g=u.relatedTarget;if(!g)return!0;try{for(;g&&g!==r;)g=g.parentNode}catch{return!1}return g!==r}var ko={__proto__:null,on:yn,off:Nn,stopPropagation:Ns,disableScrollPropagation:va,disableClickPropagation:Lo,preventDefault:mr,stop:wi,getPropagationPath:Ds,getMousePosition:Va,getWheelDelta:Zo,isExternalTarget:Qs,addListener:yn,removeListener:Nn},ya=se.extend({run:function(r,u,g,P){this.stop(),this._el=r,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=ps(r),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(r){var u=+new Date-this._startTime,g=this._duration*1e3;u<g?this._runFrame(this._easeOut(u/g),r):(this._runFrame(1),this._complete())},_runFrame:function(r,u){var g=this._startPos.add(this._offset.multiplyBy(r));u&&g._round(),ur(this._el,g),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Mn=se.extend({options:{crs:fe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,u){u=N(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(Ae(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=bo&&Ut.any3d&&!Ut.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),yn(this._proxy,pa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,u,g){if(u=u===void 0?this._zoom:this._limitZoom(u),r=this._limitCenter(Ae(r),u,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=o({animate:g.animate},g.zoom),g.pan=o({animate:g.animate,duration:g.duration},g.pan));var P=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,u,g.zoom):this._tryAnimatedPan(r,g.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(r,u,g.pan&&g.pan.noMoveStart),this},setZoom:function(r,u){return this._loaded?this.setView(this.getCenter(),r,{zoom:u}):(this._zoom=r,this)},zoomIn:function(r,u){return r=r||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,u)},zoomOut:function(r,u){return r=r||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,u)},setZoomAround:function(r,u,g){var P=this.getZoomScale(u),D=this.getSize().divideBy(2),re=r instanceof V?r:this.latLngToContainerPoint(r),je=re.subtract(D).multiplyBy(1-1/P),at=this.containerPointToLatLng(D.add(je));return this.setView(at,u,{zoom:g})},_getBoundsCenterZoom:function(r,u){u=u||{},r=r.getBounds?r.getBounds():de(r);var g=ue(u.paddingTopLeft||u.padding||[0,0]),P=ue(u.paddingBottomRight||u.padding||[0,0]),D=this.getBoundsZoom(r,!1,g.add(P));if(D=typeof u.maxZoom=="number"?Math.min(u.maxZoom,D):D,D===1/0)return{center:r.getCenter(),zoom:D};var re=P.subtract(g).divideBy(2),je=this.project(r.getSouthWest(),D),at=this.project(r.getNorthEast(),D),_t=this.unproject(je.add(at).divideBy(2).add(re),D);return{center:_t,zoom:D}},fitBounds:function(r,u){if(r=de(r),!r.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(r,u);return this.setView(g.center,g.zoom,u)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,u){return this.setView(r,this._zoom,{pan:u})},panBy:function(r,u){if(r=ue(r).round(),u=u||{},!r.x&&!r.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ya,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){bn(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,g,u.duration||.25,u.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,u,g){if(g=g||{},g.animate===!1||!Ut.any3d)return this.setView(r,u,g);this._stop();var P=this.project(this.getCenter()),D=this.project(r),re=this.getSize(),je=this._zoom;r=Ae(r),u=u===void 0?je:u;var at=Math.max(re.x,re.y),_t=at*this.getZoomScale(je,u),At=D.distanceTo(P)||1,$t=1.42,rn=$t*$t;function En(Wn){var Hr=Wn?-1:1,Eu=Wn?_t:at,Ls=_t*_t-at*at+Hr*rn*rn*At*At,Hl=2*Eu*rn*At,To=Ls/Hl,Ja=Math.sqrt(To*To+1)-To,Wl=Ja<1e-9?-18:Math.log(Ja);return Wl}function si(Wn){return(Math.exp(Wn)-Math.exp(-Wn))/2}function Ar(Wn){return(Math.exp(Wn)+Math.exp(-Wn))/2}function pi(Wn){return si(Wn)/Ar(Wn)}var hr=En(0);function xs(Wn){return at*(Ar(hr)/Ar(hr+$t*Wn))}function wl(Wn){return at*(Ar(hr)*pi(hr+$t*Wn)-si(hr))/rn}function ts(Wn){return 1-Math.pow(1-Wn,1.5)}var ji=Date.now(),Ci=(En(1)-hr)/$t,Pu=g.duration?1e3*g.duration:1e3*Ci*.8;function xl(){var Wn=(Date.now()-ji)/Pu,Hr=ts(Wn)*Ci;Wn<=1?(this._flyToFrame=R(xl,this),this._move(this.unproject(P.add(D.subtract(P).multiplyBy(wl(Hr)/At)),je),this.getScaleZoom(at/xs(Hr),je),{flyTo:!0})):this._move(r,u)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),xl.call(this),this},flyToBounds:function(r,u){var g=this._getBoundsCenterZoom(r,u);return this.flyTo(g.center,g.zoom,u)},setMaxBounds:function(r){return r=de(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var u=this.options.minZoom;return this.options.minZoom=r,this._loaded&&u!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var u=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&u!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,u){this._enforcingBounds=!0;var g=this.getCenter(),P=this._limitCenter(g,this._zoom,de(r));return g.equals(P)||this.panTo(P,u),this._enforcingBounds=!1,this},panInside:function(r,u){u=u||{};var g=ue(u.paddingTopLeft||u.padding||[0,0]),P=ue(u.paddingBottomRight||u.padding||[0,0]),D=this.project(this.getCenter()),re=this.project(r),je=this.getPixelBounds(),at=U([je.min.add(g),je.max.subtract(P)]),_t=at.getSize();if(!at.contains(re)){this._enforcingBounds=!0;var At=re.subtract(at.getCenter()),$t=at.extend(re).getSize().subtract(_t);D.x+=At.x<0?-$t.x:$t.x,D.y+=At.y<0?-$t.y:$t.y,this.panTo(this.unproject(D),u),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=o({animate:!1,pan:!0},r===!0?{animate:!0}:r);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),P=u.divideBy(2).round(),D=g.divideBy(2).round(),re=P.subtract(D);return!re.x&&!re.y?this:(r.animate&&r.pan?this.panBy(re):(r.pan&&this._rawPanBy(re),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=o({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=c(this._handleGeolocationResponse,this),g=c(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,g,r):navigator.geolocation.getCurrentPosition(u,g,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var u=r.code,g=r.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var u=r.coords.latitude,g=r.coords.longitude,P=new xe(u,g),D=P.toBounds(r.coords.accuracy*2),re=this._locateOptions;if(re.setView){var je=this.getBoundsZoom(D);this.setView(P,re.maxZoom?Math.min(je,re.maxZoom):je)}var at={latlng:P,bounds:D,timestamp:r.timestamp};for(var _t in r.coords)typeof r.coords[_t]=="number"&&(at[_t]=r.coords[_t]);this.fire("locationfound",at)}},addHandler:function(r,u){if(!u)return this;var g=this[r]=new u(this);return this._handlers.push(g),this.options[r]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),vn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)vn(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,u){var g="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),P=On("div",g,u||this._mapPane);return r&&(this._panes[r]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),u=this.unproject(r.getBottomLeft()),g=this.unproject(r.getTopRight());return new ee(u,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,u,g){r=de(r),g=ue(g||[0,0]);var P=this.getZoom()||0,D=this.getMinZoom(),re=this.getMaxZoom(),je=r.getNorthWest(),at=r.getSouthEast(),_t=this.getSize().subtract(g),At=U(this.project(at,P),this.project(je,P)).getSize(),$t=Ut.any3d?this.options.zoomSnap:1,rn=_t.x/At.x,En=_t.y/At.y,si=u?Math.max(rn,En):Math.min(rn,En);return P=this.getScaleZoom(si,P),$t&&(P=Math.round(P/($t/100))*($t/100),P=u?Math.ceil(P/$t)*$t:Math.floor(P/$t)*$t),Math.max(D,Math.min(re,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new V(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,u){var g=this._getTopLeftPoint(r,u);return new We(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,u){var g=this.options.crs;return u=u===void 0?this._zoom:u,g.scale(r)/g.scale(u)},getScaleZoom:function(r,u){var g=this.options.crs;u=u===void 0?this._zoom:u;var P=g.zoom(r*g.scale(u));return isNaN(P)?1/0:P},project:function(r,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(Ae(r),u)},unproject:function(r,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(ue(r),u)},layerPointToLatLng:function(r){var u=ue(r).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(r){var u=this.project(Ae(r))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(Ae(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(de(r))},distance:function(r,u){return this.options.crs.distance(Ae(r),Ae(u))},containerPointToLayerPoint:function(r){return ue(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return ue(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var u=this.containerPointToLayerPoint(ue(r));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ae(r)))},mouseEventToContainerPoint:function(r){return Va(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var u=this._container=Ua(r);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");yn(u,"scroll",this._onScroll,this),this._containerId=m(u)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ut.any3d,bn(r,"leaflet-container"+(Ut.touch?" leaflet-touch":"")+(Ut.retina?" leaflet-retina":"")+(Ut.ielt9?" leaflet-oldie":"")+(Ut.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=bi(r,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ur(this._mapPane,new V(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bn(r.markerPane,"leaflet-zoom-hide"),bn(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,u,g){ur(this._mapPane,new V(0,0));var P=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var D=this._zoom!==u;this._moveStart(D,g)._move(r,u)._moveEnd(D),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(r,u){return r&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(r,u,g,P){u===void 0&&(u=this._zoom);var D=this._zoom!==u;return this._zoom=u,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),P?g&&g.pinch&&this.fire("zoom",g):((D||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){ur(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[m(this._container)]=this;var u=r?Nn:yn;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ut.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,u){for(var g=[],P,D=u==="mouseout"||u==="mouseover",re=r.target||r.srcElement,je=!1;re;){if(P=this._targets[m(re)],P&&(u==="click"||u==="preclick")&&this._draggableMoved(P)){je=!0;break}if(P&&P.listens(u,!0)&&(D&&!Qs(re,r)||(g.push(P),D))||re===this._container)break;re=re.parentNode}return!g.length&&!je&&!D&&this.listens(u,!0)&&(g=[this]),g},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var u=r.target||r.srcElement;if(!(!this._loaded||u._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(u))){var g=r.type;g==="mousedown"&&Go(u),this._fireDOMEvent(r,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,u,g){if(r.type==="click"){var P=o({},r);P.type="preclick",this._fireDOMEvent(P,P.type,g)}var D=this._findEventTargets(r,u);if(g){for(var re=[],je=0;je<g.length;je++)g[je].listens(u,!0)&&re.push(g[je]);D=re.concat(D)}if(D.length){u==="contextmenu"&&mr(r);var at=D[0],_t={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var At=at.getLatLng&&(!at._radius||at._radius<=10);_t.containerPoint=At?this.latLngToContainerPoint(at.getLatLng()):this.mouseEventToContainerPoint(r),_t.layerPoint=this.containerPointToLayerPoint(_t.containerPoint),_t.latlng=At?at.getLatLng():this.layerPointToLatLng(_t.layerPoint)}for(je=0;je<D.length;je++)if(D[je].fire(u,_t,!0),_t.originalEvent._stopped||D[je].options.bubblingMouseEvents===!1&&pe(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,u=this._handlers.length;r<u;r++)this._handlers[r].disable()},whenReady:function(r,u){return this._loaded?r.call(u||this,{target:this}):this.on("load",r,u),this},_getMapPanePos:function(){return ps(this._mapPane)||new V(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,u){var g=r&&u!==void 0?this._getNewPixelOrigin(r,u):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,u){var g=this.getSize()._divideBy(2);return this.project(r,u)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,u,g){var P=this._getNewPixelOrigin(g,u);return this.project(r,u)._subtract(P)},_latLngBoundsToNewLayerBounds:function(r,u,g){var P=this._getNewPixelOrigin(g,u);return U([this.project(r.getSouthWest(),u)._subtract(P),this.project(r.getNorthWest(),u)._subtract(P),this.project(r.getSouthEast(),u)._subtract(P),this.project(r.getNorthEast(),u)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,u,g){if(!g)return r;var P=this.project(r,u),D=this.getSize().divideBy(2),re=new We(P.subtract(D),P.add(D)),je=this._getBoundsOffset(re,g,u);return Math.abs(je.x)<=1&&Math.abs(je.y)<=1?r:this.unproject(P.add(je),u)},_limitOffset:function(r,u){if(!u)return r;var g=this.getPixelBounds(),P=new We(g.min.add(r),g.max.add(r));return r.add(this._getBoundsOffset(P,u))},_getBoundsOffset:function(r,u,g){var P=U(this.project(u.getNorthEast(),g),this.project(u.getSouthWest(),g)),D=P.min.subtract(r.min),re=P.max.subtract(r.max),je=this._rebound(D.x,-re.x),at=this._rebound(D.y,-re.y);return new V(je,at)},_rebound:function(r,u){return r+u>0?Math.round(r-u)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(u))},_limitZoom:function(r){var u=this.getMinZoom(),g=this.getMaxZoom(),P=Ut.any3d?this.options.zoomSnap:1;return P&&(r=Math.round(r/P)*P),Math.max(u,Math.min(g,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){jn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,u){var g=this._getCenterOffset(r)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,u),!0)},_createAnimProxy:function(){var r=this._proxy=On("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(u){var g=yo,P=this._proxy.style[g];ds(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),P===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){vn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),u=this.getZoom();ds(this._proxy,this.project(r,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,u,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(u),D=this._getCenterOffset(r)._divideBy(1-1/P);return g.animate!==!0&&!this.getSize().contains(D)?!1:(R(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(r,u,!0)},this),!0)},_animateZoom:function(r,u,g,P){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=u,bn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:u,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&jn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ba(r,u){return new Mn(r,u)}var sn=W.extend({options:{position:"topright"},initialize:function(r){N(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var u=this._map;return u&&u.removeControl(this),this.options.position=r,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var u=this._container=this.onAdd(r),g=this.getPosition(),P=r._controlCorners[g];return bn(u,"leaflet-control"),g.indexOf("bottom")!==-1?P.insertBefore(u,P.firstChild):P.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(vn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Xr=function(r){return new sn(r)};Mn.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},u="leaflet-",g=this._controlContainer=On("div",u+"control-container",this._container);function P(D,re){var je=u+D+" "+u+re;r[D+re]=On("div",je,g)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)vn(this._controlCorners[r]);vn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Po=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,u,g,P){return g<P?-1:P<g?1:0}},initialize:function(r,u,g){N(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in r)this._addLayer(r[P],P);for(P in u)this._addLayer(u[P],P,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return sn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,u){return this._addLayer(r,u),this._map?this._update():this},addOverlay:function(r,u){return this._addLayer(r,u,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var u=this._getLayer(m(r));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){bn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(bn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):jn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return jn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",u=this._container=On("div",r),g=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Lo(u),va(u);var P=this._section=On("section",r+"-list");g&&(this._map.on("click",this.collapse,this),yn(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var D=this._layersLink=On("a",r+"-toggle",u);D.href="#",D.title="Layers",D.setAttribute("role","button"),yn(D,{keydown:function(re){re.keyCode===13&&this._expandSafely()},click:function(re){mr(re),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=On("div",r+"-base",P),this._separator=On("div",r+"-separator",P),this._overlaysList=On("div",r+"-overlays",P),u.appendChild(P)},_getLayer:function(r){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&m(this._layers[u].layer)===r)return this._layers[u]},_addLayer:function(r,u,g){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:u,overlay:g}),this.options.sortLayers&&this._layers.sort(c(function(P,D){return this.options.sortFunction(P.layer,D.layer,P.name,D.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Zs(this._baseLayersList),Zs(this._overlaysList),this._layerControlInputs=[];var r,u,g,P,D=0;for(g=0;g<this._layers.length;g++)P=this._layers[g],this._addItem(P),u=u||P.overlay,r=r||!P.overlay,D+=P.overlay?0:1;return this.options.hideSingleBase&&(r=r&&D>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=u&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var u=this._getLayer(m(r.target)),g=u.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;g&&this._map.fire(g,u)},_createRadioElement:function(r,u){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(u?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=g,P.firstChild},_addItem:function(r){var u=document.createElement("label"),g=this._map.hasLayer(r.layer),P;r.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=g):P=this._createRadioElement("leaflet-base-layers_"+m(this),g),this._layerControlInputs.push(P),P.layerId=m(r.layer),yn(P,"click",this._onInputClick,this);var D=document.createElement("span");D.innerHTML=" "+r.name;var re=document.createElement("span");u.appendChild(re),re.appendChild(P),re.appendChild(D);var je=r.overlay?this._overlaysList:this._baseLayersList;return je.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,u,g,P=[],D=[];this._handlingClick=!0;for(var re=r.length-1;re>=0;re--)u=r[re],g=this._getLayer(u.layerId).layer,u.checked?P.push(g):u.checked||D.push(g);for(re=0;re<D.length;re++)this._map.hasLayer(D[re])&&this._map.removeLayer(D[re]);for(re=0;re<P.length;re++)this._map.hasLayer(P[re])||this._map.addLayer(P[re]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,u,g,P=this._map.getZoom(),D=r.length-1;D>=0;D--)u=r[D],g=this._getLayer(u.layerId).layer,u.disabled=g.options.minZoom!==void 0&&P<g.options.minZoom||g.options.maxZoom!==void 0&&P>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,yn(r,"click",mr),this.expand();var u=this;setTimeout(function(){Nn(r,"click",mr),u._preventClick=!1})}}),eo=function(r,u,g){return new Po(r,u,g)},li=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var u="leaflet-control-zoom",g=On("div",u+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,u+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,u+"-out",g,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,u,g,P,D){var re=On("a",g,P);return re.innerHTML=r,re.href="#",re.title=u,re.setAttribute("role","button"),re.setAttribute("aria-label",u),Lo(re),yn(re,"click",wi),yn(re,"click",D,this),yn(re,"click",this._refocusOnMap,this),re},_updateDisabled:function(){var r=this._map,u="leaflet-disabled";jn(this._zoomInButton,u),jn(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(bn(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(bn(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Mn.mergeOptions({zoomControl:!0}),Mn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new li,this.addControl(this.zoomControl))});var wa=function(r){return new li(r)},ms=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var u="leaflet-control-scale",g=On("div",u),P=this.options;return this._addScales(P,u+"-line",g),r.on(P.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),g},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,u,g){r.metric&&(this._mScale=On("div",u,g)),r.imperial&&(this._iScale=On("div",u,g))},_update:function(){var r=this._map,u=r.getSize().y/2,g=r.distance(r.containerPointToLatLng([0,u]),r.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(g)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var u=this._getRoundNum(r),g=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,g,u/r)},_updateImperial:function(r){var u=r*3.2808399,g,P,D;u>5280?(g=u/5280,P=this._getRoundNum(g),this._updateScale(this._iScale,P+" mi",P/g)):(D=this._getRoundNum(u),this._updateScale(this._iScale,D+" ft",D/u))},_updateScale:function(r,u,g){r.style.width=Math.round(this.options.maxWidth*g)+"px",r.innerHTML=u},_getRoundNum:function(r){var u=Math.pow(10,(Math.floor(r)+"").length-1),g=r/u;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,u*g}}),Ko=function(r){return new ms(r)},Jo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ti=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ut.inlineSvg?Jo+" ":"")+"Leaflet</a>"},initialize:function(r){N(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=On("div","leaflet-control-attribution"),Lo(this._container);for(var u in r._layers)r._layers[u].getAttribution&&this.addAttribution(r._layers[u].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var u in this._attributions)this._attributions[u]&&r.push(u);var g=[];this.options.prefix&&g.push(this.options.prefix),r.length&&g.push(r.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});Mn.mergeOptions({attributionControl:!0}),Mn.addInitHook(function(){this.options.attributionControl&&new Ti().addTo(this)});var Yo=function(r){return new Ti(r)};sn.Layers=Po,sn.Zoom=li,sn.Scale=ms,sn.Attribution=Ti,Xr.layers=eo,Xr.zoom=wa,Xr.scale=Ko,Xr.attribution=Yo;var Cr=W.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Cr.addTo=function(r,u){return r.addHandler(u,this),this};var Ga={Events:X},Eo=Ut.touch?"touchstart mousedown":"mousedown",Ni=se.extend({options:{clickTolerance:3},initialize:function(r,u,g,P){N(this,P),this._element=r,this._dragStartTarget=u||r,this._preventOutline=g},enable:function(){this._enabled||(yn(this._dragStartTarget,Eo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ni._dragging===this&&this.finishDrag(!0),Nn(this._dragStartTarget,Eo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!wo(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Ni._dragging===this&&this.finishDrag();return}if(!(Ni._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Ni._dragging=this,this._preventOutline&&Go(this._element),ga(),xo(),!this._moving)){this.fire("down");var u=r.touches?r.touches[0]:r,g=$a(this._element);this._startPoint=new V(u.clientX,u.clientY),this._startPos=ps(this._element),this._parentScale=Ho(g);var P=r.type==="mousedown";yn(document,P?"mousemove":"touchmove",this._onMove,this),yn(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var u=r.touches&&r.touches.length===1?r.touches[0]:r,g=new V(u.clientX,u.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,mr(r),this._moved||(this.fire("dragstart"),this._moved=!0,bn(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),ur(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){jn(document.body,"leaflet-dragging"),this._lastTarget&&(jn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Nn(document,"mousemove touchmove",this._onMove,this),Nn(document,"mouseup touchend touchcancel",this._onUp,this),Yi(),Bs();var u=this._moved&&this._moving;this._moving=!1,Ni._dragging=!1,u&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Xo(r,u,g){var P,D=[1,4,2,8],re,je,at,_t,At,$t,rn,En;for(re=0,$t=r.length;re<$t;re++)r[re]._code=yt(r[re],u);for(at=0;at<4;at++){for(rn=D[at],P=[],re=0,$t=r.length,je=$t-1;re<$t;je=re++)_t=r[re],At=r[je],_t._code&rn?At._code&rn||(En=tt(At,_t,rn,u,g),En._code=yt(En,u),P.push(En)):(At._code&rn&&(En=tt(At,_t,rn,u,g),En._code=yt(En,u),P.push(En)),P.push(_t));r=P}return r}function xa(r,u){var g,P,D,re,je,at,_t,At,$t;if(!r||r.length===0)throw new Error("latlngs not passed");Wt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var rn=Ae([0,0]),En=de(r),si=En.getNorthWest().distanceTo(En.getSouthWest())*En.getNorthEast().distanceTo(En.getNorthWest());si<1700&&(rn=La(r));var Ar=r.length,pi=[];for(g=0;g<Ar;g++){var hr=Ae(r[g]);pi.push(u.project(Ae([hr.lat-rn.lat,hr.lng-rn.lng])))}for(at=_t=At=0,g=0,P=Ar-1;g<Ar;P=g++)D=pi[g],re=pi[P],je=D.y*re.x-re.y*D.x,_t+=(D.x+re.x)*je,At+=(D.y+re.y)*je,at+=je*3;at===0?$t=pi[0]:$t=[_t/at,At/at];var xs=u.unproject(ue($t));return Ae([xs.lat+rn.lat,xs.lng+rn.lng])}function La(r){for(var u=0,g=0,P=0,D=0;D<r.length;D++){var re=Ae(r[D]);u+=re.lat,g+=re.lng,P++}return Ae([u/P,g/P])}var Qo={__proto__:null,clipPolygon:Xo,polygonCenter:xa,centroid:La};function to(r,u){if(!u||!r.length)return r.slice();var g=u*u;return r=Z(r,g),r=gr(r,g),r}function Ao(r,u,g){return Math.sqrt(qt(r,u,g,!0))}function no(r,u,g){return qt(r,u,g)}function gr(r,u){var g=r.length,P=typeof Uint8Array<"u"?Uint8Array:Array,D=new P(g);D[0]=D[g-1]=1,x(r,D,u,0,g-1);var re,je=[];for(re=0;re<g;re++)D[re]&&je.push(r[re]);return je}function x(r,u,g,P,D){var re=0,je,at,_t;for(at=P+1;at<=D-1;at++)_t=qt(r[at],r[P],r[D],!0),_t>re&&(je=at,re=_t);re>g&&(u[je]=1,x(r,u,g,P,je),x(r,u,g,je,D))}function Z(r,u){for(var g=[r[0]],P=1,D=0,re=r.length;P<re;P++)Bt(r[P],r[D])>u&&(g.push(r[P]),D=P);return D<re-1&&g.push(r[re-1]),g}var Se;function qe(r,u,g,P,D){var re=P?Se:yt(r,g),je=yt(u,g),at,_t,At;for(Se=je;;){if(!(re|je))return[r,u];if(re&je)return!1;at=re||je,_t=tt(r,u,at,g,D),At=yt(_t,g),at===re?(r=_t,re=At):(u=_t,je=At)}}function tt(r,u,g,P,D){var re=u.x-r.x,je=u.y-r.y,at=P.min,_t=P.max,At,$t;return g&8?(At=r.x+re*(_t.y-r.y)/je,$t=_t.y):g&4?(At=r.x+re*(at.y-r.y)/je,$t=at.y):g&2?(At=_t.x,$t=r.y+je*(_t.x-r.x)/re):g&1&&(At=at.x,$t=r.y+je*(at.x-r.x)/re),new V(At,$t,D)}function yt(r,u){var g=0;return r.x<u.min.x?g|=1:r.x>u.max.x&&(g|=2),r.y<u.min.y?g|=4:r.y>u.max.y&&(g|=8),g}function Bt(r,u){var g=u.x-r.x,P=u.y-r.y;return g*g+P*P}function qt(r,u,g,P){var D=u.x,re=u.y,je=g.x-D,at=g.y-re,_t=je*je+at*at,At;return _t>0&&(At=((r.x-D)*je+(r.y-re)*at)/_t,At>1?(D=g.x,re=g.y):At>0&&(D+=je*At,re+=at*At)),je=r.x-D,at=r.y-re,P?je*je+at*at:new V(D,re)}function Wt(r){return!$(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function nn(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Wt(r)}function pn(r,u){var g,P,D,re,je,at,_t,At;if(!r||r.length===0)throw new Error("latlngs not passed");Wt(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var $t=Ae([0,0]),rn=de(r),En=rn.getNorthWest().distanceTo(rn.getSouthWest())*rn.getNorthEast().distanceTo(rn.getNorthWest());En<1700&&($t=La(r));var si=r.length,Ar=[];for(g=0;g<si;g++){var pi=Ae(r[g]);Ar.push(u.project(Ae([pi.lat-$t.lat,pi.lng-$t.lng])))}for(g=0,P=0;g<si-1;g++)P+=Ar[g].distanceTo(Ar[g+1])/2;if(P===0)At=Ar[0];else for(g=0,re=0;g<si-1;g++)if(je=Ar[g],at=Ar[g+1],D=je.distanceTo(at),re+=D,re>P){_t=(re-P)/D,At=[at.x-_t*(at.x-je.x),at.y-_t*(at.y-je.y)];break}var hr=u.unproject(ue(At));return Ae([hr.lat+$t.lat,hr.lng+$t.lng])}var Bn={__proto__:null,simplify:to,pointToSegmentDistance:Ao,closestPointOnSegment:no,clipSegment:qe,_getEdgeIntersection:tt,_getBitCode:yt,_sqClosestPointOnSegment:qt,isFlat:Wt,_flat:nn,polylineCenter:pn},ir={project:function(r){return new V(r.lng,r.lat)},unproject:function(r){return new xe(r.y,r.x)},bounds:new We([-180,-90],[180,90])},In={R:6378137,R_MINOR:6356752314245179e-9,bounds:new We([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var u=Math.PI/180,g=this.R,P=r.lat*u,D=this.R_MINOR/g,re=Math.sqrt(1-D*D),je=re*Math.sin(P),at=Math.tan(Math.PI/4-P/2)/Math.pow((1-je)/(1+je),re/2);return P=-g*Math.log(Math.max(at,1e-10)),new V(r.lng*u*g,P)},unproject:function(r){for(var u=180/Math.PI,g=this.R,P=this.R_MINOR/g,D=Math.sqrt(1-P*P),re=Math.exp(-r.y/g),je=Math.PI/2-2*Math.atan(re),at=0,_t=.1,At;at<15&&Math.abs(_t)>1e-7;at++)At=D*Math.sin(je),At=Math.pow((1-At)/(1+At),D/2),_t=Math.PI/2-2*Math.atan(re*At)-je,je+=_t;return new xe(je*u,r.x*u/g)}},qn={__proto__:null,LonLat:ir,Mercator:In,SphericalMercator:st},kr=o({},Ie,{code:"EPSG:3395",projection:In,transformation:function(){var r=.5/(Math.PI*In.R);return ae(r,.5,-r,.5)}()}),wr=o({},Ie,{code:"EPSG:4326",projection:ir,transformation:ae(1/180,1,-1/180,.5)}),xi=o({},_e,{projection:ir,transformation:ae(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,u){var g=u.lng-r.lng,P=u.lat-r.lat;return Math.sqrt(g*g+P*P)},infinite:!0});_e.Earth=Ie,_e.EPSG3395=kr,_e.EPSG3857=fe,_e.EPSG900913=Re,_e.EPSG4326=wr,_e.Simple=xi;var Xn=se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[m(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[m(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var u=r.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var g=this.getEvents();u.on(g,this),this.once("remove",function(){u.off(g,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Mn.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var u=m(r);return this._layers[u]?this:(this._layers[u]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var u=m(r);return this._layers[u]?(this._loaded&&r.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return m(r)in this._layers},eachLayer:function(r,u){for(var g in this._layers)r.call(u,this._layers[g]);return this},_addLayers:function(r){r=r?$(r)?r:[r]:[];for(var u=0,g=r.length;u<g;u++)this.addLayer(r[u])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[m(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var u=m(r);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,u=-1/0,g=this._getZoomSpan();for(var P in this._zoomBoundLayers){var D=this._zoomBoundLayers[P].options;r=D.minZoom===void 0?r:Math.min(r,D.minZoom),u=D.maxZoom===void 0?u:Math.max(u,D.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=r===1/0?void 0:r,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qr=Xn.extend({initialize:function(r,u){N(this,u),this._layers={};var g,P;if(r)for(g=0,P=r.length;g<P;g++)this.addLayer(r[g])},addLayer:function(r){var u=this.getLayerId(r);return this._layers[u]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var u=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(r){var u=typeof r=="number"?r:this.getLayerId(r);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var u=Array.prototype.slice.call(arguments,1),g,P;for(g in this._layers)P=this._layers[g],P[r]&&P[r].apply(P,u);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,u){for(var g in this._layers)r.call(u,this._layers[g]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return m(r)}}),Ha=function(r,u){return new Qr(r,u)},ei=Qr.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Qr.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Qr.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new ee;for(var u in this._layers){var g=this._layers[u];r.extend(g.getBounds?g.getBounds():g.getLatLng())}return r}}),Ca=function(r,u){return new ei(r,u)},Xi=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){N(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,u){var g=this._getIconUrl(r);if(!g){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(g,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(P,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(r,u){var g=this.options,P=g[u+"Size"];typeof P=="number"&&(P=[P,P]);var D=ue(P),re=ue(u==="shadow"&&g.shadowAnchor||g.iconAnchor||D&&D.divideBy(2,!0));r.className="leaflet-marker-"+u+" "+(g.className||""),re&&(r.style.marginLeft=-re.x+"px",r.style.marginTop=-re.y+"px"),D&&(r.style.width=D.x+"px",r.style.height=D.y+"px")},_createImg:function(r,u){return u=u||document.createElement("img"),u.src=r,u},_getIconUrl:function(r){return Ut.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function ka(r){return new Xi(r)}var Os=Xi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Os.imagePath!="string"&&(Os.imagePath=this._detectIconPath()),(this.options.imagePath||Os.imagePath)+Xi.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var u=function(g,P,D){var re=P.exec(g);return re&&re[D]};return r=u(r,/^url\((['"])?(.+)\1\)$/,2),r&&u(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=On("div","leaflet-default-icon-path",document.body),u=bi(r,"background-image")||bi(r,"backgroundImage");if(document.body.removeChild(r),u=this._stripUrl(u),u)return u;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Is=Cr.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Ni(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bn(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&jn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var u=this._marker,g=u._map,P=this._marker.options.autoPanSpeed,D=this._marker.options.autoPanPadding,re=ps(u._icon),je=g.getPixelBounds(),at=g.getPixelOrigin(),_t=U(je.min._subtract(at).add(D),je.max._subtract(at).subtract(D));if(!_t.contains(re)){var At=ue((Math.max(_t.max.x,re.x)-_t.max.x)/(je.max.x-_t.max.x)-(Math.min(_t.min.x,re.x)-_t.min.x)/(je.min.x-_t.min.x),(Math.max(_t.max.y,re.y)-_t.max.y)/(je.max.y-_t.max.y)-(Math.min(_t.min.y,re.y)-_t.min.y)/(je.min.y-_t.min.y)).multiplyBy(P);g.panBy(At,{animate:!1}),this._draggable._newPos._add(At),this._draggable._startPos._add(At),ur(u._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=R(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,r)))},_onDrag:function(r){var u=this._marker,g=u._shadow,P=ps(u._icon),D=u._map.layerPointToLatLng(P);g&&ur(g,P),u._latlng=D,r.latlng=D,r.oldLatLng=this._oldLatLng,u.fire("move",r).fire("drag",r)},_onDragEnd:function(r){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),xr=Xn.extend({options:{icon:new Os,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,u){N(this,u),this._latlng=Ae(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var u=this._latlng;return this._latlng=Ae(r),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=r.icon.createIcon(this._icon),P=!1;g!==this._icon&&(this._icon&&this._removeIcon(),P=!0,r.title&&(g.title=r.title),g.tagName==="IMG"&&(g.alt=r.alt||"")),bn(g,u),r.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yn(g,"focus",this._panOnFocus,this);var D=r.icon.createShadow(this._shadow),re=!1;D!==this._shadow&&(this._removeShadow(),re=!0),D&&(bn(D,u),D.alt=""),this._shadow=D,r.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),D&&re&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nn(this._icon,"focus",this._panOnFocus,this),vn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&vn(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&ur(this._icon,r),this._shadow&&ur(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var u=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(bn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Is)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Is(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Ur(this._icon,r),this._shadow&&Ur(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var u=this.options.icon.options,g=u.iconSize?ue(u.iconSize):ue(0,0),P=u.iconAnchor?ue(u.iconAnchor):ue(0,0);r.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:g.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ea(r,u){return new xr(r,u)}var ui=Xn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return N(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ti=ui.extend({options:{fill:!0,radius:10},initialize:function(r,u){N(this,u),this._latlng=Ae(r),this._radius=this.options.radius},setLatLng:function(r){var u=this._latlng;return this._latlng=Ae(r),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var u=r&&r.radius||this._radius;return ui.prototype.setStyle.call(this,r),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,u=this._radiusY||r,g=this._clickTolerance(),P=[r+g,u+g];this._pxBounds=new We(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ta(r,u){return new ti(r,u)}var qr=ti.extend({initialize:function(r,u,g){if(typeof u=="number"&&(u=o({},g,{radius:u})),N(this,u),this._latlng=Ae(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new ee(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:ui.prototype.setStyle,_project:function(){var r=this._latlng.lng,u=this._latlng.lat,g=this._map,P=g.options.crs;if(P.distance===Ie.distance){var D=Math.PI/180,re=this._mRadius/Ie.R/D,je=g.project([u+re,r]),at=g.project([u-re,r]),_t=je.add(at).divideBy(2),At=g.unproject(_t).lat,$t=Math.acos((Math.cos(re*D)-Math.sin(u*D)*Math.sin(At*D))/(Math.cos(u*D)*Math.cos(At*D)))/D;(isNaN($t)||$t===0)&&($t=re/Math.cos(Math.PI/180*u)),this._point=_t.subtract(g.getPixelOrigin()),this._radius=isNaN($t)?0:_t.x-g.project([At,r-$t]).x,this._radiusY=_t.y-je.y}else{var rn=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(rn).x}this._updateBounds()}});function Rs(r,u,g){return new qr(r,u,g)}var Li=ui.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,u){N(this,u),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var u=1/0,g=null,P=qt,D,re,je=0,at=this._parts.length;je<at;je++)for(var _t=this._parts[je],At=1,$t=_t.length;At<$t;At++){D=_t[At-1],re=_t[At];var rn=P(r,D,re,!0);rn<u&&(u=rn,g=P(r,D,re))}return g&&(g.distance=Math.sqrt(u)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,u){return u=u||this._defaultShape(),r=Ae(r),u.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new ee,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Wt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var u=[],g=Wt(r),P=0,D=r.length;P<D;P++)g?(u[P]=Ae(r[P]),this._bounds.extend(u[P])):u[P]=this._convertLatLngs(r[P]);return u},_project:function(){var r=new We;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),u=new V(r,r);this._rawPxBounds&&(this._pxBounds=new We([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(r,u,g){var P=r[0]instanceof xe,D=r.length,re,je;if(P){for(je=[],re=0;re<D;re++)je[re]=this._map.latLngToLayerPoint(r[re]),g.extend(je[re]);u.push(je)}else for(re=0;re<D;re++)this._projectLatlngs(r[re],u,g)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,g,P,D,re,je,at,_t;for(g=0,D=0,re=this._rings.length;g<re;g++)for(_t=this._rings[g],P=0,je=_t.length;P<je-1;P++)at=qe(_t[P],_t[P+1],r,P,!0),at&&(u[D]=u[D]||[],u[D].push(at[0]),(at[1]!==_t[P+1]||P===je-2)&&(u[D].push(at[1]),D++))}},_simplifyPoints:function(){for(var r=this._parts,u=this.options.smoothFactor,g=0,P=r.length;g<P;g++)r[g]=to(r[g],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,u){var g,P,D,re,je,at,_t=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(g=0,re=this._parts.length;g<re;g++)for(at=this._parts[g],P=0,je=at.length,D=je-1;P<je;D=P++)if(!(!u&&P===0)&&Ao(r,at[D],at[P])<=_t)return!0;return!1}});function Wa(r,u){return new Li(r,u)}Li._flat=nn;var Pr=Li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var u=Li.prototype._convertLatLngs.call(this,r),g=u.length;return g>=2&&u[0]instanceof xe&&u[0].equals(u[g-1])&&u.pop(),u},_setLatLngs:function(r){Li.prototype._setLatLngs.call(this,r),Wt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Wt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,u=this.options.weight,g=new V(u,u);if(r=new We(r.min.subtract(g),r.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,D=this._rings.length,re;P<D;P++)re=Xo(this._rings[P],r,!0),re.length&&this._parts.push(re)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var u=!1,g,P,D,re,je,at,_t,At;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(re=0,_t=this._parts.length;re<_t;re++)for(g=this._parts[re],je=0,At=g.length,at=At-1;je<At;at=je++)P=g[je],D=g[at],P.y>r.y!=D.y>r.y&&r.x<(D.x-P.x)*(r.y-P.y)/(D.y-P.y)+P.x&&(u=!u);return u||Li.prototype._containsPoint.call(this,r,!0)}});function gs(r,u){return new Pr(r,u)}var Di=ei.extend({initialize:function(r,u){N(this,u),this._layers={},r&&this.addData(r)},addData:function(r){var u=$(r)?r:r.features,g,P,D;if(u){for(g=0,P=u.length;g<P;g++)D=u[g],(D.geometries||D.geometry||D.features||D.coordinates)&&this.addData(D);return this}var re=this.options;if(re.filter&&!re.filter(r))return this;var je=So(r,re);return je?(je.feature=Oi(r),je.defaultOptions=je.options,this.resetStyle(je),re.onEachFeature&&re.onEachFeature(r,je),this.addLayer(je)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=o({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(u){this._setLayerStyle(u,r)},this)},_setLayerStyle:function(r,u){r.setStyle&&(typeof u=="function"&&(u=u(r.feature)),r.setStyle(u))}});function So(r,u){var g=r.type==="Feature"?r.geometry:r,P=g?g.coordinates:null,D=[],re=u&&u.pointToLayer,je=u&&u.coordsToLatLng||_s,at,_t,At,$t;if(!P&&!g)return null;switch(g.type){case"Point":return at=je(P),Fs(re,r,at,u);case"MultiPoint":for(At=0,$t=P.length;At<$t;At++)at=je(P[At]),D.push(Fs(re,r,at,u));return new ei(D);case"LineString":case"MultiLineString":return _t=Dr(P,g.type==="LineString"?0:1,je),new Li(_t,u);case"Polygon":case"MultiPolygon":return _t=Dr(P,g.type==="Polygon"?1:2,je),new Pr(_t,u);case"GeometryCollection":for(At=0,$t=g.geometries.length;At<$t;At++){var rn=So({geometry:g.geometries[At],type:"Feature",properties:r.properties},u);rn&&D.push(rn)}return new ei(D);case"FeatureCollection":for(At=0,$t=g.features.length;At<$t;At++){var En=So(g.features[At],u);En&&D.push(En)}return new ei(D);default:throw new Error("Invalid GeoJSON object.")}}function Fs(r,u,g,P){return r?r(u,g):new xr(g,P&&P.markersInheritOptions&&P)}function _s(r){return new xe(r[1],r[0],r[2])}function Dr(r,u,g){for(var P=[],D=0,re=r.length,je;D<re;D++)je=u?Dr(r[D],u-1,g):(g||_s)(r[D]),P.push(je);return P}function Mr(r,u){return r=Ae(r),r.alt!==void 0?[A(r.lng,u),A(r.lat,u),A(r.alt,u)]:[A(r.lng,u),A(r.lat,u)]}function Qi(r,u,g,P){for(var D=[],re=0,je=r.length;re<je;re++)D.push(u?Qi(r[re],Wt(r[re])?0:u-1,g,P):Mr(r[re],P));return!u&&g&&D.length>0&&D.push(D[0].slice()),D}function ci(r,u){return r.feature?o({},r.feature,{geometry:u}):Oi(u)}function Oi(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var js={toGeoJSON:function(r){return ci(this,{type:"Point",coordinates:Mr(this.getLatLng(),r)})}};xr.include(js),qr.include(js),ti.include(js),Li.include({toGeoJSON:function(r){var u=!Wt(this._latlngs),g=Qi(this._latlngs,u?1:0,!1,r);return ci(this,{type:(u?"Multi":"")+"LineString",coordinates:g})}}),Pr.include({toGeoJSON:function(r){var u=!Wt(this._latlngs),g=u&&!Wt(this._latlngs[0]),P=Qi(this._latlngs,g?2:u?1:0,!0,r);return u||(P=[P]),ci(this,{type:(g?"Multi":"")+"Polygon",coordinates:P})}}),Qr.include({toMultiPoint:function(r){var u=[];return this.eachLayer(function(g){u.push(g.toGeoJSON(r).geometry.coordinates)}),ci(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(r){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(r);var g=u==="GeometryCollection",P=[];return this.eachLayer(function(D){if(D.toGeoJSON){var re=D.toGeoJSON(r);if(g)P.push(re.geometry);else{var je=Oi(re);je.type==="FeatureCollection"?P.push.apply(P,je.features):P.push(je)}}}),g?ci(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function Ii(r,u){return new Di(r,u)}var cr=Ii,vs=Xn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,u,g){this._url=r,this._bounds=de(u),N(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){vn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Ms(this._image),this},bringToBack:function(){return this._map&&fs(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=de(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",u=this._image=r?this._url:On("img");if(bn(u,"leaflet-image-layer"),this._zoomAnimated&&bn(u,"leaflet-zoom-animated"),this.options.className&&bn(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onload=c(this.fire,this,"load"),u.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(r){var u=this._map.getZoomScale(r.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;ds(this._image,g,u)},_reset:function(){var r=this._image,u=new We(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=u.getSize();ur(r,u.min),r.style.width=g.x+"px",r.style.height=g.y+"px"},_updateOpacity:function(){Ur(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),ni=function(r,u,g){return new vs(r,u,g)},$r=vs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",u=this._image=r?this._url:On("video");if(bn(u,"leaflet-image-layer"),this._zoomAnimated&&bn(u,"leaflet-zoom-animated"),this.options.className&&bn(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onloadeddata=c(this.fire,this,"load"),r){for(var g=u.getElementsByTagName("source"),P=[],D=0;D<g.length;D++)P.push(g[D].src);this._url=g.length>0?P:[u.src];return}$(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var re=0;re<this._url.length;re++){var je=On("source");je.src=this._url[re],u.appendChild(je)}}});function Mo(r,u,g){return new $r(r,u,g)}var Pa=vs.extend({_initImage:function(){var r=this._image=this._url;bn(r,"leaflet-image-layer"),this._zoomAnimated&&bn(r,"leaflet-zoom-animated"),this.options.className&&bn(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function Ea(r,u,g){return new Pa(r,u,g)}var Vr=Xn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,u){r&&(r instanceof xe||$(r))?(this._latlng=Ae(r),N(this,u)):(N(this,r),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Ur(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Ur(this._container,1),this.bringToFront(),this.options.interactive&&(bn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Ur(this._container,0),this._removeTimeout=setTimeout(c(vn,void 0,this._container),200)):vn(this._container),this.options.interactive&&(jn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=Ae(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ms(this._container),this},bringToBack:function(){return this._map&&fs(this._container),this},_prepareOpen:function(r){var u=this._source;if(!u._map)return!1;if(u instanceof ei){u=null;var g=this._source._layers;for(var P in g)if(g[P]._map){u=g[P];break}if(!u)return!1;this._source=u}if(!r)if(u.getCenter)r=u.getCenter();else if(u.getLatLng)r=u.getLatLng();else if(u.getBounds)r=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")r.innerHTML=u;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),u=ue(this.options.offset),g=this._getAnchor();this._zoomAnimated?ur(this._container,r.add(g)):u=u.add(r).add(g);var P=this._containerBottom=-u.y,D=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=P+"px",this._container.style.left=D+"px"}},_getAnchor:function(){return[0,0]}});Mn.include({_initOverlay:function(r,u,g,P){var D=u;return D instanceof r||(D=new r(P).setContent(u)),g&&D.setLatLng(g),D}}),Xn.include({_initOverlay:function(r,u,g,P){var D=g;return D instanceof r?(N(D,P),D._source=this):(D=u&&!P?u:new r(P,this),D.setContent(g)),D}});var hi=Vr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Vr.prototype.openOn.call(this,r)},onAdd:function(r){Vr.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ui||this._source.on("preclick",Ns))},onRemove:function(r){Vr.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ui||this._source.off("preclick",Ns))},getEvents:function(){var r=Vr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",u=this._container=On("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=On("div",r+"-content-wrapper",u);if(this._contentNode=On("div",r+"-content",g),Lo(u),va(this._contentNode),yn(u,"contextmenu",Ns),this._tipContainer=On("div",r+"-tip-container",u),this._tip=On("div",r+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=On("a",r+"-close-button",u);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',yn(P,"click",function(D){mr(D),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,u=r.style;u.width="",u.whiteSpace="nowrap";var g=r.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),u.width=g+1+"px",u.whiteSpace="",u.height="";var P=r.offsetHeight,D=this.options.maxHeight,re="leaflet-popup-scrolled";D&&P>D?(u.height=D+"px",bn(r,re)):jn(r,re),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var u=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),g=this._getAnchor();ur(this._container,u.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,u=parseInt(bi(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+u,P=this._containerWidth,D=new V(this._containerLeft,-g-this._containerBottom);D._add(ps(this._container));var re=r.layerPointToContainerPoint(D),je=ue(this.options.autoPanPadding),at=ue(this.options.autoPanPaddingTopLeft||je),_t=ue(this.options.autoPanPaddingBottomRight||je),At=r.getSize(),$t=0,rn=0;re.x+P+_t.x>At.x&&($t=re.x+P-At.x+_t.x),re.x-$t-at.x<0&&($t=re.x-at.x),re.y+g+_t.y>At.y&&(rn=re.y+g-At.y+_t.y),re.y-rn-at.y<0&&(rn=re.y-at.y),($t||rn)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([$t,rn]))}},_getAnchor:function(){return ue(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ro=function(r,u){return new hi(r,u)};Mn.mergeOptions({closePopupOnClick:!0}),Mn.include({openPopup:function(r,u,g){return this._initOverlay(hi,r,u,g).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Xn.include({bindPopup:function(r,u){return this._popup=this._initOverlay(hi,this._popup,r,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof ei||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){wi(r);var u=r.layer||r.target;if(this._popup._source===u&&!(u instanceof ui)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=u,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var ys=Vr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Vr.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Vr.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Vr.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",u=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=On("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var u,g,P=this._map,D=this._container,re=P.latLngToContainerPoint(P.getCenter()),je=P.layerPointToContainerPoint(r),at=this.options.direction,_t=D.offsetWidth,At=D.offsetHeight,$t=ue(this.options.offset),rn=this._getAnchor();at==="top"?(u=_t/2,g=At):at==="bottom"?(u=_t/2,g=0):at==="center"?(u=_t/2,g=At/2):at==="right"?(u=0,g=At/2):at==="left"?(u=_t,g=At/2):je.x<re.x?(at="right",u=0,g=At/2):(at="left",u=_t+($t.x+rn.x)*2,g=At/2),r=r.subtract(ue(u,g,!0)).add($t).add(rn),jn(D,"leaflet-tooltip-right"),jn(D,"leaflet-tooltip-left"),jn(D,"leaflet-tooltip-top"),jn(D,"leaflet-tooltip-bottom"),bn(D,"leaflet-tooltip-"+at),ur(D,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Ur(this._container,r)},_animateZoom:function(r){var u=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(u)},_getAnchor:function(){return ue(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),na=function(r,u){return new ys(r,u)};Mn.include({openTooltip:function(r,u,g){return this._initOverlay(ys,r,u,g).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Xn.include({bindTooltip:function(r,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ys,this._tooltip,r,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var u=r?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[u](g),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof ei||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var u=typeof r.getElement=="function"&&r.getElement();u&&(yn(u,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),yn(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var u=typeof r.getElement=="function"&&r.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var u=r.latlng,g,P;this._tooltip.options.sticky&&r.originalEvent&&(g=this._map.mouseEventToContainerPoint(r.originalEvent),P=this._map.containerPointToLayerPoint(g),u=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(u)}});var io=Xi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var u=r&&r.tagName==="DIV"?r:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Zs(u),u.appendChild(g.html)):u.innerHTML=g.html!==!1?g.html:"",g.bgPos){var P=ue(g.bgPos);u.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function so(r){return new io(r)}Xi.Default=Os;var zs=Xn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ut.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){N(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),vn(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ms(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof V?r:new V(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var u=this.getPane().children,g=-r(-1/0,1/0),P=0,D=u.length,re;P<D;P++)re=u[P].style.zIndex,u[P]!==this._container&&re&&(g=r(g,+re));isFinite(g)&&(this.options.zIndex=g+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ut.ielt9){Ur(this._container,this.options.opacity);var r=+new Date,u=!1,g=!1;for(var P in this._tiles){var D=this._tiles[P];if(!(!D.current||!D.loaded)){var re=Math.min(1,(r-D.loaded)/200);Ur(D.el,re),re<1?u=!0:(D.active?g=!0:this._onOpaqueTile(D),D.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),u&&(G(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=On("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,u=this.options.maxZoom;if(r!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===r?(this._levels[g].el.style.zIndex=u-Math.abs(r-g),this._onUpdateLevel(g)):(vn(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var P=this._levels[r],D=this._map;return P||(P=this._levels[r]={},P.el=On("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=u,P.origin=D.project(D.unproject(D.getPixelOrigin()),r).round(),P.zoom=r,this._setZoomTransform(P,D.getCenter(),D.getZoom()),w(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,u,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)u=this._tiles[r],u.retain=u.current;for(r in this._tiles)if(u=this._tiles[r],u.current&&!u.active){var P=u.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var u in this._tiles)this._tiles[u].coords.z===r&&this._removeTile(u)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)vn(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,u,g,P){var D=Math.floor(r/2),re=Math.floor(u/2),je=g-1,at=new V(+D,+re);at.z=+je;var _t=this._tileCoordsToKey(at),At=this._tiles[_t];return At&&At.active?(At.retain=!0,!0):(At&&At.loaded&&(At.retain=!0),je>P?this._retainParent(D,re,je,P):!1)},_retainChildren:function(r,u,g,P){for(var D=2*r;D<2*r+2;D++)for(var re=2*u;re<2*u+2;re++){var je=new V(D,re);je.z=g+1;var at=this._tileCoordsToKey(je),_t=this._tiles[at];if(_t&&_t.active){_t.retain=!0;continue}else _t&&_t.loaded&&(_t.retain=!0);g+1<P&&this._retainChildren(D,re,g+1,P)}},_resetView:function(r){var u=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var u=this.options;return u.minNativeZoom!==void 0&&r<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<r?u.maxNativeZoom:r},_setView:function(r,u,g,P){var D=Math.round(u);this.options.maxZoom!==void 0&&D>this.options.maxZoom||this.options.minZoom!==void 0&&D<this.options.minZoom?D=void 0:D=this._clampZoom(D);var re=this.options.updateWhenZooming&&D!==this._tileZoom;(!P||re)&&(this._tileZoom=D,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),D!==void 0&&this._update(r),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(r,u)},_setZoomTransforms:function(r,u){for(var g in this._levels)this._setZoomTransform(this._levels[g],r,u)},_setZoomTransform:function(r,u,g){var P=this._map.getZoomScale(g,r.zoom),D=r.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(u,g)).round();Ut.any3d?ds(r.el,D,P):ur(r.el,D)},_resetGrid:function(){var r=this._map,u=r.options.crs,g=this._tileSize=this.getTileSize(),P=this._tileZoom,D=this._map.getPixelWorldBounds(this._tileZoom);D&&(this._globalTileRange=this._pxBoundsToTileRange(D)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,u.wrapLng[0]],P).x/g.x),Math.ceil(r.project([0,u.wrapLng[1]],P).x/g.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([u.wrapLat[0],0],P).y/g.x),Math.ceil(r.project([u.wrapLat[1],0],P).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var u=this._map,g=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),P=u.getZoomScale(g,this._tileZoom),D=u.project(r,this._tileZoom).floor(),re=u.getSize().divideBy(P*2);return new We(D.subtract(re),D.add(re))},_update:function(r){var u=this._map;if(u){var g=this._clampZoom(u.getZoom());if(r===void 0&&(r=u.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(r),D=this._pxBoundsToTileRange(P),re=D.getCenter(),je=[],at=this.options.keepBuffer,_t=new We(D.getBottomLeft().subtract([at,-at]),D.getTopRight().add([at,-at]));if(!(isFinite(D.min.x)&&isFinite(D.min.y)&&isFinite(D.max.x)&&isFinite(D.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var At in this._tiles){var $t=this._tiles[At].coords;($t.z!==this._tileZoom||!_t.contains(new V($t.x,$t.y)))&&(this._tiles[At].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(r,g);return}for(var rn=D.min.y;rn<=D.max.y;rn++)for(var En=D.min.x;En<=D.max.x;En++){var si=new V(En,rn);if(si.z=this._tileZoom,!!this._isValidTile(si)){var Ar=this._tiles[this._tileCoordsToKey(si)];Ar?Ar.current=!0:je.push(si)}}if(je.sort(function(hr,xs){return hr.distanceTo(re)-xs.distanceTo(re)}),je.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var pi=document.createDocumentFragment();for(En=0;En<je.length;En++)this._addTile(je[En],pi);this._level.el.appendChild(pi)}}}},_isValidTile:function(r){var u=this._map.options.crs;if(!u.infinite){var g=this._globalTileRange;if(!u.wrapLng&&(r.x<g.min.x||r.x>g.max.x)||!u.wrapLat&&(r.y<g.min.y||r.y>g.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(r);return de(this.options.bounds).overlaps(P)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var u=this._map,g=this.getTileSize(),P=r.scaleBy(g),D=P.add(g),re=u.unproject(P,r.z),je=u.unproject(D,r.z);return[re,je]},_tileCoordsToBounds:function(r){var u=this._tileCoordsToNwSe(r),g=new ee(u[0],u[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var u=r.split(":"),g=new V(+u[0],+u[1]);return g.z=+u[2],g},_removeTile:function(r){var u=this._tiles[r];u&&(vn(u.el),delete this._tiles[r],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){bn(r,"leaflet-tile");var u=this.getTileSize();r.style.width=u.x+"px",r.style.height=u.y+"px",r.onselectstart=w,r.onmousemove=w,Ut.ielt9&&this.options.opacity<1&&Ur(r,this.options.opacity)},_addTile:function(r,u){var g=this._getTilePos(r),P=this._tileCoordsToKey(r),D=this.createTile(this._wrapCoords(r),c(this._tileReady,this,r));this._initTile(D),this.createTile.length<2&&R(c(this._tileReady,this,r,null,D)),ur(D,g),this._tiles[P]={el:D,coords:r,current:!0},u.appendChild(D),this.fire("tileloadstart",{tile:D,coords:r})},_tileReady:function(r,u,g){u&&this.fire("tileerror",{error:u,tile:g,coords:r});var P=this._tileCoordsToKey(r);g=this._tiles[P],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Ur(g.el,0),G(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),u||(bn(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ut.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var u=new V(this._wrapX?b(r.x,this._wrapX):r.x,this._wrapY?b(r.y,this._wrapY):r.y);return u.z=r.z,u},_pxBoundsToTileRange:function(r){var u=this.getTileSize();return new We(r.min.unscaleBy(u).floor(),r.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Ri(r){return new zs(r)}var Or=zs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,u){this._url=r,u=N(this,u),u.detectRetina&&Ut.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,u){return this._url===r&&u===void 0&&(u=!0),this._url=r,u||this.redraw(),this},createTile:function(r,u){var g=document.createElement("img");return yn(g,"load",c(this._tileOnLoad,this,u,g)),yn(g,"error",c(this._tileOnError,this,u,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(r),g},getTileUrl:function(r){var u={r:Ut.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-r.y;this.options.tms&&(u.y=g),u["-y"]=g}return z(this._url,o(u,this.options))},_tileOnLoad:function(r,u){Ut.ielt9?setTimeout(c(r,this,null,u),0):r(null,u)},_tileOnError:function(r,u,g){var P=this.options.errorTileUrl;P&&u.getAttribute("src")!==P&&(u.src=P),r(g,u)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,u=this.options.maxZoom,g=this.options.zoomReverse,P=this.options.zoomOffset;return g&&(r=u-r),r+P},_getSubdomain:function(r){var u=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var r,u;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(u=this._tiles[r].el,u.onload=w,u.onerror=w,!u.complete)){u.src=Ce;var g=this._tiles[r].coords;vn(u),delete this._tiles[r],this.fire("tileabort",{tile:u,coords:g})}},_removeTile:function(r){var u=this._tiles[r];if(u)return u.el.setAttribute("src",Ce),zs.prototype._removeTile.call(this,r)},_tileReady:function(r,u,g){if(!(!this._map||g&&g.getAttribute("src")===Ce))return zs.prototype._tileReady.call(this,r,u,g)}});function Hn(r,u){return new Or(r,u)}var $n=Or.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,u){this._url=r;var g=o({},this.defaultWmsParams);for(var P in u)P in this.options||(g[P]=u[P]);u=N(this,u);var D=u.detectRetina&&Ut.retina?2:1,re=this.getTileSize();g.width=re.x*D,g.height=re.y*D,this.wmsParams=g},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Or.prototype.onAdd.call(this,r)},getTileUrl:function(r){var u=this._tileCoordsToNwSe(r),g=this._crs,P=U(g.project(u[0]),g.project(u[1])),D=P.min,re=P.max,je=(this._wmsVersion>=1.3&&this._crs===wr?[D.y,D.x,re.y,re.x]:[D.x,D.y,re.x,re.y]).join(","),at=Or.prototype.getTileUrl.call(this,r);return at+F(this.wmsParams,at,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+je},setParams:function(r,u){return o(this.wmsParams,r),u||this.redraw(),this}});function _r(r,u){return new $n(r,u)}Or.WMS=$n,Hn.wms=_r;var Qn=Xn.extend({options:{padding:.1},initialize:function(r){N(this,r),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,u){var g=this._map.getZoomScale(u,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),D=this._map.project(this._center,u),re=P.multiplyBy(-g).add(D).subtract(this._map._getNewPixelOrigin(r,u));Ut.any3d?ds(this._container,re,g):ur(this._container,re)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,u=this._map.getSize(),g=this._map.containerPointToLayerPoint(u.multiplyBy(-r)).round();this._bounds=new We(g,g.add(u.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),es=Qn.extend({options:{tolerance:0},getEvents:function(){var r=Qn.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Qn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");yn(r,"mousemove",this._onMouseMove,this),yn(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),yn(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,vn(this._container),Nn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var u in this._layers)r=this._layers[u],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var r=this._bounds,u=this._container,g=r.getSize(),P=Ut.retina?2:1;ur(u,r.min),u.width=P*g.x,u.height=P*g.y,u.style.width=g.x+"px",u.style.height=g.y+"px",Ut.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Qn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[m(r)]=r;var u=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var u=r._order,g=u.next,P=u.prev;g?g.prev=P:this._drawLast=P,P?P.next=g:this._drawFirst=g,delete r._order,delete this._layers[m(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var u=r.options.dashArray.split(/[, ]+/),g=[],P,D;for(D=0;D<u.length;D++){if(P=Number(u[D]),isNaN(P))return;g.push(P)}r.options._dashArray=g}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var u=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new We,this._redrawBounds.extend(r._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(r._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var u=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,u=this._redrawBounds;if(this._ctx.save(),u){var g=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)r=P.layer,(!u||r._pxBounds&&r._pxBounds.intersects(u))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,u){if(this._drawing){var g,P,D,re,je=r._parts,at=je.length,_t=this._ctx;if(at){for(_t.beginPath(),g=0;g<at;g++){for(P=0,D=je[g].length;P<D;P++)re=je[g][P],_t[P?"lineTo":"moveTo"](re.x,re.y);u&&_t.closePath()}this._fillStroke(_t,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var u=r._point,g=this._ctx,P=Math.max(Math.round(r._radius),1),D=(Math.max(Math.round(r._radiusY),1)||P)/P;D!==1&&(g.save(),g.scale(1,D)),g.beginPath(),g.arc(u.x,u.y/D,P,0,Math.PI*2,!1),D!==1&&g.restore(),this._fillStroke(g,r)}},_fillStroke:function(r,u){var g=u.options;g.fill&&(r.globalAlpha=g.fillOpacity,r.fillStyle=g.fillColor||g.color,r.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(r.setLineDash&&r.setLineDash(u.options&&u.options._dashArray||[]),r.globalAlpha=g.opacity,r.lineWidth=g.weight,r.strokeStyle=g.color,r.lineCap=g.lineCap,r.lineJoin=g.lineJoin,r.stroke())},_onClick:function(r){for(var u=this._map.mouseEventToLayerPoint(r),g,P,D=this._drawFirst;D;D=D.next)g=D.layer,g.options.interactive&&g._containsPoint(u)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(g))&&(P=g);this._fireEvent(P?[P]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,u)}},_handleMouseOut:function(r){var u=this._hoveredLayer;u&&(jn(this._container,"leaflet-interactive"),this._fireEvent([u],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,u){if(!this._mouseHoverThrottled){for(var g,P,D=this._drawFirst;D;D=D.next)g=D.layer,g.options.interactive&&g._containsPoint(u)&&(P=g);P!==this._hoveredLayer&&(this._handleMouseOut(r),P&&(bn(this._container,"leaflet-interactive"),this._fireEvent([P],r,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,u,g){this._map._fireDOMEvent(u,g||u.type,r)},_bringToFront:function(r){var u=r._order;if(u){var g=u.next,P=u.prev;if(g)g.prev=P;else return;P?P.next=g:g&&(this._drawFirst=g),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(r)}},_bringToBack:function(r){var u=r._order;if(u){var g=u.next,P=u.prev;if(P)P.next=g;else return;g?g.prev=P:P&&(this._drawLast=P),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(r)}}});function oo(r){return Ut.canvas?new es(r):null}var bs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Za={_initContainer:function(){this._container=On("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Qn.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var u=r._container=bs("shape");bn(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",r._path=bs("path"),u.appendChild(r._path),this._updateStyle(r),this._layers[m(r)]=r},_addPath:function(r){var u=r._container;this._container.appendChild(u),r.options.interactive&&r.addInteractiveTarget(u)},_removePath:function(r){var u=r._container;vn(u),r.removeInteractiveTarget(u),delete this._layers[m(r)]},_updateStyle:function(r){var u=r._stroke,g=r._fill,P=r.options,D=r._container;D.stroked=!!P.stroke,D.filled=!!P.fill,P.stroke?(u||(u=r._stroke=bs("stroke")),D.appendChild(u),u.weight=P.weight+"px",u.color=P.color,u.opacity=P.opacity,P.dashArray?u.dashStyle=$(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=P.lineCap.replace("butt","flat"),u.joinstyle=P.lineJoin):u&&(D.removeChild(u),r._stroke=null),P.fill?(g||(g=r._fill=bs("fill")),D.appendChild(g),g.color=P.fillColor||P.color,g.opacity=P.fillOpacity):g&&(D.removeChild(g),r._fill=null)},_updateCircle:function(r){var u=r._point.round(),g=Math.round(r._radius),P=Math.round(r._radiusY||g);this._setPath(r,r._empty()?"M0 0":"AL "+u.x+","+u.y+" "+g+","+P+" 0,"+65535*360)},_setPath:function(r,u){r._path.v=u},_bringToFront:function(r){Ms(r._container)},_bringToBack:function(r){fs(r._container)}},ao=Ut.vml?bs:De,Er=Qn.extend({_initContainer:function(){this._container=ao("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ao("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){vn(this._container),Nn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Qn.prototype._update.call(this);var r=this._bounds,u=r.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,g.setAttribute("width",u.x),g.setAttribute("height",u.y)),ur(g,r.min),g.setAttribute("viewBox",[r.min.x,r.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(r){var u=r._path=ao("path");r.options.className&&bn(u,r.options.className),r.options.interactive&&bn(u,"leaflet-interactive"),this._updateStyle(r),this._layers[m(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){vn(r._path),r.removeInteractiveTarget(r._path),delete this._layers[m(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var u=r._path,g=r.options;u&&(g.stroke?(u.setAttribute("stroke",g.color),u.setAttribute("stroke-opacity",g.opacity),u.setAttribute("stroke-width",g.weight),u.setAttribute("stroke-linecap",g.lineCap),u.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?u.setAttribute("stroke-dasharray",g.dashArray):u.removeAttribute("stroke-dasharray"),g.dashOffset?u.setAttribute("stroke-dashoffset",g.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),g.fill?(u.setAttribute("fill",g.fillColor||g.color),u.setAttribute("fill-opacity",g.fillOpacity),u.setAttribute("fill-rule",g.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(r,u){this._setPath(r,le(r._parts,u))},_updateCircle:function(r){var u=r._point,g=Math.max(Math.round(r._radius),1),P=Math.max(Math.round(r._radiusY),1)||g,D="a"+g+","+P+" 0 1,0 ",re=r._empty()?"M0 0":"M"+(u.x-g)+","+u.y+D+g*2+",0 "+D+-g*2+",0 ";this._setPath(r,re)},_setPath:function(r,u){r._path.setAttribute("d",u)},_bringToFront:function(r){Ms(r._path)},_bringToBack:function(r){fs(r._path)}});Ut.vml&&Er.include(Za);function er(r){return Ut.svg||Ut.vml?new Er(r):null}Mn.include({getRenderer:function(r){var u=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var u=this._paneRenderers[r];return u===void 0&&(u=this._createRenderer({pane:r}),this._paneRenderers[r]=u),u},_createRenderer:function(r){return this.options.preferCanvas&&oo(r)||er(r)}});var fi=Pr.extend({initialize:function(r,u){Pr.prototype.initialize.call(this,this._boundsToLatLngs(r),u)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=de(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function di(r,u){return new fi(r,u)}Er.create=ao,Er.pointsToPath=le,Di.geometryToLayer=So,Di.coordsToLatLng=_s,Di.coordsToLatLngs=Dr,Di.latLngToCoords=Mr,Di.latLngsToCoords=Qi,Di.getFeature=ci,Di.asFeature=Oi,Mn.mergeOptions({boxZoom:!0});var cn=Cr.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){yn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Nn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){vn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),xo(),ga(),this._startPoint=this._map.mouseEventToContainerPoint(r),yn(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=On("div","leaflet-zoom-box",this._container),bn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var u=new We(this._point,this._startPoint),g=u.getSize();ur(this._box,u.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(vn(this._box),jn(this._container,"leaflet-crosshair")),Bs(),Yi(),Nn(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var u=new ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Mn.addInitHook("addHandler","boxZoom",cn),Mn.mergeOptions({doubleClickZoom:!0});var Ka=Cr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var u=this._map,g=u.getZoom(),P=u.options.zoomDelta,D=r.originalEvent.shiftKey?g-P:g+P;u.options.doubleClickZoom==="center"?u.setZoom(D):u.setZoomAround(r.containerPoint,D)}});Mn.addInitHook("addHandler","doubleClickZoom",Ka),Mn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Bo=Cr.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Ni(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}bn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){jn(this._map._container,"leaflet-grab"),jn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=de(this._map.options.maxBounds);this._offsetLimit=U(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var u=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(u),this._prunePositions(u)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,u){return r-(r-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;r.x<u.min.x&&(r.x=this._viscousLimit(r.x,u.min.x)),r.y<u.min.y&&(r.y=this._viscousLimit(r.y,u.min.y)),r.x>u.max.x&&(r.x=this._viscousLimit(r.x,u.max.x)),r.y>u.max.y&&(r.y=this._viscousLimit(r.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,u=Math.round(r/2),g=this._initialWorldOffset,P=this._draggable._newPos.x,D=(P-u+g)%r+u-g,re=(P+u+g)%r-u-g,je=Math.abs(D+g)<Math.abs(re+g)?D:re;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=je},_onDragEnd:function(r){var u=this._map,g=u.options,P=!g.inertia||r.noInertia||this._times.length<2;if(u.fire("dragend",r),P)u.fire("moveend");else{this._prunePositions(+new Date);var D=this._lastPos.subtract(this._positions[0]),re=(this._lastTime-this._times[0])/1e3,je=g.easeLinearity,at=D.multiplyBy(je/re),_t=at.distanceTo([0,0]),At=Math.min(g.inertiaMaxSpeed,_t),$t=at.multiplyBy(At/_t),rn=At/(g.inertiaDeceleration*je),En=$t.multiplyBy(-rn/2).round();!En.x&&!En.y?u.fire("moveend"):(En=u._limitOffset(En,u.options.maxBounds),R(function(){u.panBy(En,{duration:rn,easeLinearity:je,noMoveStart:!0,animate:!0})}))}}});Mn.addInitHook("addHandler","dragging",Bo),Mn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Fi=Cr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),yn(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Nn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,u=document.documentElement,g=r.scrollTop||u.scrollTop,P=r.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(P,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var u=this._panKeys={},g=this.keyCodes,P,D;for(P=0,D=g.left.length;P<D;P++)u[g.left[P]]=[-1*r,0];for(P=0,D=g.right.length;P<D;P++)u[g.right[P]]=[r,0];for(P=0,D=g.down.length;P<D;P++)u[g.down[P]]=[0,r];for(P=0,D=g.up.length;P<D;P++)u[g.up[P]]=[0,-1*r]},_setZoomDelta:function(r){var u=this._zoomKeys={},g=this.keyCodes,P,D;for(P=0,D=g.zoomIn.length;P<D;P++)u[g.zoomIn[P]]=r;for(P=0,D=g.zoomOut.length;P<D;P++)u[g.zoomOut[P]]=-r},_addHooks:function(){yn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Nn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var u=r.keyCode,g=this._map,P;if(u in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(P=this._panKeys[u],r.shiftKey&&(P=ue(P).multiplyBy(3)),g.options.maxBounds&&(P=g._limitOffset(ue(P),g.options.maxBounds)),g.options.worldCopyJump){var D=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(P)));g.panTo(D)}else g.panBy(P)}else if(u in this._zoomKeys)g.setZoom(g.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;wi(r)}}});Mn.addInitHook("addHandler","keyboard",Fi),Mn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Gr=Cr.extend({addHooks:function(){yn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Nn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var u=Zo(r),g=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var P=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),P),wi(r)},_performZoom:function(){var r=this._map,u=r.getZoom(),g=this._map.options.zoomSnap||0;r._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),D=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,re=g?Math.ceil(D/g)*g:D,je=r._limitZoom(u+(this._delta>0?re:-re))-u;this._delta=0,this._startTime=null,je&&(r.options.scrollWheelZoom==="center"?r.setZoom(u+je):r.setZoomAround(this._lastMousePos,u+je))}});Mn.addInitHook("addHandler","scrollWheelZoom",Gr);var bl=600;Mn.mergeOptions({tapHold:Ut.touchNative&&Ut.safari&&Ut.mobile,tapTolerance:15});var ri=Cr.extend({addHooks:function(){yn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Nn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var u=r.touches[0];this._startPos=this._newPos=new V(u.clientX,u.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(yn(document,"touchend",mr),yn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),bl),yn(document,"touchend touchcancel contextmenu",this._cancel,this),yn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Nn(document,"touchend",mr),Nn(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Nn(document,"touchend touchcancel contextmenu",this._cancel,this),Nn(document,"touchmove",this._onMove,this)},_onMove:function(r){var u=r.touches[0];this._newPos=new V(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,u){var g=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});g._simulated=!0,u.target.dispatchEvent(g)}});Mn.addInitHook("addHandler","tapHold",ri),Mn.mergeOptions({touchZoom:Ut.touch,bounceAtZoomLimits:!0});var ii=Cr.extend({addHooks:function(){bn(this._map._container,"leaflet-touch-zoom"),yn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){jn(this._map._container,"leaflet-touch-zoom"),Nn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var u=this._map;if(!(!r.touches||r.touches.length!==2||u._animatingZoom||this._zooming)){var g=u.mouseEventToContainerPoint(r.touches[0]),P=u.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(g.add(P)._divideBy(2))),this._startDist=g.distanceTo(P),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),yn(document,"touchmove",this._onTouchMove,this),yn(document,"touchend touchcancel",this._onTouchEnd,this),mr(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var u=this._map,g=u.mouseEventToContainerPoint(r.touches[0]),P=u.mouseEventToContainerPoint(r.touches[1]),D=g.distanceTo(P)/this._startDist;if(this._zoom=u.getScaleZoom(D,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&D<1||this._zoom>u.getMaxZoom()&&D>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,D===1)return}else{var re=g._add(P)._divideBy(2)._subtract(this._centerPoint);if(D===1&&re.x===0&&re.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(re),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var je=c(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(je,this,!0),mr(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),Nn(document,"touchmove",this._onTouchMove,this),Nn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mn.addInitHook("addHandler","touchZoom",ii),Mn.BoxZoom=cn,Mn.DoubleClickZoom=Ka,Mn.Drag=Bo,Mn.Keyboard=Fi,Mn.ScrollWheelZoom=Gr,Mn.TapHold=ri,Mn.TouchZoom=ii,n.Bounds=We,n.Browser=Ut,n.CRS=_e,n.Canvas=es,n.Circle=qr,n.CircleMarker=ti,n.Class=W,n.Control=sn,n.DivIcon=io,n.DivOverlay=Vr,n.DomEvent=ko,n.DomUtil=gn,n.Draggable=Ni,n.Evented=se,n.FeatureGroup=ei,n.GeoJSON=Di,n.GridLayer=zs,n.Handler=Cr,n.Icon=Xi,n.ImageOverlay=vs,n.LatLng=xe,n.LatLngBounds=ee,n.Layer=Xn,n.LayerGroup=Qr,n.LineUtil=Bn,n.Map=Mn,n.Marker=xr,n.Mixin=Ga,n.Path=ui,n.Point=V,n.PolyUtil=Qo,n.Polygon=Pr,n.Polyline=Li,n.Popup=hi,n.PosAnimation=ya,n.Projection=qn,n.Rectangle=fi,n.Renderer=Qn,n.SVG=Er,n.SVGOverlay=Pa,n.TileLayer=Or,n.Tooltip=ys,n.Transformation=gt,n.Util=he,n.VideoOverlay=$r,n.bind=c,n.bounds=U,n.canvas=oo,n.circle=Rs,n.circleMarker=ta,n.control=Xr,n.divIcon=so,n.extend=o,n.featureGroup=Ca,n.geoJSON=Ii,n.geoJson=cr,n.gridLayer=Ri,n.icon=ka,n.imageOverlay=ni,n.latLng=Ae,n.latLngBounds=de,n.layerGroup=Ha,n.map=ba,n.marker=ea,n.point=ue,n.polygon=gs,n.polyline=Wa,n.popup=ro,n.rectangle=di,n.setOptions=N,n.stamp=m,n.svg=er,n.svgOverlay=Ea,n.tileLayer=Hn,n.tooltip=na,n.transformation=ae,n.version=i,n.videoOverlay=Mo;var ws=window.L;n.noConflict=function(){return window.L=ws,this},window.L=n})})(qf,qf.exports);var Zr=qf.exports;const Ht=Bg(Zr);var Cs=63710088e-1,Yb={centimeters:Cs*100,centimetres:Cs*100,degrees:Cs/111325,feet:Cs*3.28084,inches:Cs*39.37,kilometers:Cs/1e3,kilometres:Cs/1e3,meters:Cs,metres:Cs,miles:Cs/1609.344,millimeters:Cs*1e3,millimetres:Cs*1e3,nauticalmiles:Cs/1852,radians:1,yards:Cs*1.0936};function ih(e,t,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function $f(e,t,n){n===void 0&&(n={});for(var i=0,o=e;i<o.length;i++){var l=o[i];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var c=0;c<l[l.length-1].length;c++)if(l[l.length-1][c]!==l[0][c])throw new Error("First and last Position are not equivalent.")}var p={type:"Polygon",coordinates:e};return ih(p,t,n)}function oc(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return ih(i,t,n)}function Xb(e,t){t===void 0&&(t="kilometers");var n=Yb[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Ec(e){var t=e%360;return t*Math.PI/180}function Rg(e,t,n){if(e!==null)for(var i,o,l,c,p,m,y,b=0,w=0,A,C=e.type,M=C==="FeatureCollection",N=C==="Feature",F=M?e.features.length:1,j=0;j<F;j++){y=M?e.features[j].geometry:N?e.geometry:e,A=y?y.type==="GeometryCollection":!1,p=A?y.geometries.length:1;for(var z=0;z<p;z++){var $=0,pe=0;if(c=A?y.geometries[z]:y,c!==null){m=c.coordinates;var Ce=c.type;switch(b=0,Ce){case null:break;case"Point":if(t(m,w,j,$,pe)===!1)return!1;w++,$++;break;case"LineString":case"MultiPoint":for(i=0;i<m.length;i++){if(t(m[i],w,j,$,pe)===!1)return!1;w++,Ce==="MultiPoint"&&$++}Ce==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(i=0;i<m.length;i++){for(o=0;o<m[i].length-b;o++){if(t(m[i][o],w,j,$,pe)===!1)return!1;w++}Ce==="MultiLineString"&&$++,Ce==="Polygon"&&pe++}Ce==="Polygon"&&$++;break;case"MultiPolygon":for(i=0;i<m.length;i++){for(pe=0,o=0;o<m[i].length;o++){for(l=0;l<m[i][o].length-b;l++){if(t(m[i][o][l],w,j,$,pe)===!1)return!1;w++}pe++}$++}break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(Rg(c.geometries[i],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Fg(e,t){var n,i,o,l,c,p,m,y,b,w,A=0,C=e.type==="FeatureCollection",M=e.type==="Feature",N=C?e.features.length:1;for(n=0;n<N;n++){for(p=C?e.features[n].geometry:M?e.geometry:e,y=C?e.features[n].properties:M?e.properties:{},b=C?e.features[n].bbox:M?e.bbox:void 0,w=C?e.features[n].id:M?e.id:void 0,m=p?p.type==="GeometryCollection":!1,c=m?p.geometries.length:1,o=0;o<c;o++){if(l=m?p.geometries[o]:p,l===null){if(t(null,A,y,b,w)===!1)return!1;continue}switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(l,A,y,b,w)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<l.geometries.length;i++)if(t(l.geometries[i],A,y,b,w)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}A++}}function Qb(e,t,n){var i=n;return Fg(e,function(o,l,c,p,m){i=t(i,o,l,c,p,m)}),i}function e3(e,t){Fg(e,function(n,i,o,l,c){var p=n===null?null:n.type;switch(p){case null:case"Point":case"LineString":case"Polygon":return t(ih(n,o,{bbox:l,id:c}),i,0)===!1?!1:void 0}var m;switch(p){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var y=0;y<n.coordinates.length;y++){var b=n.coordinates[y],w={type:m,coordinates:b};if(t(ih(w,o),i,y)===!1)return!1}})}function t3(e,t){e3(e,function(n,i,o){var l=0;if(n.geometry){var c=n.geometry.type;if(!(c==="Point"||c==="MultiPoint")){var p,m=0,y=0,b=0;if(Rg(n,function(w,A,C,M,N){if(p===void 0||i>m||M>y||N>b){p=w,m=i,y=M,b=N,l=0;return}var F=oc([p,w],n.properties);if(t(F,i,o,N,l)===!1)return!1;l++,p=w})===!1)return!1}}})}function n3(e,t,n){var i=n,o=!1;return t3(e,function(l,c,p,m,y){o===!1&&n===void 0?i=l:i=t(i,l,c,p,m,y),o=!0}),i}function s0(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Vf(e,t,n){n===void 0&&(n={});var i=s0(e),o=s0(t),l=Ec(o[1]-i[1]),c=Ec(o[0]-i[0]),p=Ec(i[1]),m=Ec(o[1]),y=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(p)*Math.cos(m);return Xb(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),n.units)}var o0=6378137;function Gf(e){return Qb(e,function(t,n){return t+r3(n)},0)}function r3(e){var t=0,n;switch(e.type){case"Polygon":return a0(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=a0(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function a0(e){var t=0;if(e&&e.length>0){t+=Math.abs(l0(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(l0(e[n]))}return t}function l0(e){var t,n,i,o,l,c,p,m=0,y=e.length;if(y>2){for(p=0;p<y;p++)p===y-2?(o=y-2,l=y-1,c=0):p===y-1?(o=y-1,l=0,c=1):(o=p,l=p+1,c=p+2),t=e[o],n=e[l],i=e[c],m+=(cf(i[0])-cf(t[0]))*Math.sin(cf(n[1]));m=m*o0*o0/2}return m}function cf(e){return e*Math.PI/180}function sh(e,t){return t===void 0&&(t={}),n3(e,function(n,i){var o=i.geometry.coordinates;return n+Vf(o[0],o[1],t)},0)}var u0={exports:{}};(function(e,t){(function(n,i){i(t)})(co,function(n){var i=typeof window<"u"?window:typeof co<"u"?co:typeof self<"u"?self:{};function o(y,b){return y(b={exports:{}},b.exports),b.exports}var l=o(function(y,b){(function(w){const A={escape:function(ne){return ne.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:C,mimeType:function(ne){return ne=C(ne).toLowerCase(),function(){var X="application/font-woff",se="image/jpeg";return{woff:X,woff2:X,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:se,jpeg:se,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[ne]||""},dataAsUrl:function(ne,X){return`data:${X};base64,`+ne},isDataUrl:function(ne){return ne.search(/^(data:)/)!==-1},canvasToBlob:function(ne){return ne.toBlob?new Promise(function(se){ne.toBlob(se)}):(X=ne,new Promise(function(se){const V=ke(X.toDataURL().split(",")[1]);var Y=V.length;const ue=new Uint8Array(Y);for(let We=0;We<Y;We++)ue[We]=V.charCodeAt(We);se(new Blob([ue],{type:"image/png"}))}));var X},resolveUrl:function(ne,X){const se=document.implementation.createHTMLDocument(),V=se.createElement("base"),Y=(se.head.appendChild(V),se.createElement("a"));return se.body.appendChild(Y),V.href=X,Y.href=ne,Y.href},getAndEncode:function(ne){let X=Ce.impl.urlCache.find(function(se){return se.url===ne});return X||(X={url:ne,promise:null},Ce.impl.urlCache.push(X)),X.promise===null&&(Ce.impl.options.cacheBust&&(ne+=(/\?/.test(ne)?"&":"?")+new Date().getTime()),X.promise=new Promise(function(se){const V=Ce.impl.options.httpTimeout,Y=new XMLHttpRequest;let ue;var We;function U(ee){console.error(ee),se("")}Y.onreadystatechange=function(){if(Y.readyState===4)if(Y.status!==200)ue?se(ue):U(`cannot fetch resource: ${ne}, status: `+Y.status);else{const ee=new FileReader;ee.onloadend=function(){var de=ee.result.split(/,/)[1];se(de)},ee.readAsDataURL(Y.response)}},Y.ontimeout=function(){ue?se(ue):U(`timeout of ${V}ms occured while fetching resource: `+ne)},Y.responseType="blob",Y.timeout=V,Ce.impl.options.useCredentials&&(Y.withCredentials=!0),Y.open("GET",ne,!0),Y.send(),Ce.impl.options.imagePlaceholder&&(We=Ce.impl.options.imagePlaceholder.split(/,/))&&We[1]&&(ue=We[1])})),X.promise},uid:function(){let ne=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+ne++}}(),delay:function(ne){return function(X){return new Promise(function(se){setTimeout(function(){se(X)},ne)})}},asArray:function(ne){const X=[],se=ne.length;for(let V=0;V<se;V++)X.push(ne[V]);return X},escapeXhtml:function(ne){return ne.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(ne){return ne!=="data:,"?new Promise(function(X,se){const V=new Image;Ce.impl.options.useCredentials&&(V.crossOrigin="use-credentials"),V.onload=function(){X(V)},V.onerror=se,V.src=ne}):Promise.resolve()},width:function(ne){var X=M(ne,"border-left-width"),se=M(ne,"border-right-width");return ne.scrollWidth+X+se},height:function(ne){var X=M(ne,"border-top-width"),se=M(ne,"border-bottom-width");return ne.scrollHeight+X+se}};function C(ne){return(ne=/\.([^\.\/]*?)(\?|$)/g.exec(ne))?ne[1]:""}function M(ne,X){const se=Te(ne).getPropertyValue(X);return parseFloat(se.replace("px",""))}const N=function(){const ne=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(Y,ue,We){return X(Y)?Promise.resolve(Y).then(se).then(function(U){let ee=Promise.resolve(Y);return U.forEach(function(de){ee=ee.then(function(xe){return V(xe,de,ue,We)})}),ee}):Promise.resolve(Y)},shouldProcess:X,impl:{readUrls:se,inline:V}};function X(Y){return Y.search(ne)!==-1}function se(Y){const ue=[];for(var We;(We=ne.exec(Y))!==null;)ue.push(We[1]);return ue.filter(function(U){return!A.isDataUrl(U)})}function V(Y,ue,We,U){return Promise.resolve(ue).then(function(ee){return We?A.resolveUrl(ee,We):ee}).then(U||A.getAndEncode).then(function(ee){return A.dataAsUrl(ee,A.mimeType(ue))}).then(function(ee){return Y.replace((de=ue,new RegExp(`(url\\(['"]?)(${A.escape(de)})(['"]?\\))`,"g")),`$1${ee}$3`);var de})}}(),F={resolveAll:function(){return j().then(function(ne){return Promise.all(ne.map(function(X){return X.resolve()}))}).then(function(ne){return ne.join(`
`)})},impl:{readAll:j}};function j(){return Promise.resolve(A.asArray(document.styleSheets)).then(function(X){const se=[];return X.forEach(function(V){if(Object.getPrototypeOf(V).hasOwnProperty("cssRules"))try{A.asArray(V.cssRules||[]).forEach(se.push.bind(se))}catch(Y){console.log("Error while reading CSS rules from "+V.href,Y.toString())}}),se}).then(function(X){return X.filter(function(se){return se.type===CSSRule.FONT_FACE_RULE}).filter(function(se){return N.shouldProcess(se.style.getPropertyValue("src"))})}).then(function(X){return X.map(ne)});function ne(X){return{resolve:function(){var se=(X.parentStyleSheet||{}).href;return N.inlineAll(X.cssText,se)},src:function(){return X.style.getPropertyValue("src")}}}}const z={inlineAll:function ne(X){return X instanceof Element?function(se){const V=se.style.getPropertyValue("background");return V?N.inlineAll(V).then(function(Y){se.style.setProperty("background",Y,V)}).then(function(){return se}):Promise.resolve(se)}(X).then(function(){return X instanceof HTMLImageElement?$(X).inline():Promise.all(A.asArray(X.childNodes).map(function(se){return ne(se)}))}):Promise.resolve(X)},impl:{newImage:$}};function $(ne){return{inline:function(X){return A.isDataUrl(ne.src)?Promise.resolve():Promise.resolve(ne.src).then(X||A.getAndEncode).then(function(se){return A.dataAsUrl(se,A.mimeType(ne.src))}).then(function(se){return new Promise(function(V){ne.onload=V,ne.onerror=V,ne.src=se})})}}}const pe={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},Ce={toSvg:O,toPng:function(ne,X){return(X=X||{}).raster=!0,oe(ne,X).then(function(se){return se.toDataURL()})},toJpeg:function(ne,X){return(X=X||{}).raster=!0,oe(ne,X).then(function(se){return se.toDataURL("image/jpeg",X.quality||1)})},toBlob:function(ne,X){return(X=X||{}).raster=!0,oe(ne,X).then(A.canvasToBlob)},toPixelData:function(ne,X){return(X=X||{}).raster=!0,oe(ne,X).then(function(se){return se.getContext("2d").getImageData(0,0,A.width(ne),A.height(ne)).data})},toCanvas:function(ne,X){return(X=X||{}).raster=!0,oe(ne,X||{})},impl:{fontFaces:F,images:z,util:A,inliner:N,urlCache:[],options:{}}},Te=(y.exports=Ce,w.getComputedStyle||window.getComputedStyle),ke=w.atob||window.atob;function O(ne,X){var se=X=X||{};return se.imagePlaceholder===void 0?Ce.impl.options.imagePlaceholder=pe.imagePlaceholder:Ce.impl.options.imagePlaceholder=se.imagePlaceholder,se.cacheBust===void 0?Ce.impl.options.cacheBust=pe.cacheBust:Ce.impl.options.cacheBust=se.cacheBust,se.useCredentials===void 0?Ce.impl.options.useCredentials=pe.useCredentials:Ce.impl.options.useCredentials=se.useCredentials,Promise.resolve(ne).then(function(V){return function Y(ue,We,U,ee,de=null){return U||!We||We(ue)?Promise.resolve(ue).then(function(xe){return xe instanceof HTMLCanvasElement?A.makeImage(xe.toDataURL()):xe.nodeName==="IFRAME"?html2canvas(xe.contentDocument.body).then(Ae=>Ae.toDataURL()).then(A.makeImage):xe.cloneNode(!1)}).then(function(xe){return function(Ae,_e){const Ie=Ae.childNodes;return Ie.length===0?Promise.resolve(_e):function(Ne,st){const gt=Te(Ae);let ae=Promise.resolve();return st.forEach(function(fe){ae=ae.then(function(){return Y(fe,We,!1,ee,gt)}).then(function(Re){Re&&Ne.appendChild(Re)})}),ae}(_e,A.asArray(Ie)).then(function(){return _e})}(ue,xe)}).then(function(xe){return function(Ae,_e,Ie){return _e instanceof Element?Promise.resolve().then(function(){(function(Ne,st){const gt=Te(Ne);gt.cssText?(st.style.cssText=gt.cssText,function(ae,fe){fe.font=ae.font,fe.fontFamily=ae.fontFamily,fe.fontFeatureSettings=ae.fontFeatureSettings,fe.fontKerning=ae.fontKerning,fe.fontSize=ae.fontSize,fe.fontStretch=ae.fontStretch,fe.fontStyle=ae.fontStyle,fe.fontVariant=ae.fontVariant,fe.fontVariantCaps=ae.fontVariantCaps,fe.fontVariantEastAsian=ae.fontVariantEastAsian,fe.fontVariantLigatures=ae.fontVariantLigatures,fe.fontVariantNumeric=ae.fontVariantNumeric,fe.fontVariationSettings=ae.fontVariationSettings,fe.fontWeight=ae.fontWeight}(gt,st.style)):(Ie?function(ae,fe,Re,De){const le=Re.style,Ze=ae.style;for(var lt of fe){var Qe=fe.getPropertyValue(lt),ot=Ze.getPropertyValue(lt),Oe=(Ze.setProperty(lt,De?"initial":"unset"),fe.getPropertyValue(lt));Oe!==Qe?le.setProperty(lt,Qe):le.removeProperty(lt),Ze.setProperty(lt,ot)}}(Ne,gt,st,U):function(ae,fe,Re){const De=function(Ze){if(W[Ze])return W[Ze];he||((he=document.createElement("iframe")).style.visibility="hidden",he.style.position="fixed",document.body.appendChild(he),he.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const lt=document.createElement(Ze),Qe=(he.contentWindow.document.body.appendChild(lt),lt.textContent=".",he.contentWindow.getComputedStyle(lt)),ot={};return A.asArray(Qe).forEach(function(Oe){ot[Oe]=Oe==="width"||Oe==="height"?"auto":Qe.getPropertyValue(Oe)}),he.contentWindow.document.body.removeChild(lt),W[Ze]=ot}(Re.tagName),le=Re.style;A.asArray(ae).forEach(function(Ze){var lt=ae.getPropertyValue(Ze);(lt!==De[Ze]||fe&&lt!==fe.getPropertyValue(Ze))&&le.setProperty(Ze,lt,ae.getPropertyPriority(Ze))})}(gt,de,st),U&&(["inset-block","inset-block-start","inset-block-end"].forEach(ae=>st.style.removeProperty(ae)),["left","right","top","bottom"].forEach(ae=>{st.style.getPropertyValue(ae)&&st.style.setProperty(ae,"0px")})))})(Ae,_e)}).then(function(){[":before",":after"].forEach(function(Ne){(function(st){const gt=Te(Ae,st),ae=gt.getPropertyValue("content");if(ae!==""&&ae!=="none"){const fe=A.uid(),Re=_e.getAttribute("class"),De=(Re&&_e.setAttribute("class",Re+" "+fe),document.createElement("style"));De.appendChild(function(){const le=`.${fe}:`+st,Ze=(gt.cssText?function(){return`${gt.cssText} content: ${gt.getPropertyValue("content")};`}:function(){return A.asArray(gt).map(function(lt){return lt+": "+gt.getPropertyValue(lt)+(gt.getPropertyPriority(lt)?" !important":"")}).join("; ")+";"})();return document.createTextNode(le+`{${Ze}}`)}()),_e.appendChild(De)}})(Ne)})}).then(function(){Ae instanceof HTMLTextAreaElement&&(_e.innerHTML=Ae.value),Ae instanceof HTMLInputElement&&_e.setAttribute("value",Ae.value)}).then(function(){_e instanceof SVGElement&&(_e.setAttribute("xmlns","http://www.w3.org/2000/svg"),_e instanceof SVGRectElement&&["width","height"].forEach(function(Ne){const st=_e.getAttribute(Ne);st&&_e.style.setProperty(Ne,st)}))}).then(function(){return _e}):_e}(ue,xe,ee)}):Promise.resolve()}(V,X.filter,!0,!X.raster)}).then(we).then(R).then(function(V){X.bgcolor&&(V.style.backgroundColor=X.bgcolor),X.width&&(V.style.width=X.width+"px"),X.height&&(V.style.height=X.height+"px"),X.style&&Object.keys(X.style).forEach(function(ue){V.style[ue]=X.style[ue]});let Y=null;return typeof X.onclone=="function"&&(Y=X.onclone(V)),Promise.resolve(Y).then(function(){return V})}).then(function(V){return V=V,Y=X.width||A.width(ne),ue=X.height||A.height(ne),Promise.resolve(V).then(function(We){return We.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(We)}).then(A.escapeXhtml).then(function(We){return`<foreignObject x="0" y="0" width="100%" height="100%">${We}</foreignObject>`}).then(function(We){return`<svg xmlns="http://www.w3.org/2000/svg" width="${Y}" height="${ue}">${We}</svg>`}).then(function(We){return"data:image/svg+xml;charset=utf-8,"+We});var Y,ue}).then(function(V){return Ce.impl.urlCache=[],V})}function oe(ne,X){return O(ne,X).then(A.makeImage).then(A.delay(0)).then(function(se){var V=typeof X.scale!="number"?1:X.scale;const Y=function(We,U){const ee=document.createElement("canvas");if(ee.width=(X.width||A.width(We))*U,ee.height=(X.height||A.height(We))*U,X.bgcolor){const de=ee.getContext("2d");de.fillStyle=X.bgcolor,de.fillRect(0,0,ee.width,ee.height)}return ee}(ne,V),ue=Y.getContext("2d");return ue.mozImageSmoothingEnabled=!1,ue.msImageSmoothingEnabled=!1,ue.imageSmoothingEnabled=!1,se&&(ue.scale(V,V),ue.drawImage(se,0,0)),he&&(document.body.removeChild(he),he=null,G&&clearTimeout(G),G=setTimeout(()=>{G=null,W={}},2e4)),Y})}function we(ne){return F.resolveAll().then(function(X){const se=document.createElement("style");return ne.appendChild(se),se.appendChild(document.createTextNode(X)),ne})}function R(ne){return z.inlineAll(ne).then(function(){return ne})}let G=null,he=null,W={}})(i)}),c=o(function(y,b){(function(){function w(F,j,z){var $=new XMLHttpRequest;$.open("GET",F),$.responseType="blob",$.onload=function(){N($.response,j,z)},$.onerror=function(){console.error("could not download file")},$.send()}function A(F){var j=new XMLHttpRequest;j.open("HEAD",F,!1);try{j.send()}catch{}return 200<=j.status&&299>=j.status}function C(F){try{F.dispatchEvent(new MouseEvent("click"))}catch{var j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),F.dispatchEvent(j)}}var M=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof i=="object"&&i.global===i?i:void 0,N=M.saveAs||(typeof window!="object"||window!==M?function(){}:"download"in HTMLAnchorElement.prototype?function(F,j,z){var $=M.URL||M.webkitURL,pe=document.createElement("a");j=j||F.name||"download",pe.download=j,pe.rel="noopener",typeof F=="string"?(pe.href=F,pe.origin===location.origin?C(pe):A(pe.href)?w(F,j,z):C(pe,pe.target="_blank")):(pe.href=$.createObjectURL(F),setTimeout(function(){$.revokeObjectURL(pe.href)},4e4),setTimeout(function(){C(pe)},0))}:"msSaveOrOpenBlob"in navigator?function(F,j,z){if(j=j||F.name||"download",typeof F!="string")navigator.msSaveOrOpenBlob(function(pe,Ce){return Ce===void 0?Ce={autoBom:!1}:typeof Ce!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Ce={autoBom:!Ce}),Ce.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(pe.type)?new Blob(["\uFEFF",pe],{type:pe.type}):pe}(F,z),j);else if(A(F))w(F,j,z);else{var $=document.createElement("a");$.href=F,$.target="_blank",setTimeout(function(){C($)})}}:function(F,j,z,$){if(($=$||open("","_blank"))&&($.document.title=$.document.body.innerText="downloading..."),typeof F=="string")return w(F,j,z);var pe=F.type==="application/octet-stream",Ce=/constructor/i.test(M.HTMLElement)||M.safari,Te=/CriOS\/[\d]+/.test(navigator.userAgent);if((Te||pe&&Ce)&&typeof FileReader=="object"){var ke=new FileReader;ke.onloadend=function(){var we=ke.result;we=Te?we:we.replace(/^data:[^;]*;/,"data:attachment/file;"),$?$.location.href=we:location=we,$=null},ke.readAsDataURL(F)}else{var O=M.URL||M.webkitURL,oe=O.createObjectURL(F);$?$.location=oe:location.href=oe,$=null,setTimeout(function(){O.revokeObjectURL(oe)},4e4)}});M.saveAs=N.saveAs=N,y.exports=N})()}),p=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(y){var b=y.node,w=y.error;return console.warn("Map node is very big "+b.scrollWidth+"x"+b.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(w)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A={};for(var C in this.options)w.hasOwnProperty(C)?A[C]=w[C]:A[C]=this.options[C];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return y._getPixelData(A)}).then(function(M){return y._setElementsVisible(!0),y._toCanvas(M,A)}).then(function(M){return b==="image"?y._canvasToImage(M,A):b==="canvas"?M:y._canvasToBlob(M,A)}).then(function(M){return y._screenState.status=1,y._map.fire("simpleMapScreenshoter.done"),M}).catch(function(M){return y._setElementsVisible(!0),y._screenState.status=1,y._map.fire("simpleMapScreenshoter.error",{e:M}),Promise.reject(M)}),this._screenState.promise)},_setElementsVisible:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(w){var A=y._map._container.querySelectorAll(w),C=!0,M=!1,N=void 0;try{for(var F,j=A[Symbol.iterator]();!(C=(F=j.next()).done);C=!0)F.value.style.opacity=b===!1?0:1}catch(z){M=!0,N=z}finally{try{!C&&j.return&&j.return()}finally{if(M)throw N}}})},_canvasToImage:function(y,b){var w=b.mimeType,A=y.toDataURL(w);return A.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(A)},_canvasToBlob:function(y,b){var w=b.mimeType;return new Promise(function(A,C){y.toBlob(function(M){A(M)},w)})},_toCanvas:function(y,b){var w=b.captionOffset,A=b.caption,C=b.captionFontSize,M=b.captionFont,N=b.captionColor,F=b.captionBgColor,j=this._node,z=j.screenHeight,$=j.screenWidth,pe=document.createElement("canvas");pe.width=$,pe.height=z;for(var Ce=pe.getContext("2d"),Te=Ce.createImageData($,z),ke=0;ke<y.length;++ke)Te.data[ke]=y[ke];Ce.putImageData(Te,0,0),Te=null;var O=document.createElement("canvas"),oe=O.getContext("2d"),we=0,R=0,G=z,he=$;if(this.options.cropImageByInnerWH===!0){for(var W=[],ne=0,X=0;X<z;++X){ne=0;for(var se=0;se<$;++se)y[4*X*$+4*se+4]===0&&ne++;ne===$&&W.push(X)}var V=this._getMinAndMaxOnValuesBreak(W);we=V.min;for(var Y=$,ue=V.max,We=[],U=0,ee=R;ee<Y;++ee){U=0;for(var de=0;de<z;++de)y[4*de*$+4*ee+4]===0&&U++;U===z&&We.push(ee)}var xe=this._getMinAndMaxOnValuesBreak(We);R=xe.min,Y=xe.max,(R===0&&Y===0||Y===null)&&(Y=$),(we===0&&ue===0||ue===null)&&(ue=z),this.options.debugMode===!0&&(console.log("emptyYLine",W),console.log("minMaxY",V),console.log("emptyXLine",We),console.log("minMaxX",xe),console.log("debugX",{}),console.log("debugY",{})),we===0&&ue===z&&R===0&&Y===$||(we+=this.options.onCropBorderSize,ue-=this.options.onCropBorderSize,R+=this.options.onCropBorderSize,Y-=this.options.onCropBorderSize),G=ue-we,he=Y-R,O.width=he,O.height=G}else O.width=he,O.height=G;var Ae=null;return A&&(Ae=typeof A=="function"?A.call(this):A),Ae!==null&&(O.height=O.height+(w+C+w),oe.beginPath(),oe.rect(0,0,O.width,O.height),oe.fillStyle=F,oe.fill(),oe.save()),oe.drawImage(pe,R,we,he,G,0,0,he,G),Ae!==null&&(oe.font=C+"px "+M,oe.fillStyle=N,oe.fillText(Ae,w,G+w+C)),Promise.resolve(O)},_getMinAndMaxOnValuesBreak:function(y){for(var b=0,w=0,A=!1,C=1;C<y.length;C++){if(y[C]-1!==y[C-1]){w=y[C],A=!0;break}b=y[C]}return A===!1&&y[0]>1?(b=0,w=y[0]):A===!1&&(b=y[y.length-1]||0,w=null),{min:b,max:w}},_getPixelData:function(y){var b=this,w=y.domtoimageOptions,A=w===void 0?{}:w;return this._getPixelDataOfNormalMap(A).catch(function(C){return console.warn("May be map size very big on that zoom level, we have error:",C.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),b._getPixelDataOfBigMap(A)})},_getPixelDataOfNormalMap:function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=this._map.getContainer();return this._node={node:b,screenHeight:b.scrollHeight,screenWidth:b.scrollWidth},l.toPixelData(b,y)},_getPixelDataOfBigMap:function(){var y=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=this._map.getContainer(),A=this._map.getPane("mapPane");A.style.width=2*w.clientWidth+"px",A.style.height=2*w.clientHeight+"px",A.style.overflow="hidden";var C=function(){A.style.width="initial",A.style.height="initial",A.style.overflow="initial"};return this._node={node:w,screenHeight:w.scrollHeight,screenWidth:w.scrollWidth},l.toPixelData(w,b).then(function(M){return C(),M}).catch(function(M){return C(),w.scrollHeight>=4e3||w.scrollWidth>=4e3?y.options.onPixelDataFail({plugin:y,node:w,mapPane:A,error:M,domtoimageOptions:b}):Promise.reject(M)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var y=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,b=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");w.appendChild(document.createTextNode(y)),b.appendChild(w)},_onScreenBtn:function(){var y=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(b){var w=typeof y.options.screenName=="function"?y.options.screenName.call(y):y.options.screenName;c.saveAs(b,w+".png")}).catch(function(b){y._map.fire("simpleMapScreenshoter.error",{e:b})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var y=this;return new Promise(function(b){var w=setInterval(function(){y._interaction||(b(),clearInterval(w))},100)})}}),m=(L.Control.SimpleMapScreenshoter=p,L.simpleMapScreenshoter=function(y){return new L.Control.SimpleMapScreenshoter(y)},p);n.default=m,n.SimpleMapScreenshoter=p,Object.defineProperty(n,"__esModule",{value:!0})})})(u0,u0.exports);const i3={class:"drawing-tools"},s3={class:"mb-4"},o3={class:"grid grid-cols-2 gap-2"},a3=["onClick"],l3={class:"text-sm"},u3={key:0,class:"space-y-2"},c3={class:"border rounded overflow-hidden"},h3={class:"p-3 space-y-3"},f3={class:"grid grid-cols-6 gap-2"},d3=["onClick"],p3={class:"space-y-2"},m3={class:"flex items-center gap-2"},g3={class:"flex items-center gap-2"},_3=["value"],v3={key:0,class:"flex items-center gap-2"},y3=Es({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(e,{emit:t}){const n=e,i=t,o=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"},{type:"delete",label:"Supprimer"}],l=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],c=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointill"},{value:"dashdot",label:"Tiret-point"}],p=It("#3B82F6"),m=It(.2),y=It("#2563EB");It(1);const b=It(2),w=It("solid"),A=It({style:!1}),C=Tn(()=>{var z,$;return($=(z=n.selectedShape)==null?void 0:z.properties)!=null&&$.type?["Circle","Rectangle","Polygon"].includes(n.selectedShape.properties.type):!1}),M=z=>{A.value[z]=!A.value[z]},N=z=>{switch(z){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},F=z=>{y.value=z,C.value&&(p.value=z),j({strokeColor:z,fillColor:C.value?z:void 0})},j=z=>{const $={...z};z.strokeStyle&&($.dashArray=N(z.strokeStyle)),z.fillOpacity!==void 0&&($.fillOpacity=parseFloat(z.fillOpacity)),z.strokeOpacity!==void 0&&($.strokeOpacity=parseFloat(z.strokeOpacity)),z.strokeWidth!==void 0&&($.weight=parseInt(z.strokeWidth)),z.strokeColor&&($.color=z.strokeColor),i("style-update",$)};return(z,$)=>(ht(),mt("div",i3,[I("div",s3,[I("div",o3,[(ht(!0),mt(An,null,Gn(o.filter(pe=>pe.type!=="delete"),pe=>(ht(),mt("button",{key:pe.type,class:as(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":z.currentTool===pe.type,"hover:bg-gray-50 border-gray-200":z.currentTool!==pe.type}]),onClick:Ce=>z.$emit("tool-change",pe.type)},[I("span",l3,Nt(pe.label),1)],10,a3))),128))]),z.selectedShape?(ht(),mt("button",{key:0,class:as(["w-full mt-2 flex items-center justify-center p-2 rounded border border-red-500 bg-red-50 hover:bg-red-100 text-red-700 transition-colors duration-200",{"bg-red-100 border-red-600":z.currentTool==="delete"}]),onClick:$[0]||($[0]=pe=>z.$emit("delete-shape"))},$[12]||($[12]=[I("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),I("span",{class:"text-sm font-medium"},"Supprimer la forme",-1)]),2)):un("",!0)]),z.selectedShape?(ht(),mt("div",u3,[I("div",c3,[I("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:$[1]||($[1]=pe=>M("style"))},[$[14]||($[14]=I("span",{class:"font-medium"},"Style",-1)),(ht(),mt("svg",{class:as(["w-5 h-5 transform transition-transform",{"rotate-180":!A.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$[13]||($[13]=[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Rn(I("div",h3,[I("div",f3,[(ht(),mt(An,null,Gn(l,pe=>I("button",{key:pe,class:"w-6 h-6 rounded-full border hover:scale-110 transition-transform",style:dh({backgroundColor:pe}),onClick:Ce=>F(pe)},null,12,d3)),64))]),I("div",p3,[I("div",m3,[$[15]||($[15]=I("span",{class:"text-xs text-gray-500"},"Contour",-1)),Rn(I("input",{type:"color","onUpdate:modelValue":$[2]||($[2]=pe=>y.value=pe),class:"w-6 h-6",onChange:$[3]||($[3]=pe=>j({strokeColor:y.value})),title:"Couleur du contour"},null,544),[[Sr,y.value]]),Rn(I("input",{type:"range","onUpdate:modelValue":$[4]||($[4]=pe=>b.value=pe),min:"1",max:"10",class:"flex-1",onChange:$[5]||($[5]=pe=>j({strokeWidth:b.value})),title:"paisseur du contour"},null,544),[[Sr,b.value]])]),I("div",g3,[$[16]||($[16]=I("span",{class:"text-xs text-gray-500"},"Style",-1)),Rn(I("select",{"onUpdate:modelValue":$[6]||($[6]=pe=>w.value=pe),class:"flex-1 text-sm border rounded px-1 py-0.5",onChange:$[7]||($[7]=pe=>j({strokeStyle:w.value}))},[(ht(),mt(An,null,Gn(c,pe=>I("option",{key:pe.value,value:pe.value},Nt(pe.label),9,_3)),64))],544),[[qs,w.value]])]),C.value?(ht(),mt("div",v3,[$[17]||($[17]=I("span",{class:"text-xs text-gray-500"},"Remplissage",-1)),Rn(I("input",{type:"color","onUpdate:modelValue":$[8]||($[8]=pe=>p.value=pe),class:"w-6 h-6",onChange:$[9]||($[9]=pe=>j({fillColor:p.value})),title:"Couleur de remplissage"},null,544),[[Sr,p.value]]),Rn(I("input",{type:"range","onUpdate:modelValue":$[10]||($[10]=pe=>m.value=pe),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:$[11]||($[11]=pe=>j({fillOpacity:m.value})),title:"Opacit du remplissage"},null,544),[[Sr,m.value]])])):un("",!0)])],512),[[Lv,!A.value.style]])])])):un("",!0)]))}}),b3=Ig(y3,[["__scopeId","data-v-2fd4924b"]]);(()=>{var Ft,an;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),p=(s,a,h,d)=>{if(a&&typeof a=="object"||typeof a=="function")for(let _ of i(a))!l.call(s,_)&&_!==h&&t(s,_,{get:()=>a[_],enumerable:!(d=n(a,_))||d.enumerable});return s},m=(s,a,h)=>(h=s!=null?e(o(s)):{},p(a||!s||!s.__esModule?t(h,"default",{value:s,enumerable:!0}):h,s)),y=c((s,a)=>{function h(){this.__data__=[],this.size=0}a.exports=h}),b=c((s,a)=>{function h(d,_){return d===_||d!==d&&_!==_}a.exports=h}),w=c((s,a)=>{var h=b();function d(_,k){for(var S=_.length;S--;)if(h(_[S][0],k))return S;return-1}a.exports=d}),A=c((s,a)=>{var h=w(),d=Array.prototype,_=d.splice;function k(S){var B=this.__data__,q=h(B,S);if(q<0)return!1;var J=B.length-1;return q==J?B.pop():_.call(B,q,1),--this.size,!0}a.exports=k}),C=c((s,a)=>{var h=w();function d(_){var k=this.__data__,S=h(k,_);return S<0?void 0:k[S][1]}a.exports=d}),M=c((s,a)=>{var h=w();function d(_){return h(this.__data__,_)>-1}a.exports=d}),N=c((s,a)=>{var h=w();function d(_,k){var S=this.__data__,B=h(S,_);return B<0?(++this.size,S.push([_,k])):S[B][1]=k,this}a.exports=d}),F=c((s,a)=>{var h=y(),d=A(),_=C(),k=M(),S=N();function B(q){var J=-1,Be=q==null?0:q.length;for(this.clear();++J<Be;){var Ee=q[J];this.set(Ee[0],Ee[1])}}B.prototype.clear=h,B.prototype.delete=d,B.prototype.get=_,B.prototype.has=k,B.prototype.set=S,a.exports=B}),j=c((s,a)=>{var h=F();function d(){this.__data__=new h,this.size=0}a.exports=d}),z=c((s,a)=>{function h(d){var _=this.__data__,k=_.delete(d);return this.size=_.size,k}a.exports=h}),$=c((s,a)=>{function h(d){return this.__data__.get(d)}a.exports=h}),pe=c((s,a)=>{function h(d){return this.__data__.has(d)}a.exports=h}),Ce=c((s,a)=>{var h=typeof co=="object"&&co&&co.Object===Object&&co;a.exports=h}),Te=c((s,a)=>{var h=Ce(),d=typeof self=="object"&&self&&self.Object===Object&&self,_=h||d||Function("return this")();a.exports=_}),ke=c((s,a)=>{var h=Te(),d=h.Symbol;a.exports=d}),O=c((s,a)=>{var h=ke(),d=Object.prototype,_=d.hasOwnProperty,k=d.toString,S=h?h.toStringTag:void 0;function B(q){var J=_.call(q,S),Be=q[S];try{q[S]=void 0;var Ee=!0}catch{}var Je=k.call(q);return Ee&&(J?q[S]=Be:delete q[S]),Je}a.exports=B}),oe=c((s,a)=>{var h=Object.prototype,d=h.toString;function _(k){return d.call(k)}a.exports=_}),we=c((s,a)=>{var h=ke(),d=O(),_=oe(),k="[object Null]",S="[object Undefined]",B=h?h.toStringTag:void 0;function q(J){return J==null?J===void 0?S:k:B&&B in Object(J)?d(J):_(J)}a.exports=q}),R=c((s,a)=>{function h(d){var _=typeof d;return d!=null&&(_=="object"||_=="function")}a.exports=h}),G=c((s,a)=>{var h=we(),d=R(),_="[object AsyncFunction]",k="[object Function]",S="[object GeneratorFunction]",B="[object Proxy]";function q(J){if(!d(J))return!1;var Be=h(J);return Be==k||Be==S||Be==_||Be==B}a.exports=q}),he=c((s,a)=>{var h=Te(),d=h["__core-js_shared__"];a.exports=d}),W=c((s,a)=>{var h=he(),d=function(){var k=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}();function _(k){return!!d&&d in k}a.exports=_}),ne=c((s,a)=>{var h=Function.prototype,d=h.toString;function _(k){if(k!=null){try{return d.call(k)}catch{}try{return k+""}catch{}}return""}a.exports=_}),X=c((s,a)=>{var h=G(),d=W(),_=R(),k=ne(),S=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,q=Function.prototype,J=Object.prototype,Be=q.toString,Ee=J.hasOwnProperty,Je=RegExp("^"+Be.call(Ee).replace(S,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ut(kt){if(!_(kt)||d(kt))return!1;var Ot=h(kt)?Je:B;return Ot.test(k(kt))}a.exports=ut}),se=c((s,a)=>{function h(d,_){return d==null?void 0:d[_]}a.exports=h}),V=c((s,a)=>{var h=X(),d=se();function _(k,S){var B=d(k,S);return h(B)?B:void 0}a.exports=_}),Y=c((s,a)=>{var h=V(),d=Te(),_=h(d,"Map");a.exports=_}),ue=c((s,a)=>{var h=V(),d=h(Object,"create");a.exports=d}),We=c((s,a)=>{var h=ue();function d(){this.__data__=h?h(null):{},this.size=0}a.exports=d}),U=c((s,a)=>{function h(d){var _=this.has(d)&&delete this.__data__[d];return this.size-=_?1:0,_}a.exports=h}),ee=c((s,a)=>{var h=ue(),d="__lodash_hash_undefined__",_=Object.prototype,k=_.hasOwnProperty;function S(B){var q=this.__data__;if(h){var J=q[B];return J===d?void 0:J}return k.call(q,B)?q[B]:void 0}a.exports=S}),de=c((s,a)=>{var h=ue(),d=Object.prototype,_=d.hasOwnProperty;function k(S){var B=this.__data__;return h?B[S]!==void 0:_.call(B,S)}a.exports=k}),xe=c((s,a)=>{var h=ue(),d="__lodash_hash_undefined__";function _(k,S){var B=this.__data__;return this.size+=this.has(k)?0:1,B[k]=h&&S===void 0?d:S,this}a.exports=_}),Ae=c((s,a)=>{var h=We(),d=U(),_=ee(),k=de(),S=xe();function B(q){var J=-1,Be=q==null?0:q.length;for(this.clear();++J<Be;){var Ee=q[J];this.set(Ee[0],Ee[1])}}B.prototype.clear=h,B.prototype.delete=d,B.prototype.get=_,B.prototype.has=k,B.prototype.set=S,a.exports=B}),_e=c((s,a)=>{var h=Ae(),d=F(),_=Y();function k(){this.size=0,this.__data__={hash:new h,map:new(_||d),string:new h}}a.exports=k}),Ie=c((s,a)=>{function h(d){var _=typeof d;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?d!=="__proto__":d===null}a.exports=h}),Ne=c((s,a)=>{var h=Ie();function d(_,k){var S=_.__data__;return h(k)?S[typeof k=="string"?"string":"hash"]:S.map}a.exports=d}),st=c((s,a)=>{var h=Ne();function d(_){var k=h(this,_).delete(_);return this.size-=k?1:0,k}a.exports=d}),gt=c((s,a)=>{var h=Ne();function d(_){return h(this,_).get(_)}a.exports=d}),ae=c((s,a)=>{var h=Ne();function d(_){return h(this,_).has(_)}a.exports=d}),fe=c((s,a)=>{var h=Ne();function d(_,k){var S=h(this,_),B=S.size;return S.set(_,k),this.size+=S.size==B?0:1,this}a.exports=d}),Re=c((s,a)=>{var h=_e(),d=st(),_=gt(),k=ae(),S=fe();function B(q){var J=-1,Be=q==null?0:q.length;for(this.clear();++J<Be;){var Ee=q[J];this.set(Ee[0],Ee[1])}}B.prototype.clear=h,B.prototype.delete=d,B.prototype.get=_,B.prototype.has=k,B.prototype.set=S,a.exports=B}),De=c((s,a)=>{var h=F(),d=Y(),_=Re(),k=200;function S(B,q){var J=this.__data__;if(J instanceof h){var Be=J.__data__;if(!d||Be.length<k-1)return Be.push([B,q]),this.size=++J.size,this;J=this.__data__=new _(Be)}return J.set(B,q),this.size=J.size,this}a.exports=S}),le=c((s,a)=>{var h=F(),d=j(),_=z(),k=$(),S=pe(),B=De();function q(J){var Be=this.__data__=new h(J);this.size=Be.size}q.prototype.clear=d,q.prototype.delete=_,q.prototype.get=k,q.prototype.has=S,q.prototype.set=B,a.exports=q}),Ze=c((s,a)=>{var h=V(),d=function(){try{var _=h(Object,"defineProperty");return _({},"",{}),_}catch{}}();a.exports=d}),lt=c((s,a)=>{var h=Ze();function d(_,k,S){k=="__proto__"&&h?h(_,k,{configurable:!0,enumerable:!0,value:S,writable:!0}):_[k]=S}a.exports=d}),Qe=c((s,a)=>{var h=lt(),d=b();function _(k,S,B){(B!==void 0&&!d(k[S],B)||B===void 0&&!(S in k))&&h(k,S,B)}a.exports=_}),ot=c((s,a)=>{function h(d){return function(_,k,S){for(var B=-1,q=Object(_),J=S(_),Be=J.length;Be--;){var Ee=J[d?Be:++B];if(k(q[Ee],Ee,q)===!1)break}return _}}a.exports=h}),Oe=c((s,a)=>{var h=ot(),d=h();a.exports=d}),Le=c((s,a)=>{var h=Te(),d=typeof s=="object"&&s&&!s.nodeType&&s,_=d&&typeof a=="object"&&a&&!a.nodeType&&a,k=_&&_.exports===d,S=k?h.Buffer:void 0,B=S?S.allocUnsafe:void 0;function q(J,Be){if(Be)return J.slice();var Ee=J.length,Je=B?B(Ee):new J.constructor(Ee);return J.copy(Je),Je}a.exports=q}),rt=c((s,a)=>{var h=Te(),d=h.Uint8Array;a.exports=d}),vt=c((s,a)=>{var h=rt();function d(_){var k=new _.constructor(_.byteLength);return new h(k).set(new h(_)),k}a.exports=d}),Lt=c((s,a)=>{var h=vt();function d(_,k){var S=k?h(_.buffer):_.buffer;return new _.constructor(S,_.byteOffset,_.length)}a.exports=d}),Ue=c((s,a)=>{function h(d,_){var k=-1,S=d.length;for(_||(_=Array(S));++k<S;)_[k]=d[k];return _}a.exports=h}),Tt=c((s,a)=>{var h=R(),d=Object.create,_=function(){function k(){}return function(S){if(!h(S))return{};if(d)return d(S);k.prototype=S;var B=new k;return k.prototype=void 0,B}}();a.exports=_}),Mt=c((s,a)=>{function h(d,_){return function(k){return d(_(k))}}a.exports=h}),jt=c((s,a)=>{var h=Mt(),d=h(Object.getPrototypeOf,Object);a.exports=d}),Vt=c((s,a)=>{var h=Object.prototype;function d(_){var k=_&&_.constructor,S=typeof k=="function"&&k.prototype||h;return _===S}a.exports=d}),Dt=c((s,a)=>{var h=Tt(),d=jt(),_=Vt();function k(S){return typeof S.constructor=="function"&&!_(S)?h(d(S)):{}}a.exports=k}),Pn=c((s,a)=>{function h(d){return d!=null&&typeof d=="object"}a.exports=h}),tn=c((s,a)=>{var h=we(),d=Pn(),_="[object Arguments]";function k(S){return d(S)&&h(S)==_}a.exports=k}),Kn=c((s,a)=>{var h=tn(),d=Pn(),_=Object.prototype,k=_.hasOwnProperty,S=_.propertyIsEnumerable,B=h(function(){return arguments}())?h:function(q){return d(q)&&k.call(q,"callee")&&!S.call(q,"callee")};a.exports=B}),ln=c((s,a)=>{var h=Array.isArray;a.exports=h}),xn=c((s,a)=>{var h=9007199254740991;function d(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=h}a.exports=d}),Jn=c((s,a)=>{var h=G(),d=xn();function _(k){return k!=null&&d(k.length)&&!h(k)}a.exports=_}),zt=c((s,a)=>{var h=Jn(),d=Pn();function _(k){return d(k)&&h(k)}a.exports=_}),Pi=c((s,a)=>{function h(){return!1}a.exports=h}),Fn=c((s,a)=>{var h=Te(),d=Pi(),_=typeof s=="object"&&s&&!s.nodeType&&s,k=_&&typeof a=="object"&&a&&!a.nodeType&&a,S=k&&k.exports===_,B=S?h.Buffer:void 0,q=B?B.isBuffer:void 0,J=q||d;a.exports=J}),Jr=c((s,a)=>{var h=we(),d=jt(),_=Pn(),k="[object Object]",S=Function.prototype,B=Object.prototype,q=S.toString,J=B.hasOwnProperty,Be=q.call(Object);function Ee(Je){if(!_(Je)||h(Je)!=k)return!1;var ut=d(Je);if(ut===null)return!0;var kt=J.call(ut,"constructor")&&ut.constructor;return typeof kt=="function"&&kt instanceof kt&&q.call(kt)==Be}a.exports=Ee}),_i=c((s,a)=>{var h=we(),d=xn(),_=Pn(),k="[object Arguments]",S="[object Array]",B="[object Boolean]",q="[object Date]",J="[object Error]",Be="[object Function]",Ee="[object Map]",Je="[object Number]",ut="[object Object]",kt="[object RegExp]",Ot="[object Set]",Rt="[object String]",hn="[object WeakMap]",Me="[object ArrayBuffer]",Fe="[object DataView]",Ge="[object Float32Array]",pt="[object Float64Array]",Xe="[object Int8Array]",ct="[object Int16Array]",H="[object Int32Array]",Q="[object Uint8Array]",ve="[object Uint8ClampedArray]",ge="[object Uint16Array]",ye="[object Uint32Array]",be={};be[Ge]=be[pt]=be[Xe]=be[ct]=be[H]=be[Q]=be[ve]=be[ge]=be[ye]=!0,be[k]=be[S]=be[Me]=be[B]=be[Fe]=be[q]=be[J]=be[Be]=be[Ee]=be[Je]=be[ut]=be[kt]=be[Ot]=be[Rt]=be[hn]=!1;function $e(ze){return _(ze)&&d(ze.length)&&!!be[h(ze)]}a.exports=$e}),Yn=c((s,a)=>{function h(d){return function(_){return d(_)}}a.exports=h}),dn=c((s,a)=>{var h=Ce(),d=typeof s=="object"&&s&&!s.nodeType&&s,_=d&&typeof a=="object"&&a&&!a.nodeType&&a,k=_&&_.exports===d,S=k&&h.process,B=function(){try{var q=_&&_.require&&_.require("util").types;return q||S&&S.binding&&S.binding("util")}catch{}}();a.exports=B}),Yt=c((s,a)=>{var h=_i(),d=Yn(),_=dn(),k=_&&_.isTypedArray,S=k?d(k):h;a.exports=S}),Kt=c((s,a)=>{function h(d,_){if(!(_==="constructor"&&typeof d[_]=="function")&&_!="__proto__")return d[_]}a.exports=h}),lr=c((s,a)=>{var h=lt(),d=b(),_=Object.prototype,k=_.hasOwnProperty;function S(B,q,J){var Be=B[q];(!(k.call(B,q)&&d(Be,J))||J===void 0&&!(q in B))&&h(B,q,J)}a.exports=S}),us=c((s,a)=>{var h=lr(),d=lt();function _(k,S,B,q){var J=!B;B||(B={});for(var Be=-1,Ee=S.length;++Be<Ee;){var Je=S[Be],ut=q?q(B[Je],k[Je],Je,B,k):void 0;ut===void 0&&(ut=k[Je]),J?d(B,Je,ut):h(B,Je,ut)}return B}a.exports=_}),Ei=c((s,a)=>{function h(d,_){for(var k=-1,S=Array(d);++k<d;)S[k]=_(k);return S}a.exports=h}),on=c((s,a)=>{var h=9007199254740991,d=/^(?:0|[1-9]\d*)$/;function _(k,S){var B=typeof k;return S=S??h,!!S&&(B=="number"||B!="symbol"&&d.test(k))&&k>-1&&k%1==0&&k<S}a.exports=_}),Ki=c((s,a)=>{var h=Ei(),d=Kn(),_=ln(),k=Fn(),S=on(),B=Yt(),q=Object.prototype,J=q.hasOwnProperty;function Be(Ee,Je){var ut=_(Ee),kt=!ut&&d(Ee),Ot=!ut&&!kt&&k(Ee),Rt=!ut&&!kt&&!Ot&&B(Ee),hn=ut||kt||Ot||Rt,Me=hn?h(Ee.length,String):[],Fe=Me.length;for(var Ge in Ee)(Je||J.call(Ee,Ge))&&!(hn&&(Ge=="length"||Ot&&(Ge=="offset"||Ge=="parent")||Rt&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||S(Ge,Fe)))&&Me.push(Ge);return Me}a.exports=Be}),cs=c((s,a)=>{function h(d){var _=[];if(d!=null)for(var k in Object(d))_.push(k);return _}a.exports=h}),oi=c((s,a)=>{var h=R(),d=Vt(),_=cs(),k=Object.prototype,S=k.hasOwnProperty;function B(q){if(!h(q))return _(q);var J=d(q),Be=[];for(var Ee in q)Ee=="constructor"&&(J||!S.call(q,Ee))||Be.push(Ee);return Be}a.exports=B}),Un=c((s,a)=>{var h=Ki(),d=oi(),_=Jn();function k(S){return _(S)?h(S,!0):d(S)}a.exports=k}),Ut=c((s,a)=>{var h=us(),d=Un();function _(k){return h(k,d(k))}a.exports=_}),ai=c((s,a)=>{var h=Qe(),d=Le(),_=Lt(),k=Ue(),S=Dt(),B=Kn(),q=ln(),J=zt(),Be=Fn(),Ee=G(),Je=R(),ut=Jr(),kt=Yt(),Ot=Kt(),Rt=Ut();function hn(Me,Fe,Ge,pt,Xe,ct,H){var Q=Ot(Me,Ge),ve=Ot(Fe,Ge),ge=H.get(ve);if(ge){h(Me,Ge,ge);return}var ye=ct?ct(Q,ve,Ge+"",Me,Fe,H):void 0,be=ye===void 0;if(be){var $e=q(ve),ze=!$e&&Be(ve),He=!$e&&!ze&&kt(ve);ye=ve,$e||ze||He?q(Q)?ye=Q:J(Q)?ye=k(Q):ze?(be=!1,ye=d(ve,!0)):He?(be=!1,ye=_(ve,!0)):ye=[]:ut(ve)||B(ve)?(ye=Q,B(Q)?ye=Rt(Q):(!Je(Q)||Ee(Q))&&(ye=S(ve))):be=!1}be&&(H.set(ve,ye),Xe(ye,ve,pt,ct,H),H.delete(ve)),h(Me,Ge,ye)}a.exports=hn}),go=c((s,a)=>{var h=le(),d=Qe(),_=Oe(),k=ai(),S=R(),B=Un(),q=Kt();function J(Be,Ee,Je,ut,kt){Be!==Ee&&_(Ee,function(Ot,Rt){if(kt||(kt=new h),S(Ot))k(Be,Ee,Rt,Je,J,ut,kt);else{var hn=ut?ut(q(Be,Rt),Ot,Rt+"",Be,Ee,kt):void 0;hn===void 0&&(hn=Ot),d(Be,Rt,hn)}},B)}a.exports=J}),Ji=c((s,a)=>{function h(d){return d}a.exports=h}),Ai=c((s,a)=>{function h(d,_,k){switch(k.length){case 0:return d.call(_);case 1:return d.call(_,k[0]);case 2:return d.call(_,k[0],k[1]);case 3:return d.call(_,k[0],k[1],k[2])}return d.apply(_,k)}a.exports=h}),vi=c((s,a)=>{var h=Ai(),d=Math.max;function _(k,S,B){return S=d(S===void 0?k.length-1:S,0),function(){for(var q=arguments,J=-1,Be=d(q.length-S,0),Ee=Array(Be);++J<Be;)Ee[J]=q[S+J];J=-1;for(var Je=Array(S+1);++J<S;)Je[J]=q[J];return Je[S]=B(Ee),h(k,this,Je)}}a.exports=_}),Si=c((s,a)=>{function h(d){return function(){return d}}a.exports=h}),Yr=c((s,a)=>{var h=Si(),d=Ze(),_=Ji(),k=d?function(S,B){return d(S,"toString",{configurable:!0,enumerable:!1,value:h(B),writable:!0})}:_;a.exports=k}),yi=c((s,a)=>{var h=800,d=16,_=Date.now;function k(S){var B=0,q=0;return function(){var J=_(),Be=d-(J-q);if(q=J,Be>0){if(++B>=h)return arguments[0]}else B=0;return S.apply(void 0,arguments)}}a.exports=k}),hs=c((s,a)=>{var h=Yr(),d=yi(),_=d(h);a.exports=_}),_o=c((s,a)=>{var h=Ji(),d=vi(),_=hs();function k(S,B){return _(d(S,B,h),S+"")}a.exports=k}),Uo=c((s,a)=>{var h=b(),d=Jn(),_=on(),k=R();function S(B,q,J){if(!k(J))return!1;var Be=typeof q;return(Be=="number"?d(J)&&_(q,J.length):Be=="string"&&q in J)?h(J[q],B):!1}a.exports=S}),qo=c((s,a)=>{var h=_o(),d=Uo();function _(k){return h(function(S,B){var q=-1,J=B.length,Be=J>1?B[J-1]:void 0,Ee=J>2?B[2]:void 0;for(Be=k.length>3&&typeof Be=="function"?(J--,Be):void 0,Ee&&d(B[0],B[1],Ee)&&(Be=J<3?void 0:Be,J=1),S=Object(S);++q<J;){var Je=B[q];Je&&k(S,Je,q,Be)}return S})}a.exports=_}),Ss=c((s,a)=>{var h=go(),d=qo(),_=d(function(k,S,B){h(k,S,B)});a.exports=_}),Ws=c((s,a)=>{var h=we(),d=Pn(),_="[object Symbol]";function k(S){return typeof S=="symbol"||d(S)&&h(S)==_}a.exports=k}),vo=c((s,a)=>{var h=ln(),d=Ws(),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/;function S(B,q){if(h(B))return!1;var J=typeof B;return J=="number"||J=="symbol"||J=="boolean"||B==null||d(B)?!0:k.test(B)||!_.test(B)||q!=null&&B in Object(q)}a.exports=S}),_l=c((s,a)=>{var h=Re(),d="Expected a function";function _(k,S){if(typeof k!="function"||S!=null&&typeof S!="function")throw new TypeError(d);var B=function(){var q=arguments,J=S?S.apply(this,q):q[0],Be=B.cache;if(Be.has(J))return Be.get(J);var Ee=k.apply(this,q);return B.cache=Be.set(J,Ee)||Be,Ee};return B.cache=new(_.Cache||h),B}_.Cache=h,a.exports=_}),vl=c((s,a)=>{var h=_l(),d=500;function _(k){var S=h(k,function(q){return B.size===d&&B.clear(),q}),B=S.cache;return S}a.exports=_}),$o=c((s,a)=>{var h=vl(),d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_=/\\(\\)?/g,k=h(function(S){var B=[];return S.charCodeAt(0)===46&&B.push(""),S.replace(d,function(q,J,Be,Ee){B.push(Be?Ee.replace(_,"$1"):J||q)}),B});a.exports=k}),za=c((s,a)=>{function h(d,_){for(var k=-1,S=d==null?0:d.length,B=Array(S);++k<S;)B[k]=_(d[k],k,d);return B}a.exports=h}),yl=c((s,a)=>{var h=ke(),d=za(),_=ln(),k=Ws(),S=h?h.prototype:void 0,B=S?S.toString:void 0;function q(J){if(typeof J=="string")return J;if(_(J))return d(J,q)+"";if(k(J))return B?B.call(J):"";var Be=J+"";return Be=="0"&&1/J==-1/0?"-0":Be}a.exports=q}),yo=c((s,a)=>{var h=yl();function d(_){return _==null?"":h(_)}a.exports=d}),bo=c((s,a)=>{var h=ln(),d=vo(),_=$o(),k=yo();function S(B,q){return h(B)?B:d(B,q)?[B]:_(k(B))}a.exports=S}),pa=c((s,a)=>{var h=Ws();function d(_){if(typeof _=="string"||h(_))return _;var k=_+"";return k=="0"&&1/_==-1/0?"-0":k}a.exports=d}),Ua=c((s,a)=>{var h=bo(),d=pa();function _(k,S){S=h(S,k);for(var B=0,q=S.length;k!=null&&B<q;)k=k[d(S[B++])];return B&&B==q?k:void 0}a.exports=_}),bi=c((s,a)=>{var h=Ua();function d(_,k,S){var B=_==null?void 0:h(_,k);return B===void 0?S:B}a.exports=d}),On=c((s,a)=>{(function(h,d){typeof s=="object"&&typeof a<"u"?a.exports=d():(h=h||self).RBush=d()})(s,function(){function h(Me,Fe,Ge,pt,Xe){(function ct(H,Q,ve,ge,ye){for(;ge>ve;){if(ge-ve>600){var be=ge-ve+1,$e=Q-ve+1,ze=Math.log(be),He=.5*Math.exp(2*ze/3),it=.5*Math.sqrt(ze*He*(be-He)/be)*($e-be/2<0?-1:1),nt=Math.max(ve,Math.floor(Q-$e*He/be+it)),Et=Math.min(ge,Math.floor(Q+(be-$e)*He/be+it));ct(H,Q,nt,Et,ye)}var Gt=H[Q],Jt=ve,en=ge;for(d(H,ve,Q),ye(H[ge],Gt)>0&&d(H,ve,ge);Jt<en;){for(d(H,Jt,en),Jt++,en--;ye(H[Jt],Gt)<0;)Jt++;for(;ye(H[en],Gt)>0;)en--}ye(H[ve],Gt)===0?d(H,ve,en):d(H,++en,ge),en<=Q&&(ve=en+1),Q<=en&&(ge=en-1)}})(Me,Fe,Ge||0,pt||Me.length-1,Xe||_)}function d(Me,Fe,Ge){var pt=Me[Fe];Me[Fe]=Me[Ge],Me[Ge]=pt}function _(Me,Fe){return Me<Fe?-1:Me>Fe?1:0}var k=function(Me){Me===void 0&&(Me=9),this._maxEntries=Math.max(4,Me),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function S(Me,Fe,Ge){if(!Ge)return Fe.indexOf(Me);for(var pt=0;pt<Fe.length;pt++)if(Ge(Me,Fe[pt]))return pt;return-1}function B(Me,Fe){q(Me,0,Me.children.length,Fe,Me)}function q(Me,Fe,Ge,pt,Xe){Xe||(Xe=Rt(null)),Xe.minX=1/0,Xe.minY=1/0,Xe.maxX=-1/0,Xe.maxY=-1/0;for(var ct=Fe;ct<Ge;ct++){var H=Me.children[ct];J(Xe,Me.leaf?pt(H):H)}return Xe}function J(Me,Fe){return Me.minX=Math.min(Me.minX,Fe.minX),Me.minY=Math.min(Me.minY,Fe.minY),Me.maxX=Math.max(Me.maxX,Fe.maxX),Me.maxY=Math.max(Me.maxY,Fe.maxY),Me}function Be(Me,Fe){return Me.minX-Fe.minX}function Ee(Me,Fe){return Me.minY-Fe.minY}function Je(Me){return(Me.maxX-Me.minX)*(Me.maxY-Me.minY)}function ut(Me){return Me.maxX-Me.minX+(Me.maxY-Me.minY)}function kt(Me,Fe){return Me.minX<=Fe.minX&&Me.minY<=Fe.minY&&Fe.maxX<=Me.maxX&&Fe.maxY<=Me.maxY}function Ot(Me,Fe){return Fe.minX<=Me.maxX&&Fe.minY<=Me.maxY&&Fe.maxX>=Me.minX&&Fe.maxY>=Me.minY}function Rt(Me){return{children:Me,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hn(Me,Fe,Ge,pt,Xe){for(var ct=[Fe,Ge];ct.length;)if(!((Ge=ct.pop())-(Fe=ct.pop())<=pt)){var H=Fe+Math.ceil((Ge-Fe)/pt/2)*pt;h(Me,H,Fe,Ge,Xe),ct.push(Fe,H,H,Ge)}}return k.prototype.all=function(){return this._all(this.data,[])},k.prototype.search=function(Me){var Fe=this.data,Ge=[];if(!Ot(Me,Fe))return Ge;for(var pt=this.toBBox,Xe=[];Fe;){for(var ct=0;ct<Fe.children.length;ct++){var H=Fe.children[ct],Q=Fe.leaf?pt(H):H;Ot(Me,Q)&&(Fe.leaf?Ge.push(H):kt(Me,Q)?this._all(H,Ge):Xe.push(H))}Fe=Xe.pop()}return Ge},k.prototype.collides=function(Me){var Fe=this.data;if(!Ot(Me,Fe))return!1;for(var Ge=[];Fe;){for(var pt=0;pt<Fe.children.length;pt++){var Xe=Fe.children[pt],ct=Fe.leaf?this.toBBox(Xe):Xe;if(Ot(Me,ct)){if(Fe.leaf||kt(Me,ct))return!0;Ge.push(Xe)}}Fe=Ge.pop()}return!1},k.prototype.load=function(Me){if(!Me||!Me.length)return this;if(Me.length<this._minEntries){for(var Fe=0;Fe<Me.length;Fe++)this.insert(Me[Fe]);return this}var Ge=this._build(Me.slice(),0,Me.length-1,0);if(this.data.children.length)if(this.data.height===Ge.height)this._splitRoot(this.data,Ge);else{if(this.data.height<Ge.height){var pt=this.data;this.data=Ge,Ge=pt}this._insert(Ge,this.data.height-Ge.height-1,!0)}else this.data=Ge;return this},k.prototype.insert=function(Me){return Me&&this._insert(Me,this.data.height-1),this},k.prototype.clear=function(){return this.data=Rt([]),this},k.prototype.remove=function(Me,Fe){if(!Me)return this;for(var Ge,pt,Xe,ct=this.data,H=this.toBBox(Me),Q=[],ve=[];ct||Q.length;){if(ct||(ct=Q.pop(),pt=Q[Q.length-1],Ge=ve.pop(),Xe=!0),ct.leaf){var ge=S(Me,ct.children,Fe);if(ge!==-1)return ct.children.splice(ge,1),Q.push(ct),this._condense(Q),this}Xe||ct.leaf||!kt(ct,H)?pt?(Ge++,ct=pt.children[Ge],Xe=!1):ct=null:(Q.push(ct),ve.push(Ge),Ge=0,pt=ct,ct=ct.children[0])}return this},k.prototype.toBBox=function(Me){return Me},k.prototype.compareMinX=function(Me,Fe){return Me.minX-Fe.minX},k.prototype.compareMinY=function(Me,Fe){return Me.minY-Fe.minY},k.prototype.toJSON=function(){return this.data},k.prototype.fromJSON=function(Me){return this.data=Me,this},k.prototype._all=function(Me,Fe){for(var Ge=[];Me;)Me.leaf?Fe.push.apply(Fe,Me.children):Ge.push.apply(Ge,Me.children),Me=Ge.pop();return Fe},k.prototype._build=function(Me,Fe,Ge,pt){var Xe,ct=Ge-Fe+1,H=this._maxEntries;if(ct<=H)return B(Xe=Rt(Me.slice(Fe,Ge+1)),this.toBBox),Xe;pt||(pt=Math.ceil(Math.log(ct)/Math.log(H)),H=Math.ceil(ct/Math.pow(H,pt-1))),(Xe=Rt([])).leaf=!1,Xe.height=pt;var Q=Math.ceil(ct/H),ve=Q*Math.ceil(Math.sqrt(H));hn(Me,Fe,Ge,ve,this.compareMinX);for(var ge=Fe;ge<=Ge;ge+=ve){var ye=Math.min(ge+ve-1,Ge);hn(Me,ge,ye,Q,this.compareMinY);for(var be=ge;be<=ye;be+=Q){var $e=Math.min(be+Q-1,ye);Xe.children.push(this._build(Me,be,$e,pt-1))}}return B(Xe,this.toBBox),Xe},k.prototype._chooseSubtree=function(Me,Fe,Ge,pt){for(;pt.push(Fe),!Fe.leaf&&pt.length-1!==Ge;){for(var Xe=1/0,ct=1/0,H=void 0,Q=0;Q<Fe.children.length;Q++){var ve=Fe.children[Q],ge=Je(ve),ye=(be=Me,$e=ve,(Math.max($e.maxX,be.maxX)-Math.min($e.minX,be.minX))*(Math.max($e.maxY,be.maxY)-Math.min($e.minY,be.minY))-ge);ye<ct?(ct=ye,Xe=ge<Xe?ge:Xe,H=ve):ye===ct&&ge<Xe&&(Xe=ge,H=ve)}Fe=H||Fe.children[0]}var be,$e;return Fe},k.prototype._insert=function(Me,Fe,Ge){var pt=Ge?Me:this.toBBox(Me),Xe=[],ct=this._chooseSubtree(pt,this.data,Fe,Xe);for(ct.children.push(Me),J(ct,pt);Fe>=0&&Xe[Fe].children.length>this._maxEntries;)this._split(Xe,Fe),Fe--;this._adjustParentBBoxes(pt,Xe,Fe)},k.prototype._split=function(Me,Fe){var Ge=Me[Fe],pt=Ge.children.length,Xe=this._minEntries;this._chooseSplitAxis(Ge,Xe,pt);var ct=this._chooseSplitIndex(Ge,Xe,pt),H=Rt(Ge.children.splice(ct,Ge.children.length-ct));H.height=Ge.height,H.leaf=Ge.leaf,B(Ge,this.toBBox),B(H,this.toBBox),Fe?Me[Fe-1].children.push(H):this._splitRoot(Ge,H)},k.prototype._splitRoot=function(Me,Fe){this.data=Rt([Me,Fe]),this.data.height=Me.height+1,this.data.leaf=!1,B(this.data,this.toBBox)},k.prototype._chooseSplitIndex=function(Me,Fe,Ge){for(var pt,Xe,ct,H,Q,ve,ge,ye=1/0,be=1/0,$e=Fe;$e<=Ge-Fe;$e++){var ze=q(Me,0,$e,this.toBBox),He=q(Me,$e,Ge,this.toBBox),it=(Xe=ze,ct=He,H=void 0,Q=void 0,ve=void 0,ge=void 0,H=Math.max(Xe.minX,ct.minX),Q=Math.max(Xe.minY,ct.minY),ve=Math.min(Xe.maxX,ct.maxX),ge=Math.min(Xe.maxY,ct.maxY),Math.max(0,ve-H)*Math.max(0,ge-Q)),nt=Je(ze)+Je(He);it<ye?(ye=it,pt=$e,be=nt<be?nt:be):it===ye&&nt<be&&(be=nt,pt=$e)}return pt||Ge-Fe},k.prototype._chooseSplitAxis=function(Me,Fe,Ge){var pt=Me.leaf?this.compareMinX:Be,Xe=Me.leaf?this.compareMinY:Ee;this._allDistMargin(Me,Fe,Ge,pt)<this._allDistMargin(Me,Fe,Ge,Xe)&&Me.children.sort(pt)},k.prototype._allDistMargin=function(Me,Fe,Ge,pt){Me.children.sort(pt);for(var Xe=this.toBBox,ct=q(Me,0,Fe,Xe),H=q(Me,Ge-Fe,Ge,Xe),Q=ut(ct)+ut(H),ve=Fe;ve<Ge-Fe;ve++){var ge=Me.children[ve];J(ct,Me.leaf?Xe(ge):ge),Q+=ut(ct)}for(var ye=Ge-Fe-1;ye>=Fe;ye--){var be=Me.children[ye];J(H,Me.leaf?Xe(be):be),Q+=ut(H)}return Q},k.prototype._adjustParentBBoxes=function(Me,Fe,Ge){for(var pt=Ge;pt>=0;pt--)J(Fe[pt],Me)},k.prototype._condense=function(Me){for(var Fe=Me.length-1,Ge=void 0;Fe>=0;Fe--)Me[Fe].children.length===0?Fe>0?(Ge=Me[Fe-1].children).splice(Ge.indexOf(Me[Fe]),1):this.clear():B(Me[Fe],this.toBBox)},k})}),vn=c(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(ge,ye,be){be===void 0&&(be={});var $e={type:"Feature"};return(be.id===0||be.id)&&($e.id=be.id),be.bbox&&($e.bbox=be.bbox),$e.properties=ye||{},$e.geometry=ge,$e}s.feature=a;function h(ge,ye,be){switch(ge){case"Point":return d(ye).geometry;case"LineString":return B(ye).geometry;case"Polygon":return k(ye).geometry;case"MultiPoint":return Ee(ye).geometry;case"MultiLineString":return Be(ye).geometry;case"MultiPolygon":return Je(ye).geometry;default:throw new Error(ge+" is invalid")}}s.geometry=h;function d(ge,ye,be){if(be===void 0&&(be={}),!ge)throw new Error("coordinates is required");if(!Array.isArray(ge))throw new Error("coordinates must be an Array");if(ge.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ct(ge[0])||!ct(ge[1]))throw new Error("coordinates must contain numbers");var $e={type:"Point",coordinates:ge};return a($e,ye,be)}s.point=d;function _(ge,ye,be){return be===void 0&&(be={}),J(ge.map(function($e){return d($e,ye)}),be)}s.points=_;function k(ge,ye,be){be===void 0&&(be={});for(var $e=0,ze=ge;$e<ze.length;$e++){var He=ze[$e];if(He.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var it=0;it<He[He.length-1].length;it++)if(He[He.length-1][it]!==He[0][it])throw new Error("First and last Position are not equivalent.")}var nt={type:"Polygon",coordinates:ge};return a(nt,ye,be)}s.polygon=k;function S(ge,ye,be){return be===void 0&&(be={}),J(ge.map(function($e){return k($e,ye)}),be)}s.polygons=S;function B(ge,ye,be){if(be===void 0&&(be={}),ge.length<2)throw new Error("coordinates must be an array of two or more positions");var $e={type:"LineString",coordinates:ge};return a($e,ye,be)}s.lineString=B;function q(ge,ye,be){return be===void 0&&(be={}),J(ge.map(function($e){return B($e,ye)}),be)}s.lineStrings=q;function J(ge,ye){ye===void 0&&(ye={});var be={type:"FeatureCollection"};return ye.id&&(be.id=ye.id),ye.bbox&&(be.bbox=ye.bbox),be.features=ge,be}s.featureCollection=J;function Be(ge,ye,be){be===void 0&&(be={});var $e={type:"MultiLineString",coordinates:ge};return a($e,ye,be)}s.multiLineString=Be;function Ee(ge,ye,be){be===void 0&&(be={});var $e={type:"MultiPoint",coordinates:ge};return a($e,ye,be)}s.multiPoint=Ee;function Je(ge,ye,be){be===void 0&&(be={});var $e={type:"MultiPolygon",coordinates:ge};return a($e,ye,be)}s.multiPolygon=Je;function ut(ge,ye,be){be===void 0&&(be={});var $e={type:"GeometryCollection",geometries:ge};return a($e,ye,be)}s.geometryCollection=ut;function kt(ge,ye){if(ye===void 0&&(ye=0),ye&&!(ye>=0))throw new Error("precision must be a positive number");var be=Math.pow(10,ye||0);return Math.round(ge*be)/be}s.round=kt;function Ot(ge,ye){ye===void 0&&(ye="kilometers");var be=s.factors[ye];if(!be)throw new Error(ye+" units is invalid");return ge*be}s.radiansToLength=Ot;function Rt(ge,ye){ye===void 0&&(ye="kilometers");var be=s.factors[ye];if(!be)throw new Error(ye+" units is invalid");return ge/be}s.lengthToRadians=Rt;function hn(ge,ye){return Fe(Rt(ge,ye))}s.lengthToDegrees=hn;function Me(ge){var ye=ge%360;return ye<0&&(ye+=360),ye}s.bearingToAzimuth=Me;function Fe(ge){var ye=ge%(2*Math.PI);return ye*180/Math.PI}s.radiansToDegrees=Fe;function Ge(ge){var ye=ge%360;return ye*Math.PI/180}s.degreesToRadians=Ge;function pt(ge,ye,be){if(ye===void 0&&(ye="kilometers"),be===void 0&&(be="kilometers"),!(ge>=0))throw new Error("length must be a positive number");return Ot(Rt(ge,ye),be)}s.convertLength=pt;function Xe(ge,ye,be){if(ye===void 0&&(ye="meters"),be===void 0&&(be="kilometers"),!(ge>=0))throw new Error("area must be a positive number");var $e=s.areaFactors[ye];if(!$e)throw new Error("invalid original units");var ze=s.areaFactors[be];if(!ze)throw new Error("invalid final units");return ge/$e*ze}s.convertArea=Xe;function ct(ge){return!isNaN(ge)&&ge!==null&&!Array.isArray(ge)}s.isNumber=ct;function H(ge){return!!ge&&ge.constructor===Object}s.isObject=H;function Q(ge){if(!ge)throw new Error("bbox is required");if(!Array.isArray(ge))throw new Error("bbox must be an Array");if(ge.length!==4&&ge.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");ge.forEach(function(ye){if(!ct(ye))throw new Error("bbox must only contain numbers")})}s.validateBBox=Q;function ve(ge){if(!ge)throw new Error("id is required");if(["string","number"].indexOf(typeof ge)===-1)throw new Error("id must be a number or a string")}s.validateId=ve}),Zs=c(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=vn();function h(Fe,Ge,pt){if(Fe!==null)for(var Xe,ct,H,Q,ve,ge,ye,be=0,$e=0,ze,He=Fe.type,it=He==="FeatureCollection",nt=He==="Feature",Et=it?Fe.features.length:1,Gt=0;Gt<Et;Gt++){ye=it?Fe.features[Gt].geometry:nt?Fe.geometry:Fe,ze=ye?ye.type==="GeometryCollection":!1,ve=ze?ye.geometries.length:1;for(var Jt=0;Jt<ve;Jt++){var en=0,zn=0;if(Q=ze?ye.geometries[Jt]:ye,Q!==null){ge=Q.coordinates;var Vn=Q.type;switch(be=pt&&(Vn==="Polygon"||Vn==="MultiPolygon")?1:0,Vn){case null:break;case"Point":if(Ge(ge,$e,Gt,en,zn)===!1)return!1;$e++,en++;break;case"LineString":case"MultiPoint":for(Xe=0;Xe<ge.length;Xe++){if(Ge(ge[Xe],$e,Gt,en,zn)===!1)return!1;$e++,Vn==="MultiPoint"&&en++}Vn==="LineString"&&en++;break;case"Polygon":case"MultiLineString":for(Xe=0;Xe<ge.length;Xe++){for(ct=0;ct<ge[Xe].length-be;ct++){if(Ge(ge[Xe][ct],$e,Gt,en,zn)===!1)return!1;$e++}Vn==="MultiLineString"&&en++,Vn==="Polygon"&&zn++}Vn==="Polygon"&&en++;break;case"MultiPolygon":for(Xe=0;Xe<ge.length;Xe++){for(zn=0,ct=0;ct<ge[Xe].length;ct++){for(H=0;H<ge[Xe][ct].length-be;H++){if(Ge(ge[Xe][ct][H],$e,Gt,en,zn)===!1)return!1;$e++}zn++}en++}break;case"GeometryCollection":for(Xe=0;Xe<Q.geometries.length;Xe++)if(h(Q.geometries[Xe],Ge,pt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function d(Fe,Ge,pt,Xe){var ct=pt;return h(Fe,function(H,Q,ve,ge,ye){Q===0&&pt===void 0?ct=H:ct=Ge(ct,H,Q,ve,ge,ye)},Xe),ct}function _(Fe,Ge){var pt;switch(Fe.type){case"FeatureCollection":for(pt=0;pt<Fe.features.length&&Ge(Fe.features[pt].properties,pt)!==!1;pt++);break;case"Feature":Ge(Fe.properties,0);break}}function k(Fe,Ge,pt){var Xe=pt;return _(Fe,function(ct,H){H===0&&pt===void 0?Xe=ct:Xe=Ge(Xe,ct,H)}),Xe}function S(Fe,Ge){if(Fe.type==="Feature")Ge(Fe,0);else if(Fe.type==="FeatureCollection")for(var pt=0;pt<Fe.features.length&&Ge(Fe.features[pt],pt)!==!1;pt++);}function B(Fe,Ge,pt){var Xe=pt;return S(Fe,function(ct,H){H===0&&pt===void 0?Xe=ct:Xe=Ge(Xe,ct,H)}),Xe}function q(Fe){var Ge=[];return h(Fe,function(pt){Ge.push(pt)}),Ge}function J(Fe,Ge){var pt,Xe,ct,H,Q,ve,ge,ye,be,$e,ze=0,He=Fe.type==="FeatureCollection",it=Fe.type==="Feature",nt=He?Fe.features.length:1;for(pt=0;pt<nt;pt++){for(ve=He?Fe.features[pt].geometry:it?Fe.geometry:Fe,ye=He?Fe.features[pt].properties:it?Fe.properties:{},be=He?Fe.features[pt].bbox:it?Fe.bbox:void 0,$e=He?Fe.features[pt].id:it?Fe.id:void 0,ge=ve?ve.type==="GeometryCollection":!1,Q=ge?ve.geometries.length:1,ct=0;ct<Q;ct++){if(H=ge?ve.geometries[ct]:ve,H===null){if(Ge(null,ze,ye,be,$e)===!1)return!1;continue}switch(H.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Ge(H,ze,ye,be,$e)===!1)return!1;break}case"GeometryCollection":{for(Xe=0;Xe<H.geometries.length;Xe++)if(Ge(H.geometries[Xe],ze,ye,be,$e)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ze++}}function Be(Fe,Ge,pt){var Xe=pt;return J(Fe,function(ct,H,Q,ve,ge){H===0&&pt===void 0?Xe=ct:Xe=Ge(Xe,ct,H,Q,ve,ge)}),Xe}function Ee(Fe,Ge){J(Fe,function(pt,Xe,ct,H,Q){var ve=pt===null?null:pt.type;switch(ve){case null:case"Point":case"LineString":case"Polygon":return Ge(a.feature(pt,ct,{bbox:H,id:Q}),Xe,0)===!1?!1:void 0}var ge;switch(ve){case"MultiPoint":ge="Point";break;case"MultiLineString":ge="LineString";break;case"MultiPolygon":ge="Polygon";break}for(var ye=0;ye<pt.coordinates.length;ye++){var be=pt.coordinates[ye],$e={type:ge,coordinates:be};if(Ge(a.feature($e,ct),Xe,ye)===!1)return!1}})}function Je(Fe,Ge,pt){var Xe=pt;return Ee(Fe,function(ct,H,Q){H===0&&Q===0&&pt===void 0?Xe=ct:Xe=Ge(Xe,ct,H,Q)}),Xe}function ut(Fe,Ge){Ee(Fe,function(pt,Xe,ct){var H=0;if(pt.geometry){var Q=pt.geometry.type;if(!(Q==="Point"||Q==="MultiPoint")){var ve,ge=0,ye=0,be=0;if(h(pt,function($e,ze,He,it,nt){if(ve===void 0||Xe>ge||it>ye||nt>be){ve=$e,ge=Xe,ye=it,be=nt,H=0;return}var Et=a.lineString([ve,$e],pt.properties);if(Ge(Et,Xe,ct,nt,H)===!1)return!1;H++,ve=$e})===!1)return!1}}})}function kt(Fe,Ge,pt){var Xe=pt,ct=!1;return ut(Fe,function(H,Q,ve,ge,ye){ct===!1&&pt===void 0?Xe=H:Xe=Ge(Xe,H,Q,ve,ge,ye),ct=!0}),Xe}function Ot(Fe,Ge){if(!Fe)throw new Error("geojson is required");Ee(Fe,function(pt,Xe,ct){if(pt.geometry!==null){var H=pt.geometry.type,Q=pt.geometry.coordinates;switch(H){case"LineString":if(Ge(pt,Xe,ct,0,0)===!1)return!1;break;case"Polygon":for(var ve=0;ve<Q.length;ve++)if(Ge(a.lineString(Q[ve],pt.properties),Xe,ct,ve)===!1)return!1;break}}})}function Rt(Fe,Ge,pt){var Xe=pt;return Ot(Fe,function(ct,H,Q,ve){H===0&&pt===void 0?Xe=ct:Xe=Ge(Xe,ct,H,Q,ve)}),Xe}function hn(Fe,Ge){if(Ge=Ge||{},!a.isObject(Ge))throw new Error("options is invalid");var pt=Ge.featureIndex||0,Xe=Ge.multiFeatureIndex||0,ct=Ge.geometryIndex||0,H=Ge.segmentIndex||0,Q=Ge.properties,ve;switch(Fe.type){case"FeatureCollection":pt<0&&(pt=Fe.features.length+pt),Q=Q||Fe.features[pt].properties,ve=Fe.features[pt].geometry;break;case"Feature":Q=Q||Fe.properties,ve=Fe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ve=Fe;break;default:throw new Error("geojson is invalid")}if(ve===null)return null;var ge=ve.coordinates;switch(ve.type){case"Point":case"MultiPoint":return null;case"LineString":return H<0&&(H=ge.length+H-1),a.lineString([ge[H],ge[H+1]],Q,Ge);case"Polygon":return ct<0&&(ct=ge.length+ct),H<0&&(H=ge[ct].length+H-1),a.lineString([ge[ct][H],ge[ct][H+1]],Q,Ge);case"MultiLineString":return Xe<0&&(Xe=ge.length+Xe),H<0&&(H=ge[Xe].length+H-1),a.lineString([ge[Xe][H],ge[Xe][H+1]],Q,Ge);case"MultiPolygon":return Xe<0&&(Xe=ge.length+Xe),ct<0&&(ct=ge[Xe].length+ct),H<0&&(H=ge[Xe][ct].length-H-1),a.lineString([ge[Xe][ct][H],ge[Xe][ct][H+1]],Q,Ge)}throw new Error("geojson is invalid")}function Me(Fe,Ge){if(Ge=Ge||{},!a.isObject(Ge))throw new Error("options is invalid");var pt=Ge.featureIndex||0,Xe=Ge.multiFeatureIndex||0,ct=Ge.geometryIndex||0,H=Ge.coordIndex||0,Q=Ge.properties,ve;switch(Fe.type){case"FeatureCollection":pt<0&&(pt=Fe.features.length+pt),Q=Q||Fe.features[pt].properties,ve=Fe.features[pt].geometry;break;case"Feature":Q=Q||Fe.properties,ve=Fe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ve=Fe;break;default:throw new Error("geojson is invalid")}if(ve===null)return null;var ge=ve.coordinates;switch(ve.type){case"Point":return a.point(ge,Q,Ge);case"MultiPoint":return Xe<0&&(Xe=ge.length+Xe),a.point(ge[Xe],Q,Ge);case"LineString":return H<0&&(H=ge.length+H),a.point(ge[H],Q,Ge);case"Polygon":return ct<0&&(ct=ge.length+ct),H<0&&(H=ge[ct].length+H),a.point(ge[ct][H],Q,Ge);case"MultiLineString":return Xe<0&&(Xe=ge.length+Xe),H<0&&(H=ge[Xe].length+H),a.point(ge[Xe][H],Q,Ge);case"MultiPolygon":return Xe<0&&(Xe=ge.length+Xe),ct<0&&(ct=ge[Xe].length+ct),H<0&&(H=ge[Xe][ct].length-H),a.point(ge[Xe][ct][H],Q,Ge)}throw new Error("geojson is invalid")}s.coordAll=q,s.coordEach=h,s.coordReduce=d,s.featureEach=S,s.featureReduce=B,s.findPoint=Me,s.findSegment=hn,s.flattenEach=Ee,s.flattenReduce=Je,s.geomEach=J,s.geomReduce=Be,s.lineEach=Ot,s.lineReduce=Rt,s.propEach=_,s.propReduce=k,s.segmentEach=ut,s.segmentReduce=kt}),Ms=c(s=>{Object.defineProperty(s,"__esModule",{value:!0});var a=Zs();function h(d){var _=[1/0,1/0,-1/0,-1/0];return a.coordEach(d,function(k){_[0]>k[0]&&(_[0]=k[0]),_[1]>k[1]&&(_[1]=k[1]),_[2]<k[0]&&(_[2]=k[0]),_[3]<k[1]&&(_[3]=k[1])}),_}h.default=h,s.default=h}),fs=c((s,a)=>{var h=On(),d=vn(),_=Zs(),k=Ms().default,S=_.featureEach;_.coordEach,d.polygon;var B=d.featureCollection;function q(J){var Be=new h(J);return Be.insert=function(Ee){if(Ee.type!=="Feature")throw new Error("invalid feature");return Ee.bbox=Ee.bbox?Ee.bbox:k(Ee),h.prototype.insert.call(this,Ee)},Be.load=function(Ee){var Je=[];return Array.isArray(Ee)?Ee.forEach(function(ut){if(ut.type!=="Feature")throw new Error("invalid features");ut.bbox=ut.bbox?ut.bbox:k(ut),Je.push(ut)}):S(Ee,function(ut){if(ut.type!=="Feature")throw new Error("invalid features");ut.bbox=ut.bbox?ut.bbox:k(ut),Je.push(ut)}),h.prototype.load.call(this,Je)},Be.remove=function(Ee,Je){if(Ee.type!=="Feature")throw new Error("invalid feature");return Ee.bbox=Ee.bbox?Ee.bbox:k(Ee),h.prototype.remove.call(this,Ee,Je)},Be.clear=function(){return h.prototype.clear.call(this)},Be.search=function(Ee){var Je=h.prototype.search.call(this,this.toBBox(Ee));return B(Je)},Be.collides=function(Ee){return h.prototype.collides.call(this,this.toBBox(Ee))},Be.all=function(){var Ee=h.prototype.all.call(this);return B(Ee)},Be.toJSON=function(){return h.prototype.toJSON.call(this)},Be.fromJSON=function(Ee){return h.prototype.fromJSON.call(this,Ee)},Be.toBBox=function(Ee){var Je;if(Ee.bbox)Je=Ee.bbox;else if(Array.isArray(Ee)&&Ee.length===4)Je=Ee;else if(Array.isArray(Ee)&&Ee.length===6)Je=[Ee[0],Ee[1],Ee[3],Ee[4]];else if(Ee.type==="Feature")Je=k(Ee);else if(Ee.type==="FeatureCollection")Je=k(Ee);else throw new Error("invalid geojson");return{minX:Je[0],minY:Je[1],maxX:Je[2],maxY:Je[3]}},Be}a.exports=q,a.exports.default=q});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,d=arguments[1],_=0;_<h;_++)if(s.call(d,a[_],_,a))return _;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var a=Object(this),h=a.length>>>0,d=arguments[1],_=0;_<h;_++){var k=a[_];if(s.call(d,k,_,a))return k}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var a=1;a<arguments.length;a++){var h=arguments[a];if(h!=null)for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(s[d]=h[d])}return s}),function(s){s.forEach(function(a){a.hasOwnProperty("remove")||Object.defineProperty(a,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,a){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),d=h.length>>>0;if(d===0)return!1;var _=a|0,k=Math.max(_>=0?_:d-Math.abs(_),0);function S(B,q){return B===q||typeof B=="number"&&typeof q=="number"&&isNaN(B)&&isNaN(q)}for(;k<d;){if(S(h[k],s))return!0;k++}return!1}});var wo={version:"2.18.3"},bn=m(Ss()),jn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ks={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Nr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ur={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},qa={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},Vo={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},ds={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},ur={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},ps={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},xo={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Bs={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},ma={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Js={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},ga={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Yi={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},Ts={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},Ys={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},Go={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},Lr={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},$a={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Ho={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},gn={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},yn={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},Mi={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Nn={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},_a={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},Wo={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Xs=Js,Bi={en:jn,de:Ks,it:Nr,id:Ur,ro:qa,ru:Vo,es:ds,nl:ur,fr:ps,pt:Xs,pt_br:ma,pt_pt:Js,zh:xo,zh_tw:Bs,pl:ga,sv:Yi,el:Ts,hu:Ys,da:Go,no:Lr,fa:$a,ua:Ho,tr:gn,cz:yn,ja:Mi,fi:Nn,ko:_a,ky:Wo},Ns={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let a={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(a)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let a in s){let h=s[a];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},va=Ns,Lo={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(a=>{this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(a=>{a.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let a in s){let h=s[a];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},mr=Lo,wi={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let a=s.target;this._isRelevantForRemoval(a)&&!a.pm.dragging()&&(a.removeFrom(this.map.pm._getContainingLayer()),a.remove(),a instanceof L.LayerGroup?(this._fireRemoveLayerGroup(a),this._fireRemoveLayerGroup(this.map,a)):(a.pm._fireRemove(a),a.pm._fireRemove(this.map,a)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},Ds=wi,Va={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let a in s){let h=s[a];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Co=Va,Zo=m(Ss()),Qs={_fireDrawStart(s="Draw",a={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,a)},_fireDrawEnd(s="Draw",a={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,a)},_fireCreate(s,a="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},a,h)},_fireCenterPlaced(s="Draw",a={}){let h=s==="Draw"?this._layer:void 0,d=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:d,latlng:this._layer.getLatLng()},s,a)},_fireCut(s,a,h,d="Draw",_={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:a,originalLayer:h},d,_)},_fireEdit(s=this._layer,a="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},a,h)},_fireEnable(s="Edit",a={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDisable(s="Edit",a={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,a)},_fireUpdate(s="Edit",a={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,a)},_fireMarkerDragStart(s,a=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,d)},_fireMarkerDrag(s,a=void 0,h="Edit",d={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a},h,d)},_fireMarkerDragEnd(s,a=void 0,h=void 0,d="Edit",_={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:a,intersectionReset:h},d,_)},_fireDragStart(s="Edit",a={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,a)},_fireDrag(s,a="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},a,h)},_fireDragEnd(s="Edit",a={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragEnable(s="Edit",a={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,a)},_fireDragDisable(s="Edit",a={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,a)},_fireRemove(s,a=s,h="Edit",d={}){this.__fire(s,"pm:remove",{layer:a,shape:this.getShape()},h,d)},_fireVertexAdded(s,a,h,d="Edit",_={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:a,latlng:h,shape:this.getShape()},d,_)},_fireVertexRemoved(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:a,shape:this.getShape()},h,d)},_fireVertexClick(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,d)},_fireIntersect(s,a=this._layer,h="Edit",d={}){this.__fire(a,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,d)},_fireLayerReset(s,a,h="Edit",d={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:a,shape:this.getShape()},h,d)},_fireChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},a,h)},_fireTextChange(s,a="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},a,h)},_fireTextFocus(s="Edit",a={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,a)},_fireTextBlur(s="Edit",a={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,a)},_fireSnapDrag(s,a,h="Snapping",d={}){this.__fire(s,"pm:snapdrag",a,h,d)},_fireSnap(s,a,h="Snapping",d={}){this.__fire(s,"pm:snap",a,h,d)},_fireUnsnap(s,a,h="Snapping",d={}){this.__fire(s,"pm:unsnap",a,h,d)},_fireRotationEnable(s,a,h="Rotation",d={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,d)},_fireRotationDisable(s,a="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},a,h)},_fireRotationStart(s,a,h="Rotation",d={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:a},h,d)},_fireRotation(s,a,h,d=this._rotationLayer,_="Rotation",k={}){this.__fire(s,"pm:rotate",{layer:d,helpLayer:this._layer,startAngle:this._startAngle,angle:d.pm.getAngle(),angleDiff:a,oldLatLngs:h,newLatLngs:d.getLatLngs()},_,k)},_fireRotationEnd(s,a,h,d="Rotation",_={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:a,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},d,_)},_fireActionClick(s,a,h,d="Toolbar",_={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:a,button:h},d,_)},_fireButtonClick(s,a,h="Toolbar",d={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:a},h,d)},_fireLangChange(s,a,h,d,_="Global",k={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:a,fallback:h,translations:d},_,k)},_fireGlobalDragModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalEditModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalRemovalModeToggled(s,a="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},a,h)},_fireGlobalCutModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,a)},_fireGlobalDrawModeToggled(s="Global",a={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,a)},_fireGlobalRotateModeToggled(s="Global",a={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,a)},_fireRemoveLayerGroup(s,a=s,h="Edit",d={}){this.__fire(s,"pm:remove",{layer:a,shape:void 0},h,d)},_fireKeyeventEvent(s,a,h,d="Global",_={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:a,focusOn:h},d,_)},__fire(s,a,h,d,_={}){h=(0,Zo.default)(h,_,{source:d}),L.PM.Utils._fireEvent(s,a,h)}},ko=Qs,ya=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let a="document";this.map.getContainer().contains(s.target)&&(a="map");let h={event:s,eventType:s.type,focusOn:a};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,a)},_onBlur(s){s.altKey=!1;let a={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=a,this._lastEvents.current=a},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),Mn=ya,ba=m(bi());function sn(s){let a=L.PM.activeLang;return(0,ba.default)(Bi[a],s)||(0,ba.default)(Bi.en,s)||s}function Xr(s){for(let a=0;a<s.length;a+=1){let h=s[a];if(Array.isArray(h)){if(Xr(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function Po(s){return s.reduce((a,h)=>{if(h.length!==0){let d=Array.isArray(h)?Po(h):h;Array.isArray(d)?d.length!==0&&a.push(d):a.push(d)}return a},[])}function eo(s,a,h){let d={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:_,b:k,f:S}=d,B=s.lng,q=s.lat,J=h,Be=Math.PI,Ee=a*Be/180,Je=Math.sin(Ee),ut=Math.cos(Ee),kt=(1-S)*Math.tan(q*Be/180),Ot=1/Math.sqrt(1+kt*kt),Rt=kt*Ot,hn=Math.atan2(kt,ut),Me=Ot*Je,Fe=1-Me*Me,Ge=Fe*(_*_-k*k)/(k*k),pt=1+Ge/16384*(4096+Ge*(-768+Ge*(320-175*Ge))),Xe=Ge/1024*(256+Ge*(-128+Ge*(74-47*Ge))),ct=J/(k*pt),H=2*Math.PI,Q,ve,ge;for(;Math.abs(ct-H)>1e-12;){Q=Math.cos(2*hn+ct),ve=Math.sin(ct),ge=Math.cos(ct);let Et=Xe*ve*(Q+Xe/4*(ge*(-1+2*Q*Q)-Xe/6*Q*(-3+4*ve*ve)*(-3+4*Q*Q)));H=ct,ct=J/(k*pt)+Et}let ye=Rt*ve-Ot*ge*ut,be=Math.atan2(Rt*ge+Ot*ve*ut,(1-S)*Math.sqrt(Me*Me+ye*ye)),$e=Math.atan2(ve*Je,Ot*ge-Rt*ve*ut),ze=S/16*Fe*(4+S*(4-3*Fe)),He=$e-(1-ze)*S*Me*(ct+ze*ve*(Q+ze*ge*(-1+2*Q*Q))),it=B+He*180/Be,nt=be*180/Be;return L.latLng(it,nt)}function li(s,a,h,d,_=!0){let k,S,B,q=[];for(let J=0;J<h;J+=1){if(_)k=J*360/h+d,S=eo(s,k,a),B=L.latLng(S.lng,S.lat);else{let Be=s.lat+Math.cos(2*J*Math.PI/h)*a,Ee=s.lng+Math.sin(2*J*Math.PI/h)*a;B=L.latLng(Be,Ee)}q.push(B)}return q}function wa(s,a,h){a=(a+360)%360;let d=Math.PI/180,_=180/Math.PI,{R:k}=L.CRS.Earth,S=s.lng*d,B=s.lat*d,q=a*d,J=Math.sin(B),Be=Math.cos(B),Ee=Math.cos(h/k),Je=Math.sin(h/k),ut=Math.asin(J*Ee+Be*Je*Math.cos(q)),kt=S+Math.atan2(Math.sin(q)*Je*Be,Ee-J*Math.sin(ut));kt*=_;let Ot=kt-360,Rt=kt<-180?kt+360:kt;return kt=kt>180?Ot:Rt,L.latLng([ut*_,kt])}function ms(s,a,h){let d=s.latLngToContainerPoint(a),_=s.latLngToContainerPoint(h),k=Math.atan2(_.y-d.y,_.x-d.x)*180/Math.PI+90;return k+=k<0?360:0,k}function Ko(s,a,h,d){let _=ms(s,a,h);return wa(a,_,d)}function Jo(s,a,h="asc"){if(!a||Object.keys(a).length===0)return(q,J)=>q-J;let d=Object.keys(a),_,k=d.length-1,S={};for(;k>=0;)_=d[k],S[_.toLowerCase()]=a[_],k-=1;function B(q){if(q instanceof L.Marker)return"Marker";if(q instanceof L.Circle)return"Circle";if(q instanceof L.CircleMarker)return"CircleMarker";if(q instanceof L.Rectangle)return"Rectangle";if(q instanceof L.Polygon)return"Polygon";if(q instanceof L.Polyline)return"Line"}return(q,J)=>{let Be,Ee;if(Be=B(q.layer).toLowerCase(),Ee=B(J.layer).toLowerCase(),!Be||!Ee)return 0;let Je=Be in S?S[Be]:Number.MAX_SAFE_INTEGER,ut=Ee in S?S[Ee]:Number.MAX_SAFE_INTEGER,kt=0;return Je<ut?kt=-1:Je>ut&&(kt=1),h==="desc"?kt*-1:kt}}function Ti(s,a=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(a).getLatLngs():L.polyline(a).getLatLngs()}function Yo(s,a){var h,d,_,k;if((d=(h=a.options.crs)==null?void 0:h.projection)!=null&&d.MAX_LATITUDE){let S=(k=(_=a.options.crs)==null?void 0:_.projection)==null?void 0:k.MAX_LATITUDE;s.lat=Math.max(Math.min(S,s.lat),-S)}return s}function Cr(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var Ga=L.Class.extend({includes:[va,mr,Ds,Co,ko],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=Mn(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",a,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let _=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(_){let k=[`${_[1]}_${_[2]}`,`${_[1]}`];for(let S of k)if(Bi[S]){s=S;break}}}let d=L.PM.activeLang;a&&(Bi[s]=(0,bn.default)(Bi[h],a)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(d,s,h,Bi[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",a){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,a)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,a={}){let h=a.ignoreShapes||[],d=a.merge||!1;this.map.pm.Draw.shapes.forEach(_=>{h.indexOf(_)===-1&&this.map.pm.Draw[_].setPathOptions(s,d)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let a=(0,bn.default)(this.globalOptions,s);a.editable&&(a.resizeableCircleMarker=a.editable,delete a.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!a.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let d=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!a.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),d=!0),this.map.pm.Draw.shapes.forEach(_=>{this.map.pm.Draw[_].setOptions(a)}),h&&this.map.pm.Draw.CircleMarker.enable(),d&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(_=>{_.pm.setOptions(a)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=a,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let a=L.PM.Utils.findLayers(this.map);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(d=>{h.addLayer(d)}),h},getGeomanDrawLayers(s=!1){let a=L.PM.Utils.findLayers(this.map).filter(d=>d._drawnByGeoman===!0);if(!s)return a;let h=L.featureGroup();return h._pmTempLayer=!0,a.forEach(d=>{h.addLayer(d)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){Cr(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let a="";s.type==="touchstart"||s.type==="pointerdown"?a="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(a="mouseup"),a&&Cr(this.map)._onClick(this._createMouseEvent(a,s))},_createMouseEvent(s,a){let h,d=a.touches[0]||a.changedTouches[0];try{h=new MouseEvent(s,{bubbles:a.bubbles,cancelable:a.cancelable,view:a.view,detail:d.detail,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey,button:a.button,relatedTarget:a.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,a.bubbles,a.cancelable,a.view,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget)}return h}}),Eo=Ga,Ni=L.Control.extend({includes:[ko],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let a=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${a}`,this._container);s.title&&h.setAttribute("title",s.title);let d=L.DomUtil.create("a","leaflet-buttons-control-button",h);d.setAttribute("role","button"),d.setAttribute("tabindex","0"),d.href="#";let _=L.DomUtil.create("div",`leaflet-pm-actions-container ${a}`,h),k=s.actions,S={cancel:{text:sn("actions.cancel"),title:sn("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:sn("actions.finish"),title:sn("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:sn("actions.removeLastVertex"),title:sn("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:sn("actions.finish"),title:sn("actions.finish"),onClick(q){this._map.pm.Draw[s.jsClass]._finishShape(q)}}};s._preparedActions=k.map(q=>{let J=typeof q=="string"?q:q.name,Be;if(S[J])Be=S[J];else if(q.text)Be=q;else return Be;let Ee=L.DomUtil.create("a",`leaflet-pm-action ${a} action-${J}`,_);if(Ee.setAttribute("role","button"),Ee.setAttribute("tabindex","0"),Ee.href="#",Be.title&&(Ee.title=Be.title),Ee.innerHTML=Be.text,L.DomEvent.disableClickPropagation(Ee),L.DomEvent.on(Ee,"click",L.DomEvent.stop),Be._node=Ee,!s.disabled&&Be.onClick){let Je=ut=>{ut.preventDefault();let kt="",{buttons:Ot}=this._map.pm.Toolbar;for(let Rt in Ot)if(Ot[Rt]._button===s){kt=Rt;break}this._fireActionClick(Be,kt,s)};L.DomEvent.addListener(Ee,"click",Je,this),L.DomEvent.addListener(Ee,"click",Be.onClick,this),L.DomEvent.addListener(Ee,"click",()=>this._updateActiveAction(s))}return Be}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let B=L.DomUtil.create("div","control-icon",d);return s.iconUrl&&B.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(B,s.className),L.DomEvent.disableClickPropagation(d),L.DomEvent.on(d,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(d,"click",this._onBtnClick,this),L.DomEvent.addListener(d,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(d,"pm-disabled"),d.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:a}=this._map.pm.Toolbar;for(let h in a)if(a[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",a=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(a,s),a.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(a,s),a.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var a;(a=s._preparedActions)==null||a.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),Xo=Ni;L.Control.PMButton=Xo;var xa=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let a=`${s}Container`;return this[a]||(this[a]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[a]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),a={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let d=s[h];L.Util.setOptions(d,{className:a.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let a in s)s[a].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,a){return this.buttons[s]=a,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let a in this.buttons){let h=this.buttons[a];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,a,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let d=s;return h&&this.triggerClickOnToggledButtons(this.buttons[d]),this.buttons[d]?this.buttons[d].toggle(a):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:sn("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(Je,ut)=>{this.map.pm.Draw[ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},a={title:sn("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(Je,ut)=>{this.map.pm.Draw[ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:sn("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(Je,ut)=>{this.map.pm.Draw[ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},d={title:sn("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(Je,ut)=>{this.map.pm.Draw[ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:sn("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(Je,ut)=>{this.map.pm.Draw[ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:sn("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(Je,ut)=>{this.map.pm.Draw[ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},S={title:sn("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},B={title:sn("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},q={title:sn("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(Je,ut)=>{this.map.pm.Draw[ut.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},J={title:sn("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Be={title:sn("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ee={className:"control-icon leaflet-pm-icon-text",title:sn("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(Je,ut)=>{this.map.pm.Draw[ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(k)),this._addButton("drawPolygon",new L.Control.PMButton(a)),this._addButton("drawCircle",new L.Control.PMButton(d)),this._addButton("drawCircleMarker",new L.Control.PMButton(_)),this._addButton("drawText",new L.Control.PMButton(Ee)),this._addButton("editMode",new L.Control.PMButton(S)),this._addButton("dragMode",new L.Control.PMButton(B)),this._addButton("cutPolygon",new L.Control.PMButton(q)),this._addButton("removalMode",new L.Control.PMButton(J)),this._addButton("rotateMode",new L.Control.PMButton(Be))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),a=[];this.options.drawControls===!1&&(a=a.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(a=a.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&a.indexOf(h)===-1){let d=s[h]._button.tool;d||(d="draw"),s[h].setPosition(this._getBtnPosition(d)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,a){this.options.positions[s]=a,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,a){if(a)typeof a!="object"&&(a={name:a});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!a.name)throw new TypeError("Button has no name");if(this.buttons[a.name])throw new TypeError("Button with this name already exists");let d=this.map.pm.Draw.createNewDrawInstance(a.name,h);a={...this.buttons[h]._button,...a};let _=this.createCustomControl(a);return{drawInstance:d,control:_}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let a={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(a));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let a={};if(s)for(let h in this.getButtons()){let d=this.getButtons()[h];(d._button.tool===s||s==="draw"&&!d._button.tool)&&(a[h]=d)}return a},changeControlOrder(s=[]){let a=this._shapeMapping(),h=[];s.forEach(k=>{a[k]?h.push(a[k]):h.push(k)});let d=this.getButtons(),_={};h.forEach(k=>{d[k]&&(_[k]=d[k])}),Object.keys(d).filter(k=>!d[k]._button.tool||d[k]._button.tool==="draw").forEach(k=>{h.indexOf(k)===-1&&(_[k]=d[k])}),Object.keys(d).filter(k=>d[k]._button.tool==="edit").forEach(k=>{h.indexOf(k)===-1&&(_[k]=d[k])}),Object.keys(d).filter(k=>d[k]._button.tool==="options").forEach(k=>{h.indexOf(k)===-1&&(_[k]=d[k])}),Object.keys(d).filter(k=>d[k]._button.tool==="custom").forEach(k=>{h.indexOf(k)===-1&&(_[k]=d[k])}),Object.keys(d).forEach(k=>{h.indexOf(k)===-1&&(_[k]=d[k])}),this.map.pm.Toolbar.buttons=_,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),a=[];for(let h in s)a.push(h);return a},changeActionsOfControl(s,a){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!a)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=a,this.changeControlOrder()},setButtonDisabled(s,a){let h=this._btnNameMapping(s);a?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let a=this._shapeMapping();return a[s]?a[s]:s}}),La=xa,Qo=m(Ss()),to={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(a=>{if(Array.isArray(a)){this._assignEvents(a);return}a.off("drag",this._handleSnapping,this),a.on("drag",this._handleSnapping,this),a.off("dragend",this._cleanupSnapping,this),a.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let a=s.target;a._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(a=>{a.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var B,q,J;let a=s.target;if(a._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((B=s==null?void 0:s.originalEvent)==null?void 0:B.altKey)||((J=(q=this._map)==null?void 0:q.pm)==null?void 0:J.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(a.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let d=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,_;d?_=h.latlng:_=this._checkPrioritiySnapping(h);let k=this.options.snapDistance,S={marker:a,shape:this._shape,snapLatLng:_,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(S.marker,S),this._fireSnapDrag(this._layer,S),h.distance<k){a._orgLatLng=a.getLatLng(),a.setLatLng(_),a._snapped=!0,a._snapInfo=S;let Be=()=>{this._snapLatLng=_,this._fireSnap(a,S),this._fireSnap(this._layer,S)},Ee=this._snapLatLng||{},Je=_||{};(Ee.lat!==Je.lat||Ee.lng!==Je.lng)&&Be()}else this._snapLatLng&&(this._unsnap(S),a._snapped=!1,a._snapInfo=void 0,this._fireUnsnap(S.marker,S),this._fireUnsnap(this._layer,S));return!0},_createSnapList(){let s=[],a=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(d=>{if((d instanceof L.Polyline||d instanceof L.Marker||d instanceof L.CircleMarker||d instanceof L.ImageOverlay)&&d.options.snapIgnore!==!0){if(d.options.snapIgnore===void 0&&(!L.PM.optIn&&d.options.pmIgnore===!0||L.PM.optIn&&d.options.pmIgnore!==!1))return;(d instanceof L.Circle||d instanceof L.CircleMarker)&&d.pm&&d.pm._hiddenPolyCircle?s.push(d.pm._hiddenPolyCircle):d instanceof L.ImageOverlay&&(d=L.rectangle(d.getBounds())),s.push(d);let _=L.polyline([],{color:"red",pmIgnore:!0});_._pmTempLayer=!0,a.push(_),(d instanceof L.Circle||d instanceof L.CircleMarker)&&a.push(_)}}),s=s.filter(d=>this._layer!==d),s=s.filter(d=>d._latlng||d._latlngs&&Xr(d._latlngs)),s=s.filter(d=>!d._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,a.push(d)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=a},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let a=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);a>-1&&this._snapList.splice(a,1)},_calcClosestLayer(s,a){return this._calcClosestLayers(s,a,1)[0]},_calcClosestLayers(s,a,h=1){let d=[],_={};a.forEach((S,B)=>{var J;if(S._parentCopy&&S._parentCopy===this._layer||((J=S.getLatLngs)==null?void 0:J.call(S).flat(5).length)<2)return;let q=this._calcLayerDistances(s,S);if(q.distance=Math.floor(q.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[B]){let Be=L.polyline([],{color:"red",pmIgnore:!0});Be._pmTempLayer=!0,this.debugIndicatorLines[B]=Be}this.debugIndicatorLines[B].setLatLngs([s,q.latlng])}h===1&&(_.distance===void 0||q.distance-5<=_.distance)?(q.distance+5<_.distance&&(d=[]),_=q,_.layer=S,d.push(_)):h!==1&&(_={},_=q,_.layer=S,d.push(_))}),h!==1&&(d=d.sort((S,B)=>S.distance-B.distance)),h===-1&&(h=d.length);let k=this._getClosestLayerByPriority(d,h);return L.Util.isArray(k)?k:[k]},_calcLayerDistances(s,a){let h=this._map,d=a instanceof L.Marker||a instanceof L.CircleMarker,_=a instanceof L.Polygon,k=s;if(d){let S=a.getLatLng();return{latlng:{...S},distance:this._getDistance(h,S,k)}}return this._calcLatLngDistances(k,a.getLatLngs(),h,_)},_calcLatLngDistances(s,a,h,d=!1){let _,k,S,B=q=>{q.forEach((J,Be)=>{if(Array.isArray(J)){B(J);return}if(this.options.snapSegment){let Ee=J,Je;d?Je=Be+1===q.length?0:Be+1:Je=Be+1===q.length?void 0:Be+1;let ut=q[Je];if(ut){let kt=this._getDistanceToSegment(h,s,Ee,ut);(k===void 0||kt<k)&&(k=kt,S=[Ee,ut])}}else{let Ee=this._getDistance(h,s,J);(k===void 0||Ee<k)&&(k=Ee,_=J)}})};return B(a),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,S[0],S[1])},segment:S,distance:k}:{latlng:_,distance:k}},_getClosestLayerByPriority(s,a=1){s=s.sort((S,B)=>S._leaflet_id-B._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],d=this._map.pm.globalOptions.snappingOrder||[],_=0,k={};return d.concat(h).forEach(S=>{k[S]||(_+=1,k[S]=_)}),s.sort(Jo("instanceofShape",k)),a===1?s[0]||{}:s.slice(0,a)},_checkPrioritiySnapping(s){let a=this._map,h=s.segment[0],d=s.segment[1],_=s.latlng,k=_;if(this.options.snapVertex){let S=this._getDistance(a,h,_),B=this._getDistance(a,d,_),q=S<B?h:d,J=S<B?S:B;if(this.options.snapMiddle){let Ee=L.PM.Utils.calcMiddleLatLng(a,h,d),Je=this._getDistance(a,Ee,_);Je<S&&Je<B&&(q=Ee,J=Je)}let Be=this.options.snapDistance;J<Be&&(k=q)}return{...k}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,a,h,d){let _=s.getMaxZoom();_===1/0&&(_=s.getZoom());let k=s.project(a,_),S=s.project(h,_),B=s.project(d,_),q=L.LineUtil.closestPointOnSegment(k,S,B);return s.unproject(q,_)},_getDistanceToSegment(s,a,h,d){let _=s.latLngToContainerPoint(a),k=s.latLngToContainerPoint(h),S=s.latLngToContainerPoint(d);return L.LineUtil.pointToSegmentDistance(_,k,S)},_getDistance(s,a,h){return s.latLngToContainerPoint(a).distanceTo(s.latLngToContainerPoint(h))}},Ao=to,no=L.Class.extend({includes:[Ao,ko],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let a=new L.Icon.Default;a.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=a,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,a=!1){a?this.options.pathOptions=(0,Qo.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,a){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(a)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(a=>{this[a]._enabled&&(s=a)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&(a._pmTempLayer||s.push(a))}),this._enabled?s.forEach(a=>{L.PM.Utils.disablePopup(a)}):s.forEach(a=>{L.PM.Utils.enablePopup(a)})},createNewDrawInstance(s,a){let h=this._getShapeFromBtnName(a);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[a]&&this[s].setOptions(this[a].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let a={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return a[s]?a[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),gr=no;gr.Marker=gr.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(a=>{this.isRelevantMarker(a)&&a.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new L.Marker(a,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,a;(s=this.options.markerStyle)!=null&&s.icon&&((a=this._hintMarker)==null||a.setIcon(this.options.markerStyle.icon))}});var x=63710088e-1,Z={centimeters:x*100,centimetres:x*100,degrees:x/111325,feet:x*3.28084,inches:x*39.37,kilometers:x/1e3,kilometres:x/1e3,meters:x,metres:x,miles:x/1609.344,millimeters:x*1e3,millimetres:x*1e3,nauticalmiles:x/1852,radians:1,yards:x*1.0936};function Se(s,a,h){h===void 0&&(h={});var d={type:"Feature"};return(h.id===0||h.id)&&(d.id=h.id),h.bbox&&(d.bbox=h.bbox),d.properties=a||{},d.geometry=s,d}function qe(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!pn(s[0])||!pn(s[1]))throw new Error("coordinates must contain numbers");var d={type:"Point",coordinates:s};return Se(d,a,h)}function tt(s,a,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var d={type:"LineString",coordinates:s};return Se(d,a,h)}function yt(s,a){a===void 0&&(a={});var h={type:"FeatureCollection"};return a.id&&(h.id=a.id),a.bbox&&(h.bbox=a.bbox),h.features=s,h}function Bt(s,a){a===void 0&&(a="kilometers");var h=Z[a];if(!h)throw new Error(a+" units is invalid");return s*h}function qt(s,a){a===void 0&&(a="kilometers");var h=Z[a];if(!h)throw new Error(a+" units is invalid");return s/h}function Wt(s){var a=s%(2*Math.PI);return a*180/Math.PI}function nn(s){var a=s%360;return a*Math.PI/180}function pn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function Bn(s){var a,h,d={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")a=[h.coordinates];else if(h.type==="MultiLineString")a=h.coordinates;else if(h.type==="MultiPolygon")a=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")a=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return a.forEach(function(_){a.forEach(function(k){for(var S=0;S<_.length-1;S++)for(var B=S;B<k.length-1;B++)if(!(_===k&&(Math.abs(S-B)===1||S===0&&B===_.length-2&&_[S][0]===_[_.length-1][0]&&_[S][1]===_[_.length-1][1]))){var q=ir(_[S][0],_[S][1],_[S+1][0],_[S+1][1],k[B][0],k[B][1],k[B+1][0],k[B+1][1]);q&&d.features.push(qe([q[0],q[1]]))}})}),d}function ir(s,a,h,d,_,k,S,B){var q,J,Be,Ee,Je,ut={x:null,y:null,onLine1:!1,onLine2:!1};return q=(B-k)*(h-s)-(S-_)*(d-a),q===0?ut.x!==null&&ut.y!==null?ut:!1:(J=a-k,Be=s-_,Ee=(S-_)*J-(B-k)*Be,Je=(h-s)*J-(d-a)*Be,J=Ee/q,Be=Je/q,ut.x=s+J*(h-s),ut.y=a+J*(d-a),J>=0&&J<=1&&(ut.onLine1=!0),Be>=0&&Be<=1&&(ut.onLine2=!0),ut.onLine1&&ut.onLine2?[ut.x,ut.y]:!1)}gr.Line=gr.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let a=s[s.length-1];this._hintline.setLatLngs([a,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let a=this._layer._defaultShape().slice();a.push(this._hintMarker.getLatLng()),this._change(a)},hasSelfIntersection(){return Bn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,a){let h=L.polyline(this._layer.getLatLngs());s&&(a||(a=this._hintMarker.getLatLng()),h.addLatLng(a));let d=Bn(h.toGeoJSON(15));this._doesSelfIntersect=d.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(d,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),d=h[h.length-1];if(a.equals(h[0])||h.length>0&&a.equals(d)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:a,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(a);let _=this._createMarker(a);this._setTooltipText(),this._setHintLineAfterNewVertex(a),this._fireVertexAdded(_,void 0,a,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let a=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let _=s[s.length-1],k=a.indexOf(_.getLatLng());a=a.slice(0,k+1),this._layer.setLatLngs(a),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,d,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let a=L.polyline(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),a.on("click",this._finishShape,this),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=1?a=sn("tooltips.continueLine"):a=sn("tooltips.finishLine"),this._hintMarker.setTooltipContent(a)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,a;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)}}),gr.Polygon=gr.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let a=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._markers.push(a),this._layer.getLatLngs().flat().length===1?(a.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(a)-1,this.options.snappable&&this._cleanupSnapping()):a.on("click",()=>1),a},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),a="";s<=2?a=sn("tooltips.continueLine"):a=sn("tooltips.finishPoly"),this._hintMarker.setTooltipContent(a)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),gr.Rectangle=gr.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let a=0;a<2;a+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(a),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(a)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(sn("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let a=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(a,"Draw")},_syncRectangleSize(){let s=Yo(this._startMarker.getLatLng(),this._map),a=Yo(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,a,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let d=[];h.forEach(_=>{!_.equals(s,1e-8)&&!_.equals(a,1e-8)&&d.push(_)}),d.forEach((_,k)=>{try{this._styleMarkers[k].setLatLng(_)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(a))return;let d=L.rectangle([h,a],this.options.pathOptions);if(this.options.rectangleAngle){let k=L.PM.Utils._getRotatedRectangle(h,a,this.options.rectangleAngle||0,this._map);d.setLatLngs(k),d.pm&&d.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),this._fireCreate(d);let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),gr.CircleMarker=gr.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let a={};L.extend(a,this.options.templineStyle),a.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),a),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let a=this._hintMarker.getLatLng();this._centerMarker.setLatLng(a),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(sn("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,a])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let a=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(a,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(a,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let S=this._hintMarker.getLatLng();h=this._distanceCalculation(a,S),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let d={...this.options.pathOptions,radius:h},_=new this._BaseCircleClass(a,d);this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),_.pm&&_.pm._updateHiddenPolyCircle(),this._fireCreate(_);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let a=this._centerMarker.getLatLng(),h=this._distanceCalculation(a,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=Ko(this._map,a,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=Ko(this._map,a,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,a);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var a,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(a=this._layer)==null||a.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))}}),gr.Circle=gr.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,a){return this._map.distance(s,a)}});function In(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qn(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function kr(s){return s.type==="Feature"?s.geometry:s}function wr(s,a){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function xi(s,a,h){if(s!==null)for(var d,_,k,S,B,q,J,Be=0,Ee=0,Je,ut=s.type,kt=ut==="FeatureCollection",Ot=ut==="Feature",Rt=kt?s.features.length:1,hn=0;hn<Rt;hn++){J=kt?s.features[hn].geometry:Ot?s.geometry:s,Je=J?J.type==="GeometryCollection":!1,B=Je?J.geometries.length:1;for(var Me=0;Me<B;Me++){var Fe=0,Ge=0;if(S=Je?J.geometries[Me]:J,S!==null){q=S.coordinates;var pt=S.type;switch(Be=0,pt){case null:break;case"Point":if(a(q,Ee,hn,Fe,Ge)===!1)return!1;Ee++,Fe++;break;case"LineString":case"MultiPoint":for(d=0;d<q.length;d++){if(a(q[d],Ee,hn,Fe,Ge)===!1)return!1;Ee++,pt==="MultiPoint"&&Fe++}pt==="LineString"&&Fe++;break;case"Polygon":case"MultiLineString":for(d=0;d<q.length;d++){for(_=0;_<q[d].length-Be;_++){if(a(q[d][_],Ee,hn,Fe,Ge)===!1)return!1;Ee++}pt==="MultiLineString"&&Fe++,pt==="Polygon"&&Ge++}pt==="Polygon"&&Fe++;break;case"MultiPolygon":for(d=0;d<q.length;d++){for(Ge=0,_=0;_<q[d].length;_++){for(k=0;k<q[d][_].length-Be;k++){if(a(q[d][_][k],Ee,hn,Fe,Ge)===!1)return!1;Ee++}Ge++}Fe++}break;case"GeometryCollection":for(d=0;d<S.geometries.length;d++)if(xi(S.geometries[d],a)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Xn(s,a){if(s.type==="Feature")a(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&a(s.features[h],h)!==!1;h++);}function Qr(s,a,h){var d=h;return Xn(s,function(_,k){k===0&&h===void 0?d=_:d=a(d,_,k)}),d}function Ha(s,a){var h,d,_,k,S,B,q,J,Be,Ee,Je=0,ut=s.type==="FeatureCollection",kt=s.type==="Feature",Ot=ut?s.features.length:1;for(h=0;h<Ot;h++){for(B=ut?s.features[h].geometry:kt?s.geometry:s,J=ut?s.features[h].properties:kt?s.properties:{},Be=ut?s.features[h].bbox:kt?s.bbox:void 0,Ee=ut?s.features[h].id:kt?s.id:void 0,q=B?B.type==="GeometryCollection":!1,S=q?B.geometries.length:1,_=0;_<S;_++){if(k=q?B.geometries[_]:B,k===null){if(a(null,Je,J,Be,Ee)===!1)return!1;continue}switch(k.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(a(k,Je,J,Be,Ee)===!1)return!1;break}case"GeometryCollection":{for(d=0;d<k.geometries.length;d++)if(a(k.geometries[d],Je,J,Be,Ee)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Je++}}function ei(s,a){Ha(s,function(h,d,_,k,S){var B=h===null?null:h.type;switch(B){case null:case"Point":case"LineString":case"Polygon":return a(Se(h,_,{bbox:k,id:S}),d,0)===!1?!1:void 0}var q;switch(B){case"MultiPoint":q="Point";break;case"MultiLineString":q="LineString";break;case"MultiPolygon":q="Polygon";break}for(var J=0;J<h.coordinates.length;J++){var Be=h.coordinates[J],Ee={type:q,coordinates:Be};if(a(Se(Ee,_),d,J)===!1)return!1}})}function Ca(s){if(!s)throw new Error("geojson is required");var a=[];return ei(s,function(h){Xi(h,a)}),yt(a)}function Xi(s,a){var h=[],d=s.geometry;if(d!==null){switch(d.type){case"Polygon":h=qn(d);break;case"LineString":h=[qn(d)]}h.forEach(function(_){var k=ka(_,s.properties);k.forEach(function(S){S.id=a.length,a.push(S)})})}}function ka(s,a){var h=[];return s.reduce(function(d,_){var k=tt([d,_],a);return k.bbox=Os(d,_),h.push(k),_}),h}function Os(s,a){var h=s[0],d=s[1],_=a[0],k=a[1],S=h<_?h:_,B=d<k?d:k,q=h>_?h:_,J=d>k?d:k;return[S,B,q,J]}var Is=Ca,xr=m(fs(),1);function ea(s,a){var h={},d=[];if(s.type==="LineString"&&(s=Se(s)),a.type==="LineString"&&(a=Se(a)),s.type==="Feature"&&a.type==="Feature"&&s.geometry!==null&&a.geometry!==null&&s.geometry.type==="LineString"&&a.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&a.geometry.coordinates.length===2){var _=ui(s,a);return _&&d.push(_),yt(d)}var k=(0,xr.default)();return k.load(Is(a)),Xn(Is(s),function(S){Xn(k.search(S),function(B){var q=ui(S,B);if(q){var J=qn(q).join(",");h[J]||(h[J]=!0,d.push(q))}})}),yt(d)}function ui(s,a){var h=qn(s),d=qn(a);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(d.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var _=h[0][0],k=h[0][1],S=h[1][0],B=h[1][1],q=d[0][0],J=d[0][1],Be=d[1][0],Ee=d[1][1],Je=(Ee-J)*(S-_)-(Be-q)*(B-k),ut=(Be-q)*(k-J)-(Ee-J)*(_-q),kt=(S-_)*(k-J)-(B-k)*(_-q);if(Je===0)return null;var Ot=ut/Je,Rt=kt/Je;if(Ot>=0&&Ot<=1&&Rt>=0&&Rt<=1){var hn=_+Ot*(S-_),Me=k+Ot*(B-k);return qe([hn,Me])}return null}var ti=ea,ta=m(fs(),1);function qr(s,a,h){h===void 0&&(h={});var d=In(s),_=In(a),k=nn(_[1]-d[1]),S=nn(_[0]-d[0]),B=nn(d[1]),q=nn(_[1]),J=Math.pow(Math.sin(k/2),2)+Math.pow(Math.sin(S/2),2)*Math.cos(B)*Math.cos(q);return Bt(2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J)),h.units)}var Rs=qr;function Li(s){var a=s[0],h=s[1],d=s[2],_=s[3],k=Rs(s.slice(0,2),[d,h]),S=Rs(s.slice(0,2),[a,_]);if(k>=S){var B=(h+_)/2;return[a,B-(d-a)/2,d,B+(d-a)/2]}else{var q=(a+d)/2;return[q-(_-h)/2,h,q+(_-h)/2,_]}}var Wa=Li;function Pr(s){var a=[1/0,1/0,-1/0,-1/0];return xi(s,function(h){a[0]>h[0]&&(a[0]=h[0]),a[1]>h[1]&&(a[1]=h[1]),a[2]<h[0]&&(a[2]=h[0]),a[3]<h[1]&&(a[3]=h[1])}),a}Pr.default=Pr;var gs=Pr;function Di(s,a){a===void 0&&(a={});var h=a.precision,d=a.coordinates,_=a.mutate;if(h=h==null||isNaN(h)?6:h,d=d==null||isNaN(d)?3:d,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof d!="number")throw new Error("<coordinates> must be a number");(_===!1||_===void 0)&&(s=JSON.parse(JSON.stringify(s)));var k=Math.pow(10,h);return xi(s,function(S){So(S,k,d)}),s}function So(s,a,h){s.length>h&&s.splice(h,s.length);for(var d=0;d<s.length;d++)s[d]=Math.round(s[d]*a)/a;return s}var Fs=Di;function _s(s,a,h){if(h===void 0&&(h={}),h.final===!0)return Dr(s,a);var d=In(s),_=In(a),k=nn(d[0]),S=nn(_[0]),B=nn(d[1]),q=nn(_[1]),J=Math.sin(S-k)*Math.cos(q),Be=Math.cos(B)*Math.sin(q)-Math.sin(B)*Math.cos(q)*Math.cos(S-k);return Wt(Math.atan2(J,Be))}function Dr(s,a){var h=_s(a,s);return h=(h+180)%360,h}function Mr(s,a,h,d){d===void 0&&(d={});var _=In(s),k=nn(_[0]),S=nn(_[1]),B=nn(h),q=qt(a,d.units),J=Math.asin(Math.sin(S)*Math.cos(q)+Math.cos(S)*Math.sin(q)*Math.cos(B)),Be=k+Math.atan2(Math.sin(B)*Math.sin(q)*Math.cos(S),Math.cos(q)-Math.sin(S)*Math.sin(J)),Ee=Wt(Be),Je=Wt(J);return qe([Ee,Je],d.properties)}function Qi(s,a,h){h===void 0&&(h={});var d=qe([1/0,1/0],{dist:1/0}),_=0;return ei(s,function(k){for(var S=qn(k),B=0;B<S.length-1;B++){var q=qe(S[B]);q.properties.dist=Rs(a,q,h);var J=qe(S[B+1]);J.properties.dist=Rs(a,J,h);var Be=Rs(q,J,h),Ee=Math.max(q.properties.dist,J.properties.dist),Je=_s(q,J),ut=Mr(a,Ee,Je+90,h),kt=Mr(a,Ee,Je-90,h),Ot=ti(tt([ut.geometry.coordinates,kt.geometry.coordinates]),tt([q.geometry.coordinates,J.geometry.coordinates])),Rt=null;Ot.features.length>0&&(Rt=Ot.features[0],Rt.properties.dist=Rs(a,Rt,h),Rt.properties.location=_+Rs(q,Rt,h)),q.properties.dist<d.properties.dist&&(d=q,d.properties.index=B,d.properties.location=_),J.properties.dist<d.properties.dist&&(d=J,d.properties.index=B+1,d.properties.location=_+Be),Rt&&Rt.properties.dist<d.properties.dist&&(d=Rt,d.properties.index=B),_+=Be}}),d}var ci=Qi;function Oi(s,a){if(!s)throw new Error("line is required");if(!a)throw new Error("splitter is required");var h=wr(s),d=wr(a);if(h!=="LineString")throw new Error("line must be LineString");if(d==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(d==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var _=Fs(a,{precision:7});switch(d){case"Point":return Ii(s,_);case"MultiPoint":return js(s,_);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return js(s,ti(s,_))}}function js(s,a){var h=[],d=(0,ta.default)();return ei(a,function(_){if(h.forEach(function(B,q){B.id=q}),!h.length)h=Ii(s,_).features,h.forEach(function(B){B.bbox||(B.bbox=Wa(gs(B)))}),d.load(yt(h));else{var k=d.search(_);if(k.features.length){var S=cr(_,k);h=h.filter(function(B){return B.id!==S.id}),d.remove(S),Xn(Ii(S,_),function(B){h.push(B),d.insert(B)})}}}),yt(h)}function Ii(s,a){var h=[],d=qn(s)[0],_=qn(s)[s.geometry.coordinates.length-1];if(vs(d,In(a))||vs(_,In(a)))return yt([s]);var k=(0,ta.default)(),S=Is(s);k.load(S);var B=k.search(a);if(!B.features.length)return yt([s]);var q=cr(a,B),J=[d],Be=Qr(S,function(Ee,Je,ut){var kt=qn(Je)[1],Ot=In(a);return ut===q.id?(Ee.push(Ot),h.push(tt(Ee)),vs(Ot,kt)?[Ot]:[Ot,kt]):(Ee.push(kt),Ee)},J);return Be.length>1&&h.push(tt(Be)),yt(h)}function cr(s,a){if(!a.features.length)throw new Error("lines must contain features");if(a.features.length===1)return a.features[0];var h,d=1/0;return Xn(a,function(_){var k=ci(_,s),S=k.properties.dist;S<d&&(h=_,d=S)}),h}function vs(s,a){return s[0]===a[0]&&s[1]===a[1]}var ni=Oi;function $r(s,a,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!a)throw new Error("polygon is required");var d=In(s),_=kr(a),k=_.type,S=a.bbox,B=_.coordinates;if(S&&Pa(d,S)===!1)return!1;k==="Polygon"&&(B=[B]);for(var q=!1,J=0;J<B.length&&!q;J++)if(Mo(d,B[J][0],h.ignoreBoundary)){for(var Be=!1,Ee=1;Ee<B[J].length&&!Be;)Mo(d,B[J][Ee],!h.ignoreBoundary)&&(Be=!0),Ee++;Be||(q=!0)}return q}function Mo(s,a,h){var d=!1;a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]&&(a=a.slice(0,a.length-1));for(var _=0,k=a.length-1;_<a.length;k=_++){var S=a[_][0],B=a[_][1],q=a[k][0],J=a[k][1],Be=s[1]*(S-q)+B*(q-s[0])+J*(s[0]-S)===0&&(S-s[0])*(q-s[0])<=0&&(B-s[1])*(J-s[1])<=0;if(Be)return!h;var Ee=B>s[1]!=J>s[1]&&s[0]<(q-S)*(s[1]-B)/(J-B)+S;Ee&&(d=!d)}return d}function Pa(s,a){return a[0]<=s[0]&&a[1]<=s[1]&&a[2]>=s[0]&&a[3]>=s[1]}function Ea(s,a,h){h===void 0&&(h={});for(var d=In(s),_=qn(a),k=0;k<_.length-1;k++){var S=!1;if(h.ignoreEndVertices&&(k===0&&(S="start"),k===_.length-2&&(S="end"),k===0&&k+1===_.length-1&&(S="both")),Vr(_[k],_[k+1],d,S,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function Vr(s,a,h,d,_){var k=h[0],S=h[1],B=s[0],q=s[1],J=a[0],Be=a[1],Ee=h[0]-B,Je=h[1]-q,ut=J-B,kt=Be-q,Ot=Ee*kt-Je*ut;if(_!==null){if(Math.abs(Ot)>_)return!1}else if(Ot!==0)return!1;if(d){if(d==="start")return Math.abs(ut)>=Math.abs(kt)?ut>0?B<k&&k<=J:J<=k&&k<B:kt>0?q<S&&S<=Be:Be<=S&&S<q;if(d==="end")return Math.abs(ut)>=Math.abs(kt)?ut>0?B<=k&&k<J:J<k&&k<=B:kt>0?q<=S&&S<Be:Be<S&&S<=q;if(d==="both")return Math.abs(ut)>=Math.abs(kt)?ut>0?B<k&&k<J:J<k&&k<B:kt>0?q<S&&S<Be:Be<S&&S<q}else return Math.abs(ut)>=Math.abs(kt)?ut>0?B<=k&&k<=J:J<=k&&k<=B:kt>0?q<=S&&S<=Be:Be<=S&&S<=q;return!1}var hi=Ea;function ro(s,a){var h=kr(s),d=kr(a),_=h.type,k=d.type,S=h.coordinates,B=d.coordinates;switch(_){case"Point":switch(k){case"Point":return $n(S,B);default:throw new Error("feature2 "+k+" geometry not supported")}case"MultiPoint":switch(k){case"Point":return ys(h,d);case"MultiPoint":return na(h,d);default:throw new Error("feature2 "+k+" geometry not supported")}case"LineString":switch(k){case"Point":return hi(d,h,{ignoreEndVertices:!0});case"LineString":return zs(h,d);case"MultiPoint":return io(h,d);default:throw new Error("feature2 "+k+" geometry not supported")}case"Polygon":switch(k){case"Point":return $r(d,h,{ignoreBoundary:!0});case"LineString":return Ri(h,d);case"Polygon":return Or(h,d);case"MultiPoint":return so(h,d);default:throw new Error("feature2 "+k+" geometry not supported")}default:throw new Error("feature1 "+_+" geometry not supported")}}function ys(s,a){var h,d=!1;for(h=0;h<s.coordinates.length;h++)if($n(s.coordinates[h],a.coordinates)){d=!0;break}return d}function na(s,a){for(var h=0,d=a.coordinates;h<d.length;h++){for(var _=d[h],k=!1,S=0,B=s.coordinates;S<B.length;S++){var q=B[S];if($n(_,q)){k=!0;break}}if(!k)return!1}return!0}function io(s,a){for(var h=!1,d=0,_=a.coordinates;d<_.length;d++){var k=_[d];if(hi(k,s,{ignoreEndVertices:!0})&&(h=!0),!hi(k,s))return!1}return!!h}function so(s,a){for(var h=0,d=a.coordinates;h<d.length;h++){var _=d[h];if(!$r(_,s,{ignoreBoundary:!0}))return!1}return!0}function zs(s,a){for(var h=!1,d=0,_=a.coordinates;d<_.length;d++){var k=_[d];if(hi({type:"Point",coordinates:k},s,{ignoreEndVertices:!0})&&(h=!0),!hi({type:"Point",coordinates:k},s,{ignoreEndVertices:!1}))return!1}return h}function Ri(s,a){var h=!1,d=0,_=gs(s),k=gs(a);if(!Hn(_,k))return!1;for(d;d<a.coordinates.length-1;d++){var S=_r(a.coordinates[d],a.coordinates[d+1]);if($r({type:"Point",coordinates:S},s,{ignoreBoundary:!0})){h=!0;break}}return h}function Or(s,a){if(s.type==="Feature"&&s.geometry===null||a.type==="Feature"&&a.geometry===null)return!1;var h=gs(s),d=gs(a);if(!Hn(h,d))return!1;for(var _=kr(a).coordinates,k=0,S=_;k<S.length;k++)for(var B=S[k],q=0,J=B;q<J.length;q++){var Be=J[q];if(!$r(Be,s))return!1}return!0}function Hn(s,a){return!(s[0]>a[0]||s[2]<a[2]||s[1]>a[1]||s[3]<a[3])}function $n(s,a){return s[0]===a[0]&&s[1]===a[1]}function _r(s,a){return[(s[0]+a[0])/2,(s[1]+a[1])/2]}var Qn=m(bi()),es=s=>()=>s,oo=s=>{let a=s?(h,d)=>d.minus(h).abs().isLessThanOrEqualTo(s):es(!1);return(h,d)=>a(h,d)?0:h.comparedTo(d)};function bs(s){let a=s?(h,d,_,k,S)=>h.exponentiatedBy(2).isLessThanOrEqualTo(k.minus(d).exponentiatedBy(2).plus(S.minus(_).exponentiatedBy(2)).times(s)):es(!1);return(h,d,_)=>{let k=h.x,S=h.y,B=_.x,q=_.y,J=S.minus(q).times(d.x.minus(B)).minus(k.minus(B).times(d.y.minus(q)));return a(J,k,S,B,q)?0:J.comparedTo(0)}}var Za=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ao=Math.ceil,Er=Math.floor,er="[BigNumber Error] ",fi=er+"Number primitive has more than 15 significant digits: ",di=1e14,cn=14,Ka=9007199254740991,Bo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Fi=1e7,Gr=1e9;function bl(s){var a,h,d,_=Me.prototype={constructor:Me,toString:null,valueOf:null},k=new Me(1),S=20,B=4,q=-7,J=21,Be=-1e7,Ee=1e7,Je=!1,ut=1,kt=0,Ot={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Rt="0123456789abcdefghijklmnopqrstuvwxyz",hn=!0;function Me(H,Q){var ve,ge,ye,be,$e,ze,He,it,nt=this;if(!(nt instanceof Me))return new Me(H,Q);if(Q==null){if(H&&H._isBigNumber===!0){nt.s=H.s,!H.c||H.e>Ee?nt.c=nt.e=null:H.e<Be?nt.c=[nt.e=0]:(nt.e=H.e,nt.c=H.c.slice());return}if((ze=typeof H=="number")&&H*0==0){if(nt.s=1/H<0?(H=-H,-1):1,H===~~H){for(be=0,$e=H;$e>=10;$e/=10,be++);be>Ee?nt.c=nt.e=null:(nt.e=be,nt.c=[H]);return}it=String(H)}else{if(!Za.test(it=String(H)))return d(nt,it,ze);nt.s=it.charCodeAt(0)==45?(it=it.slice(1),-1):1}(be=it.indexOf("."))>-1&&(it=it.replace(".","")),($e=it.search(/e/i))>0?(be<0&&(be=$e),be+=+it.slice($e+1),it=it.substring(0,$e)):be<0&&(be=it.length)}else{if(r(Q,2,Rt.length,"Base"),Q==10&&hn)return nt=new Me(H),Xe(nt,S+nt.e+1,B);if(it=String(H),ze=typeof H=="number"){if(H*0!=0)return d(nt,it,ze,Q);if(nt.s=1/H<0?(it=it.slice(1),-1):1,Me.DEBUG&&it.replace(/^0\.0*|\./,"").length>15)throw Error(fi+H)}else nt.s=it.charCodeAt(0)===45?(it=it.slice(1),-1):1;for(ve=Rt.slice(0,Q),be=$e=0,He=it.length;$e<He;$e++)if(ve.indexOf(ge=it.charAt($e))<0){if(ge=="."){if($e>be){be=He;continue}}else if(!ye&&(it==it.toUpperCase()&&(it=it.toLowerCase())||it==it.toLowerCase()&&(it=it.toUpperCase()))){ye=!0,$e=-1,be=0;continue}return d(nt,String(H),ze,Q)}ze=!1,it=h(it,Q,10,nt.s),(be=it.indexOf("."))>-1?it=it.replace(".",""):be=it.length}for($e=0;it.charCodeAt($e)===48;$e++);for(He=it.length;it.charCodeAt(--He)===48;);if(it=it.slice($e,++He)){if(He-=$e,ze&&Me.DEBUG&&He>15&&(H>Ka||H!==Er(H)))throw Error(fi+nt.s*H);if((be=be-$e-1)>Ee)nt.c=nt.e=null;else if(be<Be)nt.c=[nt.e=0];else{if(nt.e=be,nt.c=[],$e=(be+1)%cn,be<0&&($e+=cn),$e<He){for($e&&nt.c.push(+it.slice(0,$e)),He-=cn;$e<He;)nt.c.push(+it.slice($e,$e+=cn));$e=cn-(it=it.slice($e)).length}else $e-=He;for(;$e--;it+="0");nt.c.push(+it)}}else nt.c=[nt.e=0]}Me.clone=bl,Me.ROUND_UP=0,Me.ROUND_DOWN=1,Me.ROUND_CEIL=2,Me.ROUND_FLOOR=3,Me.ROUND_HALF_UP=4,Me.ROUND_HALF_DOWN=5,Me.ROUND_HALF_EVEN=6,Me.ROUND_HALF_CEIL=7,Me.ROUND_HALF_FLOOR=8,Me.EUCLID=9,Me.config=Me.set=function(H){var Q,ve;if(H!=null)if(typeof H=="object"){if(H.hasOwnProperty(Q="DECIMAL_PLACES")&&(ve=H[Q],r(ve,0,Gr,Q),S=ve),H.hasOwnProperty(Q="ROUNDING_MODE")&&(ve=H[Q],r(ve,0,8,Q),B=ve),H.hasOwnProperty(Q="EXPONENTIAL_AT")&&(ve=H[Q],ve&&ve.pop?(r(ve[0],-1e9,0,Q),r(ve[1],0,Gr,Q),q=ve[0],J=ve[1]):(r(ve,-1e9,Gr,Q),q=-(J=ve<0?-ve:ve))),H.hasOwnProperty(Q="RANGE"))if(ve=H[Q],ve&&ve.pop)r(ve[0],-1e9,-1,Q),r(ve[1],1,Gr,Q),Be=ve[0],Ee=ve[1];else if(r(ve,-1e9,Gr,Q),ve)Be=-(Ee=ve<0?-ve:ve);else throw Error(er+Q+" cannot be zero: "+ve);if(H.hasOwnProperty(Q="CRYPTO"))if(ve=H[Q],ve===!!ve)if(ve)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Je=ve;else throw Je=!ve,Error(er+"crypto unavailable");else Je=ve;else throw Error(er+Q+" not true or false: "+ve);if(H.hasOwnProperty(Q="MODULO_MODE")&&(ve=H[Q],r(ve,0,9,Q),ut=ve),H.hasOwnProperty(Q="POW_PRECISION")&&(ve=H[Q],r(ve,0,Gr,Q),kt=ve),H.hasOwnProperty(Q="FORMAT"))if(ve=H[Q],typeof ve=="object")Ot=ve;else throw Error(er+Q+" not an object: "+ve);if(H.hasOwnProperty(Q="ALPHABET"))if(ve=H[Q],typeof ve=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(ve))hn=ve.slice(0,10)=="0123456789",Rt=ve;else throw Error(er+Q+" invalid: "+ve)}else throw Error(er+"Object expected: "+H);return{DECIMAL_PLACES:S,ROUNDING_MODE:B,EXPONENTIAL_AT:[q,J],RANGE:[Be,Ee],CRYPTO:Je,MODULO_MODE:ut,POW_PRECISION:kt,FORMAT:Ot,ALPHABET:Rt}},Me.isBigNumber=function(H){if(!H||H._isBigNumber!==!0)return!1;if(!Me.DEBUG)return!0;var Q,ve,ge=H.c,ye=H.e,be=H.s;e:if({}.toString.call(ge)=="[object Array]"){if((be===1||be===-1)&&ye>=-1e9&&ye<=Gr&&ye===Er(ye)){if(ge[0]===0){if(ye===0&&ge.length===1)return!0;break e}if(Q=(ye+1)%cn,Q<1&&(Q+=cn),String(ge[0]).length==Q){for(Q=0;Q<ge.length;Q++)if(ve=ge[Q],ve<0||ve>=di||ve!==Er(ve))break e;if(ve!==0)return!0}}}else if(ge===null&&ye===null&&(be===null||be===1||be===-1))return!0;throw Error(er+"Invalid BigNumber: "+H)},Me.maximum=Me.max=function(){return Ge(arguments,-1)},Me.minimum=Me.min=function(){return Ge(arguments,1)},Me.random=function(){var H=9007199254740992,Q=Math.random()*H&2097151?function(){return Er(Math.random()*H)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(ve){var ge,ye,be,$e,ze,He=0,it=[],nt=new Me(k);if(ve==null?ve=S:r(ve,0,Gr),$e=ao(ve/cn),Je)if(crypto.getRandomValues){for(ge=crypto.getRandomValues(new Uint32Array($e*=2));He<$e;)ze=ge[He]*131072+(ge[He+1]>>>11),ze>=9e15?(ye=crypto.getRandomValues(new Uint32Array(2)),ge[He]=ye[0],ge[He+1]=ye[1]):(it.push(ze%1e14),He+=2);He=$e/2}else if(crypto.randomBytes){for(ge=crypto.randomBytes($e*=7);He<$e;)ze=(ge[He]&31)*281474976710656+ge[He+1]*1099511627776+ge[He+2]*4294967296+ge[He+3]*16777216+(ge[He+4]<<16)+(ge[He+5]<<8)+ge[He+6],ze>=9e15?crypto.randomBytes(7).copy(ge,He):(it.push(ze%1e14),He+=7);He=$e/7}else throw Je=!1,Error(er+"crypto unavailable");if(!Je)for(;He<$e;)ze=Q(),ze<9e15&&(it[He++]=ze%1e14);for($e=it[--He],ve%=cn,$e&&ve&&(ze=Bo[cn-ve],it[He]=Er($e/ze)*ze);it[He]===0;it.pop(),He--);if(He<0)it=[be=0];else{for(be=-1;it[0]===0;it.splice(0,1),be-=cn);for(He=1,ze=it[0];ze>=10;ze/=10,He++);He<cn&&(be-=cn-He)}return nt.e=be,nt.c=it,nt}}(),Me.sum=function(){for(var H=1,Q=arguments,ve=new Me(Q[0]);H<Q.length;)ve=ve.plus(Q[H++]);return ve},h=function(){var H="0123456789";function Q(ve,ge,ye,be){for(var $e,ze=[0],He,it=0,nt=ve.length;it<nt;){for(He=ze.length;He--;ze[He]*=ge);for(ze[0]+=be.indexOf(ve.charAt(it++)),$e=0;$e<ze.length;$e++)ze[$e]>ye-1&&(ze[$e+1]==null&&(ze[$e+1]=0),ze[$e+1]+=ze[$e]/ye|0,ze[$e]%=ye)}return ze.reverse()}return function(ve,ge,ye,be,$e){var ze,He,it,nt,Et,Gt,Jt,en,zn=ve.indexOf("."),Vn=S,Dn=B;for(zn>=0&&(nt=kt,kt=0,ve=ve.replace(".",""),en=new Me(ge),Gt=en.pow(ve.length-zn),kt=nt,en.c=Q(P(ii(Gt.c),Gt.e,"0"),10,ye,H),en.e=en.c.length),Jt=Q(ve,ge,ye,$e?(ze=Rt,H):(ze=H,Rt)),it=nt=Jt.length;Jt[--nt]==0;Jt.pop());if(!Jt[0])return ze.charAt(0);if(zn<0?--it:(Gt.c=Jt,Gt.e=it,Gt.s=be,Gt=a(Gt,en,Vn,Dn,ye),Jt=Gt.c,Et=Gt.r,it=Gt.e),He=it+Vn+1,zn=Jt[He],nt=ye/2,Et=Et||He<0||Jt[He+1]!=null,Et=Dn<4?(zn!=null||Et)&&(Dn==0||Dn==(Gt.s<0?3:2)):zn>nt||zn==nt&&(Dn==4||Et||Dn==6&&Jt[He-1]&1||Dn==(Gt.s<0?8:7)),He<1||!Jt[0])ve=Et?P(ze.charAt(1),-Vn,ze.charAt(0)):ze.charAt(0);else{if(Jt.length=He,Et)for(--ye;++Jt[--He]>ye;)Jt[He]=0,He||(++it,Jt=[1].concat(Jt));for(nt=Jt.length;!Jt[--nt];);for(zn=0,ve="";zn<=nt;ve+=ze.charAt(Jt[zn++]));ve=P(ve,it,ze.charAt(0))}return ve}}(),a=function(){function H(ge,ye,be){var $e,ze,He,it,nt=0,Et=ge.length,Gt=ye%Fi,Jt=ye/Fi|0;for(ge=ge.slice();Et--;)He=ge[Et]%Fi,it=ge[Et]/Fi|0,$e=Jt*He+it*Gt,ze=Gt*He+$e%Fi*Fi+nt,nt=(ze/be|0)+($e/Fi|0)+Jt*it,ge[Et]=ze%be;return nt&&(ge=[nt].concat(ge)),ge}function Q(ge,ye,be,$e){var ze,He;if(be!=$e)He=be>$e?1:-1;else for(ze=He=0;ze<be;ze++)if(ge[ze]!=ye[ze]){He=ge[ze]>ye[ze]?1:-1;break}return He}function ve(ge,ye,be,$e){for(var ze=0;be--;)ge[be]-=ze,ze=ge[be]<ye[be]?1:0,ge[be]=ze*$e+ge[be]-ye[be];for(;!ge[0]&&ge.length>1;ge.splice(0,1));}return function(ge,ye,be,$e,ze){var He,it,nt,Et,Gt,Jt,en,zn,Vn,Dn,tr,mi,Xa,lo,Su,uo,kl,ns=ge.s==ye.s?1:-1,Wr=ge.c,vr=ye.c;if(!Wr||!Wr[0]||!vr||!vr[0])return new Me(!ge.s||!ye.s||(Wr?vr&&Wr[0]==vr[0]:!vr)?NaN:Wr&&Wr[0]==0||!vr?ns*0:ns/0);for(zn=new Me(ns),Vn=zn.c=[],it=ge.e-ye.e,ns=be+it+1,ze||(ze=di,it=ri(ge.e/cn)-ri(ye.e/cn),ns=ns/cn|0),nt=0;vr[nt]==(Wr[nt]||0);nt++);if(vr[nt]>(Wr[nt]||0)&&it--,ns<0)Vn.push(1),Et=!0;else{for(lo=Wr.length,uo=vr.length,nt=0,ns+=2,Gt=Er(ze/(vr[0]+1)),Gt>1&&(vr=H(vr,Gt,ze),Wr=H(Wr,Gt,ze),uo=vr.length,lo=Wr.length),Xa=uo,Dn=Wr.slice(0,uo),tr=Dn.length;tr<uo;Dn[tr++]=0);kl=vr.slice(),kl=[0].concat(kl),Su=vr[0],vr[1]>=ze/2&&Su++;do{if(Gt=0,He=Q(vr,Dn,uo,tr),He<0){if(mi=Dn[0],uo!=tr&&(mi=mi*ze+(Dn[1]||0)),Gt=Er(mi/Su),Gt>1)for(Gt>=ze&&(Gt=ze-1),Jt=H(vr,Gt,ze),en=Jt.length,tr=Dn.length;Q(Jt,Dn,en,tr)==1;)Gt--,ve(Jt,uo<en?kl:vr,en,ze),en=Jt.length,He=1;else Gt==0&&(He=Gt=1),Jt=vr.slice(),en=Jt.length;if(en<tr&&(Jt=[0].concat(Jt)),ve(Dn,Jt,tr,ze),tr=Dn.length,He==-1)for(;Q(vr,Dn,uo,tr)<1;)Gt++,ve(Dn,uo<tr?kl:vr,tr,ze),tr=Dn.length}else He===0&&(Gt++,Dn=[0]);Vn[nt++]=Gt,Dn[0]?Dn[tr++]=Wr[Xa]||0:(Dn=[Wr[Xa]],tr=1)}while((Xa++<lo||Dn[0]!=null)&&ns--);Et=Dn[0]!=null,Vn[0]||Vn.splice(0,1)}if(ze==di){for(nt=1,ns=Vn[0];ns>=10;ns/=10,nt++);Xe(zn,be+(zn.e=nt+it*cn-1)+1,$e,Et)}else zn.e=it,zn.r=+Et;return zn}}();function Fe(H,Q,ve,ge){var ye,be,$e,ze,He;if(ve==null?ve=B:r(ve,0,8),!H.c)return H.toString();if(ye=H.c[0],$e=H.e,Q==null)He=ii(H.c),He=ge==1||ge==2&&($e<=q||$e>=J)?g(He,$e):P(He,$e,"0");else if(H=Xe(new Me(H),Q,ve),be=H.e,He=ii(H.c),ze=He.length,ge==1||ge==2&&(Q<=be||be<=q)){for(;ze<Q;He+="0",ze++);He=g(He,be)}else if(Q-=$e,He=P(He,be,"0"),be+1>ze){if(--Q>0)for(He+=".";Q--;He+="0");}else if(Q+=be-ze,Q>0)for(be+1==ze&&(He+=".");Q--;He+="0");return H.s<0&&ye?"-"+He:He}function Ge(H,Q){for(var ve,ge,ye=1,be=new Me(H[0]);ye<H.length;ye++)ge=new Me(H[ye]),(!ge.s||(ve=ws(be,ge))===Q||ve===0&&be.s===Q)&&(be=ge);return be}function pt(H,Q,ve){for(var ge=1,ye=Q.length;!Q[--ye];Q.pop());for(ye=Q[0];ye>=10;ye/=10,ge++);return(ve=ge+ve*cn-1)>Ee?H.c=H.e=null:ve<Be?H.c=[H.e=0]:(H.e=ve,H.c=Q),H}d=function(){var H=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Q=/^([^.]+)\.$/,ve=/^\.([^.]+)$/,ge=/^-?(Infinity|NaN)$/,ye=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(be,$e,ze,He){var it,nt=ze?$e:$e.replace(ye,"");if(ge.test(nt))be.s=isNaN(nt)?null:nt<0?-1:1;else{if(!ze&&(nt=nt.replace(H,function(Et,Gt,Jt){return it=(Jt=Jt.toLowerCase())=="x"?16:Jt=="b"?2:8,!He||He==it?Gt:Et}),He&&(it=He,nt=nt.replace(Q,"$1").replace(ve,"0.$1")),$e!=nt))return new Me(nt,it);if(Me.DEBUG)throw Error(er+"Not a"+(He?" base "+He:"")+" number: "+$e);be.s=null}be.c=be.e=null}}();function Xe(H,Q,ve,ge){var ye,be,$e,ze,He,it,nt,Et=H.c,Gt=Bo;if(Et){e:{for(ye=1,ze=Et[0];ze>=10;ze/=10,ye++);if(be=Q-ye,be<0)be+=cn,$e=Q,He=Et[it=0],nt=Er(He/Gt[ye-$e-1]%10);else if(it=ao((be+1)/cn),it>=Et.length)if(ge){for(;Et.length<=it;Et.push(0));He=nt=0,ye=1,be%=cn,$e=be-cn+1}else break e;else{for(He=ze=Et[it],ye=1;ze>=10;ze/=10,ye++);be%=cn,$e=be-cn+ye,nt=$e<0?0:Er(He/Gt[ye-$e-1]%10)}if(ge=ge||Q<0||Et[it+1]!=null||($e<0?He:He%Gt[ye-$e-1]),ge=ve<4?(nt||ge)&&(ve==0||ve==(H.s<0?3:2)):nt>5||nt==5&&(ve==4||ge||ve==6&&(be>0?$e>0?He/Gt[ye-$e]:0:Et[it-1])%10&1||ve==(H.s<0?8:7)),Q<1||!Et[0])return Et.length=0,ge?(Q-=H.e+1,Et[0]=Gt[(cn-Q%cn)%cn],H.e=-Q||0):Et[0]=H.e=0,H;if(be==0?(Et.length=it,ze=1,it--):(Et.length=it+1,ze=Gt[cn-be],Et[it]=$e>0?Er(He/Gt[ye-$e]%Gt[$e])*ze:0),ge)for(;;)if(it==0){for(be=1,$e=Et[0];$e>=10;$e/=10,be++);for($e=Et[0]+=ze,ze=1;$e>=10;$e/=10,ze++);be!=ze&&(H.e++,Et[0]==di&&(Et[0]=1));break}else{if(Et[it]+=ze,Et[it]!=di)break;Et[it--]=0,ze=1}for(be=Et.length;Et[--be]===0;Et.pop());}H.e>Ee?H.c=H.e=null:H.e<Be&&(H.c=[H.e=0])}return H}function ct(H){var Q,ve=H.e;return ve===null?H.toString():(Q=ii(H.c),Q=ve<=q||ve>=J?g(Q,ve):P(Q,ve,"0"),H.s<0?"-"+Q:Q)}return _.absoluteValue=_.abs=function(){var H=new Me(this);return H.s<0&&(H.s=1),H},_.comparedTo=function(H,Q){return ws(this,new Me(H,Q))},_.decimalPlaces=_.dp=function(H,Q){var ve,ge,ye,be=this;if(H!=null)return r(H,0,Gr),Q==null?Q=B:r(Q,0,8),Xe(new Me(be),H+be.e+1,Q);if(!(ve=be.c))return null;if(ge=((ye=ve.length-1)-ri(this.e/cn))*cn,ye=ve[ye])for(;ye%10==0;ye/=10,ge--);return ge<0&&(ge=0),ge},_.dividedBy=_.div=function(H,Q){return a(this,new Me(H,Q),S,B)},_.dividedToIntegerBy=_.idiv=function(H,Q){return a(this,new Me(H,Q),0,1)},_.exponentiatedBy=_.pow=function(H,Q){var ve,ge,ye,be,$e,ze,He,it,nt,Et=this;if(H=new Me(H),H.c&&!H.isInteger())throw Error(er+"Exponent not an integer: "+ct(H));if(Q!=null&&(Q=new Me(Q)),ze=H.e>14,!Et.c||!Et.c[0]||Et.c[0]==1&&!Et.e&&Et.c.length==1||!H.c||!H.c[0])return nt=new Me(Math.pow(+ct(Et),ze?H.s*(2-u(H)):+ct(H))),Q?nt.mod(Q):nt;if(He=H.s<0,Q){if(Q.c?!Q.c[0]:!Q.s)return new Me(NaN);ge=!He&&Et.isInteger()&&Q.isInteger(),ge&&(Et=Et.mod(Q))}else{if(H.e>9&&(Et.e>0||Et.e<-1||(Et.e==0?Et.c[0]>1||ze&&Et.c[1]>=24e7:Et.c[0]<8e13||ze&&Et.c[0]<=9999975e7)))return be=Et.s<0&&u(H)?-0:0,Et.e>-1&&(be=1/be),new Me(He?1/be:be);kt&&(be=ao(kt/cn+2))}for(ze?(ve=new Me(.5),He&&(H.s=1),it=u(H)):(ye=Math.abs(+ct(H)),it=ye%2),nt=new Me(k);;){if(it){if(nt=nt.times(Et),!nt.c)break;be?nt.c.length>be&&(nt.c.length=be):ge&&(nt=nt.mod(Q))}if(ye){if(ye=Er(ye/2),ye===0)break;it=ye%2}else if(H=H.times(ve),Xe(H,H.e+1,1),H.e>14)it=u(H);else{if(ye=+ct(H),ye===0)break;it=ye%2}Et=Et.times(Et),be?Et.c&&Et.c.length>be&&(Et.c.length=be):ge&&(Et=Et.mod(Q))}return ge?nt:(He&&(nt=k.div(nt)),Q?nt.mod(Q):be?Xe(nt,kt,B,$e):nt)},_.integerValue=function(H){var Q=new Me(this);return H==null?H=B:r(H,0,8),Xe(Q,Q.e+1,H)},_.isEqualTo=_.eq=function(H,Q){return ws(this,new Me(H,Q))===0},_.isFinite=function(){return!!this.c},_.isGreaterThan=_.gt=function(H,Q){return ws(this,new Me(H,Q))>0},_.isGreaterThanOrEqualTo=_.gte=function(H,Q){return(Q=ws(this,new Me(H,Q)))===1||Q===0},_.isInteger=function(){return!!this.c&&ri(this.e/cn)>this.c.length-2},_.isLessThan=_.lt=function(H,Q){return ws(this,new Me(H,Q))<0},_.isLessThanOrEqualTo=_.lte=function(H,Q){return(Q=ws(this,new Me(H,Q)))===-1||Q===0},_.isNaN=function(){return!this.s},_.isNegative=function(){return this.s<0},_.isPositive=function(){return this.s>0},_.isZero=function(){return!!this.c&&this.c[0]==0},_.minus=function(H,Q){var ve,ge,ye,be,$e=this,ze=$e.s;if(H=new Me(H,Q),Q=H.s,!ze||!Q)return new Me(NaN);if(ze!=Q)return H.s=-Q,$e.plus(H);var He=$e.e/cn,it=H.e/cn,nt=$e.c,Et=H.c;if(!He||!it){if(!nt||!Et)return nt?(H.s=-Q,H):new Me(Et?$e:NaN);if(!nt[0]||!Et[0])return Et[0]?(H.s=-Q,H):new Me(nt[0]?$e:B==3?-0:0)}if(He=ri(He),it=ri(it),nt=nt.slice(),ze=He-it){for((be=ze<0)?(ze=-ze,ye=nt):(it=He,ye=Et),ye.reverse(),Q=ze;Q--;ye.push(0));ye.reverse()}else for(ge=(be=(ze=nt.length)<(Q=Et.length))?ze:Q,ze=Q=0;Q<ge;Q++)if(nt[Q]!=Et[Q]){be=nt[Q]<Et[Q];break}if(be&&(ye=nt,nt=Et,Et=ye,H.s=-H.s),Q=(ge=Et.length)-(ve=nt.length),Q>0)for(;Q--;nt[ve++]=0);for(Q=di-1;ge>ze;){if(nt[--ge]<Et[ge]){for(ve=ge;ve&&!nt[--ve];nt[ve]=Q);--nt[ve],nt[ge]+=di}nt[ge]-=Et[ge]}for(;nt[0]==0;nt.splice(0,1),--it);return nt[0]?pt(H,nt,it):(H.s=B==3?-1:1,H.c=[H.e=0],H)},_.modulo=_.mod=function(H,Q){var ve,ge,ye=this;return H=new Me(H,Q),!ye.c||!H.s||H.c&&!H.c[0]?new Me(NaN):!H.c||ye.c&&!ye.c[0]?new Me(ye):(ut==9?(ge=H.s,H.s=1,ve=a(ye,H,0,3),H.s=ge,ve.s*=ge):ve=a(ye,H,0,ut),H=ye.minus(ve.times(H)),!H.c[0]&&ut==1&&(H.s=ye.s),H)},_.multipliedBy=_.times=function(H,Q){var ve,ge,ye,be,$e,ze,He,it,nt,Et,Gt,Jt,en,zn,Vn,Dn=this,tr=Dn.c,mi=(H=new Me(H,Q)).c;if(!tr||!mi||!tr[0]||!mi[0])return!Dn.s||!H.s||tr&&!tr[0]&&!mi||mi&&!mi[0]&&!tr?H.c=H.e=H.s=null:(H.s*=Dn.s,!tr||!mi?H.c=H.e=null:(H.c=[0],H.e=0)),H;for(ge=ri(Dn.e/cn)+ri(H.e/cn),H.s*=Dn.s,He=tr.length,Et=mi.length,He<Et&&(en=tr,tr=mi,mi=en,ye=He,He=Et,Et=ye),ye=He+Et,en=[];ye--;en.push(0));for(zn=di,Vn=Fi,ye=Et;--ye>=0;){for(ve=0,Gt=mi[ye]%Vn,Jt=mi[ye]/Vn|0,$e=He,be=ye+$e;be>ye;)it=tr[--$e]%Vn,nt=tr[$e]/Vn|0,ze=Jt*it+nt*Gt,it=Gt*it+ze%Vn*Vn+en[be]+ve,ve=(it/zn|0)+(ze/Vn|0)+Jt*nt,en[be--]=it%zn;en[be]=ve}return ve?++ge:en.splice(0,1),pt(H,en,ge)},_.negated=function(){var H=new Me(this);return H.s=-H.s||null,H},_.plus=function(H,Q){var ve,ge=this,ye=ge.s;if(H=new Me(H,Q),Q=H.s,!ye||!Q)return new Me(NaN);if(ye!=Q)return H.s=-Q,ge.minus(H);var be=ge.e/cn,$e=H.e/cn,ze=ge.c,He=H.c;if(!be||!$e){if(!ze||!He)return new Me(ye/0);if(!ze[0]||!He[0])return He[0]?H:new Me(ze[0]?ge:ye*0)}if(be=ri(be),$e=ri($e),ze=ze.slice(),ye=be-$e){for(ye>0?($e=be,ve=He):(ye=-ye,ve=ze),ve.reverse();ye--;ve.push(0));ve.reverse()}for(ye=ze.length,Q=He.length,ye-Q<0&&(ve=He,He=ze,ze=ve,Q=ye),ye=0;Q;)ye=(ze[--Q]=ze[Q]+He[Q]+ye)/di|0,ze[Q]=di===ze[Q]?0:ze[Q]%di;return ye&&(ze=[ye].concat(ze),++$e),pt(H,ze,$e)},_.precision=_.sd=function(H,Q){var ve,ge,ye,be=this;if(H!=null&&H!==!!H)return r(H,1,Gr),Q==null?Q=B:r(Q,0,8),Xe(new Me(be),H,Q);if(!(ve=be.c))return null;if(ye=ve.length-1,ge=ye*cn+1,ye=ve[ye]){for(;ye%10==0;ye/=10,ge--);for(ye=ve[0];ye>=10;ye/=10,ge++);}return H&&be.e+1>ge&&(ge=be.e+1),ge},_.shiftedBy=function(H){return r(H,-9007199254740991,Ka),this.times("1e"+H)},_.squareRoot=_.sqrt=function(){var H,Q,ve,ge,ye,be=this,$e=be.c,ze=be.s,He=be.e,it=S+4,nt=new Me("0.5");if(ze!==1||!$e||!$e[0])return new Me(!ze||ze<0&&(!$e||$e[0])?NaN:$e?be:1/0);if(ze=Math.sqrt(+ct(be)),ze==0||ze==1/0?(Q=ii($e),(Q.length+He)%2==0&&(Q+="0"),ze=Math.sqrt(+Q),He=ri((He+1)/2)-(He<0||He%2),ze==1/0?Q="5e"+He:(Q=ze.toExponential(),Q=Q.slice(0,Q.indexOf("e")+1)+He),ve=new Me(Q)):ve=new Me(ze+""),ve.c[0]){for(He=ve.e,ze=He+it,ze<3&&(ze=0);;)if(ye=ve,ve=nt.times(ye.plus(a(be,ye,it,1))),ii(ye.c).slice(0,ze)===(Q=ii(ve.c)).slice(0,ze))if(ve.e<He&&--ze,Q=Q.slice(ze-3,ze+1),Q=="9999"||!ge&&Q=="4999"){if(!ge&&(Xe(ye,ye.e+S+2,0),ye.times(ye).eq(be))){ve=ye;break}it+=4,ze+=4,ge=1}else{(!+Q||!+Q.slice(1)&&Q.charAt(0)=="5")&&(Xe(ve,ve.e+S+2,1),H=!ve.times(ve).eq(be));break}}return Xe(ve,ve.e+S+1,B,H)},_.toExponential=function(H,Q){return H!=null&&(r(H,0,Gr),H++),Fe(this,H,Q,1)},_.toFixed=function(H,Q){return H!=null&&(r(H,0,Gr),H=H+this.e+1),Fe(this,H,Q)},_.toFormat=function(H,Q,ve){var ge,ye=this;if(ve==null)H!=null&&Q&&typeof Q=="object"?(ve=Q,Q=null):H&&typeof H=="object"?(ve=H,H=Q=null):ve=Ot;else if(typeof ve!="object")throw Error(er+"Argument not an object: "+ve);if(ge=ye.toFixed(H,Q),ye.c){var be,$e=ge.split("."),ze=+ve.groupSize,He=+ve.secondaryGroupSize,it=ve.groupSeparator||"",nt=$e[0],Et=$e[1],Gt=ye.s<0,Jt=Gt?nt.slice(1):nt,en=Jt.length;if(He&&(be=ze,ze=He,He=be,en-=be),ze>0&&en>0){for(be=en%ze||ze,nt=Jt.substr(0,be);be<en;be+=ze)nt+=it+Jt.substr(be,ze);He>0&&(nt+=it+Jt.slice(be)),Gt&&(nt="-"+nt)}ge=Et?nt+(ve.decimalSeparator||"")+((He=+ve.fractionGroupSize)?Et.replace(new RegExp("\\d{"+He+"}\\B","g"),"$&"+(ve.fractionGroupSeparator||"")):Et):nt}return(ve.prefix||"")+ge+(ve.suffix||"")},_.toFraction=function(H){var Q,ve,ge,ye,be,$e,ze,He,it,nt,Et,Gt,Jt=this,en=Jt.c;if(H!=null&&(ze=new Me(H),!ze.isInteger()&&(ze.c||ze.s!==1)||ze.lt(k)))throw Error(er+"Argument "+(ze.isInteger()?"out of range: ":"not an integer: ")+ct(ze));if(!en)return new Me(Jt);for(Q=new Me(k),it=ve=new Me(k),ge=He=new Me(k),Gt=ii(en),be=Q.e=Gt.length-Jt.e-1,Q.c[0]=Bo[($e=be%cn)<0?cn+$e:$e],H=!H||ze.comparedTo(Q)>0?be>0?Q:it:ze,$e=Ee,Ee=1/0,ze=new Me(Gt),He.c[0]=0;nt=a(ze,Q,0,1),ye=ve.plus(nt.times(ge)),ye.comparedTo(H)!=1;)ve=ge,ge=ye,it=He.plus(nt.times(ye=it)),He=ye,Q=ze.minus(nt.times(ye=Q)),ze=ye;return ye=a(H.minus(ve),ge,0,1),He=He.plus(ye.times(it)),ve=ve.plus(ye.times(ge)),He.s=it.s=Jt.s,be=be*2,Et=a(it,ge,be,B).minus(Jt).abs().comparedTo(a(He,ve,be,B).minus(Jt).abs())<1?[it,ge]:[He,ve],Ee=$e,Et},_.toNumber=function(){return+ct(this)},_.toPrecision=function(H,Q){return H!=null&&r(H,1,Gr),Fe(this,H,Q,2)},_.toString=function(H){var Q,ve=this,ge=ve.s,ye=ve.e;return ye===null?ge?(Q="Infinity",ge<0&&(Q="-"+Q)):Q="NaN":(H==null?Q=ye<=q||ye>=J?g(ii(ve.c),ye):P(ii(ve.c),ye,"0"):H===10&&hn?(ve=Xe(new Me(ve),S+ye+1,B),Q=P(ii(ve.c),ve.e,"0")):(r(H,2,Rt.length,"Base"),Q=h(P(ii(ve.c),ye,"0"),10,H,ge,!0)),ge<0&&ve.c[0]&&(Q="-"+Q)),Q},_.valueOf=_.toJSON=function(){return ct(this)},_._isBigNumber=!0,_[Symbol.toStringTag]="BigNumber",_[Symbol.for("nodejs.util.inspect.custom")]=_.valueOf,s!=null&&Me.set(s),Me}function ri(s){var a=s|0;return s>0||s===a?a:a-1}function ii(s){for(var a,h,d=1,_=s.length,k=s[0]+"";d<_;){for(a=s[d++]+"",h=cn-a.length;h--;a="0"+a);k+=a}for(_=k.length;k.charCodeAt(--_)===48;);return k.slice(0,_+1||1)}function ws(s,a){var h,d,_=s.c,k=a.c,S=s.s,B=a.s,q=s.e,J=a.e;if(!S||!B)return null;if(h=_&&!_[0],d=k&&!k[0],h||d)return h?d?0:-B:S;if(S!=B)return S;if(h=S<0,d=q==J,!_||!k)return d?0:!_^h?1:-1;if(!d)return q>J^h?1:-1;for(B=(q=_.length)<(J=k.length)?q:J,S=0;S<B;S++)if(_[S]!=k[S])return _[S]>k[S]^h?1:-1;return q==J?0:q>J^h?1:-1}function r(s,a,h,d){if(s<a||s>h||s!==Er(s))throw Error(er+(d||"Argument")+(typeof s=="number"?s<a||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function u(s){var a=s.c.length-1;return ri(s.e/cn)==a&&s.c[a]%2!=0}function g(s,a){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(a<0?"e":"e+")+a}function P(s,a,h){var d,_;if(a<0){for(_=h+".";++a;_+=h);s=_+s}else if(d=s.length,++a>d){for(_=h,a-=d;--a;_+=h);s+=_}else a<d&&(s=s.slice(0,a)+"."+s.slice(a));return s}var D=bl(),re=D,je=class{constructor(s){Qt(this,"key");Qt(this,"left",null);Qt(this,"right",null);this.key=s}},at=class extends je{constructor(s){super(s)}},_t=class{constructor(){Qt(this,"size",0);Qt(this,"modificationCount",0);Qt(this,"splayCount",0)}splay(s){let a=this.root;if(a==null)return this.compare(s,s),-1;let h=null,d=null,_=null,k=null,S=a,B=this.compare,q;for(;;)if(q=B(S.key,s),q>0){let J=S.left;if(J==null||(q=B(J.key,s),q>0&&(S.left=J.right,J.right=S,S=J,J=S.left,J==null)))break;h==null?d=S:h.left=S,h=S,S=J}else if(q<0){let J=S.right;if(J==null||(q=B(J.key,s),q<0&&(S.right=J.left,J.left=S,S=J,J=S.right,J==null)))break;_==null?k=S:_.right=S,_=S,S=J}else break;return _!=null&&(_.right=S.left,S.left=k),h!=null&&(h.left=S.right,S.right=d),this.root!==S&&(this.root=S,this.splayCount++),q}splayMin(s){let a=s,h=a.left;for(;h!=null;){let d=h;a.left=d.right,d.right=a,a=d,h=a.left}return a}splayMax(s){let a=s,h=a.right;for(;h!=null;){let d=h;a.right=d.left,d.left=a,a=d,h=a.right}return a}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let a=this.root,h=a,d=a.left;if(this.size--,d==null)this.root=a.right;else{let _=a.right;a=this.splayMax(d),a.right=_,this.root=a}return this.modificationCount++,h}addNewRoot(s,a){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}a<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,a)=>s<a?-1:s>a?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},At=class Uu extends _t{constructor(h,d){super();Qt(this,"root",null);Qt(this,"compare");Qt(this,"validKey");Qt(this,Ft,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=d??(_=>_!=null&&_!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let d of h)this.delete(d)}forEach(h){let d=this[Symbol.iterator](),_;for(;_=d.next(),!_.done;)h(_.value,_.value,this)}add(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new at(h),d),this}addAndReturn(h){let d=this.splay(h);return d!=0&&this.addNewRoot(new at(h),d),this.root.key}addAll(h){for(let d of h)this.add(d)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let d=this.root.left;if(d==null)return null;let _=d.right;for(;_!=null;)d=_,_=d.right;return d.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let d=this.root.right;if(d==null)return null;let _=d.left;for(;_!=null;)d=_,_=d.left;return d.key}retainAll(h){let d=new Uu(this.compare,this.validKey),_=this.modificationCount;for(let k of h){if(_!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(k)&&this.splay(k)==0&&d.add(this.root.key)}d.size!=this.size&&(this.root=d.root,this.size=d.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let d=new Uu(this.compare,this.validKey);for(let _ of this)h.has(_)&&d.add(_);return d}difference(h){let d=new Uu(this.compare,this.validKey);for(let _ of this)h.has(_)||d.add(_);return d}union(h){let d=this.clone();return d.addAll(h),d}clone(){let h=new Uu(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function d(k,S){let B,q;do{if(B=k.left,q=k.right,B!=null){let J=new at(B.key);S.left=J,d(B,J)}if(q!=null){let J=new at(q.key);S.right=J,k=q,S=J}}while(q!=null)}let _=new at(h.key);return d(h,_),_}toSet(){return this.clone()}entries(){return new En(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(an=Symbol.iterator,Ft=Symbol.toStringTag,an)](){return new rn(this.wrap())}},$t=class{constructor(s){Qt(this,"tree");Qt(this,"path",new Array);Qt(this,"modificationCount",null);Qt(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],a=s.right;if(a!=null){for(;a!=null;)this.path.push(a),a=a.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},rn=class extends $t{getValue(s){return s.key}},En=class extends $t{getValue(s){return[s.key,s.key]}},si=s=>s,Ar=s=>{if(s){let a=new At(oo(s)),h=new At(oo(s)),d=(k,S)=>S.addAndReturn(k),_=k=>({x:d(k.x,a),y:d(k.y,h)});return _({x:new re(0),y:new re(0)}),_}return si},pi=s=>({set:a=>{hr=pi(a)},reset:()=>pi(s),compare:oo(s),snap:Ar(s),orient:bs(s)}),hr=pi(),xs=(s,a)=>s.ll.x.isLessThanOrEqualTo(a.x)&&a.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(a.y)&&a.y.isLessThanOrEqualTo(s.ur.y),wl=(s,a)=>{if(a.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(a.ll.x)||a.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(a.ll.y))return null;let h=s.ll.x.isLessThan(a.ll.x)?a.ll.x:s.ll.x,d=s.ur.x.isLessThan(a.ur.x)?s.ur.x:a.ur.x,_=s.ll.y.isLessThan(a.ll.y)?a.ll.y:s.ll.y,k=s.ur.y.isLessThan(a.ur.y)?s.ur.y:a.ur.y;return{ll:{x:h,y:_},ur:{x:d,y:k}}},ts=(s,a)=>s.x.times(a.y).minus(s.y.times(a.x)),ji=(s,a)=>s.x.times(a.x).plus(s.y.times(a.y)),Ci=s=>ji(s,s).sqrt(),Pu=(s,a,h)=>{let d={x:a.x.minus(s.x),y:a.y.minus(s.y)},_={x:h.x.minus(s.x),y:h.y.minus(s.y)};return ts(_,d).div(Ci(_)).div(Ci(d))},xl=(s,a,h)=>{let d={x:a.x.minus(s.x),y:a.y.minus(s.y)},_={x:h.x.minus(s.x),y:h.y.minus(s.y)};return ji(_,d).div(Ci(_)).div(Ci(d))},Wn=(s,a,h)=>a.y.isZero()?null:{x:s.x.plus(a.x.div(a.y).times(h.minus(s.y))),y:h},Hr=(s,a,h)=>a.x.isZero()?null:{x:h,y:s.y.plus(a.y.div(a.x).times(h.minus(s.x)))},Eu=(s,a,h,d)=>{if(a.x.isZero())return Hr(h,d,s.x);if(d.x.isZero())return Hr(s,a,h.x);if(a.y.isZero())return Wn(h,d,s.y);if(d.y.isZero())return Wn(s,a,h.y);let _=ts(a,d);if(_.isZero())return null;let k={x:h.x.minus(s.x),y:h.y.minus(s.y)},S=ts(k,a).div(_),B=ts(k,d).div(_),q=s.x.plus(B.times(a.x)),J=h.x.plus(S.times(d.x)),Be=s.y.plus(B.times(a.y)),Ee=h.y.plus(S.times(d.y)),Je=q.plus(J).div(2),ut=Be.plus(Ee).div(2);return{x:Je,y:ut}},Ls=class jg{constructor(a,h){Qt(this,"point");Qt(this,"isLeft");Qt(this,"segment");Qt(this,"otherSE");Qt(this,"consumedBy");a.events===void 0?a.events=[this]:a.events.push(this),this.point=a,this.isLeft=h}static compare(a,h){let d=jg.comparePoints(a.point,h.point);return d!==0?d:(a.point!==h.point&&a.link(h),a.isLeft!==h.isLeft?a.isLeft?1:-1:To.compare(a.segment,h.segment))}static comparePoints(a,h){return a.x.isLessThan(h.x)?-1:a.x.isGreaterThan(h.x)?1:a.y.isLessThan(h.y)?-1:a.y.isGreaterThan(h.y)?1:0}link(a){if(a.point===this.point)throw new Error("Tried to link already linked events");let h=a.point.events;for(let d=0,_=h.length;d<_;d++){let k=h[d];this.point.events.push(k),k.point=this.point}this.checkForConsuming()}checkForConsuming(){let a=this.point.events.length;for(let h=0;h<a;h++){let d=this.point.events[h];if(d.segment.consumedBy===void 0)for(let _=h+1;_<a;_++){let k=this.point.events[_];k.consumedBy===void 0&&d.otherSE.point.events===k.otherSE.point.events&&d.segment.consume(k.segment)}}}getAvailableLinkedEvents(){let a=[];for(let h=0,d=this.point.events.length;h<d;h++){let _=this.point.events[h];_!==this&&!_.segment.ringOut&&_.segment.isInResult()&&a.push(_)}return a}getLeftmostComparator(a){let h=new Map,d=_=>{let k=_.otherSE;h.set(_,{sine:Pu(this.point,a.point,k.point),cosine:xl(this.point,a.point,k.point)})};return(_,k)=>{h.has(_)||d(_),h.has(k)||d(k);let{sine:S,cosine:B}=h.get(_),{sine:q,cosine:J}=h.get(k);return S.isGreaterThanOrEqualTo(0)&&q.isGreaterThanOrEqualTo(0)?B.isLessThan(J)?1:B.isGreaterThan(J)?-1:0:S.isLessThan(0)&&q.isLessThan(0)?B.isLessThan(J)?-1:B.isGreaterThan(J)?1:0:q.isLessThan(S)?-1:q.isGreaterThan(S)?1:0}}},Hl=0,To=class zc{constructor(a,h,d,_){Qt(this,"id");Qt(this,"leftSE");Qt(this,"rightSE");Qt(this,"rings");Qt(this,"windings");Qt(this,"ringOut");Qt(this,"consumedBy");Qt(this,"prev");Qt(this,"_prevInResult");Qt(this,"_beforeState");Qt(this,"_afterState");Qt(this,"_isInResult");this.id=++Hl,this.leftSE=a,a.segment=this,a.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=a,this.rings=d,this.windings=_}static compare(a,h){let d=a.leftSE.point.x,_=h.leftSE.point.x,k=a.rightSE.point.x,S=h.rightSE.point.x;if(S.isLessThan(d))return 1;if(k.isLessThan(_))return-1;let B=a.leftSE.point.y,q=h.leftSE.point.y,J=a.rightSE.point.y,Be=h.rightSE.point.y;if(d.isLessThan(_)){if(q.isLessThan(B)&&q.isLessThan(J))return 1;if(q.isGreaterThan(B)&&q.isGreaterThan(J))return-1;let Ee=a.comparePoint(h.leftSE.point);if(Ee<0)return 1;if(Ee>0)return-1;let Je=h.comparePoint(a.rightSE.point);return Je!==0?Je:-1}if(d.isGreaterThan(_)){if(B.isLessThan(q)&&B.isLessThan(Be))return-1;if(B.isGreaterThan(q)&&B.isGreaterThan(Be))return 1;let Ee=h.comparePoint(a.leftSE.point);if(Ee!==0)return Ee;let Je=a.comparePoint(h.rightSE.point);return Je<0?1:Je>0?-1:1}if(B.isLessThan(q))return-1;if(B.isGreaterThan(q))return 1;if(k.isLessThan(S)){let Ee=h.comparePoint(a.rightSE.point);if(Ee!==0)return Ee}if(k.isGreaterThan(S)){let Ee=a.comparePoint(h.rightSE.point);if(Ee<0)return 1;if(Ee>0)return-1}if(!k.eq(S)){let Ee=J.minus(B),Je=k.minus(d),ut=Be.minus(q),kt=S.minus(_);if(Ee.isGreaterThan(Je)&&ut.isLessThan(kt))return 1;if(Ee.isLessThan(Je)&&ut.isGreaterThan(kt))return-1}return k.isGreaterThan(S)?1:k.isLessThan(S)||J.isLessThan(Be)?-1:J.isGreaterThan(Be)?1:a.id<h.id?-1:a.id>h.id?1:0}static fromRing(a,h,d){let _,k,S,B=Ls.comparePoints(a,h);if(B<0)_=a,k=h,S=1;else if(B>0)_=h,k=a,S=-1;else throw new Error(`Tried to create degenerate segment at [${a.x}, ${a.y}]`);let q=new Ls(_,!0),J=new Ls(k,!1);return new zc(q,J,[d],[S])}replaceRightSE(a){this.rightSE=a,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let a=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:a.isLessThan(h)?a:h},ur:{x:this.rightSE.point.x,y:a.isGreaterThan(h)?a:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(a){return a.x.eq(this.leftSE.point.x)&&a.y.eq(this.leftSE.point.y)||a.x.eq(this.rightSE.point.x)&&a.y.eq(this.rightSE.point.y)}comparePoint(a){return hr.orient(this.leftSE.point,a,this.rightSE.point)}getIntersection(a){let h=this.bbox(),d=a.bbox(),_=wl(h,d);if(_===null)return null;let k=this.leftSE.point,S=this.rightSE.point,B=a.leftSE.point,q=a.rightSE.point,J=xs(h,B)&&this.comparePoint(B)===0,Be=xs(d,k)&&a.comparePoint(k)===0,Ee=xs(h,q)&&this.comparePoint(q)===0,Je=xs(d,S)&&a.comparePoint(S)===0;if(Be&&J)return Je&&!Ee?S:!Je&&Ee?q:null;if(Be)return Ee&&k.x.eq(q.x)&&k.y.eq(q.y)?null:k;if(J)return Je&&S.x.eq(B.x)&&S.y.eq(B.y)?null:B;if(Je&&Ee)return null;if(Je)return S;if(Ee)return q;let ut=Eu(k,this.vector(),B,a.vector());return ut===null||!xs(_,ut)?null:hr.snap(ut)}split(a){let h=[],d=a.events!==void 0,_=new Ls(a,!0),k=new Ls(a,!1),S=this.rightSE;this.replaceRightSE(k),h.push(k),h.push(_);let B=new zc(_,S,this.rings.slice(),this.windings.slice());return Ls.comparePoints(B.leftSE.point,B.rightSE.point)>0&&B.swapEvents(),Ls.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),d&&(_.checkForConsuming(),k.checkForConsuming()),h}swapEvents(){let a=this.rightSE;this.rightSE=this.leftSE,this.leftSE=a,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,d=this.windings.length;h<d;h++)this.windings[h]*=-1}consume(a){let h=this,d=a;for(;h.consumedBy;)h=h.consumedBy;for(;d.consumedBy;)d=d.consumedBy;let _=zc.compare(h,d);if(_!==0){if(_>0){let k=h;h=d,d=k}if(h.prev===d){let k=h;h=d,d=k}for(let k=0,S=d.rings.length;k<S;k++){let B=d.rings[k],q=d.windings[k],J=h.rings.indexOf(B);J===-1?(h.rings.push(B),h.windings.push(q)):h.windings[J]+=q}d.rings=null,d.windings=null,d.consumedBy=h,d.leftSE.consumedBy=h.leftSE,d.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let a=this.prev.consumedBy||this.prev;this._beforeState=a.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let a=this.beforeState();this._afterState={rings:a.rings.slice(0),windings:a.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,d=this._afterState.windings,_=this._afterState.multiPolys;for(let B=0,q=this.rings.length;B<q;B++){let J=this.rings[B],Be=this.windings[B],Ee=h.indexOf(J);Ee===-1?(h.push(J),d.push(Be)):d[Ee]+=Be}let k=[],S=[];for(let B=0,q=h.length;B<q;B++){if(d[B]===0)continue;let J=h[B],Be=J.poly;if(S.indexOf(Be)===-1)if(J.isExterior)k.push(Be);else{S.indexOf(Be)===-1&&S.push(Be);let Ee=k.indexOf(J.poly);Ee!==-1&&k.splice(Ee,1)}}for(let B=0,q=k.length;B<q;B++){let J=k[B].multiPoly;_.indexOf(J)===-1&&_.push(J)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let a=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(Kl.type){case"union":{let d=a.length===0,_=h.length===0;this._isInResult=d!==_;break}case"intersection":{let d,_;a.length<h.length?(d=a.length,_=h.length):(d=h.length,_=a.length),this._isInResult=_===Kl.numMultiPolys&&d<_;break}case"xor":{let d=Math.abs(a.length-h.length);this._isInResult=d%2===1;break}case"difference":{let d=_=>_.length===1&&_[0].isSubject;this._isInResult=d(a)!==d(h);break}}return this._isInResult}},Ja=class{constructor(s,a,h){Qt(this,"poly");Qt(this,"isExterior");Qt(this,"segments");Qt(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=a,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let d=hr.snap({x:new re(s[0][0]),y:new re(s[0][1])});this.bbox={ll:{x:d.x,y:d.y},ur:{x:d.x,y:d.y}};let _=d;for(let k=1,S=s.length;k<S;k++){if(typeof s[k][0]!="number"||typeof s[k][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let B=hr.snap({x:new re(s[k][0]),y:new re(s[k][1])});B.x.eq(_.x)&&B.y.eq(_.y)||(this.segments.push(To.fromRing(_,B,this)),B.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=B.x),B.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=B.y),B.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=B.x),B.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=B.y),_=B)}(!d.x.eq(_.x)||!d.y.eq(_.y))&&this.segments.push(To.fromRing(_,d,this))}getSweepEvents(){let s=[];for(let a=0,h=this.segments.length;a<h;a++){let d=this.segments[a];s.push(d.leftSE),s.push(d.rightSE)}return s}},Wl=class{constructor(s,a){Qt(this,"multiPoly");Qt(this,"exteriorRing");Qt(this,"interiorRings");Qt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ja(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,d=s.length;h<d;h++){let _=new Ja(s[h],this,!1);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.interiorRings.push(_)}this.multiPoly=a}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let a=0,h=this.interiorRings.length;a<h;a++){let d=this.interiorRings[a].getSweepEvents();for(let _=0,k=d.length;_<k;_++)s.push(d[_])}return s}},dc=class{constructor(s,a){Qt(this,"isSubject");Qt(this,"polys");Qt(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new re(Number.POSITIVE_INFINITY),y:new re(Number.POSITIVE_INFINITY)},ur:{x:new re(Number.NEGATIVE_INFINITY),y:new re(Number.NEGATIVE_INFINITY)}};for(let h=0,d=s.length;h<d;h++){let _=new Wl(s[h],this);_.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=_.bbox.ll.x),_.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=_.bbox.ll.y),_.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=_.bbox.ur.x),_.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=_.bbox.ur.y),this.polys.push(_)}this.isSubject=a}getSweepEvents(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let d=this.polys[a].getSweepEvents();for(let _=0,k=d.length;_<k;_++)s.push(d[_])}return s}},Zl=class Hf{constructor(a){Qt(this,"events");Qt(this,"poly");Qt(this,"_isExteriorRing");Qt(this,"_enclosingRing");this.events=a;for(let h=0,d=a.length;h<d;h++)a[h].segment.ringOut=this;this.poly=null}static factory(a){let h=[];for(let d=0,_=a.length;d<_;d++){let k=a[d];if(!k.isInResult()||k.ringOut)continue;let S=null,B=k.leftSE,q=k.rightSE,J=[B],Be=B.point,Ee=[];for(;S=B,B=q,J.push(B),B.point!==Be;)for(;;){let Je=B.getAvailableLinkedEvents();if(Je.length===0){let Ot=J[0].point,Rt=J[J.length-1].point;throw new Error(`Unable to complete output ring starting at [${Ot.x}, ${Ot.y}]. Last matching segment found ends at [${Rt.x}, ${Rt.y}].`)}if(Je.length===1){q=Je[0].otherSE;break}let ut=null;for(let Ot=0,Rt=Ee.length;Ot<Rt;Ot++)if(Ee[Ot].point===B.point){ut=Ot;break}if(ut!==null){let Ot=Ee.splice(ut)[0],Rt=J.splice(Ot.index);Rt.unshift(Rt[0].otherSE),h.push(new Hf(Rt.reverse()));continue}Ee.push({index:J.length,point:B.point});let kt=B.getLeftmostComparator(S);q=Je.sort(kt)[0].otherSE;break}h.push(new Hf(J))}return h}getGeom(){let a=this.events[0].point,h=[a];for(let J=1,Be=this.events.length-1;J<Be;J++){let Ee=this.events[J].point,Je=this.events[J+1].point;hr.orient(Ee,a,Je)!==0&&(h.push(Ee),a=Ee)}if(h.length===1)return null;let d=h[0],_=h[1];hr.orient(d,a,_)===0&&h.shift(),h.push(h[0]);let k=this.isExteriorRing()?1:-1,S=this.isExteriorRing()?0:h.length-1,B=this.isExteriorRing()?h.length:-1,q=[];for(let J=S;J!=B;J+=k)q.push([h[J].x.toNumber(),h[J].y.toNumber()]);return q}isExteriorRing(){if(this._isExteriorRing===void 0){let a=this.enclosingRing();this._isExteriorRing=a?!a.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var _,k;let a=this.events[0];for(let S=1,B=this.events.length;S<B;S++){let q=this.events[S];Ls.compare(a,q)>0&&(a=q)}let h=a.segment.prevInResult(),d=h?h.prevInResult():null;for(;;){if(!h)return null;if(!d)return h.ringOut;if(d.ringOut!==h.ringOut)return((_=d.ringOut)==null?void 0:_.enclosingRing())!==h.ringOut?h.ringOut:(k=h.ringOut)==null?void 0:k.enclosingRing();h=d.prevInResult(),d=h?h.prevInResult():null}}},Ll=class{constructor(s){Qt(this,"exteriorRing");Qt(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let a=[s];for(let h=0,d=this.interiorRings.length;h<d;h++){let _=this.interiorRings[h].getGeom();_!==null&&a.push(_)}return a}},Cl=class{constructor(s){Qt(this,"rings");Qt(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let a=0,h=this.polys.length;a<h;a++){let d=this.polys[a].getGeom();d!==null&&s.push(d)}return s}_composePolys(s){var h;let a=[];for(let d=0,_=s.length;d<_;d++){let k=s[d];if(!k.poly)if(k.isExteriorRing())a.push(new Ll(k));else{let S=k.enclosingRing();S!=null&&S.poly||a.push(new Ll(S)),(h=S==null?void 0:S.poly)==null||h.addInterior(k)}}return a}},Au=class{constructor(s,a=To.compare){Qt(this,"queue");Qt(this,"tree");Qt(this,"segments");this.queue=s,this.tree=new At(a),this.segments=[]}process(s){let a=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(a),h;s.isLeft&&this.tree.add(a);let d=a,_=a;do d=this.tree.lastBefore(d);while(d!=null&&d.consumedBy!=null);do _=this.tree.firstAfter(_);while(_!=null&&_.consumedBy!=null);if(s.isLeft){let k=null;if(d){let B=d.getIntersection(a);if(B!==null&&(a.isAnEndpoint(B)||(k=B),!d.isAnEndpoint(B))){let q=this._splitSafely(d,B);for(let J=0,Be=q.length;J<Be;J++)h.push(q[J])}}let S=null;if(_){let B=_.getIntersection(a);if(B!==null&&(a.isAnEndpoint(B)||(S=B),!_.isAnEndpoint(B))){let q=this._splitSafely(_,B);for(let J=0,Be=q.length;J<Be;J++)h.push(q[J])}}if(k!==null||S!==null){let B=null;k===null?B=S:S===null?B=k:B=Ls.comparePoints(k,S)<=0?k:S,this.queue.delete(a.rightSE),h.push(a.rightSE);let q=a.split(B);for(let J=0,Be=q.length;J<Be;J++)h.push(q[J])}h.length>0?(this.tree.delete(a),h.push(s)):(this.segments.push(a),a.prev=d)}else{if(d&&_){let k=d.getIntersection(_);if(k!==null){if(!d.isAnEndpoint(k)){let S=this._splitSafely(d,k);for(let B=0,q=S.length;B<q;B++)h.push(S[B])}if(!_.isAnEndpoint(k)){let S=this._splitSafely(_,k);for(let B=0,q=S.length;B<q;B++)h.push(S[B])}}}this.tree.delete(a)}return h}_splitSafely(s,a){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let d=s.split(a);return d.push(h),s.consumedBy===void 0&&this.tree.add(s),d}},Oh=class{constructor(){Qt(this,"type");Qt(this,"numMultiPolys")}run(s,a,h){Ya.type=s;let d=[new dc(a,!0)];for(let q=0,J=h.length;q<J;q++)d.push(new dc(h[q],!1));if(Ya.numMultiPolys=d.length,Ya.type==="difference"){let q=d[0],J=1;for(;J<d.length;)wl(d[J].bbox,q.bbox)!==null?J++:d.splice(J,1)}if(Ya.type==="intersection")for(let q=0,J=d.length;q<J;q++){let Be=d[q];for(let Ee=q+1,Je=d.length;Ee<Je;Ee++)if(wl(Be.bbox,d[Ee].bbox)===null)return[]}let _=new At(Ls.compare);for(let q=0,J=d.length;q<J;q++){let Be=d[q].getSweepEvents();for(let Ee=0,Je=Be.length;Ee<Je;Ee++)_.add(Be[Ee])}let k=new Au(_),S=null;for(_.size!=0&&(S=_.first(),_.delete(S));S;){let q=k.process(S);for(let J=0,Be=q.length;J<Be;J++){let Ee=q[J];Ee.consumedBy===void 0&&_.add(Ee)}_.size!=0?(S=_.first(),_.delete(S)):S=null}hr.reset();let B=Zl.factory(k.segments);return new Cl(B).getGeom()}},Ya=new Oh,Kl=Ya,Ih=(s,...a)=>Kl.run("intersection",s,a),Rh=(s,...a)=>Kl.run("difference",s,a);hr.set;function Jl(s){let a={type:"Feature"};return a.geometry=s,a}function Yl(s){return s.type==="Feature"?s.geometry:s}function pc(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function mc(s){return Jl({type:"LineString",coordinates:s})}function Xl(s){return Jl({type:"MultiLineString",coordinates:s})}function gc(s){return Jl({type:"Polygon",coordinates:s})}function _c(s){return Jl({type:"MultiPolygon",coordinates:s})}function vc(s,a){let h=Yl(s),d=Yl(a),_=Ih(h.coordinates,d.coordinates);return _.length===0?null:_.length===1?gc(_[0]):_c(_)}function f(s,a){let h=Yl(s),d=Yl(a),_=Rh(h.coordinates,d.coordinates);return _.length===0?null:_.length===1?gc(_[0]):_c(_)}function v(s){return Array.isArray(s)?1+v(s[0]):-1}function E(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let a=pc(s),h=v(a),d=[];return h>1?a.forEach(_=>{d.push(mc(_))}):d.push(s),d}function T(s){let a=[];return s.eachLayer(h=>{a.push(pc(h.toGeoJSON(15)))}),Xl(a)}gr.Cut=gr.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let a=L.polygon(s,this.options.pathOptions);a._latlngInfos=this._layer._latlngInfo,this.cut(a),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:d,originalLayer:_})=>{this._fireCut(_,d,_),this._fireCut(this._map,d,_),_.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let a=this._map._layers,h=s._latlngInfos||[];Object.keys(a).map(d=>a[d]).filter(d=>d.pm).filter(d=>!d._pmTempLayer).filter(d=>!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1).filter(d=>d instanceof L.Polyline).filter(d=>d!==s).filter(d=>d.pm.options.allowCutting).filter(d=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(d)>-1:!0).filter(d=>!this._layerGroup.hasLayer(d)).filter(d=>{try{let _=!!ti(s.toGeoJSON(15),d.toGeoJSON(15)).features.length>0;return _||d instanceof L.Polyline&&!(d instanceof L.Polygon)?_:!!vc(s.toGeoJSON(15),d.toGeoJSON(15))}catch{return d instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(d=>{let _;if(d instanceof L.Polygon){_=L.polygon(d.getLatLngs());let q=_.getLatLngs();h.forEach(J=>{if(J&&J.snapInfo){let{latlng:Be}=J,Ee=this._calcClosestLayer(Be,[_]);if(Ee&&Ee.segment&&Ee.distance<this.options.snapDistance){let{segment:Je}=Ee;if(Je&&Je.length===2){let{indexPath:ut,parentPath:kt,newIndex:Ot}=L.PM.Utils._getIndexFromSegment(q,Je);(ut.length>1?(0,Qn.default)(q,kt):q).splice(Ot,0,Be)}}}})}else _=d;let k=this._cutLayer(s,_),S=L.geoJSON(k,d.options);S.getLayers().length===1&&([S]=S.getLayers()),this._setPane(S,"layerPane");let B=S.addTo(this._map.pm._getContainingLayer());if(B.pm.enable(d.pm.options),B.pm.disable(),d._pmTempLayer=!0,s._pmTempLayer=!0,d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),B.getLayers&&B.getLayers().length===0&&this._map.pm.removeLayer({target:B}),B instanceof L.LayerGroup?(B.eachLayer(q=>{this._addDrawnLayerProp(q)}),this._addDrawnLayerProp(B)):this._addDrawnLayerProp(B),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let q=this.options.layersToCut.indexOf(d);q>-1&&this.options.layersToCut.splice(q,1)}this._editedLayers.push({layer:B,originalLayer:d})})},_cutLayer(s,a){let h=L.geoJSON(),d;if(a instanceof L.Polygon)d=f(a.toGeoJSON(15),s.toGeoJSON(15));else{let _=E(a);_.forEach(k=>{let S=ni(k,s.toGeoJSON(15)),B;S&&S.features.length>0?B=L.geoJSON(S):B=L.geoJSON(k),B.getLayers().forEach(q=>{ro(s.toGeoJSON(15),q.toGeoJSON(15))||q.addTo(h)})}),_.length>1?d=T(h):d=h.toGeoJSON(15)}return d},_change:L.Util.falseFn}),gr.Text=gr.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sn("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let a=s;a.target=this._hintMarker,this._handleSnapping(a)}},_createMarker(s){var _,k,S,B;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let a=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(_=this.options.textOptions)==null?void 0:_.className){let q=this.options.textOptions.className.split(" ");this.textArea.classList.add(...q)}let h=this._createTextIcon(this.textArea),d=new L.Marker(a,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(d,"markerPane"),this._finishLayer(d),d.pm||(d.options.draggable=!1),d.addTo(this._map.pm._getContainingLayer()),d.pm){d.pm.textArea=this.textArea,L.setOptions(d.pm,{removeIfEmpty:((k=this.options.textOptions)==null?void 0:k.removeIfEmpty)??!0});let q=((S=this.options.textOptions)==null?void 0:S.focusAfterDraw)??!0;d.pm._createTextMarker(q),(B=this.options.textOptions)!=null&&B.text&&d.pm.setText(this.options.textOptions.text)}this._fireCreate(d),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var K={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Cr(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(Cr(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Cr(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(Cr(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let a=s.touches?s.touches[0]:s,h={originalEvent:a,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(a),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let a={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(a.containerPoint=this._map.mouseEventToContainerPoint(s),a.latlng=this._map.containerPointToLatLng(a.containerPoint)),this._dragMixinOnMouseUp(a),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let a=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!a&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let d="resizeableCircleMarker";this._layer instanceof L.Circle&&(d="resizeableCircle"),this.options.snappable&&!a&&!h?this._layer.pm.options[d]||this._initSnappableMarkersDrag():this._layer.pm.options[d]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let a=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(a,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let a=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,a&&L.DomUtil.removeClass(a,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:a}=s,h={lat:a.lat-this._tempDragCoord.lat,lng:a.lng-this._tempDragCoord.lng},d=_=>_.map(k=>{if(Array.isArray(k))return d(k);let S={lat:k.lat+h.lat,lng:k.lng+h.lng};return(k.alt||k.alt===0)&&(S.alt=k.alt),S});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let _=d([this._layer.getLatLng()]);this._layer.setLatLng(_[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let _=this._layer.getLatLng();this._layer._snapped&&(_=this._layer._orgLatLng);let k=d([_]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let _=d([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(_),this._fireChange(this._layer.getBounds(),"Edit")}else{let _=d(this._layer.getLatLngs());this._layer.setLatLngs(_),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=a,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,a){if(this.enabled())return!1;if(!a._fromLayerSync&&this._layer===a.target&&this.options.syncLayersOnDrag){a._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(d=>{d instanceof L.LayerGroup&&(h=h.concat(d.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let d in this._parentLayerGroup){let _=this._parentLayerGroup[d];_.pm&&(h=_.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(d=>!!d.pm).filter(d=>!!d.pm.options.draggable),h.forEach(d=>{d!==this._layer&&d.pm[s]&&(d._snapped=!1,d.pm[s](a))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},te=K,ie=m(bi());function ce(s,a,h,d){return h.unproject(a.transform(h.project(s,d)),d)}function me(s,a,h){let d=h.getMaxZoom();if(d===1/0&&(d=h.getZoom()),L.Util.isArray(s)){let _=[];return s.forEach(k=>{_.push(me(k,a,h))}),_}return s instanceof L.LatLng?ce(s,a,h,d):null}function Pe(s,a){a instanceof L.Layer&&(a=a.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(a,h)}function Ve(s,a){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(a,h)}var ft={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Pe(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Pe(this._map,s.target.getLatLng()),this._initialRotateLatLng=Ti(this._layer),this._startAngle=this.getAngle();let a=Ti(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,a),this._fireRotationStart(this._map,a)},_onRotate(s){let a=Pe(this._map,s.target.getLatLng()),h=this._rotationStartPoint,d=this._rotationOriginPoint,_=Math.atan2(a.y-d.y,a.x-d.x)-Math.atan2(h.y-d.y,h.x-d.x);this._layer.setLatLngs(this._rotateLayer(_,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=this;function S(Be,Ee=[],Je=-1){if(Je>-1&&Ee.push(Je),L.Util.isArray(Be[0]))Be.forEach((ut,kt)=>S(ut,Ee.slice(),kt));else{let ut=Ee.length>0?(0,ie.default)(k._markers,Ee):k._markers[0];Be.forEach((kt,Ot)=>{ut[Ot].setLatLng(kt)})}}S(this._layer.getLatLngs());let B=Ti(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(_,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let q=_*180/Math.PI;q=q<0?q+360:q;let J=q+this._startAngle;this._setAngle(J),this._rotationLayer.pm._setAngle(J),this._fireRotation(this._rotationLayer,q,B),this._fireRotation(this._map,q,B),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let a=Ti(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Ti(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,a),this._fireRotationEnd(this._map,s,a),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,a,h,d,_){let k=Pe(_,h);return this._matrix=d.clone().rotate(s,k).flip(),me(a,this._matrix,_)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),a=s.getCenter();return s.removeFrom(this._layer._map),a},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(ms(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Ti(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let a=this.getAngle(),h=this._layer.getLatLngs(),d=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(d,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(d,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let _=this.getAngle()-a;_=_<0?_+360:_,this._startAngle=a,this._fireRotation(this._layer,_,h,this._layer),this._fireRotation(this._map||this._layer._map,_,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let a=s-this.getAngle();this.rotateLayer(a)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},dt=ft,et=L.Class.extend({includes:[te,Ao,dt,ko],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,a){a==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":a==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":a==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,a){let h=a.target,d={layer:this._layer,marker:h,event:a},_="";return s==="move"?_="moveVertexValidation":s==="add"?_="addVertexValidation":s==="remove"&&(_="removeVertexValidation"),this.options[_]&&typeof this.options[_]=="function"&&!this.options[_](d)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),xt=et;xt.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(d=>this._initLayer(d));let a=d=>{if(d.layer._pmTempLayer)return;this._layers=this.getLayers();let _=this._layers.filter(k=>!k.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in k.pm._parentLayerGroup));_.forEach(k=>{this._initLayer(k)}),_.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(a,100,this),this),this._layerGroup.on("layerremove",d=>{this._removeLayerFromGroup(d.target)},this);let h=d=>{d.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.enable(s,a)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(a=>{a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1&&(s.push(a._leaflet_id),a.pm.disable(s)):a.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(a=>a instanceof L.LayerGroup?s.indexOf(a._leaflet_id)===-1?(s.push(a._leaflet_id),a.pm.enabled(s)):!1:a.pm.enabled())},toggleEdit(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.toggleEdit(s,a)):h.pm.toggleEdit(s)})},_initLayer(s){let a=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[a]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let a=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[a]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(a=>!!a._map))==null?void 0:s._map)||null},getLayers(s=!1,a=!0,h=!0,d=[]){let _=[];return s?this._layerGroup.getLayers().forEach(k=>{_.push(k),k instanceof L.LayerGroup&&d.indexOf(k._leaflet_id)===-1&&(d.push(k._leaflet_id),_=_.concat(k.pm.getLayers(!0,!0,!0,d)))}):_=this._layerGroup.getLayers(),h&&(_=_.filter(k=>!(k instanceof L.LayerGroup))),a&&(_=_.filter(k=>!!k.pm),_=_.filter(k=>!k._pmTempLayer),_=_.filter(k=>!L.PM.optIn&&!k.options.pmIgnore||L.PM.optIn&&k.options.pmIgnore===!1)),_},setOptions(s,a=[]){a.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?a.indexOf(h._leaflet_id)===-1&&(a.push(h._leaflet_id),h.pm.setOptions(s,a)):h.pm.setOptions(s))})}}),xt.Marker=xt.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let a=s.target;a.remove(),this._fireRemove(a),this._fireRemove(this._map,a)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var bt=m(bi()),Ke={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((a,h,d)=>d.indexOf(a)===h)},_removeFromCache(s){let a=this.markerCache.indexOf(s);a>-1&&this.markerCache.splice(a,1)},renderLimits(s){this.markerCache.forEach(a=>{s.includes(a)?this._markerGroup.addLayer(a):this._markerGroup.removeLayer(a)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let a=[...this._filterClosestMarkers(s)];this.renderLimits(a)},_filterClosestMarkers(s){let a=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?a:(a.sort((d,_)=>{let k=d._latlng.distanceTo(s),S=_._latlng.distanceTo(s);return k-S}),a.filter((d,_)=>h>-1?_<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},Ye=Ke;xt.Line=xt.extend({includes:[Ye],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,a=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=d=>{if(Array.isArray(d[0]))return d.map(h,this);let _=d.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&d.map((k,S)=>{let B=this.isPolygon()?(S+1)%d.length:S+1;return this._createMiddleMarker(_[S],_[B])}),_};this._markers=h(a),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this.options.rotate?(a.on("dragstart",this._onRotateStart,this),a.on("drag",this._onRotate,this),a.on("dragend",this._onRotateEnd,this)):(a.on("click",this._onVertexClick,this),a.on("dragstart",this._onMarkerDragStart,this),a.on("move",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||a.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(a),a},_createMiddleMarker(s,a){if(!s||!a)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),a.getLatLng()),d=this._createMarker(h),_=L.divIcon({className:"marker-icon marker-icon-middle"});return d.setIcon(_),d.leftM=s,d.rightM=a,s._middleMarkerNext=d,a._middleMarkerPrev=d,d.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),d.on("movestart",this._onMiddleMarkerMoveStart,this),d},_onMiddleMarkerClick(s){let a=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMoveStart(s){let a=s.target;if(a.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){a.on("move",this._onMiddleMarkerMovePrevent,this);return}a._dragging=!0,this._addMarker(a,a.leftM,a.rightM)},_onMiddleMarkerMovePrevent(s){let a=s.target;this._vertexValidationDrag(a)},_onMiddleMarkerMoveEnd(s){let a=s.target;if(a.off("move",this._onMiddleMarkerMovePrevent,this),a.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(a))return;let h=L.divIcon({className:"marker-icon"});a.setIcon(h),setTimeout(()=>{delete a._dragging},100)},_addMarker(s,a,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let d=s.getLatLng(),_=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:k,index:S,parentPath:B}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),q=k.length>1?(0,bt.default)(_,B):_,J=k.length>1?(0,bt.default)(this._markers,B):this._markers;q.splice(S+1,0,d),J.splice(S+1,0,s),this._layer.setLatLngs(_),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(a,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,d),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Bn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let a=this._layer,h,d;if(this.options.allowSelfIntersection?h=!1:(d=Bn(this._layer.toGeoJSON(15)),h=d.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(a.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(d)}else a.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,a){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,a):h._icon&&(a&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let a=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ti(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:d,index:_,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!d)return;let S=d.length>1?(0,bt.default)(h,k):h,B=d.length>1?(0,bt.default)(this._markers,k):this._markers,q=k[k.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!q&&(S.length<=2||this.isPolygon()&&S.length<=3)){this._flashLayer();return}S.splice(_,1),this._layer.setLatLngs(h),this.isPolygon()&&S.length<=2&&S.splice(0,S.length);let J=!1;if(S.length<=1&&(S.splice(0,S.length),k.length>1&&d.length>1&&(h=Po(h)),this._layer.setLatLngs(h),this._initMarkers(),J=!0),Xr(h)||this._layer.remove(),h=Po(h),this._layer.setLatLngs(h),this._markers=Po(this._markers),!J&&(B=d.length>1?(0,bt.default)(this._markers,k):this._markers,a._middleMarkerPrev&&(this._markerGroup.removeLayer(a._middleMarkerPrev),this._removeFromCache(a._middleMarkerPrev)),a._middleMarkerNext&&(this._markerGroup.removeLayer(a._middleMarkerNext),this._removeFromCache(a._middleMarkerNext)),this._markerGroup.removeLayer(a),this._removeFromCache(a),B)){let Be,Ee;if(this.isPolygon()?(Be=(_+1)%B.length,Ee=(_+(B.length-1))%B.length):(Ee=_-1<0?void 0:_-1,Be=_+1>=B.length?void 0:_+1),Be!==Ee){let Je=B[Ee],ut=B[Be];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Je,ut)}B.splice(_,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(a,d),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let a=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:d,index:_,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(d.length>1?(0,bt.default)(a,k):a).splice(_,1,h),this._layer.setLatLngs(a)},_getNeighborMarkers(s){let{indexPath:a,index:h,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),_=a.length>1?(0,bt.default)(this._markers,d):this._markers,k=(h+1)%_.length,S=(h+(_.length-1))%_.length,B=_[S],q=_[k];return{prevMarker:B,nextMarker:q}},_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),d=L.polyline([a.getLatLng(),s.getLatLng()]),_=L.polyline([s.getLatLng(),h.getLatLng()]),k=ti(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,S=ti(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?S+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(k+=1),!(k<=2&&S<=2)},_onMarkerDragStart(s){let a=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Ti(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(a):this._markerAllowedToDrag=null},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a))return;let{indexPath:h,index:d,parentPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(a);let k=h.length>1?(0,bt.default)(this._markers,_):this._markers,S=(d+1)%k.length,B=(d+(k.length-1))%k.length,q=a.getLatLng(),J=k[B].getLatLng(),Be=k[S].getLatLng();if(a._middleMarkerNext){let Ee=L.PM.Utils.calcMiddleLatLng(this._map,q,Be);a._middleMarkerNext.setLatLng(Ee)}if(a._middleMarkerPrev){let Ee=L.PM.Utils.calcMiddleLatLng(this._map,q,J);a._middleMarkerPrev.setLatLng(Ee)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a),d=!this.options.allowSelfIntersection&&this.hasSelfIntersection();d&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(d=!1);let _=!this.options.allowSelfIntersection&&d;if(this._fireMarkerDragEnd(s,h,_),_){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let a=s.target;if(a._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireVertexClick(s,h)}}),xt.Polygon=xt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:a,nextMarker:h}=this._getNeighborMarkers(s),d=L.polyline([a.getLatLng(),s.getLatLng()]),_=L.polyline([s.getLatLng(),h.getLatLng()]),k=ti(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length,S=ti(this._layer.toGeoJSON(15),_.toGeoJSON(15)).features.length;return!(k<=2&&S<=2)}}),xt.Rectangle=xt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,a=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=a.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,d)=>{let _=this._cornerMarkers.find(k=>k._index===d);_&&_.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,a){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=a,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let a=s.target,h=this._cornerMarkers;a._oppositeCornerLatLng=h.find(_=>_._index===(a._index+2)%4).getLatLng(),a._snapped=!1;let{indexPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragStart(s,d)},_onMarkerDrag(s){let a=s.target;if(!this._vertexValidationDrag(a)||a._index===void 0)return;this._adjustRectangleForMarkerMove(a);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let a=s.target;if(!this._vertexValidationDragEnd(a))return;this._cornerMarkers.forEach(d=>{delete d._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,a);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let a=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(a),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let a=this._layer.getLatLngs()[0];if(a&&a.length!==4&&a.length>0)a.forEach((h,d)=>{this._cornerMarkers[d].setLatLng(h)}),this._cornerMarkers.slice(a.length).forEach(h=>{h.setLatLng(a[0])});else if(!a||!a.length)console.error("The layer has no LatLngs");else{let h=a.findIndex(d=>s.getLatLng().equals(d));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(a[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(a[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(a[(h+3)%4])):this._cornerMarkers.forEach(d=>{d.setLatLng(a[d._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(ms(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),xt.CircleMarker=xt.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let a=this._layer.getLatLng(),h=this._layer._radius,d=this._getLatLngOnCircle(a,h);this._centerMarker=this._createCenterMarker(a),this._outerMarker=this._createOuterMarker(d),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,a){let h=this._map.project(s),d=L.point(h.x+a,h.y);return this._map.unproject(d)},_createHintLine(s,a){let h=s.getLatLng(),d=a.getLatLng();this._hintline=L.polyline([h,d],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let a=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(a._icon,"leaflet-pm-draggable"),a.on("move",this._moveCircle,this)):a.dragging.disable(),a},_createOuterMarker(s){let a=this._createMarker(s);return a.on("drag",this._resizeCircle,this),a},_createMarker(s){let a=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=s,a._pmTempLayer=!0,a.on("dragstart",this._onMarkerDragStart,this),a.on("drag",this._onMarkerDrag,this),a.on("dragend",this._onMarkerDragEnd,this),a.on("click",this._onVertexClick,this),this._helperLayers.addLayer(a),a},_moveCircle(s){if(s.target._cancelDragEventChain)return;let a=this._centerMarker.getLatLng();this._layer.setLatLng(a);let h=this._layer._radius,d=this._getLatLngOnCircle(a,h);this._outerMarker._latlng=d,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),a=this._layer._radius,h=this._getLatLngOnCircle(s,a);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,a])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let a=s.target;a instanceof L.Marker&&!this._vertexValidationDrag(a)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let a=s.target;this._vertexValidationDragEnd(a)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let a=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(a);let d=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?a=Ko(this._map,s,a,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(a=Ko(this._map,s,a,this._getMaxDistanceInMeter(s))),a},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),a=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,a);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,a){return this._map.project(s).distanceTo(this._map.project(a))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),xt.Circle=xt.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,a){return this._map.distance(s,a)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),xt.ImageOverlay=xt.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),a=s.getNorthWest(),h=s.getNorthEast(),d=s.getSouthEast(),_=s.getSouthWest();return[a,h,d,_]}}),xt.Text=xt.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,a=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${a}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let a=this._hasFocus;this._hasFocus=s.type==="focus",!a!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let a=this.options.className.split(" ");this.textArea.classList.add(...a)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var Ct=function(s,a,h,d,_,k){this._matrix=[s,a,h,d,_,k]};Ct.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Ct.prototype={transform(s){return this._transform(s.clone())},_transform(s){let a=this._matrix,{x:h,y:d}=s;return s.x=a[0]*h+a[1]*d+a[4],s.y=a[2]*h+a[3]*d+a[5],s},untransform(s){let a=this._matrix;return new L.Point((s.x/a[0]-a[4])/a[0],(s.y/a[2]-a[5])/a[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let a,h;return typeof s=="number"?(a=s,h=s):(a=s.x,h=s.y),this._add(1,0,0,1,a,h)},scale(s,a){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,d;return a=a||L.point(0,0),typeof s=="number"?(h=s,d=s):(h=s.x,d=s.y),this._add(h,0,0,d,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},rotate(s,a){let h=Math.cos(s),d=Math.sin(s);return a=a||new L.Point(0,0),this._add(h,d,-d,h,a.x,a.y)._add(1,0,0,1,-a.x,-a.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,a,h,d,_,k){let S=[[],[],[]],B=this._matrix,q=[[B[0],B[2],B[4]],[B[1],B[3],B[5]],[0,0,1]],J=[[s,h,_],[a,d,k],[0,0,1]],Be;s&&s instanceof L.PM.Matrix&&(B=s._matrix,J=[[B[0],B[2],B[4]],[B[1],B[3],B[5]],[0,0,1]]);for(let Ee=0;Ee<3;Ee+=1)for(let Je=0;Je<3;Je+=1){Be=0;for(let ut=0;ut<3;ut+=1)Be+=q[Ee][ut]*J[ut][Je];S[Ee][Je]=Be}return this._matrix=[S[0][0],S[1][0],S[0][1],S[1][1],S[0][2],S[1][2]],this}};var St=Ct,Pt={calcMiddleLatLng(s,a,h){let d=s.project(a),_=s.project(h);return s.unproject(d._add(_)._divideBy(2))},findLayers(s){let a=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&a.push(h)}),a=a.filter(h=>!!h.pm),a=a.filter(h=>!h._pmTempLayer),a=a.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),a},circleToPolygon(s,a=60,h=!0){let d=s.getLatLng(),_=s.getRadius(),k=li(d,_,a,0,h),S=[];for(let B=0;B<k.length;B+=1){let q=[k[B].lat,k[B].lng];S.push(q)}return L.polygon(S,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,a,h,d=!1){s.fire(a,h,d);let{groups:_}=this.getAllParentGroups(s);_.forEach(k=>{k.fire(a,h,d)})},getAllParentGroups(s){let a=[],h=[],d=_=>{for(let k in _._eventParents)if(a.indexOf(k)===-1){a.push(k);let S=_._eventParents[k];h.push(S),d(S)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(d(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:a},{groupIds:a,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:li,getTranslation:sn,findDeepCoordIndex(s,a,h=!0){let d,_=S=>(B,q)=>{let J=S.concat(q);if(h){if(B.lat&&B.lat===a.lat&&B.lng===a.lng)return d=J,!0}else if(B.lat&&L.latLng(B).equals(a))return d=J,!0;return Array.isArray(B)&&B.some(_(J))};s.some(_([]));let k={};return d&&(k={indexPath:d,index:d[d.length-1],parentPath:d.slice(0,d.length-1)}),k},findDeepMarkerIndex(s,a){let h,d=k=>(S,B)=>{let q=k.concat(B);return S._leaflet_id===a._leaflet_id?(h=q,!0):Array.isArray(S)&&S.some(d(q))};s.some(d([]));let _={};return h&&(_={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),_},_getIndexFromSegment(s,a){if(a&&a.length===2){let h=this.findDeepCoordIndex(s,a[0]),d=this.findDeepCoordIndex(s,a[1]),_=Math.max(h.index,d.index);return(h.index===0||d.index===0)&&_!==1&&(_+=1),{indexA:h,indexB:d,newIndex:_,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,a,h,d){let _=Pe(d,s),k=Pe(d,a),S=h*Math.PI/180,B=Math.cos(S),q=Math.sin(S),J=(k.x-_.x)*B+(k.y-_.y)*q,Be=(k.y-_.y)*B-(k.x-_.x)*q,Ee=J*B+_.x,Je=J*q+_.y,ut=-Be*q+_.x,kt=Be*B+_.y,Ot=Ve(d,_),Rt=Ve(d,{x:Ee,y:Je}),hn=Ve(d,k),Me=Ve(d,{x:ut,y:kt});return[Ot,Rt,hn,Me]},pxRadiusToMeterRadius(s,a,h){let d=a.project(h),_=L.point(d.x+s,d.y);return a.distance(a.unproject(_),h)}},Zt=Pt;L.PM=L.PM||{version:wo.version,Map:Eo,Toolbar:La,Draw:gr,Edit:xt,Utils:Zt,Matrix:St,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(a);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(d);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(_);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(k);function S(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(S);function B(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(B);function q(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(q)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(a=>{this.reInitLayer(a)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let a=this._map.mouseEventToLayerPoint(s),h,d;for(let _=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(d=h);d&&(L.DomEvent.fakeStop(s),this._fireEvent([d],s))}}),L.PM.initialize()})();function w3(){const e=It(null),t=It(null),n=M=>`${(M*100).toFixed(1)}%`,i=M=>`${((M%360+360)%360).toFixed(1)}`,o=M=>(M%360+360)%360,l=(M,N,F)=>{const j=o(N);let $=o(F)-j;return $<=0&&($+=360),Math.PI*M*$/180},c=(M,N,F)=>{const j=o(N);let $=o(F)-j;return $<=0&&($+=360),Math.PI*M*M*$/360},p=M=>{if("getLatLngs"in M){const F=M.getLatLngs();if(Array.isArray(F)&&F[0]){const z=(Array.isArray(F[0])?F[0]:F).map(pe=>[pe.lng,pe.lat]),$=$f([z]);return Gf($)}}return 0},m=M=>{if("getLatLngs"in M){const F=M.getLatLngs();if(Array.isArray(F)){const j=(Array.isArray(F[0])?F[0]:F).map($=>[$.lng,$.lat]),z=oc(j);return sh(z,{units:"meters"})}}return 0},y=M=>{if("getLatLngs"in M){const F=M.getLatLngs();if(Array.isArray(F)&&F[0]){const z=[...(Array.isArray(F[0])?F[0]:F).map(pe=>[pe.lng,pe.lat])];z.length>0&&z.push(z[0]);const $=oc(z);return sh($,{units:"meters"})}}return 0},b=M=>{const N=M;return N._mRadius?N._mRadius:N.getRadius?N.getRadius():0},w=(M,N)=>{var j,z;console.log("=== CALCULATE PROPERTIES START ==="),console.log("Input:",{type:N,layer:{constructor:(j=M==null?void 0:M.constructor)==null?void 0:j.name,_mRadius:M._mRadius,_latlng:M._latlng,options:M.options}});const F={type:N,style:M.options};try{switch(N){case"Circle":const $=b(M);console.log("Circle radius calculation:",{_mRadius:M._mRadius,calculatedRadius:$,getRadius:(z=M.getRadius)==null?void 0:z.call(M)}),F.radius=$,F.diameter=F.radius*2,F.area=Math.PI*Math.pow(F.radius,2),F.perimeter=2*Math.PI*F.radius,F.center=M.getLatLng(),console.log("Circle properties calculated:",F);break;case"Semicircle":F.radius=b(M),F.diameter=F.radius*2,F.center=M.getLatLng(),F.startAngle=o(M.options.startAngle||0),F.stopAngle=o(M.options.stopAngle||180),F.arcLength=l(F.radius,F.startAngle,F.stopAngle),F.area=c(F.radius,F.startAngle,F.stopAngle),F.chordLength=2*F.radius*Math.abs(Math.sin((F.stopAngle-F.startAngle)*Math.PI/360)),console.log("Semicircle properties calculated:",F);break;case"Rectangle":case"Polygon":F.area=p(M),F.perimeter=y(M),console.log("Rectangle/Polygon properties calculated:",F);break;case"Line":case"Polyline":if(F.length=m(M),M.elevation){const pe=M.elevation.gain,Ce=F.length;F.slope=pe/Ce}console.log("Line/Polyline properties calculated:",F);break}}catch($){console.error("Error calculating properties:",$)}return console.log("=== CALCULATE PROPERTIES END ==="),console.log("Final properties:",F),F},A=M=>{var N,F,j,z,$,pe;if(console.log("=== UPDATE SELECTED SHAPE START ==="),console.log("Input shape:",{type:M==null?void 0:M.type,properties:M==null?void 0:M.properties,layer:M!=null&&M.layer?{type:M.layer.constructor.name,options:M.layer.options,_mRadius:M.layer._mRadius,_latlng:M.layer._latlng,bounds:(F=(N=M.layer).getBounds)==null?void 0:F.call(N)}:{type:(j=M==null?void 0:M.constructor)==null?void 0:j.name,options:M==null?void 0:M.options,_mRadius:M==null?void 0:M._mRadius,_latlng:M==null?void 0:M._latlng,bounds:(z=M==null?void 0:M.getBounds)==null?void 0:z.call(M)}}),($=e.value)!=null&&$.off&&e.value.off("properties:updated"),e.value=M,M){M.on&&(console.log("Adding properties:updated event listener"),M.on("properties:updated",Te=>{var we;console.log("Properties updated event received:",{event:Te,shape:{_mRadius:Te.shape._mRadius,_latlng:Te.shape._latlng,properties:Te.shape.properties,constructor:Te.shape.constructor.name}});const ke=Te.shape,O=((we=ke.properties)==null?void 0:we.type)||"unknown";console.log("Updating properties for shape:",{type:O,_mRadius:ke._mRadius,_latlng:ke._latlng,currentProperties:ke.properties});const oe=w(ke,O);console.log("Recalculated properties:",oe),t.value={...oe},ke.properties={...oe},console.log("Updated shapeProperties:",t.value)}));const Ce=w(M.layer||M,M.type||((pe=M.properties)==null?void 0:pe.type));console.log("Initial calculated properties:",Ce),t.value={...Ce},M.layer?M.layer.properties={...Ce}:M.properties={...Ce},console.log("Initial shapeProperties set:",t.value)}else console.log("No shape provided, clearing properties"),t.value=null;console.log("=== UPDATE SELECTED SHAPE END ===")},C=Tn(()=>{if(!t.value)return null;const M={...t.value};return M.area&&(M.areaFormatted=`${(M.area/1e4).toFixed(2)} ha`),M.length&&(M.lengthFormatted=`${M.length.toFixed(1)} m`),M.arcLength&&(M.arcLengthFormatted=`${M.arcLength.toFixed(1)} m`),M.perimeter&&(M.perimeterFormatted=`${(M.perimeter/1e3).toFixed(2)} km`),M.radius&&(M.radiusFormatted=`${M.radius.toFixed(1)} m`),M.diameter&&(M.diameterFormatted=`${M.diameter.toFixed(1)} m`),M.width&&(M.widthFormatted=`${M.width.toFixed(1)} m`),M.height&&(M.heightFormatted=`${M.height.toFixed(1)} m`),M.chordLength&&(M.chordLengthFormatted=`${M.chordLength.toFixed(1)} m`),M.slope&&(M.slopeFormatted=n(M.slope)),M.startAngle&&(M.startAngleFormatted=i(M.startAngle)),M.stopAngle&&(M.stopAngleFormatted=i(M.stopAngle)),M});return{selectedShape:e,shapeProperties:t,formattedProperties:C,updateSelectedShape:A,calculateProperties:w,normalizeAngle:o,calculateArcLength:l,calculateSectorArea:c}}class au extends Ht.Polygon{constructor(n,i,o=0,l=180,c={}){super([[]],{...c,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});Qt(this,"center");Qt(this,"radius");Qt(this,"startAngle");Qt(this,"stopAngle");Qt(this,"numPoints");Qt(this,"properties");Qt(this,"pm");this.center=n,this.radius=i,this.startAngle=this.normalizeAngle(o),this.stopAngle=this.normalizeAngle(l),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...c,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",p=>{var m;this.pm&&(this.pm._layers=[],this.pm._markers=[],(m=this.pm._markerGroup)==null||m.clearLayers())}),this.on("pm:vertexadded",p=>{var m;this.pm&&((m=this.pm._markerGroup)==null||m.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))})}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],i=(this.stopAngle-this.startAngle+360)%360;n.push(this.center);for(let o=0;o<=this.numPoints;o++){const c=(this.startAngle+i*o/this.numPoints)*Math.PI/180,p=this.radius*Math.cos(c),y=this.radius*Math.sin(c)/111319.9,b=p/(111319.9*Math.cos(this.center.lat*Math.PI/180)),w=Ht.latLng(this.center.lat+y,this.center.lng+b);n.push(w)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this)}setAngles(n,i){const o=this.normalizeAngle(n),l=this.normalizeAngle(i),c=this.getOpeningAngle();let p=(l-o+360)%360;const m=45;return Math.abs(p-c)>m&&(p>c?p=c+m:p=c-m),p=Math.max(0,Math.min(360,p)),this.startAngle=o,this.stopAngle=(o+p)%360,this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<0||n>360?this:(this.stopAngle=this.normalizeAngle(this.startAngle+n),this.updateGeometry(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this)}getCenter(){return this.center}getRadius(){return this.radius}getStartAngle(){return this.startAngle}getStopAngle(){return this.stopAngle}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&this.setLatLngs([n])}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle}}}}const oh=(e,t)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${t})`;const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16);return`rgba(${n}, ${i}, ${o}, ${t})`},c0=(e,t)=>{e.style.fontSize=t.fontSize,e.style.color=t.color,e.style.backgroundColor=oh(t.backgroundColor,t.backgroundOpacity),t.hasBorder?e.style.border=`${t.borderWidth} solid ${oh(t.borderColor,t.borderOpacity)}`:e.style.border="none",e.style.padding=t.padding,e.style.borderRadius=t.borderRadius},rs=e=>{document.querySelectorAll(".drawing-help-message").forEach(i=>i.remove());const n=Ht.DomUtil.create("div","drawing-help-message");return n.innerHTML=e,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function hf(e,t,n){const i=156543.03392*Math.cos(t*Math.PI/180)/Math.pow(2,n);return e/i}const fr=(e,t="m",n="")=>{let i,o;return t==="m"?e>=1e4?(i=(e/1e4).toFixed(2),o="ha"):(i=e.toFixed(2),o="m"):t==="m"?e>=1e3?(i=(e/1e3).toFixed(2),o="km"):(i=e.toFixed(2),o="m"):(i=e.toFixed(2),o=t),n?`${n}: ${i} ${o}`:`${i} ${o}`},h0=e=>`${((e%360+360)%360).toFixed(1)}`,x3=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1});function L3(){const e=It(null),t=It(null),n=It(""),i=It(null),o=It(!1),l=(O,oe="Double-cliquez pour diter")=>{const we={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},R=(U,ee)=>{var _e;const de=((_e=e.value)==null?void 0:_e.getZoom())||14,xe=O.lat,Ae=hf(ee.physicalSize,xe,de);return`<div class="text-container" style="width:${Ae}px;height:${Ae}px;transform:rotate(${ee.rotation}deg)">
        <div class="text-annotation" style="font-size:${Ae*.2}px;color:${ee.color};background-color:${oh(ee.backgroundColor,ee.backgroundOpacity)};border:${ee.hasBorder?ee.borderWidth+" solid "+oh(ee.borderColor,ee.borderOpacity):"none"};padding:${ee.padding};border-radius:${ee.borderRadius}">${U}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},G=()=>{if(!e.value)return;const U=e.value.getZoom(),ee=W.getLatLng().lat;hf(W.properties.style.physicalSize,ee,U);const de=W.getIcon(),xe={html:R(W.properties.text,W.properties.style),className:de.options.className};W.setIcon(Ht.divIcon(xe))},he=Ht.divIcon({html:R(oe,we),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),W=Ht.marker(O,{icon:he,draggable:!1,pmIgnore:!0});W.properties={type:"text",text:oe,style:{...we}},e.value&&(e.value.on("zoomend",G),W.on("remove",()=>{var U;(U=e.value)==null||U.off("zoomend",G)})),G();let ne=!1,X=!1,se=0,V=0;const Y=U=>{if(!e.value)return;const ee=U.target;if(ee.classList.contains("rotate")){ne=!0;const de=W.getLatLng(),xe=e.value.mouseEventToLatLng(U);se=Math.atan2(xe.lat-de.lat,xe.lng-de.lng)*180/Math.PI,V=W.properties.style.rotation||0}else ee.classList.contains("move")&&(X=!0,e.value.latLngToLayerPoint(W.getLatLng()));document.addEventListener("mousemove",ue),document.addEventListener("mouseup",We)},ue=U=>{if(!(!X||!e.value)){if(ne){const ee=W.getLatLng(),de=e.value.mouseEventToLatLng(U),xe=Math.atan2(de.lat-ee.lat,de.lng-ee.lng)*180/Math.PI,Ae=(V+(xe-se))%360;W.properties.style.rotation=Ae;const _e=W.getIcon(),Ie={html:R(W.properties.text,W.properties.style),className:_e.options.className};W.setIcon(Ht.divIcon(Ie))}else if(X){const ee=x3(U),de=e.value.mouseEventToLatLng(ee);W.setLatLng(de)}}},We=()=>{ne=!1,X=!1,document.removeEventListener("mousemove",ue),document.removeEventListener("mouseup",We)};return W.on("add",()=>{const U=W.getElement();U&&U.querySelectorAll(".control-button").forEach(de=>{de.addEventListener("mousedown",Y)})}),W.on("remove",()=>{const U=W.getElement();U&&U.querySelectorAll(".control-button").forEach(de=>{de.removeEventListener("mousedown",Y)})}),W.on("dblclick",U=>{var Ie;Ht.DomEvent.stopPropagation(U);const ee=(Ie=W.getElement())==null?void 0:Ie.querySelector(".text-annotation");if(!ee)return;ee.contentEditable="true",ee.focus(),ee.classList.add("editing");const de=window.getSelection(),xe=document.createRange();xe.selectNodeContents(ee),de==null||de.removeAllRanges(),de==null||de.addRange(xe);const Ae=()=>{ee.contentEditable="false",ee.classList.remove("editing");const Ne=ee.innerText.trim();if(Ne){W.properties.text=Ne;const st=W.getIcon(),gt={html:R(Ne,W.properties.style),className:st.options.className};W.setIcon(Ht.divIcon(gt))}ee.removeEventListener("blur",Ae),ee.removeEventListener("keydown",_e)},_e=Ne=>{Ne.key==="Enter"&&!Ne.shiftKey&&(Ne.preventDefault(),Ae())};ee.addEventListener("blur",Ae),ee.addEventListener("keydown",_e)}),W},c=(O,oe)=>{const we=Ht.DomUtil.create("div","measure-tooltip");if(we.innerHTML=oe,we.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(we),e.value){const R=e.value.latLngToContainerPoint(O);we.style.left=`${R.x+10}px`,we.style.top=`${R.y-25}px`}return we},p=(O,oe,we)=>{O.on("mouseover",()=>{const R=c(O.getLatLng(),we());O.measureDiv=R}),O.on("mousemove",R=>{if(O.measureDiv&&e.value){const G=e.value.latLngToContainerPoint(R.latlng);O.measureDiv.style.left=`${G.x+10}px`,O.measureDiv.style.top=`${G.y-25}px`}}),O.on("mouseout",()=>{O.measureDiv&&(O.measureDiv.remove(),O.measureDiv=void 0)})};w3();let m=[];const y=()=>{m.forEach(O=>{O&&O.remove&&("measureDiv"in O&&O.measureDiv&&(O.measureDiv.remove(),O.measureDiv=void 0),t.value&&t.value.removeLayer(O),O.remove())}),m=[],document.querySelectorAll(".measure-tooltip").forEach(O=>{O.remove()})},b=(O,oe="#2563EB")=>{const we=Ht.circleMarker(O,{radius:6,color:oe,fillColor:oe,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return t.value&&t.value.addLayer(we),we},w=(O,oe)=>{var R,G,he,W,ne,X;console.log("=== CALCULATING SHAPE PROPERTIES START ==="),console.log("Input layer:",{type:oe,instanceof:{Circle:O instanceof Ht.Circle,Rectangle:O instanceof Ht.Rectangle,Polygon:O instanceof Ht.Polygon,Polyline:O instanceof Ht.Polyline,CircleArc:O instanceof au},options:O.options});const we={type:oe,style:O.options||{}};try{if(O instanceof Ht.Circle){const se=O.getRadius(),V=O.getLatLng();we.radius=se,we.diameter=se*2,we.area=Math.PI*Math.pow(se,2),we.perimeter=2*Math.PI*se,we.center=V,we.surfaceInterieure=we.area,we.surfaceExterieure=we.area,console.log("Circle properties calculated:",we)}else if(O instanceof au){const se=O.getRadius(),V=O.getCenter(),Y=O.getStartAngle(),ue=O.getStopAngle(),We=O.getOpeningAngle();we.radius=se,we.diameter=se*2,we.area=Math.PI*Math.pow(se,2)*We/360,we.arcLength=2*Math.PI*se*We/360,we.perimeter=we.arcLength+2*se,we.center=V,we.startAngle=Y,we.stopAngle=ue,we.openingAngle=We,we.surfaceInterieure=we.area,we.surfaceExterieure=we.area,console.log("CircleArc properties calculated:",we)}else if(O instanceof Ht.Rectangle){const se=O.getBounds(),V=se.getNorthEast(),Y=se.getSouthWest(),ue=Vf([Y.lng,Y.lat],[V.lng,Y.lat],{units:"meters"}),We=Vf([Y.lng,Y.lat],[Y.lng,V.lat],{units:"meters"});we.width=ue,we.height=We,we.area=ue*We,we.perimeter=2*(ue+We),we.surfaceInterieure=we.area,we.surfaceExterieure=we.area,we.dimensions={width:ue,height:We},console.log("Rectangle properties calculated:",we)}else if(O instanceof Ht.Polygon){const V=O.getLatLngs()[0].map(ue=>[ue.lng,ue.lat]);V.push(V[0]);const Y=$f([V]);we.area=Gf(Y),we.perimeter=sh(oc([...V]),{units:"meters"}),we.surfaceInterieure=we.area,we.surfaceExterieure=we.area,console.log("Polygon properties calculated:",we)}else if(O instanceof Ht.Polyline&&!(O instanceof Ht.Polygon)){const V=O.getLatLngs().map(We=>[We.lng,We.lat]),Y=oc(V);we.length=sh(Y,{units:"meters"});const ue=10;we.surfaceInfluence=we.length*ue,we.dimensions={width:ue},console.log("Polyline properties calculated:",we)}we.style={...we.style,color:((R=O.options)==null?void 0:R.color)||"#3388ff",weight:((G=O.options)==null?void 0:G.weight)||3,opacity:((he=O.options)==null?void 0:he.opacity)||1,fillColor:((W=O.options)==null?void 0:W.fillColor)||"#3388ff",fillOpacity:((ne=O.options)==null?void 0:ne.fillOpacity)||.2,dashArray:((X=O.options)==null?void 0:X.dashArray)||""}}catch(se){console.error("Error calculating shape properties:",se)}return console.log("=== CALCULATING SHAPE PROPERTIES END ==="),console.log("Final properties:",we),we},A=(O,oe=2)=>{var W;if(!e.value){console.warn("Map is not available for text size update");return}const we=e.value.getZoom(),R=O.getLatLng().lat,G=hf(oe,R,we),he=(W=O.getElement())==null?void 0:W.querySelector(".text-annotation");he&&(O.properties.style.fontSize=`${G}px`,O.properties.physicalWidth=oe,O.properties.physicalHeight=oe,c0(he,O.properties.style))},C=(O,oe,we)=>{const R=Ht.map(O).setView(oe,we);e.value=R,Ht.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(R);const G=new Ht.FeatureGroup;return G.addTo(R),t.value=G,R.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),R.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:G,templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),R.on("pm:drawstart",he=>{o.value=!0,he.shape==="Circle"&&n.value==="Semicircle"&&(R.getContainer().style.cursor="crosshair")}),R.on("pm:drawend",()=>{o.value=!1,R.getContainer().style.cursor="",i.value&&rs("Cliquez sur la forme pour afficher les points de contrle")}),R.on("pm:create",async he=>{var X,se,V;const W=he.layer;(X=t.value)==null||X.addLayer(W);let ne="unknown";if(W instanceof Ht.Circle?ne=n.value==="Semicircle"?"Semicircle":"Circle":W instanceof Ht.Rectangle?ne="Rectangle":W instanceof Ht.Polygon?ne="Polygon":W instanceof Ht.Polyline&&!(W instanceof Ht.Polygon)&&(ne="Line"),W.properties=w(W,ne),i.value=W,ne==="Semicircle"){const Y=W.getLatLng(),ue=W.getRadius();(se=t.value)==null||se.removeLayer(W);const We=new au(Y,ue);We.properties=w(We,"Semicircle"),(V=t.value)==null||V.addLayer(We),i.value=We,ke(We)}else W instanceof Ht.Circle?$(W):W instanceof Ht.Rectangle?pe(W):W instanceof Ht.Polygon?Te(W):W instanceof Ht.Polyline&&!(W instanceof Ht.Polygon)&&Ce(W);rs("Cliquez sur la forme pour afficher les points de contrle")}),R.on("click",he=>{he.target===R&&(y(),i.value=null,document.querySelectorAll(".drawing-help-message").forEach(ne=>ne.remove()))}),G.on("click",he=>{var ne,X,se;Ht.DomEvent.stopPropagation(he);const W=he.layer;y(),(ne=document.querySelector(".drawing-help-message"))==null||ne.remove(),i.value=W,W instanceof au||((X=W.properties)==null?void 0:X.type)==="Semicircle"?(W.pm&&(W.pm._layers=[],W.pm._markers=[],(se=W.pm._markerGroup)==null||se.clearLayers()),ke(W)):W instanceof Ht.Circle?$(W):W instanceof Ht.Rectangle?pe(W):W instanceof Ht.Polygon?Te(W):W instanceof Ht.Polyline&&!(W instanceof Ht.Polygon)&&Ce(W)}),R.on("pm:edit",he=>{var ne,X;console.log("=== PM:EDIT EVENT START ==="),console.log("Event details:",he);const W=he.layer;if(W){console.log("Layer before update:",{type:(ne=W.properties)==null?void 0:ne.type,properties:W.properties,options:W.options,_mRadius:W._mRadius,_latlng:W._latlng,constructor:W.constructor.name});let se="unknown";W instanceof Ht.Circle?(se=((X=W.properties)==null?void 0:X.type)==="Semicircle"?"Semicircle":"Circle",console.log("Circle detected with radius:",W.getRadius())):W instanceof Ht.Rectangle?se="Rectangle":W instanceof Ht.Polygon?se="Polygon":W instanceof Ht.Polyline&&!(W instanceof Ht.Polygon)&&(se="Line"),console.log("Detected shape type:",se);const V=w(W,se);if(console.log("Newly calculated properties:",V),i.value&&i.value===W){console.log("Updating selected shape...",{currentRadius:W._mRadius,newRadius:V.radius});const Y={...V};W.properties=Y,i.value=null,Ul(()=>{i.value=W}),console.log("Emitting properties:updated event with:",{shape:{_mRadius:W._mRadius,_latlng:W._latlng,properties:Y,constructor:W.constructor.name}}),W.fire("properties:updated",{shape:W,properties:Y}),console.log("Shape properties after update:",{layerRadius:W._mRadius,propertiesRadius:W.properties.radius,fullProperties:W.properties})}se==="Semicircle"?ke(W):W instanceof Ht.Circle?$(W):W instanceof Ht.Rectangle?pe(W):W instanceof Ht.Polygon?Te(W):W instanceof Ht.Polyline&&Ce(W),rs("Utilisez les points de contrle pour modifier la forme")}console.log("=== PM:EDIT EVENT END ===")}),R.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()),rs("Dplacez la forme  l'endroit souhait")}),R.on("pm:dragend",he=>{var W;if(he.layer&&i.value===he.layer){const ne=he.layer,X=((W=ne.properties)==null?void 0:W.type)||"unknown",se=w(ne,X);ne.properties={...se},i.value=null,Ul(()=>{i.value=ne}),ne.fire("properties:updated",{shape:ne,properties:ne.properties})}setTimeout(()=>{rs("Cliquez sur la forme pour afficher les points de contrle")},100)}),R.on("pm:remove",()=>{var he;(he=document.querySelector(".drawing-help-message"))==null||he.remove()}),R.on("pm:select",he=>{var ne;const W=he.layer;document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove()),W instanceof au||((ne=W.properties)==null?void 0:ne.type)==="Semicircle"?rs(`Points de contrle : <span style="color: #059669"></span> Ajuster le rayon, <span style="color: #2563EB"></span> et <span style="color: #DC2626"></span> Modifier l'ouverture du demi-cercle`):rs("Utilisez les points de contrle pour modifier la forme")}),R.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove())}),R},M=()=>{if(!e.value||!t.value)return;const O=t.value.getBounds();O.isValid()&&e.value.fitBounds(O,{padding:[50,50],maxZoom:19})},N=O=>{if(e.value){console.log("=== SETTING DRAWING TOOL START ==="),console.log("Current tool:",n.value),console.log("New tool:",O),document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove());try{console.log("Disabling all modes...");const oe=e.value.pm;oe.globalEditModeEnabled()&&oe.disableGlobalEditMode(),oe.globalDragModeEnabled()&&oe.disableGlobalDragMode(),oe.globalRemovalModeEnabled()&&oe.disableGlobalRemovalMode(),oe.disableDraw(),y()}catch(oe){console.error("Error disabling modes:",oe)}if(n.value=O,console.log("Tool set to:",n.value),!O){console.log("No tool selected, clearing control points"),y();return}setTimeout(()=>{var oe,we,R,G,he,W,ne;try{switch(console.log("Enabling tool:",O),O){case"Circle":rs("Cliquez et maintenez pour dessiner un cercle, relchez pour terminer"),(oe=e.value)==null||oe.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":rs("Cliquez et maintenez pour dessiner un demi-cercle, relchez pour terminer"),(we=e.value)==null||we.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":rs("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(R=e.value)==null||R.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":rs("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(G=e.value)==null||G.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":rs("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(he=e.value)==null||he.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(rs("Cliquez pour ajouter du texte, double-cliquez pour diter"),e.value){const X=se=>{if(!e.value||!t.value)return;const V=l(se.latlng);t.value.addLayer(V),i.value=V,e.value.off("click",X),N("")};e.value.on("click",X)}break;case"drag":rs("Cliquez et maintenez une forme pour la dplacer"),(W=e.value)==null||W.pm.enableGlobalDragMode();break;case"delete":rs("Cliquez sur une forme pour la supprimer"),(ne=e.value)==null||ne.pm.enableGlobalRemovalMode();break}console.log("Tool enabled successfully")}catch(X){console.error("Error enabling tool:",X)}},100),console.log("=== SETTING DRAWING TOOL END ===")}},F=O=>{var we;if(!i.value)return;const oe=i.value;if(oe.properties=oe.properties||{},oe.properties.style=oe.properties.style||{},oe.properties.style={...oe.properties.style,...O},oe.properties.type==="text"){const R=oe.properties._textLayer,G=(we=R==null?void 0:R.getElement())==null?void 0:we.querySelector(".text-annotation");G&&c0(G,oe.properties.style);const he={color:O.borderColor||oe.properties.style.borderColor,weight:parseInt(O.borderWidth||oe.properties.style.borderWidth),opacity:O.borderOpacity??oe.properties.style.borderOpacity};"setStyle"in oe&&oe.setStyle(he)}else{const R={};O.fillColor&&(R.fillColor=O.fillColor),O.fillOpacity!==void 0&&(R.fillOpacity=O.fillOpacity),O.strokeColor&&(R.color=O.strokeColor),O.strokeOpacity!==void 0&&(R.opacity=O.strokeOpacity),O.strokeWidth!==void 0&&(R.weight=O.strokeWidth),O.dashArray&&(R.dashArray=O.dashArray),"setStyle"in oe&&oe.setStyle(R)}},j=O=>{if(!i.value)return;const oe=i.value;oe.properties={...oe.properties,...O},O.radius&&oe instanceof Ht.Circle&&oe.setRadius(O.radius)},z=(O,oe)=>Ht.latLng((O.lat+oe.lat)/2,(O.lng+oe.lng)/2),$=O=>{if(!e.value||!t.value)return;y();const oe=O.getLatLng(),we=O.getRadius(),R=b(oe,"#059669");m.push(R),p(R,O,()=>{const he=Math.PI*we*we;return[fr(we,"m","Rayon"),fr(he,"m","Surface")].join("<br>")});const G=[];[0,45,90,135,180,225,270,315].forEach(he=>{const W=he*Math.PI/180,ne=Ht.latLng(oe.lat+we/111319.9*Math.sin(W),oe.lng+we/(111319.9*Math.cos(oe.lat*Math.PI/180))*Math.cos(W)),X=b(ne,"#2563EB");G.push(X),m.push(X),p(X,O,()=>{const se=oe.distanceTo(X.getLatLng());return fr(se,"m","Distance du centre")}),X.on("mousedown",se=>{if(!e.value)return;Ht.DomEvent.stopPropagation(se),e.value.dragging.disable();let V=!0;const Y=We=>{if(!V)return;const U=oe.distanceTo(We.latlng);O.setRadius(U),G.forEach((de,xe)=>{const Ae=xe*45*Math.PI/180,_e=Ht.latLng(oe.lat+U/111319.9*Math.sin(Ae),oe.lng+U/(111319.9*Math.cos(oe.lat*Math.PI/180))*Math.cos(Ae));de.setLatLng(_e)});const ee=w(O,"Circle");O.properties={...ee},O.fire("properties:updated",{shape:O,properties:O.properties})},ue=()=>{V=!1,e.value&&(e.value.off("mousemove",Y),document.removeEventListener("mouseup",ue),e.value.dragging.enable())};e.value.on("mousemove",Y),document.addEventListener("mouseup",ue)})}),R.on("mousedown",he=>{if(!e.value)return;Ht.DomEvent.stopPropagation(he),e.value.dragging.disable();let W=!0;const ne=se=>{W&&(O.setLatLng(se.latlng),R.setLatLng(se.latlng),G.forEach((V,Y)=>{const ue=Y*45*Math.PI/180,We=Ht.latLng(se.latlng.lat+we/111319.9*Math.sin(ue),se.latlng.lng+we/(111319.9*Math.cos(se.latlng.lat*Math.PI/180))*Math.cos(ue));V.setLatLng(We)}))},X=()=>{W=!1,e.value&&(e.value.off("mousemove",ne),document.removeEventListener("mouseup",X),e.value.dragging.enable())};e.value.on("mousemove",ne),document.addEventListener("mouseup",X)})},pe=O=>{if(!e.value||!t.value)return;y();const oe=O.getBounds(),we=oe.getCenter(),R=[oe.getNorthWest(),oe.getNorthEast(),oe.getSouthEast(),oe.getSouthWest()],G=b(we,"#059669");m.push(G),p(G,O,()=>{const ne=O.getBounds(),X=ne.getNorthEast().distanceTo(ne.getNorthWest()),se=ne.getNorthWest().distanceTo(ne.getSouthWest()),V=X*se;return[fr(X,"m","Largeur"),fr(se,"m","Hauteur"),fr(V,"m","Surface")].join("<br>")});const he=[];R.forEach((ne,X)=>{const se=b(ne,"#DC2626");he.push(se),m.push(se),p(se,O,()=>{const V=O.getBounds(),Y=V.getNorthEast().distanceTo(V.getNorthWest()),ue=V.getNorthWest().distanceTo(V.getSouthWest());return[fr(Y,"m","Largeur"),fr(ue,"m","Hauteur")].join("<br>")})});const W=[];R.forEach((ne,X)=>{const se=R[(X+1)%4],V=z(ne,se),Y=b(V,"#2563EB");W.push(Y),m.push(Y),p(Y,O,()=>{const ue=O.getBounds(),We=ue.getNorthEast().distanceTo(ue.getNorthWest()),U=ue.getNorthWest().distanceTo(ue.getSouthWest());return[fr(We,"m","Largeur"),fr(U,"m","Hauteur")].join("<br>")})}),G.on("mousedown",ne=>{if(!e.value)return;Ht.DomEvent.stopPropagation(ne),e.value.dragging.disable();let X=!0;const se=O.getBounds(),V=ne.latlng,Y=We=>{if(!X)return;const U=We.latlng.lng-V.lng,ee=We.latlng.lat-V.lat,de=Ht.latLngBounds(Ht.latLng(se.getSouth()+ee,se.getWest()+U),Ht.latLng(se.getNorth()+ee,se.getEast()+U));O.setBounds(de);const xe=[de.getNorthWest(),de.getNorthEast(),de.getSouthEast(),de.getSouthWest()];G.setLatLng(de.getCenter()),he.forEach((Ae,_e)=>{Ae.setLatLng(xe[_e])}),W.forEach((Ae,_e)=>{const Ie=xe[_e],Ne=xe[(_e+1)%4];Ae.setLatLng(z(Ie,Ne))})},ue=()=>{X=!1,e.value&&(e.value.off("mousemove",Y),document.removeEventListener("mouseup",ue),e.value.dragging.enable())};e.value.on("mousemove",Y),document.addEventListener("mouseup",ue)}),he.forEach((ne,X)=>{ne.on("mousedown",se=>{if(!e.value)return;Ht.DomEvent.stopPropagation(se),e.value.dragging.disable();let V=!0;const Y=We=>{if(!V)return;const U=(X+2)%4,ee=R[U],de=Ht.latLngBounds(ee,We.latlng);O.setBounds(de);const xe=[de.getNorthWest(),de.getNorthEast(),de.getSouthEast(),de.getSouthWest()];G.setLatLng(de.getCenter()),he.forEach((Ae,_e)=>{Ae.setLatLng(xe[_e])}),W.forEach((Ae,_e)=>{const Ie=xe[_e],Ne=xe[(_e+1)%4];Ae.setLatLng(z(Ie,Ne))})},ue=()=>{V=!1,e.value&&(e.value.off("mousemove",Y),document.removeEventListener("mouseup",ue),e.value.dragging.enable())};e.value.on("mousemove",Y),document.addEventListener("mouseup",ue)})})},Ce=O=>{if(!e.value||!t.value)return;y();const oe=O.getLatLngs();oe.forEach((R,G)=>{const he=b(R,"#059669");m.push(he),p(he,O,()=>{const W=oe.reduce((X,se,V)=>V===0?0:X+se.distanceTo(oe[V-1]),0);let ne=oe.slice(0,G+1).reduce((X,se,V)=>V===0?0:X+se.distanceTo(oe[V-1]),0);return[fr(ne,"m","Distance depuis le dbut"),fr(W,"m","Longueur totale")].join("<br>")}),he.on("mousedown",W=>{if(!e.value)return;Ht.DomEvent.stopPropagation(W),e.value.dragging.disable();let ne=!0;const X=V=>{ne&&(oe[G]=V.latlng,O.setLatLngs(oe),he.setLatLng(V.latlng),we())},se=()=>{ne=!1,e.value&&(e.value.off("mousemove",X),document.removeEventListener("mouseup",se),e.value.dragging.enable(),Ce(O))};e.value.on("mousemove",X),document.addEventListener("mouseup",se)})});const we=()=>{m.slice(oe.length).forEach(R=>{t.value&&t.value.removeLayer(R)}),m=m.slice(0,oe.length);for(let R=0;R<oe.length-1;R++){const G=z(oe[R],oe[R+1]),he=b(G,"#2563EB");m.push(he),p(he,O,()=>{const W=oe[R].distanceTo(oe[R+1]),ne=oe.reduce((se,V,Y)=>Y===0?0:se+V.distanceTo(oe[Y-1]),0),X=oe.slice(0,R+1).reduce((se,V,Y)=>Y===0?0:se+V.distanceTo(oe[Y-1]),0)+W/2;return[fr(W,"m","Longueur du segment"),fr(W/2,"m","Demi-segment"),fr(X,"m","Distance depuis le dbut"),fr(ne,"m","Longueur totale")].join("<br>")}),he.on("mousedown",W=>{if(!e.value)return;Ht.DomEvent.stopPropagation(W),e.value.dragging.disable();let ne=!0;const X=V=>{ne&&(oe.splice(R+1,0,V.latlng),O.setLatLngs(oe),Ce(O))},se=()=>{ne=!1,e.value&&(e.value.off("mousemove",X),e.value.dragging.enable())};e.value.on("mousemove",X),document.addEventListener("mouseup",se)})}};we()},Te=O=>{if(!e.value||!t.value)return;y();const oe=O.getLatLngs()[0],we=oe.map(ne=>[ne.lng,ne.lat]);we.push(we[0]);const R=$f([we]),G=Gf(R),he=oe.reduce((ne,X,se)=>{const V=oe[(se+1)%oe.length];return ne+X.distanceTo(V)},0);oe.forEach((ne,X)=>{const se=b(ne,"#059669");m.push(se),p(se,O,()=>{const V=oe[(X-1+oe.length)%oe.length],Y=oe[(X+1)%oe.length],ue=ne.distanceTo(V),We=ne.distanceTo(Y);return[fr(ue,"m","Distance au point prcdent"),fr(We,"m","Distance au point suivant"),fr(he,"m","Primtre total"),fr(G,"m","Surface")].join("<br>")}),se.on("mousedown",V=>{if(Ht.DomEvent.stopPropagation(V),!e.value)return;e.value.dragging.disable();let Y=!0;const ue=U=>{Y&&(Ht.DomEvent.stopPropagation(U),oe[X]=U.latlng,O.setLatLngs([oe]),se.setLatLng(U.latlng),W())},We=()=>{Y=!1,e.value&&(e.value.off("mousemove",ue),document.removeEventListener("mouseup",We),e.value.dragging.enable())};e.value.on("mousemove",ue),document.addEventListener("mouseup",We)})});const W=()=>{const ne=O.getLatLngs()[0];m.slice(ne.length).forEach(X=>{t.value&&t.value.removeLayer(X)}),m=m.slice(0,ne.length);for(let X=0;X<ne.length;X++){const se=ne[(X+1)%ne.length],V=z(ne[X],se),Y=b(V,"#2563EB");m.push(Y),p(Y,O,()=>{const ue=ne[X].distanceTo(se);return[fr(ue,"m","Longueur du segment"),fr(he,"m","Primtre total"),fr(G,"m","Surface")].join("<br>")})}};W()},ke=O=>{if(!e.value||!t.value)return;y();const oe=O.getCenter(),we=O.getRadius(),R=O.getStartAngle(),G=O.getStopAngle(),he=[R,G];he.forEach((X,se)=>{const V=X*Math.PI/180,Y=Ht.latLng(oe.lat+we/111319.9*Math.sin(V),oe.lng+we/(111319.9*Math.cos(oe.lat*Math.PI/180))*Math.cos(V)),ue=b(Y,"#DC2626");m.push(ue),p(ue,O,()=>`Angle: ${h0(X)}`),ue.on("mousedown",We=>{if(!e.value)return;Ht.DomEvent.stopPropagation(We),e.value.dragging.disable();let U=!0;const ee=m.find(Ae=>Ae.options.color==="#2563EB");ee&&ee.setStyle({opacity:0,fillOpacity:0});const de=Ae=>{if(!U||!e.value)return;const _e=Math.atan2(Ae.latlng.lat-oe.lat,Ae.latlng.lng-oe.lng)*180/Math.PI,Ie=Ht.latLng(oe.lat+we/111319.9*Math.sin(_e*Math.PI/180),oe.lng+we/(111319.9*Math.cos(oe.lat*Math.PI/180))*Math.cos(_e*Math.PI/180));ue.setLatLng(Ie),se===0?O.setAngles(_e,O.getStopAngle()):O.setAngles(O.getStartAngle(),_e);const Ne=w(O,"Semicircle");O.properties={...Ne},O.fire("properties:updated",{shape:O,properties:O.properties})},xe=()=>{U=!1,e.value&&(e.value.off("mousemove",de),document.removeEventListener("mouseup",xe),e.value.dragging.enable(),ke(O))};e.value.on("mousemove",de),document.addEventListener("mouseup",xe)})});const W=b(oe,"#059669");m.push(W),p(W,O,()=>{const X=Math.PI*we*we*O.getOpeningAngle()/360;return[fr(we,"m","Rayon"),fr(X,"m","Surface"),`Angle: ${h0(O.getOpeningAngle())}`].join("<br>")});const ne=O.getOpeningAngle();if(ne>5){const se=((R+G)/2+360)%360*Math.PI/180,V=Ht.latLng(oe.lat+we/111319.9*Math.sin(se),oe.lng+we/(111319.9*Math.cos(oe.lat*Math.PI/180))*Math.cos(se)),Y=b(V,"#2563EB");m.push(Y),p(Y,O,()=>fr(we,"m","Rayon")),Y.on("mousedown",ue=>{if(!e.value)return;Ht.DomEvent.stopPropagation(ue),e.value.dragging.disable();let We=!0;const U=de=>{if(!We)return;const xe=oe.distanceTo(de.latlng);if(O.setRadius(xe),(Math.atan2(de.latlng.lat-oe.lat,de.latlng.lng-oe.lng)*180/Math.PI-R+360)%360<=ne){const Ie=Ht.latLng(oe.lat+xe/111319.9*Math.sin(se),oe.lng+xe/(111319.9*Math.cos(oe.lat*Math.PI/180))*Math.cos(se));Y.setLatLng(Ie);const Ne=w(O,"Semicircle");O.properties={...Ne},O.fire("properties:updated",{shape:O,properties:O.properties}),he.forEach((st,gt)=>{const ae=st*Math.PI/180,fe=Ht.latLng(oe.lat+xe/111319.9*Math.sin(ae),oe.lng+xe/(111319.9*Math.cos(oe.lat*Math.PI/180))*Math.cos(ae));m[gt].setLatLng(fe)})}},ee=()=>{We=!1,e.value&&(e.value.off("mousemove",U),document.removeEventListener("mouseup",ee),e.value.dragging.enable())};e.value.on("mousemove",U),document.addEventListener("mouseup",ee)})}W.on("mousedown",X=>{if(!e.value)return;Ht.DomEvent.stopPropagation(X),e.value.dragging.disable();let se=!0;const V=ue=>{if(!se)return;O.setCenter(ue.latlng),W.setLatLng(ue.latlng);const We=w(O,"Semicircle");O.properties={...We},O.fire("properties:updated",{shape:O,properties:O.properties}),ke(O)},Y=()=>{se=!1,e.value&&(e.value.off("mousemove",V),document.removeEventListener("mouseup",Y),e.value.dragging.enable())};e.value.on("mousemove",V),document.addEventListener("mouseup",Y)})};return _h(()=>{e.value&&(e.value.remove(),e.value=null)}),{map:e,featureGroup:t,currentTool:n,selectedShape:i,isDrawing:o,initMap:C,setDrawingTool:N,updateShapeStyle:F,updateShapeProperties:j,updateTextFixedSize:A,adjustView:M,clearActiveControlPoints:y}}function C3(){const e=It(null),t=It(""),n=It("Ville"),i={Ville:Zr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}),Satellite:Zr.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19}),Cadastre:Zr.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19})};return{map:e,searchQuery:t,currentBaseMap:n,baseMaps:i,initMap:p=>{e.value=p,Zr.control.layers(i).addTo(p),i[n.value].addTo(p)},searchLocation:async()=>{if(!(!e.value||!t.value))try{const m=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t.value)}`)).json();if(m&&m.length>0){const{lat:y,lon:b}=m[0];e.value.setView([y,b],13)}}catch(p){console.error("Erreur lors de la recherche de localisation:",p)}},changeBaseMap:p=>{!e.value||!i[p]||(Object.values(i).forEach(m=>{var y;(y=e.value)!=null&&y.hasLayer(m)&&e.value.removeLayer(m)}),i[p].addTo(e.value),n.value=p)}}}const Bh=xd("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>t=>e.plans.find(n=>n.id===t),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,n;const e=ls();this.loading=!0;try{let i="/plans/";e.isDealer?i+="?concessionnaire="+((t=e.user)==null?void 0:t.id):e.isClient&&(i+="?utilisateur="+((n=e.user)==null?void 0:n.id));const o=await wn.get(i);this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1}},async fetchPlansWithDetails(){var t,n;const e=ls();this.loading=!0;try{let i="/plans/";const o={include_details:!0};e.isDealer?o.concessionnaire=(t=e.user)==null?void 0:t.id:e.isClient&&(o.utilisateur=(n=e.user)==null?void 0:n.id);const l=await wn.get(i,{params:o});return this.plans=l.data,l}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{console.log("Creating plan with data:",e);const t=await wn.post("/plans/",e);return console.log("Plan creation response:",t.data),this.plans.push(t.data),t.data}catch(t){const n=t instanceof Error?t.message:String(t);throw console.error("Error creating plan:",n),this.error="Erreur lors de la cration du plan",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var t,n;if(this.unsavedChanges){this.loading=!0;try{const i=await wn.patch(`/plans/${e}/`,{...this.currentPlan,version:((t=this.currentPlan)==null?void 0:t.version)||1}),o=this.plans.findIndex(l=>l.id===e);return o!==-1&&(this.plans[o]=i.data),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=i.data),this.unsavedChanges=!1,i.data}catch(i){throw this.error="Erreur lors de la sauvegarde du plan",i}finally{this.loading=!1}}},async updatePlanDetails(e,t){var n;try{const i=await wn.patch(`/plans/${e}/`,t),o=this.plans.findIndex(l=>l.id===e);return o!==-1&&(this.plans[o]={...this.plans[o],...i.data}),((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan={...this.currentPlan,...i.data}),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),i}},async fetchPlanHistory(e){this.loading=!0;try{const t=await wn.get(`/plans/${e}/historique/`);return this.planHistory=t.data,t.data}catch(t){throw this.error="Erreur lors de la rcupration de l'historique",t}finally{this.loading=!1}},async restorePlanVersion(e,t){var n;this.loading=!0;try{const i=await wn.post(`/plans/${e}/restaurer/`,{version_id:t});((n=this.currentPlan)==null?void 0:n.id)===e&&(this.currentPlan=i.data);const o=this.plans.findIndex(l=>l.id===e);return o!==-1&&(this.plans[o]=i.data),i.data}catch(i){throw this.error="Erreur lors de la restauration de la version",i}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;try{await wn.delete(`/plans/${e}/`),this.plans=this.plans.filter(n=>n.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}}),zg=xd("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){this.currentPlanId=e,e===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(e){!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e),this.unsavedChanges=!0},updateElement(e){const t=this.elements.findIndex(n=>n.id===e.id);if(t!==-1){const n=this.elements[t].type_forme;this.elements[t]={...e,type_forme:n},this.unsavedChanges=!0}},removeElement(e){const t=this.elements.findIndex(n=>n.id===e);t!==-1&&(this.elements.splice(t,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){var t;this.loading=!0;try{const i=(await wn.get(`/plans/${e}/`)).data;this.elements=i.formes.map(o=>({...o,type_forme:o.type_forme})),this.currentPlanId=e,this.unsavedChanges=!1,i.preferences&&(i.preferences.currentTool&&this.setCurrentTool(i.preferences.currentTool),i.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...i.preferences.currentStyle}),i.preferences.lastUsedType&&(this.lastUsedType=i.preferences.lastUsedType)),(t=this.selectedElement)!=null&&t.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(n){throw console.error("Erreur lors du chargement des lments:",n),this.error="Erreur lors du chargement des lments du plan",n}finally{this.loading=!1}},async saveToPlan(e){Bh(),this.loading=!0;try{const t=e||this.currentPlanId;if(!t)throw new Error("Aucun plan slectionn pour la sauvegarde");const n=this.elements.map(o=>({...o,type_forme:o.type_forme||this.lastUsedType})),i=await wn.post(`/plans/${t}/save_with_elements/`,{formes:n,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=i.data.formes.map(o=>({...o,type_forme:o.type_forme})),this.unsavedChanges=!1,i.data}catch(t){throw console.error("Erreur lors de la sauvegarde:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1}}}}),k3={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},P3={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},E3={key:0,class:"mb-4"},A3={key:0,class:"animate-pulse"},S3=["value"],M3={key:1,class:"mb-4"},B3={key:0,class:"animate-pulse"},T3=["disabled"],N3={value:null},D3=["value"],O3={class:"mb-4"},I3={class:"mb-6"},R3={class:"flex justify-end space-x-3"},F3=["disabled"],j3={key:0},z3={key:1},Ug=Es({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(e,{expose:t,emit:n}){const i=e,o=n,l=ls(),c=Bh();It(!1);const p=It(!1),m=It(null),y=It([]),b=It([]),w=It(null),A=It(null),C=It(!1),M=It(!1),N=It({nom:"",description:"",concessionnaire:null,client:null}),F=Tn(()=>{var ke,O;return((ke=l.user)==null?void 0:ke.user_type)==="admin"?N.value.nom.trim()&&N.value.concessionnaire&&N.value.client:((O=l.user)==null?void 0:O.user_type)==="dealer"?N.value.nom.trim()&&N.value.client:N.value.nom.trim()});$s(()=>N.value.concessionnaire,async ke=>{if(i.modelValue)if(console.log("[NewPlanModal] Concessionnaire changed:",ke),ke){const O=y.value.find(oe=>oe.id===ke);O&&await $(O)}else b.value=[],w.value=null,A.value=null,N.value.client=null}),$s(()=>i.modelValue,ke=>{var O,oe;ke?((O=l.user)==null?void 0:O.user_type)==="admin"?j():((oe=l.user)==null?void 0:oe.user_type)==="dealer"&&z(l.user.id):(N.value={nom:"",description:"",concessionnaire:null,client:null},w.value=null,A.value=null,b.value=[],y.value=[],m.value=null)}),Tn(()=>{var ke;return((ke=l.user)==null?void 0:ke.user_type)==="admin"?w.value?b.value:[]:b.value});async function j(){console.log("[NewPlanModal] Loading dealers..."),C.value=!0;try{const ke=await wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});console.log("[NewPlanModal] Dealers loaded:",ke.data),y.value=ke.data}catch(ke){console.error("[NewPlanModal] Error loading dealers:",ke)}finally{C.value=!1}}async function z(ke){console.log("[NewPlanModal] Loading clients for dealer:",ke),M.value=!0;try{const O=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:ke}});console.log("[NewPlanModal] Clients loaded:",O.data),b.value=Array.isArray(O.data)?O.data:[O.data]}catch(O){console.error("[NewPlanModal] Error loading clients:",O),b.value=[]}finally{M.value=!1}}async function $(ke){if(i.modelValue){console.log("[NewPlanModal] Selecting dealer:",ke),w.value=ke,N.value.concessionnaire=ke.id,M.value=!0;try{const O=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:ke.id}});console.log("[NewPlanModal] Clients loaded:",O.data),b.value=Array.isArray(O.data)?O.data:[O.data]}catch(O){console.error("[NewPlanModal] Error loading clients:",O),b.value=[]}finally{M.value=!1}}}function pe(ke){i.modelValue&&(console.log("[NewPlanModal] Client selected:",ke),A.value=ke,N.value.client=ke.id,o("clientSelected",ke))}function Ce(){o("update:modelValue",!1),N.value={nom:"",description:"",concessionnaire:null,client:null},w.value=null,A.value=null,b.value=[],m.value=null}async function Te(){var ke,O,oe,we,R;m.value=null,p.value=!0;try{const G={nom:N.value.nom.trim(),description:N.value.description.trim()};((ke=l.user)==null?void 0:ke.user_type)==="admin"?(G.concessionnaire=N.value.concessionnaire,G.client=N.value.client):((O=l.user)==null?void 0:O.user_type)==="dealer"?(G.concessionnaire=l.user.id,G.client=N.value.client):((oe=l.user)==null?void 0:oe.user_type)==="client"&&(G.client=l.user.id);const he=await c.createPlan(G);o("created",he.id),Ce()}catch(G){console.error("[NewPlanModal] Error creating plan:",G),m.value=((R=(we=G.response)==null?void 0:we.data)==null?void 0:R.detail)||G.message||"Une erreur est survenue lors de la cration du plan"}finally{p.value=!1}}return t({dealers:y,dealerClients:b,selectedDealer:w,selectedClient:A,loadDealers:j,loadDealerClients:z,selectDealer:$,selectClient:pe}),(ke,O)=>{var oe,we;return ke.modelValue?(ht(),mt("div",k3,[I("div",P3,[I("div",{class:"flex justify-between items-center mb-4"},[O[5]||(O[5]=I("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),I("button",{onClick:Ce,class:"text-gray-400 hover:text-gray-500"},O[4]||(O[4]=[I("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Cn(l).isAdmin?(ht(),mt("div",E3,[O[8]||(O[8]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),C.value?(ht(),mt("div",A3,O[6]||(O[6]=[I("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Rn((ht(),mt("select",{key:1,"onUpdate:modelValue":O[0]||(O[0]=R=>N.value.concessionnaire=R),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[O[7]||(O[7]=I("option",{value:null},"Slectionnez un concessionnaire",-1)),(ht(!0),mt(An,null,Gn(y.value,R=>(ht(),mt("option",{key:R.id,value:R.id},Nt(R.first_name)+" "+Nt(R.last_name)+" ("+Nt(R.company_name)+") ",9,S3))),128))],512)),[[qs,N.value.concessionnaire]])])):un("",!0),((oe=Cn(l).user)==null?void 0:oe.user_type)==="admin"||((we=Cn(l).user)==null?void 0:we.user_type)==="dealer"?(ht(),mt("div",M3,[O[10]||(O[10]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),M.value?(ht(),mt("div",B3,O[9]||(O[9]=[I("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Rn((ht(),mt("select",{key:1,"onUpdate:modelValue":O[1]||(O[1]=R=>N.value.client=R),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!b.value.length},[I("option",N3,Nt(b.value.length?"Slectionnez un client":"Aucun client disponible"),1),(ht(!0),mt(An,null,Gn(b.value,R=>(ht(),mt("option",{key:R.id,value:R.id},Nt(R.first_name)+" "+Nt(R.last_name)+" ("+Nt(R.company_name)+") ",9,D3))),128))],8,T3)),[[qs,N.value.client]])])):un("",!0),I("div",O3,[O[11]||(O[11]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Rn(I("input",{"onUpdate:modelValue":O[2]||(O[2]=R=>N.value.nom=R),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Sr,N.value.nom]])]),I("div",I3,[O[12]||(O[12]=I("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Rn(I("textarea",{"onUpdate:modelValue":O[3]||(O[3]=R=>N.value.description=R),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Sr,N.value.description]])]),I("div",R3,[I("button",{onClick:Ce,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),I("button",{onClick:Te,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!F.value||p.value},[p.value?(ht(),mt("span",j3,"Cration en cours...")):(ht(),mt("span",z3,"Crer le plan"))],8,F3)])])])):un("",!0)}}});function sr(e){"@babel/helpers - typeof";return sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(e)}var Wi=Uint8Array,Gs=Uint16Array,Ad=Int32Array,Th=new Wi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Nh=new Wi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Wf=new Wi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qg=function(e,t){for(var n=new Gs(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];for(var o=new Ad(n[30]),i=1;i<30;++i)for(var l=n[i];l<n[i+1];++l)o[l]=l-n[i]<<5|i;return{b:n,r:o}},$g=qg(Th,2),Vg=$g.b,Zf=$g.r;Vg[28]=258,Zf[258]=28;var Gg=qg(Nh,0),U3=Gg.b,f0=Gg.r,Kf=new Gs(32768);for(var br=0;br<32768;++br){var rl=(br&43690)>>1|(br&21845)<<1;rl=(rl&52428)>>2|(rl&13107)<<2,rl=(rl&61680)>>4|(rl&3855)<<4,Kf[br]=((rl&65280)>>8|(rl&255)<<8)>>1}var ca=function(e,t,n){for(var i=e.length,o=0,l=new Gs(t);o<i;++o)e[o]&&++l[e[o]-1];var c=new Gs(t);for(o=1;o<t;++o)c[o]=c[o-1]+l[o-1]<<1;var p;if(n){p=new Gs(1<<t);var m=15-t;for(o=0;o<i;++o)if(e[o])for(var y=o<<4|e[o],b=t-e[o],w=c[e[o]-1]++<<b,A=w|(1<<b)-1;w<=A;++w)p[Kf[w]>>m]=y}else for(p=new Gs(i),o=0;o<i;++o)e[o]&&(p[o]=Kf[c[e[o]-1]++]>>15-e[o]);return p},dl=new Wi(288);for(var br=0;br<144;++br)dl[br]=8;for(var br=144;br<256;++br)dl[br]=9;for(var br=256;br<280;++br)dl[br]=7;for(var br=280;br<288;++br)dl[br]=8;var ac=new Wi(32);for(var br=0;br<32;++br)ac[br]=5;var q3=ca(dl,9,0),$3=ca(dl,9,1),V3=ca(ac,5,0),G3=ca(ac,5,1),ff=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},No=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&n},df=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Sd=function(e){return(e+7)/8|0},Hg=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Wi(e.subarray(t,n))},H3=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oo=function(e,t,n){var i=new Error(t||H3[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,Oo),!n)throw i;return i},W3=function(e,t,n,i){var o=e.length,l=0;if(!o||t.f&&!t.l)return n||new Wi(0);var c=!n,p=c||t.i!=2,m=t.i;c&&(n=new Wi(o*3));var y=function(gt){var ae=n.length;if(gt>ae){var fe=new Wi(Math.max(ae*2,gt));fe.set(n),n=fe}},b=t.f||0,w=t.p||0,A=t.b||0,C=t.l,M=t.d,N=t.m,F=t.n,j=o*8;do{if(!C){b=No(e,w,1);var z=No(e,w+1,3);if(w+=3,z)if(z==1)C=$3,M=G3,N=9,F=5;else if(z==2){var Te=No(e,w,31)+257,ke=No(e,w+10,15)+4,O=Te+No(e,w+5,31)+1;w+=14;for(var oe=new Wi(O),we=new Wi(19),R=0;R<ke;++R)we[Wf[R]]=No(e,w+R*3,7);w+=ke*3;for(var G=ff(we),he=(1<<G)-1,W=ca(we,G,1),R=0;R<O;){var ne=W[No(e,w,he)];w+=ne&15;var $=ne>>4;if($<16)oe[R++]=$;else{var X=0,se=0;for($==16?(se=3+No(e,w,3),w+=2,X=oe[R-1]):$==17?(se=3+No(e,w,7),w+=3):$==18&&(se=11+No(e,w,127),w+=7);se--;)oe[R++]=X}}var V=oe.subarray(0,Te),Y=oe.subarray(Te);N=ff(V),F=ff(Y),C=ca(V,N,1),M=ca(Y,F,1)}else Oo(1);else{var $=Sd(w)+4,pe=e[$-4]|e[$-3]<<8,Ce=$+pe;if(Ce>o){m&&Oo(0);break}p&&y(A+pe),n.set(e.subarray($,Ce),A),t.b=A+=pe,t.p=w=Ce*8,t.f=b;continue}if(w>j){m&&Oo(0);break}}p&&y(A+131072);for(var ue=(1<<N)-1,We=(1<<F)-1,U=w;;U=w){var X=C[df(e,w)&ue],ee=X>>4;if(w+=X&15,w>j){m&&Oo(0);break}if(X||Oo(2),ee<256)n[A++]=ee;else if(ee==256){U=w,C=null;break}else{var de=ee-254;if(ee>264){var R=ee-257,xe=Th[R];de=No(e,w,(1<<xe)-1)+Vg[R],w+=xe}var Ae=M[df(e,w)&We],_e=Ae>>4;Ae||Oo(3),w+=Ae&15;var Y=U3[_e];if(_e>3){var xe=Nh[_e];Y+=df(e,w)&(1<<xe)-1,w+=xe}if(w>j){m&&Oo(0);break}p&&y(A+131072);var Ie=A+de;if(A<Y){var Ne=l-Y,st=Math.min(Y,Ie);for(Ne+A<0&&Oo(3);A<st;++A)n[A]=i[Ne+A]}for(;A<Ie;++A)n[A]=n[A-Y]}}t.l=C,t.p=U,t.b=A,t.f=b,C&&(b=1,t.m=N,t.d=M,t.n=F)}while(!b);return A!=n.length&&c?Hg(n,0,A):n.subarray(0,A)},Ba=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},Fu=function(e,t,n){n<<=t&7;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},pf=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var o=n.length,l=n.slice();if(!o)return{t:Zg,l:0};if(o==1){var c=new Wi(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort(function(Ce,Te){return Ce.f-Te.f}),n.push({s:-1,f:25001});var p=n[0],m=n[1],y=0,b=1,w=2;for(n[0]={s:-1,f:p.f+m.f,l:p,r:m};b!=o-1;)p=n[n[y].f<n[w].f?y++:w++],m=n[y!=b&&n[y].f<n[w].f?y++:w++],n[b++]={s:-1,f:p.f+m.f,l:p,r:m};for(var A=l[0].s,i=1;i<o;++i)l[i].s>A&&(A=l[i].s);var C=new Gs(A+1),M=Jf(n[b-1],C,0);if(M>t){var i=0,N=0,F=M-t,j=1<<F;for(l.sort(function(Te,ke){return C[ke.s]-C[Te.s]||Te.f-ke.f});i<o;++i){var z=l[i].s;if(C[z]>t)N+=j-(1<<M-C[z]),C[z]=t;else break}for(N>>=F;N>0;){var $=l[i].s;C[$]<t?N-=1<<t-C[$]++-1:++i}for(;i>=0&&N;--i){var pe=l[i].s;C[pe]==t&&(--C[pe],++N)}M=t}return{t:new Wi(C),l:M}},Jf=function(e,t,n){return e.s==-1?Math.max(Jf(e.l,t,n+1),Jf(e.r,t,n+1)):t[e.s]=n},d0=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Gs(++t),i=0,o=e[0],l=1,c=function(m){n[i++]=m},p=1;p<=t;++p)if(e[p]==o&&p!=t)++l;else{if(!o&&l>2){for(;l>138;l-=138)c(32754);l>2&&(c(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(c(o),--l;l>6;l-=6)c(8304);l>2&&(c(l-3<<5|8208),l=0)}for(;l--;)c(o);l=1,o=e[p]}return{c:n.subarray(0,i),n:t}},ju=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},Wg=function(e,t,n){var i=n.length,o=Sd(t+2);e[o]=i&255,e[o+1]=i>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var l=0;l<i;++l)e[o+l+4]=n[l];return(o+4+i)*8},p0=function(e,t,n,i,o,l,c,p,m,y,b){Ba(t,b++,n),++o[256];for(var w=pf(o,15),A=w.t,C=w.l,M=pf(l,15),N=M.t,F=M.l,j=d0(A),z=j.c,$=j.n,pe=d0(N),Ce=pe.c,Te=pe.n,ke=new Gs(19),O=0;O<z.length;++O)++ke[z[O]&31];for(var O=0;O<Ce.length;++O)++ke[Ce[O]&31];for(var oe=pf(ke,7),we=oe.t,R=oe.l,G=19;G>4&&!we[Wf[G-1]];--G);var he=y+5<<3,W=ju(o,dl)+ju(l,ac)+c,ne=ju(o,A)+ju(l,N)+c+14+3*G+ju(ke,we)+2*ke[16]+3*ke[17]+7*ke[18];if(m>=0&&he<=W&&he<=ne)return Wg(t,b,e.subarray(m,m+y));var X,se,V,Y;if(Ba(t,b,1+(ne<W)),b+=2,ne<W){X=ca(A,C,0),se=A,V=ca(N,F,0),Y=N;var ue=ca(we,R,0);Ba(t,b,$-257),Ba(t,b+5,Te-1),Ba(t,b+10,G-4),b+=14;for(var O=0;O<G;++O)Ba(t,b+3*O,we[Wf[O]]);b+=3*G;for(var We=[z,Ce],U=0;U<2;++U)for(var ee=We[U],O=0;O<ee.length;++O){var de=ee[O]&31;Ba(t,b,ue[de]),b+=we[de],de>15&&(Ba(t,b,ee[O]>>5&127),b+=ee[O]>>12)}}else X=q3,se=dl,V=V3,Y=ac;for(var O=0;O<p;++O){var xe=i[O];if(xe>255){var de=xe>>18&31;Fu(t,b,X[de+257]),b+=se[de+257],de>7&&(Ba(t,b,xe>>23&31),b+=Th[de]);var Ae=xe&31;Fu(t,b,V[Ae]),b+=Y[Ae],Ae>3&&(Fu(t,b,xe>>5&8191),b+=Nh[Ae])}else Fu(t,b,X[xe]),b+=se[xe]}return Fu(t,b,X[256]),b+se[256]},Z3=new Ad([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Zg=new Wi(0),K3=function(e,t,n,i,o,l){var c=l.z||e.length,p=new Wi(i+c+5*(1+Math.ceil(c/7e3))+o),m=p.subarray(i,p.length-o),y=l.l,b=(l.r||0)&7;if(t){b&&(m[0]=l.r>>3);for(var w=Z3[t-1],A=w>>13,C=w&8191,M=(1<<n)-1,N=l.p||new Gs(32768),F=l.h||new Gs(M+1),j=Math.ceil(n/3),z=2*j,$=function(Re){return(e[Re]^e[Re+1]<<j^e[Re+2]<<z)&M},pe=new Ad(25e3),Ce=new Gs(288),Te=new Gs(32),ke=0,O=0,oe=l.i||0,we=0,R=l.w||0,G=0;oe+2<c;++oe){var he=$(oe),W=oe&32767,ne=F[he];if(N[W]=ne,F[he]=W,R<=oe){var X=c-oe;if((ke>7e3||we>24576)&&(X>423||!y)){b=p0(e,m,0,pe,Ce,Te,O,we,G,oe-G,b),we=ke=O=0,G=oe;for(var se=0;se<286;++se)Ce[se]=0;for(var se=0;se<30;++se)Te[se]=0}var V=2,Y=0,ue=C,We=W-ne&32767;if(X>2&&he==$(oe-We))for(var U=Math.min(A,X)-1,ee=Math.min(32767,oe),de=Math.min(258,X);We<=ee&&--ue&&W!=ne;){if(e[oe+V]==e[oe+V-We]){for(var xe=0;xe<de&&e[oe+xe]==e[oe+xe-We];++xe);if(xe>V){if(V=xe,Y=We,xe>U)break;for(var Ae=Math.min(We,xe-2),_e=0,se=0;se<Ae;++se){var Ie=oe-We+se&32767,Ne=N[Ie],st=Ie-Ne&32767;st>_e&&(_e=st,ne=Ie)}}}W=ne,ne=N[W],We+=W-ne&32767}if(Y){pe[we++]=268435456|Zf[V]<<18|f0[Y];var gt=Zf[V]&31,ae=f0[Y]&31;O+=Th[gt]+Nh[ae],++Ce[257+gt],++Te[ae],R=oe+V,++ke}else pe[we++]=e[oe],++Ce[e[oe]]}}for(oe=Math.max(oe,R);oe<c;++oe)pe[we++]=e[oe],++Ce[e[oe]];b=p0(e,m,y,pe,Ce,Te,O,we,G,oe-G,b),y||(l.r=b&7|m[b/8|0]<<3,b-=7,l.h=F,l.p=N,l.i=oe,l.w=R)}else{for(var oe=l.w||0;oe<c+y;oe+=65535){var fe=oe+65535;fe>=c&&(m[b/8|0]=y,fe=c),b=Wg(m,b+1,e.subarray(oe,fe))}l.i=c}return Hg(p,0,i+Sd(b)+o)},Kg=function(){var e=1,t=0;return{p:function(n){for(var i=e,o=t,l=n.length|0,c=0;c!=l;){for(var p=Math.min(c+2655,l);c<p;++c)o+=i+=n[c];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}e=i,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},J3=function(e,t,n,i,o){if(!o&&(o={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),c=new Wi(l.length+e.length);c.set(l),c.set(e,l.length),e=c,o.w=l.length}return K3(e,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,i,o)},Jg=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Y3=function(e,t){var n=t.level,i=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var o=Kg();o.p(t.dictionary),Jg(e,2,o.d())}},X3=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Oo(6,"invalid zlib data"),(e[1]>>5&1)==1&&Oo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Yf(e,t){t||(t={});var n=Kg();n.p(e);var i=J3(e,t,t.dictionary?6:2,4);return Y3(i,t),Jg(i,i.length-4,n.d()),i}function Q3(e,t){return W3(e.subarray(X3(e),-4),{i:2},t,t)}var ew=typeof TextDecoder<"u"&&new TextDecoder,tw=0;try{ew.decode(Zg,{stream:!0}),tw=1}catch{}var _n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function mf(){_n.console&&typeof _n.console.log=="function"&&_n.console.log.apply(_n.console,arguments)}var or={log:mf,warn:function(e){_n.console&&(typeof _n.console.warn=="function"?_n.console.warn.apply(_n.console,arguments):mf.call(null,arguments))},error:function(e){_n.console&&(typeof _n.console.error=="function"?_n.console.error.apply(_n.console,arguments):mf(e))}};function gf(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){Sl(i.response,t,n)},i.onerror=function(){or.error("could not download file")},i.send()}function m0(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ac(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Yu,Xf,Sl=_n.saveAs||((typeof window>"u"?"undefined":sr(window))!=="object"||window!==_n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var i=_n.URL||_n.webkitURL,o=document.createElement("a");t=t||e.name||"download",o.download=t,o.rel="noopener",typeof e=="string"?(o.href=e,o.origin!==location.origin?m0(o.href)?gf(e,t,n):Ac(o,o.target="_blank"):Ac(o)):(o.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){Ac(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(m0(e))gf(e,t,n);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){Ac(i)})}else navigator.msSaveOrOpenBlob(function(o,l){return l===void 0?l={autoBom:!1}:sr(l)!=="object"&&(or.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(e,n),t)}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return gf(e,t,n);var o=e.type==="application/octet-stream",l=/constructor/i.test(_n.HTMLElement)||_n.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l)&&(typeof FileReader>"u"?"undefined":sr(FileReader))==="object"){var p=new FileReader;p.onloadend=function(){var b=p.result;b=c?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=b:location=b,i=null},p.readAsDataURL(e)}else{var m=_n.URL||_n.webkitURL,y=m.createObjectURL(e);i?i.location=y:location.href=y,i=null,setTimeout(function(){m.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Yg(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(p){return[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}}],i=0;i<n.length;i++){var o=n[i].re,l=n[i].process,c=o.exec(e);c&&(t=l(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var p=this.r.toString(16),m=this.g.toString(16),y=this.b.toString(16);return p.length==1&&(p="0"+p),m.length==1&&(m="0"+m),y.length==1&&(y="0"+y),"#"+p+m+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _f(e,t){var n=e[0],i=e[1],o=e[2],l=e[3];n=zi(n,i,o,l,t[0],7,-680876936),l=zi(l,n,i,o,t[1],12,-389564586),o=zi(o,l,n,i,t[2],17,606105819),i=zi(i,o,l,n,t[3],22,-1044525330),n=zi(n,i,o,l,t[4],7,-176418897),l=zi(l,n,i,o,t[5],12,1200080426),o=zi(o,l,n,i,t[6],17,-1473231341),i=zi(i,o,l,n,t[7],22,-45705983),n=zi(n,i,o,l,t[8],7,1770035416),l=zi(l,n,i,o,t[9],12,-1958414417),o=zi(o,l,n,i,t[10],17,-42063),i=zi(i,o,l,n,t[11],22,-1990404162),n=zi(n,i,o,l,t[12],7,1804603682),l=zi(l,n,i,o,t[13],12,-40341101),o=zi(o,l,n,i,t[14],17,-1502002290),n=Ui(n,i=zi(i,o,l,n,t[15],22,1236535329),o,l,t[1],5,-165796510),l=Ui(l,n,i,o,t[6],9,-1069501632),o=Ui(o,l,n,i,t[11],14,643717713),i=Ui(i,o,l,n,t[0],20,-373897302),n=Ui(n,i,o,l,t[5],5,-701558691),l=Ui(l,n,i,o,t[10],9,38016083),o=Ui(o,l,n,i,t[15],14,-660478335),i=Ui(i,o,l,n,t[4],20,-405537848),n=Ui(n,i,o,l,t[9],5,568446438),l=Ui(l,n,i,o,t[14],9,-1019803690),o=Ui(o,l,n,i,t[3],14,-187363961),i=Ui(i,o,l,n,t[8],20,1163531501),n=Ui(n,i,o,l,t[13],5,-1444681467),l=Ui(l,n,i,o,t[2],9,-51403784),o=Ui(o,l,n,i,t[7],14,1735328473),n=qi(n,i=Ui(i,o,l,n,t[12],20,-1926607734),o,l,t[5],4,-378558),l=qi(l,n,i,o,t[8],11,-2022574463),o=qi(o,l,n,i,t[11],16,1839030562),i=qi(i,o,l,n,t[14],23,-35309556),n=qi(n,i,o,l,t[1],4,-1530992060),l=qi(l,n,i,o,t[4],11,1272893353),o=qi(o,l,n,i,t[7],16,-155497632),i=qi(i,o,l,n,t[10],23,-1094730640),n=qi(n,i,o,l,t[13],4,681279174),l=qi(l,n,i,o,t[0],11,-358537222),o=qi(o,l,n,i,t[3],16,-722521979),i=qi(i,o,l,n,t[6],23,76029189),n=qi(n,i,o,l,t[9],4,-640364487),l=qi(l,n,i,o,t[12],11,-421815835),o=qi(o,l,n,i,t[15],16,530742520),n=$i(n,i=qi(i,o,l,n,t[2],23,-995338651),o,l,t[0],6,-198630844),l=$i(l,n,i,o,t[7],10,1126891415),o=$i(o,l,n,i,t[14],15,-1416354905),i=$i(i,o,l,n,t[5],21,-57434055),n=$i(n,i,o,l,t[12],6,1700485571),l=$i(l,n,i,o,t[3],10,-1894986606),o=$i(o,l,n,i,t[10],15,-1051523),i=$i(i,o,l,n,t[1],21,-2054922799),n=$i(n,i,o,l,t[8],6,1873313359),l=$i(l,n,i,o,t[15],10,-30611744),o=$i(o,l,n,i,t[6],15,-1560198380),i=$i(i,o,l,n,t[13],21,1309151649),n=$i(n,i,o,l,t[4],6,-145523070),l=$i(l,n,i,o,t[11],10,-1120210379),o=$i(o,l,n,i,t[2],15,718787259),i=$i(i,o,l,n,t[9],21,-343485551),e[0]=ul(n,e[0]),e[1]=ul(i,e[1]),e[2]=ul(o,e[2]),e[3]=ul(l,e[3])}function Dh(e,t,n,i,o,l){return t=ul(ul(t,e),ul(i,l)),ul(t<<o|t>>>32-o,n)}function zi(e,t,n,i,o,l,c){return Dh(t&n|~t&i,e,t,o,l,c)}function Ui(e,t,n,i,o,l,c){return Dh(t&i|n&~i,e,t,o,l,c)}function qi(e,t,n,i,o,l,c){return Dh(t^n^i,e,t,o,l,c)}function $i(e,t,n,i,o,l,c){return Dh(n^(t|~i),e,t,o,l,c)}function Xg(e){var t,n=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)_f(i,nw(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(_f(i,o),t=0;t<16;t++)o[t]=0;return o[14]=8*n,_f(i,o),i}function nw(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Yu=_n.atob.bind(_n),Xf=_n.btoa.bind(_n);var g0="0123456789abcdef".split("");function rw(e){for(var t="",n=0;n<4;n++)t+=g0[e>>8*n+4&15]+g0[e>>8*n&15];return t}function iw(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Qf(e){return Xg(e).map(iw).join("")}var sw=function(e){for(var t=0;t<e.length;t++)e[t]=rw(e[t]);return e.join("")}(Xg("hello"))!="5d41402abc4b2a76b9719d911017c592";function ul(e,t){if(sw){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ed(e,t){var n,i,o,l;if(e!==n){for(var c=(o=e,l=1+(256/e.length>>0),new Array(l+1).join(o)),p=[],m=0;m<256;m++)p[m]=m;var y=0;for(m=0;m<256;m++){var b=p[m];y=(y+b+c.charCodeAt(m))%256,p[m]=p[y],p[y]=b}n=e,i=p}else p=i;var w=t.length,A=0,C=0,M="";for(m=0;m<w;m++)C=(C+(b=p[A=(A+1)%256]))%256,p[A]=p[C],p[C]=b,c=p[(p[A]+p[C])%256],M+=String.fromCharCode(t.charCodeAt(m)^c);return M}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var _0={print:4,modify:8,copy:16,"annot-forms":32};function lu(e,t,n,i){this.v=1,this.r=2;var o=192;e.forEach(function(p){if(_0.perm!==void 0)throw new Error("Invalid permission: "+p);o+=_0[p]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(t+this.padding).substr(0,32),c=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,c),this.P=-(1+(255^o)),this.encryptionKey=Qf(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=ed(this.encryptionKey,this.padding)}function uu(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,i=0;i<n;i++){var o=e.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=e[i]}return t}function v0(e){if(sr(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,i,o){if(o=o||!1,typeof n!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var l=Math.random().toString(35);return t[n][l]=[i,!!o],l},this.unsubscribe=function(n){for(var i in t)if(t[i][n])return delete t[i][n],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var l in t[n]){var c=t[n][l];try{c[0].apply(e,i)}catch(p){_n.console&&or.error("jsPDF PubSub Error",p.message,p)}c[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function ah(e){if(!(this instanceof ah))return new ah(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Qg(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Bl(e,t,n,i,o){if(!(this instanceof Bl))return new Bl(e,t,n,i,o);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,Qg.call(this,i,o)}function cu(e,t,n,i,o){if(!(this instanceof cu))return new cu(e,t,n,i,o);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Qg.call(this,i,o)}function mn(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],l=arguments[3],c=[],p=1,m=16,y="S",b=null;sr(e=e||{})==="object"&&(n=e.orientation,i=e.unit||i,o=e.format||o,l=e.compress||e.compressPdf||l,(b=e.encryption||null)!==null&&(b.userPassword=b.userPassword||"",b.ownerPassword=b.ownerPassword||"",b.userPermissions=b.userPermissions||[]),p=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(m=e.floatPrecision),y=e.defaultPathOperation||"S"),c=e.filters||(l===!0?["FlateEncode"]:c),i=i||"mm",n=(""+(n||"P")).toLowerCase();var w=e.putOnlyUsedFonts||!1,A={},C={internal:{},__private__:{}};C.__private__.PubSub=v0;var M="1.3",N=C.__private__.getPdfVersion=function(){return M};C.__private__.setPdfVersion=function(x){M=x};var F={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};C.__private__.getPageFormats=function(){return F};var j=C.__private__.getPageFormat=function(x){return F[x]};o=o||"a4";var z={COMPAT:"compat",ADVANCED:"advanced"},$=z.COMPAT;function pe(){this.saveGraphicsState(),le(new on(Dt,0,0,-Dt,0,no()*Dt).toString()+" cm"),this.setFontSize(this.getFontSize()/Dt),y="n",$=z.ADVANCED}function Ce(){this.restoreGraphicsState(),y="S",$=z.COMPAT}var Te=C.__private__.combineFontStyleAndFontWeight=function(x,Z){if(x=="bold"&&Z=="normal"||x=="bold"&&Z==400||x=="normal"&&Z=="italic"||x=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(x=Z==400||Z==="normal"?x==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||x!=="normal"?(Z==700?"bold":Z)+""+x:"bold"),x};C.advancedAPI=function(x){var Z=$===z.COMPAT;return Z&&pe.call(this),typeof x!="function"||(x(this),Z&&Ce.call(this)),this},C.compatAPI=function(x){var Z=$===z.ADVANCED;return Z&&Ce.call(this),typeof x!="function"||(x(this),Z&&pe.call(this)),this},C.isAdvancedAPI=function(){return $===z.ADVANCED};var ke,O=function(x){if($!==z.ADVANCED)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},oe=C.roundToPrecision=C.__private__.roundToPrecision=function(x,Z){var Se=t||Z;if(isNaN(x)||isNaN(Se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(Se).replace(/0+$/,"")};ke=C.hpf=C.__private__.hpf=typeof m=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(x,m)}:m==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return oe(x,16)};var we=C.f2=C.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return oe(x,2)},R=C.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return oe(x,3)},G=C.scale=C.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return $===z.COMPAT?x*Dt:$===z.ADVANCED?x:void 0},he=function(x){return $===z.COMPAT?no()-x:$===z.ADVANCED?x:void 0},W=function(x){return G(he(x))};C.__private__.setPrecision=C.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(t=parseInt(x,10))};var ne,X="00000000000000000000000000000000",se=C.__private__.getFileId=function(){return X},V=C.__private__.setFileId=function(x){return X=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),b!==null&&(Lr=new lu(b.userPermissions,b.userPassword,b.ownerPassword,X)),X};C.setFileId=function(x){return V(x),this},C.getFileId=function(){return se()};var Y=C.__private__.convertDateToPDFDate=function(x){var Z=x.getTimezoneOffset(),Se=Z<0?"+":"-",qe=Math.floor(Math.abs(Z/60)),tt=Math.abs(Z%60),yt=[Se,de(qe),"'",de(tt),"'"].join("");return["D:",x.getFullYear(),de(x.getMonth()+1),de(x.getDate()),de(x.getHours()),de(x.getMinutes()),de(x.getSeconds()),yt].join("")},ue=C.__private__.convertPDFDateToDate=function(x){var Z=parseInt(x.substr(2,4),10),Se=parseInt(x.substr(6,2),10)-1,qe=parseInt(x.substr(8,2),10),tt=parseInt(x.substr(10,2),10),yt=parseInt(x.substr(12,2),10),Bt=parseInt(x.substr(14,2),10);return new Date(Z,Se,qe,tt,yt,Bt,0)},We=C.__private__.setCreationDate=function(x){var Z;if(x===void 0&&(x=new Date),x instanceof Date)Z=Y(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=x}return ne=Z},U=C.__private__.getCreationDate=function(x){var Z=ne;return x==="jsDate"&&(Z=ue(ne)),Z};C.setCreationDate=function(x){return We(x),this},C.getCreationDate=function(x){return U(x)};var ee,de=C.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},xe=C.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},Ae=0,_e=[],Ie=[],Ne=0,st=[],gt=[],ae=!1,fe=Ie,Re=function(){Ae=0,Ne=0,Ie=[],_e=[],st=[],Ji=Ut(),Ai=Ut()};C.__private__.setCustomOutputDestination=function(x){ae=!0,fe=x};var De=function(x){ae||(fe=x)};C.__private__.resetCustomOutputDestination=function(){ae=!1,fe=Ie};var le=C.__private__.out=function(x){return x=x.toString(),Ne+=x.length+1,fe.push(x),fe},Ze=C.__private__.write=function(x){return le(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},lt=C.__private__.getArrayBuffer=function(x){for(var Z=x.length,Se=new ArrayBuffer(Z),qe=new Uint8Array(Se);Z--;)qe[Z]=x.charCodeAt(Z);return Se},Qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];C.__private__.getStandardFonts=function(){return Qe};var ot=e.fontSize||16;C.__private__.setFontSize=C.setFontSize=function(x){return ot=$===z.ADVANCED?x/Dt:x,this};var Oe,Le=C.__private__.getFontSize=C.getFontSize=function(){return $===z.COMPAT?ot:ot*Dt},rt=e.R2L||!1;C.__private__.setR2L=C.setR2L=function(x){return rt=x,this},C.__private__.getR2L=C.getR2L=function(){return rt};var vt,Lt=C.__private__.setZoomMode=function(x){var Z=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))Oe=x;else if(isNaN(x)){if(Z.indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');Oe=x}else Oe=parseInt(x,10)};C.__private__.getZoomMode=function(){return Oe};var Ue,Tt=C.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');vt=x};C.__private__.getPageMode=function(){return vt};var Mt=C.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');Ue=x};C.__private__.getLayoutMode=function(){return Ue},C.__private__.setDisplayMode=C.setDisplayMode=function(x,Z,Se){return Lt(x),Mt(Z),Tt(Se),this};var jt={title:"",subject:"",author:"",keywords:"",creator:""};C.__private__.getDocumentProperty=function(x){if(Object.keys(jt).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return jt[x]},C.__private__.getDocumentProperties=function(){return jt},C.__private__.setDocumentProperties=C.setProperties=C.setDocumentProperties=function(x){for(var Z in jt)jt.hasOwnProperty(Z)&&x[Z]&&(jt[Z]=x[Z]);return this},C.__private__.setDocumentProperty=function(x,Z){if(Object.keys(jt).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return jt[x]=Z};var Vt,Dt,Pn,tn,Kn,ln={},xn={},Jn=[],zt={},Pi={},Fn={},Jr={},_i=null,Yn=0,dn=[],Yt=new v0(C),Kt=e.hotfixes||[],lr={},us={},Ei=[],on=function x(Z,Se,qe,tt,yt,Bt){if(!(this instanceof x))return new x(Z,Se,qe,tt,yt,Bt);isNaN(Z)&&(Z=1),isNaN(Se)&&(Se=0),isNaN(qe)&&(qe=0),isNaN(tt)&&(tt=1),isNaN(yt)&&(yt=0),isNaN(Bt)&&(Bt=0),this._matrix=[Z,Se,qe,tt,yt,Bt]};Object.defineProperty(on.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(on.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(on.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(on.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(on.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(on.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(on.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(on.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(on.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(on.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(on.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(on.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(on.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(on.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(on.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(on.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),on.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ke).join(x)},on.prototype.multiply=function(x){var Z=x.sx*this.sx+x.shy*this.shx,Se=x.sx*this.shy+x.shy*this.sy,qe=x.shx*this.sx+x.sy*this.shx,tt=x.shx*this.shy+x.sy*this.sy,yt=x.tx*this.sx+x.ty*this.shx+this.tx,Bt=x.tx*this.shy+x.ty*this.sy+this.ty;return new on(Z,Se,qe,tt,yt,Bt)},on.prototype.decompose=function(){var x=this.sx,Z=this.shy,Se=this.shx,qe=this.sy,tt=this.tx,yt=this.ty,Bt=Math.sqrt(x*x+Z*Z),qt=(x/=Bt)*Se+(Z/=Bt)*qe;Se-=x*qt,qe-=Z*qt;var Wt=Math.sqrt(Se*Se+qe*qe);return qt/=Wt,x*(qe/=Wt)<Z*(Se/=Wt)&&(x=-x,Z=-Z,qt=-qt,Bt=-Bt),{scale:new on(Bt,0,0,Wt,0,0),translate:new on(1,0,0,1,tt,yt),rotate:new on(x,Z,-Z,x,0,0),skew:new on(1,0,qt,1,0,0)}},on.prototype.toString=function(x){return this.join(" ")},on.prototype.inversed=function(){var x=this.sx,Z=this.shy,Se=this.shx,qe=this.sy,tt=this.tx,yt=this.ty,Bt=1/(x*qe-Z*Se),qt=qe*Bt,Wt=-Z*Bt,nn=-Se*Bt,pn=x*Bt;return new on(qt,Wt,nn,pn,-qt*tt-nn*yt,-Wt*tt-pn*yt)},on.prototype.applyToPoint=function(x){var Z=x.x*this.sx+x.y*this.shx+this.tx,Se=x.x*this.shy+x.y*this.sy+this.ty;return new Eo(Z,Se)},on.prototype.applyToRectangle=function(x){var Z=this.applyToPoint(x),Se=this.applyToPoint(new Eo(x.x+x.w,x.y+x.h));return new Ni(Z.x,Z.y,Se.x-Z.x,Se.y-Z.y)},on.prototype.clone=function(){var x=this.sx,Z=this.shy,Se=this.shx,qe=this.sy,tt=this.tx,yt=this.ty;return new on(x,Z,Se,qe,tt,yt)},C.Matrix=on;var Ki=C.matrixMult=function(x,Z){return Z.multiply(x)},cs=new on(1,0,0,1,0,0);C.unitMatrix=C.identityMatrix=cs;var oi=function(x,Z){if(!Pi[x]){var Se=(Z instanceof Bl?"Sh":"P")+(Object.keys(zt).length+1).toString(10);Z.id=Se,Pi[x]=Se,zt[Se]=Z,Yt.publish("addPattern",Z)}};C.ShadingPattern=Bl,C.TilingPattern=cu,C.addShadingPattern=function(x,Z){return O("addShadingPattern()"),oi(x,Z),this},C.beginTilingPattern=function(x){O("beginTilingPattern()"),xa(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},C.endTilingPattern=function(x,Z){O("endTilingPattern()"),Z.stream=gt[ee].join(`
`),oi(x,Z),Yt.publish("endTilingPattern",Z),Ei.pop().restore()};var Un=C.__private__.newObject=function(){var x=Ut();return ai(x,!0),x},Ut=C.__private__.newObjectDeferred=function(){return Ae++,_e[Ae]=function(){return Ne},Ae},ai=function(x,Z){return Z=typeof Z=="boolean"&&Z,_e[x]=Ne,Z&&le(x+" 0 obj"),x},go=C.__private__.newAdditionalObject=function(){var x={objId:Ut(),content:""};return st.push(x),x},Ji=Ut(),Ai=Ut(),vi=C.__private__.decodeColorString=function(x){var Z=x.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length===5&&(Z[4]==="k"||Z[4]==="K")&&(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var Se=parseFloat(Z[0]);Z=[Se,Se,Se,"r"]}for(var qe="#",tt=0;tt<3;tt++)qe+=("0"+Math.floor(255*parseFloat(Z[tt])).toString(16)).slice(-2);return qe},Si=C.__private__.encodeColorString=function(x){var Z;typeof x=="string"&&(x={ch1:x});var Se=x.ch1,qe=x.ch2,tt=x.ch3,yt=x.ch4,Bt=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Se=="string"&&Se.charAt(0)!=="#"){var qt=new Yg(Se);if(qt.ok)Se=qt.toHex();else if(!/^\d*\.?\d*$/.test(Se))throw new Error('Invalid color "'+Se+'" passed to jsPDF.encodeColorString.')}if(typeof Se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Se)&&(Se="#"+Se[1]+Se[1]+Se[2]+Se[2]+Se[3]+Se[3]),typeof Se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Se)){var Wt=parseInt(Se.substr(1),16);Se=Wt>>16&255,qe=Wt>>8&255,tt=255&Wt}if(qe===void 0||yt===void 0&&Se===qe&&qe===tt)if(typeof Se=="string")Z=Se+" "+Bt[0];else switch(x.precision){case 2:Z=we(Se/255)+" "+Bt[0];break;case 3:default:Z=R(Se/255)+" "+Bt[0]}else if(yt===void 0||sr(yt)==="object"){if(yt&&!isNaN(yt.a)&&yt.a===0)return Z=["1.","1.","1.",Bt[1]].join(" ");if(typeof Se=="string")Z=[Se,qe,tt,Bt[1]].join(" ");else switch(x.precision){case 2:Z=[we(Se/255),we(qe/255),we(tt/255),Bt[1]].join(" ");break;default:case 3:Z=[R(Se/255),R(qe/255),R(tt/255),Bt[1]].join(" ")}}else if(typeof Se=="string")Z=[Se,qe,tt,yt,Bt[2]].join(" ");else switch(x.precision){case 2:Z=[we(Se),we(qe),we(tt),we(yt),Bt[2]].join(" ");break;case 3:default:Z=[R(Se),R(qe),R(tt),R(yt),Bt[2]].join(" ")}return Z},Yr=C.__private__.getFilters=function(){return c},yi=C.__private__.putStream=function(x){var Z=(x=x||{}).data||"",Se=x.filters||Yr(),qe=x.alreadyAppliedFilters||[],tt=x.addLength1||!1,yt=Z.length,Bt=x.objectId,qt=function(kr){return kr};if(b!==null&&Bt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");b!==null&&(qt=Lr.encryptor(Bt,0));var Wt={};Se===!0&&(Se=["FlateEncode"]);var nn=x.additionalKeyValues||[],pn=(Wt=mn.API.processDataByFilters!==void 0?mn.API.processDataByFilters(Z,Se):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(qe)?qe.join(" "):qe.toString());if(Wt.data.length!==0&&(nn.push({key:"Length",value:Wt.data.length}),tt===!0&&nn.push({key:"Length1",value:yt})),pn.length!=0)if(pn.split("/").length-1==1)nn.push({key:"Filter",value:pn});else{nn.push({key:"Filter",value:"["+pn+"]"});for(var Bn=0;Bn<nn.length;Bn+=1)if(nn[Bn].key==="DecodeParms"){for(var ir=[],In=0;In<Wt.reverseChain.split("/").length-1;In+=1)ir.push("null");ir.push(nn[Bn].value),nn[Bn].value="["+ir.join(" ")+"]"}}le("<<");for(var qn=0;qn<nn.length;qn++)le("/"+nn[qn].key+" "+nn[qn].value);le(">>"),Wt.data.length!==0&&(le("stream"),le(qt(Wt.data)),le("endstream"))},hs=C.__private__.putPage=function(x){var Z=x.number,Se=x.data,qe=x.objId,tt=x.contentsObjId;ai(qe,!0),le("<</Type /Page"),le("/Parent "+x.rootDictionaryObjId+" 0 R"),le("/Resources "+x.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(ke(x.mediaBox.bottomLeftX))+" "+parseFloat(ke(x.mediaBox.bottomLeftY))+" "+ke(x.mediaBox.topRightX)+" "+ke(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&le("/CropBox ["+ke(x.cropBox.bottomLeftX)+" "+ke(x.cropBox.bottomLeftY)+" "+ke(x.cropBox.topRightX)+" "+ke(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&le("/BleedBox ["+ke(x.bleedBox.bottomLeftX)+" "+ke(x.bleedBox.bottomLeftY)+" "+ke(x.bleedBox.topRightX)+" "+ke(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&le("/TrimBox ["+ke(x.trimBox.bottomLeftX)+" "+ke(x.trimBox.bottomLeftY)+" "+ke(x.trimBox.topRightX)+" "+ke(x.trimBox.topRightY)+"]"),x.artBox!==null&&le("/ArtBox ["+ke(x.artBox.bottomLeftX)+" "+ke(x.artBox.bottomLeftY)+" "+ke(x.artBox.topRightX)+" "+ke(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&le("/UserUnit "+x.userUnit),Yt.publish("putPage",{objId:qe,pageContext:dn[Z],pageNumber:Z,page:Se}),le("/Contents "+tt+" 0 R"),le(">>"),le("endobj");var yt=Se.join(`
`);return $===z.ADVANCED&&(yt+=`
Q`),ai(tt,!0),yi({data:yt,filters:Yr(),objectId:tt}),le("endobj"),qe},_o=C.__private__.putPages=function(){var x,Z,Se=[];for(x=1;x<=Yn;x++)dn[x].objId=Ut(),dn[x].contentsObjId=Ut();for(x=1;x<=Yn;x++)Se.push(hs({number:x,data:gt[x],objId:dn[x].objId,contentsObjId:dn[x].contentsObjId,mediaBox:dn[x].mediaBox,cropBox:dn[x].cropBox,bleedBox:dn[x].bleedBox,trimBox:dn[x].trimBox,artBox:dn[x].artBox,userUnit:dn[x].userUnit,rootDictionaryObjId:Ji,resourceDictionaryObjId:Ai}));ai(Ji,!0),le("<</Type /Pages");var qe="/Kids [";for(Z=0;Z<Yn;Z++)qe+=Se[Z]+" 0 R ";le(qe+"]"),le("/Count "+Yn),le(">>"),le("endobj"),Yt.publish("postPutPages")},Uo=function(x){Yt.publish("putFont",{font:x,out:le,newObject:Un,putStream:yi}),x.isAlreadyPutted!==!0&&(x.objectNumber=Un(),le("<<"),le("/Type /Font"),le("/BaseFont /"+uu(x.postScriptName)),le("/Subtype /Type1"),typeof x.encoding=="string"&&le("/Encoding /"+x.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},qo=function(){for(var x in ln)ln.hasOwnProperty(x)&&(w===!1||w===!0&&A.hasOwnProperty(x))&&Uo(ln[x])},Ss=function(x){x.objectNumber=Un();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[ke(x.x),ke(x.y),ke(x.x+x.width),ke(x.y+x.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var Se=x.pages[1].join(`
`);yi({data:Se,additionalKeyValues:Z,objectId:x.objectNumber}),le("endobj")},Ws=function(){for(var x in lr)lr.hasOwnProperty(x)&&Ss(lr[x])},vo=function(x,Z){var Se,qe=[],tt=1/(Z-1);for(Se=0;Se<1;Se+=tt)qe.push(Se);if(qe.push(1),x[0].offset!=0){var yt={offset:0,color:x[0].color};x.unshift(yt)}if(x[x.length-1].offset!=1){var Bt={offset:1,color:x[x.length-1].color};x.push(Bt)}for(var qt="",Wt=0,nn=0;nn<qe.length;nn++){for(Se=qe[nn];Se>x[Wt+1].offset;)Wt++;var pn=x[Wt].offset,Bn=(Se-pn)/(x[Wt+1].offset-pn),ir=x[Wt].color,In=x[Wt+1].color;qt+=xe(Math.round((1-Bn)*ir[0]+Bn*In[0]).toString(16))+xe(Math.round((1-Bn)*ir[1]+Bn*In[1]).toString(16))+xe(Math.round((1-Bn)*ir[2]+Bn*In[2]).toString(16))}return qt.trim()},_l=function(x,Z){Z||(Z=21);var Se=Un(),qe=vo(x.colors,Z),tt=[];tt.push({key:"FunctionType",value:"0"}),tt.push({key:"Domain",value:"[0.0 1.0]"}),tt.push({key:"Size",value:"["+Z+"]"}),tt.push({key:"BitsPerSample",value:"8"}),tt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yi({data:qe,additionalKeyValues:tt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Se}),le("endobj"),x.objectNumber=Un(),le("<< /ShadingType "+x.type),le("/ColorSpace /DeviceRGB");var yt="/Coords ["+ke(parseFloat(x.coords[0]))+" "+ke(parseFloat(x.coords[1]))+" ";x.type===2?yt+=ke(parseFloat(x.coords[2]))+" "+ke(parseFloat(x.coords[3])):yt+=ke(parseFloat(x.coords[2]))+" "+ke(parseFloat(x.coords[3]))+" "+ke(parseFloat(x.coords[4]))+" "+ke(parseFloat(x.coords[5])),le(yt+="]"),x.matrix&&le("/Matrix ["+x.matrix.toString()+"]"),le("/Function "+Se+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},vl=function(x,Z){var Se=Ut(),qe=Un();Z.push({resourcesOid:Se,objectOid:qe}),x.objectNumber=qe;var tt=[];tt.push({key:"Type",value:"/Pattern"}),tt.push({key:"PatternType",value:"1"}),tt.push({key:"PaintType",value:"1"}),tt.push({key:"TilingType",value:"1"}),tt.push({key:"BBox",value:"["+x.boundingBox.map(ke).join(" ")+"]"}),tt.push({key:"XStep",value:ke(x.xStep)}),tt.push({key:"YStep",value:ke(x.yStep)}),tt.push({key:"Resources",value:Se+" 0 R"}),x.matrix&&tt.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),yi({data:x.stream,additionalKeyValues:tt,objectId:x.objectNumber}),le("endobj")},$o=function(x){var Z;for(Z in zt)zt.hasOwnProperty(Z)&&(zt[Z]instanceof Bl?_l(zt[Z]):zt[Z]instanceof cu&&vl(zt[Z],x))},za=function(x){for(var Z in x.objectNumber=Un(),le("<<"),x)switch(Z){case"opacity":le("/ca "+we(x[Z]));break;case"stroke-opacity":le("/CA "+we(x[Z]))}le(">>"),le("endobj")},yl=function(){var x;for(x in Fn)Fn.hasOwnProperty(x)&&za(Fn[x])},yo=function(){for(var x in le("/XObject <<"),lr)lr.hasOwnProperty(x)&&lr[x].objectNumber>=0&&le("/"+x+" "+lr[x].objectNumber+" 0 R");Yt.publish("putXobjectDict"),le(">>")},bo=function(){Lr.oid=Un(),le("<<"),le("/Filter /Standard"),le("/V "+Lr.v),le("/R "+Lr.r),le("/U <"+Lr.toHexString(Lr.U)+">"),le("/O <"+Lr.toHexString(Lr.O)+">"),le("/P "+Lr.P),le(">>"),le("endobj")},pa=function(){for(var x in le("/Font <<"),ln)ln.hasOwnProperty(x)&&(w===!1||w===!0&&A.hasOwnProperty(x))&&le("/"+x+" "+ln[x].objectNumber+" 0 R");le(">>")},Ua=function(){if(Object.keys(zt).length>0){for(var x in le("/Shading <<"),zt)zt.hasOwnProperty(x)&&zt[x]instanceof Bl&&zt[x].objectNumber>=0&&le("/"+x+" "+zt[x].objectNumber+" 0 R");Yt.publish("putShadingPatternDict"),le(">>")}},bi=function(x){if(Object.keys(zt).length>0){for(var Z in le("/Pattern <<"),zt)zt.hasOwnProperty(Z)&&zt[Z]instanceof C.TilingPattern&&zt[Z].objectNumber>=0&&zt[Z].objectNumber<x&&le("/"+Z+" "+zt[Z].objectNumber+" 0 R");Yt.publish("putTilingPatternDict"),le(">>")}},On=function(){if(Object.keys(Fn).length>0){var x;for(x in le("/ExtGState <<"),Fn)Fn.hasOwnProperty(x)&&Fn[x].objectNumber>=0&&le("/"+x+" "+Fn[x].objectNumber+" 0 R");Yt.publish("putGStateDict"),le(">>")}},vn=function(x){ai(x.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),pa(),Ua(),bi(x.objectOid),On(),yo(),le(">>"),le("endobj")},Zs=function(){var x=[];qo(),yl(),Ws(),$o(x),Yt.publish("putResources"),x.forEach(vn),vn({resourcesOid:Ai,objectOid:Number.MAX_SAFE_INTEGER}),Yt.publish("postPutResources")},Ms=function(){Yt.publish("putAdditionalObjects");for(var x=0;x<st.length;x++){var Z=st[x];ai(Z.objId,!0),le(Z.content),le("endobj")}Yt.publish("postPutAdditionalObjects")},fs=function(x){xn[x.fontName]=xn[x.fontName]||{},xn[x.fontName][x.fontStyle]=x.id},wo=function(x,Z,Se,qe,tt){var yt={id:"F"+(Object.keys(ln).length+1).toString(10),postScriptName:x,fontName:Z,fontStyle:Se,encoding:qe,isStandardFont:tt||!1,metadata:{}};return Yt.publish("addFont",{font:yt,instance:this}),ln[yt.id]=yt,fs(yt),yt.id},bn=function(x){for(var Z=0,Se=Qe.length;Z<Se;Z++){var qe=wo.call(this,x[Z][0],x[Z][1],x[Z][2],Qe[Z][3],!0);w===!1&&(A[qe]=!0);var tt=x[Z][0].split("-");fs({id:qe,fontName:tt[0],fontStyle:tt[1]||""})}Yt.publish("addFonts",{fonts:ln,dictionary:xn})},jn=function(x){return x.foo=function(){try{return x.apply(this,arguments)}catch(qe){var Z=qe.stack||"";~Z.indexOf(" at ")&&(Z=Z.split(" at ")[1]);var Se="Error in function "+Z.split(`
`)[0].split("<")[0]+": "+qe.message;if(!_n.console)throw new Error(Se);_n.console.error(Se,qe),_n.alert&&alert(Se)}},x.foo.bar=x,x.foo},Ks=function(x,Z){var Se,qe,tt,yt,Bt,qt,Wt,nn,pn;if(tt=(Z=Z||{}).sourceEncoding||"Unicode",Bt=Z.outputEncoding,(Z.autoencode||Bt)&&ln[Vt].metadata&&ln[Vt].metadata[tt]&&ln[Vt].metadata[tt].encoding&&(yt=ln[Vt].metadata[tt].encoding,!Bt&&ln[Vt].encoding&&(Bt=ln[Vt].encoding),!Bt&&yt.codePages&&(Bt=yt.codePages[0]),typeof Bt=="string"&&(Bt=yt[Bt]),Bt)){for(Wt=!1,qt=[],Se=0,qe=x.length;Se<qe;Se++)(nn=Bt[x.charCodeAt(Se)])?qt.push(String.fromCharCode(nn)):qt.push(x[Se]),qt[Se].charCodeAt(0)>>8&&(Wt=!0);x=qt.join("")}for(Se=x.length;Wt===void 0&&Se!==0;)x.charCodeAt(Se-1)>>8&&(Wt=!0),Se--;if(!Wt)return x;for(qt=Z.noBOM?[]:[254,255],Se=0,qe=x.length;Se<qe;Se++){if((pn=(nn=x.charCodeAt(Se))>>8)>>8)throw new Error("Character at position "+Se+" of string '"+x+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qt.push(pn),qt.push(nn-(pn<<8))}return String.fromCharCode.apply(void 0,qt)},Nr=C.__private__.pdfEscape=C.pdfEscape=function(x,Z){return Ks(x,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ur=C.__private__.beginPage=function(x){gt[++Yn]=[],dn[Yn]={objId:0,contentsObjId:0,userUnit:Number(p),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},ds(Yn),De(gt[ee])},qa=function(x,Z){var Se,qe,tt;switch(n=Z||n,typeof x=="string"&&(Se=j(x.toLowerCase()),Array.isArray(Se)&&(qe=Se[0],tt=Se[1])),Array.isArray(x)&&(qe=x[0]*Dt,tt=x[1]*Dt),isNaN(qe)&&(qe=o[0],tt=o[1]),(qe>14400||tt>14400)&&(or.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qe=Math.min(14400,qe),tt=Math.min(14400,tt)),o=[qe,tt],n.substr(0,1)){case"l":tt>qe&&(o=[tt,qe]);break;case"p":qe>tt&&(o=[tt,qe])}Ur(o),ko(Zo),le(li),Yo!==0&&le(Yo+" J"),Cr!==0&&le(Cr+" j"),Yt.publish("addPage",{pageNumber:Yn})},Vo=function(x){x>0&&x<=Yn&&(gt.splice(x,1),dn.splice(x,1),Yn--,ee>Yn&&(ee=Yn),this.setPage(ee))},ds=function(x){x>0&&x<=Yn&&(ee=x)},ur=C.__private__.getNumberOfPages=C.getNumberOfPages=function(){return gt.length-1},ps=function(x,Z,Se){var qe,tt=void 0;return Se=Se||{},x=x!==void 0?x:ln[Vt].fontName,Z=Z!==void 0?Z:ln[Vt].fontStyle,qe=x.toLowerCase(),xn[qe]!==void 0&&xn[qe][Z]!==void 0?tt=xn[qe][Z]:xn[x]!==void 0&&xn[x][Z]!==void 0?tt=xn[x][Z]:Se.disableWarning===!1&&or.warn("Unable to look up font label for font '"+x+"', '"+Z+"'. Refer to getFontList() for available fonts."),tt||Se.noFallback||(tt=xn.times[Z])==null&&(tt=xn.times.normal),tt},xo=C.__private__.putInfo=function(){var x=Un(),Z=function(qe){return qe};for(var Se in b!==null&&(Z=Lr.encryptor(x,0)),le("<<"),le("/Producer ("+Nr(Z("jsPDF "+mn.version))+")"),jt)jt.hasOwnProperty(Se)&&jt[Se]&&le("/"+Se.substr(0,1).toUpperCase()+Se.substr(1)+" ("+Nr(Z(jt[Se]))+")");le("/CreationDate ("+Nr(Z(ne))+")"),le(">>"),le("endobj")},Bs=C.__private__.putCatalog=function(x){var Z=(x=x||{}).rootDictionaryObjId||Ji;switch(Un(),le("<<"),le("/Type /Catalog"),le("/Pages "+Z+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Se=""+Oe;Se.substr(Se.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&le("/OpenAction [3 0 R /XYZ null null "+we(Oe)+"]")}switch(Ue||(Ue="continuous"),Ue){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}vt&&le("/PageMode /"+vt),Yt.publish("putCatalog"),le(">>"),le("endobj")},ma=C.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(Ae+1)),le("/Root "+Ae+" 0 R"),le("/Info "+(Ae-1)+" 0 R"),b!==null&&le("/Encrypt "+Lr.oid+" 0 R"),le("/ID [ <"+X+"> <"+X+"> ]"),le(">>")},Js=C.__private__.putHeader=function(){le("%PDF-"+M),le("%")},ga=C.__private__.putXRef=function(){var x="0000000000";le("xref"),le("0 "+(Ae+1)),le("0000000000 65535 f ");for(var Z=1;Z<=Ae;Z++)typeof _e[Z]=="function"?le((x+_e[Z]()).slice(-10)+" 00000 n "):_e[Z]!==void 0?le((x+_e[Z]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},Yi=C.__private__.buildDocument=function(){Re(),De(Ie),Yt.publish("buildDocument"),Js(),_o(),Ms(),Zs(),b!==null&&bo(),xo(),Bs();var x=Ne;return ga(),ma(),le("startxref"),le(""+x),le("%%EOF"),De(gt[ee]),Ie.join(`
`)},Ts=C.__private__.getBlob=function(x){return new Blob([lt(x)],{type:"application/pdf"})},Ys=C.output=C.__private__.output=jn(function(x,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",x){case void 0:return Yi();case"save":C.save(Z.filename);break;case"arraybuffer":return lt(Yi());case"blob":return Ts(Yi());case"bloburi":case"bloburl":if(_n.URL!==void 0&&typeof _n.URL.createObjectURL=="function")return _n.URL&&_n.URL.createObjectURL(Ts(Yi()))||void 0;or.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Se="",qe=Yi();try{Se=Xf(qe)}catch{Se=Xf(unescape(encodeURIComponent(qe)))}return"data:application/pdf;filename="+Z.filename+";base64,"+Se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(_n)==="[object Window]"){var tt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(tt=Z.pdfObjectUrl,yt="");var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+tt+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",qt=_n.open();return qt!==null&&qt.document.write(Bt),qt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(_n)==="[object Window]"){var Wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',nn=_n.open();if(nn!==null){nn.document.write(Wt);var pn=this;nn.document.documentElement.querySelector("#pdfViewer").onload=function(){nn.document.title=Z.filename,nn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(pn.output("bloburl"))}}return nn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(_n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',ir=_n.open();if(ir!==null&&(ir.document.write(Bn),ir.document.title=Z.filename),ir||typeof safari>"u")return ir;break;case"datauri":case"dataurl":return _n.document.location.href=this.output("datauristring",Z);default:return null}}),Go=function(x){return Array.isArray(Kt)===!0&&Kt.indexOf(x)>-1};switch(i){case"pt":Dt=1;break;case"mm":Dt=72/25.4;break;case"cm":Dt=72/2.54;break;case"in":Dt=72;break;case"px":Dt=Go("px_scaling")==1?.75:96/72;break;case"pc":case"em":Dt=12;break;case"ex":Dt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Dt=i}var Lr=null;We(),V();var $a=function(x){return b!==null?Lr.encryptor(x,0):function(Z){return Z}},Ho=C.__private__.getPageInfo=C.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dn[x].objId,pageNumber:x,pageContext:dn[x]}},gn=C.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in dn)if(dn[Z].objId===x)break;return Ho(Z)},yn=C.__private__.getCurrentPageInfo=C.getCurrentPageInfo=function(){return{objId:dn[ee].objId,pageNumber:ee,pageContext:dn[ee]}};C.addPage=function(){return qa.apply(this,arguments),this},C.setPage=function(){return ds.apply(this,arguments),De.call(this,gt[ee]),this},C.insertPage=function(x){return this.addPage(),this.movePage(ee,x),this},C.movePage=function(x,Z){var Se,qe;if(x>Z){Se=gt[x],qe=dn[x];for(var tt=x;tt>Z;tt--)gt[tt]=gt[tt-1],dn[tt]=dn[tt-1];gt[Z]=Se,dn[Z]=qe,this.setPage(Z)}else if(x<Z){Se=gt[x],qe=dn[x];for(var yt=x;yt<Z;yt++)gt[yt]=gt[yt+1],dn[yt]=dn[yt+1];gt[Z]=Se,dn[Z]=qe,this.setPage(Z)}return this},C.deletePage=function(){return Vo.apply(this,arguments),this},C.__private__.text=C.text=function(x,Z,Se,qe,tt){var yt,Bt,qt,Wt,nn,pn,Bn,ir,In,qn=(qe=qe||{}).scope||this;if(typeof x=="number"&&typeof Z=="number"&&(typeof Se=="string"||Array.isArray(Se))){var kr=Se;Se=Z,Z=x,x=kr}if(arguments[3]instanceof on?(O("The transform parameter of text() with a Matrix value"),In=tt):(qt=arguments[4],Wt=arguments[5],sr(Bn=arguments[3])==="object"&&Bn!==null||(typeof qt=="string"&&(Wt=qt,qt=null),typeof Bn=="string"&&(Wt=Bn,Bn=null),typeof Bn=="number"&&(qt=Bn,Bn=null),qe={flags:Bn,angle:qt,align:Wt})),isNaN(Z)||isNaN(Se)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return qn;var wr="",xi=!1,Xn=typeof qe.lineHeightFactor=="number"?qe.lineHeightFactor:Co,Qr=qn.internal.scaleFactor;function Ha(Hn){return Hn=Hn.split("	").join(Array(qe.TabLen||9).join(" ")),Nr(Hn,Bn)}function ei(Hn){for(var $n,_r=Hn.concat(),Qn=[],es=_r.length;es--;)typeof($n=_r.shift())=="string"?Qn.push($n):Array.isArray(Hn)&&($n.length===1||$n[1]===void 0&&$n[2]===void 0)?Qn.push($n[0]):Qn.push([$n[0],$n[1],$n[2]]);return Qn}function Ca(Hn,$n){var _r;if(typeof Hn=="string")_r=$n(Hn)[0];else if(Array.isArray(Hn)){for(var Qn,es,oo=Hn.concat(),bs=[],Za=oo.length;Za--;)typeof(Qn=oo.shift())=="string"?bs.push($n(Qn)[0]):Array.isArray(Qn)&&typeof Qn[0]=="string"&&(es=$n(Qn[0],Qn[1],Qn[2]),bs.push([es[0],es[1],es[2]]));_r=bs}return _r}var Xi=!1,ka=!0;if(typeof x=="string")Xi=!0;else if(Array.isArray(x)){var Os=x.concat();Bt=[];for(var Is,xr=Os.length;xr--;)(typeof(Is=Os.shift())!="string"||Array.isArray(Is)&&typeof Is[0]!="string")&&(ka=!1);Xi=ka}if(Xi===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var ea=ot/qn.internal.scaleFactor,ui=ea*(Xn-1);switch(qe.baseline){case"bottom":Se-=ui;break;case"top":Se+=ea-ui;break;case"hanging":Se+=ea-2*ui;break;case"middle":Se+=ea/2-ui}if((pn=qe.maxWidth||0)>0&&(typeof x=="string"?x=qn.splitTextToSize(x,pn):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(Hn,$n){return Hn.concat(qn.splitTextToSize($n,pn))},[]))),yt={text:x,x:Z,y:Se,options:qe,mutex:{pdfEscape:Nr,activeFontKey:Vt,fonts:ln,activeFontSize:ot}},Yt.publish("preProcessText",yt),x=yt.text,qt=(qe=yt.options).angle,!(In instanceof on)&&qt&&typeof qt=="number"){qt*=Math.PI/180,qe.rotationDirection===0&&(qt=-qt),$===z.ADVANCED&&(qt=-qt);var ti=Math.cos(qt),ta=Math.sin(qt);In=new on(ti,ta,-ta,ti,0,0)}else qt&&qt instanceof on&&(In=qt);$!==z.ADVANCED||In||(In=cs),(nn=qe.charSpace||Jo)!==void 0&&(wr+=ke(G(nn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ir=qe.horizontalScale)!==void 0&&(wr+=ke(100*ir)+` Tz
`),qe.lang;var qr=-1,Rs=qe.renderingMode!==void 0?qe.renderingMode:qe.stroke,Li=qn.internal.getCurrentPageInfo().pageContext;switch(Rs){case 0:case!1:case"fill":qr=0;break;case 1:case!0:case"stroke":qr=1;break;case 2:case"fillThenStroke":qr=2;break;case 3:case"invisible":qr=3;break;case 4:case"fillAndAddForClipping":qr=4;break;case 5:case"strokeAndAddPathForClipping":qr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":qr=6;break;case 7:case"addToPathForClipping":qr=7}var Wa=Li.usedRenderingMode!==void 0?Li.usedRenderingMode:-1;qr!==-1?wr+=qr+` Tr
`:Wa!==-1&&(wr+=`0 Tr
`),qr!==-1&&(Li.usedRenderingMode=qr),Wt=qe.align||"left";var Pr,gs=ot*Xn,Di=qn.internal.pageSize.getWidth(),So=ln[Vt];nn=qe.charSpace||Jo,pn=qe.maxWidth||0,Bn=Object.assign({autoencode:!0,noBOM:!0},qe.flags);var Fs=[],_s=function(Hn){return qn.getStringUnitWidth(Hn,{font:So,charSpace:nn,fontSize:ot,doKerning:!1})*ot/Qr};if(Object.prototype.toString.call(x)==="[object Array]"){var Dr;Bt=ei(x),Wt!=="left"&&(Pr=Bt.map(_s));var Mr,Qi=0;if(Wt==="right"){Z-=Pr[0],x=[],xr=Bt.length;for(var ci=0;ci<xr;ci++)ci===0?(Mr=sn(Z),Dr=Xr(Se)):(Mr=G(Qi-Pr[ci]),Dr=-gs),x.push([Bt[ci],Mr,Dr]),Qi=Pr[ci]}else if(Wt==="center"){Z-=Pr[0]/2,x=[],xr=Bt.length;for(var Oi=0;Oi<xr;Oi++)Oi===0?(Mr=sn(Z),Dr=Xr(Se)):(Mr=G((Qi-Pr[Oi])/2),Dr=-gs),x.push([Bt[Oi],Mr,Dr]),Qi=Pr[Oi]}else if(Wt==="left"){x=[],xr=Bt.length;for(var js=0;js<xr;js++)x.push(Bt[js])}else if(Wt==="justify"&&So.encoding==="Identity-H"){x=[],xr=Bt.length,pn=pn!==0?pn:Di;for(var Ii=0,cr=0;cr<xr;cr++)if(Dr=cr===0?Xr(Se):-gs,Mr=cr===0?sn(Z):Ii,cr<xr-1){var vs=G((pn-Pr[cr])/(Bt[cr].split(" ").length-1)),ni=Bt[cr].split(" ");x.push([ni[0]+" ",Mr,Dr]),Ii=0;for(var $r=1;$r<ni.length;$r++){var Mo=(_s(ni[$r-1]+" "+ni[$r])-_s(ni[$r]))*Qr+vs;$r==ni.length-1?x.push([ni[$r],Mo,0]):x.push([ni[$r]+" ",Mo,0]),Ii-=Mo}}else x.push([Bt[cr],Mr,Dr]);x.push(["",Ii,0])}else{if(Wt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],xr=Bt.length,pn=pn!==0?pn:Di,cr=0;cr<xr;cr++)Dr=cr===0?Xr(Se):-gs,Mr=cr===0?sn(Z):0,cr<xr-1?Fs.push(ke(G((pn-Pr[cr])/(Bt[cr].split(" ").length-1)))):Fs.push(0),x.push([Bt[cr],Mr,Dr])}}var Pa=typeof qe.R2L=="boolean"?qe.R2L:rt;Pa===!0&&(x=Ca(x,function(Hn,$n,_r){return[Hn.split("").reverse().join(""),$n,_r]})),yt={text:x,x:Z,y:Se,options:qe,mutex:{pdfEscape:Nr,activeFontKey:Vt,fonts:ln,activeFontSize:ot}},Yt.publish("postProcessText",yt),x=yt.text,xi=yt.mutex.isHex||!1;var Ea=ln[Vt].encoding;Ea!=="WinAnsiEncoding"&&Ea!=="StandardEncoding"||(x=Ca(x,function(Hn,$n,_r){return[Ha(Hn),$n,_r]})),Bt=ei(x),x=[];for(var Vr,hi,ro,ys=0,na=1,io=Array.isArray(Bt[0])?na:ys,so="",zs=function(Hn,$n,_r){var Qn="";return _r instanceof on?(_r=typeof qe.angle=="number"?Ki(_r,new on(1,0,0,1,Hn,$n)):Ki(new on(1,0,0,1,Hn,$n),_r),$===z.ADVANCED&&(_r=Ki(new on(1,0,0,-1,0,0),_r)),Qn=_r.join(" ")+` Tm
`):Qn=ke(Hn)+" "+ke($n)+` Td
`,Qn},Ri=0;Ri<Bt.length;Ri++){switch(so="",io){case na:ro=(xi?"<":"(")+Bt[Ri][0]+(xi?">":")"),Vr=parseFloat(Bt[Ri][1]),hi=parseFloat(Bt[Ri][2]);break;case ys:ro=(xi?"<":"(")+Bt[Ri]+(xi?">":")"),Vr=sn(Z),hi=Xr(Se)}Fs!==void 0&&Fs[Ri]!==void 0&&(so=Fs[Ri]+` Tw
`),Ri===0?x.push(so+zs(Vr,hi,In)+ro):io===ys?x.push(so+ro):io===na&&x.push(so+zs(Vr,hi,In)+ro)}x=io===ys?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var Or=`BT
/`;return Or+=Vt+" "+ot+` Tf
`,Or+=ke(ot*Xn)+` TL
`,Or+=ms+`
`,Or+=wr,Or+=x,le(Or+="ET"),A[Vt]=!0,qn};var Mi=C.__private__.clip=C.clip=function(x){return le(x==="evenodd"?"W*":"W"),this};C.clipEvenOdd=function(){return Mi("evenodd")},C.__private__.discardPath=C.discardPath=function(){return le("n"),this};var Nn=C.__private__.isValidStyle=function(x){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(Z=!0),Z};C.__private__.setDefaultPathOperation=C.setDefaultPathOperation=function(x){return Nn(x)&&(y=x),this};var _a=C.__private__.getStyle=C.getStyle=function(x){var Z=y;switch(x){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=x}return Z},Wo=C.close=function(){return le("h"),this};C.stroke=function(){return le("S"),this},C.fill=function(x){return Xs("f",x),this},C.fillEvenOdd=function(x){return Xs("f*",x),this},C.fillStroke=function(x){return Xs("B",x),this},C.fillStrokeEvenOdd=function(x){return Xs("B*",x),this};var Xs=function(x,Z){sr(Z)==="object"?va(Z,x):le(x)},Bi=function(x){x===null||$===z.ADVANCED&&x===void 0||(x=_a(x),le(x))};function Ns(x,Z,Se,qe,tt){var yt=new cu(Z||this.boundingBox,Se||this.xStep,qe||this.yStep,this.gState,tt||this.matrix);yt.stream=this.stream;var Bt=x+"$$"+this.cloneIndex+++"$$";return oi(Bt,yt),yt}var va=function(x,Z){var Se=Pi[x.key],qe=zt[Se];if(qe instanceof Bl)le("q"),le(Lo(Z)),qe.gState&&C.setGState(qe.gState),le(x.matrix.toString()+" cm"),le("/"+Se+" sh"),le("Q");else if(qe instanceof cu){var tt=new on(1,0,0,-1,0,no());x.matrix&&(tt=tt.multiply(x.matrix||cs),Se=Ns.call(qe,x.key,x.boundingBox,x.xStep,x.yStep,tt).id),le("q"),le("/Pattern cs"),le("/"+Se+" scn"),qe.gState&&C.setGState(qe.gState),le(Z),le("Q")}},Lo=function(x){switch(x){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},mr=C.moveTo=function(x,Z){return le(ke(G(x))+" "+ke(W(Z))+" m"),this},wi=C.lineTo=function(x,Z){return le(ke(G(x))+" "+ke(W(Z))+" l"),this},Ds=C.curveTo=function(x,Z,Se,qe,tt,yt){return le([ke(G(x)),ke(W(Z)),ke(G(Se)),ke(W(qe)),ke(G(tt)),ke(W(yt)),"c"].join(" ")),this};C.__private__.line=C.line=function(x,Z,Se,qe,tt){if(isNaN(x)||isNaN(Z)||isNaN(Se)||isNaN(qe)||!Nn(tt))throw new Error("Invalid arguments passed to jsPDF.line");return $===z.COMPAT?this.lines([[Se-x,qe-Z]],x,Z,[1,1],tt||"S"):this.lines([[Se-x,qe-Z]],x,Z,[1,1]).stroke()},C.__private__.lines=C.lines=function(x,Z,Se,qe,tt,yt){var Bt,qt,Wt,nn,pn,Bn,ir,In,qn,kr,wr,xi;if(typeof x=="number"&&(xi=Se,Se=Z,Z=x,x=xi),qe=qe||[1,1],yt=yt||!1,isNaN(Z)||isNaN(Se)||!Array.isArray(x)||!Array.isArray(qe)||!Nn(tt)||typeof yt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(mr(Z,Se),Bt=qe[0],qt=qe[1],nn=x.length,kr=Z,wr=Se,Wt=0;Wt<nn;Wt++)(pn=x[Wt]).length===2?(kr=pn[0]*Bt+kr,wr=pn[1]*qt+wr,wi(kr,wr)):(Bn=pn[0]*Bt+kr,ir=pn[1]*qt+wr,In=pn[2]*Bt+kr,qn=pn[3]*qt+wr,kr=pn[4]*Bt+kr,wr=pn[5]*qt+wr,Ds(Bn,ir,In,qn,kr,wr));return yt&&Wo(),Bi(tt),this},C.path=function(x){for(var Z=0;Z<x.length;Z++){var Se=x[Z],qe=Se.c;switch(Se.op){case"m":mr(qe[0],qe[1]);break;case"l":wi(qe[0],qe[1]);break;case"c":Ds.apply(this,qe);break;case"h":Wo()}}return this},C.__private__.rect=C.rect=function(x,Z,Se,qe,tt){if(isNaN(x)||isNaN(Z)||isNaN(Se)||isNaN(qe)||!Nn(tt))throw new Error("Invalid arguments passed to jsPDF.rect");return $===z.COMPAT&&(qe=-qe),le([ke(G(x)),ke(W(Z)),ke(G(Se)),ke(G(qe)),"re"].join(" ")),Bi(tt),this},C.__private__.triangle=C.triangle=function(x,Z,Se,qe,tt,yt,Bt){if(isNaN(x)||isNaN(Z)||isNaN(Se)||isNaN(qe)||isNaN(tt)||isNaN(yt)||!Nn(Bt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Se-x,qe-Z],[tt-Se,yt-qe],[x-tt,Z-yt]],x,Z,[1,1],Bt,!0),this},C.__private__.roundedRect=C.roundedRect=function(x,Z,Se,qe,tt,yt,Bt){if(isNaN(x)||isNaN(Z)||isNaN(Se)||isNaN(qe)||isNaN(tt)||isNaN(yt)||!Nn(Bt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qt=4/3*(Math.SQRT2-1);return tt=Math.min(tt,.5*Se),yt=Math.min(yt,.5*qe),this.lines([[Se-2*tt,0],[tt*qt,0,tt,yt-yt*qt,tt,yt],[0,qe-2*yt],[0,yt*qt,-tt*qt,yt,-tt,yt],[2*tt-Se,0],[-tt*qt,0,-tt,-yt*qt,-tt,-yt],[0,2*yt-qe],[0,-yt*qt,tt*qt,-yt,tt,-yt]],x+tt,Z,[1,1],Bt,!0),this},C.__private__.ellipse=C.ellipse=function(x,Z,Se,qe,tt){if(isNaN(x)||isNaN(Z)||isNaN(Se)||isNaN(qe)||!Nn(tt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*Se,Bt=4/3*(Math.SQRT2-1)*qe;return mr(x+Se,Z),Ds(x+Se,Z-Bt,x+yt,Z-qe,x,Z-qe),Ds(x-yt,Z-qe,x-Se,Z-Bt,x-Se,Z),Ds(x-Se,Z+Bt,x-yt,Z+qe,x,Z+qe),Ds(x+yt,Z+qe,x+Se,Z+Bt,x+Se,Z),Bi(tt),this},C.__private__.circle=C.circle=function(x,Z,Se,qe){if(isNaN(x)||isNaN(Z)||isNaN(Se)||!Nn(qe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,Z,Se,Se,qe)},C.setFont=function(x,Z,Se){return Se&&(Z=Te(Z,Se)),Vt=ps(x,Z,{disableWarning:!1}),this};var Va=C.__private__.getFont=C.getFont=function(){return ln[ps.apply(C,arguments)]};C.__private__.getFontList=C.getFontList=function(){var x,Z,Se={};for(x in xn)if(xn.hasOwnProperty(x))for(Z in Se[x]=[],xn[x])xn[x].hasOwnProperty(Z)&&Se[x].push(Z);return Se},C.addFont=function(x,Z,Se,qe,tt){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&yt.indexOf(arguments[3])!==-1?tt=arguments[3]:arguments[3]&&yt.indexOf(arguments[3])==-1&&(Se=Te(Se,qe)),tt=tt||"Identity-H",wo.call(this,x,Z,Se,tt)};var Co,Zo=e.lineWidth||.200025,Qs=C.__private__.getLineWidth=C.getLineWidth=function(){return Zo},ko=C.__private__.setLineWidth=C.setLineWidth=function(x){return Zo=x,le(ke(G(x))+" w"),this};C.__private__.setLineDash=mn.API.setLineDash=mn.API.setLineDashPattern=function(x,Z){if(x=x||[],Z=Z||0,isNaN(Z)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(Se){return ke(G(Se))}).join(" "),Z=ke(G(Z)),le("["+x+"] "+Z+" d"),this};var ya=C.__private__.getLineHeight=C.getLineHeight=function(){return ot*Co};C.__private__.getLineHeight=C.getLineHeight=function(){return ot*Co};var Mn=C.__private__.setLineHeightFactor=C.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&(Co=x),this},ba=C.__private__.getLineHeightFactor=C.getLineHeightFactor=function(){return Co};Mn(e.lineHeight);var sn=C.__private__.getHorizontalCoordinate=function(x){return G(x)},Xr=C.__private__.getVerticalCoordinate=function(x){return $===z.ADVANCED?x:dn[ee].mediaBox.topRightY-dn[ee].mediaBox.bottomLeftY-G(x)},Po=C.__private__.getHorizontalCoordinateString=C.getHorizontalCoordinateString=function(x){return ke(sn(x))},eo=C.__private__.getVerticalCoordinateString=C.getVerticalCoordinateString=function(x){return ke(Xr(x))},li=e.strokeColor||"0 G";C.__private__.getStrokeColor=C.getDrawColor=function(){return vi(li)},C.__private__.setStrokeColor=C.setDrawColor=function(x,Z,Se,qe){return li=Si({ch1:x,ch2:Z,ch3:Se,ch4:qe,pdfColorType:"draw",precision:2}),le(li),this};var wa=e.fillColor||"0 g";C.__private__.getFillColor=C.getFillColor=function(){return vi(wa)},C.__private__.setFillColor=C.setFillColor=function(x,Z,Se,qe){return wa=Si({ch1:x,ch2:Z,ch3:Se,ch4:qe,pdfColorType:"fill",precision:2}),le(wa),this};var ms=e.textColor||"0 g",Ko=C.__private__.getTextColor=C.getTextColor=function(){return vi(ms)};C.__private__.setTextColor=C.setTextColor=function(x,Z,Se,qe){return ms=Si({ch1:x,ch2:Z,ch3:Se,ch4:qe,pdfColorType:"text",precision:3}),this};var Jo=e.charSpace,Ti=C.__private__.getCharSpace=C.getCharSpace=function(){return parseFloat(Jo||0)};C.__private__.setCharSpace=C.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jo=x,this};var Yo=0;C.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},C.__private__.setLineCap=C.setLineCap=function(x){var Z=C.CapJoinStyles[x];if(Z===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yo=Z,le(Z+" J"),this};var Cr=0;C.__private__.setLineJoin=C.setLineJoin=function(x){var Z=C.CapJoinStyles[x];if(Z===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cr=Z,le(Z+" j"),this},C.__private__.setLineMiterLimit=C.__private__.setMiterLimit=C.setLineMiterLimit=C.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(ke(G(x))+" M"),this},C.GState=ah,C.setGState=function(x){(x=typeof x=="string"?Fn[Jr[x]]:Ga(null,x)).equals(_i)||(le("/"+x.id+" gs"),_i=x)};var Ga=function(x,Z){if(!x||!Jr[x]){var Se=!1;for(var qe in Fn)if(Fn.hasOwnProperty(qe)&&Fn[qe].equals(Z)){Se=!0;break}if(Se)Z=Fn[qe];else{var tt="GS"+(Object.keys(Fn).length+1).toString(10);Fn[tt]=Z,Z.id=tt}return x&&(Jr[x]=Z.id),Yt.publish("addGState",Z),Z}};C.addGState=function(x,Z){return Ga(x,Z),this},C.saveGraphicsState=function(){return le("q"),Jn.push({key:Vt,size:ot,color:ms}),this},C.restoreGraphicsState=function(){le("Q");var x=Jn.pop();return Vt=x.key,ot=x.size,ms=x.color,_i=null,this},C.setCurrentTransformationMatrix=function(x){return le(x.toString()+" cm"),this},C.comment=function(x){return le("#"+x),this};var Eo=function(x,Z){var Se=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Se},set:function(yt){isNaN(yt)||(Se=parseFloat(yt))}});var qe=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qe},set:function(yt){isNaN(yt)||(qe=parseFloat(yt))}});var tt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return tt},set:function(yt){tt=yt.toString()}}),this},Ni=function(x,Z,Se,qe){Eo.call(this,x,Z),this.type="rect";var tt=Se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return tt},set:function(Bt){isNaN(Bt)||(tt=parseFloat(Bt))}});var yt=qe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(Bt){isNaN(Bt)||(yt=parseFloat(Bt))}}),this},Xo=function(){this.page=Yn,this.currentPage=ee,this.pages=gt.slice(0),this.pagesContext=dn.slice(0),this.x=Pn,this.y=tn,this.matrix=Kn,this.width=to(ee),this.height=no(ee),this.outputDestination=fe,this.id="",this.objectNumber=-1};Xo.prototype.restore=function(){Yn=this.page,ee=this.currentPage,dn=this.pagesContext,gt=this.pages,Pn=this.x,tn=this.y,Kn=this.matrix,Ao(ee,this.width),gr(ee,this.height),fe=this.outputDestination};var xa=function(x,Z,Se,qe,tt){Ei.push(new Xo),Yn=ee=0,gt=[],Pn=x,tn=Z,Kn=tt,Ur([Se,qe])},La=function(x){if(us[x])Ei.pop().restore();else{var Z=new Xo,Se="Xo"+(Object.keys(lr).length+1).toString(10);Z.id=Se,us[x]=Se,lr[Se]=Z,Yt.publish("addFormObject",Z),Ei.pop().restore()}};for(var Qo in C.beginFormObject=function(x,Z,Se,qe,tt){return xa(x,Z,Se,qe,tt),this},C.endFormObject=function(x){return La(x),this},C.doFormObject=function(x,Z){var Se=lr[us[x]];return le("q"),le(Z.toString()+" cm"),le("/"+Se.id+" Do"),le("Q"),this},C.getFormObject=function(x){var Z=lr[us[x]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},C.save=function(x,Z){return x=x||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(Sl(Ts(Yi()),x),typeof Sl.unload=="function"&&_n.setTimeout&&setTimeout(Sl.unload,911),this):new Promise(function(Se,qe){try{var tt=Sl(Ts(Yi()),x);typeof Sl.unload=="function"&&_n.setTimeout&&setTimeout(Sl.unload,911),Se(tt)}catch(yt){qe(yt.message)}})},mn.API)mn.API.hasOwnProperty(Qo)&&(Qo==="events"&&mn.API.events.length?function(x,Z){var Se,qe,tt;for(tt=Z.length-1;tt!==-1;tt--)Se=Z[tt][0],qe=Z[tt][1],x.subscribe.apply(x,[Se].concat(typeof qe=="function"?[qe]:qe))}(Yt,mn.API.events):C[Qo]=mn.API[Qo]);var to=C.getPageWidth=function(x){return(dn[x=x||ee].mediaBox.topRightX-dn[x].mediaBox.bottomLeftX)/Dt},Ao=C.setPageWidth=function(x,Z){dn[x].mediaBox.topRightX=Z*Dt+dn[x].mediaBox.bottomLeftX},no=C.getPageHeight=function(x){return(dn[x=x||ee].mediaBox.topRightY-dn[x].mediaBox.bottomLeftY)/Dt},gr=C.setPageHeight=function(x,Z){dn[x].mediaBox.topRightY=Z*Dt+dn[x].mediaBox.bottomLeftY};return C.internal={pdfEscape:Nr,getStyle:_a,getFont:Va,getFontSize:Le,getCharSpace:Ti,getTextColor:Ko,getLineHeight:ya,getLineHeightFactor:ba,getLineWidth:Qs,write:Ze,getHorizontalCoordinate:sn,getVerticalCoordinate:Xr,getCoordinateString:Po,getVerticalCoordinateString:eo,collections:{},newObject:Un,newAdditionalObject:go,newObjectDeferred:Ut,newObjectDeferredBegin:ai,getFilters:Yr,putStream:yi,events:Yt,scaleFactor:Dt,pageSize:{getWidth:function(){return to(ee)},setWidth:function(x){Ao(ee,x)},getHeight:function(){return no(ee)},setHeight:function(x){gr(ee,x)}},encryptionOptions:b,encryption:Lr,getEncryptor:$a,output:Ys,getNumberOfPages:ur,pages:gt,out:le,f2:we,f3:R,getPageInfo:Ho,getPageInfoByObjId:gn,getCurrentPageInfo:yn,getPDFVersion:N,Point:Eo,Rectangle:Ni,Matrix:on,hasHotfix:Go},Object.defineProperty(C.internal.pageSize,"width",{get:function(){return to(ee)},set:function(x){Ao(ee,x)},enumerable:!0,configurable:!0}),Object.defineProperty(C.internal.pageSize,"height",{get:function(){return no(ee)},set:function(x){gr(ee,x)},enumerable:!0,configurable:!0}),bn.call(C,Qe),Vt="F1",qa(o,n),Yt.publish("initialized"),C}lu.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},lu.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},lu.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},lu.prototype.processOwnerPassword=function(e,t){return ed(Qf(t).substr(0,5),e)},lu.prototype.encryptor=function(e,t){var n=Qf(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return ed(n,i)}},ah.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||sr(e)!==sr(this))return!1;var i=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&i--;return i===0},mn.API={events:[]},mn.version="3.0.0";var Br=mn.API,Md=1,Gl=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nu=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ln=function(e){return e.toFixed(2)},il=function(e){return e.toFixed(5)};Br.__acroform__={};var As=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},y0=function(e){return e*Md},sa=function(e){var t=new t1,n=Xt.internal.getHeight(e)||0,i=Xt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ln(i)),Number(Ln(n))],t},ow=Br.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},aw=Br.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},lw=Br.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ir=Br.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return lw(e,t-1)},Rr=Br.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ow(e,t-1)},Fr=Br.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return aw(e,t-1)},uw=Br.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,o=e[0],l=e[1],c=e[2],p=e[3],m={};return m.lowerLeft_X=n(o)||0,m.lowerLeft_Y=i(l+p)||0,m.upperRight_X=n(o+c)||0,m.upperRight_Y=i(l)||0,[Number(Ln(m.lowerLeft_X)),Number(Ln(m.lowerLeft_Y)),Number(Ln(m.upperRight_X)),Number(Ln(m.upperRight_Y))]},cw=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,i=td(e,n),o=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+o+" "+Ln(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var l=sa(e);return l.scope=e.scope,l.stream=t.join(`
`),l}},td=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=e.multiline?o.map(function(R){return R.split(`
`)}):o.map(function(R){return[R]});var l=n,c=Xt.internal.getHeight(e)||0;c=c<0?-c:c;var p=Xt.internal.getWidth(e)||0;p=p<0?-p:p;var m=function(R,G,he){if(R+1<o.length){var W=G+" "+o[R+1][0];return Sc(W,e,he).width<=p-4}return!1};l++;e:for(;l>0;){t="",l--;var y,b,w=Sc("3",e,l).height,A=e.multiline?c-l:(c-w)/2,C=A+=2,M=0,N=0,F=0;if(l<=0){t=`(...) Tj
`,t+="% Width of Text: "+Sc(t,e,l=12).width+", FieldWidth:"+p+`
`;break}for(var j="",z=0,$=0;$<o.length;$++)if(o.hasOwnProperty($)){var pe=!1;if(o[$].length!==1&&F!==o[$].length-1){if((w+2)*(z+2)+2>c)continue e;j+=o[$][F],pe=!0,N=$,$--}else{j=(j+=o[$][F]+" ").substr(j.length-1)==" "?j.substr(0,j.length-1):j;var Ce=parseInt($),Te=m(Ce,j,l),ke=$>=o.length-1;if(Te&&!ke){j+=" ",F=0;continue}if(Te||ke){if(ke)N=Ce;else if(e.multiline&&(w+2)*(z+2)+2>c)continue e}else{if(!e.multiline||(w+2)*(z+2)+2>c)continue e;N=Ce}}for(var O="",oe=M;oe<=N;oe++){var we=o[oe];if(e.multiline){if(oe===N){O+=we[F]+" ",F=(F+1)%we.length;continue}if(oe===M){O+=we[we.length-1]+" ";continue}}O+=we[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,b=Sc(O,e,l).width,e.textAlign){case"right":y=p-b-2;break;case"center":y=(p-b)/2;break;case"left":default:y=2}t+=Ln(y)+" "+Ln(C)+` Td
`,t+="("+Gl(O)+`) Tj
`,t+=-Ln(y)+` 0 Td
`,C=-(l+2),b=0,M=pe?N:N+1,z++,j=""}break}return i.text=t,i.fontSize=l,i},Sc=function(e,t,n){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},hw={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},fw=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},dw=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=n,o=e[n];t.internal.newObjectDeferredBegin(o.objId,!0),sr(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete e[i]}},pw=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(jo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(hw)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Md=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new n1,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];l.objId=void 0,l.hasAnnotation&&fw(l,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(i,o){var l=!i;for(var c in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(c)){var p=i[c],m=[],y=p.Rect;if(p.Rect&&(p.Rect=uw(p.Rect,o)),o.internal.newObjectDeferredBegin(p.objId,!0),p.DA=Xt.createDefaultAppearanceStream(p),sr(p)==="object"&&typeof p.getKeyValueListForStream=="function"&&(m=p.getKeyValueListForStream()),p.Rect=y,p.hasAppearanceStream&&!p.appearanceStreamContent){var b=cw(p);m.push({key:"AP",value:"<</N "+b+">>"}),o.internal.acroformPlugin.xForms.push(b)}if(p.appearanceStreamContent){var w="";for(var A in p.appearanceStreamContent)if(p.appearanceStreamContent.hasOwnProperty(A)){var C=p.appearanceStreamContent[A];if(w+="/"+A+" ",w+="<<",Object.keys(C).length>=1||Array.isArray(C)){for(var c in C)if(C.hasOwnProperty(c)){var M=C[c];typeof M=="function"&&(M=M.call(o,p)),w+="/"+c+" "+M+" ",o.internal.acroformPlugin.xForms.indexOf(M)>=0||o.internal.acroformPlugin.xForms.push(M)}}else typeof(M=C)=="function"&&(M=M.call(o,p)),w+="/"+c+" "+M,o.internal.acroformPlugin.xForms.indexOf(M)>=0||o.internal.acroformPlugin.xForms.push(M);w+=">>"}m.push({key:"AP",value:`<<
`+w+">>"})}o.internal.putStream({additionalKeyValues:m,objectId:p.objId}),o.internal.out("endobj")}l&&dw(o.internal.acroformPlugin.xForms,o)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},e1=Br.__acroform__.arrayToPdfArray=function(e,t,n){var i=function(c){return c};if(Array.isArray(e)){for(var o="[",l=0;l<e.length;l++)switch(l!==0&&(o+=" "),sr(e[l])){case"boolean":case"number":case"object":o+=e[l].toString();break;case"string":e[l].substr(0,1)!=="/"?(t!==void 0&&n&&(i=n.internal.getEncryptor(t)),o+="("+Gl(i(e[l].toString()))+")"):o+=e[l].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},vf=function(e,t,n){var i=function(o){return o};return t!==void 0&&n&&(i=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Gl(i(e))+")"},la=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};la.prototype.toString=function(){return this.objId+" 0 R"},la.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},la.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var i=t[n],o=this[i];o&&(Array.isArray(o)?e.push({key:i,value:e1(o,this.objId,this.scope)}):o instanceof la?(o.scope=this.scope,e.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&e.push({key:i,value:o}))}return e};var t1=function(){la.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};As(t1,la);var n1=function(){la.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Gl(n(e))+")"}},set:function(n){e=n}})};As(n1,la);var jo=function e(){la.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');t=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ir(t,3)},set:function(j){j?this.F=Rr(t,3):this.F=Fr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');n=j}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(j){i=j!==void 0?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(j){i[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(j){i[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(j){i[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(j){i[3]=j}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof lh)return;l="FieldObject"+e.FieldNum++}var j=function(z){return z};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+Gl(j(l))+")"},set:function(j){l=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(j){l=j}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var p="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return p},set:function(j){p=j}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(j){m=j}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/Md:y},set:function(j){y=j}});var b="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return b},set:function(j){b=j}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof lh||this instanceof Fl))return vf(w,this.objId,this.scope)},set:function(j){j=j.toString(),w=j}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof gi?A:vf(A,this.objId,this.scope)},set:function(j){j=j.toString(),A=this instanceof gi?j:j.substr(0,1)==="("?nu(j.substr(1,j.length-2)):nu(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof gi?nu(A.substr(1,A.length-1)):A},set:function(j){j=j.toString(),A=this instanceof gi?"/"+j:j}});var C=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(C)return C},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(C)return this instanceof gi?C:vf(C,this.objId,this.scope)},set:function(j){j=j.toString(),C=this instanceof gi?j:j.substr(0,1)==="("?nu(j.substr(1,j.length-2)):nu(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof gi?nu(C.substr(1,C.length-1)):C},set:function(j){j=j.toString(),C=this instanceof gi?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var M,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(j){j=!!j,N=j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(M)return M},set:function(j){M=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,1)},set:function(j){j?this.Ff=Rr(this.Ff,1):this.Ff=Fr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,2)},set:function(j){j?this.Ff=Rr(this.Ff,2):this.Ff=Fr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,3)},set:function(j){j?this.Ff=Rr(this.Ff,3):this.Ff=Fr(this.Ff,3)}});var F=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(F!==null)return F},set:function(j){if([0,1,2].indexOf(j)===-1)throw new Error('Invalid value "'+j+'" for attribute Q supplied.');F=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(F){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:F=2;break;case"center":case 1:F=1;break;case"left":case 0:default:F=0}}})};As(jo,la);var pu=function(){jo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return e1(t,this.objId,this.scope)},set:function(n){var i,o;o=[],typeof(i=n)=="string"&&(o=function(l,c,p){p||(p=1);for(var m,y=[];m=c.exec(l);)y.push(m[p]);return y}(i,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,18)},set:function(n){n?this.Ff=Rr(this.Ff,18):this.Ff=Fr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Rr(this.Ff,19):this.Ff=Fr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,20)},set:function(n){n?(this.Ff=Rr(this.Ff,20),t.sort()):this.Ff=Fr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,22)},set:function(n){n?this.Ff=Rr(this.Ff,22):this.Ff=Fr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,23)},set:function(n){n?this.Ff=Rr(this.Ff,23):this.Ff=Fr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,27)},set:function(n){n?this.Ff=Rr(this.Ff,27):this.Ff=Fr(this.Ff,27)}}),this.hasAppearanceStream=!1};As(pu,jo);var mu=function(){pu.call(this),this.fontName="helvetica",this.combo=!1};As(mu,pu);var gu=function(){mu.call(this),this.combo=!0};As(gu,mu);var Uc=function(){gu.call(this),this.edit=!0};As(Uc,gu);var gi=function(){jo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,15)},set:function(n){n?this.Ff=Rr(this.Ff,15):this.Ff=Fr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,16)},set:function(n){n?this.Ff=Rr(this.Ff,16):this.Ff=Fr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,17)},set:function(n){n?this.Ff=Rr(this.Ff,17):this.Ff=Fr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,26)},set:function(n){n?this.Ff=Rr(this.Ff,26):this.Ff=Fr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,o=[];for(i in o.push("<<"),t)o.push("/"+i+" ("+Gl(n(t[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){sr(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};As(gi,jo);var qc=function(){gi.call(this),this.pushButton=!0};As(qc,gi);var _u=function(){gi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};As(_u,gi);var lh=function(){var e,t;jo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(o){e=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(p){return p};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,c=[];for(l in c.push("<<"),i)c.push("/"+l+" ("+Gl(o(i[l]))+")");return c.push(">>"),c.join(`
`)},set:function(o){sr(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};As(lh,jo),_u.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},_u.prototype.createOption=function(e){var t=new lh;return t.Parent=this,t.optionName=e,this.Kids.push(t),mw.call(this.scope,t),t};var $c=function(){gi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xt.CheckBox.createAppearanceStream()};As($c,gi);var Fl=function(){jo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,13)},set:function(t){t?this.Ff=Rr(this.Ff,13):this.Ff=Fr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,21)},set:function(t){t?this.Ff=Rr(this.Ff,21):this.Ff=Fr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,23)},set:function(t){t?this.Ff=Rr(this.Ff,23):this.Ff=Fr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,24)},set:function(t){t?this.Ff=Rr(this.Ff,24):this.Ff=Fr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,25)},set:function(t){t?this.Ff=Rr(this.Ff,25):this.Ff=Fr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,26)},set:function(t){t?this.Ff=Rr(this.Ff,26):this.Ff=Fr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};As(Fl,jo);var Vc=function(){Fl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ir(this.Ff,14)},set:function(e){e?this.Ff=Rr(this.Ff,14):this.Ff=Fr(this.Ff,14)}}),this.password=!0};As(Vc,Fl);var Xt={CheckBox:{createAppearanceStream:function(){return{N:{On:Xt.CheckBox.YesNormal},D:{On:Xt.CheckBox.YesPushDown,Off:Xt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,o=e.scope.__private__.encodeColorString(e.color),l=td(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Ln(Xt.internal.getWidth(e))+" "+Ln(Xt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Ln(l.fontSize)+" Tf "+o),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=sa(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=[],l=Xt.internal.getHeight(e),c=Xt.internal.getWidth(e),p=td(e,e.caption);return o.push("1 g"),o.push("0 0 "+Ln(c)+" "+Ln(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Ln(c-1)+" "+Ln(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+Ln(p.fontSize)+" Tf "+i),o.push(p.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ln(Xt.internal.getWidth(e))+" "+Ln(Xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Xt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Xt.RadioButton.Circle.YesNormal,t.D[e]=Xt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=sa(e);t.scope=e.scope;var n=[],i=Xt.internal.getWidth(e)<=Xt.internal.getHeight(e)?Xt.internal.getWidth(e)/4:Xt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var o=Xt.internal.Bezier_C,l=Number((i*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+il(Xt.internal.getWidth(e)/2)+" "+il(Xt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[],i=Xt.internal.getWidth(e)<=Xt.internal.getHeight(e)?Xt.internal.getWidth(e)/4:Xt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),l=Number((o*Xt.internal.Bezier_C).toFixed(5)),c=Number((i*Xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+il(Xt.internal.getWidth(e)/2)+" "+il(Xt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+il(Xt.internal.getWidth(e)/2)+" "+il(Xt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+c+" "+c+" "+i+" 0 "+i+" c"),n.push("-"+c+" "+i+" -"+i+" "+c+" -"+i+" 0 c"),n.push("-"+i+" -"+c+" -"+c+" -"+i+" 0 -"+i+" c"),n.push(c+" -"+i+" "+i+" -"+c+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[],i=Xt.internal.getWidth(e)<=Xt.internal.getHeight(e)?Xt.internal.getWidth(e)/4:Xt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),l=Number((o*Xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+il(Xt.internal.getWidth(e)/2)+" "+il(Xt.internal.getHeight(e)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Xt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Xt.RadioButton.Cross.YesNormal,t.D[e]=Xt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=sa(e);t.scope=e.scope;var n=[],i=Xt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Ln(Xt.internal.getWidth(e)-2)+" "+Ln(Xt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ln(i.x1.x)+" "+Ln(i.x1.y)+" m"),n.push(Ln(i.x2.x)+" "+Ln(i.x2.y)+" l"),n.push(Ln(i.x4.x)+" "+Ln(i.x4.y)+" m"),n.push(Ln(i.x3.x)+" "+Ln(i.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=Xt.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+Ln(Xt.internal.getWidth(e))+" "+Ln(Xt.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Ln(Xt.internal.getWidth(e)-2)+" "+Ln(Xt.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(Ln(n.x1.x)+" "+Ln(n.x1.y)+" m"),i.push(Ln(n.x2.x)+" "+Ln(n.x2.y)+" l"),i.push(Ln(n.x4.x)+" "+Ln(n.x4.y)+" m"),i.push(Ln(n.x3.x)+" "+Ln(n.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=sa(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ln(Xt.internal.getWidth(e))+" "+Ln(Xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Xt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Xt.internal.getWidth(e),n=Xt.internal.getHeight(e),i=Math.min(t,n);return{x1:{x:(t-i)/2,y:(n-i)/2+i},x2:{x:(t-i)/2+i,y:(n-i)/2},x3:{x:(t-i)/2,y:(n-i)/2},x4:{x:(t-i)/2+i,y:(n-i)/2+i}}}},Xt.internal.getWidth=function(e){var t=0;return sr(e)==="object"&&(t=y0(e.Rect[2])),t},Xt.internal.getHeight=function(e){var t=0;return sr(e)==="object"&&(t=y0(e.Rect[3])),t};var mw=Br.addField=function(e){if(pw(this,e),!(e instanceof jo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Br.AcroFormChoiceField=pu,Br.AcroFormListBox=mu,Br.AcroFormComboBox=gu,Br.AcroFormEditBox=Uc,Br.AcroFormButton=gi,Br.AcroFormPushButton=qc,Br.AcroFormRadioButton=_u,Br.AcroFormCheckBox=$c,Br.AcroFormTextField=Fl,Br.AcroFormPasswordField=Vc,Br.AcroFormAppearance=Xt,Br.AcroForm={ChoiceField:pu,ListBox:mu,ComboBox:gu,EditBox:Uc,Button:gi,PushButton:qc,RadioButton:_u,CheckBox:$c,TextField:Fl,PasswordField:Vc,Appearance:Xt},mn.AcroForm={ChoiceField:pu,ListBox:mu,ComboBox:gu,EditBox:Uc,Button:gi,PushButton:qc,RadioButton:_u,CheckBox:$c,TextField:Fl,PasswordField:Vc,Appearance:Xt};mn.AcroForm;function r1(e){return e.reduce(function(t,n,i){return t[n]=i,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(R,G){var he,W,ne,X,se,V=t;if((G=G||t)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(Te(R))for(se in n)for(ne=n[se],he=0;he<ne.length;he+=1){for(X=!0,W=0;W<ne[he].length;W+=1)if(ne[he][W]!==void 0&&ne[he][W]!==R[W]){X=!1;break}if(X===!0){V=se;break}}else for(se in n)for(ne=n[se],he=0;he<ne.length;he+=1){for(X=!0,W=0;W<ne[he].length;W+=1)if(ne[he][W]!==void 0&&ne[he][W]!==R.charCodeAt(W)){X=!1;break}if(X===!0){V=se;break}}return V===t&&G!==t&&(V=G),V},o=function R(G){for(var he=this.internal.write,W=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:G.width}),X.push({key:"Height",value:G.height}),G.colorSpace===F.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===F.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)){for(var se="",V=0,Y=G.transparency.length;V<Y;V++)se+=G.transparency[V]+" "+G.transparency[V]+" ";X.push({key:"Mask",value:"["+se+"]"})}G.sMask!==void 0&&X.push({key:"SMask",value:G.objectId+1+" 0 R"});var ue=G.filter!==void 0?["/"+G.filter]:void 0;if(W({data:G.data,additionalKeyValues:X,alreadyAppliedFilters:ue,objectId:G.objectId}),he("endobj"),"sMask"in G&&G.sMask!==void 0){var We="/Predictor "+G.predictor+" /Colors 1 /BitsPerComponent "+G.bitsPerComponent+" /Columns "+G.width,U={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:G.bitsPerComponent,decodeParameters:We,data:G.sMask};"filter"in G&&(U.filter=G.filter),R.call(this,U)}if(G.colorSpace===F.INDEXED){var ee=this.internal.newObject();W({data:O(new Uint8Array(G.palette)),objectId:ee}),he("endobj")}},l=function(){var R=this.internal.collections.addImage_images;for(var G in R)o.call(this,R[G])},c=function(){var R,G=this.internal.collections.addImage_images,he=this.internal.write;for(var W in G)he("/I"+(R=G[W]).index,R.objectId,"0","R")},p=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},m=function(){var R=this.internal.collections.addImage_images;return p.call(this),R},y=function(){return Object.keys(this.internal.collections.addImage_images).length},b=function(R){return typeof e["process"+R.toUpperCase()]=="function"},w=function(R){return sr(R)==="object"&&R.nodeType===1},A=function(R,G){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var he=""+R.getAttribute("src");if(he.indexOf("data:image/")===0)return Yu(unescape(he).split("base64,").pop());var W=e.loadFile(he,!0);if(W!==void 0)return W}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ne;switch(G){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return Yu(R.toDataURL(ne,1).split("base64,").pop())}},C=function(R){var G=this.internal.collections.addImage_images;if(G){for(var he in G)if(R===G[he].alias)return G[he]}},M=function(R,G,he){return R||G||(R=-96,G=-96),R<0&&(R=-1*he.width*72/R/this.internal.scaleFactor),G<0&&(G=-1*he.height*72/G/this.internal.scaleFactor),R===0&&(R=G*he.width/he.height),G===0&&(G=R*he.height/he.width),[R,G]},N=function(R,G,he,W,ne,X){var se=M.call(this,he,W,ne),V=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,ue=m.call(this);if(he=se[0],W=se[1],ue[ne.index]=ne,X){X*=Math.PI/180;var We=Math.cos(X),U=Math.sin(X),ee=function(xe){return xe.toFixed(4)},de=[ee(We),ee(U),ee(-1*U),ee(We),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,V(R),Y(G+W),"cm"].join(" ")),this.internal.write(de.join(" ")),this.internal.write([V(he),"0","0",V(W),"0","0","cm"].join(" "))):this.internal.write([V(he),"0","0",V(W),V(R),Y(G+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},F=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},z=e.__addimage__.sHashCode=function(R){var G,he,W=0;if(typeof R=="string")for(he=R.length,G=0;G<he;G++)W=(W<<5)-W+R.charCodeAt(G),W|=0;else if(Te(R))for(he=R.byteLength/2,G=0;G<he;G++)W=(W<<5)-W+R[G],W|=0;return W},$=e.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var G=!0;return R.length===0&&(G=!1),R.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(G=!1),G},pe=e.__addimage__.extractImageFromDataUrl=function(R){var G=(R=R||"").split("base64,"),he=null;if(G.length===2){var W=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(G[0]);Array.isArray(W)&&(he={mimeType:W[1],charset:W[2],data:G[1]})}return he},Ce=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(R){return Ce()&&R instanceof ArrayBuffer};var Te=e.__addimage__.isArrayBufferView=function(R){return Ce()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},ke=e.__addimage__.binaryStringToUint8Array=function(R){for(var G=R.length,he=new Uint8Array(G),W=0;W<G;W++)he[W]=R.charCodeAt(W);return he},O=e.__addimage__.arrayBufferToBinaryString=function(R){for(var G="",he=Te(R)?R:new Uint8Array(R),W=0;W<he.length;W+=8192)G+=String.fromCharCode.apply(null,he.subarray(W,W+8192));return G};e.addImage=function(){var R,G,he,W,ne,X,se,V,Y;if(typeof arguments[1]=="number"?(G=t,he=arguments[1],W=arguments[2],ne=arguments[3],X=arguments[4],se=arguments[5],V=arguments[6],Y=arguments[7]):(G=arguments[1],he=arguments[2],W=arguments[3],ne=arguments[4],X=arguments[5],se=arguments[6],V=arguments[7],Y=arguments[8]),sr(R=arguments[0])==="object"&&!w(R)&&"imageData"in R){var ue=R;R=ue.imageData,G=ue.format||G||t,he=ue.x||he||0,W=ue.y||W||0,ne=ue.w||ue.width||ne,X=ue.h||ue.height||X,se=ue.alias||se,V=ue.compression||V,Y=ue.rotation||ue.angle||Y}var We=this.internal.getFilters();if(V===void 0&&We.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(he)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var U=oe.call(this,R,G,se,V);return N.call(this,he,W,ne,X,U,Y),this};var oe=function(R,G,he,W){var ne,X,se;if(typeof R=="string"&&i(R)===t){R=unescape(R);var V=we(R,!1);(V!==""||(V=e.loadFile(R,!0))!==void 0)&&(R=V)}if(w(R)&&(R=A(R,G)),G=i(R,G),!b(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((se=he)==null||se.length===0)&&(he=function(Y){return typeof Y=="string"||Te(Y)?z(Y):Te(Y.data)?z(Y.data):null}(R)),(ne=C.call(this,he))||(Ce()&&(R instanceof Uint8Array||G==="RGBA"||(X=R,R=ke(R))),ne=this["process"+G.toUpperCase()](R,y.call(this),he,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in e.image_compression?Y:j.NONE}(W),X)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},we=e.__addimage__.convertBase64ToBinaryString=function(R,G){var he;G=typeof G!="boolean"||G;var W,ne="";if(typeof R=="string"){W=(he=pe(R))!==null?he.data:R;try{ne=Yu(W)}catch(X){if(G)throw $(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};e.getImageProperties=function(R){var G,he,W="";if(w(R)&&(R=A(R)),typeof R=="string"&&i(R)===t&&((W=we(R,!1))===""&&(W=e.loadFile(R)||""),R=W),he=i(R),!b(he))throw new Error("addImage does not support files of type '"+he+"', please ensure that a plugin for '"+he+"' support is added.");if(!Ce()||R instanceof Uint8Array||(R=ke(R)),!(G=this["process"+he.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=he,G}})(mn.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};mn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var i,o,l,c=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(n.objId),y=n.pageContext.annotations,b=!1,w=0;w<y.length&&!b;w++)switch((i=y[w]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(b=!0);break;case"reference":case"text":case"freetext":b=!0}if(b!=0){this.internal.write("/Annots [");for(var A=0;A<y.length;A++){i=y[A];var C=this.internal.pdfEscape,M=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),F=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(N.objId),z=i.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+c(i.bounds.x)+" "+p(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w)+" "+p(i.bounds.y)+"] ")+"/Contents ("+C(j(i.contents))+")",l+=" /Popup "+F.objId+" 0 R",l+=" /P "+m.objId+" 0 R",l+=" /T ("+C(j(z))+") >>",N.content=l;var $=N.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+c(i.bounds.x+30)+" "+p(i.bounds.y+i.bounds.h)+" "+c(i.bounds.x+i.bounds.w+30)+" "+p(i.bounds.y)+"] ")+" /Parent "+$,i.open&&(l+=" /Open true"),l+=" >>",F.content=l,this.internal.write(N.objId,"0 R",F.objId,"0 R");break;case"freetext":o="/Rect ["+c(i.bounds.x)+" "+p(i.bounds.y)+" "+c(i.bounds.x+i.bounds.w)+" "+p(i.bounds.y+i.bounds.h)+"] ";var pe=i.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+C(M(i.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+pe+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(i.options.name){var Ce=this.annotations._nameMap[i.options.name];i.options.pageNumber=Ce.page,i.options.top=Ce.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",l="",i.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+C(M(i.options.url))+") >>";else if(i.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,l+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var Te=p(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),l+=" /XYZ "+i.options.left+" "+Te+" "+i.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},e.link=function(n,i,o,l,c){var p=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;p.pageContext.annotations.push({finalBounds:{x:m(n),y:y(i),w:m(n+o),h:y(i+l)},options:c,type:"link"})},e.textWithLink=function(n,i,o,l){var c,p,m=this.getTextWidth(n),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){p=l.maxWidth;var b=this.splitTextToSize(n,p).length;c=Math.ceil(y*b)}else p=m,c=y;return this.text(n,i,o,l),o+=.2*y,l.align==="center"&&(i-=m/2),l.align==="right"&&(i-=m),this.link(i,o-y,p,c,l),m},e.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(mn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];e.__arabicParser__={};var l=e.__arabicParser__.isInArabicSubstitutionA=function(N){return t[N.charCodeAt(0)]!==void 0},c=e.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},p=e.__arabicParser__.isArabicEndLetter=function(N){return c(N)&&l(N)&&t[N.charCodeAt(0)].length<=2},m=e.__arabicParser__.isArabicAlfLetter=function(N){return c(N)&&o.indexOf(N.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return c(N)&&l(N)&&t[N.charCodeAt(0)].length>=1};var y=e.__arabicParser__.arabicLetterHasFinalForm=function(N){return c(N)&&l(N)&&t[N.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(N){return c(N)&&l(N)&&t[N.charCodeAt(0)].length>=3};var b=e.__arabicParser__.arabicLetterHasMedialForm=function(N){return c(N)&&l(N)&&t[N.charCodeAt(0)].length==4},w=e.__arabicParser__.resolveLigatures=function(N){var F=0,j=n,z="",$=0;for(F=0;F<N.length;F+=1)j[N.charCodeAt(F)]!==void 0?($++,typeof(j=j[N.charCodeAt(F)])=="number"&&(z+=String.fromCharCode(j),j=n,$=0),F===N.length-1&&(j=n,z+=N.charAt(F-($-1)),F-=$-1,$=0)):(j=n,z+=N.charAt(F-$),F-=$,$=0);return z};e.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&i[N.charCodeAt(0)]!==void 0};var A=e.__arabicParser__.getCorrectForm=function(N,F,j){return c(N)?l(N)===!1?-1:!y(N)||!c(F)&&!c(j)||!c(j)&&p(F)||p(N)&&!c(F)||p(N)&&m(F)||p(N)&&p(F)?0:b(N)&&c(F)&&!p(F)&&c(j)&&y(j)?3:p(N)||!c(j)?1:2:-1},C=function(N){var F=0,j=0,z=0,$="",pe="",Ce="",Te=(N=N||"").split("\\s+"),ke=[];for(F=0;F<Te.length;F+=1){for(ke.push(""),j=0;j<Te[F].length;j+=1)$=Te[F][j],pe=Te[F][j-1],Ce=Te[F][j+1],c($)?(z=A($,pe,Ce),ke[F]+=z!==-1?String.fromCharCode(t[$.charCodeAt(0)][z]):$):ke[F]+=$;ke[F]=w(ke[F])}return ke.join(" ")},M=e.__arabicParser__.processArabic=e.processArabic=function(){var N,F=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,j=[];if(Array.isArray(F)){var z=0;for(j=[],z=0;z<F.length;z+=1)Array.isArray(F[z])?j.push([C(F[z][0]),F[z][1],F[z][2]]):j.push([C(F[z])]);N=j}else N=C(F);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};e.events.push(["preProcessText",M])}(mn.API),mn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(p){n=p}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(p){i=isNaN(p)||Number.isInteger(p)===!1||p<0?150:p,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(p){o=isNaN(p)||Number.isInteger(p)===!1||p<0?300:p,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(p){l=p}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(p){c=p}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,i){var o;if((n=n||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(mn.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(N){m=N}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var b=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(N){w=N}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(N){A=N}});var C=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return C},set:function(N){C=N}});var M=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return M},set:function(N){M=N}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(m){return i.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},e.getTextDimensions=function(m,y){i.call(this);var b=(y=y||{}).fontSize||this.getFontSize(),w=y.font||this.getFont(),A=y.scaleFactor||this.internal.scaleFactor,C=0,M=0,N=0,F=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var j=y.maxWidth;j>0?typeof m=="string"?m=this.splitTextToSize(m,j):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function($,pe){return $.concat(F.splitTextToSize(pe,j))},[])):m=Array.isArray(m)?m:[m];for(var z=0;z<m.length;z++)C<(N=this.getStringUnitWidth(m[z],{font:w})*b)&&(C=N);return C!==0&&(M=m.length),{w:C/=A,h:Math.max((M*b*this.getLineHeightFactor()-b*(this.getLineHeightFactor()-1))/A,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var m=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new l(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=e.cell=function(){var m;m=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var y=this.internal.__cell__.lastCell,b=this.internal.__cell__.padding,w=this.internal.__cell__.margins||t,A=this.internal.__cell__.tableHeaderRow,C=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===m.lineNumber?(m.x=(y.x||0)+(y.width||0),m.y=y.y||0):y.y+y.height+m.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=w.top,C&&A&&(this.printHeaderRow(m.lineNumber,!0),m.y+=A[0].height)):m.y=y.y+y.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,n===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-b,m.y+b,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+b,{align:"center",baseline:"top",maxWidth:m.width-b-b}):this.text(m.text,m.x+b,m.y+b,{align:"left",baseline:"top",maxWidth:m.width-b-b})),this.internal.__cell__.lastCell=m,this};e.table=function(m,y,b,w,A){if(i.call(this),!b)throw new Error("No data for PDF table.");var C,M,N,F,j=[],z=[],$=[],pe={},Ce={},Te=[],ke=[],O=(A=A||{}).autoSize||!1,oe=A.printHeaders!==!1,we=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,R=A.margins||Object.assign({width:this.getPageWidth()},t),G=typeof A.padding=="number"?A.padding:3,he=A.headerBackgroundColor||"#c8c8c8",W=A.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=oe,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=we,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=he,this.internal.__cell__.headerTextColor=W,this.setFontSize(we),w==null)z=j=Object.keys(b[0]),$=j.map(function(){return"left"});else if(Array.isArray(w)&&sr(w[0])==="object")for(j=w.map(function(ue){return ue.name}),z=w.map(function(ue){return ue.prompt||ue.name||""}),$=w.map(function(ue){return ue.align||"left"}),C=0;C<w.length;C+=1)Ce[w[C].name]=w[C].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(z=j=w,$=j.map(function(){return"left"}));if(O||Array.isArray(w)&&typeof w[0]=="string")for(C=0;C<j.length;C+=1){for(pe[F=j[C]]=b.map(function(ue){return ue[F]}),this.setFont(void 0,"bold"),Te.push(this.getTextDimensions(z[C],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),M=pe[F],this.setFont(void 0,"normal"),N=0;N<M.length;N+=1)Te.push(this.getTextDimensions(M[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Ce[F]=Math.max.apply(null,Te)+G+G,Te=[]}if(oe){var ne={};for(C=0;C<j.length;C+=1)ne[j[C]]={},ne[j[C]].text=z[C],ne[j[C]].align=$[C];var X=p.call(this,ne,Ce);ke=j.map(function(ue){return new l(m,y,Ce[ue],X,ne[ue].text,void 0,ne[ue].align)}),this.setTableHeaderRow(ke),this.printHeaderRow(1,!1)}var se=w.reduce(function(ue,We){return ue[We.name]=We.align,ue},{});for(C=0;C<b.length;C+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:C,data:b[C]},this);var V=p.call(this,b[C],Ce);for(N=0;N<j.length;N+=1){var Y=b[C][j[N]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:C,col:N,data:Y},this),c.call(this,new l(m,y,Ce[j[N]],V,Y,C+2,se[j[N]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=y,this};var p=function(m,y){var b=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(m).map(function(C){var M=m[C];return this.splitTextToSize(M.hasOwnProperty("text")?M.text:M,y[C]-b-b)},this).map(function(C){return this.getLineHeightFactor()*C.length*w/A+b+b},this).reduce(function(C,M){return Math.max(C,M)},0)};e.setTableHeaderRow=function(m){i.call(this),this.internal.__cell__.tableHeaderRow=m},e.printHeaderRow=function(m,y){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var b;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],C=0;C<this.internal.__cell__.tableHeaderRow.length;C+=1){b=this.internal.__cell__.tableHeaderRow[C].clone(),y&&(b.y=this.internal.__cell__.margins.top||0,A.push(b)),b.lineNumber=m;var M=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,b),this.setTextColor(M)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),n=!1}}(mn.API);var i1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},s1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],nd=r1(s1),o1=[100,200,300,400,500,600,700,800,900],gw=r1(o1);function rd(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(l){return i1[l=l||"normal"]?l:"normal"}(e.style),i=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(e.weight),o=function(l){return typeof nd[l=l||"normal"]=="number"?l:"normal"}(e.stretch);return{family:t,style:n,weight:i,stretch:o,src:e.src||[],ref:e.ref||{name:t,style:[o,n,i].join(" ")}}}function b0(e,t,n,i){var o;for(o=n;o>=0&&o<t.length;o+=i)if(e[t[o]])return e[t[o]];for(o=n;o>=0&&o<t.length;o-=i)if(e[t[o]])return e[t[o]]}var _w={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},w0={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function x0(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function vw(e,t,n){for(var i=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},_w,n.genericFontFamilies||{}),l=null,c=null,p=0;p<t.length;++p)if(o[(l=rd(t[p])).family]&&(l.family=o[l.family]),e.hasOwnProperty(l.family)){c=e[l.family];break}if(!(c=c||e[i]))throw new Error("Could not find a font-family for the rule '"+x0(l)+"' and default family '"+i+"'.");if(c=function(m,y){if(y[m])return y[m];var b=nd[m],w=b<=nd.normal?-1:1,A=b0(y,s1,b,w);if(!A)throw new Error("Could not find a matching font-stretch value for "+m);return A}(l.stretch,c),c=function(m,y){if(y[m])return y[m];for(var b=i1[m],w=0;w<b.length;++w)if(y[b[w]])return y[b[w]];throw new Error("Could not find a matching font-style for "+m)}(l.style,c),!(c=function(m,y){if(y[m])return y[m];if(m===400&&y[500])return y[500];if(m===500&&y[400])return y[400];var b=gw[m],w=b0(y,o1,b,m<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+m);return w}(l.weight,c)))throw new Error("Failed to resolve a font for the rule '"+x0(l)+"'.");return c}function L0(e){return e.trimLeft()}function yw(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function bw(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Mc,C0,k0,yf=["times"];(function(e){var t,n,i,o,l,c,p,m,y,b=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new m,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new c,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new c,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new w(this),t=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,c=this.internal.Point,p=this.internal.Rectangle,m=this.internal.Matrix,y=new b}]);var w=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=U;Object.defineProperty(this,"pdf",{get:function(){return ee}});var de=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return de},set:function(De){de=!!De}});var xe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return xe},set:function(De){xe=!!De}});var Ae=0;Object.defineProperty(this,"posX",{get:function(){return Ae},set:function(De){isNaN(De)||(Ae=De)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(De){isNaN(De)||(_e=De)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(De){var le;typeof De=="number"?le=[De,De,De,De]:((le=new Array(4))[0]=De[0],le[1]=De.length>=2?De[1]:le[0],le[2]=De.length>=3?De[2]:le[0],le[3]=De.length>=4?De[3]:le[1]),y.margin=le}});var Ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ie},set:function(De){Ie=De}});var Ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ne},set:function(De){Ne=De}});var st=[];Object.defineProperty(this,"pageBreaks",{get:function(){return st},set:function(De){st=De}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(De){De instanceof b&&(y=De)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(De){y.path=De}});var gt=[];Object.defineProperty(this,"ctxStack",{get:function(){return gt},set:function(De){gt=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var le;le=A(De),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var le=A(De);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var ae=null;function fe(De,le){if(ae===null){var Ze=function(lt){var Qe=[];return Object.keys(lt).forEach(function(ot){lt[ot].forEach(function(Oe){var Le=null;switch(Oe){case"bold":Le={family:ot,weight:"bold"};break;case"italic":Le={family:ot,style:"italic"};break;case"bolditalic":Le={family:ot,weight:"bold",style:"italic"};break;case"":case"normal":Le={family:ot}}Le!==null&&(Le.ref={name:ot,style:Oe},Qe.push(Le))})}),Qe}(De.getFontList());ae=function(lt){for(var Qe={},ot=0;ot<lt.length;++ot){var Oe=rd(lt[ot]),Le=Oe.family,rt=Oe.stretch,vt=Oe.style,Lt=Oe.weight;Qe[Le]=Qe[Le]||{},Qe[Le][rt]=Qe[Le][rt]||{},Qe[Le][rt][vt]=Qe[Le][rt][vt]||{},Qe[Le][rt][vt][Lt]=Oe}return Qe}(Ze.concat(le))}return ae}var Re=null;Object.defineProperty(this,"fontFaces",{get:function(){return Re},set:function(De){ae=null,Re=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var le;if(this.ctx.font=De,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var Ze=le[1],lt=(le[2],le[3]),Qe=le[4],ot=(le[5],le[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qe)[2];Qe=Math.floor(Oe==="px"?parseFloat(Qe)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Qe)*this.pdf.getFontSize():parseFloat(Qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qe);var Le=function(jt){var Vt,Dt,Pn=[],tn=jt.trim();if(tn==="")return yf;if(tn in w0)return[w0[tn]];for(;tn!=="";){switch(Dt=null,Vt=(tn=L0(tn)).charAt(0)){case'"':case"'":Dt=yw(tn.substring(1),Vt);break;default:Dt=bw(tn)}if(Dt===null||(Pn.push(Dt[0]),(tn=L0(Dt[1]))!==""&&tn.charAt(0)!==","))return yf;tn=tn.replace(/^,/,"")}return Pn}(ot);if(this.fontFaces){var rt=vw(fe(this.pdf,this.fontFaces),Le.map(function(jt){return{family:jt,stretch:"normal",weight:lt,style:Ze}}));this.pdf.setFont(rt.ref.name,rt.ref.style)}else{var vt="";(lt==="bold"||parseInt(lt,10)>=700||Ze==="bold")&&(vt="bold"),Ze==="italic"&&(vt+="italic"),vt.length===0&&(vt="normal");for(var Lt="",Ue={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Tt=0;Tt<Le.length;Tt++){if(this.pdf.internal.getFont(Le[Tt],vt,{noFallback:!0,disableWarning:!0})!==void 0){Lt=Le[Tt];break}if(vt==="bolditalic"&&this.pdf.internal.getFont(Le[Tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Lt=Le[Tt],vt="bold";else if(this.pdf.internal.getFont(Le[Tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Lt=Le[Tt],vt="normal";break}}if(Lt===""){for(var Mt=0;Mt<Le.length;Mt++)if(Ue[Le[Mt]]){Lt=Ue[Le[Mt]];break}}Lt=Lt===""?"Times":Lt,this.pdf.setFont(Lt,vt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,We.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,We.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};w.prototype.setLineDash=function(U){this.lineDash=U},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){pe.call(this,"fill",!1)},w.prototype.stroke=function(){pe.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(U,ee){if(isNaN(U)||isNaN(ee))throw or.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var de=this.ctx.transform.applyToPoint(new c(U,ee));this.path.push({type:"mt",x:de.x,y:de.y}),this.ctx.lastPoint=new c(U,ee)},w.prototype.closePath=function(){var U=new c(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&sr(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){U=new c(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(U.x,U.y)},w.prototype.lineTo=function(U,ee){if(isNaN(U)||isNaN(ee))throw or.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var de=this.ctx.transform.applyToPoint(new c(U,ee));this.path.push({type:"lt",x:de.x,y:de.y}),this.ctx.lastPoint=new c(de.x,de.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),pe.call(this,null,!0)},w.prototype.quadraticCurveTo=function(U,ee,de,xe){if(isNaN(de)||isNaN(xe)||isNaN(U)||isNaN(ee))throw or.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ae=this.ctx.transform.applyToPoint(new c(de,xe)),_e=this.ctx.transform.applyToPoint(new c(U,ee));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new c(Ae.x,Ae.y)},w.prototype.bezierCurveTo=function(U,ee,de,xe,Ae,_e){if(isNaN(Ae)||isNaN(_e)||isNaN(U)||isNaN(ee)||isNaN(de)||isNaN(xe))throw or.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ie=this.ctx.transform.applyToPoint(new c(Ae,_e)),Ne=this.ctx.transform.applyToPoint(new c(U,ee)),st=this.ctx.transform.applyToPoint(new c(de,xe));this.path.push({type:"bct",x1:Ne.x,y1:Ne.y,x2:st.x,y2:st.y,x:Ie.x,y:Ie.y}),this.ctx.lastPoint=new c(Ie.x,Ie.y)},w.prototype.arc=function(U,ee,de,xe,Ae,_e){if(isNaN(U)||isNaN(ee)||isNaN(de)||isNaN(xe)||isNaN(Ae))throw or.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var Ie=this.ctx.transform.applyToPoint(new c(U,ee));U=Ie.x,ee=Ie.y;var Ne=this.ctx.transform.applyToPoint(new c(0,de)),st=this.ctx.transform.applyToPoint(new c(0,0));de=Math.sqrt(Math.pow(Ne.x-st.x,2)+Math.pow(Ne.y-st.y,2))}Math.abs(Ae-xe)>=2*Math.PI&&(xe=0,Ae=2*Math.PI),this.path.push({type:"arc",x:U,y:ee,radius:de,startAngle:xe,endAngle:Ae,counterclockwise:_e})},w.prototype.arcTo=function(U,ee,de,xe,Ae){throw new Error("arcTo not implemented.")},w.prototype.rect=function(U,ee,de,xe){if(isNaN(U)||isNaN(ee)||isNaN(de)||isNaN(xe))throw or.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,ee),this.lineTo(U+de,ee),this.lineTo(U+de,ee+xe),this.lineTo(U,ee+xe),this.lineTo(U,ee),this.lineTo(U+de,ee),this.lineTo(U,ee)},w.prototype.fillRect=function(U,ee,de,xe){if(isNaN(U)||isNaN(ee)||isNaN(de)||isNaN(xe))throw or.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!C.call(this)){var Ae={};this.lineCap!=="butt"&&(Ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,ee,de,xe),this.fill(),Ae.hasOwnProperty("lineCap")&&(this.lineCap=Ae.lineCap),Ae.hasOwnProperty("lineJoin")&&(this.lineJoin=Ae.lineJoin)}},w.prototype.strokeRect=function(U,ee,de,xe){if(isNaN(U)||isNaN(ee)||isNaN(de)||isNaN(xe))throw or.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");M.call(this)||(this.beginPath(),this.rect(U,ee,de,xe),this.stroke())},w.prototype.clearRect=function(U,ee,de,xe){if(isNaN(U)||isNaN(ee)||isNaN(de)||isNaN(xe))throw or.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,ee,de,xe))},w.prototype.save=function(U){U=typeof U!="boolean"||U;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,de=0;de<this.pdf.internal.getNumberOfPages();de++)this.pdf.setPage(de+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var xe=new b(this.ctx);this.ctxStack.push(this.ctx),this.ctx=xe}},w.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,de=0;de<this.pdf.internal.getNumberOfPages();de++)this.pdf.setPage(de+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(U){var ee,de,xe,Ae;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))ee=0,de=0,xe=0,Ae=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(_e!==null)ee=parseInt(_e[1]),de=parseInt(_e[2]),xe=parseInt(_e[3]),Ae=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)ee=parseInt(_e[1]),de=parseInt(_e[2]),xe=parseInt(_e[3]),Ae=parseFloat(_e[4]);else{if(Ae=1,typeof U=="string"&&U.charAt(0)!=="#"){var Ie=new Yg(U);U=Ie.ok?Ie.toHex():"#000000"}U.length===4?(ee=U.substring(1,2),ee+=ee,de=U.substring(2,3),de+=de,xe=U.substring(3,4),xe+=xe):(ee=U.substring(1,3),de=U.substring(3,5),xe=U.substring(5,7)),ee=parseInt(ee,16),de=parseInt(de,16),xe=parseInt(xe,16)}}return{r:ee,g:de,b:xe,a:Ae,style:U}},C=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},M=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(U,ee,de,xe){if(isNaN(ee)||isNaN(de)||typeof U!="string")throw or.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(xe=isNaN(xe)?void 0:xe,!C.call(this)){var Ae=V(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;G.call(this,{text:U,x:ee,y:de,scale:_e,angle:Ae,align:this.textAlign,maxWidth:xe})}},w.prototype.strokeText=function(U,ee,de,xe){if(isNaN(ee)||isNaN(de)||typeof U!="string")throw or.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!M.call(this)){xe=isNaN(xe)?void 0:xe;var Ae=V(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;G.call(this,{text:U,x:ee,y:de,scale:_e,renderingMode:"stroke",angle:Ae,align:this.textAlign,maxWidth:xe})}},w.prototype.measureText=function(U){if(typeof U!="string")throw or.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,de=this.pdf.internal.scaleFactor,xe=ee.internal.getFontSize(),Ae=ee.getStringUnitWidth(U)*xe/ee.internal.scaleFactor,_e=function(Ie){var Ne=(Ie=Ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ne}}),this};return new _e({width:Ae*=Math.round(96*de/72*1e4)/1e4})},w.prototype.scale=function(U,ee){if(isNaN(U)||isNaN(ee))throw or.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var de=new m(U,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(de)},w.prototype.rotate=function(U){if(isNaN(U))throw or.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new m(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},w.prototype.translate=function(U,ee){if(isNaN(U)||isNaN(ee))throw or.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var de=new m(1,0,0,1,U,ee);this.ctx.transform=this.ctx.transform.multiply(de)},w.prototype.transform=function(U,ee,de,xe,Ae,_e){if(isNaN(U)||isNaN(ee)||isNaN(de)||isNaN(xe)||isNaN(Ae)||isNaN(_e))throw or.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ie=new m(U,ee,de,xe,Ae,_e);this.ctx.transform=this.ctx.transform.multiply(Ie)},w.prototype.setTransform=function(U,ee,de,xe,Ae,_e){U=isNaN(U)?1:U,ee=isNaN(ee)?0:ee,de=isNaN(de)?0:de,xe=isNaN(xe)?1:xe,Ae=isNaN(Ae)?0:Ae,_e=isNaN(_e)?0:_e,this.ctx.transform=new m(U,ee,de,xe,Ae,_e)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(U,ee,de,xe,Ae,_e,Ie,Ne,st){var gt=this.pdf.getImageProperties(U),ae=1,fe=1,Re=1,De=1;xe!==void 0&&Ne!==void 0&&(Re=Ne/xe,De=st/Ae,ae=gt.width/xe*Ne/xe,fe=gt.height/Ae*st/Ae),_e===void 0&&(_e=ee,Ie=de,ee=0,de=0),xe!==void 0&&Ne===void 0&&(Ne=xe,st=Ae),xe===void 0&&Ne===void 0&&(Ne=gt.width,st=gt.height);for(var le,Ze=this.ctx.transform.decompose(),lt=V(Ze.rotate.shx),Qe=new m,ot=(Qe=(Qe=(Qe=Qe.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new p(_e-ee*Re,Ie-de*De,xe*ae,Ae*fe)),Oe=F.call(this,ot),Le=[],rt=0;rt<Oe.length;rt+=1)Le.indexOf(Oe[rt])===-1&&Le.push(Oe[rt]);if($(Le),this.autoPaging)for(var vt=Le[0],Lt=Le[Le.length-1],Ue=vt;Ue<Lt+1;Ue++){this.pdf.setPage(Ue);var Tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=Ue===1?this.posY+this.margin[0]:this.margin[0],jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=Ue===1?0:jt+(Ue-2)*Vt;if(this.ctx.clip_path.length!==0){var Pn=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=z(le,this.posX+this.margin[3],-Dt+Mt+this.ctx.prevPageLastElemOffset),Ce.call(this,"fill",!0),this.path=Pn}var tn=JSON.parse(JSON.stringify(ot));tn=z([tn],this.posX+this.margin[3],-Dt+Mt+this.ctx.prevPageLastElemOffset)[0];var Kn=(Ue>vt||Ue<Lt)&&N.call(this);Kn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,Vt,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",tn.x,tn.y,tn.w,tn.h,null,null,lt),Kn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(U,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,lt)};var F=function(U,ee,de){var xe=[];ee=ee||this.pdf.internal.pageSize.width,de=de||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ae=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":xe.push(Math.floor((U.y+Ae)/de)+1);break;case"arc":xe.push(Math.floor((U.y+Ae-U.radius)/de)+1),xe.push(Math.floor((U.y+Ae+U.radius)/de)+1);break;case"qct":var _e=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);xe.push(Math.floor((_e.y+Ae)/de)+1),xe.push(Math.floor((_e.y+_e.h+Ae)/de)+1);break;case"bct":var Ie=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);xe.push(Math.floor((Ie.y+Ae)/de)+1),xe.push(Math.floor((Ie.y+Ie.h+Ae)/de)+1);break;case"rect":xe.push(Math.floor((U.y+Ae)/de)+1),xe.push(Math.floor((U.y+U.h+Ae)/de)+1)}for(var Ne=0;Ne<xe.length;Ne+=1)for(;this.pdf.internal.getNumberOfPages()<xe[Ne];)j.call(this);return xe},j=function(){var U=this.fillStyle,ee=this.strokeStyle,de=this.font,xe=this.lineCap,Ae=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=ee,this.font=de,this.lineCap=xe,this.lineWidth=Ae,this.lineJoin=_e},z=function(U,ee,de){for(var xe=0;xe<U.length;xe++)switch(U[xe].type){case"bct":U[xe].x2+=ee,U[xe].y2+=de;case"qct":U[xe].x1+=ee,U[xe].y1+=de;case"mt":case"lt":case"arc":default:U[xe].x+=ee,U[xe].y+=de}return U},$=function(U){return U.sort(function(ee,de){return ee-de})},pe=function(U,ee){for(var de,xe,Ae=this.fillStyle,_e=this.strokeStyle,Ie=this.lineCap,Ne=this.lineWidth,st=Math.abs(Ne*this.ctx.transform.scaleX),gt=this.lineJoin,ae=JSON.parse(JSON.stringify(this.path)),fe=JSON.parse(JSON.stringify(this.path)),Re=[],De=0;De<fe.length;De++)if(fe[De].x!==void 0)for(var le=F.call(this,fe[De]),Ze=0;Ze<le.length;Ze+=1)Re.indexOf(le[Ze])===-1&&Re.push(le[Ze]);for(var lt=0;lt<Re.length;lt++)for(;this.pdf.internal.getNumberOfPages()<Re[lt];)j.call(this);if($(Re),this.autoPaging)for(var Qe=Re[0],ot=Re[Re.length-1],Oe=Qe;Oe<ot+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=Ae,this.strokeStyle=_e,this.lineCap=Ie,this.lineWidth=st,this.lineJoin=gt;var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rt=Oe===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ue=Oe===1?0:vt+(Oe-2)*Lt;if(this.ctx.clip_path.length!==0){var Tt=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=z(de,this.posX+this.margin[3],-Ue+rt+this.ctx.prevPageLastElemOffset),Ce.call(this,U,!0),this.path=Tt}if(xe=JSON.parse(JSON.stringify(ae)),this.path=z(xe,this.posX+this.margin[3],-Ue+rt+this.ctx.prevPageLastElemOffset),ee===!1||Oe===0){var Mt=(Oe>Qe||Oe<ot)&&N.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,Lt,null).clip().discardPath()),Ce.call(this,U,ee),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ne}else this.lineWidth=st,Ce.call(this,U,ee),this.lineWidth=Ne;this.path=ae},Ce=function(U,ee){if((U!=="stroke"||ee||!M.call(this))&&(U==="stroke"||ee||!C.call(this))){for(var de,xe,Ae=[],_e=this.path,Ie=0;Ie<_e.length;Ie++){var Ne=_e[Ie];switch(Ne.type){case"begin":Ae.push({begin:!0});break;case"close":Ae.push({close:!0});break;case"mt":Ae.push({start:Ne,deltas:[],abs:[]});break;case"lt":var st=Ae.length;if(_e[Ie-1]&&!isNaN(_e[Ie-1].x)&&(de=[Ne.x-_e[Ie-1].x,Ne.y-_e[Ie-1].y],st>0)){for(;st>=0;st--)if(Ae[st-1].close!==!0&&Ae[st-1].begin!==!0){Ae[st-1].deltas.push(de),Ae[st-1].abs.push(Ne);break}}break;case"bct":de=[Ne.x1-_e[Ie-1].x,Ne.y1-_e[Ie-1].y,Ne.x2-_e[Ie-1].x,Ne.y2-_e[Ie-1].y,Ne.x-_e[Ie-1].x,Ne.y-_e[Ie-1].y],Ae[Ae.length-1].deltas.push(de);break;case"qct":var gt=_e[Ie-1].x+2/3*(Ne.x1-_e[Ie-1].x),ae=_e[Ie-1].y+2/3*(Ne.y1-_e[Ie-1].y),fe=Ne.x+2/3*(Ne.x1-Ne.x),Re=Ne.y+2/3*(Ne.y1-Ne.y),De=Ne.x,le=Ne.y;de=[gt-_e[Ie-1].x,ae-_e[Ie-1].y,fe-_e[Ie-1].x,Re-_e[Ie-1].y,De-_e[Ie-1].x,le-_e[Ie-1].y],Ae[Ae.length-1].deltas.push(de);break;case"arc":Ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ae[Ae.length-1].abs)&&Ae[Ae.length-1].abs.push(Ne)}}xe=ee?null:U==="stroke"?"stroke":"fill";for(var Ze=!1,lt=0;lt<Ae.length;lt++)if(Ae[lt].arc)for(var Qe=Ae[lt].abs,ot=0;ot<Qe.length;ot++){var Oe=Qe[ot];Oe.type==="arc"?O.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,ee,!Ze):he.call(this,Oe.x,Oe.y),Ze=!0}else if(Ae[lt].close===!0)this.pdf.internal.out("h"),Ze=!1;else if(Ae[lt].begin!==!0){var Le=Ae[lt].start.x,rt=Ae[lt].start.y;W.call(this,Ae[lt].deltas,Le,rt),Ze=!0}xe&&oe.call(this,xe),ee&&we.call(this)}},Te=function(U){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,de=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-de;case"top":return U+ee-de;case"hanging":return U+ee-2*de;case"middle":return U+ee/2-de;case"ideographic":return U;case"alphabetic":default:return U}},ke=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(ee,de){this.colorStops.push([ee,de])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(U,ee,de,xe,Ae,_e,Ie,Ne,st){for(var gt=X.call(this,de,xe,Ae,_e),ae=0;ae<gt.length;ae++){var fe=gt[ae];ae===0&&(st?R.call(this,fe.x1+U,fe.y1+ee):he.call(this,fe.x1+U,fe.y1+ee)),ne.call(this,U,ee,fe.x2,fe.y2,fe.x3,fe.y3,fe.x4,fe.y4)}Ne?we.call(this):oe.call(this,Ie)},oe=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},we=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(U,ee){this.pdf.internal.out(n(U)+" "+i(ee)+" m")},G=function(U){var ee;switch(U.align){case"right":case"end":ee="right";break;case"center":ee="center";break;case"left":case"start":default:ee="left"}var de=this.pdf.getTextDimensions(U.text),xe=Te.call(this,U.y),Ae=ke.call(this,xe)-de.h,_e=this.ctx.transform.applyToPoint(new c(U.x,xe)),Ie=this.ctx.transform.decompose(),Ne=new m;Ne=(Ne=(Ne=Ne.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale);for(var st,gt,ae,fe=this.ctx.transform.applyToRectangle(new p(U.x,xe,de.w,de.h)),Re=Ne.applyToRectangle(new p(U.x,Ae,de.w,de.h)),De=F.call(this,Re),le=[],Ze=0;Ze<De.length;Ze+=1)le.indexOf(De[Ze])===-1&&le.push(De[Ze]);if($(le),this.autoPaging)for(var lt=le[0],Qe=le[le.length-1],ot=lt;ot<Qe+1;ot++){this.pdf.setPage(ot);var Oe=ot===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[2],vt=rt-this.margin[0],Lt=this.pdf.internal.pageSize.width-this.margin[1],Ue=Lt-this.margin[3],Tt=ot===1?0:Le+(ot-2)*vt;if(this.ctx.clip_path.length!==0){var Mt=this.path;st=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=z(st,this.posX+this.margin[3],-1*Tt+Oe),Ce.call(this,"fill",!0),this.path=Mt}var jt=z([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-Tt+Oe+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(gt*U.scale),ae=this.lineWidth,this.lineWidth=ae*U.scale);var Vt=this.autoPaging!=="text";if(Vt||jt.y+jt.h<=rt){if(Vt||jt.y>=Oe&&jt.x<=Lt){var Dt=Vt?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||Lt-jt.x)[0],Pn=z([JSON.parse(JSON.stringify(fe))],this.posX+this.margin[3],-Tt+Oe+this.ctx.prevPageLastElemOffset)[0],tn=Vt&&(ot>lt||ot<Qe)&&N.call(this);tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ue,vt,null).clip().discardPath()),this.pdf.text(Dt,Pn.x,Pn.y,{angle:U.angle,align:ee,renderingMode:U.renderingMode}),tn&&this.pdf.restoreGraphicsState()}}else jt.y<rt&&(this.ctx.prevPageLastElemOffset+=rt-jt.y);U.scale>=.01&&(this.pdf.setFontSize(gt),this.lineWidth=ae)}else U.scale>=.01&&(gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(gt*U.scale),ae=this.lineWidth,this.lineWidth=ae*U.scale),this.pdf.text(U.text,_e.x+this.posX,_e.y+this.posY,{angle:U.angle,align:ee,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(gt),this.lineWidth=ae)},he=function(U,ee,de,xe){de=de||0,xe=xe||0,this.pdf.internal.out(n(U+de)+" "+i(ee+xe)+" l")},W=function(U,ee,de){return this.pdf.lines(U,ee,de,null,null)},ne=function(U,ee,de,xe,Ae,_e,Ie,Ne){this.pdf.internal.out([t(o(de+U)),t(l(xe+ee)),t(o(Ae+U)),t(l(_e+ee)),t(o(Ie+U)),t(l(Ne+ee)),"c"].join(" "))},X=function(U,ee,de,xe){for(var Ae=2*Math.PI,_e=Math.PI/2;ee>de;)ee-=Ae;var Ie=Math.abs(de-ee);Ie<Ae&&xe&&(Ie=Ae-Ie);for(var Ne=[],st=xe?-1:1,gt=ee;Ie>1e-5;){var ae=gt+st*Math.min(Ie,_e);Ne.push(se.call(this,U,gt,ae)),Ie-=Math.abs(ae-gt),gt=ae}return Ne},se=function(U,ee,de){var xe=(de-ee)/2,Ae=U*Math.cos(xe),_e=U*Math.sin(xe),Ie=Ae,Ne=-_e,st=Ie*Ie+Ne*Ne,gt=st+Ie*Ae+Ne*_e,ae=4/3*(Math.sqrt(2*st*gt)-gt)/(Ie*_e-Ne*Ae),fe=Ie-ae*Ne,Re=Ne+ae*Ie,De=fe,le=-Re,Ze=xe+ee,lt=Math.cos(Ze),Qe=Math.sin(Ze);return{x1:U*Math.cos(ee),y1:U*Math.sin(ee),x2:fe*lt-Re*Qe,y2:fe*Qe+Re*lt,x3:De*lt-le*Qe,y3:De*Qe+le*lt,x4:U*Math.cos(de),y4:U*Math.sin(de)}},V=function(U){return 180*U/Math.PI},Y=function(U,ee,de,xe,Ae,_e){var Ie=U+.5*(de-U),Ne=ee+.5*(xe-ee),st=Ae+.5*(de-Ae),gt=_e+.5*(xe-_e),ae=Math.min(U,Ae,Ie,st),fe=Math.max(U,Ae,Ie,st),Re=Math.min(ee,_e,Ne,gt),De=Math.max(ee,_e,Ne,gt);return new p(ae,Re,fe-ae,De-Re)},ue=function(U,ee,de,xe,Ae,_e,Ie,Ne){var st,gt,ae,fe,Re,De,le,Ze,lt,Qe,ot,Oe,Le,rt,vt=de-U,Lt=xe-ee,Ue=Ae-de,Tt=_e-xe,Mt=Ie-Ae,jt=Ne-_e;for(gt=0;gt<41;gt++)lt=(le=(ae=U+(st=gt/40)*vt)+st*((Re=de+st*Ue)-ae))+st*(Re+st*(Ae+st*Mt-Re)-le),Qe=(Ze=(fe=ee+st*Lt)+st*((De=xe+st*Tt)-fe))+st*(De+st*(_e+st*jt-De)-Ze),gt==0?(ot=lt,Oe=Qe,Le=lt,rt=Qe):(ot=Math.min(ot,lt),Oe=Math.min(Oe,Qe),Le=Math.max(Le,lt),rt=Math.max(rt,Qe));return new p(Math.round(ot),Math.round(Oe),Math.round(Le-ot),Math.round(rt-Oe))},We=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,ee,de=(U=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:ee}));this.prevLineDash!==de&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=de)}}})(mn.API),function(e){var t=function(l){var c,p,m,y,b,w,A,C,M,N;for(p=[],m=0,y=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;y>m;m+=4)(b=(l.charCodeAt(m)<<24)+(l.charCodeAt(m+1)<<16)+(l.charCodeAt(m+2)<<8)+l.charCodeAt(m+3))!==0?(w=(b=((b=((b=((b=(b-(N=b%85))/85)-(M=b%85))/85)-(C=b%85))/85)-(A=b%85))/85)%85,p.push(w+33,A+33,C+33,M+33,N+33)):p.push(122);return function(F,j){for(var z=j;z>0;z--)F.pop()}(p,c.length),String.fromCharCode.apply(String,p)+"~>"},n=function(l){var c,p,m,y,b,w=String,A="length",C=255,M="charCodeAt",N="slice",F="replace";for(l[N](-2),l=l[N](0,-2)[F](/\s/g,"")[F]("z","!!!!!"),m=[],y=0,b=(l+=c="uuuuu"[N](l[A]%5||5))[A];b>y;y+=5)p=52200625*(l[M](y)-33)+614125*(l[M](y+1)-33)+7225*(l[M](y+2)-33)+85*(l[M](y+3)-33)+(l[M](y+4)-33),m.push(C&p>>24,C&p>>16,C&p>>8,C&p);return function(j,z){for(var $=z;$>0;$--)j.pop()}(m,c[A]),w.fromCharCode.apply(w,m)},i=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var p="",m=0;m<l.length;m+=2)p+=String.fromCharCode("0x"+(l[m]+l[m+1]));return p},o=function(l){for(var c=new Uint8Array(l.length),p=l.length;p--;)c[p]=l.charCodeAt(p);return l=(c=Yf(c)).reduce(function(m,y){return m+String.fromCharCode(y)},"")};e.processDataByFilters=function(l,c){var p=0,m=l||"",y=[];for(typeof(c=c||[])=="string"&&(c=[c]),p=0;p<c.length;p+=1)switch(c[p]){case"ASCII85Decode":case"/ASCII85Decode":m=n(m),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=t(m),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=i(m),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map(function(b){return("0"+b.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[p]+'" is not implemented')}return{data:m,reverseChain:y.reverse().join(" ")}}}(mn.API),function(e){e.loadFile=function(t,n,i){return function(o,l,c){l=l!==!1,c=typeof c=="function"?c:function(){};var p=void 0;try{p=function(m,y,b){var w=new XMLHttpRequest,A=0,C=function(M){var N=M.length,F=[],j=String.fromCharCode;for(A=0;A<N;A+=1)F.push(j(255&M.charCodeAt(A)));return F.join("")};if(w.open("GET",m,!y),w.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(w.onload=function(){w.status===200?b(C(this.responseText)):b(void 0)}),w.send(null),y&&w.status===200)return C(w.responseText)}(o,l,c)}catch{}return p}(t,n,i)},e.loadImageFile=e.loadFile}(mn.API),function(e){function t(){return(_n.html2canvas?Promise.resolve(_n.html2canvas):Dl(()=>import("./html2canvas.esm.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(_n.DOMPurify?Promise.resolve(_n.DOMPurify):Dl(()=>import("./purify.es.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var i=function(c){var p=sr(c);return p==="undefined"?"undefined":p==="string"||c instanceof String?"string":p==="number"||c instanceof Number?"number":p==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":p==="object"?"object":"unknown"},o=function(c,p){var m=document.createElement(c);for(var y in p.className&&(m.className=p.className),p.innerHTML&&p.dompurify&&(m.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)m.style[y]=p.style[y];return m},l=function c(p){var m=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),y=c.convert(Promise.resolve(),m);return y=(y=y.setProgress(1,c,1,[c])).set(p)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,p){return c.__proto__=p||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,p){return this.then(function(){switch(p=p||function(m){switch(i(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(n).then(function(m){return this.set({src:o("div",{innerHTML:c,dompurify:m})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=function m(y,b){for(var w=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),A=y.firstChild;A;A=A.nextSibling)b!==!0&&A.nodeType===1&&A.nodeName==="SCRIPT"||w.appendChild(m(A,b));return y.nodeType===1&&(y.nodeName==="CANVAS"?(w.width=y.width,w.height=y.height,w.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(w.value=y.value),w.addEventListener("load",function(){w.scrollTop=y.scrollTop,w.scrollLeft=y.scrollLeft},!0)),w}(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(p){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,p(this.prop.container,m)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(p){var m=this.opt.jsPDF,y=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=y,y)for(var A=0;A<y.length;++A){var C=y[A],M=C.src.find(function(N){return N.format==="truetype"});M&&m.addFont(M.url,C.ref.name,C.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,m.context2d.save(!0),p(this.prop.container,w)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,p,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(c,p):this.outputPdf(c,p)},l.prototype.outputPdf=function(c,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,p)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(i(c)!=="object")return this;var p=Object.keys(c||{}).map(function(m){if(m in l.template.prop)return function(){this.prop[m]=c[m]};switch(m){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[m]=c[m]}}},this);return this.then(function(){return this.thenList(p)})},l.prototype.get=function(c,p){return this.then(function(){var m=c in l.template.prop?this.prop[c]:this.opt[c];return p?p(m):m})},l.prototype.setMargin=function(c){return this.then(function(){switch(i(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function p(m,y){return Math.floor(m*y/72*96)}return this.then(function(){(c=c||mn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:p(c.inner.width,c.k),height:p(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,p,m,y){return c!=null&&(this.progress.val=c),p!=null&&(this.progress.state=p),m!=null&&(this.progress.n=m),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,p,m,y){return this.setProgress(c?this.progress.val+c:null,p||null,m?this.progress.n+m:null,y?this.progress.stack.concat(y):null)},l.prototype.then=function(c,p){var m=this;return this.thenCore(c,p,function(y,b){return m.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(w){return m.updateProgress(null,y),w}).then(y,b).then(function(w){return m.updateProgress(1),w})})},l.prototype.thenCore=function(c,p,m){m=m||Promise.prototype.then,c&&(c=c.bind(this)),p&&(p=p.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),b=m.call(y,c,p);return l.convert(b,this.__proto__)},l.prototype.thenExternal=function(c,p){return Promise.prototype.then.call(this,c,p)},l.prototype.thenList=function(c){var p=this;return c.forEach(function(m){p=p.thenCore(m)}),p},l.prototype.catch=function(c){c&&(c=c.bind(this));var p=Promise.prototype.catch.call(this,c);return l.convert(p,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,mn.getPageSize=function(c,p,m){if(sr(c)==="object"){var y=c;c=y.orientation,p=y.unit||p,m=y.format||m}p=p||"mm",m=m||"a4",c=(""+(c||"P")).toLowerCase();var b,w=(""+m).toLowerCase(),A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+p}var C,M=0,N=0;if(A.hasOwnProperty(w))M=A[w][1]/b,N=A[w][0]/b;else try{M=m[1],N=m[0]}catch{throw new Error("Invalid format: "+m)}if(c==="p"||c==="portrait")c="p",N>M&&(C=N,N=M,M=C);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",M>N&&(C=N,N=M,M=C)}return{width:N,height:M,unit:p,k:b,orientation:c}},e.html=function(c,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(rd):null;var m=new l(p);return p.worker?m:m.from(c).doCallback()}}(mn.API),mn.API.addJS=function(e){return k0=e,this.internal.events.subscribe("postPutResources",function(){Mc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Mc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),C0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+k0+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Mc!==void 0&&C0!==void 0&&this.internal.out("/Names <</JavaScript "+Mc+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),l=0;l<o.length;l++){var c=o[l],p=i.exec(c);if(p!=null){var m=p[1];n.internal.newObjectDeferredBegin(m,!1)}n.internal.write(c)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,b=[];for(l=0;l<y;l++){var w=n.internal.newObject();b.push(w);var A=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var C=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<b.length;l++)n.internal.write("(page_"+(l+1)+")"+b[l]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+C+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,o,l){var c={title:o,options:l,children:[]};return i==null&&(i=this.root),i.children.push(c),c},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<i.children.length;l++){var c=i.children[l];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(i)),l>0&&this.line("/Prev "+this.makeRef(i.children[l-1])),l<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[l+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var p=this.count=this.count_r({count:0},c);if(p>0&&this.line("/Count "+p),c.options&&c.options.pageNumber){var m=n.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var y=0;y<i.children.length;y++)this.renderItems(i.children[y])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,o){for(var l=0;l<o.children.length;l++)i.count++,this.count_r(i,o.children[l]);return i.count}}])}(mn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,i,o,l,c,p){var m,y=this.decode.DCT_DECODE,b=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=c||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(m=function(w){for(var A,C=256*w.charCodeAt(4)+w.charCodeAt(5),M=w.length,N={width:0,height:0,numcomponents:1},F=4;F<M;F+=2){if(F+=C,t.indexOf(w.charCodeAt(F+1))!==-1){A=256*w.charCodeAt(F+5)+w.charCodeAt(F+6),N={width:256*w.charCodeAt(F+7)+w.charCodeAt(F+8),height:A,numcomponents:w.charCodeAt(F+9)};break}C=256*w.charCodeAt(F+2)+w.charCodeAt(F+3)}return N}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:p=this.color_spaces.DEVICE_GRAY;break;case 4:p=this.color_spaces.DEVICE_CMYK;break;case 3:p=this.color_spaces.DEVICE_RGB}b={data:n,width:m.width,height:m.height,colorSpace:p,bitsPerComponent:8,filter:y,index:i,alias:o}}return b}}(mn.API);var ru,Bc,P0,E0,A0,ww=function(){var e,t,n;function i(l){var c,p,m,y,b,w,A,C,M,N,F,j,z,$;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(c=this.readUInt32(),M=(function(){var pe,Ce;for(Ce=[],pe=0;pe<4;++pe)Ce.push(String.fromCharCode(this.data[this.pos++]));return Ce}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},b=this.readUInt16(),y=this.readUInt16()||100,w.delay=1e3*b/y,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(M==="fdAT"&&(this.pos+=4,c-=4),l=(w!=null?w.data:void 0)||this.imgData,j=0;0<=c?j<c:j>c;0<=c?++j:--j)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((N=m-this.transparency.indexed.length)>0)for(z=0;0<=N?z<N:z>N;0<=N?++z:--z)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":A=(F=this.read(c)).indexOf(0),C=String.fromCharCode.apply(String,F.slice(0,A)),this.text[C]=String.fromCharCode.apply(String,F.slice(A+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=($=this.colorType)===4||$===6,p=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*p,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(l){var c,p;for(p=[],c=0;0<=l?c<l:c>l;0<=l?++c:--c)p.push(this.data[this.pos++]);return p},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(l){var c=this.pixelBitlength/8,p=new Uint8Array(this.width*this.height*c),m=0,y=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function b(w,A,C,M){var N,F,j,z,$,pe,Ce,Te,ke,O,oe,we,R,G,he,W,ne,X,se,V,Y,ue=Math.ceil((y.width-w)/C),We=Math.ceil((y.height-A)/M),U=y.width==ue&&y.height==We;for(G=c*ue,we=U?p:new Uint8Array(G*We),pe=l.length,R=0,F=0;R<We&&m<pe;){switch(l[m++]){case 0:for(z=ne=0;ne<G;z=ne+=1)we[F++]=l[m++];break;case 1:for(z=X=0;X<G;z=X+=1)N=l[m++],$=z<c?0:we[F-c],we[F++]=(N+$)%256;break;case 2:for(z=se=0;se<G;z=se+=1)N=l[m++],j=(z-z%c)/c,he=R&&we[(R-1)*G+j*c+z%c],we[F++]=(he+N)%256;break;case 3:for(z=V=0;V<G;z=V+=1)N=l[m++],j=(z-z%c)/c,$=z<c?0:we[F-c],he=R&&we[(R-1)*G+j*c+z%c],we[F++]=(N+Math.floor(($+he)/2))%256;break;case 4:for(z=Y=0;Y<G;z=Y+=1)N=l[m++],j=(z-z%c)/c,$=z<c?0:we[F-c],R===0?he=W=0:(he=we[(R-1)*G+j*c+z%c],W=j&&we[(R-1)*G+(j-1)*c+z%c]),Ce=$+he-W,Te=Math.abs(Ce-$),O=Math.abs(Ce-he),oe=Math.abs(Ce-W),ke=Te<=O&&Te<=oe?$:O<=oe?he:W,we[F++]=(N+ke)%256;break;default:throw new Error("Invalid filter algorithm: "+l[m-1])}if(!U){var ee=((A+R*M)*y.width+w)*c,de=R*G;for(z=0;z<ue;z+=1){for(var xe=0;xe<c;xe+=1)p[ee++]=we[de++];ee+=(C-1)*c}}R++}}return l=Q3(l),y.interlaceMethod==1?(b(0,0,8,8),b(4,0,8,8),b(0,4,4,8),b(2,0,4,4),b(0,2,2,4),b(1,0,2,2),b(0,1,1,2)):b(0,0,1,1),p},i.prototype.decodePalette=function(){var l,c,p,m,y,b,w,A,C;for(p=this.palette,b=this.transparency.indexed||[],y=new Uint8Array((b.length||0)+p.length),m=0,l=0,c=w=0,A=p.length;w<A;c=w+=3)y[m++]=p[c],y[m++]=p[c+1],y[m++]=p[c+2],y[m++]=(C=b[l++])!=null?C:255;return y},i.prototype.copyToImageData=function(l,c){var p,m,y,b,w,A,C,M,N,F,j;if(m=this.colors,N=null,p=this.hasAlphaChannel,this.palette.length&&(N=(j=this._decodedPalette)!=null?j:this._decodedPalette=this.decodePalette(),m=4,p=!0),M=(y=l.data||l).length,w=N||c,b=A=0,m===1)for(;b<M;)C=N?4*c[b/4]:A,F=w[C++],y[b++]=F,y[b++]=F,y[b++]=F,y[b++]=p?w[C++]:255,A=C;else for(;b<M;)C=N?4*c[b/4]:A,y[b++]=w[C++],y[b++]=w[C++],y[b++]=w[C++],y[b++]=p?w[C++]:255,A=C},i.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var o=function(){if(Object.prototype.toString.call(_n)==="[object Window]"){try{t=_n.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),e=function(l){var c;if(o()===!0)return n.width=l.width,n.height=l.height,n.clearRect(0,0,l.width,l.height),n.putImageData(l,0,0),(c=new Image).src=t.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(l){var c,p,m,y,b,w,A,C;if(this.animation){for(C=[],p=b=0,w=(A=this.animation.frames).length;b<w;p=++b)c=A[p],m=l.createImageData(c.width,c.height),y=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(m,y),c.imageData=m,C.push(c.image=e(m));return C}},i.prototype.renderFrame=function(l,c){var p,m,y;return p=(m=this.animation.frames)[c],y=m[c-1],c===0&&l.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?l.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&l.putImageData(y.imageData,y.xOffset,y.yOffset),p.blendOp===0&&l.clearRect(p.xOffset,p.yOffset,p.width,p.height),l.drawImage(p.image,p.xOffset,p.yOffset)},i.prototype.animate=function(l){var c,p,m,y,b,w,A=this;return p=0,w=this.animation,y=w.numFrames,m=w.frames,b=w.numPlays,(c=function(){var C,M;if(C=p++%y,M=m[C],A.renderFrame(l,C),y>1&&p/y<b)return A.animation._timeout=setTimeout(c,M.delay)})()},i.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},i.prototype.render=function(l){var c,p;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,c=l.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(p=c.createImageData(this.width,this.height),this.copyToImageData(p,this.decodePixels()),c.putImageData(p,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function xw(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,o=e[t++],l=o>>7,c=1<<(7&o)+1;e[t++],e[t++];var p=null,m=null;l&&(p=t,m=c,t+=3*c);var y=!0,b=[],w=0,A=null,C=0,M=null;for(this.width=n,this.height=i;y&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,M=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var N=e[t++];w=e[t++]|e[t++]<<8,A=e[t++],!(1&N)&&(A=null),C=N>>2&7,t++;break;case 254:for(;;){if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var F=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,z=e[t++]|e[t++]<<8,$=e[t++]|e[t++]<<8,pe=e[t++],Ce=pe>>6&1,Te=1<<(7&pe)+1,ke=p,O=m,oe=!1;pe>>7&&(oe=!0,ke=t,O=Te,t+=3*Te);var we=t;for(t++;;){var R;if(!((R=e[t++])>=0))throw Error("Invalid block size");if(R===0)break;t+=R}b.push({x:F,y:j,width:z,height:$,has_local_palette:oe,palette_offset:ke,palette_size:O,data_offset:we,data_length:t-we,transparent_index:A,interlaced:!!Ce,delay:w,disposal:C});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return M},this.frameInfo=function(G){if(G<0||G>=b.length)throw new Error("Frame index out of range.");return b[G]},this.decodeAndBlitFrameBGRA=function(G,he){var W=this.frameInfo(G),ne=W.width*W.height,X=new Uint8Array(ne);S0(e,W.data_offset,X,ne);var se=W.palette_offset,V=W.transparent_index;V===null&&(V=256);var Y=W.width,ue=n-Y,We=Y,U=4*(W.y*n+W.x),ee=4*((W.y+W.height)*n+W.x),de=U,xe=4*ue;W.interlaced===!0&&(xe+=4*n*7);for(var Ae=8,_e=0,Ie=X.length;_e<Ie;++_e){var Ne=X[_e];if(We===0&&(We=Y,(de+=xe)>=ee&&(xe=4*ue+4*n*(Ae-1),de=U+(Y+ue)*(Ae<<1),Ae>>=1)),Ne===V)de+=4;else{var st=e[se+3*Ne],gt=e[se+3*Ne+1],ae=e[se+3*Ne+2];he[de++]=ae,he[de++]=gt,he[de++]=st,he[de++]=255}--We}},this.decodeAndBlitFrameRGBA=function(G,he){var W=this.frameInfo(G),ne=W.width*W.height,X=new Uint8Array(ne);S0(e,W.data_offset,X,ne);var se=W.palette_offset,V=W.transparent_index;V===null&&(V=256);var Y=W.width,ue=n-Y,We=Y,U=4*(W.y*n+W.x),ee=4*((W.y+W.height)*n+W.x),de=U,xe=4*ue;W.interlaced===!0&&(xe+=4*n*7);for(var Ae=8,_e=0,Ie=X.length;_e<Ie;++_e){var Ne=X[_e];if(We===0&&(We=Y,(de+=xe)>=ee&&(xe=4*ue+4*n*(Ae-1),de=U+(Y+ue)*(Ae<<1),Ae>>=1)),Ne===V)de+=4;else{var st=e[se+3*Ne],gt=e[se+3*Ne+1],ae=e[se+3*Ne+2];he[de++]=st,he[de++]=gt,he[de++]=ae,he[de++]=255}--We}}}function S0(e,t,n,i){for(var o=e[t++],l=1<<o,c=l+1,p=c+1,m=o+1,y=(1<<m)-1,b=0,w=0,A=0,C=e[t++],M=new Int32Array(4096),N=null;;){for(;b<16&&C!==0;)w|=e[t++]<<b,b+=8,C===1?C=e[t++]:--C;if(b<m)break;var F=w&y;if(w>>=m,b-=m,F!==l){if(F===c)break;for(var j=F<p?F:N,z=0,$=j;$>l;)$=M[$]>>8,++z;var pe=$;if(A+z+(j!==F?1:0)>i)return void or.log("Warning, gif stream longer than expected.");n[A++]=pe;var Ce=A+=z;for(j!==F&&(n[A++]=pe),$=j;z--;)$=M[$],n[--Ce]=255&$,$>>=8;N!==null&&p<4096&&(M[p++]=N<<8|pe,p>=y+1&&m<12&&(++m,y=y<<1|1)),N=F}else p=c+1,y=(1<<(m=o+1))-1,N=null}return A!==i&&or.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function bf(e){var t,n,i,o,l,c=Math.floor,p=new Array(64),m=new Array(64),y=new Array(64),b=new Array(64),w=new Array(65535),A=new Array(65535),C=new Array(64),M=new Array(64),N=[],F=0,j=7,z=new Array(64),$=new Array(64),pe=new Array(64),Ce=new Array(256),Te=new Array(2048),ke=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],we=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],he=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(U,ee){for(var de=0,xe=0,Ae=new Array,_e=1;_e<=16;_e++){for(var Ie=1;Ie<=U[_e];Ie++)Ae[ee[xe]]=[],Ae[ee[xe]][0]=de,Ae[ee[xe]][1]=_e,xe++,de++;de*=2}return Ae}function se(U){for(var ee=U[0],de=U[1]-1;de>=0;)ee&1<<de&&(F|=1<<j),de--,--j<0&&(F==255?(V(255),V(0)):V(F),j=7,F=0)}function V(U){N.push(U)}function Y(U){V(U>>8&255),V(255&U)}function ue(U,ee,de,xe,Ae){for(var _e,Ie=Ae[0],Ne=Ae[240],st=function(Qe,ot){var Oe,Le,rt,vt,Lt,Ue,Tt,Mt,jt,Vt,Dt=0;for(jt=0;jt<8;++jt){Oe=Qe[Dt],Le=Qe[Dt+1],rt=Qe[Dt+2],vt=Qe[Dt+3],Lt=Qe[Dt+4],Ue=Qe[Dt+5],Tt=Qe[Dt+6];var Pn=Oe+(Mt=Qe[Dt+7]),tn=Oe-Mt,Kn=Le+Tt,ln=Le-Tt,xn=rt+Ue,Jn=rt-Ue,zt=vt+Lt,Pi=vt-Lt,Fn=Pn+zt,Jr=Pn-zt,_i=Kn+xn,Yn=Kn-xn;Qe[Dt]=Fn+_i,Qe[Dt+4]=Fn-_i;var dn=.707106781*(Yn+Jr);Qe[Dt+2]=Jr+dn,Qe[Dt+6]=Jr-dn;var Yt=.382683433*((Fn=Pi+Jn)-(Yn=ln+tn)),Kt=.5411961*Fn+Yt,lr=1.306562965*Yn+Yt,us=.707106781*(_i=Jn+ln),Ei=tn+us,on=tn-us;Qe[Dt+5]=on+Kt,Qe[Dt+3]=on-Kt,Qe[Dt+1]=Ei+lr,Qe[Dt+7]=Ei-lr,Dt+=8}for(Dt=0,jt=0;jt<8;++jt){Oe=Qe[Dt],Le=Qe[Dt+8],rt=Qe[Dt+16],vt=Qe[Dt+24],Lt=Qe[Dt+32],Ue=Qe[Dt+40],Tt=Qe[Dt+48];var Ki=Oe+(Mt=Qe[Dt+56]),cs=Oe-Mt,oi=Le+Tt,Un=Le-Tt,Ut=rt+Ue,ai=rt-Ue,go=vt+Lt,Ji=vt-Lt,Ai=Ki+go,vi=Ki-go,Si=oi+Ut,Yr=oi-Ut;Qe[Dt]=Ai+Si,Qe[Dt+32]=Ai-Si;var yi=.707106781*(Yr+vi);Qe[Dt+16]=vi+yi,Qe[Dt+48]=vi-yi;var hs=.382683433*((Ai=Ji+ai)-(Yr=Un+cs)),_o=.5411961*Ai+hs,Uo=1.306562965*Yr+hs,qo=.707106781*(Si=ai+Un),Ss=cs+qo,Ws=cs-qo;Qe[Dt+40]=Ws+_o,Qe[Dt+24]=Ws-_o,Qe[Dt+8]=Ss+Uo,Qe[Dt+56]=Ss-Uo,Dt++}for(jt=0;jt<64;++jt)Vt=Qe[jt]*ot[jt],C[jt]=Vt>0?Vt+.5|0:Vt-.5|0;return C}(U,ee),gt=0;gt<64;++gt)M[ke[gt]]=st[gt];var ae=M[0]-de;de=M[0],ae==0?se(xe[0]):(se(xe[A[_e=32767+ae]]),se(w[_e]));for(var fe=63;fe>0&&M[fe]==0;)fe--;if(fe==0)return se(Ie),de;for(var Re,De=1;De<=fe;){for(var le=De;M[De]==0&&De<=fe;)++De;var Ze=De-le;if(Ze>=16){Re=Ze>>4;for(var lt=1;lt<=Re;++lt)se(Ne);Ze&=15}_e=32767+M[De],se(Ae[(Ze<<4)+A[_e]]),se(w[_e]),De++}return fe!=63&&se(Ie),de}function We(U){U=Math.min(Math.max(U,1),100),l!=U&&(function(ee){for(var de=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],xe=0;xe<64;xe++){var Ae=c((de[xe]*ee+50)/100);Ae=Math.min(Math.max(Ae,1),255),p[ke[xe]]=Ae}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ie=0;Ie<64;Ie++){var Ne=c((_e[Ie]*ee+50)/100);Ne=Math.min(Math.max(Ne,1),255),m[ke[Ie]]=Ne}for(var st=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],gt=0,ae=0;ae<8;ae++)for(var fe=0;fe<8;fe++)y[gt]=1/(p[ke[gt]]*st[ae]*st[fe]*8),b[gt]=1/(m[ke[gt]]*st[ae]*st[fe]*8),gt++}(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),l=U)}this.encode=function(U,ee){ee&&We(ee),N=new Array,F=0,j=7,Y(65496),Y(65504),Y(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),Y(1),Y(1),V(0),V(0),function(){Y(65499),Y(132),V(0);for(var Le=0;Le<64;Le++)V(p[Le]);V(1);for(var rt=0;rt<64;rt++)V(m[rt])}(),function(Le,rt){Y(65472),Y(17),V(8),Y(rt),Y(Le),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(U.width,U.height),function(){Y(65476),Y(418),V(0);for(var Le=0;Le<16;Le++)V(O[Le+1]);for(var rt=0;rt<=11;rt++)V(oe[rt]);V(16);for(var vt=0;vt<16;vt++)V(we[vt+1]);for(var Lt=0;Lt<=161;Lt++)V(R[Lt]);V(1);for(var Ue=0;Ue<16;Ue++)V(G[Ue+1]);for(var Tt=0;Tt<=11;Tt++)V(he[Tt]);V(17);for(var Mt=0;Mt<16;Mt++)V(W[Mt+1]);for(var jt=0;jt<=161;jt++)V(ne[jt])}(),Y(65498),Y(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var de=0,xe=0,Ae=0;F=0,j=7,this.encode.displayName="_encode_";for(var _e,Ie,Ne,st,gt,ae,fe,Re,De,le=U.data,Ze=U.width,lt=U.height,Qe=4*Ze,ot=0;ot<lt;){for(_e=0;_e<Qe;){for(gt=Qe*ot+_e,fe=-1,Re=0,De=0;De<64;De++)ae=gt+(Re=De>>3)*Qe+(fe=4*(7&De)),ot+Re>=lt&&(ae-=Qe*(ot+1+Re-lt)),_e+fe>=Qe&&(ae-=_e+fe-Qe+4),Ie=le[ae++],Ne=le[ae++],st=le[ae++],z[De]=(Te[Ie]+Te[Ne+256>>0]+Te[st+512>>0]>>16)-128,$[De]=(Te[Ie+768>>0]+Te[Ne+1024>>0]+Te[st+1280>>0]>>16)-128,pe[De]=(Te[Ie+1280>>0]+Te[Ne+1536>>0]+Te[st+1792>>0]>>16)-128;de=ue(z,y,de,t,i),xe=ue($,b,xe,n,o),Ae=ue(pe,b,Ae,n,o),_e+=32}ot+=8}if(j>=0){var Oe=[];Oe[1]=j+1,Oe[0]=(1<<j+1)-1,se(Oe)}return Y(65497),new Uint8Array(N)},e=e||50,function(){for(var U=String.fromCharCode,ee=0;ee<256;ee++)Ce[ee]=U(ee)}(),t=X(O,oe),n=X(G,he),i=X(we,R),o=X(W,ne),function(){for(var U=1,ee=2,de=1;de<=15;de++){for(var xe=U;xe<ee;xe++)A[32767+xe]=de,w[32767+xe]=[],w[32767+xe][1]=de,w[32767+xe][0]=xe;for(var Ae=-(ee-1);Ae<=-U;Ae++)A[32767+Ae]=de,w[32767+Ae]=[],w[32767+Ae][1]=de,w[32767+Ae][0]=ee-1+Ae;U<<=1,ee<<=1}}(),function(){for(var U=0;U<256;U++)Te[U]=19595*U,Te[U+256>>0]=38470*U,Te[U+512>>0]=7471*U+32768,Te[U+768>>0]=-11059*U,Te[U+1024>>0]=-21709*U,Te[U+1280>>0]=32768*U+8421375,Te[U+1536>>0]=-27439*U,Te[U+1792>>0]=-5329*U}(),We(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Do(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function M0(e){function t(O){if(!O)throw Error("assert :P")}function n(O,oe,we){for(var R=0;4>R;R++)if(O[oe+R]!=we.charCodeAt(R))return!0;return!1}function i(O,oe,we,R,G){for(var he=0;he<G;he++)O[oe+he]=we[R+he]}function o(O,oe,we,R){for(var G=0;G<R;G++)O[oe+G]=we}function l(O){return new Int32Array(O)}function c(O,oe){for(var we=[],R=0;R<O;R++)we.push(new oe);return we}function p(O,oe){var we=[];return function R(G,he,W){for(var ne=W[he],X=0;X<ne&&(G.push(W.length>he+1?[]:new oe),!(W.length<he+1));X++)R(G[X],he+1,W)}(we,0,O),we}var m=function(){var O=this;function oe(f,v){for(var E=1<<v-1>>>0;f&E;)E>>>=1;return E?(f&E-1)+E:f}function we(f,v,E,T,K){t(!(T%E));do f[v+(T-=E)]=K;while(0<T)}function R(f,v,E,T,K){if(t(2328>=K),512>=K)var te=l(512);else if((te=l(K))==null)return 0;return function(ie,ce,me,Pe,Ve,ft){var dt,et,xt=ce,bt=1<<me,Ke=l(16),Ye=l(16);for(t(Ve!=0),t(Pe!=null),t(ie!=null),t(0<me),et=0;et<Ve;++et){if(15<Pe[et])return 0;++Ke[Pe[et]]}if(Ke[0]==Ve)return 0;for(Ye[1]=0,dt=1;15>dt;++dt){if(Ke[dt]>1<<dt)return 0;Ye[dt+1]=Ye[dt]+Ke[dt]}for(et=0;et<Ve;++et)dt=Pe[et],0<Pe[et]&&(ft[Ye[dt]++]=et);if(Ye[15]==1)return(Pe=new G).g=0,Pe.value=ft[0],we(ie,xt,1,bt,Pe),bt;var Ct,St=-1,Pt=bt-1,Zt=0,Ft=1,an=1,s=1<<me;for(et=0,dt=1,Ve=2;dt<=me;++dt,Ve<<=1){if(Ft+=an<<=1,0>(an-=Ke[dt]))return 0;for(;0<Ke[dt];--Ke[dt])(Pe=new G).g=dt,Pe.value=ft[et++],we(ie,xt+Zt,Ve,s,Pe),Zt=oe(Zt,dt)}for(dt=me+1,Ve=2;15>=dt;++dt,Ve<<=1){if(Ft+=an<<=1,0>(an-=Ke[dt]))return 0;for(;0<Ke[dt];--Ke[dt]){if(Pe=new G,(Zt&Pt)!=St){for(xt+=s,Ct=1<<(St=dt)-me;15>St&&!(0>=(Ct-=Ke[St]));)++St,Ct<<=1;bt+=s=1<<(Ct=St-me),ie[ce+(St=Zt&Pt)].g=Ct+me,ie[ce+St].value=xt-ce-St}Pe.g=dt-me,Pe.value=ft[et++],we(ie,xt+(Zt>>me),Ve,s,Pe),Zt=oe(Zt,dt)}}return Ft!=2*Ye[15]-1?0:bt}(f,v,E,T,K,te)}function G(){this.value=this.g=0}function he(){this.value=this.g=0}function W(){this.G=c(5,G),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(xr,he)}function ne(f,v,E,T){t(f!=null),t(v!=null),t(2147483648>T),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=v,f.pa=E,f.Jd=v,f.Yc=E+T,f.Zc=4<=T?E+T-4+1:E,_e(f)}function X(f,v){for(var E=0;0<v--;)E|=Ne(f,128)<<v;return E}function se(f,v){var E=X(f,v);return Ie(f)?-E:E}function V(f,v,E,T){var K,te=0;for(t(f!=null),t(v!=null),t(4294967288>T),f.Sb=T,f.Ra=0,f.u=0,f.h=0,4<T&&(T=4),K=0;K<T;++K)te+=v[E+K]<<8*K;f.Ra=te,f.bb=T,f.oa=v,f.pa=E}function Y(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<ti-8>>>0,++f.bb,f.u-=8;de(f)&&(f.h=1,f.u=0)}function ue(f,v){if(t(0<=v),!f.h&&v<=ui){var E=ee(f)&ea[v];return f.u+=v,Y(f),E}return f.h=1,f.u=0}function We(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ee(f){return f.Ra>>>(f.u&ti-1)>>>0}function de(f){return t(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>ti}function xe(f,v){f.u=v,f.h=de(f)}function Ae(f){f.u>=ta&&(t(f.u>=ta),Y(f))}function _e(f){t(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(t(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function Ie(f){return X(f,1)}function Ne(f,v){var E=f.Ca;0>f.b&&_e(f);var T=f.b,K=E*v>>>8,te=(f.I>>>T>K)+0;for(te?(E-=K,f.I-=K+1<<T>>>0):E=K+1,T=E,K=0;256<=T;)K+=8,T>>=8;return T=7^K+qr[T],f.b-=T,f.Ca=(E<<T)-1,te}function st(f,v,E){f[v+0]=E>>24&255,f[v+1]=E>>16&255,f[v+2]=E>>8&255,f[v+3]=E>>0&255}function gt(f,v){return f[v+0]<<0|f[v+1]<<8}function ae(f,v){return gt(f,v)|f[v+2]<<16}function fe(f,v){return gt(f,v)|gt(f,v+2)<<16}function Re(f,v){var E=1<<v;return t(f!=null),t(0<v),f.X=l(E),f.X==null?0:(f.Mb=32-v,f.Xa=v,1)}function De(f,v){t(f!=null),t(v!=null),t(f.Xa==v.Xa),i(v.X,0,f.X,0,1<<v.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function Ze(f,v,E,T){t(E!=null),t(T!=null);var K=E[0],te=T[0];return K==0&&(K=(f*te+v/2)/v),te==0&&(te=(v*K+f/2)/f),0>=K||0>=te?0:(E[0]=K,T[0]=te,1)}function lt(f,v){return f+(1<<v)-1>>>v}function Qe(f,v){return((4278255360&f)+(4278255360&v)>>>0&4278255360)+((16711935&f)+(16711935&v)>>>0&16711935)>>>0}function ot(f,v){O[v]=function(E,T,K,te,ie,ce,me){var Pe;for(Pe=0;Pe<ie;++Pe){var Ve=O[f](ce[me+Pe-1],K,te+Pe);ce[me+Pe]=Qe(E[T+Pe],Ve)}}}function Oe(){this.ud=this.hd=this.jd=0}function Le(f,v){return((4278124286&(f^v))>>>1)+(f&v)>>>0}function rt(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function vt(f,v){return rt(f+(f-v+.5>>1))}function Lt(f,v,E){return Math.abs(v-E)-Math.abs(f-E)}function Ue(f,v,E,T,K,te,ie){for(T=te[ie-1],E=0;E<K;++E)te[ie+E]=T=Qe(f[v+E],T)}function Tt(f,v,E,T,K){var te;for(te=0;te<E;++te){var ie=f[v+te],ce=ie>>8&255,me=16711935&(me=(me=16711935&ie)+((ce<<16)+ce));T[K+te]=(4278255360&ie)+me>>>0}}function Mt(f,v){v.jd=f>>0&255,v.hd=f>>8&255,v.ud=f>>16&255}function jt(f,v,E,T,K,te){var ie;for(ie=0;ie<T;++ie){var ce=v[E+ie],me=ce>>>8,Pe=ce,Ve=255&(Ve=(Ve=ce>>>16)+((f.jd<<24>>24)*(me<<24>>24)>>>5));Pe=255&(Pe=(Pe=Pe+((f.hd<<24>>24)*(me<<24>>24)>>>5))+((f.ud<<24>>24)*(Ve<<24>>24)>>>5)),K[te+ie]=(4278255360&ce)+(Ve<<16)+Pe}}function Vt(f,v,E,T,K){O[v]=function(te,ie,ce,me,Pe,Ve,ft,dt,et){for(me=ft;me<dt;++me)for(ft=0;ft<et;++ft)Pe[Ve++]=K(ce[T(te[ie++])])},O[f]=function(te,ie,ce,me,Pe,Ve,ft){var dt=8>>te.b,et=te.Ea,xt=te.K[0],bt=te.w;if(8>dt)for(te=(1<<te.b)-1,bt=(1<<dt)-1;ie<ce;++ie){var Ke,Ye=0;for(Ke=0;Ke<et;++Ke)Ke&te||(Ye=T(me[Pe++])),Ve[ft++]=K(xt[Ye&bt]),Ye>>=dt}else O["VP8LMapColor"+E](me,Pe,xt,bt,Ve,ft,ie,ce,et)}}function Dt(f,v,E,T,K){for(E=v+E;v<E;){var te=f[v++];T[K++]=te>>16&255,T[K++]=te>>8&255,T[K++]=te>>0&255}}function Pn(f,v,E,T,K){for(E=v+E;v<E;){var te=f[v++];T[K++]=te>>16&255,T[K++]=te>>8&255,T[K++]=te>>0&255,T[K++]=te>>24&255}}function tn(f,v,E,T,K){for(E=v+E;v<E;){var te=(ie=f[v++])>>16&240|ie>>12&15,ie=ie>>0&240|ie>>28&15;T[K++]=te,T[K++]=ie}}function Kn(f,v,E,T,K){for(E=v+E;v<E;){var te=(ie=f[v++])>>16&248|ie>>13&7,ie=ie>>5&224|ie>>3&31;T[K++]=te,T[K++]=ie}}function ln(f,v,E,T,K){for(E=v+E;v<E;){var te=f[v++];T[K++]=te>>0&255,T[K++]=te>>8&255,T[K++]=te>>16&255}}function xn(f,v,E,T,K,te){if(te==0)for(E=v+E;v<E;)st(T,((te=f[v++])[0]>>24|te[1]>>8&65280|te[2]<<8&16711680|te[3]<<24)>>>0),K+=32;else i(T,K,f,v,E)}function Jn(f,v){O[v][0]=O[f+"0"],O[v][1]=O[f+"1"],O[v][2]=O[f+"2"],O[v][3]=O[f+"3"],O[v][4]=O[f+"4"],O[v][5]=O[f+"5"],O[v][6]=O[f+"6"],O[v][7]=O[f+"7"],O[v][8]=O[f+"8"],O[v][9]=O[f+"9"],O[v][10]=O[f+"10"],O[v][11]=O[f+"11"],O[v][12]=O[f+"12"],O[v][13]=O[f+"13"],O[v][14]=O[f+"0"],O[v][15]=O[f+"0"]}function zt(f){return f==ri||f==ii||f==ws||f==r}function Pi(){this.eb=[],this.size=this.A=this.fb=0}function Fn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Jr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pi,this.f.kb=new Fn,this.sd=null}function _i(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Yn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function dn(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Yt(f,v){var E=f.T,T=v.ba.f.RGBA,K=T.eb,te=T.fb+f.ka*T.A,ie=Hr[v.ba.S],ce=f.y,me=f.O,Pe=f.f,Ve=f.N,ft=f.ea,dt=f.W,et=v.cc,xt=v.dc,bt=v.Mc,Ke=v.Nc,Ye=f.ka,Ct=f.ka+f.T,St=f.U,Pt=St+1>>1;for(Ye==0?ie(ce,me,null,null,Pe,Ve,ft,dt,Pe,Ve,ft,dt,K,te,null,null,St):(ie(v.ec,v.fc,ce,me,et,xt,bt,Ke,Pe,Ve,ft,dt,K,te-T.A,K,te,St),++E);Ye+2<Ct;Ye+=2)et=Pe,xt=Ve,bt=ft,Ke=dt,Ve+=f.Rc,dt+=f.Rc,te+=2*T.A,ie(ce,(me+=2*f.fa)-f.fa,ce,me,et,xt,bt,Ke,Pe,Ve,ft,dt,K,te-T.A,K,te,St);return me+=f.fa,f.j+Ct<f.o?(i(v.ec,v.fc,ce,me,St),i(v.cc,v.dc,Pe,Ve,Pt),i(v.Mc,v.Nc,ft,dt,Pt),E--):1&Ct||ie(ce,me,null,null,Pe,Ve,ft,dt,Pe,Ve,ft,dt,K,te+T.A,null,null,St),E}function Kt(f,v,E){var T=f.F,K=[f.J];if(T!=null){var te=f.U,ie=v.ba.S,ce=ie==Fi||ie==ws;v=v.ba.f.RGBA;var me=[0],Pe=f.ka;me[0]=f.T,f.Kb&&(Pe==0?--me[0]:(--Pe,K[0]-=f.width),f.j+f.ka+f.T==f.o&&(me[0]=f.o-f.j-Pe));var Ve=v.eb;Pe=v.fb+Pe*v.A,f=$n(T,K[0],f.width,te,me,Ve,Pe+(ce?0:3),v.A),t(E==me),f&&zt(ie)&&Or(Ve,Pe,ce,te,me,v.A)}return 0}function lr(f){var v=f.ma,E=v.ba.S,T=11>E,K=E==cn||E==Bo||E==Fi||E==Gr||E==12||zt(E);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!ka(v.Oa,f,K?11:12))return 0;if(K&&zt(E)&&Bt(),f.da)alert("todo:use_scaling");else{if(T){if(v.Ib=dn,f.Kb){if(E=f.U+1>>1,v.memory=l(f.U+2*E),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+f.U,v.Mc=v.cc,v.Nc=v.dc+E,v.Ib=Yt,Bt()}}else alert("todo:EmitYUV");K&&(v.Jb=Kt,T&&tt())}if(T&&!Ya){for(f=0;256>f;++f)Kl[f]=89858*(f-128)+Ll>>Zl,Jl[f]=-22014*(f-128)+Ll,Rh[f]=-45773*(f-128),Ih[f]=113618*(f-128)+Ll>>Zl;for(f=Cl;f<Au;++f)v=76283*(f-16)+Ll>>Zl,Yl[f-Cl]=Xn(v,255),pc[f-Cl]=Xn(v+8>>4,15);Ya=1}return 1}function us(f){var v=f.ma,E=f.U,T=f.T;return t(!(1&f.ka)),0>=E||0>=T?0:(E=v.Ib(f,v),v.Jb!=null&&v.Jb(f,v,E),v.Dc+=E,1)}function Ei(f){f.ma.memory=null}function on(f,v,E,T){return ue(f,8)!=47?0:(v[0]=ue(f,14)+1,E[0]=ue(f,14)+1,T[0]=ue(f,1),ue(f,3)!=0?0:!f.h)}function Ki(f,v){if(4>f)return f+1;var E=f-2>>1;return(2+(1&f)<<E)+ue(v,E)+1}function cs(f,v){return 120<v?v-120:1<=(E=((E=je[v-1])>>4)*f+(8-(15&E)))?E:1;var E}function oi(f,v,E){var T=ee(E),K=f[v+=255&T].g-8;return 0<K&&(xe(E,E.u+8),T=ee(E),v+=f[v].value,v+=T&(1<<K)-1),xe(E,E.u+f[v].g),f[v].value}function Un(f,v,E){return E.g+=f.g,E.value+=f.value<<v>>>0,t(8>=E.g),f.g}function Ut(f,v,E){var T=f.xc;return t((v=T==0?0:f.vc[f.md*(E>>T)+(v>>T)])<f.Wb),f.Ya[v]}function ai(f,v,E,T){var K=f.ab,te=f.c*v,ie=f.C;v=ie+v;var ce=E,me=T;for(T=f.Ta,E=f.Ua;0<K--;){var Pe=f.gc[K],Ve=ie,ft=v,dt=ce,et=me,xt=(me=T,ce=E,Pe.Ea);switch(t(Ve<ft),t(ft<=Pe.nc),Pe.hc){case 2:Wa(dt,et,(ft-Ve)*xt,me,ce);break;case 0:var bt=Ve,Ke=ft,Ye=me,Ct=ce,St=(s=Pe).Ea;bt==0&&(Rs(dt,et,null,null,1,Ye,Ct),Ue(dt,et+1,0,0,St-1,Ye,Ct+1),et+=St,Ct+=St,++bt);for(var Pt=1<<s.b,Zt=Pt-1,Ft=lt(St,s.b),an=s.K,s=s.w+(bt>>s.b)*Ft;bt<Ke;){var a=an,h=s,d=1;for(Li(dt,et,Ye,Ct-St,1,Ye,Ct);d<St;){var _=(d&~Zt)+Pt;_>St&&(_=St),(0,Fs[a[h++]>>8&15])(dt,et+ +d,Ye,Ct+d-St,_-d,Ye,Ct+d),d=_}et+=St,Ct+=St,++bt&Zt||(s+=Ft)}ft!=Pe.nc&&i(me,ce-xt,me,ce+(ft-Ve-1)*xt,xt);break;case 1:for(xt=dt,Ke=et,St=(dt=Pe.Ea)-(Ct=dt&~(Ye=(et=1<<Pe.b)-1)),bt=lt(dt,Pe.b),Pt=Pe.K,Pe=Pe.w+(Ve>>Pe.b)*bt;Ve<ft;){for(Zt=Pt,Ft=Pe,an=new Oe,s=Ke+Ct,a=Ke+dt;Ke<s;)Mt(Zt[Ft++],an),_s(an,xt,Ke,et,me,ce),Ke+=et,ce+=et;Ke<a&&(Mt(Zt[Ft++],an),_s(an,xt,Ke,St,me,ce),Ke+=St,ce+=St),++Ve&Ye||(Pe+=bt)}break;case 3:if(dt==me&&et==ce&&0<Pe.b){for(Ke=me,dt=xt=ce+(ft-Ve)*xt-(Ct=(ft-Ve)*lt(Pe.Ea,Pe.b)),et=me,Ye=ce,bt=[],Ct=(St=Ct)-1;0<=Ct;--Ct)bt[Ct]=et[Ye+Ct];for(Ct=St-1;0<=Ct;--Ct)Ke[dt+Ct]=bt[Ct];Pr(Pe,Ve,ft,me,xt,me,ce)}else Pr(Pe,Ve,ft,dt,et,me,ce)}ce=T,me=E}me!=E&&i(T,E,ce,me,te)}function go(f,v){var E=f.V,T=f.Ba+f.c*f.C,K=v-f.C;if(t(v<=f.l.o),t(16>=K),0<K){var te=f.l,ie=f.Ta,ce=f.Ua,me=te.width;if(ai(f,K,E,T),K=ce=[ce],t((E=f.C)<(T=v)),t(te.v<te.va),T>te.o&&(T=te.o),E<te.j){var Pe=te.j-E;E=te.j,K[0]+=Pe*me}if(E>=T?E=0:(K[0]+=4*te.v,te.ka=E-te.j,te.U=te.va-te.v,te.T=T-E,E=1),E){if(ce=ce[0],11>(E=f.ca).S){var Ve=E.f.RGBA,ft=(T=E.S,K=te.U,te=te.T,Pe=Ve.eb,Ve.A),dt=te;for(Ve=Ve.fb+f.Ma*Ve.A;0<dt--;){var et=ie,xt=ce,bt=K,Ke=Pe,Ye=Ve;switch(T){case di:Dr(et,xt,bt,Ke,Ye);break;case cn:Mr(et,xt,bt,Ke,Ye);break;case ri:Mr(et,xt,bt,Ke,Ye),Or(Ke,Ye,0,bt,1,0);break;case Ka:Oi(et,xt,bt,Ke,Ye);break;case Bo:xn(et,xt,bt,Ke,Ye,1);break;case ii:xn(et,xt,bt,Ke,Ye,1),Or(Ke,Ye,0,bt,1,0);break;case Fi:xn(et,xt,bt,Ke,Ye,0);break;case ws:xn(et,xt,bt,Ke,Ye,0),Or(Ke,Ye,1,bt,1,0);break;case Gr:Qi(et,xt,bt,Ke,Ye);break;case r:Qi(et,xt,bt,Ke,Ye),Hn(Ke,Ye,bt,1,0);break;case bl:ci(et,xt,bt,Ke,Ye);break;default:t(0)}ce+=me,Ve+=ft}f.Ma+=te}else alert("todo:EmitRescaledRowsYUVA");t(f.Ma<=E.height)}}f.C=v,t(f.C<=f.i)}function Ji(f){var v;if(0<f.ua)return 0;for(v=0;v<f.Wb;++v){var E=f.Ya[v].G,T=f.Ya[v].H;if(0<E[1][T[1]+0].g||0<E[2][T[2]+0].g||0<E[3][T[3]+0].g)return 0}return 1}function Ai(f,v,E,T,K,te){if(f.Z!=0){var ie=f.qd,ce=f.rd;for(t(Wn[f.Z]!=null);v<E;++v)Wn[f.Z](ie,ce,T,K,T,K,te),ie=T,ce=K,K+=te;f.qd=ie,f.rd=ce}}function vi(f,v){var E=f.l.ma,T=E.Z==0||E.Z==1?f.l.j:f.C;if(T=f.C<T?T:f.C,t(v<=f.l.o),v>T){var K=f.l.width,te=E.ca,ie=E.tb+K*T,ce=f.V,me=f.Ba+f.c*T,Pe=f.gc;t(f.ab==1),t(Pe[0].hc==3),Di(Pe[0],T,v,ce,me,te,ie),Ai(E,T,v,te,ie,K)}f.C=f.Ma=v}function Si(f,v,E,T,K,te,ie){var ce=f.$/T,me=f.$%T,Pe=f.m,Ve=f.s,ft=E+f.$,dt=ft;K=E+T*K;var et=E+T*te,xt=280+Ve.ua,bt=f.Pb?ce:16777216,Ke=0<Ve.ua?Ve.Wa:null,Ye=Ve.wc,Ct=ft<et?Ut(Ve,me,ce):null;t(f.C<te),t(et<=K);var St=!1;e:for(;;){for(;St||ft<et;){var Pt=0;if(ce>=bt){var Zt=ft-E;t((bt=f).Pb),bt.wd=bt.m,bt.xd=Zt,0<bt.s.ua&&De(bt.s.Wa,bt.s.vb),bt=ce+_t}if(me&Ye||(Ct=Ut(Ve,me,ce)),t(Ct!=null),Ct.Qb&&(v[ft]=Ct.qb,St=!0),!St)if(Ae(Pe),Ct.jc){Pt=Pe,Zt=v;var Ft=ft,an=Ct.pd[ee(Pt)&xr-1];t(Ct.jc),256>an.g?(xe(Pt,Pt.u+an.g),Zt[Ft]=an.value,Pt=0):(xe(Pt,Pt.u+an.g-256),t(256<=an.value),Pt=an.value),Pt==0&&(St=!0)}else Pt=oi(Ct.G[0],Ct.H[0],Pe);if(Pe.h)break;if(St||256>Pt){if(!St)if(Ct.nd)v[ft]=(Ct.qb|Pt<<8)>>>0;else{if(Ae(Pe),St=oi(Ct.G[1],Ct.H[1],Pe),Ae(Pe),Zt=oi(Ct.G[2],Ct.H[2],Pe),Ft=oi(Ct.G[3],Ct.H[3],Pe),Pe.h)break;v[ft]=(Ft<<24|St<<16|Pt<<8|Zt)>>>0}if(St=!1,++ft,++me>=T&&(me=0,++ce,ie!=null&&ce<=te&&!(ce%16)&&ie(f,ce),Ke!=null))for(;dt<ft;)Pt=v[dt++],Ke.X[(506832829*Pt&4294967295)>>>Ke.Mb]=Pt}else if(280>Pt){if(Pt=Ki(Pt-256,Pe),Zt=oi(Ct.G[4],Ct.H[4],Pe),Ae(Pe),Zt=cs(T,Zt=Ki(Zt,Pe)),Pe.h)break;if(ft-E<Zt||K-ft<Pt)break e;for(Ft=0;Ft<Pt;++Ft)v[ft+Ft]=v[ft+Ft-Zt];for(ft+=Pt,me+=Pt;me>=T;)me-=T,++ce,ie!=null&&ce<=te&&!(ce%16)&&ie(f,ce);if(t(ft<=K),me&Ye&&(Ct=Ut(Ve,me,ce)),Ke!=null)for(;dt<ft;)Pt=v[dt++],Ke.X[(506832829*Pt&4294967295)>>>Ke.Mb]=Pt}else{if(!(Pt<xt))break e;for(St=Pt-280,t(Ke!=null);dt<ft;)Pt=v[dt++],Ke.X[(506832829*Pt&4294967295)>>>Ke.Mb]=Pt;Pt=ft,t(!(St>>>(Zt=Ke).Xa)),v[Pt]=Zt.X[St],St=!0}St||t(Pe.h==de(Pe))}if(f.Pb&&Pe.h&&ft<K)t(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&De(f.s.vb,f.s.Wa);else{if(Pe.h)break e;ie!=null&&ie(f,ce>te?te:ce),f.a=0,f.$=ft-E}return 1}return f.a=3,0}function Yr(f){t(f!=null),f.vc=null,f.yc=null,f.Ya=null;var v=f.Wa;v!=null&&(v.X=null),f.vb=null,t(f!=null)}function yi(){var f=new La;return f==null?null:(f.a=0,f.xb=xl,Jn("Predictor","VP8LPredictors"),Jn("Predictor","VP8LPredictors_C"),Jn("PredictorAdd","VP8LPredictorsAdd"),Jn("PredictorAdd","VP8LPredictorsAdd_C"),Wa=Tt,_s=jt,Dr=Dt,Mr=Pn,Qi=tn,ci=Kn,Oi=ln,O.VP8LMapColor32b=gs,O.VP8LMapColor8b=So,f)}function hs(f,v,E,T,K){var te=1,ie=[f],ce=[v],me=T.m,Pe=T.s,Ve=null,ft=0;e:for(;;){if(E)for(;te&&ue(me,1);){var dt=ie,et=ce,xt=T,bt=1,Ke=xt.m,Ye=xt.gc[xt.ab],Ct=ue(Ke,2);if(xt.Oc&1<<Ct)te=0;else{switch(xt.Oc|=1<<Ct,Ye.hc=Ct,Ye.Ea=dt[0],Ye.nc=et[0],Ye.K=[null],++xt.ab,t(4>=xt.ab),Ct){case 0:case 1:Ye.b=ue(Ke,3)+2,bt=hs(lt(Ye.Ea,Ye.b),lt(Ye.nc,Ye.b),0,xt,Ye.K),Ye.K=Ye.K[0];break;case 3:var St,Pt=ue(Ke,8)+1,Zt=16<Pt?0:4<Pt?1:2<Pt?2:3;if(dt[0]=lt(Ye.Ea,Zt),Ye.b=Zt,St=bt=hs(Pt,1,0,xt,Ye.K)){var Ft,an=Pt,s=Ye,a=1<<(8>>s.b),h=l(a);if(h==null)St=0;else{var d=s.K[0],_=s.w;for(h[0]=s.K[0][0],Ft=1;Ft<1*an;++Ft)h[Ft]=Qe(d[_+Ft],h[Ft-1]);for(;Ft<4*a;++Ft)h[Ft]=0;s.K[0]=null,s.K[0]=h,St=1}}bt=St;break;case 2:break;default:t(0)}te=bt}}if(ie=ie[0],ce=ce[0],te&&ue(me,1)&&!(te=1<=(ft=ue(me,4))&&11>=ft)){T.a=3;break e}var k;if(k=te)t:{var S,B,q,J=T,Be=ie,Ee=ce,Je=ft,ut=E,kt=J.m,Ot=J.s,Rt=[null],hn=1,Me=0,Fe=at[Je];n:for(;;){if(ut&&ue(kt,1)){var Ge=ue(kt,3)+2,pt=lt(Be,Ge),Xe=lt(Ee,Ge),ct=pt*Xe;if(!hs(pt,Xe,0,J,Rt))break n;for(Rt=Rt[0],Ot.xc=Ge,S=0;S<ct;++S){var H=Rt[S]>>8&65535;Rt[S]=H,H>=hn&&(hn=H+1)}}if(kt.h)break n;for(B=0;5>B;++B){var Q=P[B];!B&&0<Je&&(Q+=1<<Je),Me<Q&&(Me=Q)}var ve=c(hn*Fe,G),ge=hn,ye=c(ge,W);if(ye==null)var be=null;else t(65536>=ge),be=ye;var $e=l(Me);if(be==null||$e==null||ve==null){J.a=1;break n}var ze=ve;for(S=q=0;S<hn;++S){var He=be[S],it=He.G,nt=He.H,Et=0,Gt=1,Jt=0;for(B=0;5>B;++B){Q=P[B],it[B]=ze,nt[B]=q,!B&&0<Je&&(Q+=1<<Je);i:{var en,zn=Q,Vn=J,Dn=$e,tr=ze,mi=q,Xa=0,lo=Vn.m,Su=ue(lo,1);if(o(Dn,0,0,zn),Su){var uo=ue(lo,1)+1,kl=ue(lo,1),ns=ue(lo,kl==0?1:8);Dn[ns]=1,uo==2&&(Dn[ns=ue(lo,8)]=1);var Wr=1}else{var vr=l(19),Td=ue(lo,4)+4;if(19<Td){Vn.a=3;var yc=0;break i}for(en=0;en<Td;++en)vr[re[en]]=ue(lo,3);var Fh=void 0,Mu=void 0,Nd=Vn,d1=vr,bc=zn,Dd=Dn,jh=0,Qa=Nd.m,Od=8,Id=c(128,G);r:for(;R(Id,0,7,d1,19);){if(ue(Qa,1)){var p1=2+2*ue(Qa,3);if((Fh=2+ue(Qa,p1))>bc)break r}else Fh=bc;for(Mu=0;Mu<bc&&Fh--;){Ae(Qa);var Rd=Id[0+(127&ee(Qa))];xe(Qa,Qa.u+Rd.g);var Ql=Rd.value;if(16>Ql)Dd[Mu++]=Ql,Ql!=0&&(Od=Ql);else{var m1=Ql==16,Fd=Ql-16,g1=g[Fd],jd=ue(Qa,u[Fd])+g1;if(Mu+jd>bc)break r;for(var _1=m1?Od:0;0<jd--;)Dd[Mu++]=_1}}jh=1;break r}jh||(Nd.a=3),Wr=jh}(Wr=Wr&&!lo.h)&&(Xa=R(tr,mi,8,Dn,zn)),Wr&&Xa!=0?yc=Xa:(Vn.a=3,yc=0)}if(yc==0)break n;if(Gt&&D[B]==1&&(Gt=ze[q].g==0),Et+=ze[q].g,q+=yc,3>=B){var Bu,zh=$e[0];for(Bu=1;Bu<Q;++Bu)$e[Bu]>zh&&(zh=$e[Bu]);Jt+=zh}}if(He.nd=Gt,He.Qb=0,Gt&&(He.qb=(it[3][nt[3]+0].value<<24|it[1][nt[1]+0].value<<16|it[2][nt[2]+0].value)>>>0,Et==0&&256>it[0][nt[0]+0].value&&(He.Qb=1,He.qb+=it[0][nt[0]+0].value<<8)),He.jc=!He.Qb&&6>Jt,He.jc){var wc,Aa=He;for(wc=0;wc<xr;++wc){var el=wc,tl=Aa.pd[el],xc=Aa.G[0][Aa.H[0]+el];256<=xc.value?(tl.g=xc.g+256,tl.value=xc.value):(tl.g=0,tl.value=0,el>>=Un(xc,8,tl),el>>=Un(Aa.G[1][Aa.H[1]+el],16,tl),el>>=Un(Aa.G[2][Aa.H[2]+el],0,tl),Un(Aa.G[3][Aa.H[3]+el],24,tl))}}}Ot.vc=Rt,Ot.Wb=hn,Ot.Ya=be,Ot.yc=ve,k=1;break t}k=0}if(!(te=k)){T.a=3;break e}if(0<ft){if(Pe.ua=1<<ft,!Re(Pe.Wa,ft)){T.a=1,te=0;break e}}else Pe.ua=0;var Uh=T,zd=ie,v1=ce,qh=Uh.s,$h=qh.xc;if(Uh.c=zd,Uh.i=v1,qh.md=lt(zd,$h),qh.wc=$h==0?-1:(1<<$h)-1,E){T.xb=Pu;break e}if((Ve=l(ie*ce))==null){T.a=1,te=0;break e}te=(te=Si(T,Ve,0,ie,ce,ce,null))&&!me.h;break e}return te?(K!=null?K[0]=Ve:(t(Ve==null),t(E)),T.$=0,E||Yr(Pe)):Yr(Pe),te}function _o(f,v){var E=f.c*f.i,T=E+v+16*v;return t(f.c<=v),f.V=l(T),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+E+v,1)}function Uo(f,v){var E=f.C,T=v-E,K=f.V,te=f.Ba+f.c*E;for(t(v<=f.l.o);0<T;){var ie=16<T?16:T,ce=f.l.ma,me=f.l.width,Pe=me*ie,Ve=ce.ca,ft=ce.tb+me*E,dt=f.Ta,et=f.Ua;ai(f,ie,K,te),_r(dt,et,Ve,ft,Pe),Ai(ce,E,E+ie,Ve,ft,me),T-=ie,K+=ie*f.c,E+=ie}t(E==v),f.C=f.Ma=v}function qo(){this.ub=this.yd=this.td=this.Rb=0}function Ss(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ws(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function vo(){this.Yb=function(){var f=[];return function v(E,T,K){for(var te=K[T],ie=0;ie<te&&(E.push(K.length>T+1?[]:0),!(K.length<T+1));ie++)v(E[ie],T+1,K)}(f,0,[3,11]),f}()}function _l(){this.jb=l(3),this.Wc=p([4,8],vo),this.Xc=p([4,17],vo)}function vl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function $o(){this.ld=this.La=this.dd=this.tc=0}function za(){this.Na=this.la=0}function yl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yo(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new $o),this.Y=0,this.ya=Array(new yo),this.aa=0,this.l=new bi}function pa(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Ua(){this.cb=this.a=0,this.sc="",this.m=new We,this.Od=new qo,this.Kc=new Ss,this.ed=new vl,this.Qa=new Ws,this.Ic=this.$c=this.Aa=0,this.D=new bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,We),this.ia=0,this.pb=c(4,yl),this.Pa=new _l,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new pa),this.Hd=0,this.rb=Array(new za),this.sb=0,this.wa=Array(new $o),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yo),this.L=this.aa=0,this.gd=p([4,2],$o),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function bi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function On(){var f=new Ua;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,rn||(rn=fs)),f}function vn(f,v,E){return f.a==0&&(f.a=v,f.sc=E,f.cb=0),0}function Zs(f,v,E){return 3<=E&&f[v+0]==157&&f[v+1]==1&&f[v+2]==42}function Ms(f,v){if(f==null)return 0;if(f.a=0,f.sc="OK",v==null)return vn(f,2,"null VP8Io passed to VP8GetHeaders()");var E=v.data,T=v.w,K=v.ha;if(4>K)return vn(f,7,"Truncated header.");var te=E[T+0]|E[T+1]<<8|E[T+2]<<16,ie=f.Od;if(ie.Rb=!(1&te),ie.td=te>>1&7,ie.yd=te>>4&1,ie.ub=te>>5,3<ie.td)return vn(f,3,"Incorrect keyframe parameters.");if(!ie.yd)return vn(f,4,"Frame not displayable.");T+=3,K-=3;var ce=f.Kc;if(ie.Rb){if(7>K)return vn(f,7,"cannot parse picture header");if(!Zs(E,T,K))return vn(f,3,"Bad code word");ce.c=16383&(E[T+4]<<8|E[T+3]),ce.Td=E[T+4]>>6,ce.i=16383&(E[T+6]<<8|E[T+5]),ce.Ud=E[T+6]>>6,T+=7,K-=7,f.za=ce.c+15>>4,f.Ub=ce.i+15>>4,v.width=ce.c,v.height=ce.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,o((te=f.Pa).jb,0,255,te.jb.length),t((te=f.Qa)!=null),te.Cb=0,te.Bb=0,te.Fb=1,o(te.Zb,0,0,te.Zb.length),o(te.Lb,0,0,te.Lb)}if(ie.ub>K)return vn(f,7,"bad partition length");ne(te=f.m,E,T,ie.ub),T+=ie.ub,K-=ie.ub,ie.Rb&&(ce.Ld=Ie(te),ce.Kd=Ie(te)),ce=f.Qa;var me,Pe=f.Pa;if(t(te!=null),t(ce!=null),ce.Cb=Ie(te),ce.Cb){if(ce.Bb=Ie(te),Ie(te)){for(ce.Fb=Ie(te),me=0;4>me;++me)ce.Zb[me]=Ie(te)?se(te,7):0;for(me=0;4>me;++me)ce.Lb[me]=Ie(te)?se(te,6):0}if(ce.Bb)for(me=0;3>me;++me)Pe.jb[me]=Ie(te)?X(te,8):255}else ce.Bb=0;if(te.Ka)return vn(f,3,"cannot parse segment header");if((ce=f.ed).zd=Ie(te),ce.Tb=X(te,6),ce.wb=X(te,3),ce.Pc=Ie(te),ce.Pc&&Ie(te)){for(Pe=0;4>Pe;++Pe)Ie(te)&&(ce.vd[Pe]=se(te,6));for(Pe=0;4>Pe;++Pe)Ie(te)&&(ce.od[Pe]=se(te,6))}if(f.L=ce.Tb==0?0:ce.zd?1:2,te.Ka)return vn(f,3,"cannot parse filter header");var Ve=K;if(K=me=T,T=me+Ve,ce=Ve,f.Xb=(1<<X(f.m,2))-1,Ve<3*(Pe=f.Xb))E=7;else{for(me+=3*Pe,ce-=3*Pe,Ve=0;Ve<Pe;++Ve){var ft=E[K+0]|E[K+1]<<8|E[K+2]<<16;ft>ce&&(ft=ce),ne(f.Jc[+Ve],E,me,ft),me+=ft,ce-=ft,K+=3}ne(f.Jc[+Pe],E,me,ce),E=me<T?0:5}if(E!=0)return vn(f,E,"cannot parse partitions");for(E=X(me=f.m,7),K=Ie(me)?se(me,4):0,T=Ie(me)?se(me,4):0,ce=Ie(me)?se(me,4):0,Pe=Ie(me)?se(me,4):0,me=Ie(me)?se(me,4):0,Ve=f.Qa,ft=0;4>ft;++ft){if(Ve.Cb){var dt=Ve.Zb[ft];Ve.Fb||(dt+=E)}else{if(0<ft){f.pb[ft]=f.pb[0];continue}dt=E}var et=f.pb[ft];et.Sc[0]=At[Xn(dt+K,127)],et.Sc[1]=$t[Xn(dt+0,127)],et.Eb[0]=2*At[Xn(dt+T,127)],et.Eb[1]=101581*$t[Xn(dt+ce,127)]>>16,8>et.Eb[1]&&(et.Eb[1]=8),et.Qc[0]=At[Xn(dt+Pe,117)],et.Qc[1]=$t[Xn(dt+me,127)],et.lc=dt+me}if(!ie.Rb)return vn(f,4,"Not a key frame.");for(Ie(te),ie=f.Pa,E=0;4>E;++E){for(K=0;8>K;++K)for(T=0;3>T;++T)for(ce=0;11>ce;++ce)Pe=Ne(te,xs[E][K][T][ce])?X(te,8):pi[E][K][T][ce],ie.Wc[E][K].Yb[T][ce]=Pe;for(K=0;17>K;++K)ie.Xc[E][K]=ie.Wc[E][wl[K]]}return f.kc=Ie(te),f.kc&&(f.Bd=X(te,8)),f.cb=1}function fs(f,v,E,T,K,te,ie){var ce=v[K].Yb[E];for(E=0;16>K;++K){if(!Ne(f,ce[E+0]))return K;for(;!Ne(f,ce[E+1]);)if(ce=v[++K].Yb[0],E=0,K==16)return 16;var me=v[K+1].Yb;if(Ne(f,ce[E+2])){var Pe=f,Ve=0;if(Ne(Pe,(dt=ce)[(ft=E)+3]))if(Ne(Pe,dt[ft+6])){for(ce=0,ft=2*(Ve=Ne(Pe,dt[ft+8]))+(dt=Ne(Pe,dt[ft+9+Ve])),Ve=0,dt=En[ft];dt[ce];++ce)Ve+=Ve+Ne(Pe,dt[ce]);Ve+=3+(8<<ft)}else Ne(Pe,dt[ft+7])?(Ve=7+2*Ne(Pe,165),Ve+=Ne(Pe,145)):Ve=5+Ne(Pe,159);else Ve=Ne(Pe,dt[ft+4])?3+Ne(Pe,dt[ft+5]):2;ce=me[2]}else Ve=1,ce=me[1];me=ie+si[K],0>(Pe=f).b&&_e(Pe);var ft,dt=Pe.b,et=(ft=Pe.Ca>>1)-(Pe.I>>dt)>>31;--Pe.b,Pe.Ca+=et,Pe.Ca|=1,Pe.I-=(ft+1&et)<<dt,te[me]=((Ve^et)-et)*T[(0<K)+0]}return 16}function wo(f){var v=f.rb[f.sb-1];v.la=0,v.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function bn(f,v){if(f==null)return 0;if(v==null)return vn(f,2,"NULL VP8Io parameter in VP8Decode().");if(!f.cb&&!Ms(f,v))return 0;if(t(f.cb),v.ac==null||v.ac(v)){v.ob&&(f.L=0);var E=Xl[f.L];if(f.L==2?(f.yb=0,f.zb=0):(f.yb=v.v-E>>4,f.zb=v.j-E>>4,0>f.yb&&(f.yb=0),0>f.zb&&(f.zb=0)),f.Va=v.o+15+E>>4,f.Hb=v.va+15+E>>4,f.Hb>f.za&&(f.Hb=f.za),f.Va>f.Ub&&(f.Va=f.Ub),0<f.L){var T=f.ed;for(E=0;4>E;++E){var K;if(f.Qa.Cb){var te=f.Qa.Lb[E];f.Qa.Fb||(te+=T.Tb)}else te=T.Tb;for(K=0;1>=K;++K){var ie=f.gd[E][K],ce=te;if(T.Pc&&(ce+=T.vd[0],K&&(ce+=T.od[0])),0<(ce=0>ce?0:63<ce?63:ce)){var me=ce;0<T.wb&&(me=4<T.wb?me>>2:me>>1)>9-T.wb&&(me=9-T.wb),1>me&&(me=1),ie.dd=me,ie.tc=2*ce+me,ie.ld=40<=ce?2:15<=ce?1:0}else ie.tc=0;ie.La=K}}}E=0}else vn(f,6,"Frame setup failed"),E=f.a;if(E=E==0){if(E){f.$c=0,0<f.Aa||(f.Ic=_c);e:{E=f.Ic,T=4*(me=f.za);var Pe=32*me,Ve=me+1,ft=0<f.L?me*(0<f.Aa?2:1):0,dt=(f.Aa==2?2:1)*me;if((ie=T+832+(K=3*(16*E+Xl[f.L])/2*Pe)+(te=f.Fa!=null&&0<f.Fa.length?f.Kc.c*f.Kc.i:0))!=ie)E=0;else{if(ie>f.Vb){if(f.Vb=0,f.Ec=l(ie),f.Fc=0,f.Ec==null){E=vn(f,1,"no memory during frame initialization.");break e}f.Vb=ie}ie=f.Ec,ce=f.Fc,f.Ac=ie,f.Bc=ce,ce+=T,f.Gd=c(Pe,pa),f.Hd=0,f.rb=c(Ve+1,za),f.sb=1,f.wa=ft?c(ft,$o):null,f.Y=0,f.D.Nb=0,f.D.wa=f.wa,f.D.Y=f.Y,0<f.Aa&&(f.D.Y+=me),t(!0),f.oc=ie,f.pc=ce,ce+=832,f.ya=c(dt,yo),f.aa=0,f.D.ya=f.ya,f.D.aa=f.aa,f.Aa==2&&(f.D.aa+=me),f.R=16*me,f.B=8*me,me=(Pe=Xl[f.L])*f.R,Pe=Pe/2*f.B,f.sa=ie,f.ta=ce+me,f.qa=f.sa,f.ra=f.ta+16*E*f.R+Pe,f.Ha=f.qa,f.Ia=f.ra+8*E*f.B+Pe,f.$c=0,ce+=K,f.mb=te?ie:null,f.nb=te?ce:null,t(ce+te<=f.Fc+f.Vb),wo(f),o(f.Ac,f.Bc,0,T),E=1}}if(E){if(v.ka=0,v.y=f.sa,v.O=f.ta,v.f=f.qa,v.N=f.ra,v.ea=f.Ha,v.Vd=f.Ia,v.fa=f.R,v.Rc=f.B,v.F=null,v.J=0,!Za){for(E=-255;255>=E;++E)Qn[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)es[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)oo[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)bs[255+E]=0>E?0:255<E?255:E;Za=1}js=xo,Ii=Vo,vs=ds,ni=ur,$r=ps,cr=qa,Mo=wa,Pa=ms,Ea=Ti,Vr=Yo,hi=Ko,ro=Jo,ys=Cr,na=Ga,io=ba,so=sn,zs=Xr,Ri=Po,ji[0]=Nn,ji[1]=ma,ji[2]=yn,ji[3]=Mi,ji[4]=_a,ji[5]=Xs,ji[6]=Wo,ji[7]=Bi,ji[8]=va,ji[9]=Ns,ts[0]=Go,ts[1]=ga,ts[2]=Yi,ts[3]=Ts,ts[4]=Lr,ts[5]=$a,ts[6]=Ho,Ci[0]=Ds,Ci[1]=Js,Ci[2]=Lo,Ci[3]=mr,Ci[4]=Co,Ci[5]=Va,Ci[6]=Zo,E=1}else E=0}E&&(E=function(et,xt){for(et.M=0;et.M<et.Va;++et.M){var bt,Ke=et.Jc[et.M&et.Xb],Ye=et.m,Ct=et;for(bt=0;bt<Ct.za;++bt){var St=Ye,Pt=Ct,Zt=Pt.Ac,Ft=Pt.Bc+4*bt,an=Pt.zc,s=Pt.ya[Pt.aa+bt];if(Pt.Qa.Bb?s.$b=Ne(St,Pt.Pa.jb[0])?2+Ne(St,Pt.Pa.jb[2]):Ne(St,Pt.Pa.jb[1]):s.$b=0,Pt.kc&&(s.Ad=Ne(St,Pt.Bd)),s.Za=!Ne(St,145)+0,s.Za){var a=s.Ob,h=0;for(Pt=0;4>Pt;++Pt){var d,_=an[0+Pt];for(d=0;4>d;++d){_=hr[Zt[Ft+d]][_];for(var k=Ar[Ne(St,_[0])];0<k;)k=Ar[2*k+Ne(St,_[k])];_=-k,Zt[Ft+d]=_}i(a,h,Zt,Ft,4),h+=4,an[0+Pt]=_}}else _=Ne(St,156)?Ne(St,128)?1:3:Ne(St,163)?2:0,s.Ob[0]=_,o(Zt,Ft,_,4),o(an,0,_,4);s.Dd=Ne(St,142)?Ne(St,114)?Ne(St,183)?1:3:2:0}if(Ct.m.Ka)return vn(et,7,"Premature end-of-partition0 encountered.");for(;et.ja<et.za;++et.ja){if(Ct=Ke,St=(Ye=et).rb[Ye.sb-1],Zt=Ye.rb[Ye.sb+Ye.ja],bt=Ye.ya[Ye.aa+Ye.ja],Ft=Ye.kc?bt.Ad:0)St.la=Zt.la=0,bt.Za||(St.Na=Zt.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var S,B;if(St=Zt,Zt=Ct,Ft=Ye.Pa.Xc,an=Ye.ya[Ye.aa+Ye.ja],s=Ye.pb[an.$b],Pt=an.ad,a=0,h=Ye.rb[Ye.sb-1],_=d=0,o(Pt,a,0,384),an.Za)var q=0,J=Ft[3];else{k=l(16);var Be=St.Na+h.Na;if(Be=rn(Zt,Ft[1],Be,s.Eb,0,k,0),St.Na=h.Na=(0<Be)+0,1<Be)js(k,0,Pt,a);else{var Ee=k[0]+3>>3;for(k=0;256>k;k+=16)Pt[a+k]=Ee}q=1,J=Ft[0]}var Je=15&St.la,ut=15&h.la;for(k=0;4>k;++k){var kt=1&ut;for(Ee=B=0;4>Ee;++Ee)Je=Je>>1|(kt=(Be=rn(Zt,J,Be=kt+(1&Je),s.Sc,q,Pt,a))>q)<<7,B=B<<2|(3<Be?3:1<Be?2:Pt[a+0]!=0),a+=16;Je>>=4,ut=ut>>1|kt<<7,d=(d<<8|B)>>>0}for(J=Je,q=ut>>4,S=0;4>S;S+=2){for(B=0,Je=St.la>>4+S,ut=h.la>>4+S,k=0;2>k;++k){for(kt=1&ut,Ee=0;2>Ee;++Ee)Be=kt+(1&Je),Je=Je>>1|(kt=0<(Be=rn(Zt,Ft[2],Be,s.Qc,0,Pt,a)))<<3,B=B<<2|(3<Be?3:1<Be?2:Pt[a+0]!=0),a+=16;Je>>=2,ut=ut>>1|kt<<5}_|=B<<4*S,J|=Je<<4<<S,q|=(240&ut)<<S}St.la=J,h.la=q,an.Hc=d,an.Gc=_,an.ia=43690&_?0:s.ia,Ft=!(d|_)}if(0<Ye.L&&(Ye.wa[Ye.Y+Ye.ja]=Ye.gd[bt.$b][bt.Za],Ye.wa[Ye.Y+Ye.ja].La|=!Ft),Ct.Ka)return vn(et,7,"Premature end-of-file encountered.")}if(wo(et),Ye=xt,Ct=1,bt=(Ke=et).D,St=0<Ke.L&&Ke.M>=Ke.zb&&Ke.M<=Ke.Va,Ke.Aa==0)e:{if(bt.M=Ke.M,bt.uc=St,Ca(Ke,bt),Ct=1,bt=(B=Ke.D).Nb,St=(_=Xl[Ke.L])*Ke.R,Zt=_/2*Ke.B,k=16*bt*Ke.R,Ee=8*bt*Ke.B,Ft=Ke.sa,an=Ke.ta-St+k,s=Ke.qa,Pt=Ke.ra-Zt+Ee,a=Ke.Ha,h=Ke.Ia-Zt+Ee,ut=(Je=B.M)==0,d=Je>=Ke.Va-1,Ke.Aa==2&&Ca(Ke,B),B.uc)for(kt=(Be=Ke).D.M,t(Be.D.uc),B=Be.yb;B<Be.Hb;++B){q=B,J=kt;var Ot=(Rt=(Q=Be).D).Nb;S=Q.R;var Rt=Rt.wa[Rt.Y+q],hn=Q.sa,Me=Q.ta+16*Ot*S+16*q,Fe=Rt.dd,Ge=Rt.tc;if(Ge!=0)if(t(3<=Ge),Q.L==1)0<q&&so(hn,Me,S,Ge+4),Rt.La&&Ri(hn,Me,S,Ge),0<J&&io(hn,Me,S,Ge+4),Rt.La&&zs(hn,Me,S,Ge);else{var pt=Q.B,Xe=Q.qa,ct=Q.ra+8*Ot*pt+8*q,H=Q.Ha,Q=Q.Ia+8*Ot*pt+8*q;Ot=Rt.ld,0<q&&(Pa(hn,Me,S,Ge+4,Fe,Ot),Vr(Xe,ct,H,Q,pt,Ge+4,Fe,Ot)),Rt.La&&(ro(hn,Me,S,Ge,Fe,Ot),na(Xe,ct,H,Q,pt,Ge,Fe,Ot)),0<J&&(Mo(hn,Me,S,Ge+4,Fe,Ot),Ea(Xe,ct,H,Q,pt,Ge+4,Fe,Ot)),Rt.La&&(hi(hn,Me,S,Ge,Fe,Ot),ys(Xe,ct,H,Q,pt,Ge,Fe,Ot))}}if(Ke.ia&&alert("todo:DitherRow"),Ye.put!=null){if(B=16*Je,Je=16*(Je+1),ut?(Ye.y=Ke.sa,Ye.O=Ke.ta+k,Ye.f=Ke.qa,Ye.N=Ke.ra+Ee,Ye.ea=Ke.Ha,Ye.W=Ke.Ia+Ee):(B-=_,Ye.y=Ft,Ye.O=an,Ye.f=s,Ye.N=Pt,Ye.ea=a,Ye.W=h),d||(Je-=_),Je>Ye.o&&(Je=Ye.o),Ye.F=null,Ye.J=null,Ke.Fa!=null&&0<Ke.Fa.length&&B<Je&&(Ye.J=gr(Ke,Ye,B,Je-B),Ye.F=Ke.mb,Ye.F==null&&Ye.F.length==0)){Ct=vn(Ke,3,"Could not decode alpha data.");break e}B<Ye.j&&(_=Ye.j-B,B=Ye.j,t(!(1&_)),Ye.O+=Ke.R*_,Ye.N+=Ke.B*(_>>1),Ye.W+=Ke.B*(_>>1),Ye.F!=null&&(Ye.J+=Ye.width*_)),B<Je&&(Ye.O+=Ye.v,Ye.N+=Ye.v>>1,Ye.W+=Ye.v>>1,Ye.F!=null&&(Ye.J+=Ye.v),Ye.ka=B-Ye.j,Ye.U=Ye.va-Ye.v,Ye.T=Je-B,Ct=Ye.put(Ye))}bt+1!=Ke.Ic||d||(i(Ke.sa,Ke.ta-St,Ft,an+16*Ke.R,St),i(Ke.qa,Ke.ra-Zt,s,Pt+8*Ke.B,Zt),i(Ke.Ha,Ke.Ia-Zt,a,h+8*Ke.B,Zt))}if(!Ct)return vn(et,6,"Output aborted.")}return 1}(f,v)),v.bc!=null&&v.bc(v),E&=1}return E?(f.cb=0,E):0}function jn(f,v,E,T,K){K=f[v+E+32*T]+(K>>3),f[v+E+32*T]=-256&K?0>K?0:255:K}function Ks(f,v,E,T,K,te){jn(f,v,0,E,T+K),jn(f,v,1,E,T+te),jn(f,v,2,E,T-te),jn(f,v,3,E,T-K)}function Nr(f){return(20091*f>>16)+f}function Ur(f,v,E,T){var K,te=0,ie=l(16);for(K=0;4>K;++K){var ce=f[v+0]+f[v+8],me=f[v+0]-f[v+8],Pe=(35468*f[v+4]>>16)-Nr(f[v+12]),Ve=Nr(f[v+4])+(35468*f[v+12]>>16);ie[te+0]=ce+Ve,ie[te+1]=me+Pe,ie[te+2]=me-Pe,ie[te+3]=ce-Ve,te+=4,v++}for(K=te=0;4>K;++K)ce=(f=ie[te+0]+4)+ie[te+8],me=f-ie[te+8],Pe=(35468*ie[te+4]>>16)-Nr(ie[te+12]),jn(E,T,0,0,ce+(Ve=Nr(ie[te+4])+(35468*ie[te+12]>>16))),jn(E,T,1,0,me+Pe),jn(E,T,2,0,me-Pe),jn(E,T,3,0,ce-Ve),te++,T+=32}function qa(f,v,E,T){var K=f[v+0]+4,te=35468*f[v+4]>>16,ie=Nr(f[v+4]),ce=35468*f[v+1]>>16;Ks(E,T,0,K+ie,f=Nr(f[v+1]),ce),Ks(E,T,1,K+te,f,ce),Ks(E,T,2,K-te,f,ce),Ks(E,T,3,K-ie,f,ce)}function Vo(f,v,E,T,K){Ur(f,v,E,T),K&&Ur(f,v+16,E,T+4)}function ds(f,v,E,T){Ii(f,v+0,E,T,1),Ii(f,v+32,E,T+128,1)}function ur(f,v,E,T){var K;for(f=f[v+0]+4,K=0;4>K;++K)for(v=0;4>v;++v)jn(E,T,v,K,f)}function ps(f,v,E,T){f[v+0]&&ni(f,v+0,E,T),f[v+16]&&ni(f,v+16,E,T+4),f[v+32]&&ni(f,v+32,E,T+128),f[v+48]&&ni(f,v+48,E,T+128+4)}function xo(f,v,E,T){var K,te=l(16);for(K=0;4>K;++K){var ie=f[v+0+K]+f[v+12+K],ce=f[v+4+K]+f[v+8+K],me=f[v+4+K]-f[v+8+K],Pe=f[v+0+K]-f[v+12+K];te[0+K]=ie+ce,te[8+K]=ie-ce,te[4+K]=Pe+me,te[12+K]=Pe-me}for(K=0;4>K;++K)ie=(f=te[0+4*K]+3)+te[3+4*K],ce=te[1+4*K]+te[2+4*K],me=te[1+4*K]-te[2+4*K],Pe=f-te[3+4*K],E[T+0]=ie+ce>>3,E[T+16]=Pe+me>>3,E[T+32]=ie-ce>>3,E[T+48]=Pe-me>>3,T+=64}function Bs(f,v,E){var T,K=v-32,te=er,ie=255-f[K-1];for(T=0;T<E;++T){var ce,me=te,Pe=ie+f[v-1];for(ce=0;ce<E;++ce)f[v+ce]=me[Pe+f[K+ce]];v+=32}}function ma(f,v){Bs(f,v,4)}function Js(f,v){Bs(f,v,8)}function ga(f,v){Bs(f,v,16)}function Yi(f,v){var E;for(E=0;16>E;++E)i(f,v+32*E,f,v-32,16)}function Ts(f,v){var E;for(E=16;0<E;--E)o(f,v,f[v-1],16),v+=32}function Ys(f,v,E){var T;for(T=0;16>T;++T)o(v,E+32*T,f,16)}function Go(f,v){var E,T=16;for(E=0;16>E;++E)T+=f[v-1+32*E]+f[v+E-32];Ys(T>>5,f,v)}function Lr(f,v){var E,T=8;for(E=0;16>E;++E)T+=f[v-1+32*E];Ys(T>>4,f,v)}function $a(f,v){var E,T=8;for(E=0;16>E;++E)T+=f[v+E-32];Ys(T>>4,f,v)}function Ho(f,v){Ys(128,f,v)}function gn(f,v,E){return f+2*v+E+2>>2}function yn(f,v){var E,T=v-32;for(T=new Uint8Array([gn(f[T-1],f[T+0],f[T+1]),gn(f[T+0],f[T+1],f[T+2]),gn(f[T+1],f[T+2],f[T+3]),gn(f[T+2],f[T+3],f[T+4])]),E=0;4>E;++E)i(f,v+32*E,T,0,T.length)}function Mi(f,v){var E=f[v-1],T=f[v-1+32],K=f[v-1+64],te=f[v-1+96];st(f,v+0,16843009*gn(f[v-1-32],E,T)),st(f,v+32,16843009*gn(E,T,K)),st(f,v+64,16843009*gn(T,K,te)),st(f,v+96,16843009*gn(K,te,te))}function Nn(f,v){var E,T=4;for(E=0;4>E;++E)T+=f[v+E-32]+f[v-1+32*E];for(T>>=3,E=0;4>E;++E)o(f,v+32*E,T,4)}function _a(f,v){var E=f[v-1+0],T=f[v-1+32],K=f[v-1+64],te=f[v-1-32],ie=f[v+0-32],ce=f[v+1-32],me=f[v+2-32],Pe=f[v+3-32];f[v+0+96]=gn(T,K,f[v-1+96]),f[v+1+96]=f[v+0+64]=gn(E,T,K),f[v+2+96]=f[v+1+64]=f[v+0+32]=gn(te,E,T),f[v+3+96]=f[v+2+64]=f[v+1+32]=f[v+0+0]=gn(ie,te,E),f[v+3+64]=f[v+2+32]=f[v+1+0]=gn(ce,ie,te),f[v+3+32]=f[v+2+0]=gn(me,ce,ie),f[v+3+0]=gn(Pe,me,ce)}function Wo(f,v){var E=f[v+1-32],T=f[v+2-32],K=f[v+3-32],te=f[v+4-32],ie=f[v+5-32],ce=f[v+6-32],me=f[v+7-32];f[v+0+0]=gn(f[v+0-32],E,T),f[v+1+0]=f[v+0+32]=gn(E,T,K),f[v+2+0]=f[v+1+32]=f[v+0+64]=gn(T,K,te),f[v+3+0]=f[v+2+32]=f[v+1+64]=f[v+0+96]=gn(K,te,ie),f[v+3+32]=f[v+2+64]=f[v+1+96]=gn(te,ie,ce),f[v+3+64]=f[v+2+96]=gn(ie,ce,me),f[v+3+96]=gn(ce,me,me)}function Xs(f,v){var E=f[v-1+0],T=f[v-1+32],K=f[v-1+64],te=f[v-1-32],ie=f[v+0-32],ce=f[v+1-32],me=f[v+2-32],Pe=f[v+3-32];f[v+0+0]=f[v+1+64]=te+ie+1>>1,f[v+1+0]=f[v+2+64]=ie+ce+1>>1,f[v+2+0]=f[v+3+64]=ce+me+1>>1,f[v+3+0]=me+Pe+1>>1,f[v+0+96]=gn(K,T,E),f[v+0+64]=gn(T,E,te),f[v+0+32]=f[v+1+96]=gn(E,te,ie),f[v+1+32]=f[v+2+96]=gn(te,ie,ce),f[v+2+32]=f[v+3+96]=gn(ie,ce,me),f[v+3+32]=gn(ce,me,Pe)}function Bi(f,v){var E=f[v+0-32],T=f[v+1-32],K=f[v+2-32],te=f[v+3-32],ie=f[v+4-32],ce=f[v+5-32],me=f[v+6-32],Pe=f[v+7-32];f[v+0+0]=E+T+1>>1,f[v+1+0]=f[v+0+64]=T+K+1>>1,f[v+2+0]=f[v+1+64]=K+te+1>>1,f[v+3+0]=f[v+2+64]=te+ie+1>>1,f[v+0+32]=gn(E,T,K),f[v+1+32]=f[v+0+96]=gn(T,K,te),f[v+2+32]=f[v+1+96]=gn(K,te,ie),f[v+3+32]=f[v+2+96]=gn(te,ie,ce),f[v+3+64]=gn(ie,ce,me),f[v+3+96]=gn(ce,me,Pe)}function Ns(f,v){var E=f[v-1+0],T=f[v-1+32],K=f[v-1+64],te=f[v-1+96];f[v+0+0]=E+T+1>>1,f[v+2+0]=f[v+0+32]=T+K+1>>1,f[v+2+32]=f[v+0+64]=K+te+1>>1,f[v+1+0]=gn(E,T,K),f[v+3+0]=f[v+1+32]=gn(T,K,te),f[v+3+32]=f[v+1+64]=gn(K,te,te),f[v+3+64]=f[v+2+64]=f[v+0+96]=f[v+1+96]=f[v+2+96]=f[v+3+96]=te}function va(f,v){var E=f[v-1+0],T=f[v-1+32],K=f[v-1+64],te=f[v-1+96],ie=f[v-1-32],ce=f[v+0-32],me=f[v+1-32],Pe=f[v+2-32];f[v+0+0]=f[v+2+32]=E+ie+1>>1,f[v+0+32]=f[v+2+64]=T+E+1>>1,f[v+0+64]=f[v+2+96]=K+T+1>>1,f[v+0+96]=te+K+1>>1,f[v+3+0]=gn(ce,me,Pe),f[v+2+0]=gn(ie,ce,me),f[v+1+0]=f[v+3+32]=gn(E,ie,ce),f[v+1+32]=f[v+3+64]=gn(T,E,ie),f[v+1+64]=f[v+3+96]=gn(K,T,E),f[v+1+96]=gn(te,K,T)}function Lo(f,v){var E;for(E=0;8>E;++E)i(f,v+32*E,f,v-32,8)}function mr(f,v){var E;for(E=0;8>E;++E)o(f,v,f[v-1],8),v+=32}function wi(f,v,E){var T;for(T=0;8>T;++T)o(v,E+32*T,f,8)}function Ds(f,v){var E,T=8;for(E=0;8>E;++E)T+=f[v+E-32]+f[v-1+32*E];wi(T>>4,f,v)}function Va(f,v){var E,T=4;for(E=0;8>E;++E)T+=f[v+E-32];wi(T>>3,f,v)}function Co(f,v){var E,T=4;for(E=0;8>E;++E)T+=f[v-1+32*E];wi(T>>3,f,v)}function Zo(f,v){wi(128,f,v)}function Qs(f,v,E){var T=f[v-E],K=f[v+0],te=3*(K-T)+ao[1020+f[v-2*E]-f[v+E]],ie=Er[112+(te+4>>3)];f[v-E]=er[255+T+Er[112+(te+3>>3)]],f[v+0]=er[255+K-ie]}function ko(f,v,E,T){var K=f[v+0],te=f[v+E];return fi[255+f[v-2*E]-f[v-E]]>T||fi[255+te-K]>T}function ya(f,v,E,T){return 4*fi[255+f[v-E]-f[v+0]]+fi[255+f[v-2*E]-f[v+E]]<=T}function Mn(f,v,E,T,K){var te=f[v-3*E],ie=f[v-2*E],ce=f[v-E],me=f[v+0],Pe=f[v+E],Ve=f[v+2*E],ft=f[v+3*E];return 4*fi[255+ce-me]+fi[255+ie-Pe]>T?0:fi[255+f[v-4*E]-te]<=K&&fi[255+te-ie]<=K&&fi[255+ie-ce]<=K&&fi[255+ft-Ve]<=K&&fi[255+Ve-Pe]<=K&&fi[255+Pe-me]<=K}function ba(f,v,E,T){var K=2*T+1;for(T=0;16>T;++T)ya(f,v+T,E,K)&&Qs(f,v+T,E)}function sn(f,v,E,T){var K=2*T+1;for(T=0;16>T;++T)ya(f,v+T*E,1,K)&&Qs(f,v+T*E,1)}function Xr(f,v,E,T){var K;for(K=3;0<K;--K)ba(f,v+=4*E,E,T)}function Po(f,v,E,T){var K;for(K=3;0<K;--K)sn(f,v+=4,E,T)}function eo(f,v,E,T,K,te,ie,ce){for(te=2*te+1;0<K--;){if(Mn(f,v,E,te,ie))if(ko(f,v,E,ce))Qs(f,v,E);else{var me=f,Pe=v,Ve=E,ft=me[Pe-2*Ve],dt=me[Pe-Ve],et=me[Pe+0],xt=me[Pe+Ve],bt=me[Pe+2*Ve],Ke=27*(Ct=ao[1020+3*(et-dt)+ao[1020+ft-xt]])+63>>7,Ye=18*Ct+63>>7,Ct=9*Ct+63>>7;me[Pe-3*Ve]=er[255+me[Pe-3*Ve]+Ct],me[Pe-2*Ve]=er[255+ft+Ye],me[Pe-Ve]=er[255+dt+Ke],me[Pe+0]=er[255+et-Ke],me[Pe+Ve]=er[255+xt-Ye],me[Pe+2*Ve]=er[255+bt-Ct]}v+=T}}function li(f,v,E,T,K,te,ie,ce){for(te=2*te+1;0<K--;){if(Mn(f,v,E,te,ie))if(ko(f,v,E,ce))Qs(f,v,E);else{var me=f,Pe=v,Ve=E,ft=me[Pe-Ve],dt=me[Pe+0],et=me[Pe+Ve],xt=Er[112+((bt=3*(dt-ft))+4>>3)],bt=Er[112+(bt+3>>3)],Ke=xt+1>>1;me[Pe-2*Ve]=er[255+me[Pe-2*Ve]+Ke],me[Pe-Ve]=er[255+ft+bt],me[Pe+0]=er[255+dt-xt],me[Pe+Ve]=er[255+et-Ke]}v+=T}}function wa(f,v,E,T,K,te){eo(f,v,E,1,16,T,K,te)}function ms(f,v,E,T,K,te){eo(f,v,1,E,16,T,K,te)}function Ko(f,v,E,T,K,te){var ie;for(ie=3;0<ie;--ie)li(f,v+=4*E,E,1,16,T,K,te)}function Jo(f,v,E,T,K,te){var ie;for(ie=3;0<ie;--ie)li(f,v+=4,1,E,16,T,K,te)}function Ti(f,v,E,T,K,te,ie,ce){eo(f,v,K,1,8,te,ie,ce),eo(E,T,K,1,8,te,ie,ce)}function Yo(f,v,E,T,K,te,ie,ce){eo(f,v,1,K,8,te,ie,ce),eo(E,T,1,K,8,te,ie,ce)}function Cr(f,v,E,T,K,te,ie,ce){li(f,v+4*K,K,1,8,te,ie,ce),li(E,T+4*K,K,1,8,te,ie,ce)}function Ga(f,v,E,T,K,te,ie,ce){li(f,v+4,1,K,8,te,ie,ce),li(E,T+4,1,K,8,te,ie,ce)}function Eo(){this.ba=new Jr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Yn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ni(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Xo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xa(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new G}function La(){this.xb=this.a=0,this.l=new bi,this.ca=new Jr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xa,this.ab=0,this.gc=c(4,Xo),this.Oc=0}function Qo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new bi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function to(f,v,E,T,K,te,ie){for(f=f==null?0:f[v+0],v=0;v<ie;++v)K[te+v]=f+E[T+v]&255,f=K[te+v]}function Ao(f,v,E,T,K,te,ie){var ce;if(f==null)to(null,null,E,T,K,te,ie);else for(ce=0;ce<ie;++ce)K[te+ce]=f[v+ce]+E[T+ce]&255}function no(f,v,E,T,K,te,ie){if(f==null)to(null,null,E,T,K,te,ie);else{var ce,me=f[v+0],Pe=me,Ve=me;for(ce=0;ce<ie;++ce)Pe=Ve+(me=f[v+ce])-Pe,Ve=E[T+ce]+(-256&Pe?0>Pe?0:255:Pe)&255,Pe=me,K[te+ce]=Ve}}function gr(f,v,E,T){var K=v.width,te=v.o;if(t(f!=null&&v!=null),0>E||0>=T||E+T>te)return null;if(!f.Cc){if(f.ga==null){var ie;if(f.ga=new Qo,(ie=f.ga==null)||(ie=v.width*v.o,t(f.Gb.length==0),f.Gb=l(ie),f.Uc=0,f.Gb==null?ie=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,ie=1),ie=!ie),!ie){ie=f.ga;var ce=f.Fa,me=f.P,Pe=f.qc,Ve=f.mb,ft=f.nb,dt=me+1,et=Pe-1,xt=ie.l;if(t(ce!=null&&Ve!=null&&v!=null),Wn[0]=null,Wn[1]=to,Wn[2]=Ao,Wn[3]=no,ie.ca=Ve,ie.tb=ft,ie.c=v.width,ie.i=v.height,t(0<ie.c&&0<ie.i),1>=Pe)v=0;else if(ie.$a=ce[me+0]>>0&3,ie.Z=ce[me+0]>>2&3,ie.Lc=ce[me+0]>>4&3,me=ce[me+0]>>6&3,0>ie.$a||1<ie.$a||4<=ie.Z||1<ie.Lc||me)v=0;else if(xt.put=us,xt.ac=lr,xt.bc=Ei,xt.ma=ie,xt.width=v.width,xt.height=v.height,xt.Da=v.Da,xt.v=v.v,xt.va=v.va,xt.j=v.j,xt.o=v.o,ie.$a)e:{t(ie.$a==1),v=yi();t:for(;;){if(v==null){v=0;break e}if(t(ie!=null),ie.mc=v,v.c=ie.c,v.i=ie.i,v.l=ie.l,v.l.ma=ie,v.l.width=ie.c,v.l.height=ie.i,v.a=0,V(v.m,ce,dt,et),!hs(ie.c,ie.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Ji(v.s)?(ie.ic=1,ce=v.c*v.i,v.Ta=null,v.Ua=0,v.V=l(ce),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(ie.ic=0,v=_o(v,ie.c)),!v))break t;v=1;break e}ie.mc=null,v=0}else v=et>=ie.c*ie.i;ie=!v}if(ie)return null;f.ga.Lc!=1?f.Ga=0:T=te-E}t(f.ga!=null),t(E+T<=te);e:{if(v=(ce=f.ga).c,te=ce.l.o,ce.$a==0){if(dt=f.rc,et=f.Vc,xt=f.Fa,me=f.P+1+E*v,Pe=f.mb,Ve=f.nb+E*v,t(me<=f.P+f.qc),ce.Z!=0)for(t(Wn[ce.Z]!=null),ie=0;ie<T;++ie)Wn[ce.Z](dt,et,xt,me,Pe,Ve,v),dt=Pe,et=Ve,Ve+=v,me+=v;else for(ie=0;ie<T;++ie)i(Pe,Ve,xt,me,v),dt=Pe,et=Ve,Ve+=v,me+=v;f.rc=dt,f.Vc=et}else{if(t(ce.mc!=null),v=E+T,t((ie=ce.mc)!=null),t(v<=ie.i),ie.C>=v)v=1;else if(ce.ic||tt(),ce.ic){ce=ie.V,dt=ie.Ba,et=ie.c;var bt=ie.i,Ke=(xt=1,me=ie.$/et,Pe=ie.$%et,Ve=ie.m,ft=ie.s,ie.$),Ye=et*bt,Ct=et*v,St=ft.wc,Pt=Ke<Ct?Ut(ft,Pe,me):null;t(Ke<=Ye),t(v<=bt),t(Ji(ft));t:for(;;){for(;!Ve.h&&Ke<Ct;){if(Pe&St||(Pt=Ut(ft,Pe,me)),t(Pt!=null),Ae(Ve),256>(bt=oi(Pt.G[0],Pt.H[0],Ve)))ce[dt+Ke]=bt,++Ke,++Pe>=et&&(Pe=0,++me<=v&&!(me%16)&&vi(ie,me));else{if(!(280>bt)){xt=0;break t}bt=Ki(bt-256,Ve);var Zt,Ft=oi(Pt.G[4],Pt.H[4],Ve);if(Ae(Ve),!(Ke>=(Ft=cs(et,Ft=Ki(Ft,Ve)))&&Ye-Ke>=bt)){xt=0;break t}for(Zt=0;Zt<bt;++Zt)ce[dt+Ke+Zt]=ce[dt+Ke+Zt-Ft];for(Ke+=bt,Pe+=bt;Pe>=et;)Pe-=et,++me<=v&&!(me%16)&&vi(ie,me);Ke<Ct&&Pe&St&&(Pt=Ut(ft,Pe,me))}t(Ve.h==de(Ve))}vi(ie,me>v?v:me);break t}!xt||Ve.h&&Ke<Ye?(xt=0,ie.a=Ve.h?5:3):ie.$=Ke,v=xt}else v=Si(ie,ie.V,ie.Ba,ie.c,ie.i,v,Uo);if(!v){T=0;break e}}E+T>=te&&(f.Cc=1),T=1}if(!T)return null;if(f.Cc&&((T=f.ga)!=null&&(T.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+E*K}function x(f,v,E,T,K,te){for(;0<K--;){var ie,ce=f,me=v+(E?1:0),Pe=f,Ve=v+(E?0:3);for(ie=0;ie<T;++ie){var ft=Pe[Ve+4*ie];ft!=255&&(ft*=32897,ce[me+4*ie+0]=ce[me+4*ie+0]*ft>>23,ce[me+4*ie+1]=ce[me+4*ie+1]*ft>>23,ce[me+4*ie+2]=ce[me+4*ie+2]*ft>>23)}v+=te}}function Z(f,v,E,T,K){for(;0<T--;){var te;for(te=0;te<E;++te){var ie=f[v+2*te+0],ce=15&(Pe=f[v+2*te+1]),me=4369*ce,Pe=(240&Pe|Pe>>4)*me>>16;f[v+2*te+0]=(240&ie|ie>>4)*me>>16&240|(15&ie|ie<<4)*me>>16>>4&15,f[v+2*te+1]=240&Pe|ce}v+=K}}function Se(f,v,E,T,K,te,ie,ce){var me,Pe,Ve=255;for(Pe=0;Pe<K;++Pe){for(me=0;me<T;++me){var ft=f[v+me];te[ie+4*me]=ft,Ve&=ft}v+=E,ie+=ce}return Ve!=255}function qe(f,v,E,T,K){var te;for(te=0;te<K;++te)E[T+te]=f[v+te]>>8}function tt(){Or=x,Hn=Z,$n=Se,_r=qe}function yt(f,v,E){O[f]=function(T,K,te,ie,ce,me,Pe,Ve,ft,dt,et,xt,bt,Ke,Ye,Ct,St){var Pt,Zt=St-1>>1,Ft=ce[me+0]|Pe[Ve+0]<<16,an=ft[dt+0]|et[xt+0]<<16;t(T!=null);var s=3*Ft+an+131074>>2;for(v(T[K+0],255&s,s>>16,bt,Ke),te!=null&&(s=3*an+Ft+131074>>2,v(te[ie+0],255&s,s>>16,Ye,Ct)),Pt=1;Pt<=Zt;++Pt){var a=ce[me+Pt]|Pe[Ve+Pt]<<16,h=ft[dt+Pt]|et[xt+Pt]<<16,d=Ft+a+an+h+524296,_=d+2*(a+an)>>3;s=_+Ft>>1,Ft=(d=d+2*(Ft+h)>>3)+a>>1,v(T[K+2*Pt-1],255&s,s>>16,bt,Ke+(2*Pt-1)*E),v(T[K+2*Pt-0],255&Ft,Ft>>16,bt,Ke+(2*Pt-0)*E),te!=null&&(s=d+an>>1,Ft=_+h>>1,v(te[ie+2*Pt-1],255&s,s>>16,Ye,Ct+(2*Pt-1)*E),v(te[ie+2*Pt+0],255&Ft,Ft>>16,Ye,Ct+(2*Pt+0)*E)),Ft=a,an=h}1&St||(s=3*Ft+an+131074>>2,v(T[K+St-1],255&s,s>>16,bt,Ke+(St-1)*E),te!=null&&(s=3*an+Ft+131074>>2,v(te[ie+St-1],255&s,s>>16,Ye,Ct+(St-1)*E)))}}function Bt(){Hr[di]=Eu,Hr[cn]=Hl,Hr[Ka]=Ls,Hr[Bo]=To,Hr[Fi]=Ja,Hr[Gr]=Wl,Hr[bl]=dc,Hr[ri]=Hl,Hr[ii]=To,Hr[ws]=Ja,Hr[r]=Wl}function qt(f){return f&-16384?0>f?0:255:f>>Oh}function Wt(f,v){return qt((19077*f>>8)+(26149*v>>8)-14234)}function nn(f,v,E){return qt((19077*f>>8)-(6419*v>>8)-(13320*E>>8)+8708)}function pn(f,v){return qt((19077*f>>8)+(33050*v>>8)-17685)}function Bn(f,v,E,T,K){T[K+0]=Wt(f,E),T[K+1]=nn(f,v,E),T[K+2]=pn(f,v)}function ir(f,v,E,T,K){T[K+0]=pn(f,v),T[K+1]=nn(f,v,E),T[K+2]=Wt(f,E)}function In(f,v,E,T,K){var te=nn(f,v,E);v=te<<3&224|pn(f,v)>>3,T[K+0]=248&Wt(f,E)|te>>5,T[K+1]=v}function qn(f,v,E,T,K){var te=240&pn(f,v)|15;T[K+0]=240&Wt(f,E)|nn(f,v,E)>>4,T[K+1]=te}function kr(f,v,E,T,K){T[K+0]=255,Bn(f,v,E,T,K+1)}function wr(f,v,E,T,K){ir(f,v,E,T,K),T[K+3]=255}function xi(f,v,E,T,K){Bn(f,v,E,T,K),T[K+3]=255}function Xn(f,v){return 0>f?0:f>v?v:f}function Qr(f,v,E){O[f]=function(T,K,te,ie,ce,me,Pe,Ve,ft){for(var dt=Ve+(-2&ft)*E;Ve!=dt;)v(T[K+0],te[ie+0],ce[me+0],Pe,Ve),v(T[K+1],te[ie+0],ce[me+0],Pe,Ve+E),K+=2,++ie,++me,Ve+=2*E;1&ft&&v(T[K+0],te[ie+0],ce[me+0],Pe,Ve)}}function Ha(f,v,E){return E==0?f==0?v==0?6:5:v==0?4:0:E}function ei(f,v,E,T,K){switch(f>>>30){case 3:Ii(v,E,T,K,0);break;case 2:cr(v,E,T,K);break;case 1:ni(v,E,T,K)}}function Ca(f,v){var E,T,K=v.M,te=v.Nb,ie=f.oc,ce=f.pc+40,me=f.oc,Pe=f.pc+584,Ve=f.oc,ft=f.pc+600;for(E=0;16>E;++E)ie[ce+32*E-1]=129;for(E=0;8>E;++E)me[Pe+32*E-1]=129,Ve[ft+32*E-1]=129;for(0<K?ie[ce-1-32]=me[Pe-1-32]=Ve[ft-1-32]=129:(o(ie,ce-32-1,127,21),o(me,Pe-32-1,127,9),o(Ve,ft-32-1,127,9)),T=0;T<f.za;++T){var dt=v.ya[v.aa+T];if(0<T){for(E=-1;16>E;++E)i(ie,ce+32*E-4,ie,ce+32*E+12,4);for(E=-1;8>E;++E)i(me,Pe+32*E-4,me,Pe+32*E+4,4),i(Ve,ft+32*E-4,Ve,ft+32*E+4,4)}var et=f.Gd,xt=f.Hd+T,bt=dt.ad,Ke=dt.Hc;if(0<K&&(i(ie,ce-32,et[xt].y,0,16),i(me,Pe-32,et[xt].f,0,8),i(Ve,ft-32,et[xt].ea,0,8)),dt.Za){var Ye=ie,Ct=ce-32+16;for(0<K&&(T>=f.za-1?o(Ye,Ct,et[xt].y[15],4):i(Ye,Ct,et[xt+1].y,0,4)),E=0;4>E;E++)Ye[Ct+128+E]=Ye[Ct+256+E]=Ye[Ct+384+E]=Ye[Ct+0+E];for(E=0;16>E;++E,Ke<<=2)Ye=ie,Ct=ce+mc[E],ji[dt.Ob[E]](Ye,Ct),ei(Ke,bt,16*+E,Ye,Ct)}else if(Ye=Ha(T,K,dt.Ob[0]),ts[Ye](ie,ce),Ke!=0)for(E=0;16>E;++E,Ke<<=2)ei(Ke,bt,16*+E,ie,ce+mc[E]);for(E=dt.Gc,Ye=Ha(T,K,dt.Dd),Ci[Ye](me,Pe),Ci[Ye](Ve,ft),Ke=bt,Ye=me,Ct=Pe,255&(dt=E>>0)&&(170&dt?vs(Ke,256,Ye,Ct):$r(Ke,256,Ye,Ct)),dt=Ve,Ke=ft,255&(E>>=8)&&(170&E?vs(bt,320,dt,Ke):$r(bt,320,dt,Ke)),K<f.Ub-1&&(i(et[xt].y,0,ie,ce+480,16),i(et[xt].f,0,me,Pe+224,8),i(et[xt].ea,0,Ve,ft+224,8)),E=8*te*f.B,et=f.sa,xt=f.ta+16*T+16*te*f.R,bt=f.qa,dt=f.ra+8*T+E,Ke=f.Ha,Ye=f.Ia+8*T+E,E=0;16>E;++E)i(et,xt+E*f.R,ie,ce+32*E,16);for(E=0;8>E;++E)i(bt,dt+E*f.B,me,Pe+32*E,8),i(Ke,Ye+E*f.B,Ve,ft+32*E,8)}}function Xi(f,v,E,T,K,te,ie,ce,me){var Pe=[0],Ve=[0],ft=0,dt=me!=null?me.kd:0,et=me??new Ni;if(f==null||12>E)return 7;et.data=f,et.w=v,et.ha=E,v=[v],E=[E],et.gb=[et.gb];e:{var xt=v,bt=E,Ke=et.gb;if(t(f!=null),t(bt!=null),t(Ke!=null),Ke[0]=0,12<=bt[0]&&!n(f,xt[0],"RIFF")){if(n(f,xt[0]+8,"WEBP")){Ke=3;break e}var Ye=fe(f,xt[0]+4);if(12>Ye||4294967286<Ye){Ke=3;break e}if(dt&&Ye>bt[0]-8){Ke=7;break e}Ke[0]=Ye,xt[0]+=12,bt[0]-=12}Ke=0}if(Ke!=0)return Ke;for(Ye=0<et.gb[0],E=E[0];;){e:{var Ct=f;bt=v,Ke=E;var St=Pe,Pt=Ve,Zt=xt=[0];if((s=ft=[ft])[0]=0,8>Ke[0])Ke=7;else{if(!n(Ct,bt[0],"VP8X")){if(fe(Ct,bt[0]+4)!=10){Ke=3;break e}if(18>Ke[0]){Ke=7;break e}var Ft=fe(Ct,bt[0]+8),an=1+ae(Ct,bt[0]+12);if(2147483648<=an*(Ct=1+ae(Ct,bt[0]+15))){Ke=3;break e}Zt!=null&&(Zt[0]=Ft),St!=null&&(St[0]=an),Pt!=null&&(Pt[0]=Ct),bt[0]+=18,Ke[0]-=18,s[0]=1}Ke=0}}if(ft=ft[0],xt=xt[0],Ke!=0)return Ke;if(bt=!!(2&xt),!Ye&&ft)return 3;if(te!=null&&(te[0]=!!(16&xt)),ie!=null&&(ie[0]=bt),ce!=null&&(ce[0]=0),ie=Pe[0],xt=Ve[0],ft&&bt&&me==null){Ke=0;break}if(4>E){Ke=7;break}if(Ye&&ft||!Ye&&!ft&&!n(f,v[0],"ALPH")){E=[E],et.na=[et.na],et.P=[et.P],et.Sa=[et.Sa];e:{Ft=f,Ke=v,Ye=E;var s=et.gb;St=et.na,Pt=et.P,Zt=et.Sa,an=22,t(Ft!=null),t(Ye!=null),Ct=Ke[0];var a=Ye[0];for(t(St!=null),t(Zt!=null),St[0]=null,Pt[0]=null,Zt[0]=0;;){if(Ke[0]=Ct,Ye[0]=a,8>a){Ke=7;break e}var h=fe(Ft,Ct+4);if(4294967286<h){Ke=3;break e}var d=8+h+1&-2;if(an+=d,0<s&&an>s){Ke=3;break e}if(!n(Ft,Ct,"VP8 ")||!n(Ft,Ct,"VP8L")){Ke=0;break e}if(a[0]<d){Ke=7;break e}n(Ft,Ct,"ALPH")||(St[0]=Ft,Pt[0]=Ct+8,Zt[0]=h),Ct+=d,a-=d}}if(E=E[0],et.na=et.na[0],et.P=et.P[0],et.Sa=et.Sa[0],Ke!=0)break}E=[E],et.Ja=[et.Ja],et.xa=[et.xa];e:if(s=f,Ke=v,Ye=E,St=et.gb[0],Pt=et.Ja,Zt=et.xa,Ft=Ke[0],Ct=!n(s,Ft,"VP8 "),an=!n(s,Ft,"VP8L"),t(s!=null),t(Ye!=null),t(Pt!=null),t(Zt!=null),8>Ye[0])Ke=7;else{if(Ct||an){if(s=fe(s,Ft+4),12<=St&&s>St-12){Ke=3;break e}if(dt&&s>Ye[0]-8){Ke=7;break e}Pt[0]=s,Ke[0]+=8,Ye[0]-=8,Zt[0]=an}else Zt[0]=5<=Ye[0]&&s[Ft+0]==47&&!(s[Ft+4]>>5),Pt[0]=Ye[0];Ke=0}if(E=E[0],et.Ja=et.Ja[0],et.xa=et.xa[0],v=v[0],Ke!=0)break;if(4294967286<et.Ja)return 3;if(ce==null||bt||(ce[0]=et.xa?2:1),ie=[ie],xt=[xt],et.xa){if(5>E){Ke=7;break}ce=ie,dt=xt,bt=te,f==null||5>E?f=0:5<=E&&f[v+0]==47&&!(f[v+4]>>5)?(Ye=[0],s=[0],St=[0],V(Pt=new U,f,v,E),on(Pt,Ye,s,St)?(ce!=null&&(ce[0]=Ye[0]),dt!=null&&(dt[0]=s[0]),bt!=null&&(bt[0]=St[0]),f=1):f=0):f=0}else{if(10>E){Ke=7;break}ce=xt,f==null||10>E||!Zs(f,v+3,E-3)?f=0:(dt=f[v+0]|f[v+1]<<8|f[v+2]<<16,bt=16383&(f[v+7]<<8|f[v+6]),f=16383&(f[v+9]<<8|f[v+8]),1&dt||3<(dt>>1&7)||!(dt>>4&1)||dt>>5>=et.Ja||!bt||!f?f=0:(ie&&(ie[0]=bt),ce&&(ce[0]=f),f=1))}if(!f||(ie=ie[0],xt=xt[0],ft&&(Pe[0]!=ie||Ve[0]!=xt)))return 3;me!=null&&(me[0]=et,me.offset=v-me.w,t(4294967286>v-me.w),t(me.offset==me.ha-E));break}return Ke==0||Ke==7&&ft&&me==null?(te!=null&&(te[0]|=et.na!=null&&0<et.na.length),T!=null&&(T[0]=ie),K!=null&&(K[0]=xt),0):Ke}function ka(f,v,E){var T=v.width,K=v.height,te=0,ie=0,ce=T,me=K;if(v.Da=f!=null&&0<f.Da,v.Da&&(ce=f.cd,me=f.bd,te=f.v,ie=f.j,11>E||(te&=-2,ie&=-2),0>te||0>ie||0>=ce||0>=me||te+ce>T||ie+me>K))return 0;if(v.v=te,v.j=ie,v.va=te+ce,v.o=ie+me,v.U=ce,v.T=me,v.da=f!=null&&0<f.da,v.da){if(!Ze(ce,me,E=[f.ib],te=[f.hb]))return 0;v.ib=E[0],v.hb=te[0]}return v.ob=f!=null&&f.ob,v.Kb=f==null||!f.Sd,v.da&&(v.ob=v.ib<3*T/4&&v.hb<3*K/4,v.Kb=0),1}function Os(f){if(f==null)return 2;if(11>f.S){var v=f.f.RGBA;v.fb+=(f.height-1)*v.A,v.A=-v.A}else v=f.f.kb,f=f.height,v.O+=(f-1)*v.fa,v.fa=-v.fa,v.N+=(f-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(f-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(f-1)*v.lb,v.lb=-v.lb);return 0}function Is(f,v,E,T){if(T==null||0>=f||0>=v)return 2;if(E!=null){if(E.Da){var K=E.cd,te=E.bd,ie=-2&E.v,ce=-2&E.j;if(0>ie||0>ce||0>=K||0>=te||ie+K>f||ce+te>v)return 2;f=K,v=te}if(E.da){if(!Ze(f,v,K=[E.ib],te=[E.hb]))return 2;f=K[0],v=te[0]}}T.width=f,T.height=v;e:{var me=T.width,Pe=T.height;if(f=T.S,0>=me||0>=Pe||!(f>=di&&13>f))f=2;else{if(0>=T.Rd&&T.sd==null){ie=te=K=v=0;var Ve=(ce=me*vc[f])*Pe;if(11>f||(te=(Pe+1)/2*(v=(me+1)/2),f==12&&(ie=(K=me)*Pe)),(Pe=l(Ve+2*te+ie))==null){f=1;break e}T.sd=Pe,11>f?((me=T.f.RGBA).eb=Pe,me.fb=0,me.A=ce,me.size=Ve):((me=T.f.kb).y=Pe,me.O=0,me.fa=ce,me.Fd=Ve,me.f=Pe,me.N=0+Ve,me.Ab=v,me.Cd=te,me.ea=Pe,me.W=0+Ve+te,me.Db=v,me.Ed=te,f==12&&(me.F=Pe,me.J=0+Ve+2*te),me.Tc=ie,me.lb=K)}if(v=1,K=T.S,te=T.width,ie=T.height,K>=di&&13>K)if(11>K)f=T.f.RGBA,v&=(ce=Math.abs(f.A))*(ie-1)+te<=f.size,v&=ce>=te*vc[K],v&=f.eb!=null;else{f=T.f.kb,ce=(te+1)/2,Ve=(ie+1)/2,me=Math.abs(f.fa),Pe=Math.abs(f.Ab);var ft=Math.abs(f.Db),dt=Math.abs(f.lb),et=dt*(ie-1)+te;v&=me*(ie-1)+te<=f.Fd,v&=Pe*(Ve-1)+ce<=f.Cd,v=(v&=ft*(Ve-1)+ce<=f.Ed)&me>=te&Pe>=ce&ft>=ce,v&=f.y!=null,v&=f.f!=null,v&=f.ea!=null,K==12&&(v&=dt>=te,v&=et<=f.Tc,v&=f.F!=null)}else v=0;f=v?0:2}}return f!=0||E!=null&&E.fd&&(f=Os(T)),f}var xr=64,ea=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ui=24,ti=32,ta=8,qr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ot("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(f){return f},O.Predictor2=function(f,v,E){return v[E+0]},O.Predictor3=function(f,v,E){return v[E+1]},O.Predictor4=function(f,v,E){return v[E-1]},O.Predictor5=function(f,v,E){return Le(Le(f,v[E+1]),v[E+0])},O.Predictor6=function(f,v,E){return Le(f,v[E-1])},O.Predictor7=function(f,v,E){return Le(f,v[E+0])},O.Predictor8=function(f,v,E){return Le(v[E-1],v[E+0])},O.Predictor9=function(f,v,E){return Le(v[E+0],v[E+1])},O.Predictor10=function(f,v,E){return Le(Le(f,v[E-1]),Le(v[E+0],v[E+1]))},O.Predictor11=function(f,v,E){var T=v[E+0];return 0>=Lt(T>>24&255,f>>24&255,(v=v[E-1])>>24&255)+Lt(T>>16&255,f>>16&255,v>>16&255)+Lt(T>>8&255,f>>8&255,v>>8&255)+Lt(255&T,255&f,255&v)?T:f},O.Predictor12=function(f,v,E){var T=v[E+0];return(rt((f>>24&255)+(T>>24&255)-((v=v[E-1])>>24&255))<<24|rt((f>>16&255)+(T>>16&255)-(v>>16&255))<<16|rt((f>>8&255)+(T>>8&255)-(v>>8&255))<<8|rt((255&f)+(255&T)-(255&v)))>>>0},O.Predictor13=function(f,v,E){var T=v[E-1];return(vt((f=Le(f,v[E+0]))>>24&255,T>>24&255)<<24|vt(f>>16&255,T>>16&255)<<16|vt(f>>8&255,T>>8&255)<<8|vt(f>>0&255,T>>0&255))>>>0};var Rs=O.PredictorAdd0;O.PredictorAdd1=Ue,ot("Predictor2","PredictorAdd2"),ot("Predictor3","PredictorAdd3"),ot("Predictor4","PredictorAdd4"),ot("Predictor5","PredictorAdd5"),ot("Predictor6","PredictorAdd6"),ot("Predictor7","PredictorAdd7"),ot("Predictor8","PredictorAdd8"),ot("Predictor9","PredictorAdd9"),ot("Predictor10","PredictorAdd10"),ot("Predictor11","PredictorAdd11"),ot("Predictor12","PredictorAdd12"),ot("Predictor13","PredictorAdd13");var Li=O.PredictorAdd2;Vt("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Vt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Wa,Pr=O.ColorIndexInverseTransform,gs=O.MapARGB,Di=O.VP8LColorIndexInverseTransformAlpha,So=O.MapAlpha,Fs=O.VP8LPredictorsAdd=[];Fs.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var _s,Dr,Mr,Qi,ci,Oi,js,Ii,cr,vs,ni,$r,Mo,Pa,Ea,Vr,hi,ro,ys,na,io,so,zs,Ri,Or,Hn,$n,_r,Qn=l(511),es=l(2041),oo=l(225),bs=l(767),Za=0,ao=es,Er=oo,er=bs,fi=Qn,di=0,cn=1,Ka=2,Bo=3,Fi=4,Gr=5,bl=6,ri=7,ii=8,ws=9,r=10,u=[2,3,7],g=[3,3,11],P=[280,256,256,256,40],D=[0,1,1,1,0],re=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],je=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],at=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_t=8,At=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$t=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rn=null,En=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],si=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ar=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],pi=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],hr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wl=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ts=[],ji=[],Ci=[],Pu=1,xl=2,Wn=[],Hr=[];yt("UpsampleRgbLinePair",Bn,3),yt("UpsampleBgrLinePair",ir,3),yt("UpsampleRgbaLinePair",xi,4),yt("UpsampleBgraLinePair",wr,4),yt("UpsampleArgbLinePair",kr,4),yt("UpsampleRgba4444LinePair",qn,2),yt("UpsampleRgb565LinePair",In,2);var Eu=O.UpsampleRgbLinePair,Ls=O.UpsampleBgrLinePair,Hl=O.UpsampleRgbaLinePair,To=O.UpsampleBgraLinePair,Ja=O.UpsampleArgbLinePair,Wl=O.UpsampleRgba4444LinePair,dc=O.UpsampleRgb565LinePair,Zl=16,Ll=1<<Zl-1,Cl=-227,Au=482,Oh=6,Ya=0,Kl=l(256),Ih=l(256),Rh=l(256),Jl=l(256),Yl=l(Au-Cl),pc=l(Au-Cl);Qr("YuvToRgbRow",Bn,3),Qr("YuvToBgrRow",ir,3),Qr("YuvToRgbaRow",xi,4),Qr("YuvToBgraRow",wr,4),Qr("YuvToArgbRow",kr,4),Qr("YuvToRgba4444Row",qn,2),Qr("YuvToRgb565Row",In,2);var mc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xl=[0,2,8],gc=[8,7,6,4,4,2,2,2,1,1,1,1],_c=1;this.WebPDecodeRGBA=function(f,v,E,T,K){var te=cn,ie=new Eo,ce=new Jr;ie.ba=ce,ce.S=te,ce.width=[ce.width],ce.height=[ce.height];var me=ce.width,Pe=ce.height,Ve=new _i;if(Ve==null||f==null)var ft=2;else t(Ve!=null),ft=Xi(f,v,E,Ve.width,Ve.height,Ve.Pd,Ve.Qd,Ve.format,null);if(ft!=0?me=0:(me!=null&&(me[0]=Ve.width[0]),Pe!=null&&(Pe[0]=Ve.height[0]),me=1),me){ce.width=ce.width[0],ce.height=ce.height[0],T!=null&&(T[0]=ce.width),K!=null&&(K[0]=ce.height);e:{if(T=new bi,(K=new Ni).data=f,K.w=v,K.ha=E,K.kd=1,v=[0],t(K!=null),((f=Xi(K.data,K.w,K.ha,null,null,null,v,null,K))==0||f==7)&&v[0]&&(f=4),(v=f)==0){if(t(ie!=null),T.data=K.data,T.w=K.w+K.offset,T.ha=K.ha-K.offset,T.put=us,T.ac=lr,T.bc=Ei,T.ma=ie,K.xa){if((f=yi())==null){ie=1;break e}if(function(dt,et){var xt=[0],bt=[0],Ke=[0];t:for(;;){if(dt==null)return 0;if(et==null)return dt.a=2,0;if(dt.l=et,dt.a=0,V(dt.m,et.data,et.w,et.ha),!on(dt.m,xt,bt,Ke)){dt.a=3;break t}if(dt.xb=xl,et.width=xt[0],et.height=bt[0],!hs(xt[0],bt[0],1,dt,null))break t;return 1}return t(dt.a!=0),0}(f,T)){if(T=(v=Is(T.width,T.height,ie.Oa,ie.ba))==0){t:{T=f;n:for(;;){if(T==null){T=0;break t}if(t(T.s.yc!=null),t(T.s.Ya!=null),t(0<T.s.Wb),t((E=T.l)!=null),t((K=E.ma)!=null),T.xb!=0){if(T.ca=K.ba,T.tb=K.tb,t(T.ca!=null),!ka(K.Oa,E,Bo)){T.a=2;break n}if(!_o(T,E.width)||E.da)break n;if((E.da||zt(T.ca.S))&&tt(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&tt()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!Re(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!Si(T,T.V,T.Ba,T.c,T.i,E.o,go))break n;K.Dc=T.Ma,T=1;break t}t(T.a!=0),T=0}T=!T}T&&(v=f.a)}else v=f.a}else{if((f=new On)==null){ie=1;break e}if(f.Fa=K.na,f.P=K.P,f.qc=K.Sa,Ms(f,T)){if((v=Is(T.width,T.height,ie.Oa,ie.ba))==0){if(f.Aa=0,E=ie.Oa,t((K=f)!=null),E!=null){if(0<(me=0>(me=E.Md)?0:100<me?255:255*me/100)){for(Pe=Ve=0;4>Pe;++Pe)12>(ft=K.pb[Pe]).lc&&(ft.ia=me*gc[0>ft.lc?0:ft.lc]>>3),Ve|=ft.ia;Ve&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=E.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}bn(f,T)||(v=f.a)}}else v=f.a}v==0&&ie.Oa!=null&&ie.Oa.fd&&(v=Os(ie.ba))}ie=v}te=ie!=0?null:11>te?ce.f.RGBA.eb:ce.f.kb.y}else te=null;return te};var vc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(O,oe){for(var we="",R=0;R<4;R++)we+=String.fromCharCode(O[oe++]);return we}function b(O,oe){return(O[oe+0]<<0|O[oe+1]<<8|O[oe+2]<<16)>>>0}function w(O,oe){return(O[oe+0]<<0|O[oe+1]<<8|O[oe+2]<<16|O[oe+3]<<24)>>>0}new m;var A=[0],C=[0],M=[],N=new m,F=e,j=function(O,oe){var we={},R=0,G=!1,he=0,W=0;if(we.frames=[],!function(ee,de,xe,Ae){for(var _e=0;_e<Ae;_e++)if(ee[de+_e]!=xe.charCodeAt(_e))return!0;return!1}(O,oe,"RIFF",4)){var ne,X;for(w(O,oe+=4),oe+=8;oe<O.length;){var se=y(O,oe),V=w(O,oe+=4);oe+=4;var Y=V+(1&V);switch(se){case"VP8 ":case"VP8L":we.frames[R]===void 0&&(we.frames[R]={}),(U=we.frames[R]).src_off=G?W:oe-8,U.src_size=he+V+8,R++,G&&(G=!1,he=0,W=0);break;case"VP8X":(U=we.header={}).feature_flags=O[oe];var ue=oe+4;U.canvas_width=1+b(O,ue),ue+=3,U.canvas_height=1+b(O,ue),ue+=3;break;case"ALPH":G=!0,he=Y+8,W=oe-8;break;case"ANIM":(U=we.header).bgcolor=w(O,oe),ue=oe+4,U.loop_count=(ne=O)[(X=ue)+0]<<0|ne[X+1]<<8,ue+=2;break;case"ANMF":var We,U;(U=we.frames[R]={}).offset_x=2*b(O,oe),oe+=3,U.offset_y=2*b(O,oe),oe+=3,U.width=1+b(O,oe),oe+=3,U.height=1+b(O,oe),oe+=3,U.duration=b(O,oe),oe+=3,We=O[oe++],U.dispose=1&We,U.blend=We>>1&1}se!="ANMF"&&(oe+=Y)}return we}}(F,0);j.response=F,j.rgbaoutput=!0,j.dataurl=!1;var z=j.header?j.header:null,$=j.frames?j.frames:null;if(z){z.loop_counter=z.loop_count,A=[z.canvas_height],C=[z.canvas_width];for(var pe=0;pe<$.length&&$[pe].blend!=0;pe++);}var Ce=$[0],Te=N.WebPDecodeRGBA(F,Ce.src_off,Ce.src_size,C,A);Ce.rgba=Te,Ce.imgwidth=C[0],Ce.imgheight=A[0];for(var ke=0;ke<C[0]*A[0]*4;ke++)M[ke]=Te[ke];return this.width=C,this.height=A,this.data=M,this}(function(e){var t=function(){return typeof Yf=="function"},n=function(A,C,M,N){var F=4,j=c;switch(N){case e.image_compression.FAST:F=1,j=l;break;case e.image_compression.MEDIUM:F=6,j=p;break;case e.image_compression.SLOW:F=9,j=m}A=i(A,C,M,j);var z=Yf(A,{level:F});return e.__addimage__.arrayBufferToBinaryString(z)},i=function(A,C,M,N){for(var F,j,z,$=A.length/C,pe=new Uint8Array(A.length+$),Ce=b(),Te=0;Te<$;Te+=1){if(z=Te*C,F=A.subarray(z,z+C),N)pe.set(N(F,M,j),z+Te);else{for(var ke,O=Ce.length,oe=[];ke<O;ke+=1)oe[ke]=Ce[ke](F,M,j);var we=w(oe.concat());pe.set(oe[we],z+Te)}j=F}return pe},o=function(A){var C=Array.apply([],A);return C.unshift(0),C},l=function(A,C){var M,N=[],F=A.length;N[0]=1;for(var j=0;j<F;j+=1)M=A[j-C]||0,N[j+1]=A[j]-M+256&255;return N},c=function(A,C,M){var N,F=[],j=A.length;F[0]=2;for(var z=0;z<j;z+=1)N=M&&M[z]||0,F[z+1]=A[z]-N+256&255;return F},p=function(A,C,M){var N,F,j=[],z=A.length;j[0]=3;for(var $=0;$<z;$+=1)N=A[$-C]||0,F=M&&M[$]||0,j[$+1]=A[$]+256-(N+F>>>1)&255;return j},m=function(A,C,M){var N,F,j,z,$=[],pe=A.length;$[0]=4;for(var Ce=0;Ce<pe;Ce+=1)N=A[Ce-C]||0,F=M&&M[Ce]||0,j=M&&M[Ce-C]||0,z=y(N,F,j),$[Ce+1]=A[Ce]-z+256&255;return $},y=function(A,C,M){if(A===C&&C===M)return A;var N=Math.abs(C-M),F=Math.abs(A-M),j=Math.abs(A+C-M-M);return N<=F&&N<=j?A:F<=j?C:M},b=function(){return[o,l,c,p,m]},w=function(A){var C=A.map(function(M){return M.reduce(function(N,F){return N+Math.abs(F)},0)});return C.indexOf(Math.min.apply(null,C))};e.processPNG=function(A,C,M,N){var F,j,z,$,pe,Ce,Te,ke,O,oe,we,R,G,he,W,ne=this.decode.FLATE_DECODE,X="";if(this.__addimage__.isArrayBuffer(A)&&(A=new Uint8Array(A)),this.__addimage__.isArrayBufferView(A)){if(A=(z=new ww(A)).imgData,j=z.bits,F=z.colorSpace,pe=z.colors,[4,6].indexOf(z.colorType)!==-1){if(z.bits===8){O=(ke=z.pixelBitlength==32?new Uint32Array(z.decodePixels().buffer):z.pixelBitlength==16?new Uint16Array(z.decodePixels().buffer):new Uint8Array(z.decodePixels().buffer)).length,we=new Uint8Array(O*z.colors),oe=new Uint8Array(O);var se,V=z.pixelBitlength-z.bits;for(he=0,W=0;he<O;he++){for(G=ke[he],se=0;se<V;)we[W++]=G>>>se&255,se+=z.bits;oe[he]=G>>>se&255}}if(z.bits===16){O=(ke=new Uint32Array(z.decodePixels().buffer)).length,we=new Uint8Array(O*(32/z.pixelBitlength)*z.colors),oe=new Uint8Array(O*(32/z.pixelBitlength)),R=z.colors>1,he=0,W=0;for(var Y=0;he<O;)G=ke[he++],we[W++]=G>>>0&255,R&&(we[W++]=G>>>16&255,G=ke[he++],we[W++]=G>>>0&255),oe[Y++]=G>>>16&255;j=8}N!==e.image_compression.NONE&&t()?(A=n(we,z.width*z.colors,z.colors,N),Te=n(oe,z.width,1,N)):(A=we,Te=oe,ne=void 0)}if(z.colorType===3&&(F=this.color_spaces.INDEXED,Ce=z.palette,z.transparency.indexed)){var ue=z.transparency.indexed,We=0;for(he=0,O=ue.length;he<O;++he)We+=ue[he];if((We/=255)===O-1&&ue.indexOf(0)!==-1)$=[ue.indexOf(0)];else if(We!==O){for(ke=z.decodePixels(),oe=new Uint8Array(ke.length),he=0,O=ke.length;he<O;he++)oe[he]=ue[ke[he]];Te=n(oe,z.width,1)}}var U=function(ee){var de;switch(ee){case e.image_compression.FAST:de=11;break;case e.image_compression.MEDIUM:de=13;break;case e.image_compression.SLOW:de=14;break;default:de=12}return de}(N);return ne===this.decode.FLATE_DECODE&&(X="/Predictor "+U+" "),X+="/Colors "+pe+" /BitsPerComponent "+j+" /Columns "+z.width,(this.__addimage__.isArrayBuffer(A)||this.__addimage__.isArrayBufferView(A))&&(A=this.__addimage__.arrayBufferToBinaryString(A)),(Te&&this.__addimage__.isArrayBuffer(Te)||this.__addimage__.isArrayBufferView(Te))&&(Te=this.__addimage__.arrayBufferToBinaryString(Te)),{alias:M,data:A,index:C,filter:ne,decodeParameters:X,transparency:$,palette:Ce,sMask:Te,predictor:U,width:z.width,height:z.height,bitsPerComponent:j,colorSpace:F}}}})(mn.API),function(e){e.processGIF89A=function(t,n,i,o){var l=new xw(t),c=l.width,p=l.height,m=[];l.decodeAndBlitFrameRGBA(0,m);var y={data:m,width:c,height:p},b=new bf(100).encode(y,100);return e.processJPEG.call(this,b,n,i,o)},e.processGIF87A=e.processGIF89A}(mn.API),Do.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:i,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Do.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){or.log("bit decode error:"+n)}},Do.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,o=0;o<t;o++)for(var l=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+8*o*4,p=0;p<8&&8*o+p<this.width;p++){var m=this.palette[l>>7-p&1];this.data[c+4*p]=m.blue,this.data[c+4*p+1]=m.green,this.data[c+4*p+2]=m.red,this.data[c+4*p+3]=255}n!==0&&(this.pos+=4-n)}},Do.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<e;o++){var l=this.datav.getUint8(this.pos++,!0),c=i*this.width*4+2*o*4,p=l>>4,m=15&l,y=this.palette[p];if(this.data[c]=y.blue,this.data[c+1]=y.green,this.data[c+2]=y.red,this.data[c+3]=255,2*o+1>=this.width)break;y=this.palette[m],this.data[c+4]=y.blue,this.data[c+4+1]=y.green,this.data[c+4+2]=y.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},Do.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*i;if(o<this.palette.length){var c=this.palette[o];this.data[l]=c.red,this.data[l+1]=c.green,this.data[l+2]=c.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}e!==0&&(this.pos+=4-e)}},Do.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&t)/t*255|0,p=(l>>5&t)/t*255|0,m=(l>>10&t)/t*255|0,y=l>>15?255:0,b=i*this.width*4+4*o;this.data[b]=m,this.data[b+1]=p,this.data[b+2]=c,this.data[b+3]=y}this.pos+=e}},Do.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(c&t)/t*255|0,m=(c>>5&n)/n*255|0,y=(c>>11)/t*255|0,b=o*this.width*4+4*l;this.data[b]=y,this.data[b+1]=m,this.data[b+2]=p,this.data[b+3]=255}this.pos+=e}},Do.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*n;this.data[c]=l,this.data[c+1]=o,this.data[c+2]=i,this.data[c+3]=255}this.pos+=this.width%4}},Do.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),p=t*this.width*4+4*n;this.data[p]=l,this.data[p+1]=o,this.data[p+2]=i,this.data[p+3]=c}},Do.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,i,o){var l=new Do(t,!1),c=l.width,p=l.height,m={data:l.getData(),width:c,height:p},y=new bf(100).encode(m,100);return e.processJPEG.call(this,y,n,i,o)}}(mn.API),M0.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,i,o){var l=new M0(t),c=l.width,p=l.height,m={data:l.getData(),width:c,height:p},y=new bf(100).encode(m,100);return e.processJPEG.call(this,y,n,i,o)}}(mn.API),mn.API.processRGBA=function(e,t,n){for(var i=e.data,o=i.length,l=new Uint8Array(o/4*3),c=new Uint8Array(o/4),p=0,m=0,y=0;y<o;y+=4){var b=i[y],w=i[y+1],A=i[y+2],C=i[y+3];l[p++]=b,l[p++]=w,l[p++]=A,c[m++]=C}var M=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:M,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},mn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ru=mn.API,Bc=ru.getCharWidthsArray=function(e,t){var n,i,o=(t=t||{}).font||this.internal.getFont(),l=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),p=t.widths?t.widths:o.metadata.Unicode.widths,m=p.fof?p.fof:1,y=t.kerning?t.kerning:o.metadata.Unicode.kerning,b=y.fof?y.fof:1,w=t.doKerning!==!1,A=0,C=e.length,M=0,N=p[0]||m,F=[];for(n=0;n<C;n++)i=e.charCodeAt(n),typeof o.metadata.widthOfString=="function"?F.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+c*(1e3/l)||0)/1e3):(A=w&&sr(y[i])==="object"&&!isNaN(parseInt(y[i][M],10))?y[i][M]/b:0,F.push((p[i]||N)/m+A)),M=i;return F},P0=ru.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return ru.processArabic&&(e=ru.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,n,o)/n:Bc.apply(this,arguments).reduce(function(l,c){return l+c},0)},E0=function(e,t,n,i){for(var o=[],l=0,c=e.length,p=0;l!==c&&p+t[l]<n;)p+=t[l],l++;o.push(e.slice(0,l));var m=l;for(p=0;l!==c;)p+t[l]>i&&(o.push(e.slice(m,l)),p=0,m=l),p+=t[l],l++;return m!==l&&o.push(e.slice(m,l)),o},A0=function(e,t,n){n||(n={});var i,o,l,c,p,m,y,b=[],w=[b],A=n.textIndent||0,C=0,M=0,N=e.split(" "),F=Bc.apply(this,[" ",n])[0];if(m=n.lineIndent===-1?N[0].length+2:n.lineIndent||0){var j=Array(m).join(" "),z=[];N.map(function(pe){(pe=pe.split(/\s*\n/)).length>1?z=z.concat(pe.map(function(Ce,Te){return(Te&&Ce.length?`
`:"")+Ce})):z.push(pe[0])}),N=z,m=P0.apply(this,[j,n])}for(l=0,c=N.length;l<c;l++){var $=0;if(i=N[l],m&&i[0]==`
`&&(i=i.substr(1),$=1),A+C+(M=(o=Bc.apply(this,[i,n])).reduce(function(pe,Ce){return pe+Ce},0))>t||$){if(M>t){for(p=E0.apply(this,[i,o,t-(A+C),t]),b.push(p.shift()),b=[p.pop()];p.length;)w.push([p.shift()]);M=o.slice(i.length-(b[0]?b[0].length:0)).reduce(function(pe,Ce){return pe+Ce},0)}else b=[i];w.push(b),A=M+m,C=F}else b.push(i),A+=C+M,C=F}return y=m?function(pe,Ce){return(Ce?j:"")+pe.join(" ")}:function(pe){return pe.join(" ")},w.map(y)},ru.splitTextToSize=function(e,t,n){var i,o=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(b){if(b.widths&&b.kerning)return{widths:b.widths,kerning:b.kerning};var w=this.internal.getFont(b.fontName,b.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/o;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=n.lineIndent;var p,m,y=[];for(p=0,m=i.length;p<m;p++)y=y.concat(A0.apply(this,[i[p],c,l]));return y},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},i={},o=0;o<t.length;o++)n[t[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=t[o];var l=function(w){return"0x"+parseInt(w,10).toString(16)},c=e.__fontmetrics__.compress=function(w){var A,C,M,N,F=["{"];for(var j in w){if(A=w[j],isNaN(parseInt(j,10))?C="'"+j+"'":(j=parseInt(j,10),C=(C=l(j).slice(2)).slice(0,-1)+i[C.slice(-1)]),typeof A=="number")A<0?(M=l(A).slice(3),N="-"):(M=l(A).slice(2),N=""),M=N+M.slice(0,-1)+i[M.slice(-1)];else{if(sr(A)!=="object")throw new Error("Don't know what to do with value type "+sr(A)+".");M=c(A)}F.push(C+M)}return F.push("}"),F.join("")},p=e.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var A,C,M,N,F={},j=1,z=F,$=[],pe="",Ce="",Te=w.length-1,ke=1;ke<Te;ke+=1)(N=w[ke])=="'"?A?(M=A.join(""),A=void 0):A=[]:A?A.push(N):N=="{"?($.push([z,M]),z={},M=void 0):N=="}"?((C=$.pop())[0][C[1]]=z,M=void 0,z=C[0]):N=="-"?j=-1:M===void 0?n.hasOwnProperty(N)?(pe+=n[N],M=parseInt(pe,16)*j,j=1,pe=""):pe+=N:n.hasOwnProperty(N)?(Ce+=n[N],z[M]=parseInt(Ce,16)*j,j=1,M=void 0,Ce=""):Ce+=N;return F},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},b={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(w){var A=w.font,C=b.Unicode[A.postScriptName];C&&(A.metadata.Unicode={},A.metadata.Unicode.widths=C.widths,A.metadata.Unicode.kerning=C.kerning);var M=y.Unicode[A.postScriptName];M&&(A.metadata.Unicode.encoding=M,A.encoding=M.codePages[0])}])}(mn.API),function(e){var t=function(n){for(var i=n.length,o=new Uint8Array(i),l=0;l<i;l++)o[l]=n.charCodeAt(l);return o};e.API.events.push(["addFont",function(n){var i=void 0,o=n.font,l=n.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(c,p){p=/^\x00\x01\x00\x00/.test(p)?t(p):t(Yu(p)),c.metadata=e.API.TTFFont.open(p),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(o,i)}}])}(mn),function(e){function t(){return(_n.canvg?Promise.resolve(_n.canvg):Dl(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}mn.API.addSvgAsImage=function(n,i,o,l,c,p,m,y){if(isNaN(i)||isNaN(o))throw or.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(c))throw or.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=l,b.height=c;var w=b.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,b.width,b.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},C=this;return t().then(function(M){return M.fromString(w,n,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(M){return M.render(A)}).then(function(){C.addImage(b.toDataURL("image/jpeg",1),i,o,l,c,m,y)})}}(),mn.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(t,n);return this},mn.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var i,o,l,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},p=Object.keys(c),m=[],y=0,b=0,w=0;function A(M,N){var F,j=!1;for(F=0;F<M.length;F+=1)M[F]===N&&(j=!0);return j}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var C=p.length;for(w=0;w<C;w+=1)n[p[w]].value=n[p[w]].defaultValue,n[p[w]].explicitSet=!1}if(sr(e)==="object"){for(o in e)if(l=e[o],A(p,o)&&l!==void 0){if(n[o].type==="boolean"&&typeof l=="boolean")n[o].value=l;else if(n[o].type==="name"&&A(n[o].valueSet,l))n[o].value=l;else if(n[o].type==="integer"&&Number.isInteger(l))n[o].value=l;else if(n[o].type==="array"){for(y=0;y<l.length;y+=1)if(i=!0,l[y].length===1&&typeof l[y][0]=="number")m.push(String(l[y]-1));else if(l[y].length>1){for(b=0;b<l[y].length;b+=1)typeof l[y][b]!="number"&&(i=!1);i===!0&&m.push([l[y][0]-1,l[y][1]-1].join(" "))}n[o].value="["+m.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var M,N=[];for(M in n)n[M].explicitSet===!0&&(n[M].type==="name"?N.push("/"+M+" /"+n[M].value):N.push("/"+M+" "+n[M].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(i)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),p=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),y=l.length+c.length+p.length+o.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(o+l+c+p+m),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(mn.API),function(e){var t=e.API,n=t.pdfEscape16=function(l,c){for(var p,m=c.metadata.Unicode.widths,y=["","0","00","000","0000"],b=[""],w=0,A=l.length;w<A;++w){if(p=c.metadata.characterToGlyph(l.charCodeAt(w)),c.metadata.glyIdsUsed.push(p),c.metadata.toUnicode[p]=l.charCodeAt(w),m.indexOf(p)==-1&&(m.push(p),m.push([parseInt(c.metadata.widthOfGlyph(p),10)])),p=="0")return b.join("");p=p.toString(16),b.push(y[4-p.length],p)}return b.join("")},i=function(l){var c,p,m,y,b,w,A;for(b=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],w=0,A=(p=Object.keys(l).sort(function(C,M){return C-M})).length;w<A;w++)c=p[w],m.length>=100&&(b+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),l[c]!==void 0&&l[c]!==null&&typeof l[c].toString=="function"&&(y=("0000"+l[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),m.push("<"+c+"><"+y+">"));return m.length&&(b+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),b+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(l){(function(c){var p=c.font,m=c.out,y=c.newObject,b=c.putStream;if(p.metadata instanceof e.API.TTFFont&&p.encoding==="Identity-H"){for(var w=p.metadata.Unicode.widths,A=p.metadata.subset.encode(p.metadata.glyIdsUsed,1),C="",M=0;M<A.length;M++)C+=String.fromCharCode(A[M]);var N=y();b({data:C,addLength1:!0,objectId:N}),m("endobj");var F=y();b({data:i(p.metadata.toUnicode),addLength1:!0,objectId:F}),m("endobj");var j=y();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+uu(p.fontName)),m("/FontFile2 "+N+" 0 R"),m("/FontBBox "+e.API.PDFObject.convert(p.metadata.bbox)),m("/Flags "+p.metadata.flags),m("/StemV "+p.metadata.stemV),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m(">>"),m("endobj");var z=y();m("<<"),m("/Type /Font"),m("/BaseFont /"+uu(p.fontName)),m("/FontDescriptor "+j+" 0 R"),m("/W "+e.API.PDFObject.convert(w)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+p.encoding+")"),m(">>"),m(">>"),m("endobj"),p.objectNumber=y(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+F+" 0 R"),m("/BaseFont /"+uu(p.fontName)),m("/Encoding /"+p.encoding),m("/DescendantFonts ["+z+" 0 R]"),m(">>"),m("endobj"),p.isAlreadyPutted=!0}})(l)}]),t.events.push(["putFont",function(l){(function(c){var p=c.font,m=c.out,y=c.newObject,b=c.putStream;if(p.metadata instanceof e.API.TTFFont&&p.encoding==="WinAnsiEncoding"){for(var w=p.metadata.rawData,A="",C=0;C<w.length;C++)A+=String.fromCharCode(w[C]);var M=y();b({data:A,addLength1:!0,objectId:M}),m("endobj");var N=y();b({data:i(p.metadata.toUnicode),addLength1:!0,objectId:N}),m("endobj");var F=y();m("<<"),m("/Descent "+p.metadata.decender),m("/CapHeight "+p.metadata.capHeight),m("/StemV "+p.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+M+" 0 R"),m("/Flags 96"),m("/FontBBox "+e.API.PDFObject.convert(p.metadata.bbox)),m("/FontName /"+uu(p.fontName)),m("/ItalicAngle "+p.metadata.italicAngle),m("/Ascent "+p.metadata.ascender),m(">>"),m("endobj"),p.objectNumber=y();for(var j=0;j<p.metadata.hmtx.widths.length;j++)p.metadata.hmtx.widths[j]=parseInt(p.metadata.hmtx.widths[j]*(1e3/p.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+uu(p.fontName)+"/FontDescriptor "+F+" 0 R/Encoding/"+p.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(p.metadata.hmtx.widths)+">>"),m("endobj"),p.isAlreadyPutted=!0}})(l)}]);var o=function(l){var c,p=l.text||"",m=l.x,y=l.y,b=l.options||{},w=l.mutex||{},A=w.pdfEscape,C=w.activeFontKey,M=w.fonts,N=C,F="",j=0,z="",$=M[N].encoding;if(M[N].encoding!=="Identity-H")return{text:p,x:m,y,options:b,mutex:w};for(z=p,N=C,Array.isArray(p)&&(z=p[0]),j=0;j<z.length;j+=1)M[N].metadata.hasOwnProperty("cmap")&&(c=M[N].metadata.cmap.unicode.codeMap[z[j].charCodeAt(0)]),c||z[j].charCodeAt(0)<256&&M[N].metadata.hasOwnProperty("Unicode")?F+=z[j]:F+="";var pe="";return parseInt(N.slice(1))<14||$==="WinAnsiEncoding"?pe=A(F,N).split("").map(function(Ce){return Ce.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(pe=n(F,M[N])),w.isHex=!0,{text:pe,x:m,y,options:b,mutex:w}};t.events.push(["postProcessText",function(l){var c=l.text||"",p=[],m={text:c,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(c)){var y=0;for(y=0;y<c.length;y+=1)Array.isArray(c[y])&&c[y].length===3?p.push([o(Object.assign({},m,{text:c[y][0]})).text,c[y][1],c[y][2]]):p.push(o(Object.assign({},m,{text:c[y]})).text);l.text=p}else l.text=o(Object.assign({},m,{text:c})).text}])}(mn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,i){return t.call(this),this.internal.vFS[n]=i,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(mn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var o,l,c,p,m,y,b,w=t,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],C=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],M={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},F=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),z=!1,$=0;this.__bidiEngine__={};var pe=function(R){var G=R.charCodeAt(),he=G>>8,W=N[he];return W!==void 0?w[256*W+(255&G)]:he===252||he===253?"AL":j.test(he)?"L":he===8?"R":"N"},Ce=function(R){for(var G,he=0;he<R.length;he++){if((G=pe(R.charAt(he)))==="L")return!1;if(G==="R")return!0}return!1},Te=function(R,G,he,W){var ne,X,se,V,Y=G[W];switch(Y){case"L":case"R":z=!1;break;case"N":case"AN":break;case"EN":z&&(Y="AN");break;case"AL":z=!0,Y="R";break;case"WS":Y="N";break;case"CS":W<1||W+1>=G.length||(ne=he[W-1])!=="EN"&&ne!=="AN"||(X=G[W+1])!=="EN"&&X!=="AN"?Y="N":z&&(X="AN"),Y=X===ne?X:"N";break;case"ES":Y=(ne=W>0?he[W-1]:"B")==="EN"&&W+1<G.length&&G[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&he[W-1]==="EN"){Y="EN";break}if(z){Y="N";break}for(se=W+1,V=G.length;se<V&&G[se]==="ET";)se++;Y=se<V&&G[se]==="EN"?"EN":"N";break;case"NSM":if(c&&!p){for(V=G.length,se=W+1;se<V&&G[se]==="NSM";)se++;if(se<V){var ue=R[W],We=ue>=1425&&ue<=2303||ue===64286;if(ne=G[se],We&&(ne==="R"||ne==="AL")){Y="R";break}}}Y=W<1||(ne=G[W-1])==="B"?"N":he[W-1];break;case"B":z=!1,o=!0,Y=$;break;case"S":l=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":z=!1;break;case"BN":Y="N"}return Y},ke=function(R,G,he){var W=R.split("");return he&&O(W,he,{hiLevel:$}),W.reverse(),G&&G.reverse(),W.join("")},O=function(R,G,he){var W,ne,X,se,V,Y=-1,ue=R.length,We=0,U=[],ee=$?C:A,de=[];for(z=!1,o=!1,l=!1,ne=0;ne<ue;ne++)de[ne]=pe(R[ne]);for(X=0;X<ue;X++){if(V=We,U[X]=Te(R,de,U,X),W=240&(We=ee[V][M[U[X]]]),We&=15,G[X]=se=ee[We][5],W>0)if(W===16){for(ne=Y;ne<X;ne++)G[ne]=1;Y=-1}else Y=-1;if(ee[We][6])Y===-1&&(Y=X);else if(Y>-1){for(ne=Y;ne<X;ne++)G[ne]=se;Y=-1}de[X]==="B"&&(G[X]=0),he.hiLevel|=se}l&&function(xe,Ae,_e){for(var Ie=0;Ie<_e;Ie++)if(xe[Ie]==="S"){Ae[Ie]=$;for(var Ne=Ie-1;Ne>=0&&xe[Ne]==="WS";Ne--)Ae[Ne]=$}}(de,G,ue)},oe=function(R,G,he,W,ne){if(!(ne.hiLevel<R)){if(R===1&&$===1&&!o)return G.reverse(),void(he&&he.reverse());for(var X,se,V,Y,ue=G.length,We=0;We<ue;){if(W[We]>=R){for(V=We+1;V<ue&&W[V]>=R;)V++;for(Y=We,se=V-1;Y<se;Y++,se--)X=G[Y],G[Y]=G[se],G[se]=X,he&&(X=he[Y],he[Y]=he[se],he[se]=X);We=V}We++}}},we=function(R,G,he){var W=R.split(""),ne={hiLevel:$};return he||(he=[]),O(W,he,ne),function(X,se,V){if(V.hiLevel!==0&&b)for(var Y,ue=0;ue<X.length;ue++)se[ue]===1&&(Y=F.indexOf(X[ue]))>=0&&(X[ue]=F[Y+1])}(W,he,ne),oe(2,W,G,he,ne),oe(1,W,G,he,ne),W.join("")};return this.__bidiEngine__.doBidiReorder=function(R,G,he){if(function(ne,X){if(X)for(var se=0;se<ne.length;se++)X[se]=se;p===void 0&&(p=Ce(ne)),y===void 0&&(y=Ce(ne))}(R,G),c||!m||y)if(c&&m&&p^y)$=p?1:0,R=ke(R,G,he);else if(!c&&m&&y)$=p?1:0,R=we(R,G,he),R=ke(R,G);else if(!c||p||m||y){if(c&&!m&&p^y)R=ke(R,G),p?($=0,R=we(R,G,he)):($=1,R=we(R,G,he),R=ke(R,G));else if(c&&p&&!m&&y)$=1,R=we(R,G,he),R=ke(R,G);else if(!c&&!m&&p^y){var W=b;p?($=1,R=we(R,G,he),$=0,b=!1,R=we(R,G,he),b=W):($=0,R=we(R,G,he),R=ke(R,G),$=1,b=!1,R=we(R,G,he),b=W,R=ke(R,G))}}else $=0,R=we(R,G,he);else $=p?1:0,R=we(R,G,he);return R},this.__bidiEngine__.setOptions=function(R){R&&(c=R.isInputVisual,m=R.isOutputVisual,p=R.isInputRtl,y=R.isOutputRtl,b=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var o=i.text,l=(i.x,i.y,i.options||{}),c=(i.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var p=0;for(c=[],p=0;p<o.length;p+=1)Object.prototype.toString.call(o[p])==="[object Array]"?c.push([n.doBidiReorder(o[p][0]),o[p][1],o[p][2]]):c.push([n.doBidiReorder(o[p])]);i.text=c}else i.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(mn),mn.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new pl(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Rw(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Lw(this.contents),this.head=new kw(this),this.name=new Mw(this),this.cmap=new a1(this),this.toUnicode={},this.hhea=new Pw(this),this.maxp=new Bw(this),this.hmtx=new Tw(this),this.post=new Aw(this),this.os2=new Ew(this),this.loca=new Iw(this),this.glyf=new Nw(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,i,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,p,m,y;for(y=[],c=0,p=(m=this.bbox).length;c<p;c++)t=m[c],y.push(Math.round(t*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,i){var o,l,c,p;for(c=0,l=0,p=(t=""+t).length;0<=p?l<p:l>p;l=0<=p?++l:--l)o=t.charCodeAt(l),c+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/n)||0;return c*(n/1e3)},e.prototype.lineHeight=function(t,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var zo,pl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,i;for(i=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var n,i,o;for(o=[],n=0,i=t.length;0<=i?n<i:n>i;n=0<=i?++n:--n)o.push(this.writeByte(t.charCodeAt(n)));return o},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,i,o,l,c,p,m;return t=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),p=this.readByte(),m=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^l)+65536*(255^c)+256*(255^p)+(255^m)+1):72057594037927940*t+281474976710656*n+1099511627776*i+4294967296*o+16777216*l+65536*c+256*p+m},e.prototype.writeLongLong=function(t){var n,i;return n=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,i;for(n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push(this.readByte());return n},e.prototype.write=function(t){var n,i,o,l;for(l=[],i=0,o=t.length;i<o;i++)n=t[i],l.push(this.writeByte(n));return l},e}(),Lw=function(){var e;function t(n){var i,o,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(n){var i,o,l,c,p,m,y,b,w,A,C,M,N;for(N in C=Object.keys(n).length,m=Math.log(2),w=16*Math.floor(Math.log(C)/m),c=Math.floor(w/m),b=16*C-w,(o=new pl).writeInt(this.scalarType),o.writeShort(C),o.writeShort(w),o.writeShort(c),o.writeShort(b),l=16*C,y=o.pos+l,p=null,M=[],n)for(A=n[N],o.writeString(N),o.writeInt(e(A)),o.writeInt(y),o.writeInt(A.length),M=M.concat(A),N==="head"&&(p=y),y+=A.length;y%4;)M.push(0),y++;return o.write(M),i=2981146554-e(o.data),o.pos=p+8,o.writeUInt32(i),o.data},e=function(n){var i,o,l,c;for(n=l1.call(n);n.length%4;)n.push(0);for(l=new pl(n),o=0,i=0,c=n.length;i<c;i=i+=4)o+=l.readUInt32();return 4294967295&o},t}(),Cw={}.hasOwnProperty,da=function(e,t){for(var n in t)Cw.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};zo=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var kw=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var i;return(i=new pl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},t}(),B0=function(){function e(t,n){var i,o,l,c,p,m,y,b,w,A,C,M,N,F,j,z,$;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),w=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=t.readByte();break;case 4:for(C=t.readUInt16(),A=C/2,t.pos+=6,l=function(){var pe,Ce;for(Ce=[],m=pe=0;0<=A?pe<A:pe>A;m=0<=A?++pe:--pe)Ce.push(t.readUInt16());return Ce}(),t.pos+=2,N=function(){var pe,Ce;for(Ce=[],m=pe=0;0<=A?pe<A:pe>A;m=0<=A?++pe:--pe)Ce.push(t.readUInt16());return Ce}(),y=function(){var pe,Ce;for(Ce=[],m=pe=0;0<=A?pe<A:pe>A;m=0<=A?++pe:--pe)Ce.push(t.readUInt16());return Ce}(),b=function(){var pe,Ce;for(Ce=[],m=pe=0;0<=A?pe<A:pe>A;m=0<=A?++pe:--pe)Ce.push(t.readUInt16());return Ce}(),o=(this.length-t.pos+this.offset)/2,p=function(){var pe,Ce;for(Ce=[],m=pe=0;0<=o?pe<o:pe>o;m=0<=o?++pe:--pe)Ce.push(t.readUInt16());return Ce}(),m=j=0,$=l.length;j<$;m=++j)for(F=l[m],i=z=M=N[m];M<=F?z<=F:z>=F;i=M<=F?++z:--z)b[m]===0?c=i+y[m]:(c=p[b[m]/2+(i-M)-(A-m)]||0)!==0&&(c+=y[m]),this.codeMap[i]=65535&c}t.pos=w}return e.encode=function(t,n){var i,o,l,c,p,m,y,b,w,A,C,M,N,F,j,z,$,pe,Ce,Te,ke,O,oe,we,R,G,he,W,ne,X,se,V,Y,ue,We,U,ee,de,xe,Ae,_e,Ie,Ne,st,gt,ae;switch(W=new pl,c=Object.keys(t).sort(function(fe,Re){return fe-Re}),n){case"macroman":for(N=0,F=function(){var fe=[];for(M=0;M<256;++M)fe.push(0);return fe}(),z={0:0},l={},ne=0,Y=c.length;ne<Y;ne++)z[Ne=t[o=c[ne]]]==null&&(z[Ne]=++N),l[o]={old:t[o],new:z[t[o]]},F[o]=z[t[o]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(F),{charMap:l,subtable:W.data,maxGlyphID:N+1};case"unicode":for(G=[],w=[],$=0,z={},i={},j=y=null,X=0,ue=c.length;X<ue;X++)z[Ce=t[o=c[X]]]==null&&(z[Ce]=++$),i[o]={old:Ce,new:z[Ce]},p=z[Ce]-o,j!=null&&p===y||(j&&w.push(j),G.push(o),y=p),j=o;for(j&&w.push(j),w.push(65535),G.push(65535),we=2*(oe=G.length),O=2*Math.pow(Math.log(oe)/Math.LN2,2),A=Math.log(O/2)/Math.LN2,ke=2*oe-O,m=[],Te=[],C=[],M=se=0,We=G.length;se<We;M=++se){if(R=G[M],b=w[M],R===65535){m.push(0),Te.push(0);break}if(R-(he=i[R].new)>=32768)for(m.push(0),Te.push(2*(C.length+oe-M)),o=V=R;R<=b?V<=b:V>=b;o=R<=b?++V:--V)C.push(i[o].new);else m.push(he-R),Te.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*oe+2*C.length),W.writeUInt16(0),W.writeUInt16(we),W.writeUInt16(O),W.writeUInt16(A),W.writeUInt16(ke),_e=0,U=w.length;_e<U;_e++)o=w[_e],W.writeUInt16(o);for(W.writeUInt16(0),Ie=0,ee=G.length;Ie<ee;Ie++)o=G[Ie],W.writeUInt16(o);for(st=0,de=m.length;st<de;st++)p=m[st],W.writeUInt16(p);for(gt=0,xe=Te.length;gt<xe;gt++)pe=Te[gt],W.writeUInt16(pe);for(ae=0,Ae=C.length;ae<Ae;ae++)N=C[ae],W.writeUInt16(N);return{charMap:i,subtable:W.data,maxGlyphID:$+1}}},e}(),a1=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="cmap",t.prototype.parse=function(n){var i,o,l;for(n.pos=this.offset,this.version=n.readUInt16(),l=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=l?o<l:o>l;o=0<=l?++o:--o)i=new B0(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(n,i){var o,l;return i==null&&(i="macroman"),o=B0.encode(n,i),(l=new pl).writeUInt16(0),l.writeUInt16(1),o.table=l.data.concat(o.subtable),o},t}(),Pw=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),Ew=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(n.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),Aw=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="post",t.prototype.parse=function(n){var i,o,l;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var c;for(o=n.readUInt16(),this.glyphNameIndex=[],c=0;0<=o?c<o:c>o;c=0<=o?++c:--c)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],l=[];n.pos<this.offset+this.length;)i=n.readByte(),l.push(this.names.push(n.readString(i)));return l;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var p,m,y;for(y=[],c=p=0,m=this.file.maxp.numGlyphs;0<=m?p<m:p>m;c=0<=m?++p:--p)y.push(n.readUInt32());return y}).call(this)}},t}(),Sw=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Mw=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="name",t.prototype.parse=function(n){var i,o,l,c,p,m,y,b,w,A,C;for(n.pos=this.offset,n.readShort(),i=n.readShort(),m=n.readShort(),o=[],c=0;0<=i?c<i:c>i;c=0<=i?++c:--c)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+m+n.readShort()});for(y={},c=w=0,A=o.length;w<A;c=++w)l=o[c],n.pos=l.offset,b=n.readString(l.length),p=new Sw(b,l),y[C=l.nameID]==null&&(y[C]=[]),y[l.nameID].push(p);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},t}(),Bw=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),Tw=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="hmtx",t.prototype.parse=function(n){var i,o,l,c,p,m,y;for(n.pos=this.offset,this.metrics=[],i=0,m=this.file.hhea.numberOfMetrics;0<=m?i<m:i>m;i=0<=m?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var b,w;for(w=[],i=b=0;0<=l?b<l:b>l;i=0<=l?++b:--b)w.push(n.readInt16());return w}(),this.widths=(function(){var b,w,A,C;for(C=[],b=0,w=(A=this.metrics).length;b<w;b++)c=A[b],C.push(c.advance);return C}).call(this),o=this.widths[this.widths.length-1],y=[],i=p=0;0<=l?p<l:p>l;i=0<=l?++p:--p)y.push(this.widths.push(o));return y},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),l1=[].slice,Nw=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var i,o,l,c,p,m,y,b,w,A;return n in this.cache?this.cache[n]:(c=this.file.loca,i=this.file.contents,o=c.indexOf(n),(l=c.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+o,p=(m=new pl(i.read(l))).readShort(),b=m.readShort(),A=m.readShort(),y=m.readShort(),w=m.readShort(),this.cache[n]=p===-1?new Ow(m,b,A,y,w):new Dw(m,p,b,A,y,w),this.cache[n]))},t.prototype.encode=function(n,i,o){var l,c,p,m,y;for(p=[],c=[],m=0,y=i.length;m<y;m++)l=n[i[m]],c.push(p.length),l&&(p=p.concat(l.encode(o)));return c.push(p.length),{table:p,offsets:c}},t}(),Dw=function(){function e(t,n,i,o,l,c){this.raw=t,this.numberOfContours=n,this.xMin=i,this.yMin=o,this.xMax=l,this.yMax=c,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Ow=function(){function e(t,n,i,o,l){var c,p;for(this.raw=t,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;p=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&p;)c.pos+=1&p?4:2,128&p?c.pos+=8:64&p?c.pos+=4:8&p&&(c.pos+=2)}return e.prototype.encode=function(){var t,n,i;for(n=new pl(l1.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),Iw=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return da(t,zo),t.prototype.tag="loca",t.prototype.parse=function(n){var i,o;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var l,c;for(c=[],o=0,l=this.length;o<l;o+=2)c.push(2*n.readUInt16());return c}).call(this):(function(){var l,c;for(c=[],o=0,l=this.length;o<l;o+=4)c.push(n.readUInt32());return c}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,i){for(var o=new Uint32Array(this.offsets.length),l=0,c=0,p=0;p<o.length;++p)if(o[p]=l,c<i.length&&i[c]==p){++c,o[p]=l;var m=this.offsets[p],y=this.offsets[p+1]-m;y>0&&(l+=y)}for(var b=new Array(4*o.length),w=0;w<o.length;++w)b[4*w+3]=255&o[w],b[4*w+2]=(65280&o[w])>>8,b[4*w+1]=(16711680&o[w])>>16,b[4*w]=(4278190080&o[w])>>24;return b},t}(),Rw=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,i,o,l;for(n in o=this.font.cmap.tables[0].codeMap,t={},l=this.subset)i=l[n],t[n]=o[i];return t},e.prototype.glyphsFor=function(t){var n,i,o,l,c,p,m;for(o={},c=0,p=t.length;c<p;c++)o[l=t[c]]=this.font.glyf.glyphFor(l);for(l in n=[],o)(i=o[l])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(l in m=this.glyphsFor(n))i=m[l],o[l]=i;return o},e.prototype.encode=function(t,n){var i,o,l,c,p,m,y,b,w,A,C,M,N,F,j;for(o in i=a1.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),C={0:0},j=i.charMap)C[(m=j[o]).old]=m.new;for(M in A=i.maxGlyphID,c)M in C||(C[M]=A++);return b=function(z){var $,pe;for($ in pe={},z)pe[z[$]]=$;return pe}(C),w=Object.keys(b).sort(function(z,$){return z-$}),N=function(){var z,$,pe;for(pe=[],z=0,$=w.length;z<$;z++)p=w[z],pe.push(b[p]);return pe}(),l=this.font.glyf.encode(c,N,C),y=this.font.loca.encode(l.offsets,N),F={cmap:this.font.cmap.raw(),glyf:l.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(F["OS/2"]=this.font.os2.raw()),this.font.directory.encode(F)},e}();mn.API.PDFObject=function(){var e;function t(){}return e=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},t.convert=function(n){var i,o,l,c;if(Array.isArray(n))return"["+function(){var p,m,y;for(y=[],p=0,m=n.length;p<m;p++)i=n[p],y.push(t.convert(i));return y}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in l=["<<"],n)c=n[o],l.push("/"+o+" "+t.convert(c));return l.push(">>"),l.join(`
`)}return""+n},t}();const Fw={class:"h-full flex"},jw={class:"flex-1 relative"},zw={key:0,class:"absolute inset-0 bg-black bg-opacity-50 z-[2000] flex items-center justify-center"},Uw={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},qw={class:"text-center max-w-lg mx-auto p-8"},$w={class:"space-y-4"},Vw={key:2,class:"absolute bottom-6 left-6 z-[1000]"},Gw={class:"bg-white rounded-lg shadow-lg p-3 mb-3"},Hw={class:"grid grid-cols-3 gap-2"},Ww=["onClick"],Zw={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},Kw={class:"flex flex-col mb-2"},Jw={class:"text-xl font-bold text-gray-800 mb-1"},Yw={key:0,class:"text-sm text-gray-500"},Xw={class:"grid grid-cols-1 gap-2"},Qw=["disabled"],ex={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},tx={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},nx={key:0,class:"text-xs text-gray-500 mt-2"},rx={key:3,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},ix={key:4,class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},sx={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},ox={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},ax={class:"flex justify-between items-center mb-4"},lx={key:0,class:"space-y-4"},ux={key:0,class:"space-y-2"},cx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},hx=["onClick"],fx={class:"font-medium text-gray-900"},dx={key:1,class:"space-y-2"},px={class:"flex items-center mb-4"},mx={class:"text-sm text-gray-600"},gx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},_x=["onClick"],vx={class:"font-medium text-gray-900"},yx={key:2,class:"space-y-2"},bx={class:"flex items-center mb-4"},wx={class:"text-sm text-gray-600"},xx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Lx=["onClick"],Cx={class:"font-medium text-gray-900"},kx={class:"text-sm text-gray-500"},Px={class:"text-xs text-gray-400 mt-1"},Ex={key:1,class:"space-y-4"},Ax={key:0,class:"space-y-2"},Sx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Mx=["onClick"],Bx={class:"font-medium text-gray-900"},Tx={key:1,class:"space-y-2"},Nx={class:"flex items-center mb-4"},Dx={class:"text-sm text-gray-600"},Ox={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Ix=["onClick"],Rx={class:"font-medium text-gray-900"},Fx={class:"text-sm text-gray-500"},jx={class:"text-xs text-gray-400 mt-1"},zx={key:2,class:"max-h-96 overflow-y-auto"},Ux={key:0,class:"text-center py-8"},qx={key:1,class:"space-y-2"},$x=["onClick"],Vx={class:"font-medium text-gray-900"},Gx={class:"text-sm text-gray-500"},Hx={class:"text-xs text-gray-400 mt-1"},T0=Es({__name:"MapView",setup(e){const t=It(null),n=Bh(),i=zg(),o=It([]);It(null),It({}),It({mousedown:null,mousemove:null,mouseup:null});const{currentTool:l,selectedShape:c,map:p,initMap:m,setDrawingTool:y,updateShapeStyle:b,updateShapeProperties:w,featureGroup:A,adjustView:C,clearActiveControlPoints:M}=L3(),{initMap:N,baseMaps:F,currentBaseMap:j,changeBaseMap:z}=C3();ku();const $=It(!1),pe=It(!1),Ce=It(null);It({nom:"",description:""});const Te=It(!1),ke=It(!1),O=ls(),oe=It([]),we=It([]),R=It([]),G=It(null),he=It(null),W=It(!1),ne=It(!1),X=It(!1),se=It(null),V=Tn(()=>{var Oe,Le,rt;if(console.log("[MapView][filteredClients] Computing with:",{userType:(Oe=O.user)==null?void 0:Oe.user_type,selectedDealer:G.value,dealerClients:we.value}),((Le=O.user)==null?void 0:Le.user_type)==="admin"){const vt=G.value?we.value:[];return console.log("[MapView][filteredClients] Admin clients:",vt),vt}else if(((rt=O.user)==null?void 0:rt.user_type)==="dealer")return console.log("[MapView][filteredClients] Dealer clients:",we.value),we.value;return console.log("[MapView][filteredClients] No clients returned"),[]}),Y=Tn(()=>{var Oe;return c.value?{type:((Oe=c.value.properties)==null?void 0:Oe.type)||"unknown",properties:c.value.properties||{},layer:c.value}:null});function ue(Oe){const Le=Oe.getCenter(),rt=Oe.getZoom(),vt={lat:Le.lat,lng:Le.lng,zoom:rt};document.cookie=`mapState=${JSON.stringify(vt)};max-age=2592000;path=/`}function We(){const Le=document.cookie.split(";").find(rt=>rt.trim().startsWith("mapState="));if(Le)try{return JSON.parse(Le.split("=")[1])}catch(rt){return console.error("Erreur lors de la lecture du cookie de position:",rt),null}return null}Ra(async()=>{var Lt,Ue;console.log("[onMounted] Starting initialization..."),await n.fetchPlans();const Oe=We(),Le=Oe?[Oe.lat,Oe.lng]:[46.603354,1.888334],rt=(Oe==null?void 0:Oe.zoom)??6;if(t.value&&!p.value){const Tt=m(t.value,Le,rt);Tt.pm.setLang("fr"),Tt.pm.addControls({rotateMode:!1}),Zr.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles  Esri  Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(Tt),N(Tt),Tt.on("moveend",()=>{ue(Tt)}),window.addEventListener("map-set-location",Mt=>{if(Tt&&Mt.detail){const{lat:jt,lng:Vt,zoom:Dt}=Mt.detail;Tt.flyTo([jt,Vt],Dt,{duration:1.5,easeLinearity:.25})}})}const vt=localStorage.getItem("lastPlanId");if(vt)try{await U(parseInt(vt))}catch(Tt){console.error("Error loading last plan:",Tt)}((Lt=O.user)==null?void 0:Lt.user_type)==="admin"&&(console.log("[onMounted] Loading dealers for admin..."),await Ie()),((Ue=O.user)==null?void 0:Ue.user_type)==="dealer"&&(console.log("[onMounted] Loading clients for dealer..."),await Ne())}),$s(()=>i.hasUnsavedChanges,Oe=>{Oe&&Ce.value&&n.markUnsavedChanges()}),$s(p,async Oe=>{Oe&&n.currentPlan&&(le(),await i.loadPlanElements(n.currentPlan.id),await U(n.currentPlan.id))}),$s(()=>n.currentPlan,async Oe=>{Oe?(Ce.value=Oe,n.setCurrentPlan(Oe),i.setCurrentPlan(Oe.id)):(Ce.value=null,le())},{immediate:!0}),yd(()=>{p.value&&p.value.off("moveend")});async function U(Oe){try{le(),await i.loadPlanElements(Oe);const Le=n.getPlanById(Oe);Le&&(Ce.value=Le,n.setCurrentPlan(Le),i.setCurrentPlan(Le.id),localStorage.setItem("lastPlanId",Le.id.toString()),p.value&&A.value&&i.getCurrentElements.forEach(rt=>{var Tt;if(!A.value||!rt.data)return;let vt=null;const{style:Lt={},...Ue}=rt.data;switch(rt.type_forme){case"CERCLE":{const Mt=Ue;Mt.center&&Mt.radius&&(vt=Zr.circle([Mt.center[1],Mt.center[0]],{...Lt,radius:Mt.radius}));break}case"RECTANGLE":{const Mt=Ue;Mt.bounds&&(vt=Zr.rectangle([[Mt.bounds.southWest[1],Mt.bounds.southWest[0]],[Mt.bounds.northEast[1],Mt.bounds.northEast[0]]],Lt));break}case"DEMI_CERCLE":{const Mt=Ue;Mt.center&&Mt.radius&&(vt=new au(Zr.latLng(Mt.center[1],Mt.center[0]),Mt.radius,Mt.startAngle,Mt.endAngle,Lt));break}case"LIGNE":{const Mt=Ue;if(Mt.points){const jt=Mt.points.map(Vt=>Zr.latLng(Vt[1],Vt[0]));vt=Zr.polyline(jt,Lt)}break}case"TEXTE":{const Mt=Ue;if(Mt.position&&Mt.content){const jt=Zr.divIcon({html:`<div class="text-annotation" style="font-size: ${Lt.fontSize||"14px"}">${Mt.content}</div>`,className:"text-container"});vt=Zr.marker([Mt.position[1],Mt.position[0]],{icon:jt,...Lt})}break}}vt&&(vt.properties={type:rt.type_forme,style:Lt,...Ue},(Tt=A.value)==null||Tt.addLayer(vt),o.value.push({id:rt.id,type:rt.type_forme,layer:vt,properties:vt.properties}),Ue.rotation&&typeof vt.setRotation=="function"&&vt.setRotation(Ue.rotation))})),pe.value=!1}catch(Le){console.error("Erreur lors du chargement du plan:",Le)}}async function ee(){if(!Ce.value||!A.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}Te.value=!0;try{const Oe=[];A.value.eachLayer(Le=>{var Ue,Tt,Mt,jt,Vt,Dt,Pn,tn;const rt={style:{color:((Ue=Le.options)==null?void 0:Ue.color)||"#3388ff",fillColor:((Tt=Le.options)==null?void 0:Tt.fillColor)||"#3388ff",fillOpacity:((Mt=Le.options)==null?void 0:Mt.fillOpacity)||.2,weight:((jt=Le.options)==null?void 0:jt.weight)||3,opacity:((Vt=Le.options)==null?void 0:Vt.opacity)||1}};let vt,Lt;if(Le instanceof Zr.Circle)vt="CERCLE",Lt={...rt,center:[Le.getLatLng().lng,Le.getLatLng().lat],radius:Le.getRadius()};else if(Le instanceof Zr.Rectangle){vt="RECTANGLE";const Kn=Le.getBounds();Lt={...rt,bounds:{southWest:[Kn.getSouthWest().lng,Kn.getSouthWest().lat],northEast:[Kn.getNorthEast().lng,Kn.getNorthEast().lat]}}}else if(((Dt=Le.properties)==null?void 0:Dt.type)==="Semicircle")vt="DEMI_CERCLE",Lt={...rt,center:[Le.getLatLng().lng,Le.getLatLng().lat],radius:Le.getRadius(),startAngle:Le.properties.style.startAngle||0,endAngle:Le.properties.style.stopAngle||180};else if(Le instanceof Zr.Polyline&&!(Le instanceof Zr.Polygon)){vt="LIGNE";const Kn=Le.getLatLngs();Lt={...rt,points:Kn.map(ln=>[ln.lng,ln.lat])}}else((Pn=Le.properties)==null?void 0:Pn.type)==="text"&&(vt="TEXTE",Lt={...rt,position:[Le.getLatLng().lng,Le.getLatLng().lat],content:Le.properties.text,style:{...Le.properties.style,fontSize:Le.properties.style.fontSize}});vt&&Lt&&Oe.push({id:Le.id,type_forme:vt,data:{...Lt,rotation:((tn=Le.properties)==null?void 0:tn.rotation)||0}})}),i.elements=Oe,await i.saveToPlan(Ce.value.id),ke.value=!0,setTimeout(()=>{ke.value=!1},3e3)}catch(Oe){console.error("Erreur lors de la sauvegarde du plan:",Oe)}finally{Te.value=!1}}_h(()=>{O.user||De(),n.clearCurrentPlan(),i.clearCurrentPlan()});function de(Oe){w(Oe)}function xe(Oe){try{const Le=new Date(Oe);return isNaN(Le.getTime())?(console.error("Date invalide reue:",Oe),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Le)}catch(Le){return console.error("Erreur lors du formatage de la date:",Le),"Date invalide"}}const Ae=()=>{C()},_e=()=>{c.value&&A.value&&(y(""),A.value.removeLayer(c.value),c.value=null)};async function Ie(){W.value=!0;try{const Oe=await wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});oe.value=Oe.data}catch(Oe){console.error("Erreur lors du chargement des concessionnaires:",Oe)}finally{W.value=!1}}async function Ne(){var Oe;console.log("[loadDealerClients] Starting..."),console.log("[loadDealerClients] authStore.user:",O.user),ne.value=!0;try{const Le=(Oe=O.user)==null?void 0:Oe.id;if(console.log("[loadDealerClients] Using dealerId:",Le),!Le){console.error("[loadDealerClients] No dealer ID available");return}const rt=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Le}});console.log("[loadDealerClients] Response:",rt.data),Array.isArray(rt.data)?we.value=rt.data:rt.data?we.value=[rt.data]:we.value=[],console.log("[loadDealerClients] Processed clients:",we.value)}catch(Le){console.error("[loadDealerClients] Error:",Le),we.value=[]}finally{ne.value=!1}}async function st(Oe){if(console.log("[MapView][selectClient] Starting with client:",Oe),console.log("[MapView][selectClient] Current state:",{selectedDealer:G.value,selectedClient:he.value,newPlanModalRef:!!se.value}),se.value){console.log("[MapView][selectClient] Using NewPlanModal ref"),se.value.selectClient(Oe),he.value=Oe,console.log("[MapView][selectClient] Updated selectedClient:",he.value),X.value=!0;try{const Le={client:Oe.id};G.value&&(Le.concessionnaire=G.value.id);const rt=await wn.get("/plans/",{params:Le});console.log("[MapView][selectClient] Loaded client plans:",rt.data),R.value=rt.data}catch(Le){console.error("[MapView][selectClient] Error loading client plans:",Le),R.value=[]}finally{X.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function gt(){G.value=null,he.value=null,we.value=[],R.value=[]}function ae(){he.value=null,R.value=[]}async function fe(Oe){const Le=await n.getPlanById(Oe);Le&&(Ce.value=Le,n.setCurrentPlan(Le),i.setCurrentPlan(Le.id),$.value=!1)}async function Re(Oe){try{se.value?(await se.value.selectDealer(Oe),G.value=Oe,we.value=se.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(Le){console.error("[MapView][selectDealer] Error:",Le)}}$s(G,async Oe=>{var Le;if(Oe&&((Le=O.user)==null?void 0:Le.user_type)==="admin"){ne.value=!0;try{const rt=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Oe.id}});we.value=Array.isArray(rt.data)?rt.data:[rt.data]}catch(rt){console.error("[MapView][watch selectedDealer] Error loading clients:",rt),we.value=[]}finally{ne.value=!1}}});function De(){localStorage.removeItem("lastPlanId")}function le(){A.value&&A.value.clearLayers(),o.value=[]}function Ze(Oe,Le="m"){return Le==="m"?`${(Oe/1e4).toFixed(2)} ha`:Le==="m"?Oe>=1e3?`${(Oe/1e3).toFixed(2)} km`:`${Oe.toFixed(2)} m`:`${Oe.toFixed(2)} ${Le}`}const lt=It(!1);function Qe(Oe){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",Text:"Texte"}[Oe]||Oe}async function ot(){var Oe,Le,rt;if(!Ce.value||!p.value||!A.value){console.log("[generateSynthesis] Conditions initiales non remplies");return}try{console.log("[generateSynthesis] Dbut de la gnration"),lt.value=!0;const vt=Ce.value.concessionnaire_details,Lt=Ce.value.client_details;c.value&&(M(),c.value=null);const Ue=new mn("l","mm","a4"),Tt=Ue.internal.pageSize.getWidth(),Mt=Ue.internal.pageSize.getHeight(),jt=new Image;jt.src=uf,await new Promise(tn=>{jt.onload=()=>tn(),jt.onerror=()=>tn()}),Ue.addImage(jt,"JPEG",(Tt-60)/2,20,60,60),Ue.setFontSize(24),Ue.setTextColor(0),Ue.text(Ce.value.nom||"Sans titre",Tt/2,100,{align:"center"});let Vt=120;if(Ue.setFontSize(14),vt&&(Ue.setFont(void 0,"bold"),Ue.text("Concessionnaire:",20,Vt),Ue.setFont(void 0,"normal"),Ue.text(`${vt.first_name} ${vt.last_name}${vt.company_name?` (${vt.company_name})`:""}`,20,Vt+8),Vt+=25),Lt&&(Ue.setFont(void 0,"bold"),Ue.text("Client:",20,Vt),Ue.setFont(void 0,"normal"),Ue.text(`${Lt.first_name} ${Lt.last_name}${Lt.company_name?` (${Lt.company_name})`:""}`,20,Vt+8),Vt+=25),Ce.value.description){Ue.setFont(void 0,"bold"),Ue.text("Description:",20,Vt),Ue.setFont(void 0,"normal");const tn=Ue.splitTextToSize(Ce.value.description,150);Ue.text(tn,20,Vt+8),Vt+=10*tn.length+15}Ue.setFontSize(10),Ue.setTextColor(100),Ue.text(`Date de cration: ${xe(Ce.value.date_creation)}`,20,Mt-20),Ue.text(`Dernire modification: ${xe(Ce.value.date_modification)}`,Tt-20,Mt-20,{align:"right"});const Dt=[];A.value.eachLayer(tn=>Dt.push(tn)),console.log(`[generateSynthesis] Nombre de formes  traiter: ${Dt.length}`);const Pn=Zr.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar"],preventDownload:!0}).addTo(p.value);for(let tn=0;tn<Dt.length;tn++){Ue.addPage();const Kn=30;Ue.addImage(uf,"JPEG",Tt-Kn-10,10,Kn,30),Ue.setFontSize(8),Ue.setTextColor(100);let xn=25;vt&&(Ue.text(`Concessionnaire: ${vt.first_name} ${vt.last_name}${vt.company_name?` (${vt.company_name})`:""}`,20,xn),xn+=10),Lt&&Ue.text(`Client: ${Lt.first_name} ${Lt.last_name}${Lt.company_name?` (${Lt.company_name})`:""}`,20,xn),Ue.setDrawColor(200,200,200),Ue.setLineWidth(.5),Ue.line(20,45,Tt-20,45);const Jn=Dt[tn],zt=Jn.properties;zt&&(Ue.setTextColor(0),Ue.setFontSize(16),Ue.setFont(void 0,"bold"),Ue.text(Qe(zt.type),20,60));const Pi=((Oe=Jn.getBounds)==null?void 0:Oe.call(Jn))||((Le=Jn.getLatLng)==null?void 0:Le.call(Jn));Pi&&p.value.fitBounds(Pi instanceof Zr.LatLng?Zr.latLngBounds([Pi]):Pi,{padding:[50,50]}),await Ul(),await new Promise(Fn=>setTimeout(Fn,1e3));try{const Fn=await Pn.takeScreen("image"),Jr=await new Promise((Yt,Kt)=>{const lr=new Image;lr.onload=()=>Yt(lr),lr.onerror=Kt,lr.src=Fn}),_i=Tt*.6-30;let Yn=Jr.height*_i/Jr.width;Yn>Mt*.9&&(Yn=Mt*.9);const dn=(Mt-Yn)/2;if(Ue.addImage(Fn,"PNG",20,dn,_i,Yn),zt){const Yt=Tt*.6+10;let Kt=70;Ue.setFontSize(12),Ue.setFont(void 0,"normal"),zt.type==="Circle"?(Ue.text(`Rayon: ${Ze(zt.radius)}`,Yt,Kt),Kt+=10,Ue.text(`Diamtre: ${Ze(zt.radius*2)}`,Yt,Kt),Kt+=10,Ue.text(`Surface: ${Ze(zt.area,"m")}`,Yt,Kt),Kt+=10,Ue.text(`Primtre: ${Ze(zt.perimeter)}`,Yt,Kt),Kt+=10,zt.surfaceInterieure&&(Ue.text(`Surface intrieure: ${Ze(zt.surfaceInterieure,"m")}`,Yt,Kt),Kt+=10),zt.surfaceExterieure&&(Ue.text(`Surface extrieure: ${Ze(zt.surfaceExterieure,"m")}`,Yt,Kt),Kt+=10)):zt.type==="Rectangle"?(Ue.text(`Largeur: ${Ze(zt.width)}`,Yt,Kt),Kt+=10,Ue.text(`Hauteur: ${Ze(zt.height)}`,Yt,Kt),Kt+=10,Ue.text(`Surface: ${Ze(zt.area,"m")}`,Yt,Kt),Kt+=10,Ue.text(`Primtre: ${Ze(zt.perimeter)}`,Yt,Kt),Kt+=10,zt.surfaceInterieure&&(Ue.text(`Surface intrieure: ${Ze(zt.surfaceInterieure,"m")}`,Yt,Kt),Kt+=10),zt.surfaceExterieure&&(Ue.text(`Surface extrieure: ${Ze(zt.surfaceExterieure,"m")}`,Yt,Kt),Kt+=10)):zt.type==="Line"?(Ue.text(`Longueur: ${Ze(zt.length)}`,Yt,Kt),Kt+=10,(rt=zt.dimensions)!=null&&rt.width&&(Ue.text(`Largeur d'influence: ${Ze(zt.dimensions.width)}`,Yt,Kt),Kt+=10),zt.surfaceInfluence&&(Ue.text(`Surface d'influence: ${Ze(zt.surfaceInfluence,"m")}`,Yt,Kt),Kt+=10)):zt.type==="Polygon"?(Ue.text(`Surface: ${Ze(zt.area,"m")}`,Yt,Kt),Kt+=10,Ue.text(`Primtre: ${Ze(zt.perimeter)}`,Yt,Kt),Kt+=10,zt.surfaceInterieure&&(Ue.text(`Surface intrieure: ${Ze(zt.surfaceInterieure,"m")}`,Yt,Kt),Kt+=10),zt.surfaceExterieure&&(Ue.text(`Surface extrieure: ${Ze(zt.surfaceExterieure,"m")}`,Yt,Kt),Kt+=10)):zt.type==="Semicircle"&&(Ue.text(`Rayon: ${Ze(zt.radius)}`,Yt,Kt),Kt+=10,Ue.text(`Diamtre: ${Ze(zt.radius*2)}`,Yt,Kt),Kt+=10,Ue.text(`Surface: ${Ze(zt.area,"m")}`,Yt,Kt),Kt+=10,Ue.text(`Primtre: ${Ze(zt.perimeter)}`,Yt,Kt),Kt+=10,Ue.text(`Longueur d'arc: ${Ze(zt.arcLength)}`,Yt,Kt),Kt+=10,Ue.text(`Angle d'ouverture: ${zt.openingAngle.toFixed(1)}`,Yt,Kt),Kt+=10,zt.surfaceInterieure&&(Ue.text(`Surface intrieure: ${Ze(zt.surfaceInterieure,"m")}`,Yt,Kt),Kt+=10),zt.surfaceExterieure&&(Ue.text(`Surface extrieure: ${Ze(zt.surfaceExterieure,"m")}`,Yt,Kt),Kt+=10))}}catch(Fn){console.error(`[generateSynthesis] Erreur capture forme ${tn+1}:`,Fn)}}p.value.removeControl(Pn),console.log("[generateSynthesis] Gnration du PDF termine"),Ue.save(`synthese_${Ce.value.nom}.pdf`)}catch(vt){console.error("[generateSynthesis] Erreur:",vt)}finally{lt.value=!1}}return(Oe,Le)=>{var rt,vt,Lt;return ht(),mt("div",Fw,[I("div",jw,[lt.value?(ht(),mt("div",zw,Le[8]||(Le[8]=[I("div",{class:"bg-white rounded-lg p-6 max-w-md text-center"},[I("div",{class:"animate-spin h-12 w-12 border-4 border-primary-600 border-t-transparent rounded-full mx-auto mb-4"}),I("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Gnration de la synthse en cours"),I("p",{class:"text-gray-600"},"Veuillez patienter pendant la capture des formes...")],-1)]))):un("",!0),Ce.value?un("",!0):(ht(),mt("div",Uw,[I("div",qw,[Le[11]||(Le[11]=ov('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+uf+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),I("div",$w,[I("button",{onClick:Le[0]||(Le[0]=Ue=>$.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Le[9]||(Le[9]=[I("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),yr(" Crer un nouveau plan ")])),I("button",{onClick:Le[1]||(Le[1]=Ue=>pe.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Le[10]||(Le[10]=[I("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),yr(" Charger un plan existant ")]))])])])),I("div",{ref_key:"mapContainer",ref:t,class:"absolute inset-0 w-full h-full"},null,512),Ce.value&&!lt.value?(ht(),mt("div",Vw,[I("div",Gw,[Le[12]||(Le[12]=I("h2",{class:"text-sm font-semibold text-gray-700 mb-2"},"Type de carte",-1)),I("div",Hw,[(ht(!0),mt(An,null,Gn(Cn(F),(Ue,Tt)=>(ht(),mt("button",{key:Tt,onClick:Mt=>Cn(z)(Tt),class:as(["px-3 py-2 text-sm rounded-md transition-colors duration-200",{"bg-primary-600 text-white":Cn(j)===Tt,"bg-gray-100 text-gray-700 hover:bg-gray-200":Cn(j)!==Tt}])},Nt(Tt),11,Ww))),128))])]),I("div",Zw,[I("div",Kw,[I("h1",Jw,Nt(((rt=Ce.value)==null?void 0:rt.nom)||"Aucun plan charg"),1),(vt=Ce.value)!=null&&vt.description?(ht(),mt("span",Yw,Nt(Ce.value.description),1)):un("",!0)]),I("div",Xw,[I("button",{onClick:Le[2]||(Le[2]=Ue=>$.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Le[13]||(Le[13]=[I("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),yr(" Nouveau plan ")])),I("button",{onClick:Le[3]||(Le[3]=Ue=>pe.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Le[14]||(Le[14]=[I("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),yr(" Charger un plan ")])),Ce.value?(ht(),mt("button",{key:0,onClick:ee,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:Te.value},[Te.value?(ht(),mt("svg",tx,Le[16]||(Le[16]=[I("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),I("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(ht(),mt("svg",ex,Le[15]||(Le[15]=[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),yr(" "+Nt(Te.value?"Sauvegarde...":"Enregistrer"),1)],8,Qw)):un("",!0),I("button",{onClick:Ae,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},Le[17]||(Le[17]=[I("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),yr(" Ajuster la vue ")])),I("button",{onClick:ot,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200"},Le[18]||(Le[18]=[I("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),yr(" Gnrer synthse ")]))]),(Lt=Ce.value)!=null&&Lt.date_modification?(ht(),mt("div",nx," Dernire sauvegarde : "+Nt(xe(Ce.value.date_modification)),1)):un("",!0)])])):un("",!0),ke.value?(ht(),mt("div",rx,Le[19]||(Le[19]=[I("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),I("span",{class:"font-medium"},"Plan sauvegard avec succs",-1)]))):un("",!0),Ce.value&&!lt.value?(ht(),mt("div",ix,[Tr(b3,{"current-tool":Cn(l),"selected-shape":Y.value,onToolChange:Cn(y),onStyleUpdate:Cn(b),onPropertiesUpdate:de,onDeleteShape:_e},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])])):un("",!0),Tr(Ug,{ref_key:"newPlanModalRef",ref:se,modelValue:$.value,"onUpdate:modelValue":Le[4]||(Le[4]=Ue=>$.value=Ue),onCreated:fe,onDealerSelected:Le[5]||(Le[5]=Ue=>G.value=Ue),onClientSelected:Le[6]||(Le[6]=Ue=>he.value=Ue)},null,8,["modelValue"]),pe.value?(ht(),mt("div",sx,[I("div",ox,[I("div",ax,[Le[21]||(Le[21]=I("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),I("button",{onClick:Le[7]||(Le[7]=Ue=>pe.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Le[20]||(Le[20]=[I("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Cn(O).isAdmin?(ht(),mt("div",lx,[G.value?he.value?(ht(),mt("div",yx,[I("div",bx,[I("button",{onClick:ae,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Le[30]||(Le[30]=[I("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yr(" Retour  la liste des clients ")])),Le[31]||(Le[31]=I("span",{class:"mx-2 text-gray-400"},"|",-1)),I("span",wx,Nt(he.value.first_name)+" "+Nt(he.value.last_name)+" ("+Nt(he.value.company_name)+") ",1)]),Le[33]||(Le[33]=I("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),I("div",xx,[X.value?(ht(),mt(An,{key:0},Gn(3,Ue=>I("div",{key:Ue,class:"animate-pulse"},Le[32]||(Le[32]=[I("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[I("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),I("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),I("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ht(!0),mt(An,{key:1},Gn(R.value,Ue=>(ht(),mt("button",{key:Ue.id,onClick:Tt=>U(Ue.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[I("div",Cx,Nt(Ue.nom),1),I("div",kx,Nt(Ue.description),1),I("div",Px," Modifi le "+Nt(xe(Ue.date_modification)),1)],8,Lx))),128))])])):(ht(),mt("div",dx,[I("div",px,[I("button",{onClick:gt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Le[25]||(Le[25]=[I("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yr(" Retour  la liste des concessionnaires ")])),Le[26]||(Le[26]=I("span",{class:"mx-2 text-gray-400"},"|",-1)),I("span",mx,Nt(G.value.first_name)+" "+Nt(G.value.last_name)+" ("+Nt(G.value.company_name)+") ",1)]),Le[29]||(Le[29]=I("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),I("div",gx,[ne.value?(ht(),mt(An,{key:0},Gn(3,Ue=>I("div",{key:Ue,class:"animate-pulse"},Le[27]||(Le[27]=[I("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[I("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),I("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ht(!0),mt(An,{key:1},Gn(V.value,Ue=>(ht(),mt("button",{key:Ue.id,onClick:Tt=>st(Ue),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[I("div",null,[I("div",vx,Nt(Ue.first_name)+" "+Nt(Ue.last_name)+" ("+Nt(Ue.company_name)+")",1)]),Le[28]||(Le[28]=I("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,_x))),128))])])):(ht(),mt("div",ux,[Le[24]||(Le[24]=I("h3",{class:"font-medium text-gray-700"},"Slectionnez un concessionnaire",-1)),I("div",cx,[W.value?(ht(),mt(An,{key:0},Gn(3,Ue=>I("div",{key:Ue,class:"animate-pulse"},Le[22]||(Le[22]=[I("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[I("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),I("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ht(!0),mt(An,{key:1},Gn(oe.value,Ue=>(ht(),mt("button",{key:Ue.id,onClick:Tt=>Re(Ue),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[I("div",null,[I("div",fx,Nt(Ue.first_name)+" "+Nt(Ue.last_name)+" ("+Nt(Ue.company_name)+")",1)]),Le[23]||(Le[23]=I("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,hx))),128))])]))])):Cn(O).isDealer?(ht(),mt("div",Ex,[he.value?(ht(),mt("div",Tx,[I("div",Nx,[I("button",{onClick:ae,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Le[37]||(Le[37]=[I("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),yr(" Retour  la liste des clients ")])),Le[38]||(Le[38]=I("span",{class:"mx-2 text-gray-400"},"|",-1)),I("span",Dx,Nt(he.value.first_name)+" "+Nt(he.value.last_name),1)]),Le[40]||(Le[40]=I("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),I("div",Ox,[X.value?(ht(),mt(An,{key:0},Gn(3,Ue=>I("div",{key:Ue,class:"animate-pulse"},Le[39]||(Le[39]=[I("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[I("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),I("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),I("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(ht(!0),mt(An,{key:1},Gn(R.value,Ue=>(ht(),mt("button",{key:Ue.id,onClick:Tt=>U(Ue.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[I("div",Rx,Nt(Ue.nom),1),I("div",Fx,Nt(Ue.description),1),I("div",jx," Modifi le "+Nt(xe(Ue.date_modification)),1)],8,Ix))),128))])])):(ht(),mt("div",Ax,[Le[36]||(Le[36]=I("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),I("div",Sx,[ne.value?(ht(),mt(An,{key:0},Gn(3,Ue=>I("div",{key:Ue,class:"animate-pulse"},Le[34]||(Le[34]=[I("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[I("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),I("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(ht(!0),mt(An,{key:1},Gn(V.value,Ue=>(ht(),mt("button",{key:Ue.id,onClick:Tt=>st(Ue),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[I("div",null,[I("div",Bx,Nt(Ue.first_name)+" "+Nt(Ue.last_name)+" ("+Nt(Ue.company_name)+")",1)]),Le[35]||(Le[35]=I("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,Mx))),128))])]))])):(ht(),mt("div",zx,[Cn(n).plans.length===0?(ht(),mt("div",Ux,Le[41]||(Le[41]=[I("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(ht(),mt("div",qx,[(ht(!0),mt(An,null,Gn(Cn(n).plans,Ue=>(ht(),mt("button",{key:Ue.id,onClick:Tt=>U(Ue.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[I("div",Vx,Nt(Ue.nom),1),I("div",Gx,Nt(Ue.description),1),I("div",Hx," Modifi le "+Nt(xe(Ue.date_modification)),1)],8,$x))),128))]))]))])])):un("",!0)])])}}}),Wx={class:"fixed inset-0 z-50 overflow-y-auto"},Zx={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Kx={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Jx={class:"mt-3 text-center sm:mt-0 sm:text-left"},Yx={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Xx={class:"mt-4"},Qx={class:"grid grid-cols-2 gap-4"},eL=["disabled"],tL={key:0,class:"mt-1 text-sm text-gray-500"},nL={class:"grid grid-cols-2 gap-4"},rL={key:0},iL=["disabled"],sL=["value"],oL={key:1},aL=["disabled"],lL=["value"],uL={key:0},cL={class:"grid grid-cols-2 gap-4"},hL={key:1,class:"rounded-md bg-red-50 p-4"},fL={class:"flex"},dL={class:"ml-3"},pL={class:"text-sm font-medium text-red-800"},mL={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},gL=["disabled"],_L={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},u1=Es({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(e,{emit:t}){var M,N,F,j,z,$,pe;const n=e,i=t,o=ls(),l=It(!1),c=It(null),p=Tn(()=>{var Ce;return n.isAdmin?n.user?n.user.id!==((Ce=o.user)==null?void 0:Ce.id):!0:!1}),m=Tn(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),y=Tn(()=>n.isAdmin?w.role==="UTILISATEUR":!0),b=Tn(()=>n.dealers.filter(Ce=>Ce.role==="CONCESSIONNAIRE")),w=Fa({first_name:((M=n.user)==null?void 0:M.first_name)||"",last_name:((N=n.user)==null?void 0:N.last_name)||"",email:((F=n.user)==null?void 0:F.email)||"",username:((j=n.user)==null?void 0:j.username)||"",company_name:((z=n.user)==null?void 0:z.company_name)||"",role:(($=n.user)==null?void 0:$.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((pe=n.user)==null?void 0:pe.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),A=()=>{if(!w.first_name||!w.last_name)return c.value="Le prnom et le nom sont requis",!1;if(!w.email)return c.value="L'email est requis",!1;if(!w.username)return c.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!w.password)return c.value="Le mot de passe est requis",!1;if(w.password!==w.password_confirm)return c.value="Les mots de passe ne correspondent pas",!1}return w.role==="UTILISATEUR"&&!w.dealer?(c.value="Un concessionnaire doit tre slectionn pour un client",!1):!0},C=async()=>{var Ce;if(c.value=null,!!A()){l.value=!0;try{const Te={...w};(Ce=n.user)!=null&&Ce.id&&(Te.id=n.user.id,delete Te.password,delete Te.password_confirm),Te.role==="UTILISATEUR"&&Te.dealer&&(Te.concessionnaire=Te.dealer),delete Te.dealer,await i("save",Te),i("close")}catch(Te){console.error("Erreur formulaire:",Te),c.value=Te.message,l.value=!1}}};return(Ce,Te)=>(ht(),mt("div",Wx,[I("div",Zx,[Te[24]||(Te[24]=I("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[I("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),Te[25]||(Te[25]=I("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),I("div",Kx,[I("div",null,[I("div",Jx,[I("h3",Yx,Nt(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),I("div",Xx,[I("form",{onSubmit:wh(C,["prevent"]),class:"space-y-4"},[I("div",Qx,[I("div",null,[Te[10]||(Te[10]=I("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),Rn(I("input",{type:"text",id:"first_name","onUpdate:modelValue":Te[0]||(Te[0]=ke=>w.first_name=ke),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Sr,w.first_name]])]),I("div",null,[Te[11]||(Te[11]=I("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Rn(I("input",{type:"text",id:"last_name","onUpdate:modelValue":Te[1]||(Te[1]=ke=>w.last_name=ke),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Sr,w.last_name]])])]),I("div",null,[Te[12]||(Te[12]=I("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Rn(I("input",{type:"email",id:"email","onUpdate:modelValue":Te[2]||(Te[2]=ke=>w.email=ke),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Sr,w.email]])]),I("div",null,[Te[13]||(Te[13]=I("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Rn(I("input",{type:"text",id:"username","onUpdate:modelValue":Te[3]||(Te[3]=ke=>w.username=ke),required:"",disabled:!!n.user,class:as(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,eL),[[Sr,w.username]]),n.user?(ht(),mt("p",tL," Le nom d'utilisateur ne peut pas tre modifi aprs la cration. ")):un("",!0)]),I("div",null,[Te[14]||(Te[14]=I("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),Rn(I("input",{type:"text",id:"company_name","onUpdate:modelValue":Te[4]||(Te[4]=ke=>w.company_name=ke),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Sr,w.company_name]])]),I("div",nL,[n.isAdmin?(ht(),mt("div",rL,[Te[16]||(Te[16]=I("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),Rn(I("select",{id:"role","onUpdate:modelValue":Te[5]||(Te[5]=ke=>w.role=ke),required:"",disabled:!p.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Te[15]||(Te[15]=I("option",{value:""},"Slectionner un rle",-1)),(ht(!0),mt(An,null,Gn(m.value,ke=>(ht(),mt("option",{key:ke.value,value:ke.value},Nt(ke.label),9,sL))),128))],8,iL),[[qs,w.role]])])):un("",!0),y.value?(ht(),mt("div",oL,[Te[18]||(Te[18]=I("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Rn(I("select",{id:"dealer","onUpdate:modelValue":Te[6]||(Te[6]=ke=>w.dealer=ke),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Te[17]||(Te[17]=I("option",{value:""},"Slectionner un concessionnaire",-1)),(ht(!0),mt(An,null,Gn(b.value,ke=>(ht(),mt("option",{key:ke.id,value:ke.id},Nt(Cn(Nl)(ke)),9,lL))),128))],8,aL),[[qs,w.dealer]])])):un("",!0)]),e.user?un("",!0):(ht(),mt("div",uL,[I("div",cL,[I("div",null,[Te[19]||(Te[19]=I("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Rn(I("input",{type:"password",id:"password","onUpdate:modelValue":Te[7]||(Te[7]=ke=>w.password=ke),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Sr,w.password]])]),I("div",null,[Te[20]||(Te[20]=I("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Rn(I("input",{type:"password",id:"password_confirm","onUpdate:modelValue":Te[8]||(Te[8]=ke=>w.password_confirm=ke),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Sr,w.password_confirm]])])]),Te[21]||(Te[21]=I("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe  sa premire connexion. ",-1))])),c.value?(ht(),mt("div",hL,[I("div",fL,[Te[22]||(Te[22]=I("div",{class:"flex-shrink-0"},[I("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),I("div",dL,[I("h3",pL,Nt(c.value),1)])])])):un("",!0),I("div",mL,[I("button",{type:"submit",disabled:l.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(ht(),mt("svg",_L,Te[23]||(Te[23]=[I("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),I("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),yr(" "+Nt(l.value?"Enregistrement...":"Enregistrer"),1)],8,gL),I("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:Te[9]||(Te[9]=ke=>Ce.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),vL={class:"fixed inset-0 z-50 overflow-y-auto"},yL={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},bL={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},wL={class:"sm:flex sm:items-start"},xL={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},LL={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},CL={class:"mt-2"},kL={class:"text-sm text-gray-500"},PL={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},c1=Es({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(t,n)=>(ht(),mt("div",vL,[I("div",yL,[n[3]||(n[3]=I("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[I("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=I("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),I("div",bL,[I("div",wL,[n[2]||(n[2]=I("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[I("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),I("div",xL,[I("h3",LL,Nt(e.title),1),I("div",CL,[I("p",kL,Nt(e.message),1)])])]),I("div",PL,[I("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=i=>t.$emit("confirm"))}," Confirmer "),I("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=i=>t.$emit("cancel"))}," Annuler ")])])])]))}}),EL={class:"h-full bg-gray-50"},AL={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},SL={class:"flex justify-between items-center mb-8"},ML={class:"text-3xl font-extrabold text-gray-900"},BL={class:"bg-white shadow rounded-lg mb-6 p-4"},TL={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},NL={key:0},DL=["placeholder"],OL={key:1},IL=["value"],RL={class:"bg-white shadow rounded-lg"},FL={class:"overflow-x-auto"},jL={class:"min-w-full divide-y divide-gray-200"},zL={class:"bg-gray-50"},UL={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},qL={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},$L={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},VL={class:"bg-white divide-y divide-gray-200"},GL={class:"px-6 py-4 whitespace-nowrap"},HL={class:"flex items-center"},WL={class:"flex-shrink-0 h-10 w-10"},ZL={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},KL={class:"text-primary-600 font-medium"},JL={class:"ml-4"},YL={class:"text-sm font-medium text-gray-900"},XL={class:"text-sm text-gray-500"},QL={class:"px-6 py-4 whitespace-nowrap"},eC={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},tC={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},nC={class:"px-6 py-4 whitespace-nowrap"},rC={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},iC=["onClick"],sC=["onClick"],oC=Es({__name:"UserListView",setup(e){const t=ls(),n=It([]),i=It([]),o=It(!1),l=It(!1),c=It(null),p=It(null),m=Fa({role:"",search:"",dealer:""}),y=Tn(()=>t.isAdmin),b=Tn(()=>t.isDealer),w=Tn(()=>n.value.filter(R=>R.role==="CONCESSIONNAIRE")),A=Tn(()=>{var G;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",y.value),console.log("Is dealer:",b.value),console.log("Current filters:",m);let R=n.value;if(b.value&&(console.log("Filtering for dealer:",(G=t.user)==null?void 0:G.id),R=R.filter(he=>{var W;return he.role==="UTILISATEUR"&&he.dealer===((W=t.user)==null?void 0:W.id)}),console.log("Filtered users for dealer:",R)),y.value&&(m.role&&(R=R.filter(he=>he.role===m.role),console.log("Filtered by role:",R)),m.dealer&&(R=R.filter(he=>String(he.dealer)===String(m.dealer)),console.log("Filtered by dealer:",R))),m.search){const he=m.search.toLowerCase();R=R.filter(W=>W.username.toLowerCase().includes(he)||W.email.toLowerCase().includes(he)||W.first_name.toLowerCase().includes(he)||W.last_name.toLowerCase().includes(he)||W.company_name&&W.company_name.toLowerCase().includes(he)),console.log("Filtered by search:",R)}return console.log("Final filtered users:",R),R});Ra(async()=>{await C(),y.value&&await M()});async function C(){try{console.log("Fetching users...");const R=await wn.get("/users/");console.log("Users API response:",R.data),n.value=R.data,console.log("Users after assignment:",n.value)}catch(R){console.error("Erreur lors de la rcupration des utilisateurs:",R)}}async function M(){try{const R=await wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});i.value=R.data}catch(R){console.error("Erreur lors de la rcupration des concessionnaires:",R)}}function N(){c.value=null,o.value=!0}function F(R){c.value={...R},o.value=!0}function j(){o.value=!1,c.value=null}async function z(R){var G;try{let he;const W=!!R.id,ne={...R};return delete ne.dealer_name,delete ne.full_name,delete ne.user_type,delete ne.permissions,W?he=await wn.patch(`/users/${R.id}/`,ne):he=await wn.post("/users/",ne),await C(),j(),he.data}catch(he){const W=((G=he.response)==null?void 0:G.data)||{};let ne="";throw typeof W=="object"&&(ne=Object.entries(W).map(([X,se])=>Array.isArray(se)?se[0]:se).filter(X=>X).join(`
`)),ne||(ne="Une erreur est survenue lors de la sauvegarde"),new Error(ne)}}function $(R){p.value=R,l.value=!0}async function pe(){if(p.value)try{await wn.delete(`/users/${p.value.id}/`),await C(),l.value=!1,p.value=null}catch(R){throw console.error("Erreur lors de la suppression de l'utilisateur:",R),R}}function Ce(R,G){return`${(R==null?void 0:R.charAt(0))||""}${(G==null?void 0:G.charAt(0))||""}`.toUpperCase()}const Te={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function ke(R){return Te[R]||R}function O(R){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function oe(R){return R?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function we(R){var G;return y.value?!0:b.value?R.role==="UTILISATEUR"&&R.dealer===((G=t.user)==null?void 0:G.id):!1}return(R,G)=>{var he,W;return ht(),mt("div",EL,[I("div",AL,[I("div",SL,[I("h1",ML,Nt(y.value?"Gestion des utilisateurs":"Mes clients"),1),I("button",{onClick:N,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[G[4]||(G[4]=I("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),yr(" "+Nt(y.value?"Nouvel utilisateur":"Nouveau client"),1)])]),I("div",BL,[I("div",TL,[y.value?(ht(),mt("div",NL,[G[6]||(G[6]=I("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),Rn(I("select",{id:"role-filter","onUpdate:modelValue":G[0]||(G[0]=ne=>m.role=ne),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},G[5]||(G[5]=[I("option",{value:""},"Tous les rles",-1),I("option",{value:"ADMIN"},"Admin",-1),I("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),I("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[qs,m.role]])])):un("",!0),I("div",null,[G[7]||(G[7]=I("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Rn(I("input",{type:"text",id:"search","onUpdate:modelValue":G[1]||(G[1]=ne=>m.search=ne),placeholder:y.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,DL),[[Sr,m.search]])]),y.value?(ht(),mt("div",OL,[G[9]||(G[9]=I("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Rn(I("select",{id:"dealer-filter","onUpdate:modelValue":G[2]||(G[2]=ne=>m.dealer=ne),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[G[8]||(G[8]=I("option",{value:""},"Tous les concessionnaires",-1)),(ht(!0),mt(An,null,Gn(w.value,ne=>(ht(),mt("option",{key:ne.id,value:ne.id},Nt(ne.company_name||`${ne.first_name} ${ne.last_name}`),9,IL))),128))],512),[[qs,m.dealer]])])):un("",!0)])]),I("div",RL,[I("div",FL,[I("table",jL,[I("thead",zL,[I("tr",null,[I("th",UL,Nt(y.value?"Utilisateur":"Client"),1),y.value?(ht(),mt("th",qL," Rle ")):un("",!0),G[10]||(G[10]=I("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),y.value?(ht(),mt("th",$L," Concessionnaire ")):un("",!0),G[11]||(G[11]=I("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),G[12]||(G[12]=I("th",{scope:"col",class:"relative px-6 py-3"},[I("span",{class:"sr-only"},"Actions")],-1))])]),I("tbody",VL,[(ht(!0),mt(An,null,Gn(A.value,ne=>(ht(),mt("tr",{key:ne.id},[I("td",GL,[I("div",HL,[I("div",WL,[I("div",ZL,[I("span",KL,Nt(Ce(ne.first_name,ne.last_name)),1)])]),I("div",JL,[I("div",YL,Nt(Cn(Nl)(ne)),1),I("div",XL,Nt(ne.username),1)])])]),I("td",QL,[I("span",{class:as(O(ne.role))},Nt(ke(ne.role)),3)]),I("td",eC,Nt(ne.email),1),I("td",tC,Nt(ne.dealer_name||"-"),1),I("td",nC,[I("span",{class:as(oe(ne.is_active))},Nt(ne.is_active?"Actif":"Inactif"),3)]),I("td",rC,[I("button",{onClick:X=>F(ne),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,iC),we(ne)?(ht(),mt("button",{key:0,onClick:X=>$(ne),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,sC)):un("",!0)])]))),128))])])])])]),o.value?(ht(),Ia(u1,{key:0,user:c.value,dealers:i.value,"is-admin":y.value,"current-dealer":(W=(he=Cn(t).user)==null?void 0:he.id)==null?void 0:W.toString(),onClose:j,onSave:z},null,8,["user","dealers","is-admin","current-dealer"])):un("",!0),l.value?(ht(),Ia(c1,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:pe,onCancel:G[3]||(G[3]=ne=>l.value=!1)})):un("",!0)])}}}),aC={class:"h-full bg-gray-50"},lC={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},uC={class:"sm:flex sm:items-center"},cC={class:"sm:flex-auto"},hC={class:"text-2xl font-semibold text-gray-900"},fC={class:"mt-2 text-sm text-gray-700"},dC={key:0,class:"mt-8"},pC={class:"mb-6"},mC=["value"],gC={key:0,class:"mb-6"},_C=["value"],vC={key:1,class:"mt-8"},yC={class:"mb-6"},bC=["value"],wC={class:"mt-8"},xC={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},LC={class:"overflow-x-auto"},CC={class:"min-w-full divide-y divide-gray-300"},kC={class:"bg-gray-50"},PC={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},EC={class:"ml-2 flex-none rounded"},AC={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},SC={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},MC={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},BC={class:"ml-2 flex-none rounded"},TC={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},NC={class:"ml-2 flex-none rounded"},DC={class:"divide-y divide-gray-200 bg-white"},OC={key:0},IC={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},RC={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},FC={key:0,class:"px-3 py-4 text-sm text-gray-900"},jC={key:0,class:"flex items-center"},zC={class:"h-8 w-8 flex-shrink-0"},UC={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},qC={class:"text-primary-700 font-medium text-sm"},$C={class:"ml-3"},VC={class:"font-medium"},GC={key:1,class:"text-gray-500"},HC={key:1,class:"px-3 py-4 text-sm text-gray-900"},WC={key:0,class:"flex items-center"},ZC={class:"h-8 w-8 flex-shrink-0"},KC={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},JC={class:"text-primary-700 font-medium text-sm"},YC={class:"ml-3"},XC={class:"font-medium"},QC={key:1,class:"text-gray-500"},e6={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},t6={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},n6={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},r6=["onClick"],i6=["onClick"],s6=["onClick"],o6={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},a6={class:"bg-white rounded-lg p-6 max-w-md w-full"},l6={class:"flex justify-between items-center mb-4"},u6={key:0,class:"space-y-4"},c6=["value"],h6=["value"],f6={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},d6={class:"flex"},p6={class:"ml-3"},m6={class:"text-sm font-medium text-red-800"},g6={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},_6=["disabled"],v6={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},y6=Es({__name:"PlansView",setup(e){const t=ku(),n=Bh(),i=ls(),o=zg(),l=It([]),c=It([]),p=It([]),m=It(!1),y=It(!1),b=It({nom:"",description:"",client:null}),w=It({id:0,nom:"",description:"",concessionnaire:null,client:null}),A=It(!1),C=It(null),M=It(null),N=It(null),F=It("date_modification"),j=It("desc"),z=Tn(()=>M.value?p.value.filter(V=>V.concessionnaire===M.value):p.value),$=Tn(()=>{let V=l.value;return i.isAdmin?M.value&&(V=V.filter(Y=>Y.concessionnaire===M.value),N.value&&(V=V.filter(Y=>Y.client===N.value))):i.isDealer&&(V=V.filter(Y=>{var ue;return Y.concessionnaire===((ue=i.user)==null?void 0:ue.id)}),N.value&&(V=V.filter(Y=>Y.client===N.value))),[...V].sort((Y,ue)=>{if(F.value==="nom")return j.value==="asc"?Y.nom.localeCompare(ue.nom):ue.nom.localeCompare(Y.nom);{const We=new Date(Y[F.value]).getTime(),U=new Date(ue[F.value]).getTime();return j.value==="asc"?We-U:U-We}})});Tn(()=>l.value.filter(V=>{var Y;return V.createur.id===((Y=i.user)==null?void 0:Y.id)})),Tn(()=>l.value.filter(V=>{var Y,ue,We;return i.isAdmin?V.createur.id!==((Y=i.user)==null?void 0:Y.id):i.isDealer?V.concessionnaire===((ue=i.user)==null?void 0:ue.id):V.client===((We=i.user)==null?void 0:We.id)}));const pe=Tn(()=>i.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:l.value}:i.isDealer?{title:"Plans des clients",description:"Plans o vous tes assign comme concessionnaire",plans:l.value.filter(V=>{var Y;return V.concessionnaire===((Y=i.user)==null?void 0:Y.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:l.value.filter(V=>{var Y,ue;return V.client===((Y=i.user)==null?void 0:Y.id)||V.createur.id===((ue=i.user)==null?void 0:ue.id)})});Ra(async()=>{var V;await Ce(),i.isAdmin?await Te():i.isDealer&&await he(((V=i.user)==null?void 0:V.id)||0)});async function Ce(){try{const V=await n.fetchPlansWithDetails();l.value=V.data}catch(V){console.error("Erreur lors du chargement des plans:",V)}}async function Te(){try{const[V,Y]=await Promise.all([wn.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),wn.get("/users/",{params:{role:"UTILISATEUR"}})]);c.value=V.data,p.value=Y.data}catch(V){console.error("Erreur lors du chargement des dealers et clients:",V)}}function ke(){m.value=!0,b.value={nom:"",description:"",client:null}}async function O(V){try{n.setCurrentPlan(V),await o.loadPlanElements(V.id),t.push("/")}catch(Y){console.error("Erreur lors du chargement du plan:",Y),alert("Une erreur est survenue lors du chargement du plan")}}async function oe(V){var Y;if(V!=null&&V.id&&confirm("tes-vous sr de vouloir supprimer ce plan ?"))try{await n.deletePlan(V.id),await Ce(),((Y=n.currentPlan)==null?void 0:Y.id)===V.id&&n.clearCurrentPlan()}catch(ue){console.error("Erreur lors de la suppression du plan:",ue),alert("Une erreur est survenue lors de la suppression du plan")}}function we(V){return new Date(V).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function R(V){return V?(V.first_name.charAt(0)+V.last_name.charAt(0)).toUpperCase():""}function G(V){w.value={id:V.id,nom:V.nom,description:V.description,concessionnaire:V.concessionnaire||null,client:V.client||null},V.concessionnaire&&he(V.concessionnaire),y.value=!0}async function he(V){try{const Y=await wn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:V}});p.value=Y.data}catch(Y){console.error("Erreur lors du chargement des clients:",Y),p.value=[]}}async function W(){var V,Y,ue,We,U;C.value=null,A.value=!0;try{if(!w.value.nom.trim())throw new Error("Le nom du plan est requis");if(w.value.client&&!w.value.concessionnaire)throw new Error("Un concessionnaire doit tre slectionn pour assigner un client");await n.updatePlanDetails(w.value.id,{nom:w.value.nom.trim(),description:w.value.description.trim(),concessionnaire:w.value.concessionnaire,client:w.value.client})&&(y.value=!1,await Ce())}catch(ee){if(console.error("Erreur lors de la mise  jour du plan:",ee),(Y=(V=ee.response)==null?void 0:V.data)!=null&&Y.detail)C.value=ee.response.data.detail;else if((We=(ue=ee.response)==null?void 0:ue.data)!=null&&We.non_field_errors)C.value=ee.response.data.non_field_errors[0];else if((U=ee.response)!=null&&U.data){const de=Object.entries(ee.response.data).map(([xe,Ae])=>`${xe}: ${Array.isArray(Ae)?Ae[0]:Ae}`);C.value=de.join(`
`)}else C.value=ee.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{A.value=!1}}$s(()=>w.value.concessionnaire,async V=>{V?await he(V):(p.value=[],w.value.client=null)});function ne(V){const Y=i.user;return Y?Y.user_type==="admin"?!0:Y.user_type==="dealer"?V.concessionnaire===Y.id:V.client===Y.id||V.createur.id===Y.id:!1}Tn(()=>{const V=new Map;return l.value.forEach(Y=>{Y.createur&&V.set(Y.createur.id,Y.createur),Y.concessionnaire_details&&V.set(Y.concessionnaire_details.id,Y.concessionnaire_details),Y.client_details&&V.set(Y.client_details.id,Y.client_details)}),V});async function X(V){await Ce(),t.push("/")}function se(V){F.value===V?j.value=j.value==="asc"?"desc":"asc":(F.value=V,j.value="desc")}return(V,Y)=>(ht(),mt("div",aC,[I("div",lC,[I("div",uC,[I("div",cC,[I("h1",hC,Nt(pe.value.title),1),I("p",fC,Nt(pe.value.description),1)]),I("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[I("button",{onClick:ke,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Cn(i).isAdmin?(ht(),mt("div",dC,[I("div",pC,[Y[14]||(Y[14]=I("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),Rn(I("select",{id:"dealer-filter","onUpdate:modelValue":Y[0]||(Y[0]=ue=>M.value=ue),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Y[13]||(Y[13]=I("option",{value:null},"Tous les concessionnaires",-1)),(ht(!0),mt(An,null,Gn(c.value,ue=>(ht(),mt("option",{key:ue.id,value:ue.id},Nt(ue.first_name)+" "+Nt(ue.last_name)+" ("+Nt(ue.company_name)+") ",9,mC))),128))],512),[[qs,M.value]])]),M.value?(ht(),mt("div",gC,[Y[16]||(Y[16]=I("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),Rn(I("select",{id:"client-filter","onUpdate:modelValue":Y[1]||(Y[1]=ue=>N.value=ue),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Y[15]||(Y[15]=I("option",{value:null},"Tous les clients",-1)),(ht(!0),mt(An,null,Gn(z.value,ue=>(ht(),mt("option",{key:ue.id,value:ue.id},Nt(ue.first_name)+" "+Nt(ue.last_name)+" ("+Nt(ue.company_name)+") ",9,_C))),128))],512),[[qs,N.value]])])):un("",!0)])):Cn(i).isDealer?(ht(),mt("div",vC,[I("div",yC,[Y[18]||(Y[18]=I("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),Rn(I("select",{id:"client-filter","onUpdate:modelValue":Y[2]||(Y[2]=ue=>N.value=ue),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Y[17]||(Y[17]=I("option",{value:null},"Tous les clients",-1)),(ht(!0),mt(An,null,Gn(p.value,ue=>(ht(),mt("option",{key:ue.id,value:ue.id},Nt(ue.first_name)+" "+Nt(ue.last_name)+" ("+Nt(ue.company_name)+") ",9,bC))),128))],512),[[qs,N.value]])])])):un("",!0),I("div",wC,[I("div",xC,[I("div",LC,[I("table",CC,[I("thead",kC,[I("tr",null,[I("th",PC,[I("button",{onClick:Y[3]||(Y[3]=ue=>se("nom")),class:"group inline-flex items-center"},[Y[20]||(Y[20]=yr(" Nom ")),I("span",EC,[(ht(),mt("svg",{class:as(["h-5 w-5",{"text-gray-900":F.value==="nom","text-gray-400":F.value!=="nom","rotate-180":F.value==="nom"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Y[19]||(Y[19]=[I("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),Y[25]||(Y[25]=I("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Cn(i).isDealer?un("",!0):(ht(),mt("th",AC," Concessionnaire ")),Cn(i).isClient?un("",!0):(ht(),mt("th",SC," Client ")),I("th",MC,[I("button",{onClick:Y[4]||(Y[4]=ue=>se("date_creation")),class:"group inline-flex items-center"},[Y[22]||(Y[22]=yr(" Cr le ")),I("span",BC,[(ht(),mt("svg",{class:as(["h-5 w-5",{"text-gray-900":F.value==="date_creation","text-gray-400":F.value!=="date_creation","rotate-180":F.value==="date_creation"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Y[21]||(Y[21]=[I("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),I("th",TC,[I("button",{onClick:Y[5]||(Y[5]=ue=>se("date_modification")),class:"group inline-flex items-center"},[Y[24]||(Y[24]=yr(" Modifi le ")),I("span",NC,[(ht(),mt("svg",{class:as(["h-5 w-5",{"text-gray-900":F.value==="date_modification","text-gray-400":F.value!=="date_modification","rotate-180":F.value==="date_modification"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},Y[23]||(Y[23]=[I("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),Y[26]||(Y[26]=I("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[I("span",{class:"sr-only"},"Actions")],-1))])]),I("tbody",DC,[$.value.length===0?(ht(),mt("tr",OC,Y[27]||(Y[27]=[I("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):un("",!0),(ht(!0),mt(An,null,Gn($.value,ue=>(ht(),mt("tr",{key:ue.id,class:"hover:bg-gray-50"},[I("td",IC,Nt(ue.nom),1),I("td",RC,Nt(ue.description||"-"),1),Cn(i).isDealer?un("",!0):(ht(),mt("td",FC,[ue.concessionnaire_details?(ht(),mt("div",jC,[I("div",zC,[I("div",UC,[I("span",qC,Nt(R(ue.concessionnaire_details)),1)])]),I("div",$C,[I("div",VC,Nt(Cn(Nl)(ue.concessionnaire_details)),1)])])):(ht(),mt("div",GC,"-"))])),Cn(i).isClient?un("",!0):(ht(),mt("td",HC,[ue.client_details?(ht(),mt("div",WC,[I("div",ZC,[I("div",KC,[I("span",JC,Nt(R(ue.client_details)),1)])]),I("div",YC,[I("div",XC,Nt(Cn(Nl)(ue.client_details)),1)])])):(ht(),mt("div",QC,"-"))])),I("td",e6,Nt(we(ue.date_creation)),1),I("td",t6,Nt(we(ue.date_modification)),1),I("td",n6,[I("button",{onClick:We=>O(ue),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,r6),I("button",{onClick:We=>G(ue),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,i6),ne(ue)?(ht(),mt("button",{key:0,onClick:We=>oe(ue),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,s6)):un("",!0)])]))),128))])])])])]),Tr(Ug,{modelValue:m.value,"onUpdate:modelValue":Y[6]||(Y[6]=ue=>m.value=ue),dealers:c.value,clients:p.value,onCreated:X},null,8,["modelValue","dealers","clients"]),y.value?(ht(),mt("div",o6,[I("div",a6,[I("div",l6,[Y[29]||(Y[29]=I("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),I("button",{onClick:Y[7]||(Y[7]=ue=>y.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Y[28]||(Y[28]=[I("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[I("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),I("form",{onSubmit:wh(W,["prevent"]),class:"space-y-4"},[I("div",null,[Y[30]||(Y[30]=I("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Rn(I("input",{type:"text",id:"edit-nom","onUpdate:modelValue":Y[8]||(Y[8]=ue=>w.value.nom=ue),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Sr,w.value.nom]])]),I("div",null,[Y[31]||(Y[31]=I("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Rn(I("textarea",{id:"edit-description","onUpdate:modelValue":Y[9]||(Y[9]=ue=>w.value.description=ue),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Sr,w.value.description]])]),Cn(i).isAdmin?(ht(),mt("div",u6,[I("div",null,[Y[33]||(Y[33]=I("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),Rn(I("select",{id:"edit-concessionnaire","onUpdate:modelValue":Y[10]||(Y[10]=ue=>w.value.concessionnaire=ue),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Y[32]||(Y[32]=I("option",{value:null},"Aucun",-1)),(ht(!0),mt(An,null,Gn(c.value,ue=>(ht(),mt("option",{key:ue.id,value:ue.id},Nt(Cn(Nl)(ue)),9,c6))),128))],512),[[qs,w.value.concessionnaire]])]),I("div",null,[Y[35]||(Y[35]=I("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),Rn(I("select",{id:"edit-client","onUpdate:modelValue":Y[11]||(Y[11]=ue=>w.value.client=ue),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Y[34]||(Y[34]=I("option",{value:null},"Aucun",-1)),(ht(!0),mt(An,null,Gn(z.value,ue=>(ht(),mt("option",{key:ue.id,value:ue.id},Nt(Cn(Nl)(ue)),9,h6))),128))],512),[[qs,w.value.client]])])])):un("",!0),C.value?(ht(),mt("div",f6,[I("div",d6,[Y[36]||(Y[36]=I("div",{class:"flex-shrink-0"},[I("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),I("div",p6,[I("p",m6,Nt(C.value),1)])])])):un("",!0),I("div",g6,[I("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:Y[12]||(Y[12]=ue=>y.value=!1)}," Annuler "),I("button",{type:"submit",disabled:A.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[A.value?(ht(),mt("svg",v6,Y[37]||(Y[37]=[I("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),I("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):un("",!0),yr(" "+Nt(A.value?"Enregistrement...":"Enregistrer"),1)],8,_6)])],32)])])):un("",!0)])]))}}),b6={class:"h-full bg-gray-50"},w6={class:"container mx-auto px-4 py-8"},x6={class:"sm:flex sm:items-center"},L6={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},C6={class:"mt-8"},k6={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},P6={class:"overflow-x-auto"},E6={class:"min-w-full divide-y divide-gray-300"},A6={class:"divide-y divide-gray-200 bg-white"},S6={key:0,class:"animate-pulse"},M6={key:1},B6={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},T6={class:"flex items-center"},N6={class:"h-10 w-10 flex-shrink-0"},D6={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},O6={class:"text-primary-600 font-medium"},I6={class:"ml-4"},R6={class:"font-medium text-gray-900"},F6={class:"text-gray-500"},j6={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},z6={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},U6={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},q6={class:"flex items-center"},$6={class:"font-medium"},V6={class:"text-gray-400 ml-1"},G6={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},H6=["onClick"],W6=["onClick"],Z6=Es({__name:"ClientListView",setup(e){ku();const t=ls(),n=It([]),i=It(!0),o=It(!1),l=It(!1),c=It(null),p=It(null);Ra(async()=>{await m()});async function m(){var N;try{const F=await wn.get("/users/",{params:{dealer:(N=t.user)==null?void 0:N.id,role:"UTILISATEUR",include_plans:!0}});n.value=F.data}catch(F){console.error("Error fetching clients:",F)}finally{i.value=!1}}function y(N,F){return`${(N==null?void 0:N.charAt(0))||""}${(F==null?void 0:F.charAt(0))||""}`.toUpperCase()}function b(N){c.value=N,o.value=!0}function w(){o.value=!1,c.value=null}async function A(N){var F;try{const j=!!N.id,z=j?`/users/${N.id}/`:"/users/",$=j?"patch":"post";N.role="UTILISATEUR",N.concessionnaire=(F=t.user)==null?void 0:F.id,await wn[$](z,N),await m(),w()}catch(j){throw console.error("Erreur lors de la sauvegarde du client:",j),j}}function C(N){p.value=N,l.value=!0}async function M(){if(p.value)try{await wn.delete(`/users/${p.value.id}/`),await m(),l.value=!1,p.value=null}catch(N){throw console.error("Erreur lors de la suppression du client:",N),N}}return(N,F)=>{var j,z;return ht(),mt("div",b6,[I("div",w6,[I("div",x6,[F[3]||(F[3]=I("div",{class:"sm:flex-auto"},[I("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),I("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associs ")],-1)),I("div",L6,[I("button",{onClick:F[0]||(F[0]=$=>o.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},F[2]||(F[2]=[I("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[I("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),yr(" Ajouter un client ")]))])]),I("div",C6,[I("div",k6,[I("div",P6,[I("table",E6,[F[6]||(F[6]=I("thead",{class:"bg-gray-50"},[I("tr",null,[I("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),I("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),I("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),I("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),I("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[I("span",{class:"sr-only"},"Actions")])])],-1)),I("tbody",A6,[i.value?(ht(),mt("tr",S6,F[4]||(F[4]=[I("td",{colspan:"5",class:"py-4 px-6"},[I("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(ht(),mt("tr",M6,F[5]||(F[5]=[I("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouv ",-1)]))):un("",!0),(ht(!0),mt(An,null,Gn(n.value,$=>(ht(),mt("tr",{key:$.id,class:"hover:bg-gray-50"},[I("td",B6,[I("div",T6,[I("div",N6,[I("div",D6,[I("span",O6,Nt(y($.first_name,$.last_name)),1)])]),I("div",I6,[I("div",R6,Nt(Cn(Nl)($)),1),I("div",F6,Nt($.username),1)])])]),I("td",j6,Nt($.email),1),I("td",z6,Nt($.company_name||"-"),1),I("td",U6,[I("div",q6,[I("span",$6,Nt($.plans_count||0),1),I("span",V6,"plan"+Nt(($.plans_count||0)>1?"s":""),1)])]),I("td",G6,[I("button",{onClick:pe=>b($),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,H6),I("button",{onClick:pe=>C($),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,W6)])]))),128))])])])])]),o.value?(ht(),Ia(u1,{key:0,user:c.value||{},dealers:[{...Cn(t).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(z=(j=Cn(t).user)==null?void 0:j.id)==null?void 0:z.toString(),onClose:w,onSave:A},null,8,["user","dealers","current-dealer"])):un("",!0),l.value?(ht(),Ia(c1,{key:1,title:"Supprimer le client",message:"tes-vous sr de vouloir supprimer ce client ? Cette action est irrversible.",onConfirm:M,onCancel:F[1]||(F[1]=$=>l.value=!1)})):un("",!0)])])}}}),h1=M5({history:a5("/"),routes:[{path:"/",name:"home",component:T0,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:y6,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:oC,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:Z6,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Dl(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:Jb,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Dl(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Dl(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:Bb,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:T0,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Dl(()=>import("./NotFoundView.js"),[])}]});h1.beforeEach(async(e,t,n)=>{var p,m;const i=ls();if(console.log("Route:",e.path,"Auth state:",{initialized:i.initialized,isAuthenticated:i.isAuthenticated,user:i.user}),!i.initialized)try{await i.initialize(window.INITIAL_STATE)}catch(y){console.error("Error initializing auth store:",y)}const o=i.isAuthenticated,l=(p=i.user)==null?void 0:p.must_change_password,c=(m=i.user)==null?void 0:m.user_type;if(e.meta.requiresAuth&&!o){n("/login");return}if(o&&l&&e.name!=="changePassword"){n({name:"changePassword"});return}if(e.name==="changePassword"&&!l){n({name:"home"});return}if(e.meta.allowedRoles&&c&&!e.meta.allowedRoles.includes(c)){n({name:"home"});return}if(e.meta.requiresGuest&&o){n({name:"home"});return}n()});const Bd=Gv(ub),f1=Zv();Bd.use(f1);Bd.use(h1);const K6=ls(f1);window.INITIAL_STATE&&K6.initialize(window.INITIAL_STATE);Bd.mount("#app");export{sr as _,Fa as a,I as b,mt as c,Es as d,un as e,Rn as f,ht as g,ov as h,yr as i,Tr as j,Ml as k,k_ as l,mk as m,as as n,Ra as o,ku as p,co as q,It as r,Bg as s,Nt as t,ls as u,Sr as v,wh as w};
