var um=Object.defineProperty;var cm=(t,n,s)=>n in t?um(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s;var ee=(t,n,s)=>cm(t,typeof n!="symbol"?n+"":n,s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const p of h)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(h){const p={};return h.integrity&&(p.integrity=h.integrity),h.referrerPolicy&&(p.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?p.credentials="include":h.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(h){if(h.ep)return;h.ep=!0;const p=s(h);fetch(h.href,p)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function bc(t){const n=Object.create(null);for(const s of t.split(","))n[s]=1;return s=>s in n}const je={},Ps=[],Tn=()=>{},hm=()=>!1,ml=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),xc=t=>t.startsWith("onUpdate:"),ki=Object.assign,wc=(t,n)=>{const s=t.indexOf(n);s>-1&&t.splice(s,1)},dm=Object.prototype.hasOwnProperty,Oe=(t,n)=>dm.call(t,n),he=Array.isArray,Bs=t=>qo(t)==="[object Map]",Os=t=>qo(t)==="[object Set]",th=t=>qo(t)==="[object Date]",ve=t=>typeof t=="function",ni=t=>typeof t=="string",Dn=t=>typeof t=="symbol",Ve=t=>t!==null&&typeof t=="object",Ed=t=>(Ve(t)||ve(t))&&ve(t.then)&&ve(t.catch),kd=Object.prototype.toString,qo=t=>kd.call(t),fm=t=>qo(t).slice(8,-1),Md=t=>qo(t)==="[object Object]",Lc=t=>ni(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ko=bc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gl=t=>{const n=Object.create(null);return s=>n[s]||(n[s]=t(s))},pm=/-(\w)/g,cn=gl(t=>t.replace(pm,(n,s)=>s?s.toUpperCase():"")),mm=/\B([A-Z])/g,Wr=gl(t=>t.replace(mm,"-$1").toLowerCase()),_l=gl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Au=gl(t=>t?`on${_l(t)}`:""),yr=(t,n)=>!Object.is(t,n),Va=(t,...n)=>{for(let s=0;s<t.length;s++)t[s](...n)},Pd=(t,n,s,l=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:l,value:s})},el=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let eh;const yl=()=>eh||(eh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vl(t){if(he(t)){const n={};for(let s=0;s<t.length;s++){const l=t[s],h=ni(l)?vm(l):vl(l);if(h)for(const p in h)n[p]=h[p]}return n}else if(ni(t)||Ve(t))return t}const gm=/;(?![^(]*\))/g,_m=/:([^]+)/,ym=/\/\*[^]*?\*\//g;function vm(t){const n={};return t.replace(ym,"").split(gm).forEach(s=>{if(s){const l=s.split(_m);l.length>1&&(n[l[0].trim()]=l[1].trim())}}),n}function br(t){let n="";if(ni(t))n=t;else if(he(t))for(let s=0;s<t.length;s++){const l=br(t[s]);l&&(n+=l+" ")}else if(Ve(t))for(const s in t)t[s]&&(n+=s+" ");return n.trim()}const bm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xm=bc(bm);function Bd(t){return!!t||t===""}function wm(t,n){if(t.length!==n.length)return!1;let s=!0;for(let l=0;s&&l<t.length;l++)s=Ko(t[l],n[l]);return s}function Ko(t,n){if(t===n)return!0;let s=th(t),l=th(n);if(s||l)return s&&l?t.getTime()===n.getTime():!1;if(s=Dn(t),l=Dn(n),s||l)return t===n;if(s=he(t),l=he(n),s||l)return s&&l?wm(t,n):!1;if(s=Ve(t),l=Ve(n),s||l){if(!s||!l)return!1;const h=Object.keys(t).length,p=Object.keys(n).length;if(h!==p)return!1;for(const f in t){const y=t.hasOwnProperty(f),v=n.hasOwnProperty(f);if(y&&!v||!y&&v||!Ko(t[f],n[f]))return!1}}return String(t)===String(n)}function Cc(t,n){return t.findIndex(s=>Ko(s,n))}const Sd=t=>!!(t&&t.__v_isRef===!0),Kt=t=>ni(t)?t:t==null?"":he(t)||Ve(t)&&(t.toString===kd||!ve(t.toString))?Sd(t)?Kt(t.value):JSON.stringify(t,Ad,2):String(t),Ad=(t,n)=>Sd(n)?Ad(t,n.value):Bs(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((s,[l,h],p)=>(s[Tu(l,p)+" =>"]=h,s),{})}:Os(n)?{[`Set(${n.size})`]:[...n.values()].map(s=>Tu(s))}:Dn(n)?Tu(n):Ve(n)&&!he(n)&&!Md(n)?String(n):n,Tu=(t,n="")=>{var s;return Dn(t)?`Symbol(${(s=t.description)!=null?s:n})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Di;class Td{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Di,!n&&Di&&(this.index=(Di.scopes||(Di.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].pause();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,s;if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].resume();for(n=0,s=this.effects.length;n<s;n++)this.effects[n].resume()}}run(n){if(this._active){const s=Di;try{return Di=this,n()}finally{Di=s}}}on(){Di=this}off(){Di=this.parent}stop(n){if(this._active){this._active=!1;let s,l;for(s=0,l=this.effects.length;s<l;s++)this.effects[s].stop();for(this.effects.length=0,s=0,l=this.cleanups.length;s<l;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,l=this.scopes.length;s<l;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0}}}function Dd(t){return new Td(t)}function Rd(){return Di}function Lm(t,n=!1){Di&&Di.cleanups.push(t)}let Ge;const Du=new WeakSet;class Od{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Di&&Di.active&&Di.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Du.has(this)&&(Du.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ih(this),zd(this);const n=Ge,s=_n;Ge=this,_n=!0;try{return this.fn()}finally{Nd(this),Ge=n,_n=s,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)Mc(n);this.deps=this.depsTail=void 0,ih(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Du.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ju(this)&&this.run()}get dirty(){return Ju(this)}}let Id=0,Mo,Po;function Fd(t,n=!1){if(t.flags|=8,n){t.next=Po,Po=t;return}t.next=Mo,Mo=t}function Ec(){Id++}function kc(){if(--Id>0)return;if(Po){let n=Po;for(Po=void 0;n;){const s=n.next;n.next=void 0,n.flags&=-9,n=s}}let t;for(;Mo;){let n=Mo;for(Mo=void 0;n;){const s=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(l){t||(t=l)}n=s}}if(t)throw t}function zd(t){for(let n=t.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function Nd(t){let n,s=t.depsTail,l=s;for(;l;){const h=l.prevDep;l.version===-1?(l===s&&(s=h),Mc(l),Cm(l)):n=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=h}t.deps=n,t.depsTail=s}function Ju(t){for(let n=t.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(jd(n.dep.computed)||n.dep.version!==n.version))return!0;return!!t._dirty}function jd(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Io))return;t.globalVersion=Io;const n=t.dep;if(t.flags|=2,n.version>0&&!t.isSSR&&t.deps&&!Ju(t)){t.flags&=-3;return}const s=Ge,l=_n;Ge=t,_n=!0;try{zd(t);const h=t.fn(t._value);(n.version===0||yr(h,t._value))&&(t._value=h,n.version++)}catch(h){throw n.version++,h}finally{Ge=s,_n=l,Nd(t),t.flags&=-3}}function Mc(t,n=!1){const{dep:s,prevSub:l,nextSub:h}=t;if(l&&(l.nextSub=h,t.prevSub=void 0),h&&(h.prevSub=l,t.nextSub=void 0),s.subs===t&&(s.subs=l,!l&&s.computed)){s.computed.flags&=-5;for(let p=s.computed.deps;p;p=p.nextDep)Mc(p,!0)}!n&&!--s.sc&&s.map&&s.map.delete(s.key)}function Cm(t){const{prevDep:n,nextDep:s}=t;n&&(n.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=n,t.nextDep=void 0)}let _n=!0;const Ud=[];function xr(){Ud.push(_n),_n=!1}function wr(){const t=Ud.pop();_n=t===void 0?!0:t}function ih(t){const{cleanup:n}=t;if(t.cleanup=void 0,n){const s=Ge;Ge=void 0;try{n()}finally{Ge=s}}}let Io=0;class Em{constructor(n,s){this.sub=n,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Pc{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!Ge||!_n||Ge===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Ge)s=this.activeLink=new Em(Ge,this),Ge.deps?(s.prevDep=Ge.depsTail,Ge.depsTail.nextDep=s,Ge.depsTail=s):Ge.deps=Ge.depsTail=s,$d(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const l=s.nextDep;l.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=l),s.prevDep=Ge.depsTail,s.nextDep=void 0,Ge.depsTail.nextDep=s,Ge.depsTail=s,Ge.deps===s&&(Ge.deps=l)}return s}trigger(n){this.version++,Io++,this.notify(n)}notify(n){Ec();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{kc()}}}function $d(t){if(t.dep.sc++,t.sub.flags&4){const n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let l=n.deps;l;l=l.nextDep)$d(l)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const il=new WeakMap,$r=Symbol(""),Xu=Symbol(""),Fo=Symbol("");function Li(t,n,s){if(_n&&Ge){let l=il.get(t);l||il.set(t,l=new Map);let h=l.get(s);h||(l.set(s,h=new Pc),h.map=l,h.key=s),h.track()}}function Wn(t,n,s,l,h,p){const f=il.get(t);if(!f){Io++;return}const y=v=>{v&&v.trigger()};if(Ec(),n==="clear")f.forEach(y);else{const v=he(t),M=v&&Lc(s);if(v&&s==="length"){const k=Number(l);f.forEach((P,U)=>{(U==="length"||U===Fo||!Dn(U)&&U>=k)&&y(P)})}else switch((s!==void 0||f.has(void 0))&&y(f.get(s)),M&&y(f.get(Fo)),n){case"add":v?M&&y(f.get("length")):(y(f.get($r)),Bs(t)&&y(f.get(Xu)));break;case"delete":v||(y(f.get($r)),Bs(t)&&y(f.get(Xu)));break;case"set":Bs(t)&&y(f.get($r));break}}kc()}function km(t,n){const s=il.get(t);return s&&s.get(n)}function Cs(t){const n=Me(t);return n===t?n:(Li(n,"iterate",Fo),ln(t)?n:n.map(Ci))}function bl(t){return Li(t=Me(t),"iterate",Fo),t}const Mm={__proto__:null,[Symbol.iterator](){return Ru(this,Symbol.iterator,Ci)},concat(...t){return Cs(this).concat(...t.map(n=>he(n)?Cs(n):n))},entries(){return Ru(this,"entries",t=>(t[1]=Ci(t[1]),t))},every(t,n){return Zn(this,"every",t,n,void 0,arguments)},filter(t,n){return Zn(this,"filter",t,n,s=>s.map(Ci),arguments)},find(t,n){return Zn(this,"find",t,n,Ci,arguments)},findIndex(t,n){return Zn(this,"findIndex",t,n,void 0,arguments)},findLast(t,n){return Zn(this,"findLast",t,n,Ci,arguments)},findLastIndex(t,n){return Zn(this,"findLastIndex",t,n,void 0,arguments)},forEach(t,n){return Zn(this,"forEach",t,n,void 0,arguments)},includes(...t){return Ou(this,"includes",t)},indexOf(...t){return Ou(this,"indexOf",t)},join(t){return Cs(this).join(t)},lastIndexOf(...t){return Ou(this,"lastIndexOf",t)},map(t,n){return Zn(this,"map",t,n,void 0,arguments)},pop(){return vo(this,"pop")},push(...t){return vo(this,"push",t)},reduce(t,...n){return nh(this,"reduce",t,n)},reduceRight(t,...n){return nh(this,"reduceRight",t,n)},shift(){return vo(this,"shift")},some(t,n){return Zn(this,"some",t,n,void 0,arguments)},splice(...t){return vo(this,"splice",t)},toReversed(){return Cs(this).toReversed()},toSorted(t){return Cs(this).toSorted(t)},toSpliced(...t){return Cs(this).toSpliced(...t)},unshift(...t){return vo(this,"unshift",t)},values(){return Ru(this,"values",Ci)}};function Ru(t,n,s){const l=bl(t),h=l[n]();return l!==t&&!ln(t)&&(h._next=h.next,h.next=()=>{const p=h._next();return p.value&&(p.value=s(p.value)),p}),h}const Pm=Array.prototype;function Zn(t,n,s,l,h,p){const f=bl(t),y=f!==t&&!ln(t),v=f[n];if(v!==Pm[n]){const P=v.apply(t,p);return y?Ci(P):P}let M=s;f!==t&&(y?M=function(P,U){return s.call(this,Ci(P),U,t)}:s.length>2&&(M=function(P,U){return s.call(this,P,U,t)}));const k=v.call(f,M,l);return y&&h?h(k):k}function nh(t,n,s,l){const h=bl(t);let p=s;return h!==t&&(ln(t)?s.length>3&&(p=function(f,y,v){return s.call(this,f,y,v,t)}):p=function(f,y,v){return s.call(this,f,Ci(y),v,t)}),h[n](p,...l)}function Ou(t,n,s){const l=Me(t);Li(l,"iterate",Fo);const h=l[n](...s);return(h===-1||h===!1)&&Ac(s[0])?(s[0]=Me(s[0]),l[n](...s)):h}function vo(t,n,s=[]){xr(),Ec();const l=Me(t)[n].apply(t,s);return kc(),wr(),l}const Bm=bc("__proto__,__v_isRef,__isVue"),Gd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Dn));function Sm(t){Dn(t)||(t=String(t));const n=Me(this);return Li(n,"has",t),n.hasOwnProperty(t)}class Vd{constructor(n=!1,s=!1){this._isReadonly=n,this._isShallow=s}get(n,s,l){if(s==="__v_skip")return n.__v_skip;const h=this._isReadonly,p=this._isShallow;if(s==="__v_isReactive")return!h;if(s==="__v_isReadonly")return h;if(s==="__v_isShallow")return p;if(s==="__v_raw")return l===(h?p?jm:Kd:p?qd:Zd).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(l)?n:void 0;const f=he(n);if(!h){let v;if(f&&(v=Mm[s]))return v;if(s==="hasOwnProperty")return Sm}const y=Reflect.get(n,s,Qe(n)?n:l);return(Dn(s)?Gd.has(s):Bm(s))||(h||Li(n,"get",s),p)?y:Qe(y)?f&&Lc(s)?y:y.value:Ve(y)?h?Jd(y):Qn(y):y}}class Hd extends Vd{constructor(n=!1){super(!1,n)}set(n,s,l,h){let p=n[s];if(!this._isShallow){const v=Hr(p);if(!ln(l)&&!Hr(l)&&(p=Me(p),l=Me(l)),!he(n)&&Qe(p)&&!Qe(l))return v?!1:(p.value=l,!0)}const f=he(n)&&Lc(s)?Number(s)<n.length:Oe(n,s),y=Reflect.set(n,s,l,Qe(n)?n:h);return n===Me(h)&&(f?yr(l,p)&&Wn(n,"set",s,l):Wn(n,"add",s,l)),y}deleteProperty(n,s){const l=Oe(n,s);n[s];const h=Reflect.deleteProperty(n,s);return h&&l&&Wn(n,"delete",s,void 0),h}has(n,s){const l=Reflect.has(n,s);return(!Dn(s)||!Gd.has(s))&&Li(n,"has",s),l}ownKeys(n){return Li(n,"iterate",he(n)?"length":$r),Reflect.ownKeys(n)}}class Am extends Vd{constructor(n=!1){super(!0,n)}set(n,s){return!0}deleteProperty(n,s){return!0}}const Tm=new Hd,Dm=new Am,Rm=new Hd(!0);const Yu=t=>t,Na=t=>Reflect.getPrototypeOf(t);function Om(t,n,s){return function(...l){const h=this.__v_raw,p=Me(h),f=Bs(p),y=t==="entries"||t===Symbol.iterator&&f,v=t==="keys"&&f,M=h[t](...l),k=s?Yu:n?Qu:Ci;return!n&&Li(p,"iterate",v?Xu:$r),{next(){const{value:P,done:U}=M.next();return U?{value:P,done:U}:{value:y?[k(P[0]),k(P[1])]:k(P),done:U}},[Symbol.iterator](){return this}}}}function ja(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function Im(t,n){const s={get(h){const p=this.__v_raw,f=Me(p),y=Me(h);t||(yr(h,y)&&Li(f,"get",h),Li(f,"get",y));const{has:v}=Na(f),M=n?Yu:t?Qu:Ci;if(v.call(f,h))return M(p.get(h));if(v.call(f,y))return M(p.get(y));p!==f&&p.get(h)},get size(){const h=this.__v_raw;return!t&&Li(Me(h),"iterate",$r),Reflect.get(h,"size",h)},has(h){const p=this.__v_raw,f=Me(p),y=Me(h);return t||(yr(h,y)&&Li(f,"has",h),Li(f,"has",y)),h===y?p.has(h):p.has(h)||p.has(y)},forEach(h,p){const f=this,y=f.__v_raw,v=Me(y),M=n?Yu:t?Qu:Ci;return!t&&Li(v,"iterate",$r),y.forEach((k,P)=>h.call(p,M(k),M(P),f))}};return ki(s,t?{add:ja("add"),set:ja("set"),delete:ja("delete"),clear:ja("clear")}:{add(h){!n&&!ln(h)&&!Hr(h)&&(h=Me(h));const p=Me(this);return Na(p).has.call(p,h)||(p.add(h),Wn(p,"add",h,h)),this},set(h,p){!n&&!ln(p)&&!Hr(p)&&(p=Me(p));const f=Me(this),{has:y,get:v}=Na(f);let M=y.call(f,h);M||(h=Me(h),M=y.call(f,h));const k=v.call(f,h);return f.set(h,p),M?yr(p,k)&&Wn(f,"set",h,p):Wn(f,"add",h,p),this},delete(h){const p=Me(this),{has:f,get:y}=Na(p);let v=f.call(p,h);v||(h=Me(h),v=f.call(p,h)),y&&y.call(p,h);const M=p.delete(h);return v&&Wn(p,"delete",h,void 0),M},clear(){const h=Me(this),p=h.size!==0,f=h.clear();return p&&Wn(h,"clear",void 0,void 0),f}}),["keys","values","entries",Symbol.iterator].forEach(h=>{s[h]=Om(h,t,n)}),s}function Bc(t,n){const s=Im(t,n);return(l,h,p)=>h==="__v_isReactive"?!t:h==="__v_isReadonly"?t:h==="__v_raw"?l:Reflect.get(Oe(s,h)&&h in l?s:l,h,p)}const Fm={get:Bc(!1,!1)},zm={get:Bc(!1,!0)},Nm={get:Bc(!0,!1)};const Zd=new WeakMap,qd=new WeakMap,Kd=new WeakMap,jm=new WeakMap;function Um(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $m(t){return t.__v_skip||!Object.isExtensible(t)?0:Um(fm(t))}function Qn(t){return Hr(t)?t:Sc(t,!1,Tm,Fm,Zd)}function Wd(t){return Sc(t,!1,Rm,zm,qd)}function Jd(t){return Sc(t,!0,Dm,Nm,Kd)}function Sc(t,n,s,l,h){if(!Ve(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const p=h.get(t);if(p)return p;const f=$m(t);if(f===0)return t;const y=new Proxy(t,f===2?l:s);return h.set(t,y),y}function vr(t){return Hr(t)?vr(t.__v_raw):!!(t&&t.__v_isReactive)}function Hr(t){return!!(t&&t.__v_isReadonly)}function ln(t){return!!(t&&t.__v_isShallow)}function Ac(t){return t?!!t.__v_raw:!1}function Me(t){const n=t&&t.__v_raw;return n?Me(n):t}function Tc(t){return!Oe(t,"__v_skip")&&Object.isExtensible(t)&&Pd(t,"__v_skip",!0),t}const Ci=t=>Ve(t)?Qn(t):t,Qu=t=>Ve(t)?Jd(t):t;function Qe(t){return t?t.__v_isRef===!0:!1}function ie(t){return Xd(t,!1)}function Gm(t){return Xd(t,!0)}function Xd(t,n){return Qe(t)?t:new Vm(t,n)}class Vm{constructor(n,s){this.dep=new Pc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?n:Me(n),this._value=s?n:Ci(n),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(n){const s=this._rawValue,l=this.__v_isShallow||ln(n)||Hr(n);n=l?n:Me(n),yr(n,s)&&(this._rawValue=n,this._value=l?n:Ci(n),this.dep.trigger())}}function Ue(t){return Qe(t)?t.value:t}const Hm={get:(t,n,s)=>n==="__v_raw"?t:Ue(Reflect.get(t,n,s)),set:(t,n,s,l)=>{const h=t[n];return Qe(h)&&!Qe(s)?(h.value=s,!0):Reflect.set(t,n,s,l)}};function Yd(t){return vr(t)?t:new Proxy(t,Hm)}function Zm(t){const n=he(t)?new Array(t.length):{};for(const s in t)n[s]=Km(t,s);return n}class qm{constructor(n,s,l){this._object=n,this._key=s,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return km(Me(this._object),this._key)}}function Km(t,n,s){const l=t[n];return Qe(l)?l:new qm(t,n,s)}class Wm{constructor(n,s,l){this.fn=n,this.setter=s,this._value=void 0,this.dep=new Pc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Io-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&Ge!==this)return Fd(this,!0),!0}get value(){const n=this.dep.track();return jd(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Jm(t,n,s=!1){let l,h;return ve(t)?l=t:(l=t.get,h=t.set),new Wm(l,h,s)}const Ua={},nl=new WeakMap;let jr;function Xm(t,n=!1,s=jr){if(s){let l=nl.get(s);l||nl.set(s,l=[]),l.push(t)}}function Ym(t,n,s=je){const{immediate:l,deep:h,once:p,scheduler:f,augmentJob:y,call:v}=s,M=J=>h?J:ln(J)||h===!1||h===0?Jn(J,1):Jn(J);let k,P,U,H,N=!1,$=!1;if(Qe(t)?(P=()=>t.value,N=ln(t)):vr(t)?(P=()=>M(t),N=!0):he(t)?($=!0,N=t.some(J=>vr(J)||ln(J)),P=()=>t.map(J=>{if(Qe(J))return J.value;if(vr(J))return M(J);if(ve(J))return v?v(J,2):J()})):ve(t)?n?P=v?()=>v(t,2):t:P=()=>{if(U){xr();try{U()}finally{wr()}}const J=jr;jr=k;try{return v?v(t,3,[H]):t(H)}finally{jr=J}}:P=Tn,n&&h){const J=P,et=h===!0?1/0:h;P=()=>Jn(J(),et)}const q=Rd(),ht=()=>{k.stop(),q&&q.active&&wc(q.effects,k)};if(p&&n){const J=n;n=(...et)=>{J(...et),ht()}}let mt=$?new Array(t.length).fill(Ua):Ua;const X=J=>{if(!(!(k.flags&1)||!k.dirty&&!J))if(n){const et=k.run();if(h||N||($?et.some((nt,dt)=>yr(nt,mt[dt])):yr(et,mt))){U&&U();const nt=jr;jr=k;try{const dt=[et,mt===Ua?void 0:$&&mt[0]===Ua?[]:mt,H];v?v(n,3,dt):n(...dt),mt=et}finally{jr=nt}}}else k.run()};return y&&y(X),k=new Od(P),k.scheduler=f?()=>f(X,!1):X,H=J=>Xm(J,!1,k),U=k.onStop=()=>{const J=nl.get(k);if(J){if(v)v(J,4);else for(const et of J)et();nl.delete(k)}},n?l?X(!0):mt=k.run():f?f(X.bind(null,!0),!0):k.run(),ht.pause=k.pause.bind(k),ht.resume=k.resume.bind(k),ht.stop=ht,ht}function Jn(t,n=1/0,s){if(n<=0||!Ve(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),n--,Qe(t))Jn(t.value,n,s);else if(he(t))for(let l=0;l<t.length;l++)Jn(t[l],n,s);else if(Os(t)||Bs(t))t.forEach(l=>{Jn(l,n,s)});else if(Md(t)){for(const l in t)Jn(t[l],n,s);for(const l of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,l)&&Jn(t[l],n,s)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Wo(t,n,s,l){try{return l?t(...l):t()}catch(h){xl(h,n,s)}}function Rn(t,n,s,l){if(ve(t)){const h=Wo(t,n,s,l);return h&&Ed(h)&&h.catch(p=>{xl(p,n,s)}),h}if(he(t)){const h=[];for(let p=0;p<t.length;p++)h.push(Rn(t[p],n,s,l));return h}}function xl(t,n,s,l=!0){const h=n?n.vnode:null,{errorHandler:p,throwUnhandledErrorInProduction:f}=n&&n.appContext.config||je;if(n){let y=n.parent;const v=n.proxy,M=`https://vuejs.org/error-reference/#runtime-${s}`;for(;y;){const k=y.ec;if(k){for(let P=0;P<k.length;P++)if(k[P](t,v,M)===!1)return}y=y.parent}if(p){xr(),Wo(p,null,10,[t,v,M]),wr();return}}Qm(t,s,h,l,f)}function Qm(t,n,s,l=!0,h=!1){if(h)throw t;console.error(t)}const Ri=[];let Sn=-1;const Ss=[];let pr=null,ks=0;const Qd=Promise.resolve();let rl=null;function wl(t){const n=rl||Qd;return t?n.then(this?t.bind(this):t):n}function t0(t){let n=Sn+1,s=Ri.length;for(;n<s;){const l=n+s>>>1,h=Ri[l],p=zo(h);p<t||p===t&&h.flags&2?n=l+1:s=l}return n}function Dc(t){if(!(t.flags&1)){const n=zo(t),s=Ri[Ri.length-1];!s||!(t.flags&2)&&n>=zo(s)?Ri.push(t):Ri.splice(t0(n),0,t),t.flags|=1,tf()}}function tf(){rl||(rl=Qd.then(nf))}function e0(t){he(t)?Ss.push(...t):pr&&t.id===-1?pr.splice(ks+1,0,t):t.flags&1||(Ss.push(t),t.flags|=1),tf()}function rh(t,n,s=Sn+1){for(;s<Ri.length;s++){const l=Ri[s];if(l&&l.flags&2){if(t&&l.id!==t.uid)continue;Ri.splice(s,1),s--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function ef(t){if(Ss.length){const n=[...new Set(Ss)].sort((s,l)=>zo(s)-zo(l));if(Ss.length=0,pr){pr.push(...n);return}for(pr=n,ks=0;ks<pr.length;ks++){const s=pr[ks];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}pr=null,ks=0}}const zo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function nf(t){try{for(Sn=0;Sn<Ri.length;Sn++){const n=Ri[Sn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Wo(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Sn<Ri.length;Sn++){const n=Ri[Sn];n&&(n.flags&=-2)}Sn=-1,Ri.length=0,ef(),rl=null,(Ri.length||Ss.length)&&nf()}}let $i=null,rf=null;function sl(t){const n=$i;return $i=t,rf=t&&t.type.__scopeId||null,n}function Bo(t,n=$i,s){if(!n||t._n)return t;const l=(...h)=>{l._d&&ph(-1);const p=sl(n);let f;try{f=t(...h)}finally{sl(p),l._d&&ph(1)}return f};return l._n=!0,l._c=!0,l._d=!0,l}function Ie(t,n){if($i===null)return t;const s=Ml($i),l=t.dirs||(t.dirs=[]);for(let h=0;h<n.length;h++){let[p,f,y,v=je]=n[h];p&&(ve(p)&&(p={mounted:p,updated:p}),p.deep&&Jn(f),l.push({dir:p,instance:s,value:f,oldValue:void 0,arg:y,modifiers:v}))}return t}function zr(t,n,s,l){const h=t.dirs,p=n&&n.dirs;for(let f=0;f<h.length;f++){const y=h[f];p&&(y.oldValue=p[f].value);let v=y.dir[l];v&&(xr(),Rn(v,s,8,[t.el,y,t,n]),wr())}}const i0=Symbol("_vte"),n0=t=>t.__isTeleport;function Rc(t,n){t.shapeFlag&6&&t.component?(t.transition=n,Rc(t.component.subTree,n)):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}/*! #__NO_SIDE_EFFECTS__ */function Xi(t,n){return ve(t)?ki({name:t.name},n,{setup:t}):t}function sf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ol(t,n,s,l,h=!1){if(he(t)){t.forEach((N,$)=>ol(N,n&&(he(n)?n[$]:n),s,l,h));return}if(So(l)&&!h){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&ol(t,n,s,l.component.subTree);return}const p=l.shapeFlag&4?Ml(l.component):l.el,f=h?null:p,{i:y,r:v}=t,M=n&&n.r,k=y.refs===je?y.refs={}:y.refs,P=y.setupState,U=Me(P),H=P===je?()=>!1:N=>Oe(U,N);if(M!=null&&M!==v&&(ni(M)?(k[M]=null,H(M)&&(P[M]=null)):Qe(M)&&(M.value=null)),ve(v))Wo(v,y,12,[f,k]);else{const N=ni(v),$=Qe(v);if(N||$){const q=()=>{if(t.f){const ht=N?H(v)?P[v]:k[v]:v.value;h?he(ht)&&wc(ht,p):he(ht)?ht.includes(p)||ht.push(p):N?(k[v]=[p],H(v)&&(P[v]=k[v])):(v.value=[p],t.k&&(k[t.k]=v.value))}else N?(k[v]=f,H(v)&&(P[v]=f)):$&&(v.value=f,t.k&&(k[t.k]=f))};f?(q.id=-1,qi(q,s)):q()}}}yl().requestIdleCallback;yl().cancelIdleCallback;const So=t=>!!t.type.__asyncLoader,of=t=>t.type.__isKeepAlive;function r0(t,n){af(t,"a",n)}function s0(t,n){af(t,"da",n)}function af(t,n,s=_i){const l=t.__wdc||(t.__wdc=()=>{let h=s;for(;h;){if(h.isDeactivated)return;h=h.parent}return t()});if(Ll(n,l,s),s){let h=s.parent;for(;h&&h.parent;)of(h.parent.vnode)&&o0(l,n,s,h),h=h.parent}}function o0(t,n,s,l){const h=Ll(n,t,l,!0);Cl(()=>{wc(l[n],h)},s)}function Ll(t,n,s=_i,l=!1){if(s){const h=s[t]||(s[t]=[]),p=n.__weh||(n.__weh=(...f)=>{xr();const y=Jo(s),v=Rn(n,s,t,f);return y(),wr(),v});return l?h.unshift(p):h.push(p),p}}const tr=t=>(n,s=_i)=>{(!jo||t==="sp")&&Ll(t,(...l)=>n(...l),s)},a0=tr("bm"),Lr=tr("m"),l0=tr("bu"),u0=tr("u"),lf=tr("bum"),Cl=tr("um"),c0=tr("sp"),h0=tr("rtg"),d0=tr("rtc");function f0(t,n=_i){Ll("ec",t,n)}const p0="components";function m0(t,n){return _0(p0,t,!0,n)||t}const g0=Symbol.for("v-ndc");function _0(t,n,s=!0,l=!1){const h=$i||_i;if(h){const p=h.type;{const y=rg(p,!1);if(y&&(y===n||y===cn(n)||y===_l(cn(n))))return p}const f=sh(h[t]||p[t],n)||sh(h.appContext[t],n);return!f&&l?p:f}}function sh(t,n){return t&&(t[n]||t[cn(n)]||t[_l(cn(n))])}function Oi(t,n,s,l){let h;const p=s,f=he(t);if(f||ni(t)){const y=f&&vr(t);let v=!1;y&&(v=!ln(t),t=bl(t)),h=new Array(t.length);for(let M=0,k=t.length;M<k;M++)h[M]=n(v?Ci(t[M]):t[M],M,void 0,p)}else if(typeof t=="number"){h=new Array(t);for(let y=0;y<t;y++)h[y]=n(y+1,y,void 0,p)}else if(Ve(t))if(t[Symbol.iterator])h=Array.from(t,(y,v)=>n(y,v,void 0,p));else{const y=Object.keys(t);h=new Array(y.length);for(let v=0,M=y.length;v<M;v++){const k=y[v];h[v]=n(t[k],k,v,p)}}else h=[];return h}const tc=t=>t?Bf(t)?Ml(t):tc(t.parent):null,Ao=ki(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>tc(t.parent),$root:t=>tc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>cf(t),$forceUpdate:t=>t.f||(t.f=()=>{Dc(t.update)}),$nextTick:t=>t.n||(t.n=wl.bind(t.proxy)),$watch:t=>N0.bind(t)}),Iu=(t,n)=>t!==je&&!t.__isScriptSetup&&Oe(t,n),y0={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:s,setupState:l,data:h,props:p,accessCache:f,type:y,appContext:v}=t;let M;if(n[0]!=="$"){const H=f[n];if(H!==void 0)switch(H){case 1:return l[n];case 2:return h[n];case 4:return s[n];case 3:return p[n]}else{if(Iu(l,n))return f[n]=1,l[n];if(h!==je&&Oe(h,n))return f[n]=2,h[n];if((M=t.propsOptions[0])&&Oe(M,n))return f[n]=3,p[n];if(s!==je&&Oe(s,n))return f[n]=4,s[n];ec&&(f[n]=0)}}const k=Ao[n];let P,U;if(k)return n==="$attrs"&&Li(t.attrs,"get",""),k(t);if((P=y.__cssModules)&&(P=P[n]))return P;if(s!==je&&Oe(s,n))return f[n]=4,s[n];if(U=v.config.globalProperties,Oe(U,n))return U[n]},set({_:t},n,s){const{data:l,setupState:h,ctx:p}=t;return Iu(h,n)?(h[n]=s,!0):l!==je&&Oe(l,n)?(l[n]=s,!0):Oe(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(p[n]=s,!0)},has({_:{data:t,setupState:n,accessCache:s,ctx:l,appContext:h,propsOptions:p}},f){let y;return!!s[f]||t!==je&&Oe(t,f)||Iu(n,f)||(y=p[0])&&Oe(y,f)||Oe(l,f)||Oe(Ao,f)||Oe(h.config.globalProperties,f)},defineProperty(t,n,s){return s.get!=null?t._.accessCache[n]=0:Oe(s,"value")&&this.set(t,n,s.value,null),Reflect.defineProperty(t,n,s)}};function oh(t){return he(t)?t.reduce((n,s)=>(n[s]=null,n),{}):t}let ec=!0;function v0(t){const n=cf(t),s=t.proxy,l=t.ctx;ec=!1,n.beforeCreate&&ah(n.beforeCreate,t,"bc");const{data:h,computed:p,methods:f,watch:y,provide:v,inject:M,created:k,beforeMount:P,mounted:U,beforeUpdate:H,updated:N,activated:$,deactivated:q,beforeDestroy:ht,beforeUnmount:mt,destroyed:X,unmounted:J,render:et,renderTracked:nt,renderTriggered:dt,errorCaptured:Tt,serverPrefetch:Lt,expose:Mt,inheritAttrs:vt,components:Bt,directives:ut,filters:Ct}=n;if(M&&b0(M,l,null),f)for(const Jt in f){const zt=f[Jt];ve(zt)&&(l[Jt]=zt.bind(s))}if(h){const Jt=h.call(s,s);Ve(Jt)&&(t.data=Qn(Jt))}if(ec=!0,p)for(const Jt in p){const zt=p[Jt],Yt=ve(zt)?zt.bind(s,s):ve(zt.get)?zt.get.bind(s,s):Tn,lt=!ve(zt)&&ve(zt.set)?zt.set.bind(s):Tn,Gt=Ae({get:Yt,set:lt});Object.defineProperty(l,Jt,{enumerable:!0,configurable:!0,get:()=>Gt.value,set:Et=>Gt.value=Et})}if(y)for(const Jt in y)uf(y[Jt],l,s,Jt);if(v){const Jt=ve(v)?v.call(s):v;Reflect.ownKeys(Jt).forEach(zt=>{Ha(zt,Jt[zt])})}k&&ah(k,t,"c");function Dt(Jt,zt){he(zt)?zt.forEach(Yt=>Jt(Yt.bind(s))):zt&&Jt(zt.bind(s))}if(Dt(a0,P),Dt(Lr,U),Dt(l0,H),Dt(u0,N),Dt(r0,$),Dt(s0,q),Dt(f0,Tt),Dt(d0,nt),Dt(h0,dt),Dt(lf,mt),Dt(Cl,J),Dt(c0,Lt),he(Mt))if(Mt.length){const Jt=t.exposed||(t.exposed={});Mt.forEach(zt=>{Object.defineProperty(Jt,zt,{get:()=>s[zt],set:Yt=>s[zt]=Yt})})}else t.exposed||(t.exposed={});et&&t.render===Tn&&(t.render=et),vt!=null&&(t.inheritAttrs=vt),Bt&&(t.components=Bt),ut&&(t.directives=ut),Lt&&sf(t)}function b0(t,n,s=Tn){he(t)&&(t=ic(t));for(const l in t){const h=t[l];let p;Ve(h)?"default"in h?p=un(h.from||l,h.default,!0):p=un(h.from||l):p=un(h),Qe(p)?Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:()=>p.value,set:f=>p.value=f}):n[l]=p}}function ah(t,n,s){Rn(he(t)?t.map(l=>l.bind(n.proxy)):t.bind(n.proxy),n,s)}function uf(t,n,s,l){let h=l.includes(".")?Cf(s,l):()=>s[l];if(ni(t)){const p=n[t];ve(p)&&gn(h,p)}else if(ve(t))gn(h,t.bind(s));else if(Ve(t))if(he(t))t.forEach(p=>uf(p,n,s,l));else{const p=ve(t.handler)?t.handler.bind(s):n[t.handler];ve(p)&&gn(h,p,t)}}function cf(t){const n=t.type,{mixins:s,extends:l}=n,{mixins:h,optionsCache:p,config:{optionMergeStrategies:f}}=t.appContext,y=p.get(n);let v;return y?v=y:!h.length&&!s&&!l?v=n:(v={},h.length&&h.forEach(M=>al(v,M,f,!0)),al(v,n,f)),Ve(n)&&p.set(n,v),v}function al(t,n,s,l=!1){const{mixins:h,extends:p}=n;p&&al(t,p,s,!0),h&&h.forEach(f=>al(t,f,s,!0));for(const f in n)if(!(l&&f==="expose")){const y=x0[f]||s&&s[f];t[f]=y?y(t[f],n[f]):n[f]}return t}const x0={data:lh,props:uh,emits:uh,methods:Co,computed:Co,beforeCreate:Ti,created:Ti,beforeMount:Ti,mounted:Ti,beforeUpdate:Ti,updated:Ti,beforeDestroy:Ti,beforeUnmount:Ti,destroyed:Ti,unmounted:Ti,activated:Ti,deactivated:Ti,errorCaptured:Ti,serverPrefetch:Ti,components:Co,directives:Co,watch:L0,provide:lh,inject:w0};function lh(t,n){return n?t?function(){return ki(ve(t)?t.call(this,this):t,ve(n)?n.call(this,this):n)}:n:t}function w0(t,n){return Co(ic(t),ic(n))}function ic(t){if(he(t)){const n={};for(let s=0;s<t.length;s++)n[t[s]]=t[s];return n}return t}function Ti(t,n){return t?[...new Set([].concat(t,n))]:n}function Co(t,n){return t?ki(Object.create(null),t,n):n}function uh(t,n){return t?he(t)&&he(n)?[...new Set([...t,...n])]:ki(Object.create(null),oh(t),oh(n??{})):n}function L0(t,n){if(!t)return n;if(!n)return t;const s=ki(Object.create(null),t);for(const l in n)s[l]=Ti(t[l],n[l]);return s}function hf(){return{app:null,config:{isNativeTag:hm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let C0=0;function E0(t,n){return function(l,h=null){ve(l)||(l=ki({},l)),h!=null&&!Ve(h)&&(h=null);const p=hf(),f=new WeakSet,y=[];let v=!1;const M=p.app={_uid:C0++,_component:l,_props:h,_container:null,_context:p,_instance:null,version:og,get config(){return p.config},set config(k){},use(k,...P){return f.has(k)||(k&&ve(k.install)?(f.add(k),k.install(M,...P)):ve(k)&&(f.add(k),k(M,...P))),M},mixin(k){return p.mixins.includes(k)||p.mixins.push(k),M},component(k,P){return P?(p.components[k]=P,M):p.components[k]},directive(k,P){return P?(p.directives[k]=P,M):p.directives[k]},mount(k,P,U){if(!v){const H=M._ceVNode||ai(l,h);return H.appContext=p,U===!0?U="svg":U===!1&&(U=void 0),t(H,k,U),v=!0,M._container=k,k.__vue_app__=M,Ml(H.component)}},onUnmount(k){y.push(k)},unmount(){v&&(Rn(y,M._instance,16),t(null,M._container),delete M._container.__vue_app__)},provide(k,P){return p.provides[k]=P,M},runWithContext(k){const P=Gr;Gr=M;try{return k()}finally{Gr=P}}};return M}}let Gr=null;function Ha(t,n){if(_i){let s=_i.provides;const l=_i.parent&&_i.parent.provides;l===s&&(s=_i.provides=Object.create(l)),s[t]=n}}function un(t,n,s=!1){const l=_i||$i;if(l||Gr){const h=Gr?Gr._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(h&&t in h)return h[t];if(arguments.length>1)return s&&ve(n)?n.call(l&&l.proxy):n}}function k0(){return!!(_i||$i||Gr)}const df={},ff=()=>Object.create(df),pf=t=>Object.getPrototypeOf(t)===df;function M0(t,n,s,l=!1){const h={},p=ff();t.propsDefaults=Object.create(null),mf(t,n,h,p);for(const f in t.propsOptions[0])f in h||(h[f]=void 0);s?t.props=l?h:Wd(h):t.type.props?t.props=h:t.props=p,t.attrs=p}function P0(t,n,s,l){const{props:h,attrs:p,vnode:{patchFlag:f}}=t,y=Me(h),[v]=t.propsOptions;let M=!1;if((l||f>0)&&!(f&16)){if(f&8){const k=t.vnode.dynamicProps;for(let P=0;P<k.length;P++){let U=k[P];if(El(t.emitsOptions,U))continue;const H=n[U];if(v)if(Oe(p,U))H!==p[U]&&(p[U]=H,M=!0);else{const N=cn(U);h[N]=nc(v,y,N,H,t,!1)}else H!==p[U]&&(p[U]=H,M=!0)}}}else{mf(t,n,h,p)&&(M=!0);let k;for(const P in y)(!n||!Oe(n,P)&&((k=Wr(P))===P||!Oe(n,k)))&&(v?s&&(s[P]!==void 0||s[k]!==void 0)&&(h[P]=nc(v,y,P,void 0,t,!0)):delete h[P]);if(p!==y)for(const P in p)(!n||!Oe(n,P))&&(delete p[P],M=!0)}M&&Wn(t.attrs,"set","")}function mf(t,n,s,l){const[h,p]=t.propsOptions;let f=!1,y;if(n)for(let v in n){if(ko(v))continue;const M=n[v];let k;h&&Oe(h,k=cn(v))?!p||!p.includes(k)?s[k]=M:(y||(y={}))[k]=M:El(t.emitsOptions,v)||(!(v in l)||M!==l[v])&&(l[v]=M,f=!0)}if(p){const v=Me(s),M=y||je;for(let k=0;k<p.length;k++){const P=p[k];s[P]=nc(h,v,P,M[P],t,!Oe(M,P))}}return f}function nc(t,n,s,l,h,p){const f=t[s];if(f!=null){const y=Oe(f,"default");if(y&&l===void 0){const v=f.default;if(f.type!==Function&&!f.skipFactory&&ve(v)){const{propsDefaults:M}=h;if(s in M)l=M[s];else{const k=Jo(h);l=M[s]=v.call(null,n),k()}}else l=v;h.ce&&h.ce._setProp(s,l)}f[0]&&(p&&!y?l=!1:f[1]&&(l===""||l===Wr(s))&&(l=!0))}return l}const B0=new WeakMap;function gf(t,n,s=!1){const l=s?B0:n.propsCache,h=l.get(t);if(h)return h;const p=t.props,f={},y=[];let v=!1;if(!ve(t)){const k=P=>{v=!0;const[U,H]=gf(P,n,!0);ki(f,U),H&&y.push(...H)};!s&&n.mixins.length&&n.mixins.forEach(k),t.extends&&k(t.extends),t.mixins&&t.mixins.forEach(k)}if(!p&&!v)return Ve(t)&&l.set(t,Ps),Ps;if(he(p))for(let k=0;k<p.length;k++){const P=cn(p[k]);ch(P)&&(f[P]=je)}else if(p)for(const k in p){const P=cn(k);if(ch(P)){const U=p[k],H=f[P]=he(U)||ve(U)?{type:U}:ki({},U),N=H.type;let $=!1,q=!0;if(he(N))for(let ht=0;ht<N.length;++ht){const mt=N[ht],X=ve(mt)&&mt.name;if(X==="Boolean"){$=!0;break}else X==="String"&&(q=!1)}else $=ve(N)&&N.name==="Boolean";H[0]=$,H[1]=q,($||Oe(H,"default"))&&y.push(P)}}const M=[f,y];return Ve(t)&&l.set(t,M),M}function ch(t){return t[0]!=="$"&&!ko(t)}const _f=t=>t[0]==="_"||t==="$stable",Oc=t=>he(t)?t.map(An):[An(t)],S0=(t,n,s)=>{if(n._n)return n;const l=Bo((...h)=>Oc(n(...h)),s);return l._c=!1,l},yf=(t,n,s)=>{const l=t._ctx;for(const h in t){if(_f(h))continue;const p=t[h];if(ve(p))n[h]=S0(h,p,l);else if(p!=null){const f=Oc(p);n[h]=()=>f}}},vf=(t,n)=>{const s=Oc(n);t.slots.default=()=>s},bf=(t,n,s)=>{for(const l in n)(s||l!=="_")&&(t[l]=n[l])},A0=(t,n,s)=>{const l=t.slots=ff();if(t.vnode.shapeFlag&32){const h=n._;h?(bf(l,n,s),s&&Pd(l,"_",h,!0)):yf(n,l)}else n&&vf(t,n)},T0=(t,n,s)=>{const{vnode:l,slots:h}=t;let p=!0,f=je;if(l.shapeFlag&32){const y=n._;y?s&&y===1?p=!1:bf(h,n,s):(p=!n.$stable,yf(n,h)),f=n}else n&&(vf(t,n),f={default:1});if(p)for(const y in h)!_f(y)&&f[y]==null&&delete h[y]},qi=Z0;function D0(t){return R0(t)}function R0(t,n){const s=yl();s.__VUE__=!0;const{insert:l,remove:h,patchProp:p,createElement:f,createText:y,createComment:v,setText:M,setElementText:k,parentNode:P,nextSibling:U,setScopeId:H=Tn,insertStaticContent:N}=t,$=(F,G,it,yt=null,wt=null,xt=null,Rt=void 0,Ot=null,Ft=!!G.dynamicChildren)=>{if(F===G)return;F&&!bo(F,G)&&(yt=bt(F),Et(F,wt,xt,!0),F=null),G.patchFlag===-2&&(Ft=!1,G.dynamicChildren=null);const{type:At,ref:ue,shapeFlag:Zt}=G;switch(At){case kl:q(F,G,it,yt);break;case Zr:ht(F,G,it,yt);break;case Za:F==null&&mt(G,it,yt,Rt);break;case Ze:Bt(F,G,it,yt,wt,xt,Rt,Ot,Ft);break;default:Zt&1?et(F,G,it,yt,wt,xt,Rt,Ot,Ft):Zt&6?ut(F,G,it,yt,wt,xt,Rt,Ot,Ft):(Zt&64||Zt&128)&&At.process(F,G,it,yt,wt,xt,Rt,Ot,Ft,Wt)}ue!=null&&wt&&ol(ue,F&&F.ref,xt,G||F,!G)},q=(F,G,it,yt)=>{if(F==null)l(G.el=y(G.children),it,yt);else{const wt=G.el=F.el;G.children!==F.children&&M(wt,G.children)}},ht=(F,G,it,yt)=>{F==null?l(G.el=v(G.children||""),it,yt):G.el=F.el},mt=(F,G,it,yt)=>{[F.el,F.anchor]=N(F.children,G,it,yt,F.el,F.anchor)},X=({el:F,anchor:G},it,yt)=>{let wt;for(;F&&F!==G;)wt=U(F),l(F,it,yt),F=wt;l(G,it,yt)},J=({el:F,anchor:G})=>{let it;for(;F&&F!==G;)it=U(F),h(F),F=it;h(G)},et=(F,G,it,yt,wt,xt,Rt,Ot,Ft)=>{G.type==="svg"?Rt="svg":G.type==="math"&&(Rt="mathml"),F==null?nt(G,it,yt,wt,xt,Rt,Ot,Ft):Lt(F,G,wt,xt,Rt,Ot,Ft)},nt=(F,G,it,yt,wt,xt,Rt,Ot)=>{let Ft,At;const{props:ue,shapeFlag:Zt,transition:oe,dirs:de}=F;if(Ft=F.el=f(F.type,xt,ue&&ue.is,ue),Zt&8?k(Ft,F.children):Zt&16&&Tt(F.children,Ft,null,yt,wt,Fu(F,xt),Rt,Ot),de&&zr(F,null,yt,"created"),dt(Ft,F,F.scopeId,Rt,yt),ue){for(const Te in ue)Te!=="value"&&!ko(Te)&&p(Ft,Te,null,ue[Te],xt,yt);"value"in ue&&p(Ft,"value",null,ue.value,xt),(At=ue.onVnodeBeforeMount)&&Pn(At,yt,F)}de&&zr(F,null,yt,"beforeMount");const xe=O0(wt,oe);xe&&oe.beforeEnter(Ft),l(Ft,G,it),((At=ue&&ue.onVnodeMounted)||xe||de)&&qi(()=>{At&&Pn(At,yt,F),xe&&oe.enter(Ft),de&&zr(F,null,yt,"mounted")},wt)},dt=(F,G,it,yt,wt)=>{if(it&&H(F,it),yt)for(let xt=0;xt<yt.length;xt++)H(F,yt[xt]);if(wt){let xt=wt.subTree;if(G===xt||kf(xt.type)&&(xt.ssContent===G||xt.ssFallback===G)){const Rt=wt.vnode;dt(F,Rt,Rt.scopeId,Rt.slotScopeIds,wt.parent)}}},Tt=(F,G,it,yt,wt,xt,Rt,Ot,Ft=0)=>{for(let At=Ft;At<F.length;At++){const ue=F[At]=Ot?mr(F[At]):An(F[At]);$(null,ue,G,it,yt,wt,xt,Rt,Ot)}},Lt=(F,G,it,yt,wt,xt,Rt)=>{const Ot=G.el=F.el;let{patchFlag:Ft,dynamicChildren:At,dirs:ue}=G;Ft|=F.patchFlag&16;const Zt=F.props||je,oe=G.props||je;let de;if(it&&Nr(it,!1),(de=oe.onVnodeBeforeUpdate)&&Pn(de,it,G,F),ue&&zr(G,F,it,"beforeUpdate"),it&&Nr(it,!0),(Zt.innerHTML&&oe.innerHTML==null||Zt.textContent&&oe.textContent==null)&&k(Ot,""),At?Mt(F.dynamicChildren,At,Ot,it,yt,Fu(G,wt),xt):Rt||zt(F,G,Ot,null,it,yt,Fu(G,wt),xt,!1),Ft>0){if(Ft&16)vt(Ot,Zt,oe,it,wt);else if(Ft&2&&Zt.class!==oe.class&&p(Ot,"class",null,oe.class,wt),Ft&4&&p(Ot,"style",Zt.style,oe.style,wt),Ft&8){const xe=G.dynamicProps;for(let Te=0;Te<xe.length;Te++){const Pe=xe[Te],ui=Zt[Pe],ei=oe[Pe];(ei!==ui||Pe==="value")&&p(Ot,Pe,ui,ei,wt,it)}}Ft&1&&F.children!==G.children&&k(Ot,G.children)}else!Rt&&At==null&&vt(Ot,Zt,oe,it,wt);((de=oe.onVnodeUpdated)||ue)&&qi(()=>{de&&Pn(de,it,G,F),ue&&zr(G,F,it,"updated")},yt)},Mt=(F,G,it,yt,wt,xt,Rt)=>{for(let Ot=0;Ot<G.length;Ot++){const Ft=F[Ot],At=G[Ot],ue=Ft.el&&(Ft.type===Ze||!bo(Ft,At)||Ft.shapeFlag&70)?P(Ft.el):it;$(Ft,At,ue,null,yt,wt,xt,Rt,!0)}},vt=(F,G,it,yt,wt)=>{if(G!==it){if(G!==je)for(const xt in G)!ko(xt)&&!(xt in it)&&p(F,xt,G[xt],null,wt,yt);for(const xt in it){if(ko(xt))continue;const Rt=it[xt],Ot=G[xt];Rt!==Ot&&xt!=="value"&&p(F,xt,Ot,Rt,wt,yt)}"value"in it&&p(F,"value",G.value,it.value,wt)}},Bt=(F,G,it,yt,wt,xt,Rt,Ot,Ft)=>{const At=G.el=F?F.el:y(""),ue=G.anchor=F?F.anchor:y("");let{patchFlag:Zt,dynamicChildren:oe,slotScopeIds:de}=G;de&&(Ot=Ot?Ot.concat(de):de),F==null?(l(At,it,yt),l(ue,it,yt),Tt(G.children||[],it,ue,wt,xt,Rt,Ot,Ft)):Zt>0&&Zt&64&&oe&&F.dynamicChildren?(Mt(F.dynamicChildren,oe,it,wt,xt,Rt,Ot),(G.key!=null||wt&&G===wt.subTree)&&xf(F,G,!0)):zt(F,G,it,ue,wt,xt,Rt,Ot,Ft)},ut=(F,G,it,yt,wt,xt,Rt,Ot,Ft)=>{G.slotScopeIds=Ot,F==null?G.shapeFlag&512?wt.ctx.activate(G,it,yt,Rt,Ft):Ct(G,it,yt,wt,xt,Rt,Ft):Vt(F,G,Ft)},Ct=(F,G,it,yt,wt,xt,Rt)=>{const Ot=F.component=Q0(F,yt,wt);if(of(F)&&(Ot.ctx.renderer=Wt),tg(Ot,!1,Rt),Ot.asyncDep){if(wt&&wt.registerDep(Ot,Dt,Rt),!F.el){const Ft=Ot.subTree=ai(Zr);ht(null,Ft,G,it)}}else Dt(Ot,F,G,it,wt,xt,Rt)},Vt=(F,G,it)=>{const yt=G.component=F.component;if(V0(F,G,it))if(yt.asyncDep&&!yt.asyncResolved){Jt(yt,G,it);return}else yt.next=G,yt.update();else G.el=F.el,yt.vnode=G},Dt=(F,G,it,yt,wt,xt,Rt)=>{const Ot=()=>{if(F.isMounted){let{next:Zt,bu:oe,u:de,parent:xe,vnode:Te}=F;{const ri=wf(F);if(ri){Zt&&(Zt.el=Te.el,Jt(F,Zt,Rt)),ri.asyncDep.then(()=>{F.isUnmounted||Ot()});return}}let Pe=Zt,ui;Nr(F,!1),Zt?(Zt.el=Te.el,Jt(F,Zt,Rt)):Zt=Te,oe&&Va(oe),(ui=Zt.props&&Zt.props.onVnodeBeforeUpdate)&&Pn(ui,xe,Zt,Te),Nr(F,!0);const ei=dh(F),Mi=F.subTree;F.subTree=ei,$(Mi,ei,P(Mi.el),bt(Mi),F,wt,xt),Zt.el=ei.el,Pe===null&&H0(F,ei.el),de&&qi(de,wt),(ui=Zt.props&&Zt.props.onVnodeUpdated)&&qi(()=>Pn(ui,xe,Zt,Te),wt)}else{let Zt;const{el:oe,props:de}=G,{bm:xe,m:Te,parent:Pe,root:ui,type:ei}=F,Mi=So(G);Nr(F,!1),xe&&Va(xe),!Mi&&(Zt=de&&de.onVnodeBeforeMount)&&Pn(Zt,Pe,G),Nr(F,!0);{ui.ce&&ui.ce._injectChildStyle(ei);const ri=F.subTree=dh(F);$(null,ri,it,yt,F,wt,xt),G.el=ri.el}if(Te&&qi(Te,wt),!Mi&&(Zt=de&&de.onVnodeMounted)){const ri=G;qi(()=>Pn(Zt,Pe,ri),wt)}(G.shapeFlag&256||Pe&&So(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&F.a&&qi(F.a,wt),F.isMounted=!0,G=it=yt=null}};F.scope.on();const Ft=F.effect=new Od(Ot);F.scope.off();const At=F.update=Ft.run.bind(Ft),ue=F.job=Ft.runIfDirty.bind(Ft);ue.i=F,ue.id=F.uid,Ft.scheduler=()=>Dc(ue),Nr(F,!0),At()},Jt=(F,G,it)=>{G.component=F;const yt=F.vnode.props;F.vnode=G,F.next=null,P0(F,G.props,yt,it),T0(F,G.children,it),xr(),rh(F),wr()},zt=(F,G,it,yt,wt,xt,Rt,Ot,Ft=!1)=>{const At=F&&F.children,ue=F?F.shapeFlag:0,Zt=G.children,{patchFlag:oe,shapeFlag:de}=G;if(oe>0){if(oe&128){lt(At,Zt,it,yt,wt,xt,Rt,Ot,Ft);return}else if(oe&256){Yt(At,Zt,it,yt,wt,xt,Rt,Ot,Ft);return}}de&8?(ue&16&&re(At,wt,xt),Zt!==At&&k(it,Zt)):ue&16?de&16?lt(At,Zt,it,yt,wt,xt,Rt,Ot,Ft):re(At,wt,xt,!0):(ue&8&&k(it,""),de&16&&Tt(Zt,it,yt,wt,xt,Rt,Ot,Ft))},Yt=(F,G,it,yt,wt,xt,Rt,Ot,Ft)=>{F=F||Ps,G=G||Ps;const At=F.length,ue=G.length,Zt=Math.min(At,ue);let oe;for(oe=0;oe<Zt;oe++){const de=G[oe]=Ft?mr(G[oe]):An(G[oe]);$(F[oe],de,it,null,wt,xt,Rt,Ot,Ft)}At>ue?re(F,wt,xt,!0,!1,Zt):Tt(G,it,yt,wt,xt,Rt,Ot,Ft,Zt)},lt=(F,G,it,yt,wt,xt,Rt,Ot,Ft)=>{let At=0;const ue=G.length;let Zt=F.length-1,oe=ue-1;for(;At<=Zt&&At<=oe;){const de=F[At],xe=G[At]=Ft?mr(G[At]):An(G[At]);if(bo(de,xe))$(de,xe,it,null,wt,xt,Rt,Ot,Ft);else break;At++}for(;At<=Zt&&At<=oe;){const de=F[Zt],xe=G[oe]=Ft?mr(G[oe]):An(G[oe]);if(bo(de,xe))$(de,xe,it,null,wt,xt,Rt,Ot,Ft);else break;Zt--,oe--}if(At>Zt){if(At<=oe){const de=oe+1,xe=de<ue?G[de].el:yt;for(;At<=oe;)$(null,G[At]=Ft?mr(G[At]):An(G[At]),it,xe,wt,xt,Rt,Ot,Ft),At++}}else if(At>oe)for(;At<=Zt;)Et(F[At],wt,xt,!0),At++;else{const de=At,xe=At,Te=new Map;for(At=xe;At<=oe;At++){const Je=G[At]=Ft?mr(G[At]):An(G[At]);Je.key!=null&&Te.set(Je.key,At)}let Pe,ui=0;const ei=oe-xe+1;let Mi=!1,ri=0;const bn=new Array(ei);for(At=0;At<ei;At++)bn[At]=0;for(At=de;At<=Zt;At++){const Je=F[At];if(ui>=ei){Et(Je,wt,xt,!0);continue}let Pi;if(Je.key!=null)Pi=Te.get(Je.key);else for(Pe=xe;Pe<=oe;Pe++)if(bn[Pe-xe]===0&&bo(Je,G[Pe])){Pi=Pe;break}Pi===void 0?Et(Je,wt,xt,!0):(bn[Pi-xe]=At+1,Pi>=ri?ri=Pi:Mi=!0,$(Je,G[Pi],it,null,wt,xt,Rt,Ot,Ft),ui++)}const On=Mi?I0(bn):Ps;for(Pe=On.length-1,At=ei-1;At>=0;At--){const Je=xe+At,Pi=G[Je],Yi=Je+1<ue?G[Je+1].el:yt;bn[At]===0?$(null,Pi,it,Yi,wt,xt,Rt,Ot,Ft):Mi&&(Pe<0||At!==On[Pe]?Gt(Pi,it,Yi,2):Pe--)}}},Gt=(F,G,it,yt,wt=null)=>{const{el:xt,type:Rt,transition:Ot,children:Ft,shapeFlag:At}=F;if(At&6){Gt(F.component.subTree,G,it,yt);return}if(At&128){F.suspense.move(G,it,yt);return}if(At&64){Rt.move(F,G,it,Wt);return}if(Rt===Ze){l(xt,G,it);for(let Zt=0;Zt<Ft.length;Zt++)Gt(Ft[Zt],G,it,yt);l(F.anchor,G,it);return}if(Rt===Za){X(F,G,it);return}if(yt!==2&&At&1&&Ot)if(yt===0)Ot.beforeEnter(xt),l(xt,G,it),qi(()=>Ot.enter(xt),wt);else{const{leave:Zt,delayLeave:oe,afterLeave:de}=Ot,xe=()=>l(xt,G,it),Te=()=>{Zt(xt,()=>{xe(),de&&de()})};oe?oe(xt,xe,Te):Te()}else l(xt,G,it)},Et=(F,G,it,yt=!1,wt=!1)=>{const{type:xt,props:Rt,ref:Ot,children:Ft,dynamicChildren:At,shapeFlag:ue,patchFlag:Zt,dirs:oe,cacheIndex:de}=F;if(Zt===-2&&(wt=!1),Ot!=null&&ol(Ot,null,it,F,!0),de!=null&&(G.renderCache[de]=void 0),ue&256){G.ctx.deactivate(F);return}const xe=ue&1&&oe,Te=!So(F);let Pe;if(Te&&(Pe=Rt&&Rt.onVnodeBeforeUnmount)&&Pn(Pe,G,F),ue&6)le(F.component,it,yt);else{if(ue&128){F.suspense.unmount(it,yt);return}xe&&zr(F,null,G,"beforeUnmount"),ue&64?F.type.remove(F,G,it,Wt,yt):At&&!At.hasOnce&&(xt!==Ze||Zt>0&&Zt&64)?re(At,G,it,!1,!0):(xt===Ze&&Zt&384||!wt&&ue&16)&&re(Ft,G,it),yt&&ne(F)}(Te&&(Pe=Rt&&Rt.onVnodeUnmounted)||xe)&&qi(()=>{Pe&&Pn(Pe,G,F),xe&&zr(F,null,G,"unmounted")},it)},ne=F=>{const{type:G,el:it,anchor:yt,transition:wt}=F;if(G===Ze){$t(it,yt);return}if(G===Za){J(F);return}const xt=()=>{h(it),wt&&!wt.persisted&&wt.afterLeave&&wt.afterLeave()};if(F.shapeFlag&1&&wt&&!wt.persisted){const{leave:Rt,delayLeave:Ot}=wt,Ft=()=>Rt(it,xt);Ot?Ot(F.el,xt,Ft):Ft()}else xt()},$t=(F,G)=>{let it;for(;F!==G;)it=U(F),h(F),F=it;h(G)},le=(F,G,it)=>{const{bum:yt,scope:wt,job:xt,subTree:Rt,um:Ot,m:Ft,a:At}=F;hh(Ft),hh(At),yt&&Va(yt),wt.stop(),xt&&(xt.flags|=8,Et(Rt,F,G,it)),Ot&&qi(Ot,G),qi(()=>{F.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},re=(F,G,it,yt=!1,wt=!1,xt=0)=>{for(let Rt=xt;Rt<F.length;Rt++)Et(F[Rt],G,it,yt,wt)},bt=F=>{if(F.shapeFlag&6)return bt(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const G=U(F.anchor||F.el),it=G&&G[i0];return it?U(it):G};let Ut=!1;const Nt=(F,G,it)=>{F==null?G._vnode&&Et(G._vnode,null,null,!0):$(G._vnode||null,F,G,null,null,null,it),G._vnode=F,Ut||(Ut=!0,rh(),ef(),Ut=!1)},Wt={p:$,um:Et,m:Gt,r:ne,mt:Ct,mc:Tt,pc:zt,pbc:Mt,n:bt,o:t};return{render:Nt,hydrate:void 0,createApp:E0(Nt)}}function Fu({type:t,props:n},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:s}function Nr({effect:t,job:n},s){s?(t.flags|=32,n.flags|=4):(t.flags&=-33,n.flags&=-5)}function O0(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function xf(t,n,s=!1){const l=t.children,h=n.children;if(he(l)&&he(h))for(let p=0;p<l.length;p++){const f=l[p];let y=h[p];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=h[p]=mr(h[p]),y.el=f.el),!s&&y.patchFlag!==-2&&xf(f,y)),y.type===kl&&(y.el=f.el)}}function I0(t){const n=t.slice(),s=[0];let l,h,p,f,y;const v=t.length;for(l=0;l<v;l++){const M=t[l];if(M!==0){if(h=s[s.length-1],t[h]<M){n[l]=h,s.push(l);continue}for(p=0,f=s.length-1;p<f;)y=p+f>>1,t[s[y]]<M?p=y+1:f=y;M<t[s[p]]&&(p>0&&(n[l]=s[p-1]),s[p]=l)}}for(p=s.length,f=s[p-1];p-- >0;)s[p]=f,f=n[f];return s}function wf(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:wf(n)}function hh(t){if(t)for(let n=0;n<t.length;n++)t[n].flags|=8}const F0=Symbol.for("v-scx"),z0=()=>un(F0);function gn(t,n,s){return Lf(t,n,s)}function Lf(t,n,s=je){const{immediate:l,deep:h,flush:p,once:f}=s,y=ki({},s),v=n&&l||!n&&p!=="post";let M;if(jo){if(p==="sync"){const H=z0();M=H.__watcherHandles||(H.__watcherHandles=[])}else if(!v){const H=()=>{};return H.stop=Tn,H.resume=Tn,H.pause=Tn,H}}const k=_i;y.call=(H,N,$)=>Rn(H,k,N,$);let P=!1;p==="post"?y.scheduler=H=>{qi(H,k&&k.suspense)}:p!=="sync"&&(P=!0,y.scheduler=(H,N)=>{N?H():Dc(H)}),y.augmentJob=H=>{n&&(H.flags|=4),P&&(H.flags|=2,k&&(H.id=k.uid,H.i=k))};const U=Ym(t,n,y);return jo&&(M?M.push(U):v&&U()),U}function N0(t,n,s){const l=this.proxy,h=ni(t)?t.includes(".")?Cf(l,t):()=>l[t]:t.bind(l,l);let p;ve(n)?p=n:(p=n.handler,s=n);const f=Jo(this),y=Lf(h,p.bind(l),s);return f(),y}function Cf(t,n){const s=n.split(".");return()=>{let l=t;for(let h=0;h<s.length&&l;h++)l=l[s[h]];return l}}const j0=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${cn(n)}Modifiers`]||t[`${Wr(n)}Modifiers`];function U0(t,n,...s){if(t.isUnmounted)return;const l=t.vnode.props||je;let h=s;const p=n.startsWith("update:"),f=p&&j0(l,n.slice(7));f&&(f.trim&&(h=s.map(k=>ni(k)?k.trim():k)),f.number&&(h=s.map(el)));let y,v=l[y=Au(n)]||l[y=Au(cn(n))];!v&&p&&(v=l[y=Au(Wr(n))]),v&&Rn(v,t,6,h);const M=l[y+"Once"];if(M){if(!t.emitted)t.emitted={};else if(t.emitted[y])return;t.emitted[y]=!0,Rn(M,t,6,h)}}function Ef(t,n,s=!1){const l=n.emitsCache,h=l.get(t);if(h!==void 0)return h;const p=t.emits;let f={},y=!1;if(!ve(t)){const v=M=>{const k=Ef(M,n,!0);k&&(y=!0,ki(f,k))};!s&&n.mixins.length&&n.mixins.forEach(v),t.extends&&v(t.extends),t.mixins&&t.mixins.forEach(v)}return!p&&!y?(Ve(t)&&l.set(t,null),null):(he(p)?p.forEach(v=>f[v]=null):ki(f,p),Ve(t)&&l.set(t,f),f)}function El(t,n){return!t||!ml(n)?!1:(n=n.slice(2).replace(/Once$/,""),Oe(t,n[0].toLowerCase()+n.slice(1))||Oe(t,Wr(n))||Oe(t,n))}function dh(t){const{type:n,vnode:s,proxy:l,withProxy:h,propsOptions:[p],slots:f,attrs:y,emit:v,render:M,renderCache:k,props:P,data:U,setupState:H,ctx:N,inheritAttrs:$}=t,q=sl(t);let ht,mt;try{if(s.shapeFlag&4){const J=h||l,et=J;ht=An(M.call(et,J,k,P,H,U,N)),mt=y}else{const J=n;ht=An(J.length>1?J(P,{attrs:y,slots:f,emit:v}):J(P,null)),mt=n.props?y:$0(y)}}catch(J){To.length=0,xl(J,t,1),ht=ai(Zr)}let X=ht;if(mt&&$!==!1){const J=Object.keys(mt),{shapeFlag:et}=X;J.length&&et&7&&(p&&J.some(xc)&&(mt=G0(mt,p)),X=As(X,mt,!1,!0))}return s.dirs&&(X=As(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(s.dirs):s.dirs),s.transition&&Rc(X,s.transition),ht=X,sl(q),ht}const $0=t=>{let n;for(const s in t)(s==="class"||s==="style"||ml(s))&&((n||(n={}))[s]=t[s]);return n},G0=(t,n)=>{const s={};for(const l in t)(!xc(l)||!(l.slice(9)in n))&&(s[l]=t[l]);return s};function V0(t,n,s){const{props:l,children:h,component:p}=t,{props:f,children:y,patchFlag:v}=n,M=p.emitsOptions;if(n.dirs||n.transition)return!0;if(s&&v>=0){if(v&1024)return!0;if(v&16)return l?fh(l,f,M):!!f;if(v&8){const k=n.dynamicProps;for(let P=0;P<k.length;P++){const U=k[P];if(f[U]!==l[U]&&!El(M,U))return!0}}}else return(h||y)&&(!y||!y.$stable)?!0:l===f?!1:l?f?fh(l,f,M):!0:!!f;return!1}function fh(t,n,s){const l=Object.keys(n);if(l.length!==Object.keys(t).length)return!0;for(let h=0;h<l.length;h++){const p=l[h];if(n[p]!==t[p]&&!El(s,p))return!0}return!1}function H0({vnode:t,parent:n},s){for(;n;){const l=n.subTree;if(l.suspense&&l.suspense.activeBranch===t&&(l.el=t.el),l===t)(t=n.vnode).el=s,n=n.parent;else break}}const kf=t=>t.__isSuspense;function Z0(t,n){n&&n.pendingBranch?he(t)?n.effects.push(...t):n.effects.push(t):e0(t)}const Ze=Symbol.for("v-fgt"),kl=Symbol.for("v-txt"),Zr=Symbol.for("v-cmt"),Za=Symbol.for("v-stc"),To=[];let Ki=null;function It(t=!1){To.push(Ki=t?null:[])}function q0(){To.pop(),Ki=To[To.length-1]||null}let No=1;function ph(t,n=!1){No+=t,t<0&&Ki&&n&&(Ki.hasOnce=!0)}function Mf(t){return t.dynamicChildren=No>0?Ki||Ps:null,q0(),No>0&&Ki&&Ki.push(t),t}function jt(t,n,s,l,h,p){return Mf(E(t,n,s,l,h,p,!0))}function qr(t,n,s,l,h){return Mf(ai(t,n,s,l,h,!0))}function ll(t){return t?t.__v_isVNode===!0:!1}function bo(t,n){return t.type===n.type&&t.key===n.key}const Pf=({key:t})=>t??null,qa=({ref:t,ref_key:n,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ni(t)||Qe(t)||ve(t)?{i:$i,r:t,k:n,f:!!s}:t:null);function E(t,n=null,s=null,l=0,h=null,p=t===Ze?0:1,f=!1,y=!1){const v={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&Pf(n),ref:n&&qa(n),scopeId:rf,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:l,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:$i};return y?(Ic(v,s),p&128&&t.normalize(v)):s&&(v.shapeFlag|=ni(s)?8:16),No>0&&!f&&Ki&&(v.patchFlag>0||p&6)&&v.patchFlag!==32&&Ki.push(v),v}const ai=K0;function K0(t,n=null,s=null,l=0,h=null,p=!1){if((!t||t===g0)&&(t=Zr),ll(t)){const y=As(t,n,!0);return s&&Ic(y,s),No>0&&!p&&Ki&&(y.shapeFlag&6?Ki[Ki.indexOf(t)]=y:Ki.push(y)),y.patchFlag=-2,y}if(sg(t)&&(t=t.__vccOpts),n){n=W0(n);let{class:y,style:v}=n;y&&!ni(y)&&(n.class=br(y)),Ve(v)&&(Ac(v)&&!he(v)&&(v=ki({},v)),n.style=vl(v))}const f=ni(t)?1:kf(t)?128:n0(t)?64:Ve(t)?4:ve(t)?2:0;return E(t,n,s,l,h,f,p,!0)}function W0(t){return t?Ac(t)||pf(t)?ki({},t):t:null}function As(t,n,s=!1,l=!1){const{props:h,ref:p,patchFlag:f,children:y,transition:v}=t,M=n?J0(h||{},n):h,k={__v_isVNode:!0,__v_skip:!0,type:t.type,props:M,key:M&&Pf(M),ref:n&&n.ref?s&&p?he(p)?p.concat(qa(n)):[p,qa(n)]:qa(n):p,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:y,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Ze?f===-1?16:f|16:f,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:v,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&As(t.ssContent),ssFallback:t.ssFallback&&As(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return v&&l&&Rc(k,v.clone(k)),k}function li(t=" ",n=0){return ai(kl,null,t,n)}function bw(t,n){const s=ai(Za,null,t);return s.staticCount=n,s}function ge(t="",n=!1){return n?(It(),qr(Zr,null,t)):ai(Zr,null,t)}function An(t){return t==null||typeof t=="boolean"?ai(Zr):he(t)?ai(Ze,null,t.slice()):ll(t)?mr(t):ai(kl,null,String(t))}function mr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:As(t)}function Ic(t,n){let s=0;const{shapeFlag:l}=t;if(n==null)n=null;else if(he(n))s=16;else if(typeof n=="object")if(l&65){const h=n.default;h&&(h._c&&(h._d=!1),Ic(t,h()),h._c&&(h._d=!0));return}else{s=32;const h=n._;!h&&!pf(n)?n._ctx=$i:h===3&&$i&&($i.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else ve(n)?(n={default:n,_ctx:$i},s=32):(n=String(n),l&64?(s=16,n=[li(n)]):s=8);t.children=n,t.shapeFlag|=s}function J0(...t){const n={};for(let s=0;s<t.length;s++){const l=t[s];for(const h in l)if(h==="class")n.class!==l.class&&(n.class=br([n.class,l.class]));else if(h==="style")n.style=vl([n.style,l.style]);else if(ml(h)){const p=n[h],f=l[h];f&&p!==f&&!(he(p)&&p.includes(f))&&(n[h]=p?[].concat(p,f):f)}else h!==""&&(n[h]=l[h])}return n}function Pn(t,n,s,l=null){Rn(t,n,7,[s,l])}const X0=hf();let Y0=0;function Q0(t,n,s){const l=t.type,h=(n?n.appContext:t.appContext)||X0,p={uid:Y0++,vnode:t,type:l,parent:n,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Td(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(h.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gf(l,h),emitsOptions:Ef(l,h),emit:null,emitted:null,propsDefaults:je,inheritAttrs:l.inheritAttrs,ctx:je,data:je,props:je,attrs:je,slots:je,refs:je,setupState:je,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=n?n.root:p,p.emit=U0.bind(null,p),t.ce&&t.ce(p),p}let _i=null,ul,rc;{const t=yl(),n=(s,l)=>{let h;return(h=t[s])||(h=t[s]=[]),h.push(l),p=>{h.length>1?h.forEach(f=>f(p)):h[0](p)}};ul=n("__VUE_INSTANCE_SETTERS__",s=>_i=s),rc=n("__VUE_SSR_SETTERS__",s=>jo=s)}const Jo=t=>{const n=_i;return ul(t),t.scope.on(),()=>{t.scope.off(),ul(n)}},mh=()=>{_i&&_i.scope.off(),ul(null)};function Bf(t){return t.vnode.shapeFlag&4}let jo=!1;function tg(t,n=!1,s=!1){n&&rc(n);const{props:l,children:h}=t.vnode,p=Bf(t);M0(t,l,p,n),A0(t,h,s);const f=p?eg(t,n):void 0;return n&&rc(!1),f}function eg(t,n){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,y0);const{setup:l}=s;if(l){xr();const h=t.setupContext=l.length>1?ng(t):null,p=Jo(t),f=Wo(l,t,0,[t.props,h]),y=Ed(f);if(wr(),p(),(y||t.sp)&&!So(t)&&sf(t),y){if(f.then(mh,mh),n)return f.then(v=>{gh(t,v)}).catch(v=>{xl(v,t,0)});t.asyncDep=f}else gh(t,f)}else Sf(t)}function gh(t,n,s){ve(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Ve(n)&&(t.setupState=Yd(n)),Sf(t)}function Sf(t,n,s){const l=t.type;t.render||(t.render=l.render||Tn);{const h=Jo(t);xr();try{v0(t)}finally{wr(),h()}}}const ig={get(t,n){return Li(t,"get",""),t[n]}};function ng(t){const n=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,ig),slots:t.slots,emit:t.emit,expose:n}}function Ml(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Yd(Tc(t.exposed)),{get(n,s){if(s in n)return n[s];if(s in Ao)return Ao[s](t)},has(n,s){return s in n||s in Ao}})):t.proxy}function rg(t,n=!0){return ve(t)?t.displayName||t.name:t.name||n&&t.__name}function sg(t){return ve(t)&&"__vccOpts"in t}const Ae=(t,n)=>Jm(t,n,jo);function Af(t,n,s){const l=arguments.length;return l===2?Ve(n)&&!he(n)?ll(n)?ai(t,null,[n]):ai(t,n):ai(t,null,n):(l>3?s=Array.prototype.slice.call(arguments,2):l===3&&ll(s)&&(s=[s]),ai(t,n,s))}const og="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sc;const _h=typeof window<"u"&&window.trustedTypes;if(_h)try{sc=_h.createPolicy("vue",{createHTML:t=>t})}catch{}const Tf=sc?t=>sc.createHTML(t):t=>t,ag="http://www.w3.org/2000/svg",lg="http://www.w3.org/1998/Math/MathML",Kn=typeof document<"u"?document:null,yh=Kn&&Kn.createElement("template"),ug={insert:(t,n,s)=>{n.insertBefore(t,s||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,s,l)=>{const h=n==="svg"?Kn.createElementNS(ag,t):n==="mathml"?Kn.createElementNS(lg,t):s?Kn.createElement(t,{is:s}):Kn.createElement(t);return t==="select"&&l&&l.multiple!=null&&h.setAttribute("multiple",l.multiple),h},createText:t=>Kn.createTextNode(t),createComment:t=>Kn.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Kn.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,s,l,h,p){const f=s?s.previousSibling:n.lastChild;if(h&&(h===p||h.nextSibling))for(;n.insertBefore(h.cloneNode(!0),s),!(h===p||!(h=h.nextSibling)););else{yh.innerHTML=Tf(l==="svg"?`<svg>${t}</svg>`:l==="mathml"?`<math>${t}</math>`:t);const y=yh.content;if(l==="svg"||l==="mathml"){const v=y.firstChild;for(;v.firstChild;)y.appendChild(v.firstChild);y.removeChild(v)}n.insertBefore(y,s)}return[f?f.nextSibling:n.firstChild,s?s.previousSibling:n.lastChild]}},cg=Symbol("_vtc");function hg(t,n,s){const l=t[cg];l&&(n=(n?[n,...l]:[...l]).join(" ")),n==null?t.removeAttribute("class"):s?t.setAttribute("class",n):t.className=n}const vh=Symbol("_vod"),dg=Symbol("_vsh"),fg=Symbol(""),pg=/(^|;)\s*display\s*:/;function mg(t,n,s){const l=t.style,h=ni(s);let p=!1;if(s&&!h){if(n)if(ni(n))for(const f of n.split(";")){const y=f.slice(0,f.indexOf(":")).trim();s[y]==null&&Ka(l,y,"")}else for(const f in n)s[f]==null&&Ka(l,f,"");for(const f in s)f==="display"&&(p=!0),Ka(l,f,s[f])}else if(h){if(n!==s){const f=l[fg];f&&(s+=";"+f),l.cssText=s,p=pg.test(s)}}else n&&t.removeAttribute("style");vh in t&&(t[vh]=p?l.display:"",t[dg]&&(l.display="none"))}const bh=/\s*!important$/;function Ka(t,n,s){if(he(s))s.forEach(l=>Ka(t,n,l));else if(s==null&&(s=""),n.startsWith("--"))t.setProperty(n,s);else{const l=gg(t,n);bh.test(s)?t.setProperty(Wr(l),s.replace(bh,""),"important"):t[l]=s}}const xh=["Webkit","Moz","ms"],zu={};function gg(t,n){const s=zu[n];if(s)return s;let l=cn(n);if(l!=="filter"&&l in t)return zu[n]=l;l=_l(l);for(let h=0;h<xh.length;h++){const p=xh[h]+l;if(p in t)return zu[n]=p}return n}const wh="http://www.w3.org/1999/xlink";function Lh(t,n,s,l,h,p=xm(n)){l&&n.startsWith("xlink:")?s==null?t.removeAttributeNS(wh,n.slice(6,n.length)):t.setAttributeNS(wh,n,s):s==null||p&&!Bd(s)?t.removeAttribute(n):t.setAttribute(n,p?"":Dn(s)?String(s):s)}function Ch(t,n,s,l,h){if(n==="innerHTML"||n==="textContent"){s!=null&&(t[n]=n==="innerHTML"?Tf(s):s);return}const p=t.tagName;if(n==="value"&&p!=="PROGRESS"&&!p.includes("-")){const y=p==="OPTION"?t.getAttribute("value")||"":t.value,v=s==null?t.type==="checkbox"?"on":"":String(s);(y!==v||!("_value"in t))&&(t.value=v),s==null&&t.removeAttribute(n),t._value=s;return}let f=!1;if(s===""||s==null){const y=typeof t[n];y==="boolean"?s=Bd(s):s==null&&y==="string"?(s="",f=!0):y==="number"&&(s=0,f=!0)}try{t[n]=s}catch{}f&&t.removeAttribute(h||n)}function _r(t,n,s,l){t.addEventListener(n,s,l)}function _g(t,n,s,l){t.removeEventListener(n,s,l)}const Eh=Symbol("_vei");function yg(t,n,s,l,h=null){const p=t[Eh]||(t[Eh]={}),f=p[n];if(l&&f)f.value=l;else{const[y,v]=vg(n);if(l){const M=p[n]=wg(l,h);_r(t,y,M,v)}else f&&(_g(t,y,f,v),p[n]=void 0)}}const kh=/(?:Once|Passive|Capture)$/;function vg(t){let n;if(kh.test(t)){n={};let l;for(;l=t.match(kh);)t=t.slice(0,t.length-l[0].length),n[l[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Wr(t.slice(2)),n]}let Nu=0;const bg=Promise.resolve(),xg=()=>Nu||(bg.then(()=>Nu=0),Nu=Date.now());function wg(t,n){const s=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=s.attached)return;Rn(Lg(l,s.value),n,5,[l])};return s.value=t,s.attached=xg(),s}function Lg(t,n){if(he(n)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},n.map(l=>h=>!h._stopped&&l&&l(h))}else return n}const Mh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Cg=(t,n,s,l,h,p)=>{const f=h==="svg";n==="class"?hg(t,l,f):n==="style"?mg(t,s,l):ml(n)?xc(n)||yg(t,n,s,l,p):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):Eg(t,n,l,f))?(Ch(t,n,l),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&Lh(t,n,l,f,p,n!=="value")):t._isVueCE&&(/[A-Z]/.test(n)||!ni(l))?Ch(t,cn(n),l,p,n):(n==="true-value"?t._trueValue=l:n==="false-value"&&(t._falseValue=l),Lh(t,n,l,f))};function Eg(t,n,s,l){if(l)return!!(n==="innerHTML"||n==="textContent"||n in t&&Mh(n)&&ve(s));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const h=t.tagName;if(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")return!1}return Mh(n)&&ni(s)?!1:n in t}const Ts=t=>{const n=t.props["onUpdate:modelValue"]||!1;return he(n)?s=>Va(n,s):n};function kg(t){t.target.composing=!0}function Ph(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Yn=Symbol("_assign"),We={created(t,{modifiers:{lazy:n,trim:s,number:l}},h){t[Yn]=Ts(h);const p=l||h.props&&h.props.type==="number";_r(t,n?"change":"input",f=>{if(f.target.composing)return;let y=t.value;s&&(y=y.trim()),p&&(y=el(y)),t[Yn](y)}),s&&_r(t,"change",()=>{t.value=t.value.trim()}),n||(_r(t,"compositionstart",kg),_r(t,"compositionend",Ph),_r(t,"change",Ph))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:s,modifiers:{lazy:l,trim:h,number:p}},f){if(t[Yn]=Ts(f),t.composing)return;const y=(p||t.type==="number")&&!/^0\d/.test(t.value)?el(t.value):t.value,v=n??"";y!==v&&(document.activeElement===t&&t.type!=="range"&&(l&&n===s||h&&t.value.trim()===v)||(t.value=v))}},Mg={deep:!0,created(t,n,s){t[Yn]=Ts(s),_r(t,"change",()=>{const l=t._modelValue,h=$o(t),p=t.checked,f=t[Yn];if(he(l)){const y=Cc(l,h),v=y!==-1;if(p&&!v)f(l.concat(h));else if(!p&&v){const M=[...l];M.splice(y,1),f(M)}}else if(Os(l)){const y=new Set(l);p?y.add(h):y.delete(h),f(y)}else f(Df(t,p))})},mounted:Bh,beforeUpdate(t,n,s){t[Yn]=Ts(s),Bh(t,n,s)}};function Bh(t,{value:n,oldValue:s},l){t._modelValue=n;let h;if(he(n))h=Cc(n,l.props.value)>-1;else if(Os(n))h=n.has(l.props.value);else{if(n===s)return;h=Ko(n,Df(t,!0))}t.checked!==h&&(t.checked=h)}const Uo={deep:!0,created(t,{value:n,modifiers:{number:s}},l){const h=Os(n);_r(t,"change",()=>{const p=Array.prototype.filter.call(t.options,f=>f.selected).map(f=>s?el($o(f)):$o(f));t[Yn](t.multiple?h?new Set(p):p:p[0]),t._assigning=!0,wl(()=>{t._assigning=!1})}),t[Yn]=Ts(l)},mounted(t,{value:n}){Sh(t,n)},beforeUpdate(t,n,s){t[Yn]=Ts(s)},updated(t,{value:n}){t._assigning||Sh(t,n)}};function Sh(t,n){const s=t.multiple,l=he(n);if(!(s&&!l&&!Os(n))){for(let h=0,p=t.options.length;h<p;h++){const f=t.options[h],y=$o(f);if(s)if(l){const v=typeof y;v==="string"||v==="number"?f.selected=n.some(M=>String(M)===String(y)):f.selected=Cc(n,y)>-1}else f.selected=n.has(y);else if(Ko($o(f),n)){t.selectedIndex!==h&&(t.selectedIndex=h);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function $o(t){return"_value"in t?t._value:t.value}function Df(t,n){const s=n?"_trueValue":"_falseValue";return s in t?t[s]:n}const Pg=["ctrl","shift","alt","meta"],Bg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>Pg.some(s=>t[`${s}Key`]&&!n.includes(s))},Xo=(t,n)=>{const s=t._withMods||(t._withMods={}),l=n.join(".");return s[l]||(s[l]=(h,...p)=>{for(let f=0;f<n.length;f++){const y=Bg[n[f]];if(y&&y(h,n))return}return t(h,...p)})},Sg=ki({patchProp:Cg},ug);let Ah;function Ag(){return Ah||(Ah=D0(Sg))}const Tg=(...t)=>{const n=Ag().createApp(...t),{mount:s}=n;return n.mount=l=>{const h=Rg(l);if(!h)return;const p=n._component;!ve(p)&&!p.render&&!p.template&&(p.template=h.innerHTML),h.nodeType===1&&(h.textContent="");const f=s(h,!1,Dg(h));return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),f},n};function Dg(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Rg(t){return ni(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Rf;const Pl=t=>Rf=t,Of=Symbol();function oc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Do;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Do||(Do={}));function Og(){const t=Dd(!0),n=t.run(()=>ie({}));let s=[],l=[];const h=Tc({install(p){Pl(h),h._a=p,p.provide(Of,h),p.config.globalProperties.$pinia=h,l.forEach(f=>s.push(f)),l=[]},use(p){return this._a?s.push(p):l.push(p),this},_p:s,_a:null,_e:t,_s:new Map,state:n});return h}const If=()=>{};function Th(t,n,s,l=If){t.push(n);const h=()=>{const p=t.indexOf(n);p>-1&&(t.splice(p,1),l())};return!s&&Rd()&&Lm(h),h}function Es(t,...n){t.slice().forEach(s=>{s(...n)})}const Ig=t=>t(),Dh=Symbol(),ju=Symbol();function ac(t,n){t instanceof Map&&n instanceof Map?n.forEach((s,l)=>t.set(l,s)):t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const s in n){if(!n.hasOwnProperty(s))continue;const l=n[s],h=t[s];oc(h)&&oc(l)&&t.hasOwnProperty(s)&&!Qe(l)&&!vr(l)?t[s]=ac(h,l):t[s]=l}return t}const Fg=Symbol();function zg(t){return!oc(t)||!t.hasOwnProperty(Fg)}const{assign:fr}=Object;function Ng(t){return!!(Qe(t)&&t.effect)}function jg(t,n,s,l){const{state:h,actions:p,getters:f}=n,y=s.state.value[t];let v;function M(){y||(s.state.value[t]=h?h():{});const k=Zm(s.state.value[t]);return fr(k,p,Object.keys(f||{}).reduce((P,U)=>(P[U]=Tc(Ae(()=>{Pl(s);const H=s._s.get(t);return f[U].call(H,H)})),P),{}))}return v=Ff(t,M,n,s,l,!0),v}function Ff(t,n,s={},l,h,p){let f;const y=fr({actions:{}},s),v={deep:!0};let M,k,P=[],U=[],H;const N=l.state.value[t];!p&&!N&&(l.state.value[t]={}),ie({});let $;function q(Tt){let Lt;M=k=!1,typeof Tt=="function"?(Tt(l.state.value[t]),Lt={type:Do.patchFunction,storeId:t,events:H}):(ac(l.state.value[t],Tt),Lt={type:Do.patchObject,payload:Tt,storeId:t,events:H});const Mt=$=Symbol();wl().then(()=>{$===Mt&&(M=!0)}),k=!0,Es(P,Lt,l.state.value[t])}const ht=p?function(){const{state:Lt}=s,Mt=Lt?Lt():{};this.$patch(vt=>{fr(vt,Mt)})}:If;function mt(){f.stop(),P=[],U=[],l._s.delete(t)}const X=(Tt,Lt="")=>{if(Dh in Tt)return Tt[ju]=Lt,Tt;const Mt=function(){Pl(l);const vt=Array.from(arguments),Bt=[],ut=[];function Ct(Jt){Bt.push(Jt)}function Vt(Jt){ut.push(Jt)}Es(U,{args:vt,name:Mt[ju],store:et,after:Ct,onError:Vt});let Dt;try{Dt=Tt.apply(this&&this.$id===t?this:et,vt)}catch(Jt){throw Es(ut,Jt),Jt}return Dt instanceof Promise?Dt.then(Jt=>(Es(Bt,Jt),Jt)).catch(Jt=>(Es(ut,Jt),Promise.reject(Jt))):(Es(Bt,Dt),Dt)};return Mt[Dh]=!0,Mt[ju]=Lt,Mt},J={_p:l,$id:t,$onAction:Th.bind(null,U),$patch:q,$reset:ht,$subscribe(Tt,Lt={}){const Mt=Th(P,Tt,Lt.detached,()=>vt()),vt=f.run(()=>gn(()=>l.state.value[t],Bt=>{(Lt.flush==="sync"?k:M)&&Tt({storeId:t,type:Do.direct,events:H},Bt)},fr({},v,Lt)));return Mt},$dispose:mt},et=Qn(J);l._s.set(t,et);const dt=(l._a&&l._a.runWithContext||Ig)(()=>l._e.run(()=>(f=Dd()).run(()=>n({action:X}))));for(const Tt in dt){const Lt=dt[Tt];if(Qe(Lt)&&!Ng(Lt)||vr(Lt))p||(N&&zg(Lt)&&(Qe(Lt)?Lt.value=N[Tt]:ac(Lt,N[Tt])),l.state.value[t][Tt]=Lt);else if(typeof Lt=="function"){const Mt=X(Lt,Tt);dt[Tt]=Mt,y.actions[Tt]=Lt}}return fr(et,dt),fr(Me(et),dt),Object.defineProperty(et,"$state",{get:()=>l.state.value[t],set:Tt=>{q(Lt=>{fr(Lt,Tt)})}}),l._p.forEach(Tt=>{fr(et,f.run(()=>Tt({store:et,app:l._a,pinia:l,options:y})))}),N&&p&&s.hydrate&&s.hydrate(et.$state,N),M=!0,k=!0,et}/*! #__NO_SIDE_EFFECTS__ */function Fc(t,n,s){let l,h;const p=typeof n=="function";typeof t=="string"?(l=t,h=p?s:n):(h=t,l=t.id);function f(y,v){const M=k0();return y=y||(M?un(Of,null):null),y&&Pl(y),y=Rf,y._s.has(l)||(p?Ff(l,n,h,y):jg(l,h,y)),y._s.get(l)}return f.$id=l,f}function zf(t,n){return function(){return t.apply(n,arguments)}}const{toString:Ug}=Object.prototype,{getPrototypeOf:zc}=Object,Bl=(t=>n=>{const s=Ug.call(n);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),vn=t=>(t=t.toLowerCase(),n=>Bl(n)===t),Sl=t=>n=>typeof n===t,{isArray:Is}=Array,Go=Sl("undefined");function $g(t){return t!==null&&!Go(t)&&t.constructor!==null&&!Go(t.constructor)&&Wi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Nf=vn("ArrayBuffer");function Gg(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&Nf(t.buffer),n}const Vg=Sl("string"),Wi=Sl("function"),jf=Sl("number"),Al=t=>t!==null&&typeof t=="object",Hg=t=>t===!0||t===!1,Wa=t=>{if(Bl(t)!=="object")return!1;const n=zc(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Zg=vn("Date"),qg=vn("File"),Kg=vn("Blob"),Wg=vn("FileList"),Jg=t=>Al(t)&&Wi(t.pipe),Xg=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Wi(t.append)&&((n=Bl(t))==="formdata"||n==="object"&&Wi(t.toString)&&t.toString()==="[object FormData]"))},Yg=vn("URLSearchParams"),[Qg,t_,e_,i_]=["ReadableStream","Request","Response","Headers"].map(vn),n_=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yo(t,n,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let l,h;if(typeof t!="object"&&(t=[t]),Is(t))for(l=0,h=t.length;l<h;l++)n.call(null,t[l],l,t);else{const p=s?Object.getOwnPropertyNames(t):Object.keys(t),f=p.length;let y;for(l=0;l<f;l++)y=p[l],n.call(null,t[y],y,t)}}function Uf(t,n){n=n.toLowerCase();const s=Object.keys(t);let l=s.length,h;for(;l-- >0;)if(h=s[l],n===h.toLowerCase())return h;return null}const Ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$f=t=>!Go(t)&&t!==Ur;function lc(){const{caseless:t}=$f(this)&&this||{},n={},s=(l,h)=>{const p=t&&Uf(n,h)||h;Wa(n[p])&&Wa(l)?n[p]=lc(n[p],l):Wa(l)?n[p]=lc({},l):Is(l)?n[p]=l.slice():n[p]=l};for(let l=0,h=arguments.length;l<h;l++)arguments[l]&&Yo(arguments[l],s);return n}const r_=(t,n,s,{allOwnKeys:l}={})=>(Yo(n,(h,p)=>{s&&Wi(h)?t[p]=zf(h,s):t[p]=h},{allOwnKeys:l}),t),s_=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),o_=(t,n,s,l)=>{t.prototype=Object.create(n.prototype,l),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),s&&Object.assign(t.prototype,s)},a_=(t,n,s,l)=>{let h,p,f;const y={};if(n=n||{},t==null)return n;do{for(h=Object.getOwnPropertyNames(t),p=h.length;p-- >0;)f=h[p],(!l||l(f,t,n))&&!y[f]&&(n[f]=t[f],y[f]=!0);t=s!==!1&&zc(t)}while(t&&(!s||s(t,n))&&t!==Object.prototype);return n},l_=(t,n,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=n.length;const l=t.indexOf(n,s);return l!==-1&&l===s},u_=t=>{if(!t)return null;if(Is(t))return t;let n=t.length;if(!jf(n))return null;const s=new Array(n);for(;n-- >0;)s[n]=t[n];return s},c_=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&zc(Uint8Array)),h_=(t,n)=>{const l=(t&&t[Symbol.iterator]).call(t);let h;for(;(h=l.next())&&!h.done;){const p=h.value;n.call(t,p[0],p[1])}},d_=(t,n)=>{let s;const l=[];for(;(s=t.exec(n))!==null;)l.push(s);return l},f_=vn("HTMLFormElement"),p_=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,l,h){return l.toUpperCase()+h}),Rh=(({hasOwnProperty:t})=>(n,s)=>t.call(n,s))(Object.prototype),m_=vn("RegExp"),Gf=(t,n)=>{const s=Object.getOwnPropertyDescriptors(t),l={};Yo(s,(h,p)=>{let f;(f=n(h,p,t))!==!1&&(l[p]=f||h)}),Object.defineProperties(t,l)},g_=t=>{Gf(t,(n,s)=>{if(Wi(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const l=t[s];if(Wi(l)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},__=(t,n)=>{const s={},l=h=>{h.forEach(p=>{s[p]=!0})};return Is(t)?l(t):l(String(t).split(n)),s},y_=()=>{},v_=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n,Uu="abcdefghijklmnopqrstuvwxyz",Oh="0123456789",Vf={DIGIT:Oh,ALPHA:Uu,ALPHA_DIGIT:Uu+Uu.toUpperCase()+Oh},b_=(t=16,n=Vf.ALPHA_DIGIT)=>{let s="";const{length:l}=n;for(;t--;)s+=n[Math.random()*l|0];return s};function x_(t){return!!(t&&Wi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const w_=t=>{const n=new Array(10),s=(l,h)=>{if(Al(l)){if(n.indexOf(l)>=0)return;if(!("toJSON"in l)){n[h]=l;const p=Is(l)?[]:{};return Yo(l,(f,y)=>{const v=s(f,h+1);!Go(v)&&(p[y]=v)}),n[h]=void 0,p}}return l};return s(t,0)},L_=vn("AsyncFunction"),C_=t=>t&&(Al(t)||Wi(t))&&Wi(t.then)&&Wi(t.catch),Hf=((t,n)=>t?setImmediate:n?((s,l)=>(Ur.addEventListener("message",({source:h,data:p})=>{h===Ur&&p===s&&l.length&&l.shift()()},!1),h=>{l.push(h),Ur.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Wi(Ur.postMessage)),E_=typeof queueMicrotask<"u"?queueMicrotask.bind(Ur):typeof process<"u"&&process.nextTick||Hf,_t={isArray:Is,isArrayBuffer:Nf,isBuffer:$g,isFormData:Xg,isArrayBufferView:Gg,isString:Vg,isNumber:jf,isBoolean:Hg,isObject:Al,isPlainObject:Wa,isReadableStream:Qg,isRequest:t_,isResponse:e_,isHeaders:i_,isUndefined:Go,isDate:Zg,isFile:qg,isBlob:Kg,isRegExp:m_,isFunction:Wi,isStream:Jg,isURLSearchParams:Yg,isTypedArray:c_,isFileList:Wg,forEach:Yo,merge:lc,extend:r_,trim:n_,stripBOM:s_,inherits:o_,toFlatObject:a_,kindOf:Bl,kindOfTest:vn,endsWith:l_,toArray:u_,forEachEntry:h_,matchAll:d_,isHTMLForm:f_,hasOwnProperty:Rh,hasOwnProp:Rh,reduceDescriptors:Gf,freezeMethods:g_,toObjectSet:__,toCamelCase:p_,noop:y_,toFiniteNumber:v_,findKey:Uf,global:Ur,isContextDefined:$f,ALPHABET:Vf,generateString:b_,isSpecCompliantForm:x_,toJSONObject:w_,isAsyncFn:L_,isThenable:C_,setImmediate:Hf,asap:E_};function be(t,n,s,l,h){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),s&&(this.config=s),l&&(this.request=l),h&&(this.response=h,this.status=h.status?h.status:null)}_t.inherits(be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_t.toJSONObject(this.config),code:this.code,status:this.status}}});const Zf=be.prototype,qf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qf[t]={value:t}});Object.defineProperties(be,qf);Object.defineProperty(Zf,"isAxiosError",{value:!0});be.from=(t,n,s,l,h,p)=>{const f=Object.create(Zf);return _t.toFlatObject(t,f,function(v){return v!==Error.prototype},y=>y!=="isAxiosError"),be.call(f,t.message,n,s,l,h),f.cause=t,f.name=t.name,p&&Object.assign(f,p),f};const k_=null;function uc(t){return _t.isPlainObject(t)||_t.isArray(t)}function Kf(t){return _t.endsWith(t,"[]")?t.slice(0,-2):t}function Ih(t,n,s){return t?t.concat(n).map(function(h,p){return h=Kf(h),!s&&p?"["+h+"]":h}).join(s?".":""):n}function M_(t){return _t.isArray(t)&&!t.some(uc)}const P_=_t.toFlatObject(_t,{},null,function(n){return/^is[A-Z]/.test(n)});function Tl(t,n,s){if(!_t.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,s=_t.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,q){return!_t.isUndefined(q[$])});const l=s.metaTokens,h=s.visitor||k,p=s.dots,f=s.indexes,v=(s.Blob||typeof Blob<"u"&&Blob)&&_t.isSpecCompliantForm(n);if(!_t.isFunction(h))throw new TypeError("visitor must be a function");function M(N){if(N===null)return"";if(_t.isDate(N))return N.toISOString();if(!v&&_t.isBlob(N))throw new be("Blob is not supported. Use a Buffer instead.");return _t.isArrayBuffer(N)||_t.isTypedArray(N)?v&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function k(N,$,q){let ht=N;if(N&&!q&&typeof N=="object"){if(_t.endsWith($,"{}"))$=l?$:$.slice(0,-2),N=JSON.stringify(N);else if(_t.isArray(N)&&M_(N)||(_t.isFileList(N)||_t.endsWith($,"[]"))&&(ht=_t.toArray(N)))return $=Kf($),ht.forEach(function(X,J){!(_t.isUndefined(X)||X===null)&&n.append(f===!0?Ih([$],J,p):f===null?$:$+"[]",M(X))}),!1}return uc(N)?!0:(n.append(Ih(q,$,p),M(N)),!1)}const P=[],U=Object.assign(P_,{defaultVisitor:k,convertValue:M,isVisitable:uc});function H(N,$){if(!_t.isUndefined(N)){if(P.indexOf(N)!==-1)throw Error("Circular reference detected in "+$.join("."));P.push(N),_t.forEach(N,function(ht,mt){(!(_t.isUndefined(ht)||ht===null)&&h.call(n,ht,_t.isString(mt)?mt.trim():mt,$,U))===!0&&H(ht,$?$.concat(mt):[mt])}),P.pop()}}if(!_t.isObject(t))throw new TypeError("data must be an object");return H(t),n}function Fh(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(l){return n[l]})}function Nc(t,n){this._pairs=[],t&&Tl(t,this,n)}const Wf=Nc.prototype;Wf.append=function(n,s){this._pairs.push([n,s])};Wf.toString=function(n){const s=n?function(l){return n.call(this,l,Fh)}:Fh;return this._pairs.map(function(h){return s(h[0])+"="+s(h[1])},"").join("&")};function B_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Jf(t,n,s){if(!n)return t;const l=s&&s.encode||B_;_t.isFunction(s)&&(s={serialize:s});const h=s&&s.serialize;let p;if(h?p=h(n,s):p=_t.isURLSearchParams(n)?n.toString():new Nc(n,s).toString(l),p){const f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+p}return t}class zh{constructor(){this.handlers=[]}use(n,s,l){return this.handlers.push({fulfilled:n,rejected:s,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){_t.forEach(this.handlers,function(l){l!==null&&n(l)})}}const Xf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},S_=typeof URLSearchParams<"u"?URLSearchParams:Nc,A_=typeof FormData<"u"?FormData:null,T_=typeof Blob<"u"?Blob:null,D_={isBrowser:!0,classes:{URLSearchParams:S_,FormData:A_,Blob:T_},protocols:["http","https","file","blob","url","data"]},jc=typeof window<"u"&&typeof document<"u",cc=typeof navigator=="object"&&navigator||void 0,R_=jc&&(!cc||["ReactNative","NativeScript","NS"].indexOf(cc.product)<0),O_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",I_=jc&&window.location.href||"http://localhost",F_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:jc,hasStandardBrowserEnv:R_,hasStandardBrowserWebWorkerEnv:O_,navigator:cc,origin:I_},Symbol.toStringTag,{value:"Module"})),Ei={...F_,...D_};function z_(t,n){return Tl(t,new Ei.classes.URLSearchParams,Object.assign({visitor:function(s,l,h,p){return Ei.isNode&&_t.isBuffer(s)?(this.append(l,s.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},n))}function N_(t){return _t.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function j_(t){const n={},s=Object.keys(t);let l;const h=s.length;let p;for(l=0;l<h;l++)p=s[l],n[p]=t[p];return n}function Yf(t){function n(s,l,h,p){let f=s[p++];if(f==="__proto__")return!0;const y=Number.isFinite(+f),v=p>=s.length;return f=!f&&_t.isArray(h)?h.length:f,v?(_t.hasOwnProp(h,f)?h[f]=[h[f],l]:h[f]=l,!y):((!h[f]||!_t.isObject(h[f]))&&(h[f]=[]),n(s,l,h[f],p)&&_t.isArray(h[f])&&(h[f]=j_(h[f])),!y)}if(_t.isFormData(t)&&_t.isFunction(t.entries)){const s={};return _t.forEachEntry(t,(l,h)=>{n(N_(l),h,s,0)}),s}return null}function U_(t,n,s){if(_t.isString(t))try{return(n||JSON.parse)(t),_t.trim(t)}catch(l){if(l.name!=="SyntaxError")throw l}return(s||JSON.stringify)(t)}const Qo={transitional:Xf,adapter:["xhr","http","fetch"],transformRequest:[function(n,s){const l=s.getContentType()||"",h=l.indexOf("application/json")>-1,p=_t.isObject(n);if(p&&_t.isHTMLForm(n)&&(n=new FormData(n)),_t.isFormData(n))return h?JSON.stringify(Yf(n)):n;if(_t.isArrayBuffer(n)||_t.isBuffer(n)||_t.isStream(n)||_t.isFile(n)||_t.isBlob(n)||_t.isReadableStream(n))return n;if(_t.isArrayBufferView(n))return n.buffer;if(_t.isURLSearchParams(n))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let y;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return z_(n,this.formSerializer).toString();if((y=_t.isFileList(n))||l.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Tl(y?{"files[]":n}:n,v&&new v,this.formSerializer)}}return p||h?(s.setContentType("application/json",!1),U_(n)):n}],transformResponse:[function(n){const s=this.transitional||Qo.transitional,l=s&&s.forcedJSONParsing,h=this.responseType==="json";if(_t.isResponse(n)||_t.isReadableStream(n))return n;if(n&&_t.isString(n)&&(l&&!this.responseType||h)){const f=!(s&&s.silentJSONParsing)&&h;try{return JSON.parse(n)}catch(y){if(f)throw y.name==="SyntaxError"?be.from(y,be.ERR_BAD_RESPONSE,this,null,this.response):y}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ei.classes.FormData,Blob:Ei.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_t.forEach(["delete","get","head","post","put","patch"],t=>{Qo.headers[t]={}});const $_=_t.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),G_=t=>{const n={};let s,l,h;return t&&t.split(`
`).forEach(function(f){h=f.indexOf(":"),s=f.substring(0,h).trim().toLowerCase(),l=f.substring(h+1).trim(),!(!s||n[s]&&$_[s])&&(s==="set-cookie"?n[s]?n[s].push(l):n[s]=[l]:n[s]=n[s]?n[s]+", "+l:l)}),n},Nh=Symbol("internals");function xo(t){return t&&String(t).trim().toLowerCase()}function Ja(t){return t===!1||t==null?t:_t.isArray(t)?t.map(Ja):String(t)}function V_(t){const n=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=s.exec(t);)n[l[1]]=l[2];return n}const H_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $u(t,n,s,l,h){if(_t.isFunction(l))return l.call(this,n,s);if(h&&(n=s),!!_t.isString(n)){if(_t.isString(l))return n.indexOf(l)!==-1;if(_t.isRegExp(l))return l.test(n)}}function Z_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,s,l)=>s.toUpperCase()+l)}function q_(t,n){const s=_t.toCamelCase(" "+n);["get","set","has"].forEach(l=>{Object.defineProperty(t,l+s,{value:function(h,p,f){return this[l].call(this,n,h,p,f)},configurable:!0})})}let Gi=class{constructor(n){n&&this.set(n)}set(n,s,l){const h=this;function p(y,v,M){const k=xo(v);if(!k)throw new Error("header name must be a non-empty string");const P=_t.findKey(h,k);(!P||h[P]===void 0||M===!0||M===void 0&&h[P]!==!1)&&(h[P||v]=Ja(y))}const f=(y,v)=>_t.forEach(y,(M,k)=>p(M,k,v));if(_t.isPlainObject(n)||n instanceof this.constructor)f(n,s);else if(_t.isString(n)&&(n=n.trim())&&!H_(n))f(G_(n),s);else if(_t.isHeaders(n))for(const[y,v]of n.entries())p(v,y,l);else n!=null&&p(s,n,l);return this}get(n,s){if(n=xo(n),n){const l=_t.findKey(this,n);if(l){const h=this[l];if(!s)return h;if(s===!0)return V_(h);if(_t.isFunction(s))return s.call(this,h,l);if(_t.isRegExp(s))return s.exec(h);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,s){if(n=xo(n),n){const l=_t.findKey(this,n);return!!(l&&this[l]!==void 0&&(!s||$u(this,this[l],l,s)))}return!1}delete(n,s){const l=this;let h=!1;function p(f){if(f=xo(f),f){const y=_t.findKey(l,f);y&&(!s||$u(l,l[y],y,s))&&(delete l[y],h=!0)}}return _t.isArray(n)?n.forEach(p):p(n),h}clear(n){const s=Object.keys(this);let l=s.length,h=!1;for(;l--;){const p=s[l];(!n||$u(this,this[p],p,n,!0))&&(delete this[p],h=!0)}return h}normalize(n){const s=this,l={};return _t.forEach(this,(h,p)=>{const f=_t.findKey(l,p);if(f){s[f]=Ja(h),delete s[p];return}const y=n?Z_(p):String(p).trim();y!==p&&delete s[p],s[y]=Ja(h),l[y]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const s=Object.create(null);return _t.forEach(this,(l,h)=>{l!=null&&l!==!1&&(s[h]=n&&_t.isArray(l)?l.join(", "):l)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,s])=>n+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...s){const l=new this(n);return s.forEach(h=>l.set(h)),l}static accessor(n){const l=(this[Nh]=this[Nh]={accessors:{}}).accessors,h=this.prototype;function p(f){const y=xo(f);l[y]||(q_(h,f),l[y]=!0)}return _t.isArray(n)?n.forEach(p):p(n),this}};Gi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_t.reduceDescriptors(Gi.prototype,({value:t},n)=>{let s=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(l){this[s]=l}}});_t.freezeMethods(Gi);function Gu(t,n){const s=this||Qo,l=n||s,h=Gi.from(l.headers);let p=l.data;return _t.forEach(t,function(y){p=y.call(s,p,h.normalize(),n?n.status:void 0)}),h.normalize(),p}function Qf(t){return!!(t&&t.__CANCEL__)}function Fs(t,n,s){be.call(this,t??"canceled",be.ERR_CANCELED,n,s),this.name="CanceledError"}_t.inherits(Fs,be,{__CANCEL__:!0});function tp(t,n,s){const l=s.config.validateStatus;!s.status||!l||l(s.status)?t(s):n(new be("Request failed with status code "+s.status,[be.ERR_BAD_REQUEST,be.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function K_(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function W_(t,n){t=t||10;const s=new Array(t),l=new Array(t);let h=0,p=0,f;return n=n!==void 0?n:1e3,function(v){const M=Date.now(),k=l[p];f||(f=M),s[h]=v,l[h]=M;let P=p,U=0;for(;P!==h;)U+=s[P++],P=P%t;if(h=(h+1)%t,h===p&&(p=(p+1)%t),M-f<n)return;const H=k&&M-k;return H?Math.round(U*1e3/H):void 0}}function J_(t,n){let s=0,l=1e3/n,h,p;const f=(M,k=Date.now())=>{s=k,h=null,p&&(clearTimeout(p),p=null),t.apply(null,M)};return[(...M)=>{const k=Date.now(),P=k-s;P>=l?f(M,k):(h=M,p||(p=setTimeout(()=>{p=null,f(h)},l-P)))},()=>h&&f(h)]}const cl=(t,n,s=3)=>{let l=0;const h=W_(50,250);return J_(p=>{const f=p.loaded,y=p.lengthComputable?p.total:void 0,v=f-l,M=h(v),k=f<=y;l=f;const P={loaded:f,total:y,progress:y?f/y:void 0,bytes:v,rate:M||void 0,estimated:M&&y&&k?(y-f)/M:void 0,event:p,lengthComputable:y!=null,[n?"download":"upload"]:!0};t(P)},s)},jh=(t,n)=>{const s=t!=null;return[l=>n[0]({lengthComputable:s,total:t,loaded:l}),n[1]]},Uh=t=>(...n)=>_t.asap(()=>t(...n)),X_=Ei.hasStandardBrowserEnv?((t,n)=>s=>(s=new URL(s,Ei.origin),t.protocol===s.protocol&&t.host===s.host&&(n||t.port===s.port)))(new URL(Ei.origin),Ei.navigator&&/(msie|trident)/i.test(Ei.navigator.userAgent)):()=>!0,Y_=Ei.hasStandardBrowserEnv?{write(t,n,s,l,h,p){const f=[t+"="+encodeURIComponent(n)];_t.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),_t.isString(l)&&f.push("path="+l),_t.isString(h)&&f.push("domain="+h),p===!0&&f.push("secure"),document.cookie=f.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Q_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ty(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function ep(t,n){return t&&!Q_(n)?ty(t,n):n}const $h=t=>t instanceof Gi?{...t}:t;function Kr(t,n){n=n||{};const s={};function l(M,k,P,U){return _t.isPlainObject(M)&&_t.isPlainObject(k)?_t.merge.call({caseless:U},M,k):_t.isPlainObject(k)?_t.merge({},k):_t.isArray(k)?k.slice():k}function h(M,k,P,U){if(_t.isUndefined(k)){if(!_t.isUndefined(M))return l(void 0,M,P,U)}else return l(M,k,P,U)}function p(M,k){if(!_t.isUndefined(k))return l(void 0,k)}function f(M,k){if(_t.isUndefined(k)){if(!_t.isUndefined(M))return l(void 0,M)}else return l(void 0,k)}function y(M,k,P){if(P in n)return l(M,k);if(P in t)return l(void 0,M)}const v={url:p,method:p,data:p,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:y,headers:(M,k,P)=>h($h(M),$h(k),P,!0)};return _t.forEach(Object.keys(Object.assign({},t,n)),function(k){const P=v[k]||h,U=P(t[k],n[k],k);_t.isUndefined(U)&&P!==y||(s[k]=U)}),s}const ip=t=>{const n=Kr({},t);let{data:s,withXSRFToken:l,xsrfHeaderName:h,xsrfCookieName:p,headers:f,auth:y}=n;n.headers=f=Gi.from(f),n.url=Jf(ep(n.baseURL,n.url),t.params,t.paramsSerializer),y&&f.set("Authorization","Basic "+btoa((y.username||"")+":"+(y.password?unescape(encodeURIComponent(y.password)):"")));let v;if(_t.isFormData(s)){if(Ei.hasStandardBrowserEnv||Ei.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((v=f.getContentType())!==!1){const[M,...k]=v?v.split(";").map(P=>P.trim()).filter(Boolean):[];f.setContentType([M||"multipart/form-data",...k].join("; "))}}if(Ei.hasStandardBrowserEnv&&(l&&_t.isFunction(l)&&(l=l(n)),l||l!==!1&&X_(n.url))){const M=h&&p&&Y_.read(p);M&&f.set(h,M)}return n},ey=typeof XMLHttpRequest<"u",iy=ey&&function(t){return new Promise(function(s,l){const h=ip(t);let p=h.data;const f=Gi.from(h.headers).normalize();let{responseType:y,onUploadProgress:v,onDownloadProgress:M}=h,k,P,U,H,N;function $(){H&&H(),N&&N(),h.cancelToken&&h.cancelToken.unsubscribe(k),h.signal&&h.signal.removeEventListener("abort",k)}let q=new XMLHttpRequest;q.open(h.method.toUpperCase(),h.url,!0),q.timeout=h.timeout;function ht(){if(!q)return;const X=Gi.from("getAllResponseHeaders"in q&&q.getAllResponseHeaders()),et={data:!y||y==="text"||y==="json"?q.responseText:q.response,status:q.status,statusText:q.statusText,headers:X,config:t,request:q};tp(function(dt){s(dt),$()},function(dt){l(dt),$()},et),q=null}"onloadend"in q?q.onloadend=ht:q.onreadystatechange=function(){!q||q.readyState!==4||q.status===0&&!(q.responseURL&&q.responseURL.indexOf("file:")===0)||setTimeout(ht)},q.onabort=function(){q&&(l(new be("Request aborted",be.ECONNABORTED,t,q)),q=null)},q.onerror=function(){l(new be("Network Error",be.ERR_NETWORK,t,q)),q=null},q.ontimeout=function(){let J=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded";const et=h.transitional||Xf;h.timeoutErrorMessage&&(J=h.timeoutErrorMessage),l(new be(J,et.clarifyTimeoutError?be.ETIMEDOUT:be.ECONNABORTED,t,q)),q=null},p===void 0&&f.setContentType(null),"setRequestHeader"in q&&_t.forEach(f.toJSON(),function(J,et){q.setRequestHeader(et,J)}),_t.isUndefined(h.withCredentials)||(q.withCredentials=!!h.withCredentials),y&&y!=="json"&&(q.responseType=h.responseType),M&&([U,N]=cl(M,!0),q.addEventListener("progress",U)),v&&q.upload&&([P,H]=cl(v),q.upload.addEventListener("progress",P),q.upload.addEventListener("loadend",H)),(h.cancelToken||h.signal)&&(k=X=>{q&&(l(!X||X.type?new Fs(null,t,q):X),q.abort(),q=null)},h.cancelToken&&h.cancelToken.subscribe(k),h.signal&&(h.signal.aborted?k():h.signal.addEventListener("abort",k)));const mt=K_(h.url);if(mt&&Ei.protocols.indexOf(mt)===-1){l(new be("Unsupported protocol "+mt+":",be.ERR_BAD_REQUEST,t));return}q.send(p||null)})},ny=(t,n)=>{const{length:s}=t=t?t.filter(Boolean):[];if(n||s){let l=new AbortController,h;const p=function(M){if(!h){h=!0,y();const k=M instanceof Error?M:this.reason;l.abort(k instanceof be?k:new Fs(k instanceof Error?k.message:k))}};let f=n&&setTimeout(()=>{f=null,p(new be(`timeout ${n} of ms exceeded`,be.ETIMEDOUT))},n);const y=()=>{t&&(f&&clearTimeout(f),f=null,t.forEach(M=>{M.unsubscribe?M.unsubscribe(p):M.removeEventListener("abort",p)}),t=null)};t.forEach(M=>M.addEventListener("abort",p));const{signal:v}=l;return v.unsubscribe=()=>_t.asap(y),v}},ry=function*(t,n){let s=t.byteLength;if(s<n){yield t;return}let l=0,h;for(;l<s;)h=l+n,yield t.slice(l,h),l=h},sy=async function*(t,n){for await(const s of oy(t))yield*ry(s,n)},oy=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:s,value:l}=await n.read();if(s)break;yield l}}finally{await n.cancel()}},Gh=(t,n,s,l)=>{const h=sy(t,n);let p=0,f,y=v=>{f||(f=!0,l&&l(v))};return new ReadableStream({async pull(v){try{const{done:M,value:k}=await h.next();if(M){y(),v.close();return}let P=k.byteLength;if(s){let U=p+=P;s(U)}v.enqueue(new Uint8Array(k))}catch(M){throw y(M),M}},cancel(v){return y(v),h.return()}},{highWaterMark:2})},Dl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",np=Dl&&typeof ReadableStream=="function",ay=Dl&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),rp=(t,...n)=>{try{return!!t(...n)}catch{return!1}},ly=np&&rp(()=>{let t=!1;const n=new Request(Ei.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),Vh=64*1024,hc=np&&rp(()=>_t.isReadableStream(new Response("").body)),hl={stream:hc&&(t=>t.body)};Dl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!hl[n]&&(hl[n]=_t.isFunction(t[n])?s=>s[n]():(s,l)=>{throw new be(`Response type '${n}' is not supported`,be.ERR_NOT_SUPPORT,l)})})})(new Response);const uy=async t=>{if(t==null)return 0;if(_t.isBlob(t))return t.size;if(_t.isSpecCompliantForm(t))return(await new Request(Ei.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(_t.isArrayBufferView(t)||_t.isArrayBuffer(t))return t.byteLength;if(_t.isURLSearchParams(t)&&(t=t+""),_t.isString(t))return(await ay(t)).byteLength},cy=async(t,n)=>{const s=_t.toFiniteNumber(t.getContentLength());return s??uy(n)},hy=Dl&&(async t=>{let{url:n,method:s,data:l,signal:h,cancelToken:p,timeout:f,onDownloadProgress:y,onUploadProgress:v,responseType:M,headers:k,withCredentials:P="same-origin",fetchOptions:U}=ip(t);M=M?(M+"").toLowerCase():"text";let H=ny([h,p&&p.toAbortSignal()],f),N;const $=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let q;try{if(v&&ly&&s!=="get"&&s!=="head"&&(q=await cy(k,l))!==0){let et=new Request(n,{method:"POST",body:l,duplex:"half"}),nt;if(_t.isFormData(l)&&(nt=et.headers.get("content-type"))&&k.setContentType(nt),et.body){const[dt,Tt]=jh(q,cl(Uh(v)));l=Gh(et.body,Vh,dt,Tt)}}_t.isString(P)||(P=P?"include":"omit");const ht="credentials"in Request.prototype;N=new Request(n,{...U,signal:H,method:s.toUpperCase(),headers:k.normalize().toJSON(),body:l,duplex:"half",credentials:ht?P:void 0});let mt=await fetch(N);const X=hc&&(M==="stream"||M==="response");if(hc&&(y||X&&$)){const et={};["status","statusText","headers"].forEach(Lt=>{et[Lt]=mt[Lt]});const nt=_t.toFiniteNumber(mt.headers.get("content-length")),[dt,Tt]=y&&jh(nt,cl(Uh(y),!0))||[];mt=new Response(Gh(mt.body,Vh,dt,()=>{Tt&&Tt(),$&&$()}),et)}M=M||"text";let J=await hl[_t.findKey(hl,M)||"text"](mt,t);return!X&&$&&$(),await new Promise((et,nt)=>{tp(et,nt,{data:J,headers:Gi.from(mt.headers),status:mt.status,statusText:mt.statusText,config:t,request:N})})}catch(ht){throw $&&$(),ht&&ht.name==="TypeError"&&/fetch/i.test(ht.message)?Object.assign(new be("Network Error",be.ERR_NETWORK,t,N),{cause:ht.cause||ht}):be.from(ht,ht&&ht.code,t,N)}}),dc={http:k_,xhr:iy,fetch:hy};_t.forEach(dc,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const Hh=t=>`- ${t}`,dy=t=>_t.isFunction(t)||t===null||t===!1,sp={getAdapter:t=>{t=_t.isArray(t)?t:[t];const{length:n}=t;let s,l;const h={};for(let p=0;p<n;p++){s=t[p];let f;if(l=s,!dy(s)&&(l=dc[(f=String(s)).toLowerCase()],l===void 0))throw new be(`Unknown adapter '${f}'`);if(l)break;h[f||"#"+p]=l}if(!l){const p=Object.entries(h).map(([y,v])=>`adapter ${y} `+(v===!1?"is not supported by the environment":"is not available in the build"));let f=n?p.length>1?`since :
`+p.map(Hh).join(`
`):" "+Hh(p[0]):"as no adapter specified";throw new be("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l},adapters:dc};function Vu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Fs(null,t)}function Zh(t){return Vu(t),t.headers=Gi.from(t.headers),t.data=Gu.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),sp.getAdapter(t.adapter||Qo.adapter)(t).then(function(l){return Vu(t),l.data=Gu.call(t,t.transformResponse,l),l.headers=Gi.from(l.headers),l},function(l){return Qf(l)||(Vu(t),l&&l.response&&(l.response.data=Gu.call(t,t.transformResponse,l.response),l.response.headers=Gi.from(l.response.headers))),Promise.reject(l)})}const op="1.7.9",Rl={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Rl[t]=function(l){return typeof l===t||"a"+(n<1?"n ":" ")+t}});const qh={};Rl.transitional=function(n,s,l){function h(p,f){return"[Axios v"+op+"] Transitional option '"+p+"'"+f+(l?". "+l:"")}return(p,f,y)=>{if(n===!1)throw new be(h(f," has been removed"+(s?" in "+s:"")),be.ERR_DEPRECATED);return s&&!qh[f]&&(qh[f]=!0,console.warn(h(f," has been deprecated since v"+s+" and will be removed in the near future"))),n?n(p,f,y):!0}};Rl.spelling=function(n){return(s,l)=>(console.warn(`${l} is likely a misspelling of ${n}`),!0)};function fy(t,n,s){if(typeof t!="object")throw new be("options must be an object",be.ERR_BAD_OPTION_VALUE);const l=Object.keys(t);let h=l.length;for(;h-- >0;){const p=l[h],f=n[p];if(f){const y=t[p],v=y===void 0||f(y,p,t);if(v!==!0)throw new be("option "+p+" must be "+v,be.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new be("Unknown option "+p,be.ERR_BAD_OPTION)}}const Xa={assertOptions:fy,validators:Rl},Bn=Xa.validators;let Vr=class{constructor(n){this.defaults=n,this.interceptors={request:new zh,response:new zh}}async request(n,s){try{return await this._request(n,s)}catch(l){if(l instanceof Error){let h={};Error.captureStackTrace?Error.captureStackTrace(h):h=new Error;const p=h.stack?h.stack.replace(/^.+\n/,""):"";try{l.stack?p&&!String(l.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+p):l.stack=p}catch{}}throw l}}_request(n,s){typeof n=="string"?(s=s||{},s.url=n):s=n||{},s=Kr(this.defaults,s);const{transitional:l,paramsSerializer:h,headers:p}=s;l!==void 0&&Xa.assertOptions(l,{silentJSONParsing:Bn.transitional(Bn.boolean),forcedJSONParsing:Bn.transitional(Bn.boolean),clarifyTimeoutError:Bn.transitional(Bn.boolean)},!1),h!=null&&(_t.isFunction(h)?s.paramsSerializer={serialize:h}:Xa.assertOptions(h,{encode:Bn.function,serialize:Bn.function},!0)),Xa.assertOptions(s,{baseUrl:Bn.spelling("baseURL"),withXsrfToken:Bn.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=p&&_t.merge(p.common,p[s.method]);p&&_t.forEach(["delete","get","head","post","put","patch","common"],N=>{delete p[N]}),s.headers=Gi.concat(f,p);const y=[];let v=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(s)===!1||(v=v&&$.synchronous,y.unshift($.fulfilled,$.rejected))});const M=[];this.interceptors.response.forEach(function($){M.push($.fulfilled,$.rejected)});let k,P=0,U;if(!v){const N=[Zh.bind(this),void 0];for(N.unshift.apply(N,y),N.push.apply(N,M),U=N.length,k=Promise.resolve(s);P<U;)k=k.then(N[P++],N[P++]);return k}U=y.length;let H=s;for(P=0;P<U;){const N=y[P++],$=y[P++];try{H=N(H)}catch(q){$.call(this,q);break}}try{k=Zh.call(this,H)}catch(N){return Promise.reject(N)}for(P=0,U=M.length;P<U;)k=k.then(M[P++],M[P++]);return k}getUri(n){n=Kr(this.defaults,n);const s=ep(n.baseURL,n.url);return Jf(s,n.params,n.paramsSerializer)}};_t.forEach(["delete","get","head","options"],function(n){Vr.prototype[n]=function(s,l){return this.request(Kr(l||{},{method:n,url:s,data:(l||{}).data}))}});_t.forEach(["post","put","patch"],function(n){function s(l){return function(p,f,y){return this.request(Kr(y||{},{method:n,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:f}))}}Vr.prototype[n]=s(),Vr.prototype[n+"Form"]=s(!0)});let py=class ap{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(p){s=p});const l=this;this.promise.then(h=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](h);l._listeners=null}),this.promise.then=h=>{let p;const f=new Promise(y=>{l.subscribe(y),p=y}).then(h);return f.cancel=function(){l.unsubscribe(p)},f},n(function(p,f,y){l.reason||(l.reason=new Fs(p,f,y),s(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const s=this._listeners.indexOf(n);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const n=new AbortController,s=l=>{n.abort(l)};return this.subscribe(s),n.signal.unsubscribe=()=>this.unsubscribe(s),n.signal}static source(){let n;return{token:new ap(function(h){n=h}),cancel:n}}};function my(t){return function(s){return t.apply(null,s)}}function gy(t){return _t.isObject(t)&&t.isAxiosError===!0}const fc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fc).forEach(([t,n])=>{fc[n]=t});function lp(t){const n=new Vr(t),s=zf(Vr.prototype.request,n);return _t.extend(s,Vr.prototype,n,{allOwnKeys:!0}),_t.extend(s,n,null,{allOwnKeys:!0}),s.create=function(h){return lp(Kr(t,h))},s}const ti=lp(Qo);ti.Axios=Vr;ti.CanceledError=Fs;ti.CancelToken=py;ti.isCancel=Qf;ti.VERSION=op;ti.toFormData=Tl;ti.AxiosError=be;ti.Cancel=ti.CanceledError;ti.all=function(n){return Promise.all(n)};ti.spread=my;ti.isAxiosError=gy;ti.mergeConfig=Kr;ti.AxiosHeaders=Gi;ti.formToJSON=t=>Yf(_t.isHTMLForm(t)?new FormData(t):t);ti.getAdapter=sp.getAdapter;ti.HttpStatusCode=fc;ti.default=ti;const{Axios:Lw,AxiosError:Cw,CanceledError:Ew,isCancel:kw,CancelToken:Mw,VERSION:Pw,all:Bw,Cancel:Sw,isAxiosError:Aw,spread:Tw,toFormData:Dw,AxiosHeaders:Rw,HttpStatusCode:Ow,formToJSON:Iw,getAdapter:Fw,mergeConfig:zw}=ti,Ee=ti.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function up(t){var l;const s=`; ${document.cookie}`.split(`; ${t}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}Ee.interceptors.request.use(t=>{const n=up("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Ee.interceptors.response.use(t=>t,async t=>{var s;const n=t.config;if(((s=t.response)==null?void 0:s.status)===401&&!n._retry){n._retry=!0;try{await Ji().refreshToken();const h=up("access_token");if(h)return n.headers.Authorization=`Bearer ${h}`,Ee(n)}catch(l){console.error("Token refresh failed:",l),window.location.href="/login"}}return Promise.reject(t)});Ee.defaults.baseURL="/api";Ee.defaults.headers.common["Content-Type"]="application/json";Ee.defaults.withCredentials=!0;function dl(t){var l;const s=`; ${document.cookie}`.split(`; ${t}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}Ee.interceptors.request.use(t=>{const n=dl("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Ee.interceptors.response.use(t=>t,async t=>{var l,h;const n=Ji(),s=t.config;if(((l=t.response)==null?void 0:l.status)===401&&!s._retry&&!((h=s.url)!=null&&h.includes("/token/refresh/"))){s._retry=!0;try{if(!dl("access_token"))throw new Error("No token available");await n.refreshToken();const f=dl("access_token");if(f)return s.headers.Authorization=`Bearer ${f}`,Ee(s)}catch(p){console.error("Token refresh failed:",p),await n.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function _y(t,n,s=1){const l=new Date;l.setTime(l.getTime()+s*24*60*60*1e3);const h=`expires=${l.toUTCString()}`;document.cookie=`${t}=${n};${h};path=/;secure;samesite=Strict`}const Ji=Fc("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="admin"},isDealer:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="dealer"},isClient:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="client"},currentUser:t=>t.user,hasDealer:t=>{var n;return!!((n=t.user)!=null&&n.dealer)}},actions:{async initialize(t){if(console.log("Initializing auth store with state:",t),!t){console.log("No initial state, attempting to restore session...");const s=await this.restoreSession();return this.initialized=!0,s}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const n=await this.restoreSession();return this.initialized=!0,n},async restoreSession(){console.log("Attempting to restore session...");try{if(!dl("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const n=await Ee.post("/token/refresh/");return n.data.user?(this.user=n.data.user,this.isAuthenticated=!0,this.mustChangePassword=n.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,n){var s,l,h;try{const p=await Ee.post("/token/",{username:t,password:n});if(!p.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${p.data.access}; path=/; secure; samesite=Strict`;const f=await this.fetchUserProfile();return this.user=f,this.isAuthenticated=!0,!0}catch(p){throw this.isAuthenticated=!1,this.user=null,((s=p.response)==null?void 0:s.status)===401?new Error("Identifiants incorrects"):(h=(l=p.response)==null?void 0:l.data)!=null&&h.detail?new Error(p.response.data.detail):p}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Ee.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,n){try{console.log("Attempting to change password...");const s=await Ee.post("/users/change_password/",{old_password:t,password:n});return console.log("Password change response:",s.data),this.user={...this.user,must_change_password:!1},s.data}catch(s){throw console.error("Password change error:",s),s}},async refreshToken(){var t,n,s,l;try{console.log("Attempting to refresh token...");const h=await Ee.post("/token/refresh/",{},{withCredentials:!0}),{access:p}=h.data;if(!p)throw new Error("No access token received");return console.log("Token refreshed successfully"),_y("access_token",p,1),this.isAuthenticated=!0,p}catch(h){throw console.error("Error refreshing token:",{status:(t=h.response)==null?void 0:t.status,data:(n=h.response)==null?void 0:n.data}),(((s=h.response)==null?void 0:s.status)===401||((l=h.response)==null?void 0:l.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),h}},async fetchConcessionnaires(){this.loading=!0;try{const t=await Ee.get("/users/",{params:{role:"dealer"}});this.concessionnaires=t.data}catch(t){throw this.error="Erreur lors de la récupération des concessionnaires",t}finally{this.loading=!1}},async setConcessionnaire(t,n){this.loading=!0;try{await Ee.patch(`/users/${t}/`,{concessionnaire:n}),this.user&&this.user.id===t&&(this.user.dealer=n)}catch(s){throw this.error="Erreur lors de la mise à jour du concessionnaire",s}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Ee.post("/users/",t)).data}catch(n){throw this.error="Erreur lors de la création de l'utilisateur",n}finally{this.loading=!1}},async updateUserRole(t,n){this.loading=!0;try{const s=await Ee.patch(`/users/${t}/`,{role:n});return this.user&&this.user.id===t&&(this.user.user_type=n),s.data}catch(s){throw this.error="Erreur lors de la mise à jour du rôle",s}finally{this.loading=!1}},async updateUserEmail(t){var n;this.loading=!0;try{const s=await Ee.patch(`/users/${(n=this.user)==null?void 0:n.id}/`,{email:t});return this.user&&(this.user.email=t),s.data}catch(s){throw this.error="Erreur lors de la mise à jour de l'email",s}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ms=typeof document<"u";function cp(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function yy(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&cp(t.default)}const Re=Object.assign;function Hu(t,n){const s={};for(const l in n){const h=n[l];s[l]=yn(h)?h.map(t):t(h)}return s}const Ro=()=>{},yn=Array.isArray,hp=/#/g,vy=/&/g,by=/\//g,xy=/=/g,wy=/\?/g,dp=/\+/g,Ly=/%5B/g,Cy=/%5D/g,fp=/%5E/g,Ey=/%60/g,pp=/%7B/g,ky=/%7C/g,mp=/%7D/g,My=/%20/g;function Uc(t){return encodeURI(""+t).replace(ky,"|").replace(Ly,"[").replace(Cy,"]")}function Py(t){return Uc(t).replace(pp,"{").replace(mp,"}").replace(fp,"^")}function pc(t){return Uc(t).replace(dp,"%2B").replace(My,"+").replace(hp,"%23").replace(vy,"%26").replace(Ey,"`").replace(pp,"{").replace(mp,"}").replace(fp,"^")}function By(t){return pc(t).replace(xy,"%3D")}function Sy(t){return Uc(t).replace(hp,"%23").replace(wy,"%3F")}function Ay(t){return t==null?"":Sy(t).replace(by,"%2F")}function Vo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Ty=/\/$/,Dy=t=>t.replace(Ty,"");function Zu(t,n,s="/"){let l,h={},p="",f="";const y=n.indexOf("#");let v=n.indexOf("?");return y<v&&y>=0&&(v=-1),v>-1&&(l=n.slice(0,v),p=n.slice(v+1,y>-1?y:n.length),h=t(p)),y>-1&&(l=l||n.slice(0,y),f=n.slice(y,n.length)),l=Fy(l??n,s),{fullPath:l+(p&&"?")+p+f,path:l,query:h,hash:Vo(f)}}function Ry(t,n){const s=n.query?t(n.query):"";return n.path+(s&&"?")+s+(n.hash||"")}function Kh(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function Oy(t,n,s){const l=n.matched.length-1,h=s.matched.length-1;return l>-1&&l===h&&Ds(n.matched[l],s.matched[h])&&gp(n.params,s.params)&&t(n.query)===t(s.query)&&n.hash===s.hash}function Ds(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function gp(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(!Iy(t[s],n[s]))return!1;return!0}function Iy(t,n){return yn(t)?Wh(t,n):yn(n)?Wh(n,t):t===n}function Wh(t,n){return yn(n)?t.length===n.length&&t.every((s,l)=>s===n[l]):t.length===1&&t[0]===n}function Fy(t,n){if(t.startsWith("/"))return t;if(!t)return n;const s=n.split("/"),l=t.split("/"),h=l[l.length-1];(h===".."||h===".")&&l.push("");let p=s.length-1,f,y;for(f=0;f<l.length;f++)if(y=l[f],y!==".")if(y==="..")p>1&&p--;else break;return s.slice(0,p).join("/")+"/"+l.slice(f).join("/")}const dr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ho;(function(t){t.pop="pop",t.push="push"})(Ho||(Ho={}));var Oo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Oo||(Oo={}));function zy(t){if(!t)if(Ms){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Dy(t)}const Ny=/^[^#]+#/;function jy(t,n){return t.replace(Ny,"#")+n}function Uy(t,n){const s=document.documentElement.getBoundingClientRect(),l=t.getBoundingClientRect();return{behavior:n.behavior,left:l.left-s.left-(n.left||0),top:l.top-s.top-(n.top||0)}}const Ol=()=>({left:window.scrollX,top:window.scrollY});function $y(t){let n;if("el"in t){const s=t.el,l=typeof s=="string"&&s.startsWith("#"),h=typeof s=="string"?l?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!h)return;n=Uy(h,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function Jh(t,n){return(history.state?history.state.position-n:-1)+t}const mc=new Map;function Gy(t,n){mc.set(t,n)}function Vy(t){const n=mc.get(t);return mc.delete(t),n}let Hy=()=>location.protocol+"//"+location.host;function _p(t,n){const{pathname:s,search:l,hash:h}=n,p=t.indexOf("#");if(p>-1){let y=h.includes(t.slice(p))?t.slice(p).length:1,v=h.slice(y);return v[0]!=="/"&&(v="/"+v),Kh(v,"")}return Kh(s,t)+l+h}function Zy(t,n,s,l){let h=[],p=[],f=null;const y=({state:U})=>{const H=_p(t,location),N=s.value,$=n.value;let q=0;if(U){if(s.value=H,n.value=U,f&&f===N){f=null;return}q=$?U.position-$.position:0}else l(H);h.forEach(ht=>{ht(s.value,N,{delta:q,type:Ho.pop,direction:q?q>0?Oo.forward:Oo.back:Oo.unknown})})};function v(){f=s.value}function M(U){h.push(U);const H=()=>{const N=h.indexOf(U);N>-1&&h.splice(N,1)};return p.push(H),H}function k(){const{history:U}=window;U.state&&U.replaceState(Re({},U.state,{scroll:Ol()}),"")}function P(){for(const U of p)U();p=[],window.removeEventListener("popstate",y),window.removeEventListener("beforeunload",k)}return window.addEventListener("popstate",y),window.addEventListener("beforeunload",k,{passive:!0}),{pauseListeners:v,listen:M,destroy:P}}function Xh(t,n,s,l=!1,h=!1){return{back:t,current:n,forward:s,replaced:l,position:window.history.length,scroll:h?Ol():null}}function qy(t){const{history:n,location:s}=window,l={value:_p(t,s)},h={value:n.state};h.value||p(l.value,{back:null,current:l.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function p(v,M,k){const P=t.indexOf("#"),U=P>-1?(s.host&&document.querySelector("base")?t:t.slice(P))+v:Hy()+t+v;try{n[k?"replaceState":"pushState"](M,"",U),h.value=M}catch(H){console.error(H),s[k?"replace":"assign"](U)}}function f(v,M){const k=Re({},n.state,Xh(h.value.back,v,h.value.forward,!0),M,{position:h.value.position});p(v,k,!0),l.value=v}function y(v,M){const k=Re({},h.value,n.state,{forward:v,scroll:Ol()});p(k.current,k,!0);const P=Re({},Xh(l.value,v,null),{position:k.position+1},M);p(v,P,!1),l.value=v}return{location:l,state:h,push:y,replace:f}}function Ky(t){t=zy(t);const n=qy(t),s=Zy(t,n.state,n.location,n.replace);function l(p,f=!0){f||s.pauseListeners(),history.go(p)}const h=Re({location:"",base:t,go:l,createHref:jy.bind(null,t)},n,s);return Object.defineProperty(h,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(h,"state",{enumerable:!0,get:()=>n.state.value}),h}function Wy(t){return typeof t=="string"||t&&typeof t=="object"}function yp(t){return typeof t=="string"||typeof t=="symbol"}const vp=Symbol("");var Yh;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Yh||(Yh={}));function Rs(t,n){return Re(new Error,{type:t,[vp]:!0},n)}function qn(t,n){return t instanceof Error&&vp in t&&(n==null||!!(t.type&n))}const Qh="[^/]+?",Jy={sensitive:!1,strict:!1,start:!0,end:!0},Xy=/[.+*?^${}()[\]/\\]/g;function Yy(t,n){const s=Re({},Jy,n),l=[];let h=s.start?"^":"";const p=[];for(const M of t){const k=M.length?[]:[90];s.strict&&!M.length&&(h+="/");for(let P=0;P<M.length;P++){const U=M[P];let H=40+(s.sensitive?.25:0);if(U.type===0)P||(h+="/"),h+=U.value.replace(Xy,"\\$&"),H+=40;else if(U.type===1){const{value:N,repeatable:$,optional:q,regexp:ht}=U;p.push({name:N,repeatable:$,optional:q});const mt=ht||Qh;if(mt!==Qh){H+=10;try{new RegExp(`(${mt})`)}catch(J){throw new Error(`Invalid custom RegExp for param "${N}" (${mt}): `+J.message)}}let X=$?`((?:${mt})(?:/(?:${mt}))*)`:`(${mt})`;P||(X=q&&M.length<2?`(?:/${X})`:"/"+X),q&&(X+="?"),h+=X,H+=20,q&&(H+=-8),$&&(H+=-20),mt===".*"&&(H+=-50)}k.push(H)}l.push(k)}if(s.strict&&s.end){const M=l.length-1;l[M][l[M].length-1]+=.7000000000000001}s.strict||(h+="/?"),s.end?h+="$":s.strict&&!h.endsWith("/")&&(h+="(?:/|$)");const f=new RegExp(h,s.sensitive?"":"i");function y(M){const k=M.match(f),P={};if(!k)return null;for(let U=1;U<k.length;U++){const H=k[U]||"",N=p[U-1];P[N.name]=H&&N.repeatable?H.split("/"):H}return P}function v(M){let k="",P=!1;for(const U of t){(!P||!k.endsWith("/"))&&(k+="/"),P=!1;for(const H of U)if(H.type===0)k+=H.value;else if(H.type===1){const{value:N,repeatable:$,optional:q}=H,ht=N in M?M[N]:"";if(yn(ht)&&!$)throw new Error(`Provided param "${N}" is an array but it is not repeatable (* or + modifiers)`);const mt=yn(ht)?ht.join("/"):ht;if(!mt)if(q)U.length<2&&(k.endsWith("/")?k=k.slice(0,-1):P=!0);else throw new Error(`Missing required param "${N}"`);k+=mt}}return k||"/"}return{re:f,score:l,keys:p,parse:y,stringify:v}}function Qy(t,n){let s=0;for(;s<t.length&&s<n.length;){const l=n[s]-t[s];if(l)return l;s++}return t.length<n.length?t.length===1&&t[0]===80?-1:1:t.length>n.length?n.length===1&&n[0]===80?1:-1:0}function bp(t,n){let s=0;const l=t.score,h=n.score;for(;s<l.length&&s<h.length;){const p=Qy(l[s],h[s]);if(p)return p;s++}if(Math.abs(h.length-l.length)===1){if(td(l))return 1;if(td(h))return-1}return h.length-l.length}function td(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const tv={type:0,value:""},ev=/[a-zA-Z0-9_]/;function iv(t){if(!t)return[[]];if(t==="/")return[[tv]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(H){throw new Error(`ERR (${s})/"${M}": ${H}`)}let s=0,l=s;const h=[];let p;function f(){p&&h.push(p),p=[]}let y=0,v,M="",k="";function P(){M&&(s===0?p.push({type:0,value:M}):s===1||s===2||s===3?(p.length>1&&(v==="*"||v==="+")&&n(`A repeatable param (${M}) must be alone in its segment. eg: '/:ids+.`),p.push({type:1,value:M,regexp:k,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):n("Invalid state to consume buffer"),M="")}function U(){M+=v}for(;y<t.length;){if(v=t[y++],v==="\\"&&s!==2){l=s,s=4;continue}switch(s){case 0:v==="/"?(M&&P(),f()):v===":"?(P(),s=1):U();break;case 4:U(),s=l;break;case 1:v==="("?s=2:ev.test(v)?U():(P(),s=0,v!=="*"&&v!=="?"&&v!=="+"&&y--);break;case 2:v===")"?k[k.length-1]=="\\"?k=k.slice(0,-1)+v:s=3:k+=v;break;case 3:P(),s=0,v!=="*"&&v!=="?"&&v!=="+"&&y--,k="";break;default:n("Unknown state");break}}return s===2&&n(`Unfinished custom RegExp for param "${M}"`),P(),f(),h}function nv(t,n,s){const l=Yy(iv(t.path),s),h=Re(l,{record:t,parent:n,children:[],alias:[]});return n&&!h.record.aliasOf==!n.record.aliasOf&&n.children.push(h),h}function rv(t,n){const s=[],l=new Map;n=rd({strict:!1,end:!0,sensitive:!1},n);function h(P){return l.get(P)}function p(P,U,H){const N=!H,$=id(P);$.aliasOf=H&&H.record;const q=rd(n,P),ht=[$];if("alias"in P){const J=typeof P.alias=="string"?[P.alias]:P.alias;for(const et of J)ht.push(id(Re({},$,{components:H?H.record.components:$.components,path:et,aliasOf:H?H.record:$})))}let mt,X;for(const J of ht){const{path:et}=J;if(U&&et[0]!=="/"){const nt=U.record.path,dt=nt[nt.length-1]==="/"?"":"/";J.path=U.record.path+(et&&dt+et)}if(mt=nv(J,U,q),H?H.alias.push(mt):(X=X||mt,X!==mt&&X.alias.push(mt),N&&P.name&&!nd(mt)&&f(P.name)),xp(mt)&&v(mt),$.children){const nt=$.children;for(let dt=0;dt<nt.length;dt++)p(nt[dt],mt,H&&H.children[dt])}H=H||mt}return X?()=>{f(X)}:Ro}function f(P){if(yp(P)){const U=l.get(P);U&&(l.delete(P),s.splice(s.indexOf(U),1),U.children.forEach(f),U.alias.forEach(f))}else{const U=s.indexOf(P);U>-1&&(s.splice(U,1),P.record.name&&l.delete(P.record.name),P.children.forEach(f),P.alias.forEach(f))}}function y(){return s}function v(P){const U=av(P,s);s.splice(U,0,P),P.record.name&&!nd(P)&&l.set(P.record.name,P)}function M(P,U){let H,N={},$,q;if("name"in P&&P.name){if(H=l.get(P.name),!H)throw Rs(1,{location:P});q=H.record.name,N=Re(ed(U.params,H.keys.filter(X=>!X.optional).concat(H.parent?H.parent.keys.filter(X=>X.optional):[]).map(X=>X.name)),P.params&&ed(P.params,H.keys.map(X=>X.name))),$=H.stringify(N)}else if(P.path!=null)$=P.path,H=s.find(X=>X.re.test($)),H&&(N=H.parse($),q=H.record.name);else{if(H=U.name?l.get(U.name):s.find(X=>X.re.test(U.path)),!H)throw Rs(1,{location:P,currentLocation:U});q=H.record.name,N=Re({},U.params,P.params),$=H.stringify(N)}const ht=[];let mt=H;for(;mt;)ht.unshift(mt.record),mt=mt.parent;return{name:q,path:$,params:N,matched:ht,meta:ov(ht)}}t.forEach(P=>p(P));function k(){s.length=0,l.clear()}return{addRoute:p,resolve:M,removeRoute:f,clearRoutes:k,getRoutes:y,getRecordMatcher:h}}function ed(t,n){const s={};for(const l of n)l in t&&(s[l]=t[l]);return s}function id(t){const n={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:sv(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function sv(t){const n={},s=t.props||!1;if("component"in t)n.default=s;else for(const l in t.components)n[l]=typeof s=="object"?s[l]:s;return n}function nd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ov(t){return t.reduce((n,s)=>Re(n,s.meta),{})}function rd(t,n){const s={};for(const l in t)s[l]=l in n?n[l]:t[l];return s}function av(t,n){let s=0,l=n.length;for(;s!==l;){const p=s+l>>1;bp(t,n[p])<0?l=p:s=p+1}const h=lv(t);return h&&(l=n.lastIndexOf(h,l-1)),l}function lv(t){let n=t;for(;n=n.parent;)if(xp(n)&&bp(t,n)===0)return n}function xp({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function uv(t){const n={};if(t===""||t==="?")return n;const l=(t[0]==="?"?t.slice(1):t).split("&");for(let h=0;h<l.length;++h){const p=l[h].replace(dp," "),f=p.indexOf("="),y=Vo(f<0?p:p.slice(0,f)),v=f<0?null:Vo(p.slice(f+1));if(y in n){let M=n[y];yn(M)||(M=n[y]=[M]),M.push(v)}else n[y]=v}return n}function sd(t){let n="";for(let s in t){const l=t[s];if(s=By(s),l==null){l!==void 0&&(n+=(n.length?"&":"")+s);continue}(yn(l)?l.map(p=>p&&pc(p)):[l&&pc(l)]).forEach(p=>{p!==void 0&&(n+=(n.length?"&":"")+s,p!=null&&(n+="="+p))})}return n}function cv(t){const n={};for(const s in t){const l=t[s];l!==void 0&&(n[s]=yn(l)?l.map(h=>h==null?null:""+h):l==null?l:""+l)}return n}const hv=Symbol(""),od=Symbol(""),Il=Symbol(""),$c=Symbol(""),gc=Symbol("");function wo(){let t=[];function n(l){return t.push(l),()=>{const h=t.indexOf(l);h>-1&&t.splice(h,1)}}function s(){t=[]}return{add:n,list:()=>t.slice(),reset:s}}function gr(t,n,s,l,h,p=f=>f()){const f=l&&(l.enterCallbacks[h]=l.enterCallbacks[h]||[]);return()=>new Promise((y,v)=>{const M=U=>{U===!1?v(Rs(4,{from:s,to:n})):U instanceof Error?v(U):Wy(U)?v(Rs(2,{from:n,to:U})):(f&&l.enterCallbacks[h]===f&&typeof U=="function"&&f.push(U),y())},k=p(()=>t.call(l&&l.instances[h],n,s,M));let P=Promise.resolve(k);t.length<3&&(P=P.then(M)),P.catch(U=>v(U))})}function qu(t,n,s,l,h=p=>p()){const p=[];for(const f of t)for(const y in f.components){let v=f.components[y];if(!(n!=="beforeRouteEnter"&&!f.instances[y]))if(cp(v)){const k=(v.__vccOpts||v)[n];k&&p.push(gr(k,s,l,f,y,h))}else{let M=v();p.push(()=>M.then(k=>{if(!k)throw new Error(`Couldn't resolve component "${y}" at "${f.path}"`);const P=yy(k)?k.default:k;f.mods[y]=k,f.components[y]=P;const H=(P.__vccOpts||P)[n];return H&&gr(H,s,l,f,y,h)()}))}}return p}function ad(t){const n=un(Il),s=un($c),l=Ae(()=>{const v=Ue(t.to);return n.resolve(v)}),h=Ae(()=>{const{matched:v}=l.value,{length:M}=v,k=v[M-1],P=s.matched;if(!k||!P.length)return-1;const U=P.findIndex(Ds.bind(null,k));if(U>-1)return U;const H=ld(v[M-2]);return M>1&&ld(k)===H&&P[P.length-1].path!==H?P.findIndex(Ds.bind(null,v[M-2])):U}),p=Ae(()=>h.value>-1&&mv(s.params,l.value.params)),f=Ae(()=>h.value>-1&&h.value===s.matched.length-1&&gp(s.params,l.value.params));function y(v={}){if(pv(v)){const M=n[Ue(t.replace)?"replace":"push"](Ue(t.to)).catch(Ro);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>M),M}return Promise.resolve()}return{route:l,href:Ae(()=>l.value.href),isActive:p,isExactActive:f,navigate:y}}function dv(t){return t.length===1?t[0]:t}const fv=Xi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ad,setup(t,{slots:n}){const s=Qn(ad(t)),{options:l}=un(Il),h=Ae(()=>({[ud(t.activeClass,l.linkActiveClass,"router-link-active")]:s.isActive,[ud(t.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const p=n.default&&dv(n.default(s));return t.custom?p:Af("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:h.value},p)}}}),Ya=fv;function pv(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function mv(t,n){for(const s in n){const l=n[s],h=t[s];if(typeof l=="string"){if(l!==h)return!1}else if(!yn(h)||h.length!==l.length||l.some((p,f)=>p!==h[f]))return!1}return!0}function ld(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ud=(t,n,s)=>t??n??s,gv=Xi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:s}){const l=un(gc),h=Ae(()=>t.route||l.value),p=un(od,0),f=Ae(()=>{let M=Ue(p);const{matched:k}=h.value;let P;for(;(P=k[M])&&!P.components;)M++;return M}),y=Ae(()=>h.value.matched[f.value]);Ha(od,Ae(()=>f.value+1)),Ha(hv,y),Ha(gc,h);const v=ie();return gn(()=>[v.value,y.value,t.name],([M,k,P],[U,H,N])=>{k&&(k.instances[P]=M,H&&H!==k&&M&&M===U&&(k.leaveGuards.size||(k.leaveGuards=H.leaveGuards),k.updateGuards.size||(k.updateGuards=H.updateGuards))),M&&k&&(!H||!Ds(k,H)||!U)&&(k.enterCallbacks[P]||[]).forEach($=>$(M))},{flush:"post"}),()=>{const M=h.value,k=t.name,P=y.value,U=P&&P.components[k];if(!U)return cd(s.default,{Component:U,route:M});const H=P.props[k],N=H?H===!0?M.params:typeof H=="function"?H(M):H:null,q=Af(U,Re({},N,n,{onVnodeUnmounted:ht=>{ht.component.isUnmounted&&(P.instances[k]=null)},ref:v}));return cd(s.default,{Component:q,route:M})||q}}});function cd(t,n){if(!t)return null;const s=t(n);return s.length===1?s[0]:s}const wp=gv;function _v(t){const n=rv(t.routes,t),s=t.parseQuery||uv,l=t.stringifyQuery||sd,h=t.history,p=wo(),f=wo(),y=wo(),v=Gm(dr);let M=dr;Ms&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const k=Hu.bind(null,bt=>""+bt),P=Hu.bind(null,Ay),U=Hu.bind(null,Vo);function H(bt,Ut){let Nt,Wt;return yp(bt)?(Nt=n.getRecordMatcher(bt),Wt=Ut):Wt=bt,n.addRoute(Wt,Nt)}function N(bt){const Ut=n.getRecordMatcher(bt);Ut&&n.removeRoute(Ut)}function $(){return n.getRoutes().map(bt=>bt.record)}function q(bt){return!!n.getRecordMatcher(bt)}function ht(bt,Ut){if(Ut=Re({},Ut||v.value),typeof bt=="string"){const it=Zu(s,bt,Ut.path),yt=n.resolve({path:it.path},Ut),wt=h.createHref(it.fullPath);return Re(it,yt,{params:U(yt.params),hash:Vo(it.hash),redirectedFrom:void 0,href:wt})}let Nt;if(bt.path!=null)Nt=Re({},bt,{path:Zu(s,bt.path,Ut.path).path});else{const it=Re({},bt.params);for(const yt in it)it[yt]==null&&delete it[yt];Nt=Re({},bt,{params:P(it)}),Ut.params=P(Ut.params)}const Wt=n.resolve(Nt,Ut),Le=bt.hash||"";Wt.params=k(U(Wt.params));const F=Ry(l,Re({},bt,{hash:Py(Le),path:Wt.path})),G=h.createHref(F);return Re({fullPath:F,hash:Le,query:l===sd?cv(bt.query):bt.query||{}},Wt,{redirectedFrom:void 0,href:G})}function mt(bt){return typeof bt=="string"?Zu(s,bt,v.value.path):Re({},bt)}function X(bt,Ut){if(M!==bt)return Rs(8,{from:Ut,to:bt})}function J(bt){return dt(bt)}function et(bt){return J(Re(mt(bt),{replace:!0}))}function nt(bt){const Ut=bt.matched[bt.matched.length-1];if(Ut&&Ut.redirect){const{redirect:Nt}=Ut;let Wt=typeof Nt=="function"?Nt(bt):Nt;return typeof Wt=="string"&&(Wt=Wt.includes("?")||Wt.includes("#")?Wt=mt(Wt):{path:Wt},Wt.params={}),Re({query:bt.query,hash:bt.hash,params:Wt.path!=null?{}:bt.params},Wt)}}function dt(bt,Ut){const Nt=M=ht(bt),Wt=v.value,Le=bt.state,F=bt.force,G=bt.replace===!0,it=nt(Nt);if(it)return dt(Re(mt(it),{state:typeof it=="object"?Re({},Le,it.state):Le,force:F,replace:G}),Ut||Nt);const yt=Nt;yt.redirectedFrom=Ut;let wt;return!F&&Oy(l,Wt,Nt)&&(wt=Rs(16,{to:yt,from:Wt}),Gt(Wt,Wt,!0,!1)),(wt?Promise.resolve(wt):Mt(yt,Wt)).catch(xt=>qn(xt)?qn(xt,2)?xt:lt(xt):zt(xt,yt,Wt)).then(xt=>{if(xt){if(qn(xt,2))return dt(Re({replace:G},mt(xt.to),{state:typeof xt.to=="object"?Re({},Le,xt.to.state):Le,force:F}),Ut||yt)}else xt=Bt(yt,Wt,!0,G,Le);return vt(yt,Wt,xt),xt})}function Tt(bt,Ut){const Nt=X(bt,Ut);return Nt?Promise.reject(Nt):Promise.resolve()}function Lt(bt){const Ut=$t.values().next().value;return Ut&&typeof Ut.runWithContext=="function"?Ut.runWithContext(bt):bt()}function Mt(bt,Ut){let Nt;const[Wt,Le,F]=yv(bt,Ut);Nt=qu(Wt.reverse(),"beforeRouteLeave",bt,Ut);for(const it of Wt)it.leaveGuards.forEach(yt=>{Nt.push(gr(yt,bt,Ut))});const G=Tt.bind(null,bt,Ut);return Nt.push(G),re(Nt).then(()=>{Nt=[];for(const it of p.list())Nt.push(gr(it,bt,Ut));return Nt.push(G),re(Nt)}).then(()=>{Nt=qu(Le,"beforeRouteUpdate",bt,Ut);for(const it of Le)it.updateGuards.forEach(yt=>{Nt.push(gr(yt,bt,Ut))});return Nt.push(G),re(Nt)}).then(()=>{Nt=[];for(const it of F)if(it.beforeEnter)if(yn(it.beforeEnter))for(const yt of it.beforeEnter)Nt.push(gr(yt,bt,Ut));else Nt.push(gr(it.beforeEnter,bt,Ut));return Nt.push(G),re(Nt)}).then(()=>(bt.matched.forEach(it=>it.enterCallbacks={}),Nt=qu(F,"beforeRouteEnter",bt,Ut,Lt),Nt.push(G),re(Nt))).then(()=>{Nt=[];for(const it of f.list())Nt.push(gr(it,bt,Ut));return Nt.push(G),re(Nt)}).catch(it=>qn(it,8)?it:Promise.reject(it))}function vt(bt,Ut,Nt){y.list().forEach(Wt=>Lt(()=>Wt(bt,Ut,Nt)))}function Bt(bt,Ut,Nt,Wt,Le){const F=X(bt,Ut);if(F)return F;const G=Ut===dr,it=Ms?history.state:{};Nt&&(Wt||G?h.replace(bt.fullPath,Re({scroll:G&&it&&it.scroll},Le)):h.push(bt.fullPath,Le)),v.value=bt,Gt(bt,Ut,Nt,G),lt()}let ut;function Ct(){ut||(ut=h.listen((bt,Ut,Nt)=>{if(!le.listening)return;const Wt=ht(bt),Le=nt(Wt);if(Le){dt(Re(Le,{replace:!0,force:!0}),Wt).catch(Ro);return}M=Wt;const F=v.value;Ms&&Gy(Jh(F.fullPath,Nt.delta),Ol()),Mt(Wt,F).catch(G=>qn(G,12)?G:qn(G,2)?(dt(Re(mt(G.to),{force:!0}),Wt).then(it=>{qn(it,20)&&!Nt.delta&&Nt.type===Ho.pop&&h.go(-1,!1)}).catch(Ro),Promise.reject()):(Nt.delta&&h.go(-Nt.delta,!1),zt(G,Wt,F))).then(G=>{G=G||Bt(Wt,F,!1),G&&(Nt.delta&&!qn(G,8)?h.go(-Nt.delta,!1):Nt.type===Ho.pop&&qn(G,20)&&h.go(-1,!1)),vt(Wt,F,G)}).catch(Ro)}))}let Vt=wo(),Dt=wo(),Jt;function zt(bt,Ut,Nt){lt(bt);const Wt=Dt.list();return Wt.length?Wt.forEach(Le=>Le(bt,Ut,Nt)):console.error(bt),Promise.reject(bt)}function Yt(){return Jt&&v.value!==dr?Promise.resolve():new Promise((bt,Ut)=>{Vt.add([bt,Ut])})}function lt(bt){return Jt||(Jt=!bt,Ct(),Vt.list().forEach(([Ut,Nt])=>bt?Nt(bt):Ut()),Vt.reset()),bt}function Gt(bt,Ut,Nt,Wt){const{scrollBehavior:Le}=t;if(!Ms||!Le)return Promise.resolve();const F=!Nt&&Vy(Jh(bt.fullPath,0))||(Wt||!Nt)&&history.state&&history.state.scroll||null;return wl().then(()=>Le(bt,Ut,F)).then(G=>G&&$y(G)).catch(G=>zt(G,bt,Ut))}const Et=bt=>h.go(bt);let ne;const $t=new Set,le={currentRoute:v,listening:!0,addRoute:H,removeRoute:N,clearRoutes:n.clearRoutes,hasRoute:q,getRoutes:$,resolve:ht,options:t,push:J,replace:et,go:Et,back:()=>Et(-1),forward:()=>Et(1),beforeEach:p.add,beforeResolve:f.add,afterEach:y.add,onError:Dt.add,isReady:Yt,install(bt){const Ut=this;bt.component("RouterLink",Ya),bt.component("RouterView",wp),bt.config.globalProperties.$router=Ut,Object.defineProperty(bt.config.globalProperties,"$route",{enumerable:!0,get:()=>Ue(v)}),Ms&&!ne&&v.value===dr&&(ne=!0,J(h.location).catch(Le=>{}));const Nt={};for(const Le in dr)Object.defineProperty(Nt,Le,{get:()=>v.value[Le],enumerable:!0});bt.provide(Il,Ut),bt.provide($c,Wd(Nt)),bt.provide(gc,v);const Wt=bt.unmount;$t.add(bt),bt.unmount=function(){$t.delete(bt),$t.size<1&&(M=dr,ut&&ut(),ut=null,v.value=dr,ne=!1,Jt=!1),Wt()}}};function re(bt){return bt.reduce((Ut,Nt)=>Ut.then(()=>Lt(Nt)),Promise.resolve())}return le}function yv(t,n){const s=[],l=[],h=[],p=Math.max(n.matched.length,t.matched.length);for(let f=0;f<p;f++){const y=n.matched[f];y&&(t.matched.find(M=>Ds(M,y))?l.push(y):s.push(y));const v=t.matched[f];v&&(n.matched.find(M=>Ds(M,v))||h.push(v))}return[s,l,h]}function zs(){return un(Il)}function Nw(t){return un($c)}var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vv(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var Cp=vv,bv=typeof Xn=="object"&&Xn&&Xn.Object===Object&&Xn,xv=bv,wv=xv,Lv=typeof self=="object"&&self&&self.Object===Object&&self,Cv=wv||Lv||Function("return this")(),Ep=Cv,Ev=Ep,kv=function(){return Ev.Date.now()},Mv=kv,Pv=/\s/;function Bv(t){for(var n=t.length;n--&&Pv.test(t.charAt(n)););return n}var Sv=Bv,Av=Sv,Tv=/^\s+/;function Dv(t){return t&&t.slice(0,Av(t)+1).replace(Tv,"")}var Rv=Dv,Ov=Ep,Iv=Ov.Symbol,kp=Iv,hd=kp,Mp=Object.prototype,Fv=Mp.hasOwnProperty,zv=Mp.toString,Lo=hd?hd.toStringTag:void 0;function Nv(t){var n=Fv.call(t,Lo),s=t[Lo];try{t[Lo]=void 0;var l=!0}catch{}var h=zv.call(t);return l&&(n?t[Lo]=s:delete t[Lo]),h}var jv=Nv,Uv=Object.prototype,$v=Uv.toString;function Gv(t){return $v.call(t)}var Vv=Gv,dd=kp,Hv=jv,Zv=Vv,qv="[object Null]",Kv="[object Undefined]",fd=dd?dd.toStringTag:void 0;function Wv(t){return t==null?t===void 0?Kv:qv:fd&&fd in Object(t)?Hv(t):Zv(t)}var Jv=Wv;function Xv(t){return t!=null&&typeof t=="object"}var Yv=Xv,Qv=Jv,t4=Yv,e4="[object Symbol]";function i4(t){return typeof t=="symbol"||t4(t)&&Qv(t)==e4}var n4=i4,r4=Rv,pd=Cp,s4=n4,md=NaN,o4=/^[-+]0x[0-9a-f]+$/i,a4=/^0b[01]+$/i,l4=/^0o[0-7]+$/i,u4=parseInt;function c4(t){if(typeof t=="number")return t;if(s4(t))return md;if(pd(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=pd(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=r4(t);var s=a4.test(t);return s||l4.test(t)?u4(t.slice(2),s?2:8):o4.test(t)?md:+t}var h4=c4,d4=Cp,Ku=Mv,gd=h4,f4="Expected a function",p4=Math.max,m4=Math.min;function g4(t,n,s){var l,h,p,f,y,v,M=0,k=!1,P=!1,U=!0;if(typeof t!="function")throw new TypeError(f4);n=gd(n)||0,d4(s)&&(k=!!s.leading,P="maxWait"in s,p=P?p4(gd(s.maxWait)||0,n):p,U="trailing"in s?!!s.trailing:U);function H(nt){var dt=l,Tt=h;return l=h=void 0,M=nt,f=t.apply(Tt,dt),f}function N(nt){return M=nt,y=setTimeout(ht,n),k?H(nt):f}function $(nt){var dt=nt-v,Tt=nt-M,Lt=n-dt;return P?m4(Lt,p-Tt):Lt}function q(nt){var dt=nt-v,Tt=nt-M;return v===void 0||dt>=n||dt<0||P&&Tt>=p}function ht(){var nt=Ku();if(q(nt))return mt(nt);y=setTimeout(ht,$(nt))}function mt(nt){return y=void 0,U&&l?H(nt):(l=h=void 0,f)}function X(){y!==void 0&&clearTimeout(y),M=0,l=v=h=y=void 0}function J(){return y===void 0?f:mt(Ku())}function et(){var nt=Ku(),dt=q(nt);if(l=arguments,h=this,v=nt,dt){if(y===void 0)return N(v);if(P)return clearTimeout(y),y=setTimeout(ht,n),H(v)}return y===void 0&&(y=setTimeout(ht,n)),f}return et.cancel=X,et.flush=J,et}var _4=g4;const y4=Lp(_4),v4={class:"relative"},b4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},x4=["onClick"],w4=Xi({__name:"SearchBar",emits:["select-location"],setup(t,{emit:n}){const s=ie(""),l=ie([]),h=n,p=y4(async v=>{if(v.length<3){l.value=[];return}try{const k=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(v)}`)).json();l.value=k}catch(M){console.error("Erreur lors de la recherche d'adresse:",M),l.value=[]}},300);function f(){p(s.value)}function y(v){s.value=v.display_name,l.value=[],h("select-location",{lat:parseFloat(v.lat),lng:parseFloat(v.lon)})}return(v,M)=>(It(),jt("div",v4,[Ie(E("input",{"onUpdate:modelValue":M[0]||(M[0]=k=>s.value=k),onInput:f,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[We,s.value]]),l.value.length>0?(It(),jt("div",b4,[(It(!0),jt(Ze,null,Oi(l.value,k=>(It(),jt("div",{key:k.place_id,onClick:P=>y(k),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Kt(k.display_name),9,x4))),128))])):ge("",!0)]))}}),Pp=(t,n)=>{const s=t.__vccOpts||t;for(const[l,h]of n)s[l]=h;return s},L4=Pp(w4,[["__scopeId","data-v-4cda7c14"]]),C4={class:"h-screen flex flex-col overflow-hidden"},E4={key:0,class:"bg-white shadow-sm z-[2000]"},k4={class:"mx-auto px-4 sm:px-6 lg:px-8"},M4={class:"flex h-16 items-center justify-between"},P4={class:"flex items-center space-x-8"},B4={class:"hidden md:flex space-x-6"},S4={class:"flex-1 max-w-2xl mx-8"},A4={class:"flex items-center space-x-4"},T4={class:"relative"},D4={class:"flex flex-col items-end"},R4={class:"text-sm font-medium text-gray-700"},O4={key:0,class:"text-xs text-gray-500"},I4=["src","alt"],F4={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},z4={class:"flex-1 overflow-hidden"},N4=Xi({__name:"App",setup(t){const n=zs(),s=Ji(),l=ie(!1),h=Ae(()=>{const $=s.user;if(!$)return"";const q=`${$.first_name} ${$.last_name.toUpperCase()}`;return $.company_name?`${q} (${$.company_name})`:q}),p=Ae(()=>{var q;const $=(q=s.user)==null?void 0:q.user_type;switch(console.log("User type:",$),$){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),f=Ae(()=>{var $;return(($=s.user)==null?void 0:$.user_type)==="admin"}),y=ie(""),v=Ae(()=>s.isAuthenticated),M=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],k=Ae(()=>{var q;if(!v.value)return[];const $=[...M];return f.value?$.push({name:"Utilisateurs",to:"/users"}):((q=s.user)==null?void 0:q.user_type)==="dealer"&&$.push({name:"Clients",to:"/clients"}),$}),P=Ae(()=>v.value?[{name:"Mon profil",to:"/profile"}]:[]);async function U(){try{await s.logout(),n.push("/login")}catch($){console.error("Erreur lors de la déconnexion:",$)}}function H($){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:$.lat,lng:$.lng,zoom:16}}))}Lr(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await s.checkAuth(),await s.fetchUserProfile()):console.log("No token found")}catch($){console.error("Auth check error:",$),n.push("/login")}});const N=Ae(()=>{const $="IrrigationDesign";if(!v.value)return`${$} - Connexion`;const q=n.currentRoute.value,mt={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[q.name]||"";return mt?`${$} - ${mt}`:$});return gn(N,$=>{document.title=$},{immediate:!0}),($,q)=>(It(),jt("div",C4,[v.value?(It(),jt("header",E4,[E("nav",k4,[E("div",M4,[E("div",P4,[ai(Ue(Ya),{to:"/",class:"text-xl font-semibold text-primary-600"},{default:Bo(()=>q[2]||(q[2]=[li(" IrrigationDesign ")])),_:1}),E("div",B4,[(It(!0),jt(Ze,null,Oi(k.value,ht=>(It(),qr(Ue(Ya),{key:ht.name,to:ht.to,class:br(["text-sm font-medium transition-colors duration-200",[$.$route.path===ht.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Bo(()=>[li(Kt(ht.name),1)]),_:2},1032,["to","class"]))),128))])]),E("div",S4,[ai(L4,{onSelectLocation:H})]),E("div",A4,[q[3]||(q[3]=E("button",{class:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[E("span",{class:"sr-only"},"Voir les notifications"),E("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),E("div",T4,[E("button",{onClick:q[0]||(q[0]=ht=>l.value=!l.value),class:"flex items-center space-x-3 focus:outline-none"},[E("div",D4,[E("span",R4,Kt(h.value),1),p.value?(It(),jt("span",O4,Kt(p.value),1)):ge("",!0)]),E("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:y.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(h.value),alt:h.value},null,8,I4)]),l.value?(It(),jt("div",F4,[(It(!0),jt(Ze,null,Oi(P.value,ht=>(It(),qr(Ue(Ya),{key:ht.name,to:ht.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:q[1]||(q[1]=mt=>l.value=!1)},{default:Bo(()=>[li(Kt(ht.name),1)]),_:2},1032,["to"]))),128)),E("button",{onClick:U,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):ge("",!0)])])])])])):ge("",!0),E("main",z4,[ai(Ue(wp))])]))}}),j4="modulepreload",U4=function(t){return"/"+t},_d={},$a=function(n,s,l){let h=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),y=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));h=Promise.allSettled(s.map(v=>{if(v=U4(v),v in _d)return;_d[v]=!0;const M=v.endsWith(".css"),k=M?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${k}`))return;const P=document.createElement("link");if(P.rel=M?"stylesheet":j4,M||(P.as="script"),P.crossOrigin="",P.href=v,y&&P.setAttribute("nonce",y),document.head.appendChild(P),M)return new Promise((U,H)=>{P.addEventListener("load",U),P.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${v}`)))})}))}function p(f){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=f,window.dispatchEvent(y),!y.defaultPrevented)throw f}return h.then(f=>{for(const y of f||[])y.status==="rejected"&&p(y.reason);return n().catch(p)})},$4={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},G4={class:"max-w-md w-full space-y-8"},V4={class:"space-y-4"},H4={class:"mt-1"},Z4={class:"mt-1"},q4={class:"mt-1"},K4={key:0,class:"rounded-md bg-red-50 p-4"},W4={class:"flex"},J4={class:"ml-3"},X4={class:"text-sm font-medium text-red-800"},Y4={key:1,class:"rounded-md bg-yellow-50 p-4"},Q4={class:"flex"},tb={class:"ml-3"},eb={class:"mt-2 text-sm text-yellow-700"},ib={class:"list-disc pl-5 space-y-1"},nb=["disabled"],rb={class:"absolute left-0 inset-y-0 flex items-center pl-3"},sb={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ob={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ab=Xi({__name:"ChangePasswordForm",setup(t){const n=zs(),s=Ji(),l=Qn({oldPassword:"",newPassword:"",confirmPassword:""}),h=ie(!1),p=ie("");Lr(()=>{var M,k;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:s.isAuthenticated,userId:(M=s.user)==null?void 0:M.id,mustChangePassword:(k=s.user)==null?void 0:k.must_change_password})});const f=Ae(()=>{const M=[];return l.newPassword&&l.newPassword.length<8&&M.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),l.newPassword&&l.confirmPassword&&l.newPassword!==l.confirmPassword&&M.push("Les mots de passe ne correspondent pas"),M}),y=Ae(()=>l.oldPassword.length>0&&l.newPassword.length>=8&&l.newPassword===l.confirmPassword);async function v(){var M,k,P,U,H,N,$,q;if(!y.value){p.value="Veuillez corriger les erreurs avant de continuer";return}if(!((M=s.user)!=null&&M.id)){p.value="Erreur : utilisateur non identifié";return}h.value=!0,p.value="";try{console.log("Submitting password change..."),await s.changePassword(l.oldPassword,l.newPassword),console.log("Password changed successfully"),n.push("/")}catch(ht){console.error("Password change failed:",ht),(P=(k=ht.response)==null?void 0:k.data)!=null&&P.detail?p.value=ht.response.data.detail:(H=(U=ht.response)==null?void 0:U.data)!=null&&H.old_password?p.value=ht.response.data.old_password[0]:($=(N=ht.response)==null?void 0:N.data)!=null&&$.password?p.value=ht.response.data.password[0]:((q=ht.response)==null?void 0:q.status)===401?(p.value="Session expirée, veuillez vous reconnecter",await s.logout(),n.push("/login")):p.value="Une erreur est survenue lors du changement de mot de passe"}finally{h.value=!1}}return(M,k)=>(It(),jt("div",$4,[E("div",G4,[k[12]||(k[12]=E("div",null,[E("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),E("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),E("form",{class:"mt-8 space-y-6",onSubmit:Xo(v,["prevent"])},[E("div",V4,[E("div",null,[k[3]||(k[3]=E("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),E("div",H4,[Ie(E("input",{id:"old-password","onUpdate:modelValue":k[0]||(k[0]=P=>l.oldPassword=P),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[We,l.oldPassword]])])]),E("div",null,[k[4]||(k[4]=E("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),E("div",Z4,[Ie(E("input",{id:"new-password","onUpdate:modelValue":k[1]||(k[1]=P=>l.newPassword=P),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[We,l.newPassword]])]),k[5]||(k[5]=E("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),E("div",null,[k[6]||(k[6]=E("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),E("div",q4,[Ie(E("input",{id:"confirm-password","onUpdate:modelValue":k[2]||(k[2]=P=>l.confirmPassword=P),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[We,l.confirmPassword]])])])]),p.value?(It(),jt("div",K4,[E("div",W4,[k[7]||(k[7]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",J4,[E("h3",X4,Kt(p.value),1)])])])):ge("",!0),f.value.length>0?(It(),jt("div",Y4,[E("div",Q4,[k[9]||(k[9]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),E("div",tb,[k[8]||(k[8]=E("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),E("div",eb,[E("ul",ib,[(It(!0),jt(Ze,null,Oi(f.value,(P,U)=>(It(),jt("li",{key:U},Kt(P),1))),128))])])])])])):ge("",!0),E("div",null,[E("button",{type:"submit",disabled:h.value||!y.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[E("span",rb,[h.value?(It(),jt("svg",ob,k[11]||(k[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(It(),jt("svg",sb,k[10]||(k[10]=[E("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),li(" "+Kt(h.value?"Modification en cours...":"Changer le mot de passe"),1)],8,nb)])],32)])]))}}),lb={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},ub={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},cb={class:"bg-white py-8 px-4 shadow-sm rounded-lg sm:px-10"},hb={key:0,class:"rounded-md bg-red-50 p-4"},db={class:"flex"},fb={class:"ml-3"},pb={class:"text-sm font-medium text-red-800"},mb={class:"mt-1"},gb={class:"mt-1"},_b={class:"flex items-center justify-between"},yb={class:"flex items-center"},vb={class:"text-sm"},bb=["disabled"],xb={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},wb=Xi({__name:"LoginView",setup(t){const n=zs(),s=Ji(),l=ie(!1),h=ie(null),p=Qn({username:"",password:"",rememberMe:!1});Lr(()=>{var y;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(y=window.INITIAL_STATE)!=null&&y.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),n.push("/"))});async function f(){var y,v,M,k,P,U;l.value=!0,h.value=null;try{if(!p.username||!p.password){h.value="Veuillez remplir tous les champs";return}await s.login(p.username,p.password),(y=s.user)!=null&&y.must_change_password?n.push("/change-password"):n.push("/")}catch(H){console.error("Login error:",H),h.value=((M=(v=H==null?void 0:H.response)==null?void 0:v.data)==null?void 0:M.detail)||((U=(P=(k=H==null?void 0:H.response)==null?void 0:k.data)==null?void 0:P.non_field_errors)==null?void 0:U[0])||(H==null?void 0:H.message)||"Erreur lors de la connexion"}finally{l.value=!1}}return(y,v)=>{const M=m0("router-link");return It(),jt("div",lb,[v[9]||(v[9]=E("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[E("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," IrrigationDesign "),E("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),E("div",ub,[E("div",cb,[E("form",{class:"space-y-6",onSubmit:Xo(f,["prevent"])},[h.value?(It(),jt("div",hb,[E("div",db,[v[3]||(v[3]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",fb,[E("h3",pb,Kt(h.value),1)])])])):ge("",!0),E("div",null,[v[4]||(v[4]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),E("div",mb,[Ie(E("input",{id:"username","onUpdate:modelValue":v[0]||(v[0]=k=>p.username=k),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[We,p.username]])])]),E("div",null,[v[5]||(v[5]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),E("div",gb,[Ie(E("input",{id:"password","onUpdate:modelValue":v[1]||(v[1]=k=>p.password=k),name:"password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Mot de passe"},null,512),[[We,p.password]])])]),E("div",_b,[E("div",yb,[Ie(E("input",{id:"remember-me","onUpdate:modelValue":v[2]||(v[2]=k=>p.rememberMe=k),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Mg,p.rememberMe]]),v[6]||(v[6]=E("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),E("div",vb,[ai(M,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Bo(()=>v[7]||(v[7]=[li(" Mot de passe oublié ? ")])),_:1})])]),E("div",null,[E("button",{type:"submit",disabled:l.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[l.value?(It(),jt("svg",xb,v[8]||(v[8]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ge("",!0),li(" "+Kt(l.value?"Connexion en cours...":"Se connecter"),1)],8,bb)])],32)])])])}}});var _c={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,n){(function(s,l){l(n)})(Xn,function(s){var l="1.9.4";function h(e){var o,c,m,x;for(c=1,m=arguments.length;c<m;c++){x=arguments[c];for(o in x)e[o]=x[o]}return e}var p=Object.create||function(){function e(){}return function(o){return e.prototype=o,new e}}();function f(e,o){var c=Array.prototype.slice;if(e.bind)return e.bind.apply(e,c.call(arguments,1));var m=c.call(arguments,2);return function(){return e.apply(o,m.length?m.concat(c.call(arguments)):arguments)}}var y=0;function v(e){return"_leaflet_id"in e||(e._leaflet_id=++y),e._leaflet_id}function M(e,o,c){var m,x,S,V;return V=function(){m=!1,x&&(S.apply(c,x),x=!1)},S=function(){m?x=arguments:(e.apply(c,arguments),setTimeout(V,o),m=!0)},S}function k(e,o,c){var m=o[1],x=o[0],S=m-x;return e===m&&c?e:((e-x)%S+S)%S+x}function P(){return!1}function U(e,o){if(o===!1)return e;var c=Math.pow(10,o===void 0?6:o);return Math.round(e*c)/c}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function N(e){return H(e).split(/\s+/)}function $(e,o){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?p(e.options):{});for(var c in o)e.options[c]=o[c];return e.options}function q(e,o,c){var m=[];for(var x in e)m.push(encodeURIComponent(c?x.toUpperCase():x)+"="+encodeURIComponent(e[x]));return(!o||o.indexOf("?")===-1?"?":"&")+m.join("&")}var ht=/\{ *([\w_ -]+) *\}/g;function mt(e,o){return e.replace(ht,function(c,m){var x=o[m];if(x===void 0)throw new Error("No value provided for variable "+c);return typeof x=="function"&&(x=x(o)),x})}var X=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function J(e,o){for(var c=0;c<e.length;c++)if(e[c]===o)return c;return-1}var et="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function nt(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var dt=0;function Tt(e){var o=+new Date,c=Math.max(0,16-(o-dt));return dt=o+c,window.setTimeout(e,c)}var Lt=window.requestAnimationFrame||nt("RequestAnimationFrame")||Tt,Mt=window.cancelAnimationFrame||nt("CancelAnimationFrame")||nt("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function vt(e,o,c){if(c&&Lt===Tt)e.call(o);else return Lt.call(window,f(e,o))}function Bt(e){e&&Mt.call(window,e)}var ut={__proto__:null,extend:h,create:p,bind:f,get lastId(){return y},stamp:v,throttle:M,wrapNum:k,falseFn:P,formatNum:U,trim:H,splitWords:N,setOptions:$,getParamString:q,template:mt,isArray:X,indexOf:J,emptyImageUrl:et,requestFn:Lt,cancelFn:Mt,requestAnimFrame:vt,cancelAnimFrame:Bt};function Ct(){}Ct.extend=function(e){var o=function(){$(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,m=p(c);m.constructor=o,o.prototype=m;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(o[x]=this[x]);return e.statics&&h(o,e.statics),e.includes&&(Vt(e.includes),h.apply(null,[m].concat(e.includes))),h(m,e),delete m.statics,delete m.includes,m.options&&(m.options=c.options?p(c.options):{},h(m.options,e.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,V=m._initHooks.length;S<V;S++)m._initHooks[S].call(this)}},o},Ct.include=function(e){var o=this.prototype.options;return h(this.prototype,e),e.options&&(this.prototype.options=o,this.mergeOptions(e.options)),this},Ct.mergeOptions=function(e){return h(this.prototype.options,e),this},Ct.addInitHook=function(e){var o=Array.prototype.slice.call(arguments,1),c=typeof e=="function"?e:function(){this[e].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Vt(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=X(e)?e:[e];for(var o=0;o<e.length;o++)e[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Dt={on:function(e,o,c){if(typeof e=="object")for(var m in e)this._on(m,e[m],o);else{e=N(e);for(var x=0,S=e.length;x<S;x++)this._on(e[x],o,c)}return this},off:function(e,o,c){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var m in e)this._off(m,e[m],o);else{e=N(e);for(var x=arguments.length===1,S=0,V=e.length;S<V;S++)x?this._off(e[S]):this._off(e[S],o,c)}return this},_on:function(e,o,c,m){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(e,o,c)===!1){c===this&&(c=void 0);var x={fn:o,ctx:c};m&&(x.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(x)}},_off:function(e,o,c){var m,x,S;if(this._events&&(m=this._events[e],!!m)){if(arguments.length===1){if(this._firingCount)for(x=0,S=m.length;x<S;x++)m[x].fn=P;delete this._events[e];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var V=this._listens(e,o,c);if(V!==!1){var rt=m[V];this._firingCount&&(rt.fn=P,this._events[e]=m=m.slice()),m.splice(V,1)}}},fire:function(e,o,c){if(!this.listens(e,c))return this;var m=h({},o,{type:e,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var x=this._events[e];if(x){this._firingCount=this._firingCount+1||1;for(var S=0,V=x.length;S<V;S++){var rt=x[S],gt=rt.fn;rt.once&&this.off(e,gt,rt.ctx),gt.call(rt.ctx||this,m)}this._firingCount--}}return c&&this._propagateEvent(m),this},listens:function(e,o,c,m){typeof e!="string"&&console.warn('"string" type argument expected');var x=o;typeof o!="function"&&(m=!!o,x=void 0,c=void 0);var S=this._events&&this._events[e];if(S&&S.length&&this._listens(e,x,c)!==!1)return!0;if(m){for(var V in this._eventParents)if(this._eventParents[V].listens(e,o,c,m))return!0}return!1},_listens:function(e,o,c){if(!this._events)return!1;var m=this._events[e]||[];if(!o)return!!m.length;c===this&&(c=void 0);for(var x=0,S=m.length;x<S;x++)if(m[x].fn===o&&m[x].ctx===c)return x;return!1},once:function(e,o,c){if(typeof e=="object")for(var m in e)this._on(m,e[m],o,!0);else{e=N(e);for(var x=0,S=e.length;x<S;x++)this._on(e[x],o,c,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[v(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[v(e)],this},_propagateEvent:function(e){for(var o in this._eventParents)this._eventParents[o].fire(e.type,h({layer:e.target,propagatedFrom:e.target},e),!0)}};Dt.addEventListener=Dt.on,Dt.removeEventListener=Dt.clearAllEventListeners=Dt.off,Dt.addOneTimeEventListener=Dt.once,Dt.fireEvent=Dt.fire,Dt.hasEventListeners=Dt.listens;var Jt=Ct.extend(Dt);function zt(e,o,c){this.x=c?Math.round(e):e,this.y=c?Math.round(o):o}var Yt=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};zt.prototype={clone:function(){return new zt(this.x,this.y)},add:function(e){return this.clone()._add(lt(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(lt(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new zt(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new zt(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Yt(this.x),this.y=Yt(this.y),this},distanceTo:function(e){e=lt(e);var o=e.x-this.x,c=e.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(e){return e=lt(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=lt(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+U(this.x)+", "+U(this.y)+")"}};function lt(e,o,c){return e instanceof zt?e:X(e)?new zt(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new zt(e.x,e.y):new zt(e,o,c)}function Gt(e,o){if(e)for(var c=o?[e,o]:e,m=0,x=c.length;m<x;m++)this.extend(c[m])}Gt.prototype={extend:function(e){var o,c;if(!e)return this;if(e instanceof zt||typeof e[0]=="number"||"x"in e)o=c=lt(e);else if(e=Et(e),o=e.min,c=e.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(e){return lt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return lt(this.min.x,this.max.y)},getTopRight:function(){return lt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var o,c;return typeof e[0]=="number"||e instanceof zt?e=lt(e):e=Et(e),e instanceof Gt?(o=e.min,c=e.max):o=c=e,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(e){e=Et(e);var o=this.min,c=this.max,m=e.min,x=e.max,S=x.x>=o.x&&m.x<=c.x,V=x.y>=o.y&&m.y<=c.y;return S&&V},overlaps:function(e){e=Et(e);var o=this.min,c=this.max,m=e.min,x=e.max,S=x.x>o.x&&m.x<c.x,V=x.y>o.y&&m.y<c.y;return S&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var o=this.min,c=this.max,m=Math.abs(o.x-c.x)*e,x=Math.abs(o.y-c.y)*e;return Et(lt(o.x-m,o.y-x),lt(c.x+m,c.y+x))},equals:function(e){return e?(e=Et(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function Et(e,o){return!e||e instanceof Gt?e:new Gt(e,o)}function ne(e,o){if(e)for(var c=o?[e,o]:e,m=0,x=c.length;m<x;m++)this.extend(c[m])}ne.prototype={extend:function(e){var o=this._southWest,c=this._northEast,m,x;if(e instanceof le)m=e,x=e;else if(e instanceof ne){if(m=e._southWest,x=e._northEast,!m||!x)return this}else return e?this.extend(re(e)||$t(e)):this;return!o&&!c?(this._southWest=new le(m.lat,m.lng),this._northEast=new le(x.lat,x.lng)):(o.lat=Math.min(m.lat,o.lat),o.lng=Math.min(m.lng,o.lng),c.lat=Math.max(x.lat,c.lat),c.lng=Math.max(x.lng,c.lng)),this},pad:function(e){var o=this._southWest,c=this._northEast,m=Math.abs(o.lat-c.lat)*e,x=Math.abs(o.lng-c.lng)*e;return new ne(new le(o.lat-m,o.lng-x),new le(c.lat+m,c.lng+x))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof le||"lat"in e?e=re(e):e=$t(e);var o=this._southWest,c=this._northEast,m,x;return e instanceof ne?(m=e.getSouthWest(),x=e.getNorthEast()):m=x=e,m.lat>=o.lat&&x.lat<=c.lat&&m.lng>=o.lng&&x.lng<=c.lng},intersects:function(e){e=$t(e);var o=this._southWest,c=this._northEast,m=e.getSouthWest(),x=e.getNorthEast(),S=x.lat>=o.lat&&m.lat<=c.lat,V=x.lng>=o.lng&&m.lng<=c.lng;return S&&V},overlaps:function(e){e=$t(e);var o=this._southWest,c=this._northEast,m=e.getSouthWest(),x=e.getNorthEast(),S=x.lat>o.lat&&m.lat<c.lat,V=x.lng>o.lng&&m.lng<c.lng;return S&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,o){return e?(e=$t(e),this._southWest.equals(e.getSouthWest(),o)&&this._northEast.equals(e.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function $t(e,o){return e instanceof ne?e:new ne(e,o)}function le(e,o,c){if(isNaN(e)||isNaN(o))throw new Error("Invalid LatLng object: ("+e+", "+o+")");this.lat=+e,this.lng=+o,c!==void 0&&(this.alt=+c)}le.prototype={equals:function(e,o){if(!e)return!1;e=re(e);var c=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return c<=(o===void 0?1e-9:o)},toString:function(e){return"LatLng("+U(this.lat,e)+", "+U(this.lng,e)+")"},distanceTo:function(e){return Ut.distance(this,re(e))},wrap:function(){return Ut.wrapLatLng(this)},toBounds:function(e){var o=180*e/40075017,c=o/Math.cos(Math.PI/180*this.lat);return $t([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function re(e,o,c){return e instanceof le?e:X(e)&&typeof e[0]!="object"?e.length===3?new le(e[0],e[1],e[2]):e.length===2?new le(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new le(e.lat,"lng"in e?e.lng:e.lon,e.alt):o===void 0?null:new le(e,o,c)}var bt={latLngToPoint:function(e,o){var c=this.projection.project(e),m=this.scale(o);return this.transformation._transform(c,m)},pointToLatLng:function(e,o){var c=this.scale(o),m=this.transformation.untransform(e,c);return this.projection.unproject(m)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(e),m=this.transformation.transform(o.min,c),x=this.transformation.transform(o.max,c);return new Gt(m,x)},infinite:!1,wrapLatLng:function(e){var o=this.wrapLng?k(e.lng,this.wrapLng,!0):e.lng,c=this.wrapLat?k(e.lat,this.wrapLat,!0):e.lat,m=e.alt;return new le(c,o,m)},wrapLatLngBounds:function(e){var o=e.getCenter(),c=this.wrapLatLng(o),m=o.lat-c.lat,x=o.lng-c.lng;if(m===0&&x===0)return e;var S=e.getSouthWest(),V=e.getNorthEast(),rt=new le(S.lat-m,S.lng-x),gt=new le(V.lat-m,V.lng-x);return new ne(rt,gt)}},Ut=h({},bt,{wrapLng:[-180,180],R:6371e3,distance:function(e,o){var c=Math.PI/180,m=e.lat*c,x=o.lat*c,S=Math.sin((o.lat-e.lat)*c/2),V=Math.sin((o.lng-e.lng)*c/2),rt=S*S+Math.cos(m)*Math.cos(x)*V*V,gt=2*Math.atan2(Math.sqrt(rt),Math.sqrt(1-rt));return this.R*gt}}),Nt=6378137,Wt={R:Nt,MAX_LATITUDE:85.0511287798,project:function(e){var o=Math.PI/180,c=this.MAX_LATITUDE,m=Math.max(Math.min(c,e.lat),-c),x=Math.sin(m*o);return new zt(this.R*e.lng*o,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(e){var o=180/Math.PI;return new le((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*o,e.x*o/this.R)},bounds:function(){var e=Nt*Math.PI;return new Gt([-e,-e],[e,e])}()};function Le(e,o,c,m){if(X(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=o,this._c=c,this._d=m}Le.prototype={transform:function(e,o){return this._transform(e.clone(),o)},_transform:function(e,o){return o=o||1,e.x=o*(this._a*e.x+this._b),e.y=o*(this._c*e.y+this._d),e},untransform:function(e,o){return o=o||1,new zt((e.x/o-this._b)/this._a,(e.y/o-this._d)/this._c)}};function F(e,o,c,m){return new Le(e,o,c,m)}var G=h({},Ut,{code:"EPSG:3857",projection:Wt,transformation:function(){var e=.5/(Math.PI*Wt.R);return F(e,.5,-e,.5)}()}),it=h({},G,{code:"EPSG:900913"});function yt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function wt(e,o){var c="",m,x,S,V,rt,gt;for(m=0,S=e.length;m<S;m++){for(rt=e[m],x=0,V=rt.length;x<V;x++)gt=rt[x],c+=(x?"L":"M")+gt.x+" "+gt.y;c+=o?se.svg?"z":"x":""}return c||"M0 0"}var xt=document.documentElement.style,Rt="ActiveXObject"in window,Ot=Rt&&!document.addEventListener,Ft="msLaunchUri"in navigator&&!("documentMode"in document),At=Vi("webkit"),ue=Vi("android"),Zt=Vi("android 2")||Vi("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),de=ue&&Vi("Google")&&oe<537&&!("AudioNode"in window),xe=!!window.opera,Te=!Ft&&Vi("chrome"),Pe=Vi("gecko")&&!At&&!xe&&!Rt,ui=!Te&&Vi("safari"),ei=Vi("phantom"),Mi="OTransition"in xt,ri=navigator.platform.indexOf("Win")===0,bn=Rt&&"transition"in xt,On="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zt,Je="MozPerspective"in xt,Pi=!window.L_DISABLE_3D&&(bn||On||Je)&&!Mi&&!ei,Yi=typeof orientation<"u"||Vi("mobile"),Fl=Yi&&At,zl=Yi&&On,Ns=!window.PointerEvent&&window.MSPointerEvent,ta=!!(window.PointerEvent||Ns),ea="ontouchstart"in window||!!window.TouchEvent,Nl=!window.L_NO_TOUCH&&(ea||ta),jl=Yi&&xe,ia=Yi&&Pe,na=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ul=function(){var e=!1;try{var o=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",P,o),window.removeEventListener("testPassiveEventSupport",P,o)}catch{}return e}(),$l=function(){return!!document.createElement("canvas").getContext}(),js=!!(document.createElementNS&&yt("svg").createSVGRect),ra=!!js&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Gl=!js&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var o=e.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Vl=navigator.platform.indexOf("Mac")===0,Hl=navigator.platform.indexOf("Linux")===0;function Vi(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var se={ie:Rt,ielt9:Ot,edge:Ft,webkit:At,android:ue,android23:Zt,androidStock:de,opera:xe,chrome:Te,gecko:Pe,safari:ui,phantom:ei,opera12:Mi,win:ri,ie3d:bn,webkit3d:On,gecko3d:Je,any3d:Pi,mobile:Yi,mobileWebkit:Fl,mobileWebkit3d:zl,msPointer:Ns,pointer:ta,touch:Nl,touchNative:ea,mobileOpera:jl,mobileGecko:ia,retina:na,passiveEvents:Ul,canvas:$l,svg:js,vml:Gl,inlineSvg:ra,mac:Vl,linux:Hl},sa=se.msPointer?"MSPointerDown":"pointerdown",oa=se.msPointer?"MSPointerMove":"pointermove",Us=se.msPointer?"MSPointerUp":"pointerup",aa=se.msPointer?"MSPointerCancel":"pointercancel",$s={touchstart:sa,touchmove:oa,touchend:Us,touchcancel:aa},la={touchstart:Jl,touchmove:Xr,touchend:Xr,touchcancel:Xr},er={},ua=!1;function Zl(e,o,c){return o==="touchstart"&&Gs(),la[o]?(c=la[o].bind(this,c),e.addEventListener($s[o],c,!1),c):(console.warn("wrong event specified:",o),P)}function ql(e,o,c){if(!$s[o]){console.warn("wrong event specified:",o);return}e.removeEventListener($s[o],c,!1)}function Kl(e){er[e.pointerId]=e}function Wl(e){er[e.pointerId]&&(er[e.pointerId]=e)}function Jr(e){delete er[e.pointerId]}function Gs(){ua||(document.addEventListener(sa,Kl,!0),document.addEventListener(oa,Wl,!0),document.addEventListener(Us,Jr,!0),document.addEventListener(aa,Jr,!0),ua=!0)}function Xr(e,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in er)o.touches.push(er[c]);o.changedTouches=[o],e(o)}}function Jl(e,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&si(o),Xr(e,o)}function Xl(e){var o={},c,m;for(m in e)c=e[m],o[m]=c&&c.bind?c.bind(e):c;return e=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Yl=200;function Ql(e,o){e.addEventListener("dblclick",o);var c=0,m;function x(S){if(S.detail!==1){m=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var V=pa(S);if(!(V.some(function(gt){return gt instanceof HTMLLabelElement&&gt.attributes.for})&&!V.some(function(gt){return gt instanceof HTMLInputElement||gt instanceof HTMLSelectElement}))){var rt=Date.now();rt-c<=Yl?(m++,m===2&&o(Xl(S))):m=1,c=rt}}}return e.addEventListener("click",x),{dblclick:o,simDblclick:x}}function tu(e,o){e.removeEventListener("dblclick",o.dblclick),e.removeEventListener("click",o.simDblclick)}var Vs=Qr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Cr=Qr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ca=Cr==="webkitTransition"||Cr==="OTransition"?Cr+"End":"transitionend";function ha(e){return typeof e=="string"?document.getElementById(e):e}function xn(e,o){var c=e.style[o]||e.currentStyle&&e.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(e,null);c=m?m[o]:null}return c==="auto"?null:c}function Be(e,o,c){var m=document.createElement(e);return m.className=o||"",c&&c.appendChild(m),m}function $e(e){var o=e.parentNode;o&&o.removeChild(e)}function Er(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ir(e){var o=e.parentNode;o&&o.lastChild!==e&&o.appendChild(e)}function In(e){var o=e.parentNode;o&&o.firstChild!==e&&o.insertBefore(e,o.firstChild)}function Hs(e,o){if(e.classList!==void 0)return e.classList.contains(o);var c=Yr(e);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function ye(e,o){if(e.classList!==void 0)for(var c=N(o),m=0,x=c.length;m<x;m++)e.classList.add(c[m]);else if(!Hs(e,o)){var S=Yr(e);Zs(e,(S?S+" ":"")+o)}}function qe(e,o){e.classList!==void 0?e.classList.remove(o):Zs(e,H((" "+Yr(e)+" ").replace(" "+o+" "," ")))}function Zs(e,o){e.className.baseVal===void 0?e.className=o:e.className.baseVal=o}function Yr(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function Ii(e,o){"opacity"in e.style?e.style.opacity=o:"filter"in e.style&&eu(e,o)}function eu(e,o){var c=!1,m="DXImageTransform.Microsoft.Alpha";try{c=e.filters.item(m)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):e.style.filter+=" progid:"+m+"(opacity="+o+")"}function Qr(e){for(var o=document.documentElement.style,c=0;c<e.length;c++)if(e[c]in o)return e[c];return!1}function Fn(e,o,c){var m=o||new zt(0,0);e.style[Vs]=(se.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(c?" scale("+c+")":"")}function Xe(e,o){e._leaflet_pos=o,se.any3d?Fn(e,o):(e.style.left=o.x+"px",e.style.top=o.y+"px")}function zn(e){return e._leaflet_pos||new zt(0,0)}var kr,Mr,qs;if("onselectstart"in document)kr=function(){_e(window,"selectstart",si)},Mr=function(){Fe(window,"selectstart",si)};else{var nr=Qr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);kr=function(){if(nr){var e=document.documentElement.style;qs=e[nr],e[nr]="none"}},Mr=function(){nr&&(document.documentElement.style[nr]=qs,qs=void 0)}}function Ks(){_e(window,"dragstart",si)}function Ws(){Fe(window,"dragstart",si)}var ts,Js;function Xs(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(es(),ts=e,Js=e.style.outlineStyle,e.style.outlineStyle="none",_e(window,"keydown",es))}function es(){ts&&(ts.style.outlineStyle=Js,ts=void 0,Js=void 0,Fe(window,"keydown",es))}function da(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Ys(e){var o=e.getBoundingClientRect();return{x:o.width/e.offsetWidth||1,y:o.height/e.offsetHeight||1,boundingClientRect:o}}var iu={__proto__:null,TRANSFORM:Vs,TRANSITION:Cr,TRANSITION_END:ca,get:ha,getStyle:xn,create:Be,remove:$e,empty:Er,toFront:ir,toBack:In,hasClass:Hs,addClass:ye,removeClass:qe,setClass:Zs,getClass:Yr,setOpacity:Ii,testProp:Qr,setTransform:Fn,setPosition:Xe,getPosition:zn,get disableTextSelection(){return kr},get enableTextSelection(){return Mr},disableImageDrag:Ks,enableImageDrag:Ws,preventOutline:Xs,restoreOutline:es,getSizedParentNode:da,getScale:Ys};function _e(e,o,c,m){if(o&&typeof o=="object")for(var x in o)to(e,x,o[x],c);else{o=N(o);for(var S=0,V=o.length;S<V;S++)to(e,o[S],c,m)}return this}var Qi="_leaflet_events";function Fe(e,o,c,m){if(arguments.length===1)fa(e),delete e[Qi];else if(o&&typeof o=="object")for(var x in o)wn(e,x,o[x],c);else if(o=N(o),arguments.length===2)fa(e,function(rt){return J(o,rt)!==-1});else for(var S=0,V=o.length;S<V;S++)wn(e,o[S],c,m);return this}function fa(e,o){for(var c in e[Qi]){var m=c.split(/\d/)[0];(!o||o(m))&&wn(e,m,null,null,c)}}var Qs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function to(e,o,c,m){var x=o+v(c)+(m?"_"+v(m):"");if(e[Qi]&&e[Qi][x])return this;var S=function(rt){return c.call(m||e,rt||window.event)},V=S;!se.touchNative&&se.pointer&&o.indexOf("touch")===0?S=Zl(e,o,S):se.touch&&o==="dblclick"?S=Ql(e,S):"addEventListener"in e?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?e.addEventListener(Qs[o]||o,S,se.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(S=function(rt){rt=rt||window.event,io(e,rt)&&V(rt)},e.addEventListener(Qs[o],S,!1)):e.addEventListener(o,V,!1):e.attachEvent("on"+o,S),e[Qi]=e[Qi]||{},e[Qi][x]=S}function wn(e,o,c,m,x){x=x||o+v(c)+(m?"_"+v(m):"");var S=e[Qi]&&e[Qi][x];if(!S)return this;!se.touchNative&&se.pointer&&o.indexOf("touch")===0?ql(e,o,S):se.touch&&o==="dblclick"?tu(e,S):"removeEventListener"in e?e.removeEventListener(Qs[o]||o,S,!1):e.detachEvent("on"+o,S),e[Qi][x]=null}function Nn(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function eo(e){return to(e,"wheel",Nn),this}function Pr(e){return _e(e,"mousedown touchstart dblclick contextmenu",Nn),e._leaflet_disable_click=!0,this}function si(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function jn(e){return si(e),Nn(e),this}function pa(e){if(e.composedPath)return e.composedPath();for(var o=[],c=e.target;c;)o.push(c),c=c.parentNode;return o}function ma(e,o){if(!o)return new zt(e.clientX,e.clientY);var c=Ys(o),m=c.boundingClientRect;return new zt((e.clientX-m.left)/c.x-o.clientLeft,(e.clientY-m.top)/c.y-o.clientTop)}var nu=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ga(e){return se.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/nu:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function io(e,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==e;)c=c.parentNode}catch{return!1}return c!==e}var is={__proto__:null,on:_e,off:Fe,stopPropagation:Nn,disableScrollPropagation:eo,disableClickPropagation:Pr,preventDefault:si,stop:jn,getPropagationPath:pa,getMousePosition:ma,getWheelDelta:ga,isExternalTarget:io,addListener:_e,removeListener:Fe},_a=Jt.extend({run:function(e,o,c,m){this.stop(),this._el=e,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=zn(e),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=vt(this._animate,this),this._step()},_step:function(e){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),e):(this._runFrame(1),this._complete())},_runFrame:function(e,o){var c=this._startPos.add(this._offset.multiplyBy(e));o&&c._round(),Xe(this._el,c),this.fire("step")},_complete:function(){Bt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),Ce=Jt.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,o){o=$(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(re(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Cr&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_e(this._proxy,ca,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),e=this._limitCenter(re(e),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=h({animate:c.animate},c.zoom),c.pan=h({animate:c.animate,duration:c.duration},c.pan));var m=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,o,c.zoom):this._tryAnimatedPan(e,c.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(e,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(e,o){return this._loaded?this.setView(this.getCenter(),e,{zoom:o}):(this._zoom=e,this)},zoomIn:function(e,o){return e=e||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,o)},zoomOut:function(e,o){return e=e||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,o)},setZoomAround:function(e,o,c){var m=this.getZoomScale(o),x=this.getSize().divideBy(2),S=e instanceof zt?e:this.latLngToContainerPoint(e),V=S.subtract(x).multiplyBy(1-1/m),rt=this.containerPointToLatLng(x.add(V));return this.setView(rt,o,{zoom:c})},_getBoundsCenterZoom:function(e,o){o=o||{},e=e.getBounds?e.getBounds():$t(e);var c=lt(o.paddingTopLeft||o.padding||[0,0]),m=lt(o.paddingBottomRight||o.padding||[0,0]),x=this.getBoundsZoom(e,!1,c.add(m));if(x=typeof o.maxZoom=="number"?Math.min(o.maxZoom,x):x,x===1/0)return{center:e.getCenter(),zoom:x};var S=m.subtract(c).divideBy(2),V=this.project(e.getSouthWest(),x),rt=this.project(e.getNorthEast(),x),gt=this.unproject(V.add(rt).divideBy(2).add(S),x);return{center:gt,zoom:x}},fitBounds:function(e,o){if(e=$t(e),!e.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(e,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,o){return this.setView(e,this._zoom,{pan:o})},panBy:function(e,o){if(e=lt(e).round(),o=o||{},!e.x&&!e.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _a,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){ye(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,o,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(e,o,c);this._stop();var m=this.project(this.getCenter()),x=this.project(e),S=this.getSize(),V=this._zoom;e=re(e),o=o===void 0?V:o;var rt=Math.max(S.x,S.y),gt=rt*this.getZoomScale(V,o),Pt=x.distanceTo(m)||1,qt=1.42,ce=qt*qt;function we(Ke){var Fr=Ke?-1:1,Eu=Ke?gt:rt,on=gt*gt-rt*rt+Fr*ce*ce*Pt*Pt,ku=2*Eu*ce*Pt,cr=on/ku,go=Math.sqrt(cr*cr+1)-cr,Mu=go<1e-9?-18:Math.log(go);return Mu}function gi(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function ii(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}function xi(Ke){return gi(Ke)/ii(Ke)}var He=we(0);function sn(Ke){return rt*(ii(He)/ii(He+qt*Ke))}function mo(Ke){return rt*(ii(He)*xi(He+qt*Ke)-gi(He))/ce}function ws(Ke){return 1-Math.pow(1-Ke,1.5)}var Ta=Date.now(),Ir=(we(1)-He)/qt,Cu=c.duration?1e3*c.duration:1e3*Ir*.8;function Da(){var Ke=(Date.now()-Ta)/Cu,Fr=ws(Ke)*Ir;Ke<=1?(this._flyToFrame=vt(Da,this),this._move(this.unproject(m.add(x.subtract(m).multiplyBy(mo(Fr)/Pt)),V),this.getScaleZoom(rt/sn(Fr),V),{flyTo:!0})):this._move(e,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Da.call(this),this},flyToBounds:function(e,o){var c=this._getBoundsCenterZoom(e,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(e){return e=$t(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var o=this.options.minZoom;return this.options.minZoom=e,this._loaded&&o!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var o=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&o!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,o){this._enforcingBounds=!0;var c=this.getCenter(),m=this._limitCenter(c,this._zoom,$t(e));return c.equals(m)||this.panTo(m,o),this._enforcingBounds=!1,this},panInside:function(e,o){o=o||{};var c=lt(o.paddingTopLeft||o.padding||[0,0]),m=lt(o.paddingBottomRight||o.padding||[0,0]),x=this.project(this.getCenter()),S=this.project(e),V=this.getPixelBounds(),rt=Et([V.min.add(c),V.max.subtract(m)]),gt=rt.getSize();if(!rt.contains(S)){this._enforcingBounds=!0;var Pt=S.subtract(rt.getCenter()),qt=rt.extend(S).getSize().subtract(gt);x.x+=Pt.x<0?-qt.x:qt.x,x.y+=Pt.y<0?-qt.y:qt.y,this.panTo(this.unproject(x),o),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=h({animate:!1,pan:!0},e===!0?{animate:!0}:e);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),m=o.divideBy(2).round(),x=c.divideBy(2).round(),S=m.subtract(x);return!S.x&&!S.y?this:(e.animate&&e.pan?this.panBy(S):(e.pan&&this._rawPanBy(S),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=h({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=f(this._handleGeolocationResponse,this),c=f(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,e):navigator.geolocation.getCurrentPosition(o,c,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var o=e.code,c=e.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var o=e.coords.latitude,c=e.coords.longitude,m=new le(o,c),x=m.toBounds(e.coords.accuracy*2),S=this._locateOptions;if(S.setView){var V=this.getBoundsZoom(x);this.setView(m,S.maxZoom?Math.min(V,S.maxZoom):V)}var rt={latlng:m,bounds:x,timestamp:e.timestamp};for(var gt in e.coords)typeof e.coords[gt]=="number"&&(rt[gt]=e.coords[gt]);this.fire("locationfound",rt)}},addHandler:function(e,o){if(!o)return this;var c=this[e]=new o(this);return this._handlers.push(c),this.options[e]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Bt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)$e(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,o){var c="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),m=Be("div",c,o||this._mapPane);return e&&(this._panes[e]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),o=this.unproject(e.getBottomLeft()),c=this.unproject(e.getTopRight());return new ne(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,o,c){e=$t(e),c=lt(c||[0,0]);var m=this.getZoom()||0,x=this.getMinZoom(),S=this.getMaxZoom(),V=e.getNorthWest(),rt=e.getSouthEast(),gt=this.getSize().subtract(c),Pt=Et(this.project(rt,m),this.project(V,m)).getSize(),qt=se.any3d?this.options.zoomSnap:1,ce=gt.x/Pt.x,we=gt.y/Pt.y,gi=o?Math.max(ce,we):Math.min(ce,we);return m=this.getScaleZoom(gi,m),qt&&(m=Math.round(m/(qt/100))*(qt/100),m=o?Math.ceil(m/qt)*qt:Math.floor(m/qt)*qt),Math.max(x,Math.min(S,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new zt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,o){var c=this._getTopLeftPoint(e,o);return new Gt(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(e)/c.scale(o)},getScaleZoom:function(e,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var m=c.zoom(e*c.scale(o));return isNaN(m)?1/0:m},project:function(e,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(re(e),o)},unproject:function(e,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(lt(e),o)},layerPointToLatLng:function(e){var o=lt(e).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(e){var o=this.project(re(e))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(re(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds($t(e))},distance:function(e,o){return this.options.crs.distance(re(e),re(o))},containerPointToLayerPoint:function(e){return lt(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return lt(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var o=this.containerPointToLayerPoint(lt(e));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(re(e)))},mouseEventToContainerPoint:function(e){return ma(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var o=this._container=ha(e);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_e(o,"scroll",this._onScroll,this),this._containerId=v(o)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ye(e,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=xn(e,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xe(this._mapPane,new zt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ye(e.markerPane,"leaflet-zoom-hide"),ye(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,o,c){Xe(this._mapPane,new zt(0,0));var m=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var x=this._zoom!==o;this._moveStart(x,c)._move(e,o)._moveEnd(x),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(e,o){return e&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(e,o,c,m){o===void 0&&(o=this._zoom);var x=this._zoom!==o;return this._zoom=o,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),m?c&&c.pinch&&this.fire("zoom",c):((x||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Bt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Xe(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[v(this._container)]=this;var o=e?Fe:_e;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Bt(this._resizeRequest),this._resizeRequest=vt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,o){for(var c=[],m,x=o==="mouseout"||o==="mouseover",S=e.target||e.srcElement,V=!1;S;){if(m=this._targets[v(S)],m&&(o==="click"||o==="preclick")&&this._draggableMoved(m)){V=!0;break}if(m&&m.listens(o,!0)&&(x&&!io(S,e)||(c.push(m),x))||S===this._container)break;S=S.parentNode}return!c.length&&!V&&!x&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var o=e.target||e.srcElement;if(!(!this._loaded||o._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(o))){var c=e.type;c==="mousedown"&&Xs(o),this._fireDOMEvent(e,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,o,c){if(e.type==="click"){var m=h({},e);m.type="preclick",this._fireDOMEvent(m,m.type,c)}var x=this._findEventTargets(e,o);if(c){for(var S=[],V=0;V<c.length;V++)c[V].listens(o,!0)&&S.push(c[V]);x=S.concat(x)}if(x.length){o==="contextmenu"&&si(e);var rt=x[0],gt={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var Pt=rt.getLatLng&&(!rt._radius||rt._radius<=10);gt.containerPoint=Pt?this.latLngToContainerPoint(rt.getLatLng()):this.mouseEventToContainerPoint(e),gt.layerPoint=this.containerPointToLayerPoint(gt.containerPoint),gt.latlng=Pt?rt.getLatLng():this.layerPointToLatLng(gt.layerPoint)}for(V=0;V<x.length;V++)if(x[V].fire(o,gt,!0),gt.originalEvent._stopped||x[V].options.bubblingMouseEvents===!1&&J(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,o=this._handlers.length;e<o;e++)this._handlers[e].disable()},whenReady:function(e,o){return this._loaded?e.call(o||this,{target:this}):this.on("load",e,o),this},_getMapPanePos:function(){return zn(this._mapPane)||new zt(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,o){var c=e&&o!==void 0?this._getNewPixelOrigin(e,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,o){var c=this.getSize()._divideBy(2);return this.project(e,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,o,c){var m=this._getNewPixelOrigin(c,o);return this.project(e,o)._subtract(m)},_latLngBoundsToNewLayerBounds:function(e,o,c){var m=this._getNewPixelOrigin(c,o);return Et([this.project(e.getSouthWest(),o)._subtract(m),this.project(e.getNorthWest(),o)._subtract(m),this.project(e.getSouthEast(),o)._subtract(m),this.project(e.getNorthEast(),o)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,o,c){if(!c)return e;var m=this.project(e,o),x=this.getSize().divideBy(2),S=new Gt(m.subtract(x),m.add(x)),V=this._getBoundsOffset(S,c,o);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?e:this.unproject(m.add(V),o)},_limitOffset:function(e,o){if(!o)return e;var c=this.getPixelBounds(),m=new Gt(c.min.add(e),c.max.add(e));return e.add(this._getBoundsOffset(m,o))},_getBoundsOffset:function(e,o,c){var m=Et(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),x=m.min.subtract(e.min),S=m.max.subtract(e.max),V=this._rebound(x.x,-S.x),rt=this._rebound(x.y,-S.y);return new zt(V,rt)},_rebound:function(e,o){return e+o>0?Math.round(e-o)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(o))},_limitZoom:function(e){var o=this.getMinZoom(),c=this.getMaxZoom(),m=se.any3d?this.options.zoomSnap:1;return m&&(e=Math.round(e/m)*m),Math.max(o,Math.min(c,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,o){var c=this._getCenterOffset(e)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var e=this._proxy=Be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(o){var c=Vs,m=this._proxy.style[c];Fn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),m===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),o=this.getZoom();Fn(this._proxy,this.project(e,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(o),x=this._getCenterOffset(e)._divideBy(1-1/m);return c.animate!==!0&&!this.getSize().contains(x)?!1:(vt(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(e,o,!0)},this),!0)},_animateZoom:function(e,o,c,m){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=o,ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:o,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ya(e,o){return new Ce(e,o)}var me=Ct.extend({options:{position:"topright"},initialize:function(e){$(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var o=this._map;return o&&o.removeControl(this),this.options.position=e,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var o=this._container=this.onAdd(e),c=this.getPosition(),m=e._controlCorners[c];return ye(o,"leaflet-control"),c.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Un=function(e){return new me(e)};Ce.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},o="leaflet-",c=this._controlContainer=Be("div",o+"control-container",this._container);function m(x,S){var V=o+x+" "+o+S;e[x+S]=Be("div",V,c)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)$e(this._controlCorners[e]);$e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Br=me.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,o,c,m){return c<m?-1:m<c?1:0}},initialize:function(e,o,c){$(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in e)this._addLayer(e[m],m);for(m in o)this._addLayer(o[m],m,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return me.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,o){return this._addLayer(e,o),this._map?this._update():this},addOverlay:function(e,o){return this._addLayer(e,o,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var o=this._getLayer(v(e));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):qe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",o=this._container=Be("div",e),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Pr(o),eo(o);var m=this._section=Be("section",e+"-list");c&&(this._map.on("click",this.collapse,this),_e(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=Be("a",e+"-toggle",o);x.href="#",x.title="Layers",x.setAttribute("role","button"),_e(x,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){si(S),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Be("div",e+"-base",m),this._separator=Be("div",e+"-separator",m),this._overlaysList=Be("div",e+"-overlays",m),o.appendChild(m)},_getLayer:function(e){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&v(this._layers[o].layer)===e)return this._layers[o]},_addLayer:function(e,o,c){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(f(function(m,x){return this.options.sortFunction(m.layer,x.layer,m.name,x.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Er(this._baseLayersList),Er(this._overlaysList),this._layerControlInputs=[];var e,o,c,m,x=0;for(c=0;c<this._layers.length;c++)m=this._layers[c],this._addItem(m),o=o||m.overlay,e=e||!m.overlay,x+=m.overlay?0:1;return this.options.hideSingleBase&&(e=e&&x>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=o&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var o=this._getLayer(v(e.target)),c=o.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(e,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(o?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=c,m.firstChild},_addItem:function(e){var o=document.createElement("label"),c=this._map.hasLayer(e.layer),m;e.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=c):m=this._createRadioElement("leaflet-base-layers_"+v(this),c),this._layerControlInputs.push(m),m.layerId=v(e.layer),_e(m,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+e.name;var S=document.createElement("span");o.appendChild(S),S.appendChild(m),S.appendChild(x);var V=e.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,o,c,m=[],x=[];this._handlingClick=!0;for(var S=e.length-1;S>=0;S--)o=e[S],c=this._getLayer(o.layerId).layer,o.checked?m.push(c):o.checked||x.push(c);for(S=0;S<x.length;S++)this._map.hasLayer(x[S])&&this._map.removeLayer(x[S]);for(S=0;S<m.length;S++)this._map.hasLayer(m[S])||this._map.addLayer(m[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,o,c,m=this._map.getZoom(),x=e.length-1;x>=0;x--)o=e[x],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&m<c.options.minZoom||c.options.maxZoom!==void 0&&m>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,_e(e,"click",si),this.expand();var o=this;setTimeout(function(){Fe(e,"click",si),o._preventClick=!1})}}),ru=function(e,o,c){return new Br(e,o,c)},ns=me.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var o="leaflet-control-zoom",c=Be("div",o+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,o,c,m,x){var S=Be("a",c,m);return S.innerHTML=e,S.href="#",S.title=o,S.setAttribute("role","button"),S.setAttribute("aria-label",o),Pr(S),_e(S,"click",jn),_e(S,"click",x,this),_e(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var e=this._map,o="leaflet-disabled";qe(this._zoomInButton,o),qe(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(ye(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(ye(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ns,this.addControl(this.zoomControl))});var su=function(e){return new ns(e)},rs=me.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var o="leaflet-control-scale",c=Be("div",o),m=this.options;return this._addScales(m,o+"-line",c),e.on(m.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),c},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,o,c){e.metric&&(this._mScale=Be("div",o,c)),e.imperial&&(this._iScale=Be("div",o,c))},_update:function(){var e=this._map,o=e.getSize().y/2,c=e.distance(e.containerPointToLatLng([0,o]),e.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var o=this._getRoundNum(e),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/e)},_updateImperial:function(e){var o=e*3.2808399,c,m,x;o>5280?(c=o/5280,m=this._getRoundNum(c),this._updateScale(this._iScale,m+" mi",m/c)):(x=this._getRoundNum(o),this._updateScale(this._iScale,x+" ft",x/o))},_updateScale:function(e,o,c){e.style.width=Math.round(this.options.maxWidth*c)+"px",e.innerHTML=o},_getRoundNum:function(e){var o=Math.pow(10,(Math.floor(e)+"").length-1),c=e/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),ss=function(e){return new rs(e)},ou='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',tn=me.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?ou+" ":"")+"Leaflet</a>"},initialize:function(e){$(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=Be("div","leaflet-control-attribution"),Pr(this._container);for(var o in e._layers)e._layers[o].getAttribution&&this.addAttribution(e._layers[o].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var o in this._attributions)this._attributions[o]&&e.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),e.length&&c.push(e.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&new tn().addTo(this)});var va=function(e){return new tn(e)};me.Layers=Br,me.Zoom=ns,me.Scale=rs,me.Attribution=tn,Un.layers=ru,Un.zoom=su,Un.scale=ss,Un.attribution=va;var fi=Ct.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fi.addTo=function(e,o){return e.addHandler(o,this),this};var au={Events:Dt},ba=se.touch?"touchstart mousedown":"mousedown",Ln=Jt.extend({options:{clickTolerance:3},initialize:function(e,o,c,m){$(this,m),this._element=e,this._dragStartTarget=o||e,this._preventOutline=c},enable:function(){this._enabled||(_e(this._dragStartTarget,ba,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ln._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,ba,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Hs(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Ln._dragging===this&&this.finishDrag();return}if(!(Ln._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Ln._dragging=this,this._preventOutline&&Xs(this._element),Ks(),kr(),!this._moving)){this.fire("down");var o=e.touches?e.touches[0]:e,c=da(this._element);this._startPoint=new zt(o.clientX,o.clientY),this._startPos=zn(this._element),this._parentScale=Ys(c);var m=e.type==="mousedown";_e(document,m?"mousemove":"touchmove",this._onMove,this),_e(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var o=e.touches&&e.touches.length===1?e.touches[0]:e,c=new zt(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,si(e),this._moved||(this.fire("dragstart"),this._moved=!0,ye(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Xe(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){qe(document.body,"leaflet-dragging"),this._lastTarget&&(qe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),Ws(),Mr();var o=this._moved&&this._moving;this._moving=!1,Ln._dragging=!1,o&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function xa(e,o,c){var m,x=[1,4,2,8],S,V,rt,gt,Pt,qt,ce,we;for(S=0,qt=e.length;S<qt;S++)e[S]._code=yi(e[S],o);for(rt=0;rt<4;rt++){for(ce=x[rt],m=[],S=0,qt=e.length,V=qt-1;S<qt;V=S++)gt=e[S],Pt=e[V],gt._code&ce?Pt._code&ce||(we=Cn(Pt,gt,ce,o,c),we._code=yi(we,o),m.push(we)):(Pt._code&ce&&(we=Cn(Pt,gt,ce,o,c),we._code=yi(we,o),m.push(we)),m.push(gt));e=m}return e}function wa(e,o){var c,m,x,S,V,rt,gt,Pt,qt;if(!e||e.length===0)throw new Error("latlngs not passed");vi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var ce=re([0,0]),we=$t(e),gi=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());gi<1700&&(ce=no(e));var ii=e.length,xi=[];for(c=0;c<ii;c++){var He=re(e[c]);xi.push(o.project(re([He.lat-ce.lat,He.lng-ce.lng])))}for(rt=gt=Pt=0,c=0,m=ii-1;c<ii;m=c++)x=xi[c],S=xi[m],V=x.y*S.x-S.y*x.x,gt+=(x.x+S.x)*V,Pt+=(x.y+S.y)*V,rt+=V*3;rt===0?qt=xi[0]:qt=[gt/rt,Pt/rt];var sn=o.unproject(lt(qt));return re([sn.lat+ce.lat,sn.lng+ce.lng])}function no(e){for(var o=0,c=0,m=0,x=0;x<e.length;x++){var S=re(e[x]);o+=S.lat,c+=S.lng,m++}return re([o/m,c/m])}var lu={__proto__:null,clipPolygon:xa,polygonCenter:wa,centroid:no};function La(e,o){if(!o||!e.length)return e.slice();var c=o*o;return e=Ca(e,c),e=oi(e,c),e}function ro(e,o,c){return Math.sqrt(Sr(e,o,c,!0))}function uu(e,o,c){return Sr(e,o,c)}function oi(e,o){var c=e.length,m=typeof Uint8Array<"u"?Uint8Array:Array,x=new m(c);x[0]=x[c-1]=1,ci(e,x,o,0,c-1);var S,V=[];for(S=0;S<c;S++)x[S]&&V.push(e[S]);return V}function ci(e,o,c,m,x){var S=0,V,rt,gt;for(rt=m+1;rt<=x-1;rt++)gt=Sr(e[rt],e[m],e[x],!0),gt>S&&(V=rt,S=gt);S>c&&(o[V]=1,ci(e,o,c,m,V),ci(e,o,c,V,x))}function Ca(e,o){for(var c=[e[0]],m=1,x=0,S=e.length;m<S;m++)cu(e[m],e[x])>o&&(c.push(e[m]),x=m);return x<S-1&&c.push(e[S-1]),c}var $n;function Gn(e,o,c,m,x){var S=m?$n:yi(e,c),V=yi(o,c),rt,gt,Pt;for($n=V;;){if(!(S|V))return[e,o];if(S&V)return!1;rt=S||V,gt=Cn(e,o,rt,c,x),Pt=yi(gt,c),rt===S?(e=gt,S=Pt):(o=gt,V=Pt)}}function Cn(e,o,c,m,x){var S=o.x-e.x,V=o.y-e.y,rt=m.min,gt=m.max,Pt,qt;return c&8?(Pt=e.x+S*(gt.y-e.y)/V,qt=gt.y):c&4?(Pt=e.x+S*(rt.y-e.y)/V,qt=rt.y):c&2?(Pt=gt.x,qt=e.y+V*(gt.x-e.x)/S):c&1&&(Pt=rt.x,qt=e.y+V*(rt.x-e.x)/S),new zt(Pt,qt,x)}function yi(e,o){var c=0;return e.x<o.min.x?c|=1:e.x>o.max.x&&(c|=2),e.y<o.min.y?c|=4:e.y>o.max.y&&(c|=8),c}function cu(e,o){var c=o.x-e.x,m=o.y-e.y;return c*c+m*m}function Sr(e,o,c,m){var x=o.x,S=o.y,V=c.x-x,rt=c.y-S,gt=V*V+rt*rt,Pt;return gt>0&&(Pt=((e.x-x)*V+(e.y-S)*rt)/gt,Pt>1?(x=c.x,S=c.y):Pt>0&&(x+=V*Pt,S+=rt*Pt)),V=e.x-x,rt=e.y-S,m?V*V+rt*rt:new zt(x,S)}function vi(e){return!X(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function Fi(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),vi(e)}function so(e,o){var c,m,x,S,V,rt,gt,Pt;if(!e||e.length===0)throw new Error("latlngs not passed");vi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var qt=re([0,0]),ce=$t(e),we=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());we<1700&&(qt=no(e));var gi=e.length,ii=[];for(c=0;c<gi;c++){var xi=re(e[c]);ii.push(o.project(re([xi.lat-qt.lat,xi.lng-qt.lng])))}for(c=0,m=0;c<gi-1;c++)m+=ii[c].distanceTo(ii[c+1])/2;if(m===0)Pt=ii[0];else for(c=0,S=0;c<gi-1;c++)if(V=ii[c],rt=ii[c+1],x=V.distanceTo(rt),S+=x,S>m){gt=(S-m)/x,Pt=[rt.x-gt*(rt.x-V.x),rt.y-gt*(rt.y-V.y)];break}var He=o.unproject(lt(Pt));return re([He.lat+qt.lat,He.lng+qt.lng])}var os={__proto__:null,simplify:La,pointToSegmentDistance:ro,closestPointOnSegment:uu,clipSegment:Gn,_getEdgeIntersection:Cn,_getBitCode:yi,_sqClosestPointOnSegment:Sr,isFlat:vi,_flat:Fi,polylineCenter:so},oo={project:function(e){return new zt(e.lng,e.lat)},unproject:function(e){return new le(e.y,e.x)},bounds:new Gt([-180,-90],[180,90])},zi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Gt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var o=Math.PI/180,c=this.R,m=e.lat*o,x=this.R_MINOR/c,S=Math.sqrt(1-x*x),V=S*Math.sin(m),rt=Math.tan(Math.PI/4-m/2)/Math.pow((1-V)/(1+V),S/2);return m=-c*Math.log(Math.max(rt,1e-10)),new zt(e.lng*o*c,m)},unproject:function(e){for(var o=180/Math.PI,c=this.R,m=this.R_MINOR/c,x=Math.sqrt(1-m*m),S=Math.exp(-e.y/c),V=Math.PI/2-2*Math.atan(S),rt=0,gt=.1,Pt;rt<15&&Math.abs(gt)>1e-7;rt++)Pt=x*Math.sin(V),Pt=Math.pow((1-Pt)/(1+Pt),x/2),gt=Math.PI/2-2*Math.atan(S*Pt)-V,V+=gt;return new le(V*o,e.x*o/c)}},en={__proto__:null,LonLat:oo,Mercator:zi,SphericalMercator:Wt},as=h({},Ut,{code:"EPSG:3395",projection:zi,transformation:function(){var e=.5/(Math.PI*zi.R);return F(e,.5,-e,.5)}()}),ao=h({},Ut,{code:"EPSG:4326",projection:oo,transformation:F(1/180,1,-1/180,.5)}),lo=h({},bt,{projection:oo,transformation:F(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,o){var c=o.lng-e.lng,m=o.lat-e.lat;return Math.sqrt(c*c+m*m)},infinite:!0});bt.Earth=Ut,bt.EPSG3395=as,bt.EPSG3857=G,bt.EPSG900913=it,bt.EPSG4326=ao,bt.Simple=lo;var pi=Jt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[v(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[v(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var o=e.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var o=v(e);return this._layers[o]?this:(this._layers[o]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var o=v(e);return this._layers[o]?(this._loaded&&e.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return v(e)in this._layers},eachLayer:function(e,o){for(var c in this._layers)e.call(o,this._layers[c]);return this},_addLayers:function(e){e=e?X(e)?e:[e]:[];for(var o=0,c=e.length;o<c;o++)this.addLayer(e[o])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[v(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var o=v(e);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,o=-1/0,c=this._getZoomSpan();for(var m in this._zoomBoundLayers){var x=this._zoomBoundLayers[m].options;e=x.minZoom===void 0?e:Math.min(e,x.minZoom),o=x.maxZoom===void 0?o:Math.max(o,x.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=e===1/0?void 0:e,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var rr=pi.extend({initialize:function(e,o){$(this,o),this._layers={};var c,m;if(e)for(c=0,m=e.length;c<m;c++)this.addLayer(e[c])},addLayer:function(e){var o=this.getLayerId(e);return this._layers[o]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var o=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(e){var o=typeof e=="number"?e:this.getLayerId(e);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var o=Array.prototype.slice.call(arguments,1),c,m;for(c in this._layers)m=this._layers[c],m[e]&&m[e].apply(m,o);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,o){for(var c in this._layers)e.call(o,this._layers[c]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return v(e)}}),hu=function(e,o){return new rr(e,o)},Hi=rr.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),rr.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),rr.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new ne;for(var o in this._layers){var c=this._layers[o];e.extend(c.getBounds?c.getBounds():c.getLatLng())}return e}}),du=function(e,o){return new Hi(e,o)},sr=Ct.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){$(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,o){var c=this._getIconUrl(e);if(!c){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(m,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(e,o){var c=this.options,m=c[o+"Size"];typeof m=="number"&&(m=[m,m]);var x=lt(m),S=lt(o==="shadow"&&c.shadowAnchor||c.iconAnchor||x&&x.divideBy(2,!0));e.className="leaflet-marker-"+o+" "+(c.className||""),S&&(e.style.marginLeft=-S.x+"px",e.style.marginTop=-S.y+"px"),x&&(e.style.width=x.x+"px",e.style.height=x.y+"px")},_createImg:function(e,o){return o=o||document.createElement("img"),o.src=e,o},_getIconUrl:function(e){return se.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function fu(e){return new sr(e)}var Ar=sr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Ar.imagePath!="string"&&(Ar.imagePath=this._detectIconPath()),(this.options.imagePath||Ar.imagePath)+sr.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var o=function(c,m,x){var S=m.exec(c);return S&&S[x]};return e=o(e,/^url\((['"])?(.+)\1\)$/,2),e&&o(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=Be("div","leaflet-default-icon-path",document.body),o=xn(e,"background-image")||xn(e,"backgroundImage");if(document.body.removeChild(e),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),ls=fi.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Ln(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ye(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var o=this._marker,c=o._map,m=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,S=zn(o._icon),V=c.getPixelBounds(),rt=c.getPixelOrigin(),gt=Et(V.min._subtract(rt).add(x),V.max._subtract(rt).subtract(x));if(!gt.contains(S)){var Pt=lt((Math.max(gt.max.x,S.x)-gt.max.x)/(V.max.x-gt.max.x)-(Math.min(gt.min.x,S.x)-gt.min.x)/(V.min.x-gt.min.x),(Math.max(gt.max.y,S.y)-gt.max.y)/(V.max.y-gt.max.y)-(Math.min(gt.min.y,S.y)-gt.min.y)/(V.min.y-gt.min.y)).multiplyBy(m);c.panBy(Pt,{animate:!1}),this._draggable._newPos._add(Pt),this._draggable._startPos._add(Pt),Xe(o._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=vt(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(Bt(this._panRequest),this._panRequest=vt(this._adjustPan.bind(this,e)))},_onDrag:function(e){var o=this._marker,c=o._shadow,m=zn(o._icon),x=o._map.layerPointToLatLng(m);c&&Xe(c,m),o._latlng=x,e.latlng=x,e.oldLatLng=this._oldLatLng,o.fire("move",e).fire("drag",e)},_onDragEnd:function(e){Bt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),us=pi.extend({options:{icon:new Ar,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,o){$(this,o),this._latlng=re(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var o=this._latlng;return this._latlng=re(e),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=e.icon.createIcon(this._icon),m=!1;c!==this._icon&&(this._icon&&this._removeIcon(),m=!0,e.title&&(c.title=e.title),c.tagName==="IMG"&&(c.alt=e.alt||"")),ye(c,o),e.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_e(c,"focus",this._panOnFocus,this);var x=e.icon.createShadow(this._shadow),S=!1;x!==this._shadow&&(this._removeShadow(),S=!0),x&&(ye(x,o),x.alt=""),this._shadow=x,e.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&S&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),$e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$e(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Xe(this._icon,e),this._shadow&&Xe(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ls)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ls(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Ii(this._icon,e),this._shadow&&Ii(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var o=this.options.icon.options,c=o.iconSize?lt(o.iconSize):lt(0,0),m=o.iconAnchor?lt(o.iconAnchor):lt(0,0);e.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:c.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pu(e,o){return new us(e,o)}var hn=pi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return $(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),nn=hn.extend({options:{fill:!0,radius:10},initialize:function(e,o){$(this,o),this._latlng=re(e),this._radius=this.options.radius},setLatLng:function(e){var o=this._latlng;return this._latlng=re(e),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var o=e&&e.radius||this._radius;return hn.prototype.setStyle.call(this,e),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,o=this._radiusY||e,c=this._clickTolerance(),m=[e+c,o+c];this._pxBounds=new Gt(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ea(e,o){return new nn(e,o)}var uo=nn.extend({initialize:function(e,o,c){if(typeof o=="number"&&(o=h({},c,{radius:o})),$(this,o),this._latlng=re(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new ne(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:hn.prototype.setStyle,_project:function(){var e=this._latlng.lng,o=this._latlng.lat,c=this._map,m=c.options.crs;if(m.distance===Ut.distance){var x=Math.PI/180,S=this._mRadius/Ut.R/x,V=c.project([o+S,e]),rt=c.project([o-S,e]),gt=V.add(rt).divideBy(2),Pt=c.unproject(gt).lat,qt=Math.acos((Math.cos(S*x)-Math.sin(o*x)*Math.sin(Pt*x))/(Math.cos(o*x)*Math.cos(Pt*x)))/x;(isNaN(qt)||qt===0)&&(qt=S/Math.cos(Math.PI/180*o)),this._point=gt.subtract(c.getPixelOrigin()),this._radius=isNaN(qt)?0:gt.x-c.project([Pt,e-qt]).x,this._radiusY=gt.y-V.y}else{var ce=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ce).x}this._updateBounds()}});function Vn(e,o,c){return new uo(e,o,c)}var dn=hn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,o){$(this,o),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var o=1/0,c=null,m=Sr,x,S,V=0,rt=this._parts.length;V<rt;V++)for(var gt=this._parts[V],Pt=1,qt=gt.length;Pt<qt;Pt++){x=gt[Pt-1],S=gt[Pt];var ce=m(e,x,S,!0);ce<o&&(o=ce,c=m(e,x,S))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return so(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,o){return o=o||this._defaultShape(),e=re(e),o.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new ne,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return vi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var o=[],c=vi(e),m=0,x=e.length;m<x;m++)c?(o[m]=re(e[m]),this._bounds.extend(o[m])):o[m]=this._convertLatLngs(e[m]);return o},_project:function(){var e=new Gt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),o=new zt(e,e);this._rawPxBounds&&(this._pxBounds=new Gt([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(e,o,c){var m=e[0]instanceof le,x=e.length,S,V;if(m){for(V=[],S=0;S<x;S++)V[S]=this._map.latLngToLayerPoint(e[S]),c.extend(V[S]);o.push(V)}else for(S=0;S<x;S++)this._projectLatlngs(e[S],o,c)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,m,x,S,V,rt,gt;for(c=0,x=0,S=this._rings.length;c<S;c++)for(gt=this._rings[c],m=0,V=gt.length;m<V-1;m++)rt=Gn(gt[m],gt[m+1],e,m,!0),rt&&(o[x]=o[x]||[],o[x].push(rt[0]),(rt[1]!==gt[m+1]||m===V-2)&&(o[x].push(rt[1]),x++))}},_simplifyPoints:function(){for(var e=this._parts,o=this.options.smoothFactor,c=0,m=e.length;c<m;c++)e[c]=La(e[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,o){var c,m,x,S,V,rt,gt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(c=0,S=this._parts.length;c<S;c++)for(rt=this._parts[c],m=0,V=rt.length,x=V-1;m<V;x=m++)if(!(!o&&m===0)&&ro(e,rt[x],rt[m])<=gt)return!0;return!1}});function mu(e,o){return new dn(e,o)}dn._flat=Fi;var En=dn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var o=dn.prototype._convertLatLngs.call(this,e),c=o.length;return c>=2&&o[0]instanceof le&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(e){dn.prototype._setLatLngs.call(this,e),vi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return vi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,o=this.options.weight,c=new zt(o,o);if(e=new Gt(e.min.subtract(c),e.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,x=this._rings.length,S;m<x;m++)S=xa(this._rings[m],e,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var o=!1,c,m,x,S,V,rt,gt,Pt;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(S=0,gt=this._parts.length;S<gt;S++)for(c=this._parts[S],V=0,Pt=c.length,rt=Pt-1;V<Pt;rt=V++)m=c[V],x=c[rt],m.y>e.y!=x.y>e.y&&e.x<(x.x-m.x)*(e.y-m.y)/(x.y-m.y)+m.x&&(o=!o);return o||dn.prototype._containsPoint.call(this,e,!0)}});function Tr(e,o){return new En(e,o)}var fn=Hi.extend({initialize:function(e,o){$(this,o),this._layers={},e&&this.addData(e)},addData:function(e){var o=X(e)?e:e.features,c,m,x;if(o){for(c=0,m=o.length;c<m;c++)x=o[c],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var S=this.options;if(S.filter&&!S.filter(e))return this;var V=cs(e,S);return V?(V.feature=ms(e),V.defaultOptions=V.options,this.resetStyle(V),S.onEachFeature&&S.onEachFeature(e,V),this.addLayer(V)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=h({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(o){this._setLayerStyle(o,e)},this)},_setLayerStyle:function(e,o){e.setStyle&&(typeof o=="function"&&(o=o(e.feature)),e.setStyle(o))}});function cs(e,o){var c=e.type==="Feature"?e.geometry:e,m=c?c.coordinates:null,x=[],S=o&&o.pointToLayer,V=o&&o.coordsToLatLng||hs,rt,gt,Pt,qt;if(!m&&!c)return null;switch(c.type){case"Point":return rt=V(m),ka(S,e,rt,o);case"MultiPoint":for(Pt=0,qt=m.length;Pt<qt;Pt++)rt=V(m[Pt]),x.push(ka(S,e,rt,o));return new Hi(x);case"LineString":case"MultiLineString":return gt=ds(m,c.type==="LineString"?0:1,V),new dn(gt,o);case"Polygon":case"MultiPolygon":return gt=ds(m,c.type==="Polygon"?1:2,V),new En(gt,o);case"GeometryCollection":for(Pt=0,qt=c.geometries.length;Pt<qt;Pt++){var ce=cs({geometry:c.geometries[Pt],type:"Feature",properties:e.properties},o);ce&&x.push(ce)}return new Hi(x);case"FeatureCollection":for(Pt=0,qt=c.features.length;Pt<qt;Pt++){var we=cs(c.features[Pt],o);we&&x.push(we)}return new Hi(x);default:throw new Error("Invalid GeoJSON object.")}}function ka(e,o,c,m){return e?e(o,c):new us(c,m&&m.markersInheritOptions&&m)}function hs(e){return new le(e[1],e[0],e[2])}function ds(e,o,c){for(var m=[],x=0,S=e.length,V;x<S;x++)V=o?ds(e[x],o-1,c):(c||hs)(e[x]),m.push(V);return m}function fs(e,o){return e=re(e),e.alt!==void 0?[U(e.lng,o),U(e.lat,o),U(e.alt,o)]:[U(e.lng,o),U(e.lat,o)]}function ps(e,o,c,m){for(var x=[],S=0,V=e.length;S<V;S++)x.push(o?ps(e[S],vi(e[S])?0:o-1,c,m):fs(e[S],m));return!o&&c&&x.length>0&&x.push(x[0].slice()),x}function or(e,o){return e.feature?h({},e.feature,{geometry:o}):ms(o)}function ms(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var gs={toGeoJSON:function(e){return or(this,{type:"Point",coordinates:fs(this.getLatLng(),e)})}};us.include(gs),uo.include(gs),nn.include(gs),dn.include({toGeoJSON:function(e){var o=!vi(this._latlngs),c=ps(this._latlngs,o?1:0,!1,e);return or(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),En.include({toGeoJSON:function(e){var o=!vi(this._latlngs),c=o&&!vi(this._latlngs[0]),m=ps(this._latlngs,c?2:o?1:0,!0,e);return o||(m=[m]),or(this,{type:(c?"Multi":"")+"Polygon",coordinates:m})}}),rr.include({toMultiPoint:function(e){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(e).geometry.coordinates)}),or(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(e){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(e);var c=o==="GeometryCollection",m=[];return this.eachLayer(function(x){if(x.toGeoJSON){var S=x.toGeoJSON(e);if(c)m.push(S.geometry);else{var V=ms(S);V.type==="FeatureCollection"?m.push.apply(m,V.features):m.push(V)}}}),c?or(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function _s(e,o){return new fn(e,o)}var Ma=_s,ar=pi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,o,c){this._url=e,this._bounds=$t(o),$(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&ir(this._image),this},bringToBack:function(){return this._map&&In(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=$t(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",o=this._image=e?this._url:Be("img");if(ye(o,"leaflet-image-layer"),this._zoomAnimated&&ye(o,"leaflet-zoom-animated"),this.options.className&&ye(o,this.options.className),o.onselectstart=P,o.onmousemove=P,o.onload=f(this.fire,this,"load"),o.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(e){var o=this._map.getZoomScale(e.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Fn(this._image,c,o)},_reset:function(){var e=this._image,o=new Gt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Xe(e,o.min),e.style.width=c.x+"px",e.style.height=c.y+"px"},_updateOpacity:function(){Ii(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),gu=function(e,o,c){return new ar(e,o,c)},Dr=ar.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",o=this._image=e?this._url:Be("video");if(ye(o,"leaflet-image-layer"),this._zoomAnimated&&ye(o,"leaflet-zoom-animated"),this.options.className&&ye(o,this.options.className),o.onselectstart=P,o.onmousemove=P,o.onloadeddata=f(this.fire,this,"load"),e){for(var c=o.getElementsByTagName("source"),m=[],x=0;x<c.length;x++)m.push(c[x].src);this._url=c.length>0?m:[o.src];return}X(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var V=Be("source");V.src=this._url[S],o.appendChild(V)}}});function Pa(e,o,c){return new Dr(e,o,c)}var Ba=ar.extend({_initImage:function(){var e=this._image=this._url;ye(e,"leaflet-image-layer"),this._zoomAnimated&&ye(e,"leaflet-zoom-animated"),this.options.className&&ye(e,this.options.className),e.onselectstart=P,e.onmousemove=P}});function _u(e,o,c){return new Ba(e,o,c)}var rn=pi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,o){e&&(e instanceof le||X(e))?(this._latlng=re(e),$(this,o)):($(this,e),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Ii(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Ii(this._container,1),this.bringToFront(),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Ii(this._container,0),this._removeTimeout=setTimeout(f($e,void 0,this._container),200)):$e(this._container),this.options.interactive&&(qe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=re(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ir(this._container),this},bringToBack:function(){return this._map&&In(this._container),this},_prepareOpen:function(e){var o=this._source;if(!o._map)return!1;if(o instanceof Hi){o=null;var c=this._source._layers;for(var m in c)if(c[m]._map){o=c[m];break}if(!o)return!1;this._source=o}if(!e)if(o.getCenter)e=o.getCenter();else if(o.getLatLng)e=o.getLatLng();else if(o.getBounds)e=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")e.innerHTML=o;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),o=lt(this.options.offset),c=this._getAnchor();this._zoomAnimated?Xe(this._container,e.add(c)):o=o.add(e).add(c);var m=this._containerBottom=-o.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=m+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(e,o,c,m){var x=o;return x instanceof e||(x=new e(m).setContent(o)),c&&x.setLatLng(c),x}}),pi.include({_initOverlay:function(e,o,c,m){var x=c;return x instanceof e?($(x,m),x._source=this):(x=o&&!m?o:new e(m,this),x.setContent(c)),x}});var kn=rn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,rn.prototype.openOn.call(this,e)},onAdd:function(e){rn.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof hn||this._source.on("preclick",Nn))},onRemove:function(e){rn.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof hn||this._source.off("preclick",Nn))},getEvents:function(){var e=rn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",o=this._container=Be("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Be("div",e+"-content-wrapper",o);if(this._contentNode=Be("div",e+"-content",c),Pr(o),eo(this._contentNode),_e(o,"contextmenu",Nn),this._tipContainer=Be("div",e+"-tip-container",o),this._tip=Be("div",e+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Be("a",e+"-close-button",o);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',_e(m,"click",function(x){si(x),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,o=e.style;o.width="",o.whiteSpace="nowrap";var c=e.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var m=e.offsetHeight,x=this.options.maxHeight,S="leaflet-popup-scrolled";x&&m>x?(o.height=x+"px",ye(e,S)):qe(e,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),c=this._getAnchor();Xe(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,o=parseInt(xn(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,m=this._containerWidth,x=new zt(this._containerLeft,-c-this._containerBottom);x._add(zn(this._container));var S=e.layerPointToContainerPoint(x),V=lt(this.options.autoPanPadding),rt=lt(this.options.autoPanPaddingTopLeft||V),gt=lt(this.options.autoPanPaddingBottomRight||V),Pt=e.getSize(),qt=0,ce=0;S.x+m+gt.x>Pt.x&&(qt=S.x+m-Pt.x+gt.x),S.x-qt-rt.x<0&&(qt=S.x-rt.x),S.y+c+gt.y>Pt.y&&(ce=S.y+c-Pt.y+gt.y),S.y-ce-rt.y<0&&(ce=S.y-rt.y),(qt||ce)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([qt,ce]))}},_getAnchor:function(){return lt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),yu=function(e,o){return new kn(e,o)};Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(e,o,c){return this._initOverlay(kn,e,o,c).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),pi.include({bindPopup:function(e,o){return this._popup=this._initOverlay(kn,this._popup,e,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Hi||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){jn(e);var o=e.layer||e.target;if(this._popup._source===o&&!(o instanceof hn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=o,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var ys=rn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){rn.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){rn.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=rn.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",o=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Be("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var o,c,m=this._map,x=this._container,S=m.latLngToContainerPoint(m.getCenter()),V=m.layerPointToContainerPoint(e),rt=this.options.direction,gt=x.offsetWidth,Pt=x.offsetHeight,qt=lt(this.options.offset),ce=this._getAnchor();rt==="top"?(o=gt/2,c=Pt):rt==="bottom"?(o=gt/2,c=0):rt==="center"?(o=gt/2,c=Pt/2):rt==="right"?(o=0,c=Pt/2):rt==="left"?(o=gt,c=Pt/2):V.x<S.x?(rt="right",o=0,c=Pt/2):(rt="left",o=gt+(qt.x+ce.x)*2,c=Pt/2),e=e.subtract(lt(o,c,!0)).add(qt).add(ce),qe(x,"leaflet-tooltip-right"),qe(x,"leaflet-tooltip-left"),qe(x,"leaflet-tooltip-top"),qe(x,"leaflet-tooltip-bottom"),ye(x,"leaflet-tooltip-"+rt),Xe(x,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Ii(this._container,e)},_animateZoom:function(e){var o=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(o)},_getAnchor:function(){return lt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),vu=function(e,o){return new ys(e,o)};Ce.include({openTooltip:function(e,o,c){return this._initOverlay(ys,e,o,c).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),pi.include({bindTooltip:function(e,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ys,this._tooltip,e,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var o=e?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Hi||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var o=typeof e.getElement=="function"&&e.getElement();o&&(_e(o,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),_e(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var o=typeof e.getElement=="function"&&e.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var o=e.latlng,c,m;this._tooltip.options.sticky&&e.originalEvent&&(c=this._map.mouseEventToContainerPoint(e.originalEvent),m=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(o)}});var Sa=sr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var o=e&&e.tagName==="DIV"?e:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Er(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var m=lt(c.bgPos);o.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function bu(e){return new Sa(e)}sr.Default=Ar;var Rr=pi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){$(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),$e(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ir(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(In(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=M(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof zt?e:new zt(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var o=this.getPane().children,c=-e(-1/0,1/0),m=0,x=o.length,S;m<x;m++)S=o[m].style.zIndex,o[m]!==this._container&&S&&(c=e(c,+S));isFinite(c)&&(this.options.zIndex=c+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Ii(this._container,this.options.opacity);var e=+new Date,o=!1,c=!1;for(var m in this._tiles){var x=this._tiles[m];if(!(!x.current||!x.loaded)){var S=Math.min(1,(e-x.loaded)/200);Ii(x.el,S),S<1?o=!0:(x.active?c=!0:this._onOpaqueTile(x),x.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(Bt(this._fadeFrame),this._fadeFrame=vt(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=Be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,o=this.options.maxZoom;if(e!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===e?(this._levels[c].el.style.zIndex=o-Math.abs(e-c),this._onUpdateLevel(c)):($e(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var m=this._levels[e],x=this._map;return m||(m=this._levels[e]={},m.el=Be("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=o,m.origin=x.project(x.unproject(x.getPixelOrigin()),e).round(),m.zoom=e,this._setZoomTransform(m,x.getCenter(),x.getZoom()),P(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var e,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)o=this._tiles[e],o.retain=o.current;for(e in this._tiles)if(o=this._tiles[e],o.current&&!o.active){var m=o.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var o in this._tiles)this._tiles[o].coords.z===e&&this._removeTile(o)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)$e(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,o,c,m){var x=Math.floor(e/2),S=Math.floor(o/2),V=c-1,rt=new zt(+x,+S);rt.z=+V;var gt=this._tileCoordsToKey(rt),Pt=this._tiles[gt];return Pt&&Pt.active?(Pt.retain=!0,!0):(Pt&&Pt.loaded&&(Pt.retain=!0),V>m?this._retainParent(x,S,V,m):!1)},_retainChildren:function(e,o,c,m){for(var x=2*e;x<2*e+2;x++)for(var S=2*o;S<2*o+2;S++){var V=new zt(x,S);V.z=c+1;var rt=this._tileCoordsToKey(V),gt=this._tiles[rt];if(gt&&gt.active){gt.retain=!0;continue}else gt&&gt.loaded&&(gt.retain=!0);c+1<m&&this._retainChildren(x,S,c+1,m)}},_resetView:function(e){var o=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var o=this.options;return o.minNativeZoom!==void 0&&e<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<e?o.maxNativeZoom:e},_setView:function(e,o,c,m){var x=Math.round(o);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var S=this.options.updateWhenZooming&&x!==this._tileZoom;(!m||S)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(e),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(e,o)},_setZoomTransforms:function(e,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],e,o)},_setZoomTransform:function(e,o,c){var m=this._map.getZoomScale(c,e.zoom),x=e.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(o,c)).round();se.any3d?Fn(e.el,x,m):Xe(e.el,x)},_resetGrid:function(){var e=this._map,o=e.options.crs,c=this._tileSize=this.getTileSize(),m=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,o.wrapLng[0]],m).x/c.x),Math.ceil(e.project([0,o.wrapLng[1]],m).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([o.wrapLat[0],0],m).y/c.x),Math.ceil(e.project([o.wrapLat[1],0],m).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),m=o.getZoomScale(c,this._tileZoom),x=o.project(e,this._tileZoom).floor(),S=o.getSize().divideBy(m*2);return new Gt(x.subtract(S),x.add(S))},_update:function(e){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(e===void 0&&(e=o.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(e),x=this._pxBoundsToTileRange(m),S=x.getCenter(),V=[],rt=this.options.keepBuffer,gt=new Gt(x.getBottomLeft().subtract([rt,-rt]),x.getTopRight().add([rt,-rt]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Pt in this._tiles){var qt=this._tiles[Pt].coords;(qt.z!==this._tileZoom||!gt.contains(new zt(qt.x,qt.y)))&&(this._tiles[Pt].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(e,c);return}for(var ce=x.min.y;ce<=x.max.y;ce++)for(var we=x.min.x;we<=x.max.x;we++){var gi=new zt(we,ce);if(gi.z=this._tileZoom,!!this._isValidTile(gi)){var ii=this._tiles[this._tileCoordsToKey(gi)];ii?ii.current=!0:V.push(gi)}}if(V.sort(function(He,sn){return He.distanceTo(S)-sn.distanceTo(S)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xi=document.createDocumentFragment();for(we=0;we<V.length;we++)this._addTile(V[we],xi);this._level.el.appendChild(xi)}}}},_isValidTile:function(e){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(e.x<c.min.x||e.x>c.max.x)||!o.wrapLat&&(e.y<c.min.y||e.y>c.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(e);return $t(this.options.bounds).overlaps(m)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var o=this._map,c=this.getTileSize(),m=e.scaleBy(c),x=m.add(c),S=o.unproject(m,e.z),V=o.unproject(x,e.z);return[S,V]},_tileCoordsToBounds:function(e){var o=this._tileCoordsToNwSe(e),c=new ne(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var o=e.split(":"),c=new zt(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(e){var o=this._tiles[e];o&&($e(o.el),delete this._tiles[e],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){ye(e,"leaflet-tile");var o=this.getTileSize();e.style.width=o.x+"px",e.style.height=o.y+"px",e.onselectstart=P,e.onmousemove=P,se.ielt9&&this.options.opacity<1&&Ii(e,this.options.opacity)},_addTile:function(e,o){var c=this._getTilePos(e),m=this._tileCoordsToKey(e),x=this.createTile(this._wrapCoords(e),f(this._tileReady,this,e));this._initTile(x),this.createTile.length<2&&vt(f(this._tileReady,this,e,null,x)),Xe(x,c),this._tiles[m]={el:x,coords:e,current:!0},o.appendChild(x),this.fire("tileloadstart",{tile:x,coords:e})},_tileReady:function(e,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:e});var m=this._tileCoordsToKey(e);c=this._tiles[m],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Ii(c.el,0),Bt(this._fadeFrame),this._fadeFrame=vt(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(ye(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?vt(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var o=new zt(this._wrapX?k(e.x,this._wrapX):e.x,this._wrapY?k(e.y,this._wrapY):e.y);return o.z=e.z,o},_pxBoundsToTileRange:function(e){var o=this.getTileSize();return new Gt(e.min.unscaleBy(o).floor(),e.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function xu(e){return new Rr(e)}var lr=Rr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,o){this._url=e,o=$(this,o),o.detectRetina&&se.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,o){return this._url===e&&o===void 0&&(o=!0),this._url=e,o||this.redraw(),this},createTile:function(e,o){var c=document.createElement("img");return _e(c,"load",f(this._tileOnLoad,this,o,c)),_e(c,"error",f(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(e),c},getTileUrl:function(e){var o={r:se.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-e.y;this.options.tms&&(o.y=c),o["-y"]=c}return mt(this._url,h(o,this.options))},_tileOnLoad:function(e,o){se.ielt9?setTimeout(f(e,this,null,o),0):e(null,o)},_tileOnError:function(e,o,c){var m=this.options.errorTileUrl;m&&o.getAttribute("src")!==m&&(o.src=m),e(c,o)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,m=this.options.zoomOffset;return c&&(e=o-e),e+m},_getSubdomain:function(e){var o=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var e,o;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(o=this._tiles[e].el,o.onload=P,o.onerror=P,!o.complete)){o.src=et;var c=this._tiles[e].coords;$e(o),delete this._tiles[e],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(e){var o=this._tiles[e];if(o)return o.el.setAttribute("src",et),Rr.prototype._removeTile.call(this,e)},_tileReady:function(e,o,c){if(!(!this._map||c&&c.getAttribute("src")===et))return Rr.prototype._tileReady.call(this,e,o,c)}});function co(e,o){return new lr(e,o)}var vs=lr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,o){this._url=e;var c=h({},this.defaultWmsParams);for(var m in o)m in this.options||(c[m]=o[m]);o=$(this,o);var x=o.detectRetina&&se.retina?2:1,S=this.getTileSize();c.width=S.x*x,c.height=S.y*x,this.wmsParams=c},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,lr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var o=this._tileCoordsToNwSe(e),c=this._crs,m=Et(c.project(o[0]),c.project(o[1])),x=m.min,S=m.max,V=(this._wmsVersion>=1.3&&this._crs===ao?[x.y,x.x,S.y,S.x]:[x.x,x.y,S.x,S.y]).join(","),rt=lr.prototype.getTileUrl.call(this,e);return rt+q(this.wmsParams,rt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(e,o){return h(this.wmsParams,e),o||this.redraw(),this}});function wu(e,o){return new vs(e,o)}lr.WMS=vs,co.wms=wu;var pn=pi.extend({options:{padding:.1},initialize:function(e){$(this,e),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,o){var c=this._map.getZoomScale(o,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,o),S=m.multiplyBy(-c).add(x).subtract(this._map._getNewPixelOrigin(e,o));se.any3d?Fn(this._container,S,c):Xe(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-e)).round();this._bounds=new Gt(c,c.add(o.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ho=pn.extend({options:{tolerance:0},getEvents:function(){var e=pn.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");_e(e,"mousemove",this._onMouseMove,this),_e(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_e(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){Bt(this._redrawRequest),delete this._ctx,$e(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var o in this._layers)e=this._layers[o],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pn.prototype._update.call(this);var e=this._bounds,o=this._container,c=e.getSize(),m=se.retina?2:1;Xe(o,e.min),o.width=m*c.x,o.height=m*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){pn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[v(e)]=e;var o=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var o=e._order,c=o.next,m=o.prev;c?c.prev=m:this._drawLast=m,m?m.next=c:this._drawFirst=c,delete e._order,delete this._layers[v(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var o=e.options.dashArray.split(/[, ]+/),c=[],m,x;for(x=0;x<o.length;x++){if(m=Number(o[x]),isNaN(m))return;c.push(m)}e.options._dashArray=c}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||vt(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var o=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Gt,this._redrawBounds.extend(e._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(e._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var o=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)e=m.layer,(!o||e._pxBounds&&e._pxBounds.intersects(o))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,o){if(this._drawing){var c,m,x,S,V=e._parts,rt=V.length,gt=this._ctx;if(rt){for(gt.beginPath(),c=0;c<rt;c++){for(m=0,x=V[c].length;m<x;m++)S=V[c][m],gt[m?"lineTo":"moveTo"](S.x,S.y);o&&gt.closePath()}this._fillStroke(gt,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var o=e._point,c=this._ctx,m=Math.max(Math.round(e._radius),1),x=(Math.max(Math.round(e._radiusY),1)||m)/m;x!==1&&(c.save(),c.scale(1,x)),c.beginPath(),c.arc(o.x,o.y/x,m,0,Math.PI*2,!1),x!==1&&c.restore(),this._fillStroke(c,e)}},_fillStroke:function(e,o){var c=o.options;c.fill&&(e.globalAlpha=c.fillOpacity,e.fillStyle=c.fillColor||c.color,e.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(e.setLineDash&&e.setLineDash(o.options&&o.options._dashArray||[]),e.globalAlpha=c.opacity,e.lineWidth=c.weight,e.strokeStyle=c.color,e.lineCap=c.lineCap,e.lineJoin=c.lineJoin,e.stroke())},_onClick:function(e){for(var o=this._map.mouseEventToLayerPoint(e),c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(c))&&(m=c);this._fireEvent(m?[m]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,o)}},_handleMouseOut:function(e){var o=this._hoveredLayer;o&&(qe(this._container,"leaflet-interactive"),this._fireEvent([o],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,o){if(!this._mouseHoverThrottled){for(var c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(m=c);m!==this._hoveredLayer&&(this._handleMouseOut(e),m&&(ye(this._container,"leaflet-interactive"),this._fireEvent([m],e,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,o,c){this._map._fireDOMEvent(o,c||o.type,e)},_bringToFront:function(e){var o=e._order;if(o){var c=o.next,m=o.prev;if(c)c.prev=m;else return;m?m.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(e)}},_bringToBack:function(e){var o=e._order;if(o){var c=o.next,m=o.prev;if(m)m.next=c;else return;c?c.prev=m:m&&(this._drawLast=m),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(e)}}});function bs(e){return se.canvas?new ho(e):null}var Or=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Lu={_initContainer:function(){this._container=Be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pn.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var o=e._container=Or("shape");ye(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",e._path=Or("path"),o.appendChild(e._path),this._updateStyle(e),this._layers[v(e)]=e},_addPath:function(e){var o=e._container;this._container.appendChild(o),e.options.interactive&&e.addInteractiveTarget(o)},_removePath:function(e){var o=e._container;$e(o),e.removeInteractiveTarget(o),delete this._layers[v(e)]},_updateStyle:function(e){var o=e._stroke,c=e._fill,m=e.options,x=e._container;x.stroked=!!m.stroke,x.filled=!!m.fill,m.stroke?(o||(o=e._stroke=Or("stroke")),x.appendChild(o),o.weight=m.weight+"px",o.color=m.color,o.opacity=m.opacity,m.dashArray?o.dashStyle=X(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=m.lineCap.replace("butt","flat"),o.joinstyle=m.lineJoin):o&&(x.removeChild(o),e._stroke=null),m.fill?(c||(c=e._fill=Or("fill")),x.appendChild(c),c.color=m.fillColor||m.color,c.opacity=m.fillOpacity):c&&(x.removeChild(c),e._fill=null)},_updateCircle:function(e){var o=e._point.round(),c=Math.round(e._radius),m=Math.round(e._radiusY||c);this._setPath(e,e._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+m+" 0,"+65535*360)},_setPath:function(e,o){e._path.v=o},_bringToFront:function(e){ir(e._container)},_bringToBack:function(e){In(e._container)}},ur=se.vml?Or:yt,hi=pn.extend({_initContainer:function(){this._container=ur("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ur("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$e(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pn.prototype._update.call(this);var e=this._bounds,o=e.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Xe(c,e.min),c.setAttribute("viewBox",[e.min.x,e.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(e){var o=e._path=ur("path");e.options.className&&ye(o,e.options.className),e.options.interactive&&ye(o,"leaflet-interactive"),this._updateStyle(e),this._layers[v(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){$e(e._path),e.removeInteractiveTarget(e._path),delete this._layers[v(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var o=e._path,c=e.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(e,o){this._setPath(e,wt(e._parts,o))},_updateCircle:function(e){var o=e._point,c=Math.max(Math.round(e._radius),1),m=Math.max(Math.round(e._radiusY),1)||c,x="a"+c+","+m+" 0 1,0 ",S=e._empty()?"M0 0":"M"+(o.x-c)+","+o.y+x+c*2+",0 "+x+-c*2+",0 ";this._setPath(e,S)},_setPath:function(e,o){e._path.setAttribute("d",o)},_bringToFront:function(e){ir(e._path)},_bringToBack:function(e){In(e._path)}});se.vml&&hi.include(Lu);function mi(e){return se.svg||se.vml?new hi(e):null}Ce.include({getRenderer:function(e){var o=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var o=this._paneRenderers[e];return o===void 0&&(o=this._createRenderer({pane:e}),this._paneRenderers[e]=o),o},_createRenderer:function(e){return this.options.preferCanvas&&bs(e)||mi(e)}});var fo=En.extend({initialize:function(e,o){En.prototype.initialize.call(this,this._boundsToLatLngs(e),o)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=$t(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Zi(e,o){return new fo(e,o)}hi.create=ur,hi.pointsToPath=wt,fn.geometryToLayer=cs,fn.coordsToLatLng=hs,fn.coordsToLatLngs=ds,fn.latLngToCoords=fs,fn.latLngsToCoords=ps,fn.getFeature=or,fn.asFeature=ms,Ce.mergeOptions({boxZoom:!0});var pe=fi.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){_e(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),kr(),Ks(),this._startPoint=this._map.mouseEventToContainerPoint(e),_e(document,{contextmenu:jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=Be("div","leaflet-zoom-box",this._container),ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var o=new Gt(this._point,this._startPoint),c=o.getSize();Xe(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&($e(this._box),qe(this._container,"leaflet-crosshair")),Mr(),Ws(),Fe(document,{contextmenu:jn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var o=new ne(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",pe),Ce.mergeOptions({doubleClickZoom:!0});var po=fi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var o=this._map,c=o.getZoom(),m=o.options.zoomDelta,x=e.originalEvent.shiftKey?c-m:c+m;o.options.doubleClickZoom==="center"?o.setZoom(x):o.setZoomAround(e.containerPoint,x)}});Ce.addInitHook("addHandler","doubleClickZoom",po),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var xs=fi.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Ln(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qe(this._map._container,"leaflet-grab"),qe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=$t(this._map.options.maxBounds);this._offsetLimit=Et(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,o){return e-(e-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;e.x<o.min.x&&(e.x=this._viscousLimit(e.x,o.min.x)),e.y<o.min.y&&(e.y=this._viscousLimit(e.y,o.min.y)),e.x>o.max.x&&(e.x=this._viscousLimit(e.x,o.max.x)),e.y>o.max.y&&(e.y=this._viscousLimit(e.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,o=Math.round(e/2),c=this._initialWorldOffset,m=this._draggable._newPos.x,x=(m-o+c)%e+o-c,S=(m+o+c)%e-o-c,V=Math.abs(x+c)<Math.abs(S+c)?x:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(e){var o=this._map,c=o.options,m=!c.inertia||e.noInertia||this._times.length<2;if(o.fire("dragend",e),m)o.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,V=c.easeLinearity,rt=x.multiplyBy(V/S),gt=rt.distanceTo([0,0]),Pt=Math.min(c.inertiaMaxSpeed,gt),qt=rt.multiplyBy(Pt/gt),ce=Pt/(c.inertiaDeceleration*V),we=qt.multiplyBy(-ce/2).round();!we.x&&!we.y?o.fire("moveend"):(we=o._limitOffset(we,o.options.maxBounds),vt(function(){o.panBy(we,{duration:ce,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Ce.addInitHook("addHandler","dragging",xs),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var mn=fi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),_e(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,o=document.documentElement,c=e.scrollTop||o.scrollTop,m=e.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(m,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var o=this._panKeys={},c=this.keyCodes,m,x;for(m=0,x=c.left.length;m<x;m++)o[c.left[m]]=[-1*e,0];for(m=0,x=c.right.length;m<x;m++)o[c.right[m]]=[e,0];for(m=0,x=c.down.length;m<x;m++)o[c.down[m]]=[0,e];for(m=0,x=c.up.length;m<x;m++)o[c.up[m]]=[0,-1*e]},_setZoomDelta:function(e){var o=this._zoomKeys={},c=this.keyCodes,m,x;for(m=0,x=c.zoomIn.length;m<x;m++)o[c.zoomIn[m]]=e;for(m=0,x=c.zoomOut.length;m<x;m++)o[c.zoomOut[m]]=-e},_addHooks:function(){_e(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var o=e.keyCode,c=this._map,m;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(m=this._panKeys[o],e.shiftKey&&(m=lt(m).multiplyBy(3)),c.options.maxBounds&&(m=c._limitOffset(lt(m),c.options.maxBounds)),c.options.worldCopyJump){var x=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(m)));c.panTo(x)}else c.panBy(m)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;jn(e)}}});Ce.addInitHook("addHandler","keyboard",mn),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bi=fi.extend({addHooks:function(){_e(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var o=ga(e),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var m=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),m),jn(e)},_performZoom:function(){var e=this._map,o=e.getZoom(),c=this._map.options.zoomSnap||0;e._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,S=c?Math.ceil(x/c)*c:x,V=e._limitZoom(o+(this._delta>0?S:-S))-o;this._delta=0,this._startTime=null,V&&(e.options.scrollWheelZoom==="center"?e.setZoom(o+V):e.setZoomAround(this._lastMousePos,o+V))}});Ce.addInitHook("addHandler","scrollWheelZoom",bi);var Aa=600;Ce.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var Bi=fi.extend({addHooks:function(){_e(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var o=e.touches[0];this._startPos=this._newPos=new zt(o.clientX,o.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(_e(document,"touchend",si),_e(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Aa),_e(document,"touchend touchcancel contextmenu",this._cancel,this),_e(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Fe(document,"touchend",si),Fe(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(e){var o=e.touches[0];this._newPos=new zt(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,o){var c=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});Ce.addInitHook("addHandler","tapHold",Bi),Ce.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var Si=fi.extend({addHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),_e(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qe(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var o=this._map;if(!(!e.touches||e.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(e.touches[0]),m=o.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(m)._divideBy(2))),this._startDist=c.distanceTo(m),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),_e(document,"touchmove",this._onTouchMove,this),_e(document,"touchend touchcancel",this._onTouchEnd,this),si(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(e.touches[0]),m=o.mouseEventToContainerPoint(e.touches[1]),x=c.distanceTo(m)/this._startDist;if(this._zoom=o.getScaleZoom(x,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&x<1||this._zoom>o.getMaxZoom()&&x>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var S=c._add(m)._divideBy(2)._subtract(this._centerPoint);if(x===1&&S.x===0&&S.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Bt(this._animRequest);var V=f(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=vt(V,this,!0),si(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Bt(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ce.addInitHook("addHandler","touchZoom",Si),Ce.BoxZoom=pe,Ce.DoubleClickZoom=po,Ce.Drag=xs,Ce.Keyboard=mn,Ce.ScrollWheelZoom=bi,Ce.TapHold=Bi,Ce.TouchZoom=Si,s.Bounds=Gt,s.Browser=se,s.CRS=bt,s.Canvas=ho,s.Circle=uo,s.CircleMarker=nn,s.Class=Ct,s.Control=me,s.DivIcon=Sa,s.DivOverlay=rn,s.DomEvent=is,s.DomUtil=iu,s.Draggable=Ln,s.Evented=Jt,s.FeatureGroup=Hi,s.GeoJSON=fn,s.GridLayer=Rr,s.Handler=fi,s.Icon=sr,s.ImageOverlay=ar,s.LatLng=le,s.LatLngBounds=ne,s.Layer=pi,s.LayerGroup=rr,s.LineUtil=os,s.Map=Ce,s.Marker=us,s.Mixin=au,s.Path=hn,s.Point=zt,s.PolyUtil=lu,s.Polygon=En,s.Polyline=dn,s.Popup=kn,s.PosAnimation=_a,s.Projection=en,s.Rectangle=fo,s.Renderer=pn,s.SVG=hi,s.SVGOverlay=Ba,s.TileLayer=lr,s.Tooltip=ys,s.Transformation=Le,s.Util=ut,s.VideoOverlay=Dr,s.bind=f,s.bounds=Et,s.canvas=bs,s.circle=Vn,s.circleMarker=Ea,s.control=Un,s.divIcon=bu,s.extend=h,s.featureGroup=du,s.geoJSON=_s,s.geoJson=Ma,s.gridLayer=xu,s.icon=fu,s.imageOverlay=gu,s.latLng=re,s.latLngBounds=$t,s.layerGroup=hu,s.map=ya,s.marker=pu,s.point=lt,s.polygon=Tr,s.polyline=mu,s.popup=yu,s.rectangle=Zi,s.setOptions=$,s.stamp=v,s.svg=mi,s.svgOverlay=_u,s.tileLayer=co,s.tooltip=vu,s.transformation=F,s.version=l,s.videoOverlay=Pa;var Hn=window.L;s.noConflict=function(){return window.L=Hn,this},window.L=s})})(_c,_c.exports);var Ui=_c.exports;const fe=Lp(Ui);var Ni=63710088e-1,Lb={centimeters:Ni*100,centimetres:Ni*100,degrees:Ni/111325,feet:Ni*3.28084,inches:Ni*39.37,kilometers:Ni/1e3,kilometres:Ni/1e3,meters:Ni,metres:Ni,miles:Ni/1609.344,millimeters:Ni*1e3,millimetres:Ni*1e3,nauticalmiles:Ni/1852,radians:1,yards:Ni*1.0936};function fl(t,n,s){s===void 0&&(s={});var l={type:"Feature"};return(s.id===0||s.id)&&(l.id=s.id),s.bbox&&(l.bbox=s.bbox),l.properties=n||{},l.geometry=t,l}function Bp(t,n,s){s===void 0&&(s={});for(var l=0,h=t;l<h.length;l++){var p=h[l];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<p[p.length-1].length;f++)if(p[p.length-1][f]!==p[0][f])throw new Error("First and last Position are not equivalent.")}var y={type:"Polygon",coordinates:t};return fl(y,n,s)}function Zo(t,n,s){if(s===void 0&&(s={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var l={type:"LineString",coordinates:t};return fl(l,n,s)}function Cb(t,n){n===void 0&&(n="kilometers");var s=Lb[n];if(!s)throw new Error(n+" units is invalid");return t*s}function Ga(t){var n=t%360;return n*Math.PI/180}function Sp(t,n,s){if(t!==null)for(var l,h,p,f,y,v,M,k=0,P=0,U,H=t.type,N=H==="FeatureCollection",$=H==="Feature",q=N?t.features.length:1,ht=0;ht<q;ht++){M=N?t.features[ht].geometry:$?t.geometry:t,U=M?M.type==="GeometryCollection":!1,y=U?M.geometries.length:1;for(var mt=0;mt<y;mt++){var X=0,J=0;if(f=U?M.geometries[mt]:M,f!==null){v=f.coordinates;var et=f.type;switch(k=0,et){case null:break;case"Point":if(n(v,P,ht,X,J)===!1)return!1;P++,X++;break;case"LineString":case"MultiPoint":for(l=0;l<v.length;l++){if(n(v[l],P,ht,X,J)===!1)return!1;P++,et==="MultiPoint"&&X++}et==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(l=0;l<v.length;l++){for(h=0;h<v[l].length-k;h++){if(n(v[l][h],P,ht,X,J)===!1)return!1;P++}et==="MultiLineString"&&X++,et==="Polygon"&&J++}et==="Polygon"&&X++;break;case"MultiPolygon":for(l=0;l<v.length;l++){for(J=0,h=0;h<v[l].length;h++){for(p=0;p<v[l][h].length-k;p++){if(n(v[l][h][p],P,ht,X,J)===!1)return!1;P++}J++}X++}break;case"GeometryCollection":for(l=0;l<f.geometries.length;l++)if(Sp(f.geometries[l],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ap(t,n){var s,l,h,p,f,y,v,M,k,P,U=0,H=t.type==="FeatureCollection",N=t.type==="Feature",$=H?t.features.length:1;for(s=0;s<$;s++){for(y=H?t.features[s].geometry:N?t.geometry:t,M=H?t.features[s].properties:N?t.properties:{},k=H?t.features[s].bbox:N?t.bbox:void 0,P=H?t.features[s].id:N?t.id:void 0,v=y?y.type==="GeometryCollection":!1,f=v?y.geometries.length:1,h=0;h<f;h++){if(p=v?y.geometries[h]:y,p===null){if(n(null,U,M,k,P)===!1)return!1;continue}switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(p,U,M,k,P)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<p.geometries.length;l++)if(n(p.geometries[l],U,M,k,P)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}U++}}function Eb(t,n,s){var l=s;return Ap(t,function(h,p,f,y,v){l=n(l,h,p,f,y,v)}),l}function kb(t,n){Ap(t,function(s,l,h,p,f){var y=s===null?null:s.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return n(fl(s,h,{bbox:p,id:f}),l,0)===!1?!1:void 0}var v;switch(y){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon";break}for(var M=0;M<s.coordinates.length;M++){var k=s.coordinates[M],P={type:v,coordinates:k};if(n(fl(P,h),l,M)===!1)return!1}})}function Mb(t,n){kb(t,function(s,l,h){var p=0;if(s.geometry){var f=s.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var y,v=0,M=0,k=0;if(Sp(s,function(P,U,H,N,$){if(y===void 0||l>v||N>M||$>k){y=P,v=l,M=N,k=$,p=0;return}var q=Zo([y,P],s.properties);if(n(q,l,h,$,p)===!1)return!1;p++,y=P})===!1)return!1}}})}function Pb(t,n,s){var l=s,h=!1;return Mb(t,function(p,f,y,v,M){h===!1&&s===void 0?l=p:l=n(l,p,f,y,v,M),h=!0}),l}function yd(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function yc(t,n,s){s===void 0&&(s={});var l=yd(t),h=yd(n),p=Ga(h[1]-l[1]),f=Ga(h[0]-l[0]),y=Ga(l[1]),v=Ga(h[1]),M=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(y)*Math.cos(v);return Cb(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)),s.units)}var vd=6378137;function Tp(t){return Eb(t,function(n,s){return n+Bb(s)},0)}function Bb(t){var n=0,s;switch(t.type){case"Polygon":return bd(t.coordinates);case"MultiPolygon":for(s=0;s<t.coordinates.length;s++)n+=bd(t.coordinates[s]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function bd(t){var n=0;if(t&&t.length>0){n+=Math.abs(xd(t[0]));for(var s=1;s<t.length;s++)n-=Math.abs(xd(t[s]))}return n}function xd(t){var n,s,l,h,p,f,y,v=0,M=t.length;if(M>2){for(y=0;y<M;y++)y===M-2?(h=M-2,p=M-1,f=0):y===M-1?(h=M-1,p=0,f=1):(h=y,p=y+1,f=y+2),n=t[h],s=t[p],l=t[f],v+=(Wu(l[0])-Wu(n[0]))*Math.sin(Wu(s[1]));v=v*vd*vd/2}return v}function Wu(t){return t*Math.PI/180}function pl(t,n){return n===void 0&&(n={}),Pb(t,function(s,l){var h=l.geometry.coordinates;return s+yc(h[0],h[1],n)},0)}const Sb={class:"drawing-tools"},Ab={class:"mb-6"},Tb={class:"grid grid-cols-2 gap-2"},Db=["onClick"],Rb={class:"text-sm"},Ob={key:0,class:"mb-6"},Ib={class:"space-y-4"},Fb={class:"grid grid-cols-6 gap-2"},zb=["onClick"],Nb={class:"flex items-center space-x-2"},jb={class:"text-sm"},Ub={class:"text-sm"},$b=["value"],Gb={key:0},Vb={class:"flex items-center space-x-2"},Hb={class:"text-sm"},Zb={key:1,class:"mb-6"},qb={class:"space-y-2 text-sm"},Kb={class:"font-medium"},Wb={key:0},Jb={key:1},Xb={key:2},Yb={key:3},Qb={key:4},t1={key:5},e1=Xi({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","properties-update"],setup(t,{emit:n}){const s=t,l=n,h=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"}],p=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],f=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],y=ie("#3B82F6"),v=ie(.2),M=ie("#2563EB"),k=ie(1),P=ie(2),U=ie("solid"),H=ie(0),N=ie(0),$=Ae(()=>{var ut,Ct;return(Ct=(ut=s.selectedShape)==null?void 0:ut.properties)!=null&&Ct.type?["Circle","Rectangle","Polygon"].includes(s.selectedShape.properties.type):!1}),q=ie(""),ht=ie(14),mt=ie("#FFFFFF"),X=ie(1),J=ie("#000000"),et=ie(1);gn(()=>s.selectedShape,ut=>{var Ct,Vt,Dt,Jt,zt,Yt,lt,Gt,Et,ne,$t,le,re,bt,Ut,Nt,Wt,Le,F,G;if(console.log("=== DRAWING TOOLS SHAPE UPDATE START ==="),console.log("Raw shape object:",Me(ut)),console.log("Shape constructor:",(Ct=ut==null?void 0:ut.constructor)==null?void 0:Ct.name),ut){if(!ut.properties||!ut.properties.type){console.warn("Invalid shape properties detected:",Me(ut.properties));const it=ut instanceof fe.Circle?(Vt=ut.options)!=null&&Vt.isSemicircle?"semicircle":"circle":ut instanceof fe.Rectangle?"rectangle":ut instanceof fe.Polygon?"polygon":ut instanceof fe.Polyline&&!(ut instanceof fe.Polygon)?"line":"unknown";console.log("Detected shape type:",it);const yt={type:it,style:{color:((Dt=ut.options)==null?void 0:Dt.color)||"#3388ff",weight:((Jt=ut.options)==null?void 0:Jt.weight)||3,opacity:((zt=ut.options)==null?void 0:zt.opacity)||1,fillColor:((Yt=ut.options)==null?void 0:Yt.fillColor)||"#3388ff",fillOpacity:((lt=ut.options)==null?void 0:lt.fillOpacity)||.2,dashArray:((Gt=ut.options)==null?void 0:Gt.dashArray)||""}};if(ut instanceof fe.Circle){const wt=ut.getRadius();yt.radius=wt,it==="circle"?(yt.area=Math.PI*Math.pow(wt,2),yt.perimeter=2*Math.PI*wt):(yt.area=Math.PI*Math.pow(wt,2)/2,yt.perimeter=Math.PI*wt+2*wt)}else if(ut instanceof fe.Rectangle){const wt=ut.getBounds(),xt=wt.getNorthEast(),Rt=wt.getSouthWest(),Ot=yc([Rt.lng,Rt.lat],[xt.lng,Rt.lat],{units:"meters"}),Ft=yc([Rt.lng,Rt.lat],[Rt.lng,xt.lat],{units:"meters"});yt.width=Ot,yt.height=Ft,yt.area=Ot*Ft,yt.perimeter=2*(Ot+Ft)}else if(ut instanceof fe.Polygon){const xt=ut.getLatLngs()[0].map(Ot=>[Ot.lng,Ot.lat]);xt.push(xt[0]);const Rt=Bp([xt]);yt.area=Tp(Rt),yt.perimeter=pl(Zo([...xt]),{units:"meters"})}else if(ut instanceof fe.Polyline&&!(ut instanceof fe.Polygon)){const xt=ut.getLatLngs().map(Ot=>[Ot.lng,Ot.lat]),Rt=Zo(xt);yt.length=pl(Rt,{units:"meters"})}console.log("Created base properties:",yt),ut.properties=yt}console.log("Final shape properties:",Me(ut.properties)),y.value=((Et=ut.properties.style)==null?void 0:Et.fillColor)||"#3B82F6",v.value=((ne=ut.properties.style)==null?void 0:ne.fillOpacity)||.2,M.value=(($t=ut.properties.style)==null?void 0:$t.color)||"#2563EB",k.value=((le=ut.properties.style)==null?void 0:le.opacity)||1,P.value=((re=ut.properties.style)==null?void 0:re.weight)||2,U.value=dt((bt=ut.properties.style)==null?void 0:bt.dashArray),H.value=ut.properties.radius||0,N.value=ut.properties.orientation||0,console.log("Updated UI controls:",{fillColor:y.value,fillOpacity:v.value,strokeColor:M.value,strokeOpacity:k.value,strokeWidth:P.value,strokeStyle:U.value,radius:H.value,startAngle:N.value}),ut&&((Ut=ut.properties)==null?void 0:Ut.type)==="text"&&(q.value=ut.properties.text||"",ht.value=((Nt=ut.properties.style)==null?void 0:Nt.fontSize)||14,mt.value=((Wt=ut.properties.style)==null?void 0:Wt.backgroundColor)||"#FFFFFF",X.value=((Le=ut.properties.style)==null?void 0:Le.backgroundOpacity)||1,J.value=((F=ut.properties.style)==null?void 0:F.borderColor)||"#000000",et.value=((G=ut.properties.style)==null?void 0:G.borderOpacity)||1)}console.log("=== DRAWING TOOLS SHAPE UPDATE END ===")},{immediate:!0,deep:!0});const nt=ut=>{switch(ut){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},dt=ut=>{if(!ut)return"solid";switch(ut){case"10,10":return"dashed";case"2,5":return"dotted";case"10,5,2,5":return"dashdot";default:return"solid"}},Tt=ut=>{M.value=ut,$.value&&(y.value=ut),Lt({strokeColor:ut,fillColor:$.value?ut:void 0})},Lt=ut=>{l("style-update",{...ut,fillOpacity:ut.fillOpacity!==void 0?parseFloat(ut.fillOpacity):void 0,strokeOpacity:ut.strokeOpacity!==void 0?parseFloat(ut.strokeOpacity):void 0,strokeWidth:ut.strokeWidth!==void 0?parseInt(ut.strokeWidth):void 0})},Mt={circle:"Cercle",semicircle:"Demi-cercle",rectangle:"Rectangle",polygon:"Polygone",line:"Ligne",text:"Texte",unknown:"Inconnu"},vt=ut=>ut<1e4?`${ut.toFixed(1)} m²`:`${(ut/1e4).toFixed(2)} ha`,Bt=ut=>`${(ut/100).toFixed(2)} ha`;return(ut,Ct)=>{var Vt;return It(),jt("div",Sb,[E("div",Ab,[Ct[12]||(Ct[12]=E("h3",{class:"text-lg font-semibold mb-4"},"Outils de dessin",-1)),E("div",Tb,[(It(),jt(Ze,null,Oi(h,Dt=>E("button",{key:Dt.type,class:br(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":ut.currentTool===Dt.type,"hover:bg-gray-50 border-gray-200":ut.currentTool!==Dt.type}]),onClick:Jt=>ut.$emit("tool-change",Dt.type)},[E("span",Rb,Kt(Dt.label),1)],10,Db)),64))])]),ut.selectedShape?(It(),jt("div",Ob,[Ct[18]||(Ct[18]=E("h3",{class:"text-lg font-semibold mb-4"},"Style",-1)),E("div",Ib,[E("div",null,[Ct[13]||(Ct[13]=E("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Couleurs prédéfinies ",-1)),E("div",Fb,[(It(),jt(Ze,null,Oi(p,Dt=>E("button",{key:Dt,class:"w-8 h-8 rounded-full border-2 border-gray-200",style:vl({backgroundColor:Dt}),onClick:Jt=>Tt(Dt)},null,12,zb)),64))])]),E("div",null,[Ct[14]||(Ct[14]=E("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de bordure ",-1)),E("div",Nb,[Ie(E("input",{type:"color","onUpdate:modelValue":Ct[0]||(Ct[0]=Dt=>M.value=Dt),class:"w-8 h-8 rounded border",onChange:Ct[1]||(Ct[1]=Dt=>Lt({strokeColor:M.value}))},null,544),[[We,M.value]]),Ie(E("input",{type:"range","onUpdate:modelValue":Ct[2]||(Ct[2]=Dt=>k.value=Dt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:Ct[3]||(Ct[3]=Dt=>Lt({strokeOpacity:k.value}))},null,544),[[We,k.value]]),E("span",jb,Kt((k.value*100).toFixed(0))+"%",1)])]),E("div",null,[Ct[15]||(Ct[15]=E("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Épaisseur de trait ",-1)),Ie(E("input",{type:"range","onUpdate:modelValue":Ct[4]||(Ct[4]=Dt=>P.value=Dt),min:"1",max:"10",class:"w-full",onChange:Ct[5]||(Ct[5]=Dt=>Lt({strokeWidth:P.value}))},null,544),[[We,P.value]]),E("span",Ub,Kt(P.value)+"px",1)]),E("div",null,[Ct[16]||(Ct[16]=E("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Type de trait ",-1)),Ie(E("select",{"onUpdate:modelValue":Ct[6]||(Ct[6]=Dt=>U.value=Dt),class:"w-full px-2 py-1 rounded border",onChange:Ct[7]||(Ct[7]=Dt=>Lt({dashArray:nt(U.value)}))},[(It(),jt(Ze,null,Oi(f,Dt=>E("option",{key:Dt.value,value:Dt.value},Kt(Dt.label),9,$b)),64))],544),[[Uo,U.value]])]),$.value?(It(),jt("div",Gb,[Ct[17]||(Ct[17]=E("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de remplissage ",-1)),E("div",Vb,[Ie(E("input",{type:"color","onUpdate:modelValue":Ct[8]||(Ct[8]=Dt=>y.value=Dt),class:"w-8 h-8 rounded border",onChange:Ct[9]||(Ct[9]=Dt=>Lt({fillColor:y.value}))},null,544),[[We,y.value]]),Ie(E("input",{type:"range","onUpdate:modelValue":Ct[10]||(Ct[10]=Dt=>v.value=Dt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:Ct[11]||(Ct[11]=Dt=>Lt({fillOpacity:v.value}))},null,544),[[We,v.value]]),E("span",Hb,Kt((v.value*100).toFixed(0))+"%",1)])])):ge("",!0)])])):ge("",!0),(Vt=ut.selectedShape)!=null&&Vt.properties?(It(),jt("div",Zb,[Ct[19]||(Ct[19]=E("h3",{class:"text-lg font-semibold mb-4"},"Propriétés",-1)),E("div",qb,[E("div",Kb," Type: "+Kt(Mt[ut.selectedShape.properties.type]||"Non défini"),1),ut.selectedShape.properties.area?(It(),jt("div",Wb," Surface: "+Kt(vt(ut.selectedShape.properties.area)),1)):ge("",!0),ut.selectedShape.properties.length?(It(),jt("div",Jb," Longueur: "+Kt(Bt(ut.selectedShape.properties.length)),1)):ge("",!0),ut.selectedShape.properties.perimeter?(It(),jt("div",Xb," Périmètre: "+Kt(Bt(ut.selectedShape.properties.perimeter)),1)):ge("",!0),ut.selectedShape.properties.radius?(It(),jt("div",Yb," Rayon: "+Kt(Bt(ut.selectedShape.properties.radius)),1)):ge("",!0),ut.selectedShape.properties.width?(It(),jt("div",Qb," Largeur: "+Kt(Bt(ut.selectedShape.properties.width)),1)):ge("",!0),ut.selectedShape.properties.height?(It(),jt("div",t1," Hauteur: "+Kt(Bt(ut.selectedShape.properties.height)),1)):ge("",!0)])])):ge("",!0)])}}}),i1=Pp(e1,[["__scopeId","data-v-f75b9339"]]);(()=>{var Yc,Qc;var t=Object.create,n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,h=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports),y=(i,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of l(r))!p.call(i,d)&&d!==a&&n(i,d,{get:()=>r[d],enumerable:!(u=s(r,d))||u.enumerable});return i},v=(i,r,a)=>(a=i!=null?t(h(i)):{},y(r||!i||!i.__esModule?n(a,"default",{value:i,enumerable:!0}):a,i)),M=f((i,r)=>{function a(){this.__data__=[],this.size=0}r.exports=a}),k=f((i,r)=>{function a(u,d){return u===d||u!==u&&d!==d}r.exports=a}),P=f((i,r)=>{var a=k();function u(d,g){for(var _=d.length;_--;)if(a(d[_][0],g))return _;return-1}r.exports=u}),U=f((i,r)=>{var a=P(),u=Array.prototype,d=u.splice;function g(_){var b=this.__data__,w=a(b,_);if(w<0)return!1;var B=b.length-1;return w==B?b.pop():d.call(b,w,1),--this.size,!0}r.exports=g}),H=f((i,r)=>{var a=P();function u(d){var g=this.__data__,_=a(g,d);return _<0?void 0:g[_][1]}r.exports=u}),N=f((i,r)=>{var a=P();function u(d){return a(this.__data__,d)>-1}r.exports=u}),$=f((i,r)=>{var a=P();function u(d,g){var _=this.__data__,b=a(_,d);return b<0?(++this.size,_.push([d,g])):_[b][1]=g,this}r.exports=u}),q=f((i,r)=>{var a=M(),u=U(),d=H(),g=N(),_=$();function b(w){var B=-1,j=w==null?0:w.length;for(this.clear();++B<j;){var I=w[B];this.set(I[0],I[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),ht=f((i,r)=>{var a=q();function u(){this.__data__=new a,this.size=0}r.exports=u}),mt=f((i,r)=>{function a(u){var d=this.__data__,g=d.delete(u);return this.size=d.size,g}r.exports=a}),X=f((i,r)=>{function a(u){return this.__data__.get(u)}r.exports=a}),J=f((i,r)=>{function a(u){return this.__data__.has(u)}r.exports=a}),et=f((i,r)=>{var a=typeof Xn=="object"&&Xn&&Xn.Object===Object&&Xn;r.exports=a}),nt=f((i,r)=>{var a=et(),u=typeof self=="object"&&self&&self.Object===Object&&self,d=a||u||Function("return this")();r.exports=d}),dt=f((i,r)=>{var a=nt(),u=a.Symbol;r.exports=u}),Tt=f((i,r)=>{var a=dt(),u=Object.prototype,d=u.hasOwnProperty,g=u.toString,_=a?a.toStringTag:void 0;function b(w){var B=d.call(w,_),j=w[_];try{w[_]=void 0;var I=!0}catch{}var at=g.call(w);return I&&(B?w[_]=j:delete w[_]),at}r.exports=b}),Lt=f((i,r)=>{var a=Object.prototype,u=a.toString;function d(g){return u.call(g)}r.exports=d}),Mt=f((i,r)=>{var a=dt(),u=Tt(),d=Lt(),g="[object Null]",_="[object Undefined]",b=a?a.toStringTag:void 0;function w(B){return B==null?B===void 0?_:g:b&&b in Object(B)?u(B):d(B)}r.exports=w}),vt=f((i,r)=>{function a(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}r.exports=a}),Bt=f((i,r)=>{var a=Mt(),u=vt(),d="[object AsyncFunction]",g="[object Function]",_="[object GeneratorFunction]",b="[object Proxy]";function w(B){if(!u(B))return!1;var j=a(B);return j==g||j==_||j==d||j==b}r.exports=w}),ut=f((i,r)=>{var a=nt(),u=a["__core-js_shared__"];r.exports=u}),Ct=f((i,r)=>{var a=ut(),u=function(){var g=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function d(g){return!!u&&u in g}r.exports=d}),Vt=f((i,r)=>{var a=Function.prototype,u=a.toString;function d(g){if(g!=null){try{return u.call(g)}catch{}try{return g+""}catch{}}return""}r.exports=d}),Dt=f((i,r)=>{var a=Bt(),u=Ct(),d=vt(),g=Vt(),_=/[\\^$.*+?()[\]{}|]/g,b=/^\[object .+?Constructor\]$/,w=Function.prototype,B=Object.prototype,j=w.toString,I=B.hasOwnProperty,at=RegExp("^"+j.call(I).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ft(St){if(!d(St)||u(St))return!1;var Ht=a(St)?at:b;return Ht.test(g(St))}r.exports=ft}),Jt=f((i,r)=>{function a(u,d){return u==null?void 0:u[d]}r.exports=a}),zt=f((i,r)=>{var a=Dt(),u=Jt();function d(g,_){var b=u(g,_);return a(b)?b:void 0}r.exports=d}),Yt=f((i,r)=>{var a=zt(),u=nt(),d=a(u,"Map");r.exports=d}),lt=f((i,r)=>{var a=zt(),u=a(Object,"create");r.exports=u}),Gt=f((i,r)=>{var a=lt();function u(){this.__data__=a?a(null):{},this.size=0}r.exports=u}),Et=f((i,r)=>{function a(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}r.exports=a}),ne=f((i,r)=>{var a=lt(),u="__lodash_hash_undefined__",d=Object.prototype,g=d.hasOwnProperty;function _(b){var w=this.__data__;if(a){var B=w[b];return B===u?void 0:B}return g.call(w,b)?w[b]:void 0}r.exports=_}),$t=f((i,r)=>{var a=lt(),u=Object.prototype,d=u.hasOwnProperty;function g(_){var b=this.__data__;return a?b[_]!==void 0:d.call(b,_)}r.exports=g}),le=f((i,r)=>{var a=lt(),u="__lodash_hash_undefined__";function d(g,_){var b=this.__data__;return this.size+=this.has(g)?0:1,b[g]=a&&_===void 0?u:_,this}r.exports=d}),re=f((i,r)=>{var a=Gt(),u=Et(),d=ne(),g=$t(),_=le();function b(w){var B=-1,j=w==null?0:w.length;for(this.clear();++B<j;){var I=w[B];this.set(I[0],I[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),bt=f((i,r)=>{var a=re(),u=q(),d=Yt();function g(){this.size=0,this.__data__={hash:new a,map:new(d||u),string:new a}}r.exports=g}),Ut=f((i,r)=>{function a(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}r.exports=a}),Nt=f((i,r)=>{var a=Ut();function u(d,g){var _=d.__data__;return a(g)?_[typeof g=="string"?"string":"hash"]:_.map}r.exports=u}),Wt=f((i,r)=>{var a=Nt();function u(d){var g=a(this,d).delete(d);return this.size-=g?1:0,g}r.exports=u}),Le=f((i,r)=>{var a=Nt();function u(d){return a(this,d).get(d)}r.exports=u}),F=f((i,r)=>{var a=Nt();function u(d){return a(this,d).has(d)}r.exports=u}),G=f((i,r)=>{var a=Nt();function u(d,g){var _=a(this,d),b=_.size;return _.set(d,g),this.size+=_.size==b?0:1,this}r.exports=u}),it=f((i,r)=>{var a=bt(),u=Wt(),d=Le(),g=F(),_=G();function b(w){var B=-1,j=w==null?0:w.length;for(this.clear();++B<j;){var I=w[B];this.set(I[0],I[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),yt=f((i,r)=>{var a=q(),u=Yt(),d=it(),g=200;function _(b,w){var B=this.__data__;if(B instanceof a){var j=B.__data__;if(!u||j.length<g-1)return j.push([b,w]),this.size=++B.size,this;B=this.__data__=new d(j)}return B.set(b,w),this.size=B.size,this}r.exports=_}),wt=f((i,r)=>{var a=q(),u=ht(),d=mt(),g=X(),_=J(),b=yt();function w(B){var j=this.__data__=new a(B);this.size=j.size}w.prototype.clear=u,w.prototype.delete=d,w.prototype.get=g,w.prototype.has=_,w.prototype.set=b,r.exports=w}),xt=f((i,r)=>{var a=zt(),u=function(){try{var d=a(Object,"defineProperty");return d({},"",{}),d}catch{}}();r.exports=u}),Rt=f((i,r)=>{var a=xt();function u(d,g,_){g=="__proto__"&&a?a(d,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[g]=_}r.exports=u}),Ot=f((i,r)=>{var a=Rt(),u=k();function d(g,_,b){(b!==void 0&&!u(g[_],b)||b===void 0&&!(_ in g))&&a(g,_,b)}r.exports=d}),Ft=f((i,r)=>{function a(u){return function(d,g,_){for(var b=-1,w=Object(d),B=_(d),j=B.length;j--;){var I=B[u?j:++b];if(g(w[I],I,w)===!1)break}return d}}r.exports=a}),At=f((i,r)=>{var a=Ft(),u=a();r.exports=u}),ue=f((i,r)=>{var a=nt(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g?a.Buffer:void 0,b=_?_.allocUnsafe:void 0;function w(B,j){if(j)return B.slice();var I=B.length,at=b?b(I):new B.constructor(I);return B.copy(at),at}r.exports=w}),Zt=f((i,r)=>{var a=nt(),u=a.Uint8Array;r.exports=u}),oe=f((i,r)=>{var a=Zt();function u(d){var g=new d.constructor(d.byteLength);return new a(g).set(new a(d)),g}r.exports=u}),de=f((i,r)=>{var a=oe();function u(d,g){var _=g?a(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}r.exports=u}),xe=f((i,r)=>{function a(u,d){var g=-1,_=u.length;for(d||(d=Array(_));++g<_;)d[g]=u[g];return d}r.exports=a}),Te=f((i,r)=>{var a=vt(),u=Object.create,d=function(){function g(){}return function(_){if(!a(_))return{};if(u)return u(_);g.prototype=_;var b=new g;return g.prototype=void 0,b}}();r.exports=d}),Pe=f((i,r)=>{function a(u,d){return function(g){return u(d(g))}}r.exports=a}),ui=f((i,r)=>{var a=Pe(),u=a(Object.getPrototypeOf,Object);r.exports=u}),ei=f((i,r)=>{var a=Object.prototype;function u(d){var g=d&&d.constructor,_=typeof g=="function"&&g.prototype||a;return d===_}r.exports=u}),Mi=f((i,r)=>{var a=Te(),u=ui(),d=ei();function g(_){return typeof _.constructor=="function"&&!d(_)?a(u(_)):{}}r.exports=g}),ri=f((i,r)=>{function a(u){return u!=null&&typeof u=="object"}r.exports=a}),bn=f((i,r)=>{var a=Mt(),u=ri(),d="[object Arguments]";function g(_){return u(_)&&a(_)==d}r.exports=g}),On=f((i,r)=>{var a=bn(),u=ri(),d=Object.prototype,g=d.hasOwnProperty,_=d.propertyIsEnumerable,b=a(function(){return arguments}())?a:function(w){return u(w)&&g.call(w,"callee")&&!_.call(w,"callee")};r.exports=b}),Je=f((i,r)=>{var a=Array.isArray;r.exports=a}),Pi=f((i,r)=>{var a=9007199254740991;function u(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=a}r.exports=u}),Yi=f((i,r)=>{var a=Bt(),u=Pi();function d(g){return g!=null&&u(g.length)&&!a(g)}r.exports=d}),Fl=f((i,r)=>{var a=Yi(),u=ri();function d(g){return u(g)&&a(g)}r.exports=d}),zl=f((i,r)=>{function a(){return!1}r.exports=a}),Ns=f((i,r)=>{var a=nt(),u=zl(),d=typeof i=="object"&&i&&!i.nodeType&&i,g=d&&typeof r=="object"&&r&&!r.nodeType&&r,_=g&&g.exports===d,b=_?a.Buffer:void 0,w=b?b.isBuffer:void 0,B=w||u;r.exports=B}),ta=f((i,r)=>{var a=Mt(),u=ui(),d=ri(),g="[object Object]",_=Function.prototype,b=Object.prototype,w=_.toString,B=b.hasOwnProperty,j=w.call(Object);function I(at){if(!d(at)||a(at)!=g)return!1;var ft=u(at);if(ft===null)return!0;var St=B.call(ft,"constructor")&&ft.constructor;return typeof St=="function"&&St instanceof St&&w.call(St)==j}r.exports=I}),ea=f((i,r)=>{var a=Mt(),u=Pi(),d=ri(),g="[object Arguments]",_="[object Array]",b="[object Boolean]",w="[object Date]",B="[object Error]",j="[object Function]",I="[object Map]",at="[object Number]",ft="[object Object]",St="[object RegExp]",Ht="[object Set]",Qt="[object String]",ke="[object WeakMap]",z="[object ArrayBuffer]",Z="[object DataView]",Q="[object Float32Array]",pt="[object Float64Array]",tt="[object Int8Array]",ct="[object Int16Array]",C="[object Int32Array]",A="[object Uint8Array]",D="[object Uint8ClampedArray]",T="[object Uint16Array]",R="[object Uint32Array]",O={};O[Q]=O[pt]=O[tt]=O[ct]=O[C]=O[A]=O[D]=O[T]=O[R]=!0,O[g]=O[_]=O[z]=O[b]=O[Z]=O[w]=O[B]=O[j]=O[I]=O[at]=O[ft]=O[St]=O[Ht]=O[Qt]=O[ke]=!1;function W(K){return d(K)&&u(K.length)&&!!O[a(K)]}r.exports=W}),Nl=f((i,r)=>{function a(u){return function(d){return u(d)}}r.exports=a}),jl=f((i,r)=>{var a=et(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g&&a.process,b=function(){try{var w=d&&d.require&&d.require("util").types;return w||_&&_.binding&&_.binding("util")}catch{}}();r.exports=b}),ia=f((i,r)=>{var a=ea(),u=Nl(),d=jl(),g=d&&d.isTypedArray,_=g?u(g):a;r.exports=_}),na=f((i,r)=>{function a(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}r.exports=a}),Ul=f((i,r)=>{var a=Rt(),u=k(),d=Object.prototype,g=d.hasOwnProperty;function _(b,w,B){var j=b[w];(!(g.call(b,w)&&u(j,B))||B===void 0&&!(w in b))&&a(b,w,B)}r.exports=_}),$l=f((i,r)=>{var a=Ul(),u=Rt();function d(g,_,b,w){var B=!b;b||(b={});for(var j=-1,I=_.length;++j<I;){var at=_[j],ft=w?w(b[at],g[at],at,b,g):void 0;ft===void 0&&(ft=g[at]),B?u(b,at,ft):a(b,at,ft)}return b}r.exports=d}),js=f((i,r)=>{function a(u,d){for(var g=-1,_=Array(u);++g<u;)_[g]=d(g);return _}r.exports=a}),ra=f((i,r)=>{var a=9007199254740991,u=/^(?:0|[1-9]\d*)$/;function d(g,_){var b=typeof g;return _=_??a,!!_&&(b=="number"||b!="symbol"&&u.test(g))&&g>-1&&g%1==0&&g<_}r.exports=d}),Gl=f((i,r)=>{var a=js(),u=On(),d=Je(),g=Ns(),_=ra(),b=ia(),w=Object.prototype,B=w.hasOwnProperty;function j(I,at){var ft=d(I),St=!ft&&u(I),Ht=!ft&&!St&&g(I),Qt=!ft&&!St&&!Ht&&b(I),ke=ft||St||Ht||Qt,z=ke?a(I.length,String):[],Z=z.length;for(var Q in I)(at||B.call(I,Q))&&!(ke&&(Q=="length"||Ht&&(Q=="offset"||Q=="parent")||Qt&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||_(Q,Z)))&&z.push(Q);return z}r.exports=j}),Vl=f((i,r)=>{function a(u){var d=[];if(u!=null)for(var g in Object(u))d.push(g);return d}r.exports=a}),Hl=f((i,r)=>{var a=vt(),u=ei(),d=Vl(),g=Object.prototype,_=g.hasOwnProperty;function b(w){if(!a(w))return d(w);var B=u(w),j=[];for(var I in w)I=="constructor"&&(B||!_.call(w,I))||j.push(I);return j}r.exports=b}),Vi=f((i,r)=>{var a=Gl(),u=Hl(),d=Yi();function g(_){return d(_)?a(_,!0):u(_)}r.exports=g}),se=f((i,r)=>{var a=$l(),u=Vi();function d(g){return a(g,u(g))}r.exports=d}),sa=f((i,r)=>{var a=Ot(),u=ue(),d=de(),g=xe(),_=Mi(),b=On(),w=Je(),B=Fl(),j=Ns(),I=Bt(),at=vt(),ft=ta(),St=ia(),Ht=na(),Qt=se();function ke(z,Z,Q,pt,tt,ct,C){var A=Ht(z,Q),D=Ht(Z,Q),T=C.get(D);if(T){a(z,Q,T);return}var R=ct?ct(A,D,Q+"",z,Z,C):void 0,O=R===void 0;if(O){var W=w(D),K=!W&&j(D),Y=!W&&!K&&St(D);R=D,W||K||Y?w(A)?R=A:B(A)?R=g(A):K?(O=!1,R=u(D,!0)):Y?(O=!1,R=d(D,!0)):R=[]:ft(D)||b(D)?(R=A,b(A)?R=Qt(A):(!at(A)||I(A))&&(R=_(D))):O=!1}O&&(C.set(D,R),tt(R,D,pt,ct,C),C.delete(D)),a(z,Q,R)}r.exports=ke}),oa=f((i,r)=>{var a=wt(),u=Ot(),d=At(),g=sa(),_=vt(),b=Vi(),w=na();function B(j,I,at,ft,St){j!==I&&d(I,function(Ht,Qt){if(St||(St=new a),_(Ht))g(j,I,Qt,at,B,ft,St);else{var ke=ft?ft(w(j,Qt),Ht,Qt+"",j,I,St):void 0;ke===void 0&&(ke=Ht),u(j,Qt,ke)}},b)}r.exports=B}),Us=f((i,r)=>{function a(u){return u}r.exports=a}),aa=f((i,r)=>{function a(u,d,g){switch(g.length){case 0:return u.call(d);case 1:return u.call(d,g[0]);case 2:return u.call(d,g[0],g[1]);case 3:return u.call(d,g[0],g[1],g[2])}return u.apply(d,g)}r.exports=a}),$s=f((i,r)=>{var a=aa(),u=Math.max;function d(g,_,b){return _=u(_===void 0?g.length-1:_,0),function(){for(var w=arguments,B=-1,j=u(w.length-_,0),I=Array(j);++B<j;)I[B]=w[_+B];B=-1;for(var at=Array(_+1);++B<_;)at[B]=w[B];return at[_]=b(I),a(g,this,at)}}r.exports=d}),la=f((i,r)=>{function a(u){return function(){return u}}r.exports=a}),er=f((i,r)=>{var a=la(),u=xt(),d=Us(),g=u?function(_,b){return u(_,"toString",{configurable:!0,enumerable:!1,value:a(b),writable:!0})}:d;r.exports=g}),ua=f((i,r)=>{var a=800,u=16,d=Date.now;function g(_){var b=0,w=0;return function(){var B=d(),j=u-(B-w);if(w=B,j>0){if(++b>=a)return arguments[0]}else b=0;return _.apply(void 0,arguments)}}r.exports=g}),Zl=f((i,r)=>{var a=er(),u=ua(),d=u(a);r.exports=d}),ql=f((i,r)=>{var a=Us(),u=$s(),d=Zl();function g(_,b){return d(u(_,b,a),_+"")}r.exports=g}),Kl=f((i,r)=>{var a=k(),u=Yi(),d=ra(),g=vt();function _(b,w,B){if(!g(B))return!1;var j=typeof w;return(j=="number"?u(B)&&d(w,B.length):j=="string"&&w in B)?a(B[w],b):!1}r.exports=_}),Wl=f((i,r)=>{var a=ql(),u=Kl();function d(g){return a(function(_,b){var w=-1,B=b.length,j=B>1?b[B-1]:void 0,I=B>2?b[2]:void 0;for(j=g.length>3&&typeof j=="function"?(B--,j):void 0,I&&u(b[0],b[1],I)&&(j=B<3?void 0:j,B=1),_=Object(_);++w<B;){var at=b[w];at&&g(_,at,w,j)}return _})}r.exports=d}),Jr=f((i,r)=>{var a=oa(),u=Wl(),d=u(function(g,_,b){a(g,_,b)});r.exports=d}),Gs=f((i,r)=>{var a=Mt(),u=ri(),d="[object Symbol]";function g(_){return typeof _=="symbol"||u(_)&&a(_)==d}r.exports=g}),Xr=f((i,r)=>{var a=Je(),u=Gs(),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function _(b,w){if(a(b))return!1;var B=typeof b;return B=="number"||B=="symbol"||B=="boolean"||b==null||u(b)?!0:g.test(b)||!d.test(b)||w!=null&&b in Object(w)}r.exports=_}),Jl=f((i,r)=>{var a=it(),u="Expected a function";function d(g,_){if(typeof g!="function"||_!=null&&typeof _!="function")throw new TypeError(u);var b=function(){var w=arguments,B=_?_.apply(this,w):w[0],j=b.cache;if(j.has(B))return j.get(B);var I=g.apply(this,w);return b.cache=j.set(B,I)||j,I};return b.cache=new(d.Cache||a),b}d.Cache=a,r.exports=d}),Xl=f((i,r)=>{var a=Jl(),u=500;function d(g){var _=a(g,function(w){return b.size===u&&b.clear(),w}),b=_.cache;return _}r.exports=d}),Yl=f((i,r)=>{var a=Xl(),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,g=a(function(_){var b=[];return _.charCodeAt(0)===46&&b.push(""),_.replace(u,function(w,B,j,I){b.push(j?I.replace(d,"$1"):B||w)}),b});r.exports=g}),Ql=f((i,r)=>{function a(u,d){for(var g=-1,_=u==null?0:u.length,b=Array(_);++g<_;)b[g]=d(u[g],g,u);return b}r.exports=a}),tu=f((i,r)=>{var a=dt(),u=Ql(),d=Je(),g=Gs(),_=a?a.prototype:void 0,b=_?_.toString:void 0;function w(B){if(typeof B=="string")return B;if(d(B))return u(B,w)+"";if(g(B))return b?b.call(B):"";var j=B+"";return j=="0"&&1/B==-1/0?"-0":j}r.exports=w}),Vs=f((i,r)=>{var a=tu();function u(d){return d==null?"":a(d)}r.exports=u}),Cr=f((i,r)=>{var a=Je(),u=Xr(),d=Yl(),g=Vs();function _(b,w){return a(b)?b:u(b,w)?[b]:d(g(b))}r.exports=_}),ca=f((i,r)=>{var a=Gs();function u(d){if(typeof d=="string"||a(d))return d;var g=d+"";return g=="0"&&1/d==-1/0?"-0":g}r.exports=u}),ha=f((i,r)=>{var a=Cr(),u=ca();function d(g,_){_=a(_,g);for(var b=0,w=_.length;g!=null&&b<w;)g=g[u(_[b++])];return b&&b==w?g:void 0}r.exports=d}),xn=f((i,r)=>{var a=ha();function u(d,g,_){var b=d==null?void 0:a(d,g);return b===void 0?_:b}r.exports=u}),Be=f((i,r)=>{(function(a,u){typeof i=="object"&&typeof r<"u"?r.exports=u():(a=a||self).RBush=u()})(i,function(){function a(z,Z,Q,pt,tt){(function ct(C,A,D,T,R){for(;T>D;){if(T-D>600){var O=T-D+1,W=A-D+1,K=Math.log(O),Y=.5*Math.exp(2*K/3),ot=.5*Math.sqrt(K*Y*(O-Y)/O)*(W-O/2<0?-1:1),st=Math.max(D,Math.floor(A-W*Y/O+ot)),kt=Math.min(T,Math.floor(A+(O-W)*Y/O+ot));ct(C,A,st,kt,R)}var Xt=C[A],te=D,ae=T;for(u(C,D,A),R(C[T],Xt)>0&&u(C,D,T);te<ae;){for(u(C,te,ae),te++,ae--;R(C[te],Xt)<0;)te++;for(;R(C[ae],Xt)>0;)ae--}R(C[D],Xt)===0?u(C,D,ae):u(C,++ae,T),ae<=A&&(D=ae+1),A<=ae&&(T=ae-1)}})(z,Z,Q||0,pt||z.length-1,tt||d)}function u(z,Z,Q){var pt=z[Z];z[Z]=z[Q],z[Q]=pt}function d(z,Z){return z<Z?-1:z>Z?1:0}var g=function(z){z===void 0&&(z=9),this._maxEntries=Math.max(4,z),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function _(z,Z,Q){if(!Q)return Z.indexOf(z);for(var pt=0;pt<Z.length;pt++)if(Q(z,Z[pt]))return pt;return-1}function b(z,Z){w(z,0,z.children.length,Z,z)}function w(z,Z,Q,pt,tt){tt||(tt=Qt(null)),tt.minX=1/0,tt.minY=1/0,tt.maxX=-1/0,tt.maxY=-1/0;for(var ct=Z;ct<Q;ct++){var C=z.children[ct];B(tt,z.leaf?pt(C):C)}return tt}function B(z,Z){return z.minX=Math.min(z.minX,Z.minX),z.minY=Math.min(z.minY,Z.minY),z.maxX=Math.max(z.maxX,Z.maxX),z.maxY=Math.max(z.maxY,Z.maxY),z}function j(z,Z){return z.minX-Z.minX}function I(z,Z){return z.minY-Z.minY}function at(z){return(z.maxX-z.minX)*(z.maxY-z.minY)}function ft(z){return z.maxX-z.minX+(z.maxY-z.minY)}function St(z,Z){return z.minX<=Z.minX&&z.minY<=Z.minY&&Z.maxX<=z.maxX&&Z.maxY<=z.maxY}function Ht(z,Z){return Z.minX<=z.maxX&&Z.minY<=z.maxY&&Z.maxX>=z.minX&&Z.maxY>=z.minY}function Qt(z){return{children:z,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ke(z,Z,Q,pt,tt){for(var ct=[Z,Q];ct.length;)if(!((Q=ct.pop())-(Z=ct.pop())<=pt)){var C=Z+Math.ceil((Q-Z)/pt/2)*pt;a(z,C,Z,Q,tt),ct.push(Z,C,C,Q)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function(z){var Z=this.data,Q=[];if(!Ht(z,Z))return Q;for(var pt=this.toBBox,tt=[];Z;){for(var ct=0;ct<Z.children.length;ct++){var C=Z.children[ct],A=Z.leaf?pt(C):C;Ht(z,A)&&(Z.leaf?Q.push(C):St(z,A)?this._all(C,Q):tt.push(C))}Z=tt.pop()}return Q},g.prototype.collides=function(z){var Z=this.data;if(!Ht(z,Z))return!1;for(var Q=[];Z;){for(var pt=0;pt<Z.children.length;pt++){var tt=Z.children[pt],ct=Z.leaf?this.toBBox(tt):tt;if(Ht(z,ct)){if(Z.leaf||St(z,ct))return!0;Q.push(tt)}}Z=Q.pop()}return!1},g.prototype.load=function(z){if(!z||!z.length)return this;if(z.length<this._minEntries){for(var Z=0;Z<z.length;Z++)this.insert(z[Z]);return this}var Q=this._build(z.slice(),0,z.length-1,0);if(this.data.children.length)if(this.data.height===Q.height)this._splitRoot(this.data,Q);else{if(this.data.height<Q.height){var pt=this.data;this.data=Q,Q=pt}this._insert(Q,this.data.height-Q.height-1,!0)}else this.data=Q;return this},g.prototype.insert=function(z){return z&&this._insert(z,this.data.height-1),this},g.prototype.clear=function(){return this.data=Qt([]),this},g.prototype.remove=function(z,Z){if(!z)return this;for(var Q,pt,tt,ct=this.data,C=this.toBBox(z),A=[],D=[];ct||A.length;){if(ct||(ct=A.pop(),pt=A[A.length-1],Q=D.pop(),tt=!0),ct.leaf){var T=_(z,ct.children,Z);if(T!==-1)return ct.children.splice(T,1),A.push(ct),this._condense(A),this}tt||ct.leaf||!St(ct,C)?pt?(Q++,ct=pt.children[Q],tt=!1):ct=null:(A.push(ct),D.push(Q),Q=0,pt=ct,ct=ct.children[0])}return this},g.prototype.toBBox=function(z){return z},g.prototype.compareMinX=function(z,Z){return z.minX-Z.minX},g.prototype.compareMinY=function(z,Z){return z.minY-Z.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function(z){return this.data=z,this},g.prototype._all=function(z,Z){for(var Q=[];z;)z.leaf?Z.push.apply(Z,z.children):Q.push.apply(Q,z.children),z=Q.pop();return Z},g.prototype._build=function(z,Z,Q,pt){var tt,ct=Q-Z+1,C=this._maxEntries;if(ct<=C)return b(tt=Qt(z.slice(Z,Q+1)),this.toBBox),tt;pt||(pt=Math.ceil(Math.log(ct)/Math.log(C)),C=Math.ceil(ct/Math.pow(C,pt-1))),(tt=Qt([])).leaf=!1,tt.height=pt;var A=Math.ceil(ct/C),D=A*Math.ceil(Math.sqrt(C));ke(z,Z,Q,D,this.compareMinX);for(var T=Z;T<=Q;T+=D){var R=Math.min(T+D-1,Q);ke(z,T,R,A,this.compareMinY);for(var O=T;O<=R;O+=A){var W=Math.min(O+A-1,R);tt.children.push(this._build(z,O,W,pt-1))}}return b(tt,this.toBBox),tt},g.prototype._chooseSubtree=function(z,Z,Q,pt){for(;pt.push(Z),!Z.leaf&&pt.length-1!==Q;){for(var tt=1/0,ct=1/0,C=void 0,A=0;A<Z.children.length;A++){var D=Z.children[A],T=at(D),R=(O=z,W=D,(Math.max(W.maxX,O.maxX)-Math.min(W.minX,O.minX))*(Math.max(W.maxY,O.maxY)-Math.min(W.minY,O.minY))-T);R<ct?(ct=R,tt=T<tt?T:tt,C=D):R===ct&&T<tt&&(tt=T,C=D)}Z=C||Z.children[0]}var O,W;return Z},g.prototype._insert=function(z,Z,Q){var pt=Q?z:this.toBBox(z),tt=[],ct=this._chooseSubtree(pt,this.data,Z,tt);for(ct.children.push(z),B(ct,pt);Z>=0&&tt[Z].children.length>this._maxEntries;)this._split(tt,Z),Z--;this._adjustParentBBoxes(pt,tt,Z)},g.prototype._split=function(z,Z){var Q=z[Z],pt=Q.children.length,tt=this._minEntries;this._chooseSplitAxis(Q,tt,pt);var ct=this._chooseSplitIndex(Q,tt,pt),C=Qt(Q.children.splice(ct,Q.children.length-ct));C.height=Q.height,C.leaf=Q.leaf,b(Q,this.toBBox),b(C,this.toBBox),Z?z[Z-1].children.push(C):this._splitRoot(Q,C)},g.prototype._splitRoot=function(z,Z){this.data=Qt([z,Z]),this.data.height=z.height+1,this.data.leaf=!1,b(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function(z,Z,Q){for(var pt,tt,ct,C,A,D,T,R=1/0,O=1/0,W=Z;W<=Q-Z;W++){var K=w(z,0,W,this.toBBox),Y=w(z,W,Q,this.toBBox),ot=(tt=K,ct=Y,C=void 0,A=void 0,D=void 0,T=void 0,C=Math.max(tt.minX,ct.minX),A=Math.max(tt.minY,ct.minY),D=Math.min(tt.maxX,ct.maxX),T=Math.min(tt.maxY,ct.maxY),Math.max(0,D-C)*Math.max(0,T-A)),st=at(K)+at(Y);ot<R?(R=ot,pt=W,O=st<O?st:O):ot===R&&st<O&&(O=st,pt=W)}return pt||Q-Z},g.prototype._chooseSplitAxis=function(z,Z,Q){var pt=z.leaf?this.compareMinX:j,tt=z.leaf?this.compareMinY:I;this._allDistMargin(z,Z,Q,pt)<this._allDistMargin(z,Z,Q,tt)&&z.children.sort(pt)},g.prototype._allDistMargin=function(z,Z,Q,pt){z.children.sort(pt);for(var tt=this.toBBox,ct=w(z,0,Z,tt),C=w(z,Q-Z,Q,tt),A=ft(ct)+ft(C),D=Z;D<Q-Z;D++){var T=z.children[D];B(ct,z.leaf?tt(T):T),A+=ft(ct)}for(var R=Q-Z-1;R>=Z;R--){var O=z.children[R];B(C,z.leaf?tt(O):O),A+=ft(C)}return A},g.prototype._adjustParentBBoxes=function(z,Z,Q){for(var pt=Q;pt>=0;pt--)B(Z[pt],z)},g.prototype._condense=function(z){for(var Z=z.length-1,Q=void 0;Z>=0;Z--)z[Z].children.length===0?Z>0?(Q=z[Z-1].children).splice(Q.indexOf(z[Z]),1):this.clear():b(z[Z],this.toBBox)},g})}),$e=f(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(T,R,O){O===void 0&&(O={});var W={type:"Feature"};return(O.id===0||O.id)&&(W.id=O.id),O.bbox&&(W.bbox=O.bbox),W.properties=R||{},W.geometry=T,W}i.feature=r;function a(T,R,O){switch(T){case"Point":return u(R).geometry;case"LineString":return b(R).geometry;case"Polygon":return g(R).geometry;case"MultiPoint":return I(R).geometry;case"MultiLineString":return j(R).geometry;case"MultiPolygon":return at(R).geometry;default:throw new Error(T+" is invalid")}}i.geometry=a;function u(T,R,O){if(O===void 0&&(O={}),!T)throw new Error("coordinates is required");if(!Array.isArray(T))throw new Error("coordinates must be an Array");if(T.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ct(T[0])||!ct(T[1]))throw new Error("coordinates must contain numbers");var W={type:"Point",coordinates:T};return r(W,R,O)}i.point=u;function d(T,R,O){return O===void 0&&(O={}),B(T.map(function(W){return u(W,R)}),O)}i.points=d;function g(T,R,O){O===void 0&&(O={});for(var W=0,K=T;W<K.length;W++){var Y=K[W];if(Y.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ot=0;ot<Y[Y.length-1].length;ot++)if(Y[Y.length-1][ot]!==Y[0][ot])throw new Error("First and last Position are not equivalent.")}var st={type:"Polygon",coordinates:T};return r(st,R,O)}i.polygon=g;function _(T,R,O){return O===void 0&&(O={}),B(T.map(function(W){return g(W,R)}),O)}i.polygons=_;function b(T,R,O){if(O===void 0&&(O={}),T.length<2)throw new Error("coordinates must be an array of two or more positions");var W={type:"LineString",coordinates:T};return r(W,R,O)}i.lineString=b;function w(T,R,O){return O===void 0&&(O={}),B(T.map(function(W){return b(W,R)}),O)}i.lineStrings=w;function B(T,R){R===void 0&&(R={});var O={type:"FeatureCollection"};return R.id&&(O.id=R.id),R.bbox&&(O.bbox=R.bbox),O.features=T,O}i.featureCollection=B;function j(T,R,O){O===void 0&&(O={});var W={type:"MultiLineString",coordinates:T};return r(W,R,O)}i.multiLineString=j;function I(T,R,O){O===void 0&&(O={});var W={type:"MultiPoint",coordinates:T};return r(W,R,O)}i.multiPoint=I;function at(T,R,O){O===void 0&&(O={});var W={type:"MultiPolygon",coordinates:T};return r(W,R,O)}i.multiPolygon=at;function ft(T,R,O){O===void 0&&(O={});var W={type:"GeometryCollection",geometries:T};return r(W,R,O)}i.geometryCollection=ft;function St(T,R){if(R===void 0&&(R=0),R&&!(R>=0))throw new Error("precision must be a positive number");var O=Math.pow(10,R||0);return Math.round(T*O)/O}i.round=St;function Ht(T,R){R===void 0&&(R="kilometers");var O=i.factors[R];if(!O)throw new Error(R+" units is invalid");return T*O}i.radiansToLength=Ht;function Qt(T,R){R===void 0&&(R="kilometers");var O=i.factors[R];if(!O)throw new Error(R+" units is invalid");return T/O}i.lengthToRadians=Qt;function ke(T,R){return Z(Qt(T,R))}i.lengthToDegrees=ke;function z(T){var R=T%360;return R<0&&(R+=360),R}i.bearingToAzimuth=z;function Z(T){var R=T%(2*Math.PI);return R*180/Math.PI}i.radiansToDegrees=Z;function Q(T){var R=T%360;return R*Math.PI/180}i.degreesToRadians=Q;function pt(T,R,O){if(R===void 0&&(R="kilometers"),O===void 0&&(O="kilometers"),!(T>=0))throw new Error("length must be a positive number");return Ht(Qt(T,R),O)}i.convertLength=pt;function tt(T,R,O){if(R===void 0&&(R="meters"),O===void 0&&(O="kilometers"),!(T>=0))throw new Error("area must be a positive number");var W=i.areaFactors[R];if(!W)throw new Error("invalid original units");var K=i.areaFactors[O];if(!K)throw new Error("invalid final units");return T/W*K}i.convertArea=tt;function ct(T){return!isNaN(T)&&T!==null&&!Array.isArray(T)}i.isNumber=ct;function C(T){return!!T&&T.constructor===Object}i.isObject=C;function A(T){if(!T)throw new Error("bbox is required");if(!Array.isArray(T))throw new Error("bbox must be an Array");if(T.length!==4&&T.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");T.forEach(function(R){if(!ct(R))throw new Error("bbox must only contain numbers")})}i.validateBBox=A;function D(T){if(!T)throw new Error("id is required");if(["string","number"].indexOf(typeof T)===-1)throw new Error("id must be a number or a string")}i.validateId=D}),Er=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=$e();function a(Z,Q,pt){if(Z!==null)for(var tt,ct,C,A,D,T,R,O=0,W=0,K,Y=Z.type,ot=Y==="FeatureCollection",st=Y==="Feature",kt=ot?Z.features.length:1,Xt=0;Xt<kt;Xt++){R=ot?Z.features[Xt].geometry:st?Z.geometry:Z,K=R?R.type==="GeometryCollection":!1,D=K?R.geometries.length:1;for(var te=0;te<D;te++){var ae=0,De=0;if(A=K?R.geometries[te]:R,A!==null){T=A.coordinates;var ze=A.type;switch(O=pt&&(ze==="Polygon"||ze==="MultiPolygon")?1:0,ze){case null:break;case"Point":if(Q(T,W,Xt,ae,De)===!1)return!1;W++,ae++;break;case"LineString":case"MultiPoint":for(tt=0;tt<T.length;tt++){if(Q(T[tt],W,Xt,ae,De)===!1)return!1;W++,ze==="MultiPoint"&&ae++}ze==="LineString"&&ae++;break;case"Polygon":case"MultiLineString":for(tt=0;tt<T.length;tt++){for(ct=0;ct<T[tt].length-O;ct++){if(Q(T[tt][ct],W,Xt,ae,De)===!1)return!1;W++}ze==="MultiLineString"&&ae++,ze==="Polygon"&&De++}ze==="Polygon"&&ae++;break;case"MultiPolygon":for(tt=0;tt<T.length;tt++){for(De=0,ct=0;ct<T[tt].length;ct++){for(C=0;C<T[tt][ct].length-O;C++){if(Q(T[tt][ct][C],W,Xt,ae,De)===!1)return!1;W++}De++}ae++}break;case"GeometryCollection":for(tt=0;tt<A.geometries.length;tt++)if(a(A.geometries[tt],Q,pt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(Z,Q,pt,tt){var ct=pt;return a(Z,function(C,A,D,T,R){A===0&&pt===void 0?ct=C:ct=Q(ct,C,A,D,T,R)},tt),ct}function d(Z,Q){var pt;switch(Z.type){case"FeatureCollection":for(pt=0;pt<Z.features.length&&Q(Z.features[pt].properties,pt)!==!1;pt++);break;case"Feature":Q(Z.properties,0);break}}function g(Z,Q,pt){var tt=pt;return d(Z,function(ct,C){C===0&&pt===void 0?tt=ct:tt=Q(tt,ct,C)}),tt}function _(Z,Q){if(Z.type==="Feature")Q(Z,0);else if(Z.type==="FeatureCollection")for(var pt=0;pt<Z.features.length&&Q(Z.features[pt],pt)!==!1;pt++);}function b(Z,Q,pt){var tt=pt;return _(Z,function(ct,C){C===0&&pt===void 0?tt=ct:tt=Q(tt,ct,C)}),tt}function w(Z){var Q=[];return a(Z,function(pt){Q.push(pt)}),Q}function B(Z,Q){var pt,tt,ct,C,A,D,T,R,O,W,K=0,Y=Z.type==="FeatureCollection",ot=Z.type==="Feature",st=Y?Z.features.length:1;for(pt=0;pt<st;pt++){for(D=Y?Z.features[pt].geometry:ot?Z.geometry:Z,R=Y?Z.features[pt].properties:ot?Z.properties:{},O=Y?Z.features[pt].bbox:ot?Z.bbox:void 0,W=Y?Z.features[pt].id:ot?Z.id:void 0,T=D?D.type==="GeometryCollection":!1,A=T?D.geometries.length:1,ct=0;ct<A;ct++){if(C=T?D.geometries[ct]:D,C===null){if(Q(null,K,R,O,W)===!1)return!1;continue}switch(C.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Q(C,K,R,O,W)===!1)return!1;break}case"GeometryCollection":{for(tt=0;tt<C.geometries.length;tt++)if(Q(C.geometries[tt],K,R,O,W)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}K++}}function j(Z,Q,pt){var tt=pt;return B(Z,function(ct,C,A,D,T){C===0&&pt===void 0?tt=ct:tt=Q(tt,ct,C,A,D,T)}),tt}function I(Z,Q){B(Z,function(pt,tt,ct,C,A){var D=pt===null?null:pt.type;switch(D){case null:case"Point":case"LineString":case"Polygon":return Q(r.feature(pt,ct,{bbox:C,id:A}),tt,0)===!1?!1:void 0}var T;switch(D){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var R=0;R<pt.coordinates.length;R++){var O=pt.coordinates[R],W={type:T,coordinates:O};if(Q(r.feature(W,ct),tt,R)===!1)return!1}})}function at(Z,Q,pt){var tt=pt;return I(Z,function(ct,C,A){C===0&&A===0&&pt===void 0?tt=ct:tt=Q(tt,ct,C,A)}),tt}function ft(Z,Q){I(Z,function(pt,tt,ct){var C=0;if(pt.geometry){var A=pt.geometry.type;if(!(A==="Point"||A==="MultiPoint")){var D,T=0,R=0,O=0;if(a(pt,function(W,K,Y,ot,st){if(D===void 0||tt>T||ot>R||st>O){D=W,T=tt,R=ot,O=st,C=0;return}var kt=r.lineString([D,W],pt.properties);if(Q(kt,tt,ct,st,C)===!1)return!1;C++,D=W})===!1)return!1}}})}function St(Z,Q,pt){var tt=pt,ct=!1;return ft(Z,function(C,A,D,T,R){ct===!1&&pt===void 0?tt=C:tt=Q(tt,C,A,D,T,R),ct=!0}),tt}function Ht(Z,Q){if(!Z)throw new Error("geojson is required");I(Z,function(pt,tt,ct){if(pt.geometry!==null){var C=pt.geometry.type,A=pt.geometry.coordinates;switch(C){case"LineString":if(Q(pt,tt,ct,0,0)===!1)return!1;break;case"Polygon":for(var D=0;D<A.length;D++)if(Q(r.lineString(A[D],pt.properties),tt,ct,D)===!1)return!1;break}}})}function Qt(Z,Q,pt){var tt=pt;return Ht(Z,function(ct,C,A,D){C===0&&pt===void 0?tt=ct:tt=Q(tt,ct,C,A,D)}),tt}function ke(Z,Q){if(Q=Q||{},!r.isObject(Q))throw new Error("options is invalid");var pt=Q.featureIndex||0,tt=Q.multiFeatureIndex||0,ct=Q.geometryIndex||0,C=Q.segmentIndex||0,A=Q.properties,D;switch(Z.type){case"FeatureCollection":pt<0&&(pt=Z.features.length+pt),A=A||Z.features[pt].properties,D=Z.features[pt].geometry;break;case"Feature":A=A||Z.properties,D=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=Z;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var T=D.coordinates;switch(D.type){case"Point":case"MultiPoint":return null;case"LineString":return C<0&&(C=T.length+C-1),r.lineString([T[C],T[C+1]],A,Q);case"Polygon":return ct<0&&(ct=T.length+ct),C<0&&(C=T[ct].length+C-1),r.lineString([T[ct][C],T[ct][C+1]],A,Q);case"MultiLineString":return tt<0&&(tt=T.length+tt),C<0&&(C=T[tt].length+C-1),r.lineString([T[tt][C],T[tt][C+1]],A,Q);case"MultiPolygon":return tt<0&&(tt=T.length+tt),ct<0&&(ct=T[tt].length+ct),C<0&&(C=T[tt][ct].length-C-1),r.lineString([T[tt][ct][C],T[tt][ct][C+1]],A,Q)}throw new Error("geojson is invalid")}function z(Z,Q){if(Q=Q||{},!r.isObject(Q))throw new Error("options is invalid");var pt=Q.featureIndex||0,tt=Q.multiFeatureIndex||0,ct=Q.geometryIndex||0,C=Q.coordIndex||0,A=Q.properties,D;switch(Z.type){case"FeatureCollection":pt<0&&(pt=Z.features.length+pt),A=A||Z.features[pt].properties,D=Z.features[pt].geometry;break;case"Feature":A=A||Z.properties,D=Z.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=Z;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var T=D.coordinates;switch(D.type){case"Point":return r.point(T,A,Q);case"MultiPoint":return tt<0&&(tt=T.length+tt),r.point(T[tt],A,Q);case"LineString":return C<0&&(C=T.length+C),r.point(T[C],A,Q);case"Polygon":return ct<0&&(ct=T.length+ct),C<0&&(C=T[ct].length+C),r.point(T[ct][C],A,Q);case"MultiLineString":return tt<0&&(tt=T.length+tt),C<0&&(C=T[tt].length+C),r.point(T[tt][C],A,Q);case"MultiPolygon":return tt<0&&(tt=T.length+tt),ct<0&&(ct=T[tt].length+ct),C<0&&(C=T[tt][ct].length-C),r.point(T[tt][ct][C],A,Q)}throw new Error("geojson is invalid")}i.coordAll=w,i.coordEach=a,i.coordReduce=u,i.featureEach=_,i.featureReduce=b,i.findPoint=z,i.findSegment=ke,i.flattenEach=I,i.flattenReduce=at,i.geomEach=B,i.geomReduce=j,i.lineEach=Ht,i.lineReduce=Qt,i.propEach=d,i.propReduce=g,i.segmentEach=ft,i.segmentReduce=St}),ir=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Er();function a(u){var d=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(g){d[0]>g[0]&&(d[0]=g[0]),d[1]>g[1]&&(d[1]=g[1]),d[2]<g[0]&&(d[2]=g[0]),d[3]<g[1]&&(d[3]=g[1])}),d}a.default=a,i.default=a}),In=f((i,r)=>{var a=Be(),u=$e(),d=Er(),g=ir().default,_=d.featureEach;d.coordEach,u.polygon;var b=u.featureCollection;function w(B){var j=new a(B);return j.insert=function(I){if(I.type!=="Feature")throw new Error("invalid feature");return I.bbox=I.bbox?I.bbox:g(I),a.prototype.insert.call(this,I)},j.load=function(I){var at=[];return Array.isArray(I)?I.forEach(function(ft){if(ft.type!=="Feature")throw new Error("invalid features");ft.bbox=ft.bbox?ft.bbox:g(ft),at.push(ft)}):_(I,function(ft){if(ft.type!=="Feature")throw new Error("invalid features");ft.bbox=ft.bbox?ft.bbox:g(ft),at.push(ft)}),a.prototype.load.call(this,at)},j.remove=function(I,at){if(I.type!=="Feature")throw new Error("invalid feature");return I.bbox=I.bbox?I.bbox:g(I),a.prototype.remove.call(this,I,at)},j.clear=function(){return a.prototype.clear.call(this)},j.search=function(I){var at=a.prototype.search.call(this,this.toBBox(I));return b(at)},j.collides=function(I){return a.prototype.collides.call(this,this.toBBox(I))},j.all=function(){var I=a.prototype.all.call(this);return b(I)},j.toJSON=function(){return a.prototype.toJSON.call(this)},j.fromJSON=function(I){return a.prototype.fromJSON.call(this,I)},j.toBBox=function(I){var at;if(I.bbox)at=I.bbox;else if(Array.isArray(I)&&I.length===4)at=I;else if(Array.isArray(I)&&I.length===6)at=[I[0],I[1],I[3],I[4]];else if(I.type==="Feature")at=g(I);else if(I.type==="FeatureCollection")at=g(I);else throw new Error("invalid geojson");return{minX:at[0],minY:at[1],maxX:at[2],maxY:at[3]}},j}r.exports=w,r.exports.default=w});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++)if(i.call(u,r[d],d,r))return d;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++){var g=r[d];if(i.call(u,g,d,r))return g}},typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i}),function(i){i.forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),u=a.length>>>0;if(u===0)return!1;var d=r|0,g=Math.max(d>=0?d:u-Math.abs(d),0);function _(b,w){return b===w||typeof b=="number"&&typeof w=="number"&&isNaN(b)&&isNaN(w)}for(;g<u;){if(_(a[g],i))return!0;g++}return!1}});var Hs={version:"2.18.3"},ye=v(Jr()),qe={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Zs={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Yr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ii={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},eu={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Qr={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Fn={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Xe={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},zn={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},kr={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Mr={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},qs={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},nr={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ks={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Ws={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},ts={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Js={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Xs={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},es={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},da={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Ys={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},iu={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},_e={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Qi={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Fe={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},fa={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Qs={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},to=nr,wn={en:qe,de:Zs,it:Yr,id:Ii,ro:eu,ru:Qr,es:Fn,nl:Xe,fr:zn,pt:to,pt_br:qs,pt_pt:nr,zh:kr,zh_tw:Mr,pl:Ks,sv:Ws,el:ts,hu:Js,da:Xs,no:es,fa:da,ua:Ys,tr:iu,cz:_e,ja:Qi,fi:Fe,ko:fa,ky:Qs},Nn={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let r={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(a=>{this._isRelevantForEdit(a)&&a.pm.enable(r)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let r in i){let a=i[r];this._isRelevantForEdit(a)&&a.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},eo=Nn,Pr={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(r=>{this._isRelevantForDrag(r)&&r.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(r=>{r.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let r in i){let a=i[r];this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},si=Pr,jn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let r=i.target;this._isRelevantForRemoval(r)&&!r.pm.dragging()&&(r.removeFrom(this.map.pm._getContainingLayer()),r.remove(),r instanceof L.LayerGroup?(this._fireRemoveLayerGroup(r),this._fireRemoveLayerGroup(this.map,r)):(r.pm._fireRemove(r),r.pm._fireRemove(this.map,r)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},pa=jn,ma={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&a.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},nu=ma,ga=v(Jr()),io={_fireDrawStart(i="Draw",r={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,r)},_fireDrawEnd(i="Draw",r={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,r)},_fireCreate(i,r="Draw",a={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},r,a)},_fireCenterPlaced(i="Draw",r={}){let a=i==="Draw"?this._layer:void 0,u=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:a,layer:u,latlng:this._layer.getLatLng()},i,r)},_fireCut(i,r,a,u="Draw",d={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:r,originalLayer:a},u,d)},_fireEdit(i=this._layer,r="Edit",a={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},r,a)},_fireEnable(i="Edit",r={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDisable(i="Edit",r={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,r)},_fireUpdate(i="Edit",r={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,r)},_fireMarkerDragStart(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDrag(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDragEnd(i,r=void 0,a=void 0,u="Edit",d={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r,intersectionReset:a},u,d)},_fireDragStart(i="Edit",r={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,r)},_fireDrag(i,r="Edit",a={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},r,a)},_fireDragEnd(i="Edit",r={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragEnable(i="Edit",r={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragDisable(i="Edit",r={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,r)},_fireRemove(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:this.getShape()},a,u)},_fireVertexAdded(i,r,a,u="Edit",d={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:r,latlng:a,shape:this.getShape()},u,d)},_fireVertexRemoved(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:r,shape:this.getShape()},a,u)},_fireVertexClick(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireIntersect(i,r=this._layer,a="Edit",u={}){this.__fire(r,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},a,u)},_fireLayerReset(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},r,a)},_fireTextChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},r,a)},_fireTextFocus(i="Edit",r={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,r)},_fireTextBlur(i="Edit",r={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,r)},_fireSnapDrag(i,r,a="Snapping",u={}){this.__fire(i,"pm:snapdrag",r,a,u)},_fireSnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:snap",r,a,u)},_fireUnsnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:unsnap",r,a,u)},_fireRotationEnable(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},a,u)},_fireRotationDisable(i,r="Rotation",a={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},r,a)},_fireRotationStart(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:r},a,u)},_fireRotation(i,r,a,u=this._rotationLayer,d="Rotation",g={}){this.__fire(i,"pm:rotate",{layer:u,helpLayer:this._layer,startAngle:this._startAngle,angle:u.pm.getAngle(),angleDiff:r,oldLatLngs:a,newLatLngs:u.getLatLngs()},d,g)},_fireRotationEnd(i,r,a,u="Rotation",d={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:r,angle:this._rotationLayer.pm.getAngle(),originLatLngs:a,newLatLngs:this._rotationLayer.getLatLngs()},u,d)},_fireActionClick(i,r,a,u="Toolbar",d={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:r,button:a},u,d)},_fireButtonClick(i,r,a="Toolbar",u={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:r},a,u)},_fireLangChange(i,r,a,u,d="Global",g={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:r,fallback:a,translations:u},d,g)},_fireGlobalDragModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalEditModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalRemovalModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalCutModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,r)},_fireGlobalDrawModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,r)},_fireGlobalRotateModeToggled(i="Global",r={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,r)},_fireRemoveLayerGroup(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:void 0},a,u)},_fireKeyeventEvent(i,r,a,u="Global",d={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:r,focusOn:a},u,d)},__fire(i,r,a,u,d={}){a=(0,ga.default)(a,d,{source:u}),L.PM.Utils._fireEvent(i,r,a)}},is=io,_a=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let r="document";this.map.getContainer().contains(i.target)&&(r="map");let a={event:i,eventType:i.type,focusOn:r};this._lastEvents[i.type]=a,this._lastEvents.current=a,this.map.pm._fireKeyeventEvent(i,i.type,r)},_onBlur(i){i.altKey=!1;let r={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=r,this._lastEvents.current=r},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.shiftKey},isAltKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.altKey},isCtrlKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.ctrlKey},isMetaKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.metaKey},getPressedKey(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.key}}),Ce=_a,ya=v(xn());function me(i){let r=L.PM.activeLang;return(0,ya.default)(wn[r],i)||(0,ya.default)(wn.en,i)||i}function Un(i){for(let r=0;r<i.length;r+=1){let a=i[r];if(Array.isArray(a)){if(Un(a))return!0}else if(a!=null&&a!=="")return!0}return!1}function Br(i){return i.reduce((r,a)=>{if(a.length!==0){let u=Array.isArray(a)?Br(a):a;Array.isArray(u)?u.length!==0&&r.push(u):r.push(u)}return r},[])}function ru(i,r,a){let u={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:d,b:g,f:_}=u,b=i.lng,w=i.lat,B=a,j=Math.PI,I=r*j/180,at=Math.sin(I),ft=Math.cos(I),St=(1-_)*Math.tan(w*j/180),Ht=1/Math.sqrt(1+St*St),Qt=St*Ht,ke=Math.atan2(St,ft),z=Ht*at,Z=1-z*z,Q=Z*(d*d-g*g)/(g*g),pt=1+Q/16384*(4096+Q*(-768+Q*(320-175*Q))),tt=Q/1024*(256+Q*(-128+Q*(74-47*Q))),ct=B/(g*pt),C=2*Math.PI,A,D,T;for(;Math.abs(ct-C)>1e-12;){A=Math.cos(2*ke+ct),D=Math.sin(ct),T=Math.cos(ct);let kt=tt*D*(A+tt/4*(T*(-1+2*A*A)-tt/6*A*(-3+4*D*D)*(-3+4*A*A)));C=ct,ct=B/(g*pt)+kt}let R=Qt*D-Ht*T*ft,O=Math.atan2(Qt*T+Ht*D*ft,(1-_)*Math.sqrt(z*z+R*R)),W=Math.atan2(D*at,Ht*T-Qt*D*ft),K=_/16*Z*(4+_*(4-3*Z)),Y=W-(1-K)*_*z*(ct+K*D*(A+K*T*(-1+2*A*A))),ot=b+Y*180/j,st=O*180/j;return L.latLng(ot,st)}function ns(i,r,a,u,d=!0){let g,_,b,w=[];for(let B=0;B<a;B+=1){if(d)g=B*360/a+u,_=ru(i,g,r),b=L.latLng(_.lng,_.lat);else{let j=i.lat+Math.cos(2*B*Math.PI/a)*r,I=i.lng+Math.sin(2*B*Math.PI/a)*r;b=L.latLng(j,I)}w.push(b)}return w}function su(i,r,a){r=(r+360)%360;let u=Math.PI/180,d=180/Math.PI,{R:g}=L.CRS.Earth,_=i.lng*u,b=i.lat*u,w=r*u,B=Math.sin(b),j=Math.cos(b),I=Math.cos(a/g),at=Math.sin(a/g),ft=Math.asin(B*I+j*at*Math.cos(w)),St=_+Math.atan2(Math.sin(w)*at*j,I-B*Math.sin(ft));St*=d;let Ht=St-360,Qt=St<-180?St+360:St;return St=St>180?Ht:Qt,L.latLng([ft*d,St])}function rs(i,r,a){let u=i.latLngToContainerPoint(r),d=i.latLngToContainerPoint(a),g=Math.atan2(d.y-u.y,d.x-u.x)*180/Math.PI+90;return g+=g<0?360:0,g}function ss(i,r,a,u){let d=rs(i,r,a);return su(r,d,u)}function ou(i,r,a="asc"){if(!r||Object.keys(r).length===0)return(w,B)=>w-B;let u=Object.keys(r),d,g=u.length-1,_={};for(;g>=0;)d=u[g],_[d.toLowerCase()]=r[d],g-=1;function b(w){if(w instanceof L.Marker)return"Marker";if(w instanceof L.Circle)return"Circle";if(w instanceof L.CircleMarker)return"CircleMarker";if(w instanceof L.Rectangle)return"Rectangle";if(w instanceof L.Polygon)return"Polygon";if(w instanceof L.Polyline)return"Line"}return(w,B)=>{let j,I;if(j=b(w.layer).toLowerCase(),I=b(B.layer).toLowerCase(),!j||!I)return 0;let at=j in _?_[j]:Number.MAX_SAFE_INTEGER,ft=I in _?_[I]:Number.MAX_SAFE_INTEGER,St=0;return at<ft?St=-1:at>ft&&(St=1),a==="desc"?St*-1:St}}function tn(i,r=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(r).getLatLngs():L.polyline(r).getLatLngs()}function va(i,r){var a,u,d,g;if((u=(a=r.options.crs)==null?void 0:a.projection)!=null&&u.MAX_LATITUDE){let _=(g=(d=r.options.crs)==null?void 0:d.projection)==null?void 0:g.MAX_LATITUDE;i.lat=Math.max(Math.min(_,i.lat),-_)}return i}function fi(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var au=L.Class.extend({includes:[eo,si,pa,nu,is],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=Ce(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",r,a="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let d=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(d){let g=[`${d[1]}_${d[2]}`,`${d[1]}`];for(let _ of g)if(wn[_]){i=_;break}}}let u=L.PM.activeLang;r&&(wn[i]=(0,ye.default)(wn[a],r)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(u,i,a,wn[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",r){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,r)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,r={}){let a=r.ignoreShapes||[],u=r.merge||!1;this.map.pm.Draw.shapes.forEach(d=>{a.indexOf(d)===-1&&this.map.pm.Draw[d].setPathOptions(i,u)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let r=(0,ye.default)(this.globalOptions,i);r.editable&&(r.resizeableCircleMarker=r.editable,delete r.editable);let a=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!r.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),a=!0);let u=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!r.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),u=!0),this.map.pm.Draw.shapes.forEach(d=>{this.map.pm.Draw[d].setOptions(r)}),a&&this.map.pm.Draw.CircleMarker.enable(),u&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.setOptions(r)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=r,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let r=L.PM.Utils.findLayers(this.map);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},getGeomanDrawLayers(i=!1){let r=L.PM.Utils.findLayers(this.map).filter(u=>u._drawnByGeoman===!0);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){fi(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let r="";i.type==="touchstart"||i.type==="pointerdown"?r="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(r="mouseup"),r&&fi(this.map)._onClick(this._createMouseEvent(r,i))},_createMouseEvent(i,r){let a,u=r.touches[0]||r.changedTouches[0];try{a=new MouseEvent(i,{bubbles:r.bubbles,cancelable:r.cancelable,view:r.view,detail:u.detail,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,button:r.button,relatedTarget:r.relatedTarget})}catch{a=document.createEvent("MouseEvents"),a.initMouseEvent(i,r.bubbles,r.cancelable,r.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}return a}}),ba=au,Ln=L.Control.extend({includes:[is],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let r=this.options.position.indexOf("right")>-1?"pos-right":"",a=L.DomUtil.create("div",`button-container  ${r}`,this._container);i.title&&a.setAttribute("title",i.title);let u=L.DomUtil.create("a","leaflet-buttons-control-button",a);u.setAttribute("role","button"),u.setAttribute("tabindex","0"),u.href="#";let d=L.DomUtil.create("div",`leaflet-pm-actions-container ${r}`,a),g=i.actions,_={cancel:{text:me("actions.cancel"),title:me("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:me("actions.finish"),title:me("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:me("actions.removeLastVertex"),title:me("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:me("actions.finish"),title:me("actions.finish"),onClick(w){this._map.pm.Draw[i.jsClass]._finishShape(w)}}};i._preparedActions=g.map(w=>{let B=typeof w=="string"?w:w.name,j;if(_[B])j=_[B];else if(w.text)j=w;else return j;let I=L.DomUtil.create("a",`leaflet-pm-action ${r} action-${B}`,d);if(I.setAttribute("role","button"),I.setAttribute("tabindex","0"),I.href="#",j.title&&(I.title=j.title),I.innerHTML=j.text,L.DomEvent.disableClickPropagation(I),L.DomEvent.on(I,"click",L.DomEvent.stop),j._node=I,!i.disabled&&j.onClick){let at=ft=>{ft.preventDefault();let St="",{buttons:Ht}=this._map.pm.Toolbar;for(let Qt in Ht)if(Ht[Qt]._button===i){St=Qt;break}this._fireActionClick(j,St,i)};L.DomEvent.addListener(I,"click",at,this),L.DomEvent.addListener(I,"click",j.onClick,this),L.DomEvent.addListener(I,"click",()=>this._updateActiveAction(i))}return j}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(a,"active");let b=L.DomUtil.create("div","control-icon",u);return i.iconUrl&&b.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(b,i.className),L.DomEvent.disableClickPropagation(u),L.DomEvent.on(u,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(u,"click",this._onBtnClick,this),L.DomEvent.addListener(u,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(u,"pm-disabled"),u.setAttribute("aria-disabled","true")),a},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:r}=this._map.pm.Toolbar;for(let a in r)if(r[a]._button===this._button){i=a;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",r=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(r,i),r.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(r,i),r.setAttribute("aria-disabled","false"))},_updateActiveAction(i){var r;(r=i._preparedActions)==null||r.forEach(a=>{a!=null&&a._node&&(a.isActive&&a.isActive.call(this)?L.DomUtil.addClass(a._node,"active-action"):L.DomUtil.removeClass(a._node,"active-action"))})}}),xa=Ln;L.Control.PMButton=xa;var wa=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let r=`${i}Container`;return this[r]||(this[r]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[r]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),r={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let a in i){let u=i[a];L.Util.setOptions(u,{className:r.geomanIcons[a]})}},removeControls(){let i=this.getButtons();for(let r in i)i[r].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,r){return this.buttons[i]=r,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let r in this.buttons){let a=this.buttons[r];a._button.disableByOtherButtons&&a!==i&&a.toggled()&&a._triggerClick()}},toggleButton(i,r,a=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let u=i;return a&&this.triggerClickOnToggledButtons(this.buttons[u]),this.buttons[u]?this.buttons[u].toggle(r):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:me("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(at,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:me("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(at,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},a={className:"control-icon leaflet-pm-icon-polyline",title:me("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(at,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={title:me("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(at,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},d={title:me("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(at,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:me("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(at,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:me("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:me("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},w={title:me("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(at,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},B={title:me("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},j={title:me("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},I={className:"control-icon leaflet-pm-icon-text",title:me("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(at,ft)=>{this.map.pm.Draw[ft.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(a)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(u)),this._addButton("drawCircleMarker",new L.Control.PMButton(d)),this._addButton("drawText",new L.Control.PMButton(I)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(w)),this._addButton("removalMode",new L.Control.PMButton(B)),this._addButton("rotateMode",new L.Control.PMButton(j))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),r=[];this.options.drawControls===!1&&(r=r.concat(Object.keys(i).filter(a=>!i[a]._button.tool))),this.options.editControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="edit"))),this.options.optionsControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="options"))),this.options.customControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="custom")));for(let a in i)if(this.options[a]&&r.indexOf(a)===-1){let u=i[a]._button.tool;u||(u="draw"),i[a].setPosition(this._getBtnPosition(u)),i[a].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,r){this.options.positions[i]=r,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,r){if(r)typeof r!="object"&&(r={name:r});else throw new TypeError("Button has no name");let a=this._btnNameMapping(i);if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");let u=this.map.pm.Draw.createNewDrawInstance(r.name,a);r={...this.buttons[a]._button,...r};let d=this.createCustomControl(r);return{drawInstance:u,control:d}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let r={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let a=this._addButton(i.name,new L.Control.PMButton(r));return this.changeControlOrder(),a},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let r={};if(i)for(let a in this.getButtons()){let u=this.getButtons()[a];(u._button.tool===i||i==="draw"&&!u._button.tool)&&(r[a]=u)}return r},changeControlOrder(i=[]){let r=this._shapeMapping(),a=[];i.forEach(g=>{r[g]?a.push(r[g]):a.push(g)});let u=this.getButtons(),d={};a.forEach(g=>{u[g]&&(d[g]=u[g])}),Object.keys(u).filter(g=>!u[g]._button.tool||u[g]._button.tool==="draw").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="edit").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="options").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="custom").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),this.map.pm.Toolbar.buttons=d,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),r=[];for(let a in i)r.push(a);return r},changeActionsOfControl(i,r){let a=this._btnNameMapping(i);if(!a)throw new TypeError("No name passed");if(!r)throw new TypeError("No actions passed");if(!this.buttons[a])throw new TypeError("Button with this name not exists");this.buttons[a]._button.actions=r,this.changeControlOrder()},setButtonDisabled(i,r){let a=this._btnNameMapping(i);r?this.buttons[a].disable():this.buttons[a].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let r=this._shapeMapping();return r[i]?r[i]:i}}),no=wa,lu=v(Jr()),La={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(r=>{if(Array.isArray(r)){this._assignEvents(r);return}r.off("drag",this._handleSnapping,this),r.on("drag",this._handleSnapping,this),r.off("dragend",this._cleanupSnapping,this),r.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let r=i.target;r._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(r=>{r.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){var b,w,B;let r=i.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((b=i==null?void 0:i.originalEvent)==null?void 0:b.altKey)||((B=(w=this._map)==null?void 0:w.pm)==null?void 0:B.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let a=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(a).length===0)return!1;let u=a.layer instanceof L.Marker||a.layer instanceof L.CircleMarker||!this.options.snapSegment,d;u?d=a.latlng:d=this._checkPrioritiySnapping(a);let g=this.options.snapDistance,_={marker:r,shape:this._shape,snapLatLng:d,segment:a.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:a.layer,distance:a.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),a.distance<g){r._orgLatLng=r.getLatLng(),r.setLatLng(d),r._snapped=!0,r._snapInfo=_;let j=()=>{this._snapLatLng=d,this._fireSnap(r,_),this._fireSnap(this._layer,_)},I=this._snapLatLng||{},at=d||{};(I.lat!==at.lat||I.lng!==at.lng)&&j()}else this._snapLatLng&&(this._unsnap(_),r._snapped=!1,r._snapInfo=void 0,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList(){let i=[],r=[],a=this._map;a.off("layerremove",this._handleSnapLayerRemoval,this),a.on("layerremove",this._handleSnapLayerRemoval,this),a.eachLayer(u=>{if((u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&u.options.snapIgnore!==!0){if(u.options.snapIgnore===void 0&&(!L.PM.optIn&&u.options.pmIgnore===!0||L.PM.optIn&&u.options.pmIgnore!==!1))return;(u instanceof L.Circle||u instanceof L.CircleMarker)&&u.pm&&u.pm._hiddenPolyCircle?i.push(u.pm._hiddenPolyCircle):u instanceof L.ImageOverlay&&(u=L.rectangle(u.getBounds())),i.push(u);let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,r.push(d),(u instanceof L.Circle||u instanceof L.CircleMarker)&&r.push(d)}}),i=i.filter(u=>this._layer!==u),i=i.filter(u=>u._latlng||u._latlngs&&Un(u._latlngs)),i=i.filter(u=>!u._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let u=L.polyline([],{color:"red",pmIgnore:!0});u._pmTempLayer=!0,r.push(u)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=r},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let r=this._snapList.findIndex(a=>a._leaflet_id===i._leaflet_id);r>-1&&this._snapList.splice(r,1)},_calcClosestLayer(i,r){return this._calcClosestLayers(i,r,1)[0]},_calcClosestLayers(i,r,a=1){let u=[],d={};r.forEach((_,b)=>{var B;if(_._parentCopy&&_._parentCopy===this._layer||((B=_.getLatLngs)==null?void 0:B.call(_).flat(5).length)<2)return;let w=this._calcLayerDistances(i,_);if(w.distance=Math.floor(w.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[b]){let j=L.polyline([],{color:"red",pmIgnore:!0});j._pmTempLayer=!0,this.debugIndicatorLines[b]=j}this.debugIndicatorLines[b].setLatLngs([i,w.latlng])}a===1&&(d.distance===void 0||w.distance-5<=d.distance)?(w.distance+5<d.distance&&(u=[]),d=w,d.layer=_,u.push(d)):a!==1&&(d={},d=w,d.layer=_,u.push(d))}),a!==1&&(u=u.sort((_,b)=>_.distance-b.distance)),a===-1&&(a=u.length);let g=this._getClosestLayerByPriority(u,a);return L.Util.isArray(g)?g:[g]},_calcLayerDistances(i,r){let a=this._map,u=r instanceof L.Marker||r instanceof L.CircleMarker,d=r instanceof L.Polygon,g=i;if(u){let _=r.getLatLng();return{latlng:{..._},distance:this._getDistance(a,_,g)}}return this._calcLatLngDistances(g,r.getLatLngs(),a,d)},_calcLatLngDistances(i,r,a,u=!1){let d,g,_,b=w=>{w.forEach((B,j)=>{if(Array.isArray(B)){b(B);return}if(this.options.snapSegment){let I=B,at;u?at=j+1===w.length?0:j+1:at=j+1===w.length?void 0:j+1;let ft=w[at];if(ft){let St=this._getDistanceToSegment(a,i,I,ft);(g===void 0||St<g)&&(g=St,_=[I,ft])}}else{let I=this._getDistance(a,i,B);(g===void 0||I<g)&&(g=I,d=B)}})};return b(r),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(a,i,_[0],_[1])},segment:_,distance:g}:{latlng:d,distance:g}},_getClosestLayerByPriority(i,r=1){i=i.sort((_,b)=>_._leaflet_id-b._leaflet_id);let a=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],u=this._map.pm.globalOptions.snappingOrder||[],d=0,g={};return u.concat(a).forEach(_=>{g[_]||(d+=1,g[_]=d)}),i.sort(ou("instanceofShape",g)),r===1?i[0]||{}:i.slice(0,r)},_checkPrioritiySnapping(i){let r=this._map,a=i.segment[0],u=i.segment[1],d=i.latlng,g=d;if(this.options.snapVertex){let _=this._getDistance(r,a,d),b=this._getDistance(r,u,d),w=_<b?a:u,B=_<b?_:b;if(this.options.snapMiddle){let I=L.PM.Utils.calcMiddleLatLng(r,a,u),at=this._getDistance(r,I,d);at<_&&at<b&&(w=I,B=at)}let j=this.options.snapDistance;B<j&&(g=w)}return{...g}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,r,a,u){let d=i.getMaxZoom();d===1/0&&(d=i.getZoom());let g=i.project(r,d),_=i.project(a,d),b=i.project(u,d),w=L.LineUtil.closestPointOnSegment(g,_,b);return i.unproject(w,d)},_getDistanceToSegment(i,r,a,u){let d=i.latLngToContainerPoint(r),g=i.latLngToContainerPoint(a),_=i.latLngToContainerPoint(u);return L.LineUtil.pointToSegmentDistance(d,g,_)},_getDistance(i,r,a){return i.latLngToContainerPoint(r).distanceTo(i.latLngToContainerPoint(a))}},ro=La,uu=L.Class.extend({includes:[ro,is],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(a=>{this[a]=new L.PM.Draw[a](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,r=!1){r?this.options.pathOptions=(0,lu.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,r){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(r)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(r=>{this[r]._enabled&&(i=r)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(r=>{(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&(r._pmTempLayer||i.push(r))}),this._enabled?i.forEach(r=>{L.PM.Utils.disablePopup(r)}):i.forEach(r=>{L.PM.Utils.enablePopup(r)})},createNewDrawInstance(i,r){let a=this._getShapeFromBtnName(r);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[a])throw new TypeError(`There is no class L.PM.Draw.${a}`);return this[i]=new L.PM.Draw[a](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[r]&&this[i].setOptions(this[r].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let r={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return r[i]?r[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),oi=uu;oi.Marker=oi.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(me("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new L.Marker(r,this.options.markerStyle);this._setPane(a,"markerPane"),this._finishLayer(a),a.pm||(a.options.draggable=!1),a.addTo(this._map.pm._getContainingLayer()),a.pm&&this.options.markerEditable?a.pm.enable():a.dragging&&a.dragging.disable(),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var i,r;(i=this.options.markerStyle)!=null&&i.icon&&((r=this._hintMarker)==null||r.setIcon(this.options.markerStyle.icon))}});var ci=63710088e-1,Ca={centimeters:ci*100,centimetres:ci*100,degrees:ci/111325,feet:ci*3.28084,inches:ci*39.37,kilometers:ci/1e3,kilometres:ci/1e3,meters:ci,metres:ci,miles:ci/1609.344,millimeters:ci*1e3,millimetres:ci*1e3,nauticalmiles:ci/1852,radians:1,yards:ci*1.0936};function $n(i,r,a){a===void 0&&(a={});var u={type:"Feature"};return(a.id===0||a.id)&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.properties=r||{},u.geometry=i,u}function Gn(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!so(i[0])||!so(i[1]))throw new Error("coordinates must contain numbers");var u={type:"Point",coordinates:i};return $n(u,r,a)}function Cn(i,r,a){if(a===void 0&&(a={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var u={type:"LineString",coordinates:i};return $n(u,r,a)}function yi(i,r){r===void 0&&(r={});var a={type:"FeatureCollection"};return r.id&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.features=i,a}function cu(i,r){r===void 0&&(r="kilometers");var a=Ca[r];if(!a)throw new Error(r+" units is invalid");return i*a}function Sr(i,r){r===void 0&&(r="kilometers");var a=Ca[r];if(!a)throw new Error(r+" units is invalid");return i/a}function vi(i){var r=i%(2*Math.PI);return r*180/Math.PI}function Fi(i){var r=i%360;return r*Math.PI/180}function so(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function os(i){var r,a,u={type:"FeatureCollection",features:[]};if(i.type==="Feature"?a=i.geometry:a=i,a.type==="LineString")r=[a.coordinates];else if(a.type==="MultiLineString")r=a.coordinates;else if(a.type==="MultiPolygon")r=[].concat.apply([],a.coordinates);else if(a.type==="Polygon")r=a.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return r.forEach(function(d){r.forEach(function(g){for(var _=0;_<d.length-1;_++)for(var b=_;b<g.length-1;b++)if(!(d===g&&(Math.abs(_-b)===1||_===0&&b===d.length-2&&d[_][0]===d[d.length-1][0]&&d[_][1]===d[d.length-1][1]))){var w=oo(d[_][0],d[_][1],d[_+1][0],d[_+1][1],g[b][0],g[b][1],g[b+1][0],g[b+1][1]);w&&u.features.push(Gn([w[0],w[1]]))}})}),u}function oo(i,r,a,u,d,g,_,b){var w,B,j,I,at,ft={x:null,y:null,onLine1:!1,onLine2:!1};return w=(b-g)*(a-i)-(_-d)*(u-r),w===0?ft.x!==null&&ft.y!==null?ft:!1:(B=r-g,j=i-d,I=(_-d)*B-(b-g)*j,at=(a-i)*B-(u-r)*j,B=I/w,j=at/w,ft.x=i+B*(a-i),ft.y=r+B*(u-r),B>=0&&B<=1&&(ft.onLine1=!0),j>=0&&j<=1&&(ft.onLine2=!0),ft.onLine1&&ft.onLine2?[ft.x,ft.y]:!1)}oi.Line=oi.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(me("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let r=i[i.length-1];this._hintline.setLatLngs([r,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection(){return os(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,r){let a=L.polyline(this._layer.getLatLngs());i&&(r||(r=this._hintMarker.getLatLng()),a.addLatLng(r));let u=os(a.toGeoJSON(15));this._doesSelfIntersect=u.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(u,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._layer.getLatLngs(),u=a[a.length-1];if(r.equals(a[0])||a.length>0&&r.equals(u)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:r,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(r);let d=this._createMarker(r);this._setTooltipText(),this._setHintLineAfterNewVertex(r),this._fireVertexAdded(d,void 0,r,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let r=this._layer.getLatLngs(),a=i[i.length-1],{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(i,a);i.pop(),this._layerGroup.removeLayer(a);let d=i[i.length-1],g=r.indexOf(d.getLatLng());r=r.slice(0,g+1),this._layer.setLatLngs(r),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(a,u,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let r=L.polyline(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.options.snappable&&this._cleanupSnapping();let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),r.on("click",this._finishShape,this),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=1?r=me("tooltips.continueLine"):r=me("tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change(i){this._fireChange(i,"Draw")},setStyle(){var i,r;(i=this._layer)==null||i.setStyle(this.options.templineStyle),(r=this._hintline)==null||r.setStyle(this.options.hintlineStyle)}}),oi.Polygon=oi.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),this._layer.getLatLngs().flat().length===1?(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()):r.on("click",()=>1),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=2?r=me("tooltips.continueLine"):r=me("tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))}}),oi.Rectangle=oi.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(me("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let r=0;r<2;r+=1){let a=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._styleMarkers.push(a)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(r),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(a=>{L.DomUtil.addClass(a._icon,"visible"),a.setLatLng(r)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(me("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}let r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize(){let i=va(this._startMarker.getLatLng(),this._map),r=va(this._hintMarker.getLatLng(),this._map),a=L.PM.Utils._getRotatedRectangle(i,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(a),this.options.cursorMarker&&this._styleMarkers){let u=[];a.forEach(d=>{!d.equals(i,1e-8)&&!d.equals(r,1e-8)&&u.push(d)}),u.forEach((d,g)=>{try{this._styleMarkers[g].setLatLng(d)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||a.equals(r))return;let u=L.rectangle([a,r],this.options.pathOptions);if(this.options.rectangleAngle){let g=L.PM.Utils._getRotatedRectangle(a,r,this.options.rectangleAngle||0,this._map);u.setLatLngs(g),u.pm&&u.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u);let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))},setStyle(){var i;(i=this._layer)==null||i.setStyle(this.options.pathOptions)}}),oi.CircleMarker=oi.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let r={};L.extend(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(me("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(me("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let r=this._hintMarker.getLatLng();this._centerMarker.setLatLng(r),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(me("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,r])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this._handleHintMarkerSnapping();let r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new this._BaseCircleClass(r,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(a),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._centerMarker.getLatLng(),a=this._defaultRadius;if(this.options[this._editableOption]){let _=this._hintMarker.getLatLng();a=this._distanceCalculation(r,_),this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?a=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(a=this.options[this._maxRadiusOption])}let u={...this.options.pathOptions,radius:a},d=new this._BaseCircleClass(r,u);this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),d.pm&&d.pm._updateHiddenPolyCircle(),this._fireCreate(d);let g=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(g))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let r=this._centerMarker.getLatLng(),a=this._distanceCalculation(r,i);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?i=ss(this._map,r,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(i=ss(this._map,r,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var r,a;let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),(r=this._layer)==null||r.setStyle(i),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))}}),oi.Circle=oi.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,r){return this._map.distance(i,r)}});function zi(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function en(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function as(i){return i.type==="Feature"?i.geometry:i}function ao(i,r){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function lo(i,r,a){if(i!==null)for(var u,d,g,_,b,w,B,j=0,I=0,at,ft=i.type,St=ft==="FeatureCollection",Ht=ft==="Feature",Qt=St?i.features.length:1,ke=0;ke<Qt;ke++){B=St?i.features[ke].geometry:Ht?i.geometry:i,at=B?B.type==="GeometryCollection":!1,b=at?B.geometries.length:1;for(var z=0;z<b;z++){var Z=0,Q=0;if(_=at?B.geometries[z]:B,_!==null){w=_.coordinates;var pt=_.type;switch(j=0,pt){case null:break;case"Point":if(r(w,I,ke,Z,Q)===!1)return!1;I++,Z++;break;case"LineString":case"MultiPoint":for(u=0;u<w.length;u++){if(r(w[u],I,ke,Z,Q)===!1)return!1;I++,pt==="MultiPoint"&&Z++}pt==="LineString"&&Z++;break;case"Polygon":case"MultiLineString":for(u=0;u<w.length;u++){for(d=0;d<w[u].length-j;d++){if(r(w[u][d],I,ke,Z,Q)===!1)return!1;I++}pt==="MultiLineString"&&Z++,pt==="Polygon"&&Q++}pt==="Polygon"&&Z++;break;case"MultiPolygon":for(u=0;u<w.length;u++){for(Q=0,d=0;d<w[u].length;d++){for(g=0;g<w[u][d].length-j;g++){if(r(w[u][d][g],I,ke,Z,Q)===!1)return!1;I++}Q++}Z++}break;case"GeometryCollection":for(u=0;u<_.geometries.length;u++)if(lo(_.geometries[u],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pi(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&r(i.features[a],a)!==!1;a++);}function rr(i,r,a){var u=a;return pi(i,function(d,g){g===0&&a===void 0?u=d:u=r(u,d,g)}),u}function hu(i,r){var a,u,d,g,_,b,w,B,j,I,at=0,ft=i.type==="FeatureCollection",St=i.type==="Feature",Ht=ft?i.features.length:1;for(a=0;a<Ht;a++){for(b=ft?i.features[a].geometry:St?i.geometry:i,B=ft?i.features[a].properties:St?i.properties:{},j=ft?i.features[a].bbox:St?i.bbox:void 0,I=ft?i.features[a].id:St?i.id:void 0,w=b?b.type==="GeometryCollection":!1,_=w?b.geometries.length:1,d=0;d<_;d++){if(g=w?b.geometries[d]:b,g===null){if(r(null,at,B,j,I)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(g,at,B,j,I)===!1)return!1;break}case"GeometryCollection":{for(u=0;u<g.geometries.length;u++)if(r(g.geometries[u],at,B,j,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}at++}}function Hi(i,r){hu(i,function(a,u,d,g,_){var b=a===null?null:a.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r($n(a,d,{bbox:g,id:_}),u,0)===!1?!1:void 0}var w;switch(b){case"MultiPoint":w="Point";break;case"MultiLineString":w="LineString";break;case"MultiPolygon":w="Polygon";break}for(var B=0;B<a.coordinates.length;B++){var j=a.coordinates[B],I={type:w,coordinates:j};if(r($n(I,d),u,B)===!1)return!1}})}function du(i){if(!i)throw new Error("geojson is required");var r=[];return Hi(i,function(a){sr(a,r)}),yi(r)}function sr(i,r){var a=[],u=i.geometry;if(u!==null){switch(u.type){case"Polygon":a=en(u);break;case"LineString":a=[en(u)]}a.forEach(function(d){var g=fu(d,i.properties);g.forEach(function(_){_.id=r.length,r.push(_)})})}}function fu(i,r){var a=[];return i.reduce(function(u,d){var g=Cn([u,d],r);return g.bbox=Ar(u,d),a.push(g),d}),a}function Ar(i,r){var a=i[0],u=i[1],d=r[0],g=r[1],_=a<d?a:d,b=u<g?u:g,w=a>d?a:d,B=u>g?u:g;return[_,b,w,B]}var ls=du,us=v(In(),1);function pu(i,r){var a={},u=[];if(i.type==="LineString"&&(i=$n(i)),r.type==="LineString"&&(r=$n(r)),i.type==="Feature"&&r.type==="Feature"&&i.geometry!==null&&r.geometry!==null&&i.geometry.type==="LineString"&&r.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var d=hn(i,r);return d&&u.push(d),yi(u)}var g=(0,us.default)();return g.load(ls(r)),pi(ls(i),function(_){pi(g.search(_),function(b){var w=hn(_,b);if(w){var B=en(w).join(",");a[B]||(a[B]=!0,u.push(w))}})}),yi(u)}function hn(i,r){var a=en(i),u=en(r);if(a.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(u.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var d=a[0][0],g=a[0][1],_=a[1][0],b=a[1][1],w=u[0][0],B=u[0][1],j=u[1][0],I=u[1][1],at=(I-B)*(_-d)-(j-w)*(b-g),ft=(j-w)*(g-B)-(I-B)*(d-w),St=(_-d)*(g-B)-(b-g)*(d-w);if(at===0)return null;var Ht=ft/at,Qt=St/at;if(Ht>=0&&Ht<=1&&Qt>=0&&Qt<=1){var ke=d+Ht*(_-d),z=g+Ht*(b-g);return Gn([ke,z])}return null}var nn=pu,Ea=v(In(),1);function uo(i,r,a){a===void 0&&(a={});var u=zi(i),d=zi(r),g=Fi(d[1]-u[1]),_=Fi(d[0]-u[0]),b=Fi(u[1]),w=Fi(d[1]),B=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(b)*Math.cos(w);return cu(2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B)),a.units)}var Vn=uo;function dn(i){var r=i[0],a=i[1],u=i[2],d=i[3],g=Vn(i.slice(0,2),[u,a]),_=Vn(i.slice(0,2),[r,d]);if(g>=_){var b=(a+d)/2;return[r,b-(u-r)/2,u,b+(u-r)/2]}else{var w=(r+u)/2;return[w-(d-a)/2,a,w+(d-a)/2,d]}}var mu=dn;function En(i){var r=[1/0,1/0,-1/0,-1/0];return lo(i,function(a){r[0]>a[0]&&(r[0]=a[0]),r[1]>a[1]&&(r[1]=a[1]),r[2]<a[0]&&(r[2]=a[0]),r[3]<a[1]&&(r[3]=a[1])}),r}En.default=En;var Tr=En;function fn(i,r){r===void 0&&(r={});var a=r.precision,u=r.coordinates,d=r.mutate;if(a=a==null||isNaN(a)?6:a,u=u==null||isNaN(u)?3:u,!i)throw new Error("<geojson> is required");if(typeof a!="number")throw new Error("<precision> must be a number");if(typeof u!="number")throw new Error("<coordinates> must be a number");(d===!1||d===void 0)&&(i=JSON.parse(JSON.stringify(i)));var g=Math.pow(10,a);return lo(i,function(_){cs(_,g,u)}),i}function cs(i,r,a){i.length>a&&i.splice(a,i.length);for(var u=0;u<i.length;u++)i[u]=Math.round(i[u]*r)/r;return i}var ka=fn;function hs(i,r,a){if(a===void 0&&(a={}),a.final===!0)return ds(i,r);var u=zi(i),d=zi(r),g=Fi(u[0]),_=Fi(d[0]),b=Fi(u[1]),w=Fi(d[1]),B=Math.sin(_-g)*Math.cos(w),j=Math.cos(b)*Math.sin(w)-Math.sin(b)*Math.cos(w)*Math.cos(_-g);return vi(Math.atan2(B,j))}function ds(i,r){var a=hs(r,i);return a=(a+180)%360,a}function fs(i,r,a,u){u===void 0&&(u={});var d=zi(i),g=Fi(d[0]),_=Fi(d[1]),b=Fi(a),w=Sr(r,u.units),B=Math.asin(Math.sin(_)*Math.cos(w)+Math.cos(_)*Math.sin(w)*Math.cos(b)),j=g+Math.atan2(Math.sin(b)*Math.sin(w)*Math.cos(_),Math.cos(w)-Math.sin(_)*Math.sin(B)),I=vi(j),at=vi(B);return Gn([I,at],u.properties)}function ps(i,r,a){a===void 0&&(a={});var u=Gn([1/0,1/0],{dist:1/0}),d=0;return Hi(i,function(g){for(var _=en(g),b=0;b<_.length-1;b++){var w=Gn(_[b]);w.properties.dist=Vn(r,w,a);var B=Gn(_[b+1]);B.properties.dist=Vn(r,B,a);var j=Vn(w,B,a),I=Math.max(w.properties.dist,B.properties.dist),at=hs(w,B),ft=fs(r,I,at+90,a),St=fs(r,I,at-90,a),Ht=nn(Cn([ft.geometry.coordinates,St.geometry.coordinates]),Cn([w.geometry.coordinates,B.geometry.coordinates])),Qt=null;Ht.features.length>0&&(Qt=Ht.features[0],Qt.properties.dist=Vn(r,Qt,a),Qt.properties.location=d+Vn(w,Qt,a)),w.properties.dist<u.properties.dist&&(u=w,u.properties.index=b,u.properties.location=d),B.properties.dist<u.properties.dist&&(u=B,u.properties.index=b+1,u.properties.location=d+j),Qt&&Qt.properties.dist<u.properties.dist&&(u=Qt,u.properties.index=b),d+=j}}),u}var or=ps;function ms(i,r){if(!i)throw new Error("line is required");if(!r)throw new Error("splitter is required");var a=ao(i),u=ao(r);if(a!=="LineString")throw new Error("line must be LineString");if(u==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(u==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var d=ka(r,{precision:7});switch(u){case"Point":return _s(i,d);case"MultiPoint":return gs(i,d);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return gs(i,nn(i,d))}}function gs(i,r){var a=[],u=(0,Ea.default)();return Hi(r,function(d){if(a.forEach(function(b,w){b.id=w}),!a.length)a=_s(i,d).features,a.forEach(function(b){b.bbox||(b.bbox=mu(Tr(b)))}),u.load(yi(a));else{var g=u.search(d);if(g.features.length){var _=Ma(d,g);a=a.filter(function(b){return b.id!==_.id}),u.remove(_),pi(_s(_,d),function(b){a.push(b),u.insert(b)})}}}),yi(a)}function _s(i,r){var a=[],u=en(i)[0],d=en(i)[i.geometry.coordinates.length-1];if(ar(u,zi(r))||ar(d,zi(r)))return yi([i]);var g=(0,Ea.default)(),_=ls(i);g.load(_);var b=g.search(r);if(!b.features.length)return yi([i]);var w=Ma(r,b),B=[u],j=rr(_,function(I,at,ft){var St=en(at)[1],Ht=zi(r);return ft===w.id?(I.push(Ht),a.push(Cn(I)),ar(Ht,St)?[Ht]:[Ht,St]):(I.push(St),I)},B);return j.length>1&&a.push(Cn(j)),yi(a)}function Ma(i,r){if(!r.features.length)throw new Error("lines must contain features");if(r.features.length===1)return r.features[0];var a,u=1/0;return pi(r,function(d){var g=or(d,i),_=g.properties.dist;_<u&&(a=d,u=_)}),a}function ar(i,r){return i[0]===r[0]&&i[1]===r[1]}var gu=ms;function Dr(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("point is required");if(!r)throw new Error("polygon is required");var u=zi(i),d=as(r),g=d.type,_=r.bbox,b=d.coordinates;if(_&&Ba(u,_)===!1)return!1;g==="Polygon"&&(b=[b]);for(var w=!1,B=0;B<b.length&&!w;B++)if(Pa(u,b[B][0],a.ignoreBoundary)){for(var j=!1,I=1;I<b[B].length&&!j;)Pa(u,b[B][I],!a.ignoreBoundary)&&(j=!0),I++;j||(w=!0)}return w}function Pa(i,r,a){var u=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var d=0,g=r.length-1;d<r.length;g=d++){var _=r[d][0],b=r[d][1],w=r[g][0],B=r[g][1],j=i[1]*(_-w)+b*(w-i[0])+B*(i[0]-_)===0&&(_-i[0])*(w-i[0])<=0&&(b-i[1])*(B-i[1])<=0;if(j)return!a;var I=b>i[1]!=B>i[1]&&i[0]<(w-_)*(i[1]-b)/(B-b)+_;I&&(u=!u)}return u}function Ba(i,r){return r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[0]&&r[3]>=i[1]}function _u(i,r,a){a===void 0&&(a={});for(var u=zi(i),d=en(r),g=0;g<d.length-1;g++){var _=!1;if(a.ignoreEndVertices&&(g===0&&(_="start"),g===d.length-2&&(_="end"),g===0&&g+1===d.length-1&&(_="both")),rn(d[g],d[g+1],u,_,typeof a.epsilon>"u"?null:a.epsilon))return!0}return!1}function rn(i,r,a,u,d){var g=a[0],_=a[1],b=i[0],w=i[1],B=r[0],j=r[1],I=a[0]-b,at=a[1]-w,ft=B-b,St=j-w,Ht=I*St-at*ft;if(d!==null){if(Math.abs(Ht)>d)return!1}else if(Ht!==0)return!1;if(u){if(u==="start")return Math.abs(ft)>=Math.abs(St)?ft>0?b<g&&g<=B:B<=g&&g<b:St>0?w<_&&_<=j:j<=_&&_<w;if(u==="end")return Math.abs(ft)>=Math.abs(St)?ft>0?b<=g&&g<B:B<g&&g<=b:St>0?w<=_&&_<j:j<_&&_<=w;if(u==="both")return Math.abs(ft)>=Math.abs(St)?ft>0?b<g&&g<B:B<g&&g<b:St>0?w<_&&_<j:j<_&&_<w}else return Math.abs(ft)>=Math.abs(St)?ft>0?b<=g&&g<=B:B<=g&&g<=b:St>0?w<=_&&_<=j:j<=_&&_<=w;return!1}var kn=_u;function yu(i,r){var a=as(i),u=as(r),d=a.type,g=u.type,_=a.coordinates,b=u.coordinates;switch(d){case"Point":switch(g){case"Point":return vs(_,b);default:throw new Error("feature2 "+g+" geometry not supported")}case"MultiPoint":switch(g){case"Point":return ys(a,u);case"MultiPoint":return vu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return kn(u,a,{ignoreEndVertices:!0});case"LineString":return Rr(a,u);case"MultiPoint":return Sa(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return Dr(u,a,{ignoreBoundary:!0});case"LineString":return xu(a,u);case"Polygon":return lr(a,u);case"MultiPoint":return bu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+d+" geometry not supported")}}function ys(i,r){var a,u=!1;for(a=0;a<i.coordinates.length;a++)if(vs(i.coordinates[a],r.coordinates)){u=!0;break}return u}function vu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){for(var d=u[a],g=!1,_=0,b=i.coordinates;_<b.length;_++){var w=b[_];if(vs(d,w)){g=!0;break}}if(!g)return!1}return!0}function Sa(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(kn(g,i,{ignoreEndVertices:!0})&&(a=!0),!kn(g,i))return!1}return!!a}function bu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){var d=u[a];if(!Dr(d,i,{ignoreBoundary:!0}))return!1}return!0}function Rr(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(kn({type:"Point",coordinates:g},i,{ignoreEndVertices:!0})&&(a=!0),!kn({type:"Point",coordinates:g},i,{ignoreEndVertices:!1}))return!1}return a}function xu(i,r){var a=!1,u=0,d=Tr(i),g=Tr(r);if(!co(d,g))return!1;for(u;u<r.coordinates.length-1;u++){var _=wu(r.coordinates[u],r.coordinates[u+1]);if(Dr({type:"Point",coordinates:_},i,{ignoreBoundary:!0})){a=!0;break}}return a}function lr(i,r){if(i.type==="Feature"&&i.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var a=Tr(i),u=Tr(r);if(!co(a,u))return!1;for(var d=as(r).coordinates,g=0,_=d;g<_.length;g++)for(var b=_[g],w=0,B=b;w<B.length;w++){var j=B[w];if(!Dr(j,i))return!1}return!0}function co(i,r){return!(i[0]>r[0]||i[2]<r[2]||i[1]>r[1]||i[3]<r[3])}function vs(i,r){return i[0]===r[0]&&i[1]===r[1]}function wu(i,r){return[(i[0]+r[0])/2,(i[1]+r[1])/2]}var pn=v(xn()),ho=i=>()=>i,bs=i=>{let r=i?(a,u)=>u.minus(a).abs().isLessThanOrEqualTo(i):ho(!1);return(a,u)=>r(a,u)?0:a.comparedTo(u)};function Or(i){let r=i?(a,u,d,g,_)=>a.exponentiatedBy(2).isLessThanOrEqualTo(g.minus(u).exponentiatedBy(2).plus(_.minus(d).exponentiatedBy(2)).times(i)):ho(!1);return(a,u,d)=>{let g=a.x,_=a.y,b=d.x,w=d.y,B=_.minus(w).times(u.x.minus(b)).minus(g.minus(b).times(u.y.minus(w)));return r(B,g,_,b,w)?0:B.comparedTo(0)}}var Lu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ur=Math.ceil,hi=Math.floor,mi="[BigNumber Error] ",fo=mi+"Number primitive has more than 15 significant digits: ",Zi=1e14,pe=14,po=9007199254740991,xs=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],mn=1e7,bi=1e9;function Aa(i){var r,a,u,d=z.prototype={constructor:z,toString:null,valueOf:null},g=new z(1),_=20,b=4,w=-7,B=21,j=-1e7,I=1e7,at=!1,ft=1,St=0,Ht={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Qt="0123456789abcdefghijklmnopqrstuvwxyz",ke=!0;function z(C,A){var D,T,R,O,W,K,Y,ot,st=this;if(!(st instanceof z))return new z(C,A);if(A==null){if(C&&C._isBigNumber===!0){st.s=C.s,!C.c||C.e>I?st.c=st.e=null:C.e<j?st.c=[st.e=0]:(st.e=C.e,st.c=C.c.slice());return}if((K=typeof C=="number")&&C*0==0){if(st.s=1/C<0?(C=-C,-1):1,C===~~C){for(O=0,W=C;W>=10;W/=10,O++);O>I?st.c=st.e=null:(st.e=O,st.c=[C]);return}ot=String(C)}else{if(!Lu.test(ot=String(C)))return u(st,ot,K);st.s=ot.charCodeAt(0)==45?(ot=ot.slice(1),-1):1}(O=ot.indexOf("."))>-1&&(ot=ot.replace(".","")),(W=ot.search(/e/i))>0?(O<0&&(O=W),O+=+ot.slice(W+1),ot=ot.substring(0,W)):O<0&&(O=ot.length)}else{if(e(A,2,Qt.length,"Base"),A==10&&ke)return st=new z(C),tt(st,_+st.e+1,b);if(ot=String(C),K=typeof C=="number"){if(C*0!=0)return u(st,ot,K,A);if(st.s=1/C<0?(ot=ot.slice(1),-1):1,z.DEBUG&&ot.replace(/^0\.0*|\./,"").length>15)throw Error(fo+C)}else st.s=ot.charCodeAt(0)===45?(ot=ot.slice(1),-1):1;for(D=Qt.slice(0,A),O=W=0,Y=ot.length;W<Y;W++)if(D.indexOf(T=ot.charAt(W))<0){if(T=="."){if(W>O){O=Y;continue}}else if(!R&&(ot==ot.toUpperCase()&&(ot=ot.toLowerCase())||ot==ot.toLowerCase()&&(ot=ot.toUpperCase()))){R=!0,W=-1,O=0;continue}return u(st,String(C),K,A)}K=!1,ot=a(ot,A,10,st.s),(O=ot.indexOf("."))>-1?ot=ot.replace(".",""):O=ot.length}for(W=0;ot.charCodeAt(W)===48;W++);for(Y=ot.length;ot.charCodeAt(--Y)===48;);if(ot=ot.slice(W,++Y)){if(Y-=W,K&&z.DEBUG&&Y>15&&(C>po||C!==hi(C)))throw Error(fo+st.s*C);if((O=O-W-1)>I)st.c=st.e=null;else if(O<j)st.c=[st.e=0];else{if(st.e=O,st.c=[],W=(O+1)%pe,O<0&&(W+=pe),W<Y){for(W&&st.c.push(+ot.slice(0,W)),Y-=pe;W<Y;)st.c.push(+ot.slice(W,W+=pe));W=pe-(ot=ot.slice(W)).length}else W-=Y;for(;W--;ot+="0");st.c.push(+ot)}}else st.c=[st.e=0]}z.clone=Aa,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(C){var A,D;if(C!=null)if(typeof C=="object"){if(C.hasOwnProperty(A="DECIMAL_PLACES")&&(D=C[A],e(D,0,bi,A),_=D),C.hasOwnProperty(A="ROUNDING_MODE")&&(D=C[A],e(D,0,8,A),b=D),C.hasOwnProperty(A="EXPONENTIAL_AT")&&(D=C[A],D&&D.pop?(e(D[0],-1e9,0,A),e(D[1],0,bi,A),w=D[0],B=D[1]):(e(D,-1e9,bi,A),w=-(B=D<0?-D:D))),C.hasOwnProperty(A="RANGE"))if(D=C[A],D&&D.pop)e(D[0],-1e9,-1,A),e(D[1],1,bi,A),j=D[0],I=D[1];else if(e(D,-1e9,bi,A),D)j=-(I=D<0?-D:D);else throw Error(mi+A+" cannot be zero: "+D);if(C.hasOwnProperty(A="CRYPTO"))if(D=C[A],D===!!D)if(D)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))at=D;else throw at=!D,Error(mi+"crypto unavailable");else at=D;else throw Error(mi+A+" not true or false: "+D);if(C.hasOwnProperty(A="MODULO_MODE")&&(D=C[A],e(D,0,9,A),ft=D),C.hasOwnProperty(A="POW_PRECISION")&&(D=C[A],e(D,0,bi,A),St=D),C.hasOwnProperty(A="FORMAT"))if(D=C[A],typeof D=="object")Ht=D;else throw Error(mi+A+" not an object: "+D);if(C.hasOwnProperty(A="ALPHABET"))if(D=C[A],typeof D=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(D))ke=D.slice(0,10)=="0123456789",Qt=D;else throw Error(mi+A+" invalid: "+D)}else throw Error(mi+"Object expected: "+C);return{DECIMAL_PLACES:_,ROUNDING_MODE:b,EXPONENTIAL_AT:[w,B],RANGE:[j,I],CRYPTO:at,MODULO_MODE:ft,POW_PRECISION:St,FORMAT:Ht,ALPHABET:Qt}},z.isBigNumber=function(C){if(!C||C._isBigNumber!==!0)return!1;if(!z.DEBUG)return!0;var A,D,T=C.c,R=C.e,O=C.s;t:if({}.toString.call(T)=="[object Array]"){if((O===1||O===-1)&&R>=-1e9&&R<=bi&&R===hi(R)){if(T[0]===0){if(R===0&&T.length===1)return!0;break t}if(A=(R+1)%pe,A<1&&(A+=pe),String(T[0]).length==A){for(A=0;A<T.length;A++)if(D=T[A],D<0||D>=Zi||D!==hi(D))break t;if(D!==0)return!0}}}else if(T===null&&R===null&&(O===null||O===1||O===-1))return!0;throw Error(mi+"Invalid BigNumber: "+C)},z.maximum=z.max=function(){return Q(arguments,-1)},z.minimum=z.min=function(){return Q(arguments,1)},z.random=function(){var C=9007199254740992,A=Math.random()*C&2097151?function(){return hi(Math.random()*C)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(D){var T,R,O,W,K,Y=0,ot=[],st=new z(g);if(D==null?D=_:e(D,0,bi),W=ur(D/pe),at)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(W*=2));Y<W;)K=T[Y]*131072+(T[Y+1]>>>11),K>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),T[Y]=R[0],T[Y+1]=R[1]):(ot.push(K%1e14),Y+=2);Y=W/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(W*=7);Y<W;)K=(T[Y]&31)*281474976710656+T[Y+1]*1099511627776+T[Y+2]*4294967296+T[Y+3]*16777216+(T[Y+4]<<16)+(T[Y+5]<<8)+T[Y+6],K>=9e15?crypto.randomBytes(7).copy(T,Y):(ot.push(K%1e14),Y+=7);Y=W/7}else throw at=!1,Error(mi+"crypto unavailable");if(!at)for(;Y<W;)K=A(),K<9e15&&(ot[Y++]=K%1e14);for(W=ot[--Y],D%=pe,W&&D&&(K=xs[pe-D],ot[Y]=hi(W/K)*K);ot[Y]===0;ot.pop(),Y--);if(Y<0)ot=[O=0];else{for(O=-1;ot[0]===0;ot.splice(0,1),O-=pe);for(Y=1,K=ot[0];K>=10;K/=10,Y++);Y<pe&&(O-=pe-Y)}return st.e=O,st.c=ot,st}}(),z.sum=function(){for(var C=1,A=arguments,D=new z(A[0]);C<A.length;)D=D.plus(A[C++]);return D},a=function(){var C="0123456789";function A(D,T,R,O){for(var W,K=[0],Y,ot=0,st=D.length;ot<st;){for(Y=K.length;Y--;K[Y]*=T);for(K[0]+=O.indexOf(D.charAt(ot++)),W=0;W<K.length;W++)K[W]>R-1&&(K[W+1]==null&&(K[W+1]=0),K[W+1]+=K[W]/R|0,K[W]%=R)}return K.reverse()}return function(D,T,R,O,W){var K,Y,ot,st,kt,Xt,te,ae,De=D.indexOf("."),ze=_,Se=b;for(De>=0&&(st=St,St=0,D=D.replace(".",""),ae=new z(T),Xt=ae.pow(D.length-De),St=st,ae.c=A(m(Si(Xt.c),Xt.e,"0"),10,R,C),ae.e=ae.c.length),te=A(D,T,R,W?(K=Qt,C):(K=C,Qt)),ot=st=te.length;te[--st]==0;te.pop());if(!te[0])return K.charAt(0);if(De<0?--ot:(Xt.c=te,Xt.e=ot,Xt.s=O,Xt=r(Xt,ae,ze,Se,R),te=Xt.c,kt=Xt.r,ot=Xt.e),Y=ot+ze+1,De=te[Y],st=R/2,kt=kt||Y<0||te[Y+1]!=null,kt=Se<4?(De!=null||kt)&&(Se==0||Se==(Xt.s<0?3:2)):De>st||De==st&&(Se==4||kt||Se==6&&te[Y-1]&1||Se==(Xt.s<0?8:7)),Y<1||!te[0])D=kt?m(K.charAt(1),-ze,K.charAt(0)):K.charAt(0);else{if(te.length=Y,kt)for(--R;++te[--Y]>R;)te[Y]=0,Y||(++ot,te=[1].concat(te));for(st=te.length;!te[--st];);for(De=0,D="";De<=st;D+=K.charAt(te[De++]));D=m(D,ot,K.charAt(0))}return D}}(),r=function(){function C(T,R,O){var W,K,Y,ot,st=0,kt=T.length,Xt=R%mn,te=R/mn|0;for(T=T.slice();kt--;)Y=T[kt]%mn,ot=T[kt]/mn|0,W=te*Y+ot*Xt,K=Xt*Y+W%mn*mn+st,st=(K/O|0)+(W/mn|0)+te*ot,T[kt]=K%O;return st&&(T=[st].concat(T)),T}function A(T,R,O,W){var K,Y;if(O!=W)Y=O>W?1:-1;else for(K=Y=0;K<O;K++)if(T[K]!=R[K]){Y=T[K]>R[K]?1:-1;break}return Y}function D(T,R,O,W){for(var K=0;O--;)T[O]-=K,K=T[O]<R[O]?1:0,T[O]=K*W+T[O]-R[O];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,R,O,W,K){var Y,ot,st,kt,Xt,te,ae,De,ze,Se,Ne,wi,za,Bu,Su,Mn,yo,an=T.s==R.s?1:-1,Ai=T.c,Ye=R.c;if(!Ai||!Ai[0]||!Ye||!Ye[0])return new z(!T.s||!R.s||(Ai?Ye&&Ai[0]==Ye[0]:!Ye)?NaN:Ai&&Ai[0]==0||!Ye?an*0:an/0);for(De=new z(an),ze=De.c=[],ot=T.e-R.e,an=O+ot+1,K||(K=Zi,ot=Bi(T.e/pe)-Bi(R.e/pe),an=an/pe|0),st=0;Ye[st]==(Ai[st]||0);st++);if(Ye[st]>(Ai[st]||0)&&ot--,an<0)ze.push(1),kt=!0;else{for(Bu=Ai.length,Mn=Ye.length,st=0,an+=2,Xt=hi(K/(Ye[0]+1)),Xt>1&&(Ye=C(Ye,Xt,K),Ai=C(Ai,Xt,K),Mn=Ye.length,Bu=Ai.length),za=Mn,Se=Ai.slice(0,Mn),Ne=Se.length;Ne<Mn;Se[Ne++]=0);yo=Ye.slice(),yo=[0].concat(yo),Su=Ye[0],Ye[1]>=K/2&&Su++;do{if(Xt=0,Y=A(Ye,Se,Mn,Ne),Y<0){if(wi=Se[0],Mn!=Ne&&(wi=wi*K+(Se[1]||0)),Xt=hi(wi/Su),Xt>1)for(Xt>=K&&(Xt=K-1),te=C(Ye,Xt,K),ae=te.length,Ne=Se.length;A(te,Se,ae,Ne)==1;)Xt--,D(te,Mn<ae?yo:Ye,ae,K),ae=te.length,Y=1;else Xt==0&&(Y=Xt=1),te=Ye.slice(),ae=te.length;if(ae<Ne&&(te=[0].concat(te)),D(Se,te,Ne,K),Ne=Se.length,Y==-1)for(;A(Ye,Se,Mn,Ne)<1;)Xt++,D(Se,Mn<Ne?yo:Ye,Ne,K),Ne=Se.length}else Y===0&&(Xt++,Se=[0]);ze[st++]=Xt,Se[0]?Se[Ne++]=Ai[za]||0:(Se=[Ai[za]],Ne=1)}while((za++<Bu||Se[0]!=null)&&an--);kt=Se[0]!=null,ze[0]||ze.splice(0,1)}if(K==Zi){for(st=1,an=ze[0];an>=10;an/=10,st++);tt(De,O+(De.e=st+ot*pe-1)+1,W,kt)}else De.e=ot,De.r=+kt;return De}}();function Z(C,A,D,T){var R,O,W,K,Y;if(D==null?D=b:e(D,0,8),!C.c)return C.toString();if(R=C.c[0],W=C.e,A==null)Y=Si(C.c),Y=T==1||T==2&&(W<=w||W>=B)?c(Y,W):m(Y,W,"0");else if(C=tt(new z(C),A,D),O=C.e,Y=Si(C.c),K=Y.length,T==1||T==2&&(A<=O||O<=w)){for(;K<A;Y+="0",K++);Y=c(Y,O)}else if(A-=W,Y=m(Y,O,"0"),O+1>K){if(--A>0)for(Y+=".";A--;Y+="0");}else if(A+=O-K,A>0)for(O+1==K&&(Y+=".");A--;Y+="0");return C.s<0&&R?"-"+Y:Y}function Q(C,A){for(var D,T,R=1,O=new z(C[0]);R<C.length;R++)T=new z(C[R]),(!T.s||(D=Hn(O,T))===A||D===0&&O.s===A)&&(O=T);return O}function pt(C,A,D){for(var T=1,R=A.length;!A[--R];A.pop());for(R=A[0];R>=10;R/=10,T++);return(D=T+D*pe-1)>I?C.c=C.e=null:D<j?C.c=[C.e=0]:(C.e=D,C.c=A),C}u=function(){var C=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,D=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(O,W,K,Y){var ot,st=K?W:W.replace(R,"");if(T.test(st))O.s=isNaN(st)?null:st<0?-1:1;else{if(!K&&(st=st.replace(C,function(kt,Xt,te){return ot=(te=te.toLowerCase())=="x"?16:te=="b"?2:8,!Y||Y==ot?Xt:kt}),Y&&(ot=Y,st=st.replace(A,"$1").replace(D,"0.$1")),W!=st))return new z(st,ot);if(z.DEBUG)throw Error(mi+"Not a"+(Y?" base "+Y:"")+" number: "+W);O.s=null}O.c=O.e=null}}();function tt(C,A,D,T){var R,O,W,K,Y,ot,st,kt=C.c,Xt=xs;if(kt){t:{for(R=1,K=kt[0];K>=10;K/=10,R++);if(O=A-R,O<0)O+=pe,W=A,Y=kt[ot=0],st=hi(Y/Xt[R-W-1]%10);else if(ot=ur((O+1)/pe),ot>=kt.length)if(T){for(;kt.length<=ot;kt.push(0));Y=st=0,R=1,O%=pe,W=O-pe+1}else break t;else{for(Y=K=kt[ot],R=1;K>=10;K/=10,R++);O%=pe,W=O-pe+R,st=W<0?0:hi(Y/Xt[R-W-1]%10)}if(T=T||A<0||kt[ot+1]!=null||(W<0?Y:Y%Xt[R-W-1]),T=D<4?(st||T)&&(D==0||D==(C.s<0?3:2)):st>5||st==5&&(D==4||T||D==6&&(O>0?W>0?Y/Xt[R-W]:0:kt[ot-1])%10&1||D==(C.s<0?8:7)),A<1||!kt[0])return kt.length=0,T?(A-=C.e+1,kt[0]=Xt[(pe-A%pe)%pe],C.e=-A||0):kt[0]=C.e=0,C;if(O==0?(kt.length=ot,K=1,ot--):(kt.length=ot+1,K=Xt[pe-O],kt[ot]=W>0?hi(Y/Xt[R-W]%Xt[W])*K:0),T)for(;;)if(ot==0){for(O=1,W=kt[0];W>=10;W/=10,O++);for(W=kt[0]+=K,K=1;W>=10;W/=10,K++);O!=K&&(C.e++,kt[0]==Zi&&(kt[0]=1));break}else{if(kt[ot]+=K,kt[ot]!=Zi)break;kt[ot--]=0,K=1}for(O=kt.length;kt[--O]===0;kt.pop());}C.e>I?C.c=C.e=null:C.e<j&&(C.c=[C.e=0])}return C}function ct(C){var A,D=C.e;return D===null?C.toString():(A=Si(C.c),A=D<=w||D>=B?c(A,D):m(A,D,"0"),C.s<0?"-"+A:A)}return d.absoluteValue=d.abs=function(){var C=new z(this);return C.s<0&&(C.s=1),C},d.comparedTo=function(C,A){return Hn(this,new z(C,A))},d.decimalPlaces=d.dp=function(C,A){var D,T,R,O=this;if(C!=null)return e(C,0,bi),A==null?A=b:e(A,0,8),tt(new z(O),C+O.e+1,A);if(!(D=O.c))return null;if(T=((R=D.length-1)-Bi(this.e/pe))*pe,R=D[R])for(;R%10==0;R/=10,T--);return T<0&&(T=0),T},d.dividedBy=d.div=function(C,A){return r(this,new z(C,A),_,b)},d.dividedToIntegerBy=d.idiv=function(C,A){return r(this,new z(C,A),0,1)},d.exponentiatedBy=d.pow=function(C,A){var D,T,R,O,W,K,Y,ot,st,kt=this;if(C=new z(C),C.c&&!C.isInteger())throw Error(mi+"Exponent not an integer: "+ct(C));if(A!=null&&(A=new z(A)),K=C.e>14,!kt.c||!kt.c[0]||kt.c[0]==1&&!kt.e&&kt.c.length==1||!C.c||!C.c[0])return st=new z(Math.pow(+ct(kt),K?C.s*(2-o(C)):+ct(C))),A?st.mod(A):st;if(Y=C.s<0,A){if(A.c?!A.c[0]:!A.s)return new z(NaN);T=!Y&&kt.isInteger()&&A.isInteger(),T&&(kt=kt.mod(A))}else{if(C.e>9&&(kt.e>0||kt.e<-1||(kt.e==0?kt.c[0]>1||K&&kt.c[1]>=24e7:kt.c[0]<8e13||K&&kt.c[0]<=9999975e7)))return O=kt.s<0&&o(C)?-0:0,kt.e>-1&&(O=1/O),new z(Y?1/O:O);St&&(O=ur(St/pe+2))}for(K?(D=new z(.5),Y&&(C.s=1),ot=o(C)):(R=Math.abs(+ct(C)),ot=R%2),st=new z(g);;){if(ot){if(st=st.times(kt),!st.c)break;O?st.c.length>O&&(st.c.length=O):T&&(st=st.mod(A))}if(R){if(R=hi(R/2),R===0)break;ot=R%2}else if(C=C.times(D),tt(C,C.e+1,1),C.e>14)ot=o(C);else{if(R=+ct(C),R===0)break;ot=R%2}kt=kt.times(kt),O?kt.c&&kt.c.length>O&&(kt.c.length=O):T&&(kt=kt.mod(A))}return T?st:(Y&&(st=g.div(st)),A?st.mod(A):O?tt(st,St,b,W):st)},d.integerValue=function(C){var A=new z(this);return C==null?C=b:e(C,0,8),tt(A,A.e+1,C)},d.isEqualTo=d.eq=function(C,A){return Hn(this,new z(C,A))===0},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(C,A){return Hn(this,new z(C,A))>0},d.isGreaterThanOrEqualTo=d.gte=function(C,A){return(A=Hn(this,new z(C,A)))===1||A===0},d.isInteger=function(){return!!this.c&&Bi(this.e/pe)>this.c.length-2},d.isLessThan=d.lt=function(C,A){return Hn(this,new z(C,A))<0},d.isLessThanOrEqualTo=d.lte=function(C,A){return(A=Hn(this,new z(C,A)))===-1||A===0},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&this.c[0]==0},d.minus=function(C,A){var D,T,R,O,W=this,K=W.s;if(C=new z(C,A),A=C.s,!K||!A)return new z(NaN);if(K!=A)return C.s=-A,W.plus(C);var Y=W.e/pe,ot=C.e/pe,st=W.c,kt=C.c;if(!Y||!ot){if(!st||!kt)return st?(C.s=-A,C):new z(kt?W:NaN);if(!st[0]||!kt[0])return kt[0]?(C.s=-A,C):new z(st[0]?W:b==3?-0:0)}if(Y=Bi(Y),ot=Bi(ot),st=st.slice(),K=Y-ot){for((O=K<0)?(K=-K,R=st):(ot=Y,R=kt),R.reverse(),A=K;A--;R.push(0));R.reverse()}else for(T=(O=(K=st.length)<(A=kt.length))?K:A,K=A=0;A<T;A++)if(st[A]!=kt[A]){O=st[A]<kt[A];break}if(O&&(R=st,st=kt,kt=R,C.s=-C.s),A=(T=kt.length)-(D=st.length),A>0)for(;A--;st[D++]=0);for(A=Zi-1;T>K;){if(st[--T]<kt[T]){for(D=T;D&&!st[--D];st[D]=A);--st[D],st[T]+=Zi}st[T]-=kt[T]}for(;st[0]==0;st.splice(0,1),--ot);return st[0]?pt(C,st,ot):(C.s=b==3?-1:1,C.c=[C.e=0],C)},d.modulo=d.mod=function(C,A){var D,T,R=this;return C=new z(C,A),!R.c||!C.s||C.c&&!C.c[0]?new z(NaN):!C.c||R.c&&!R.c[0]?new z(R):(ft==9?(T=C.s,C.s=1,D=r(R,C,0,3),C.s=T,D.s*=T):D=r(R,C,0,ft),C=R.minus(D.times(C)),!C.c[0]&&ft==1&&(C.s=R.s),C)},d.multipliedBy=d.times=function(C,A){var D,T,R,O,W,K,Y,ot,st,kt,Xt,te,ae,De,ze,Se=this,Ne=Se.c,wi=(C=new z(C,A)).c;if(!Ne||!wi||!Ne[0]||!wi[0])return!Se.s||!C.s||Ne&&!Ne[0]&&!wi||wi&&!wi[0]&&!Ne?C.c=C.e=C.s=null:(C.s*=Se.s,!Ne||!wi?C.c=C.e=null:(C.c=[0],C.e=0)),C;for(T=Bi(Se.e/pe)+Bi(C.e/pe),C.s*=Se.s,Y=Ne.length,kt=wi.length,Y<kt&&(ae=Ne,Ne=wi,wi=ae,R=Y,Y=kt,kt=R),R=Y+kt,ae=[];R--;ae.push(0));for(De=Zi,ze=mn,R=kt;--R>=0;){for(D=0,Xt=wi[R]%ze,te=wi[R]/ze|0,W=Y,O=R+W;O>R;)ot=Ne[--W]%ze,st=Ne[W]/ze|0,K=te*ot+st*Xt,ot=Xt*ot+K%ze*ze+ae[O]+D,D=(ot/De|0)+(K/ze|0)+te*st,ae[O--]=ot%De;ae[O]=D}return D?++T:ae.splice(0,1),pt(C,ae,T)},d.negated=function(){var C=new z(this);return C.s=-C.s||null,C},d.plus=function(C,A){var D,T=this,R=T.s;if(C=new z(C,A),A=C.s,!R||!A)return new z(NaN);if(R!=A)return C.s=-A,T.minus(C);var O=T.e/pe,W=C.e/pe,K=T.c,Y=C.c;if(!O||!W){if(!K||!Y)return new z(R/0);if(!K[0]||!Y[0])return Y[0]?C:new z(K[0]?T:R*0)}if(O=Bi(O),W=Bi(W),K=K.slice(),R=O-W){for(R>0?(W=O,D=Y):(R=-R,D=K),D.reverse();R--;D.push(0));D.reverse()}for(R=K.length,A=Y.length,R-A<0&&(D=Y,Y=K,K=D,A=R),R=0;A;)R=(K[--A]=K[A]+Y[A]+R)/Zi|0,K[A]=Zi===K[A]?0:K[A]%Zi;return R&&(K=[R].concat(K),++W),pt(C,K,W)},d.precision=d.sd=function(C,A){var D,T,R,O=this;if(C!=null&&C!==!!C)return e(C,1,bi),A==null?A=b:e(A,0,8),tt(new z(O),C,A);if(!(D=O.c))return null;if(R=D.length-1,T=R*pe+1,R=D[R]){for(;R%10==0;R/=10,T--);for(R=D[0];R>=10;R/=10,T++);}return C&&O.e+1>T&&(T=O.e+1),T},d.shiftedBy=function(C){return e(C,-9007199254740991,po),this.times("1e"+C)},d.squareRoot=d.sqrt=function(){var C,A,D,T,R,O=this,W=O.c,K=O.s,Y=O.e,ot=_+4,st=new z("0.5");if(K!==1||!W||!W[0])return new z(!K||K<0&&(!W||W[0])?NaN:W?O:1/0);if(K=Math.sqrt(+ct(O)),K==0||K==1/0?(A=Si(W),(A.length+Y)%2==0&&(A+="0"),K=Math.sqrt(+A),Y=Bi((Y+1)/2)-(Y<0||Y%2),K==1/0?A="5e"+Y:(A=K.toExponential(),A=A.slice(0,A.indexOf("e")+1)+Y),D=new z(A)):D=new z(K+""),D.c[0]){for(Y=D.e,K=Y+ot,K<3&&(K=0);;)if(R=D,D=st.times(R.plus(r(O,R,ot,1))),Si(R.c).slice(0,K)===(A=Si(D.c)).slice(0,K))if(D.e<Y&&--K,A=A.slice(K-3,K+1),A=="9999"||!T&&A=="4999"){if(!T&&(tt(R,R.e+_+2,0),R.times(R).eq(O))){D=R;break}ot+=4,K+=4,T=1}else{(!+A||!+A.slice(1)&&A.charAt(0)=="5")&&(tt(D,D.e+_+2,1),C=!D.times(D).eq(O));break}}return tt(D,D.e+_+1,b,C)},d.toExponential=function(C,A){return C!=null&&(e(C,0,bi),C++),Z(this,C,A,1)},d.toFixed=function(C,A){return C!=null&&(e(C,0,bi),C=C+this.e+1),Z(this,C,A)},d.toFormat=function(C,A,D){var T,R=this;if(D==null)C!=null&&A&&typeof A=="object"?(D=A,A=null):C&&typeof C=="object"?(D=C,C=A=null):D=Ht;else if(typeof D!="object")throw Error(mi+"Argument not an object: "+D);if(T=R.toFixed(C,A),R.c){var O,W=T.split("."),K=+D.groupSize,Y=+D.secondaryGroupSize,ot=D.groupSeparator||"",st=W[0],kt=W[1],Xt=R.s<0,te=Xt?st.slice(1):st,ae=te.length;if(Y&&(O=K,K=Y,Y=O,ae-=O),K>0&&ae>0){for(O=ae%K||K,st=te.substr(0,O);O<ae;O+=K)st+=ot+te.substr(O,K);Y>0&&(st+=ot+te.slice(O)),Xt&&(st="-"+st)}T=kt?st+(D.decimalSeparator||"")+((Y=+D.fractionGroupSize)?kt.replace(new RegExp("\\d{"+Y+"}\\B","g"),"$&"+(D.fractionGroupSeparator||"")):kt):st}return(D.prefix||"")+T+(D.suffix||"")},d.toFraction=function(C){var A,D,T,R,O,W,K,Y,ot,st,kt,Xt,te=this,ae=te.c;if(C!=null&&(K=new z(C),!K.isInteger()&&(K.c||K.s!==1)||K.lt(g)))throw Error(mi+"Argument "+(K.isInteger()?"out of range: ":"not an integer: ")+ct(K));if(!ae)return new z(te);for(A=new z(g),ot=D=new z(g),T=Y=new z(g),Xt=Si(ae),O=A.e=Xt.length-te.e-1,A.c[0]=xs[(W=O%pe)<0?pe+W:W],C=!C||K.comparedTo(A)>0?O>0?A:ot:K,W=I,I=1/0,K=new z(Xt),Y.c[0]=0;st=r(K,A,0,1),R=D.plus(st.times(T)),R.comparedTo(C)!=1;)D=T,T=R,ot=Y.plus(st.times(R=ot)),Y=R,A=K.minus(st.times(R=A)),K=R;return R=r(C.minus(D),T,0,1),Y=Y.plus(R.times(ot)),D=D.plus(R.times(T)),Y.s=ot.s=te.s,O=O*2,kt=r(ot,T,O,b).minus(te).abs().comparedTo(r(Y,D,O,b).minus(te).abs())<1?[ot,T]:[Y,D],I=W,kt},d.toNumber=function(){return+ct(this)},d.toPrecision=function(C,A){return C!=null&&e(C,1,bi),Z(this,C,A,2)},d.toString=function(C){var A,D=this,T=D.s,R=D.e;return R===null?T?(A="Infinity",T<0&&(A="-"+A)):A="NaN":(C==null?A=R<=w||R>=B?c(Si(D.c),R):m(Si(D.c),R,"0"):C===10&&ke?(D=tt(new z(D),_+R+1,b),A=m(Si(D.c),D.e,"0")):(e(C,2,Qt.length,"Base"),A=a(m(Si(D.c),R,"0"),10,C,T,!0)),T<0&&D.c[0]&&(A="-"+A)),A},d.valueOf=d.toJSON=function(){return ct(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,i!=null&&z.set(i),z}function Bi(i){var r=i|0;return i>0||i===r?r:r-1}function Si(i){for(var r,a,u=1,d=i.length,g=i[0]+"";u<d;){for(r=i[u++]+"",a=pe-r.length;a--;r="0"+r);g+=r}for(d=g.length;g.charCodeAt(--d)===48;);return g.slice(0,d+1||1)}function Hn(i,r){var a,u,d=i.c,g=r.c,_=i.s,b=r.s,w=i.e,B=r.e;if(!_||!b)return null;if(a=d&&!d[0],u=g&&!g[0],a||u)return a?u?0:-b:_;if(_!=b)return _;if(a=_<0,u=w==B,!d||!g)return u?0:!d^a?1:-1;if(!u)return w>B^a?1:-1;for(b=(w=d.length)<(B=g.length)?w:B,_=0;_<b;_++)if(d[_]!=g[_])return d[_]>g[_]^a?1:-1;return w==B?0:w>B^a?1:-1}function e(i,r,a,u){if(i<r||i>a||i!==hi(i))throw Error(mi+(u||"Argument")+(typeof i=="number"?i<r||i>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function o(i){var r=i.c.length-1;return Bi(i.e/pe)==r&&i.c[r]%2!=0}function c(i,r){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(r<0?"e":"e+")+r}function m(i,r,a){var u,d;if(r<0){for(d=a+".";++r;d+=a);i=d+i}else if(u=i.length,++r>u){for(d=a,r-=u;--r;d+=a);i+=d}else r<u&&(i=i.slice(0,r)+"."+i.slice(r));return i}var x=Aa(),S=x,V=class{constructor(i){ee(this,"key");ee(this,"left",null);ee(this,"right",null);this.key=i}},rt=class extends V{constructor(i){super(i)}},gt=class{constructor(){ee(this,"size",0);ee(this,"modificationCount",0);ee(this,"splayCount",0)}splay(i){let r=this.root;if(r==null)return this.compare(i,i),-1;let a=null,u=null,d=null,g=null,_=r,b=this.compare,w;for(;;)if(w=b(_.key,i),w>0){let B=_.left;if(B==null||(w=b(B.key,i),w>0&&(_.left=B.right,B.right=_,_=B,B=_.left,B==null)))break;a==null?u=_:a.left=_,a=_,_=B}else if(w<0){let B=_.right;if(B==null||(w=b(B.key,i),w<0&&(_.right=B.left,B.left=_,_=B,B=_.right,B==null)))break;d==null?g=_:d.right=_,d=_,_=B}else break;return d!=null&&(d.right=_.left,_.left=g),a!=null&&(a.left=_.right,_.right=u),this.root!==_&&(this.root=_,this.splayCount++),w}splayMin(i){let r=i,a=r.left;for(;a!=null;){let u=a;r.left=u.right,u.right=r,r=u,a=r.left}return r}splayMax(i){let r=i,a=r.right;for(;a!=null;){let u=a;r.right=u.left,u.left=r,r=u,a=r.right}return r}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let r=this.root,a=r,u=r.left;if(this.size--,u==null)this.root=r.right;else{let d=r.right;r=this.splayMax(u),r.right=d,this.root=r}return this.modificationCount++,a}addNewRoot(i,r){this.size++,this.modificationCount++;let a=this.root;if(a==null){this.root=i;return}r<0?(i.left=a,i.right=a.right,a.right=null):(i.right=a,i.left=a.left,a.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,r)=>i<r?-1:i>r?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},Pt=class Eo extends gt{constructor(a,u){super();ee(this,"root",null);ee(this,"compare");ee(this,"validKey");ee(this,Yc,"[object Set]");this.compare=a??this.defaultCompare(),this.validKey=u??(d=>d!=null&&d!=null)}delete(a){return this.validKey(a)?this._delete(a)!=null:!1}deleteAll(a){for(let u of a)this.delete(u)}forEach(a){let u=this[Symbol.iterator](),d;for(;d=u.next(),!d.done;)a(d.value,d.value,this)}add(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new rt(a),u),this}addAndReturn(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new rt(a),u),this.root.key}addAll(a){for(let u of a)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let d=u.right;for(;d!=null;)u=d,d=u.right;return u.key}firstAfter(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let d=u.left;for(;d!=null;)u=d,d=u.left;return u.key}retainAll(a){let u=new Eo(this.compare,this.validKey),d=this.modificationCount;for(let g of a){if(d!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(g)&&this.splay(g)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(a){return!this.validKey(a)||this.splay(a)!=0?null:this.root.key}intersection(a){let u=new Eo(this.compare,this.validKey);for(let d of this)a.has(d)&&u.add(d);return u}difference(a){let u=new Eo(this.compare,this.validKey);for(let d of this)a.has(d)||u.add(d);return u}union(a){let u=this.clone();return u.addAll(a),u}clone(){let a=new Eo(this.compare,this.validKey);return a.size=this.size,a.root=this.copyNode(this.root),a}copyNode(a){if(a==null)return null;function u(g,_){let b,w;do{if(b=g.left,w=g.right,b!=null){let B=new rt(b.key);_.left=B,u(b,B)}if(w!=null){let B=new rt(w.key);_.right=B,g=w,_=B}}while(w!=null)}let d=new rt(a.key);return u(a,d),d}toSet(){return this.clone()}entries(){return new we(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Qc=Symbol.iterator,Yc=Symbol.toStringTag,Qc)](){return new ce(this.wrap())}},qt=class{constructor(i){ee(this,"tree");ee(this,"path",new Array);ee(this,"modificationCount",null);ee(this,"splayCount");this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let a=this.tree.getRoot();for(;a!=null;)this.path.push(a),a=a.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],r=i.right;if(r!=null){for(;r!=null;)this.path.push(r),r=r.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},ce=class extends qt{getValue(i){return i.key}},we=class extends qt{getValue(i){return[i.key,i.key]}},gi=i=>i,ii=i=>{if(i){let r=new Pt(bs(i)),a=new Pt(bs(i)),u=(g,_)=>_.addAndReturn(g),d=g=>({x:u(g.x,r),y:u(g.y,a)});return d({x:new S(0),y:new S(0)}),d}return gi},xi=i=>({set:r=>{He=xi(r)},reset:()=>xi(i),compare:bs(i),snap:ii(i),orient:Or(i)}),He=xi(),sn=(i,r)=>i.ll.x.isLessThanOrEqualTo(r.x)&&r.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(r.y)&&r.y.isLessThanOrEqualTo(i.ur.y),mo=(i,r)=>{if(r.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(r.ll.x)||r.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(r.ll.y))return null;let a=i.ll.x.isLessThan(r.ll.x)?r.ll.x:i.ll.x,u=i.ur.x.isLessThan(r.ur.x)?i.ur.x:r.ur.x,d=i.ll.y.isLessThan(r.ll.y)?r.ll.y:i.ll.y,g=i.ur.y.isLessThan(r.ur.y)?i.ur.y:r.ur.y;return{ll:{x:a,y:d},ur:{x:u,y:g}}},ws=(i,r)=>i.x.times(r.y).minus(i.y.times(r.x)),Ta=(i,r)=>i.x.times(r.x).plus(i.y.times(r.y)),Ir=i=>Ta(i,i).sqrt(),Cu=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return ws(d,u).div(Ir(d)).div(Ir(u))},Da=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return Ta(d,u).div(Ir(d)).div(Ir(u))},Ke=(i,r,a)=>r.y.isZero()?null:{x:i.x.plus(r.x.div(r.y).times(a.minus(i.y))),y:a},Fr=(i,r,a)=>r.x.isZero()?null:{x:a,y:i.y.plus(r.y.div(r.x).times(a.minus(i.x)))},Eu=(i,r,a,u)=>{if(r.x.isZero())return Fr(a,u,i.x);if(u.x.isZero())return Fr(i,r,a.x);if(r.y.isZero())return Ke(a,u,i.y);if(u.y.isZero())return Ke(i,r,a.y);let d=ws(r,u);if(d.isZero())return null;let g={x:a.x.minus(i.x),y:a.y.minus(i.y)},_=ws(g,r).div(d),b=ws(g,u).div(d),w=i.x.plus(b.times(r.x)),B=a.x.plus(_.times(u.x)),j=i.y.plus(b.times(r.y)),I=a.y.plus(_.times(u.y)),at=w.plus(B).div(2),ft=j.plus(I).div(2);return{x:at,y:ft}},on=class Dp{constructor(r,a){ee(this,"point");ee(this,"isLeft");ee(this,"segment");ee(this,"otherSE");ee(this,"consumedBy");r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=a}static compare(r,a){let u=Dp.comparePoints(r.point,a.point);return u!==0?u:(r.point!==a.point&&r.link(a),r.isLeft!==a.isLeft?r.isLeft?1:-1:cr.compare(r.segment,a.segment))}static comparePoints(r,a){return r.x.isLessThan(a.x)?-1:r.x.isGreaterThan(a.x)?1:r.y.isLessThan(a.y)?-1:r.y.isGreaterThan(a.y)?1:0}link(r){if(r.point===this.point)throw new Error("Tried to link already linked events");let a=r.point.events;for(let u=0,d=a.length;u<d;u++){let g=a[u];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){let r=this.point.events.length;for(let a=0;a<r;a++){let u=this.point.events[a];if(u.segment.consumedBy===void 0)for(let d=a+1;d<r;d++){let g=this.point.events[d];g.consumedBy===void 0&&u.otherSE.point.events===g.otherSE.point.events&&u.segment.consume(g.segment)}}}getAvailableLinkedEvents(){let r=[];for(let a=0,u=this.point.events.length;a<u;a++){let d=this.point.events[a];d!==this&&!d.segment.ringOut&&d.segment.isInResult()&&r.push(d)}return r}getLeftmostComparator(r){let a=new Map,u=d=>{let g=d.otherSE;a.set(d,{sine:Cu(this.point,r.point,g.point),cosine:Da(this.point,r.point,g.point)})};return(d,g)=>{a.has(d)||u(d),a.has(g)||u(g);let{sine:_,cosine:b}=a.get(d),{sine:w,cosine:B}=a.get(g);return _.isGreaterThanOrEqualTo(0)&&w.isGreaterThanOrEqualTo(0)?b.isLessThan(B)?1:b.isGreaterThan(B)?-1:0:_.isLessThan(0)&&w.isLessThan(0)?b.isLessThan(B)?-1:b.isGreaterThan(B)?1:0:w.isLessThan(_)?-1:w.isGreaterThan(_)?1:0}}},ku=0,cr=class Qa{constructor(r,a,u,d){ee(this,"id");ee(this,"leftSE");ee(this,"rightSE");ee(this,"rings");ee(this,"windings");ee(this,"ringOut");ee(this,"consumedBy");ee(this,"prev");ee(this,"_prevInResult");ee(this,"_beforeState");ee(this,"_afterState");ee(this,"_isInResult");this.id=++ku,this.leftSE=r,r.segment=this,r.otherSE=a,this.rightSE=a,a.segment=this,a.otherSE=r,this.rings=u,this.windings=d}static compare(r,a){let u=r.leftSE.point.x,d=a.leftSE.point.x,g=r.rightSE.point.x,_=a.rightSE.point.x;if(_.isLessThan(u))return 1;if(g.isLessThan(d))return-1;let b=r.leftSE.point.y,w=a.leftSE.point.y,B=r.rightSE.point.y,j=a.rightSE.point.y;if(u.isLessThan(d)){if(w.isLessThan(b)&&w.isLessThan(B))return 1;if(w.isGreaterThan(b)&&w.isGreaterThan(B))return-1;let I=r.comparePoint(a.leftSE.point);if(I<0)return 1;if(I>0)return-1;let at=a.comparePoint(r.rightSE.point);return at!==0?at:-1}if(u.isGreaterThan(d)){if(b.isLessThan(w)&&b.isLessThan(j))return-1;if(b.isGreaterThan(w)&&b.isGreaterThan(j))return 1;let I=a.comparePoint(r.leftSE.point);if(I!==0)return I;let at=r.comparePoint(a.rightSE.point);return at<0?1:at>0?-1:1}if(b.isLessThan(w))return-1;if(b.isGreaterThan(w))return 1;if(g.isLessThan(_)){let I=a.comparePoint(r.rightSE.point);if(I!==0)return I}if(g.isGreaterThan(_)){let I=r.comparePoint(a.rightSE.point);if(I<0)return 1;if(I>0)return-1}if(!g.eq(_)){let I=B.minus(b),at=g.minus(u),ft=j.minus(w),St=_.minus(d);if(I.isGreaterThan(at)&&ft.isLessThan(St))return 1;if(I.isLessThan(at)&&ft.isGreaterThan(St))return-1}return g.isGreaterThan(_)?1:g.isLessThan(_)||B.isLessThan(j)?-1:B.isGreaterThan(j)?1:r.id<a.id?-1:r.id>a.id?1:0}static fromRing(r,a,u){let d,g,_,b=on.comparePoints(r,a);if(b<0)d=r,g=a,_=1;else if(b>0)d=a,g=r,_=-1;else throw new Error(`Tried to create degenerate segment at [${r.x}, ${r.y}]`);let w=new on(d,!0),B=new on(g,!1);return new Qa(w,B,[u],[_])}replaceRightSE(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let r=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r.isLessThan(a)?r:a},ur:{x:this.rightSE.point.x,y:r.isGreaterThan(a)?r:a}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(r){return r.x.eq(this.leftSE.point.x)&&r.y.eq(this.leftSE.point.y)||r.x.eq(this.rightSE.point.x)&&r.y.eq(this.rightSE.point.y)}comparePoint(r){return He.orient(this.leftSE.point,r,this.rightSE.point)}getIntersection(r){let a=this.bbox(),u=r.bbox(),d=mo(a,u);if(d===null)return null;let g=this.leftSE.point,_=this.rightSE.point,b=r.leftSE.point,w=r.rightSE.point,B=sn(a,b)&&this.comparePoint(b)===0,j=sn(u,g)&&r.comparePoint(g)===0,I=sn(a,w)&&this.comparePoint(w)===0,at=sn(u,_)&&r.comparePoint(_)===0;if(j&&B)return at&&!I?_:!at&&I?w:null;if(j)return I&&g.x.eq(w.x)&&g.y.eq(w.y)?null:g;if(B)return at&&_.x.eq(b.x)&&_.y.eq(b.y)?null:b;if(at&&I)return null;if(at)return _;if(I)return w;let ft=Eu(g,this.vector(),b,r.vector());return ft===null||!sn(d,ft)?null:He.snap(ft)}split(r){let a=[],u=r.events!==void 0,d=new on(r,!0),g=new on(r,!1),_=this.rightSE;this.replaceRightSE(g),a.push(g),a.push(d);let b=new Qa(d,_,this.rings.slice(),this.windings.slice());return on.comparePoints(b.leftSE.point,b.rightSE.point)>0&&b.swapEvents(),on.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(d.checkForConsuming(),g.checkForConsuming()),a}swapEvents(){let r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}consume(r){let a=this,u=r;for(;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;let d=Qa.compare(a,u);if(d!==0){if(d>0){let g=a;a=u,u=g}if(a.prev===u){let g=a;a=u,u=g}for(let g=0,_=u.rings.length;g<_;g++){let b=u.rings[g],w=u.windings[g],B=a.rings.indexOf(b);B===-1?(a.rings.push(b),a.windings.push(w)):a.windings[B]+=w}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};let a=this._afterState.rings,u=this._afterState.windings,d=this._afterState.multiPolys;for(let b=0,w=this.rings.length;b<w;b++){let B=this.rings[b],j=this.windings[b],I=a.indexOf(B);I===-1?(a.push(B),u.push(j)):u[I]+=j}let g=[],_=[];for(let b=0,w=a.length;b<w;b++){if(u[b]===0)continue;let B=a[b],j=B.poly;if(_.indexOf(j)===-1)if(B.isExterior)g.push(j);else{_.indexOf(j)===-1&&_.push(j);let I=g.indexOf(B.poly);I!==-1&&g.splice(I,1)}}for(let b=0,w=g.length;b<w;b++){let B=g[b].multiPoly;d.indexOf(B)===-1&&d.push(B)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let r=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(Ra.type){case"union":{let u=r.length===0,d=a.length===0;this._isInResult=u!==d;break}case"intersection":{let u,d;r.length<a.length?(u=r.length,d=a.length):(u=a.length,d=r.length),this._isInResult=d===Ra.numMultiPolys&&u<d;break}case"xor":{let u=Math.abs(r.length-a.length);this._isInResult=u%2===1;break}case"difference":{let u=d=>d.length===1&&d[0].isSubject;this._isInResult=u(r)!==u(a);break}}return this._isInResult}},go=class{constructor(i,r,a){ee(this,"poly");ee(this,"isExterior");ee(this,"segments");ee(this,"bbox");if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=a,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let u=He.snap({x:new S(i[0][0]),y:new S(i[0][1])});this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let d=u;for(let g=1,_=i.length;g<_;g++){if(typeof i[g][0]!="number"||typeof i[g][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=He.snap({x:new S(i[g][0]),y:new S(i[g][1])});b.x.eq(d.x)&&b.y.eq(d.y)||(this.segments.push(cr.fromRing(d,b,this)),b.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=b.x),b.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=b.y),b.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=b.x),b.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=b.y),d=b)}(!u.x.eq(d.x)||!u.y.eq(d.y))&&this.segments.push(cr.fromRing(d,u,this))}getSweepEvents(){let i=[];for(let r=0,a=this.segments.length;r<a;r++){let u=this.segments[r];i.push(u.leftSE),i.push(u.rightSE)}return i}},Mu=class{constructor(i,r){ee(this,"multiPoly");ee(this,"exteriorRing");ee(this,"interiorRings");ee(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new go(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let a=1,u=i.length;a<u;a++){let d=new go(i[a],this,!1);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.interiorRings.push(d)}this.multiPoly=r}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let r=0,a=this.interiorRings.length;r<a;r++){let u=this.interiorRings[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},Hc=class{constructor(i,r){ee(this,"isSubject");ee(this,"polys");ee(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new S(Number.POSITIVE_INFINITY),y:new S(Number.POSITIVE_INFINITY)},ur:{x:new S(Number.NEGATIVE_INFINITY),y:new S(Number.NEGATIVE_INFINITY)}};for(let a=0,u=i.length;a<u;a++){let d=new Mu(i[a],this);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.polys.push(d)}this.isSubject=r}getSweepEvents(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},Np=class vc{constructor(r){ee(this,"events");ee(this,"poly");ee(this,"_isExteriorRing");ee(this,"_enclosingRing");this.events=r;for(let a=0,u=r.length;a<u;a++)r[a].segment.ringOut=this;this.poly=null}static factory(r){let a=[];for(let u=0,d=r.length;u<d;u++){let g=r[u];if(!g.isInResult()||g.ringOut)continue;let _=null,b=g.leftSE,w=g.rightSE,B=[b],j=b.point,I=[];for(;_=b,b=w,B.push(b),b.point!==j;)for(;;){let at=b.getAvailableLinkedEvents();if(at.length===0){let Ht=B[0].point,Qt=B[B.length-1].point;throw new Error(`Unable to complete output ring starting at [${Ht.x}, ${Ht.y}]. Last matching segment found ends at [${Qt.x}, ${Qt.y}].`)}if(at.length===1){w=at[0].otherSE;break}let ft=null;for(let Ht=0,Qt=I.length;Ht<Qt;Ht++)if(I[Ht].point===b.point){ft=Ht;break}if(ft!==null){let Ht=I.splice(ft)[0],Qt=B.splice(Ht.index);Qt.unshift(Qt[0].otherSE),a.push(new vc(Qt.reverse()));continue}I.push({index:B.length,point:b.point});let St=b.getLeftmostComparator(_);w=at.sort(St)[0].otherSE;break}a.push(new vc(B))}return a}getGeom(){let r=this.events[0].point,a=[r];for(let B=1,j=this.events.length-1;B<j;B++){let I=this.events[B].point,at=this.events[B+1].point;He.orient(I,r,at)!==0&&(a.push(I),r=I)}if(a.length===1)return null;let u=a[0],d=a[1];He.orient(u,r,d)===0&&a.shift(),a.push(a[0]);let g=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:a.length-1,b=this.isExteriorRing()?a.length:-1,w=[];for(let B=_;B!=b;B+=g)w.push([a[B].x.toNumber(),a[B].y.toNumber()]);return w}isExteriorRing(){if(this._isExteriorRing===void 0){let r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var d,g;let r=this.events[0];for(let _=1,b=this.events.length;_<b;_++){let w=this.events[_];on.compare(r,w)>0&&(r=w)}let a=r.segment.prevInResult(),u=a?a.prevInResult():null;for(;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return((d=u.ringOut)==null?void 0:d.enclosingRing())!==a.ringOut?a.ringOut:(g=a.ringOut)==null?void 0:g.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}},Zc=class{constructor(i){ee(this,"exteriorRing");ee(this,"interiorRings");this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let r=[i];for(let a=0,u=this.interiorRings.length;a<u;a++){let d=this.interiorRings[a].getGeom();d!==null&&r.push(d)}return r}},jp=class{constructor(i){ee(this,"rings");ee(this,"polys");this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getGeom();u!==null&&i.push(u)}return i}_composePolys(i){var a;let r=[];for(let u=0,d=i.length;u<d;u++){let g=i[u];if(!g.poly)if(g.isExteriorRing())r.push(new Zc(g));else{let _=g.enclosingRing();_!=null&&_.poly||r.push(new Zc(_)),(a=_==null?void 0:_.poly)==null||a.addInterior(g)}}return r}},Up=class{constructor(i,r=cr.compare){ee(this,"queue");ee(this,"tree");ee(this,"segments");this.queue=i,this.tree=new Pt(r),this.segments=[]}process(i){let r=i.segment,a=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(r),a;i.isLeft&&this.tree.add(r);let u=r,d=r;do u=this.tree.lastBefore(u);while(u!=null&&u.consumedBy!=null);do d=this.tree.firstAfter(d);while(d!=null&&d.consumedBy!=null);if(i.isLeft){let g=null;if(u){let b=u.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(g=b),!u.isAnEndpoint(b))){let w=this._splitSafely(u,b);for(let B=0,j=w.length;B<j;B++)a.push(w[B])}}let _=null;if(d){let b=d.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(_=b),!d.isAnEndpoint(b))){let w=this._splitSafely(d,b);for(let B=0,j=w.length;B<j;B++)a.push(w[B])}}if(g!==null||_!==null){let b=null;g===null?b=_:_===null?b=g:b=on.comparePoints(g,_)<=0?g:_,this.queue.delete(r.rightSE),a.push(r.rightSE);let w=r.split(b);for(let B=0,j=w.length;B<j;B++)a.push(w[B])}a.length>0?(this.tree.delete(r),a.push(i)):(this.segments.push(r),r.prev=u)}else{if(u&&d){let g=u.getIntersection(d);if(g!==null){if(!u.isAnEndpoint(g)){let _=this._splitSafely(u,g);for(let b=0,w=_.length;b<w;b++)a.push(_[b])}if(!d.isAnEndpoint(g)){let _=this._splitSafely(d,g);for(let b=0,w=_.length;b<w;b++)a.push(_[b])}}}this.tree.delete(r)}return a}_splitSafely(i,r){this.tree.delete(i);let a=i.rightSE;this.queue.delete(a);let u=i.split(r);return u.push(a),i.consumedBy===void 0&&this.tree.add(i),u}},$p=class{constructor(){ee(this,"type");ee(this,"numMultiPolys")}run(i,r,a){_o.type=i;let u=[new Hc(r,!0)];for(let w=0,B=a.length;w<B;w++)u.push(new Hc(a[w],!1));if(_o.numMultiPolys=u.length,_o.type==="difference"){let w=u[0],B=1;for(;B<u.length;)mo(u[B].bbox,w.bbox)!==null?B++:u.splice(B,1)}if(_o.type==="intersection")for(let w=0,B=u.length;w<B;w++){let j=u[w];for(let I=w+1,at=u.length;I<at;I++)if(mo(j.bbox,u[I].bbox)===null)return[]}let d=new Pt(on.compare);for(let w=0,B=u.length;w<B;w++){let j=u[w].getSweepEvents();for(let I=0,at=j.length;I<at;I++)d.add(j[I])}let g=new Up(d),_=null;for(d.size!=0&&(_=d.first(),d.delete(_));_;){let w=g.process(_);for(let B=0,j=w.length;B<j;B++){let I=w[B];I.consumedBy===void 0&&d.add(I)}d.size!=0?(_=d.first(),d.delete(_)):_=null}He.reset();let b=Np.factory(g.segments);return new jp(b).getGeom()}},_o=new $p,Ra=_o,Gp=(i,...r)=>Ra.run("intersection",i,r),Vp=(i,...r)=>Ra.run("difference",i,r);He.set;function Oa(i){let r={type:"Feature"};return r.geometry=i,r}function Ia(i){return i.type==="Feature"?i.geometry:i}function qc(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function Hp(i){return Oa({type:"LineString",coordinates:i})}function Zp(i){return Oa({type:"MultiLineString",coordinates:i})}function Kc(i){return Oa({type:"Polygon",coordinates:i})}function Wc(i){return Oa({type:"MultiPolygon",coordinates:i})}function qp(i,r){let a=Ia(i),u=Ia(r),d=Gp(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?Kc(d[0]):Wc(d)}function Kp(i,r){let a=Ia(i),u=Ia(r),d=Vp(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?Kc(d[0]):Wc(d)}function Jc(i){return Array.isArray(i)?1+Jc(i[0]):-1}function Wp(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let r=qc(i),a=Jc(r),u=[];return a>1?r.forEach(d=>{u.push(Hp(d))}):u.push(i),u}function Jp(i){let r=[];return i.eachLayer(a=>{r.push(qc(a.toGeoJSON(15)))}),Zp(r)}oi.Cut=oi.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:u,originalLayer:d})=>{this._fireCut(d,u,d),this._fireCut(this._map,u,d),d.pm._fireEdit()}),this._editedLayers=[];let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},cut(i){let r=this._map._layers,a=i._latlngInfos||[];Object.keys(r).map(u=>r[u]).filter(u=>u.pm).filter(u=>!u._pmTempLayer).filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1).filter(u=>u instanceof L.Polyline).filter(u=>u!==i).filter(u=>u.pm.options.allowCutting).filter(u=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(u)>-1:!0).filter(u=>!this._layerGroup.hasLayer(u)).filter(u=>{try{let d=!!nn(i.toGeoJSON(15),u.toGeoJSON(15)).features.length>0;return d||u instanceof L.Polyline&&!(u instanceof L.Polygon)?d:!!qp(i.toGeoJSON(15),u.toGeoJSON(15))}catch{return u instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(u=>{let d;if(u instanceof L.Polygon){d=L.polygon(u.getLatLngs());let w=d.getLatLngs();a.forEach(B=>{if(B&&B.snapInfo){let{latlng:j}=B,I=this._calcClosestLayer(j,[d]);if(I&&I.segment&&I.distance<this.options.snapDistance){let{segment:at}=I;if(at&&at.length===2){let{indexPath:ft,parentPath:St,newIndex:Ht}=L.PM.Utils._getIndexFromSegment(w,at);(ft.length>1?(0,pn.default)(w,St):w).splice(Ht,0,j)}}}})}else d=u;let g=this._cutLayer(i,d),_=L.geoJSON(g,u.options);_.getLayers().length===1&&([_]=_.getLayers()),this._setPane(_,"layerPane");let b=_.addTo(this._map.pm._getContainingLayer());if(b.pm.enable(u.pm.options),b.pm.disable(),u._pmTempLayer=!0,i._pmTempLayer=!0,u.remove(),u.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),b.getLayers&&b.getLayers().length===0&&this._map.pm.removeLayer({target:b}),b instanceof L.LayerGroup?(b.eachLayer(w=>{this._addDrawnLayerProp(w)}),this._addDrawnLayerProp(b)):this._addDrawnLayerProp(b),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let w=this.options.layersToCut.indexOf(u);w>-1&&this.options.layersToCut.splice(w,1)}this._editedLayers.push({layer:b,originalLayer:u})})},_cutLayer(i,r){let a=L.geoJSON(),u;if(r instanceof L.Polygon)u=Kp(r.toGeoJSON(15),i.toGeoJSON(15));else{let d=Wp(r);d.forEach(g=>{let _=gu(g,i.toGeoJSON(15)),b;_&&_.features.length>0?b=L.geoJSON(_):b=L.geoJSON(g),b.getLayers().forEach(w=>{yu(i.toGeoJSON(15),w.toGeoJSON(15))||w.addTo(a)})}),d.length>1?u=Jp(a):u=a.toGeoJSON(15)}return u},_change:L.Util.falseFn}),oi.Text=oi.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(me("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var i;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(i=this._hintMarker)==null||i.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}},_createMarker(i){var d,g,_,b;if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(d=this.options.textOptions)==null?void 0:d.className){let w=this.options.textOptions.className.split(" ");this.textArea.classList.add(...w)}let a=this._createTextIcon(this.textArea),u=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:a});if(this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm){u.pm.textArea=this.textArea,L.setOptions(u.pm,{removeIfEmpty:((g=this.options.textOptions)==null?void 0:g.removeIfEmpty)??!0});let w=((_=this.options.textOptions)==null?void 0:_.focusAfterDraw)??!0;u.pm._createTextMarker(w),(b=this.options.textOptions)!=null&&b.text&&u.pm.setText(this.options.textOptions.text)}this._fireCreate(u),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var Xp={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,fi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(fi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,fi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(fi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseDown(a),!1},_simulateMouseMoveEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseMove(a),!1},_simulateMouseUpEvent(i){let r={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(r.containerPoint=this._map.mouseEventToContainerPoint(i),r.latlng=this._map.containerPointToLatLng(r.containerPoint)),this._dragMixinOnMouseUp(r),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let r=i._fromLayerSync,a=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!r&&!a?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let u="resizeableCircleMarker";this._layer instanceof L.Circle&&(u="resizeableCircle"),this.options.snappable&&!r&&!a?this._layer.pm.options[u]||this._initSnappableMarkersDrag():this._layer.pm.options[u]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let r=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(r,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:r}=i,a={lat:r.lat-this._tempDragCoord.lat,lng:r.lng-this._tempDragCoord.lng},u=d=>d.map(g=>{if(Array.isArray(g))return u(g);let _={lat:g.lat+a.lat,lng:g.lng+a.lng};return(g.alt||g.alt===0)&&(_.alt=g.alt),_});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let d=u([this._layer.getLatLng()]);this._layer.setLatLng(d[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let d=this._layer.getLatLng();this._layer._snapped&&(d=this._layer._orgLatLng);let g=u([d]);this._layer.setLatLng(g[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let d=u([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(d),this._fireChange(this._layer.getBounds(),"Edit")}else{let d=u(this._layer.getLatLngs());this._layer.setLatLngs(d),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=r,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,r){if(this.enabled())return!1;if(!r._fromLayerSync&&this._layer===r.target&&this.options.syncLayersOnDrag){r._fromLayerSync=!0;let a=[];if(L.Util.isArray(this.options.syncLayersOnDrag))a=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(u=>{u instanceof L.LayerGroup&&(a=a.concat(u.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let u in this._parentLayerGroup){let d=this._parentLayerGroup[u];d.pm&&(a=d.pm.getLayers(!0))}return L.Util.isArray(a)&&a.length>0&&(a=a.filter(u=>!!u.pm).filter(u=>!!u.pm.options.draggable),a.forEach(u=>{u!==this._layer&&u.pm[i]&&(u._snapped=!1,u.pm[i](r))})),a.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},Yp=Xp,Qp=v(xn());function tm(i,r,a,u){return a.unproject(r.transform(a.project(i,u)),u)}function Xc(i,r,a){let u=a.getMaxZoom();if(u===1/0&&(u=a.getZoom()),L.Util.isArray(i)){let d=[];return i.forEach(g=>{d.push(Xc(g,r,a))}),d}return i instanceof L.LatLng?tm(i,r,a,u):null}function Ls(i,r){r instanceof L.Layer&&(r=r.getLatLng());let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.project(r,a)}function Fa(i,r){let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.unproject(r,a)}var em={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ls(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ls(this._map,i.target.getLatLng()),this._initialRotateLatLng=tn(this._layer),this._startAngle=this.getAngle();let r=tn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,r),this._fireRotationStart(this._map,r)},_onRotate(i){let r=Ls(this._map,i.target.getLatLng()),a=this._rotationStartPoint,u=this._rotationOriginPoint,d=Math.atan2(r.y-u.y,r.x-u.x)-Math.atan2(a.y-u.y,a.x-u.x);this._layer.setLatLngs(this._rotateLayer(d,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let g=this;function _(j,I=[],at=-1){if(at>-1&&I.push(at),L.Util.isArray(j[0]))j.forEach((ft,St)=>_(ft,I.slice(),St));else{let ft=I.length>0?(0,Qp.default)(g._markers,I):g._markers[0];j.forEach((St,Ht)=>{ft[Ht].setLatLng(St)})}}_(this._layer.getLatLngs());let b=tn(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(d,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let w=d*180/Math.PI;w=w<0?w+360:w;let B=w+this._startAngle;this._setAngle(B),this._rotationLayer.pm._setAngle(B),this._fireRotation(this._rotationLayer,w,b),this._fireRotation(this._map,w,b),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let r=tn(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=tn(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,r),this._fireRotationEnd(this._map,i,r),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,r,a,u,d){let g=Ls(d,a);return this._matrix=u.clone().rotate(i,g).flip(),Xc(r,this._matrix,d)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),r=i.getCenter();return i.removeFrom(this._layer._map),r},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(rs(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=tn(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let r=this.getAngle(),a=this._layer.getLatLngs(),u=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(u,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(u,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let d=this.getAngle()-r;d=d<0?d+360:d,this._startAngle=r,this._fireRotation(this._layer,d,a,this._layer),this._fireRotation(this._map||this._layer._map,d,a,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let r=i-this.getAngle();this.rotateLayer(r)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},im=em,nm=L.Class.extend({includes:[Yp,ro,im,is],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,r){let a=r.target,u={layer:this._layer,marker:a,event:r},d="";return i==="move"?d="moveVertexValidation":i==="add"?d="addVertexValidation":i==="remove"&&(d="removeVertexValidation"),this.options[d]&&typeof this.options[d]=="function"&&!this.options[d](u)?(i==="move"&&(a._cancelDragEventChain=a.getLatLng()),!1):(a._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),di=nm;di.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(u=>this._initLayer(u));let r=u=>{if(u.layer._pmTempLayer)return;this._layers=this.getLayers();let d=this._layers.filter(g=>!g.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in g.pm._parentLayerGroup));d.forEach(g=>{this._initLayer(g)}),d.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(r,100,this),this),this._layerGroup.on("layerremove",u=>{this._removeLayerFromGroup(u.target)},this);let a=u=>{u.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(a,100,this),this)},enable(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.enable(i,r)):a.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(r=>{r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1&&(i.push(r._leaflet_id),r.pm.disable(i)):r.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(r=>r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1?(i.push(r._leaflet_id),r.pm.enabled(i)):!1:r.pm.enabled())},toggleEdit(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.toggleEdit(i,r)):a.pm.toggleEdit(i)})},_initLayer(i){let r=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[r]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let r=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[r]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var i;return this._map||((i=this._layers.find(r=>!!r._map))==null?void 0:i._map)||null},getLayers(i=!1,r=!0,a=!0,u=[]){let d=[];return i?this._layerGroup.getLayers().forEach(g=>{d.push(g),g instanceof L.LayerGroup&&u.indexOf(g._leaflet_id)===-1&&(u.push(g._leaflet_id),d=d.concat(g.pm.getLayers(!0,!0,!0,u)))}):d=this._layerGroup.getLayers(),a&&(d=d.filter(g=>!(g instanceof L.LayerGroup))),r&&(d=d.filter(g=>!!g.pm),d=d.filter(g=>!g._pmTempLayer),d=d.filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)),d},setOptions(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(a=>{a.pm&&(a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.setOptions(i,r)):a.pm.setOptions(i))})}}),di.Marker=di.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let r=i.target;r.remove(),this._fireRemove(r),this._fireRemove(this._map,r)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var hr=v(xn()),rm={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((r,a,u)=>u.indexOf(r)===a)},_removeFromCache(i){let r=this.markerCache.indexOf(i);r>-1&&this.markerCache.splice(r,1)},renderLimits(i){this.markerCache.forEach(r=>{i.includes(r)?this._markerGroup.addLayer(r):this._markerGroup.removeLayer(r)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let r=[...this._filterClosestMarkers(i)];this.renderLimits(r)},_filterClosestMarkers(i){let r=[...this.markerCache],a=this.options.limitMarkersToCount;return a===-1?r:(r.sort((u,d)=>{let g=u._latlng.distanceTo(i),_=d._latlng.distanceTo(i);return g-_}),r.filter((u,d)=>a>-1?d<a:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},sm=rm;di.Line=di.extend({includes:[sm],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,r=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let a=u=>{if(Array.isArray(u[0]))return u.map(a,this);let d=u.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&u.map((g,_)=>{let b=this.isPolygon()?(_+1)%u.length:_+1;return this._createMiddleMarker(d[_],d[b])}),d};this._markers=a(r),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this.options.rotate?(r.on("dragstart",this._onRotateStart,this),r.on("drag",this._onRotate,this),r.on("dragend",this._onRotateEnd,this)):(r.on("click",this._onVertexClick,this),r.on("dragstart",this._onMarkerDragStart,this),r.on("move",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(r),r},_createMiddleMarker(i,r){if(!i||!r)return!1;let a=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),r.getLatLng()),u=this._createMarker(a),d=L.divIcon({className:"marker-icon marker-icon-middle"});return u.setIcon(d),u.leftM=i,u.rightM=r,i._middleMarkerNext=u,r._middleMarkerPrev=u,u.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),u.on("movestart",this._onMiddleMarkerMoveStart,this),u},_onMiddleMarkerClick(i){let r=i.target;if(!this._vertexValidation("add",i))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMoveStart(i){let r=i.target;if(r.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){r.on("move",this._onMiddleMarkerMovePrevent,this);return}r._dragging=!0,this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMovePrevent(i){let r=i.target;this._vertexValidationDrag(r)},_onMiddleMarkerMoveEnd(i){let r=i.target;if(r.off("move",this._onMiddleMarkerMovePrevent,this),r.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(r))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),setTimeout(()=>{delete r._dragging},100)},_addMarker(i,r,a){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let u=i.getLatLng(),d=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:g,index:_,parentPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),w=g.length>1?(0,hr.default)(d,b):d,B=g.length>1?(0,hr.default)(this._markers,b):this._markers;w.splice(_+1,0,u),B.splice(_+1,0,i),this._layer.setLatLngs(d),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(r,i),this._createMiddleMarker(i,a)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,u),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return os(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let r=this._layer,a,u;if(this.options.allowSelfIntersection?a=!1:(u=os(this._layer.toGeoJSON(15)),a=u.features.length>0),a){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return a;i?this._flashLayer():(r.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(u)}else r.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return a},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,r){i.forEach(a=>{Array.isArray(a)?this._updateDisabledMarkerStyle(a,r):a._icon&&(r&&!this._checkMarkerAllowedToDrag(a)?L.DomUtil.addClass(a._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(a._icon,"vertexmarker-disabled"))})},_removeMarker(i){let r=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=tn(this._layer,this._layer.getLatLngs()));let a=this._layer.getLatLngs(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!u)return;let _=u.length>1?(0,hr.default)(a,g):a,b=u.length>1?(0,hr.default)(this._markers,g):this._markers,w=g[g.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!w&&(_.length<=2||this.isPolygon()&&_.length<=3)){this._flashLayer();return}_.splice(d,1),this._layer.setLatLngs(a),this.isPolygon()&&_.length<=2&&_.splice(0,_.length);let B=!1;if(_.length<=1&&(_.splice(0,_.length),g.length>1&&u.length>1&&(a=Br(a)),this._layer.setLatLngs(a),this._initMarkers(),B=!0),Un(a)||this._layer.remove(),a=Br(a),this._layer.setLatLngs(a),this._markers=Br(this._markers),!B&&(b=u.length>1?(0,hr.default)(this._markers,g):this._markers,r._middleMarkerPrev&&(this._markerGroup.removeLayer(r._middleMarkerPrev),this._removeFromCache(r._middleMarkerPrev)),r._middleMarkerNext&&(this._markerGroup.removeLayer(r._middleMarkerNext),this._removeFromCache(r._middleMarkerNext)),this._markerGroup.removeLayer(r),this._removeFromCache(r),b)){let j,I;if(this.isPolygon()?(j=(d+1)%b.length,I=(d+(b.length-1))%b.length):(I=d-1<0?void 0:d-1,j=d+1>=b.length?void 0:d+1),j!==I){let at=b[I],ft=b[j];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(at,ft)}b.splice(d,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let r=this._layer.getLatLngs(),a=i.getLatLng(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(u.length>1?(0,hr.default)(r,g):r).splice(d,1,a),this._layer.setLatLngs(r)},_getNeighborMarkers(i){let{indexPath:r,index:a,parentPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),d=r.length>1?(0,hr.default)(this._markers,u):this._markers,g=(a+1)%d.length,_=(a+(d.length-1))%d.length,b=d[_],w=d[g];return{prevMarker:b,nextMarker:w}},_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=nn(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=nn(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?_+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&_<=2)},_onMarkerDragStart(i){let r=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,a),this.options.allowSelfIntersection||(this._coordsBeforeEdit=tn(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(r):this._markerAllowedToDrag=null},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r))return;let{indexPath:a,index:u,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!a)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(r);let g=a.length>1?(0,hr.default)(this._markers,d):this._markers,_=(u+1)%g.length,b=(u+(g.length-1))%g.length,w=r.getLatLng(),B=g[b].getLatLng(),j=g[_].getLatLng();if(r._middleMarkerNext){let I=L.PM.Utils.calcMiddleLatLng(this._map,w,j);r._middleMarkerNext.setLatLng(I)}if(r._middleMarkerPrev){let I=L.PM.Utils.calcMiddleLatLng(this._map,w,B);r._middleMarkerPrev.setLatLng(I)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),u=!this.options.allowSelfIntersection&&this.hasSelfIntersection();u&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(u=!1);let d=!this.options.allowSelfIntersection&&u;if(this._fireMarkerDragEnd(i,a,d),d){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,a);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let r=i.target;if(r._dragging)return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireVertexClick(i,a)}}),di.Polygon=di.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=nn(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=nn(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return!(g<=2&&_<=2)}}),di.Rectangle=di.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((a,u)=>{let d=this._cornerMarkers.find(g=>g._index===u);d&&d.setLatLng(a)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,r){let a=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=i,a._index=r,a._pmTempLayer=!0,a.on("click",this._onVertexClick,this),this._markerGroup.addLayer(a),a},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let r=i.target,a=this._cornerMarkers;r._oppositeCornerLatLng=a.find(d=>d._index===(r._index+2)%4).getLatLng(),r._snapped=!1;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,u)},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r)||r._index===void 0)return;this._adjustRectangleForMarkerMove(r);let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;this._cornerMarkers.forEach(u=>{delete u._oppositeCornerLatLng});let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragEnd(i,a),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let r=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(r),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let r=this._layer.getLatLngs()[0];if(r&&r.length!==4&&r.length>0)r.forEach((a,u)=>{this._cornerMarkers[u].setLatLng(a)}),this._cornerMarkers.slice(r.length).forEach(a=>{a.setLatLng(r[0])});else if(!r||!r.length)console.error("The layer has no LatLngs");else{let a=r.findIndex(u=>i.getLatLng().equals(u));a>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(r[(a+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(r[(a+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(r[(a+3)%4])):this._cornerMarkers.forEach(u=>{u.setLatLng(r[u._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(rs(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),di.CircleMarker=di.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let r=this._layer.getLatLng(),a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._centerMarker=this._createCenterMarker(r),this._outerMarker=this._createOuterMarker(u),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,r){let a=this._map.project(i),u=L.point(a.x+r,a.y);return this._map.unproject(u)},_createHintLine(i,r){let a=i.getLatLng(),u=r.getLatLng();this._hintline=L.polyline([a,u],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let r=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(r._icon,"leaflet-pm-draggable"),r.on("move",this._moveCircle,this)):r.dragging.disable(),r},_createOuterMarker(i){let r=this._createMarker(i);return r.on("drag",this._resizeCircle,this),r},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=i,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("click",this._onVertexClick,this),this._helperLayers.addLayer(r),r},_moveCircle(i){if(i.target._cancelDragEventChain)return;let r=this._centerMarker.getLatLng();this._layer.setLatLng(r);let a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._outerMarker._latlng=u,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(i,r);this._outerMarker.setLatLng(a),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,r])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let r=i.target;r instanceof L.Marker&&!this._vertexValidationDrag(r)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let r=i.target;this._vertexValidationDragEnd(r)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let r=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),a=L.circle(this._layer.getLatLng(),this._layer.options);a.setRadius(r);let u=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(a,200,!u).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(a,200,!u),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);return this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?r=ss(this._map,i,r,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(r=ss(this._map,i,r,this._getMaxDistanceInMeter(i))),r},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),di.Circle=di.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,r){return this._map.distance(i,r)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),di.ImageOverlay=di.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),r=i.getNorthWest(),a=i.getNorthEast(),u=i.getSouthEast(),d=i.getSouthWest();return[r,a,u,d]}}),di.Text=di.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,r=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${r}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let r=this._hasFocus;this._hasFocus=i.type==="focus",!r!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let r=this.options.className.split(" ");this.textArea.classList.add(...r)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var Pu=function(i,r,a,u,d,g){this._matrix=[i,r,a,u,d,g]};Pu.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Pu.prototype={transform(i){return this._transform(i.clone())},_transform(i){let r=this._matrix,{x:a,y:u}=i;return i.x=r[0]*a+r[1]*u+r[4],i.y=r[2]*a+r[3]*u+r[5],i},untransform(i){let r=this._matrix;return new L.Point((i.x/r[0]-r[4])/r[0],(i.y/r[2]-r[5])/r[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let r,a;return typeof i=="number"?(r=i,a=i):(r=i.x,a=i.y),this._add(1,0,0,1,r,a)},scale(i,r){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let a,u;return r=r||L.point(0,0),typeof i=="number"?(a=i,u=i):(a=i.x,u=i.y),this._add(a,0,0,u,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},rotate(i,r){let a=Math.cos(i),u=Math.sin(i);return r=r||new L.Point(0,0),this._add(a,u,-u,a,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,r,a,u,d,g){let _=[[],[],[]],b=this._matrix,w=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],B=[[i,a,d],[r,u,g],[0,0,1]],j;i&&i instanceof L.PM.Matrix&&(b=i._matrix,B=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(let I=0;I<3;I+=1)for(let at=0;at<3;at+=1){j=0;for(let ft=0;ft<3;ft+=1)j+=w[I][ft]*B[ft][at];_[I][at]=j}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};var om=Pu,am={calcMiddleLatLng(i,r,a){let u=i.project(r),d=i.project(a);return i.unproject(u._add(d)._divideBy(2))},findLayers(i){let r=[];return i.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&r.push(a)}),r=r.filter(a=>!!a.pm),r=r.filter(a=>!a._pmTempLayer),r=r.filter(a=>!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1),r},circleToPolygon(i,r=60,a=!0){let u=i.getLatLng(),d=i.getRadius(),g=ns(u,d,r,0,a),_=[];for(let b=0;b<g.length;b+=1){let w=[g[b].lat,g[b].lng];_.push(w)}return L.polygon(_,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,r,a,u=!1){i.fire(r,a,u);let{groups:d}=this.getAllParentGroups(i);d.forEach(g=>{g.fire(r,a,u)})},getAllParentGroups(i){let r=[],a=[],u=d=>{for(let g in d._eventParents)if(r.indexOf(g)===-1){r.push(g);let _=d._eventParents[g];a.push(_),u(_)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(u(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:a,groupIds:r},{groupIds:r,groups:a}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ns,getTranslation:me,findDeepCoordIndex(i,r,a=!0){let u,d=_=>(b,w)=>{let B=_.concat(w);if(a){if(b.lat&&b.lat===r.lat&&b.lng===r.lng)return u=B,!0}else if(b.lat&&L.latLng(b).equals(r))return u=B,!0;return Array.isArray(b)&&b.some(d(B))};i.some(d([]));let g={};return u&&(g={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),g},findDeepMarkerIndex(i,r){let a,u=g=>(_,b)=>{let w=g.concat(b);return _._leaflet_id===r._leaflet_id?(a=w,!0):Array.isArray(_)&&_.some(u(w))};i.some(u([]));let d={};return a&&(d={indexPath:a,index:a[a.length-1],parentPath:a.slice(0,a.length-1)}),d},_getIndexFromSegment(i,r){if(r&&r.length===2){let a=this.findDeepCoordIndex(i,r[0]),u=this.findDeepCoordIndex(i,r[1]),d=Math.max(a.index,u.index);return(a.index===0||u.index===0)&&d!==1&&(d+=1),{indexA:a,indexB:u,newIndex:d,indexPath:a.indexPath,parentPath:a.parentPath}}return null},_getRotatedRectangle(i,r,a,u){let d=Ls(u,i),g=Ls(u,r),_=a*Math.PI/180,b=Math.cos(_),w=Math.sin(_),B=(g.x-d.x)*b+(g.y-d.y)*w,j=(g.y-d.y)*b-(g.x-d.x)*w,I=B*b+d.x,at=B*w+d.y,ft=-j*w+d.x,St=j*b+d.y,Ht=Fa(u,d),Qt=Fa(u,{x:I,y:at}),ke=Fa(u,g),z=Fa(u,{x:ft,y:St});return[Ht,Qt,ke,z]},pxRadiusToMeterRadius(i,r,a){let u=r.project(a),d=L.point(u.x+i,u.y);return r.distance(r.unproject(d),a)}},lm=am;L.PM=L.PM||{version:Hs.version,Map:ba,Toolbar:no,Draw:oi,Edit:di,Utils:lm,Matrix:om,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(r);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(a);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(u);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(_);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(b);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(w)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(r=>{this.reInitLayer(r)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let r=this._map.mouseEventToLayerPoint(i),a,u;for(let d=this._drawFirst;d;d=d.next)a=d.layer,a.options.interactive&&a._containsPoint(r)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);u&&(L.DomEvent.fakeStop(i),this._fireEvent([u],i))}}),L.PM.initialize()})();function n1(){const t=ie(null),n=ie(null),s=N=>`${(N*100).toFixed(1)}%`,l=N=>`${((N%360+360)%360).toFixed(1)}°`,h=N=>(N%360+360)%360,p=(N,$,q)=>{const ht=h($);let X=h(q)-ht;return X<=0&&(X+=360),Math.PI*N*X/180},f=(N,$,q)=>{const ht=h($);let X=h(q)-ht;return X<=0&&(X+=360),Math.PI*N*N*X/360},y=N=>{if("getLatLngs"in N){const $=N.getLatLngs(),q=Bp([$[0].map(ht=>[ht.lng,ht.lat])]);return Tp(q)}return 0},v=N=>{if("getLatLngs"in N){const $=N.getLatLngs();if(Array.isArray($)){const q=Zo($.map(ht=>[ht.lng,ht.lat]));return pl(q,{units:"meters"})}}return 0},M=N=>{if("getLatLngs"in N){const $=N.getLatLngs(),q=Zo([...$[0].map(ht=>[ht.lng,ht.lat]),[$[0][0].lng,$[0][0].lat]]);return pl(q,{units:"meters"})}return 0},k=N=>N._mRadius?N._mRadius:0,P=(N,$)=>{const q={type:$,style:N.options};switch($){case"Circle":q.radius=k(N),q.diameter=q.radius*2,q.area=Math.PI*Math.pow(q.radius,2),q.perimeter=2*Math.PI*q.radius,q.center=N.getLatLng();break;case"Semicircle":q.radius=k(N),q.diameter=q.radius*2,q.center=N.getLatLng(),q.startAngle=h(N.options.startAngle||0),q.stopAngle=h(N.options.stopAngle||180),q.arcLength=p(q.radius,q.startAngle,q.stopAngle),q.area=f(q.radius,q.startAngle,q.stopAngle),q.chordLength=2*q.radius*Math.abs(Math.sin((q.stopAngle-q.startAngle)*Math.PI/360));break;case"Rectangle":case"Polygon":q.area=y(N),q.perimeter=M(N);break;case"Line":case"Polyline":if(q.length=v(N),N.elevation){const ht=N.elevation.gain,mt=q.length;q.slope=ht/mt}break}return q},U=N=>{t.value=N,N?n.value=P(N.layer,N.type):n.value=null},H=Ae(()=>{if(!n.value)return null;const N={...n.value};return N.area&&(N.areaFormatted=`${(N.area/1e4).toFixed(2)} ha`),N.length&&(N.lengthFormatted=`${N.length.toFixed(1)} m`),N.arcLength&&(N.arcLengthFormatted=`${N.arcLength.toFixed(1)} m`),N.perimeter&&(N.perimeterFormatted=`${(N.perimeter/1e3).toFixed(2)} km`),N.radius&&(N.radiusFormatted=`${N.radius.toFixed(1)} m`),N.diameter&&(N.diameterFormatted=`${N.diameter.toFixed(1)} m`),N.width&&(N.widthFormatted=`${N.width.toFixed(1)} m`),N.height&&(N.heightFormatted=`${N.height.toFixed(1)} m`),N.chordLength&&(N.chordLengthFormatted=`${N.chordLength.toFixed(1)} m`),N.slope&&(N.slopeFormatted=s(N.slope)),N.startAngle&&(N.startAngleFormatted=l(N.startAngle)),N.stopAngle&&(N.stopAngleFormatted=l(N.stopAngle)),N});return{selectedShape:t,shapeProperties:n,formattedProperties:H,updateSelectedShape:U,calculateProperties:P,normalizeAngle:h,calculateArcLength:p,calculateSectorArea:f}}class tl extends fe.Polygon{constructor(s,l,h=0,p=180,f={}){super([[]],{...f,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});ee(this,"center");ee(this,"radius");ee(this,"startAngle");ee(this,"stopAngle");ee(this,"numPoints");ee(this,"properties");ee(this,"pm");this.center=s,this.radius=l,this.startAngle=this.normalizeAngle(h),this.stopAngle=this.normalizeAngle(p),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...f,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",y=>{var v;this.pm&&(this.pm._layers=[],this.pm._markers=[],(v=this.pm._markerGroup)==null||v.clearLayers())}),this.on("pm:vertexadded",y=>{var v;this.pm&&((v=this.pm._markerGroup)==null||v.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))})}normalizeAngle(s){return(s%360+360)%360}calculateArcPoints(){if(!this._map)return[];const s=[],l=(this.stopAngle-this.startAngle+360)%360;s.push(this.center);for(let h=0;h<=this.numPoints;h++){const f=(this.startAngle+l*h/this.numPoints)*Math.PI/180,y=this.radius*Math.cos(f),M=this.radius*Math.sin(f)/111319.9,k=y/(111319.9*Math.cos(this.center.lat*Math.PI/180)),P=fe.latLng(this.center.lat+M,this.center.lng+k);s.push(P)}return s.push(this.center),s}setRadius(s){return s<=0?this:(this.radius=s,this.properties.radius=s,this.updateGeometry(),this)}setAngles(s,l){return this.startAngle=this.normalizeAngle(s),this.stopAngle=this.normalizeAngle(l),this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(s){return s<0||s>360?this:(this.stopAngle=this.normalizeAngle(this.startAngle+s),this.updateGeometry(),this)}setCenter(s){return!s.lat||!s.lng?this:(this.center=s,this.updateGeometry(),this)}getCenter(){return this.center}getRadius(){return this.radius}getStartAngle(){return this.startAngle}getStopAngle(){return this.stopAngle}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this._map)return;const s=this.calculateArcPoints();s.length>0&&this.setLatLngs([s])}toGeoJSON(){const s=super.toGeoJSON();return{...s,properties:{...s.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle}}}}const wd=(t,n)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${n})`;const s=parseInt(t.slice(1,3),16),l=parseInt(t.slice(3,5),16),h=parseInt(t.slice(5,7),16);return`rgba(${s}, ${l}, ${h}, ${n})`},Ld=(t,n)=>{n&&(n.fontSize&&(t.style.fontSize=n.fontSize),n.color&&(t.style.color=n.color),n.backgroundColor&&(t.style.backgroundColor=wd(n.backgroundColor,n.backgroundOpacity??1)),n.padding&&(t.style.padding=n.padding),n.borderRadius&&(t.style.borderRadius=n.borderRadius),n.hasBorder?t.style.border=`${n.borderWidth||"1px"} solid ${wd(n.borderColor,n.borderOpacity??1)}`:t.style.border="none")},ji=t=>{document.querySelectorAll(".drawing-help-message").forEach(l=>l.remove());const s=fe.DomUtil.create("div","drawing-help-message");return s.innerHTML=t,s.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(s),s};function r1(t,n,s){const l=156543.03392*Math.cos(n*Math.PI/180)/Math.pow(2,s);return t/l}function s1(){const t=ie(null),n=ie(null),s=ie(""),l=ie(null),h=ie(!1),{calculateProperties:p}=n1();let f=[];const y=()=>{f.forEach(J=>{J&&J.remove&&(n.value&&n.value.removeLayer(J),J.remove())}),f=[]},v=(J,et="#2563EB")=>{const nt=fe.circleMarker(J,{radius:6,color:et,fillColor:et,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(nt),nt},M=J=>{if(!t.value||!J.properties||!n.value)return;y();const et=J.getCenter(),nt=J.getRadius(),dt=J.properties.startAngle||0,Tt=J.properties.stopAngle||180,Lt=v(et,"#059669");f.push(Lt),Lt.on("mousedown",lt=>{if(!t.value)return;fe.DomEvent.stopPropagation(lt),t.value.dragging.disable();let Gt=!0;const Et=$t=>{Gt&&(J.setCenter($t.latlng),Lt.setLatLng($t.latlng),M(J))},ne=()=>{Gt=!1,t.value&&(t.value.off("mousemove",Et),document.removeEventListener("mouseup",ne),t.value.dragging.enable())};t.value.on("mousemove",Et),document.addEventListener("mouseup",ne)});const Mt=dt*Math.PI/180,vt=Tt*Math.PI/180,Bt=fe.latLng(et.lat+nt/111319.9*Math.sin(Mt),et.lng+nt/(111319.9*Math.cos(et.lat*Math.PI/180))*Math.cos(Mt)),ut=fe.latLng(et.lat+nt/111319.9*Math.sin(vt),et.lng+nt/(111319.9*Math.cos(et.lat*Math.PI/180))*Math.cos(vt)),Ct=v(Bt,"#2563EB");f.push(Ct),Ct.on("mousedown",lt=>{if(!t.value)return;fe.DomEvent.stopPropagation(lt),t.value.dragging.disable();let Gt=!0;const Et=$t=>{if(!Gt)return;const le=Math.atan2($t.latlng.lat-et.lat,$t.latlng.lng-et.lng)*(180/Math.PI);isNaN(le)||(J.setAngles(le,Tt),Ct.setLatLng($t.latlng),M(J))},ne=()=>{Gt=!1,t.value&&(t.value.off("mousemove",Et),document.removeEventListener("mouseup",ne),t.value.dragging.enable())};t.value.on("mousemove",Et),document.addEventListener("mouseup",ne)});const Vt=v(ut,"#DC2626");f.push(Vt),Vt.on("mousedown",lt=>{if(!t.value)return;fe.DomEvent.stopPropagation(lt),t.value.dragging.disable();let Gt=!0;const Et=$t=>{if(!Gt)return;const le=Math.atan2($t.latlng.lat-et.lat,$t.latlng.lng-et.lng)*(180/Math.PI);isNaN(le)||(J.setAngles(dt,le),Vt.setLatLng($t.latlng),M(J))},ne=()=>{Gt=!1,t.value&&(t.value.off("mousemove",Et),document.removeEventListener("mouseup",ne),t.value.dragging.enable())};t.value.on("mousemove",Et),document.addEventListener("mouseup",ne)});const Jt=(dt+Tt)/2*Math.PI/180,zt=fe.latLng(et.lat+nt/111319.9*Math.sin(Jt),et.lng+nt/(111319.9*Math.cos(et.lat*Math.PI/180))*Math.cos(Jt)),Yt=v(zt,"#2563EB");f.push(Yt),Yt.on("mousedown",lt=>{if(!t.value)return;fe.DomEvent.stopPropagation(lt),t.value.dragging.disable();let Gt=!0;const Et=$t=>{if(!Gt)return;const le=et.distanceTo($t.latlng);le>0&&(J.setRadius(le),Yt.setLatLng($t.latlng),M(J))},ne=()=>{Gt=!1,t.value&&(t.value.off("mousemove",Et),document.removeEventListener("mouseup",ne),t.value.dragging.enable())};t.value.on("mousemove",Et),document.addEventListener("mouseup",ne)})},k=(J,et=2)=>{var Mt;if(!t.value){console.warn("Map is not available for text size update");return}const nt=t.value.getZoom(),dt=J.getLatLng().lat,Tt=r1(et,dt,nt),Lt=(Mt=J.getElement())==null?void 0:Mt.querySelector(".text-annotation");Lt&&(J.properties.style.fontSize=`${Tt}px`,J.properties.physicalWidth=et,J.properties.physicalHeight=et,Ld(Lt,J.properties.style))},P=(J,et,nt)=>{const dt=fe.map(J).setView(et,nt);t.value=dt,fe.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(dt);const Tt=new fe.FeatureGroup;return Tt.addTo(dt),n.value=Tt,dt.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),dt.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:Tt,templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6"},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6"}}),dt.on("pm:drawstart",Lt=>{h.value=!0,Lt.shape==="Circle"&&s.value==="Semicircle"&&(dt.getContainer().style.cursor="crosshair")}),dt.on("pm:drawend",()=>{h.value=!1,dt.getContainer().style.cursor="",l.value&&ji("Cliquez sur la forme pour afficher les points de contrôle")}),dt.on("pm:create",async Lt=>{var vt,Bt,ut;const Mt=Lt.layer;if((vt=n.value)==null||vt.addLayer(Mt),Mt.properties={style:{fillColor:"#3B82F6",fillOpacity:.2,color:"#2563EB",weight:2}},s.value==="Semicircle"&&Mt instanceof fe.Circle){const Ct=Mt.getLatLng(),Vt=Mt.getRadius();(Bt=n.value)==null||Bt.removeLayer(Mt);const Dt=new tl(Ct,Vt);(ut=n.value)==null||ut.addLayer(Dt),l.value=Dt,M(Dt)}else{const Ct=p(Mt,t.value);Mt.properties={...Mt.properties,...Ct},l.value=Mt,Mt instanceof fe.Circle?ht(Mt):Mt instanceof fe.Rectangle?mt(Mt):Mt instanceof fe.Polygon?X(Mt):Mt instanceof fe.Polyline&&!(Mt instanceof fe.Polygon)&&updateLineControlPoints(Mt)}}),dt.on("click",Lt=>{Lt.target===dt&&(y(),l.value=null,document.querySelectorAll(".drawing-help-message").forEach(vt=>vt.remove()))}),Tt.on("click",Lt=>{var vt,Bt,ut;fe.DomEvent.stopPropagation(Lt);const Mt=Lt.layer;y(),(vt=document.querySelector(".drawing-help-message"))==null||vt.remove(),l.value=Mt,Mt instanceof tl||((Bt=Mt.properties)==null?void 0:Bt.type)==="Semicircle"?(Mt.pm&&(Mt.pm._layers=[],Mt.pm._markers=[],(ut=Mt.pm._markerGroup)==null||ut.clearLayers()),M(Mt)):Mt instanceof fe.Circle?ht(Mt):Mt instanceof fe.Rectangle?mt(Mt):Mt instanceof fe.Polygon?X(Mt):Mt instanceof fe.Polyline&&!(Mt instanceof fe.Polygon)&&updateLineControlPoints(Mt)}),dt.on("pm:edit",Lt=>{const Mt=Lt.layer;if(Mt){const vt=p(Mt,t.value);Mt.properties={...Mt.properties,...vt},Mt===l.value&&(l.value=Mt,ji("Utilisez les points de contrôle pour modifier la forme"))}}),dt.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(Lt=>Lt.remove()),ji("Déplacez la forme à l'endroit souhaité")}),dt.on("pm:dragend",()=>{setTimeout(()=>{ji("Cliquez sur la forme pour afficher les points de contrôle")},100)}),dt.on("pm:remove",()=>{var Lt;(Lt=document.querySelector(".drawing-help-message"))==null||Lt.remove()}),dt.on("pm:select",Lt=>{var vt;const Mt=Lt.layer;document.querySelectorAll(".drawing-help-message").forEach(Bt=>Bt.remove()),Mt instanceof tl||((vt=Mt.properties)==null?void 0:vt.type)==="Semicircle"?ji(`Points de contrôle : <span style="color: #059669">●</span> Ajuster le rayon, <span style="color: #2563EB">●</span> et <span style="color: #DC2626">●</span> Modifier l'ouverture du demi-cercle`):ji("Utilisez les points de contrôle pour modifier la forme")}),dt.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(Lt=>Lt.remove())}),dt},U=()=>{if(!t.value||!n.value)return;const J=n.value.getBounds();J.isValid()&&t.value.fitBounds(J,{padding:[50,50],maxZoom:19})},H=J=>{if(t.value){if(document.querySelectorAll(".drawing-help-message").forEach(et=>et.remove()),t.value.pm.disableDraw(),t.value.pm.disableGlobalEditMode(),t.value.pm.disableGlobalDragMode(),t.value.pm.disableGlobalRemovalMode(),s.value=J,!J){y();return}setTimeout(()=>{var et,nt,dt,Tt,Lt,Mt,vt;switch(J){case"Circle":ji("Cliquez et maintenez pour dessiner un cercle, relâchez pour terminer"),(et=t.value)==null||et.pm.enableDraw("Circle",{finishOn:"mouseup"});break;case"Semicircle":ji("Cliquez et maintenez pour dessiner un demi-cercle, relâchez pour terminer"),(nt=t.value)==null||nt.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1,markerStyle:{draggable:!0}});break;case"Rectangle":ji("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(dt=t.value)==null||dt.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ji("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Tt=t.value)==null||Tt.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ji("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Lt=t.value)==null||Lt.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"drag":ji("Cliquez et maintenez une forme pour la déplacer"),(Mt=t.value)==null||Mt.pm.enableGlobalDragMode();break;case"delete":ji("Cliquez sur une forme pour la supprimer"),(vt=t.value)==null||vt.pm.enableGlobalRemovalMode();break}},100)}},N=J=>{var nt;if(!l.value)return;const et=l.value;if(et.properties=et.properties||{},et.properties.style=et.properties.style||{},et.properties.style={...et.properties.style,...J},et.properties.type==="text"){const dt=et.properties._textLayer,Tt=(nt=dt==null?void 0:dt.getElement())==null?void 0:nt.querySelector(".text-annotation");Tt&&Ld(Tt,et.properties.style);const Lt={color:J.borderColor||et.properties.style.borderColor,weight:parseInt(J.borderWidth||et.properties.style.borderWidth),opacity:J.borderOpacity??et.properties.style.borderOpacity};"setStyle"in et&&et.setStyle(Lt)}else{const dt={};J.fillColor&&(dt.fillColor=J.fillColor),J.fillOpacity!==void 0&&(dt.fillOpacity=J.fillOpacity),J.strokeColor&&(dt.color=J.strokeColor),J.strokeOpacity!==void 0&&(dt.opacity=J.strokeOpacity),J.strokeWidth!==void 0&&(dt.weight=J.strokeWidth),J.dashArray&&(dt.dashArray=J.dashArray),"setStyle"in et&&et.setStyle(dt)}},$=J=>{if(!l.value)return;const et=l.value;et.properties={...et.properties,...J},J.radius&&et instanceof fe.Circle&&et.setRadius(J.radius)},q=(J,et)=>fe.latLng((J.lat+et.lat)/2,(J.lng+et.lng)/2),ht=J=>{if(!t.value||!n.value)return;y();const et=J.getLatLng(),nt=J.getRadius(),dt=v(et,"#059669");f.push(dt),dt.on("mousedown",Tt=>{if(!t.value)return;fe.DomEvent.stopPropagation(Tt),t.value.dragging.disable(),y(),f=[dt];let Lt=!0;const Mt=Bt=>{Lt&&(J.setLatLng(Bt.latlng),dt.setLatLng(Bt.latlng))},vt=()=>{Lt=!1,t.value&&(t.value.off("mousemove",Mt),document.removeEventListener("mouseup",vt),t.value.dragging.enable(),ht(J))};t.value.on("mousemove",Mt),document.addEventListener("mouseup",vt)}),[0,45,90,135,180,225,270,315].forEach(Tt=>{const Lt=Tt*Math.PI/180,Mt=fe.latLng(et.lat+nt/111319.9*Math.sin(Lt),et.lng+nt/(111319.9*Math.cos(et.lat*Math.PI/180))*Math.cos(Lt)),vt=v(Mt,"#2563EB");f.push(vt),vt.on("mousedown",Bt=>{if(!t.value)return;fe.DomEvent.stopPropagation(Bt),t.value.dragging.disable(),y(),f=[vt];let ut=!0;const Ct=Dt=>{if(!ut)return;const Jt=et.distanceTo(Dt.latlng);J.setRadius(Jt),vt.setLatLng(Dt.latlng)},Vt=()=>{ut=!1,t.value&&(t.value.off("mousemove",Ct),document.removeEventListener("mouseup",Vt),t.value.dragging.enable(),ht(J))};t.value.on("mousemove",Ct),document.addEventListener("mouseup",Vt)})})},mt=J=>{if(!t.value||!n.value)return;y();const et=J.getBounds(),nt=[et.getNorthWest(),et.getNorthEast(),et.getSouthEast(),et.getSouthWest()];nt.forEach((Tt,Lt)=>{const Mt=v(Tt,"#059669");f.push(Mt),Mt.on("mousedown",vt=>{if(!t.value)return;fe.DomEvent.stopPropagation(vt),t.value.dragging.disable();let Bt=!0;const ut=Vt=>{if(!Bt)return;nt[Lt]=Vt.latlng;const Dt=fe.latLngBounds([[Math.min(nt[0].lat,nt[2].lat),Math.min(nt[0].lng,nt[2].lng)],[Math.max(nt[0].lat,nt[2].lat),Math.max(nt[0].lng,nt[2].lng)]]);J.setBounds(Dt),Mt.setLatLng(Vt.latlng),dt()},Ct=()=>{Bt=!1,t.value&&(t.value.off("mousemove",ut),document.removeEventListener("mouseup",Ct),t.value.dragging.enable(),mt(J))};t.value.on("mousemove",ut),document.addEventListener("mouseup",Ct)})});const dt=()=>{const Tt=J.getBounds(),Lt=[Tt.getNorthWest(),Tt.getNorthEast(),Tt.getSouthEast(),Tt.getSouthWest()];f.slice(4).forEach(vt=>{n.value&&n.value.removeLayer(vt)}),f=f.slice(0,4),[[Lt[0],Lt[1]],[Lt[1],Lt[2]],[Lt[2],Lt[3]],[Lt[3],Lt[0]]].forEach((vt,Bt)=>{const ut=q(vt[0],vt[1]),Ct=v(ut,"#2563EB");f.push(Ct),Ct.on("mousedown",Vt=>{if(!t.value)return;fe.DomEvent.stopPropagation(Vt),t.value.dragging.disable();let Dt=!0;const Jt=Yt=>{if(!Dt)return;const lt=Bt===1||Bt===3,Gt=J.getBounds(),Et=[Gt.getNorthWest(),Gt.getNorthEast(),Gt.getSouthEast(),Gt.getSouthWest()];if(lt){const $t=Yt.latlng.lng;Bt===1?(Et[1].lng=$t,Et[2].lng=$t):(Et[0].lng=$t,Et[3].lng=$t)}else{const $t=Yt.latlng.lat;Bt===0?(Et[0].lat=$t,Et[1].lat=$t):(Et[2].lat=$t,Et[3].lat=$t)}const ne=fe.latLngBounds([[Math.min(Et[0].lat,Et[2].lat),Math.min(Et[0].lng,Et[2].lng)],[Math.max(Et[0].lat,Et[2].lat),Math.max(Et[0].lng,Et[2].lng)]]);J.setBounds(ne),Ct.setLatLng(Yt.latlng),dt()},zt=()=>{Dt=!1,t.value&&(t.value.off("mousemove",Jt),document.removeEventListener("mouseup",zt),t.value.dragging.enable(),mt(J))};t.value.on("mousemove",Jt),document.addEventListener("mouseup",zt)})})};dt()},X=J=>{if(!t.value||!n.value)return;y(),ji('Points de contrôle : <span style="color: #059669">●</span> Sommets, <span style="color: #2563EB">●</span> Milieux des côtés');const et=J.getLatLngs()[0];et.forEach((dt,Tt)=>{const Lt=v(dt,"#059669");f.push(Lt),Lt.on("mousedown",Mt=>{if(fe.DomEvent.stopPropagation(Mt),!t.value)return;t.value.dragging.disable();let vt=!0;const Bt=Ct=>{vt&&(fe.DomEvent.stopPropagation(Ct),et[Tt]=Ct.latlng,J.setLatLngs([et]),Lt.setLatLng(Ct.latlng),nt())},ut=()=>{vt=!1,t.value&&(t.value.off("mousemove",Bt),document.removeEventListener("mouseup",ut),t.value.dragging.enable())};t.value.on("mousemove",Bt),document.addEventListener("mouseup",ut)})});const nt=()=>{const dt=J.getLatLngs()[0];f.slice(dt.length).forEach(Tt=>{n.value&&n.value.removeLayer(Tt)}),f=f.slice(0,dt.length);for(let Tt=0;Tt<dt.length;Tt++){const Lt=q(dt[Tt],dt[(Tt+1)%dt.length]),Mt=v(Lt,"#2563EB");f.push(Mt)}};nt()};return Cl(()=>{t.value&&(t.value.remove(),t.value=null)}),{map:t,featureGroup:n,currentTool:s,selectedShape:l,isDrawing:h,initMap:P,setDrawingTool:H,updateShapeStyle:N,updateShapeProperties:$,updateTextFixedSize:k,adjustView:U}}function o1(){const t=ie(null),n=ie("");return Ui.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}),Ui.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri"}),Ui.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"© OpenTopoMap contributors"}),{map:t,searchQuery:n,initMap:h=>{t.value=h},searchLocation:async()=>{if(!(!t.value||!n.value))try{const p=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.value)}`)).json();if(p&&p.length>0){const{lat:f,lon:y}=p[0];t.value.setView([f,y],13)}}catch(h){console.error("Erreur lors de la recherche de localisation:",h)}}}}const Gc=Fc("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>n=>t.plans.find(s=>s.id===n),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,s;const t=Ji();this.loading=!0;try{let l="/plans/";t.isDealer?l+="?concessionnaire="+((n=t.user)==null?void 0:n.id):t.isClient&&(l+="?utilisateur="+((s=t.user)==null?void 0:s.id));const h=await Ee.get(l);this.plans=h.data}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async fetchPlansWithDetails(){var n,s;const t=Ji();this.loading=!0;try{let l="/plans/";const h={include_details:!0};t.isDealer?h.concessionnaire=(n=t.user)==null?void 0:n.id:t.isClient&&(h.utilisateur=(s=t.user)==null?void 0:s.id);const p=await Ee.get(l,{params:h});return this.plans=p.data,p}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async createPlan(t){this.loading=!0;try{const n=await Ee.post("/plans/",t);return this.plans.push(n.data),n.data}catch(n){throw this.error="Erreur lors de la création du plan",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var n,s;if(this.unsavedChanges){this.loading=!0;try{const l=await Ee.patch(`/plans/${t}/`,{...this.currentPlan,version:((n=this.currentPlan)==null?void 0:n.version)||1}),h=this.plans.findIndex(p=>p.id===t);return h!==-1&&(this.plans[h]=l.data),((s=this.currentPlan)==null?void 0:s.id)===t&&(this.currentPlan=l.data),this.unsavedChanges=!1,l.data}catch(l){throw this.error="Erreur lors de la sauvegarde du plan",l}finally{this.loading=!1}}},async fetchPlanHistory(t){this.loading=!0;try{const n=await Ee.get(`/plans/${t}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la récupération de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(t,n){var s;this.loading=!0;try{const l=await Ee.post(`/plans/${t}/restaurer/`,{version_id:n});((s=this.currentPlan)==null?void 0:s.id)===t&&(this.currentPlan=l.data);const h=this.plans.findIndex(p=>p.id===t);return h!==-1&&(this.plans[h]=l.data),l.data}catch(l){throw this.error="Erreur lors de la restauration de la version",l}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;try{await Ee.delete(`/plans/${t}/`),this.plans=this.plans.filter(s=>s.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan()}catch(s){throw this.error="Erreur lors de la suppression du plan",s}finally{this.loading=!1}}}}),Rp=Fc("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType},actions:{setCurrentPlan(t){this.currentPlanId=t,t===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(t){!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t),this.unsavedChanges=!0},updateElement(t){const n=this.elements.findIndex(s=>s.id===t.id);if(n!==-1){const s=this.elements[n].type_forme;this.elements[n]={...t,type_forme:s},this.unsavedChanges=!0}},removeElement(t){const n=this.elements.findIndex(s=>s.id===t);n!==-1&&(this.elements.splice(n,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){this.currentStyle={...this.currentStyle,...t}},async loadPlanElements(t){var n;this.loading=!0;try{const l=(await Ee.get(`/plans/${t}/`)).data;this.elements=l.formes.map(h=>({...h,type_forme:h.type_forme})),this.currentPlanId=t,this.unsavedChanges=!1,l.preferences&&(l.preferences.currentTool&&this.setCurrentTool(l.preferences.currentTool),l.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...l.preferences.currentStyle}),l.preferences.lastUsedType&&(this.lastUsedType=l.preferences.lastUsedType)),(n=this.selectedElement)!=null&&n.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(s){throw console.error("Erreur lors du chargement des éléments:",s),this.error="Erreur lors du chargement des éléments du plan",s}finally{this.loading=!1}},async saveToPlan(t){Gc(),this.loading=!0;try{const n=t||this.currentPlanId;if(!n)throw new Error("Aucun plan sélectionné pour la sauvegarde");const s=this.elements.map(h=>({...h,type_forme:h.type_forme||this.lastUsedType})),l=await Ee.post(`/plans/${n}/save_with_elements/`,{formes:s,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=l.data.formes.map(h=>({...h,type_forme:h.type_forme})),this.unsavedChanges=!1,l.data}catch(n){throw console.error("Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),a1={class:"h-full flex overflow-hidden"},l1={class:"flex-1 relative overflow-hidden"},u1={class:"absolute bottom-6 left-6 z-[1000]"},c1={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},h1={class:"flex items-center justify-between mb-2"},d1={key:0,class:"text-sm text-gray-500"},f1={class:"grid grid-cols-1 gap-2"},p1=["disabled"],m1={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},g1={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_1={key:0,class:"text-xs text-gray-500 mt-2"},y1={key:0,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},v1={class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},b1={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},x1={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},w1={class:"flex justify-between items-center mb-4"},L1={class:"flex justify-end space-x-3"},C1={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},E1={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4"},k1={class:"flex justify-between items-center mb-4"},M1={class:"max-h-96 overflow-y-auto"},P1={key:0,class:"text-center py-8"},B1={key:1,class:"space-y-2"},S1=["onClick"],A1={class:"font-medium text-gray-900"},T1={class:"text-sm text-gray-500"},D1={class:"text-xs text-gray-400 mt-1"},Cd=Xi({__name:"MapView",setup(t){const n=ie(null),s=Gc(),l=Rp(),h=ie([]),p=ie(null),f=ie({});ie({mousedown:null,mousemove:null,mouseup:null});const{currentTool:y,selectedShape:v,map:M,initMap:k,setDrawingTool:P,updateShapeStyle:U,updateShapeProperties:H,featureGroup:N,adjustView:$,isEditMode:q,toggleEditMode:ht}=s1(),{initMap:mt}=o1();zs();const X=ie(!1),J=ie(!1),et=ie(null),nt=ie({nom:"",description:""}),dt=ie(!1),Tt=ie(!1);function Lt(Yt){const lt=Yt.getCenter(),Gt=Yt.getZoom(),Et={lat:lt.lat,lng:lt.lng,zoom:Gt};document.cookie=`mapState=${JSON.stringify(Et)};max-age=2592000;path=/`}function Mt(){const lt=document.cookie.split(";").find(Gt=>Gt.trim().startsWith("mapState="));if(lt)try{return JSON.parse(lt.split("=")[1])}catch(Gt){return console.error("Erreur lors de la lecture du cookie de position:",Gt),null}return null}Lr(async()=>{if(n.value){const Yt=Mt(),lt=Yt?[Yt.lat,Yt.lng]:[46.603354,1.888334],Gt=(Yt==null?void 0:Yt.zoom)??6,Et=k(n.value,lt,Gt);Et.pm.setLang("fr"),Et.pm.addControls({rotateMode:!1}),Ui.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(Et),Et&&(mt(Et),Et.on("moveend",()=>{Lt(Et)}),window.addEventListener("map-set-location",ne=>{if(Et&&ne.detail){const{lat:$t,lng:le,zoom:re}=ne.detail;Et.flyTo([$t,le],re,{duration:1.5,easeLinearity:.25})}}),await s.fetchPlans(),s.currentPlan&&(await l.loadPlanElements(s.currentPlan.id),await Ct(s.currentPlan.id)))}}),gn(()=>l.hasUnsavedChanges,Yt=>{Yt&&et.value&&s.markUnsavedChanges()}),gn(M,async Yt=>{Yt&&s.currentPlan&&(ut(),await l.loadPlanElements(s.currentPlan.id),await Ct(s.currentPlan.id))}),gn(()=>s.currentPlan,async Yt=>{Yt?(et.value=Yt,M.value&&(ut(),await l.loadPlanElements(Yt.id),await Ct(Yt.id))):(et.value=null,ut())},{immediate:!0}),lf(()=>{M.value&&M.value.off("moveend")}),ie({rectangle:0,circle:0,semicircle:0,line:0}),gn(()=>f.value,Yt=>{vt()},{deep:!0});function vt(){console.log("Updating drawing style:",f.value)}async function Bt(){try{const Yt=await s.createPlan(nt.value);et.value=Yt,s.setCurrentPlan(Yt),l.setCurrentPlan(Yt.id),X.value=!1,nt.value={nom:"",description:""}}catch(Yt){console.error("Erreur lors de la création du plan:",Yt)}}function ut(){N.value&&N.value.clearLayers(),h.value=[],v.value=null,p.value=null}async function Ct(Yt){try{ut(),await l.loadPlanElements(Yt);const lt=s.getPlanById(Yt);lt&&(et.value=lt,s.setCurrentPlan(lt),l.setCurrentPlan(lt.id),l.getCurrentElements.forEach(Gt=>{if(!N.value||!Gt.data)return;let Et;const{style:ne={},...$t}=Gt.data;switch(Gt.type_forme){case"CERCLE":Et=Ui.circle([$t.center[1],$t.center[0]],{...ne,radius:$t.radius});break;case"RECTANGLE":Et=Ui.rectangle([[$t.bounds.southWest[1],$t.bounds.southWest[0]],[$t.bounds.northEast[1],$t.bounds.northEast[0]]],ne);break;case"DEMI_CERCLE":Et=new tl([$t.center[1],$t.center[0]],$t.radius,$t.startAngle,$t.endAngle,ne);break;case"LIGNE":Et=Ui.polyline($t.points.map(re=>[re[1],re[0]]),ne);break;case"TEXTE":const le=Ui.divIcon({html:`<div class="text-annotation" style="font-size: ${ne.fontSize||"14px"}">${$t.content}</div>`,className:"text-container"});Et=Ui.marker([$t.position[1],$t.position[0]],{icon:le,...ne});break}Et&&(Et.properties={type:Gt.type_forme,style:ne,...$t},N.value.addLayer(Et),h.value.push({id:Gt.id,type:Gt.type_forme,layer:Et,properties:Et.properties}),$t.rotation&&typeof Et.setRotation=="function"&&Et.setRotation($t.rotation))})),J.value=!1}catch(lt){console.error("Erreur lors du chargement du plan:",lt)}}async function Vt(){if(!et.value||!N.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}dt.value=!0;try{const Yt=[];N.value.eachLayer(lt=>{var $t,le,re,bt,Ut,Nt,Wt,Le;const Gt={style:{color:(($t=lt.options)==null?void 0:$t.color)||"#3388ff",fillColor:((le=lt.options)==null?void 0:le.fillColor)||"#3388ff",fillOpacity:((re=lt.options)==null?void 0:re.fillOpacity)||.2,weight:((bt=lt.options)==null?void 0:bt.weight)||3,opacity:((Ut=lt.options)==null?void 0:Ut.opacity)||1}};let Et,ne;if(lt instanceof Ui.Circle)Et="CERCLE",ne={...Gt,center:[lt.getLatLng().lng,lt.getLatLng().lat],radius:lt.getRadius()};else if(lt instanceof Ui.Rectangle){Et="RECTANGLE";const F=lt.getBounds();ne={...Gt,bounds:{southWest:[F.getSouthWest().lng,F.getSouthWest().lat],northEast:[F.getNorthEast().lng,F.getNorthEast().lat]}}}else((Nt=lt.properties)==null?void 0:Nt.type)==="Semicircle"?(Et="DEMI_CERCLE",ne={...Gt,center:[lt.getLatLng().lng,lt.getLatLng().lat],radius:lt.getRadius(),startAngle:lt.properties.style.startAngle||0,endAngle:lt.properties.style.stopAngle||180}):lt instanceof Ui.Polyline&&!(lt instanceof Ui.Polygon)?(Et="LIGNE",ne={...Gt,points:lt.getLatLngs().map(F=>[F.lng,F.lat])}):((Wt=lt.properties)==null?void 0:Wt.type)==="text"&&(Et="TEXTE",ne={...Gt,position:[lt.getLatLng().lng,lt.getLatLng().lat],content:lt.properties.text,style:{...lt.properties.style,fontSize:lt.properties.style.fontSize}});Et&&ne&&Yt.push({id:lt.id,type_forme:Et,data:{...ne,rotation:((Le=lt.properties)==null?void 0:Le.rotation)||0}})}),l.elements=Yt,await l.saveToPlan(et.value.id),Tt.value=!0,setTimeout(()=>{Tt.value=!1},3e3)}catch(Yt){console.error("Erreur lors de la sauvegarde du plan:",Yt)}finally{dt.value=!1}}Cl(()=>{s.clearCurrentPlan(),l.clearCurrentPlan()});function Dt(Yt){H(Yt)}function Jt(Yt){try{const lt=new Date(Yt);return isNaN(lt.getTime())?(console.error("Date invalide reçue:",Yt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(lt)}catch(lt){return console.error("Erreur lors du formatage de la date:",lt),"Date invalide"}}const zt=()=>{$()};return(Yt,lt)=>{var Gt;return It(),jt("div",a1,[E("div",l1,[E("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0 w-full h-full"},null,512),E("div",u1,[E("div",c1,[E("div",h1,[lt[7]||(lt[7]=E("span",{class:"text-sm font-medium text-gray-600"},"Plans",-1)),et.value?(It(),jt("span",d1,Kt(et.value.nom),1)):ge("",!0)]),E("div",f1,[E("button",{onClick:lt[0]||(lt[0]=Et=>X.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},lt[8]||(lt[8]=[E("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),li(" Nouveau plan ")])),E("button",{onClick:lt[1]||(lt[1]=Et=>J.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},lt[9]||(lt[9]=[E("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),li(" Charger un plan ")])),et.value?(It(),jt("button",{key:0,onClick:Vt,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:dt.value},[dt.value?(It(),jt("svg",g1,lt[11]||(lt[11]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(It(),jt("svg",m1,lt[10]||(lt[10]=[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),li(" "+Kt(dt.value?"Sauvegarde...":"Enregistrer"),1)],8,p1)):ge("",!0),E("button",{onClick:zt,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},lt[12]||(lt[12]=[E("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),li(" Ajuster la vue ")]))]),(Gt=et.value)!=null&&Gt.date_modification?(It(),jt("div",_1," Dernière sauvegarde : "+Kt(Jt(et.value.date_modification)),1)):ge("",!0)])]),Tt.value?(It(),jt("div",y1,lt[13]||(lt[13]=[E("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),E("span",{class:"font-medium"},"Plan sauvegardé avec succès",-1)]))):ge("",!0),E("div",v1,[ai(i1,{"current-tool":Ue(y),"selected-shape":Ue(v),"is-edit-mode":Ue(q),onToolChange:Ue(P),onStyleUpdate:Ue(U),onPropertiesUpdate:Dt,onToggleEditMode:Ue(ht)},null,8,["current-tool","selected-shape","is-edit-mode","onToolChange","onStyleUpdate","onToggleEditMode"])]),X.value?(It(),jt("div",b1,[E("div",x1,[E("div",w1,[lt[15]||(lt[15]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),E("button",{onClick:lt[2]||(lt[2]=Et=>X.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},lt[14]||(lt[14]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("form",{onSubmit:Xo(Bt,["prevent"]),class:"space-y-4"},[E("div",null,[lt[16]||(lt[16]=E("label",{for:"nom",class:"block text-sm font-medium text-gray-700"},"Nom du plan",-1)),Ie(E("input",{type:"text",id:"nom","onUpdate:modelValue":lt[3]||(lt[3]=Et=>nt.value.nom=Et),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:"",placeholder:"Entrez le nom du plan"},null,512),[[We,nt.value.nom]])]),E("div",null,[lt[17]||(lt[17]=E("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),Ie(E("textarea",{id:"description","onUpdate:modelValue":lt[4]||(lt[4]=Et=>nt.value.description=Et),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Décrivez votre plan"},null,512),[[We,nt.value.description]])]),E("div",L1,[E("button",{type:"button",onClick:lt[5]||(lt[5]=Et=>X.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Annuler "),lt[18]||(lt[18]=E("button",{type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700"}," Créer ",-1))])],32)])])):ge("",!0),J.value?(It(),jt("div",C1,[E("div",E1,[E("div",k1,[lt[20]||(lt[20]=E("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),E("button",{onClick:lt[6]||(lt[6]=Et=>J.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},lt[19]||(lt[19]=[E("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),E("div",M1,[Ue(s).plans.length===0?(It(),jt("div",P1,lt[21]||(lt[21]=[E("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(It(),jt("div",B1,[(It(!0),jt(Ze,null,Oi(Ue(s).plans,Et=>(It(),jt("button",{key:Et.id,onClick:ne=>Ct(Et.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[E("div",A1,Kt(Et.nom),1),E("div",T1,Kt(Et.description),1),E("div",D1," Modifié le "+Kt(new Date(Et.date_modification).toLocaleDateString()),1)],8,S1))),128))]))])])])):ge("",!0)])])}}}),R1={class:"fixed inset-0 z-50 overflow-y-auto"},O1={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},I1={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},F1={class:"mt-3 text-center sm:mt-0 sm:text-left"},z1={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},N1={class:"mt-4"},j1={class:"grid grid-cols-2 gap-4"},U1=["disabled"],$1={key:0,class:"mt-1 text-sm text-gray-500"},G1={class:"grid grid-cols-2 gap-4"},V1={key:0},H1=["disabled"],Z1=["value"],q1={key:1},K1=["disabled"],W1=["value"],J1={key:0},X1={class:"grid grid-cols-2 gap-4"},Y1={key:1,class:"rounded-md bg-red-50 p-4"},Q1={class:"flex"},tx={class:"ml-3"},ex={class:"text-sm font-medium text-red-800"},ix={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},nx=["disabled"],rx={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Op=Xi({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(t,{emit:n}){var N,$,q,ht,mt,X,J;const s=t,l=n,h=Ji(),p=ie(!1),f=ie(null),y=Ae(()=>{var et;return s.isAdmin?s.user?s.user.id!==((et=h.user)==null?void 0:et.id):!0:!1}),v=Ae(()=>s.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),M=Ae(()=>s.isAdmin?P.role==="UTILISATEUR":!0),k=Ae(()=>s.dealers.filter(et=>et.role==="CONCESSIONNAIRE")),P=Qn({first_name:((N=s.user)==null?void 0:N.first_name)||"",last_name:(($=s.user)==null?void 0:$.last_name)||"",email:((q=s.user)==null?void 0:q.email)||"",username:((ht=s.user)==null?void 0:ht.username)||"",company_name:((mt=s.user)==null?void 0:mt.company_name)||"",role:((X=s.user)==null?void 0:X.role)||(s.isAdmin?"":"UTILISATEUR"),dealer:((J=s.user)==null?void 0:J.concessionnaire)||s.currentDealer,password:"",password_confirm:""}),U=()=>{if(!P.first_name||!P.last_name)return f.value="Le prénom et le nom sont requis",!1;if(!P.email)return f.value="L'email est requis",!1;if(!P.username)return f.value="Le nom d'utilisateur est requis",!1;if(!s.user){if(!P.password)return f.value="Le mot de passe est requis",!1;if(P.password!==P.password_confirm)return f.value="Les mots de passe ne correspondent pas",!1}return P.role==="UTILISATEUR"&&!P.dealer?(f.value="Un concessionnaire doit être sélectionné pour un client",!1):!0},H=async()=>{var et;if(f.value=null,!!U()){p.value=!0;try{const nt={...P};(et=s.user)!=null&&et.id&&(nt.id=s.user.id,delete nt.password,delete nt.password_confirm),nt.role==="UTILISATEUR"&&nt.dealer&&(nt.concessionnaire=nt.dealer),delete nt.dealer,await l("save",nt),l("close")}catch(nt){console.error("Erreur formulaire:",nt),f.value=nt.message,p.value=!1}}};return(et,nt)=>(It(),jt("div",R1,[E("div",O1,[nt[24]||(nt[24]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),nt[25]||(nt[25]=E("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),E("div",I1,[E("div",null,[E("div",F1,[E("h3",z1,Kt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),E("div",N1,[E("form",{onSubmit:Xo(H,["prevent"]),class:"space-y-4"},[E("div",j1,[E("div",null,[nt[10]||(nt[10]=E("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),Ie(E("input",{type:"text",id:"first_name","onUpdate:modelValue":nt[0]||(nt[0]=dt=>P.first_name=dt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[We,P.first_name]])]),E("div",null,[nt[11]||(nt[11]=E("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Ie(E("input",{type:"text",id:"last_name","onUpdate:modelValue":nt[1]||(nt[1]=dt=>P.last_name=dt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[We,P.last_name]])])]),E("div",null,[nt[12]||(nt[12]=E("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Ie(E("input",{type:"email",id:"email","onUpdate:modelValue":nt[2]||(nt[2]=dt=>P.email=dt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[We,P.email]])]),E("div",null,[nt[13]||(nt[13]=E("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Ie(E("input",{type:"text",id:"username","onUpdate:modelValue":nt[3]||(nt[3]=dt=>P.username=dt),required:"",disabled:!!s.user,class:br(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!s.user}])},null,10,U1),[[We,P.username]]),s.user?(It(),jt("p",$1," Le nom d'utilisateur ne peut pas être modifié après la création. ")):ge("",!0)]),E("div",null,[nt[14]||(nt[14]=E("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),Ie(E("input",{type:"text",id:"company_name","onUpdate:modelValue":nt[4]||(nt[4]=dt=>P.company_name=dt),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[We,P.company_name]])]),E("div",G1,[s.isAdmin?(It(),jt("div",V1,[nt[16]||(nt[16]=E("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Ie(E("select",{id:"role","onUpdate:modelValue":nt[5]||(nt[5]=dt=>P.role=dt),required:"",disabled:!y.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[nt[15]||(nt[15]=E("option",{value:""},"Sélectionner un rôle",-1)),(It(!0),jt(Ze,null,Oi(v.value,dt=>(It(),jt("option",{key:dt.value,value:dt.value},Kt(dt.label),9,Z1))),128))],8,H1),[[Uo,P.role]])])):ge("",!0),M.value?(It(),jt("div",q1,[nt[18]||(nt[18]=E("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Ie(E("select",{id:"dealer","onUpdate:modelValue":nt[6]||(nt[6]=dt=>P.dealer=dt),required:"",disabled:!s.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[nt[17]||(nt[17]=E("option",{value:""},"Sélectionner un concessionnaire",-1)),(It(!0),jt(Ze,null,Oi(k.value,dt=>(It(),jt("option",{key:dt.id,value:dt.id},Kt(dt.company_name||`${dt.first_name} ${dt.last_name}`),9,W1))),128))],8,K1),[[Uo,P.dealer]])])):ge("",!0)]),t.user?ge("",!0):(It(),jt("div",J1,[E("div",X1,[E("div",null,[nt[19]||(nt[19]=E("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Ie(E("input",{type:"password",id:"password","onUpdate:modelValue":nt[7]||(nt[7]=dt=>P.password=dt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[We,P.password]])]),E("div",null,[nt[20]||(nt[20]=E("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Ie(E("input",{type:"password",id:"password_confirm","onUpdate:modelValue":nt[8]||(nt[8]=dt=>P.password_confirm=dt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[We,P.password_confirm]])])]),nt[21]||(nt[21]=E("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),f.value?(It(),jt("div",Y1,[E("div",Q1,[nt[22]||(nt[22]=E("div",{class:"flex-shrink-0"},[E("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),E("div",tx,[E("h3",ex,Kt(f.value),1)])])])):ge("",!0),E("div",ix,[E("button",{type:"submit",disabled:p.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(It(),jt("svg",rx,nt[23]||(nt[23]=[E("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),E("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):ge("",!0),li(" "+Kt(p.value?"Enregistrement...":"Enregistrer"),1)],8,nx),E("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:nt[9]||(nt[9]=dt=>et.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),sx={class:"fixed inset-0 z-50 overflow-y-auto"},ox={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},ax={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},lx={class:"sm:flex sm:items-start"},ux={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},cx={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},hx={class:"mt-2"},dx={class:"text-sm text-gray-500"},fx={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},Ip=Xi({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(n,s)=>(It(),jt("div",sx,[E("div",ox,[s[3]||(s[3]=E("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[E("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[4]||(s[4]=E("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),E("div",ax,[E("div",lx,[s[2]||(s[2]=E("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[E("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),E("div",ux,[E("h3",cx,Kt(t.title),1),E("div",hx,[E("p",dx,Kt(t.message),1)])])]),E("div",fx,[E("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:s[0]||(s[0]=l=>n.$emit("confirm"))}," Confirmer "),E("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:s[1]||(s[1]=l=>n.$emit("cancel"))}," Annuler ")])])])]))}}),px={class:"min-h-screen bg-gray-50 py-8"},mx={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},gx={class:"flex justify-between items-center mb-8"},_x={class:"text-3xl font-extrabold text-gray-900"},yx={class:"bg-white shadow rounded-lg mb-6 p-4"},vx={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},bx={key:0},xx=["placeholder"],wx={key:1},Lx=["value"],Cx={class:"bg-white shadow rounded-lg"},Ex={class:"overflow-x-auto"},kx={class:"min-w-full divide-y divide-gray-200"},Mx={class:"bg-gray-50"},Px={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Bx={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Sx={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Ax={class:"bg-white divide-y divide-gray-200"},Tx={class:"px-6 py-4 whitespace-nowrap"},Dx={class:"flex items-center"},Rx={class:"flex-shrink-0 h-10 w-10"},Ox={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Ix={class:"text-primary-600 font-medium"},Fx={class:"ml-4"},zx={class:"text-sm font-medium text-gray-900"},Nx={key:0,class:"text-gray-500"},jx={class:"text-sm text-gray-500"},Ux={class:"px-6 py-4 whitespace-nowrap"},$x={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Gx={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Vx={class:"px-6 py-4 whitespace-nowrap"},Hx={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Zx=["onClick"],qx=["onClick"],Kx=Xi({__name:"UserListView",setup(t){const n=Ji(),s=ie([]),l=ie([]),h=ie(!1),p=ie(!1),f=ie(null),y=ie(null),v=Qn({role:"",search:"",dealer:""}),M=Ae(()=>n.isAdmin),k=Ae(()=>n.isDealer),P=Ae(()=>s.value.filter(vt=>vt.role==="CONCESSIONNAIRE")),U=Ae(()=>{var Bt;console.log("Computing filtered users..."),console.log("Current users:",s.value),console.log("Is admin:",M.value),console.log("Is dealer:",k.value),console.log("Current filters:",v);let vt=s.value;if(k.value&&(console.log("Filtering for dealer:",(Bt=n.user)==null?void 0:Bt.id),vt=vt.filter(ut=>{var Ct;return ut.role==="UTILISATEUR"&&ut.dealer===((Ct=n.user)==null?void 0:Ct.id)}),console.log("Filtered users for dealer:",vt)),M.value&&(v.role&&(vt=vt.filter(ut=>ut.role===v.role),console.log("Filtered by role:",vt)),v.dealer&&(vt=vt.filter(ut=>String(ut.dealer)===String(v.dealer)),console.log("Filtered by dealer:",vt))),v.search){const ut=v.search.toLowerCase();vt=vt.filter(Ct=>Ct.username.toLowerCase().includes(ut)||Ct.email.toLowerCase().includes(ut)||Ct.first_name.toLowerCase().includes(ut)||Ct.last_name.toLowerCase().includes(ut)||Ct.company_name&&Ct.company_name.toLowerCase().includes(ut)),console.log("Filtered by search:",vt)}return console.log("Final filtered users:",vt),vt});Lr(async()=>{await H(),M.value&&await N()});async function H(){try{console.log("Fetching users...");const vt=await Ee.get("/users/");console.log("Users API response:",vt.data),s.value=vt.data,console.log("Users after assignment:",s.value)}catch(vt){console.error("Erreur lors de la récupération des utilisateurs:",vt)}}async function N(){try{const vt=await Ee.get("/users/",{params:{role:"CONCESSIONNAIRE"}});l.value=vt.data}catch(vt){console.error("Erreur lors de la récupération des concessionnaires:",vt)}}function $(){f.value=null,h.value=!0}function q(vt){f.value={...vt},h.value=!0}function ht(){h.value=!1,f.value=null}async function mt(vt){var Bt;try{let ut;const Ct=!!vt.id,Vt={...vt};return delete Vt.dealer_name,delete Vt.full_name,delete Vt.user_type,delete Vt.permissions,Ct?ut=await Ee.patch(`/users/${vt.id}/`,Vt):ut=await Ee.post("/users/",Vt),await H(),ht(),ut.data}catch(ut){const Ct=((Bt=ut.response)==null?void 0:Bt.data)||{};let Vt="";throw typeof Ct=="object"&&(Vt=Object.entries(Ct).map(([Dt,Jt])=>Array.isArray(Jt)?Jt[0]:Jt).filter(Dt=>Dt).join(`
`)),Vt||(Vt="Une erreur est survenue lors de la sauvegarde"),new Error(Vt)}}function X(vt){y.value=vt,p.value=!0}async function J(){if(y.value)try{await Ee.delete(`/users/${y.value.id}/`),await H(),p.value=!1,y.value=null}catch(vt){throw console.error("Erreur lors de la suppression de l'utilisateur:",vt),vt}}function et(vt,Bt){return`${(vt==null?void 0:vt.charAt(0))||""}${(Bt==null?void 0:Bt.charAt(0))||""}`.toUpperCase()}const nt={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function dt(vt){return nt[vt]||vt}function Tt(vt){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Lt(vt){return vt?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function Mt(vt){var Bt;return M.value?!0:k.value?vt.role==="UTILISATEUR"&&vt.dealer===((Bt=n.user)==null?void 0:Bt.id):!1}return(vt,Bt)=>{var ut,Ct;return It(),jt("div",px,[E("div",mx,[E("div",gx,[E("h1",_x,Kt(M.value?"Gestion des utilisateurs":"Mes clients"),1),E("button",{onClick:$,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[Bt[4]||(Bt[4]=E("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),li(" "+Kt(M.value?"Nouvel utilisateur":"Nouveau client"),1)])]),E("div",yx,[E("div",vx,[M.value?(It(),jt("div",bx,[Bt[6]||(Bt[6]=E("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Ie(E("select",{id:"role-filter","onUpdate:modelValue":Bt[0]||(Bt[0]=Vt=>v.role=Vt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},Bt[5]||(Bt[5]=[E("option",{value:""},"Tous les rôles",-1),E("option",{value:"ADMIN"},"Admin",-1),E("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),E("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[Uo,v.role]])])):ge("",!0),E("div",null,[Bt[7]||(Bt[7]=E("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Ie(E("input",{type:"text",id:"search","onUpdate:modelValue":Bt[1]||(Bt[1]=Vt=>v.search=Vt),placeholder:M.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,xx),[[We,v.search]])]),M.value?(It(),jt("div",wx,[Bt[9]||(Bt[9]=E("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Ie(E("select",{id:"dealer-filter","onUpdate:modelValue":Bt[2]||(Bt[2]=Vt=>v.dealer=Vt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Bt[8]||(Bt[8]=E("option",{value:""},"Tous les concessionnaires",-1)),(It(!0),jt(Ze,null,Oi(P.value,Vt=>(It(),jt("option",{key:Vt.id,value:Vt.id},Kt(Vt.company_name||`${Vt.first_name} ${Vt.last_name}`),9,Lx))),128))],512),[[Uo,v.dealer]])])):ge("",!0)])]),E("div",Cx,[E("div",Ex,[E("table",kx,[E("thead",Mx,[E("tr",null,[E("th",Px,Kt(M.value?"Utilisateur":"Client"),1),M.value?(It(),jt("th",Bx," Rôle ")):ge("",!0),Bt[10]||(Bt[10]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),M.value?(It(),jt("th",Sx," Concessionnaire ")):ge("",!0),Bt[11]||(Bt[11]=E("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),Bt[12]||(Bt[12]=E("th",{scope:"col",class:"relative px-6 py-3"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",Ax,[(It(!0),jt(Ze,null,Oi(U.value,Vt=>(It(),jt("tr",{key:Vt.id},[E("td",Tx,[E("div",Dx,[E("div",Rx,[E("div",Ox,[E("span",Ix,Kt(et(Vt.first_name,Vt.last_name)),1)])]),E("div",Fx,[E("div",zx,[li(Kt(Vt.first_name)+" "+Kt(Vt.last_name.toUpperCase())+" ",1),Vt.company_name?(It(),jt("span",Nx," ("+Kt(Vt.company_name)+") ",1)):ge("",!0)]),E("div",jx,Kt(Vt.username),1)])])]),E("td",Ux,[E("span",{class:br(Tt(Vt.role))},Kt(dt(Vt.role)),3)]),E("td",$x,Kt(Vt.email),1),E("td",Gx,Kt(Vt.dealer_name||"-"),1),E("td",Vx,[E("span",{class:br(Lt(Vt.is_active))},Kt(Vt.is_active?"Actif":"Inactif"),3)]),E("td",Hx,[E("button",{onClick:Dt=>q(Vt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Zx),Mt(Vt)?(It(),jt("button",{key:0,onClick:Dt=>X(Vt),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,qx)):ge("",!0)])]))),128))])])])])]),h.value?(It(),qr(Op,{key:0,user:f.value,dealers:l.value,"is-admin":M.value,"current-dealer":(Ct=(ut=Ue(n).user)==null?void 0:ut.id)==null?void 0:Ct.toString(),onClose:ht,onSave:mt},null,8,["user","dealers","is-admin","current-dealer"])):ge("",!0),p.value?(It(),qr(Ip,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:J,onCancel:Bt[3]||(Bt[3]=Vt=>p.value=!1)})):ge("",!0)])}}}),Wx={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Jx={class:"mt-8"},Xx={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},Yx={class:"inline-block min-w-full py-2 align-middle"},Qx={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5"},t3={class:"min-w-full divide-y divide-gray-300"},e3={class:"divide-y divide-gray-200 bg-white"},i3={key:0},n3={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},r3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},s3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},o3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},a3={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},l3=["onClick"],u3=["onClick"],c3={key:0,class:"mt-12"},h3={class:"mb-4"},d3={class:"mt-1 text-sm text-gray-500"},f3={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},p3={class:"inline-block min-w-full py-2 align-middle"},m3={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5"},g3={class:"min-w-full divide-y divide-gray-300"},_3={class:"bg-gray-50"},y3={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},v3={class:"divide-y divide-gray-200 bg-white"},b3={key:0},x3={colspan:"7",class:"py-4 px-6 text-center text-gray-500"},w3={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},L3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},C3={class:"px-3 py-4 text-sm text-gray-900"},E3={class:"flex items-center"},k3={class:"h-8 w-8 flex-shrink-0"},M3={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},P3={class:"text-primary-700 font-medium text-sm"},B3={class:"ml-3"},S3={class:"font-medium"},A3={class:"text-gray-500 text-xs"},T3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},D3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},R3={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},O3={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},I3=["onClick"],F3=["onClick"],z3={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"},N3={class:"bg-white rounded-lg p-6 max-w-md w-full"},j3={class:"space-y-4"},U3={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},$3=Xi({__name:"PlansView",setup(t){const n=zs(),s=Gc(),l=Ji(),h=Rp(),p=ie([]),f=ie(!1),y=ie({nom:"",description:""}),v=Ae(()=>p.value.filter(mt=>{var X;return mt.createur.id===((X=l.user)==null?void 0:X.id)})),M=Ae(()=>p.value.filter(mt=>{var X;return mt.createur.id!==((X=l.user)==null?void 0:X.id)}));Lr(async()=>{await k()});async function k(){try{const mt=await s.fetchPlansWithDetails();p.value=mt.data}catch(mt){console.error("Erreur lors du chargement des plans:",mt)}}function P(){f.value=!0,y.value={nom:"",description:""}}async function U(){var mt;try{if(!y.value.nom.trim())throw new Error("Le nom du plan est requis");(mt=s.currentPlan)!=null&&mt.id&&s.hasUnsavedChanges&&(confirm("Voulez-vous sauvegarder les modifications du plan actuel avant d'en créer un nouveau ?")&&await s.savePlan(s.currentPlan.id),s.clearCurrentPlan());const X=await s.createPlan({nom:y.value.nom.trim(),description:y.value.description.trim()});f.value=!1,await k(),s.setCurrentPlan(X),n.push("/")}catch(X){console.error("Erreur lors de la création du plan:",X),alert(X.message||"Une erreur est survenue lors de la création du plan")}}async function H(mt){try{s.setCurrentPlan(mt),await h.loadPlanElements(mt.id),n.push("/")}catch(X){console.error("Erreur lors du chargement du plan:",X),alert("Une erreur est survenue lors du chargement du plan")}}async function N(mt){var X;if(mt!=null&&mt.id&&confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await s.deletePlan(mt.id),await k(),((X=s.currentPlan)==null?void 0:X.id)===mt.id&&s.clearCurrentPlan()}catch(J){console.error("Erreur lors de la suppression du plan:",J),alert("Une erreur est survenue lors de la suppression du plan")}}function $(mt){return new Date(mt).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function q(mt){return mt?`${mt.first_name} ${mt.last_name}`.trim()||mt.username:"Non spécifié"}function ht(mt){if(!mt)return"";const X=mt.first_name.charAt(0).toUpperCase()+mt.last_name.charAt(0).toUpperCase();return X.length>2?X.slice(0,2):X}return(mt,X)=>(It(),jt("div",Wx,[E("div",{class:"sm:flex sm:items-center"},[X[3]||(X[3]=E("div",{class:"sm:flex-auto"},[E("h1",{class:"text-2xl font-semibold text-gray-900"},"Plans d'irrigation"),E("p",{class:"mt-2 text-sm text-gray-700"}," Gérez vos plans d'irrigation ")],-1)),E("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[E("button",{onClick:P,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),E("div",Jx,[X[8]||(X[8]=E("div",{class:"mb-4"},[E("h2",{class:"text-lg font-medium text-gray-900"},"Mes plans"),E("p",{class:"mt-1 text-sm text-gray-500"}," Plans que vous avez créés ")],-1)),E("div",Xx,[E("div",Yx,[E("div",Qx,[E("table",t3,[X[7]||(X[7]=E("thead",{class:"bg-gray-50"},[E("tr",null,[E("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"}," Nom du plan "),E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description "),E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Créé le "),E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Modifié le "),E("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[E("span",{class:"sr-only"},"Actions")])])],-1)),E("tbody",e3,[v.value.length===0?(It(),jt("tr",i3,X[4]||(X[4]=[E("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Vous n'avez pas encore créé de plans ",-1)]))):ge("",!0),(It(!0),jt(Ze,null,Oi(v.value,J=>(It(),jt("tr",{key:J.id,class:"hover:bg-gray-50"},[E("td",n3,Kt(J.nom),1),E("td",r3,Kt(J.description||"-"),1),E("td",s3,Kt($(J.date_creation)),1),E("td",o3,Kt($(J.date_modification)),1),E("td",a3,[E("button",{onClick:et=>H(J),class:"text-primary-600 hover:text-primary-900 mr-4 inline-flex items-center"},X[5]||(X[5]=[E("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),li(" Modifier ")]),8,l3),E("button",{onClick:et=>N(J),class:"text-red-600 hover:text-red-900 inline-flex items-center"},X[6]||(X[6]=[E("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),li(" Supprimer ")]),8,u3)])]))),128))])])])])])]),Ue(l).isAdmin||Ue(l).isDealer?(It(),jt("div",c3,[E("div",h3,[X[9]||(X[9]=E("h2",{class:"text-lg font-medium text-gray-900"},"Plans des clients",-1)),E("p",d3,Kt(Ue(l).isAdmin?"Tous les plans créés par les clients et les concessionnaires":"Plans de vos clients"),1)]),E("div",f3,[E("div",p3,[E("div",m3,[E("table",g3,[E("thead",_3,[E("tr",null,[X[10]||(X[10]=E("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"}," Nom du plan ",-1)),X[11]||(X[11]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),X[12]||(X[12]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Client ",-1)),E("th",y3,Kt(Ue(l).isAdmin?"Concession":"Entreprise"),1),X[13]||(X[13]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Créé le ",-1)),X[14]||(X[14]=E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Modifié le ",-1)),X[15]||(X[15]=E("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[E("span",{class:"sr-only"},"Actions")],-1))])]),E("tbody",v3,[M.value.length===0?(It(),jt("tr",b3,[E("td",x3,Kt(Ue(l).isAdmin?"Aucun plan client disponible":"Aucun plan de vos clients disponible"),1)])):ge("",!0),(It(!0),jt(Ze,null,Oi(M.value,J=>(It(),jt("tr",{key:J.id,class:"hover:bg-gray-50"},[E("td",w3,Kt(J.nom),1),E("td",L3,Kt(J.description||"-"),1),E("td",C3,[E("div",E3,[E("div",k3,[E("div",M3,[E("span",P3,Kt(ht(J.createur)),1)])]),E("div",B3,[E("div",S3,Kt(q(J.createur)),1),E("div",A3,Kt(J.createur.email),1)])])]),E("td",T3,Kt(J.createur.company_name||J.createur.concessionnaire_name||"-"),1),E("td",D3,Kt($(J.date_creation)),1),E("td",R3,Kt($(J.date_modification)),1),E("td",O3,[E("button",{onClick:et=>H(J),class:"text-primary-600 hover:text-primary-900 mr-4 inline-flex items-center"},X[16]||(X[16]=[E("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),li(" Modifier ")]),8,I3),Ue(l).isAdmin?(It(),jt("button",{key:0,onClick:et=>N(J),class:"text-red-600 hover:text-red-900 inline-flex items-center"},X[17]||(X[17]=[E("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[E("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),li(" Supprimer ")]),8,F3)):ge("",!0)])]))),128))])])])])])])):ge("",!0),f.value?(It(),jt("div",z3,[E("div",N3,[X[21]||(X[21]=E("h2",{class:"text-lg font-medium mb-4"},"Nouveau plan",-1)),E("form",{onSubmit:Xo(U,["prevent"])},[E("div",j3,[E("div",null,[X[18]||(X[18]=E("label",{for:"name",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Ie(E("input",{type:"text",id:"name","onUpdate:modelValue":X[0]||(X[0]=J=>y.value.nom=J),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[We,y.value.nom]])]),E("div",null,[X[19]||(X[19]=E("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Ie(E("textarea",{id:"description","onUpdate:modelValue":X[1]||(X[1]=J=>y.value.description=J),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[We,y.value.description]])])]),E("div",U3,[E("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:X[2]||(X[2]=J=>f.value=!1)}," Annuler "),X[20]||(X[20]=E("button",{type:"submit",class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm"}," Créer ",-1))])],32)])])):ge("",!0)]))}}),G3={class:"container mx-auto px-4 py-8"},V3={class:"sm:flex sm:items-center"},H3={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Z3={class:"mt-8 flex flex-col"},q3={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},K3={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},W3={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},J3={class:"min-w-full divide-y divide-gray-300"},X3={class:"divide-y divide-gray-200 bg-white"},Y3={key:0,class:"animate-pulse"},Q3={key:1},tw={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},ew={class:"flex items-center"},iw={class:"h-10 w-10 flex-shrink-0"},nw={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},rw={class:"text-primary-600 font-medium"},sw={class:"ml-4"},ow={class:"font-medium text-gray-900"},aw={class:"text-gray-500"},lw={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},uw={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},cw={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},hw={class:"flex items-center"},dw={class:"font-medium"},fw={class:"text-gray-400 ml-1"},pw={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},mw=["onClick"],gw=["onClick"],_w=Xi({__name:"ClientListView",setup(t){zs();const n=Ji(),s=ie([]),l=ie(!0),h=ie(!1),p=ie(!1),f=ie(null),y=ie(null);Lr(async()=>{await v()});async function v(){var $;try{const q=await Ee.get("/users/",{params:{dealer:($=n.user)==null?void 0:$.id,role:"UTILISATEUR",include_plans:!0}});s.value=q.data}catch(q){console.error("Error fetching clients:",q)}finally{l.value=!1}}function M($,q){return`${($==null?void 0:$.charAt(0))||""}${(q==null?void 0:q.charAt(0))||""}`.toUpperCase()}function k($){f.value=$,h.value=!0}function P(){h.value=!1,f.value=null}async function U($){var q;try{const ht=!!$.id,mt=ht?`/users/${$.id}/`:"/users/",X=ht?"patch":"post";$.role="UTILISATEUR",$.concessionnaire=(q=n.user)==null?void 0:q.id,await Ee[X](mt,$),await v(),P()}catch(ht){throw console.error("Erreur lors de la sauvegarde du client:",ht),ht}}function H($){y.value=$,p.value=!0}async function N(){if(y.value)try{await Ee.delete(`/users/${y.value.id}/`),await v(),p.value=!1,y.value=null}catch($){throw console.error("Erreur lors de la suppression du client:",$),$}}return($,q)=>{var ht,mt;return It(),jt("div",G3,[E("div",V3,[q[3]||(q[3]=E("div",{class:"sm:flex-auto"},[E("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),E("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),E("div",H3,[E("button",{onClick:q[0]||(q[0]=X=>h.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},q[2]||(q[2]=[E("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[E("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),li(" Ajouter un client ")]))])]),E("div",Z3,[E("div",q3,[E("div",K3,[E("div",W3,[E("table",J3,[q[6]||(q[6]=E("thead",{class:"bg-gray-50"},[E("tr",null,[E("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),E("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),E("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[E("span",{class:"sr-only"},"Actions")])])],-1)),E("tbody",X3,[l.value?(It(),jt("tr",Y3,q[4]||(q[4]=[E("td",{colspan:"5",class:"py-4 px-6"},[E("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):s.value.length===0?(It(),jt("tr",Q3,q[5]||(q[5]=[E("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):ge("",!0),(It(!0),jt(Ze,null,Oi(s.value,X=>(It(),jt("tr",{key:X.id,class:"hover:bg-gray-50"},[E("td",tw,[E("div",ew,[E("div",iw,[E("div",nw,[E("span",rw,Kt(M(X.first_name,X.last_name)),1)])]),E("div",sw,[E("div",ow,Kt(X.first_name)+" "+Kt(X.last_name.toUpperCase()),1),E("div",aw,Kt(X.username),1)])])]),E("td",lw,Kt(X.email),1),E("td",uw,Kt(X.company_name||"-"),1),E("td",cw,[E("div",hw,[E("span",dw,Kt(X.plans_count||0),1),E("span",fw,"plan"+Kt((X.plans_count||0)>1?"s":""),1)])]),E("td",pw,[E("button",{onClick:J=>k(X),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,mw),E("button",{onClick:J=>H(X),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,gw)])]))),128))])])])])])]),h.value?(It(),qr(Op,{key:0,user:f.value||{},dealers:[Ue(n).user],"is-admin":!1,"current-dealer":(mt=(ht=Ue(n).user)==null?void 0:ht.id)==null?void 0:mt.toString(),onClose:P,onSave:U},null,8,["user","dealers","current-dealer"])):ge("",!0),p.value?(It(),qr(Ip,{key:1,title:"Supprimer le client",message:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible.",onConfirm:N,onCancel:q[1]||(q[1]=X=>p.value=!1)})):ge("",!0)])}}}),Fp=_v({history:Ky("/"),routes:[{path:"/",name:"home",component:Cd,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:$3,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:Kx,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:_w,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>$a(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:wb,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>$a(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>$a(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:ab,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:Cd,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>$a(()=>import("./NotFoundView.js"),[])}]});Fp.beforeEach(async(t,n,s)=>{var y,v;const l=Ji();if(console.log("Route:",t.path,"Auth state:",{initialized:l.initialized,isAuthenticated:l.isAuthenticated,user:l.user}),!l.initialized)try{await l.initialize(window.INITIAL_STATE)}catch(M){console.error("Error initializing auth store:",M)}const h=l.isAuthenticated,p=(y=l.user)==null?void 0:y.must_change_password,f=(v=l.user)==null?void 0:v.user_type;if(t.meta.requiresAuth&&!h){s("/login");return}if(h&&p&&t.name!=="changePassword"){s({name:"changePassword"});return}if(t.name==="changePassword"&&!p){s({name:"home"});return}if(t.meta.allowedRoles&&f&&!t.meta.allowedRoles.includes(f)){s({name:"home"});return}if(t.meta.requiresGuest&&h){s({name:"home"});return}s()});const Vc=Tg(N4),zp=Og();Vc.use(zp);Vc.use(Fp);const yw=Ji(zp);window.INITIAL_STATE&&yw.initialize(window.INITIAL_STATE);Vc.mount("#app");export{Qn as a,E as b,jt as c,Xi as d,ge as e,Ie as f,It as g,bw as h,li as i,ai as j,Bo as k,m0 as l,Nw as m,br as n,Lr as o,zs as p,ie as r,Kt as t,Ji as u,We as v,Xo as w};
