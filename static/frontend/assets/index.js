var Jp=Object.defineProperty;var Yp=(t,n,o)=>n in t?Jp(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var Gt=(t,n,o)=>Yp(t,typeof n!="symbol"?n+"":n,o);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))l(f);new MutationObserver(f=>{for(const p of f)if(p.type==="childList")for(const d of p.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function o(f){const p={};return f.integrity&&(p.integrity=f.integrity),f.referrerPolicy&&(p.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?p.credentials="include":f.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(f){if(f.ep)return;f.ep=!0;const p=o(f);fetch(f.href,p)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ch(t){const n=Object.create(null);for(const o of t.split(","))n[o]=1;return o=>o in n}const Se={},Cs=[],wn=()=>{},Xp=()=>!1,ol=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fh=t=>t.startsWith("onUpdate:"),yi=Object.assign,dh=(t,n)=>{const o=t.indexOf(n);o>-1&&t.splice(o,1)},Qp=Object.prototype.hasOwnProperty,Ee=(t,n)=>Qp.call(t,n),qt=Array.isArray,Es=t=>Uo(t)==="[object Map]",Ts=t=>Uo(t)==="[object Set]",Zh=t=>Uo(t)==="[object Date]",ee=t=>typeof t=="function",$e=t=>typeof t=="string",Cn=t=>typeof t=="symbol",De=t=>t!==null&&typeof t=="object",_f=t=>(De(t)||ee(t))&&ee(t.then)&&ee(t.catch),yf=Object.prototype.toString,Uo=t=>yf.call(t),tm=t=>Uo(t).slice(8,-1),vf=t=>Uo(t)==="[object Object]",ph=t=>$e(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,xo=ch(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),al=t=>{const n=Object.create(null);return o=>n[o]||(n[o]=t(o))},em=/-(\w)/g,en=al(t=>t.replace(em,(n,o)=>o?o.toUpperCase():"")),im=/\B([A-Z])/g,Vr=al(t=>t.replace(im,"-$1").toLowerCase()),ll=al(t=>t.charAt(0).toUpperCase()+t.slice(1)),Lu=al(t=>t?`on${ll(t)}`:""),fr=(t,n)=>!Object.is(t,n),Ia=(t,...n)=>{for(let o=0;o<t.length;o++)t[o](...n)},bf=(t,n,o,l=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:l,value:o})},Ka=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let $h;const ul=()=>$h||($h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hl(t){if(qt(t)){const n={};for(let o=0;o<t.length;o++){const l=t[o],f=$e(l)?om(l):hl(l);if(f)for(const p in f)n[p]=f[p]}return n}else if($e(t)||De(t))return t}const nm=/;(?![^(]*\))/g,rm=/:([^]+)/,sm=/\/\*[^]*?\*\//g;function om(t){const n={};return t.replace(sm,"").split(nm).forEach(o=>{if(o){const l=o.split(rm);l.length>1&&(n[l[0].trim()]=l[1].trim())}}),n}function Ms(t){let n="";if($e(t))n=t;else if(qt(t))for(let o=0;o<t.length;o++){const l=Ms(t[o]);l&&(n+=l+" ")}else if(De(t))for(const o in t)t[o]&&(n+=o+" ");return n.trim()}const am="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lm=ch(am);function Lf(t){return!!t||t===""}function um(t,n){if(t.length!==n.length)return!1;let o=!0;for(let l=0;o&&l<t.length;l++)o=Go(t[l],n[l]);return o}function Go(t,n){if(t===n)return!0;let o=Zh(t),l=Zh(n);if(o||l)return o&&l?t.getTime()===n.getTime():!1;if(o=Cn(t),l=Cn(n),o||l)return t===n;if(o=qt(t),l=qt(n),o||l)return o&&l?um(t,n):!1;if(o=De(t),l=De(n),o||l){if(!o||!l)return!1;const f=Object.keys(t).length,p=Object.keys(n).length;if(f!==p)return!1;for(const d in t){const b=t.hasOwnProperty(d),x=n.hasOwnProperty(d);if(b&&!x||!b&&x||!Go(t[d],n[d]))return!1}}return String(t)===String(n)}function mh(t,n){return t.findIndex(o=>Go(o,n))}const xf=t=>!!(t&&t.__v_isRef===!0),Ue=t=>$e(t)?t:t==null?"":qt(t)||De(t)&&(t.toString===yf||!ee(t.toString))?xf(t)?Ue(t.value):JSON.stringify(t,wf,2):String(t),wf=(t,n)=>xf(n)?wf(t,n.value):Es(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((o,[l,f],p)=>(o[xu(l,p)+" =>"]=f,o),{})}:Ts(n)?{[`Set(${n.size})`]:[...n.values()].map(o=>xu(o))}:Cn(n)?xu(n):De(n)&&!qt(n)&&!vf(n)?String(n):n,xu=(t,n="")=>{var o;return Cn(t)?`Symbol(${(o=t.description)!=null?o:n})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ki;class Cf{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ki,!n&&ki&&(this.index=(ki.scopes||(ki.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,o;if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].pause();for(n=0,o=this.effects.length;n<o;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,o;if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].resume();for(n=0,o=this.effects.length;n<o;n++)this.effects[n].resume()}}run(n){if(this._active){const o=ki;try{return ki=this,n()}finally{ki=o}}}on(){ki=this}off(){ki=this.parent}stop(n){if(this._active){this._active=!1;let o,l;for(o=0,l=this.effects.length;o<l;o++)this.effects[o].stop();for(this.effects.length=0,o=0,l=this.cleanups.length;o<l;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,l=this.scopes.length;o<l;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const f=this.parent.scopes.pop();f&&f!==this&&(this.parent.scopes[this.index]=f,f.index=this.index)}this.parent=void 0}}}function Ef(t){return new Cf(t)}function kf(){return ki}function hm(t,n=!1){ki&&ki.cleanups.push(t)}let Te;const wu=new WeakSet;class Mf{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ki&&ki.active&&ki.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wu.has(this)&&(wu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Bf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qh(this),Sf(this);const n=Te,o=ln;Te=this,ln=!0;try{return this.fn()}finally{Af(this),Te=n,ln=o,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)yh(n);this.deps=this.depsTail=void 0,qh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ju(this)&&this.run()}get dirty(){return ju(this)}}let Pf=0,wo,Co;function Bf(t,n=!1){if(t.flags|=8,n){t.next=Co,Co=t;return}t.next=wo,wo=t}function gh(){Pf++}function _h(){if(--Pf>0)return;if(Co){let n=Co;for(Co=void 0;n;){const o=n.next;n.next=void 0,n.flags&=-9,n=o}}let t;for(;wo;){let n=wo;for(wo=void 0;n;){const o=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(l){t||(t=l)}n=o}}if(t)throw t}function Sf(t){for(let n=t.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function Af(t){let n,o=t.depsTail,l=o;for(;l;){const f=l.prevDep;l.version===-1?(l===o&&(o=f),yh(l),cm(l)):n=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=f}t.deps=n,t.depsTail=o}function ju(t){for(let n=t.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(Tf(n.dep.computed)||n.dep.version!==n.version))return!0;return!!t._dirty}function Tf(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===To))return;t.globalVersion=To;const n=t.dep;if(t.flags|=2,n.version>0&&!t.isSSR&&t.deps&&!ju(t)){t.flags&=-3;return}const o=Te,l=ln;Te=t,ln=!0;try{Sf(t);const f=t.fn(t._value);(n.version===0||fr(f,t._value))&&(t._value=f,n.version++)}catch(f){throw n.version++,f}finally{Te=o,ln=l,Af(t),t.flags&=-3}}function yh(t,n=!1){const{dep:o,prevSub:l,nextSub:f}=t;if(l&&(l.nextSub=f,t.prevSub=void 0),f&&(f.prevSub=l,t.nextSub=void 0),o.subs===t&&(o.subs=l,!l&&o.computed)){o.computed.flags&=-5;for(let p=o.computed.deps;p;p=p.nextDep)yh(p,!0)}!n&&!--o.sc&&o.map&&o.map.delete(o.key)}function cm(t){const{prevDep:n,nextDep:o}=t;n&&(n.nextDep=o,t.prevDep=void 0),o&&(o.prevDep=n,t.nextDep=void 0)}let ln=!0;const Df=[];function pr(){Df.push(ln),ln=!1}function mr(){const t=Df.pop();ln=t===void 0?!0:t}function qh(t){const{cleanup:n}=t;if(t.cleanup=void 0,n){const o=Te;Te=void 0;try{n()}finally{Te=o}}}let To=0;class fm{constructor(n,o){this.sub=n,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vh{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!Te||!ln||Te===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==Te)o=this.activeLink=new fm(Te,this),Te.deps?(o.prevDep=Te.depsTail,Te.depsTail.nextDep=o,Te.depsTail=o):Te.deps=Te.depsTail=o,Rf(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const l=o.nextDep;l.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=l),o.prevDep=Te.depsTail,o.nextDep=void 0,Te.depsTail.nextDep=o,Te.depsTail=o,Te.deps===o&&(Te.deps=l)}return o}trigger(n){this.version++,To++,this.notify(n)}notify(n){gh();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{_h()}}}function Rf(t){if(t.dep.sc++,t.sub.flags&4){const n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let l=n.deps;l;l=l.nextDep)Rf(l)}const o=t.dep.subs;o!==t&&(t.prevSub=o,o&&(o.nextSub=t)),t.dep.subs=t}}const Wa=new WeakMap,Or=Symbol(""),Uu=Symbol(""),Do=Symbol("");function pi(t,n,o){if(ln&&Te){let l=Wa.get(t);l||Wa.set(t,l=new Map);let f=l.get(o);f||(l.set(o,f=new vh),f.map=l,f.key=o),f.track()}}function jn(t,n,o,l,f,p){const d=Wa.get(t);if(!d){To++;return}const b=x=>{x&&x.trigger()};if(gh(),n==="clear")d.forEach(b);else{const x=qt(t),P=x&&ph(o);if(x&&o==="length"){const E=Number(l);d.forEach((k,F)=>{(F==="length"||F===Do||!Cn(F)&&F>=E)&&b(k)})}else switch((o!==void 0||d.has(void 0))&&b(d.get(o)),P&&b(d.get(Do)),n){case"add":x?P&&b(d.get("length")):(b(d.get(Or)),Es(t)&&b(d.get(Uu)));break;case"delete":x||(b(d.get(Or)),Es(t)&&b(d.get(Uu)));break;case"set":Es(t)&&b(d.get(Or));break}}_h()}function dm(t,n){const o=Wa.get(t);return o&&o.get(n)}function bs(t){const n=ve(t);return n===t?n:(pi(n,"iterate",Do),Qi(t)?n:n.map(mi))}function cl(t){return pi(t=ve(t),"iterate",Do),t}const pm={__proto__:null,[Symbol.iterator](){return Cu(this,Symbol.iterator,mi)},concat(...t){return bs(this).concat(...t.map(n=>qt(n)?bs(n):n))},entries(){return Cu(this,"entries",t=>(t[1]=mi(t[1]),t))},every(t,n){return In(this,"every",t,n,void 0,arguments)},filter(t,n){return In(this,"filter",t,n,o=>o.map(mi),arguments)},find(t,n){return In(this,"find",t,n,mi,arguments)},findIndex(t,n){return In(this,"findIndex",t,n,void 0,arguments)},findLast(t,n){return In(this,"findLast",t,n,mi,arguments)},findLastIndex(t,n){return In(this,"findLastIndex",t,n,void 0,arguments)},forEach(t,n){return In(this,"forEach",t,n,void 0,arguments)},includes(...t){return Eu(this,"includes",t)},indexOf(...t){return Eu(this,"indexOf",t)},join(t){return bs(this).join(t)},lastIndexOf(...t){return Eu(this,"lastIndexOf",t)},map(t,n){return In(this,"map",t,n,void 0,arguments)},pop(){return mo(this,"pop")},push(...t){return mo(this,"push",t)},reduce(t,...n){return Kh(this,"reduce",t,n)},reduceRight(t,...n){return Kh(this,"reduceRight",t,n)},shift(){return mo(this,"shift")},some(t,n){return In(this,"some",t,n,void 0,arguments)},splice(...t){return mo(this,"splice",t)},toReversed(){return bs(this).toReversed()},toSorted(t){return bs(this).toSorted(t)},toSpliced(...t){return bs(this).toSpliced(...t)},unshift(...t){return mo(this,"unshift",t)},values(){return Cu(this,"values",mi)}};function Cu(t,n,o){const l=cl(t),f=l[n]();return l!==t&&!Qi(t)&&(f._next=f.next,f.next=()=>{const p=f._next();return p.value&&(p.value=o(p.value)),p}),f}const mm=Array.prototype;function In(t,n,o,l,f,p){const d=cl(t),b=d!==t&&!Qi(t),x=d[n];if(x!==mm[n]){const k=x.apply(t,p);return b?mi(k):k}let P=o;d!==t&&(b?P=function(k,F){return o.call(this,mi(k),F,t)}:o.length>2&&(P=function(k,F){return o.call(this,k,F,t)}));const E=x.call(d,P,l);return b&&f?f(E):E}function Kh(t,n,o,l){const f=cl(t);let p=o;return f!==t&&(Qi(t)?o.length>3&&(p=function(d,b,x){return o.call(this,d,b,x,t)}):p=function(d,b,x){return o.call(this,d,mi(b),x,t)}),f[n](p,...l)}function Eu(t,n,o){const l=ve(t);pi(l,"iterate",Do);const f=l[n](...o);return(f===-1||f===!1)&&xh(o[0])?(o[0]=ve(o[0]),l[n](...o)):f}function mo(t,n,o=[]){pr(),gh();const l=ve(t)[n].apply(t,o);return _h(),mr(),l}const gm=ch("__proto__,__v_isRef,__isVue"),Of=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Cn));function _m(t){Cn(t)||(t=String(t));const n=ve(this);return pi(n,"has",t),n.hasOwnProperty(t)}class Ff{constructor(n=!1,o=!1){this._isReadonly=n,this._isShallow=o}get(n,o,l){if(o==="__v_skip")return n.__v_skip;const f=this._isReadonly,p=this._isShallow;if(o==="__v_isReactive")return!f;if(o==="__v_isReadonly")return f;if(o==="__v_isShallow")return p;if(o==="__v_raw")return l===(f?p?Mm:jf:p?zf:Nf).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(l)?n:void 0;const d=qt(n);if(!f){let x;if(d&&(x=pm[o]))return x;if(o==="hasOwnProperty")return _m}const b=Reflect.get(n,o,Ve(n)?n:l);return(Cn(o)?Of.has(o):gm(o))||(f||pi(n,"get",o),p)?b:Ve(b)?d&&ph(o)?b:b.value:De(b)?f?Gf(b):Hr(b):b}}class If extends Ff{constructor(n=!1){super(!1,n)}set(n,o,l,f){let p=n[o];if(!this._isShallow){const x=jr(p);if(!Qi(l)&&!jr(l)&&(p=ve(p),l=ve(l)),!qt(n)&&Ve(p)&&!Ve(l))return x?!1:(p.value=l,!0)}const d=qt(n)&&ph(o)?Number(o)<n.length:Ee(n,o),b=Reflect.set(n,o,l,Ve(n)?n:f);return n===ve(f)&&(d?fr(l,p)&&jn(n,"set",o,l):jn(n,"add",o,l)),b}deleteProperty(n,o){const l=Ee(n,o);n[o];const f=Reflect.deleteProperty(n,o);return f&&l&&jn(n,"delete",o,void 0),f}has(n,o){const l=Reflect.has(n,o);return(!Cn(o)||!Of.has(o))&&pi(n,"has",o),l}ownKeys(n){return pi(n,"iterate",qt(n)?"length":Or),Reflect.ownKeys(n)}}class ym extends Ff{constructor(n=!1){super(!0,n)}set(n,o){return!0}deleteProperty(n,o){return!0}}const vm=new If,bm=new ym,Lm=new If(!0);const Gu=t=>t,Da=t=>Reflect.getPrototypeOf(t);function xm(t,n,o){return function(...l){const f=this.__v_raw,p=ve(f),d=Es(p),b=t==="entries"||t===Symbol.iterator&&d,x=t==="keys"&&d,P=f[t](...l),E=o?Gu:n?Vu:mi;return!n&&pi(p,"iterate",x?Uu:Or),{next(){const{value:k,done:F}=P.next();return F?{value:k,done:F}:{value:b?[E(k[0]),E(k[1])]:E(k),done:F}},[Symbol.iterator](){return this}}}}function Ra(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function wm(t,n){const o={get(f){const p=this.__v_raw,d=ve(p),b=ve(f);t||(fr(f,b)&&pi(d,"get",f),pi(d,"get",b));const{has:x}=Da(d),P=n?Gu:t?Vu:mi;if(x.call(d,f))return P(p.get(f));if(x.call(d,b))return P(p.get(b));p!==d&&p.get(f)},get size(){const f=this.__v_raw;return!t&&pi(ve(f),"iterate",Or),Reflect.get(f,"size",f)},has(f){const p=this.__v_raw,d=ve(p),b=ve(f);return t||(fr(f,b)&&pi(d,"has",f),pi(d,"has",b)),f===b?p.has(f):p.has(f)||p.has(b)},forEach(f,p){const d=this,b=d.__v_raw,x=ve(b),P=n?Gu:t?Vu:mi;return!t&&pi(x,"iterate",Or),b.forEach((E,k)=>f.call(p,P(E),P(k),d))}};return yi(o,t?{add:Ra("add"),set:Ra("set"),delete:Ra("delete"),clear:Ra("clear")}:{add(f){!n&&!Qi(f)&&!jr(f)&&(f=ve(f));const p=ve(this);return Da(p).has.call(p,f)||(p.add(f),jn(p,"add",f,f)),this},set(f,p){!n&&!Qi(p)&&!jr(p)&&(p=ve(p));const d=ve(this),{has:b,get:x}=Da(d);let P=b.call(d,f);P||(f=ve(f),P=b.call(d,f));const E=x.call(d,f);return d.set(f,p),P?fr(p,E)&&jn(d,"set",f,p):jn(d,"add",f,p),this},delete(f){const p=ve(this),{has:d,get:b}=Da(p);let x=d.call(p,f);x||(f=ve(f),x=d.call(p,f)),b&&b.call(p,f);const P=p.delete(f);return x&&jn(p,"delete",f,void 0),P},clear(){const f=ve(this),p=f.size!==0,d=f.clear();return p&&jn(f,"clear",void 0,void 0),d}}),["keys","values","entries",Symbol.iterator].forEach(f=>{o[f]=xm(f,t,n)}),o}function bh(t,n){const o=wm(t,n);return(l,f,p)=>f==="__v_isReactive"?!t:f==="__v_isReadonly"?t:f==="__v_raw"?l:Reflect.get(Ee(o,f)&&f in l?o:l,f,p)}const Cm={get:bh(!1,!1)},Em={get:bh(!1,!0)},km={get:bh(!0,!1)};const Nf=new WeakMap,zf=new WeakMap,jf=new WeakMap,Mm=new WeakMap;function Pm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bm(t){return t.__v_skip||!Object.isExtensible(t)?0:Pm(tm(t))}function Hr(t){return jr(t)?t:Lh(t,!1,vm,Cm,Nf)}function Uf(t){return Lh(t,!1,Lm,Em,zf)}function Gf(t){return Lh(t,!0,bm,km,jf)}function Lh(t,n,o,l,f){if(!De(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const p=f.get(t);if(p)return p;const d=Bm(t);if(d===0)return t;const b=new Proxy(t,d===2?l:o);return f.set(t,b),b}function dr(t){return jr(t)?dr(t.__v_raw):!!(t&&t.__v_isReactive)}function jr(t){return!!(t&&t.__v_isReadonly)}function Qi(t){return!!(t&&t.__v_isShallow)}function xh(t){return t?!!t.__v_raw:!1}function ve(t){const n=t&&t.__v_raw;return n?ve(n):t}function wh(t){return!Ee(t,"__v_skip")&&Object.isExtensible(t)&&bf(t,"__v_skip",!0),t}const mi=t=>De(t)?Hr(t):t,Vu=t=>De(t)?Gf(t):t;function Ve(t){return t?t.__v_isRef===!0:!1}function ce(t){return Vf(t,!1)}function Sm(t){return Vf(t,!0)}function Vf(t,n){return Ve(t)?t:new Am(t,n)}class Am{constructor(n,o){this.dep=new vh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?n:ve(n),this._value=o?n:mi(n),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(n){const o=this._rawValue,l=this.__v_isShallow||Qi(n)||jr(n);n=l?n:ve(n),fr(n,o)&&(this._rawValue=n,this._value=l?n:mi(n),this.dep.trigger())}}function Bi(t){return Ve(t)?t.value:t}const Tm={get:(t,n,o)=>n==="__v_raw"?t:Bi(Reflect.get(t,n,o)),set:(t,n,o,l)=>{const f=t[n];return Ve(f)&&!Ve(o)?(f.value=o,!0):Reflect.set(t,n,o,l)}};function Hf(t){return dr(t)?t:new Proxy(t,Tm)}function Dm(t){const n=qt(t)?new Array(t.length):{};for(const o in t)n[o]=Om(t,o);return n}class Rm{constructor(n,o,l){this._object=n,this._key=o,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return dm(ve(this._object),this._key)}}function Om(t,n,o){const l=t[n];return Ve(l)?l:new Rm(t,n,o)}class Fm{constructor(n,o,l){this.fn=n,this.setter=o,this._value=void 0,this.dep=new vh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=To-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&Te!==this)return Bf(this,!0),!0}get value(){const n=this.dep.track();return Tf(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Im(t,n,o=!1){let l,f;return ee(t)?l=t:(l=t.get,f=t.set),new Fm(l,f,o)}const Oa={},Ja=new WeakMap;let Dr;function Nm(t,n=!1,o=Dr){if(o){let l=Ja.get(o);l||Ja.set(o,l=[]),l.push(t)}}function zm(t,n,o=Se){const{immediate:l,deep:f,once:p,scheduler:d,augmentJob:b,call:x}=o,P=xt=>f?xt:Qi(xt)||f===!1||f===0?Un(xt,1):Un(xt);let E,k,F,j,q=!1,J=!1;if(Ve(t)?(k=()=>t.value,q=Qi(t)):dr(t)?(k=()=>P(t),q=!0):qt(t)?(J=!0,q=t.some(xt=>dr(xt)||Qi(xt)),k=()=>t.map(xt=>{if(Ve(xt))return xt.value;if(dr(xt))return P(xt);if(ee(xt))return x?x(xt,2):xt()})):ee(t)?n?k=x?()=>x(t,2):t:k=()=>{if(F){pr();try{F()}finally{mr()}}const xt=Dr;Dr=E;try{return x?x(t,3,[j]):t(j)}finally{Dr=xt}}:k=wn,n&&f){const xt=k,St=f===!0?1/0:f;k=()=>Un(xt(),St)}const st=kf(),pt=()=>{E.stop(),st&&st.active&&dh(st.effects,E)};if(p&&n){const xt=n;n=(...St)=>{xt(...St),pt()}}let bt=J?new Array(t.length).fill(Oa):Oa;const ft=xt=>{if(!(!(E.flags&1)||!E.dirty&&!xt))if(n){const St=E.run();if(f||q||(J?St.some((Nt,Vt)=>fr(Nt,bt[Vt])):fr(St,bt))){F&&F();const Nt=Dr;Dr=E;try{const Vt=[St,bt===Oa?void 0:J&&bt[0]===Oa?[]:bt,j];x?x(n,3,Vt):n(...Vt),bt=St}finally{Dr=Nt}}}else E.run()};return b&&b(ft),E=new Mf(k),E.scheduler=d?()=>d(ft,!1):ft,j=xt=>Nm(xt,!1,E),F=E.onStop=()=>{const xt=Ja.get(E);if(xt){if(x)x(xt,4);else for(const St of xt)St();Ja.delete(E)}},n?l?ft(!0):bt=E.run():d?d(ft.bind(null,!0),!0):E.run(),pt.pause=E.pause.bind(E),pt.resume=E.resume.bind(E),pt.stop=pt,pt}function Un(t,n=1/0,o){if(n<=0||!De(t)||t.__v_skip||(o=o||new Set,o.has(t)))return t;if(o.add(t),n--,Ve(t))Un(t.value,n,o);else if(qt(t))for(let l=0;l<t.length;l++)Un(t[l],n,o);else if(Ts(t)||Es(t))t.forEach(l=>{Un(l,n,o)});else if(vf(t)){for(const l in t)Un(t[l],n,o);for(const l of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,l)&&Un(t[l],n,o)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vo(t,n,o,l){try{return l?t(...l):t()}catch(f){fl(f,n,o)}}function En(t,n,o,l){if(ee(t)){const f=Vo(t,n,o,l);return f&&_f(f)&&f.catch(p=>{fl(p,n,o)}),f}if(qt(t)){const f=[];for(let p=0;p<t.length;p++)f.push(En(t[p],n,o,l));return f}}function fl(t,n,o,l=!0){const f=n?n.vnode:null,{errorHandler:p,throwUnhandledErrorInProduction:d}=n&&n.appContext.config||Se;if(n){let b=n.parent;const x=n.proxy,P=`https://vuejs.org/error-reference/#runtime-${o}`;for(;b;){const E=b.ec;if(E){for(let k=0;k<E.length;k++)if(E[k](t,x,P)===!1)return}b=b.parent}if(p){pr(),Vo(p,null,10,[t,x,P]),mr();return}}jm(t,o,f,l,d)}function jm(t,n,o,l=!0,f=!1){if(f)throw t;console.error(t)}const Pi=[];let Ln=-1;const ks=[];let ar=null,xs=0;const Zf=Promise.resolve();let Ya=null;function dl(t){const n=Ya||Zf;return t?n.then(this?t.bind(this):t):n}function Um(t){let n=Ln+1,o=Pi.length;for(;n<o;){const l=n+o>>>1,f=Pi[l],p=Ro(f);p<t||p===t&&f.flags&2?n=l+1:o=l}return n}function Ch(t){if(!(t.flags&1)){const n=Ro(t),o=Pi[Pi.length-1];!o||!(t.flags&2)&&n>=Ro(o)?Pi.push(t):Pi.splice(Um(n),0,t),t.flags|=1,$f()}}function $f(){Ya||(Ya=Zf.then(Kf))}function Gm(t){qt(t)?ks.push(...t):ar&&t.id===-1?ar.splice(xs+1,0,t):t.flags&1||(ks.push(t),t.flags|=1),$f()}function Wh(t,n,o=Ln+1){for(;o<Pi.length;o++){const l=Pi[o];if(l&&l.flags&2){if(t&&l.id!==t.uid)continue;Pi.splice(o,1),o--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function qf(t){if(ks.length){const n=[...new Set(ks)].sort((o,l)=>Ro(o)-Ro(l));if(ks.length=0,ar){ar.push(...n);return}for(ar=n,xs=0;xs<ar.length;xs++){const o=ar[xs];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}ar=null,xs=0}}const Ro=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Kf(t){try{for(Ln=0;Ln<Pi.length;Ln++){const n=Pi[Ln];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Vo(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Ln<Pi.length;Ln++){const n=Pi[Ln];n&&(n.flags&=-2)}Ln=-1,Pi.length=0,qf(),Ya=null,(Pi.length||ks.length)&&Kf()}}let Ri=null,Wf=null;function Xa(t){const n=Ri;return Ri=t,Wf=t&&t.type.__scopeId||null,n}function Eo(t,n=Ri,o){if(!n||t._n)return t;const l=(...f)=>{l._d&&sc(-1);const p=Xa(n);let d;try{d=t(...f)}finally{Xa(p),l._d&&sc(1)}return d};return l._n=!0,l._c=!0,l._d=!0,l}function Mi(t,n){if(Ri===null)return t;const o=_l(Ri),l=t.dirs||(t.dirs=[]);for(let f=0;f<n.length;f++){let[p,d,b,x=Se]=n[f];p&&(ee(p)&&(p={mounted:p,updated:p}),p.deep&&Un(d),l.push({dir:p,instance:o,value:d,oldValue:void 0,arg:b,modifiers:x}))}return t}function Ar(t,n,o,l){const f=t.dirs,p=n&&n.dirs;for(let d=0;d<f.length;d++){const b=f[d];p&&(b.oldValue=p[d].value);let x=b.dir[l];x&&(pr(),En(x,o,8,[t.el,b,t,n]),mr())}}const Vm=Symbol("_vte"),Hm=t=>t.__isTeleport;function Eh(t,n){t.shapeFlag&6&&t.component?(t.transition=n,Eh(t.component.subTree,n)):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}/*! #__NO_SIDE_EFFECTS__ */function gr(t,n){return ee(t)?yi({name:t.name},n,{setup:t}):t}function Jf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Qa(t,n,o,l,f=!1){if(qt(t)){t.forEach((q,J)=>Qa(q,n&&(qt(n)?n[J]:n),o,l,f));return}if(ko(l)&&!f){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&Qa(t,n,o,l.component.subTree);return}const p=l.shapeFlag&4?_l(l.component):l.el,d=f?null:p,{i:b,r:x}=t,P=n&&n.r,E=b.refs===Se?b.refs={}:b.refs,k=b.setupState,F=ve(k),j=k===Se?()=>!1:q=>Ee(F,q);if(P!=null&&P!==x&&($e(P)?(E[P]=null,j(P)&&(k[P]=null)):Ve(P)&&(P.value=null)),ee(x))Vo(x,b,12,[d,E]);else{const q=$e(x),J=Ve(x);if(q||J){const st=()=>{if(t.f){const pt=q?j(x)?k[x]:E[x]:x.value;f?qt(pt)&&dh(pt,p):qt(pt)?pt.includes(p)||pt.push(p):q?(E[x]=[p],j(x)&&(k[x]=E[x])):(x.value=[p],t.k&&(E[t.k]=x.value))}else q?(E[x]=d,j(x)&&(k[x]=d)):J&&(x.value=d,t.k&&(E[t.k]=d))};d?(st.id=-1,zi(st,o)):st()}}}ul().requestIdleCallback;ul().cancelIdleCallback;const ko=t=>!!t.type.__asyncLoader,Yf=t=>t.type.__isKeepAlive;function Zm(t,n){Xf(t,"a",n)}function $m(t,n){Xf(t,"da",n)}function Xf(t,n,o=ai){const l=t.__wdc||(t.__wdc=()=>{let f=o;for(;f;){if(f.isDeactivated)return;f=f.parent}return t()});if(pl(n,l,o),o){let f=o.parent;for(;f&&f.parent;)Yf(f.parent.vnode)&&qm(l,n,o,f),f=f.parent}}function qm(t,n,o,l){const f=pl(n,t,l,!0);kh(()=>{dh(l[n],f)},o)}function pl(t,n,o=ai,l=!1){if(o){const f=o[t]||(o[t]=[]),p=n.__weh||(n.__weh=(...d)=>{pr();const b=Zo(o),x=En(n,o,t,d);return b(),mr(),x});return l?f.unshift(p):f.push(p),p}}const Zn=t=>(n,o=ai)=>{(!Fo||t==="sp")&&pl(t,(...l)=>n(...l),o)},Km=Zn("bm"),Ho=Zn("m"),Wm=Zn("bu"),Jm=Zn("u"),Ym=Zn("bum"),kh=Zn("um"),Xm=Zn("sp"),Qm=Zn("rtg"),t0=Zn("rtc");function e0(t,n=ai){pl("ec",t,n)}const i0="components";function n0(t,n){return s0(i0,t,!0,n)||t}const r0=Symbol.for("v-ndc");function s0(t,n,o=!0,l=!1){const f=Ri||ai;if(f){const p=f.type;{const b=$0(p,!1);if(b&&(b===n||b===en(n)||b===ll(en(n))))return p}const d=Jh(f[t]||p[t],n)||Jh(f.appContext[t],n);return!d&&l?p:d}}function Jh(t,n){return t&&(t[n]||t[en(n)]||t[ll(en(n))])}function Fr(t,n,o,l){let f;const p=o,d=qt(t);if(d||$e(t)){const b=d&&dr(t);let x=!1;b&&(x=!Qi(t),t=cl(t)),f=new Array(t.length);for(let P=0,E=t.length;P<E;P++)f[P]=n(x?mi(t[P]):t[P],P,void 0,p)}else if(typeof t=="number"){f=new Array(t);for(let b=0;b<t;b++)f[b]=n(b+1,b,void 0,p)}else if(De(t))if(t[Symbol.iterator])f=Array.from(t,(b,x)=>n(b,x,void 0,p));else{const b=Object.keys(t);f=new Array(b.length);for(let x=0,P=b.length;x<P;x++){const E=b[x];f[x]=n(t[E],E,x,p)}}else f=[];return f}const Hu=t=>t?vd(t)?_l(t):Hu(t.parent):null,Mo=yi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Hu(t.parent),$root:t=>Hu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>td(t),$forceUpdate:t=>t.f||(t.f=()=>{Ch(t.update)}),$nextTick:t=>t.n||(t.n=dl.bind(t.proxy)),$watch:t=>M0.bind(t)}),ku=(t,n)=>t!==Se&&!t.__isScriptSetup&&Ee(t,n),o0={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:o,setupState:l,data:f,props:p,accessCache:d,type:b,appContext:x}=t;let P;if(n[0]!=="$"){const j=d[n];if(j!==void 0)switch(j){case 1:return l[n];case 2:return f[n];case 4:return o[n];case 3:return p[n]}else{if(ku(l,n))return d[n]=1,l[n];if(f!==Se&&Ee(f,n))return d[n]=2,f[n];if((P=t.propsOptions[0])&&Ee(P,n))return d[n]=3,p[n];if(o!==Se&&Ee(o,n))return d[n]=4,o[n];Zu&&(d[n]=0)}}const E=Mo[n];let k,F;if(E)return n==="$attrs"&&pi(t.attrs,"get",""),E(t);if((k=b.__cssModules)&&(k=k[n]))return k;if(o!==Se&&Ee(o,n))return d[n]=4,o[n];if(F=x.config.globalProperties,Ee(F,n))return F[n]},set({_:t},n,o){const{data:l,setupState:f,ctx:p}=t;return ku(f,n)?(f[n]=o,!0):l!==Se&&Ee(l,n)?(l[n]=o,!0):Ee(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(p[n]=o,!0)},has({_:{data:t,setupState:n,accessCache:o,ctx:l,appContext:f,propsOptions:p}},d){let b;return!!o[d]||t!==Se&&Ee(t,d)||ku(n,d)||(b=p[0])&&Ee(b,d)||Ee(l,d)||Ee(Mo,d)||Ee(f.config.globalProperties,d)},defineProperty(t,n,o){return o.get!=null?t._.accessCache[n]=0:Ee(o,"value")&&this.set(t,n,o.value,null),Reflect.defineProperty(t,n,o)}};function Yh(t){return qt(t)?t.reduce((n,o)=>(n[o]=null,n),{}):t}let Zu=!0;function a0(t){const n=td(t),o=t.proxy,l=t.ctx;Zu=!1,n.beforeCreate&&Xh(n.beforeCreate,t,"bc");const{data:f,computed:p,methods:d,watch:b,provide:x,inject:P,created:E,beforeMount:k,mounted:F,beforeUpdate:j,updated:q,activated:J,deactivated:st,beforeDestroy:pt,beforeUnmount:bt,destroyed:ft,unmounted:xt,render:St,renderTracked:Nt,renderTriggered:Vt,errorCaptured:vt,serverPrefetch:_t,expose:Dt,inheritAttrs:ne,components:xe,directives:Xe,filters:qe}=n;if(P&&l0(P,l,null),d)for(const Kt in d){const Mt=d[Kt];ee(Mt)&&(l[Kt]=Mt.bind(o))}if(f){const Kt=f.call(o,o);De(Kt)&&(t.data=Hr(Kt))}if(Zu=!0,p)for(const Kt in p){const Mt=p[Kt],vi=ee(Mt)?Mt.bind(o,o):ee(Mt.get)?Mt.get.bind(o,o):wn,zt=!ee(Mt)&&ee(Mt.set)?Mt.set.bind(o):wn,le=Ge({get:vi,set:zt});Object.defineProperty(l,Kt,{enumerable:!0,configurable:!0,get:()=>le.value,set:be=>le.value=be})}if(b)for(const Kt in b)Qf(b[Kt],l,o,Kt);if(x){const Kt=ee(x)?x.call(o):x;Reflect.ownKeys(Kt).forEach(Mt=>{Na(Mt,Kt[Mt])})}E&&Xh(E,t,"c");function re(Kt,Mt){qt(Mt)?Mt.forEach(vi=>Kt(vi.bind(o))):Mt&&Kt(Mt.bind(o))}if(re(Km,k),re(Ho,F),re(Wm,j),re(Jm,q),re(Zm,J),re($m,st),re(e0,vt),re(t0,Nt),re(Qm,Vt),re(Ym,bt),re(kh,xt),re(Xm,_t),qt(Dt))if(Dt.length){const Kt=t.exposed||(t.exposed={});Dt.forEach(Mt=>{Object.defineProperty(Kt,Mt,{get:()=>o[Mt],set:vi=>o[Mt]=vi})})}else t.exposed||(t.exposed={});St&&t.render===wn&&(t.render=St),ne!=null&&(t.inheritAttrs=ne),xe&&(t.components=xe),Xe&&(t.directives=Xe),_t&&Jf(t)}function l0(t,n,o=wn){qt(t)&&(t=$u(t));for(const l in t){const f=t[l];let p;De(f)?"default"in f?p=tn(f.from||l,f.default,!0):p=tn(f.from||l):p=tn(f),Ve(p)?Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:()=>p.value,set:d=>p.value=d}):n[l]=p}}function Xh(t,n,o){En(qt(t)?t.map(l=>l.bind(n.proxy)):t.bind(n.proxy),n,o)}function Qf(t,n,o,l){let f=l.includes(".")?pd(o,l):()=>o[l];if($e(t)){const p=n[t];ee(p)&&Nr(f,p)}else if(ee(t))Nr(f,t.bind(o));else if(De(t))if(qt(t))t.forEach(p=>Qf(p,n,o,l));else{const p=ee(t.handler)?t.handler.bind(o):n[t.handler];ee(p)&&Nr(f,p,t)}}function td(t){const n=t.type,{mixins:o,extends:l}=n,{mixins:f,optionsCache:p,config:{optionMergeStrategies:d}}=t.appContext,b=p.get(n);let x;return b?x=b:!f.length&&!o&&!l?x=n:(x={},f.length&&f.forEach(P=>tl(x,P,d,!0)),tl(x,n,d)),De(n)&&p.set(n,x),x}function tl(t,n,o,l=!1){const{mixins:f,extends:p}=n;p&&tl(t,p,o,!0),f&&f.forEach(d=>tl(t,d,o,!0));for(const d in n)if(!(l&&d==="expose")){const b=u0[d]||o&&o[d];t[d]=b?b(t[d],n[d]):n[d]}return t}const u0={data:Qh,props:tc,emits:tc,methods:bo,computed:bo,beforeCreate:Ei,created:Ei,beforeMount:Ei,mounted:Ei,beforeUpdate:Ei,updated:Ei,beforeDestroy:Ei,beforeUnmount:Ei,destroyed:Ei,unmounted:Ei,activated:Ei,deactivated:Ei,errorCaptured:Ei,serverPrefetch:Ei,components:bo,directives:bo,watch:c0,provide:Qh,inject:h0};function Qh(t,n){return n?t?function(){return yi(ee(t)?t.call(this,this):t,ee(n)?n.call(this,this):n)}:n:t}function h0(t,n){return bo($u(t),$u(n))}function $u(t){if(qt(t)){const n={};for(let o=0;o<t.length;o++)n[t[o]]=t[o];return n}return t}function Ei(t,n){return t?[...new Set([].concat(t,n))]:n}function bo(t,n){return t?yi(Object.create(null),t,n):n}function tc(t,n){return t?qt(t)&&qt(n)?[...new Set([...t,...n])]:yi(Object.create(null),Yh(t),Yh(n??{})):n}function c0(t,n){if(!t)return n;if(!n)return t;const o=yi(Object.create(null),t);for(const l in n)o[l]=Ei(t[l],n[l]);return o}function ed(){return{app:null,config:{isNativeTag:Xp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let f0=0;function d0(t,n){return function(l,f=null){ee(l)||(l=yi({},l)),f!=null&&!De(f)&&(f=null);const p=ed(),d=new WeakSet,b=[];let x=!1;const P=p.app={_uid:f0++,_component:l,_props:f,_container:null,_context:p,_instance:null,version:K0,get config(){return p.config},set config(E){},use(E,...k){return d.has(E)||(E&&ee(E.install)?(d.add(E),E.install(P,...k)):ee(E)&&(d.add(E),E(P,...k))),P},mixin(E){return p.mixins.includes(E)||p.mixins.push(E),P},component(E,k){return k?(p.components[E]=k,P):p.components[E]},directive(E,k){return k?(p.directives[E]=k,P):p.directives[E]},mount(E,k,F){if(!x){const j=P._ceVNode||Ye(l,f);return j.appContext=p,F===!0?F="svg":F===!1&&(F=void 0),t(j,E,F),x=!0,P._container=E,E.__vue_app__=P,_l(j.component)}},onUnmount(E){b.push(E)},unmount(){x&&(En(b,P._instance,16),t(null,P._container),delete P._container.__vue_app__)},provide(E,k){return p.provides[E]=k,P},runWithContext(E){const k=Ir;Ir=P;try{return E()}finally{Ir=k}}};return P}}let Ir=null;function Na(t,n){if(ai){let o=ai.provides;const l=ai.parent&&ai.parent.provides;l===o&&(o=ai.provides=Object.create(l)),o[t]=n}}function tn(t,n,o=!1){const l=ai||Ri;if(l||Ir){const f=Ir?Ir._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(f&&t in f)return f[t];if(arguments.length>1)return o&&ee(n)?n.call(l&&l.proxy):n}}function p0(){return!!(ai||Ri||Ir)}const id={},nd=()=>Object.create(id),rd=t=>Object.getPrototypeOf(t)===id;function m0(t,n,o,l=!1){const f={},p=nd();t.propsDefaults=Object.create(null),sd(t,n,f,p);for(const d in t.propsOptions[0])d in f||(f[d]=void 0);o?t.props=l?f:Uf(f):t.type.props?t.props=f:t.props=p,t.attrs=p}function g0(t,n,o,l){const{props:f,attrs:p,vnode:{patchFlag:d}}=t,b=ve(f),[x]=t.propsOptions;let P=!1;if((l||d>0)&&!(d&16)){if(d&8){const E=t.vnode.dynamicProps;for(let k=0;k<E.length;k++){let F=E[k];if(ml(t.emitsOptions,F))continue;const j=n[F];if(x)if(Ee(p,F))j!==p[F]&&(p[F]=j,P=!0);else{const q=en(F);f[q]=qu(x,b,q,j,t,!1)}else j!==p[F]&&(p[F]=j,P=!0)}}}else{sd(t,n,f,p)&&(P=!0);let E;for(const k in b)(!n||!Ee(n,k)&&((E=Vr(k))===k||!Ee(n,E)))&&(x?o&&(o[k]!==void 0||o[E]!==void 0)&&(f[k]=qu(x,b,k,void 0,t,!0)):delete f[k]);if(p!==b)for(const k in p)(!n||!Ee(n,k))&&(delete p[k],P=!0)}P&&jn(t.attrs,"set","")}function sd(t,n,o,l){const[f,p]=t.propsOptions;let d=!1,b;if(n)for(let x in n){if(xo(x))continue;const P=n[x];let E;f&&Ee(f,E=en(x))?!p||!p.includes(E)?o[E]=P:(b||(b={}))[E]=P:ml(t.emitsOptions,x)||(!(x in l)||P!==l[x])&&(l[x]=P,d=!0)}if(p){const x=ve(o),P=b||Se;for(let E=0;E<p.length;E++){const k=p[E];o[k]=qu(f,x,k,P[k],t,!Ee(P,k))}}return d}function qu(t,n,o,l,f,p){const d=t[o];if(d!=null){const b=Ee(d,"default");if(b&&l===void 0){const x=d.default;if(d.type!==Function&&!d.skipFactory&&ee(x)){const{propsDefaults:P}=f;if(o in P)l=P[o];else{const E=Zo(f);l=P[o]=x.call(null,n),E()}}else l=x;f.ce&&f.ce._setProp(o,l)}d[0]&&(p&&!b?l=!1:d[1]&&(l===""||l===Vr(o))&&(l=!0))}return l}const _0=new WeakMap;function od(t,n,o=!1){const l=o?_0:n.propsCache,f=l.get(t);if(f)return f;const p=t.props,d={},b=[];let x=!1;if(!ee(t)){const E=k=>{x=!0;const[F,j]=od(k,n,!0);yi(d,F),j&&b.push(...j)};!o&&n.mixins.length&&n.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}if(!p&&!x)return De(t)&&l.set(t,Cs),Cs;if(qt(p))for(let E=0;E<p.length;E++){const k=en(p[E]);ec(k)&&(d[k]=Se)}else if(p)for(const E in p){const k=en(E);if(ec(k)){const F=p[E],j=d[k]=qt(F)||ee(F)?{type:F}:yi({},F),q=j.type;let J=!1,st=!0;if(qt(q))for(let pt=0;pt<q.length;++pt){const bt=q[pt],ft=ee(bt)&&bt.name;if(ft==="Boolean"){J=!0;break}else ft==="String"&&(st=!1)}else J=ee(q)&&q.name==="Boolean";j[0]=J,j[1]=st,(J||Ee(j,"default"))&&b.push(k)}}const P=[d,b];return De(t)&&l.set(t,P),P}function ec(t){return t[0]!=="$"&&!xo(t)}const ad=t=>t[0]==="_"||t==="$stable",Mh=t=>qt(t)?t.map(xn):[xn(t)],y0=(t,n,o)=>{if(n._n)return n;const l=Eo((...f)=>Mh(n(...f)),o);return l._c=!1,l},ld=(t,n,o)=>{const l=t._ctx;for(const f in t){if(ad(f))continue;const p=t[f];if(ee(p))n[f]=y0(f,p,l);else if(p!=null){const d=Mh(p);n[f]=()=>d}}},ud=(t,n)=>{const o=Mh(n);t.slots.default=()=>o},hd=(t,n,o)=>{for(const l in n)(o||l!=="_")&&(t[l]=n[l])},v0=(t,n,o)=>{const l=t.slots=nd();if(t.vnode.shapeFlag&32){const f=n._;f?(hd(l,n,o),o&&bf(l,"_",f,!0)):ld(n,l)}else n&&ud(t,n)},b0=(t,n,o)=>{const{vnode:l,slots:f}=t;let p=!0,d=Se;if(l.shapeFlag&32){const b=n._;b?o&&b===1?p=!1:hd(f,n,o):(p=!n.$stable,ld(n,f)),d=n}else n&&(ud(t,n),d={default:1});if(p)for(const b in f)!ad(b)&&d[b]==null&&delete f[b]},zi=R0;function L0(t){return x0(t)}function x0(t,n){const o=ul();o.__VUE__=!0;const{insert:l,remove:f,patchProp:p,createElement:d,createText:b,createComment:x,setText:P,setElementText:E,parentNode:k,nextSibling:F,setScopeId:j=wn,insertStaticContent:q}=t,J=(z,U,Y,ht=null,mt=null,ct=null,Et=void 0,Ct=null,wt=!!U.dynamicChildren)=>{if(z===U)return;z&&!go(z,U)&&(ht=ut(z),be(z,mt,ct,!0),z=null),U.patchFlag===-2&&(wt=!1,U.dynamicChildren=null);const{type:Lt,ref:Zt,shapeFlag:At}=U;switch(Lt){case gl:st(z,U,Y,ht);break;case Ur:pt(z,U,Y,ht);break;case za:z==null&&bt(U,Y,ht,Et);break;case gi:xe(z,U,Y,ht,mt,ct,Et,Ct,wt);break;default:At&1?St(z,U,Y,ht,mt,ct,Et,Ct,wt):At&6?Xe(z,U,Y,ht,mt,ct,Et,Ct,wt):(At&64||At&128)&&Lt.process(z,U,Y,ht,mt,ct,Et,Ct,wt,Ft)}Zt!=null&&mt&&Qa(Zt,z&&z.ref,ct,U||z,!U)},st=(z,U,Y,ht)=>{if(z==null)l(U.el=b(U.children),Y,ht);else{const mt=U.el=z.el;U.children!==z.children&&P(mt,U.children)}},pt=(z,U,Y,ht)=>{z==null?l(U.el=x(U.children||""),Y,ht):U.el=z.el},bt=(z,U,Y,ht)=>{[z.el,z.anchor]=q(z.children,U,Y,ht,z.el,z.anchor)},ft=({el:z,anchor:U},Y,ht)=>{let mt;for(;z&&z!==U;)mt=F(z),l(z,Y,ht),z=mt;l(U,Y,ht)},xt=({el:z,anchor:U})=>{let Y;for(;z&&z!==U;)Y=F(z),f(z),z=Y;f(U)},St=(z,U,Y,ht,mt,ct,Et,Ct,wt)=>{U.type==="svg"?Et="svg":U.type==="math"&&(Et="mathml"),z==null?Nt(U,Y,ht,mt,ct,Et,Ct,wt):_t(z,U,mt,ct,Et,Ct,wt)},Nt=(z,U,Y,ht,mt,ct,Et,Ct)=>{let wt,Lt;const{props:Zt,shapeFlag:At,transition:Ut,dirs:Jt}=z;if(wt=z.el=d(z.type,ct,Zt&&Zt.is,Zt),At&8?E(wt,z.children):At&16&&vt(z.children,wt,null,ht,mt,Mu(z,ct),Et,Ct),Jt&&Ar(z,null,ht,"created"),Vt(wt,z,z.scopeId,Et,ht),Zt){for(const Le in Zt)Le!=="value"&&!xo(Le)&&p(wt,Le,null,Zt[Le],ct,ht);"value"in Zt&&p(wt,"value",null,Zt.value,ct),(Lt=Zt.onVnodeBeforeMount)&&vn(Lt,ht,z)}Jt&&Ar(z,null,ht,"beforeMount");const se=w0(mt,Ut);se&&Ut.beforeEnter(wt),l(wt,U,Y),((Lt=Zt&&Zt.onVnodeMounted)||se||Jt)&&zi(()=>{Lt&&vn(Lt,ht,z),se&&Ut.enter(wt),Jt&&Ar(z,null,ht,"mounted")},mt)},Vt=(z,U,Y,ht,mt)=>{if(Y&&j(z,Y),ht)for(let ct=0;ct<ht.length;ct++)j(z,ht[ct]);if(mt){let ct=mt.subTree;if(U===ct||gd(ct.type)&&(ct.ssContent===U||ct.ssFallback===U)){const Et=mt.vnode;Vt(z,Et,Et.scopeId,Et.slotScopeIds,mt.parent)}}},vt=(z,U,Y,ht,mt,ct,Et,Ct,wt=0)=>{for(let Lt=wt;Lt<z.length;Lt++){const Zt=z[Lt]=Ct?lr(z[Lt]):xn(z[Lt]);J(null,Zt,U,Y,ht,mt,ct,Et,Ct)}},_t=(z,U,Y,ht,mt,ct,Et)=>{const Ct=U.el=z.el;let{patchFlag:wt,dynamicChildren:Lt,dirs:Zt}=U;wt|=z.patchFlag&16;const At=z.props||Se,Ut=U.props||Se;let Jt;if(Y&&Tr(Y,!1),(Jt=Ut.onVnodeBeforeUpdate)&&vn(Jt,Y,U,z),Zt&&Ar(U,z,Y,"beforeUpdate"),Y&&Tr(Y,!0),(At.innerHTML&&Ut.innerHTML==null||At.textContent&&Ut.textContent==null)&&E(Ct,""),Lt?Dt(z.dynamicChildren,Lt,Ct,Y,ht,Mu(U,mt),ct):Et||Mt(z,U,Ct,null,Y,ht,Mu(U,mt),ct,!1),wt>0){if(wt&16)ne(Ct,At,Ut,Y,mt);else if(wt&2&&At.class!==Ut.class&&p(Ct,"class",null,Ut.class,mt),wt&4&&p(Ct,"style",At.style,Ut.style,mt),wt&8){const se=U.dynamicProps;for(let Le=0;Le<se.length;Le++){const pe=se[Le],Qe=At[pe],He=Ut[pe];(He!==Qe||pe==="value")&&p(Ct,pe,Qe,He,mt,Y)}}wt&1&&z.children!==U.children&&E(Ct,U.children)}else!Et&&Lt==null&&ne(Ct,At,Ut,Y,mt);((Jt=Ut.onVnodeUpdated)||Zt)&&zi(()=>{Jt&&vn(Jt,Y,U,z),Zt&&Ar(U,z,Y,"updated")},ht)},Dt=(z,U,Y,ht,mt,ct,Et)=>{for(let Ct=0;Ct<U.length;Ct++){const wt=z[Ct],Lt=U[Ct],Zt=wt.el&&(wt.type===gi||!go(wt,Lt)||wt.shapeFlag&70)?k(wt.el):Y;J(wt,Lt,Zt,null,ht,mt,ct,Et,!0)}},ne=(z,U,Y,ht,mt)=>{if(U!==Y){if(U!==Se)for(const ct in U)!xo(ct)&&!(ct in Y)&&p(z,ct,U[ct],null,mt,ht);for(const ct in Y){if(xo(ct))continue;const Et=Y[ct],Ct=U[ct];Et!==Ct&&ct!=="value"&&p(z,ct,Ct,Et,mt,ht)}"value"in Y&&p(z,"value",U.value,Y.value,mt)}},xe=(z,U,Y,ht,mt,ct,Et,Ct,wt)=>{const Lt=U.el=z?z.el:b(""),Zt=U.anchor=z?z.anchor:b("");let{patchFlag:At,dynamicChildren:Ut,slotScopeIds:Jt}=U;Jt&&(Ct=Ct?Ct.concat(Jt):Jt),z==null?(l(Lt,Y,ht),l(Zt,Y,ht),vt(U.children||[],Y,Zt,mt,ct,Et,Ct,wt)):At>0&&At&64&&Ut&&z.dynamicChildren?(Dt(z.dynamicChildren,Ut,Y,mt,ct,Et,Ct),(U.key!=null||mt&&U===mt.subTree)&&cd(z,U,!0)):Mt(z,U,Y,Zt,mt,ct,Et,Ct,wt)},Xe=(z,U,Y,ht,mt,ct,Et,Ct,wt)=>{U.slotScopeIds=Ct,z==null?U.shapeFlag&512?mt.ctx.activate(U,Y,ht,Et,wt):qe(U,Y,ht,mt,ct,Et,wt):Vi(z,U,wt)},qe=(z,U,Y,ht,mt,ct,Et)=>{const Ct=z.component=U0(z,ht,mt);if(Yf(z)&&(Ct.ctx.renderer=Ft),G0(Ct,!1,Et),Ct.asyncDep){if(mt&&mt.registerDep(Ct,re,Et),!z.el){const wt=Ct.subTree=Ye(Ur);pt(null,wt,U,Y)}}else re(Ct,z,U,Y,mt,ct,Et)},Vi=(z,U,Y)=>{const ht=U.component=z.component;if(T0(z,U,Y))if(ht.asyncDep&&!ht.asyncResolved){Kt(ht,U,Y);return}else ht.next=U,ht.update();else U.el=z.el,ht.vnode=U},re=(z,U,Y,ht,mt,ct,Et)=>{const Ct=()=>{if(z.isMounted){let{next:At,bu:Ut,u:Jt,parent:se,vnode:Le}=z;{const Ke=fd(z);if(Ke){At&&(At.el=Le.el,Kt(z,At,Et)),Ke.asyncDep.then(()=>{z.isUnmounted||Ct()});return}}let pe=At,Qe;Tr(z,!1),At?(At.el=Le.el,Kt(z,At,Et)):At=Le,Ut&&Ia(Ut),(Qe=At.props&&At.props.onVnodeBeforeUpdate)&&vn(Qe,se,At,Le),Tr(z,!0);const He=nc(z),bi=z.subTree;z.subTree=He,J(bi,He,k(bi.el),ut(bi),z,mt,ct),At.el=He.el,pe===null&&D0(z,He.el),Jt&&zi(Jt,mt),(Qe=At.props&&At.props.onVnodeUpdated)&&zi(()=>vn(Qe,se,At,Le),mt)}else{let At;const{el:Ut,props:Jt}=U,{bm:se,m:Le,parent:pe,root:Qe,type:He}=z,bi=ko(U);Tr(z,!1),se&&Ia(se),!bi&&(At=Jt&&Jt.onVnodeBeforeMount)&&vn(At,pe,U),Tr(z,!0);{Qe.ce&&Qe.ce._injectChildStyle(He);const Ke=z.subTree=nc(z);J(null,Ke,Y,ht,z,mt,ct),U.el=Ke.el}if(Le&&zi(Le,mt),!bi&&(At=Jt&&Jt.onVnodeMounted)){const Ke=U;zi(()=>vn(At,pe,Ke),mt)}(U.shapeFlag&256||pe&&ko(pe.vnode)&&pe.vnode.shapeFlag&256)&&z.a&&zi(z.a,mt),z.isMounted=!0,U=Y=ht=null}};z.scope.on();const wt=z.effect=new Mf(Ct);z.scope.off();const Lt=z.update=wt.run.bind(wt),Zt=z.job=wt.runIfDirty.bind(wt);Zt.i=z,Zt.id=z.uid,wt.scheduler=()=>Ch(Zt),Tr(z,!0),Lt()},Kt=(z,U,Y)=>{U.component=z;const ht=z.vnode.props;z.vnode=U,z.next=null,g0(z,U.props,ht,Y),b0(z,U.children,Y),pr(),Wh(z),mr()},Mt=(z,U,Y,ht,mt,ct,Et,Ct,wt=!1)=>{const Lt=z&&z.children,Zt=z?z.shapeFlag:0,At=U.children,{patchFlag:Ut,shapeFlag:Jt}=U;if(Ut>0){if(Ut&128){zt(Lt,At,Y,ht,mt,ct,Et,Ct,wt);return}else if(Ut&256){vi(Lt,At,Y,ht,mt,ct,Et,Ct,wt);return}}Jt&8?(Zt&16&&Wt(Lt,mt,ct),At!==Lt&&E(Y,At)):Zt&16?Jt&16?zt(Lt,At,Y,ht,mt,ct,Et,Ct,wt):Wt(Lt,mt,ct,!0):(Zt&8&&E(Y,""),Jt&16&&vt(At,Y,ht,mt,ct,Et,Ct,wt))},vi=(z,U,Y,ht,mt,ct,Et,Ct,wt)=>{z=z||Cs,U=U||Cs;const Lt=z.length,Zt=U.length,At=Math.min(Lt,Zt);let Ut;for(Ut=0;Ut<At;Ut++){const Jt=U[Ut]=wt?lr(U[Ut]):xn(U[Ut]);J(z[Ut],Jt,Y,null,mt,ct,Et,Ct,wt)}Lt>Zt?Wt(z,mt,ct,!0,!1,At):vt(U,Y,ht,mt,ct,Et,Ct,wt,At)},zt=(z,U,Y,ht,mt,ct,Et,Ct,wt)=>{let Lt=0;const Zt=U.length;let At=z.length-1,Ut=Zt-1;for(;Lt<=At&&Lt<=Ut;){const Jt=z[Lt],se=U[Lt]=wt?lr(U[Lt]):xn(U[Lt]);if(go(Jt,se))J(Jt,se,Y,null,mt,ct,Et,Ct,wt);else break;Lt++}for(;Lt<=At&&Lt<=Ut;){const Jt=z[At],se=U[Ut]=wt?lr(U[Ut]):xn(U[Ut]);if(go(Jt,se))J(Jt,se,Y,null,mt,ct,Et,Ct,wt);else break;At--,Ut--}if(Lt>At){if(Lt<=Ut){const Jt=Ut+1,se=Jt<Zt?U[Jt].el:ht;for(;Lt<=Ut;)J(null,U[Lt]=wt?lr(U[Lt]):xn(U[Lt]),Y,se,mt,ct,Et,Ct,wt),Lt++}}else if(Lt>Ut)for(;Lt<=At;)be(z[Lt],mt,ct,!0),Lt++;else{const Jt=Lt,se=Lt,Le=new Map;for(Lt=se;Lt<=Ut;Lt++){const Ne=U[Lt]=wt?lr(U[Lt]):xn(U[Lt]);Ne.key!=null&&Le.set(Ne.key,Lt)}let pe,Qe=0;const He=Ut-se+1;let bi=!1,Ke=0;const cn=new Array(He);for(Lt=0;Lt<He;Lt++)cn[Lt]=0;for(Lt=Jt;Lt<=At;Lt++){const Ne=z[Lt];if(Qe>=He){be(Ne,mt,ct,!0);continue}let Li;if(Ne.key!=null)Li=Le.get(Ne.key);else for(pe=se;pe<=Ut;pe++)if(cn[pe-se]===0&&go(Ne,U[pe])){Li=pe;break}Li===void 0?be(Ne,mt,ct,!0):(cn[Li-se]=Lt+1,Li>=Ke?Ke=Li:bi=!0,J(Ne,U[Li],Y,null,mt,ct,Et,Ct,wt),Qe++)}const kn=bi?C0(cn):Cs;for(pe=kn.length-1,Lt=He-1;Lt>=0;Lt--){const Ne=se+Lt,Li=U[Ne],Hi=Ne+1<Zt?U[Ne+1].el:ht;cn[Lt]===0?J(null,Li,Y,Hi,mt,ct,Et,Ct,wt):bi&&(pe<0||Lt!==kn[pe]?le(Li,Y,Hi,2):pe--)}}},le=(z,U,Y,ht,mt=null)=>{const{el:ct,type:Et,transition:Ct,children:wt,shapeFlag:Lt}=z;if(Lt&6){le(z.component.subTree,U,Y,ht);return}if(Lt&128){z.suspense.move(U,Y,ht);return}if(Lt&64){Et.move(z,U,Y,Ft);return}if(Et===gi){l(ct,U,Y);for(let At=0;At<wt.length;At++)le(wt[At],U,Y,ht);l(z.anchor,U,Y);return}if(Et===za){ft(z,U,Y);return}if(ht!==2&&Lt&1&&Ct)if(ht===0)Ct.beforeEnter(ct),l(ct,U,Y),zi(()=>Ct.enter(ct),mt);else{const{leave:At,delayLeave:Ut,afterLeave:Jt}=Ct,se=()=>l(ct,U,Y),Le=()=>{At(ct,()=>{se(),Jt&&Jt()})};Ut?Ut(ct,se,Le):Le()}else l(ct,U,Y)},be=(z,U,Y,ht=!1,mt=!1)=>{const{type:ct,props:Et,ref:Ct,children:wt,dynamicChildren:Lt,shapeFlag:Zt,patchFlag:At,dirs:Ut,cacheIndex:Jt}=z;if(At===-2&&(mt=!1),Ct!=null&&Qa(Ct,null,Y,z,!0),Jt!=null&&(U.renderCache[Jt]=void 0),Zt&256){U.ctx.deactivate(z);return}const se=Zt&1&&Ut,Le=!ko(z);let pe;if(Le&&(pe=Et&&Et.onVnodeBeforeUnmount)&&vn(pe,U,z),Zt&6)fe(z.component,Y,ht);else{if(Zt&128){z.suspense.unmount(Y,ht);return}se&&Ar(z,null,U,"beforeUnmount"),Zt&64?z.type.remove(z,U,Y,Ft,ht):Lt&&!Lt.hasOnce&&(ct!==gi||At>0&&At&64)?Wt(Lt,U,Y,!1,!0):(ct===gi&&At&384||!mt&&Zt&16)&&Wt(wt,U,Y),ht&&Oe(z)}(Le&&(pe=Et&&Et.onVnodeUnmounted)||se)&&zi(()=>{pe&&vn(pe,U,z),se&&Ar(z,null,U,"unmounted")},Y)},Oe=z=>{const{type:U,el:Y,anchor:ht,transition:mt}=z;if(U===gi){ke(Y,ht);return}if(U===za){xt(z);return}const ct=()=>{f(Y),mt&&!mt.persisted&&mt.afterLeave&&mt.afterLeave()};if(z.shapeFlag&1&&mt&&!mt.persisted){const{leave:Et,delayLeave:Ct}=mt,wt=()=>Et(Y,ct);Ct?Ct(z.el,ct,wt):wt()}else ct()},ke=(z,U)=>{let Y;for(;z!==U;)Y=F(z),f(z),z=Y;f(U)},fe=(z,U,Y)=>{const{bum:ht,scope:mt,job:ct,subTree:Et,um:Ct,m:wt,a:Lt}=z;ic(wt),ic(Lt),ht&&Ia(ht),mt.stop(),ct&&(ct.flags|=8,be(Et,z,U,Y)),Ct&&zi(Ct,U),zi(()=>{z.isUnmounted=!0},U),U&&U.pendingBranch&&!U.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===U.pendingId&&(U.deps--,U.deps===0&&U.resolve())},Wt=(z,U,Y,ht=!1,mt=!1,ct=0)=>{for(let Et=ct;Et<z.length;Et++)be(z[Et],U,Y,ht,mt)},ut=z=>{if(z.shapeFlag&6)return ut(z.component.subTree);if(z.shapeFlag&128)return z.suspense.next();const U=F(z.anchor||z.el),Y=U&&U[Vm];return Y?F(Y):U};let Pt=!1;const kt=(z,U,Y)=>{z==null?U._vnode&&be(U._vnode,null,null,!0):J(U._vnode||null,z,U,null,null,null,Y),U._vnode=z,Pt||(Pt=!0,Wh(),qf(),Pt=!1)},Ft={p:J,um:be,m:le,r:Oe,mt:qe,mc:vt,pc:Mt,pbc:Dt,n:ut,o:t};return{render:kt,hydrate:void 0,createApp:d0(kt)}}function Mu({type:t,props:n},o){return o==="svg"&&t==="foreignObject"||o==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:o}function Tr({effect:t,job:n},o){o?(t.flags|=32,n.flags|=4):(t.flags&=-33,n.flags&=-5)}function w0(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function cd(t,n,o=!1){const l=t.children,f=n.children;if(qt(l)&&qt(f))for(let p=0;p<l.length;p++){const d=l[p];let b=f[p];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=f[p]=lr(f[p]),b.el=d.el),!o&&b.patchFlag!==-2&&cd(d,b)),b.type===gl&&(b.el=d.el)}}function C0(t){const n=t.slice(),o=[0];let l,f,p,d,b;const x=t.length;for(l=0;l<x;l++){const P=t[l];if(P!==0){if(f=o[o.length-1],t[f]<P){n[l]=f,o.push(l);continue}for(p=0,d=o.length-1;p<d;)b=p+d>>1,t[o[b]]<P?p=b+1:d=b;P<t[o[p]]&&(p>0&&(n[l]=o[p-1]),o[p]=l)}}for(p=o.length,d=o[p-1];p-- >0;)o[p]=d,d=n[d];return o}function fd(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:fd(n)}function ic(t){if(t)for(let n=0;n<t.length;n++)t[n].flags|=8}const E0=Symbol.for("v-scx"),k0=()=>tn(E0);function Nr(t,n,o){return dd(t,n,o)}function dd(t,n,o=Se){const{immediate:l,deep:f,flush:p,once:d}=o,b=yi({},o),x=n&&l||!n&&p!=="post";let P;if(Fo){if(p==="sync"){const j=k0();P=j.__watcherHandles||(j.__watcherHandles=[])}else if(!x){const j=()=>{};return j.stop=wn,j.resume=wn,j.pause=wn,j}}const E=ai;b.call=(j,q,J)=>En(j,E,q,J);let k=!1;p==="post"?b.scheduler=j=>{zi(j,E&&E.suspense)}:p!=="sync"&&(k=!0,b.scheduler=(j,q)=>{q?j():Ch(j)}),b.augmentJob=j=>{n&&(j.flags|=4),k&&(j.flags|=2,E&&(j.id=E.uid,j.i=E))};const F=zm(t,n,b);return Fo&&(P?P.push(F):x&&F()),F}function M0(t,n,o){const l=this.proxy,f=$e(t)?t.includes(".")?pd(l,t):()=>l[t]:t.bind(l,l);let p;ee(n)?p=n:(p=n.handler,o=n);const d=Zo(this),b=dd(f,p.bind(l),o);return d(),b}function pd(t,n){const o=n.split(".");return()=>{let l=t;for(let f=0;f<o.length&&l;f++)l=l[o[f]];return l}}const P0=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${en(n)}Modifiers`]||t[`${Vr(n)}Modifiers`];function B0(t,n,...o){if(t.isUnmounted)return;const l=t.vnode.props||Se;let f=o;const p=n.startsWith("update:"),d=p&&P0(l,n.slice(7));d&&(d.trim&&(f=o.map(E=>$e(E)?E.trim():E)),d.number&&(f=o.map(Ka)));let b,x=l[b=Lu(n)]||l[b=Lu(en(n))];!x&&p&&(x=l[b=Lu(Vr(n))]),x&&En(x,t,6,f);const P=l[b+"Once"];if(P){if(!t.emitted)t.emitted={};else if(t.emitted[b])return;t.emitted[b]=!0,En(P,t,6,f)}}function md(t,n,o=!1){const l=n.emitsCache,f=l.get(t);if(f!==void 0)return f;const p=t.emits;let d={},b=!1;if(!ee(t)){const x=P=>{const E=md(P,n,!0);E&&(b=!0,yi(d,E))};!o&&n.mixins.length&&n.mixins.forEach(x),t.extends&&x(t.extends),t.mixins&&t.mixins.forEach(x)}return!p&&!b?(De(t)&&l.set(t,null),null):(qt(p)?p.forEach(x=>d[x]=null):yi(d,p),De(t)&&l.set(t,d),d)}function ml(t,n){return!t||!ol(n)?!1:(n=n.slice(2).replace(/Once$/,""),Ee(t,n[0].toLowerCase()+n.slice(1))||Ee(t,Vr(n))||Ee(t,n))}function nc(t){const{type:n,vnode:o,proxy:l,withProxy:f,propsOptions:[p],slots:d,attrs:b,emit:x,render:P,renderCache:E,props:k,data:F,setupState:j,ctx:q,inheritAttrs:J}=t,st=Xa(t);let pt,bt;try{if(o.shapeFlag&4){const xt=f||l,St=xt;pt=xn(P.call(St,xt,E,k,j,F,q)),bt=b}else{const xt=n;pt=xn(xt.length>1?xt(k,{attrs:b,slots:d,emit:x}):xt(k,null)),bt=n.props?b:S0(b)}}catch(xt){Po.length=0,fl(xt,t,1),pt=Ye(Ur)}let ft=pt;if(bt&&J!==!1){const xt=Object.keys(bt),{shapeFlag:St}=ft;xt.length&&St&7&&(p&&xt.some(fh)&&(bt=A0(bt,p)),ft=Ps(ft,bt,!1,!0))}return o.dirs&&(ft=Ps(ft,null,!1,!0),ft.dirs=ft.dirs?ft.dirs.concat(o.dirs):o.dirs),o.transition&&Eh(ft,o.transition),pt=ft,Xa(st),pt}const S0=t=>{let n;for(const o in t)(o==="class"||o==="style"||ol(o))&&((n||(n={}))[o]=t[o]);return n},A0=(t,n)=>{const o={};for(const l in t)(!fh(l)||!(l.slice(9)in n))&&(o[l]=t[l]);return o};function T0(t,n,o){const{props:l,children:f,component:p}=t,{props:d,children:b,patchFlag:x}=n,P=p.emitsOptions;if(n.dirs||n.transition)return!0;if(o&&x>=0){if(x&1024)return!0;if(x&16)return l?rc(l,d,P):!!d;if(x&8){const E=n.dynamicProps;for(let k=0;k<E.length;k++){const F=E[k];if(d[F]!==l[F]&&!ml(P,F))return!0}}}else return(f||b)&&(!b||!b.$stable)?!0:l===d?!1:l?d?rc(l,d,P):!0:!!d;return!1}function rc(t,n,o){const l=Object.keys(n);if(l.length!==Object.keys(t).length)return!0;for(let f=0;f<l.length;f++){const p=l[f];if(n[p]!==t[p]&&!ml(o,p))return!0}return!1}function D0({vnode:t,parent:n},o){for(;n;){const l=n.subTree;if(l.suspense&&l.suspense.activeBranch===t&&(l.el=t.el),l===t)(t=n.vnode).el=o,n=n.parent;else break}}const gd=t=>t.__isSuspense;function R0(t,n){n&&n.pendingBranch?qt(t)?n.effects.push(...t):n.effects.push(t):Gm(t)}const gi=Symbol.for("v-fgt"),gl=Symbol.for("v-txt"),Ur=Symbol.for("v-cmt"),za=Symbol.for("v-stc"),Po=[];let Ui=null;function he(t=!1){Po.push(Ui=t?null:[])}function O0(){Po.pop(),Ui=Po[Po.length-1]||null}let Oo=1;function sc(t,n=!1){Oo+=t,t<0&&Ui&&n&&(Ui.hasOnce=!0)}function _d(t){return t.dynamicChildren=Oo>0?Ui||Cs:null,O0(),Oo>0&&Ui&&Ui.push(t),t}function ye(t,n,o,l,f,p){return _d(lt(t,n,o,l,f,p,!0))}function Ku(t,n,o,l,f){return _d(Ye(t,n,o,l,f,!0))}function el(t){return t?t.__v_isVNode===!0:!1}function go(t,n){return t.type===n.type&&t.key===n.key}const yd=({key:t})=>t??null,ja=({ref:t,ref_key:n,ref_for:o})=>(typeof t=="number"&&(t=""+t),t!=null?$e(t)||Ve(t)||ee(t)?{i:Ri,r:t,k:n,f:!!o}:t:null);function lt(t,n=null,o=null,l=0,f=null,p=t===gi?0:1,d=!1,b=!1){const x={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&yd(n),ref:n&&ja(n),scopeId:Wf,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:l,dynamicProps:f,dynamicChildren:null,appContext:null,ctx:Ri};return b?(Ph(x,o),p&128&&t.normalize(x)):o&&(x.shapeFlag|=$e(o)?8:16),Oo>0&&!d&&Ui&&(x.patchFlag>0||p&6)&&x.patchFlag!==32&&Ui.push(x),x}const Ye=F0;function F0(t,n=null,o=null,l=0,f=null,p=!1){if((!t||t===r0)&&(t=Ur),el(t)){const b=Ps(t,n,!0);return o&&Ph(b,o),Oo>0&&!p&&Ui&&(b.shapeFlag&6?Ui[Ui.indexOf(t)]=b:Ui.push(b)),b.patchFlag=-2,b}if(q0(t)&&(t=t.__vccOpts),n){n=I0(n);let{class:b,style:x}=n;b&&!$e(b)&&(n.class=Ms(b)),De(x)&&(xh(x)&&!qt(x)&&(x=yi({},x)),n.style=hl(x))}const d=$e(t)?1:gd(t)?128:Hm(t)?64:De(t)?4:ee(t)?2:0;return lt(t,n,o,l,f,d,p,!0)}function I0(t){return t?xh(t)||rd(t)?yi({},t):t:null}function Ps(t,n,o=!1,l=!1){const{props:f,ref:p,patchFlag:d,children:b,transition:x}=t,P=n?N0(f||{},n):f,E={__v_isVNode:!0,__v_skip:!0,type:t.type,props:P,key:P&&yd(P),ref:n&&n.ref?o&&p?qt(p)?p.concat(ja(n)):[p,ja(n)]:ja(n):p,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:b,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==gi?d===-1?16:d|16:d,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:x,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ps(t.ssContent),ssFallback:t.ssFallback&&Ps(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return x&&l&&Eh(E,x.clone(E)),E}function Vn(t=" ",n=0){return Ye(gl,null,t,n)}function rL(t,n){const o=Ye(za,null,t);return o.staticCount=n,o}function di(t="",n=!1){return n?(he(),Ku(Ur,null,t)):Ye(Ur,null,t)}function xn(t){return t==null||typeof t=="boolean"?Ye(Ur):qt(t)?Ye(gi,null,t.slice()):el(t)?lr(t):Ye(gl,null,String(t))}function lr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ps(t)}function Ph(t,n){let o=0;const{shapeFlag:l}=t;if(n==null)n=null;else if(qt(n))o=16;else if(typeof n=="object")if(l&65){const f=n.default;f&&(f._c&&(f._d=!1),Ph(t,f()),f._c&&(f._d=!0));return}else{o=32;const f=n._;!f&&!rd(n)?n._ctx=Ri:f===3&&Ri&&(Ri.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else ee(n)?(n={default:n,_ctx:Ri},o=32):(n=String(n),l&64?(o=16,n=[Vn(n)]):o=8);t.children=n,t.shapeFlag|=o}function N0(...t){const n={};for(let o=0;o<t.length;o++){const l=t[o];for(const f in l)if(f==="class")n.class!==l.class&&(n.class=Ms([n.class,l.class]));else if(f==="style")n.style=hl([n.style,l.style]);else if(ol(f)){const p=n[f],d=l[f];d&&p!==d&&!(qt(p)&&p.includes(d))&&(n[f]=p?[].concat(p,d):d)}else f!==""&&(n[f]=l[f])}return n}function vn(t,n,o,l=null){En(t,n,7,[o,l])}const z0=ed();let j0=0;function U0(t,n,o){const l=t.type,f=(n?n.appContext:t.appContext)||z0,p={uid:j0++,vnode:t,type:l,parent:n,appContext:f,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Cf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(f.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:od(l,f),emitsOptions:md(l,f),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:l.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=n?n.root:p,p.emit=B0.bind(null,p),t.ce&&t.ce(p),p}let ai=null,il,Wu;{const t=ul(),n=(o,l)=>{let f;return(f=t[o])||(f=t[o]=[]),f.push(l),p=>{f.length>1?f.forEach(d=>d(p)):f[0](p)}};il=n("__VUE_INSTANCE_SETTERS__",o=>ai=o),Wu=n("__VUE_SSR_SETTERS__",o=>Fo=o)}const Zo=t=>{const n=ai;return il(t),t.scope.on(),()=>{t.scope.off(),il(n)}},oc=()=>{ai&&ai.scope.off(),il(null)};function vd(t){return t.vnode.shapeFlag&4}let Fo=!1;function G0(t,n=!1,o=!1){n&&Wu(n);const{props:l,children:f}=t.vnode,p=vd(t);m0(t,l,p,n),v0(t,f,o);const d=p?V0(t,n):void 0;return n&&Wu(!1),d}function V0(t,n){const o=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,o0);const{setup:l}=o;if(l){pr();const f=t.setupContext=l.length>1?Z0(t):null,p=Zo(t),d=Vo(l,t,0,[t.props,f]),b=_f(d);if(mr(),p(),(b||t.sp)&&!ko(t)&&Jf(t),b){if(d.then(oc,oc),n)return d.then(x=>{ac(t,x)}).catch(x=>{fl(x,t,0)});t.asyncDep=d}else ac(t,d)}else bd(t)}function ac(t,n,o){ee(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:De(n)&&(t.setupState=Hf(n)),bd(t)}function bd(t,n,o){const l=t.type;t.render||(t.render=l.render||wn);{const f=Zo(t);pr();try{a0(t)}finally{mr(),f()}}}const H0={get(t,n){return pi(t,"get",""),t[n]}};function Z0(t){const n=o=>{t.exposed=o||{}};return{attrs:new Proxy(t.attrs,H0),slots:t.slots,emit:t.emit,expose:n}}function _l(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Hf(wh(t.exposed)),{get(n,o){if(o in n)return n[o];if(o in Mo)return Mo[o](t)},has(n,o){return o in n||o in Mo}})):t.proxy}function $0(t,n=!0){return ee(t)?t.displayName||t.name:t.name||n&&t.__name}function q0(t){return ee(t)&&"__vccOpts"in t}const Ge=(t,n)=>Im(t,n,Fo);function Ld(t,n,o){const l=arguments.length;return l===2?De(n)&&!qt(n)?el(n)?Ye(t,null,[n]):Ye(t,n):Ye(t,null,n):(l>3?o=Array.prototype.slice.call(arguments,2):l===3&&el(o)&&(o=[o]),Ye(t,n,o))}const K0="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ju;const lc=typeof window<"u"&&window.trustedTypes;if(lc)try{Ju=lc.createPolicy("vue",{createHTML:t=>t})}catch{}const xd=Ju?t=>Ju.createHTML(t):t=>t,W0="http://www.w3.org/2000/svg",J0="http://www.w3.org/1998/Math/MathML",zn=typeof document<"u"?document:null,uc=zn&&zn.createElement("template"),Y0={insert:(t,n,o)=>{n.insertBefore(t,o||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,o,l)=>{const f=n==="svg"?zn.createElementNS(W0,t):n==="mathml"?zn.createElementNS(J0,t):o?zn.createElement(t,{is:o}):zn.createElement(t);return t==="select"&&l&&l.multiple!=null&&f.setAttribute("multiple",l.multiple),f},createText:t=>zn.createTextNode(t),createComment:t=>zn.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>zn.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,o,l,f,p){const d=o?o.previousSibling:n.lastChild;if(f&&(f===p||f.nextSibling))for(;n.insertBefore(f.cloneNode(!0),o),!(f===p||!(f=f.nextSibling)););else{uc.innerHTML=xd(l==="svg"?`<svg>${t}</svg>`:l==="mathml"?`<math>${t}</math>`:t);const b=uc.content;if(l==="svg"||l==="mathml"){const x=b.firstChild;for(;x.firstChild;)b.appendChild(x.firstChild);b.removeChild(x)}n.insertBefore(b,o)}return[d?d.nextSibling:n.firstChild,o?o.previousSibling:n.lastChild]}},X0=Symbol("_vtc");function Q0(t,n,o){const l=t[X0];l&&(n=(n?[n,...l]:[...l]).join(" ")),n==null?t.removeAttribute("class"):o?t.setAttribute("class",n):t.className=n}const hc=Symbol("_vod"),tg=Symbol("_vsh"),eg=Symbol(""),ig=/(^|;)\s*display\s*:/;function ng(t,n,o){const l=t.style,f=$e(o);let p=!1;if(o&&!f){if(n)if($e(n))for(const d of n.split(";")){const b=d.slice(0,d.indexOf(":")).trim();o[b]==null&&Ua(l,b,"")}else for(const d in n)o[d]==null&&Ua(l,d,"");for(const d in o)d==="display"&&(p=!0),Ua(l,d,o[d])}else if(f){if(n!==o){const d=l[eg];d&&(o+=";"+d),l.cssText=o,p=ig.test(o)}}else n&&t.removeAttribute("style");hc in t&&(t[hc]=p?l.display:"",t[tg]&&(l.display="none"))}const cc=/\s*!important$/;function Ua(t,n,o){if(qt(o))o.forEach(l=>Ua(t,n,l));else if(o==null&&(o=""),n.startsWith("--"))t.setProperty(n,o);else{const l=rg(t,n);cc.test(o)?t.setProperty(Vr(l),o.replace(cc,""),"important"):t[l]=o}}const fc=["Webkit","Moz","ms"],Pu={};function rg(t,n){const o=Pu[n];if(o)return o;let l=en(n);if(l!=="filter"&&l in t)return Pu[n]=l;l=ll(l);for(let f=0;f<fc.length;f++){const p=fc[f]+l;if(p in t)return Pu[n]=p}return n}const dc="http://www.w3.org/1999/xlink";function pc(t,n,o,l,f,p=lm(n)){l&&n.startsWith("xlink:")?o==null?t.removeAttributeNS(dc,n.slice(6,n.length)):t.setAttributeNS(dc,n,o):o==null||p&&!Lf(o)?t.removeAttribute(n):t.setAttribute(n,p?"":Cn(o)?String(o):o)}function mc(t,n,o,l,f){if(n==="innerHTML"||n==="textContent"){o!=null&&(t[n]=n==="innerHTML"?xd(o):o);return}const p=t.tagName;if(n==="value"&&p!=="PROGRESS"&&!p.includes("-")){const b=p==="OPTION"?t.getAttribute("value")||"":t.value,x=o==null?t.type==="checkbox"?"on":"":String(o);(b!==x||!("_value"in t))&&(t.value=x),o==null&&t.removeAttribute(n),t._value=o;return}let d=!1;if(o===""||o==null){const b=typeof t[n];b==="boolean"?o=Lf(o):o==null&&b==="string"?(o="",d=!0):b==="number"&&(o=0,d=!0)}try{t[n]=o}catch{}d&&t.removeAttribute(f||n)}function hr(t,n,o,l){t.addEventListener(n,o,l)}function sg(t,n,o,l){t.removeEventListener(n,o,l)}const gc=Symbol("_vei");function og(t,n,o,l,f=null){const p=t[gc]||(t[gc]={}),d=p[n];if(l&&d)d.value=l;else{const[b,x]=ag(n);if(l){const P=p[n]=hg(l,f);hr(t,b,P,x)}else d&&(sg(t,b,d,x),p[n]=void 0)}}const _c=/(?:Once|Passive|Capture)$/;function ag(t){let n;if(_c.test(t)){n={};let l;for(;l=t.match(_c);)t=t.slice(0,t.length-l[0].length),n[l[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Vr(t.slice(2)),n]}let Bu=0;const lg=Promise.resolve(),ug=()=>Bu||(lg.then(()=>Bu=0),Bu=Date.now());function hg(t,n){const o=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=o.attached)return;En(cg(l,o.value),n,5,[l])};return o.value=t,o.attached=ug(),o}function cg(t,n){if(qt(n)){const o=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{o.call(t),t._stopped=!0},n.map(l=>f=>!f._stopped&&l&&l(f))}else return n}const yc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,fg=(t,n,o,l,f,p)=>{const d=f==="svg";n==="class"?Q0(t,l,d):n==="style"?ng(t,o,l):ol(n)?fh(n)||og(t,n,o,l,p):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):dg(t,n,l,d))?(mc(t,n,l),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&pc(t,n,l,d,p,n!=="value")):t._isVueCE&&(/[A-Z]/.test(n)||!$e(l))?mc(t,en(n),l,p,n):(n==="true-value"?t._trueValue=l:n==="false-value"&&(t._falseValue=l),pc(t,n,l,d))};function dg(t,n,o,l){if(l)return!!(n==="innerHTML"||n==="textContent"||n in t&&yc(n)&&ee(o));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const f=t.tagName;if(f==="IMG"||f==="VIDEO"||f==="CANVAS"||f==="SOURCE")return!1}return yc(n)&&$e(o)?!1:n in t}const Bs=t=>{const n=t.props["onUpdate:modelValue"]||!1;return qt(n)?o=>Ia(n,o):n};function pg(t){t.target.composing=!0}function vc(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Hn=Symbol("_assign"),ji={created(t,{modifiers:{lazy:n,trim:o,number:l}},f){t[Hn]=Bs(f);const p=l||f.props&&f.props.type==="number";hr(t,n?"change":"input",d=>{if(d.target.composing)return;let b=t.value;o&&(b=b.trim()),p&&(b=Ka(b)),t[Hn](b)}),o&&hr(t,"change",()=>{t.value=t.value.trim()}),n||(hr(t,"compositionstart",pg),hr(t,"compositionend",vc),hr(t,"change",vc))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:o,modifiers:{lazy:l,trim:f,number:p}},d){if(t[Hn]=Bs(d),t.composing)return;const b=(p||t.type==="number")&&!/^0\d/.test(t.value)?Ka(t.value):t.value,x=n??"";b!==x&&(document.activeElement===t&&t.type!=="range"&&(l&&n===o||f&&t.value.trim()===x)||(t.value=x))}},mg={deep:!0,created(t,n,o){t[Hn]=Bs(o),hr(t,"change",()=>{const l=t._modelValue,f=Io(t),p=t.checked,d=t[Hn];if(qt(l)){const b=mh(l,f),x=b!==-1;if(p&&!x)d(l.concat(f));else if(!p&&x){const P=[...l];P.splice(b,1),d(P)}}else if(Ts(l)){const b=new Set(l);p?b.add(f):b.delete(f),d(b)}else d(wd(t,p))})},mounted:bc,beforeUpdate(t,n,o){t[Hn]=Bs(o),bc(t,n,o)}};function bc(t,{value:n,oldValue:o},l){t._modelValue=n;let f;if(qt(n))f=mh(n,l.props.value)>-1;else if(Ts(n))f=n.has(l.props.value);else{if(n===o)return;f=Go(n,wd(t,!0))}t.checked!==f&&(t.checked=f)}const gg={deep:!0,created(t,{value:n,modifiers:{number:o}},l){const f=Ts(n);hr(t,"change",()=>{const p=Array.prototype.filter.call(t.options,d=>d.selected).map(d=>o?Ka(Io(d)):Io(d));t[Hn](t.multiple?f?new Set(p):p:p[0]),t._assigning=!0,dl(()=>{t._assigning=!1})}),t[Hn]=Bs(l)},mounted(t,{value:n}){Lc(t,n)},beforeUpdate(t,n,o){t[Hn]=Bs(o)},updated(t,{value:n}){t._assigning||Lc(t,n)}};function Lc(t,n){const o=t.multiple,l=qt(n);if(!(o&&!l&&!Ts(n))){for(let f=0,p=t.options.length;f<p;f++){const d=t.options[f],b=Io(d);if(o)if(l){const x=typeof b;x==="string"||x==="number"?d.selected=n.some(P=>String(P)===String(b)):d.selected=mh(n,b)>-1}else d.selected=n.has(b);else if(Go(Io(d),n)){t.selectedIndex!==f&&(t.selectedIndex=f);return}}!o&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Io(t){return"_value"in t?t._value:t.value}function wd(t,n){const o=n?"_trueValue":"_falseValue";return o in t?t[o]:n}const _g=["ctrl","shift","alt","meta"],yg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>_g.some(o=>t[`${o}Key`]&&!n.includes(o))},Cd=(t,n)=>{const o=t._withMods||(t._withMods={}),l=n.join(".");return o[l]||(o[l]=(f,...p)=>{for(let d=0;d<n.length;d++){const b=yg[n[d]];if(b&&b(f,n))return}return t(f,...p)})},vg=yi({patchProp:fg},Y0);let xc;function bg(){return xc||(xc=L0(vg))}const Lg=(...t)=>{const n=bg().createApp(...t),{mount:o}=n;return n.mount=l=>{const f=wg(l);if(!f)return;const p=n._component;!ee(p)&&!p.render&&!p.template&&(p.template=f.innerHTML),f.nodeType===1&&(f.textContent="");const d=o(f,!1,xg(f));return f instanceof Element&&(f.removeAttribute("v-cloak"),f.setAttribute("data-v-app","")),d},n};function xg(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function wg(t){return $e(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Ed;const yl=t=>Ed=t,kd=Symbol();function Yu(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Bo;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Bo||(Bo={}));function Cg(){const t=Ef(!0),n=t.run(()=>ce({}));let o=[],l=[];const f=wh({install(p){yl(f),f._a=p,p.provide(kd,f),p.config.globalProperties.$pinia=f,l.forEach(d=>o.push(d)),l=[]},use(p){return this._a?o.push(p):l.push(p),this},_p:o,_a:null,_e:t,_s:new Map,state:n});return f}const Md=()=>{};function wc(t,n,o,l=Md){t.push(n);const f=()=>{const p=t.indexOf(n);p>-1&&(t.splice(p,1),l())};return!o&&kf()&&hm(f),f}function Ls(t,...n){t.slice().forEach(o=>{o(...n)})}const Eg=t=>t(),Cc=Symbol(),Su=Symbol();function Xu(t,n){t instanceof Map&&n instanceof Map?n.forEach((o,l)=>t.set(l,o)):t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const o in n){if(!n.hasOwnProperty(o))continue;const l=n[o],f=t[o];Yu(f)&&Yu(l)&&t.hasOwnProperty(o)&&!Ve(l)&&!dr(l)?t[o]=Xu(f,l):t[o]=l}return t}const kg=Symbol();function Mg(t){return!Yu(t)||!t.hasOwnProperty(kg)}const{assign:or}=Object;function Pg(t){return!!(Ve(t)&&t.effect)}function Bg(t,n,o,l){const{state:f,actions:p,getters:d}=n,b=o.state.value[t];let x;function P(){b||(o.state.value[t]=f?f():{});const E=Dm(o.state.value[t]);return or(E,p,Object.keys(d||{}).reduce((k,F)=>(k[F]=wh(Ge(()=>{yl(o);const j=o._s.get(t);return d[F].call(j,j)})),k),{}))}return x=Pd(t,P,n,o,l,!0),x}function Pd(t,n,o={},l,f,p){let d;const b=or({actions:{}},o),x={deep:!0};let P,E,k=[],F=[],j;const q=l.state.value[t];!p&&!q&&(l.state.value[t]={}),ce({});let J;function st(vt){let _t;P=E=!1,typeof vt=="function"?(vt(l.state.value[t]),_t={type:Bo.patchFunction,storeId:t,events:j}):(Xu(l.state.value[t],vt),_t={type:Bo.patchObject,payload:vt,storeId:t,events:j});const Dt=J=Symbol();dl().then(()=>{J===Dt&&(P=!0)}),E=!0,Ls(k,_t,l.state.value[t])}const pt=p?function(){const{state:_t}=o,Dt=_t?_t():{};this.$patch(ne=>{or(ne,Dt)})}:Md;function bt(){d.stop(),k=[],F=[],l._s.delete(t)}const ft=(vt,_t="")=>{if(Cc in vt)return vt[Su]=_t,vt;const Dt=function(){yl(l);const ne=Array.from(arguments),xe=[],Xe=[];function qe(Kt){xe.push(Kt)}function Vi(Kt){Xe.push(Kt)}Ls(F,{args:ne,name:Dt[Su],store:St,after:qe,onError:Vi});let re;try{re=vt.apply(this&&this.$id===t?this:St,ne)}catch(Kt){throw Ls(Xe,Kt),Kt}return re instanceof Promise?re.then(Kt=>(Ls(xe,Kt),Kt)).catch(Kt=>(Ls(Xe,Kt),Promise.reject(Kt))):(Ls(xe,re),re)};return Dt[Cc]=!0,Dt[Su]=_t,Dt},xt={_p:l,$id:t,$onAction:wc.bind(null,F),$patch:st,$reset:pt,$subscribe(vt,_t={}){const Dt=wc(k,vt,_t.detached,()=>ne()),ne=d.run(()=>Nr(()=>l.state.value[t],xe=>{(_t.flush==="sync"?E:P)&&vt({storeId:t,type:Bo.direct,events:j},xe)},or({},x,_t)));return Dt},$dispose:bt},St=Hr(xt);l._s.set(t,St);const Vt=(l._a&&l._a.runWithContext||Eg)(()=>l._e.run(()=>(d=Ef()).run(()=>n({action:ft}))));for(const vt in Vt){const _t=Vt[vt];if(Ve(_t)&&!Pg(_t)||dr(_t))p||(q&&Mg(_t)&&(Ve(_t)?_t.value=q[vt]:Xu(_t,q[vt])),l.state.value[t][vt]=_t);else if(typeof _t=="function"){const Dt=ft(_t,vt);Vt[vt]=Dt,b.actions[vt]=_t}}return or(St,Vt),or(ve(St),Vt),Object.defineProperty(St,"$state",{get:()=>l.state.value[t],set:vt=>{st(_t=>{or(_t,vt)})}}),l._p.forEach(vt=>{or(St,d.run(()=>vt({store:St,app:l._a,pinia:l,options:b})))}),q&&p&&o.hydrate&&o.hydrate(St.$state,q),P=!0,E=!0,St}/*! #__NO_SIDE_EFFECTS__ */function Bd(t,n,o){let l,f;const p=typeof n=="function";typeof t=="string"?(l=t,f=p?o:n):(f=t,l=t.id);function d(b,x){const P=p0();return b=b||(P?tn(kd,null):null),b&&yl(b),b=Ed,b._s.has(l)||(p?Pd(l,n,f,b):Bg(l,f,b)),b._s.get(l)}return d.$id=l,d}function Sd(t,n){return function(){return t.apply(n,arguments)}}const{toString:Sg}=Object.prototype,{getPrototypeOf:Bh}=Object,vl=(t=>n=>{const o=Sg.call(n);return t[o]||(t[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),hn=t=>(t=t.toLowerCase(),n=>vl(n)===t),bl=t=>n=>typeof n===t,{isArray:Ds}=Array,No=bl("undefined");function Ag(t){return t!==null&&!No(t)&&t.constructor!==null&&!No(t.constructor)&&Gi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ad=hn("ArrayBuffer");function Tg(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&Ad(t.buffer),n}const Dg=bl("string"),Gi=bl("function"),Td=bl("number"),Ll=t=>t!==null&&typeof t=="object",Rg=t=>t===!0||t===!1,Ga=t=>{if(vl(t)!=="object")return!1;const n=Bh(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Og=hn("Date"),Fg=hn("File"),Ig=hn("Blob"),Ng=hn("FileList"),zg=t=>Ll(t)&&Gi(t.pipe),jg=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Gi(t.append)&&((n=vl(t))==="formdata"||n==="object"&&Gi(t.toString)&&t.toString()==="[object FormData]"))},Ug=hn("URLSearchParams"),[Gg,Vg,Hg,Zg]=["ReadableStream","Request","Response","Headers"].map(hn),$g=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $o(t,n,{allOwnKeys:o=!1}={}){if(t===null||typeof t>"u")return;let l,f;if(typeof t!="object"&&(t=[t]),Ds(t))for(l=0,f=t.length;l<f;l++)n.call(null,t[l],l,t);else{const p=o?Object.getOwnPropertyNames(t):Object.keys(t),d=p.length;let b;for(l=0;l<d;l++)b=p[l],n.call(null,t[b],b,t)}}function Dd(t,n){n=n.toLowerCase();const o=Object.keys(t);let l=o.length,f;for(;l-- >0;)if(f=o[l],n===f.toLowerCase())return f;return null}const Rr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rd=t=>!No(t)&&t!==Rr;function Qu(){const{caseless:t}=Rd(this)&&this||{},n={},o=(l,f)=>{const p=t&&Dd(n,f)||f;Ga(n[p])&&Ga(l)?n[p]=Qu(n[p],l):Ga(l)?n[p]=Qu({},l):Ds(l)?n[p]=l.slice():n[p]=l};for(let l=0,f=arguments.length;l<f;l++)arguments[l]&&$o(arguments[l],o);return n}const qg=(t,n,o,{allOwnKeys:l}={})=>($o(n,(f,p)=>{o&&Gi(f)?t[p]=Sd(f,o):t[p]=f},{allOwnKeys:l}),t),Kg=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Wg=(t,n,o,l)=>{t.prototype=Object.create(n.prototype,l),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),o&&Object.assign(t.prototype,o)},Jg=(t,n,o,l)=>{let f,p,d;const b={};if(n=n||{},t==null)return n;do{for(f=Object.getOwnPropertyNames(t),p=f.length;p-- >0;)d=f[p],(!l||l(d,t,n))&&!b[d]&&(n[d]=t[d],b[d]=!0);t=o!==!1&&Bh(t)}while(t&&(!o||o(t,n))&&t!==Object.prototype);return n},Yg=(t,n,o)=>{t=String(t),(o===void 0||o>t.length)&&(o=t.length),o-=n.length;const l=t.indexOf(n,o);return l!==-1&&l===o},Xg=t=>{if(!t)return null;if(Ds(t))return t;let n=t.length;if(!Td(n))return null;const o=new Array(n);for(;n-- >0;)o[n]=t[n];return o},Qg=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Bh(Uint8Array)),t_=(t,n)=>{const l=(t&&t[Symbol.iterator]).call(t);let f;for(;(f=l.next())&&!f.done;){const p=f.value;n.call(t,p[0],p[1])}},e_=(t,n)=>{let o;const l=[];for(;(o=t.exec(n))!==null;)l.push(o);return l},i_=hn("HTMLFormElement"),n_=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,l,f){return l.toUpperCase()+f}),Ec=(({hasOwnProperty:t})=>(n,o)=>t.call(n,o))(Object.prototype),r_=hn("RegExp"),Od=(t,n)=>{const o=Object.getOwnPropertyDescriptors(t),l={};$o(o,(f,p)=>{let d;(d=n(f,p,t))!==!1&&(l[p]=d||f)}),Object.defineProperties(t,l)},s_=t=>{Od(t,(n,o)=>{if(Gi(t)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const l=t[o];if(Gi(l)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},o_=(t,n)=>{const o={},l=f=>{f.forEach(p=>{o[p]=!0})};return Ds(t)?l(t):l(String(t).split(n)),o},a_=()=>{},l_=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n,Au="abcdefghijklmnopqrstuvwxyz",kc="0123456789",Fd={DIGIT:kc,ALPHA:Au,ALPHA_DIGIT:Au+Au.toUpperCase()+kc},u_=(t=16,n=Fd.ALPHA_DIGIT)=>{let o="";const{length:l}=n;for(;t--;)o+=n[Math.random()*l|0];return o};function h_(t){return!!(t&&Gi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const c_=t=>{const n=new Array(10),o=(l,f)=>{if(Ll(l)){if(n.indexOf(l)>=0)return;if(!("toJSON"in l)){n[f]=l;const p=Ds(l)?[]:{};return $o(l,(d,b)=>{const x=o(d,f+1);!No(x)&&(p[b]=x)}),n[f]=void 0,p}}return l};return o(t,0)},f_=hn("AsyncFunction"),d_=t=>t&&(Ll(t)||Gi(t))&&Gi(t.then)&&Gi(t.catch),Id=((t,n)=>t?setImmediate:n?((o,l)=>(Rr.addEventListener("message",({source:f,data:p})=>{f===Rr&&p===o&&l.length&&l.shift()()},!1),f=>{l.push(f),Rr.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Gi(Rr.postMessage)),p_=typeof queueMicrotask<"u"?queueMicrotask.bind(Rr):typeof process<"u"&&process.nextTick||Id,at={isArray:Ds,isArrayBuffer:Ad,isBuffer:Ag,isFormData:jg,isArrayBufferView:Tg,isString:Dg,isNumber:Td,isBoolean:Rg,isObject:Ll,isPlainObject:Ga,isReadableStream:Gg,isRequest:Vg,isResponse:Hg,isHeaders:Zg,isUndefined:No,isDate:Og,isFile:Fg,isBlob:Ig,isRegExp:r_,isFunction:Gi,isStream:zg,isURLSearchParams:Ug,isTypedArray:Qg,isFileList:Ng,forEach:$o,merge:Qu,extend:qg,trim:$g,stripBOM:Kg,inherits:Wg,toFlatObject:Jg,kindOf:vl,kindOfTest:hn,endsWith:Yg,toArray:Xg,forEachEntry:t_,matchAll:e_,isHTMLForm:i_,hasOwnProperty:Ec,hasOwnProp:Ec,reduceDescriptors:Od,freezeMethods:s_,toObjectSet:o_,toCamelCase:n_,noop:a_,toFiniteNumber:l_,findKey:Dd,global:Rr,isContextDefined:Rd,ALPHABET:Fd,generateString:u_,isSpecCompliantForm:h_,toJSONObject:c_,isAsyncFn:f_,isThenable:d_,setImmediate:Id,asap:p_};function ie(t,n,o,l,f){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),o&&(this.config=o),l&&(this.request=l),f&&(this.response=f,this.status=f.status?f.status:null)}at.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:at.toJSONObject(this.config),code:this.code,status:this.status}}});const Nd=ie.prototype,zd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zd[t]={value:t}});Object.defineProperties(ie,zd);Object.defineProperty(Nd,"isAxiosError",{value:!0});ie.from=(t,n,o,l,f,p)=>{const d=Object.create(Nd);return at.toFlatObject(t,d,function(x){return x!==Error.prototype},b=>b!=="isAxiosError"),ie.call(d,t.message,n,o,l,f),d.cause=t,d.name=t.name,p&&Object.assign(d,p),d};const m_=null;function th(t){return at.isPlainObject(t)||at.isArray(t)}function jd(t){return at.endsWith(t,"[]")?t.slice(0,-2):t}function Mc(t,n,o){return t?t.concat(n).map(function(f,p){return f=jd(f),!o&&p?"["+f+"]":f}).join(o?".":""):n}function g_(t){return at.isArray(t)&&!t.some(th)}const __=at.toFlatObject(at,{},null,function(n){return/^is[A-Z]/.test(n)});function xl(t,n,o){if(!at.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,o=at.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(J,st){return!at.isUndefined(st[J])});const l=o.metaTokens,f=o.visitor||E,p=o.dots,d=o.indexes,x=(o.Blob||typeof Blob<"u"&&Blob)&&at.isSpecCompliantForm(n);if(!at.isFunction(f))throw new TypeError("visitor must be a function");function P(q){if(q===null)return"";if(at.isDate(q))return q.toISOString();if(!x&&at.isBlob(q))throw new ie("Blob is not supported. Use a Buffer instead.");return at.isArrayBuffer(q)||at.isTypedArray(q)?x&&typeof Blob=="function"?new Blob([q]):Buffer.from(q):q}function E(q,J,st){let pt=q;if(q&&!st&&typeof q=="object"){if(at.endsWith(J,"{}"))J=l?J:J.slice(0,-2),q=JSON.stringify(q);else if(at.isArray(q)&&g_(q)||(at.isFileList(q)||at.endsWith(J,"[]"))&&(pt=at.toArray(q)))return J=jd(J),pt.forEach(function(ft,xt){!(at.isUndefined(ft)||ft===null)&&n.append(d===!0?Mc([J],xt,p):d===null?J:J+"[]",P(ft))}),!1}return th(q)?!0:(n.append(Mc(st,J,p),P(q)),!1)}const k=[],F=Object.assign(__,{defaultVisitor:E,convertValue:P,isVisitable:th});function j(q,J){if(!at.isUndefined(q)){if(k.indexOf(q)!==-1)throw Error("Circular reference detected in "+J.join("."));k.push(q),at.forEach(q,function(pt,bt){(!(at.isUndefined(pt)||pt===null)&&f.call(n,pt,at.isString(bt)?bt.trim():bt,J,F))===!0&&j(pt,J?J.concat(bt):[bt])}),k.pop()}}if(!at.isObject(t))throw new TypeError("data must be an object");return j(t),n}function Pc(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(l){return n[l]})}function Sh(t,n){this._pairs=[],t&&xl(t,this,n)}const Ud=Sh.prototype;Ud.append=function(n,o){this._pairs.push([n,o])};Ud.toString=function(n){const o=n?function(l){return n.call(this,l,Pc)}:Pc;return this._pairs.map(function(f){return o(f[0])+"="+o(f[1])},"").join("&")};function y_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gd(t,n,o){if(!n)return t;const l=o&&o.encode||y_;at.isFunction(o)&&(o={serialize:o});const f=o&&o.serialize;let p;if(f?p=f(n,o):p=at.isURLSearchParams(n)?n.toString():new Sh(n,o).toString(l),p){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+p}return t}class Bc{constructor(){this.handlers=[]}use(n,o,l){return this.handlers.push({fulfilled:n,rejected:o,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){at.forEach(this.handlers,function(l){l!==null&&n(l)})}}const Vd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},v_=typeof URLSearchParams<"u"?URLSearchParams:Sh,b_=typeof FormData<"u"?FormData:null,L_=typeof Blob<"u"?Blob:null,x_={isBrowser:!0,classes:{URLSearchParams:v_,FormData:b_,Blob:L_},protocols:["http","https","file","blob","url","data"]},Ah=typeof window<"u"&&typeof document<"u",eh=typeof navigator=="object"&&navigator||void 0,w_=Ah&&(!eh||["ReactNative","NativeScript","NS"].indexOf(eh.product)<0),C_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",E_=Ah&&window.location.href||"http://localhost",k_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ah,hasStandardBrowserEnv:w_,hasStandardBrowserWebWorkerEnv:C_,navigator:eh,origin:E_},Symbol.toStringTag,{value:"Module"})),_i={...k_,...x_};function M_(t,n){return xl(t,new _i.classes.URLSearchParams,Object.assign({visitor:function(o,l,f,p){return _i.isNode&&at.isBuffer(o)?(this.append(l,o.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},n))}function P_(t){return at.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function B_(t){const n={},o=Object.keys(t);let l;const f=o.length;let p;for(l=0;l<f;l++)p=o[l],n[p]=t[p];return n}function Hd(t){function n(o,l,f,p){let d=o[p++];if(d==="__proto__")return!0;const b=Number.isFinite(+d),x=p>=o.length;return d=!d&&at.isArray(f)?f.length:d,x?(at.hasOwnProp(f,d)?f[d]=[f[d],l]:f[d]=l,!b):((!f[d]||!at.isObject(f[d]))&&(f[d]=[]),n(o,l,f[d],p)&&at.isArray(f[d])&&(f[d]=B_(f[d])),!b)}if(at.isFormData(t)&&at.isFunction(t.entries)){const o={};return at.forEachEntry(t,(l,f)=>{n(P_(l),f,o,0)}),o}return null}function S_(t,n,o){if(at.isString(t))try{return(n||JSON.parse)(t),at.trim(t)}catch(l){if(l.name!=="SyntaxError")throw l}return(o||JSON.stringify)(t)}const qo={transitional:Vd,adapter:["xhr","http","fetch"],transformRequest:[function(n,o){const l=o.getContentType()||"",f=l.indexOf("application/json")>-1,p=at.isObject(n);if(p&&at.isHTMLForm(n)&&(n=new FormData(n)),at.isFormData(n))return f?JSON.stringify(Hd(n)):n;if(at.isArrayBuffer(n)||at.isBuffer(n)||at.isStream(n)||at.isFile(n)||at.isBlob(n)||at.isReadableStream(n))return n;if(at.isArrayBufferView(n))return n.buffer;if(at.isURLSearchParams(n))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let b;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return M_(n,this.formSerializer).toString();if((b=at.isFileList(n))||l.indexOf("multipart/form-data")>-1){const x=this.env&&this.env.FormData;return xl(b?{"files[]":n}:n,x&&new x,this.formSerializer)}}return p||f?(o.setContentType("application/json",!1),S_(n)):n}],transformResponse:[function(n){const o=this.transitional||qo.transitional,l=o&&o.forcedJSONParsing,f=this.responseType==="json";if(at.isResponse(n)||at.isReadableStream(n))return n;if(n&&at.isString(n)&&(l&&!this.responseType||f)){const d=!(o&&o.silentJSONParsing)&&f;try{return JSON.parse(n)}catch(b){if(d)throw b.name==="SyntaxError"?ie.from(b,ie.ERR_BAD_RESPONSE,this,null,this.response):b}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_i.classes.FormData,Blob:_i.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};at.forEach(["delete","get","head","post","put","patch"],t=>{qo.headers[t]={}});const A_=at.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),T_=t=>{const n={};let o,l,f;return t&&t.split(`
`).forEach(function(d){f=d.indexOf(":"),o=d.substring(0,f).trim().toLowerCase(),l=d.substring(f+1).trim(),!(!o||n[o]&&A_[o])&&(o==="set-cookie"?n[o]?n[o].push(l):n[o]=[l]:n[o]=n[o]?n[o]+", "+l:l)}),n},Sc=Symbol("internals");function _o(t){return t&&String(t).trim().toLowerCase()}function Va(t){return t===!1||t==null?t:at.isArray(t)?t.map(Va):String(t)}function D_(t){const n=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=o.exec(t);)n[l[1]]=l[2];return n}const R_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Tu(t,n,o,l,f){if(at.isFunction(l))return l.call(this,n,o);if(f&&(n=o),!!at.isString(n)){if(at.isString(l))return n.indexOf(l)!==-1;if(at.isRegExp(l))return l.test(n)}}function O_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,o,l)=>o.toUpperCase()+l)}function F_(t,n){const o=at.toCamelCase(" "+n);["get","set","has"].forEach(l=>{Object.defineProperty(t,l+o,{value:function(f,p,d){return this[l].call(this,n,f,p,d)},configurable:!0})})}let Oi=class{constructor(n){n&&this.set(n)}set(n,o,l){const f=this;function p(b,x,P){const E=_o(x);if(!E)throw new Error("header name must be a non-empty string");const k=at.findKey(f,E);(!k||f[k]===void 0||P===!0||P===void 0&&f[k]!==!1)&&(f[k||x]=Va(b))}const d=(b,x)=>at.forEach(b,(P,E)=>p(P,E,x));if(at.isPlainObject(n)||n instanceof this.constructor)d(n,o);else if(at.isString(n)&&(n=n.trim())&&!R_(n))d(T_(n),o);else if(at.isHeaders(n))for(const[b,x]of n.entries())p(x,b,l);else n!=null&&p(o,n,l);return this}get(n,o){if(n=_o(n),n){const l=at.findKey(this,n);if(l){const f=this[l];if(!o)return f;if(o===!0)return D_(f);if(at.isFunction(o))return o.call(this,f,l);if(at.isRegExp(o))return o.exec(f);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,o){if(n=_o(n),n){const l=at.findKey(this,n);return!!(l&&this[l]!==void 0&&(!o||Tu(this,this[l],l,o)))}return!1}delete(n,o){const l=this;let f=!1;function p(d){if(d=_o(d),d){const b=at.findKey(l,d);b&&(!o||Tu(l,l[b],b,o))&&(delete l[b],f=!0)}}return at.isArray(n)?n.forEach(p):p(n),f}clear(n){const o=Object.keys(this);let l=o.length,f=!1;for(;l--;){const p=o[l];(!n||Tu(this,this[p],p,n,!0))&&(delete this[p],f=!0)}return f}normalize(n){const o=this,l={};return at.forEach(this,(f,p)=>{const d=at.findKey(l,p);if(d){o[d]=Va(f),delete o[p];return}const b=n?O_(p):String(p).trim();b!==p&&delete o[p],o[b]=Va(f),l[b]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const o=Object.create(null);return at.forEach(this,(l,f)=>{l!=null&&l!==!1&&(o[f]=n&&at.isArray(l)?l.join(", "):l)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,o])=>n+": "+o).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...o){const l=new this(n);return o.forEach(f=>l.set(f)),l}static accessor(n){const l=(this[Sc]=this[Sc]={accessors:{}}).accessors,f=this.prototype;function p(d){const b=_o(d);l[b]||(F_(f,d),l[b]=!0)}return at.isArray(n)?n.forEach(p):p(n),this}};Oi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);at.reduceDescriptors(Oi.prototype,({value:t},n)=>{let o=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(l){this[o]=l}}});at.freezeMethods(Oi);function Du(t,n){const o=this||qo,l=n||o,f=Oi.from(l.headers);let p=l.data;return at.forEach(t,function(b){p=b.call(o,p,f.normalize(),n?n.status:void 0)}),f.normalize(),p}function Zd(t){return!!(t&&t.__CANCEL__)}function Rs(t,n,o){ie.call(this,t??"canceled",ie.ERR_CANCELED,n,o),this.name="CanceledError"}at.inherits(Rs,ie,{__CANCEL__:!0});function $d(t,n,o){const l=o.config.validateStatus;!o.status||!l||l(o.status)?t(o):n(new ie("Request failed with status code "+o.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function I_(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function N_(t,n){t=t||10;const o=new Array(t),l=new Array(t);let f=0,p=0,d;return n=n!==void 0?n:1e3,function(x){const P=Date.now(),E=l[p];d||(d=P),o[f]=x,l[f]=P;let k=p,F=0;for(;k!==f;)F+=o[k++],k=k%t;if(f=(f+1)%t,f===p&&(p=(p+1)%t),P-d<n)return;const j=E&&P-E;return j?Math.round(F*1e3/j):void 0}}function z_(t,n){let o=0,l=1e3/n,f,p;const d=(P,E=Date.now())=>{o=E,f=null,p&&(clearTimeout(p),p=null),t.apply(null,P)};return[(...P)=>{const E=Date.now(),k=E-o;k>=l?d(P,E):(f=P,p||(p=setTimeout(()=>{p=null,d(f)},l-k)))},()=>f&&d(f)]}const nl=(t,n,o=3)=>{let l=0;const f=N_(50,250);return z_(p=>{const d=p.loaded,b=p.lengthComputable?p.total:void 0,x=d-l,P=f(x),E=d<=b;l=d;const k={loaded:d,total:b,progress:b?d/b:void 0,bytes:x,rate:P||void 0,estimated:P&&b&&E?(b-d)/P:void 0,event:p,lengthComputable:b!=null,[n?"download":"upload"]:!0};t(k)},o)},Ac=(t,n)=>{const o=t!=null;return[l=>n[0]({lengthComputable:o,total:t,loaded:l}),n[1]]},Tc=t=>(...n)=>at.asap(()=>t(...n)),j_=_i.hasStandardBrowserEnv?((t,n)=>o=>(o=new URL(o,_i.origin),t.protocol===o.protocol&&t.host===o.host&&(n||t.port===o.port)))(new URL(_i.origin),_i.navigator&&/(msie|trident)/i.test(_i.navigator.userAgent)):()=>!0,U_=_i.hasStandardBrowserEnv?{write(t,n,o,l,f,p){const d=[t+"="+encodeURIComponent(n)];at.isNumber(o)&&d.push("expires="+new Date(o).toGMTString()),at.isString(l)&&d.push("path="+l),at.isString(f)&&d.push("domain="+f),p===!0&&d.push("secure"),document.cookie=d.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function G_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function V_(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function qd(t,n){return t&&!G_(n)?V_(t,n):n}const Dc=t=>t instanceof Oi?{...t}:t;function Gr(t,n){n=n||{};const o={};function l(P,E,k,F){return at.isPlainObject(P)&&at.isPlainObject(E)?at.merge.call({caseless:F},P,E):at.isPlainObject(E)?at.merge({},E):at.isArray(E)?E.slice():E}function f(P,E,k,F){if(at.isUndefined(E)){if(!at.isUndefined(P))return l(void 0,P,k,F)}else return l(P,E,k,F)}function p(P,E){if(!at.isUndefined(E))return l(void 0,E)}function d(P,E){if(at.isUndefined(E)){if(!at.isUndefined(P))return l(void 0,P)}else return l(void 0,E)}function b(P,E,k){if(k in n)return l(P,E);if(k in t)return l(void 0,P)}const x={url:p,method:p,data:p,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:b,headers:(P,E,k)=>f(Dc(P),Dc(E),k,!0)};return at.forEach(Object.keys(Object.assign({},t,n)),function(E){const k=x[E]||f,F=k(t[E],n[E],E);at.isUndefined(F)&&k!==b||(o[E]=F)}),o}const Kd=t=>{const n=Gr({},t);let{data:o,withXSRFToken:l,xsrfHeaderName:f,xsrfCookieName:p,headers:d,auth:b}=n;n.headers=d=Oi.from(d),n.url=Gd(qd(n.baseURL,n.url),t.params,t.paramsSerializer),b&&d.set("Authorization","Basic "+btoa((b.username||"")+":"+(b.password?unescape(encodeURIComponent(b.password)):"")));let x;if(at.isFormData(o)){if(_i.hasStandardBrowserEnv||_i.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((x=d.getContentType())!==!1){const[P,...E]=x?x.split(";").map(k=>k.trim()).filter(Boolean):[];d.setContentType([P||"multipart/form-data",...E].join("; "))}}if(_i.hasStandardBrowserEnv&&(l&&at.isFunction(l)&&(l=l(n)),l||l!==!1&&j_(n.url))){const P=f&&p&&U_.read(p);P&&d.set(f,P)}return n},H_=typeof XMLHttpRequest<"u",Z_=H_&&function(t){return new Promise(function(o,l){const f=Kd(t);let p=f.data;const d=Oi.from(f.headers).normalize();let{responseType:b,onUploadProgress:x,onDownloadProgress:P}=f,E,k,F,j,q;function J(){j&&j(),q&&q(),f.cancelToken&&f.cancelToken.unsubscribe(E),f.signal&&f.signal.removeEventListener("abort",E)}let st=new XMLHttpRequest;st.open(f.method.toUpperCase(),f.url,!0),st.timeout=f.timeout;function pt(){if(!st)return;const ft=Oi.from("getAllResponseHeaders"in st&&st.getAllResponseHeaders()),St={data:!b||b==="text"||b==="json"?st.responseText:st.response,status:st.status,statusText:st.statusText,headers:ft,config:t,request:st};$d(function(Vt){o(Vt),J()},function(Vt){l(Vt),J()},St),st=null}"onloadend"in st?st.onloadend=pt:st.onreadystatechange=function(){!st||st.readyState!==4||st.status===0&&!(st.responseURL&&st.responseURL.indexOf("file:")===0)||setTimeout(pt)},st.onabort=function(){st&&(l(new ie("Request aborted",ie.ECONNABORTED,t,st)),st=null)},st.onerror=function(){l(new ie("Network Error",ie.ERR_NETWORK,t,st)),st=null},st.ontimeout=function(){let xt=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded";const St=f.transitional||Vd;f.timeoutErrorMessage&&(xt=f.timeoutErrorMessage),l(new ie(xt,St.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,t,st)),st=null},p===void 0&&d.setContentType(null),"setRequestHeader"in st&&at.forEach(d.toJSON(),function(xt,St){st.setRequestHeader(St,xt)}),at.isUndefined(f.withCredentials)||(st.withCredentials=!!f.withCredentials),b&&b!=="json"&&(st.responseType=f.responseType),P&&([F,q]=nl(P,!0),st.addEventListener("progress",F)),x&&st.upload&&([k,j]=nl(x),st.upload.addEventListener("progress",k),st.upload.addEventListener("loadend",j)),(f.cancelToken||f.signal)&&(E=ft=>{st&&(l(!ft||ft.type?new Rs(null,t,st):ft),st.abort(),st=null)},f.cancelToken&&f.cancelToken.subscribe(E),f.signal&&(f.signal.aborted?E():f.signal.addEventListener("abort",E)));const bt=I_(f.url);if(bt&&_i.protocols.indexOf(bt)===-1){l(new ie("Unsupported protocol "+bt+":",ie.ERR_BAD_REQUEST,t));return}st.send(p||null)})},$_=(t,n)=>{const{length:o}=t=t?t.filter(Boolean):[];if(n||o){let l=new AbortController,f;const p=function(P){if(!f){f=!0,b();const E=P instanceof Error?P:this.reason;l.abort(E instanceof ie?E:new Rs(E instanceof Error?E.message:E))}};let d=n&&setTimeout(()=>{d=null,p(new ie(`timeout ${n} of ms exceeded`,ie.ETIMEDOUT))},n);const b=()=>{t&&(d&&clearTimeout(d),d=null,t.forEach(P=>{P.unsubscribe?P.unsubscribe(p):P.removeEventListener("abort",p)}),t=null)};t.forEach(P=>P.addEventListener("abort",p));const{signal:x}=l;return x.unsubscribe=()=>at.asap(b),x}},q_=function*(t,n){let o=t.byteLength;if(o<n){yield t;return}let l=0,f;for(;l<o;)f=l+n,yield t.slice(l,f),l=f},K_=async function*(t,n){for await(const o of W_(t))yield*q_(o,n)},W_=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:o,value:l}=await n.read();if(o)break;yield l}}finally{await n.cancel()}},Rc=(t,n,o,l)=>{const f=K_(t,n);let p=0,d,b=x=>{d||(d=!0,l&&l(x))};return new ReadableStream({async pull(x){try{const{done:P,value:E}=await f.next();if(P){b(),x.close();return}let k=E.byteLength;if(o){let F=p+=k;o(F)}x.enqueue(new Uint8Array(E))}catch(P){throw b(P),P}},cancel(x){return b(x),f.return()}},{highWaterMark:2})},wl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Wd=wl&&typeof ReadableStream=="function",J_=wl&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Jd=(t,...n)=>{try{return!!t(...n)}catch{return!1}},Y_=Wd&&Jd(()=>{let t=!1;const n=new Request(_i.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),Oc=64*1024,ih=Wd&&Jd(()=>at.isReadableStream(new Response("").body)),rl={stream:ih&&(t=>t.body)};wl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!rl[n]&&(rl[n]=at.isFunction(t[n])?o=>o[n]():(o,l)=>{throw new ie(`Response type '${n}' is not supported`,ie.ERR_NOT_SUPPORT,l)})})})(new Response);const X_=async t=>{if(t==null)return 0;if(at.isBlob(t))return t.size;if(at.isSpecCompliantForm(t))return(await new Request(_i.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(at.isArrayBufferView(t)||at.isArrayBuffer(t))return t.byteLength;if(at.isURLSearchParams(t)&&(t=t+""),at.isString(t))return(await J_(t)).byteLength},Q_=async(t,n)=>{const o=at.toFiniteNumber(t.getContentLength());return o??X_(n)},ty=wl&&(async t=>{let{url:n,method:o,data:l,signal:f,cancelToken:p,timeout:d,onDownloadProgress:b,onUploadProgress:x,responseType:P,headers:E,withCredentials:k="same-origin",fetchOptions:F}=Kd(t);P=P?(P+"").toLowerCase():"text";let j=$_([f,p&&p.toAbortSignal()],d),q;const J=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let st;try{if(x&&Y_&&o!=="get"&&o!=="head"&&(st=await Q_(E,l))!==0){let St=new Request(n,{method:"POST",body:l,duplex:"half"}),Nt;if(at.isFormData(l)&&(Nt=St.headers.get("content-type"))&&E.setContentType(Nt),St.body){const[Vt,vt]=Ac(st,nl(Tc(x)));l=Rc(St.body,Oc,Vt,vt)}}at.isString(k)||(k=k?"include":"omit");const pt="credentials"in Request.prototype;q=new Request(n,{...F,signal:j,method:o.toUpperCase(),headers:E.normalize().toJSON(),body:l,duplex:"half",credentials:pt?k:void 0});let bt=await fetch(q);const ft=ih&&(P==="stream"||P==="response");if(ih&&(b||ft&&J)){const St={};["status","statusText","headers"].forEach(_t=>{St[_t]=bt[_t]});const Nt=at.toFiniteNumber(bt.headers.get("content-length")),[Vt,vt]=b&&Ac(Nt,nl(Tc(b),!0))||[];bt=new Response(Rc(bt.body,Oc,Vt,()=>{vt&&vt(),J&&J()}),St)}P=P||"text";let xt=await rl[at.findKey(rl,P)||"text"](bt,t);return!ft&&J&&J(),await new Promise((St,Nt)=>{$d(St,Nt,{data:xt,headers:Oi.from(bt.headers),status:bt.status,statusText:bt.statusText,config:t,request:q})})}catch(pt){throw J&&J(),pt&&pt.name==="TypeError"&&/fetch/i.test(pt.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,t,q),{cause:pt.cause||pt}):ie.from(pt,pt&&pt.code,t,q)}}),nh={http:m_,xhr:Z_,fetch:ty};at.forEach(nh,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const Fc=t=>`- ${t}`,ey=t=>at.isFunction(t)||t===null||t===!1,Yd={getAdapter:t=>{t=at.isArray(t)?t:[t];const{length:n}=t;let o,l;const f={};for(let p=0;p<n;p++){o=t[p];let d;if(l=o,!ey(o)&&(l=nh[(d=String(o)).toLowerCase()],l===void 0))throw new ie(`Unknown adapter '${d}'`);if(l)break;f[d||"#"+p]=l}if(!l){const p=Object.entries(f).map(([b,x])=>`adapter ${b} `+(x===!1?"is not supported by the environment":"is not available in the build"));let d=n?p.length>1?`since :
`+p.map(Fc).join(`
`):" "+Fc(p[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return l},adapters:nh};function Ru(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Rs(null,t)}function Ic(t){return Ru(t),t.headers=Oi.from(t.headers),t.data=Du.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Yd.getAdapter(t.adapter||qo.adapter)(t).then(function(l){return Ru(t),l.data=Du.call(t,t.transformResponse,l),l.headers=Oi.from(l.headers),l},function(l){return Zd(l)||(Ru(t),l&&l.response&&(l.response.data=Du.call(t,t.transformResponse,l.response),l.response.headers=Oi.from(l.response.headers))),Promise.reject(l)})}const Xd="1.7.9",Cl={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Cl[t]=function(l){return typeof l===t||"a"+(n<1?"n ":" ")+t}});const Nc={};Cl.transitional=function(n,o,l){function f(p,d){return"[Axios v"+Xd+"] Transitional option '"+p+"'"+d+(l?". "+l:"")}return(p,d,b)=>{if(n===!1)throw new ie(f(d," has been removed"+(o?" in "+o:"")),ie.ERR_DEPRECATED);return o&&!Nc[d]&&(Nc[d]=!0,console.warn(f(d," has been deprecated since v"+o+" and will be removed in the near future"))),n?n(p,d,b):!0}};Cl.spelling=function(n){return(o,l)=>(console.warn(`${l} is likely a misspelling of ${n}`),!0)};function iy(t,n,o){if(typeof t!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const l=Object.keys(t);let f=l.length;for(;f-- >0;){const p=l[f],d=n[p];if(d){const b=t[p],x=b===void 0||d(b,p,t);if(x!==!0)throw new ie("option "+p+" must be "+x,ie.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new ie("Unknown option "+p,ie.ERR_BAD_OPTION)}}const Ha={assertOptions:iy,validators:Cl},bn=Ha.validators;let zr=class{constructor(n){this.defaults=n,this.interceptors={request:new Bc,response:new Bc}}async request(n,o){try{return await this._request(n,o)}catch(l){if(l instanceof Error){let f={};Error.captureStackTrace?Error.captureStackTrace(f):f=new Error;const p=f.stack?f.stack.replace(/^.+\n/,""):"";try{l.stack?p&&!String(l.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+p):l.stack=p}catch{}}throw l}}_request(n,o){typeof n=="string"?(o=o||{},o.url=n):o=n||{},o=Gr(this.defaults,o);const{transitional:l,paramsSerializer:f,headers:p}=o;l!==void 0&&Ha.assertOptions(l,{silentJSONParsing:bn.transitional(bn.boolean),forcedJSONParsing:bn.transitional(bn.boolean),clarifyTimeoutError:bn.transitional(bn.boolean)},!1),f!=null&&(at.isFunction(f)?o.paramsSerializer={serialize:f}:Ha.assertOptions(f,{encode:bn.function,serialize:bn.function},!0)),Ha.assertOptions(o,{baseUrl:bn.spelling("baseURL"),withXsrfToken:bn.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let d=p&&at.merge(p.common,p[o.method]);p&&at.forEach(["delete","get","head","post","put","patch","common"],q=>{delete p[q]}),o.headers=Oi.concat(d,p);const b=[];let x=!0;this.interceptors.request.forEach(function(J){typeof J.runWhen=="function"&&J.runWhen(o)===!1||(x=x&&J.synchronous,b.unshift(J.fulfilled,J.rejected))});const P=[];this.interceptors.response.forEach(function(J){P.push(J.fulfilled,J.rejected)});let E,k=0,F;if(!x){const q=[Ic.bind(this),void 0];for(q.unshift.apply(q,b),q.push.apply(q,P),F=q.length,E=Promise.resolve(o);k<F;)E=E.then(q[k++],q[k++]);return E}F=b.length;let j=o;for(k=0;k<F;){const q=b[k++],J=b[k++];try{j=q(j)}catch(st){J.call(this,st);break}}try{E=Ic.call(this,j)}catch(q){return Promise.reject(q)}for(k=0,F=P.length;k<F;)E=E.then(P[k++],P[k++]);return E}getUri(n){n=Gr(this.defaults,n);const o=qd(n.baseURL,n.url);return Gd(o,n.params,n.paramsSerializer)}};at.forEach(["delete","get","head","options"],function(n){zr.prototype[n]=function(o,l){return this.request(Gr(l||{},{method:n,url:o,data:(l||{}).data}))}});at.forEach(["post","put","patch"],function(n){function o(l){return function(p,d,b){return this.request(Gr(b||{},{method:n,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:d}))}}zr.prototype[n]=o(),zr.prototype[n+"Form"]=o(!0)});let ny=class Qd{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(p){o=p});const l=this;this.promise.then(f=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](f);l._listeners=null}),this.promise.then=f=>{let p;const d=new Promise(b=>{l.subscribe(b),p=b}).then(f);return d.cancel=function(){l.unsubscribe(p)},d},n(function(p,d,b){l.reason||(l.reason=new Rs(p,d,b),o(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const o=this._listeners.indexOf(n);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const n=new AbortController,o=l=>{n.abort(l)};return this.subscribe(o),n.signal.unsubscribe=()=>this.unsubscribe(o),n.signal}static source(){let n;return{token:new Qd(function(f){n=f}),cancel:n}}};function ry(t){return function(o){return t.apply(null,o)}}function sy(t){return at.isObject(t)&&t.isAxiosError===!0}const rh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rh).forEach(([t,n])=>{rh[n]=t});function tp(t){const n=new zr(t),o=Sd(zr.prototype.request,n);return at.extend(o,zr.prototype,n,{allOwnKeys:!0}),at.extend(o,n,null,{allOwnKeys:!0}),o.create=function(f){return tp(Gr(t,f))},o}const ae=tp(qo);ae.Axios=zr;ae.CanceledError=Rs;ae.CancelToken=ny;ae.isCancel=Zd;ae.VERSION=Xd;ae.toFormData=xl;ae.AxiosError=ie;ae.Cancel=ae.CanceledError;ae.all=function(n){return Promise.all(n)};ae.spread=ry;ae.isAxiosError=sy;ae.mergeConfig=Gr;ae.AxiosHeaders=Oi;ae.formToJSON=t=>Hd(at.isHTMLForm(t)?new FormData(t):t);ae.getAdapter=Yd.getAdapter;ae.HttpStatusCode=rh;ae.default=ae;const{Axios:aL,AxiosError:lL,CanceledError:uL,isCancel:hL,CancelToken:cL,VERSION:fL,all:dL,Cancel:pL,isAxiosError:mL,spread:gL,toFormData:_L,AxiosHeaders:yL,HttpStatusCode:vL,formToJSON:bL,getAdapter:LL,mergeConfig:xL}=ae;ae.defaults.baseURL="/api";ae.defaults.headers.common["Content-Type"]="application/json";ae.defaults.withCredentials=!0;const oy=t=>{console.log("Full request URL:",`${ae.defaults.baseURL}${t.url}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,data:t.data,withCredentials:t.withCredentials,baseURL:ae.defaults.baseURL})};ae.interceptors.request.use(t=>{const n=localStorage.getItem("token");return n&&(t.headers.Authorization=`Bearer ${n}`),oy(t),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));ae.interceptors.response.use(t=>(console.log("Response:",{url:t.config.url,status:t.status,data:t.data}),t),async t=>{var n,o,l,f;if(console.error("Response error:",{url:(n=t.config)==null?void 0:n.url,status:(o=t.response)==null?void 0:o.status,data:(l=t.response)==null?void 0:l.data}),((f=t.response)==null?void 0:f.status)===401){const p=Zr();if(!t.config.url.includes("/token/")&&!t.config._retry){t.config._retry=!0;try{await p.refreshToken();const d=localStorage.getItem("token");return t.config.headers.Authorization=`Bearer ${d}`,ae(t.config)}catch(d){return console.error("Token refresh failed:",d),await p.logout(),window.location.href="/login",Promise.reject(d)}}}return Promise.reject(t)});const Zr=Bd("auth",{state:()=>({user:null,token:localStorage.getItem("token"),isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="admin"},isDealer:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="dealer"},isClient:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="client"},currentUser:t=>t.user,hasDealer:t=>{var n;return!!((n=t.user)!=null&&n.dealer)}},actions:{async initialize(t){if(console.log("Initializing auth store with state:",t),!t){console.log("No initial state, attempting to restore session..."),await this.restoreSession();return}t.isAuthenticated&&t.user?(this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1):await this.restoreSession(),this.initialized=!0},async restoreSession(){console.log("Attempting to restore session...");try{await this.refreshToken()&&(await this.fetchUserProfile(),this.isAuthenticated=!0,console.log("Session restored successfully"))}catch(t){console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,localStorage.removeItem("token")}},async login(t,n){try{const o=await ae.post("/token/",{username:t,password:n}),{access:l,refresh:f,user:p}=o.data;return localStorage.setItem("token",l),localStorage.setItem("refresh_token",f),this.token=l,this.user=p,this.isAuthenticated=!0,!0}catch(o){throw console.error("Login error:",o),o}},async checkAuth(){try{return localStorage.getItem("token")?(await this.fetchUserProfile(),this.isAuthenticated=!0,!0):(this.isAuthenticated=!1,!1)}catch(t){throw this.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),t}},async fetchUserProfile(){try{console.log("Fetching user profile...");const t=await ae.get("/users/me/");console.log("User profile response:",t.data),this.user=t.data,this.mustChangePassword=t.data.must_change_password}catch(t){throw console.error("Error fetching user profile:",t),t}},async changePassword(t,n){var o,l;try{console.log("Attempting to change password for user:",(o=this.user)==null?void 0:o.id);const f=await ae.post(`/users/${(l=this.user)==null?void 0:l.id}/change_password/`,{old_password:t,password:n});return console.log("Password change response:",f.data),this.user={...this.user,must_change_password:!1},f.data}catch(f){throw console.error("Password change error:",f),f}},async logout(){console.log("Logging out...");try{await ae.post("/token/logout/",{},{withCredentials:!0})}catch(t){console.error("Error during logout:",t)}finally{localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),this.user=null,this.token=null,this.isAuthenticated=!1,this.mustChangePassword=!1}},async refreshToken(){var t,n,o,l;try{console.log("Attempting to refresh token...");const f=await ae.post("/token/refresh/",{},{withCredentials:!0}),{access:p}=f.data;if(!p)throw new Error("No access token received");return console.log("Token refreshed successfully"),localStorage.setItem("token",p),this.token=p,p}catch(f){throw console.error("Error refreshing token:",{status:(t=f.response)==null?void 0:t.status,data:(n=f.response)==null?void 0:n.data}),(((o=f.response)==null?void 0:o.status)===401||((l=f.response)==null?void 0:l.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),f}},async fetchConcessionnaires(){this.loading=!0;try{const t=await ae.get("/utilisateurs/",{params:{role:"CONCESSIONNAIRE"}});this.concessionnaires=t.data}catch(t){throw this.error="Erreur lors de la récupération des concessionnaires",t}finally{this.loading=!1}},async setConcessionnaire(t,n){this.loading=!0;try{await ae.patch(`/utilisateurs/${t}/`,{concessionnaire:n}),this.user&&this.user.id===t&&(this.user.dealer=n)}catch(o){throw this.error="Erreur lors de la mise à jour du concessionnaire",o}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await ae.post("/utilisateurs/",t)).data}catch(n){throw this.error="Erreur lors de la création de l'utilisateur",n}finally{this.loading=!1}},async updateUserRole(t,n){this.loading=!0;try{const o=await ae.patch(`/utilisateurs/${t}/`,{role:n});return this.user&&this.user.id===t&&(this.user.user_type=n),o.data}catch(o){throw this.error="Erreur lors de la mise à jour du rôle",o}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ws=typeof document<"u";function ep(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ay(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ep(t.default)}const Ce=Object.assign;function Ou(t,n){const o={};for(const l in n){const f=n[l];o[l]=un(f)?f.map(t):t(f)}return o}const So=()=>{},un=Array.isArray,ip=/#/g,ly=/&/g,uy=/\//g,hy=/=/g,cy=/\?/g,np=/\+/g,fy=/%5B/g,dy=/%5D/g,rp=/%5E/g,py=/%60/g,sp=/%7B/g,my=/%7C/g,op=/%7D/g,gy=/%20/g;function Th(t){return encodeURI(""+t).replace(my,"|").replace(fy,"[").replace(dy,"]")}function _y(t){return Th(t).replace(sp,"{").replace(op,"}").replace(rp,"^")}function sh(t){return Th(t).replace(np,"%2B").replace(gy,"+").replace(ip,"%23").replace(ly,"%26").replace(py,"`").replace(sp,"{").replace(op,"}").replace(rp,"^")}function yy(t){return sh(t).replace(hy,"%3D")}function vy(t){return Th(t).replace(ip,"%23").replace(cy,"%3F")}function by(t){return t==null?"":vy(t).replace(uy,"%2F")}function zo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Ly=/\/$/,xy=t=>t.replace(Ly,"");function Fu(t,n,o="/"){let l,f={},p="",d="";const b=n.indexOf("#");let x=n.indexOf("?");return b<x&&b>=0&&(x=-1),x>-1&&(l=n.slice(0,x),p=n.slice(x+1,b>-1?b:n.length),f=t(p)),b>-1&&(l=l||n.slice(0,b),d=n.slice(b,n.length)),l=ky(l??n,o),{fullPath:l+(p&&"?")+p+d,path:l,query:f,hash:zo(d)}}function wy(t,n){const o=n.query?t(n.query):"";return n.path+(o&&"?")+o+(n.hash||"")}function zc(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function Cy(t,n,o){const l=n.matched.length-1,f=o.matched.length-1;return l>-1&&l===f&&Ss(n.matched[l],o.matched[f])&&ap(n.params,o.params)&&t(n.query)===t(o.query)&&n.hash===o.hash}function Ss(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function ap(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const o in t)if(!Ey(t[o],n[o]))return!1;return!0}function Ey(t,n){return un(t)?jc(t,n):un(n)?jc(n,t):t===n}function jc(t,n){return un(n)?t.length===n.length&&t.every((o,l)=>o===n[l]):t.length===1&&t[0]===n}function ky(t,n){if(t.startsWith("/"))return t;if(!t)return n;const o=n.split("/"),l=t.split("/"),f=l[l.length-1];(f===".."||f===".")&&l.push("");let p=o.length-1,d,b;for(d=0;d<l.length;d++)if(b=l[d],b!==".")if(b==="..")p>1&&p--;else break;return o.slice(0,p).join("/")+"/"+l.slice(d).join("/")}const nr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var jo;(function(t){t.pop="pop",t.push="push"})(jo||(jo={}));var Ao;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ao||(Ao={}));function My(t){if(!t)if(ws){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),xy(t)}const Py=/^[^#]+#/;function By(t,n){return t.replace(Py,"#")+n}function Sy(t,n){const o=document.documentElement.getBoundingClientRect(),l=t.getBoundingClientRect();return{behavior:n.behavior,left:l.left-o.left-(n.left||0),top:l.top-o.top-(n.top||0)}}const El=()=>({left:window.scrollX,top:window.scrollY});function Ay(t){let n;if("el"in t){const o=t.el,l=typeof o=="string"&&o.startsWith("#"),f=typeof o=="string"?l?document.getElementById(o.slice(1)):document.querySelector(o):o;if(!f)return;n=Sy(f,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function Uc(t,n){return(history.state?history.state.position-n:-1)+t}const oh=new Map;function Ty(t,n){oh.set(t,n)}function Dy(t){const n=oh.get(t);return oh.delete(t),n}let Ry=()=>location.protocol+"//"+location.host;function lp(t,n){const{pathname:o,search:l,hash:f}=n,p=t.indexOf("#");if(p>-1){let b=f.includes(t.slice(p))?t.slice(p).length:1,x=f.slice(b);return x[0]!=="/"&&(x="/"+x),zc(x,"")}return zc(o,t)+l+f}function Oy(t,n,o,l){let f=[],p=[],d=null;const b=({state:F})=>{const j=lp(t,location),q=o.value,J=n.value;let st=0;if(F){if(o.value=j,n.value=F,d&&d===q){d=null;return}st=J?F.position-J.position:0}else l(j);f.forEach(pt=>{pt(o.value,q,{delta:st,type:jo.pop,direction:st?st>0?Ao.forward:Ao.back:Ao.unknown})})};function x(){d=o.value}function P(F){f.push(F);const j=()=>{const q=f.indexOf(F);q>-1&&f.splice(q,1)};return p.push(j),j}function E(){const{history:F}=window;F.state&&F.replaceState(Ce({},F.state,{scroll:El()}),"")}function k(){for(const F of p)F();p=[],window.removeEventListener("popstate",b),window.removeEventListener("beforeunload",E)}return window.addEventListener("popstate",b),window.addEventListener("beforeunload",E,{passive:!0}),{pauseListeners:x,listen:P,destroy:k}}function Gc(t,n,o,l=!1,f=!1){return{back:t,current:n,forward:o,replaced:l,position:window.history.length,scroll:f?El():null}}function Fy(t){const{history:n,location:o}=window,l={value:lp(t,o)},f={value:n.state};f.value||p(l.value,{back:null,current:l.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function p(x,P,E){const k=t.indexOf("#"),F=k>-1?(o.host&&document.querySelector("base")?t:t.slice(k))+x:Ry()+t+x;try{n[E?"replaceState":"pushState"](P,"",F),f.value=P}catch(j){console.error(j),o[E?"replace":"assign"](F)}}function d(x,P){const E=Ce({},n.state,Gc(f.value.back,x,f.value.forward,!0),P,{position:f.value.position});p(x,E,!0),l.value=x}function b(x,P){const E=Ce({},f.value,n.state,{forward:x,scroll:El()});p(E.current,E,!0);const k=Ce({},Gc(l.value,x,null),{position:E.position+1},P);p(x,k,!1),l.value=x}return{location:l,state:f,push:b,replace:d}}function Iy(t){t=My(t);const n=Fy(t),o=Oy(t,n.state,n.location,n.replace);function l(p,d=!0){d||o.pauseListeners(),history.go(p)}const f=Ce({location:"",base:t,go:l,createHref:By.bind(null,t)},n,o);return Object.defineProperty(f,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(f,"state",{enumerable:!0,get:()=>n.state.value}),f}function Ny(t){return typeof t=="string"||t&&typeof t=="object"}function up(t){return typeof t=="string"||typeof t=="symbol"}const hp=Symbol("");var Vc;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Vc||(Vc={}));function As(t,n){return Ce(new Error,{type:t,[hp]:!0},n)}function Nn(t,n){return t instanceof Error&&hp in t&&(n==null||!!(t.type&n))}const Hc="[^/]+?",zy={sensitive:!1,strict:!1,start:!0,end:!0},jy=/[.+*?^${}()[\]/\\]/g;function Uy(t,n){const o=Ce({},zy,n),l=[];let f=o.start?"^":"";const p=[];for(const P of t){const E=P.length?[]:[90];o.strict&&!P.length&&(f+="/");for(let k=0;k<P.length;k++){const F=P[k];let j=40+(o.sensitive?.25:0);if(F.type===0)k||(f+="/"),f+=F.value.replace(jy,"\\$&"),j+=40;else if(F.type===1){const{value:q,repeatable:J,optional:st,regexp:pt}=F;p.push({name:q,repeatable:J,optional:st});const bt=pt||Hc;if(bt!==Hc){j+=10;try{new RegExp(`(${bt})`)}catch(xt){throw new Error(`Invalid custom RegExp for param "${q}" (${bt}): `+xt.message)}}let ft=J?`((?:${bt})(?:/(?:${bt}))*)`:`(${bt})`;k||(ft=st&&P.length<2?`(?:/${ft})`:"/"+ft),st&&(ft+="?"),f+=ft,j+=20,st&&(j+=-8),J&&(j+=-20),bt===".*"&&(j+=-50)}E.push(j)}l.push(E)}if(o.strict&&o.end){const P=l.length-1;l[P][l[P].length-1]+=.7000000000000001}o.strict||(f+="/?"),o.end?f+="$":o.strict&&!f.endsWith("/")&&(f+="(?:/|$)");const d=new RegExp(f,o.sensitive?"":"i");function b(P){const E=P.match(d),k={};if(!E)return null;for(let F=1;F<E.length;F++){const j=E[F]||"",q=p[F-1];k[q.name]=j&&q.repeatable?j.split("/"):j}return k}function x(P){let E="",k=!1;for(const F of t){(!k||!E.endsWith("/"))&&(E+="/"),k=!1;for(const j of F)if(j.type===0)E+=j.value;else if(j.type===1){const{value:q,repeatable:J,optional:st}=j,pt=q in P?P[q]:"";if(un(pt)&&!J)throw new Error(`Provided param "${q}" is an array but it is not repeatable (* or + modifiers)`);const bt=un(pt)?pt.join("/"):pt;if(!bt)if(st)F.length<2&&(E.endsWith("/")?E=E.slice(0,-1):k=!0);else throw new Error(`Missing required param "${q}"`);E+=bt}}return E||"/"}return{re:d,score:l,keys:p,parse:b,stringify:x}}function Gy(t,n){let o=0;for(;o<t.length&&o<n.length;){const l=n[o]-t[o];if(l)return l;o++}return t.length<n.length?t.length===1&&t[0]===80?-1:1:t.length>n.length?n.length===1&&n[0]===80?1:-1:0}function cp(t,n){let o=0;const l=t.score,f=n.score;for(;o<l.length&&o<f.length;){const p=Gy(l[o],f[o]);if(p)return p;o++}if(Math.abs(f.length-l.length)===1){if(Zc(l))return 1;if(Zc(f))return-1}return f.length-l.length}function Zc(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const Vy={type:0,value:""},Hy=/[a-zA-Z0-9_]/;function Zy(t){if(!t)return[[]];if(t==="/")return[[Vy]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(j){throw new Error(`ERR (${o})/"${P}": ${j}`)}let o=0,l=o;const f=[];let p;function d(){p&&f.push(p),p=[]}let b=0,x,P="",E="";function k(){P&&(o===0?p.push({type:0,value:P}):o===1||o===2||o===3?(p.length>1&&(x==="*"||x==="+")&&n(`A repeatable param (${P}) must be alone in its segment. eg: '/:ids+.`),p.push({type:1,value:P,regexp:E,repeatable:x==="*"||x==="+",optional:x==="*"||x==="?"})):n("Invalid state to consume buffer"),P="")}function F(){P+=x}for(;b<t.length;){if(x=t[b++],x==="\\"&&o!==2){l=o,o=4;continue}switch(o){case 0:x==="/"?(P&&k(),d()):x===":"?(k(),o=1):F();break;case 4:F(),o=l;break;case 1:x==="("?o=2:Hy.test(x)?F():(k(),o=0,x!=="*"&&x!=="?"&&x!=="+"&&b--);break;case 2:x===")"?E[E.length-1]=="\\"?E=E.slice(0,-1)+x:o=3:E+=x;break;case 3:k(),o=0,x!=="*"&&x!=="?"&&x!=="+"&&b--,E="";break;default:n("Unknown state");break}}return o===2&&n(`Unfinished custom RegExp for param "${P}"`),k(),d(),f}function $y(t,n,o){const l=Uy(Zy(t.path),o),f=Ce(l,{record:t,parent:n,children:[],alias:[]});return n&&!f.record.aliasOf==!n.record.aliasOf&&n.children.push(f),f}function qy(t,n){const o=[],l=new Map;n=Wc({strict:!1,end:!0,sensitive:!1},n);function f(k){return l.get(k)}function p(k,F,j){const q=!j,J=qc(k);J.aliasOf=j&&j.record;const st=Wc(n,k),pt=[J];if("alias"in k){const xt=typeof k.alias=="string"?[k.alias]:k.alias;for(const St of xt)pt.push(qc(Ce({},J,{components:j?j.record.components:J.components,path:St,aliasOf:j?j.record:J})))}let bt,ft;for(const xt of pt){const{path:St}=xt;if(F&&St[0]!=="/"){const Nt=F.record.path,Vt=Nt[Nt.length-1]==="/"?"":"/";xt.path=F.record.path+(St&&Vt+St)}if(bt=$y(xt,F,st),j?j.alias.push(bt):(ft=ft||bt,ft!==bt&&ft.alias.push(bt),q&&k.name&&!Kc(bt)&&d(k.name)),fp(bt)&&x(bt),J.children){const Nt=J.children;for(let Vt=0;Vt<Nt.length;Vt++)p(Nt[Vt],bt,j&&j.children[Vt])}j=j||bt}return ft?()=>{d(ft)}:So}function d(k){if(up(k)){const F=l.get(k);F&&(l.delete(k),o.splice(o.indexOf(F),1),F.children.forEach(d),F.alias.forEach(d))}else{const F=o.indexOf(k);F>-1&&(o.splice(F,1),k.record.name&&l.delete(k.record.name),k.children.forEach(d),k.alias.forEach(d))}}function b(){return o}function x(k){const F=Jy(k,o);o.splice(F,0,k),k.record.name&&!Kc(k)&&l.set(k.record.name,k)}function P(k,F){let j,q={},J,st;if("name"in k&&k.name){if(j=l.get(k.name),!j)throw As(1,{location:k});st=j.record.name,q=Ce($c(F.params,j.keys.filter(ft=>!ft.optional).concat(j.parent?j.parent.keys.filter(ft=>ft.optional):[]).map(ft=>ft.name)),k.params&&$c(k.params,j.keys.map(ft=>ft.name))),J=j.stringify(q)}else if(k.path!=null)J=k.path,j=o.find(ft=>ft.re.test(J)),j&&(q=j.parse(J),st=j.record.name);else{if(j=F.name?l.get(F.name):o.find(ft=>ft.re.test(F.path)),!j)throw As(1,{location:k,currentLocation:F});st=j.record.name,q=Ce({},F.params,k.params),J=j.stringify(q)}const pt=[];let bt=j;for(;bt;)pt.unshift(bt.record),bt=bt.parent;return{name:st,path:J,params:q,matched:pt,meta:Wy(pt)}}t.forEach(k=>p(k));function E(){o.length=0,l.clear()}return{addRoute:p,resolve:P,removeRoute:d,clearRoutes:E,getRoutes:b,getRecordMatcher:f}}function $c(t,n){const o={};for(const l of n)l in t&&(o[l]=t[l]);return o}function qc(t){const n={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Ky(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function Ky(t){const n={},o=t.props||!1;if("component"in t)n.default=o;else for(const l in t.components)n[l]=typeof o=="object"?o[l]:o;return n}function Kc(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Wy(t){return t.reduce((n,o)=>Ce(n,o.meta),{})}function Wc(t,n){const o={};for(const l in t)o[l]=l in n?n[l]:t[l];return o}function Jy(t,n){let o=0,l=n.length;for(;o!==l;){const p=o+l>>1;cp(t,n[p])<0?l=p:o=p+1}const f=Yy(t);return f&&(l=n.lastIndexOf(f,l-1)),l}function Yy(t){let n=t;for(;n=n.parent;)if(fp(n)&&cp(t,n)===0)return n}function fp({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Xy(t){const n={};if(t===""||t==="?")return n;const l=(t[0]==="?"?t.slice(1):t).split("&");for(let f=0;f<l.length;++f){const p=l[f].replace(np," "),d=p.indexOf("="),b=zo(d<0?p:p.slice(0,d)),x=d<0?null:zo(p.slice(d+1));if(b in n){let P=n[b];un(P)||(P=n[b]=[P]),P.push(x)}else n[b]=x}return n}function Jc(t){let n="";for(let o in t){const l=t[o];if(o=yy(o),l==null){l!==void 0&&(n+=(n.length?"&":"")+o);continue}(un(l)?l.map(p=>p&&sh(p)):[l&&sh(l)]).forEach(p=>{p!==void 0&&(n+=(n.length?"&":"")+o,p!=null&&(n+="="+p))})}return n}function Qy(t){const n={};for(const o in t){const l=t[o];l!==void 0&&(n[o]=un(l)?l.map(f=>f==null?null:""+f):l==null?l:""+l)}return n}const tv=Symbol(""),Yc=Symbol(""),kl=Symbol(""),Dh=Symbol(""),ah=Symbol("");function yo(){let t=[];function n(l){return t.push(l),()=>{const f=t.indexOf(l);f>-1&&t.splice(f,1)}}function o(){t=[]}return{add:n,list:()=>t.slice(),reset:o}}function ur(t,n,o,l,f,p=d=>d()){const d=l&&(l.enterCallbacks[f]=l.enterCallbacks[f]||[]);return()=>new Promise((b,x)=>{const P=F=>{F===!1?x(As(4,{from:o,to:n})):F instanceof Error?x(F):Ny(F)?x(As(2,{from:n,to:F})):(d&&l.enterCallbacks[f]===d&&typeof F=="function"&&d.push(F),b())},E=p(()=>t.call(l&&l.instances[f],n,o,P));let k=Promise.resolve(E);t.length<3&&(k=k.then(P)),k.catch(F=>x(F))})}function Iu(t,n,o,l,f=p=>p()){const p=[];for(const d of t)for(const b in d.components){let x=d.components[b];if(!(n!=="beforeRouteEnter"&&!d.instances[b]))if(ep(x)){const E=(x.__vccOpts||x)[n];E&&p.push(ur(E,o,l,d,b,f))}else{let P=x();p.push(()=>P.then(E=>{if(!E)throw new Error(`Couldn't resolve component "${b}" at "${d.path}"`);const k=ay(E)?E.default:E;d.mods[b]=E,d.components[b]=k;const j=(k.__vccOpts||k)[n];return j&&ur(j,o,l,d,b,f)()}))}}return p}function Xc(t){const n=tn(kl),o=tn(Dh),l=Ge(()=>{const x=Bi(t.to);return n.resolve(x)}),f=Ge(()=>{const{matched:x}=l.value,{length:P}=x,E=x[P-1],k=o.matched;if(!E||!k.length)return-1;const F=k.findIndex(Ss.bind(null,E));if(F>-1)return F;const j=Qc(x[P-2]);return P>1&&Qc(E)===j&&k[k.length-1].path!==j?k.findIndex(Ss.bind(null,x[P-2])):F}),p=Ge(()=>f.value>-1&&rv(o.params,l.value.params)),d=Ge(()=>f.value>-1&&f.value===o.matched.length-1&&ap(o.params,l.value.params));function b(x={}){if(nv(x)){const P=n[Bi(t.replace)?"replace":"push"](Bi(t.to)).catch(So);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>P),P}return Promise.resolve()}return{route:l,href:Ge(()=>l.value.href),isActive:p,isExactActive:d,navigate:b}}function ev(t){return t.length===1?t[0]:t}const iv=gr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Xc,setup(t,{slots:n}){const o=Hr(Xc(t)),{options:l}=tn(kl),f=Ge(()=>({[tf(t.activeClass,l.linkActiveClass,"router-link-active")]:o.isActive,[tf(t.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive}));return()=>{const p=n.default&&ev(n.default(o));return t.custom?p:Ld("a",{"aria-current":o.isExactActive?t.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:f.value},p)}}}),Za=iv;function nv(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function rv(t,n){for(const o in n){const l=n[o],f=t[o];if(typeof l=="string"){if(l!==f)return!1}else if(!un(f)||f.length!==l.length||l.some((p,d)=>p!==f[d]))return!1}return!0}function Qc(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const tf=(t,n,o)=>t??n??o,sv=gr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:o}){const l=tn(ah),f=Ge(()=>t.route||l.value),p=tn(Yc,0),d=Ge(()=>{let P=Bi(p);const{matched:E}=f.value;let k;for(;(k=E[P])&&!k.components;)P++;return P}),b=Ge(()=>f.value.matched[d.value]);Na(Yc,Ge(()=>d.value+1)),Na(tv,b),Na(ah,f);const x=ce();return Nr(()=>[x.value,b.value,t.name],([P,E,k],[F,j,q])=>{E&&(E.instances[k]=P,j&&j!==E&&P&&P===F&&(E.leaveGuards.size||(E.leaveGuards=j.leaveGuards),E.updateGuards.size||(E.updateGuards=j.updateGuards))),P&&E&&(!j||!Ss(E,j)||!F)&&(E.enterCallbacks[k]||[]).forEach(J=>J(P))},{flush:"post"}),()=>{const P=f.value,E=t.name,k=b.value,F=k&&k.components[E];if(!F)return ef(o.default,{Component:F,route:P});const j=k.props[E],q=j?j===!0?P.params:typeof j=="function"?j(P):j:null,st=Ld(F,Ce({},q,n,{onVnodeUnmounted:pt=>{pt.component.isUnmounted&&(k.instances[E]=null)},ref:x}));return ef(o.default,{Component:st,route:P})||st}}});function ef(t,n){if(!t)return null;const o=t(n);return o.length===1?o[0]:o}const dp=sv;function ov(t){const n=qy(t.routes,t),o=t.parseQuery||Xy,l=t.stringifyQuery||Jc,f=t.history,p=yo(),d=yo(),b=yo(),x=Sm(nr);let P=nr;ws&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const E=Ou.bind(null,ut=>""+ut),k=Ou.bind(null,by),F=Ou.bind(null,zo);function j(ut,Pt){let kt,Ft;return up(ut)?(kt=n.getRecordMatcher(ut),Ft=Pt):Ft=ut,n.addRoute(Ft,kt)}function q(ut){const Pt=n.getRecordMatcher(ut);Pt&&n.removeRoute(Pt)}function J(){return n.getRoutes().map(ut=>ut.record)}function st(ut){return!!n.getRecordMatcher(ut)}function pt(ut,Pt){if(Pt=Ce({},Pt||x.value),typeof ut=="string"){const Y=Fu(o,ut,Pt.path),ht=n.resolve({path:Y.path},Pt),mt=f.createHref(Y.fullPath);return Ce(Y,ht,{params:F(ht.params),hash:zo(Y.hash),redirectedFrom:void 0,href:mt})}let kt;if(ut.path!=null)kt=Ce({},ut,{path:Fu(o,ut.path,Pt.path).path});else{const Y=Ce({},ut.params);for(const ht in Y)Y[ht]==null&&delete Y[ht];kt=Ce({},ut,{params:k(Y)}),Pt.params=k(Pt.params)}const Ft=n.resolve(kt,Pt),ge=ut.hash||"";Ft.params=E(F(Ft.params));const z=wy(l,Ce({},ut,{hash:_y(ge),path:Ft.path})),U=f.createHref(z);return Ce({fullPath:z,hash:ge,query:l===Jc?Qy(ut.query):ut.query||{}},Ft,{redirectedFrom:void 0,href:U})}function bt(ut){return typeof ut=="string"?Fu(o,ut,x.value.path):Ce({},ut)}function ft(ut,Pt){if(P!==ut)return As(8,{from:Pt,to:ut})}function xt(ut){return Vt(ut)}function St(ut){return xt(Ce(bt(ut),{replace:!0}))}function Nt(ut){const Pt=ut.matched[ut.matched.length-1];if(Pt&&Pt.redirect){const{redirect:kt}=Pt;let Ft=typeof kt=="function"?kt(ut):kt;return typeof Ft=="string"&&(Ft=Ft.includes("?")||Ft.includes("#")?Ft=bt(Ft):{path:Ft},Ft.params={}),Ce({query:ut.query,hash:ut.hash,params:Ft.path!=null?{}:ut.params},Ft)}}function Vt(ut,Pt){const kt=P=pt(ut),Ft=x.value,ge=ut.state,z=ut.force,U=ut.replace===!0,Y=Nt(kt);if(Y)return Vt(Ce(bt(Y),{state:typeof Y=="object"?Ce({},ge,Y.state):ge,force:z,replace:U}),Pt||kt);const ht=kt;ht.redirectedFrom=Pt;let mt;return!z&&Cy(l,Ft,kt)&&(mt=As(16,{to:ht,from:Ft}),le(Ft,Ft,!0,!1)),(mt?Promise.resolve(mt):Dt(ht,Ft)).catch(ct=>Nn(ct)?Nn(ct,2)?ct:zt(ct):Mt(ct,ht,Ft)).then(ct=>{if(ct){if(Nn(ct,2))return Vt(Ce({replace:U},bt(ct.to),{state:typeof ct.to=="object"?Ce({},ge,ct.to.state):ge,force:z}),Pt||ht)}else ct=xe(ht,Ft,!0,U,ge);return ne(ht,Ft,ct),ct})}function vt(ut,Pt){const kt=ft(ut,Pt);return kt?Promise.reject(kt):Promise.resolve()}function _t(ut){const Pt=ke.values().next().value;return Pt&&typeof Pt.runWithContext=="function"?Pt.runWithContext(ut):ut()}function Dt(ut,Pt){let kt;const[Ft,ge,z]=av(ut,Pt);kt=Iu(Ft.reverse(),"beforeRouteLeave",ut,Pt);for(const Y of Ft)Y.leaveGuards.forEach(ht=>{kt.push(ur(ht,ut,Pt))});const U=vt.bind(null,ut,Pt);return kt.push(U),Wt(kt).then(()=>{kt=[];for(const Y of p.list())kt.push(ur(Y,ut,Pt));return kt.push(U),Wt(kt)}).then(()=>{kt=Iu(ge,"beforeRouteUpdate",ut,Pt);for(const Y of ge)Y.updateGuards.forEach(ht=>{kt.push(ur(ht,ut,Pt))});return kt.push(U),Wt(kt)}).then(()=>{kt=[];for(const Y of z)if(Y.beforeEnter)if(un(Y.beforeEnter))for(const ht of Y.beforeEnter)kt.push(ur(ht,ut,Pt));else kt.push(ur(Y.beforeEnter,ut,Pt));return kt.push(U),Wt(kt)}).then(()=>(ut.matched.forEach(Y=>Y.enterCallbacks={}),kt=Iu(z,"beforeRouteEnter",ut,Pt,_t),kt.push(U),Wt(kt))).then(()=>{kt=[];for(const Y of d.list())kt.push(ur(Y,ut,Pt));return kt.push(U),Wt(kt)}).catch(Y=>Nn(Y,8)?Y:Promise.reject(Y))}function ne(ut,Pt,kt){b.list().forEach(Ft=>_t(()=>Ft(ut,Pt,kt)))}function xe(ut,Pt,kt,Ft,ge){const z=ft(ut,Pt);if(z)return z;const U=Pt===nr,Y=ws?history.state:{};kt&&(Ft||U?f.replace(ut.fullPath,Ce({scroll:U&&Y&&Y.scroll},ge)):f.push(ut.fullPath,ge)),x.value=ut,le(ut,Pt,kt,U),zt()}let Xe;function qe(){Xe||(Xe=f.listen((ut,Pt,kt)=>{if(!fe.listening)return;const Ft=pt(ut),ge=Nt(Ft);if(ge){Vt(Ce(ge,{replace:!0,force:!0}),Ft).catch(So);return}P=Ft;const z=x.value;ws&&Ty(Uc(z.fullPath,kt.delta),El()),Dt(Ft,z).catch(U=>Nn(U,12)?U:Nn(U,2)?(Vt(Ce(bt(U.to),{force:!0}),Ft).then(Y=>{Nn(Y,20)&&!kt.delta&&kt.type===jo.pop&&f.go(-1,!1)}).catch(So),Promise.reject()):(kt.delta&&f.go(-kt.delta,!1),Mt(U,Ft,z))).then(U=>{U=U||xe(Ft,z,!1),U&&(kt.delta&&!Nn(U,8)?f.go(-kt.delta,!1):kt.type===jo.pop&&Nn(U,20)&&f.go(-1,!1)),ne(Ft,z,U)}).catch(So)}))}let Vi=yo(),re=yo(),Kt;function Mt(ut,Pt,kt){zt(ut);const Ft=re.list();return Ft.length?Ft.forEach(ge=>ge(ut,Pt,kt)):console.error(ut),Promise.reject(ut)}function vi(){return Kt&&x.value!==nr?Promise.resolve():new Promise((ut,Pt)=>{Vi.add([ut,Pt])})}function zt(ut){return Kt||(Kt=!ut,qe(),Vi.list().forEach(([Pt,kt])=>ut?kt(ut):Pt()),Vi.reset()),ut}function le(ut,Pt,kt,Ft){const{scrollBehavior:ge}=t;if(!ws||!ge)return Promise.resolve();const z=!kt&&Dy(Uc(ut.fullPath,0))||(Ft||!kt)&&history.state&&history.state.scroll||null;return dl().then(()=>ge(ut,Pt,z)).then(U=>U&&Ay(U)).catch(U=>Mt(U,ut,Pt))}const be=ut=>f.go(ut);let Oe;const ke=new Set,fe={currentRoute:x,listening:!0,addRoute:j,removeRoute:q,clearRoutes:n.clearRoutes,hasRoute:st,getRoutes:J,resolve:pt,options:t,push:xt,replace:St,go:be,back:()=>be(-1),forward:()=>be(1),beforeEach:p.add,beforeResolve:d.add,afterEach:b.add,onError:re.add,isReady:vi,install(ut){const Pt=this;ut.component("RouterLink",Za),ut.component("RouterView",dp),ut.config.globalProperties.$router=Pt,Object.defineProperty(ut.config.globalProperties,"$route",{enumerable:!0,get:()=>Bi(x)}),ws&&!Oe&&x.value===nr&&(Oe=!0,xt(f.location).catch(ge=>{}));const kt={};for(const ge in nr)Object.defineProperty(kt,ge,{get:()=>x.value[ge],enumerable:!0});ut.provide(kl,Pt),ut.provide(Dh,Uf(kt)),ut.provide(ah,x);const Ft=ut.unmount;ke.add(ut),ut.unmount=function(){ke.delete(ut),ke.size<1&&(P=nr,Xe&&Xe(),Xe=null,x.value=nr,Oe=!1,Kt=!1),Ft()}}};function Wt(ut){return ut.reduce((Pt,kt)=>Pt.then(()=>_t(kt)),Promise.resolve())}return fe}function av(t,n){const o=[],l=[],f=[],p=Math.max(n.matched.length,t.matched.length);for(let d=0;d<p;d++){const b=n.matched[d];b&&(t.matched.find(P=>Ss(P,b))?l.push(b):o.push(b));const x=t.matched[d];x&&(n.matched.find(P=>Ss(P,x))||f.push(x))}return[o,l,f]}function Rh(){return tn(kl)}function wL(t){return tn(Dh)}var Gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function lv(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var mp=lv,uv=typeof Gn=="object"&&Gn&&Gn.Object===Object&&Gn,hv=uv,cv=hv,fv=typeof self=="object"&&self&&self.Object===Object&&self,dv=cv||fv||Function("return this")(),gp=dv,pv=gp,mv=function(){return pv.Date.now()},gv=mv,_v=/\s/;function yv(t){for(var n=t.length;n--&&_v.test(t.charAt(n)););return n}var vv=yv,bv=vv,Lv=/^\s+/;function xv(t){return t&&t.slice(0,bv(t)+1).replace(Lv,"")}var wv=xv,Cv=gp,Ev=Cv.Symbol,_p=Ev,nf=_p,yp=Object.prototype,kv=yp.hasOwnProperty,Mv=yp.toString,vo=nf?nf.toStringTag:void 0;function Pv(t){var n=kv.call(t,vo),o=t[vo];try{t[vo]=void 0;var l=!0}catch{}var f=Mv.call(t);return l&&(n?t[vo]=o:delete t[vo]),f}var Bv=Pv,Sv=Object.prototype,Av=Sv.toString;function Tv(t){return Av.call(t)}var Dv=Tv,rf=_p,Rv=Bv,Ov=Dv,Fv="[object Null]",Iv="[object Undefined]",sf=rf?rf.toStringTag:void 0;function Nv(t){return t==null?t===void 0?Iv:Fv:sf&&sf in Object(t)?Rv(t):Ov(t)}var zv=Nv;function jv(t){return t!=null&&typeof t=="object"}var Uv=jv,Gv=zv,Vv=Uv,Hv="[object Symbol]";function Zv(t){return typeof t=="symbol"||Vv(t)&&Gv(t)==Hv}var $v=Zv,qv=wv,of=mp,Kv=$v,af=NaN,Wv=/^[-+]0x[0-9a-f]+$/i,Jv=/^0b[01]+$/i,Yv=/^0o[0-7]+$/i,Xv=parseInt;function Qv(t){if(typeof t=="number")return t;if(Kv(t))return af;if(of(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=of(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=qv(t);var o=Jv.test(t);return o||Yv.test(t)?Xv(t.slice(2),o?2:8):Wv.test(t)?af:+t}var t4=Qv,e4=mp,Nu=gv,lf=t4,i4="Expected a function",n4=Math.max,r4=Math.min;function s4(t,n,o){var l,f,p,d,b,x,P=0,E=!1,k=!1,F=!0;if(typeof t!="function")throw new TypeError(i4);n=lf(n)||0,e4(o)&&(E=!!o.leading,k="maxWait"in o,p=k?n4(lf(o.maxWait)||0,n):p,F="trailing"in o?!!o.trailing:F);function j(Nt){var Vt=l,vt=f;return l=f=void 0,P=Nt,d=t.apply(vt,Vt),d}function q(Nt){return P=Nt,b=setTimeout(pt,n),E?j(Nt):d}function J(Nt){var Vt=Nt-x,vt=Nt-P,_t=n-Vt;return k?r4(_t,p-vt):_t}function st(Nt){var Vt=Nt-x,vt=Nt-P;return x===void 0||Vt>=n||Vt<0||k&&vt>=p}function pt(){var Nt=Nu();if(st(Nt))return bt(Nt);b=setTimeout(pt,J(Nt))}function bt(Nt){return b=void 0,F&&l?j(Nt):(l=f=void 0,d)}function ft(){b!==void 0&&clearTimeout(b),P=0,l=x=f=b=void 0}function xt(){return b===void 0?d:bt(Nu())}function St(){var Nt=Nu(),Vt=st(Nt);if(l=arguments,f=this,x=Nt,Vt){if(b===void 0)return q(x);if(k)return clearTimeout(b),b=setTimeout(pt,n),j(x)}return b===void 0&&(b=setTimeout(pt,n)),d}return St.cancel=ft,St.flush=xt,St}var o4=s4;const a4=pp(o4),l4={class:"relative"},u4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},h4=["onClick"],c4=gr({__name:"SearchBar",emits:["select-location"],setup(t,{emit:n}){const o=ce(""),l=ce([]),f=n,p=a4(async x=>{if(x.length<3){l.value=[];return}try{const E=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(x)}`)).json();l.value=E}catch(P){console.error("Erreur lors de la recherche d'adresse:",P),l.value=[]}},300);function d(){p(o.value)}function b(x){o.value=x.display_name,l.value=[],f("select-location",{lat:parseFloat(x.lat),lng:parseFloat(x.lon)})}return(x,P)=>(he(),ye("div",l4,[Mi(lt("input",{"onUpdate:modelValue":P[0]||(P[0]=E=>o.value=E),onInput:d,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[ji,o.value]]),l.value.length>0?(he(),ye("div",u4,[(he(!0),ye(gi,null,Fr(l.value,E=>(he(),ye("div",{key:E.place_id,onClick:k=>b(E),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Ue(E.display_name),9,h4))),128))])):di("",!0)]))}}),vp=(t,n)=>{const o=t.__vccOpts||t;for(const[l,f]of n)o[l]=f;return o},f4=vp(c4,[["__scopeId","data-v-4cda7c14"]]),d4={class:"h-full"},p4={key:0,class:"bg-white shadow-sm fixed top-0 left-0 right-0 z-50"},m4={class:"mx-auto px-4 sm:px-6 lg:px-8"},g4={class:"flex h-16 items-center justify-between"},_4={class:"flex items-center space-x-8"},y4={class:"hidden md:flex space-x-6"},v4={class:"flex-1 max-w-2xl mx-8"},b4={class:"flex items-center space-x-4"},L4={class:"relative"},x4={class:"flex flex-col items-end"},w4={class:"text-sm font-medium text-gray-700"},C4={class:"text-xs text-gray-500"},E4=["src"],k4={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"},M4=gr({__name:"App",setup(t){const n=Rh(),o=Zr(),l=ce(!1),f=Ge(()=>{var q;return((q=o.user)==null?void 0:q.username)||""}),p=Ge(()=>{var q;return((q=o.user)==null?void 0:q.user_type)||""}),d=Ge(()=>{var q;return((q=o.user)==null?void 0:q.user_type)==="admin"}),b=ce(""),x=Ge(()=>o.isAuthenticated),P=[{name:"Carte",to:"/"},{name:"Projets",to:"/projects"}],E=Ge(()=>x.value?d.value?[...P,{name:"Utilisateurs",to:"/users"}]:P:[]),k=Ge(()=>x.value?[{name:"Mon profil",to:"/profile"},{name:"Paramètres",to:"/settings"}]:[]);async function F(){try{await o.logout(),n.push("/login")}catch(q){console.error("Erreur lors de la déconnexion:",q)}}function j(q){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:q.lat,lng:q.lng,zoom:16}}))}return Ho(async()=>{if(localStorage.getItem("access_token"))try{await o.checkAuth()}catch{n.push("/login")}}),(q,J)=>(he(),ye("div",d4,[x.value?(he(),ye("header",p4,[lt("nav",m4,[lt("div",g4,[lt("div",_4,[Ye(Bi(Za),{to:"/",class:"text-xl font-semibold text-primary-600"},{default:Eo(()=>J[2]||(J[2]=[Vn(" IrrigationDesign ")])),_:1}),lt("div",y4,[(he(!0),ye(gi,null,Fr(E.value,st=>(he(),Ku(Bi(Za),{key:st.name,to:st.to,class:Ms(["text-sm font-medium transition-colors duration-200",[q.$route.path===st.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Eo(()=>[Vn(Ue(st.name),1)]),_:2},1032,["to","class"]))),128))])]),lt("div",v4,[Ye(f4,{onSelectLocation:j})]),lt("div",b4,[J[3]||(J[3]=lt("button",{class:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[lt("span",{class:"sr-only"},"Voir les notifications"),lt("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[lt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),lt("div",L4,[lt("button",{onClick:J[0]||(J[0]=st=>l.value=!l.value),class:"flex items-center space-x-3 focus:outline-none"},[lt("div",x4,[lt("span",w4,Ue(f.value),1),lt("span",C4,Ue(p.value),1)]),lt("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:b.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(f.value),alt:""},null,8,E4)]),l.value?(he(),ye("div",k4,[(he(!0),ye(gi,null,Fr(k.value,st=>(he(),Ku(Bi(Za),{key:st.name,to:st.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:J[1]||(J[1]=pt=>l.value=!1)},{default:Eo(()=>[Vn(Ue(st.name),1)]),_:2},1032,["to"]))),128)),lt("button",{onClick:F,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):di("",!0)])])])])])):di("",!0),lt("main",{class:Ms({"pt-16":x.value,"h-full":!x.value,"h-[calc(100%-4rem)]":x.value})},[Ye(Bi(dp))],2)]))}}),P4="modulepreload",B4=function(t){return"/"+t},uf={},rr=function(n,o,l){let f=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),b=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));f=Promise.allSettled(o.map(x=>{if(x=B4(x),x in uf)return;uf[x]=!0;const P=x.endsWith(".css"),E=P?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${E}`))return;const k=document.createElement("link");if(k.rel=P?"stylesheet":P4,P||(k.as="script"),k.crossOrigin="",k.href=x,b&&k.setAttribute("nonce",b),document.head.appendChild(k),P)return new Promise((F,j)=>{k.addEventListener("load",F),k.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${x}`)))})}))}function p(d){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=d,window.dispatchEvent(b),!b.defaultPrevented)throw d}return f.then(d=>{for(const b of d||[])b.status==="rejected"&&p(b.reason);return n().catch(p)})},S4={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},A4={class:"max-w-md w-full space-y-8"},T4={class:"space-y-4"},D4={class:"mt-1"},R4={class:"mt-1"},O4={class:"mt-1"},F4={key:0,class:"rounded-md bg-red-50 p-4"},I4={class:"flex"},N4={class:"ml-3"},z4={class:"text-sm font-medium text-red-800"},j4={key:1,class:"rounded-md bg-yellow-50 p-4"},U4={class:"flex"},G4={class:"ml-3"},V4={class:"mt-2 text-sm text-yellow-700"},H4={class:"list-disc pl-5 space-y-1"},Z4=["disabled"],$4={class:"absolute left-0 inset-y-0 flex items-center pl-3"},q4={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},K4={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},W4=gr({__name:"ChangePasswordForm",setup(t){const n=Rh(),o=Zr(),l=Hr({oldPassword:"",newPassword:"",confirmPassword:""}),f=ce(!1),p=ce("");Ho(()=>{var P,E;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:o.isAuthenticated,userId:(P=o.user)==null?void 0:P.id,mustChangePassword:(E=o.user)==null?void 0:E.must_change_password})});const d=Ge(()=>{const P=[];return l.newPassword&&l.newPassword.length<8&&P.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),l.newPassword&&l.confirmPassword&&l.newPassword!==l.confirmPassword&&P.push("Les mots de passe ne correspondent pas"),P}),b=Ge(()=>l.oldPassword.length>0&&l.newPassword.length>=8&&l.newPassword===l.confirmPassword);async function x(){var P,E,k,F,j,q,J,st;if(!b.value){p.value="Veuillez corriger les erreurs avant de continuer";return}if(!((P=o.user)!=null&&P.id)){p.value="Erreur : utilisateur non identifié";return}f.value=!0,p.value="";try{console.log("Submitting password change..."),await o.changePassword(l.oldPassword,l.newPassword),console.log("Password changed successfully"),n.push("/")}catch(pt){console.error("Password change failed:",pt),(k=(E=pt.response)==null?void 0:E.data)!=null&&k.detail?p.value=pt.response.data.detail:(j=(F=pt.response)==null?void 0:F.data)!=null&&j.old_password?p.value=pt.response.data.old_password[0]:(J=(q=pt.response)==null?void 0:q.data)!=null&&J.password?p.value=pt.response.data.password[0]:((st=pt.response)==null?void 0:st.status)===401?(p.value="Session expirée, veuillez vous reconnecter",await o.logout(),n.push("/login")):p.value="Une erreur est survenue lors du changement de mot de passe"}finally{f.value=!1}}return(P,E)=>(he(),ye("div",S4,[lt("div",A4,[E[12]||(E[12]=lt("div",null,[lt("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),lt("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),lt("form",{class:"mt-8 space-y-6",onSubmit:Cd(x,["prevent"])},[lt("div",T4,[lt("div",null,[E[3]||(E[3]=lt("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),lt("div",D4,[Mi(lt("input",{id:"old-password","onUpdate:modelValue":E[0]||(E[0]=k=>l.oldPassword=k),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[ji,l.oldPassword]])])]),lt("div",null,[E[4]||(E[4]=lt("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),lt("div",R4,[Mi(lt("input",{id:"new-password","onUpdate:modelValue":E[1]||(E[1]=k=>l.newPassword=k),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[ji,l.newPassword]])]),E[5]||(E[5]=lt("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),lt("div",null,[E[6]||(E[6]=lt("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),lt("div",O4,[Mi(lt("input",{id:"confirm-password","onUpdate:modelValue":E[2]||(E[2]=k=>l.confirmPassword=k),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[ji,l.confirmPassword]])])])]),p.value?(he(),ye("div",F4,[lt("div",I4,[E[7]||(E[7]=lt("div",{class:"flex-shrink-0"},[lt("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[lt("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),lt("div",N4,[lt("h3",z4,Ue(p.value),1)])])])):di("",!0),d.value.length>0?(he(),ye("div",j4,[lt("div",U4,[E[9]||(E[9]=lt("div",{class:"flex-shrink-0"},[lt("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[lt("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),lt("div",G4,[E[8]||(E[8]=lt("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),lt("div",V4,[lt("ul",H4,[(he(!0),ye(gi,null,Fr(d.value,(k,F)=>(he(),ye("li",{key:F},Ue(k),1))),128))])])])])])):di("",!0),lt("div",null,[lt("button",{type:"submit",disabled:f.value||!b.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[lt("span",$4,[f.value?(he(),ye("svg",K4,E[11]||(E[11]=[lt("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),lt("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(he(),ye("svg",q4,E[10]||(E[10]=[lt("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Vn(" "+Ue(f.value?"Modification en cours...":"Changer le mot de passe"),1)],8,Z4)])],32)])]))}}),J4={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Y4={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},X4={class:"bg-white py-8 px-4 shadow-sm rounded-lg sm:px-10"},Q4={key:0,class:"rounded-md bg-red-50 p-4"},tb={class:"flex"},eb={class:"ml-3"},ib={class:"text-sm font-medium text-red-800"},nb={class:"mt-1"},rb={class:"mt-1"},sb={class:"flex items-center justify-between"},ob={class:"flex items-center"},ab={class:"text-sm"},lb=["disabled"],ub={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},hb=gr({__name:"LoginView",setup(t){const n=Rh(),o=Zr(),l=ce(!1),f=ce(null),p=Hr({username:"",password:"",rememberMe:!1});Ho(()=>{var b;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(b=window.INITIAL_STATE)!=null&&b.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),n.push("/"))});async function d(){var b,x,P,E;console.log("Attempting login..."),l.value=!0,f.value=null;try{await o.login(p.username,p.password),console.log("Login successful, checking user type..."),(b=o.user)!=null&&b.must_change_password?(console.log("User must change password, redirecting..."),n.push("/change-password")):o.isClient&&!o.hasDealer?(console.log("Client without dealer, redirecting to dealer selection..."),n.push("/select-dealer")):(console.log("Normal login flow, redirecting to home..."),n.push("/"))}catch(k){console.error("Login error:",k),((x=k.response)==null?void 0:x.status)===401?f.value="Identifiants incorrects":(E=(P=k.response)==null?void 0:P.data)!=null&&E.detail?f.value=k.response.data.detail:f.value="Une erreur est survenue lors de la connexion"}finally{l.value=!1}}return(b,x)=>{const P=n0("router-link");return he(),ye("div",J4,[x[9]||(x[9]=lt("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[lt("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," IrrigationDesign "),lt("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),lt("div",Y4,[lt("div",X4,[lt("form",{class:"space-y-6",onSubmit:Cd(d,["prevent"])},[f.value?(he(),ye("div",Q4,[lt("div",tb,[x[3]||(x[3]=lt("div",{class:"flex-shrink-0"},[lt("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[lt("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),lt("div",eb,[lt("h3",ib,Ue(f.value),1)])])])):di("",!0),lt("div",null,[x[4]||(x[4]=lt("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),lt("div",nb,[Mi(lt("input",{id:"username","onUpdate:modelValue":x[0]||(x[0]=E=>p.username=E),name:"username",type:"text",required:"",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[ji,p.username]])])]),lt("div",null,[x[5]||(x[5]=lt("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),lt("div",rb,[Mi(lt("input",{id:"password","onUpdate:modelValue":x[1]||(x[1]=E=>p.password=E),name:"password",type:"password",required:"",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Mot de passe"},null,512),[[ji,p.password]])])]),lt("div",sb,[lt("div",ob,[Mi(lt("input",{id:"remember-me","onUpdate:modelValue":x[2]||(x[2]=E=>p.rememberMe=E),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[mg,p.rememberMe]]),x[6]||(x[6]=lt("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),lt("div",ab,[Ye(P,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Eo(()=>x[7]||(x[7]=[Vn(" Mot de passe oublié ? ")])),_:1})])]),lt("div",null,[lt("button",{type:"submit",disabled:l.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[l.value?(he(),ye("svg",ub,x[8]||(x[8]=[lt("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),lt("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):di("",!0),Vn(" "+Ue(l.value?"Connexion en cours...":"Se connecter"),1)],8,lb)])],32)])])])}}});var lh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,n){(function(o,l){l(n)})(Gn,function(o){var l="1.9.4";function f(e){var s,h,m,v;for(h=1,m=arguments.length;h<m;h++){v=arguments[h];for(s in v)e[s]=v[s]}return e}var p=Object.create||function(){function e(){}return function(s){return e.prototype=s,new e}}();function d(e,s){var h=Array.prototype.slice;if(e.bind)return e.bind.apply(e,h.call(arguments,1));var m=h.call(arguments,2);return function(){return e.apply(s,m.length?m.concat(h.call(arguments)):arguments)}}var b=0;function x(e){return"_leaflet_id"in e||(e._leaflet_id=++b),e._leaflet_id}function P(e,s,h){var m,v,B,G;return G=function(){m=!1,v&&(B.apply(h,v),v=!1)},B=function(){m?v=arguments:(e.apply(h,arguments),setTimeout(G,s),m=!0)},B}function E(e,s,h){var m=s[1],v=s[0],B=m-v;return e===m&&h?e:((e-v)%B+B)%B+v}function k(){return!1}function F(e,s){if(s===!1)return e;var h=Math.pow(10,s===void 0?6:s);return Math.round(e*h)/h}function j(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function q(e){return j(e).split(/\s+/)}function J(e,s){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?p(e.options):{});for(var h in s)e.options[h]=s[h];return e.options}function st(e,s,h){var m=[];for(var v in e)m.push(encodeURIComponent(h?v.toUpperCase():v)+"="+encodeURIComponent(e[v]));return(!s||s.indexOf("?")===-1?"?":"&")+m.join("&")}var pt=/\{ *([\w_ -]+) *\}/g;function bt(e,s){return e.replace(pt,function(h,m){var v=s[m];if(v===void 0)throw new Error("No value provided for variable "+h);return typeof v=="function"&&(v=v(s)),v})}var ft=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function xt(e,s){for(var h=0;h<e.length;h++)if(e[h]===s)return h;return-1}var St="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Nt(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var Vt=0;function vt(e){var s=+new Date,h=Math.max(0,16-(s-Vt));return Vt=s+h,window.setTimeout(e,h)}var _t=window.requestAnimationFrame||Nt("RequestAnimationFrame")||vt,Dt=window.cancelAnimationFrame||Nt("CancelAnimationFrame")||Nt("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function ne(e,s,h){if(h&&_t===vt)e.call(s);else return _t.call(window,d(e,s))}function xe(e){e&&Dt.call(window,e)}var Xe={__proto__:null,extend:f,create:p,bind:d,get lastId(){return b},stamp:x,throttle:P,wrapNum:E,falseFn:k,formatNum:F,trim:j,splitWords:q,setOptions:J,getParamString:st,template:bt,isArray:ft,indexOf:xt,emptyImageUrl:St,requestFn:_t,cancelFn:Dt,requestAnimFrame:ne,cancelAnimFrame:xe};function qe(){}qe.extend=function(e){var s=function(){J(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=s.__super__=this.prototype,m=p(h);m.constructor=s,s.prototype=m;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(s[v]=this[v]);return e.statics&&f(s,e.statics),e.includes&&(Vi(e.includes),f.apply(null,[m].concat(e.includes))),f(m,e),delete m.statics,delete m.includes,m.options&&(m.options=h.options?p(h.options):{},f(m.options,e.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,G=m._initHooks.length;B<G;B++)m._initHooks[B].call(this)}},s},qe.include=function(e){var s=this.prototype.options;return f(this.prototype,e),e.options&&(this.prototype.options=s,this.mergeOptions(e.options)),this},qe.mergeOptions=function(e){return f(this.prototype.options,e),this},qe.addInitHook=function(e){var s=Array.prototype.slice.call(arguments,1),h=typeof e=="function"?e:function(){this[e].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function Vi(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=ft(e)?e:[e];for(var s=0;s<e.length;s++)e[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var re={on:function(e,s,h){if(typeof e=="object")for(var m in e)this._on(m,e[m],s);else{e=q(e);for(var v=0,B=e.length;v<B;v++)this._on(e[v],s,h)}return this},off:function(e,s,h){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var m in e)this._off(m,e[m],s);else{e=q(e);for(var v=arguments.length===1,B=0,G=e.length;B<G;B++)v?this._off(e[B]):this._off(e[B],s,h)}return this},_on:function(e,s,h,m){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(e,s,h)===!1){h===this&&(h=void 0);var v={fn:s,ctx:h};m&&(v.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(v)}},_off:function(e,s,h){var m,v,B;if(this._events&&(m=this._events[e],!!m)){if(arguments.length===1){if(this._firingCount)for(v=0,B=m.length;v<B;v++)m[v].fn=k;delete this._events[e];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var G=this._listens(e,s,h);if(G!==!1){var X=m[G];this._firingCount&&(X.fn=k,this._events[e]=m=m.slice()),m.splice(G,1)}}},fire:function(e,s,h){if(!this.listens(e,h))return this;var m=f({},s,{type:e,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var v=this._events[e];if(v){this._firingCount=this._firingCount+1||1;for(var B=0,G=v.length;B<G;B++){var X=v[B],ot=X.fn;X.once&&this.off(e,ot,X.ctx),ot.call(X.ctx||this,m)}this._firingCount--}}return h&&this._propagateEvent(m),this},listens:function(e,s,h,m){typeof e!="string"&&console.warn('"string" type argument expected');var v=s;typeof s!="function"&&(m=!!s,v=void 0,h=void 0);var B=this._events&&this._events[e];if(B&&B.length&&this._listens(e,v,h)!==!1)return!0;if(m){for(var G in this._eventParents)if(this._eventParents[G].listens(e,s,h,m))return!0}return!1},_listens:function(e,s,h){if(!this._events)return!1;var m=this._events[e]||[];if(!s)return!!m.length;h===this&&(h=void 0);for(var v=0,B=m.length;v<B;v++)if(m[v].fn===s&&m[v].ctx===h)return v;return!1},once:function(e,s,h){if(typeof e=="object")for(var m in e)this._on(m,e[m],s,!0);else{e=q(e);for(var v=0,B=e.length;v<B;v++)this._on(e[v],s,h,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[x(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[x(e)],this},_propagateEvent:function(e){for(var s in this._eventParents)this._eventParents[s].fire(e.type,f({layer:e.target,propagatedFrom:e.target},e),!0)}};re.addEventListener=re.on,re.removeEventListener=re.clearAllEventListeners=re.off,re.addOneTimeEventListener=re.once,re.fireEvent=re.fire,re.hasEventListeners=re.listens;var Kt=qe.extend(re);function Mt(e,s,h){this.x=h?Math.round(e):e,this.y=h?Math.round(s):s}var vi=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};Mt.prototype={clone:function(){return new Mt(this.x,this.y)},add:function(e){return this.clone()._add(zt(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(zt(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new Mt(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new Mt(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=vi(this.x),this.y=vi(this.y),this},distanceTo:function(e){e=zt(e);var s=e.x-this.x,h=e.y-this.y;return Math.sqrt(s*s+h*h)},equals:function(e){return e=zt(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=zt(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+F(this.x)+", "+F(this.y)+")"}};function zt(e,s,h){return e instanceof Mt?e:ft(e)?new Mt(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new Mt(e.x,e.y):new Mt(e,s,h)}function le(e,s){if(e)for(var h=s?[e,s]:e,m=0,v=h.length;m<v;m++)this.extend(h[m])}le.prototype={extend:function(e){var s,h;if(!e)return this;if(e instanceof Mt||typeof e[0]=="number"||"x"in e)s=h=zt(e);else if(e=be(e),s=e.min,h=e.max,!s||!h)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=h.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(e){return zt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return zt(this.min.x,this.max.y)},getTopRight:function(){return zt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var s,h;return typeof e[0]=="number"||e instanceof Mt?e=zt(e):e=be(e),e instanceof le?(s=e.min,h=e.max):s=h=e,s.x>=this.min.x&&h.x<=this.max.x&&s.y>=this.min.y&&h.y<=this.max.y},intersects:function(e){e=be(e);var s=this.min,h=this.max,m=e.min,v=e.max,B=v.x>=s.x&&m.x<=h.x,G=v.y>=s.y&&m.y<=h.y;return B&&G},overlaps:function(e){e=be(e);var s=this.min,h=this.max,m=e.min,v=e.max,B=v.x>s.x&&m.x<h.x,G=v.y>s.y&&m.y<h.y;return B&&G},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var s=this.min,h=this.max,m=Math.abs(s.x-h.x)*e,v=Math.abs(s.y-h.y)*e;return be(zt(s.x-m,s.y-v),zt(h.x+m,h.y+v))},equals:function(e){return e?(e=be(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function be(e,s){return!e||e instanceof le?e:new le(e,s)}function Oe(e,s){if(e)for(var h=s?[e,s]:e,m=0,v=h.length;m<v;m++)this.extend(h[m])}Oe.prototype={extend:function(e){var s=this._southWest,h=this._northEast,m,v;if(e instanceof fe)m=e,v=e;else if(e instanceof Oe){if(m=e._southWest,v=e._northEast,!m||!v)return this}else return e?this.extend(Wt(e)||ke(e)):this;return!s&&!h?(this._southWest=new fe(m.lat,m.lng),this._northEast=new fe(v.lat,v.lng)):(s.lat=Math.min(m.lat,s.lat),s.lng=Math.min(m.lng,s.lng),h.lat=Math.max(v.lat,h.lat),h.lng=Math.max(v.lng,h.lng)),this},pad:function(e){var s=this._southWest,h=this._northEast,m=Math.abs(s.lat-h.lat)*e,v=Math.abs(s.lng-h.lng)*e;return new Oe(new fe(s.lat-m,s.lng-v),new fe(h.lat+m,h.lng+v))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof fe||"lat"in e?e=Wt(e):e=ke(e);var s=this._southWest,h=this._northEast,m,v;return e instanceof Oe?(m=e.getSouthWest(),v=e.getNorthEast()):m=v=e,m.lat>=s.lat&&v.lat<=h.lat&&m.lng>=s.lng&&v.lng<=h.lng},intersects:function(e){e=ke(e);var s=this._southWest,h=this._northEast,m=e.getSouthWest(),v=e.getNorthEast(),B=v.lat>=s.lat&&m.lat<=h.lat,G=v.lng>=s.lng&&m.lng<=h.lng;return B&&G},overlaps:function(e){e=ke(e);var s=this._southWest,h=this._northEast,m=e.getSouthWest(),v=e.getNorthEast(),B=v.lat>s.lat&&m.lat<h.lat,G=v.lng>s.lng&&m.lng<h.lng;return B&&G},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,s){return e?(e=ke(e),this._southWest.equals(e.getSouthWest(),s)&&this._northEast.equals(e.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ke(e,s){return e instanceof Oe?e:new Oe(e,s)}function fe(e,s,h){if(isNaN(e)||isNaN(s))throw new Error("Invalid LatLng object: ("+e+", "+s+")");this.lat=+e,this.lng=+s,h!==void 0&&(this.alt=+h)}fe.prototype={equals:function(e,s){if(!e)return!1;e=Wt(e);var h=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return h<=(s===void 0?1e-9:s)},toString:function(e){return"LatLng("+F(this.lat,e)+", "+F(this.lng,e)+")"},distanceTo:function(e){return Pt.distance(this,Wt(e))},wrap:function(){return Pt.wrapLatLng(this)},toBounds:function(e){var s=180*e/40075017,h=s/Math.cos(Math.PI/180*this.lat);return ke([this.lat-s,this.lng-h],[this.lat+s,this.lng+h])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function Wt(e,s,h){return e instanceof fe?e:ft(e)&&typeof e[0]!="object"?e.length===3?new fe(e[0],e[1],e[2]):e.length===2?new fe(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new fe(e.lat,"lng"in e?e.lng:e.lon,e.alt):s===void 0?null:new fe(e,s,h)}var ut={latLngToPoint:function(e,s){var h=this.projection.project(e),m=this.scale(s);return this.transformation._transform(h,m)},pointToLatLng:function(e,s){var h=this.scale(s),m=this.transformation.untransform(e,h);return this.projection.unproject(m)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var s=this.projection.bounds,h=this.scale(e),m=this.transformation.transform(s.min,h),v=this.transformation.transform(s.max,h);return new le(m,v)},infinite:!1,wrapLatLng:function(e){var s=this.wrapLng?E(e.lng,this.wrapLng,!0):e.lng,h=this.wrapLat?E(e.lat,this.wrapLat,!0):e.lat,m=e.alt;return new fe(h,s,m)},wrapLatLngBounds:function(e){var s=e.getCenter(),h=this.wrapLatLng(s),m=s.lat-h.lat,v=s.lng-h.lng;if(m===0&&v===0)return e;var B=e.getSouthWest(),G=e.getNorthEast(),X=new fe(B.lat-m,B.lng-v),ot=new fe(G.lat-m,G.lng-v);return new Oe(X,ot)}},Pt=f({},ut,{wrapLng:[-180,180],R:6371e3,distance:function(e,s){var h=Math.PI/180,m=e.lat*h,v=s.lat*h,B=Math.sin((s.lat-e.lat)*h/2),G=Math.sin((s.lng-e.lng)*h/2),X=B*B+Math.cos(m)*Math.cos(v)*G*G,ot=2*Math.atan2(Math.sqrt(X),Math.sqrt(1-X));return this.R*ot}}),kt=6378137,Ft={R:kt,MAX_LATITUDE:85.0511287798,project:function(e){var s=Math.PI/180,h=this.MAX_LATITUDE,m=Math.max(Math.min(h,e.lat),-h),v=Math.sin(m*s);return new Mt(this.R*e.lng*s,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(e){var s=180/Math.PI;return new fe((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*s,e.x*s/this.R)},bounds:function(){var e=kt*Math.PI;return new le([-e,-e],[e,e])}()};function ge(e,s,h,m){if(ft(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=s,this._c=h,this._d=m}ge.prototype={transform:function(e,s){return this._transform(e.clone(),s)},_transform:function(e,s){return s=s||1,e.x=s*(this._a*e.x+this._b),e.y=s*(this._c*e.y+this._d),e},untransform:function(e,s){return s=s||1,new Mt((e.x/s-this._b)/this._a,(e.y/s-this._d)/this._c)}};function z(e,s,h,m){return new ge(e,s,h,m)}var U=f({},Pt,{code:"EPSG:3857",projection:Ft,transformation:function(){var e=.5/(Math.PI*Ft.R);return z(e,.5,-e,.5)}()}),Y=f({},U,{code:"EPSG:900913"});function ht(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function mt(e,s){var h="",m,v,B,G,X,ot;for(m=0,B=e.length;m<B;m++){for(X=e[m],v=0,G=X.length;v<G;v++)ot=X[v],h+=(v?"L":"M")+ot.x+" "+ot.y;h+=s?jt.svg?"z":"x":""}return h||"M0 0"}var ct=document.documentElement.style,Et="ActiveXObject"in window,Ct=Et&&!document.addEventListener,wt="msLaunchUri"in navigator&&!("documentMode"in document),Lt=Fi("webkit"),Zt=Fi("android"),At=Fi("android 2")||Fi("android 3"),Ut=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Jt=Zt&&Fi("Google")&&Ut<537&&!("AudioNode"in window),se=!!window.opera,Le=!wt&&Fi("chrome"),pe=Fi("gecko")&&!Lt&&!se&&!Et,Qe=!Le&&Fi("safari"),He=Fi("phantom"),bi="OTransition"in ct,Ke=navigator.platform.indexOf("Win")===0,cn=Et&&"transition"in ct,kn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!At,Ne="MozPerspective"in ct,Li=!window.L_DISABLE_3D&&(cn||kn||Ne)&&!bi&&!He,Hi=typeof orientation<"u"||Fi("mobile"),Ml=Hi&&Lt,Pl=Hi&&kn,Os=!window.PointerEvent&&window.MSPointerEvent,Ko=!!(window.PointerEvent||Os),Wo="ontouchstart"in window||!!window.TouchEvent,Bl=!window.L_NO_TOUCH&&(Wo||Ko),Sl=Hi&&se,Jo=Hi&&pe,Yo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Al=function(){var e=!1;try{var s=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",k,s),window.removeEventListener("testPassiveEventSupport",k,s)}catch{}return e}(),Tl=function(){return!!document.createElement("canvas").getContext}(),Fs=!!(document.createElementNS&&ht("svg").createSVGRect),Xo=!!Fs&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Dl=!Fs&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var s=e.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),Rl=navigator.platform.indexOf("Mac")===0,Ol=navigator.platform.indexOf("Linux")===0;function Fi(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var jt={ie:Et,ielt9:Ct,edge:wt,webkit:Lt,android:Zt,android23:At,androidStock:Jt,opera:se,chrome:Le,gecko:pe,safari:Qe,phantom:He,opera12:bi,win:Ke,ie3d:cn,webkit3d:kn,gecko3d:Ne,any3d:Li,mobile:Hi,mobileWebkit:Ml,mobileWebkit3d:Pl,msPointer:Os,pointer:Ko,touch:Bl,touchNative:Wo,mobileOpera:Sl,mobileGecko:Jo,retina:Yo,passiveEvents:Al,canvas:Tl,svg:Fs,vml:Dl,inlineSvg:Xo,mac:Rl,linux:Ol},Qo=jt.msPointer?"MSPointerDown":"pointerdown",ta=jt.msPointer?"MSPointerMove":"pointermove",Is=jt.msPointer?"MSPointerUp":"pointerup",ea=jt.msPointer?"MSPointerCancel":"pointercancel",Ns={touchstart:Qo,touchmove:ta,touchend:Is,touchcancel:ea},ia={touchstart:jl,touchmove:qr,touchend:qr,touchcancel:qr},$n={},na=!1;function Fl(e,s,h){return s==="touchstart"&&zs(),ia[s]?(h=ia[s].bind(this,h),e.addEventListener(Ns[s],h,!1),h):(console.warn("wrong event specified:",s),k)}function Il(e,s,h){if(!Ns[s]){console.warn("wrong event specified:",s);return}e.removeEventListener(Ns[s],h,!1)}function Nl(e){$n[e.pointerId]=e}function zl(e){$n[e.pointerId]&&($n[e.pointerId]=e)}function $r(e){delete $n[e.pointerId]}function zs(){na||(document.addEventListener(Qo,Nl,!0),document.addEventListener(ta,zl,!0),document.addEventListener(Is,$r,!0),document.addEventListener(ea,$r,!0),na=!0)}function qr(e,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var h in $n)s.touches.push($n[h]);s.changedTouches=[s],e(s)}}function jl(e,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&We(s),qr(e,s)}function Ul(e){var s={},h,m;for(m in e)h=e[m],s[m]=h&&h.bind?h.bind(e):h;return e=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var Gl=200;function Vl(e,s){e.addEventListener("dblclick",s);var h=0,m;function v(B){if(B.detail!==1){m=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var G=la(B);if(!(G.some(function(ot){return ot instanceof HTMLLabelElement&&ot.attributes.for})&&!G.some(function(ot){return ot instanceof HTMLInputElement||ot instanceof HTMLSelectElement}))){var X=Date.now();X-h<=Gl?(m++,m===2&&s(Ul(B))):m=1,h=X}}}return e.addEventListener("click",v),{dblclick:s,simDblclick:v}}function Hl(e,s){e.removeEventListener("dblclick",s.dblclick),e.removeEventListener("click",s.simDblclick)}var js=Wr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),_r=Wr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ra=_r==="webkitTransition"||_r==="OTransition"?_r+"End":"transitionend";function sa(e){return typeof e=="string"?document.getElementById(e):e}function fn(e,s){var h=e.style[s]||e.currentStyle&&e.currentStyle[s];if((!h||h==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(e,null);h=m?m[s]:null}return h==="auto"?null:h}function me(e,s,h){var m=document.createElement(e);return m.className=s||"",h&&h.appendChild(m),m}function Ae(e){var s=e.parentNode;s&&s.removeChild(e)}function yr(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function qn(e){var s=e.parentNode;s&&s.lastChild!==e&&s.appendChild(e)}function Mn(e){var s=e.parentNode;s&&s.firstChild!==e&&s.insertBefore(e,s.firstChild)}function Us(e,s){if(e.classList!==void 0)return e.classList.contains(s);var h=Kr(e);return h.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(h)}function te(e,s){if(e.classList!==void 0)for(var h=q(s),m=0,v=h.length;m<v;m++)e.classList.add(h[m]);else if(!Us(e,s)){var B=Kr(e);Gs(e,(B?B+" ":"")+s)}}function Fe(e,s){e.classList!==void 0?e.classList.remove(s):Gs(e,j((" "+Kr(e)+" ").replace(" "+s+" "," ")))}function Gs(e,s){e.className.baseVal===void 0?e.className=s:e.className.baseVal=s}function Kr(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function Si(e,s){"opacity"in e.style?e.style.opacity=s:"filter"in e.style&&Zl(e,s)}function Zl(e,s){var h=!1,m="DXImageTransform.Microsoft.Alpha";try{h=e.filters.item(m)}catch{if(s===1)return}s=Math.round(s*100),h?(h.Enabled=s!==100,h.Opacity=s):e.style.filter+=" progid:"+m+"(opacity="+s+")"}function Wr(e){for(var s=document.documentElement.style,h=0;h<e.length;h++)if(e[h]in s)return e[h];return!1}function Pn(e,s,h){var m=s||new Mt(0,0);e.style[js]=(jt.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(h?" scale("+h+")":"")}function ze(e,s){e._leaflet_pos=s,jt.any3d?Pn(e,s):(e.style.left=s.x+"px",e.style.top=s.y+"px")}function Bn(e){return e._leaflet_pos||new Mt(0,0)}var vr,br,Vs;if("onselectstart"in document)vr=function(){Qt(window,"selectstart",We)},br=function(){Me(window,"selectstart",We)};else{var Kn=Wr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);vr=function(){if(Kn){var e=document.documentElement.style;Vs=e[Kn],e[Kn]="none"}},br=function(){Kn&&(document.documentElement.style[Kn]=Vs,Vs=void 0)}}function Hs(){Qt(window,"dragstart",We)}function Zs(){Me(window,"dragstart",We)}var Jr,$s;function qs(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(Yr(),Jr=e,$s=e.style.outlineStyle,e.style.outlineStyle="none",Qt(window,"keydown",Yr))}function Yr(){Jr&&(Jr.style.outlineStyle=$s,Jr=void 0,$s=void 0,Me(window,"keydown",Yr))}function oa(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Ks(e){var s=e.getBoundingClientRect();return{x:s.width/e.offsetWidth||1,y:s.height/e.offsetHeight||1,boundingClientRect:s}}var $l={__proto__:null,TRANSFORM:js,TRANSITION:_r,TRANSITION_END:ra,get:sa,getStyle:fn,create:me,remove:Ae,empty:yr,toFront:qn,toBack:Mn,hasClass:Us,addClass:te,removeClass:Fe,setClass:Gs,getClass:Kr,setOpacity:Si,testProp:Wr,setTransform:Pn,setPosition:ze,getPosition:Bn,get disableTextSelection(){return vr},get enableTextSelection(){return br},disableImageDrag:Hs,enableImageDrag:Zs,preventOutline:qs,restoreOutline:Yr,getSizedParentNode:oa,getScale:Ks};function Qt(e,s,h,m){if(s&&typeof s=="object")for(var v in s)Js(e,v,s[v],h);else{s=q(s);for(var B=0,G=s.length;B<G;B++)Js(e,s[B],h,m)}return this}var Zi="_leaflet_events";function Me(e,s,h,m){if(arguments.length===1)aa(e),delete e[Zi];else if(s&&typeof s=="object")for(var v in s)dn(e,v,s[v],h);else if(s=q(s),arguments.length===2)aa(e,function(X){return xt(s,X)!==-1});else for(var B=0,G=s.length;B<G;B++)dn(e,s[B],h,m);return this}function aa(e,s){for(var h in e[Zi]){var m=h.split(/\d/)[0];(!s||s(m))&&dn(e,m,null,null,h)}}var Ws={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Js(e,s,h,m){var v=s+x(h)+(m?"_"+x(m):"");if(e[Zi]&&e[Zi][v])return this;var B=function(X){return h.call(m||e,X||window.event)},G=B;!jt.touchNative&&jt.pointer&&s.indexOf("touch")===0?B=Fl(e,s,B):jt.touch&&s==="dblclick"?B=Vl(e,B):"addEventListener"in e?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?e.addEventListener(Ws[s]||s,B,jt.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(B=function(X){X=X||window.event,Xs(e,X)&&G(X)},e.addEventListener(Ws[s],B,!1)):e.addEventListener(s,G,!1):e.attachEvent("on"+s,B),e[Zi]=e[Zi]||{},e[Zi][v]=B}function dn(e,s,h,m,v){v=v||s+x(h)+(m?"_"+x(m):"");var B=e[Zi]&&e[Zi][v];if(!B)return this;!jt.touchNative&&jt.pointer&&s.indexOf("touch")===0?Il(e,s,B):jt.touch&&s==="dblclick"?Hl(e,B):"removeEventListener"in e?e.removeEventListener(Ws[s]||s,B,!1):e.detachEvent("on"+s,B),e[Zi][v]=null}function Sn(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Ys(e){return Js(e,"wheel",Sn),this}function Lr(e){return Qt(e,"mousedown touchstart dblclick contextmenu",Sn),e._leaflet_disable_click=!0,this}function We(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function An(e){return We(e),Sn(e),this}function la(e){if(e.composedPath)return e.composedPath();for(var s=[],h=e.target;h;)s.push(h),h=h.parentNode;return s}function ua(e,s){if(!s)return new Mt(e.clientX,e.clientY);var h=Ks(s),m=h.boundingClientRect;return new Mt((e.clientX-m.left)/h.x-s.clientLeft,(e.clientY-m.top)/h.y-s.clientTop)}var ql=jt.linux&&jt.chrome?window.devicePixelRatio:jt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ha(e){return jt.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/ql:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function Xs(e,s){var h=s.relatedTarget;if(!h)return!0;try{for(;h&&h!==e;)h=h.parentNode}catch{return!1}return h!==e}var Xr={__proto__:null,on:Qt,off:Me,stopPropagation:Sn,disableScrollPropagation:Ys,disableClickPropagation:Lr,preventDefault:We,stop:An,getPropagationPath:la,getMousePosition:ua,getWheelDelta:ha,isExternalTarget:Xs,addListener:Qt,removeListener:Me},ca=Kt.extend({run:function(e,s,h,m){this.stop(),this._el=e,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Bn(e),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ne(this._animate,this),this._step()},_step:function(e){var s=+new Date-this._startTime,h=this._duration*1e3;s<h?this._runFrame(this._easeOut(s/h),e):(this._runFrame(1),this._complete())},_runFrame:function(e,s){var h=this._startPos.add(this._offset.multiplyBy(e));s&&h._round(),ze(this._el,h),this.fire("step")},_complete:function(){xe(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),ue=Kt.extend({options:{crs:U,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,s){s=J(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(Wt(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=_r&&jt.any3d&&!jt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Qt(this._proxy,ra,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,s,h){if(s=s===void 0?this._zoom:this._limitZoom(s),e=this._limitCenter(Wt(e),s,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=f({animate:h.animate},h.zoom),h.pan=f({animate:h.animate,duration:h.duration},h.pan));var m=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,s,h.zoom):this._tryAnimatedPan(e,h.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(e,s,h.pan&&h.pan.noMoveStart),this},setZoom:function(e,s){return this._loaded?this.setView(this.getCenter(),e,{zoom:s}):(this._zoom=e,this)},zoomIn:function(e,s){return e=e||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,s)},zoomOut:function(e,s){return e=e||(jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,s)},setZoomAround:function(e,s,h){var m=this.getZoomScale(s),v=this.getSize().divideBy(2),B=e instanceof Mt?e:this.latLngToContainerPoint(e),G=B.subtract(v).multiplyBy(1-1/m),X=this.containerPointToLatLng(v.add(G));return this.setView(X,s,{zoom:h})},_getBoundsCenterZoom:function(e,s){s=s||{},e=e.getBounds?e.getBounds():ke(e);var h=zt(s.paddingTopLeft||s.padding||[0,0]),m=zt(s.paddingBottomRight||s.padding||[0,0]),v=this.getBoundsZoom(e,!1,h.add(m));if(v=typeof s.maxZoom=="number"?Math.min(s.maxZoom,v):v,v===1/0)return{center:e.getCenter(),zoom:v};var B=m.subtract(h).divideBy(2),G=this.project(e.getSouthWest(),v),X=this.project(e.getNorthEast(),v),ot=this.unproject(G.add(X).divideBy(2).add(B),v);return{center:ot,zoom:v}},fitBounds:function(e,s){if(e=ke(e),!e.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(e,s);return this.setView(h.center,h.zoom,s)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,s){return this.setView(e,this._zoom,{pan:s})},panBy:function(e,s){if(e=zt(e).round(),s=s||{},!e.x&&!e.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ca,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){te(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,h,s.duration||.25,s.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,s,h){if(h=h||{},h.animate===!1||!jt.any3d)return this.setView(e,s,h);this._stop();var m=this.project(this.getCenter()),v=this.project(e),B=this.getSize(),G=this._zoom;e=Wt(e),s=s===void 0?G:s;var X=Math.max(B.x,B.y),ot=X*this.getZoomScale(G,s),gt=v.distanceTo(m)||1,Tt=1.42,$t=Tt*Tt;function oe(Ie){var Sr=Ie?-1:1,mu=Ie?ot:X,Yi=ot*ot-X*X+Sr*$t*$t*gt*gt,gu=2*mu*$t*gt,er=Yi/gu,co=Math.sqrt(er*er+1)-er,_u=co<1e-9?-18:Math.log(co);return _u}function oi(Ie){return(Math.exp(Ie)-Math.exp(-Ie))/2}function Ze(Ie){return(Math.exp(Ie)+Math.exp(-Ie))/2}function ci(Ie){return oi(Ie)/Ze(Ie)}var Re=oe(0);function Ji(Ie){return X*(Ze(Re)/Ze(Re+Tt*Ie))}function ho(Ie){return X*(Ze(Re)*ci(Re+Tt*Ie)-oi(Re))/$t}function ys(Ie){return 1-Math.pow(1-Ie,1.5)}var ka=Date.now(),Br=(oe(1)-Re)/Tt,pu=h.duration?1e3*h.duration:1e3*Br*.8;function Ma(){var Ie=(Date.now()-ka)/pu,Sr=ys(Ie)*Br;Ie<=1?(this._flyToFrame=ne(Ma,this),this._move(this.unproject(m.add(v.subtract(m).multiplyBy(ho(Sr)/gt)),G),this.getScaleZoom(X/Ji(Sr),G),{flyTo:!0})):this._move(e,s)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),Ma.call(this),this},flyToBounds:function(e,s){var h=this._getBoundsCenterZoom(e,s);return this.flyTo(h.center,h.zoom,s)},setMaxBounds:function(e){return e=ke(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var s=this.options.minZoom;return this.options.minZoom=e,this._loaded&&s!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var s=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&s!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,s){this._enforcingBounds=!0;var h=this.getCenter(),m=this._limitCenter(h,this._zoom,ke(e));return h.equals(m)||this.panTo(m,s),this._enforcingBounds=!1,this},panInside:function(e,s){s=s||{};var h=zt(s.paddingTopLeft||s.padding||[0,0]),m=zt(s.paddingBottomRight||s.padding||[0,0]),v=this.project(this.getCenter()),B=this.project(e),G=this.getPixelBounds(),X=be([G.min.add(h),G.max.subtract(m)]),ot=X.getSize();if(!X.contains(B)){this._enforcingBounds=!0;var gt=B.subtract(X.getCenter()),Tt=X.extend(B).getSize().subtract(ot);v.x+=gt.x<0?-Tt.x:Tt.x,v.y+=gt.y<0?-Tt.y:Tt.y,this.panTo(this.unproject(v),s),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=f({animate:!1,pan:!0},e===!0?{animate:!0}:e);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),m=s.divideBy(2).round(),v=h.divideBy(2).round(),B=m.subtract(v);return!B.x&&!B.y?this:(e.animate&&e.pan?this.panBy(B):(e.pan&&this._rawPanBy(B),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=f({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=d(this._handleGeolocationResponse,this),h=d(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,h,e):navigator.geolocation.getCurrentPosition(s,h,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var s=e.code,h=e.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var s=e.coords.latitude,h=e.coords.longitude,m=new fe(s,h),v=m.toBounds(e.coords.accuracy*2),B=this._locateOptions;if(B.setView){var G=this.getBoundsZoom(v);this.setView(m,B.maxZoom?Math.min(G,B.maxZoom):G)}var X={latlng:m,bounds:v,timestamp:e.timestamp};for(var ot in e.coords)typeof e.coords[ot]=="number"&&(X[ot]=e.coords[ot]);this.fire("locationfound",X)}},addHandler:function(e,s){if(!s)return this;var h=this[e]=new s(this);return this._handlers.push(h),this.options[e]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(xe(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)Ae(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,s){var h="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),m=me("div",h,s||this._mapPane);return e&&(this._panes[e]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),s=this.unproject(e.getBottomLeft()),h=this.unproject(e.getTopRight());return new Oe(s,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,s,h){e=ke(e),h=zt(h||[0,0]);var m=this.getZoom()||0,v=this.getMinZoom(),B=this.getMaxZoom(),G=e.getNorthWest(),X=e.getSouthEast(),ot=this.getSize().subtract(h),gt=be(this.project(X,m),this.project(G,m)).getSize(),Tt=jt.any3d?this.options.zoomSnap:1,$t=ot.x/gt.x,oe=ot.y/gt.y,oi=s?Math.max($t,oe):Math.min($t,oe);return m=this.getScaleZoom(oi,m),Tt&&(m=Math.round(m/(Tt/100))*(Tt/100),m=s?Math.ceil(m/Tt)*Tt:Math.floor(m/Tt)*Tt),Math.max(v,Math.min(B,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Mt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,s){var h=this._getTopLeftPoint(e,s);return new le(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,s){var h=this.options.crs;return s=s===void 0?this._zoom:s,h.scale(e)/h.scale(s)},getScaleZoom:function(e,s){var h=this.options.crs;s=s===void 0?this._zoom:s;var m=h.zoom(e*h.scale(s));return isNaN(m)?1/0:m},project:function(e,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(Wt(e),s)},unproject:function(e,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(zt(e),s)},layerPointToLatLng:function(e){var s=zt(e).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(e){var s=this.project(Wt(e))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(Wt(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(ke(e))},distance:function(e,s){return this.options.crs.distance(Wt(e),Wt(s))},containerPointToLayerPoint:function(e){return zt(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return zt(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var s=this.containerPointToLayerPoint(zt(e));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Wt(e)))},mouseEventToContainerPoint:function(e){return ua(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var s=this._container=sa(e);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Qt(s,"scroll",this._onScroll,this),this._containerId=x(s)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&jt.any3d,te(e,"leaflet-container"+(jt.touch?" leaflet-touch":"")+(jt.retina?" leaflet-retina":"")+(jt.ielt9?" leaflet-oldie":"")+(jt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=fn(e,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ze(this._mapPane,new Mt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(te(e.markerPane,"leaflet-zoom-hide"),te(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,s,h){ze(this._mapPane,new Mt(0,0));var m=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var v=this._zoom!==s;this._moveStart(v,h)._move(e,s)._moveEnd(v),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(e,s){return e&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(e,s,h,m){s===void 0&&(s=this._zoom);var v=this._zoom!==s;return this._zoom=s,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),m?h&&h.pinch&&this.fire("zoom",h):((v||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return xe(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){ze(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[x(this._container)]=this;var s=e?Me:Qt;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),jt.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){xe(this._resizeRequest),this._resizeRequest=ne(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,s){for(var h=[],m,v=s==="mouseout"||s==="mouseover",B=e.target||e.srcElement,G=!1;B;){if(m=this._targets[x(B)],m&&(s==="click"||s==="preclick")&&this._draggableMoved(m)){G=!0;break}if(m&&m.listens(s,!0)&&(v&&!Xs(B,e)||(h.push(m),v))||B===this._container)break;B=B.parentNode}return!h.length&&!G&&!v&&this.listens(s,!0)&&(h=[this]),h},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var s=e.target||e.srcElement;if(!(!this._loaded||s._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(s))){var h=e.type;h==="mousedown"&&qs(s),this._fireDOMEvent(e,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,s,h){if(e.type==="click"){var m=f({},e);m.type="preclick",this._fireDOMEvent(m,m.type,h)}var v=this._findEventTargets(e,s);if(h){for(var B=[],G=0;G<h.length;G++)h[G].listens(s,!0)&&B.push(h[G]);v=B.concat(v)}if(v.length){s==="contextmenu"&&We(e);var X=v[0],ot={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var gt=X.getLatLng&&(!X._radius||X._radius<=10);ot.containerPoint=gt?this.latLngToContainerPoint(X.getLatLng()):this.mouseEventToContainerPoint(e),ot.layerPoint=this.containerPointToLayerPoint(ot.containerPoint),ot.latlng=gt?X.getLatLng():this.layerPointToLatLng(ot.layerPoint)}for(G=0;G<v.length;G++)if(v[G].fire(s,ot,!0),ot.originalEvent._stopped||v[G].options.bubblingMouseEvents===!1&&xt(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,s=this._handlers.length;e<s;e++)this._handlers[e].disable()},whenReady:function(e,s){return this._loaded?e.call(s||this,{target:this}):this.on("load",e,s),this},_getMapPanePos:function(){return Bn(this._mapPane)||new Mt(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,s){var h=e&&s!==void 0?this._getNewPixelOrigin(e,s):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,s){var h=this.getSize()._divideBy(2);return this.project(e,s)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,s,h){var m=this._getNewPixelOrigin(h,s);return this.project(e,s)._subtract(m)},_latLngBoundsToNewLayerBounds:function(e,s,h){var m=this._getNewPixelOrigin(h,s);return be([this.project(e.getSouthWest(),s)._subtract(m),this.project(e.getNorthWest(),s)._subtract(m),this.project(e.getSouthEast(),s)._subtract(m),this.project(e.getNorthEast(),s)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,s,h){if(!h)return e;var m=this.project(e,s),v=this.getSize().divideBy(2),B=new le(m.subtract(v),m.add(v)),G=this._getBoundsOffset(B,h,s);return Math.abs(G.x)<=1&&Math.abs(G.y)<=1?e:this.unproject(m.add(G),s)},_limitOffset:function(e,s){if(!s)return e;var h=this.getPixelBounds(),m=new le(h.min.add(e),h.max.add(e));return e.add(this._getBoundsOffset(m,s))},_getBoundsOffset:function(e,s,h){var m=be(this.project(s.getNorthEast(),h),this.project(s.getSouthWest(),h)),v=m.min.subtract(e.min),B=m.max.subtract(e.max),G=this._rebound(v.x,-B.x),X=this._rebound(v.y,-B.y);return new Mt(G,X)},_rebound:function(e,s){return e+s>0?Math.round(e-s)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(s))},_limitZoom:function(e){var s=this.getMinZoom(),h=this.getMaxZoom(),m=jt.any3d?this.options.zoomSnap:1;return m&&(e=Math.round(e/m)*m),Math.max(s,Math.min(h,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Fe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,s){var h=this._getCenterOffset(e)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,s),!0)},_createAnimProxy:function(){var e=this._proxy=me("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(s){var h=js,m=this._proxy.style[h];Pn(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),m===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),s=this.getZoom();Pn(this._proxy,this.project(e,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,s,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(s),v=this._getCenterOffset(e)._divideBy(1-1/m);return h.animate!==!0&&!this.getSize().contains(v)?!1:(ne(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(e,s,!0)},this),!0)},_animateZoom:function(e,s,h,m){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=s,te(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:s,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Fe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fa(e,s){return new ue(e,s)}var Xt=qe.extend({options:{position:"topright"},initialize:function(e){J(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var s=this._map;return s&&s.removeControl(this),this.options.position=e,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var s=this._container=this.onAdd(e),h=this.getPosition(),m=e._controlCorners[h];return te(s,"leaflet-control"),h.indexOf("bottom")!==-1?m.insertBefore(s,m.firstChild):m.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Tn=function(e){return new Xt(e)};ue.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},s="leaflet-",h=this._controlContainer=me("div",s+"control-container",this._container);function m(v,B){var G=s+v+" "+s+B;e[v+B]=me("div",G,h)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)Ae(this._controlCorners[e]);Ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var xr=Xt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,s,h,m){return h<m?-1:m<h?1:0}},initialize:function(e,s,h){J(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in e)this._addLayer(e[m],m);for(m in s)this._addLayer(s[m],m,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Xt.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,s){return this._addLayer(e,s),this._map?this._update():this},addOverlay:function(e,s){return this._addLayer(e,s,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var s=this._getLayer(x(e));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){te(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(te(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):Fe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Fe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",s=this._container=me("div",e),h=this.options.collapsed;s.setAttribute("aria-haspopup",!0),Lr(s),Ys(s);var m=this._section=me("section",e+"-list");h&&(this._map.on("click",this.collapse,this),Qt(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=me("a",e+"-toggle",s);v.href="#",v.title="Layers",v.setAttribute("role","button"),Qt(v,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){We(B),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=me("div",e+"-base",m),this._separator=me("div",e+"-separator",m),this._overlaysList=me("div",e+"-overlays",m),s.appendChild(m)},_getLayer:function(e){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&x(this._layers[s].layer)===e)return this._layers[s]},_addLayer:function(e,s,h){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:s,overlay:h}),this.options.sortLayers&&this._layers.sort(d(function(m,v){return this.options.sortFunction(m.layer,v.layer,m.name,v.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;yr(this._baseLayersList),yr(this._overlaysList),this._layerControlInputs=[];var e,s,h,m,v=0;for(h=0;h<this._layers.length;h++)m=this._layers[h],this._addItem(m),s=s||m.overlay,e=e||!m.overlay,v+=m.overlay?0:1;return this.options.hideSingleBase&&(e=e&&v>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=s&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var s=this._getLayer(x(e.target)),h=s.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;h&&this._map.fire(h,s)},_createRadioElement:function(e,s){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(s?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=h,m.firstChild},_addItem:function(e){var s=document.createElement("label"),h=this._map.hasLayer(e.layer),m;e.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=h):m=this._createRadioElement("leaflet-base-layers_"+x(this),h),this._layerControlInputs.push(m),m.layerId=x(e.layer),Qt(m,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+e.name;var B=document.createElement("span");s.appendChild(B),B.appendChild(m),B.appendChild(v);var G=e.overlay?this._overlaysList:this._baseLayersList;return G.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,s,h,m=[],v=[];this._handlingClick=!0;for(var B=e.length-1;B>=0;B--)s=e[B],h=this._getLayer(s.layerId).layer,s.checked?m.push(h):s.checked||v.push(h);for(B=0;B<v.length;B++)this._map.hasLayer(v[B])&&this._map.removeLayer(v[B]);for(B=0;B<m.length;B++)this._map.hasLayer(m[B])||this._map.addLayer(m[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,s,h,m=this._map.getZoom(),v=e.length-1;v>=0;v--)s=e[v],h=this._getLayer(s.layerId).layer,s.disabled=h.options.minZoom!==void 0&&m<h.options.minZoom||h.options.maxZoom!==void 0&&m>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Qt(e,"click",We),this.expand();var s=this;setTimeout(function(){Me(e,"click",We),s._preventClick=!1})}}),Kl=function(e,s,h){return new xr(e,s,h)},Qr=Xt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var s="leaflet-control-zoom",h=me("div",s+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,s+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,s+"-out",h,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,s,h,m,v){var B=me("a",h,m);return B.innerHTML=e,B.href="#",B.title=s,B.setAttribute("role","button"),B.setAttribute("aria-label",s),Lr(B),Qt(B,"click",An),Qt(B,"click",v,this),Qt(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var e=this._map,s="leaflet-disabled";Fe(this._zoomInButton,s),Fe(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(te(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(te(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});ue.mergeOptions({zoomControl:!0}),ue.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qr,this.addControl(this.zoomControl))});var Wl=function(e){return new Qr(e)},ts=Xt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var s="leaflet-control-scale",h=me("div",s),m=this.options;return this._addScales(m,s+"-line",h),e.on(m.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),h},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,s,h){e.metric&&(this._mScale=me("div",s,h)),e.imperial&&(this._iScale=me("div",s,h))},_update:function(){var e=this._map,s=e.getSize().y/2,h=e.distance(e.containerPointToLatLng([0,s]),e.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(h)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var s=this._getRoundNum(e),h=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,h,s/e)},_updateImperial:function(e){var s=e*3.2808399,h,m,v;s>5280?(h=s/5280,m=this._getRoundNum(h),this._updateScale(this._iScale,m+" mi",m/h)):(v=this._getRoundNum(s),this._updateScale(this._iScale,v+" ft",v/s))},_updateScale:function(e,s,h){e.style.width=Math.round(this.options.maxWidth*h)+"px",e.innerHTML=s},_getRoundNum:function(e){var s=Math.pow(10,(Math.floor(e)+"").length-1),h=e/s;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,s*h}}),es=function(e){return new ts(e)},Jl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',$i=Xt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(jt.inlineSvg?Jl+" ":"")+"Leaflet</a>"},initialize:function(e){J(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=me("div","leaflet-control-attribution"),Lr(this._container);for(var s in e._layers)e._layers[s].getAttribution&&this.addAttribution(e._layers[s].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var s in this._attributions)this._attributions[s]&&e.push(s);var h=[];this.options.prefix&&h.push(this.options.prefix),e.length&&h.push(e.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});ue.mergeOptions({attributionControl:!0}),ue.addInitHook(function(){this.options.attributionControl&&new $i().addTo(this)});var da=function(e){return new $i(e)};Xt.Layers=xr,Xt.Zoom=Qr,Xt.Scale=ts,Xt.Attribution=$i,Tn.layers=Kl,Tn.zoom=Wl,Tn.scale=es,Tn.attribution=da;var ni=qe.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ni.addTo=function(e,s){return e.addHandler(s,this),this};var Yl={Events:re},pa=jt.touch?"touchstart mousedown":"mousedown",pn=Kt.extend({options:{clickTolerance:3},initialize:function(e,s,h,m){J(this,m),this._element=e,this._dragStartTarget=s||e,this._preventOutline=h},enable:function(){this._enabled||(Qt(this._dragStartTarget,pa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(pn._dragging===this&&this.finishDrag(!0),Me(this._dragStartTarget,pa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Us(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){pn._dragging===this&&this.finishDrag();return}if(!(pn._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(pn._dragging=this,this._preventOutline&&qs(this._element),Hs(),vr(),!this._moving)){this.fire("down");var s=e.touches?e.touches[0]:e,h=oa(this._element);this._startPoint=new Mt(s.clientX,s.clientY),this._startPos=Bn(this._element),this._parentScale=Ks(h);var m=e.type==="mousedown";Qt(document,m?"mousemove":"touchmove",this._onMove,this),Qt(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var s=e.touches&&e.touches.length===1?e.touches[0]:e,h=new Mt(s.clientX,s.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,We(e),this._moved||(this.fire("dragstart"),this._moved=!0,te(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),te(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),ze(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Fe(document.body,"leaflet-dragging"),this._lastTarget&&(Fe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Me(document,"mousemove touchmove",this._onMove,this),Me(document,"mouseup touchend touchcancel",this._onUp,this),Zs(),br();var s=this._moved&&this._moving;this._moving=!1,pn._dragging=!1,s&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function ma(e,s,h){var m,v=[1,4,2,8],B,G,X,ot,gt,Tt,$t,oe;for(B=0,Tt=e.length;B<Tt;B++)e[B]._code=li(e[B],s);for(X=0;X<4;X++){for($t=v[X],m=[],B=0,Tt=e.length,G=Tt-1;B<Tt;G=B++)ot=e[B],gt=e[G],ot._code&$t?gt._code&$t||(oe=mn(gt,ot,$t,s,h),oe._code=li(oe,s),m.push(oe)):(gt._code&$t&&(oe=mn(gt,ot,$t,s,h),oe._code=li(oe,s),m.push(oe)),m.push(ot));e=m}return e}function ga(e,s){var h,m,v,B,G,X,ot,gt,Tt;if(!e||e.length===0)throw new Error("latlngs not passed");ui(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var $t=Wt([0,0]),oe=ke(e),oi=oe.getNorthWest().distanceTo(oe.getSouthWest())*oe.getNorthEast().distanceTo(oe.getNorthWest());oi<1700&&($t=Qs(e));var Ze=e.length,ci=[];for(h=0;h<Ze;h++){var Re=Wt(e[h]);ci.push(s.project(Wt([Re.lat-$t.lat,Re.lng-$t.lng])))}for(X=ot=gt=0,h=0,m=Ze-1;h<Ze;m=h++)v=ci[h],B=ci[m],G=v.y*B.x-B.y*v.x,ot+=(v.x+B.x)*G,gt+=(v.y+B.y)*G,X+=G*3;X===0?Tt=ci[0]:Tt=[ot/X,gt/X];var Ji=s.unproject(zt(Tt));return Wt([Ji.lat+$t.lat,Ji.lng+$t.lng])}function Qs(e){for(var s=0,h=0,m=0,v=0;v<e.length;v++){var B=Wt(e[v]);s+=B.lat,h+=B.lng,m++}return Wt([s/m,h/m])}var Xl={__proto__:null,clipPolygon:ma,polygonCenter:ga,centroid:Qs};function _a(e,s){if(!s||!e.length)return e.slice();var h=s*s;return e=ya(e,h),e=Je(e,h),e}function to(e,s,h){return Math.sqrt(wr(e,s,h,!0))}function Ql(e,s,h){return wr(e,s,h)}function Je(e,s){var h=e.length,m=typeof Uint8Array<"u"?Uint8Array:Array,v=new m(h);v[0]=v[h-1]=1,ti(e,v,s,0,h-1);var B,G=[];for(B=0;B<h;B++)v[B]&&G.push(e[B]);return G}function ti(e,s,h,m,v){var B=0,G,X,ot;for(X=m+1;X<=v-1;X++)ot=wr(e[X],e[m],e[v],!0),ot>B&&(G=X,B=ot);B>h&&(s[G]=1,ti(e,s,h,m,G),ti(e,s,h,G,v))}function ya(e,s){for(var h=[e[0]],m=1,v=0,B=e.length;m<B;m++)tu(e[m],e[v])>s&&(h.push(e[m]),v=m);return v<B-1&&h.push(e[B-1]),h}var Dn;function Rn(e,s,h,m,v){var B=m?Dn:li(e,h),G=li(s,h),X,ot,gt;for(Dn=G;;){if(!(B|G))return[e,s];if(B&G)return!1;X=B||G,ot=mn(e,s,X,h,v),gt=li(ot,h),X===B?(e=ot,B=gt):(s=ot,G=gt)}}function mn(e,s,h,m,v){var B=s.x-e.x,G=s.y-e.y,X=m.min,ot=m.max,gt,Tt;return h&8?(gt=e.x+B*(ot.y-e.y)/G,Tt=ot.y):h&4?(gt=e.x+B*(X.y-e.y)/G,Tt=X.y):h&2?(gt=ot.x,Tt=e.y+G*(ot.x-e.x)/B):h&1&&(gt=X.x,Tt=e.y+G*(X.x-e.x)/B),new Mt(gt,Tt,v)}function li(e,s){var h=0;return e.x<s.min.x?h|=1:e.x>s.max.x&&(h|=2),e.y<s.min.y?h|=4:e.y>s.max.y&&(h|=8),h}function tu(e,s){var h=s.x-e.x,m=s.y-e.y;return h*h+m*m}function wr(e,s,h,m){var v=s.x,B=s.y,G=h.x-v,X=h.y-B,ot=G*G+X*X,gt;return ot>0&&(gt=((e.x-v)*G+(e.y-B)*X)/ot,gt>1?(v=h.x,B=h.y):gt>0&&(v+=G*gt,B+=X*gt)),G=e.x-v,X=e.y-B,m?G*G+X*X:new Mt(v,B)}function ui(e){return!ft(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function Ai(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ui(e)}function eo(e,s){var h,m,v,B,G,X,ot,gt;if(!e||e.length===0)throw new Error("latlngs not passed");ui(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var Tt=Wt([0,0]),$t=ke(e),oe=$t.getNorthWest().distanceTo($t.getSouthWest())*$t.getNorthEast().distanceTo($t.getNorthWest());oe<1700&&(Tt=Qs(e));var oi=e.length,Ze=[];for(h=0;h<oi;h++){var ci=Wt(e[h]);Ze.push(s.project(Wt([ci.lat-Tt.lat,ci.lng-Tt.lng])))}for(h=0,m=0;h<oi-1;h++)m+=Ze[h].distanceTo(Ze[h+1])/2;if(m===0)gt=Ze[0];else for(h=0,B=0;h<oi-1;h++)if(G=Ze[h],X=Ze[h+1],v=G.distanceTo(X),B+=v,B>m){ot=(B-m)/v,gt=[X.x-ot*(X.x-G.x),X.y-ot*(X.y-G.y)];break}var Re=s.unproject(zt(gt));return Wt([Re.lat+Tt.lat,Re.lng+Tt.lng])}var is={__proto__:null,simplify:_a,pointToSegmentDistance:to,closestPointOnSegment:Ql,clipSegment:Rn,_getEdgeIntersection:mn,_getBitCode:li,_sqClosestPointOnSegment:wr,isFlat:ui,_flat:Ai,polylineCenter:eo},io={project:function(e){return new Mt(e.lng,e.lat)},unproject:function(e){return new fe(e.y,e.x)},bounds:new le([-180,-90],[180,90])},Ti={R:6378137,R_MINOR:6356752314245179e-9,bounds:new le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var s=Math.PI/180,h=this.R,m=e.lat*s,v=this.R_MINOR/h,B=Math.sqrt(1-v*v),G=B*Math.sin(m),X=Math.tan(Math.PI/4-m/2)/Math.pow((1-G)/(1+G),B/2);return m=-h*Math.log(Math.max(X,1e-10)),new Mt(e.lng*s*h,m)},unproject:function(e){for(var s=180/Math.PI,h=this.R,m=this.R_MINOR/h,v=Math.sqrt(1-m*m),B=Math.exp(-e.y/h),G=Math.PI/2-2*Math.atan(B),X=0,ot=.1,gt;X<15&&Math.abs(ot)>1e-7;X++)gt=v*Math.sin(G),gt=Math.pow((1-gt)/(1+gt),v/2),ot=Math.PI/2-2*Math.atan(B*gt)-G,G+=ot;return new fe(G*s,e.x*s/h)}},qi={__proto__:null,LonLat:io,Mercator:Ti,SphericalMercator:Ft},ns=f({},Pt,{code:"EPSG:3395",projection:Ti,transformation:function(){var e=.5/(Math.PI*Ti.R);return z(e,.5,-e,.5)}()}),no=f({},Pt,{code:"EPSG:4326",projection:io,transformation:z(1/180,1,-1/180,.5)}),ro=f({},ut,{projection:io,transformation:z(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,s){var h=s.lng-e.lng,m=s.lat-e.lat;return Math.sqrt(h*h+m*m)},infinite:!0});ut.Earth=Pt,ut.EPSG3395=ns,ut.EPSG3857=U,ut.EPSG900913=Y,ut.EPSG4326=no,ut.Simple=ro;var ri=Kt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[x(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[x(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var s=e.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var h=this.getEvents();s.on(h,this),this.once("remove",function(){s.off(h,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});ue.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var s=x(e);return this._layers[s]?this:(this._layers[s]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var s=x(e);return this._layers[s]?(this._loaded&&e.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return x(e)in this._layers},eachLayer:function(e,s){for(var h in this._layers)e.call(s,this._layers[h]);return this},_addLayers:function(e){e=e?ft(e)?e:[e]:[];for(var s=0,h=e.length;s<h;s++)this.addLayer(e[s])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[x(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var s=x(e);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,s=-1/0,h=this._getZoomSpan();for(var m in this._zoomBoundLayers){var v=this._zoomBoundLayers[m].options;e=v.minZoom===void 0?e:Math.min(e,v.minZoom),s=v.maxZoom===void 0?s:Math.max(s,v.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=e===1/0?void 0:e,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wn=ri.extend({initialize:function(e,s){J(this,s),this._layers={};var h,m;if(e)for(h=0,m=e.length;h<m;h++)this.addLayer(e[h])},addLayer:function(e){var s=this.getLayerId(e);return this._layers[s]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var s=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(e){var s=typeof e=="number"?e:this.getLayerId(e);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var s=Array.prototype.slice.call(arguments,1),h,m;for(h in this._layers)m=this._layers[h],m[e]&&m[e].apply(m,s);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,s){for(var h in this._layers)e.call(s,this._layers[h]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return x(e)}}),eu=function(e,s){return new Wn(e,s)},Ii=Wn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Wn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Wn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new Oe;for(var s in this._layers){var h=this._layers[s];e.extend(h.getBounds?h.getBounds():h.getLatLng())}return e}}),iu=function(e,s){return new Ii(e,s)},Jn=qe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){J(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,s){var h=this._getIconUrl(e);if(!h){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(h,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(m,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(e,s){var h=this.options,m=h[s+"Size"];typeof m=="number"&&(m=[m,m]);var v=zt(m),B=zt(s==="shadow"&&h.shadowAnchor||h.iconAnchor||v&&v.divideBy(2,!0));e.className="leaflet-marker-"+s+" "+(h.className||""),B&&(e.style.marginLeft=-B.x+"px",e.style.marginTop=-B.y+"px"),v&&(e.style.width=v.x+"px",e.style.height=v.y+"px")},_createImg:function(e,s){return s=s||document.createElement("img"),s.src=e,s},_getIconUrl:function(e){return jt.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function nu(e){return new Jn(e)}var Cr=Jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Cr.imagePath!="string"&&(Cr.imagePath=this._detectIconPath()),(this.options.imagePath||Cr.imagePath)+Jn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var s=function(h,m,v){var B=m.exec(h);return B&&B[v]};return e=s(e,/^url\((['"])?(.+)\1\)$/,2),e&&s(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=me("div","leaflet-default-icon-path",document.body),s=fn(e,"background-image")||fn(e,"backgroundImage");if(document.body.removeChild(e),s=this._stripUrl(s),s)return s;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),rs=ni.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new pn(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),te(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Fe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var s=this._marker,h=s._map,m=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,B=Bn(s._icon),G=h.getPixelBounds(),X=h.getPixelOrigin(),ot=be(G.min._subtract(X).add(v),G.max._subtract(X).subtract(v));if(!ot.contains(B)){var gt=zt((Math.max(ot.max.x,B.x)-ot.max.x)/(G.max.x-ot.max.x)-(Math.min(ot.min.x,B.x)-ot.min.x)/(G.min.x-ot.min.x),(Math.max(ot.max.y,B.y)-ot.max.y)/(G.max.y-ot.max.y)-(Math.min(ot.min.y,B.y)-ot.min.y)/(G.min.y-ot.min.y)).multiplyBy(m);h.panBy(gt,{animate:!1}),this._draggable._newPos._add(gt),this._draggable._startPos._add(gt),ze(s._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=ne(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(xe(this._panRequest),this._panRequest=ne(this._adjustPan.bind(this,e)))},_onDrag:function(e){var s=this._marker,h=s._shadow,m=Bn(s._icon),v=s._map.layerPointToLatLng(m);h&&ze(h,m),s._latlng=v,e.latlng=v,e.oldLatLng=this._oldLatLng,s.fire("move",e).fire("drag",e)},_onDragEnd:function(e){xe(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ss=ri.extend({options:{icon:new Cr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,s){J(this,s),this._latlng=Wt(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var s=this._latlng;return this._latlng=Wt(e),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=e.icon.createIcon(this._icon),m=!1;h!==this._icon&&(this._icon&&this._removeIcon(),m=!0,e.title&&(h.title=e.title),h.tagName==="IMG"&&(h.alt=e.alt||"")),te(h,s),e.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qt(h,"focus",this._panOnFocus,this);var v=e.icon.createShadow(this._shadow),B=!1;v!==this._shadow&&(this._removeShadow(),B=!0),v&&(te(v,s),v.alt=""),this._shadow=v,e.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&B&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(this._icon,"focus",this._panOnFocus,this),Ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ae(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&ze(this._icon,e),this._shadow&&ze(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var s=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(te(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),rs)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new rs(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Si(this._icon,e),this._shadow&&Si(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var s=this.options.icon.options,h=s.iconSize?zt(s.iconSize):zt(0,0),m=s.iconAnchor?zt(s.iconAnchor):zt(0,0);e.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:h.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ru(e,s){return new ss(e,s)}var nn=ri.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return J(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ki=nn.extend({options:{fill:!0,radius:10},initialize:function(e,s){J(this,s),this._latlng=Wt(e),this._radius=this.options.radius},setLatLng:function(e){var s=this._latlng;return this._latlng=Wt(e),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var s=e&&e.radius||this._radius;return nn.prototype.setStyle.call(this,e),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,s=this._radiusY||e,h=this._clickTolerance(),m=[e+h,s+h];this._pxBounds=new le(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function va(e,s){return new Ki(e,s)}var so=Ki.extend({initialize:function(e,s,h){if(typeof s=="number"&&(s=f({},h,{radius:s})),J(this,s),this._latlng=Wt(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new Oe(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:nn.prototype.setStyle,_project:function(){var e=this._latlng.lng,s=this._latlng.lat,h=this._map,m=h.options.crs;if(m.distance===Pt.distance){var v=Math.PI/180,B=this._mRadius/Pt.R/v,G=h.project([s+B,e]),X=h.project([s-B,e]),ot=G.add(X).divideBy(2),gt=h.unproject(ot).lat,Tt=Math.acos((Math.cos(B*v)-Math.sin(s*v)*Math.sin(gt*v))/(Math.cos(s*v)*Math.cos(gt*v)))/v;(isNaN(Tt)||Tt===0)&&(Tt=B/Math.cos(Math.PI/180*s)),this._point=ot.subtract(h.getPixelOrigin()),this._radius=isNaN(Tt)?0:ot.x-h.project([gt,e-Tt]).x,this._radiusY=ot.y-G.y}else{var $t=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint($t).x}this._updateBounds()}});function On(e,s,h){return new so(e,s,h)}var rn=nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,s){J(this,s),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var s=1/0,h=null,m=wr,v,B,G=0,X=this._parts.length;G<X;G++)for(var ot=this._parts[G],gt=1,Tt=ot.length;gt<Tt;gt++){v=ot[gt-1],B=ot[gt];var $t=m(e,v,B,!0);$t<s&&(s=$t,h=m(e,v,B))}return h&&(h.distance=Math.sqrt(s)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return eo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,s){return s=s||this._defaultShape(),e=Wt(e),s.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new Oe,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return ui(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var s=[],h=ui(e),m=0,v=e.length;m<v;m++)h?(s[m]=Wt(e[m]),this._bounds.extend(s[m])):s[m]=this._convertLatLngs(e[m]);return s},_project:function(){var e=new le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),s=new Mt(e,e);this._rawPxBounds&&(this._pxBounds=new le([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(e,s,h){var m=e[0]instanceof fe,v=e.length,B,G;if(m){for(G=[],B=0;B<v;B++)G[B]=this._map.latLngToLayerPoint(e[B]),h.extend(G[B]);s.push(G)}else for(B=0;B<v;B++)this._projectLatlngs(e[B],s,h)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,h,m,v,B,G,X,ot;for(h=0,v=0,B=this._rings.length;h<B;h++)for(ot=this._rings[h],m=0,G=ot.length;m<G-1;m++)X=Rn(ot[m],ot[m+1],e,m,!0),X&&(s[v]=s[v]||[],s[v].push(X[0]),(X[1]!==ot[m+1]||m===G-2)&&(s[v].push(X[1]),v++))}},_simplifyPoints:function(){for(var e=this._parts,s=this.options.smoothFactor,h=0,m=e.length;h<m;h++)e[h]=_a(e[h],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,s){var h,m,v,B,G,X,ot=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(h=0,B=this._parts.length;h<B;h++)for(X=this._parts[h],m=0,G=X.length,v=G-1;m<G;v=m++)if(!(!s&&m===0)&&to(e,X[v],X[m])<=ot)return!0;return!1}});function su(e,s){return new rn(e,s)}rn._flat=Ai;var gn=rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ga(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var s=rn.prototype._convertLatLngs.call(this,e),h=s.length;return h>=2&&s[0]instanceof fe&&s[0].equals(s[h-1])&&s.pop(),s},_setLatLngs:function(e){rn.prototype._setLatLngs.call(this,e),ui(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ui(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,s=this.options.weight,h=new Mt(s,s);if(e=new le(e.min.subtract(h),e.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,v=this._rings.length,B;m<v;m++)B=ma(this._rings[m],e,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var s=!1,h,m,v,B,G,X,ot,gt;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(B=0,ot=this._parts.length;B<ot;B++)for(h=this._parts[B],G=0,gt=h.length,X=gt-1;G<gt;X=G++)m=h[G],v=h[X],m.y>e.y!=v.y>e.y&&e.x<(v.x-m.x)*(e.y-m.y)/(v.y-m.y)+m.x&&(s=!s);return s||rn.prototype._containsPoint.call(this,e,!0)}});function Er(e,s){return new gn(e,s)}var sn=Ii.extend({initialize:function(e,s){J(this,s),this._layers={},e&&this.addData(e)},addData:function(e){var s=ft(e)?e:e.features,h,m,v;if(s){for(h=0,m=s.length;h<m;h++)v=s[h],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var B=this.options;if(B.filter&&!B.filter(e))return this;var G=os(e,B);return G?(G.feature=cs(e),G.defaultOptions=G.options,this.resetStyle(G),B.onEachFeature&&B.onEachFeature(e,G),this.addLayer(G)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=f({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(s){this._setLayerStyle(s,e)},this)},_setLayerStyle:function(e,s){e.setStyle&&(typeof s=="function"&&(s=s(e.feature)),e.setStyle(s))}});function os(e,s){var h=e.type==="Feature"?e.geometry:e,m=h?h.coordinates:null,v=[],B=s&&s.pointToLayer,G=s&&s.coordsToLatLng||as,X,ot,gt,Tt;if(!m&&!h)return null;switch(h.type){case"Point":return X=G(m),ba(B,e,X,s);case"MultiPoint":for(gt=0,Tt=m.length;gt<Tt;gt++)X=G(m[gt]),v.push(ba(B,e,X,s));return new Ii(v);case"LineString":case"MultiLineString":return ot=ls(m,h.type==="LineString"?0:1,G),new rn(ot,s);case"Polygon":case"MultiPolygon":return ot=ls(m,h.type==="Polygon"?1:2,G),new gn(ot,s);case"GeometryCollection":for(gt=0,Tt=h.geometries.length;gt<Tt;gt++){var $t=os({geometry:h.geometries[gt],type:"Feature",properties:e.properties},s);$t&&v.push($t)}return new Ii(v);case"FeatureCollection":for(gt=0,Tt=h.features.length;gt<Tt;gt++){var oe=os(h.features[gt],s);oe&&v.push(oe)}return new Ii(v);default:throw new Error("Invalid GeoJSON object.")}}function ba(e,s,h,m){return e?e(s,h):new ss(h,m&&m.markersInheritOptions&&m)}function as(e){return new fe(e[1],e[0],e[2])}function ls(e,s,h){for(var m=[],v=0,B=e.length,G;v<B;v++)G=s?ls(e[v],s-1,h):(h||as)(e[v]),m.push(G);return m}function us(e,s){return e=Wt(e),e.alt!==void 0?[F(e.lng,s),F(e.lat,s),F(e.alt,s)]:[F(e.lng,s),F(e.lat,s)]}function hs(e,s,h,m){for(var v=[],B=0,G=e.length;B<G;B++)v.push(s?hs(e[B],ui(e[B])?0:s-1,h,m):us(e[B],m));return!s&&h&&v.length>0&&v.push(v[0].slice()),v}function Yn(e,s){return e.feature?f({},e.feature,{geometry:s}):cs(s)}function cs(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var fs={toGeoJSON:function(e){return Yn(this,{type:"Point",coordinates:us(this.getLatLng(),e)})}};ss.include(fs),so.include(fs),Ki.include(fs),rn.include({toGeoJSON:function(e){var s=!ui(this._latlngs),h=hs(this._latlngs,s?1:0,!1,e);return Yn(this,{type:(s?"Multi":"")+"LineString",coordinates:h})}}),gn.include({toGeoJSON:function(e){var s=!ui(this._latlngs),h=s&&!ui(this._latlngs[0]),m=hs(this._latlngs,h?2:s?1:0,!0,e);return s||(m=[m]),Yn(this,{type:(h?"Multi":"")+"Polygon",coordinates:m})}}),Wn.include({toMultiPoint:function(e){var s=[];return this.eachLayer(function(h){s.push(h.toGeoJSON(e).geometry.coordinates)}),Yn(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(e){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(e);var h=s==="GeometryCollection",m=[];return this.eachLayer(function(v){if(v.toGeoJSON){var B=v.toGeoJSON(e);if(h)m.push(B.geometry);else{var G=cs(B);G.type==="FeatureCollection"?m.push.apply(m,G.features):m.push(G)}}}),h?Yn(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function ds(e,s){return new sn(e,s)}var La=ds,Xn=ri.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,s,h){this._url=e,this._bounds=ke(s),J(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(te(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&qn(this._image),this},bringToBack:function(){return this._map&&Mn(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=ke(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",s=this._image=e?this._url:me("img");if(te(s,"leaflet-image-layer"),this._zoomAnimated&&te(s,"leaflet-zoom-animated"),this.options.className&&te(s,this.options.className),s.onselectstart=k,s.onmousemove=k,s.onload=d(this.fire,this,"load"),s.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(e){var s=this._map.getZoomScale(e.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Pn(this._image,h,s)},_reset:function(){var e=this._image,s=new le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=s.getSize();ze(e,s.min),e.style.width=h.x+"px",e.style.height=h.y+"px"},_updateOpacity:function(){Si(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),ou=function(e,s,h){return new Xn(e,s,h)},kr=Xn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",s=this._image=e?this._url:me("video");if(te(s,"leaflet-image-layer"),this._zoomAnimated&&te(s,"leaflet-zoom-animated"),this.options.className&&te(s,this.options.className),s.onselectstart=k,s.onmousemove=k,s.onloadeddata=d(this.fire,this,"load"),e){for(var h=s.getElementsByTagName("source"),m=[],v=0;v<h.length;v++)m.push(h[v].src);this._url=h.length>0?m:[s.src];return}ft(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var G=me("source");G.src=this._url[B],s.appendChild(G)}}});function xa(e,s,h){return new kr(e,s,h)}var wa=Xn.extend({_initImage:function(){var e=this._image=this._url;te(e,"leaflet-image-layer"),this._zoomAnimated&&te(e,"leaflet-zoom-animated"),this.options.className&&te(e,this.options.className),e.onselectstart=k,e.onmousemove=k}});function au(e,s,h){return new wa(e,s,h)}var Wi=ri.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,s){e&&(e instanceof fe||ft(e))?(this._latlng=Wt(e),J(this,s)):(J(this,e),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Si(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Si(this._container,1),this.bringToFront(),this.options.interactive&&(te(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Si(this._container,0),this._removeTimeout=setTimeout(d(Ae,void 0,this._container),200)):Ae(this._container),this.options.interactive&&(Fe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=Wt(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&qn(this._container),this},bringToBack:function(){return this._map&&Mn(this._container),this},_prepareOpen:function(e){var s=this._source;if(!s._map)return!1;if(s instanceof Ii){s=null;var h=this._source._layers;for(var m in h)if(h[m]._map){s=h[m];break}if(!s)return!1;this._source=s}if(!e)if(s.getCenter)e=s.getCenter();else if(s.getLatLng)e=s.getLatLng();else if(s.getBounds)e=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")e.innerHTML=s;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),s=zt(this.options.offset),h=this._getAnchor();this._zoomAnimated?ze(this._container,e.add(h)):s=s.add(e).add(h);var m=this._containerBottom=-s.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=m+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});ue.include({_initOverlay:function(e,s,h,m){var v=s;return v instanceof e||(v=new e(m).setContent(s)),h&&v.setLatLng(h),v}}),ri.include({_initOverlay:function(e,s,h,m){var v=h;return v instanceof e?(J(v,m),v._source=this):(v=s&&!m?s:new e(m,this),v.setContent(h)),v}});var _n=Wi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Wi.prototype.openOn.call(this,e)},onAdd:function(e){Wi.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof nn||this._source.on("preclick",Sn))},onRemove:function(e){Wi.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof nn||this._source.off("preclick",Sn))},getEvents:function(){var e=Wi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",s=this._container=me("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=me("div",e+"-content-wrapper",s);if(this._contentNode=me("div",e+"-content",h),Lr(s),Ys(this._contentNode),Qt(s,"contextmenu",Sn),this._tipContainer=me("div",e+"-tip-container",s),this._tip=me("div",e+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=me("a",e+"-close-button",s);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',Qt(m,"click",function(v){We(v),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,s=e.style;s.width="",s.whiteSpace="nowrap";var h=e.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),s.width=h+1+"px",s.whiteSpace="",s.height="";var m=e.offsetHeight,v=this.options.maxHeight,B="leaflet-popup-scrolled";v&&m>v?(s.height=v+"px",te(e,B)):Fe(e,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var s=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),h=this._getAnchor();ze(this._container,s.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,s=parseInt(fn(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+s,m=this._containerWidth,v=new Mt(this._containerLeft,-h-this._containerBottom);v._add(Bn(this._container));var B=e.layerPointToContainerPoint(v),G=zt(this.options.autoPanPadding),X=zt(this.options.autoPanPaddingTopLeft||G),ot=zt(this.options.autoPanPaddingBottomRight||G),gt=e.getSize(),Tt=0,$t=0;B.x+m+ot.x>gt.x&&(Tt=B.x+m-gt.x+ot.x),B.x-Tt-X.x<0&&(Tt=B.x-X.x),B.y+h+ot.y>gt.y&&($t=B.y+h-gt.y+ot.y),B.y-$t-X.y<0&&($t=B.y-X.y),(Tt||$t)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([Tt,$t]))}},_getAnchor:function(){return zt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),lu=function(e,s){return new _n(e,s)};ue.mergeOptions({closePopupOnClick:!0}),ue.include({openPopup:function(e,s,h){return this._initOverlay(_n,e,s,h).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),ri.include({bindPopup:function(e,s){return this._popup=this._initOverlay(_n,this._popup,e,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Ii||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){An(e);var s=e.layer||e.target;if(this._popup._source===s&&!(s instanceof nn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=s,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var ps=Wi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Wi.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Wi.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Wi.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",s=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=me("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+x(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var s,h,m=this._map,v=this._container,B=m.latLngToContainerPoint(m.getCenter()),G=m.layerPointToContainerPoint(e),X=this.options.direction,ot=v.offsetWidth,gt=v.offsetHeight,Tt=zt(this.options.offset),$t=this._getAnchor();X==="top"?(s=ot/2,h=gt):X==="bottom"?(s=ot/2,h=0):X==="center"?(s=ot/2,h=gt/2):X==="right"?(s=0,h=gt/2):X==="left"?(s=ot,h=gt/2):G.x<B.x?(X="right",s=0,h=gt/2):(X="left",s=ot+(Tt.x+$t.x)*2,h=gt/2),e=e.subtract(zt(s,h,!0)).add(Tt).add($t),Fe(v,"leaflet-tooltip-right"),Fe(v,"leaflet-tooltip-left"),Fe(v,"leaflet-tooltip-top"),Fe(v,"leaflet-tooltip-bottom"),te(v,"leaflet-tooltip-"+X),ze(v,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Si(this._container,e)},_animateZoom:function(e){var s=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(s)},_getAnchor:function(){return zt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),uu=function(e,s){return new ps(e,s)};ue.include({openTooltip:function(e,s,h){return this._initOverlay(ps,e,s,h).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),ri.include({bindTooltip:function(e,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ps,this._tooltip,e,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var s=e?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[s](h),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Ii||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var s=typeof e.getElement=="function"&&e.getElement();s&&(Qt(s,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Qt(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var s=typeof e.getElement=="function"&&e.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var s=e.latlng,h,m;this._tooltip.options.sticky&&e.originalEvent&&(h=this._map.mouseEventToContainerPoint(e.originalEvent),m=this._map.containerPointToLayerPoint(h),s=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(s)}});var Ca=Jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var s=e&&e.tagName==="DIV"?e:document.createElement("div"),h=this.options;if(h.html instanceof Element?(yr(s),s.appendChild(h.html)):s.innerHTML=h.html!==!1?h.html:"",h.bgPos){var m=zt(h.bgPos);s.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function hu(e){return new Ca(e)}Jn.Default=Cr;var Mr=ri.extend({options:{tileSize:256,opacity:1,updateWhenIdle:jt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){J(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),Ae(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(qn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Mn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=P(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof Mt?e:new Mt(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var s=this.getPane().children,h=-e(-1/0,1/0),m=0,v=s.length,B;m<v;m++)B=s[m].style.zIndex,s[m]!==this._container&&B&&(h=e(h,+B));isFinite(h)&&(this.options.zIndex=h+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!jt.ielt9){Si(this._container,this.options.opacity);var e=+new Date,s=!1,h=!1;for(var m in this._tiles){var v=this._tiles[m];if(!(!v.current||!v.loaded)){var B=Math.min(1,(e-v.loaded)/200);Si(v.el,B),B<1?s=!0:(v.active?h=!0:this._onOpaqueTile(v),v.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),s&&(xe(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this))}},_onOpaqueTile:k,_initContainer:function(){this._container||(this._container=me("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,s=this.options.maxZoom;if(e!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===e?(this._levels[h].el.style.zIndex=s-Math.abs(e-h),this._onUpdateLevel(h)):(Ae(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var m=this._levels[e],v=this._map;return m||(m=this._levels[e]={},m.el=me("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=s,m.origin=v.project(v.unproject(v.getPixelOrigin()),e).round(),m.zoom=e,this._setZoomTransform(m,v.getCenter(),v.getZoom()),k(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:k,_onRemoveLevel:k,_onCreateLevel:k,_pruneTiles:function(){if(this._map){var e,s,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)s=this._tiles[e],s.retain=s.current;for(e in this._tiles)if(s=this._tiles[e],s.current&&!s.active){var m=s.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var s in this._tiles)this._tiles[s].coords.z===e&&this._removeTile(s)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)Ae(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,s,h,m){var v=Math.floor(e/2),B=Math.floor(s/2),G=h-1,X=new Mt(+v,+B);X.z=+G;var ot=this._tileCoordsToKey(X),gt=this._tiles[ot];return gt&&gt.active?(gt.retain=!0,!0):(gt&&gt.loaded&&(gt.retain=!0),G>m?this._retainParent(v,B,G,m):!1)},_retainChildren:function(e,s,h,m){for(var v=2*e;v<2*e+2;v++)for(var B=2*s;B<2*s+2;B++){var G=new Mt(v,B);G.z=h+1;var X=this._tileCoordsToKey(G),ot=this._tiles[X];if(ot&&ot.active){ot.retain=!0;continue}else ot&&ot.loaded&&(ot.retain=!0);h+1<m&&this._retainChildren(v,B,h+1,m)}},_resetView:function(e){var s=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var s=this.options;return s.minNativeZoom!==void 0&&e<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<e?s.maxNativeZoom:e},_setView:function(e,s,h,m){var v=Math.round(s);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var B=this.options.updateWhenZooming&&v!==this._tileZoom;(!m||B)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(e),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(e,s)},_setZoomTransforms:function(e,s){for(var h in this._levels)this._setZoomTransform(this._levels[h],e,s)},_setZoomTransform:function(e,s,h){var m=this._map.getZoomScale(h,e.zoom),v=e.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(s,h)).round();jt.any3d?Pn(e.el,v,m):ze(e.el,v)},_resetGrid:function(){var e=this._map,s=e.options.crs,h=this._tileSize=this.getTileSize(),m=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,s.wrapLng[0]],m).x/h.x),Math.ceil(e.project([0,s.wrapLng[1]],m).x/h.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([s.wrapLat[0],0],m).y/h.x),Math.ceil(e.project([s.wrapLat[1],0],m).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var s=this._map,h=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),m=s.getZoomScale(h,this._tileZoom),v=s.project(e,this._tileZoom).floor(),B=s.getSize().divideBy(m*2);return new le(v.subtract(B),v.add(B))},_update:function(e){var s=this._map;if(s){var h=this._clampZoom(s.getZoom());if(e===void 0&&(e=s.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(e),v=this._pxBoundsToTileRange(m),B=v.getCenter(),G=[],X=this.options.keepBuffer,ot=new le(v.getBottomLeft().subtract([X,-X]),v.getTopRight().add([X,-X]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var gt in this._tiles){var Tt=this._tiles[gt].coords;(Tt.z!==this._tileZoom||!ot.contains(new Mt(Tt.x,Tt.y)))&&(this._tiles[gt].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(e,h);return}for(var $t=v.min.y;$t<=v.max.y;$t++)for(var oe=v.min.x;oe<=v.max.x;oe++){var oi=new Mt(oe,$t);if(oi.z=this._tileZoom,!!this._isValidTile(oi)){var Ze=this._tiles[this._tileCoordsToKey(oi)];Ze?Ze.current=!0:G.push(oi)}}if(G.sort(function(Re,Ji){return Re.distanceTo(B)-Ji.distanceTo(B)}),G.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ci=document.createDocumentFragment();for(oe=0;oe<G.length;oe++)this._addTile(G[oe],ci);this._level.el.appendChild(ci)}}}},_isValidTile:function(e){var s=this._map.options.crs;if(!s.infinite){var h=this._globalTileRange;if(!s.wrapLng&&(e.x<h.min.x||e.x>h.max.x)||!s.wrapLat&&(e.y<h.min.y||e.y>h.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(e);return ke(this.options.bounds).overlaps(m)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var s=this._map,h=this.getTileSize(),m=e.scaleBy(h),v=m.add(h),B=s.unproject(m,e.z),G=s.unproject(v,e.z);return[B,G]},_tileCoordsToBounds:function(e){var s=this._tileCoordsToNwSe(e),h=new Oe(s[0],s[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var s=e.split(":"),h=new Mt(+s[0],+s[1]);return h.z=+s[2],h},_removeTile:function(e){var s=this._tiles[e];s&&(Ae(s.el),delete this._tiles[e],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){te(e,"leaflet-tile");var s=this.getTileSize();e.style.width=s.x+"px",e.style.height=s.y+"px",e.onselectstart=k,e.onmousemove=k,jt.ielt9&&this.options.opacity<1&&Si(e,this.options.opacity)},_addTile:function(e,s){var h=this._getTilePos(e),m=this._tileCoordsToKey(e),v=this.createTile(this._wrapCoords(e),d(this._tileReady,this,e));this._initTile(v),this.createTile.length<2&&ne(d(this._tileReady,this,e,null,v)),ze(v,h),this._tiles[m]={el:v,coords:e,current:!0},s.appendChild(v),this.fire("tileloadstart",{tile:v,coords:e})},_tileReady:function(e,s,h){s&&this.fire("tileerror",{error:s,tile:h,coords:e});var m=this._tileCoordsToKey(e);h=this._tiles[m],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Si(h.el,0),xe(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),s||(te(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),jt.ielt9||!this._map._fadeAnimated?ne(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var s=new Mt(this._wrapX?E(e.x,this._wrapX):e.x,this._wrapY?E(e.y,this._wrapY):e.y);return s.z=e.z,s},_pxBoundsToTileRange:function(e){var s=this.getTileSize();return new le(e.min.unscaleBy(s).floor(),e.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function cu(e){return new Mr(e)}var Qn=Mr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,s){this._url=e,s=J(this,s),s.detectRetina&&jt.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,s){return this._url===e&&s===void 0&&(s=!0),this._url=e,s||this.redraw(),this},createTile:function(e,s){var h=document.createElement("img");return Qt(h,"load",d(this._tileOnLoad,this,s,h)),Qt(h,"error",d(this._tileOnError,this,s,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(e),h},getTileUrl:function(e){var s={r:jt.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-e.y;this.options.tms&&(s.y=h),s["-y"]=h}return bt(this._url,f(s,this.options))},_tileOnLoad:function(e,s){jt.ielt9?setTimeout(d(e,this,null,s),0):e(null,s)},_tileOnError:function(e,s,h){var m=this.options.errorTileUrl;m&&s.getAttribute("src")!==m&&(s.src=m),e(h,s)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,s=this.options.maxZoom,h=this.options.zoomReverse,m=this.options.zoomOffset;return h&&(e=s-e),e+m},_getSubdomain:function(e){var s=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var e,s;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(s=this._tiles[e].el,s.onload=k,s.onerror=k,!s.complete)){s.src=St;var h=this._tiles[e].coords;Ae(s),delete this._tiles[e],this.fire("tileabort",{tile:s,coords:h})}},_removeTile:function(e){var s=this._tiles[e];if(s)return s.el.setAttribute("src",St),Mr.prototype._removeTile.call(this,e)},_tileReady:function(e,s,h){if(!(!this._map||h&&h.getAttribute("src")===St))return Mr.prototype._tileReady.call(this,e,s,h)}});function oo(e,s){return new Qn(e,s)}var ms=Qn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,s){this._url=e;var h=f({},this.defaultWmsParams);for(var m in s)m in this.options||(h[m]=s[m]);s=J(this,s);var v=s.detectRetina&&jt.retina?2:1,B=this.getTileSize();h.width=B.x*v,h.height=B.y*v,this.wmsParams=h},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,Qn.prototype.onAdd.call(this,e)},getTileUrl:function(e){var s=this._tileCoordsToNwSe(e),h=this._crs,m=be(h.project(s[0]),h.project(s[1])),v=m.min,B=m.max,G=(this._wmsVersion>=1.3&&this._crs===no?[v.y,v.x,B.y,B.x]:[v.x,v.y,B.x,B.y]).join(","),X=Qn.prototype.getTileUrl.call(this,e);return X+st(this.wmsParams,X,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+G},setParams:function(e,s){return f(this.wmsParams,e),s||this.redraw(),this}});function fu(e,s){return new ms(e,s)}Qn.WMS=ms,oo.wms=fu;var on=ri.extend({options:{padding:.1},initialize:function(e){J(this,e),x(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),te(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,s){var h=this._map.getZoomScale(s,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,s),B=m.multiplyBy(-h).add(v).subtract(this._map._getNewPixelOrigin(e,s));jt.any3d?Pn(this._container,B,h):ze(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,s=this._map.getSize(),h=this._map.containerPointToLayerPoint(s.multiplyBy(-e)).round();this._bounds=new le(h,h.add(s.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ao=on.extend({options:{tolerance:0},getEvents:function(){var e=on.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){on.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Qt(e,"mousemove",this._onMouseMove,this),Qt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Qt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){xe(this._redrawRequest),delete this._ctx,Ae(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var s in this._layers)e=this._layers[s],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){on.prototype._update.call(this);var e=this._bounds,s=this._container,h=e.getSize(),m=jt.retina?2:1;ze(s,e.min),s.width=m*h.x,s.height=m*h.y,s.style.width=h.x+"px",s.style.height=h.y+"px",jt.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){on.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[x(e)]=e;var s=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var s=e._order,h=s.next,m=s.prev;h?h.prev=m:this._drawLast=m,m?m.next=h:this._drawFirst=h,delete e._order,delete this._layers[x(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var s=e.options.dashArray.split(/[, ]+/),h=[],m,v;for(v=0;v<s.length;v++){if(m=Number(s[v]),isNaN(m))return;h.push(m)}e.options._dashArray=h}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||ne(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var s=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new le,this._redrawBounds.extend(e._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(e._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var s=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,s=this._redrawBounds;if(this._ctx.save(),s){var h=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)e=m.layer,(!s||e._pxBounds&&e._pxBounds.intersects(s))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,s){if(this._drawing){var h,m,v,B,G=e._parts,X=G.length,ot=this._ctx;if(X){for(ot.beginPath(),h=0;h<X;h++){for(m=0,v=G[h].length;m<v;m++)B=G[h][m],ot[m?"lineTo":"moveTo"](B.x,B.y);s&&ot.closePath()}this._fillStroke(ot,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var s=e._point,h=this._ctx,m=Math.max(Math.round(e._radius),1),v=(Math.max(Math.round(e._radiusY),1)||m)/m;v!==1&&(h.save(),h.scale(1,v)),h.beginPath(),h.arc(s.x,s.y/v,m,0,Math.PI*2,!1),v!==1&&h.restore(),this._fillStroke(h,e)}},_fillStroke:function(e,s){var h=s.options;h.fill&&(e.globalAlpha=h.fillOpacity,e.fillStyle=h.fillColor||h.color,e.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(e.setLineDash&&e.setLineDash(s.options&&s.options._dashArray||[]),e.globalAlpha=h.opacity,e.lineWidth=h.weight,e.strokeStyle=h.color,e.lineCap=h.lineCap,e.lineJoin=h.lineJoin,e.stroke())},_onClick:function(e){for(var s=this._map.mouseEventToLayerPoint(e),h,m,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(s)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(h))&&(m=h);this._fireEvent(m?[m]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,s)}},_handleMouseOut:function(e){var s=this._hoveredLayer;s&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([s],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,s){if(!this._mouseHoverThrottled){for(var h,m,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(s)&&(m=h);m!==this._hoveredLayer&&(this._handleMouseOut(e),m&&(te(this._container,"leaflet-interactive"),this._fireEvent([m],e,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,s,h){this._map._fireDOMEvent(s,h||s.type,e)},_bringToFront:function(e){var s=e._order;if(s){var h=s.next,m=s.prev;if(h)h.prev=m;else return;m?m.next=h:h&&(this._drawFirst=h),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(e)}},_bringToBack:function(e){var s=e._order;if(s){var h=s.next,m=s.prev;if(m)m.next=h;else return;h?h.prev=m:m&&(this._drawLast=m),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(e)}}});function gs(e){return jt.canvas?new ao(e):null}var Pr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),du={_initContainer:function(){this._container=me("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(on.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var s=e._container=Pr("shape");te(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",e._path=Pr("path"),s.appendChild(e._path),this._updateStyle(e),this._layers[x(e)]=e},_addPath:function(e){var s=e._container;this._container.appendChild(s),e.options.interactive&&e.addInteractiveTarget(s)},_removePath:function(e){var s=e._container;Ae(s),e.removeInteractiveTarget(s),delete this._layers[x(e)]},_updateStyle:function(e){var s=e._stroke,h=e._fill,m=e.options,v=e._container;v.stroked=!!m.stroke,v.filled=!!m.fill,m.stroke?(s||(s=e._stroke=Pr("stroke")),v.appendChild(s),s.weight=m.weight+"px",s.color=m.color,s.opacity=m.opacity,m.dashArray?s.dashStyle=ft(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=m.lineCap.replace("butt","flat"),s.joinstyle=m.lineJoin):s&&(v.removeChild(s),e._stroke=null),m.fill?(h||(h=e._fill=Pr("fill")),v.appendChild(h),h.color=m.fillColor||m.color,h.opacity=m.fillOpacity):h&&(v.removeChild(h),e._fill=null)},_updateCircle:function(e){var s=e._point.round(),h=Math.round(e._radius),m=Math.round(e._radiusY||h);this._setPath(e,e._empty()?"M0 0":"AL "+s.x+","+s.y+" "+h+","+m+" 0,"+65535*360)},_setPath:function(e,s){e._path.v=s},_bringToFront:function(e){qn(e._container)},_bringToBack:function(e){Mn(e._container)}},tr=jt.vml?Pr:ht,ei=on.extend({_initContainer:function(){this._container=tr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=tr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ae(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){on.prototype._update.call(this);var e=this._bounds,s=e.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,h.setAttribute("width",s.x),h.setAttribute("height",s.y)),ze(h,e.min),h.setAttribute("viewBox",[e.min.x,e.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(e){var s=e._path=tr("path");e.options.className&&te(s,e.options.className),e.options.interactive&&te(s,"leaflet-interactive"),this._updateStyle(e),this._layers[x(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){Ae(e._path),e.removeInteractiveTarget(e._path),delete this._layers[x(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var s=e._path,h=e.options;s&&(h.stroke?(s.setAttribute("stroke",h.color),s.setAttribute("stroke-opacity",h.opacity),s.setAttribute("stroke-width",h.weight),s.setAttribute("stroke-linecap",h.lineCap),s.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?s.setAttribute("stroke-dasharray",h.dashArray):s.removeAttribute("stroke-dasharray"),h.dashOffset?s.setAttribute("stroke-dashoffset",h.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),h.fill?(s.setAttribute("fill",h.fillColor||h.color),s.setAttribute("fill-opacity",h.fillOpacity),s.setAttribute("fill-rule",h.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(e,s){this._setPath(e,mt(e._parts,s))},_updateCircle:function(e){var s=e._point,h=Math.max(Math.round(e._radius),1),m=Math.max(Math.round(e._radiusY),1)||h,v="a"+h+","+m+" 0 1,0 ",B=e._empty()?"M0 0":"M"+(s.x-h)+","+s.y+v+h*2+",0 "+v+-h*2+",0 ";this._setPath(e,B)},_setPath:function(e,s){e._path.setAttribute("d",s)},_bringToFront:function(e){qn(e._path)},_bringToBack:function(e){Mn(e._path)}});jt.vml&&ei.include(du);function si(e){return jt.svg||jt.vml?new ei(e):null}ue.include({getRenderer:function(e){var s=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var s=this._paneRenderers[e];return s===void 0&&(s=this._createRenderer({pane:e}),this._paneRenderers[e]=s),s},_createRenderer:function(e){return this.options.preferCanvas&&gs(e)||si(e)}});var lo=gn.extend({initialize:function(e,s){gn.prototype.initialize.call(this,this._boundsToLatLngs(e),s)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=ke(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Ni(e,s){return new lo(e,s)}ei.create=tr,ei.pointsToPath=mt,sn.geometryToLayer=os,sn.coordsToLatLng=as,sn.coordsToLatLngs=ls,sn.latLngToCoords=us,sn.latLngsToCoords=hs,sn.getFeature=Yn,sn.asFeature=cs,ue.mergeOptions({boxZoom:!0});var Yt=ni.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),vr(),Hs(),this._startPoint=this._map.mouseEventToContainerPoint(e),Qt(document,{contextmenu:An,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=me("div","leaflet-zoom-box",this._container),te(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var s=new le(this._point,this._startPoint),h=s.getSize();ze(this._box,s.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ae(this._box),Fe(this._container,"leaflet-crosshair")),br(),Zs(),Me(document,{contextmenu:An,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var s=new Oe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ue.addInitHook("addHandler","boxZoom",Yt),ue.mergeOptions({doubleClickZoom:!0});var uo=ni.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var s=this._map,h=s.getZoom(),m=s.options.zoomDelta,v=e.originalEvent.shiftKey?h-m:h+m;s.options.doubleClickZoom==="center"?s.setZoom(v):s.setZoomAround(e.containerPoint,v)}});ue.addInitHook("addHandler","doubleClickZoom",uo),ue.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _s=ni.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new pn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}te(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Fe(this._map._container,"leaflet-grab"),Fe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=ke(this._map.options.maxBounds);this._offsetLimit=be(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var s=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(s),this._prunePositions(s)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,s){return e-(e-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;e.x<s.min.x&&(e.x=this._viscousLimit(e.x,s.min.x)),e.y<s.min.y&&(e.y=this._viscousLimit(e.y,s.min.y)),e.x>s.max.x&&(e.x=this._viscousLimit(e.x,s.max.x)),e.y>s.max.y&&(e.y=this._viscousLimit(e.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,s=Math.round(e/2),h=this._initialWorldOffset,m=this._draggable._newPos.x,v=(m-s+h)%e+s-h,B=(m+s+h)%e-s-h,G=Math.abs(v+h)<Math.abs(B+h)?v:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=G},_onDragEnd:function(e){var s=this._map,h=s.options,m=!h.inertia||e.noInertia||this._times.length<2;if(s.fire("dragend",e),m)s.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,G=h.easeLinearity,X=v.multiplyBy(G/B),ot=X.distanceTo([0,0]),gt=Math.min(h.inertiaMaxSpeed,ot),Tt=X.multiplyBy(gt/ot),$t=gt/(h.inertiaDeceleration*G),oe=Tt.multiplyBy(-$t/2).round();!oe.x&&!oe.y?s.fire("moveend"):(oe=s._limitOffset(oe,s.options.maxBounds),ne(function(){s.panBy(oe,{duration:$t,easeLinearity:G,noMoveStart:!0,animate:!0})}))}}});ue.addInitHook("addHandler","dragging",_s),ue.mergeOptions({keyboard:!0,keyboardPanDelta:80});var an=ni.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Qt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,s=document.documentElement,h=e.scrollTop||s.scrollTop,m=e.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(m,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var s=this._panKeys={},h=this.keyCodes,m,v;for(m=0,v=h.left.length;m<v;m++)s[h.left[m]]=[-1*e,0];for(m=0,v=h.right.length;m<v;m++)s[h.right[m]]=[e,0];for(m=0,v=h.down.length;m<v;m++)s[h.down[m]]=[0,e];for(m=0,v=h.up.length;m<v;m++)s[h.up[m]]=[0,-1*e]},_setZoomDelta:function(e){var s=this._zoomKeys={},h=this.keyCodes,m,v;for(m=0,v=h.zoomIn.length;m<v;m++)s[h.zoomIn[m]]=e;for(m=0,v=h.zoomOut.length;m<v;m++)s[h.zoomOut[m]]=-e},_addHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var s=e.keyCode,h=this._map,m;if(s in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(m=this._panKeys[s],e.shiftKey&&(m=zt(m).multiplyBy(3)),h.options.maxBounds&&(m=h._limitOffset(zt(m),h.options.maxBounds)),h.options.worldCopyJump){var v=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(m)));h.panTo(v)}else h.panBy(m)}else if(s in this._zoomKeys)h.setZoom(h.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;An(e)}}});ue.addInitHook("addHandler","keyboard",an),ue.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var hi=ni.extend({addHooks:function(){Qt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var s=ha(e),h=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var m=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),m),An(e)},_performZoom:function(){var e=this._map,s=e.getZoom(),h=this._map.options.zoomSnap||0;e._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,B=h?Math.ceil(v/h)*h:v,G=e._limitZoom(s+(this._delta>0?B:-B))-s;this._delta=0,this._startTime=null,G&&(e.options.scrollWheelZoom==="center"?e.setZoom(s+G):e.setZoomAround(this._lastMousePos,s+G))}});ue.addInitHook("addHandler","scrollWheelZoom",hi);var Ea=600;ue.mergeOptions({tapHold:jt.touchNative&&jt.safari&&jt.mobile,tapTolerance:15});var xi=ni.extend({addHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var s=e.touches[0];this._startPos=this._newPos=new Mt(s.clientX,s.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(Qt(document,"touchend",We),Qt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Ea),Qt(document,"touchend touchcancel contextmenu",this._cancel,this),Qt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Me(document,"touchend",We),Me(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)},_onMove:function(e){var s=e.touches[0];this._newPos=new Mt(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,s){var h=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});h._simulated=!0,s.target.dispatchEvent(h)}});ue.addInitHook("addHandler","tapHold",xi),ue.mergeOptions({touchZoom:jt.touch,bounceAtZoomLimits:!0});var wi=ni.extend({addHooks:function(){te(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var s=this._map;if(!(!e.touches||e.touches.length!==2||s._animatingZoom||this._zooming)){var h=s.mouseEventToContainerPoint(e.touches[0]),m=s.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(h.add(m)._divideBy(2))),this._startDist=h.distanceTo(m),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),Qt(document,"touchmove",this._onTouchMove,this),Qt(document,"touchend touchcancel",this._onTouchEnd,this),We(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var s=this._map,h=s.mouseEventToContainerPoint(e.touches[0]),m=s.mouseEventToContainerPoint(e.touches[1]),v=h.distanceTo(m)/this._startDist;if(this._zoom=s.getScaleZoom(v,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&v<1||this._zoom>s.getMaxZoom()&&v>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var B=h._add(m)._divideBy(2)._subtract(this._centerPoint);if(v===1&&B.x===0&&B.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),xe(this._animRequest);var G=d(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ne(G,this,!0),We(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,xe(this._animRequest),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ue.addInitHook("addHandler","touchZoom",wi),ue.BoxZoom=Yt,ue.DoubleClickZoom=uo,ue.Drag=_s,ue.Keyboard=an,ue.ScrollWheelZoom=hi,ue.TapHold=xi,ue.TouchZoom=wi,o.Bounds=le,o.Browser=jt,o.CRS=ut,o.Canvas=ao,o.Circle=so,o.CircleMarker=Ki,o.Class=qe,o.Control=Xt,o.DivIcon=Ca,o.DivOverlay=Wi,o.DomEvent=Xr,o.DomUtil=$l,o.Draggable=pn,o.Evented=Kt,o.FeatureGroup=Ii,o.GeoJSON=sn,o.GridLayer=Mr,o.Handler=ni,o.Icon=Jn,o.ImageOverlay=Xn,o.LatLng=fe,o.LatLngBounds=Oe,o.Layer=ri,o.LayerGroup=Wn,o.LineUtil=is,o.Map=ue,o.Marker=ss,o.Mixin=Yl,o.Path=nn,o.Point=Mt,o.PolyUtil=Xl,o.Polygon=gn,o.Polyline=rn,o.Popup=_n,o.PosAnimation=ca,o.Projection=qi,o.Rectangle=lo,o.Renderer=on,o.SVG=ei,o.SVGOverlay=wa,o.TileLayer=Qn,o.Tooltip=ps,o.Transformation=ge,o.Util=Xe,o.VideoOverlay=kr,o.bind=d,o.bounds=be,o.canvas=gs,o.circle=On,o.circleMarker=va,o.control=Tn,o.divIcon=hu,o.extend=f,o.featureGroup=iu,o.geoJSON=ds,o.geoJson=La,o.gridLayer=cu,o.icon=nu,o.imageOverlay=ou,o.latLng=Wt,o.latLngBounds=ke,o.layerGroup=eu,o.map=fa,o.marker=ru,o.point=zt,o.polygon=Er,o.polyline=su,o.popup=lu,o.rectangle=Ni,o.setOptions=J,o.stamp=x,o.svg=si,o.svgOverlay=au,o.tileLayer=oo,o.tooltip=uu,o.transformation=z,o.version=l,o.videoOverlay=xa;var Fn=window.L;o.noConflict=function(){return window.L=Fn,this},window.L=o})})(lh,lh.exports);var $a=lh.exports;const sr=pp($a),cb={class:"drawing-tools"},fb={class:"mb-6"},db={class:"grid grid-cols-2 gap-2"},pb=["onClick"],mb={class:"text-sm"},gb={key:0,class:"mb-6"},_b={class:"space-y-4"},yb={class:"grid grid-cols-6 gap-2"},vb=["onClick"],bb={key:0},Lb={class:"flex items-center space-x-2"},xb={class:"text-sm"},wb={class:"flex items-center space-x-2"},Cb={class:"text-sm"},Eb={class:"text-sm"},kb=["value"],Mb={key:1},Pb={class:"mt-2 text-sm text-gray-600"},Bb={key:2},Sb={key:1,class:"mb-6"},Ab={class:"space-y-2 text-sm"},Tb={key:0},Db={key:1},Rb={key:2},Ob={key:3},Fb=gr({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","properties-update"],setup(t,{emit:n}){const o=t,l=n,f=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"}],p=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],d=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],b=ce("#3B82F6"),x=ce(.2),P=ce("#2563EB"),E=ce(1),k=ce(2),F=ce("solid"),j=ce(0),q=ce(0),J=Ge(()=>o.selectedShape?["Circle","Semicircle","Rectangle","Polygon"].includes(o.selectedShape.type):!1);Nr(()=>o.selectedShape,vt=>{vt&&(b.value=vt.properties.style.fillColor||"#3B82F6",x.value=vt.properties.style.fillOpacity||.2,P.value=vt.properties.style.color||"#2563EB",E.value=vt.properties.style.opacity||1,k.value=vt.properties.style.weight||2,F.value=pt(vt.properties.style.dashArray),j.value=vt.properties.radius||0,q.value=vt.properties.startAngle||0)},{immediate:!0});const st=vt=>{switch(vt){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},pt=vt=>{if(!vt)return"solid";switch(vt){case"10,10":return"dashed";case"2,5":return"dotted";case"10,5,2,5":return"dashdot";default:return"solid"}},bt=vt=>{P.value=vt,J.value&&(b.value=vt),ft({color:vt,fillColor:J.value?vt:void 0})},ft=vt=>{l("style-update",vt)},xt=vt=>{l("properties-update",vt)},St=vt=>`${(vt/1e4).toFixed(2)} ha`,Nt=vt=>`${vt.toFixed(1)} m`,Vt=vt=>`${(vt*100).toFixed(1)}%`;return(vt,_t)=>(he(),ye("div",cb,[lt("div",fb,[_t[16]||(_t[16]=lt("h3",{class:"text-lg font-semibold mb-4"},"Outils de dessin",-1)),lt("div",db,[(he(),ye(gi,null,Fr(f,Dt=>lt("button",{key:Dt.type,class:Ms(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":vt.currentTool===Dt.type,"hover:bg-gray-50 border-gray-200":vt.currentTool!==Dt.type}]),onClick:ne=>vt.$emit("tool-change",Dt.type)},[lt("span",mb,Ue(Dt.label),1)],10,pb)),64))])]),vt.selectedShape?(he(),ye("div",gb,[_t[25]||(_t[25]=lt("h3",{class:"text-lg font-semibold mb-4"},"Style",-1)),lt("div",_b,[lt("div",null,[_t[17]||(_t[17]=lt("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Couleurs prédéfinies ",-1)),lt("div",yb,[(he(),ye(gi,null,Fr(p,Dt=>lt("button",{key:Dt,class:"w-8 h-8 rounded-full border-2 border-gray-200",style:hl({backgroundColor:Dt}),onClick:ne=>bt(Dt)},null,12,vb)),64))])]),J.value?(he(),ye("div",bb,[_t[18]||(_t[18]=lt("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de remplissage ",-1)),lt("div",Lb,[Mi(lt("input",{type:"color","onUpdate:modelValue":_t[0]||(_t[0]=Dt=>b.value=Dt),class:"w-8 h-8 rounded border",onChange:_t[1]||(_t[1]=Dt=>ft({fillColor:b.value}))},null,544),[[ji,b.value]]),Mi(lt("input",{type:"range","onUpdate:modelValue":_t[2]||(_t[2]=Dt=>x.value=Dt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:_t[3]||(_t[3]=Dt=>ft({fillOpacity:x.value}))},null,544),[[ji,x.value]]),lt("span",xb,Ue((x.value*100).toFixed(0))+"%",1)])])):di("",!0),lt("div",null,[_t[19]||(_t[19]=lt("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de bordure ",-1)),lt("div",wb,[Mi(lt("input",{type:"color","onUpdate:modelValue":_t[4]||(_t[4]=Dt=>P.value=Dt),class:"w-8 h-8 rounded border",onChange:_t[5]||(_t[5]=Dt=>ft({strokeColor:P.value}))},null,544),[[ji,P.value]]),Mi(lt("input",{type:"range","onUpdate:modelValue":_t[6]||(_t[6]=Dt=>E.value=Dt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:_t[7]||(_t[7]=Dt=>ft({strokeOpacity:E.value}))},null,544),[[ji,E.value]]),lt("span",Cb,Ue((E.value*100).toFixed(0))+"%",1)])]),lt("div",null,[_t[20]||(_t[20]=lt("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Épaisseur de trait ",-1)),Mi(lt("input",{type:"range","onUpdate:modelValue":_t[8]||(_t[8]=Dt=>k.value=Dt),min:"1",max:"10",class:"w-full",onChange:_t[9]||(_t[9]=Dt=>ft({strokeWidth:k.value}))},null,544),[[ji,k.value]]),lt("span",Eb,Ue(k.value)+"px",1)]),lt("div",null,[_t[21]||(_t[21]=lt("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Type de trait ",-1)),Mi(lt("select",{"onUpdate:modelValue":_t[10]||(_t[10]=Dt=>F.value=Dt),class:"w-full px-2 py-1 rounded border",onChange:_t[11]||(_t[11]=Dt=>ft({dashArray:st(F.value)}))},[(he(),ye(gi,null,Fr(d,Dt=>lt("option",{key:Dt.value,value:Dt.value},Ue(Dt.label),9,kb)),64))],544),[[gg,F.value]])]),vt.selectedShape.type==="Circle"||vt.selectedShape.type==="Semicircle"?(he(),ye("div",Mb,[_t[23]||(_t[23]=lt("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Rayon (m) ",-1)),Mi(lt("input",{type:"number","onUpdate:modelValue":_t[12]||(_t[12]=Dt=>j.value=Dt),min:"1",class:"w-full px-2 py-1 rounded border",onChange:_t[13]||(_t[13]=Dt=>xt({radius:j.value}))},null,544),[[ji,j.value]]),lt("div",Pb,[Vn(" Diamètre: "+Ue((j.value*2).toFixed(1))+" m ",1),_t[22]||(_t[22]=lt("br",null,null,-1)),Vn(" Surface: "+Ue(St(Math.PI*j.value*j.value)),1)])])):di("",!0),vt.selectedShape.type==="Semicircle"?(he(),ye("div",Bb,[_t[24]||(_t[24]=lt("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Angle de départ (°) ",-1)),Mi(lt("input",{type:"number","onUpdate:modelValue":_t[14]||(_t[14]=Dt=>q.value=Dt),min:"0",max:"360",class:"w-full px-2 py-1 rounded border",onChange:_t[15]||(_t[15]=Dt=>xt({startAngle:q.value}))},null,544),[[ji,q.value]])])):di("",!0)])])):di("",!0),vt.selectedShape?(he(),ye("div",Sb,[_t[26]||(_t[26]=lt("h3",{class:"text-lg font-semibold mb-4"},"Propriétés",-1)),lt("div",Ab,[vt.selectedShape.properties.area?(he(),ye("div",Tb," Surface: "+Ue(St(vt.selectedShape.properties.area)),1)):di("",!0),vt.selectedShape.properties.length?(he(),ye("div",Db," Longueur: "+Ue(Nt(vt.selectedShape.properties.length)),1)):di("",!0),vt.selectedShape.properties.perimeter?(he(),ye("div",Rb," Périmètre: "+Ue(Nt(vt.selectedShape.properties.perimeter)),1)):di("",!0),vt.selectedShape.properties.slope?(he(),ye("div",Ob," Pente: "+Ue(Vt(vt.selectedShape.properties.slope)),1)):di("",!0)])])):di("",!0)]))}}),Ib=vp(Fb,[["__scopeId","data-v-bab00dc3"]]);(()=>{var Vh,Hh;var t=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,f=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,d=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports),b=(i,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let c of l(r))!p.call(i,c)&&c!==a&&n(i,c,{get:()=>r[c],enumerable:!(u=o(r,c))||u.enumerable});return i},x=(i,r,a)=>(a=i!=null?t(f(i)):{},b(r||!i||!i.__esModule?n(a,"default",{value:i,enumerable:!0}):a,i)),P=d((i,r)=>{function a(){this.__data__=[],this.size=0}r.exports=a}),E=d((i,r)=>{function a(u,c){return u===c||u!==u&&c!==c}r.exports=a}),k=d((i,r)=>{var a=E();function u(c,g){for(var _=c.length;_--;)if(a(c[_][0],g))return _;return-1}r.exports=u}),F=d((i,r)=>{var a=k(),u=Array.prototype,c=u.splice;function g(_){var y=this.__data__,w=a(y,_);if(w<0)return!1;var M=y.length-1;return w==M?y.pop():c.call(y,w,1),--this.size,!0}r.exports=g}),j=d((i,r)=>{var a=k();function u(c){var g=this.__data__,_=a(g,c);return _<0?void 0:g[_][1]}r.exports=u}),q=d((i,r)=>{var a=k();function u(c){return a(this.__data__,c)>-1}r.exports=u}),J=d((i,r)=>{var a=k();function u(c,g){var _=this.__data__,y=a(_,c);return y<0?(++this.size,_.push([c,g])):_[y][1]=g,this}r.exports=u}),st=d((i,r)=>{var a=P(),u=F(),c=j(),g=q(),_=J();function y(w){var M=-1,N=w==null?0:w.length;for(this.clear();++M<N;){var O=w[M];this.set(O[0],O[1])}}y.prototype.clear=a,y.prototype.delete=u,y.prototype.get=c,y.prototype.has=g,y.prototype.set=_,r.exports=y}),pt=d((i,r)=>{var a=st();function u(){this.__data__=new a,this.size=0}r.exports=u}),bt=d((i,r)=>{function a(u){var c=this.__data__,g=c.delete(u);return this.size=c.size,g}r.exports=a}),ft=d((i,r)=>{function a(u){return this.__data__.get(u)}r.exports=a}),xt=d((i,r)=>{function a(u){return this.__data__.has(u)}r.exports=a}),St=d((i,r)=>{var a=typeof Gn=="object"&&Gn&&Gn.Object===Object&&Gn;r.exports=a}),Nt=d((i,r)=>{var a=St(),u=typeof self=="object"&&self&&self.Object===Object&&self,c=a||u||Function("return this")();r.exports=c}),Vt=d((i,r)=>{var a=Nt(),u=a.Symbol;r.exports=u}),vt=d((i,r)=>{var a=Vt(),u=Object.prototype,c=u.hasOwnProperty,g=u.toString,_=a?a.toStringTag:void 0;function y(w){var M=c.call(w,_),N=w[_];try{w[_]=void 0;var O=!0}catch{}var et=g.call(w);return O&&(M?w[_]=N:delete w[_]),et}r.exports=y}),_t=d((i,r)=>{var a=Object.prototype,u=a.toString;function c(g){return u.call(g)}r.exports=c}),Dt=d((i,r)=>{var a=Vt(),u=vt(),c=_t(),g="[object Null]",_="[object Undefined]",y=a?a.toStringTag:void 0;function w(M){return M==null?M===void 0?_:g:y&&y in Object(M)?u(M):c(M)}r.exports=w}),ne=d((i,r)=>{function a(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}r.exports=a}),xe=d((i,r)=>{var a=Dt(),u=ne(),c="[object AsyncFunction]",g="[object Function]",_="[object GeneratorFunction]",y="[object Proxy]";function w(M){if(!u(M))return!1;var N=a(M);return N==g||N==_||N==c||N==y}r.exports=w}),Xe=d((i,r)=>{var a=Nt(),u=a["__core-js_shared__"];r.exports=u}),qe=d((i,r)=>{var a=Xe(),u=function(){var g=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function c(g){return!!u&&u in g}r.exports=c}),Vi=d((i,r)=>{var a=Function.prototype,u=a.toString;function c(g){if(g!=null){try{return u.call(g)}catch{}try{return g+""}catch{}}return""}r.exports=c}),re=d((i,r)=>{var a=xe(),u=qe(),c=ne(),g=Vi(),_=/[\\^$.*+?()[\]{}|]/g,y=/^\[object .+?Constructor\]$/,w=Function.prototype,M=Object.prototype,N=w.toString,O=M.hasOwnProperty,et=RegExp("^"+N.call(O).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nt(yt){if(!c(yt)||u(yt))return!1;var Bt=a(yt)?et:y;return Bt.test(g(yt))}r.exports=nt}),Kt=d((i,r)=>{function a(u,c){return u==null?void 0:u[c]}r.exports=a}),Mt=d((i,r)=>{var a=re(),u=Kt();function c(g,_){var y=u(g,_);return a(y)?y:void 0}r.exports=c}),vi=d((i,r)=>{var a=Mt(),u=Nt(),c=a(u,"Map");r.exports=c}),zt=d((i,r)=>{var a=Mt(),u=a(Object,"create");r.exports=u}),le=d((i,r)=>{var a=zt();function u(){this.__data__=a?a(null):{},this.size=0}r.exports=u}),be=d((i,r)=>{function a(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}r.exports=a}),Oe=d((i,r)=>{var a=zt(),u="__lodash_hash_undefined__",c=Object.prototype,g=c.hasOwnProperty;function _(y){var w=this.__data__;if(a){var M=w[y];return M===u?void 0:M}return g.call(w,y)?w[y]:void 0}r.exports=_}),ke=d((i,r)=>{var a=zt(),u=Object.prototype,c=u.hasOwnProperty;function g(_){var y=this.__data__;return a?y[_]!==void 0:c.call(y,_)}r.exports=g}),fe=d((i,r)=>{var a=zt(),u="__lodash_hash_undefined__";function c(g,_){var y=this.__data__;return this.size+=this.has(g)?0:1,y[g]=a&&_===void 0?u:_,this}r.exports=c}),Wt=d((i,r)=>{var a=le(),u=be(),c=Oe(),g=ke(),_=fe();function y(w){var M=-1,N=w==null?0:w.length;for(this.clear();++M<N;){var O=w[M];this.set(O[0],O[1])}}y.prototype.clear=a,y.prototype.delete=u,y.prototype.get=c,y.prototype.has=g,y.prototype.set=_,r.exports=y}),ut=d((i,r)=>{var a=Wt(),u=st(),c=vi();function g(){this.size=0,this.__data__={hash:new a,map:new(c||u),string:new a}}r.exports=g}),Pt=d((i,r)=>{function a(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}r.exports=a}),kt=d((i,r)=>{var a=Pt();function u(c,g){var _=c.__data__;return a(g)?_[typeof g=="string"?"string":"hash"]:_.map}r.exports=u}),Ft=d((i,r)=>{var a=kt();function u(c){var g=a(this,c).delete(c);return this.size-=g?1:0,g}r.exports=u}),ge=d((i,r)=>{var a=kt();function u(c){return a(this,c).get(c)}r.exports=u}),z=d((i,r)=>{var a=kt();function u(c){return a(this,c).has(c)}r.exports=u}),U=d((i,r)=>{var a=kt();function u(c,g){var _=a(this,c),y=_.size;return _.set(c,g),this.size+=_.size==y?0:1,this}r.exports=u}),Y=d((i,r)=>{var a=ut(),u=Ft(),c=ge(),g=z(),_=U();function y(w){var M=-1,N=w==null?0:w.length;for(this.clear();++M<N;){var O=w[M];this.set(O[0],O[1])}}y.prototype.clear=a,y.prototype.delete=u,y.prototype.get=c,y.prototype.has=g,y.prototype.set=_,r.exports=y}),ht=d((i,r)=>{var a=st(),u=vi(),c=Y(),g=200;function _(y,w){var M=this.__data__;if(M instanceof a){var N=M.__data__;if(!u||N.length<g-1)return N.push([y,w]),this.size=++M.size,this;M=this.__data__=new c(N)}return M.set(y,w),this.size=M.size,this}r.exports=_}),mt=d((i,r)=>{var a=st(),u=pt(),c=bt(),g=ft(),_=xt(),y=ht();function w(M){var N=this.__data__=new a(M);this.size=N.size}w.prototype.clear=u,w.prototype.delete=c,w.prototype.get=g,w.prototype.has=_,w.prototype.set=y,r.exports=w}),ct=d((i,r)=>{var a=Mt(),u=function(){try{var c=a(Object,"defineProperty");return c({},"",{}),c}catch{}}();r.exports=u}),Et=d((i,r)=>{var a=ct();function u(c,g,_){g=="__proto__"&&a?a(c,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):c[g]=_}r.exports=u}),Ct=d((i,r)=>{var a=Et(),u=E();function c(g,_,y){(y!==void 0&&!u(g[_],y)||y===void 0&&!(_ in g))&&a(g,_,y)}r.exports=c}),wt=d((i,r)=>{function a(u){return function(c,g,_){for(var y=-1,w=Object(c),M=_(c),N=M.length;N--;){var O=M[u?N:++y];if(g(w[O],O,w)===!1)break}return c}}r.exports=a}),Lt=d((i,r)=>{var a=wt(),u=a();r.exports=u}),Zt=d((i,r)=>{var a=Nt(),u=typeof i=="object"&&i&&!i.nodeType&&i,c=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=c&&c.exports===u,_=g?a.Buffer:void 0,y=_?_.allocUnsafe:void 0;function w(M,N){if(N)return M.slice();var O=M.length,et=y?y(O):new M.constructor(O);return M.copy(et),et}r.exports=w}),At=d((i,r)=>{var a=Nt(),u=a.Uint8Array;r.exports=u}),Ut=d((i,r)=>{var a=At();function u(c){var g=new c.constructor(c.byteLength);return new a(g).set(new a(c)),g}r.exports=u}),Jt=d((i,r)=>{var a=Ut();function u(c,g){var _=g?a(c.buffer):c.buffer;return new c.constructor(_,c.byteOffset,c.length)}r.exports=u}),se=d((i,r)=>{function a(u,c){var g=-1,_=u.length;for(c||(c=Array(_));++g<_;)c[g]=u[g];return c}r.exports=a}),Le=d((i,r)=>{var a=ne(),u=Object.create,c=function(){function g(){}return function(_){if(!a(_))return{};if(u)return u(_);g.prototype=_;var y=new g;return g.prototype=void 0,y}}();r.exports=c}),pe=d((i,r)=>{function a(u,c){return function(g){return u(c(g))}}r.exports=a}),Qe=d((i,r)=>{var a=pe(),u=a(Object.getPrototypeOf,Object);r.exports=u}),He=d((i,r)=>{var a=Object.prototype;function u(c){var g=c&&c.constructor,_=typeof g=="function"&&g.prototype||a;return c===_}r.exports=u}),bi=d((i,r)=>{var a=Le(),u=Qe(),c=He();function g(_){return typeof _.constructor=="function"&&!c(_)?a(u(_)):{}}r.exports=g}),Ke=d((i,r)=>{function a(u){return u!=null&&typeof u=="object"}r.exports=a}),cn=d((i,r)=>{var a=Dt(),u=Ke(),c="[object Arguments]";function g(_){return u(_)&&a(_)==c}r.exports=g}),kn=d((i,r)=>{var a=cn(),u=Ke(),c=Object.prototype,g=c.hasOwnProperty,_=c.propertyIsEnumerable,y=a(function(){return arguments}())?a:function(w){return u(w)&&g.call(w,"callee")&&!_.call(w,"callee")};r.exports=y}),Ne=d((i,r)=>{var a=Array.isArray;r.exports=a}),Li=d((i,r)=>{var a=9007199254740991;function u(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=a}r.exports=u}),Hi=d((i,r)=>{var a=xe(),u=Li();function c(g){return g!=null&&u(g.length)&&!a(g)}r.exports=c}),Ml=d((i,r)=>{var a=Hi(),u=Ke();function c(g){return u(g)&&a(g)}r.exports=c}),Pl=d((i,r)=>{function a(){return!1}r.exports=a}),Os=d((i,r)=>{var a=Nt(),u=Pl(),c=typeof i=="object"&&i&&!i.nodeType&&i,g=c&&typeof r=="object"&&r&&!r.nodeType&&r,_=g&&g.exports===c,y=_?a.Buffer:void 0,w=y?y.isBuffer:void 0,M=w||u;r.exports=M}),Ko=d((i,r)=>{var a=Dt(),u=Qe(),c=Ke(),g="[object Object]",_=Function.prototype,y=Object.prototype,w=_.toString,M=y.hasOwnProperty,N=w.call(Object);function O(et){if(!c(et)||a(et)!=g)return!1;var nt=u(et);if(nt===null)return!0;var yt=M.call(nt,"constructor")&&nt.constructor;return typeof yt=="function"&&yt instanceof yt&&w.call(yt)==N}r.exports=O}),Wo=d((i,r)=>{var a=Dt(),u=Li(),c=Ke(),g="[object Arguments]",_="[object Array]",y="[object Boolean]",w="[object Date]",M="[object Error]",N="[object Function]",O="[object Map]",et="[object Number]",nt="[object Object]",yt="[object RegExp]",Bt="[object Set]",Ot="[object String]",de="[object WeakMap]",I="[object ArrayBuffer]",V="[object DataView]",K="[object Float32Array]",rt="[object Float64Array]",W="[object Int8Array]",it="[object Int16Array]",C="[object Int32Array]",S="[object Uint8Array]",T="[object Uint8ClampedArray]",A="[object Uint16Array]",D="[object Uint32Array]",R={};R[K]=R[rt]=R[W]=R[it]=R[C]=R[S]=R[T]=R[A]=R[D]=!0,R[g]=R[_]=R[I]=R[y]=R[V]=R[w]=R[M]=R[N]=R[O]=R[et]=R[nt]=R[yt]=R[Bt]=R[Ot]=R[de]=!1;function Z(H){return c(H)&&u(H.length)&&!!R[a(H)]}r.exports=Z}),Bl=d((i,r)=>{function a(u){return function(c){return u(c)}}r.exports=a}),Sl=d((i,r)=>{var a=St(),u=typeof i=="object"&&i&&!i.nodeType&&i,c=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=c&&c.exports===u,_=g&&a.process,y=function(){try{var w=c&&c.require&&c.require("util").types;return w||_&&_.binding&&_.binding("util")}catch{}}();r.exports=y}),Jo=d((i,r)=>{var a=Wo(),u=Bl(),c=Sl(),g=c&&c.isTypedArray,_=g?u(g):a;r.exports=_}),Yo=d((i,r)=>{function a(u,c){if(!(c==="constructor"&&typeof u[c]=="function")&&c!="__proto__")return u[c]}r.exports=a}),Al=d((i,r)=>{var a=Et(),u=E(),c=Object.prototype,g=c.hasOwnProperty;function _(y,w,M){var N=y[w];(!(g.call(y,w)&&u(N,M))||M===void 0&&!(w in y))&&a(y,w,M)}r.exports=_}),Tl=d((i,r)=>{var a=Al(),u=Et();function c(g,_,y,w){var M=!y;y||(y={});for(var N=-1,O=_.length;++N<O;){var et=_[N],nt=w?w(y[et],g[et],et,y,g):void 0;nt===void 0&&(nt=g[et]),M?u(y,et,nt):a(y,et,nt)}return y}r.exports=c}),Fs=d((i,r)=>{function a(u,c){for(var g=-1,_=Array(u);++g<u;)_[g]=c(g);return _}r.exports=a}),Xo=d((i,r)=>{var a=9007199254740991,u=/^(?:0|[1-9]\d*)$/;function c(g,_){var y=typeof g;return _=_??a,!!_&&(y=="number"||y!="symbol"&&u.test(g))&&g>-1&&g%1==0&&g<_}r.exports=c}),Dl=d((i,r)=>{var a=Fs(),u=kn(),c=Ne(),g=Os(),_=Xo(),y=Jo(),w=Object.prototype,M=w.hasOwnProperty;function N(O,et){var nt=c(O),yt=!nt&&u(O),Bt=!nt&&!yt&&g(O),Ot=!nt&&!yt&&!Bt&&y(O),de=nt||yt||Bt||Ot,I=de?a(O.length,String):[],V=I.length;for(var K in O)(et||M.call(O,K))&&!(de&&(K=="length"||Bt&&(K=="offset"||K=="parent")||Ot&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||_(K,V)))&&I.push(K);return I}r.exports=N}),Rl=d((i,r)=>{function a(u){var c=[];if(u!=null)for(var g in Object(u))c.push(g);return c}r.exports=a}),Ol=d((i,r)=>{var a=ne(),u=He(),c=Rl(),g=Object.prototype,_=g.hasOwnProperty;function y(w){if(!a(w))return c(w);var M=u(w),N=[];for(var O in w)O=="constructor"&&(M||!_.call(w,O))||N.push(O);return N}r.exports=y}),Fi=d((i,r)=>{var a=Dl(),u=Ol(),c=Hi();function g(_){return c(_)?a(_,!0):u(_)}r.exports=g}),jt=d((i,r)=>{var a=Tl(),u=Fi();function c(g){return a(g,u(g))}r.exports=c}),Qo=d((i,r)=>{var a=Ct(),u=Zt(),c=Jt(),g=se(),_=bi(),y=kn(),w=Ne(),M=Ml(),N=Os(),O=xe(),et=ne(),nt=Ko(),yt=Jo(),Bt=Yo(),Ot=jt();function de(I,V,K,rt,W,it,C){var S=Bt(I,K),T=Bt(V,K),A=C.get(T);if(A){a(I,K,A);return}var D=it?it(S,T,K+"",I,V,C):void 0,R=D===void 0;if(R){var Z=w(T),H=!Z&&N(T),$=!Z&&!H&&yt(T);D=T,Z||H||$?w(S)?D=S:M(S)?D=g(S):H?(R=!1,D=u(T,!0)):$?(R=!1,D=c(T,!0)):D=[]:nt(T)||y(T)?(D=S,y(S)?D=Ot(S):(!et(S)||O(S))&&(D=_(T))):R=!1}R&&(C.set(T,D),W(D,T,rt,it,C),C.delete(T)),a(I,K,D)}r.exports=de}),ta=d((i,r)=>{var a=mt(),u=Ct(),c=Lt(),g=Qo(),_=ne(),y=Fi(),w=Yo();function M(N,O,et,nt,yt){N!==O&&c(O,function(Bt,Ot){if(yt||(yt=new a),_(Bt))g(N,O,Ot,et,M,nt,yt);else{var de=nt?nt(w(N,Ot),Bt,Ot+"",N,O,yt):void 0;de===void 0&&(de=Bt),u(N,Ot,de)}},y)}r.exports=M}),Is=d((i,r)=>{function a(u){return u}r.exports=a}),ea=d((i,r)=>{function a(u,c,g){switch(g.length){case 0:return u.call(c);case 1:return u.call(c,g[0]);case 2:return u.call(c,g[0],g[1]);case 3:return u.call(c,g[0],g[1],g[2])}return u.apply(c,g)}r.exports=a}),Ns=d((i,r)=>{var a=ea(),u=Math.max;function c(g,_,y){return _=u(_===void 0?g.length-1:_,0),function(){for(var w=arguments,M=-1,N=u(w.length-_,0),O=Array(N);++M<N;)O[M]=w[_+M];M=-1;for(var et=Array(_+1);++M<_;)et[M]=w[M];return et[_]=y(O),a(g,this,et)}}r.exports=c}),ia=d((i,r)=>{function a(u){return function(){return u}}r.exports=a}),$n=d((i,r)=>{var a=ia(),u=ct(),c=Is(),g=u?function(_,y){return u(_,"toString",{configurable:!0,enumerable:!1,value:a(y),writable:!0})}:c;r.exports=g}),na=d((i,r)=>{var a=800,u=16,c=Date.now;function g(_){var y=0,w=0;return function(){var M=c(),N=u-(M-w);if(w=M,N>0){if(++y>=a)return arguments[0]}else y=0;return _.apply(void 0,arguments)}}r.exports=g}),Fl=d((i,r)=>{var a=$n(),u=na(),c=u(a);r.exports=c}),Il=d((i,r)=>{var a=Is(),u=Ns(),c=Fl();function g(_,y){return c(u(_,y,a),_+"")}r.exports=g}),Nl=d((i,r)=>{var a=E(),u=Hi(),c=Xo(),g=ne();function _(y,w,M){if(!g(M))return!1;var N=typeof w;return(N=="number"?u(M)&&c(w,M.length):N=="string"&&w in M)?a(M[w],y):!1}r.exports=_}),zl=d((i,r)=>{var a=Il(),u=Nl();function c(g){return a(function(_,y){var w=-1,M=y.length,N=M>1?y[M-1]:void 0,O=M>2?y[2]:void 0;for(N=g.length>3&&typeof N=="function"?(M--,N):void 0,O&&u(y[0],y[1],O)&&(N=M<3?void 0:N,M=1),_=Object(_);++w<M;){var et=y[w];et&&g(_,et,w,N)}return _})}r.exports=c}),$r=d((i,r)=>{var a=ta(),u=zl(),c=u(function(g,_,y){a(g,_,y)});r.exports=c}),zs=d((i,r)=>{var a=Dt(),u=Ke(),c="[object Symbol]";function g(_){return typeof _=="symbol"||u(_)&&a(_)==c}r.exports=g}),qr=d((i,r)=>{var a=Ne(),u=zs(),c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function _(y,w){if(a(y))return!1;var M=typeof y;return M=="number"||M=="symbol"||M=="boolean"||y==null||u(y)?!0:g.test(y)||!c.test(y)||w!=null&&y in Object(w)}r.exports=_}),jl=d((i,r)=>{var a=Y(),u="Expected a function";function c(g,_){if(typeof g!="function"||_!=null&&typeof _!="function")throw new TypeError(u);var y=function(){var w=arguments,M=_?_.apply(this,w):w[0],N=y.cache;if(N.has(M))return N.get(M);var O=g.apply(this,w);return y.cache=N.set(M,O)||N,O};return y.cache=new(c.Cache||a),y}c.Cache=a,r.exports=c}),Ul=d((i,r)=>{var a=jl(),u=500;function c(g){var _=a(g,function(w){return y.size===u&&y.clear(),w}),y=_.cache;return _}r.exports=c}),Gl=d((i,r)=>{var a=Ul(),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,g=a(function(_){var y=[];return _.charCodeAt(0)===46&&y.push(""),_.replace(u,function(w,M,N,O){y.push(N?O.replace(c,"$1"):M||w)}),y});r.exports=g}),Vl=d((i,r)=>{function a(u,c){for(var g=-1,_=u==null?0:u.length,y=Array(_);++g<_;)y[g]=c(u[g],g,u);return y}r.exports=a}),Hl=d((i,r)=>{var a=Vt(),u=Vl(),c=Ne(),g=zs(),_=a?a.prototype:void 0,y=_?_.toString:void 0;function w(M){if(typeof M=="string")return M;if(c(M))return u(M,w)+"";if(g(M))return y?y.call(M):"";var N=M+"";return N=="0"&&1/M==-1/0?"-0":N}r.exports=w}),js=d((i,r)=>{var a=Hl();function u(c){return c==null?"":a(c)}r.exports=u}),_r=d((i,r)=>{var a=Ne(),u=qr(),c=Gl(),g=js();function _(y,w){return a(y)?y:u(y,w)?[y]:c(g(y))}r.exports=_}),ra=d((i,r)=>{var a=zs();function u(c){if(typeof c=="string"||a(c))return c;var g=c+"";return g=="0"&&1/c==-1/0?"-0":g}r.exports=u}),sa=d((i,r)=>{var a=_r(),u=ra();function c(g,_){_=a(_,g);for(var y=0,w=_.length;g!=null&&y<w;)g=g[u(_[y++])];return y&&y==w?g:void 0}r.exports=c}),fn=d((i,r)=>{var a=sa();function u(c,g,_){var y=c==null?void 0:a(c,g);return y===void 0?_:y}r.exports=u}),me=d((i,r)=>{(function(a,u){typeof i=="object"&&typeof r<"u"?r.exports=u():(a=a||self).RBush=u()})(i,function(){function a(I,V,K,rt,W){(function it(C,S,T,A,D){for(;A>T;){if(A-T>600){var R=A-T+1,Z=S-T+1,H=Math.log(R),$=.5*Math.exp(2*H/3),tt=.5*Math.sqrt(H*$*(R-$)/R)*(Z-R/2<0?-1:1),Q=Math.max(T,Math.floor(S-Z*$/R+tt)),dt=Math.min(A,Math.floor(S+(R-Z)*$/R+tt));it(C,S,Q,dt,D)}var Rt=C[S],It=T,Ht=A;for(u(C,T,S),D(C[A],Rt)>0&&u(C,T,A);It<Ht;){for(u(C,It,Ht),It++,Ht--;D(C[It],Rt)<0;)It++;for(;D(C[Ht],Rt)>0;)Ht--}D(C[T],Rt)===0?u(C,T,Ht):u(C,++Ht,A),Ht<=S&&(T=Ht+1),S<=Ht&&(A=Ht-1)}})(I,V,K||0,rt||I.length-1,W||c)}function u(I,V,K){var rt=I[V];I[V]=I[K],I[K]=rt}function c(I,V){return I<V?-1:I>V?1:0}var g=function(I){I===void 0&&(I=9),this._maxEntries=Math.max(4,I),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function _(I,V,K){if(!K)return V.indexOf(I);for(var rt=0;rt<V.length;rt++)if(K(I,V[rt]))return rt;return-1}function y(I,V){w(I,0,I.children.length,V,I)}function w(I,V,K,rt,W){W||(W=Ot(null)),W.minX=1/0,W.minY=1/0,W.maxX=-1/0,W.maxY=-1/0;for(var it=V;it<K;it++){var C=I.children[it];M(W,I.leaf?rt(C):C)}return W}function M(I,V){return I.minX=Math.min(I.minX,V.minX),I.minY=Math.min(I.minY,V.minY),I.maxX=Math.max(I.maxX,V.maxX),I.maxY=Math.max(I.maxY,V.maxY),I}function N(I,V){return I.minX-V.minX}function O(I,V){return I.minY-V.minY}function et(I){return(I.maxX-I.minX)*(I.maxY-I.minY)}function nt(I){return I.maxX-I.minX+(I.maxY-I.minY)}function yt(I,V){return I.minX<=V.minX&&I.minY<=V.minY&&V.maxX<=I.maxX&&V.maxY<=I.maxY}function Bt(I,V){return V.minX<=I.maxX&&V.minY<=I.maxY&&V.maxX>=I.minX&&V.maxY>=I.minY}function Ot(I){return{children:I,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function de(I,V,K,rt,W){for(var it=[V,K];it.length;)if(!((K=it.pop())-(V=it.pop())<=rt)){var C=V+Math.ceil((K-V)/rt/2)*rt;a(I,C,V,K,W),it.push(V,C,C,K)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function(I){var V=this.data,K=[];if(!Bt(I,V))return K;for(var rt=this.toBBox,W=[];V;){for(var it=0;it<V.children.length;it++){var C=V.children[it],S=V.leaf?rt(C):C;Bt(I,S)&&(V.leaf?K.push(C):yt(I,S)?this._all(C,K):W.push(C))}V=W.pop()}return K},g.prototype.collides=function(I){var V=this.data;if(!Bt(I,V))return!1;for(var K=[];V;){for(var rt=0;rt<V.children.length;rt++){var W=V.children[rt],it=V.leaf?this.toBBox(W):W;if(Bt(I,it)){if(V.leaf||yt(I,it))return!0;K.push(W)}}V=K.pop()}return!1},g.prototype.load=function(I){if(!I||!I.length)return this;if(I.length<this._minEntries){for(var V=0;V<I.length;V++)this.insert(I[V]);return this}var K=this._build(I.slice(),0,I.length-1,0);if(this.data.children.length)if(this.data.height===K.height)this._splitRoot(this.data,K);else{if(this.data.height<K.height){var rt=this.data;this.data=K,K=rt}this._insert(K,this.data.height-K.height-1,!0)}else this.data=K;return this},g.prototype.insert=function(I){return I&&this._insert(I,this.data.height-1),this},g.prototype.clear=function(){return this.data=Ot([]),this},g.prototype.remove=function(I,V){if(!I)return this;for(var K,rt,W,it=this.data,C=this.toBBox(I),S=[],T=[];it||S.length;){if(it||(it=S.pop(),rt=S[S.length-1],K=T.pop(),W=!0),it.leaf){var A=_(I,it.children,V);if(A!==-1)return it.children.splice(A,1),S.push(it),this._condense(S),this}W||it.leaf||!yt(it,C)?rt?(K++,it=rt.children[K],W=!1):it=null:(S.push(it),T.push(K),K=0,rt=it,it=it.children[0])}return this},g.prototype.toBBox=function(I){return I},g.prototype.compareMinX=function(I,V){return I.minX-V.minX},g.prototype.compareMinY=function(I,V){return I.minY-V.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function(I){return this.data=I,this},g.prototype._all=function(I,V){for(var K=[];I;)I.leaf?V.push.apply(V,I.children):K.push.apply(K,I.children),I=K.pop();return V},g.prototype._build=function(I,V,K,rt){var W,it=K-V+1,C=this._maxEntries;if(it<=C)return y(W=Ot(I.slice(V,K+1)),this.toBBox),W;rt||(rt=Math.ceil(Math.log(it)/Math.log(C)),C=Math.ceil(it/Math.pow(C,rt-1))),(W=Ot([])).leaf=!1,W.height=rt;var S=Math.ceil(it/C),T=S*Math.ceil(Math.sqrt(C));de(I,V,K,T,this.compareMinX);for(var A=V;A<=K;A+=T){var D=Math.min(A+T-1,K);de(I,A,D,S,this.compareMinY);for(var R=A;R<=D;R+=S){var Z=Math.min(R+S-1,D);W.children.push(this._build(I,R,Z,rt-1))}}return y(W,this.toBBox),W},g.prototype._chooseSubtree=function(I,V,K,rt){for(;rt.push(V),!V.leaf&&rt.length-1!==K;){for(var W=1/0,it=1/0,C=void 0,S=0;S<V.children.length;S++){var T=V.children[S],A=et(T),D=(R=I,Z=T,(Math.max(Z.maxX,R.maxX)-Math.min(Z.minX,R.minX))*(Math.max(Z.maxY,R.maxY)-Math.min(Z.minY,R.minY))-A);D<it?(it=D,W=A<W?A:W,C=T):D===it&&A<W&&(W=A,C=T)}V=C||V.children[0]}var R,Z;return V},g.prototype._insert=function(I,V,K){var rt=K?I:this.toBBox(I),W=[],it=this._chooseSubtree(rt,this.data,V,W);for(it.children.push(I),M(it,rt);V>=0&&W[V].children.length>this._maxEntries;)this._split(W,V),V--;this._adjustParentBBoxes(rt,W,V)},g.prototype._split=function(I,V){var K=I[V],rt=K.children.length,W=this._minEntries;this._chooseSplitAxis(K,W,rt);var it=this._chooseSplitIndex(K,W,rt),C=Ot(K.children.splice(it,K.children.length-it));C.height=K.height,C.leaf=K.leaf,y(K,this.toBBox),y(C,this.toBBox),V?I[V-1].children.push(C):this._splitRoot(K,C)},g.prototype._splitRoot=function(I,V){this.data=Ot([I,V]),this.data.height=I.height+1,this.data.leaf=!1,y(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function(I,V,K){for(var rt,W,it,C,S,T,A,D=1/0,R=1/0,Z=V;Z<=K-V;Z++){var H=w(I,0,Z,this.toBBox),$=w(I,Z,K,this.toBBox),tt=(W=H,it=$,C=void 0,S=void 0,T=void 0,A=void 0,C=Math.max(W.minX,it.minX),S=Math.max(W.minY,it.minY),T=Math.min(W.maxX,it.maxX),A=Math.min(W.maxY,it.maxY),Math.max(0,T-C)*Math.max(0,A-S)),Q=et(H)+et($);tt<D?(D=tt,rt=Z,R=Q<R?Q:R):tt===D&&Q<R&&(R=Q,rt=Z)}return rt||K-V},g.prototype._chooseSplitAxis=function(I,V,K){var rt=I.leaf?this.compareMinX:N,W=I.leaf?this.compareMinY:O;this._allDistMargin(I,V,K,rt)<this._allDistMargin(I,V,K,W)&&I.children.sort(rt)},g.prototype._allDistMargin=function(I,V,K,rt){I.children.sort(rt);for(var W=this.toBBox,it=w(I,0,V,W),C=w(I,K-V,K,W),S=nt(it)+nt(C),T=V;T<K-V;T++){var A=I.children[T];M(it,I.leaf?W(A):A),S+=nt(it)}for(var D=K-V-1;D>=V;D--){var R=I.children[D];M(C,I.leaf?W(R):R),S+=nt(C)}return S},g.prototype._adjustParentBBoxes=function(I,V,K){for(var rt=K;rt>=0;rt--)M(V[rt],I)},g.prototype._condense=function(I){for(var V=I.length-1,K=void 0;V>=0;V--)I[V].children.length===0?V>0?(K=I[V-1].children).splice(K.indexOf(I[V]),1):this.clear():y(I[V],this.toBBox)},g})}),Ae=d(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(A,D,R){R===void 0&&(R={});var Z={type:"Feature"};return(R.id===0||R.id)&&(Z.id=R.id),R.bbox&&(Z.bbox=R.bbox),Z.properties=D||{},Z.geometry=A,Z}i.feature=r;function a(A,D,R){switch(A){case"Point":return u(D).geometry;case"LineString":return y(D).geometry;case"Polygon":return g(D).geometry;case"MultiPoint":return O(D).geometry;case"MultiLineString":return N(D).geometry;case"MultiPolygon":return et(D).geometry;default:throw new Error(A+" is invalid")}}i.geometry=a;function u(A,D,R){if(R===void 0&&(R={}),!A)throw new Error("coordinates is required");if(!Array.isArray(A))throw new Error("coordinates must be an Array");if(A.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!it(A[0])||!it(A[1]))throw new Error("coordinates must contain numbers");var Z={type:"Point",coordinates:A};return r(Z,D,R)}i.point=u;function c(A,D,R){return R===void 0&&(R={}),M(A.map(function(Z){return u(Z,D)}),R)}i.points=c;function g(A,D,R){R===void 0&&(R={});for(var Z=0,H=A;Z<H.length;Z++){var $=H[Z];if($.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var tt=0;tt<$[$.length-1].length;tt++)if($[$.length-1][tt]!==$[0][tt])throw new Error("First and last Position are not equivalent.")}var Q={type:"Polygon",coordinates:A};return r(Q,D,R)}i.polygon=g;function _(A,D,R){return R===void 0&&(R={}),M(A.map(function(Z){return g(Z,D)}),R)}i.polygons=_;function y(A,D,R){if(R===void 0&&(R={}),A.length<2)throw new Error("coordinates must be an array of two or more positions");var Z={type:"LineString",coordinates:A};return r(Z,D,R)}i.lineString=y;function w(A,D,R){return R===void 0&&(R={}),M(A.map(function(Z){return y(Z,D)}),R)}i.lineStrings=w;function M(A,D){D===void 0&&(D={});var R={type:"FeatureCollection"};return D.id&&(R.id=D.id),D.bbox&&(R.bbox=D.bbox),R.features=A,R}i.featureCollection=M;function N(A,D,R){R===void 0&&(R={});var Z={type:"MultiLineString",coordinates:A};return r(Z,D,R)}i.multiLineString=N;function O(A,D,R){R===void 0&&(R={});var Z={type:"MultiPoint",coordinates:A};return r(Z,D,R)}i.multiPoint=O;function et(A,D,R){R===void 0&&(R={});var Z={type:"MultiPolygon",coordinates:A};return r(Z,D,R)}i.multiPolygon=et;function nt(A,D,R){R===void 0&&(R={});var Z={type:"GeometryCollection",geometries:A};return r(Z,D,R)}i.geometryCollection=nt;function yt(A,D){if(D===void 0&&(D=0),D&&!(D>=0))throw new Error("precision must be a positive number");var R=Math.pow(10,D||0);return Math.round(A*R)/R}i.round=yt;function Bt(A,D){D===void 0&&(D="kilometers");var R=i.factors[D];if(!R)throw new Error(D+" units is invalid");return A*R}i.radiansToLength=Bt;function Ot(A,D){D===void 0&&(D="kilometers");var R=i.factors[D];if(!R)throw new Error(D+" units is invalid");return A/R}i.lengthToRadians=Ot;function de(A,D){return V(Ot(A,D))}i.lengthToDegrees=de;function I(A){var D=A%360;return D<0&&(D+=360),D}i.bearingToAzimuth=I;function V(A){var D=A%(2*Math.PI);return D*180/Math.PI}i.radiansToDegrees=V;function K(A){var D=A%360;return D*Math.PI/180}i.degreesToRadians=K;function rt(A,D,R){if(D===void 0&&(D="kilometers"),R===void 0&&(R="kilometers"),!(A>=0))throw new Error("length must be a positive number");return Bt(Ot(A,D),R)}i.convertLength=rt;function W(A,D,R){if(D===void 0&&(D="meters"),R===void 0&&(R="kilometers"),!(A>=0))throw new Error("area must be a positive number");var Z=i.areaFactors[D];if(!Z)throw new Error("invalid original units");var H=i.areaFactors[R];if(!H)throw new Error("invalid final units");return A/Z*H}i.convertArea=W;function it(A){return!isNaN(A)&&A!==null&&!Array.isArray(A)}i.isNumber=it;function C(A){return!!A&&A.constructor===Object}i.isObject=C;function S(A){if(!A)throw new Error("bbox is required");if(!Array.isArray(A))throw new Error("bbox must be an Array");if(A.length!==4&&A.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");A.forEach(function(D){if(!it(D))throw new Error("bbox must only contain numbers")})}i.validateBBox=S;function T(A){if(!A)throw new Error("id is required");if(["string","number"].indexOf(typeof A)===-1)throw new Error("id must be a number or a string")}i.validateId=T}),yr=d(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=Ae();function a(V,K,rt){if(V!==null)for(var W,it,C,S,T,A,D,R=0,Z=0,H,$=V.type,tt=$==="FeatureCollection",Q=$==="Feature",dt=tt?V.features.length:1,Rt=0;Rt<dt;Rt++){D=tt?V.features[Rt].geometry:Q?V.geometry:V,H=D?D.type==="GeometryCollection":!1,T=H?D.geometries.length:1;for(var It=0;It<T;It++){var Ht=0,we=0;if(S=H?D.geometries[It]:D,S!==null){A=S.coordinates;var Pe=S.type;switch(R=rt&&(Pe==="Polygon"||Pe==="MultiPolygon")?1:0,Pe){case null:break;case"Point":if(K(A,Z,Rt,Ht,we)===!1)return!1;Z++,Ht++;break;case"LineString":case"MultiPoint":for(W=0;W<A.length;W++){if(K(A[W],Z,Rt,Ht,we)===!1)return!1;Z++,Pe==="MultiPoint"&&Ht++}Pe==="LineString"&&Ht++;break;case"Polygon":case"MultiLineString":for(W=0;W<A.length;W++){for(it=0;it<A[W].length-R;it++){if(K(A[W][it],Z,Rt,Ht,we)===!1)return!1;Z++}Pe==="MultiLineString"&&Ht++,Pe==="Polygon"&&we++}Pe==="Polygon"&&Ht++;break;case"MultiPolygon":for(W=0;W<A.length;W++){for(we=0,it=0;it<A[W].length;it++){for(C=0;C<A[W][it].length-R;C++){if(K(A[W][it][C],Z,Rt,Ht,we)===!1)return!1;Z++}we++}Ht++}break;case"GeometryCollection":for(W=0;W<S.geometries.length;W++)if(a(S.geometries[W],K,rt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(V,K,rt,W){var it=rt;return a(V,function(C,S,T,A,D){S===0&&rt===void 0?it=C:it=K(it,C,S,T,A,D)},W),it}function c(V,K){var rt;switch(V.type){case"FeatureCollection":for(rt=0;rt<V.features.length&&K(V.features[rt].properties,rt)!==!1;rt++);break;case"Feature":K(V.properties,0);break}}function g(V,K,rt){var W=rt;return c(V,function(it,C){C===0&&rt===void 0?W=it:W=K(W,it,C)}),W}function _(V,K){if(V.type==="Feature")K(V,0);else if(V.type==="FeatureCollection")for(var rt=0;rt<V.features.length&&K(V.features[rt],rt)!==!1;rt++);}function y(V,K,rt){var W=rt;return _(V,function(it,C){C===0&&rt===void 0?W=it:W=K(W,it,C)}),W}function w(V){var K=[];return a(V,function(rt){K.push(rt)}),K}function M(V,K){var rt,W,it,C,S,T,A,D,R,Z,H=0,$=V.type==="FeatureCollection",tt=V.type==="Feature",Q=$?V.features.length:1;for(rt=0;rt<Q;rt++){for(T=$?V.features[rt].geometry:tt?V.geometry:V,D=$?V.features[rt].properties:tt?V.properties:{},R=$?V.features[rt].bbox:tt?V.bbox:void 0,Z=$?V.features[rt].id:tt?V.id:void 0,A=T?T.type==="GeometryCollection":!1,S=A?T.geometries.length:1,it=0;it<S;it++){if(C=A?T.geometries[it]:T,C===null){if(K(null,H,D,R,Z)===!1)return!1;continue}switch(C.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(K(C,H,D,R,Z)===!1)return!1;break}case"GeometryCollection":{for(W=0;W<C.geometries.length;W++)if(K(C.geometries[W],H,D,R,Z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}H++}}function N(V,K,rt){var W=rt;return M(V,function(it,C,S,T,A){C===0&&rt===void 0?W=it:W=K(W,it,C,S,T,A)}),W}function O(V,K){M(V,function(rt,W,it,C,S){var T=rt===null?null:rt.type;switch(T){case null:case"Point":case"LineString":case"Polygon":return K(r.feature(rt,it,{bbox:C,id:S}),W,0)===!1?!1:void 0}var A;switch(T){case"MultiPoint":A="Point";break;case"MultiLineString":A="LineString";break;case"MultiPolygon":A="Polygon";break}for(var D=0;D<rt.coordinates.length;D++){var R=rt.coordinates[D],Z={type:A,coordinates:R};if(K(r.feature(Z,it),W,D)===!1)return!1}})}function et(V,K,rt){var W=rt;return O(V,function(it,C,S){C===0&&S===0&&rt===void 0?W=it:W=K(W,it,C,S)}),W}function nt(V,K){O(V,function(rt,W,it){var C=0;if(rt.geometry){var S=rt.geometry.type;if(!(S==="Point"||S==="MultiPoint")){var T,A=0,D=0,R=0;if(a(rt,function(Z,H,$,tt,Q){if(T===void 0||W>A||tt>D||Q>R){T=Z,A=W,D=tt,R=Q,C=0;return}var dt=r.lineString([T,Z],rt.properties);if(K(dt,W,it,Q,C)===!1)return!1;C++,T=Z})===!1)return!1}}})}function yt(V,K,rt){var W=rt,it=!1;return nt(V,function(C,S,T,A,D){it===!1&&rt===void 0?W=C:W=K(W,C,S,T,A,D),it=!0}),W}function Bt(V,K){if(!V)throw new Error("geojson is required");O(V,function(rt,W,it){if(rt.geometry!==null){var C=rt.geometry.type,S=rt.geometry.coordinates;switch(C){case"LineString":if(K(rt,W,it,0,0)===!1)return!1;break;case"Polygon":for(var T=0;T<S.length;T++)if(K(r.lineString(S[T],rt.properties),W,it,T)===!1)return!1;break}}})}function Ot(V,K,rt){var W=rt;return Bt(V,function(it,C,S,T){C===0&&rt===void 0?W=it:W=K(W,it,C,S,T)}),W}function de(V,K){if(K=K||{},!r.isObject(K))throw new Error("options is invalid");var rt=K.featureIndex||0,W=K.multiFeatureIndex||0,it=K.geometryIndex||0,C=K.segmentIndex||0,S=K.properties,T;switch(V.type){case"FeatureCollection":rt<0&&(rt=V.features.length+rt),S=S||V.features[rt].properties,T=V.features[rt].geometry;break;case"Feature":S=S||V.properties,T=V.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=V;break;default:throw new Error("geojson is invalid")}if(T===null)return null;var A=T.coordinates;switch(T.type){case"Point":case"MultiPoint":return null;case"LineString":return C<0&&(C=A.length+C-1),r.lineString([A[C],A[C+1]],S,K);case"Polygon":return it<0&&(it=A.length+it),C<0&&(C=A[it].length+C-1),r.lineString([A[it][C],A[it][C+1]],S,K);case"MultiLineString":return W<0&&(W=A.length+W),C<0&&(C=A[W].length+C-1),r.lineString([A[W][C],A[W][C+1]],S,K);case"MultiPolygon":return W<0&&(W=A.length+W),it<0&&(it=A[W].length+it),C<0&&(C=A[W][it].length-C-1),r.lineString([A[W][it][C],A[W][it][C+1]],S,K)}throw new Error("geojson is invalid")}function I(V,K){if(K=K||{},!r.isObject(K))throw new Error("options is invalid");var rt=K.featureIndex||0,W=K.multiFeatureIndex||0,it=K.geometryIndex||0,C=K.coordIndex||0,S=K.properties,T;switch(V.type){case"FeatureCollection":rt<0&&(rt=V.features.length+rt),S=S||V.features[rt].properties,T=V.features[rt].geometry;break;case"Feature":S=S||V.properties,T=V.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=V;break;default:throw new Error("geojson is invalid")}if(T===null)return null;var A=T.coordinates;switch(T.type){case"Point":return r.point(A,S,K);case"MultiPoint":return W<0&&(W=A.length+W),r.point(A[W],S,K);case"LineString":return C<0&&(C=A.length+C),r.point(A[C],S,K);case"Polygon":return it<0&&(it=A.length+it),C<0&&(C=A[it].length+C),r.point(A[it][C],S,K);case"MultiLineString":return W<0&&(W=A.length+W),C<0&&(C=A[W].length+C),r.point(A[W][C],S,K);case"MultiPolygon":return W<0&&(W=A.length+W),it<0&&(it=A[W].length+it),C<0&&(C=A[W][it].length-C),r.point(A[W][it][C],S,K)}throw new Error("geojson is invalid")}i.coordAll=w,i.coordEach=a,i.coordReduce=u,i.featureEach=_,i.featureReduce=y,i.findPoint=I,i.findSegment=de,i.flattenEach=O,i.flattenReduce=et,i.geomEach=M,i.geomReduce=N,i.lineEach=Bt,i.lineReduce=Ot,i.propEach=c,i.propReduce=g,i.segmentEach=nt,i.segmentReduce=yt}),qn=d(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=yr();function a(u){var c=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(g){c[0]>g[0]&&(c[0]=g[0]),c[1]>g[1]&&(c[1]=g[1]),c[2]<g[0]&&(c[2]=g[0]),c[3]<g[1]&&(c[3]=g[1])}),c}a.default=a,i.default=a}),Mn=d((i,r)=>{var a=me(),u=Ae(),c=yr(),g=qn().default,_=c.featureEach;c.coordEach,u.polygon;var y=u.featureCollection;function w(M){var N=new a(M);return N.insert=function(O){if(O.type!=="Feature")throw new Error("invalid feature");return O.bbox=O.bbox?O.bbox:g(O),a.prototype.insert.call(this,O)},N.load=function(O){var et=[];return Array.isArray(O)?O.forEach(function(nt){if(nt.type!=="Feature")throw new Error("invalid features");nt.bbox=nt.bbox?nt.bbox:g(nt),et.push(nt)}):_(O,function(nt){if(nt.type!=="Feature")throw new Error("invalid features");nt.bbox=nt.bbox?nt.bbox:g(nt),et.push(nt)}),a.prototype.load.call(this,et)},N.remove=function(O,et){if(O.type!=="Feature")throw new Error("invalid feature");return O.bbox=O.bbox?O.bbox:g(O),a.prototype.remove.call(this,O,et)},N.clear=function(){return a.prototype.clear.call(this)},N.search=function(O){var et=a.prototype.search.call(this,this.toBBox(O));return y(et)},N.collides=function(O){return a.prototype.collides.call(this,this.toBBox(O))},N.all=function(){var O=a.prototype.all.call(this);return y(O)},N.toJSON=function(){return a.prototype.toJSON.call(this)},N.fromJSON=function(O){return a.prototype.fromJSON.call(this,O)},N.toBBox=function(O){var et;if(O.bbox)et=O.bbox;else if(Array.isArray(O)&&O.length===4)et=O;else if(Array.isArray(O)&&O.length===6)et=[O[0],O[1],O[3],O[4]];else if(O.type==="Feature")et=g(O);else if(O.type==="FeatureCollection")et=g(O);else throw new Error("invalid geojson");return{minX:et[0],minY:et[1],maxX:et[2],maxY:et[3]}},N}r.exports=w,r.exports.default=w});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],c=0;c<a;c++)if(i.call(u,r[c],c,r))return c;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],c=0;c<a;c++){var g=r[c];if(i.call(u,g,c,r))return g}},typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i}),function(i){i.forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),u=a.length>>>0;if(u===0)return!1;var c=r|0,g=Math.max(c>=0?c:u-Math.abs(c),0);function _(y,w){return y===w||typeof y=="number"&&typeof w=="number"&&isNaN(y)&&isNaN(w)}for(;g<u;){if(_(a[g],i))return!0;g++}return!1}});var Us={version:"2.18.3"},te=x($r()),Fe={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Gs={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Kr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Si={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Zl={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Wr={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Pn={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},ze={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Bn={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},vr={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},br={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},Vs={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Kn={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Hs={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Zs={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Jr={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},$s={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},qs={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Yr={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},oa={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Ks={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},$l={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Qt={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Zi={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Me={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},aa={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Ws={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Js=Kn,dn={en:Fe,de:Gs,it:Kr,id:Si,ro:Zl,ru:Wr,es:Pn,nl:ze,fr:Bn,pt:Js,pt_br:Vs,pt_pt:Kn,zh:vr,zh_tw:br,pl:Hs,sv:Zs,el:Jr,hu:$s,da:qs,no:Yr,fa:oa,ua:Ks,tr:$l,cz:Qt,ja:Zi,fi:Me,ko:aa,ky:Ws},Sn={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let r={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(a=>{this._isRelevantForEdit(a)&&a.pm.enable(r)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let r in i){let a=i[r];this._isRelevantForEdit(a)&&a.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},Ys=Sn,Lr={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(r=>{this._isRelevantForDrag(r)&&r.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(r=>{r.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let r in i){let a=i[r];this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},We=Lr,An={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let r=i.target;this._isRelevantForRemoval(r)&&!r.pm.dragging()&&(r.removeFrom(this.map.pm._getContainingLayer()),r.remove(),r instanceof L.LayerGroup?(this._fireRemoveLayerGroup(r),this._fireRemoveLayerGroup(this.map,r)):(r.pm._fireRemove(r),r.pm._fireRemove(this.map,r)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},la=An,ua={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&a.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},ql=ua,ha=x($r()),Xs={_fireDrawStart(i="Draw",r={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,r)},_fireDrawEnd(i="Draw",r={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,r)},_fireCreate(i,r="Draw",a={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},r,a)},_fireCenterPlaced(i="Draw",r={}){let a=i==="Draw"?this._layer:void 0,u=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:a,layer:u,latlng:this._layer.getLatLng()},i,r)},_fireCut(i,r,a,u="Draw",c={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:r,originalLayer:a},u,c)},_fireEdit(i=this._layer,r="Edit",a={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},r,a)},_fireEnable(i="Edit",r={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDisable(i="Edit",r={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,r)},_fireUpdate(i="Edit",r={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,r)},_fireMarkerDragStart(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDrag(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDragEnd(i,r=void 0,a=void 0,u="Edit",c={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r,intersectionReset:a},u,c)},_fireDragStart(i="Edit",r={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,r)},_fireDrag(i,r="Edit",a={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},r,a)},_fireDragEnd(i="Edit",r={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragEnable(i="Edit",r={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragDisable(i="Edit",r={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,r)},_fireRemove(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:this.getShape()},a,u)},_fireVertexAdded(i,r,a,u="Edit",c={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:r,latlng:a,shape:this.getShape()},u,c)},_fireVertexRemoved(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:r,shape:this.getShape()},a,u)},_fireVertexClick(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireIntersect(i,r=this._layer,a="Edit",u={}){this.__fire(r,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},a,u)},_fireLayerReset(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},r,a)},_fireTextChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},r,a)},_fireTextFocus(i="Edit",r={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,r)},_fireTextBlur(i="Edit",r={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,r)},_fireSnapDrag(i,r,a="Snapping",u={}){this.__fire(i,"pm:snapdrag",r,a,u)},_fireSnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:snap",r,a,u)},_fireUnsnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:unsnap",r,a,u)},_fireRotationEnable(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},a,u)},_fireRotationDisable(i,r="Rotation",a={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},r,a)},_fireRotationStart(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:r},a,u)},_fireRotation(i,r,a,u=this._rotationLayer,c="Rotation",g={}){this.__fire(i,"pm:rotate",{layer:u,helpLayer:this._layer,startAngle:this._startAngle,angle:u.pm.getAngle(),angleDiff:r,oldLatLngs:a,newLatLngs:u.getLatLngs()},c,g)},_fireRotationEnd(i,r,a,u="Rotation",c={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:r,angle:this._rotationLayer.pm.getAngle(),originLatLngs:a,newLatLngs:this._rotationLayer.getLatLngs()},u,c)},_fireActionClick(i,r,a,u="Toolbar",c={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:r,button:a},u,c)},_fireButtonClick(i,r,a="Toolbar",u={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:r},a,u)},_fireLangChange(i,r,a,u,c="Global",g={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:r,fallback:a,translations:u},c,g)},_fireGlobalDragModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalEditModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalRemovalModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalCutModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,r)},_fireGlobalDrawModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,r)},_fireGlobalRotateModeToggled(i="Global",r={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,r)},_fireRemoveLayerGroup(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:void 0},a,u)},_fireKeyeventEvent(i,r,a,u="Global",c={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:r,focusOn:a},u,c)},__fire(i,r,a,u,c={}){a=(0,ha.default)(a,c,{source:u}),L.PM.Utils._fireEvent(i,r,a)}},Xr=Xs,ca=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let r="document";this.map.getContainer().contains(i.target)&&(r="map");let a={event:i,eventType:i.type,focusOn:r};this._lastEvents[i.type]=a,this._lastEvents.current=a,this.map.pm._fireKeyeventEvent(i,i.type,r)},_onBlur(i){i.altKey=!1;let r={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=r,this._lastEvents.current=r},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.shiftKey},isAltKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.altKey},isCtrlKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.ctrlKey},isMetaKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.metaKey},getPressedKey(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.key}}),ue=ca,fa=x(fn());function Xt(i){let r=L.PM.activeLang;return(0,fa.default)(dn[r],i)||(0,fa.default)(dn.en,i)||i}function Tn(i){for(let r=0;r<i.length;r+=1){let a=i[r];if(Array.isArray(a)){if(Tn(a))return!0}else if(a!=null&&a!=="")return!0}return!1}function xr(i){return i.reduce((r,a)=>{if(a.length!==0){let u=Array.isArray(a)?xr(a):a;Array.isArray(u)?u.length!==0&&r.push(u):r.push(u)}return r},[])}function Kl(i,r,a){let u={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:c,b:g,f:_}=u,y=i.lng,w=i.lat,M=a,N=Math.PI,O=r*N/180,et=Math.sin(O),nt=Math.cos(O),yt=(1-_)*Math.tan(w*N/180),Bt=1/Math.sqrt(1+yt*yt),Ot=yt*Bt,de=Math.atan2(yt,nt),I=Bt*et,V=1-I*I,K=V*(c*c-g*g)/(g*g),rt=1+K/16384*(4096+K*(-768+K*(320-175*K))),W=K/1024*(256+K*(-128+K*(74-47*K))),it=M/(g*rt),C=2*Math.PI,S,T,A;for(;Math.abs(it-C)>1e-12;){S=Math.cos(2*de+it),T=Math.sin(it),A=Math.cos(it);let dt=W*T*(S+W/4*(A*(-1+2*S*S)-W/6*S*(-3+4*T*T)*(-3+4*S*S)));C=it,it=M/(g*rt)+dt}let D=Ot*T-Bt*A*nt,R=Math.atan2(Ot*A+Bt*T*nt,(1-_)*Math.sqrt(I*I+D*D)),Z=Math.atan2(T*et,Bt*A-Ot*T*nt),H=_/16*V*(4+_*(4-3*V)),$=Z-(1-H)*_*I*(it+H*T*(S+H*A*(-1+2*S*S))),tt=y+$*180/N,Q=R*180/N;return L.latLng(tt,Q)}function Qr(i,r,a,u,c=!0){let g,_,y,w=[];for(let M=0;M<a;M+=1){if(c)g=M*360/a+u,_=Kl(i,g,r),y=L.latLng(_.lng,_.lat);else{let N=i.lat+Math.cos(2*M*Math.PI/a)*r,O=i.lng+Math.sin(2*M*Math.PI/a)*r;y=L.latLng(N,O)}w.push(y)}return w}function Wl(i,r,a){r=(r+360)%360;let u=Math.PI/180,c=180/Math.PI,{R:g}=L.CRS.Earth,_=i.lng*u,y=i.lat*u,w=r*u,M=Math.sin(y),N=Math.cos(y),O=Math.cos(a/g),et=Math.sin(a/g),nt=Math.asin(M*O+N*et*Math.cos(w)),yt=_+Math.atan2(Math.sin(w)*et*N,O-M*Math.sin(nt));yt*=c;let Bt=yt-360,Ot=yt<-180?yt+360:yt;return yt=yt>180?Bt:Ot,L.latLng([nt*c,yt])}function ts(i,r,a){let u=i.latLngToContainerPoint(r),c=i.latLngToContainerPoint(a),g=Math.atan2(c.y-u.y,c.x-u.x)*180/Math.PI+90;return g+=g<0?360:0,g}function es(i,r,a,u){let c=ts(i,r,a);return Wl(r,c,u)}function Jl(i,r,a="asc"){if(!r||Object.keys(r).length===0)return(w,M)=>w-M;let u=Object.keys(r),c,g=u.length-1,_={};for(;g>=0;)c=u[g],_[c.toLowerCase()]=r[c],g-=1;function y(w){if(w instanceof L.Marker)return"Marker";if(w instanceof L.Circle)return"Circle";if(w instanceof L.CircleMarker)return"CircleMarker";if(w instanceof L.Rectangle)return"Rectangle";if(w instanceof L.Polygon)return"Polygon";if(w instanceof L.Polyline)return"Line"}return(w,M)=>{let N,O;if(N=y(w.layer).toLowerCase(),O=y(M.layer).toLowerCase(),!N||!O)return 0;let et=N in _?_[N]:Number.MAX_SAFE_INTEGER,nt=O in _?_[O]:Number.MAX_SAFE_INTEGER,yt=0;return et<nt?yt=-1:et>nt&&(yt=1),a==="desc"?yt*-1:yt}}function $i(i,r=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(r).getLatLngs():L.polyline(r).getLatLngs()}function da(i,r){var a,u,c,g;if((u=(a=r.options.crs)==null?void 0:a.projection)!=null&&u.MAX_LATITUDE){let _=(g=(c=r.options.crs)==null?void 0:c.projection)==null?void 0:g.MAX_LATITUDE;i.lat=Math.max(Math.min(_,i.lat),-_)}return i}function ni(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var Yl=L.Class.extend({includes:[Ys,We,la,ql,Xr],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=ue(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",r,a="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let c=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(c){let g=[`${c[1]}_${c[2]}`,`${c[1]}`];for(let _ of g)if(dn[_]){i=_;break}}}let u=L.PM.activeLang;r&&(dn[i]=(0,te.default)(dn[a],r)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(u,i,a,dn[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",r){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,r)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,r={}){let a=r.ignoreShapes||[],u=r.merge||!1;this.map.pm.Draw.shapes.forEach(c=>{a.indexOf(c)===-1&&this.map.pm.Draw[c].setPathOptions(i,u)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let r=(0,te.default)(this.globalOptions,i);r.editable&&(r.resizeableCircleMarker=r.editable,delete r.editable);let a=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!r.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),a=!0);let u=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!r.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),u=!0),this.map.pm.Draw.shapes.forEach(c=>{this.map.pm.Draw[c].setOptions(r)}),a&&this.map.pm.Draw.CircleMarker.enable(),u&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(c=>{c.pm.setOptions(r)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=r,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let r=L.PM.Utils.findLayers(this.map);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},getGeomanDrawLayers(i=!1){let r=L.PM.Utils.findLayers(this.map).filter(u=>u._drawnByGeoman===!0);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){ni(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let r="";i.type==="touchstart"||i.type==="pointerdown"?r="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(r="mouseup"),r&&ni(this.map)._onClick(this._createMouseEvent(r,i))},_createMouseEvent(i,r){let a,u=r.touches[0]||r.changedTouches[0];try{a=new MouseEvent(i,{bubbles:r.bubbles,cancelable:r.cancelable,view:r.view,detail:u.detail,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,button:r.button,relatedTarget:r.relatedTarget})}catch{a=document.createEvent("MouseEvents"),a.initMouseEvent(i,r.bubbles,r.cancelable,r.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}return a}}),pa=Yl,pn=L.Control.extend({includes:[Xr],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let r=this.options.position.indexOf("right")>-1?"pos-right":"",a=L.DomUtil.create("div",`button-container  ${r}`,this._container);i.title&&a.setAttribute("title",i.title);let u=L.DomUtil.create("a","leaflet-buttons-control-button",a);u.setAttribute("role","button"),u.setAttribute("tabindex","0"),u.href="#";let c=L.DomUtil.create("div",`leaflet-pm-actions-container ${r}`,a),g=i.actions,_={cancel:{text:Xt("actions.cancel"),title:Xt("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:Xt("actions.finish"),title:Xt("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:Xt("actions.removeLastVertex"),title:Xt("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:Xt("actions.finish"),title:Xt("actions.finish"),onClick(w){this._map.pm.Draw[i.jsClass]._finishShape(w)}}};i._preparedActions=g.map(w=>{let M=typeof w=="string"?w:w.name,N;if(_[M])N=_[M];else if(w.text)N=w;else return N;let O=L.DomUtil.create("a",`leaflet-pm-action ${r} action-${M}`,c);if(O.setAttribute("role","button"),O.setAttribute("tabindex","0"),O.href="#",N.title&&(O.title=N.title),O.innerHTML=N.text,L.DomEvent.disableClickPropagation(O),L.DomEvent.on(O,"click",L.DomEvent.stop),N._node=O,!i.disabled&&N.onClick){let et=nt=>{nt.preventDefault();let yt="",{buttons:Bt}=this._map.pm.Toolbar;for(let Ot in Bt)if(Bt[Ot]._button===i){yt=Ot;break}this._fireActionClick(N,yt,i)};L.DomEvent.addListener(O,"click",et,this),L.DomEvent.addListener(O,"click",N.onClick,this),L.DomEvent.addListener(O,"click",()=>this._updateActiveAction(i))}return N}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(a,"active");let y=L.DomUtil.create("div","control-icon",u);return i.iconUrl&&y.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(y,i.className),L.DomEvent.disableClickPropagation(u),L.DomEvent.on(u,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(u,"click",this._onBtnClick,this),L.DomEvent.addListener(u,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(u,"pm-disabled"),u.setAttribute("aria-disabled","true")),a},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:r}=this._map.pm.Toolbar;for(let a in r)if(r[a]._button===this._button){i=a;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",r=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(r,i),r.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(r,i),r.setAttribute("aria-disabled","false"))},_updateActiveAction(i){var r;(r=i._preparedActions)==null||r.forEach(a=>{a!=null&&a._node&&(a.isActive&&a.isActive.call(this)?L.DomUtil.addClass(a._node,"active-action"):L.DomUtil.removeClass(a._node,"active-action"))})}}),ma=pn;L.Control.PMButton=ma;var ga=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let r=`${i}Container`;return this[r]||(this[r]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[r]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),r={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let a in i){let u=i[a];L.Util.setOptions(u,{className:r.geomanIcons[a]})}},removeControls(){let i=this.getButtons();for(let r in i)i[r].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,r){return this.buttons[i]=r,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let r in this.buttons){let a=this.buttons[r];a._button.disableByOtherButtons&&a!==i&&a.toggled()&&a._triggerClick()}},toggleButton(i,r,a=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let u=i;return a&&this.triggerClickOnToggledButtons(this.buttons[u]),this.buttons[u]?this.buttons[u].toggle(r):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:Xt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(et,nt)=>{this.map.pm.Draw[nt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:Xt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(et,nt)=>{this.map.pm.Draw[nt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},a={className:"control-icon leaflet-pm-icon-polyline",title:Xt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(et,nt)=>{this.map.pm.Draw[nt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={title:Xt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(et,nt)=>{this.map.pm.Draw[nt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},c={title:Xt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(et,nt)=>{this.map.pm.Draw[nt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:Xt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(et,nt)=>{this.map.pm.Draw[nt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:Xt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},y={title:Xt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},w={title:Xt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(et,nt)=>{this.map.pm.Draw[nt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},M={title:Xt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},N={title:Xt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},O={className:"control-icon leaflet-pm-icon-text",title:Xt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(et,nt)=>{this.map.pm.Draw[nt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(a)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(u)),this._addButton("drawCircleMarker",new L.Control.PMButton(c)),this._addButton("drawText",new L.Control.PMButton(O)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(y)),this._addButton("cutPolygon",new L.Control.PMButton(w)),this._addButton("removalMode",new L.Control.PMButton(M)),this._addButton("rotateMode",new L.Control.PMButton(N))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),r=[];this.options.drawControls===!1&&(r=r.concat(Object.keys(i).filter(a=>!i[a]._button.tool))),this.options.editControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="edit"))),this.options.optionsControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="options"))),this.options.customControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="custom")));for(let a in i)if(this.options[a]&&r.indexOf(a)===-1){let u=i[a]._button.tool;u||(u="draw"),i[a].setPosition(this._getBtnPosition(u)),i[a].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,r){this.options.positions[i]=r,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,r){if(r)typeof r!="object"&&(r={name:r});else throw new TypeError("Button has no name");let a=this._btnNameMapping(i);if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");let u=this.map.pm.Draw.createNewDrawInstance(r.name,a);r={...this.buttons[a]._button,...r};let c=this.createCustomControl(r);return{drawInstance:u,control:c}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let r={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let a=this._addButton(i.name,new L.Control.PMButton(r));return this.changeControlOrder(),a},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let r={};if(i)for(let a in this.getButtons()){let u=this.getButtons()[a];(u._button.tool===i||i==="draw"&&!u._button.tool)&&(r[a]=u)}return r},changeControlOrder(i=[]){let r=this._shapeMapping(),a=[];i.forEach(g=>{r[g]?a.push(r[g]):a.push(g)});let u=this.getButtons(),c={};a.forEach(g=>{u[g]&&(c[g]=u[g])}),Object.keys(u).filter(g=>!u[g]._button.tool||u[g]._button.tool==="draw").forEach(g=>{a.indexOf(g)===-1&&(c[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="edit").forEach(g=>{a.indexOf(g)===-1&&(c[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="options").forEach(g=>{a.indexOf(g)===-1&&(c[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="custom").forEach(g=>{a.indexOf(g)===-1&&(c[g]=u[g])}),Object.keys(u).forEach(g=>{a.indexOf(g)===-1&&(c[g]=u[g])}),this.map.pm.Toolbar.buttons=c,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),r=[];for(let a in i)r.push(a);return r},changeActionsOfControl(i,r){let a=this._btnNameMapping(i);if(!a)throw new TypeError("No name passed");if(!r)throw new TypeError("No actions passed");if(!this.buttons[a])throw new TypeError("Button with this name not exists");this.buttons[a]._button.actions=r,this.changeControlOrder()},setButtonDisabled(i,r){let a=this._btnNameMapping(i);r?this.buttons[a].disable():this.buttons[a].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let r=this._shapeMapping();return r[i]?r[i]:i}}),Qs=ga,Xl=x($r()),_a={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(r=>{if(Array.isArray(r)){this._assignEvents(r);return}r.off("drag",this._handleSnapping,this),r.on("drag",this._handleSnapping,this),r.off("dragend",this._cleanupSnapping,this),r.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let r=i.target;r._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(r=>{r.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){var y,w,M;let r=i.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((y=i==null?void 0:i.originalEvent)==null?void 0:y.altKey)||((M=(w=this._map)==null?void 0:w.pm)==null?void 0:M.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let a=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(a).length===0)return!1;let u=a.layer instanceof L.Marker||a.layer instanceof L.CircleMarker||!this.options.snapSegment,c;u?c=a.latlng:c=this._checkPrioritiySnapping(a);let g=this.options.snapDistance,_={marker:r,shape:this._shape,snapLatLng:c,segment:a.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:a.layer,distance:a.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),a.distance<g){r._orgLatLng=r.getLatLng(),r.setLatLng(c),r._snapped=!0,r._snapInfo=_;let N=()=>{this._snapLatLng=c,this._fireSnap(r,_),this._fireSnap(this._layer,_)},O=this._snapLatLng||{},et=c||{};(O.lat!==et.lat||O.lng!==et.lng)&&N()}else this._snapLatLng&&(this._unsnap(_),r._snapped=!1,r._snapInfo=void 0,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList(){let i=[],r=[],a=this._map;a.off("layerremove",this._handleSnapLayerRemoval,this),a.on("layerremove",this._handleSnapLayerRemoval,this),a.eachLayer(u=>{if((u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&u.options.snapIgnore!==!0){if(u.options.snapIgnore===void 0&&(!L.PM.optIn&&u.options.pmIgnore===!0||L.PM.optIn&&u.options.pmIgnore!==!1))return;(u instanceof L.Circle||u instanceof L.CircleMarker)&&u.pm&&u.pm._hiddenPolyCircle?i.push(u.pm._hiddenPolyCircle):u instanceof L.ImageOverlay&&(u=L.rectangle(u.getBounds())),i.push(u);let c=L.polyline([],{color:"red",pmIgnore:!0});c._pmTempLayer=!0,r.push(c),(u instanceof L.Circle||u instanceof L.CircleMarker)&&r.push(c)}}),i=i.filter(u=>this._layer!==u),i=i.filter(u=>u._latlng||u._latlngs&&Tn(u._latlngs)),i=i.filter(u=>!u._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let u=L.polyline([],{color:"red",pmIgnore:!0});u._pmTempLayer=!0,r.push(u)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=r},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let r=this._snapList.findIndex(a=>a._leaflet_id===i._leaflet_id);r>-1&&this._snapList.splice(r,1)},_calcClosestLayer(i,r){return this._calcClosestLayers(i,r,1)[0]},_calcClosestLayers(i,r,a=1){let u=[],c={};r.forEach((_,y)=>{var M;if(_._parentCopy&&_._parentCopy===this._layer||((M=_.getLatLngs)==null?void 0:M.call(_).flat(5).length)<2)return;let w=this._calcLayerDistances(i,_);if(w.distance=Math.floor(w.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[y]){let N=L.polyline([],{color:"red",pmIgnore:!0});N._pmTempLayer=!0,this.debugIndicatorLines[y]=N}this.debugIndicatorLines[y].setLatLngs([i,w.latlng])}a===1&&(c.distance===void 0||w.distance-5<=c.distance)?(w.distance+5<c.distance&&(u=[]),c=w,c.layer=_,u.push(c)):a!==1&&(c={},c=w,c.layer=_,u.push(c))}),a!==1&&(u=u.sort((_,y)=>_.distance-y.distance)),a===-1&&(a=u.length);let g=this._getClosestLayerByPriority(u,a);return L.Util.isArray(g)?g:[g]},_calcLayerDistances(i,r){let a=this._map,u=r instanceof L.Marker||r instanceof L.CircleMarker,c=r instanceof L.Polygon,g=i;if(u){let _=r.getLatLng();return{latlng:{..._},distance:this._getDistance(a,_,g)}}return this._calcLatLngDistances(g,r.getLatLngs(),a,c)},_calcLatLngDistances(i,r,a,u=!1){let c,g,_,y=w=>{w.forEach((M,N)=>{if(Array.isArray(M)){y(M);return}if(this.options.snapSegment){let O=M,et;u?et=N+1===w.length?0:N+1:et=N+1===w.length?void 0:N+1;let nt=w[et];if(nt){let yt=this._getDistanceToSegment(a,i,O,nt);(g===void 0||yt<g)&&(g=yt,_=[O,nt])}}else{let O=this._getDistance(a,i,M);(g===void 0||O<g)&&(g=O,c=M)}})};return y(r),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(a,i,_[0],_[1])},segment:_,distance:g}:{latlng:c,distance:g}},_getClosestLayerByPriority(i,r=1){i=i.sort((_,y)=>_._leaflet_id-y._leaflet_id);let a=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],u=this._map.pm.globalOptions.snappingOrder||[],c=0,g={};return u.concat(a).forEach(_=>{g[_]||(c+=1,g[_]=c)}),i.sort(Jl("instanceofShape",g)),r===1?i[0]||{}:i.slice(0,r)},_checkPrioritiySnapping(i){let r=this._map,a=i.segment[0],u=i.segment[1],c=i.latlng,g=c;if(this.options.snapVertex){let _=this._getDistance(r,a,c),y=this._getDistance(r,u,c),w=_<y?a:u,M=_<y?_:y;if(this.options.snapMiddle){let O=L.PM.Utils.calcMiddleLatLng(r,a,u),et=this._getDistance(r,O,c);et<_&&et<y&&(w=O,M=et)}let N=this.options.snapDistance;M<N&&(g=w)}return{...g}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,r,a,u){let c=i.getMaxZoom();c===1/0&&(c=i.getZoom());let g=i.project(r,c),_=i.project(a,c),y=i.project(u,c),w=L.LineUtil.closestPointOnSegment(g,_,y);return i.unproject(w,c)},_getDistanceToSegment(i,r,a,u){let c=i.latLngToContainerPoint(r),g=i.latLngToContainerPoint(a),_=i.latLngToContainerPoint(u);return L.LineUtil.pointToSegmentDistance(c,g,_)},_getDistance(i,r,a){return i.latLngToContainerPoint(r).distanceTo(i.latLngToContainerPoint(a))}},to=_a,Ql=L.Class.extend({includes:[to,Xr],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(a=>{this[a]=new L.PM.Draw[a](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,r=!1){r?this.options.pathOptions=(0,Xl.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,r){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(r)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(r=>{this[r]._enabled&&(i=r)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(r=>{(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&(r._pmTempLayer||i.push(r))}),this._enabled?i.forEach(r=>{L.PM.Utils.disablePopup(r)}):i.forEach(r=>{L.PM.Utils.enablePopup(r)})},createNewDrawInstance(i,r){let a=this._getShapeFromBtnName(r);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[a])throw new TypeError(`There is no class L.PM.Draw.${a}`);return this[i]=new L.PM.Draw[a](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[r]&&this[i].setOptions(this[r].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let r={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return r[i]?r[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),Je=Ql;Je.Marker=Je.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Xt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new L.Marker(r,this.options.markerStyle);this._setPane(a,"markerPane"),this._finishLayer(a),a.pm||(a.options.draggable=!1),a.addTo(this._map.pm._getContainingLayer()),a.pm&&this.options.markerEditable?a.pm.enable():a.dragging&&a.dragging.disable(),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var i,r;(i=this.options.markerStyle)!=null&&i.icon&&((r=this._hintMarker)==null||r.setIcon(this.options.markerStyle.icon))}});var ti=63710088e-1,ya={centimeters:ti*100,centimetres:ti*100,degrees:ti/111325,feet:ti*3.28084,inches:ti*39.37,kilometers:ti/1e3,kilometres:ti/1e3,meters:ti,metres:ti,miles:ti/1609.344,millimeters:ti*1e3,millimetres:ti*1e3,nauticalmiles:ti/1852,radians:1,yards:ti*1.0936};function Dn(i,r,a){a===void 0&&(a={});var u={type:"Feature"};return(a.id===0||a.id)&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.properties=r||{},u.geometry=i,u}function Rn(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!eo(i[0])||!eo(i[1]))throw new Error("coordinates must contain numbers");var u={type:"Point",coordinates:i};return Dn(u,r,a)}function mn(i,r,a){if(a===void 0&&(a={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var u={type:"LineString",coordinates:i};return Dn(u,r,a)}function li(i,r){r===void 0&&(r={});var a={type:"FeatureCollection"};return r.id&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.features=i,a}function tu(i,r){r===void 0&&(r="kilometers");var a=ya[r];if(!a)throw new Error(r+" units is invalid");return i*a}function wr(i,r){r===void 0&&(r="kilometers");var a=ya[r];if(!a)throw new Error(r+" units is invalid");return i/a}function ui(i){var r=i%(2*Math.PI);return r*180/Math.PI}function Ai(i){var r=i%360;return r*Math.PI/180}function eo(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function is(i){var r,a,u={type:"FeatureCollection",features:[]};if(i.type==="Feature"?a=i.geometry:a=i,a.type==="LineString")r=[a.coordinates];else if(a.type==="MultiLineString")r=a.coordinates;else if(a.type==="MultiPolygon")r=[].concat.apply([],a.coordinates);else if(a.type==="Polygon")r=a.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return r.forEach(function(c){r.forEach(function(g){for(var _=0;_<c.length-1;_++)for(var y=_;y<g.length-1;y++)if(!(c===g&&(Math.abs(_-y)===1||_===0&&y===c.length-2&&c[_][0]===c[c.length-1][0]&&c[_][1]===c[c.length-1][1]))){var w=io(c[_][0],c[_][1],c[_+1][0],c[_+1][1],g[y][0],g[y][1],g[y+1][0],g[y+1][1]);w&&u.features.push(Rn([w[0],w[1]]))}})}),u}function io(i,r,a,u,c,g,_,y){var w,M,N,O,et,nt={x:null,y:null,onLine1:!1,onLine2:!1};return w=(y-g)*(a-i)-(_-c)*(u-r),w===0?nt.x!==null&&nt.y!==null?nt:!1:(M=r-g,N=i-c,O=(_-c)*M-(y-g)*N,et=(a-i)*M-(u-r)*N,M=O/w,N=et/w,nt.x=i+M*(a-i),nt.y=r+M*(u-r),M>=0&&M<=1&&(nt.onLine1=!0),N>=0&&N<=1&&(nt.onLine2=!0),nt.onLine1&&nt.onLine2?[nt.x,nt.y]:!1)}Je.Line=Je.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Xt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let r=i[i.length-1];this._hintline.setLatLngs([r,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection(){return is(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,r){let a=L.polyline(this._layer.getLatLngs());i&&(r||(r=this._hintMarker.getLatLng()),a.addLatLng(r));let u=is(a.toGeoJSON(15));this._doesSelfIntersect=u.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(u,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._layer.getLatLngs(),u=a[a.length-1];if(r.equals(a[0])||a.length>0&&r.equals(u)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:r,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(r);let c=this._createMarker(r);this._setTooltipText(),this._setHintLineAfterNewVertex(r),this._fireVertexAdded(c,void 0,r,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let r=this._layer.getLatLngs(),a=i[i.length-1],{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(i,a);i.pop(),this._layerGroup.removeLayer(a);let c=i[i.length-1],g=r.indexOf(c.getLatLng());r=r.slice(0,g+1),this._layer.setLatLngs(r),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(a,u,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let r=L.polyline(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.options.snappable&&this._cleanupSnapping();let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),r.on("click",this._finishShape,this),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=1?r=Xt("tooltips.continueLine"):r=Xt("tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change(i){this._fireChange(i,"Draw")},setStyle(){var i,r;(i=this._layer)==null||i.setStyle(this.options.templineStyle),(r=this._hintline)==null||r.setStyle(this.options.hintlineStyle)}}),Je.Polygon=Je.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),this._layer.getLatLngs().flat().length===1?(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()):r.on("click",()=>1),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=2?r=Xt("tooltips.continueLine"):r=Xt("tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))}}),Je.Rectangle=Je.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Xt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let r=0;r<2;r+=1){let a=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._styleMarkers.push(a)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(r),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(a=>{L.DomUtil.addClass(a._icon,"visible"),a.setLatLng(r)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Xt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}let r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize(){let i=da(this._startMarker.getLatLng(),this._map),r=da(this._hintMarker.getLatLng(),this._map),a=L.PM.Utils._getRotatedRectangle(i,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(a),this.options.cursorMarker&&this._styleMarkers){let u=[];a.forEach(c=>{!c.equals(i,1e-8)&&!c.equals(r,1e-8)&&u.push(c)}),u.forEach((c,g)=>{try{this._styleMarkers[g].setLatLng(c)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||a.equals(r))return;let u=L.rectangle([a,r],this.options.pathOptions);if(this.options.rectangleAngle){let g=L.PM.Utils._getRotatedRectangle(a,r,this.options.rectangleAngle||0,this._map);u.setLatLngs(g),u.pm&&u.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u);let c=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(c))},setStyle(){var i;(i=this._layer)==null||i.setStyle(this.options.pathOptions)}}),Je.CircleMarker=Je.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let r={};L.extend(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Xt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Xt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let r=this._hintMarker.getLatLng();this._centerMarker.setLatLng(r),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Xt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,r])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this._handleHintMarkerSnapping();let r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new this._BaseCircleClass(r,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(a),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._centerMarker.getLatLng(),a=this._defaultRadius;if(this.options[this._editableOption]){let _=this._hintMarker.getLatLng();a=this._distanceCalculation(r,_),this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?a=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(a=this.options[this._maxRadiusOption])}let u={...this.options.pathOptions,radius:a},c=new this._BaseCircleClass(r,u);this._setPane(c,"layerPane"),this._finishLayer(c),c.addTo(this._map.pm._getContainingLayer()),c.pm&&c.pm._updateHiddenPolyCircle(),this._fireCreate(c);let g=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(g))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let r=this._centerMarker.getLatLng(),a=this._distanceCalculation(r,i);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?i=es(this._map,r,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(i=es(this._map,r,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var r,a;let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),(r=this._layer)==null||r.setStyle(i),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))}}),Je.Circle=Je.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,r){return this._map.distance(i,r)}});function Ti(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qi(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ns(i){return i.type==="Feature"?i.geometry:i}function no(i,r){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function ro(i,r,a){if(i!==null)for(var u,c,g,_,y,w,M,N=0,O=0,et,nt=i.type,yt=nt==="FeatureCollection",Bt=nt==="Feature",Ot=yt?i.features.length:1,de=0;de<Ot;de++){M=yt?i.features[de].geometry:Bt?i.geometry:i,et=M?M.type==="GeometryCollection":!1,y=et?M.geometries.length:1;for(var I=0;I<y;I++){var V=0,K=0;if(_=et?M.geometries[I]:M,_!==null){w=_.coordinates;var rt=_.type;switch(N=0,rt){case null:break;case"Point":if(r(w,O,de,V,K)===!1)return!1;O++,V++;break;case"LineString":case"MultiPoint":for(u=0;u<w.length;u++){if(r(w[u],O,de,V,K)===!1)return!1;O++,rt==="MultiPoint"&&V++}rt==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(u=0;u<w.length;u++){for(c=0;c<w[u].length-N;c++){if(r(w[u][c],O,de,V,K)===!1)return!1;O++}rt==="MultiLineString"&&V++,rt==="Polygon"&&K++}rt==="Polygon"&&V++;break;case"MultiPolygon":for(u=0;u<w.length;u++){for(K=0,c=0;c<w[u].length;c++){for(g=0;g<w[u][c].length-N;g++){if(r(w[u][c][g],O,de,V,K)===!1)return!1;O++}K++}V++}break;case"GeometryCollection":for(u=0;u<_.geometries.length;u++)if(ro(_.geometries[u],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ri(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&r(i.features[a],a)!==!1;a++);}function Wn(i,r,a){var u=a;return ri(i,function(c,g){g===0&&a===void 0?u=c:u=r(u,c,g)}),u}function eu(i,r){var a,u,c,g,_,y,w,M,N,O,et=0,nt=i.type==="FeatureCollection",yt=i.type==="Feature",Bt=nt?i.features.length:1;for(a=0;a<Bt;a++){for(y=nt?i.features[a].geometry:yt?i.geometry:i,M=nt?i.features[a].properties:yt?i.properties:{},N=nt?i.features[a].bbox:yt?i.bbox:void 0,O=nt?i.features[a].id:yt?i.id:void 0,w=y?y.type==="GeometryCollection":!1,_=w?y.geometries.length:1,c=0;c<_;c++){if(g=w?y.geometries[c]:y,g===null){if(r(null,et,M,N,O)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(g,et,M,N,O)===!1)return!1;break}case"GeometryCollection":{for(u=0;u<g.geometries.length;u++)if(r(g.geometries[u],et,M,N,O)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}et++}}function Ii(i,r){eu(i,function(a,u,c,g,_){var y=a===null?null:a.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return r(Dn(a,c,{bbox:g,id:_}),u,0)===!1?!1:void 0}var w;switch(y){case"MultiPoint":w="Point";break;case"MultiLineString":w="LineString";break;case"MultiPolygon":w="Polygon";break}for(var M=0;M<a.coordinates.length;M++){var N=a.coordinates[M],O={type:w,coordinates:N};if(r(Dn(O,c),u,M)===!1)return!1}})}function iu(i){if(!i)throw new Error("geojson is required");var r=[];return Ii(i,function(a){Jn(a,r)}),li(r)}function Jn(i,r){var a=[],u=i.geometry;if(u!==null){switch(u.type){case"Polygon":a=qi(u);break;case"LineString":a=[qi(u)]}a.forEach(function(c){var g=nu(c,i.properties);g.forEach(function(_){_.id=r.length,r.push(_)})})}}function nu(i,r){var a=[];return i.reduce(function(u,c){var g=mn([u,c],r);return g.bbox=Cr(u,c),a.push(g),c}),a}function Cr(i,r){var a=i[0],u=i[1],c=r[0],g=r[1],_=a<c?a:c,y=u<g?u:g,w=a>c?a:c,M=u>g?u:g;return[_,y,w,M]}var rs=iu,ss=x(Mn(),1);function ru(i,r){var a={},u=[];if(i.type==="LineString"&&(i=Dn(i)),r.type==="LineString"&&(r=Dn(r)),i.type==="Feature"&&r.type==="Feature"&&i.geometry!==null&&r.geometry!==null&&i.geometry.type==="LineString"&&r.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var c=nn(i,r);return c&&u.push(c),li(u)}var g=(0,ss.default)();return g.load(rs(r)),ri(rs(i),function(_){ri(g.search(_),function(y){var w=nn(_,y);if(w){var M=qi(w).join(",");a[M]||(a[M]=!0,u.push(w))}})}),li(u)}function nn(i,r){var a=qi(i),u=qi(r);if(a.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(u.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var c=a[0][0],g=a[0][1],_=a[1][0],y=a[1][1],w=u[0][0],M=u[0][1],N=u[1][0],O=u[1][1],et=(O-M)*(_-c)-(N-w)*(y-g),nt=(N-w)*(g-M)-(O-M)*(c-w),yt=(_-c)*(g-M)-(y-g)*(c-w);if(et===0)return null;var Bt=nt/et,Ot=yt/et;if(Bt>=0&&Bt<=1&&Ot>=0&&Ot<=1){var de=c+Bt*(_-c),I=g+Bt*(y-g);return Rn([de,I])}return null}var Ki=ru,va=x(Mn(),1);function so(i,r,a){a===void 0&&(a={});var u=Ti(i),c=Ti(r),g=Ai(c[1]-u[1]),_=Ai(c[0]-u[0]),y=Ai(u[1]),w=Ai(c[1]),M=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(y)*Math.cos(w);return tu(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)),a.units)}var On=so;function rn(i){var r=i[0],a=i[1],u=i[2],c=i[3],g=On(i.slice(0,2),[u,a]),_=On(i.slice(0,2),[r,c]);if(g>=_){var y=(a+c)/2;return[r,y-(u-r)/2,u,y+(u-r)/2]}else{var w=(r+u)/2;return[w-(c-a)/2,a,w+(c-a)/2,c]}}var su=rn;function gn(i){var r=[1/0,1/0,-1/0,-1/0];return ro(i,function(a){r[0]>a[0]&&(r[0]=a[0]),r[1]>a[1]&&(r[1]=a[1]),r[2]<a[0]&&(r[2]=a[0]),r[3]<a[1]&&(r[3]=a[1])}),r}gn.default=gn;var Er=gn;function sn(i,r){r===void 0&&(r={});var a=r.precision,u=r.coordinates,c=r.mutate;if(a=a==null||isNaN(a)?6:a,u=u==null||isNaN(u)?3:u,!i)throw new Error("<geojson> is required");if(typeof a!="number")throw new Error("<precision> must be a number");if(typeof u!="number")throw new Error("<coordinates> must be a number");(c===!1||c===void 0)&&(i=JSON.parse(JSON.stringify(i)));var g=Math.pow(10,a);return ro(i,function(_){os(_,g,u)}),i}function os(i,r,a){i.length>a&&i.splice(a,i.length);for(var u=0;u<i.length;u++)i[u]=Math.round(i[u]*r)/r;return i}var ba=sn;function as(i,r,a){if(a===void 0&&(a={}),a.final===!0)return ls(i,r);var u=Ti(i),c=Ti(r),g=Ai(u[0]),_=Ai(c[0]),y=Ai(u[1]),w=Ai(c[1]),M=Math.sin(_-g)*Math.cos(w),N=Math.cos(y)*Math.sin(w)-Math.sin(y)*Math.cos(w)*Math.cos(_-g);return ui(Math.atan2(M,N))}function ls(i,r){var a=as(r,i);return a=(a+180)%360,a}function us(i,r,a,u){u===void 0&&(u={});var c=Ti(i),g=Ai(c[0]),_=Ai(c[1]),y=Ai(a),w=wr(r,u.units),M=Math.asin(Math.sin(_)*Math.cos(w)+Math.cos(_)*Math.sin(w)*Math.cos(y)),N=g+Math.atan2(Math.sin(y)*Math.sin(w)*Math.cos(_),Math.cos(w)-Math.sin(_)*Math.sin(M)),O=ui(N),et=ui(M);return Rn([O,et],u.properties)}function hs(i,r,a){a===void 0&&(a={});var u=Rn([1/0,1/0],{dist:1/0}),c=0;return Ii(i,function(g){for(var _=qi(g),y=0;y<_.length-1;y++){var w=Rn(_[y]);w.properties.dist=On(r,w,a);var M=Rn(_[y+1]);M.properties.dist=On(r,M,a);var N=On(w,M,a),O=Math.max(w.properties.dist,M.properties.dist),et=as(w,M),nt=us(r,O,et+90,a),yt=us(r,O,et-90,a),Bt=Ki(mn([nt.geometry.coordinates,yt.geometry.coordinates]),mn([w.geometry.coordinates,M.geometry.coordinates])),Ot=null;Bt.features.length>0&&(Ot=Bt.features[0],Ot.properties.dist=On(r,Ot,a),Ot.properties.location=c+On(w,Ot,a)),w.properties.dist<u.properties.dist&&(u=w,u.properties.index=y,u.properties.location=c),M.properties.dist<u.properties.dist&&(u=M,u.properties.index=y+1,u.properties.location=c+N),Ot&&Ot.properties.dist<u.properties.dist&&(u=Ot,u.properties.index=y),c+=N}}),u}var Yn=hs;function cs(i,r){if(!i)throw new Error("line is required");if(!r)throw new Error("splitter is required");var a=no(i),u=no(r);if(a!=="LineString")throw new Error("line must be LineString");if(u==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(u==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var c=ba(r,{precision:7});switch(u){case"Point":return ds(i,c);case"MultiPoint":return fs(i,c);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return fs(i,Ki(i,c))}}function fs(i,r){var a=[],u=(0,va.default)();return Ii(r,function(c){if(a.forEach(function(y,w){y.id=w}),!a.length)a=ds(i,c).features,a.forEach(function(y){y.bbox||(y.bbox=su(Er(y)))}),u.load(li(a));else{var g=u.search(c);if(g.features.length){var _=La(c,g);a=a.filter(function(y){return y.id!==_.id}),u.remove(_),ri(ds(_,c),function(y){a.push(y),u.insert(y)})}}}),li(a)}function ds(i,r){var a=[],u=qi(i)[0],c=qi(i)[i.geometry.coordinates.length-1];if(Xn(u,Ti(r))||Xn(c,Ti(r)))return li([i]);var g=(0,va.default)(),_=rs(i);g.load(_);var y=g.search(r);if(!y.features.length)return li([i]);var w=La(r,y),M=[u],N=Wn(_,function(O,et,nt){var yt=qi(et)[1],Bt=Ti(r);return nt===w.id?(O.push(Bt),a.push(mn(O)),Xn(Bt,yt)?[Bt]:[Bt,yt]):(O.push(yt),O)},M);return N.length>1&&a.push(mn(N)),li(a)}function La(i,r){if(!r.features.length)throw new Error("lines must contain features");if(r.features.length===1)return r.features[0];var a,u=1/0;return ri(r,function(c){var g=Yn(c,i),_=g.properties.dist;_<u&&(a=c,u=_)}),a}function Xn(i,r){return i[0]===r[0]&&i[1]===r[1]}var ou=cs;function kr(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("point is required");if(!r)throw new Error("polygon is required");var u=Ti(i),c=ns(r),g=c.type,_=r.bbox,y=c.coordinates;if(_&&wa(u,_)===!1)return!1;g==="Polygon"&&(y=[y]);for(var w=!1,M=0;M<y.length&&!w;M++)if(xa(u,y[M][0],a.ignoreBoundary)){for(var N=!1,O=1;O<y[M].length&&!N;)xa(u,y[M][O],!a.ignoreBoundary)&&(N=!0),O++;N||(w=!0)}return w}function xa(i,r,a){var u=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var c=0,g=r.length-1;c<r.length;g=c++){var _=r[c][0],y=r[c][1],w=r[g][0],M=r[g][1],N=i[1]*(_-w)+y*(w-i[0])+M*(i[0]-_)===0&&(_-i[0])*(w-i[0])<=0&&(y-i[1])*(M-i[1])<=0;if(N)return!a;var O=y>i[1]!=M>i[1]&&i[0]<(w-_)*(i[1]-y)/(M-y)+_;O&&(u=!u)}return u}function wa(i,r){return r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[0]&&r[3]>=i[1]}function au(i,r,a){a===void 0&&(a={});for(var u=Ti(i),c=qi(r),g=0;g<c.length-1;g++){var _=!1;if(a.ignoreEndVertices&&(g===0&&(_="start"),g===c.length-2&&(_="end"),g===0&&g+1===c.length-1&&(_="both")),Wi(c[g],c[g+1],u,_,typeof a.epsilon>"u"?null:a.epsilon))return!0}return!1}function Wi(i,r,a,u,c){var g=a[0],_=a[1],y=i[0],w=i[1],M=r[0],N=r[1],O=a[0]-y,et=a[1]-w,nt=M-y,yt=N-w,Bt=O*yt-et*nt;if(c!==null){if(Math.abs(Bt)>c)return!1}else if(Bt!==0)return!1;if(u){if(u==="start")return Math.abs(nt)>=Math.abs(yt)?nt>0?y<g&&g<=M:M<=g&&g<y:yt>0?w<_&&_<=N:N<=_&&_<w;if(u==="end")return Math.abs(nt)>=Math.abs(yt)?nt>0?y<=g&&g<M:M<g&&g<=y:yt>0?w<=_&&_<N:N<_&&_<=w;if(u==="both")return Math.abs(nt)>=Math.abs(yt)?nt>0?y<g&&g<M:M<g&&g<y:yt>0?w<_&&_<N:N<_&&_<w}else return Math.abs(nt)>=Math.abs(yt)?nt>0?y<=g&&g<=M:M<=g&&g<=y:yt>0?w<=_&&_<=N:N<=_&&_<=w;return!1}var _n=au;function lu(i,r){var a=ns(i),u=ns(r),c=a.type,g=u.type,_=a.coordinates,y=u.coordinates;switch(c){case"Point":switch(g){case"Point":return ms(_,y);default:throw new Error("feature2 "+g+" geometry not supported")}case"MultiPoint":switch(g){case"Point":return ps(a,u);case"MultiPoint":return uu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return _n(u,a,{ignoreEndVertices:!0});case"LineString":return Mr(a,u);case"MultiPoint":return Ca(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return kr(u,a,{ignoreBoundary:!0});case"LineString":return cu(a,u);case"Polygon":return Qn(a,u);case"MultiPoint":return hu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+c+" geometry not supported")}}function ps(i,r){var a,u=!1;for(a=0;a<i.coordinates.length;a++)if(ms(i.coordinates[a],r.coordinates)){u=!0;break}return u}function uu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){for(var c=u[a],g=!1,_=0,y=i.coordinates;_<y.length;_++){var w=y[_];if(ms(c,w)){g=!0;break}}if(!g)return!1}return!0}function Ca(i,r){for(var a=!1,u=0,c=r.coordinates;u<c.length;u++){var g=c[u];if(_n(g,i,{ignoreEndVertices:!0})&&(a=!0),!_n(g,i))return!1}return!!a}function hu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){var c=u[a];if(!kr(c,i,{ignoreBoundary:!0}))return!1}return!0}function Mr(i,r){for(var a=!1,u=0,c=r.coordinates;u<c.length;u++){var g=c[u];if(_n({type:"Point",coordinates:g},i,{ignoreEndVertices:!0})&&(a=!0),!_n({type:"Point",coordinates:g},i,{ignoreEndVertices:!1}))return!1}return a}function cu(i,r){var a=!1,u=0,c=Er(i),g=Er(r);if(!oo(c,g))return!1;for(u;u<r.coordinates.length-1;u++){var _=fu(r.coordinates[u],r.coordinates[u+1]);if(kr({type:"Point",coordinates:_},i,{ignoreBoundary:!0})){a=!0;break}}return a}function Qn(i,r){if(i.type==="Feature"&&i.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var a=Er(i),u=Er(r);if(!oo(a,u))return!1;for(var c=ns(r).coordinates,g=0,_=c;g<_.length;g++)for(var y=_[g],w=0,M=y;w<M.length;w++){var N=M[w];if(!kr(N,i))return!1}return!0}function oo(i,r){return!(i[0]>r[0]||i[2]<r[2]||i[1]>r[1]||i[3]<r[3])}function ms(i,r){return i[0]===r[0]&&i[1]===r[1]}function fu(i,r){return[(i[0]+r[0])/2,(i[1]+r[1])/2]}var on=x(fn()),ao=i=>()=>i,gs=i=>{let r=i?(a,u)=>u.minus(a).abs().isLessThanOrEqualTo(i):ao(!1);return(a,u)=>r(a,u)?0:a.comparedTo(u)};function Pr(i){let r=i?(a,u,c,g,_)=>a.exponentiatedBy(2).isLessThanOrEqualTo(g.minus(u).exponentiatedBy(2).plus(_.minus(c).exponentiatedBy(2)).times(i)):ao(!1);return(a,u,c)=>{let g=a.x,_=a.y,y=c.x,w=c.y,M=_.minus(w).times(u.x.minus(y)).minus(g.minus(y).times(u.y.minus(w)));return r(M,g,_,y,w)?0:M.comparedTo(0)}}var du=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,tr=Math.ceil,ei=Math.floor,si="[BigNumber Error] ",lo=si+"Number primitive has more than 15 significant digits: ",Ni=1e14,Yt=14,uo=9007199254740991,_s=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],an=1e7,hi=1e9;function Ea(i){var r,a,u,c=I.prototype={constructor:I,toString:null,valueOf:null},g=new I(1),_=20,y=4,w=-7,M=21,N=-1e7,O=1e7,et=!1,nt=1,yt=0,Bt={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Ot="0123456789abcdefghijklmnopqrstuvwxyz",de=!0;function I(C,S){var T,A,D,R,Z,H,$,tt,Q=this;if(!(Q instanceof I))return new I(C,S);if(S==null){if(C&&C._isBigNumber===!0){Q.s=C.s,!C.c||C.e>O?Q.c=Q.e=null:C.e<N?Q.c=[Q.e=0]:(Q.e=C.e,Q.c=C.c.slice());return}if((H=typeof C=="number")&&C*0==0){if(Q.s=1/C<0?(C=-C,-1):1,C===~~C){for(R=0,Z=C;Z>=10;Z/=10,R++);R>O?Q.c=Q.e=null:(Q.e=R,Q.c=[C]);return}tt=String(C)}else{if(!du.test(tt=String(C)))return u(Q,tt,H);Q.s=tt.charCodeAt(0)==45?(tt=tt.slice(1),-1):1}(R=tt.indexOf("."))>-1&&(tt=tt.replace(".","")),(Z=tt.search(/e/i))>0?(R<0&&(R=Z),R+=+tt.slice(Z+1),tt=tt.substring(0,Z)):R<0&&(R=tt.length)}else{if(e(S,2,Ot.length,"Base"),S==10&&de)return Q=new I(C),W(Q,_+Q.e+1,y);if(tt=String(C),H=typeof C=="number"){if(C*0!=0)return u(Q,tt,H,S);if(Q.s=1/C<0?(tt=tt.slice(1),-1):1,I.DEBUG&&tt.replace(/^0\.0*|\./,"").length>15)throw Error(lo+C)}else Q.s=tt.charCodeAt(0)===45?(tt=tt.slice(1),-1):1;for(T=Ot.slice(0,S),R=Z=0,$=tt.length;Z<$;Z++)if(T.indexOf(A=tt.charAt(Z))<0){if(A=="."){if(Z>R){R=$;continue}}else if(!D&&(tt==tt.toUpperCase()&&(tt=tt.toLowerCase())||tt==tt.toLowerCase()&&(tt=tt.toUpperCase()))){D=!0,Z=-1,R=0;continue}return u(Q,String(C),H,S)}H=!1,tt=a(tt,S,10,Q.s),(R=tt.indexOf("."))>-1?tt=tt.replace(".",""):R=tt.length}for(Z=0;tt.charCodeAt(Z)===48;Z++);for($=tt.length;tt.charCodeAt(--$)===48;);if(tt=tt.slice(Z,++$)){if($-=Z,H&&I.DEBUG&&$>15&&(C>uo||C!==ei(C)))throw Error(lo+Q.s*C);if((R=R-Z-1)>O)Q.c=Q.e=null;else if(R<N)Q.c=[Q.e=0];else{if(Q.e=R,Q.c=[],Z=(R+1)%Yt,R<0&&(Z+=Yt),Z<$){for(Z&&Q.c.push(+tt.slice(0,Z)),$-=Yt;Z<$;)Q.c.push(+tt.slice(Z,Z+=Yt));Z=Yt-(tt=tt.slice(Z)).length}else Z-=$;for(;Z--;tt+="0");Q.c.push(+tt)}}else Q.c=[Q.e=0]}I.clone=Ea,I.ROUND_UP=0,I.ROUND_DOWN=1,I.ROUND_CEIL=2,I.ROUND_FLOOR=3,I.ROUND_HALF_UP=4,I.ROUND_HALF_DOWN=5,I.ROUND_HALF_EVEN=6,I.ROUND_HALF_CEIL=7,I.ROUND_HALF_FLOOR=8,I.EUCLID=9,I.config=I.set=function(C){var S,T;if(C!=null)if(typeof C=="object"){if(C.hasOwnProperty(S="DECIMAL_PLACES")&&(T=C[S],e(T,0,hi,S),_=T),C.hasOwnProperty(S="ROUNDING_MODE")&&(T=C[S],e(T,0,8,S),y=T),C.hasOwnProperty(S="EXPONENTIAL_AT")&&(T=C[S],T&&T.pop?(e(T[0],-1e9,0,S),e(T[1],0,hi,S),w=T[0],M=T[1]):(e(T,-1e9,hi,S),w=-(M=T<0?-T:T))),C.hasOwnProperty(S="RANGE"))if(T=C[S],T&&T.pop)e(T[0],-1e9,-1,S),e(T[1],1,hi,S),N=T[0],O=T[1];else if(e(T,-1e9,hi,S),T)N=-(O=T<0?-T:T);else throw Error(si+S+" cannot be zero: "+T);if(C.hasOwnProperty(S="CRYPTO"))if(T=C[S],T===!!T)if(T)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))et=T;else throw et=!T,Error(si+"crypto unavailable");else et=T;else throw Error(si+S+" not true or false: "+T);if(C.hasOwnProperty(S="MODULO_MODE")&&(T=C[S],e(T,0,9,S),nt=T),C.hasOwnProperty(S="POW_PRECISION")&&(T=C[S],e(T,0,hi,S),yt=T),C.hasOwnProperty(S="FORMAT"))if(T=C[S],typeof T=="object")Bt=T;else throw Error(si+S+" not an object: "+T);if(C.hasOwnProperty(S="ALPHABET"))if(T=C[S],typeof T=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(T))de=T.slice(0,10)=="0123456789",Ot=T;else throw Error(si+S+" invalid: "+T)}else throw Error(si+"Object expected: "+C);return{DECIMAL_PLACES:_,ROUNDING_MODE:y,EXPONENTIAL_AT:[w,M],RANGE:[N,O],CRYPTO:et,MODULO_MODE:nt,POW_PRECISION:yt,FORMAT:Bt,ALPHABET:Ot}},I.isBigNumber=function(C){if(!C||C._isBigNumber!==!0)return!1;if(!I.DEBUG)return!0;var S,T,A=C.c,D=C.e,R=C.s;t:if({}.toString.call(A)=="[object Array]"){if((R===1||R===-1)&&D>=-1e9&&D<=hi&&D===ei(D)){if(A[0]===0){if(D===0&&A.length===1)return!0;break t}if(S=(D+1)%Yt,S<1&&(S+=Yt),String(A[0]).length==S){for(S=0;S<A.length;S++)if(T=A[S],T<0||T>=Ni||T!==ei(T))break t;if(T!==0)return!0}}}else if(A===null&&D===null&&(R===null||R===1||R===-1))return!0;throw Error(si+"Invalid BigNumber: "+C)},I.maximum=I.max=function(){return K(arguments,-1)},I.minimum=I.min=function(){return K(arguments,1)},I.random=function(){var C=9007199254740992,S=Math.random()*C&2097151?function(){return ei(Math.random()*C)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(T){var A,D,R,Z,H,$=0,tt=[],Q=new I(g);if(T==null?T=_:e(T,0,hi),Z=tr(T/Yt),et)if(crypto.getRandomValues){for(A=crypto.getRandomValues(new Uint32Array(Z*=2));$<Z;)H=A[$]*131072+(A[$+1]>>>11),H>=9e15?(D=crypto.getRandomValues(new Uint32Array(2)),A[$]=D[0],A[$+1]=D[1]):(tt.push(H%1e14),$+=2);$=Z/2}else if(crypto.randomBytes){for(A=crypto.randomBytes(Z*=7);$<Z;)H=(A[$]&31)*281474976710656+A[$+1]*1099511627776+A[$+2]*4294967296+A[$+3]*16777216+(A[$+4]<<16)+(A[$+5]<<8)+A[$+6],H>=9e15?crypto.randomBytes(7).copy(A,$):(tt.push(H%1e14),$+=7);$=Z/7}else throw et=!1,Error(si+"crypto unavailable");if(!et)for(;$<Z;)H=S(),H<9e15&&(tt[$++]=H%1e14);for(Z=tt[--$],T%=Yt,Z&&T&&(H=_s[Yt-T],tt[$]=ei(Z/H)*H);tt[$]===0;tt.pop(),$--);if($<0)tt=[R=0];else{for(R=-1;tt[0]===0;tt.splice(0,1),R-=Yt);for($=1,H=tt[0];H>=10;H/=10,$++);$<Yt&&(R-=Yt-$)}return Q.e=R,Q.c=tt,Q}}(),I.sum=function(){for(var C=1,S=arguments,T=new I(S[0]);C<S.length;)T=T.plus(S[C++]);return T},a=function(){var C="0123456789";function S(T,A,D,R){for(var Z,H=[0],$,tt=0,Q=T.length;tt<Q;){for($=H.length;$--;H[$]*=A);for(H[0]+=R.indexOf(T.charAt(tt++)),Z=0;Z<H.length;Z++)H[Z]>D-1&&(H[Z+1]==null&&(H[Z+1]=0),H[Z+1]+=H[Z]/D|0,H[Z]%=D)}return H.reverse()}return function(T,A,D,R,Z){var H,$,tt,Q,dt,Rt,It,Ht,we=T.indexOf("."),Pe=_,_e=y;for(we>=0&&(Q=yt,yt=0,T=T.replace(".",""),Ht=new I(A),Rt=Ht.pow(T.length-we),yt=Q,Ht.c=S(m(wi(Rt.c),Rt.e,"0"),10,D,C),Ht.e=Ht.c.length),It=S(T,A,D,Z?(H=Ot,C):(H=C,Ot)),tt=Q=It.length;It[--Q]==0;It.pop());if(!It[0])return H.charAt(0);if(we<0?--tt:(Rt.c=It,Rt.e=tt,Rt.s=R,Rt=r(Rt,Ht,Pe,_e,D),It=Rt.c,dt=Rt.r,tt=Rt.e),$=tt+Pe+1,we=It[$],Q=D/2,dt=dt||$<0||It[$+1]!=null,dt=_e<4?(we!=null||dt)&&(_e==0||_e==(Rt.s<0?3:2)):we>Q||we==Q&&(_e==4||dt||_e==6&&It[$-1]&1||_e==(Rt.s<0?8:7)),$<1||!It[0])T=dt?m(H.charAt(1),-Pe,H.charAt(0)):H.charAt(0);else{if(It.length=$,dt)for(--D;++It[--$]>D;)It[$]=0,$||(++tt,It=[1].concat(It));for(Q=It.length;!It[--Q];);for(we=0,T="";we<=Q;T+=H.charAt(It[we++]));T=m(T,tt,H.charAt(0))}return T}}(),r=function(){function C(A,D,R){var Z,H,$,tt,Q=0,dt=A.length,Rt=D%an,It=D/an|0;for(A=A.slice();dt--;)$=A[dt]%an,tt=A[dt]/an|0,Z=It*$+tt*Rt,H=Rt*$+Z%an*an+Q,Q=(H/R|0)+(Z/an|0)+It*tt,A[dt]=H%R;return Q&&(A=[Q].concat(A)),A}function S(A,D,R,Z){var H,$;if(R!=Z)$=R>Z?1:-1;else for(H=$=0;H<R;H++)if(A[H]!=D[H]){$=A[H]>D[H]?1:-1;break}return $}function T(A,D,R,Z){for(var H=0;R--;)A[R]-=H,H=A[R]<D[R]?1:0,A[R]=H*Z+A[R]-D[R];for(;!A[0]&&A.length>1;A.splice(0,1));}return function(A,D,R,Z,H){var $,tt,Q,dt,Rt,It,Ht,we,Pe,_e,Be,fi,Ta,vu,bu,yn,po,Xi=A.s==D.s?1:-1,Ci=A.c,je=D.c;if(!Ci||!Ci[0]||!je||!je[0])return new I(!A.s||!D.s||(Ci?je&&Ci[0]==je[0]:!je)?NaN:Ci&&Ci[0]==0||!je?Xi*0:Xi/0);for(we=new I(Xi),Pe=we.c=[],tt=A.e-D.e,Xi=R+tt+1,H||(H=Ni,tt=xi(A.e/Yt)-xi(D.e/Yt),Xi=Xi/Yt|0),Q=0;je[Q]==(Ci[Q]||0);Q++);if(je[Q]>(Ci[Q]||0)&&tt--,Xi<0)Pe.push(1),dt=!0;else{for(vu=Ci.length,yn=je.length,Q=0,Xi+=2,Rt=ei(H/(je[0]+1)),Rt>1&&(je=C(je,Rt,H),Ci=C(Ci,Rt,H),yn=je.length,vu=Ci.length),Ta=yn,_e=Ci.slice(0,yn),Be=_e.length;Be<yn;_e[Be++]=0);po=je.slice(),po=[0].concat(po),bu=je[0],je[1]>=H/2&&bu++;do{if(Rt=0,$=S(je,_e,yn,Be),$<0){if(fi=_e[0],yn!=Be&&(fi=fi*H+(_e[1]||0)),Rt=ei(fi/bu),Rt>1)for(Rt>=H&&(Rt=H-1),It=C(je,Rt,H),Ht=It.length,Be=_e.length;S(It,_e,Ht,Be)==1;)Rt--,T(It,yn<Ht?po:je,Ht,H),Ht=It.length,$=1;else Rt==0&&($=Rt=1),It=je.slice(),Ht=It.length;if(Ht<Be&&(It=[0].concat(It)),T(_e,It,Be,H),Be=_e.length,$==-1)for(;S(je,_e,yn,Be)<1;)Rt++,T(_e,yn<Be?po:je,Be,H),Be=_e.length}else $===0&&(Rt++,_e=[0]);Pe[Q++]=Rt,_e[0]?_e[Be++]=Ci[Ta]||0:(_e=[Ci[Ta]],Be=1)}while((Ta++<vu||_e[0]!=null)&&Xi--);dt=_e[0]!=null,Pe[0]||Pe.splice(0,1)}if(H==Ni){for(Q=1,Xi=Pe[0];Xi>=10;Xi/=10,Q++);W(we,R+(we.e=Q+tt*Yt-1)+1,Z,dt)}else we.e=tt,we.r=+dt;return we}}();function V(C,S,T,A){var D,R,Z,H,$;if(T==null?T=y:e(T,0,8),!C.c)return C.toString();if(D=C.c[0],Z=C.e,S==null)$=wi(C.c),$=A==1||A==2&&(Z<=w||Z>=M)?h($,Z):m($,Z,"0");else if(C=W(new I(C),S,T),R=C.e,$=wi(C.c),H=$.length,A==1||A==2&&(S<=R||R<=w)){for(;H<S;$+="0",H++);$=h($,R)}else if(S-=Z,$=m($,R,"0"),R+1>H){if(--S>0)for($+=".";S--;$+="0");}else if(S+=R-H,S>0)for(R+1==H&&($+=".");S--;$+="0");return C.s<0&&D?"-"+$:$}function K(C,S){for(var T,A,D=1,R=new I(C[0]);D<C.length;D++)A=new I(C[D]),(!A.s||(T=Fn(R,A))===S||T===0&&R.s===S)&&(R=A);return R}function rt(C,S,T){for(var A=1,D=S.length;!S[--D];S.pop());for(D=S[0];D>=10;D/=10,A++);return(T=A+T*Yt-1)>O?C.c=C.e=null:T<N?C.c=[C.e=0]:(C.e=T,C.c=S),C}u=function(){var C=/^(-?)0([xbo])(?=\w[\w.]*$)/i,S=/^([^.]+)\.$/,T=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,D=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(R,Z,H,$){var tt,Q=H?Z:Z.replace(D,"");if(A.test(Q))R.s=isNaN(Q)?null:Q<0?-1:1;else{if(!H&&(Q=Q.replace(C,function(dt,Rt,It){return tt=(It=It.toLowerCase())=="x"?16:It=="b"?2:8,!$||$==tt?Rt:dt}),$&&(tt=$,Q=Q.replace(S,"$1").replace(T,"0.$1")),Z!=Q))return new I(Q,tt);if(I.DEBUG)throw Error(si+"Not a"+($?" base "+$:"")+" number: "+Z);R.s=null}R.c=R.e=null}}();function W(C,S,T,A){var D,R,Z,H,$,tt,Q,dt=C.c,Rt=_s;if(dt){t:{for(D=1,H=dt[0];H>=10;H/=10,D++);if(R=S-D,R<0)R+=Yt,Z=S,$=dt[tt=0],Q=ei($/Rt[D-Z-1]%10);else if(tt=tr((R+1)/Yt),tt>=dt.length)if(A){for(;dt.length<=tt;dt.push(0));$=Q=0,D=1,R%=Yt,Z=R-Yt+1}else break t;else{for($=H=dt[tt],D=1;H>=10;H/=10,D++);R%=Yt,Z=R-Yt+D,Q=Z<0?0:ei($/Rt[D-Z-1]%10)}if(A=A||S<0||dt[tt+1]!=null||(Z<0?$:$%Rt[D-Z-1]),A=T<4?(Q||A)&&(T==0||T==(C.s<0?3:2)):Q>5||Q==5&&(T==4||A||T==6&&(R>0?Z>0?$/Rt[D-Z]:0:dt[tt-1])%10&1||T==(C.s<0?8:7)),S<1||!dt[0])return dt.length=0,A?(S-=C.e+1,dt[0]=Rt[(Yt-S%Yt)%Yt],C.e=-S||0):dt[0]=C.e=0,C;if(R==0?(dt.length=tt,H=1,tt--):(dt.length=tt+1,H=Rt[Yt-R],dt[tt]=Z>0?ei($/Rt[D-Z]%Rt[Z])*H:0),A)for(;;)if(tt==0){for(R=1,Z=dt[0];Z>=10;Z/=10,R++);for(Z=dt[0]+=H,H=1;Z>=10;Z/=10,H++);R!=H&&(C.e++,dt[0]==Ni&&(dt[0]=1));break}else{if(dt[tt]+=H,dt[tt]!=Ni)break;dt[tt--]=0,H=1}for(R=dt.length;dt[--R]===0;dt.pop());}C.e>O?C.c=C.e=null:C.e<N&&(C.c=[C.e=0])}return C}function it(C){var S,T=C.e;return T===null?C.toString():(S=wi(C.c),S=T<=w||T>=M?h(S,T):m(S,T,"0"),C.s<0?"-"+S:S)}return c.absoluteValue=c.abs=function(){var C=new I(this);return C.s<0&&(C.s=1),C},c.comparedTo=function(C,S){return Fn(this,new I(C,S))},c.decimalPlaces=c.dp=function(C,S){var T,A,D,R=this;if(C!=null)return e(C,0,hi),S==null?S=y:e(S,0,8),W(new I(R),C+R.e+1,S);if(!(T=R.c))return null;if(A=((D=T.length-1)-xi(this.e/Yt))*Yt,D=T[D])for(;D%10==0;D/=10,A--);return A<0&&(A=0),A},c.dividedBy=c.div=function(C,S){return r(this,new I(C,S),_,y)},c.dividedToIntegerBy=c.idiv=function(C,S){return r(this,new I(C,S),0,1)},c.exponentiatedBy=c.pow=function(C,S){var T,A,D,R,Z,H,$,tt,Q,dt=this;if(C=new I(C),C.c&&!C.isInteger())throw Error(si+"Exponent not an integer: "+it(C));if(S!=null&&(S=new I(S)),H=C.e>14,!dt.c||!dt.c[0]||dt.c[0]==1&&!dt.e&&dt.c.length==1||!C.c||!C.c[0])return Q=new I(Math.pow(+it(dt),H?C.s*(2-s(C)):+it(C))),S?Q.mod(S):Q;if($=C.s<0,S){if(S.c?!S.c[0]:!S.s)return new I(NaN);A=!$&&dt.isInteger()&&S.isInteger(),A&&(dt=dt.mod(S))}else{if(C.e>9&&(dt.e>0||dt.e<-1||(dt.e==0?dt.c[0]>1||H&&dt.c[1]>=24e7:dt.c[0]<8e13||H&&dt.c[0]<=9999975e7)))return R=dt.s<0&&s(C)?-0:0,dt.e>-1&&(R=1/R),new I($?1/R:R);yt&&(R=tr(yt/Yt+2))}for(H?(T=new I(.5),$&&(C.s=1),tt=s(C)):(D=Math.abs(+it(C)),tt=D%2),Q=new I(g);;){if(tt){if(Q=Q.times(dt),!Q.c)break;R?Q.c.length>R&&(Q.c.length=R):A&&(Q=Q.mod(S))}if(D){if(D=ei(D/2),D===0)break;tt=D%2}else if(C=C.times(T),W(C,C.e+1,1),C.e>14)tt=s(C);else{if(D=+it(C),D===0)break;tt=D%2}dt=dt.times(dt),R?dt.c&&dt.c.length>R&&(dt.c.length=R):A&&(dt=dt.mod(S))}return A?Q:($&&(Q=g.div(Q)),S?Q.mod(S):R?W(Q,yt,y,Z):Q)},c.integerValue=function(C){var S=new I(this);return C==null?C=y:e(C,0,8),W(S,S.e+1,C)},c.isEqualTo=c.eq=function(C,S){return Fn(this,new I(C,S))===0},c.isFinite=function(){return!!this.c},c.isGreaterThan=c.gt=function(C,S){return Fn(this,new I(C,S))>0},c.isGreaterThanOrEqualTo=c.gte=function(C,S){return(S=Fn(this,new I(C,S)))===1||S===0},c.isInteger=function(){return!!this.c&&xi(this.e/Yt)>this.c.length-2},c.isLessThan=c.lt=function(C,S){return Fn(this,new I(C,S))<0},c.isLessThanOrEqualTo=c.lte=function(C,S){return(S=Fn(this,new I(C,S)))===-1||S===0},c.isNaN=function(){return!this.s},c.isNegative=function(){return this.s<0},c.isPositive=function(){return this.s>0},c.isZero=function(){return!!this.c&&this.c[0]==0},c.minus=function(C,S){var T,A,D,R,Z=this,H=Z.s;if(C=new I(C,S),S=C.s,!H||!S)return new I(NaN);if(H!=S)return C.s=-S,Z.plus(C);var $=Z.e/Yt,tt=C.e/Yt,Q=Z.c,dt=C.c;if(!$||!tt){if(!Q||!dt)return Q?(C.s=-S,C):new I(dt?Z:NaN);if(!Q[0]||!dt[0])return dt[0]?(C.s=-S,C):new I(Q[0]?Z:y==3?-0:0)}if($=xi($),tt=xi(tt),Q=Q.slice(),H=$-tt){for((R=H<0)?(H=-H,D=Q):(tt=$,D=dt),D.reverse(),S=H;S--;D.push(0));D.reverse()}else for(A=(R=(H=Q.length)<(S=dt.length))?H:S,H=S=0;S<A;S++)if(Q[S]!=dt[S]){R=Q[S]<dt[S];break}if(R&&(D=Q,Q=dt,dt=D,C.s=-C.s),S=(A=dt.length)-(T=Q.length),S>0)for(;S--;Q[T++]=0);for(S=Ni-1;A>H;){if(Q[--A]<dt[A]){for(T=A;T&&!Q[--T];Q[T]=S);--Q[T],Q[A]+=Ni}Q[A]-=dt[A]}for(;Q[0]==0;Q.splice(0,1),--tt);return Q[0]?rt(C,Q,tt):(C.s=y==3?-1:1,C.c=[C.e=0],C)},c.modulo=c.mod=function(C,S){var T,A,D=this;return C=new I(C,S),!D.c||!C.s||C.c&&!C.c[0]?new I(NaN):!C.c||D.c&&!D.c[0]?new I(D):(nt==9?(A=C.s,C.s=1,T=r(D,C,0,3),C.s=A,T.s*=A):T=r(D,C,0,nt),C=D.minus(T.times(C)),!C.c[0]&&nt==1&&(C.s=D.s),C)},c.multipliedBy=c.times=function(C,S){var T,A,D,R,Z,H,$,tt,Q,dt,Rt,It,Ht,we,Pe,_e=this,Be=_e.c,fi=(C=new I(C,S)).c;if(!Be||!fi||!Be[0]||!fi[0])return!_e.s||!C.s||Be&&!Be[0]&&!fi||fi&&!fi[0]&&!Be?C.c=C.e=C.s=null:(C.s*=_e.s,!Be||!fi?C.c=C.e=null:(C.c=[0],C.e=0)),C;for(A=xi(_e.e/Yt)+xi(C.e/Yt),C.s*=_e.s,$=Be.length,dt=fi.length,$<dt&&(Ht=Be,Be=fi,fi=Ht,D=$,$=dt,dt=D),D=$+dt,Ht=[];D--;Ht.push(0));for(we=Ni,Pe=an,D=dt;--D>=0;){for(T=0,Rt=fi[D]%Pe,It=fi[D]/Pe|0,Z=$,R=D+Z;R>D;)tt=Be[--Z]%Pe,Q=Be[Z]/Pe|0,H=It*tt+Q*Rt,tt=Rt*tt+H%Pe*Pe+Ht[R]+T,T=(tt/we|0)+(H/Pe|0)+It*Q,Ht[R--]=tt%we;Ht[R]=T}return T?++A:Ht.splice(0,1),rt(C,Ht,A)},c.negated=function(){var C=new I(this);return C.s=-C.s||null,C},c.plus=function(C,S){var T,A=this,D=A.s;if(C=new I(C,S),S=C.s,!D||!S)return new I(NaN);if(D!=S)return C.s=-S,A.minus(C);var R=A.e/Yt,Z=C.e/Yt,H=A.c,$=C.c;if(!R||!Z){if(!H||!$)return new I(D/0);if(!H[0]||!$[0])return $[0]?C:new I(H[0]?A:D*0)}if(R=xi(R),Z=xi(Z),H=H.slice(),D=R-Z){for(D>0?(Z=R,T=$):(D=-D,T=H),T.reverse();D--;T.push(0));T.reverse()}for(D=H.length,S=$.length,D-S<0&&(T=$,$=H,H=T,S=D),D=0;S;)D=(H[--S]=H[S]+$[S]+D)/Ni|0,H[S]=Ni===H[S]?0:H[S]%Ni;return D&&(H=[D].concat(H),++Z),rt(C,H,Z)},c.precision=c.sd=function(C,S){var T,A,D,R=this;if(C!=null&&C!==!!C)return e(C,1,hi),S==null?S=y:e(S,0,8),W(new I(R),C,S);if(!(T=R.c))return null;if(D=T.length-1,A=D*Yt+1,D=T[D]){for(;D%10==0;D/=10,A--);for(D=T[0];D>=10;D/=10,A++);}return C&&R.e+1>A&&(A=R.e+1),A},c.shiftedBy=function(C){return e(C,-9007199254740991,uo),this.times("1e"+C)},c.squareRoot=c.sqrt=function(){var C,S,T,A,D,R=this,Z=R.c,H=R.s,$=R.e,tt=_+4,Q=new I("0.5");if(H!==1||!Z||!Z[0])return new I(!H||H<0&&(!Z||Z[0])?NaN:Z?R:1/0);if(H=Math.sqrt(+it(R)),H==0||H==1/0?(S=wi(Z),(S.length+$)%2==0&&(S+="0"),H=Math.sqrt(+S),$=xi(($+1)/2)-($<0||$%2),H==1/0?S="5e"+$:(S=H.toExponential(),S=S.slice(0,S.indexOf("e")+1)+$),T=new I(S)):T=new I(H+""),T.c[0]){for($=T.e,H=$+tt,H<3&&(H=0);;)if(D=T,T=Q.times(D.plus(r(R,D,tt,1))),wi(D.c).slice(0,H)===(S=wi(T.c)).slice(0,H))if(T.e<$&&--H,S=S.slice(H-3,H+1),S=="9999"||!A&&S=="4999"){if(!A&&(W(D,D.e+_+2,0),D.times(D).eq(R))){T=D;break}tt+=4,H+=4,A=1}else{(!+S||!+S.slice(1)&&S.charAt(0)=="5")&&(W(T,T.e+_+2,1),C=!T.times(T).eq(R));break}}return W(T,T.e+_+1,y,C)},c.toExponential=function(C,S){return C!=null&&(e(C,0,hi),C++),V(this,C,S,1)},c.toFixed=function(C,S){return C!=null&&(e(C,0,hi),C=C+this.e+1),V(this,C,S)},c.toFormat=function(C,S,T){var A,D=this;if(T==null)C!=null&&S&&typeof S=="object"?(T=S,S=null):C&&typeof C=="object"?(T=C,C=S=null):T=Bt;else if(typeof T!="object")throw Error(si+"Argument not an object: "+T);if(A=D.toFixed(C,S),D.c){var R,Z=A.split("."),H=+T.groupSize,$=+T.secondaryGroupSize,tt=T.groupSeparator||"",Q=Z[0],dt=Z[1],Rt=D.s<0,It=Rt?Q.slice(1):Q,Ht=It.length;if($&&(R=H,H=$,$=R,Ht-=R),H>0&&Ht>0){for(R=Ht%H||H,Q=It.substr(0,R);R<Ht;R+=H)Q+=tt+It.substr(R,H);$>0&&(Q+=tt+It.slice(R)),Rt&&(Q="-"+Q)}A=dt?Q+(T.decimalSeparator||"")+(($=+T.fractionGroupSize)?dt.replace(new RegExp("\\d{"+$+"}\\B","g"),"$&"+(T.fractionGroupSeparator||"")):dt):Q}return(T.prefix||"")+A+(T.suffix||"")},c.toFraction=function(C){var S,T,A,D,R,Z,H,$,tt,Q,dt,Rt,It=this,Ht=It.c;if(C!=null&&(H=new I(C),!H.isInteger()&&(H.c||H.s!==1)||H.lt(g)))throw Error(si+"Argument "+(H.isInteger()?"out of range: ":"not an integer: ")+it(H));if(!Ht)return new I(It);for(S=new I(g),tt=T=new I(g),A=$=new I(g),Rt=wi(Ht),R=S.e=Rt.length-It.e-1,S.c[0]=_s[(Z=R%Yt)<0?Yt+Z:Z],C=!C||H.comparedTo(S)>0?R>0?S:tt:H,Z=O,O=1/0,H=new I(Rt),$.c[0]=0;Q=r(H,S,0,1),D=T.plus(Q.times(A)),D.comparedTo(C)!=1;)T=A,A=D,tt=$.plus(Q.times(D=tt)),$=D,S=H.minus(Q.times(D=S)),H=D;return D=r(C.minus(T),A,0,1),$=$.plus(D.times(tt)),T=T.plus(D.times(A)),$.s=tt.s=It.s,R=R*2,dt=r(tt,A,R,y).minus(It).abs().comparedTo(r($,T,R,y).minus(It).abs())<1?[tt,A]:[$,T],O=Z,dt},c.toNumber=function(){return+it(this)},c.toPrecision=function(C,S){return C!=null&&e(C,1,hi),V(this,C,S,2)},c.toString=function(C){var S,T=this,A=T.s,D=T.e;return D===null?A?(S="Infinity",A<0&&(S="-"+S)):S="NaN":(C==null?S=D<=w||D>=M?h(wi(T.c),D):m(wi(T.c),D,"0"):C===10&&de?(T=W(new I(T),_+D+1,y),S=m(wi(T.c),T.e,"0")):(e(C,2,Ot.length,"Base"),S=a(m(wi(T.c),D,"0"),10,C,A,!0)),A<0&&T.c[0]&&(S="-"+S)),S},c.valueOf=c.toJSON=function(){return it(this)},c._isBigNumber=!0,c[Symbol.toStringTag]="BigNumber",c[Symbol.for("nodejs.util.inspect.custom")]=c.valueOf,i!=null&&I.set(i),I}function xi(i){var r=i|0;return i>0||i===r?r:r-1}function wi(i){for(var r,a,u=1,c=i.length,g=i[0]+"";u<c;){for(r=i[u++]+"",a=Yt-r.length;a--;r="0"+r);g+=r}for(c=g.length;g.charCodeAt(--c)===48;);return g.slice(0,c+1||1)}function Fn(i,r){var a,u,c=i.c,g=r.c,_=i.s,y=r.s,w=i.e,M=r.e;if(!_||!y)return null;if(a=c&&!c[0],u=g&&!g[0],a||u)return a?u?0:-y:_;if(_!=y)return _;if(a=_<0,u=w==M,!c||!g)return u?0:!c^a?1:-1;if(!u)return w>M^a?1:-1;for(y=(w=c.length)<(M=g.length)?w:M,_=0;_<y;_++)if(c[_]!=g[_])return c[_]>g[_]^a?1:-1;return w==M?0:w>M^a?1:-1}function e(i,r,a,u){if(i<r||i>a||i!==ei(i))throw Error(si+(u||"Argument")+(typeof i=="number"?i<r||i>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function s(i){var r=i.c.length-1;return xi(i.e/Yt)==r&&i.c[r]%2!=0}function h(i,r){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(r<0?"e":"e+")+r}function m(i,r,a){var u,c;if(r<0){for(c=a+".";++r;c+=a);i=c+i}else if(u=i.length,++r>u){for(c=a,r-=u;--r;c+=a);i+=c}else r<u&&(i=i.slice(0,r)+"."+i.slice(r));return i}var v=Ea(),B=v,G=class{constructor(i){Gt(this,"key");Gt(this,"left",null);Gt(this,"right",null);this.key=i}},X=class extends G{constructor(i){super(i)}},ot=class{constructor(){Gt(this,"size",0);Gt(this,"modificationCount",0);Gt(this,"splayCount",0)}splay(i){let r=this.root;if(r==null)return this.compare(i,i),-1;let a=null,u=null,c=null,g=null,_=r,y=this.compare,w;for(;;)if(w=y(_.key,i),w>0){let M=_.left;if(M==null||(w=y(M.key,i),w>0&&(_.left=M.right,M.right=_,_=M,M=_.left,M==null)))break;a==null?u=_:a.left=_,a=_,_=M}else if(w<0){let M=_.right;if(M==null||(w=y(M.key,i),w<0&&(_.right=M.left,M.left=_,_=M,M=_.right,M==null)))break;c==null?g=_:c.right=_,c=_,_=M}else break;return c!=null&&(c.right=_.left,_.left=g),a!=null&&(a.left=_.right,_.right=u),this.root!==_&&(this.root=_,this.splayCount++),w}splayMin(i){let r=i,a=r.left;for(;a!=null;){let u=a;r.left=u.right,u.right=r,r=u,a=r.left}return r}splayMax(i){let r=i,a=r.right;for(;a!=null;){let u=a;r.right=u.left,u.left=r,r=u,a=r.right}return r}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let r=this.root,a=r,u=r.left;if(this.size--,u==null)this.root=r.right;else{let c=r.right;r=this.splayMax(u),r.right=c,this.root=r}return this.modificationCount++,a}addNewRoot(i,r){this.size++,this.modificationCount++;let a=this.root;if(a==null){this.root=i;return}r<0?(i.left=a,i.right=a.right,a.right=null):(i.right=a,i.left=a.left,a.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,r)=>i<r?-1:i>r?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},gt=class Lo extends ot{constructor(a,u){super();Gt(this,"root",null);Gt(this,"compare");Gt(this,"validKey");Gt(this,Vh,"[object Set]");this.compare=a??this.defaultCompare(),this.validKey=u??(c=>c!=null&&c!=null)}delete(a){return this.validKey(a)?this._delete(a)!=null:!1}deleteAll(a){for(let u of a)this.delete(u)}forEach(a){let u=this[Symbol.iterator](),c;for(;c=u.next(),!c.done;)a(c.value,c.value,this)}add(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new X(a),u),this}addAndReturn(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new X(a),u),this.root.key}addAll(a){for(let u of a)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let c=u.right;for(;c!=null;)u=c,c=u.right;return u.key}firstAfter(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let c=u.left;for(;c!=null;)u=c,c=u.left;return u.key}retainAll(a){let u=new Lo(this.compare,this.validKey),c=this.modificationCount;for(let g of a){if(c!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(g)&&this.splay(g)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(a){return!this.validKey(a)||this.splay(a)!=0?null:this.root.key}intersection(a){let u=new Lo(this.compare,this.validKey);for(let c of this)a.has(c)&&u.add(c);return u}difference(a){let u=new Lo(this.compare,this.validKey);for(let c of this)a.has(c)||u.add(c);return u}union(a){let u=this.clone();return u.addAll(a),u}clone(){let a=new Lo(this.compare,this.validKey);return a.size=this.size,a.root=this.copyNode(this.root),a}copyNode(a){if(a==null)return null;function u(g,_){let y,w;do{if(y=g.left,w=g.right,y!=null){let M=new X(y.key);_.left=M,u(y,M)}if(w!=null){let M=new X(w.key);_.right=M,g=w,_=M}}while(w!=null)}let c=new X(a.key);return u(a,c),c}toSet(){return this.clone()}entries(){return new oe(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Hh=Symbol.iterator,Vh=Symbol.toStringTag,Hh)](){return new $t(this.wrap())}},Tt=class{constructor(i){Gt(this,"tree");Gt(this,"path",new Array);Gt(this,"modificationCount",null);Gt(this,"splayCount");this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let a=this.tree.getRoot();for(;a!=null;)this.path.push(a),a=a.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],r=i.right;if(r!=null){for(;r!=null;)this.path.push(r),r=r.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},$t=class extends Tt{getValue(i){return i.key}},oe=class extends Tt{getValue(i){return[i.key,i.key]}},oi=i=>i,Ze=i=>{if(i){let r=new gt(gs(i)),a=new gt(gs(i)),u=(g,_)=>_.addAndReturn(g),c=g=>({x:u(g.x,r),y:u(g.y,a)});return c({x:new B(0),y:new B(0)}),c}return oi},ci=i=>({set:r=>{Re=ci(r)},reset:()=>ci(i),compare:gs(i),snap:Ze(i),orient:Pr(i)}),Re=ci(),Ji=(i,r)=>i.ll.x.isLessThanOrEqualTo(r.x)&&r.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(r.y)&&r.y.isLessThanOrEqualTo(i.ur.y),ho=(i,r)=>{if(r.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(r.ll.x)||r.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(r.ll.y))return null;let a=i.ll.x.isLessThan(r.ll.x)?r.ll.x:i.ll.x,u=i.ur.x.isLessThan(r.ur.x)?i.ur.x:r.ur.x,c=i.ll.y.isLessThan(r.ll.y)?r.ll.y:i.ll.y,g=i.ur.y.isLessThan(r.ur.y)?i.ur.y:r.ur.y;return{ll:{x:a,y:c},ur:{x:u,y:g}}},ys=(i,r)=>i.x.times(r.y).minus(i.y.times(r.x)),ka=(i,r)=>i.x.times(r.x).plus(i.y.times(r.y)),Br=i=>ka(i,i).sqrt(),pu=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},c={x:a.x.minus(i.x),y:a.y.minus(i.y)};return ys(c,u).div(Br(c)).div(Br(u))},Ma=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},c={x:a.x.minus(i.x),y:a.y.minus(i.y)};return ka(c,u).div(Br(c)).div(Br(u))},Ie=(i,r,a)=>r.y.isZero()?null:{x:i.x.plus(r.x.div(r.y).times(a.minus(i.y))),y:a},Sr=(i,r,a)=>r.x.isZero()?null:{x:a,y:i.y.plus(r.y.div(r.x).times(a.minus(i.x)))},mu=(i,r,a,u)=>{if(r.x.isZero())return Sr(a,u,i.x);if(u.x.isZero())return Sr(i,r,a.x);if(r.y.isZero())return Ie(a,u,i.y);if(u.y.isZero())return Ie(i,r,a.y);let c=ys(r,u);if(c.isZero())return null;let g={x:a.x.minus(i.x),y:a.y.minus(i.y)},_=ys(g,r).div(c),y=ys(g,u).div(c),w=i.x.plus(y.times(r.x)),M=a.x.plus(_.times(u.x)),N=i.y.plus(y.times(r.y)),O=a.y.plus(_.times(u.y)),et=w.plus(M).div(2),nt=N.plus(O).div(2);return{x:et,y:nt}},Yi=class bp{constructor(r,a){Gt(this,"point");Gt(this,"isLeft");Gt(this,"segment");Gt(this,"otherSE");Gt(this,"consumedBy");r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=a}static compare(r,a){let u=bp.comparePoints(r.point,a.point);return u!==0?u:(r.point!==a.point&&r.link(a),r.isLeft!==a.isLeft?r.isLeft?1:-1:er.compare(r.segment,a.segment))}static comparePoints(r,a){return r.x.isLessThan(a.x)?-1:r.x.isGreaterThan(a.x)?1:r.y.isLessThan(a.y)?-1:r.y.isGreaterThan(a.y)?1:0}link(r){if(r.point===this.point)throw new Error("Tried to link already linked events");let a=r.point.events;for(let u=0,c=a.length;u<c;u++){let g=a[u];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){let r=this.point.events.length;for(let a=0;a<r;a++){let u=this.point.events[a];if(u.segment.consumedBy===void 0)for(let c=a+1;c<r;c++){let g=this.point.events[c];g.consumedBy===void 0&&u.otherSE.point.events===g.otherSE.point.events&&u.segment.consume(g.segment)}}}getAvailableLinkedEvents(){let r=[];for(let a=0,u=this.point.events.length;a<u;a++){let c=this.point.events[a];c!==this&&!c.segment.ringOut&&c.segment.isInResult()&&r.push(c)}return r}getLeftmostComparator(r){let a=new Map,u=c=>{let g=c.otherSE;a.set(c,{sine:pu(this.point,r.point,g.point),cosine:Ma(this.point,r.point,g.point)})};return(c,g)=>{a.has(c)||u(c),a.has(g)||u(g);let{sine:_,cosine:y}=a.get(c),{sine:w,cosine:M}=a.get(g);return _.isGreaterThanOrEqualTo(0)&&w.isGreaterThanOrEqualTo(0)?y.isLessThan(M)?1:y.isGreaterThan(M)?-1:0:_.isLessThan(0)&&w.isLessThan(0)?y.isLessThan(M)?-1:y.isGreaterThan(M)?1:0:w.isLessThan(_)?-1:w.isGreaterThan(_)?1:0}}},gu=0,er=class qa{constructor(r,a,u,c){Gt(this,"id");Gt(this,"leftSE");Gt(this,"rightSE");Gt(this,"rings");Gt(this,"windings");Gt(this,"ringOut");Gt(this,"consumedBy");Gt(this,"prev");Gt(this,"_prevInResult");Gt(this,"_beforeState");Gt(this,"_afterState");Gt(this,"_isInResult");this.id=++gu,this.leftSE=r,r.segment=this,r.otherSE=a,this.rightSE=a,a.segment=this,a.otherSE=r,this.rings=u,this.windings=c}static compare(r,a){let u=r.leftSE.point.x,c=a.leftSE.point.x,g=r.rightSE.point.x,_=a.rightSE.point.x;if(_.isLessThan(u))return 1;if(g.isLessThan(c))return-1;let y=r.leftSE.point.y,w=a.leftSE.point.y,M=r.rightSE.point.y,N=a.rightSE.point.y;if(u.isLessThan(c)){if(w.isLessThan(y)&&w.isLessThan(M))return 1;if(w.isGreaterThan(y)&&w.isGreaterThan(M))return-1;let O=r.comparePoint(a.leftSE.point);if(O<0)return 1;if(O>0)return-1;let et=a.comparePoint(r.rightSE.point);return et!==0?et:-1}if(u.isGreaterThan(c)){if(y.isLessThan(w)&&y.isLessThan(N))return-1;if(y.isGreaterThan(w)&&y.isGreaterThan(N))return 1;let O=a.comparePoint(r.leftSE.point);if(O!==0)return O;let et=r.comparePoint(a.rightSE.point);return et<0?1:et>0?-1:1}if(y.isLessThan(w))return-1;if(y.isGreaterThan(w))return 1;if(g.isLessThan(_)){let O=a.comparePoint(r.rightSE.point);if(O!==0)return O}if(g.isGreaterThan(_)){let O=r.comparePoint(a.rightSE.point);if(O<0)return 1;if(O>0)return-1}if(!g.eq(_)){let O=M.minus(y),et=g.minus(u),nt=N.minus(w),yt=_.minus(c);if(O.isGreaterThan(et)&&nt.isLessThan(yt))return 1;if(O.isLessThan(et)&&nt.isGreaterThan(yt))return-1}return g.isGreaterThan(_)?1:g.isLessThan(_)||M.isLessThan(N)?-1:M.isGreaterThan(N)?1:r.id<a.id?-1:r.id>a.id?1:0}static fromRing(r,a,u){let c,g,_,y=Yi.comparePoints(r,a);if(y<0)c=r,g=a,_=1;else if(y>0)c=a,g=r,_=-1;else throw new Error(`Tried to create degenerate segment at [${r.x}, ${r.y}]`);let w=new Yi(c,!0),M=new Yi(g,!1);return new qa(w,M,[u],[_])}replaceRightSE(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let r=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r.isLessThan(a)?r:a},ur:{x:this.rightSE.point.x,y:r.isGreaterThan(a)?r:a}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(r){return r.x.eq(this.leftSE.point.x)&&r.y.eq(this.leftSE.point.y)||r.x.eq(this.rightSE.point.x)&&r.y.eq(this.rightSE.point.y)}comparePoint(r){return Re.orient(this.leftSE.point,r,this.rightSE.point)}getIntersection(r){let a=this.bbox(),u=r.bbox(),c=ho(a,u);if(c===null)return null;let g=this.leftSE.point,_=this.rightSE.point,y=r.leftSE.point,w=r.rightSE.point,M=Ji(a,y)&&this.comparePoint(y)===0,N=Ji(u,g)&&r.comparePoint(g)===0,O=Ji(a,w)&&this.comparePoint(w)===0,et=Ji(u,_)&&r.comparePoint(_)===0;if(N&&M)return et&&!O?_:!et&&O?w:null;if(N)return O&&g.x.eq(w.x)&&g.y.eq(w.y)?null:g;if(M)return et&&_.x.eq(y.x)&&_.y.eq(y.y)?null:y;if(et&&O)return null;if(et)return _;if(O)return w;let nt=mu(g,this.vector(),y,r.vector());return nt===null||!Ji(c,nt)?null:Re.snap(nt)}split(r){let a=[],u=r.events!==void 0,c=new Yi(r,!0),g=new Yi(r,!1),_=this.rightSE;this.replaceRightSE(g),a.push(g),a.push(c);let y=new qa(c,_,this.rings.slice(),this.windings.slice());return Yi.comparePoints(y.leftSE.point,y.rightSE.point)>0&&y.swapEvents(),Yi.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(c.checkForConsuming(),g.checkForConsuming()),a}swapEvents(){let r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}consume(r){let a=this,u=r;for(;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;let c=qa.compare(a,u);if(c!==0){if(c>0){let g=a;a=u,u=g}if(a.prev===u){let g=a;a=u,u=g}for(let g=0,_=u.rings.length;g<_;g++){let y=u.rings[g],w=u.windings[g],M=a.rings.indexOf(y);M===-1?(a.rings.push(y),a.windings.push(w)):a.windings[M]+=w}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};let a=this._afterState.rings,u=this._afterState.windings,c=this._afterState.multiPolys;for(let y=0,w=this.rings.length;y<w;y++){let M=this.rings[y],N=this.windings[y],O=a.indexOf(M);O===-1?(a.push(M),u.push(N)):u[O]+=N}let g=[],_=[];for(let y=0,w=a.length;y<w;y++){if(u[y]===0)continue;let M=a[y],N=M.poly;if(_.indexOf(N)===-1)if(M.isExterior)g.push(N);else{_.indexOf(N)===-1&&_.push(N);let O=g.indexOf(M.poly);O!==-1&&g.splice(O,1)}}for(let y=0,w=g.length;y<w;y++){let M=g[y].multiPoly;c.indexOf(M)===-1&&c.push(M)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let r=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(Pa.type){case"union":{let u=r.length===0,c=a.length===0;this._isInResult=u!==c;break}case"intersection":{let u,c;r.length<a.length?(u=r.length,c=a.length):(u=a.length,c=r.length),this._isInResult=c===Pa.numMultiPolys&&u<c;break}case"xor":{let u=Math.abs(r.length-a.length);this._isInResult=u%2===1;break}case"difference":{let u=c=>c.length===1&&c[0].isSubject;this._isInResult=u(r)!==u(a);break}}return this._isInResult}},co=class{constructor(i,r,a){Gt(this,"poly");Gt(this,"isExterior");Gt(this,"segments");Gt(this,"bbox");if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=a,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let u=Re.snap({x:new B(i[0][0]),y:new B(i[0][1])});this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let c=u;for(let g=1,_=i.length;g<_;g++){if(typeof i[g][0]!="number"||typeof i[g][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let y=Re.snap({x:new B(i[g][0]),y:new B(i[g][1])});y.x.eq(c.x)&&y.y.eq(c.y)||(this.segments.push(er.fromRing(c,y,this)),y.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=y.x),y.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=y.y),y.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=y.x),y.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=y.y),c=y)}(!u.x.eq(c.x)||!u.y.eq(c.y))&&this.segments.push(er.fromRing(c,u,this))}getSweepEvents(){let i=[];for(let r=0,a=this.segments.length;r<a;r++){let u=this.segments[r];i.push(u.leftSE),i.push(u.rightSE)}return i}},_u=class{constructor(i,r){Gt(this,"multiPoly");Gt(this,"exteriorRing");Gt(this,"interiorRings");Gt(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new co(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let a=1,u=i.length;a<u;a++){let c=new co(i[a],this,!1);c.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=c.bbox.ll.x),c.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=c.bbox.ll.y),c.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=c.bbox.ur.x),c.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=c.bbox.ur.y),this.interiorRings.push(c)}this.multiPoly=r}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let r=0,a=this.interiorRings.length;r<a;r++){let u=this.interiorRings[r].getSweepEvents();for(let c=0,g=u.length;c<g;c++)i.push(u[c])}return i}},Fh=class{constructor(i,r){Gt(this,"isSubject");Gt(this,"polys");Gt(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new B(Number.POSITIVE_INFINITY),y:new B(Number.POSITIVE_INFINITY)},ur:{x:new B(Number.NEGATIVE_INFINITY),y:new B(Number.NEGATIVE_INFINITY)}};for(let a=0,u=i.length;a<u;a++){let c=new _u(i[a],this);c.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=c.bbox.ll.x),c.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=c.bbox.ll.y),c.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=c.bbox.ur.x),c.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=c.bbox.ur.y),this.polys.push(c)}this.isSubject=r}getSweepEvents(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getSweepEvents();for(let c=0,g=u.length;c<g;c++)i.push(u[c])}return i}},kp=class uh{constructor(r){Gt(this,"events");Gt(this,"poly");Gt(this,"_isExteriorRing");Gt(this,"_enclosingRing");this.events=r;for(let a=0,u=r.length;a<u;a++)r[a].segment.ringOut=this;this.poly=null}static factory(r){let a=[];for(let u=0,c=r.length;u<c;u++){let g=r[u];if(!g.isInResult()||g.ringOut)continue;let _=null,y=g.leftSE,w=g.rightSE,M=[y],N=y.point,O=[];for(;_=y,y=w,M.push(y),y.point!==N;)for(;;){let et=y.getAvailableLinkedEvents();if(et.length===0){let Bt=M[0].point,Ot=M[M.length-1].point;throw new Error(`Unable to complete output ring starting at [${Bt.x}, ${Bt.y}]. Last matching segment found ends at [${Ot.x}, ${Ot.y}].`)}if(et.length===1){w=et[0].otherSE;break}let nt=null;for(let Bt=0,Ot=O.length;Bt<Ot;Bt++)if(O[Bt].point===y.point){nt=Bt;break}if(nt!==null){let Bt=O.splice(nt)[0],Ot=M.splice(Bt.index);Ot.unshift(Ot[0].otherSE),a.push(new uh(Ot.reverse()));continue}O.push({index:M.length,point:y.point});let yt=y.getLeftmostComparator(_);w=et.sort(yt)[0].otherSE;break}a.push(new uh(M))}return a}getGeom(){let r=this.events[0].point,a=[r];for(let M=1,N=this.events.length-1;M<N;M++){let O=this.events[M].point,et=this.events[M+1].point;Re.orient(O,r,et)!==0&&(a.push(O),r=O)}if(a.length===1)return null;let u=a[0],c=a[1];Re.orient(u,r,c)===0&&a.shift(),a.push(a[0]);let g=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:a.length-1,y=this.isExteriorRing()?a.length:-1,w=[];for(let M=_;M!=y;M+=g)w.push([a[M].x.toNumber(),a[M].y.toNumber()]);return w}isExteriorRing(){if(this._isExteriorRing===void 0){let r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var c,g;let r=this.events[0];for(let _=1,y=this.events.length;_<y;_++){let w=this.events[_];Yi.compare(r,w)>0&&(r=w)}let a=r.segment.prevInResult(),u=a?a.prevInResult():null;for(;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return((c=u.ringOut)==null?void 0:c.enclosingRing())!==a.ringOut?a.ringOut:(g=a.ringOut)==null?void 0:g.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}},Ih=class{constructor(i){Gt(this,"exteriorRing");Gt(this,"interiorRings");this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let r=[i];for(let a=0,u=this.interiorRings.length;a<u;a++){let c=this.interiorRings[a].getGeom();c!==null&&r.push(c)}return r}},Mp=class{constructor(i){Gt(this,"rings");Gt(this,"polys");this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getGeom();u!==null&&i.push(u)}return i}_composePolys(i){var a;let r=[];for(let u=0,c=i.length;u<c;u++){let g=i[u];if(!g.poly)if(g.isExteriorRing())r.push(new Ih(g));else{let _=g.enclosingRing();_!=null&&_.poly||r.push(new Ih(_)),(a=_==null?void 0:_.poly)==null||a.addInterior(g)}}return r}},Pp=class{constructor(i,r=er.compare){Gt(this,"queue");Gt(this,"tree");Gt(this,"segments");this.queue=i,this.tree=new gt(r),this.segments=[]}process(i){let r=i.segment,a=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(r),a;i.isLeft&&this.tree.add(r);let u=r,c=r;do u=this.tree.lastBefore(u);while(u!=null&&u.consumedBy!=null);do c=this.tree.firstAfter(c);while(c!=null&&c.consumedBy!=null);if(i.isLeft){let g=null;if(u){let y=u.getIntersection(r);if(y!==null&&(r.isAnEndpoint(y)||(g=y),!u.isAnEndpoint(y))){let w=this._splitSafely(u,y);for(let M=0,N=w.length;M<N;M++)a.push(w[M])}}let _=null;if(c){let y=c.getIntersection(r);if(y!==null&&(r.isAnEndpoint(y)||(_=y),!c.isAnEndpoint(y))){let w=this._splitSafely(c,y);for(let M=0,N=w.length;M<N;M++)a.push(w[M])}}if(g!==null||_!==null){let y=null;g===null?y=_:_===null?y=g:y=Yi.comparePoints(g,_)<=0?g:_,this.queue.delete(r.rightSE),a.push(r.rightSE);let w=r.split(y);for(let M=0,N=w.length;M<N;M++)a.push(w[M])}a.length>0?(this.tree.delete(r),a.push(i)):(this.segments.push(r),r.prev=u)}else{if(u&&c){let g=u.getIntersection(c);if(g!==null){if(!u.isAnEndpoint(g)){let _=this._splitSafely(u,g);for(let y=0,w=_.length;y<w;y++)a.push(_[y])}if(!c.isAnEndpoint(g)){let _=this._splitSafely(c,g);for(let y=0,w=_.length;y<w;y++)a.push(_[y])}}}this.tree.delete(r)}return a}_splitSafely(i,r){this.tree.delete(i);let a=i.rightSE;this.queue.delete(a);let u=i.split(r);return u.push(a),i.consumedBy===void 0&&this.tree.add(i),u}},Bp=class{constructor(){Gt(this,"type");Gt(this,"numMultiPolys")}run(i,r,a){fo.type=i;let u=[new Fh(r,!0)];for(let w=0,M=a.length;w<M;w++)u.push(new Fh(a[w],!1));if(fo.numMultiPolys=u.length,fo.type==="difference"){let w=u[0],M=1;for(;M<u.length;)ho(u[M].bbox,w.bbox)!==null?M++:u.splice(M,1)}if(fo.type==="intersection")for(let w=0,M=u.length;w<M;w++){let N=u[w];for(let O=w+1,et=u.length;O<et;O++)if(ho(N.bbox,u[O].bbox)===null)return[]}let c=new gt(Yi.compare);for(let w=0,M=u.length;w<M;w++){let N=u[w].getSweepEvents();for(let O=0,et=N.length;O<et;O++)c.add(N[O])}let g=new Pp(c),_=null;for(c.size!=0&&(_=c.first(),c.delete(_));_;){let w=g.process(_);for(let M=0,N=w.length;M<N;M++){let O=w[M];O.consumedBy===void 0&&c.add(O)}c.size!=0?(_=c.first(),c.delete(_)):_=null}Re.reset();let y=kp.factory(g.segments);return new Mp(y).getGeom()}},fo=new Bp,Pa=fo,Sp=(i,...r)=>Pa.run("intersection",i,r),Ap=(i,...r)=>Pa.run("difference",i,r);Re.set;function Ba(i){let r={type:"Feature"};return r.geometry=i,r}function Sa(i){return i.type==="Feature"?i.geometry:i}function Nh(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function Tp(i){return Ba({type:"LineString",coordinates:i})}function Dp(i){return Ba({type:"MultiLineString",coordinates:i})}function zh(i){return Ba({type:"Polygon",coordinates:i})}function jh(i){return Ba({type:"MultiPolygon",coordinates:i})}function Rp(i,r){let a=Sa(i),u=Sa(r),c=Sp(a.coordinates,u.coordinates);return c.length===0?null:c.length===1?zh(c[0]):jh(c)}function Op(i,r){let a=Sa(i),u=Sa(r),c=Ap(a.coordinates,u.coordinates);return c.length===0?null:c.length===1?zh(c[0]):jh(c)}function Uh(i){return Array.isArray(i)?1+Uh(i[0]):-1}function Fp(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let r=Nh(i),a=Uh(r),u=[];return a>1?r.forEach(c=>{u.push(Tp(c))}):u.push(i),u}function Ip(i){let r=[];return i.eachLayer(a=>{r.push(Nh(a.toGeoJSON(15)))}),Dp(r)}Je.Cut=Je.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:u,originalLayer:c})=>{this._fireCut(c,u,c),this._fireCut(this._map,u,c),c.pm._fireEdit()}),this._editedLayers=[];let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},cut(i){let r=this._map._layers,a=i._latlngInfos||[];Object.keys(r).map(u=>r[u]).filter(u=>u.pm).filter(u=>!u._pmTempLayer).filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1).filter(u=>u instanceof L.Polyline).filter(u=>u!==i).filter(u=>u.pm.options.allowCutting).filter(u=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(u)>-1:!0).filter(u=>!this._layerGroup.hasLayer(u)).filter(u=>{try{let c=!!Ki(i.toGeoJSON(15),u.toGeoJSON(15)).features.length>0;return c||u instanceof L.Polyline&&!(u instanceof L.Polygon)?c:!!Rp(i.toGeoJSON(15),u.toGeoJSON(15))}catch{return u instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(u=>{let c;if(u instanceof L.Polygon){c=L.polygon(u.getLatLngs());let w=c.getLatLngs();a.forEach(M=>{if(M&&M.snapInfo){let{latlng:N}=M,O=this._calcClosestLayer(N,[c]);if(O&&O.segment&&O.distance<this.options.snapDistance){let{segment:et}=O;if(et&&et.length===2){let{indexPath:nt,parentPath:yt,newIndex:Bt}=L.PM.Utils._getIndexFromSegment(w,et);(nt.length>1?(0,on.default)(w,yt):w).splice(Bt,0,N)}}}})}else c=u;let g=this._cutLayer(i,c),_=L.geoJSON(g,u.options);_.getLayers().length===1&&([_]=_.getLayers()),this._setPane(_,"layerPane");let y=_.addTo(this._map.pm._getContainingLayer());if(y.pm.enable(u.pm.options),y.pm.disable(),u._pmTempLayer=!0,i._pmTempLayer=!0,u.remove(),u.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),y.getLayers&&y.getLayers().length===0&&this._map.pm.removeLayer({target:y}),y instanceof L.LayerGroup?(y.eachLayer(w=>{this._addDrawnLayerProp(w)}),this._addDrawnLayerProp(y)):this._addDrawnLayerProp(y),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let w=this.options.layersToCut.indexOf(u);w>-1&&this.options.layersToCut.splice(w,1)}this._editedLayers.push({layer:y,originalLayer:u})})},_cutLayer(i,r){let a=L.geoJSON(),u;if(r instanceof L.Polygon)u=Op(r.toGeoJSON(15),i.toGeoJSON(15));else{let c=Fp(r);c.forEach(g=>{let _=ou(g,i.toGeoJSON(15)),y;_&&_.features.length>0?y=L.geoJSON(_):y=L.geoJSON(g),y.getLayers().forEach(w=>{lu(i.toGeoJSON(15),w.toGeoJSON(15))||w.addTo(a)})}),c.length>1?u=Ip(a):u=a.toGeoJSON(15)}return u},_change:L.Util.falseFn}),Je.Text=Je.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Xt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var i;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(i=this._hintMarker)==null||i.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}},_createMarker(i){var c,g,_,y;if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(c=this.options.textOptions)==null?void 0:c.className){let w=this.options.textOptions.className.split(" ");this.textArea.classList.add(...w)}let a=this._createTextIcon(this.textArea),u=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:a});if(this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm){u.pm.textArea=this.textArea,L.setOptions(u.pm,{removeIfEmpty:((g=this.options.textOptions)==null?void 0:g.removeIfEmpty)??!0});let w=((_=this.options.textOptions)==null?void 0:_.focusAfterDraw)??!0;u.pm._createTextMarker(w),(y=this.options.textOptions)!=null&&y.text&&u.pm.setText(this.options.textOptions.text)}this._fireCreate(u),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var Np={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ni(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(ni(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ni(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(ni(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseDown(a),!1},_simulateMouseMoveEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseMove(a),!1},_simulateMouseUpEvent(i){let r={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(r.containerPoint=this._map.mouseEventToContainerPoint(i),r.latlng=this._map.containerPointToLatLng(r.containerPoint)),this._dragMixinOnMouseUp(r),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let r=i._fromLayerSync,a=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!r&&!a?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let u="resizeableCircleMarker";this._layer instanceof L.Circle&&(u="resizeableCircle"),this.options.snappable&&!r&&!a?this._layer.pm.options[u]||this._initSnappableMarkersDrag():this._layer.pm.options[u]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let r=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(r,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:r}=i,a={lat:r.lat-this._tempDragCoord.lat,lng:r.lng-this._tempDragCoord.lng},u=c=>c.map(g=>{if(Array.isArray(g))return u(g);let _={lat:g.lat+a.lat,lng:g.lng+a.lng};return(g.alt||g.alt===0)&&(_.alt=g.alt),_});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let c=u([this._layer.getLatLng()]);this._layer.setLatLng(c[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let c=this._layer.getLatLng();this._layer._snapped&&(c=this._layer._orgLatLng);let g=u([c]);this._layer.setLatLng(g[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let c=u([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(c),this._fireChange(this._layer.getBounds(),"Edit")}else{let c=u(this._layer.getLatLngs());this._layer.setLatLngs(c),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=r,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,r){if(this.enabled())return!1;if(!r._fromLayerSync&&this._layer===r.target&&this.options.syncLayersOnDrag){r._fromLayerSync=!0;let a=[];if(L.Util.isArray(this.options.syncLayersOnDrag))a=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(u=>{u instanceof L.LayerGroup&&(a=a.concat(u.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let u in this._parentLayerGroup){let c=this._parentLayerGroup[u];c.pm&&(a=c.pm.getLayers(!0))}return L.Util.isArray(a)&&a.length>0&&(a=a.filter(u=>!!u.pm).filter(u=>!!u.pm.options.draggable),a.forEach(u=>{u!==this._layer&&u.pm[i]&&(u._snapped=!1,u.pm[i](r))})),a.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},zp=Np,jp=x(fn());function Up(i,r,a,u){return a.unproject(r.transform(a.project(i,u)),u)}function Gh(i,r,a){let u=a.getMaxZoom();if(u===1/0&&(u=a.getZoom()),L.Util.isArray(i)){let c=[];return i.forEach(g=>{c.push(Gh(g,r,a))}),c}return i instanceof L.LatLng?Up(i,r,a,u):null}function vs(i,r){r instanceof L.Layer&&(r=r.getLatLng());let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.project(r,a)}function Aa(i,r){let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.unproject(r,a)}var Gp={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=vs(this._map,this._rotationOriginLatLng),this._rotationStartPoint=vs(this._map,i.target.getLatLng()),this._initialRotateLatLng=$i(this._layer),this._startAngle=this.getAngle();let r=$i(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,r),this._fireRotationStart(this._map,r)},_onRotate(i){let r=vs(this._map,i.target.getLatLng()),a=this._rotationStartPoint,u=this._rotationOriginPoint,c=Math.atan2(r.y-u.y,r.x-u.x)-Math.atan2(a.y-u.y,a.x-u.x);this._layer.setLatLngs(this._rotateLayer(c,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let g=this;function _(N,O=[],et=-1){if(et>-1&&O.push(et),L.Util.isArray(N[0]))N.forEach((nt,yt)=>_(nt,O.slice(),yt));else{let nt=O.length>0?(0,jp.default)(g._markers,O):g._markers[0];N.forEach((yt,Bt)=>{nt[Bt].setLatLng(yt)})}}_(this._layer.getLatLngs());let y=$i(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(c,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let w=c*180/Math.PI;w=w<0?w+360:w;let M=w+this._startAngle;this._setAngle(M),this._rotationLayer.pm._setAngle(M),this._fireRotation(this._rotationLayer,w,y),this._fireRotation(this._map,w,y),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let r=$i(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=$i(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,r),this._fireRotationEnd(this._map,i,r),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,r,a,u,c){let g=vs(c,a);return this._matrix=u.clone().rotate(i,g).flip(),Gh(r,this._matrix,c)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),r=i.getCenter();return i.removeFrom(this._layer._map),r},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(ts(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=$i(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let r=this.getAngle(),a=this._layer.getLatLngs(),u=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(u,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(u,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let c=this.getAngle()-r;c=c<0?c+360:c,this._startAngle=r,this._fireRotation(this._layer,c,a,this._layer),this._fireRotation(this._map||this._layer._map,c,a,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let r=i-this.getAngle();this.rotateLayer(r)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},Vp=Gp,Hp=L.Class.extend({includes:[zp,to,Vp,Xr],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,r){let a=r.target,u={layer:this._layer,marker:a,event:r},c="";return i==="move"?c="moveVertexValidation":i==="add"?c="addVertexValidation":i==="remove"&&(c="removeVertexValidation"),this.options[c]&&typeof this.options[c]=="function"&&!this.options[c](u)?(i==="move"&&(a._cancelDragEventChain=a.getLatLng()),!1):(a._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),ii=Hp;ii.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(u=>this._initLayer(u));let r=u=>{if(u.layer._pmTempLayer)return;this._layers=this.getLayers();let c=this._layers.filter(g=>!g.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in g.pm._parentLayerGroup));c.forEach(g=>{this._initLayer(g)}),c.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(r,100,this),this),this._layerGroup.on("layerremove",u=>{this._removeLayerFromGroup(u.target)},this);let a=u=>{u.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(a,100,this),this)},enable(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.enable(i,r)):a.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(r=>{r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1&&(i.push(r._leaflet_id),r.pm.disable(i)):r.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(r=>r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1?(i.push(r._leaflet_id),r.pm.enabled(i)):!1:r.pm.enabled())},toggleEdit(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.toggleEdit(i,r)):a.pm.toggleEdit(i)})},_initLayer(i){let r=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[r]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let r=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[r]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var i;return this._map||((i=this._layers.find(r=>!!r._map))==null?void 0:i._map)||null},getLayers(i=!1,r=!0,a=!0,u=[]){let c=[];return i?this._layerGroup.getLayers().forEach(g=>{c.push(g),g instanceof L.LayerGroup&&u.indexOf(g._leaflet_id)===-1&&(u.push(g._leaflet_id),c=c.concat(g.pm.getLayers(!0,!0,!0,u)))}):c=this._layerGroup.getLayers(),a&&(c=c.filter(g=>!(g instanceof L.LayerGroup))),r&&(c=c.filter(g=>!!g.pm),c=c.filter(g=>!g._pmTempLayer),c=c.filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)),c},setOptions(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(a=>{a.pm&&(a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.setOptions(i,r)):a.pm.setOptions(i))})}}),ii.Marker=ii.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let r=i.target;r.remove(),this._fireRemove(r),this._fireRemove(this._map,r)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var ir=x(fn()),Zp={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((r,a,u)=>u.indexOf(r)===a)},_removeFromCache(i){let r=this.markerCache.indexOf(i);r>-1&&this.markerCache.splice(r,1)},renderLimits(i){this.markerCache.forEach(r=>{i.includes(r)?this._markerGroup.addLayer(r):this._markerGroup.removeLayer(r)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let r=[...this._filterClosestMarkers(i)];this.renderLimits(r)},_filterClosestMarkers(i){let r=[...this.markerCache],a=this.options.limitMarkersToCount;return a===-1?r:(r.sort((u,c)=>{let g=u._latlng.distanceTo(i),_=c._latlng.distanceTo(i);return g-_}),r.filter((u,c)=>a>-1?c<a:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},$p=Zp;ii.Line=ii.extend({includes:[$p],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,r=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let a=u=>{if(Array.isArray(u[0]))return u.map(a,this);let c=u.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&u.map((g,_)=>{let y=this.isPolygon()?(_+1)%u.length:_+1;return this._createMiddleMarker(c[_],c[y])}),c};this._markers=a(r),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this.options.rotate?(r.on("dragstart",this._onRotateStart,this),r.on("drag",this._onRotate,this),r.on("dragend",this._onRotateEnd,this)):(r.on("click",this._onVertexClick,this),r.on("dragstart",this._onMarkerDragStart,this),r.on("move",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(r),r},_createMiddleMarker(i,r){if(!i||!r)return!1;let a=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),r.getLatLng()),u=this._createMarker(a),c=L.divIcon({className:"marker-icon marker-icon-middle"});return u.setIcon(c),u.leftM=i,u.rightM=r,i._middleMarkerNext=u,r._middleMarkerPrev=u,u.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),u.on("movestart",this._onMiddleMarkerMoveStart,this),u},_onMiddleMarkerClick(i){let r=i.target;if(!this._vertexValidation("add",i))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMoveStart(i){let r=i.target;if(r.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){r.on("move",this._onMiddleMarkerMovePrevent,this);return}r._dragging=!0,this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMovePrevent(i){let r=i.target;this._vertexValidationDrag(r)},_onMiddleMarkerMoveEnd(i){let r=i.target;if(r.off("move",this._onMiddleMarkerMovePrevent,this),r.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(r))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),setTimeout(()=>{delete r._dragging},100)},_addMarker(i,r,a){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let u=i.getLatLng(),c=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:g,index:_,parentPath:y}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),w=g.length>1?(0,ir.default)(c,y):c,M=g.length>1?(0,ir.default)(this._markers,y):this._markers;w.splice(_+1,0,u),M.splice(_+1,0,i),this._layer.setLatLngs(c),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(r,i),this._createMiddleMarker(i,a)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,u),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return is(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let r=this._layer,a,u;if(this.options.allowSelfIntersection?a=!1:(u=is(this._layer.toGeoJSON(15)),a=u.features.length>0),a){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return a;i?this._flashLayer():(r.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(u)}else r.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return a},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,r){i.forEach(a=>{Array.isArray(a)?this._updateDisabledMarkerStyle(a,r):a._icon&&(r&&!this._checkMarkerAllowedToDrag(a)?L.DomUtil.addClass(a._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(a._icon,"vertexmarker-disabled"))})},_removeMarker(i){let r=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=$i(this._layer,this._layer.getLatLngs()));let a=this._layer.getLatLngs(),{indexPath:u,index:c,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!u)return;let _=u.length>1?(0,ir.default)(a,g):a,y=u.length>1?(0,ir.default)(this._markers,g):this._markers,w=g[g.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!w&&(_.length<=2||this.isPolygon()&&_.length<=3)){this._flashLayer();return}_.splice(c,1),this._layer.setLatLngs(a),this.isPolygon()&&_.length<=2&&_.splice(0,_.length);let M=!1;if(_.length<=1&&(_.splice(0,_.length),g.length>1&&u.length>1&&(a=xr(a)),this._layer.setLatLngs(a),this._initMarkers(),M=!0),Tn(a)||this._layer.remove(),a=xr(a),this._layer.setLatLngs(a),this._markers=xr(this._markers),!M&&(y=u.length>1?(0,ir.default)(this._markers,g):this._markers,r._middleMarkerPrev&&(this._markerGroup.removeLayer(r._middleMarkerPrev),this._removeFromCache(r._middleMarkerPrev)),r._middleMarkerNext&&(this._markerGroup.removeLayer(r._middleMarkerNext),this._removeFromCache(r._middleMarkerNext)),this._markerGroup.removeLayer(r),this._removeFromCache(r),y)){let N,O;if(this.isPolygon()?(N=(c+1)%y.length,O=(c+(y.length-1))%y.length):(O=c-1<0?void 0:c-1,N=c+1>=y.length?void 0:c+1),N!==O){let et=y[O],nt=y[N];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(et,nt)}y.splice(c,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let r=this._layer.getLatLngs(),a=i.getLatLng(),{indexPath:u,index:c,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(u.length>1?(0,ir.default)(r,g):r).splice(c,1,a),this._layer.setLatLngs(r)},_getNeighborMarkers(i){let{indexPath:r,index:a,parentPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),c=r.length>1?(0,ir.default)(this._markers,u):this._markers,g=(a+1)%c.length,_=(a+(c.length-1))%c.length,y=c[_],w=c[g];return{prevMarker:y,nextMarker:w}},_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),c=L.polyline([i.getLatLng(),a.getLatLng()]),g=Ki(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=Ki(this._layer.toGeoJSON(15),c.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?_+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&_<=2)},_onMarkerDragStart(i){let r=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,a),this.options.allowSelfIntersection||(this._coordsBeforeEdit=$i(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(r):this._markerAllowedToDrag=null},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r))return;let{indexPath:a,index:u,parentPath:c}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!a)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(r);let g=a.length>1?(0,ir.default)(this._markers,c):this._markers,_=(u+1)%g.length,y=(u+(g.length-1))%g.length,w=r.getLatLng(),M=g[y].getLatLng(),N=g[_].getLatLng();if(r._middleMarkerNext){let O=L.PM.Utils.calcMiddleLatLng(this._map,w,N);r._middleMarkerNext.setLatLng(O)}if(r._middleMarkerPrev){let O=L.PM.Utils.calcMiddleLatLng(this._map,w,M);r._middleMarkerPrev.setLatLng(O)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),u=!this.options.allowSelfIntersection&&this.hasSelfIntersection();u&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(u=!1);let c=!this.options.allowSelfIntersection&&u;if(this._fireMarkerDragEnd(i,a,c),c){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,a);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let r=i.target;if(r._dragging)return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireVertexClick(i,a)}}),ii.Polygon=ii.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),c=L.polyline([i.getLatLng(),a.getLatLng()]),g=Ki(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=Ki(this._layer.toGeoJSON(15),c.toGeoJSON(15)).features.length;return!(g<=2&&_<=2)}}),ii.Rectangle=ii.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((a,u)=>{let c=this._cornerMarkers.find(g=>g._index===u);c&&c.setLatLng(a)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,r){let a=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=i,a._index=r,a._pmTempLayer=!0,a.on("click",this._onVertexClick,this),this._markerGroup.addLayer(a),a},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let r=i.target,a=this._cornerMarkers;r._oppositeCornerLatLng=a.find(c=>c._index===(r._index+2)%4).getLatLng(),r._snapped=!1;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,u)},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r)||r._index===void 0)return;this._adjustRectangleForMarkerMove(r);let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;this._cornerMarkers.forEach(u=>{delete u._oppositeCornerLatLng});let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragEnd(i,a),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let r=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(r),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let r=this._layer.getLatLngs()[0];if(r&&r.length!==4&&r.length>0)r.forEach((a,u)=>{this._cornerMarkers[u].setLatLng(a)}),this._cornerMarkers.slice(r.length).forEach(a=>{a.setLatLng(r[0])});else if(!r||!r.length)console.error("The layer has no LatLngs");else{let a=r.findIndex(u=>i.getLatLng().equals(u));a>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(r[(a+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(r[(a+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(r[(a+3)%4])):this._cornerMarkers.forEach(u=>{u.setLatLng(r[u._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(ts(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),ii.CircleMarker=ii.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let r=this._layer.getLatLng(),a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._centerMarker=this._createCenterMarker(r),this._outerMarker=this._createOuterMarker(u),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,r){let a=this._map.project(i),u=L.point(a.x+r,a.y);return this._map.unproject(u)},_createHintLine(i,r){let a=i.getLatLng(),u=r.getLatLng();this._hintline=L.polyline([a,u],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let r=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(r._icon,"leaflet-pm-draggable"),r.on("move",this._moveCircle,this)):r.dragging.disable(),r},_createOuterMarker(i){let r=this._createMarker(i);return r.on("drag",this._resizeCircle,this),r},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=i,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("click",this._onVertexClick,this),this._helperLayers.addLayer(r),r},_moveCircle(i){if(i.target._cancelDragEventChain)return;let r=this._centerMarker.getLatLng();this._layer.setLatLng(r);let a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._outerMarker._latlng=u,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(i,r);this._outerMarker.setLatLng(a),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,r])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let r=i.target;r instanceof L.Marker&&!this._vertexValidationDrag(r)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let r=i.target;this._vertexValidationDragEnd(r)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let r=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),a=L.circle(this._layer.getLatLng(),this._layer.options);a.setRadius(r);let u=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(a,200,!u).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(a,200,!u),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);return this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?r=es(this._map,i,r,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(r=es(this._map,i,r,this._getMaxDistanceInMeter(i))),r},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),ii.Circle=ii.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,r){return this._map.distance(i,r)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),ii.ImageOverlay=ii.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),r=i.getNorthWest(),a=i.getNorthEast(),u=i.getSouthEast(),c=i.getSouthWest();return[r,a,u,c]}}),ii.Text=ii.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,r=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${r}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let r=this._hasFocus;this._hasFocus=i.type==="focus",!r!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let r=this.options.className.split(" ");this.textArea.classList.add(...r)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var yu=function(i,r,a,u,c,g){this._matrix=[i,r,a,u,c,g]};yu.init=()=>new L.PM.Matrix(1,0,0,1,0,0),yu.prototype={transform(i){return this._transform(i.clone())},_transform(i){let r=this._matrix,{x:a,y:u}=i;return i.x=r[0]*a+r[1]*u+r[4],i.y=r[2]*a+r[3]*u+r[5],i},untransform(i){let r=this._matrix;return new L.Point((i.x/r[0]-r[4])/r[0],(i.y/r[2]-r[5])/r[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let r,a;return typeof i=="number"?(r=i,a=i):(r=i.x,a=i.y),this._add(1,0,0,1,r,a)},scale(i,r){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let a,u;return r=r||L.point(0,0),typeof i=="number"?(a=i,u=i):(a=i.x,u=i.y),this._add(a,0,0,u,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},rotate(i,r){let a=Math.cos(i),u=Math.sin(i);return r=r||new L.Point(0,0),this._add(a,u,-u,a,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,r,a,u,c,g){let _=[[],[],[]],y=this._matrix,w=[[y[0],y[2],y[4]],[y[1],y[3],y[5]],[0,0,1]],M=[[i,a,c],[r,u,g],[0,0,1]],N;i&&i instanceof L.PM.Matrix&&(y=i._matrix,M=[[y[0],y[2],y[4]],[y[1],y[3],y[5]],[0,0,1]]);for(let O=0;O<3;O+=1)for(let et=0;et<3;et+=1){N=0;for(let nt=0;nt<3;nt+=1)N+=w[O][nt]*M[nt][et];_[O][et]=N}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};var qp=yu,Kp={calcMiddleLatLng(i,r,a){let u=i.project(r),c=i.project(a);return i.unproject(u._add(c)._divideBy(2))},findLayers(i){let r=[];return i.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&r.push(a)}),r=r.filter(a=>!!a.pm),r=r.filter(a=>!a._pmTempLayer),r=r.filter(a=>!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1),r},circleToPolygon(i,r=60,a=!0){let u=i.getLatLng(),c=i.getRadius(),g=Qr(u,c,r,0,a),_=[];for(let y=0;y<g.length;y+=1){let w=[g[y].lat,g[y].lng];_.push(w)}return L.polygon(_,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,r,a,u=!1){i.fire(r,a,u);let{groups:c}=this.getAllParentGroups(i);c.forEach(g=>{g.fire(r,a,u)})},getAllParentGroups(i){let r=[],a=[],u=c=>{for(let g in c._eventParents)if(r.indexOf(g)===-1){r.push(g);let _=c._eventParents[g];a.push(_),u(_)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(u(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:a,groupIds:r},{groupIds:r,groups:a}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Qr,getTranslation:Xt,findDeepCoordIndex(i,r,a=!0){let u,c=_=>(y,w)=>{let M=_.concat(w);if(a){if(y.lat&&y.lat===r.lat&&y.lng===r.lng)return u=M,!0}else if(y.lat&&L.latLng(y).equals(r))return u=M,!0;return Array.isArray(y)&&y.some(c(M))};i.some(c([]));let g={};return u&&(g={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),g},findDeepMarkerIndex(i,r){let a,u=g=>(_,y)=>{let w=g.concat(y);return _._leaflet_id===r._leaflet_id?(a=w,!0):Array.isArray(_)&&_.some(u(w))};i.some(u([]));let c={};return a&&(c={indexPath:a,index:a[a.length-1],parentPath:a.slice(0,a.length-1)}),c},_getIndexFromSegment(i,r){if(r&&r.length===2){let a=this.findDeepCoordIndex(i,r[0]),u=this.findDeepCoordIndex(i,r[1]),c=Math.max(a.index,u.index);return(a.index===0||u.index===0)&&c!==1&&(c+=1),{indexA:a,indexB:u,newIndex:c,indexPath:a.indexPath,parentPath:a.parentPath}}return null},_getRotatedRectangle(i,r,a,u){let c=vs(u,i),g=vs(u,r),_=a*Math.PI/180,y=Math.cos(_),w=Math.sin(_),M=(g.x-c.x)*y+(g.y-c.y)*w,N=(g.y-c.y)*y-(g.x-c.x)*w,O=M*y+c.x,et=M*w+c.y,nt=-N*w+c.x,yt=N*y+c.y,Bt=Aa(u,c),Ot=Aa(u,{x:O,y:et}),de=Aa(u,g),I=Aa(u,{x:nt,y:yt});return[Bt,Ot,de,I]},pxRadiusToMeterRadius(i,r,a){let u=r.project(a),c=L.point(u.x+i,u.y);return r.distance(r.unproject(c),a)}},Wp=Kp;L.PM=L.PM||{version:Us.version,Map:pa,Toolbar:Qs,Draw:Je,Edit:ii,Utils:Wp,Matrix:qp,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(r);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(a);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(u);function c(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(c);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(_);function y(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(y);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(w)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(r=>{this.reInitLayer(r)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let r=this._map.mouseEventToLayerPoint(i),a,u;for(let c=this._drawFirst;c;c=c.next)a=c.layer,a.options.interactive&&a._containsPoint(r)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);u&&(L.DomEvent.fakeStop(i),this._fireEvent([u],i))}}),L.PM.initialize()})();var Di=63710088e-1,Nb={centimeters:Di*100,centimetres:Di*100,degrees:Di/111325,feet:Di*3.28084,inches:Di*39.37,kilometers:Di/1e3,kilometres:Di/1e3,meters:Di,metres:Di,miles:Di/1609.344,millimeters:Di*1e3,millimetres:Di*1e3,nauticalmiles:Di/1852,radians:1,yards:Di*1.0936};function sl(t,n,o){o===void 0&&(o={});var l={type:"Feature"};return(o.id===0||o.id)&&(l.id=o.id),o.bbox&&(l.bbox=o.bbox),l.properties=n||{},l.geometry=t,l}function zb(t,n,o){o===void 0&&(o={});for(var l=0,f=t;l<f.length;l++){var p=f[l];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var d=0;d<p[p.length-1].length;d++)if(p[p.length-1][d]!==p[0][d])throw new Error("First and last Position are not equivalent.")}var b={type:"Polygon",coordinates:t};return sl(b,n,o)}function hh(t,n,o){if(o===void 0&&(o={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var l={type:"LineString",coordinates:t};return sl(l,n,o)}function jb(t,n){n===void 0&&(n="kilometers");var o=Nb[n];if(!o)throw new Error(n+" units is invalid");return t*o}function Fa(t){var n=t%360;return n*Math.PI/180}function Lp(t,n,o){if(t!==null)for(var l,f,p,d,b,x,P,E=0,k=0,F,j=t.type,q=j==="FeatureCollection",J=j==="Feature",st=q?t.features.length:1,pt=0;pt<st;pt++){P=q?t.features[pt].geometry:J?t.geometry:t,F=P?P.type==="GeometryCollection":!1,b=F?P.geometries.length:1;for(var bt=0;bt<b;bt++){var ft=0,xt=0;if(d=F?P.geometries[bt]:P,d!==null){x=d.coordinates;var St=d.type;switch(E=0,St){case null:break;case"Point":if(n(x,k,pt,ft,xt)===!1)return!1;k++,ft++;break;case"LineString":case"MultiPoint":for(l=0;l<x.length;l++){if(n(x[l],k,pt,ft,xt)===!1)return!1;k++,St==="MultiPoint"&&ft++}St==="LineString"&&ft++;break;case"Polygon":case"MultiLineString":for(l=0;l<x.length;l++){for(f=0;f<x[l].length-E;f++){if(n(x[l][f],k,pt,ft,xt)===!1)return!1;k++}St==="MultiLineString"&&ft++,St==="Polygon"&&xt++}St==="Polygon"&&ft++;break;case"MultiPolygon":for(l=0;l<x.length;l++){for(xt=0,f=0;f<x[l].length;f++){for(p=0;p<x[l][f].length-E;p++){if(n(x[l][f][p],k,pt,ft,xt)===!1)return!1;k++}xt++}ft++}break;case"GeometryCollection":for(l=0;l<d.geometries.length;l++)if(Lp(d.geometries[l],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function xp(t,n){var o,l,f,p,d,b,x,P,E,k,F=0,j=t.type==="FeatureCollection",q=t.type==="Feature",J=j?t.features.length:1;for(o=0;o<J;o++){for(b=j?t.features[o].geometry:q?t.geometry:t,P=j?t.features[o].properties:q?t.properties:{},E=j?t.features[o].bbox:q?t.bbox:void 0,k=j?t.features[o].id:q?t.id:void 0,x=b?b.type==="GeometryCollection":!1,d=x?b.geometries.length:1,f=0;f<d;f++){if(p=x?b.geometries[f]:b,p===null){if(n(null,F,P,E,k)===!1)return!1;continue}switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(p,F,P,E,k)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<p.geometries.length;l++)if(n(p.geometries[l],F,P,E,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}F++}}function Ub(t,n,o){var l=o;return xp(t,function(f,p,d,b,x){l=n(l,f,p,d,b,x)}),l}function Gb(t,n){xp(t,function(o,l,f,p,d){var b=o===null?null:o.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return n(sl(o,f,{bbox:p,id:d}),l,0)===!1?!1:void 0}var x;switch(b){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon";break}for(var P=0;P<o.coordinates.length;P++){var E=o.coordinates[P],k={type:x,coordinates:E};if(n(sl(k,f),l,P)===!1)return!1}})}function Vb(t,n){Gb(t,function(o,l,f){var p=0;if(o.geometry){var d=o.geometry.type;if(!(d==="Point"||d==="MultiPoint")){var b,x=0,P=0,E=0;if(Lp(o,function(k,F,j,q,J){if(b===void 0||l>x||q>P||J>E){b=k,x=l,P=q,E=J,p=0;return}var st=hh([b,k],o.properties);if(n(st,l,f,J,p)===!1)return!1;p++,b=k})===!1)return!1}}})}function Hb(t,n,o){var l=o,f=!1;return Vb(t,function(p,d,b,x,P){f===!1&&o===void 0?l=p:l=n(l,p,d,b,x,P),f=!0}),l}function hf(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Zb(t,n,o){o===void 0&&(o={});var l=hf(t),f=hf(n),p=Fa(f[1]-l[1]),d=Fa(f[0]-l[0]),b=Fa(l[1]),x=Fa(f[1]),P=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(d/2),2)*Math.cos(b)*Math.cos(x);return jb(2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P)),o.units)}var cf=6378137;function $b(t){return Ub(t,function(n,o){return n+qb(o)},0)}function qb(t){var n=0,o;switch(t.type){case"Polygon":return ff(t.coordinates);case"MultiPolygon":for(o=0;o<t.coordinates.length;o++)n+=ff(t.coordinates[o]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function ff(t){var n=0;if(t&&t.length>0){n+=Math.abs(df(t[0]));for(var o=1;o<t.length;o++)n-=Math.abs(df(t[o]))}return n}function df(t){var n,o,l,f,p,d,b,x=0,P=t.length;if(P>2){for(b=0;b<P;b++)b===P-2?(f=P-2,p=P-1,d=0):b===P-1?(f=P-1,p=0,d=1):(f=b,p=b+1,d=b+2),n=t[f],o=t[p],l=t[d],x+=(zu(l[0])-zu(n[0]))*Math.sin(zu(o[1]));x=x*cf*cf/2}return x}function zu(t){return t*Math.PI/180}function pf(t,n){return n===void 0&&(n={}),Hb(t,function(o,l){var f=l.geometry.coordinates;return o+Zb(f[0],f[1],n)},0)}function Kb(){const t=ce(null),n=ce(null),o=k=>`${(k*100).toFixed(1)}%`,l=k=>`${k.toFixed(1)}°`,f=k=>{if("getLatLngs"in k){const F=k.getLatLngs(),j=zb([F[0].map(q=>[q.lng,q.lat])]);return $b(j)}return 0},p=k=>{if("getLatLngs"in k){const F=k.getLatLngs();if(Array.isArray(F)){const j=hh(F.map(q=>[q.lng,q.lat]));return pf(j,{units:"meters"})}}return 0},d=k=>{if("getLatLngs"in k){const F=k.getLatLngs(),j=hh([...F[0].map(q=>[q.lng,q.lat]),[F[0][0].lng,F[0][0].lat]]);return pf(j,{units:"meters"})}return 0},b=k=>k._mRadius?k._mRadius:0,x=(k,F)=>{const j={type:F,style:k.options};switch(F){case"Circle":case"Semicircle":j.radius=b(k),j.area=Math.PI*Math.pow(j.radius,2),j.center=k.getLatLng(),F==="Semicircle"&&(j.area/=2,j.startAngle=k.options.startAngle,j.stopAngle=k.options.stopAngle);break;case"Rectangle":case"Polygon":j.area=f(k),j.perimeter=d(k);break;case"Line":case"Polyline":if(j.length=p(k),k.elevation){const q=k.elevation.gain,J=j.length;j.slope=q/J}break}return j},P=k=>{t.value=k,k?n.value=x(k.layer,k.type):n.value=null},E=Ge(()=>{if(!n.value)return null;const k={...n.value};return k.area&&(k.areaFormatted=`${(k.area/1e4).toFixed(2)} ha`),k.length&&(k.lengthFormatted=`${k.length.toFixed(1)} m`),k.perimeter&&(k.perimeterFormatted=`${k.perimeter.toFixed(1)} m`),k.radius&&(k.radiusFormatted=`${k.radius.toFixed(1)} m`),k.slope&&(k.slopeFormatted=o(k.slope)),k.startAngle&&(k.startAngleFormatted=l(k.startAngle)),k.stopAngle&&(k.stopAngleFormatted=l(k.stopAngle)),k});return{selectedShape:t,shapeProperties:n,formattedProperties:E,updateSelectedShape:P,calculateProperties:x}}const mf=100;function Wb(){const t=ce(!1),n=ce(null),o=p=>{if(p.length<=mf)return p;const d=Math.ceil(p.length/mf);return p.filter((b,x)=>x%d===0)},l=async(p,d=!0)=>{t.value=!0,n.value=null;try{const b=d?o(p):p;console.log("Points à envoyer:",b);const x={points:b.map(E=>({latitude:E.lat,longitude:E.lng}))};return console.log("Payload complet:",x),(await ae.post("/elevation/",x)).data.results.map(E=>({lat:E.latitude,lng:E.longitude,elevation:E.elevation}))}catch(b){throw console.error("Erreur lors de la récupération des données d'élévation:",b),n.value="Le service d'élévation est temporairement indisponible. Réessayez plus tard.",b}finally{t.value=!1}};return{loading:t,error:n,fetchElevation:l,calculateElevationProfile:async p=>{const d=await l(p);let b=1/0,x=-1/0,P=0,E=0;d.forEach((st,pt)=>{const bt=st.elevation||0;if(b=Math.min(b,bt),x=Math.max(x,bt),pt>0){const ft=d[pt-1].elevation||0,xt=bt-ft;xt>0?P+=xt:E+=Math.abs(xt)}});const k=d[0],j=(d[d.length-1].elevation||0)-(k.elevation||0),q=p.length,J=q>0?j/q:0;return{profile:d,stats:{minElevation:b,maxElevation:x,totalAscent:P,totalDescent:E,averageSlope:J}}}}}function Jb(){const t=ce(null),n=ce(null),o=ce(""),l=ce(null),f=ce(!1),{calculateProperties:p}=Kb(),{fetchElevation:d}=Wb(),b=(F,j,q)=>(t.value=sr.map(F).setView(j,q),sr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(t.value),n.value=new sr.FeatureGroup().addTo(t.value),t.value.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),t.value.on("pm:drawstart",()=>{f.value=!0}),t.value.on("pm:drawend",()=>{f.value=!1}),t.value.on("pm:create",async J=>{var bt;const st=J.layer;(bt=n.value)==null||bt.addLayer(st),st.properties={style:{fillColor:"#3B82F6",fillOpacity:.2,color:"#2563EB",weight:2}};const pt=p(st);st.properties={...st.properties,...pt};try{const ft=k(st),xt=await d(ft);st.properties.elevation=xt}catch(ft){console.error("Erreur lors de la récupération des données d'élévation:",ft)}l.value=st}),t.value.on("click",J=>{J.target===t.value&&(l.value=null)}),n.value.on("click",J=>{sr.DomEvent.stopPropagation(J);const st=J.layer;l.value=st}),t.value.on("pm:edit",J=>{const st=J.layer;if(st){const pt=p(st);st.properties={...st.properties,...pt},st===l.value&&(l.value={...st})}}),t.value),x=F=>{if(t.value)switch(t.value.pm.disableDraw(),t.value.pm.disableGlobalEditMode(),t.value.pm.disableGlobalDragMode(),t.value.pm.disableGlobalRemovalMode(),o.value=F,F){case"Circle":t.value.pm.enableDraw("Circle");break;case"Semicircle":t.value.pm.enableDraw("Circle",{});break;case"Rectangle":t.value.pm.enableDraw("Rectangle");break;case"Polygon":t.value.pm.enableDraw("Polygon");break;case"Line":t.value.pm.enableDraw("Line");break;case"edit":t.value.pm.enableGlobalEditMode();break;case"drag":t.value.pm.enableGlobalDragMode();break;case"delete":t.value.pm.enableGlobalRemovalMode();break}},P=F=>{if(!l.value)return;const j=l.value;j.properties.style={...j.properties.style,...F},F.fillColor&&j.setStyle({fillColor:F.fillColor}),F.fillOpacity&&j.setStyle({fillOpacity:F.fillOpacity}),F.strokeColor&&j.setStyle({color:F.strokeColor}),F.strokeWidth&&j.setStyle({weight:F.strokeWidth})},E=F=>{if(!l.value)return;const j=l.value;j.properties={...j.properties,...F},F.radius&&j instanceof sr.Circle&&j.setRadius(F.radius)},k=F=>F instanceof sr.Circle?[F.getLatLng()]:F instanceof sr.Polygon?F.getLatLngs()[0]:F instanceof sr.Polyline?F.getLatLngs():[];return kh(()=>{t.value&&(t.value.remove(),t.value=null)}),{map:t,featureGroup:n,currentTool:o,selectedShape:l,isDrawing:f,initMap:b,setDrawingTool:x,updateShapeStyle:P,updateShapeProperties:E}}function Yb(){const t=ce(null),n=ce("");return $a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}),$a.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri"}),$a.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:"© OpenTopoMap contributors"}),{map:t,searchQuery:n,initMap:f=>{t.value=f},searchLocation:async()=>{if(!(!t.value||!n.value))try{const p=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.value)}`)).json();if(p&&p.length>0){const{lat:d,lon:b}=p[0];t.value.setView([d,b],13)}}catch(f){console.error("Erreur lors de la recherche de localisation:",f)}}}}const wp="http://localhost:8000/api",cr=ae.create({baseURL:wp,headers:{"Content-Type":"application/json"}});cr.interceptors.request.use(t=>{const n=localStorage.getItem("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t));cr.interceptors.response.use(t=>t,async t=>{const n=t.config;if(t.response.status===401&&!n._retry){n._retry=!0;try{const o=localStorage.getItem("refresh_token"),l=await ae.post(`${wp}/token/refresh/`,{refresh:o}),{access:f}=l.data;return localStorage.setItem("access_token",f),n.headers.Authorization=`Bearer ${f}`,cr(n)}catch{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login"}}return Promise.reject(t)});const Xb=Bd("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>n=>t.plans.find(o=>o.id===n),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,o;const t=Zr();this.loading=!0;try{let l="/plans/";t.isConcessionnaire?l+="?concessionnaire="+((n=t.user)==null?void 0:n.id):t.isUtilisateur&&(l+="?utilisateur="+((o=t.user)==null?void 0:o.id));const f=await cr.get(l);this.plans=f.data}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async createPlan(t){this.loading=!0;try{const n=await cr.post("/plans/",t);return this.plans.push(n.data),n.data}catch(n){throw this.error="Erreur lors de la création du plan",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var n,o;if(this.unsavedChanges){this.loading=!0;try{const l=await cr.patch(`/plans/${t}/`,{...this.currentPlan,version:((n=this.currentPlan)==null?void 0:n.version)||1}),f=this.plans.findIndex(p=>p.id===t);return f!==-1&&(this.plans[f]=l.data),((o=this.currentPlan)==null?void 0:o.id)===t&&(this.currentPlan=l.data),this.unsavedChanges=!1,l.data}catch(l){throw this.error="Erreur lors de la sauvegarde du plan",l}finally{this.loading=!1}}},async fetchPlanHistory(t){this.loading=!0;try{const n=await cr.get(`/plans/${t}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la récupération de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(t,n){var o;this.loading=!0;try{const l=await cr.post(`/plans/${t}/restaurer/`,{version_id:n});((o=this.currentPlan)==null?void 0:o.id)===t&&(this.currentPlan=l.data);const f=this.plans.findIndex(p=>p.id===t);return f!==-1&&(this.plans[f]=l.data),l.data}catch(l){throw this.error="Erreur lors de la restauration de la version",l}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0}}}),Qb={class:"h-screen flex"},tL={class:"flex-1 relative"},eL={class:"drawing-tools-container"},gf=gr({__name:"MapView",setup(t){const n=ce(null);Xb(),ce([]),ce(null);const o=ce({});ce({mousedown:null,mousemove:null,mouseup:null});const{currentTool:l,selectedShape:f,initMap:p,setDrawingTool:d,updateShapeStyle:b,updateShapeProperties:x}=Jb(),{initMap:P}=Yb();Ho(()=>{if(n.value){const k=[46.603354,1.888334],j=p(n.value,k,6);j&&P(j)}}),ce({rectangle:0,circle:0,semicircle:0,line:0}),Nr(()=>o.value,k=>{E()},{deep:!0});function E(){console.log("Updating drawing style:",o.value)}return(k,F)=>(he(),ye("div",Qb,[lt("div",tL,[lt("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0"},null,512),lt("div",eL,[Ye(Ib,{"current-tool":Bi(l),"selected-shape":Bi(f),onToolChange:Bi(d),onStyleUpdate:Bi(b),onPropertiesUpdate:Bi(x)},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate","onPropertiesUpdate"])])])]))}}),Cp=ov({history:Iy("/"),routes:[{path:"/",name:"home",component:gf,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/projects",name:"projects",component:()=>rr(()=>import("./ProjectsView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:()=>rr(()=>import("./UsersView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer"]}},{path:"/profile",name:"profile",component:()=>rr(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/settings",name:"settings",component:()=>rr(()=>import("./SettingsView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/select-dealer",name:"selectDealer",component:()=>rr(()=>import("./SelectDealerView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["client"]}},{path:"/login",name:"login",component:hb,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>rr(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>rr(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:W4,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:gf,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>rr(()=>import("./NotFoundView.js"),[])}]});Cp.beforeEach(async(t,n,o)=>{var x,P;const l=Zr();if(console.log("Route:",t.path,"Auth state:",{initialized:l.initialized,isAuthenticated:l.isAuthenticated,user:l.user}),!l.initialized)try{await l.initialize(window.INITIAL_STATE)}catch(E){console.error("Error initializing auth store:",E)}const f=l.isAuthenticated,p=(x=l.user)==null?void 0:x.must_change_password,d=(P=l.user)==null?void 0:P.user_type,b=l.hasDealer;if(t.meta.requiresAuth&&!f){o("/login");return}if(f&&p&&t.name!=="changePassword"){o({name:"changePassword"});return}if(t.name==="changePassword"&&!p){o({name:"home"});return}if(t.meta.allowedRoles&&d&&!t.meta.allowedRoles.includes(d)){o({name:"home"});return}if(f&&d==="client"&&!b&&t.name!=="selectDealer"){o({name:"selectDealer"});return}if(t.meta.requiresGuest&&f){o({name:"home"});return}if(t.path==="/login"&&f){o("/");return}o()});const Oh=Lg(M4),Ep=Cg();Oh.use(Ep);Oh.use(Cp);const iL=Zr(Ep);window.INITIAL_STATE&&iL.initialize(window.INITIAL_STATE);Oh.mount("#app");export{gi as F,lt as a,di as b,ye as c,gr as d,Fr as e,Mi as f,Rh as g,he as h,rL as i,Zr as j,Hr as k,gg as l,Vn as m,Ms as n,Ho as o,Ye as p,Eo as q,ce as r,n0 as s,Ue as t,Xb as u,ji as v,Cd as w,wL as x};
