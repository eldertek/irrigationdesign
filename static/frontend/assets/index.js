var vv=Object.defineProperty;var yv=(t,e,n)=>e in t?vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Te=(t,e,n)=>yv(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Rd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const mi={},Du=[],Pa=()=>{},_v=()=>!1,Ih=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Id=t=>t.startsWith("onUpdate:"),Or=Object.assign,Fd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},bv=Object.prototype.hasOwnProperty,ai=(t,e)=>bv.call(t,e),pn=Array.isArray,Nu=t=>Nc(t)==="[object Map]",$u=t=>Nc(t)==="[object Set]",_p=t=>Nc(t)==="[object Date]",An=t=>typeof t=="function",nr=t=>typeof t=="string",Sa=t=>typeof t=="symbol",vi=t=>t!==null&&typeof t=="object",Lg=t=>(vi(t)||An(t))&&An(t.then)&&An(t.catch),Cg=Object.prototype.toString,Nc=t=>Cg.call(t),wv=t=>Nc(t).slice(8,-1),Pg=t=>Nc(t)==="[object Object]",jd=t=>nr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,uc=Rd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fh=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},xv=/-(\w)/g,To=Fh(t=>t.replace(xv,(e,n)=>n?n.toUpperCase():"")),Lv=/\B([A-Z])/g,uu=Fh(t=>t.replace(Lv,"-$1").toLowerCase()),jh=Fh(t=>t.charAt(0).toUpperCase()+t.slice(1)),bf=Fh(t=>t?`on${jh(t)}`:""),Al=(t,e)=>!Object.is(t,e),oh=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},kg=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},bh=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Cv=t=>{const e=nr(t)?Number(t):NaN;return isNaN(e)?t:e};let bp;const zh=()=>bp||(bp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Uh(t){if(pn(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=nr(i)?Ev(i):Uh(i);if(o)for(const a in o)e[a]=o[a]}return e}else if(nr(t)||vi(t))return t}const Pv=/;(?![^(]*\))/g,kv=/:([^]+)/,Sv=/\/\*[^]*?\*\//g;function Ev(t){const e={};return t.replace(Sv,"").split(Pv).forEach(n=>{if(n){const i=n.split(kv);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Di(t){let e="";if(nr(t))e=t;else if(pn(t))for(let n=0;n<t.length;n++){const i=Di(t[n]);i&&(e+=i+" ")}else if(vi(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Av="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mv=Rd(Av);function Sg(t){return!!t||t===""}function Bv(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=su(t[i],e[i]);return n}function su(t,e){if(t===e)return!0;let n=_p(t),i=_p(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=Sa(t),i=Sa(e),n||i)return t===e;if(n=pn(t),i=pn(e),n||i)return n&&i?Bv(t,e):!1;if(n=vi(t),i=vi(e),n||i){if(!n||!i)return!1;const o=Object.keys(t).length,a=Object.keys(e).length;if(o!==a)return!1;for(const l in t){const f=t.hasOwnProperty(l),p=e.hasOwnProperty(l);if(f&&!p||!f&&p||!su(t[l],e[l]))return!1}}return String(t)===String(e)}function zd(t,e){return t.findIndex(n=>su(n,e))}const Eg=t=>!!(t&&t.__v_isRef===!0),Pe=t=>nr(t)?t:t==null?"":pn(t)||vi(t)&&(t.toString===Cg||!An(t.toString))?Eg(t)?Pe(t.value):JSON.stringify(t,Ag,2):String(t),Ag=(t,e)=>Eg(e)?Ag(t,e.value):Nu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,o],a)=>(n[wf(i,a)+" =>"]=o,n),{})}:$u(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>wf(n))}:Sa(e)?wf(e):vi(e)&&!pn(e)&&!Pg(e)?String(e):e,wf=(t,e="")=>{var n;return Sa(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _s;class Mg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_s,!e&&_s&&(this.index=(_s.scopes||(_s.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=_s;try{return _s=this,e()}finally{_s=n}}}on(){_s=this}off(){_s=this.parent}stop(e){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Bg(t){return new Mg(t)}function Tg(){return _s}function Tv(t,e=!1){_s&&_s.cleanups.push(t)}let Li;const xf=new WeakSet;class Dg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_s&&_s.active&&_s.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,xf.has(this)&&(xf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Og(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wp(this),Rg(this);const e=Li,n=Yo;Li=this,Yo=!0;try{return this.fn()}finally{Ig(this),Li=e,Yo=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)$d(e);this.deps=this.depsTail=void 0,wp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?xf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yf(this)&&this.run()}get dirty(){return Yf(this)}}let Ng=0,cc,hc;function Og(t,e=!1){if(t.flags|=8,e){t.next=hc,hc=t;return}t.next=cc,cc=t}function Ud(){Ng++}function qd(){if(--Ng>0)return;if(hc){let e=hc;for(hc=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;cc;){let e=cc;for(cc=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=n}}if(t)throw t}function Rg(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ig(t){let e,n=t.depsTail,i=n;for(;i;){const o=i.prevDep;i.version===-1?(i===n&&(n=o),$d(i),Dv(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}t.deps=e,t.depsTail=n}function Yf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Fg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Fg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===wc))return;t.globalVersion=wc;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Yf(t)){t.flags&=-3;return}const n=Li,i=Yo;Li=t,Yo=!0;try{Rg(t);const o=t.fn(t._value);(e.version===0||Al(o,t._value))&&(t._value=o,e.version++)}catch(o){throw e.version++,o}finally{Li=n,Yo=i,Ig(t),t.flags&=-3}}function $d(t,e=!1){const{dep:n,prevSub:i,nextSub:o}=t;if(i&&(i.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=i,t.nextSub=void 0),n.subs===t&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)$d(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Dv(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Yo=!0;const jg=[];function Ol(){jg.push(Yo),Yo=!1}function Rl(){const t=jg.pop();Yo=t===void 0?!0:t}function wp(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Li;Li=void 0;try{e()}finally{Li=n}}}let wc=0;class Nv{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Li||!Yo||Li===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Li)n=this.activeLink=new Nv(Li,this),Li.deps?(n.prevDep=Li.depsTail,Li.depsTail.nextDep=n,Li.depsTail=n):Li.deps=Li.depsTail=n,zg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Li.depsTail,n.nextDep=void 0,Li.depsTail.nextDep=n,Li.depsTail=n,Li.deps===n&&(Li.deps=i)}return n}trigger(e){this.version++,wc++,this.notify(e)}notify(e){Ud();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{qd()}}}function zg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)zg(i)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const wh=new WeakMap,eu=Symbol(""),Jf=Symbol(""),xc=Symbol("");function ss(t,e,n){if(Yo&&Li){let i=wh.get(t);i||wh.set(t,i=new Map);let o=i.get(n);o||(i.set(n,o=new Vd),o.map=i,o.key=n),o.track()}}function Ka(t,e,n,i,o,a){const l=wh.get(t);if(!l){wc++;return}const f=p=>{p&&p.trigger()};if(Ud(),e==="clear")l.forEach(f);else{const p=pn(t),v=p&&jd(n);if(p&&n==="length"){const b=Number(i);l.forEach((w,S)=>{(S==="length"||S===xc||!Sa(S)&&S>=b)&&f(w)})}else switch((n!==void 0||l.has(void 0))&&f(l.get(n)),v&&f(l.get(xc)),e){case"add":p?v&&f(l.get("length")):(f(l.get(eu)),Nu(t)&&f(l.get(Jf)));break;case"delete":p||(f(l.get(eu)),Nu(t)&&f(l.get(Jf)));break;case"set":Nu(t)&&f(l.get(eu));break}}qd()}function Ov(t,e){const n=wh.get(t);return n&&n.get(e)}function _u(t){const e=Jn(t);return e===t?e:(ss(e,"iterate",xc),Ao(t)?e:e.map(os))}function qh(t){return ss(t=Jn(t),"iterate",xc),t}const Rv={__proto__:null,[Symbol.iterator](){return Lf(this,Symbol.iterator,os)},concat(...t){return _u(this).concat(...t.map(e=>pn(e)?_u(e):e))},entries(){return Lf(this,"entries",t=>(t[1]=os(t[1]),t))},every(t,e){return Va(this,"every",t,e,void 0,arguments)},filter(t,e){return Va(this,"filter",t,e,n=>n.map(os),arguments)},find(t,e){return Va(this,"find",t,e,os,arguments)},findIndex(t,e){return Va(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Va(this,"findLast",t,e,os,arguments)},findLastIndex(t,e){return Va(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Va(this,"forEach",t,e,void 0,arguments)},includes(...t){return Cf(this,"includes",t)},indexOf(...t){return Cf(this,"indexOf",t)},join(t){return _u(this).join(t)},lastIndexOf(...t){return Cf(this,"lastIndexOf",t)},map(t,e){return Va(this,"map",t,e,void 0,arguments)},pop(){return Xu(this,"pop")},push(...t){return Xu(this,"push",t)},reduce(t,...e){return xp(this,"reduce",t,e)},reduceRight(t,...e){return xp(this,"reduceRight",t,e)},shift(){return Xu(this,"shift")},some(t,e){return Va(this,"some",t,e,void 0,arguments)},splice(...t){return Xu(this,"splice",t)},toReversed(){return _u(this).toReversed()},toSorted(t){return _u(this).toSorted(t)},toSpliced(...t){return _u(this).toSpliced(...t)},unshift(...t){return Xu(this,"unshift",t)},values(){return Lf(this,"values",os)}};function Lf(t,e,n){const i=qh(t),o=i[e]();return i!==t&&!Ao(t)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=n(a.value)),a}),o}const Iv=Array.prototype;function Va(t,e,n,i,o,a){const l=qh(t),f=l!==t&&!Ao(t),p=l[e];if(p!==Iv[e]){const w=p.apply(t,a);return f?os(w):w}let v=n;l!==t&&(f?v=function(w,S){return n.call(this,os(w),S,t)}:n.length>2&&(v=function(w,S){return n.call(this,w,S,t)}));const b=p.call(l,v,i);return f&&o?o(b):b}function xp(t,e,n,i){const o=qh(t);let a=n;return o!==t&&(Ao(t)?n.length>3&&(a=function(l,f,p){return n.call(this,l,f,p,t)}):a=function(l,f,p){return n.call(this,l,os(f),p,t)}),o[e](a,...i)}function Cf(t,e,n){const i=Jn(t);ss(i,"iterate",xc);const o=i[e](...n);return(o===-1||o===!1)&&Wd(n[0])?(n[0]=Jn(n[0]),i[e](...n)):o}function Xu(t,e,n=[]){Ol(),Ud();const i=Jn(t)[e].apply(t,n);return qd(),Rl(),i}const Fv=Rd("__proto__,__v_isRef,__isVue"),Ug=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sa));function jv(t){Sa(t)||(t=String(t));const e=Jn(this);return ss(e,"has",t),e.hasOwnProperty(t)}class qg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return i===(o?a?Kv:Gg:a?Hg:Vg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const l=pn(e);if(!o){let p;if(l&&(p=Rv[n]))return p;if(n==="hasOwnProperty")return jv}const f=Reflect.get(e,n,er(e)?e:i);return(Sa(n)?Ug.has(n):Fv(n))||(o||ss(e,"get",n),a)?f:er(f)?l&&jd(n)?f:f.value:vi(f)?o?Zg(f):el(f):f}}class $g extends qg{constructor(e=!1){super(!1,e)}set(e,n,i,o){let a=e[n];if(!this._isShallow){const p=ou(a);if(!Ao(i)&&!ou(i)&&(a=Jn(a),i=Jn(i)),!pn(e)&&er(a)&&!er(i))return p?!1:(a.value=i,!0)}const l=pn(e)&&jd(n)?Number(n)<e.length:ai(e,n),f=Reflect.set(e,n,i,er(e)?e:o);return e===Jn(o)&&(l?Al(i,a)&&Ka(e,"set",n,i):Ka(e,"add",n,i)),f}deleteProperty(e,n){const i=ai(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&i&&Ka(e,"delete",n,void 0),o}has(e,n){const i=Reflect.has(e,n);return(!Sa(n)||!Ug.has(n))&&ss(e,"has",n),i}ownKeys(e){return ss(e,"iterate",pn(e)?"length":eu),Reflect.ownKeys(e)}}class zv extends qg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Uv=new $g,qv=new zv,$v=new $g(!0);const Xf=t=>t,Yc=t=>Reflect.getPrototypeOf(t);function Vv(t,e,n){return function(...i){const o=this.__v_raw,a=Jn(o),l=Nu(a),f=t==="entries"||t===Symbol.iterator&&l,p=t==="keys"&&l,v=o[t](...i),b=n?Xf:e?Qf:os;return!e&&ss(a,"iterate",p?Jf:eu),{next(){const{value:w,done:S}=v.next();return S?{value:w,done:S}:{value:f?[b(w[0]),b(w[1])]:b(w),done:S}},[Symbol.iterator](){return this}}}}function Jc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Hv(t,e){const n={get(o){const a=this.__v_raw,l=Jn(a),f=Jn(o);t||(Al(o,f)&&ss(l,"get",o),ss(l,"get",f));const{has:p}=Yc(l),v=e?Xf:t?Qf:os;if(p.call(l,o))return v(a.get(o));if(p.call(l,f))return v(a.get(f));a!==l&&a.get(o)},get size(){const o=this.__v_raw;return!t&&ss(Jn(o),"iterate",eu),Reflect.get(o,"size",o)},has(o){const a=this.__v_raw,l=Jn(a),f=Jn(o);return t||(Al(o,f)&&ss(l,"has",o),ss(l,"has",f)),o===f?a.has(o):a.has(o)||a.has(f)},forEach(o,a){const l=this,f=l.__v_raw,p=Jn(f),v=e?Xf:t?Qf:os;return!t&&ss(p,"iterate",eu),f.forEach((b,w)=>o.call(a,v(b),v(w),l))}};return Or(n,t?{add:Jc("add"),set:Jc("set"),delete:Jc("delete"),clear:Jc("clear")}:{add(o){!e&&!Ao(o)&&!ou(o)&&(o=Jn(o));const a=Jn(this);return Yc(a).has.call(a,o)||(a.add(o),Ka(a,"add",o,o)),this},set(o,a){!e&&!Ao(a)&&!ou(a)&&(a=Jn(a));const l=Jn(this),{has:f,get:p}=Yc(l);let v=f.call(l,o);v||(o=Jn(o),v=f.call(l,o));const b=p.call(l,o);return l.set(o,a),v?Al(a,b)&&Ka(l,"set",o,a):Ka(l,"add",o,a),this},delete(o){const a=Jn(this),{has:l,get:f}=Yc(a);let p=l.call(a,o);p||(o=Jn(o),p=l.call(a,o)),f&&f.call(a,o);const v=a.delete(o);return p&&Ka(a,"delete",o,void 0),v},clear(){const o=Jn(this),a=o.size!==0,l=o.clear();return a&&Ka(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Vv(o,t,e)}),n}function Hd(t,e){const n=Hv(t,e);return(i,o,a)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?i:Reflect.get(ai(n,o)&&o in i?n:i,o,a)}const Gv={get:Hd(!1,!1)},Wv={get:Hd(!1,!0)},Zv={get:Hd(!0,!1)};const Vg=new WeakMap,Hg=new WeakMap,Gg=new WeakMap,Kv=new WeakMap;function Yv(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jv(t){return t.__v_skip||!Object.isExtensible(t)?0:Yv(wv(t))}function el(t){return ou(t)?t:Gd(t,!1,Uv,Gv,Vg)}function Wg(t){return Gd(t,!1,$v,Wv,Hg)}function Zg(t){return Gd(t,!0,qv,Zv,Gg)}function Gd(t,e,n,i,o){if(!vi(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=o.get(t);if(a)return a;const l=Jv(t);if(l===0)return t;const f=new Proxy(t,l===2?i:n);return o.set(t,f),f}function Ml(t){return ou(t)?Ml(t.__v_raw):!!(t&&t.__v_isReactive)}function ou(t){return!!(t&&t.__v_isReadonly)}function Ao(t){return!!(t&&t.__v_isShallow)}function Wd(t){return t?!!t.__v_raw:!1}function Jn(t){const e=t&&t.__v_raw;return e?Jn(e):t}function Zd(t){return!ai(t,"__v_skip")&&Object.isExtensible(t)&&kg(t,"__v_skip",!0),t}const os=t=>vi(t)?el(t):t,Qf=t=>vi(t)?Zg(t):t;function er(t){return t?t.__v_isRef===!0:!1}function Ie(t){return Kg(t,!1)}function Xv(t){return Kg(t,!0)}function Kg(t,e){return er(t)?t:new Qv(t,e)}class Qv{constructor(e,n){this.dep=new Vd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Jn(e),this._value=n?e:os(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,i=this.__v_isShallow||Ao(e)||ou(e);e=i?e:Jn(e),Al(e,n)&&(this._rawValue=e,this._value=i?e:os(e),this.dep.trigger())}}function Rn(t){return er(t)?t.value:t}const ty={get:(t,e,n)=>e==="__v_raw"?t:Rn(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const o=t[e];return er(o)&&!er(n)?(o.value=n,!0):Reflect.set(t,e,n,i)}};function Yg(t){return Ml(t)?t:new Proxy(t,ty)}function ey(t){const e=pn(t)?new Array(t.length):{};for(const n in t)e[n]=iy(t,n);return e}class ny{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ov(Jn(this._object),this._key)}}function iy(t,e,n){const i=t[e];return er(i)?i:new ny(t,e,n)}class ry{constructor(e,n,i){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Vd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Li!==this)return Og(this,!0),!0}get value(){const e=this.dep.track();return Fg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function sy(t,e,n=!1){let i,o;return An(t)?i=t:(i=t.get,o=t.set),new ry(i,o,n)}const Xc={},xh=new WeakMap;let Wl;function oy(t,e=!1,n=Wl){if(n){let i=xh.get(n);i||xh.set(n,i=[]),i.push(t)}}function ay(t,e,n=mi){const{immediate:i,deep:o,once:a,scheduler:l,augmentJob:f,call:p}=n,v=St=>o?St:Ao(St)||o===!1||o===0?Ya(St,1):Ya(St);let b,w,S,x,R=!1,N=!1;if(er(t)?(w=()=>t.value,R=Ao(t)):Ml(t)?(w=()=>v(t),R=!0):pn(t)?(N=!0,R=t.some(St=>Ml(St)||Ao(St)),w=()=>t.map(St=>{if(er(St))return St.value;if(Ml(St))return v(St);if(An(St))return p?p(St,2):St()})):An(t)?e?w=p?()=>p(t,2):t:w=()=>{if(S){Ol();try{S()}finally{Rl()}}const St=Wl;Wl=b;try{return p?p(t,3,[x]):t(x)}finally{Wl=St}}:w=Pa,e&&o){const St=w,Mt=o===!0?1/0:o;w=()=>Ya(St(),Mt)}const j=Tg(),U=()=>{b.stop(),j&&j.active&&Fd(j.effects,b)};if(a&&e){const St=e;e=(...Mt)=>{St(...Mt),U()}}let W=N?new Array(t.length).fill(Xc):Xc;const X=St=>{if(!(!(b.flags&1)||!b.dirty&&!St))if(e){const Mt=b.run();if(o||R||(N?Mt.some((Nt,Lt)=>Al(Nt,W[Lt])):Al(Mt,W))){S&&S();const Nt=Wl;Wl=b;try{const Lt=[Mt,W===Xc?void 0:N&&W[0]===Xc?[]:W,x];p?p(e,3,Lt):e(...Lt),W=Mt}finally{Wl=Nt}}}else b.run()};return f&&f(X),b=new Dg(w),b.scheduler=l?()=>l(X,!1):X,x=St=>oy(St,!1,b),S=b.onStop=()=>{const St=xh.get(b);if(St){if(p)p(St,4);else for(const Mt of St)Mt();xh.delete(b)}},e?i?X(!0):W=b.run():l?l(X.bind(null,!0),!0):b.run(),U.pause=b.pause.bind(b),U.resume=b.resume.bind(b),U.stop=U,U}function Ya(t,e=1/0,n){if(e<=0||!vi(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,er(t))Ya(t.value,e,n);else if(pn(t))for(let i=0;i<t.length;i++)Ya(t[i],e,n);else if($u(t)||Nu(t))t.forEach(i=>{Ya(i,e,n)});else if(Pg(t)){for(const i in t)Ya(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&Ya(t[i],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Oc(t,e,n,i){try{return i?t(...i):t()}catch(o){$h(o,e,n)}}function Jo(t,e,n,i){if(An(t)){const o=Oc(t,e,n,i);return o&&Lg(o)&&o.catch(a=>{$h(a,e,n)}),o}if(pn(t)){const o=[];for(let a=0;a<t.length;a++)o.push(Jo(t[a],e,n,i));return o}}function $h(t,e,n,i=!0){const o=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=e&&e.appContext.config||mi;if(e){let f=e.parent;const p=e.proxy,v=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const b=f.ec;if(b){for(let w=0;w<b.length;w++)if(b[w](t,p,v)===!1)return}f=f.parent}if(a){Ol(),Oc(a,null,10,[t,p,v]),Rl();return}}ly(t,n,o,i,l)}function ly(t,e,n,i=!0,o=!1){if(o)throw t;console.error(t)}const bs=[];let xa=-1;const Ou=[];let xl=null,Cu=0;const Jg=Promise.resolve();let Lh=null;function Vi(t){const e=Lh||Jg;return t?e.then(this?t.bind(this):t):e}function uy(t){let e=xa+1,n=bs.length;for(;e<n;){const i=e+n>>>1,o=bs[i],a=Lc(o);a<t||a===t&&o.flags&2?e=i+1:n=i}return e}function Kd(t){if(!(t.flags&1)){const e=Lc(t),n=bs[bs.length-1];!n||!(t.flags&2)&&e>=Lc(n)?bs.push(t):bs.splice(uy(e),0,t),t.flags|=1,Xg()}}function Xg(){Lh||(Lh=Jg.then(tm))}function cy(t){pn(t)?Ou.push(...t):xl&&t.id===-1?xl.splice(Cu+1,0,t):t.flags&1||(Ou.push(t),t.flags|=1),Xg()}function Lp(t,e,n=xa+1){for(;n<bs.length;n++){const i=bs[n];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;bs.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Qg(t){if(Ou.length){const e=[...new Set(Ou)].sort((n,i)=>Lc(n)-Lc(i));if(Ou.length=0,xl){xl.push(...e);return}for(xl=e,Cu=0;Cu<xl.length;Cu++){const n=xl[Cu];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}xl=null,Cu=0}}const Lc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function tm(t){try{for(xa=0;xa<bs.length;xa++){const e=bs[xa];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Oc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;xa<bs.length;xa++){const e=bs[xa];e&&(e.flags&=-2)}xa=-1,bs.length=0,Qg(),Lh=null,(bs.length||Ou.length)&&tm()}}let ws=null,em=null;function Ch(t){const e=ws;return ws=t,em=t&&t.type.__scopeId||null,e}function Ja(t,e=ws,n){if(!e||t._n)return t;const i=(...o)=>{i._d&&Np(-1);const a=Ch(e);let l;try{l=t(...o)}finally{Ch(a),i._d&&Np(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function mn(t,e){if(ws===null)return t;const n=Yh(ws),i=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[a,l,f,p=mi]=e[o];a&&(An(a)&&(a={mounted:a,updated:a}),a.deep&&Ya(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:f,modifiers:p}))}return t}function $l(t,e,n,i){const o=t.dirs,a=e&&e.dirs;for(let l=0;l<o.length;l++){const f=o[l];a&&(f.oldValue=a[l].value);let p=f.dir[i];p&&(Ol(),Jo(p,n,8,[t.el,f,t,e]),Rl())}}const hy=Symbol("_vte"),nm=t=>t.__isTeleport,Ll=Symbol("_leaveCb"),Qc=Symbol("_enterCb");function fy(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ea(()=>{t.isMounted=!0}),Gh(()=>{t.isUnmounting=!0}),t}const ko=[Function,Array],im={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ko,onEnter:ko,onAfterEnter:ko,onEnterCancelled:ko,onBeforeLeave:ko,onLeave:ko,onAfterLeave:ko,onLeaveCancelled:ko,onBeforeAppear:ko,onAppear:ko,onAfterAppear:ko,onAppearCancelled:ko},rm=t=>{const e=t.subTree;return e.component?rm(e.component):e},dy={name:"BaseTransition",props:im,setup(t,{slots:e}){const n=h2(),i=fy();return()=>{const o=e.default&&am(e.default(),!0);if(!o||!o.length)return;const a=sm(o),l=Jn(t),{mode:f}=l;if(i.isLeaving)return Pf(a);const p=Cp(a);if(!p)return Pf(a);let v=td(p,l,i,n,w=>v=w);p.type!==Us&&Cc(p,v);let b=n.subTree&&Cp(n.subTree);if(b&&b.type!==Us&&!Kl(p,b)&&rm(n).type!==Us){let w=td(b,l,i,n);if(Cc(b,w),f==="out-in"&&p.type!==Us)return i.isLeaving=!0,w.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete w.afterLeave,b=void 0},Pf(a);f==="in-out"&&p.type!==Us?w.delayLeave=(S,x,R)=>{const N=om(i,b);N[String(b.key)]=b,S[Ll]=()=>{x(),S[Ll]=void 0,delete v.delayedLeave,b=void 0},v.delayedLeave=()=>{R(),delete v.delayedLeave,b=void 0}}:b=void 0}else b&&(b=void 0);return a}}};function sm(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Us){e=n;break}}return e}const py=dy;function om(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function td(t,e,n,i,o){const{appear:a,mode:l,persisted:f=!1,onBeforeEnter:p,onEnter:v,onAfterEnter:b,onEnterCancelled:w,onBeforeLeave:S,onLeave:x,onAfterLeave:R,onLeaveCancelled:N,onBeforeAppear:j,onAppear:U,onAfterAppear:W,onAppearCancelled:X}=e,St=String(t.key),Mt=om(n,t),Nt=(_t,zt)=>{_t&&Jo(_t,i,9,zt)},Lt=(_t,zt)=>{const J=zt[1];Nt(_t,zt),pn(_t)?_t.every(Z=>Z.length<=1)&&J():_t.length<=1&&J()},gt={mode:l,persisted:f,beforeEnter(_t){let zt=p;if(!n.isMounted)if(a)zt=j||p;else return;_t[Ll]&&_t[Ll](!0);const J=Mt[St];J&&Kl(t,J)&&J.el[Ll]&&J.el[Ll](),Nt(zt,[_t])},enter(_t){let zt=v,J=b,Z=w;if(!n.isMounted)if(a)zt=U||v,J=W||b,Z=X||w;else return;let Et=!1;const Bt=_t[Qc]=A=>{Et||(Et=!0,A?Nt(Z,[_t]):Nt(J,[_t]),gt.delayedLeave&&gt.delayedLeave(),_t[Qc]=void 0)};zt?Lt(zt,[_t,Bt]):Bt()},leave(_t,zt){const J=String(t.key);if(_t[Qc]&&_t[Qc](!0),n.isUnmounting)return zt();Nt(S,[_t]);let Z=!1;const Et=_t[Ll]=Bt=>{Z||(Z=!0,zt(),Bt?Nt(N,[_t]):Nt(R,[_t]),_t[Ll]=void 0,Mt[J]===t&&delete Mt[J])};Mt[J]=t,x?Lt(x,[_t,Et]):Et()},clone(_t){const zt=td(_t,e,n,i,o);return o&&o(zt),zt}};return gt}function Pf(t){if(Vh(t))return t=Bl(t),t.children=null,t}function Cp(t){if(!Vh(t))return nm(t.type)&&t.children?sm(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&An(n.default))return n.default()}}function Cc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Cc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function am(t,e=!1,n){let i=[],o=0;for(let a=0;a<t.length;a++){let l=t[a];const f=n==null?l.key:String(n)+String(l.key!=null?l.key:a);l.type===_n?(l.patchFlag&128&&o++,i=i.concat(am(l.children,e,f))):(e||l.type!==Us)&&i.push(f!=null?Bl(l,{key:f}):l)}if(o>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function Ls(t,e){return An(t)?Or({name:t.name},e,{setup:t}):t}function lm(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Ph(t,e,n,i,o=!1){if(pn(t)){t.forEach((R,N)=>Ph(R,e&&(pn(e)?e[N]:e),n,i,o));return}if(fc(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Ph(t,e,n,i.component.subTree);return}const a=i.shapeFlag&4?Yh(i.component):i.el,l=o?null:a,{i:f,r:p}=t,v=e&&e.r,b=f.refs===mi?f.refs={}:f.refs,w=f.setupState,S=Jn(w),x=w===mi?()=>!1:R=>ai(S,R);if(v!=null&&v!==p&&(nr(v)?(b[v]=null,x(v)&&(w[v]=null)):er(v)&&(v.value=null)),An(p))Oc(p,f,12,[l,b]);else{const R=nr(p),N=er(p);if(R||N){const j=()=>{if(t.f){const U=R?x(p)?w[p]:b[p]:p.value;o?pn(U)&&Fd(U,a):pn(U)?U.includes(a)||U.push(a):R?(b[p]=[a],x(p)&&(w[p]=b[p])):(p.value=[a],t.k&&(b[t.k]=p.value))}else R?(b[p]=l,x(p)&&(w[p]=l)):N&&(p.value=l,t.k&&(b[t.k]=l))};l?(j.id=-1,so(j,n)):j()}}}zh().requestIdleCallback;zh().cancelIdleCallback;const fc=t=>!!t.type.__asyncLoader,Vh=t=>t.type.__isKeepAlive;function gy(t,e){um(t,"a",e)}function my(t,e){um(t,"da",e)}function um(t,e,n=Nr){const i=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(Hh(e,i,n),n){let o=n.parent;for(;o&&o.parent;)Vh(o.parent.vnode)&&vy(i,e,n,o),o=o.parent}}function vy(t,e,n,i){const o=Hh(e,t,i,!0);Wh(()=>{Fd(i[e],o)},n)}function Hh(t,e,n=Nr,i=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...l)=>{Ol();const f=Rc(n),p=Jo(e,n,t,l);return f(),Rl(),p});return i?o.unshift(a):o.push(a),a}}const nl=t=>(e,n=Nr)=>{(!kc||t==="sp")&&Hh(t,(...i)=>e(...i),n)},yy=nl("bm"),Ea=nl("m"),_y=nl("bu"),by=nl("u"),Gh=nl("bum"),Wh=nl("um"),wy=nl("sp"),xy=nl("rtg"),Ly=nl("rtc");function Cy(t,e=Nr){Hh("ec",t,e)}const Py="components";function ky(t,e){return Ey(Py,t,!0,e)||t}const Sy=Symbol.for("v-ndc");function Ey(t,e,n=!0,i=!1){const o=ws||Nr;if(o){const a=o.type;{const f=m2(a,!1);if(f&&(f===e||f===To(e)||f===jh(To(e))))return a}const l=Pp(o[t]||a[t],e)||Pp(o.appContext[t],e);return!l&&i?a:l}}function Pp(t,e){return t&&(t[e]||t[To(e)]||t[jh(To(e))])}function Gn(t,e,n,i){let o;const a=n,l=pn(t);if(l||nr(t)){const f=l&&Ml(t);let p=!1;f&&(p=!Ao(t),t=qh(t)),o=new Array(t.length);for(let v=0,b=t.length;v<b;v++)o[v]=e(p?os(t[v]):t[v],v,void 0,a)}else if(typeof t=="number"){o=new Array(t);for(let f=0;f<t;f++)o[f]=e(f+1,f,void 0,a)}else if(vi(t))if(t[Symbol.iterator])o=Array.from(t,(f,p)=>e(f,p,void 0,a));else{const f=Object.keys(t);o=new Array(f.length);for(let p=0,v=f.length;p<v;p++){const b=f[p];o[p]=e(t[b],b,p,a)}}else o=[];return o}const ed=t=>t?Mm(t)?Yh(t):ed(t.parent):null,dc=Or(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ed(t.parent),$root:t=>ed(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>hm(t),$forceUpdate:t=>t.f||(t.f=()=>{Kd(t.update)}),$nextTick:t=>t.n||(t.n=Vi.bind(t.proxy)),$watch:t=>Yy.bind(t)}),kf=(t,e)=>t!==mi&&!t.__isScriptSetup&&ai(t,e),Ay={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:o,props:a,accessCache:l,type:f,appContext:p}=t;let v;if(e[0]!=="$"){const x=l[e];if(x!==void 0)switch(x){case 1:return i[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(kf(i,e))return l[e]=1,i[e];if(o!==mi&&ai(o,e))return l[e]=2,o[e];if((v=t.propsOptions[0])&&ai(v,e))return l[e]=3,a[e];if(n!==mi&&ai(n,e))return l[e]=4,n[e];nd&&(l[e]=0)}}const b=dc[e];let w,S;if(b)return e==="$attrs"&&ss(t.attrs,"get",""),b(t);if((w=f.__cssModules)&&(w=w[e]))return w;if(n!==mi&&ai(n,e))return l[e]=4,n[e];if(S=p.config.globalProperties,ai(S,e))return S[e]},set({_:t},e,n){const{data:i,setupState:o,ctx:a}=t;return kf(o,e)?(o[e]=n,!0):i!==mi&&ai(i,e)?(i[e]=n,!0):ai(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:o,propsOptions:a}},l){let f;return!!n[l]||t!==mi&&ai(t,l)||kf(e,l)||(f=a[0])&&ai(f,l)||ai(i,l)||ai(dc,l)||ai(o.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ai(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function kp(t){return pn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let nd=!0;function My(t){const e=hm(t),n=t.proxy,i=t.ctx;nd=!1,e.beforeCreate&&Sp(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:l,watch:f,provide:p,inject:v,created:b,beforeMount:w,mounted:S,beforeUpdate:x,updated:R,activated:N,deactivated:j,beforeDestroy:U,beforeUnmount:W,destroyed:X,unmounted:St,render:Mt,renderTracked:Nt,renderTriggered:Lt,errorCaptured:gt,serverPrefetch:_t,expose:zt,inheritAttrs:J,components:Z,directives:Et,filters:Bt}=e;if(v&&By(v,i,null),l)for(const V in l){const z=l[V];An(z)&&(i[V]=z.bind(n))}if(o){const V=o.call(n,n);vi(V)&&(t.data=el(V))}if(nd=!0,a)for(const V in a){const z=a[V],mt=An(z)?z.bind(n,n):An(z.get)?z.get.bind(n,n):Pa,ft=!An(z)&&An(z.set)?z.set.bind(n):Pa,ht=jn({get:mt,set:ft});Object.defineProperty(i,V,{enumerable:!0,configurable:!0,get:()=>ht.value,set:I=>ht.value=I})}if(f)for(const V in f)cm(f[V],i,n,V);if(p){const V=An(p)?p.call(n):p;Reflect.ownKeys(V).forEach(z=>{ah(z,V[z])})}b&&Sp(b,t,"c");function H(V,z){pn(z)?z.forEach(mt=>V(mt.bind(n))):z&&V(z.bind(n))}if(H(yy,w),H(Ea,S),H(_y,x),H(by,R),H(gy,N),H(my,j),H(Cy,gt),H(Ly,Nt),H(xy,Lt),H(Gh,W),H(Wh,St),H(wy,_t),pn(zt))if(zt.length){const V=t.exposed||(t.exposed={});zt.forEach(z=>{Object.defineProperty(V,z,{get:()=>n[z],set:mt=>n[z]=mt})})}else t.exposed||(t.exposed={});Mt&&t.render===Pa&&(t.render=Mt),J!=null&&(t.inheritAttrs=J),Z&&(t.components=Z),Et&&(t.directives=Et),_t&&lm(t)}function By(t,e,n=Pa){pn(t)&&(t=id(t));for(const i in t){const o=t[i];let a;vi(o)?"default"in o?a=Mo(o.from||i,o.default,!0):a=Mo(o.from||i):a=Mo(o),er(a)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):e[i]=a}}function Sp(t,e,n){Jo(pn(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function cm(t,e,n,i){let o=i.includes(".")?Pm(n,i):()=>n[i];if(nr(t)){const a=e[t];An(a)&&qr(o,a)}else if(An(t))qr(o,t.bind(n));else if(vi(t))if(pn(t))t.forEach(a=>cm(a,e,n,i));else{const a=An(t.handler)?t.handler.bind(n):e[t.handler];An(a)&&qr(o,a,t)}}function hm(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:l}}=t.appContext,f=a.get(e);let p;return f?p=f:!o.length&&!n&&!i?p=e:(p={},o.length&&o.forEach(v=>kh(p,v,l,!0)),kh(p,e,l)),vi(e)&&a.set(e,p),p}function kh(t,e,n,i=!1){const{mixins:o,extends:a}=e;a&&kh(t,a,n,!0),o&&o.forEach(l=>kh(t,l,n,!0));for(const l in e)if(!(i&&l==="expose")){const f=Ty[l]||n&&n[l];t[l]=f?f(t[l],e[l]):e[l]}return t}const Ty={data:Ep,props:Ap,emits:Ap,methods:ac,computed:ac,beforeCreate:vs,created:vs,beforeMount:vs,mounted:vs,beforeUpdate:vs,updated:vs,beforeDestroy:vs,beforeUnmount:vs,destroyed:vs,unmounted:vs,activated:vs,deactivated:vs,errorCaptured:vs,serverPrefetch:vs,components:ac,directives:ac,watch:Ny,provide:Ep,inject:Dy};function Ep(t,e){return e?t?function(){return Or(An(t)?t.call(this,this):t,An(e)?e.call(this,this):e)}:e:t}function Dy(t,e){return ac(id(t),id(e))}function id(t){if(pn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function vs(t,e){return t?[...new Set([].concat(t,e))]:e}function ac(t,e){return t?Or(Object.create(null),t,e):e}function Ap(t,e){return t?pn(t)&&pn(e)?[...new Set([...t,...e])]:Or(Object.create(null),kp(t),kp(e??{})):e}function Ny(t,e){if(!t)return e;if(!e)return t;const n=Or(Object.create(null),t);for(const i in e)n[i]=vs(t[i],e[i]);return n}function fm(){return{app:null,config:{isNativeTag:_v,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Oy=0;function Ry(t,e){return function(i,o=null){An(i)||(i=Or({},i)),o!=null&&!vi(o)&&(o=null);const a=fm(),l=new WeakSet,f=[];let p=!1;const v=a.app={_uid:Oy++,_component:i,_props:o,_container:null,_context:a,_instance:null,version:y2,get config(){return a.config},set config(b){},use(b,...w){return l.has(b)||(b&&An(b.install)?(l.add(b),b.install(v,...w)):An(b)&&(l.add(b),b(v,...w))),v},mixin(b){return a.mixins.includes(b)||a.mixins.push(b),v},component(b,w){return w?(a.components[b]=w,v):a.components[b]},directive(b,w){return w?(a.directives[b]=w,v):a.directives[b]},mount(b,w,S){if(!p){const x=v._ceVNode||Ai(i,o);return x.appContext=a,S===!0?S="svg":S===!1&&(S=void 0),t(x,b,S),p=!0,v._container=b,b.__vue_app__=v,Yh(x.component)}},onUnmount(b){f.push(b)},unmount(){p&&(Jo(f,v._instance,16),t(null,v._container),delete v._container.__vue_app__)},provide(b,w){return a.provides[b]=w,v},runWithContext(b){const w=nu;nu=v;try{return b()}finally{nu=w}}};return v}}let nu=null;function ah(t,e){if(Nr){let n=Nr.provides;const i=Nr.parent&&Nr.parent.provides;i===n&&(n=Nr.provides=Object.create(i)),n[t]=e}}function Mo(t,e,n=!1){const i=Nr||ws;if(i||nu){const o=nu?nu._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return n&&An(e)?e.call(i&&i.proxy):e}}function Iy(){return!!(Nr||ws||nu)}const dm={},pm=()=>Object.create(dm),gm=t=>Object.getPrototypeOf(t)===dm;function Fy(t,e,n,i=!1){const o={},a=pm();t.propsDefaults=Object.create(null),mm(t,e,o,a);for(const l in t.propsOptions[0])l in o||(o[l]=void 0);n?t.props=i?o:Wg(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function jy(t,e,n,i){const{props:o,attrs:a,vnode:{patchFlag:l}}=t,f=Jn(o),[p]=t.propsOptions;let v=!1;if((i||l>0)&&!(l&16)){if(l&8){const b=t.vnode.dynamicProps;for(let w=0;w<b.length;w++){let S=b[w];if(Zh(t.emitsOptions,S))continue;const x=e[S];if(p)if(ai(a,S))x!==a[S]&&(a[S]=x,v=!0);else{const R=To(S);o[R]=rd(p,f,R,x,t,!1)}else x!==a[S]&&(a[S]=x,v=!0)}}}else{mm(t,e,o,a)&&(v=!0);let b;for(const w in f)(!e||!ai(e,w)&&((b=uu(w))===w||!ai(e,b)))&&(p?n&&(n[w]!==void 0||n[b]!==void 0)&&(o[w]=rd(p,f,w,void 0,t,!0)):delete o[w]);if(a!==f)for(const w in a)(!e||!ai(e,w))&&(delete a[w],v=!0)}v&&Ka(t.attrs,"set","")}function mm(t,e,n,i){const[o,a]=t.propsOptions;let l=!1,f;if(e)for(let p in e){if(uc(p))continue;const v=e[p];let b;o&&ai(o,b=To(p))?!a||!a.includes(b)?n[b]=v:(f||(f={}))[b]=v:Zh(t.emitsOptions,p)||(!(p in i)||v!==i[p])&&(i[p]=v,l=!0)}if(a){const p=Jn(n),v=f||mi;for(let b=0;b<a.length;b++){const w=a[b];n[w]=rd(o,p,w,v[w],t,!ai(v,w))}}return l}function rd(t,e,n,i,o,a){const l=t[n];if(l!=null){const f=ai(l,"default");if(f&&i===void 0){const p=l.default;if(l.type!==Function&&!l.skipFactory&&An(p)){const{propsDefaults:v}=o;if(n in v)i=v[n];else{const b=Rc(o);i=v[n]=p.call(null,e),b()}}else i=p;o.ce&&o.ce._setProp(n,i)}l[0]&&(a&&!f?i=!1:l[1]&&(i===""||i===uu(n))&&(i=!0))}return i}const zy=new WeakMap;function vm(t,e,n=!1){const i=n?zy:e.propsCache,o=i.get(t);if(o)return o;const a=t.props,l={},f=[];let p=!1;if(!An(t)){const b=w=>{p=!0;const[S,x]=vm(w,e,!0);Or(l,S),x&&f.push(...x)};!n&&e.mixins.length&&e.mixins.forEach(b),t.extends&&b(t.extends),t.mixins&&t.mixins.forEach(b)}if(!a&&!p)return vi(t)&&i.set(t,Du),Du;if(pn(a))for(let b=0;b<a.length;b++){const w=To(a[b]);Mp(w)&&(l[w]=mi)}else if(a)for(const b in a){const w=To(b);if(Mp(w)){const S=a[b],x=l[w]=pn(S)||An(S)?{type:S}:Or({},S),R=x.type;let N=!1,j=!0;if(pn(R))for(let U=0;U<R.length;++U){const W=R[U],X=An(W)&&W.name;if(X==="Boolean"){N=!0;break}else X==="String"&&(j=!1)}else N=An(R)&&R.name==="Boolean";x[0]=N,x[1]=j,(N||ai(x,"default"))&&f.push(w)}}const v=[l,f];return vi(t)&&i.set(t,v),v}function Mp(t){return t[0]!=="$"&&!uc(t)}const ym=t=>t[0]==="_"||t==="$stable",Yd=t=>pn(t)?t.map(La):[La(t)],Uy=(t,e,n)=>{if(e._n)return e;const i=Ja((...o)=>Yd(e(...o)),n);return i._c=!1,i},_m=(t,e,n)=>{const i=t._ctx;for(const o in t){if(ym(o))continue;const a=t[o];if(An(a))e[o]=Uy(o,a,i);else if(a!=null){const l=Yd(a);e[o]=()=>l}}},bm=(t,e)=>{const n=Yd(e);t.slots.default=()=>n},wm=(t,e,n)=>{for(const i in e)(n||i!=="_")&&(t[i]=e[i])},qy=(t,e,n)=>{const i=t.slots=pm();if(t.vnode.shapeFlag&32){const o=e._;o?(wm(i,e,n),n&&kg(i,"_",o,!0)):_m(e,i)}else e&&bm(t,e)},$y=(t,e,n)=>{const{vnode:i,slots:o}=t;let a=!0,l=mi;if(i.shapeFlag&32){const f=e._;f?n&&f===1?a=!1:wm(o,e,n):(a=!e.$stable,_m(e,o)),l=e}else e&&(bm(t,e),l={default:1});if(a)for(const f in o)!ym(f)&&l[f]==null&&delete o[f]},so=i2;function Vy(t){return Hy(t)}function Hy(t,e){const n=zh();n.__VUE__=!0;const{insert:i,remove:o,patchProp:a,createElement:l,createText:f,createComment:p,setText:v,setElementText:b,parentNode:w,nextSibling:S,setScopeId:x=Pa,insertStaticContent:R}=t,N=(G,tt,yt,vt=null,Y=null,$t=null,ee=void 0,Ht=null,Rt=!!tt.dynamicChildren)=>{if(G===tt)return;G&&!Kl(G,tt)&&(vt=q(G),I(G,Y,$t,!0),G=null),tt.patchFlag===-2&&(Rt=!1,tt.dynamicChildren=null);const{type:wt,ref:oe,shapeFlag:ne}=tt;switch(wt){case Kh:j(G,tt,yt,vt);break;case Us:U(G,tt,yt,vt);break;case lh:G==null&&W(tt,yt,vt,ee);break;case _n:Z(G,tt,yt,vt,Y,$t,ee,Ht,Rt);break;default:ne&1?Mt(G,tt,yt,vt,Y,$t,ee,Ht,Rt):ne&6?Et(G,tt,yt,vt,Y,$t,ee,Ht,Rt):(ne&64||ne&128)&&wt.process(G,tt,yt,vt,Y,$t,ee,Ht,Rt,At)}oe!=null&&Y&&Ph(oe,G&&G.ref,$t,tt||G,!tt)},j=(G,tt,yt,vt)=>{if(G==null)i(tt.el=f(tt.children),yt,vt);else{const Y=tt.el=G.el;tt.children!==G.children&&v(Y,tt.children)}},U=(G,tt,yt,vt)=>{G==null?i(tt.el=p(tt.children||""),yt,vt):tt.el=G.el},W=(G,tt,yt,vt)=>{[G.el,G.anchor]=R(G.children,tt,yt,vt,G.el,G.anchor)},X=({el:G,anchor:tt},yt,vt)=>{let Y;for(;G&&G!==tt;)Y=S(G),i(G,yt,vt),G=Y;i(tt,yt,vt)},St=({el:G,anchor:tt})=>{let yt;for(;G&&G!==tt;)yt=S(G),o(G),G=yt;o(tt)},Mt=(G,tt,yt,vt,Y,$t,ee,Ht,Rt)=>{tt.type==="svg"?ee="svg":tt.type==="math"&&(ee="mathml"),G==null?Nt(tt,yt,vt,Y,$t,ee,Ht,Rt):_t(G,tt,Y,$t,ee,Ht,Rt)},Nt=(G,tt,yt,vt,Y,$t,ee,Ht)=>{let Rt,wt;const{props:oe,shapeFlag:ne,transition:xe,dirs:Ut}=G;if(Rt=G.el=l(G.type,$t,oe&&oe.is,oe),ne&8?b(Rt,G.children):ne&16&&gt(G.children,Rt,null,vt,Y,Sf(G,$t),ee,Ht),Ut&&$l(G,null,vt,"created"),Lt(Rt,G,G.scopeId,ee,vt),oe){for(const qe in oe)qe!=="value"&&!uc(qe)&&a(Rt,qe,null,oe[qe],$t,vt);"value"in oe&&a(Rt,"value",null,oe.value,$t),(wt=oe.onVnodeBeforeMount)&&ya(wt,vt,G)}Ut&&$l(G,null,vt,"beforeMount");const te=Gy(Y,xe);te&&xe.beforeEnter(Rt),i(Rt,tt,yt),((wt=oe&&oe.onVnodeMounted)||te||Ut)&&so(()=>{wt&&ya(wt,vt,G),te&&xe.enter(Rt),Ut&&$l(G,null,vt,"mounted")},Y)},Lt=(G,tt,yt,vt,Y)=>{if(yt&&x(G,yt),vt)for(let $t=0;$t<vt.length;$t++)x(G,vt[$t]);if(Y){let $t=Y.subTree;if(tt===$t||Sm($t.type)&&($t.ssContent===tt||$t.ssFallback===tt)){const ee=Y.vnode;Lt(G,ee,ee.scopeId,ee.slotScopeIds,Y.parent)}}},gt=(G,tt,yt,vt,Y,$t,ee,Ht,Rt=0)=>{for(let wt=Rt;wt<G.length;wt++){const oe=G[wt]=Ht?Cl(G[wt]):La(G[wt]);N(null,oe,tt,yt,vt,Y,$t,ee,Ht)}},_t=(G,tt,yt,vt,Y,$t,ee)=>{const Ht=tt.el=G.el;let{patchFlag:Rt,dynamicChildren:wt,dirs:oe}=tt;Rt|=G.patchFlag&16;const ne=G.props||mi,xe=tt.props||mi;let Ut;if(yt&&Vl(yt,!1),(Ut=xe.onVnodeBeforeUpdate)&&ya(Ut,yt,tt,G),oe&&$l(tt,G,yt,"beforeUpdate"),yt&&Vl(yt,!0),(ne.innerHTML&&xe.innerHTML==null||ne.textContent&&xe.textContent==null)&&b(Ht,""),wt?zt(G.dynamicChildren,wt,Ht,yt,vt,Sf(tt,Y),$t):ee||z(G,tt,Ht,null,yt,vt,Sf(tt,Y),$t,!1),Rt>0){if(Rt&16)J(Ht,ne,xe,yt,Y);else if(Rt&2&&ne.class!==xe.class&&a(Ht,"class",null,xe.class,Y),Rt&4&&a(Ht,"style",ne.style,xe.style,Y),Rt&8){const te=tt.dynamicProps;for(let qe=0;qe<te.length;qe++){const He=te[qe],ze=ne[He],Xe=xe[He];(Xe!==ze||He==="value")&&a(Ht,He,ze,Xe,Y,yt)}}Rt&1&&G.children!==tt.children&&b(Ht,tt.children)}else!ee&&wt==null&&J(Ht,ne,xe,yt,Y);((Ut=xe.onVnodeUpdated)||oe)&&so(()=>{Ut&&ya(Ut,yt,tt,G),oe&&$l(tt,G,yt,"updated")},vt)},zt=(G,tt,yt,vt,Y,$t,ee)=>{for(let Ht=0;Ht<tt.length;Ht++){const Rt=G[Ht],wt=tt[Ht],oe=Rt.el&&(Rt.type===_n||!Kl(Rt,wt)||Rt.shapeFlag&70)?w(Rt.el):yt;N(Rt,wt,oe,null,vt,Y,$t,ee,!0)}},J=(G,tt,yt,vt,Y)=>{if(tt!==yt){if(tt!==mi)for(const $t in tt)!uc($t)&&!($t in yt)&&a(G,$t,tt[$t],null,Y,vt);for(const $t in yt){if(uc($t))continue;const ee=yt[$t],Ht=tt[$t];ee!==Ht&&$t!=="value"&&a(G,$t,Ht,ee,Y,vt)}"value"in yt&&a(G,"value",tt.value,yt.value,Y)}},Z=(G,tt,yt,vt,Y,$t,ee,Ht,Rt)=>{const wt=tt.el=G?G.el:f(""),oe=tt.anchor=G?G.anchor:f("");let{patchFlag:ne,dynamicChildren:xe,slotScopeIds:Ut}=tt;Ut&&(Ht=Ht?Ht.concat(Ut):Ut),G==null?(i(wt,yt,vt),i(oe,yt,vt),gt(tt.children||[],yt,oe,Y,$t,ee,Ht,Rt)):ne>0&&ne&64&&xe&&G.dynamicChildren?(zt(G.dynamicChildren,xe,yt,Y,$t,ee,Ht),(tt.key!=null||Y&&tt===Y.subTree)&&xm(G,tt,!0)):z(G,tt,yt,oe,Y,$t,ee,Ht,Rt)},Et=(G,tt,yt,vt,Y,$t,ee,Ht,Rt)=>{tt.slotScopeIds=Ht,G==null?tt.shapeFlag&512?Y.ctx.activate(tt,yt,vt,ee,Rt):Bt(tt,yt,vt,Y,$t,ee,Rt):A(G,tt,Rt)},Bt=(G,tt,yt,vt,Y,$t,ee)=>{const Ht=G.component=c2(G,vt,Y);if(Vh(G)&&(Ht.ctx.renderer=At),f2(Ht,!1,ee),Ht.asyncDep){if(Y&&Y.registerDep(Ht,H,ee),!G.el){const Rt=Ht.subTree=Ai(Us);U(null,Rt,tt,yt)}}else H(Ht,G,tt,yt,Y,$t,ee)},A=(G,tt,yt)=>{const vt=tt.component=G.component;if(e2(G,tt,yt))if(vt.asyncDep&&!vt.asyncResolved){V(vt,tt,yt);return}else vt.next=tt,vt.update();else tt.el=G.el,vt.vnode=tt},H=(G,tt,yt,vt,Y,$t,ee)=>{const Ht=()=>{if(G.isMounted){let{next:ne,bu:xe,u:Ut,parent:te,vnode:qe}=G;{const an=Lm(G);if(an){ne&&(ne.el=qe.el,V(G,ne,ee)),an.asyncDep.then(()=>{G.isUnmounted||Ht()});return}}let He=ne,ze;Vl(G,!1),ne?(ne.el=qe.el,V(G,ne,ee)):ne=qe,xe&&oh(xe),(ze=ne.props&&ne.props.onVnodeBeforeUpdate)&&ya(ze,te,ne,qe),Vl(G,!0);const Xe=Tp(G),Oe=G.subTree;G.subTree=Xe,N(Oe,Xe,w(Oe.el),q(Oe),G,Y,$t),ne.el=Xe.el,He===null&&n2(G,Xe.el),Ut&&so(Ut,Y),(ze=ne.props&&ne.props.onVnodeUpdated)&&so(()=>ya(ze,te,ne,qe),Y)}else{let ne;const{el:xe,props:Ut}=tt,{bm:te,m:qe,parent:He,root:ze,type:Xe}=G,Oe=fc(tt);Vl(G,!1),te&&oh(te),!Oe&&(ne=Ut&&Ut.onVnodeBeforeMount)&&ya(ne,He,tt),Vl(G,!0);{ze.ce&&ze.ce._injectChildStyle(Xe);const an=G.subTree=Tp(G);N(null,an,yt,vt,G,Y,$t),tt.el=an.el}if(qe&&so(qe,Y),!Oe&&(ne=Ut&&Ut.onVnodeMounted)){const an=tt;so(()=>ya(ne,He,an),Y)}(tt.shapeFlag&256||He&&fc(He.vnode)&&He.vnode.shapeFlag&256)&&G.a&&so(G.a,Y),G.isMounted=!0,tt=yt=vt=null}};G.scope.on();const Rt=G.effect=new Dg(Ht);G.scope.off();const wt=G.update=Rt.run.bind(Rt),oe=G.job=Rt.runIfDirty.bind(Rt);oe.i=G,oe.id=G.uid,Rt.scheduler=()=>Kd(oe),Vl(G,!0),wt()},V=(G,tt,yt)=>{tt.component=G;const vt=G.vnode.props;G.vnode=tt,G.next=null,jy(G,tt.props,vt,yt),$y(G,tt.children,yt),Ol(),Lp(G),Rl()},z=(G,tt,yt,vt,Y,$t,ee,Ht,Rt=!1)=>{const wt=G&&G.children,oe=G?G.shapeFlag:0,ne=tt.children,{patchFlag:xe,shapeFlag:Ut}=tt;if(xe>0){if(xe&128){ft(wt,ne,yt,vt,Y,$t,ee,Ht,Rt);return}else if(xe&256){mt(wt,ne,yt,vt,Y,$t,ee,Ht,Rt);return}}Ut&8?(oe&16&&D(wt,Y,$t),ne!==wt&&b(yt,ne)):oe&16?Ut&16?ft(wt,ne,yt,vt,Y,$t,ee,Ht,Rt):D(wt,Y,$t,!0):(oe&8&&b(yt,""),Ut&16&&gt(ne,yt,vt,Y,$t,ee,Ht,Rt))},mt=(G,tt,yt,vt,Y,$t,ee,Ht,Rt)=>{G=G||Du,tt=tt||Du;const wt=G.length,oe=tt.length,ne=Math.min(wt,oe);let xe;for(xe=0;xe<ne;xe++){const Ut=tt[xe]=Rt?Cl(tt[xe]):La(tt[xe]);N(G[xe],Ut,yt,null,Y,$t,ee,Ht,Rt)}wt>oe?D(G,Y,$t,!0,!1,ne):gt(tt,yt,vt,Y,$t,ee,Ht,Rt,ne)},ft=(G,tt,yt,vt,Y,$t,ee,Ht,Rt)=>{let wt=0;const oe=tt.length;let ne=G.length-1,xe=oe-1;for(;wt<=ne&&wt<=xe;){const Ut=G[wt],te=tt[wt]=Rt?Cl(tt[wt]):La(tt[wt]);if(Kl(Ut,te))N(Ut,te,yt,null,Y,$t,ee,Ht,Rt);else break;wt++}for(;wt<=ne&&wt<=xe;){const Ut=G[ne],te=tt[xe]=Rt?Cl(tt[xe]):La(tt[xe]);if(Kl(Ut,te))N(Ut,te,yt,null,Y,$t,ee,Ht,Rt);else break;ne--,xe--}if(wt>ne){if(wt<=xe){const Ut=xe+1,te=Ut<oe?tt[Ut].el:vt;for(;wt<=xe;)N(null,tt[wt]=Rt?Cl(tt[wt]):La(tt[wt]),yt,te,Y,$t,ee,Ht,Rt),wt++}}else if(wt>xe)for(;wt<=ne;)I(G[wt],Y,$t,!0),wt++;else{const Ut=wt,te=wt,qe=new Map;for(wt=te;wt<=xe;wt++){const sn=tt[wt]=Rt?Cl(tt[wt]):La(tt[wt]);sn.key!=null&&qe.set(sn.key,wt)}let He,ze=0;const Xe=xe-te+1;let Oe=!1,an=0;const gn=new Array(Xe);for(wt=0;wt<Xe;wt++)gn[wt]=0;for(wt=Ut;wt<=ne;wt++){const sn=G[wt];if(ze>=Xe){I(sn,Y,$t,!0);continue}let dn;if(sn.key!=null)dn=qe.get(sn.key);else for(He=te;He<=xe;He++)if(gn[He-te]===0&&Kl(sn,tt[He])){dn=He;break}dn===void 0?I(sn,Y,$t,!0):(gn[dn-te]=wt+1,dn>=an?an=dn:Oe=!0,N(sn,tt[dn],yt,null,Y,$t,ee,Ht,Rt),ze++)}const di=Oe?Wy(gn):Du;for(He=di.length-1,wt=Xe-1;wt>=0;wt--){const sn=te+wt,dn=tt[sn],Ze=sn+1<oe?tt[sn+1].el:vt;gn[wt]===0?N(null,dn,yt,Ze,Y,$t,ee,Ht,Rt):Oe&&(He<0||wt!==di[He]?ht(dn,yt,Ze,2):He--)}}},ht=(G,tt,yt,vt,Y=null)=>{const{el:$t,type:ee,transition:Ht,children:Rt,shapeFlag:wt}=G;if(wt&6){ht(G.component.subTree,tt,yt,vt);return}if(wt&128){G.suspense.move(tt,yt,vt);return}if(wt&64){ee.move(G,tt,yt,At);return}if(ee===_n){i($t,tt,yt);for(let ne=0;ne<Rt.length;ne++)ht(Rt[ne],tt,yt,vt);i(G.anchor,tt,yt);return}if(ee===lh){X(G,tt,yt);return}if(vt!==2&&wt&1&&Ht)if(vt===0)Ht.beforeEnter($t),i($t,tt,yt),so(()=>Ht.enter($t),Y);else{const{leave:ne,delayLeave:xe,afterLeave:Ut}=Ht,te=()=>i($t,tt,yt),qe=()=>{ne($t,()=>{te(),Ut&&Ut()})};xe?xe($t,te,qe):qe()}else i($t,tt,yt)},I=(G,tt,yt,vt=!1,Y=!1)=>{const{type:$t,props:ee,ref:Ht,children:Rt,dynamicChildren:wt,shapeFlag:oe,patchFlag:ne,dirs:xe,cacheIndex:Ut}=G;if(ne===-2&&(Y=!1),Ht!=null&&Ph(Ht,null,yt,G,!0),Ut!=null&&(tt.renderCache[Ut]=void 0),oe&256){tt.ctx.deactivate(G);return}const te=oe&1&&xe,qe=!fc(G);let He;if(qe&&(He=ee&&ee.onVnodeBeforeUnmount)&&ya(He,tt,G),oe&6)$(G.component,yt,vt);else{if(oe&128){G.suspense.unmount(yt,vt);return}te&&$l(G,null,tt,"beforeUnmount"),oe&64?G.type.remove(G,tt,yt,At,vt):wt&&!wt.hasOnce&&($t!==_n||ne>0&&ne&64)?D(wt,tt,yt,!1,!0):($t===_n&&ne&384||!Y&&oe&16)&&D(Rt,tt,yt),vt&&it(G)}(qe&&(He=ee&&ee.onVnodeUnmounted)||te)&&so(()=>{He&&ya(He,tt,G),te&&$l(G,null,tt,"unmounted")},yt)},it=G=>{const{type:tt,el:yt,anchor:vt,transition:Y}=G;if(tt===_n){rt(yt,vt);return}if(tt===lh){St(G);return}const $t=()=>{o(yt),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(G.shapeFlag&1&&Y&&!Y.persisted){const{leave:ee,delayLeave:Ht}=Y,Rt=()=>ee(yt,$t);Ht?Ht(G.el,$t,Rt):Rt()}else $t()},rt=(G,tt)=>{let yt;for(;G!==tt;)yt=S(G),o(G),G=yt;o(tt)},$=(G,tt,yt)=>{const{bum:vt,scope:Y,job:$t,subTree:ee,um:Ht,m:Rt,a:wt}=G;Bp(Rt),Bp(wt),vt&&oh(vt),Y.stop(),$t&&($t.flags|=8,I(ee,G,tt,yt)),Ht&&so(Ht,tt),so(()=>{G.isUnmounted=!0},tt),tt&&tt.pendingBranch&&!tt.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===tt.pendingId&&(tt.deps--,tt.deps===0&&tt.resolve())},D=(G,tt,yt,vt=!1,Y=!1,$t=0)=>{for(let ee=$t;ee<G.length;ee++)I(G[ee],tt,yt,vt,Y)},q=G=>{if(G.shapeFlag&6)return q(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const tt=S(G.anchor||G.el),yt=tt&&tt[hy];return yt?S(yt):tt};let dt=!1;const ct=(G,tt,yt)=>{G==null?tt._vnode&&I(tt._vnode,null,null,!0):N(tt._vnode||null,G,tt,null,null,null,yt),tt._vnode=G,dt||(dt=!0,Lp(),Qg(),dt=!1)},At={p:N,um:I,m:ht,r:it,mt:Bt,mc:gt,pc:z,pbc:zt,n:q,o:t};return{render:ct,hydrate:void 0,createApp:Ry(ct)}}function Sf({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Vl({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Gy(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function xm(t,e,n=!1){const i=t.children,o=e.children;if(pn(i)&&pn(o))for(let a=0;a<i.length;a++){const l=i[a];let f=o[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=o[a]=Cl(o[a]),f.el=l.el),!n&&f.patchFlag!==-2&&xm(l,f)),f.type===Kh&&(f.el=l.el)}}function Wy(t){const e=t.slice(),n=[0];let i,o,a,l,f;const p=t.length;for(i=0;i<p;i++){const v=t[i];if(v!==0){if(o=n[n.length-1],t[o]<v){e[i]=o,n.push(i);continue}for(a=0,l=n.length-1;a<l;)f=a+l>>1,t[n[f]]<v?a=f+1:l=f;v<t[n[a]]&&(a>0&&(e[i]=n[a-1]),n[a]=i)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=e[l];return n}function Lm(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Lm(e)}function Bp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Zy=Symbol.for("v-scx"),Ky=()=>Mo(Zy);function qr(t,e,n){return Cm(t,e,n)}function Cm(t,e,n=mi){const{immediate:i,deep:o,flush:a,once:l}=n,f=Or({},n),p=e&&i||!e&&a!=="post";let v;if(kc){if(a==="sync"){const x=Ky();v=x.__watcherHandles||(x.__watcherHandles=[])}else if(!p){const x=()=>{};return x.stop=Pa,x.resume=Pa,x.pause=Pa,x}}const b=Nr;f.call=(x,R,N)=>Jo(x,b,R,N);let w=!1;a==="post"?f.scheduler=x=>{so(x,b&&b.suspense)}:a!=="sync"&&(w=!0,f.scheduler=(x,R)=>{R?x():Kd(x)}),f.augmentJob=x=>{e&&(x.flags|=4),w&&(x.flags|=2,b&&(x.id=b.uid,x.i=b))};const S=ay(t,e,f);return kc&&(v?v.push(S):p&&S()),S}function Yy(t,e,n){const i=this.proxy,o=nr(t)?t.includes(".")?Pm(i,t):()=>i[t]:t.bind(i,i);let a;An(e)?a=e:(a=e.handler,n=e);const l=Rc(this),f=Cm(o,a.bind(i),n);return l(),f}function Pm(t,e){const n=e.split(".");return()=>{let i=t;for(let o=0;o<n.length&&i;o++)i=i[n[o]];return i}}const Jy=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${To(e)}Modifiers`]||t[`${uu(e)}Modifiers`];function Xy(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||mi;let o=n;const a=e.startsWith("update:"),l=a&&Jy(i,e.slice(7));l&&(l.trim&&(o=n.map(b=>nr(b)?b.trim():b)),l.number&&(o=n.map(bh)));let f,p=i[f=bf(e)]||i[f=bf(To(e))];!p&&a&&(p=i[f=bf(uu(e))]),p&&Jo(p,t,6,o);const v=i[f+"Once"];if(v){if(!t.emitted)t.emitted={};else if(t.emitted[f])return;t.emitted[f]=!0,Jo(v,t,6,o)}}function km(t,e,n=!1){const i=e.emitsCache,o=i.get(t);if(o!==void 0)return o;const a=t.emits;let l={},f=!1;if(!An(t)){const p=v=>{const b=km(v,e,!0);b&&(f=!0,Or(l,b))};!n&&e.mixins.length&&e.mixins.forEach(p),t.extends&&p(t.extends),t.mixins&&t.mixins.forEach(p)}return!a&&!f?(vi(t)&&i.set(t,null),null):(pn(a)?a.forEach(p=>l[p]=null):Or(l,a),vi(t)&&i.set(t,l),l)}function Zh(t,e){return!t||!Ih(e)?!1:(e=e.slice(2).replace(/Once$/,""),ai(t,e[0].toLowerCase()+e.slice(1))||ai(t,uu(e))||ai(t,e))}function Tp(t){const{type:e,vnode:n,proxy:i,withProxy:o,propsOptions:[a],slots:l,attrs:f,emit:p,render:v,renderCache:b,props:w,data:S,setupState:x,ctx:R,inheritAttrs:N}=t,j=Ch(t);let U,W;try{if(n.shapeFlag&4){const St=o||i,Mt=St;U=La(v.call(Mt,St,b,w,x,S,R)),W=f}else{const St=e;U=La(St.length>1?St(w,{attrs:f,slots:l,emit:p}):St(w,null)),W=e.props?f:Qy(f)}}catch(St){pc.length=0,$h(St,t,1),U=Ai(Us)}let X=U;if(W&&N!==!1){const St=Object.keys(W),{shapeFlag:Mt}=X;St.length&&Mt&7&&(a&&St.some(Id)&&(W=t2(W,a)),X=Bl(X,W,!1,!0))}return n.dirs&&(X=Bl(X,null,!1,!0),X.dirs=X.dirs?X.dirs.concat(n.dirs):n.dirs),n.transition&&Cc(X,n.transition),U=X,Ch(j),U}const Qy=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ih(n))&&((e||(e={}))[n]=t[n]);return e},t2=(t,e)=>{const n={};for(const i in t)(!Id(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function e2(t,e,n){const{props:i,children:o,component:a}=t,{props:l,children:f,patchFlag:p}=e,v=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return i?Dp(i,l,v):!!l;if(p&8){const b=e.dynamicProps;for(let w=0;w<b.length;w++){const S=b[w];if(l[S]!==i[S]&&!Zh(v,S))return!0}}}else return(o||f)&&(!f||!f.$stable)?!0:i===l?!1:i?l?Dp(i,l,v):!0:!!l;return!1}function Dp(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let o=0;o<i.length;o++){const a=i[o];if(e[a]!==t[a]&&!Zh(n,a))return!0}return!1}function n2({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const Sm=t=>t.__isSuspense;function i2(t,e){e&&e.pendingBranch?pn(t)?e.effects.push(...t):e.effects.push(t):cy(t)}const _n=Symbol.for("v-fgt"),Kh=Symbol.for("v-txt"),Us=Symbol.for("v-cmt"),lh=Symbol.for("v-stc"),pc=[];let oo=null;function se(t=!1){pc.push(oo=t?null:[])}function r2(){pc.pop(),oo=pc[pc.length-1]||null}let Pc=1;function Np(t,e=!1){Pc+=t,t<0&&oo&&e&&(oo.hasOnce=!0)}function Em(t){return t.dynamicChildren=Pc>0?oo||Du:null,r2(),Pc>0&&oo&&oo.push(t),t}function ce(t,e,n,i,o,a){return Em(M(t,e,n,i,o,a,!0))}function tl(t,e,n,i,o){return Em(Ai(t,e,n,i,o,!0))}function Sh(t){return t?t.__v_isVNode===!0:!1}function Kl(t,e){return t.type===e.type&&t.key===e.key}const Am=({key:t})=>t??null,uh=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?nr(t)||er(t)||An(t)?{i:ws,r:t,k:e,f:!!n}:t:null);function M(t,e=null,n=null,i=0,o=null,a=t===_n?0:1,l=!1,f=!1){const p={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Am(e),ref:e&&uh(e),scopeId:em,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ws};return f?(Jd(p,n),a&128&&t.normalize(p)):n&&(p.shapeFlag|=nr(n)?8:16),Pc>0&&!l&&oo&&(p.patchFlag>0||a&6)&&p.patchFlag!==32&&oo.push(p),p}const Ai=s2;function s2(t,e=null,n=null,i=0,o=null,a=!1){if((!t||t===Sy)&&(t=Us),Sh(t)){const f=Bl(t,e,!0);return n&&Jd(f,n),Pc>0&&!a&&oo&&(f.shapeFlag&6?oo[oo.indexOf(t)]=f:oo.push(f)),f.patchFlag=-2,f}if(v2(t)&&(t=t.__vccOpts),e){e=o2(e);let{class:f,style:p}=e;f&&!nr(f)&&(e.class=Di(f)),vi(p)&&(Wd(p)&&!pn(p)&&(p=Or({},p)),e.style=Uh(p))}const l=nr(t)?1:Sm(t)?128:nm(t)?64:vi(t)?4:An(t)?2:0;return M(t,e,n,i,o,l,a,!0)}function o2(t){return t?Wd(t)||gm(t)?Or({},t):t:null}function Bl(t,e,n=!1,i=!1){const{props:o,ref:a,patchFlag:l,children:f,transition:p}=t,v=e?a2(o||{},e):o,b={__v_isVNode:!0,__v_skip:!0,type:t.type,props:v,key:v&&Am(v),ref:e&&e.ref?n&&a?pn(a)?a.concat(uh(e)):[a,uh(e)]:uh(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:f,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_n?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:p,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Bl(t.ssContent),ssFallback:t.ssFallback&&Bl(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return p&&i&&Cc(b,p.clone(b)),b}function Gi(t=" ",e=0){return Ai(Kh,null,t,e)}function gc(t,e){const n=Ai(lh,null,t);return n.staticCount=e,n}function en(t="",e=!1){return e?(se(),tl(Us,null,t)):Ai(Us,null,t)}function La(t){return t==null||typeof t=="boolean"?Ai(Us):pn(t)?Ai(_n,null,t.slice()):Sh(t)?Cl(t):Ai(Kh,null,String(t))}function Cl(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Bl(t)}function Jd(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(pn(e))n=16;else if(typeof e=="object")if(i&65){const o=e.default;o&&(o._c&&(o._d=!1),Jd(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!gm(e)?e._ctx=ws:o===3&&ws&&(ws.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else An(e)?(e={default:e,_ctx:ws},n=32):(e=String(e),i&64?(n=16,e=[Gi(e)]):n=8);t.children=e,t.shapeFlag|=n}function a2(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const o in i)if(o==="class")e.class!==i.class&&(e.class=Di([e.class,i.class]));else if(o==="style")e.style=Uh([e.style,i.style]);else if(Ih(o)){const a=e[o],l=i[o];l&&a!==l&&!(pn(a)&&a.includes(l))&&(e[o]=a?[].concat(a,l):l)}else o!==""&&(e[o]=i[o])}return e}function ya(t,e,n,i=null){Jo(t,e,7,[n,i])}const l2=fm();let u2=0;function c2(t,e,n){const i=t.type,o=(e?e.appContext:t.appContext)||l2,a={uid:u2++,vnode:t,type:i,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vm(i,o),emitsOptions:km(i,o),emit:null,emitted:null,propsDefaults:mi,inheritAttrs:i.inheritAttrs,ctx:mi,data:mi,props:mi,attrs:mi,slots:mi,refs:mi,setupState:mi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Xy.bind(null,a),t.ce&&t.ce(a),a}let Nr=null;const h2=()=>Nr||ws;let Eh,sd;{const t=zh(),e=(n,i)=>{let o;return(o=t[n])||(o=t[n]=[]),o.push(i),a=>{o.length>1?o.forEach(l=>l(a)):o[0](a)}};Eh=e("__VUE_INSTANCE_SETTERS__",n=>Nr=n),sd=e("__VUE_SSR_SETTERS__",n=>kc=n)}const Rc=t=>{const e=Nr;return Eh(t),t.scope.on(),()=>{t.scope.off(),Eh(e)}},Op=()=>{Nr&&Nr.scope.off(),Eh(null)};function Mm(t){return t.vnode.shapeFlag&4}let kc=!1;function f2(t,e=!1,n=!1){e&&sd(e);const{props:i,children:o}=t.vnode,a=Mm(t);Fy(t,i,a,e),qy(t,o,n);const l=a?d2(t,e):void 0;return e&&sd(!1),l}function d2(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Ay);const{setup:i}=n;if(i){Ol();const o=t.setupContext=i.length>1?g2(t):null,a=Rc(t),l=Oc(i,t,0,[t.props,o]),f=Lg(l);if(Rl(),a(),(f||t.sp)&&!fc(t)&&lm(t),f){if(l.then(Op,Op),e)return l.then(p=>{Rp(t,p)}).catch(p=>{$h(p,t,0)});t.asyncDep=l}else Rp(t,l)}else Bm(t)}function Rp(t,e,n){An(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:vi(e)&&(t.setupState=Yg(e)),Bm(t)}function Bm(t,e,n){const i=t.type;t.render||(t.render=i.render||Pa);{const o=Rc(t);Ol();try{My(t)}finally{Rl(),o()}}}const p2={get(t,e){return ss(t,"get",""),t[e]}};function g2(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,p2),slots:t.slots,emit:t.emit,expose:e}}function Yh(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Yg(Zd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in dc)return dc[n](t)},has(e,n){return n in e||n in dc}})):t.proxy}function m2(t,e=!0){return An(t)?t.displayName||t.name:t.name||e&&t.__name}function v2(t){return An(t)&&"__vccOpts"in t}const jn=(t,e)=>sy(t,e,kc);function Xd(t,e,n){const i=arguments.length;return i===2?vi(e)&&!pn(e)?Sh(e)?Ai(t,null,[e]):Ai(t,e):Ai(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Sh(n)&&(n=[n]),Ai(t,e,n))}const y2="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let od;const Ip=typeof window<"u"&&window.trustedTypes;if(Ip)try{od=Ip.createPolicy("vue",{createHTML:t=>t})}catch{}const Tm=od?t=>od.createHTML(t):t=>t,_2="http://www.w3.org/2000/svg",b2="http://www.w3.org/1998/Math/MathML",Za=typeof document<"u"?document:null,Fp=Za&&Za.createElement("template"),w2={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const o=e==="svg"?Za.createElementNS(_2,t):e==="mathml"?Za.createElementNS(b2,t):n?Za.createElement(t,{is:n}):Za.createElement(t);return t==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:t=>Za.createTextNode(t),createComment:t=>Za.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Za.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,o,a){const l=n?n.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Fp.innerHTML=Tm(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const f=Fp.content;if(i==="svg"||i==="mathml"){const p=f.firstChild;for(;p.firstChild;)f.appendChild(p.firstChild);f.removeChild(p)}e.insertBefore(f,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vl="transition",Qu="animation",Sc=Symbol("_vtc"),Dm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},x2=Or({},im,Dm),L2=t=>(t.displayName="Transition",t.props=x2,t),jp=L2((t,{slots:e})=>Xd(py,C2(t),e)),Hl=(t,e=[])=>{pn(t)?t.forEach(n=>n(...e)):t&&t(...e)},zp=t=>t?pn(t)?t.some(e=>e.length>1):t.length>1:!1;function C2(t){const e={};for(const Z in t)Z in Dm||(e[Z]=t[Z]);if(t.css===!1)return e;const{name:n="v",type:i,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:p=a,appearActiveClass:v=l,appearToClass:b=f,leaveFromClass:w=`${n}-leave-from`,leaveActiveClass:S=`${n}-leave-active`,leaveToClass:x=`${n}-leave-to`}=t,R=P2(o),N=R&&R[0],j=R&&R[1],{onBeforeEnter:U,onEnter:W,onEnterCancelled:X,onLeave:St,onLeaveCancelled:Mt,onBeforeAppear:Nt=U,onAppear:Lt=W,onAppearCancelled:gt=X}=e,_t=(Z,Et,Bt,A)=>{Z._enterCancelled=A,Gl(Z,Et?b:f),Gl(Z,Et?v:l),Bt&&Bt()},zt=(Z,Et)=>{Z._isLeaving=!1,Gl(Z,w),Gl(Z,x),Gl(Z,S),Et&&Et()},J=Z=>(Et,Bt)=>{const A=Z?Lt:W,H=()=>_t(Et,Z,Bt);Hl(A,[Et,H]),Up(()=>{Gl(Et,Z?p:a),Ha(Et,Z?b:f),zp(A)||qp(Et,i,N,H)})};return Or(e,{onBeforeEnter(Z){Hl(U,[Z]),Ha(Z,a),Ha(Z,l)},onBeforeAppear(Z){Hl(Nt,[Z]),Ha(Z,p),Ha(Z,v)},onEnter:J(!1),onAppear:J(!0),onLeave(Z,Et){Z._isLeaving=!0;const Bt=()=>zt(Z,Et);Ha(Z,w),Z._enterCancelled?(Ha(Z,S),Hp()):(Hp(),Ha(Z,S)),Up(()=>{Z._isLeaving&&(Gl(Z,w),Ha(Z,x),zp(St)||qp(Z,i,j,Bt))}),Hl(St,[Z,Bt])},onEnterCancelled(Z){_t(Z,!1,void 0,!0),Hl(X,[Z])},onAppearCancelled(Z){_t(Z,!0,void 0,!0),Hl(gt,[Z])},onLeaveCancelled(Z){zt(Z),Hl(Mt,[Z])}})}function P2(t){if(t==null)return null;if(vi(t))return[Ef(t.enter),Ef(t.leave)];{const e=Ef(t);return[e,e]}}function Ef(t){return Cv(t)}function Ha(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Sc]||(t[Sc]=new Set)).add(e)}function Gl(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const n=t[Sc];n&&(n.delete(e),n.size||(t[Sc]=void 0))}function Up(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let k2=0;function qp(t,e,n,i){const o=t._endId=++k2,a=()=>{o===t._endId&&i()};if(n!=null)return setTimeout(a,n);const{type:l,timeout:f,propCount:p}=S2(t,e);if(!l)return i();const v=l+"end";let b=0;const w=()=>{t.removeEventListener(v,S),a()},S=x=>{x.target===t&&++b>=p&&w()};setTimeout(()=>{b<p&&w()},f+1),t.addEventListener(v,S)}function S2(t,e){const n=window.getComputedStyle(t),i=R=>(n[R]||"").split(", "),o=i(`${vl}Delay`),a=i(`${vl}Duration`),l=$p(o,a),f=i(`${Qu}Delay`),p=i(`${Qu}Duration`),v=$p(f,p);let b=null,w=0,S=0;e===vl?l>0&&(b=vl,w=l,S=a.length):e===Qu?v>0&&(b=Qu,w=v,S=p.length):(w=Math.max(l,v),b=w>0?l>v?vl:Qu:null,S=b?b===vl?a.length:p.length:0);const x=b===vl&&/\b(transform|all)(,|$)/.test(i(`${vl}Property`).toString());return{type:b,timeout:w,propCount:S,hasTransform:x}}function $p(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>Vp(n)+Vp(t[i])))}function Vp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Hp(){return document.body.offsetHeight}function E2(t,e,n){const i=t[Sc];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ah=Symbol("_vod"),Nm=Symbol("_vsh"),ch={beforeMount(t,{value:e},{transition:n}){t[Ah]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):tc(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),tc(t,!0),i.enter(t)):i.leave(t,()=>{tc(t,!1)}):tc(t,e))},beforeUnmount(t,{value:e}){tc(t,e)}};function tc(t,e){t.style.display=e?t[Ah]:"none",t[Nm]=!e}const A2=Symbol(""),M2=/(^|;)\s*display\s*:/;function B2(t,e,n){const i=t.style,o=nr(n);let a=!1;if(n&&!o){if(e)if(nr(e))for(const l of e.split(";")){const f=l.slice(0,l.indexOf(":")).trim();n[f]==null&&hh(i,f,"")}else for(const l in e)n[l]==null&&hh(i,l,"");for(const l in n)l==="display"&&(a=!0),hh(i,l,n[l])}else if(o){if(e!==n){const l=i[A2];l&&(n+=";"+l),i.cssText=n,a=M2.test(n)}}else e&&t.removeAttribute("style");Ah in t&&(t[Ah]=a?i.display:"",t[Nm]&&(i.display="none"))}const Gp=/\s*!important$/;function hh(t,e,n){if(pn(n))n.forEach(i=>hh(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=T2(t,e);Gp.test(n)?t.setProperty(uu(i),n.replace(Gp,""),"important"):t[i]=n}}const Wp=["Webkit","Moz","ms"],Af={};function T2(t,e){const n=Af[e];if(n)return n;let i=To(e);if(i!=="filter"&&i in t)return Af[e]=i;i=jh(i);for(let o=0;o<Wp.length;o++){const a=Wp[o]+i;if(a in t)return Af[e]=a}return e}const Zp="http://www.w3.org/1999/xlink";function Kp(t,e,n,i,o,a=Mv(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Zp,e.slice(6,e.length)):t.setAttributeNS(Zp,e,n):n==null||a&&!Sg(n)?t.removeAttribute(e):t.setAttribute(e,a?"":Sa(n)?String(n):n)}function Yp(t,e,n,i,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Tm(n):n);return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const f=a==="OPTION"?t.getAttribute("value")||"":t.value,p=n==null?t.type==="checkbox"?"on":"":String(n);(f!==p||!("_value"in t))&&(t.value=p),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const f=typeof t[e];f==="boolean"?n=Sg(n):n==null&&f==="string"?(n="",l=!0):f==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(o||e)}function Xa(t,e,n,i){t.addEventListener(e,n,i)}function D2(t,e,n,i){t.removeEventListener(e,n,i)}const Jp=Symbol("_vei");function N2(t,e,n,i,o=null){const a=t[Jp]||(t[Jp]={}),l=a[e];if(i&&l)l.value=i;else{const[f,p]=O2(e);if(i){const v=a[e]=F2(i,o);Xa(t,f,v,p)}else l&&(D2(t,f,l,p),a[e]=void 0)}}const Xp=/(?:Once|Passive|Capture)$/;function O2(t){let e;if(Xp.test(t)){e={};let i;for(;i=t.match(Xp);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):uu(t.slice(2)),e]}let Mf=0;const R2=Promise.resolve(),I2=()=>Mf||(R2.then(()=>Mf=0),Mf=Date.now());function F2(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Jo(j2(i,n.value),e,5,[i])};return n.value=t,n.attached=I2(),n}function j2(t,e){if(pn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>o=>!o._stopped&&i&&i(o))}else return e}const Qp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,z2=(t,e,n,i,o,a)=>{const l=o==="svg";e==="class"?E2(t,i,l):e==="style"?B2(t,n,i):Ih(e)?Id(e)||N2(t,e,n,i,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):U2(t,e,i,l))?(Yp(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Kp(t,e,i,l,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!nr(i))?Yp(t,To(e),i,a,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),Kp(t,e,i,l))};function U2(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&Qp(e)&&An(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Qp(e)&&nr(n)?!1:e in t}const Tl=t=>{const e=t.props["onUpdate:modelValue"]||!1;return pn(e)?n=>oh(e,n):e};function q2(t){t.target.composing=!0}function t0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Bo=Symbol("_assign"),Hn={created(t,{modifiers:{lazy:e,trim:n,number:i}},o){t[Bo]=Tl(o);const a=i||o.props&&o.props.type==="number";Xa(t,e?"change":"input",l=>{if(l.target.composing)return;let f=t.value;n&&(f=f.trim()),a&&(f=bh(f)),t[Bo](f)}),n&&Xa(t,"change",()=>{t.value=t.value.trim()}),e||(Xa(t,"compositionstart",q2),Xa(t,"compositionend",t0),Xa(t,"change",t0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:o,number:a}},l){if(t[Bo]=Tl(l),t.composing)return;const f=(a||t.type==="number")&&!/^0\d/.test(t.value)?bh(t.value):t.value,p=e??"";f!==p&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||o&&t.value.trim()===p)||(t.value=p))}},Om={deep:!0,created(t,e,n){t[Bo]=Tl(n),Xa(t,"change",()=>{const i=t._modelValue,o=zu(t),a=t.checked,l=t[Bo];if(pn(i)){const f=zd(i,o),p=f!==-1;if(a&&!p)l(i.concat(o));else if(!a&&p){const v=[...i];v.splice(f,1),l(v)}}else if($u(i)){const f=new Set(i);a?f.add(o):f.delete(o),l(f)}else l(Rm(t,a))})},mounted:e0,beforeUpdate(t,e,n){t[Bo]=Tl(n),e0(t,e,n)}};function e0(t,{value:e,oldValue:n},i){t._modelValue=e;let o;if(pn(e))o=zd(e,i.props.value)>-1;else if($u(e))o=e.has(i.props.value);else{if(e===n)return;o=su(e,Rm(t,!0))}t.checked!==o&&(t.checked=o)}const $2={created(t,{value:e},n){t.checked=su(e,n.props.value),t[Bo]=Tl(n),Xa(t,"change",()=>{t[Bo](zu(t))})},beforeUpdate(t,{value:e,oldValue:n},i){t[Bo]=Tl(i),e!==n&&(t.checked=su(e,i.props.value))}},qs={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const o=$u(e);Xa(t,"change",()=>{const a=Array.prototype.filter.call(t.options,l=>l.selected).map(l=>n?bh(zu(l)):zu(l));t[Bo](t.multiple?o?new Set(a):a:a[0]),t._assigning=!0,Vi(()=>{t._assigning=!1})}),t[Bo]=Tl(i)},mounted(t,{value:e}){n0(t,e)},beforeUpdate(t,e,n){t[Bo]=Tl(n)},updated(t,{value:e}){t._assigning||n0(t,e)}};function n0(t,e){const n=t.multiple,i=pn(e);if(!(n&&!i&&!$u(e))){for(let o=0,a=t.options.length;o<a;o++){const l=t.options[o],f=zu(l);if(n)if(i){const p=typeof f;p==="string"||p==="number"?l.selected=e.some(v=>String(v)===String(f)):l.selected=zd(e,f)>-1}else l.selected=e.has(f);else if(su(zu(l),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function zu(t){return"_value"in t?t._value:t.value}function Rm(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const V2={created(t,e,n){th(t,e,n,null,"created")},mounted(t,e,n){th(t,e,n,null,"mounted")},beforeUpdate(t,e,n,i){th(t,e,n,i,"beforeUpdate")},updated(t,e,n,i){th(t,e,n,i,"updated")}};function H2(t,e){switch(t){case"SELECT":return qs;case"TEXTAREA":return Hn;default:switch(e){case"checkbox":return Om;case"radio":return $2;default:return Hn}}}function th(t,e,n,i,o){const l=H2(t.tagName,n.props&&n.props.type)[o];l&&l(t,e,n,i)}const G2=["ctrl","shift","alt","meta"],W2={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>G2.some(n=>t[`${n}Key`]&&!e.includes(n))},Jh=(t,e)=>{const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=(o,...a)=>{for(let l=0;l<e.length;l++){const f=W2[e[l]];if(f&&f(o,e))return}return t(o,...a)})},Z2=Or({patchProp:z2},w2);let i0;function K2(){return i0||(i0=Vy(Z2))}const Y2=(...t)=>{const e=K2().createApp(...t),{mount:n}=e;return e.mount=i=>{const o=X2(i);if(!o)return;const a=e._component;!An(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=n(o,!1,J2(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},e};function J2(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function X2(t){return nr(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Im;const Xh=t=>Im=t,Fm=Symbol();function ad(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var mc;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(mc||(mc={}));function Q2(){const t=Bg(!0),e=t.run(()=>Ie({}));let n=[],i=[];const o=Zd({install(a){Xh(o),o._a=a,a.provide(Fm,o),a.config.globalProperties.$pinia=o,i.forEach(l=>n.push(l)),i=[]},use(a){return this._a?n.push(a):i.push(a),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return o}const jm=()=>{};function r0(t,e,n,i=jm){t.push(e);const o=()=>{const a=t.indexOf(e);a>-1&&(t.splice(a,1),i())};return!n&&Tg()&&Tv(o),o}function bu(t,...e){t.slice().forEach(n=>{n(...e)})}const t_=t=>t(),s0=Symbol(),Bf=Symbol();function ld(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,i)=>t.set(i,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const i=e[n],o=t[n];ad(o)&&ad(i)&&t.hasOwnProperty(n)&&!er(i)&&!Ml(i)?t[n]=ld(o,i):t[n]=i}return t}const e_=Symbol();function n_(t){return!ad(t)||!t.hasOwnProperty(e_)}const{assign:wl}=Object;function i_(t){return!!(er(t)&&t.effect)}function r_(t,e,n,i){const{state:o,actions:a,getters:l}=e,f=n.state.value[t];let p;function v(){f||(n.state.value[t]=o?o():{});const b=ey(n.state.value[t]);return wl(b,a,Object.keys(l||{}).reduce((w,S)=>(w[S]=Zd(jn(()=>{Xh(n);const x=n._s.get(t);return l[S].call(x,x)})),w),{}))}return p=zm(t,v,e,n,i,!0),p}function zm(t,e,n={},i,o,a){let l;const f=wl({actions:{}},n),p={deep:!0};let v,b,w=[],S=[],x;const R=i.state.value[t];!a&&!R&&(i.state.value[t]={}),Ie({});let N;function j(gt){let _t;v=b=!1,typeof gt=="function"?(gt(i.state.value[t]),_t={type:mc.patchFunction,storeId:t,events:x}):(ld(i.state.value[t],gt),_t={type:mc.patchObject,payload:gt,storeId:t,events:x});const zt=N=Symbol();Vi().then(()=>{N===zt&&(v=!0)}),b=!0,bu(w,_t,i.state.value[t])}const U=a?function(){const{state:_t}=n,zt=_t?_t():{};this.$patch(J=>{wl(J,zt)})}:jm;function W(){l.stop(),w=[],S=[],i._s.delete(t)}const X=(gt,_t="")=>{if(s0 in gt)return gt[Bf]=_t,gt;const zt=function(){Xh(i);const J=Array.from(arguments),Z=[],Et=[];function Bt(V){Z.push(V)}function A(V){Et.push(V)}bu(S,{args:J,name:zt[Bf],store:Mt,after:Bt,onError:A});let H;try{H=gt.apply(this&&this.$id===t?this:Mt,J)}catch(V){throw bu(Et,V),V}return H instanceof Promise?H.then(V=>(bu(Z,V),V)).catch(V=>(bu(Et,V),Promise.reject(V))):(bu(Z,H),H)};return zt[s0]=!0,zt[Bf]=_t,zt},St={_p:i,$id:t,$onAction:r0.bind(null,S),$patch:j,$reset:U,$subscribe(gt,_t={}){const zt=r0(w,gt,_t.detached,()=>J()),J=l.run(()=>qr(()=>i.state.value[t],Z=>{(_t.flush==="sync"?b:v)&&gt({storeId:t,type:mc.direct,events:x},Z)},wl({},p,_t)));return zt},$dispose:W},Mt=el(St);i._s.set(t,Mt);const Lt=(i._a&&i._a.runWithContext||t_)(()=>i._e.run(()=>(l=Bg()).run(()=>e({action:X}))));for(const gt in Lt){const _t=Lt[gt];if(er(_t)&&!i_(_t)||Ml(_t))a||(R&&n_(_t)&&(er(_t)?_t.value=R[gt]:ld(_t,R[gt])),i.state.value[t][gt]=_t);else if(typeof _t=="function"){const zt=X(_t,gt);Lt[gt]=zt,f.actions[gt]=_t}}return wl(Mt,Lt),wl(Jn(Mt),Lt),Object.defineProperty(Mt,"$state",{get:()=>i.state.value[t],set:gt=>{j(_t=>{wl(_t,gt)})}}),i._p.forEach(gt=>{wl(Mt,l.run(()=>gt({store:Mt,app:i._a,pinia:i,options:f})))}),R&&a&&n.hydrate&&n.hydrate(Mt.$state,R),v=!0,b=!0,Mt}/*! #__NO_SIDE_EFFECTS__ */function Qd(t,e,n){let i,o;const a=typeof e=="function";typeof t=="string"?(i=t,o=a?n:e):(o=t,i=t.id);function l(f,p){const v=Iy();return f=f||(v?Mo(Fm,null):null),f&&Xh(f),f=Im,f._s.has(i)||(a?zm(i,e,o,f):r_(i,o,f)),f._s.get(i)}return l.$id=i,l}function Um(t,e){return function(){return t.apply(e,arguments)}}const{toString:s_}=Object.prototype,{getPrototypeOf:tp}=Object,Qh=(t=>e=>{const n=s_.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qo=t=>(t=t.toLowerCase(),e=>Qh(e)===t),tf=t=>e=>typeof e===t,{isArray:Vu}=Array,Ec=tf("undefined");function o_(t){return t!==null&&!Ec(t)&&t.constructor!==null&&!Ec(t.constructor)&&lo(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const qm=Qo("ArrayBuffer");function a_(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&qm(t.buffer),e}const l_=tf("string"),lo=tf("function"),$m=tf("number"),ef=t=>t!==null&&typeof t=="object",u_=t=>t===!0||t===!1,fh=t=>{if(Qh(t)!=="object")return!1;const e=tp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},c_=Qo("Date"),h_=Qo("File"),f_=Qo("Blob"),d_=Qo("FileList"),p_=t=>ef(t)&&lo(t.pipe),g_=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||lo(t.append)&&((e=Qh(t))==="formdata"||e==="object"&&lo(t.toString)&&t.toString()==="[object FormData]"))},m_=Qo("URLSearchParams"),[v_,y_,__,b_]=["ReadableStream","Request","Response","Headers"].map(Qo),w_=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ic(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,o;if(typeof t!="object"&&(t=[t]),Vu(t))for(i=0,o=t.length;i<o;i++)e.call(null,t[i],i,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),l=a.length;let f;for(i=0;i<l;i++)f=a[i],e.call(null,t[f],f,t)}}function Vm(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],e===o.toLowerCase())return o;return null}const Jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hm=t=>!Ec(t)&&t!==Jl;function ud(){const{caseless:t}=Hm(this)&&this||{},e={},n=(i,o)=>{const a=t&&Vm(e,o)||o;fh(e[a])&&fh(i)?e[a]=ud(e[a],i):fh(i)?e[a]=ud({},i):Vu(i)?e[a]=i.slice():e[a]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Ic(arguments[i],n);return e}const x_=(t,e,n,{allOwnKeys:i}={})=>(Ic(e,(o,a)=>{n&&lo(o)?t[a]=Um(o,n):t[a]=o},{allOwnKeys:i}),t),L_=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),C_=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},P_=(t,e,n,i)=>{let o,a,l;const f={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),a=o.length;a-- >0;)l=o[a],(!i||i(l,t,e))&&!f[l]&&(e[l]=t[l],f[l]=!0);t=n!==!1&&tp(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},k_=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},S_=t=>{if(!t)return null;if(Vu(t))return t;let e=t.length;if(!$m(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},E_=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&tp(Uint8Array)),A_=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=i.next())&&!o.done;){const a=o.value;e.call(t,a[0],a[1])}},M_=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},B_=Qo("HTMLFormElement"),T_=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),o0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),D_=Qo("RegExp"),Gm=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Ic(n,(o,a)=>{let l;(l=e(o,a,t))!==!1&&(i[a]=l||o)}),Object.defineProperties(t,i)},N_=t=>{Gm(t,(e,n)=>{if(lo(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(lo(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},O_=(t,e)=>{const n={},i=o=>{o.forEach(a=>{n[a]=!0})};return Vu(t)?i(t):i(String(t).split(e)),n},R_=()=>{},I_=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,Tf="abcdefghijklmnopqrstuvwxyz",a0="0123456789",Wm={DIGIT:a0,ALPHA:Tf,ALPHA_DIGIT:Tf+Tf.toUpperCase()+a0},F_=(t=16,e=Wm.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function j_(t){return!!(t&&lo(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const z_=t=>{const e=new Array(10),n=(i,o)=>{if(ef(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const a=Vu(i)?[]:{};return Ic(i,(l,f)=>{const p=n(l,o+1);!Ec(p)&&(a[f]=p)}),e[o]=void 0,a}}return i};return n(t,0)},U_=Qo("AsyncFunction"),q_=t=>t&&(ef(t)||lo(t))&&lo(t.then)&&lo(t.catch),Zm=((t,e)=>t?setImmediate:e?((n,i)=>(Jl.addEventListener("message",({source:o,data:a})=>{o===Jl&&a===n&&i.length&&i.shift()()},!1),o=>{i.push(o),Jl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",lo(Jl.postMessage)),$_=typeof queueMicrotask<"u"?queueMicrotask.bind(Jl):typeof process<"u"&&process.nextTick||Zm,Le={isArray:Vu,isArrayBuffer:qm,isBuffer:o_,isFormData:g_,isArrayBufferView:a_,isString:l_,isNumber:$m,isBoolean:u_,isObject:ef,isPlainObject:fh,isReadableStream:v_,isRequest:y_,isResponse:__,isHeaders:b_,isUndefined:Ec,isDate:c_,isFile:h_,isBlob:f_,isRegExp:D_,isFunction:lo,isStream:p_,isURLSearchParams:m_,isTypedArray:E_,isFileList:d_,forEach:Ic,merge:ud,extend:x_,trim:w_,stripBOM:L_,inherits:C_,toFlatObject:P_,kindOf:Qh,kindOfTest:Qo,endsWith:k_,toArray:S_,forEachEntry:A_,matchAll:M_,isHTMLForm:B_,hasOwnProperty:o0,hasOwnProp:o0,reduceDescriptors:Gm,freezeMethods:N_,toObjectSet:O_,toCamelCase:T_,noop:R_,toFiniteNumber:I_,findKey:Vm,global:Jl,isContextDefined:Hm,ALPHABET:Wm,generateString:F_,isSpecCompliantForm:j_,toJSONObject:z_,isAsyncFn:U_,isThenable:q_,setImmediate:Zm,asap:$_};function Bn(t,e,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}Le.inherits(Bn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Le.toJSONObject(this.config),code:this.code,status:this.status}}});const Km=Bn.prototype,Ym={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ym[t]={value:t}});Object.defineProperties(Bn,Ym);Object.defineProperty(Km,"isAxiosError",{value:!0});Bn.from=(t,e,n,i,o,a)=>{const l=Object.create(Km);return Le.toFlatObject(t,l,function(p){return p!==Error.prototype},f=>f!=="isAxiosError"),Bn.call(l,t.message,e,n,i,o),l.cause=t,l.name=t.name,a&&Object.assign(l,a),l};const V_=null;function cd(t){return Le.isPlainObject(t)||Le.isArray(t)}function Jm(t){return Le.endsWith(t,"[]")?t.slice(0,-2):t}function l0(t,e,n){return t?t.concat(e).map(function(o,a){return o=Jm(o),!n&&a?"["+o+"]":o}).join(n?".":""):e}function H_(t){return Le.isArray(t)&&!t.some(cd)}const G_=Le.toFlatObject(Le,{},null,function(e){return/^is[A-Z]/.test(e)});function nf(t,e,n){if(!Le.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Le.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,j){return!Le.isUndefined(j[N])});const i=n.metaTokens,o=n.visitor||b,a=n.dots,l=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&Le.isSpecCompliantForm(e);if(!Le.isFunction(o))throw new TypeError("visitor must be a function");function v(R){if(R===null)return"";if(Le.isDate(R))return R.toISOString();if(!p&&Le.isBlob(R))throw new Bn("Blob is not supported. Use a Buffer instead.");return Le.isArrayBuffer(R)||Le.isTypedArray(R)?p&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function b(R,N,j){let U=R;if(R&&!j&&typeof R=="object"){if(Le.endsWith(N,"{}"))N=i?N:N.slice(0,-2),R=JSON.stringify(R);else if(Le.isArray(R)&&H_(R)||(Le.isFileList(R)||Le.endsWith(N,"[]"))&&(U=Le.toArray(R)))return N=Jm(N),U.forEach(function(X,St){!(Le.isUndefined(X)||X===null)&&e.append(l===!0?l0([N],St,a):l===null?N:N+"[]",v(X))}),!1}return cd(R)?!0:(e.append(l0(j,N,a),v(R)),!1)}const w=[],S=Object.assign(G_,{defaultVisitor:b,convertValue:v,isVisitable:cd});function x(R,N){if(!Le.isUndefined(R)){if(w.indexOf(R)!==-1)throw Error("Circular reference detected in "+N.join("."));w.push(R),Le.forEach(R,function(U,W){(!(Le.isUndefined(U)||U===null)&&o.call(e,U,Le.isString(W)?W.trim():W,N,S))===!0&&x(U,N?N.concat(W):[W])}),w.pop()}}if(!Le.isObject(t))throw new TypeError("data must be an object");return x(t),e}function u0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function ep(t,e){this._pairs=[],t&&nf(t,this,e)}const Xm=ep.prototype;Xm.append=function(e,n){this._pairs.push([e,n])};Xm.toString=function(e){const n=e?function(i){return e.call(this,i,u0)}:u0;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function W_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qm(t,e,n){if(!e)return t;const i=n&&n.encode||W_;Le.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let a;if(o?a=o(e,n):a=Le.isURLSearchParams(e)?e.toString():new ep(e,n).toString(i),a){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class c0{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Le.forEach(this.handlers,function(i){i!==null&&e(i)})}}const t1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z_=typeof URLSearchParams<"u"?URLSearchParams:ep,K_=typeof FormData<"u"?FormData:null,Y_=typeof Blob<"u"?Blob:null,J_={isBrowser:!0,classes:{URLSearchParams:Z_,FormData:K_,Blob:Y_},protocols:["http","https","file","blob","url","data"]},np=typeof window<"u"&&typeof document<"u",hd=typeof navigator=="object"&&navigator||void 0,X_=np&&(!hd||["ReactNative","NativeScript","NS"].indexOf(hd.product)<0),Q_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",t4=np&&window.location.href||"http://localhost",e4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:np,hasStandardBrowserEnv:X_,hasStandardBrowserWebWorkerEnv:Q_,navigator:hd,origin:t4},Symbol.toStringTag,{value:"Module"})),as={...e4,...J_};function n4(t,e){return nf(t,new as.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,a){return as.isNode&&Le.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function i4(t){return Le.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function r4(t){const e={},n=Object.keys(t);let i;const o=n.length;let a;for(i=0;i<o;i++)a=n[i],e[a]=t[a];return e}function e1(t){function e(n,i,o,a){let l=n[a++];if(l==="__proto__")return!0;const f=Number.isFinite(+l),p=a>=n.length;return l=!l&&Le.isArray(o)?o.length:l,p?(Le.hasOwnProp(o,l)?o[l]=[o[l],i]:o[l]=i,!f):((!o[l]||!Le.isObject(o[l]))&&(o[l]=[]),e(n,i,o[l],a)&&Le.isArray(o[l])&&(o[l]=r4(o[l])),!f)}if(Le.isFormData(t)&&Le.isFunction(t.entries)){const n={};return Le.forEachEntry(t,(i,o)=>{e(i4(i),o,n,0)}),n}return null}function s4(t,e,n){if(Le.isString(t))try{return(e||JSON.parse)(t),Le.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Fc={transitional:t1,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,a=Le.isObject(e);if(a&&Le.isHTMLForm(e)&&(e=new FormData(e)),Le.isFormData(e))return o?JSON.stringify(e1(e)):e;if(Le.isArrayBuffer(e)||Le.isBuffer(e)||Le.isStream(e)||Le.isFile(e)||Le.isBlob(e)||Le.isReadableStream(e))return e;if(Le.isArrayBufferView(e))return e.buffer;if(Le.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return n4(e,this.formSerializer).toString();if((f=Le.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return nf(f?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||o?(n.setContentType("application/json",!1),s4(e)):e}],transformResponse:[function(e){const n=this.transitional||Fc.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Le.isResponse(e)||Le.isReadableStream(e))return e;if(e&&Le.isString(e)&&(i&&!this.responseType||o)){const l=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(f){if(l)throw f.name==="SyntaxError"?Bn.from(f,Bn.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:as.classes.FormData,Blob:as.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Le.forEach(["delete","get","head","post","put","patch"],t=>{Fc.headers[t]={}});const o4=Le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),a4=t=>{const e={};let n,i,o;return t&&t.split(`
`).forEach(function(l){o=l.indexOf(":"),n=l.substring(0,o).trim().toLowerCase(),i=l.substring(o+1).trim(),!(!n||e[n]&&o4[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},h0=Symbol("internals");function ec(t){return t&&String(t).trim().toLowerCase()}function dh(t){return t===!1||t==null?t:Le.isArray(t)?t.map(dh):String(t)}function l4(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const u4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Df(t,e,n,i,o){if(Le.isFunction(i))return i.call(this,e,n);if(o&&(e=n),!!Le.isString(e)){if(Le.isString(i))return e.indexOf(i)!==-1;if(Le.isRegExp(i))return i.test(e)}}function c4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function h4(t,e){const n=Le.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,a,l){return this[i].call(this,e,o,a,l)},configurable:!0})})}let $s=class{constructor(e){e&&this.set(e)}set(e,n,i){const o=this;function a(f,p,v){const b=ec(p);if(!b)throw new Error("header name must be a non-empty string");const w=Le.findKey(o,b);(!w||o[w]===void 0||v===!0||v===void 0&&o[w]!==!1)&&(o[w||p]=dh(f))}const l=(f,p)=>Le.forEach(f,(v,b)=>a(v,b,p));if(Le.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(Le.isString(e)&&(e=e.trim())&&!u4(e))l(a4(e),n);else if(Le.isHeaders(e))for(const[f,p]of e.entries())a(p,f,i);else e!=null&&a(n,e,i);return this}get(e,n){if(e=ec(e),e){const i=Le.findKey(this,e);if(i){const o=this[i];if(!n)return o;if(n===!0)return l4(o);if(Le.isFunction(n))return n.call(this,o,i);if(Le.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ec(e),e){const i=Le.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Df(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let o=!1;function a(l){if(l=ec(l),l){const f=Le.findKey(i,l);f&&(!n||Df(i,i[f],f,n))&&(delete i[f],o=!0)}}return Le.isArray(e)?e.forEach(a):a(e),o}clear(e){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const a=n[i];(!e||Df(this,this[a],a,e,!0))&&(delete this[a],o=!0)}return o}normalize(e){const n=this,i={};return Le.forEach(this,(o,a)=>{const l=Le.findKey(i,a);if(l){n[l]=dh(o),delete n[a];return}const f=e?c4(a):String(a).trim();f!==a&&delete n[a],n[f]=dh(o),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Le.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=e&&Le.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[h0]=this[h0]={accessors:{}}).accessors,o=this.prototype;function a(l){const f=ec(l);i[f]||(h4(o,l),i[f]=!0)}return Le.isArray(e)?e.forEach(a):a(e),this}};$s.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Le.reduceDescriptors($s.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});Le.freezeMethods($s);function Nf(t,e){const n=this||Fc,i=e||n,o=$s.from(i.headers);let a=i.data;return Le.forEach(t,function(f){a=f.call(n,a,o.normalize(),e?e.status:void 0)}),o.normalize(),a}function n1(t){return!!(t&&t.__CANCEL__)}function Hu(t,e,n){Bn.call(this,t??"canceled",Bn.ERR_CANCELED,e,n),this.name="CanceledError"}Le.inherits(Hu,Bn,{__CANCEL__:!0});function i1(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Bn("Request failed with status code "+n.status,[Bn.ERR_BAD_REQUEST,Bn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function f4(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function d4(t,e){t=t||10;const n=new Array(t),i=new Array(t);let o=0,a=0,l;return e=e!==void 0?e:1e3,function(p){const v=Date.now(),b=i[a];l||(l=v),n[o]=p,i[o]=v;let w=a,S=0;for(;w!==o;)S+=n[w++],w=w%t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),v-l<e)return;const x=b&&v-b;return x?Math.round(S*1e3/x):void 0}}function p4(t,e){let n=0,i=1e3/e,o,a;const l=(v,b=Date.now())=>{n=b,o=null,a&&(clearTimeout(a),a=null),t.apply(null,v)};return[(...v)=>{const b=Date.now(),w=b-n;w>=i?l(v,b):(o=v,a||(a=setTimeout(()=>{a=null,l(o)},i-w)))},()=>o&&l(o)]}const Mh=(t,e,n=3)=>{let i=0;const o=d4(50,250);return p4(a=>{const l=a.loaded,f=a.lengthComputable?a.total:void 0,p=l-i,v=o(p),b=l<=f;i=l;const w={loaded:l,total:f,progress:f?l/f:void 0,bytes:p,rate:v||void 0,estimated:v&&f&&b?(f-l)/v:void 0,event:a,lengthComputable:f!=null,[e?"download":"upload"]:!0};t(w)},n)},f0=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},d0=t=>(...e)=>Le.asap(()=>t(...e)),g4=as.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,as.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(as.origin),as.navigator&&/(msie|trident)/i.test(as.navigator.userAgent)):()=>!0,m4=as.hasStandardBrowserEnv?{write(t,e,n,i,o,a){const l=[t+"="+encodeURIComponent(e)];Le.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),Le.isString(i)&&l.push("path="+i),Le.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function v4(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function y4(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function r1(t,e){return t&&!v4(e)?y4(t,e):e}const p0=t=>t instanceof $s?{...t}:t;function au(t,e){e=e||{};const n={};function i(v,b,w,S){return Le.isPlainObject(v)&&Le.isPlainObject(b)?Le.merge.call({caseless:S},v,b):Le.isPlainObject(b)?Le.merge({},b):Le.isArray(b)?b.slice():b}function o(v,b,w,S){if(Le.isUndefined(b)){if(!Le.isUndefined(v))return i(void 0,v,w,S)}else return i(v,b,w,S)}function a(v,b){if(!Le.isUndefined(b))return i(void 0,b)}function l(v,b){if(Le.isUndefined(b)){if(!Le.isUndefined(v))return i(void 0,v)}else return i(void 0,b)}function f(v,b,w){if(w in e)return i(v,b);if(w in t)return i(void 0,v)}const p={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:f,headers:(v,b,w)=>o(p0(v),p0(b),w,!0)};return Le.forEach(Object.keys(Object.assign({},t,e)),function(b){const w=p[b]||o,S=w(t[b],e[b],b);Le.isUndefined(S)&&w!==f||(n[b]=S)}),n}const s1=t=>{const e=au({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:l,auth:f}=e;e.headers=l=$s.from(l),e.url=Qm(r1(e.baseURL,e.url),t.params,t.paramsSerializer),f&&l.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let p;if(Le.isFormData(n)){if(as.hasStandardBrowserEnv||as.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((p=l.getContentType())!==!1){const[v,...b]=p?p.split(";").map(w=>w.trim()).filter(Boolean):[];l.setContentType([v||"multipart/form-data",...b].join("; "))}}if(as.hasStandardBrowserEnv&&(i&&Le.isFunction(i)&&(i=i(e)),i||i!==!1&&g4(e.url))){const v=o&&a&&m4.read(a);v&&l.set(o,v)}return e},_4=typeof XMLHttpRequest<"u",b4=_4&&function(t){return new Promise(function(n,i){const o=s1(t);let a=o.data;const l=$s.from(o.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:v}=o,b,w,S,x,R;function N(){x&&x(),R&&R(),o.cancelToken&&o.cancelToken.unsubscribe(b),o.signal&&o.signal.removeEventListener("abort",b)}let j=new XMLHttpRequest;j.open(o.method.toUpperCase(),o.url,!0),j.timeout=o.timeout;function U(){if(!j)return;const X=$s.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),Mt={data:!f||f==="text"||f==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:X,config:t,request:j};i1(function(Lt){n(Lt),N()},function(Lt){i(Lt),N()},Mt),j=null}"onloadend"in j?j.onloadend=U:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(U)},j.onabort=function(){j&&(i(new Bn("Request aborted",Bn.ECONNABORTED,t,j)),j=null)},j.onerror=function(){i(new Bn("Network Error",Bn.ERR_NETWORK,t,j)),j=null},j.ontimeout=function(){let St=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Mt=o.transitional||t1;o.timeoutErrorMessage&&(St=o.timeoutErrorMessage),i(new Bn(St,Mt.clarifyTimeoutError?Bn.ETIMEDOUT:Bn.ECONNABORTED,t,j)),j=null},a===void 0&&l.setContentType(null),"setRequestHeader"in j&&Le.forEach(l.toJSON(),function(St,Mt){j.setRequestHeader(Mt,St)}),Le.isUndefined(o.withCredentials)||(j.withCredentials=!!o.withCredentials),f&&f!=="json"&&(j.responseType=o.responseType),v&&([S,R]=Mh(v,!0),j.addEventListener("progress",S)),p&&j.upload&&([w,x]=Mh(p),j.upload.addEventListener("progress",w),j.upload.addEventListener("loadend",x)),(o.cancelToken||o.signal)&&(b=X=>{j&&(i(!X||X.type?new Hu(null,t,j):X),j.abort(),j=null)},o.cancelToken&&o.cancelToken.subscribe(b),o.signal&&(o.signal.aborted?b():o.signal.addEventListener("abort",b)));const W=f4(o.url);if(W&&as.protocols.indexOf(W)===-1){i(new Bn("Unsupported protocol "+W+":",Bn.ERR_BAD_REQUEST,t));return}j.send(a||null)})},w4=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,o;const a=function(v){if(!o){o=!0,f();const b=v instanceof Error?v:this.reason;i.abort(b instanceof Bn?b:new Hu(b instanceof Error?b.message:b))}};let l=e&&setTimeout(()=>{l=null,a(new Bn(`timeout ${e} of ms exceeded`,Bn.ETIMEDOUT))},e);const f=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(v=>{v.unsubscribe?v.unsubscribe(a):v.removeEventListener("abort",a)}),t=null)};t.forEach(v=>v.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>Le.asap(f),p}},x4=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,o;for(;i<n;)o=i+e,yield t.slice(i,o),i=o},L4=async function*(t,e){for await(const n of C4(t))yield*x4(n,e)},C4=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},g0=(t,e,n,i)=>{const o=L4(t,e);let a=0,l,f=p=>{l||(l=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:v,value:b}=await o.next();if(v){f(),p.close();return}let w=b.byteLength;if(n){let S=a+=w;n(S)}p.enqueue(new Uint8Array(b))}catch(v){throw f(v),v}},cancel(p){return f(p),o.return()}},{highWaterMark:2})},rf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",o1=rf&&typeof ReadableStream=="function",P4=rf&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),a1=(t,...e)=>{try{return!!t(...e)}catch{return!1}},k4=o1&&a1(()=>{let t=!1;const e=new Request(as.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),m0=64*1024,fd=o1&&a1(()=>Le.isReadableStream(new Response("").body)),Bh={stream:fd&&(t=>t.body)};rf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Bh[e]&&(Bh[e]=Le.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new Bn(`Response type '${e}' is not supported`,Bn.ERR_NOT_SUPPORT,i)})})})(new Response);const S4=async t=>{if(t==null)return 0;if(Le.isBlob(t))return t.size;if(Le.isSpecCompliantForm(t))return(await new Request(as.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Le.isArrayBufferView(t)||Le.isArrayBuffer(t))return t.byteLength;if(Le.isURLSearchParams(t)&&(t=t+""),Le.isString(t))return(await P4(t)).byteLength},E4=async(t,e)=>{const n=Le.toFiniteNumber(t.getContentLength());return n??S4(e)},A4=rf&&(async t=>{let{url:e,method:n,data:i,signal:o,cancelToken:a,timeout:l,onDownloadProgress:f,onUploadProgress:p,responseType:v,headers:b,withCredentials:w="same-origin",fetchOptions:S}=s1(t);v=v?(v+"").toLowerCase():"text";let x=w4([o,a&&a.toAbortSignal()],l),R;const N=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let j;try{if(p&&k4&&n!=="get"&&n!=="head"&&(j=await E4(b,i))!==0){let Mt=new Request(e,{method:"POST",body:i,duplex:"half"}),Nt;if(Le.isFormData(i)&&(Nt=Mt.headers.get("content-type"))&&b.setContentType(Nt),Mt.body){const[Lt,gt]=f0(j,Mh(d0(p)));i=g0(Mt.body,m0,Lt,gt)}}Le.isString(w)||(w=w?"include":"omit");const U="credentials"in Request.prototype;R=new Request(e,{...S,signal:x,method:n.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:U?w:void 0});let W=await fetch(R);const X=fd&&(v==="stream"||v==="response");if(fd&&(f||X&&N)){const Mt={};["status","statusText","headers"].forEach(_t=>{Mt[_t]=W[_t]});const Nt=Le.toFiniteNumber(W.headers.get("content-length")),[Lt,gt]=f&&f0(Nt,Mh(d0(f),!0))||[];W=new Response(g0(W.body,m0,Lt,()=>{gt&&gt(),N&&N()}),Mt)}v=v||"text";let St=await Bh[Le.findKey(Bh,v)||"text"](W,t);return!X&&N&&N(),await new Promise((Mt,Nt)=>{i1(Mt,Nt,{data:St,headers:$s.from(W.headers),status:W.status,statusText:W.statusText,config:t,request:R})})}catch(U){throw N&&N(),U&&U.name==="TypeError"&&/fetch/i.test(U.message)?Object.assign(new Bn("Network Error",Bn.ERR_NETWORK,t,R),{cause:U.cause||U}):Bn.from(U,U&&U.code,t,R)}}),dd={http:V_,xhr:b4,fetch:A4};Le.forEach(dd,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const v0=t=>`- ${t}`,M4=t=>Le.isFunction(t)||t===null||t===!1,l1={getAdapter:t=>{t=Le.isArray(t)?t:[t];const{length:e}=t;let n,i;const o={};for(let a=0;a<e;a++){n=t[a];let l;if(i=n,!M4(n)&&(i=dd[(l=String(n)).toLowerCase()],i===void 0))throw new Bn(`Unknown adapter '${l}'`);if(i)break;o[l||"#"+a]=i}if(!i){const a=Object.entries(o).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let l=e?a.length>1?`since :
`+a.map(v0).join(`
`):" "+v0(a[0]):"as no adapter specified";throw new Bn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:dd};function Of(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hu(null,t)}function y0(t){return Of(t),t.headers=$s.from(t.headers),t.data=Nf.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),l1.getAdapter(t.adapter||Fc.adapter)(t).then(function(i){return Of(t),i.data=Nf.call(t,t.transformResponse,i),i.headers=$s.from(i.headers),i},function(i){return n1(i)||(Of(t),i&&i.response&&(i.response.data=Nf.call(t,t.transformResponse,i.response),i.response.headers=$s.from(i.response.headers))),Promise.reject(i)})}const u1="1.7.9",sf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{sf[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const _0={};sf.transitional=function(e,n,i){function o(a,l){return"[Axios v"+u1+"] Transitional option '"+a+"'"+l+(i?". "+i:"")}return(a,l,f)=>{if(e===!1)throw new Bn(o(l," has been removed"+(n?" in "+n:"")),Bn.ERR_DEPRECATED);return n&&!_0[l]&&(_0[l]=!0,console.warn(o(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,l,f):!0}};sf.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function B4(t,e,n){if(typeof t!="object")throw new Bn("options must be an object",Bn.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const a=i[o],l=e[a];if(l){const f=t[a],p=f===void 0||l(f,a,t);if(p!==!0)throw new Bn("option "+a+" must be "+p,Bn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Bn("Unknown option "+a,Bn.ERR_BAD_OPTION)}}const ph={assertOptions:B4,validators:sf},_a=ph.validators;let iu=class{constructor(e){this.defaults=e,this.interceptors={request:new c0,response:new c0}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const a=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=au(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:a}=n;i!==void 0&&ph.assertOptions(i,{silentJSONParsing:_a.transitional(_a.boolean),forcedJSONParsing:_a.transitional(_a.boolean),clarifyTimeoutError:_a.transitional(_a.boolean)},!1),o!=null&&(Le.isFunction(o)?n.paramsSerializer={serialize:o}:ph.assertOptions(o,{encode:_a.function,serialize:_a.function},!0)),ph.assertOptions(n,{baseUrl:_a.spelling("baseURL"),withXsrfToken:_a.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=a&&Le.merge(a.common,a[n.method]);a&&Le.forEach(["delete","get","head","post","put","patch","common"],R=>{delete a[R]}),n.headers=$s.concat(l,a);const f=[];let p=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(n)===!1||(p=p&&N.synchronous,f.unshift(N.fulfilled,N.rejected))});const v=[];this.interceptors.response.forEach(function(N){v.push(N.fulfilled,N.rejected)});let b,w=0,S;if(!p){const R=[y0.bind(this),void 0];for(R.unshift.apply(R,f),R.push.apply(R,v),S=R.length,b=Promise.resolve(n);w<S;)b=b.then(R[w++],R[w++]);return b}S=f.length;let x=n;for(w=0;w<S;){const R=f[w++],N=f[w++];try{x=R(x)}catch(j){N.call(this,j);break}}try{b=y0.call(this,x)}catch(R){return Promise.reject(R)}for(w=0,S=v.length;w<S;)b=b.then(v[w++],v[w++]);return b}getUri(e){e=au(this.defaults,e);const n=r1(e.baseURL,e.url);return Qm(n,e.params,e.paramsSerializer)}};Le.forEach(["delete","get","head","options"],function(e){iu.prototype[e]=function(n,i){return this.request(au(i||{},{method:e,url:n,data:(i||{}).data}))}});Le.forEach(["post","put","patch"],function(e){function n(i){return function(a,l,f){return this.request(au(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}iu.prototype[e]=n(),iu.prototype[e+"Form"]=n(!0)});let T4=class c1{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(o=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](o);i._listeners=null}),this.promise.then=o=>{let a;const l=new Promise(f=>{i.subscribe(f),a=f}).then(o);return l.cancel=function(){i.unsubscribe(a)},l},e(function(a,l,f){i.reason||(i.reason=new Hu(a,l,f),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new c1(function(o){e=o}),cancel:e}}};function D4(t){return function(n){return t.apply(null,n)}}function N4(t){return Le.isObject(t)&&t.isAxiosError===!0}const pd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pd).forEach(([t,e])=>{pd[e]=t});function h1(t){const e=new iu(t),n=Um(iu.prototype.request,e);return Le.extend(n,iu.prototype,e,{allOwnKeys:!0}),Le.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return h1(au(t,o))},n}const ir=h1(Fc);ir.Axios=iu;ir.CanceledError=Hu;ir.CancelToken=T4;ir.isCancel=n1;ir.VERSION=u1;ir.toFormData=nf;ir.AxiosError=Bn;ir.Cancel=ir.CanceledError;ir.all=function(e){return Promise.all(e)};ir.spread=D4;ir.isAxiosError=N4;ir.mergeConfig=au;ir.AxiosHeaders=$s;ir.formToJSON=t=>e1(Le.isHTMLForm(t)?new FormData(t):t);ir.getAdapter=l1.getAdapter;ir.HttpStatusCode=pd;ir.default=ir;const{Axios:ES,AxiosError:AS,CanceledError:MS,isCancel:BS,CancelToken:TS,VERSION:DS,all:NS,Cancel:OS,isAxiosError:RS,spread:IS,toFormData:FS,AxiosHeaders:jS,HttpStatusCode:zS,formToJSON:US,getAdapter:qS,mergeConfig:$S}=ir,kn=ir.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function f1(t){var i;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((i=n.pop())==null?void 0:i.split(";").shift())||null}kn.interceptors.request.use(t=>{const e=f1("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));kn.interceptors.response.use(t=>t,async t=>{var n;const e=t.config;if(((n=t.response)==null?void 0:n.status)===401&&!e._retry){e._retry=!0;try{await xs().refreshToken();const o=f1("access_token");if(o)return e.headers.Authorization=`Bearer ${o}`,kn(e)}catch(i){console.error("Token refresh failed:",i),window.location.href="/login"}}return Promise.reject(t)});kn.defaults.baseURL="/api";kn.defaults.headers.common["Content-Type"]="application/json";kn.defaults.withCredentials=!0;function Th(t){var i;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((i=n.pop())==null?void 0:i.split(";").shift())||null}kn.interceptors.request.use(t=>{const e=Th("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));kn.interceptors.response.use(t=>t,async t=>{var i,o;const e=xs(),n=t.config;if(((i=t.response)==null?void 0:i.status)===401&&!n._retry&&!((o=n.url)!=null&&o.includes("/token/refresh/"))){n._retry=!0;try{if(!Th("access_token"))throw new Error("No token available");await e.refreshToken();const l=Th("access_token");if(l)return n.headers.Authorization=`Bearer ${l}`,kn(n)}catch(a){console.error("Token refresh failed:",a),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function O4(t,e,n=1){const i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3);const o=`expires=${i.toUTCString()}`;document.cookie=`${t}=${e};${o};path=/;secure;samesite=Strict`}function Xl(t){if(!t)return"Non spcifi";const e=`${t.first_name} ${t.last_name.toUpperCase()}`;return t.company_name?`${e} (${t.company_name})`:e}const xs=Qd("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isDealer:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="dealer"},isClient:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="client"},currentUser:t=>t.user,hasDealer:t=>{var e;return!!((e=t.user)!=null&&e.dealer)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!Th("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await kn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,i,o;try{const a=await kn.post("/token/",{username:t,password:e});if(!a.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${a.data.access}; path=/; secure; samesite=Strict`;const l=await this.fetchUserProfile();return this.user=l,this.isAuthenticated=!0,!0}catch(a){throw this.isAuthenticated=!1,this.user=null,((n=a.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(o=(i=a.response)==null?void 0:i.data)!=null&&o.detail?new Error(a.response.data.detail):a}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await kn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await kn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e,n,i;try{const o=await kn.post("/token/refresh/",{},{withCredentials:!0}),{access:a}=o.data;if(!a)throw new Error("No access token received");return O4("access_token",a,1),this.isAuthenticated=!0,a}catch(o){throw console.error("Error refreshing token:",{status:(t=o.response)==null?void 0:t.status,data:(e=o.response)==null?void 0:e.data}),(((n=o.response)==null?void 0:n.status)===401||((i=o.response)==null?void 0:i.status)===403)&&await this.logout(),o}},async fetchConcessionnaires(){this.loading=!0;try{const t=await kn.get("/users/",{params:{role:"dealer"}});this.concessionnaires=t.data}catch(t){throw this.error="Erreur lors de la rcupration des concessionnaires",t}finally{this.loading=!1}},async setConcessionnaire(t,e){this.loading=!0;try{await kn.patch(`/users/${t}/`,{concessionnaire:e}),this.user&&this.user.id===t&&(this.user.dealer=e)}catch(n){throw this.error="Erreur lors de la mise  jour du concessionnaire",n}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await kn.post("/users/",t)).data}catch(e){throw this.error="Erreur lors de la cration de l'utilisateur",e}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await kn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await kn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Pu=typeof document<"u";function d1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function R4(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&d1(t.default)}const oi=Object.assign;function Rf(t,e){const n={};for(const i in e){const o=e[i];n[i]=Xo(o)?o.map(t):t(o)}return n}const vc=()=>{},Xo=Array.isArray,p1=/#/g,I4=/&/g,F4=/\//g,j4=/=/g,z4=/\?/g,g1=/\+/g,U4=/%5B/g,q4=/%5D/g,m1=/%5E/g,$4=/%60/g,v1=/%7B/g,V4=/%7C/g,y1=/%7D/g,H4=/%20/g;function ip(t){return encodeURI(""+t).replace(V4,"|").replace(U4,"[").replace(q4,"]")}function G4(t){return ip(t).replace(v1,"{").replace(y1,"}").replace(m1,"^")}function gd(t){return ip(t).replace(g1,"%2B").replace(H4,"+").replace(p1,"%23").replace(I4,"%26").replace($4,"`").replace(v1,"{").replace(y1,"}").replace(m1,"^")}function W4(t){return gd(t).replace(j4,"%3D")}function Z4(t){return ip(t).replace(p1,"%23").replace(z4,"%3F")}function K4(t){return t==null?"":Z4(t).replace(F4,"%2F")}function Ac(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Y4=/\/$/,J4=t=>t.replace(Y4,"");function If(t,e,n="/"){let i,o={},a="",l="";const f=e.indexOf("#");let p=e.indexOf("?");return f<p&&f>=0&&(p=-1),p>-1&&(i=e.slice(0,p),a=e.slice(p+1,f>-1?f:e.length),o=t(a)),f>-1&&(i=i||e.slice(0,f),l=e.slice(f,e.length)),i=e5(i??e,n),{fullPath:i+(a&&"?")+a+l,path:i,query:o,hash:Ac(l)}}function X4(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function b0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Q4(t,e,n){const i=e.matched.length-1,o=n.matched.length-1;return i>-1&&i===o&&Uu(e.matched[i],n.matched[o])&&_1(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Uu(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function _1(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!t5(t[n],e[n]))return!1;return!0}function t5(t,e){return Xo(t)?w0(t,e):Xo(e)?w0(e,t):t===e}function w0(t,e){return Xo(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function e5(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),o=i[i.length-1];(o===".."||o===".")&&i.push("");let a=n.length-1,l,f;for(l=0;l<i.length;l++)if(f=i[l],f!==".")if(f==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+i.slice(l).join("/")}const yl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Mc;(function(t){t.pop="pop",t.push="push"})(Mc||(Mc={}));var yc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(yc||(yc={}));function n5(t){if(!t)if(Pu){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),J4(t)}const i5=/^[^#]+#/;function r5(t,e){return t.replace(i5,"#")+e}function s5(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const of=()=>({left:window.scrollX,top:window.scrollY});function o5(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=s5(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function x0(t,e){return(history.state?history.state.position-e:-1)+t}const md=new Map;function a5(t,e){md.set(t,e)}function l5(t){const e=md.get(t);return md.delete(t),e}let u5=()=>location.protocol+"//"+location.host;function b1(t,e){const{pathname:n,search:i,hash:o}=e,a=t.indexOf("#");if(a>-1){let f=o.includes(t.slice(a))?t.slice(a).length:1,p=o.slice(f);return p[0]!=="/"&&(p="/"+p),b0(p,"")}return b0(n,t)+i+o}function c5(t,e,n,i){let o=[],a=[],l=null;const f=({state:S})=>{const x=b1(t,location),R=n.value,N=e.value;let j=0;if(S){if(n.value=x,e.value=S,l&&l===R){l=null;return}j=N?S.position-N.position:0}else i(x);o.forEach(U=>{U(n.value,R,{delta:j,type:Mc.pop,direction:j?j>0?yc.forward:yc.back:yc.unknown})})};function p(){l=n.value}function v(S){o.push(S);const x=()=>{const R=o.indexOf(S);R>-1&&o.splice(R,1)};return a.push(x),x}function b(){const{history:S}=window;S.state&&S.replaceState(oi({},S.state,{scroll:of()}),"")}function w(){for(const S of a)S();a=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",b,{passive:!0}),{pauseListeners:p,listen:v,destroy:w}}function L0(t,e,n,i=!1,o=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:o?of():null}}function h5(t){const{history:e,location:n}=window,i={value:b1(t,n)},o={value:e.state};o.value||a(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function a(p,v,b){const w=t.indexOf("#"),S=w>-1?(n.host&&document.querySelector("base")?t:t.slice(w))+p:u5()+t+p;try{e[b?"replaceState":"pushState"](v,"",S),o.value=v}catch(x){console.error(x),n[b?"replace":"assign"](S)}}function l(p,v){const b=oi({},e.state,L0(o.value.back,p,o.value.forward,!0),v,{position:o.value.position});a(p,b,!0),i.value=p}function f(p,v){const b=oi({},o.value,e.state,{forward:p,scroll:of()});a(b.current,b,!0);const w=oi({},L0(i.value,p,null),{position:b.position+1},v);a(p,w,!1),i.value=p}return{location:i,state:o,push:f,replace:l}}function f5(t){t=n5(t);const e=h5(t),n=c5(t,e.state,e.location,e.replace);function i(a,l=!0){l||n.pauseListeners(),history.go(a)}const o=oi({location:"",base:t,go:i,createHref:r5.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function d5(t){return typeof t=="string"||t&&typeof t=="object"}function w1(t){return typeof t=="string"||typeof t=="symbol"}const x1=Symbol("");var C0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(C0||(C0={}));function qu(t,e){return oi(new Error,{type:t,[x1]:!0},e)}function Ga(t,e){return t instanceof Error&&x1 in t&&(e==null||!!(t.type&e))}const P0="[^/]+?",p5={sensitive:!1,strict:!1,start:!0,end:!0},g5=/[.+*?^${}()[\]/\\]/g;function m5(t,e){const n=oi({},p5,e),i=[];let o=n.start?"^":"";const a=[];for(const v of t){const b=v.length?[]:[90];n.strict&&!v.length&&(o+="/");for(let w=0;w<v.length;w++){const S=v[w];let x=40+(n.sensitive?.25:0);if(S.type===0)w||(o+="/"),o+=S.value.replace(g5,"\\$&"),x+=40;else if(S.type===1){const{value:R,repeatable:N,optional:j,regexp:U}=S;a.push({name:R,repeatable:N,optional:j});const W=U||P0;if(W!==P0){x+=10;try{new RegExp(`(${W})`)}catch(St){throw new Error(`Invalid custom RegExp for param "${R}" (${W}): `+St.message)}}let X=N?`((?:${W})(?:/(?:${W}))*)`:`(${W})`;w||(X=j&&v.length<2?`(?:/${X})`:"/"+X),j&&(X+="?"),o+=X,x+=20,j&&(x+=-8),N&&(x+=-20),W===".*"&&(x+=-50)}b.push(x)}i.push(b)}if(n.strict&&n.end){const v=i.length-1;i[v][i[v].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const l=new RegExp(o,n.sensitive?"":"i");function f(v){const b=v.match(l),w={};if(!b)return null;for(let S=1;S<b.length;S++){const x=b[S]||"",R=a[S-1];w[R.name]=x&&R.repeatable?x.split("/"):x}return w}function p(v){let b="",w=!1;for(const S of t){(!w||!b.endsWith("/"))&&(b+="/"),w=!1;for(const x of S)if(x.type===0)b+=x.value;else if(x.type===1){const{value:R,repeatable:N,optional:j}=x,U=R in v?v[R]:"";if(Xo(U)&&!N)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const W=Xo(U)?U.join("/"):U;if(!W)if(j)S.length<2&&(b.endsWith("/")?b=b.slice(0,-1):w=!0);else throw new Error(`Missing required param "${R}"`);b+=W}}return b||"/"}return{re:l,score:i,keys:a,parse:f,stringify:p}}function v5(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function L1(t,e){let n=0;const i=t.score,o=e.score;for(;n<i.length&&n<o.length;){const a=v5(i[n],o[n]);if(a)return a;n++}if(Math.abs(o.length-i.length)===1){if(k0(i))return 1;if(k0(o))return-1}return o.length-i.length}function k0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const y5={type:0,value:""},_5=/[a-zA-Z0-9_]/;function b5(t){if(!t)return[[]];if(t==="/")return[[y5]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(x){throw new Error(`ERR (${n})/"${v}": ${x}`)}let n=0,i=n;const o=[];let a;function l(){a&&o.push(a),a=[]}let f=0,p,v="",b="";function w(){v&&(n===0?a.push({type:0,value:v}):n===1||n===2||n===3?(a.length>1&&(p==="*"||p==="+")&&e(`A repeatable param (${v}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:v,regexp:b,repeatable:p==="*"||p==="+",optional:p==="*"||p==="?"})):e("Invalid state to consume buffer"),v="")}function S(){v+=p}for(;f<t.length;){if(p=t[f++],p==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:p==="/"?(v&&w(),l()):p===":"?(w(),n=1):S();break;case 4:S(),n=i;break;case 1:p==="("?n=2:_5.test(p)?S():(w(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&f--);break;case 2:p===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+p:n=3:b+=p;break;case 3:w(),n=0,p!=="*"&&p!=="?"&&p!=="+"&&f--,b="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${v}"`),w(),l(),o}function w5(t,e,n){const i=m5(b5(t.path),n),o=oi(i,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function x5(t,e){const n=[],i=new Map;e=M0({strict:!1,end:!0,sensitive:!1},e);function o(w){return i.get(w)}function a(w,S,x){const R=!x,N=E0(w);N.aliasOf=x&&x.record;const j=M0(e,w),U=[N];if("alias"in w){const St=typeof w.alias=="string"?[w.alias]:w.alias;for(const Mt of St)U.push(E0(oi({},N,{components:x?x.record.components:N.components,path:Mt,aliasOf:x?x.record:N})))}let W,X;for(const St of U){const{path:Mt}=St;if(S&&Mt[0]!=="/"){const Nt=S.record.path,Lt=Nt[Nt.length-1]==="/"?"":"/";St.path=S.record.path+(Mt&&Lt+Mt)}if(W=w5(St,S,j),x?x.alias.push(W):(X=X||W,X!==W&&X.alias.push(W),R&&w.name&&!A0(W)&&l(w.name)),C1(W)&&p(W),N.children){const Nt=N.children;for(let Lt=0;Lt<Nt.length;Lt++)a(Nt[Lt],W,x&&x.children[Lt])}x=x||W}return X?()=>{l(X)}:vc}function l(w){if(w1(w)){const S=i.get(w);S&&(i.delete(w),n.splice(n.indexOf(S),1),S.children.forEach(l),S.alias.forEach(l))}else{const S=n.indexOf(w);S>-1&&(n.splice(S,1),w.record.name&&i.delete(w.record.name),w.children.forEach(l),w.alias.forEach(l))}}function f(){return n}function p(w){const S=P5(w,n);n.splice(S,0,w),w.record.name&&!A0(w)&&i.set(w.record.name,w)}function v(w,S){let x,R={},N,j;if("name"in w&&w.name){if(x=i.get(w.name),!x)throw qu(1,{location:w});j=x.record.name,R=oi(S0(S.params,x.keys.filter(X=>!X.optional).concat(x.parent?x.parent.keys.filter(X=>X.optional):[]).map(X=>X.name)),w.params&&S0(w.params,x.keys.map(X=>X.name))),N=x.stringify(R)}else if(w.path!=null)N=w.path,x=n.find(X=>X.re.test(N)),x&&(R=x.parse(N),j=x.record.name);else{if(x=S.name?i.get(S.name):n.find(X=>X.re.test(S.path)),!x)throw qu(1,{location:w,currentLocation:S});j=x.record.name,R=oi({},S.params,w.params),N=x.stringify(R)}const U=[];let W=x;for(;W;)U.unshift(W.record),W=W.parent;return{name:j,path:N,params:R,matched:U,meta:C5(U)}}t.forEach(w=>a(w));function b(){n.length=0,i.clear()}return{addRoute:a,resolve:v,removeRoute:l,clearRoutes:b,getRoutes:f,getRecordMatcher:o}}function S0(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function E0(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:L5(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function L5(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function A0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function C5(t){return t.reduce((e,n)=>oi(e,n.meta),{})}function M0(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function P5(t,e){let n=0,i=e.length;for(;n!==i;){const a=n+i>>1;L1(t,e[a])<0?i=a:n=a+1}const o=k5(t);return o&&(i=e.lastIndexOf(o,i-1)),i}function k5(t){let e=t;for(;e=e.parent;)if(C1(e)&&L1(t,e)===0)return e}function C1({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function S5(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<i.length;++o){const a=i[o].replace(g1," "),l=a.indexOf("="),f=Ac(l<0?a:a.slice(0,l)),p=l<0?null:Ac(a.slice(l+1));if(f in e){let v=e[f];Xo(v)||(v=e[f]=[v]),v.push(p)}else e[f]=p}return e}function B0(t){let e="";for(let n in t){const i=t[n];if(n=W4(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(Xo(i)?i.map(a=>a&&gd(a)):[i&&gd(i)]).forEach(a=>{a!==void 0&&(e+=(e.length?"&":"")+n,a!=null&&(e+="="+a))})}return e}function E5(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=Xo(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return e}const A5=Symbol(""),T0=Symbol(""),af=Symbol(""),rp=Symbol(""),vd=Symbol("");function nc(){let t=[];function e(i){return t.push(i),()=>{const o=t.indexOf(i);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Pl(t,e,n,i,o,a=l=>l()){const l=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((f,p)=>{const v=S=>{S===!1?p(qu(4,{from:n,to:e})):S instanceof Error?p(S):d5(S)?p(qu(2,{from:e,to:S})):(l&&i.enterCallbacks[o]===l&&typeof S=="function"&&l.push(S),f())},b=a(()=>t.call(i&&i.instances[o],e,n,v));let w=Promise.resolve(b);t.length<3&&(w=w.then(v)),w.catch(S=>p(S))})}function Ff(t,e,n,i,o=a=>a()){const a=[];for(const l of t)for(const f in l.components){let p=l.components[f];if(!(e!=="beforeRouteEnter"&&!l.instances[f]))if(d1(p)){const b=(p.__vccOpts||p)[e];b&&a.push(Pl(b,n,i,l,f,o))}else{let v=p();a.push(()=>v.then(b=>{if(!b)throw new Error(`Couldn't resolve component "${f}" at "${l.path}"`);const w=R4(b)?b.default:b;l.mods[f]=b,l.components[f]=w;const x=(w.__vccOpts||w)[e];return x&&Pl(x,n,i,l,f,o)()}))}}return a}function D0(t){const e=Mo(af),n=Mo(rp),i=jn(()=>{const p=Rn(t.to);return e.resolve(p)}),o=jn(()=>{const{matched:p}=i.value,{length:v}=p,b=p[v-1],w=n.matched;if(!b||!w.length)return-1;const S=w.findIndex(Uu.bind(null,b));if(S>-1)return S;const x=N0(p[v-2]);return v>1&&N0(b)===x&&w[w.length-1].path!==x?w.findIndex(Uu.bind(null,p[v-2])):S}),a=jn(()=>o.value>-1&&D5(n.params,i.value.params)),l=jn(()=>o.value>-1&&o.value===n.matched.length-1&&_1(n.params,i.value.params));function f(p={}){if(T5(p)){const v=e[Rn(t.replace)?"replace":"push"](Rn(t.to)).catch(vc);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>v),v}return Promise.resolve()}return{route:i,href:jn(()=>i.value.href),isActive:a,isExactActive:l,navigate:f}}function M5(t){return t.length===1?t[0]:t}const B5=Ls({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:D0,setup(t,{slots:e}){const n=el(D0(t)),{options:i}=Mo(af),o=jn(()=>({[O0(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[O0(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=e.default&&M5(e.default(n));return t.custom?a:Xd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},a)}}}),ku=B5;function T5(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function D5(t,e){for(const n in e){const i=e[n],o=t[n];if(typeof i=="string"){if(i!==o)return!1}else if(!Xo(o)||o.length!==i.length||i.some((a,l)=>a!==o[l]))return!1}return!0}function N0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const O0=(t,e,n)=>t??e??n,N5=Ls({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=Mo(vd),o=jn(()=>t.route||i.value),a=Mo(T0,0),l=jn(()=>{let v=Rn(a);const{matched:b}=o.value;let w;for(;(w=b[v])&&!w.components;)v++;return v}),f=jn(()=>o.value.matched[l.value]);ah(T0,jn(()=>l.value+1)),ah(A5,f),ah(vd,o);const p=Ie();return qr(()=>[p.value,f.value,t.name],([v,b,w],[S,x,R])=>{b&&(b.instances[w]=v,x&&x!==b&&v&&v===S&&(b.leaveGuards.size||(b.leaveGuards=x.leaveGuards),b.updateGuards.size||(b.updateGuards=x.updateGuards))),v&&b&&(!x||!Uu(b,x)||!S)&&(b.enterCallbacks[w]||[]).forEach(N=>N(v))},{flush:"post"}),()=>{const v=o.value,b=t.name,w=f.value,S=w&&w.components[b];if(!S)return R0(n.default,{Component:S,route:v});const x=w.props[b],R=x?x===!0?v.params:typeof x=="function"?x(v):x:null,j=Xd(S,oi({},R,e,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(w.instances[b]=null)},ref:p}));return R0(n.default,{Component:j,route:v})||j}}});function R0(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const P1=N5;function O5(t){const e=x5(t.routes,t),n=t.parseQuery||S5,i=t.stringifyQuery||B0,o=t.history,a=nc(),l=nc(),f=nc(),p=Xv(yl);let v=yl;Pu&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=Rf.bind(null,q=>""+q),w=Rf.bind(null,K4),S=Rf.bind(null,Ac);function x(q,dt){let ct,At;return w1(q)?(ct=e.getRecordMatcher(q),At=dt):At=q,e.addRoute(At,ct)}function R(q){const dt=e.getRecordMatcher(q);dt&&e.removeRoute(dt)}function N(){return e.getRoutes().map(q=>q.record)}function j(q){return!!e.getRecordMatcher(q)}function U(q,dt){if(dt=oi({},dt||p.value),typeof q=="string"){const yt=If(n,q,dt.path),vt=e.resolve({path:yt.path},dt),Y=o.createHref(yt.fullPath);return oi(yt,vt,{params:S(vt.params),hash:Ac(yt.hash),redirectedFrom:void 0,href:Y})}let ct;if(q.path!=null)ct=oi({},q,{path:If(n,q.path,dt.path).path});else{const yt=oi({},q.params);for(const vt in yt)yt[vt]==null&&delete yt[vt];ct=oi({},q,{params:w(yt)}),dt.params=w(dt.params)}const At=e.resolve(ct,dt),Ot=q.hash||"";At.params=b(S(At.params));const G=X4(i,oi({},q,{hash:G4(Ot),path:At.path})),tt=o.createHref(G);return oi({fullPath:G,hash:Ot,query:i===B0?E5(q.query):q.query||{}},At,{redirectedFrom:void 0,href:tt})}function W(q){return typeof q=="string"?If(n,q,p.value.path):oi({},q)}function X(q,dt){if(v!==q)return qu(8,{from:dt,to:q})}function St(q){return Lt(q)}function Mt(q){return St(oi(W(q),{replace:!0}))}function Nt(q){const dt=q.matched[q.matched.length-1];if(dt&&dt.redirect){const{redirect:ct}=dt;let At=typeof ct=="function"?ct(q):ct;return typeof At=="string"&&(At=At.includes("?")||At.includes("#")?At=W(At):{path:At},At.params={}),oi({query:q.query,hash:q.hash,params:At.path!=null?{}:q.params},At)}}function Lt(q,dt){const ct=v=U(q),At=p.value,Ot=q.state,G=q.force,tt=q.replace===!0,yt=Nt(ct);if(yt)return Lt(oi(W(yt),{state:typeof yt=="object"?oi({},Ot,yt.state):Ot,force:G,replace:tt}),dt||ct);const vt=ct;vt.redirectedFrom=dt;let Y;return!G&&Q4(i,At,ct)&&(Y=qu(16,{to:vt,from:At}),ht(At,At,!0,!1)),(Y?Promise.resolve(Y):zt(vt,At)).catch($t=>Ga($t)?Ga($t,2)?$t:ft($t):z($t,vt,At)).then($t=>{if($t){if(Ga($t,2))return Lt(oi({replace:tt},W($t.to),{state:typeof $t.to=="object"?oi({},Ot,$t.to.state):Ot,force:G}),dt||vt)}else $t=Z(vt,At,!0,tt,Ot);return J(vt,At,$t),$t})}function gt(q,dt){const ct=X(q,dt);return ct?Promise.reject(ct):Promise.resolve()}function _t(q){const dt=rt.values().next().value;return dt&&typeof dt.runWithContext=="function"?dt.runWithContext(q):q()}function zt(q,dt){let ct;const[At,Ot,G]=R5(q,dt);ct=Ff(At.reverse(),"beforeRouteLeave",q,dt);for(const yt of At)yt.leaveGuards.forEach(vt=>{ct.push(Pl(vt,q,dt))});const tt=gt.bind(null,q,dt);return ct.push(tt),D(ct).then(()=>{ct=[];for(const yt of a.list())ct.push(Pl(yt,q,dt));return ct.push(tt),D(ct)}).then(()=>{ct=Ff(Ot,"beforeRouteUpdate",q,dt);for(const yt of Ot)yt.updateGuards.forEach(vt=>{ct.push(Pl(vt,q,dt))});return ct.push(tt),D(ct)}).then(()=>{ct=[];for(const yt of G)if(yt.beforeEnter)if(Xo(yt.beforeEnter))for(const vt of yt.beforeEnter)ct.push(Pl(vt,q,dt));else ct.push(Pl(yt.beforeEnter,q,dt));return ct.push(tt),D(ct)}).then(()=>(q.matched.forEach(yt=>yt.enterCallbacks={}),ct=Ff(G,"beforeRouteEnter",q,dt,_t),ct.push(tt),D(ct))).then(()=>{ct=[];for(const yt of l.list())ct.push(Pl(yt,q,dt));return ct.push(tt),D(ct)}).catch(yt=>Ga(yt,8)?yt:Promise.reject(yt))}function J(q,dt,ct){f.list().forEach(At=>_t(()=>At(q,dt,ct)))}function Z(q,dt,ct,At,Ot){const G=X(q,dt);if(G)return G;const tt=dt===yl,yt=Pu?history.state:{};ct&&(At||tt?o.replace(q.fullPath,oi({scroll:tt&&yt&&yt.scroll},Ot)):o.push(q.fullPath,Ot)),p.value=q,ht(q,dt,ct,tt),ft()}let Et;function Bt(){Et||(Et=o.listen((q,dt,ct)=>{if(!$.listening)return;const At=U(q),Ot=Nt(At);if(Ot){Lt(oi(Ot,{replace:!0,force:!0}),At).catch(vc);return}v=At;const G=p.value;Pu&&a5(x0(G.fullPath,ct.delta),of()),zt(At,G).catch(tt=>Ga(tt,12)?tt:Ga(tt,2)?(Lt(oi(W(tt.to),{force:!0}),At).then(yt=>{Ga(yt,20)&&!ct.delta&&ct.type===Mc.pop&&o.go(-1,!1)}).catch(vc),Promise.reject()):(ct.delta&&o.go(-ct.delta,!1),z(tt,At,G))).then(tt=>{tt=tt||Z(At,G,!1),tt&&(ct.delta&&!Ga(tt,8)?o.go(-ct.delta,!1):ct.type===Mc.pop&&Ga(tt,20)&&o.go(-1,!1)),J(At,G,tt)}).catch(vc)}))}let A=nc(),H=nc(),V;function z(q,dt,ct){ft(q);const At=H.list();return At.length?At.forEach(Ot=>Ot(q,dt,ct)):console.error(q),Promise.reject(q)}function mt(){return V&&p.value!==yl?Promise.resolve():new Promise((q,dt)=>{A.add([q,dt])})}function ft(q){return V||(V=!q,Bt(),A.list().forEach(([dt,ct])=>q?ct(q):dt()),A.reset()),q}function ht(q,dt,ct,At){const{scrollBehavior:Ot}=t;if(!Pu||!Ot)return Promise.resolve();const G=!ct&&l5(x0(q.fullPath,0))||(At||!ct)&&history.state&&history.state.scroll||null;return Vi().then(()=>Ot(q,dt,G)).then(tt=>tt&&o5(tt)).catch(tt=>z(tt,q,dt))}const I=q=>o.go(q);let it;const rt=new Set,$={currentRoute:p,listening:!0,addRoute:x,removeRoute:R,clearRoutes:e.clearRoutes,hasRoute:j,getRoutes:N,resolve:U,options:t,push:St,replace:Mt,go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:a.add,beforeResolve:l.add,afterEach:f.add,onError:H.add,isReady:mt,install(q){const dt=this;q.component("RouterLink",ku),q.component("RouterView",P1),q.config.globalProperties.$router=dt,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>Rn(p)}),Pu&&!it&&p.value===yl&&(it=!0,St(o.location).catch(Ot=>{}));const ct={};for(const Ot in yl)Object.defineProperty(ct,Ot,{get:()=>p.value[Ot],enumerable:!0});q.provide(af,dt),q.provide(rp,Wg(ct)),q.provide(vd,p);const At=q.unmount;rt.add(q),q.unmount=function(){rt.delete(q),rt.size<1&&(v=yl,Et&&Et(),Et=null,p.value=yl,it=!1,V=!1),At()}}};function D(q){return q.reduce((dt,ct)=>dt.then(()=>_t(ct)),Promise.resolve())}return $}function R5(t,e){const n=[],i=[],o=[],a=Math.max(e.matched.length,t.matched.length);for(let l=0;l<a;l++){const f=e.matched[l];f&&(t.matched.find(v=>Uu(v,f))?i.push(f):n.push(f));const p=t.matched[l];p&&(e.matched.find(v=>Uu(v,p))||o.push(p))}return[n,i,o]}function jc(){return Mo(af)}function VS(t){return Mo(rp)}var Eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function I5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var S1=I5,F5=typeof Eo=="object"&&Eo&&Eo.Object===Object&&Eo,j5=F5,z5=j5,U5=typeof self=="object"&&self&&self.Object===Object&&self,q5=z5||U5||Function("return this")(),E1=q5,$5=E1,V5=function(){return $5.Date.now()},H5=V5,G5=/\s/;function W5(t){for(var e=t.length;e--&&G5.test(t.charAt(e)););return e}var Z5=W5,K5=Z5,Y5=/^\s+/;function J5(t){return t&&t.slice(0,K5(t)+1).replace(Y5,"")}var X5=J5,Q5=E1,tb=Q5.Symbol,A1=tb,I0=A1,M1=Object.prototype,eb=M1.hasOwnProperty,nb=M1.toString,ic=I0?I0.toStringTag:void 0;function ib(t){var e=eb.call(t,ic),n=t[ic];try{t[ic]=void 0;var i=!0}catch{}var o=nb.call(t);return i&&(e?t[ic]=n:delete t[ic]),o}var rb=ib,sb=Object.prototype,ob=sb.toString;function ab(t){return ob.call(t)}var lb=ab,F0=A1,ub=rb,cb=lb,hb="[object Null]",fb="[object Undefined]",j0=F0?F0.toStringTag:void 0;function db(t){return t==null?t===void 0?fb:hb:j0&&j0 in Object(t)?ub(t):cb(t)}var pb=db;function gb(t){return t!=null&&typeof t=="object"}var mb=gb,vb=pb,yb=mb,_b="[object Symbol]";function bb(t){return typeof t=="symbol"||yb(t)&&vb(t)==_b}var wb=bb,xb=X5,z0=S1,Lb=wb,U0=NaN,Cb=/^[-+]0x[0-9a-f]+$/i,Pb=/^0b[01]+$/i,kb=/^0o[0-7]+$/i,Sb=parseInt;function Eb(t){if(typeof t=="number")return t;if(Lb(t))return U0;if(z0(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=z0(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=xb(t);var n=Pb.test(t);return n||kb.test(t)?Sb(t.slice(2),n?2:8):Cb.test(t)?U0:+t}var Ab=Eb,Mb=S1,jf=H5,q0=Ab,Bb="Expected a function",Tb=Math.max,Db=Math.min;function Nb(t,e,n){var i,o,a,l,f,p,v=0,b=!1,w=!1,S=!0;if(typeof t!="function")throw new TypeError(Bb);e=q0(e)||0,Mb(n)&&(b=!!n.leading,w="maxWait"in n,a=w?Tb(q0(n.maxWait)||0,e):a,S="trailing"in n?!!n.trailing:S);function x(Nt){var Lt=i,gt=o;return i=o=void 0,v=Nt,l=t.apply(gt,Lt),l}function R(Nt){return v=Nt,f=setTimeout(U,e),b?x(Nt):l}function N(Nt){var Lt=Nt-p,gt=Nt-v,_t=e-Lt;return w?Db(_t,a-gt):_t}function j(Nt){var Lt=Nt-p,gt=Nt-v;return p===void 0||Lt>=e||Lt<0||w&&gt>=a}function U(){var Nt=jf();if(j(Nt))return W(Nt);f=setTimeout(U,N(Nt))}function W(Nt){return f=void 0,S&&i?x(Nt):(i=o=void 0,l)}function X(){f!==void 0&&clearTimeout(f),v=0,i=p=o=f=void 0}function St(){return f===void 0?l:W(jf())}function Mt(){var Nt=jf(),Lt=j(Nt);if(i=arguments,o=this,p=Nt,Lt){if(f===void 0)return R(p);if(w)return clearTimeout(f),f=setTimeout(U,e),x(p)}return f===void 0&&(f=setTimeout(U,e)),l}return Mt.cancel=X,Mt.flush=St,Mt}var Ob=Nb;const Rb=k1(Ob),Ib={class:"relative w-full"},Fb={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},jb=["onClick"],$0=Ls({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Ie(""),i=Ie([]),o=e,a=Rb(async p=>{if(p.length<3){i.value=[];return}try{const b=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(p)}`)).json();i.value=b}catch(v){console.error("Erreur lors de la recherche d'adresse:",v),i.value=[]}},300);function l(){a(n.value)}function f(p){n.value=p.display_name,i.value=[],o("select-location",{lat:parseFloat(p.lat),lng:parseFloat(p.lon)})}return(p,v)=>(se(),ce("div",Ib,[mn(M("input",{"onUpdate:modelValue":v[0]||(v[0]=b=>n.value=b),onInput:l,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Hn,n.value]]),i.value.length>0?(se(),ce("div",Fb,[(se(!0),ce(_n,null,Gn(i.value,b=>(se(),ce("div",{key:b.place_id,onClick:w=>f(b),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Pe(b.display_name),9,jb))),128))])):en("",!0)]))}}),zb={class:"h-screen flex flex-col"},Ub={key:0,class:"bg-white shadow-sm z-[2000]"},qb={class:"mx-auto px-4 sm:px-6 lg:px-8"},$b={class:"flex h-16 items-center justify-between"},Vb={class:"flex items-center space-x-8"},Hb={class:"hidden md:flex space-x-6"},Gb={key:0,class:"hidden md:block flex-1 mx-8"},Wb={key:1,class:"flex-1"},Zb={class:"flex items-center space-x-2 md:space-x-4"},Kb={class:"flex md:hidden"},Yb={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Jb={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},Xb={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},Qb={class:"relative"},t3={class:"hidden md:flex flex-col items-end"},e3={class:"text-sm font-medium text-gray-700"},n3={key:0,class:"text-xs text-gray-500"},i3=["src","alt"],r3={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},s3={class:"md:hidden px-4 py-2 border-b border-gray-100"},o3={class:"text-sm font-medium text-gray-700"},a3={class:"text-xs text-gray-500"},l3={key:0,class:"md:hidden"},u3={class:"space-y-1 px-2 pb-3 pt-2"},c3={key:0,class:"px-4 py-3"},h3={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},f3=Ls({__name:"App",setup(t){const e=jc(),n=xs(),i=Ie(!1),o=Ie(!1),a=Ie(!1);function l(){a.value=window.innerWidth<768}Ea(()=>{l(),window.addEventListener("resize",l)}),Gh(()=>{window.removeEventListener("resize",l)});const f=jn(()=>{const W=n.user;if(!W)return"";const X=`${W.first_name} ${W.last_name.toUpperCase()}`;return W.company_name?`${X} (${W.company_name})`:X}),p=jn(()=>{var X;switch((X=n.user)==null?void 0:X.user_type){case"admin":return"Accs administrateur";case"dealer":return"Accs concessionnaire";case"client":return"Accs client";default:return""}}),v=jn(()=>{var W;return((W=n.user)==null?void 0:W.user_type)==="admin"}),b=Ie(""),w=jn(()=>n.isAuthenticated),S=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],x=jn(()=>{var X;if(!w.value)return[];const W=[...S];return v.value?W.push({name:"Utilisateurs",to:"/users"}):((X=n.user)==null?void 0:X.user_type)==="dealer"&&W.push({name:"Clients",to:"/clients"}),W}),R=jn(()=>w.value?[{name:"Mon profil",to:"/profile"}]:[]);async function N(){try{await n.logout(),e.push("/login")}catch(W){console.error("Erreur lors de la dconnexion:",W)}}function j(W){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:W.lat,lng:W.lng,zoom:16}}))}Ea(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile()):console.log("No token found")}catch(W){console.error("Auth check error:",W),e.push("/login")}});const U=jn(()=>{const W="IrrigationDesign";if(!w.value)return`${W} - Connexion`;const X=e.currentRoute.value,Mt={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Slection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[X.name]||"";return Mt?`${W} - ${Mt}`:W});return qr(U,W=>{document.title=W},{immediate:!0}),(W,X)=>(se(),ce("div",zb,[w.value?(se(),ce("header",Ub,[M("nav",qb,[M("div",$b,[M("div",Vb,[Ai(Rn(ku),{to:"/",class:"text-xl font-semibold text-primary-600 truncate"},{default:Ja(()=>X[4]||(X[4]=[M("span",{class:"md:inline hidden"},"IrrigationDesign",-1),M("span",{class:"md:hidden inline"},"ID",-1)])),_:1}),M("div",Hb,[(se(!0),ce(_n,null,Gn(x.value,St=>(se(),tl(Rn(ku),{key:St.name,to:St.to,class:Di(["text-sm font-medium transition-colors duration-200",[W.$route.path===St.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Ja(()=>[Gi(Pe(St.name),1)]),_:2},1032,["to","class"]))),128))])]),W.$route.path==="/"?(se(),ce("div",Gb,[Ai($0,{onSelectLocation:j})])):(se(),ce("div",Wb)),M("div",Zb,[M("div",Kb,[M("button",{onClick:X[0]||(X[0]=St=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[X[5]||(X[5]=M("span",{class:"sr-only"},"Ouvrir le menu",-1)),(se(),ce("svg",Yb,[o.value?(se(),ce("path",Xb)):(se(),ce("path",Jb))]))])]),X[6]||(X[6]=M("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[M("span",{class:"sr-only"},"Voir les notifications"),M("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),M("div",Qb,[M("button",{onClick:X[1]||(X[1]=St=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[M("div",t3,[M("span",e3,Pe(f.value),1),p.value?(se(),ce("span",n3,Pe(p.value),1)):en("",!0)]),M("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:b.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(f.value),alt:f.value},null,8,i3)]),i.value?(se(),ce("div",r3,[M("div",s3,[M("div",o3,Pe(f.value),1),M("div",a3,Pe(p.value),1)]),(se(!0),ce(_n,null,Gn(R.value,St=>(se(),tl(Rn(ku),{key:St.name,to:St.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:X[2]||(X[2]=Mt=>i.value=!1)},{default:Ja(()=>[Gi(Pe(St.name),1)]),_:2},1032,["to"]))),128)),M("button",{onClick:N,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Dconnexion ")])):en("",!0)])])]),o.value?(se(),ce("div",l3,[M("div",u3,[(se(!0),ce(_n,null,Gn(x.value,St=>(se(),tl(Rn(ku),{key:St.name,to:St.to,class:Di(["block px-3 py-2 rounded-md text-base font-medium",[W.$route.path===St.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:X[3]||(X[3]=Mt=>o.value=!1)},{default:Ja(()=>[Gi(Pe(St.name),1)]),_:2},1032,["to","class"]))),128))]),W.$route.path==="/"?(se(),ce("div",c3,[Ai($0,{onSelectLocation:j})])):en("",!0)])):en("",!0)])])):en("",!0),M("main",{class:Di([W.$route.path==="/"?"overflow-hidden":"overflow-auto","flex-1 flex flex-col"])},[a.value&&W.$route.path==="/"?(se(),ce("div",h3,[X[8]||(X[8]=M("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),X[9]||(X[9]=M("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommande ",-1)),X[10]||(X[10]=M("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure exprience de conception d'irrigation, nous vous recommandons d'utiliser un cran plus large ou un ordinateur. ",-1)),Ai(Rn(ku),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Ja(()=>X[7]||(X[7]=[Gi(" Voir mes plans ")])),_:1})])):(se(),tl(Rn(P1),{key:1}))],2)]))}}),d3="modulepreload",p3=function(t){return"/static/frontend/"+t},V0={},Ql=function(e,n,i){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),f=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=Promise.allSettled(n.map(p=>{if(p=p3(p),p in V0)return;V0[p]=!0;const v=p.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":d3,v||(w.as="script"),w.crossOrigin="",w.href=p,f&&w.setAttribute("nonce",f),document.head.appendChild(w),v)return new Promise((S,x)=>{w.addEventListener("load",S),w.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=l,window.dispatchEvent(f),!f.defaultPrevented)throw l}return o.then(l=>{for(const f of l||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})},g3={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},m3={class:"max-w-md w-full space-y-8"},v3={class:"space-y-4"},y3={class:"mt-1"},_3={class:"mt-1"},b3={class:"mt-1"},w3={key:0,class:"rounded-md bg-red-50 p-4"},x3={class:"flex"},L3={class:"ml-3"},C3={class:"text-sm font-medium text-red-800"},P3={key:1,class:"rounded-md bg-yellow-50 p-4"},k3={class:"flex"},S3={class:"ml-3"},E3={class:"mt-2 text-sm text-yellow-700"},A3={class:"list-disc pl-5 space-y-1"},M3=["disabled"],B3={class:"absolute left-0 inset-y-0 flex items-center pl-3"},T3={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},D3={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},N3=Ls({__name:"ChangePasswordForm",setup(t){const e=jc(),n=xs(),i=el({oldPassword:"",newPassword:"",confirmPassword:""}),o=Ie(!1),a=Ie("");Ea(()=>{var v,b;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(v=n.user)==null?void 0:v.id,mustChangePassword:(b=n.user)==null?void 0:b.must_change_password})});const l=jn(()=>{const v=[];return i.newPassword&&i.newPassword.length<8&&v.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),i.newPassword&&i.confirmPassword&&i.newPassword!==i.confirmPassword&&v.push("Les mots de passe ne correspondent pas"),v}),f=jn(()=>i.oldPassword.length>0&&i.newPassword.length>=8&&i.newPassword===i.confirmPassword);async function p(){var v,b,w,S,x,R,N,j;if(!f.value){a.value="Veuillez corriger les erreurs avant de continuer";return}if(!((v=n.user)!=null&&v.id)){a.value="Erreur : utilisateur non identifi";return}o.value=!0,a.value="";try{console.log("Submitting password change..."),await n.changePassword(i.oldPassword,i.newPassword),console.log("Password changed successfully"),e.push("/")}catch(U){console.error("Password change failed:",U),(w=(b=U.response)==null?void 0:b.data)!=null&&w.detail?a.value=U.response.data.detail:(x=(S=U.response)==null?void 0:S.data)!=null&&x.old_password?a.value=U.response.data.old_password[0]:(N=(R=U.response)==null?void 0:R.data)!=null&&N.password?a.value=U.response.data.password[0]:((j=U.response)==null?void 0:j.status)===401?(a.value="Session expire, veuillez vous reconnecter",await n.logout(),e.push("/login")):a.value="Une erreur est survenue lors du changement de mot de passe"}finally{o.value=!1}}return(v,b)=>(se(),ce("div",g3,[M("div",m3,[b[12]||(b[12]=M("div",null,[M("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),M("form",{class:"mt-8 space-y-6",onSubmit:Jh(p,["prevent"])},[M("div",v3,[M("div",null,[b[3]||(b[3]=M("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),M("div",y3,[mn(M("input",{id:"old-password","onUpdate:modelValue":b[0]||(b[0]=w=>i.oldPassword=w),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Hn,i.oldPassword]])])]),M("div",null,[b[4]||(b[4]=M("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),M("div",_3,[mn(M("input",{id:"new-password","onUpdate:modelValue":b[1]||(b[1]=w=>i.newPassword=w),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Hn,i.newPassword]])]),b[5]||(b[5]=M("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),M("div",null,[b[6]||(b[6]=M("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),M("div",b3,[mn(M("input",{id:"confirm-password","onUpdate:modelValue":b[2]||(b[2]=w=>i.confirmPassword=w),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Hn,i.confirmPassword]])])])]),a.value?(se(),ce("div",w3,[M("div",x3,[b[7]||(b[7]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",L3,[M("h3",C3,Pe(a.value),1)])])])):en("",!0),l.value.length>0?(se(),ce("div",P3,[M("div",k3,[b[9]||(b[9]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),M("div",S3,[b[8]||(b[8]=M("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),M("div",E3,[M("ul",A3,[(se(!0),ce(_n,null,Gn(l.value,(w,S)=>(se(),ce("li",{key:S},Pe(w),1))),128))])])])])])):en("",!0),M("div",null,[M("button",{type:"submit",disabled:o.value||!f.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[M("span",B3,[o.value?(se(),ce("svg",D3,b[11]||(b[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(se(),ce("svg",T3,b[10]||(b[10]=[M("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Gi(" "+Pe(o.value?"Modification en cours...":"Changer le mot de passe"),1)],8,M3)])],32)])]))}}),O3="/static/frontend/assets/logo.svg",R3={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},I3={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},F3={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},j3={key:0,class:"rounded-md bg-red-50 p-4"},z3={class:"flex"},U3={class:"ml-3"},q3={class:"text-sm font-medium text-red-800"},$3={class:"mt-1"},V3={class:"mt-1 relative"},H3=["type"],G3={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},W3={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Z3={class:"flex items-center justify-between"},K3={class:"flex items-center"},Y3={class:"text-sm"},J3=["disabled"],X3={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Q3=Ls({__name:"LoginView",setup(t){const e=jc(),n=xs(),i=Ie(!1),o=Ie(null),a=Ie(!1),l=el({username:"",password:"",rememberMe:!1});Ea(()=>{var p;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(p=window.INITIAL_STATE)!=null&&p.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),e.push("/"))});async function f(){var p,v,b,w,S,x;i.value=!0,o.value=null;try{if(!l.username||!l.password){o.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(p=n.user)!=null&&p.must_change_password?e.push("/change-password"):e.push("/")}catch(R){console.error("Login error:",R),o.value=((b=(v=R==null?void 0:R.response)==null?void 0:v.data)==null?void 0:b.detail)||((x=(S=(w=R==null?void 0:R.response)==null?void 0:w.data)==null?void 0:S.non_field_errors)==null?void 0:x[0])||(R==null?void 0:R.message)||"Erreur lors de la connexion"}finally{i.value=!1}}return(p,v)=>{const b=ky("router-link");return se(),ce("div",R3,[v[12]||(v[12]=M("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[M("img",{src:O3,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),M("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),M("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accder  votre espace ")],-1)),M("div",I3,[M("div",F3,[M("form",{class:"space-y-6",onSubmit:Jh(f,["prevent"])},[o.value?(se(),ce("div",j3,[M("div",z3,[v[4]||(v[4]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",U3,[M("h3",q3,Pe(o.value),1)])])])):en("",!0),M("div",null,[v[5]||(v[5]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),M("div",$3,[mn(M("input",{id:"username","onUpdate:modelValue":v[0]||(v[0]=w=>l.username=w),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Hn,l.username]])])]),M("div",null,[v[8]||(v[8]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),M("div",V3,[mn(M("input",{id:"password","onUpdate:modelValue":v[1]||(v[1]=w=>l.password=w),type:a.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,H3),[[V2,l.password]]),M("button",{type:"button",onClick:v[2]||(v[2]=w=>a.value=!a.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[a.value?(se(),ce("svg",G3,v[6]||(v[6]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(se(),ce("svg",W3,v[7]||(v[7]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),M("div",Z3,[M("div",K3,[mn(M("input",{id:"remember-me","onUpdate:modelValue":v[3]||(v[3]=w=>l.rememberMe=w),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Om,l.rememberMe]]),v[9]||(v[9]=M("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),M("div",Y3,[Ai(b,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Ja(()=>v[10]||(v[10]=[Gi(" Mot de passe oubli ? ")])),_:1})])]),M("div",null,[M("button",{type:"submit",disabled:i.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[i.value?(se(),ce("svg",X3,v[11]||(v[11]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):en("",!0),Gi(" "+Pe(i.value?"Connexion en cours...":"Se connecter"),1)],8,J3)])],32)])])])}}}),H0="/static/frontend/assets/logo.jpeg";var yd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Eo,function(n){var i="1.9.4";function o(r){var c,m,k,F;for(m=1,k=arguments.length;m<k;m++){F=arguments[m];for(c in F)r[c]=F[c]}return r}var a=Object.create||function(){function r(){}return function(c){return r.prototype=c,new r}}();function l(r,c){var m=Array.prototype.slice;if(r.bind)return r.bind.apply(r,m.call(arguments,1));var k=m.call(arguments,2);return function(){return r.apply(c,k.length?k.concat(m.call(arguments)):arguments)}}var f=0;function p(r){return"_leaflet_id"in r||(r._leaflet_id=++f),r._leaflet_id}function v(r,c,m){var k,F,lt,Vt;return Vt=function(){k=!1,F&&(lt.apply(m,F),F=!1)},lt=function(){k?F=arguments:(r.apply(m,arguments),setTimeout(Vt,c),k=!0)},lt}function b(r,c,m){var k=c[1],F=c[0],lt=k-F;return r===k&&m?r:((r-F)%lt+lt)%lt+F}function w(){return!1}function S(r,c){if(c===!1)return r;var m=Math.pow(10,c===void 0?6:c);return Math.round(r*m)/m}function x(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function R(r){return x(r).split(/\s+/)}function N(r,c){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?a(r.options):{});for(var m in c)r.options[m]=c[m];return r.options}function j(r,c,m){var k=[];for(var F in r)k.push(encodeURIComponent(m?F.toUpperCase():F)+"="+encodeURIComponent(r[F]));return(!c||c.indexOf("?")===-1?"?":"&")+k.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function W(r,c){return r.replace(U,function(m,k){var F=c[k];if(F===void 0)throw new Error("No value provided for variable "+m);return typeof F=="function"&&(F=F(c)),F})}var X=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function St(r,c){for(var m=0;m<r.length;m++)if(r[m]===c)return m;return-1}var Mt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Nt(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var Lt=0;function gt(r){var c=+new Date,m=Math.max(0,16-(c-Lt));return Lt=c+m,window.setTimeout(r,m)}var _t=window.requestAnimationFrame||Nt("RequestAnimationFrame")||gt,zt=window.cancelAnimationFrame||Nt("CancelAnimationFrame")||Nt("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function J(r,c,m){if(m&&_t===gt)r.call(c);else return _t.call(window,l(r,c))}function Z(r){r&&zt.call(window,r)}var Et={__proto__:null,extend:o,create:a,bind:l,get lastId(){return f},stamp:p,throttle:v,wrapNum:b,falseFn:w,formatNum:S,trim:x,splitWords:R,setOptions:N,getParamString:j,template:W,isArray:X,indexOf:St,emptyImageUrl:Mt,requestFn:_t,cancelFn:zt,requestAnimFrame:J,cancelAnimFrame:Z};function Bt(){}Bt.extend=function(r){var c=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=c.__super__=this.prototype,k=a(m);k.constructor=c,c.prototype=k;for(var F in this)Object.prototype.hasOwnProperty.call(this,F)&&F!=="prototype"&&F!=="__super__"&&(c[F]=this[F]);return r.statics&&o(c,r.statics),r.includes&&(A(r.includes),o.apply(null,[k].concat(r.includes))),o(k,r),delete k.statics,delete k.includes,k.options&&(k.options=m.options?a(m.options):{},o(k.options,r.options)),k._initHooks=[],k.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var lt=0,Vt=k._initHooks.length;lt<Vt;lt++)k._initHooks[lt].call(this)}},c},Bt.include=function(r){var c=this.prototype.options;return o(this.prototype,r),r.options&&(this.prototype.options=c,this.mergeOptions(r.options)),this},Bt.mergeOptions=function(r){return o(this.prototype.options,r),this},Bt.addInitHook=function(r){var c=Array.prototype.slice.call(arguments,1),m=typeof r=="function"?r:function(){this[r].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function A(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=X(r)?r:[r];for(var c=0;c<r.length;c++)r[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(r,c,m){if(typeof r=="object")for(var k in r)this._on(k,r[k],c);else{r=R(r);for(var F=0,lt=r.length;F<lt;F++)this._on(r[F],c,m)}return this},off:function(r,c,m){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var k in r)this._off(k,r[k],c);else{r=R(r);for(var F=arguments.length===1,lt=0,Vt=r.length;lt<Vt;lt++)F?this._off(r[lt]):this._off(r[lt],c,m)}return this},_on:function(r,c,m,k){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(r,c,m)===!1){m===this&&(m=void 0);var F={fn:c,ctx:m};k&&(F.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(F)}},_off:function(r,c,m){var k,F,lt;if(this._events&&(k=this._events[r],!!k)){if(arguments.length===1){if(this._firingCount)for(F=0,lt=k.length;F<lt;F++)k[F].fn=w;delete this._events[r];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var Vt=this._listens(r,c,m);if(Vt!==!1){var de=k[Vt];this._firingCount&&(de.fn=w,this._events[r]=k=k.slice()),k.splice(Vt,1)}}},fire:function(r,c,m){if(!this.listens(r,m))return this;var k=o({},c,{type:r,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var F=this._events[r];if(F){this._firingCount=this._firingCount+1||1;for(var lt=0,Vt=F.length;lt<Vt;lt++){var de=F[lt],_e=de.fn;de.once&&this.off(r,_e,de.ctx),_e.call(de.ctx||this,k)}this._firingCount--}}return m&&this._propagateEvent(k),this},listens:function(r,c,m,k){typeof r!="string"&&console.warn('"string" type argument expected');var F=c;typeof c!="function"&&(k=!!c,F=void 0,m=void 0);var lt=this._events&&this._events[r];if(lt&&lt.length&&this._listens(r,F,m)!==!1)return!0;if(k){for(var Vt in this._eventParents)if(this._eventParents[Vt].listens(r,c,m,k))return!0}return!1},_listens:function(r,c,m){if(!this._events)return!1;var k=this._events[r]||[];if(!c)return!!k.length;m===this&&(m=void 0);for(var F=0,lt=k.length;F<lt;F++)if(k[F].fn===c&&k[F].ctx===m)return F;return!1},once:function(r,c,m){if(typeof r=="object")for(var k in r)this._on(k,r[k],c,!0);else{r=R(r);for(var F=0,lt=r.length;F<lt;F++)this._on(r[F],c,m,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[p(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[p(r)],this},_propagateEvent:function(r){for(var c in this._eventParents)this._eventParents[c].fire(r.type,o({layer:r.target,propagatedFrom:r.target},r),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var V=Bt.extend(H);function z(r,c,m){this.x=m?Math.round(r):r,this.y=m?Math.round(c):c}var mt=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(r){return this.clone()._add(ft(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(ft(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new z(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new z(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=mt(this.x),this.y=mt(this.y),this},distanceTo:function(r){r=ft(r);var c=r.x-this.x,m=r.y-this.y;return Math.sqrt(c*c+m*m)},equals:function(r){return r=ft(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=ft(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function ft(r,c,m){return r instanceof z?r:X(r)?new z(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new z(r.x,r.y):new z(r,c,m)}function ht(r,c){if(r)for(var m=c?[r,c]:r,k=0,F=m.length;k<F;k++)this.extend(m[k])}ht.prototype={extend:function(r){var c,m;if(!r)return this;if(r instanceof z||typeof r[0]=="number"||"x"in r)c=m=ft(r);else if(r=I(r),c=r.min,m=r.max,!c||!m)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=m.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(r){return ft((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return ft(this.min.x,this.max.y)},getTopRight:function(){return ft(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var c,m;return typeof r[0]=="number"||r instanceof z?r=ft(r):r=I(r),r instanceof ht?(c=r.min,m=r.max):c=m=r,c.x>=this.min.x&&m.x<=this.max.x&&c.y>=this.min.y&&m.y<=this.max.y},intersects:function(r){r=I(r);var c=this.min,m=this.max,k=r.min,F=r.max,lt=F.x>=c.x&&k.x<=m.x,Vt=F.y>=c.y&&k.y<=m.y;return lt&&Vt},overlaps:function(r){r=I(r);var c=this.min,m=this.max,k=r.min,F=r.max,lt=F.x>c.x&&k.x<m.x,Vt=F.y>c.y&&k.y<m.y;return lt&&Vt},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var c=this.min,m=this.max,k=Math.abs(c.x-m.x)*r,F=Math.abs(c.y-m.y)*r;return I(ft(c.x-k,c.y-F),ft(m.x+k,m.y+F))},equals:function(r){return r?(r=I(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function I(r,c){return!r||r instanceof ht?r:new ht(r,c)}function it(r,c){if(r)for(var m=c?[r,c]:r,k=0,F=m.length;k<F;k++)this.extend(m[k])}it.prototype={extend:function(r){var c=this._southWest,m=this._northEast,k,F;if(r instanceof $)k=r,F=r;else if(r instanceof it){if(k=r._southWest,F=r._northEast,!k||!F)return this}else return r?this.extend(D(r)||rt(r)):this;return!c&&!m?(this._southWest=new $(k.lat,k.lng),this._northEast=new $(F.lat,F.lng)):(c.lat=Math.min(k.lat,c.lat),c.lng=Math.min(k.lng,c.lng),m.lat=Math.max(F.lat,m.lat),m.lng=Math.max(F.lng,m.lng)),this},pad:function(r){var c=this._southWest,m=this._northEast,k=Math.abs(c.lat-m.lat)*r,F=Math.abs(c.lng-m.lng)*r;return new it(new $(c.lat-k,c.lng-F),new $(m.lat+k,m.lng+F))},getCenter:function(){return new $((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $(this.getNorth(),this.getWest())},getSouthEast:function(){return new $(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof $||"lat"in r?r=D(r):r=rt(r);var c=this._southWest,m=this._northEast,k,F;return r instanceof it?(k=r.getSouthWest(),F=r.getNorthEast()):k=F=r,k.lat>=c.lat&&F.lat<=m.lat&&k.lng>=c.lng&&F.lng<=m.lng},intersects:function(r){r=rt(r);var c=this._southWest,m=this._northEast,k=r.getSouthWest(),F=r.getNorthEast(),lt=F.lat>=c.lat&&k.lat<=m.lat,Vt=F.lng>=c.lng&&k.lng<=m.lng;return lt&&Vt},overlaps:function(r){r=rt(r);var c=this._southWest,m=this._northEast,k=r.getSouthWest(),F=r.getNorthEast(),lt=F.lat>c.lat&&k.lat<m.lat,Vt=F.lng>c.lng&&k.lng<m.lng;return lt&&Vt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,c){return r?(r=rt(r),this._southWest.equals(r.getSouthWest(),c)&&this._northEast.equals(r.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function rt(r,c){return r instanceof it?r:new it(r,c)}function $(r,c,m){if(isNaN(r)||isNaN(c))throw new Error("Invalid LatLng object: ("+r+", "+c+")");this.lat=+r,this.lng=+c,m!==void 0&&(this.alt=+m)}$.prototype={equals:function(r,c){if(!r)return!1;r=D(r);var m=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return m<=(c===void 0?1e-9:c)},toString:function(r){return"LatLng("+S(this.lat,r)+", "+S(this.lng,r)+")"},distanceTo:function(r){return dt.distance(this,D(r))},wrap:function(){return dt.wrapLatLng(this)},toBounds:function(r){var c=180*r/40075017,m=c/Math.cos(Math.PI/180*this.lat);return rt([this.lat-c,this.lng-m],[this.lat+c,this.lng+m])},clone:function(){return new $(this.lat,this.lng,this.alt)}};function D(r,c,m){return r instanceof $?r:X(r)&&typeof r[0]!="object"?r.length===3?new $(r[0],r[1],r[2]):r.length===2?new $(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new $(r.lat,"lng"in r?r.lng:r.lon,r.alt):c===void 0?null:new $(r,c,m)}var q={latLngToPoint:function(r,c){var m=this.projection.project(r),k=this.scale(c);return this.transformation._transform(m,k)},pointToLatLng:function(r,c){var m=this.scale(c),k=this.transformation.untransform(r,m);return this.projection.unproject(k)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var c=this.projection.bounds,m=this.scale(r),k=this.transformation.transform(c.min,m),F=this.transformation.transform(c.max,m);return new ht(k,F)},infinite:!1,wrapLatLng:function(r){var c=this.wrapLng?b(r.lng,this.wrapLng,!0):r.lng,m=this.wrapLat?b(r.lat,this.wrapLat,!0):r.lat,k=r.alt;return new $(m,c,k)},wrapLatLngBounds:function(r){var c=r.getCenter(),m=this.wrapLatLng(c),k=c.lat-m.lat,F=c.lng-m.lng;if(k===0&&F===0)return r;var lt=r.getSouthWest(),Vt=r.getNorthEast(),de=new $(lt.lat-k,lt.lng-F),_e=new $(Vt.lat-k,Vt.lng-F);return new it(de,_e)}},dt=o({},q,{wrapLng:[-180,180],R:6371e3,distance:function(r,c){var m=Math.PI/180,k=r.lat*m,F=c.lat*m,lt=Math.sin((c.lat-r.lat)*m/2),Vt=Math.sin((c.lng-r.lng)*m/2),de=lt*lt+Math.cos(k)*Math.cos(F)*Vt*Vt,_e=2*Math.atan2(Math.sqrt(de),Math.sqrt(1-de));return this.R*_e}}),ct=6378137,At={R:ct,MAX_LATITUDE:85.0511287798,project:function(r){var c=Math.PI/180,m=this.MAX_LATITUDE,k=Math.max(Math.min(m,r.lat),-m),F=Math.sin(k*c);return new z(this.R*r.lng*c,this.R*Math.log((1+F)/(1-F))/2)},unproject:function(r){var c=180/Math.PI;return new $((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*c,r.x*c/this.R)},bounds:function(){var r=ct*Math.PI;return new ht([-r,-r],[r,r])}()};function Ot(r,c,m,k){if(X(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=c,this._c=m,this._d=k}Ot.prototype={transform:function(r,c){return this._transform(r.clone(),c)},_transform:function(r,c){return c=c||1,r.x=c*(this._a*r.x+this._b),r.y=c*(this._c*r.y+this._d),r},untransform:function(r,c){return c=c||1,new z((r.x/c-this._b)/this._a,(r.y/c-this._d)/this._c)}};function G(r,c,m,k){return new Ot(r,c,m,k)}var tt=o({},dt,{code:"EPSG:3857",projection:At,transformation:function(){var r=.5/(Math.PI*At.R);return G(r,.5,-r,.5)}()}),yt=o({},tt,{code:"EPSG:900913"});function vt(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Y(r,c){var m="",k,F,lt,Vt,de,_e;for(k=0,lt=r.length;k<lt;k++){for(de=r[k],F=0,Vt=de.length;F<Vt;F++)_e=de[F],m+=(F?"L":"M")+_e.x+" "+_e.y;m+=c?$e.svg?"z":"x":""}return m||"M0 0"}var $t=document.documentElement.style,ee="ActiveXObject"in window,Ht=ee&&!document.addEventListener,Rt="msLaunchUri"in navigator&&!("documentMode"in document),wt=qn("webkit"),oe=qn("android"),ne=qn("android 2")||qn("android 3"),xe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ut=oe&&qn("Google")&&xe<537&&!("AudioNode"in window),te=!!window.opera,qe=!Rt&&qn("chrome"),He=qn("gecko")&&!wt&&!te&&!ee,ze=!qe&&qn("safari"),Xe=qn("phantom"),Oe="OTransition"in $t,an=navigator.platform.indexOf("Win")===0,gn=ee&&"transition"in $t,di="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ne,sn="MozPerspective"in $t,dn=!window.L_DISABLE_3D&&(gn||di||sn)&&!Oe&&!Xe,Ze=typeof orientation<"u"||qn("mobile"),Sn=Ze&&wt,yi=Ze&&di,Tn=!window.PointerEvent&&window.MSPointerEvent,li=!!(window.PointerEvent||Tn),pi="ontouchstart"in window||!!window.TouchEvent,Vn=!window.L_NO_TOUCH&&(pi||li),je=Ze&&te,Ne=Ze&&He,Ni=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ui=function(){var r=!1;try{var c=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,c),window.removeEventListener("testPassiveEventSupport",w,c)}catch{}return r}(),Fe=function(){return!!document.createElement("canvas").getContext}(),ti=!!(document.createElementNS&&vt("svg").createSVGRect),Qe=!!ti&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ri=!ti&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var c=r.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Rr=navigator.platform.indexOf("Mac")===0,Wi=navigator.platform.indexOf("Linux")===0;function qn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var $e={ie:ee,ielt9:Ht,edge:Rt,webkit:wt,android:oe,android23:ne,androidStock:Ut,opera:te,chrome:qe,gecko:He,safari:ze,phantom:Xe,opera12:Oe,win:an,ie3d:gn,webkit3d:di,gecko3d:sn,any3d:dn,mobile:Ze,mobileWebkit:Sn,mobileWebkit3d:yi,msPointer:Tn,pointer:li,touch:Vn,touchNative:pi,mobileOpera:je,mobileGecko:Ne,retina:Ni,passiveEvents:ui,canvas:Fe,svg:ti,vml:ri,inlineSvg:Qe,mac:Rr,linux:Wi},Zi=$e.msPointer?"MSPointerDown":"pointerdown",Cs=$e.msPointer?"MSPointerMove":"pointermove",Cr=$e.msPointer?"MSPointerUp":"pointerup",pr=$e.msPointer?"MSPointerCancel":"pointercancel",rr={touchstart:Zi,touchmove:Cs,touchend:Cr,touchcancel:pr},gr={touchstart:na,touchmove:ks,touchend:ks,touchcancel:ks},Ui={},sr=!1;function Ir(r,c,m){return c==="touchstart"&&us(),gr[c]?(m=gr[c].bind(this,m),r.addEventListener(rr[c],m,!1),m):(console.warn("wrong event specified:",c),w)}function Ps(r,c,m){if(!rr[c]){console.warn("wrong event specified:",c);return}r.removeEventListener(rr[c],m,!1)}function Hs(r){Ui[r.pointerId]=r}function Gs(r){Ui[r.pointerId]&&(Ui[r.pointerId]=r)}function $r(r){delete Ui[r.pointerId]}function us(){sr||(document.addEventListener(Zi,Hs,!0),document.addEventListener(Cs,Gs,!0),document.addEventListener(Cr,$r,!0),document.addEventListener(pr,$r,!0),sr=!0)}function ks(r,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var m in Ui)c.touches.push(Ui[m]);c.changedTouches=[c],r(c)}}function na(r,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&Ci(c),ks(r,c)}function ia(r){var c={},m,k;for(k in r)m=r[k],c[k]=m&&m.bind?m.bind(r):m;return r=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Ws=200;function Do(r,c){r.addEventListener("dblclick",c);var m=0,k;function F(lt){if(lt.detail!==1){k=lt.detail;return}if(!(lt.pointerType==="mouse"||lt.sourceCapabilities&&!lt.sourceCapabilities.firesTouchEvents)){var Vt=Js(lt);if(!(Vt.some(function(_e){return _e instanceof HTMLLabelElement&&_e.attributes.for})&&!Vt.some(function(_e){return _e instanceof HTMLInputElement||_e instanceof HTMLSelectElement}))){var de=Date.now();de-m<=Ws?(k++,k===2&&c(ia(lt))):k=1,m=de}}}return r.addEventListener("click",F),{dblclick:c,simDblclick:F}}function ra(r,c){r.removeEventListener("dblclick",c.dblclick),r.removeEventListener("click",c.simDblclick)}var Ss=sa(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Es=sa(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),uo=Es==="webkitTransition"||Es==="OTransition"?Es+"End":"transitionend";function No(r){return typeof r=="string"?document.getElementById(r):r}function or(r,c){var m=r.style[c]||r.currentStyle&&r.currentStyle[c];if((!m||m==="auto")&&document.defaultView){var k=document.defaultView.getComputedStyle(r,null);m=k?k[c]:null}return m==="auto"?null:m}function Dn(r,c,m){var k=document.createElement(r);return k.className=c||"",m&&m.appendChild(k),k}function rn(r){var c=r.parentNode;c&&c.removeChild(r)}function ci(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function _i(r){var c=r.parentNode;c&&c.lastChild!==r&&c.appendChild(r)}function $n(r){var c=r.parentNode;c&&c.firstChild!==r&&c.insertBefore(r,c.firstChild)}function Vr(r,c){if(r.classList!==void 0)return r.classList.contains(c);var m=Ki(r);return m.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(m)}function xn(r,c){if(r.classList!==void 0)for(var m=R(c),k=0,F=m.length;k<F;k++)r.classList.add(m[k]);else if(!Vr(r,c)){var lt=Ki(r);co(r,(lt?lt+" ":"")+c)}}function zn(r,c){r.classList!==void 0?r.classList.remove(c):co(r,x((" "+Ki(r)+" ").replace(" "+c+" "," ")))}function co(r,c){r.className.baseVal===void 0?r.className=c:r.className.baseVal=c}function Ki(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function ar(r,c){"opacity"in r.style?r.style.opacity=c:"filter"in r.style&&il(r,c)}function il(r,c){var m=!1,k="DXImageTransform.Microsoft.Alpha";try{m=r.filters.item(k)}catch{if(c===1)return}c=Math.round(c*100),m?(m.Enabled=c!==100,m.Opacity=c):r.style.filter+=" progid:"+k+"(opacity="+c+")"}function sa(r){for(var c=document.documentElement.style,m=0;m<r.length;m++)if(r[m]in c)return r[m];return!1}function As(r,c,m){var k=c||new z(0,0);r.style[Ss]=($e.ie3d?"translate("+k.x+"px,"+k.y+"px)":"translate3d("+k.x+"px,"+k.y+"px,0)")+(m?" scale("+m+")":"")}function bi(r,c){r._leaflet_pos=c,$e.any3d?As(r,c):(r.style.left=c.x+"px",r.style.top=c.y+"px")}function Ms(r){return r._leaflet_pos||new z(0,0)}var Oo,Zs,Ma;if("onselectstart"in document)Oo=function(){Pn(window,"selectstart",Ci)},Zs=function(){In(window,"selectstart",Ci)};else{var ho=sa(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Oo=function(){if(ho){var r=document.documentElement.style;Ma=r[ho],r[ho]="none"}},Zs=function(){ho&&(document.documentElement.style[ho]=Ma,Ma=void 0)}}function Ba(){Pn(window,"dragstart",Ci)}function cs(){In(window,"dragstart",Ci)}var Ks,fo;function oa(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Oi(),Ks=r,fo=r.style.outlineStyle,r.style.outlineStyle="none",Pn(window,"keydown",Oi))}function Oi(){Ks&&(Ks.style.outlineStyle=fo,Ks=void 0,fo=void 0,In(window,"keydown",Oi))}function rl(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function aa(r){var c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}var Ln={__proto__:null,TRANSFORM:Ss,TRANSITION:Es,TRANSITION_END:uo,get:No,getStyle:or,create:Dn,remove:rn,empty:ci,toFront:_i,toBack:$n,hasClass:Vr,addClass:xn,removeClass:zn,setClass:co,getClass:Ki,setOpacity:ar,testProp:sa,setTransform:As,setPosition:bi,getPosition:Ms,get disableTextSelection(){return Oo},get enableTextSelection(){return Zs},disableImageDrag:Ba,enableImageDrag:cs,preventOutline:oa,restoreOutline:Oi,getSizedParentNode:rl,getScale:aa};function Pn(r,c,m,k){if(c&&typeof c=="object")for(var F in c)po(r,F,c[F],m);else{c=R(c);for(var lt=0,Vt=c.length;lt<Vt;lt++)po(r,c[lt],m,k)}return this}var Hr="_leaflet_events";function In(r,c,m,k){if(arguments.length===1)Ta(r),delete r[Hr];else if(c&&typeof c=="object")for(var F in c)Gr(r,F,c[F],m);else if(c=R(c),arguments.length===2)Ta(r,function(de){return St(c,de)!==-1});else for(var lt=0,Vt=c.length;lt<Vt;lt++)Gr(r,c[lt],m,k);return this}function Ta(r,c){for(var m in r[Hr]){var k=m.split(/\d/)[0];(!c||c(k))&&Gr(r,k,null,null,m)}}var la={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function po(r,c,m,k){var F=c+p(m)+(k?"_"+p(k):"");if(r[Hr]&&r[Hr][F])return this;var lt=function(de){return m.call(k||r,de||window.event)},Vt=lt;!$e.touchNative&&$e.pointer&&c.indexOf("touch")===0?lt=Ir(r,c,lt):$e.touch&&c==="dblclick"?lt=Do(r,lt):"addEventListener"in r?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?r.addEventListener(la[c]||c,lt,$e.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(lt=function(de){de=de||window.event,go(r,de)&&Vt(de)},r.addEventListener(la[c],lt,!1)):r.addEventListener(c,Vt,!1):r.attachEvent("on"+c,lt),r[Hr]=r[Hr]||{},r[Hr][F]=lt}function Gr(r,c,m,k,F){F=F||c+p(m)+(k?"_"+p(k):"");var lt=r[Hr]&&r[Hr][F];if(!lt)return this;!$e.touchNative&&$e.pointer&&c.indexOf("touch")===0?Ps(r,c,lt):$e.touch&&c==="dblclick"?ra(r,lt):"removeEventListener"in r?r.removeEventListener(la[c]||c,lt,!1):r.detachEvent("on"+c,lt),r[Hr][F]=null}function Ys(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Da(r){return po(r,"wheel",Ys),this}function Ro(r){return Pn(r,"mousedown touchstart dblclick contextmenu",Ys),r._leaflet_disable_click=!0,this}function Ci(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Fr(r){return Ci(r),Ys(r),this}function Js(r){if(r.composedPath)return r.composedPath();for(var c=[],m=r.target;m;)c.push(m),m=m.parentNode;return c}function sl(r,c){if(!c)return new z(r.clientX,r.clientY);var m=aa(c),k=m.boundingClientRect;return new z((r.clientX-k.left)/m.x-c.clientLeft,(r.clientY-k.top)/m.y-c.clientTop)}var Io=$e.linux&&$e.chrome?window.devicePixelRatio:$e.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ua(r){return $e.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/Io:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function go(r,c){var m=c.relatedTarget;if(!m)return!0;try{for(;m&&m!==r;)m=m.parentNode}catch{return!1}return m!==r}var Fo={__proto__:null,on:Pn,off:In,stopPropagation:Ys,disableScrollPropagation:Da,disableClickPropagation:Ro,preventDefault:Ci,stop:Fr,getPropagationPath:Js,getMousePosition:sl,getWheelDelta:ua,isExternalTarget:go,addListener:Pn,removeListener:In},Na=V.extend({run:function(r,c,m,k){this.stop(),this._el=r,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(k||.5,.2),this._startPos=Ms(r),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=J(this._animate,this),this._step()},_step:function(r){var c=+new Date-this._startTime,m=this._duration*1e3;c<m?this._runFrame(this._easeOut(c/m),r):(this._runFrame(1),this._complete())},_runFrame:function(r,c){var m=this._startPos.add(this._offset.multiplyBy(r));c&&m._round(),bi(this._el,m),this.fire("step")},_complete:function(){Z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Nn=V.extend({options:{crs:tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,c){c=N(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(D(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Es&&$e.any3d&&!$e.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Pn(this._proxy,uo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,c,m){if(c=c===void 0?this._zoom:this._limitZoom(c),r=this._limitCenter(D(r),c,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=o({animate:m.animate},m.zoom),m.pan=o({animate:m.animate,duration:m.duration},m.pan));var k=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,c,m.zoom):this._tryAnimatedPan(r,m.pan);if(k)return clearTimeout(this._sizeTimer),this}return this._resetView(r,c,m.pan&&m.pan.noMoveStart),this},setZoom:function(r,c){return this._loaded?this.setView(this.getCenter(),r,{zoom:c}):(this._zoom=r,this)},zoomIn:function(r,c){return r=r||($e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,c)},zoomOut:function(r,c){return r=r||($e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,c)},setZoomAround:function(r,c,m){var k=this.getZoomScale(c),F=this.getSize().divideBy(2),lt=r instanceof z?r:this.latLngToContainerPoint(r),Vt=lt.subtract(F).multiplyBy(1-1/k),de=this.containerPointToLatLng(F.add(Vt));return this.setView(de,c,{zoom:m})},_getBoundsCenterZoom:function(r,c){c=c||{},r=r.getBounds?r.getBounds():rt(r);var m=ft(c.paddingTopLeft||c.padding||[0,0]),k=ft(c.paddingBottomRight||c.padding||[0,0]),F=this.getBoundsZoom(r,!1,m.add(k));if(F=typeof c.maxZoom=="number"?Math.min(c.maxZoom,F):F,F===1/0)return{center:r.getCenter(),zoom:F};var lt=k.subtract(m).divideBy(2),Vt=this.project(r.getSouthWest(),F),de=this.project(r.getNorthEast(),F),_e=this.unproject(Vt.add(de).divideBy(2).add(lt),F);return{center:_e,zoom:F}},fitBounds:function(r,c){if(r=rt(r),!r.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(r,c);return this.setView(m.center,m.zoom,c)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,c){return this.setView(r,this._zoom,{pan:c})},panBy:function(r,c){if(r=ft(r).round(),c=c||{},!r.x&&!r.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Na,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){xn(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,m,c.duration||.25,c.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,c,m){if(m=m||{},m.animate===!1||!$e.any3d)return this.setView(r,c,m);this._stop();var k=this.project(this.getCenter()),F=this.project(r),lt=this.getSize(),Vt=this._zoom;r=D(r),c=c===void 0?Vt:c;var de=Math.max(lt.x,lt.y),_e=de*this.getZoomScale(Vt,c),Me=F.distanceTo(k)||1,We=1.42,un=We*We;function Mn(Qn){var fr=Qn?-1:1,Wu=Qn?_e:de,js=_e*_e-de*de+fr*un*un*Me*Me,hu=2*Wu*un*Me,Ho=js/hu,hl=Math.sqrt(Ho*Ho+1)-Ho,fu=hl<1e-9?-18:Math.log(hl);return fu}function Lr(Qn){return(Math.exp(Qn)-Math.exp(-Qn))/2}function zi(Qn){return(Math.exp(Qn)+Math.exp(-Qn))/2}function Br(Qn){return Lr(Qn)/zi(Qn)}var xi=Mn(0);function Fs(Qn){return de*(zi(xi)/zi(xi+We*Qn))}function Fl(Qn){return de*(zi(xi)*Br(xi+We*Qn)-Lr(xi))/un}function ps(Qn){return 1-Math.pow(1-Qn,1.5)}var ts=Date.now(),Ur=(Mn(1)-xi)/We,Gu=m.duration?1e3*m.duration:1e3*Ur*.8;function jl(){var Qn=(Date.now()-ts)/Gu,fr=ps(Qn)*Ur;Qn<=1?(this._flyToFrame=J(jl,this),this._move(this.unproject(k.add(F.subtract(k).multiplyBy(Fl(fr)/Me)),Vt),this.getScaleZoom(de/Fs(fr),Vt),{flyTo:!0})):this._move(r,c)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),jl.call(this),this},flyToBounds:function(r,c){var m=this._getBoundsCenterZoom(r,c);return this.flyTo(m.center,m.zoom,c)},setMaxBounds:function(r){return r=rt(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var c=this.options.minZoom;return this.options.minZoom=r,this._loaded&&c!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var c=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&c!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,c){this._enforcingBounds=!0;var m=this.getCenter(),k=this._limitCenter(m,this._zoom,rt(r));return m.equals(k)||this.panTo(k,c),this._enforcingBounds=!1,this},panInside:function(r,c){c=c||{};var m=ft(c.paddingTopLeft||c.padding||[0,0]),k=ft(c.paddingBottomRight||c.padding||[0,0]),F=this.project(this.getCenter()),lt=this.project(r),Vt=this.getPixelBounds(),de=I([Vt.min.add(m),Vt.max.subtract(k)]),_e=de.getSize();if(!de.contains(lt)){this._enforcingBounds=!0;var Me=lt.subtract(de.getCenter()),We=de.extend(lt).getSize().subtract(_e);F.x+=Me.x<0?-We.x:We.x,F.y+=Me.y<0?-We.y:We.y,this.panTo(this.unproject(F),c),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=o({animate:!1,pan:!0},r===!0?{animate:!0}:r);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),k=c.divideBy(2).round(),F=m.divideBy(2).round(),lt=k.subtract(F);return!lt.x&&!lt.y?this:(r.animate&&r.pan?this.panBy(lt):(r.pan&&this._rawPanBy(lt),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=o({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=l(this._handleGeolocationResponse,this),m=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,m,r):navigator.geolocation.getCurrentPosition(c,m,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var c=r.code,m=r.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var c=r.coords.latitude,m=r.coords.longitude,k=new $(c,m),F=k.toBounds(r.coords.accuracy*2),lt=this._locateOptions;if(lt.setView){var Vt=this.getBoundsZoom(F);this.setView(k,lt.maxZoom?Math.min(Vt,lt.maxZoom):Vt)}var de={latlng:k,bounds:F,timestamp:r.timestamp};for(var _e in r.coords)typeof r.coords[_e]=="number"&&(de[_e]=r.coords[_e]);this.fire("locationfound",de)}},addHandler:function(r,c){if(!c)return this;var m=this[r]=new c(this);return this._handlers.push(m),this.options[r]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),rn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)rn(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,c){var m="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),k=Dn("div",m,c||this._mapPane);return r&&(this._panes[r]=k),k},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),c=this.unproject(r.getBottomLeft()),m=this.unproject(r.getTopRight());return new it(c,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,c,m){r=rt(r),m=ft(m||[0,0]);var k=this.getZoom()||0,F=this.getMinZoom(),lt=this.getMaxZoom(),Vt=r.getNorthWest(),de=r.getSouthEast(),_e=this.getSize().subtract(m),Me=I(this.project(de,k),this.project(Vt,k)).getSize(),We=$e.any3d?this.options.zoomSnap:1,un=_e.x/Me.x,Mn=_e.y/Me.y,Lr=c?Math.max(un,Mn):Math.min(un,Mn);return k=this.getScaleZoom(Lr,k),We&&(k=Math.round(k/(We/100))*(We/100),k=c?Math.ceil(k/We)*We:Math.floor(k/We)*We),Math.max(F,Math.min(lt,k))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,c){var m=this._getTopLeftPoint(r,c);return new ht(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,c){var m=this.options.crs;return c=c===void 0?this._zoom:c,m.scale(r)/m.scale(c)},getScaleZoom:function(r,c){var m=this.options.crs;c=c===void 0?this._zoom:c;var k=m.zoom(r*m.scale(c));return isNaN(k)?1/0:k},project:function(r,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(D(r),c)},unproject:function(r,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(ft(r),c)},layerPointToLatLng:function(r){var c=ft(r).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(r){var c=this.project(D(r))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(D(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(rt(r))},distance:function(r,c){return this.options.crs.distance(D(r),D(c))},containerPointToLayerPoint:function(r){return ft(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return ft(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var c=this.containerPointToLayerPoint(ft(r));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(D(r)))},mouseEventToContainerPoint:function(r){return sl(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var c=this._container=No(r);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Pn(c,"scroll",this._onScroll,this),this._containerId=p(c)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&$e.any3d,xn(r,"leaflet-container"+($e.touch?" leaflet-touch":"")+($e.retina?" leaflet-retina":"")+($e.ielt9?" leaflet-oldie":"")+($e.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=or(r,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),bi(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xn(r.markerPane,"leaflet-zoom-hide"),xn(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,c,m){bi(this._mapPane,new z(0,0));var k=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var F=this._zoom!==c;this._moveStart(F,m)._move(r,c)._moveEnd(F),this.fire("viewreset"),k&&this.fire("load")},_moveStart:function(r,c){return r&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(r,c,m,k){c===void 0&&(c=this._zoom);var F=this._zoom!==c;return this._zoom=c,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),k?m&&m.pinch&&this.fire("zoom",m):((F||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){bi(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[p(this._container)]=this;var c=r?In:Pn;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),$e.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Z(this._resizeRequest),this._resizeRequest=J(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,c){for(var m=[],k,F=c==="mouseout"||c==="mouseover",lt=r.target||r.srcElement,Vt=!1;lt;){if(k=this._targets[p(lt)],k&&(c==="click"||c==="preclick")&&this._draggableMoved(k)){Vt=!0;break}if(k&&k.listens(c,!0)&&(F&&!go(lt,r)||(m.push(k),F))||lt===this._container)break;lt=lt.parentNode}return!m.length&&!Vt&&!F&&this.listens(c,!0)&&(m=[this]),m},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var c=r.target||r.srcElement;if(!(!this._loaded||c._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(c))){var m=r.type;m==="mousedown"&&oa(c),this._fireDOMEvent(r,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,c,m){if(r.type==="click"){var k=o({},r);k.type="preclick",this._fireDOMEvent(k,k.type,m)}var F=this._findEventTargets(r,c);if(m){for(var lt=[],Vt=0;Vt<m.length;Vt++)m[Vt].listens(c,!0)&&lt.push(m[Vt]);F=lt.concat(F)}if(F.length){c==="contextmenu"&&Ci(r);var de=F[0],_e={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Me=de.getLatLng&&(!de._radius||de._radius<=10);_e.containerPoint=Me?this.latLngToContainerPoint(de.getLatLng()):this.mouseEventToContainerPoint(r),_e.layerPoint=this.containerPointToLayerPoint(_e.containerPoint),_e.latlng=Me?de.getLatLng():this.layerPointToLatLng(_e.layerPoint)}for(Vt=0;Vt<F.length;Vt++)if(F[Vt].fire(c,_e,!0),_e.originalEvent._stopped||F[Vt].options.bubblingMouseEvents===!1&&St(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,c=this._handlers.length;r<c;r++)this._handlers[r].disable()},whenReady:function(r,c){return this._loaded?r.call(c||this,{target:this}):this.on("load",r,c),this},_getMapPanePos:function(){return Ms(this._mapPane)||new z(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,c){var m=r&&c!==void 0?this._getNewPixelOrigin(r,c):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,c){var m=this.getSize()._divideBy(2);return this.project(r,c)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,c,m){var k=this._getNewPixelOrigin(m,c);return this.project(r,c)._subtract(k)},_latLngBoundsToNewLayerBounds:function(r,c,m){var k=this._getNewPixelOrigin(m,c);return I([this.project(r.getSouthWest(),c)._subtract(k),this.project(r.getNorthWest(),c)._subtract(k),this.project(r.getSouthEast(),c)._subtract(k),this.project(r.getNorthEast(),c)._subtract(k)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,c,m){if(!m)return r;var k=this.project(r,c),F=this.getSize().divideBy(2),lt=new ht(k.subtract(F),k.add(F)),Vt=this._getBoundsOffset(lt,m,c);return Math.abs(Vt.x)<=1&&Math.abs(Vt.y)<=1?r:this.unproject(k.add(Vt),c)},_limitOffset:function(r,c){if(!c)return r;var m=this.getPixelBounds(),k=new ht(m.min.add(r),m.max.add(r));return r.add(this._getBoundsOffset(k,c))},_getBoundsOffset:function(r,c,m){var k=I(this.project(c.getNorthEast(),m),this.project(c.getSouthWest(),m)),F=k.min.subtract(r.min),lt=k.max.subtract(r.max),Vt=this._rebound(F.x,-lt.x),de=this._rebound(F.y,-lt.y);return new z(Vt,de)},_rebound:function(r,c){return r+c>0?Math.round(r-c)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(c))},_limitZoom:function(r){var c=this.getMinZoom(),m=this.getMaxZoom(),k=$e.any3d?this.options.zoomSnap:1;return k&&(r=Math.round(r/k)*k),Math.max(c,Math.min(m,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,c){var m=this._getCenterOffset(r)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,c),!0)},_createAnimProxy:function(){var r=this._proxy=Dn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(c){var m=Ss,k=this._proxy.style[m];As(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),k===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){rn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),c=this.getZoom();As(this._proxy,this.project(r,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,c,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var k=this.getZoomScale(c),F=this._getCenterOffset(r)._divideBy(1-1/k);return m.animate!==!0&&!this.getSize().contains(F)?!1:(J(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(r,c,!0)},this),!0)},_animateZoom:function(r,c,m,k){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=c,xn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:c,noUpdate:k}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Oa(r,c){return new Nn(r,c)}var hn=Bt.extend({options:{position:"topright"},initialize:function(r){N(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var c=this._map;return c&&c.removeControl(this),this.options.position=r,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var c=this._container=this.onAdd(r),m=this.getPosition(),k=r._controlCorners[m];return xn(c,"leaflet-control"),m.indexOf("bottom")!==-1?k.insertBefore(c,k.firstChild):k.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(rn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),mr=function(r){return new hn(r)};Nn.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},c="leaflet-",m=this._controlContainer=Dn("div",c+"control-container",this._container);function k(F,lt){var Vt=c+F+" "+c+lt;r[F+lt]=Dn("div",Vt,m)}k("top","left"),k("top","right"),k("bottom","left"),k("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)rn(this._controlCorners[r]);rn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var jo=hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,c,m,k){return m<k?-1:k<m?1:0}},initialize:function(r,c,m){N(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var k in r)this._addLayer(r[k],k);for(k in c)this._addLayer(c[k],k,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return hn.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,c){return this._addLayer(r,c),this._map?this._update():this},addOverlay:function(r,c){return this._addLayer(r,c,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var c=this._getLayer(p(r));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){xn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(xn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",c=this._container=Dn("div",r),m=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Ro(c),Da(c);var k=this._section=Dn("section",r+"-list");m&&(this._map.on("click",this.collapse,this),Pn(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var F=this._layersLink=Dn("a",r+"-toggle",c);F.href="#",F.title="Layers",F.setAttribute("role","button"),Pn(F,{keydown:function(lt){lt.keyCode===13&&this._expandSafely()},click:function(lt){Ci(lt),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Dn("div",r+"-base",k),this._separator=Dn("div",r+"-separator",k),this._overlaysList=Dn("div",r+"-overlays",k),c.appendChild(k)},_getLayer:function(r){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&p(this._layers[c].layer)===r)return this._layers[c]},_addLayer:function(r,c,m){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:c,overlay:m}),this.options.sortLayers&&this._layers.sort(l(function(k,F){return this.options.sortFunction(k.layer,F.layer,k.name,F.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ci(this._baseLayersList),ci(this._overlaysList),this._layerControlInputs=[];var r,c,m,k,F=0;for(m=0;m<this._layers.length;m++)k=this._layers[m],this._addItem(k),c=c||k.overlay,r=r||!k.overlay,F+=k.overlay?0:1;return this.options.hideSingleBase&&(r=r&&F>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=c&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var c=this._getLayer(p(r.target)),m=c.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;m&&this._map.fire(m,c)},_createRadioElement:function(r,c){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(c?' checked="checked"':"")+"/>",k=document.createElement("div");return k.innerHTML=m,k.firstChild},_addItem:function(r){var c=document.createElement("label"),m=this._map.hasLayer(r.layer),k;r.overlay?(k=document.createElement("input"),k.type="checkbox",k.className="leaflet-control-layers-selector",k.defaultChecked=m):k=this._createRadioElement("leaflet-base-layers_"+p(this),m),this._layerControlInputs.push(k),k.layerId=p(r.layer),Pn(k,"click",this._onInputClick,this);var F=document.createElement("span");F.innerHTML=" "+r.name;var lt=document.createElement("span");c.appendChild(lt),lt.appendChild(k),lt.appendChild(F);var Vt=r.overlay?this._overlaysList:this._baseLayersList;return Vt.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,c,m,k=[],F=[];this._handlingClick=!0;for(var lt=r.length-1;lt>=0;lt--)c=r[lt],m=this._getLayer(c.layerId).layer,c.checked?k.push(m):c.checked||F.push(m);for(lt=0;lt<F.length;lt++)this._map.hasLayer(F[lt])&&this._map.removeLayer(F[lt]);for(lt=0;lt<k.length;lt++)this._map.hasLayer(k[lt])||this._map.addLayer(k[lt]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,c,m,k=this._map.getZoom(),F=r.length-1;F>=0;F--)c=r[F],m=this._getLayer(c.layerId).layer,c.disabled=m.options.minZoom!==void 0&&k<m.options.minZoom||m.options.maxZoom!==void 0&&k>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,Pn(r,"click",Ci),this.expand();var c=this;setTimeout(function(){In(r,"click",Ci),c._preventClick=!1})}}),mo=function(r,c,m){return new jo(r,c,m)},Pr=hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var c="leaflet-control-zoom",m=Dn("div",c+" leaflet-bar"),k=this.options;return this._zoomInButton=this._createButton(k.zoomInText,k.zoomInTitle,c+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(k.zoomOutText,k.zoomOutTitle,c+"-out",m,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,c,m,k,F){var lt=Dn("a",m,k);return lt.innerHTML=r,lt.href="#",lt.title=c,lt.setAttribute("role","button"),lt.setAttribute("aria-label",c),Ro(lt),Pn(lt,"click",Fr),Pn(lt,"click",F,this),Pn(lt,"click",this._refocusOnMap,this),lt},_updateDisabled:function(){var r=this._map,c="leaflet-disabled";zn(this._zoomInButton,c),zn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(xn(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(xn(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Nn.mergeOptions({zoomControl:!0}),Nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Pr,this.addControl(this.zoomControl))});var Ra=function(r){return new Pr(r)},Bs=hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var c="leaflet-control-scale",m=Dn("div",c),k=this.options;return this._addScales(k,c+"-line",m),r.on(k.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),m},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,c,m){r.metric&&(this._mScale=Dn("div",c,m)),r.imperial&&(this._iScale=Dn("div",c,m))},_update:function(){var r=this._map,c=r.getSize().y/2,m=r.distance(r.containerPointToLatLng([0,c]),r.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(m)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var c=this._getRoundNum(r),m=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,m,c/r)},_updateImperial:function(r){var c=r*3.2808399,m,k,F;c>5280?(m=c/5280,k=this._getRoundNum(m),this._updateScale(this._iScale,k+" mi",k/m)):(F=this._getRoundNum(c),this._updateScale(this._iScale,F+" ft",F/c))},_updateScale:function(r,c,m){r.style.width=Math.round(this.options.maxWidth*m)+"px",r.innerHTML=c},_getRoundNum:function(r){var c=Math.pow(10,(Math.floor(r)+"").length-1),m=r/c;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,c*m}}),ca=function(r){return new Bs(r)},ha='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Wr=hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+($e.inlineSvg?ha+" ":"")+"Leaflet</a>"},initialize:function(r){N(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Dn("div","leaflet-control-attribution"),Ro(this._container);for(var c in r._layers)r._layers[c].getAttribution&&this.addAttribution(r._layers[c].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var c in this._attributions)this._attributions[c]&&r.push(c);var m=[];this.options.prefix&&m.push(this.options.prefix),r.length&&m.push(r.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Nn.mergeOptions({attributionControl:!0}),Nn.addInitHook(function(){this.options.attributionControl&&new Wr().addTo(this)});var fa=function(r){return new Wr(r)};hn.Layers=jo,hn.Zoom=Pr,hn.Scale=Bs,hn.Attribution=Wr,mr.layers=mo,mr.zoom=Ra,mr.scale=ca,mr.attribution=fa;var Ri=Bt.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ri.addTo=function(r,c){return r.addHandler(c,this),this};var ol={Events:H},zo=$e.touch?"touchstart mousedown":"mousedown",Zr=V.extend({options:{clickTolerance:3},initialize:function(r,c,m,k){N(this,k),this._element=r,this._dragStartTarget=c||r,this._preventOutline=m},enable:function(){this._enabled||(Pn(this._dragStartTarget,zo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Zr._dragging===this&&this.finishDrag(!0),In(this._dragStartTarget,zo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Vr(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Zr._dragging===this&&this.finishDrag();return}if(!(Zr._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Zr._dragging=this,this._preventOutline&&oa(this._element),Ba(),Oo(),!this._moving)){this.fire("down");var c=r.touches?r.touches[0]:r,m=rl(this._element);this._startPoint=new z(c.clientX,c.clientY),this._startPos=Ms(this._element),this._parentScale=aa(m);var k=r.type==="mousedown";Pn(document,k?"mousemove":"touchmove",this._onMove,this),Pn(document,k?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var c=r.touches&&r.touches.length===1?r.touches[0]:r,m=new z(c.clientX,c.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,Ci(r),this._moved||(this.fire("dragstart"),this._moved=!0,xn(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),bi(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){zn(document.body,"leaflet-dragging"),this._lastTarget&&(zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),In(document,"mousemove touchmove",this._onMove,this),In(document,"mouseup touchend touchcancel",this._onUp,this),cs(),Zs();var c=this._moved&&this._moving;this._moving=!1,Zr._dragging=!1,c&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function da(r,c,m){var k,F=[1,4,2,8],lt,Vt,de,_e,Me,We,un,Mn;for(lt=0,We=r.length;lt<We;lt++)r[lt]._code=be(r[lt],c);for(de=0;de<4;de++){for(un=F[de],k=[],lt=0,We=r.length,Vt=We-1;lt<We;Vt=lt++)_e=r[lt],Me=r[Vt],_e._code&un?Me._code&un||(Mn=ue(Me,_e,un,c,m),Mn._code=be(Mn,c),k.push(Mn)):(Me._code&un&&(Mn=ue(Me,_e,un,c,m),Mn._code=be(Mn,c),k.push(Mn)),k.push(_e));r=k}return r}function Ia(r,c){var m,k,F,lt,Vt,de,_e,Me,We;if(!r||r.length===0)throw new Error("latlngs not passed");Ye(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var un=D([0,0]),Mn=rt(r),Lr=Mn.getNorthWest().distanceTo(Mn.getSouthWest())*Mn.getNorthEast().distanceTo(Mn.getNorthWest());Lr<1700&&(un=Fa(r));var zi=r.length,Br=[];for(m=0;m<zi;m++){var xi=D(r[m]);Br.push(c.project(D([xi.lat-un.lat,xi.lng-un.lng])))}for(de=_e=Me=0,m=0,k=zi-1;m<zi;k=m++)F=Br[m],lt=Br[k],Vt=F.y*lt.x-lt.y*F.x,_e+=(F.x+lt.x)*Vt,Me+=(F.y+lt.y)*Vt,de+=Vt*3;de===0?We=Br[0]:We=[_e/de,Me/de];var Fs=c.unproject(ft(We));return D([Fs.lat+un.lat,Fs.lng+un.lng])}function Fa(r){for(var c=0,m=0,k=0,F=0;F<r.length;F++){var lt=D(r[F]);c+=lt.lat,m+=lt.lng,k++}return D([c/k,m/k])}var pa={__proto__:null,clipPolygon:da,polygonCenter:Ia,centroid:Fa};function vo(r,c){if(!c||!r.length)return r.slice();var m=c*c;return r=et(r,m),r=Pi(r,m),r}function Uo(r,c,m){return Math.sqrt(Ge(r,c,m,!0))}function yo(r,c,m){return Ge(r,c,m)}function Pi(r,c){var m=r.length,k=typeof Uint8Array<"u"?Uint8Array:Array,F=new k(m);F[0]=F[m-1]=1,C(r,F,c,0,m-1);var lt,Vt=[];for(lt=0;lt<m;lt++)F[lt]&&Vt.push(r[lt]);return Vt}function C(r,c,m,k,F){var lt=0,Vt,de,_e;for(de=k+1;de<=F-1;de++)_e=Ge(r[de],r[k],r[F],!0),_e>lt&&(Vt=de,lt=_e);lt>m&&(c[Vt]=1,C(r,c,m,k,Vt),C(r,c,m,Vt,F))}function et(r,c){for(var m=[r[0]],k=1,F=0,lt=r.length;k<lt;k++)De(r[k],r[F])>c&&(m.push(r[k]),F=k);return F<lt-1&&m.push(r[lt-1]),m}var It;function Wt(r,c,m,k,F){var lt=k?It:be(r,m),Vt=be(c,m),de,_e,Me;for(It=Vt;;){if(!(lt|Vt))return[r,c];if(lt&Vt)return!1;de=lt||Vt,_e=ue(r,c,de,m,F),Me=be(_e,m),de===lt?(r=_e,lt=Me):(c=_e,Vt=Me)}}function ue(r,c,m,k,F){var lt=c.x-r.x,Vt=c.y-r.y,de=k.min,_e=k.max,Me,We;return m&8?(Me=r.x+lt*(_e.y-r.y)/Vt,We=_e.y):m&4?(Me=r.x+lt*(de.y-r.y)/Vt,We=de.y):m&2?(Me=_e.x,We=r.y+Vt*(_e.x-r.x)/lt):m&1&&(Me=de.x,We=r.y+Vt*(de.x-r.x)/lt),new z(Me,We,F)}function be(r,c){var m=0;return r.x<c.min.x?m|=1:r.x>c.max.x&&(m|=2),r.y<c.min.y?m|=4:r.y>c.max.y&&(m|=8),m}function De(r,c){var m=c.x-r.x,k=c.y-r.y;return m*m+k*k}function Ge(r,c,m,k){var F=c.x,lt=c.y,Vt=m.x-F,de=m.y-lt,_e=Vt*Vt+de*de,Me;return _e>0&&(Me=((r.x-F)*Vt+(r.y-lt)*de)/_e,Me>1?(F=m.x,lt=m.y):Me>0&&(F+=Vt*Me,lt+=de*Me)),Vt=r.x-F,de=r.y-lt,k?Vt*Vt+de*de:new z(F,lt)}function Ye(r){return!X(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function ln(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ye(r)}function bn(r,c){var m,k,F,lt,Vt,de,_e,Me;if(!r||r.length===0)throw new Error("latlngs not passed");Ye(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var We=D([0,0]),un=rt(r),Mn=un.getNorthWest().distanceTo(un.getSouthWest())*un.getNorthEast().distanceTo(un.getNorthWest());Mn<1700&&(We=Fa(r));var Lr=r.length,zi=[];for(m=0;m<Lr;m++){var Br=D(r[m]);zi.push(c.project(D([Br.lat-We.lat,Br.lng-We.lng])))}for(m=0,k=0;m<Lr-1;m++)k+=zi[m].distanceTo(zi[m+1])/2;if(k===0)Me=zi[0];else for(m=0,lt=0;m<Lr-1;m++)if(Vt=zi[m],de=zi[m+1],F=Vt.distanceTo(de),lt+=F,lt>k){_e=(lt-k)/F,Me=[de.x-_e*(de.x-Vt.x),de.y-_e*(de.y-Vt.y)];break}var xi=c.unproject(ft(Me));return D([xi.lat+We.lat,xi.lng+We.lng])}var On={__proto__:null,simplify:vo,pointToSegmentDistance:Uo,closestPointOnSegment:yo,clipSegment:Wt,_getEdgeIntersection:ue,_getBitCode:be,_sqClosestPointOnSegment:Ge,isFlat:Ye,_flat:ln,polylineCenter:bn},hi={project:function(r){return new z(r.lng,r.lat)},unproject:function(r){return new $(r.y,r.x)},bounds:new ht([-180,-90],[180,90])},Un={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ht([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var c=Math.PI/180,m=this.R,k=r.lat*c,F=this.R_MINOR/m,lt=Math.sqrt(1-F*F),Vt=lt*Math.sin(k),de=Math.tan(Math.PI/4-k/2)/Math.pow((1-Vt)/(1+Vt),lt/2);return k=-m*Math.log(Math.max(de,1e-10)),new z(r.lng*c*m,k)},unproject:function(r){for(var c=180/Math.PI,m=this.R,k=this.R_MINOR/m,F=Math.sqrt(1-k*k),lt=Math.exp(-r.y/m),Vt=Math.PI/2-2*Math.atan(lt),de=0,_e=.1,Me;de<15&&Math.abs(_e)>1e-7;de++)Me=F*Math.sin(Vt),Me=Math.pow((1-Me)/(1+Me),F/2),_e=Math.PI/2-2*Math.atan(lt*Me)-Vt,Vt+=_e;return new $(Vt*c,r.x*c/m)}},Zn={__proto__:null,LonLat:hi,Mercator:Un,SphericalMercator:At},Ii=o({},dt,{code:"EPSG:3395",projection:Un,transformation:function(){var r=.5/(Math.PI*Un.R);return G(r,.5,-r,.5)}()}),Mi=o({},dt,{code:"EPSG:4326",projection:hi,transformation:G(1/180,1,-1/180,.5)}),jr=o({},q,{projection:hi,transformation:G(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,c){var m=c.lng-r.lng,k=c.lat-r.lat;return Math.sqrt(m*m+k*k)},infinite:!0});q.Earth=dt,q.EPSG3395=Ii,q.EPSG3857=tt,q.EPSG900913=yt,q.EPSG4326=Mi,q.Simple=jr;var ei=V.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[p(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[p(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var c=r.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var m=this.getEvents();c.on(m,this),this.once("remove",function(){c.off(m,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Nn.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var c=p(r);return this._layers[c]?this:(this._layers[c]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var c=p(r);return this._layers[c]?(this._loaded&&r.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return p(r)in this._layers},eachLayer:function(r,c){for(var m in this._layers)r.call(c,this._layers[m]);return this},_addLayers:function(r){r=r?X(r)?r:[r]:[];for(var c=0,m=r.length;c<m;c++)this.addLayer(r[c])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[p(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var c=p(r);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,c=-1/0,m=this._getZoomSpan();for(var k in this._zoomBoundLayers){var F=this._zoomBoundLayers[k].options;r=F.minZoom===void 0?r:Math.min(r,F.minZoom),c=F.maxZoom===void 0?c:Math.max(c,F.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=r===1/0?void 0:r,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vr=ei.extend({initialize:function(r,c){N(this,c),this._layers={};var m,k;if(r)for(m=0,k=r.length;m<k;m++)this.addLayer(r[m])},addLayer:function(r){var c=this.getLayerId(r);return this._layers[c]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var c=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(r){var c=typeof r=="number"?r:this.getLayerId(r);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var c=Array.prototype.slice.call(arguments,1),m,k;for(m in this._layers)k=this._layers[m],k[r]&&k[r].apply(k,c);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,c){for(var m in this._layers)r.call(c,this._layers[m]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return p(r)}}),al=function(r,c){return new vr(r,c)},yr=vr.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),vr.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),vr.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new it;for(var c in this._layers){var m=this._layers[c];r.extend(m.getBounds?m.getBounds():m.getLatLng())}return r}}),ja=function(r,c){return new yr(r,c)},hs=Bt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){N(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,c){var m=this._getIconUrl(r);if(!m){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var k=this._createImg(m,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(k,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(k.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),k},_setIconStyles:function(r,c){var m=this.options,k=m[c+"Size"];typeof k=="number"&&(k=[k,k]);var F=ft(k),lt=ft(c==="shadow"&&m.shadowAnchor||m.iconAnchor||F&&F.divideBy(2,!0));r.className="leaflet-marker-"+c+" "+(m.className||""),lt&&(r.style.marginLeft=-lt.x+"px",r.style.marginTop=-lt.y+"px"),F&&(r.style.width=F.x+"px",r.style.height=F.y+"px")},_createImg:function(r,c){return c=c||document.createElement("img"),c.src=r,c},_getIconUrl:function(r){return $e.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function za(r){return new hs(r)}var Xs=hs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Xs.imagePath!="string"&&(Xs.imagePath=this._detectIconPath()),(this.options.imagePath||Xs.imagePath)+hs.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var c=function(m,k,F){var lt=k.exec(m);return lt&&lt[F]};return r=c(r,/^url\((['"])?(.+)\1\)$/,2),r&&c(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Dn("div","leaflet-default-icon-path",document.body),c=or(r,"background-image")||or(r,"backgroundImage");if(document.body.removeChild(r),c=this._stripUrl(c),c)return c;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Qs=Ri.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Zr(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xn(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var c=this._marker,m=c._map,k=this._marker.options.autoPanSpeed,F=this._marker.options.autoPanPadding,lt=Ms(c._icon),Vt=m.getPixelBounds(),de=m.getPixelOrigin(),_e=I(Vt.min._subtract(de).add(F),Vt.max._subtract(de).subtract(F));if(!_e.contains(lt)){var Me=ft((Math.max(_e.max.x,lt.x)-_e.max.x)/(Vt.max.x-_e.max.x)-(Math.min(_e.min.x,lt.x)-_e.min.x)/(Vt.min.x-_e.min.x),(Math.max(_e.max.y,lt.y)-_e.max.y)/(Vt.max.y-_e.max.y)-(Math.min(_e.min.y,lt.y)-_e.min.y)/(Vt.min.y-_e.min.y)).multiplyBy(k);m.panBy(Me,{animate:!1}),this._draggable._newPos._add(Me),this._draggable._startPos._add(Me),bi(c._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=J(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(Z(this._panRequest),this._panRequest=J(this._adjustPan.bind(this,r)))},_onDrag:function(r){var c=this._marker,m=c._shadow,k=Ms(c._icon),F=c._map.layerPointToLatLng(k);m&&bi(m,k),c._latlng=F,r.latlng=F,r.oldLatLng=this._oldLatLng,c.fire("move",r).fire("drag",r)},_onDragEnd:function(r){Z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Bi=ei.extend({options:{icon:new Xs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,c){N(this,c),this._latlng=D(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var c=this._latlng;return this._latlng=D(r),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=r.icon.createIcon(this._icon),k=!1;m!==this._icon&&(this._icon&&this._removeIcon(),k=!0,r.title&&(m.title=r.title),m.tagName==="IMG"&&(m.alt=r.alt||"")),xn(m,c),r.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pn(m,"focus",this._panOnFocus,this);var F=r.icon.createShadow(this._shadow),lt=!1;F!==this._shadow&&(this._removeShadow(),lt=!0),F&&(xn(F,c),F.alt=""),this._shadow=F,r.opacity<1&&this._updateOpacity(),k&&this.getPane().appendChild(this._icon),this._initInteraction(),F&&lt&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&In(this._icon,"focus",this._panOnFocus,this),rn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&rn(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&bi(this._icon,r),this._shadow&&bi(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(xn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Qs)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Qs(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&ar(this._icon,r),this._shadow&&ar(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var c=this.options.icon.options,m=c.iconSize?ft(c.iconSize):ft(0,0),k=c.iconAnchor?ft(c.iconAnchor):ft(0,0);r.panInside(this._latlng,{paddingTopLeft:k,paddingBottomRight:m.subtract(k)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ga(r,c){return new Bi(r,c)}var kr=ei.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return N(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_r=kr.extend({options:{fill:!0,radius:10},initialize:function(r,c){N(this,c),this._latlng=D(r),this._radius=this.options.radius},setLatLng:function(r){var c=this._latlng;return this._latlng=D(r),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var c=r&&r.radius||this._radius;return kr.prototype.setStyle.call(this,r),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,c=this._radiusY||r,m=this._clickTolerance(),k=[r+m,c+m];this._pxBounds=new ht(this._point.subtract(k),this._point.add(k))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ma(r,c){return new _r(r,c)}var lr=_r.extend({initialize:function(r,c,m){if(typeof c=="number"&&(c=o({},m,{radius:c})),N(this,c),this._latlng=D(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new it(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:kr.prototype.setStyle,_project:function(){var r=this._latlng.lng,c=this._latlng.lat,m=this._map,k=m.options.crs;if(k.distance===dt.distance){var F=Math.PI/180,lt=this._mRadius/dt.R/F,Vt=m.project([c+lt,r]),de=m.project([c-lt,r]),_e=Vt.add(de).divideBy(2),Me=m.unproject(_e).lat,We=Math.acos((Math.cos(lt*F)-Math.sin(c*F)*Math.sin(Me*F))/(Math.cos(c*F)*Math.cos(Me*F)))/F;(isNaN(We)||We===0)&&(We=lt/Math.cos(Math.PI/180*c)),this._point=_e.subtract(m.getPixelOrigin()),this._radius=isNaN(We)?0:_e.x-m.project([Me,r-We]).x,this._radiusY=_e.y-Vt.y}else{var un=k.unproject(k.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(un).x}this._updateBounds()}});function to(r,c,m){return new lr(r,c,m)}var zr=kr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,c){N(this,c),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var c=1/0,m=null,k=Ge,F,lt,Vt=0,de=this._parts.length;Vt<de;Vt++)for(var _e=this._parts[Vt],Me=1,We=_e.length;Me<We;Me++){F=_e[Me-1],lt=_e[Me];var un=k(r,F,lt,!0);un<c&&(c=un,m=k(r,F,lt))}return m&&(m.distance=Math.sqrt(c)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,c){return c=c||this._defaultShape(),r=D(r),c.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new it,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Ye(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var c=[],m=Ye(r),k=0,F=r.length;k<F;k++)m?(c[k]=D(r[k]),this._bounds.extend(c[k])):c[k]=this._convertLatLngs(r[k]);return c},_project:function(){var r=new ht;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),c=new z(r,r);this._rawPxBounds&&(this._pxBounds=new ht([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(r,c,m){var k=r[0]instanceof $,F=r.length,lt,Vt;if(k){for(Vt=[],lt=0;lt<F;lt++)Vt[lt]=this._map.latLngToLayerPoint(r[lt]),m.extend(Vt[lt]);c.push(Vt)}else for(lt=0;lt<F;lt++)this._projectLatlngs(r[lt],c,m)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,m,k,F,lt,Vt,de,_e;for(m=0,F=0,lt=this._rings.length;m<lt;m++)for(_e=this._rings[m],k=0,Vt=_e.length;k<Vt-1;k++)de=Wt(_e[k],_e[k+1],r,k,!0),de&&(c[F]=c[F]||[],c[F].push(de[0]),(de[1]!==_e[k+1]||k===Vt-2)&&(c[F].push(de[1]),F++))}},_simplifyPoints:function(){for(var r=this._parts,c=this.options.smoothFactor,m=0,k=r.length;m<k;m++)r[m]=vo(r[m],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,c){var m,k,F,lt,Vt,de,_e=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(m=0,lt=this._parts.length;m<lt;m++)for(de=this._parts[m],k=0,Vt=de.length,F=Vt-1;k<Vt;F=k++)if(!(!c&&k===0)&&Uo(r,de[F],de[k])<=_e)return!0;return!1}});function ll(r,c){return new zr(r,c)}zr._flat=ln;var Fi=zr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ia(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var c=zr.prototype._convertLatLngs.call(this,r),m=c.length;return m>=2&&c[0]instanceof $&&c[0].equals(c[m-1])&&c.pop(),c},_setLatLngs:function(r){zr.prototype._setLatLngs.call(this,r),Ye(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ye(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,c=this.options.weight,m=new z(c,c);if(r=new ht(r.min.subtract(m),r.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var k=0,F=this._rings.length,lt;k<F;k++)lt=da(this._rings[k],r,!0),lt.length&&this._parts.push(lt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var c=!1,m,k,F,lt,Vt,de,_e,Me;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(lt=0,_e=this._parts.length;lt<_e;lt++)for(m=this._parts[lt],Vt=0,Me=m.length,de=Me-1;Vt<Me;de=Vt++)k=m[Vt],F=m[de],k.y>r.y!=F.y>r.y&&r.x<(F.x-k.x)*(r.y-k.y)/(F.y-k.y)+k.x&&(c=!c);return c||zr.prototype._containsPoint.call(this,r,!0)}});function Ts(r,c){return new Fi(r,c)}var Kr=yr.extend({initialize:function(r,c){N(this,c),this._layers={},r&&this.addData(r)},addData:function(r){var c=X(r)?r:r.features,m,k,F;if(c){for(m=0,k=c.length;m<k;m++)F=c[m],(F.geometries||F.geometry||F.features||F.coordinates)&&this.addData(F);return this}var lt=this.options;if(lt.filter&&!lt.filter(r))return this;var Vt=qo(r,lt);return Vt?(Vt.feature=Yr(r),Vt.defaultOptions=Vt.options,this.resetStyle(Vt),lt.onEachFeature&&lt.onEachFeature(r,Vt),this.addLayer(Vt)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=o({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(c){this._setLayerStyle(c,r)},this)},_setLayerStyle:function(r,c){r.setStyle&&(typeof c=="function"&&(c=c(r.feature)),r.setStyle(c))}});function qo(r,c){var m=r.type==="Feature"?r.geometry:r,k=m?m.coordinates:null,F=[],lt=c&&c.pointToLayer,Vt=c&&c.coordsToLatLng||Ds,de,_e,Me,We;if(!k&&!m)return null;switch(m.type){case"Point":return de=Vt(k),eo(lt,r,de,c);case"MultiPoint":for(Me=0,We=k.length;Me<We;Me++)de=Vt(k[Me]),F.push(eo(lt,r,de,c));return new yr(F);case"LineString":case"MultiLineString":return _e=Yi(k,m.type==="LineString"?0:1,Vt),new zr(_e,c);case"Polygon":case"MultiPolygon":return _e=Yi(k,m.type==="Polygon"?1:2,Vt),new Fi(_e,c);case"GeometryCollection":for(Me=0,We=m.geometries.length;Me<We;Me++){var un=qo({geometry:m.geometries[Me],type:"Feature",properties:r.properties},c);un&&F.push(un)}return new yr(F);case"FeatureCollection":for(Me=0,We=m.features.length;Me<We;Me++){var Mn=qo(m.features[Me],c);Mn&&F.push(Mn)}return new yr(F);default:throw new Error("Invalid GeoJSON object.")}}function eo(r,c,m,k){return r?r(c,m):new Bi(m,k&&k.markersInheritOptions&&k)}function Ds(r){return new $(r[1],r[0],r[2])}function Yi(r,c,m){for(var k=[],F=0,lt=r.length,Vt;F<lt;F++)Vt=c?Yi(r[F],c-1,m):(m||Ds)(r[F]),k.push(Vt);return k}function qi(r,c){return r=D(r),r.alt!==void 0?[S(r.lng,c),S(r.lat,c),S(r.alt,c)]:[S(r.lng,c),S(r.lat,c)]}function fs(r,c,m,k){for(var F=[],lt=0,Vt=r.length;lt<Vt;lt++)F.push(c?fs(r[lt],Ye(r[lt])?0:c-1,m,k):qi(r[lt],k));return!c&&m&&F.length>0&&F.push(F[0].slice()),F}function Sr(r,c){return r.feature?o({},r.feature,{geometry:c}):Yr(c)}function Yr(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var no={toGeoJSON:function(r){return Sr(this,{type:"Point",coordinates:qi(this.getLatLng(),r)})}};Bi.include(no),lr.include(no),_r.include(no),zr.include({toGeoJSON:function(r){var c=!Ye(this._latlngs),m=fs(this._latlngs,c?1:0,!1,r);return Sr(this,{type:(c?"Multi":"")+"LineString",coordinates:m})}}),Fi.include({toGeoJSON:function(r){var c=!Ye(this._latlngs),m=c&&!Ye(this._latlngs[0]),k=fs(this._latlngs,m?2:c?1:0,!0,r);return c||(k=[k]),Sr(this,{type:(m?"Multi":"")+"Polygon",coordinates:k})}}),vr.include({toMultiPoint:function(r){var c=[];return this.eachLayer(function(m){c.push(m.toGeoJSON(r).geometry.coordinates)}),Sr(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(r){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(r);var m=c==="GeometryCollection",k=[];return this.eachLayer(function(F){if(F.toGeoJSON){var lt=F.toGeoJSON(r);if(m)k.push(lt.geometry);else{var Vt=Yr(lt);Vt.type==="FeatureCollection"?k.push.apply(k,Vt.features):k.push(Vt)}}}),m?Sr(this,{geometries:k,type:"GeometryCollection"}):{type:"FeatureCollection",features:k}}});function Jr(r,c){return new Kr(r,c)}var wi=Jr,Ns=ei.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,c,m){this._url=r,this._bounds=rt(c),N(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){rn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&_i(this._image),this},bringToBack:function(){return this._map&&$n(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=rt(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",c=this._image=r?this._url:Dn("img");if(xn(c,"leaflet-image-layer"),this._zoomAnimated&&xn(c,"leaflet-zoom-animated"),this.options.className&&xn(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onload=l(this.fire,this,"load"),c.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(r){var c=this._map.getZoomScale(r.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;As(this._image,m,c)},_reset:function(){var r=this._image,c=new ht(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=c.getSize();bi(r,c.min),r.style.width=m.x+"px",r.style.height=m.y+"px"},_updateOpacity:function(){ar(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),br=function(r,c,m){return new Ns(r,c,m)},ur=Ns.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",c=this._image=r?this._url:Dn("video");if(xn(c,"leaflet-image-layer"),this._zoomAnimated&&xn(c,"leaflet-zoom-animated"),this.options.className&&xn(c,this.options.className),c.onselectstart=w,c.onmousemove=w,c.onloadeddata=l(this.fire,this,"load"),r){for(var m=c.getElementsByTagName("source"),k=[],F=0;F<m.length;F++)k.push(m[F].src);this._url=m.length>0?k:[c.src];return}X(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var lt=0;lt<this._url.length;lt++){var Vt=Dn("source");Vt.src=this._url[lt],c.appendChild(Vt)}}});function $o(r,c,m){return new ur(r,c,m)}var Ua=Ns.extend({_initImage:function(){var r=this._image=this._url;xn(r,"leaflet-image-layer"),this._zoomAnimated&&xn(r,"leaflet-zoom-animated"),this.options.className&&xn(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function qa(r,c,m){return new Ua(r,c,m)}var cr=ei.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,c){r&&(r instanceof $||X(r))?(this._latlng=D(r),N(this,c)):(N(this,r),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&ar(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&ar(this._container,1),this.bringToFront(),this.options.interactive&&(xn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(ar(this._container,0),this._removeTimeout=setTimeout(l(rn,void 0,this._container),200)):rn(this._container),this.options.interactive&&(zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=D(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_i(this._container),this},bringToBack:function(){return this._map&&$n(this._container),this},_prepareOpen:function(r){var c=this._source;if(!c._map)return!1;if(c instanceof yr){c=null;var m=this._source._layers;for(var k in m)if(m[k]._map){c=m[k];break}if(!c)return!1;this._source=c}if(!r)if(c.getCenter)r=c.getCenter();else if(c.getLatLng)r=c.getLatLng();else if(c.getBounds)r=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")r.innerHTML=c;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),c=ft(this.options.offset),m=this._getAnchor();this._zoomAnimated?bi(this._container,r.add(m)):c=c.add(r).add(m);var k=this._containerBottom=-c.y,F=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=k+"px",this._container.style.left=F+"px"}},_getAnchor:function(){return[0,0]}});Nn.include({_initOverlay:function(r,c,m,k){var F=c;return F instanceof r||(F=new r(k).setContent(c)),m&&F.setLatLng(m),F}}),ei.include({_initOverlay:function(r,c,m,k){var F=m;return F instanceof r?(N(F,k),F._source=this):(F=c&&!k?c:new r(k,this),F.setContent(m)),F}});var Er=cr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,cr.prototype.openOn.call(this,r)},onAdd:function(r){cr.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof kr||this._source.on("preclick",Ys))},onRemove:function(r){cr.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof kr||this._source.off("preclick",Ys))},getEvents:function(){var r=cr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",c=this._container=Dn("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Dn("div",r+"-content-wrapper",c);if(this._contentNode=Dn("div",r+"-content",m),Ro(c),Da(this._contentNode),Pn(c,"contextmenu",Ys),this._tipContainer=Dn("div",r+"-tip-container",c),this._tip=Dn("div",r+"-tip",this._tipContainer),this.options.closeButton){var k=this._closeButton=Dn("a",r+"-close-button",c);k.setAttribute("role","button"),k.setAttribute("aria-label","Close popup"),k.href="#close",k.innerHTML='<span aria-hidden="true">&#215;</span>',Pn(k,"click",function(F){Ci(F),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,c=r.style;c.width="",c.whiteSpace="nowrap";var m=r.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),c.width=m+1+"px",c.whiteSpace="",c.height="";var k=r.offsetHeight,F=this.options.maxHeight,lt="leaflet-popup-scrolled";F&&k>F?(c.height=F+"px",xn(r,lt)):zn(r,lt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),m=this._getAnchor();bi(this._container,c.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,c=parseInt(or(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+c,k=this._containerWidth,F=new z(this._containerLeft,-m-this._containerBottom);F._add(Ms(this._container));var lt=r.layerPointToContainerPoint(F),Vt=ft(this.options.autoPanPadding),de=ft(this.options.autoPanPaddingTopLeft||Vt),_e=ft(this.options.autoPanPaddingBottomRight||Vt),Me=r.getSize(),We=0,un=0;lt.x+k+_e.x>Me.x&&(We=lt.x+k-Me.x+_e.x),lt.x-We-de.x<0&&(We=lt.x-de.x),lt.y+m+_e.y>Me.y&&(un=lt.y+m-Me.y+_e.y),lt.y-un-de.y<0&&(un=lt.y-de.y),(We||un)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([We,un]))}},_getAnchor:function(){return ft(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_o=function(r,c){return new Er(r,c)};Nn.mergeOptions({closePopupOnClick:!0}),Nn.include({openPopup:function(r,c,m){return this._initOverlay(Er,r,c,m).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),ei.include({bindPopup:function(r,c){return this._popup=this._initOverlay(Er,this._popup,r,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof yr||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Fr(r);var c=r.layer||r.target;if(this._popup._source===c&&!(c instanceof kr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=c,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Os=cr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){cr.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){cr.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=cr.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",c=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Dn("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var c,m,k=this._map,F=this._container,lt=k.latLngToContainerPoint(k.getCenter()),Vt=k.layerPointToContainerPoint(r),de=this.options.direction,_e=F.offsetWidth,Me=F.offsetHeight,We=ft(this.options.offset),un=this._getAnchor();de==="top"?(c=_e/2,m=Me):de==="bottom"?(c=_e/2,m=0):de==="center"?(c=_e/2,m=Me/2):de==="right"?(c=0,m=Me/2):de==="left"?(c=_e,m=Me/2):Vt.x<lt.x?(de="right",c=0,m=Me/2):(de="left",c=_e+(We.x+un.x)*2,m=Me/2),r=r.subtract(ft(c,m,!0)).add(We).add(un),zn(F,"leaflet-tooltip-right"),zn(F,"leaflet-tooltip-left"),zn(F,"leaflet-tooltip-top"),zn(F,"leaflet-tooltip-bottom"),xn(F,"leaflet-tooltip-"+de),bi(F,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&ar(this._container,r)},_animateZoom:function(r){var c=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(c)},_getAnchor:function(){return ft(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),va=function(r,c){return new Os(r,c)};Nn.include({openTooltip:function(r,c,m){return this._initOverlay(Os,r,c,m).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),ei.include({bindTooltip:function(r,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Os,this._tooltip,r,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var c=r?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[c](m),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof yr||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var c=typeof r.getElement=="function"&&r.getElement();c&&(Pn(c,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),Pn(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var c=typeof r.getElement=="function"&&r.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var c=r.latlng,m,k;this._tooltip.options.sticky&&r.originalEvent&&(m=this._map.mouseEventToContainerPoint(r.originalEvent),k=this._map.containerPointToLayerPoint(m),c=this._map.layerPointToLatLng(k)),this._tooltip.setLatLng(c)}});var bo=hs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var c=r&&r.tagName==="DIV"?r:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ci(c),c.appendChild(m.html)):c.innerHTML=m.html!==!1?m.html:"",m.bgPos){var k=ft(m.bgPos);c.style.backgroundPosition=-k.x+"px "+-k.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function wo(r){return new bo(r)}hs.Default=Xs;var io=ei.extend({options:{tileSize:256,opacity:1,updateWhenIdle:$e.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){N(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),rn(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_i(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($n(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof z?r:new z(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var c=this.getPane().children,m=-r(-1/0,1/0),k=0,F=c.length,lt;k<F;k++)lt=c[k].style.zIndex,c[k]!==this._container&&lt&&(m=r(m,+lt));isFinite(m)&&(this.options.zIndex=m+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!$e.ielt9){ar(this._container,this.options.opacity);var r=+new Date,c=!1,m=!1;for(var k in this._tiles){var F=this._tiles[k];if(!(!F.current||!F.loaded)){var lt=Math.min(1,(r-F.loaded)/200);ar(F.el,lt),lt<1?c=!0:(F.active?m=!0:this._onOpaqueTile(F),F.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),c&&(Z(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Dn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,c=this.options.maxZoom;if(r!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===r?(this._levels[m].el.style.zIndex=c-Math.abs(r-m),this._onUpdateLevel(m)):(rn(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var k=this._levels[r],F=this._map;return k||(k=this._levels[r]={},k.el=Dn("div","leaflet-tile-container leaflet-zoom-animated",this._container),k.el.style.zIndex=c,k.origin=F.project(F.unproject(F.getPixelOrigin()),r).round(),k.zoom=r,this._setZoomTransform(k,F.getCenter(),F.getZoom()),w(k.el.offsetWidth),this._onCreateLevel(k)),this._level=k,k}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,c,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)c=this._tiles[r],c.retain=c.current;for(r in this._tiles)if(c=this._tiles[r],c.current&&!c.active){var k=c.coords;this._retainParent(k.x,k.y,k.z,k.z-5)||this._retainChildren(k.x,k.y,k.z,k.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var c in this._tiles)this._tiles[c].coords.z===r&&this._removeTile(c)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)rn(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,c,m,k){var F=Math.floor(r/2),lt=Math.floor(c/2),Vt=m-1,de=new z(+F,+lt);de.z=+Vt;var _e=this._tileCoordsToKey(de),Me=this._tiles[_e];return Me&&Me.active?(Me.retain=!0,!0):(Me&&Me.loaded&&(Me.retain=!0),Vt>k?this._retainParent(F,lt,Vt,k):!1)},_retainChildren:function(r,c,m,k){for(var F=2*r;F<2*r+2;F++)for(var lt=2*c;lt<2*c+2;lt++){var Vt=new z(F,lt);Vt.z=m+1;var de=this._tileCoordsToKey(Vt),_e=this._tiles[de];if(_e&&_e.active){_e.retain=!0;continue}else _e&&_e.loaded&&(_e.retain=!0);m+1<k&&this._retainChildren(F,lt,m+1,k)}},_resetView:function(r){var c=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var c=this.options;return c.minNativeZoom!==void 0&&r<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<r?c.maxNativeZoom:r},_setView:function(r,c,m,k){var F=Math.round(c);this.options.maxZoom!==void 0&&F>this.options.maxZoom||this.options.minZoom!==void 0&&F<this.options.minZoom?F=void 0:F=this._clampZoom(F);var lt=this.options.updateWhenZooming&&F!==this._tileZoom;(!k||lt)&&(this._tileZoom=F,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),F!==void 0&&this._update(r),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(r,c)},_setZoomTransforms:function(r,c){for(var m in this._levels)this._setZoomTransform(this._levels[m],r,c)},_setZoomTransform:function(r,c,m){var k=this._map.getZoomScale(m,r.zoom),F=r.origin.multiplyBy(k).subtract(this._map._getNewPixelOrigin(c,m)).round();$e.any3d?As(r.el,F,k):bi(r.el,F)},_resetGrid:function(){var r=this._map,c=r.options.crs,m=this._tileSize=this.getTileSize(),k=this._tileZoom,F=this._map.getPixelWorldBounds(this._tileZoom);F&&(this._globalTileRange=this._pxBoundsToTileRange(F)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,c.wrapLng[0]],k).x/m.x),Math.ceil(r.project([0,c.wrapLng[1]],k).x/m.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([c.wrapLat[0],0],k).y/m.x),Math.ceil(r.project([c.wrapLat[1],0],k).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var c=this._map,m=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),k=c.getZoomScale(m,this._tileZoom),F=c.project(r,this._tileZoom).floor(),lt=c.getSize().divideBy(k*2);return new ht(F.subtract(lt),F.add(lt))},_update:function(r){var c=this._map;if(c){var m=this._clampZoom(c.getZoom());if(r===void 0&&(r=c.getCenter()),this._tileZoom!==void 0){var k=this._getTiledPixelBounds(r),F=this._pxBoundsToTileRange(k),lt=F.getCenter(),Vt=[],de=this.options.keepBuffer,_e=new ht(F.getBottomLeft().subtract([de,-de]),F.getTopRight().add([de,-de]));if(!(isFinite(F.min.x)&&isFinite(F.min.y)&&isFinite(F.max.x)&&isFinite(F.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Me in this._tiles){var We=this._tiles[Me].coords;(We.z!==this._tileZoom||!_e.contains(new z(We.x,We.y)))&&(this._tiles[Me].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(r,m);return}for(var un=F.min.y;un<=F.max.y;un++)for(var Mn=F.min.x;Mn<=F.max.x;Mn++){var Lr=new z(Mn,un);if(Lr.z=this._tileZoom,!!this._isValidTile(Lr)){var zi=this._tiles[this._tileCoordsToKey(Lr)];zi?zi.current=!0:Vt.push(Lr)}}if(Vt.sort(function(xi,Fs){return xi.distanceTo(lt)-Fs.distanceTo(lt)}),Vt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Br=document.createDocumentFragment();for(Mn=0;Mn<Vt.length;Mn++)this._addTile(Vt[Mn],Br);this._level.el.appendChild(Br)}}}},_isValidTile:function(r){var c=this._map.options.crs;if(!c.infinite){var m=this._globalTileRange;if(!c.wrapLng&&(r.x<m.min.x||r.x>m.max.x)||!c.wrapLat&&(r.y<m.min.y||r.y>m.max.y))return!1}if(!this.options.bounds)return!0;var k=this._tileCoordsToBounds(r);return rt(this.options.bounds).overlaps(k)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var c=this._map,m=this.getTileSize(),k=r.scaleBy(m),F=k.add(m),lt=c.unproject(k,r.z),Vt=c.unproject(F,r.z);return[lt,Vt]},_tileCoordsToBounds:function(r){var c=this._tileCoordsToNwSe(r),m=new it(c[0],c[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var c=r.split(":"),m=new z(+c[0],+c[1]);return m.z=+c[2],m},_removeTile:function(r){var c=this._tiles[r];c&&(rn(c.el),delete this._tiles[r],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){xn(r,"leaflet-tile");var c=this.getTileSize();r.style.width=c.x+"px",r.style.height=c.y+"px",r.onselectstart=w,r.onmousemove=w,$e.ielt9&&this.options.opacity<1&&ar(r,this.options.opacity)},_addTile:function(r,c){var m=this._getTilePos(r),k=this._tileCoordsToKey(r),F=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(F),this.createTile.length<2&&J(l(this._tileReady,this,r,null,F)),bi(F,m),this._tiles[k]={el:F,coords:r,current:!0},c.appendChild(F),this.fire("tileloadstart",{tile:F,coords:r})},_tileReady:function(r,c,m){c&&this.fire("tileerror",{error:c,tile:m,coords:r});var k=this._tileCoordsToKey(r);m=this._tiles[k],m&&(m.loaded=+new Date,this._map._fadeAnimated?(ar(m.el,0),Z(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),c||(xn(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),$e.ielt9||!this._map._fadeAnimated?J(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var c=new z(this._wrapX?b(r.x,this._wrapX):r.x,this._wrapY?b(r.y,this._wrapY):r.y);return c.z=r.z,c},_pxBoundsToTileRange:function(r){var c=this.getTileSize();return new ht(r.min.unscaleBy(c).floor(),r.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function Xr(r){return new io(r)}var Ji=io.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,c){this._url=r,c=N(this,c),c.detectRetina&&$e.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,c){return this._url===r&&c===void 0&&(c=!0),this._url=r,c||this.redraw(),this},createTile:function(r,c){var m=document.createElement("img");return Pn(m,"load",l(this._tileOnLoad,this,c,m)),Pn(m,"error",l(this._tileOnError,this,c,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(r),m},getTileUrl:function(r){var c={r:$e.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-r.y;this.options.tms&&(c.y=m),c["-y"]=m}return W(this._url,o(c,this.options))},_tileOnLoad:function(r,c){$e.ielt9?setTimeout(l(r,this,null,c),0):r(null,c)},_tileOnError:function(r,c,m){var k=this.options.errorTileUrl;k&&c.getAttribute("src")!==k&&(c.src=k),r(m,c)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,c=this.options.maxZoom,m=this.options.zoomReverse,k=this.options.zoomOffset;return m&&(r=c-r),r+k},_getSubdomain:function(r){var c=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var r,c;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(c=this._tiles[r].el,c.onload=w,c.onerror=w,!c.complete)){c.src=Mt;var m=this._tiles[r].coords;rn(c),delete this._tiles[r],this.fire("tileabort",{tile:c,coords:m})}},_removeTile:function(r){var c=this._tiles[r];if(c)return c.el.setAttribute("src",Mt),io.prototype._removeTile.call(this,r)},_tileReady:function(r,c,m){if(!(!this._map||m&&m.getAttribute("src")===Mt))return io.prototype._tileReady.call(this,r,c,m)}});function Xn(r,c){return new Ji(r,c)}var Kn=Ji.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,c){this._url=r;var m=o({},this.defaultWmsParams);for(var k in c)k in this.options||(m[k]=c[k]);c=N(this,c);var F=c.detectRetina&&$e.retina?2:1,lt=this.getTileSize();m.width=lt.x*F,m.height=lt.y*F,this.wmsParams=m},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Ji.prototype.onAdd.call(this,r)},getTileUrl:function(r){var c=this._tileCoordsToNwSe(r),m=this._crs,k=I(m.project(c[0]),m.project(c[1])),F=k.min,lt=k.max,Vt=(this._wmsVersion>=1.3&&this._crs===Mi?[F.y,F.x,lt.y,lt.x]:[F.x,F.y,lt.x,lt.y]).join(","),de=Ji.prototype.getTileUrl.call(this,r);return de+j(this.wmsParams,de,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Vt},setParams:function(r,c){return o(this.wmsParams,r),c||this.redraw(),this}});function ki(r,c){return new Kn(r,c)}Ji.WMS=Kn,Xn.wms=ki;var ni=ei.extend({options:{padding:.1},initialize:function(r){N(this,r),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,c){var m=this._map.getZoomScale(c,this._zoom),k=this._map.getSize().multiplyBy(.5+this.options.padding),F=this._map.project(this._center,c),lt=k.multiplyBy(-m).add(F).subtract(this._map._getNewPixelOrigin(r,c));$e.any3d?As(this._container,lt,m):bi(this._container,lt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,c=this._map.getSize(),m=this._map.containerPointToLayerPoint(c.multiplyBy(-r)).round();this._bounds=new ht(m,m.add(c.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ds=ni.extend({options:{tolerance:0},getEvents:function(){var r=ni.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ni.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");Pn(r,"mousemove",this._onMouseMove,this),Pn(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Pn(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){Z(this._redrawRequest),delete this._ctx,rn(this._container),In(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var c in this._layers)r=this._layers[c],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ni.prototype._update.call(this);var r=this._bounds,c=this._container,m=r.getSize(),k=$e.retina?2:1;bi(c,r.min),c.width=k*m.x,c.height=k*m.y,c.style.width=m.x+"px",c.style.height=m.y+"px",$e.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){ni.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[p(r)]=r;var c=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var c=r._order,m=c.next,k=c.prev;m?m.prev=k:this._drawLast=k,k?k.next=m:this._drawFirst=m,delete r._order,delete this._layers[p(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var c=r.options.dashArray.split(/[, ]+/),m=[],k,F;for(F=0;F<c.length;F++){if(k=Number(c[F]),isNaN(k))return;m.push(k)}r.options._dashArray=m}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||J(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var c=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ht,this._redrawBounds.extend(r._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(r._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var c=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,c=this._redrawBounds;if(this._ctx.save(),c){var m=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var k=this._drawFirst;k;k=k.next)r=k.layer,(!c||r._pxBounds&&r._pxBounds.intersects(c))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,c){if(this._drawing){var m,k,F,lt,Vt=r._parts,de=Vt.length,_e=this._ctx;if(de){for(_e.beginPath(),m=0;m<de;m++){for(k=0,F=Vt[m].length;k<F;k++)lt=Vt[m][k],_e[k?"lineTo":"moveTo"](lt.x,lt.y);c&&_e.closePath()}this._fillStroke(_e,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var c=r._point,m=this._ctx,k=Math.max(Math.round(r._radius),1),F=(Math.max(Math.round(r._radiusY),1)||k)/k;F!==1&&(m.save(),m.scale(1,F)),m.beginPath(),m.arc(c.x,c.y/F,k,0,Math.PI*2,!1),F!==1&&m.restore(),this._fillStroke(m,r)}},_fillStroke:function(r,c){var m=c.options;m.fill&&(r.globalAlpha=m.fillOpacity,r.fillStyle=m.fillColor||m.color,r.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(r.setLineDash&&r.setLineDash(c.options&&c.options._dashArray||[]),r.globalAlpha=m.opacity,r.lineWidth=m.weight,r.strokeStyle=m.color,r.lineCap=m.lineCap,r.lineJoin=m.lineJoin,r.stroke())},_onClick:function(r){for(var c=this._map.mouseEventToLayerPoint(r),m,k,F=this._drawFirst;F;F=F.next)m=F.layer,m.options.interactive&&m._containsPoint(c)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(m))&&(k=m);this._fireEvent(k?[k]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,c)}},_handleMouseOut:function(r){var c=this._hoveredLayer;c&&(zn(this._container,"leaflet-interactive"),this._fireEvent([c],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,c){if(!this._mouseHoverThrottled){for(var m,k,F=this._drawFirst;F;F=F.next)m=F.layer,m.options.interactive&&m._containsPoint(c)&&(k=m);k!==this._hoveredLayer&&(this._handleMouseOut(r),k&&(xn(this._container,"leaflet-interactive"),this._fireEvent([k],r,"mouseover"),this._hoveredLayer=k)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,c,m){this._map._fireDOMEvent(c,m||c.type,r)},_bringToFront:function(r){var c=r._order;if(c){var m=c.next,k=c.prev;if(m)m.prev=k;else return;k?k.next=m:m&&(this._drawFirst=m),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(r)}},_bringToBack:function(r){var c=r._order;if(c){var m=c.next,k=c.prev;if(k)k.next=m;else return;m?m.prev=k:k&&(this._drawLast=k),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(r)}}});function xo(r){return $e.canvas?new ds(r):null}var Rs=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ul={_initContainer:function(){this._container=Dn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ni.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var c=r._container=Rs("shape");xn(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",r._path=Rs("path"),c.appendChild(r._path),this._updateStyle(r),this._layers[p(r)]=r},_addPath:function(r){var c=r._container;this._container.appendChild(c),r.options.interactive&&r.addInteractiveTarget(c)},_removePath:function(r){var c=r._container;rn(c),r.removeInteractiveTarget(c),delete this._layers[p(r)]},_updateStyle:function(r){var c=r._stroke,m=r._fill,k=r.options,F=r._container;F.stroked=!!k.stroke,F.filled=!!k.fill,k.stroke?(c||(c=r._stroke=Rs("stroke")),F.appendChild(c),c.weight=k.weight+"px",c.color=k.color,c.opacity=k.opacity,k.dashArray?c.dashStyle=X(k.dashArray)?k.dashArray.join(" "):k.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=k.lineCap.replace("butt","flat"),c.joinstyle=k.lineJoin):c&&(F.removeChild(c),r._stroke=null),k.fill?(m||(m=r._fill=Rs("fill")),F.appendChild(m),m.color=k.fillColor||k.color,m.opacity=k.fillOpacity):m&&(F.removeChild(m),r._fill=null)},_updateCircle:function(r){var c=r._point.round(),m=Math.round(r._radius),k=Math.round(r._radiusY||m);this._setPath(r,r._empty()?"M0 0":"AL "+c.x+","+c.y+" "+m+","+k+" 0,"+65535*360)},_setPath:function(r,c){r._path.v=c},_bringToFront:function(r){_i(r._container)},_bringToBack:function(r){$n(r._container)}},Lo=$e.vml?Rs:vt,ji=ni.extend({_initContainer:function(){this._container=Lo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Lo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){rn(this._container),In(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ni.prototype._update.call(this);var r=this._bounds,c=r.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,m.setAttribute("width",c.x),m.setAttribute("height",c.y)),bi(m,r.min),m.setAttribute("viewBox",[r.min.x,r.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(r){var c=r._path=Lo("path");r.options.className&&xn(c,r.options.className),r.options.interactive&&xn(c,"leaflet-interactive"),this._updateStyle(r),this._layers[p(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){rn(r._path),r.removeInteractiveTarget(r._path),delete this._layers[p(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var c=r._path,m=r.options;c&&(m.stroke?(c.setAttribute("stroke",m.color),c.setAttribute("stroke-opacity",m.opacity),c.setAttribute("stroke-width",m.weight),c.setAttribute("stroke-linecap",m.lineCap),c.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?c.setAttribute("stroke-dasharray",m.dashArray):c.removeAttribute("stroke-dasharray"),m.dashOffset?c.setAttribute("stroke-dashoffset",m.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),m.fill?(c.setAttribute("fill",m.fillColor||m.color),c.setAttribute("fill-opacity",m.fillOpacity),c.setAttribute("fill-rule",m.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(r,c){this._setPath(r,Y(r._parts,c))},_updateCircle:function(r){var c=r._point,m=Math.max(Math.round(r._radius),1),k=Math.max(Math.round(r._radiusY),1)||m,F="a"+m+","+k+" 0 1,0 ",lt=r._empty()?"M0 0":"M"+(c.x-m)+","+c.y+F+m*2+",0 "+F+-m*2+",0 ";this._setPath(r,lt)},_setPath:function(r,c){r._path.setAttribute("d",c)},_bringToFront:function(r){_i(r._path)},_bringToBack:function(r){$n(r._path)}});$e.vml&&ji.include(ul);function ii(r){return $e.svg||$e.vml?new ji(r):null}Nn.include({getRenderer:function(r){var c=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var c=this._paneRenderers[r];return c===void 0&&(c=this._createRenderer({pane:r}),this._paneRenderers[r]=c),c},_createRenderer:function(r){return this.options.preferCanvas&&xo(r)||ii(r)}});var Ar=Fi.extend({initialize:function(r,c){Fi.prototype.initialize.call(this,this._boundsToLatLngs(r),c)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=rt(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function Mr(r,c){return new Ar(r,c)}ji.create=Lo,ji.pointsToPath=Y,Kr.geometryToLayer=qo,Kr.coordsToLatLng=Ds,Kr.coordsToLatLngs=Yi,Kr.latLngToCoords=qi,Kr.latLngsToCoords=fs,Kr.getFeature=Sr,Kr.asFeature=Yr,Nn.mergeOptions({boxZoom:!0});var vn=Ri.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){Pn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){In(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){rn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Oo(),Ba(),this._startPoint=this._map.mouseEventToContainerPoint(r),Pn(document,{contextmenu:Fr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Dn("div","leaflet-zoom-box",this._container),xn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var c=new ht(this._point,this._startPoint),m=c.getSize();bi(this._box,c.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(rn(this._box),zn(this._container,"leaflet-crosshair")),Zs(),cs(),In(document,{contextmenu:Fr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var c=new it(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Nn.addInitHook("addHandler","boxZoom",vn),Nn.mergeOptions({doubleClickZoom:!0});var cl=Ri.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var c=this._map,m=c.getZoom(),k=c.options.zoomDelta,F=r.originalEvent.shiftKey?m-k:m+k;c.options.doubleClickZoom==="center"?c.setZoom(F):c.setZoomAround(r.containerPoint,F)}});Nn.addInitHook("addHandler","doubleClickZoom",cl),Nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Vo=Ri.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Zr(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}xn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zn(this._map._container,"leaflet-grab"),zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=rt(this._map.options.maxBounds);this._offsetLimit=I(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var c=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(c),this._prunePositions(c)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,c){return r-(r-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;r.x<c.min.x&&(r.x=this._viscousLimit(r.x,c.min.x)),r.y<c.min.y&&(r.y=this._viscousLimit(r.y,c.min.y)),r.x>c.max.x&&(r.x=this._viscousLimit(r.x,c.max.x)),r.y>c.max.y&&(r.y=this._viscousLimit(r.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,c=Math.round(r/2),m=this._initialWorldOffset,k=this._draggable._newPos.x,F=(k-c+m)%r+c-m,lt=(k+c+m)%r-c-m,Vt=Math.abs(F+m)<Math.abs(lt+m)?F:lt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Vt},_onDragEnd:function(r){var c=this._map,m=c.options,k=!m.inertia||r.noInertia||this._times.length<2;if(c.fire("dragend",r),k)c.fire("moveend");else{this._prunePositions(+new Date);var F=this._lastPos.subtract(this._positions[0]),lt=(this._lastTime-this._times[0])/1e3,Vt=m.easeLinearity,de=F.multiplyBy(Vt/lt),_e=de.distanceTo([0,0]),Me=Math.min(m.inertiaMaxSpeed,_e),We=de.multiplyBy(Me/_e),un=Me/(m.inertiaDeceleration*Vt),Mn=We.multiplyBy(-un/2).round();!Mn.x&&!Mn.y?c.fire("moveend"):(Mn=c._limitOffset(Mn,c.options.maxBounds),J(function(){c.panBy(Mn,{duration:un,easeLinearity:Vt,noMoveStart:!0,animate:!0})}))}}});Nn.addInitHook("addHandler","dragging",Vo),Nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qr=Ri.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),Pn(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),In(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,c=document.documentElement,m=r.scrollTop||c.scrollTop,k=r.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(k,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var c=this._panKeys={},m=this.keyCodes,k,F;for(k=0,F=m.left.length;k<F;k++)c[m.left[k]]=[-1*r,0];for(k=0,F=m.right.length;k<F;k++)c[m.right[k]]=[r,0];for(k=0,F=m.down.length;k<F;k++)c[m.down[k]]=[0,r];for(k=0,F=m.up.length;k<F;k++)c[m.up[k]]=[0,-1*r]},_setZoomDelta:function(r){var c=this._zoomKeys={},m=this.keyCodes,k,F;for(k=0,F=m.zoomIn.length;k<F;k++)c[m.zoomIn[k]]=r;for(k=0,F=m.zoomOut.length;k<F;k++)c[m.zoomOut[k]]=-r},_addHooks:function(){Pn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){In(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var c=r.keyCode,m=this._map,k;if(c in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(k=this._panKeys[c],r.shiftKey&&(k=ft(k).multiplyBy(3)),m.options.maxBounds&&(k=m._limitOffset(ft(k),m.options.maxBounds)),m.options.worldCopyJump){var F=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(k)));m.panTo(F)}else m.panBy(k)}else if(c in this._zoomKeys)m.setZoom(m.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;Fr(r)}}});Nn.addInitHook("addHandler","keyboard",Qr),Nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var hr=Ri.extend({addHooks:function(){Pn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){In(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var c=ua(r),m=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var k=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),k),Fr(r)},_performZoom:function(){var r=this._map,c=r.getZoom(),m=this._map.options.zoomSnap||0;r._stop();var k=this._delta/(this._map.options.wheelPxPerZoomLevel*4),F=4*Math.log(2/(1+Math.exp(-Math.abs(k))))/Math.LN2,lt=m?Math.ceil(F/m)*m:F,Vt=r._limitZoom(c+(this._delta>0?lt:-lt))-c;this._delta=0,this._startTime=null,Vt&&(r.options.scrollWheelZoom==="center"?r.setZoom(c+Vt):r.setZoomAround(this._lastMousePos,c+Vt))}});Nn.addInitHook("addHandler","scrollWheelZoom",hr);var Il=600;Nn.mergeOptions({tapHold:$e.touchNative&&$e.safari&&$e.mobile,tapTolerance:15});var wr=Ri.extend({addHooks:function(){Pn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){In(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var c=r.touches[0];this._startPos=this._newPos=new z(c.clientX,c.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Pn(document,"touchend",Ci),Pn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),Il),Pn(document,"touchend touchcancel contextmenu",this._cancel,this),Pn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){In(document,"touchend",Ci),In(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),In(document,"touchend touchcancel contextmenu",this._cancel,this),In(document,"touchmove",this._onMove,this)},_onMove:function(r){var c=r.touches[0];this._newPos=new z(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,c){var m=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});m._simulated=!0,c.target.dispatchEvent(m)}});Nn.addInitHook("addHandler","tapHold",wr),Nn.mergeOptions({touchZoom:$e.touch,bounceAtZoomLimits:!0});var xr=Ri.extend({addHooks:function(){xn(this._map._container,"leaflet-touch-zoom"),Pn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zn(this._map._container,"leaflet-touch-zoom"),In(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var c=this._map;if(!(!r.touches||r.touches.length!==2||c._animatingZoom||this._zooming)){var m=c.mouseEventToContainerPoint(r.touches[0]),k=c.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(m.add(k)._divideBy(2))),this._startDist=m.distanceTo(k),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Pn(document,"touchmove",this._onTouchMove,this),Pn(document,"touchend touchcancel",this._onTouchEnd,this),Ci(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var c=this._map,m=c.mouseEventToContainerPoint(r.touches[0]),k=c.mouseEventToContainerPoint(r.touches[1]),F=m.distanceTo(k)/this._startDist;if(this._zoom=c.getScaleZoom(F,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&F<1||this._zoom>c.getMaxZoom()&&F>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,F===1)return}else{var lt=m._add(k)._divideBy(2)._subtract(this._centerPoint);if(F===1&&lt.x===0&&lt.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(lt),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),Z(this._animRequest);var Vt=l(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=J(Vt,this,!0),Ci(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Z(this._animRequest),In(document,"touchmove",this._onTouchMove,this),In(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Nn.addInitHook("addHandler","touchZoom",xr),Nn.BoxZoom=vn,Nn.DoubleClickZoom=cl,Nn.Drag=Vo,Nn.Keyboard=Qr,Nn.ScrollWheelZoom=hr,Nn.TapHold=wr,Nn.TouchZoom=xr,n.Bounds=ht,n.Browser=$e,n.CRS=q,n.Canvas=ds,n.Circle=lr,n.CircleMarker=_r,n.Class=Bt,n.Control=hn,n.DivIcon=bo,n.DivOverlay=cr,n.DomEvent=Fo,n.DomUtil=Ln,n.Draggable=Zr,n.Evented=V,n.FeatureGroup=yr,n.GeoJSON=Kr,n.GridLayer=io,n.Handler=Ri,n.Icon=hs,n.ImageOverlay=Ns,n.LatLng=$,n.LatLngBounds=it,n.Layer=ei,n.LayerGroup=vr,n.LineUtil=On,n.Map=Nn,n.Marker=Bi,n.Mixin=ol,n.Path=kr,n.Point=z,n.PolyUtil=pa,n.Polygon=Fi,n.Polyline=zr,n.Popup=Er,n.PosAnimation=Na,n.Projection=Zn,n.Rectangle=Ar,n.Renderer=ni,n.SVG=ji,n.SVGOverlay=Ua,n.TileLayer=Ji,n.Tooltip=Os,n.Transformation=Ot,n.Util=Et,n.VideoOverlay=ur,n.bind=l,n.bounds=I,n.canvas=xo,n.circle=to,n.circleMarker=ma,n.control=mr,n.divIcon=wo,n.extend=o,n.featureGroup=ja,n.geoJSON=Jr,n.geoJson=wi,n.gridLayer=Xr,n.icon=za,n.imageOverlay=br,n.latLng=D,n.latLngBounds=rt,n.layerGroup=al,n.map=Oa,n.marker=ga,n.point=ft,n.polygon=Ts,n.polyline=ll,n.popup=_o,n.rectangle=Mr,n.setOptions=N,n.stamp=p,n.svg=ii,n.svgOverlay=qa,n.tileLayer=Xn,n.tooltip=va,n.transformation=G,n.version=i,n.videoOverlay=$o;var Is=window.L;n.noConflict=function(){return window.L=Is,this},window.L=n})})(yd,yd.exports);var Ti=yd.exports;const Kt=k1(Ti);var G0={exports:{}};(function(t,e){(function(n,i){i(e)})(Eo,function(n){var i=typeof window<"u"?window:typeof Eo<"u"?Eo:typeof self<"u"?self:{};function o(v,b){return v(b={exports:{}},b.exports),b.exports}var a=o(function(v,b){(function(w){const S={escape:function(A){return A.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:x,mimeType:function(A){return A=x(A).toLowerCase(),function(){var H="application/font-woff",V="image/jpeg";return{woff:H,woff2:H,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:V,jpeg:V,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[A]||""},dataAsUrl:function(A,H){return`data:${H};base64,`+A},isDataUrl:function(A){return A.search(/^(data:)/)!==-1},canvasToBlob:function(A){return A.toBlob?new Promise(function(V){A.toBlob(V)}):(H=A,new Promise(function(V){const z=Lt(H.toDataURL().split(",")[1]);var mt=z.length;const ft=new Uint8Array(mt);for(let ht=0;ht<mt;ht++)ft[ht]=z.charCodeAt(ht);V(new Blob([ft],{type:"image/png"}))}));var H},resolveUrl:function(A,H){const V=document.implementation.createHTMLDocument(),z=V.createElement("base"),mt=(V.head.appendChild(z),V.createElement("a"));return V.body.appendChild(mt),z.href=H,mt.href=A,mt.href},getAndEncode:function(A){let H=Mt.impl.urlCache.find(function(V){return V.url===A});return H||(H={url:A,promise:null},Mt.impl.urlCache.push(H)),H.promise===null&&(Mt.impl.options.cacheBust&&(A+=(/\?/.test(A)?"&":"?")+new Date().getTime()),H.promise=new Promise(function(V){const z=Mt.impl.options.httpTimeout,mt=new XMLHttpRequest;let ft;var ht;function I(it){console.error(it),V("")}mt.onreadystatechange=function(){if(mt.readyState===4)if(mt.status!==200)ft?V(ft):I(`cannot fetch resource: ${A}, status: `+mt.status);else{const it=new FileReader;it.onloadend=function(){var rt=it.result.split(/,/)[1];V(rt)},it.readAsDataURL(mt.response)}},mt.ontimeout=function(){ft?V(ft):I(`timeout of ${z}ms occured while fetching resource: `+A)},mt.responseType="blob",mt.timeout=z,Mt.impl.options.useCredentials&&(mt.withCredentials=!0),mt.open("GET",A,!0),mt.send(),Mt.impl.options.imagePlaceholder&&(ht=Mt.impl.options.imagePlaceholder.split(/,/))&&ht[1]&&(ft=ht[1])})),H.promise},uid:function(){let A=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+A++}}(),delay:function(A){return function(H){return new Promise(function(V){setTimeout(function(){V(H)},A)})}},asArray:function(A){const H=[],V=A.length;for(let z=0;z<V;z++)H.push(A[z]);return H},escapeXhtml:function(A){return A.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(A){return A!=="data:,"?new Promise(function(H,V){const z=new Image;Mt.impl.options.useCredentials&&(z.crossOrigin="use-credentials"),z.onload=function(){H(z)},z.onerror=V,z.src=A}):Promise.resolve()},width:function(A){var H=R(A,"border-left-width"),V=R(A,"border-right-width");return A.scrollWidth+H+V},height:function(A){var H=R(A,"border-top-width"),V=R(A,"border-bottom-width");return A.scrollHeight+H+V}};function x(A){return(A=/\.([^\.\/]*?)(\?|$)/g.exec(A))?A[1]:""}function R(A,H){const V=Nt(A).getPropertyValue(H);return parseFloat(V.replace("px",""))}const N=function(){const A=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(mt,ft,ht){return H(mt)?Promise.resolve(mt).then(V).then(function(I){let it=Promise.resolve(mt);return I.forEach(function(rt){it=it.then(function($){return z($,rt,ft,ht)})}),it}):Promise.resolve(mt)},shouldProcess:H,impl:{readUrls:V,inline:z}};function H(mt){return mt.search(A)!==-1}function V(mt){const ft=[];for(var ht;(ht=A.exec(mt))!==null;)ft.push(ht[1]);return ft.filter(function(I){return!S.isDataUrl(I)})}function z(mt,ft,ht,I){return Promise.resolve(ft).then(function(it){return ht?S.resolveUrl(it,ht):it}).then(I||S.getAndEncode).then(function(it){return S.dataAsUrl(it,S.mimeType(ft))}).then(function(it){return mt.replace((rt=ft,new RegExp(`(url\\(['"]?)(${S.escape(rt)})(['"]?\\))`,"g")),`$1${it}$3`);var rt})}}(),j={resolveAll:function(){return U().then(function(A){return Promise.all(A.map(function(H){return H.resolve()}))}).then(function(A){return A.join(`
`)})},impl:{readAll:U}};function U(){return Promise.resolve(S.asArray(document.styleSheets)).then(function(H){const V=[];return H.forEach(function(z){if(Object.getPrototypeOf(z).hasOwnProperty("cssRules"))try{S.asArray(z.cssRules||[]).forEach(V.push.bind(V))}catch(mt){console.log("Error while reading CSS rules from "+z.href,mt.toString())}}),V}).then(function(H){return H.filter(function(V){return V.type===CSSRule.FONT_FACE_RULE}).filter(function(V){return N.shouldProcess(V.style.getPropertyValue("src"))})}).then(function(H){return H.map(A)});function A(H){return{resolve:function(){var V=(H.parentStyleSheet||{}).href;return N.inlineAll(H.cssText,V)},src:function(){return H.style.getPropertyValue("src")}}}}const W={inlineAll:function A(H){return H instanceof Element?function(V){const z=V.style.getPropertyValue("background");return z?N.inlineAll(z).then(function(mt){V.style.setProperty("background",mt,z)}).then(function(){return V}):Promise.resolve(V)}(H).then(function(){return H instanceof HTMLImageElement?X(H).inline():Promise.all(S.asArray(H.childNodes).map(function(V){return A(V)}))}):Promise.resolve(H)},impl:{newImage:X}};function X(A){return{inline:function(H){return S.isDataUrl(A.src)?Promise.resolve():Promise.resolve(A.src).then(H||S.getAndEncode).then(function(V){return S.dataAsUrl(V,S.mimeType(A.src))}).then(function(V){return new Promise(function(z){A.onload=z,A.onerror=z,A.src=V})})}}}const St={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},Mt={toSvg:gt,toPng:function(A,H){return(H=H||{}).raster=!0,_t(A,H).then(function(V){return V.toDataURL()})},toJpeg:function(A,H){return(H=H||{}).raster=!0,_t(A,H).then(function(V){return V.toDataURL("image/jpeg",H.quality||1)})},toBlob:function(A,H){return(H=H||{}).raster=!0,_t(A,H).then(S.canvasToBlob)},toPixelData:function(A,H){return(H=H||{}).raster=!0,_t(A,H).then(function(V){return V.getContext("2d").getImageData(0,0,S.width(A),S.height(A)).data})},toCanvas:function(A,H){return(H=H||{}).raster=!0,_t(A,H||{})},impl:{fontFaces:j,images:W,util:S,inliner:N,urlCache:[],options:{}}},Nt=(v.exports=Mt,w.getComputedStyle||window.getComputedStyle),Lt=w.atob||window.atob;function gt(A,H){var V=H=H||{};return V.imagePlaceholder===void 0?Mt.impl.options.imagePlaceholder=St.imagePlaceholder:Mt.impl.options.imagePlaceholder=V.imagePlaceholder,V.cacheBust===void 0?Mt.impl.options.cacheBust=St.cacheBust:Mt.impl.options.cacheBust=V.cacheBust,V.useCredentials===void 0?Mt.impl.options.useCredentials=St.useCredentials:Mt.impl.options.useCredentials=V.useCredentials,Promise.resolve(A).then(function(z){return function mt(ft,ht,I,it,rt=null){return I||!ht||ht(ft)?Promise.resolve(ft).then(function($){return $ instanceof HTMLCanvasElement?S.makeImage($.toDataURL()):$.nodeName==="IFRAME"?html2canvas($.contentDocument.body).then(D=>D.toDataURL()).then(S.makeImage):$.cloneNode(!1)}).then(function($){return function(D,q){const dt=D.childNodes;return dt.length===0?Promise.resolve(q):function(ct,At){const Ot=Nt(D);let G=Promise.resolve();return At.forEach(function(tt){G=G.then(function(){return mt(tt,ht,!1,it,Ot)}).then(function(yt){yt&&ct.appendChild(yt)})}),G}(q,S.asArray(dt)).then(function(){return q})}(ft,$)}).then(function($){return function(D,q,dt){return q instanceof Element?Promise.resolve().then(function(){(function(ct,At){const Ot=Nt(ct);Ot.cssText?(At.style.cssText=Ot.cssText,function(G,tt){tt.font=G.font,tt.fontFamily=G.fontFamily,tt.fontFeatureSettings=G.fontFeatureSettings,tt.fontKerning=G.fontKerning,tt.fontSize=G.fontSize,tt.fontStretch=G.fontStretch,tt.fontStyle=G.fontStyle,tt.fontVariant=G.fontVariant,tt.fontVariantCaps=G.fontVariantCaps,tt.fontVariantEastAsian=G.fontVariantEastAsian,tt.fontVariantLigatures=G.fontVariantLigatures,tt.fontVariantNumeric=G.fontVariantNumeric,tt.fontVariationSettings=G.fontVariationSettings,tt.fontWeight=G.fontWeight}(Ot,At.style)):(dt?function(G,tt,yt,vt){const Y=yt.style,$t=G.style;for(var ee of tt){var Ht=tt.getPropertyValue(ee),Rt=$t.getPropertyValue(ee),wt=($t.setProperty(ee,vt?"initial":"unset"),tt.getPropertyValue(ee));wt!==Ht?Y.setProperty(ee,Ht):Y.removeProperty(ee),$t.setProperty(ee,Rt)}}(ct,Ot,At,I):function(G,tt,yt){const vt=function($t){if(Bt[$t])return Bt[$t];Et||((Et=document.createElement("iframe")).style.visibility="hidden",Et.style.position="fixed",document.body.appendChild(Et),Et.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const ee=document.createElement($t),Ht=(Et.contentWindow.document.body.appendChild(ee),ee.textContent=".",Et.contentWindow.getComputedStyle(ee)),Rt={};return S.asArray(Ht).forEach(function(wt){Rt[wt]=wt==="width"||wt==="height"?"auto":Ht.getPropertyValue(wt)}),Et.contentWindow.document.body.removeChild(ee),Bt[$t]=Rt}(yt.tagName),Y=yt.style;S.asArray(G).forEach(function($t){var ee=G.getPropertyValue($t);(ee!==vt[$t]||tt&&ee!==tt.getPropertyValue($t))&&Y.setProperty($t,ee,G.getPropertyPriority($t))})}(Ot,rt,At),I&&(["inset-block","inset-block-start","inset-block-end"].forEach(G=>At.style.removeProperty(G)),["left","right","top","bottom"].forEach(G=>{At.style.getPropertyValue(G)&&At.style.setProperty(G,"0px")})))})(D,q)}).then(function(){[":before",":after"].forEach(function(ct){(function(At){const Ot=Nt(D,At),G=Ot.getPropertyValue("content");if(G!==""&&G!=="none"){const tt=S.uid(),yt=q.getAttribute("class"),vt=(yt&&q.setAttribute("class",yt+" "+tt),document.createElement("style"));vt.appendChild(function(){const Y=`.${tt}:`+At,$t=(Ot.cssText?function(){return`${Ot.cssText} content: ${Ot.getPropertyValue("content")};`}:function(){return S.asArray(Ot).map(function(ee){return ee+": "+Ot.getPropertyValue(ee)+(Ot.getPropertyPriority(ee)?" !important":"")}).join("; ")+";"})();return document.createTextNode(Y+`{${$t}}`)}()),q.appendChild(vt)}})(ct)})}).then(function(){D instanceof HTMLTextAreaElement&&(q.innerHTML=D.value),D instanceof HTMLInputElement&&q.setAttribute("value",D.value)}).then(function(){q instanceof SVGElement&&(q.setAttribute("xmlns","http://www.w3.org/2000/svg"),q instanceof SVGRectElement&&["width","height"].forEach(function(ct){const At=q.getAttribute(ct);At&&q.style.setProperty(ct,At)}))}).then(function(){return q}):q}(ft,$,it)}):Promise.resolve()}(z,H.filter,!0,!H.raster)}).then(zt).then(J).then(function(z){H.bgcolor&&(z.style.backgroundColor=H.bgcolor),H.width&&(z.style.width=H.width+"px"),H.height&&(z.style.height=H.height+"px"),H.style&&Object.keys(H.style).forEach(function(ft){z.style[ft]=H.style[ft]});let mt=null;return typeof H.onclone=="function"&&(mt=H.onclone(z)),Promise.resolve(mt).then(function(){return z})}).then(function(z){return z=z,mt=H.width||S.width(A),ft=H.height||S.height(A),Promise.resolve(z).then(function(ht){return ht.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(ht)}).then(S.escapeXhtml).then(function(ht){return`<foreignObject x="0" y="0" width="100%" height="100%">${ht}</foreignObject>`}).then(function(ht){return`<svg xmlns="http://www.w3.org/2000/svg" width="${mt}" height="${ft}">${ht}</svg>`}).then(function(ht){return"data:image/svg+xml;charset=utf-8,"+ht});var mt,ft}).then(function(z){return Mt.impl.urlCache=[],z})}function _t(A,H){return gt(A,H).then(S.makeImage).then(S.delay(0)).then(function(V){var z=typeof H.scale!="number"?1:H.scale;const mt=function(ht,I){const it=document.createElement("canvas");if(it.width=(H.width||S.width(ht))*I,it.height=(H.height||S.height(ht))*I,H.bgcolor){const rt=it.getContext("2d");rt.fillStyle=H.bgcolor,rt.fillRect(0,0,it.width,it.height)}return it}(A,z),ft=mt.getContext("2d");return ft.mozImageSmoothingEnabled=!1,ft.msImageSmoothingEnabled=!1,ft.imageSmoothingEnabled=!1,V&&(ft.scale(z,z),ft.drawImage(V,0,0)),Et&&(document.body.removeChild(Et),Et=null,Z&&clearTimeout(Z),Z=setTimeout(()=>{Z=null,Bt={}},2e4)),mt})}function zt(A){return j.resolveAll().then(function(H){const V=document.createElement("style");return A.appendChild(V),V.appendChild(document.createTextNode(H)),A})}function J(A){return W.inlineAll(A).then(function(){return A})}let Z=null,Et=null,Bt={}})(i)}),l=o(function(v,b){(function(){function w(j,U,W){var X=new XMLHttpRequest;X.open("GET",j),X.responseType="blob",X.onload=function(){N(X.response,U,W)},X.onerror=function(){console.error("could not download file")},X.send()}function S(j){var U=new XMLHttpRequest;U.open("HEAD",j,!1);try{U.send()}catch{}return 200<=U.status&&299>=U.status}function x(j){try{j.dispatchEvent(new MouseEvent("click"))}catch{var U=document.createEvent("MouseEvents");U.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),j.dispatchEvent(U)}}var R=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof i=="object"&&i.global===i?i:void 0,N=R.saveAs||(typeof window!="object"||window!==R?function(){}:"download"in HTMLAnchorElement.prototype?function(j,U,W){var X=R.URL||R.webkitURL,St=document.createElement("a");U=U||j.name||"download",St.download=U,St.rel="noopener",typeof j=="string"?(St.href=j,St.origin===location.origin?x(St):S(St.href)?w(j,U,W):x(St,St.target="_blank")):(St.href=X.createObjectURL(j),setTimeout(function(){X.revokeObjectURL(St.href)},4e4),setTimeout(function(){x(St)},0))}:"msSaveOrOpenBlob"in navigator?function(j,U,W){if(U=U||j.name||"download",typeof j!="string")navigator.msSaveOrOpenBlob(function(St,Mt){return Mt===void 0?Mt={autoBom:!1}:typeof Mt!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Mt={autoBom:!Mt}),Mt.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(St.type)?new Blob(["\uFEFF",St],{type:St.type}):St}(j,W),U);else if(S(j))w(j,U,W);else{var X=document.createElement("a");X.href=j,X.target="_blank",setTimeout(function(){x(X)})}}:function(j,U,W,X){if((X=X||open("","_blank"))&&(X.document.title=X.document.body.innerText="downloading..."),typeof j=="string")return w(j,U,W);var St=j.type==="application/octet-stream",Mt=/constructor/i.test(R.HTMLElement)||R.safari,Nt=/CriOS\/[\d]+/.test(navigator.userAgent);if((Nt||St&&Mt)&&typeof FileReader=="object"){var Lt=new FileReader;Lt.onloadend=function(){var zt=Lt.result;zt=Nt?zt:zt.replace(/^data:[^;]*;/,"data:attachment/file;"),X?X.location.href=zt:location=zt,X=null},Lt.readAsDataURL(j)}else{var gt=R.URL||R.webkitURL,_t=gt.createObjectURL(j);X?X.location=_t:location.href=_t,X=null,setTimeout(function(){gt.revokeObjectURL(_t)},4e4)}});R.saveAs=N.saveAs=N,v.exports=N})()}),f=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(v){var b=v.node,w=v.error;return console.warn("Map node is very big "+b.scrollWidth+"x"+b.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(w)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var v=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S={};for(var x in this.options)w.hasOwnProperty(x)?S[x]=w[x]:S[x]=this.options[x];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return v._getPixelData(S)}).then(function(R){return v._setElementsVisible(!0),v._toCanvas(R,S)}).then(function(R){return b==="image"?v._canvasToImage(R,S):b==="canvas"?R:v._canvasToBlob(R,S)}).then(function(R){return v._screenState.status=1,v._map.fire("simpleMapScreenshoter.done"),R}).catch(function(R){return v._setElementsVisible(!0),v._screenState.status=1,v._map.fire("simpleMapScreenshoter.error",{e:R}),Promise.reject(R)}),this._screenState.promise)},_setElementsVisible:function(){var v=this,b=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(w){var S=v._map._container.querySelectorAll(w),x=!0,R=!1,N=void 0;try{for(var j,U=S[Symbol.iterator]();!(x=(j=U.next()).done);x=!0)j.value.style.opacity=b===!1?0:1}catch(W){R=!0,N=W}finally{try{!x&&U.return&&U.return()}finally{if(R)throw N}}})},_canvasToImage:function(v,b){var w=b.mimeType,S=v.toDataURL(w);return S.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(S)},_canvasToBlob:function(v,b){var w=b.mimeType;return new Promise(function(S,x){v.toBlob(function(R){S(R)},w)})},_toCanvas:function(v,b){var w=b.captionOffset,S=b.caption,x=b.captionFontSize,R=b.captionFont,N=b.captionColor,j=b.captionBgColor,U=this._node,W=U.screenHeight,X=U.screenWidth,St=document.createElement("canvas");St.width=X,St.height=W;for(var Mt=St.getContext("2d"),Nt=Mt.createImageData(X,W),Lt=0;Lt<v.length;++Lt)Nt.data[Lt]=v[Lt];Mt.putImageData(Nt,0,0),Nt=null;var gt=document.createElement("canvas"),_t=gt.getContext("2d"),zt=0,J=0,Z=W,Et=X;if(this.options.cropImageByInnerWH===!0){for(var Bt=[],A=0,H=0;H<W;++H){A=0;for(var V=0;V<X;++V)v[4*H*X+4*V+4]===0&&A++;A===X&&Bt.push(H)}var z=this._getMinAndMaxOnValuesBreak(Bt);zt=z.min;for(var mt=X,ft=z.max,ht=[],I=0,it=J;it<mt;++it){I=0;for(var rt=0;rt<W;++rt)v[4*rt*X+4*it+4]===0&&I++;I===W&&ht.push(it)}var $=this._getMinAndMaxOnValuesBreak(ht);J=$.min,mt=$.max,(J===0&&mt===0||mt===null)&&(mt=X),(zt===0&&ft===0||ft===null)&&(ft=W),this.options.debugMode===!0&&(console.log("emptyYLine",Bt),console.log("minMaxY",z),console.log("emptyXLine",ht),console.log("minMaxX",$),console.log("debugX",{}),console.log("debugY",{})),zt===0&&ft===W&&J===0&&mt===X||(zt+=this.options.onCropBorderSize,ft-=this.options.onCropBorderSize,J+=this.options.onCropBorderSize,mt-=this.options.onCropBorderSize),Z=ft-zt,Et=mt-J,gt.width=Et,gt.height=Z}else gt.width=Et,gt.height=Z;var D=null;return S&&(D=typeof S=="function"?S.call(this):S),D!==null&&(gt.height=gt.height+(w+x+w),_t.beginPath(),_t.rect(0,0,gt.width,gt.height),_t.fillStyle=j,_t.fill(),_t.save()),_t.drawImage(St,J,zt,Et,Z,0,0,Et,Z),D!==null&&(_t.font=x+"px "+R,_t.fillStyle=N,_t.fillText(D,w,Z+w+x)),Promise.resolve(gt)},_getMinAndMaxOnValuesBreak:function(v){for(var b=0,w=0,S=!1,x=1;x<v.length;x++){if(v[x]-1!==v[x-1]){w=v[x],S=!0;break}b=v[x]}return S===!1&&v[0]>1?(b=0,w=v[0]):S===!1&&(b=v[v.length-1]||0,w=null),{min:b,max:w}},_getPixelData:function(v){var b=this,w=v.domtoimageOptions,S=w===void 0?{}:w;return this._getPixelDataOfNormalMap(S).catch(function(x){return console.warn("May be map size very big on that zoom level, we have error:",x.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),b._getPixelDataOfBigMap(S)})},_getPixelDataOfNormalMap:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=this._map.getContainer();return this._node={node:b,screenHeight:b.scrollHeight,screenWidth:b.scrollWidth},a.toPixelData(b,v)},_getPixelDataOfBigMap:function(){var v=this,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},w=this._map.getContainer(),S=this._map.getPane("mapPane");S.style.width=2*w.clientWidth+"px",S.style.height=2*w.clientHeight+"px",S.style.overflow="hidden";var x=function(){S.style.width="initial",S.style.height="initial",S.style.overflow="initial"};return this._node={node:w,screenHeight:w.scrollHeight,screenWidth:w.scrollWidth},a.toPixelData(w,b).then(function(R){return x(),R}).catch(function(R){return x(),w.scrollHeight>=4e3||w.scrollWidth>=4e3?v.options.onPixelDataFail({plugin:v,node:w,mapPane:S,error:R,domtoimageOptions:b}):Promise.reject(R)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var v=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,b=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");w.appendChild(document.createTextNode(v)),b.appendChild(w)},_onScreenBtn:function(){var v=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(b){var w=typeof v.options.screenName=="function"?v.options.screenName.call(v):v.options.screenName;l.saveAs(b,w+".png")}).catch(function(b){v._map.fire("simpleMapScreenshoter.error",{e:b})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var v=this;return new Promise(function(b){var w=setInterval(function(){v._interaction||(b(),clearInterval(w))},100)})}}),p=(L.Control.SimpleMapScreenshoter=f,L.simpleMapScreenshoter=function(v){return new L.Control.SimpleMapScreenshoter(v)},f);n.default=p,n.SimpleMapScreenshoter=f,Object.defineProperty(n,"__esModule",{value:!0})})})(G0,G0.exports);const tw={class:"h-full flex flex-col bg-white overflow-y-auto"},ew={class:"p-3 border-b border-gray-200"},nw={class:"grid grid-cols-4 gap-1"},iw=["onClick","title"],rw=["innerHTML"],sw={key:0,class:"flex-1 overflow-y-auto"},ow={class:"p-3 border-b border-gray-200"},aw={class:"p-3"},lw={class:"grid grid-cols-6 gap-2 mb-4"},uw=["onClick","title"],cw={key:0,class:"space-y-4"},hw={class:"flex items-center gap-4"},fw={class:"flex items-center gap-2"},dw={class:"flex items-center gap-4"},pw=["value"],gw={key:0,class:"flex items-center gap-4"},mw={class:"flex items-center gap-2"},vw={key:1,class:"space-y-4"},yw={class:"flex items-center gap-4"},_w={class:"flex items-center gap-2"},bw={class:"flex items-center gap-4"},ww={class:"flex items-center gap-2"},xw={class:"flex items-center gap-4"},Lw={class:"flex items-center gap-2"},Cw={class:"flex items-center gap-4"},Pw={class:"flex items-center gap-2"},kw={class:"flex items-center gap-4"},Sw={class:"flex items-center gap-2"},Ew=["onClick","title"],Aw=["innerHTML"],Mw={key:1,class:"p-3 border-t border-gray-200"},Bw={class:"mt-3"},Tw={key:0},Dw={class:"grid grid-cols-2 gap-4"},Nw={class:"text-sm font-medium text-gray-500"},Ow={class:"text-sm font-medium text-gray-500"},Rw={class:"text-sm font-medium text-gray-500"},Iw={class:"text-sm font-medium text-gray-500"},Fw={class:"text-sm font-medium text-gray-500"},jw={class:"text-sm font-medium text-gray-500"},zw={class:"text-sm font-medium text-gray-500"},Uw={class:"text-sm font-medium text-gray-500"},qw={class:"text-sm font-medium text-gray-500"},$w={class:"text-sm font-medium text-gray-500"},Vw={class:"text-sm font-medium text-gray-500"},Hw={class:"text-sm font-medium text-gray-500"},Gw={class:"text-sm font-medium text-gray-500"},Ww={class:"text-sm font-medium text-gray-500"},Zw={class:"text-sm font-medium text-gray-500"},Kw={class:"text-sm font-medium text-gray-500"},Yw={key:1,class:"text-center text-sm text-gray-500"},Jw={key:2,class:"p-3 border-t border-gray-200"},Xw={class:"mt-3"},Qw={class:"mb-4"},tx={class:"grid grid-cols-2 gap-2"},ex={class:"grid grid-cols-2 gap-2"},nx=Ls({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(t,{emit:e}){const n=t,i=e,o=Ie(null),a=Ie("Double-cliquez pour diter"),l=Ie("#3B82F6"),f=Ie(.2),p=Ie("#2563EB"),v=Ie(2),b=Ie("solid"),w=Ie("#000000"),S=Ie("Arial, sans-serif"),x=Ie("center"),R=Ie(!1),N=Ie(!1),j=Ie({style:!1,properties:!1,samplePoints:!1}),U=Ie({radius:4,color:"#FF4500",fillColor:"#FF4500",fillOpacity:.6,weight:2,opacity:.8}),W=Ie({radius:6,weight:3,opacity:1,fillOpacity:1}),X=jn(()=>{var $,D;return!(($=n.selectedShape)!=null&&$.properties)||n.selectedShape.properties.type!=="TextRectangle"?"center":((D=n.selectedShape.properties.style)==null?void 0:D.textAlign)||"center"});qr(()=>n.selectedShape,$=>{var D,q,dt;if(!$){o.value=null,x.value="center",R.value=!1,N.value=!1,a.value="Double-cliquez pour diter";return}if(console.log("[DrawingTools] Changement de forme slectionne",{newShape:$,properties:$==null?void 0:$.properties}),$){if(o.value={...$.properties},((D=$.properties)==null?void 0:D.type)==="TextRectangle"){const ct=((q=$.properties)==null?void 0:q.style)||{};w.value=ct.textColor||"#000000",S.value=ct.fontFamily||"Arial, sans-serif",x.value=ct.textAlign||"center",R.value=ct.bold||!1,N.value=ct.italic||!1,a.value=$.properties.text||"Double-cliquez pour diter",console.log("[DrawingTools] Initialisation du TextRectangle",{text:a.value,style:ct})}((dt=$.properties)==null?void 0:dt.type)==="ElevationLine"&&(U.value={...$.properties.samplePointStyle},W.value={...$.properties.minMaxPointStyle})}else o.value=null},{immediate:!0}),qr(()=>{var $,D;return(D=($=n.selectedShape)==null?void 0:$.properties)==null?void 0:D.text},$=>{var D,q;((q=(D=n.selectedShape)==null?void 0:D.properties)==null?void 0:q.type)==="TextRectangle"&&(console.log("[DrawingTools] Mise  jour du texte :",$),a.value=$||"Double-cliquez pour diter")},{immediate:!0}),qr(()=>{var $,D;return(D=($=n.selectedShape)==null?void 0:$.properties)==null?void 0:D.style},$=>{var D;(D=n.selectedShape)!=null&&D.properties&&n.selectedShape.properties.type==="TextRectangle"&&$&&(w.value=$.textColor||"#000000",S.value=$.fontFamily||"Arial, sans-serif",R.value=$.bold||!1,N.value=$.italic||!1)},{deep:!0});const St=($,D)=>{let q=null;return(...dt)=>{q!==null&&clearTimeout(q),q=window.setTimeout(()=>{$(...dt),q=null},D)}},Mt=($,D)=>{if($===D)return!0;if($===null||D===null)return!1;if(typeof $!="object"||typeof D!="object")return $===D;const q=Object.keys($),dt=Object.keys(D);if(q.length!==dt.length)return!1;for(const ct of q)if(!dt.includes(ct)||!Mt($[ct],D[ct]))return!1;return!0},Nt=St(($,D)=>{console.log("[DrawingTools] Changement dtect dans localProperties",{newProperties:$,oldProperties:D,selectedShape:n.selectedShape})},300);qr(()=>o.value,($,D)=>{$&&D&&!Mt($,D)&&Nt($,D)},{deep:!0});const Lt=$=>({Circle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10" /></svg>',Semicircle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 12a10 10 0 0 1 20 0" /></svg>',Rectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" /></svg>',Polygon:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3l9 7-3 9H6l-3-9 9-7z" /></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6" /><path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2" /><line x1="10" y1="11" x2="10" y2="17" /><line x1="14" y1="11" x2="14" y2="17" /></svg>',Line:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 19l18-14" /></svg>',TextRectangle:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" /><path d="M9 8h6m-3 0v8" /></svg>',ElevationLine:'<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h3l3-9 6 18 3-9h3" /></svg>'})[$]||"",gt=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimtrique"},{type:"TextRectangle",label:"Texte"},{type:"delete",label:"Supprimer"}],_t=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],zt=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointill"},{value:"dashdot",label:"Tiret-point"}],J=[{value:"left",label:"Align  gauche",icon:"&#8678;"},{value:"center",label:"Centr",icon:"&#8645;"},{value:"right",label:"Align  droite",icon:"&#8680;"}],Z=jn(()=>{var D,q;const $=(q=(D=n.selectedShape)==null?void 0:D.properties)==null?void 0:q.type;return console.log("[DrawingTools] Calcul de showFillOptions",{shapeType:$,selectedShape:n.selectedShape}),$?["Circle","Rectangle","Polygon","Semicircle"].includes($)&&$!=="ElevationLine":!1}),Et=$=>{j.value[$]=!j.value[$]},Bt=$=>{switch($){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},A=$=>{var D,q;p.value=$,(Z.value||((D=o.value)==null?void 0:D.type)==="TextRectangle")&&(l.value=$),H({strokeColor:$,fillColor:Z.value||((q=o.value)==null?void 0:q.type)==="TextRectangle"?$:void 0})},H=$=>{const D={...$};$.strokeStyle&&(D.dashArray=Bt($.strokeStyle)),$.fillOpacity!==void 0&&(D.fillOpacity=parseFloat($.fillOpacity)),$.strokeOpacity!==void 0&&(D.strokeOpacity=parseFloat($.strokeOpacity)),$.strokeWidth!==void 0&&(D.weight=parseInt($.strokeWidth)),$.strokeColor&&(D.color=$.strokeColor),i("style-update",D)},V=$=>{var q,dt,ct,At,Ot,G,tt;if(((dt=(q=n.selectedShape)==null?void 0:q.properties)==null?void 0:dt.type)!=="TextRectangle")return;const D={textColor:(ct=n.selectedShape.properties.style)==null?void 0:ct.textColor,fontFamily:(At=n.selectedShape.properties.style)==null?void 0:At.fontFamily,textAlign:(Ot=n.selectedShape.properties.style)==null?void 0:Ot.textAlign,bold:(G=n.selectedShape.properties.style)==null?void 0:G.bold,italic:(tt=n.selectedShape.properties.style)==null?void 0:tt.italic,...$};i("style-update",D)},z=()=>{R.value=!R.value,V({bold:R.value})},mt=()=>{N.value=!N.value,V({italic:N.value})},ft=$=>$?$>=1e3?`${($/1e3).toFixed(2)} km`:`${$.toFixed(2)} m`:"0 m",ht=$=>$?`${($/1e4).toFixed(2)} ha`:"0 ha",I=$=>$?`${(($%360+360)%360).toFixed(1)}`:"0",it=()=>{var $,D;if(((D=($=n.selectedShape)==null?void 0:$.properties)==null?void 0:D.type)==="ElevationLine"){const q={...U.value,fillColor:U.value.color};n.selectedShape.layer.setSamplePointStyle(q)}},rt=()=>{var $,D;((D=($=n.selectedShape)==null?void 0:$.properties)==null?void 0:D.type)==="ElevationLine"&&n.selectedShape.layer.setMinMaxPointStyle(W.value)};return($,D)=>(se(),ce("div",tw,[D[74]||(D[74]=M("div",{class:"p-3 bg-gray-50 border-b border-gray-200"},[M("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),M("div",ew,[M("div",nw,[(se(!0),ce(_n,null,Gn(gt.filter(q=>q.type!=="delete"),q=>(se(),ce("button",{key:q.type,class:Di(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":$.currentTool===q.type}]),onClick:dt=>$.$emit("tool-change",q.type),title:q.label},[M("span",{class:"icon",innerHTML:Lt(q.type)},null,8,rw)],10,iw))),128))]),$.selectedShape?(se(),ce("button",{key:0,class:Di(["w-full mt-2 p-2 rounded border border-red-200 bg-red-50 text-red-600 hover:bg-red-100",{"bg-red-100":$.currentTool==="delete"}]),onClick:D[0]||(D[0]=q=>$.$emit("delete-shape")),title:"Supprimer la forme"},D[33]||(D[33]=[M("svg",{class:"w-4 h-4 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),2)):en("",!0)]),$.selectedShape&&o.value?(se(),ce("div",sw,[M("div",ow,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:D[1]||(D[1]=q=>Et("style"))},[D[35]||(D[35]=M("span",null,"Style",-1)),(se(),ce("svg",{class:Di(["w-4 h-4",{"rotate-180":!j.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[34]||(D[34]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])]),mn(M("div",aw,[M("div",lw,[(se(),ce(_n,null,Gn(_t,q=>M("button",{key:q,class:"w-8 h-8 rounded-full",style:Uh({backgroundColor:q}),onClick:dt=>A(q),title:q},null,12,uw)),64))]),o.value.type!=="TextRectangle"?(se(),ce("div",cw,[M("div",hw,[D[36]||(D[36]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),M("div",fw,[mn(M("input",{type:"color","onUpdate:modelValue":D[2]||(D[2]=q=>p.value=q),class:"w-16 h-8 rounded border",onChange:D[3]||(D[3]=q=>H({strokeColor:p.value})),title:"Couleur du contour"},null,544),[[Hn,p.value]]),mn(M("input",{type:"range","onUpdate:modelValue":D[4]||(D[4]=q=>v.value=q),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:D[5]||(D[5]=q=>H({strokeWidth:v.value})),title:"paisseur du contour"},null,544),[[Hn,v.value]])])]),M("div",dw,[D[37]||(D[37]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),mn(M("select",{"onUpdate:modelValue":D[6]||(D[6]=q=>b.value=q),class:"w-full rounded border",onChange:D[7]||(D[7]=q=>H({strokeStyle:b.value}))},[(se(),ce(_n,null,Gn(zt,q=>M("option",{key:q.value,value:q.value},Pe(q.label),9,pw)),64))],544),[[qs,b.value]])]),Z.value?(se(),ce("div",gw,[D[38]||(D[38]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),M("div",mw,[mn(M("input",{type:"color","onUpdate:modelValue":D[8]||(D[8]=q=>l.value=q),class:"w-16 h-8 rounded border",onChange:D[9]||(D[9]=q=>H({fillColor:l.value})),title:"Couleur de remplissage"},null,544),[[Hn,l.value]]),mn(M("input",{type:"range","onUpdate:modelValue":D[10]||(D[10]=q=>f.value=q),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:D[11]||(D[11]=q=>H({fillOpacity:f.value})),title:"Opacit du remplissage"},null,544),[[Hn,f.value]])])])):en("",!0)])):en("",!0),o.value.type==="TextRectangle"?(se(),ce("div",vw,[M("div",yw,[D[39]||(D[39]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),M("div",_w,[mn(M("input",{type:"color","onUpdate:modelValue":D[12]||(D[12]=q=>p.value=q),class:"w-16 h-8 rounded border",onChange:D[13]||(D[13]=q=>H({strokeColor:p.value})),title:"Couleur du contour"},null,544),[[Hn,p.value]]),mn(M("input",{type:"range","onUpdate:modelValue":D[14]||(D[14]=q=>v.value=q),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:D[15]||(D[15]=q=>H({strokeWidth:v.value})),title:"paisseur du contour"},null,544),[[Hn,v.value]])])]),M("div",bw,[D[40]||(D[40]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),M("div",ww,[mn(M("input",{type:"color","onUpdate:modelValue":D[16]||(D[16]=q=>l.value=q),class:"w-16 h-8 rounded border",onChange:D[17]||(D[17]=q=>H({fillColor:l.value})),title:"Couleur de remplissage"},null,544),[[Hn,l.value]]),mn(M("input",{type:"range","onUpdate:modelValue":D[18]||(D[18]=q=>f.value=q),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:D[19]||(D[19]=q=>H({fillOpacity:f.value})),title:"Opacit du remplissage"},null,544),[[Hn,f.value]])])]),M("div",xw,[D[41]||(D[41]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Texte",-1)),M("div",Lw,[mn(M("input",{type:"color","onUpdate:modelValue":D[20]||(D[20]=q=>w.value=q),class:"w-16 h-8 rounded border",onChange:D[21]||(D[21]=q=>V({textColor:w.value})),title:"Couleur du texte"},null,544),[[Hn,w.value]])])]),M("div",Cw,[D[43]||(D[43]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Police",-1)),M("div",Pw,[mn(M("select",{"onUpdate:modelValue":D[22]||(D[22]=q=>S.value=q),class:"w-full rounded border",onChange:D[23]||(D[23]=q=>V({fontFamily:S.value}))},D[42]||(D[42]=[gc('<option value="Arial, sans-serif" data-v-4c5f2c80>Arial</option><option value="&#39;Times New Roman&#39;, serif" data-v-4c5f2c80>Times</option><option value="&#39;Courier New&#39;, monospace" data-v-4c5f2c80>Courier</option><option value="Georgia, serif" data-v-4c5f2c80>Georgia</option><option value="Verdana, sans-serif" data-v-4c5f2c80>Verdana</option>',5)]),544),[[qs,S.value]])])]),M("div",kw,[D[44]||(D[44]=M("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Align.",-1)),M("div",Sw,[(se(),ce(_n,null,Gn(J,q=>M("button",{key:q.value,class:Di(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":X.value===q.value}]),onClick:dt=>V({textAlign:q.value}),title:q.label},[M("span",{innerHTML:q.icon},null,8,Aw)],10,Ew)),64)),M("button",{class:Di(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":R.value}]),onClick:z,title:"Gras"}," B ",2),M("button",{class:Di(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200 text-blue-700":N.value}]),onClick:mt,title:"Italique"}," I ",2)])])])):en("",!0)],512),[[ch,!j.value.style]])])):en("",!0),$.selectedShape&&o.value&&o.value.type!=="TextRectangle"?(se(),ce("div",Mw,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:D[24]||(D[24]=q=>Et("properties"))},[D[46]||(D[46]=M("span",null,"Proprits",-1)),(se(),ce("svg",{class:Di(["w-4 h-4",{"rotate-180":!j.value.properties}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[45]||(D[45]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),mn(M("div",Bw,[o.value?(se(),ce("div",Tw,[M("div",Dw,[o.value.type==="Circle"?(se(),ce(_n,{key:0},[D[47]||(D[47]=M("span",{class:"text-sm font-semibold text-gray-700"},"Rayon :",-1)),M("span",Nw,Pe(ft(o.value.radius||0)),1),D[48]||(D[48]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",Ow,Pe(ht(o.value.area||0)),1)],64)):o.value.type==="Rectangle"?(se(),ce(_n,{key:1},[D[49]||(D[49]=M("span",{class:"text-sm font-semibold text-gray-700"},"Largeur :",-1)),M("span",Rw,Pe(ft(o.value.width||0)),1),D[50]||(D[50]=M("span",{class:"text-sm font-semibold text-gray-700"},"Hauteur :",-1)),M("span",Iw,Pe(ft(o.value.height||0)),1),D[51]||(D[51]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",Fw,Pe(ht(o.value.area||0)),1)],64)):o.value.type==="Semicircle"?(se(),ce(_n,{key:2},[D[52]||(D[52]=M("span",{class:"text-sm font-semibold text-gray-700"},"Rayon :",-1)),M("span",jw,Pe(ft(o.value.radius||0)),1),D[53]||(D[53]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",zw,Pe(ht(o.value.area||0)),1),D[54]||(D[54]=M("span",{class:"text-sm font-semibold text-gray-700"},"Angle :",-1)),M("span",Uw,Pe(I(o.value.openingAngle||0)),1)],64)):o.value.type==="Line"?(se(),ce(_n,{key:3},[D[55]||(D[55]=M("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),M("span",qw,Pe(ft(o.value.length||0)),1)],64)):o.value.type==="Polygon"?(se(),ce(_n,{key:4},[D[56]||(D[56]=M("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),M("span",$w,Pe(ht(o.value.area||0)),1),D[57]||(D[57]=M("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),M("span",Vw,Pe(ft(o.value.perimeter||0)),1)],64)):o.value.type==="ElevationLine"?(se(),ce(_n,{key:5},[D[58]||(D[58]=M("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),M("span",Hw,Pe(ft(o.value.length||0)),1),D[59]||(D[59]=M("span",{class:"text-sm font-semibold text-gray-700"},"Altitude min :",-1)),M("span",Gw,Pe(ft(o.value.minElevation||0)),1),D[60]||(D[60]=M("span",{class:"text-sm font-semibold text-gray-700"},"Altitude max :",-1)),M("span",Ww,Pe(ft(o.value.maxElevation||0)),1),D[61]||(D[61]=M("span",{class:"text-sm font-semibold text-gray-700"},"Dnivel + :",-1)),M("span",Zw,Pe(ft(o.value.elevationGain||0)),1),D[62]||(D[62]=M("span",{class:"text-sm font-semibold text-gray-700"},"Dnivel - :",-1)),M("span",Kw,Pe(ft(o.value.elevationLoss||0)),1)],64)):en("",!0)])])):(se(),ce("div",Yw," Aucune proprit disponible "))],512),[[ch,!j.value.properties]])])):en("",!0),$.selectedShape&&o.value&&o.value.type==="ElevationLine"?(se(),ce("div",Jw,[M("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:D[25]||(D[25]=q=>Et("samplePoints"))},[D[64]||(D[64]=M("span",null,"Points d'chantillonnage",-1)),(se(),ce("svg",{class:Di(["w-4 h-4",{"rotate-180":!j.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[63]||(D[63]=[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),mn(M("div",Xw,[M("div",Qw,[D[69]||(D[69]=M("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),M("div",tx,[M("div",null,[D[65]||(D[65]=M("label",{class:"text-xs text-gray-600"},"Taille",-1)),mn(M("input",{type:"number","onUpdate:modelValue":D[26]||(D[26]=q=>U.value.radius=q),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:it},null,544),[[Hn,U.value.radius]])]),M("div",null,[D[66]||(D[66]=M("label",{class:"text-xs text-gray-600"},"Couleur",-1)),mn(M("input",{type:"color","onUpdate:modelValue":D[27]||(D[27]=q=>U.value.color=q),class:"w-full h-8 px-1 border rounded",onChange:it},null,544),[[Hn,U.value.color]])]),M("div",null,[D[67]||(D[67]=M("label",{class:"text-xs text-gray-600"},"Opacit",-1)),mn(M("input",{type:"range","onUpdate:modelValue":D[28]||(D[28]=q=>U.value.fillOpacity=q),min:"0",max:"1",step:"0.1",class:"w-full",onChange:it},null,544),[[Hn,U.value.fillOpacity]])]),M("div",null,[D[68]||(D[68]=M("label",{class:"text-xs text-gray-600"},"Bordure",-1)),mn(M("input",{type:"number","onUpdate:modelValue":D[29]||(D[29]=q=>U.value.weight=q),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:it},null,544),[[Hn,U.value.weight]])])])]),M("div",null,[D[73]||(D[73]=M("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),M("div",ex,[M("div",null,[D[70]||(D[70]=M("label",{class:"text-xs text-gray-600"},"Taille",-1)),mn(M("input",{type:"number","onUpdate:modelValue":D[30]||(D[30]=q=>W.value.radius=q),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:rt},null,544),[[Hn,W.value.radius]])]),M("div",null,[D[71]||(D[71]=M("label",{class:"text-xs text-gray-600"},"Bordure",-1)),mn(M("input",{type:"number","onUpdate:modelValue":D[31]||(D[31]=q=>W.value.weight=q),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:rt},null,544),[[Hn,W.value.weight]])]),M("div",null,[D[72]||(D[72]=M("label",{class:"text-xs text-gray-600"},"Opacit",-1)),mn(M("input",{type:"range","onUpdate:modelValue":D[32]||(D[32]=q=>W.value.fillOpacity=q),min:"0",max:"1",step:"0.1",class:"w-full",onChange:rt},null,544),[[Hn,W.value.fillOpacity]])])])])],512),[[ch,!j.value.samplePoints]])])):en("",!0)]))}}),B1=(t,e)=>{const n=t.__vccOpts||t;for(const[i,o]of e)n[i]=o;return n},ix=B1(nx,[["__scopeId","data-v-4c5f2c80"]]),rx={class:"map-toolbar w-full"},sx={class:"hidden md:flex items-center space-x-2"},ox={class:"dropdown"},ax={class:"btn-toolbar dropdown-toggle"},lx={class:"dropdown-menu"},ux=["onClick"],cx={key:0,class:"border-l pl-2 flex-1"},hx={class:"flex items-center"},fx={class:"plan-info"},dx={class:"plan-name"},px={key:0,class:"plan-description"},gx={class:"border-l pl-2 ml-auto"},mx={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},vx={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},yx={key:"saving"},_x={key:"success",class:"save-success-text"},bx={key:"default"},wx={class:"md:hidden"},xx={class:"flex justify-between items-center"},Lx={key:0,class:"truncate mx-2 text-sm font-medium"},Cx={key:0,class:"mobile-menu mt-2 bg-white shadow-md rounded p-2 z-50"},Px={class:"flex flex-col space-y-2"},kx={key:0,class:"flex flex-col pb-2 border-b"},Sx={class:"text-sm font-semibold text-gray-800"},Ex={key:0,class:"text-xs text-gray-600 mt-1"},Ax={class:"flex flex-col"},Mx={class:"grid grid-cols-2 gap-1"},Bx=["onClick"],Tx={key:0,class:"animate-spin h-3 w-3 mr-1 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Dx={key:1,class:"h-3 w-3 mr-1 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Nx={key:"saving"},Ox={key:"success",class:"save-success-text"},Rx={key:"default"},Ix=Ls({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,i=t,o=Ie("Ville"),a=Ie(!1),l={Ville:"Ville",Satellite:"Satellite",Cadastre:"Cadastre"},f=jn(()=>i.lastSave?new Date(i.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),p=N=>{o.value=N,n("change-map-type",N),R()},v=()=>{n("create-new-plan"),R()},b=()=>{n("load-plan"),R()},w=()=>{n("save-plan"),R()},S=()=>{n("adjust-view"),R()},x=()=>{n("generate-summary"),R()},R=()=>{a.value=!1};return(N,j)=>(se(),ce("div",rx,[M("div",sx,[M("div",ox,[M("button",ax,[j[1]||(j[1]=M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),M("span",null,Pe(l[o.value]),1)]),M("div",lx,[(se(),ce(_n,null,Gn(l,(U,W)=>M("button",{key:W,class:Di(["dropdown-item",{active:W===o.value}]),onClick:X=>p(W)},Pe(U),11,ux)),64))])]),N.planName?(se(),ce("div",cx,[M("div",hx,[M("div",fx,[M("h2",dx,Pe(N.planName),1),N.planDescription?(se(),ce("p",px,Pe(N.planDescription),1)):en("",!0)])])])):en("",!0),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:v,class:"btn-toolbar",title:"Nouveau plan"},j[2]||(j[2]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),M("button",{onClick:b,class:"btn-toolbar",title:"Charger un plan"},j[3]||(j[3]=[gc('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-78135262><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-78135262></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-78135262></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-78135262></path></svg><span class="hidden lg:inline ml-1" data-v-78135262>Charger</span>',2)])),M("button",{onClick:w,class:"btn-toolbar",title:"Enregistrer le plan"},j[4]||(j[4]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),M("div",{class:"border-l pl-2"},[M("div",{class:"flex items-center space-x-1"},[M("button",{onClick:S,class:"btn-toolbar",title:"Ajuster la vue"},j[5]||(j[5]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),M("button",{onClick:x,class:"btn-toolbar",title:"Gnrer une synthse"},j[6]||(j[6]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),M("span",{class:"hidden lg:inline ml-1"},"Synthse",-1)]))])]),M("div",gx,[M("div",{class:Di(["text-xs hidden lg:flex items-center",{"text-gray-500":!N.saveStatus,"text-primary-600 font-medium":N.saveStatus==="success","text-blue-600 font-medium":N.saveStatus==="saving"}])},[N.saveStatus==="saving"?(se(),ce("svg",mx,j[7]||(j[7]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):en("",!0),N.saveStatus==="success"?(se(),ce("svg",vx,j[8]||(j[8]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):en("",!0),Ai(jp,{name:"fade-slide",mode:"out-in"},{default:Ja(()=>[N.saveStatus==="saving"?(se(),ce("span",yx," Sauvegarde en cours... ")):N.saveStatus==="success"?(se(),ce("span",_x," Sauvegarde russie ! ")):(se(),ce("span",bx," Dernire modification : "+Pe(f.value),1))]),_:1})],2)])]),M("div",wx,[M("div",xx,[M("button",{onClick:j[0]||(j[0]=U=>a.value=!a.value),class:"p-1 rounded border"},j[9]||(j[9]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),N.planName?(se(),ce("div",Lx,Pe(N.planName),1)):en("",!0),M("div",{class:"flex space-x-1"},[M("button",{onClick:v,class:"p-1 rounded border bg-white"},j[10]||(j[10]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),M("button",{onClick:w,class:"p-1 rounded border bg-white"},j[11]||(j[11]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),M("button",{onClick:S,class:"p-1 rounded border bg-white"},j[12]||(j[12]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),a.value?(se(),ce("div",Cx,[M("div",Px,[N.planName?(se(),ce("div",kx,[M("h3",Sx,Pe(N.planName),1),N.planDescription?(se(),ce("p",Ex,Pe(N.planDescription),1)):en("",!0)])):en("",!0),M("div",Ax,[j[13]||(j[13]=M("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Type de carte",-1)),M("div",Mx,[(se(),ce(_n,null,Gn(l,(U,W)=>M("button",{key:W,class:Di(["px-2 py-1 text-xs rounded border",{"bg-blue-50 border-blue-200 text-blue-700":W===o.value}]),onClick:X=>p(W)},Pe(U),11,Bx)),64))])]),M("div",{class:"flex flex-col"},[j[16]||(j[16]=M("span",{class:"text-xs font-medium text-gray-500 mb-1"},"Outils de plan",-1)),M("div",{class:"grid grid-cols-2 gap-1"},[M("button",{onClick:b,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},j[14]||(j[14]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),M("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),M("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Gi(" Charger ")])),M("button",{onClick:x,class:"px-2 py-1 text-xs rounded border flex items-center justify-center"},j[15]||(j[15]=[M("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),Gi(" Synthse ")]))])]),M("div",{class:Di(["text-xs text-center pt-1 border-t flex items-center justify-center space-x-1",{"text-gray-500":!N.saveStatus,"text-primary-600 font-medium":N.saveStatus==="success","text-blue-600 font-medium":N.saveStatus==="saving"}])},[N.saveStatus==="saving"?(se(),ce("svg",Tx,j[17]||(j[17]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):en("",!0),N.saveStatus==="success"?(se(),ce("svg",Dx,j[18]||(j[18]=[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):en("",!0),Ai(jp,{name:"fade-slide",mode:"out-in"},{default:Ja(()=>[N.saveStatus==="saving"?(se(),ce("span",Nx," Sauvegarde en cours... ")):N.saveStatus==="success"?(se(),ce("span",Ox," Sauvegarde russie ! ")):(se(),ce("span",Rx," Dernire modification : "+Pe(f.value),1))]),_:1})],2)])])):en("",!0)])]))}}),Fx=B1(Ix,[["__scopeId","data-v-78135262"]]);(()=>{var Ve,fn;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,o=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,l=(s,u)=>()=>(u||s((u={exports:{}}).exports,u),u.exports),f=(s,u,h,g)=>{if(u&&typeof u=="object"||typeof u=="function")for(let y of i(u))!a.call(s,y)&&y!==h&&e(s,y,{get:()=>u[y],enumerable:!(g=n(u,y))||g.enumerable});return s},p=(s,u,h)=>(h=s!=null?t(o(s)):{},f(u||!s||!s.__esModule?e(h,"default",{value:s,enumerable:!0}):h,s)),v=l((s,u)=>{function h(){this.__data__=[],this.size=0}u.exports=h}),b=l((s,u)=>{function h(g,y){return g===y||g!==g&&y!==y}u.exports=h}),w=l((s,u)=>{var h=b();function g(y,P){for(var B=y.length;B--;)if(h(y[B][0],P))return B;return-1}u.exports=g}),S=l((s,u)=>{var h=w(),g=Array.prototype,y=g.splice;function P(B){var T=this.__data__,K=h(T,B);if(K<0)return!1;var st=T.length-1;return K==st?T.pop():y.call(T,K,1),--this.size,!0}u.exports=P}),x=l((s,u)=>{var h=w();function g(y){var P=this.__data__,B=h(P,y);return B<0?void 0:P[B][1]}u.exports=g}),R=l((s,u)=>{var h=w();function g(y){return h(this.__data__,y)>-1}u.exports=g}),N=l((s,u)=>{var h=w();function g(y,P){var B=this.__data__,T=h(B,y);return T<0?(++this.size,B.push([y,P])):B[T][1]=P,this}u.exports=g}),j=l((s,u)=>{var h=v(),g=S(),y=x(),P=R(),B=N();function T(K){var st=-1,jt=K==null?0:K.length;for(this.clear();++st<jt;){var Dt=K[st];this.set(Dt[0],Dt[1])}}T.prototype.clear=h,T.prototype.delete=g,T.prototype.get=y,T.prototype.has=P,T.prototype.set=B,u.exports=T}),U=l((s,u)=>{var h=j();function g(){this.__data__=new h,this.size=0}u.exports=g}),W=l((s,u)=>{function h(g){var y=this.__data__,P=y.delete(g);return this.size=y.size,P}u.exports=h}),X=l((s,u)=>{function h(g){return this.__data__.get(g)}u.exports=h}),St=l((s,u)=>{function h(g){return this.__data__.has(g)}u.exports=h}),Mt=l((s,u)=>{var h=typeof Eo=="object"&&Eo&&Eo.Object===Object&&Eo;u.exports=h}),Nt=l((s,u)=>{var h=Mt(),g=typeof self=="object"&&self&&self.Object===Object&&self,y=h||g||Function("return this")();u.exports=y}),Lt=l((s,u)=>{var h=Nt(),g=h.Symbol;u.exports=g}),gt=l((s,u)=>{var h=Lt(),g=Object.prototype,y=g.hasOwnProperty,P=g.toString,B=h?h.toStringTag:void 0;function T(K){var st=y.call(K,B),jt=K[B];try{K[B]=void 0;var Dt=!0}catch{}var ie=P.call(K);return Dt&&(st?K[B]=jt:delete K[B]),ie}u.exports=T}),_t=l((s,u)=>{var h=Object.prototype,g=h.toString;function y(P){return g.call(P)}u.exports=y}),zt=l((s,u)=>{var h=Lt(),g=gt(),y=_t(),P="[object Null]",B="[object Undefined]",T=h?h.toStringTag:void 0;function K(st){return st==null?st===void 0?B:P:T&&T in Object(st)?g(st):y(st)}u.exports=K}),J=l((s,u)=>{function h(g){var y=typeof g;return g!=null&&(y=="object"||y=="function")}u.exports=h}),Z=l((s,u)=>{var h=zt(),g=J(),y="[object AsyncFunction]",P="[object Function]",B="[object GeneratorFunction]",T="[object Proxy]";function K(st){if(!g(st))return!1;var jt=h(st);return jt==P||jt==B||jt==y||jt==T}u.exports=K}),Et=l((s,u)=>{var h=Nt(),g=h["__core-js_shared__"];u.exports=g}),Bt=l((s,u)=>{var h=Et(),g=function(){var P=/[^.]+$/.exec(h&&h.keys&&h.keys.IE_PROTO||"");return P?"Symbol(src)_1."+P:""}();function y(P){return!!g&&g in P}u.exports=y}),A=l((s,u)=>{var h=Function.prototype,g=h.toString;function y(P){if(P!=null){try{return g.call(P)}catch{}try{return P+""}catch{}}return""}u.exports=y}),H=l((s,u)=>{var h=Z(),g=Bt(),y=J(),P=A(),B=/[\\^$.*+?()[\]{}|]/g,T=/^\[object .+?Constructor\]$/,K=Function.prototype,st=Object.prototype,jt=K.toString,Dt=st.hasOwnProperty,ie=RegExp("^"+jt.call(Dt).replace(B,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pe(Se){if(!y(Se)||g(Se))return!1;var Re=h(Se)?ie:T;return Re.test(P(Se))}u.exports=pe}),V=l((s,u)=>{function h(g,y){return g==null?void 0:g[y]}u.exports=h}),z=l((s,u)=>{var h=H(),g=V();function y(P,B){var T=g(P,B);return h(T)?T:void 0}u.exports=y}),mt=l((s,u)=>{var h=z(),g=Nt(),y=h(g,"Map");u.exports=y}),ft=l((s,u)=>{var h=z(),g=h(Object,"create");u.exports=g}),ht=l((s,u)=>{var h=ft();function g(){this.__data__=h?h(null):{},this.size=0}u.exports=g}),I=l((s,u)=>{function h(g){var y=this.has(g)&&delete this.__data__[g];return this.size-=y?1:0,y}u.exports=h}),it=l((s,u)=>{var h=ft(),g="__lodash_hash_undefined__",y=Object.prototype,P=y.hasOwnProperty;function B(T){var K=this.__data__;if(h){var st=K[T];return st===g?void 0:st}return P.call(K,T)?K[T]:void 0}u.exports=B}),rt=l((s,u)=>{var h=ft(),g=Object.prototype,y=g.hasOwnProperty;function P(B){var T=this.__data__;return h?T[B]!==void 0:y.call(T,B)}u.exports=P}),$=l((s,u)=>{var h=ft(),g="__lodash_hash_undefined__";function y(P,B){var T=this.__data__;return this.size+=this.has(P)?0:1,T[P]=h&&B===void 0?g:B,this}u.exports=y}),D=l((s,u)=>{var h=ht(),g=I(),y=it(),P=rt(),B=$();function T(K){var st=-1,jt=K==null?0:K.length;for(this.clear();++st<jt;){var Dt=K[st];this.set(Dt[0],Dt[1])}}T.prototype.clear=h,T.prototype.delete=g,T.prototype.get=y,T.prototype.has=P,T.prototype.set=B,u.exports=T}),q=l((s,u)=>{var h=D(),g=j(),y=mt();function P(){this.size=0,this.__data__={hash:new h,map:new(y||g),string:new h}}u.exports=P}),dt=l((s,u)=>{function h(g){var y=typeof g;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?g!=="__proto__":g===null}u.exports=h}),ct=l((s,u)=>{var h=dt();function g(y,P){var B=y.__data__;return h(P)?B[typeof P=="string"?"string":"hash"]:B.map}u.exports=g}),At=l((s,u)=>{var h=ct();function g(y){var P=h(this,y).delete(y);return this.size-=P?1:0,P}u.exports=g}),Ot=l((s,u)=>{var h=ct();function g(y){return h(this,y).get(y)}u.exports=g}),G=l((s,u)=>{var h=ct();function g(y){return h(this,y).has(y)}u.exports=g}),tt=l((s,u)=>{var h=ct();function g(y,P){var B=h(this,y),T=B.size;return B.set(y,P),this.size+=B.size==T?0:1,this}u.exports=g}),yt=l((s,u)=>{var h=q(),g=At(),y=Ot(),P=G(),B=tt();function T(K){var st=-1,jt=K==null?0:K.length;for(this.clear();++st<jt;){var Dt=K[st];this.set(Dt[0],Dt[1])}}T.prototype.clear=h,T.prototype.delete=g,T.prototype.get=y,T.prototype.has=P,T.prototype.set=B,u.exports=T}),vt=l((s,u)=>{var h=j(),g=mt(),y=yt(),P=200;function B(T,K){var st=this.__data__;if(st instanceof h){var jt=st.__data__;if(!g||jt.length<P-1)return jt.push([T,K]),this.size=++st.size,this;st=this.__data__=new y(jt)}return st.set(T,K),this.size=st.size,this}u.exports=B}),Y=l((s,u)=>{var h=j(),g=U(),y=W(),P=X(),B=St(),T=vt();function K(st){var jt=this.__data__=new h(st);this.size=jt.size}K.prototype.clear=g,K.prototype.delete=y,K.prototype.get=P,K.prototype.has=B,K.prototype.set=T,u.exports=K}),$t=l((s,u)=>{var h=z(),g=function(){try{var y=h(Object,"defineProperty");return y({},"",{}),y}catch{}}();u.exports=g}),ee=l((s,u)=>{var h=$t();function g(y,P,B){P=="__proto__"&&h?h(y,P,{configurable:!0,enumerable:!0,value:B,writable:!0}):y[P]=B}u.exports=g}),Ht=l((s,u)=>{var h=ee(),g=b();function y(P,B,T){(T!==void 0&&!g(P[B],T)||T===void 0&&!(B in P))&&h(P,B,T)}u.exports=y}),Rt=l((s,u)=>{function h(g){return function(y,P,B){for(var T=-1,K=Object(y),st=B(y),jt=st.length;jt--;){var Dt=st[g?jt:++T];if(P(K[Dt],Dt,K)===!1)break}return y}}u.exports=h}),wt=l((s,u)=>{var h=Rt(),g=h();u.exports=g}),oe=l((s,u)=>{var h=Nt(),g=typeof s=="object"&&s&&!s.nodeType&&s,y=g&&typeof u=="object"&&u&&!u.nodeType&&u,P=y&&y.exports===g,B=P?h.Buffer:void 0,T=B?B.allocUnsafe:void 0;function K(st,jt){if(jt)return st.slice();var Dt=st.length,ie=T?T(Dt):new st.constructor(Dt);return st.copy(ie),ie}u.exports=K}),ne=l((s,u)=>{var h=Nt(),g=h.Uint8Array;u.exports=g}),xe=l((s,u)=>{var h=ne();function g(y){var P=new y.constructor(y.byteLength);return new h(P).set(new h(y)),P}u.exports=g}),Ut=l((s,u)=>{var h=xe();function g(y,P){var B=P?h(y.buffer):y.buffer;return new y.constructor(B,y.byteOffset,y.length)}u.exports=g}),te=l((s,u)=>{function h(g,y){var P=-1,B=g.length;for(y||(y=Array(B));++P<B;)y[P]=g[P];return y}u.exports=h}),qe=l((s,u)=>{var h=J(),g=Object.create,y=function(){function P(){}return function(B){if(!h(B))return{};if(g)return g(B);P.prototype=B;var T=new P;return P.prototype=void 0,T}}();u.exports=y}),He=l((s,u)=>{function h(g,y){return function(P){return g(y(P))}}u.exports=h}),ze=l((s,u)=>{var h=He(),g=h(Object.getPrototypeOf,Object);u.exports=g}),Xe=l((s,u)=>{var h=Object.prototype;function g(y){var P=y&&y.constructor,B=typeof P=="function"&&P.prototype||h;return y===B}u.exports=g}),Oe=l((s,u)=>{var h=qe(),g=ze(),y=Xe();function P(B){return typeof B.constructor=="function"&&!y(B)?h(g(B)):{}}u.exports=P}),an=l((s,u)=>{function h(g){return g!=null&&typeof g=="object"}u.exports=h}),gn=l((s,u)=>{var h=zt(),g=an(),y="[object Arguments]";function P(B){return g(B)&&h(B)==y}u.exports=P}),di=l((s,u)=>{var h=gn(),g=an(),y=Object.prototype,P=y.hasOwnProperty,B=y.propertyIsEnumerable,T=h(function(){return arguments}())?h:function(K){return g(K)&&P.call(K,"callee")&&!B.call(K,"callee")};u.exports=T}),sn=l((s,u)=>{var h=Array.isArray;u.exports=h}),dn=l((s,u)=>{var h=9007199254740991;function g(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=h}u.exports=g}),Ze=l((s,u)=>{var h=Z(),g=dn();function y(P){return P!=null&&g(P.length)&&!h(P)}u.exports=y}),Sn=l((s,u)=>{var h=Ze(),g=an();function y(P){return g(P)&&h(P)}u.exports=y}),yi=l((s,u)=>{function h(){return!1}u.exports=h}),Tn=l((s,u)=>{var h=Nt(),g=yi(),y=typeof s=="object"&&s&&!s.nodeType&&s,P=y&&typeof u=="object"&&u&&!u.nodeType&&u,B=P&&P.exports===y,T=B?h.Buffer:void 0,K=T?T.isBuffer:void 0,st=K||g;u.exports=st}),li=l((s,u)=>{var h=zt(),g=ze(),y=an(),P="[object Object]",B=Function.prototype,T=Object.prototype,K=B.toString,st=T.hasOwnProperty,jt=K.call(Object);function Dt(ie){if(!y(ie)||h(ie)!=P)return!1;var pe=g(ie);if(pe===null)return!0;var Se=st.call(pe,"constructor")&&pe.constructor;return typeof Se=="function"&&Se instanceof Se&&K.call(Se)==jt}u.exports=Dt}),pi=l((s,u)=>{var h=zt(),g=dn(),y=an(),P="[object Arguments]",B="[object Array]",T="[object Boolean]",K="[object Date]",st="[object Error]",jt="[object Function]",Dt="[object Map]",ie="[object Number]",pe="[object Object]",Se="[object RegExp]",Re="[object Set]",Ue="[object String]",yn="[object WeakMap]",Ft="[object ArrayBuffer]",qt="[object DataView]",Jt="[object Float32Array]",ye="[object Float64Array]",ae="[object Int8Array]",ge="[object Int16Array]",Q="[object Int32Array]",ot="[object Uint8Array]",Ct="[object Uint8ClampedArray]",xt="[object Uint16Array]",Pt="[object Uint32Array]",kt={};kt[Jt]=kt[ye]=kt[ae]=kt[ge]=kt[Q]=kt[ot]=kt[Ct]=kt[xt]=kt[Pt]=!0,kt[P]=kt[B]=kt[Ft]=kt[T]=kt[qt]=kt[K]=kt[st]=kt[jt]=kt[Dt]=kt[ie]=kt[pe]=kt[Se]=kt[Re]=kt[Ue]=kt[yn]=!1;function Zt(Gt){return y(Gt)&&g(Gt.length)&&!!kt[h(Gt)]}u.exports=Zt}),Vn=l((s,u)=>{function h(g){return function(y){return g(y)}}u.exports=h}),je=l((s,u)=>{var h=Mt(),g=typeof s=="object"&&s&&!s.nodeType&&s,y=g&&typeof u=="object"&&u&&!u.nodeType&&u,P=y&&y.exports===g,B=P&&h.process,T=function(){try{var K=y&&y.require&&y.require("util").types;return K||B&&B.binding&&B.binding("util")}catch{}}();u.exports=T}),Ne=l((s,u)=>{var h=pi(),g=Vn(),y=je(),P=y&&y.isTypedArray,B=P?g(P):h;u.exports=B}),Ni=l((s,u)=>{function h(g,y){if(!(y==="constructor"&&typeof g[y]=="function")&&y!="__proto__")return g[y]}u.exports=h}),ui=l((s,u)=>{var h=ee(),g=b(),y=Object.prototype,P=y.hasOwnProperty;function B(T,K,st){var jt=T[K];(!(P.call(T,K)&&g(jt,st))||st===void 0&&!(K in T))&&h(T,K,st)}u.exports=B}),Fe=l((s,u)=>{var h=ui(),g=ee();function y(P,B,T,K){var st=!T;T||(T={});for(var jt=-1,Dt=B.length;++jt<Dt;){var ie=B[jt],pe=K?K(T[ie],P[ie],ie,T,P):void 0;pe===void 0&&(pe=P[ie]),st?g(T,ie,pe):h(T,ie,pe)}return T}u.exports=y}),ti=l((s,u)=>{function h(g,y){for(var P=-1,B=Array(g);++P<g;)B[P]=y(P);return B}u.exports=h}),Qe=l((s,u)=>{var h=9007199254740991,g=/^(?:0|[1-9]\d*)$/;function y(P,B){var T=typeof P;return B=B??h,!!B&&(T=="number"||T!="symbol"&&g.test(P))&&P>-1&&P%1==0&&P<B}u.exports=y}),ri=l((s,u)=>{var h=ti(),g=di(),y=sn(),P=Tn(),B=Qe(),T=Ne(),K=Object.prototype,st=K.hasOwnProperty;function jt(Dt,ie){var pe=y(Dt),Se=!pe&&g(Dt),Re=!pe&&!Se&&P(Dt),Ue=!pe&&!Se&&!Re&&T(Dt),yn=pe||Se||Re||Ue,Ft=yn?h(Dt.length,String):[],qt=Ft.length;for(var Jt in Dt)(ie||st.call(Dt,Jt))&&!(yn&&(Jt=="length"||Re&&(Jt=="offset"||Jt=="parent")||Ue&&(Jt=="buffer"||Jt=="byteLength"||Jt=="byteOffset")||B(Jt,qt)))&&Ft.push(Jt);return Ft}u.exports=jt}),Rr=l((s,u)=>{function h(g){var y=[];if(g!=null)for(var P in Object(g))y.push(P);return y}u.exports=h}),Wi=l((s,u)=>{var h=J(),g=Xe(),y=Rr(),P=Object.prototype,B=P.hasOwnProperty;function T(K){if(!h(K))return y(K);var st=g(K),jt=[];for(var Dt in K)Dt=="constructor"&&(st||!B.call(K,Dt))||jt.push(Dt);return jt}u.exports=T}),qn=l((s,u)=>{var h=ri(),g=Wi(),y=Ze();function P(B){return y(B)?h(B,!0):g(B)}u.exports=P}),$e=l((s,u)=>{var h=Fe(),g=qn();function y(P){return h(P,g(P))}u.exports=y}),Zi=l((s,u)=>{var h=Ht(),g=oe(),y=Ut(),P=te(),B=Oe(),T=di(),K=sn(),st=Sn(),jt=Tn(),Dt=Z(),ie=J(),pe=li(),Se=Ne(),Re=Ni(),Ue=$e();function yn(Ft,qt,Jt,ye,ae,ge,Q){var ot=Re(Ft,Jt),Ct=Re(qt,Jt),xt=Q.get(Ct);if(xt){h(Ft,Jt,xt);return}var Pt=ge?ge(ot,Ct,Jt+"",Ft,qt,Q):void 0,kt=Pt===void 0;if(kt){var Zt=K(Ct),Gt=!Zt&&jt(Ct),Xt=!Zt&&!Gt&&Se(Ct);Pt=Ct,Zt||Gt||Xt?K(ot)?Pt=ot:st(ot)?Pt=P(ot):Gt?(kt=!1,Pt=g(Ct,!0)):Xt?(kt=!1,Pt=y(Ct,!0)):Pt=[]:pe(Ct)||T(Ct)?(Pt=ot,T(ot)?Pt=Ue(ot):(!ie(ot)||Dt(ot))&&(Pt=B(Ct))):kt=!1}kt&&(Q.set(Ct,Pt),ae(Pt,Ct,ye,ge,Q),Q.delete(Ct)),h(Ft,Jt,Pt)}u.exports=yn}),Cs=l((s,u)=>{var h=Y(),g=Ht(),y=wt(),P=Zi(),B=J(),T=qn(),K=Ni();function st(jt,Dt,ie,pe,Se){jt!==Dt&&y(Dt,function(Re,Ue){if(Se||(Se=new h),B(Re))P(jt,Dt,Ue,ie,st,pe,Se);else{var yn=pe?pe(K(jt,Ue),Re,Ue+"",jt,Dt,Se):void 0;yn===void 0&&(yn=Re),g(jt,Ue,yn)}},T)}u.exports=st}),Cr=l((s,u)=>{function h(g){return g}u.exports=h}),pr=l((s,u)=>{function h(g,y,P){switch(P.length){case 0:return g.call(y);case 1:return g.call(y,P[0]);case 2:return g.call(y,P[0],P[1]);case 3:return g.call(y,P[0],P[1],P[2])}return g.apply(y,P)}u.exports=h}),rr=l((s,u)=>{var h=pr(),g=Math.max;function y(P,B,T){return B=g(B===void 0?P.length-1:B,0),function(){for(var K=arguments,st=-1,jt=g(K.length-B,0),Dt=Array(jt);++st<jt;)Dt[st]=K[B+st];st=-1;for(var ie=Array(B+1);++st<B;)ie[st]=K[st];return ie[B]=T(Dt),h(P,this,ie)}}u.exports=y}),gr=l((s,u)=>{function h(g){return function(){return g}}u.exports=h}),Ui=l((s,u)=>{var h=gr(),g=$t(),y=Cr(),P=g?function(B,T){return g(B,"toString",{configurable:!0,enumerable:!1,value:h(T),writable:!0})}:y;u.exports=P}),sr=l((s,u)=>{var h=800,g=16,y=Date.now;function P(B){var T=0,K=0;return function(){var st=y(),jt=g-(st-K);if(K=st,jt>0){if(++T>=h)return arguments[0]}else T=0;return B.apply(void 0,arguments)}}u.exports=P}),Ir=l((s,u)=>{var h=Ui(),g=sr(),y=g(h);u.exports=y}),Ps=l((s,u)=>{var h=Cr(),g=rr(),y=Ir();function P(B,T){return y(g(B,T,h),B+"")}u.exports=P}),Hs=l((s,u)=>{var h=b(),g=Ze(),y=Qe(),P=J();function B(T,K,st){if(!P(st))return!1;var jt=typeof K;return(jt=="number"?g(st)&&y(K,st.length):jt=="string"&&K in st)?h(st[K],T):!1}u.exports=B}),Gs=l((s,u)=>{var h=Ps(),g=Hs();function y(P){return h(function(B,T){var K=-1,st=T.length,jt=st>1?T[st-1]:void 0,Dt=st>2?T[2]:void 0;for(jt=P.length>3&&typeof jt=="function"?(st--,jt):void 0,Dt&&g(T[0],T[1],Dt)&&(jt=st<3?void 0:jt,st=1),B=Object(B);++K<st;){var ie=T[K];ie&&P(B,ie,K,jt)}return B})}u.exports=y}),$r=l((s,u)=>{var h=Cs(),g=Gs(),y=g(function(P,B,T){h(P,B,T)});u.exports=y}),us=l((s,u)=>{var h=zt(),g=an(),y="[object Symbol]";function P(B){return typeof B=="symbol"||g(B)&&h(B)==y}u.exports=P}),ks=l((s,u)=>{var h=sn(),g=us(),y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P=/^\w*$/;function B(T,K){if(h(T))return!1;var st=typeof T;return st=="number"||st=="symbol"||st=="boolean"||T==null||g(T)?!0:P.test(T)||!y.test(T)||K!=null&&T in Object(K)}u.exports=B}),na=l((s,u)=>{var h=yt(),g="Expected a function";function y(P,B){if(typeof P!="function"||B!=null&&typeof B!="function")throw new TypeError(g);var T=function(){var K=arguments,st=B?B.apply(this,K):K[0],jt=T.cache;if(jt.has(st))return jt.get(st);var Dt=P.apply(this,K);return T.cache=jt.set(st,Dt)||jt,Dt};return T.cache=new(y.Cache||h),T}y.Cache=h,u.exports=y}),ia=l((s,u)=>{var h=na(),g=500;function y(P){var B=h(P,function(K){return T.size===g&&T.clear(),K}),T=B.cache;return B}u.exports=y}),Ws=l((s,u)=>{var h=ia(),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/\\(\\)?/g,P=h(function(B){var T=[];return B.charCodeAt(0)===46&&T.push(""),B.replace(g,function(K,st,jt,Dt){T.push(jt?Dt.replace(y,"$1"):st||K)}),T});u.exports=P}),Do=l((s,u)=>{function h(g,y){for(var P=-1,B=g==null?0:g.length,T=Array(B);++P<B;)T[P]=y(g[P],P,g);return T}u.exports=h}),ra=l((s,u)=>{var h=Lt(),g=Do(),y=sn(),P=us(),B=h?h.prototype:void 0,T=B?B.toString:void 0;function K(st){if(typeof st=="string")return st;if(y(st))return g(st,K)+"";if(P(st))return T?T.call(st):"";var jt=st+"";return jt=="0"&&1/st==-1/0?"-0":jt}u.exports=K}),Ss=l((s,u)=>{var h=ra();function g(y){return y==null?"":h(y)}u.exports=g}),Es=l((s,u)=>{var h=sn(),g=ks(),y=Ws(),P=Ss();function B(T,K){return h(T)?T:g(T,K)?[T]:y(P(T))}u.exports=B}),uo=l((s,u)=>{var h=us();function g(y){if(typeof y=="string"||h(y))return y;var P=y+"";return P=="0"&&1/y==-1/0?"-0":P}u.exports=g}),No=l((s,u)=>{var h=Es(),g=uo();function y(P,B){B=h(B,P);for(var T=0,K=B.length;P!=null&&T<K;)P=P[g(B[T++])];return T&&T==K?P:void 0}u.exports=y}),or=l((s,u)=>{var h=No();function g(y,P,B){var T=y==null?void 0:h(y,P);return T===void 0?B:T}u.exports=g}),Dn=l((s,u)=>{(function(h,g){typeof s=="object"&&typeof u<"u"?u.exports=g():(h=h||self).RBush=g()})(s,function(){function h(Ft,qt,Jt,ye,ae){(function ge(Q,ot,Ct,xt,Pt){for(;xt>Ct;){if(xt-Ct>600){var kt=xt-Ct+1,Zt=ot-Ct+1,Gt=Math.log(kt),Xt=.5*Math.exp(2*Gt/3),fe=.5*Math.sqrt(Gt*Xt*(kt-Xt)/kt)*(Zt-kt/2<0?-1:1),he=Math.max(Ct,Math.floor(ot-Zt*Xt/kt+fe)),Ae=Math.min(xt,Math.floor(ot+(kt-Zt)*Xt/kt+fe));ge(Q,ot,he,Ae,Pt)}var Ke=Q[ot],tn=Ct,on=xt;for(g(Q,Ct,ot),Pt(Q[xt],Ke)>0&&g(Q,Ct,xt);tn<on;){for(g(Q,tn,on),tn++,on--;Pt(Q[tn],Ke)<0;)tn++;for(;Pt(Q[on],Ke)>0;)on--}Pt(Q[Ct],Ke)===0?g(Q,Ct,on):g(Q,++on,xt),on<=ot&&(Ct=on+1),ot<=on&&(xt=on-1)}})(Ft,qt,Jt||0,ye||Ft.length-1,ae||y)}function g(Ft,qt,Jt){var ye=Ft[qt];Ft[qt]=Ft[Jt],Ft[Jt]=ye}function y(Ft,qt){return Ft<qt?-1:Ft>qt?1:0}var P=function(Ft){Ft===void 0&&(Ft=9),this._maxEntries=Math.max(4,Ft),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function B(Ft,qt,Jt){if(!Jt)return qt.indexOf(Ft);for(var ye=0;ye<qt.length;ye++)if(Jt(Ft,qt[ye]))return ye;return-1}function T(Ft,qt){K(Ft,0,Ft.children.length,qt,Ft)}function K(Ft,qt,Jt,ye,ae){ae||(ae=Ue(null)),ae.minX=1/0,ae.minY=1/0,ae.maxX=-1/0,ae.maxY=-1/0;for(var ge=qt;ge<Jt;ge++){var Q=Ft.children[ge];st(ae,Ft.leaf?ye(Q):Q)}return ae}function st(Ft,qt){return Ft.minX=Math.min(Ft.minX,qt.minX),Ft.minY=Math.min(Ft.minY,qt.minY),Ft.maxX=Math.max(Ft.maxX,qt.maxX),Ft.maxY=Math.max(Ft.maxY,qt.maxY),Ft}function jt(Ft,qt){return Ft.minX-qt.minX}function Dt(Ft,qt){return Ft.minY-qt.minY}function ie(Ft){return(Ft.maxX-Ft.minX)*(Ft.maxY-Ft.minY)}function pe(Ft){return Ft.maxX-Ft.minX+(Ft.maxY-Ft.minY)}function Se(Ft,qt){return Ft.minX<=qt.minX&&Ft.minY<=qt.minY&&qt.maxX<=Ft.maxX&&qt.maxY<=Ft.maxY}function Re(Ft,qt){return qt.minX<=Ft.maxX&&qt.minY<=Ft.maxY&&qt.maxX>=Ft.minX&&qt.maxY>=Ft.minY}function Ue(Ft){return{children:Ft,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function yn(Ft,qt,Jt,ye,ae){for(var ge=[qt,Jt];ge.length;)if(!((Jt=ge.pop())-(qt=ge.pop())<=ye)){var Q=qt+Math.ceil((Jt-qt)/ye/2)*ye;h(Ft,Q,qt,Jt,ae),ge.push(qt,Q,Q,Jt)}}return P.prototype.all=function(){return this._all(this.data,[])},P.prototype.search=function(Ft){var qt=this.data,Jt=[];if(!Re(Ft,qt))return Jt;for(var ye=this.toBBox,ae=[];qt;){for(var ge=0;ge<qt.children.length;ge++){var Q=qt.children[ge],ot=qt.leaf?ye(Q):Q;Re(Ft,ot)&&(qt.leaf?Jt.push(Q):Se(Ft,ot)?this._all(Q,Jt):ae.push(Q))}qt=ae.pop()}return Jt},P.prototype.collides=function(Ft){var qt=this.data;if(!Re(Ft,qt))return!1;for(var Jt=[];qt;){for(var ye=0;ye<qt.children.length;ye++){var ae=qt.children[ye],ge=qt.leaf?this.toBBox(ae):ae;if(Re(Ft,ge)){if(qt.leaf||Se(Ft,ge))return!0;Jt.push(ae)}}qt=Jt.pop()}return!1},P.prototype.load=function(Ft){if(!Ft||!Ft.length)return this;if(Ft.length<this._minEntries){for(var qt=0;qt<Ft.length;qt++)this.insert(Ft[qt]);return this}var Jt=this._build(Ft.slice(),0,Ft.length-1,0);if(this.data.children.length)if(this.data.height===Jt.height)this._splitRoot(this.data,Jt);else{if(this.data.height<Jt.height){var ye=this.data;this.data=Jt,Jt=ye}this._insert(Jt,this.data.height-Jt.height-1,!0)}else this.data=Jt;return this},P.prototype.insert=function(Ft){return Ft&&this._insert(Ft,this.data.height-1),this},P.prototype.clear=function(){return this.data=Ue([]),this},P.prototype.remove=function(Ft,qt){if(!Ft)return this;for(var Jt,ye,ae,ge=this.data,Q=this.toBBox(Ft),ot=[],Ct=[];ge||ot.length;){if(ge||(ge=ot.pop(),ye=ot[ot.length-1],Jt=Ct.pop(),ae=!0),ge.leaf){var xt=B(Ft,ge.children,qt);if(xt!==-1)return ge.children.splice(xt,1),ot.push(ge),this._condense(ot),this}ae||ge.leaf||!Se(ge,Q)?ye?(Jt++,ge=ye.children[Jt],ae=!1):ge=null:(ot.push(ge),Ct.push(Jt),Jt=0,ye=ge,ge=ge.children[0])}return this},P.prototype.toBBox=function(Ft){return Ft},P.prototype.compareMinX=function(Ft,qt){return Ft.minX-qt.minX},P.prototype.compareMinY=function(Ft,qt){return Ft.minY-qt.minY},P.prototype.toJSON=function(){return this.data},P.prototype.fromJSON=function(Ft){return this.data=Ft,this},P.prototype._all=function(Ft,qt){for(var Jt=[];Ft;)Ft.leaf?qt.push.apply(qt,Ft.children):Jt.push.apply(Jt,Ft.children),Ft=Jt.pop();return qt},P.prototype._build=function(Ft,qt,Jt,ye){var ae,ge=Jt-qt+1,Q=this._maxEntries;if(ge<=Q)return T(ae=Ue(Ft.slice(qt,Jt+1)),this.toBBox),ae;ye||(ye=Math.ceil(Math.log(ge)/Math.log(Q)),Q=Math.ceil(ge/Math.pow(Q,ye-1))),(ae=Ue([])).leaf=!1,ae.height=ye;var ot=Math.ceil(ge/Q),Ct=ot*Math.ceil(Math.sqrt(Q));yn(Ft,qt,Jt,Ct,this.compareMinX);for(var xt=qt;xt<=Jt;xt+=Ct){var Pt=Math.min(xt+Ct-1,Jt);yn(Ft,xt,Pt,ot,this.compareMinY);for(var kt=xt;kt<=Pt;kt+=ot){var Zt=Math.min(kt+ot-1,Pt);ae.children.push(this._build(Ft,kt,Zt,ye-1))}}return T(ae,this.toBBox),ae},P.prototype._chooseSubtree=function(Ft,qt,Jt,ye){for(;ye.push(qt),!qt.leaf&&ye.length-1!==Jt;){for(var ae=1/0,ge=1/0,Q=void 0,ot=0;ot<qt.children.length;ot++){var Ct=qt.children[ot],xt=ie(Ct),Pt=(kt=Ft,Zt=Ct,(Math.max(Zt.maxX,kt.maxX)-Math.min(Zt.minX,kt.minX))*(Math.max(Zt.maxY,kt.maxY)-Math.min(Zt.minY,kt.minY))-xt);Pt<ge?(ge=Pt,ae=xt<ae?xt:ae,Q=Ct):Pt===ge&&xt<ae&&(ae=xt,Q=Ct)}qt=Q||qt.children[0]}var kt,Zt;return qt},P.prototype._insert=function(Ft,qt,Jt){var ye=Jt?Ft:this.toBBox(Ft),ae=[],ge=this._chooseSubtree(ye,this.data,qt,ae);for(ge.children.push(Ft),st(ge,ye);qt>=0&&ae[qt].children.length>this._maxEntries;)this._split(ae,qt),qt--;this._adjustParentBBoxes(ye,ae,qt)},P.prototype._split=function(Ft,qt){var Jt=Ft[qt],ye=Jt.children.length,ae=this._minEntries;this._chooseSplitAxis(Jt,ae,ye);var ge=this._chooseSplitIndex(Jt,ae,ye),Q=Ue(Jt.children.splice(ge,Jt.children.length-ge));Q.height=Jt.height,Q.leaf=Jt.leaf,T(Jt,this.toBBox),T(Q,this.toBBox),qt?Ft[qt-1].children.push(Q):this._splitRoot(Jt,Q)},P.prototype._splitRoot=function(Ft,qt){this.data=Ue([Ft,qt]),this.data.height=Ft.height+1,this.data.leaf=!1,T(this.data,this.toBBox)},P.prototype._chooseSplitIndex=function(Ft,qt,Jt){for(var ye,ae,ge,Q,ot,Ct,xt,Pt=1/0,kt=1/0,Zt=qt;Zt<=Jt-qt;Zt++){var Gt=K(Ft,0,Zt,this.toBBox),Xt=K(Ft,Zt,Jt,this.toBBox),fe=(ae=Gt,ge=Xt,Q=void 0,ot=void 0,Ct=void 0,xt=void 0,Q=Math.max(ae.minX,ge.minX),ot=Math.max(ae.minY,ge.minY),Ct=Math.min(ae.maxX,ge.maxX),xt=Math.min(ae.maxY,ge.maxY),Math.max(0,Ct-Q)*Math.max(0,xt-ot)),he=ie(Gt)+ie(Xt);fe<Pt?(Pt=fe,ye=Zt,kt=he<kt?he:kt):fe===Pt&&he<kt&&(kt=he,ye=Zt)}return ye||Jt-qt},P.prototype._chooseSplitAxis=function(Ft,qt,Jt){var ye=Ft.leaf?this.compareMinX:jt,ae=Ft.leaf?this.compareMinY:Dt;this._allDistMargin(Ft,qt,Jt,ye)<this._allDistMargin(Ft,qt,Jt,ae)&&Ft.children.sort(ye)},P.prototype._allDistMargin=function(Ft,qt,Jt,ye){Ft.children.sort(ye);for(var ae=this.toBBox,ge=K(Ft,0,qt,ae),Q=K(Ft,Jt-qt,Jt,ae),ot=pe(ge)+pe(Q),Ct=qt;Ct<Jt-qt;Ct++){var xt=Ft.children[Ct];st(ge,Ft.leaf?ae(xt):xt),ot+=pe(ge)}for(var Pt=Jt-qt-1;Pt>=qt;Pt--){var kt=Ft.children[Pt];st(Q,Ft.leaf?ae(kt):kt),ot+=pe(Q)}return ot},P.prototype._adjustParentBBoxes=function(Ft,qt,Jt){for(var ye=Jt;ye>=0;ye--)st(qt[ye],Ft)},P.prototype._condense=function(Ft){for(var qt=Ft.length-1,Jt=void 0;qt>=0;qt--)Ft[qt].children.length===0?qt>0?(Jt=Ft[qt-1].children).splice(Jt.indexOf(Ft[qt]),1):this.clear():T(Ft[qt],this.toBBox)},P})}),rn=l(s=>{Object.defineProperty(s,"__esModule",{value:!0}),s.earthRadius=63710088e-1,s.factors={centimeters:s.earthRadius*100,centimetres:s.earthRadius*100,degrees:s.earthRadius/111325,feet:s.earthRadius*3.28084,inches:s.earthRadius*39.37,kilometers:s.earthRadius/1e3,kilometres:s.earthRadius/1e3,meters:s.earthRadius,metres:s.earthRadius,miles:s.earthRadius/1609.344,millimeters:s.earthRadius*1e3,millimetres:s.earthRadius*1e3,nauticalmiles:s.earthRadius/1852,radians:1,yards:s.earthRadius*1.0936},s.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/s.earthRadius,yards:1.0936133},s.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function u(xt,Pt,kt){kt===void 0&&(kt={});var Zt={type:"Feature"};return(kt.id===0||kt.id)&&(Zt.id=kt.id),kt.bbox&&(Zt.bbox=kt.bbox),Zt.properties=Pt||{},Zt.geometry=xt,Zt}s.feature=u;function h(xt,Pt,kt){switch(xt){case"Point":return g(Pt).geometry;case"LineString":return T(Pt).geometry;case"Polygon":return P(Pt).geometry;case"MultiPoint":return Dt(Pt).geometry;case"MultiLineString":return jt(Pt).geometry;case"MultiPolygon":return ie(Pt).geometry;default:throw new Error(xt+" is invalid")}}s.geometry=h;function g(xt,Pt,kt){if(kt===void 0&&(kt={}),!xt)throw new Error("coordinates is required");if(!Array.isArray(xt))throw new Error("coordinates must be an Array");if(xt.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ge(xt[0])||!ge(xt[1]))throw new Error("coordinates must contain numbers");var Zt={type:"Point",coordinates:xt};return u(Zt,Pt,kt)}s.point=g;function y(xt,Pt,kt){return kt===void 0&&(kt={}),st(xt.map(function(Zt){return g(Zt,Pt)}),kt)}s.points=y;function P(xt,Pt,kt){kt===void 0&&(kt={});for(var Zt=0,Gt=xt;Zt<Gt.length;Zt++){var Xt=Gt[Zt];if(Xt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var fe=0;fe<Xt[Xt.length-1].length;fe++)if(Xt[Xt.length-1][fe]!==Xt[0][fe])throw new Error("First and last Position are not equivalent.")}var he={type:"Polygon",coordinates:xt};return u(he,Pt,kt)}s.polygon=P;function B(xt,Pt,kt){return kt===void 0&&(kt={}),st(xt.map(function(Zt){return P(Zt,Pt)}),kt)}s.polygons=B;function T(xt,Pt,kt){if(kt===void 0&&(kt={}),xt.length<2)throw new Error("coordinates must be an array of two or more positions");var Zt={type:"LineString",coordinates:xt};return u(Zt,Pt,kt)}s.lineString=T;function K(xt,Pt,kt){return kt===void 0&&(kt={}),st(xt.map(function(Zt){return T(Zt,Pt)}),kt)}s.lineStrings=K;function st(xt,Pt){Pt===void 0&&(Pt={});var kt={type:"FeatureCollection"};return Pt.id&&(kt.id=Pt.id),Pt.bbox&&(kt.bbox=Pt.bbox),kt.features=xt,kt}s.featureCollection=st;function jt(xt,Pt,kt){kt===void 0&&(kt={});var Zt={type:"MultiLineString",coordinates:xt};return u(Zt,Pt,kt)}s.multiLineString=jt;function Dt(xt,Pt,kt){kt===void 0&&(kt={});var Zt={type:"MultiPoint",coordinates:xt};return u(Zt,Pt,kt)}s.multiPoint=Dt;function ie(xt,Pt,kt){kt===void 0&&(kt={});var Zt={type:"MultiPolygon",coordinates:xt};return u(Zt,Pt,kt)}s.multiPolygon=ie;function pe(xt,Pt,kt){kt===void 0&&(kt={});var Zt={type:"GeometryCollection",geometries:xt};return u(Zt,Pt,kt)}s.geometryCollection=pe;function Se(xt,Pt){if(Pt===void 0&&(Pt=0),Pt&&!(Pt>=0))throw new Error("precision must be a positive number");var kt=Math.pow(10,Pt||0);return Math.round(xt*kt)/kt}s.round=Se;function Re(xt,Pt){Pt===void 0&&(Pt="kilometers");var kt=s.factors[Pt];if(!kt)throw new Error(Pt+" units is invalid");return xt*kt}s.radiansToLength=Re;function Ue(xt,Pt){Pt===void 0&&(Pt="kilometers");var kt=s.factors[Pt];if(!kt)throw new Error(Pt+" units is invalid");return xt/kt}s.lengthToRadians=Ue;function yn(xt,Pt){return qt(Ue(xt,Pt))}s.lengthToDegrees=yn;function Ft(xt){var Pt=xt%360;return Pt<0&&(Pt+=360),Pt}s.bearingToAzimuth=Ft;function qt(xt){var Pt=xt%(2*Math.PI);return Pt*180/Math.PI}s.radiansToDegrees=qt;function Jt(xt){var Pt=xt%360;return Pt*Math.PI/180}s.degreesToRadians=Jt;function ye(xt,Pt,kt){if(Pt===void 0&&(Pt="kilometers"),kt===void 0&&(kt="kilometers"),!(xt>=0))throw new Error("length must be a positive number");return Re(Ue(xt,Pt),kt)}s.convertLength=ye;function ae(xt,Pt,kt){if(Pt===void 0&&(Pt="meters"),kt===void 0&&(kt="kilometers"),!(xt>=0))throw new Error("area must be a positive number");var Zt=s.areaFactors[Pt];if(!Zt)throw new Error("invalid original units");var Gt=s.areaFactors[kt];if(!Gt)throw new Error("invalid final units");return xt/Zt*Gt}s.convertArea=ae;function ge(xt){return!isNaN(xt)&&xt!==null&&!Array.isArray(xt)}s.isNumber=ge;function Q(xt){return!!xt&&xt.constructor===Object}s.isObject=Q;function ot(xt){if(!xt)throw new Error("bbox is required");if(!Array.isArray(xt))throw new Error("bbox must be an Array");if(xt.length!==4&&xt.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");xt.forEach(function(Pt){if(!ge(Pt))throw new Error("bbox must only contain numbers")})}s.validateBBox=ot;function Ct(xt){if(!xt)throw new Error("id is required");if(["string","number"].indexOf(typeof xt)===-1)throw new Error("id must be a number or a string")}s.validateId=Ct}),ci=l(s=>{Object.defineProperty(s,"__esModule",{value:!0});var u=rn();function h(qt,Jt,ye){if(qt!==null)for(var ae,ge,Q,ot,Ct,xt,Pt,kt=0,Zt=0,Gt,Xt=qt.type,fe=Xt==="FeatureCollection",he=Xt==="Feature",Ae=fe?qt.features.length:1,Ke=0;Ke<Ae;Ke++){Pt=fe?qt.features[Ke].geometry:he?qt.geometry:qt,Gt=Pt?Pt.type==="GeometryCollection":!1,Ct=Gt?Pt.geometries.length:1;for(var tn=0;tn<Ct;tn++){var on=0,Wn=0;if(ot=Gt?Pt.geometries[tn]:Pt,ot!==null){xt=ot.coordinates;var Yn=ot.type;switch(kt=ye&&(Yn==="Polygon"||Yn==="MultiPolygon")?1:0,Yn){case null:break;case"Point":if(Jt(xt,Zt,Ke,on,Wn)===!1)return!1;Zt++,on++;break;case"LineString":case"MultiPoint":for(ae=0;ae<xt.length;ae++){if(Jt(xt[ae],Zt,Ke,on,Wn)===!1)return!1;Zt++,Yn==="MultiPoint"&&on++}Yn==="LineString"&&on++;break;case"Polygon":case"MultiLineString":for(ae=0;ae<xt.length;ae++){for(ge=0;ge<xt[ae].length-kt;ge++){if(Jt(xt[ae][ge],Zt,Ke,on,Wn)===!1)return!1;Zt++}Yn==="MultiLineString"&&on++,Yn==="Polygon"&&Wn++}Yn==="Polygon"&&on++;break;case"MultiPolygon":for(ae=0;ae<xt.length;ae++){for(Wn=0,ge=0;ge<xt[ae].length;ge++){for(Q=0;Q<xt[ae][ge].length-kt;Q++){if(Jt(xt[ae][ge][Q],Zt,Ke,on,Wn)===!1)return!1;Zt++}Wn++}on++}break;case"GeometryCollection":for(ae=0;ae<ot.geometries.length;ae++)if(h(ot.geometries[ae],Jt,ye)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function g(qt,Jt,ye,ae){var ge=ye;return h(qt,function(Q,ot,Ct,xt,Pt){ot===0&&ye===void 0?ge=Q:ge=Jt(ge,Q,ot,Ct,xt,Pt)},ae),ge}function y(qt,Jt){var ye;switch(qt.type){case"FeatureCollection":for(ye=0;ye<qt.features.length&&Jt(qt.features[ye].properties,ye)!==!1;ye++);break;case"Feature":Jt(qt.properties,0);break}}function P(qt,Jt,ye){var ae=ye;return y(qt,function(ge,Q){Q===0&&ye===void 0?ae=ge:ae=Jt(ae,ge,Q)}),ae}function B(qt,Jt){if(qt.type==="Feature")Jt(qt,0);else if(qt.type==="FeatureCollection")for(var ye=0;ye<qt.features.length&&Jt(qt.features[ye],ye)!==!1;ye++);}function T(qt,Jt,ye){var ae=ye;return B(qt,function(ge,Q){Q===0&&ye===void 0?ae=ge:ae=Jt(ae,ge,Q)}),ae}function K(qt){var Jt=[];return h(qt,function(ye){Jt.push(ye)}),Jt}function st(qt,Jt){var ye,ae,ge,Q,ot,Ct,xt,Pt,kt,Zt,Gt=0,Xt=qt.type==="FeatureCollection",fe=qt.type==="Feature",he=Xt?qt.features.length:1;for(ye=0;ye<he;ye++){for(Ct=Xt?qt.features[ye].geometry:fe?qt.geometry:qt,Pt=Xt?qt.features[ye].properties:fe?qt.properties:{},kt=Xt?qt.features[ye].bbox:fe?qt.bbox:void 0,Zt=Xt?qt.features[ye].id:fe?qt.id:void 0,xt=Ct?Ct.type==="GeometryCollection":!1,ot=xt?Ct.geometries.length:1,ge=0;ge<ot;ge++){if(Q=xt?Ct.geometries[ge]:Ct,Q===null){if(Jt(null,Gt,Pt,kt,Zt)===!1)return!1;continue}switch(Q.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Jt(Q,Gt,Pt,kt,Zt)===!1)return!1;break}case"GeometryCollection":{for(ae=0;ae<Q.geometries.length;ae++)if(Jt(Q.geometries[ae],Gt,Pt,kt,Zt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Gt++}}function jt(qt,Jt,ye){var ae=ye;return st(qt,function(ge,Q,ot,Ct,xt){Q===0&&ye===void 0?ae=ge:ae=Jt(ae,ge,Q,ot,Ct,xt)}),ae}function Dt(qt,Jt){st(qt,function(ye,ae,ge,Q,ot){var Ct=ye===null?null:ye.type;switch(Ct){case null:case"Point":case"LineString":case"Polygon":return Jt(u.feature(ye,ge,{bbox:Q,id:ot}),ae,0)===!1?!1:void 0}var xt;switch(Ct){case"MultiPoint":xt="Point";break;case"MultiLineString":xt="LineString";break;case"MultiPolygon":xt="Polygon";break}for(var Pt=0;Pt<ye.coordinates.length;Pt++){var kt=ye.coordinates[Pt],Zt={type:xt,coordinates:kt};if(Jt(u.feature(Zt,ge),ae,Pt)===!1)return!1}})}function ie(qt,Jt,ye){var ae=ye;return Dt(qt,function(ge,Q,ot){Q===0&&ot===0&&ye===void 0?ae=ge:ae=Jt(ae,ge,Q,ot)}),ae}function pe(qt,Jt){Dt(qt,function(ye,ae,ge){var Q=0;if(ye.geometry){var ot=ye.geometry.type;if(!(ot==="Point"||ot==="MultiPoint")){var Ct,xt=0,Pt=0,kt=0;if(h(ye,function(Zt,Gt,Xt,fe,he){if(Ct===void 0||ae>xt||fe>Pt||he>kt){Ct=Zt,xt=ae,Pt=fe,kt=he,Q=0;return}var Ae=u.lineString([Ct,Zt],ye.properties);if(Jt(Ae,ae,ge,he,Q)===!1)return!1;Q++,Ct=Zt})===!1)return!1}}})}function Se(qt,Jt,ye){var ae=ye,ge=!1;return pe(qt,function(Q,ot,Ct,xt,Pt){ge===!1&&ye===void 0?ae=Q:ae=Jt(ae,Q,ot,Ct,xt,Pt),ge=!0}),ae}function Re(qt,Jt){if(!qt)throw new Error("geojson is required");Dt(qt,function(ye,ae,ge){if(ye.geometry!==null){var Q=ye.geometry.type,ot=ye.geometry.coordinates;switch(Q){case"LineString":if(Jt(ye,ae,ge,0,0)===!1)return!1;break;case"Polygon":for(var Ct=0;Ct<ot.length;Ct++)if(Jt(u.lineString(ot[Ct],ye.properties),ae,ge,Ct)===!1)return!1;break}}})}function Ue(qt,Jt,ye){var ae=ye;return Re(qt,function(ge,Q,ot,Ct){Q===0&&ye===void 0?ae=ge:ae=Jt(ae,ge,Q,ot,Ct)}),ae}function yn(qt,Jt){if(Jt=Jt||{},!u.isObject(Jt))throw new Error("options is invalid");var ye=Jt.featureIndex||0,ae=Jt.multiFeatureIndex||0,ge=Jt.geometryIndex||0,Q=Jt.segmentIndex||0,ot=Jt.properties,Ct;switch(qt.type){case"FeatureCollection":ye<0&&(ye=qt.features.length+ye),ot=ot||qt.features[ye].properties,Ct=qt.features[ye].geometry;break;case"Feature":ot=ot||qt.properties,Ct=qt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ct=qt;break;default:throw new Error("geojson is invalid")}if(Ct===null)return null;var xt=Ct.coordinates;switch(Ct.type){case"Point":case"MultiPoint":return null;case"LineString":return Q<0&&(Q=xt.length+Q-1),u.lineString([xt[Q],xt[Q+1]],ot,Jt);case"Polygon":return ge<0&&(ge=xt.length+ge),Q<0&&(Q=xt[ge].length+Q-1),u.lineString([xt[ge][Q],xt[ge][Q+1]],ot,Jt);case"MultiLineString":return ae<0&&(ae=xt.length+ae),Q<0&&(Q=xt[ae].length+Q-1),u.lineString([xt[ae][Q],xt[ae][Q+1]],ot,Jt);case"MultiPolygon":return ae<0&&(ae=xt.length+ae),ge<0&&(ge=xt[ae].length+ge),Q<0&&(Q=xt[ae][ge].length-Q-1),u.lineString([xt[ae][ge][Q],xt[ae][ge][Q+1]],ot,Jt)}throw new Error("geojson is invalid")}function Ft(qt,Jt){if(Jt=Jt||{},!u.isObject(Jt))throw new Error("options is invalid");var ye=Jt.featureIndex||0,ae=Jt.multiFeatureIndex||0,ge=Jt.geometryIndex||0,Q=Jt.coordIndex||0,ot=Jt.properties,Ct;switch(qt.type){case"FeatureCollection":ye<0&&(ye=qt.features.length+ye),ot=ot||qt.features[ye].properties,Ct=qt.features[ye].geometry;break;case"Feature":ot=ot||qt.properties,Ct=qt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ct=qt;break;default:throw new Error("geojson is invalid")}if(Ct===null)return null;var xt=Ct.coordinates;switch(Ct.type){case"Point":return u.point(xt,ot,Jt);case"MultiPoint":return ae<0&&(ae=xt.length+ae),u.point(xt[ae],ot,Jt);case"LineString":return Q<0&&(Q=xt.length+Q),u.point(xt[Q],ot,Jt);case"Polygon":return ge<0&&(ge=xt.length+ge),Q<0&&(Q=xt[ge].length+Q),u.point(xt[ge][Q],ot,Jt);case"MultiLineString":return ae<0&&(ae=xt.length+ae),Q<0&&(Q=xt[ae].length+Q),u.point(xt[ae][Q],ot,Jt);case"MultiPolygon":return ae<0&&(ae=xt.length+ae),ge<0&&(ge=xt[ae].length+ge),Q<0&&(Q=xt[ae][ge].length-Q),u.point(xt[ae][ge][Q],ot,Jt)}throw new Error("geojson is invalid")}s.coordAll=K,s.coordEach=h,s.coordReduce=g,s.featureEach=B,s.featureReduce=T,s.findPoint=Ft,s.findSegment=yn,s.flattenEach=Dt,s.flattenReduce=ie,s.geomEach=st,s.geomReduce=jt,s.lineEach=Re,s.lineReduce=Ue,s.propEach=y,s.propReduce=P,s.segmentEach=pe,s.segmentReduce=Se}),_i=l(s=>{Object.defineProperty(s,"__esModule",{value:!0});var u=ci();function h(g){var y=[1/0,1/0,-1/0,-1/0];return u.coordEach(g,function(P){y[0]>P[0]&&(y[0]=P[0]),y[1]>P[1]&&(y[1]=P[1]),y[2]<P[0]&&(y[2]=P[0]),y[3]<P[1]&&(y[3]=P[1])}),y}h.default=h,s.default=h}),$n=l((s,u)=>{var h=Dn(),g=rn(),y=ci(),P=_i().default,B=y.featureEach;y.coordEach,g.polygon;var T=g.featureCollection;function K(st){var jt=new h(st);return jt.insert=function(Dt){if(Dt.type!=="Feature")throw new Error("invalid feature");return Dt.bbox=Dt.bbox?Dt.bbox:P(Dt),h.prototype.insert.call(this,Dt)},jt.load=function(Dt){var ie=[];return Array.isArray(Dt)?Dt.forEach(function(pe){if(pe.type!=="Feature")throw new Error("invalid features");pe.bbox=pe.bbox?pe.bbox:P(pe),ie.push(pe)}):B(Dt,function(pe){if(pe.type!=="Feature")throw new Error("invalid features");pe.bbox=pe.bbox?pe.bbox:P(pe),ie.push(pe)}),h.prototype.load.call(this,ie)},jt.remove=function(Dt,ie){if(Dt.type!=="Feature")throw new Error("invalid feature");return Dt.bbox=Dt.bbox?Dt.bbox:P(Dt),h.prototype.remove.call(this,Dt,ie)},jt.clear=function(){return h.prototype.clear.call(this)},jt.search=function(Dt){var ie=h.prototype.search.call(this,this.toBBox(Dt));return T(ie)},jt.collides=function(Dt){return h.prototype.collides.call(this,this.toBBox(Dt))},jt.all=function(){var Dt=h.prototype.all.call(this);return T(Dt)},jt.toJSON=function(){return h.prototype.toJSON.call(this)},jt.fromJSON=function(Dt){return h.prototype.fromJSON.call(this,Dt)},jt.toBBox=function(Dt){var ie;if(Dt.bbox)ie=Dt.bbox;else if(Array.isArray(Dt)&&Dt.length===4)ie=Dt;else if(Array.isArray(Dt)&&Dt.length===6)ie=[Dt[0],Dt[1],Dt[3],Dt[4]];else if(Dt.type==="Feature")ie=P(Dt);else if(Dt.type==="FeatureCollection")ie=P(Dt);else throw new Error("invalid geojson");return{minX:ie[0],minY:ie[1],maxX:ie[2],maxY:ie[3]}},jt}u.exports=K,u.exports.default=K});Array.prototype.findIndex=Array.prototype.findIndex||function(s){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var u=Object(this),h=u.length>>>0,g=arguments[1],y=0;y<h;y++)if(s.call(g,u[y],y,u))return y;return-1},Array.prototype.find=Array.prototype.find||function(s){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof s!="function")throw new TypeError("callback must be a function");for(var u=Object(this),h=u.length>>>0,g=arguments[1],y=0;y<h;y++){var P=u[y];if(s.call(g,P,y,u))return P}},typeof Object.assign!="function"&&(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");s=Object(s);for(var u=1;u<arguments.length;u++){var h=arguments[u];if(h!=null)for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(s[g]=h[g])}return s}),function(s){s.forEach(function(u){u.hasOwnProperty("remove")||Object.defineProperty(u,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(s,u){if(this==null)throw new TypeError('"this" is null or not defined');var h=Object(this),g=h.length>>>0;if(g===0)return!1;var y=u|0,P=Math.max(y>=0?y:g-Math.abs(y),0);function B(T,K){return T===K||typeof T=="number"&&typeof K=="number"&&isNaN(T)&&isNaN(K)}for(;P<g;){if(B(h[P],s))return!0;P++}return!1}});var Vr={version:"2.18.3"},xn=p($r()),zn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},co={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ki={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},ar={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},il={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},sa={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},As={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},bi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Ms={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Oo={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Zs={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Ma={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},ho={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Ba={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},cs={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},Ks={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},fo={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},oa={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},Oi={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},rl={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},aa={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},Ln={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},Pn={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},Hr={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},In={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},Ta={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},la={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},po=ho,Gr={en:zn,de:co,it:Ki,id:ar,ro:il,ru:sa,es:As,nl:bi,fr:Ms,pt:po,pt_br:Ma,pt_pt:ho,zh:Oo,zh_tw:Zs,pl:Ba,sv:cs,el:Ks,hu:fo,da:oa,no:Oi,fa:rl,ua:aa,tr:Ln,cz:Pn,ja:Hr,fi:In,ko:Ta,ky:la},Ys={_globalEditModeEnabled:!1,enableGlobalEditMode(s){let u={...s};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(h=>{this._isRelevantForEdit(h)&&h.pm.enable(u)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(s=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(s)},handleLayerAdditionInGlobalEditMode(){let s=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let u in s){let h=s[u];this._isRelevantForEdit(h)&&h.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:s}){this._addedLayersEdit[L.stamp(s)]=s},_isRelevantForEdit(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowEditing}},Da=Ys,Ro={_globalDragModeEnabled:!1,enableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},s.forEach(u=>{this._isRelevantForDrag(u)&&u.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let s=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,s.forEach(u=>{u.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let s=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let u in s){let h=s[u];this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}},_layerAddedDrag({layer:s}){this._addedLayersDrag[L.stamp(s)]=s},_isRelevantForDrag(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.draggable}},Ci=Ro,Fr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(s=>{this._isRelevantForRemoval(s)&&(s.pm.enabled()&&s.pm.disable(),s.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(s=>{s.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(s){let u=s.target;this._isRelevantForRemoval(u)&&!u.pm.dragging()&&(u.removeFrom(this.map.pm._getContainingLayer()),u.remove(),u instanceof L.LayerGroup?(this._fireRemoveLayerGroup(u),this._fireRemoveLayerGroup(this.map,u)):(u.pm._fireRemove(u),u.pm._fireRemove(this.map,u)))},_isRelevantForRemoval(s){return s.pm&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let s=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let u in s){let h=s[u];this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:s}){this._addedLayersRemoval[L.stamp(s)]=s}},Js=Fr,sl={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{this._isRelevantForRotate(s)&&s.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(s=>s instanceof L.Polyline).forEach(s=>{s.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(s){return s.pm&&s instanceof L.Polyline&&!(s instanceof L.LayerGroup)&&(!L.PM.optIn&&!s.options.pmIgnore||L.PM.optIn&&s.options.pmIgnore===!1)&&!s._pmTempLayer&&s.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let s=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let u in s){let h=s[u];this._isRelevantForRemoval(h)&&h.pm.enableRotate()}},_layerAddedRotate({layer:s}){this._addedLayersRotate[L.stamp(s)]=s}},Io=sl,ua=p($r()),go={_fireDrawStart(s="Draw",u={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},s,u)},_fireDrawEnd(s="Draw",u={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},s,u)},_fireCreate(s,u="Draw",h={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:s,layer:s},u,h)},_fireCenterPlaced(s="Draw",u={}){let h=s==="Draw"?this._layer:void 0,g=s!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:h,layer:g,latlng:this._layer.getLatLng()},s,u)},_fireCut(s,u,h,g="Draw",y={}){this.__fire(s,"pm:cut",{shape:this._shape,layer:u,originalLayer:h},g,y)},_fireEdit(s=this._layer,u="Edit",h={}){this.__fire(s,"pm:edit",{layer:this._layer,shape:this.getShape()},u,h)},_fireEnable(s="Edit",u={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},s,u)},_fireDisable(s="Edit",u={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},s,u)},_fireUpdate(s="Edit",u={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},s,u)},_fireMarkerDragStart(s,u=void 0,h="Edit",g={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:u},h,g)},_fireMarkerDrag(s,u=void 0,h="Edit",g={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:u},h,g)},_fireMarkerDragEnd(s,u=void 0,h=void 0,g="Edit",y={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:s,shape:this.getShape(),indexPath:u,intersectionReset:h},g,y)},_fireDragStart(s="Edit",u={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},s,u)},_fireDrag(s,u="Edit",h={}){this.__fire(this._layer,"pm:drag",{...s,shape:this.getShape()},u,h)},_fireDragEnd(s="Edit",u={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},s,u)},_fireDragEnable(s="Edit",u={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},s,u)},_fireDragDisable(s="Edit",u={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},s,u)},_fireRemove(s,u=s,h="Edit",g={}){this.__fire(s,"pm:remove",{layer:u,shape:this.getShape()},h,g)},_fireVertexAdded(s,u,h,g="Edit",y={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:s,indexPath:u,latlng:h,shape:this.getShape()},g,y)},_fireVertexRemoved(s,u,h="Edit",g={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:s,indexPath:u,shape:this.getShape()},h,g)},_fireVertexClick(s,u,h="Edit",g={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:s,indexPath:u,shape:this.getShape()},h,g)},_fireIntersect(s,u=this._layer,h="Edit",g={}){this.__fire(u,"pm:intersect",{layer:this._layer,intersection:s,shape:this.getShape()},h,g)},_fireLayerReset(s,u,h="Edit",g={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:s,indexPath:u,shape:this.getShape()},h,g)},_fireChange(s,u="Edit",h={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:s,shape:this.getShape()},u,h)},_fireTextChange(s,u="Edit",h={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:s,shape:this.getShape()},u,h)},_fireTextFocus(s="Edit",u={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},s,u)},_fireTextBlur(s="Edit",u={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},s,u)},_fireSnapDrag(s,u,h="Snapping",g={}){this.__fire(s,"pm:snapdrag",u,h,g)},_fireSnap(s,u,h="Snapping",g={}){this.__fire(s,"pm:snap",u,h,g)},_fireUnsnap(s,u,h="Snapping",g={}){this.__fire(s,"pm:unsnap",u,h,g)},_fireRotationEnable(s,u,h="Rotation",g={}){this.__fire(s,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},h,g)},_fireRotationDisable(s,u="Rotation",h={}){this.__fire(s,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},u,h)},_fireRotationStart(s,u,h="Rotation",g={}){this.__fire(s,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:u},h,g)},_fireRotation(s,u,h,g=this._rotationLayer,y="Rotation",P={}){this.__fire(s,"pm:rotate",{layer:g,helpLayer:this._layer,startAngle:this._startAngle,angle:g.pm.getAngle(),angleDiff:u,oldLatLngs:h,newLatLngs:g.getLatLngs()},y,P)},_fireRotationEnd(s,u,h,g="Rotation",y={}){this.__fire(s,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:u,angle:this._rotationLayer.pm.getAngle(),originLatLngs:h,newLatLngs:this._rotationLayer.getLatLngs()},g,y)},_fireActionClick(s,u,h,g="Toolbar",y={}){this.__fire(this._map,"pm:actionclick",{text:s.text,action:s,btnName:u,button:h},g,y)},_fireButtonClick(s,u,h="Toolbar",g={}){this.__fire(this._map,"pm:buttonclick",{btnName:s,button:u},h,g)},_fireLangChange(s,u,h,g,y="Global",P={}){this.__fire(this.map,"pm:langchange",{oldLang:s,activeLang:u,fallback:h,translations:g},y,P)},_fireGlobalDragModeToggled(s,u="Global",h={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:s,map:this.map},u,h)},_fireGlobalEditModeToggled(s,u="Global",h={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:s,map:this.map},u,h)},_fireGlobalRemovalModeToggled(s,u="Global",h={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:s,map:this.map},u,h)},_fireGlobalCutModeToggled(s="Global",u={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},s,u)},_fireGlobalDrawModeToggled(s="Global",u={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},s,u)},_fireGlobalRotateModeToggled(s="Global",u={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},s,u)},_fireRemoveLayerGroup(s,u=s,h="Edit",g={}){this.__fire(s,"pm:remove",{layer:u,shape:void 0},h,g)},_fireKeyeventEvent(s,u,h,g="Global",y={}){this.__fire(this.map,"pm:keyevent",{event:s,eventType:u,focusOn:h},g,y)},__fire(s,u,h,g,y={}){h=(0,ua.default)(h,y,{source:g}),L.PM.Utils._fireEvent(s,u,h)}},Fo=go,Na=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(s){this.map=s,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),s.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(s){let u="document";this.map.getContainer().contains(s.target)&&(u="map");let h={event:s,eventType:s.type,focusOn:u};this._lastEvents[s.type]=h,this._lastEvents.current=h,this.map.pm._fireKeyeventEvent(s,s.type,u)},_onBlur(s){s.altKey=!1;let u={event:s,eventType:s.type,focusOn:"document"};this._lastEvents[s.type]=u,this._lastEvents.current=u},getLastKeyEvent(s="current"){return this._lastEvents[s]},isShiftKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.shiftKey},isAltKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.altKey},isCtrlKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.ctrlKey},isMetaKeyPressed(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.metaKey},getPressedKey(){var s;return(s=this._lastEvents.current)==null?void 0:s.event.key}}),Nn=Na,Oa=p(or());function hn(s){let u=L.PM.activeLang;return(0,Oa.default)(Gr[u],s)||(0,Oa.default)(Gr.en,s)||s}function mr(s){for(let u=0;u<s.length;u+=1){let h=s[u];if(Array.isArray(h)){if(mr(h))return!0}else if(h!=null&&h!=="")return!0}return!1}function jo(s){return s.reduce((u,h)=>{if(h.length!==0){let g=Array.isArray(h)?jo(h):h;Array.isArray(g)?g.length!==0&&u.push(g):u.push(g)}return u},[])}function mo(s,u,h){let g={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:y,b:P,f:B}=g,T=s.lng,K=s.lat,st=h,jt=Math.PI,Dt=u*jt/180,ie=Math.sin(Dt),pe=Math.cos(Dt),Se=(1-B)*Math.tan(K*jt/180),Re=1/Math.sqrt(1+Se*Se),Ue=Se*Re,yn=Math.atan2(Se,pe),Ft=Re*ie,qt=1-Ft*Ft,Jt=qt*(y*y-P*P)/(P*P),ye=1+Jt/16384*(4096+Jt*(-768+Jt*(320-175*Jt))),ae=Jt/1024*(256+Jt*(-128+Jt*(74-47*Jt))),ge=st/(P*ye),Q=2*Math.PI,ot,Ct,xt;for(;Math.abs(ge-Q)>1e-12;){ot=Math.cos(2*yn+ge),Ct=Math.sin(ge),xt=Math.cos(ge);let Ae=ae*Ct*(ot+ae/4*(xt*(-1+2*ot*ot)-ae/6*ot*(-3+4*Ct*Ct)*(-3+4*ot*ot)));Q=ge,ge=st/(P*ye)+Ae}let Pt=Ue*Ct-Re*xt*pe,kt=Math.atan2(Ue*xt+Re*Ct*pe,(1-B)*Math.sqrt(Ft*Ft+Pt*Pt)),Zt=Math.atan2(Ct*ie,Re*xt-Ue*Ct*pe),Gt=B/16*qt*(4+B*(4-3*qt)),Xt=Zt-(1-Gt)*B*Ft*(ge+Gt*Ct*(ot+Gt*xt*(-1+2*ot*ot))),fe=T+Xt*180/jt,he=kt*180/jt;return L.latLng(fe,he)}function Pr(s,u,h,g,y=!0){let P,B,T,K=[];for(let st=0;st<h;st+=1){if(y)P=st*360/h+g,B=mo(s,P,u),T=L.latLng(B.lng,B.lat);else{let jt=s.lat+Math.cos(2*st*Math.PI/h)*u,Dt=s.lng+Math.sin(2*st*Math.PI/h)*u;T=L.latLng(jt,Dt)}K.push(T)}return K}function Ra(s,u,h){u=(u+360)%360;let g=Math.PI/180,y=180/Math.PI,{R:P}=L.CRS.Earth,B=s.lng*g,T=s.lat*g,K=u*g,st=Math.sin(T),jt=Math.cos(T),Dt=Math.cos(h/P),ie=Math.sin(h/P),pe=Math.asin(st*Dt+jt*ie*Math.cos(K)),Se=B+Math.atan2(Math.sin(K)*ie*jt,Dt-st*Math.sin(pe));Se*=y;let Re=Se-360,Ue=Se<-180?Se+360:Se;return Se=Se>180?Re:Ue,L.latLng([pe*y,Se])}function Bs(s,u,h){let g=s.latLngToContainerPoint(u),y=s.latLngToContainerPoint(h),P=Math.atan2(y.y-g.y,y.x-g.x)*180/Math.PI+90;return P+=P<0?360:0,P}function ca(s,u,h,g){let y=Bs(s,u,h);return Ra(u,y,g)}function ha(s,u,h="asc"){if(!u||Object.keys(u).length===0)return(K,st)=>K-st;let g=Object.keys(u),y,P=g.length-1,B={};for(;P>=0;)y=g[P],B[y.toLowerCase()]=u[y],P-=1;function T(K){if(K instanceof L.Marker)return"Marker";if(K instanceof L.Circle)return"Circle";if(K instanceof L.CircleMarker)return"CircleMarker";if(K instanceof L.Rectangle)return"Rectangle";if(K instanceof L.Polygon)return"Polygon";if(K instanceof L.Polyline)return"Line"}return(K,st)=>{let jt,Dt;if(jt=T(K.layer).toLowerCase(),Dt=T(st.layer).toLowerCase(),!jt||!Dt)return 0;let ie=jt in B?B[jt]:Number.MAX_SAFE_INTEGER,pe=Dt in B?B[Dt]:Number.MAX_SAFE_INTEGER,Se=0;return ie<pe?Se=-1:ie>pe&&(Se=1),h==="desc"?Se*-1:Se}}function Wr(s,u=s.getLatLngs()){return s instanceof L.Polygon?L.polygon(u).getLatLngs():L.polyline(u).getLatLngs()}function fa(s,u){var h,g,y,P;if((g=(h=u.options.crs)==null?void 0:h.projection)!=null&&g.MAX_LATITUDE){let B=(P=(y=u.options.crs)==null?void 0:y.projection)==null?void 0:P.MAX_LATITUDE;s.lat=Math.max(Math.min(B,s.lat),-B)}return s}function Ri(s){return s.options.renderer||s._map&&(s._map._getPaneRenderer(s.options.pane)||s._map.options.renderer||s._map._renderer)||s._renderer}var ol=L.Class.extend({includes:[Da,Ci,Js,Io,Fo],initialize(s){this.map=s,this.Draw=new L.PM.Draw(s),this.Toolbar=new L.PM.Toolbar(s),this.Keyboard=Nn(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(s)},setLang(s="en",u,h="en"){if(s=s.trim().toLowerCase(),!/^[a-z]{2}$/.test(s)){let y=s.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(y){let P=[`${y[1]}_${y[2]}`,`${y[1]}`];for(let B of P)if(Gr[B]){s=B;break}}}let g=L.PM.activeLang;u&&(Gr[s]=(0,xn.default)(Gr[h],u)),L.PM.activeLang=s,this.map.pm.Toolbar.reinit(),this._fireLangChange(g,s,h,Gr[s])},addControls(s){this.Toolbar.addControls(s)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(s="Polygon",u){s==="Poly"&&(s="Polygon"),this.Draw.enable(s,u)},disableDraw(s="Polygon"){s==="Poly"&&(s="Polygon"),this.Draw.disable(s)},setPathOptions(s,u={}){let h=u.ignoreShapes||[],g=u.merge||!1;this.map.pm.Draw.shapes.forEach(y=>{h.indexOf(y)===-1&&this.map.pm.Draw[y].setPathOptions(s,g)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(s){let u=(0,xn.default)(this.globalOptions,s);u.editable&&(u.resizeableCircleMarker=u.editable,delete u.editable);let h=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!u.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),h=!0);let g=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!u.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),g=!0),this.map.pm.Draw.shapes.forEach(y=>{this.map.pm.Draw[y].setOptions(u)}),h&&this.map.pm.Draw.CircleMarker.enable(),g&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(y=>{y.pm.setOptions(u)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=u,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(s=>{s.pm.enabled()&&s.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(s){return this.Draw.Cut.enable(s)},toggleGlobalCutMode(s){return this.Draw.Cut.toggle(s)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(s=!1){let u=L.PM.Utils.findLayers(this.map);if(!s)return u;let h=L.featureGroup();return h._pmTempLayer=!0,u.forEach(g=>{h.addLayer(g)}),h},getGeomanDrawLayers(s=!1){let u=L.PM.Utils.findLayers(this.map).filter(g=>g._drawnByGeoman===!0);if(!s)return u;let h=L.featureGroup();return h._pmTempLayer=!0,u.forEach(g=>{h.addLayer(g)}),h},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(s){this._touchEventCounter===0&&(L.DomEvent.on(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(s){this._touchEventCounter===1&&(L.DomEvent.off(s,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(s,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(s){Ri(this.map)._onMouseMove(this._createMouseEvent("mousemove",s))},_canvasTouchClick(s){let u="";s.type==="touchstart"||s.type==="pointerdown"?u="mousedown":(s.type==="touchend"||s.type==="pointerup"||s.type==="touchcancel"||s.type==="pointercancel")&&(u="mouseup"),u&&Ri(this.map)._onClick(this._createMouseEvent(u,s))},_createMouseEvent(s,u){let h,g=u.touches[0]||u.changedTouches[0];try{h=new MouseEvent(s,{bubbles:u.bubbles,cancelable:u.cancelable,view:u.view,detail:g.detail,screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY,ctrlKey:u.ctrlKey,altKey:u.altKey,shiftKey:u.shiftKey,metaKey:u.metaKey,button:u.button,relatedTarget:u.relatedTarget})}catch{h=document.createEvent("MouseEvents"),h.initMouseEvent(s,u.bubbles,u.cancelable,u.view,g.detail,g.screenX,g.screenY,g.clientX,g.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget)}return h}}),zo=ol,Zr=L.Control.extend({includes:[Fo],options:{position:"topleft",disableByOtherButtons:!0},initialize(s){this._button=L.Util.extend({},this.options,s)},onAdd(s){return this._map=s,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let s=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),s?s.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(s){return typeof s=="boolean"?this._button.toggleStatus=s:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(s){s&&s.preventDefault(),!this._button.disabled&&(this._button.onClick(s,{button:this,event:s}),this._clicked(s),this._button.afterClick(s,{button:this,event:s}))},_makeButton(s){let u=this.options.position.indexOf("right")>-1?"pos-right":"",h=L.DomUtil.create("div",`button-container  ${u}`,this._container);s.title&&h.setAttribute("title",s.title);let g=L.DomUtil.create("a","leaflet-buttons-control-button",h);g.setAttribute("role","button"),g.setAttribute("tabindex","0"),g.href="#";let y=L.DomUtil.create("div",`leaflet-pm-actions-container ${u}`,h),P=s.actions,B={cancel:{text:hn("actions.cancel"),title:hn("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:hn("actions.finish"),title:hn("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:hn("actions.removeLastVertex"),title:hn("actions.removeLastVertex"),onClick(){this._map.pm.Draw[s.jsClass]._removeLastVertex()}},finish:{text:hn("actions.finish"),title:hn("actions.finish"),onClick(K){this._map.pm.Draw[s.jsClass]._finishShape(K)}}};s._preparedActions=P.map(K=>{let st=typeof K=="string"?K:K.name,jt;if(B[st])jt=B[st];else if(K.text)jt=K;else return jt;let Dt=L.DomUtil.create("a",`leaflet-pm-action ${u} action-${st}`,y);if(Dt.setAttribute("role","button"),Dt.setAttribute("tabindex","0"),Dt.href="#",jt.title&&(Dt.title=jt.title),Dt.innerHTML=jt.text,L.DomEvent.disableClickPropagation(Dt),L.DomEvent.on(Dt,"click",L.DomEvent.stop),jt._node=Dt,!s.disabled&&jt.onClick){let ie=pe=>{pe.preventDefault();let Se="",{buttons:Re}=this._map.pm.Toolbar;for(let Ue in Re)if(Re[Ue]._button===s){Se=Ue;break}this._fireActionClick(jt,Se,s)};L.DomEvent.addListener(Dt,"click",ie,this),L.DomEvent.addListener(Dt,"click",jt.onClick,this),L.DomEvent.addListener(Dt,"click",()=>this._updateActiveAction(s))}return jt}),this._updateActiveAction(s),s.toggleStatus&&L.DomUtil.addClass(h,"active");let T=L.DomUtil.create("div","control-icon",g);return s.iconUrl&&T.setAttribute("src",s.iconUrl),s.className&&L.DomUtil.addClass(T,s.className),L.DomEvent.disableClickPropagation(g),L.DomEvent.on(g,"click",L.DomEvent.stop),s.disabled||(L.DomEvent.addListener(g,"click",this._onBtnClick,this),L.DomEvent.addListener(g,"click",this._triggerClick,this)),s.disabled&&(L.DomUtil.addClass(g,"pm-disabled"),g.setAttribute("aria-disabled","true")),h},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let s="",{buttons:u}=this._map.pm.Toolbar;for(let h in u)if(u[h]._button===this._button){s=h;break}this._fireButtonClick(s,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let s="pm-disabled",u=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(u,s),u.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(u,s),u.setAttribute("aria-disabled","false"))},_updateActiveAction(s){var u;(u=s._preparedActions)==null||u.forEach(h=>{h!=null&&h._node&&(h.isActive&&h.isActive.call(this)?L.DomUtil.addClass(h._node,"active-action"):L.DomUtil.removeClass(h._node,"active-action"))})}}),da=Zr;L.Control.PMButton=da;var Ia=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(s){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(s)},reinit(){let s=this.isVisible;this.removeControls(),this._defineButtons(),s&&this.addControls()},init(s){this.map=s,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(s){let u=`${s}Container`;return this[u]||(this[u]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${s} leaflet-bar leaflet-control`)),this[u]},getButtons(){return this.buttons},addControls(s=this.options){typeof s.editPolygon<"u"&&(s.editMode=s.editPolygon),typeof s.deleteLayer<"u"&&(s.removalMode=s.deleteLayer),L.Util.setOptions(this,s),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let s=this.getButtons(),u={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let h in s){let g=s[h];L.Util.setOptions(g,{className:u.geomanIcons[h]})}},removeControls(){let s=this.getButtons();for(let u in s)s[u].remove();this.isVisible=!1},toggleControls(s=this.options){this.isVisible?this.removeControls():this.addControls(s)},_addButton(s,u){return this.buttons[s]=u,this.options[s]=!!this.options[s]||!1,this.buttons[s]},triggerClickOnToggledButtons(s){for(let u in this.buttons){let h=this.buttons[u];h._button.disableByOtherButtons&&h!==s&&h.toggled()&&h._triggerClick()}},toggleButton(s,u,h=!0){s==="editPolygon"&&(s="editMode"),s==="deleteLayer"&&(s="removalMode");let g=s;return h&&this.triggerClickOnToggledButtons(this.buttons[g]),this.buttons[g]?this.buttons[g].toggle(u):!1},_defineButtons(){let s={className:"control-icon leaflet-pm-icon-marker",title:hn("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(ie,pe)=>{this.map.pm.Draw[pe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},u={title:hn("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(ie,pe)=>{this.map.pm.Draw[pe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={className:"control-icon leaflet-pm-icon-polyline",title:hn("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(ie,pe)=>{this.map.pm.Draw[pe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},g={title:hn("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(ie,pe)=>{this.map.pm.Draw[pe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},y={title:hn("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(ie,pe)=>{this.map.pm.Draw[pe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},P={title:hn("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(ie,pe)=>{this.map.pm.Draw[pe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},B={title:hn("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},T={title:hn("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},K={title:hn("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(ie,pe)=>{this.map.pm.Draw[pe.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},st={title:hn("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},jt={title:hn("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Dt={className:"control-icon leaflet-pm-icon-text",title:hn("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(ie,pe)=>{this.map.pm.Draw[pe.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(s)),this._addButton("drawPolyline",new L.Control.PMButton(h)),this._addButton("drawRectangle",new L.Control.PMButton(P)),this._addButton("drawPolygon",new L.Control.PMButton(u)),this._addButton("drawCircle",new L.Control.PMButton(g)),this._addButton("drawCircleMarker",new L.Control.PMButton(y)),this._addButton("drawText",new L.Control.PMButton(Dt)),this._addButton("editMode",new L.Control.PMButton(B)),this._addButton("dragMode",new L.Control.PMButton(T)),this._addButton("cutPolygon",new L.Control.PMButton(K)),this._addButton("removalMode",new L.Control.PMButton(st)),this._addButton("rotateMode",new L.Control.PMButton(jt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let s=this.getButtons(),u=[];this.options.drawControls===!1&&(u=u.concat(Object.keys(s).filter(h=>!s[h]._button.tool))),this.options.editControls===!1&&(u=u.concat(Object.keys(s).filter(h=>s[h]._button.tool==="edit"))),this.options.optionsControls===!1&&(u=u.concat(Object.keys(s).filter(h=>s[h]._button.tool==="options"))),this.options.customControls===!1&&(u=u.concat(Object.keys(s).filter(h=>s[h]._button.tool==="custom")));for(let h in s)if(this.options[h]&&u.indexOf(h)===-1){let g=s[h]._button.tool;g||(g="draw"),s[h].setPosition(this._getBtnPosition(g)),s[h].addTo(this.map)}},_getBtnPosition(s){return this.options.positions&&this.options.positions[s]?this.options.positions[s]:this.options.position},setBlockPosition(s,u){this.options.positions[s]=u,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(s,u){if(u)typeof u!="object"&&(u={name:u});else throw new TypeError("Button has no name");let h=this._btnNameMapping(s);if(!u.name)throw new TypeError("Button has no name");if(this.buttons[u.name])throw new TypeError("Button with this name already exists");let g=this.map.pm.Draw.createNewDrawInstance(u.name,h);u={...this.buttons[h]._button,...u};let y=this.createCustomControl(u);return{drawInstance:g,control:y}},createCustomControl(s){if(!s.name)throw new TypeError("Button has no name");if(this.buttons[s.name])throw new TypeError("Button with this name already exists");s.onClick||(s.onClick=()=>{}),s.afterClick||(s.afterClick=()=>{}),s.toggle!==!1&&(s.toggle=!0),s.block&&(s.block=s.block.toLowerCase()),(!s.block||s.block==="draw")&&(s.block=""),s.className?s.className.indexOf("control-icon")===-1&&(s.className=`control-icon ${s.className}`):s.className="control-icon";let u={tool:s.block,className:s.className,title:s.title||"",jsClass:s.name,onClick:s.onClick,afterClick:s.afterClick,doToggle:s.toggle,toggleStatus:!1,disableOtherButtons:s.disableOtherButtons??!0,disableByOtherButtons:s.disableByOtherButtons??!0,cssToggle:s.toggle,position:this.options.position,actions:s.actions||[],disabled:!!s.disabled};this.options[s.name]!==!1&&(this.options[s.name]=!0);let h=this._addButton(s.name,new L.Control.PMButton(u));return this.changeControlOrder(),h},controlExists(s){return!!this.getButton(s)},getButton(s){return this.getButtons()[s]},getButtonsInBlock(s){let u={};if(s)for(let h in this.getButtons()){let g=this.getButtons()[h];(g._button.tool===s||s==="draw"&&!g._button.tool)&&(u[h]=g)}return u},changeControlOrder(s=[]){let u=this._shapeMapping(),h=[];s.forEach(P=>{u[P]?h.push(u[P]):h.push(P)});let g=this.getButtons(),y={};h.forEach(P=>{g[P]&&(y[P]=g[P])}),Object.keys(g).filter(P=>!g[P]._button.tool||g[P]._button.tool==="draw").forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),Object.keys(g).filter(P=>g[P]._button.tool==="edit").forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),Object.keys(g).filter(P=>g[P]._button.tool==="options").forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),Object.keys(g).filter(P=>g[P]._button.tool==="custom").forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),Object.keys(g).forEach(P=>{h.indexOf(P)===-1&&(y[P]=g[P])}),this.map.pm.Toolbar.buttons=y,this._showHideButtons()},getControlOrder(){let s=this.getButtons(),u=[];for(let h in s)u.push(h);return u},changeActionsOfControl(s,u){let h=this._btnNameMapping(s);if(!h)throw new TypeError("No name passed");if(!u)throw new TypeError("No actions passed");if(!this.buttons[h])throw new TypeError("Button with this name not exists");this.buttons[h]._button.actions=u,this.changeControlOrder()},setButtonDisabled(s,u){let h=this._btnNameMapping(s);u?this.buttons[h].disable():this.buttons[h].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(s){let u=this._shapeMapping();return u[s]?u[s]:s}}),Fa=Ia,pa=p($r()),vo={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(s){s.forEach(u=>{if(Array.isArray(u)){this._assignEvents(u);return}u.off("drag",this._handleSnapping,this),u.on("drag",this._handleSnapping,this),u.off("dragend",this._cleanupSnapping,this),u.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(s){if(s){let u=s.target;u._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(u=>{u.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(s){var T,K,st;let u=s.target;if(u._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((T=s==null?void 0:s.originalEvent)==null?void 0:T.altKey)||((st=(K=this._map)==null?void 0:K.pm)==null?void 0:st.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let h=this._calcClosestLayer(u.getLatLng(),this._snapList);if(Object.keys(h).length===0)return!1;let g=h.layer instanceof L.Marker||h.layer instanceof L.CircleMarker||!this.options.snapSegment,y;g?y=h.latlng:y=this._checkPrioritiySnapping(h);let P=this.options.snapDistance,B={marker:u,shape:this._shape,snapLatLng:y,segment:h.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:h.layer,distance:h.distance};if(this._fireSnapDrag(B.marker,B),this._fireSnapDrag(this._layer,B),h.distance<P){u._orgLatLng=u.getLatLng(),u.setLatLng(y),u._snapped=!0,u._snapInfo=B;let jt=()=>{this._snapLatLng=y,this._fireSnap(u,B),this._fireSnap(this._layer,B)},Dt=this._snapLatLng||{},ie=y||{};(Dt.lat!==ie.lat||Dt.lng!==ie.lng)&&jt()}else this._snapLatLng&&(this._unsnap(B),u._snapped=!1,u._snapInfo=void 0,this._fireUnsnap(B.marker,B),this._fireUnsnap(this._layer,B));return!0},_createSnapList(){let s=[],u=[],h=this._map;h.off("layerremove",this._handleSnapLayerRemoval,this),h.on("layerremove",this._handleSnapLayerRemoval,this),h.eachLayer(g=>{if((g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&g.options.snapIgnore!==!0){if(g.options.snapIgnore===void 0&&(!L.PM.optIn&&g.options.pmIgnore===!0||L.PM.optIn&&g.options.pmIgnore!==!1))return;(g instanceof L.Circle||g instanceof L.CircleMarker)&&g.pm&&g.pm._hiddenPolyCircle?s.push(g.pm._hiddenPolyCircle):g instanceof L.ImageOverlay&&(g=L.rectangle(g.getBounds())),s.push(g);let y=L.polyline([],{color:"red",pmIgnore:!0});y._pmTempLayer=!0,u.push(y),(g instanceof L.Circle||g instanceof L.CircleMarker)&&u.push(y)}}),s=s.filter(g=>this._layer!==g),s=s.filter(g=>g._latlng||g._latlngs&&mr(g._latlngs)),s=s.filter(g=>!g._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let g=L.polyline([],{color:"red",pmIgnore:!0});g._pmTempLayer=!0,u.push(g)}),this._snapList=s.concat(this._otherSnapLayers)):this._snapList=s,this.debugIndicatorLines=u},_handleSnapLayerRemoval({layer:s}){if(!s._leaflet_id)return;let u=this._snapList.findIndex(h=>h._leaflet_id===s._leaflet_id);u>-1&&this._snapList.splice(u,1)},_calcClosestLayer(s,u){return this._calcClosestLayers(s,u,1)[0]},_calcClosestLayers(s,u,h=1){let g=[],y={};u.forEach((B,T)=>{var st;if(B._parentCopy&&B._parentCopy===this._layer||((st=B.getLatLngs)==null?void 0:st.call(B).flat(5).length)<2)return;let K=this._calcLayerDistances(s,B);if(K.distance=Math.floor(K.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[T]){let jt=L.polyline([],{color:"red",pmIgnore:!0});jt._pmTempLayer=!0,this.debugIndicatorLines[T]=jt}this.debugIndicatorLines[T].setLatLngs([s,K.latlng])}h===1&&(y.distance===void 0||K.distance-5<=y.distance)?(K.distance+5<y.distance&&(g=[]),y=K,y.layer=B,g.push(y)):h!==1&&(y={},y=K,y.layer=B,g.push(y))}),h!==1&&(g=g.sort((B,T)=>B.distance-T.distance)),h===-1&&(h=g.length);let P=this._getClosestLayerByPriority(g,h);return L.Util.isArray(P)?P:[P]},_calcLayerDistances(s,u){let h=this._map,g=u instanceof L.Marker||u instanceof L.CircleMarker,y=u instanceof L.Polygon,P=s;if(g){let B=u.getLatLng();return{latlng:{...B},distance:this._getDistance(h,B,P)}}return this._calcLatLngDistances(P,u.getLatLngs(),h,y)},_calcLatLngDistances(s,u,h,g=!1){let y,P,B,T=K=>{K.forEach((st,jt)=>{if(Array.isArray(st)){T(st);return}if(this.options.snapSegment){let Dt=st,ie;g?ie=jt+1===K.length?0:jt+1:ie=jt+1===K.length?void 0:jt+1;let pe=K[ie];if(pe){let Se=this._getDistanceToSegment(h,s,Dt,pe);(P===void 0||Se<P)&&(P=Se,B=[Dt,pe])}}else{let Dt=this._getDistance(h,s,st);(P===void 0||Dt<P)&&(P=Dt,y=st)}})};return T(u),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(h,s,B[0],B[1])},segment:B,distance:P}:{latlng:y,distance:P}},_getClosestLayerByPriority(s,u=1){s=s.sort((B,T)=>B._leaflet_id-T._leaflet_id);let h=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],g=this._map.pm.globalOptions.snappingOrder||[],y=0,P={};return g.concat(h).forEach(B=>{P[B]||(y+=1,P[B]=y)}),s.sort(ha("instanceofShape",P)),u===1?s[0]||{}:s.slice(0,u)},_checkPrioritiySnapping(s){let u=this._map,h=s.segment[0],g=s.segment[1],y=s.latlng,P=y;if(this.options.snapVertex){let B=this._getDistance(u,h,y),T=this._getDistance(u,g,y),K=B<T?h:g,st=B<T?B:T;if(this.options.snapMiddle){let Dt=L.PM.Utils.calcMiddleLatLng(u,h,g),ie=this._getDistance(u,Dt,y);ie<B&&ie<T&&(K=Dt,st=ie)}let jt=this.options.snapDistance;st<jt&&(P=K)}return{...P}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(s,u,h,g){let y=s.getMaxZoom();y===1/0&&(y=s.getZoom());let P=s.project(u,y),B=s.project(h,y),T=s.project(g,y),K=L.LineUtil.closestPointOnSegment(P,B,T);return s.unproject(K,y)},_getDistanceToSegment(s,u,h,g){let y=s.latLngToContainerPoint(u),P=s.latLngToContainerPoint(h),B=s.latLngToContainerPoint(g);return L.LineUtil.pointToSegmentDistance(y,P,B)},_getDistance(s,u,h){return s.latLngToContainerPoint(u).distanceTo(s.latLngToContainerPoint(h))}},Uo=vo,yo=L.Class.extend({includes:[Uo,Fo],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(s){L.Util.setOptions(this,s),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(s){let u=new L.Icon.Default;u.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=u,this._map=s,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(h=>{this[h]=new L.PM.Draw[h](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(s,u=!1){u?this.options.pathOptions=(0,pa.default)(this.options.pathOptions,s):this.options.pathOptions=s},getShapes(){return this.shapes},getShape(){return this._shape},enable(s,u){if(!s)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[s].enable(u)},disable(){this.shapes.forEach(s=>{this[s].disable()})},addControls(){this.shapes.forEach(s=>{this[s].addButton()})},getActiveShape(){let s;return this.shapes.forEach(u=>{this[u]._enabled&&(s=u)}),s},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let s=[];this._map.eachLayer(u=>{(u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.Circle||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&(u._pmTempLayer||s.push(u))}),this._enabled?s.forEach(u=>{L.PM.Utils.disablePopup(u)}):s.forEach(u=>{L.PM.Utils.enablePopup(u)})},createNewDrawInstance(s,u){let h=this._getShapeFromBtnName(u);if(this[s])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[h])throw new TypeError(`There is no class L.PM.Draw.${h}`);return this[s]=new L.PM.Draw[h](this._map),this[s].toolbarButtonName=s,this[s]._shape=s,this.shapes.push(s),this[u]&&this[s].setOptions(this[u].options),this[s].setOptions(this[s].options),this[s]},_getShapeFromBtnName(s){let u={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return u[s]?u[s]:this[s]?this[s]._shape:s},_finishLayer(s){s.pm&&(s.pm.setOptions(this.options),s.pm._shape=this._shape,s.pm._map=this._map),this._addDrawnLayerProp(s)},_addDrawnLayerProp(s){s._drawnByGeoman=!0},_setPane(s,u){u==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":u==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":u==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),Pi=yo;Pi.Marker=Pi.extend({initialize(s){this._map=s,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(u=>{this.isRelevantMarker(u)&&u.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},isRelevantMarker(s){return s instanceof L.Marker&&s.pm&&!s._pmTempLayer&&!s.pm._initTextMarker},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let u=s;u.target=this._hintMarker,this._handleSnapping(u)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(s){if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng(),h=new L.Marker(u,this.options.markerStyle);this._setPane(h,"markerPane"),this._finishLayer(h),h.pm||(h.options.draggable=!1),h.addTo(this._map.pm._getContainingLayer()),h.pm&&this.options.markerEditable?h.pm.enable():h.dragging&&h.dragging.disable(),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var s,u;(s=this.options.markerStyle)!=null&&s.icon&&((u=this._hintMarker)==null||u.setIcon(this.options.markerStyle.icon))}});var C=63710088e-1,et={centimeters:C*100,centimetres:C*100,degrees:C/111325,feet:C*3.28084,inches:C*39.37,kilometers:C/1e3,kilometres:C/1e3,meters:C,metres:C,miles:C/1609.344,millimeters:C*1e3,millimetres:C*1e3,nauticalmiles:C/1852,radians:1,yards:C*1.0936};function It(s,u,h){h===void 0&&(h={});var g={type:"Feature"};return(h.id===0||h.id)&&(g.id=h.id),h.bbox&&(g.bbox=h.bbox),g.properties=u||{},g.geometry=s,g}function Wt(s,u,h){if(h===void 0&&(h={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!bn(s[0])||!bn(s[1]))throw new Error("coordinates must contain numbers");var g={type:"Point",coordinates:s};return It(g,u,h)}function ue(s,u,h){if(h===void 0&&(h={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");var g={type:"LineString",coordinates:s};return It(g,u,h)}function be(s,u){u===void 0&&(u={});var h={type:"FeatureCollection"};return u.id&&(h.id=u.id),u.bbox&&(h.bbox=u.bbox),h.features=s,h}function De(s,u){u===void 0&&(u="kilometers");var h=et[u];if(!h)throw new Error(u+" units is invalid");return s*h}function Ge(s,u){u===void 0&&(u="kilometers");var h=et[u];if(!h)throw new Error(u+" units is invalid");return s/h}function Ye(s){var u=s%(2*Math.PI);return u*180/Math.PI}function ln(s){var u=s%360;return u*Math.PI/180}function bn(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}function On(s){var u,h,g={type:"FeatureCollection",features:[]};if(s.type==="Feature"?h=s.geometry:h=s,h.type==="LineString")u=[h.coordinates];else if(h.type==="MultiLineString")u=h.coordinates;else if(h.type==="MultiPolygon")u=[].concat.apply([],h.coordinates);else if(h.type==="Polygon")u=h.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return u.forEach(function(y){u.forEach(function(P){for(var B=0;B<y.length-1;B++)for(var T=B;T<P.length-1;T++)if(!(y===P&&(Math.abs(B-T)===1||B===0&&T===y.length-2&&y[B][0]===y[y.length-1][0]&&y[B][1]===y[y.length-1][1]))){var K=hi(y[B][0],y[B][1],y[B+1][0],y[B+1][1],P[T][0],P[T][1],P[T+1][0],P[T+1][1]);K&&g.features.push(Wt([K[0],K[1]]))}})}),g}function hi(s,u,h,g,y,P,B,T){var K,st,jt,Dt,ie,pe={x:null,y:null,onLine1:!1,onLine2:!1};return K=(T-P)*(h-s)-(B-y)*(g-u),K===0?pe.x!==null&&pe.y!==null?pe:!1:(st=u-P,jt=s-y,Dt=(B-y)*st-(T-P)*jt,ie=(h-s)*st-(g-u)*jt,st=Dt/K,jt=ie/K,pe.x=s+st*(h-s),pe.y=u+st*(g-u),st>=0&&st<=1&&(pe.onLine1=!0),jt>=0&&jt<=1&&(pe.onLine2=!0),pe.onLine1&&pe.onLine2?[pe.x,pe.y]:!1)}Pi.Line=Pi.extend({initialize(s){this._map=s,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintLine(){let s=this._layer.getLatLngs();if(s.length>0){let u=s[s.length-1];this._hintline.setLatLngs([u,this._hintMarker.getLatLng()])}},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let u=this._layer._defaultShape().slice();u.push(this._hintMarker.getLatLng()),this._change(u)},hasSelfIntersection(){return On(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(s,u){let h=L.polyline(this._layer.getLatLngs());s&&(u||(u=this._hintMarker.getLatLng()),h.addLatLng(u));let g=On(h.toGeoJSON(15));this._doesSelfIntersect=g.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(g,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(s){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,s.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng(),h=this._layer.getLatLngs(),g=h[h.length-1];if(u.equals(h[0])||h.length>0&&u.equals(g)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:u,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(u);let y=this._createMarker(u);this._setTooltipText(),this._setHintLineAfterNewVertex(u),this._fireVertexAdded(y,void 0,u,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(s)},_setHintLineAfterNewVertex(s){this._hintline.setLatLngs([s,s])},_removeLastVertex(){let s=this._markers;if(s.length<=1){this.disable();return}let u=this._layer.getLatLngs(),h=s[s.length-1],{indexPath:g}=L.PM.Utils.findDeepMarkerIndex(s,h);s.pop(),this._layerGroup.removeLayer(h);let y=s[s.length-1],P=u.indexOf(y.getLatLng());u=u.slice(0,P+1),this._layer.setLatLngs(u),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(h,g,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=1)return;let u=L.polyline(s,this.options.pathOptions);this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u),this.options.snappable&&this._cleanupSnapping();let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},_createMarker(s){let u=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._pmTempLayer=!0,this._layerGroup.addLayer(u),this._markers.push(u),u.on("click",this._finishShape,this),u},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),u="";s<=1?u=hn("tooltips.continueLine"):u=hn("tooltips.finishLine"),this._hintMarker.setTooltipContent(u)},_change(s){this._fireChange(s,"Draw")},setStyle(){var s,u;(s=this._layer)==null||s.setStyle(this.options.templineStyle),(u=this._hintline)==null||u.setStyle(this.options.hintlineStyle)}}),Pi.Polygon=Pi.Line.extend({initialize(s){this._map=s,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(s){L.PM.Draw.Line.prototype.enable.call(this,s),this._layer.pm._shape="Polygon"},_createMarker(s){let u=new L.Marker(s,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._pmTempLayer=!0,this._layerGroup.addLayer(u),this._markers.push(u),this._layer.getLatLngs().flat().length===1?(u.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(u)-1,this.options.snappable&&this._cleanupSnapping()):u.on("click",()=>1),u},_setTooltipText(){let{length:s}=this._layer.getLatLngs().flat(),u="";s<=2?u=hn("tooltips.continueLine"):u=hn("tooltips.finishPoly"),this._hintMarker.setTooltipContent(u)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let u=L.polygon(s,this.options.pathOptions);this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))}}),Pi.Rectangle=Pi.extend({initialize(s){this._map=s,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(s){if(L.Util.setOptions(this,s),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let u=0;u<2;u+=1){let h=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._styleMarkers.push(h)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeStartingMarkers(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(u),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(h=>{L.DomUtil.addClass(h._icon,"visible"),h.setLatLng(u)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(hn("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let s=this._startMarker.getLatLng();s&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([s,s]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}let u=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(u,"Draw")},_syncRectangleSize(){let s=fa(this._startMarker.getLatLng(),this._map),u=fa(this._hintMarker.getLatLng(),this._map),h=L.PM.Utils._getRotatedRectangle(s,u,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(h),this.options.cursorMarker&&this._styleMarkers){let g=[];h.forEach(y=>{!y.equals(s,1e-8)&&!y.equals(u,1e-8)&&g.push(y)}),g.forEach((y,P)=>{try{this._styleMarkers[P].setLatLng(y)}catch{}})}},_findCorners(){let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.options.rectangleAngle||0,this._map)},_finishShape(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng(),h=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||h.equals(u))return;let g=L.rectangle([h,u],this.options.pathOptions);if(this.options.rectangleAngle){let P=L.PM.Utils._getRotatedRectangle(h,u,this.options.rectangleAngle||0,this._map);g.setLatLngs(P),g.pm&&g.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g);let y=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(y))},setStyle(){var s;(s=this._layer)==null||s.setStyle(this.options.pathOptions)}}),Pi.CircleMarker=Pi.extend({initialize(s){this._map=s,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(s){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let u={};L.extend(u,this.options.templineStyle),u.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),u),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(s=>{this.isRelevantMarker(s)&&s.pm.disable()})},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_placeCenterMarker(s){this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let u=this._hintMarker.getLatLng();this._centerMarker.setLatLng(u),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let s=this._centerMarker.getLatLng();s&&(this._layer.setLatLng(s),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(hn("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let s=this._centerMarker.getLatLng(),u=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([s,u])},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),u=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,u);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let h=s;h.target=this._hintMarker,this._handleSnapping(h)}this._handleHintMarkerSnapping();let u=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(u,"Draw")},isRelevantMarker(s){return s instanceof L.CircleMarker&&!(s instanceof L.Circle)&&s.pm&&!s._pmTempLayer},_createMarker(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!s.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng(),h=new this._BaseCircleClass(u,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(h),this._fireCreate(h),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(s){s.pm&&this.options.markerEditable&&s.pm.enable()},_finishShape(s){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._centerMarker.getLatLng(),h=this._defaultRadius;if(this.options[this._editableOption]){let B=this._hintMarker.getLatLng();h=this._distanceCalculation(u,B),this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?h=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(h=this.options[this._maxRadiusOption])}let g={...this.options.pathOptions,radius:h},y=new this._BaseCircleClass(u,g);this._setPane(y,"layerPane"),this._finishLayer(y),y.addTo(this._map.pm._getContainingLayer()),y.pm&&y.pm._updateHiddenPolyCircle(),this._fireCreate(y);let P=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(P))},_getNewDestinationOfHintMarker(){let s=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return s;let u=this._centerMarker.getLatLng(),h=this._distanceCalculation(u,s);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?s=ca(this._map,u,s,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(s=ca(this._map,u,s,this._getMaxDistanceInMeter()))}return s},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let s=this._centerMarker.getLatLng(),u=this._hintMarker.getLatLng(),h=this._distanceCalculation(s,u);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var u,h;let s={};L.extend(s,this.options.templineStyle),this.options[this._editableOption]&&(s.radius=0),(u=this._layer)==null||u.setStyle(s),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)},_distanceCalculation(s,u){return this._map.project(s).distanceTo(this._map.project(u))}}),Pi.Circle=Pi.CircleMarker.extend({initialize(s){this._map=s,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(s,u){return this._map.distance(s,u)}});function Un(s){if(!s)throw new Error("coord is required");if(!Array.isArray(s)){if(s.type==="Feature"&&s.geometry!==null&&s.geometry.type==="Point")return s.geometry.coordinates;if(s.type==="Point")return s.coordinates}if(Array.isArray(s)&&s.length>=2&&!Array.isArray(s[0])&&!Array.isArray(s[1]))return s;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Zn(s){if(Array.isArray(s))return s;if(s.type==="Feature"){if(s.geometry!==null)return s.geometry.coordinates}else if(s.coordinates)return s.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ii(s){return s.type==="Feature"?s.geometry:s}function Mi(s,u){return s.type==="FeatureCollection"?"FeatureCollection":s.type==="GeometryCollection"?"GeometryCollection":s.type==="Feature"&&s.geometry!==null?s.geometry.type:s.type}function jr(s,u,h){if(s!==null)for(var g,y,P,B,T,K,st,jt=0,Dt=0,ie,pe=s.type,Se=pe==="FeatureCollection",Re=pe==="Feature",Ue=Se?s.features.length:1,yn=0;yn<Ue;yn++){st=Se?s.features[yn].geometry:Re?s.geometry:s,ie=st?st.type==="GeometryCollection":!1,T=ie?st.geometries.length:1;for(var Ft=0;Ft<T;Ft++){var qt=0,Jt=0;if(B=ie?st.geometries[Ft]:st,B!==null){K=B.coordinates;var ye=B.type;switch(jt=0,ye){case null:break;case"Point":if(u(K,Dt,yn,qt,Jt)===!1)return!1;Dt++,qt++;break;case"LineString":case"MultiPoint":for(g=0;g<K.length;g++){if(u(K[g],Dt,yn,qt,Jt)===!1)return!1;Dt++,ye==="MultiPoint"&&qt++}ye==="LineString"&&qt++;break;case"Polygon":case"MultiLineString":for(g=0;g<K.length;g++){for(y=0;y<K[g].length-jt;y++){if(u(K[g][y],Dt,yn,qt,Jt)===!1)return!1;Dt++}ye==="MultiLineString"&&qt++,ye==="Polygon"&&Jt++}ye==="Polygon"&&qt++;break;case"MultiPolygon":for(g=0;g<K.length;g++){for(Jt=0,y=0;y<K[g].length;y++){for(P=0;P<K[g][y].length-jt;P++){if(u(K[g][y][P],Dt,yn,qt,Jt)===!1)return!1;Dt++}Jt++}qt++}break;case"GeometryCollection":for(g=0;g<B.geometries.length;g++)if(jr(B.geometries[g],u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ei(s,u){if(s.type==="Feature")u(s,0);else if(s.type==="FeatureCollection")for(var h=0;h<s.features.length&&u(s.features[h],h)!==!1;h++);}function vr(s,u,h){var g=h;return ei(s,function(y,P){P===0&&h===void 0?g=y:g=u(g,y,P)}),g}function al(s,u){var h,g,y,P,B,T,K,st,jt,Dt,ie=0,pe=s.type==="FeatureCollection",Se=s.type==="Feature",Re=pe?s.features.length:1;for(h=0;h<Re;h++){for(T=pe?s.features[h].geometry:Se?s.geometry:s,st=pe?s.features[h].properties:Se?s.properties:{},jt=pe?s.features[h].bbox:Se?s.bbox:void 0,Dt=pe?s.features[h].id:Se?s.id:void 0,K=T?T.type==="GeometryCollection":!1,B=K?T.geometries.length:1,y=0;y<B;y++){if(P=K?T.geometries[y]:T,P===null){if(u(null,ie,st,jt,Dt)===!1)return!1;continue}switch(P.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(P,ie,st,jt,Dt)===!1)return!1;break}case"GeometryCollection":{for(g=0;g<P.geometries.length;g++)if(u(P.geometries[g],ie,st,jt,Dt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ie++}}function yr(s,u){al(s,function(h,g,y,P,B){var T=h===null?null:h.type;switch(T){case null:case"Point":case"LineString":case"Polygon":return u(It(h,y,{bbox:P,id:B}),g,0)===!1?!1:void 0}var K;switch(T){case"MultiPoint":K="Point";break;case"MultiLineString":K="LineString";break;case"MultiPolygon":K="Polygon";break}for(var st=0;st<h.coordinates.length;st++){var jt=h.coordinates[st],Dt={type:K,coordinates:jt};if(u(It(Dt,y),g,st)===!1)return!1}})}function ja(s){if(!s)throw new Error("geojson is required");var u=[];return yr(s,function(h){hs(h,u)}),be(u)}function hs(s,u){var h=[],g=s.geometry;if(g!==null){switch(g.type){case"Polygon":h=Zn(g);break;case"LineString":h=[Zn(g)]}h.forEach(function(y){var P=za(y,s.properties);P.forEach(function(B){B.id=u.length,u.push(B)})})}}function za(s,u){var h=[];return s.reduce(function(g,y){var P=ue([g,y],u);return P.bbox=Xs(g,y),h.push(P),y}),h}function Xs(s,u){var h=s[0],g=s[1],y=u[0],P=u[1],B=h<y?h:y,T=g<P?g:P,K=h>y?h:y,st=g>P?g:P;return[B,T,K,st]}var Qs=ja,Bi=p($n(),1);function ga(s,u){var h={},g=[];if(s.type==="LineString"&&(s=It(s)),u.type==="LineString"&&(u=It(u)),s.type==="Feature"&&u.type==="Feature"&&s.geometry!==null&&u.geometry!==null&&s.geometry.type==="LineString"&&u.geometry.type==="LineString"&&s.geometry.coordinates.length===2&&u.geometry.coordinates.length===2){var y=kr(s,u);return y&&g.push(y),be(g)}var P=(0,Bi.default)();return P.load(Qs(u)),ei(Qs(s),function(B){ei(P.search(B),function(T){var K=kr(B,T);if(K){var st=Zn(K).join(",");h[st]||(h[st]=!0,g.push(K))}})}),be(g)}function kr(s,u){var h=Zn(s),g=Zn(u);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(g.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var y=h[0][0],P=h[0][1],B=h[1][0],T=h[1][1],K=g[0][0],st=g[0][1],jt=g[1][0],Dt=g[1][1],ie=(Dt-st)*(B-y)-(jt-K)*(T-P),pe=(jt-K)*(P-st)-(Dt-st)*(y-K),Se=(B-y)*(P-st)-(T-P)*(y-K);if(ie===0)return null;var Re=pe/ie,Ue=Se/ie;if(Re>=0&&Re<=1&&Ue>=0&&Ue<=1){var yn=y+Re*(B-y),Ft=P+Re*(T-P);return Wt([yn,Ft])}return null}var _r=ga,ma=p($n(),1);function lr(s,u,h){h===void 0&&(h={});var g=Un(s),y=Un(u),P=ln(y[1]-g[1]),B=ln(y[0]-g[0]),T=ln(g[1]),K=ln(y[1]),st=Math.pow(Math.sin(P/2),2)+Math.pow(Math.sin(B/2),2)*Math.cos(T)*Math.cos(K);return De(2*Math.atan2(Math.sqrt(st),Math.sqrt(1-st)),h.units)}var to=lr;function zr(s){var u=s[0],h=s[1],g=s[2],y=s[3],P=to(s.slice(0,2),[g,h]),B=to(s.slice(0,2),[u,y]);if(P>=B){var T=(h+y)/2;return[u,T-(g-u)/2,g,T+(g-u)/2]}else{var K=(u+g)/2;return[K-(y-h)/2,h,K+(y-h)/2,y]}}var ll=zr;function Fi(s){var u=[1/0,1/0,-1/0,-1/0];return jr(s,function(h){u[0]>h[0]&&(u[0]=h[0]),u[1]>h[1]&&(u[1]=h[1]),u[2]<h[0]&&(u[2]=h[0]),u[3]<h[1]&&(u[3]=h[1])}),u}Fi.default=Fi;var Ts=Fi;function Kr(s,u){u===void 0&&(u={});var h=u.precision,g=u.coordinates,y=u.mutate;if(h=h==null||isNaN(h)?6:h,g=g==null||isNaN(g)?3:g,!s)throw new Error("<geojson> is required");if(typeof h!="number")throw new Error("<precision> must be a number");if(typeof g!="number")throw new Error("<coordinates> must be a number");(y===!1||y===void 0)&&(s=JSON.parse(JSON.stringify(s)));var P=Math.pow(10,h);return jr(s,function(B){qo(B,P,g)}),s}function qo(s,u,h){s.length>h&&s.splice(h,s.length);for(var g=0;g<s.length;g++)s[g]=Math.round(s[g]*u)/u;return s}var eo=Kr;function Ds(s,u,h){if(h===void 0&&(h={}),h.final===!0)return Yi(s,u);var g=Un(s),y=Un(u),P=ln(g[0]),B=ln(y[0]),T=ln(g[1]),K=ln(y[1]),st=Math.sin(B-P)*Math.cos(K),jt=Math.cos(T)*Math.sin(K)-Math.sin(T)*Math.cos(K)*Math.cos(B-P);return Ye(Math.atan2(st,jt))}function Yi(s,u){var h=Ds(u,s);return h=(h+180)%360,h}function qi(s,u,h,g){g===void 0&&(g={});var y=Un(s),P=ln(y[0]),B=ln(y[1]),T=ln(h),K=Ge(u,g.units),st=Math.asin(Math.sin(B)*Math.cos(K)+Math.cos(B)*Math.sin(K)*Math.cos(T)),jt=P+Math.atan2(Math.sin(T)*Math.sin(K)*Math.cos(B),Math.cos(K)-Math.sin(B)*Math.sin(st)),Dt=Ye(jt),ie=Ye(st);return Wt([Dt,ie],g.properties)}function fs(s,u,h){h===void 0&&(h={});var g=Wt([1/0,1/0],{dist:1/0}),y=0;return yr(s,function(P){for(var B=Zn(P),T=0;T<B.length-1;T++){var K=Wt(B[T]);K.properties.dist=to(u,K,h);var st=Wt(B[T+1]);st.properties.dist=to(u,st,h);var jt=to(K,st,h),Dt=Math.max(K.properties.dist,st.properties.dist),ie=Ds(K,st),pe=qi(u,Dt,ie+90,h),Se=qi(u,Dt,ie-90,h),Re=_r(ue([pe.geometry.coordinates,Se.geometry.coordinates]),ue([K.geometry.coordinates,st.geometry.coordinates])),Ue=null;Re.features.length>0&&(Ue=Re.features[0],Ue.properties.dist=to(u,Ue,h),Ue.properties.location=y+to(K,Ue,h)),K.properties.dist<g.properties.dist&&(g=K,g.properties.index=T,g.properties.location=y),st.properties.dist<g.properties.dist&&(g=st,g.properties.index=T+1,g.properties.location=y+jt),Ue&&Ue.properties.dist<g.properties.dist&&(g=Ue,g.properties.index=T),y+=jt}}),g}var Sr=fs;function Yr(s,u){if(!s)throw new Error("line is required");if(!u)throw new Error("splitter is required");var h=Mi(s),g=Mi(u);if(h!=="LineString")throw new Error("line must be LineString");if(g==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(g==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var y=eo(u,{precision:7});switch(g){case"Point":return Jr(s,y);case"MultiPoint":return no(s,y);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return no(s,_r(s,y))}}function no(s,u){var h=[],g=(0,ma.default)();return yr(u,function(y){if(h.forEach(function(T,K){T.id=K}),!h.length)h=Jr(s,y).features,h.forEach(function(T){T.bbox||(T.bbox=ll(Ts(T)))}),g.load(be(h));else{var P=g.search(y);if(P.features.length){var B=wi(y,P);h=h.filter(function(T){return T.id!==B.id}),g.remove(B),ei(Jr(B,y),function(T){h.push(T),g.insert(T)})}}}),be(h)}function Jr(s,u){var h=[],g=Zn(s)[0],y=Zn(s)[s.geometry.coordinates.length-1];if(Ns(g,Un(u))||Ns(y,Un(u)))return be([s]);var P=(0,ma.default)(),B=Qs(s);P.load(B);var T=P.search(u);if(!T.features.length)return be([s]);var K=wi(u,T),st=[g],jt=vr(B,function(Dt,ie,pe){var Se=Zn(ie)[1],Re=Un(u);return pe===K.id?(Dt.push(Re),h.push(ue(Dt)),Ns(Re,Se)?[Re]:[Re,Se]):(Dt.push(Se),Dt)},st);return jt.length>1&&h.push(ue(jt)),be(h)}function wi(s,u){if(!u.features.length)throw new Error("lines must contain features");if(u.features.length===1)return u.features[0];var h,g=1/0;return ei(u,function(y){var P=Sr(y,s),B=P.properties.dist;B<g&&(h=y,g=B)}),h}function Ns(s,u){return s[0]===u[0]&&s[1]===u[1]}var br=Yr;function ur(s,u,h){if(h===void 0&&(h={}),!s)throw new Error("point is required");if(!u)throw new Error("polygon is required");var g=Un(s),y=Ii(u),P=y.type,B=u.bbox,T=y.coordinates;if(B&&Ua(g,B)===!1)return!1;P==="Polygon"&&(T=[T]);for(var K=!1,st=0;st<T.length&&!K;st++)if($o(g,T[st][0],h.ignoreBoundary)){for(var jt=!1,Dt=1;Dt<T[st].length&&!jt;)$o(g,T[st][Dt],!h.ignoreBoundary)&&(jt=!0),Dt++;jt||(K=!0)}return K}function $o(s,u,h){var g=!1;u[0][0]===u[u.length-1][0]&&u[0][1]===u[u.length-1][1]&&(u=u.slice(0,u.length-1));for(var y=0,P=u.length-1;y<u.length;P=y++){var B=u[y][0],T=u[y][1],K=u[P][0],st=u[P][1],jt=s[1]*(B-K)+T*(K-s[0])+st*(s[0]-B)===0&&(B-s[0])*(K-s[0])<=0&&(T-s[1])*(st-s[1])<=0;if(jt)return!h;var Dt=T>s[1]!=st>s[1]&&s[0]<(K-B)*(s[1]-T)/(st-T)+B;Dt&&(g=!g)}return g}function Ua(s,u){return u[0]<=s[0]&&u[1]<=s[1]&&u[2]>=s[0]&&u[3]>=s[1]}function qa(s,u,h){h===void 0&&(h={});for(var g=Un(s),y=Zn(u),P=0;P<y.length-1;P++){var B=!1;if(h.ignoreEndVertices&&(P===0&&(B="start"),P===y.length-2&&(B="end"),P===0&&P+1===y.length-1&&(B="both")),cr(y[P],y[P+1],g,B,typeof h.epsilon>"u"?null:h.epsilon))return!0}return!1}function cr(s,u,h,g,y){var P=h[0],B=h[1],T=s[0],K=s[1],st=u[0],jt=u[1],Dt=h[0]-T,ie=h[1]-K,pe=st-T,Se=jt-K,Re=Dt*Se-ie*pe;if(y!==null){if(Math.abs(Re)>y)return!1}else if(Re!==0)return!1;if(g){if(g==="start")return Math.abs(pe)>=Math.abs(Se)?pe>0?T<P&&P<=st:st<=P&&P<T:Se>0?K<B&&B<=jt:jt<=B&&B<K;if(g==="end")return Math.abs(pe)>=Math.abs(Se)?pe>0?T<=P&&P<st:st<P&&P<=T:Se>0?K<=B&&B<jt:jt<B&&B<=K;if(g==="both")return Math.abs(pe)>=Math.abs(Se)?pe>0?T<P&&P<st:st<P&&P<T:Se>0?K<B&&B<jt:jt<B&&B<K}else return Math.abs(pe)>=Math.abs(Se)?pe>0?T<=P&&P<=st:st<=P&&P<=T:Se>0?K<=B&&B<=jt:jt<=B&&B<=K;return!1}var Er=qa;function _o(s,u){var h=Ii(s),g=Ii(u),y=h.type,P=g.type,B=h.coordinates,T=g.coordinates;switch(y){case"Point":switch(P){case"Point":return Kn(B,T);default:throw new Error("feature2 "+P+" geometry not supported")}case"MultiPoint":switch(P){case"Point":return Os(h,g);case"MultiPoint":return va(h,g);default:throw new Error("feature2 "+P+" geometry not supported")}case"LineString":switch(P){case"Point":return Er(g,h,{ignoreEndVertices:!0});case"LineString":return io(h,g);case"MultiPoint":return bo(h,g);default:throw new Error("feature2 "+P+" geometry not supported")}case"Polygon":switch(P){case"Point":return ur(g,h,{ignoreBoundary:!0});case"LineString":return Xr(h,g);case"Polygon":return Ji(h,g);case"MultiPoint":return wo(h,g);default:throw new Error("feature2 "+P+" geometry not supported")}default:throw new Error("feature1 "+y+" geometry not supported")}}function Os(s,u){var h,g=!1;for(h=0;h<s.coordinates.length;h++)if(Kn(s.coordinates[h],u.coordinates)){g=!0;break}return g}function va(s,u){for(var h=0,g=u.coordinates;h<g.length;h++){for(var y=g[h],P=!1,B=0,T=s.coordinates;B<T.length;B++){var K=T[B];if(Kn(y,K)){P=!0;break}}if(!P)return!1}return!0}function bo(s,u){for(var h=!1,g=0,y=u.coordinates;g<y.length;g++){var P=y[g];if(Er(P,s,{ignoreEndVertices:!0})&&(h=!0),!Er(P,s))return!1}return!!h}function wo(s,u){for(var h=0,g=u.coordinates;h<g.length;h++){var y=g[h];if(!ur(y,s,{ignoreBoundary:!0}))return!1}return!0}function io(s,u){for(var h=!1,g=0,y=u.coordinates;g<y.length;g++){var P=y[g];if(Er({type:"Point",coordinates:P},s,{ignoreEndVertices:!0})&&(h=!0),!Er({type:"Point",coordinates:P},s,{ignoreEndVertices:!1}))return!1}return h}function Xr(s,u){var h=!1,g=0,y=Ts(s),P=Ts(u);if(!Xn(y,P))return!1;for(g;g<u.coordinates.length-1;g++){var B=ki(u.coordinates[g],u.coordinates[g+1]);if(ur({type:"Point",coordinates:B},s,{ignoreBoundary:!0})){h=!0;break}}return h}function Ji(s,u){if(s.type==="Feature"&&s.geometry===null||u.type==="Feature"&&u.geometry===null)return!1;var h=Ts(s),g=Ts(u);if(!Xn(h,g))return!1;for(var y=Ii(u).coordinates,P=0,B=y;P<B.length;P++)for(var T=B[P],K=0,st=T;K<st.length;K++){var jt=st[K];if(!ur(jt,s))return!1}return!0}function Xn(s,u){return!(s[0]>u[0]||s[2]<u[2]||s[1]>u[1]||s[3]<u[3])}function Kn(s,u){return s[0]===u[0]&&s[1]===u[1]}function ki(s,u){return[(s[0]+u[0])/2,(s[1]+u[1])/2]}var ni=p(or()),ds=s=>()=>s,xo=s=>{let u=s?(h,g)=>g.minus(h).abs().isLessThanOrEqualTo(s):ds(!1);return(h,g)=>u(h,g)?0:h.comparedTo(g)};function Rs(s){let u=s?(h,g,y,P,B)=>h.exponentiatedBy(2).isLessThanOrEqualTo(P.minus(g).exponentiatedBy(2).plus(B.minus(y).exponentiatedBy(2)).times(s)):ds(!1);return(h,g,y)=>{let P=h.x,B=h.y,T=y.x,K=y.y,st=B.minus(K).times(g.x.minus(T)).minus(P.minus(T).times(g.y.minus(K)));return u(st,P,B,T,K)?0:st.comparedTo(0)}}var ul=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Lo=Math.ceil,ji=Math.floor,ii="[BigNumber Error] ",Ar=ii+"Number primitive has more than 15 significant digits: ",Mr=1e14,vn=14,cl=9007199254740991,Vo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Qr=1e7,hr=1e9;function Il(s){var u,h,g,y=Ft.prototype={constructor:Ft,toString:null,valueOf:null},P=new Ft(1),B=20,T=4,K=-7,st=21,jt=-1e7,Dt=1e7,ie=!1,pe=1,Se=0,Re={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ue="0123456789abcdefghijklmnopqrstuvwxyz",yn=!0;function Ft(Q,ot){var Ct,xt,Pt,kt,Zt,Gt,Xt,fe,he=this;if(!(he instanceof Ft))return new Ft(Q,ot);if(ot==null){if(Q&&Q._isBigNumber===!0){he.s=Q.s,!Q.c||Q.e>Dt?he.c=he.e=null:Q.e<jt?he.c=[he.e=0]:(he.e=Q.e,he.c=Q.c.slice());return}if((Gt=typeof Q=="number")&&Q*0==0){if(he.s=1/Q<0?(Q=-Q,-1):1,Q===~~Q){for(kt=0,Zt=Q;Zt>=10;Zt/=10,kt++);kt>Dt?he.c=he.e=null:(he.e=kt,he.c=[Q]);return}fe=String(Q)}else{if(!ul.test(fe=String(Q)))return g(he,fe,Gt);he.s=fe.charCodeAt(0)==45?(fe=fe.slice(1),-1):1}(kt=fe.indexOf("."))>-1&&(fe=fe.replace(".","")),(Zt=fe.search(/e/i))>0?(kt<0&&(kt=Zt),kt+=+fe.slice(Zt+1),fe=fe.substring(0,Zt)):kt<0&&(kt=fe.length)}else{if(r(ot,2,Ue.length,"Base"),ot==10&&yn)return he=new Ft(Q),ae(he,B+he.e+1,T);if(fe=String(Q),Gt=typeof Q=="number"){if(Q*0!=0)return g(he,fe,Gt,ot);if(he.s=1/Q<0?(fe=fe.slice(1),-1):1,Ft.DEBUG&&fe.replace(/^0\.0*|\./,"").length>15)throw Error(Ar+Q)}else he.s=fe.charCodeAt(0)===45?(fe=fe.slice(1),-1):1;for(Ct=Ue.slice(0,ot),kt=Zt=0,Xt=fe.length;Zt<Xt;Zt++)if(Ct.indexOf(xt=fe.charAt(Zt))<0){if(xt=="."){if(Zt>kt){kt=Xt;continue}}else if(!Pt&&(fe==fe.toUpperCase()&&(fe=fe.toLowerCase())||fe==fe.toLowerCase()&&(fe=fe.toUpperCase()))){Pt=!0,Zt=-1,kt=0;continue}return g(he,String(Q),Gt,ot)}Gt=!1,fe=h(fe,ot,10,he.s),(kt=fe.indexOf("."))>-1?fe=fe.replace(".",""):kt=fe.length}for(Zt=0;fe.charCodeAt(Zt)===48;Zt++);for(Xt=fe.length;fe.charCodeAt(--Xt)===48;);if(fe=fe.slice(Zt,++Xt)){if(Xt-=Zt,Gt&&Ft.DEBUG&&Xt>15&&(Q>cl||Q!==ji(Q)))throw Error(Ar+he.s*Q);if((kt=kt-Zt-1)>Dt)he.c=he.e=null;else if(kt<jt)he.c=[he.e=0];else{if(he.e=kt,he.c=[],Zt=(kt+1)%vn,kt<0&&(Zt+=vn),Zt<Xt){for(Zt&&he.c.push(+fe.slice(0,Zt)),Xt-=vn;Zt<Xt;)he.c.push(+fe.slice(Zt,Zt+=vn));Zt=vn-(fe=fe.slice(Zt)).length}else Zt-=Xt;for(;Zt--;fe+="0");he.c.push(+fe)}}else he.c=[he.e=0]}Ft.clone=Il,Ft.ROUND_UP=0,Ft.ROUND_DOWN=1,Ft.ROUND_CEIL=2,Ft.ROUND_FLOOR=3,Ft.ROUND_HALF_UP=4,Ft.ROUND_HALF_DOWN=5,Ft.ROUND_HALF_EVEN=6,Ft.ROUND_HALF_CEIL=7,Ft.ROUND_HALF_FLOOR=8,Ft.EUCLID=9,Ft.config=Ft.set=function(Q){var ot,Ct;if(Q!=null)if(typeof Q=="object"){if(Q.hasOwnProperty(ot="DECIMAL_PLACES")&&(Ct=Q[ot],r(Ct,0,hr,ot),B=Ct),Q.hasOwnProperty(ot="ROUNDING_MODE")&&(Ct=Q[ot],r(Ct,0,8,ot),T=Ct),Q.hasOwnProperty(ot="EXPONENTIAL_AT")&&(Ct=Q[ot],Ct&&Ct.pop?(r(Ct[0],-1e9,0,ot),r(Ct[1],0,hr,ot),K=Ct[0],st=Ct[1]):(r(Ct,-1e9,hr,ot),K=-(st=Ct<0?-Ct:Ct))),Q.hasOwnProperty(ot="RANGE"))if(Ct=Q[ot],Ct&&Ct.pop)r(Ct[0],-1e9,-1,ot),r(Ct[1],1,hr,ot),jt=Ct[0],Dt=Ct[1];else if(r(Ct,-1e9,hr,ot),Ct)jt=-(Dt=Ct<0?-Ct:Ct);else throw Error(ii+ot+" cannot be zero: "+Ct);if(Q.hasOwnProperty(ot="CRYPTO"))if(Ct=Q[ot],Ct===!!Ct)if(Ct)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ie=Ct;else throw ie=!Ct,Error(ii+"crypto unavailable");else ie=Ct;else throw Error(ii+ot+" not true or false: "+Ct);if(Q.hasOwnProperty(ot="MODULO_MODE")&&(Ct=Q[ot],r(Ct,0,9,ot),pe=Ct),Q.hasOwnProperty(ot="POW_PRECISION")&&(Ct=Q[ot],r(Ct,0,hr,ot),Se=Ct),Q.hasOwnProperty(ot="FORMAT"))if(Ct=Q[ot],typeof Ct=="object")Re=Ct;else throw Error(ii+ot+" not an object: "+Ct);if(Q.hasOwnProperty(ot="ALPHABET"))if(Ct=Q[ot],typeof Ct=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Ct))yn=Ct.slice(0,10)=="0123456789",Ue=Ct;else throw Error(ii+ot+" invalid: "+Ct)}else throw Error(ii+"Object expected: "+Q);return{DECIMAL_PLACES:B,ROUNDING_MODE:T,EXPONENTIAL_AT:[K,st],RANGE:[jt,Dt],CRYPTO:ie,MODULO_MODE:pe,POW_PRECISION:Se,FORMAT:Re,ALPHABET:Ue}},Ft.isBigNumber=function(Q){if(!Q||Q._isBigNumber!==!0)return!1;if(!Ft.DEBUG)return!0;var ot,Ct,xt=Q.c,Pt=Q.e,kt=Q.s;t:if({}.toString.call(xt)=="[object Array]"){if((kt===1||kt===-1)&&Pt>=-1e9&&Pt<=hr&&Pt===ji(Pt)){if(xt[0]===0){if(Pt===0&&xt.length===1)return!0;break t}if(ot=(Pt+1)%vn,ot<1&&(ot+=vn),String(xt[0]).length==ot){for(ot=0;ot<xt.length;ot++)if(Ct=xt[ot],Ct<0||Ct>=Mr||Ct!==ji(Ct))break t;if(Ct!==0)return!0}}}else if(xt===null&&Pt===null&&(kt===null||kt===1||kt===-1))return!0;throw Error(ii+"Invalid BigNumber: "+Q)},Ft.maximum=Ft.max=function(){return Jt(arguments,-1)},Ft.minimum=Ft.min=function(){return Jt(arguments,1)},Ft.random=function(){var Q=9007199254740992,ot=Math.random()*Q&2097151?function(){return ji(Math.random()*Q)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Ct){var xt,Pt,kt,Zt,Gt,Xt=0,fe=[],he=new Ft(P);if(Ct==null?Ct=B:r(Ct,0,hr),Zt=Lo(Ct/vn),ie)if(crypto.getRandomValues){for(xt=crypto.getRandomValues(new Uint32Array(Zt*=2));Xt<Zt;)Gt=xt[Xt]*131072+(xt[Xt+1]>>>11),Gt>=9e15?(Pt=crypto.getRandomValues(new Uint32Array(2)),xt[Xt]=Pt[0],xt[Xt+1]=Pt[1]):(fe.push(Gt%1e14),Xt+=2);Xt=Zt/2}else if(crypto.randomBytes){for(xt=crypto.randomBytes(Zt*=7);Xt<Zt;)Gt=(xt[Xt]&31)*281474976710656+xt[Xt+1]*1099511627776+xt[Xt+2]*4294967296+xt[Xt+3]*16777216+(xt[Xt+4]<<16)+(xt[Xt+5]<<8)+xt[Xt+6],Gt>=9e15?crypto.randomBytes(7).copy(xt,Xt):(fe.push(Gt%1e14),Xt+=7);Xt=Zt/7}else throw ie=!1,Error(ii+"crypto unavailable");if(!ie)for(;Xt<Zt;)Gt=ot(),Gt<9e15&&(fe[Xt++]=Gt%1e14);for(Zt=fe[--Xt],Ct%=vn,Zt&&Ct&&(Gt=Vo[vn-Ct],fe[Xt]=ji(Zt/Gt)*Gt);fe[Xt]===0;fe.pop(),Xt--);if(Xt<0)fe=[kt=0];else{for(kt=-1;fe[0]===0;fe.splice(0,1),kt-=vn);for(Xt=1,Gt=fe[0];Gt>=10;Gt/=10,Xt++);Xt<vn&&(kt-=vn-Xt)}return he.e=kt,he.c=fe,he}}(),Ft.sum=function(){for(var Q=1,ot=arguments,Ct=new Ft(ot[0]);Q<ot.length;)Ct=Ct.plus(ot[Q++]);return Ct},h=function(){var Q="0123456789";function ot(Ct,xt,Pt,kt){for(var Zt,Gt=[0],Xt,fe=0,he=Ct.length;fe<he;){for(Xt=Gt.length;Xt--;Gt[Xt]*=xt);for(Gt[0]+=kt.indexOf(Ct.charAt(fe++)),Zt=0;Zt<Gt.length;Zt++)Gt[Zt]>Pt-1&&(Gt[Zt+1]==null&&(Gt[Zt+1]=0),Gt[Zt+1]+=Gt[Zt]/Pt|0,Gt[Zt]%=Pt)}return Gt.reverse()}return function(Ct,xt,Pt,kt,Zt){var Gt,Xt,fe,he,Ae,Ke,tn,on,Wn=Ct.indexOf("."),Yn=B,Fn=T;for(Wn>=0&&(he=Se,Se=0,Ct=Ct.replace(".",""),on=new Ft(xt),Ke=on.pow(Ct.length-Wn),Se=he,on.c=ot(k(xr(Ke.c),Ke.e,"0"),10,Pt,Q),on.e=on.c.length),tn=ot(Ct,xt,Pt,Zt?(Gt=Ue,Q):(Gt=Q,Ue)),fe=he=tn.length;tn[--he]==0;tn.pop());if(!tn[0])return Gt.charAt(0);if(Wn<0?--fe:(Ke.c=tn,Ke.e=fe,Ke.s=kt,Ke=u(Ke,on,Yn,Fn,Pt),tn=Ke.c,Ae=Ke.r,fe=Ke.e),Xt=fe+Yn+1,Wn=tn[Xt],he=Pt/2,Ae=Ae||Xt<0||tn[Xt+1]!=null,Ae=Fn<4?(Wn!=null||Ae)&&(Fn==0||Fn==(Ke.s<0?3:2)):Wn>he||Wn==he&&(Fn==4||Ae||Fn==6&&tn[Xt-1]&1||Fn==(Ke.s<0?8:7)),Xt<1||!tn[0])Ct=Ae?k(Gt.charAt(1),-Yn,Gt.charAt(0)):Gt.charAt(0);else{if(tn.length=Xt,Ae)for(--Pt;++tn[--Xt]>Pt;)tn[Xt]=0,Xt||(++fe,tn=[1].concat(tn));for(he=tn.length;!tn[--he];);for(Wn=0,Ct="";Wn<=he;Ct+=Gt.charAt(tn[Wn++]));Ct=k(Ct,fe,Gt.charAt(0))}return Ct}}(),u=function(){function Q(xt,Pt,kt){var Zt,Gt,Xt,fe,he=0,Ae=xt.length,Ke=Pt%Qr,tn=Pt/Qr|0;for(xt=xt.slice();Ae--;)Xt=xt[Ae]%Qr,fe=xt[Ae]/Qr|0,Zt=tn*Xt+fe*Ke,Gt=Ke*Xt+Zt%Qr*Qr+he,he=(Gt/kt|0)+(Zt/Qr|0)+tn*fe,xt[Ae]=Gt%kt;return he&&(xt=[he].concat(xt)),xt}function ot(xt,Pt,kt,Zt){var Gt,Xt;if(kt!=Zt)Xt=kt>Zt?1:-1;else for(Gt=Xt=0;Gt<kt;Gt++)if(xt[Gt]!=Pt[Gt]){Xt=xt[Gt]>Pt[Gt]?1:-1;break}return Xt}function Ct(xt,Pt,kt,Zt){for(var Gt=0;kt--;)xt[kt]-=Gt,Gt=xt[kt]<Pt[kt]?1:0,xt[kt]=Gt*Zt+xt[kt]-Pt[kt];for(;!xt[0]&&xt.length>1;xt.splice(0,1));}return function(xt,Pt,kt,Zt,Gt){var Xt,fe,he,Ae,Ke,tn,on,Wn,Yn,Fn,si,Tr,dl,Co,Ku,Po,ql,gs=xt.s==Pt.s?1:-1,dr=xt.c,Si=Pt.c;if(!dr||!dr[0]||!Si||!Si[0])return new Ft(!xt.s||!Pt.s||(dr?Si&&dr[0]==Si[0]:!Si)?NaN:dr&&dr[0]==0||!Si?gs*0:gs/0);for(Wn=new Ft(gs),Yn=Wn.c=[],fe=xt.e-Pt.e,gs=kt+fe+1,Gt||(Gt=Mr,fe=wr(xt.e/vn)-wr(Pt.e/vn),gs=gs/vn|0),he=0;Si[he]==(dr[he]||0);he++);if(Si[he]>(dr[he]||0)&&fe--,gs<0)Yn.push(1),Ae=!0;else{for(Co=dr.length,Po=Si.length,he=0,gs+=2,Ke=ji(Gt/(Si[0]+1)),Ke>1&&(Si=Q(Si,Ke,Gt),dr=Q(dr,Ke,Gt),Po=Si.length,Co=dr.length),dl=Po,Fn=dr.slice(0,Po),si=Fn.length;si<Po;Fn[si++]=0);ql=Si.slice(),ql=[0].concat(ql),Ku=Si[0],Si[1]>=Gt/2&&Ku++;do{if(Ke=0,Xt=ot(Si,Fn,Po,si),Xt<0){if(Tr=Fn[0],Po!=si&&(Tr=Tr*Gt+(Fn[1]||0)),Ke=ji(Tr/Ku),Ke>1)for(Ke>=Gt&&(Ke=Gt-1),tn=Q(Si,Ke,Gt),on=tn.length,si=Fn.length;ot(tn,Fn,on,si)==1;)Ke--,Ct(tn,Po<on?ql:Si,on,Gt),on=tn.length,Xt=1;else Ke==0&&(Xt=Ke=1),tn=Si.slice(),on=tn.length;if(on<si&&(tn=[0].concat(tn)),Ct(Fn,tn,si,Gt),si=Fn.length,Xt==-1)for(;ot(Si,Fn,Po,si)<1;)Ke++,Ct(Fn,Po<si?ql:Si,si,Gt),si=Fn.length}else Xt===0&&(Ke++,Fn=[0]);Yn[he++]=Ke,Fn[0]?Fn[si++]=dr[dl]||0:(Fn=[dr[dl]],si=1)}while((dl++<Co||Fn[0]!=null)&&gs--);Ae=Fn[0]!=null,Yn[0]||Yn.splice(0,1)}if(Gt==Mr){for(he=1,gs=Yn[0];gs>=10;gs/=10,he++);ae(Wn,kt+(Wn.e=he+fe*vn-1)+1,Zt,Ae)}else Wn.e=fe,Wn.r=+Ae;return Wn}}();function qt(Q,ot,Ct,xt){var Pt,kt,Zt,Gt,Xt;if(Ct==null?Ct=T:r(Ct,0,8),!Q.c)return Q.toString();if(Pt=Q.c[0],Zt=Q.e,ot==null)Xt=xr(Q.c),Xt=xt==1||xt==2&&(Zt<=K||Zt>=st)?m(Xt,Zt):k(Xt,Zt,"0");else if(Q=ae(new Ft(Q),ot,Ct),kt=Q.e,Xt=xr(Q.c),Gt=Xt.length,xt==1||xt==2&&(ot<=kt||kt<=K)){for(;Gt<ot;Xt+="0",Gt++);Xt=m(Xt,kt)}else if(ot-=Zt,Xt=k(Xt,kt,"0"),kt+1>Gt){if(--ot>0)for(Xt+=".";ot--;Xt+="0");}else if(ot+=kt-Gt,ot>0)for(kt+1==Gt&&(Xt+=".");ot--;Xt+="0");return Q.s<0&&Pt?"-"+Xt:Xt}function Jt(Q,ot){for(var Ct,xt,Pt=1,kt=new Ft(Q[0]);Pt<Q.length;Pt++)xt=new Ft(Q[Pt]),(!xt.s||(Ct=Is(kt,xt))===ot||Ct===0&&kt.s===ot)&&(kt=xt);return kt}function ye(Q,ot,Ct){for(var xt=1,Pt=ot.length;!ot[--Pt];ot.pop());for(Pt=ot[0];Pt>=10;Pt/=10,xt++);return(Ct=xt+Ct*vn-1)>Dt?Q.c=Q.e=null:Ct<jt?Q.c=[Q.e=0]:(Q.e=Ct,Q.c=ot),Q}g=function(){var Q=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ot=/^([^.]+)\.$/,Ct=/^\.([^.]+)$/,xt=/^-?(Infinity|NaN)$/,Pt=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(kt,Zt,Gt,Xt){var fe,he=Gt?Zt:Zt.replace(Pt,"");if(xt.test(he))kt.s=isNaN(he)?null:he<0?-1:1;else{if(!Gt&&(he=he.replace(Q,function(Ae,Ke,tn){return fe=(tn=tn.toLowerCase())=="x"?16:tn=="b"?2:8,!Xt||Xt==fe?Ke:Ae}),Xt&&(fe=Xt,he=he.replace(ot,"$1").replace(Ct,"0.$1")),Zt!=he))return new Ft(he,fe);if(Ft.DEBUG)throw Error(ii+"Not a"+(Xt?" base "+Xt:"")+" number: "+Zt);kt.s=null}kt.c=kt.e=null}}();function ae(Q,ot,Ct,xt){var Pt,kt,Zt,Gt,Xt,fe,he,Ae=Q.c,Ke=Vo;if(Ae){t:{for(Pt=1,Gt=Ae[0];Gt>=10;Gt/=10,Pt++);if(kt=ot-Pt,kt<0)kt+=vn,Zt=ot,Xt=Ae[fe=0],he=ji(Xt/Ke[Pt-Zt-1]%10);else if(fe=Lo((kt+1)/vn),fe>=Ae.length)if(xt){for(;Ae.length<=fe;Ae.push(0));Xt=he=0,Pt=1,kt%=vn,Zt=kt-vn+1}else break t;else{for(Xt=Gt=Ae[fe],Pt=1;Gt>=10;Gt/=10,Pt++);kt%=vn,Zt=kt-vn+Pt,he=Zt<0?0:ji(Xt/Ke[Pt-Zt-1]%10)}if(xt=xt||ot<0||Ae[fe+1]!=null||(Zt<0?Xt:Xt%Ke[Pt-Zt-1]),xt=Ct<4?(he||xt)&&(Ct==0||Ct==(Q.s<0?3:2)):he>5||he==5&&(Ct==4||xt||Ct==6&&(kt>0?Zt>0?Xt/Ke[Pt-Zt]:0:Ae[fe-1])%10&1||Ct==(Q.s<0?8:7)),ot<1||!Ae[0])return Ae.length=0,xt?(ot-=Q.e+1,Ae[0]=Ke[(vn-ot%vn)%vn],Q.e=-ot||0):Ae[0]=Q.e=0,Q;if(kt==0?(Ae.length=fe,Gt=1,fe--):(Ae.length=fe+1,Gt=Ke[vn-kt],Ae[fe]=Zt>0?ji(Xt/Ke[Pt-Zt]%Ke[Zt])*Gt:0),xt)for(;;)if(fe==0){for(kt=1,Zt=Ae[0];Zt>=10;Zt/=10,kt++);for(Zt=Ae[0]+=Gt,Gt=1;Zt>=10;Zt/=10,Gt++);kt!=Gt&&(Q.e++,Ae[0]==Mr&&(Ae[0]=1));break}else{if(Ae[fe]+=Gt,Ae[fe]!=Mr)break;Ae[fe--]=0,Gt=1}for(kt=Ae.length;Ae[--kt]===0;Ae.pop());}Q.e>Dt?Q.c=Q.e=null:Q.e<jt&&(Q.c=[Q.e=0])}return Q}function ge(Q){var ot,Ct=Q.e;return Ct===null?Q.toString():(ot=xr(Q.c),ot=Ct<=K||Ct>=st?m(ot,Ct):k(ot,Ct,"0"),Q.s<0?"-"+ot:ot)}return y.absoluteValue=y.abs=function(){var Q=new Ft(this);return Q.s<0&&(Q.s=1),Q},y.comparedTo=function(Q,ot){return Is(this,new Ft(Q,ot))},y.decimalPlaces=y.dp=function(Q,ot){var Ct,xt,Pt,kt=this;if(Q!=null)return r(Q,0,hr),ot==null?ot=T:r(ot,0,8),ae(new Ft(kt),Q+kt.e+1,ot);if(!(Ct=kt.c))return null;if(xt=((Pt=Ct.length-1)-wr(this.e/vn))*vn,Pt=Ct[Pt])for(;Pt%10==0;Pt/=10,xt--);return xt<0&&(xt=0),xt},y.dividedBy=y.div=function(Q,ot){return u(this,new Ft(Q,ot),B,T)},y.dividedToIntegerBy=y.idiv=function(Q,ot){return u(this,new Ft(Q,ot),0,1)},y.exponentiatedBy=y.pow=function(Q,ot){var Ct,xt,Pt,kt,Zt,Gt,Xt,fe,he,Ae=this;if(Q=new Ft(Q),Q.c&&!Q.isInteger())throw Error(ii+"Exponent not an integer: "+ge(Q));if(ot!=null&&(ot=new Ft(ot)),Gt=Q.e>14,!Ae.c||!Ae.c[0]||Ae.c[0]==1&&!Ae.e&&Ae.c.length==1||!Q.c||!Q.c[0])return he=new Ft(Math.pow(+ge(Ae),Gt?Q.s*(2-c(Q)):+ge(Q))),ot?he.mod(ot):he;if(Xt=Q.s<0,ot){if(ot.c?!ot.c[0]:!ot.s)return new Ft(NaN);xt=!Xt&&Ae.isInteger()&&ot.isInteger(),xt&&(Ae=Ae.mod(ot))}else{if(Q.e>9&&(Ae.e>0||Ae.e<-1||(Ae.e==0?Ae.c[0]>1||Gt&&Ae.c[1]>=24e7:Ae.c[0]<8e13||Gt&&Ae.c[0]<=9999975e7)))return kt=Ae.s<0&&c(Q)?-0:0,Ae.e>-1&&(kt=1/kt),new Ft(Xt?1/kt:kt);Se&&(kt=Lo(Se/vn+2))}for(Gt?(Ct=new Ft(.5),Xt&&(Q.s=1),fe=c(Q)):(Pt=Math.abs(+ge(Q)),fe=Pt%2),he=new Ft(P);;){if(fe){if(he=he.times(Ae),!he.c)break;kt?he.c.length>kt&&(he.c.length=kt):xt&&(he=he.mod(ot))}if(Pt){if(Pt=ji(Pt/2),Pt===0)break;fe=Pt%2}else if(Q=Q.times(Ct),ae(Q,Q.e+1,1),Q.e>14)fe=c(Q);else{if(Pt=+ge(Q),Pt===0)break;fe=Pt%2}Ae=Ae.times(Ae),kt?Ae.c&&Ae.c.length>kt&&(Ae.c.length=kt):xt&&(Ae=Ae.mod(ot))}return xt?he:(Xt&&(he=P.div(he)),ot?he.mod(ot):kt?ae(he,Se,T,Zt):he)},y.integerValue=function(Q){var ot=new Ft(this);return Q==null?Q=T:r(Q,0,8),ae(ot,ot.e+1,Q)},y.isEqualTo=y.eq=function(Q,ot){return Is(this,new Ft(Q,ot))===0},y.isFinite=function(){return!!this.c},y.isGreaterThan=y.gt=function(Q,ot){return Is(this,new Ft(Q,ot))>0},y.isGreaterThanOrEqualTo=y.gte=function(Q,ot){return(ot=Is(this,new Ft(Q,ot)))===1||ot===0},y.isInteger=function(){return!!this.c&&wr(this.e/vn)>this.c.length-2},y.isLessThan=y.lt=function(Q,ot){return Is(this,new Ft(Q,ot))<0},y.isLessThanOrEqualTo=y.lte=function(Q,ot){return(ot=Is(this,new Ft(Q,ot)))===-1||ot===0},y.isNaN=function(){return!this.s},y.isNegative=function(){return this.s<0},y.isPositive=function(){return this.s>0},y.isZero=function(){return!!this.c&&this.c[0]==0},y.minus=function(Q,ot){var Ct,xt,Pt,kt,Zt=this,Gt=Zt.s;if(Q=new Ft(Q,ot),ot=Q.s,!Gt||!ot)return new Ft(NaN);if(Gt!=ot)return Q.s=-ot,Zt.plus(Q);var Xt=Zt.e/vn,fe=Q.e/vn,he=Zt.c,Ae=Q.c;if(!Xt||!fe){if(!he||!Ae)return he?(Q.s=-ot,Q):new Ft(Ae?Zt:NaN);if(!he[0]||!Ae[0])return Ae[0]?(Q.s=-ot,Q):new Ft(he[0]?Zt:T==3?-0:0)}if(Xt=wr(Xt),fe=wr(fe),he=he.slice(),Gt=Xt-fe){for((kt=Gt<0)?(Gt=-Gt,Pt=he):(fe=Xt,Pt=Ae),Pt.reverse(),ot=Gt;ot--;Pt.push(0));Pt.reverse()}else for(xt=(kt=(Gt=he.length)<(ot=Ae.length))?Gt:ot,Gt=ot=0;ot<xt;ot++)if(he[ot]!=Ae[ot]){kt=he[ot]<Ae[ot];break}if(kt&&(Pt=he,he=Ae,Ae=Pt,Q.s=-Q.s),ot=(xt=Ae.length)-(Ct=he.length),ot>0)for(;ot--;he[Ct++]=0);for(ot=Mr-1;xt>Gt;){if(he[--xt]<Ae[xt]){for(Ct=xt;Ct&&!he[--Ct];he[Ct]=ot);--he[Ct],he[xt]+=Mr}he[xt]-=Ae[xt]}for(;he[0]==0;he.splice(0,1),--fe);return he[0]?ye(Q,he,fe):(Q.s=T==3?-1:1,Q.c=[Q.e=0],Q)},y.modulo=y.mod=function(Q,ot){var Ct,xt,Pt=this;return Q=new Ft(Q,ot),!Pt.c||!Q.s||Q.c&&!Q.c[0]?new Ft(NaN):!Q.c||Pt.c&&!Pt.c[0]?new Ft(Pt):(pe==9?(xt=Q.s,Q.s=1,Ct=u(Pt,Q,0,3),Q.s=xt,Ct.s*=xt):Ct=u(Pt,Q,0,pe),Q=Pt.minus(Ct.times(Q)),!Q.c[0]&&pe==1&&(Q.s=Pt.s),Q)},y.multipliedBy=y.times=function(Q,ot){var Ct,xt,Pt,kt,Zt,Gt,Xt,fe,he,Ae,Ke,tn,on,Wn,Yn,Fn=this,si=Fn.c,Tr=(Q=new Ft(Q,ot)).c;if(!si||!Tr||!si[0]||!Tr[0])return!Fn.s||!Q.s||si&&!si[0]&&!Tr||Tr&&!Tr[0]&&!si?Q.c=Q.e=Q.s=null:(Q.s*=Fn.s,!si||!Tr?Q.c=Q.e=null:(Q.c=[0],Q.e=0)),Q;for(xt=wr(Fn.e/vn)+wr(Q.e/vn),Q.s*=Fn.s,Xt=si.length,Ae=Tr.length,Xt<Ae&&(on=si,si=Tr,Tr=on,Pt=Xt,Xt=Ae,Ae=Pt),Pt=Xt+Ae,on=[];Pt--;on.push(0));for(Wn=Mr,Yn=Qr,Pt=Ae;--Pt>=0;){for(Ct=0,Ke=Tr[Pt]%Yn,tn=Tr[Pt]/Yn|0,Zt=Xt,kt=Pt+Zt;kt>Pt;)fe=si[--Zt]%Yn,he=si[Zt]/Yn|0,Gt=tn*fe+he*Ke,fe=Ke*fe+Gt%Yn*Yn+on[kt]+Ct,Ct=(fe/Wn|0)+(Gt/Yn|0)+tn*he,on[kt--]=fe%Wn;on[kt]=Ct}return Ct?++xt:on.splice(0,1),ye(Q,on,xt)},y.negated=function(){var Q=new Ft(this);return Q.s=-Q.s||null,Q},y.plus=function(Q,ot){var Ct,xt=this,Pt=xt.s;if(Q=new Ft(Q,ot),ot=Q.s,!Pt||!ot)return new Ft(NaN);if(Pt!=ot)return Q.s=-ot,xt.minus(Q);var kt=xt.e/vn,Zt=Q.e/vn,Gt=xt.c,Xt=Q.c;if(!kt||!Zt){if(!Gt||!Xt)return new Ft(Pt/0);if(!Gt[0]||!Xt[0])return Xt[0]?Q:new Ft(Gt[0]?xt:Pt*0)}if(kt=wr(kt),Zt=wr(Zt),Gt=Gt.slice(),Pt=kt-Zt){for(Pt>0?(Zt=kt,Ct=Xt):(Pt=-Pt,Ct=Gt),Ct.reverse();Pt--;Ct.push(0));Ct.reverse()}for(Pt=Gt.length,ot=Xt.length,Pt-ot<0&&(Ct=Xt,Xt=Gt,Gt=Ct,ot=Pt),Pt=0;ot;)Pt=(Gt[--ot]=Gt[ot]+Xt[ot]+Pt)/Mr|0,Gt[ot]=Mr===Gt[ot]?0:Gt[ot]%Mr;return Pt&&(Gt=[Pt].concat(Gt),++Zt),ye(Q,Gt,Zt)},y.precision=y.sd=function(Q,ot){var Ct,xt,Pt,kt=this;if(Q!=null&&Q!==!!Q)return r(Q,1,hr),ot==null?ot=T:r(ot,0,8),ae(new Ft(kt),Q,ot);if(!(Ct=kt.c))return null;if(Pt=Ct.length-1,xt=Pt*vn+1,Pt=Ct[Pt]){for(;Pt%10==0;Pt/=10,xt--);for(Pt=Ct[0];Pt>=10;Pt/=10,xt++);}return Q&&kt.e+1>xt&&(xt=kt.e+1),xt},y.shiftedBy=function(Q){return r(Q,-9007199254740991,cl),this.times("1e"+Q)},y.squareRoot=y.sqrt=function(){var Q,ot,Ct,xt,Pt,kt=this,Zt=kt.c,Gt=kt.s,Xt=kt.e,fe=B+4,he=new Ft("0.5");if(Gt!==1||!Zt||!Zt[0])return new Ft(!Gt||Gt<0&&(!Zt||Zt[0])?NaN:Zt?kt:1/0);if(Gt=Math.sqrt(+ge(kt)),Gt==0||Gt==1/0?(ot=xr(Zt),(ot.length+Xt)%2==0&&(ot+="0"),Gt=Math.sqrt(+ot),Xt=wr((Xt+1)/2)-(Xt<0||Xt%2),Gt==1/0?ot="5e"+Xt:(ot=Gt.toExponential(),ot=ot.slice(0,ot.indexOf("e")+1)+Xt),Ct=new Ft(ot)):Ct=new Ft(Gt+""),Ct.c[0]){for(Xt=Ct.e,Gt=Xt+fe,Gt<3&&(Gt=0);;)if(Pt=Ct,Ct=he.times(Pt.plus(u(kt,Pt,fe,1))),xr(Pt.c).slice(0,Gt)===(ot=xr(Ct.c)).slice(0,Gt))if(Ct.e<Xt&&--Gt,ot=ot.slice(Gt-3,Gt+1),ot=="9999"||!xt&&ot=="4999"){if(!xt&&(ae(Pt,Pt.e+B+2,0),Pt.times(Pt).eq(kt))){Ct=Pt;break}fe+=4,Gt+=4,xt=1}else{(!+ot||!+ot.slice(1)&&ot.charAt(0)=="5")&&(ae(Ct,Ct.e+B+2,1),Q=!Ct.times(Ct).eq(kt));break}}return ae(Ct,Ct.e+B+1,T,Q)},y.toExponential=function(Q,ot){return Q!=null&&(r(Q,0,hr),Q++),qt(this,Q,ot,1)},y.toFixed=function(Q,ot){return Q!=null&&(r(Q,0,hr),Q=Q+this.e+1),qt(this,Q,ot)},y.toFormat=function(Q,ot,Ct){var xt,Pt=this;if(Ct==null)Q!=null&&ot&&typeof ot=="object"?(Ct=ot,ot=null):Q&&typeof Q=="object"?(Ct=Q,Q=ot=null):Ct=Re;else if(typeof Ct!="object")throw Error(ii+"Argument not an object: "+Ct);if(xt=Pt.toFixed(Q,ot),Pt.c){var kt,Zt=xt.split("."),Gt=+Ct.groupSize,Xt=+Ct.secondaryGroupSize,fe=Ct.groupSeparator||"",he=Zt[0],Ae=Zt[1],Ke=Pt.s<0,tn=Ke?he.slice(1):he,on=tn.length;if(Xt&&(kt=Gt,Gt=Xt,Xt=kt,on-=kt),Gt>0&&on>0){for(kt=on%Gt||Gt,he=tn.substr(0,kt);kt<on;kt+=Gt)he+=fe+tn.substr(kt,Gt);Xt>0&&(he+=fe+tn.slice(kt)),Ke&&(he="-"+he)}xt=Ae?he+(Ct.decimalSeparator||"")+((Xt=+Ct.fractionGroupSize)?Ae.replace(new RegExp("\\d{"+Xt+"}\\B","g"),"$&"+(Ct.fractionGroupSeparator||"")):Ae):he}return(Ct.prefix||"")+xt+(Ct.suffix||"")},y.toFraction=function(Q){var ot,Ct,xt,Pt,kt,Zt,Gt,Xt,fe,he,Ae,Ke,tn=this,on=tn.c;if(Q!=null&&(Gt=new Ft(Q),!Gt.isInteger()&&(Gt.c||Gt.s!==1)||Gt.lt(P)))throw Error(ii+"Argument "+(Gt.isInteger()?"out of range: ":"not an integer: ")+ge(Gt));if(!on)return new Ft(tn);for(ot=new Ft(P),fe=Ct=new Ft(P),xt=Xt=new Ft(P),Ke=xr(on),kt=ot.e=Ke.length-tn.e-1,ot.c[0]=Vo[(Zt=kt%vn)<0?vn+Zt:Zt],Q=!Q||Gt.comparedTo(ot)>0?kt>0?ot:fe:Gt,Zt=Dt,Dt=1/0,Gt=new Ft(Ke),Xt.c[0]=0;he=u(Gt,ot,0,1),Pt=Ct.plus(he.times(xt)),Pt.comparedTo(Q)!=1;)Ct=xt,xt=Pt,fe=Xt.plus(he.times(Pt=fe)),Xt=Pt,ot=Gt.minus(he.times(Pt=ot)),Gt=Pt;return Pt=u(Q.minus(Ct),xt,0,1),Xt=Xt.plus(Pt.times(fe)),Ct=Ct.plus(Pt.times(xt)),Xt.s=fe.s=tn.s,kt=kt*2,Ae=u(fe,xt,kt,T).minus(tn).abs().comparedTo(u(Xt,Ct,kt,T).minus(tn).abs())<1?[fe,xt]:[Xt,Ct],Dt=Zt,Ae},y.toNumber=function(){return+ge(this)},y.toPrecision=function(Q,ot){return Q!=null&&r(Q,1,hr),qt(this,Q,ot,2)},y.toString=function(Q){var ot,Ct=this,xt=Ct.s,Pt=Ct.e;return Pt===null?xt?(ot="Infinity",xt<0&&(ot="-"+ot)):ot="NaN":(Q==null?ot=Pt<=K||Pt>=st?m(xr(Ct.c),Pt):k(xr(Ct.c),Pt,"0"):Q===10&&yn?(Ct=ae(new Ft(Ct),B+Pt+1,T),ot=k(xr(Ct.c),Ct.e,"0")):(r(Q,2,Ue.length,"Base"),ot=h(k(xr(Ct.c),Pt,"0"),10,Q,xt,!0)),xt<0&&Ct.c[0]&&(ot="-"+ot)),ot},y.valueOf=y.toJSON=function(){return ge(this)},y._isBigNumber=!0,y[Symbol.toStringTag]="BigNumber",y[Symbol.for("nodejs.util.inspect.custom")]=y.valueOf,s!=null&&Ft.set(s),Ft}function wr(s){var u=s|0;return s>0||s===u?u:u-1}function xr(s){for(var u,h,g=1,y=s.length,P=s[0]+"";g<y;){for(u=s[g++]+"",h=vn-u.length;h--;u="0"+u);P+=u}for(y=P.length;P.charCodeAt(--y)===48;);return P.slice(0,y+1||1)}function Is(s,u){var h,g,y=s.c,P=u.c,B=s.s,T=u.s,K=s.e,st=u.e;if(!B||!T)return null;if(h=y&&!y[0],g=P&&!P[0],h||g)return h?g?0:-T:B;if(B!=T)return B;if(h=B<0,g=K==st,!y||!P)return g?0:!y^h?1:-1;if(!g)return K>st^h?1:-1;for(T=(K=y.length)<(st=P.length)?K:st,B=0;B<T;B++)if(y[B]!=P[B])return y[B]>P[B]^h?1:-1;return K==st?0:K>st^h?1:-1}function r(s,u,h,g){if(s<u||s>h||s!==ji(s))throw Error(ii+(g||"Argument")+(typeof s=="number"?s<u||s>h?" out of range: ":" not an integer: ":" not a primitive number: ")+String(s))}function c(s){var u=s.c.length-1;return wr(s.e/vn)==u&&s.c[u]%2!=0}function m(s,u){return(s.length>1?s.charAt(0)+"."+s.slice(1):s)+(u<0?"e":"e+")+u}function k(s,u,h){var g,y;if(u<0){for(y=h+".";++u;y+=h);s=y+s}else if(g=s.length,++u>g){for(y=h,u-=g;--u;y+=h);s+=y}else u<g&&(s=s.slice(0,u)+"."+s.slice(u));return s}var F=Il(),lt=F,Vt=class{constructor(s){Te(this,"key");Te(this,"left",null);Te(this,"right",null);this.key=s}},de=class extends Vt{constructor(s){super(s)}},_e=class{constructor(){Te(this,"size",0);Te(this,"modificationCount",0);Te(this,"splayCount",0)}splay(s){let u=this.root;if(u==null)return this.compare(s,s),-1;let h=null,g=null,y=null,P=null,B=u,T=this.compare,K;for(;;)if(K=T(B.key,s),K>0){let st=B.left;if(st==null||(K=T(st.key,s),K>0&&(B.left=st.right,st.right=B,B=st,st=B.left,st==null)))break;h==null?g=B:h.left=B,h=B,B=st}else if(K<0){let st=B.right;if(st==null||(K=T(st.key,s),K<0&&(B.right=st.left,st.left=B,B=st,st=B.right,st==null)))break;y==null?P=B:y.right=B,y=B,B=st}else break;return y!=null&&(y.right=B.left,B.left=P),h!=null&&(h.left=B.right,B.right=g),this.root!==B&&(this.root=B,this.splayCount++),K}splayMin(s){let u=s,h=u.left;for(;h!=null;){let g=h;u.left=g.right,g.right=u,u=g,h=u.left}return u}splayMax(s){let u=s,h=u.right;for(;h!=null;){let g=h;u.right=g.left,g.left=u,u=g,h=u.right}return u}_delete(s){if(this.root==null||this.splay(s)!=0)return null;let u=this.root,h=u,g=u.left;if(this.size--,g==null)this.root=u.right;else{let y=u.right;u=this.splayMax(g),u.right=y,this.root=u}return this.modificationCount++,h}addNewRoot(s,u){this.size++,this.modificationCount++;let h=this.root;if(h==null){this.root=s;return}u<0?(s.left=h,s.right=h.right,h.right=null):(s.right=h,s.left=h.left,h.left=null),this.root=s}_first(){let s=this.root;return s==null?null:(this.root=this.splayMin(s),this.root)}_last(){let s=this.root;return s==null?null:(this.root=this.splayMax(s),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(s){return this.validKey(s)&&this.splay(s)==0}defaultCompare(){return(s,u)=>s<u?-1:s>u?1:0}wrap(){return{getRoot:()=>this.root,setRoot:s=>{this.root=s},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:s=>{this.splayCount=s},splay:s=>this.splay(s),has:s=>this.has(s)}}},Me=class lc extends _e{constructor(h,g){super();Te(this,"root",null);Te(this,"compare");Te(this,"validKey");Te(this,Ve,"[object Set]");this.compare=h??this.defaultCompare(),this.validKey=g??(y=>y!=null&&y!=null)}delete(h){return this.validKey(h)?this._delete(h)!=null:!1}deleteAll(h){for(let g of h)this.delete(g)}forEach(h){let g=this[Symbol.iterator](),y;for(;y=g.next(),!y.done;)h(y.value,y.value,this)}add(h){let g=this.splay(h);return g!=0&&this.addNewRoot(new de(h),g),this}addAndReturn(h){let g=this.splay(h);return g!=0&&this.addNewRoot(new de(h),g),this.root.key}addAll(h){for(let g of h)this.add(g)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)<0)return this.root.key;let g=this.root.left;if(g==null)return null;let y=g.right;for(;y!=null;)g=y,y=g.right;return g.key}firstAfter(h){if(h==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(h)>0)return this.root.key;let g=this.root.right;if(g==null)return null;let y=g.left;for(;y!=null;)g=y,y=g.left;return g.key}retainAll(h){let g=new lc(this.compare,this.validKey),y=this.modificationCount;for(let P of h){if(y!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(P)&&this.splay(P)==0&&g.add(this.root.key)}g.size!=this.size&&(this.root=g.root,this.size=g.size,this.modificationCount++)}lookup(h){return!this.validKey(h)||this.splay(h)!=0?null:this.root.key}intersection(h){let g=new lc(this.compare,this.validKey);for(let y of this)h.has(y)&&g.add(y);return g}difference(h){let g=new lc(this.compare,this.validKey);for(let y of this)h.has(y)||g.add(y);return g}union(h){let g=this.clone();return g.addAll(h),g}clone(){let h=new lc(this.compare,this.validKey);return h.size=this.size,h.root=this.copyNode(this.root),h}copyNode(h){if(h==null)return null;function g(P,B){let T,K;do{if(T=P.left,K=P.right,T!=null){let st=new de(T.key);B.left=st,g(T,st)}if(K!=null){let st=new de(K.key);B.right=st,P=K,B=st}}while(K!=null)}let y=new de(h.key);return g(h,y),y}toSet(){return this.clone()}entries(){return new Mn(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(fn=Symbol.iterator,Ve=Symbol.toStringTag,fn)](){return new un(this.wrap())}},We=class{constructor(s){Te(this,"tree");Te(this,"path",new Array);Te(this,"modificationCount",null);Te(this,"splayCount");this.tree=s,this.splayCount=s.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let s=this.path[this.path.length-1];return this.getValue(s)}rebuildPath(s){this.path.splice(0,this.path.length),this.tree.splay(s),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(s){for(;s!=null;)this.path.push(s),s=s.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let h=this.tree.getRoot();for(;h!=null;)this.path.push(h),h=h.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let s=this.path[this.path.length-1],u=s.right;if(u!=null){for(;u!=null;)this.path.push(u),u=u.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===s;)s=this.path.pop();return this.path.length>0}},un=class extends We{getValue(s){return s.key}},Mn=class extends We{getValue(s){return[s.key,s.key]}},Lr=s=>s,zi=s=>{if(s){let u=new Me(xo(s)),h=new Me(xo(s)),g=(P,B)=>B.addAndReturn(P),y=P=>({x:g(P.x,u),y:g(P.y,h)});return y({x:new lt(0),y:new lt(0)}),y}return Lr},Br=s=>({set:u=>{xi=Br(u)},reset:()=>Br(s),compare:xo(s),snap:zi(s),orient:Rs(s)}),xi=Br(),Fs=(s,u)=>s.ll.x.isLessThanOrEqualTo(u.x)&&u.x.isLessThanOrEqualTo(s.ur.x)&&s.ll.y.isLessThanOrEqualTo(u.y)&&u.y.isLessThanOrEqualTo(s.ur.y),Fl=(s,u)=>{if(u.ur.x.isLessThan(s.ll.x)||s.ur.x.isLessThan(u.ll.x)||u.ur.y.isLessThan(s.ll.y)||s.ur.y.isLessThan(u.ll.y))return null;let h=s.ll.x.isLessThan(u.ll.x)?u.ll.x:s.ll.x,g=s.ur.x.isLessThan(u.ur.x)?s.ur.x:u.ur.x,y=s.ll.y.isLessThan(u.ll.y)?u.ll.y:s.ll.y,P=s.ur.y.isLessThan(u.ur.y)?s.ur.y:u.ur.y;return{ll:{x:h,y},ur:{x:g,y:P}}},ps=(s,u)=>s.x.times(u.y).minus(s.y.times(u.x)),ts=(s,u)=>s.x.times(u.x).plus(s.y.times(u.y)),Ur=s=>ts(s,s).sqrt(),Gu=(s,u,h)=>{let g={x:u.x.minus(s.x),y:u.y.minus(s.y)},y={x:h.x.minus(s.x),y:h.y.minus(s.y)};return ps(y,g).div(Ur(y)).div(Ur(g))},jl=(s,u,h)=>{let g={x:u.x.minus(s.x),y:u.y.minus(s.y)},y={x:h.x.minus(s.x),y:h.y.minus(s.y)};return ts(y,g).div(Ur(y)).div(Ur(g))},Qn=(s,u,h)=>u.y.isZero()?null:{x:s.x.plus(u.x.div(u.y).times(h.minus(s.y))),y:h},fr=(s,u,h)=>u.x.isZero()?null:{x:h,y:s.y.plus(u.y.div(u.x).times(h.minus(s.x)))},Wu=(s,u,h,g)=>{if(u.x.isZero())return fr(h,g,s.x);if(g.x.isZero())return fr(s,u,h.x);if(u.y.isZero())return Qn(h,g,s.y);if(g.y.isZero())return Qn(s,u,h.y);let y=ps(u,g);if(y.isZero())return null;let P={x:h.x.minus(s.x),y:h.y.minus(s.y)},B=ps(P,u).div(y),T=ps(P,g).div(y),K=s.x.plus(T.times(u.x)),st=h.x.plus(B.times(g.x)),jt=s.y.plus(T.times(u.y)),Dt=h.y.plus(B.times(g.y)),ie=K.plus(st).div(2),pe=jt.plus(Dt).div(2);return{x:ie,y:pe}},js=class T1{constructor(u,h){Te(this,"point");Te(this,"isLeft");Te(this,"segment");Te(this,"otherSE");Te(this,"consumedBy");u.events===void 0?u.events=[this]:u.events.push(this),this.point=u,this.isLeft=h}static compare(u,h){let g=T1.comparePoints(u.point,h.point);return g!==0?g:(u.point!==h.point&&u.link(h),u.isLeft!==h.isLeft?u.isLeft?1:-1:Ho.compare(u.segment,h.segment))}static comparePoints(u,h){return u.x.isLessThan(h.x)?-1:u.x.isGreaterThan(h.x)?1:u.y.isLessThan(h.y)?-1:u.y.isGreaterThan(h.y)?1:0}link(u){if(u.point===this.point)throw new Error("Tried to link already linked events");let h=u.point.events;for(let g=0,y=h.length;g<y;g++){let P=h[g];this.point.events.push(P),P.point=this.point}this.checkForConsuming()}checkForConsuming(){let u=this.point.events.length;for(let h=0;h<u;h++){let g=this.point.events[h];if(g.segment.consumedBy===void 0)for(let y=h+1;y<u;y++){let P=this.point.events[y];P.consumedBy===void 0&&g.otherSE.point.events===P.otherSE.point.events&&g.segment.consume(P.segment)}}}getAvailableLinkedEvents(){let u=[];for(let h=0,g=this.point.events.length;h<g;h++){let y=this.point.events[h];y!==this&&!y.segment.ringOut&&y.segment.isInResult()&&u.push(y)}return u}getLeftmostComparator(u){let h=new Map,g=y=>{let P=y.otherSE;h.set(y,{sine:Gu(this.point,u.point,P.point),cosine:jl(this.point,u.point,P.point)})};return(y,P)=>{h.has(y)||g(y),h.has(P)||g(P);let{sine:B,cosine:T}=h.get(y),{sine:K,cosine:st}=h.get(P);return B.isGreaterThanOrEqualTo(0)&&K.isGreaterThanOrEqualTo(0)?T.isLessThan(st)?1:T.isGreaterThan(st)?-1:0:B.isLessThan(0)&&K.isLessThan(0)?T.isLessThan(st)?-1:T.isGreaterThan(st)?1:0:K.isLessThan(B)?-1:K.isGreaterThan(B)?1:0}}},hu=0,Ho=class gh{constructor(u,h,g,y){Te(this,"id");Te(this,"leftSE");Te(this,"rightSE");Te(this,"rings");Te(this,"windings");Te(this,"ringOut");Te(this,"consumedBy");Te(this,"prev");Te(this,"_prevInResult");Te(this,"_beforeState");Te(this,"_afterState");Te(this,"_isInResult");this.id=++hu,this.leftSE=u,u.segment=this,u.otherSE=h,this.rightSE=h,h.segment=this,h.otherSE=u,this.rings=g,this.windings=y}static compare(u,h){let g=u.leftSE.point.x,y=h.leftSE.point.x,P=u.rightSE.point.x,B=h.rightSE.point.x;if(B.isLessThan(g))return 1;if(P.isLessThan(y))return-1;let T=u.leftSE.point.y,K=h.leftSE.point.y,st=u.rightSE.point.y,jt=h.rightSE.point.y;if(g.isLessThan(y)){if(K.isLessThan(T)&&K.isLessThan(st))return 1;if(K.isGreaterThan(T)&&K.isGreaterThan(st))return-1;let Dt=u.comparePoint(h.leftSE.point);if(Dt<0)return 1;if(Dt>0)return-1;let ie=h.comparePoint(u.rightSE.point);return ie!==0?ie:-1}if(g.isGreaterThan(y)){if(T.isLessThan(K)&&T.isLessThan(jt))return-1;if(T.isGreaterThan(K)&&T.isGreaterThan(jt))return 1;let Dt=h.comparePoint(u.leftSE.point);if(Dt!==0)return Dt;let ie=u.comparePoint(h.rightSE.point);return ie<0?1:ie>0?-1:1}if(T.isLessThan(K))return-1;if(T.isGreaterThan(K))return 1;if(P.isLessThan(B)){let Dt=h.comparePoint(u.rightSE.point);if(Dt!==0)return Dt}if(P.isGreaterThan(B)){let Dt=u.comparePoint(h.rightSE.point);if(Dt<0)return 1;if(Dt>0)return-1}if(!P.eq(B)){let Dt=st.minus(T),ie=P.minus(g),pe=jt.minus(K),Se=B.minus(y);if(Dt.isGreaterThan(ie)&&pe.isLessThan(Se))return 1;if(Dt.isLessThan(ie)&&pe.isGreaterThan(Se))return-1}return P.isGreaterThan(B)?1:P.isLessThan(B)||st.isLessThan(jt)?-1:st.isGreaterThan(jt)?1:u.id<h.id?-1:u.id>h.id?1:0}static fromRing(u,h,g){let y,P,B,T=js.comparePoints(u,h);if(T<0)y=u,P=h,B=1;else if(T>0)y=h,P=u,B=-1;else throw new Error(`Tried to create degenerate segment at [${u.x}, ${u.y}]`);let K=new js(y,!0),st=new js(P,!1);return new gh(K,st,[g],[B])}replaceRightSE(u){this.rightSE=u,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let u=this.leftSE.point.y,h=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:u.isLessThan(h)?u:h},ur:{x:this.rightSE.point.x,y:u.isGreaterThan(h)?u:h}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(u){return u.x.eq(this.leftSE.point.x)&&u.y.eq(this.leftSE.point.y)||u.x.eq(this.rightSE.point.x)&&u.y.eq(this.rightSE.point.y)}comparePoint(u){return xi.orient(this.leftSE.point,u,this.rightSE.point)}getIntersection(u){let h=this.bbox(),g=u.bbox(),y=Fl(h,g);if(y===null)return null;let P=this.leftSE.point,B=this.rightSE.point,T=u.leftSE.point,K=u.rightSE.point,st=Fs(h,T)&&this.comparePoint(T)===0,jt=Fs(g,P)&&u.comparePoint(P)===0,Dt=Fs(h,K)&&this.comparePoint(K)===0,ie=Fs(g,B)&&u.comparePoint(B)===0;if(jt&&st)return ie&&!Dt?B:!ie&&Dt?K:null;if(jt)return Dt&&P.x.eq(K.x)&&P.y.eq(K.y)?null:P;if(st)return ie&&B.x.eq(T.x)&&B.y.eq(T.y)?null:T;if(ie&&Dt)return null;if(ie)return B;if(Dt)return K;let pe=Wu(P,this.vector(),T,u.vector());return pe===null||!Fs(y,pe)?null:xi.snap(pe)}split(u){let h=[],g=u.events!==void 0,y=new js(u,!0),P=new js(u,!1),B=this.rightSE;this.replaceRightSE(P),h.push(P),h.push(y);let T=new gh(y,B,this.rings.slice(),this.windings.slice());return js.comparePoints(T.leftSE.point,T.rightSE.point)>0&&T.swapEvents(),js.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),g&&(y.checkForConsuming(),P.checkForConsuming()),h}swapEvents(){let u=this.rightSE;this.rightSE=this.leftSE,this.leftSE=u,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let h=0,g=this.windings.length;h<g;h++)this.windings[h]*=-1}consume(u){let h=this,g=u;for(;h.consumedBy;)h=h.consumedBy;for(;g.consumedBy;)g=g.consumedBy;let y=gh.compare(h,g);if(y!==0){if(y>0){let P=h;h=g,g=P}if(h.prev===g){let P=h;h=g,g=P}for(let P=0,B=g.rings.length;P<B;P++){let T=g.rings[P],K=g.windings[P],st=h.rings.indexOf(T);st===-1?(h.rings.push(T),h.windings.push(K)):h.windings[st]+=K}g.rings=null,g.windings=null,g.consumedBy=h,g.leftSE.consumedBy=h.leftSE,g.rightSE.consumedBy=h.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let u=this.prev.consumedBy||this.prev;this._beforeState=u.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let u=this.beforeState();this._afterState={rings:u.rings.slice(0),windings:u.windings.slice(0),multiPolys:[]};let h=this._afterState.rings,g=this._afterState.windings,y=this._afterState.multiPolys;for(let T=0,K=this.rings.length;T<K;T++){let st=this.rings[T],jt=this.windings[T],Dt=h.indexOf(st);Dt===-1?(h.push(st),g.push(jt)):g[Dt]+=jt}let P=[],B=[];for(let T=0,K=h.length;T<K;T++){if(g[T]===0)continue;let st=h[T],jt=st.poly;if(B.indexOf(jt)===-1)if(st.isExterior)P.push(jt);else{B.indexOf(jt)===-1&&B.push(jt);let Dt=P.indexOf(st.poly);Dt!==-1&&P.splice(Dt,1)}}for(let T=0,K=P.length;T<K;T++){let st=P[T].multiPoly;y.indexOf(st)===-1&&y.push(st)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let u=this.beforeState().multiPolys,h=this.afterState().multiPolys;switch(pu.type){case"union":{let g=u.length===0,y=h.length===0;this._isInResult=g!==y;break}case"intersection":{let g,y;u.length<h.length?(g=u.length,y=h.length):(g=h.length,y=u.length),this._isInResult=y===pu.numMultiPolys&&g<y;break}case"xor":{let g=Math.abs(u.length-h.length);this._isInResult=g%2===1;break}case"difference":{let g=y=>y.length===1&&y[0].isSubject;this._isInResult=g(u)!==g(h);break}}return this._isInResult}},hl=class{constructor(s,u,h){Te(this,"poly");Te(this,"isExterior");Te(this,"segments");Te(this,"bbox");if(!Array.isArray(s)||s.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=u,this.isExterior=h,this.segments=[],typeof s[0][0]!="number"||typeof s[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let g=xi.snap({x:new lt(s[0][0]),y:new lt(s[0][1])});this.bbox={ll:{x:g.x,y:g.y},ur:{x:g.x,y:g.y}};let y=g;for(let P=1,B=s.length;P<B;P++){if(typeof s[P][0]!="number"||typeof s[P][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let T=xi.snap({x:new lt(s[P][0]),y:new lt(s[P][1])});T.x.eq(y.x)&&T.y.eq(y.y)||(this.segments.push(Ho.fromRing(y,T,this)),T.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=T.x),T.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=T.y),T.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=T.x),T.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=T.y),y=T)}(!g.x.eq(y.x)||!g.y.eq(y.y))&&this.segments.push(Ho.fromRing(y,g,this))}getSweepEvents(){let s=[];for(let u=0,h=this.segments.length;u<h;u++){let g=this.segments[u];s.push(g.leftSE),s.push(g.rightSE)}return s}},fu=class{constructor(s,u){Te(this,"multiPoly");Te(this,"exteriorRing");Te(this,"interiorRings");Te(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new hl(s[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let h=1,g=s.length;h<g;h++){let y=new hl(s[h],this,!1);y.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=y.bbox.ll.x),y.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=y.bbox.ll.y),y.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=y.bbox.ur.x),y.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=y.bbox.ur.y),this.interiorRings.push(y)}this.multiPoly=u}getSweepEvents(){let s=this.exteriorRing.getSweepEvents();for(let u=0,h=this.interiorRings.length;u<h;u++){let g=this.interiorRings[u].getSweepEvents();for(let y=0,P=g.length;y<P;y++)s.push(g[y])}return s}},zc=class{constructor(s,u){Te(this,"isSubject");Te(this,"polys");Te(this,"bbox");if(!Array.isArray(s))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof s[0][0][0]=="number"&&(s=[s])}catch{}this.polys=[],this.bbox={ll:{x:new lt(Number.POSITIVE_INFINITY),y:new lt(Number.POSITIVE_INFINITY)},ur:{x:new lt(Number.NEGATIVE_INFINITY),y:new lt(Number.NEGATIVE_INFINITY)}};for(let h=0,g=s.length;h<g;h++){let y=new fu(s[h],this);y.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=y.bbox.ll.x),y.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=y.bbox.ll.y),y.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=y.bbox.ur.x),y.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=y.bbox.ur.y),this.polys.push(y)}this.isSubject=u}getSweepEvents(){let s=[];for(let u=0,h=this.polys.length;u<h;u++){let g=this.polys[u].getSweepEvents();for(let y=0,P=g.length;y<P;y++)s.push(g[y])}return s}},du=class _d{constructor(u){Te(this,"events");Te(this,"poly");Te(this,"_isExteriorRing");Te(this,"_enclosingRing");this.events=u;for(let h=0,g=u.length;h<g;h++)u[h].segment.ringOut=this;this.poly=null}static factory(u){let h=[];for(let g=0,y=u.length;g<y;g++){let P=u[g];if(!P.isInResult()||P.ringOut)continue;let B=null,T=P.leftSE,K=P.rightSE,st=[T],jt=T.point,Dt=[];for(;B=T,T=K,st.push(T),T.point!==jt;)for(;;){let ie=T.getAvailableLinkedEvents();if(ie.length===0){let Re=st[0].point,Ue=st[st.length-1].point;throw new Error(`Unable to complete output ring starting at [${Re.x}, ${Re.y}]. Last matching segment found ends at [${Ue.x}, ${Ue.y}].`)}if(ie.length===1){K=ie[0].otherSE;break}let pe=null;for(let Re=0,Ue=Dt.length;Re<Ue;Re++)if(Dt[Re].point===T.point){pe=Re;break}if(pe!==null){let Re=Dt.splice(pe)[0],Ue=st.splice(Re.index);Ue.unshift(Ue[0].otherSE),h.push(new _d(Ue.reverse()));continue}Dt.push({index:st.length,point:T.point});let Se=T.getLeftmostComparator(B);K=ie.sort(Se)[0].otherSE;break}h.push(new _d(st))}return h}getGeom(){let u=this.events[0].point,h=[u];for(let st=1,jt=this.events.length-1;st<jt;st++){let Dt=this.events[st].point,ie=this.events[st+1].point;xi.orient(Dt,u,ie)!==0&&(h.push(Dt),u=Dt)}if(h.length===1)return null;let g=h[0],y=h[1];xi.orient(g,u,y)===0&&h.shift(),h.push(h[0]);let P=this.isExteriorRing()?1:-1,B=this.isExteriorRing()?0:h.length-1,T=this.isExteriorRing()?h.length:-1,K=[];for(let st=B;st!=T;st+=P)K.push([h[st].x.toNumber(),h[st].y.toNumber()]);return K}isExteriorRing(){if(this._isExteriorRing===void 0){let u=this.enclosingRing();this._isExteriorRing=u?!u.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var y,P;let u=this.events[0];for(let B=1,T=this.events.length;B<T;B++){let K=this.events[B];js.compare(u,K)>0&&(u=K)}let h=u.segment.prevInResult(),g=h?h.prevInResult():null;for(;;){if(!h)return null;if(!g)return h.ringOut;if(g.ringOut!==h.ringOut)return((y=g.ringOut)==null?void 0:y.enclosingRing())!==h.ringOut?h.ringOut:(P=h.ringOut)==null?void 0:P.enclosingRing();h=g.prevInResult(),g=h?h.prevInResult():null}}},zl=class{constructor(s){Te(this,"exteriorRing");Te(this,"interiorRings");this.exteriorRing=s,s.poly=this,this.interiorRings=[]}addInterior(s){this.interiorRings.push(s),s.poly=this}getGeom(){let s=this.exteriorRing.getGeom();if(s===null)return null;let u=[s];for(let h=0,g=this.interiorRings.length;h<g;h++){let y=this.interiorRings[h].getGeom();y!==null&&u.push(y)}return u}},Ul=class{constructor(s){Te(this,"rings");Te(this,"polys");this.rings=s,this.polys=this._composePolys(s)}getGeom(){let s=[];for(let u=0,h=this.polys.length;u<h;u++){let g=this.polys[u].getGeom();g!==null&&s.push(g)}return s}_composePolys(s){var h;let u=[];for(let g=0,y=s.length;g<y;g++){let P=s[g];if(!P.poly)if(P.isExteriorRing())u.push(new zl(P));else{let B=P.enclosingRing();B!=null&&B.poly||u.push(new zl(B)),(h=B==null?void 0:B.poly)==null||h.addInterior(P)}}return u}},Zu=class{constructor(s,u=Ho.compare){Te(this,"queue");Te(this,"tree");Te(this,"segments");this.queue=s,this.tree=new Me(u),this.segments=[]}process(s){let u=s.segment,h=[];if(s.consumedBy)return s.isLeft?this.queue.delete(s.otherSE):this.tree.delete(u),h;s.isLeft&&this.tree.add(u);let g=u,y=u;do g=this.tree.lastBefore(g);while(g!=null&&g.consumedBy!=null);do y=this.tree.firstAfter(y);while(y!=null&&y.consumedBy!=null);if(s.isLeft){let P=null;if(g){let T=g.getIntersection(u);if(T!==null&&(u.isAnEndpoint(T)||(P=T),!g.isAnEndpoint(T))){let K=this._splitSafely(g,T);for(let st=0,jt=K.length;st<jt;st++)h.push(K[st])}}let B=null;if(y){let T=y.getIntersection(u);if(T!==null&&(u.isAnEndpoint(T)||(B=T),!y.isAnEndpoint(T))){let K=this._splitSafely(y,T);for(let st=0,jt=K.length;st<jt;st++)h.push(K[st])}}if(P!==null||B!==null){let T=null;P===null?T=B:B===null?T=P:T=js.comparePoints(P,B)<=0?P:B,this.queue.delete(u.rightSE),h.push(u.rightSE);let K=u.split(T);for(let st=0,jt=K.length;st<jt;st++)h.push(K[st])}h.length>0?(this.tree.delete(u),h.push(s)):(this.segments.push(u),u.prev=g)}else{if(g&&y){let P=g.getIntersection(y);if(P!==null){if(!g.isAnEndpoint(P)){let B=this._splitSafely(g,P);for(let T=0,K=B.length;T<K;T++)h.push(B[T])}if(!y.isAnEndpoint(P)){let B=this._splitSafely(y,P);for(let T=0,K=B.length;T<K;T++)h.push(B[T])}}}this.tree.delete(u)}return h}_splitSafely(s,u){this.tree.delete(s);let h=s.rightSE;this.queue.delete(h);let g=s.split(u);return g.push(h),s.consumedBy===void 0&&this.tree.add(s),g}},hf=class{constructor(){Te(this,"type");Te(this,"numMultiPolys")}run(s,u,h){fl.type=s;let g=[new zc(u,!0)];for(let K=0,st=h.length;K<st;K++)g.push(new zc(h[K],!1));if(fl.numMultiPolys=g.length,fl.type==="difference"){let K=g[0],st=1;for(;st<g.length;)Fl(g[st].bbox,K.bbox)!==null?st++:g.splice(st,1)}if(fl.type==="intersection")for(let K=0,st=g.length;K<st;K++){let jt=g[K];for(let Dt=K+1,ie=g.length;Dt<ie;Dt++)if(Fl(jt.bbox,g[Dt].bbox)===null)return[]}let y=new Me(js.compare);for(let K=0,st=g.length;K<st;K++){let jt=g[K].getSweepEvents();for(let Dt=0,ie=jt.length;Dt<ie;Dt++)y.add(jt[Dt])}let P=new Zu(y),B=null;for(y.size!=0&&(B=y.first(),y.delete(B));B;){let K=P.process(B);for(let st=0,jt=K.length;st<jt;st++){let Dt=K[st];Dt.consumedBy===void 0&&y.add(Dt)}y.size!=0?(B=y.first(),y.delete(B)):B=null}xi.reset();let T=du.factory(P.segments);return new Ul(T).getGeom()}},fl=new hf,pu=fl,ff=(s,...u)=>pu.run("intersection",s,u),df=(s,...u)=>pu.run("difference",s,u);xi.set;function gu(s){let u={type:"Feature"};return u.geometry=s,u}function mu(s){return s.type==="Feature"?s.geometry:s}function Uc(s){return s&&s.geometry&&s.geometry.coordinates?s.geometry.coordinates:s}function qc(s){return gu({type:"LineString",coordinates:s})}function vu(s){return gu({type:"MultiLineString",coordinates:s})}function $c(s){return gu({type:"Polygon",coordinates:s})}function Vc(s){return gu({type:"MultiPolygon",coordinates:s})}function Hc(s,u){let h=mu(s),g=mu(u),y=ff(h.coordinates,g.coordinates);return y.length===0?null:y.length===1?$c(y[0]):Vc(y)}function d(s,u){let h=mu(s),g=mu(u),y=df(h.coordinates,g.coordinates);return y.length===0?null:y.length===1?$c(y[0]):Vc(y)}function _(s){return Array.isArray(s)?1+_(s[0]):-1}function E(s){s instanceof L.Polyline&&(s=s.toGeoJSON(15));let u=Uc(s),h=_(u),g=[];return h>1?u.forEach(y=>{g.push(qc(y))}):g.push(s),g}function O(s){let u=[];return s.eachLayer(h=>{u.push(Uc(h.toGeoJSON(15)))}),vu(u)}Pi.Cut=Pi.Polygon.extend({initialize(s){this._map=s,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let s=this._layer.getLatLngs();if(s.length<=2)return;let u=L.polygon(s,this.options.pathOptions);u._latlngInfos=this._layer._latlngInfo,this.cut(u),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:g,originalLayer:y})=>{this._fireCut(y,g,y),this._fireCut(this._map,g,y),y.pm._fireEdit()}),this._editedLayers=[];let h=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(h))},cut(s){let u=this._map._layers,h=s._latlngInfos||[];Object.keys(u).map(g=>u[g]).filter(g=>g.pm).filter(g=>!g._pmTempLayer).filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1).filter(g=>g instanceof L.Polyline).filter(g=>g!==s).filter(g=>g.pm.options.allowCutting).filter(g=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(g)>-1:!0).filter(g=>!this._layerGroup.hasLayer(g)).filter(g=>{try{let y=!!_r(s.toGeoJSON(15),g.toGeoJSON(15)).features.length>0;return y||g instanceof L.Polyline&&!(g instanceof L.Polygon)?y:!!Hc(s.toGeoJSON(15),g.toGeoJSON(15))}catch{return g instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(g=>{let y;if(g instanceof L.Polygon){y=L.polygon(g.getLatLngs());let K=y.getLatLngs();h.forEach(st=>{if(st&&st.snapInfo){let{latlng:jt}=st,Dt=this._calcClosestLayer(jt,[y]);if(Dt&&Dt.segment&&Dt.distance<this.options.snapDistance){let{segment:ie}=Dt;if(ie&&ie.length===2){let{indexPath:pe,parentPath:Se,newIndex:Re}=L.PM.Utils._getIndexFromSegment(K,ie);(pe.length>1?(0,ni.default)(K,Se):K).splice(Re,0,jt)}}}})}else y=g;let P=this._cutLayer(s,y),B=L.geoJSON(P,g.options);B.getLayers().length===1&&([B]=B.getLayers()),this._setPane(B,"layerPane");let T=B.addTo(this._map.pm._getContainingLayer());if(T.pm.enable(g.pm.options),T.pm.disable(),g._pmTempLayer=!0,s._pmTempLayer=!0,g.remove(),g.removeFrom(this._map.pm._getContainingLayer()),s.remove(),s.removeFrom(this._map.pm._getContainingLayer()),T.getLayers&&T.getLayers().length===0&&this._map.pm.removeLayer({target:T}),T instanceof L.LayerGroup?(T.eachLayer(K=>{this._addDrawnLayerProp(K)}),this._addDrawnLayerProp(T)):this._addDrawnLayerProp(T),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let K=this.options.layersToCut.indexOf(g);K>-1&&this.options.layersToCut.splice(K,1)}this._editedLayers.push({layer:T,originalLayer:g})})},_cutLayer(s,u){let h=L.geoJSON(),g;if(u instanceof L.Polygon)g=d(u.toGeoJSON(15),s.toGeoJSON(15));else{let y=E(u);y.forEach(P=>{let B=br(P,s.toGeoJSON(15)),T;B&&B.features.length>0?T=L.geoJSON(B):T=L.geoJSON(P),T.getLayers().forEach(K=>{_o(s.toGeoJSON(15),K.toGeoJSON(15))||K.addTo(h)})}),y.length>1?g=O(h):g=h.toGeoJSON(15)}return g},_change:L.Util.falseFn}),Pi.Text=Pi.extend({initialize(s){this._map=s,this._shape="Text",this.toolbarButtonName="drawText"},enable(s){L.Util.setOptions(this,s),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hn("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var s;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(s=this._hintMarker)==null||s.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(s){this.enabled()?this.disable():this.enable(s)},_syncHintMarker(s){if(this._hintMarker.setLatLng(s.latlng),this.options.snappable){let u=s;u.target=this._hintMarker,this._handleSnapping(u)}},_createMarker(s){var y,P,B,T;if(!s.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(s.latlng);let u=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(y=this.options.textOptions)==null?void 0:y.className){let K=this.options.textOptions.className.split(" ");this.textArea.classList.add(...K)}let h=this._createTextIcon(this.textArea),g=new L.Marker(u,{textMarker:!0,_textMarkerOverPM:!0,icon:h});if(this._setPane(g,"markerPane"),this._finishLayer(g),g.pm||(g.options.draggable=!1),g.addTo(this._map.pm._getContainingLayer()),g.pm){g.pm.textArea=this.textArea,L.setOptions(g.pm,{removeIfEmpty:((P=this.options.textOptions)==null?void 0:P.removeIfEmpty)??!0});let K=((B=this.options.textOptions)==null?void 0:B.focusAfterDraw)??!0;g.pm._createTextMarker(K),(T=this.options.textOptions)!=null&&T.text&&g.pm.setText(this.options.textOptions.text)}this._fireCreate(g),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(s){this.enable(),this._hintMarker.setLatLng(s.latlng)},_createTextArea(){let s=document.createElement("textarea");return s.readOnly=!0,s.classList.add("pm-textarea","pm-disabled"),s},_createTextIcon(s){return L.divIcon({className:"pm-text-marker",html:s})}});var nt={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ri(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let s=this._getDOMElem();s&&(Ri(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(s)):L.DomEvent.on(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Ri(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let s=this._getDOMElem();s&&(Ri(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(s)):L.DomEvent.off(s,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(s){let u=s.touches?s.touches[0]:s,h={originalEvent:u,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(u),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseDown(h),!1},_simulateMouseMoveEvent(s){let u=s.touches?s.touches[0]:s,h={originalEvent:u,target:this._layer};return h.containerPoint=this._map.mouseEventToContainerPoint(u),h.latlng=this._map.containerPointToLatLng(h.containerPoint),this._dragMixinOnMouseMove(h),!1},_simulateMouseUpEvent(s){let u={originalEvent:s.touches?s.touches[0]:s,target:this._layer};return s.type.indexOf("touch")===-1&&(u.containerPoint=this._map.mouseEventToContainerPoint(s),u.latlng=this._map.containerPointToLatLng(u.containerPoint)),this._dragMixinOnMouseUp(u),!1},_dragMixinOnMouseDown(s){if(s.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(s);let u=s._fromLayerSync,h=this._syncLayers("_dragMixinOnMouseDown",s);if(this._layer instanceof L.Marker&&(this.options.snappable&&!u&&!h?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let g="resizeableCircleMarker";this._layer instanceof L.Circle&&(g="resizeableCircle"),this.options.snappable&&!u&&!h?this._layer.pm.options[g]||this._initSnappableMarkersDrag():this._layer.pm.options[g]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=s.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(s){this._overwriteEventIfItComesFromMarker(s);let u=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",s),this._dragging||(this._dragging=!0,L.DomUtil.addClass(u,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=s.latlng),this._onLayerDrag(s),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(s){let u=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",s),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,u&&L.DomUtil.removeClass(u,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(s){let{latlng:u}=s,h={lat:u.lat-this._tempDragCoord.lat,lng:u.lng-this._tempDragCoord.lng},g=y=>y.map(P=>{if(Array.isArray(P))return g(P);let B={lat:P.lat+h.lat,lng:P.lng+h.lng};return(P.alt||P.alt===0)&&(B.alt=P.alt),B});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let y=g([this._layer.getLatLng()]);this._layer.setLatLng(y[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let y=this._layer.getLatLng();this._layer._snapped&&(y=this._layer._orgLatLng);let P=g([y]);this._layer.setLatLng(P[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let y=g([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(y),this._fireChange(this._layer.getBounds(),"Edit")}else{let y=g(this._layer.getLatLngs());this._layer.setLatLngs(y),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=u,s.layer=this._layer,this._fireDrag(s)},addDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.addClass(s,"leaflet-pm-draggable")},removeDraggingClass(){let s=this._getDOMElem();s&&L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_getDOMElem(){let s=null;return this._layer._path?s=this._layer._path:this._layer._renderer&&this._layer._renderer._container?s=this._layer._renderer._container:this._layer._image?s=this._layer._image:this._layer._icon&&(s=this._layer._icon),s},_overwriteEventIfItComesFromMarker(s){s.target.getLatLng&&(!s.target._radius||s.target._radius<=10)&&(s.containerPoint=this._map.mouseEventToContainerPoint(s.originalEvent),s.latlng=this._map.containerPointToLatLng(s.containerPoint))},_syncLayers(s,u){if(this.enabled())return!1;if(!u._fromLayerSync&&this._layer===u.target&&this.options.syncLayersOnDrag){u._fromLayerSync=!0;let h=[];if(L.Util.isArray(this.options.syncLayersOnDrag))h=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(g=>{g instanceof L.LayerGroup&&(h=h.concat(g.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let g in this._parentLayerGroup){let y=this._parentLayerGroup[g];y.pm&&(h=y.pm.getLayers(!0))}return L.Util.isArray(h)&&h.length>0&&(h=h.filter(g=>!!g.pm).filter(g=>!!g.pm.options.draggable),h.forEach(g=>{g!==this._layer&&g.pm[s]&&(g._snapped=!1,g.pm[s](u))})),h.length>0}return!1},_stopDOMImageDrag(s){return s.preventDefault(),!1}},at=nt,ut=p(or());function pt(s,u,h,g){return h.unproject(u.transform(h.project(s,g)),g)}function bt(s,u,h){let g=h.getMaxZoom();if(g===1/0&&(g=h.getZoom()),L.Util.isArray(s)){let y=[];return s.forEach(P=>{y.push(bt(P,u,h))}),y}return s instanceof L.LatLng?pt(s,u,h,g):null}function Tt(s,u){u instanceof L.Layer&&(u=u.getLatLng());let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.project(u,h)}function Yt(s,u){let h=s.getMaxZoom();return h===1/0&&(h=s.getZoom()),s.unproject(u,h)}var me={_onRotateStart(s){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Tt(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Tt(this._map,s.target.getLatLng()),this._initialRotateLatLng=Wr(this._layer),this._startAngle=this.getAngle();let u=Wr(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,u),this._fireRotationStart(this._map,u)},_onRotate(s){let u=Tt(this._map,s.target.getLatLng()),h=this._rotationStartPoint,g=this._rotationOriginPoint,y=Math.atan2(u.y-g.y,u.x-g.x)-Math.atan2(h.y-g.y,h.x-g.x);this._layer.setLatLngs(this._rotateLayer(y,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let P=this;function B(jt,Dt=[],ie=-1){if(ie>-1&&Dt.push(ie),L.Util.isArray(jt[0]))jt.forEach((pe,Se)=>B(pe,Dt.slice(),Se));else{let pe=Dt.length>0?(0,ut.default)(P._markers,Dt):P._markers[0];jt.forEach((Se,Re)=>{pe[Re].setLatLng(Se)})}}B(this._layer.getLatLngs());let T=Wr(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(y,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let K=y*180/Math.PI;K=K<0?K+360:K;let st=K+this._startAngle;this._setAngle(st),this._rotationLayer.pm._setAngle(st),this._fireRotation(this._rotationLayer,K,T),this._fireRotation(this._map,K,T),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let s=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let u=Wr(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Wr(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,s,u),this._fireRotationEnd(this._map,s,u),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(s,u,h,g,y){let P=Tt(y,h);return this._matrix=g.clone().rotate(s,P).flip(),bt(u,this._matrix,y)},_setAngle(s){s=s<0?s+360:s,this._angle=s%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let s=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),u=s.getCenter();return s.removeFrom(this._layer._map),u},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Bs(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),s),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Wr(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(s){let u=this.getAngle(),h=this._layer.getLatLngs(),g=s*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(g,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+s),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(g,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let y=this.getAngle()-u;y=y<0?y+360:y,this._startAngle=u,this._fireRotation(this._layer,y,h,this._layer),this._fireRotation(this._map||this._layer._map,y,h,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(s){let u=s-this.getAngle();this.rotateLayer(u)},getAngle(){return this._angle||0},setInitAngle(s){this._setAngle(s)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(s){this._rotationCenter=s,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(s)}},ve=me,le=L.Class.extend({includes:[at,Uo,ve,Fo],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(s){L.Util.setOptions(this,s)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(s,u){u==="layerPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":u==="vertexPane"?s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":u==="markerPane"&&(s.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(s,u){let h=u.target,g={layer:this._layer,marker:h,event:u},y="";return s==="move"?y="moveVertexValidation":s==="add"?y="addVertexValidation":s==="remove"&&(y="removeVertexValidation"),this.options[y]&&typeof this.options[y]=="function"&&!this.options[y](g)?(s==="move"&&(h._cancelDragEventChain=h.getLatLng()),!1):(h._cancelDragEventChain=null,!0)},_vertexValidationDrag(s){return s._cancelDragEventChain?(s._latlng=s._cancelDragEventChain,s.update(),!1):!0},_vertexValidationDragEnd(s){return s._cancelDragEventChain?(s._cancelDragEventChain=null,!1):!0}}),Ce=le;Ce.LayerGroup=L.Class.extend({initialize(s){this._layerGroup=s,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(g=>this._initLayer(g));let u=g=>{if(g.layer._pmTempLayer)return;this._layers=this.getLayers();let y=this._layers.filter(P=>!P.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in P.pm._parentLayerGroup));y.forEach(P=>{this._initLayer(P)}),y.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(u,100,this),this),this._layerGroup.on("layerremove",g=>{this._removeLayerFromGroup(g.target)},this);let h=g=>{g.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(h,100,this),this)},enable(s,u=[]){u.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?u.indexOf(h._leaflet_id)===-1&&(u.push(h._leaflet_id),h.pm.enable(s,u)):h.pm.enable(s)})},disable(s=[]){s.length===0&&(this._layers=this.getLayers()),this._layers.forEach(u=>{u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1&&(s.push(u._leaflet_id),u.pm.disable(s)):u.pm.disable()})},enabled(s=[]){return s.length===0&&(this._layers=this.getLayers()),!!this._layers.find(u=>u instanceof L.LayerGroup?s.indexOf(u._leaflet_id)===-1?(s.push(u._leaflet_id),u.pm.enabled(s)):!1:u.pm.enabled())},toggleEdit(s,u=[]){u.length===0&&(this._layers=this.getLayers()),this._options=s,this._layers.forEach(h=>{h instanceof L.LayerGroup?u.indexOf(h._leaflet_id)===-1&&(u.push(h._leaflet_id),h.pm.toggleEdit(s,u)):h.pm.toggleEdit(s)})},_initLayer(s){let u=L.Util.stamp(this._layerGroup);s.pm._parentLayerGroup||(s.pm._parentLayerGroup={}),s.pm._parentLayerGroup[u]=this._layerGroup},_removeLayerFromGroup(s){if(s.pm&&s.pm._layerGroup){let u=L.Util.stamp(this._layerGroup);delete s.pm._layerGroup[u]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(s=>s.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var s;return this._map||((s=this._layers.find(u=>!!u._map))==null?void 0:s._map)||null},getLayers(s=!1,u=!0,h=!0,g=[]){let y=[];return s?this._layerGroup.getLayers().forEach(P=>{y.push(P),P instanceof L.LayerGroup&&g.indexOf(P._leaflet_id)===-1&&(g.push(P._leaflet_id),y=y.concat(P.pm.getLayers(!0,!0,!0,g)))}):y=this._layerGroup.getLayers(),h&&(y=y.filter(P=>!(P instanceof L.LayerGroup))),u&&(y=y.filter(P=>!!P.pm),y=y.filter(P=>!P._pmTempLayer),y=y.filter(P=>!L.PM.optIn&&!P.options.pmIgnore||L.PM.optIn&&P.options.pmIgnore===!1)),y},setOptions(s,u=[]){u.length===0&&(this._layers=this.getLayers()),this.options=s,this._layers.forEach(h=>{h.pm&&(h instanceof L.LayerGroup?u.indexOf(h._leaflet_id)===-1&&(u.push(h._leaflet_id),h.pm.setOptions(s,u)):h.pm.setOptions(s))})}}),Ce.Marker=Ce.extend({_shape:"Marker",initialize(s){this._layer=s,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(s={draggable:!0}){if(L.Util.setOptions(this,s),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(s){let u=s.target;u.remove(),this._fireRemove(u),this._fireRemove(this._map,u)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)}});var we=p(or()),Qt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let s=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=s.filter((u,h,g)=>g.indexOf(u)===h)},_removeFromCache(s){let u=this.markerCache.indexOf(s);u>-1&&this.markerCache.splice(u,1)},renderLimits(s){this.markerCache.forEach(u=>{s.includes(u)?this._markerGroup.addLayer(u):this._markerGroup.removeLayer(u)})},applyLimitFilters({latlng:s={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let u=[...this._filterClosestMarkers(s)];this.renderLimits(u)},_filterClosestMarkers(s){let u=[...this.markerCache],h=this.options.limitMarkersToCount;return h===-1?u:(u.sort((g,y)=>{let P=g._latlng.distanceTo(s),B=y._latlng.distanceTo(s);return P-B}),u.filter((g,y)=>h>-1?y<h:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(s){this._preventRenderMarkers=!!s}},re=Qt;Ce.Line=Ce.extend({includes:[re],_shape:"Line",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(s){return this.enabled()?this.disable():this.enable(s),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let s=this._map,u=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(s),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let h=g=>{if(Array.isArray(g[0]))return g.map(h,this);let y=g.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&g.map((P,B)=>{let T=this.isPolygon()?(B+1)%g.length:B+1;return this._createMiddleMarker(y[B],y[T])}),y};this._markers=h(u),this.filterMarkerGroup(),s.addLayer(this._markerGroup)},_createMarker(s){let u=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._pmTempLayer=!0,this.options.rotate?(u.on("dragstart",this._onRotateStart,this),u.on("drag",this._onRotate,this),u.on("dragend",this._onRotateEnd,this)):(u.on("click",this._onVertexClick,this),u.on("dragstart",this._onMarkerDragStart,this),u.on("move",this._onMarkerDrag,this),u.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||u.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(u),u},_createMiddleMarker(s,u){if(!s||!u)return!1;let h=L.PM.Utils.calcMiddleLatLng(this._map,s.getLatLng(),u.getLatLng()),g=this._createMarker(h),y=L.divIcon({className:"marker-icon marker-icon-middle"});return g.setIcon(y),g.leftM=s,g.rightM=u,s._middleMarkerNext=g,u._middleMarkerPrev=g,g.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),g.on("movestart",this._onMiddleMarkerMoveStart,this),g},_onMiddleMarkerClick(s){let u=s.target;if(!this._vertexValidation("add",s))return;let h=L.divIcon({className:"marker-icon"});u.setIcon(h),this._addMarker(u,u.leftM,u.rightM)},_onMiddleMarkerMoveStart(s){let u=s.target;if(u.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",s)){u.on("move",this._onMiddleMarkerMovePrevent,this);return}u._dragging=!0,this._addMarker(u,u.leftM,u.rightM)},_onMiddleMarkerMovePrevent(s){let u=s.target;this._vertexValidationDrag(u)},_onMiddleMarkerMoveEnd(s){let u=s.target;if(u.off("move",this._onMiddleMarkerMovePrevent,this),u.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(u))return;let h=L.divIcon({className:"marker-icon"});u.setIcon(h),setTimeout(()=>{delete u._dragging},100)},_addMarker(s,u,h){s.off("movestart",this._onMiddleMarkerMoveStart,this),s.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let g=s.getLatLng(),y=this._layer._latlngs;delete s.leftM,delete s.rightM;let{indexPath:P,index:B,parentPath:T}=L.PM.Utils.findDeepMarkerIndex(this._markers,u),K=P.length>1?(0,we.default)(y,T):y,st=P.length>1?(0,we.default)(this._markers,T):this._markers;K.splice(B+1,0,g),st.splice(B+1,0,s),this._layer.setLatLngs(y),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(u,s),this._createMiddleMarker(s,h)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(s,L.PM.Utils.findDeepMarkerIndex(this._markers,s).indexPath,g),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return On(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(s){let u=this._layer,h,g;if(this.options.allowSelfIntersection?h=!1:(g=On(this._layer.toGeoJSON(15)),h=g.features.length>0),h){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return h;s?this._flashLayer():(u.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(g)}else u.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return h},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(s,u){s.forEach(h=>{Array.isArray(h)?this._updateDisabledMarkerStyle(h,u):h._icon&&(u&&!this._checkMarkerAllowedToDrag(h)?L.DomUtil.addClass(h._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(h._icon,"vertexmarker-disabled"))})},_removeMarker(s){let u=s.target;if(!this._vertexValidation("remove",s))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Wr(this._layer,this._layer.getLatLngs()));let h=this._layer.getLatLngs(),{indexPath:g,index:y,parentPath:P}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);if(!g)return;let B=g.length>1?(0,we.default)(h,P):h,T=g.length>1?(0,we.default)(this._markers,P):this._markers,K=P[P.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!K&&(B.length<=2||this.isPolygon()&&B.length<=3)){this._flashLayer();return}B.splice(y,1),this._layer.setLatLngs(h),this.isPolygon()&&B.length<=2&&B.splice(0,B.length);let st=!1;if(B.length<=1&&(B.splice(0,B.length),P.length>1&&g.length>1&&(h=jo(h)),this._layer.setLatLngs(h),this._initMarkers(),st=!0),mr(h)||this._layer.remove(),h=jo(h),this._layer.setLatLngs(h),this._markers=jo(this._markers),!st&&(T=g.length>1?(0,we.default)(this._markers,P):this._markers,u._middleMarkerPrev&&(this._markerGroup.removeLayer(u._middleMarkerPrev),this._removeFromCache(u._middleMarkerPrev)),u._middleMarkerNext&&(this._markerGroup.removeLayer(u._middleMarkerNext),this._removeFromCache(u._middleMarkerNext)),this._markerGroup.removeLayer(u),this._removeFromCache(u),T)){let jt,Dt;if(this.isPolygon()?(jt=(y+1)%T.length,Dt=(y+(T.length-1))%T.length):(Dt=y-1<0?void 0:y-1,jt=y+1>=T.length?void 0:y+1),jt!==Dt){let ie=T[Dt],pe=T[jt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(ie,pe)}T.splice(y,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(u,g),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(s){let u=this._layer.getLatLngs(),h=s.getLatLng(),{indexPath:g,index:y,parentPath:P}=L.PM.Utils.findDeepMarkerIndex(this._markers,s);(g.length>1?(0,we.default)(u,P):u).splice(y,1,h),this._layer.setLatLngs(u)},_getNeighborMarkers(s){let{indexPath:u,index:h,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,s),y=u.length>1?(0,we.default)(this._markers,g):this._markers,P=(h+1)%y.length,B=(h+(y.length-1))%y.length,T=y[B],K=y[P];return{prevMarker:T,nextMarker:K}},_checkMarkerAllowedToDrag(s){let{prevMarker:u,nextMarker:h}=this._getNeighborMarkers(s),g=L.polyline([u.getLatLng(),s.getLatLng()]),y=L.polyline([s.getLatLng(),h.getLatLng()]),P=_r(this._layer.toGeoJSON(15),g.toGeoJSON(15)).features.length,B=_r(this._layer.toGeoJSON(15),y.toGeoJSON(15)).features.length;return s.getLatLng()===this._markers[0][0].getLatLng()?B+=1:s.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(P+=1),!(P<=2&&B<=2)},_onMarkerDragStart(s){let u=s.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",s))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireMarkerDragStart(s,h),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Wr(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(u):this._markerAllowedToDrag=null},_onMarkerDrag(s){let u=s.target;if(!this._vertexValidationDrag(u))return;let{indexPath:h,index:g,parentPath:y}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);if(!h)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(u);let P=h.length>1?(0,we.default)(this._markers,y):this._markers,B=(g+1)%P.length,T=(g+(P.length-1))%P.length,K=u.getLatLng(),st=P[T].getLatLng(),jt=P[B].getLatLng();if(u._middleMarkerNext){let Dt=L.PM.Utils.calcMiddleLatLng(this._map,K,jt);u._middleMarkerNext.setLatLng(Dt)}if(u._middleMarkerPrev){let Dt=L.PM.Utils.calcMiddleLatLng(this._map,K,st);u._middleMarkerPrev.setLatLng(Dt)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let u=s.target;if(!this._vertexValidationDragEnd(u))return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u),g=!this.options.allowSelfIntersection&&this.hasSelfIntersection();g&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(g=!1);let y=!this.options.allowSelfIntersection&&g;if(this._fireMarkerDragEnd(s,h,y),y){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(s,h);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(s){let u=s.target;if(u._dragging)return;let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireVertexClick(s,h)}}),Ce.Polygon=Ce.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(s){let{prevMarker:u,nextMarker:h}=this._getNeighborMarkers(s),g=L.polyline([u.getLatLng(),s.getLatLng()]),y=L.polyline([s.getLatLng(),h.getLatLng()]),P=_r(this._layer.toGeoJSON(15),g.toGeoJSON(15)).features.length,B=_r(this._layer.toGeoJSON(15),y.toGeoJSON(15)).features.length;return!(P<=2&&B<=2)}}),Ce.Rectangle=Ce.Polygon.extend({_shape:"Rectangle",_initMarkers(){let s=this._map,u=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,s.addLayer(this._markerGroup),this._markers=[],this._markers[0]=u.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((h,g)=>{let y=this._cornerMarkers.find(P=>P._index===g);y&&y.setLatLng(h)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(s,u){let h=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=s,h._index=u,h._pmTempLayer=!0,h.on("click",this._onVertexClick,this),this._markerGroup.addLayer(h),h},_addMarkerEvents(){this._markers[0].forEach(s=>{s.on("dragstart",this._onMarkerDragStart,this),s.on("drag",this._onMarkerDrag,this),s.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||s.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(s){if(!this._vertexValidation("move",s))return;let u=s.target,h=this._cornerMarkers;u._oppositeCornerLatLng=h.find(y=>y._index===(u._index+2)%4).getLatLng(),u._snapped=!1;let{indexPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireMarkerDragStart(s,g)},_onMarkerDrag(s){let u=s.target;if(!this._vertexValidationDrag(u)||u._index===void 0)return;this._adjustRectangleForMarkerMove(u);let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireMarkerDrag(s,h),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(s){let u=s.target;if(!this._vertexValidationDragEnd(u))return;this._cornerMarkers.forEach(g=>{delete g._oppositeCornerLatLng});let{indexPath:h}=L.PM.Utils.findDeepMarkerIndex(this._markers,u);this._fireMarkerDragEnd(s,h),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(s){L.extend(s._origLatLng,s._latlng);let u=L.PM.Utils._getRotatedRectangle(s.getLatLng(),s._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(u),this._adjustAllMarkers(s),this._layer.redraw()},_adjustAllMarkers(s){let u=this._layer.getLatLngs()[0];if(u&&u.length!==4&&u.length>0)u.forEach((h,g)=>{this._cornerMarkers[g].setLatLng(h)}),this._cornerMarkers.slice(u.length).forEach(h=>{h.setLatLng(u[0])});else if(!u||!u.length)console.error("The layer has no LatLngs");else{let h=u.findIndex(g=>s.getLatLng().equals(g));h>-1?(this._cornerMarkers[(s._index+1)%4].setLatLng(u[(h+1)%4]),this._cornerMarkers[(s._index+2)%4].setLatLng(u[(h+2)%4]),this._cornerMarkers[(s._index+3)%4].setLatLng(u[(h+3)%4])):this._cornerMarkers.forEach(g=>{g.setLatLng(u[g._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Bs(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let s=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(s[0],s[2],this.getAngle(),this._map||this)}}),Ce.CircleMarker=Ce.extend({_shape:"CircleMarker",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let s=this._map;this._helperLayers&&(this._helperLayers.removeFrom(s),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(s);let u=this._layer.getLatLng(),h=this._layer._radius,g=this._getLatLngOnCircle(u,h);this._centerMarker=this._createCenterMarker(u),this._outerMarker=this._createOuterMarker(g),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(s,u){let h=this._map.project(s),g=L.point(h.x+u,h.y);return this._map.unproject(g)},_createHintLine(s,u){let h=s.getLatLng(),g=u.getLatLng();this._hintline=L.polyline([h,g],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(s){let u=this._createMarker(s);return this.options.draggable?(L.DomUtil.addClass(u._icon,"leaflet-pm-draggable"),u.on("move",this._moveCircle,this)):u.dragging.disable(),u},_createOuterMarker(s){let u=this._createMarker(s);return u.on("drag",this._resizeCircle,this),u},_createMarker(s){let u=new L.Marker(s,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(u,"vertexPane"),u._origLatLng=s,u._pmTempLayer=!0,u.on("dragstart",this._onMarkerDragStart,this),u.on("drag",this._onMarkerDrag,this),u.on("dragend",this._onMarkerDragEnd,this),u.on("click",this._onVertexClick,this),this._helperLayers.addLayer(u),u},_moveCircle(s){if(s.target._cancelDragEventChain)return;let u=this._centerMarker.getLatLng();this._layer.setLatLng(u);let h=this._layer._radius,g=this._getLatLngOnCircle(u,h);this._outerMarker._latlng=g,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let s=this._layer.getLatLng(),u=this._layer._radius,h=this._getLatLngOnCircle(s,u);this._outerMarker.setLatLng(h),this._centerMarker.setLatLng(s),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let s=this._centerMarker.getLatLng(),u=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,u);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(h),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let s=this._centerMarker.getLatLng(),u=this._outerMarker.getLatLng();this._hintline.setLatLngs([s,u])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(s){this._vertexValidation("move",s)&&this._fireMarkerDragStart(s)},_onMarkerDrag(s){let u=s.target;u instanceof L.Marker&&!this._vertexValidationDrag(u)||this._fireMarkerDrag(s)},_onMarkerDragEnd(s){this._extedingMarkerDragEnd();let u=s.target;this._vertexValidationDragEnd(u)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(s))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let s=this._layer._map||this._map;if(s){let u=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),s,this._layer.getLatLng()),h=L.circle(this._layer.getLatLng(),this._layer.options);h.setRadius(u);let g=s&&s.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(h,200,!g).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(h,200,!g),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let s=this._centerMarker.getLatLng(),u=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,u);return this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?u=ca(this._map,s,u,this._getMinDistanceInMeter(s)):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&(u=ca(this._map,s,u,this._getMaxDistanceInMeter(s))),u},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let s=this._centerMarker.getLatLng(),u=this._outerMarker.getLatLng(),h=this._distanceCalculation(s,u);this.options[this._minRadiusOption]&&h<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&h>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(s,u){return this._map.project(s).distanceTo(this._map.project(u))},_getMinDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,s)},_getMaxDistanceInMeter(s){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,s)},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Ce.Circle=Ce.CircleMarker.extend({_shape:"Circle",initialize(s){this._layer=s,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(s){L.PM.Edit.CircleMarker.prototype.enable.call(this,s||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let s=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(s,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let s=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!s).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!s),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(s,u){return this._map.distance(s,u)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(s){s.target._dragging||this._fireVertexClick(s,void 0)}}),Ce.ImageOverlay=Ce.extend({_shape:"ImageOverlay",initialize(s){this._layer=s,this._enabled=!1},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},enabled(){return this._enabled},enable(s={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,s),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let s=this._layer.getBounds(),u=s.getNorthWest(),h=s.getNorthEast(),g=s.getSouthEast(),y=s.getSouthWest();return[u,h,g,y]}}),Ce.Text=Ce.extend({_shape:"Text",initialize(s){this._layer=s,this._enabled=!1},enable(s){if(L.Util.setOptions(this,s),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let s=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),s.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(s){this.enabled()?this.disable():this.enable(s)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let s=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,s.off("pm:drag",this._handleSnapping,this),s.on("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.on("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this),s.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let s=this._layer;s.off("pm:drag",this._handleSnapping,this),s.off("pm:dragend",this._cleanupSnapping,this),s.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let s=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,u=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${s}px`,this.textArea.style.width=`${u}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(s){s.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(s={}){let u=this._hasFocus;this._hasFocus=s.type==="focus",!u!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(s){s&&(this.textArea.value=s),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let u=this.options.className.split(" ");this.textArea.classList.add(...u)}let s=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(s),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(s=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),s===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(s){s.preventDefault()}});var ke=function(s,u,h,g,y,P){this._matrix=[s,u,h,g,y,P]};ke.init=()=>new L.PM.Matrix(1,0,0,1,0,0),ke.prototype={transform(s){return this._transform(s.clone())},_transform(s){let u=this._matrix,{x:h,y:g}=s;return s.x=u[0]*h+u[1]*g+u[4],s.y=u[2]*h+u[3]*g+u[5],s},untransform(s){let u=this._matrix;return new L.Point((s.x/u[0]-u[4])/u[0],(s.y/u[2]-u[5])/u[2])},clone(){let s=this._matrix;return new L.PM.Matrix(s[0],s[1],s[2],s[3],s[4],s[5])},translate(s){if(s===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let u,h;return typeof s=="number"?(u=s,h=s):(u=s.x,h=s.y),this._add(1,0,0,1,u,h)},scale(s,u){if(s===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let h,g;return u=u||L.point(0,0),typeof s=="number"?(h=s,g=s):(h=s.x,g=s.y),this._add(h,0,0,g,u.x,u.y)._add(1,0,0,1,-u.x,-u.y)},rotate(s,u){let h=Math.cos(s),g=Math.sin(s);return u=u||new L.Point(0,0),this._add(h,g,-g,h,u.x,u.y)._add(1,0,0,1,-u.x,-u.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(s,u,h,g,y,P){let B=[[],[],[]],T=this._matrix,K=[[T[0],T[2],T[4]],[T[1],T[3],T[5]],[0,0,1]],st=[[s,h,y],[u,g,P],[0,0,1]],jt;s&&s instanceof L.PM.Matrix&&(T=s._matrix,st=[[T[0],T[2],T[4]],[T[1],T[3],T[5]],[0,0,1]]);for(let Dt=0;Dt<3;Dt+=1)for(let ie=0;ie<3;ie+=1){jt=0;for(let pe=0;pe<3;pe+=1)jt+=K[Dt][pe]*st[pe][ie];B[Dt][ie]=jt}return this._matrix=[B[0][0],B[1][0],B[0][1],B[1][1],B[0][2],B[1][2]],this}};var Be=ke,Ee={calcMiddleLatLng(s,u,h){let g=s.project(u),y=s.project(h);return s.unproject(g._add(y)._divideBy(2))},findLayers(s){let u=[];return s.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&u.push(h)}),u=u.filter(h=>!!h.pm),u=u.filter(h=>!h._pmTempLayer),u=u.filter(h=>!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1),u},circleToPolygon(s,u=60,h=!0){let g=s.getLatLng(),y=s.getRadius(),P=Pr(g,y,u,0,h),B=[];for(let T=0;T<P.length;T+=1){let K=[P[T].lat,P[T].lng];B.push(K)}return L.polygon(B,s.options)},disablePopup(s){s.getPopup()&&(s._tempPopupCopy=s.getPopup(),s.unbindPopup())},enablePopup(s){s._tempPopupCopy&&(s.bindPopup(s._tempPopupCopy),delete s._tempPopupCopy)},_fireEvent(s,u,h,g=!1){s.fire(u,h,g);let{groups:y}=this.getAllParentGroups(s);y.forEach(P=>{P.fire(u,h,g)})},getAllParentGroups(s){let u=[],h=[],g=y=>{for(let P in y._eventParents)if(u.indexOf(P)===-1){u.push(P);let B=y._eventParents[P];h.push(B),g(B)}};return!s._pmLastGroupFetch||!s._pmLastGroupFetch.time||new Date().getTime()-s._pmLastGroupFetch.time>1e3?(g(s),s._pmLastGroupFetch={time:new Date().getTime(),groups:h,groupIds:u},{groupIds:u,groups:h}):{groups:s._pmLastGroupFetch.groups,groupIds:s._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Pr,getTranslation:hn,findDeepCoordIndex(s,u,h=!0){let g,y=B=>(T,K)=>{let st=B.concat(K);if(h){if(T.lat&&T.lat===u.lat&&T.lng===u.lng)return g=st,!0}else if(T.lat&&L.latLng(T).equals(u))return g=st,!0;return Array.isArray(T)&&T.some(y(st))};s.some(y([]));let P={};return g&&(P={indexPath:g,index:g[g.length-1],parentPath:g.slice(0,g.length-1)}),P},findDeepMarkerIndex(s,u){let h,g=P=>(B,T)=>{let K=P.concat(T);return B._leaflet_id===u._leaflet_id?(h=K,!0):Array.isArray(B)&&B.some(g(K))};s.some(g([]));let y={};return h&&(y={indexPath:h,index:h[h.length-1],parentPath:h.slice(0,h.length-1)}),y},_getIndexFromSegment(s,u){if(u&&u.length===2){let h=this.findDeepCoordIndex(s,u[0]),g=this.findDeepCoordIndex(s,u[1]),y=Math.max(h.index,g.index);return(h.index===0||g.index===0)&&y!==1&&(y+=1),{indexA:h,indexB:g,newIndex:y,indexPath:h.indexPath,parentPath:h.parentPath}}return null},_getRotatedRectangle(s,u,h,g){let y=Tt(g,s),P=Tt(g,u),B=h*Math.PI/180,T=Math.cos(B),K=Math.sin(B),st=(P.x-y.x)*T+(P.y-y.y)*K,jt=(P.y-y.y)*T-(P.x-y.x)*K,Dt=st*T+y.x,ie=st*K+y.y,pe=-jt*K+y.x,Se=jt*T+y.y,Re=Yt(g,y),Ue=Yt(g,{x:Dt,y:ie}),yn=Yt(g,P),Ft=Yt(g,{x:pe,y:Se});return[Re,Ue,yn,Ft]},pxRadiusToMeterRadius(s,u,h){let g=u.project(h),y=L.point(g.x+s,g.y);return u.distance(u.unproject(y),h)}},Je=Ee;L.PM=L.PM||{version:Vr.version,Map:zo,Toolbar:Fa,Draw:Pi,Edit:Ce,Utils:Je,Matrix:Be,activeLang:"en",optIn:!1,initialize(s){this.addInitHooks(s)},setOptIn(s){this.optIn=!!s},addInitHooks(){function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(s);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(u);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(g);function y(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(y);function P(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(P);function B(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(B);function T(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(T);function K(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(K)},reInitLayer(s){s instanceof L.LayerGroup&&s.eachLayer(u=>{this.reInitLayer(u)}),s.pm||L.PM.optIn&&s.options.pmIgnore!==!1||s.options.pmIgnore||(s instanceof L.Map?s.pm=new L.PM.Map(s):s instanceof L.Marker?s.options.textMarker?(s.pm=new L.PM.Edit.Text(s),s.pm._initTextMarker(),s.pm._createTextMarker(!1)):s.pm=new L.PM.Edit.Marker(s):s instanceof L.Circle?s.pm=new L.PM.Edit.Circle(s):s instanceof L.CircleMarker?s.pm=new L.PM.Edit.CircleMarker(s):s instanceof L.Rectangle?s.pm=new L.PM.Edit.Rectangle(s):s instanceof L.Polygon?s.pm=new L.PM.Edit.Polygon(s):s instanceof L.Polyline?s.pm=new L.PM.Edit.Line(s):s instanceof L.LayerGroup?s.pm=new L.PM.Edit.LayerGroup(s):s instanceof L.ImageOverlay&&(s.pm=new L.PM.Edit.ImageOverlay(s)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(s){let u=this._map.mouseEventToLayerPoint(s),h,g;for(let y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(g=h);g&&(L.DomEvent.fakeStop(s),this._fireEvent([g],s))}}),L.PM.initialize()})();class Qa extends Kt.Polygon{constructor(n,i,o=0,a=180,l={}){super([[]],{...l,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});Te(this,"center");Te(this,"radius");Te(this,"startAngle");Te(this,"stopAngle");Te(this,"numPoints");Te(this,"properties");Te(this,"pm");Te(this,"getRadius",()=>this.radius);Te(this,"getStartAngle",()=>this.startAngle);Te(this,"getStopAngle",()=>this.stopAngle);this.center=n,this.radius=i,this.startAngle=this.normalizeAngle(o),this.stopAngle=this.normalizeAngle(a),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...l,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",()=>{var f;this.pm&&(this.pm._layers=[],this.pm._markers=[],(f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("pm:vertexadded",()=>{var f;this.pm&&((f=this.pm._markerGroup)==null||f.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))}),this.updateProperties()}normalizeAngle(n){return(n%360+360)%360}calculateArcPoints(){if(!this._map)return[];const n=[],i=this.getOpeningAngle();n.push(this.center);for(let o=0;o<=this.numPoints;o++){const l=(this.startAngle+i*o/this.numPoints)*Math.PI/180,f=this.radius*Math.cos(l),v=this.radius*Math.sin(l)/111319.9,b=f/(111319.9*Math.cos(this.center.lat*Math.PI/180)),w=Kt.latLng(this.center.lat+v,this.center.lng+b);n.push(w)}return n.push(this.center),n}setRadius(n){return n<=0?this:(this.radius=n,this.properties.radius=n,this.updateGeometry(),this.updateProperties(),this)}setAngles(n,i){const o=this.normalizeAngle(n),a=this.normalizeAngle(i),l=this.getOpeningAngle();let f=(a-o+360)%360;const p=45;return Math.abs(f-l)>p&&(f>l?f=l+p:f=l-p),f=Math.max(5,Math.min(355,f)),this.startAngle===n?this.stopAngle=(this.startAngle+f)%360:(this.startAngle=o,this.stopAngle=(o+f)%360),this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.openingAngle=f,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(n){return n<5||n>355?this:(this.stopAngle=(this.startAngle+n)%360,this.properties.openingAngle=n,this.updateGeometry(),this.updateProperties(),this)}setCenter(n){return!n.lat||!n.lng?this:(this.center=n,this.updateGeometry(),this.updateProperties(),this)}getCenter(){return this.center}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}calculatePointOnArc(n){const i=n*Math.PI/180,o=this.radius*Math.cos(i),l=this.radius*Math.sin(i)/111319.9,f=o/(111319.9*Math.cos(this.center.lat*Math.PI/180));return Kt.latLng(this.center.lat+l,this.center.lng+f)}calculateMidpointPosition(){const n=this.getOpeningAngle(),i=(this.startAngle+n/2)%360;return this.calculatePointOnArc(i)}calculateAngleToPoint(n){return Math.atan2(n.lat-this.center.lat,n.lng-this.center.lng)*180/Math.PI}createControlPoints(n,i){const o=[],a=this.calculatePointOnArc(this.startAngle),l=this.calculatePointOnArc(this.stopAngle),f=this.calculateMidpointPosition(),p=this.createControlPoint(n,this.center,"#059669"),v=this.createControlPoint(n,a,"#DC2626"),b=this.createControlPoint(n,l,"#DC2626"),w=this.createControlPoint(n,f,"#2563EB");o.push(p,v,b,w),i(o)}createControlPoint(n,i,o){return Kt.circleMarker(i,{radius:6,color:o,fillColor:o,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0}).addTo(n)}updateProperties(){const n=this.getOpeningAngle(),i=Math.PI*Math.pow(this.radius,2)*n/360,o=2*Math.PI*this.radius*n/360,a=o+2*this.radius;this.properties.area=i,this.properties.arcLength=o,this.properties.perimeter=a,this.properties.openingAngle=n,this.properties.surfaceInterieure=i,this.properties.surfaceExterieure=i,this.properties.diameter=this.radius*2,this.properties.center=this.center,this.fire("properties:updated",{shape:this,properties:this.properties})}updateGeometry(){if(!this._map)return;const n=this.calculateArcPoints();n.length>0&&(this.setLatLngs([n]),this.updateProperties())}toGeoJSON(){const n=super.toGeoJSON();return{...n,properties:{...n.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,openingAngle:this.getOpeningAngle()}}}}class rc extends Kt.Circle{constructor(n,i){const o=i.radius||10;super(n,o,i);Te(this,"properties");this.properties={type:"Circle",style:i||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getRadius(),i=this.getLatLng();this.properties={...this.properties,radius:n,diameter:n*2,area:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:i,surfaceInterieure:Math.PI*Math.pow(n,2),surfaceExterieure:Math.PI*Math.pow(n,2),style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setRadius(n){return super.setRadius(n),this.updateProperties(),this}setLatLng(n){return super.setLatLng(n),this.updateProperties(),this}calculatePointOnCircle(n){const i=this.getLatLng(),o=this.getRadius(),a=n*Math.PI/180;return Kt.latLng(i.lat+o/111319.9*Math.sin(a),i.lng+o/(111319.9*Math.cos(i.lat*Math.PI/180))*Math.cos(a))}getCardinalPoints(){return[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n))}calculateAngleFromPoint(n){const i=this.getLatLng(),o=n.lng-i.lng,a=n.lat-i.lat;let l=Math.atan2(a,o)*180/Math.PI;return l<0&&(l+=360),l}resizeFromControlPoint(n){const o=this.getLatLng().distanceTo(n);o>0&&super.setRadius(o)}}var zs=63710088e-1,jx={centimeters:zs*100,centimetres:zs*100,degrees:zs/111325,feet:zs*3.28084,inches:zs*39.37,kilometers:zs/1e3,kilometres:zs/1e3,meters:zs,metres:zs,miles:zs/1609.344,millimeters:zs*1e3,millimetres:zs*1e3,nauticalmiles:zs/1852,radians:1,yards:zs*1.0936};function Dh(t,e,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function kl(t,e,n){n===void 0&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<a[a.length-1].length;l++)if(a[a.length-1][l]!==a[0][l])throw new Error("First and last Position are not equivalent.")}var f={type:"Polygon",coordinates:t};return Dh(f,e,n)}function lu(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:t};return Dh(i,e,n)}function zx(t,e){e===void 0&&(e="kilometers");var n=jx[e];if(!n)throw new Error(e+" units is invalid");return t*n}function eh(t){var e=t%360;return e*Math.PI/180}function D1(t,e,n){if(t!==null)for(var i,o,a,l,f,p,v,b=0,w=0,S,x=t.type,R=x==="FeatureCollection",N=x==="Feature",j=R?t.features.length:1,U=0;U<j;U++){v=R?t.features[U].geometry:N?t.geometry:t,S=v?v.type==="GeometryCollection":!1,f=S?v.geometries.length:1;for(var W=0;W<f;W++){var X=0,St=0;if(l=S?v.geometries[W]:v,l!==null){p=l.coordinates;var Mt=l.type;switch(b=0,Mt){case null:break;case"Point":if(e(p,w,U,X,St)===!1)return!1;w++,X++;break;case"LineString":case"MultiPoint":for(i=0;i<p.length;i++){if(e(p[i],w,U,X,St)===!1)return!1;w++,Mt==="MultiPoint"&&X++}Mt==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(i=0;i<p.length;i++){for(o=0;o<p[i].length-b;o++){if(e(p[i][o],w,U,X,St)===!1)return!1;w++}Mt==="MultiLineString"&&X++,Mt==="Polygon"&&St++}Mt==="Polygon"&&X++;break;case"MultiPolygon":for(i=0;i<p.length;i++){for(St=0,o=0;o<p[i].length;o++){for(a=0;a<p[i][o].length-b;a++){if(e(p[i][o][a],w,U,X,St)===!1)return!1;w++}St++}X++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(D1(l.geometries[i],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function N1(t,e){var n,i,o,a,l,f,p,v,b,w,S=0,x=t.type==="FeatureCollection",R=t.type==="Feature",N=x?t.features.length:1;for(n=0;n<N;n++){for(f=x?t.features[n].geometry:R?t.geometry:t,v=x?t.features[n].properties:R?t.properties:{},b=x?t.features[n].bbox:R?t.bbox:void 0,w=x?t.features[n].id:R?t.id:void 0,p=f?f.type==="GeometryCollection":!1,l=p?f.geometries.length:1,o=0;o<l;o++){if(a=p?f.geometries[o]:f,a===null){if(e(null,S,v,b,w)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(a,S,v,b,w)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(e(a.geometries[i],S,v,b,w)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}S++}}function Ux(t,e,n){var i=n;return N1(t,function(o,a,l,f,p){i=e(i,o,a,l,f,p)}),i}function qx(t,e){N1(t,function(n,i,o,a,l){var f=n===null?null:n.type;switch(f){case null:case"Point":case"LineString":case"Polygon":return e(Dh(n,o,{bbox:a,id:l}),i,0)===!1?!1:void 0}var p;switch(f){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon";break}for(var v=0;v<n.coordinates.length;v++){var b=n.coordinates[v],w={type:p,coordinates:b};if(e(Dh(w,o),i,v)===!1)return!1}})}function $x(t,e){qx(t,function(n,i,o){var a=0;if(n.geometry){var l=n.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var f,p=0,v=0,b=0;if(D1(n,function(w,S,x,R,N){if(f===void 0||i>p||R>v||N>b){f=w,p=i,v=R,b=N,a=0;return}var j=lu([f,w],n.properties);if(e(j,i,o,N,a)===!1)return!1;a++,f=w})===!1)return!1}}})}function Vx(t,e,n){var i=n,o=!1;return $x(t,function(a,l,f,p,v){o===!1&&n===void 0?i=a:i=e(i,a,l,f,p,v),o=!0}),i}function W0(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function tu(t,e,n){n===void 0&&(n={});var i=W0(t),o=W0(e),a=eh(o[1]-i[1]),l=eh(o[0]-i[0]),f=eh(i[1]),p=eh(o[1]),v=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(f)*Math.cos(p);return zx(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),n.units)}var Z0=6378137;function Su(t){return Ux(t,function(e,n){return e+Hx(n)},0)}function Hx(t){var e=0,n;switch(t.type){case"Polygon":return K0(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=K0(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function K0(t){var e=0;if(t&&t.length>0){e+=Math.abs(Y0(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Y0(t[n]))}return e}function Y0(t){var e,n,i,o,a,l,f,p=0,v=t.length;if(v>2){for(f=0;f<v;f++)f===v-2?(o=v-2,a=v-1,l=0):f===v-1?(o=v-1,a=0,l=1):(o=f,a=f+1,l=f+2),e=t[o],n=t[a],i=t[l],p+=(zf(i[0])-zf(e[0]))*Math.sin(zf(n[1]));p=p*Z0*Z0/2}return p}function zf(t){return t*Math.PI/180}function Bc(t,e){return e===void 0&&(e={}),Vx(t,function(n,i){var o=i.geometry.coordinates;return n+tu(o[0],o[1],e)},0)}class ba extends Kt.Rectangle{constructor(n,i={}){super(n,{...i,pmIgnore:!1,interactive:!0});Te(this,"properties");this.properties={type:"Rectangle",style:i||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var f;const n=this.getBounds(),i=n.getNorthEast(),o=n.getSouthWest(),a=tu([o.lng,o.lat],[i.lng,o.lat],{units:"meters"}),l=tu([o.lng,o.lat],[o.lng,i.lat],{units:"meters"});this.properties={...this.properties,width:a,height:l,area:a*l,perimeter:2*(a+l),center:n.getCenter(),corners:{northEast:i,northWest:n.getNorthWest(),southEast:n.getSouthEast(),southWest:o},bounds:n,surfaceInterieure:a*l,surfaceExterieure:a*l,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((f=this.options)==null?void 0:f.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}setBounds(n){return super.setBounds(n),this.updateProperties(),this}getMidPoints(){const n=this.getBounds(),i=n.getNorthWest(),o=n.getNorthEast(),a=n.getSouthEast(),l=n.getSouthWest();return[Kt.latLng((i.lat+o.lat)/2,(i.lng+o.lng)/2),Kt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2),Kt.latLng((l.lat+a.lat)/2,(l.lng+a.lng)/2),Kt.latLng((i.lat+l.lat)/2,(i.lng+l.lng)/2)]}getDimensions(){const n=this.getBounds(),i=n.getNorthEast(),o=n.getSouthWest(),a=tu([o.lng,o.lat],[i.lng,o.lat],{units:"meters"}),l=tu([o.lng,o.lat],[o.lng,i.lat],{units:"meters"});return{width:a,height:l}}resizeFromCorner(n,i){const o=this.getBounds(),a=[o.getNorthWest(),o.getNorthEast(),o.getSouthEast(),o.getSouthWest()],l=(n+2)%4,f=a[l],p=Kt.latLngBounds(f,i);Kt.Rectangle.prototype.setBounds.call(this,p)}resizeFromSide(n,i){const o=this.getBounds(),a=o.getNorthWest(),l=o.getSouthEast(),f=o.getSouthWest();let p;switch(n){case 0:p=Kt.latLngBounds(Kt.latLng(i.lat,a.lng),Kt.latLng(f.lat,l.lng));break;case 1:p=Kt.latLngBounds(Kt.latLng(a.lat,a.lng),Kt.latLng(l.lat,i.lng));break;case 2:p=Kt.latLngBounds(Kt.latLng(a.lat,a.lng),Kt.latLng(i.lat,l.lng));break;case 3:p=Kt.latLngBounds(Kt.latLng(a.lat,i.lng),Kt.latLng(l.lat,l.lng));break}p&&(Kt.Rectangle.prototype.setBounds.call(this,p),this.updateProperties())}moveFromCenter(n){const i=this.getBounds(),o=i.getCenter(),a=n.lng-o.lng,l=n.lat-o.lat,f=i.getNorthWest(),p=i.getSouthEast(),v=Kt.latLng(f.lat+l,f.lng+a),b=Kt.latLng(p.lat+l,p.lng+a);Kt.Rectangle.prototype.setBounds.call(this,Kt.latLngBounds(v,b))}}class So extends Kt.Rectangle{constructor(n,i="Double-cliquez pour diter",o={}){var p,v,b,w,S,x,R,N;const a=n instanceof Kt.LatLngBounds?n:Kt.latLngBounds(n);if(!a.isValid()){console.warn("[TextRectangle] Limites invalides, utilisation de limites par dfaut");const j=Kt.latLng(0,0);a.extend(Kt.latLng(j.lat+.001,j.lng+.001)),a.extend(Kt.latLng(j.lat-.001,j.lng-.001))}const l={...o.textStyle,color:o.textColor||((p=o.textStyle)==null?void 0:p.color)||"#000000",fontFamily:o.fontFamily||((v=o.textStyle)==null?void 0:v.fontFamily)||"Arial, sans-serif",textAlign:o.textAlign||((b=o.textStyle)==null?void 0:b.textAlign)||"center",backgroundColor:o.backgroundColor||((w=o.textStyle)==null?void 0:w.backgroundColor)||"#FFFFFF",backgroundOpacity:o.backgroundOpacity??((S=o.textStyle)==null?void 0:S.backgroundOpacity)??1,bold:o.bold||((x=o.textStyle)==null?void 0:x.bold)||!1,italic:o.italic||((R=o.textStyle)==null?void 0:R.italic)||!1,fontSize:((N=o.textStyle)==null?void 0:N.fontSize)||"14px"},f={pmIgnore:!1,interactive:!0,fill:!0,stroke:!0,className:"leaflet-text-rectangle",...o,textStyle:l};super(a,f);Te(this,"properties");Te(this,"_textNode",null);Te(this,"_isEditing",!1);Te(this,"_editableDiv",null);Te(this,"_text");Te(this,"_rotation",0);Te(this,"_textStyle",{color:"#000000",fontSize:"14px",fontFamily:"Arial, sans-serif",textAlign:"center",backgroundColor:"#FFFFFF",backgroundOpacity:1,bold:!1,italic:!1});Te(this,"_initialBounds",null);Te(this,"_isResizing",!1);Te(this,"_resizePreview",null);Te(this,"_minWidth",50);Te(this,"_minHeight",30);Te(this,"_maxWidth",2e3);Te(this,"_maxHeight",1e3);Te(this,"_onKeyDown",n=>{n.key==="Enter"&&n.ctrlKey?(n.preventDefault(),this._finishEditing()):n.key==="Escape"&&(n.preventDefault(),this._cancelEditing())});Te(this,"_finishEditing",()=>{if(this._editableDiv)try{const n=this._editableDiv.innerText.trim()||"Double-cliquez pour diter";this._cleanupEditableDiv(),this.setText(n),this._textRedraw(),this.fire("edit:end"),this.map&&!this.map.dragging.enabled()&&this.map.dragging.enable()}catch(n){console.error("[TextRectangle] Erreur lors de la finalisation de l'dition :",n),this._cleanupEditableDiv()}});Te(this,"_cancelEditing",()=>{this._textRedraw(),this._cleanupEditableDiv(),this.map&&!this.map.dragging.enabled()&&this.map.dragging.enable()});Te(this,"_updateTextPosition",()=>{this.updateProperties(),this._textRedraw()});Te(this,"_onZoomEnd",()=>{this._textRedraw()});Te(this,"_onAdd",()=>{this._textRedraw(),this.map&&this.map.on("zoomend",this._onZoomEnd.bind(this))});Te(this,"_onRemove",()=>{this._removeTextNode(),this.map&&this.map.off("zoomend",this._onZoomEnd)});this._text=i,this._textStyle=l,this.properties={type:"TextRectangle",text:this._text,width:0,height:0,area:0,rotation:this._rotation,style:{...f,textStyle:this._textStyle}},this.on({add:this._onAdd,remove:this._onRemove,dblclick:this._onDoubleClick,dragend:this._updateTextPosition,"pm:edit":this._updateTextPosition,"pm:dragend":this._updateTextPosition,"pm:markerdragend":this._updateTextPosition,"pm:vertexadded":this._updateTextPosition,"pm:vertexremoved":this._updateTextPosition}),this.pm&&(this.pm.enableLayerDrag(),console.log("[TextRectangle] Geoman activ pour cette instance"))}get map(){return this._map}set map(n){this._map=n}setText(n,i){const o=this.properties.text;this._text=n,i&&(this._textStyle={...this._textStyle,...i}),this.properties.text=n||"Double-cliquez pour diter",console.log("[TextRectangle] Mise  jour du texte",{oldText:o,newText:this.properties.text,hasTextNode:!!this._textNode}),this._textRedraw(),this.fire("text:updated",{text:this.properties.text,oldText:o,bounds:this.getBounds(),style:this.properties.style}),this.fire("properties:updated",{shape:this,properties:this.properties,source:"setText"})}setTextStyle(n){this._textStyle={...this._textStyle,...n},this.properties.style.textStyle=this._textStyle,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}setRotation(n){this.properties.rotation=n%360,this._textRedraw(),this.fire("properties:updated",{shape:this,properties:this.properties})}getTextElement(){return this._textNode}updateProperties(){if(this.map)try{const n=this.getBounds(),i=n.getSouthWest(),o=Kt.latLng(n.getSouth(),n.getEast()),a=this.map.distance(i,o),l=this.map.distance(i,Kt.latLng(n.getNorth(),n.getWest()));this.properties.width=a,this.properties.height=l,this.properties.area=a*l,this.properties.center=n.getCenter(),this.fire("properties:updated",{shape:this,properties:this.properties,source:"updateProperties",dimensions:{width:a,height:l}}),console.log("[TextRectangle] Proprits mises  jour",{width:a,height:l,area:a*l,center:n.getCenter()})}catch(n){console.error("[TextRectangle] Erreur lors de la mise  jour des proprits :",n)}}setBounds(n){const i=n instanceof Kt.LatLngBounds?n:Kt.latLngBounds(n);return Kt.Rectangle.prototype.setBounds.call(this,i),this._textRedraw(),this.updateProperties(),this}startResize(){if(!this._isResizing&&(this._isResizing=!0,this._initialBounds=this.getBounds(),this.map&&!this._resizePreview))try{if(this._resizePreview=Kt.rectangle(this._initialBounds,{color:this.options.color||"#3388ff",weight:this.options.weight||2,opacity:.8,fillColor:this.options.fillColor||"#3388ff",fillOpacity:.2,dashArray:this.options.dashArray||"5,5",className:"resize-preview"}).addTo(this.map),this._rotation!==0){const n=this._resizePreview._path;n&&(n.style.transformOrigin="center",n.style.transform=`rotate(${this._rotation}deg)`)}this._textNode&&(this._textNode.style.opacity="0.5")}catch(n){console.error("[TextRectangle] Erreur lors de la cration du rectangle fantme:",n),this._cleanupResizePreview()}}updateResizePreview(n){if(!(!this._isResizing||!this._resizePreview||!this.map))try{const i=this.map.latLngToContainerPoint(n.getNorthWest()),o=this.map.latLngToContainerPoint(n.getSouthEast()),a=Math.abs(o.x-i.x),l=Math.abs(o.y-i.y);if(a<this._minWidth||l<this._minHeight||a>this._maxWidth||l>this._maxHeight)return;if(this._resizePreview.setBounds(n),this._rotation!==0){const f=this._resizePreview._path;f&&(f.style.transformOrigin="center",f.style.transform=`rotate(${this._rotation}deg)`)}if(this._textNode){const f=Math.min(a,l)*.1,p=Math.max(10,Math.min(48,f)),v=p*1.2,w=this.properties.text.split(`
`).length*v,S=i.y+(l-w)/2,x=this._calculateTextX(i.x,o.x,5);if(this._textNode.setAttribute("x",x.toString()),this._textNode.setAttribute("y",S.toString()),this._textNode.querySelectorAll("tspan").forEach((R,N)=>{R.setAttribute("x",x.toString()),R.setAttribute("dy",N===0?"0":`${v}px`),R.style.fontSize=`${p}px`}),this._rotation!==0){const R=this.map.latLngToLayerPoint(n.getCenter());this._textNode.setAttribute("transform",`rotate(${this._rotation}, ${R.x}, ${R.y})`)}}this.fire("resize:update",{bounds:n})}catch(i){console.error("[TextRectangle] Erreur lors de la mise  jour du rectangle fantme:",i),this._cleanupResizePreview()}}endResize(n){if(this._isResizing)try{if(this._cleanupResizePreview(),this._textNode&&(this._textNode.style.opacity="1"),this.map){const i=this.map.latLngToContainerPoint(n.getNorthWest()),o=this.map.latLngToContainerPoint(n.getSouthEast()),a=Math.abs(o.x-i.x),l=Math.abs(o.y-i.y);if(a<this._minWidth||l<this._minHeight||a>this._maxWidth||l>this._maxHeight){this.cancelResize();return}}this.setBounds(n),this._textRedraw(),this.fire("resize:end",{bounds:n})}catch(i){console.error("[TextRectangle] Erreur lors de la fin du redimensionnement:",i),this.cancelResize()}finally{this._isResizing=!1}}cancelResize(){if(!(!this._isResizing||!this._initialBounds))try{this._cleanupResizePreview(),this._textNode&&(this._textNode.style.opacity="1"),this.setBounds(this._initialBounds)}catch(n){console.error("[TextRectangle] Erreur lors de l'annulation du redimensionnement:",n)}finally{this._isResizing=!1,this._initialBounds=null}}_cleanupResizePreview(){if(this._resizePreview&&this.map)try{this.map.removeLayer(this._resizePreview)}catch(n){console.error("[TextRectangle] Erreur lors du nettoyage du rectangle fantme:",n)}finally{this._resizePreview=null}}_onDoubleClick(n){this._isEditing||this._isResizing||(Kt.DomEvent.stopPropagation(n),this.fire("edit:start"),this._isEditing=!0,this._removeTextNode(),this._createEditableDiv())}_createEditableDiv(){if(this.map)try{const n=this.getBounds(),i=this.map.latLngToContainerPoint(n.getNorthWest()),o=this.map.latLngToContainerPoint(n.getSouthEast()),a=o.x-i.x,l=o.y-i.y,f=document.createElement("div");f.className="leaflet-text-rectangle-editor",f.contentEditable="true",f.innerText=this.properties.text;const p=Math.min(a,l)*.1,v=Math.max(10,Math.min(48,p));if(Object.assign(f.style,{position:"absolute",left:`${i.x}px`,top:`${i.y}px`,width:`${a}px`,height:`${l}px`,backgroundColor:this.properties.style.fillColor||"#FFFFFF",opacity:`${this.properties.style.fillOpacity??1}`,color:this.properties.style.textColor||"#000000",fontSize:`${v}px`,fontFamily:this.properties.style.fontFamily||"Arial, sans-serif",fontWeight:this.properties.style.bold?"bold":"normal",fontStyle:this.properties.style.italic?"italic":"normal",textAlign:this.properties.style.textAlign||"center",border:`${this.properties.style.weight||2}px solid ${this.properties.style.color||"#3388ff"}`,borderRadius:"2px",padding:"4px",boxSizing:"border-box",zIndex:"1000",overflow:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word",cursor:"text",userSelect:"text",outline:"none",display:"flex",alignItems:"center",justifyContent:this._getJustifyContent()}),this.properties.rotation!==0){const x=this.map.latLngToContainerPoint(n.getCenter());f.style.transformOrigin=`${x.x-i.x}px ${x.y-i.y}px`,f.style.transform=`rotate(${this.properties.rotation}deg)`}this.map.getContainer().appendChild(f),this._editableDiv=f,f.focus();const w=window.getSelection(),S=document.createRange();S.selectNodeContents(f),w==null||w.removeAllRanges(),w==null||w.addRange(S),f.addEventListener("keydown",this._onKeyDown.bind(this)),f.addEventListener("blur",this._finishEditing.bind(this)),f.addEventListener("paste",x=>{var N;x.preventDefault();const R=((N=x.clipboardData)==null?void 0:N.getData("text/plain"))||"";document.execCommand("insertText",!1,R)}),this.map.dragging.enabled()&&this.map.dragging.disable(),console.log("[TextRectangle] Div ditable cr",{position:{left:i.x,top:i.y},size:{width:a,height:l},fontSize:v,styles:this.properties.style})}catch(n){console.error("[TextRectangle] Erreur lors de la cration de l'diteur :",n),this._isEditing=!1}}_getJustifyContent(){switch(this.properties.style.textAlign||"center"){case"left":return"flex-start";case"right":return"flex-end";case"center":default:return"center"}}_cleanupEditableDiv(){this._editableDiv&&(this._editableDiv.removeEventListener("keydown",this._onKeyDown),this._editableDiv.removeEventListener("blur",this._finishEditing),this._editableDiv.parentNode&&this._editableDiv.parentNode.removeChild(this._editableDiv),this._editableDiv=null,this._isEditing=!1)}_textRedraw(){if(!Kt.Browser.svg||!this.map||this._isEditing||!this._path){console.log("[TextRectangle] _textRedraw ignor",{reason:Kt.Browser.svg?this.map?this._isEditing?"En cours d'dition":"Chemin SVG non trouv":"Carte non disponible":"SVG non support"});return}this._removeTextNode();const n=this.properties.text;if(n)try{const i=this._path;if(!i){console.warn("[TextRectangle] Chemin SVG non trouv");return}const o=i.ownerSVGElement;if(!o){console.warn("[TextRectangle] lment SVG parent non trouv");return}const a=Kt.SVG.create("text");a.setAttribute("class","leaflet-text-rectangle-text"),Object.assign(a.style,{fill:this.properties.style.textColor||"#000000",fontFamily:this.properties.style.fontFamily||"Arial, sans-serif",fontWeight:this.properties.style.bold?"bold":"normal",fontStyle:this.properties.style.italic?"italic":"normal"});const l=this.getBounds(),f=this.map.latLngToLayerPoint(l.getNorthWest()),p=this.map.latLngToLayerPoint(l.getSouthEast()),v=p.x-f.x,b=p.y-f.y,w=Math.min(v,b)*.1,S=Math.max(10,Math.min(48,w)),x=n.split(`
`),R=S*1.2,N=x.length*R,j=f.y+(b-N)/2,U=this._getTextAnchor(),W=this._calculateTextX(f.x,p.x,5);if(a.setAttribute("text-anchor",U),a.setAttribute("dominant-baseline","hanging"),x.forEach((X,St)=>{const Mt=Kt.SVG.create("tspan");Mt.textContent=X,Mt.setAttribute("x",W.toString()),Mt.setAttribute("dy",St===0?"0":`${R}px`),Mt.style.fontSize=`${S}px`,a.appendChild(Mt)}),a.setAttribute("y",j.toString()),this.properties.rotation!==0){const X=this.map.latLngToLayerPoint(l.getCenter());a.setAttribute("transform",`rotate(${this.properties.rotation}, ${X.x}, ${X.y})`)}this._textNode=a,o.appendChild(a),this.fire("text:redrawn",{text:n,fontSize:S,position:{x:W,y:j},dimensions:{width:v,height:b}}),console.log("[TextRectangle] Texte redessin avec succs",{text:n,fontSize:S,position:{x:W,y:j},dimensions:{width:v,height:b},lines:x.length,lineHeight:R,totalTextHeight:N})}catch(i){console.error("[TextRectangle] Erreur lors du rendu du texte :",i)}}_calculateTextX(n,i,o){const a=i-n;switch(this.properties.style.textAlign){case"left":return n+o;case"right":return i-o;case"center":default:return n+a/2}}_getTextAnchor(){switch(this.properties.style.textAlign){case"left":return"start";case"right":return"end";case"center":default:return"middle"}}_removeTextNode(){this._textNode&&this._textNode.parentNode&&(this._textNode.parentNode.removeChild(this._textNode),this._textNode=null)}getDimensions(){const n=this.getBounds();if(!this.map)return{width:0,height:0};const i=n.getSouthWest(),o=Kt.latLng(n.getSouth(),n.getEast()),a=this.map.distance(i,o),l=this.map.distance(i,Kt.latLng(n.getNorth(),n.getWest()));return{width:a,height:l}}getMidPoints(){const n=this.getBounds(),i=n.getNorthWest(),o=n.getNorthEast(),a=n.getSouthEast(),l=n.getSouthWest();return[Kt.latLng((i.lat+o.lat)/2,(i.lng+o.lng)/2),Kt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2),Kt.latLng((l.lat+a.lat)/2,(l.lng+a.lng)/2),Kt.latLng((i.lat+l.lat)/2,(i.lng+l.lng)/2)]}}var ro=63710088e-1,O1={centimeters:ro*100,centimetres:ro*100,degrees:360/(2*Math.PI),feet:ro*3.28084,inches:ro*39.37,kilometers:ro/1e3,kilometres:ro/1e3,meters:ro,metres:ro,miles:ro/1609.344,millimeters:ro*1e3,millimetres:ro*1e3,nauticalmiles:ro/1852,radians:1,yards:ro*1.0936};function Gx(t,e,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function bd(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!J0(t[0])||!J0(t[1]))throw new Error("coordinates must contain numbers");return Gx({type:"Point",coordinates:t},e,n)}function Wx(t,e="kilometers"){const n=O1[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Zx(t,e="kilometers"){const n=O1[e];if(!n)throw new Error(e+" units is invalid");return t/n}function wd(t){return t%(2*Math.PI)*180/Math.PI}function Ko(t){return t%360*Math.PI/180}function J0(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Tc(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Kx(t){return t.type==="Feature"?t.geometry:t}function R1(t,e,n={}){if(n.final===!0)return Yx(t,e);const i=Tc(t),o=Tc(e),a=Ko(i[0]),l=Ko(o[0]),f=Ko(i[1]),p=Ko(o[1]),v=Math.sin(l-a)*Math.cos(p),b=Math.cos(f)*Math.sin(p)-Math.sin(f)*Math.cos(p)*Math.cos(l-a);return wd(Math.atan2(v,b))}function Yx(t,e){let n=R1(e,t);return n=(n+180)%360,n}function Jx(t,e,n,i={}){const o=Tc(t),a=Ko(o[0]),l=Ko(o[1]),f=Ko(n),p=Zx(e,i.units),v=Math.asin(Math.sin(l)*Math.cos(p)+Math.cos(l)*Math.sin(p)*Math.cos(f)),b=a+Math.atan2(Math.sin(f)*Math.sin(p)*Math.cos(l),Math.cos(p)-Math.sin(l)*Math.sin(v)),w=wd(b),S=wd(v);return bd([w,S],i.properties)}function Xx(t,e,n={}){var i=Tc(t),o=Tc(e),a=Ko(o[1]-i[1]),l=Ko(o[0]-i[0]),f=Ko(i[1]),p=Ko(o[1]),v=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(f)*Math.cos(p);return Wx(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),n.units)}function Qx(t,e,n={}){const o=Kx(t).coordinates;let a=0;for(let l=0;l<o.length&&!(e>=a&&l===o.length-1);l++)if(a>=e){const f=e-a;if(f){const p=R1(o[l],o[l-1])-180;return Jx(o[l],f,p,n)}else return bd(o[l])}else a+=Xx(o[l],o[l+1],n);return bd(o[o.length-1])}var xd=Qx;class $i extends Kt.Polyline{constructor(n,i={}){super(n,{...i,pmIgnore:!1,interactive:!0});Te(this,"properties");Te(this,"cachedProperties",{});Te(this,"needsUpdate",!0);this.properties={type:"Line",style:i||{}},this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){var o;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const i=n.map(a=>[a.lng,a.lat]);try{const a=lu(i),l=Bc(a,{units:"meters"});let f;if(n.length===2)f=Kt.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const v=xd(a,l/2,{units:"meters"});f=Kt.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0])}const p=10;this.properties={...this.properties,length:l,center:f,vertices:n.length,surfaceInfluence:l*p,dimensions:{width:p},style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((o=this.options)==null?void 0:o.dashArray)||""}},this.cachedProperties.length=l,this.cachedProperties.center=f,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate line properties",a)}finally{}}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.invalidateCache(),this.updateProperties(),this}getMidPoints(){if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),i=[];if(n.length<2)return i;for(let o=0;o<n.length-1;o++){const a=n[o],l=n[o+1];if(!a||!l){console.warn("Points invalides dtects pour le segment",o);continue}i.push(Kt.latLng((a.lat+l.lat)/2,(a.lng+l.lng)/2))}return this.cachedProperties.midPoints=i,i}getMidPointAt(n){const i=this.getLatLngs();if(n<0||n>=i.length-1||i.length<2)return null;const o=i[n],a=i[n+1];return!o||!a?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Kt.latLng((o.lat+a.lat)/2,(o.lng+a.lng)/2)}moveVertex(n,i,o=!1){const a=this.getLatLngs();n>=0&&n<a.length&&(a[n]=i,Kt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}addVertex(n,i,o=!1){const a=this.getLatLngs();n>=0&&n<a.length-1&&(a.splice(n+1,0,i),Kt.Polyline.prototype.setLatLngs.call(this,a),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,o&&this.updateProperties())}move(n,i=!0){const a=this.getLatLngs().map(l=>Kt.latLng(l.lat+n.lat,l.lng+n.lng));return Kt.Polyline.prototype.setLatLngs.call(this,a),this.fire("move"),this.needsUpdate=!0,this.cachedProperties.center=void 0,i&&this.updateProperties(),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Kt.LatLng(0,0);try{const i=n.map(p=>[p.lng,p.lat]),o=lu(i),a=Bc(o,{units:"meters"}),l=xd(o,a/2,{units:"meters"}),f=Kt.latLng(l.geometry.coordinates[1],l.geometry.coordinates[0]);return this.cachedProperties.center=f,f}catch(i){console.warn("Error calculating line center with turf.js, using simple method",i);const o=n.reduce((f,p)=>f+p.lat,0)/n.length,a=n.reduce((f,p)=>f+p.lng,0)/n.length,l=new Kt.LatLng(o,a);return this.cachedProperties.center=l,l}}getSegmentLengths(){if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),i=[];if(n.length<2)return i;for(let o=0;o<n.length-1;o++){const a=n[o],l=n[o+1];i.push(a.distanceTo(l))}return this.cachedProperties.segmentLengths=i,i}getSegmentLengthAt(n){const i=this.getLatLngs();if(n<0||n>=i.length-1||i.length<2)return 0;const o=i[n],a=i[n+1];return o.distanceTo(a)}getLengthToVertex(n){const i=this.getLatLngs();let o=0;if(n<=0||i.length<2)return 0;for(let a=0;a<Math.min(n,i.length-1);a++)o+=i[a].distanceTo(i[a+1]);return o}getLength(){if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let i=0;for(let o=0;o<n.length-1;o++)i+=n[o].distanceTo(n[o+1]);return this.cachedProperties.length=i,i}}function tL(t,e,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function eL(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!X0(t[0])||!X0(t[1]))throw new Error("coordinates must contain numbers");return tL({type:"Point",coordinates:t},e,n)}function X0(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function I1(t,e,n){if(t!==null)for(var i,o,a,l,f,p,v,b=0,w=0,S,x=t.type,R=x==="FeatureCollection",N=x==="Feature",j=R?t.features.length:1,U=0;U<j;U++){v=R?t.features[U].geometry:N?t.geometry:t,S=v?v.type==="GeometryCollection":!1,f=S?v.geometries.length:1;for(var W=0;W<f;W++){var X=0,St=0;if(l=S?v.geometries[W]:v,l!==null){p=l.coordinates;var Mt=l.type;switch(b=Mt==="Polygon"||Mt==="MultiPolygon"?1:0,Mt){case null:break;case"Point":if(e(p,w,U,X,St)===!1)return!1;w++,X++;break;case"LineString":case"MultiPoint":for(i=0;i<p.length;i++){if(e(p[i],w,U,X,St)===!1)return!1;w++,Mt==="MultiPoint"&&X++}Mt==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(i=0;i<p.length;i++){for(o=0;o<p[i].length-b;o++){if(e(p[i][o],w,U,X,St)===!1)return!1;w++}Mt==="MultiLineString"&&X++,Mt==="Polygon"&&St++}Mt==="Polygon"&&X++;break;case"MultiPolygon":for(i=0;i<p.length;i++){for(St=0,o=0;o<p[i].length;o++){for(a=0;a<p[i][o].length-b;a++){if(e(p[i][o][a],w,U,X,St)===!1)return!1;w++}St++}X++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(I1(l.geometries[i],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function nL(t,e={}){let n=0,i=0,o=0;return I1(t,function(a){n+=a[0],i+=a[1],o++}),eL([n/o,i/o],e.properties)}var _c=nL;class Bu extends Kt.Polygon{constructor(n,i={}){super(n,{...i,pmIgnore:!1,interactive:!0});Te(this,"properties");this.properties={type:"Polygon",style:{color:i.color||"#3388ff",weight:i.weight||3,opacity:i.opacity||1,fillColor:i.fillColor||"#3388ff",fillOpacity:i.fillOpacity||.2,dashArray:i.dashArray||""}},this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){var n;try{const i=this.getLatLngs()[0];if(!i||i.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const o=i.map(b=>[b.lng,b.lat]);o.push(o[0]);const a=kl([o]),l=Su(a),f=Bc(lu([...o]),{units:"meters"}),p=_c(a),v=Kt.latLng(p.geometry.coordinates[1],p.geometry.coordinates[0]);this.properties={...this.properties,area:l,perimeter:f,center:v,vertices:i.length,surfaceInterieure:l,surfaceExterieure:l,style:{...this.options,color:this.options.color||"#3388ff",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#3388ff",fillOpacity:this.options.fillOpacity||.2,dashArray:((n=this.options)==null?void 0:n.dashArray)||""}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(i){console.error("Failed to calculate polygon properties",i)}}setLatLngs(n){return super.setLatLngs(n),this.updateProperties(),this}getMidPoints(){const n=this.getLatLngs()[0],i=[];if(n.length<2)return i;for(let o=0;o<n.length;o++){const a=n[o],l=n[(o+1)%n.length];i.push(Kt.latLng((a.lat+l.lat)/2,(a.lng+l.lng)/2))}return i}moveVertex(n,i){const o=this.getLatLngs()[0];n>=0&&n<o.length&&(o[n]=i,Kt.Polygon.prototype.setLatLngs.call(this,[o]))}addVertex(n,i){const o=this.getLatLngs()[0];n>=0&&n<o.length&&(o.splice((n+1)%o.length,0,i),Kt.Polygon.prototype.setLatLngs.call(this,[o]))}move(n){const o=this.getLatLngs()[0].map(a=>Kt.latLng(a.lat+n.lat,a.lng+n.lng));return Kt.Polygon.prototype.setLatLngs.call(this,[o]),this}getCenter(){const n=this.getLatLngs()[0];if(!n||n.length===0)return new Kt.LatLng(0,0);try{const i=n.filter(v=>v&&typeof v.lat=="number"&&typeof v.lng=="number"&&!isNaN(v.lat)&&!isNaN(v.lng)&&Math.abs(v.lat)<=90&&Math.abs(v.lng)<=180);if(i.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Kt.LatLng(0,0);const o=i.map(v=>[v.lng,v.lat]);o.push(o[0]);const a=kl([o]),l=_c(a),f=l.geometry.coordinates[1],p=l.geometry.coordinates[0];if(typeof f!="number"||typeof p!="number"||isNaN(f)||isNaN(p)||Math.abs(f)>90||Math.abs(p)>180)throw new Error("Centroid calcul invalide");return Kt.latLng(f,p)}catch(i){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",i);let o=0,a=0,l=0;for(const f of n)f&&typeof f.lat=="number"&&typeof f.lng=="number"&&!isNaN(f.lat)&&!isNaN(f.lng)&&Math.abs(f.lat)<=90&&Math.abs(f.lng)<=180&&(o+=f.lat,a+=f.lng,l++);return l===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Kt.LatLng(0,0)):new Kt.LatLng(o/l,a/l)}}getSegmentLengths(){const n=this.getLatLngs()[0],i=[];if(n.length<2)return i;for(let o=0;o<n.length;o++){const a=n[o],l=n[(o+1)%n.length];i.push(a.distanceTo(l))}return i}}const ys=class ys extends $i{constructor(n,i={}){super(n,{...i,color:"#FF4500",weight:4,opacity:.8});Te(this,"elevationData",[]);Te(this,"elevationProfile",null);Te(this,"elevationMarker",null);Te(this,"samplePoints",[]);Te(this,"sampleTooltips",[]);Te(this,"samplePointStyle",{radius:4,color:"#FF4500",fillColor:"#FF4500",fillOpacity:.6,weight:2,opacity:.8});Te(this,"minMaxPointStyle",{radius:6,weight:3,opacity:1,fillOpacity:1});this.properties={...this.properties,type:"ElevationLine",elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending",samplePointStyle:this.samplePointStyle,minMaxPointStyle:this.minMaxPointStyle},this.setupEventListeners()}setupEventListeners(){this.on("edit",()=>this.updateElevationProfile()),this.on("move",()=>this.updateElevationProfile()),this.on("pm:vertexadded",()=>{console.log("[ElevationLine] Vertex added, updating profile"),this.updateElevationProfile()}),this.on("pm:vertexremoved",()=>{console.log("[ElevationLine] Vertex removed, updating profile"),this.updateElevationProfile()}),this.on("pm:dragend",()=>{console.log("[ElevationLine] Drag ended, updating profile"),this.updateElevationProfile()}),this.on("pm:markerdragend",()=>{console.log("[ElevationLine] Marker drag ended, updating profile"),this.updateElevationProfile()}),this.on("pm:edit",n=>{n.layer.properties.type="ElevationLine"})}calculateOptimalSampleCount(){const n=this.getLength(),i=Math.ceil(n/ys.SAMPLE_DISTANCE);return Math.min(Math.max(i,ys.MIN_SAMPLES),ys.MAX_SAMPLES)}async fetchElevationData(n=0){if(this.getLatLngs().length===0)return;const o=this.getLength();let a="";const l=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${l} sample points for ${o.toFixed(0)}m line`);const f=[];for(let p=0;p<l;p++){const v=p/(l-1)*o,b=this.getPointAtDistance(v);b&&f.push(`${b.lat},${b.lng}`)}a=f.join("|");try{const p=await fetch(`${ys.API_URL}?locations=${a}`);if(!p.ok)throw new Error(`HTTP error ${p.status}`);const v=await p.json();if(!v.results||!Array.isArray(v.results))throw new Error("Invalid API response format");this.elevationData=v.results.map((b,w)=>({distance:w/(l-1)*o,elevation:b.elevation})),this.properties.dataSource="api"}catch(p){if(console.warn(`[ElevationLine] API fetch attempt ${n+1}/${ys.MAX_RETRIES} failed:`,p),n<ys.MAX_RETRIES)return await new Promise(v=>setTimeout(v,ys.RETRY_DELAY)),this.fetchElevationData(n+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()}simulateElevationData(){const n=this.getLength(),i=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:i},(o,a)=>{const l=a/(i-1)*n,f=100+Math.sin(l/n*Math.PI*2)*50;return{distance:l,elevation:f}})}calculateElevationStatistics(){if(!this.elevationData.length)return;const n=this.elevationData.map(f=>f.elevation),i=n.length?Math.max(...n):0,o=n.length?Math.min(...n):0;let a=0,l=0;for(let f=1;f<this.elevationData.length;f++){const p=this.elevationData[f].elevation-this.elevationData[f-1].elevation;p>0?a+=p:l+=Math.abs(p)}this.properties.maxElevation=i,this.properties.minElevation=o,this.properties.elevationGain=a,this.properties.elevationLoss=l}showSamplePoints(){if(this.clearSamplePoints(),!this.elevationData.length)return;const n=this.elevationData.map(a=>a.elevation),i=Math.max(...n),o=Math.min(...n);this.elevationData.forEach(a=>{const l=this.getPointAtDistance(a.distance);if(!l)return;const f=a.elevation===o,p=a.elevation===i;let v={...this.samplePointStyle};f?v={...v,...this.minMaxPointStyle,color:"#DC2626",fillColor:"#DC2626"}:p&&(v={...v,...this.minMaxPointStyle,color:"#059669",fillColor:"#059669"});const b=Kt.circleMarker(l,v),w=Kt.tooltip({permanent:!1,direction:"top",className:"elevation-tooltip",offset:[0,-10]});let S=`
        Distance: ${this.formatDistance(a.distance)}<br>
        Altitude: ${this.formatElevation(a.elevation)}
      `;f&&(S+="<br><strong>Point le plus bas</strong>"),p&&(S+="<br><strong>Point le plus haut</strong>"),w.setContent(S),b.on("mouseover",()=>{b.setStyle({...v,radius:v.radius+2,fillOpacity:1}),b.bindTooltip(w).openTooltip()}),b.on("mouseout",()=>{b.setStyle(v),b.closeTooltip()}),this._map&&(b.addTo(this._map),this.samplePoints.push(b),this.sampleTooltips.push(w))})}clearSamplePoints(){this.samplePoints.forEach(n=>n.remove()),this.samplePoints=[],this.sampleTooltips.forEach(n=>n.remove()),this.sampleTooltips=[]}formatDistance(n){return n>=1e3?`${(n/1e3).toFixed(2)} km`:`${n.toFixed(0)} m`}formatElevation(n){return`${n.toFixed(0)} m`}onAdd(n){return super.onAdd(n),this.showSamplePoints(),this}onRemove(n){return this.clearSamplePoints(),this.hideElevationMarker(),this.elevationProfile&&(this.elevationProfile.remove(),this.elevationProfile=null),super.onRemove(n)}async updateElevationProfile(){await this.fetchElevationData(),this.updateProperties(),this._map&&this.showSamplePoints(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}updateProperties(){if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const n=this.elevationData.map(f=>f.elevation),i=Math.max(...n),o=Math.min(...n);let a=0,l=0;for(let f=1;f<this.elevationData.length;f++){const p=this.elevationData[f].elevation-this.elevationData[f-1].elevation;p>0?a+=p:l+=Math.abs(p)}this.properties={...this.properties,type:"ElevationLine",elevationData:this.elevationData,maxElevation:i,minElevation:o,elevationGain:a,elevationLoss:l}}}getElevationData(){return this.elevationData}showElevationAt(n){if(!this.elevationData.length)return;const i=this.elevationData.reduce((a,l)=>Math.abs(l.distance-n)<Math.abs(a.distance-n)?l:a),o=this.getPointAtDistance(n);!this.elevationMarker&&o?(this.elevationMarker=Kt.circleMarker(o,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1}),this.elevationMarker.addTo(this._map)):this.elevationMarker&&o&&this.elevationMarker.setLatLng(o),this.fire("elevation:show",{distance:n,elevation:i.elevation,latLng:o})}hideElevationMarker(){this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)}getPointAtDistance(n){try{const o=this.getLatLngs().map(f=>[f.lng,f.lat]),a=lu(o),l=xd(a,n,{units:"meters"});return Kt.latLng(l.geometry.coordinates[1],l.geometry.coordinates[0])}catch(i){return console.error("Error calculating point at distance",i),null}}moveVertex(n,i,o=!1){super.moveVertex(n,i,!1),this.properties.type="ElevationLine",o&&this.updateElevationProfile()}addVertex(n,i,o=!1){console.warn("[ElevationLine] Tentative d'ajout de vertex ignore - non autoris pour un profil altimtrique")}setLatLngs(n){return super.setLatLngs(n),this.properties.type="ElevationLine",this.updateElevationProfile(),this}move(n,i=!0){return super.move(n,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile(),this}setSamplePointStyle(n){this.samplePointStyle={...this.samplePointStyle,...n},this.properties.samplePointStyle=this.samplePointStyle,this._map&&this.showSamplePoints()}setMinMaxPointStyle(n){this.minMaxPointStyle={...this.minMaxPointStyle,...n},this.properties.minMaxPointStyle=this.minMaxPointStyle,this._map&&this.showSamplePoints()}};Te(ys,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Te(ys,"RETRY_DELAY",2e3),Te(ys,"MAX_RETRIES",3),Te(ys,"SAMPLE_DISTANCE",100),Te(ys,"MIN_SAMPLES",10),Te(ys,"MAX_SAMPLES",50);let Sl=ys;const Nh=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return`rgba(${n}, ${i}, ${o}, ${e})`},Q0=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=Nh(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${Nh(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},ms=t=>{document.querySelectorAll(".drawing-help-message").forEach(i=>i.remove());const n=Kt.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function tg(t,e,n){const i=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/i}const cn=(t,e="m",n="")=>{let i,o;return e==="m"?t>=1e4?(i=(t/1e4).toFixed(2),o="ha"):(i=t.toFixed(2),o="m"):e==="m"?t>=1e3?(i=(t/1e3).toFixed(2),o="km"):(i=t.toFixed(2),o="m"):(i=t.toFixed(2),o=e),n?`${n}: ${i} ${o}`:`${i} ${o}`},iL=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),rL=(t,e)=>{let n;return function(...i){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,i),e)}},wu=(t,e)=>{let n=0;return function(...i){const o=Date.now();if(!(o-n<e))return n=o,t.apply(this,i)}};function sL(){const t=Ie(null),e=Ie(null),n=Ie(null),i=Ie(null),o=Ie(""),a=Ie(null),l=Ie(!1);window.addEventListener("clearControlPoints",()=>{a.value=null,n.value&&n.value.clearLayers(),i.value&&i.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(A=>A.remove()),document.querySelectorAll(".drawing-help-message").forEach(A=>A.remove())}),Wh(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const f=(A,H="Double-cliquez pour diter")=>{const V={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},z=(ct,At)=>{var yt;const Ot=((yt=t.value)==null?void 0:yt.getZoom())||14,G=A.lat,tt=tg(At.physicalSize,G,Ot);return`<div class="text-container" style="width:${tt}px;height:${tt}px;transform:rotate(${At.rotation}deg)">
        <div class="text-annotation" style="font-size:${tt*.2}px;color:${At.color};background-color:${Nh(At.backgroundColor,At.backgroundOpacity)};border:${At.hasBorder?At.borderWidth+" solid "+Nh(At.borderColor,At.borderOpacity):"none"};padding:${At.padding};border-radius:${At.borderRadius}">${ct}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},mt=()=>{if(!t.value)return;const ct=ht.getIcon(),At={html:z(ht.properties.text,ht.properties.style),className:ct.options.className};ht.setIcon(Kt.divIcon(At))},ft=Kt.divIcon({html:z(H,V),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),ht=Kt.marker(A,{icon:ft,draggable:!1,pmIgnore:!0});ht.properties={type:"text",text:H,style:{...V}},t.value&&(t.value.on("zoomend",mt),ht.on("remove",()=>{var ct;(ct=t.value)==null||ct.off("zoomend",mt)})),mt();let I=!1,it=!1,rt=0,$=0;const D=ct=>{if(!t.value)return;const At=ct.target;if(At.classList.contains("rotate")){I=!0;const Ot=ht.getLatLng(),G=t.value.mouseEventToLatLng(ct);rt=Math.atan2(G.lat-Ot.lat,G.lng-Ot.lng)*180/Math.PI,$=ht.properties.style.rotation||0}else At.classList.contains("move")&&(it=!0);document.addEventListener("mousemove",q),document.addEventListener("mouseup",dt)},q=ct=>{if(!(!it||!t.value)){if(I){const At=ht.getLatLng(),Ot=t.value.mouseEventToLatLng(ct),G=Math.atan2(Ot.lat-At.lat,Ot.lng-At.lng)*180/Math.PI,tt=($+(G-rt))%360;ht.properties.style.rotation=tt;const yt=ht.getIcon(),vt={html:z(ht.properties.text,ht.properties.style),className:yt.options.className};ht.setIcon(Kt.divIcon(vt))}else if(it){const At=iL(ct),Ot=t.value.mouseEventToLatLng(At);ht.setLatLng(Ot)}}},dt=()=>{I=!1,it=!1,document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",dt)};return ht.on("add",()=>{const ct=ht.getElement();ct&&ct.querySelectorAll(".control-button").forEach(Ot=>{Ot.addEventListener("mousedown",D)})}),ht.on("remove",()=>{const ct=ht.getElement();ct&&ct.querySelectorAll(".control-button").forEach(Ot=>{Ot.removeEventListener("mousedown",D)})}),ht.on("dblclick",ct=>{var vt;Kt.DomEvent.stopPropagation(ct);const At=(vt=ht.getElement())==null?void 0:vt.querySelector(".text-annotation");if(!At)return;At.contentEditable="true",At.focus(),At.classList.add("editing");const Ot=window.getSelection(),G=document.createRange();G.selectNodeContents(At),Ot==null||Ot.removeAllRanges(),Ot==null||Ot.addRange(G);const tt=()=>{At.contentEditable="false",At.classList.remove("editing");const Y=At.innerText.trim();if(Y){ht.properties.text=Y;const $t=ht.getIcon(),ee={html:z(Y,ht.properties.style),className:$t.options.className};ht.setIcon(Kt.divIcon(ee))}At.removeEventListener("blur",tt),At.removeEventListener("keydown",yt)},yt=Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),tt())};At.addEventListener("blur",tt),At.addEventListener("keydown",yt)}),ht},p=(A,H)=>{const V=Kt.DomUtil.create("div","measure-tooltip");if(V.innerHTML=H,V.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(V),t.value){const z=t.value.latLngToContainerPoint(A);V.style.left=`${z.x+10}px`,V.style.top=`${z.y-25}px`}return V},v=wu((A,H,V)=>{if(A&&(A.innerHTML=V,t.value)){const z=t.value.latLngToContainerPoint(H);A.style.left=`${z.x+10}px`,A.style.top=`${z.y-25}px`}},100),b=(A,H,V)=>{A.on("mouseover",()=>{const z=p(A.getLatLng(),V());A.measureDiv=z}),A.on("mousemove",z=>{A.measureDiv&&t.value&&v(A.measureDiv,z.latlng,V())}),A.on("mouseout",()=>{A.measureDiv&&(A.measureDiv.remove(),A.measureDiv=void 0)})};let w=[];const S=()=>{w.forEach(A=>{A&&A.remove&&("measureDiv"in A&&A.measureDiv&&(A.measureDiv.remove(),A.measureDiv=void 0),n.value&&n.value.removeLayer(A),A.remove())}),w=[],document.querySelectorAll(".measure-tooltip").forEach(A=>{A.remove()})},x=(A,H="#2563EB")=>{const V=Kt.circleMarker(A,{radius:6,color:H,fillColor:H,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(V),V},R=(A,H)=>{var z,mt,ft,ht,I,it;console.log("Input layer:",{type:H,instanceof:{Circle:A instanceof Kt.Circle,Rectangle:A instanceof Kt.Rectangle,Polygon:A instanceof Kt.Polygon,Polyline:A instanceof Kt.Polyline,CircleArc:A instanceof Qa,TextRectangle:A instanceof So,ElevationLine:A instanceof Sl,Line:A instanceof $i},options:A.options});const V={type:H,style:A.options||{}};try{if(A instanceof So)return A.properties;if(A instanceof Kt.Circle){const rt=A.getRadius(),$=A.getLatLng();V.radius=rt,V.diameter=rt*2,V.area=Math.PI*Math.pow(rt,2),V.perimeter=2*Math.PI*rt,V.center=$,V.surfaceInterieure=V.area,V.surfaceExterieure=V.area}else if(A instanceof Qa){const rt=A.getRadius(),$=A.getCenter(),D=A.getStartAngle(),q=A.getStopAngle(),dt=A.getOpeningAngle();V.radius=rt,V.diameter=rt*2,V.area=Math.PI*Math.pow(rt,2)*dt/360,V.arcLength=2*Math.PI*rt*dt/360,V.perimeter=V.arcLength+2*rt,V.center=$,V.startAngle=D,V.stopAngle=q,V.openingAngle=dt,V.surfaceInterieure=V.area,V.surfaceExterieure=V.area}else if(A instanceof Kt.Rectangle){const rt=A.getBounds(),$=rt.getNorthEast(),D=rt.getSouthWest(),q=tu([D.lng,D.lat],[$.lng,D.lat],{units:"meters"}),dt=tu([D.lng,D.lat],[D.lng,$.lat],{units:"meters"});V.width=q,V.height=dt,V.area=q*dt,V.perimeter=2*(q+dt),V.surfaceInterieure=V.area,V.surfaceExterieure=V.area,V.dimensions={width:q,height:dt}}else if(A instanceof Kt.Polygon){const $=A.getLatLngs()[0].map(q=>[q.lng,q.lat]);$.push($[0]);const D=kl([$]);V.area=Su(D),V.perimeter=Bc(lu([...$]),{units:"meters"}),V.surfaceInterieure=V.area,V.surfaceExterieure=V.area}else if(A instanceof Kt.Polyline&&!(A instanceof Kt.Polygon))if(A instanceof Sl)A.updateProperties(),Object.assign(V,{...A.properties,type:"ElevationLine"}),console.log("[calculateShapeProperties] ElevationLine properties:",V);else if(A instanceof $i)A.updateProperties(),Object.assign(V,{...A.properties,type:"Line"});else{const $=A.getLatLngs().map(dt=>[dt.lng,dt.lat]),D=lu($);V.length=Bc(D,{units:"meters"});const q=10;V.surfaceInfluence=V.length*q,V.dimensions={width:q},V.type="Line"}V.style={...V.style,color:((z=A.options)==null?void 0:z.color)||"#3388ff",weight:((mt=A.options)==null?void 0:mt.weight)||3,opacity:((ft=A.options)==null?void 0:ft.opacity)||1,fillColor:((ht=A.options)==null?void 0:ht.fillColor)||"#3388ff",fillOpacity:((I=A.options)==null?void 0:I.fillOpacity)||.2,dashArray:((it=A.options)==null?void 0:it.dashArray)||""}}catch(rt){console.error("Error calculating shape properties:",rt)}return V},N=(A,H=2)=>{var ht;if(!t.value){console.warn("Map is not available for text size update");return}const V=t.value.getZoom(),z=A.getLatLng().lat,mt=tg(H,z,V),ft=(ht=A.getElement())==null?void 0:ht.querySelector(".text-annotation");ft&&(A.properties.style.fontSize=`${mt}px`,A.properties.physicalWidth=H,A.properties.physicalHeight=H,Q0(ft,A.properties.style))},j=(A,H,V)=>{const z=Kt.map(A).setView(H,V);t.value=z,Kt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(z);const mt=new Kt.FeatureGroup;return mt.addTo(z),e.value=mt,n.value=Kt.featureGroup().addTo(z),i.value=Kt.featureGroup().addTo(z),z.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:mt,snapLayers:[mt,i.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),z.on("pm:drawstart",ft=>{l.value=!0,ft.shape==="Circle"&&o.value==="Semicircle"&&(z.getContainer().style.cursor="crosshair")}),z.on("pm:drawend",()=>{l.value=!1,z.getContainer().style.cursor="",a.value&&ms("Cliquez sur la forme pour afficher les points de contrle")}),z.on("pm:create",async ft=>{var it,rt,$,D,q,dt,ct,At,Ot,G,tt;const ht=ft.layer;(it=e.value)==null||it.addLayer(ht);let I="unknown";if(ht instanceof Kt.Circle?I=o.value==="Semicircle"?"Semicircle":"Circle":ht instanceof Kt.Rectangle?I="Rectangle":ht instanceof Kt.Polygon?I="Polygon":ht instanceof Kt.Polyline&&!(ht instanceof Kt.Polygon)&&(I="Line"),ht.properties=R(ht,I),a.value=ht,window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:ht,type:I,properties:ht.properties}})),ht.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:I,isSelected:a.value===ht}),(!a.value||a.value!==ht)&&Et(ht)}),ht.on("mouseout",()=>{var yt;console.log("[mouseout] Sortie de la forme",{type:I,isSelected:a.value===ht}),(!a.value||a.value!==ht)&&((yt=i.value)==null||yt.clearLayers())}),I==="Semicircle"){const yt=ht.getLatLng(),vt=ht.getRadius();(rt=e.value)==null||rt.removeLayer(ht);const Y=new Qa(yt,vt);Y.properties=R(Y,"Semicircle"),($=e.value)==null||$.addLayer(Y),a.value=Y,Z(Y)}else if(I==="Circle"){(D=e.value)==null||D.removeLayer(ht);const yt=new rc(ht.getLatLng(),{...ht.options,radius:ht.getRadius()});yt.updateProperties(),(q=e.value)==null||q.addLayer(yt),a.value=yt,gt(yt)}else if(I==="Rectangle"){(dt=e.value)==null||dt.removeLayer(ht);const yt=new ba(ht.getBounds(),{...ht.options});yt.updateProperties(),(ct=e.value)==null||ct.addLayer(yt),a.value=yt,_t(yt)}else if(ht instanceof Kt.Polygon){const yt=ht.getLatLngs()[0],vt=new Bu([yt],{...ht.options});vt.updateProperties(),(At=e.value)==null||At.removeLayer(ht),(Ot=e.value)==null||Ot.addLayer(vt),a.value=vt,J(vt)}else if(ht instanceof $i)zt(ht);else if(ht instanceof Kt.Polyline&&!(ht instanceof Kt.Polygon)){const yt=ht.getLatLngs(),vt=new $i(yt,{...ht.options});vt.updateProperties(),(G=e.value)==null||G.removeLayer(ht),(tt=e.value)==null||tt.addLayer(vt),a.value=vt,zt(vt)}ms("Cliquez sur la forme pour afficher les points de contrle")}),mt.on("click",ft=>{var I,it,rt,$,D,q,dt,ct,At;Kt.DomEvent.stopPropagation(ft);const ht=ft.layer;if(console.log("[featureGroup click] Slection de forme",{type:(I=ht.properties)==null?void 0:I.type,previouslySelected:a.value===ht}),(it=i.value)==null||it.clearLayers(),S(),(rt=document.querySelector(".drawing-help-message"))==null||rt.remove(),a.value=ht,ht instanceof So){console.log("[featureGroup click] TextRectangle slectionn",{id:ht._leaflet_id,bounds:ht.getBounds(),hasTextContainer:!!ht.getTextElement(),properties:ht.properties}),($=t.value)!=null&&$.pm.globalEditModeEnabled()&&t.value.pm.disableGlobalEditMode(),Bt(ht),ms("Double-cliquez pour diter le texte. Utilisez les points rouges pour redimensionner.");return}if(ht instanceof Qa||((D=ht.properties)==null?void 0:D.type)==="Semicircle")Z(ht);else if(ht instanceof rc)gt(ht);else if(ht instanceof Kt.Circle){const Ot=new rc(ht.getLatLng(),{...ht.options,radius:ht.getRadius()});Ot.updateProperties(),(q=e.value)==null||q.removeLayer(ht),(dt=e.value)==null||dt.addLayer(Ot),a.value=Ot,gt(Ot)}else if(ht instanceof ba)_t(ht);else if(ht instanceof Kt.Rectangle){const Ot=new ba(ht.getBounds(),{...ht.options});Ot.updateProperties(),(ct=e.value)==null||ct.removeLayer(ht),(At=e.value)==null||At.addLayer(Ot),a.value=Ot,_t(Ot)}else ht instanceof Kt.Polygon?J(ht):(ht instanceof $i||ht instanceof Kt.Polyline&&!(ht instanceof Kt.Polygon))&&zt(ht)}),z.on("pm:edit",ft=>{var I,it,rt;console.log("[pm:edit] Dbut",{layer:ft.layer,currentProperties:ft.layer.properties});const ht=ft.layer;if(ht){const $=((I=ht.properties)==null?void 0:I.type)||"unknown";if(Nt(ht,$),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:ht.properties,selectedShape:a.value}),$==="Semicircle")Z(ht);else if(ht instanceof rc)gt(ht);else if(ht instanceof ba)_t(ht);else if(ht instanceof Kt.Rectangle){const D=new ba(ht.getBounds(),{...ht.options});D.updateProperties(),(it=e.value)==null||it.removeLayer(ht),(rt=e.value)==null||rt.addLayer(D),a.value=D,_t(D)}else ht instanceof Kt.Polygon?J(ht):ht instanceof $i?(ht.updateProperties(),Nt(ht,"Line"),zt(ht)):ht instanceof Kt.Polyline&&zt(ht)}}),z.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(ft=>ft.remove()),ms("Dplacez la forme  l'endroit souhait")}),z.on("pm:dragend",ft=>{var I,it,rt;console.log("[pm:dragend] Dbut",{layer:ft.layer,currentProperties:ft.layer.properties});const ht=ft.layer;if(ht){const $=((I=ht.properties)==null?void 0:I.type)||"unknown";if(ht instanceof Kt.Rectangle&&!(ht instanceof ba)){const D=new ba(ht.getBounds(),{...ht.options});D.updateProperties(),(it=e.value)==null||it.removeLayer(ht),(rt=e.value)==null||rt.addLayer(D),a.value=D,_t(D)}else ht instanceof $i?(ht.updateProperties(),Nt(ht,"Line"),zt(ht)):Nt(ht,$);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:ht.properties,selectedShape:a.value})}setTimeout(()=>{ms("Cliquez sur la forme pour afficher les points de contrle")},100)}),z.on("pm:remove",()=>{var ft;(ft=document.querySelector(".drawing-help-message"))==null||ft.remove()}),z.on("pm:select",ft=>{var I;const ht=ft.layer;document.querySelectorAll(".drawing-help-message").forEach(it=>it.remove()),ht instanceof Qa||((I=ht.properties)==null?void 0:I.type)==="Semicircle"?ms(`Points de contrle : <span style="color: #059669"></span> Ajuster le rayon, <span style="color: #2563EB"></span> et <span style="color: #DC2626"></span> Modifier l'ouverture du demi-cercle`):ms("Utilisez les points de contrle pour modifier la forme")}),z.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(ft=>ft.remove())}),z.on("zoomstart",()=>{a.value&&(S(),a.value=null,document.querySelectorAll(".drawing-help-message").forEach(ft=>ft.remove()))}),z},U=()=>{if(!t.value||!e.value)return;const A=e.value.getBounds();A.isValid()&&t.value.fitBounds(A,{padding:[50,50],maxZoom:19})},W=A=>{var H;if(t.value){document.querySelectorAll(".drawing-help-message").forEach(V=>V.remove());try{const V=t.value.pm;V.globalEditModeEnabled()&&V.disableGlobalEditMode(),V.globalRemovalModeEnabled()&&V.disableGlobalRemovalMode(),V.disableDraw(),S(),(H=i.value)==null||H.clearLayers()}catch(V){console.error("Error disabling modes:",V)}if(o.value=A,!A){S();return}setTimeout(()=>{var V,z,mt,ft,ht,I,it,rt,$,D,q,dt,ct;try{switch(A){case"Circle":case"Semicircle":const At=(V=e.value)==null?void 0:V.getLayers().filter(Ot=>Ot instanceof ba||Ot instanceof So);At&&At.length>0&&At.forEach(Ot=>{var $t;if(!Ot.getBounds)return;const G=Ot.getBounds();[G.getNorthWest(),G.getNorthEast(),G.getSouthEast(),G.getSouthWest()].forEach(ee=>{var Rt;const Ht=Kt.circleMarker(ee,{radius:4,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.4,weight:2,className:"temp-corner-marker",pmIgnore:!0});(Rt=i.value)==null||Rt.addLayer(Ht)}),(Ot instanceof ba?Ot.getMidPoints():[Kt.latLng((G.getNorth()+G.getSouth())/2,G.getWest()),Kt.latLng(G.getNorth(),(G.getEast()+G.getWest())/2),Kt.latLng((G.getNorth()+G.getSouth())/2,G.getEast()),Kt.latLng(G.getSouth(),(G.getEast()+G.getWest())/2)]).forEach(ee=>{var Rt;const Ht=Kt.circleMarker(ee,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.6,weight:2,className:"temp-midpoint-marker",pmIgnore:!0});(Rt=i.value)==null||Rt.addLayer(Ht)});const vt=G.getCenter(),Y=Kt.circleMarker(vt,{radius:4,color:"#059669",fillColor:"#059669",fillOpacity:.4,weight:2,className:"temp-center-marker",pmIgnore:!0});($t=i.value)==null||$t.addLayer(Y)}),t.value.pm.setGlobalOptions({snapDistance:20,snapSegment:!0,snapLayers:[e.value,i.value]}),ms(A==="Circle"?"Positionnez le centre du cercle. Points bleus : milieu des cts, Points rouges : sommets, Point vert : centre":"Positionnez le centre du demi-cercle. Points bleus : milieu des cts, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":ms("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(z=t.value)==null||z.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ms("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(mt=t.value)==null||mt.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ms("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(ft=t.value)==null||ft.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(ms("Cliquez pour ajouter du texte, double-cliquez pour diter"),t.value){const Ot=G=>{if(!t.value||!e.value)return;const tt=f(G.latlng);e.value.addLayer(tt),a.value=tt,t.value.off("click",Ot),W("")};t.value.on("click",Ot)}break;case"delete":ms("Cliquez sur une forme pour la supprimer"),(ht=t.value)==null||ht.pm.enableGlobalRemovalMode();break;case"TextRectangle":ms("Cliquez et maintenez pour dessiner un rectangle avec texte, relchez pour terminer"),(I=t.value)!=null&&I.pm.globalEditModeEnabled()&&t.value.pm.disableGlobalEditMode(),(it=t.value)==null||it.pm.enableDraw("Rectangle",{finishOn:"mouseup",continueDrawing:!1,templineStyle:{color:"#3B82F6",weight:2,dashArray:"5,5"}}),(rt=t.value)==null||rt.off("pm:create"),($=t.value)==null||$.on("pm:create",Ot=>{var G,tt,yt;if(Ot.shape==="Rectangle"&&Ot.layer){const vt=Ot.layer.getBounds();let Y=!1;if(e.value&&e.value.eachLayer($t=>{if($t instanceof So){const ee=$t.getBounds(),Ht=1e-8;Math.abs(ee.getNorth()-vt.getNorth())<Ht&&Math.abs(ee.getSouth()-vt.getSouth())<Ht&&Math.abs(ee.getEast()-vt.getEast())<Ht&&Math.abs(ee.getWest()-vt.getWest())<Ht&&(Y=!0,a.value=$t,console.log("[TextRectangle] Rectangle existant trouv, slection au lieu de cration"))}}),!Y){(G=t.value)==null||G.removeLayer(Ot.layer),(tt=e.value)!=null&&tt.hasLayer(Ot.layer)&&e.value.removeLayer(Ot.layer);const $t=new So(vt,"Double-cliquez pour diter",{color:"#3B82F6",weight:2,fillColor:"#F9FAFB",fillOpacity:.8,textColor:"#000000",fontFamily:"Arial, sans-serif",textAlign:"center",bold:!1,italic:!1});e.value&&(e.value.addLayer($t),a.value=$t,$t.updateProperties(),Bt($t),console.log("[TextRectangle] Nouveau rectangle cr avec succs",{bounds:$t.getBounds(),properties:$t.properties,style:$t.properties.style}))}(yt=t.value)==null||yt.pm.disableDraw()}});break;case"ElevationLine":ms("Cliquez et maintenez pour tracer le profil altimtrique"),(D=t.value)==null||D.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(q=t.value)==null||q.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup"}),(dt=t.value)==null||dt.off("pm:create"),(ct=t.value)==null||ct.on("pm:create",async Ot=>{var G,tt,yt;if(Ot.shape==="Line"&&Ot.layer){const vt=Ot.layer.getLatLngs();(G=t.value)==null||G.removeLayer(Ot.layer),(tt=e.value)!=null&&tt.hasLayer(Ot.layer)&&e.value.removeLayer(Ot.layer);const Y=new Sl(vt,{color:"#FF4500",weight:4,opacity:.8});e.value&&(e.value.addLayer(Y),a.value=Y,await Y.updateElevationProfile(),zt(Y)),(yt=t.value)==null||yt.pm.disableDraw(),o.value=""}});break}}catch(At){console.error("Error enabling tool:",At)}},100)}},X=A=>{var V;if(!a.value)return;const H=a.value;if(H.properties=H.properties||{},H.properties.style=H.properties.style||{},H.properties.style={...H.properties.style,...A},H.properties.type==="text"){const z=H.properties._textLayer,mt=(V=z==null?void 0:z.getElement())==null?void 0:V.querySelector(".text-annotation");mt&&Q0(mt,H.properties.style);const ft={color:A.borderColor||H.properties.style.borderColor,weight:parseInt(A.borderWidth||H.properties.style.borderWidth),opacity:A.borderOpacity??H.properties.style.borderOpacity};"setStyle"in H&&H.setStyle(ft)}else if(H.properties.type==="TextRectangle"){if(H instanceof So){const z={};A.textColor!==void 0&&(z.textColor=A.textColor),A.fontSize!==void 0&&(z.fontSize=A.fontSize),A.fontFamily!==void 0&&(z.fontFamily=A.fontFamily),A.backgroundColor!==void 0&&(z.backgroundColor=A.backgroundColor),A.backgroundOpacity!==void 0&&(z.backgroundOpacity=A.backgroundOpacity),A.textAlign!==void 0&&(z.textAlign=A.textAlign),A.bold!==void 0&&(z.bold=A.bold),A.italic!==void 0&&(z.italic=A.italic),A.fillColor&&(z.fillColor=A.fillColor),A.fillOpacity!==void 0&&(z.fillOpacity=A.fillOpacity),A.strokeColor&&(z.color=A.strokeColor),A.color&&(z.color=A.color),A.strokeOpacity!==void 0&&(z.opacity=A.strokeOpacity),A.strokeWidth!==void 0&&(z.weight=A.strokeWidth),A.weight!==void 0&&(z.weight=A.weight),A.dashArray&&(z.dashArray=A.dashArray),H.setTextStyle(z)}}else{const z={};A.fillColor&&(z.fillColor=A.fillColor),A.fillOpacity!==void 0&&(z.fillOpacity=A.fillOpacity),A.strokeColor&&(z.color=A.strokeColor),A.strokeOpacity!==void 0&&(z.opacity=A.strokeOpacity),A.strokeWidth!==void 0&&(z.weight=A.strokeWidth),A.dashArray&&(z.dashArray=A.dashArray),"setStyle"in H&&H.setStyle(z)}},St=A=>{if(!a.value)return;const H=a.value;H.properties={...H.properties,...A},A.radius&&H instanceof Kt.Circle&&H.setRadius(A.radius)},Mt=A=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:A.properties,selectedShapeRef:a.value}),a.value=null,Vi(()=>{a.value=A,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:a.value,properties:a.value.properties})})},Nt=(A,H)=>{console.log("[updateLayerProperties] Dbut",{layer:A,shapeType:H,currentProperties:A.properties}),rL((z,mt)=>{const ft=R(z,mt);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:ft}),z.properties={...ft},Mt(z),z.fire("properties:updated",{shape:z,properties:z.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:z.properties,selectedShape:a.value})},100)(A,H)},Lt=(A,H)=>Kt.latLng((A.lat+H.lat)/2,(A.lng+H.lng)/2),gt=A=>{if(!t.value||!e.value)return;S();const H=A.getLatLng(),V=A.getRadius(),z=x(H,"#059669");w.push(z),b(z,A,()=>[cn(V,"m","Rayon"),cn(V*2,"m","Diamtre"),cn(Math.PI*Math.pow(V,2),"m","Surface")].join("<br>"));const mt=[],ft=[0,45,90,135,180,225,270,315];ft.forEach(ht=>{const I=A.calculatePointOnCircle(ht),it=x(I,"#2563EB");mt.push(it),w.push(it),b(it,A,()=>cn(V,"m","Rayon")),it.on("mousedown",rt=>{if(!t.value)return;Kt.DomEvent.stopPropagation(rt),t.value.dragging.disable();let $=!0;const D=dt=>{$&&(A.resizeFromControlPoint(dt.latlng),mt.forEach((ct,At)=>{const Ot=A.calculatePointOnCircle(ft[At]);ct.setLatLng(Ot)}),z.setLatLng(A.getLatLng()),it.measureDiv&&(it.measureDiv.innerHTML=cn(A.getRadius(),"m","Rayon")))},q=()=>{$=!1,t.value&&(t.value.off("mousemove",D),document.removeEventListener("mouseup",q),t.value.dragging.enable(),A.updateProperties(),a.value=null,Vi(()=>{a.value=A}),Nt(A,"Circle"))};t.value.on("mousemove",D),document.addEventListener("mouseup",q)})}),z.on("mousedown",ht=>{if(!t.value)return;Kt.DomEvent.stopPropagation(ht),t.value.dragging.disable();let I=!0;const it=A.getLatLng(),rt=ht.latlng,$=q=>{if(!I)return;const dt=q.latlng.lng-rt.lng,ct=q.latlng.lat-rt.lat,At=Kt.latLng(it.lat+ct,it.lng+dt);Kt.Circle.prototype.setLatLng.call(A,At),z.setLatLng(At),mt.forEach((Ot,G)=>{const tt=A.calculatePointOnCircle(ft[G]);Ot.setLatLng(tt)}),z.measureDiv&&(z.measureDiv.innerHTML=[cn(A.getRadius(),"m","Rayon"),cn(A.getRadius()*2,"m","Diamtre"),cn(Math.PI*Math.pow(A.getRadius(),2),"m","Surface")].join("<br>"))},D=()=>{I=!1,t.value&&(t.value.off("mousemove",$),document.removeEventListener("mouseup",D),t.value.dragging.enable(),A.updateProperties(),a.value=null,Vi(()=>{a.value=A}),Nt(A,"Circle"))};t.value.on("mousemove",$),document.addEventListener("mouseup",D)}),A.on("circle:resized",()=>{Nt(A,"Circle")}),a.value=A},_t=A=>{if(!t.value||!e.value)return;if(!(A instanceof ba)){console.warn("La couche n'est pas une instance de Rectangle");return}const H=A;S();const V=H.getBounds(),z=V.getCenter(),mt=[V.getNorthWest(),V.getNorthEast(),V.getSouthEast(),V.getSouthWest()],ft=x(z,"#059669");w.push(ft),b(ft,H,()=>{const{width:rt,height:$}=H.getDimensions(),D=rt*$;return[cn(rt,"m","Largeur"),cn($,"m","Hauteur"),cn(D,"m","Surface")].join("<br>")});const ht=[];mt.forEach((rt,$)=>{const D=x(rt,"#DC2626");ht.push(D),w.push(D),b(D,H,()=>{const{width:q,height:dt}=H.getDimensions();return[cn(q,"m","Largeur"),cn(dt,"m","Hauteur")].join("<br>")}),D.on("mousedown",q=>{if(!t.value)return;Kt.DomEvent.stopPropagation(q),t.value.dragging.disable();const dt=At=>{H.resizeFromCorner($,At.latlng);const Ot=H.getBounds(),G=[Ot.getNorthWest(),Ot.getNorthEast(),Ot.getSouthEast(),Ot.getSouthWest()];D.setLatLng(At.latlng),ft.setLatLng(Ot.getCenter()),ht.forEach((yt,vt)=>{vt!==$&&yt.setLatLng(G[vt])});const tt=H.getMidPoints();I.forEach((yt,vt)=>{yt.setLatLng(tt[vt]);const{width:Y,height:$t}=H.getDimensions(),ee=vt%2===0?Y:$t;yt.measureDiv&&(yt.measureDiv.innerHTML=[cn(ee,"m","Longueur du ct"),cn(ee/2,"m","Distance au coin")].join("<br>"))})},ct=()=>{t.value&&(t.value.off("mousemove",dt),document.removeEventListener("mouseup",ct),t.value.dragging.enable(),H.updateProperties(),a.value=null,Vi(()=>{a.value=H}))};t.value.on("mousemove",dt),document.addEventListener("mouseup",ct)})});const I=[];H.getMidPoints().forEach((rt,$)=>{const D=x(rt,"#2563EB");I.push(D),w.push(D),b(D,H,()=>{const{width:q,height:dt}=H.getDimensions(),ct=$%2===0?q:dt;return[cn(ct,"m","Longueur du ct"),cn(ct/2,"m","Distance au coin")].join("<br>")}),D.on("mousedown",q=>{Kt.DomEvent.stopPropagation(q),t.value.dragging.disable();const dt=At=>{const Ot=t.value.mouseEventToLatLng(At.originalEvent),G=H.getBounds(),tt=G.getNorthWest(),yt=G.getSouthEast();let vt;if($%2===0){const Ht=(tt.lng+yt.lng)/2;vt=Kt.latLng(Ot.lat,Ht)}else{const Ht=(tt.lat+yt.lat)/2;vt=Kt.latLng(Ht,Ot.lng)}H.resizeFromSide($,vt);const Y=H.getBounds(),$t=[Y.getNorthWest(),Y.getNorthEast(),Y.getSouthEast(),Y.getSouthWest()];ft.setLatLng(Y.getCenter()),ht.forEach((Ht,Rt)=>{Ht.setLatLng($t[Rt])});const ee=H.getMidPoints();I.forEach((Ht,Rt)=>{Ht.setLatLng(ee[Rt]);const{width:wt,height:oe}=H.getDimensions(),ne=Rt%2===0?wt:oe;Ht.measureDiv&&(Ht.measureDiv.innerHTML=[cn(ne,"m","Longueur du ct"),cn(ne/2,"m","Distance au coin")].join("<br>"))})},ct=()=>{t.value.dragging.enable(),t.value.off("mousemove",dt),document.removeEventListener("mouseup",ct),H.updateProperties(),a.value=null,Vi(()=>{a.value=H})};t.value.on("mousemove",dt),document.addEventListener("mouseup",ct)})}),ft.on("mousedown",rt=>{if(!t.value)return;Kt.DomEvent.stopPropagation(rt),t.value.dragging.disable();let $=!0;const D=dt=>{if(!$)return;H.moveFromCenter(dt.latlng),ft.setLatLng(dt.latlng);const ct=H.getBounds(),At=[ct.getNorthWest(),ct.getNorthEast(),ct.getSouthEast(),ct.getSouthWest()];ht.forEach((G,tt)=>{G.setLatLng(At[tt])});const Ot=H.getMidPoints();if(I.forEach((G,tt)=>{G.setLatLng(Ot[tt])}),ft.measureDiv){const{width:G,height:tt}=H.getDimensions(),yt=G*tt;ft.measureDiv.innerHTML=[cn(G,"m","Largeur"),cn(tt,"m","Hauteur"),cn(yt,"m","Surface")].join("<br>")}},q=()=>{$=!1,t.value&&(t.value.off("mousemove",D),document.removeEventListener("mouseup",q),t.value.dragging.enable(),H.updateProperties(),a.value=null,Vi(()=>{a.value=H}))};t.value.on("mousemove",D),document.addEventListener("mouseup",q)})},zt=A=>{if(!t.value||!e.value)return;S();const H=A.getLatLngs();let V=null;if(A instanceof $i){const ft=A.getCenter();V=x(ft,"#059669"),w.push(V),b(V,A,()=>{const ht=A.getLength()||0;return cn(ht,"m","Longueur totale")}),V.on("mousedown",ht=>{if(!t.value)return;Kt.DomEvent.stopPropagation(ht),t.value.dragging.disable();let I=!0;const it=ht.latlng,rt=[...A.getLatLngs()];w.forEach((q,dt)=>{dt>0&&q.setStyle({opacity:0,fillOpacity:0})});const $=q=>{if(!I)return;const dt=q.latlng.lng-it.lng,ct=q.latlng.lat-it.lat,At=rt.map(Ot=>Kt.latLng(Ot.lat+ct,Ot.lng+dt));Kt.Polyline.prototype.setLatLngs.call(A,At),V==null||V.setLatLng(q.latlng)},D=()=>{I=!1,t.value&&(t.value.off("mousemove",$),document.removeEventListener("mouseup",D),t.value.dragging.enable(),S(),zt(A),A instanceof $i&&(A.updateProperties(),Nt(A,"Line")),a.value=A)};t.value.on("mousemove",$),document.addEventListener("mouseup",D)})}H.forEach((ft,ht)=>{const I=x(ft,"#DC2626");w.push(I),b(I,A,()=>{let it=0,rt=0;return A instanceof $i?(it=A.getLength()||0,rt=A.getLengthToVertex(ht)):(it=H.reduce(($,D,q)=>q===0?0:$+D.distanceTo(H[q-1]),0),rt=H.slice(0,ht+1).reduce(($,D,q)=>q===0?0:$+D.distanceTo(H[q-1]),0)),[cn(rt,"m","Distance depuis le dbut"),cn(it,"m","Longueur totale")].join("<br>")}),I.on("mousedown",it=>{if(!t.value)return;Kt.DomEvent.stopPropagation(it),t.value.dragging.disable();let rt=!0;V&&(V.setStyle({opacity:0,fillOpacity:0}),V.measureDiv&&(V.measureDiv.style.display="none"));const $=[];ht>0&&$.push(ht-1),ht<H.length-1&&$.push(ht);const D=$.map(ct=>H.length+ct),q=ct=>{rt&&(A instanceof $i?A.moveVertex(ht,ct.latlng,!1):(H[ht]=ct.latlng,A.setLatLngs(H)),I.setLatLng(ct.latlng),mt($,D))},dt=()=>{if(rt=!1,!!t.value){if(t.value.off("mousemove",q),document.removeEventListener("mouseup",dt),t.value.dragging.enable(),A instanceof $i&&(A.updateProperties(),Nt(A,"Line")),V&&A instanceof $i){const ct=A.getCenter();V.setLatLng(ct),V.setStyle({opacity:1,fillOpacity:1}),V.measureDiv&&(V.measureDiv.style.display="")}a.value=null,Vi(()=>{a.value=A})}};t.value.on("mousemove",q),document.addEventListener("mouseup",dt)})});const z=()=>{const ft=A.getLatLngs(),ht=A instanceof $i?ft.length+1:ft.length;w.slice(ht).forEach(it=>{var rt;it&&typeof it.remove=="function"&&((rt=n.value)==null||rt.removeLayer(it))}),w=w.slice(0,ht),(A instanceof $i?A.getMidPoints():Array.from({length:ft.length-1},(it,rt)=>{const $=ft[rt],D=ft[rt+1];return Kt.latLng(($.lat+D.lat)/2,($.lng+D.lng)/2)})).forEach((it,rt)=>{const $=x(it,"#2563EB");w.push($),b($,A,()=>{let D=0,q=0,dt=0;if(A instanceof $i)D=A.getSegmentLengthAt(rt),q=A.getLength()||0,dt=A.getLengthToVertex(rt)+D/2;else{const ct=ft[rt],At=ft[rt+1];D=ct.distanceTo(At),q=ft.reduce((Ot,G,tt)=>tt===0?0:Ot+G.distanceTo(ft[tt-1]),0),dt=ft.slice(0,rt+1).reduce((Ot,G,tt)=>tt===0?0:Ot+G.distanceTo(ft[tt-1]),0)+D/2}return[cn(D,"m","Longueur du segment"),cn(D/2,"m","Demi-segment"),cn(dt,"m","Distance depuis le dbut"),cn(q,"m","Longueur totale")].join("<br>")}),$.on("mousedown",D=>{if(!t.value)return;Kt.DomEvent.stopPropagation(D),t.value.dragging.disable();let q=!0;const dt=rt,ct=A.getLatLngs(),At=w.find(tt=>tt.options&&tt.options.color==="#059669");At&&(At.setStyle({opacity:0,fillOpacity:0}),At.measureDiv&&(At.measureDiv.style.display="none"));const Ot=tt=>{if(q){if(A instanceof $i)A.addVertex(dt,tt.latlng,!1);else{const yt=ct.slice();yt.splice(dt+1,0,tt.latlng),A.setLatLngs(yt)}S(),zt(A),G()}},G=()=>{q=!1,t.value&&(t.value.off("mousemove",Ot),document.removeEventListener("mouseup",G),t.value.dragging.enable(),A instanceof $i&&(A.updateProperties(),Nt(A,"Line")),a.value=null,Vi(()=>{a.value=A}))};t.value.on("mousemove",Ot),document.addEventListener("mouseup",G)})})},mt=(ft,ht)=>{const I=A.getLatLngs();ft.forEach((it,rt)=>{if(it<0||it>=I.length-1)return;const $=ht[rt];if($>=0&&$<w.length){let D;if(A instanceof $i){const dt=A.getMidPointAt(it);if(!dt)return;D=dt}else{const dt=I[it],ct=I[it+1];D=Kt.latLng((dt.lat+ct.lat)/2,(dt.lng+ct.lng)/2)}const q=w[$];if(q&&q.setLatLng){q.setLatLng(D);const dt=q;if(dt.measureDiv){let ct=0,At=0,Ot=0;if(A instanceof $i)ct=A.getSegmentLengthAt(it),At=A.getLength()||0,Ot=A.getLengthToVertex(it)+ct/2;else{const G=I[it],tt=I[it+1];ct=G.distanceTo(tt),At=0,Ot=0;for(let yt=0;yt<I.length-1;yt++){const vt=I[yt].distanceTo(I[yt+1]);At+=vt,yt<it?Ot+=vt:yt===it&&(Ot+=vt/2)}}dt.measureDiv.innerHTML=[cn(ct,"m","Longueur du segment"),cn(ct/2,"m","Demi-segment"),cn(Ot,"m","Distance depuis le dbut"),cn(At,"m","Longueur totale")].join("<br>")}}}})};z(),A instanceof Sl&&(A.updateElevationProfile().then(()=>{console.log("[useMapDrawing] ElevationLine properties updated:",{length:A.properties.length,elevationData:A.getElevationData()})}),w.forEach((ft,ht)=>{const I=A.getElevationData();I[ht]&&(b(ft,A,()=>{const it=I[ht];return[cn(it.distance,"m","Distance"),cn(it.elevation,"m","Altitude"),cn(A.properties.elevationGain,"m","Dnivel +"),cn(A.properties.elevationLoss,"m","Dnivel -")].join("<br>")}),ft.on("mousedown",it=>{if(!t.value)return;Kt.DomEvent.stopPropagation(it),t.value.dragging.disable();const rt=D=>{A.moveVertex(ht,D.latlng,!1),ft.setLatLng(D.latlng)},$=()=>{t.value&&(t.value.off("mousemove",rt),document.removeEventListener("mouseup",$),t.value.dragging.enable(),A instanceof Sl&&(A.updateElevationProfile(),a.value=null,Vi(()=>{a.value=A})))};t.value.on("mousemove",rt),document.addEventListener("mouseup",$)}))}),A.on("elevation:updated",()=>{w.forEach((ft,ht)=>{const I=A.getElevationData();if(I[ht]&&ft.measureDiv){const it=I[ht];ft.measureDiv.innerHTML=[cn(it.distance,"m","Distance"),cn(it.elevation,"m","Altitude"),cn(A.properties.elevationGain,"m","Dnivel +"),cn(A.properties.elevationLoss,"m","Dnivel -")].join("<br>")}})}),t.value&&t.value.pm.setGlobalOptions({preventMarkerRemoval:!0,preventVertexEdit:!0}))},J=A=>{if(!t.value||!e.value)return;S();const H=A.getLatLngs()[0],V=H.map(rt=>[rt.lng,rt.lat]);V.push(V[0]);const z=kl([V]),mt=Su(z),ft=H.reduce((rt,$,D)=>{const q=H[(D+1)%H.length];return rt+$.distanceTo(q)},0);let ht;if(typeof A.getCenter=="function")try{ht=A.getCenter()}catch(rt){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",rt);const $=_c(z);ht=Kt.latLng($.geometry.coordinates[1],$.geometry.coordinates[0])}else{const rt=_c(z);ht=Kt.latLng(rt.geometry.coordinates[1],rt.geometry.coordinates[0])}const I=x(ht,"#059669");w.push(I),b(I,A,()=>[cn(ft,"m","Primtre"),cn(mt,"m","Surface")].join("<br>")),I.on("mousedown",rt=>{if(!t.value)return;Kt.DomEvent.stopPropagation(rt),t.value.dragging.disable();let $=!0;const D=rt.latlng,q=[...H];w.forEach((Ot,G)=>{G>0&&Ot.setStyle({opacity:0,fillOpacity:0})});const dt=wu(Ot=>{if(!$)return;const G=Ot.latlng.lng-D.lng,tt=Ot.latlng.lat-D.lat,yt=q.map(vt=>Kt.latLng(vt.lat+tt,vt.lng+G));Kt.Polygon.prototype.setLatLngs.call(A,[yt]),I.setLatLng(Ot.latlng)},16),ct=Ot=>{$&&dt(Ot)},At=()=>{if($=!1,!!t.value){if(t.value.off("mousemove",ct),document.removeEventListener("mouseup",At),t.value.dragging.enable(),A.properties){const Ot=A.getLatLngs()[0],G=Ot.map(yt=>[yt.lng,yt.lat]);G.push(G[0]);const tt=kl([G]);A.properties.area=Su(tt),A.properties.perimeter=Ot.reduce((yt,vt,Y)=>{const $t=Ot[(Y+1)%Ot.length];return yt+vt.distanceTo($t)},0),A.properties.surfaceInterieure=A.properties.area,A.properties.surfaceExterieure=A.properties.area}S(),J(A),a.value=null,Vi(()=>{a.value=A})}};t.value.on("mousemove",ct),document.addEventListener("mouseup",At)}),H.forEach((rt,$)=>{const D=x(rt,"#DC2626");w.push(D),b(D,A,()=>{const q=H[($-1+H.length)%H.length],dt=H[($+1)%H.length],ct=rt.distanceTo(q),At=rt.distanceTo(dt);return[cn(ct,"m","Distance au point prcdent"),cn(At,"m","Distance au point suivant"),cn(ft,"m","Primtre total"),cn(mt,"m","Surface")].join("<br>")}),D.on("mousedown",q=>{if(Kt.DomEvent.stopPropagation(q),!t.value)return;t.value.dragging.disable();let dt=!0;I&&(I.setStyle({opacity:0,fillOpacity:0}),I.measureDiv&&(I.measureDiv.style.display="none"));const ct=wu(G=>{if(!dt)return;H[$]=G.latlng,Kt.Polygon.prototype.setLatLngs.call(A,[H]),D.setLatLng(G.latlng);const tt=w.slice(H.length+1),yt=($-1+H.length)%H.length,vt=tt[yt];if(vt){const $t=H[yt],ee=H[$],Ht=Kt.latLng(($t.lat+ee.lat)/2,($t.lng+ee.lng)/2);vt.setLatLng(Ht)}const Y=tt[$];if(Y){const $t=H[$],ee=H[($+1)%H.length],Ht=Kt.latLng(($t.lat+ee.lat)/2,($t.lng+ee.lng)/2);Y.setLatLng(Ht)}},16),At=G=>{dt&&ct(G)},Ot=()=>{if(dt=!1,!!t.value){if(t.value.off("mousemove",At),document.removeEventListener("mouseup",Ot),t.value.dragging.enable(),A.properties){const G=A.getLatLngs()[0].map(yt=>[yt.lng,yt.lat]);G.push(G[0]);const tt=kl([G]);A.properties.area=Su(tt),A.properties.perimeter=H.reduce((yt,vt,Y)=>{const $t=H[(Y+1)%H.length];return yt+vt.distanceTo($t)},0),A.properties.surfaceInterieure=A.properties.area,A.properties.surfaceExterieure=A.properties.area}S(),J(A),a.value=null,Vi(()=>{a.value=A})}};t.value.on("mousemove",At),document.addEventListener("mouseup",Ot)})}),(()=>{const rt=A.getLatLngs()[0];w.slice(rt.length+1).forEach(D=>{n.value&&n.value.removeLayer(D)}),w=w.slice(0,rt.length+1);const $=new Array(rt.length);for(let D=0;D<rt.length;D++){const q=rt[D],dt=rt[(D+1)%rt.length];$[D]=Lt(q,dt)}$.forEach((D,q)=>{const dt=x(D,"#2563EB");w.push(dt),b(dt,A,()=>{const ct=rt[q],At=rt[(q+1)%rt.length],Ot=ct.distanceTo(At);return[cn(Ot,"m","Longueur du segment"),cn(ft,"m","Primtre total"),cn(mt,"m","Surface")].join("<br>")}),dt.on("mousedown",ct=>{if(!t.value)return;Kt.DomEvent.stopPropagation(ct),t.value.dragging.disable();let At=!0;const Ot=q;I&&(I.setStyle({opacity:0,fillOpacity:0}),I.measureDiv&&(I.measureDiv.style.display="none"));const G=[...A.getLatLngs()[0]];G.splice((Ot+1)%G.length,0,D),A.setLatLngs([G]),S(),J(A);const tt=Ot+1,yt=1+tt,vt=tt<w.length-1?w[yt]:null;if(vt){const Y=ee=>{if(!At)return;const Ht=A.getLatLngs()[0];Ht[tt]=ee.latlng,A.setLatLngs([Ht]),vt.setLatLng(ee.latlng);const Rt=w.slice(1+Ht.length),wt=(tt-1+Ht.length)%Ht.length,oe=tt;if(Rt[wt]){const ne=Ht[wt],xe=Ht[tt],Ut=Kt.latLng((ne.lat+xe.lat)/2,(ne.lng+xe.lng)/2);Rt[wt].setLatLng(Ut)}if(Rt[oe]){const ne=Ht[tt],xe=Ht[(tt+1)%Ht.length],Ut=Kt.latLng((ne.lat+xe.lat)/2,(ne.lng+xe.lng)/2);Rt[oe].setLatLng(Ut)}},$t=()=>{if(At=!1,!!t.value){if(t.value.off("mousemove",Y),document.removeEventListener("mouseup",$t),t.value.dragging.enable(),A.properties){const ee=A.getLatLngs()[0].map(Rt=>[Rt.lng,Rt.lat]);ee.push(ee[0]);const Ht=kl([ee]);A.properties.area=Su(Ht),A.properties.perimeter=A.getLatLngs()[0].reduce((Rt,wt,oe,ne)=>{const xe=ne[(oe+1)%ne.length];return Rt+wt.distanceTo(xe)},0)}S(),J(A),a.value=null,Vi(()=>{a.value=A})}};t.value.on("mousemove",Y),document.addEventListener("mouseup",$t)}else t.value.dragging.enable(),S(),J(A)})})})()},Z=A=>{if(!t.value||!e.value)return;S();const H=A.getCenter(),V=A.getStartAngle(),z=A.getStopAngle(),mt=A.getOpeningAngle(),ft=A.calculatePointOnArc(V),ht=A.calculatePointOnArc(z),I=x(ft,"#DC2626"),it=x(ht,"#DC2626");w.push(I,it);const rt=x(H,"#059669");w.push(rt);let $=null;if(mt>5){const D=A.calculateMidpointPosition();$=x(D,"#2563EB"),w.push($),$.on("mousedown",q=>{if(!t.value)return;Kt.DomEvent.stopPropagation(q),t.value.dragging.disable();let dt=!0;const ct=Ot=>{if(!dt)return;const G=H.distanceTo(Ot.latlng);A.setRadius(G);const tt=A.calculatePointOnArc(V),yt=A.calculatePointOnArc(z),vt=A.calculateMidpointPosition();I.setLatLng(tt),it.setLatLng(yt),$==null||$.setLatLng(vt),A.updateProperties(),a.value=A},At=()=>{dt=!1,t.value&&(t.value.off("mousemove",ct),document.removeEventListener("mouseup",At),t.value.dragging.enable(),A.updateProperties(),a.value=null,Vi(()=>{a.value=A}),Nt(A,"Semicircle"))};t.value.on("mousemove",ct),document.addEventListener("mouseup",At)})}[I,it].forEach((D,q)=>{D.on("mousedown",dt=>{if(!t.value)return;Kt.DomEvent.stopPropagation(dt),t.value.dragging.disable();let ct=!0;const At=G=>{if(!ct||!t.value)return;const tt=G.latlng.lng-H.lng,yt=G.latlng.lat-H.lat;let vt=(Math.atan2(yt,tt)*180/Math.PI+360)%360;q===0?A.setAngles(vt,A.getStopAngle()):A.setAngles(A.getStartAngle(),vt);const Y=A.getStartAngle(),$t=A.getStopAngle(),ee=A.getOpeningAngle(),Ht=A.calculatePointOnArc(Y),Rt=A.calculatePointOnArc($t);if(I.setLatLng(Ht),it.setLatLng(Rt),$&&ee>5){const wt=A.calculateMidpointPosition();$.setLatLng(wt),$.setStyle({opacity:1,fillOpacity:1})}else $&&$.setStyle({opacity:0,fillOpacity:0});A.updateProperties(),a.value=A},Ot=()=>{ct=!1,t.value&&(t.value.off("mousemove",At),document.removeEventListener("mouseup",Ot),t.value.dragging.enable(),A.updateProperties(),a.value=null,Vi(()=>{a.value=A}),Nt(A,"Semicircle"),Z(A))};t.value.on("mousemove",At),document.addEventListener("mouseup",Ot)})}),rt.on("mousedown",D=>{if(!t.value)return;Kt.DomEvent.stopPropagation(D),t.value.dragging.disable();let q=!0;const dt=At=>{if(!q)return;A.setCenter(At.latlng),rt.setLatLng(At.latlng);const Ot=A.getStartAngle(),G=A.getStopAngle(),tt=A.getOpeningAngle(),yt=A.calculatePointOnArc(Ot),vt=A.calculatePointOnArc(G);if(I.setLatLng(yt),it.setLatLng(vt),$&&tt>5){const Y=A.calculateMidpointPosition();$.setLatLng(Y),$.setStyle({opacity:1,fillOpacity:1})}else $&&$.setStyle({opacity:0,fillOpacity:0});A.updateProperties(),a.value=A},ct=()=>{q=!1,t.value&&(t.value.off("mousemove",dt),document.removeEventListener("mouseup",ct),t.value.dragging.enable(),A.updateProperties(),a.value=null,Vi(()=>{a.value=A}),Nt(A,"Semicircle"))};t.value.on("mousemove",dt),document.addEventListener("mouseup",ct)})},Et=A=>{var H;if(!(!t.value||!i.value)){if(console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:A.constructor.name,properties:A.properties,isPolygon:A instanceof Bu||A instanceof Kt.Polygon}),i.value.clearLayers(),A instanceof So){const V=(H=A.getBounds)==null?void 0:H.call(A).getCenter();if(V){const z=Kt.circleMarker(V,{radius:0,className:"text-hint-marker",pmIgnore:!0});i.value.addLayer(z)}return}try{if(A instanceof Bu||A instanceof Kt.Polygon){let V=[];try{if("getLatLngs"in A){const mt=A.getLatLngs();if(Array.isArray(mt)&&mt.length>0){const ft=mt[0];Array.isArray(ft)?V=ft:ft instanceof Kt.LatLng&&(V=mt)}}}catch(mt){console.error("[generateTempControlPoints] Erreur lors de la rcupration des points du polygone:",mt);return}let z=null;try{if(A instanceof Bu&&typeof A.getCenter=="function")z=A.getCenter();else{const mt=V.map(I=>[I.lng,I.lat]);mt.push(mt[0]);const ft=kl([mt]),ht=_c(ft);z=Kt.latLng(ht.geometry.coordinates[1],ht.geometry.coordinates[0])}if(z&&z.lat!==void 0&&z.lng!==void 0){const mt=x(z,"#059669");i.value.addLayer(mt)}}catch(mt){console.warn("[generateTempControlPoints] Erreur lors du calcul du centre du polygone:",mt)}V.forEach(mt=>{if(mt&&mt.lat!==void 0&&mt.lng!==void 0){const ft=x(mt,"#DC2626");i.value.addLayer(ft)}});for(let mt=0;mt<V.length;mt++){const ft=V[mt],ht=V[(mt+1)%V.length];if(ft&&ht&&ft.lat!==void 0&&ft.lng!==void 0&&ht.lat!==void 0&&ht.lng!==void 0){const I=Kt.latLng((ft.lat+ht.lat)/2,(ft.lng+ht.lng)/2),it=x(I,"#2563EB");i.value.addLayer(it)}}}else A instanceof rc;console.log("[generateTempControlPoints] Points temporaires gnrs",{count:i.value.getLayers().length})}catch(V){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",V)}}},Bt=A=>{if(!t.value||!e.value||!A.getBounds)return;const H=A;S(),H.on("edit:start",()=>{S()}),H.on("edit:end",()=>{Bt(H)});const V=H.getBounds(),z=V.getCenter(),mt=H.properties.rotation||0,ft=q=>{if(mt===0)return q;const dt=mt*Math.PI/180,ct=Math.cos(dt),At=Math.sin(dt),Ot=q.lng-z.lng,G=q.lat-z.lat,tt=Ot*ct-G*At,yt=Ot*At+G*ct;return Kt.latLng(z.lat+yt,z.lng+tt)},ht=[V.getNorthWest(),V.getNorthEast(),V.getSouthEast(),V.getSouthWest()].map(q=>ft(q)),I=H.getMidPoints().map(q=>ft(q)),it=x(z,"#059669");it.addTo(t.value),w.push(it),b(it,H,()=>{const{width:q,height:dt}=H.getDimensions(),ct=q*dt;return[cn(q,"m","Largeur"),cn(dt,"m","Hauteur"),cn(ct,"m","Surface"),`Rotation: ${mt.toFixed(1)}`].join("<br>")});const rt=ht.map((q,dt)=>{const ct=x(q,"#DC2626");return ct.addTo(t.value),w.push(ct),b(ct,H,()=>{const{width:At,height:Ot}=H.getDimensions();return[cn(At,"m","Largeur"),cn(Ot,"m","Hauteur")].join("<br>")}),ct.on("mousedown",At=>{if(!t.value)return;Kt.DomEvent.stopPropagation(At),t.value.dragging.disable();const Ot=(dt+2)%4,G=ht[Ot];H.startResize();const tt=wu(Y=>{const $t=Kt.latLngBounds(G,Y.latlng);H.updateResizePreview($t)},16),yt=Y=>tt(Y),vt=()=>{if(!t.value)return;t.value.off("mousemove",yt),document.removeEventListener("mouseup",vt),t.value.dragging.enable();const Y=Kt.latLngBounds(G,ct.getLatLng());H.endResize(Y),a.value=null,Vi(()=>{a.value=H})};t.value.on("mousemove",yt),document.addEventListener("mouseup",vt)}),ct}),$=I.map((q,dt)=>{const ct=x(q,"#2563EB");return ct.addTo(t.value),w.push(ct),b(ct,H,()=>{const{width:At,height:Ot}=H.getDimensions(),G=dt%2===0?At:Ot;return[cn(G,"m","Longueur du ct"),cn(G/2,"m","Distance au coin"),`Rotation: ${mt.toFixed(1)}`].join("<br>")}),ct.on("mousedown",At=>{if(!t.value)return;Kt.DomEvent.stopPropagation(At),t.value.dragging.disable(),H.startResize();const Ot=wu(yt=>{const vt=H.getBounds();let Y;switch(dt){case 0:Y=Kt.latLngBounds(Kt.latLng(yt.latlng.lat,vt.getWest()),Kt.latLng(vt.getSouth(),vt.getEast()));break;case 1:Y=Kt.latLngBounds(Kt.latLng(vt.getNorth(),vt.getWest()),Kt.latLng(vt.getSouth(),yt.latlng.lng));break;case 2:Y=Kt.latLngBounds(Kt.latLng(vt.getNorth(),vt.getWest()),Kt.latLng(yt.latlng.lat,vt.getEast()));break;case 3:Y=Kt.latLngBounds(Kt.latLng(vt.getNorth(),yt.latlng.lng),Kt.latLng(vt.getSouth(),vt.getEast()));break;default:return}H.updateResizePreview(Y)},16),G=yt=>Ot(yt),tt=()=>{if(!t.value)return;t.value.off("mousemove",G),document.removeEventListener("mouseup",tt),t.value.dragging.enable();const yt=H.getBounds();let vt;switch(dt){case 0:vt=Kt.latLngBounds(Kt.latLng(ct.getLatLng().lat,yt.getWest()),Kt.latLng(yt.getSouth(),yt.getEast()));break;case 1:vt=Kt.latLngBounds(Kt.latLng(yt.getNorth(),yt.getWest()),Kt.latLng(yt.getSouth(),ct.getLatLng().lng));break;case 2:vt=Kt.latLngBounds(Kt.latLng(yt.getNorth(),yt.getWest()),Kt.latLng(ct.getLatLng().lat,yt.getEast()));break;case 3:vt=Kt.latLngBounds(Kt.latLng(yt.getNorth(),ct.getLatLng().lng),Kt.latLng(yt.getSouth(),yt.getEast()));break;default:return}H.endResize(vt),a.value=null,Vi(()=>{a.value=H})};t.value.on("mousemove",G),document.addEventListener("mouseup",tt)}),ct});it.on("mousedown",q=>{if(!t.value)return;Kt.DomEvent.stopPropagation(q),t.value.dragging.disable();const dt=H.getBounds().getCenter(),ct=q.latlng;H.startResize();const At=wu(tt=>{const yt=tt.latlng.lng-ct.lng,vt=tt.latlng.lat-ct.lat,Y=Kt.latLng(dt.lat+vt,dt.lng+yt),$t=H.getBounds(),ee=$t.getEast()-$t.getWest(),Ht=$t.getNorth()-$t.getSouth(),Rt=Kt.latLngBounds(Kt.latLng(Y.lat-Ht/2,Y.lng-ee/2),Kt.latLng(Y.lat+Ht/2,Y.lng+ee/2));H.updateResizePreview(Rt)},16),Ot=tt=>At(tt),G=()=>{if(!t.value)return;t.value.off("mousemove",Ot),document.removeEventListener("mouseup",G),t.value.dragging.enable();const tt=H.getBounds(),yt=tt.getEast()-tt.getWest(),vt=tt.getNorth()-tt.getSouth(),Y=it.getLatLng(),$t=Kt.latLngBounds(Kt.latLng(Y.lat-vt/2,Y.lng-yt/2),Kt.latLng(Y.lat+vt/2,Y.lng+yt/2));H.endResize($t),a.value=null,Vi(()=>{a.value=H})};t.value.on("mousemove",Ot),document.addEventListener("mouseup",G)}),H.on("resize:update",q=>{const dt=q.bounds,ct=dt.getCenter(),At=[dt.getNorthWest(),dt.getNorthEast(),dt.getSouthEast(),dt.getSouthWest()].map(G=>ft(G));rt.forEach((G,tt)=>{G.setLatLng(At[tt])}),it.setLatLng(ct);const Ot=[Kt.latLng((At[0].lat+At[1].lat)/2,(At[0].lng+At[1].lng)/2),Kt.latLng((At[1].lat+At[2].lat)/2,(At[1].lng+At[2].lng)/2),Kt.latLng((At[2].lat+At[3].lat)/2,(At[2].lng+At[3].lng)/2),Kt.latLng((At[3].lat+At[0].lat)/2,(At[3].lng+At[0].lng)/2)].map(G=>ft(G));$.forEach((G,tt)=>{G.setLatLng(Ot[tt])})});const D=()=>{H.off("edit:start"),H.off("edit:end"),H.off("resize:update")};w.cleanup=D};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:i,currentTool:o,selectedShape:a,isDrawing:l,initMap:j,setDrawingTool:W,updateShapeStyle:X,updateShapeProperties:St,updateTextFixedSize:N,adjustView:U,clearActiveControlPoints:S}}function oL(){const t=Ie(null),e=Ie(""),n=Ie("Ville"),i={Ville:Ti.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}),Satellite:Ti.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19}),Cadastre:Ti.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19})};return{map:t,searchQuery:e,currentBaseMap:n,baseMaps:i,initMap:f=>{t.value=f,Ti.control.layers(i).addTo(f),i[n.value].addTo(f)},searchLocation:async()=>{if(!(!t.value||!e.value))try{const p=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e.value)}`)).json();if(p&&p.length>0){const{lat:v,lon:b}=p[0];t.value.setView([v,b],13)}}catch(f){console.error("Erreur lors de la recherche de localisation:",f)}},changeBaseMap:f=>{!t.value||!i[f]||(Object.values(i).forEach(p=>{var v;(v=t.value)!=null&&v.hasLayer(p)&&t.value.removeLayer(p)}),i[f].addTo(t.value),n.value=f)}}}const sp=Qd("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var e,n;const t=xs();this.loading=!0;try{let i="/plans/";t.isDealer?i+="?concessionnaire="+((e=t.user)==null?void 0:e.id):t.isClient&&(i+="?utilisateur="+((n=t.user)==null?void 0:n.id));const o=await kn.get(i);this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1}},async fetchPlansWithDetails(){var e,n;const t=xs();this.loading=!0;try{let i="/plans/";const o={include_details:!0};t.isDealer?o.concessionnaire=(e=t.user)==null?void 0:e.id:t.isClient&&(o.utilisateur=(n=t.user)==null?void 0:n.id);const a=await kn.get(i,{params:o});return this.plans=a.data,a}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1}},async createPlan(t){this.clearCurrentPlan(),this.loading=!0;try{const e=await kn.post("/plans/",t);return this.plans.push(e.data),e.data}catch(e){const n=e instanceof Error?e.message:String(e);throw console.error("Error creating plan:",n),this.error="Erreur lors de la cration du plan",e}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var e,n;if(this.unsavedChanges){this.loading=!0;try{const i=await kn.patch(`/plans/${t}/`,{...this.currentPlan,version:((e=this.currentPlan)==null?void 0:e.version)||1}),o=this.plans.findIndex(a=>a.id===t);return o!==-1&&(this.plans[o]=i.data),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=i.data),this.unsavedChanges=!1,i.data}catch(i){throw this.error="Erreur lors de la sauvegarde du plan",i}finally{this.loading=!1}}},async updatePlanDetails(t,e){var n;try{const i=await kn.patch(`/plans/${t}/`,e),o=this.plans.findIndex(a=>a.id===t);return o!==-1&&(this.plans[o]={...this.plans[o],...i.data}),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan={...this.currentPlan,...i.data}),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),i}},async fetchPlanHistory(t){this.loading=!0;try{const e=await kn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la rcupration de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const i=await kn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=i.data);const o=this.plans.findIndex(a=>a.id===t);return o!==-1&&(this.plans[o]=i.data),i.data}catch(i){throw this.error="Erreur lors de la restauration de la version",i}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var e;this.loading=!0;try{await kn.delete(`/plans/${t}/`),this.plans=this.plans.filter(n=>n.id!==t),((e=this.currentPlan)==null?void 0:e.id)===t&&this.clearCurrentPlan()}catch(n){throw this.error="Erreur lors de la suppression du plan",n}finally{this.loading=!1}}}});function Eu(t){return"content"in t&&"bounds"in t}function Ld(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function Cd(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function aL(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function eg(t){var i,o,a,l,f,p,v,b,w,S,x,R,N,j;console.log("[DrawingStore] Conversion de la forme en lment",{type:(i=t.properties)==null?void 0:i.type,properties:t.properties,bounds:(o=t.getBounds)==null?void 0:o.call(t),shape:t});let e,n;if(t instanceof So||((a=t.properties)==null?void 0:a.type)==="TextRectangle"){e="TEXTE";const U=t.getBounds();return n={bounds:{southWest:[U.getSouthWest().lng,U.getSouthWest().lat],northEast:[U.getNorthEast().lng,U.getNorthEast().lat]},content:t.properties.text||"",style:{...t.properties.style,textStyle:{color:((l=t.properties.style.textStyle)==null?void 0:l.color)||"#000000",fontSize:((f=t.properties.style.textStyle)==null?void 0:f.fontSize)||"14px",fontFamily:((p=t.properties.style.textStyle)==null?void 0:p.fontFamily)||"Arial, sans-serif",textAlign:((v=t.properties.style.textStyle)==null?void 0:v.textAlign)||"center",backgroundColor:((b=t.properties.style.textStyle)==null?void 0:b.backgroundColor)||"#FFFFFF",backgroundOpacity:((w=t.properties.style.textStyle)==null?void 0:w.backgroundOpacity)??1,bold:((S=t.properties.style.textStyle)==null?void 0:S.bold)||!1,italic:((x=t.properties.style.textStyle)==null?void 0:x.italic)||!1}},rotation:t.properties.rotation||0},console.log("[DrawingStore] TextRectangle converti",{type_forme:e,data:n,originalProperties:t.properties}),{type_forme:e,data:n}}switch((R=t.properties)==null?void 0:R.type){case"Polygon":e="POLYGON",n={points:t.getLatLngs()[0].map(Mt=>[Mt.lng,Mt.lat]),style:{color:t.properties.style.color||"#3388ff",weight:t.properties.style.weight||3,opacity:t.properties.style.opacity||1,fillColor:t.properties.style.fillColor||"#3388ff",fillOpacity:t.properties.style.fillOpacity||.2,dashArray:t.properties.style.dashArray||""}};break;case"Semicircle":e="DEMI_CERCLE";const W=t.getCenter?t.getCenter():t.getLatLng();n={center:[W.lng,W.lat],radius:t.getRadius(),startAngle:t.properties.startAngle||0,endAngle:t.properties.stopAngle||180,style:{color:t.properties.style.color||"#3388ff",weight:t.properties.style.weight||3,opacity:t.properties.style.opacity||1,fillColor:t.properties.style.fillColor||"#3388ff",fillOpacity:t.properties.style.fillOpacity||.2,dashArray:t.properties.style.dashArray||""}};break;case"ElevationLine":e="ELEVATIONLINE",n={points:t.getLatLngs().map(Mt=>[Mt.lng,Mt.lat]),style:{color:t.properties.style.color||"#FF4500",weight:t.properties.style.weight||4,opacity:t.properties.style.opacity||.8},elevationData:t.getElevationData(),samplePointStyle:t.properties.samplePointStyle,minMaxPointStyle:t.properties.minMaxPointStyle};break;case"Rectangle":e="RECTANGLE",n={bounds:{southWest:[t.getBounds().getSouthWest().lng,t.getBounds().getSouthWest().lat],northEast:[t.getBounds().getNorthEast().lng,t.getBounds().getNorthEast().lat]},style:((N=t.properties)==null?void 0:N.style)||{}};break;case"Line":e="LIGNE",n={points:t.getLatLngs().map(Mt=>[Mt.lng,Mt.lat]),style:t.properties.style||{}};break;default:console.warn("[DrawingStore] Type de forme non gr:",(j=t.properties)==null?void 0:j.type),e="UNKNOWN",n={}}return console.log("[DrawingStore] lment converti",{type_forme:e,data:n}),{type_forme:e,data:n}}function lL(t){var e,n,i,o,a,l,f,p,v,b,w,S,x,R,N,j,U,W,X,St,Mt,Nt;switch(console.log("[DrawingStore] Conversion de l'lment stock en forme",{element:t}),t.type_forme){case"TEXTE":{if(!Eu(t.data))return console.error("[DrawingStore] Donnes invalides pour TextRectangle"),null;const Lt=t.data;if(!Lt.bounds)return console.error("[DrawingStore] Donnes de bounds manquantes pour TextRectangle"),null;const gt=new Kt.LatLngBounds(Kt.latLng(Lt.bounds.southWest[1],Lt.bounds.southWest[0]),Kt.latLng(Lt.bounds.northEast[1],Lt.bounds.northEast[0])),_t={color:((e=Lt.style)==null?void 0:e.color)||"#3388ff",fillColor:((n=Lt.style)==null?void 0:n.fillColor)||"#3388ff",fillOpacity:((i=Lt.style)==null?void 0:i.fillOpacity)||.2,weight:((o=Lt.style)==null?void 0:o.weight)||3,opacity:((a=Lt.style)==null?void 0:a.opacity)||1,textStyle:{color:((l=Lt.style.textStyle)==null?void 0:l.color)||"#000000",fontSize:((f=Lt.style.textStyle)==null?void 0:f.fontSize)||"14px",fontFamily:((p=Lt.style.textStyle)==null?void 0:p.fontFamily)||"Arial, sans-serif",textAlign:((v=Lt.style.textStyle)==null?void 0:v.textAlign)||"center",backgroundColor:((b=Lt.style.textStyle)==null?void 0:b.backgroundColor)||"#FFFFFF",backgroundOpacity:((w=Lt.style.textStyle)==null?void 0:w.backgroundOpacity)??1,bold:((S=Lt.style.textStyle)==null?void 0:S.bold)||!1,italic:((x=Lt.style.textStyle)==null?void 0:x.italic)||!1}},zt=new So(gt,Lt.content||"Double-cliquez pour diter",_t);return Lt.rotation&&zt.setRotation(Lt.rotation),zt}case"POLYGON":{const Lt=t.data;if(!Ld(Lt))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const gt=Lt.points.map(zt=>Kt.latLng(zt[1],zt[0])),_t=new Bu([gt],{color:((R=Lt.style)==null?void 0:R.color)||"#3388ff",weight:((N=Lt.style)==null?void 0:N.weight)||3,opacity:((j=Lt.style)==null?void 0:j.opacity)||1,fillColor:((U=Lt.style)==null?void 0:U.fillColor)||"#3388ff",fillOpacity:((W=Lt.style)==null?void 0:W.fillOpacity)||.2,dashArray:((X=Lt.style)==null?void 0:X.dashArray)||""});return _t.updateProperties(),_t}case"ELEVATIONLINE":{const Lt=t.data;if(!Cd(Lt))return console.error("[DrawingStore] Donnes invalides pour ElevationLine"),null;const gt=Lt.points.map(zt=>Kt.latLng(zt[1],zt[0])),_t=new Sl(gt,{color:((St=Lt.style)==null?void 0:St.color)||"#FF4500",weight:((Mt=Lt.style)==null?void 0:Mt.weight)||4,opacity:((Nt=Lt.style)==null?void 0:Nt.opacity)||.8});return Lt.samplePointStyle&&_t.setSamplePointStyle(Lt.samplePointStyle),Lt.minMaxPointStyle&&_t.setMinMaxPointStyle(Lt.minMaxPointStyle),_t.updateElevationProfile(),_t}case"LIGNE":{const Lt=t.data;if(!aL(Lt))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const gt=Lt.points.map(zt=>Kt.latLng(zt[1],zt[0])),_t=new $i(gt,Lt.style);return _t.updateProperties(),_t}case"DEMI_CERCLE":{const Lt=t.data;if(!Lt.center||!Lt.radius)return console.error("[DrawingStore] Donnes invalides pour Semicircle"),null;const gt=new Qa(Kt.latLng(Lt.center[1],Lt.center[0]),Lt.radius,Lt.startAngle,Lt.endAngle,Lt.style);gt.properties={type:"Semicircle",radius:Lt.radius,startAngle:Lt.startAngle,stopAngle:Lt.endAngle,style:Lt.style};const _t=Math.PI*Math.pow(Lt.radius,2)*((Lt.endAngle-Lt.startAngle)/360),zt=2*Lt.radius+Math.PI*Lt.radius*((Lt.endAngle-Lt.startAngle)/180),J=Math.PI*Lt.radius*((Lt.endAngle-Lt.startAngle)/180);return gt.properties.area=_t,gt.properties.perimeter=zt,gt.properties.arcLength=J,gt.properties.openingAngle=Lt.endAngle-Lt.startAngle,gt}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",t.type_forme),null}}const F1=Qd("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentPlanId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2}},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var e;if(console.log("[DrawingStore] Ajout d'un lment",{element:t,isLeafletLayer:t instanceof Kt.Layer,hasProperties:!!t.properties,properties:t.properties,type:(e=t.properties)==null?void 0:e.type}),t instanceof Kt.Layer&&t.properties){const n=eg(t);console.log("[DrawingStore] lment converti avant ajout",{original:t,converted:n,type:n.type_forme,data:n.data}),this.elements.push(n)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0,console.log("[DrawingStore] tat aprs ajout",{elements:this.elements,unsavedChanges:this.unsavedChanges})},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){this.currentStyle={...this.currentStyle,...t}},async loadPlanElements(t){this.loading=!0;try{console.log("[DrawingStore] Dbut du chargement du plan",{planId:t});const n=(await kn.get(`/plans/${t}/`)).data;return console.log("[DrawingStore] Donnes du plan reues",{formes:n.formes,preferences:n.preferences}),this.elements=n.formes.map(i=>{if(console.log("[DrawingStore] Traitement de la forme stocke",{id:i.id,type_forme:i.type_forme,data:i.data,isTextRectangle:i.type_forme==="TEXTE"||i.data&&Eu(i.data)}),i.type_forme)return console.log("[DrawingStore] Forme dj au format lment",{type_forme:i.type_forme,data:i.data}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=lL(i);if(o)return console.log("[DrawingStore] Forme convertie avec succs",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),eg(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Charg ${this.elements.length} lments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme,isTextRectangle:i.type_forme==="TEXTE"||Eu(i.data)}))}),this.currentPlanId=t,this.unsavedChanges=!1,n.preferences&&(console.log("[DrawingStore] Chargement des prfrences",n.preferences),n.preferences.currentTool&&this.setCurrentTool(n.preferences.currentTool),n.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...n.preferences.currentStyle}),n.preferences.lastUsedType&&(this.lastUsedType=n.preferences.lastUsedType)),this.elements}catch(e){throw console.error("[DrawingStore] Erreur lors du chargement des lments:",e),this.error="Erreur lors du chargement des lments du plan",e}finally{this.loading=!1}},async saveToPlan(t,e){this.loading=!0;try{const n=t||this.currentPlanId;if(!n)throw new Error("Aucun plan slectionn pour la sauvegarde");console.log("[DrawingStore] tat des lments avant sauvegarde:",{elements:this.elements.map(l=>({id:l.id,type_forme:l.type_forme,data:{hasPoints:"points"in l.data,points:"points"in l.data?l.data.points:null,hasBounds:"bounds"in l.data,bounds:"bounds"in l.data?l.data.bounds:null,hasContent:"content"in l.data,content:"content"in l.data?l.data.content:null,style:l.data.style}}))}),console.log("[DrawingStore] Dbut de la sauvegarde",{planId:n,elementsCount:this.elements.length,elements:this.elements.map(l=>({id:l.id,type_forme:l.type_forme,isTextRectangle:l.type_forme==="TEXTE"||Eu(l.data),isPolygon:l.type_forme==="POLYGON"||Ld(l.data),isElevationLine:l.type_forme==="ELEVATIONLINE"||Cd(l.data)}))});const i=this.elements.map(l=>(console.log("[DrawingStore] Prparation de l'lment pour sauvegarde",{id:l.id,type_forme:l.type_forme,isTextRectangle:l.type_forme==="TEXTE"||Eu(l.data),dataType:l.data?Object.keys(l.data):null,dataContent:l.data}),l.type_forme==="TEXTE"&&Eu(l.data)&&console.log("[DrawingStore] Traitement spcial TextRectangle",{bounds:l.data.bounds,content:l.data.content,style:l.data.style}),l.type_forme==="POLYGON"&&Ld(l.data)&&console.log("[DrawingStore] Traitement spcial Polygon",{points:l.data.points,style:l.data.style}),l.type_forme==="ELEVATIONLINE"&&Cd(l.data)&&console.log("[DrawingStore] Traitement spcial ElevationLine",{points:l.data.points,style:l.data.style,elevationData:l.data.elevationData}),{...l,type_forme:l.type_forme||this.lastUsedType})),o=(e==null?void 0:e.elementsToDelete)||[];console.log("[DrawingStore] Envoi de la sauvegarde",{planId:n,formesCount:i.length,formes:i,elementsToDeleteCount:o.length,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});const a=await kn.post(`/plans/${n}/save_with_elements/`,{formes:i,connexions:[],annotations:[],elementsToDelete:o,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return console.log("[DrawingStore] Rponse de sauvegarde reue",{formes:a.data.formes,status:a.status}),this.elements=a.data.formes.map(l=>(console.log("[DrawingStore] Mise  jour de l'lment aprs sauvegarde",{forme:l,type_forme:l.type_forme}),{...l,type_forme:l.type_forme})),this.unsavedChanges=!1,a.data}catch(n){throw console.error("[DrawingStore] Erreur lors de la sauvegarde:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),uL={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},cL={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},hL={key:0,class:"mb-4"},fL={key:0,class:"animate-pulse"},dL=["value"],pL={key:1,class:"mb-4"},gL={key:0,class:"animate-pulse"},mL=["disabled"],vL={value:null},yL=["value"],_L={class:"mb-4"},bL={class:"mb-6"},wL={class:"flex justify-end space-x-3"},xL=["disabled"],LL={key:0},CL={key:1},j1=Ls({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(t,{expose:e,emit:n}){const i=t,o=n,a=xs(),l=sp(),f=F1();Ie(!1);const p=Ie(!1),v=Ie(null),b=Ie([]),w=Ie([]),S=Ie(null),x=Ie(null),R=Ie(!1),N=Ie(!1),j=Ie({nom:"",description:"",concessionnaire:null,client:null}),U=jn(()=>{var gt,_t;return((gt=a.user)==null?void 0:gt.user_type)==="admin"?j.value.nom.trim()&&j.value.concessionnaire&&j.value.client:((_t=a.user)==null?void 0:_t.user_type)==="dealer"?j.value.nom.trim()&&j.value.client:j.value.nom.trim()});qr(()=>j.value.concessionnaire,async gt=>{if(i.modelValue)if(gt){const _t=b.value.find(zt=>zt.id===gt);_t&&await St(_t)}else w.value=[],S.value=null,x.value=null,j.value.client=null}),qr(()=>i.modelValue,gt=>{var _t,zt;gt?((_t=a.user)==null?void 0:_t.user_type)==="admin"?W():((zt=a.user)==null?void 0:zt.user_type)==="dealer"&&X(a.user.id):(j.value={nom:"",description:"",concessionnaire:null,client:null},S.value=null,x.value=null,w.value=[],b.value=[],v.value=null)}),jn(()=>{var gt;return((gt=a.user)==null?void 0:gt.user_type)==="admin"?S.value?w.value:[]:w.value});async function W(){R.value=!0;try{const gt=await kn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});b.value=gt.data}catch(gt){console.error("[NewPlanModal] Error loading dealers:",gt)}finally{R.value=!1}}async function X(gt){N.value=!0;try{const _t=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:gt}});w.value=Array.isArray(_t.data)?_t.data:[_t.data]}catch(_t){console.error("[NewPlanModal] Error loading clients:",_t),w.value=[]}finally{N.value=!1}}async function St(gt){if(i.modelValue){S.value=gt,j.value.concessionnaire=gt.id,N.value=!0;try{const _t=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:gt.id}});w.value=Array.isArray(_t.data)?_t.data:[_t.data]}catch(_t){console.error("[NewPlanModal] Error loading clients:",_t),w.value=[]}finally{N.value=!1}}}function Mt(gt){i.modelValue&&(x.value=gt,j.value.client=gt.id,o("clientSelected",gt))}function Nt(){o("update:modelValue",!1),j.value={nom:"",description:"",concessionnaire:null,client:null},S.value=null,x.value=null,w.value=[],v.value=null}async function Lt(){var gt,_t,zt,J,Z;v.value=null,p.value=!0;try{const Et={nom:j.value.nom.trim(),description:j.value.description.trim()};((gt=a.user)==null?void 0:gt.user_type)==="admin"?(Et.concessionnaire=j.value.concessionnaire,Et.client=j.value.client):((_t=a.user)==null?void 0:_t.user_type)==="dealer"?(Et.concessionnaire=a.user.id,Et.client=j.value.client):((zt=a.user)==null?void 0:zt.user_type)==="client"&&(Et.client=a.user.id),l.clearCurrentPlan(),f.setCurrentPlan(null);const Bt=await l.createPlan(Et);o("created",Bt.id),Nt()}catch(Et){console.error("[NewPlanModal] Error creating plan:",Et),v.value=((Z=(J=Et.response)==null?void 0:J.data)==null?void 0:Z.detail)||Et.message||"Une erreur est survenue lors de la cration du plan"}finally{p.value=!1}}return e({dealers:b,dealerClients:w,selectedDealer:S,selectedClient:x,loadDealers:W,loadDealerClients:X,selectDealer:St,selectClient:Mt}),(gt,_t)=>{var zt,J;return gt.modelValue?(se(),ce("div",uL,[M("div",cL,[M("div",{class:"flex justify-between items-center mb-4"},[_t[5]||(_t[5]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),M("button",{onClick:Nt,class:"text-gray-400 hover:text-gray-500"},_t[4]||(_t[4]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Rn(a).isAdmin?(se(),ce("div",hL,[_t[8]||(_t[8]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),R.value?(se(),ce("div",fL,_t[6]||(_t[6]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):mn((se(),ce("select",{key:1,"onUpdate:modelValue":_t[0]||(_t[0]=Z=>j.value.concessionnaire=Z),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[_t[7]||(_t[7]=M("option",{value:null},"Slectionnez un concessionnaire",-1)),(se(!0),ce(_n,null,Gn(b.value,Z=>(se(),ce("option",{key:Z.id,value:Z.id},Pe(Z.first_name)+" "+Pe(Z.last_name)+" ("+Pe(Z.company_name)+") ",9,dL))),128))],512)),[[qs,j.value.concessionnaire]])])):en("",!0),((zt=Rn(a).user)==null?void 0:zt.user_type)==="admin"||((J=Rn(a).user)==null?void 0:J.user_type)==="dealer"?(se(),ce("div",pL,[_t[10]||(_t[10]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),N.value?(se(),ce("div",gL,_t[9]||(_t[9]=[M("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):mn((se(),ce("select",{key:1,"onUpdate:modelValue":_t[1]||(_t[1]=Z=>j.value.client=Z),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!w.value.length},[M("option",vL,Pe(w.value.length?"Slectionnez un client":"Aucun client disponible"),1),(se(!0),ce(_n,null,Gn(w.value,Z=>(se(),ce("option",{key:Z.id,value:Z.id},Pe(Z.first_name)+" "+Pe(Z.last_name)+" ("+Pe(Z.company_name)+") ",9,yL))),128))],8,mL)),[[qs,j.value.client]])])):en("",!0),M("div",_L,[_t[11]||(_t[11]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),mn(M("input",{"onUpdate:modelValue":_t[2]||(_t[2]=Z=>j.value.nom=Z),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Hn,j.value.nom]])]),M("div",bL,[_t[12]||(_t[12]=M("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),mn(M("textarea",{"onUpdate:modelValue":_t[3]||(_t[3]=Z=>j.value.description=Z),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Hn,j.value.description]])]),M("div",wL,[M("button",{onClick:Nt,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),M("button",{onClick:Lt,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!U.value||p.value},[p.value?(se(),ce("span",LL,"Cration en cours...")):(se(),ce("span",CL,"Crer le plan"))],8,xL)])])])):en("",!0)}}});function fi(t){"@babel/helpers - typeof";return fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fi(t)}var ls=Uint8Array,ao=Uint16Array,op=Int32Array,lf=new ls([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uf=new ls([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Pd=new ls([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),z1=function(t,e){for(var n=new ao(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var o=new op(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)o[a]=a-n[i]<<5|i;return{b:n,r:o}},U1=z1(lf,2),q1=U1.b,kd=U1.r;q1[28]=258,kd[258]=28;var $1=z1(uf,0),PL=$1.b,ng=$1.r,Sd=new ao(32768);for(var Ei=0;Ei<32768;++Ei){var _l=(Ei&43690)>>1|(Ei&21845)<<1;_l=(_l&52428)>>2|(_l&13107)<<2,_l=(_l&61680)>>4|(_l&3855)<<4,Sd[Ei]=((_l&65280)>>8|(_l&255)<<8)>>1}var ka=function(t,e,n){for(var i=t.length,o=0,a=new ao(e);o<i;++o)t[o]&&++a[t[o]-1];var l=new ao(e);for(o=1;o<e;++o)l[o]=l[o-1]+a[o-1]<<1;var f;if(n){f=new ao(1<<e);var p=15-e;for(o=0;o<i;++o)if(t[o])for(var v=o<<4|t[o],b=e-t[o],w=l[t[o]-1]++<<b,S=w|(1<<b)-1;w<=S;++w)f[Sd[w]>>p]=v}else for(f=new ao(i),o=0;o<i;++o)t[o]&&(f[o]=Sd[l[t[o]-1]++]>>15-t[o]);return f},Dl=new ls(288);for(var Ei=0;Ei<144;++Ei)Dl[Ei]=8;for(var Ei=144;Ei<256;++Ei)Dl[Ei]=9;for(var Ei=256;Ei<280;++Ei)Dl[Ei]=7;for(var Ei=280;Ei<288;++Ei)Dl[Ei]=8;var Dc=new ls(32);for(var Ei=0;Ei<32;++Ei)Dc[Ei]=5;var kL=ka(Dl,9,0),SL=ka(Dl,9,1),EL=ka(Dc,5,0),AL=ka(Dc,5,1),Uf=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Go=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(e&7)&n},qf=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},ap=function(t){return(t+7)/8|0},V1=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ls(t.subarray(e,n))},ML=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Zo=function(t,e,n){var i=new Error(e||ML[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,Zo),!n)throw i;return i},BL=function(t,e,n,i){var o=t.length,a=0;if(!o||e.f&&!e.l)return n||new ls(0);var l=!n,f=l||e.i!=2,p=e.i;l&&(n=new ls(o*3));var v=function(Ot){var G=n.length;if(Ot>G){var tt=new ls(Math.max(G*2,Ot));tt.set(n),n=tt}},b=e.f||0,w=e.p||0,S=e.b||0,x=e.l,R=e.d,N=e.m,j=e.n,U=o*8;do{if(!x){b=Go(t,w,1);var W=Go(t,w+1,3);if(w+=3,W)if(W==1)x=SL,R=AL,N=9,j=5;else if(W==2){var Nt=Go(t,w,31)+257,Lt=Go(t,w+10,15)+4,gt=Nt+Go(t,w+5,31)+1;w+=14;for(var _t=new ls(gt),zt=new ls(19),J=0;J<Lt;++J)zt[Pd[J]]=Go(t,w+J*3,7);w+=Lt*3;for(var Z=Uf(zt),Et=(1<<Z)-1,Bt=ka(zt,Z,1),J=0;J<gt;){var A=Bt[Go(t,w,Et)];w+=A&15;var X=A>>4;if(X<16)_t[J++]=X;else{var H=0,V=0;for(X==16?(V=3+Go(t,w,3),w+=2,H=_t[J-1]):X==17?(V=3+Go(t,w,7),w+=3):X==18&&(V=11+Go(t,w,127),w+=7);V--;)_t[J++]=H}}var z=_t.subarray(0,Nt),mt=_t.subarray(Nt);N=Uf(z),j=Uf(mt),x=ka(z,N,1),R=ka(mt,j,1)}else Zo(1);else{var X=ap(w)+4,St=t[X-4]|t[X-3]<<8,Mt=X+St;if(Mt>o){p&&Zo(0);break}f&&v(S+St),n.set(t.subarray(X,Mt),S),e.b=S+=St,e.p=w=Mt*8,e.f=b;continue}if(w>U){p&&Zo(0);break}}f&&v(S+131072);for(var ft=(1<<N)-1,ht=(1<<j)-1,I=w;;I=w){var H=x[qf(t,w)&ft],it=H>>4;if(w+=H&15,w>U){p&&Zo(0);break}if(H||Zo(2),it<256)n[S++]=it;else if(it==256){I=w,x=null;break}else{var rt=it-254;if(it>264){var J=it-257,$=lf[J];rt=Go(t,w,(1<<$)-1)+q1[J],w+=$}var D=R[qf(t,w)&ht],q=D>>4;D||Zo(3),w+=D&15;var mt=PL[q];if(q>3){var $=uf[q];mt+=qf(t,w)&(1<<$)-1,w+=$}if(w>U){p&&Zo(0);break}f&&v(S+131072);var dt=S+rt;if(S<mt){var ct=a-mt,At=Math.min(mt,dt);for(ct+S<0&&Zo(3);S<At;++S)n[S]=i[ct+S]}for(;S<dt;++S)n[S]=n[S-mt]}}e.l=x,e.p=I,e.b=S,e.f=b,x&&(b=1,e.m=N,e.d=R,e.n=j)}while(!b);return S!=n.length&&l?V1(n,0,S):n.subarray(0,S)},Wa=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8},sc=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},$f=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var o=n.length,a=n.slice();if(!o)return{t:G1,l:0};if(o==1){var l=new ls(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(Mt,Nt){return Mt.f-Nt.f}),n.push({s:-1,f:25001});var f=n[0],p=n[1],v=0,b=1,w=2;for(n[0]={s:-1,f:f.f+p.f,l:f,r:p};b!=o-1;)f=n[n[v].f<n[w].f?v++:w++],p=n[v!=b&&n[v].f<n[w].f?v++:w++],n[b++]={s:-1,f:f.f+p.f,l:f,r:p};for(var S=a[0].s,i=1;i<o;++i)a[i].s>S&&(S=a[i].s);var x=new ao(S+1),R=Ed(n[b-1],x,0);if(R>e){var i=0,N=0,j=R-e,U=1<<j;for(a.sort(function(Nt,Lt){return x[Lt.s]-x[Nt.s]||Nt.f-Lt.f});i<o;++i){var W=a[i].s;if(x[W]>e)N+=U-(1<<R-x[W]),x[W]=e;else break}for(N>>=j;N>0;){var X=a[i].s;x[X]<e?N-=1<<e-x[X]++-1:++i}for(;i>=0&&N;--i){var St=a[i].s;x[St]==e&&(--x[St],++N)}R=e}return{t:new ls(x),l:R}},Ed=function(t,e,n){return t.s==-1?Math.max(Ed(t.l,e,n+1),Ed(t.r,e,n+1)):e[t.s]=n},ig=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ao(++e),i=0,o=t[0],a=1,l=function(p){n[i++]=p},f=1;f<=e;++f)if(t[f]==o&&f!=e)++a;else{if(!o&&a>2){for(;a>138;a-=138)l(32754);a>2&&(l(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(l(o),--a;a>6;a-=6)l(8304);a>2&&(l(a-3<<5|8208),a=0)}for(;a--;)l(o);a=1,o=t[f]}return{c:n.subarray(0,i),n:e}},oc=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},H1=function(t,e,n){var i=n.length,o=ap(e+2);t[o]=i&255,t[o+1]=i>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var a=0;a<i;++a)t[o+a+4]=n[a];return(o+4+i)*8},rg=function(t,e,n,i,o,a,l,f,p,v,b){Wa(e,b++,n),++o[256];for(var w=$f(o,15),S=w.t,x=w.l,R=$f(a,15),N=R.t,j=R.l,U=ig(S),W=U.c,X=U.n,St=ig(N),Mt=St.c,Nt=St.n,Lt=new ao(19),gt=0;gt<W.length;++gt)++Lt[W[gt]&31];for(var gt=0;gt<Mt.length;++gt)++Lt[Mt[gt]&31];for(var _t=$f(Lt,7),zt=_t.t,J=_t.l,Z=19;Z>4&&!zt[Pd[Z-1]];--Z);var Et=v+5<<3,Bt=oc(o,Dl)+oc(a,Dc)+l,A=oc(o,S)+oc(a,N)+l+14+3*Z+oc(Lt,zt)+2*Lt[16]+3*Lt[17]+7*Lt[18];if(p>=0&&Et<=Bt&&Et<=A)return H1(e,b,t.subarray(p,p+v));var H,V,z,mt;if(Wa(e,b,1+(A<Bt)),b+=2,A<Bt){H=ka(S,x,0),V=S,z=ka(N,j,0),mt=N;var ft=ka(zt,J,0);Wa(e,b,X-257),Wa(e,b+5,Nt-1),Wa(e,b+10,Z-4),b+=14;for(var gt=0;gt<Z;++gt)Wa(e,b+3*gt,zt[Pd[gt]]);b+=3*Z;for(var ht=[W,Mt],I=0;I<2;++I)for(var it=ht[I],gt=0;gt<it.length;++gt){var rt=it[gt]&31;Wa(e,b,ft[rt]),b+=zt[rt],rt>15&&(Wa(e,b,it[gt]>>5&127),b+=it[gt]>>12)}}else H=kL,V=Dl,z=EL,mt=Dc;for(var gt=0;gt<f;++gt){var $=i[gt];if($>255){var rt=$>>18&31;sc(e,b,H[rt+257]),b+=V[rt+257],rt>7&&(Wa(e,b,$>>23&31),b+=lf[rt]);var D=$&31;sc(e,b,z[D]),b+=mt[D],D>3&&(sc(e,b,$>>5&8191),b+=uf[D])}else sc(e,b,H[$]),b+=V[$]}return sc(e,b,H[256]),b+V[256]},TL=new op([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),G1=new ls(0),DL=function(t,e,n,i,o,a){var l=a.z||t.length,f=new ls(i+l+5*(1+Math.ceil(l/7e3))+o),p=f.subarray(i,f.length-o),v=a.l,b=(a.r||0)&7;if(e){b&&(p[0]=a.r>>3);for(var w=TL[e-1],S=w>>13,x=w&8191,R=(1<<n)-1,N=a.p||new ao(32768),j=a.h||new ao(R+1),U=Math.ceil(n/3),W=2*U,X=function(yt){return(t[yt]^t[yt+1]<<U^t[yt+2]<<W)&R},St=new op(25e3),Mt=new ao(288),Nt=new ao(32),Lt=0,gt=0,_t=a.i||0,zt=0,J=a.w||0,Z=0;_t+2<l;++_t){var Et=X(_t),Bt=_t&32767,A=j[Et];if(N[Bt]=A,j[Et]=Bt,J<=_t){var H=l-_t;if((Lt>7e3||zt>24576)&&(H>423||!v)){b=rg(t,p,0,St,Mt,Nt,gt,zt,Z,_t-Z,b),zt=Lt=gt=0,Z=_t;for(var V=0;V<286;++V)Mt[V]=0;for(var V=0;V<30;++V)Nt[V]=0}var z=2,mt=0,ft=x,ht=Bt-A&32767;if(H>2&&Et==X(_t-ht))for(var I=Math.min(S,H)-1,it=Math.min(32767,_t),rt=Math.min(258,H);ht<=it&&--ft&&Bt!=A;){if(t[_t+z]==t[_t+z-ht]){for(var $=0;$<rt&&t[_t+$]==t[_t+$-ht];++$);if($>z){if(z=$,mt=ht,$>I)break;for(var D=Math.min(ht,$-2),q=0,V=0;V<D;++V){var dt=_t-ht+V&32767,ct=N[dt],At=dt-ct&32767;At>q&&(q=At,A=dt)}}}Bt=A,A=N[Bt],ht+=Bt-A&32767}if(mt){St[zt++]=268435456|kd[z]<<18|ng[mt];var Ot=kd[z]&31,G=ng[mt]&31;gt+=lf[Ot]+uf[G],++Mt[257+Ot],++Nt[G],J=_t+z,++Lt}else St[zt++]=t[_t],++Mt[t[_t]]}}for(_t=Math.max(_t,J);_t<l;++_t)St[zt++]=t[_t],++Mt[t[_t]];b=rg(t,p,v,St,Mt,Nt,gt,zt,Z,_t-Z,b),v||(a.r=b&7|p[b/8|0]<<3,b-=7,a.h=j,a.p=N,a.i=_t,a.w=J)}else{for(var _t=a.w||0;_t<l+v;_t+=65535){var tt=_t+65535;tt>=l&&(p[b/8|0]=v,tt=l),b=H1(p,b+1,t.subarray(_t,tt))}a.i=l}return V1(f,0,i+ap(b)+o)},W1=function(){var t=1,e=0;return{p:function(n){for(var i=t,o=e,a=n.length|0,l=0;l!=a;){for(var f=Math.min(l+2655,a);l<f;++l)o+=i+=n[l];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}t=i,e=o},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},NL=function(t,e,n,i,o){if(!o&&(o={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),l=new ls(a.length+t.length);l.set(a),l.set(t,a.length),t=l,o.w=a.length}return DL(t,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,i,o)},Z1=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},OL=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var o=W1();o.p(e.dictionary),Z1(t,2,o.d())}},RL=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Zo(6,"invalid zlib data"),(t[1]>>5&1)==1&&Zo(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Ad(t,e){e||(e={});var n=W1();n.p(t);var i=NL(t,e,e.dictionary?6:2,4);return OL(i,e),Z1(i,i.length-4,n.d()),i}function IL(t,e){return BL(t.subarray(RL(t),-4),{i:2},e,e)}var FL=typeof TextDecoder<"u"&&new TextDecoder,jL=0;try{FL.decode(G1,{stream:!0}),jL=1}catch{}var Cn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Vf(){Cn.console&&typeof Cn.console.log=="function"&&Cn.console.log.apply(Cn.console,arguments)}var gi={log:Vf,warn:function(t){Cn.console&&(typeof Cn.console.warn=="function"?Cn.console.warn.apply(Cn.console,arguments):Vf.call(null,arguments))},error:function(t){Cn.console&&(typeof Cn.console.error=="function"?Cn.console.error.apply(Cn.console,arguments):Vf(t))}};function Hf(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){Zl(i.response,e,n)},i.onerror=function(){gi.error("could not download file")},i.send()}function sg(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function nh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var bc,Md,Zl=Cn.saveAs||((typeof window>"u"?"undefined":fi(window))!=="object"||window!==Cn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=Cn.URL||Cn.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?sg(o.href)?Hf(t,e,n):nh(o,o.target="_blank"):nh(o)):(o.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){nh(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(sg(t))Hf(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){nh(i)})}else navigator.msSaveOrOpenBlob(function(o,a){return a===void 0?a={autoBom:!1}:fi(a)!=="object"&&(gi.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return Hf(t,e,n);var o=t.type==="application/octet-stream",a=/constructor/i.test(Cn.HTMLElement)||Cn.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&a)&&(typeof FileReader>"u"?"undefined":fi(FileReader))==="object"){var f=new FileReader;f.onloadend=function(){var b=f.result;b=l?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=b:location=b,i=null},f.readAsDataURL(t)}else{var p=Cn.URL||Cn.webkitURL,v=p.createObjectURL(t);i?i.location=v:location.href=v,i=null,setTimeout(function(){p.revokeObjectURL(v)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function K1(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}],i=0;i<n.length;i++){var o=n[i].re,a=n[i].process,l=o.exec(t);l&&(e=a(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var f=this.r.toString(16),p=this.g.toString(16),v=this.b.toString(16);return f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),v.length==1&&(v="0"+v),"#"+f+p+v}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Gf(t,e){var n=t[0],i=t[1],o=t[2],a=t[3];n=es(n,i,o,a,e[0],7,-680876936),a=es(a,n,i,o,e[1],12,-389564586),o=es(o,a,n,i,e[2],17,606105819),i=es(i,o,a,n,e[3],22,-1044525330),n=es(n,i,o,a,e[4],7,-176418897),a=es(a,n,i,o,e[5],12,1200080426),o=es(o,a,n,i,e[6],17,-1473231341),i=es(i,o,a,n,e[7],22,-45705983),n=es(n,i,o,a,e[8],7,1770035416),a=es(a,n,i,o,e[9],12,-1958414417),o=es(o,a,n,i,e[10],17,-42063),i=es(i,o,a,n,e[11],22,-1990404162),n=es(n,i,o,a,e[12],7,1804603682),a=es(a,n,i,o,e[13],12,-40341101),o=es(o,a,n,i,e[14],17,-1502002290),n=ns(n,i=es(i,o,a,n,e[15],22,1236535329),o,a,e[1],5,-165796510),a=ns(a,n,i,o,e[6],9,-1069501632),o=ns(o,a,n,i,e[11],14,643717713),i=ns(i,o,a,n,e[0],20,-373897302),n=ns(n,i,o,a,e[5],5,-701558691),a=ns(a,n,i,o,e[10],9,38016083),o=ns(o,a,n,i,e[15],14,-660478335),i=ns(i,o,a,n,e[4],20,-405537848),n=ns(n,i,o,a,e[9],5,568446438),a=ns(a,n,i,o,e[14],9,-1019803690),o=ns(o,a,n,i,e[3],14,-187363961),i=ns(i,o,a,n,e[8],20,1163531501),n=ns(n,i,o,a,e[13],5,-1444681467),a=ns(a,n,i,o,e[2],9,-51403784),o=ns(o,a,n,i,e[7],14,1735328473),n=is(n,i=ns(i,o,a,n,e[12],20,-1926607734),o,a,e[5],4,-378558),a=is(a,n,i,o,e[8],11,-2022574463),o=is(o,a,n,i,e[11],16,1839030562),i=is(i,o,a,n,e[14],23,-35309556),n=is(n,i,o,a,e[1],4,-1530992060),a=is(a,n,i,o,e[4],11,1272893353),o=is(o,a,n,i,e[7],16,-155497632),i=is(i,o,a,n,e[10],23,-1094730640),n=is(n,i,o,a,e[13],4,681279174),a=is(a,n,i,o,e[0],11,-358537222),o=is(o,a,n,i,e[3],16,-722521979),i=is(i,o,a,n,e[6],23,76029189),n=is(n,i,o,a,e[9],4,-640364487),a=is(a,n,i,o,e[12],11,-421815835),o=is(o,a,n,i,e[15],16,530742520),n=rs(n,i=is(i,o,a,n,e[2],23,-995338651),o,a,e[0],6,-198630844),a=rs(a,n,i,o,e[7],10,1126891415),o=rs(o,a,n,i,e[14],15,-1416354905),i=rs(i,o,a,n,e[5],21,-57434055),n=rs(n,i,o,a,e[12],6,1700485571),a=rs(a,n,i,o,e[3],10,-1894986606),o=rs(o,a,n,i,e[10],15,-1051523),i=rs(i,o,a,n,e[1],21,-2054922799),n=rs(n,i,o,a,e[8],6,1873313359),a=rs(a,n,i,o,e[15],10,-30611744),o=rs(o,a,n,i,e[6],15,-1560198380),i=rs(i,o,a,n,e[13],21,1309151649),n=rs(n,i,o,a,e[4],6,-145523070),a=rs(a,n,i,o,e[11],10,-1120210379),o=rs(o,a,n,i,e[2],15,718787259),i=rs(i,o,a,n,e[9],21,-343485551),t[0]=El(n,t[0]),t[1]=El(i,t[1]),t[2]=El(o,t[2]),t[3]=El(a,t[3])}function cf(t,e,n,i,o,a){return e=El(El(e,t),El(i,a)),El(e<<o|e>>>32-o,n)}function es(t,e,n,i,o,a,l){return cf(e&n|~e&i,t,e,o,a,l)}function ns(t,e,n,i,o,a,l){return cf(e&i|n&~i,t,e,o,a,l)}function is(t,e,n,i,o,a,l){return cf(e^n^i,t,e,o,a,l)}function rs(t,e,n,i,o,a,l){return cf(n^(e|~i),t,e,o,a,l)}function Y1(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Gf(i,zL(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(Gf(i,o),e=0;e<16;e++)o[e]=0;return o[14]=8*n,Gf(i,o),i}function zL(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}bc=Cn.atob.bind(Cn),Md=Cn.btoa.bind(Cn);var og="0123456789abcdef".split("");function UL(t){for(var e="",n=0;n<4;n++)e+=og[t>>8*n+4&15]+og[t>>8*n&15];return e}function qL(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Bd(t){return Y1(t).map(qL).join("")}var $L=function(t){for(var e=0;e<t.length;e++)t[e]=UL(t[e]);return t.join("")}(Y1("hello"))!="5d41402abc4b2a76b9719d911017c592";function El(t,e){if($L){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Td(t,e){var n,i,o,a;if(t!==n){for(var l=(o=t,a=1+(256/t.length>>0),new Array(a+1).join(o)),f=[],p=0;p<256;p++)f[p]=p;var v=0;for(p=0;p<256;p++){var b=f[p];v=(v+b+l.charCodeAt(p))%256,f[p]=f[v],f[v]=b}n=t,i=f}else f=i;var w=e.length,S=0,x=0,R="";for(p=0;p<w;p++)x=(x+(b=f[S=(S+1)%256]))%256,f[S]=f[x],f[x]=b,l=f[(f[S]+f[x])%256],R+=String.fromCharCode(e.charCodeAt(p)^l);return R}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ag={print:4,modify:8,copy:16,"annot-forms":32};function Au(t,e,n,i){this.v=1,this.r=2;var o=192;t.forEach(function(f){if(ag.perm!==void 0)throw new Error("Invalid permission: "+f);o+=ag[f]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),l=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,l),this.P=-(1+(255^o)),this.encryptionKey=Bd(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=Td(this.encryptionKey,this.padding)}function Mu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var o=t.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[i]}return e}function lg(t){if(fi(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,o){if(o=o||!1,typeof n!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[i,!!o],a},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var a in e[n]){var l=e[n][a];try{l[0].apply(t,i)}catch(f){Cn.console&&gi.error("jsPDF PubSub Error",f.message,f)}l[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Oh(t){if(!(this instanceof Oh))return new Oh(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function J1(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Yl(t,e,n,i,o){if(!(this instanceof Yl))return new Yl(t,e,n,i,o);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,J1.call(this,i,o)}function Tu(t,e,n,i,o){if(!(this instanceof Tu))return new Tu(t,e,n,i,o);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,J1.call(this,i,o)}function wn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],a=arguments[3],l=[],f=1,p=16,v="S",b=null;fi(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,o=t.format||o,a=t.compress||t.compressPdf||a,(b=t.encryption||null)!==null&&(b.userPassword=b.userPassword||"",b.ownerPassword=b.ownerPassword||"",b.userPermissions=b.userPermissions||[]),f=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(p=t.floatPrecision),v=t.defaultPathOperation||"S"),l=t.filters||(a===!0?["FlateEncode"]:l),i=i||"mm",n=(""+(n||"P")).toLowerCase();var w=t.putOnlyUsedFonts||!1,S={},x={internal:{},__private__:{}};x.__private__.PubSub=lg;var R="1.3",N=x.__private__.getPdfVersion=function(){return R};x.__private__.setPdfVersion=function(C){R=C};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return j};var U=x.__private__.getPageFormat=function(C){return j[C]};o=o||"a4";var W={COMPAT:"compat",ADVANCED:"advanced"},X=W.COMPAT;function St(){this.saveGraphicsState(),Y(new Qe(Oe,0,0,-Oe,0,yo()*Oe).toString()+" cm"),this.setFontSize(this.getFontSize()/Oe),v="n",X=W.ADVANCED}function Mt(){this.restoreGraphicsState(),v="S",X=W.COMPAT}var Nt=x.__private__.combineFontStyleAndFontWeight=function(C,et){if(C=="bold"&&et=="normal"||C=="bold"&&et==400||C=="normal"&&et=="italic"||C=="bold"&&et=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return et&&(C=et==400||et==="normal"?C==="italic"?"italic":"normal":et!=700&&et!=="bold"||C!=="normal"?(et==700?"bold":et)+""+C:"bold"),C};x.advancedAPI=function(C){var et=X===W.COMPAT;return et&&St.call(this),typeof C!="function"||(C(this),et&&Mt.call(this)),this},x.compatAPI=function(C){var et=X===W.ADVANCED;return et&&Mt.call(this),typeof C!="function"||(C(this),et&&St.call(this)),this},x.isAdvancedAPI=function(){return X===W.ADVANCED};var Lt,gt=function(C){if(X!==W.ADVANCED)throw new Error(C+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_t=x.roundToPrecision=x.__private__.roundToPrecision=function(C,et){var It=e||et;if(isNaN(C)||isNaN(It))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return C.toFixed(It).replace(/0+$/,"")};Lt=x.hpf=x.__private__.hpf=typeof p=="number"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return _t(C,p)}:p==="smart"?function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return _t(C,C>-1&&C<1?16:5)}:function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.hpf");return _t(C,16)};var zt=x.f2=x.__private__.f2=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f2");return _t(C,2)},J=x.__private__.f3=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.f3");return _t(C,3)},Z=x.scale=x.__private__.scale=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.scale");return X===W.COMPAT?C*Oe:X===W.ADVANCED?C:void 0},Et=function(C){return X===W.COMPAT?yo()-C:X===W.ADVANCED?C:void 0},Bt=function(C){return Z(Et(C))};x.__private__.setPrecision=x.setPrecision=function(C){typeof parseInt(C,10)=="number"&&(e=parseInt(C,10))};var A,H="00000000000000000000000000000000",V=x.__private__.getFileId=function(){return H},z=x.__private__.setFileId=function(C){return H=C!==void 0&&/^[a-fA-F0-9]{32}$/.test(C)?C.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),b!==null&&(Oi=new Au(b.userPermissions,b.userPassword,b.ownerPassword,H)),H};x.setFileId=function(C){return z(C),this},x.getFileId=function(){return V()};var mt=x.__private__.convertDateToPDFDate=function(C){var et=C.getTimezoneOffset(),It=et<0?"+":"-",Wt=Math.floor(Math.abs(et/60)),ue=Math.abs(et%60),be=[It,rt(Wt),"'",rt(ue),"'"].join("");return["D:",C.getFullYear(),rt(C.getMonth()+1),rt(C.getDate()),rt(C.getHours()),rt(C.getMinutes()),rt(C.getSeconds()),be].join("")},ft=x.__private__.convertPDFDateToDate=function(C){var et=parseInt(C.substr(2,4),10),It=parseInt(C.substr(6,2),10)-1,Wt=parseInt(C.substr(8,2),10),ue=parseInt(C.substr(10,2),10),be=parseInt(C.substr(12,2),10),De=parseInt(C.substr(14,2),10);return new Date(et,It,Wt,ue,be,De,0)},ht=x.__private__.setCreationDate=function(C){var et;if(C===void 0&&(C=new Date),C instanceof Date)et=mt(C);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(C))throw new Error("Invalid argument passed to jsPDF.setCreationDate");et=C}return A=et},I=x.__private__.getCreationDate=function(C){var et=A;return C==="jsDate"&&(et=ft(A)),et};x.setCreationDate=function(C){return ht(C),this},x.getCreationDate=function(C){return I(C)};var it,rt=x.__private__.padd2=function(C){return("0"+parseInt(C)).slice(-2)},$=x.__private__.padd2Hex=function(C){return("00"+(C=C.toString())).substr(C.length)},D=0,q=[],dt=[],ct=0,At=[],Ot=[],G=!1,tt=dt,yt=function(){D=0,ct=0,dt=[],q=[],At=[],Cr=$e(),pr=$e()};x.__private__.setCustomOutputDestination=function(C){G=!0,tt=C};var vt=function(C){G||(tt=C)};x.__private__.resetCustomOutputDestination=function(){G=!1,tt=dt};var Y=x.__private__.out=function(C){return C=C.toString(),ct+=C.length+1,tt.push(C),tt},$t=x.__private__.write=function(C){return Y(arguments.length===1?C.toString():Array.prototype.join.call(arguments," "))},ee=x.__private__.getArrayBuffer=function(C){for(var et=C.length,It=new ArrayBuffer(et),Wt=new Uint8Array(It);et--;)Wt[et]=C.charCodeAt(et);return It},Ht=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Ht};var Rt=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(C){return Rt=X===W.ADVANCED?C/Oe:C,this};var wt,oe=x.__private__.getFontSize=x.getFontSize=function(){return X===W.COMPAT?Rt:Rt*Oe},ne=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(C){return ne=C,this},x.__private__.getR2L=x.getR2L=function(){return ne};var xe,Ut=x.__private__.setZoomMode=function(C){var et=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(C))wt=C;else if(isNaN(C)){if(et.indexOf(C)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+C+'" is not recognized.');wt=C}else wt=parseInt(C,10)};x.__private__.getZoomMode=function(){return wt};var te,qe=x.__private__.setPageMode=function(C){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(C)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+C+'" is not recognized.');xe=C};x.__private__.getPageMode=function(){return xe};var He=x.__private__.setLayoutMode=function(C){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(C)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+C+'" is not recognized.');te=C};x.__private__.getLayoutMode=function(){return te},x.__private__.setDisplayMode=x.setDisplayMode=function(C,et,It){return Ut(C),He(et),qe(It),this};var ze={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(C){if(Object.keys(ze).indexOf(C)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ze[C]},x.__private__.getDocumentProperties=function(){return ze},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(C){for(var et in ze)ze.hasOwnProperty(et)&&C[et]&&(ze[et]=C[et]);return this},x.__private__.setDocumentProperty=function(C,et){if(Object.keys(ze).indexOf(C)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ze[C]=et};var Xe,Oe,an,gn,di,sn={},dn={},Ze=[],Sn={},yi={},Tn={},li={},pi=null,Vn=0,je=[],Ne=new lg(x),Ni=t.hotfixes||[],ui={},Fe={},ti=[],Qe=function C(et,It,Wt,ue,be,De){if(!(this instanceof C))return new C(et,It,Wt,ue,be,De);isNaN(et)&&(et=1),isNaN(It)&&(It=0),isNaN(Wt)&&(Wt=0),isNaN(ue)&&(ue=1),isNaN(be)&&(be=0),isNaN(De)&&(De=0),this._matrix=[et,It,Wt,ue,be,De]};Object.defineProperty(Qe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Qe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Qe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Qe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Qe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Qe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Qe.prototype,"a",{get:function(){return this._matrix[0]},set:function(C){this._matrix[0]=C}}),Object.defineProperty(Qe.prototype,"b",{get:function(){return this._matrix[1]},set:function(C){this._matrix[1]=C}}),Object.defineProperty(Qe.prototype,"c",{get:function(){return this._matrix[2]},set:function(C){this._matrix[2]=C}}),Object.defineProperty(Qe.prototype,"d",{get:function(){return this._matrix[3]},set:function(C){this._matrix[3]=C}}),Object.defineProperty(Qe.prototype,"e",{get:function(){return this._matrix[4]},set:function(C){this._matrix[4]=C}}),Object.defineProperty(Qe.prototype,"f",{get:function(){return this._matrix[5]},set:function(C){this._matrix[5]=C}}),Object.defineProperty(Qe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qe.prototype.join=function(C){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Lt).join(C)},Qe.prototype.multiply=function(C){var et=C.sx*this.sx+C.shy*this.shx,It=C.sx*this.shy+C.shy*this.sy,Wt=C.shx*this.sx+C.sy*this.shx,ue=C.shx*this.shy+C.sy*this.sy,be=C.tx*this.sx+C.ty*this.shx+this.tx,De=C.tx*this.shy+C.ty*this.sy+this.ty;return new Qe(et,It,Wt,ue,be,De)},Qe.prototype.decompose=function(){var C=this.sx,et=this.shy,It=this.shx,Wt=this.sy,ue=this.tx,be=this.ty,De=Math.sqrt(C*C+et*et),Ge=(C/=De)*It+(et/=De)*Wt;It-=C*Ge,Wt-=et*Ge;var Ye=Math.sqrt(It*It+Wt*Wt);return Ge/=Ye,C*(Wt/=Ye)<et*(It/=Ye)&&(C=-C,et=-et,Ge=-Ge,De=-De),{scale:new Qe(De,0,0,Ye,0,0),translate:new Qe(1,0,0,1,ue,be),rotate:new Qe(C,et,-et,C,0,0),skew:new Qe(1,0,Ge,1,0,0)}},Qe.prototype.toString=function(C){return this.join(" ")},Qe.prototype.inversed=function(){var C=this.sx,et=this.shy,It=this.shx,Wt=this.sy,ue=this.tx,be=this.ty,De=1/(C*Wt-et*It),Ge=Wt*De,Ye=-et*De,ln=-It*De,bn=C*De;return new Qe(Ge,Ye,ln,bn,-Ge*ue-ln*be,-Ye*ue-bn*be)},Qe.prototype.applyToPoint=function(C){var et=C.x*this.sx+C.y*this.shx+this.tx,It=C.x*this.shy+C.y*this.sy+this.ty;return new zo(et,It)},Qe.prototype.applyToRectangle=function(C){var et=this.applyToPoint(C),It=this.applyToPoint(new zo(C.x+C.w,C.y+C.h));return new Zr(et.x,et.y,It.x-et.x,It.y-et.y)},Qe.prototype.clone=function(){var C=this.sx,et=this.shy,It=this.shx,Wt=this.sy,ue=this.tx,be=this.ty;return new Qe(C,et,It,Wt,ue,be)},x.Matrix=Qe;var ri=x.matrixMult=function(C,et){return et.multiply(C)},Rr=new Qe(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Rr;var Wi=function(C,et){if(!yi[C]){var It=(et instanceof Yl?"Sh":"P")+(Object.keys(Sn).length+1).toString(10);et.id=It,yi[C]=It,Sn[It]=et,Ne.publish("addPattern",et)}};x.ShadingPattern=Yl,x.TilingPattern=Tu,x.addShadingPattern=function(C,et){return gt("addShadingPattern()"),Wi(C,et),this},x.beginTilingPattern=function(C){gt("beginTilingPattern()"),Ia(C.boundingBox[0],C.boundingBox[1],C.boundingBox[2]-C.boundingBox[0],C.boundingBox[3]-C.boundingBox[1],C.matrix)},x.endTilingPattern=function(C,et){gt("endTilingPattern()"),et.stream=Ot[it].join(`
`),Wi(C,et),Ne.publish("endTilingPattern",et),ti.pop().restore()};var qn=x.__private__.newObject=function(){var C=$e();return Zi(C,!0),C},$e=x.__private__.newObjectDeferred=function(){return D++,q[D]=function(){return ct},D},Zi=function(C,et){return et=typeof et=="boolean"&&et,q[C]=ct,et&&Y(C+" 0 obj"),C},Cs=x.__private__.newAdditionalObject=function(){var C={objId:$e(),content:""};return At.push(C),C},Cr=$e(),pr=$e(),rr=x.__private__.decodeColorString=function(C){var et=C.split(" ");if(et.length!==2||et[1]!=="g"&&et[1]!=="G")et.length===5&&(et[4]==="k"||et[4]==="K")&&(et=[(1-et[0])*(1-et[3]),(1-et[1])*(1-et[3]),(1-et[2])*(1-et[3]),"r"]);else{var It=parseFloat(et[0]);et=[It,It,It,"r"]}for(var Wt="#",ue=0;ue<3;ue++)Wt+=("0"+Math.floor(255*parseFloat(et[ue])).toString(16)).slice(-2);return Wt},gr=x.__private__.encodeColorString=function(C){var et;typeof C=="string"&&(C={ch1:C});var It=C.ch1,Wt=C.ch2,ue=C.ch3,be=C.ch4,De=C.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof It=="string"&&It.charAt(0)!=="#"){var Ge=new K1(It);if(Ge.ok)It=Ge.toHex();else if(!/^\d*\.?\d*$/.test(It))throw new Error('Invalid color "'+It+'" passed to jsPDF.encodeColorString.')}if(typeof It=="string"&&/^#[0-9A-Fa-f]{3}$/.test(It)&&(It="#"+It[1]+It[1]+It[2]+It[2]+It[3]+It[3]),typeof It=="string"&&/^#[0-9A-Fa-f]{6}$/.test(It)){var Ye=parseInt(It.substr(1),16);It=Ye>>16&255,Wt=Ye>>8&255,ue=255&Ye}if(Wt===void 0||be===void 0&&It===Wt&&Wt===ue)if(typeof It=="string")et=It+" "+De[0];else switch(C.precision){case 2:et=zt(It/255)+" "+De[0];break;case 3:default:et=J(It/255)+" "+De[0]}else if(be===void 0||fi(be)==="object"){if(be&&!isNaN(be.a)&&be.a===0)return et=["1.","1.","1.",De[1]].join(" ");if(typeof It=="string")et=[It,Wt,ue,De[1]].join(" ");else switch(C.precision){case 2:et=[zt(It/255),zt(Wt/255),zt(ue/255),De[1]].join(" ");break;default:case 3:et=[J(It/255),J(Wt/255),J(ue/255),De[1]].join(" ")}}else if(typeof It=="string")et=[It,Wt,ue,be,De[2]].join(" ");else switch(C.precision){case 2:et=[zt(It),zt(Wt),zt(ue),zt(be),De[2]].join(" ");break;case 3:default:et=[J(It),J(Wt),J(ue),J(be),De[2]].join(" ")}return et},Ui=x.__private__.getFilters=function(){return l},sr=x.__private__.putStream=function(C){var et=(C=C||{}).data||"",It=C.filters||Ui(),Wt=C.alreadyAppliedFilters||[],ue=C.addLength1||!1,be=et.length,De=C.objectId,Ge=function(Ii){return Ii};if(b!==null&&De===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");b!==null&&(Ge=Oi.encryptor(De,0));var Ye={};It===!0&&(It=["FlateEncode"]);var ln=C.additionalKeyValues||[],bn=(Ye=wn.API.processDataByFilters!==void 0?wn.API.processDataByFilters(et,It):{data:et,reverseChain:[]}).reverseChain+(Array.isArray(Wt)?Wt.join(" "):Wt.toString());if(Ye.data.length!==0&&(ln.push({key:"Length",value:Ye.data.length}),ue===!0&&ln.push({key:"Length1",value:be})),bn.length!=0)if(bn.split("/").length-1==1)ln.push({key:"Filter",value:bn});else{ln.push({key:"Filter",value:"["+bn+"]"});for(var On=0;On<ln.length;On+=1)if(ln[On].key==="DecodeParms"){for(var hi=[],Un=0;Un<Ye.reverseChain.split("/").length-1;Un+=1)hi.push("null");hi.push(ln[On].value),ln[On].value="["+hi.join(" ")+"]"}}Y("<<");for(var Zn=0;Zn<ln.length;Zn++)Y("/"+ln[Zn].key+" "+ln[Zn].value);Y(">>"),Ye.data.length!==0&&(Y("stream"),Y(Ge(Ye.data)),Y("endstream"))},Ir=x.__private__.putPage=function(C){var et=C.number,It=C.data,Wt=C.objId,ue=C.contentsObjId;Zi(Wt,!0),Y("<</Type /Page"),Y("/Parent "+C.rootDictionaryObjId+" 0 R"),Y("/Resources "+C.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(Lt(C.mediaBox.bottomLeftX))+" "+parseFloat(Lt(C.mediaBox.bottomLeftY))+" "+Lt(C.mediaBox.topRightX)+" "+Lt(C.mediaBox.topRightY)+"]"),C.cropBox!==null&&Y("/CropBox ["+Lt(C.cropBox.bottomLeftX)+" "+Lt(C.cropBox.bottomLeftY)+" "+Lt(C.cropBox.topRightX)+" "+Lt(C.cropBox.topRightY)+"]"),C.bleedBox!==null&&Y("/BleedBox ["+Lt(C.bleedBox.bottomLeftX)+" "+Lt(C.bleedBox.bottomLeftY)+" "+Lt(C.bleedBox.topRightX)+" "+Lt(C.bleedBox.topRightY)+"]"),C.trimBox!==null&&Y("/TrimBox ["+Lt(C.trimBox.bottomLeftX)+" "+Lt(C.trimBox.bottomLeftY)+" "+Lt(C.trimBox.topRightX)+" "+Lt(C.trimBox.topRightY)+"]"),C.artBox!==null&&Y("/ArtBox ["+Lt(C.artBox.bottomLeftX)+" "+Lt(C.artBox.bottomLeftY)+" "+Lt(C.artBox.topRightX)+" "+Lt(C.artBox.topRightY)+"]"),typeof C.userUnit=="number"&&C.userUnit!==1&&Y("/UserUnit "+C.userUnit),Ne.publish("putPage",{objId:Wt,pageContext:je[et],pageNumber:et,page:It}),Y("/Contents "+ue+" 0 R"),Y(">>"),Y("endobj");var be=It.join(`
`);return X===W.ADVANCED&&(be+=`
Q`),Zi(ue,!0),sr({data:be,filters:Ui(),objectId:ue}),Y("endobj"),Wt},Ps=x.__private__.putPages=function(){var C,et,It=[];for(C=1;C<=Vn;C++)je[C].objId=$e(),je[C].contentsObjId=$e();for(C=1;C<=Vn;C++)It.push(Ir({number:C,data:Ot[C],objId:je[C].objId,contentsObjId:je[C].contentsObjId,mediaBox:je[C].mediaBox,cropBox:je[C].cropBox,bleedBox:je[C].bleedBox,trimBox:je[C].trimBox,artBox:je[C].artBox,userUnit:je[C].userUnit,rootDictionaryObjId:Cr,resourceDictionaryObjId:pr}));Zi(Cr,!0),Y("<</Type /Pages");var Wt="/Kids [";for(et=0;et<Vn;et++)Wt+=It[et]+" 0 R ";Y(Wt+"]"),Y("/Count "+Vn),Y(">>"),Y("endobj"),Ne.publish("postPutPages")},Hs=function(C){Ne.publish("putFont",{font:C,out:Y,newObject:qn,putStream:sr}),C.isAlreadyPutted!==!0&&(C.objectNumber=qn(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+Mu(C.postScriptName)),Y("/Subtype /Type1"),typeof C.encoding=="string"&&Y("/Encoding /"+C.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Gs=function(){for(var C in sn)sn.hasOwnProperty(C)&&(w===!1||w===!0&&S.hasOwnProperty(C))&&Hs(sn[C])},$r=function(C){C.objectNumber=qn();var et=[];et.push({key:"Type",value:"/XObject"}),et.push({key:"Subtype",value:"/Form"}),et.push({key:"BBox",value:"["+[Lt(C.x),Lt(C.y),Lt(C.x+C.width),Lt(C.y+C.height)].join(" ")+"]"}),et.push({key:"Matrix",value:"["+C.matrix.toString()+"]"});var It=C.pages[1].join(`
`);sr({data:It,additionalKeyValues:et,objectId:C.objectNumber}),Y("endobj")},us=function(){for(var C in ui)ui.hasOwnProperty(C)&&$r(ui[C])},ks=function(C,et){var It,Wt=[],ue=1/(et-1);for(It=0;It<1;It+=ue)Wt.push(It);if(Wt.push(1),C[0].offset!=0){var be={offset:0,color:C[0].color};C.unshift(be)}if(C[C.length-1].offset!=1){var De={offset:1,color:C[C.length-1].color};C.push(De)}for(var Ge="",Ye=0,ln=0;ln<Wt.length;ln++){for(It=Wt[ln];It>C[Ye+1].offset;)Ye++;var bn=C[Ye].offset,On=(It-bn)/(C[Ye+1].offset-bn),hi=C[Ye].color,Un=C[Ye+1].color;Ge+=$(Math.round((1-On)*hi[0]+On*Un[0]).toString(16))+$(Math.round((1-On)*hi[1]+On*Un[1]).toString(16))+$(Math.round((1-On)*hi[2]+On*Un[2]).toString(16))}return Ge.trim()},na=function(C,et){et||(et=21);var It=qn(),Wt=ks(C.colors,et),ue=[];ue.push({key:"FunctionType",value:"0"}),ue.push({key:"Domain",value:"[0.0 1.0]"}),ue.push({key:"Size",value:"["+et+"]"}),ue.push({key:"BitsPerSample",value:"8"}),ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sr({data:Wt,additionalKeyValues:ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:It}),Y("endobj"),C.objectNumber=qn(),Y("<< /ShadingType "+C.type),Y("/ColorSpace /DeviceRGB");var be="/Coords ["+Lt(parseFloat(C.coords[0]))+" "+Lt(parseFloat(C.coords[1]))+" ";C.type===2?be+=Lt(parseFloat(C.coords[2]))+" "+Lt(parseFloat(C.coords[3])):be+=Lt(parseFloat(C.coords[2]))+" "+Lt(parseFloat(C.coords[3]))+" "+Lt(parseFloat(C.coords[4]))+" "+Lt(parseFloat(C.coords[5])),Y(be+="]"),C.matrix&&Y("/Matrix ["+C.matrix.toString()+"]"),Y("/Function "+It+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},ia=function(C,et){var It=$e(),Wt=qn();et.push({resourcesOid:It,objectOid:Wt}),C.objectNumber=Wt;var ue=[];ue.push({key:"Type",value:"/Pattern"}),ue.push({key:"PatternType",value:"1"}),ue.push({key:"PaintType",value:"1"}),ue.push({key:"TilingType",value:"1"}),ue.push({key:"BBox",value:"["+C.boundingBox.map(Lt).join(" ")+"]"}),ue.push({key:"XStep",value:Lt(C.xStep)}),ue.push({key:"YStep",value:Lt(C.yStep)}),ue.push({key:"Resources",value:It+" 0 R"}),C.matrix&&ue.push({key:"Matrix",value:"["+C.matrix.toString()+"]"}),sr({data:C.stream,additionalKeyValues:ue,objectId:C.objectNumber}),Y("endobj")},Ws=function(C){var et;for(et in Sn)Sn.hasOwnProperty(et)&&(Sn[et]instanceof Yl?na(Sn[et]):Sn[et]instanceof Tu&&ia(Sn[et],C))},Do=function(C){for(var et in C.objectNumber=qn(),Y("<<"),C)switch(et){case"opacity":Y("/ca "+zt(C[et]));break;case"stroke-opacity":Y("/CA "+zt(C[et]))}Y(">>"),Y("endobj")},ra=function(){var C;for(C in Tn)Tn.hasOwnProperty(C)&&Do(Tn[C])},Ss=function(){for(var C in Y("/XObject <<"),ui)ui.hasOwnProperty(C)&&ui[C].objectNumber>=0&&Y("/"+C+" "+ui[C].objectNumber+" 0 R");Ne.publish("putXobjectDict"),Y(">>")},Es=function(){Oi.oid=qn(),Y("<<"),Y("/Filter /Standard"),Y("/V "+Oi.v),Y("/R "+Oi.r),Y("/U <"+Oi.toHexString(Oi.U)+">"),Y("/O <"+Oi.toHexString(Oi.O)+">"),Y("/P "+Oi.P),Y(">>"),Y("endobj")},uo=function(){for(var C in Y("/Font <<"),sn)sn.hasOwnProperty(C)&&(w===!1||w===!0&&S.hasOwnProperty(C))&&Y("/"+C+" "+sn[C].objectNumber+" 0 R");Y(">>")},No=function(){if(Object.keys(Sn).length>0){for(var C in Y("/Shading <<"),Sn)Sn.hasOwnProperty(C)&&Sn[C]instanceof Yl&&Sn[C].objectNumber>=0&&Y("/"+C+" "+Sn[C].objectNumber+" 0 R");Ne.publish("putShadingPatternDict"),Y(">>")}},or=function(C){if(Object.keys(Sn).length>0){for(var et in Y("/Pattern <<"),Sn)Sn.hasOwnProperty(et)&&Sn[et]instanceof x.TilingPattern&&Sn[et].objectNumber>=0&&Sn[et].objectNumber<C&&Y("/"+et+" "+Sn[et].objectNumber+" 0 R");Ne.publish("putTilingPatternDict"),Y(">>")}},Dn=function(){if(Object.keys(Tn).length>0){var C;for(C in Y("/ExtGState <<"),Tn)Tn.hasOwnProperty(C)&&Tn[C].objectNumber>=0&&Y("/"+C+" "+Tn[C].objectNumber+" 0 R");Ne.publish("putGStateDict"),Y(">>")}},rn=function(C){Zi(C.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),uo(),No(),or(C.objectOid),Dn(),Ss(),Y(">>"),Y("endobj")},ci=function(){var C=[];Gs(),ra(),us(),Ws(C),Ne.publish("putResources"),C.forEach(rn),rn({resourcesOid:pr,objectOid:Number.MAX_SAFE_INTEGER}),Ne.publish("postPutResources")},_i=function(){Ne.publish("putAdditionalObjects");for(var C=0;C<At.length;C++){var et=At[C];Zi(et.objId,!0),Y(et.content),Y("endobj")}Ne.publish("postPutAdditionalObjects")},$n=function(C){dn[C.fontName]=dn[C.fontName]||{},dn[C.fontName][C.fontStyle]=C.id},Vr=function(C,et,It,Wt,ue){var be={id:"F"+(Object.keys(sn).length+1).toString(10),postScriptName:C,fontName:et,fontStyle:It,encoding:Wt,isStandardFont:ue||!1,metadata:{}};return Ne.publish("addFont",{font:be,instance:this}),sn[be.id]=be,$n(be),be.id},xn=function(C){for(var et=0,It=Ht.length;et<It;et++){var Wt=Vr.call(this,C[et][0],C[et][1],C[et][2],Ht[et][3],!0);w===!1&&(S[Wt]=!0);var ue=C[et][0].split("-");$n({id:Wt,fontName:ue[0],fontStyle:ue[1]||""})}Ne.publish("addFonts",{fonts:sn,dictionary:dn})},zn=function(C){return C.foo=function(){try{return C.apply(this,arguments)}catch(Wt){var et=Wt.stack||"";~et.indexOf(" at ")&&(et=et.split(" at ")[1]);var It="Error in function "+et.split(`
`)[0].split("<")[0]+": "+Wt.message;if(!Cn.console)throw new Error(It);Cn.console.error(It,Wt),Cn.alert&&alert(It)}},C.foo.bar=C,C.foo},co=function(C,et){var It,Wt,ue,be,De,Ge,Ye,ln,bn;if(ue=(et=et||{}).sourceEncoding||"Unicode",De=et.outputEncoding,(et.autoencode||De)&&sn[Xe].metadata&&sn[Xe].metadata[ue]&&sn[Xe].metadata[ue].encoding&&(be=sn[Xe].metadata[ue].encoding,!De&&sn[Xe].encoding&&(De=sn[Xe].encoding),!De&&be.codePages&&(De=be.codePages[0]),typeof De=="string"&&(De=be[De]),De)){for(Ye=!1,Ge=[],It=0,Wt=C.length;It<Wt;It++)(ln=De[C.charCodeAt(It)])?Ge.push(String.fromCharCode(ln)):Ge.push(C[It]),Ge[It].charCodeAt(0)>>8&&(Ye=!0);C=Ge.join("")}for(It=C.length;Ye===void 0&&It!==0;)C.charCodeAt(It-1)>>8&&(Ye=!0),It--;if(!Ye)return C;for(Ge=et.noBOM?[]:[254,255],It=0,Wt=C.length;It<Wt;It++){if((bn=(ln=C.charCodeAt(It))>>8)>>8)throw new Error("Character at position "+It+" of string '"+C+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(bn),Ge.push(ln-(bn<<8))}return String.fromCharCode.apply(void 0,Ge)},Ki=x.__private__.pdfEscape=x.pdfEscape=function(C,et){return co(C,et).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ar=x.__private__.beginPage=function(C){Ot[++Vn]=[],je[Vn]={objId:0,contentsObjId:0,userUnit:Number(f),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(C[0]),topRightY:Number(C[1])}},As(Vn),vt(Ot[it])},il=function(C,et){var It,Wt,ue;switch(n=et||n,typeof C=="string"&&(It=U(C.toLowerCase()),Array.isArray(It)&&(Wt=It[0],ue=It[1])),Array.isArray(C)&&(Wt=C[0]*Oe,ue=C[1]*Oe),isNaN(Wt)&&(Wt=o[0],ue=o[1]),(Wt>14400||ue>14400)&&(gi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Wt=Math.min(14400,Wt),ue=Math.min(14400,ue)),o=[Wt,ue],n.substr(0,1)){case"l":ue>Wt&&(o=[ue,Wt]);break;case"p":Wt>ue&&(o=[ue,Wt])}ar(o),Fo(ua),Y(Pr),fa!==0&&Y(fa+" J"),Ri!==0&&Y(Ri+" j"),Ne.publish("addPage",{pageNumber:Vn})},sa=function(C){C>0&&C<=Vn&&(Ot.splice(C,1),je.splice(C,1),Vn--,it>Vn&&(it=Vn),this.setPage(it))},As=function(C){C>0&&C<=Vn&&(it=C)},bi=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Ot.length-1},Ms=function(C,et,It){var Wt,ue=void 0;return It=It||{},C=C!==void 0?C:sn[Xe].fontName,et=et!==void 0?et:sn[Xe].fontStyle,Wt=C.toLowerCase(),dn[Wt]!==void 0&&dn[Wt][et]!==void 0?ue=dn[Wt][et]:dn[C]!==void 0&&dn[C][et]!==void 0?ue=dn[C][et]:It.disableWarning===!1&&gi.warn("Unable to look up font label for font '"+C+"', '"+et+"'. Refer to getFontList() for available fonts."),ue||It.noFallback||(ue=dn.times[et])==null&&(ue=dn.times.normal),ue},Oo=x.__private__.putInfo=function(){var C=qn(),et=function(Wt){return Wt};for(var It in b!==null&&(et=Oi.encryptor(C,0)),Y("<<"),Y("/Producer ("+Ki(et("jsPDF "+wn.version))+")"),ze)ze.hasOwnProperty(It)&&ze[It]&&Y("/"+It.substr(0,1).toUpperCase()+It.substr(1)+" ("+Ki(et(ze[It]))+")");Y("/CreationDate ("+Ki(et(A))+")"),Y(">>"),Y("endobj")},Zs=x.__private__.putCatalog=function(C){var et=(C=C||{}).rootDictionaryObjId||Cr;switch(qn(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+et+" 0 R"),wt||(wt="fullwidth"),wt){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var It=""+wt;It.substr(It.length-1)==="%"&&(wt=parseInt(wt)/100),typeof wt=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+zt(wt)+"]")}switch(te||(te="continuous"),te){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}xe&&Y("/PageMode /"+xe),Ne.publish("putCatalog"),Y(">>"),Y("endobj")},Ma=x.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(D+1)),Y("/Root "+D+" 0 R"),Y("/Info "+(D-1)+" 0 R"),b!==null&&Y("/Encrypt "+Oi.oid+" 0 R"),Y("/ID [ <"+H+"> <"+H+"> ]"),Y(">>")},ho=x.__private__.putHeader=function(){Y("%PDF-"+R),Y("%")},Ba=x.__private__.putXRef=function(){var C="0000000000";Y("xref"),Y("0 "+(D+1)),Y("0000000000 65535 f ");for(var et=1;et<=D;et++)typeof q[et]=="function"?Y((C+q[et]()).slice(-10)+" 00000 n "):q[et]!==void 0?Y((C+q[et]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},cs=x.__private__.buildDocument=function(){yt(),vt(dt),Ne.publish("buildDocument"),ho(),Ps(),_i(),ci(),b!==null&&Es(),Oo(),Zs();var C=ct;return Ba(),Ma(),Y("startxref"),Y(""+C),Y("%%EOF"),vt(Ot[it]),dt.join(`
`)},Ks=x.__private__.getBlob=function(C){return new Blob([ee(C)],{type:"application/pdf"})},fo=x.output=x.__private__.output=zn(function(C,et){switch(typeof(et=et||{})=="string"?et={filename:et}:et.filename=et.filename||"generated.pdf",C){case void 0:return cs();case"save":x.save(et.filename);break;case"arraybuffer":return ee(cs());case"blob":return Ks(cs());case"bloburi":case"bloburl":if(Cn.URL!==void 0&&typeof Cn.URL.createObjectURL=="function")return Cn.URL&&Cn.URL.createObjectURL(Ks(cs()))||void 0;gi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var It="",Wt=cs();try{It=Md(Wt)}catch{It=Md(unescape(encodeURIComponent(Wt)))}return"data:application/pdf;filename="+et.filename+";base64,"+It;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Cn)==="[object Window]"){var ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';et.pdfObjectUrl&&(ue=et.pdfObjectUrl,be="");var De='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ue+'"'+be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(et)+");<\/script></body></html>",Ge=Cn.open();return Ge!==null&&Ge.document.write(De),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Cn)==="[object Window]"){var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(et.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+et.filename+'" width="500px" height="400px" /></body></html>',ln=Cn.open();if(ln!==null){ln.document.write(Ye);var bn=this;ln.document.documentElement.querySelector("#pdfViewer").onload=function(){ln.document.title=et.filename,ln.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(bn.output("bloburl"))}}return ln}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Cn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var On='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",et)+'"></iframe></body></html>',hi=Cn.open();if(hi!==null&&(hi.document.write(On),hi.document.title=et.filename),hi||typeof safari>"u")return hi;break;case"datauri":case"dataurl":return Cn.document.location.href=this.output("datauristring",et);default:return null}}),oa=function(C){return Array.isArray(Ni)===!0&&Ni.indexOf(C)>-1};switch(i){case"pt":Oe=1;break;case"mm":Oe=72/25.4;break;case"cm":Oe=72/2.54;break;case"in":Oe=72;break;case"px":Oe=oa("px_scaling")==1?.75:96/72;break;case"pc":case"em":Oe=12;break;case"ex":Oe=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Oe=i}var Oi=null;ht(),z();var rl=function(C){return b!==null?Oi.encryptor(C,0):function(et){return et}},aa=x.__private__.getPageInfo=x.getPageInfo=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:je[C].objId,pageNumber:C,pageContext:je[C]}},Ln=x.__private__.getPageInfoByObjId=function(C){if(isNaN(C)||C%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var et in je)if(je[et].objId===C)break;return aa(et)},Pn=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:je[it].objId,pageNumber:it,pageContext:je[it]}};x.addPage=function(){return il.apply(this,arguments),this},x.setPage=function(){return As.apply(this,arguments),vt.call(this,Ot[it]),this},x.insertPage=function(C){return this.addPage(),this.movePage(it,C),this},x.movePage=function(C,et){var It,Wt;if(C>et){It=Ot[C],Wt=je[C];for(var ue=C;ue>et;ue--)Ot[ue]=Ot[ue-1],je[ue]=je[ue-1];Ot[et]=It,je[et]=Wt,this.setPage(et)}else if(C<et){It=Ot[C],Wt=je[C];for(var be=C;be<et;be++)Ot[be]=Ot[be+1],je[be]=je[be+1];Ot[et]=It,je[et]=Wt,this.setPage(et)}return this},x.deletePage=function(){return sa.apply(this,arguments),this},x.__private__.text=x.text=function(C,et,It,Wt,ue){var be,De,Ge,Ye,ln,bn,On,hi,Un,Zn=(Wt=Wt||{}).scope||this;if(typeof C=="number"&&typeof et=="number"&&(typeof It=="string"||Array.isArray(It))){var Ii=It;It=et,et=C,C=Ii}if(arguments[3]instanceof Qe?(gt("The transform parameter of text() with a Matrix value"),Un=ue):(Ge=arguments[4],Ye=arguments[5],fi(On=arguments[3])==="object"&&On!==null||(typeof Ge=="string"&&(Ye=Ge,Ge=null),typeof On=="string"&&(Ye=On,On=null),typeof On=="number"&&(Ge=On,On=null),Wt={flags:On,angle:Ge,align:Ye})),isNaN(et)||isNaN(It)||C==null)throw new Error("Invalid arguments passed to jsPDF.text");if(C.length===0)return Zn;var Mi="",jr=!1,ei=typeof Wt.lineHeightFactor=="number"?Wt.lineHeightFactor:Io,vr=Zn.internal.scaleFactor;function al(Xn){return Xn=Xn.split("	").join(Array(Wt.TabLen||9).join(" ")),Ki(Xn,On)}function yr(Xn){for(var Kn,ki=Xn.concat(),ni=[],ds=ki.length;ds--;)typeof(Kn=ki.shift())=="string"?ni.push(Kn):Array.isArray(Xn)&&(Kn.length===1||Kn[1]===void 0&&Kn[2]===void 0)?ni.push(Kn[0]):ni.push([Kn[0],Kn[1],Kn[2]]);return ni}function ja(Xn,Kn){var ki;if(typeof Xn=="string")ki=Kn(Xn)[0];else if(Array.isArray(Xn)){for(var ni,ds,xo=Xn.concat(),Rs=[],ul=xo.length;ul--;)typeof(ni=xo.shift())=="string"?Rs.push(Kn(ni)[0]):Array.isArray(ni)&&typeof ni[0]=="string"&&(ds=Kn(ni[0],ni[1],ni[2]),Rs.push([ds[0],ds[1],ds[2]]));ki=Rs}return ki}var hs=!1,za=!0;if(typeof C=="string")hs=!0;else if(Array.isArray(C)){var Xs=C.concat();De=[];for(var Qs,Bi=Xs.length;Bi--;)(typeof(Qs=Xs.shift())!="string"||Array.isArray(Qs)&&typeof Qs[0]!="string")&&(za=!1);hs=za}if(hs===!1)throw new Error('Type of text must be string or Array. "'+C+'" is not recognized.');typeof C=="string"&&(C=C.match(/[\r?\n]/)?C.split(/\r\n|\r|\n/g):[C]);var ga=Rt/Zn.internal.scaleFactor,kr=ga*(ei-1);switch(Wt.baseline){case"bottom":It-=kr;break;case"top":It+=ga-kr;break;case"hanging":It+=ga-2*kr;break;case"middle":It+=ga/2-kr}if((bn=Wt.maxWidth||0)>0&&(typeof C=="string"?C=Zn.splitTextToSize(C,bn):Object.prototype.toString.call(C)==="[object Array]"&&(C=C.reduce(function(Xn,Kn){return Xn.concat(Zn.splitTextToSize(Kn,bn))},[]))),be={text:C,x:et,y:It,options:Wt,mutex:{pdfEscape:Ki,activeFontKey:Xe,fonts:sn,activeFontSize:Rt}},Ne.publish("preProcessText",be),C=be.text,Ge=(Wt=be.options).angle,!(Un instanceof Qe)&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,Wt.rotationDirection===0&&(Ge=-Ge),X===W.ADVANCED&&(Ge=-Ge);var _r=Math.cos(Ge),ma=Math.sin(Ge);Un=new Qe(_r,ma,-ma,_r,0,0)}else Ge&&Ge instanceof Qe&&(Un=Ge);X!==W.ADVANCED||Un||(Un=Rr),(ln=Wt.charSpace||ha)!==void 0&&(Mi+=Lt(Z(ln))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(hi=Wt.horizontalScale)!==void 0&&(Mi+=Lt(100*hi)+` Tz
`),Wt.lang;var lr=-1,to=Wt.renderingMode!==void 0?Wt.renderingMode:Wt.stroke,zr=Zn.internal.getCurrentPageInfo().pageContext;switch(to){case 0:case!1:case"fill":lr=0;break;case 1:case!0:case"stroke":lr=1;break;case 2:case"fillThenStroke":lr=2;break;case 3:case"invisible":lr=3;break;case 4:case"fillAndAddForClipping":lr=4;break;case 5:case"strokeAndAddPathForClipping":lr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":lr=6;break;case 7:case"addToPathForClipping":lr=7}var ll=zr.usedRenderingMode!==void 0?zr.usedRenderingMode:-1;lr!==-1?Mi+=lr+` Tr
`:ll!==-1&&(Mi+=`0 Tr
`),lr!==-1&&(zr.usedRenderingMode=lr),Ye=Wt.align||"left";var Fi,Ts=Rt*ei,Kr=Zn.internal.pageSize.getWidth(),qo=sn[Xe];ln=Wt.charSpace||ha,bn=Wt.maxWidth||0,On=Object.assign({autoencode:!0,noBOM:!0},Wt.flags);var eo=[],Ds=function(Xn){return Zn.getStringUnitWidth(Xn,{font:qo,charSpace:ln,fontSize:Rt,doKerning:!1})*Rt/vr};if(Object.prototype.toString.call(C)==="[object Array]"){var Yi;De=yr(C),Ye!=="left"&&(Fi=De.map(Ds));var qi,fs=0;if(Ye==="right"){et-=Fi[0],C=[],Bi=De.length;for(var Sr=0;Sr<Bi;Sr++)Sr===0?(qi=hn(et),Yi=mr(It)):(qi=Z(fs-Fi[Sr]),Yi=-Ts),C.push([De[Sr],qi,Yi]),fs=Fi[Sr]}else if(Ye==="center"){et-=Fi[0]/2,C=[],Bi=De.length;for(var Yr=0;Yr<Bi;Yr++)Yr===0?(qi=hn(et),Yi=mr(It)):(qi=Z((fs-Fi[Yr])/2),Yi=-Ts),C.push([De[Yr],qi,Yi]),fs=Fi[Yr]}else if(Ye==="left"){C=[],Bi=De.length;for(var no=0;no<Bi;no++)C.push(De[no])}else if(Ye==="justify"&&qo.encoding==="Identity-H"){C=[],Bi=De.length,bn=bn!==0?bn:Kr;for(var Jr=0,wi=0;wi<Bi;wi++)if(Yi=wi===0?mr(It):-Ts,qi=wi===0?hn(et):Jr,wi<Bi-1){var Ns=Z((bn-Fi[wi])/(De[wi].split(" ").length-1)),br=De[wi].split(" ");C.push([br[0]+" ",qi,Yi]),Jr=0;for(var ur=1;ur<br.length;ur++){var $o=(Ds(br[ur-1]+" "+br[ur])-Ds(br[ur]))*vr+Ns;ur==br.length-1?C.push([br[ur],$o,0]):C.push([br[ur]+" ",$o,0]),Jr-=$o}}else C.push([De[wi],qi,Yi]);C.push(["",Jr,0])}else{if(Ye!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(C=[],Bi=De.length,bn=bn!==0?bn:Kr,wi=0;wi<Bi;wi++)Yi=wi===0?mr(It):-Ts,qi=wi===0?hn(et):0,wi<Bi-1?eo.push(Lt(Z((bn-Fi[wi])/(De[wi].split(" ").length-1)))):eo.push(0),C.push([De[wi],qi,Yi])}}var Ua=typeof Wt.R2L=="boolean"?Wt.R2L:ne;Ua===!0&&(C=ja(C,function(Xn,Kn,ki){return[Xn.split("").reverse().join(""),Kn,ki]})),be={text:C,x:et,y:It,options:Wt,mutex:{pdfEscape:Ki,activeFontKey:Xe,fonts:sn,activeFontSize:Rt}},Ne.publish("postProcessText",be),C=be.text,jr=be.mutex.isHex||!1;var qa=sn[Xe].encoding;qa!=="WinAnsiEncoding"&&qa!=="StandardEncoding"||(C=ja(C,function(Xn,Kn,ki){return[al(Xn),Kn,ki]})),De=yr(C),C=[];for(var cr,Er,_o,Os=0,va=1,bo=Array.isArray(De[0])?va:Os,wo="",io=function(Xn,Kn,ki){var ni="";return ki instanceof Qe?(ki=typeof Wt.angle=="number"?ri(ki,new Qe(1,0,0,1,Xn,Kn)):ri(new Qe(1,0,0,1,Xn,Kn),ki),X===W.ADVANCED&&(ki=ri(new Qe(1,0,0,-1,0,0),ki)),ni=ki.join(" ")+` Tm
`):ni=Lt(Xn)+" "+Lt(Kn)+` Td
`,ni},Xr=0;Xr<De.length;Xr++){switch(wo="",bo){case va:_o=(jr?"<":"(")+De[Xr][0]+(jr?">":")"),cr=parseFloat(De[Xr][1]),Er=parseFloat(De[Xr][2]);break;case Os:_o=(jr?"<":"(")+De[Xr]+(jr?">":")"),cr=hn(et),Er=mr(It)}eo!==void 0&&eo[Xr]!==void 0&&(wo=eo[Xr]+` Tw
`),Xr===0?C.push(wo+io(cr,Er,Un)+_o):bo===Os?C.push(wo+_o):bo===va&&C.push(wo+io(cr,Er,Un)+_o)}C=bo===Os?C.join(` Tj
T* `):C.join(` Tj
`),C+=` Tj
`;var Ji=`BT
/`;return Ji+=Xe+" "+Rt+` Tf
`,Ji+=Lt(Rt*ei)+` TL
`,Ji+=Bs+`
`,Ji+=Mi,Ji+=C,Y(Ji+="ET"),S[Xe]=!0,Zn};var Hr=x.__private__.clip=x.clip=function(C){return Y(C==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Hr("evenodd")},x.__private__.discardPath=x.discardPath=function(){return Y("n"),this};var In=x.__private__.isValidStyle=function(C){var et=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(C)!==-1&&(et=!0),et};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(C){return In(C)&&(v=C),this};var Ta=x.__private__.getStyle=x.getStyle=function(C){var et=v;switch(C){case"D":case"S":et="S";break;case"F":et="f";break;case"FD":case"DF":et="B";break;case"f":case"f*":case"B":case"B*":et=C}return et},la=x.close=function(){return Y("h"),this};x.stroke=function(){return Y("S"),this},x.fill=function(C){return po("f",C),this},x.fillEvenOdd=function(C){return po("f*",C),this},x.fillStroke=function(C){return po("B",C),this},x.fillStrokeEvenOdd=function(C){return po("B*",C),this};var po=function(C,et){fi(et)==="object"?Da(et,C):Y(C)},Gr=function(C){C===null||X===W.ADVANCED&&C===void 0||(C=Ta(C),Y(C))};function Ys(C,et,It,Wt,ue){var be=new Tu(et||this.boundingBox,It||this.xStep,Wt||this.yStep,this.gState,ue||this.matrix);be.stream=this.stream;var De=C+"$$"+this.cloneIndex+++"$$";return Wi(De,be),be}var Da=function(C,et){var It=yi[C.key],Wt=Sn[It];if(Wt instanceof Yl)Y("q"),Y(Ro(et)),Wt.gState&&x.setGState(Wt.gState),Y(C.matrix.toString()+" cm"),Y("/"+It+" sh"),Y("Q");else if(Wt instanceof Tu){var ue=new Qe(1,0,0,-1,0,yo());C.matrix&&(ue=ue.multiply(C.matrix||Rr),It=Ys.call(Wt,C.key,C.boundingBox,C.xStep,C.yStep,ue).id),Y("q"),Y("/Pattern cs"),Y("/"+It+" scn"),Wt.gState&&x.setGState(Wt.gState),Y(et),Y("Q")}},Ro=function(C){switch(C){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ci=x.moveTo=function(C,et){return Y(Lt(Z(C))+" "+Lt(Bt(et))+" m"),this},Fr=x.lineTo=function(C,et){return Y(Lt(Z(C))+" "+Lt(Bt(et))+" l"),this},Js=x.curveTo=function(C,et,It,Wt,ue,be){return Y([Lt(Z(C)),Lt(Bt(et)),Lt(Z(It)),Lt(Bt(Wt)),Lt(Z(ue)),Lt(Bt(be)),"c"].join(" ")),this};x.__private__.line=x.line=function(C,et,It,Wt,ue){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Wt)||!In(ue))throw new Error("Invalid arguments passed to jsPDF.line");return X===W.COMPAT?this.lines([[It-C,Wt-et]],C,et,[1,1],ue||"S"):this.lines([[It-C,Wt-et]],C,et,[1,1]).stroke()},x.__private__.lines=x.lines=function(C,et,It,Wt,ue,be){var De,Ge,Ye,ln,bn,On,hi,Un,Zn,Ii,Mi,jr;if(typeof C=="number"&&(jr=It,It=et,et=C,C=jr),Wt=Wt||[1,1],be=be||!1,isNaN(et)||isNaN(It)||!Array.isArray(C)||!Array.isArray(Wt)||!In(ue)||typeof be!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ci(et,It),De=Wt[0],Ge=Wt[1],ln=C.length,Ii=et,Mi=It,Ye=0;Ye<ln;Ye++)(bn=C[Ye]).length===2?(Ii=bn[0]*De+Ii,Mi=bn[1]*Ge+Mi,Fr(Ii,Mi)):(On=bn[0]*De+Ii,hi=bn[1]*Ge+Mi,Un=bn[2]*De+Ii,Zn=bn[3]*Ge+Mi,Ii=bn[4]*De+Ii,Mi=bn[5]*Ge+Mi,Js(On,hi,Un,Zn,Ii,Mi));return be&&la(),Gr(ue),this},x.path=function(C){for(var et=0;et<C.length;et++){var It=C[et],Wt=It.c;switch(It.op){case"m":Ci(Wt[0],Wt[1]);break;case"l":Fr(Wt[0],Wt[1]);break;case"c":Js.apply(this,Wt);break;case"h":la()}}return this},x.__private__.rect=x.rect=function(C,et,It,Wt,ue){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Wt)||!In(ue))throw new Error("Invalid arguments passed to jsPDF.rect");return X===W.COMPAT&&(Wt=-Wt),Y([Lt(Z(C)),Lt(Bt(et)),Lt(Z(It)),Lt(Z(Wt)),"re"].join(" ")),Gr(ue),this},x.__private__.triangle=x.triangle=function(C,et,It,Wt,ue,be,De){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Wt)||isNaN(ue)||isNaN(be)||!In(De))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[It-C,Wt-et],[ue-It,be-Wt],[C-ue,et-be]],C,et,[1,1],De,!0),this},x.__private__.roundedRect=x.roundedRect=function(C,et,It,Wt,ue,be,De){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Wt)||isNaN(ue)||isNaN(be)||!In(De))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return ue=Math.min(ue,.5*It),be=Math.min(be,.5*Wt),this.lines([[It-2*ue,0],[ue*Ge,0,ue,be-be*Ge,ue,be],[0,Wt-2*be],[0,be*Ge,-ue*Ge,be,-ue,be],[2*ue-It,0],[-ue*Ge,0,-ue,-be*Ge,-ue,-be],[0,2*be-Wt],[0,-be*Ge,ue*Ge,-be,ue,-be]],C+ue,et,[1,1],De,!0),this},x.__private__.ellipse=x.ellipse=function(C,et,It,Wt,ue){if(isNaN(C)||isNaN(et)||isNaN(It)||isNaN(Wt)||!In(ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var be=4/3*(Math.SQRT2-1)*It,De=4/3*(Math.SQRT2-1)*Wt;return Ci(C+It,et),Js(C+It,et-De,C+be,et-Wt,C,et-Wt),Js(C-be,et-Wt,C-It,et-De,C-It,et),Js(C-It,et+De,C-be,et+Wt,C,et+Wt),Js(C+be,et+Wt,C+It,et+De,C+It,et),Gr(ue),this},x.__private__.circle=x.circle=function(C,et,It,Wt){if(isNaN(C)||isNaN(et)||isNaN(It)||!In(Wt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(C,et,It,It,Wt)},x.setFont=function(C,et,It){return It&&(et=Nt(et,It)),Xe=Ms(C,et,{disableWarning:!1}),this};var sl=x.__private__.getFont=x.getFont=function(){return sn[Ms.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var C,et,It={};for(C in dn)if(dn.hasOwnProperty(C))for(et in It[C]=[],dn[C])dn[C].hasOwnProperty(et)&&It[C].push(et);return It},x.addFont=function(C,et,It,Wt,ue){var be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&be.indexOf(arguments[3])!==-1?ue=arguments[3]:arguments[3]&&be.indexOf(arguments[3])==-1&&(It=Nt(It,Wt)),ue=ue||"Identity-H",Vr.call(this,C,et,It,ue)};var Io,ua=t.lineWidth||.200025,go=x.__private__.getLineWidth=x.getLineWidth=function(){return ua},Fo=x.__private__.setLineWidth=x.setLineWidth=function(C){return ua=C,Y(Lt(Z(C))+" w"),this};x.__private__.setLineDash=wn.API.setLineDash=wn.API.setLineDashPattern=function(C,et){if(C=C||[],et=et||0,isNaN(et)||!Array.isArray(C))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return C=C.map(function(It){return Lt(Z(It))}).join(" "),et=Lt(Z(et)),Y("["+C+"] "+et+" d"),this};var Na=x.__private__.getLineHeight=x.getLineHeight=function(){return Rt*Io};x.__private__.getLineHeight=x.getLineHeight=function(){return Rt*Io};var Nn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(C){return typeof(C=C||1.15)=="number"&&(Io=C),this},Oa=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Io};Nn(t.lineHeight);var hn=x.__private__.getHorizontalCoordinate=function(C){return Z(C)},mr=x.__private__.getVerticalCoordinate=function(C){return X===W.ADVANCED?C:je[it].mediaBox.topRightY-je[it].mediaBox.bottomLeftY-Z(C)},jo=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(C){return Lt(hn(C))},mo=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(C){return Lt(mr(C))},Pr=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return rr(Pr)},x.__private__.setStrokeColor=x.setDrawColor=function(C,et,It,Wt){return Pr=gr({ch1:C,ch2:et,ch3:It,ch4:Wt,pdfColorType:"draw",precision:2}),Y(Pr),this};var Ra=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return rr(Ra)},x.__private__.setFillColor=x.setFillColor=function(C,et,It,Wt){return Ra=gr({ch1:C,ch2:et,ch3:It,ch4:Wt,pdfColorType:"fill",precision:2}),Y(Ra),this};var Bs=t.textColor||"0 g",ca=x.__private__.getTextColor=x.getTextColor=function(){return rr(Bs)};x.__private__.setTextColor=x.setTextColor=function(C,et,It,Wt){return Bs=gr({ch1:C,ch2:et,ch3:It,ch4:Wt,pdfColorType:"text",precision:3}),this};var ha=t.charSpace,Wr=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(ha||0)};x.__private__.setCharSpace=x.setCharSpace=function(C){if(isNaN(C))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ha=C,this};var fa=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(C){var et=x.CapJoinStyles[C];if(et===void 0)throw new Error("Line cap style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fa=et,Y(et+" J"),this};var Ri=0;x.__private__.setLineJoin=x.setLineJoin=function(C){var et=x.CapJoinStyles[C];if(et===void 0)throw new Error("Line join style of '"+C+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ri=et,Y(et+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(C){if(C=C||0,isNaN(C))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(Lt(Z(C))+" M"),this},x.GState=Oh,x.setGState=function(C){(C=typeof C=="string"?Tn[li[C]]:ol(null,C)).equals(pi)||(Y("/"+C.id+" gs"),pi=C)};var ol=function(C,et){if(!C||!li[C]){var It=!1;for(var Wt in Tn)if(Tn.hasOwnProperty(Wt)&&Tn[Wt].equals(et)){It=!0;break}if(It)et=Tn[Wt];else{var ue="GS"+(Object.keys(Tn).length+1).toString(10);Tn[ue]=et,et.id=ue}return C&&(li[C]=et.id),Ne.publish("addGState",et),et}};x.addGState=function(C,et){return ol(C,et),this},x.saveGraphicsState=function(){return Y("q"),Ze.push({key:Xe,size:Rt,color:Bs}),this},x.restoreGraphicsState=function(){Y("Q");var C=Ze.pop();return Xe=C.key,Rt=C.size,Bs=C.color,pi=null,this},x.setCurrentTransformationMatrix=function(C){return Y(C.toString()+" cm"),this},x.comment=function(C){return Y("#"+C),this};var zo=function(C,et){var It=C||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return It},set:function(be){isNaN(be)||(It=parseFloat(be))}});var Wt=et||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Wt},set:function(be){isNaN(be)||(Wt=parseFloat(be))}});var ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ue},set:function(be){ue=be.toString()}}),this},Zr=function(C,et,It,Wt){zo.call(this,C,et),this.type="rect";var ue=It||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ue},set:function(De){isNaN(De)||(ue=parseFloat(De))}});var be=Wt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return be},set:function(De){isNaN(De)||(be=parseFloat(De))}}),this},da=function(){this.page=Vn,this.currentPage=it,this.pages=Ot.slice(0),this.pagesContext=je.slice(0),this.x=an,this.y=gn,this.matrix=di,this.width=vo(it),this.height=yo(it),this.outputDestination=tt,this.id="",this.objectNumber=-1};da.prototype.restore=function(){Vn=this.page,it=this.currentPage,je=this.pagesContext,Ot=this.pages,an=this.x,gn=this.y,di=this.matrix,Uo(it,this.width),Pi(it,this.height),tt=this.outputDestination};var Ia=function(C,et,It,Wt,ue){ti.push(new da),Vn=it=0,Ot=[],an=C,gn=et,di=ue,ar([It,Wt])},Fa=function(C){if(Fe[C])ti.pop().restore();else{var et=new da,It="Xo"+(Object.keys(ui).length+1).toString(10);et.id=It,Fe[C]=It,ui[It]=et,Ne.publish("addFormObject",et),ti.pop().restore()}};for(var pa in x.beginFormObject=function(C,et,It,Wt,ue){return Ia(C,et,It,Wt,ue),this},x.endFormObject=function(C){return Fa(C),this},x.doFormObject=function(C,et){var It=ui[Fe[C]];return Y("q"),Y(et.toString()+" cm"),Y("/"+It.id+" Do"),Y("Q"),this},x.getFormObject=function(C){var et=ui[Fe[C]];return{x:et.x,y:et.y,width:et.width,height:et.height,matrix:et.matrix}},x.save=function(C,et){return C=C||"generated.pdf",(et=et||{}).returnPromise=et.returnPromise||!1,et.returnPromise===!1?(Zl(Ks(cs()),C),typeof Zl.unload=="function"&&Cn.setTimeout&&setTimeout(Zl.unload,911),this):new Promise(function(It,Wt){try{var ue=Zl(Ks(cs()),C);typeof Zl.unload=="function"&&Cn.setTimeout&&setTimeout(Zl.unload,911),It(ue)}catch(be){Wt(be.message)}})},wn.API)wn.API.hasOwnProperty(pa)&&(pa==="events"&&wn.API.events.length?function(C,et){var It,Wt,ue;for(ue=et.length-1;ue!==-1;ue--)It=et[ue][0],Wt=et[ue][1],C.subscribe.apply(C,[It].concat(typeof Wt=="function"?[Wt]:Wt))}(Ne,wn.API.events):x[pa]=wn.API[pa]);var vo=x.getPageWidth=function(C){return(je[C=C||it].mediaBox.topRightX-je[C].mediaBox.bottomLeftX)/Oe},Uo=x.setPageWidth=function(C,et){je[C].mediaBox.topRightX=et*Oe+je[C].mediaBox.bottomLeftX},yo=x.getPageHeight=function(C){return(je[C=C||it].mediaBox.topRightY-je[C].mediaBox.bottomLeftY)/Oe},Pi=x.setPageHeight=function(C,et){je[C].mediaBox.topRightY=et*Oe+je[C].mediaBox.bottomLeftY};return x.internal={pdfEscape:Ki,getStyle:Ta,getFont:sl,getFontSize:oe,getCharSpace:Wr,getTextColor:ca,getLineHeight:Na,getLineHeightFactor:Oa,getLineWidth:go,write:$t,getHorizontalCoordinate:hn,getVerticalCoordinate:mr,getCoordinateString:jo,getVerticalCoordinateString:mo,collections:{},newObject:qn,newAdditionalObject:Cs,newObjectDeferred:$e,newObjectDeferredBegin:Zi,getFilters:Ui,putStream:sr,events:Ne,scaleFactor:Oe,pageSize:{getWidth:function(){return vo(it)},setWidth:function(C){Uo(it,C)},getHeight:function(){return yo(it)},setHeight:function(C){Pi(it,C)}},encryptionOptions:b,encryption:Oi,getEncryptor:rl,output:fo,getNumberOfPages:bi,pages:Ot,out:Y,f2:zt,f3:J,getPageInfo:aa,getPageInfoByObjId:Ln,getCurrentPageInfo:Pn,getPDFVersion:N,Point:zo,Rectangle:Zr,Matrix:Qe,hasHotfix:oa},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return vo(it)},set:function(C){Uo(it,C)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return yo(it)},set:function(C){Pi(it,C)},enumerable:!0,configurable:!0}),xn.call(x,Ht),Xe="F1",il(o,n),Ne.publish("initialized"),x}Au.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Au.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Au.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Au.prototype.processOwnerPassword=function(t,e){return Td(Bd(e).substr(0,5),t)},Au.prototype.encryptor=function(t,e){var n=Bd(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return Td(n,i)}},Oh.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||fi(t)!==fi(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},wn.API={events:[]},wn.version="3.0.0";var Hi=wn.API,lp=1,cu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},En=function(t){return t.toFixed(2)},bl=function(t){return t.toFixed(5)};Hi.__acroform__={};var Vs=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},ug=function(t){return t*lp},wa=function(t){var e=new Q1,n=nn.internal.getHeight(t)||0,i=nn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(En(i)),Number(En(n))],e},VL=Hi.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},HL=Hi.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},GL=Hi.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Xi=Hi.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return GL(t,e-1)},Qi=Hi.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return VL(t,e-1)},tr=Hi.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return HL(t,e-1)},WL=Hi.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,o=t[0],a=t[1],l=t[2],f=t[3],p={};return p.lowerLeft_X=n(o)||0,p.lowerLeft_Y=i(a+f)||0,p.upperRight_X=n(o+l)||0,p.upperRight_Y=i(a)||0,[Number(En(p.lowerLeft_X)),Number(En(p.lowerLeft_Y)),Number(En(p.upperRight_X)),Number(En(p.upperRight_Y))]},ZL=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=Dd(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+En(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=wa(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},Dd=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map(function(J){return J.split(`
`)}):o.map(function(J){return[J]});var a=n,l=nn.internal.getHeight(t)||0;l=l<0?-l:l;var f=nn.internal.getWidth(t)||0;f=f<0?-f:f;var p=function(J,Z,Et){if(J+1<o.length){var Bt=Z+" "+o[J+1][0];return ih(Bt,t,Et).width<=f-4}return!1};a++;t:for(;a>0;){e="",a--;var v,b,w=ih("3",t,a).height,S=t.multiline?l-a:(l-w)/2,x=S+=2,R=0,N=0,j=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+ih(e,t,a=12).width+", FieldWidth:"+f+`
`;break}for(var U="",W=0,X=0;X<o.length;X++)if(o.hasOwnProperty(X)){var St=!1;if(o[X].length!==1&&j!==o[X].length-1){if((w+2)*(W+2)+2>l)continue t;U+=o[X][j],St=!0,N=X,X--}else{U=(U+=o[X][j]+" ").substr(U.length-1)==" "?U.substr(0,U.length-1):U;var Mt=parseInt(X),Nt=p(Mt,U,a),Lt=X>=o.length-1;if(Nt&&!Lt){U+=" ",j=0;continue}if(Nt||Lt){if(Lt)N=Mt;else if(t.multiline&&(w+2)*(W+2)+2>l)continue t}else{if(!t.multiline||(w+2)*(W+2)+2>l)continue t;N=Mt}}for(var gt="",_t=R;_t<=N;_t++){var zt=o[_t];if(t.multiline){if(_t===N){gt+=zt[j]+" ",j=(j+1)%zt.length;continue}if(_t===R){gt+=zt[zt.length-1]+" ";continue}}gt+=zt[0]+" "}switch(gt=gt.substr(gt.length-1)==" "?gt.substr(0,gt.length-1):gt,b=ih(gt,t,a).width,t.textAlign){case"right":v=f-b-2;break;case"center":v=(f-b)/2;break;case"left":default:v=2}e+=En(v)+" "+En(x)+` Td
`,e+="("+cu(gt)+`) Tj
`,e+=-En(v)+` 0 Td
`,x=-(a+2),b=0,R=St?N:N+1,W++,U=""}break}return i.text=e,i.fontSize=a,i},ih=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},KL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},YL=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},JL=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,o=t[n];e.internal.newObjectDeferredBegin(o.objId,!0),fi(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[i]}},XL=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ta.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(KL)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");lp=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new tv,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];a.objId=void 0,a.hasAnnotation&&YL(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,o){var a=!i;for(var l in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var f=i[l],p=[],v=f.Rect;if(f.Rect&&(f.Rect=WL(f.Rect,o)),o.internal.newObjectDeferredBegin(f.objId,!0),f.DA=nn.createDefaultAppearanceStream(f),fi(f)==="object"&&typeof f.getKeyValueListForStream=="function"&&(p=f.getKeyValueListForStream()),f.Rect=v,f.hasAppearanceStream&&!f.appearanceStreamContent){var b=ZL(f);p.push({key:"AP",value:"<</N "+b+">>"}),o.internal.acroformPlugin.xForms.push(b)}if(f.appearanceStreamContent){var w="";for(var S in f.appearanceStreamContent)if(f.appearanceStreamContent.hasOwnProperty(S)){var x=f.appearanceStreamContent[S];if(w+="/"+S+" ",w+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var R=x[l];typeof R=="function"&&(R=R.call(o,f)),w+="/"+l+" "+R+" ",o.internal.acroformPlugin.xForms.indexOf(R)>=0||o.internal.acroformPlugin.xForms.push(R)}}else typeof(R=x)=="function"&&(R=R.call(o,f)),w+="/"+l+" "+R,o.internal.acroformPlugin.xForms.indexOf(R)>=0||o.internal.acroformPlugin.xForms.push(R);w+=">>"}p.push({key:"AP",value:`<<
`+w+">>"})}o.internal.putStream({additionalKeyValues:p,objectId:f.objId}),o.internal.out("endobj")}a&&JL(o.internal.acroformPlugin.xForms,o)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},X1=Hi.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(l){return l};if(Array.isArray(t)){for(var o="[",a=0;a<t.length;a++)switch(a!==0&&(o+=" "),fi(t[a])){case"boolean":case"number":case"object":o+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),o+="("+cu(i(t[a].toString()))+")"):o+=t[a].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Wf=function(t,e,n){var i=function(o){return o};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+cu(i(t))+")"},Ca=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ca.prototype.toString=function(){return this.objId+" 0 R"},Ca.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ca.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],o=this[i];o&&(Array.isArray(o)?t.push({key:i,value:X1(o,this.objId,this.scope)}):o instanceof Ca?(o.scope=this.scope,t.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:i,value:o}))}return t};var Q1=function(){Ca.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Vs(Q1,Ca);var tv=function(){Ca.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+cu(n(t))+")"}},set:function(n){t=n}})};Vs(tv,Ca);var ta=function t(){Ca.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(U){if(isNaN(U))throw new Error('Invalid value "'+U+'" for attribute F supplied.');e=U}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xi(e,3)},set:function(U){U?this.F=Qi(e,3):this.F=tr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(U){if(isNaN(U))throw new Error('Invalid value "'+U+'" for attribute Ff supplied.');n=U}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(U){i=U!==void 0?U:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(U){i[0]=U}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(U){i[1]=U}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(U){i[2]=U}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(U){i[3]=U}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(U){switch(U){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=U;break;default:throw new Error('Invalid value "'+U+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Rh)return;a="FieldObject"+t.FieldNum++}var U=function(W){return W};return this.scope&&(U=this.scope.internal.getEncryptor(this.objId)),"("+cu(U(a))+")"},set:function(U){a=U.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(U){a=U}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(U){l=U}});var f="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return f},set:function(U){f=U}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(U){p=U}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/lp:v},set:function(U){v=U}});var b="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return b},set:function(U){b=U}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof Rh||this instanceof ru))return Wf(w,this.objId,this.scope)},set:function(U){U=U.toString(),w=U}});var S=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Dr?S:Wf(S,this.objId,this.scope)},set:function(U){U=U.toString(),S=this instanceof Dr?U:U.substr(0,1)==="("?xu(U.substr(1,U.length-2)):xu(U)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dr?xu(S.substr(1,S.length-1)):S},set:function(U){U=U.toString(),S=this instanceof Dr?"/"+U:U}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(U){this.V=U}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Dr?x:Wf(x,this.objId,this.scope)},set:function(U){U=U.toString(),x=this instanceof Dr?U:U.substr(0,1)==="("?xu(U.substr(1,U.length-2)):xu(U)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Dr?xu(x.substr(1,x.length-1)):x},set:function(U){U=U.toString(),x=this instanceof Dr?"/"+U:U}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var R,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(U){U=!!U,N=U}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(R)return R},set:function(U){R=U}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,1)},set:function(U){U?this.Ff=Qi(this.Ff,1):this.Ff=tr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,2)},set:function(U){U?this.Ff=Qi(this.Ff,2):this.Ff=tr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,3)},set:function(U){U?this.Ff=Qi(this.Ff,3):this.Ff=tr(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(U){if([0,1,2].indexOf(U)===-1)throw new Error('Invalid value "'+U+'" for attribute Q supplied.');j=U}}),Object.defineProperty(this,"textAlign",{get:function(){var U;switch(j){case 0:default:U="left";break;case 1:U="center";break;case 2:U="right"}return U},configurable:!0,enumerable:!0,set:function(U){switch(U){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};Vs(ta,Ca);var Ru=function(){ta.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return X1(e,this.objId,this.scope)},set:function(n){var i,o;o=[],typeof(i=n)=="string"&&(o=function(a,l,f){f||(f=1);for(var p,v=[];p=l.exec(a);)v.push(p[f]);return v}(i,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,18)},set:function(n){n?this.Ff=Qi(this.Ff,18):this.Ff=tr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Qi(this.Ff,19):this.Ff=tr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,20)},set:function(n){n?(this.Ff=Qi(this.Ff,20),e.sort()):this.Ff=tr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,22)},set:function(n){n?this.Ff=Qi(this.Ff,22):this.Ff=tr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,23)},set:function(n){n?this.Ff=Qi(this.Ff,23):this.Ff=tr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,27)},set:function(n){n?this.Ff=Qi(this.Ff,27):this.Ff=tr(this.Ff,27)}}),this.hasAppearanceStream=!1};Vs(Ru,ta);var Iu=function(){Ru.call(this),this.fontName="helvetica",this.combo=!1};Vs(Iu,Ru);var Fu=function(){Iu.call(this),this.combo=!0};Vs(Fu,Iu);var mh=function(){Fu.call(this),this.edit=!0};Vs(mh,Fu);var Dr=function(){ta.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,15)},set:function(n){n?this.Ff=Qi(this.Ff,15):this.Ff=tr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,16)},set:function(n){n?this.Ff=Qi(this.Ff,16):this.Ff=tr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,17)},set:function(n){n?this.Ff=Qi(this.Ff,17):this.Ff=tr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,26)},set:function(n){n?this.Ff=Qi(this.Ff,26):this.Ff=tr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,o=[];for(i in o.push("<<"),e)o.push("/"+i+" ("+cu(n(e[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){fi(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Vs(Dr,ta);var vh=function(){Dr.call(this),this.pushButton=!0};Vs(vh,Dr);var ju=function(){Dr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Vs(ju,Dr);var Rh=function(){var t,e;ta.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(f){return f};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var a,l=[];for(a in l.push("<<"),i)l.push("/"+a+" ("+cu(o(i[a]))+")");return l.push(">>"),l.join(`
`)},set:function(o){fi(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=nn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Vs(Rh,ta),ju.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},ju.prototype.createOption=function(t){var e=new Rh;return e.Parent=this,e.optionName=t,this.Kids.push(e),QL.call(this.scope,e),e};var yh=function(){Dr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=nn.CheckBox.createAppearanceStream()};Vs(yh,Dr);var ru=function(){ta.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,13)},set:function(e){e?this.Ff=Qi(this.Ff,13):this.Ff=tr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,21)},set:function(e){e?this.Ff=Qi(this.Ff,21):this.Ff=tr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,23)},set:function(e){e?this.Ff=Qi(this.Ff,23):this.Ff=tr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,24)},set:function(e){e?this.Ff=Qi(this.Ff,24):this.Ff=tr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,25)},set:function(e){e?this.Ff=Qi(this.Ff,25):this.Ff=tr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,26)},set:function(e){e?this.Ff=Qi(this.Ff,26):this.Ff=tr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Vs(ru,ta);var _h=function(){ru.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xi(this.Ff,14)},set:function(t){t?this.Ff=Qi(this.Ff,14):this.Ff=tr(this.Ff,14)}}),this.password=!0};Vs(_h,ru);var nn={CheckBox:{createAppearanceStream:function(){return{N:{On:nn.CheckBox.YesNormal},D:{On:nn.CheckBox.YesPushDown,Off:nn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),a=Dd(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+En(nn.internal.getWidth(t))+" "+En(nn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+En(a.fontSize)+" Tf "+o),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=wa(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=[],a=nn.internal.getHeight(t),l=nn.internal.getWidth(t),f=Dd(t,t.caption);return o.push("1 g"),o.push("0 0 "+En(l)+" "+En(a)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+En(l-1)+" "+En(a-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+En(f.fontSize)+" Tf "+i),o.push(f.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+En(nn.internal.getWidth(t))+" "+En(nn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:nn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=nn.RadioButton.Circle.YesNormal,e.D[t]=nn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=nn.internal.getWidth(t)<=nn.internal.getHeight(t)?nn.internal.getWidth(t)/4:nn.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=nn.internal.Bezier_C,a=Number((i*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+bl(nn.internal.getWidth(t)/2)+" "+bl(nn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=nn.internal.getWidth(t)<=nn.internal.getHeight(t)?nn.internal.getWidth(t)/4:nn.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),a=Number((o*nn.internal.Bezier_C).toFixed(5)),l=Number((i*nn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+bl(nn.internal.getWidth(t)/2)+" "+bl(nn.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+bl(nn.internal.getWidth(t)/2)+" "+bl(nn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=nn.internal.getWidth(t)<=nn.internal.getHeight(t)?nn.internal.getWidth(t)/4:nn.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),a=Number((o*nn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+bl(nn.internal.getWidth(t)/2)+" "+bl(nn.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+a+" "+a+" "+o+" 0 "+o+" c"),n.push("-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c"),n.push("-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c"),n.push(a+" -"+o+" "+o+" -"+a+" "+o+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:nn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=nn.RadioButton.Cross.YesNormal,e.D[t]=nn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=wa(t);e.scope=t.scope;var n=[],i=nn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+En(nn.internal.getWidth(t)-2)+" "+En(nn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(En(i.x1.x)+" "+En(i.x1.y)+" m"),n.push(En(i.x2.x)+" "+En(i.x2.y)+" l"),n.push(En(i.x4.x)+" "+En(i.x4.y)+" m"),n.push(En(i.x3.x)+" "+En(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=nn.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+En(nn.internal.getWidth(t))+" "+En(nn.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+En(nn.internal.getWidth(t)-2)+" "+En(nn.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(En(n.x1.x)+" "+En(n.x1.y)+" m"),i.push(En(n.x2.x)+" "+En(n.x2.y)+" l"),i.push(En(n.x4.x)+" "+En(n.x4.y)+" m"),i.push(En(n.x3.x)+" "+En(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=wa(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+En(nn.internal.getWidth(t))+" "+En(nn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};nn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=nn.internal.getWidth(t),n=nn.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},nn.internal.getWidth=function(t){var e=0;return fi(t)==="object"&&(e=ug(t.Rect[2])),e},nn.internal.getHeight=function(t){var e=0;return fi(t)==="object"&&(e=ug(t.Rect[3])),e};var QL=Hi.addField=function(t){if(XL(this,t),!(t instanceof ta))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Hi.AcroFormChoiceField=Ru,Hi.AcroFormListBox=Iu,Hi.AcroFormComboBox=Fu,Hi.AcroFormEditBox=mh,Hi.AcroFormButton=Dr,Hi.AcroFormPushButton=vh,Hi.AcroFormRadioButton=ju,Hi.AcroFormCheckBox=yh,Hi.AcroFormTextField=ru,Hi.AcroFormPasswordField=_h,Hi.AcroFormAppearance=nn,Hi.AcroForm={ChoiceField:Ru,ListBox:Iu,ComboBox:Fu,EditBox:mh,Button:Dr,PushButton:vh,RadioButton:ju,CheckBox:yh,TextField:ru,PasswordField:_h,Appearance:nn},wn.AcroForm={ChoiceField:Ru,ListBox:Iu,ComboBox:Fu,EditBox:mh,Button:Dr,PushButton:vh,RadioButton:ju,CheckBox:yh,TextField:ru,PasswordField:_h,Appearance:nn};wn.AcroForm;function ev(t){return t.reduce(function(e,n,i){return e[n]=i,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(J,Z){var Et,Bt,A,H,V,z=e;if((Z=Z||e)==="RGBA"||J.data!==void 0&&J.data instanceof Uint8ClampedArray&&"height"in J&&"width"in J)return"RGBA";if(Nt(J))for(V in n)for(A=n[V],Et=0;Et<A.length;Et+=1){for(H=!0,Bt=0;Bt<A[Et].length;Bt+=1)if(A[Et][Bt]!==void 0&&A[Et][Bt]!==J[Bt]){H=!1;break}if(H===!0){z=V;break}}else for(V in n)for(A=n[V],Et=0;Et<A.length;Et+=1){for(H=!0,Bt=0;Bt<A[Et].length;Bt+=1)if(A[Et][Bt]!==void 0&&A[Et][Bt]!==J.charCodeAt(Bt)){H=!1;break}if(H===!0){z=V;break}}return z===e&&Z!==e&&(z=Z),z},o=function J(Z){for(var Et=this.internal.write,Bt=this.internal.putStream,A=(0,this.internal.getFilters)();A.indexOf("FlateEncode")!==-1;)A.splice(A.indexOf("FlateEncode"),1);Z.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:Z.width}),H.push({key:"Height",value:Z.height}),Z.colorSpace===j.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Z.palette.length/3-1)+" "+("sMask"in Z&&Z.sMask!==void 0?Z.objectId+2:Z.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+Z.colorSpace}),Z.colorSpace===j.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:Z.bitsPerComponent}),"decodeParameters"in Z&&Z.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+Z.decodeParameters+">>"}),"transparency"in Z&&Array.isArray(Z.transparency)){for(var V="",z=0,mt=Z.transparency.length;z<mt;z++)V+=Z.transparency[z]+" "+Z.transparency[z]+" ";H.push({key:"Mask",value:"["+V+"]"})}Z.sMask!==void 0&&H.push({key:"SMask",value:Z.objectId+1+" 0 R"});var ft=Z.filter!==void 0?["/"+Z.filter]:void 0;if(Bt({data:Z.data,additionalKeyValues:H,alreadyAppliedFilters:ft,objectId:Z.objectId}),Et("endobj"),"sMask"in Z&&Z.sMask!==void 0){var ht="/Predictor "+Z.predictor+" /Colors 1 /BitsPerComponent "+Z.bitsPerComponent+" /Columns "+Z.width,I={width:Z.width,height:Z.height,colorSpace:"DeviceGray",bitsPerComponent:Z.bitsPerComponent,decodeParameters:ht,data:Z.sMask};"filter"in Z&&(I.filter=Z.filter),J.call(this,I)}if(Z.colorSpace===j.INDEXED){var it=this.internal.newObject();Bt({data:gt(new Uint8Array(Z.palette)),objectId:it}),Et("endobj")}},a=function(){var J=this.internal.collections.addImage_images;for(var Z in J)o.call(this,J[Z])},l=function(){var J,Z=this.internal.collections.addImage_images,Et=this.internal.write;for(var Bt in Z)Et("/I"+(J=Z[Bt]).index,J.objectId,"0","R")},f=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",l))},p=function(){var J=this.internal.collections.addImage_images;return f.call(this),J},v=function(){return Object.keys(this.internal.collections.addImage_images).length},b=function(J){return typeof t["process"+J.toUpperCase()]=="function"},w=function(J){return fi(J)==="object"&&J.nodeType===1},S=function(J,Z){if(J.nodeName==="IMG"&&J.hasAttribute("src")){var Et=""+J.getAttribute("src");if(Et.indexOf("data:image/")===0)return bc(unescape(Et).split("base64,").pop());var Bt=t.loadFile(Et,!0);if(Bt!==void 0)return Bt}if(J.nodeName==="CANVAS"){if(J.width===0||J.height===0)throw new Error("Given canvas must have data. Canvas width: "+J.width+", height: "+J.height);var A;switch(Z){case"PNG":A="image/png";break;case"WEBP":A="image/webp";break;case"JPEG":case"JPG":default:A="image/jpeg"}return bc(J.toDataURL(A,1).split("base64,").pop())}},x=function(J){var Z=this.internal.collections.addImage_images;if(Z){for(var Et in Z)if(J===Z[Et].alias)return Z[Et]}},R=function(J,Z,Et){return J||Z||(J=-96,Z=-96),J<0&&(J=-1*Et.width*72/J/this.internal.scaleFactor),Z<0&&(Z=-1*Et.height*72/Z/this.internal.scaleFactor),J===0&&(J=Z*Et.width/Et.height),Z===0&&(Z=J*Et.height/Et.width),[J,Z]},N=function(J,Z,Et,Bt,A,H){var V=R.call(this,Et,Bt,A),z=this.internal.getCoordinateString,mt=this.internal.getVerticalCoordinateString,ft=p.call(this);if(Et=V[0],Bt=V[1],ft[A.index]=A,H){H*=Math.PI/180;var ht=Math.cos(H),I=Math.sin(H),it=function($){return $.toFixed(4)},rt=[it(ht),it(I),it(-1*I),it(ht),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,z(J),mt(Z+Bt),"cm"].join(" ")),this.internal.write(rt.join(" ")),this.internal.write([z(Et),"0","0",z(Bt),"0","0","cm"].join(" "))):this.internal.write([z(Et),"0","0",z(Bt),z(J),mt(Z+Bt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+A.index+" Do"),this.internal.write("Q")},j=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var U=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},W=t.__addimage__.sHashCode=function(J){var Z,Et,Bt=0;if(typeof J=="string")for(Et=J.length,Z=0;Z<Et;Z++)Bt=(Bt<<5)-Bt+J.charCodeAt(Z),Bt|=0;else if(Nt(J))for(Et=J.byteLength/2,Z=0;Z<Et;Z++)Bt=(Bt<<5)-Bt+J[Z],Bt|=0;return Bt},X=t.__addimage__.validateStringAsBase64=function(J){(J=J||"").toString().trim();var Z=!0;return J.length===0&&(Z=!1),J.length%4!=0&&(Z=!1),/^[A-Za-z0-9+/]+$/.test(J.substr(0,J.length-2))===!1&&(Z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(J.substr(-2))===!1&&(Z=!1),Z},St=t.__addimage__.extractImageFromDataUrl=function(J){var Z=(J=J||"").split("base64,"),Et=null;if(Z.length===2){var Bt=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Z[0]);Array.isArray(Bt)&&(Et={mimeType:Bt[1],charset:Bt[2],data:Z[1]})}return Et},Mt=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(J){return Mt()&&J instanceof ArrayBuffer};var Nt=t.__addimage__.isArrayBufferView=function(J){return Mt()&&typeof Uint32Array<"u"&&(J instanceof Int8Array||J instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&J instanceof Uint8ClampedArray||J instanceof Int16Array||J instanceof Uint16Array||J instanceof Int32Array||J instanceof Uint32Array||J instanceof Float32Array||J instanceof Float64Array)},Lt=t.__addimage__.binaryStringToUint8Array=function(J){for(var Z=J.length,Et=new Uint8Array(Z),Bt=0;Bt<Z;Bt++)Et[Bt]=J.charCodeAt(Bt);return Et},gt=t.__addimage__.arrayBufferToBinaryString=function(J){for(var Z="",Et=Nt(J)?J:new Uint8Array(J),Bt=0;Bt<Et.length;Bt+=8192)Z+=String.fromCharCode.apply(null,Et.subarray(Bt,Bt+8192));return Z};t.addImage=function(){var J,Z,Et,Bt,A,H,V,z,mt;if(typeof arguments[1]=="number"?(Z=e,Et=arguments[1],Bt=arguments[2],A=arguments[3],H=arguments[4],V=arguments[5],z=arguments[6],mt=arguments[7]):(Z=arguments[1],Et=arguments[2],Bt=arguments[3],A=arguments[4],H=arguments[5],V=arguments[6],z=arguments[7],mt=arguments[8]),fi(J=arguments[0])==="object"&&!w(J)&&"imageData"in J){var ft=J;J=ft.imageData,Z=ft.format||Z||e,Et=ft.x||Et||0,Bt=ft.y||Bt||0,A=ft.w||ft.width||A,H=ft.h||ft.height||H,V=ft.alias||V,z=ft.compression||z,mt=ft.rotation||ft.angle||mt}var ht=this.internal.getFilters();if(z===void 0&&ht.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(Et)||isNaN(Bt))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var I=_t.call(this,J,Z,V,z);return N.call(this,Et,Bt,A,H,I,mt),this};var _t=function(J,Z,Et,Bt){var A,H,V;if(typeof J=="string"&&i(J)===e){J=unescape(J);var z=zt(J,!1);(z!==""||(z=t.loadFile(J,!0))!==void 0)&&(J=z)}if(w(J)&&(J=S(J,Z)),Z=i(J,Z),!b(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(((V=Et)==null||V.length===0)&&(Et=function(mt){return typeof mt=="string"||Nt(mt)?W(mt):Nt(mt.data)?W(mt.data):null}(J)),(A=x.call(this,Et))||(Mt()&&(J instanceof Uint8Array||Z==="RGBA"||(H=J,J=Lt(J))),A=this["process"+Z.toUpperCase()](J,v.call(this),Et,function(mt){return mt&&typeof mt=="string"&&(mt=mt.toUpperCase()),mt in t.image_compression?mt:U.NONE}(Bt),H)),!A)throw new Error("An unknown error occurred whilst processing the image.");return A},zt=t.__addimage__.convertBase64ToBinaryString=function(J,Z){var Et;Z=typeof Z!="boolean"||Z;var Bt,A="";if(typeof J=="string"){Bt=(Et=St(J))!==null?Et.data:J;try{A=bc(Bt)}catch(H){if(Z)throw X(Bt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return A};t.getImageProperties=function(J){var Z,Et,Bt="";if(w(J)&&(J=S(J)),typeof J=="string"&&i(J)===e&&((Bt=zt(J,!1))===""&&(Bt=t.loadFile(J)||""),J=Bt),Et=i(J),!b(Et))throw new Error("addImage does not support files of type '"+Et+"', please ensure that a plugin for '"+Et+"' support is added.");if(!Mt()||J instanceof Uint8Array||(J=Lt(J)),!(Z=this["process"+Et.toUpperCase()](J)))throw new Error("An unknown error occurred whilst processing the image");return Z.fileType=Et,Z}})(wn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};wn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,o,a,l=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(n.objId),v=n.pageContext.annotations,b=!1,w=0;w<v.length&&!b;w++)switch((i=v[w]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(b=!0);break;case"reference":case"text":case"freetext":b=!0}if(b!=0){this.internal.write("/Annots [");for(var S=0;S<v.length;S++){i=v[S];var x=this.internal.pdfEscape,R=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),U=this.internal.getEncryptor(N.objId),W=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(o="/Rect ["+l(i.bounds.x)+" "+f(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+f(i.bounds.y)+"] ")+"/Contents ("+x(U(i.contents))+")",a+=" /Popup "+j.objId+" 0 R",a+=" /P "+p.objId+" 0 R",a+=" /T ("+x(U(W))+") >>",N.content=a;var X=N.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+l(i.bounds.x+30)+" "+f(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+f(i.bounds.y)+"] ")+" /Parent "+X,i.open&&(a+=" /Open true"),a+=" >>",j.content=a,this.internal.write(N.objId,"0 R",j.objId,"0 R");break;case"freetext":o="/Rect ["+l(i.bounds.x)+" "+f(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+f(i.bounds.y+i.bounds.h)+"] ";var St=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+x(R(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+St+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var Mt=this.annotations._nameMap[i.options.name];i.options.pageNumber=Mt.page,i.options.top=Mt.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+x(R(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var Nt=f(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+Nt+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,o,a,l){var f=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;f.pageContext.annotations.push({finalBounds:{x:p(n),y:v(i),w:p(n+o),h:v(i+a)},options:l,type:"link"})},t.textWithLink=function(n,i,o,a){var l,f,p=this.getTextWidth(n),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){f=a.maxWidth;var b=this.splitTextToSize(n,f).length;l=Math.ceil(v*b)}else f=p,l=v;return this.text(n,i,o,a),o+=.2*v,a.align==="center"&&(i-=p/2),a.align==="right"&&(i-=p),this.link(i,o-v,f,l,a),p},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}}(wn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(N){return e[N.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},f=t.__arabicParser__.isArabicEndLetter=function(N){return l(N)&&a(N)&&e[N.charCodeAt(0)].length<=2},p=t.__arabicParser__.isArabicAlfLetter=function(N){return l(N)&&o.indexOf(N.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return l(N)&&a(N)&&e[N.charCodeAt(0)].length>=1};var v=t.__arabicParser__.arabicLetterHasFinalForm=function(N){return l(N)&&a(N)&&e[N.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(N){return l(N)&&a(N)&&e[N.charCodeAt(0)].length>=3};var b=t.__arabicParser__.arabicLetterHasMedialForm=function(N){return l(N)&&a(N)&&e[N.charCodeAt(0)].length==4},w=t.__arabicParser__.resolveLigatures=function(N){var j=0,U=n,W="",X=0;for(j=0;j<N.length;j+=1)U[N.charCodeAt(j)]!==void 0?(X++,typeof(U=U[N.charCodeAt(j)])=="number"&&(W+=String.fromCharCode(U),U=n,X=0),j===N.length-1&&(U=n,W+=N.charAt(j-(X-1)),j-=X-1,X=0)):(U=n,W+=N.charAt(j-X),j-=X,X=0);return W};t.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&i[N.charCodeAt(0)]!==void 0};var S=t.__arabicParser__.getCorrectForm=function(N,j,U){return l(N)?a(N)===!1?-1:!v(N)||!l(j)&&!l(U)||!l(U)&&f(j)||f(N)&&!l(j)||f(N)&&p(j)||f(N)&&f(j)?0:b(N)&&l(j)&&!f(j)&&l(U)&&v(U)?3:f(N)||!l(U)?1:2:-1},x=function(N){var j=0,U=0,W=0,X="",St="",Mt="",Nt=(N=N||"").split("\\s+"),Lt=[];for(j=0;j<Nt.length;j+=1){for(Lt.push(""),U=0;U<Nt[j].length;U+=1)X=Nt[j][U],St=Nt[j][U-1],Mt=Nt[j][U+1],l(X)?(W=S(X,St,Mt),Lt[j]+=W!==-1?String.fromCharCode(e[X.charCodeAt(0)][W]):X):Lt[j]+=X;Lt[j]=w(Lt[j])}return Lt.join(" ")},R=t.__arabicParser__.processArabic=t.processArabic=function(){var N,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,U=[];if(Array.isArray(j)){var W=0;for(U=[],W=0;W<j.length;W+=1)Array.isArray(j[W])?U.push([x(j[W][0]),j[W][1],j[W][2]]):U.push([x(j[W])]);N=U}else N=x(j);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};t.events.push(["preProcessText",R])}(wn.API),wn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(f){n=f}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(f){i=isNaN(f)||Number.isInteger(f)===!1||f<0?150:f,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(f){o=isNaN(f)||Number.isInteger(f)===!1||f<0?300:f,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(f){a=f}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(f){l=f}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var o;if((n=n||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(wn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(N){v=N}});var b=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(N){w=N}});var S=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return S},set:function(N){S=N}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(N){x=N}});var R=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return R},set:function(N){R=N}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(p){return i.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},t.getTextDimensions=function(p,v){i.call(this);var b=(v=v||{}).fontSize||this.getFontSize(),w=v.font||this.getFont(),S=v.scaleFactor||this.internal.scaleFactor,x=0,R=0,N=0,j=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var U=v.maxWidth;U>0?typeof p=="string"?p=this.splitTextToSize(p,U):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(X,St){return X.concat(j.splitTextToSize(St,U))},[])):p=Array.isArray(p)?p:[p];for(var W=0;W<p.length;W++)x<(N=this.getStringUnitWidth(p[W],{font:w})*b)&&(x=N);return x!==0&&(R=p.length),{w:x/=S,h:Math.max((R*b*this.getLineHeightFactor()-b*(this.getLineHeightFactor()-1))/S,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var p=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var p;p=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var v=this.internal.__cell__.lastCell,b=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,S=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===p.lineNumber?(p.x=(v.x||0)+(v.width||0),p.y=v.y||0):v.y+v.height+p.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=w.top,x&&S&&(this.printHeaderRow(p.lineNumber,!0),p.y+=S[0].height)):p.y=v.y+v.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,n===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-b,p.y+b,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+b,{align:"center",baseline:"top",maxWidth:p.width-b-b}):this.text(p.text,p.x+b,p.y+b,{align:"left",baseline:"top",maxWidth:p.width-b-b})),this.internal.__cell__.lastCell=p,this};t.table=function(p,v,b,w,S){if(i.call(this),!b)throw new Error("No data for PDF table.");var x,R,N,j,U=[],W=[],X=[],St={},Mt={},Nt=[],Lt=[],gt=(S=S||{}).autoSize||!1,_t=S.printHeaders!==!1,zt=S.css&&S.css["font-size"]!==void 0?16*S.css["font-size"]:S.fontSize||12,J=S.margins||Object.assign({width:this.getPageWidth()},e),Z=typeof S.padding=="number"?S.padding:3,Et=S.headerBackgroundColor||"#c8c8c8",Bt=S.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=_t,this.internal.__cell__.margins=J,this.internal.__cell__.table_font_size=zt,this.internal.__cell__.padding=Z,this.internal.__cell__.headerBackgroundColor=Et,this.internal.__cell__.headerTextColor=Bt,this.setFontSize(zt),w==null)W=U=Object.keys(b[0]),X=U.map(function(){return"left"});else if(Array.isArray(w)&&fi(w[0])==="object")for(U=w.map(function(ft){return ft.name}),W=w.map(function(ft){return ft.prompt||ft.name||""}),X=w.map(function(ft){return ft.align||"left"}),x=0;x<w.length;x+=1)Mt[w[x].name]=w[x].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(W=U=w,X=U.map(function(){return"left"}));if(gt||Array.isArray(w)&&typeof w[0]=="string")for(x=0;x<U.length;x+=1){for(St[j=U[x]]=b.map(function(ft){return ft[j]}),this.setFont(void 0,"bold"),Nt.push(this.getTextDimensions(W[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),R=St[j],this.setFont(void 0,"normal"),N=0;N<R.length;N+=1)Nt.push(this.getTextDimensions(R[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Mt[j]=Math.max.apply(null,Nt)+Z+Z,Nt=[]}if(_t){var A={};for(x=0;x<U.length;x+=1)A[U[x]]={},A[U[x]].text=W[x],A[U[x]].align=X[x];var H=f.call(this,A,Mt);Lt=U.map(function(ft){return new a(p,v,Mt[ft],H,A[ft].text,void 0,A[ft].align)}),this.setTableHeaderRow(Lt),this.printHeaderRow(1,!1)}var V=w.reduce(function(ft,ht){return ft[ht.name]=ht.align,ft},{});for(x=0;x<b.length;x+=1){"rowStart"in S&&S.rowStart instanceof Function&&S.rowStart({row:x,data:b[x]},this);var z=f.call(this,b[x],Mt);for(N=0;N<U.length;N+=1){var mt=b[x][U[N]];"cellStart"in S&&S.cellStart instanceof Function&&S.cellStart({row:x,col:N,data:mt},this),l.call(this,new a(p,v,Mt[U[N]],z,mt,x+2,V[U[N]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=v,this};var f=function(p,v){var b=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,S=this.internal.scaleFactor;return Object.keys(p).map(function(x){var R=p[x];return this.splitTextToSize(R.hasOwnProperty("text")?R.text:R,v[x]-b-b)},this).map(function(x){return this.getLineHeightFactor()*x.length*w/S+b+b},this).reduce(function(x,R){return Math.max(x,R)},0)};t.setTableHeaderRow=function(p){i.call(this),this.internal.__cell__.tableHeaderRow=p},t.printHeaderRow=function(p,v){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var b;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var S=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){b=this.internal.__cell__.tableHeaderRow[x].clone(),v&&(b.y=this.internal.__cell__.margins.top||0,S.push(b)),b.lineNumber=p;var R=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,b),this.setTextColor(R)}S.length>0&&this.setTableHeaderRow(S),this.setFont(void 0,"normal"),n=!1}}(wn.API);var nv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nd=ev(iv),rv=[100,200,300,400,500,600,700,800,900],tC=ev(rv);function Od(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return nv[a=a||"normal"]?a:"normal"}(t.style),i=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),o=function(a){return typeof Nd[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:n,weight:i,stretch:o,src:t.src||[],ref:t.ref||{name:e,style:[o,n,i].join(" ")}}}function cg(t,e,n,i){var o;for(o=n;o>=0&&o<e.length;o+=i)if(t[e[o]])return t[e[o]];for(o=n;o>=0&&o<e.length;o-=i)if(t[e[o]])return t[e[o]]}var eC={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function fg(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function nC(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},eC,n.genericFontFamilies||{}),a=null,l=null,f=0;f<e.length;++f)if(o[(a=Od(e[f])).family]&&(a.family=o[a.family]),t.hasOwnProperty(a.family)){l=t[a.family];break}if(!(l=l||t[i]))throw new Error("Could not find a font-family for the rule '"+fg(a)+"' and default family '"+i+"'.");if(l=function(p,v){if(v[p])return v[p];var b=Nd[p],w=b<=Nd.normal?-1:1,S=cg(v,iv,b,w);if(!S)throw new Error("Could not find a matching font-stretch value for "+p);return S}(a.stretch,l),l=function(p,v){if(v[p])return v[p];for(var b=nv[p],w=0;w<b.length;++w)if(v[b[w]])return v[b[w]];throw new Error("Could not find a matching font-style for "+p)}(a.style,l),!(l=function(p,v){if(v[p])return v[p];if(p===400&&v[500])return v[500];if(p===500&&v[400])return v[400];var b=tC[p],w=cg(v,rv,b,p<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+p);return w}(a.weight,l)))throw new Error("Failed to resolve a font for the rule '"+fg(a)+"'.");return l}function dg(t){return t.trimLeft()}function iC(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function rC(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var rh,pg,gg,Zf=["times"];(function(t){var e,n,i,o,a,l,f,p,v,b=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new p,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new l,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new l,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,l=this.internal.Point,f=this.internal.Rectangle,p=this.internal.Matrix,v=new b}]);var w=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var it=I;Object.defineProperty(this,"pdf",{get:function(){return it}});var rt=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return rt},set:function(vt){rt=!!vt}});var $=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $},set:function(vt){$=!!vt}});var D=0;Object.defineProperty(this,"posX",{get:function(){return D},set:function(vt){isNaN(vt)||(D=vt)}});var q=0;Object.defineProperty(this,"posY",{get:function(){return q},set:function(vt){isNaN(vt)||(q=vt)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(vt){var Y;typeof vt=="number"?Y=[vt,vt,vt,vt]:((Y=new Array(4))[0]=vt[0],Y[1]=vt.length>=2?vt[1]:Y[0],Y[2]=vt.length>=3?vt[2]:Y[0],Y[3]=vt.length>=4?vt[3]:Y[1]),v.margin=Y}});var dt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return dt},set:function(vt){dt=vt}});var ct=0;Object.defineProperty(this,"lastBreak",{get:function(){return ct},set:function(vt){ct=vt}});var At=[];Object.defineProperty(this,"pageBreaks",{get:function(){return At},set:function(vt){At=vt}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(vt){vt instanceof b&&(v=vt)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(vt){v.path=vt}});var Ot=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ot},set:function(vt){Ot=vt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(vt){var Y;Y=S(vt),this.ctx.fillStyle=Y.style,this.ctx.isFillTransparent=Y.a===0,this.ctx.fillOpacity=Y.a,this.pdf.setFillColor(Y.r,Y.g,Y.b,{a:Y.a}),this.pdf.setTextColor(Y.r,Y.g,Y.b,{a:Y.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(vt){var Y=S(vt);this.ctx.strokeStyle=Y.style,this.ctx.isStrokeTransparent=Y.a===0,this.ctx.strokeOpacity=Y.a,Y.a===0?this.pdf.setDrawColor(255,255,255):(Y.a,this.pdf.setDrawColor(Y.r,Y.g,Y.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(vt){["butt","round","square"].indexOf(vt)!==-1&&(this.ctx.lineCap=vt,this.pdf.setLineCap(vt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(vt){isNaN(vt)||(this.ctx.lineWidth=vt,this.pdf.setLineWidth(vt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(vt){["bevel","round","miter"].indexOf(vt)!==-1&&(this.ctx.lineJoin=vt,this.pdf.setLineJoin(vt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(vt){isNaN(vt)||(this.ctx.miterLimit=vt,this.pdf.setMiterLimit(vt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(vt){this.ctx.textBaseline=vt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(vt){["right","end","center","left","start"].indexOf(vt)!==-1&&(this.ctx.textAlign=vt)}});var G=null;function tt(vt,Y){if(G===null){var $t=function(ee){var Ht=[];return Object.keys(ee).forEach(function(Rt){ee[Rt].forEach(function(wt){var oe=null;switch(wt){case"bold":oe={family:Rt,weight:"bold"};break;case"italic":oe={family:Rt,style:"italic"};break;case"bolditalic":oe={family:Rt,weight:"bold",style:"italic"};break;case"":case"normal":oe={family:Rt}}oe!==null&&(oe.ref={name:Rt,style:wt},Ht.push(oe))})}),Ht}(vt.getFontList());G=function(ee){for(var Ht={},Rt=0;Rt<ee.length;++Rt){var wt=Od(ee[Rt]),oe=wt.family,ne=wt.stretch,xe=wt.style,Ut=wt.weight;Ht[oe]=Ht[oe]||{},Ht[oe][ne]=Ht[oe][ne]||{},Ht[oe][ne][xe]=Ht[oe][ne][xe]||{},Ht[oe][ne][xe][Ut]=wt}return Ht}($t.concat(Y))}return G}var yt=null;Object.defineProperty(this,"fontFaces",{get:function(){return yt},set:function(vt){G=null,yt=vt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(vt){var Y;if(this.ctx.font=vt,(Y=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(vt))!==null){var $t=Y[1],ee=(Y[2],Y[3]),Ht=Y[4],Rt=(Y[5],Y[6]),wt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ht)[2];Ht=Math.floor(wt==="px"?parseFloat(Ht)*this.pdf.internal.scaleFactor:wt==="em"?parseFloat(Ht)*this.pdf.getFontSize():parseFloat(Ht)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ht);var oe=function(ze){var Xe,Oe,an=[],gn=ze.trim();if(gn==="")return Zf;if(gn in hg)return[hg[gn]];for(;gn!=="";){switch(Oe=null,Xe=(gn=dg(gn)).charAt(0)){case'"':case"'":Oe=iC(gn.substring(1),Xe);break;default:Oe=rC(gn)}if(Oe===null||(an.push(Oe[0]),(gn=dg(Oe[1]))!==""&&gn.charAt(0)!==","))return Zf;gn=gn.replace(/^,/,"")}return an}(Rt);if(this.fontFaces){var ne=nC(tt(this.pdf,this.fontFaces),oe.map(function(ze){return{family:ze,stretch:"normal",weight:ee,style:$t}}));this.pdf.setFont(ne.ref.name,ne.ref.style)}else{var xe="";(ee==="bold"||parseInt(ee,10)>=700||$t==="bold")&&(xe="bold"),$t==="italic"&&(xe+="italic"),xe.length===0&&(xe="normal");for(var Ut="",te={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<oe.length;qe++){if(this.pdf.internal.getFont(oe[qe],xe,{noFallback:!0,disableWarning:!0})!==void 0){Ut=oe[qe];break}if(xe==="bolditalic"&&this.pdf.internal.getFont(oe[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ut=oe[qe],xe="bold";else if(this.pdf.internal.getFont(oe[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ut=oe[qe],xe="normal";break}}if(Ut===""){for(var He=0;He<oe.length;He++)if(te[oe[He]]){Ut=te[oe[He]];break}}Ut=Ut===""?"Times":Ut,this.pdf.setFont(Ut,xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(vt){this.ctx.globalCompositeOperation=vt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(vt){this.ctx.globalAlpha=vt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(vt){this.ctx.lineDashOffset=vt,ht.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(vt){this.ctx.lineDash=vt,ht.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(vt){this.ctx.ignoreClearRect=!!vt}})};w.prototype.setLineDash=function(I){this.lineDash=I},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){St.call(this,"fill",!1)},w.prototype.stroke=function(){St.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(I,it){if(isNaN(I)||isNaN(it))throw gi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var rt=this.ctx.transform.applyToPoint(new l(I,it));this.path.push({type:"mt",x:rt.x,y:rt.y}),this.ctx.lastPoint=new l(I,it)},w.prototype.closePath=function(){var I=new l(0,0),it=0;for(it=this.path.length-1;it!==-1;it--)if(this.path[it].type==="begin"&&fi(this.path[it+1])==="object"&&typeof this.path[it+1].x=="number"){I=new l(this.path[it+1].x,this.path[it+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(I.x,I.y)},w.prototype.lineTo=function(I,it){if(isNaN(I)||isNaN(it))throw gi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var rt=this.ctx.transform.applyToPoint(new l(I,it));this.path.push({type:"lt",x:rt.x,y:rt.y}),this.ctx.lastPoint=new l(rt.x,rt.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),St.call(this,null,!0)},w.prototype.quadraticCurveTo=function(I,it,rt,$){if(isNaN(rt)||isNaN($)||isNaN(I)||isNaN(it))throw gi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var D=this.ctx.transform.applyToPoint(new l(rt,$)),q=this.ctx.transform.applyToPoint(new l(I,it));this.path.push({type:"qct",x1:q.x,y1:q.y,x:D.x,y:D.y}),this.ctx.lastPoint=new l(D.x,D.y)},w.prototype.bezierCurveTo=function(I,it,rt,$,D,q){if(isNaN(D)||isNaN(q)||isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw gi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var dt=this.ctx.transform.applyToPoint(new l(D,q)),ct=this.ctx.transform.applyToPoint(new l(I,it)),At=this.ctx.transform.applyToPoint(new l(rt,$));this.path.push({type:"bct",x1:ct.x,y1:ct.y,x2:At.x,y2:At.y,x:dt.x,y:dt.y}),this.ctx.lastPoint=new l(dt.x,dt.y)},w.prototype.arc=function(I,it,rt,$,D,q){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($)||isNaN(D))throw gi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(q=!!q,!this.ctx.transform.isIdentity){var dt=this.ctx.transform.applyToPoint(new l(I,it));I=dt.x,it=dt.y;var ct=this.ctx.transform.applyToPoint(new l(0,rt)),At=this.ctx.transform.applyToPoint(new l(0,0));rt=Math.sqrt(Math.pow(ct.x-At.x,2)+Math.pow(ct.y-At.y,2))}Math.abs(D-$)>=2*Math.PI&&($=0,D=2*Math.PI),this.path.push({type:"arc",x:I,y:it,radius:rt,startAngle:$,endAngle:D,counterclockwise:q})},w.prototype.arcTo=function(I,it,rt,$,D){throw new Error("arcTo not implemented.")},w.prototype.rect=function(I,it,rt,$){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw gi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,it),this.lineTo(I+rt,it),this.lineTo(I+rt,it+$),this.lineTo(I,it+$),this.lineTo(I,it),this.lineTo(I+rt,it),this.lineTo(I,it)},w.prototype.fillRect=function(I,it,rt,$){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw gi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var D={};this.lineCap!=="butt"&&(D.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(D.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,it,rt,$),this.fill(),D.hasOwnProperty("lineCap")&&(this.lineCap=D.lineCap),D.hasOwnProperty("lineJoin")&&(this.lineJoin=D.lineJoin)}},w.prototype.strokeRect=function(I,it,rt,$){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw gi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");R.call(this)||(this.beginPath(),this.rect(I,it,rt,$),this.stroke())},w.prototype.clearRect=function(I,it,rt,$){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($))throw gi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,it,rt,$))},w.prototype.save=function(I){I=typeof I!="boolean"||I;for(var it=this.pdf.internal.getCurrentPageInfo().pageNumber,rt=0;rt<this.pdf.internal.getNumberOfPages();rt++)this.pdf.setPage(rt+1),this.pdf.internal.out("q");if(this.pdf.setPage(it),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var $=new b(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$}},w.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var it=this.pdf.internal.getCurrentPageInfo().pageNumber,rt=0;rt<this.pdf.internal.getNumberOfPages();rt++)this.pdf.setPage(rt+1),this.pdf.internal.out("Q");this.pdf.setPage(it),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var S=function(I){var it,rt,$,D;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))it=0,rt=0,$=0,D=0;else{var q=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(q!==null)it=parseInt(q[1]),rt=parseInt(q[2]),$=parseInt(q[3]),D=1;else if((q=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)it=parseInt(q[1]),rt=parseInt(q[2]),$=parseInt(q[3]),D=parseFloat(q[4]);else{if(D=1,typeof I=="string"&&I.charAt(0)!=="#"){var dt=new K1(I);I=dt.ok?dt.toHex():"#000000"}I.length===4?(it=I.substring(1,2),it+=it,rt=I.substring(2,3),rt+=rt,$=I.substring(3,4),$+=$):(it=I.substring(1,3),rt=I.substring(3,5),$=I.substring(5,7)),it=parseInt(it,16),rt=parseInt(rt,16),$=parseInt($,16)}}return{r:it,g:rt,b:$,a:D,style:I}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},R=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(I,it,rt,$){if(isNaN(it)||isNaN(rt)||typeof I!="string")throw gi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($=isNaN($)?void 0:$,!x.call(this)){var D=z(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;Z.call(this,{text:I,x:it,y:rt,scale:q,angle:D,align:this.textAlign,maxWidth:$})}},w.prototype.strokeText=function(I,it,rt,$){if(isNaN(it)||isNaN(rt)||typeof I!="string")throw gi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!R.call(this)){$=isNaN($)?void 0:$;var D=z(this.ctx.transform.rotation),q=this.ctx.transform.scaleX;Z.call(this,{text:I,x:it,y:rt,scale:q,renderingMode:"stroke",angle:D,align:this.textAlign,maxWidth:$})}},w.prototype.measureText=function(I){if(typeof I!="string")throw gi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var it=this.pdf,rt=this.pdf.internal.scaleFactor,$=it.internal.getFontSize(),D=it.getStringUnitWidth(I)*$/it.internal.scaleFactor,q=function(dt){var ct=(dt=dt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ct}}),this};return new q({width:D*=Math.round(96*rt/72*1e4)/1e4})},w.prototype.scale=function(I,it){if(isNaN(I)||isNaN(it))throw gi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var rt=new p(I,0,0,it,0,0);this.ctx.transform=this.ctx.transform.multiply(rt)},w.prototype.rotate=function(I){if(isNaN(I))throw gi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var it=new p(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(it)},w.prototype.translate=function(I,it){if(isNaN(I)||isNaN(it))throw gi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var rt=new p(1,0,0,1,I,it);this.ctx.transform=this.ctx.transform.multiply(rt)},w.prototype.transform=function(I,it,rt,$,D,q){if(isNaN(I)||isNaN(it)||isNaN(rt)||isNaN($)||isNaN(D)||isNaN(q))throw gi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var dt=new p(I,it,rt,$,D,q);this.ctx.transform=this.ctx.transform.multiply(dt)},w.prototype.setTransform=function(I,it,rt,$,D,q){I=isNaN(I)?1:I,it=isNaN(it)?0:it,rt=isNaN(rt)?0:rt,$=isNaN($)?1:$,D=isNaN(D)?0:D,q=isNaN(q)?0:q,this.ctx.transform=new p(I,it,rt,$,D,q)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(I,it,rt,$,D,q,dt,ct,At){var Ot=this.pdf.getImageProperties(I),G=1,tt=1,yt=1,vt=1;$!==void 0&&ct!==void 0&&(yt=ct/$,vt=At/D,G=Ot.width/$*ct/$,tt=Ot.height/D*At/D),q===void 0&&(q=it,dt=rt,it=0,rt=0),$!==void 0&&ct===void 0&&(ct=$,At=D),$===void 0&&ct===void 0&&(ct=Ot.width,At=Ot.height);for(var Y,$t=this.ctx.transform.decompose(),ee=z($t.rotate.shx),Ht=new p,Rt=(Ht=(Ht=(Ht=Ht.multiply($t.translate)).multiply($t.skew)).multiply($t.scale)).applyToRectangle(new f(q-it*yt,dt-rt*vt,$*G,D*tt)),wt=j.call(this,Rt),oe=[],ne=0;ne<wt.length;ne+=1)oe.indexOf(wt[ne])===-1&&oe.push(wt[ne]);if(X(oe),this.autoPaging)for(var xe=oe[0],Ut=oe[oe.length-1],te=xe;te<Ut+1;te++){this.pdf.setPage(te);var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=te===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Oe=te===1?0:ze+(te-2)*Xe;if(this.ctx.clip_path.length!==0){var an=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=W(Y,this.posX+this.margin[3],-Oe+He+this.ctx.prevPageLastElemOffset),Mt.call(this,"fill",!0),this.path=an}var gn=JSON.parse(JSON.stringify(Rt));gn=W([gn],this.posX+this.margin[3],-Oe+He+this.ctx.prevPageLastElemOffset)[0];var di=(te>xe||te<Ut)&&N.call(this);di&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,Xe,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",gn.x,gn.y,gn.w,gn.h,null,null,ee),di&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",Rt.x,Rt.y,Rt.w,Rt.h,null,null,ee)};var j=function(I,it,rt){var $=[];it=it||this.pdf.internal.pageSize.width,rt=rt||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var D=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":$.push(Math.floor((I.y+D)/rt)+1);break;case"arc":$.push(Math.floor((I.y+D-I.radius)/rt)+1),$.push(Math.floor((I.y+D+I.radius)/rt)+1);break;case"qct":var q=mt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);$.push(Math.floor((q.y+D)/rt)+1),$.push(Math.floor((q.y+q.h+D)/rt)+1);break;case"bct":var dt=ft(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);$.push(Math.floor((dt.y+D)/rt)+1),$.push(Math.floor((dt.y+dt.h+D)/rt)+1);break;case"rect":$.push(Math.floor((I.y+D)/rt)+1),$.push(Math.floor((I.y+I.h+D)/rt)+1)}for(var ct=0;ct<$.length;ct+=1)for(;this.pdf.internal.getNumberOfPages()<$[ct];)U.call(this);return $},U=function(){var I=this.fillStyle,it=this.strokeStyle,rt=this.font,$=this.lineCap,D=this.lineWidth,q=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=it,this.font=rt,this.lineCap=$,this.lineWidth=D,this.lineJoin=q},W=function(I,it,rt){for(var $=0;$<I.length;$++)switch(I[$].type){case"bct":I[$].x2+=it,I[$].y2+=rt;case"qct":I[$].x1+=it,I[$].y1+=rt;case"mt":case"lt":case"arc":default:I[$].x+=it,I[$].y+=rt}return I},X=function(I){return I.sort(function(it,rt){return it-rt})},St=function(I,it){for(var rt,$,D=this.fillStyle,q=this.strokeStyle,dt=this.lineCap,ct=this.lineWidth,At=Math.abs(ct*this.ctx.transform.scaleX),Ot=this.lineJoin,G=JSON.parse(JSON.stringify(this.path)),tt=JSON.parse(JSON.stringify(this.path)),yt=[],vt=0;vt<tt.length;vt++)if(tt[vt].x!==void 0)for(var Y=j.call(this,tt[vt]),$t=0;$t<Y.length;$t+=1)yt.indexOf(Y[$t])===-1&&yt.push(Y[$t]);for(var ee=0;ee<yt.length;ee++)for(;this.pdf.internal.getNumberOfPages()<yt[ee];)U.call(this);if(X(yt),this.autoPaging)for(var Ht=yt[0],Rt=yt[yt.length-1],wt=Ht;wt<Rt+1;wt++){this.pdf.setPage(wt),this.fillStyle=D,this.strokeStyle=q,this.lineCap=dt,this.lineWidth=At,this.lineJoin=Ot;var oe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ne=wt===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],te=wt===1?0:xe+(wt-2)*Ut;if(this.ctx.clip_path.length!==0){var qe=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=W(rt,this.posX+this.margin[3],-te+ne+this.ctx.prevPageLastElemOffset),Mt.call(this,I,!0),this.path=qe}if($=JSON.parse(JSON.stringify(G)),this.path=W($,this.posX+this.margin[3],-te+ne+this.ctx.prevPageLastElemOffset),it===!1||wt===0){var He=(wt>Ht||wt<Rt)&&N.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],oe,Ut,null).clip().discardPath()),Mt.call(this,I,it),He&&this.pdf.restoreGraphicsState()}this.lineWidth=ct}else this.lineWidth=At,Mt.call(this,I,it),this.lineWidth=ct;this.path=G},Mt=function(I,it){if((I!=="stroke"||it||!R.call(this))&&(I==="stroke"||it||!x.call(this))){for(var rt,$,D=[],q=this.path,dt=0;dt<q.length;dt++){var ct=q[dt];switch(ct.type){case"begin":D.push({begin:!0});break;case"close":D.push({close:!0});break;case"mt":D.push({start:ct,deltas:[],abs:[]});break;case"lt":var At=D.length;if(q[dt-1]&&!isNaN(q[dt-1].x)&&(rt=[ct.x-q[dt-1].x,ct.y-q[dt-1].y],At>0)){for(;At>=0;At--)if(D[At-1].close!==!0&&D[At-1].begin!==!0){D[At-1].deltas.push(rt),D[At-1].abs.push(ct);break}}break;case"bct":rt=[ct.x1-q[dt-1].x,ct.y1-q[dt-1].y,ct.x2-q[dt-1].x,ct.y2-q[dt-1].y,ct.x-q[dt-1].x,ct.y-q[dt-1].y],D[D.length-1].deltas.push(rt);break;case"qct":var Ot=q[dt-1].x+2/3*(ct.x1-q[dt-1].x),G=q[dt-1].y+2/3*(ct.y1-q[dt-1].y),tt=ct.x+2/3*(ct.x1-ct.x),yt=ct.y+2/3*(ct.y1-ct.y),vt=ct.x,Y=ct.y;rt=[Ot-q[dt-1].x,G-q[dt-1].y,tt-q[dt-1].x,yt-q[dt-1].y,vt-q[dt-1].x,Y-q[dt-1].y],D[D.length-1].deltas.push(rt);break;case"arc":D.push({deltas:[],abs:[],arc:!0}),Array.isArray(D[D.length-1].abs)&&D[D.length-1].abs.push(ct)}}$=it?null:I==="stroke"?"stroke":"fill";for(var $t=!1,ee=0;ee<D.length;ee++)if(D[ee].arc)for(var Ht=D[ee].abs,Rt=0;Rt<Ht.length;Rt++){var wt=Ht[Rt];wt.type==="arc"?gt.call(this,wt.x,wt.y,wt.radius,wt.startAngle,wt.endAngle,wt.counterclockwise,void 0,it,!$t):Et.call(this,wt.x,wt.y),$t=!0}else if(D[ee].close===!0)this.pdf.internal.out("h"),$t=!1;else if(D[ee].begin!==!0){var oe=D[ee].start.x,ne=D[ee].start.y;Bt.call(this,D[ee].deltas,oe,ne),$t=!0}$&&_t.call(this,$),it&&zt.call(this)}},Nt=function(I){var it=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,rt=it*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-rt;case"top":return I+it-rt;case"hanging":return I+it-2*rt;case"middle":return I+it/2-rt;case"ideographic":return I;case"alphabetic":default:return I}},Lt=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(it,rt){this.colorStops.push([it,rt])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var gt=function(I,it,rt,$,D,q,dt,ct,At){for(var Ot=H.call(this,rt,$,D,q),G=0;G<Ot.length;G++){var tt=Ot[G];G===0&&(At?J.call(this,tt.x1+I,tt.y1+it):Et.call(this,tt.x1+I,tt.y1+it)),A.call(this,I,it,tt.x2,tt.y2,tt.x3,tt.y3,tt.x4,tt.y4)}ct?zt.call(this):_t.call(this,dt)},_t=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},zt=function(){this.pdf.clip(),this.pdf.discardPath()},J=function(I,it){this.pdf.internal.out(n(I)+" "+i(it)+" m")},Z=function(I){var it;switch(I.align){case"right":case"end":it="right";break;case"center":it="center";break;case"left":case"start":default:it="left"}var rt=this.pdf.getTextDimensions(I.text),$=Nt.call(this,I.y),D=Lt.call(this,$)-rt.h,q=this.ctx.transform.applyToPoint(new l(I.x,$)),dt=this.ctx.transform.decompose(),ct=new p;ct=(ct=(ct=ct.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale);for(var At,Ot,G,tt=this.ctx.transform.applyToRectangle(new f(I.x,$,rt.w,rt.h)),yt=ct.applyToRectangle(new f(I.x,D,rt.w,rt.h)),vt=j.call(this,yt),Y=[],$t=0;$t<vt.length;$t+=1)Y.indexOf(vt[$t])===-1&&Y.push(vt[$t]);if(X(Y),this.autoPaging)for(var ee=Y[0],Ht=Y[Y.length-1],Rt=ee;Rt<Ht+1;Rt++){this.pdf.setPage(Rt);var wt=Rt===1?this.posY+this.margin[0]:this.margin[0],oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ne=this.pdf.internal.pageSize.height-this.margin[2],xe=ne-this.margin[0],Ut=this.pdf.internal.pageSize.width-this.margin[1],te=Ut-this.margin[3],qe=Rt===1?0:oe+(Rt-2)*xe;if(this.ctx.clip_path.length!==0){var He=this.path;At=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=W(At,this.posX+this.margin[3],-1*qe+wt),Mt.call(this,"fill",!0),this.path=He}var ze=W([JSON.parse(JSON.stringify(yt))],this.posX+this.margin[3],-qe+wt+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(Ot=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ot*I.scale),G=this.lineWidth,this.lineWidth=G*I.scale);var Xe=this.autoPaging!=="text";if(Xe||ze.y+ze.h<=ne){if(Xe||ze.y>=wt&&ze.x<=Ut){var Oe=Xe?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Ut-ze.x)[0],an=W([JSON.parse(JSON.stringify(tt))],this.posX+this.margin[3],-qe+wt+this.ctx.prevPageLastElemOffset)[0],gn=Xe&&(Rt>ee||Rt<Ht)&&N.call(this);gn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],te,xe,null).clip().discardPath()),this.pdf.text(Oe,an.x,an.y,{angle:I.angle,align:it,renderingMode:I.renderingMode}),gn&&this.pdf.restoreGraphicsState()}}else ze.y<ne&&(this.ctx.prevPageLastElemOffset+=ne-ze.y);I.scale>=.01&&(this.pdf.setFontSize(Ot),this.lineWidth=G)}else I.scale>=.01&&(Ot=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ot*I.scale),G=this.lineWidth,this.lineWidth=G*I.scale),this.pdf.text(I.text,q.x+this.posX,q.y+this.posY,{angle:I.angle,align:it,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(Ot),this.lineWidth=G)},Et=function(I,it,rt,$){rt=rt||0,$=$||0,this.pdf.internal.out(n(I+rt)+" "+i(it+$)+" l")},Bt=function(I,it,rt){return this.pdf.lines(I,it,rt,null,null)},A=function(I,it,rt,$,D,q,dt,ct){this.pdf.internal.out([e(o(rt+I)),e(a($+it)),e(o(D+I)),e(a(q+it)),e(o(dt+I)),e(a(ct+it)),"c"].join(" "))},H=function(I,it,rt,$){for(var D=2*Math.PI,q=Math.PI/2;it>rt;)it-=D;var dt=Math.abs(rt-it);dt<D&&$&&(dt=D-dt);for(var ct=[],At=$?-1:1,Ot=it;dt>1e-5;){var G=Ot+At*Math.min(dt,q);ct.push(V.call(this,I,Ot,G)),dt-=Math.abs(G-Ot),Ot=G}return ct},V=function(I,it,rt){var $=(rt-it)/2,D=I*Math.cos($),q=I*Math.sin($),dt=D,ct=-q,At=dt*dt+ct*ct,Ot=At+dt*D+ct*q,G=4/3*(Math.sqrt(2*At*Ot)-Ot)/(dt*q-ct*D),tt=dt-G*ct,yt=ct+G*dt,vt=tt,Y=-yt,$t=$+it,ee=Math.cos($t),Ht=Math.sin($t);return{x1:I*Math.cos(it),y1:I*Math.sin(it),x2:tt*ee-yt*Ht,y2:tt*Ht+yt*ee,x3:vt*ee-Y*Ht,y3:vt*Ht+Y*ee,x4:I*Math.cos(rt),y4:I*Math.sin(rt)}},z=function(I){return 180*I/Math.PI},mt=function(I,it,rt,$,D,q){var dt=I+.5*(rt-I),ct=it+.5*($-it),At=D+.5*(rt-D),Ot=q+.5*($-q),G=Math.min(I,D,dt,At),tt=Math.max(I,D,dt,At),yt=Math.min(it,q,ct,Ot),vt=Math.max(it,q,ct,Ot);return new f(G,yt,tt-G,vt-yt)},ft=function(I,it,rt,$,D,q,dt,ct){var At,Ot,G,tt,yt,vt,Y,$t,ee,Ht,Rt,wt,oe,ne,xe=rt-I,Ut=$-it,te=D-rt,qe=q-$,He=dt-D,ze=ct-q;for(Ot=0;Ot<41;Ot++)ee=(Y=(G=I+(At=Ot/40)*xe)+At*((yt=rt+At*te)-G))+At*(yt+At*(D+At*He-yt)-Y),Ht=($t=(tt=it+At*Ut)+At*((vt=$+At*qe)-tt))+At*(vt+At*(q+At*ze-vt)-$t),Ot==0?(Rt=ee,wt=Ht,oe=ee,ne=Ht):(Rt=Math.min(Rt,ee),wt=Math.min(wt,Ht),oe=Math.max(oe,ee),ne=Math.max(ne,Ht));return new f(Math.round(Rt),Math.round(wt),Math.round(oe-Rt),Math.round(ne-wt))},ht=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,it,rt=(I=this.ctx.lineDash,it=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:it}));this.prevLineDash!==rt&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=rt)}}})(wn.API),function(t){var e=function(a){var l,f,p,v,b,w,S,x,R,N;for(f=[],p=0,v=(a+=l="\0\0\0\0".slice(a.length%4||4)).length;v>p;p+=4)(b=(a.charCodeAt(p)<<24)+(a.charCodeAt(p+1)<<16)+(a.charCodeAt(p+2)<<8)+a.charCodeAt(p+3))!==0?(w=(b=((b=((b=((b=(b-(N=b%85))/85)-(R=b%85))/85)-(x=b%85))/85)-(S=b%85))/85)%85,f.push(w+33,S+33,x+33,R+33,N+33)):f.push(122);return function(j,U){for(var W=U;W>0;W--)j.pop()}(f,l.length),String.fromCharCode.apply(String,f)+"~>"},n=function(a){var l,f,p,v,b,w=String,S="length",x=255,R="charCodeAt",N="slice",j="replace";for(a[N](-2),a=a[N](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),p=[],v=0,b=(a+=l="uuuuu"[N](a[S]%5||5))[S];b>v;v+=5)f=52200625*(a[R](v)-33)+614125*(a[R](v+1)-33)+7225*(a[R](v+2)-33)+85*(a[R](v+3)-33)+(a[R](v+4)-33),p.push(x&f>>24,x&f>>16,x&f>>8,x&f);return function(U,W){for(var X=W;X>0;X--)U.pop()}(p,l[S]),w.fromCharCode.apply(w,p)},i=function(a){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),l.test(a)===!1)return"";for(var f="",p=0;p<a.length;p+=2)f+=String.fromCharCode("0x"+(a[p]+a[p+1]));return f},o=function(a){for(var l=new Uint8Array(a.length),f=a.length;f--;)l[f]=a.charCodeAt(f);return a=(l=Ad(l)).reduce(function(p,v){return p+String.fromCharCode(v)},"")};t.processDataByFilters=function(a,l){var f=0,p=a||"",v=[];for(typeof(l=l||[])=="string"&&(l=[l]),f=0;f<l.length;f+=1)switch(l[f]){case"ASCII85Decode":case"/ASCII85Decode":p=n(p),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=i(p),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=p.split("").map(function(b){return("0"+b.charCodeAt().toString(16)).slice(-2)}).join("")+">",v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[f]+'" is not implemented')}return{data:p,reverseChain:v.reverse().join(" ")}}}(wn.API),function(t){t.loadFile=function(e,n,i){return function(o,a,l){a=a!==!1,l=typeof l=="function"?l:function(){};var f=void 0;try{f=function(p,v,b){var w=new XMLHttpRequest,S=0,x=function(R){var N=R.length,j=[],U=String.fromCharCode;for(S=0;S<N;S+=1)j.push(U(255&R.charCodeAt(S)));return j.join("")};if(w.open("GET",p,!v),w.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(w.onload=function(){w.status===200?b(x(this.responseText)):b(void 0)}),w.send(null),v&&w.status===200)return x(w.responseText)}(o,a,l)}catch{}return f}(e,n,i)},t.loadImageFile=t.loadFile}(wn.API),function(t){function e(){return(Cn.html2canvas?Promise.resolve(Cn.html2canvas):Ql(()=>import("./html2canvas.esm.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(Cn.DOMPurify?Promise.resolve(Cn.DOMPurify):Ql(()=>import("./purify.es.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var i=function(l){var f=fi(l);return f==="undefined"?"undefined":f==="string"||l instanceof String?"string":f==="number"||l instanceof Number?"number":f==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":f==="object"?"object":"unknown"},o=function(l,f){var p=document.createElement(l);for(var v in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[v]=f.style[v];return p},a=function l(f){var p=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),v=l.convert(Promise.resolve(),p);return v=(v=v.setProgress(1,l,1,[l])).set(f)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(l,f){return l.__proto__=f||a.prototype,l},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(l,f){return this.then(function(){switch(f=f||function(p){switch(i(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(n).then(function(p){return this.set({src:o("div",{innerHTML:l,dompurify:p})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},a.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=function p(v,b){for(var w=v.nodeType===3?document.createTextNode(v.nodeValue):v.cloneNode(!1),S=v.firstChild;S;S=S.nextSibling)b!==!0&&S.nodeType===1&&S.nodeName==="SCRIPT"||w.appendChild(p(S,b));return v.nodeType===1&&(v.nodeName==="CANVAS"?(w.width=v.width,w.height=v.height,w.getContext("2d").drawImage(v,0,0)):v.nodeName!=="TEXTAREA"&&v.nodeName!=="SELECT"||(w.value=v.value),w.addEventListener("load",function(){w.scrollTop=v.scrollTop,w.scrollLeft=v.scrollLeft},!0)),w}(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(f){var p=this.opt.jsPDF,v=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=v,v)for(var S=0;S<v.length;++S){var x=v[S],R=x.src.find(function(N){return N.format==="truetype"});R&&p.addFont(R.url,x.ref.name,x.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,p.context2d.save(!0),f(this.prop.container,w)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(l,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(l,f):this.outputPdf(l,f)},a.prototype.outputPdf=function(l,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,f)})},a.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},a.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(l){if(i(l)!=="object")return this;var f=Object.keys(l||{}).map(function(p){if(p in a.template.prop)return function(){this.prop[p]=l[p]};switch(p){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[p]=l[p]}}},this);return this.then(function(){return this.thenList(f)})},a.prototype.get=function(l,f){return this.then(function(){var p=l in a.template.prop?this.prop[l]:this.opt[l];return f?f(p):p})},a.prototype.setMargin=function(l){return this.then(function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},a.prototype.setPageSize=function(l){function f(p,v){return Math.floor(p*v/72*96)}return this.then(function(){(l=l||wn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:f(l.inner.width,l.k),height:f(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},a.prototype.setProgress=function(l,f,p,v){return l!=null&&(this.progress.val=l),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(l,f,p,v){return this.setProgress(l?this.progress.val+l:null,f||null,p?this.progress.n+p:null,v?this.progress.stack.concat(v):null)},a.prototype.then=function(l,f){var p=this;return this.thenCore(l,f,function(v,b){return p.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(w){return p.updateProgress(null,v),w}).then(v,b).then(function(w){return p.updateProgress(1),w})})},a.prototype.thenCore=function(l,f,p){p=p||Promise.prototype.then,l&&(l=l.bind(this)),f&&(f=f.bind(this));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),b=p.call(v,l,f);return a.convert(b,this.__proto__)},a.prototype.thenExternal=function(l,f){return Promise.prototype.then.call(this,l,f)},a.prototype.thenList=function(l){var f=this;return l.forEach(function(p){f=f.thenCore(p)}),f},a.prototype.catch=function(l){l&&(l=l.bind(this));var f=Promise.prototype.catch.call(this,l);return a.convert(f,this)},a.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},a.prototype.error=function(l){return this.then(function(){throw new Error(l)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,wn.getPageSize=function(l,f,p){if(fi(l)==="object"){var v=l;l=v.orientation,f=v.unit||f,p=v.format||p}f=f||"mm",p=p||"a4",l=(""+(l||"P")).toLowerCase();var b,w=(""+p).toLowerCase(),S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+f}var x,R=0,N=0;if(S.hasOwnProperty(w))R=S[w][1]/b,N=S[w][0]/b;else try{R=p[1],N=p[0]}catch{throw new Error("Invalid format: "+p)}if(l==="p"||l==="portrait")l="p",N>R&&(x=N,N=R,R=x);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",R>N&&(x=N,N=R,R=x)}return{width:N,height:R,unit:f,k:b,orientation:l}},t.html=function(l,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Od):null;var p=new a(f);return f.worker?p:p.from(l).doCallback()}}(wn.API),wn.API.addJS=function(t){return gg=t,this.internal.events.subscribe("postPutResources",function(){rh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),pg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+gg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rh!==void 0&&pg!==void 0&&this.internal.out("/Names <</JavaScript "+rh+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),a=0;a<o.length;a++){var l=o[a],f=i.exec(l);if(f!=null){var p=f[1];n.internal.newObjectDeferredBegin(p,!1)}n.internal.write(l)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,b=[];for(a=0;a<v;a++){var w=n.internal.newObject();b.push(w);var S=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+S.objId+" 0 R /XYZ null null null]>> endobj")}var x=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<b.length;a++)n.internal.write("(page_"+(a+1)+")"+b[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+x+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,o,a){var l={title:o,options:a,children:[]};return i==null&&(i=this.root),i.children.push(l),l},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var l=i.children[a];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var f=this.count=this.count_r({count:0},l);if(f>0&&this.line("/Count "+f),l.options&&l.options.pageNumber){var p=n.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var v=0;v<i.children.length;v++)this.renderItems(i.children[v])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,o){for(var a=0;a<o.children.length;a++)i.count++,this.count_r(i,o.children[a]);return i.count}}])}(wn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,o,a,l,f){var p,v=this.decode.DCT_DECODE,b=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=l||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(p=function(w){for(var S,x=256*w.charCodeAt(4)+w.charCodeAt(5),R=w.length,N={width:0,height:0,numcomponents:1},j=4;j<R;j+=2){if(j+=x,e.indexOf(w.charCodeAt(j+1))!==-1){S=256*w.charCodeAt(j+5)+w.charCodeAt(j+6),N={width:256*w.charCodeAt(j+7)+w.charCodeAt(j+8),height:S,numcomponents:w.charCodeAt(j+9)};break}x=256*w.charCodeAt(j+2)+w.charCodeAt(j+3)}return N}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:f=this.color_spaces.DEVICE_GRAY;break;case 4:f=this.color_spaces.DEVICE_CMYK;break;case 3:f=this.color_spaces.DEVICE_RGB}b={data:n,width:p.width,height:p.height,colorSpace:f,bitsPerComponent:8,filter:v,index:i,alias:o}}return b}}(wn.API);var Lu,sh,mg,vg,yg,sC=function(){var t,e,n;function i(a){var l,f,p,v,b,w,S,x,R,N,j,U,W,X;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(l=this.readUInt32(),R=(function(){var St,Mt;for(Mt=[],St=0;St<4;++St)Mt.push(String.fromCharCode(this.data[this.pos++]));return Mt}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},b=this.readUInt16(),v=this.readUInt16()||100,w.delay=1e3*b/v,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(R==="fdAT"&&(this.pos+=4,l-=4),a=(w!=null?w.data:void 0)||this.imgData,U=0;0<=l?U<l:U>l;0<=l?++U:--U)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(p=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>p)throw new Error("More transparent colors than palette size");if((N=p-this.transparency.indexed.length)>0)for(W=0;0<=N?W<N:W>N;0<=N?++W:--W)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":S=(j=this.read(l)).indexOf(0),x=String.fromCharCode.apply(String,j.slice(0,S)),this.text[x]=String.fromCharCode.apply(String,j.slice(S+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(X=this.colorType)===4||X===6,f=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*f,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(a){var l,f;for(f=[],l=0;0<=a?l<a:l>a;0<=a?++l:--l)f.push(this.data[this.pos++]);return f},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(a){var l=this.pixelBitlength/8,f=new Uint8Array(this.width*this.height*l),p=0,v=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function b(w,S,x,R){var N,j,U,W,X,St,Mt,Nt,Lt,gt,_t,zt,J,Z,Et,Bt,A,H,V,z,mt,ft=Math.ceil((v.width-w)/x),ht=Math.ceil((v.height-S)/R),I=v.width==ft&&v.height==ht;for(Z=l*ft,zt=I?f:new Uint8Array(Z*ht),St=a.length,J=0,j=0;J<ht&&p<St;){switch(a[p++]){case 0:for(W=A=0;A<Z;W=A+=1)zt[j++]=a[p++];break;case 1:for(W=H=0;H<Z;W=H+=1)N=a[p++],X=W<l?0:zt[j-l],zt[j++]=(N+X)%256;break;case 2:for(W=V=0;V<Z;W=V+=1)N=a[p++],U=(W-W%l)/l,Et=J&&zt[(J-1)*Z+U*l+W%l],zt[j++]=(Et+N)%256;break;case 3:for(W=z=0;z<Z;W=z+=1)N=a[p++],U=(W-W%l)/l,X=W<l?0:zt[j-l],Et=J&&zt[(J-1)*Z+U*l+W%l],zt[j++]=(N+Math.floor((X+Et)/2))%256;break;case 4:for(W=mt=0;mt<Z;W=mt+=1)N=a[p++],U=(W-W%l)/l,X=W<l?0:zt[j-l],J===0?Et=Bt=0:(Et=zt[(J-1)*Z+U*l+W%l],Bt=U&&zt[(J-1)*Z+(U-1)*l+W%l]),Mt=X+Et-Bt,Nt=Math.abs(Mt-X),gt=Math.abs(Mt-Et),_t=Math.abs(Mt-Bt),Lt=Nt<=gt&&Nt<=_t?X:gt<=_t?Et:Bt,zt[j++]=(N+Lt)%256;break;default:throw new Error("Invalid filter algorithm: "+a[p-1])}if(!I){var it=((S+J*R)*v.width+w)*l,rt=J*Z;for(W=0;W<ft;W+=1){for(var $=0;$<l;$+=1)f[it++]=zt[rt++];it+=(x-1)*l}}J++}}return a=IL(a),v.interlaceMethod==1?(b(0,0,8,8),b(4,0,8,8),b(0,4,4,8),b(2,0,4,4),b(0,2,2,4),b(1,0,2,2),b(0,1,1,2)):b(0,0,1,1),f},i.prototype.decodePalette=function(){var a,l,f,p,v,b,w,S,x;for(f=this.palette,b=this.transparency.indexed||[],v=new Uint8Array((b.length||0)+f.length),p=0,a=0,l=w=0,S=f.length;w<S;l=w+=3)v[p++]=f[l],v[p++]=f[l+1],v[p++]=f[l+2],v[p++]=(x=b[a++])!=null?x:255;return v},i.prototype.copyToImageData=function(a,l){var f,p,v,b,w,S,x,R,N,j,U;if(p=this.colors,N=null,f=this.hasAlphaChannel,this.palette.length&&(N=(U=this._decodedPalette)!=null?U:this._decodedPalette=this.decodePalette(),p=4,f=!0),R=(v=a.data||a).length,w=N||l,b=S=0,p===1)for(;b<R;)x=N?4*l[b/4]:S,j=w[x++],v[b++]=j,v[b++]=j,v[b++]=j,v[b++]=f?w[x++]:255,S=x;else for(;b<R;)x=N?4*l[b/4]:S,v[b++]=w[x++],v[b++]=w[x++],v[b++]=w[x++],v[b++]=f?w[x++]:255,S=x},i.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var o=function(){if(Object.prototype.toString.call(Cn)==="[object Window]"){try{e=Cn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(a){var l;if(o()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(l=new Image).src=e.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(a){var l,f,p,v,b,w,S,x;if(this.animation){for(x=[],f=b=0,w=(S=this.animation.frames).length;b<w;f=++b)l=S[f],p=a.createImageData(l.width,l.height),v=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(p,v),l.imageData=p,x.push(l.image=t(p));return x}},i.prototype.renderFrame=function(a,l){var f,p,v;return f=(p=this.animation.frames)[l],v=p[l-1],l===0&&a.clearRect(0,0,this.width,this.height),(v!=null?v.disposeOp:void 0)===1?a.clearRect(v.xOffset,v.yOffset,v.width,v.height):(v!=null?v.disposeOp:void 0)===2&&a.putImageData(v.imageData,v.xOffset,v.yOffset),f.blendOp===0&&a.clearRect(f.xOffset,f.yOffset,f.width,f.height),a.drawImage(f.image,f.xOffset,f.yOffset)},i.prototype.animate=function(a){var l,f,p,v,b,w,S=this;return f=0,w=this.animation,v=w.numFrames,p=w.frames,b=w.numPlays,(l=function(){var x,R;if(x=f++%v,R=p[x],S.renderFrame(a,x),v>1&&f/v<b)return S.animation._timeout=setTimeout(l,R.delay)})()},i.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},i.prototype.render=function(a){var l,f;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,l=a.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(f=l.createImageData(this.width,this.height),this.copyToImageData(f,this.decodePixels()),l.putImageData(f,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function oC(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,o=t[e++],a=o>>7,l=1<<(7&o)+1;t[e++],t[e++];var f=null,p=null;a&&(f=e,p=l,e+=3*l);var v=!0,b=[],w=0,S=null,x=0,R=null;for(this.width=n,this.height=i;v&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,R=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((J=t[e++])>=0))throw Error("Invalid block size");if(J===0)break;e+=J}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var N=t[e++];w=t[e++]|t[e++]<<8,S=t[e++],!(1&N)&&(S=null),x=N>>2&7,e++;break;case 254:for(;;){if(!((J=t[e++])>=0))throw Error("Invalid block size");if(J===0)break;e+=J}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var j=t[e++]|t[e++]<<8,U=t[e++]|t[e++]<<8,W=t[e++]|t[e++]<<8,X=t[e++]|t[e++]<<8,St=t[e++],Mt=St>>6&1,Nt=1<<(7&St)+1,Lt=f,gt=p,_t=!1;St>>7&&(_t=!0,Lt=e,gt=Nt,e+=3*Nt);var zt=e;for(e++;;){var J;if(!((J=t[e++])>=0))throw Error("Invalid block size");if(J===0)break;e+=J}b.push({x:j,y:U,width:W,height:X,has_local_palette:_t,palette_offset:Lt,palette_size:gt,data_offset:zt,data_length:e-zt,transparent_index:S,interlaced:!!Mt,delay:w,disposal:x});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return b.length},this.loopCount=function(){return R},this.frameInfo=function(Z){if(Z<0||Z>=b.length)throw new Error("Frame index out of range.");return b[Z]},this.decodeAndBlitFrameBGRA=function(Z,Et){var Bt=this.frameInfo(Z),A=Bt.width*Bt.height,H=new Uint8Array(A);_g(t,Bt.data_offset,H,A);var V=Bt.palette_offset,z=Bt.transparent_index;z===null&&(z=256);var mt=Bt.width,ft=n-mt,ht=mt,I=4*(Bt.y*n+Bt.x),it=4*((Bt.y+Bt.height)*n+Bt.x),rt=I,$=4*ft;Bt.interlaced===!0&&($+=4*n*7);for(var D=8,q=0,dt=H.length;q<dt;++q){var ct=H[q];if(ht===0&&(ht=mt,(rt+=$)>=it&&($=4*ft+4*n*(D-1),rt=I+(mt+ft)*(D<<1),D>>=1)),ct===z)rt+=4;else{var At=t[V+3*ct],Ot=t[V+3*ct+1],G=t[V+3*ct+2];Et[rt++]=G,Et[rt++]=Ot,Et[rt++]=At,Et[rt++]=255}--ht}},this.decodeAndBlitFrameRGBA=function(Z,Et){var Bt=this.frameInfo(Z),A=Bt.width*Bt.height,H=new Uint8Array(A);_g(t,Bt.data_offset,H,A);var V=Bt.palette_offset,z=Bt.transparent_index;z===null&&(z=256);var mt=Bt.width,ft=n-mt,ht=mt,I=4*(Bt.y*n+Bt.x),it=4*((Bt.y+Bt.height)*n+Bt.x),rt=I,$=4*ft;Bt.interlaced===!0&&($+=4*n*7);for(var D=8,q=0,dt=H.length;q<dt;++q){var ct=H[q];if(ht===0&&(ht=mt,(rt+=$)>=it&&($=4*ft+4*n*(D-1),rt=I+(mt+ft)*(D<<1),D>>=1)),ct===z)rt+=4;else{var At=t[V+3*ct],Ot=t[V+3*ct+1],G=t[V+3*ct+2];Et[rt++]=At,Et[rt++]=Ot,Et[rt++]=G,Et[rt++]=255}--ht}}}function _g(t,e,n,i){for(var o=t[e++],a=1<<o,l=a+1,f=l+1,p=o+1,v=(1<<p)-1,b=0,w=0,S=0,x=t[e++],R=new Int32Array(4096),N=null;;){for(;b<16&&x!==0;)w|=t[e++]<<b,b+=8,x===1?x=t[e++]:--x;if(b<p)break;var j=w&v;if(w>>=p,b-=p,j!==a){if(j===l)break;for(var U=j<f?j:N,W=0,X=U;X>a;)X=R[X]>>8,++W;var St=X;if(S+W+(U!==j?1:0)>i)return void gi.log("Warning, gif stream longer than expected.");n[S++]=St;var Mt=S+=W;for(U!==j&&(n[S++]=St),X=U;W--;)X=R[X],n[--Mt]=255&X,X>>=8;N!==null&&f<4096&&(R[f++]=N<<8|St,f>=v+1&&p<12&&(++p,v=v<<1|1)),N=j}else f=l+1,v=(1<<(p=o+1))-1,N=null}return S!==i&&gi.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Kf(t){var e,n,i,o,a,l=Math.floor,f=new Array(64),p=new Array(64),v=new Array(64),b=new Array(64),w=new Array(65535),S=new Array(65535),x=new Array(64),R=new Array(64),N=[],j=0,U=7,W=new Array(64),X=new Array(64),St=new Array(64),Mt=new Array(256),Nt=new Array(2048),Lt=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],gt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_t=[0,1,2,3,4,5,6,7,8,9,10,11],zt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],J=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Et=[0,1,2,3,4,5,6,7,8,9,10,11],Bt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],A=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(I,it){for(var rt=0,$=0,D=new Array,q=1;q<=16;q++){for(var dt=1;dt<=I[q];dt++)D[it[$]]=[],D[it[$]][0]=rt,D[it[$]][1]=q,$++,rt++;rt*=2}return D}function V(I){for(var it=I[0],rt=I[1]-1;rt>=0;)it&1<<rt&&(j|=1<<U),rt--,--U<0&&(j==255?(z(255),z(0)):z(j),U=7,j=0)}function z(I){N.push(I)}function mt(I){z(I>>8&255),z(255&I)}function ft(I,it,rt,$,D){for(var q,dt=D[0],ct=D[240],At=function(Ht,Rt){var wt,oe,ne,xe,Ut,te,qe,He,ze,Xe,Oe=0;for(ze=0;ze<8;++ze){wt=Ht[Oe],oe=Ht[Oe+1],ne=Ht[Oe+2],xe=Ht[Oe+3],Ut=Ht[Oe+4],te=Ht[Oe+5],qe=Ht[Oe+6];var an=wt+(He=Ht[Oe+7]),gn=wt-He,di=oe+qe,sn=oe-qe,dn=ne+te,Ze=ne-te,Sn=xe+Ut,yi=xe-Ut,Tn=an+Sn,li=an-Sn,pi=di+dn,Vn=di-dn;Ht[Oe]=Tn+pi,Ht[Oe+4]=Tn-pi;var je=.707106781*(Vn+li);Ht[Oe+2]=li+je,Ht[Oe+6]=li-je;var Ne=.382683433*((Tn=yi+Ze)-(Vn=sn+gn)),Ni=.5411961*Tn+Ne,ui=1.306562965*Vn+Ne,Fe=.707106781*(pi=Ze+sn),ti=gn+Fe,Qe=gn-Fe;Ht[Oe+5]=Qe+Ni,Ht[Oe+3]=Qe-Ni,Ht[Oe+1]=ti+ui,Ht[Oe+7]=ti-ui,Oe+=8}for(Oe=0,ze=0;ze<8;++ze){wt=Ht[Oe],oe=Ht[Oe+8],ne=Ht[Oe+16],xe=Ht[Oe+24],Ut=Ht[Oe+32],te=Ht[Oe+40],qe=Ht[Oe+48];var ri=wt+(He=Ht[Oe+56]),Rr=wt-He,Wi=oe+qe,qn=oe-qe,$e=ne+te,Zi=ne-te,Cs=xe+Ut,Cr=xe-Ut,pr=ri+Cs,rr=ri-Cs,gr=Wi+$e,Ui=Wi-$e;Ht[Oe]=pr+gr,Ht[Oe+32]=pr-gr;var sr=.707106781*(Ui+rr);Ht[Oe+16]=rr+sr,Ht[Oe+48]=rr-sr;var Ir=.382683433*((pr=Cr+Zi)-(Ui=qn+Rr)),Ps=.5411961*pr+Ir,Hs=1.306562965*Ui+Ir,Gs=.707106781*(gr=Zi+qn),$r=Rr+Gs,us=Rr-Gs;Ht[Oe+40]=us+Ps,Ht[Oe+24]=us-Ps,Ht[Oe+8]=$r+Hs,Ht[Oe+56]=$r-Hs,Oe++}for(ze=0;ze<64;++ze)Xe=Ht[ze]*Rt[ze],x[ze]=Xe>0?Xe+.5|0:Xe-.5|0;return x}(I,it),Ot=0;Ot<64;++Ot)R[Lt[Ot]]=At[Ot];var G=R[0]-rt;rt=R[0],G==0?V($[0]):(V($[S[q=32767+G]]),V(w[q]));for(var tt=63;tt>0&&R[tt]==0;)tt--;if(tt==0)return V(dt),rt;for(var yt,vt=1;vt<=tt;){for(var Y=vt;R[vt]==0&&vt<=tt;)++vt;var $t=vt-Y;if($t>=16){yt=$t>>4;for(var ee=1;ee<=yt;++ee)V(ct);$t&=15}q=32767+R[vt],V(D[($t<<4)+S[q]]),V(w[q]),vt++}return tt!=63&&V(dt),rt}function ht(I){I=Math.min(Math.max(I,1),100),a!=I&&(function(it){for(var rt=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$=0;$<64;$++){var D=l((rt[$]*it+50)/100);D=Math.min(Math.max(D,1),255),f[Lt[$]]=D}for(var q=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],dt=0;dt<64;dt++){var ct=l((q[dt]*it+50)/100);ct=Math.min(Math.max(ct,1),255),p[Lt[dt]]=ct}for(var At=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ot=0,G=0;G<8;G++)for(var tt=0;tt<8;tt++)v[Ot]=1/(f[Lt[Ot]]*At[G]*At[tt]*8),b[Ot]=1/(p[Lt[Ot]]*At[G]*At[tt]*8),Ot++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),a=I)}this.encode=function(I,it){it&&ht(it),N=new Array,j=0,U=7,mt(65496),mt(65504),mt(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),mt(1),mt(1),z(0),z(0),function(){mt(65499),mt(132),z(0);for(var oe=0;oe<64;oe++)z(f[oe]);z(1);for(var ne=0;ne<64;ne++)z(p[ne])}(),function(oe,ne){mt(65472),mt(17),z(8),mt(ne),mt(oe),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(I.width,I.height),function(){mt(65476),mt(418),z(0);for(var oe=0;oe<16;oe++)z(gt[oe+1]);for(var ne=0;ne<=11;ne++)z(_t[ne]);z(16);for(var xe=0;xe<16;xe++)z(zt[xe+1]);for(var Ut=0;Ut<=161;Ut++)z(J[Ut]);z(1);for(var te=0;te<16;te++)z(Z[te+1]);for(var qe=0;qe<=11;qe++)z(Et[qe]);z(17);for(var He=0;He<16;He++)z(Bt[He+1]);for(var ze=0;ze<=161;ze++)z(A[ze])}(),mt(65498),mt(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var rt=0,$=0,D=0;j=0,U=7,this.encode.displayName="_encode_";for(var q,dt,ct,At,Ot,G,tt,yt,vt,Y=I.data,$t=I.width,ee=I.height,Ht=4*$t,Rt=0;Rt<ee;){for(q=0;q<Ht;){for(Ot=Ht*Rt+q,tt=-1,yt=0,vt=0;vt<64;vt++)G=Ot+(yt=vt>>3)*Ht+(tt=4*(7&vt)),Rt+yt>=ee&&(G-=Ht*(Rt+1+yt-ee)),q+tt>=Ht&&(G-=q+tt-Ht+4),dt=Y[G++],ct=Y[G++],At=Y[G++],W[vt]=(Nt[dt]+Nt[ct+256>>0]+Nt[At+512>>0]>>16)-128,X[vt]=(Nt[dt+768>>0]+Nt[ct+1024>>0]+Nt[At+1280>>0]>>16)-128,St[vt]=(Nt[dt+1280>>0]+Nt[ct+1536>>0]+Nt[At+1792>>0]>>16)-128;rt=ft(W,v,rt,e,i),$=ft(X,b,$,n,o),D=ft(St,b,D,n,o),q+=32}Rt+=8}if(U>=0){var wt=[];wt[1]=U+1,wt[0]=(1<<U+1)-1,V(wt)}return mt(65497),new Uint8Array(N)},t=t||50,function(){for(var I=String.fromCharCode,it=0;it<256;it++)Mt[it]=I(it)}(),e=H(gt,_t),n=H(Z,Et),i=H(zt,J),o=H(Bt,A),function(){for(var I=1,it=2,rt=1;rt<=15;rt++){for(var $=I;$<it;$++)S[32767+$]=rt,w[32767+$]=[],w[32767+$][1]=rt,w[32767+$][0]=$;for(var D=-(it-1);D<=-I;D++)S[32767+D]=rt,w[32767+D]=[],w[32767+D][1]=rt,w[32767+D][0]=it-1+D;I<<=1,it<<=1}}(),function(){for(var I=0;I<256;I++)Nt[I]=19595*I,Nt[I+256>>0]=38470*I,Nt[I+512>>0]=7471*I+32768,Nt[I+768>>0]=-11059*I,Nt[I+1024>>0]=-21709*I,Nt[I+1280>>0]=32768*I+8421375,Nt[I+1536>>0]=-27439*I,Nt[I+1792>>0]=-5329*I}(),ht(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Wo(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bg(t){function e(gt){if(!gt)throw Error("assert :P")}function n(gt,_t,zt){for(var J=0;4>J;J++)if(gt[_t+J]!=zt.charCodeAt(J))return!0;return!1}function i(gt,_t,zt,J,Z){for(var Et=0;Et<Z;Et++)gt[_t+Et]=zt[J+Et]}function o(gt,_t,zt,J){for(var Z=0;Z<J;Z++)gt[_t+Z]=zt}function a(gt){return new Int32Array(gt)}function l(gt,_t){for(var zt=[],J=0;J<gt;J++)zt.push(new _t);return zt}function f(gt,_t){var zt=[];return function J(Z,Et,Bt){for(var A=Bt[Et],H=0;H<A&&(Z.push(Bt.length>Et+1?[]:new _t),!(Bt.length<Et+1));H++)J(Z[H],Et+1,Bt)}(zt,0,gt),zt}var p=function(){var gt=this;function _t(d,_){for(var E=1<<_-1>>>0;d&E;)E>>>=1;return E?(d&E-1)+E:d}function zt(d,_,E,O,nt){e(!(O%E));do d[_+(O-=E)]=nt;while(0<O)}function J(d,_,E,O,nt){if(e(2328>=nt),512>=nt)var at=a(512);else if((at=a(nt))==null)return 0;return function(ut,pt,bt,Tt,Yt,me){var ve,le,Ce=pt,we=1<<bt,Qt=a(16),re=a(16);for(e(Yt!=0),e(Tt!=null),e(ut!=null),e(0<bt),le=0;le<Yt;++le){if(15<Tt[le])return 0;++Qt[Tt[le]]}if(Qt[0]==Yt)return 0;for(re[1]=0,ve=1;15>ve;++ve){if(Qt[ve]>1<<ve)return 0;re[ve+1]=re[ve]+Qt[ve]}for(le=0;le<Yt;++le)ve=Tt[le],0<Tt[le]&&(me[re[ve]++]=le);if(re[15]==1)return(Tt=new Z).g=0,Tt.value=me[0],zt(ut,Ce,1,we,Tt),we;var ke,Be=-1,Ee=we-1,Je=0,Ve=1,fn=1,s=1<<bt;for(le=0,ve=1,Yt=2;ve<=bt;++ve,Yt<<=1){if(Ve+=fn<<=1,0>(fn-=Qt[ve]))return 0;for(;0<Qt[ve];--Qt[ve])(Tt=new Z).g=ve,Tt.value=me[le++],zt(ut,Ce+Je,Yt,s,Tt),Je=_t(Je,ve)}for(ve=bt+1,Yt=2;15>=ve;++ve,Yt<<=1){if(Ve+=fn<<=1,0>(fn-=Qt[ve]))return 0;for(;0<Qt[ve];--Qt[ve]){if(Tt=new Z,(Je&Ee)!=Be){for(Ce+=s,ke=1<<(Be=ve)-bt;15>Be&&!(0>=(ke-=Qt[Be]));)++Be,ke<<=1;we+=s=1<<(ke=Be-bt),ut[pt+(Be=Je&Ee)].g=ke+bt,ut[pt+Be].value=Ce-pt-Be}Tt.g=ve-bt,Tt.value=me[le++],zt(ut,Ce+(Je>>bt),Yt,s,Tt),Je=_t(Je,ve)}}return Ve!=2*re[15]-1?0:we}(d,_,E,O,nt,at)}function Z(){this.value=this.g=0}function Et(){this.value=this.g=0}function Bt(){this.G=l(5,Z),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Bi,Et)}function A(d,_,E,O){e(d!=null),e(_!=null),e(2147483648>O),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=_,d.pa=E,d.Jd=_,d.Yc=E+O,d.Zc=4<=O?E+O-4+1:E,q(d)}function H(d,_){for(var E=0;0<_--;)E|=ct(d,128)<<_;return E}function V(d,_){var E=H(d,_);return dt(d)?-E:E}function z(d,_,E,O){var nt,at=0;for(e(d!=null),e(_!=null),e(4294967288>O),d.Sb=O,d.Ra=0,d.u=0,d.h=0,4<O&&(O=4),nt=0;nt<O;++nt)at+=_[E+nt]<<8*nt;d.Ra=at,d.bb=O,d.oa=_,d.pa=E}function mt(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<_r-8>>>0,++d.bb,d.u-=8;rt(d)&&(d.h=1,d.u=0)}function ft(d,_){if(e(0<=_),!d.h&&_<=kr){var E=it(d)&ga[_];return d.u+=_,mt(d),E}return d.h=1,d.u=0}function ht(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function it(d){return d.Ra>>>(d.u&_r-1)>>>0}function rt(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>_r}function $(d,_){d.u=_,d.h=rt(d)}function D(d){d.u>=ma&&(e(d.u>=ma),mt(d))}function q(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function dt(d){return H(d,1)}function ct(d,_){var E=d.Ca;0>d.b&&q(d);var O=d.b,nt=E*_>>>8,at=(d.I>>>O>nt)+0;for(at?(E-=nt,d.I-=nt+1<<O>>>0):E=nt+1,O=E,nt=0;256<=O;)nt+=8,O>>=8;return O=7^nt+lr[O],d.b-=O,d.Ca=(E<<O)-1,at}function At(d,_,E){d[_+0]=E>>24&255,d[_+1]=E>>16&255,d[_+2]=E>>8&255,d[_+3]=E>>0&255}function Ot(d,_){return d[_+0]<<0|d[_+1]<<8}function G(d,_){return Ot(d,_)|d[_+2]<<16}function tt(d,_){return Ot(d,_)|Ot(d,_+2)<<16}function yt(d,_){var E=1<<_;return e(d!=null),e(0<_),d.X=a(E),d.X==null?0:(d.Mb=32-_,d.Xa=_,1)}function vt(d,_){e(d!=null),e(_!=null),e(d.Xa==_.Xa),i(_.X,0,d.X,0,1<<_.Xa)}function Y(){this.X=[],this.Xa=this.Mb=0}function $t(d,_,E,O){e(E!=null),e(O!=null);var nt=E[0],at=O[0];return nt==0&&(nt=(d*at+_/2)/_),at==0&&(at=(_*nt+d/2)/d),0>=nt||0>=at?0:(E[0]=nt,O[0]=at,1)}function ee(d,_){return d+(1<<_)-1>>>_}function Ht(d,_){return((4278255360&d)+(4278255360&_)>>>0&4278255360)+((16711935&d)+(16711935&_)>>>0&16711935)>>>0}function Rt(d,_){gt[_]=function(E,O,nt,at,ut,pt,bt){var Tt;for(Tt=0;Tt<ut;++Tt){var Yt=gt[d](pt[bt+Tt-1],nt,at+Tt);pt[bt+Tt]=Ht(E[O+Tt],Yt)}}}function wt(){this.ud=this.hd=this.jd=0}function oe(d,_){return((4278124286&(d^_))>>>1)+(d&_)>>>0}function ne(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function xe(d,_){return ne(d+(d-_+.5>>1))}function Ut(d,_,E){return Math.abs(_-E)-Math.abs(d-E)}function te(d,_,E,O,nt,at,ut){for(O=at[ut-1],E=0;E<nt;++E)at[ut+E]=O=Ht(d[_+E],O)}function qe(d,_,E,O,nt){var at;for(at=0;at<E;++at){var ut=d[_+at],pt=ut>>8&255,bt=16711935&(bt=(bt=16711935&ut)+((pt<<16)+pt));O[nt+at]=(4278255360&ut)+bt>>>0}}function He(d,_){_.jd=d>>0&255,_.hd=d>>8&255,_.ud=d>>16&255}function ze(d,_,E,O,nt,at){var ut;for(ut=0;ut<O;++ut){var pt=_[E+ut],bt=pt>>>8,Tt=pt,Yt=255&(Yt=(Yt=pt>>>16)+((d.jd<<24>>24)*(bt<<24>>24)>>>5));Tt=255&(Tt=(Tt=Tt+((d.hd<<24>>24)*(bt<<24>>24)>>>5))+((d.ud<<24>>24)*(Yt<<24>>24)>>>5)),nt[at+ut]=(4278255360&pt)+(Yt<<16)+Tt}}function Xe(d,_,E,O,nt){gt[_]=function(at,ut,pt,bt,Tt,Yt,me,ve,le){for(bt=me;bt<ve;++bt)for(me=0;me<le;++me)Tt[Yt++]=nt(pt[O(at[ut++])])},gt[d]=function(at,ut,pt,bt,Tt,Yt,me){var ve=8>>at.b,le=at.Ea,Ce=at.K[0],we=at.w;if(8>ve)for(at=(1<<at.b)-1,we=(1<<ve)-1;ut<pt;++ut){var Qt,re=0;for(Qt=0;Qt<le;++Qt)Qt&at||(re=O(bt[Tt++])),Yt[me++]=nt(Ce[re&we]),re>>=ve}else gt["VP8LMapColor"+E](bt,Tt,Ce,we,Yt,me,ut,pt,le)}}function Oe(d,_,E,O,nt){for(E=_+E;_<E;){var at=d[_++];O[nt++]=at>>16&255,O[nt++]=at>>8&255,O[nt++]=at>>0&255}}function an(d,_,E,O,nt){for(E=_+E;_<E;){var at=d[_++];O[nt++]=at>>16&255,O[nt++]=at>>8&255,O[nt++]=at>>0&255,O[nt++]=at>>24&255}}function gn(d,_,E,O,nt){for(E=_+E;_<E;){var at=(ut=d[_++])>>16&240|ut>>12&15,ut=ut>>0&240|ut>>28&15;O[nt++]=at,O[nt++]=ut}}function di(d,_,E,O,nt){for(E=_+E;_<E;){var at=(ut=d[_++])>>16&248|ut>>13&7,ut=ut>>5&224|ut>>3&31;O[nt++]=at,O[nt++]=ut}}function sn(d,_,E,O,nt){for(E=_+E;_<E;){var at=d[_++];O[nt++]=at>>0&255,O[nt++]=at>>8&255,O[nt++]=at>>16&255}}function dn(d,_,E,O,nt,at){if(at==0)for(E=_+E;_<E;)At(O,((at=d[_++])[0]>>24|at[1]>>8&65280|at[2]<<8&16711680|at[3]<<24)>>>0),nt+=32;else i(O,nt,d,_,E)}function Ze(d,_){gt[_][0]=gt[d+"0"],gt[_][1]=gt[d+"1"],gt[_][2]=gt[d+"2"],gt[_][3]=gt[d+"3"],gt[_][4]=gt[d+"4"],gt[_][5]=gt[d+"5"],gt[_][6]=gt[d+"6"],gt[_][7]=gt[d+"7"],gt[_][8]=gt[d+"8"],gt[_][9]=gt[d+"9"],gt[_][10]=gt[d+"10"],gt[_][11]=gt[d+"11"],gt[_][12]=gt[d+"12"],gt[_][13]=gt[d+"13"],gt[_][14]=gt[d+"0"],gt[_][15]=gt[d+"0"]}function Sn(d){return d==wr||d==xr||d==Is||d==r}function yi(){this.eb=[],this.size=this.A=this.fb=0}function Tn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function li(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new yi,this.f.kb=new Tn,this.sd=null}function pi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Vn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function je(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Ne(d,_){var E=d.T,O=_.ba.f.RGBA,nt=O.eb,at=O.fb+d.ka*O.A,ut=fr[_.ba.S],pt=d.y,bt=d.O,Tt=d.f,Yt=d.N,me=d.ea,ve=d.W,le=_.cc,Ce=_.dc,we=_.Mc,Qt=_.Nc,re=d.ka,ke=d.ka+d.T,Be=d.U,Ee=Be+1>>1;for(re==0?ut(pt,bt,null,null,Tt,Yt,me,ve,Tt,Yt,me,ve,nt,at,null,null,Be):(ut(_.ec,_.fc,pt,bt,le,Ce,we,Qt,Tt,Yt,me,ve,nt,at-O.A,nt,at,Be),++E);re+2<ke;re+=2)le=Tt,Ce=Yt,we=me,Qt=ve,Yt+=d.Rc,ve+=d.Rc,at+=2*O.A,ut(pt,(bt+=2*d.fa)-d.fa,pt,bt,le,Ce,we,Qt,Tt,Yt,me,ve,nt,at-O.A,nt,at,Be);return bt+=d.fa,d.j+ke<d.o?(i(_.ec,_.fc,pt,bt,Be),i(_.cc,_.dc,Tt,Yt,Ee),i(_.Mc,_.Nc,me,ve,Ee),E--):1&ke||ut(pt,bt,null,null,Tt,Yt,me,ve,Tt,Yt,me,ve,nt,at+O.A,null,null,Be),E}function Ni(d,_,E){var O=d.F,nt=[d.J];if(O!=null){var at=d.U,ut=_.ba.S,pt=ut==Qr||ut==Is;_=_.ba.f.RGBA;var bt=[0],Tt=d.ka;bt[0]=d.T,d.Kb&&(Tt==0?--bt[0]:(--Tt,nt[0]-=d.width),d.j+d.ka+d.T==d.o&&(bt[0]=d.o-d.j-Tt));var Yt=_.eb;Tt=_.fb+Tt*_.A,d=Kn(O,nt[0],d.width,at,bt,Yt,Tt+(pt?0:3),_.A),e(E==bt),d&&Sn(ut)&&Ji(Yt,Tt,pt,at,bt,_.A)}return 0}function ui(d){var _=d.ma,E=_.ba.S,O=11>E,nt=E==vn||E==Vo||E==Qr||E==hr||E==12||Sn(E);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!za(_.Oa,d,nt?11:12))return 0;if(nt&&Sn(E)&&De(),d.da)alert("todo:use_scaling");else{if(O){if(_.Ib=je,d.Kb){if(E=d.U+1>>1,_.memory=a(d.U+2*E),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+d.U,_.Mc=_.cc,_.Nc=_.dc+E,_.Ib=Ne,De()}}else alert("todo:EmitYUV");nt&&(_.Jb=Ni,O&&ue())}if(O&&!fl){for(d=0;256>d;++d)pu[d]=89858*(d-128)+zl>>du,gu[d]=-22014*(d-128)+zl,df[d]=-45773*(d-128),ff[d]=113618*(d-128)+zl>>du;for(d=Ul;d<Zu;++d)_=76283*(d-16)+zl>>du,mu[d-Ul]=ei(_,255),Uc[d-Ul]=ei(_+8>>4,15);fl=1}return 1}function Fe(d){var _=d.ma,E=d.U,O=d.T;return e(!(1&d.ka)),0>=E||0>=O?0:(E=_.Ib(d,_),_.Jb!=null&&_.Jb(d,_,E),_.Dc+=E,1)}function ti(d){d.ma.memory=null}function Qe(d,_,E,O){return ft(d,8)!=47?0:(_[0]=ft(d,14)+1,E[0]=ft(d,14)+1,O[0]=ft(d,1),ft(d,3)!=0?0:!d.h)}function ri(d,_){if(4>d)return d+1;var E=d-2>>1;return(2+(1&d)<<E)+ft(_,E)+1}function Rr(d,_){return 120<_?_-120:1<=(E=((E=Vt[_-1])>>4)*d+(8-(15&E)))?E:1;var E}function Wi(d,_,E){var O=it(E),nt=d[_+=255&O].g-8;return 0<nt&&($(E,E.u+8),O=it(E),_+=d[_].value,_+=O&(1<<nt)-1),$(E,E.u+d[_].g),d[_].value}function qn(d,_,E){return E.g+=d.g,E.value+=d.value<<_>>>0,e(8>=E.g),d.g}function $e(d,_,E){var O=d.xc;return e((_=O==0?0:d.vc[d.md*(E>>O)+(_>>O)])<d.Wb),d.Ya[_]}function Zi(d,_,E,O){var nt=d.ab,at=d.c*_,ut=d.C;_=ut+_;var pt=E,bt=O;for(O=d.Ta,E=d.Ua;0<nt--;){var Tt=d.gc[nt],Yt=ut,me=_,ve=pt,le=bt,Ce=(bt=O,pt=E,Tt.Ea);switch(e(Yt<me),e(me<=Tt.nc),Tt.hc){case 2:ll(ve,le,(me-Yt)*Ce,bt,pt);break;case 0:var we=Yt,Qt=me,re=bt,ke=pt,Be=(s=Tt).Ea;we==0&&(to(ve,le,null,null,1,re,ke),te(ve,le+1,0,0,Be-1,re,ke+1),le+=Be,ke+=Be,++we);for(var Ee=1<<s.b,Je=Ee-1,Ve=ee(Be,s.b),fn=s.K,s=s.w+(we>>s.b)*Ve;we<Qt;){var u=fn,h=s,g=1;for(zr(ve,le,re,ke-Be,1,re,ke);g<Be;){var y=(g&~Je)+Ee;y>Be&&(y=Be),(0,eo[u[h++]>>8&15])(ve,le+ +g,re,ke+g-Be,y-g,re,ke+g),g=y}le+=Be,ke+=Be,++we&Je||(s+=Ve)}me!=Tt.nc&&i(bt,pt-Ce,bt,pt+(me-Yt-1)*Ce,Ce);break;case 1:for(Ce=ve,Qt=le,Be=(ve=Tt.Ea)-(ke=ve&~(re=(le=1<<Tt.b)-1)),we=ee(ve,Tt.b),Ee=Tt.K,Tt=Tt.w+(Yt>>Tt.b)*we;Yt<me;){for(Je=Ee,Ve=Tt,fn=new wt,s=Qt+ke,u=Qt+ve;Qt<s;)He(Je[Ve++],fn),Ds(fn,Ce,Qt,le,bt,pt),Qt+=le,pt+=le;Qt<u&&(He(Je[Ve++],fn),Ds(fn,Ce,Qt,Be,bt,pt),Qt+=Be,pt+=Be),++Yt&re||(Tt+=we)}break;case 3:if(ve==bt&&le==pt&&0<Tt.b){for(Qt=bt,ve=Ce=pt+(me-Yt)*Ce-(ke=(me-Yt)*ee(Tt.Ea,Tt.b)),le=bt,re=pt,we=[],ke=(Be=ke)-1;0<=ke;--ke)we[ke]=le[re+ke];for(ke=Be-1;0<=ke;--ke)Qt[ve+ke]=we[ke];Fi(Tt,Yt,me,bt,Ce,bt,pt)}else Fi(Tt,Yt,me,ve,le,bt,pt)}pt=O,bt=E}bt!=E&&i(O,E,pt,bt,at)}function Cs(d,_){var E=d.V,O=d.Ba+d.c*d.C,nt=_-d.C;if(e(_<=d.l.o),e(16>=nt),0<nt){var at=d.l,ut=d.Ta,pt=d.Ua,bt=at.width;if(Zi(d,nt,E,O),nt=pt=[pt],e((E=d.C)<(O=_)),e(at.v<at.va),O>at.o&&(O=at.o),E<at.j){var Tt=at.j-E;E=at.j,nt[0]+=Tt*bt}if(E>=O?E=0:(nt[0]+=4*at.v,at.ka=E-at.j,at.U=at.va-at.v,at.T=O-E,E=1),E){if(pt=pt[0],11>(E=d.ca).S){var Yt=E.f.RGBA,me=(O=E.S,nt=at.U,at=at.T,Tt=Yt.eb,Yt.A),ve=at;for(Yt=Yt.fb+d.Ma*Yt.A;0<ve--;){var le=ut,Ce=pt,we=nt,Qt=Tt,re=Yt;switch(O){case Mr:Yi(le,Ce,we,Qt,re);break;case vn:qi(le,Ce,we,Qt,re);break;case wr:qi(le,Ce,we,Qt,re),Ji(Qt,re,0,we,1,0);break;case cl:Yr(le,Ce,we,Qt,re);break;case Vo:dn(le,Ce,we,Qt,re,1);break;case xr:dn(le,Ce,we,Qt,re,1),Ji(Qt,re,0,we,1,0);break;case Qr:dn(le,Ce,we,Qt,re,0);break;case Is:dn(le,Ce,we,Qt,re,0),Ji(Qt,re,1,we,1,0);break;case hr:fs(le,Ce,we,Qt,re);break;case r:fs(le,Ce,we,Qt,re),Xn(Qt,re,we,1,0);break;case Il:Sr(le,Ce,we,Qt,re);break;default:e(0)}pt+=bt,Yt+=me}d.Ma+=at}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=E.height)}}d.C=_,e(d.C<=d.i)}function Cr(d){var _;if(0<d.ua)return 0;for(_=0;_<d.Wb;++_){var E=d.Ya[_].G,O=d.Ya[_].H;if(0<E[1][O[1]+0].g||0<E[2][O[2]+0].g||0<E[3][O[3]+0].g)return 0}return 1}function pr(d,_,E,O,nt,at){if(d.Z!=0){var ut=d.qd,pt=d.rd;for(e(Qn[d.Z]!=null);_<E;++_)Qn[d.Z](ut,pt,O,nt,O,nt,at),ut=O,pt=nt,nt+=at;d.qd=ut,d.rd=pt}}function rr(d,_){var E=d.l.ma,O=E.Z==0||E.Z==1?d.l.j:d.C;if(O=d.C<O?O:d.C,e(_<=d.l.o),_>O){var nt=d.l.width,at=E.ca,ut=E.tb+nt*O,pt=d.V,bt=d.Ba+d.c*O,Tt=d.gc;e(d.ab==1),e(Tt[0].hc==3),Kr(Tt[0],O,_,pt,bt,at,ut),pr(E,O,_,at,ut,nt)}d.C=d.Ma=_}function gr(d,_,E,O,nt,at,ut){var pt=d.$/O,bt=d.$%O,Tt=d.m,Yt=d.s,me=E+d.$,ve=me;nt=E+O*nt;var le=E+O*at,Ce=280+Yt.ua,we=d.Pb?pt:16777216,Qt=0<Yt.ua?Yt.Wa:null,re=Yt.wc,ke=me<le?$e(Yt,bt,pt):null;e(d.C<at),e(le<=nt);var Be=!1;t:for(;;){for(;Be||me<le;){var Ee=0;if(pt>=we){var Je=me-E;e((we=d).Pb),we.wd=we.m,we.xd=Je,0<we.s.ua&&vt(we.s.Wa,we.s.vb),we=pt+_e}if(bt&re||(ke=$e(Yt,bt,pt)),e(ke!=null),ke.Qb&&(_[me]=ke.qb,Be=!0),!Be)if(D(Tt),ke.jc){Ee=Tt,Je=_;var Ve=me,fn=ke.pd[it(Ee)&Bi-1];e(ke.jc),256>fn.g?($(Ee,Ee.u+fn.g),Je[Ve]=fn.value,Ee=0):($(Ee,Ee.u+fn.g-256),e(256<=fn.value),Ee=fn.value),Ee==0&&(Be=!0)}else Ee=Wi(ke.G[0],ke.H[0],Tt);if(Tt.h)break;if(Be||256>Ee){if(!Be)if(ke.nd)_[me]=(ke.qb|Ee<<8)>>>0;else{if(D(Tt),Be=Wi(ke.G[1],ke.H[1],Tt),D(Tt),Je=Wi(ke.G[2],ke.H[2],Tt),Ve=Wi(ke.G[3],ke.H[3],Tt),Tt.h)break;_[me]=(Ve<<24|Be<<16|Ee<<8|Je)>>>0}if(Be=!1,++me,++bt>=O&&(bt=0,++pt,ut!=null&&pt<=at&&!(pt%16)&&ut(d,pt),Qt!=null))for(;ve<me;)Ee=_[ve++],Qt.X[(506832829*Ee&4294967295)>>>Qt.Mb]=Ee}else if(280>Ee){if(Ee=ri(Ee-256,Tt),Je=Wi(ke.G[4],ke.H[4],Tt),D(Tt),Je=Rr(O,Je=ri(Je,Tt)),Tt.h)break;if(me-E<Je||nt-me<Ee)break t;for(Ve=0;Ve<Ee;++Ve)_[me+Ve]=_[me+Ve-Je];for(me+=Ee,bt+=Ee;bt>=O;)bt-=O,++pt,ut!=null&&pt<=at&&!(pt%16)&&ut(d,pt);if(e(me<=nt),bt&re&&(ke=$e(Yt,bt,pt)),Qt!=null)for(;ve<me;)Ee=_[ve++],Qt.X[(506832829*Ee&4294967295)>>>Qt.Mb]=Ee}else{if(!(Ee<Ce))break t;for(Be=Ee-280,e(Qt!=null);ve<me;)Ee=_[ve++],Qt.X[(506832829*Ee&4294967295)>>>Qt.Mb]=Ee;Ee=me,e(!(Be>>>(Je=Qt).Xa)),_[Ee]=Je.X[Be],Be=!0}Be||e(Tt.h==rt(Tt))}if(d.Pb&&Tt.h&&me<nt)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&vt(d.s.vb,d.s.Wa);else{if(Tt.h)break t;ut!=null&&ut(d,pt>at?at:pt),d.a=0,d.$=me-E}return 1}return d.a=3,0}function Ui(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var _=d.Wa;_!=null&&(_.X=null),d.vb=null,e(d!=null)}function sr(){var d=new Fa;return d==null?null:(d.a=0,d.xb=jl,Ze("Predictor","VP8LPredictors"),Ze("Predictor","VP8LPredictors_C"),Ze("PredictorAdd","VP8LPredictorsAdd"),Ze("PredictorAdd","VP8LPredictorsAdd_C"),ll=qe,Ds=ze,Yi=Oe,qi=an,fs=gn,Sr=di,Yr=sn,gt.VP8LMapColor32b=Ts,gt.VP8LMapColor8b=qo,d)}function Ir(d,_,E,O,nt){var at=1,ut=[d],pt=[_],bt=O.m,Tt=O.s,Yt=null,me=0;t:for(;;){if(E)for(;at&&ft(bt,1);){var ve=ut,le=pt,Ce=O,we=1,Qt=Ce.m,re=Ce.gc[Ce.ab],ke=ft(Qt,2);if(Ce.Oc&1<<ke)at=0;else{switch(Ce.Oc|=1<<ke,re.hc=ke,re.Ea=ve[0],re.nc=le[0],re.K=[null],++Ce.ab,e(4>=Ce.ab),ke){case 0:case 1:re.b=ft(Qt,3)+2,we=Ir(ee(re.Ea,re.b),ee(re.nc,re.b),0,Ce,re.K),re.K=re.K[0];break;case 3:var Be,Ee=ft(Qt,8)+1,Je=16<Ee?0:4<Ee?1:2<Ee?2:3;if(ve[0]=ee(re.Ea,Je),re.b=Je,Be=we=Ir(Ee,1,0,Ce,re.K)){var Ve,fn=Ee,s=re,u=1<<(8>>s.b),h=a(u);if(h==null)Be=0;else{var g=s.K[0],y=s.w;for(h[0]=s.K[0][0],Ve=1;Ve<1*fn;++Ve)h[Ve]=Ht(g[y+Ve],h[Ve-1]);for(;Ve<4*u;++Ve)h[Ve]=0;s.K[0]=null,s.K[0]=h,Be=1}}we=Be;break;case 2:break;default:e(0)}at=we}}if(ut=ut[0],pt=pt[0],at&&ft(bt,1)&&!(at=1<=(me=ft(bt,4))&&11>=me)){O.a=3;break t}var P;if(P=at)e:{var B,T,K,st=O,jt=ut,Dt=pt,ie=me,pe=E,Se=st.m,Re=st.s,Ue=[null],yn=1,Ft=0,qt=de[ie];n:for(;;){if(pe&&ft(Se,1)){var Jt=ft(Se,3)+2,ye=ee(jt,Jt),ae=ee(Dt,Jt),ge=ye*ae;if(!Ir(ye,ae,0,st,Ue))break n;for(Ue=Ue[0],Re.xc=Jt,B=0;B<ge;++B){var Q=Ue[B]>>8&65535;Ue[B]=Q,Q>=yn&&(yn=Q+1)}}if(Se.h)break n;for(T=0;5>T;++T){var ot=k[T];!T&&0<ie&&(ot+=1<<ie),Ft<ot&&(Ft=ot)}var Ct=l(yn*qt,Z),xt=yn,Pt=l(xt,Bt);if(Pt==null)var kt=null;else e(65536>=xt),kt=Pt;var Zt=a(Ft);if(kt==null||Zt==null||Ct==null){st.a=1;break n}var Gt=Ct;for(B=K=0;B<yn;++B){var Xt=kt[B],fe=Xt.G,he=Xt.H,Ae=0,Ke=1,tn=0;for(T=0;5>T;++T){ot=k[T],fe[T]=Gt,he[T]=K,!T&&0<ie&&(ot+=1<<ie);r:{var on,Wn=ot,Yn=st,Fn=Zt,si=Gt,Tr=K,dl=0,Co=Yn.m,Ku=ft(Co,1);if(o(Fn,0,0,Wn),Ku){var Po=ft(Co,1)+1,ql=ft(Co,1),gs=ft(Co,ql==0?1:8);Fn[gs]=1,Po==2&&(Fn[gs=ft(Co,8)]=1);var dr=1}else{var Si=a(19),cp=ft(Co,4)+4;if(19<cp){Yn.a=3;var Gc=0;break r}for(on=0;on<cp;++on)Si[lt[on]]=ft(Co,3);var pf=void 0,Yu=void 0,hp=Yn,hv=Si,Wc=Wn,fp=Fn,gf=0,pl=hp.m,dp=8,pp=l(128,Z);i:for(;J(pp,0,7,hv,19);){if(ft(pl,1)){var fv=2+2*ft(pl,3);if((pf=2+ft(pl,fv))>Wc)break i}else pf=Wc;for(Yu=0;Yu<Wc&&pf--;){D(pl);var gp=pp[0+(127&it(pl))];$(pl,pl.u+gp.g);var yu=gp.value;if(16>yu)fp[Yu++]=yu,yu!=0&&(dp=yu);else{var dv=yu==16,mp=yu-16,pv=m[mp],vp=ft(pl,c[mp])+pv;if(Yu+vp>Wc)break i;for(var gv=dv?dp:0;0<vp--;)fp[Yu++]=gv}}gf=1;break i}gf||(hp.a=3),dr=gf}(dr=dr&&!Co.h)&&(dl=J(si,Tr,8,Fn,Wn)),dr&&dl!=0?Gc=dl:(Yn.a=3,Gc=0)}if(Gc==0)break n;if(Ke&&F[T]==1&&(Ke=Gt[K].g==0),Ae+=Gt[K].g,K+=Gc,3>=T){var Ju,mf=Zt[0];for(Ju=1;Ju<ot;++Ju)Zt[Ju]>mf&&(mf=Zt[Ju]);tn+=mf}}if(Xt.nd=Ke,Xt.Qb=0,Ke&&(Xt.qb=(fe[3][he[3]+0].value<<24|fe[1][he[1]+0].value<<16|fe[2][he[2]+0].value)>>>0,Ae==0&&256>fe[0][he[0]+0].value&&(Xt.Qb=1,Xt.qb+=fe[0][he[0]+0].value<<8)),Xt.jc=!Xt.Qb&&6>tn,Xt.jc){var Zc,$a=Xt;for(Zc=0;Zc<Bi;++Zc){var gl=Zc,ml=$a.pd[gl],Kc=$a.G[0][$a.H[0]+gl];256<=Kc.value?(ml.g=Kc.g+256,ml.value=Kc.value):(ml.g=0,ml.value=0,gl>>=qn(Kc,8,ml),gl>>=qn($a.G[1][$a.H[1]+gl],16,ml),gl>>=qn($a.G[2][$a.H[2]+gl],0,ml),qn($a.G[3][$a.H[3]+gl],24,ml))}}}Re.vc=Ue,Re.Wb=yn,Re.Ya=kt,Re.yc=Ct,P=1;break e}P=0}if(!(at=P)){O.a=3;break t}if(0<me){if(Tt.ua=1<<me,!yt(Tt.Wa,me)){O.a=1,at=0;break t}}else Tt.ua=0;var vf=O,yp=ut,mv=pt,yf=vf.s,_f=yf.xc;if(vf.c=yp,vf.i=mv,yf.md=ee(yp,_f),yf.wc=_f==0?-1:(1<<_f)-1,E){O.xb=Gu;break t}if((Yt=a(ut*pt))==null){O.a=1,at=0;break t}at=(at=gr(O,Yt,0,ut,pt,pt,null))&&!bt.h;break t}return at?(nt!=null?nt[0]=Yt:(e(Yt==null),e(E)),O.$=0,E||Ui(Tt)):Ui(Tt),at}function Ps(d,_){var E=d.c*d.i,O=E+_+16*_;return e(d.c<=_),d.V=a(O),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+E+_,1)}function Hs(d,_){var E=d.C,O=_-E,nt=d.V,at=d.Ba+d.c*E;for(e(_<=d.l.o);0<O;){var ut=16<O?16:O,pt=d.l.ma,bt=d.l.width,Tt=bt*ut,Yt=pt.ca,me=pt.tb+bt*E,ve=d.Ta,le=d.Ua;Zi(d,ut,nt,at),ki(ve,le,Yt,me,Tt),pr(pt,E,E+ut,Yt,me,bt),O-=ut,nt+=ut*d.c,E+=ut}e(E==_),d.C=d.Ma=_}function Gs(){this.ub=this.yd=this.td=this.Rb=0}function $r(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function us(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function ks(){this.Yb=function(){var d=[];return function _(E,O,nt){for(var at=nt[O],ut=0;ut<at&&(E.push(nt.length>O+1?[]:0),!(nt.length<O+1));ut++)_(E[ut],O+1,nt)}(d,0,[3,11]),d}()}function na(){this.jb=a(3),this.Wc=f([4,8],ks),this.Xc=f([4,17],ks)}function ia(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ws(){this.ld=this.La=this.dd=this.tc=0}function Do(){this.Na=this.la=0}function ra(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ss(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Es(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ws),this.Y=0,this.ya=Array(new Ss),this.aa=0,this.l=new or}function uo(){this.y=a(16),this.f=a(8),this.ea=a(8)}function No(){this.cb=this.a=0,this.sc="",this.m=new ht,this.Od=new Gs,this.Kc=new $r,this.ed=new ia,this.Qa=new us,this.Ic=this.$c=this.Aa=0,this.D=new Es,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,ht),this.ia=0,this.pb=l(4,ra),this.Pa=new na,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new uo),this.Hd=0,this.rb=Array(new Do),this.sb=0,this.wa=Array(new Ws),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ss),this.L=this.aa=0,this.gd=f([4,2],Ws),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function or(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Dn(){var d=new No;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,un||(un=$n)),d}function rn(d,_,E){return d.a==0&&(d.a=_,d.sc=E,d.cb=0),0}function ci(d,_,E){return 3<=E&&d[_+0]==157&&d[_+1]==1&&d[_+2]==42}function _i(d,_){if(d==null)return 0;if(d.a=0,d.sc="OK",_==null)return rn(d,2,"null VP8Io passed to VP8GetHeaders()");var E=_.data,O=_.w,nt=_.ha;if(4>nt)return rn(d,7,"Truncated header.");var at=E[O+0]|E[O+1]<<8|E[O+2]<<16,ut=d.Od;if(ut.Rb=!(1&at),ut.td=at>>1&7,ut.yd=at>>4&1,ut.ub=at>>5,3<ut.td)return rn(d,3,"Incorrect keyframe parameters.");if(!ut.yd)return rn(d,4,"Frame not displayable.");O+=3,nt-=3;var pt=d.Kc;if(ut.Rb){if(7>nt)return rn(d,7,"cannot parse picture header");if(!ci(E,O,nt))return rn(d,3,"Bad code word");pt.c=16383&(E[O+4]<<8|E[O+3]),pt.Td=E[O+4]>>6,pt.i=16383&(E[O+6]<<8|E[O+5]),pt.Ud=E[O+6]>>6,O+=7,nt-=7,d.za=pt.c+15>>4,d.Ub=pt.i+15>>4,_.width=pt.c,_.height=pt.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,o((at=d.Pa).jb,0,255,at.jb.length),e((at=d.Qa)!=null),at.Cb=0,at.Bb=0,at.Fb=1,o(at.Zb,0,0,at.Zb.length),o(at.Lb,0,0,at.Lb)}if(ut.ub>nt)return rn(d,7,"bad partition length");A(at=d.m,E,O,ut.ub),O+=ut.ub,nt-=ut.ub,ut.Rb&&(pt.Ld=dt(at),pt.Kd=dt(at)),pt=d.Qa;var bt,Tt=d.Pa;if(e(at!=null),e(pt!=null),pt.Cb=dt(at),pt.Cb){if(pt.Bb=dt(at),dt(at)){for(pt.Fb=dt(at),bt=0;4>bt;++bt)pt.Zb[bt]=dt(at)?V(at,7):0;for(bt=0;4>bt;++bt)pt.Lb[bt]=dt(at)?V(at,6):0}if(pt.Bb)for(bt=0;3>bt;++bt)Tt.jb[bt]=dt(at)?H(at,8):255}else pt.Bb=0;if(at.Ka)return rn(d,3,"cannot parse segment header");if((pt=d.ed).zd=dt(at),pt.Tb=H(at,6),pt.wb=H(at,3),pt.Pc=dt(at),pt.Pc&&dt(at)){for(Tt=0;4>Tt;++Tt)dt(at)&&(pt.vd[Tt]=V(at,6));for(Tt=0;4>Tt;++Tt)dt(at)&&(pt.od[Tt]=V(at,6))}if(d.L=pt.Tb==0?0:pt.zd?1:2,at.Ka)return rn(d,3,"cannot parse filter header");var Yt=nt;if(nt=bt=O,O=bt+Yt,pt=Yt,d.Xb=(1<<H(d.m,2))-1,Yt<3*(Tt=d.Xb))E=7;else{for(bt+=3*Tt,pt-=3*Tt,Yt=0;Yt<Tt;++Yt){var me=E[nt+0]|E[nt+1]<<8|E[nt+2]<<16;me>pt&&(me=pt),A(d.Jc[+Yt],E,bt,me),bt+=me,pt-=me,nt+=3}A(d.Jc[+Tt],E,bt,pt),E=bt<O?0:5}if(E!=0)return rn(d,E,"cannot parse partitions");for(E=H(bt=d.m,7),nt=dt(bt)?V(bt,4):0,O=dt(bt)?V(bt,4):0,pt=dt(bt)?V(bt,4):0,Tt=dt(bt)?V(bt,4):0,bt=dt(bt)?V(bt,4):0,Yt=d.Qa,me=0;4>me;++me){if(Yt.Cb){var ve=Yt.Zb[me];Yt.Fb||(ve+=E)}else{if(0<me){d.pb[me]=d.pb[0];continue}ve=E}var le=d.pb[me];le.Sc[0]=Me[ei(ve+nt,127)],le.Sc[1]=We[ei(ve+0,127)],le.Eb[0]=2*Me[ei(ve+O,127)],le.Eb[1]=101581*We[ei(ve+pt,127)]>>16,8>le.Eb[1]&&(le.Eb[1]=8),le.Qc[0]=Me[ei(ve+Tt,117)],le.Qc[1]=We[ei(ve+bt,127)],le.lc=ve+bt}if(!ut.Rb)return rn(d,4,"Not a key frame.");for(dt(at),ut=d.Pa,E=0;4>E;++E){for(nt=0;8>nt;++nt)for(O=0;3>O;++O)for(pt=0;11>pt;++pt)Tt=ct(at,Fs[E][nt][O][pt])?H(at,8):Br[E][nt][O][pt],ut.Wc[E][nt].Yb[O][pt]=Tt;for(nt=0;17>nt;++nt)ut.Xc[E][nt]=ut.Wc[E][Fl[nt]]}return d.kc=dt(at),d.kc&&(d.Bd=H(at,8)),d.cb=1}function $n(d,_,E,O,nt,at,ut){var pt=_[nt].Yb[E];for(E=0;16>nt;++nt){if(!ct(d,pt[E+0]))return nt;for(;!ct(d,pt[E+1]);)if(pt=_[++nt].Yb[0],E=0,nt==16)return 16;var bt=_[nt+1].Yb;if(ct(d,pt[E+2])){var Tt=d,Yt=0;if(ct(Tt,(ve=pt)[(me=E)+3]))if(ct(Tt,ve[me+6])){for(pt=0,me=2*(Yt=ct(Tt,ve[me+8]))+(ve=ct(Tt,ve[me+9+Yt])),Yt=0,ve=Mn[me];ve[pt];++pt)Yt+=Yt+ct(Tt,ve[pt]);Yt+=3+(8<<me)}else ct(Tt,ve[me+7])?(Yt=7+2*ct(Tt,165),Yt+=ct(Tt,145)):Yt=5+ct(Tt,159);else Yt=ct(Tt,ve[me+4])?3+ct(Tt,ve[me+5]):2;pt=bt[2]}else Yt=1,pt=bt[1];bt=ut+Lr[nt],0>(Tt=d).b&&q(Tt);var me,ve=Tt.b,le=(me=Tt.Ca>>1)-(Tt.I>>ve)>>31;--Tt.b,Tt.Ca+=le,Tt.Ca|=1,Tt.I-=(me+1&le)<<ve,at[bt]=((Yt^le)-le)*O[(0<nt)+0]}return 16}function Vr(d){var _=d.rb[d.sb-1];_.la=0,_.Na=0,o(d.zc,0,0,d.zc.length),d.ja=0}function xn(d,_){if(d==null)return 0;if(_==null)return rn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!_i(d,_))return 0;if(e(d.cb),_.ac==null||_.ac(_)){_.ob&&(d.L=0);var E=vu[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=_.v-E>>4,d.zb=_.j-E>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=_.o+15+E>>4,d.Hb=_.va+15+E>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var O=d.ed;for(E=0;4>E;++E){var nt;if(d.Qa.Cb){var at=d.Qa.Lb[E];d.Qa.Fb||(at+=O.Tb)}else at=O.Tb;for(nt=0;1>=nt;++nt){var ut=d.gd[E][nt],pt=at;if(O.Pc&&(pt+=O.vd[0],nt&&(pt+=O.od[0])),0<(pt=0>pt?0:63<pt?63:pt)){var bt=pt;0<O.wb&&(bt=4<O.wb?bt>>2:bt>>1)>9-O.wb&&(bt=9-O.wb),1>bt&&(bt=1),ut.dd=bt,ut.tc=2*pt+bt,ut.ld=40<=pt?2:15<=pt?1:0}else ut.tc=0;ut.La=nt}}}E=0}else rn(d,6,"Frame setup failed"),E=d.a;if(E=E==0){if(E){d.$c=0,0<d.Aa||(d.Ic=Vc);t:{E=d.Ic,O=4*(bt=d.za);var Tt=32*bt,Yt=bt+1,me=0<d.L?bt*(0<d.Aa?2:1):0,ve=(d.Aa==2?2:1)*bt;if((ut=O+832+(nt=3*(16*E+vu[d.L])/2*Tt)+(at=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=ut)E=0;else{if(ut>d.Vb){if(d.Vb=0,d.Ec=a(ut),d.Fc=0,d.Ec==null){E=rn(d,1,"no memory during frame initialization.");break t}d.Vb=ut}ut=d.Ec,pt=d.Fc,d.Ac=ut,d.Bc=pt,pt+=O,d.Gd=l(Tt,uo),d.Hd=0,d.rb=l(Yt+1,Do),d.sb=1,d.wa=me?l(me,Ws):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=bt),e(!0),d.oc=ut,d.pc=pt,pt+=832,d.ya=l(ve,Ss),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=bt),d.R=16*bt,d.B=8*bt,bt=(Tt=vu[d.L])*d.R,Tt=Tt/2*d.B,d.sa=ut,d.ta=pt+bt,d.qa=d.sa,d.ra=d.ta+16*E*d.R+Tt,d.Ha=d.qa,d.Ia=d.ra+8*E*d.B+Tt,d.$c=0,pt+=nt,d.mb=at?ut:null,d.nb=at?pt:null,e(pt+at<=d.Fc+d.Vb),Vr(d),o(d.Ac,d.Bc,0,O),E=1}}if(E){if(_.ka=0,_.y=d.sa,_.O=d.ta,_.f=d.qa,_.N=d.ra,_.ea=d.Ha,_.Vd=d.Ia,_.fa=d.R,_.Rc=d.B,_.F=null,_.J=0,!ul){for(E=-255;255>=E;++E)ni[255+E]=0>E?-E:E;for(E=-1020;1020>=E;++E)ds[1020+E]=-128>E?-128:127<E?127:E;for(E=-112;112>=E;++E)xo[112+E]=-16>E?-16:15<E?15:E;for(E=-255;510>=E;++E)Rs[255+E]=0>E?0:255<E?255:E;ul=1}no=Oo,Jr=sa,Ns=As,br=bi,ur=Ms,wi=il,$o=Ra,Ua=Bs,qa=Wr,cr=fa,Er=ca,_o=ha,Os=Ri,va=ol,bo=Oa,wo=hn,io=mr,Xr=jo,ts[0]=In,ts[1]=Ma,ts[2]=Pn,ts[3]=Hr,ts[4]=Ta,ts[5]=po,ts[6]=la,ts[7]=Gr,ts[8]=Da,ts[9]=Ys,ps[0]=oa,ps[1]=Ba,ps[2]=cs,ps[3]=Ks,ps[4]=Oi,ps[5]=rl,ps[6]=aa,Ur[0]=Js,Ur[1]=ho,Ur[2]=Ro,Ur[3]=Ci,Ur[4]=Io,Ur[5]=sl,Ur[6]=ua,E=1}else E=0}E&&(E=function(le,Ce){for(le.M=0;le.M<le.Va;++le.M){var we,Qt=le.Jc[le.M&le.Xb],re=le.m,ke=le;for(we=0;we<ke.za;++we){var Be=re,Ee=ke,Je=Ee.Ac,Ve=Ee.Bc+4*we,fn=Ee.zc,s=Ee.ya[Ee.aa+we];if(Ee.Qa.Bb?s.$b=ct(Be,Ee.Pa.jb[0])?2+ct(Be,Ee.Pa.jb[2]):ct(Be,Ee.Pa.jb[1]):s.$b=0,Ee.kc&&(s.Ad=ct(Be,Ee.Bd)),s.Za=!ct(Be,145)+0,s.Za){var u=s.Ob,h=0;for(Ee=0;4>Ee;++Ee){var g,y=fn[0+Ee];for(g=0;4>g;++g){y=xi[Je[Ve+g]][y];for(var P=zi[ct(Be,y[0])];0<P;)P=zi[2*P+ct(Be,y[P])];y=-P,Je[Ve+g]=y}i(u,h,Je,Ve,4),h+=4,fn[0+Ee]=y}}else y=ct(Be,156)?ct(Be,128)?1:3:ct(Be,163)?2:0,s.Ob[0]=y,o(Je,Ve,y,4),o(fn,0,y,4);s.Dd=ct(Be,142)?ct(Be,114)?ct(Be,183)?1:3:2:0}if(ke.m.Ka)return rn(le,7,"Premature end-of-partition0 encountered.");for(;le.ja<le.za;++le.ja){if(ke=Qt,Be=(re=le).rb[re.sb-1],Je=re.rb[re.sb+re.ja],we=re.ya[re.aa+re.ja],Ve=re.kc?we.Ad:0)Be.la=Je.la=0,we.Za||(Be.Na=Je.Na=0),we.Hc=0,we.Gc=0,we.ia=0;else{var B,T;if(Be=Je,Je=ke,Ve=re.Pa.Xc,fn=re.ya[re.aa+re.ja],s=re.pb[fn.$b],Ee=fn.ad,u=0,h=re.rb[re.sb-1],y=g=0,o(Ee,u,0,384),fn.Za)var K=0,st=Ve[3];else{P=a(16);var jt=Be.Na+h.Na;if(jt=un(Je,Ve[1],jt,s.Eb,0,P,0),Be.Na=h.Na=(0<jt)+0,1<jt)no(P,0,Ee,u);else{var Dt=P[0]+3>>3;for(P=0;256>P;P+=16)Ee[u+P]=Dt}K=1,st=Ve[0]}var ie=15&Be.la,pe=15&h.la;for(P=0;4>P;++P){var Se=1&pe;for(Dt=T=0;4>Dt;++Dt)ie=ie>>1|(Se=(jt=un(Je,st,jt=Se+(1&ie),s.Sc,K,Ee,u))>K)<<7,T=T<<2|(3<jt?3:1<jt?2:Ee[u+0]!=0),u+=16;ie>>=4,pe=pe>>1|Se<<7,g=(g<<8|T)>>>0}for(st=ie,K=pe>>4,B=0;4>B;B+=2){for(T=0,ie=Be.la>>4+B,pe=h.la>>4+B,P=0;2>P;++P){for(Se=1&pe,Dt=0;2>Dt;++Dt)jt=Se+(1&ie),ie=ie>>1|(Se=0<(jt=un(Je,Ve[2],jt,s.Qc,0,Ee,u)))<<3,T=T<<2|(3<jt?3:1<jt?2:Ee[u+0]!=0),u+=16;ie>>=2,pe=pe>>1|Se<<5}y|=T<<4*B,st|=ie<<4<<B,K|=(240&pe)<<B}Be.la=st,h.la=K,fn.Hc=g,fn.Gc=y,fn.ia=43690&y?0:s.ia,Ve=!(g|y)}if(0<re.L&&(re.wa[re.Y+re.ja]=re.gd[we.$b][we.Za],re.wa[re.Y+re.ja].La|=!Ve),ke.Ka)return rn(le,7,"Premature end-of-file encountered.")}if(Vr(le),re=Ce,ke=1,we=(Qt=le).D,Be=0<Qt.L&&Qt.M>=Qt.zb&&Qt.M<=Qt.Va,Qt.Aa==0)t:{if(we.M=Qt.M,we.uc=Be,ja(Qt,we),ke=1,we=(T=Qt.D).Nb,Be=(y=vu[Qt.L])*Qt.R,Je=y/2*Qt.B,P=16*we*Qt.R,Dt=8*we*Qt.B,Ve=Qt.sa,fn=Qt.ta-Be+P,s=Qt.qa,Ee=Qt.ra-Je+Dt,u=Qt.Ha,h=Qt.Ia-Je+Dt,pe=(ie=T.M)==0,g=ie>=Qt.Va-1,Qt.Aa==2&&ja(Qt,T),T.uc)for(Se=(jt=Qt).D.M,e(jt.D.uc),T=jt.yb;T<jt.Hb;++T){K=T,st=Se;var Re=(Ue=(ot=jt).D).Nb;B=ot.R;var Ue=Ue.wa[Ue.Y+K],yn=ot.sa,Ft=ot.ta+16*Re*B+16*K,qt=Ue.dd,Jt=Ue.tc;if(Jt!=0)if(e(3<=Jt),ot.L==1)0<K&&wo(yn,Ft,B,Jt+4),Ue.La&&Xr(yn,Ft,B,Jt),0<st&&bo(yn,Ft,B,Jt+4),Ue.La&&io(yn,Ft,B,Jt);else{var ye=ot.B,ae=ot.qa,ge=ot.ra+8*Re*ye+8*K,Q=ot.Ha,ot=ot.Ia+8*Re*ye+8*K;Re=Ue.ld,0<K&&(Ua(yn,Ft,B,Jt+4,qt,Re),cr(ae,ge,Q,ot,ye,Jt+4,qt,Re)),Ue.La&&(_o(yn,Ft,B,Jt,qt,Re),va(ae,ge,Q,ot,ye,Jt,qt,Re)),0<st&&($o(yn,Ft,B,Jt+4,qt,Re),qa(ae,ge,Q,ot,ye,Jt+4,qt,Re)),Ue.La&&(Er(yn,Ft,B,Jt,qt,Re),Os(ae,ge,Q,ot,ye,Jt,qt,Re))}}if(Qt.ia&&alert("todo:DitherRow"),re.put!=null){if(T=16*ie,ie=16*(ie+1),pe?(re.y=Qt.sa,re.O=Qt.ta+P,re.f=Qt.qa,re.N=Qt.ra+Dt,re.ea=Qt.Ha,re.W=Qt.Ia+Dt):(T-=y,re.y=Ve,re.O=fn,re.f=s,re.N=Ee,re.ea=u,re.W=h),g||(ie-=y),ie>re.o&&(ie=re.o),re.F=null,re.J=null,Qt.Fa!=null&&0<Qt.Fa.length&&T<ie&&(re.J=Pi(Qt,re,T,ie-T),re.F=Qt.mb,re.F==null&&re.F.length==0)){ke=rn(Qt,3,"Could not decode alpha data.");break t}T<re.j&&(y=re.j-T,T=re.j,e(!(1&y)),re.O+=Qt.R*y,re.N+=Qt.B*(y>>1),re.W+=Qt.B*(y>>1),re.F!=null&&(re.J+=re.width*y)),T<ie&&(re.O+=re.v,re.N+=re.v>>1,re.W+=re.v>>1,re.F!=null&&(re.J+=re.v),re.ka=T-re.j,re.U=re.va-re.v,re.T=ie-T,ke=re.put(re))}we+1!=Qt.Ic||g||(i(Qt.sa,Qt.ta-Be,Ve,fn+16*Qt.R,Be),i(Qt.qa,Qt.ra-Je,s,Ee+8*Qt.B,Je),i(Qt.Ha,Qt.Ia-Je,u,h+8*Qt.B,Je))}if(!ke)return rn(le,6,"Output aborted.")}return 1}(d,_)),_.bc!=null&&_.bc(_),E&=1}return E?(d.cb=0,E):0}function zn(d,_,E,O,nt){nt=d[_+E+32*O]+(nt>>3),d[_+E+32*O]=-256&nt?0>nt?0:255:nt}function co(d,_,E,O,nt,at){zn(d,_,0,E,O+nt),zn(d,_,1,E,O+at),zn(d,_,2,E,O-at),zn(d,_,3,E,O-nt)}function Ki(d){return(20091*d>>16)+d}function ar(d,_,E,O){var nt,at=0,ut=a(16);for(nt=0;4>nt;++nt){var pt=d[_+0]+d[_+8],bt=d[_+0]-d[_+8],Tt=(35468*d[_+4]>>16)-Ki(d[_+12]),Yt=Ki(d[_+4])+(35468*d[_+12]>>16);ut[at+0]=pt+Yt,ut[at+1]=bt+Tt,ut[at+2]=bt-Tt,ut[at+3]=pt-Yt,at+=4,_++}for(nt=at=0;4>nt;++nt)pt=(d=ut[at+0]+4)+ut[at+8],bt=d-ut[at+8],Tt=(35468*ut[at+4]>>16)-Ki(ut[at+12]),zn(E,O,0,0,pt+(Yt=Ki(ut[at+4])+(35468*ut[at+12]>>16))),zn(E,O,1,0,bt+Tt),zn(E,O,2,0,bt-Tt),zn(E,O,3,0,pt-Yt),at++,O+=32}function il(d,_,E,O){var nt=d[_+0]+4,at=35468*d[_+4]>>16,ut=Ki(d[_+4]),pt=35468*d[_+1]>>16;co(E,O,0,nt+ut,d=Ki(d[_+1]),pt),co(E,O,1,nt+at,d,pt),co(E,O,2,nt-at,d,pt),co(E,O,3,nt-ut,d,pt)}function sa(d,_,E,O,nt){ar(d,_,E,O),nt&&ar(d,_+16,E,O+4)}function As(d,_,E,O){Jr(d,_+0,E,O,1),Jr(d,_+32,E,O+128,1)}function bi(d,_,E,O){var nt;for(d=d[_+0]+4,nt=0;4>nt;++nt)for(_=0;4>_;++_)zn(E,O,_,nt,d)}function Ms(d,_,E,O){d[_+0]&&br(d,_+0,E,O),d[_+16]&&br(d,_+16,E,O+4),d[_+32]&&br(d,_+32,E,O+128),d[_+48]&&br(d,_+48,E,O+128+4)}function Oo(d,_,E,O){var nt,at=a(16);for(nt=0;4>nt;++nt){var ut=d[_+0+nt]+d[_+12+nt],pt=d[_+4+nt]+d[_+8+nt],bt=d[_+4+nt]-d[_+8+nt],Tt=d[_+0+nt]-d[_+12+nt];at[0+nt]=ut+pt,at[8+nt]=ut-pt,at[4+nt]=Tt+bt,at[12+nt]=Tt-bt}for(nt=0;4>nt;++nt)ut=(d=at[0+4*nt]+3)+at[3+4*nt],pt=at[1+4*nt]+at[2+4*nt],bt=at[1+4*nt]-at[2+4*nt],Tt=d-at[3+4*nt],E[O+0]=ut+pt>>3,E[O+16]=Tt+bt>>3,E[O+32]=ut-pt>>3,E[O+48]=Tt-bt>>3,O+=64}function Zs(d,_,E){var O,nt=_-32,at=ii,ut=255-d[nt-1];for(O=0;O<E;++O){var pt,bt=at,Tt=ut+d[_-1];for(pt=0;pt<E;++pt)d[_+pt]=bt[Tt+d[nt+pt]];_+=32}}function Ma(d,_){Zs(d,_,4)}function ho(d,_){Zs(d,_,8)}function Ba(d,_){Zs(d,_,16)}function cs(d,_){var E;for(E=0;16>E;++E)i(d,_+32*E,d,_-32,16)}function Ks(d,_){var E;for(E=16;0<E;--E)o(d,_,d[_-1],16),_+=32}function fo(d,_,E){var O;for(O=0;16>O;++O)o(_,E+32*O,d,16)}function oa(d,_){var E,O=16;for(E=0;16>E;++E)O+=d[_-1+32*E]+d[_+E-32];fo(O>>5,d,_)}function Oi(d,_){var E,O=8;for(E=0;16>E;++E)O+=d[_-1+32*E];fo(O>>4,d,_)}function rl(d,_){var E,O=8;for(E=0;16>E;++E)O+=d[_+E-32];fo(O>>4,d,_)}function aa(d,_){fo(128,d,_)}function Ln(d,_,E){return d+2*_+E+2>>2}function Pn(d,_){var E,O=_-32;for(O=new Uint8Array([Ln(d[O-1],d[O+0],d[O+1]),Ln(d[O+0],d[O+1],d[O+2]),Ln(d[O+1],d[O+2],d[O+3]),Ln(d[O+2],d[O+3],d[O+4])]),E=0;4>E;++E)i(d,_+32*E,O,0,O.length)}function Hr(d,_){var E=d[_-1],O=d[_-1+32],nt=d[_-1+64],at=d[_-1+96];At(d,_+0,16843009*Ln(d[_-1-32],E,O)),At(d,_+32,16843009*Ln(E,O,nt)),At(d,_+64,16843009*Ln(O,nt,at)),At(d,_+96,16843009*Ln(nt,at,at))}function In(d,_){var E,O=4;for(E=0;4>E;++E)O+=d[_+E-32]+d[_-1+32*E];for(O>>=3,E=0;4>E;++E)o(d,_+32*E,O,4)}function Ta(d,_){var E=d[_-1+0],O=d[_-1+32],nt=d[_-1+64],at=d[_-1-32],ut=d[_+0-32],pt=d[_+1-32],bt=d[_+2-32],Tt=d[_+3-32];d[_+0+96]=Ln(O,nt,d[_-1+96]),d[_+1+96]=d[_+0+64]=Ln(E,O,nt),d[_+2+96]=d[_+1+64]=d[_+0+32]=Ln(at,E,O),d[_+3+96]=d[_+2+64]=d[_+1+32]=d[_+0+0]=Ln(ut,at,E),d[_+3+64]=d[_+2+32]=d[_+1+0]=Ln(pt,ut,at),d[_+3+32]=d[_+2+0]=Ln(bt,pt,ut),d[_+3+0]=Ln(Tt,bt,pt)}function la(d,_){var E=d[_+1-32],O=d[_+2-32],nt=d[_+3-32],at=d[_+4-32],ut=d[_+5-32],pt=d[_+6-32],bt=d[_+7-32];d[_+0+0]=Ln(d[_+0-32],E,O),d[_+1+0]=d[_+0+32]=Ln(E,O,nt),d[_+2+0]=d[_+1+32]=d[_+0+64]=Ln(O,nt,at),d[_+3+0]=d[_+2+32]=d[_+1+64]=d[_+0+96]=Ln(nt,at,ut),d[_+3+32]=d[_+2+64]=d[_+1+96]=Ln(at,ut,pt),d[_+3+64]=d[_+2+96]=Ln(ut,pt,bt),d[_+3+96]=Ln(pt,bt,bt)}function po(d,_){var E=d[_-1+0],O=d[_-1+32],nt=d[_-1+64],at=d[_-1-32],ut=d[_+0-32],pt=d[_+1-32],bt=d[_+2-32],Tt=d[_+3-32];d[_+0+0]=d[_+1+64]=at+ut+1>>1,d[_+1+0]=d[_+2+64]=ut+pt+1>>1,d[_+2+0]=d[_+3+64]=pt+bt+1>>1,d[_+3+0]=bt+Tt+1>>1,d[_+0+96]=Ln(nt,O,E),d[_+0+64]=Ln(O,E,at),d[_+0+32]=d[_+1+96]=Ln(E,at,ut),d[_+1+32]=d[_+2+96]=Ln(at,ut,pt),d[_+2+32]=d[_+3+96]=Ln(ut,pt,bt),d[_+3+32]=Ln(pt,bt,Tt)}function Gr(d,_){var E=d[_+0-32],O=d[_+1-32],nt=d[_+2-32],at=d[_+3-32],ut=d[_+4-32],pt=d[_+5-32],bt=d[_+6-32],Tt=d[_+7-32];d[_+0+0]=E+O+1>>1,d[_+1+0]=d[_+0+64]=O+nt+1>>1,d[_+2+0]=d[_+1+64]=nt+at+1>>1,d[_+3+0]=d[_+2+64]=at+ut+1>>1,d[_+0+32]=Ln(E,O,nt),d[_+1+32]=d[_+0+96]=Ln(O,nt,at),d[_+2+32]=d[_+1+96]=Ln(nt,at,ut),d[_+3+32]=d[_+2+96]=Ln(at,ut,pt),d[_+3+64]=Ln(ut,pt,bt),d[_+3+96]=Ln(pt,bt,Tt)}function Ys(d,_){var E=d[_-1+0],O=d[_-1+32],nt=d[_-1+64],at=d[_-1+96];d[_+0+0]=E+O+1>>1,d[_+2+0]=d[_+0+32]=O+nt+1>>1,d[_+2+32]=d[_+0+64]=nt+at+1>>1,d[_+1+0]=Ln(E,O,nt),d[_+3+0]=d[_+1+32]=Ln(O,nt,at),d[_+3+32]=d[_+1+64]=Ln(nt,at,at),d[_+3+64]=d[_+2+64]=d[_+0+96]=d[_+1+96]=d[_+2+96]=d[_+3+96]=at}function Da(d,_){var E=d[_-1+0],O=d[_-1+32],nt=d[_-1+64],at=d[_-1+96],ut=d[_-1-32],pt=d[_+0-32],bt=d[_+1-32],Tt=d[_+2-32];d[_+0+0]=d[_+2+32]=E+ut+1>>1,d[_+0+32]=d[_+2+64]=O+E+1>>1,d[_+0+64]=d[_+2+96]=nt+O+1>>1,d[_+0+96]=at+nt+1>>1,d[_+3+0]=Ln(pt,bt,Tt),d[_+2+0]=Ln(ut,pt,bt),d[_+1+0]=d[_+3+32]=Ln(E,ut,pt),d[_+1+32]=d[_+3+64]=Ln(O,E,ut),d[_+1+64]=d[_+3+96]=Ln(nt,O,E),d[_+1+96]=Ln(at,nt,O)}function Ro(d,_){var E;for(E=0;8>E;++E)i(d,_+32*E,d,_-32,8)}function Ci(d,_){var E;for(E=0;8>E;++E)o(d,_,d[_-1],8),_+=32}function Fr(d,_,E){var O;for(O=0;8>O;++O)o(_,E+32*O,d,8)}function Js(d,_){var E,O=8;for(E=0;8>E;++E)O+=d[_+E-32]+d[_-1+32*E];Fr(O>>4,d,_)}function sl(d,_){var E,O=4;for(E=0;8>E;++E)O+=d[_+E-32];Fr(O>>3,d,_)}function Io(d,_){var E,O=4;for(E=0;8>E;++E)O+=d[_-1+32*E];Fr(O>>3,d,_)}function ua(d,_){Fr(128,d,_)}function go(d,_,E){var O=d[_-E],nt=d[_+0],at=3*(nt-O)+Lo[1020+d[_-2*E]-d[_+E]],ut=ji[112+(at+4>>3)];d[_-E]=ii[255+O+ji[112+(at+3>>3)]],d[_+0]=ii[255+nt-ut]}function Fo(d,_,E,O){var nt=d[_+0],at=d[_+E];return Ar[255+d[_-2*E]-d[_-E]]>O||Ar[255+at-nt]>O}function Na(d,_,E,O){return 4*Ar[255+d[_-E]-d[_+0]]+Ar[255+d[_-2*E]-d[_+E]]<=O}function Nn(d,_,E,O,nt){var at=d[_-3*E],ut=d[_-2*E],pt=d[_-E],bt=d[_+0],Tt=d[_+E],Yt=d[_+2*E],me=d[_+3*E];return 4*Ar[255+pt-bt]+Ar[255+ut-Tt]>O?0:Ar[255+d[_-4*E]-at]<=nt&&Ar[255+at-ut]<=nt&&Ar[255+ut-pt]<=nt&&Ar[255+me-Yt]<=nt&&Ar[255+Yt-Tt]<=nt&&Ar[255+Tt-bt]<=nt}function Oa(d,_,E,O){var nt=2*O+1;for(O=0;16>O;++O)Na(d,_+O,E,nt)&&go(d,_+O,E)}function hn(d,_,E,O){var nt=2*O+1;for(O=0;16>O;++O)Na(d,_+O*E,1,nt)&&go(d,_+O*E,1)}function mr(d,_,E,O){var nt;for(nt=3;0<nt;--nt)Oa(d,_+=4*E,E,O)}function jo(d,_,E,O){var nt;for(nt=3;0<nt;--nt)hn(d,_+=4,E,O)}function mo(d,_,E,O,nt,at,ut,pt){for(at=2*at+1;0<nt--;){if(Nn(d,_,E,at,ut))if(Fo(d,_,E,pt))go(d,_,E);else{var bt=d,Tt=_,Yt=E,me=bt[Tt-2*Yt],ve=bt[Tt-Yt],le=bt[Tt+0],Ce=bt[Tt+Yt],we=bt[Tt+2*Yt],Qt=27*(ke=Lo[1020+3*(le-ve)+Lo[1020+me-Ce]])+63>>7,re=18*ke+63>>7,ke=9*ke+63>>7;bt[Tt-3*Yt]=ii[255+bt[Tt-3*Yt]+ke],bt[Tt-2*Yt]=ii[255+me+re],bt[Tt-Yt]=ii[255+ve+Qt],bt[Tt+0]=ii[255+le-Qt],bt[Tt+Yt]=ii[255+Ce-re],bt[Tt+2*Yt]=ii[255+we-ke]}_+=O}}function Pr(d,_,E,O,nt,at,ut,pt){for(at=2*at+1;0<nt--;){if(Nn(d,_,E,at,ut))if(Fo(d,_,E,pt))go(d,_,E);else{var bt=d,Tt=_,Yt=E,me=bt[Tt-Yt],ve=bt[Tt+0],le=bt[Tt+Yt],Ce=ji[112+((we=3*(ve-me))+4>>3)],we=ji[112+(we+3>>3)],Qt=Ce+1>>1;bt[Tt-2*Yt]=ii[255+bt[Tt-2*Yt]+Qt],bt[Tt-Yt]=ii[255+me+we],bt[Tt+0]=ii[255+ve-Ce],bt[Tt+Yt]=ii[255+le-Qt]}_+=O}}function Ra(d,_,E,O,nt,at){mo(d,_,E,1,16,O,nt,at)}function Bs(d,_,E,O,nt,at){mo(d,_,1,E,16,O,nt,at)}function ca(d,_,E,O,nt,at){var ut;for(ut=3;0<ut;--ut)Pr(d,_+=4*E,E,1,16,O,nt,at)}function ha(d,_,E,O,nt,at){var ut;for(ut=3;0<ut;--ut)Pr(d,_+=4,1,E,16,O,nt,at)}function Wr(d,_,E,O,nt,at,ut,pt){mo(d,_,nt,1,8,at,ut,pt),mo(E,O,nt,1,8,at,ut,pt)}function fa(d,_,E,O,nt,at,ut,pt){mo(d,_,1,nt,8,at,ut,pt),mo(E,O,1,nt,8,at,ut,pt)}function Ri(d,_,E,O,nt,at,ut,pt){Pr(d,_+4*nt,nt,1,8,at,ut,pt),Pr(E,O+4*nt,nt,1,8,at,ut,pt)}function ol(d,_,E,O,nt,at,ut,pt){Pr(d,_+4,1,nt,8,at,ut,pt),Pr(E,O+4,1,nt,8,at,ut,pt)}function zo(){this.ba=new li,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Vn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Zr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function da(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ia(){this.ua=0,this.Wa=new Y,this.vb=new Y,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Bt,this.yc=new Z}function Fa(){this.xb=this.a=0,this.l=new or,this.ca=new li,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ia,this.ab=0,this.gc=l(4,da),this.Oc=0}function pa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new or,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vo(d,_,E,O,nt,at,ut){for(d=d==null?0:d[_+0],_=0;_<ut;++_)nt[at+_]=d+E[O+_]&255,d=nt[at+_]}function Uo(d,_,E,O,nt,at,ut){var pt;if(d==null)vo(null,null,E,O,nt,at,ut);else for(pt=0;pt<ut;++pt)nt[at+pt]=d[_+pt]+E[O+pt]&255}function yo(d,_,E,O,nt,at,ut){if(d==null)vo(null,null,E,O,nt,at,ut);else{var pt,bt=d[_+0],Tt=bt,Yt=bt;for(pt=0;pt<ut;++pt)Tt=Yt+(bt=d[_+pt])-Tt,Yt=E[O+pt]+(-256&Tt?0>Tt?0:255:Tt)&255,Tt=bt,nt[at+pt]=Yt}}function Pi(d,_,E,O){var nt=_.width,at=_.o;if(e(d!=null&&_!=null),0>E||0>=O||E+O>at)return null;if(!d.Cc){if(d.ga==null){var ut;if(d.ga=new pa,(ut=d.ga==null)||(ut=_.width*_.o,e(d.Gb.length==0),d.Gb=a(ut),d.Uc=0,d.Gb==null?ut=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,ut=1),ut=!ut),!ut){ut=d.ga;var pt=d.Fa,bt=d.P,Tt=d.qc,Yt=d.mb,me=d.nb,ve=bt+1,le=Tt-1,Ce=ut.l;if(e(pt!=null&&Yt!=null&&_!=null),Qn[0]=null,Qn[1]=vo,Qn[2]=Uo,Qn[3]=yo,ut.ca=Yt,ut.tb=me,ut.c=_.width,ut.i=_.height,e(0<ut.c&&0<ut.i),1>=Tt)_=0;else if(ut.$a=pt[bt+0]>>0&3,ut.Z=pt[bt+0]>>2&3,ut.Lc=pt[bt+0]>>4&3,bt=pt[bt+0]>>6&3,0>ut.$a||1<ut.$a||4<=ut.Z||1<ut.Lc||bt)_=0;else if(Ce.put=Fe,Ce.ac=ui,Ce.bc=ti,Ce.ma=ut,Ce.width=_.width,Ce.height=_.height,Ce.Da=_.Da,Ce.v=_.v,Ce.va=_.va,Ce.j=_.j,Ce.o=_.o,ut.$a)t:{e(ut.$a==1),_=sr();e:for(;;){if(_==null){_=0;break t}if(e(ut!=null),ut.mc=_,_.c=ut.c,_.i=ut.i,_.l=ut.l,_.l.ma=ut,_.l.width=ut.c,_.l.height=ut.i,_.a=0,z(_.m,pt,ve,le),!Ir(ut.c,ut.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&Cr(_.s)?(ut.ic=1,pt=_.c*_.i,_.Ta=null,_.Ua=0,_.V=a(pt),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(ut.ic=0,_=Ps(_,ut.c)),!_))break e;_=1;break t}ut.mc=null,_=0}else _=le>=ut.c*ut.i;ut=!_}if(ut)return null;d.ga.Lc!=1?d.Ga=0:O=at-E}e(d.ga!=null),e(E+O<=at);t:{if(_=(pt=d.ga).c,at=pt.l.o,pt.$a==0){if(ve=d.rc,le=d.Vc,Ce=d.Fa,bt=d.P+1+E*_,Tt=d.mb,Yt=d.nb+E*_,e(bt<=d.P+d.qc),pt.Z!=0)for(e(Qn[pt.Z]!=null),ut=0;ut<O;++ut)Qn[pt.Z](ve,le,Ce,bt,Tt,Yt,_),ve=Tt,le=Yt,Yt+=_,bt+=_;else for(ut=0;ut<O;++ut)i(Tt,Yt,Ce,bt,_),ve=Tt,le=Yt,Yt+=_,bt+=_;d.rc=ve,d.Vc=le}else{if(e(pt.mc!=null),_=E+O,e((ut=pt.mc)!=null),e(_<=ut.i),ut.C>=_)_=1;else if(pt.ic||ue(),pt.ic){pt=ut.V,ve=ut.Ba,le=ut.c;var we=ut.i,Qt=(Ce=1,bt=ut.$/le,Tt=ut.$%le,Yt=ut.m,me=ut.s,ut.$),re=le*we,ke=le*_,Be=me.wc,Ee=Qt<ke?$e(me,Tt,bt):null;e(Qt<=re),e(_<=we),e(Cr(me));e:for(;;){for(;!Yt.h&&Qt<ke;){if(Tt&Be||(Ee=$e(me,Tt,bt)),e(Ee!=null),D(Yt),256>(we=Wi(Ee.G[0],Ee.H[0],Yt)))pt[ve+Qt]=we,++Qt,++Tt>=le&&(Tt=0,++bt<=_&&!(bt%16)&&rr(ut,bt));else{if(!(280>we)){Ce=0;break e}we=ri(we-256,Yt);var Je,Ve=Wi(Ee.G[4],Ee.H[4],Yt);if(D(Yt),!(Qt>=(Ve=Rr(le,Ve=ri(Ve,Yt)))&&re-Qt>=we)){Ce=0;break e}for(Je=0;Je<we;++Je)pt[ve+Qt+Je]=pt[ve+Qt+Je-Ve];for(Qt+=we,Tt+=we;Tt>=le;)Tt-=le,++bt<=_&&!(bt%16)&&rr(ut,bt);Qt<ke&&Tt&Be&&(Ee=$e(me,Tt,bt))}e(Yt.h==rt(Yt))}rr(ut,bt>_?_:bt);break e}!Ce||Yt.h&&Qt<re?(Ce=0,ut.a=Yt.h?5:3):ut.$=Qt,_=Ce}else _=gr(ut,ut.V,ut.Ba,ut.c,ut.i,_,Hs);if(!_){O=0;break t}}E+O>=at&&(d.Cc=1),O=1}if(!O)return null;if(d.Cc&&((O=d.ga)!=null&&(O.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+E*nt}function C(d,_,E,O,nt,at){for(;0<nt--;){var ut,pt=d,bt=_+(E?1:0),Tt=d,Yt=_+(E?0:3);for(ut=0;ut<O;++ut){var me=Tt[Yt+4*ut];me!=255&&(me*=32897,pt[bt+4*ut+0]=pt[bt+4*ut+0]*me>>23,pt[bt+4*ut+1]=pt[bt+4*ut+1]*me>>23,pt[bt+4*ut+2]=pt[bt+4*ut+2]*me>>23)}_+=at}}function et(d,_,E,O,nt){for(;0<O--;){var at;for(at=0;at<E;++at){var ut=d[_+2*at+0],pt=15&(Tt=d[_+2*at+1]),bt=4369*pt,Tt=(240&Tt|Tt>>4)*bt>>16;d[_+2*at+0]=(240&ut|ut>>4)*bt>>16&240|(15&ut|ut<<4)*bt>>16>>4&15,d[_+2*at+1]=240&Tt|pt}_+=nt}}function It(d,_,E,O,nt,at,ut,pt){var bt,Tt,Yt=255;for(Tt=0;Tt<nt;++Tt){for(bt=0;bt<O;++bt){var me=d[_+bt];at[ut+4*bt]=me,Yt&=me}_+=E,ut+=pt}return Yt!=255}function Wt(d,_,E,O,nt){var at;for(at=0;at<nt;++at)E[O+at]=d[_+at]>>8}function ue(){Ji=C,Xn=et,Kn=It,ki=Wt}function be(d,_,E){gt[d]=function(O,nt,at,ut,pt,bt,Tt,Yt,me,ve,le,Ce,we,Qt,re,ke,Be){var Ee,Je=Be-1>>1,Ve=pt[bt+0]|Tt[Yt+0]<<16,fn=me[ve+0]|le[Ce+0]<<16;e(O!=null);var s=3*Ve+fn+131074>>2;for(_(O[nt+0],255&s,s>>16,we,Qt),at!=null&&(s=3*fn+Ve+131074>>2,_(at[ut+0],255&s,s>>16,re,ke)),Ee=1;Ee<=Je;++Ee){var u=pt[bt+Ee]|Tt[Yt+Ee]<<16,h=me[ve+Ee]|le[Ce+Ee]<<16,g=Ve+u+fn+h+524296,y=g+2*(u+fn)>>3;s=y+Ve>>1,Ve=(g=g+2*(Ve+h)>>3)+u>>1,_(O[nt+2*Ee-1],255&s,s>>16,we,Qt+(2*Ee-1)*E),_(O[nt+2*Ee-0],255&Ve,Ve>>16,we,Qt+(2*Ee-0)*E),at!=null&&(s=g+fn>>1,Ve=y+h>>1,_(at[ut+2*Ee-1],255&s,s>>16,re,ke+(2*Ee-1)*E),_(at[ut+2*Ee+0],255&Ve,Ve>>16,re,ke+(2*Ee+0)*E)),Ve=u,fn=h}1&Be||(s=3*Ve+fn+131074>>2,_(O[nt+Be-1],255&s,s>>16,we,Qt+(Be-1)*E),at!=null&&(s=3*fn+Ve+131074>>2,_(at[ut+Be-1],255&s,s>>16,re,ke+(Be-1)*E)))}}function De(){fr[Mr]=Wu,fr[vn]=hu,fr[cl]=js,fr[Vo]=Ho,fr[Qr]=hl,fr[hr]=fu,fr[Il]=zc,fr[wr]=hu,fr[xr]=Ho,fr[Is]=hl,fr[r]=fu}function Ge(d){return d&-16384?0>d?0:255:d>>hf}function Ye(d,_){return Ge((19077*d>>8)+(26149*_>>8)-14234)}function ln(d,_,E){return Ge((19077*d>>8)-(6419*_>>8)-(13320*E>>8)+8708)}function bn(d,_){return Ge((19077*d>>8)+(33050*_>>8)-17685)}function On(d,_,E,O,nt){O[nt+0]=Ye(d,E),O[nt+1]=ln(d,_,E),O[nt+2]=bn(d,_)}function hi(d,_,E,O,nt){O[nt+0]=bn(d,_),O[nt+1]=ln(d,_,E),O[nt+2]=Ye(d,E)}function Un(d,_,E,O,nt){var at=ln(d,_,E);_=at<<3&224|bn(d,_)>>3,O[nt+0]=248&Ye(d,E)|at>>5,O[nt+1]=_}function Zn(d,_,E,O,nt){var at=240&bn(d,_)|15;O[nt+0]=240&Ye(d,E)|ln(d,_,E)>>4,O[nt+1]=at}function Ii(d,_,E,O,nt){O[nt+0]=255,On(d,_,E,O,nt+1)}function Mi(d,_,E,O,nt){hi(d,_,E,O,nt),O[nt+3]=255}function jr(d,_,E,O,nt){On(d,_,E,O,nt),O[nt+3]=255}function ei(d,_){return 0>d?0:d>_?_:d}function vr(d,_,E){gt[d]=function(O,nt,at,ut,pt,bt,Tt,Yt,me){for(var ve=Yt+(-2&me)*E;Yt!=ve;)_(O[nt+0],at[ut+0],pt[bt+0],Tt,Yt),_(O[nt+1],at[ut+0],pt[bt+0],Tt,Yt+E),nt+=2,++ut,++bt,Yt+=2*E;1&me&&_(O[nt+0],at[ut+0],pt[bt+0],Tt,Yt)}}function al(d,_,E){return E==0?d==0?_==0?6:5:_==0?4:0:E}function yr(d,_,E,O,nt){switch(d>>>30){case 3:Jr(_,E,O,nt,0);break;case 2:wi(_,E,O,nt);break;case 1:br(_,E,O,nt)}}function ja(d,_){var E,O,nt=_.M,at=_.Nb,ut=d.oc,pt=d.pc+40,bt=d.oc,Tt=d.pc+584,Yt=d.oc,me=d.pc+600;for(E=0;16>E;++E)ut[pt+32*E-1]=129;for(E=0;8>E;++E)bt[Tt+32*E-1]=129,Yt[me+32*E-1]=129;for(0<nt?ut[pt-1-32]=bt[Tt-1-32]=Yt[me-1-32]=129:(o(ut,pt-32-1,127,21),o(bt,Tt-32-1,127,9),o(Yt,me-32-1,127,9)),O=0;O<d.za;++O){var ve=_.ya[_.aa+O];if(0<O){for(E=-1;16>E;++E)i(ut,pt+32*E-4,ut,pt+32*E+12,4);for(E=-1;8>E;++E)i(bt,Tt+32*E-4,bt,Tt+32*E+4,4),i(Yt,me+32*E-4,Yt,me+32*E+4,4)}var le=d.Gd,Ce=d.Hd+O,we=ve.ad,Qt=ve.Hc;if(0<nt&&(i(ut,pt-32,le[Ce].y,0,16),i(bt,Tt-32,le[Ce].f,0,8),i(Yt,me-32,le[Ce].ea,0,8)),ve.Za){var re=ut,ke=pt-32+16;for(0<nt&&(O>=d.za-1?o(re,ke,le[Ce].y[15],4):i(re,ke,le[Ce+1].y,0,4)),E=0;4>E;E++)re[ke+128+E]=re[ke+256+E]=re[ke+384+E]=re[ke+0+E];for(E=0;16>E;++E,Qt<<=2)re=ut,ke=pt+qc[E],ts[ve.Ob[E]](re,ke),yr(Qt,we,16*+E,re,ke)}else if(re=al(O,nt,ve.Ob[0]),ps[re](ut,pt),Qt!=0)for(E=0;16>E;++E,Qt<<=2)yr(Qt,we,16*+E,ut,pt+qc[E]);for(E=ve.Gc,re=al(O,nt,ve.Dd),Ur[re](bt,Tt),Ur[re](Yt,me),Qt=we,re=bt,ke=Tt,255&(ve=E>>0)&&(170&ve?Ns(Qt,256,re,ke):ur(Qt,256,re,ke)),ve=Yt,Qt=me,255&(E>>=8)&&(170&E?Ns(we,320,ve,Qt):ur(we,320,ve,Qt)),nt<d.Ub-1&&(i(le[Ce].y,0,ut,pt+480,16),i(le[Ce].f,0,bt,Tt+224,8),i(le[Ce].ea,0,Yt,me+224,8)),E=8*at*d.B,le=d.sa,Ce=d.ta+16*O+16*at*d.R,we=d.qa,ve=d.ra+8*O+E,Qt=d.Ha,re=d.Ia+8*O+E,E=0;16>E;++E)i(le,Ce+E*d.R,ut,pt+32*E,16);for(E=0;8>E;++E)i(we,ve+E*d.B,bt,Tt+32*E,8),i(Qt,re+E*d.B,Yt,me+32*E,8)}}function hs(d,_,E,O,nt,at,ut,pt,bt){var Tt=[0],Yt=[0],me=0,ve=bt!=null?bt.kd:0,le=bt??new Zr;if(d==null||12>E)return 7;le.data=d,le.w=_,le.ha=E,_=[_],E=[E],le.gb=[le.gb];t:{var Ce=_,we=E,Qt=le.gb;if(e(d!=null),e(we!=null),e(Qt!=null),Qt[0]=0,12<=we[0]&&!n(d,Ce[0],"RIFF")){if(n(d,Ce[0]+8,"WEBP")){Qt=3;break t}var re=tt(d,Ce[0]+4);if(12>re||4294967286<re){Qt=3;break t}if(ve&&re>we[0]-8){Qt=7;break t}Qt[0]=re,Ce[0]+=12,we[0]-=12}Qt=0}if(Qt!=0)return Qt;for(re=0<le.gb[0],E=E[0];;){t:{var ke=d;we=_,Qt=E;var Be=Tt,Ee=Yt,Je=Ce=[0];if((s=me=[me])[0]=0,8>Qt[0])Qt=7;else{if(!n(ke,we[0],"VP8X")){if(tt(ke,we[0]+4)!=10){Qt=3;break t}if(18>Qt[0]){Qt=7;break t}var Ve=tt(ke,we[0]+8),fn=1+G(ke,we[0]+12);if(2147483648<=fn*(ke=1+G(ke,we[0]+15))){Qt=3;break t}Je!=null&&(Je[0]=Ve),Be!=null&&(Be[0]=fn),Ee!=null&&(Ee[0]=ke),we[0]+=18,Qt[0]-=18,s[0]=1}Qt=0}}if(me=me[0],Ce=Ce[0],Qt!=0)return Qt;if(we=!!(2&Ce),!re&&me)return 3;if(at!=null&&(at[0]=!!(16&Ce)),ut!=null&&(ut[0]=we),pt!=null&&(pt[0]=0),ut=Tt[0],Ce=Yt[0],me&&we&&bt==null){Qt=0;break}if(4>E){Qt=7;break}if(re&&me||!re&&!me&&!n(d,_[0],"ALPH")){E=[E],le.na=[le.na],le.P=[le.P],le.Sa=[le.Sa];t:{Ve=d,Qt=_,re=E;var s=le.gb;Be=le.na,Ee=le.P,Je=le.Sa,fn=22,e(Ve!=null),e(re!=null),ke=Qt[0];var u=re[0];for(e(Be!=null),e(Je!=null),Be[0]=null,Ee[0]=null,Je[0]=0;;){if(Qt[0]=ke,re[0]=u,8>u){Qt=7;break t}var h=tt(Ve,ke+4);if(4294967286<h){Qt=3;break t}var g=8+h+1&-2;if(fn+=g,0<s&&fn>s){Qt=3;break t}if(!n(Ve,ke,"VP8 ")||!n(Ve,ke,"VP8L")){Qt=0;break t}if(u[0]<g){Qt=7;break t}n(Ve,ke,"ALPH")||(Be[0]=Ve,Ee[0]=ke+8,Je[0]=h),ke+=g,u-=g}}if(E=E[0],le.na=le.na[0],le.P=le.P[0],le.Sa=le.Sa[0],Qt!=0)break}E=[E],le.Ja=[le.Ja],le.xa=[le.xa];t:if(s=d,Qt=_,re=E,Be=le.gb[0],Ee=le.Ja,Je=le.xa,Ve=Qt[0],ke=!n(s,Ve,"VP8 "),fn=!n(s,Ve,"VP8L"),e(s!=null),e(re!=null),e(Ee!=null),e(Je!=null),8>re[0])Qt=7;else{if(ke||fn){if(s=tt(s,Ve+4),12<=Be&&s>Be-12){Qt=3;break t}if(ve&&s>re[0]-8){Qt=7;break t}Ee[0]=s,Qt[0]+=8,re[0]-=8,Je[0]=fn}else Je[0]=5<=re[0]&&s[Ve+0]==47&&!(s[Ve+4]>>5),Ee[0]=re[0];Qt=0}if(E=E[0],le.Ja=le.Ja[0],le.xa=le.xa[0],_=_[0],Qt!=0)break;if(4294967286<le.Ja)return 3;if(pt==null||we||(pt[0]=le.xa?2:1),ut=[ut],Ce=[Ce],le.xa){if(5>E){Qt=7;break}pt=ut,ve=Ce,we=at,d==null||5>E?d=0:5<=E&&d[_+0]==47&&!(d[_+4]>>5)?(re=[0],s=[0],Be=[0],z(Ee=new I,d,_,E),Qe(Ee,re,s,Be)?(pt!=null&&(pt[0]=re[0]),ve!=null&&(ve[0]=s[0]),we!=null&&(we[0]=Be[0]),d=1):d=0):d=0}else{if(10>E){Qt=7;break}pt=Ce,d==null||10>E||!ci(d,_+3,E-3)?d=0:(ve=d[_+0]|d[_+1]<<8|d[_+2]<<16,we=16383&(d[_+7]<<8|d[_+6]),d=16383&(d[_+9]<<8|d[_+8]),1&ve||3<(ve>>1&7)||!(ve>>4&1)||ve>>5>=le.Ja||!we||!d?d=0:(ut&&(ut[0]=we),pt&&(pt[0]=d),d=1))}if(!d||(ut=ut[0],Ce=Ce[0],me&&(Tt[0]!=ut||Yt[0]!=Ce)))return 3;bt!=null&&(bt[0]=le,bt.offset=_-bt.w,e(4294967286>_-bt.w),e(bt.offset==bt.ha-E));break}return Qt==0||Qt==7&&me&&bt==null?(at!=null&&(at[0]|=le.na!=null&&0<le.na.length),O!=null&&(O[0]=ut),nt!=null&&(nt[0]=Ce),0):Qt}function za(d,_,E){var O=_.width,nt=_.height,at=0,ut=0,pt=O,bt=nt;if(_.Da=d!=null&&0<d.Da,_.Da&&(pt=d.cd,bt=d.bd,at=d.v,ut=d.j,11>E||(at&=-2,ut&=-2),0>at||0>ut||0>=pt||0>=bt||at+pt>O||ut+bt>nt))return 0;if(_.v=at,_.j=ut,_.va=at+pt,_.o=ut+bt,_.U=pt,_.T=bt,_.da=d!=null&&0<d.da,_.da){if(!$t(pt,bt,E=[d.ib],at=[d.hb]))return 0;_.ib=E[0],_.hb=at[0]}return _.ob=d!=null&&d.ob,_.Kb=d==null||!d.Sd,_.da&&(_.ob=_.ib<3*O/4&&_.hb<3*nt/4,_.Kb=0),1}function Xs(d){if(d==null)return 2;if(11>d.S){var _=d.f.RGBA;_.fb+=(d.height-1)*_.A,_.A=-_.A}else _=d.f.kb,d=d.height,_.O+=(d-1)*_.fa,_.fa=-_.fa,_.N+=(d-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(d-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(d-1)*_.lb,_.lb=-_.lb);return 0}function Qs(d,_,E,O){if(O==null||0>=d||0>=_)return 2;if(E!=null){if(E.Da){var nt=E.cd,at=E.bd,ut=-2&E.v,pt=-2&E.j;if(0>ut||0>pt||0>=nt||0>=at||ut+nt>d||pt+at>_)return 2;d=nt,_=at}if(E.da){if(!$t(d,_,nt=[E.ib],at=[E.hb]))return 2;d=nt[0],_=at[0]}}O.width=d,O.height=_;t:{var bt=O.width,Tt=O.height;if(d=O.S,0>=bt||0>=Tt||!(d>=Mr&&13>d))d=2;else{if(0>=O.Rd&&O.sd==null){ut=at=nt=_=0;var Yt=(pt=bt*Hc[d])*Tt;if(11>d||(at=(Tt+1)/2*(_=(bt+1)/2),d==12&&(ut=(nt=bt)*Tt)),(Tt=a(Yt+2*at+ut))==null){d=1;break t}O.sd=Tt,11>d?((bt=O.f.RGBA).eb=Tt,bt.fb=0,bt.A=pt,bt.size=Yt):((bt=O.f.kb).y=Tt,bt.O=0,bt.fa=pt,bt.Fd=Yt,bt.f=Tt,bt.N=0+Yt,bt.Ab=_,bt.Cd=at,bt.ea=Tt,bt.W=0+Yt+at,bt.Db=_,bt.Ed=at,d==12&&(bt.F=Tt,bt.J=0+Yt+2*at),bt.Tc=ut,bt.lb=nt)}if(_=1,nt=O.S,at=O.width,ut=O.height,nt>=Mr&&13>nt)if(11>nt)d=O.f.RGBA,_&=(pt=Math.abs(d.A))*(ut-1)+at<=d.size,_&=pt>=at*Hc[nt],_&=d.eb!=null;else{d=O.f.kb,pt=(at+1)/2,Yt=(ut+1)/2,bt=Math.abs(d.fa),Tt=Math.abs(d.Ab);var me=Math.abs(d.Db),ve=Math.abs(d.lb),le=ve*(ut-1)+at;_&=bt*(ut-1)+at<=d.Fd,_&=Tt*(Yt-1)+pt<=d.Cd,_=(_&=me*(Yt-1)+pt<=d.Ed)&bt>=at&Tt>=pt&me>=pt,_&=d.y!=null,_&=d.f!=null,_&=d.ea!=null,nt==12&&(_&=ve>=at,_&=le<=d.Tc,_&=d.F!=null)}else _=0;d=_?0:2}}return d!=0||E!=null&&E.fd&&(d=Xs(O)),d}var Bi=64,ga=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],kr=24,_r=32,ma=8,lr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Rt("Predictor0","PredictorAdd0"),gt.Predictor0=function(){return 4278190080},gt.Predictor1=function(d){return d},gt.Predictor2=function(d,_,E){return _[E+0]},gt.Predictor3=function(d,_,E){return _[E+1]},gt.Predictor4=function(d,_,E){return _[E-1]},gt.Predictor5=function(d,_,E){return oe(oe(d,_[E+1]),_[E+0])},gt.Predictor6=function(d,_,E){return oe(d,_[E-1])},gt.Predictor7=function(d,_,E){return oe(d,_[E+0])},gt.Predictor8=function(d,_,E){return oe(_[E-1],_[E+0])},gt.Predictor9=function(d,_,E){return oe(_[E+0],_[E+1])},gt.Predictor10=function(d,_,E){return oe(oe(d,_[E-1]),oe(_[E+0],_[E+1]))},gt.Predictor11=function(d,_,E){var O=_[E+0];return 0>=Ut(O>>24&255,d>>24&255,(_=_[E-1])>>24&255)+Ut(O>>16&255,d>>16&255,_>>16&255)+Ut(O>>8&255,d>>8&255,_>>8&255)+Ut(255&O,255&d,255&_)?O:d},gt.Predictor12=function(d,_,E){var O=_[E+0];return(ne((d>>24&255)+(O>>24&255)-((_=_[E-1])>>24&255))<<24|ne((d>>16&255)+(O>>16&255)-(_>>16&255))<<16|ne((d>>8&255)+(O>>8&255)-(_>>8&255))<<8|ne((255&d)+(255&O)-(255&_)))>>>0},gt.Predictor13=function(d,_,E){var O=_[E-1];return(xe((d=oe(d,_[E+0]))>>24&255,O>>24&255)<<24|xe(d>>16&255,O>>16&255)<<16|xe(d>>8&255,O>>8&255)<<8|xe(d>>0&255,O>>0&255))>>>0};var to=gt.PredictorAdd0;gt.PredictorAdd1=te,Rt("Predictor2","PredictorAdd2"),Rt("Predictor3","PredictorAdd3"),Rt("Predictor4","PredictorAdd4"),Rt("Predictor5","PredictorAdd5"),Rt("Predictor6","PredictorAdd6"),Rt("Predictor7","PredictorAdd7"),Rt("Predictor8","PredictorAdd8"),Rt("Predictor9","PredictorAdd9"),Rt("Predictor10","PredictorAdd10"),Rt("Predictor11","PredictorAdd11"),Rt("Predictor12","PredictorAdd12"),Rt("Predictor13","PredictorAdd13");var zr=gt.PredictorAdd2;Xe("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Xe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var ll,Fi=gt.ColorIndexInverseTransform,Ts=gt.MapARGB,Kr=gt.VP8LColorIndexInverseTransformAlpha,qo=gt.MapAlpha,eo=gt.VP8LPredictorsAdd=[];eo.length=16,(gt.VP8LPredictors=[]).length=16,(gt.VP8LPredictorsAdd_C=[]).length=16,(gt.VP8LPredictors_C=[]).length=16;var Ds,Yi,qi,fs,Sr,Yr,no,Jr,wi,Ns,br,ur,$o,Ua,qa,cr,Er,_o,Os,va,bo,wo,io,Xr,Ji,Xn,Kn,ki,ni=a(511),ds=a(2041),xo=a(225),Rs=a(767),ul=0,Lo=ds,ji=xo,ii=Rs,Ar=ni,Mr=0,vn=1,cl=2,Vo=3,Qr=4,hr=5,Il=6,wr=7,xr=8,Is=9,r=10,c=[2,3,7],m=[3,3,11],k=[280,256,256,256,40],F=[0,1,1,1,0],lt=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Vt=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],de=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_e=8,Me=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],We=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],un=null,Mn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Br=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],xi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Fl=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ps=[],ts=[],Ur=[],Gu=1,jl=2,Qn=[],fr=[];be("UpsampleRgbLinePair",On,3),be("UpsampleBgrLinePair",hi,3),be("UpsampleRgbaLinePair",jr,4),be("UpsampleBgraLinePair",Mi,4),be("UpsampleArgbLinePair",Ii,4),be("UpsampleRgba4444LinePair",Zn,2),be("UpsampleRgb565LinePair",Un,2);var Wu=gt.UpsampleRgbLinePair,js=gt.UpsampleBgrLinePair,hu=gt.UpsampleRgbaLinePair,Ho=gt.UpsampleBgraLinePair,hl=gt.UpsampleArgbLinePair,fu=gt.UpsampleRgba4444LinePair,zc=gt.UpsampleRgb565LinePair,du=16,zl=1<<du-1,Ul=-227,Zu=482,hf=6,fl=0,pu=a(256),ff=a(256),df=a(256),gu=a(256),mu=a(Zu-Ul),Uc=a(Zu-Ul);vr("YuvToRgbRow",On,3),vr("YuvToBgrRow",hi,3),vr("YuvToRgbaRow",jr,4),vr("YuvToBgraRow",Mi,4),vr("YuvToArgbRow",Ii,4),vr("YuvToRgba4444Row",Zn,2),vr("YuvToRgb565Row",Un,2);var qc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],vu=[0,2,8],$c=[8,7,6,4,4,2,2,2,1,1,1,1],Vc=1;this.WebPDecodeRGBA=function(d,_,E,O,nt){var at=vn,ut=new zo,pt=new li;ut.ba=pt,pt.S=at,pt.width=[pt.width],pt.height=[pt.height];var bt=pt.width,Tt=pt.height,Yt=new pi;if(Yt==null||d==null)var me=2;else e(Yt!=null),me=hs(d,_,E,Yt.width,Yt.height,Yt.Pd,Yt.Qd,Yt.format,null);if(me!=0?bt=0:(bt!=null&&(bt[0]=Yt.width[0]),Tt!=null&&(Tt[0]=Yt.height[0]),bt=1),bt){pt.width=pt.width[0],pt.height=pt.height[0],O!=null&&(O[0]=pt.width),nt!=null&&(nt[0]=pt.height);t:{if(O=new or,(nt=new Zr).data=d,nt.w=_,nt.ha=E,nt.kd=1,_=[0],e(nt!=null),((d=hs(nt.data,nt.w,nt.ha,null,null,null,_,null,nt))==0||d==7)&&_[0]&&(d=4),(_=d)==0){if(e(ut!=null),O.data=nt.data,O.w=nt.w+nt.offset,O.ha=nt.ha-nt.offset,O.put=Fe,O.ac=ui,O.bc=ti,O.ma=ut,nt.xa){if((d=sr())==null){ut=1;break t}if(function(ve,le){var Ce=[0],we=[0],Qt=[0];e:for(;;){if(ve==null)return 0;if(le==null)return ve.a=2,0;if(ve.l=le,ve.a=0,z(ve.m,le.data,le.w,le.ha),!Qe(ve.m,Ce,we,Qt)){ve.a=3;break e}if(ve.xb=jl,le.width=Ce[0],le.height=we[0],!Ir(Ce[0],we[0],1,ve,null))break e;return 1}return e(ve.a!=0),0}(d,O)){if(O=(_=Qs(O.width,O.height,ut.Oa,ut.ba))==0){e:{O=d;n:for(;;){if(O==null){O=0;break e}if(e(O.s.yc!=null),e(O.s.Ya!=null),e(0<O.s.Wb),e((E=O.l)!=null),e((nt=E.ma)!=null),O.xb!=0){if(O.ca=nt.ba,O.tb=nt.tb,e(O.ca!=null),!za(nt.Oa,E,Vo)){O.a=2;break n}if(!Ps(O,E.width)||E.da)break n;if((E.da||Sn(O.ca.S))&&ue(),11>O.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),O.ca.f.kb.F!=null&&ue()),O.Pb&&0<O.s.ua&&O.s.vb.X==null&&!yt(O.s.vb,O.s.Wa.Xa)){O.a=1;break n}O.xb=0}if(!gr(O,O.V,O.Ba,O.c,O.i,E.o,Cs))break n;nt.Dc=O.Ma,O=1;break e}e(O.a!=0),O=0}O=!O}O&&(_=d.a)}else _=d.a}else{if((d=new Dn)==null){ut=1;break t}if(d.Fa=nt.na,d.P=nt.P,d.qc=nt.Sa,_i(d,O)){if((_=Qs(O.width,O.height,ut.Oa,ut.ba))==0){if(d.Aa=0,E=ut.Oa,e((nt=d)!=null),E!=null){if(0<(bt=0>(bt=E.Md)?0:100<bt?255:255*bt/100)){for(Tt=Yt=0;4>Tt;++Tt)12>(me=nt.pb[Tt]).lc&&(me.ia=bt*$c[0>me.lc?0:me.lc]>>3),Yt|=me.ia;Yt&&(alert("todo:VP8InitRandom"),nt.ia=1)}nt.Ga=E.Id,100<nt.Ga?nt.Ga=100:0>nt.Ga&&(nt.Ga=0)}xn(d,O)||(_=d.a)}}else _=d.a}_==0&&ut.Oa!=null&&ut.Oa.fd&&(_=Xs(ut.ba))}ut=_}at=ut!=0?null:11>at?pt.f.RGBA.eb:pt.f.kb.y}else at=null;return at};var Hc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(gt,_t){for(var zt="",J=0;J<4;J++)zt+=String.fromCharCode(gt[_t++]);return zt}function b(gt,_t){return(gt[_t+0]<<0|gt[_t+1]<<8|gt[_t+2]<<16)>>>0}function w(gt,_t){return(gt[_t+0]<<0|gt[_t+1]<<8|gt[_t+2]<<16|gt[_t+3]<<24)>>>0}new p;var S=[0],x=[0],R=[],N=new p,j=t,U=function(gt,_t){var zt={},J=0,Z=!1,Et=0,Bt=0;if(zt.frames=[],!function(it,rt,$,D){for(var q=0;q<D;q++)if(it[rt+q]!=$.charCodeAt(q))return!0;return!1}(gt,_t,"RIFF",4)){var A,H;for(w(gt,_t+=4),_t+=8;_t<gt.length;){var V=v(gt,_t),z=w(gt,_t+=4);_t+=4;var mt=z+(1&z);switch(V){case"VP8 ":case"VP8L":zt.frames[J]===void 0&&(zt.frames[J]={}),(I=zt.frames[J]).src_off=Z?Bt:_t-8,I.src_size=Et+z+8,J++,Z&&(Z=!1,Et=0,Bt=0);break;case"VP8X":(I=zt.header={}).feature_flags=gt[_t];var ft=_t+4;I.canvas_width=1+b(gt,ft),ft+=3,I.canvas_height=1+b(gt,ft),ft+=3;break;case"ALPH":Z=!0,Et=mt+8,Bt=_t-8;break;case"ANIM":(I=zt.header).bgcolor=w(gt,_t),ft=_t+4,I.loop_count=(A=gt)[(H=ft)+0]<<0|A[H+1]<<8,ft+=2;break;case"ANMF":var ht,I;(I=zt.frames[J]={}).offset_x=2*b(gt,_t),_t+=3,I.offset_y=2*b(gt,_t),_t+=3,I.width=1+b(gt,_t),_t+=3,I.height=1+b(gt,_t),_t+=3,I.duration=b(gt,_t),_t+=3,ht=gt[_t++],I.dispose=1&ht,I.blend=ht>>1&1}V!="ANMF"&&(_t+=mt)}return zt}}(j,0);U.response=j,U.rgbaoutput=!0,U.dataurl=!1;var W=U.header?U.header:null,X=U.frames?U.frames:null;if(W){W.loop_counter=W.loop_count,S=[W.canvas_height],x=[W.canvas_width];for(var St=0;St<X.length&&X[St].blend!=0;St++);}var Mt=X[0],Nt=N.WebPDecodeRGBA(j,Mt.src_off,Mt.src_size,x,S);Mt.rgba=Nt,Mt.imgwidth=x[0],Mt.imgheight=S[0];for(var Lt=0;Lt<x[0]*S[0]*4;Lt++)R[Lt]=Nt[Lt];return this.width=x,this.height=S,this.data=R,this}(function(t){var e=function(){return typeof Ad=="function"},n=function(S,x,R,N){var j=4,U=l;switch(N){case t.image_compression.FAST:j=1,U=a;break;case t.image_compression.MEDIUM:j=6,U=f;break;case t.image_compression.SLOW:j=9,U=p}S=i(S,x,R,U);var W=Ad(S,{level:j});return t.__addimage__.arrayBufferToBinaryString(W)},i=function(S,x,R,N){for(var j,U,W,X=S.length/x,St=new Uint8Array(S.length+X),Mt=b(),Nt=0;Nt<X;Nt+=1){if(W=Nt*x,j=S.subarray(W,W+x),N)St.set(N(j,R,U),W+Nt);else{for(var Lt,gt=Mt.length,_t=[];Lt<gt;Lt+=1)_t[Lt]=Mt[Lt](j,R,U);var zt=w(_t.concat());St.set(_t[zt],W+Nt)}U=j}return St},o=function(S){var x=Array.apply([],S);return x.unshift(0),x},a=function(S,x){var R,N=[],j=S.length;N[0]=1;for(var U=0;U<j;U+=1)R=S[U-x]||0,N[U+1]=S[U]-R+256&255;return N},l=function(S,x,R){var N,j=[],U=S.length;j[0]=2;for(var W=0;W<U;W+=1)N=R&&R[W]||0,j[W+1]=S[W]-N+256&255;return j},f=function(S,x,R){var N,j,U=[],W=S.length;U[0]=3;for(var X=0;X<W;X+=1)N=S[X-x]||0,j=R&&R[X]||0,U[X+1]=S[X]+256-(N+j>>>1)&255;return U},p=function(S,x,R){var N,j,U,W,X=[],St=S.length;X[0]=4;for(var Mt=0;Mt<St;Mt+=1)N=S[Mt-x]||0,j=R&&R[Mt]||0,U=R&&R[Mt-x]||0,W=v(N,j,U),X[Mt+1]=S[Mt]-W+256&255;return X},v=function(S,x,R){if(S===x&&x===R)return S;var N=Math.abs(x-R),j=Math.abs(S-R),U=Math.abs(S+x-R-R);return N<=j&&N<=U?S:j<=U?x:R},b=function(){return[o,a,l,f,p]},w=function(S){var x=S.map(function(R){return R.reduce(function(N,j){return N+Math.abs(j)},0)});return x.indexOf(Math.min.apply(null,x))};t.processPNG=function(S,x,R,N){var j,U,W,X,St,Mt,Nt,Lt,gt,_t,zt,J,Z,Et,Bt,A=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(S)&&(S=new Uint8Array(S)),this.__addimage__.isArrayBufferView(S)){if(S=(W=new sC(S)).imgData,U=W.bits,j=W.colorSpace,St=W.colors,[4,6].indexOf(W.colorType)!==-1){if(W.bits===8){gt=(Lt=W.pixelBitlength==32?new Uint32Array(W.decodePixels().buffer):W.pixelBitlength==16?new Uint16Array(W.decodePixels().buffer):new Uint8Array(W.decodePixels().buffer)).length,zt=new Uint8Array(gt*W.colors),_t=new Uint8Array(gt);var V,z=W.pixelBitlength-W.bits;for(Et=0,Bt=0;Et<gt;Et++){for(Z=Lt[Et],V=0;V<z;)zt[Bt++]=Z>>>V&255,V+=W.bits;_t[Et]=Z>>>V&255}}if(W.bits===16){gt=(Lt=new Uint32Array(W.decodePixels().buffer)).length,zt=new Uint8Array(gt*(32/W.pixelBitlength)*W.colors),_t=new Uint8Array(gt*(32/W.pixelBitlength)),J=W.colors>1,Et=0,Bt=0;for(var mt=0;Et<gt;)Z=Lt[Et++],zt[Bt++]=Z>>>0&255,J&&(zt[Bt++]=Z>>>16&255,Z=Lt[Et++],zt[Bt++]=Z>>>0&255),_t[mt++]=Z>>>16&255;U=8}N!==t.image_compression.NONE&&e()?(S=n(zt,W.width*W.colors,W.colors,N),Nt=n(_t,W.width,1,N)):(S=zt,Nt=_t,A=void 0)}if(W.colorType===3&&(j=this.color_spaces.INDEXED,Mt=W.palette,W.transparency.indexed)){var ft=W.transparency.indexed,ht=0;for(Et=0,gt=ft.length;Et<gt;++Et)ht+=ft[Et];if((ht/=255)===gt-1&&ft.indexOf(0)!==-1)X=[ft.indexOf(0)];else if(ht!==gt){for(Lt=W.decodePixels(),_t=new Uint8Array(Lt.length),Et=0,gt=Lt.length;Et<gt;Et++)_t[Et]=ft[Lt[Et]];Nt=n(_t,W.width,1)}}var I=function(it){var rt;switch(it){case t.image_compression.FAST:rt=11;break;case t.image_compression.MEDIUM:rt=13;break;case t.image_compression.SLOW:rt=14;break;default:rt=12}return rt}(N);return A===this.decode.FLATE_DECODE&&(H="/Predictor "+I+" "),H+="/Colors "+St+" /BitsPerComponent "+U+" /Columns "+W.width,(this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),(Nt&&this.__addimage__.isArrayBuffer(Nt)||this.__addimage__.isArrayBufferView(Nt))&&(Nt=this.__addimage__.arrayBufferToBinaryString(Nt)),{alias:R,data:S,index:x,filter:A,decodeParameters:H,transparency:X,palette:Mt,sMask:Nt,predictor:I,width:W.width,height:W.height,bitsPerComponent:U,colorSpace:j}}}})(wn.API),function(t){t.processGIF89A=function(e,n,i,o){var a=new oC(e),l=a.width,f=a.height,p=[];a.decodeAndBlitFrameRGBA(0,p);var v={data:p,width:l,height:f},b=new Kf(100).encode(v,100);return t.processJPEG.call(this,b,n,i,o)},t.processGIF87A=t.processGIF89A}(wn.API),Wo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:i,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){gi.log("bit decode error:"+n)}},Wo.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*o*4,f=0;f<8&&8*o+f<this.width;f++){var p=this.palette[a>>7-f&1];this.data[l+4*f]=p.blue,this.data[l+4*f+1]=p.green,this.data[l+4*f+2]=p.red,this.data[l+4*f+3]=255}n!==0&&(this.pos+=4-n)}},Wo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*o*4,f=a>>4,p=15&a,v=this.palette[f];if(this.data[l]=v.blue,this.data[l+1]=v.green,this.data[l+2]=v.red,this.data[l+3]=255,2*o+1>=this.width)break;v=this.palette[p],this.data[l+4]=v.blue,this.data[l+4+1]=v.green,this.data[l+4+2]=v.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},Wo.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*i;if(o<this.palette.length){var l=this.palette[o];this.data[a]=l.red,this.data[a+1]=l.green,this.data[a+2]=l.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},Wo.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&e)/e*255|0,f=(a>>5&e)/e*255|0,p=(a>>10&e)/e*255|0,v=a>>15?255:0,b=i*this.width*4+4*o;this.data[b]=p,this.data[b+1]=f,this.data[b+2]=l,this.data[b+3]=v}this.pos+=t}},Wo.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(l&e)/e*255|0,p=(l>>5&n)/n*255|0,v=(l>>11)/e*255|0,b=o*this.width*4+4*a;this.data[b]=v,this.data[b+1]=p,this.data[b+2]=f,this.data[b+3]=255}this.pos+=t}},Wo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=a,this.data[l+1]=o,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},Wo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),f=e*this.width*4+4*n;this.data[f]=a,this.data[f+1]=o,this.data[f+2]=i,this.data[f+3]=l}},Wo.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,i,o){var a=new Wo(e,!1),l=a.width,f=a.height,p={data:a.getData(),width:l,height:f},v=new Kf(100).encode(p,100);return t.processJPEG.call(this,v,n,i,o)}}(wn.API),bg.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,i,o){var a=new bg(e),l=a.width,f=a.height,p={data:a.getData(),width:l,height:f},v=new Kf(100).encode(p,100);return t.processJPEG.call(this,v,n,i,o)}}(wn.API),wn.API.processRGBA=function(t,e,n){for(var i=t.data,o=i.length,a=new Uint8Array(o/4*3),l=new Uint8Array(o/4),f=0,p=0,v=0;v<o;v+=4){var b=i[v],w=i[v+1],S=i[v+2],x=i[v+3];a[f++]=b,a[f++]=w,a[f++]=S,l[p++]=x}var R=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:R,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},wn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Lu=wn.API,sh=Lu.getCharWidthsArray=function(t,e){var n,i,o=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),f=e.widths?e.widths:o.metadata.Unicode.widths,p=f.fof?f.fof:1,v=e.kerning?e.kerning:o.metadata.Unicode.kerning,b=v.fof?v.fof:1,w=e.doKerning!==!1,S=0,x=t.length,R=0,N=f[0]||p,j=[];for(n=0;n<x;n++)i=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?j.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+l*(1e3/a)||0)/1e3):(S=w&&fi(v[i])==="object"&&!isNaN(parseInt(v[i][R],10))?v[i][R]/b:0,j.push((f[i]||N)/p+S)),R=i;return j},mg=Lu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return Lu.processArabic&&(t=Lu.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,o)/n:sh.apply(this,arguments).reduce(function(a,l){return a+l},0)},vg=function(t,e,n,i){for(var o=[],a=0,l=t.length,f=0;a!==l&&f+e[a]<n;)f+=e[a],a++;o.push(t.slice(0,a));var p=a;for(f=0;a!==l;)f+e[a]>i&&(o.push(t.slice(p,a)),f=0,p=a),f+=e[a],a++;return p!==a&&o.push(t.slice(p,a)),o},yg=function(t,e,n){n||(n={});var i,o,a,l,f,p,v,b=[],w=[b],S=n.textIndent||0,x=0,R=0,N=t.split(" "),j=sh.apply(this,[" ",n])[0];if(p=n.lineIndent===-1?N[0].length+2:n.lineIndent||0){var U=Array(p).join(" "),W=[];N.map(function(St){(St=St.split(/\s*\n/)).length>1?W=W.concat(St.map(function(Mt,Nt){return(Nt&&Mt.length?`
`:"")+Mt})):W.push(St[0])}),N=W,p=mg.apply(this,[U,n])}for(a=0,l=N.length;a<l;a++){var X=0;if(i=N[a],p&&i[0]==`
`&&(i=i.substr(1),X=1),S+x+(R=(o=sh.apply(this,[i,n])).reduce(function(St,Mt){return St+Mt},0))>e||X){if(R>e){for(f=vg.apply(this,[i,o,e-(S+x),e]),b.push(f.shift()),b=[f.pop()];f.length;)w.push([f.shift()]);R=o.slice(i.length-(b[0]?b[0].length:0)).reduce(function(St,Mt){return St+Mt},0)}else b=[i];w.push(b),S=R+p,x=j}else b.push(i),S+=x+R,x=j}return v=p?function(St,Mt){return(Mt?U:"")+St.join(" ")}:function(St){return St.join(" ")},w.map(v)},Lu.splitTextToSize=function(t,e,n){var i,o=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(b){if(b.widths&&b.kerning)return{widths:b.widths,kerning:b.kerning};var w=this.internal.getFont(b.fontName,b.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/o;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,a.lineIndent=n.lineIndent;var f,p,v=[];for(f=0,p=i.length;f<p;f++)v=v.concat(yg.apply(this,[i[f],l,a]));return v},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},o=0;o<e.length;o++)n[e[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=e[o];var a=function(w){return"0x"+parseInt(w,10).toString(16)},l=t.__fontmetrics__.compress=function(w){var S,x,R,N,j=["{"];for(var U in w){if(S=w[U],isNaN(parseInt(U,10))?x="'"+U+"'":(U=parseInt(U,10),x=(x=a(U).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof S=="number")S<0?(R=a(S).slice(3),N="-"):(R=a(S).slice(2),N=""),R=N+R.slice(0,-1)+i[R.slice(-1)];else{if(fi(S)!=="object")throw new Error("Don't know what to do with value type "+fi(S)+".");R=l(S)}j.push(x+R)}return j.push("}"),j.join("")},f=t.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var S,x,R,N,j={},U=1,W=j,X=[],St="",Mt="",Nt=w.length-1,Lt=1;Lt<Nt;Lt+=1)(N=w[Lt])=="'"?S?(R=S.join(""),S=void 0):S=[]:S?S.push(N):N=="{"?(X.push([W,R]),W={},R=void 0):N=="}"?((x=X.pop())[0][x[1]]=W,R=void 0,W=x[0]):N=="-"?U=-1:R===void 0?n.hasOwnProperty(N)?(St+=n[N],R=parseInt(St,16)*U,U=1,St=""):St+=N:n.hasOwnProperty(N)?(Mt+=n[N],W[R]=parseInt(Mt,16)*U,U=1,R=void 0,Mt=""):Mt+=N;return j},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},b={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(w){var S=w.font,x=b.Unicode[S.postScriptName];x&&(S.metadata.Unicode={},S.metadata.Unicode.widths=x.widths,S.metadata.Unicode.kerning=x.kerning);var R=v.Unicode[S.postScriptName];R&&(S.metadata.Unicode.encoding=R,S.encoding=R.codePages[0])}])}(wn.API),function(t){var e=function(n){for(var i=n.length,o=new Uint8Array(i),a=0;a<i;a++)o[a]=n.charCodeAt(a);return o};t.API.events.push(["addFont",function(n){var i=void 0,o=n.font,a=n.instance;if(!o.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=a.existsFileInVFS(o.postScriptName)===!1?a.loadFile(o.postScriptName):a.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(l,f){f=/^\x00\x01\x00\x00/.test(f)?e(f):e(bc(f)),l.metadata=t.API.TTFFont.open(f),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(o,i)}}])}(wn),function(t){function e(){return(Cn.canvg?Promise.resolve(Cn.canvg):Ql(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}wn.API.addSvgAsImage=function(n,i,o,a,l,f,p,v){if(isNaN(i)||isNaN(o))throw gi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(l))throw gi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var b=document.createElement("canvas");b.width=a,b.height=l;var w=b.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,b.width,b.height);var S={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return e().then(function(R){return R.fromString(w,n,S)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(R){return R.render(S)}).then(function(){x.addImage(b.toDataURL("image/jpeg",1),i,o,a,l,p,v)})}}(),wn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(e,n);return this},wn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,o,a,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},f=Object.keys(l),p=[],v=0,b=0,w=0;function S(R,N){var j,U=!1;for(j=0;j<R.length;j+=1)R[j]===N&&(U=!0);return U}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var x=f.length;for(w=0;w<x;w+=1)n[f[w]].value=n[f[w]].defaultValue,n[f[w]].explicitSet=!1}if(fi(t)==="object"){for(o in t)if(a=t[o],S(f,o)&&a!==void 0){if(n[o].type==="boolean"&&typeof a=="boolean")n[o].value=a;else if(n[o].type==="name"&&S(n[o].valueSet,a))n[o].value=a;else if(n[o].type==="integer"&&Number.isInteger(a))n[o].value=a;else if(n[o].type==="array"){for(v=0;v<a.length;v+=1)if(i=!0,a[v].length===1&&typeof a[v][0]=="number")p.push(String(a[v]-1));else if(a[v].length>1){for(b=0;b<a[v].length;b+=1)typeof a[v][b]!="number"&&(i=!1);i===!0&&p.push([a[v][0]-1,a[v][1]-1].join(" "))}n[o].value="["+p.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var R,N=[];for(R in n)n[R].explicitSet===!0&&(n[R].type==="name"?N.push("/"+R+" /"+n[R].value):N.push("/"+R+" "+n[R].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),f=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),v=a.length+l.length+f.length+o.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(o+a+l+f+p),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(wn.API),function(t){var e=t.API,n=e.pdfEscape16=function(a,l){for(var f,p=l.metadata.Unicode.widths,v=["","0","00","000","0000"],b=[""],w=0,S=a.length;w<S;++w){if(f=l.metadata.characterToGlyph(a.charCodeAt(w)),l.metadata.glyIdsUsed.push(f),l.metadata.toUnicode[f]=a.charCodeAt(w),p.indexOf(f)==-1&&(p.push(f),p.push([parseInt(l.metadata.widthOfGlyph(f),10)])),f=="0")return b.join("");f=f.toString(16),b.push(v[4-f.length],f)}return b.join("")},i=function(a){var l,f,p,v,b,w,S;for(b=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],w=0,S=(f=Object.keys(a).sort(function(x,R){return x-R})).length;w<S;w++)l=f[w],p.length>=100&&(b+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),a[l]!==void 0&&a[l]!==null&&typeof a[l].toString=="function"&&(v=("0000"+a[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),p.push("<"+l+"><"+v+">"));return p.length&&(b+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),b+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(l){var f=l.font,p=l.out,v=l.newObject,b=l.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="Identity-H"){for(var w=f.metadata.Unicode.widths,S=f.metadata.subset.encode(f.metadata.glyIdsUsed,1),x="",R=0;R<S.length;R++)x+=String.fromCharCode(S[R]);var N=v();b({data:x,addLength1:!0,objectId:N}),p("endobj");var j=v();b({data:i(f.metadata.toUnicode),addLength1:!0,objectId:j}),p("endobj");var U=v();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+Mu(f.fontName)),p("/FontFile2 "+N+" 0 R"),p("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),p("/Flags "+f.metadata.flags),p("/StemV "+f.metadata.stemV),p("/ItalicAngle "+f.metadata.italicAngle),p("/Ascent "+f.metadata.ascender),p("/Descent "+f.metadata.decender),p("/CapHeight "+f.metadata.capHeight),p(">>"),p("endobj");var W=v();p("<<"),p("/Type /Font"),p("/BaseFont /"+Mu(f.fontName)),p("/FontDescriptor "+U+" 0 R"),p("/W "+t.API.PDFObject.convert(w)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+f.encoding+")"),p(">>"),p(">>"),p("endobj"),f.objectNumber=v(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+j+" 0 R"),p("/BaseFont /"+Mu(f.fontName)),p("/Encoding /"+f.encoding),p("/DescendantFonts ["+W+" 0 R]"),p(">>"),p("endobj"),f.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(l){var f=l.font,p=l.out,v=l.newObject,b=l.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="WinAnsiEncoding"){for(var w=f.metadata.rawData,S="",x=0;x<w.length;x++)S+=String.fromCharCode(w[x]);var R=v();b({data:S,addLength1:!0,objectId:R}),p("endobj");var N=v();b({data:i(f.metadata.toUnicode),addLength1:!0,objectId:N}),p("endobj");var j=v();p("<<"),p("/Descent "+f.metadata.decender),p("/CapHeight "+f.metadata.capHeight),p("/StemV "+f.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+R+" 0 R"),p("/Flags 96"),p("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),p("/FontName /"+Mu(f.fontName)),p("/ItalicAngle "+f.metadata.italicAngle),p("/Ascent "+f.metadata.ascender),p(">>"),p("endobj"),f.objectNumber=v();for(var U=0;U<f.metadata.hmtx.widths.length;U++)f.metadata.hmtx.widths[U]=parseInt(f.metadata.hmtx.widths[U]*(1e3/f.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Mu(f.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+f.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(f.metadata.hmtx.widths)+">>"),p("endobj"),f.isAlreadyPutted=!0}})(a)}]);var o=function(a){var l,f=a.text||"",p=a.x,v=a.y,b=a.options||{},w=a.mutex||{},S=w.pdfEscape,x=w.activeFontKey,R=w.fonts,N=x,j="",U=0,W="",X=R[N].encoding;if(R[N].encoding!=="Identity-H")return{text:f,x:p,y:v,options:b,mutex:w};for(W=f,N=x,Array.isArray(f)&&(W=f[0]),U=0;U<W.length;U+=1)R[N].metadata.hasOwnProperty("cmap")&&(l=R[N].metadata.cmap.unicode.codeMap[W[U].charCodeAt(0)]),l||W[U].charCodeAt(0)<256&&R[N].metadata.hasOwnProperty("Unicode")?j+=W[U]:j+="";var St="";return parseInt(N.slice(1))<14||X==="WinAnsiEncoding"?St=S(j,N).split("").map(function(Mt){return Mt.charCodeAt(0).toString(16)}).join(""):X==="Identity-H"&&(St=n(j,R[N])),w.isHex=!0,{text:St,x:p,y:v,options:b,mutex:w}};e.events.push(["postProcessText",function(a){var l=a.text||"",f=[],p={text:l,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(l)){var v=0;for(v=0;v<l.length;v+=1)Array.isArray(l[v])&&l[v].length===3?f.push([o(Object.assign({},p,{text:l[v][0]})).text,l[v][1],l[v][2]]):f.push(o(Object.assign({},p,{text:l[v]})).text);a.text=f}else a.text=o(Object.assign({},p,{text:l})).text}])}(wn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(wn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var o,a,l,f,p,v,b,w=e,S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],R={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],U=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),W=!1,X=0;this.__bidiEngine__={};var St=function(J){var Z=J.charCodeAt(),Et=Z>>8,Bt=N[Et];return Bt!==void 0?w[256*Bt+(255&Z)]:Et===252||Et===253?"AL":U.test(Et)?"L":Et===8?"R":"N"},Mt=function(J){for(var Z,Et=0;Et<J.length;Et++){if((Z=St(J.charAt(Et)))==="L")return!1;if(Z==="R")return!0}return!1},Nt=function(J,Z,Et,Bt){var A,H,V,z,mt=Z[Bt];switch(mt){case"L":case"R":W=!1;break;case"N":case"AN":break;case"EN":W&&(mt="AN");break;case"AL":W=!0,mt="R";break;case"WS":mt="N";break;case"CS":Bt<1||Bt+1>=Z.length||(A=Et[Bt-1])!=="EN"&&A!=="AN"||(H=Z[Bt+1])!=="EN"&&H!=="AN"?mt="N":W&&(H="AN"),mt=H===A?H:"N";break;case"ES":mt=(A=Bt>0?Et[Bt-1]:"B")==="EN"&&Bt+1<Z.length&&Z[Bt+1]==="EN"?"EN":"N";break;case"ET":if(Bt>0&&Et[Bt-1]==="EN"){mt="EN";break}if(W){mt="N";break}for(V=Bt+1,z=Z.length;V<z&&Z[V]==="ET";)V++;mt=V<z&&Z[V]==="EN"?"EN":"N";break;case"NSM":if(l&&!f){for(z=Z.length,V=Bt+1;V<z&&Z[V]==="NSM";)V++;if(V<z){var ft=J[Bt],ht=ft>=1425&&ft<=2303||ft===64286;if(A=Z[V],ht&&(A==="R"||A==="AL")){mt="R";break}}}mt=Bt<1||(A=Z[Bt-1])==="B"?"N":Et[Bt-1];break;case"B":W=!1,o=!0,mt=X;break;case"S":a=!0,mt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":W=!1;break;case"BN":mt="N"}return mt},Lt=function(J,Z,Et){var Bt=J.split("");return Et&&gt(Bt,Et,{hiLevel:X}),Bt.reverse(),Z&&Z.reverse(),Bt.join("")},gt=function(J,Z,Et){var Bt,A,H,V,z,mt=-1,ft=J.length,ht=0,I=[],it=X?x:S,rt=[];for(W=!1,o=!1,a=!1,A=0;A<ft;A++)rt[A]=St(J[A]);for(H=0;H<ft;H++){if(z=ht,I[H]=Nt(J,rt,I,H),Bt=240&(ht=it[z][R[I[H]]]),ht&=15,Z[H]=V=it[ht][5],Bt>0)if(Bt===16){for(A=mt;A<H;A++)Z[A]=1;mt=-1}else mt=-1;if(it[ht][6])mt===-1&&(mt=H);else if(mt>-1){for(A=mt;A<H;A++)Z[A]=V;mt=-1}rt[H]==="B"&&(Z[H]=0),Et.hiLevel|=V}a&&function($,D,q){for(var dt=0;dt<q;dt++)if($[dt]==="S"){D[dt]=X;for(var ct=dt-1;ct>=0&&$[ct]==="WS";ct--)D[ct]=X}}(rt,Z,ft)},_t=function(J,Z,Et,Bt,A){if(!(A.hiLevel<J)){if(J===1&&X===1&&!o)return Z.reverse(),void(Et&&Et.reverse());for(var H,V,z,mt,ft=Z.length,ht=0;ht<ft;){if(Bt[ht]>=J){for(z=ht+1;z<ft&&Bt[z]>=J;)z++;for(mt=ht,V=z-1;mt<V;mt++,V--)H=Z[mt],Z[mt]=Z[V],Z[V]=H,Et&&(H=Et[mt],Et[mt]=Et[V],Et[V]=H);ht=z}ht++}}},zt=function(J,Z,Et){var Bt=J.split(""),A={hiLevel:X};return Et||(Et=[]),gt(Bt,Et,A),function(H,V,z){if(z.hiLevel!==0&&b)for(var mt,ft=0;ft<H.length;ft++)V[ft]===1&&(mt=j.indexOf(H[ft]))>=0&&(H[ft]=j[mt+1])}(Bt,Et,A),_t(2,Bt,Z,Et,A),_t(1,Bt,Z,Et,A),Bt.join("")};return this.__bidiEngine__.doBidiReorder=function(J,Z,Et){if(function(A,H){if(H)for(var V=0;V<A.length;V++)H[V]=V;f===void 0&&(f=Mt(A)),v===void 0&&(v=Mt(A))}(J,Z),l||!p||v)if(l&&p&&f^v)X=f?1:0,J=Lt(J,Z,Et);else if(!l&&p&&v)X=f?1:0,J=zt(J,Z,Et),J=Lt(J,Z);else if(!l||f||p||v){if(l&&!p&&f^v)J=Lt(J,Z),f?(X=0,J=zt(J,Z,Et)):(X=1,J=zt(J,Z,Et),J=Lt(J,Z));else if(l&&f&&!p&&v)X=1,J=zt(J,Z,Et),J=Lt(J,Z);else if(!l&&!p&&f^v){var Bt=b;f?(X=1,J=zt(J,Z,Et),X=0,b=!1,J=zt(J,Z,Et),b=Bt):(X=0,J=zt(J,Z,Et),J=Lt(J,Z),X=1,b=!1,J=zt(J,Z,Et),b=Bt,J=Lt(J,Z))}}else X=0,J=zt(J,Z,Et);else X=f?1:0,J=zt(J,Z,Et);return J},this.__bidiEngine__.setOptions=function(J){J&&(l=J.isInputVisual,p=J.isOutputVisual,f=J.isInputRtl,v=J.isOutputRtl,b=J.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var o=i.text,a=(i.x,i.y,i.options||{}),l=(i.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(o)==="[object Array]"){var f=0;for(l=[],f=0;f<o.length;f+=1)Object.prototype.toString.call(o[f])==="[object Array]"?l.push([n.doBidiReorder(o[f][0]),o[f][1],o[f][2]]):l.push([n.doBidiReorder(o[f])]);i.text=l}else i.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])}(wn),wn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Nl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new wC(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new aC(this.contents),this.head=new uC(this),this.name=new pC(this),this.cmap=new sv(this),this.toUnicode={},this.hhea=new cC(this),this.maxp=new gC(this),this.hmtx=new mC(this),this.post=new fC(this),this.os2=new hC(this),this.loca=new bC(this),this.glyf=new vC(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,o,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,f,p,v;for(v=[],l=0,f=(p=this.bbox).length;l<f;l++)e=p[l],v.push(Math.round(e*this.scaleFactor));return v}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),32768&(n=o>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var o,a,l,f;for(l=0,a=0,f=(e=""+e).length;0<=f?a<f:a>f;a=0<=f?++a:--a)o=e.charCodeAt(a),l+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/n)||0;return l*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t}();var ea,Nl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,o;for(o=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)o.push(this.writeByte(e.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,o,a,l,f,p;return e=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),f=this.readByte(),p=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^a)+65536*(255^l)+256*(255^f)+(255^p)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*o+16777216*a+65536*l+256*f+p},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,o,a;for(a=[],i=0,o=e.length;i<o;i++)n=e[i],a.push(this.writeByte(n));return a},t}(),aC=function(){var t;function e(n){var i,o,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,a=this.tableCount;0<=a?o<a:o>a;o=0<=a?++o:--o)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,o,a,l,f,p,v,b,w,S,x,R,N;for(N in x=Object.keys(n).length,p=Math.log(2),w=16*Math.floor(Math.log(x)/p),l=Math.floor(w/p),b=16*x-w,(o=new Nl).writeInt(this.scalarType),o.writeShort(x),o.writeShort(w),o.writeShort(l),o.writeShort(b),a=16*x,v=o.pos+a,f=null,R=[],n)for(S=n[N],o.writeString(N),o.writeInt(t(S)),o.writeInt(v),o.writeInt(S.length),R=R.concat(S),N==="head"&&(f=v),v+=S.length;v%4;)R.push(0),v++;return o.write(R),i=2981146554-t(o.data),o.pos=f+8,o.writeUInt32(i),o.data},t=function(n){var i,o,a,l;for(n=ov.call(n);n.length%4;)n.push(0);for(a=new Nl(n),o=0,i=0,l=n.length;i<l;i=i+=4)o+=a.readUInt32();return 4294967295&o},e}(),lC={}.hasOwnProperty,Aa=function(t,e){for(var n in e)lC.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};ea=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var uC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new Nl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e}(),wg=function(){function t(e,n){var i,o,a,l,f,p,v,b,w,S,x,R,N,j,U,W,X;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=e.readByte();break;case 4:for(x=e.readUInt16(),S=x/2,e.pos+=6,a=function(){var St,Mt;for(Mt=[],p=St=0;0<=S?St<S:St>S;p=0<=S?++St:--St)Mt.push(e.readUInt16());return Mt}(),e.pos+=2,N=function(){var St,Mt;for(Mt=[],p=St=0;0<=S?St<S:St>S;p=0<=S?++St:--St)Mt.push(e.readUInt16());return Mt}(),v=function(){var St,Mt;for(Mt=[],p=St=0;0<=S?St<S:St>S;p=0<=S?++St:--St)Mt.push(e.readUInt16());return Mt}(),b=function(){var St,Mt;for(Mt=[],p=St=0;0<=S?St<S:St>S;p=0<=S?++St:--St)Mt.push(e.readUInt16());return Mt}(),o=(this.length-e.pos+this.offset)/2,f=function(){var St,Mt;for(Mt=[],p=St=0;0<=o?St<o:St>o;p=0<=o?++St:--St)Mt.push(e.readUInt16());return Mt}(),p=U=0,X=a.length;U<X;p=++U)for(j=a[p],i=W=R=N[p];R<=j?W<=j:W>=j;i=R<=j?++W:--W)b[p]===0?l=i+v[p]:(l=f[b[p]/2+(i-R)-(S-p)]||0)!==0&&(l+=v[p]),this.codeMap[i]=65535&l}e.pos=w}return t.encode=function(e,n){var i,o,a,l,f,p,v,b,w,S,x,R,N,j,U,W,X,St,Mt,Nt,Lt,gt,_t,zt,J,Z,Et,Bt,A,H,V,z,mt,ft,ht,I,it,rt,$,D,q,dt,ct,At,Ot,G;switch(Bt=new Nl,l=Object.keys(e).sort(function(tt,yt){return tt-yt}),n){case"macroman":for(N=0,j=function(){var tt=[];for(R=0;R<256;++R)tt.push(0);return tt}(),W={0:0},a={},A=0,mt=l.length;A<mt;A++)W[ct=e[o=l[A]]]==null&&(W[ct]=++N),a[o]={old:e[o],new:W[e[o]]},j[o]=W[e[o]];return Bt.writeUInt16(1),Bt.writeUInt16(0),Bt.writeUInt32(12),Bt.writeUInt16(0),Bt.writeUInt16(262),Bt.writeUInt16(0),Bt.write(j),{charMap:a,subtable:Bt.data,maxGlyphID:N+1};case"unicode":for(Z=[],w=[],X=0,W={},i={},U=v=null,H=0,ft=l.length;H<ft;H++)W[Mt=e[o=l[H]]]==null&&(W[Mt]=++X),i[o]={old:Mt,new:W[Mt]},f=W[Mt]-o,U!=null&&f===v||(U&&w.push(U),Z.push(o),v=f),U=o;for(U&&w.push(U),w.push(65535),Z.push(65535),zt=2*(_t=Z.length),gt=2*Math.pow(Math.log(_t)/Math.LN2,2),S=Math.log(gt/2)/Math.LN2,Lt=2*_t-gt,p=[],Nt=[],x=[],R=V=0,ht=Z.length;V<ht;R=++V){if(J=Z[R],b=w[R],J===65535){p.push(0),Nt.push(0);break}if(J-(Et=i[J].new)>=32768)for(p.push(0),Nt.push(2*(x.length+_t-R)),o=z=J;J<=b?z<=b:z>=b;o=J<=b?++z:--z)x.push(i[o].new);else p.push(Et-J),Nt.push(0)}for(Bt.writeUInt16(3),Bt.writeUInt16(1),Bt.writeUInt32(12),Bt.writeUInt16(4),Bt.writeUInt16(16+8*_t+2*x.length),Bt.writeUInt16(0),Bt.writeUInt16(zt),Bt.writeUInt16(gt),Bt.writeUInt16(S),Bt.writeUInt16(Lt),q=0,I=w.length;q<I;q++)o=w[q],Bt.writeUInt16(o);for(Bt.writeUInt16(0),dt=0,it=Z.length;dt<it;dt++)o=Z[dt],Bt.writeUInt16(o);for(At=0,rt=p.length;At<rt;At++)f=p[At],Bt.writeUInt16(f);for(Ot=0,$=Nt.length;Ot<$;Ot++)St=Nt[Ot],Bt.writeUInt16(St);for(G=0,D=x.length;G<D;G++)N=x[G],Bt.writeUInt16(N);return{charMap:i,subtable:Bt.data,maxGlyphID:X+1}}},t}(),sv=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,o,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)i=new wg(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var o,a;return i==null&&(i="macroman"),o=wg.encode(n,i),(a=new Nl).writeUInt16(0),a.writeUInt16(1),o.table=a.data.concat(o.subtable),o},e}(),cC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),hC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var i,o;for(o=[],i=0;i<10;++i)o.push(n.readByte());return o}(),this.charRange=function(){var i,o;for(o=[],i=0;i<4;++i)o.push(n.readInt());return o}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(n.readInt());return o}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),fC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="post",e.prototype.parse=function(n){var i,o,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var l;for(o=n.readUInt16(),this.glyphNameIndex=[],l=0;0<=o?l<o:l>o;l=0<=o?++l:--l)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)i=n.readByte(),a.push(this.names.push(n.readString(i)));return a;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var f,p,v;for(v=[],l=f=0,p=this.file.maxp.numGlyphs;0<=p?f<p:f>p;l=0<=p?++f:--f)v.push(n.readUInt32());return v}).call(this)}},e}(),dC=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="name",e.prototype.parse=function(n){var i,o,a,l,f,p,v,b,w,S,x;for(n.pos=this.offset,n.readShort(),i=n.readShort(),p=n.readShort(),o=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+p+n.readShort()});for(v={},l=w=0,S=o.length;w<S;l=++w)a=o[l],n.pos=a.offset,b=n.readString(a.length),f=new dC(b,a),v[x=a.nameID]==null&&(v[x]=[]),v[a.nameID].push(f);this.strings=v,this.copyright=v[0],this.fontFamily=v[1],this.fontSubfamily=v[2],this.uniqueSubfamily=v[3],this.fontName=v[4],this.version=v[5];try{this.postscriptName=v[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=v[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=v[7],this.manufacturer=v[8],this.designer=v[9],this.description=v[10],this.vendorUrl=v[11],this.designerUrl=v[12],this.license=v[13],this.licenseUrl=v[14],this.preferredFamily=v[15],this.preferredSubfamily=v[17],this.compatibleFull=v[18],this.sampleText=v[19]},e}(),gC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),mC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,o,a,l,f,p,v;for(n.pos=this.offset,this.metrics=[],i=0,p=this.file.hhea.numberOfMetrics;0<=p?i<p:i>p;i=0<=p?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var b,w;for(w=[],i=b=0;0<=a?b<a:b>a;i=0<=a?++b:--b)w.push(n.readInt16());return w}(),this.widths=(function(){var b,w,S,x;for(x=[],b=0,w=(S=this.metrics).length;b<w;b++)l=S[b],x.push(l.advance);return x}).call(this),o=this.widths[this.widths.length-1],v=[],i=f=0;0<=a?f<a:f>a;i=0<=a?++f:--f)v.push(this.widths.push(o));return v},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),ov=[].slice,vC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,o,a,l,f,p,v,b,w,S;return n in this.cache?this.cache[n]:(l=this.file.loca,i=this.file.contents,o=l.indexOf(n),(a=l.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+o,f=(p=new Nl(i.read(a))).readShort(),b=p.readShort(),S=p.readShort(),v=p.readShort(),w=p.readShort(),this.cache[n]=f===-1?new _C(p,b,S,v,w):new yC(p,f,b,S,v,w),this.cache[n]))},e.prototype.encode=function(n,i,o){var a,l,f,p,v;for(f=[],l=[],p=0,v=i.length;p<v;p++)a=n[i[p]],l.push(f.length),a&&(f=f.concat(a.encode(o)));return l.push(f.length),{table:f,offsets:l}},e}(),yC=function(){function t(e,n,i,o,a,l){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=o,this.xMax=a,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),_C=function(){function t(e,n,i,o,a){var l,f;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;f=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&f;)l.pos+=1&f?4:2,128&f?l.pos+=8:64&f?l.pos+=4:8&f&&(l.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new Nl(ov.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),bC=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,ea),e.prototype.tag="loca",e.prototype.parse=function(n){var i,o;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var a,l;for(l=[],o=0,a=this.length;o<a;o+=2)l.push(2*n.readUInt16());return l}).call(this):(function(){var a,l;for(l=[],o=0,a=this.length;o<a;o+=4)l.push(n.readUInt32());return l}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var o=new Uint32Array(this.offsets.length),a=0,l=0,f=0;f<o.length;++f)if(o[f]=a,l<i.length&&i[l]==f){++l,o[f]=a;var p=this.offsets[f],v=this.offsets[f+1]-p;v>0&&(a+=v)}for(var b=new Array(4*o.length),w=0;w<o.length;++w)b[4*w+3]=255&o[w],b[4*w+2]=(65280&o[w])>>8,b[4*w+1]=(16711680&o[w])>>16,b[4*w]=(4278190080&o[w])>>24;return b},e}(),wC=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,o,a;for(n in o=this.font.cmap.tables[0].codeMap,e={},a=this.subset)i=a[n],e[n]=o[i];return e},t.prototype.glyphsFor=function(e){var n,i,o,a,l,f,p;for(o={},l=0,f=e.length;l<f;l++)o[a=e[l]]=this.font.glyf.glyphFor(a);for(a in n=[],o)(i=o[a])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(a in p=this.glyphsFor(n))i=p[a],o[a]=i;return o},t.prototype.encode=function(e,n){var i,o,a,l,f,p,v,b,w,S,x,R,N,j,U;for(o in i=sv.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),x={0:0},U=i.charMap)x[(p=U[o]).old]=p.new;for(R in S=i.maxGlyphID,l)R in x||(x[R]=S++);return b=function(W){var X,St;for(X in St={},W)St[W[X]]=X;return St}(x),w=Object.keys(b).sort(function(W,X){return W-X}),N=function(){var W,X,St;for(St=[],W=0,X=w.length;W<X;W++)f=w[W],St.push(b[f]);return St}(),a=this.font.glyf.encode(l,N,x),v=this.font.loca.encode(a.offsets,N),j={cmap:this.font.cmap.raw(),glyf:a.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},t}();wn.API.PDFObject=function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,o,a,l;if(Array.isArray(n))return"["+function(){var f,p,v;for(v=[],f=0,p=n.length;f<p;f++)i=n[f],v.push(e.convert(i));return v}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in a=["<<"],n)l=n[o],a.push("/"+o+" "+e.convert(l));return a.push(">>"),a.join(`
`)}return""+n},e}();const xC={class:"h-full flex"},LC={class:"flex-1 relative"},CC={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},PC={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},kC={class:"text-center max-w-lg mx-auto p-8"},SC={class:"space-y-4"},EC={class:"relative h-full w-full overflow-hidden flex flex-col"},AC={key:0,class:"z-[1000]"},MC={class:"flex-1 flex overflow-hidden"},BC={class:"flex-1 relative"},TC={key:0,class:"w-64 bg-white border-l border-gray-200 flex-shrink-0"},DC={key:1,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},NC={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},OC={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},RC={class:"flex justify-between items-center mb-4"},IC={key:0,class:"space-y-4"},FC={key:0,class:"space-y-2"},jC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},zC=["onClick"],UC={class:"font-medium text-gray-900"},qC={key:1,class:"space-y-2"},$C={class:"flex items-center mb-4"},VC={class:"text-sm text-gray-600"},HC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},GC=["onClick"],WC={class:"font-medium text-gray-900"},ZC={key:2,class:"space-y-2"},KC={class:"flex items-center mb-4"},YC={class:"text-sm text-gray-600"},JC={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},XC=["onClick"],QC={class:"font-medium text-gray-900"},tP={class:"text-sm text-gray-500"},eP={class:"text-xs text-gray-400 mt-1"},nP={key:1,class:"space-y-4"},iP={key:0,class:"space-y-2"},rP={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},sP=["onClick"],oP={class:"font-medium text-gray-900"},aP={key:1,class:"space-y-2"},lP={class:"flex items-center mb-4"},uP={class:"text-sm text-gray-600"},cP={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},hP=["onClick"],fP={class:"font-medium text-gray-900"},dP={class:"text-sm text-gray-500"},pP={class:"text-xs text-gray-400 mt-1"},gP={key:2,class:"max-h-96 overflow-y-auto"},mP={key:0,class:"text-center py-8"},vP={key:1,class:"space-y-2"},yP=["onClick"],_P={class:"font-medium text-gray-900"},bP={class:"text-sm text-gray-500"},wP={class:"text-xs text-gray-400 mt-1"},xg=Ls({__name:"MapView",setup(t){const e=Ie(null),n=sp(),i=F1(),o=Ie([]),{currentTool:a,selectedShape:l,map:f,initMap:p,setDrawingTool:v,updateShapeStyle:b,updateShapeProperties:w,featureGroup:S,adjustView:x,clearActiveControlPoints:R}=sL(),{initMap:N,changeBaseMap:j}=oL(),U=Ie(!1),W=Ie(!1),X=Ie(null),St=Ie(!1),Mt=Ie(null),Nt=xs(),Lt=Ie([]),gt=Ie([]),_t=Ie([]),zt=Ie(null),J=Ie(null),Z=Ie(!1),Et=Ie(!1),Bt=Ie(!1),A=Ie(null),H=jn(()=>{var Rt,wt,oe;return console.log("[MapView][filteredClients] Computing with:",{userType:(Rt=Nt.user)==null?void 0:Rt.user_type,selectedDealer:zt.value,dealerClients:gt.value}),((wt=Nt.user)==null?void 0:wt.user_type)==="admin"?zt.value?gt.value:[]:((oe=Nt.user)==null?void 0:oe.user_type)==="dealer"?gt.value:[]}),V=jn(()=>{var Rt;return l.value?{type:((Rt=l.value.properties)==null?void 0:Rt.type)||"unknown",properties:l.value.properties||{},layer:l.value}:null});function z(Rt){const wt=Rt.getCenter(),oe=Rt.getZoom(),ne={lat:wt.lat,lng:wt.lng,zoom:oe};document.cookie=`mapState=${JSON.stringify(ne)};max-age=2592000;path=/`}function mt(){const wt=document.cookie.split(";").find(oe=>oe.trim().startsWith("mapState="));if(wt)try{return JSON.parse(wt.split("=")[1])}catch(oe){return console.error("Erreur lors de la lecture du cookie de position:",oe),null}return null}Ea(async()=>{var Rt,wt;try{await n.fetchPlans();const oe=mt(),ne=oe?[oe.lat,oe.lng]:[46.603354,1.888334],xe=(oe==null?void 0:oe.zoom)??6;if(e.value&&!f.value){const te=p(e.value,ne,xe);te.pm.setLang("fr"),te.pm.addControls({rotateMode:!1}),N(te),te.on("moveend",()=>{z(te)}),window.addEventListener("map-set-location",qe=>{if(te&&qe.detail){const{lat:He,lng:ze,zoom:Xe}=qe.detail;te.flyTo([He,ze],Xe,{duration:1.5,easeLinearity:.25})}})}const Ut=localStorage.getItem("lastPlanId");if(Ut)try{await I(parseInt(Ut))}catch(te){console.error("Error loading last plan:",te),X.value=null,n.clearCurrentPlan(),i.clearCurrentPlan(),ft(),localStorage.removeItem("lastPlanId"),W.value=!1,U.value=!1}((Rt=Nt.user)==null?void 0:Rt.user_type)==="admin"&&await dt(),((wt=Nt.user)==null?void 0:wt.user_type)==="dealer"&&await ct(),window.addEventListener("shape:created",te=>{const{shape:qe,type:He,properties:ze}=te.detail;console.log("[MapView] Nouvelle forme cre",{shape:qe,type:He,properties:ze}),i.addElement(qe)})}catch(oe){console.error("Error during component mount:",oe),X.value=null,n.clearCurrentPlan(),i.clearCurrentPlan(),ft(),localStorage.removeItem("lastPlanId"),W.value=!1,U.value=!1}}),qr(()=>i.hasUnsavedChanges,Rt=>{Rt&&X.value&&n.markUnsavedChanges()}),qr(f,async Rt=>{Rt&&n.currentPlan&&(ft(),await i.loadPlanElements(n.currentPlan.id),await I(n.currentPlan.id))}),qr(()=>n.currentPlan,async Rt=>{try{Rt?(X.value=Rt,n.setCurrentPlan(Rt),i.setCurrentPlan(Rt.id)):(X.value=null,ft(),n.clearCurrentPlan(),i.clearCurrentPlan(),W.value=!1,U.value=!1)}catch(wt){console.error("Error in currentPlan watcher:",wt),X.value=null,ft(),n.clearCurrentPlan(),i.clearCurrentPlan(),W.value=!1,U.value=!1}},{immediate:!0}),Gh(()=>{f.value&&f.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function ft(){S.value&&S.value.clearLayers(),o.value=[],R(),l.value=null,a.value="",Mt.value=null,St.value=!1}async function ht(Rt){try{ft(),await i.loadPlanElements(Rt);const wt=n.getPlanById(Rt);wt?(X.value=wt,n.setCurrentPlan(wt),i.setCurrentPlan(wt.id),localStorage.setItem("lastPlanId",wt.id.toString()),f.value&&S.value&&(i.getCurrentElements.forEach(oe=>{var te,qe,He,ze,Xe,Oe,an,gn,di,sn,dn,Ze,Sn,yi,Tn,li,pi,Vn,je,Ne,Ni,ui;if(!S.value||!oe.data)return;let ne=null;const{style:xe={},...Ut}=oe.data;switch(oe.type_forme){case"TEXTE":{const Fe=oe.data;if(console.log("[refreshMapWithPlan] Cration TextRectangle",{bounds:Fe.bounds,content:Fe.content,style:Fe.style}),!Fe.bounds){console.error("Bounds manquants pour TextRectangle");return}const ti=Ti.latLngBounds(Ti.latLng(Fe.bounds.southWest[1],Fe.bounds.southWest[0]),Ti.latLng(Fe.bounds.northEast[1],Fe.bounds.northEast[0]));ne=new So(ti,Fe.content||"Double-cliquez pour diter",{color:((te=Fe.style)==null?void 0:te.color)||"#3388ff",weight:((qe=Fe.style)==null?void 0:qe.weight)||3,opacity:((He=Fe.style)==null?void 0:He.opacity)||1,fillColor:((ze=Fe.style)==null?void 0:ze.fillColor)||"#3388ff",fillOpacity:((Xe=Fe.style)==null?void 0:Xe.fillOpacity)||.2,textStyle:{color:((an=(Oe=Fe.style)==null?void 0:Oe.textStyle)==null?void 0:an.color)||"#000000",fontSize:((di=(gn=Fe.style)==null?void 0:gn.textStyle)==null?void 0:di.fontSize)||"14px",fontFamily:((dn=(sn=Fe.style)==null?void 0:sn.textStyle)==null?void 0:dn.fontFamily)||"Arial, sans-serif",textAlign:((Sn=(Ze=Fe.style)==null?void 0:Ze.textStyle)==null?void 0:Sn.textAlign)||"center",backgroundColor:((Tn=(yi=Fe.style)==null?void 0:yi.textStyle)==null?void 0:Tn.backgroundColor)||"#FFFFFF",backgroundOpacity:((pi=(li=Fe.style)==null?void 0:li.textStyle)==null?void 0:pi.backgroundOpacity)??1,bold:((je=(Vn=Fe.style)==null?void 0:Vn.textStyle)==null?void 0:je.bold)||!1,italic:((Ni=(Ne=Fe.style)==null?void 0:Ne.textStyle)==null?void 0:Ni.italic)||!1}}),Fe.rotation&&typeof ne.setRotation=="function"&&ne.setRotation(Fe.rotation),ne.properties={type:"TextRectangle",text:Fe.content||"Double-cliquez pour diter",style:Fe.style,rotation:Fe.rotation||0};break}case"POLYGON":{const Fe=oe.data;if(Fe.points&&Fe.points.length>0){const ti=Fe.points.map(Qe=>Ti.latLng(Qe[1],Qe[0]));ne=new Bu([ti],{...Fe.style,pmIgnore:!1}),ne.updateProperties(),console.log("[refreshMapWithPlan] Polygon restaur",{points:ti.length,style:Fe.style,properties:ne.properties})}break}case"CERCLE":{const Fe=Ut;Fe.center&&Fe.radius&&(ne=Ti.circle([Fe.center[1],Fe.center[0]],{...xe,radius:Fe.radius}));break}case"RECTANGLE":{const Fe=Ut;Fe.bounds&&(ne=Ti.rectangle([[Fe.bounds.southWest[1],Fe.bounds.southWest[0]],[Fe.bounds.northEast[1],Fe.bounds.northEast[0]]],xe));break}case"DEMI_CERCLE":{const Fe=Ut;if(Fe.center&&Fe.radius){ne=new Qa(Ti.latLng(Fe.center[1],Fe.center[0]),Fe.radius,Fe.startAngle,Fe.endAngle,xe),ne.properties={type:"Semicircle",radius:Fe.radius,startAngle:Fe.startAngle,stopAngle:Fe.endAngle,style:xe};const ti=Math.PI*Math.pow(Fe.radius,2)*((Fe.endAngle-Fe.startAngle)/360),Qe=2*Fe.radius+Math.PI*Fe.radius*((Fe.endAngle-Fe.startAngle)/180),ri=Math.PI*Fe.radius*((Fe.endAngle-Fe.startAngle)/180);ne.properties.area=ti,ne.properties.perimeter=Qe,ne.properties.arcLength=ri,ne.properties.openingAngle=Fe.endAngle-Fe.startAngle,console.log("[loadPlan] Demi-cercle restaur avec proprits:",ne.properties)}break}case"LIGNE":{const Fe=Ut;if(Fe.points){const ti=Fe.points.map(ri=>Ti.latLng(ri[1],ri[0]));ne=Ti.polyline(ti,xe),ne.properties={type:"Line",style:xe};let Qe=0;for(let ri=1;ri<ti.length;ri++)Qe+=ti[ri].distanceTo(ti[ri-1]);if(ne.properties.length=Qe,Fe.hasOwnProperty("dimensions")&&Fe.dimensions&&(ne.properties.dimensions=Fe.dimensions,Fe.dimensions.width&&Qe)){const ri=Qe*Fe.dimensions.width;ne.properties.surfaceInfluence=ri}console.log("[loadPlan] Ligne restaure avec proprits:",ne.properties)}break}}ne&&(ne._dbId=oe.id,(ui=S.value)==null||ui.addLayer(ne),o.value.push({id:oe.id,type:oe.type_forme,layer:ne,properties:ne.properties}))}),x()),console.log(`Plan ${Rt} charg avec succs avec ${i.getCurrentElements.length} formes`)):console.error(`Plan ${Rt} introuvable aprs chargement`),W.value=!1}catch(wt){throw console.error("Erreur lors du rafrachissement de la carte:",wt),wt}}async function I(Rt){var wt;try{if(console.log(`Tentative de chargement du plan ${Rt}...`),!n.getPlanById(Rt))try{await kn.get(`/plans/${Rt}/`)}catch(ne){if(((wt=ne.response)==null?void 0:wt.status)===404){console.warn(`Plan ${Rt} non trouv - Suppression de la rfrence du localStorage`),localStorage.removeItem("lastPlanId"),X.value=null,n.clearCurrentPlan(),i.clearCurrentPlan(),ft(),W.value=!1,U.value=!1;return}throw ne}await ht(Rt),W.value=!1,console.log(`Plan ${Rt} charg avec succs avec ${i.getCurrentElements.length} formes`)}catch(oe){console.error("Erreur lors du chargement du plan:",oe),X.value=null,n.clearCurrentPlan(),i.clearCurrentPlan(),ft(),localStorage.removeItem("lastPlanId"),W.value=!1,U.value=!1}}async function it(){var Rt;if(!X.value||!S.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}St.value=!0,Mt.value="saving";try{const wt=[],oe=new Set(i.getCurrentElements.filter(te=>te.id!==void 0).map(te=>te.id)),ne=new Set;console.log("[savePlan] Dbut de la sauvegarde",{featureGroupLayers:S.value.getLayers().length,existingIds:Array.from(oe),currentElements:i.getCurrentElements}),S.value.eachLayer(te=>{var qe,He,ze,Xe,Oe,an,gn,di,sn,dn,Ze,Sn,yi,Tn,li,pi,Vn,je,Ne,Ni,ui,Fe,ti,Qe,ri,Rr,Wi,qn,$e,Zi,Cs,Cr,pr,rr,gr,Ui,sr,Ir,Ps,Hs,Gs,$r,us,ks,na,ia,Ws,Do,ra,Ss,Es,uo,No,or,Dn;if(console.log("[savePlan] Traitement de la couche",{type:(qe=te.properties)==null?void 0:qe.type,isPolygon:te instanceof Ti.Polygon,isCircleArc:te instanceof Qa,properties:te.properties}),te instanceof So){const rn=te.getBounds(),ci=((He=te.properties)==null?void 0:He.text)||"",_i={style:{color:((ze=te.options)==null?void 0:ze.color)||"#3388ff",fillColor:((Xe=te.options)==null?void 0:Xe.fillColor)||"#3388ff",fillOpacity:((Oe=te.options)==null?void 0:Oe.fillOpacity)||.2,weight:((an=te.options)==null?void 0:an.weight)||3,opacity:((gn=te.options)==null?void 0:gn.opacity)||1,textStyle:{color:((dn=(sn=(di=te.properties)==null?void 0:di.style)==null?void 0:sn.textStyle)==null?void 0:dn.color)||"#000000",fontSize:((yi=(Sn=(Ze=te.properties)==null?void 0:Ze.style)==null?void 0:Sn.textStyle)==null?void 0:yi.fontSize)||"14px",fontFamily:((pi=(li=(Tn=te.properties)==null?void 0:Tn.style)==null?void 0:li.textStyle)==null?void 0:pi.fontFamily)||"Arial, sans-serif",textAlign:((Ne=(je=(Vn=te.properties)==null?void 0:Vn.style)==null?void 0:je.textStyle)==null?void 0:Ne.textAlign)||"center",backgroundColor:((Fe=(ui=(Ni=te.properties)==null?void 0:Ni.style)==null?void 0:ui.textStyle)==null?void 0:Fe.backgroundColor)||"#FFFFFF",backgroundOpacity:((ri=(Qe=(ti=te.properties)==null?void 0:ti.style)==null?void 0:Qe.textStyle)==null?void 0:ri.backgroundOpacity)??1,bold:((qn=(Wi=(Rr=te.properties)==null?void 0:Rr.style)==null?void 0:Wi.textStyle)==null?void 0:qn.bold)||!1,italic:((Cs=(Zi=($e=te.properties)==null?void 0:$e.style)==null?void 0:Zi.textStyle)==null?void 0:Cs.italic)||!1}},bounds:{southWest:[rn.getSouthWest().lng,rn.getSouthWest().lat],northEast:[rn.getNorthEast().lng,rn.getNorthEast().lat]},content:ci};wt.push({id:te._dbId,type_forme:"TEXTE",data:_i}),te._dbId&&ne.add(te._dbId);return}else if(te instanceof Qa||((Cr=te.properties)==null?void 0:Cr.type)==="Semicircle"){const rn=typeof te.getCenter=="function"?te.getCenter():te.getLatLng(),ci={center:[rn.lng,rn.lat],radius:te.getRadius(),startAngle:((pr=te.properties)==null?void 0:pr.startAngle)||0,endAngle:((rr=te.properties)==null?void 0:rr.stopAngle)||180,style:{color:((gr=te.options)==null?void 0:gr.color)||"#3388ff",fillColor:((Ui=te.options)==null?void 0:Ui.fillColor)||"#3388ff",fillOpacity:((sr=te.options)==null?void 0:sr.fillOpacity)||.2,weight:((Ir=te.options)==null?void 0:Ir.weight)||3,opacity:((Ps=te.options)==null?void 0:Ps.opacity)||1}};wt.push({id:te._dbId,type_forme:"DEMI_CERCLE",data:ci}),te._dbId&&ne.add(te._dbId),console.log("[savePlan] Demi-cercle ajout aux lments",{id:te._dbId,center:ci.center,radius:ci.radius,angles:[ci.startAngle,ci.endAngle],style:ci.style})}else if(te instanceof Ti.Polygon&&!(te instanceof Ti.Rectangle)){const _i={points:te.getLatLngs()[0].map($n=>[$n.lng,$n.lat]),style:{color:((Hs=te.options)==null?void 0:Hs.color)||"#3388ff",fillColor:((Gs=te.options)==null?void 0:Gs.fillColor)||"#3388ff",fillOpacity:(($r=te.options)==null?void 0:$r.fillOpacity)||.2,weight:((us=te.options)==null?void 0:us.weight)||3,opacity:((ks=te.options)==null?void 0:ks.opacity)||1}};wt.push({id:te._dbId,type_forme:"POLYGON",data:_i}),te._dbId&&ne.add(te._dbId),console.log("[savePlan] Polygone ajout aux lments",{id:te._dbId,points:_i.points.length,style:_i.style})}else{const rn={style:{color:((na=te.options)==null?void 0:na.color)||"#3388ff",fillColor:((ia=te.options)==null?void 0:ia.fillColor)||"#3388ff",fillOpacity:((Ws=te.options)==null?void 0:Ws.fillOpacity)||.2,weight:((Do=te.options)==null?void 0:Do.weight)||3,opacity:((ra=te.options)==null?void 0:ra.opacity)||1}};let ci,_i;if(te instanceof Ti.Circle)ci="CERCLE",_i={...rn,center:[te.getLatLng().lng,te.getLatLng().lat],radius:te.getRadius()};else if(te instanceof Ti.Rectangle){ci="RECTANGLE";const $n=te.getBounds();_i={...rn,bounds:{southWest:[$n.getSouthWest().lng,$n.getSouthWest().lat],northEast:[$n.getNorthEast().lng,$n.getNorthEast().lat]}}}else if(((Ss=te.properties)==null?void 0:Ss.type)==="Semicircle"){ci="DEMI_CERCLE";let $n;typeof te.getLatLng=="function"?$n=te.getLatLng():te.getCenter&&typeof te.getCenter=="function"?$n=te.getCenter():te._latlng?$n=te._latlng:$n={lat:0,lng:0};const Vr=te.getRadius?te.getRadius():0,xn=((uo=(Es=te.properties)==null?void 0:Es.style)==null?void 0:uo.startAngle)||0,zn=((or=(No=te.properties)==null?void 0:No.style)==null?void 0:or.stopAngle)||180;_i={...rn,center:[$n.lng,$n.lat],radius:Vr,startAngle:xn,endAngle:zn}}else if(te instanceof Ti.Polyline&&!(te instanceof Ti.Polygon)){ci="LIGNE";const $n=te.getLatLngs();_i={...rn,points:$n.map(Vr=>[Vr.lng,Vr.lat])}}if(ci&&_i){let $n=te._elementId;te._dbId&&($n=te._dbId,typeof $n=="number"&&ne.add($n)),wt.push({id:$n,type_forme:ci,data:{..._i,rotation:((Dn=te.properties)==null?void 0:Dn.rotation)||0}})}}}),console.log("[savePlan] lments  sauvegarder",{totalElements:wt.length,elements:wt.map(te=>({type:te.type_forme,hasPoints:"points"in te.data,hasStyle:"style"in te.data}))});const xe=Array.from(oe).filter(te=>!ne.has(te));i.elements=wt;const Ut=await i.saveToPlan(X.value.id,{elementsToDelete:xe});if(Ut&&((Rt=X.value)!=null&&Rt.id)){const te=X.value.id;X.value={...X.value,...Ut},n.updatePlanDetails(te,Ut)}Mt.value="success",setTimeout(()=>{Mt.value=null},3e3)}catch(wt){console.error("Erreur lors de la sauvegarde du plan:",wt),Mt.value=null}finally{St.value=!1}}Wh(()=>{Nt.user||vt(),n.clearCurrentPlan(),i.clearCurrentPlan()});function rt(Rt){w(Rt)}function $(Rt){try{const wt=new Date(Rt);return isNaN(wt.getTime())?(console.error("Date invalide reue:",Rt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(wt)}catch(wt){return console.error("Erreur lors du formatage de la date:",wt),"Date invalide"}}const D=()=>{S.value&&x()},q=()=>{l.value&&S.value&&(v(""),S.value.removeLayer(l.value),l.value=null)};async function dt(){Z.value=!0;try{const Rt=await kn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});Lt.value=Rt.data}catch(Rt){console.error("Erreur lors du chargement des concessionnaires:",Rt)}finally{Z.value=!1}}async function ct(){var Rt;Et.value=!0;try{const wt=(Rt=Nt.user)==null?void 0:Rt.id;if(!wt){console.error("[loadDealerClients] No dealer ID available");return}const oe=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:wt}});Array.isArray(oe.data)?gt.value=oe.data:oe.data?gt.value=[oe.data]:gt.value=[]}catch(wt){console.error("[loadDealerClients] Error:",wt),gt.value=[]}finally{Et.value=!1}}async function At(Rt){if(console.log("[MapView][selectClient] Current state:",{selectedDealer:zt.value,selectedClient:J.value,newPlanModalRef:!!A.value}),A.value){A.value.selectClient(Rt),J.value=Rt,Bt.value=!0;try{const wt={client:Rt.id};zt.value&&(wt.concessionnaire=zt.value.id);const oe=await kn.get("/plans/",{params:wt});_t.value=oe.data}catch(wt){console.error("[MapView][selectClient] Error loading client plans:",wt),_t.value=[]}finally{Bt.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function Ot(){zt.value=null,J.value=null,gt.value=[],_t.value=[]}function G(){J.value=null,_t.value=[]}async function tt(Rt){console.log(`onPlanCreated - Tentative de chargement du plan ${Rt}`),await n.fetchPlans();const wt=n.getPlanById(Rt);wt?(console.log(`Plan ${Rt} trouv, chargement en cours...`),localStorage.setItem("lastPlanId",Rt.toString()),X.value=wt,n.setCurrentPlan(wt),i.setCurrentPlan(wt.id),U.value=!1,console.log(`Plan ${Rt} charg avec succs`)):console.error(`Plan ${Rt} introuvable aprs cration! Vrifiez les permissions.`)}async function yt(Rt){try{A.value?(await A.value.selectDealer(Rt),zt.value=Rt,gt.value=A.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(wt){console.error("[MapView][selectDealer] Error:",wt)}}qr(zt,async Rt=>{var wt;if(Rt&&((wt=Nt.user)==null?void 0:wt.user_type)==="admin"){Et.value=!0;try{const oe=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Rt.id}});gt.value=Array.isArray(oe.data)?oe.data:[oe.data]}catch(oe){console.error("[MapView][watch selectedDealer] Error loading clients:",oe),gt.value=[]}finally{Et.value=!1}}});function vt(){localStorage.removeItem("lastPlanId")}function Y(Rt,wt="m"){return wt==="m"?`${(Rt/1e4).toFixed(2)} ha`:wt==="m"?Rt>=1e3?`${(Rt/1e3).toFixed(2)} km`:`${Rt.toFixed(2)} m`:`${Rt.toFixed(2)} ${wt}`}const $t=Ie(!1);function ee(Rt){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Rectangle avec texte"}[Rt]||Rt}async function Ht(){var Rt,wt,oe;if(!(!X.value||!f.value||!S.value))try{console.log("Sauvegarde automatique avant gnration de la synthse..."),await it(),await new Promise(an=>setTimeout(an,1e3)),$t.value=!0;const ne=X.value.concessionnaire_details,xe=X.value.client_details;l.value&&(R(),l.value=null);const Ut=new wn("l","mm","a4"),te=Ut.internal.pageSize.getWidth(),qe=Ut.internal.pageSize.getHeight(),He=new Image;He.src=H0,await new Promise(an=>{He.onload=()=>an(),He.onerror=()=>an()}),Ut.addImage(He,"JPEG",(te-60)/2,20,60,60),Ut.setFontSize(24),Ut.setTextColor(0),Ut.text(X.value.nom||"Sans titre",te/2,100,{align:"center"});let ze=120;if(Ut.setFontSize(14),ne&&(Ut.setFont("helvetica","bold"),Ut.text("Concessionnaire:",20,ze),Ut.setFont("helvetica","normal"),Ut.text(`${ne.first_name} ${ne.last_name}${ne.company_name?` (${ne.company_name})`:""}`,20,ze+8),ze+=25),xe&&(Ut.setFont("helvetica","bold"),Ut.text("Client:",20,ze),Ut.setFont("helvetica","normal"),Ut.text(`${xe.first_name} ${xe.last_name}${xe.company_name?` (${xe.company_name})`:""}`,20,ze+8),ze+=25),X.value.description){Ut.setFont("helvetica","bold"),Ut.text("Description:",20,ze),Ut.setFont("helvetica","normal");const an=Ut.splitTextToSize(X.value.description,150);Ut.text(an,20,ze+8),ze+=10*an.length+15}Ut.setFontSize(10),Ut.setTextColor(100),Ut.text(`Date de cration: ${$(X.value.date_creation)}`,20,qe-20),Ut.text(`Dernire modification: ${$(X.value.date_modification)}`,te-20,qe-20,{align:"right"});const Xe=[];S.value.eachLayer(an=>Xe.push(an));const Oe=Ti.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(f.value);await new Promise(an=>setTimeout(an,3e3));for(let an=0;an<Xe.length;an++){Ut.addPage();const gn=30;Ut.addImage(He,"JPEG",te-gn-10,10,gn,30),Ut.setFontSize(8),Ut.setTextColor(100);let sn=25;ne&&(Ut.text(`Concessionnaire: ${ne.first_name} ${ne.last_name}${ne.company_name?` (${ne.company_name})`:""}`,20,sn),sn+=10),xe&&Ut.text(`Client: ${xe.first_name} ${xe.last_name}${xe.company_name?` (${xe.company_name})`:""}`,20,sn),Ut.setDrawColor(200,200,200),Ut.setLineWidth(.5),Ut.line(20,45,te-20,45);const dn=Xe[an],Ze=dn.properties;Ze&&(Ut.setTextColor(0),Ut.setFontSize(16),Ut.setFont("helvetica","bold"),Ut.text(ee(Ze.type),20,60));const Sn=((Rt=dn.getBounds)==null?void 0:Rt.call(dn))||((wt=dn.getLatLng)==null?void 0:wt.call(dn));Sn&&f.value.fitBounds(Sn instanceof Ti.LatLng?Ti.latLngBounds([Sn]):Sn,{padding:[50,50]}),await new Promise(yi=>setTimeout(yi,2e3)),f.value.invalidateSize(),await new Promise(yi=>{const Tn=()=>{var je;const li=(je=f.value)==null?void 0:je.getContainer();if(!li){yi();return}const pi=li.querySelectorAll(".leaflet-tile-loaded");li.querySelectorAll(".leaflet-tile-loading").length===0&&pi.length>0?yi():setTimeout(Tn,100)};Tn()});try{const yi=await Oe.takeScreen("image"),Tn=await new Promise((je,Ne)=>{const Ni=new Image;Ni.onload=()=>je(Ni),Ni.onerror=ui=>Ne(ui),Ni.src=yi}),li=te*.6-30;let pi=Tn.height*li/Tn.width;pi>qe*.9&&(pi=qe*.9);const Vn=Math.max(80,(qe-pi)/2);if(Ut.addImage(Tn,"PNG",20,Vn,li,pi),Ze){const je=te*.6+10;let Ne=70;Ut.setFontSize(12),Ut.setFont("helvetica","normal"),Ze.type==="Circle"?(Ut.text(`Rayon: ${Y(Ze.radius)}`,je,Ne),Ne+=10,Ut.text(`Diamtre: ${Y(Ze.radius*2)}`,je,Ne),Ne+=10,Ut.text(`Surface: ${Y(Ze.area,"m")}`,je,Ne),Ne+=10,Ut.text(`Primtre: ${Y(Ze.perimeter)}`,je,Ne),Ne+=10,Ze.surfaceInterieure&&(Ut.text(`Surface intrieure: ${Y(Ze.surfaceInterieure,"m")}`,je,Ne),Ne+=10),Ze.surfaceExterieure&&(Ut.text(`Surface extrieure: ${Y(Ze.surfaceExterieure,"m")}`,je,Ne),Ne+=10)):Ze.type==="Rectangle"?(Ut.text(`Largeur: ${Y(Ze.width)}`,je,Ne),Ne+=10,Ut.text(`Hauteur: ${Y(Ze.height)}`,je,Ne),Ne+=10,Ut.text(`Surface: ${Y(Ze.area,"m")}`,je,Ne),Ne+=10,Ut.text(`Primtre: ${Y(Ze.perimeter)}`,je,Ne),Ne+=10,Ze.surfaceInterieure&&(Ut.text(`Surface intrieure: ${Y(Ze.surfaceInterieure,"m")}`,je,Ne),Ne+=10),Ze.surfaceExterieure&&(Ut.text(`Surface extrieure: ${Y(Ze.surfaceExterieure,"m")}`,je,Ne),Ne+=10)):Ze.type==="Line"?(Ut.text(`Longueur: ${Y(Ze.length)}`,je,Ne),Ne+=10,(oe=Ze.dimensions)!=null&&oe.width&&(Ut.text(`Largeur d'influence: ${Y(Ze.dimensions.width)}`,je,Ne),Ne+=10),Ze.surfaceInfluence&&(Ut.text(`Surface d'influence: ${Y(Ze.surfaceInfluence,"m")}`,je,Ne),Ne+=10)):Ze.type==="Polygon"?(Ut.text(`Surface: ${Y(Ze.area,"m")}`,je,Ne),Ne+=10,Ut.text(`Primtre: ${Y(Ze.perimeter)}`,je,Ne),Ne+=10,Ze.surfaceInterieure&&(Ut.text(`Surface intrieure: ${Y(Ze.surfaceInterieure,"m")}`,je,Ne),Ne+=10),Ze.surfaceExterieure&&(Ut.text(`Surface extrieure: ${Y(Ze.surfaceExterieure,"m")}`,je,Ne),Ne+=10)):Ze.type==="Semicircle"&&(Ut.text(`Rayon: ${Y(Ze.radius)}`,je,Ne),Ne+=10,Ut.text(`Diamtre: ${Y(Ze.radius*2)}`,je,Ne),Ne+=10,Ut.text(`Surface: ${Y(Ze.area,"m")}`,je,Ne),Ne+=10,Ut.text(`Primtre: ${Y(Ze.perimeter)}`,je,Ne),Ne+=10,Ut.text(`Longueur d'arc: ${Y(Ze.arcLength)}`,je,Ne),Ne+=10,Ut.text(`Angle d'ouverture: ${Ze.openingAngle.toFixed(1)}`,je,Ne),Ne+=10,Ze.surfaceInterieure&&(Ut.text(`Surface intrieure: ${Y(Ze.surfaceInterieure,"m")}`,je,Ne),Ne+=10),Ze.surfaceExterieure&&(Ut.text(`Surface extrieure: ${Y(Ze.surfaceExterieure,"m")}`,je,Ne),Ne+=10))}}catch(yi){console.error(`[generateSynthesis] Erreur capture forme ${an+1}:`,yi)}}f.value.removeControl(Oe),Ut.save(`synthese_${X.value.nom}.pdf`)}catch(ne){console.error("[generateSynthesis] Erreur:",ne),alert("Une erreur est survenue lors de la gnration de la synthse. Veuillez ressayer.")}finally{$t.value=!1}}return(Rt,wt)=>{var oe,ne,xe;return se(),ce("div",xC,[M("div",LC,[$t.value?(se(),ce("div",CC,wt[8]||(wt[8]=[gc('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):en("",!0),X.value?en("",!0):(se(),ce("div",PC,[M("div",kC,[wt[11]||(wt[11]=gc('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+H0+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),M("div",SC,[M("button",{onClick:wt[0]||(wt[0]=Ut=>U.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},wt[9]||(wt[9]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Gi(" Crer un nouveau plan ")])),M("button",{onClick:wt[1]||(wt[1]=Ut=>W.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},wt[10]||(wt[10]=[M("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Gi(" Charger un plan existant ")]))])])])),mn(M("div",EC,[X.value&&!$t.value?(se(),ce("div",AC,[Ai(Fx,{"last-save":(oe=X.value)!=null&&oe.date_modification?new Date(X.value.date_modification):void 0,"plan-name":(ne=X.value)==null?void 0:ne.nom,"plan-description":(xe=X.value)==null?void 0:xe.description,"save-status":Mt.value,onChangeMapType:Rn(j),onCreateNewPlan:wt[2]||(wt[2]=Ut=>U.value=!0),onLoadPlan:wt[3]||(wt[3]=Ut=>W.value=!0),onSavePlan:it,onAdjustView:D,onGenerateSummary:Ht},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):en("",!0),M("div",MC,[M("div",BC,[M("div",{ref_key:"mapContainer",ref:e,class:"absolute inset-0 w-full h-full"},null,512)]),X.value&&!$t.value?(se(),ce("div",TC,[Ai(ix,{"current-tool":Rn(a),"selected-shape":V.value,onToolChange:Rn(v),onStyleUpdate:Rn(b),onPropertiesUpdate:rt,onDeleteShape:q},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])])):en("",!0)]),$t.value?(se(),ce("div",DC,wt[12]||(wt[12]=[gc('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):en("",!0)],512),[[ch,X.value]]),Ai(j1,{ref_key:"newPlanModalRef",ref:A,modelValue:U.value,"onUpdate:modelValue":wt[4]||(wt[4]=Ut=>U.value=Ut),onCreated:tt,onDealerSelected:wt[5]||(wt[5]=Ut=>zt.value=Ut),onClientSelected:wt[6]||(wt[6]=Ut=>J.value=Ut)},null,8,["modelValue"]),W.value?(se(),ce("div",NC,[M("div",OC,[M("div",RC,[wt[14]||(wt[14]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),M("button",{onClick:wt[7]||(wt[7]=Ut=>W.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},wt[13]||(wt[13]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),Rn(Nt).isAdmin?(se(),ce("div",IC,[zt.value?J.value?(se(),ce("div",ZC,[M("div",KC,[M("button",{onClick:G,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},wt[23]||(wt[23]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Gi(" Retour  la liste des clients ")])),wt[24]||(wt[24]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",YC,Pe(J.value.first_name)+" "+Pe(J.value.last_name)+" ("+Pe(J.value.company_name)+") ",1)]),wt[26]||(wt[26]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",JC,[Bt.value?(se(),ce(_n,{key:0},Gn(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},wt[25]||(wt[25]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(_t.value,Ut=>(se(),ce("button",{key:Ut.id,onClick:te=>I(Ut.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",QC,Pe(Ut.nom),1),M("div",tP,Pe(Ut.description),1),M("div",eP," Modifi le "+Pe($(Ut.date_modification)),1)],8,XC))),128))])])):(se(),ce("div",qC,[M("div",$C,[M("button",{onClick:Ot,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},wt[18]||(wt[18]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Gi(" Retour  la liste des concessionnaires ")])),wt[19]||(wt[19]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",VC,Pe(zt.value.first_name)+" "+Pe(zt.value.last_name)+" ("+Pe(zt.value.company_name)+") ",1)]),wt[22]||(wt[22]=M("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),M("div",HC,[Et.value?(se(),ce(_n,{key:0},Gn(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},wt[20]||(wt[20]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(H.value,Ut=>(se(),ce("button",{key:Ut.id,onClick:te=>At(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",WC,Pe(Ut.first_name)+" "+Pe(Ut.last_name)+" ("+Pe(Ut.company_name)+")",1)]),wt[21]||(wt[21]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,GC))),128))])])):(se(),ce("div",FC,[wt[17]||(wt[17]=M("h3",{class:"font-medium text-gray-700"},"Slectionnez un concessionnaire",-1)),M("div",jC,[Z.value?(se(),ce(_n,{key:0},Gn(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},wt[15]||(wt[15]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(Lt.value,Ut=>(se(),ce("button",{key:Ut.id,onClick:te=>yt(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",UC,Pe(Ut.first_name)+" "+Pe(Ut.last_name)+" ("+Pe(Ut.company_name)+")",1)]),wt[16]||(wt[16]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,zC))),128))])]))])):Rn(Nt).isDealer?(se(),ce("div",nP,[J.value?(se(),ce("div",aP,[M("div",lP,[M("button",{onClick:G,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},wt[30]||(wt[30]=[M("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Gi(" Retour  la liste des clients ")])),wt[31]||(wt[31]=M("span",{class:"mx-2 text-gray-400"},"|",-1)),M("span",uP,Pe(J.value.first_name)+" "+Pe(J.value.last_name),1)]),wt[33]||(wt[33]=M("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),M("div",cP,[Bt.value?(se(),ce(_n,{key:0},Gn(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},wt[32]||(wt[32]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),M("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(_t.value,Ut=>(se(),ce("button",{key:Ut.id,onClick:te=>I(Ut.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",fP,Pe(Ut.nom),1),M("div",dP,Pe(Ut.description),1),M("div",pP," Modifi le "+Pe($(Ut.date_modification)),1)],8,hP))),128))])])):(se(),ce("div",iP,[wt[29]||(wt[29]=M("h3",{class:"font-medium text-gray-700"},"Slectionnez un client",-1)),M("div",rP,[Et.value?(se(),ce(_n,{key:0},Gn(3,Ut=>M("div",{key:Ut,class:"animate-pulse"},wt[27]||(wt[27]=[M("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[M("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),M("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(se(!0),ce(_n,{key:1},Gn(H.value,Ut=>(se(),ce("button",{key:Ut.id,onClick:te=>At(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",null,[M("div",oP,Pe(Ut.first_name)+" "+Pe(Ut.last_name)+" ("+Pe(Ut.company_name)+")",1)]),wt[28]||(wt[28]=M("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,sP))),128))])]))])):(se(),ce("div",gP,[Rn(n).plans.length===0?(se(),ce("div",mP,wt[34]||(wt[34]=[M("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(se(),ce("div",vP,[(se(!0),ce(_n,null,Gn(Rn(n).plans,Ut=>(se(),ce("button",{key:Ut.id,onClick:te=>I(Ut.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[M("div",_P,Pe(Ut.nom),1),M("div",bP,Pe(Ut.description),1),M("div",wP," Modifi le "+Pe($(Ut.date_modification)),1)],8,yP))),128))]))]))])])):en("",!0)])])}}}),xP={class:"fixed inset-0 z-50 overflow-y-auto"},LP={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},CP={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},PP={class:"mt-3 text-center sm:mt-0 sm:text-left"},kP={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},SP={class:"mt-4"},EP={class:"grid grid-cols-2 gap-4"},AP=["disabled"],MP={key:0,class:"mt-1 text-sm text-gray-500"},BP={class:"grid grid-cols-2 gap-4"},TP={key:0},DP=["disabled"],NP=["value"],OP={key:1},RP=["disabled"],IP=["value"],FP={key:0},jP={class:"grid grid-cols-2 gap-4"},zP={key:1,class:"rounded-md bg-red-50 p-4"},UP={class:"flex"},qP={class:"ml-3"},$P={class:"text-sm font-medium text-red-800"},VP={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},HP=["disabled"],GP={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},av=Ls({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(t,{emit:e}){var R,N,j,U,W,X,St;const n=t,i=e,o=xs(),a=Ie(!1),l=Ie(null),f=jn(()=>{var Mt;return n.isAdmin?n.user?n.user.id!==((Mt=o.user)==null?void 0:Mt.id):!0:!1}),p=jn(()=>n.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),v=jn(()=>n.isAdmin?w.role==="UTILISATEUR":!0),b=jn(()=>n.dealers.filter(Mt=>Mt.role==="CONCESSIONNAIRE")),w=el({first_name:((R=n.user)==null?void 0:R.first_name)||"",last_name:((N=n.user)==null?void 0:N.last_name)||"",email:((j=n.user)==null?void 0:j.email)||"",username:((U=n.user)==null?void 0:U.username)||"",company_name:((W=n.user)==null?void 0:W.company_name)||"",role:((X=n.user)==null?void 0:X.role)||(n.isAdmin?"":"UTILISATEUR"),dealer:((St=n.user)==null?void 0:St.concessionnaire)||n.currentDealer,password:"",password_confirm:""}),S=()=>{if(!w.first_name||!w.last_name)return l.value="Le prnom et le nom sont requis",!1;if(!w.email)return l.value="L'email est requis",!1;if(!w.username)return l.value="Le nom d'utilisateur est requis",!1;if(!n.user){if(!w.password)return l.value="Le mot de passe est requis",!1;if(w.password!==w.password_confirm)return l.value="Les mots de passe ne correspondent pas",!1}return w.role==="UTILISATEUR"&&!w.dealer?(l.value="Un concessionnaire doit tre slectionn pour un client",!1):!0},x=async()=>{var Mt;if(l.value=null,!!S()){a.value=!0;try{const Nt={...w};(Mt=n.user)!=null&&Mt.id&&(Nt.id=n.user.id,delete Nt.password,delete Nt.password_confirm),Nt.role==="UTILISATEUR"&&Nt.dealer&&(Nt.concessionnaire=Nt.dealer),delete Nt.dealer,await i("save",Nt),i("close")}catch(Nt){console.error("Erreur formulaire:",Nt),l.value=Nt.message,a.value=!1}}};return(Mt,Nt)=>(se(),ce("div",xP,[M("div",LP,[Nt[24]||(Nt[24]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),Nt[25]||(Nt[25]=M("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),M("div",CP,[M("div",null,[M("div",PP,[M("h3",kP,Pe(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),M("div",SP,[M("form",{onSubmit:Jh(x,["prevent"]),class:"space-y-4"},[M("div",EP,[M("div",null,[Nt[10]||(Nt[10]=M("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),mn(M("input",{type:"text",id:"first_name","onUpdate:modelValue":Nt[0]||(Nt[0]=Lt=>w.first_name=Lt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.first_name]])]),M("div",null,[Nt[11]||(Nt[11]=M("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),mn(M("input",{type:"text",id:"last_name","onUpdate:modelValue":Nt[1]||(Nt[1]=Lt=>w.last_name=Lt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.last_name]])])]),M("div",null,[Nt[12]||(Nt[12]=M("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),mn(M("input",{type:"email",id:"email","onUpdate:modelValue":Nt[2]||(Nt[2]=Lt=>w.email=Lt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.email]])]),M("div",null,[Nt[13]||(Nt[13]=M("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),mn(M("input",{type:"text",id:"username","onUpdate:modelValue":Nt[3]||(Nt[3]=Lt=>w.username=Lt),required:"",disabled:!!n.user,class:Di(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!n.user}])},null,10,AP),[[Hn,w.username]]),n.user?(se(),ce("p",MP," Le nom d'utilisateur ne peut pas tre modifi aprs la cration. ")):en("",!0)]),M("div",null,[Nt[14]||(Nt[14]=M("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),mn(M("input",{type:"text",id:"company_name","onUpdate:modelValue":Nt[4]||(Nt[4]=Lt=>w.company_name=Lt),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.company_name]])]),M("div",BP,[n.isAdmin?(se(),ce("div",TP,[Nt[16]||(Nt[16]=M("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),mn(M("select",{id:"role","onUpdate:modelValue":Nt[5]||(Nt[5]=Lt=>w.role=Lt),required:"",disabled:!f.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Nt[15]||(Nt[15]=M("option",{value:""},"Slectionner un rle",-1)),(se(!0),ce(_n,null,Gn(p.value,Lt=>(se(),ce("option",{key:Lt.value,value:Lt.value},Pe(Lt.label),9,NP))),128))],8,DP),[[qs,w.role]])])):en("",!0),v.value?(se(),ce("div",OP,[Nt[18]||(Nt[18]=M("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),mn(M("select",{id:"dealer","onUpdate:modelValue":Nt[6]||(Nt[6]=Lt=>w.dealer=Lt),required:"",disabled:!n.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Nt[17]||(Nt[17]=M("option",{value:""},"Slectionner un concessionnaire",-1)),(se(!0),ce(_n,null,Gn(b.value,Lt=>(se(),ce("option",{key:Lt.id,value:Lt.id},Pe(Rn(Xl)(Lt)),9,IP))),128))],8,RP),[[qs,w.dealer]])])):en("",!0)]),t.user?en("",!0):(se(),ce("div",FP,[M("div",jP,[M("div",null,[Nt[19]||(Nt[19]=M("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),mn(M("input",{type:"password",id:"password","onUpdate:modelValue":Nt[7]||(Nt[7]=Lt=>w.password=Lt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.password]])]),M("div",null,[Nt[20]||(Nt[20]=M("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),mn(M("input",{type:"password",id:"password_confirm","onUpdate:modelValue":Nt[8]||(Nt[8]=Lt=>w.password_confirm=Lt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Hn,w.password_confirm]])])]),Nt[21]||(Nt[21]=M("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe  sa premire connexion. ",-1))])),l.value?(se(),ce("div",zP,[M("div",UP,[Nt[22]||(Nt[22]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",qP,[M("h3",$P,Pe(l.value),1)])])])):en("",!0),M("div",VP,[M("button",{type:"submit",disabled:a.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[a.value?(se(),ce("svg",GP,Nt[23]||(Nt[23]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):en("",!0),Gi(" "+Pe(a.value?"Enregistrement...":"Enregistrer"),1)],8,HP),M("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:Nt[9]||(Nt[9]=Lt=>Mt.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),WP={class:"fixed inset-0 z-50 overflow-y-auto"},ZP={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},KP={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},YP={class:"sm:flex sm:items-start"},JP={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},XP={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},QP={class:"mt-2"},t6={class:"text-sm text-gray-500"},e6={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},lv=Ls({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(se(),ce("div",WP,[M("div",ZP,[n[3]||(n[3]=M("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[M("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),n[4]||(n[4]=M("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),M("div",KP,[M("div",YP,[n[2]||(n[2]=M("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[M("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),M("div",JP,[M("h3",XP,Pe(t.title),1),M("div",QP,[M("p",t6,Pe(t.message),1)])])]),M("div",e6,[M("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=i=>e.$emit("confirm"))}," Confirmer "),M("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=i=>e.$emit("cancel"))}," Annuler ")])])])]))}}),n6={class:"h-full bg-gray-50"},i6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},r6={class:"flex justify-between items-center mb-8"},s6={class:"text-3xl font-extrabold text-gray-900"},o6={class:"bg-white shadow rounded-lg mb-6 p-4"},a6={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},l6={key:0},u6=["placeholder"],c6={key:1},h6=["value"],f6={class:"bg-white shadow rounded-lg"},d6={class:"overflow-x-auto"},p6={class:"min-w-full divide-y divide-gray-200"},g6={class:"bg-gray-50"},m6={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},v6={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},y6={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},_6={class:"bg-white divide-y divide-gray-200"},b6={class:"px-6 py-4 whitespace-nowrap"},w6={class:"flex items-center"},x6={class:"flex-shrink-0 h-10 w-10"},L6={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},C6={class:"text-primary-600 font-medium"},P6={class:"ml-4"},k6={class:"text-sm font-medium text-gray-900"},S6={class:"text-sm text-gray-500"},E6={class:"px-6 py-4 whitespace-nowrap"},A6={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},M6={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},B6={class:"px-6 py-4 whitespace-nowrap"},T6={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},D6=["onClick"],N6=["onClick"],O6=Ls({__name:"UserListView",setup(t){const e=xs(),n=Ie([]),i=Ie([]),o=Ie(!1),a=Ie(!1),l=Ie(null),f=Ie(null),p=el({role:"",search:"",dealer:""}),v=jn(()=>e.isAdmin),b=jn(()=>e.isDealer),w=jn(()=>n.value.filter(J=>J.role==="CONCESSIONNAIRE")),S=jn(()=>{var Z;console.log("Computing filtered users..."),console.log("Current users:",n.value),console.log("Is admin:",v.value),console.log("Is dealer:",b.value),console.log("Current filters:",p);let J=n.value;if(b.value&&(console.log("Filtering for dealer:",(Z=e.user)==null?void 0:Z.id),J=J.filter(Et=>{var Bt;return Et.role==="UTILISATEUR"&&Et.dealer===((Bt=e.user)==null?void 0:Bt.id)}),console.log("Filtered users for dealer:",J)),v.value&&(p.role&&(J=J.filter(Et=>Et.role===p.role),console.log("Filtered by role:",J)),p.dealer&&(J=J.filter(Et=>String(Et.dealer)===String(p.dealer)),console.log("Filtered by dealer:",J))),p.search){const Et=p.search.toLowerCase();J=J.filter(Bt=>Bt.username.toLowerCase().includes(Et)||Bt.email.toLowerCase().includes(Et)||Bt.first_name.toLowerCase().includes(Et)||Bt.last_name.toLowerCase().includes(Et)||Bt.company_name&&Bt.company_name.toLowerCase().includes(Et)),console.log("Filtered by search:",J)}return console.log("Final filtered users:",J),J});Ea(async()=>{await x(),v.value&&await R()});async function x(){try{console.log("Fetching users...");const J=await kn.get("/users/");console.log("Users API response:",J.data),n.value=J.data,console.log("Users after assignment:",n.value)}catch(J){console.error("Erreur lors de la rcupration des utilisateurs:",J)}}async function R(){try{const J=await kn.get("/users/",{params:{role:"CONCESSIONNAIRE"}});i.value=J.data}catch(J){console.error("Erreur lors de la rcupration des concessionnaires:",J)}}function N(){l.value=null,o.value=!0}function j(J){l.value={...J},o.value=!0}function U(){o.value=!1,l.value=null}async function W(J){var Z;try{let Et;const Bt=!!J.id,A={...J};return delete A.dealer_name,delete A.full_name,delete A.user_type,delete A.permissions,Bt?Et=await kn.patch(`/users/${J.id}/`,A):Et=await kn.post("/users/",A),await x(),U(),Et.data}catch(Et){const Bt=((Z=Et.response)==null?void 0:Z.data)||{};let A="";throw typeof Bt=="object"&&(A=Object.entries(Bt).map(([H,V])=>Array.isArray(V)?V[0]:V).filter(H=>H).join(`
`)),A||(A="Une erreur est survenue lors de la sauvegarde"),new Error(A)}}function X(J){f.value=J,a.value=!0}async function St(){if(f.value)try{await kn.delete(`/users/${f.value.id}/`),await x(),a.value=!1,f.value=null}catch(J){throw console.error("Erreur lors de la suppression de l'utilisateur:",J),J}}function Mt(J,Z){return`${(J==null?void 0:J.charAt(0))||""}${(Z==null?void 0:Z.charAt(0))||""}`.toUpperCase()}const Nt={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function Lt(J){return Nt[J]||J}function gt(J){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function _t(J){return J?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function zt(J){var Z;return v.value?!0:b.value?J.role==="UTILISATEUR"&&J.dealer===((Z=e.user)==null?void 0:Z.id):!1}return(J,Z)=>{var Et,Bt;return se(),ce("div",n6,[M("div",i6,[M("div",r6,[M("h1",s6,Pe(v.value?"Gestion des utilisateurs":"Mes clients"),1),M("button",{onClick:N,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[Z[4]||(Z[4]=M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),Gi(" "+Pe(v.value?"Nouvel utilisateur":"Nouveau client"),1)])]),M("div",o6,[M("div",a6,[v.value?(se(),ce("div",l6,[Z[6]||(Z[6]=M("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),mn(M("select",{id:"role-filter","onUpdate:modelValue":Z[0]||(Z[0]=A=>p.role=A),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},Z[5]||(Z[5]=[M("option",{value:""},"Tous les rles",-1),M("option",{value:"ADMIN"},"Admin",-1),M("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),M("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[qs,p.role]])])):en("",!0),M("div",null,[Z[7]||(Z[7]=M("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),mn(M("input",{type:"text",id:"search","onUpdate:modelValue":Z[1]||(Z[1]=A=>p.search=A),placeholder:v.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,u6),[[Hn,p.search]])]),v.value?(se(),ce("div",c6,[Z[9]||(Z[9]=M("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),mn(M("select",{id:"dealer-filter","onUpdate:modelValue":Z[2]||(Z[2]=A=>p.dealer=A),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Z[8]||(Z[8]=M("option",{value:""},"Tous les concessionnaires",-1)),(se(!0),ce(_n,null,Gn(w.value,A=>(se(),ce("option",{key:A.id,value:A.id},Pe(A.company_name||`${A.first_name} ${A.last_name}`),9,h6))),128))],512),[[qs,p.dealer]])])):en("",!0)])]),M("div",f6,[M("div",d6,[M("table",p6,[M("thead",g6,[M("tr",null,[M("th",m6,Pe(v.value?"Utilisateur":"Client"),1),v.value?(se(),ce("th",v6," Rle ")):en("",!0),Z[10]||(Z[10]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),v.value?(se(),ce("th",y6," Concessionnaire ")):en("",!0),Z[11]||(Z[11]=M("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),Z[12]||(Z[12]=M("th",{scope:"col",class:"relative px-6 py-3"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",_6,[(se(!0),ce(_n,null,Gn(S.value,A=>(se(),ce("tr",{key:A.id},[M("td",b6,[M("div",w6,[M("div",x6,[M("div",L6,[M("span",C6,Pe(Mt(A.first_name,A.last_name)),1)])]),M("div",P6,[M("div",k6,Pe(Rn(Xl)(A)),1),M("div",S6,Pe(A.username),1)])])]),M("td",E6,[M("span",{class:Di(gt(A.role))},Pe(Lt(A.role)),3)]),M("td",A6,Pe(A.email),1),M("td",M6,Pe(A.dealer_name||"-"),1),M("td",B6,[M("span",{class:Di(_t(A.is_active))},Pe(A.is_active?"Actif":"Inactif"),3)]),M("td",T6,[M("button",{onClick:H=>j(A),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,D6),zt(A)?(se(),ce("button",{key:0,onClick:H=>X(A),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,N6)):en("",!0)])]))),128))])])])])]),o.value?(se(),tl(av,{key:0,user:l.value,dealers:i.value,"is-admin":v.value,"current-dealer":(Bt=(Et=Rn(e).user)==null?void 0:Et.id)==null?void 0:Bt.toString(),onClose:U,onSave:W},null,8,["user","dealers","is-admin","current-dealer"])):en("",!0),a.value?(se(),tl(lv,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:St,onCancel:Z[3]||(Z[3]=A=>a.value=!1)})):en("",!0)])}}}),R6={class:"h-full bg-gray-50"},I6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},F6={class:"sm:flex sm:items-center"},j6={class:"sm:flex-auto"},z6={class:"text-2xl font-semibold text-gray-900"},U6={class:"mt-2 text-sm text-gray-700"},q6={key:0,class:"mt-8"},$6={class:"mb-6"},V6=["value"],H6={key:0,class:"mb-6"},G6=["value"],W6={key:1,class:"mt-8"},Z6={class:"mb-6"},K6=["value"],Y6={class:"mt-8"},J6={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},X6={class:"overflow-x-auto"},Q6={class:"min-w-full divide-y divide-gray-300"},tk={class:"bg-gray-50"},ek={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},nk={class:"ml-2 flex-none rounded"},ik={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},rk={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},sk={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},ok={class:"ml-2 flex-none rounded"},ak={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},lk={class:"ml-2 flex-none rounded"},uk={class:"divide-y divide-gray-200 bg-white"},ck={key:0},hk={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},fk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},dk={key:0,class:"px-3 py-4 text-sm text-gray-900"},pk={key:0,class:"flex items-center"},gk={class:"h-8 w-8 flex-shrink-0"},mk={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},vk={class:"text-primary-700 font-medium text-sm"},yk={class:"ml-3"},_k={class:"font-medium"},bk={key:1,class:"text-gray-500"},wk={key:1,class:"px-3 py-4 text-sm text-gray-900"},xk={key:0,class:"flex items-center"},Lk={class:"h-8 w-8 flex-shrink-0"},Ck={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Pk={class:"text-primary-700 font-medium text-sm"},kk={class:"ml-3"},Sk={class:"font-medium"},Ek={key:1,class:"text-gray-500"},Ak={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Mk={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Bk={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},Tk=["onClick"],Dk=["onClick"],Nk=["onClick"],Ok={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Rk={class:"bg-white rounded-lg p-6 max-w-md w-full"},Ik={class:"flex justify-between items-center mb-4"},Fk={key:0,class:"space-y-4"},jk=["value"],zk=["value"],Uk={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},qk={class:"flex"},$k={class:"ml-3"},Vk={class:"text-sm font-medium text-red-800"},Hk={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},Gk=["disabled"],Wk={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Zk=Ls({__name:"PlansView",setup(t){const e=jc(),n=sp(),i=xs(),o=Ie([]),a=Ie([]),l=Ie([]),f=Ie(!1),p=Ie(!1),v=Ie({nom:"",description:"",client:null}),b=Ie({id:0,nom:"",description:"",concessionnaire:null,client:null}),w=Ie(!1),S=Ie(null),x=Ie(null),R=Ie(null),N=Ie("date_modification"),j=Ie("desc"),U=jn(()=>x.value?l.value.filter(V=>V.concessionnaire===x.value):l.value),W=jn(()=>{let V=o.value;return i.isAdmin?x.value&&(V=V.filter(z=>z.concessionnaire===x.value),R.value&&(V=V.filter(z=>z.client===R.value))):i.isDealer&&(V=V.filter(z=>{var mt;return z.concessionnaire===((mt=i.user)==null?void 0:mt.id)}),R.value&&(V=V.filter(z=>z.client===R.value))),[...V].sort((z,mt)=>{if(N.value==="nom")return j.value==="asc"?z.nom.localeCompare(mt.nom):mt.nom.localeCompare(z.nom);{const ft=new Date(z[N.value]).getTime(),ht=new Date(mt[N.value]).getTime();return j.value==="asc"?ft-ht:ht-ft}})}),X=jn(()=>i.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:o.value}:i.isDealer?{title:"Plans des clients",description:"Plans o vous tes assign comme concessionnaire",plans:o.value.filter(V=>{var z;return V.concessionnaire===((z=i.user)==null?void 0:z.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:o.value.filter(V=>{var z,mt;return V.client===((z=i.user)==null?void 0:z.id)||V.createur.id===((mt=i.user)==null?void 0:mt.id)})});Ea(async()=>{var V;await St(),i.isAdmin?await Mt():i.isDealer&&await Z(((V=i.user)==null?void 0:V.id)||0)});async function St(){try{const V=await n.fetchPlansWithDetails();o.value=V.data}catch(V){console.error("Erreur lors du chargement des plans:",V)}}async function Mt(){try{const[V,z]=await Promise.all([kn.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),kn.get("/users/",{params:{role:"UTILISATEUR"}})]);a.value=V.data,l.value=z.data}catch(V){console.error("Erreur lors du chargement des dealers et clients:",V)}}function Nt(){f.value=!0,v.value={nom:"",description:"",client:null}}async function Lt(V){try{n.setCurrentPlan(V),localStorage.setItem("lastPlanId",V.id.toString()),e.push("/")}catch(z){console.error("Erreur lors du chargement du plan:",z),alert("Une erreur est survenue lors du chargement du plan")}}async function gt(V){var z;if(V!=null&&V.id&&confirm("tes-vous sr de vouloir supprimer ce plan ?"))try{await n.deletePlan(V.id),await St(),((z=n.currentPlan)==null?void 0:z.id)===V.id&&n.clearCurrentPlan()}catch(mt){console.error("Erreur lors de la suppression du plan:",mt),alert("Une erreur est survenue lors de la suppression du plan")}}function _t(V){return new Date(V).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function zt(V){return V?(V.first_name.charAt(0)+V.last_name.charAt(0)).toUpperCase():""}function J(V){b.value={id:V.id,nom:V.nom,description:V.description,concessionnaire:V.concessionnaire||null,client:V.client||null},V.concessionnaire&&Z(V.concessionnaire),p.value=!0}async function Z(V){try{const z=await kn.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:V}});l.value=z.data}catch(z){console.error("Erreur lors du chargement des clients:",z),l.value=[]}}async function Et(){var V,z,mt,ft,ht;S.value=null,w.value=!0;try{if(!b.value.nom.trim())throw new Error("Le nom du plan est requis");if(b.value.client&&!b.value.concessionnaire)throw new Error("Un concessionnaire doit tre slectionn pour assigner un client");await n.updatePlanDetails(b.value.id,{nom:b.value.nom.trim(),description:b.value.description.trim(),concessionnaire:b.value.concessionnaire,client:b.value.client})&&(p.value=!1,await St())}catch(I){if(console.error("Erreur lors de la mise  jour du plan:",I),(z=(V=I.response)==null?void 0:V.data)!=null&&z.detail)S.value=I.response.data.detail;else if((ft=(mt=I.response)==null?void 0:mt.data)!=null&&ft.non_field_errors)S.value=I.response.data.non_field_errors[0];else if((ht=I.response)!=null&&ht.data){const it=Object.entries(I.response.data).map(([rt,$])=>`${rt}: ${Array.isArray($)?$[0]:$}`);S.value=it.join(`
`)}else S.value=I.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{w.value=!1}}qr(()=>b.value.concessionnaire,async V=>{V?await Z(V):(l.value=[],b.value.client=null)});function Bt(V){const z=i.user;return z?z.user_type==="admin"?!0:z.user_type==="dealer"?V.concessionnaire===z.id:V.client===z.id||V.createur.id===z.id:!1}async function A(V){await St(),localStorage.setItem("lastPlanId",V.toString()),console.log(`Plan ${V} cr et dfini comme plan actif`),e.push("/")}function H(V){N.value===V?j.value=j.value==="asc"?"desc":"asc":(N.value=V,j.value="desc")}return(V,z)=>(se(),ce("div",R6,[M("div",I6,[M("div",F6,[M("div",j6,[M("h1",z6,Pe(X.value.title),1),M("p",U6,Pe(X.value.description),1)]),M("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[M("button",{onClick:Nt,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Rn(i).isAdmin?(se(),ce("div",q6,[M("div",$6,[z[14]||(z[14]=M("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),mn(M("select",{id:"dealer-filter","onUpdate:modelValue":z[0]||(z[0]=mt=>x.value=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[13]||(z[13]=M("option",{value:null},"Tous les concessionnaires",-1)),(se(!0),ce(_n,null,Gn(a.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(mt.first_name)+" "+Pe(mt.last_name)+" ("+Pe(mt.company_name)+") ",9,V6))),128))],512),[[qs,x.value]])]),x.value?(se(),ce("div",H6,[z[16]||(z[16]=M("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),mn(M("select",{id:"client-filter","onUpdate:modelValue":z[1]||(z[1]=mt=>R.value=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[15]||(z[15]=M("option",{value:null},"Tous les clients",-1)),(se(!0),ce(_n,null,Gn(U.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(mt.first_name)+" "+Pe(mt.last_name)+" ("+Pe(mt.company_name)+") ",9,G6))),128))],512),[[qs,R.value]])])):en("",!0)])):Rn(i).isDealer?(se(),ce("div",W6,[M("div",Z6,[z[18]||(z[18]=M("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),mn(M("select",{id:"client-filter","onUpdate:modelValue":z[2]||(z[2]=mt=>R.value=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[17]||(z[17]=M("option",{value:null},"Tous les clients",-1)),(se(!0),ce(_n,null,Gn(l.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(mt.first_name)+" "+Pe(mt.last_name)+" ("+Pe(mt.company_name)+") ",9,K6))),128))],512),[[qs,R.value]])])])):en("",!0),M("div",Y6,[M("div",J6,[M("div",X6,[M("table",Q6,[M("thead",tk,[M("tr",null,[M("th",ek,[M("button",{onClick:z[3]||(z[3]=mt=>H("nom")),class:"group inline-flex items-center"},[z[20]||(z[20]=Gi(" Nom ")),M("span",nk,[(se(),ce("svg",{class:Di(["h-5 w-5",{"text-gray-900":N.value==="nom","text-gray-400":N.value!=="nom","rotate-180":N.value==="nom"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},z[19]||(z[19]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),z[25]||(z[25]=M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),Rn(i).isDealer?en("",!0):(se(),ce("th",ik," Concessionnaire ")),Rn(i).isClient?en("",!0):(se(),ce("th",rk," Client ")),M("th",sk,[M("button",{onClick:z[4]||(z[4]=mt=>H("date_creation")),class:"group inline-flex items-center"},[z[22]||(z[22]=Gi(" Cr le ")),M("span",ok,[(se(),ce("svg",{class:Di(["h-5 w-5",{"text-gray-900":N.value==="date_creation","text-gray-400":N.value!=="date_creation","rotate-180":N.value==="date_creation"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},z[21]||(z[21]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),M("th",ak,[M("button",{onClick:z[5]||(z[5]=mt=>H("date_modification")),class:"group inline-flex items-center"},[z[24]||(z[24]=Gi(" Modifi le ")),M("span",lk,[(se(),ce("svg",{class:Di(["h-5 w-5",{"text-gray-900":N.value==="date_modification","text-gray-400":N.value!=="date_modification","rotate-180":N.value==="date_modification"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},z[23]||(z[23]=[M("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),z[26]||(z[26]=M("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[M("span",{class:"sr-only"},"Actions")],-1))])]),M("tbody",uk,[W.value.length===0?(se(),ce("tr",ck,z[27]||(z[27]=[M("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):en("",!0),(se(!0),ce(_n,null,Gn(W.value,mt=>(se(),ce("tr",{key:mt.id,class:"hover:bg-gray-50"},[M("td",hk,Pe(mt.nom),1),M("td",fk,Pe(mt.description||"-"),1),Rn(i).isDealer?en("",!0):(se(),ce("td",dk,[mt.concessionnaire_details?(se(),ce("div",pk,[M("div",gk,[M("div",mk,[M("span",vk,Pe(zt(mt.concessionnaire_details)),1)])]),M("div",yk,[M("div",_k,Pe(Rn(Xl)(mt.concessionnaire_details)),1)])])):(se(),ce("div",bk,"-"))])),Rn(i).isClient?en("",!0):(se(),ce("td",wk,[mt.client_details?(se(),ce("div",xk,[M("div",Lk,[M("div",Ck,[M("span",Pk,Pe(zt(mt.client_details)),1)])]),M("div",kk,[M("div",Sk,Pe(Rn(Xl)(mt.client_details)),1)])])):(se(),ce("div",Ek,"-"))])),M("td",Ak,Pe(_t(mt.date_creation)),1),M("td",Mk,Pe(_t(mt.date_modification)),1),M("td",Bk,[M("button",{onClick:ft=>Lt(mt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,Tk),M("button",{onClick:ft=>J(mt),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,Dk),Bt(mt)?(se(),ce("button",{key:0,onClick:ft=>gt(mt),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Nk)):en("",!0)])]))),128))])])])])]),Ai(j1,{modelValue:f.value,"onUpdate:modelValue":z[6]||(z[6]=mt=>f.value=mt),dealers:a.value,clients:l.value,onCreated:A},null,8,["modelValue","dealers","clients"]),p.value?(se(),ce("div",Ok,[M("div",Rk,[M("div",Ik,[z[29]||(z[29]=M("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),M("button",{onClick:z[7]||(z[7]=mt=>p.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},z[28]||(z[28]=[M("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[M("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),M("form",{onSubmit:Jh(Et,["prevent"]),class:"space-y-4"},[M("div",null,[z[30]||(z[30]=M("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),mn(M("input",{type:"text",id:"edit-nom","onUpdate:modelValue":z[8]||(z[8]=mt=>b.value.nom=mt),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[Hn,b.value.nom]])]),M("div",null,[z[31]||(z[31]=M("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),mn(M("textarea",{id:"edit-description","onUpdate:modelValue":z[9]||(z[9]=mt=>b.value.description=mt),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Hn,b.value.description]])]),Rn(i).isAdmin?(se(),ce("div",Fk,[M("div",null,[z[33]||(z[33]=M("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),mn(M("select",{id:"edit-concessionnaire","onUpdate:modelValue":z[10]||(z[10]=mt=>b.value.concessionnaire=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[32]||(z[32]=M("option",{value:null},"Aucun",-1)),(se(!0),ce(_n,null,Gn(a.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(Rn(Xl)(mt)),9,jk))),128))],512),[[qs,b.value.concessionnaire]])]),M("div",null,[z[35]||(z[35]=M("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),mn(M("select",{id:"edit-client","onUpdate:modelValue":z[11]||(z[11]=mt=>b.value.client=mt),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[z[34]||(z[34]=M("option",{value:null},"Aucun",-1)),(se(!0),ce(_n,null,Gn(U.value,mt=>(se(),ce("option",{key:mt.id,value:mt.id},Pe(Rn(Xl)(mt)),9,zk))),128))],512),[[qs,b.value.client]])])])):en("",!0),S.value?(se(),ce("div",Uk,[M("div",qk,[z[36]||(z[36]=M("div",{class:"flex-shrink-0"},[M("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),M("div",$k,[M("p",Vk,Pe(S.value),1)])])])):en("",!0),M("div",Hk,[M("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:z[12]||(z[12]=mt=>p.value=!1)}," Annuler "),M("button",{type:"submit",disabled:w.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[w.value?(se(),ce("svg",Wk,z[37]||(z[37]=[M("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),M("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):en("",!0),Gi(" "+Pe(w.value?"Enregistrement...":"Enregistrer"),1)],8,Gk)])],32)])])):en("",!0)])]))}}),Kk={class:"h-full bg-gray-50"},Yk={class:"container mx-auto px-4 py-8"},Jk={class:"sm:flex sm:items-center"},Xk={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},Qk={class:"mt-8"},tS={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},eS={class:"overflow-x-auto"},nS={class:"min-w-full divide-y divide-gray-300"},iS={class:"divide-y divide-gray-200 bg-white"},rS={key:0,class:"animate-pulse"},sS={key:1},oS={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},aS={class:"flex items-center"},lS={class:"h-10 w-10 flex-shrink-0"},uS={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},cS={class:"text-primary-600 font-medium"},hS={class:"ml-4"},fS={class:"font-medium text-gray-900"},dS={class:"text-gray-500"},pS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},gS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},mS={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},vS={class:"flex items-center"},yS={class:"font-medium"},_S={class:"text-gray-400 ml-1"},bS={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},wS=["onClick"],xS=["onClick"],LS=Ls({__name:"ClientListView",setup(t){jc();const e=xs(),n=Ie([]),i=Ie(!0),o=Ie(!1),a=Ie(!1),l=Ie(null),f=Ie(null);Ea(async()=>{await p()});async function p(){var N;try{const j=await kn.get("/users/",{params:{dealer:(N=e.user)==null?void 0:N.id,role:"UTILISATEUR",include_plans:!0}});n.value=j.data}catch(j){console.error("Error fetching clients:",j)}finally{i.value=!1}}function v(N,j){return`${(N==null?void 0:N.charAt(0))||""}${(j==null?void 0:j.charAt(0))||""}`.toUpperCase()}function b(N){l.value=N,o.value=!0}function w(){o.value=!1,l.value=null}async function S(N){var j;try{const U=!!N.id,W=U?`/users/${N.id}/`:"/users/",X=U?"patch":"post";N.role="UTILISATEUR",N.concessionnaire=(j=e.user)==null?void 0:j.id,await kn[X](W,N),await p(),w()}catch(U){throw console.error("Erreur lors de la sauvegarde du client:",U),U}}function x(N){f.value=N,a.value=!0}async function R(){if(f.value)try{await kn.delete(`/users/${f.value.id}/`),await p(),a.value=!1,f.value=null}catch(N){throw console.error("Erreur lors de la suppression du client:",N),N}}return(N,j)=>{var U,W;return se(),ce("div",Kk,[M("div",Yk,[M("div",Jk,[j[3]||(j[3]=M("div",{class:"sm:flex-auto"},[M("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),M("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associs ")],-1)),M("div",Xk,[M("button",{onClick:j[0]||(j[0]=X=>o.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},j[2]||(j[2]=[M("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[M("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Gi(" Ajouter un client ")]))])]),M("div",Qk,[M("div",tS,[M("div",eS,[M("table",nS,[j[6]||(j[6]=M("thead",{class:"bg-gray-50"},[M("tr",null,[M("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),M("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),M("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[M("span",{class:"sr-only"},"Actions")])])],-1)),M("tbody",iS,[i.value?(se(),ce("tr",rS,j[4]||(j[4]=[M("td",{colspan:"5",class:"py-4 px-6"},[M("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):n.value.length===0?(se(),ce("tr",sS,j[5]||(j[5]=[M("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouv ",-1)]))):en("",!0),(se(!0),ce(_n,null,Gn(n.value,X=>(se(),ce("tr",{key:X.id,class:"hover:bg-gray-50"},[M("td",oS,[M("div",aS,[M("div",lS,[M("div",uS,[M("span",cS,Pe(v(X.first_name,X.last_name)),1)])]),M("div",hS,[M("div",fS,Pe(Rn(Xl)(X)),1),M("div",dS,Pe(X.username),1)])])]),M("td",pS,Pe(X.email),1),M("td",gS,Pe(X.company_name||"-"),1),M("td",mS,[M("div",vS,[M("span",yS,Pe(X.plans_count||0),1),M("span",_S,"plan"+Pe((X.plans_count||0)>1?"s":""),1)])]),M("td",bS,[M("button",{onClick:St=>b(X),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,wS),M("button",{onClick:St=>x(X),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,xS)])]))),128))])])])])]),o.value?(se(),tl(av,{key:0,user:l.value||{},dealers:[{...Rn(e).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(W=(U=Rn(e).user)==null?void 0:U.id)==null?void 0:W.toString(),onClose:w,onSave:S},null,8,["user","dealers","current-dealer"])):en("",!0),a.value?(se(),tl(lv,{key:1,title:"Supprimer le client",message:"tes-vous sr de vouloir supprimer ce client ? Cette action est irrversible.",onConfirm:R,onCancel:j[1]||(j[1]=X=>a.value=!1)})):en("",!0)])])}}}),uv=O5({history:f5("/"),routes:[{path:"/",name:"home",component:xg,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:Zk,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:O6,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:LS,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Ql(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:Q3,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Ql(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Ql(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:N3,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:xg,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Ql(()=>import("./NotFoundView.js"),[])}]});uv.beforeEach(async(t,e,n)=>{var f,p;const i=xs();if(console.log("Route:",t.path,"Auth state:",{initialized:i.initialized,isAuthenticated:i.isAuthenticated,user:i.user}),!i.initialized)try{await i.initialize(window.INITIAL_STATE)}catch(v){console.error("Error initializing auth store:",v)}const o=i.isAuthenticated,a=(f=i.user)==null?void 0:f.must_change_password,l=(p=i.user)==null?void 0:p.user_type;if(t.meta.requiresAuth&&!o){n("/login");return}if(o&&a&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!a){n({name:"home"});return}if(t.meta.allowedRoles&&l&&!t.meta.allowedRoles.includes(l)){n({name:"home"});return}if(t.meta.requiresGuest&&o){n({name:"home"});return}n()});const up=Y2(f3),cv=Q2();up.use(cv);up.use(uv);const CS=xs(cv);window.INITIAL_STATE&&CS.initialize(window.INITIAL_STATE);up.mount("#app");export{fi as _,el as a,M as b,ce as c,Ls as d,en as e,mn as f,se as g,gc as h,Gi as i,Ai as j,Ja as k,ky as l,VS as m,Di as n,Ea as o,jc as p,Eo as q,Ie as r,k1 as s,Pe as t,xs as u,Hn as v,Jh as w};
