var em=Object.defineProperty;var im=(t,n,o)=>n in t?em(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var Zt=(t,n,o)=>im(t,typeof n!="symbol"?n+"":n,o);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function o(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(c){if(c.ep)return;c.ep=!0;const p=o(c);fetch(c.href,p)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function mh(t){const n=Object.create(null);for(const o of t.split(","))n[o]=1;return o=>o in n}const Ne={},ks=[],En=()=>{},nm=()=>!1,cl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),gh=t=>t.startsWith("onUpdate:"),Li=Object.assign,_h=(t,n)=>{const o=t.indexOf(n);o>-1&&t.splice(o,1)},rm=Object.prototype.hasOwnProperty,Se=(t,n)=>rm.call(t,n),ee=Array.isArray,Es=t=>Ho(t)==="[object Map]",Ts=t=>Ho(t)==="[object Set]",Jh=t=>Ho(t)==="[object Date]",he=t=>typeof t=="function",ti=t=>typeof t=="string",Pn=t=>typeof t=="symbol",Ue=t=>t!==null&&typeof t=="object",bd=t=>(Ue(t)||he(t))&&he(t.then)&&he(t.catch),xd=Object.prototype.toString,Ho=t=>xd.call(t),sm=t=>Ho(t).slice(8,-1),wd=t=>Ho(t)==="[object Object]",yh=t=>ti(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Lo=mh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dl=t=>{const n=Object.create(null);return o=>n[o]||(n[o]=t(o))},om=/-(\w)/g,nn=dl(t=>t.replace(om,(n,o)=>o?o.toUpperCase():"")),am=/\B([A-Z])/g,Zr=dl(t=>t.replace(am,"-$1").toLowerCase()),fl=dl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Eu=dl(t=>t?`on${fl(t)}`:""),mr=(t,n)=>!Object.is(t,n),ja=(t,...n)=>{for(let o=0;o<t.length;o++)t[o](...n)},Ld=(t,n,o,l=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:l,value:o})},Ya=t=>{const n=parseFloat(t);return isNaN(n)?t:n};let Yh;const pl=()=>Yh||(Yh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ml(t){if(ee(t)){const n={};for(let o=0;o<t.length;o++){const l=t[o],c=ti(l)?cm(l):ml(l);if(c)for(const p in c)n[p]=c[p]}return n}else if(ti(t)||Ue(t))return t}const lm=/;(?![^(]*\))/g,um=/:([^]+)/,hm=/\/\*[^]*?\*\//g;function cm(t){const n={};return t.replace(hm,"").split(lm).forEach(o=>{if(o){const l=o.split(um);l.length>1&&(n[l[0].trim()]=l[1].trim())}}),n}function yr(t){let n="";if(ti(t))n=t;else if(ee(t))for(let o=0;o<t.length;o++){const l=yr(t[o]);l&&(n+=l+" ")}else if(Ue(t))for(const o in t)t[o]&&(n+=o+" ");return n.trim()}const dm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fm=mh(dm);function Cd(t){return!!t||t===""}function pm(t,n){if(t.length!==n.length)return!1;let o=!0;for(let l=0;o&&l<t.length;l++)o=Zo(t[l],n[l]);return o}function Zo(t,n){if(t===n)return!0;let o=Jh(t),l=Jh(n);if(o||l)return o&&l?t.getTime()===n.getTime():!1;if(o=Pn(t),l=Pn(n),o||l)return t===n;if(o=ee(t),l=ee(n),o||l)return o&&l?pm(t,n):!1;if(o=Ue(t),l=Ue(n),o||l){if(!o||!l)return!1;const c=Object.keys(t).length,p=Object.keys(n).length;if(c!==p)return!1;for(const f in t){const y=t.hasOwnProperty(f),v=n.hasOwnProperty(f);if(y&&!v||!y&&v||!Zo(t[f],n[f]))return!1}}return String(t)===String(n)}function vh(t,n){return t.findIndex(o=>Zo(o,n))}const kd=t=>!!(t&&t.__v_isRef===!0),ce=t=>ti(t)?t:t==null?"":ee(t)||Ue(t)&&(t.toString===xd||!he(t.toString))?kd(t)?ce(t.value):JSON.stringify(t,Ed,2):String(t),Ed=(t,n)=>kd(n)?Ed(t,n.value):Es(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((o,[l,c],p)=>(o[Mu(l,p)+" =>"]=c,o),{})}:Ts(n)?{[`Set(${n.size})`]:[...n.values()].map(o=>Mu(o))}:Pn(n)?Mu(n):Ue(n)&&!ee(n)&&!wd(n)?String(n):n,Mu=(t,n="")=>{var o;return Pn(t)?`Symbol(${(o=t.description)!=null?o:n})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Si;class Md{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Si,!n&&Si&&(this.index=(Si.scopes||(Si.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,o;if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].pause();for(n=0,o=this.effects.length;n<o;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,o;if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].resume();for(n=0,o=this.effects.length;n<o;n++)this.effects[n].resume()}}run(n){if(this._active){const o=Si;try{return Si=this,n()}finally{Si=o}}}on(){Si=this}off(){Si=this.parent}stop(n){if(this._active){this._active=!1;let o,l;for(o=0,l=this.effects.length;o<l;o++)this.effects[o].stop();for(this.effects.length=0,o=0,l=this.cleanups.length;o<l;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,l=this.scopes.length;o<l;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0}}}function Pd(t){return new Md(t)}function Bd(){return Si}function mm(t,n=!1){Si&&Si.cleanups.push(t)}let je;const Pu=new WeakSet;class Sd{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Si&&Si.active&&Si.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Pu.has(this)&&(Pu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Td(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xh(this),Dd(this);const n=je,o=un;je=this,un=!0;try{return this.fn()}finally{Rd(this),je=n,un=o,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)wh(n);this.deps=this.depsTail=void 0,Xh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Pu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Hu(this)&&this.run()}get dirty(){return Hu(this)}}let Ad=0,Co,ko;function Td(t,n=!1){if(t.flags|=8,n){t.next=ko,ko=t;return}t.next=Co,Co=t}function bh(){Ad++}function xh(){if(--Ad>0)return;if(ko){let n=ko;for(ko=void 0;n;){const o=n.next;n.next=void 0,n.flags&=-9,n=o}}let t;for(;Co;){let n=Co;for(Co=void 0;n;){const o=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(l){t||(t=l)}n=o}}if(t)throw t}function Dd(t){for(let n=t.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function Rd(t){let n,o=t.depsTail,l=o;for(;l;){const c=l.prevDep;l.version===-1?(l===o&&(o=c),wh(l),gm(l)):n=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=c}t.deps=n,t.depsTail=o}function Hu(t){for(let n=t.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(Od(n.dep.computed)||n.dep.version!==n.version))return!0;return!!t._dirty}function Od(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Do))return;t.globalVersion=Do;const n=t.dep;if(t.flags|=2,n.version>0&&!t.isSSR&&t.deps&&!Hu(t)){t.flags&=-3;return}const o=je,l=un;je=t,un=!0;try{Dd(t);const c=t.fn(t._value);(n.version===0||mr(c,t._value))&&(t._value=c,n.version++)}catch(c){throw n.version++,c}finally{je=o,un=l,Rd(t),t.flags&=-3}}function wh(t,n=!1){const{dep:o,prevSub:l,nextSub:c}=t;if(l&&(l.nextSub=c,t.prevSub=void 0),c&&(c.prevSub=l,t.nextSub=void 0),o.subs===t&&(o.subs=l,!l&&o.computed)){o.computed.flags&=-5;for(let p=o.computed.deps;p;p=p.nextDep)wh(p,!0)}!n&&!--o.sc&&o.map&&o.map.delete(o.key)}function gm(t){const{prevDep:n,nextDep:o}=t;n&&(n.nextDep=o,t.prevDep=void 0),o&&(o.prevDep=n,t.nextDep=void 0)}let un=!0;const Id=[];function vr(){Id.push(un),un=!1}function br(){const t=Id.pop();un=t===void 0?!0:t}function Xh(t){const{cleanup:n}=t;if(t.cleanup=void 0,n){const o=je;je=void 0;try{n()}finally{je=o}}}let Do=0;class _m{constructor(n,o){this.sub=n,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Lh{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!je||!un||je===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==je)o=this.activeLink=new _m(je,this),je.deps?(o.prevDep=je.depsTail,je.depsTail.nextDep=o,je.depsTail=o):je.deps=je.depsTail=o,Fd(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const l=o.nextDep;l.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=l),o.prevDep=je.depsTail,o.nextDep=void 0,je.depsTail.nextDep=o,je.depsTail=o,je.deps===o&&(je.deps=l)}return o}trigger(n){this.version++,Do++,this.notify(n)}notify(n){bh();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{xh()}}}function Fd(t){if(t.dep.sc++,t.sub.flags&4){const n=t.dep.computed;if(n&&!t.dep.subs){n.flags|=20;for(let l=n.deps;l;l=l.nextDep)Fd(l)}const o=t.dep.subs;o!==t&&(t.prevSub=o,o&&(o.nextSub=t)),t.dep.subs=t}}const Xa=new WeakMap,jr=Symbol(""),Zu=Symbol(""),Ro=Symbol("");function bi(t,n,o){if(un&&je){let l=Xa.get(t);l||Xa.set(t,l=new Map);let c=l.get(o);c||(l.set(o,c=new Lh),c.map=l,c.key=o),c.track()}}function Vn(t,n,o,l,c,p){const f=Xa.get(t);if(!f){Do++;return}const y=v=>{v&&v.trigger()};if(bh(),n==="clear")f.forEach(y);else{const v=ee(t),M=v&&yh(o);if(v&&o==="length"){const k=Number(l);f.forEach((E,O)=>{(O==="length"||O===Ro||!Pn(O)&&O>=k)&&y(E)})}else switch((o!==void 0||f.has(void 0))&&y(f.get(o)),M&&y(f.get(Ro)),n){case"add":v?M&&y(f.get("length")):(y(f.get(jr)),Es(t)&&y(f.get(Zu)));break;case"delete":v||(y(f.get(jr)),Es(t)&&y(f.get(Zu)));break;case"set":Es(t)&&y(f.get(jr));break}}xh()}function ym(t,n){const o=Xa.get(t);return o&&o.get(n)}function xs(t){const n=xe(t);return n===t?n:(bi(n,"iterate",Ro),tn(t)?n:n.map(xi))}function gl(t){return bi(t=xe(t),"iterate",Ro),t}const vm={__proto__:null,[Symbol.iterator](){return Bu(this,Symbol.iterator,xi)},concat(...t){return xs(this).concat(...t.map(n=>ee(n)?xs(n):n))},entries(){return Bu(this,"entries",t=>(t[1]=xi(t[1]),t))},every(t,n){return Un(this,"every",t,n,void 0,arguments)},filter(t,n){return Un(this,"filter",t,n,o=>o.map(xi),arguments)},find(t,n){return Un(this,"find",t,n,xi,arguments)},findIndex(t,n){return Un(this,"findIndex",t,n,void 0,arguments)},findLast(t,n){return Un(this,"findLast",t,n,xi,arguments)},findLastIndex(t,n){return Un(this,"findLastIndex",t,n,void 0,arguments)},forEach(t,n){return Un(this,"forEach",t,n,void 0,arguments)},includes(...t){return Su(this,"includes",t)},indexOf(...t){return Su(this,"indexOf",t)},join(t){return xs(this).join(t)},lastIndexOf(...t){return Su(this,"lastIndexOf",t)},map(t,n){return Un(this,"map",t,n,void 0,arguments)},pop(){return go(this,"pop")},push(...t){return go(this,"push",t)},reduce(t,...n){return Qh(this,"reduce",t,n)},reduceRight(t,...n){return Qh(this,"reduceRight",t,n)},shift(){return go(this,"shift")},some(t,n){return Un(this,"some",t,n,void 0,arguments)},splice(...t){return go(this,"splice",t)},toReversed(){return xs(this).toReversed()},toSorted(t){return xs(this).toSorted(t)},toSpliced(...t){return xs(this).toSpliced(...t)},unshift(...t){return go(this,"unshift",t)},values(){return Bu(this,"values",xi)}};function Bu(t,n,o){const l=gl(t),c=l[n]();return l!==t&&!tn(t)&&(c._next=c.next,c.next=()=>{const p=c._next();return p.value&&(p.value=o(p.value)),p}),c}const bm=Array.prototype;function Un(t,n,o,l,c,p){const f=gl(t),y=f!==t&&!tn(t),v=f[n];if(v!==bm[n]){const E=v.apply(t,p);return y?xi(E):E}let M=o;f!==t&&(y?M=function(E,O){return o.call(this,xi(E),O,t)}:o.length>2&&(M=function(E,O){return o.call(this,E,O,t)}));const k=v.call(f,M,l);return y&&c?c(k):k}function Qh(t,n,o,l){const c=gl(t);let p=o;return c!==t&&(tn(t)?o.length>3&&(p=function(f,y,v){return o.call(this,f,y,v,t)}):p=function(f,y,v){return o.call(this,f,xi(y),v,t)}),c[n](p,...l)}function Su(t,n,o){const l=xe(t);bi(l,"iterate",Ro);const c=l[n](...o);return(c===-1||c===!1)&&Eh(o[0])?(o[0]=xe(o[0]),l[n](...o)):c}function go(t,n,o=[]){vr(),bh();const l=xe(t)[n].apply(t,o);return xh(),br(),l}const xm=mh("__proto__,__v_isRef,__isVue"),Nd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Pn));function wm(t){Pn(t)||(t=String(t));const n=xe(this);return bi(n,"has",t),n.hasOwnProperty(t)}class zd{constructor(n=!1,o=!1){this._isReadonly=n,this._isShallow=o}get(n,o,l){if(o==="__v_skip")return n.__v_skip;const c=this._isReadonly,p=this._isShallow;if(o==="__v_isReactive")return!c;if(o==="__v_isReadonly")return c;if(o==="__v_isShallow")return p;if(o==="__v_raw")return l===(c?p?Tm:$d:p?Gd:Ud).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(l)?n:void 0;const f=ee(n);if(!c){let v;if(f&&(v=vm[o]))return v;if(o==="hasOwnProperty")return wm}const y=Reflect.get(n,o,Ye(n)?n:l);return(Pn(o)?Nd.has(o):xm(o))||(c||bi(n,"get",o),p)?y:Ye(y)?f&&yh(o)?y:y.value:Ue(y)?c?Hd(y):Kn(y):y}}class jd extends zd{constructor(n=!1){super(!1,n)}set(n,o,l,c){let p=n[o];if(!this._isShallow){const v=$r(p);if(!tn(l)&&!$r(l)&&(p=xe(p),l=xe(l)),!ee(n)&&Ye(p)&&!Ye(l))return v?!1:(p.value=l,!0)}const f=ee(n)&&yh(o)?Number(o)<n.length:Se(n,o),y=Reflect.set(n,o,l,Ye(n)?n:c);return n===xe(c)&&(f?mr(l,p)&&Vn(n,"set",o,l):Vn(n,"add",o,l)),y}deleteProperty(n,o){const l=Se(n,o);n[o];const c=Reflect.deleteProperty(n,o);return c&&l&&Vn(n,"delete",o,void 0),c}has(n,o){const l=Reflect.has(n,o);return(!Pn(o)||!Nd.has(o))&&bi(n,"has",o),l}ownKeys(n){return bi(n,"iterate",ee(n)?"length":jr),Reflect.ownKeys(n)}}class Lm extends zd{constructor(n=!1){super(!0,n)}set(n,o){return!0}deleteProperty(n,o){return!0}}const Cm=new jd,km=new Lm,Em=new jd(!0);const qu=t=>t,Ia=t=>Reflect.getPrototypeOf(t);function Mm(t,n,o){return function(...l){const c=this.__v_raw,p=xe(c),f=Es(p),y=t==="entries"||t===Symbol.iterator&&f,v=t==="keys"&&f,M=c[t](...l),k=o?qu:n?Ku:xi;return!n&&bi(p,"iterate",v?Zu:jr),{next(){const{value:E,done:O}=M.next();return O?{value:E,done:O}:{value:y?[k(E[0]),k(E[1])]:k(E),done:O}},[Symbol.iterator](){return this}}}}function Fa(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function Pm(t,n){const o={get(c){const p=this.__v_raw,f=xe(p),y=xe(c);t||(mr(c,y)&&bi(f,"get",c),bi(f,"get",y));const{has:v}=Ia(f),M=n?qu:t?Ku:xi;if(v.call(f,c))return M(p.get(c));if(v.call(f,y))return M(p.get(y));p!==f&&p.get(c)},get size(){const c=this.__v_raw;return!t&&bi(xe(c),"iterate",jr),Reflect.get(c,"size",c)},has(c){const p=this.__v_raw,f=xe(p),y=xe(c);return t||(mr(c,y)&&bi(f,"has",c),bi(f,"has",y)),c===y?p.has(c):p.has(c)||p.has(y)},forEach(c,p){const f=this,y=f.__v_raw,v=xe(y),M=n?qu:t?Ku:xi;return!t&&bi(v,"iterate",jr),y.forEach((k,E)=>c.call(p,M(k),M(E),f))}};return Li(o,t?{add:Fa("add"),set:Fa("set"),delete:Fa("delete"),clear:Fa("clear")}:{add(c){!n&&!tn(c)&&!$r(c)&&(c=xe(c));const p=xe(this);return Ia(p).has.call(p,c)||(p.add(c),Vn(p,"add",c,c)),this},set(c,p){!n&&!tn(p)&&!$r(p)&&(p=xe(p));const f=xe(this),{has:y,get:v}=Ia(f);let M=y.call(f,c);M||(c=xe(c),M=y.call(f,c));const k=v.call(f,c);return f.set(c,p),M?mr(p,k)&&Vn(f,"set",c,p):Vn(f,"add",c,p),this},delete(c){const p=xe(this),{has:f,get:y}=Ia(p);let v=f.call(p,c);v||(c=xe(c),v=f.call(p,c)),y&&y.call(p,c);const M=p.delete(c);return v&&Vn(p,"delete",c,void 0),M},clear(){const c=xe(this),p=c.size!==0,f=c.clear();return p&&Vn(c,"clear",void 0,void 0),f}}),["keys","values","entries",Symbol.iterator].forEach(c=>{o[c]=Mm(c,t,n)}),o}function Ch(t,n){const o=Pm(t,n);return(l,c,p)=>c==="__v_isReactive"?!t:c==="__v_isReadonly"?t:c==="__v_raw"?l:Reflect.get(Se(o,c)&&c in l?o:l,c,p)}const Bm={get:Ch(!1,!1)},Sm={get:Ch(!1,!0)},Am={get:Ch(!0,!1)};const Ud=new WeakMap,Gd=new WeakMap,$d=new WeakMap,Tm=new WeakMap;function Dm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rm(t){return t.__v_skip||!Object.isExtensible(t)?0:Dm(sm(t))}function Kn(t){return $r(t)?t:kh(t,!1,Cm,Bm,Ud)}function Vd(t){return kh(t,!1,Em,Sm,Gd)}function Hd(t){return kh(t,!0,km,Am,$d)}function kh(t,n,o,l,c){if(!Ue(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const p=c.get(t);if(p)return p;const f=Rm(t);if(f===0)return t;const y=new Proxy(t,f===2?l:o);return c.set(t,y),y}function gr(t){return $r(t)?gr(t.__v_raw):!!(t&&t.__v_isReactive)}function $r(t){return!!(t&&t.__v_isReadonly)}function tn(t){return!!(t&&t.__v_isShallow)}function Eh(t){return t?!!t.__v_raw:!1}function xe(t){const n=t&&t.__v_raw;return n?xe(n):t}function Mh(t){return!Se(t,"__v_skip")&&Object.isExtensible(t)&&Ld(t,"__v_skip",!0),t}const xi=t=>Ue(t)?Kn(t):t,Ku=t=>Ue(t)?Hd(t):t;function Ye(t){return t?t.__v_isRef===!0:!1}function ie(t){return Zd(t,!1)}function Om(t){return Zd(t,!0)}function Zd(t,n){return Ye(t)?t:new Im(t,n)}class Im{constructor(n,o){this.dep=new Lh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?n:xe(n),this._value=o?n:xi(n),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(n){const o=this._rawValue,l=this.__v_isShallow||tn(n)||$r(n);n=l?n:xe(n),mr(n,o)&&(this._rawValue=n,this._value=l?n:xi(n),this.dep.trigger())}}function Ti(t){return Ye(t)?t.value:t}const Fm={get:(t,n,o)=>n==="__v_raw"?t:Ti(Reflect.get(t,n,o)),set:(t,n,o,l)=>{const c=t[n];return Ye(c)&&!Ye(o)?(c.value=o,!0):Reflect.set(t,n,o,l)}};function qd(t){return gr(t)?t:new Proxy(t,Fm)}function Nm(t){const n=ee(t)?new Array(t.length):{};for(const o in t)n[o]=jm(t,o);return n}class zm{constructor(n,o,l){this._object=n,this._key=o,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return ym(xe(this._object),this._key)}}function jm(t,n,o){const l=t[n];return Ye(l)?l:new zm(t,n,o)}class Um{constructor(n,o,l){this.fn=n,this.setter=o,this._value=void 0,this.dep=new Lh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Do-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&je!==this)return Td(this,!0),!0}get value(){const n=this.dep.track();return Od(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function Gm(t,n,o=!1){let l,c;return he(t)?l=t:(l=t.get,c=t.set),new Um(l,c,o)}const Na={},Qa=new WeakMap;let Nr;function $m(t,n=!1,o=Nr){if(o){let l=Qa.get(o);l||Qa.set(o,l=[]),l.push(t)}}function Vm(t,n,o=Ne){const{immediate:l,deep:c,once:p,scheduler:f,augmentJob:y,call:v}=o,M=wt=>c?wt:tn(wt)||c===!1||c===0?Hn(wt,1):Hn(wt);let k,E,O,z,K=!1,q=!1;if(Ye(t)?(E=()=>t.value,K=tn(t)):gr(t)?(E=()=>M(t),K=!0):ee(t)?(q=!0,K=t.some(wt=>gr(wt)||tn(wt)),E=()=>t.map(wt=>{if(Ye(wt))return wt.value;if(gr(wt))return M(wt);if(he(wt))return v?v(wt,2):wt()})):he(t)?n?E=v?()=>v(t,2):t:E=()=>{if(O){vr();try{O()}finally{br()}}const wt=Nr;Nr=k;try{return v?v(t,3,[z]):t(z)}finally{Nr=wt}}:E=En,n&&c){const wt=E,ut=c===!0?1/0:c;E=()=>Hn(wt(),ut)}const X=Bd(),ht=()=>{k.stop(),X&&X.active&&_h(X.effects,k)};if(p&&n){const wt=n;n=(...ut)=>{wt(...ut),ht()}}let gt=q?new Array(t.length).fill(Na):Na;const pt=wt=>{if(!(!(k.flags&1)||!k.dirty&&!wt))if(n){const ut=k.run();if(c||K||(q?ut.some((Pt,Et)=>mr(Pt,gt[Et])):mr(ut,gt))){O&&O();const Pt=Nr;Nr=k;try{const Et=[ut,gt===Na?void 0:q&&gt[0]===Na?[]:gt,z];v?v(n,3,Et):n(...Et),gt=ut}finally{Nr=Pt}}}else k.run()};return y&&y(pt),k=new Sd(E),k.scheduler=f?()=>f(pt,!1):pt,z=wt=>$m(wt,!1,k),O=k.onStop=()=>{const wt=Qa.get(k);if(wt){if(v)v(wt,4);else for(const ut of wt)ut();Qa.delete(k)}},n?l?pt(!0):gt=k.run():f?f(pt.bind(null,!0),!0):k.run(),ht.pause=k.pause.bind(k),ht.resume=k.resume.bind(k),ht.stop=ht,ht}function Hn(t,n=1/0,o){if(n<=0||!Ue(t)||t.__v_skip||(o=o||new Set,o.has(t)))return t;if(o.add(t),n--,Ye(t))Hn(t.value,n,o);else if(ee(t))for(let l=0;l<t.length;l++)Hn(t[l],n,o);else if(Ts(t)||Es(t))t.forEach(l=>{Hn(l,n,o)});else if(wd(t)){for(const l in t)Hn(t[l],n,o);for(const l of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,l)&&Hn(t[l],n,o)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qo(t,n,o,l){try{return l?t(...l):t()}catch(c){_l(c,n,o)}}function Bn(t,n,o,l){if(he(t)){const c=qo(t,n,o,l);return c&&bd(c)&&c.catch(p=>{_l(p,n,o)}),c}if(ee(t)){const c=[];for(let p=0;p<t.length;p++)c.push(Bn(t[p],n,o,l));return c}}function _l(t,n,o,l=!0){const c=n?n.vnode:null,{errorHandler:p,throwUnhandledErrorInProduction:f}=n&&n.appContext.config||Ne;if(n){let y=n.parent;const v=n.proxy,M=`https://vuejs.org/error-reference/#runtime-${o}`;for(;y;){const k=y.ec;if(k){for(let E=0;E<k.length;E++)if(k[E](t,v,M)===!1)return}y=y.parent}if(p){vr(),qo(p,null,10,[t,v,M]),br();return}}Hm(t,o,c,l,f)}function Hm(t,n,o,l=!0,c=!1){if(c)throw t;console.error(t)}const Ai=[];let Cn=-1;const Ms=[];let hr=null,Ls=0;const Kd=Promise.resolve();let tl=null;function yl(t){const n=tl||Kd;return t?n.then(this?t.bind(this):t):n}function Zm(t){let n=Cn+1,o=Ai.length;for(;n<o;){const l=n+o>>>1,c=Ai[l],p=Oo(c);p<t||p===t&&c.flags&2?n=l+1:o=l}return n}function Ph(t){if(!(t.flags&1)){const n=Oo(t),o=Ai[Ai.length-1];!o||!(t.flags&2)&&n>=Oo(o)?Ai.push(t):Ai.splice(Zm(n),0,t),t.flags|=1,Wd()}}function Wd(){tl||(tl=Kd.then(Yd))}function qm(t){ee(t)?Ms.push(...t):hr&&t.id===-1?hr.splice(Ls+1,0,t):t.flags&1||(Ms.push(t),t.flags|=1),Wd()}function tc(t,n,o=Cn+1){for(;o<Ai.length;o++){const l=Ai[o];if(l&&l.flags&2){if(t&&l.id!==t.uid)continue;Ai.splice(o,1),o--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function Jd(t){if(Ms.length){const n=[...new Set(Ms)].sort((o,l)=>Oo(o)-Oo(l));if(Ms.length=0,hr){hr.push(...n);return}for(hr=n,Ls=0;Ls<hr.length;Ls++){const o=hr[Ls];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}hr=null,Ls=0}}const Oo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Yd(t){try{for(Cn=0;Cn<Ai.length;Cn++){const n=Ai[Cn];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),qo(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;Cn<Ai.length;Cn++){const n=Ai[Cn];n&&(n.flags&=-2)}Cn=-1,Ai.length=0,Jd(),tl=null,(Ai.length||Ms.length)&&Yd()}}let Fi=null,Xd=null;function el(t){const n=Fi;return Fi=t,Xd=t&&t.type.__scopeId||null,n}function Eo(t,n=Fi,o){if(!n||t._n)return t;const l=(...c)=>{l._d&&hc(-1);const p=el(n);let f;try{f=t(...c)}finally{el(p),l._d&&hc(1)}return f};return l._n=!0,l._c=!0,l._d=!0,l}function ke(t,n){if(Fi===null)return t;const o=wl(Fi),l=t.dirs||(t.dirs=[]);for(let c=0;c<n.length;c++){let[p,f,y,v=Ne]=n[c];p&&(he(p)&&(p={mounted:p,updated:p}),p.deep&&Hn(f),l.push({dir:p,instance:o,value:f,oldValue:void 0,arg:y,modifiers:v}))}return t}function Or(t,n,o,l){const c=t.dirs,p=n&&n.dirs;for(let f=0;f<c.length;f++){const y=c[f];p&&(y.oldValue=p[f].value);let v=y.dir[l];v&&(vr(),Bn(v,o,8,[t.el,y,t,n]),br())}}const Km=Symbol("_vte"),Wm=t=>t.__isTeleport;function Bh(t,n){t.shapeFlag&6&&t.component?(t.transition=n,Bh(t.component.subTree,n)):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}/*! #__NO_SIDE_EFFECTS__ */function dn(t,n){return he(t)?Li({name:t.name},n,{setup:t}):t}function Qd(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function il(t,n,o,l,c=!1){if(ee(t)){t.forEach((K,q)=>il(K,n&&(ee(n)?n[q]:n),o,l,c));return}if(Mo(l)&&!c){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&il(t,n,o,l.component.subTree);return}const p=l.shapeFlag&4?wl(l.component):l.el,f=c?null:p,{i:y,r:v}=t,M=n&&n.r,k=y.refs===Ne?y.refs={}:y.refs,E=y.setupState,O=xe(E),z=E===Ne?()=>!1:K=>Se(O,K);if(M!=null&&M!==v&&(ti(M)?(k[M]=null,z(M)&&(E[M]=null)):Ye(M)&&(M.value=null)),he(v))qo(v,y,12,[f,k]);else{const K=ti(v),q=Ye(v);if(K||q){const X=()=>{if(t.f){const ht=K?z(v)?E[v]:k[v]:v.value;c?ee(ht)&&_h(ht,p):ee(ht)?ht.includes(p)||ht.push(p):K?(k[v]=[p],z(v)&&(E[v]=k[v])):(v.value=[p],t.k&&(k[t.k]=v.value))}else K?(k[v]=f,z(v)&&(E[v]=f)):q&&(v.value=f,t.k&&(k[t.k]=f))};f?(X.id=-1,Gi(X,o)):X()}}}pl().requestIdleCallback;pl().cancelIdleCallback;const Mo=t=>!!t.type.__asyncLoader,tf=t=>t.type.__isKeepAlive;function Jm(t,n){ef(t,"a",n)}function Ym(t,n){ef(t,"da",n)}function ef(t,n,o=pi){const l=t.__wdc||(t.__wdc=()=>{let c=o;for(;c;){if(c.isDeactivated)return;c=c.parent}return t()});if(vl(n,l,o),o){let c=o.parent;for(;c&&c.parent;)tf(c.parent.vnode)&&Xm(l,n,o,c),c=c.parent}}function Xm(t,n,o,l){const c=vl(n,t,l,!0);Sh(()=>{_h(l[n],c)},o)}function vl(t,n,o=pi,l=!1){if(o){const c=o[t]||(o[t]=[]),p=n.__weh||(n.__weh=(...f)=>{vr();const y=Ko(o),v=Bn(n,o,t,f);return y(),br(),v});return l?c.unshift(p):c.push(p),p}}const Wn=t=>(n,o=pi)=>{(!No||t==="sp")&&vl(t,(...l)=>n(...l),o)},Qm=Wn("bm"),Ds=Wn("m"),t0=Wn("bu"),e0=Wn("u"),i0=Wn("bum"),Sh=Wn("um"),n0=Wn("sp"),r0=Wn("rtg"),s0=Wn("rtc");function o0(t,n=pi){vl("ec",t,n)}const a0="components";function l0(t,n){return h0(a0,t,!0,n)||t}const u0=Symbol.for("v-ndc");function h0(t,n,o=!0,l=!1){const c=Fi||pi;if(c){const p=c.type;{const y=Y0(p,!1);if(y&&(y===n||y===nn(n)||y===fl(nn(n))))return p}const f=ec(c[t]||p[t],n)||ec(c.appContext[t],n);return!f&&l?p:f}}function ec(t,n){return t&&(t[n]||t[nn(n)]||t[fl(nn(n))])}function Mn(t,n,o,l){let c;const p=o,f=ee(t);if(f||ti(t)){const y=f&&gr(t);let v=!1;y&&(v=!tn(t),t=gl(t)),c=new Array(t.length);for(let M=0,k=t.length;M<k;M++)c[M]=n(v?xi(t[M]):t[M],M,void 0,p)}else if(typeof t=="number"){c=new Array(t);for(let y=0;y<t;y++)c[y]=n(y+1,y,void 0,p)}else if(Ue(t))if(t[Symbol.iterator])c=Array.from(t,(y,v)=>n(y,v,void 0,p));else{const y=Object.keys(t);c=new Array(y.length);for(let v=0,M=y.length;v<M;v++){const k=y[v];c[v]=n(t[k],k,v,p)}}else c=[];return c}const Wu=t=>t?Lf(t)?wl(t):Wu(t.parent):null,Po=Li(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Wu(t.parent),$root:t=>Wu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>rf(t),$forceUpdate:t=>t.f||(t.f=()=>{Ph(t.update)}),$nextTick:t=>t.n||(t.n=yl.bind(t.proxy)),$watch:t=>T0.bind(t)}),Au=(t,n)=>t!==Ne&&!t.__isScriptSetup&&Se(t,n),c0={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:o,setupState:l,data:c,props:p,accessCache:f,type:y,appContext:v}=t;let M;if(n[0]!=="$"){const z=f[n];if(z!==void 0)switch(z){case 1:return l[n];case 2:return c[n];case 4:return o[n];case 3:return p[n]}else{if(Au(l,n))return f[n]=1,l[n];if(c!==Ne&&Se(c,n))return f[n]=2,c[n];if((M=t.propsOptions[0])&&Se(M,n))return f[n]=3,p[n];if(o!==Ne&&Se(o,n))return f[n]=4,o[n];Ju&&(f[n]=0)}}const k=Po[n];let E,O;if(k)return n==="$attrs"&&bi(t.attrs,"get",""),k(t);if((E=y.__cssModules)&&(E=E[n]))return E;if(o!==Ne&&Se(o,n))return f[n]=4,o[n];if(O=v.config.globalProperties,Se(O,n))return O[n]},set({_:t},n,o){const{data:l,setupState:c,ctx:p}=t;return Au(c,n)?(c[n]=o,!0):l!==Ne&&Se(l,n)?(l[n]=o,!0):Se(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(p[n]=o,!0)},has({_:{data:t,setupState:n,accessCache:o,ctx:l,appContext:c,propsOptions:p}},f){let y;return!!o[f]||t!==Ne&&Se(t,f)||Au(n,f)||(y=p[0])&&Se(y,f)||Se(l,f)||Se(Po,f)||Se(c.config.globalProperties,f)},defineProperty(t,n,o){return o.get!=null?t._.accessCache[n]=0:Se(o,"value")&&this.set(t,n,o.value,null),Reflect.defineProperty(t,n,o)}};function ic(t){return ee(t)?t.reduce((n,o)=>(n[o]=null,n),{}):t}let Ju=!0;function d0(t){const n=rf(t),o=t.proxy,l=t.ctx;Ju=!1,n.beforeCreate&&nc(n.beforeCreate,t,"bc");const{data:c,computed:p,methods:f,watch:y,provide:v,inject:M,created:k,beforeMount:E,mounted:O,beforeUpdate:z,updated:K,activated:q,deactivated:X,beforeDestroy:ht,beforeUnmount:gt,destroyed:pt,unmounted:wt,render:ut,renderTracked:Pt,renderTriggered:Et,errorCaptured:Ht,serverPrefetch:Ct,expose:Rt,inheritAttrs:Ot,components:ge,directives:$e,filters:De}=n;if(M&&f0(M,l,null),f)for(const $t in f){const At=f[$t];he(At)&&(l[$t]=At.bind(o))}if(c){const $t=c.call(o,o);Ue($t)&&(t.data=Kn($t))}if(Ju=!0,p)for(const $t in p){const At=p[$t],Ve=he(At)?At.bind(o,o):he(At.get)?At.get.bind(o,o):En,jt=!he(At)&&he(At.set)?At.set.bind(o):En,se=Te({get:Ve,set:jt});Object.defineProperty(l,$t,{enumerable:!0,configurable:!0,get:()=>se.value,set:Bt=>se.value=Bt})}if(y)for(const $t in y)nf(y[$t],l,o,$t);if(v){const $t=he(v)?v.call(o):v;Reflect.ownKeys($t).forEach(At=>{Ua(At,$t[At])})}k&&nc(k,t,"c");function ot($t,At){ee(At)?At.forEach(Ve=>$t(Ve.bind(o))):At&&$t(At.bind(o))}if(ot(Qm,E),ot(Ds,O),ot(t0,z),ot(e0,K),ot(Jm,q),ot(Ym,X),ot(o0,Ht),ot(s0,Pt),ot(r0,Et),ot(i0,gt),ot(Sh,wt),ot(n0,Ct),ee(Rt))if(Rt.length){const $t=t.exposed||(t.exposed={});Rt.forEach(At=>{Object.defineProperty($t,At,{get:()=>o[At],set:Ve=>o[At]=Ve})})}else t.exposed||(t.exposed={});ut&&t.render===En&&(t.render=ut),Ot!=null&&(t.inheritAttrs=Ot),ge&&(t.components=ge),$e&&(t.directives=$e),Ct&&Qd(t)}function f0(t,n,o=En){ee(t)&&(t=Yu(t));for(const l in t){const c=t[l];let p;Ue(c)?"default"in c?p=en(c.from||l,c.default,!0):p=en(c.from||l):p=en(c),Ye(p)?Object.defineProperty(n,l,{enumerable:!0,configurable:!0,get:()=>p.value,set:f=>p.value=f}):n[l]=p}}function nc(t,n,o){Bn(ee(t)?t.map(l=>l.bind(n.proxy)):t.bind(n.proxy),n,o)}function nf(t,n,o,l){let c=l.includes(".")?yf(o,l):()=>o[l];if(ti(t)){const p=n[t];he(p)&&_r(c,p)}else if(he(t))_r(c,t.bind(o));else if(Ue(t))if(ee(t))t.forEach(p=>nf(p,n,o,l));else{const p=he(t.handler)?t.handler.bind(o):n[t.handler];he(p)&&_r(c,p,t)}}function rf(t){const n=t.type,{mixins:o,extends:l}=n,{mixins:c,optionsCache:p,config:{optionMergeStrategies:f}}=t.appContext,y=p.get(n);let v;return y?v=y:!c.length&&!o&&!l?v=n:(v={},c.length&&c.forEach(M=>nl(v,M,f,!0)),nl(v,n,f)),Ue(n)&&p.set(n,v),v}function nl(t,n,o,l=!1){const{mixins:c,extends:p}=n;p&&nl(t,p,o,!0),c&&c.forEach(f=>nl(t,f,o,!0));for(const f in n)if(!(l&&f==="expose")){const y=p0[f]||o&&o[f];t[f]=y?y(t[f],n[f]):n[f]}return t}const p0={data:rc,props:sc,emits:sc,methods:xo,computed:xo,beforeCreate:Bi,created:Bi,beforeMount:Bi,mounted:Bi,beforeUpdate:Bi,updated:Bi,beforeDestroy:Bi,beforeUnmount:Bi,destroyed:Bi,unmounted:Bi,activated:Bi,deactivated:Bi,errorCaptured:Bi,serverPrefetch:Bi,components:xo,directives:xo,watch:g0,provide:rc,inject:m0};function rc(t,n){return n?t?function(){return Li(he(t)?t.call(this,this):t,he(n)?n.call(this,this):n)}:n:t}function m0(t,n){return xo(Yu(t),Yu(n))}function Yu(t){if(ee(t)){const n={};for(let o=0;o<t.length;o++)n[t[o]]=t[o];return n}return t}function Bi(t,n){return t?[...new Set([].concat(t,n))]:n}function xo(t,n){return t?Li(Object.create(null),t,n):n}function sc(t,n){return t?ee(t)&&ee(n)?[...new Set([...t,...n])]:Li(Object.create(null),ic(t),ic(n??{})):n}function g0(t,n){if(!t)return n;if(!n)return t;const o=Li(Object.create(null),t);for(const l in n)o[l]=Bi(t[l],n[l]);return o}function sf(){return{app:null,config:{isNativeTag:nm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _0=0;function y0(t,n){return function(l,c=null){he(l)||(l=Li({},l)),c!=null&&!Ue(c)&&(c=null);const p=sf(),f=new WeakSet,y=[];let v=!1;const M=p.app={_uid:_0++,_component:l,_props:c,_container:null,_context:p,_instance:null,version:Q0,get config(){return p.config},set config(k){},use(k,...E){return f.has(k)||(k&&he(k.install)?(f.add(k),k.install(M,...E)):he(k)&&(f.add(k),k(M,...E))),M},mixin(k){return p.mixins.includes(k)||p.mixins.push(k),M},component(k,E){return E?(p.components[k]=E,M):p.components[k]},directive(k,E){return E?(p.directives[k]=E,M):p.directives[k]},mount(k,E,O){if(!v){const z=M._ceVNode||si(l,c);return z.appContext=p,O===!0?O="svg":O===!1&&(O=void 0),t(z,k,O),v=!0,M._container=k,k.__vue_app__=M,wl(z.component)}},onUnmount(k){y.push(k)},unmount(){v&&(Bn(y,M._instance,16),t(null,M._container),delete M._container.__vue_app__)},provide(k,E){return p.provides[k]=E,M},runWithContext(k){const E=Ur;Ur=M;try{return k()}finally{Ur=E}}};return M}}let Ur=null;function Ua(t,n){if(pi){let o=pi.provides;const l=pi.parent&&pi.parent.provides;l===o&&(o=pi.provides=Object.create(l)),o[t]=n}}function en(t,n,o=!1){const l=pi||Fi;if(l||Ur){const c=Ur?Ur._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(c&&t in c)return c[t];if(arguments.length>1)return o&&he(n)?n.call(l&&l.proxy):n}}function v0(){return!!(pi||Fi||Ur)}const of={},af=()=>Object.create(of),lf=t=>Object.getPrototypeOf(t)===of;function b0(t,n,o,l=!1){const c={},p=af();t.propsDefaults=Object.create(null),uf(t,n,c,p);for(const f in t.propsOptions[0])f in c||(c[f]=void 0);o?t.props=l?c:Vd(c):t.type.props?t.props=c:t.props=p,t.attrs=p}function x0(t,n,o,l){const{props:c,attrs:p,vnode:{patchFlag:f}}=t,y=xe(c),[v]=t.propsOptions;let M=!1;if((l||f>0)&&!(f&16)){if(f&8){const k=t.vnode.dynamicProps;for(let E=0;E<k.length;E++){let O=k[E];if(bl(t.emitsOptions,O))continue;const z=n[O];if(v)if(Se(p,O))z!==p[O]&&(p[O]=z,M=!0);else{const K=nn(O);c[K]=Xu(v,y,K,z,t,!1)}else z!==p[O]&&(p[O]=z,M=!0)}}}else{uf(t,n,c,p)&&(M=!0);let k;for(const E in y)(!n||!Se(n,E)&&((k=Zr(E))===E||!Se(n,k)))&&(v?o&&(o[E]!==void 0||o[k]!==void 0)&&(c[E]=Xu(v,y,E,void 0,t,!0)):delete c[E]);if(p!==y)for(const E in p)(!n||!Se(n,E))&&(delete p[E],M=!0)}M&&Vn(t.attrs,"set","")}function uf(t,n,o,l){const[c,p]=t.propsOptions;let f=!1,y;if(n)for(let v in n){if(Lo(v))continue;const M=n[v];let k;c&&Se(c,k=nn(v))?!p||!p.includes(k)?o[k]=M:(y||(y={}))[k]=M:bl(t.emitsOptions,v)||(!(v in l)||M!==l[v])&&(l[v]=M,f=!0)}if(p){const v=xe(o),M=y||Ne;for(let k=0;k<p.length;k++){const E=p[k];o[E]=Xu(c,v,E,M[E],t,!Se(M,E))}}return f}function Xu(t,n,o,l,c,p){const f=t[o];if(f!=null){const y=Se(f,"default");if(y&&l===void 0){const v=f.default;if(f.type!==Function&&!f.skipFactory&&he(v)){const{propsDefaults:M}=c;if(o in M)l=M[o];else{const k=Ko(c);l=M[o]=v.call(null,n),k()}}else l=v;c.ce&&c.ce._setProp(o,l)}f[0]&&(p&&!y?l=!1:f[1]&&(l===""||l===Zr(o))&&(l=!0))}return l}const w0=new WeakMap;function hf(t,n,o=!1){const l=o?w0:n.propsCache,c=l.get(t);if(c)return c;const p=t.props,f={},y=[];let v=!1;if(!he(t)){const k=E=>{v=!0;const[O,z]=hf(E,n,!0);Li(f,O),z&&y.push(...z)};!o&&n.mixins.length&&n.mixins.forEach(k),t.extends&&k(t.extends),t.mixins&&t.mixins.forEach(k)}if(!p&&!v)return Ue(t)&&l.set(t,ks),ks;if(ee(p))for(let k=0;k<p.length;k++){const E=nn(p[k]);oc(E)&&(f[E]=Ne)}else if(p)for(const k in p){const E=nn(k);if(oc(E)){const O=p[k],z=f[E]=ee(O)||he(O)?{type:O}:Li({},O),K=z.type;let q=!1,X=!0;if(ee(K))for(let ht=0;ht<K.length;++ht){const gt=K[ht],pt=he(gt)&&gt.name;if(pt==="Boolean"){q=!0;break}else pt==="String"&&(X=!1)}else q=he(K)&&K.name==="Boolean";z[0]=q,z[1]=X,(q||Se(z,"default"))&&y.push(E)}}const M=[f,y];return Ue(t)&&l.set(t,M),M}function oc(t){return t[0]!=="$"&&!Lo(t)}const cf=t=>t[0]==="_"||t==="$stable",Ah=t=>ee(t)?t.map(kn):[kn(t)],L0=(t,n,o)=>{if(n._n)return n;const l=Eo((...c)=>Ah(n(...c)),o);return l._c=!1,l},df=(t,n,o)=>{const l=t._ctx;for(const c in t){if(cf(c))continue;const p=t[c];if(he(p))n[c]=L0(c,p,l);else if(p!=null){const f=Ah(p);n[c]=()=>f}}},ff=(t,n)=>{const o=Ah(n);t.slots.default=()=>o},pf=(t,n,o)=>{for(const l in n)(o||l!=="_")&&(t[l]=n[l])},C0=(t,n,o)=>{const l=t.slots=af();if(t.vnode.shapeFlag&32){const c=n._;c?(pf(l,n,o),o&&Ld(l,"_",c,!0)):df(n,l)}else n&&ff(t,n)},k0=(t,n,o)=>{const{vnode:l,slots:c}=t;let p=!0,f=Ne;if(l.shapeFlag&32){const y=n._;y?o&&y===1?p=!1:pf(c,n,o):(p=!n.$stable,df(n,c)),f=n}else n&&(ff(t,n),f={default:1});if(p)for(const y in c)!cf(y)&&f[y]==null&&delete c[y]},Gi=z0;function E0(t){return M0(t)}function M0(t,n){const o=pl();o.__VUE__=!0;const{insert:l,remove:c,patchProp:p,createElement:f,createText:y,createComment:v,setText:M,setElementText:k,parentNode:E,nextSibling:O,setScopeId:z=En,insertStaticContent:K}=t,q=(j,G,Q,mt=null,yt=null,ft=null,Mt=void 0,St=null,kt=!!G.dynamicChildren)=>{if(j===G)return;j&&!_o(j,G)&&(mt=dt(j),Bt(j,yt,ft,!0),j=null),G.patchFlag===-2&&(kt=!1,G.dynamicChildren=null);const{type:xt,ref:Wt,shapeFlag:Ft}=G;switch(xt){case xl:X(j,G,Q,mt);break;case Vr:ht(j,G,Q,mt);break;case Ga:j==null&&gt(G,Q,mt,Mt);break;case ri:ge(j,G,Q,mt,yt,ft,Mt,St,kt);break;default:Ft&1?ut(j,G,Q,mt,yt,ft,Mt,St,kt):Ft&6?$e(j,G,Q,mt,yt,ft,Mt,St,kt):(Ft&64||Ft&128)&&xt.process(j,G,Q,mt,yt,ft,Mt,St,kt,Ut)}Wt!=null&&yt&&il(Wt,j&&j.ref,ft,G||j,!G)},X=(j,G,Q,mt)=>{if(j==null)l(G.el=y(G.children),Q,mt);else{const yt=G.el=j.el;G.children!==j.children&&M(yt,G.children)}},ht=(j,G,Q,mt)=>{j==null?l(G.el=v(G.children||""),Q,mt):G.el=j.el},gt=(j,G,Q,mt)=>{[j.el,j.anchor]=K(j.children,G,Q,mt,j.el,j.anchor)},pt=({el:j,anchor:G},Q,mt)=>{let yt;for(;j&&j!==G;)yt=O(j),l(j,Q,mt),j=yt;l(G,Q,mt)},wt=({el:j,anchor:G})=>{let Q;for(;j&&j!==G;)Q=O(j),c(j),j=Q;c(G)},ut=(j,G,Q,mt,yt,ft,Mt,St,kt)=>{G.type==="svg"?Mt="svg":G.type==="math"&&(Mt="mathml"),j==null?Pt(G,Q,mt,yt,ft,Mt,St,kt):Ct(j,G,yt,ft,Mt,St,kt)},Pt=(j,G,Q,mt,yt,ft,Mt,St)=>{let kt,xt;const{props:Wt,shapeFlag:Ft,transition:Yt,dirs:ne}=j;if(kt=j.el=f(j.type,ft,Wt&&Wt.is,Wt),Ft&8?k(kt,j.children):Ft&16&&Ht(j.children,kt,null,mt,yt,Tu(j,ft),Mt,St),ne&&Or(j,null,mt,"created"),Et(kt,j,j.scopeId,Mt,mt),Wt){for(const Me in Wt)Me!=="value"&&!Lo(Me)&&p(kt,Me,null,Wt[Me],ft,mt);"value"in Wt&&p(kt,"value",null,Wt.value,ft),(xt=Wt.onVnodeBeforeMount)&&wn(xt,mt,j)}ne&&Or(j,null,mt,"beforeMount");const pe=P0(yt,Yt);pe&&Yt.beforeEnter(kt),l(kt,G,Q),((xt=Wt&&Wt.onVnodeMounted)||pe||ne)&&Gi(()=>{xt&&wn(xt,mt,j),pe&&Yt.enter(kt),ne&&Or(j,null,mt,"mounted")},yt)},Et=(j,G,Q,mt,yt)=>{if(Q&&z(j,Q),mt)for(let ft=0;ft<mt.length;ft++)z(j,mt[ft]);if(yt){let ft=yt.subTree;if(G===ft||bf(ft.type)&&(ft.ssContent===G||ft.ssFallback===G)){const Mt=yt.vnode;Et(j,Mt,Mt.scopeId,Mt.slotScopeIds,yt.parent)}}},Ht=(j,G,Q,mt,yt,ft,Mt,St,kt=0)=>{for(let xt=kt;xt<j.length;xt++){const Wt=j[xt]=St?cr(j[xt]):kn(j[xt]);q(null,Wt,G,Q,mt,yt,ft,Mt,St)}},Ct=(j,G,Q,mt,yt,ft,Mt)=>{const St=G.el=j.el;let{patchFlag:kt,dynamicChildren:xt,dirs:Wt}=G;kt|=j.patchFlag&16;const Ft=j.props||Ne,Yt=G.props||Ne;let ne;if(Q&&Ir(Q,!1),(ne=Yt.onVnodeBeforeUpdate)&&wn(ne,Q,G,j),Wt&&Or(G,j,Q,"beforeUpdate"),Q&&Ir(Q,!0),(Ft.innerHTML&&Yt.innerHTML==null||Ft.textContent&&Yt.textContent==null)&&k(St,""),xt?Rt(j.dynamicChildren,xt,St,Q,mt,Tu(G,yt),ft):Mt||At(j,G,St,null,Q,mt,Tu(G,yt),ft,!1),kt>0){if(kt&16)Ot(St,Ft,Yt,Q,yt);else if(kt&2&&Ft.class!==Yt.class&&p(St,"class",null,Yt.class,yt),kt&4&&p(St,"style",Ft.style,Yt.style,yt),kt&8){const pe=G.dynamicProps;for(let Me=0;Me<pe.length;Me++){const we=pe[Me],oi=Ft[we],Xe=Yt[we];(Xe!==oi||we==="value")&&p(St,we,oi,Xe,yt,Q)}}kt&1&&j.children!==G.children&&k(St,G.children)}else!Mt&&xt==null&&Ot(St,Ft,Yt,Q,yt);((ne=Yt.onVnodeUpdated)||Wt)&&Gi(()=>{ne&&wn(ne,Q,G,j),Wt&&Or(G,j,Q,"updated")},mt)},Rt=(j,G,Q,mt,yt,ft,Mt)=>{for(let St=0;St<G.length;St++){const kt=j[St],xt=G[St],Wt=kt.el&&(kt.type===ri||!_o(kt,xt)||kt.shapeFlag&70)?E(kt.el):Q;q(kt,xt,Wt,null,mt,yt,ft,Mt,!0)}},Ot=(j,G,Q,mt,yt)=>{if(G!==Q){if(G!==Ne)for(const ft in G)!Lo(ft)&&!(ft in Q)&&p(j,ft,G[ft],null,yt,mt);for(const ft in Q){if(Lo(ft))continue;const Mt=Q[ft],St=G[ft];Mt!==St&&ft!=="value"&&p(j,ft,St,Mt,yt,mt)}"value"in Q&&p(j,"value",G.value,Q.value,yt)}},ge=(j,G,Q,mt,yt,ft,Mt,St,kt)=>{const xt=G.el=j?j.el:y(""),Wt=G.anchor=j?j.anchor:y("");let{patchFlag:Ft,dynamicChildren:Yt,slotScopeIds:ne}=G;ne&&(St=St?St.concat(ne):ne),j==null?(l(xt,Q,mt),l(Wt,Q,mt),Ht(G.children||[],Q,Wt,yt,ft,Mt,St,kt)):Ft>0&&Ft&64&&Yt&&j.dynamicChildren?(Rt(j.dynamicChildren,Yt,Q,yt,ft,Mt,St),(G.key!=null||yt&&G===yt.subTree)&&mf(j,G,!0)):At(j,G,Q,Wt,yt,ft,Mt,St,kt)},$e=(j,G,Q,mt,yt,ft,Mt,St,kt)=>{G.slotScopeIds=St,j==null?G.shapeFlag&512?yt.ctx.activate(G,Q,mt,Mt,kt):De(G,Q,mt,yt,ft,Mt,kt):_t(j,G,kt)},De=(j,G,Q,mt,yt,ft,Mt)=>{const St=j.component=Z0(j,mt,yt);if(tf(j)&&(St.ctx.renderer=Ut),q0(St,!1,Mt),St.asyncDep){if(yt&&yt.registerDep(St,ot,Mt),!j.el){const kt=St.subTree=si(Vr);ht(null,kt,G,Q)}}else ot(St,j,G,Q,yt,ft,Mt)},_t=(j,G,Q)=>{const mt=G.component=j.component;if(F0(j,G,Q))if(mt.asyncDep&&!mt.asyncResolved){$t(mt,G,Q);return}else mt.next=G,mt.update();else G.el=j.el,mt.vnode=G},ot=(j,G,Q,mt,yt,ft,Mt)=>{const St=()=>{if(j.isMounted){let{next:Ft,bu:Yt,u:ne,parent:pe,vnode:Me}=j;{const ei=gf(j);if(ei){Ft&&(Ft.el=Me.el,$t(j,Ft,Mt)),ei.asyncDep.then(()=>{j.isUnmounted||St()});return}}let we=Ft,oi;Ir(j,!1),Ft?(Ft.el=Me.el,$t(j,Ft,Mt)):Ft=Me,Yt&&ja(Yt),(oi=Ft.props&&Ft.props.onVnodeBeforeUpdate)&&wn(oi,pe,Ft,Me),Ir(j,!0);const Xe=lc(j),Ci=j.subTree;j.subTree=Xe,q(Ci,Xe,E(Ci.el),dt(Ci),j,yt,ft),Ft.el=Xe.el,we===null&&N0(j,Xe.el),ne&&Gi(ne,yt),(oi=Ft.props&&Ft.props.onVnodeUpdated)&&Gi(()=>wn(oi,pe,Ft,Me),yt)}else{let Ft;const{el:Yt,props:ne}=G,{bm:pe,m:Me,parent:we,root:oi,type:Xe}=j,Ci=Mo(G);Ir(j,!1),pe&&ja(pe),!Ci&&(Ft=ne&&ne.onVnodeBeforeMount)&&wn(Ft,we,G),Ir(j,!0);{oi.ce&&oi.ce._injectChildStyle(Xe);const ei=j.subTree=lc(j);q(null,ei,Q,mt,j,yt,ft),G.el=ei.el}if(Me&&Gi(Me,yt),!Ci&&(Ft=ne&&ne.onVnodeMounted)){const ei=G;Gi(()=>wn(Ft,we,ei),yt)}(G.shapeFlag&256||we&&Mo(we.vnode)&&we.vnode.shapeFlag&256)&&j.a&&Gi(j.a,yt),j.isMounted=!0,G=Q=mt=null}};j.scope.on();const kt=j.effect=new Sd(St);j.scope.off();const xt=j.update=kt.run.bind(kt),Wt=j.job=kt.runIfDirty.bind(kt);Wt.i=j,Wt.id=j.uid,kt.scheduler=()=>Ph(Wt),Ir(j,!0),xt()},$t=(j,G,Q)=>{G.component=j;const mt=j.vnode.props;j.vnode=G,j.next=null,x0(j,G.props,mt,Q),k0(j,G.children,Q),vr(),tc(j),br()},At=(j,G,Q,mt,yt,ft,Mt,St,kt=!1)=>{const xt=j&&j.children,Wt=j?j.shapeFlag:0,Ft=G.children,{patchFlag:Yt,shapeFlag:ne}=G;if(Yt>0){if(Yt&128){jt(xt,Ft,Q,mt,yt,ft,Mt,St,kt);return}else if(Yt&256){Ve(xt,Ft,Q,mt,yt,ft,Mt,St,kt);return}}ne&8?(Wt&16&&Kt(xt,yt,ft),Ft!==xt&&k(Q,Ft)):Wt&16?ne&16?jt(xt,Ft,Q,mt,yt,ft,Mt,St,kt):Kt(xt,yt,ft,!0):(Wt&8&&k(Q,""),ne&16&&Ht(Ft,Q,mt,yt,ft,Mt,St,kt))},Ve=(j,G,Q,mt,yt,ft,Mt,St,kt)=>{j=j||ks,G=G||ks;const xt=j.length,Wt=G.length,Ft=Math.min(xt,Wt);let Yt;for(Yt=0;Yt<Ft;Yt++){const ne=G[Yt]=kt?cr(G[Yt]):kn(G[Yt]);q(j[Yt],ne,Q,null,yt,ft,Mt,St,kt)}xt>Wt?Kt(j,yt,ft,!0,!1,Ft):Ht(G,Q,mt,yt,ft,Mt,St,kt,Ft)},jt=(j,G,Q,mt,yt,ft,Mt,St,kt)=>{let xt=0;const Wt=G.length;let Ft=j.length-1,Yt=Wt-1;for(;xt<=Ft&&xt<=Yt;){const ne=j[xt],pe=G[xt]=kt?cr(G[xt]):kn(G[xt]);if(_o(ne,pe))q(ne,pe,Q,null,yt,ft,Mt,St,kt);else break;xt++}for(;xt<=Ft&&xt<=Yt;){const ne=j[Ft],pe=G[Yt]=kt?cr(G[Yt]):kn(G[Yt]);if(_o(ne,pe))q(ne,pe,Q,null,yt,ft,Mt,St,kt);else break;Ft--,Yt--}if(xt>Ft){if(xt<=Yt){const ne=Yt+1,pe=ne<Wt?G[ne].el:mt;for(;xt<=Yt;)q(null,G[xt]=kt?cr(G[xt]):kn(G[xt]),Q,pe,yt,ft,Mt,St,kt),xt++}}else if(xt>Yt)for(;xt<=Ft;)Bt(j[xt],yt,ft,!0),xt++;else{const ne=xt,pe=xt,Me=new Map;for(xt=pe;xt<=Yt;xt++){const Ke=G[xt]=kt?cr(G[xt]):kn(G[xt]);Ke.key!=null&&Me.set(Ke.key,xt)}let we,oi=0;const Xe=Yt-pe+1;let Ci=!1,ei=0;const pn=new Array(Xe);for(xt=0;xt<Xe;xt++)pn[xt]=0;for(xt=ne;xt<=Ft;xt++){const Ke=j[xt];if(oi>=Xe){Bt(Ke,yt,ft,!0);continue}let ki;if(Ke.key!=null)ki=Me.get(Ke.key);else for(we=pe;we<=Yt;we++)if(pn[we-pe]===0&&_o(Ke,G[we])){ki=we;break}ki===void 0?Bt(Ke,yt,ft,!0):(pn[ki-pe]=xt+1,ki>=ei?ei=ki:Ci=!0,q(Ke,G[ki],Q,null,yt,ft,Mt,St,kt),oi++)}const Sn=Ci?B0(pn):ks;for(we=Sn.length-1,xt=Xe-1;xt>=0;xt--){const Ke=pe+xt,ki=G[Ke],Hi=Ke+1<Wt?G[Ke+1].el:mt;pn[xt]===0?q(null,ki,Q,Hi,yt,ft,Mt,St,kt):Ci&&(we<0||xt!==Sn[we]?se(ki,Q,Hi,2):we--)}}},se=(j,G,Q,mt,yt=null)=>{const{el:ft,type:Mt,transition:St,children:kt,shapeFlag:xt}=j;if(xt&6){se(j.component.subTree,G,Q,mt);return}if(xt&128){j.suspense.move(G,Q,mt);return}if(xt&64){Mt.move(j,G,Q,Ut);return}if(Mt===ri){l(ft,G,Q);for(let Ft=0;Ft<kt.length;Ft++)se(kt[Ft],G,Q,mt);l(j.anchor,G,Q);return}if(Mt===Ga){pt(j,G,Q);return}if(mt!==2&&xt&1&&St)if(mt===0)St.beforeEnter(ft),l(ft,G,Q),Gi(()=>St.enter(ft),yt);else{const{leave:Ft,delayLeave:Yt,afterLeave:ne}=St,pe=()=>l(ft,G,Q),Me=()=>{Ft(ft,()=>{pe(),ne&&ne()})};Yt?Yt(ft,pe,Me):Me()}else l(ft,G,Q)},Bt=(j,G,Q,mt=!1,yt=!1)=>{const{type:ft,props:Mt,ref:St,children:kt,dynamicChildren:xt,shapeFlag:Wt,patchFlag:Ft,dirs:Yt,cacheIndex:ne}=j;if(Ft===-2&&(yt=!1),St!=null&&il(St,null,Q,j,!0),ne!=null&&(G.renderCache[ne]=void 0),Wt&256){G.ctx.deactivate(j);return}const pe=Wt&1&&Yt,Me=!Mo(j);let we;if(Me&&(we=Mt&&Mt.onVnodeBeforeUnmount)&&wn(we,G,j),Wt&6)fe(j.component,Q,mt);else{if(Wt&128){j.suspense.unmount(Q,mt);return}pe&&Or(j,null,G,"beforeUnmount"),Wt&64?j.type.remove(j,G,Q,Ut,mt):xt&&!xt.hasOnce&&(ft!==ri||Ft>0&&Ft&64)?Kt(xt,G,Q,!1,!0):(ft===ri&&Ft&384||!yt&&Wt&16)&&Kt(kt,G,Q),mt&&Ee(j)}(Me&&(we=Mt&&Mt.onVnodeUnmounted)||pe)&&Gi(()=>{we&&wn(we,G,j),pe&&Or(j,null,G,"unmounted")},Q)},Ee=j=>{const{type:G,el:Q,anchor:mt,transition:yt}=j;if(G===ri){ve(Q,mt);return}if(G===Ga){wt(j);return}const ft=()=>{c(Q),yt&&!yt.persisted&&yt.afterLeave&&yt.afterLeave()};if(j.shapeFlag&1&&yt&&!yt.persisted){const{leave:Mt,delayLeave:St}=yt,kt=()=>Mt(Q,ft);St?St(j.el,ft,kt):kt()}else ft()},ve=(j,G)=>{let Q;for(;j!==G;)Q=O(j),c(j),j=Q;c(G)},fe=(j,G,Q)=>{const{bum:mt,scope:yt,job:ft,subTree:Mt,um:St,m:kt,a:xt}=j;ac(kt),ac(xt),mt&&ja(mt),yt.stop(),ft&&(ft.flags|=8,Bt(Mt,j,G,Q)),St&&Gi(St,G),Gi(()=>{j.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},Kt=(j,G,Q,mt=!1,yt=!1,ft=0)=>{for(let Mt=ft;Mt<j.length;Mt++)Bt(j[Mt],G,Q,mt,yt)},dt=j=>{if(j.shapeFlag&6)return dt(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const G=O(j.anchor||j.el),Q=G&&G[Km];return Q?O(Q):G};let Dt=!1;const Tt=(j,G,Q)=>{j==null?G._vnode&&Bt(G._vnode,null,null,!0):q(G._vnode||null,j,G,null,null,null,Q),G._vnode=j,Dt||(Dt=!0,tc(),Jd(),Dt=!1)},Ut={p:q,um:Bt,m:se,r:Ee,mt:De,mc:Ht,pc:At,pbc:Rt,n:dt,o:t};return{render:Tt,hydrate:void 0,createApp:y0(Tt)}}function Tu({type:t,props:n},o){return o==="svg"&&t==="foreignObject"||o==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:o}function Ir({effect:t,job:n},o){o?(t.flags|=32,n.flags|=4):(t.flags&=-33,n.flags&=-5)}function P0(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function mf(t,n,o=!1){const l=t.children,c=n.children;if(ee(l)&&ee(c))for(let p=0;p<l.length;p++){const f=l[p];let y=c[p];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=c[p]=cr(c[p]),y.el=f.el),!o&&y.patchFlag!==-2&&mf(f,y)),y.type===xl&&(y.el=f.el)}}function B0(t){const n=t.slice(),o=[0];let l,c,p,f,y;const v=t.length;for(l=0;l<v;l++){const M=t[l];if(M!==0){if(c=o[o.length-1],t[c]<M){n[l]=c,o.push(l);continue}for(p=0,f=o.length-1;p<f;)y=p+f>>1,t[o[y]]<M?p=y+1:f=y;M<t[o[p]]&&(p>0&&(n[l]=o[p-1]),o[p]=l)}}for(p=o.length,f=o[p-1];p-- >0;)o[p]=f,f=n[f];return o}function gf(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:gf(n)}function ac(t){if(t)for(let n=0;n<t.length;n++)t[n].flags|=8}const S0=Symbol.for("v-scx"),A0=()=>en(S0);function _r(t,n,o){return _f(t,n,o)}function _f(t,n,o=Ne){const{immediate:l,deep:c,flush:p,once:f}=o,y=Li({},o),v=n&&l||!n&&p!=="post";let M;if(No){if(p==="sync"){const z=A0();M=z.__watcherHandles||(z.__watcherHandles=[])}else if(!v){const z=()=>{};return z.stop=En,z.resume=En,z.pause=En,z}}const k=pi;y.call=(z,K,q)=>Bn(z,k,K,q);let E=!1;p==="post"?y.scheduler=z=>{Gi(z,k&&k.suspense)}:p!=="sync"&&(E=!0,y.scheduler=(z,K)=>{K?z():Ph(z)}),y.augmentJob=z=>{n&&(z.flags|=4),E&&(z.flags|=2,k&&(z.id=k.uid,z.i=k))};const O=Vm(t,n,y);return No&&(M?M.push(O):v&&O()),O}function T0(t,n,o){const l=this.proxy,c=ti(t)?t.includes(".")?yf(l,t):()=>l[t]:t.bind(l,l);let p;he(n)?p=n:(p=n.handler,o=n);const f=Ko(this),y=_f(c,p.bind(l),o);return f(),y}function yf(t,n){const o=n.split(".");return()=>{let l=t;for(let c=0;c<o.length&&l;c++)l=l[o[c]];return l}}const D0=(t,n)=>n==="modelValue"||n==="model-value"?t.modelModifiers:t[`${n}Modifiers`]||t[`${nn(n)}Modifiers`]||t[`${Zr(n)}Modifiers`];function R0(t,n,...o){if(t.isUnmounted)return;const l=t.vnode.props||Ne;let c=o;const p=n.startsWith("update:"),f=p&&D0(l,n.slice(7));f&&(f.trim&&(c=o.map(k=>ti(k)?k.trim():k)),f.number&&(c=o.map(Ya)));let y,v=l[y=Eu(n)]||l[y=Eu(nn(n))];!v&&p&&(v=l[y=Eu(Zr(n))]),v&&Bn(v,t,6,c);const M=l[y+"Once"];if(M){if(!t.emitted)t.emitted={};else if(t.emitted[y])return;t.emitted[y]=!0,Bn(M,t,6,c)}}function vf(t,n,o=!1){const l=n.emitsCache,c=l.get(t);if(c!==void 0)return c;const p=t.emits;let f={},y=!1;if(!he(t)){const v=M=>{const k=vf(M,n,!0);k&&(y=!0,Li(f,k))};!o&&n.mixins.length&&n.mixins.forEach(v),t.extends&&v(t.extends),t.mixins&&t.mixins.forEach(v)}return!p&&!y?(Ue(t)&&l.set(t,null),null):(ee(p)?p.forEach(v=>f[v]=null):Li(f,p),Ue(t)&&l.set(t,f),f)}function bl(t,n){return!t||!cl(n)?!1:(n=n.slice(2).replace(/Once$/,""),Se(t,n[0].toLowerCase()+n.slice(1))||Se(t,Zr(n))||Se(t,n))}function lc(t){const{type:n,vnode:o,proxy:l,withProxy:c,propsOptions:[p],slots:f,attrs:y,emit:v,render:M,renderCache:k,props:E,data:O,setupState:z,ctx:K,inheritAttrs:q}=t,X=el(t);let ht,gt;try{if(o.shapeFlag&4){const wt=c||l,ut=wt;ht=kn(M.call(ut,wt,k,E,z,O,K)),gt=y}else{const wt=n;ht=kn(wt.length>1?wt(E,{attrs:y,slots:f,emit:v}):wt(E,null)),gt=n.props?y:O0(y)}}catch(wt){Bo.length=0,_l(wt,t,1),ht=si(Vr)}let pt=ht;if(gt&&q!==!1){const wt=Object.keys(gt),{shapeFlag:ut}=pt;wt.length&&ut&7&&(p&&wt.some(gh)&&(gt=I0(gt,p)),pt=Ps(pt,gt,!1,!0))}return o.dirs&&(pt=Ps(pt,null,!1,!0),pt.dirs=pt.dirs?pt.dirs.concat(o.dirs):o.dirs),o.transition&&Bh(pt,o.transition),ht=pt,el(X),ht}const O0=t=>{let n;for(const o in t)(o==="class"||o==="style"||cl(o))&&((n||(n={}))[o]=t[o]);return n},I0=(t,n)=>{const o={};for(const l in t)(!gh(l)||!(l.slice(9)in n))&&(o[l]=t[l]);return o};function F0(t,n,o){const{props:l,children:c,component:p}=t,{props:f,children:y,patchFlag:v}=n,M=p.emitsOptions;if(n.dirs||n.transition)return!0;if(o&&v>=0){if(v&1024)return!0;if(v&16)return l?uc(l,f,M):!!f;if(v&8){const k=n.dynamicProps;for(let E=0;E<k.length;E++){const O=k[E];if(f[O]!==l[O]&&!bl(M,O))return!0}}}else return(c||y)&&(!y||!y.$stable)?!0:l===f?!1:l?f?uc(l,f,M):!0:!!f;return!1}function uc(t,n,o){const l=Object.keys(n);if(l.length!==Object.keys(t).length)return!0;for(let c=0;c<l.length;c++){const p=l[c];if(n[p]!==t[p]&&!bl(o,p))return!0}return!1}function N0({vnode:t,parent:n},o){for(;n;){const l=n.subTree;if(l.suspense&&l.suspense.activeBranch===t&&(l.el=t.el),l===t)(t=n.vnode).el=o,n=n.parent;else break}}const bf=t=>t.__isSuspense;function z0(t,n){n&&n.pendingBranch?ee(t)?n.effects.push(...t):n.effects.push(t):qm(t)}const ri=Symbol.for("v-fgt"),xl=Symbol.for("v-txt"),Vr=Symbol.for("v-cmt"),Ga=Symbol.for("v-stc"),Bo=[];let $i=null;function qt(t=!1){Bo.push($i=t?null:[])}function j0(){Bo.pop(),$i=Bo[Bo.length-1]||null}let Io=1;function hc(t,n=!1){Io+=t,t<0&&$i&&n&&($i.hasOnce=!0)}function xf(t){return t.dynamicChildren=Io>0?$i||ks:null,j0(),Io>0&&$i&&$i.push(t),t}function Qt(t,n,o,l,c,p){return xf(F(t,n,o,l,c,p,!0))}function Fo(t,n,o,l,c){return xf(si(t,n,o,l,c,!0))}function rl(t){return t?t.__v_isVNode===!0:!1}function _o(t,n){return t.type===n.type&&t.key===n.key}const wf=({key:t})=>t??null,$a=({ref:t,ref_key:n,ref_for:o})=>(typeof t=="number"&&(t=""+t),t!=null?ti(t)||Ye(t)||he(t)?{i:Fi,r:t,k:n,f:!!o}:t:null);function F(t,n=null,o=null,l=0,c=null,p=t===ri?0:1,f=!1,y=!1){const v={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&wf(n),ref:n&&$a(n),scopeId:Xd,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:l,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:Fi};return y?(Th(v,o),p&128&&t.normalize(v)):o&&(v.shapeFlag|=ti(o)?8:16),Io>0&&!f&&$i&&(v.patchFlag>0||p&6)&&v.patchFlag!==32&&$i.push(v),v}const si=U0;function U0(t,n=null,o=null,l=0,c=null,p=!1){if((!t||t===u0)&&(t=Vr),rl(t)){const y=Ps(t,n,!0);return o&&Th(y,o),Io>0&&!p&&$i&&(y.shapeFlag&6?$i[$i.indexOf(t)]=y:$i.push(y)),y.patchFlag=-2,y}if(X0(t)&&(t=t.__vccOpts),n){n=G0(n);let{class:y,style:v}=n;y&&!ti(y)&&(n.class=yr(y)),Ue(v)&&(Eh(v)&&!ee(v)&&(v=Li({},v)),n.style=ml(v))}const f=ti(t)?1:bf(t)?128:Wm(t)?64:Ue(t)?4:he(t)?2:0;return F(t,n,o,l,c,f,p,!0)}function G0(t){return t?Eh(t)||lf(t)?Li({},t):t:null}function Ps(t,n,o=!1,l=!1){const{props:c,ref:p,patchFlag:f,children:y,transition:v}=t,M=n?$0(c||{},n):c,k={__v_isVNode:!0,__v_skip:!0,type:t.type,props:M,key:M&&wf(M),ref:n&&n.ref?o&&p?ee(p)?p.concat($a(n)):[p,$a(n)]:$a(n):p,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:y,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==ri?f===-1?16:f|16:f,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:v,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ps(t.ssContent),ssFallback:t.ssFallback&&Ps(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return v&&l&&Bh(k,v.clone(k)),k}function hn(t=" ",n=0){return si(xl,null,t,n)}function w3(t,n){const o=si(Ga,null,t);return o.staticCount=n,o}function Ae(t="",n=!1){return n?(qt(),Fo(Vr,null,t)):si(Vr,null,t)}function kn(t){return t==null||typeof t=="boolean"?si(Vr):ee(t)?si(ri,null,t.slice()):rl(t)?cr(t):si(xl,null,String(t))}function cr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ps(t)}function Th(t,n){let o=0;const{shapeFlag:l}=t;if(n==null)n=null;else if(ee(n))o=16;else if(typeof n=="object")if(l&65){const c=n.default;c&&(c._c&&(c._d=!1),Th(t,c()),c._c&&(c._d=!0));return}else{o=32;const c=n._;!c&&!lf(n)?n._ctx=Fi:c===3&&Fi&&(Fi.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else he(n)?(n={default:n,_ctx:Fi},o=32):(n=String(n),l&64?(o=16,n=[hn(n)]):o=8);t.children=n,t.shapeFlag|=o}function $0(...t){const n={};for(let o=0;o<t.length;o++){const l=t[o];for(const c in l)if(c==="class")n.class!==l.class&&(n.class=yr([n.class,l.class]));else if(c==="style")n.style=ml([n.style,l.style]);else if(cl(c)){const p=n[c],f=l[c];f&&p!==f&&!(ee(p)&&p.includes(f))&&(n[c]=p?[].concat(p,f):f)}else c!==""&&(n[c]=l[c])}return n}function wn(t,n,o,l=null){Bn(t,n,7,[o,l])}const V0=sf();let H0=0;function Z0(t,n,o){const l=t.type,c=(n?n.appContext:t.appContext)||V0,p={uid:H0++,vnode:t,type:l,parent:n,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Md(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(c.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hf(l,c),emitsOptions:vf(l,c),emit:null,emitted:null,propsDefaults:Ne,inheritAttrs:l.inheritAttrs,ctx:Ne,data:Ne,props:Ne,attrs:Ne,slots:Ne,refs:Ne,setupState:Ne,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=n?n.root:p,p.emit=R0.bind(null,p),t.ce&&t.ce(p),p}let pi=null,sl,Qu;{const t=pl(),n=(o,l)=>{let c;return(c=t[o])||(c=t[o]=[]),c.push(l),p=>{c.length>1?c.forEach(f=>f(p)):c[0](p)}};sl=n("__VUE_INSTANCE_SETTERS__",o=>pi=o),Qu=n("__VUE_SSR_SETTERS__",o=>No=o)}const Ko=t=>{const n=pi;return sl(t),t.scope.on(),()=>{t.scope.off(),sl(n)}},cc=()=>{pi&&pi.scope.off(),sl(null)};function Lf(t){return t.vnode.shapeFlag&4}let No=!1;function q0(t,n=!1,o=!1){n&&Qu(n);const{props:l,children:c}=t.vnode,p=Lf(t);b0(t,l,p,n),C0(t,c,o);const f=p?K0(t,n):void 0;return n&&Qu(!1),f}function K0(t,n){const o=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,c0);const{setup:l}=o;if(l){vr();const c=t.setupContext=l.length>1?J0(t):null,p=Ko(t),f=qo(l,t,0,[t.props,c]),y=bd(f);if(br(),p(),(y||t.sp)&&!Mo(t)&&Qd(t),y){if(f.then(cc,cc),n)return f.then(v=>{dc(t,v)}).catch(v=>{_l(v,t,0)});t.asyncDep=f}else dc(t,f)}else Cf(t)}function dc(t,n,o){he(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:Ue(n)&&(t.setupState=qd(n)),Cf(t)}function Cf(t,n,o){const l=t.type;t.render||(t.render=l.render||En);{const c=Ko(t);vr();try{d0(t)}finally{br(),c()}}}const W0={get(t,n){return bi(t,"get",""),t[n]}};function J0(t){const n=o=>{t.exposed=o||{}};return{attrs:new Proxy(t.attrs,W0),slots:t.slots,emit:t.emit,expose:n}}function wl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(qd(Mh(t.exposed)),{get(n,o){if(o in n)return n[o];if(o in Po)return Po[o](t)},has(n,o){return o in n||o in Po}})):t.proxy}function Y0(t,n=!0){return he(t)?t.displayName||t.name:t.name||n&&t.__name}function X0(t){return he(t)&&"__vccOpts"in t}const Te=(t,n)=>Gm(t,n,No);function kf(t,n,o){const l=arguments.length;return l===2?Ue(n)&&!ee(n)?rl(n)?si(t,null,[n]):si(t,n):si(t,null,n):(l>3?o=Array.prototype.slice.call(arguments,2):l===3&&rl(o)&&(o=[o]),si(t,n,o))}const Q0="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let th;const fc=typeof window<"u"&&window.trustedTypes;if(fc)try{th=fc.createPolicy("vue",{createHTML:t=>t})}catch{}const Ef=th?t=>th.createHTML(t):t=>t,tg="http://www.w3.org/2000/svg",eg="http://www.w3.org/1998/Math/MathML",$n=typeof document<"u"?document:null,pc=$n&&$n.createElement("template"),ig={insert:(t,n,o)=>{n.insertBefore(t,o||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,o,l)=>{const c=n==="svg"?$n.createElementNS(tg,t):n==="mathml"?$n.createElementNS(eg,t):o?$n.createElement(t,{is:o}):$n.createElement(t);return t==="select"&&l&&l.multiple!=null&&c.setAttribute("multiple",l.multiple),c},createText:t=>$n.createTextNode(t),createComment:t=>$n.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>$n.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,o,l,c,p){const f=o?o.previousSibling:n.lastChild;if(c&&(c===p||c.nextSibling))for(;n.insertBefore(c.cloneNode(!0),o),!(c===p||!(c=c.nextSibling)););else{pc.innerHTML=Ef(l==="svg"?`<svg>${t}</svg>`:l==="mathml"?`<math>${t}</math>`:t);const y=pc.content;if(l==="svg"||l==="mathml"){const v=y.firstChild;for(;v.firstChild;)y.appendChild(v.firstChild);y.removeChild(v)}n.insertBefore(y,o)}return[f?f.nextSibling:n.firstChild,o?o.previousSibling:n.lastChild]}},ng=Symbol("_vtc");function rg(t,n,o){const l=t[ng];l&&(n=(n?[n,...l]:[...l]).join(" ")),n==null?t.removeAttribute("class"):o?t.setAttribute("class",n):t.className=n}const mc=Symbol("_vod"),sg=Symbol("_vsh"),og=Symbol(""),ag=/(^|;)\s*display\s*:/;function lg(t,n,o){const l=t.style,c=ti(o);let p=!1;if(o&&!c){if(n)if(ti(n))for(const f of n.split(";")){const y=f.slice(0,f.indexOf(":")).trim();o[y]==null&&Va(l,y,"")}else for(const f in n)o[f]==null&&Va(l,f,"");for(const f in o)f==="display"&&(p=!0),Va(l,f,o[f])}else if(c){if(n!==o){const f=l[og];f&&(o+=";"+f),l.cssText=o,p=ag.test(o)}}else n&&t.removeAttribute("style");mc in t&&(t[mc]=p?l.display:"",t[sg]&&(l.display="none"))}const gc=/\s*!important$/;function Va(t,n,o){if(ee(o))o.forEach(l=>Va(t,n,l));else if(o==null&&(o=""),n.startsWith("--"))t.setProperty(n,o);else{const l=ug(t,n);gc.test(o)?t.setProperty(Zr(l),o.replace(gc,""),"important"):t[l]=o}}const _c=["Webkit","Moz","ms"],Du={};function ug(t,n){const o=Du[n];if(o)return o;let l=nn(n);if(l!=="filter"&&l in t)return Du[n]=l;l=fl(l);for(let c=0;c<_c.length;c++){const p=_c[c]+l;if(p in t)return Du[n]=p}return n}const yc="http://www.w3.org/1999/xlink";function vc(t,n,o,l,c,p=fm(n)){l&&n.startsWith("xlink:")?o==null?t.removeAttributeNS(yc,n.slice(6,n.length)):t.setAttributeNS(yc,n,o):o==null||p&&!Cd(o)?t.removeAttribute(n):t.setAttribute(n,p?"":Pn(o)?String(o):o)}function bc(t,n,o,l,c){if(n==="innerHTML"||n==="textContent"){o!=null&&(t[n]=n==="innerHTML"?Ef(o):o);return}const p=t.tagName;if(n==="value"&&p!=="PROGRESS"&&!p.includes("-")){const y=p==="OPTION"?t.getAttribute("value")||"":t.value,v=o==null?t.type==="checkbox"?"on":"":String(o);(y!==v||!("_value"in t))&&(t.value=v),o==null&&t.removeAttribute(n),t._value=o;return}let f=!1;if(o===""||o==null){const y=typeof t[n];y==="boolean"?o=Cd(o):o==null&&y==="string"?(o="",f=!0):y==="number"&&(o=0,f=!0)}try{t[n]=o}catch{}f&&t.removeAttribute(c||n)}function fr(t,n,o,l){t.addEventListener(n,o,l)}function hg(t,n,o,l){t.removeEventListener(n,o,l)}const xc=Symbol("_vei");function cg(t,n,o,l,c=null){const p=t[xc]||(t[xc]={}),f=p[n];if(l&&f)f.value=l;else{const[y,v]=dg(n);if(l){const M=p[n]=mg(l,c);fr(t,y,M,v)}else f&&(hg(t,y,f,v),p[n]=void 0)}}const wc=/(?:Once|Passive|Capture)$/;function dg(t){let n;if(wc.test(t)){n={};let l;for(;l=t.match(wc);)t=t.slice(0,t.length-l[0].length),n[l[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Zr(t.slice(2)),n]}let Ru=0;const fg=Promise.resolve(),pg=()=>Ru||(fg.then(()=>Ru=0),Ru=Date.now());function mg(t,n){const o=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=o.attached)return;Bn(gg(l,o.value),n,5,[l])};return o.value=t,o.attached=pg(),o}function gg(t,n){if(ee(n)){const o=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{o.call(t),t._stopped=!0},n.map(l=>c=>!c._stopped&&l&&l(c))}else return n}const Lc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,_g=(t,n,o,l,c,p)=>{const f=c==="svg";n==="class"?rg(t,l,f):n==="style"?lg(t,o,l):cl(n)?gh(n)||cg(t,n,o,l,p):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):yg(t,n,l,f))?(bc(t,n,l),!t.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&vc(t,n,l,f,p,n!=="value")):t._isVueCE&&(/[A-Z]/.test(n)||!ti(l))?bc(t,nn(n),l,p,n):(n==="true-value"?t._trueValue=l:n==="false-value"&&(t._falseValue=l),vc(t,n,l,f))};function yg(t,n,o,l){if(l)return!!(n==="innerHTML"||n==="textContent"||n in t&&Lc(n)&&he(o));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const c=t.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return Lc(n)&&ti(o)?!1:n in t}const Bs=t=>{const n=t.props["onUpdate:modelValue"]||!1;return ee(n)?o=>ja(n,o):n};function vg(t){t.target.composing=!0}function Cc(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const qn=Symbol("_assign"),Fe={created(t,{modifiers:{lazy:n,trim:o,number:l}},c){t[qn]=Bs(c);const p=l||c.props&&c.props.type==="number";fr(t,n?"change":"input",f=>{if(f.target.composing)return;let y=t.value;o&&(y=y.trim()),p&&(y=Ya(y)),t[qn](y)}),o&&fr(t,"change",()=>{t.value=t.value.trim()}),n||(fr(t,"compositionstart",vg),fr(t,"compositionend",Cc),fr(t,"change",Cc))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:o,modifiers:{lazy:l,trim:c,number:p}},f){if(t[qn]=Bs(f),t.composing)return;const y=(p||t.type==="number")&&!/^0\d/.test(t.value)?Ya(t.value):t.value,v=n??"";y!==v&&(document.activeElement===t&&t.type!=="range"&&(l&&n===o||c&&t.value.trim()===v)||(t.value=v))}},bg={deep:!0,created(t,n,o){t[qn]=Bs(o),fr(t,"change",()=>{const l=t._modelValue,c=jo(t),p=t.checked,f=t[qn];if(ee(l)){const y=vh(l,c),v=y!==-1;if(p&&!v)f(l.concat(c));else if(!p&&v){const M=[...l];M.splice(y,1),f(M)}}else if(Ts(l)){const y=new Set(l);p?y.add(c):y.delete(c),f(y)}else f(Mf(t,p))})},mounted:kc,beforeUpdate(t,n,o){t[qn]=Bs(o),kc(t,n,o)}};function kc(t,{value:n,oldValue:o},l){t._modelValue=n;let c;if(ee(n))c=vh(n,l.props.value)>-1;else if(Ts(n))c=n.has(l.props.value);else{if(n===o)return;c=Zo(n,Mf(t,!0))}t.checked!==c&&(t.checked=c)}const zo={deep:!0,created(t,{value:n,modifiers:{number:o}},l){const c=Ts(n);fr(t,"change",()=>{const p=Array.prototype.filter.call(t.options,f=>f.selected).map(f=>o?Ya(jo(f)):jo(f));t[qn](t.multiple?c?new Set(p):p:p[0]),t._assigning=!0,yl(()=>{t._assigning=!1})}),t[qn]=Bs(l)},mounted(t,{value:n}){Ec(t,n)},beforeUpdate(t,n,o){t[qn]=Bs(o)},updated(t,{value:n}){t._assigning||Ec(t,n)}};function Ec(t,n){const o=t.multiple,l=ee(n);if(!(o&&!l&&!Ts(n))){for(let c=0,p=t.options.length;c<p;c++){const f=t.options[c],y=jo(f);if(o)if(l){const v=typeof y;v==="string"||v==="number"?f.selected=n.some(M=>String(M)===String(y)):f.selected=vh(n,y)>-1}else f.selected=n.has(y);else if(Zo(jo(f),n)){t.selectedIndex!==c&&(t.selectedIndex=c);return}}!o&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function jo(t){return"_value"in t?t._value:t.value}function Mf(t,n){const o=n?"_trueValue":"_falseValue";return o in t?t[o]:n}const xg=["ctrl","shift","alt","meta"],wg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>xg.some(o=>t[`${o}Key`]&&!n.includes(o))},Dh=(t,n)=>{const o=t._withMods||(t._withMods={}),l=n.join(".");return o[l]||(o[l]=(c,...p)=>{for(let f=0;f<n.length;f++){const y=wg[n[f]];if(y&&y(c,n))return}return t(c,...p)})},Lg=Li({patchProp:_g},ig);let Mc;function Cg(){return Mc||(Mc=E0(Lg))}const kg=(...t)=>{const n=Cg().createApp(...t),{mount:o}=n;return n.mount=l=>{const c=Mg(l);if(!c)return;const p=n._component;!he(p)&&!p.render&&!p.template&&(p.template=c.innerHTML),c.nodeType===1&&(c.textContent="");const f=o(c,!1,Eg(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),f},n};function Eg(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Mg(t){return ti(t)?document.querySelector(t):t}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Pf;const Ll=t=>Pf=t,Bf=Symbol();function eh(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var So;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(So||(So={}));function Pg(){const t=Pd(!0),n=t.run(()=>ie({}));let o=[],l=[];const c=Mh({install(p){Ll(c),c._a=p,p.provide(Bf,c),p.config.globalProperties.$pinia=c,l.forEach(f=>o.push(f)),l=[]},use(p){return this._a?o.push(p):l.push(p),this},_p:o,_a:null,_e:t,_s:new Map,state:n});return c}const Sf=()=>{};function Pc(t,n,o,l=Sf){t.push(n);const c=()=>{const p=t.indexOf(n);p>-1&&(t.splice(p,1),l())};return!o&&Bd()&&mm(c),c}function ws(t,...n){t.slice().forEach(o=>{o(...n)})}const Bg=t=>t(),Bc=Symbol(),Ou=Symbol();function ih(t,n){t instanceof Map&&n instanceof Map?n.forEach((o,l)=>t.set(l,o)):t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const o in n){if(!n.hasOwnProperty(o))continue;const l=n[o],c=t[o];eh(c)&&eh(l)&&t.hasOwnProperty(o)&&!Ye(l)&&!gr(l)?t[o]=ih(c,l):t[o]=l}return t}const Sg=Symbol();function Ag(t){return!eh(t)||!t.hasOwnProperty(Sg)}const{assign:ur}=Object;function Tg(t){return!!(Ye(t)&&t.effect)}function Dg(t,n,o,l){const{state:c,actions:p,getters:f}=n,y=o.state.value[t];let v;function M(){y||(o.state.value[t]=c?c():{});const k=Nm(o.state.value[t]);return ur(k,p,Object.keys(f||{}).reduce((E,O)=>(E[O]=Mh(Te(()=>{Ll(o);const z=o._s.get(t);return f[O].call(z,z)})),E),{}))}return v=Af(t,M,n,o,l,!0),v}function Af(t,n,o={},l,c,p){let f;const y=ur({actions:{}},o),v={deep:!0};let M,k,E=[],O=[],z;const K=l.state.value[t];!p&&!K&&(l.state.value[t]={}),ie({});let q;function X(Ht){let Ct;M=k=!1,typeof Ht=="function"?(Ht(l.state.value[t]),Ct={type:So.patchFunction,storeId:t,events:z}):(ih(l.state.value[t],Ht),Ct={type:So.patchObject,payload:Ht,storeId:t,events:z});const Rt=q=Symbol();yl().then(()=>{q===Rt&&(M=!0)}),k=!0,ws(E,Ct,l.state.value[t])}const ht=p?function(){const{state:Ct}=o,Rt=Ct?Ct():{};this.$patch(Ot=>{ur(Ot,Rt)})}:Sf;function gt(){f.stop(),E=[],O=[],l._s.delete(t)}const pt=(Ht,Ct="")=>{if(Bc in Ht)return Ht[Ou]=Ct,Ht;const Rt=function(){Ll(l);const Ot=Array.from(arguments),ge=[],$e=[];function De($t){ge.push($t)}function _t($t){$e.push($t)}ws(O,{args:Ot,name:Rt[Ou],store:ut,after:De,onError:_t});let ot;try{ot=Ht.apply(this&&this.$id===t?this:ut,Ot)}catch($t){throw ws($e,$t),$t}return ot instanceof Promise?ot.then($t=>(ws(ge,$t),$t)).catch($t=>(ws($e,$t),Promise.reject($t))):(ws(ge,ot),ot)};return Rt[Bc]=!0,Rt[Ou]=Ct,Rt},wt={_p:l,$id:t,$onAction:Pc.bind(null,O),$patch:X,$reset:ht,$subscribe(Ht,Ct={}){const Rt=Pc(E,Ht,Ct.detached,()=>Ot()),Ot=f.run(()=>_r(()=>l.state.value[t],ge=>{(Ct.flush==="sync"?k:M)&&Ht({storeId:t,type:So.direct,events:z},ge)},ur({},v,Ct)));return Rt},$dispose:gt},ut=Kn(wt);l._s.set(t,ut);const Et=(l._a&&l._a.runWithContext||Bg)(()=>l._e.run(()=>(f=Pd()).run(()=>n({action:pt}))));for(const Ht in Et){const Ct=Et[Ht];if(Ye(Ct)&&!Tg(Ct)||gr(Ct))p||(K&&Ag(Ct)&&(Ye(Ct)?Ct.value=K[Ht]:ih(Ct,K[Ht])),l.state.value[t][Ht]=Ct);else if(typeof Ct=="function"){const Rt=pt(Ct,Ht);Et[Ht]=Rt,y.actions[Ht]=Ct}}return ur(ut,Et),ur(xe(ut),Et),Object.defineProperty(ut,"$state",{get:()=>l.state.value[t],set:Ht=>{X(Ct=>{ur(Ct,Ht)})}}),l._p.forEach(Ht=>{ur(ut,f.run(()=>Ht({store:ut,app:l._a,pinia:l,options:y})))}),K&&p&&o.hydrate&&o.hydrate(ut.$state,K),M=!0,k=!0,ut}/*! #__NO_SIDE_EFFECTS__ */function Tf(t,n,o){let l,c;const p=typeof n=="function";typeof t=="string"?(l=t,c=p?o:n):(c=t,l=t.id);function f(y,v){const M=v0();return y=y||(M?en(Bf,null):null),y&&Ll(y),y=Pf,y._s.has(l)||(p?Af(l,n,c,y):Dg(l,c,y)),y._s.get(l)}return f.$id=l,f}function Df(t,n){return function(){return t.apply(n,arguments)}}const{toString:Rg}=Object.prototype,{getPrototypeOf:Rh}=Object,Cl=(t=>n=>{const o=Rg.call(n);return t[o]||(t[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),fn=t=>(t=t.toLowerCase(),n=>Cl(n)===t),kl=t=>n=>typeof n===t,{isArray:Rs}=Array,Uo=kl("undefined");function Og(t){return t!==null&&!Uo(t)&&t.constructor!==null&&!Uo(t.constructor)&&Vi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Rf=fn("ArrayBuffer");function Ig(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&Rf(t.buffer),n}const Fg=kl("string"),Vi=kl("function"),Of=kl("number"),El=t=>t!==null&&typeof t=="object",Ng=t=>t===!0||t===!1,Ha=t=>{if(Cl(t)!=="object")return!1;const n=Rh(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},zg=fn("Date"),jg=fn("File"),Ug=fn("Blob"),Gg=fn("FileList"),$g=t=>El(t)&&Vi(t.pipe),Vg=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||Vi(t.append)&&((n=Cl(t))==="formdata"||n==="object"&&Vi(t.toString)&&t.toString()==="[object FormData]"))},Hg=fn("URLSearchParams"),[Zg,qg,Kg,Wg]=["ReadableStream","Request","Response","Headers"].map(fn),Jg=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Wo(t,n,{allOwnKeys:o=!1}={}){if(t===null||typeof t>"u")return;let l,c;if(typeof t!="object"&&(t=[t]),Rs(t))for(l=0,c=t.length;l<c;l++)n.call(null,t[l],l,t);else{const p=o?Object.getOwnPropertyNames(t):Object.keys(t),f=p.length;let y;for(l=0;l<f;l++)y=p[l],n.call(null,t[y],y,t)}}function If(t,n){n=n.toLowerCase();const o=Object.keys(t);let l=o.length,c;for(;l-- >0;)if(c=o[l],n===c.toLowerCase())return c;return null}const zr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ff=t=>!Uo(t)&&t!==zr;function nh(){const{caseless:t}=Ff(this)&&this||{},n={},o=(l,c)=>{const p=t&&If(n,c)||c;Ha(n[p])&&Ha(l)?n[p]=nh(n[p],l):Ha(l)?n[p]=nh({},l):Rs(l)?n[p]=l.slice():n[p]=l};for(let l=0,c=arguments.length;l<c;l++)arguments[l]&&Wo(arguments[l],o);return n}const Yg=(t,n,o,{allOwnKeys:l}={})=>(Wo(n,(c,p)=>{o&&Vi(c)?t[p]=Df(c,o):t[p]=c},{allOwnKeys:l}),t),Xg=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Qg=(t,n,o,l)=>{t.prototype=Object.create(n.prototype,l),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),o&&Object.assign(t.prototype,o)},t_=(t,n,o,l)=>{let c,p,f;const y={};if(n=n||{},t==null)return n;do{for(c=Object.getOwnPropertyNames(t),p=c.length;p-- >0;)f=c[p],(!l||l(f,t,n))&&!y[f]&&(n[f]=t[f],y[f]=!0);t=o!==!1&&Rh(t)}while(t&&(!o||o(t,n))&&t!==Object.prototype);return n},e_=(t,n,o)=>{t=String(t),(o===void 0||o>t.length)&&(o=t.length),o-=n.length;const l=t.indexOf(n,o);return l!==-1&&l===o},i_=t=>{if(!t)return null;if(Rs(t))return t;let n=t.length;if(!Of(n))return null;const o=new Array(n);for(;n-- >0;)o[n]=t[n];return o},n_=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&Rh(Uint8Array)),r_=(t,n)=>{const l=(t&&t[Symbol.iterator]).call(t);let c;for(;(c=l.next())&&!c.done;){const p=c.value;n.call(t,p[0],p[1])}},s_=(t,n)=>{let o;const l=[];for(;(o=t.exec(n))!==null;)l.push(o);return l},o_=fn("HTMLFormElement"),a_=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,l,c){return l.toUpperCase()+c}),Sc=(({hasOwnProperty:t})=>(n,o)=>t.call(n,o))(Object.prototype),l_=fn("RegExp"),Nf=(t,n)=>{const o=Object.getOwnPropertyDescriptors(t),l={};Wo(o,(c,p)=>{let f;(f=n(c,p,t))!==!1&&(l[p]=f||c)}),Object.defineProperties(t,l)},u_=t=>{Nf(t,(n,o)=>{if(Vi(t)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const l=t[o];if(Vi(l)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},h_=(t,n)=>{const o={},l=c=>{c.forEach(p=>{o[p]=!0})};return Rs(t)?l(t):l(String(t).split(n)),o},c_=()=>{},d_=(t,n)=>t!=null&&Number.isFinite(t=+t)?t:n,Iu="abcdefghijklmnopqrstuvwxyz",Ac="0123456789",zf={DIGIT:Ac,ALPHA:Iu,ALPHA_DIGIT:Iu+Iu.toUpperCase()+Ac},f_=(t=16,n=zf.ALPHA_DIGIT)=>{let o="";const{length:l}=n;for(;t--;)o+=n[Math.random()*l|0];return o};function p_(t){return!!(t&&Vi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const m_=t=>{const n=new Array(10),o=(l,c)=>{if(El(l)){if(n.indexOf(l)>=0)return;if(!("toJSON"in l)){n[c]=l;const p=Rs(l)?[]:{};return Wo(l,(f,y)=>{const v=o(f,c+1);!Uo(v)&&(p[y]=v)}),n[c]=void 0,p}}return l};return o(t,0)},g_=fn("AsyncFunction"),__=t=>t&&(El(t)||Vi(t))&&Vi(t.then)&&Vi(t.catch),jf=((t,n)=>t?setImmediate:n?((o,l)=>(zr.addEventListener("message",({source:c,data:p})=>{c===zr&&p===o&&l.length&&l.shift()()},!1),c=>{l.push(c),zr.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Vi(zr.postMessage)),y_=typeof queueMicrotask<"u"?queueMicrotask.bind(zr):typeof process<"u"&&process.nextTick||jf,ct={isArray:Rs,isArrayBuffer:Rf,isBuffer:Og,isFormData:Vg,isArrayBufferView:Ig,isString:Fg,isNumber:Of,isBoolean:Ng,isObject:El,isPlainObject:Ha,isReadableStream:Zg,isRequest:qg,isResponse:Kg,isHeaders:Wg,isUndefined:Uo,isDate:zg,isFile:jg,isBlob:Ug,isRegExp:l_,isFunction:Vi,isStream:$g,isURLSearchParams:Hg,isTypedArray:n_,isFileList:Gg,forEach:Wo,merge:nh,extend:Yg,trim:Jg,stripBOM:Xg,inherits:Qg,toFlatObject:t_,kindOf:Cl,kindOfTest:fn,endsWith:e_,toArray:i_,forEachEntry:r_,matchAll:s_,isHTMLForm:o_,hasOwnProperty:Sc,hasOwnProp:Sc,reduceDescriptors:Nf,freezeMethods:u_,toObjectSet:h_,toCamelCase:a_,noop:c_,toFiniteNumber:d_,findKey:If,global:zr,isContextDefined:Ff,ALPHABET:zf,generateString:f_,isSpecCompliantForm:p_,toJSONObject:m_,isAsyncFn:g_,isThenable:__,setImmediate:jf,asap:y_};function de(t,n,o,l,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),o&&(this.config=o),l&&(this.request=l),c&&(this.response=c,this.status=c.status?c.status:null)}ct.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ct.toJSONObject(this.config),code:this.code,status:this.status}}});const Uf=de.prototype,Gf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Gf[t]={value:t}});Object.defineProperties(de,Gf);Object.defineProperty(Uf,"isAxiosError",{value:!0});de.from=(t,n,o,l,c,p)=>{const f=Object.create(Uf);return ct.toFlatObject(t,f,function(v){return v!==Error.prototype},y=>y!=="isAxiosError"),de.call(f,t.message,n,o,l,c),f.cause=t,f.name=t.name,p&&Object.assign(f,p),f};const v_=null;function rh(t){return ct.isPlainObject(t)||ct.isArray(t)}function $f(t){return ct.endsWith(t,"[]")?t.slice(0,-2):t}function Tc(t,n,o){return t?t.concat(n).map(function(c,p){return c=$f(c),!o&&p?"["+c+"]":c}).join(o?".":""):n}function b_(t){return ct.isArray(t)&&!t.some(rh)}const x_=ct.toFlatObject(ct,{},null,function(n){return/^is[A-Z]/.test(n)});function Ml(t,n,o){if(!ct.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,o=ct.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,X){return!ct.isUndefined(X[q])});const l=o.metaTokens,c=o.visitor||k,p=o.dots,f=o.indexes,v=(o.Blob||typeof Blob<"u"&&Blob)&&ct.isSpecCompliantForm(n);if(!ct.isFunction(c))throw new TypeError("visitor must be a function");function M(K){if(K===null)return"";if(ct.isDate(K))return K.toISOString();if(!v&&ct.isBlob(K))throw new de("Blob is not supported. Use a Buffer instead.");return ct.isArrayBuffer(K)||ct.isTypedArray(K)?v&&typeof Blob=="function"?new Blob([K]):Buffer.from(K):K}function k(K,q,X){let ht=K;if(K&&!X&&typeof K=="object"){if(ct.endsWith(q,"{}"))q=l?q:q.slice(0,-2),K=JSON.stringify(K);else if(ct.isArray(K)&&b_(K)||(ct.isFileList(K)||ct.endsWith(q,"[]"))&&(ht=ct.toArray(K)))return q=$f(q),ht.forEach(function(pt,wt){!(ct.isUndefined(pt)||pt===null)&&n.append(f===!0?Tc([q],wt,p):f===null?q:q+"[]",M(pt))}),!1}return rh(K)?!0:(n.append(Tc(X,q,p),M(K)),!1)}const E=[],O=Object.assign(x_,{defaultVisitor:k,convertValue:M,isVisitable:rh});function z(K,q){if(!ct.isUndefined(K)){if(E.indexOf(K)!==-1)throw Error("Circular reference detected in "+q.join("."));E.push(K),ct.forEach(K,function(ht,gt){(!(ct.isUndefined(ht)||ht===null)&&c.call(n,ht,ct.isString(gt)?gt.trim():gt,q,O))===!0&&z(ht,q?q.concat(gt):[gt])}),E.pop()}}if(!ct.isObject(t))throw new TypeError("data must be an object");return z(t),n}function Dc(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(l){return n[l]})}function Oh(t,n){this._pairs=[],t&&Ml(t,this,n)}const Vf=Oh.prototype;Vf.append=function(n,o){this._pairs.push([n,o])};Vf.toString=function(n){const o=n?function(l){return n.call(this,l,Dc)}:Dc;return this._pairs.map(function(c){return o(c[0])+"="+o(c[1])},"").join("&")};function w_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Hf(t,n,o){if(!n)return t;const l=o&&o.encode||w_;ct.isFunction(o)&&(o={serialize:o});const c=o&&o.serialize;let p;if(c?p=c(n,o):p=ct.isURLSearchParams(n)?n.toString():new Oh(n,o).toString(l),p){const f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+p}return t}class Rc{constructor(){this.handlers=[]}use(n,o,l){return this.handlers.push({fulfilled:n,rejected:o,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ct.forEach(this.handlers,function(l){l!==null&&n(l)})}}const Zf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},L_=typeof URLSearchParams<"u"?URLSearchParams:Oh,C_=typeof FormData<"u"?FormData:null,k_=typeof Blob<"u"?Blob:null,E_={isBrowser:!0,classes:{URLSearchParams:L_,FormData:C_,Blob:k_},protocols:["http","https","file","blob","url","data"]},Ih=typeof window<"u"&&typeof document<"u",sh=typeof navigator=="object"&&navigator||void 0,M_=Ih&&(!sh||["ReactNative","NativeScript","NS"].indexOf(sh.product)<0),P_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",B_=Ih&&window.location.href||"http://localhost",S_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ih,hasStandardBrowserEnv:M_,hasStandardBrowserWebWorkerEnv:P_,navigator:sh,origin:B_},Symbol.toStringTag,{value:"Module"})),wi={...S_,...E_};function A_(t,n){return Ml(t,new wi.classes.URLSearchParams,Object.assign({visitor:function(o,l,c,p){return wi.isNode&&ct.isBuffer(o)?(this.append(l,o.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},n))}function T_(t){return ct.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function D_(t){const n={},o=Object.keys(t);let l;const c=o.length;let p;for(l=0;l<c;l++)p=o[l],n[p]=t[p];return n}function qf(t){function n(o,l,c,p){let f=o[p++];if(f==="__proto__")return!0;const y=Number.isFinite(+f),v=p>=o.length;return f=!f&&ct.isArray(c)?c.length:f,v?(ct.hasOwnProp(c,f)?c[f]=[c[f],l]:c[f]=l,!y):((!c[f]||!ct.isObject(c[f]))&&(c[f]=[]),n(o,l,c[f],p)&&ct.isArray(c[f])&&(c[f]=D_(c[f])),!y)}if(ct.isFormData(t)&&ct.isFunction(t.entries)){const o={};return ct.forEachEntry(t,(l,c)=>{n(T_(l),c,o,0)}),o}return null}function R_(t,n,o){if(ct.isString(t))try{return(n||JSON.parse)(t),ct.trim(t)}catch(l){if(l.name!=="SyntaxError")throw l}return(o||JSON.stringify)(t)}const Jo={transitional:Zf,adapter:["xhr","http","fetch"],transformRequest:[function(n,o){const l=o.getContentType()||"",c=l.indexOf("application/json")>-1,p=ct.isObject(n);if(p&&ct.isHTMLForm(n)&&(n=new FormData(n)),ct.isFormData(n))return c?JSON.stringify(qf(n)):n;if(ct.isArrayBuffer(n)||ct.isBuffer(n)||ct.isStream(n)||ct.isFile(n)||ct.isBlob(n)||ct.isReadableStream(n))return n;if(ct.isArrayBufferView(n))return n.buffer;if(ct.isURLSearchParams(n))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let y;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return A_(n,this.formSerializer).toString();if((y=ct.isFileList(n))||l.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Ml(y?{"files[]":n}:n,v&&new v,this.formSerializer)}}return p||c?(o.setContentType("application/json",!1),R_(n)):n}],transformResponse:[function(n){const o=this.transitional||Jo.transitional,l=o&&o.forcedJSONParsing,c=this.responseType==="json";if(ct.isResponse(n)||ct.isReadableStream(n))return n;if(n&&ct.isString(n)&&(l&&!this.responseType||c)){const f=!(o&&o.silentJSONParsing)&&c;try{return JSON.parse(n)}catch(y){if(f)throw y.name==="SyntaxError"?de.from(y,de.ERR_BAD_RESPONSE,this,null,this.response):y}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wi.classes.FormData,Blob:wi.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ct.forEach(["delete","get","head","post","put","patch"],t=>{Jo.headers[t]={}});const O_=ct.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),I_=t=>{const n={};let o,l,c;return t&&t.split(`
`).forEach(function(f){c=f.indexOf(":"),o=f.substring(0,c).trim().toLowerCase(),l=f.substring(c+1).trim(),!(!o||n[o]&&O_[o])&&(o==="set-cookie"?n[o]?n[o].push(l):n[o]=[l]:n[o]=n[o]?n[o]+", "+l:l)}),n},Oc=Symbol("internals");function yo(t){return t&&String(t).trim().toLowerCase()}function Za(t){return t===!1||t==null?t:ct.isArray(t)?t.map(Za):String(t)}function F_(t){const n=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=o.exec(t);)n[l[1]]=l[2];return n}const N_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Fu(t,n,o,l,c){if(ct.isFunction(l))return l.call(this,n,o);if(c&&(n=o),!!ct.isString(n)){if(ct.isString(l))return n.indexOf(l)!==-1;if(ct.isRegExp(l))return l.test(n)}}function z_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,o,l)=>o.toUpperCase()+l)}function j_(t,n){const o=ct.toCamelCase(" "+n);["get","set","has"].forEach(l=>{Object.defineProperty(t,l+o,{value:function(c,p,f){return this[l].call(this,n,c,p,f)},configurable:!0})})}let Ni=class{constructor(n){n&&this.set(n)}set(n,o,l){const c=this;function p(y,v,M){const k=yo(v);if(!k)throw new Error("header name must be a non-empty string");const E=ct.findKey(c,k);(!E||c[E]===void 0||M===!0||M===void 0&&c[E]!==!1)&&(c[E||v]=Za(y))}const f=(y,v)=>ct.forEach(y,(M,k)=>p(M,k,v));if(ct.isPlainObject(n)||n instanceof this.constructor)f(n,o);else if(ct.isString(n)&&(n=n.trim())&&!N_(n))f(I_(n),o);else if(ct.isHeaders(n))for(const[y,v]of n.entries())p(v,y,l);else n!=null&&p(o,n,l);return this}get(n,o){if(n=yo(n),n){const l=ct.findKey(this,n);if(l){const c=this[l];if(!o)return c;if(o===!0)return F_(c);if(ct.isFunction(o))return o.call(this,c,l);if(ct.isRegExp(o))return o.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,o){if(n=yo(n),n){const l=ct.findKey(this,n);return!!(l&&this[l]!==void 0&&(!o||Fu(this,this[l],l,o)))}return!1}delete(n,o){const l=this;let c=!1;function p(f){if(f=yo(f),f){const y=ct.findKey(l,f);y&&(!o||Fu(l,l[y],y,o))&&(delete l[y],c=!0)}}return ct.isArray(n)?n.forEach(p):p(n),c}clear(n){const o=Object.keys(this);let l=o.length,c=!1;for(;l--;){const p=o[l];(!n||Fu(this,this[p],p,n,!0))&&(delete this[p],c=!0)}return c}normalize(n){const o=this,l={};return ct.forEach(this,(c,p)=>{const f=ct.findKey(l,p);if(f){o[f]=Za(c),delete o[p];return}const y=n?z_(p):String(p).trim();y!==p&&delete o[p],o[y]=Za(c),l[y]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const o=Object.create(null);return ct.forEach(this,(l,c)=>{l!=null&&l!==!1&&(o[c]=n&&ct.isArray(l)?l.join(", "):l)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,o])=>n+": "+o).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...o){const l=new this(n);return o.forEach(c=>l.set(c)),l}static accessor(n){const l=(this[Oc]=this[Oc]={accessors:{}}).accessors,c=this.prototype;function p(f){const y=yo(f);l[y]||(j_(c,f),l[y]=!0)}return ct.isArray(n)?n.forEach(p):p(n),this}};Ni.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ct.reduceDescriptors(Ni.prototype,({value:t},n)=>{let o=n[0].toUpperCase()+n.slice(1);return{get:()=>t,set(l){this[o]=l}}});ct.freezeMethods(Ni);function Nu(t,n){const o=this||Jo,l=n||o,c=Ni.from(l.headers);let p=l.data;return ct.forEach(t,function(y){p=y.call(o,p,c.normalize(),n?n.status:void 0)}),c.normalize(),p}function Kf(t){return!!(t&&t.__CANCEL__)}function Os(t,n,o){de.call(this,t??"canceled",de.ERR_CANCELED,n,o),this.name="CanceledError"}ct.inherits(Os,de,{__CANCEL__:!0});function Wf(t,n,o){const l=o.config.validateStatus;!o.status||!l||l(o.status)?t(o):n(new de("Request failed with status code "+o.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function U_(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function G_(t,n){t=t||10;const o=new Array(t),l=new Array(t);let c=0,p=0,f;return n=n!==void 0?n:1e3,function(v){const M=Date.now(),k=l[p];f||(f=M),o[c]=v,l[c]=M;let E=p,O=0;for(;E!==c;)O+=o[E++],E=E%t;if(c=(c+1)%t,c===p&&(p=(p+1)%t),M-f<n)return;const z=k&&M-k;return z?Math.round(O*1e3/z):void 0}}function $_(t,n){let o=0,l=1e3/n,c,p;const f=(M,k=Date.now())=>{o=k,c=null,p&&(clearTimeout(p),p=null),t.apply(null,M)};return[(...M)=>{const k=Date.now(),E=k-o;E>=l?f(M,k):(c=M,p||(p=setTimeout(()=>{p=null,f(c)},l-E)))},()=>c&&f(c)]}const ol=(t,n,o=3)=>{let l=0;const c=G_(50,250);return $_(p=>{const f=p.loaded,y=p.lengthComputable?p.total:void 0,v=f-l,M=c(v),k=f<=y;l=f;const E={loaded:f,total:y,progress:y?f/y:void 0,bytes:v,rate:M||void 0,estimated:M&&y&&k?(y-f)/M:void 0,event:p,lengthComputable:y!=null,[n?"download":"upload"]:!0};t(E)},o)},Ic=(t,n)=>{const o=t!=null;return[l=>n[0]({lengthComputable:o,total:t,loaded:l}),n[1]]},Fc=t=>(...n)=>ct.asap(()=>t(...n)),V_=wi.hasStandardBrowserEnv?((t,n)=>o=>(o=new URL(o,wi.origin),t.protocol===o.protocol&&t.host===o.host&&(n||t.port===o.port)))(new URL(wi.origin),wi.navigator&&/(msie|trident)/i.test(wi.navigator.userAgent)):()=>!0,H_=wi.hasStandardBrowserEnv?{write(t,n,o,l,c,p){const f=[t+"="+encodeURIComponent(n)];ct.isNumber(o)&&f.push("expires="+new Date(o).toGMTString()),ct.isString(l)&&f.push("path="+l),ct.isString(c)&&f.push("domain="+c),p===!0&&f.push("secure"),document.cookie=f.join("; ")},read(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Z_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function q_(t,n){return n?t.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):t}function Jf(t,n){return t&&!Z_(n)?q_(t,n):n}const Nc=t=>t instanceof Ni?{...t}:t;function Hr(t,n){n=n||{};const o={};function l(M,k,E,O){return ct.isPlainObject(M)&&ct.isPlainObject(k)?ct.merge.call({caseless:O},M,k):ct.isPlainObject(k)?ct.merge({},k):ct.isArray(k)?k.slice():k}function c(M,k,E,O){if(ct.isUndefined(k)){if(!ct.isUndefined(M))return l(void 0,M,E,O)}else return l(M,k,E,O)}function p(M,k){if(!ct.isUndefined(k))return l(void 0,k)}function f(M,k){if(ct.isUndefined(k)){if(!ct.isUndefined(M))return l(void 0,M)}else return l(void 0,k)}function y(M,k,E){if(E in n)return l(M,k);if(E in t)return l(void 0,M)}const v={url:p,method:p,data:p,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:y,headers:(M,k,E)=>c(Nc(M),Nc(k),E,!0)};return ct.forEach(Object.keys(Object.assign({},t,n)),function(k){const E=v[k]||c,O=E(t[k],n[k],k);ct.isUndefined(O)&&E!==y||(o[k]=O)}),o}const Yf=t=>{const n=Hr({},t);let{data:o,withXSRFToken:l,xsrfHeaderName:c,xsrfCookieName:p,headers:f,auth:y}=n;n.headers=f=Ni.from(f),n.url=Hf(Jf(n.baseURL,n.url),t.params,t.paramsSerializer),y&&f.set("Authorization","Basic "+btoa((y.username||"")+":"+(y.password?unescape(encodeURIComponent(y.password)):"")));let v;if(ct.isFormData(o)){if(wi.hasStandardBrowserEnv||wi.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((v=f.getContentType())!==!1){const[M,...k]=v?v.split(";").map(E=>E.trim()).filter(Boolean):[];f.setContentType([M||"multipart/form-data",...k].join("; "))}}if(wi.hasStandardBrowserEnv&&(l&&ct.isFunction(l)&&(l=l(n)),l||l!==!1&&V_(n.url))){const M=c&&p&&H_.read(p);M&&f.set(c,M)}return n},K_=typeof XMLHttpRequest<"u",W_=K_&&function(t){return new Promise(function(o,l){const c=Yf(t);let p=c.data;const f=Ni.from(c.headers).normalize();let{responseType:y,onUploadProgress:v,onDownloadProgress:M}=c,k,E,O,z,K;function q(){z&&z(),K&&K(),c.cancelToken&&c.cancelToken.unsubscribe(k),c.signal&&c.signal.removeEventListener("abort",k)}let X=new XMLHttpRequest;X.open(c.method.toUpperCase(),c.url,!0),X.timeout=c.timeout;function ht(){if(!X)return;const pt=Ni.from("getAllResponseHeaders"in X&&X.getAllResponseHeaders()),ut={data:!y||y==="text"||y==="json"?X.responseText:X.response,status:X.status,statusText:X.statusText,headers:pt,config:t,request:X};Wf(function(Et){o(Et),q()},function(Et){l(Et),q()},ut),X=null}"onloadend"in X?X.onloadend=ht:X.onreadystatechange=function(){!X||X.readyState!==4||X.status===0&&!(X.responseURL&&X.responseURL.indexOf("file:")===0)||setTimeout(ht)},X.onabort=function(){X&&(l(new de("Request aborted",de.ECONNABORTED,t,X)),X=null)},X.onerror=function(){l(new de("Network Error",de.ERR_NETWORK,t,X)),X=null},X.ontimeout=function(){let wt=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const ut=c.transitional||Zf;c.timeoutErrorMessage&&(wt=c.timeoutErrorMessage),l(new de(wt,ut.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,t,X)),X=null},p===void 0&&f.setContentType(null),"setRequestHeader"in X&&ct.forEach(f.toJSON(),function(wt,ut){X.setRequestHeader(ut,wt)}),ct.isUndefined(c.withCredentials)||(X.withCredentials=!!c.withCredentials),y&&y!=="json"&&(X.responseType=c.responseType),M&&([O,K]=ol(M,!0),X.addEventListener("progress",O)),v&&X.upload&&([E,z]=ol(v),X.upload.addEventListener("progress",E),X.upload.addEventListener("loadend",z)),(c.cancelToken||c.signal)&&(k=pt=>{X&&(l(!pt||pt.type?new Os(null,t,X):pt),X.abort(),X=null)},c.cancelToken&&c.cancelToken.subscribe(k),c.signal&&(c.signal.aborted?k():c.signal.addEventListener("abort",k)));const gt=U_(c.url);if(gt&&wi.protocols.indexOf(gt)===-1){l(new de("Unsupported protocol "+gt+":",de.ERR_BAD_REQUEST,t));return}X.send(p||null)})},J_=(t,n)=>{const{length:o}=t=t?t.filter(Boolean):[];if(n||o){let l=new AbortController,c;const p=function(M){if(!c){c=!0,y();const k=M instanceof Error?M:this.reason;l.abort(k instanceof de?k:new Os(k instanceof Error?k.message:k))}};let f=n&&setTimeout(()=>{f=null,p(new de(`timeout ${n} of ms exceeded`,de.ETIMEDOUT))},n);const y=()=>{t&&(f&&clearTimeout(f),f=null,t.forEach(M=>{M.unsubscribe?M.unsubscribe(p):M.removeEventListener("abort",p)}),t=null)};t.forEach(M=>M.addEventListener("abort",p));const{signal:v}=l;return v.unsubscribe=()=>ct.asap(y),v}},Y_=function*(t,n){let o=t.byteLength;if(o<n){yield t;return}let l=0,c;for(;l<o;)c=l+n,yield t.slice(l,c),l=c},X_=async function*(t,n){for await(const o of Q_(t))yield*Y_(o,n)},Q_=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const n=t.getReader();try{for(;;){const{done:o,value:l}=await n.read();if(o)break;yield l}}finally{await n.cancel()}},zc=(t,n,o,l)=>{const c=X_(t,n);let p=0,f,y=v=>{f||(f=!0,l&&l(v))};return new ReadableStream({async pull(v){try{const{done:M,value:k}=await c.next();if(M){y(),v.close();return}let E=k.byteLength;if(o){let O=p+=E;o(O)}v.enqueue(new Uint8Array(k))}catch(M){throw y(M),M}},cancel(v){return y(v),c.return()}},{highWaterMark:2})},Pl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Xf=Pl&&typeof ReadableStream=="function",ty=Pl&&(typeof TextEncoder=="function"?(t=>n=>t.encode(n))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Qf=(t,...n)=>{try{return!!t(...n)}catch{return!1}},ey=Xf&&Qf(()=>{let t=!1;const n=new Request(wi.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!n}),jc=64*1024,oh=Xf&&Qf(()=>ct.isReadableStream(new Response("").body)),al={stream:oh&&(t=>t.body)};Pl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!al[n]&&(al[n]=ct.isFunction(t[n])?o=>o[n]():(o,l)=>{throw new de(`Response type '${n}' is not supported`,de.ERR_NOT_SUPPORT,l)})})})(new Response);const iy=async t=>{if(t==null)return 0;if(ct.isBlob(t))return t.size;if(ct.isSpecCompliantForm(t))return(await new Request(wi.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(ct.isArrayBufferView(t)||ct.isArrayBuffer(t))return t.byteLength;if(ct.isURLSearchParams(t)&&(t=t+""),ct.isString(t))return(await ty(t)).byteLength},ny=async(t,n)=>{const o=ct.toFiniteNumber(t.getContentLength());return o??iy(n)},ry=Pl&&(async t=>{let{url:n,method:o,data:l,signal:c,cancelToken:p,timeout:f,onDownloadProgress:y,onUploadProgress:v,responseType:M,headers:k,withCredentials:E="same-origin",fetchOptions:O}=Yf(t);M=M?(M+"").toLowerCase():"text";let z=J_([c,p&&p.toAbortSignal()],f),K;const q=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let X;try{if(v&&ey&&o!=="get"&&o!=="head"&&(X=await ny(k,l))!==0){let ut=new Request(n,{method:"POST",body:l,duplex:"half"}),Pt;if(ct.isFormData(l)&&(Pt=ut.headers.get("content-type"))&&k.setContentType(Pt),ut.body){const[Et,Ht]=Ic(X,ol(Fc(v)));l=zc(ut.body,jc,Et,Ht)}}ct.isString(E)||(E=E?"include":"omit");const ht="credentials"in Request.prototype;K=new Request(n,{...O,signal:z,method:o.toUpperCase(),headers:k.normalize().toJSON(),body:l,duplex:"half",credentials:ht?E:void 0});let gt=await fetch(K);const pt=oh&&(M==="stream"||M==="response");if(oh&&(y||pt&&q)){const ut={};["status","statusText","headers"].forEach(Ct=>{ut[Ct]=gt[Ct]});const Pt=ct.toFiniteNumber(gt.headers.get("content-length")),[Et,Ht]=y&&Ic(Pt,ol(Fc(y),!0))||[];gt=new Response(zc(gt.body,jc,Et,()=>{Ht&&Ht(),q&&q()}),ut)}M=M||"text";let wt=await al[ct.findKey(al,M)||"text"](gt,t);return!pt&&q&&q(),await new Promise((ut,Pt)=>{Wf(ut,Pt,{data:wt,headers:Ni.from(gt.headers),status:gt.status,statusText:gt.statusText,config:t,request:K})})}catch(ht){throw q&&q(),ht&&ht.name==="TypeError"&&/fetch/i.test(ht.message)?Object.assign(new de("Network Error",de.ERR_NETWORK,t,K),{cause:ht.cause||ht}):de.from(ht,ht&&ht.code,t,K)}}),ah={http:v_,xhr:W_,fetch:ry};ct.forEach(ah,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const Uc=t=>`- ${t}`,sy=t=>ct.isFunction(t)||t===null||t===!1,tp={getAdapter:t=>{t=ct.isArray(t)?t:[t];const{length:n}=t;let o,l;const c={};for(let p=0;p<n;p++){o=t[p];let f;if(l=o,!sy(o)&&(l=ah[(f=String(o)).toLowerCase()],l===void 0))throw new de(`Unknown adapter '${f}'`);if(l)break;c[f||"#"+p]=l}if(!l){const p=Object.entries(c).map(([y,v])=>`adapter ${y} `+(v===!1?"is not supported by the environment":"is not available in the build"));let f=n?p.length>1?`since :
`+p.map(Uc).join(`
`):" "+Uc(p[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l},adapters:ah};function zu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Os(null,t)}function Gc(t){return zu(t),t.headers=Ni.from(t.headers),t.data=Nu.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),tp.getAdapter(t.adapter||Jo.adapter)(t).then(function(l){return zu(t),l.data=Nu.call(t,t.transformResponse,l),l.headers=Ni.from(l.headers),l},function(l){return Kf(l)||(zu(t),l&&l.response&&(l.response.data=Nu.call(t,t.transformResponse,l.response),l.response.headers=Ni.from(l.response.headers))),Promise.reject(l)})}const ep="1.7.9",Bl={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{Bl[t]=function(l){return typeof l===t||"a"+(n<1?"n ":" ")+t}});const $c={};Bl.transitional=function(n,o,l){function c(p,f){return"[Axios v"+ep+"] Transitional option '"+p+"'"+f+(l?". "+l:"")}return(p,f,y)=>{if(n===!1)throw new de(c(f," has been removed"+(o?" in "+o:"")),de.ERR_DEPRECATED);return o&&!$c[f]&&($c[f]=!0,console.warn(c(f," has been deprecated since v"+o+" and will be removed in the near future"))),n?n(p,f,y):!0}};Bl.spelling=function(n){return(o,l)=>(console.warn(`${l} is likely a misspelling of ${n}`),!0)};function oy(t,n,o){if(typeof t!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const l=Object.keys(t);let c=l.length;for(;c-- >0;){const p=l[c],f=n[p];if(f){const y=t[p],v=y===void 0||f(y,p,t);if(v!==!0)throw new de("option "+p+" must be "+v,de.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new de("Unknown option "+p,de.ERR_BAD_OPTION)}}const qa={assertOptions:oy,validators:Bl},Ln=qa.validators;let Gr=class{constructor(n){this.defaults=n,this.interceptors={request:new Rc,response:new Rc}}async request(n,o){try{return await this._request(n,o)}catch(l){if(l instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const p=c.stack?c.stack.replace(/^.+\n/,""):"";try{l.stack?p&&!String(l.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+p):l.stack=p}catch{}}throw l}}_request(n,o){typeof n=="string"?(o=o||{},o.url=n):o=n||{},o=Hr(this.defaults,o);const{transitional:l,paramsSerializer:c,headers:p}=o;l!==void 0&&qa.assertOptions(l,{silentJSONParsing:Ln.transitional(Ln.boolean),forcedJSONParsing:Ln.transitional(Ln.boolean),clarifyTimeoutError:Ln.transitional(Ln.boolean)},!1),c!=null&&(ct.isFunction(c)?o.paramsSerializer={serialize:c}:qa.assertOptions(c,{encode:Ln.function,serialize:Ln.function},!0)),qa.assertOptions(o,{baseUrl:Ln.spelling("baseURL"),withXsrfToken:Ln.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let f=p&&ct.merge(p.common,p[o.method]);p&&ct.forEach(["delete","get","head","post","put","patch","common"],K=>{delete p[K]}),o.headers=Ni.concat(f,p);const y=[];let v=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(o)===!1||(v=v&&q.synchronous,y.unshift(q.fulfilled,q.rejected))});const M=[];this.interceptors.response.forEach(function(q){M.push(q.fulfilled,q.rejected)});let k,E=0,O;if(!v){const K=[Gc.bind(this),void 0];for(K.unshift.apply(K,y),K.push.apply(K,M),O=K.length,k=Promise.resolve(o);E<O;)k=k.then(K[E++],K[E++]);return k}O=y.length;let z=o;for(E=0;E<O;){const K=y[E++],q=y[E++];try{z=K(z)}catch(X){q.call(this,X);break}}try{k=Gc.call(this,z)}catch(K){return Promise.reject(K)}for(E=0,O=M.length;E<O;)k=k.then(M[E++],M[E++]);return k}getUri(n){n=Hr(this.defaults,n);const o=Jf(n.baseURL,n.url);return Hf(o,n.params,n.paramsSerializer)}};ct.forEach(["delete","get","head","options"],function(n){Gr.prototype[n]=function(o,l){return this.request(Hr(l||{},{method:n,url:o,data:(l||{}).data}))}});ct.forEach(["post","put","patch"],function(n){function o(l){return function(p,f,y){return this.request(Hr(y||{},{method:n,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:f}))}}Gr.prototype[n]=o(),Gr.prototype[n+"Form"]=o(!0)});let ay=class ip{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(p){o=p});const l=this;this.promise.then(c=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](c);l._listeners=null}),this.promise.then=c=>{let p;const f=new Promise(y=>{l.subscribe(y),p=y}).then(c);return f.cancel=function(){l.unsubscribe(p)},f},n(function(p,f,y){l.reason||(l.reason=new Os(p,f,y),o(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const o=this._listeners.indexOf(n);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const n=new AbortController,o=l=>{n.abort(l)};return this.subscribe(o),n.signal.unsubscribe=()=>this.unsubscribe(o),n.signal}static source(){let n;return{token:new ip(function(c){n=c}),cancel:n}}};function ly(t){return function(o){return t.apply(null,o)}}function uy(t){return ct.isObject(t)&&t.isAxiosError===!0}const lh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lh).forEach(([t,n])=>{lh[n]=t});function np(t){const n=new Gr(t),o=Df(Gr.prototype.request,n);return ct.extend(o,Gr.prototype,n,{allOwnKeys:!0}),ct.extend(o,n,null,{allOwnKeys:!0}),o.create=function(c){return np(Hr(t,c))},o}const le=np(Jo);le.Axios=Gr;le.CanceledError=Os;le.CancelToken=ay;le.isCancel=Kf;le.VERSION=ep;le.toFormData=Ml;le.AxiosError=de;le.Cancel=le.CanceledError;le.all=function(n){return Promise.all(n)};le.spread=ly;le.isAxiosError=uy;le.mergeConfig=Hr;le.AxiosHeaders=Ni;le.formToJSON=t=>qf(ct.isHTMLForm(t)?new FormData(t):t);le.getAdapter=tp.getAdapter;le.HttpStatusCode=lh;le.default=le;const{Axios:k3,AxiosError:E3,CanceledError:M3,isCancel:P3,CancelToken:B3,VERSION:S3,all:A3,Cancel:T3,isAxiosError:D3,spread:R3,toFormData:O3,AxiosHeaders:I3,HttpStatusCode:F3,formToJSON:N3,getAdapter:z3,mergeConfig:j3}=le;le.defaults.baseURL="/api";le.defaults.headers.common["Content-Type"]="application/json";le.defaults.withCredentials=!0;const hy=t=>{console.log("Full request URL:",`${le.defaults.baseURL}${t.url}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,data:t.data,withCredentials:t.withCredentials,baseURL:le.defaults.baseURL})};le.interceptors.request.use(t=>{const n=localStorage.getItem("token");return n&&(t.headers.Authorization=`Bearer ${n}`),hy(t),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));le.interceptors.response.use(t=>(console.log("Response:",{url:t.config.url,status:t.status,data:t.data}),t),async t=>{var n,o,l,c;if(console.error("Response error:",{url:(n=t.config)==null?void 0:n.url,status:(o=t.response)==null?void 0:o.status,data:(l=t.response)==null?void 0:l.data}),((c=t.response)==null?void 0:c.status)===401){const p=Jn();if(!t.config.url.includes("/token/")&&!t.config._retry){t.config._retry=!0;try{await p.refreshToken();const f=localStorage.getItem("token");return t.config.headers.Authorization=`Bearer ${f}`,le(t.config)}catch(f){return console.error("Token refresh failed:",f),await p.logout(),window.location.href="/login",Promise.reject(f)}}}return Promise.reject(t)});const Jn=Tf("auth",{state:()=>({user:null,token:localStorage.getItem("token"),isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="admin"},isDealer:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="dealer"},isClient:t=>{var n;return((n=t.user)==null?void 0:n.user_type)==="client"},currentUser:t=>t.user,hasDealer:t=>{var n;return!!((n=t.user)!=null&&n.dealer)}},actions:{async initialize(t){if(console.log("Initializing auth store with state:",t),!t){console.log("No initial state, attempting to restore session..."),await this.restoreSession();return}t.isAuthenticated&&t.user?(this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1):await this.restoreSession(),this.initialized=!0},async restoreSession(){console.log("Attempting to restore session...");const t=localStorage.getItem("token"),n=localStorage.getItem("refresh_token");if(!t||!n){console.log("No tokens found, skipping session restore"),this.isAuthenticated=!1,this.user=null;return}try{await this.refreshToken()&&(await this.fetchUserProfile(),this.isAuthenticated=!0,console.log("Session restored successfully"))}catch(o){console.error("Failed to restore session:",o),this.isAuthenticated=!1,this.user=null,localStorage.removeItem("token"),localStorage.removeItem("refresh_token")}},async login(t,n){try{console.log("Attempting login...");const o=await le.post("/token/",{username:t,password:n});console.log("Login response:",o.data);const{access:l,refresh:c}=o.data;localStorage.setItem("token",l),localStorage.setItem("refresh_token",c),this.token=l;const p=await this.fetchUserProfile();return console.log("User profile after login:",p),this.user=p,this.isAuthenticated=!0,!0}catch(o){throw console.error("Login error:",o),o}},async checkAuth(){try{return console.log("Checking auth..."),localStorage.getItem("token")?(console.log("Token found, fetching user profile..."),await this.fetchUserProfile(),this.isAuthenticated=!0,!0):(console.log("No token found"),this.isAuthenticated=!1,!1)}catch(t){throw console.error("Auth check error:",t),this.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),t}},async fetchUserProfile(){try{console.log("Fetching user profile...");const t=await le.get("/users/me/");return console.log("User profile response:",t.data),this.user=t.data,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw console.error("Error fetching user profile:",t),t}},async changePassword(t,n){try{console.log("Attempting to change password...");const o=await le.post("/users/change_password/",{old_password:t,password:n});return console.log("Password change response:",o.data),this.user={...this.user,must_change_password:!1},o.data}catch(o){throw console.error("Password change error:",o),o}},async logout(){console.log("Logging out..."),localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),this.user=null,this.token=null,this.isAuthenticated=!1,this.mustChangePassword=!1},async refreshToken(){var t,n,o,l;try{console.log("Attempting to refresh token...");const c=await le.post("/token/refresh/",{},{withCredentials:!0}),{access:p}=c.data;if(!p)throw new Error("No access token received");return console.log("Token refreshed successfully"),localStorage.setItem("token",p),this.token=p,p}catch(c){throw console.error("Error refreshing token:",{status:(t=c.response)==null?void 0:t.status,data:(n=c.response)==null?void 0:n.data}),(((o=c.response)==null?void 0:o.status)===401||((l=c.response)==null?void 0:l.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),c}},async fetchConcessionnaires(){this.loading=!0;try{const t=await le.get("/users/",{params:{role:"dealer"}});this.concessionnaires=t.data}catch(t){throw this.error="Erreur lors de la rcupration des concessionnaires",t}finally{this.loading=!1}},async setConcessionnaire(t,n){this.loading=!0;try{await le.patch(`/users/${t}/`,{concessionnaire:n}),this.user&&this.user.id===t&&(this.user.dealer=n)}catch(o){throw this.error="Erreur lors de la mise  jour du concessionnaire",o}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await le.post("/users/",t)).data}catch(n){throw this.error="Erreur lors de la cration de l'utilisateur",n}finally{this.loading=!1}},async updateUserRole(t,n){this.loading=!0;try{const o=await le.patch(`/users/${t}/`,{role:n});return this.user&&this.user.id===t&&(this.user.user_type=n),o.data}catch(o){throw this.error="Erreur lors de la mise  jour du rle",o}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Cs=typeof document<"u";function rp(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function cy(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&rp(t.default)}const Be=Object.assign;function ju(t,n){const o={};for(const l in n){const c=n[l];o[l]=cn(c)?c.map(t):t(c)}return o}const Ao=()=>{},cn=Array.isArray,sp=/#/g,dy=/&/g,fy=/\//g,py=/=/g,my=/\?/g,op=/\+/g,gy=/%5B/g,_y=/%5D/g,ap=/%5E/g,yy=/%60/g,lp=/%7B/g,vy=/%7C/g,up=/%7D/g,by=/%20/g;function Fh(t){return encodeURI(""+t).replace(vy,"|").replace(gy,"[").replace(_y,"]")}function xy(t){return Fh(t).replace(lp,"{").replace(up,"}").replace(ap,"^")}function uh(t){return Fh(t).replace(op,"%2B").replace(by,"+").replace(sp,"%23").replace(dy,"%26").replace(yy,"`").replace(lp,"{").replace(up,"}").replace(ap,"^")}function wy(t){return uh(t).replace(py,"%3D")}function Ly(t){return Fh(t).replace(sp,"%23").replace(my,"%3F")}function Cy(t){return t==null?"":Ly(t).replace(fy,"%2F")}function Go(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const ky=/\/$/,Ey=t=>t.replace(ky,"");function Uu(t,n,o="/"){let l,c={},p="",f="";const y=n.indexOf("#");let v=n.indexOf("?");return y<v&&y>=0&&(v=-1),v>-1&&(l=n.slice(0,v),p=n.slice(v+1,y>-1?y:n.length),c=t(p)),y>-1&&(l=l||n.slice(0,y),f=n.slice(y,n.length)),l=Sy(l??n,o),{fullPath:l+(p&&"?")+p+f,path:l,query:c,hash:Go(f)}}function My(t,n){const o=n.query?t(n.query):"";return n.path+(o&&"?")+o+(n.hash||"")}function Vc(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function Py(t,n,o){const l=n.matched.length-1,c=o.matched.length-1;return l>-1&&l===c&&Ss(n.matched[l],o.matched[c])&&hp(n.params,o.params)&&t(n.query)===t(o.query)&&n.hash===o.hash}function Ss(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function hp(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const o in t)if(!By(t[o],n[o]))return!1;return!0}function By(t,n){return cn(t)?Hc(t,n):cn(n)?Hc(n,t):t===n}function Hc(t,n){return cn(n)?t.length===n.length&&t.every((o,l)=>o===n[l]):t.length===1&&t[0]===n}function Sy(t,n){if(t.startsWith("/"))return t;if(!t)return n;const o=n.split("/"),l=t.split("/"),c=l[l.length-1];(c===".."||c===".")&&l.push("");let p=o.length-1,f,y;for(f=0;f<l.length;f++)if(y=l[f],y!==".")if(y==="..")p>1&&p--;else break;return o.slice(0,p).join("/")+"/"+l.slice(f).join("/")}const lr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var $o;(function(t){t.pop="pop",t.push="push"})($o||($o={}));var To;(function(t){t.back="back",t.forward="forward",t.unknown=""})(To||(To={}));function Ay(t){if(!t)if(Cs){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Ey(t)}const Ty=/^[^#]+#/;function Dy(t,n){return t.replace(Ty,"#")+n}function Ry(t,n){const o=document.documentElement.getBoundingClientRect(),l=t.getBoundingClientRect();return{behavior:n.behavior,left:l.left-o.left-(n.left||0),top:l.top-o.top-(n.top||0)}}const Sl=()=>({left:window.scrollX,top:window.scrollY});function Oy(t){let n;if("el"in t){const o=t.el,l=typeof o=="string"&&o.startsWith("#"),c=typeof o=="string"?l?document.getElementById(o.slice(1)):document.querySelector(o):o;if(!c)return;n=Ry(c,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function Zc(t,n){return(history.state?history.state.position-n:-1)+t}const hh=new Map;function Iy(t,n){hh.set(t,n)}function Fy(t){const n=hh.get(t);return hh.delete(t),n}let Ny=()=>location.protocol+"//"+location.host;function cp(t,n){const{pathname:o,search:l,hash:c}=n,p=t.indexOf("#");if(p>-1){let y=c.includes(t.slice(p))?t.slice(p).length:1,v=c.slice(y);return v[0]!=="/"&&(v="/"+v),Vc(v,"")}return Vc(o,t)+l+c}function zy(t,n,o,l){let c=[],p=[],f=null;const y=({state:O})=>{const z=cp(t,location),K=o.value,q=n.value;let X=0;if(O){if(o.value=z,n.value=O,f&&f===K){f=null;return}X=q?O.position-q.position:0}else l(z);c.forEach(ht=>{ht(o.value,K,{delta:X,type:$o.pop,direction:X?X>0?To.forward:To.back:To.unknown})})};function v(){f=o.value}function M(O){c.push(O);const z=()=>{const K=c.indexOf(O);K>-1&&c.splice(K,1)};return p.push(z),z}function k(){const{history:O}=window;O.state&&O.replaceState(Be({},O.state,{scroll:Sl()}),"")}function E(){for(const O of p)O();p=[],window.removeEventListener("popstate",y),window.removeEventListener("beforeunload",k)}return window.addEventListener("popstate",y),window.addEventListener("beforeunload",k,{passive:!0}),{pauseListeners:v,listen:M,destroy:E}}function qc(t,n,o,l=!1,c=!1){return{back:t,current:n,forward:o,replaced:l,position:window.history.length,scroll:c?Sl():null}}function jy(t){const{history:n,location:o}=window,l={value:cp(t,o)},c={value:n.state};c.value||p(l.value,{back:null,current:l.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function p(v,M,k){const E=t.indexOf("#"),O=E>-1?(o.host&&document.querySelector("base")?t:t.slice(E))+v:Ny()+t+v;try{n[k?"replaceState":"pushState"](M,"",O),c.value=M}catch(z){console.error(z),o[k?"replace":"assign"](O)}}function f(v,M){const k=Be({},n.state,qc(c.value.back,v,c.value.forward,!0),M,{position:c.value.position});p(v,k,!0),l.value=v}function y(v,M){const k=Be({},c.value,n.state,{forward:v,scroll:Sl()});p(k.current,k,!0);const E=Be({},qc(l.value,v,null),{position:k.position+1},M);p(v,E,!1),l.value=v}return{location:l,state:c,push:y,replace:f}}function Uy(t){t=Ay(t);const n=jy(t),o=zy(t,n.state,n.location,n.replace);function l(p,f=!0){f||o.pauseListeners(),history.go(p)}const c=Be({location:"",base:t,go:l,createHref:Dy.bind(null,t)},n,o);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>n.state.value}),c}function Gy(t){return typeof t=="string"||t&&typeof t=="object"}function dp(t){return typeof t=="string"||typeof t=="symbol"}const fp=Symbol("");var Kc;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Kc||(Kc={}));function As(t,n){return Be(new Error,{type:t,[fp]:!0},n)}function Gn(t,n){return t instanceof Error&&fp in t&&(n==null||!!(t.type&n))}const Wc="[^/]+?",$y={sensitive:!1,strict:!1,start:!0,end:!0},Vy=/[.+*?^${}()[\]/\\]/g;function Hy(t,n){const o=Be({},$y,n),l=[];let c=o.start?"^":"";const p=[];for(const M of t){const k=M.length?[]:[90];o.strict&&!M.length&&(c+="/");for(let E=0;E<M.length;E++){const O=M[E];let z=40+(o.sensitive?.25:0);if(O.type===0)E||(c+="/"),c+=O.value.replace(Vy,"\\$&"),z+=40;else if(O.type===1){const{value:K,repeatable:q,optional:X,regexp:ht}=O;p.push({name:K,repeatable:q,optional:X});const gt=ht||Wc;if(gt!==Wc){z+=10;try{new RegExp(`(${gt})`)}catch(wt){throw new Error(`Invalid custom RegExp for param "${K}" (${gt}): `+wt.message)}}let pt=q?`((?:${gt})(?:/(?:${gt}))*)`:`(${gt})`;E||(pt=X&&M.length<2?`(?:/${pt})`:"/"+pt),X&&(pt+="?"),c+=pt,z+=20,X&&(z+=-8),q&&(z+=-20),gt===".*"&&(z+=-50)}k.push(z)}l.push(k)}if(o.strict&&o.end){const M=l.length-1;l[M][l[M].length-1]+=.7000000000000001}o.strict||(c+="/?"),o.end?c+="$":o.strict&&!c.endsWith("/")&&(c+="(?:/|$)");const f=new RegExp(c,o.sensitive?"":"i");function y(M){const k=M.match(f),E={};if(!k)return null;for(let O=1;O<k.length;O++){const z=k[O]||"",K=p[O-1];E[K.name]=z&&K.repeatable?z.split("/"):z}return E}function v(M){let k="",E=!1;for(const O of t){(!E||!k.endsWith("/"))&&(k+="/"),E=!1;for(const z of O)if(z.type===0)k+=z.value;else if(z.type===1){const{value:K,repeatable:q,optional:X}=z,ht=K in M?M[K]:"";if(cn(ht)&&!q)throw new Error(`Provided param "${K}" is an array but it is not repeatable (* or + modifiers)`);const gt=cn(ht)?ht.join("/"):ht;if(!gt)if(X)O.length<2&&(k.endsWith("/")?k=k.slice(0,-1):E=!0);else throw new Error(`Missing required param "${K}"`);k+=gt}}return k||"/"}return{re:f,score:l,keys:p,parse:y,stringify:v}}function Zy(t,n){let o=0;for(;o<t.length&&o<n.length;){const l=n[o]-t[o];if(l)return l;o++}return t.length<n.length?t.length===1&&t[0]===80?-1:1:t.length>n.length?n.length===1&&n[0]===80?1:-1:0}function pp(t,n){let o=0;const l=t.score,c=n.score;for(;o<l.length&&o<c.length;){const p=Zy(l[o],c[o]);if(p)return p;o++}if(Math.abs(c.length-l.length)===1){if(Jc(l))return 1;if(Jc(c))return-1}return c.length-l.length}function Jc(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const qy={type:0,value:""},Ky=/[a-zA-Z0-9_]/;function Wy(t){if(!t)return[[]];if(t==="/")return[[qy]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(z){throw new Error(`ERR (${o})/"${M}": ${z}`)}let o=0,l=o;const c=[];let p;function f(){p&&c.push(p),p=[]}let y=0,v,M="",k="";function E(){M&&(o===0?p.push({type:0,value:M}):o===1||o===2||o===3?(p.length>1&&(v==="*"||v==="+")&&n(`A repeatable param (${M}) must be alone in its segment. eg: '/:ids+.`),p.push({type:1,value:M,regexp:k,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):n("Invalid state to consume buffer"),M="")}function O(){M+=v}for(;y<t.length;){if(v=t[y++],v==="\\"&&o!==2){l=o,o=4;continue}switch(o){case 0:v==="/"?(M&&E(),f()):v===":"?(E(),o=1):O();break;case 4:O(),o=l;break;case 1:v==="("?o=2:Ky.test(v)?O():(E(),o=0,v!=="*"&&v!=="?"&&v!=="+"&&y--);break;case 2:v===")"?k[k.length-1]=="\\"?k=k.slice(0,-1)+v:o=3:k+=v;break;case 3:E(),o=0,v!=="*"&&v!=="?"&&v!=="+"&&y--,k="";break;default:n("Unknown state");break}}return o===2&&n(`Unfinished custom RegExp for param "${M}"`),E(),f(),c}function Jy(t,n,o){const l=Hy(Wy(t.path),o),c=Be(l,{record:t,parent:n,children:[],alias:[]});return n&&!c.record.aliasOf==!n.record.aliasOf&&n.children.push(c),c}function Yy(t,n){const o=[],l=new Map;n=td({strict:!1,end:!0,sensitive:!1},n);function c(E){return l.get(E)}function p(E,O,z){const K=!z,q=Xc(E);q.aliasOf=z&&z.record;const X=td(n,E),ht=[q];if("alias"in E){const wt=typeof E.alias=="string"?[E.alias]:E.alias;for(const ut of wt)ht.push(Xc(Be({},q,{components:z?z.record.components:q.components,path:ut,aliasOf:z?z.record:q})))}let gt,pt;for(const wt of ht){const{path:ut}=wt;if(O&&ut[0]!=="/"){const Pt=O.record.path,Et=Pt[Pt.length-1]==="/"?"":"/";wt.path=O.record.path+(ut&&Et+ut)}if(gt=Jy(wt,O,X),z?z.alias.push(gt):(pt=pt||gt,pt!==gt&&pt.alias.push(gt),K&&E.name&&!Qc(gt)&&f(E.name)),mp(gt)&&v(gt),q.children){const Pt=q.children;for(let Et=0;Et<Pt.length;Et++)p(Pt[Et],gt,z&&z.children[Et])}z=z||gt}return pt?()=>{f(pt)}:Ao}function f(E){if(dp(E)){const O=l.get(E);O&&(l.delete(E),o.splice(o.indexOf(O),1),O.children.forEach(f),O.alias.forEach(f))}else{const O=o.indexOf(E);O>-1&&(o.splice(O,1),E.record.name&&l.delete(E.record.name),E.children.forEach(f),E.alias.forEach(f))}}function y(){return o}function v(E){const O=tv(E,o);o.splice(O,0,E),E.record.name&&!Qc(E)&&l.set(E.record.name,E)}function M(E,O){let z,K={},q,X;if("name"in E&&E.name){if(z=l.get(E.name),!z)throw As(1,{location:E});X=z.record.name,K=Be(Yc(O.params,z.keys.filter(pt=>!pt.optional).concat(z.parent?z.parent.keys.filter(pt=>pt.optional):[]).map(pt=>pt.name)),E.params&&Yc(E.params,z.keys.map(pt=>pt.name))),q=z.stringify(K)}else if(E.path!=null)q=E.path,z=o.find(pt=>pt.re.test(q)),z&&(K=z.parse(q),X=z.record.name);else{if(z=O.name?l.get(O.name):o.find(pt=>pt.re.test(O.path)),!z)throw As(1,{location:E,currentLocation:O});X=z.record.name,K=Be({},O.params,E.params),q=z.stringify(K)}const ht=[];let gt=z;for(;gt;)ht.unshift(gt.record),gt=gt.parent;return{name:X,path:q,params:K,matched:ht,meta:Qy(ht)}}t.forEach(E=>p(E));function k(){o.length=0,l.clear()}return{addRoute:p,resolve:M,removeRoute:f,clearRoutes:k,getRoutes:y,getRecordMatcher:c}}function Yc(t,n){const o={};for(const l of n)l in t&&(o[l]=t[l]);return o}function Xc(t){const n={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Xy(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function Xy(t){const n={},o=t.props||!1;if("component"in t)n.default=o;else for(const l in t.components)n[l]=typeof o=="object"?o[l]:o;return n}function Qc(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Qy(t){return t.reduce((n,o)=>Be(n,o.meta),{})}function td(t,n){const o={};for(const l in t)o[l]=l in n?n[l]:t[l];return o}function tv(t,n){let o=0,l=n.length;for(;o!==l;){const p=o+l>>1;pp(t,n[p])<0?l=p:o=p+1}const c=ev(t);return c&&(l=n.lastIndexOf(c,l-1)),l}function ev(t){let n=t;for(;n=n.parent;)if(mp(n)&&pp(t,n)===0)return n}function mp({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function iv(t){const n={};if(t===""||t==="?")return n;const l=(t[0]==="?"?t.slice(1):t).split("&");for(let c=0;c<l.length;++c){const p=l[c].replace(op," "),f=p.indexOf("="),y=Go(f<0?p:p.slice(0,f)),v=f<0?null:Go(p.slice(f+1));if(y in n){let M=n[y];cn(M)||(M=n[y]=[M]),M.push(v)}else n[y]=v}return n}function ed(t){let n="";for(let o in t){const l=t[o];if(o=wy(o),l==null){l!==void 0&&(n+=(n.length?"&":"")+o);continue}(cn(l)?l.map(p=>p&&uh(p)):[l&&uh(l)]).forEach(p=>{p!==void 0&&(n+=(n.length?"&":"")+o,p!=null&&(n+="="+p))})}return n}function nv(t){const n={};for(const o in t){const l=t[o];l!==void 0&&(n[o]=cn(l)?l.map(c=>c==null?null:""+c):l==null?l:""+l)}return n}const rv=Symbol(""),id=Symbol(""),Al=Symbol(""),Nh=Symbol(""),ch=Symbol("");function vo(){let t=[];function n(l){return t.push(l),()=>{const c=t.indexOf(l);c>-1&&t.splice(c,1)}}function o(){t=[]}return{add:n,list:()=>t.slice(),reset:o}}function dr(t,n,o,l,c,p=f=>f()){const f=l&&(l.enterCallbacks[c]=l.enterCallbacks[c]||[]);return()=>new Promise((y,v)=>{const M=O=>{O===!1?v(As(4,{from:o,to:n})):O instanceof Error?v(O):Gy(O)?v(As(2,{from:n,to:O})):(f&&l.enterCallbacks[c]===f&&typeof O=="function"&&f.push(O),y())},k=p(()=>t.call(l&&l.instances[c],n,o,M));let E=Promise.resolve(k);t.length<3&&(E=E.then(M)),E.catch(O=>v(O))})}function Gu(t,n,o,l,c=p=>p()){const p=[];for(const f of t)for(const y in f.components){let v=f.components[y];if(!(n!=="beforeRouteEnter"&&!f.instances[y]))if(rp(v)){const k=(v.__vccOpts||v)[n];k&&p.push(dr(k,o,l,f,y,c))}else{let M=v();p.push(()=>M.then(k=>{if(!k)throw new Error(`Couldn't resolve component "${y}" at "${f.path}"`);const E=cy(k)?k.default:k;f.mods[y]=k,f.components[y]=E;const z=(E.__vccOpts||E)[n];return z&&dr(z,o,l,f,y,c)()}))}}return p}function nd(t){const n=en(Al),o=en(Nh),l=Te(()=>{const v=Ti(t.to);return n.resolve(v)}),c=Te(()=>{const{matched:v}=l.value,{length:M}=v,k=v[M-1],E=o.matched;if(!k||!E.length)return-1;const O=E.findIndex(Ss.bind(null,k));if(O>-1)return O;const z=rd(v[M-2]);return M>1&&rd(k)===z&&E[E.length-1].path!==z?E.findIndex(Ss.bind(null,v[M-2])):O}),p=Te(()=>c.value>-1&&lv(o.params,l.value.params)),f=Te(()=>c.value>-1&&c.value===o.matched.length-1&&hp(o.params,l.value.params));function y(v={}){if(av(v)){const M=n[Ti(t.replace)?"replace":"push"](Ti(t.to)).catch(Ao);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>M),M}return Promise.resolve()}return{route:l,href:Te(()=>l.value.href),isActive:p,isExactActive:f,navigate:y}}function sv(t){return t.length===1?t[0]:t}const ov=dn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:nd,setup(t,{slots:n}){const o=Kn(nd(t)),{options:l}=en(Al),c=Te(()=>({[sd(t.activeClass,l.linkActiveClass,"router-link-active")]:o.isActive,[sd(t.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive}));return()=>{const p=n.default&&sv(n.default(o));return t.custom?p:kf("a",{"aria-current":o.isExactActive?t.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:c.value},p)}}}),Ka=ov;function av(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function lv(t,n){for(const o in n){const l=n[o],c=t[o];if(typeof l=="string"){if(l!==c)return!1}else if(!cn(c)||c.length!==l.length||l.some((p,f)=>p!==c[f]))return!1}return!0}function rd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const sd=(t,n,o)=>t??n??o,uv=dn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:o}){const l=en(ch),c=Te(()=>t.route||l.value),p=en(id,0),f=Te(()=>{let M=Ti(p);const{matched:k}=c.value;let E;for(;(E=k[M])&&!E.components;)M++;return M}),y=Te(()=>c.value.matched[f.value]);Ua(id,Te(()=>f.value+1)),Ua(rv,y),Ua(ch,c);const v=ie();return _r(()=>[v.value,y.value,t.name],([M,k,E],[O,z,K])=>{k&&(k.instances[E]=M,z&&z!==k&&M&&M===O&&(k.leaveGuards.size||(k.leaveGuards=z.leaveGuards),k.updateGuards.size||(k.updateGuards=z.updateGuards))),M&&k&&(!z||!Ss(k,z)||!O)&&(k.enterCallbacks[E]||[]).forEach(q=>q(M))},{flush:"post"}),()=>{const M=c.value,k=t.name,E=y.value,O=E&&E.components[k];if(!O)return od(o.default,{Component:O,route:M});const z=E.props[k],K=z?z===!0?M.params:typeof z=="function"?z(M):z:null,X=kf(O,Be({},K,n,{onVnodeUnmounted:ht=>{ht.component.isUnmounted&&(E.instances[k]=null)},ref:v}));return od(o.default,{Component:X,route:M})||X}}});function od(t,n){if(!t)return null;const o=t(n);return o.length===1?o[0]:o}const gp=uv;function hv(t){const n=Yy(t.routes,t),o=t.parseQuery||iv,l=t.stringifyQuery||ed,c=t.history,p=vo(),f=vo(),y=vo(),v=Om(lr);let M=lr;Cs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const k=ju.bind(null,dt=>""+dt),E=ju.bind(null,Cy),O=ju.bind(null,Go);function z(dt,Dt){let Tt,Ut;return dp(dt)?(Tt=n.getRecordMatcher(dt),Ut=Dt):Ut=dt,n.addRoute(Ut,Tt)}function K(dt){const Dt=n.getRecordMatcher(dt);Dt&&n.removeRoute(Dt)}function q(){return n.getRoutes().map(dt=>dt.record)}function X(dt){return!!n.getRecordMatcher(dt)}function ht(dt,Dt){if(Dt=Be({},Dt||v.value),typeof dt=="string"){const Q=Uu(o,dt,Dt.path),mt=n.resolve({path:Q.path},Dt),yt=c.createHref(Q.fullPath);return Be(Q,mt,{params:O(mt.params),hash:Go(Q.hash),redirectedFrom:void 0,href:yt})}let Tt;if(dt.path!=null)Tt=Be({},dt,{path:Uu(o,dt.path,Dt.path).path});else{const Q=Be({},dt.params);for(const mt in Q)Q[mt]==null&&delete Q[mt];Tt=Be({},dt,{params:E(Q)}),Dt.params=E(Dt.params)}const Ut=n.resolve(Tt,Dt),_e=dt.hash||"";Ut.params=k(O(Ut.params));const j=My(l,Be({},dt,{hash:xy(_e),path:Ut.path})),G=c.createHref(j);return Be({fullPath:j,hash:_e,query:l===ed?nv(dt.query):dt.query||{}},Ut,{redirectedFrom:void 0,href:G})}function gt(dt){return typeof dt=="string"?Uu(o,dt,v.value.path):Be({},dt)}function pt(dt,Dt){if(M!==dt)return As(8,{from:Dt,to:dt})}function wt(dt){return Et(dt)}function ut(dt){return wt(Be(gt(dt),{replace:!0}))}function Pt(dt){const Dt=dt.matched[dt.matched.length-1];if(Dt&&Dt.redirect){const{redirect:Tt}=Dt;let Ut=typeof Tt=="function"?Tt(dt):Tt;return typeof Ut=="string"&&(Ut=Ut.includes("?")||Ut.includes("#")?Ut=gt(Ut):{path:Ut},Ut.params={}),Be({query:dt.query,hash:dt.hash,params:Ut.path!=null?{}:dt.params},Ut)}}function Et(dt,Dt){const Tt=M=ht(dt),Ut=v.value,_e=dt.state,j=dt.force,G=dt.replace===!0,Q=Pt(Tt);if(Q)return Et(Be(gt(Q),{state:typeof Q=="object"?Be({},_e,Q.state):_e,force:j,replace:G}),Dt||Tt);const mt=Tt;mt.redirectedFrom=Dt;let yt;return!j&&Py(l,Ut,Tt)&&(yt=As(16,{to:mt,from:Ut}),se(Ut,Ut,!0,!1)),(yt?Promise.resolve(yt):Rt(mt,Ut)).catch(ft=>Gn(ft)?Gn(ft,2)?ft:jt(ft):At(ft,mt,Ut)).then(ft=>{if(ft){if(Gn(ft,2))return Et(Be({replace:G},gt(ft.to),{state:typeof ft.to=="object"?Be({},_e,ft.to.state):_e,force:j}),Dt||mt)}else ft=ge(mt,Ut,!0,G,_e);return Ot(mt,Ut,ft),ft})}function Ht(dt,Dt){const Tt=pt(dt,Dt);return Tt?Promise.reject(Tt):Promise.resolve()}function Ct(dt){const Dt=ve.values().next().value;return Dt&&typeof Dt.runWithContext=="function"?Dt.runWithContext(dt):dt()}function Rt(dt,Dt){let Tt;const[Ut,_e,j]=cv(dt,Dt);Tt=Gu(Ut.reverse(),"beforeRouteLeave",dt,Dt);for(const Q of Ut)Q.leaveGuards.forEach(mt=>{Tt.push(dr(mt,dt,Dt))});const G=Ht.bind(null,dt,Dt);return Tt.push(G),Kt(Tt).then(()=>{Tt=[];for(const Q of p.list())Tt.push(dr(Q,dt,Dt));return Tt.push(G),Kt(Tt)}).then(()=>{Tt=Gu(_e,"beforeRouteUpdate",dt,Dt);for(const Q of _e)Q.updateGuards.forEach(mt=>{Tt.push(dr(mt,dt,Dt))});return Tt.push(G),Kt(Tt)}).then(()=>{Tt=[];for(const Q of j)if(Q.beforeEnter)if(cn(Q.beforeEnter))for(const mt of Q.beforeEnter)Tt.push(dr(mt,dt,Dt));else Tt.push(dr(Q.beforeEnter,dt,Dt));return Tt.push(G),Kt(Tt)}).then(()=>(dt.matched.forEach(Q=>Q.enterCallbacks={}),Tt=Gu(j,"beforeRouteEnter",dt,Dt,Ct),Tt.push(G),Kt(Tt))).then(()=>{Tt=[];for(const Q of f.list())Tt.push(dr(Q,dt,Dt));return Tt.push(G),Kt(Tt)}).catch(Q=>Gn(Q,8)?Q:Promise.reject(Q))}function Ot(dt,Dt,Tt){y.list().forEach(Ut=>Ct(()=>Ut(dt,Dt,Tt)))}function ge(dt,Dt,Tt,Ut,_e){const j=pt(dt,Dt);if(j)return j;const G=Dt===lr,Q=Cs?history.state:{};Tt&&(Ut||G?c.replace(dt.fullPath,Be({scroll:G&&Q&&Q.scroll},_e)):c.push(dt.fullPath,_e)),v.value=dt,se(dt,Dt,Tt,G),jt()}let $e;function De(){$e||($e=c.listen((dt,Dt,Tt)=>{if(!fe.listening)return;const Ut=ht(dt),_e=Pt(Ut);if(_e){Et(Be(_e,{replace:!0,force:!0}),Ut).catch(Ao);return}M=Ut;const j=v.value;Cs&&Iy(Zc(j.fullPath,Tt.delta),Sl()),Rt(Ut,j).catch(G=>Gn(G,12)?G:Gn(G,2)?(Et(Be(gt(G.to),{force:!0}),Ut).then(Q=>{Gn(Q,20)&&!Tt.delta&&Tt.type===$o.pop&&c.go(-1,!1)}).catch(Ao),Promise.reject()):(Tt.delta&&c.go(-Tt.delta,!1),At(G,Ut,j))).then(G=>{G=G||ge(Ut,j,!1),G&&(Tt.delta&&!Gn(G,8)?c.go(-Tt.delta,!1):Tt.type===$o.pop&&Gn(G,20)&&c.go(-1,!1)),Ot(Ut,j,G)}).catch(Ao)}))}let _t=vo(),ot=vo(),$t;function At(dt,Dt,Tt){jt(dt);const Ut=ot.list();return Ut.length?Ut.forEach(_e=>_e(dt,Dt,Tt)):console.error(dt),Promise.reject(dt)}function Ve(){return $t&&v.value!==lr?Promise.resolve():new Promise((dt,Dt)=>{_t.add([dt,Dt])})}function jt(dt){return $t||($t=!dt,De(),_t.list().forEach(([Dt,Tt])=>dt?Tt(dt):Dt()),_t.reset()),dt}function se(dt,Dt,Tt,Ut){const{scrollBehavior:_e}=t;if(!Cs||!_e)return Promise.resolve();const j=!Tt&&Fy(Zc(dt.fullPath,0))||(Ut||!Tt)&&history.state&&history.state.scroll||null;return yl().then(()=>_e(dt,Dt,j)).then(G=>G&&Oy(G)).catch(G=>At(G,dt,Dt))}const Bt=dt=>c.go(dt);let Ee;const ve=new Set,fe={currentRoute:v,listening:!0,addRoute:z,removeRoute:K,clearRoutes:n.clearRoutes,hasRoute:X,getRoutes:q,resolve:ht,options:t,push:wt,replace:ut,go:Bt,back:()=>Bt(-1),forward:()=>Bt(1),beforeEach:p.add,beforeResolve:f.add,afterEach:y.add,onError:ot.add,isReady:Ve,install(dt){const Dt=this;dt.component("RouterLink",Ka),dt.component("RouterView",gp),dt.config.globalProperties.$router=Dt,Object.defineProperty(dt.config.globalProperties,"$route",{enumerable:!0,get:()=>Ti(v)}),Cs&&!Ee&&v.value===lr&&(Ee=!0,wt(c.location).catch(_e=>{}));const Tt={};for(const _e in lr)Object.defineProperty(Tt,_e,{get:()=>v.value[_e],enumerable:!0});dt.provide(Al,Dt),dt.provide(Nh,Vd(Tt)),dt.provide(ch,v);const Ut=dt.unmount;ve.add(dt),dt.unmount=function(){ve.delete(dt),ve.size<1&&(M=lr,$e&&$e(),$e=null,v.value=lr,Ee=!1,$t=!1),Ut()}}};function Kt(dt){return dt.reduce((Dt,Tt)=>Dt.then(()=>Ct(Tt)),Promise.resolve())}return fe}function cv(t,n){const o=[],l=[],c=[],p=Math.max(n.matched.length,t.matched.length);for(let f=0;f<p;f++){const y=n.matched[f];y&&(t.matched.find(M=>Ss(M,y))?l.push(y):o.push(y));const v=t.matched[f];v&&(n.matched.find(M=>Ss(M,v))||c.push(v))}return[o,l,c]}function zh(){return en(Al)}function U3(t){return en(Nh)}var Zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dv(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var yp=dv,fv=typeof Zn=="object"&&Zn&&Zn.Object===Object&&Zn,pv=fv,mv=pv,gv=typeof self=="object"&&self&&self.Object===Object&&self,_v=mv||gv||Function("return this")(),vp=_v,yv=vp,vv=function(){return yv.Date.now()},bv=vv,xv=/\s/;function wv(t){for(var n=t.length;n--&&xv.test(t.charAt(n)););return n}var Lv=wv,Cv=Lv,kv=/^\s+/;function Ev(t){return t&&t.slice(0,Cv(t)+1).replace(kv,"")}var Mv=Ev,Pv=vp,Bv=Pv.Symbol,bp=Bv,ad=bp,xp=Object.prototype,Sv=xp.hasOwnProperty,Av=xp.toString,bo=ad?ad.toStringTag:void 0;function Tv(t){var n=Sv.call(t,bo),o=t[bo];try{t[bo]=void 0;var l=!0}catch{}var c=Av.call(t);return l&&(n?t[bo]=o:delete t[bo]),c}var Dv=Tv,Rv=Object.prototype,Ov=Rv.toString;function Iv(t){return Ov.call(t)}var Fv=Iv,ld=bp,Nv=Dv,zv=Fv,jv="[object Null]",Uv="[object Undefined]",ud=ld?ld.toStringTag:void 0;function Gv(t){return t==null?t===void 0?Uv:jv:ud&&ud in Object(t)?Nv(t):zv(t)}var $v=Gv;function Vv(t){return t!=null&&typeof t=="object"}var Hv=Vv,Zv=$v,qv=Hv,Kv="[object Symbol]";function Wv(t){return typeof t=="symbol"||qv(t)&&Zv(t)==Kv}var Jv=Wv,Yv=Mv,hd=yp,Xv=Jv,cd=NaN,Qv=/^[-+]0x[0-9a-f]+$/i,t4=/^0b[01]+$/i,e4=/^0o[0-7]+$/i,i4=parseInt;function n4(t){if(typeof t=="number")return t;if(Xv(t))return cd;if(hd(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=hd(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Yv(t);var o=t4.test(t);return o||e4.test(t)?i4(t.slice(2),o?2:8):Qv.test(t)?cd:+t}var r4=n4,s4=yp,$u=bv,dd=r4,o4="Expected a function",a4=Math.max,l4=Math.min;function u4(t,n,o){var l,c,p,f,y,v,M=0,k=!1,E=!1,O=!0;if(typeof t!="function")throw new TypeError(o4);n=dd(n)||0,s4(o)&&(k=!!o.leading,E="maxWait"in o,p=E?a4(dd(o.maxWait)||0,n):p,O="trailing"in o?!!o.trailing:O);function z(Pt){var Et=l,Ht=c;return l=c=void 0,M=Pt,f=t.apply(Ht,Et),f}function K(Pt){return M=Pt,y=setTimeout(ht,n),k?z(Pt):f}function q(Pt){var Et=Pt-v,Ht=Pt-M,Ct=n-Et;return E?l4(Ct,p-Ht):Ct}function X(Pt){var Et=Pt-v,Ht=Pt-M;return v===void 0||Et>=n||Et<0||E&&Ht>=p}function ht(){var Pt=$u();if(X(Pt))return gt(Pt);y=setTimeout(ht,q(Pt))}function gt(Pt){return y=void 0,O&&l?z(Pt):(l=c=void 0,f)}function pt(){y!==void 0&&clearTimeout(y),M=0,l=v=c=y=void 0}function wt(){return y===void 0?f:gt($u())}function ut(){var Pt=$u(),Et=X(Pt);if(l=arguments,c=this,v=Pt,Et){if(y===void 0)return K(v);if(E)return clearTimeout(y),y=setTimeout(ht,n),z(v)}return y===void 0&&(y=setTimeout(ht,n)),f}return ut.cancel=pt,ut.flush=wt,ut}var h4=u4;const c4=_p(h4),d4={class:"relative"},f4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},p4=["onClick"],m4=dn({__name:"SearchBar",emits:["select-location"],setup(t,{emit:n}){const o=ie(""),l=ie([]),c=n,p=c4(async v=>{if(v.length<3){l.value=[];return}try{const k=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(v)}`)).json();l.value=k}catch(M){console.error("Erreur lors de la recherche d'adresse:",M),l.value=[]}},300);function f(){p(o.value)}function y(v){o.value=v.display_name,l.value=[],c("select-location",{lat:parseFloat(v.lat),lng:parseFloat(v.lon)})}return(v,M)=>(qt(),Qt("div",d4,[ke(F("input",{"onUpdate:modelValue":M[0]||(M[0]=k=>o.value=k),onInput:f,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Fe,o.value]]),l.value.length>0?(qt(),Qt("div",f4,[(qt(!0),Qt(ri,null,Mn(l.value,k=>(qt(),Qt("div",{key:k.place_id,onClick:E=>y(k),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},ce(k.display_name),9,p4))),128))])):Ae("",!0)]))}}),wp=(t,n)=>{const o=t.__vccOpts||t;for(const[l,c]of n)o[l]=c;return o},g4=wp(m4,[["__scopeId","data-v-4cda7c14"]]),_4={class:"h-screen flex flex-col overflow-hidden"},y4={key:0,class:"bg-white shadow-sm z-[2000]"},v4={class:"mx-auto px-4 sm:px-6 lg:px-8"},b4={class:"flex h-16 items-center justify-between"},x4={class:"flex items-center space-x-8"},w4={class:"hidden md:flex space-x-6"},L4={class:"flex-1 max-w-2xl mx-8"},C4={class:"flex items-center space-x-4"},k4={class:"relative"},E4={class:"flex flex-col items-end"},M4={class:"text-sm font-medium text-gray-700"},P4={key:0,class:"text-xs text-gray-500"},B4=["src","alt"],S4={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},A4={class:"flex-1 overflow-hidden"},T4=dn({__name:"App",setup(t){const n=zh(),o=Jn(),l=ie(!1),c=Te(()=>{const q=o.user;return q!=null&&q.first_name&&(q!=null&&q.last_name)?`${q.first_name} ${q.last_name.toUpperCase()}`:(q==null?void 0:q.username)||""}),p=Te(()=>{var X;const q=(X=o.user)==null?void 0:X.user_type;switch(console.log("User type:",q),q){case"admin":return"Accs administrateur";case"dealer":return"Accs concessionnaire";case"client":return"Accs client";default:return""}}),f=Te(()=>{var q;return((q=o.user)==null?void 0:q.user_type)==="admin"}),y=ie(""),v=Te(()=>o.isAuthenticated),M=[{name:"Carte",to:"/"},{name:"Projets",to:"/projects"}],k=Te(()=>v.value?f.value?[...M,{name:"Utilisateurs",to:"/users"}]:M:[]),E=Te(()=>v.value?[{name:"Mon profil",to:"/profile"},{name:"Paramtres",to:"/settings"}]:[]);async function O(){try{await o.logout(),n.push("/login")}catch(q){console.error("Erreur lors de la dconnexion:",q)}}function z(q){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:q.lat,lng:q.lng,zoom:16}}))}Ds(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await o.checkAuth(),await o.fetchUserProfile()):console.log("No token found")}catch(q){console.error("Auth check error:",q),n.push("/login")}});const K=Te(()=>{const q="IrrigationDesign";if(!v.value)return`${q} - Connexion`;const X=n.currentRoute.value,gt={home:"Carte",projects:"Projets",users:"Utilisateurs",profile:"Mon profil",settings:"Paramtres",selectDealer:"Slection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[X.name]||"";return gt?`${q} - ${gt}`:q});return _r(K,q=>{document.title=q},{immediate:!0}),(q,X)=>(qt(),Qt("div",_4,[v.value?(qt(),Qt("header",y4,[F("nav",v4,[F("div",b4,[F("div",x4,[si(Ti(Ka),{to:"/",class:"text-xl font-semibold text-primary-600"},{default:Eo(()=>X[2]||(X[2]=[hn(" IrrigationDesign ")])),_:1}),F("div",w4,[(qt(!0),Qt(ri,null,Mn(k.value,ht=>(qt(),Fo(Ti(Ka),{key:ht.name,to:ht.to,class:yr(["text-sm font-medium transition-colors duration-200",[q.$route.path===ht.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Eo(()=>[hn(ce(ht.name),1)]),_:2},1032,["to","class"]))),128))])]),F("div",L4,[si(g4,{onSelectLocation:z})]),F("div",C4,[X[3]||(X[3]=F("button",{class:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[F("span",{class:"sr-only"},"Voir les notifications"),F("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[F("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),F("div",k4,[F("button",{onClick:X[0]||(X[0]=ht=>l.value=!l.value),class:"flex items-center space-x-3 focus:outline-none"},[F("div",E4,[F("span",M4,ce(c.value),1),p.value?(qt(),Qt("span",P4,ce(p.value),1)):Ae("",!0)]),F("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:y.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(c.value),alt:c.value},null,8,B4)]),l.value?(qt(),Qt("div",S4,[(qt(!0),Qt(ri,null,Mn(E.value,ht=>(qt(),Fo(Ti(Ka),{key:ht.name,to:ht.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:X[1]||(X[1]=gt=>l.value=!1)},{default:Eo(()=>[hn(ce(ht.name),1)]),_:2},1032,["to"]))),128)),F("button",{onClick:O,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Dconnexion ")])):Ae("",!0)])])])])])):Ae("",!0),F("main",A4,[si(Ti(gp))])]))}}),D4="modulepreload",R4=function(t){return"/"+t},fd={},Fr=function(n,o,l){let c=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),y=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));c=Promise.allSettled(o.map(v=>{if(v=R4(v),v in fd)return;fd[v]=!0;const M=v.endsWith(".css"),k=M?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${k}`))return;const E=document.createElement("link");if(E.rel=M?"stylesheet":D4,M||(E.as="script"),E.crossOrigin="",E.href=v,y&&E.setAttribute("nonce",y),document.head.appendChild(E),M)return new Promise((O,z)=>{E.addEventListener("load",O),E.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${v}`)))})}))}function p(f){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=f,window.dispatchEvent(y),!y.defaultPrevented)throw f}return c.then(f=>{for(const y of f||[])y.status==="rejected"&&p(y.reason);return n().catch(p)})},O4={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},I4={class:"max-w-md w-full space-y-8"},F4={class:"space-y-4"},N4={class:"mt-1"},z4={class:"mt-1"},j4={class:"mt-1"},U4={key:0,class:"rounded-md bg-red-50 p-4"},G4={class:"flex"},$4={class:"ml-3"},V4={class:"text-sm font-medium text-red-800"},H4={key:1,class:"rounded-md bg-yellow-50 p-4"},Z4={class:"flex"},q4={class:"ml-3"},K4={class:"mt-2 text-sm text-yellow-700"},W4={class:"list-disc pl-5 space-y-1"},J4=["disabled"],Y4={class:"absolute left-0 inset-y-0 flex items-center pl-3"},X4={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Q4={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tb=dn({__name:"ChangePasswordForm",setup(t){const n=zh(),o=Jn(),l=Kn({oldPassword:"",newPassword:"",confirmPassword:""}),c=ie(!1),p=ie("");Ds(()=>{var M,k;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:o.isAuthenticated,userId:(M=o.user)==null?void 0:M.id,mustChangePassword:(k=o.user)==null?void 0:k.must_change_password})});const f=Te(()=>{const M=[];return l.newPassword&&l.newPassword.length<8&&M.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),l.newPassword&&l.confirmPassword&&l.newPassword!==l.confirmPassword&&M.push("Les mots de passe ne correspondent pas"),M}),y=Te(()=>l.oldPassword.length>0&&l.newPassword.length>=8&&l.newPassword===l.confirmPassword);async function v(){var M,k,E,O,z,K,q,X;if(!y.value){p.value="Veuillez corriger les erreurs avant de continuer";return}if(!((M=o.user)!=null&&M.id)){p.value="Erreur : utilisateur non identifi";return}c.value=!0,p.value="";try{console.log("Submitting password change..."),await o.changePassword(l.oldPassword,l.newPassword),console.log("Password changed successfully"),n.push("/")}catch(ht){console.error("Password change failed:",ht),(E=(k=ht.response)==null?void 0:k.data)!=null&&E.detail?p.value=ht.response.data.detail:(z=(O=ht.response)==null?void 0:O.data)!=null&&z.old_password?p.value=ht.response.data.old_password[0]:(q=(K=ht.response)==null?void 0:K.data)!=null&&q.password?p.value=ht.response.data.password[0]:((X=ht.response)==null?void 0:X.status)===401?(p.value="Session expire, veuillez vous reconnecter",await o.logout(),n.push("/login")):p.value="Une erreur est survenue lors du changement de mot de passe"}finally{c.value=!1}}return(M,k)=>(qt(),Qt("div",O4,[F("div",I4,[k[12]||(k[12]=F("div",null,[F("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),F("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),F("form",{class:"mt-8 space-y-6",onSubmit:Dh(v,["prevent"])},[F("div",F4,[F("div",null,[k[3]||(k[3]=F("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),F("div",N4,[ke(F("input",{id:"old-password","onUpdate:modelValue":k[0]||(k[0]=E=>l.oldPassword=E),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Fe,l.oldPassword]])])]),F("div",null,[k[4]||(k[4]=F("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),F("div",z4,[ke(F("input",{id:"new-password","onUpdate:modelValue":k[1]||(k[1]=E=>l.newPassword=E),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Fe,l.newPassword]])]),k[5]||(k[5]=F("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),F("div",null,[k[6]||(k[6]=F("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),F("div",j4,[ke(F("input",{id:"confirm-password","onUpdate:modelValue":k[2]||(k[2]=E=>l.confirmPassword=E),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Fe,l.confirmPassword]])])])]),p.value?(qt(),Qt("div",U4,[F("div",G4,[k[7]||(k[7]=F("div",{class:"flex-shrink-0"},[F("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[F("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),F("div",$4,[F("h3",V4,ce(p.value),1)])])])):Ae("",!0),f.value.length>0?(qt(),Qt("div",H4,[F("div",Z4,[k[9]||(k[9]=F("div",{class:"flex-shrink-0"},[F("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[F("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),F("div",q4,[k[8]||(k[8]=F("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),F("div",K4,[F("ul",W4,[(qt(!0),Qt(ri,null,Mn(f.value,(E,O)=>(qt(),Qt("li",{key:O},ce(E),1))),128))])])])])])):Ae("",!0),F("div",null,[F("button",{type:"submit",disabled:c.value||!y.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[F("span",Y4,[c.value?(qt(),Qt("svg",Q4,k[11]||(k[11]=[F("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),F("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(qt(),Qt("svg",X4,k[10]||(k[10]=[F("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),hn(" "+ce(c.value?"Modification en cours...":"Changer le mot de passe"),1)],8,J4)])],32)])]))}}),eb={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},ib={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},nb={class:"bg-white py-8 px-4 shadow-sm rounded-lg sm:px-10"},rb={key:0,class:"rounded-md bg-red-50 p-4"},sb={class:"flex"},ob={class:"ml-3"},ab={class:"text-sm font-medium text-red-800"},lb={class:"mt-1"},ub={class:"mt-1"},hb={class:"flex items-center justify-between"},cb={class:"flex items-center"},db={class:"text-sm"},fb=["disabled"],pb={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},mb=dn({__name:"LoginView",setup(t){const n=zh(),o=Jn(),l=ie(!1),c=ie(null),p=Kn({username:"",password:"",rememberMe:!1});Ds(()=>{var y;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(y=window.INITIAL_STATE)!=null&&y.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),n.push("/"))});async function f(){var y,v,M,k;console.log("Attempting login..."),l.value=!0,c.value=null;try{await o.login(p.username,p.password),console.log("Login successful, checking user type..."),(y=o.user)!=null&&y.must_change_password?(console.log("User must change password, redirecting..."),n.push("/change-password")):o.isClient&&!o.hasDealer?(console.log("Client without dealer, redirecting to dealer selection..."),n.push("/select-dealer")):(console.log("Normal login flow, redirecting to home..."),n.push("/"))}catch(E){console.error("Login error:",E),((v=E.response)==null?void 0:v.status)===401?c.value="Identifiants incorrects":(k=(M=E.response)==null?void 0:M.data)!=null&&k.detail?c.value=E.response.data.detail:c.value="Une erreur est survenue lors de la connexion"}finally{l.value=!1}}return(y,v)=>{const M=l0("router-link");return qt(),Qt("div",eb,[v[9]||(v[9]=F("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[F("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," IrrigationDesign "),F("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accder  votre espace ")],-1)),F("div",ib,[F("div",nb,[F("form",{class:"space-y-6",onSubmit:Dh(f,["prevent"])},[c.value?(qt(),Qt("div",rb,[F("div",sb,[v[3]||(v[3]=F("div",{class:"flex-shrink-0"},[F("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[F("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),F("div",ob,[F("h3",ab,ce(c.value),1)])])])):Ae("",!0),F("div",null,[v[4]||(v[4]=F("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),F("div",lb,[ke(F("input",{id:"username","onUpdate:modelValue":v[0]||(v[0]=k=>p.username=k),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Fe,p.username]])])]),F("div",null,[v[5]||(v[5]=F("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),F("div",ub,[ke(F("input",{id:"password","onUpdate:modelValue":v[1]||(v[1]=k=>p.password=k),name:"password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Mot de passe"},null,512),[[Fe,p.password]])])]),F("div",hb,[F("div",cb,[ke(F("input",{id:"remember-me","onUpdate:modelValue":v[2]||(v[2]=k=>p.rememberMe=k),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[bg,p.rememberMe]]),v[6]||(v[6]=F("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),F("div",db,[si(M,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Eo(()=>v[7]||(v[7]=[hn(" Mot de passe oubli ? ")])),_:1})])]),F("div",null,[F("button",{type:"submit",disabled:l.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[l.value?(qt(),Qt("svg",pb,v[8]||(v[8]=[F("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),F("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ae("",!0),hn(" "+ce(l.value?"Connexion en cours...":"Se connecter"),1)],8,fb)])],32)])])])}}});var dh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,n){(function(o,l){l(n)})(Zn,function(o){var l="1.9.4";function c(e){var s,h,m,x;for(h=1,m=arguments.length;h<m;h++){x=arguments[h];for(s in x)e[s]=x[s]}return e}var p=Object.create||function(){function e(){}return function(s){return e.prototype=s,new e}}();function f(e,s){var h=Array.prototype.slice;if(e.bind)return e.bind.apply(e,h.call(arguments,1));var m=h.call(arguments,2);return function(){return e.apply(s,m.length?m.concat(h.call(arguments)):arguments)}}var y=0;function v(e){return"_leaflet_id"in e||(e._leaflet_id=++y),e._leaflet_id}function M(e,s,h){var m,x,B,$;return $=function(){m=!1,x&&(B.apply(h,x),x=!1)},B=function(){m?x=arguments:(e.apply(h,arguments),setTimeout($,s),m=!0)},B}function k(e,s,h){var m=s[1],x=s[0],B=m-x;return e===m&&h?e:((e-x)%B+B)%B+x}function E(){return!1}function O(e,s){if(s===!1)return e;var h=Math.pow(10,s===void 0?6:s);return Math.round(e*h)/h}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function K(e){return z(e).split(/\s+/)}function q(e,s){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?p(e.options):{});for(var h in s)e.options[h]=s[h];return e.options}function X(e,s,h){var m=[];for(var x in e)m.push(encodeURIComponent(h?x.toUpperCase():x)+"="+encodeURIComponent(e[x]));return(!s||s.indexOf("?")===-1?"?":"&")+m.join("&")}var ht=/\{ *([\w_ -]+) *\}/g;function gt(e,s){return e.replace(ht,function(h,m){var x=s[m];if(x===void 0)throw new Error("No value provided for variable "+h);return typeof x=="function"&&(x=x(s)),x})}var pt=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function wt(e,s){for(var h=0;h<e.length;h++)if(e[h]===s)return h;return-1}var ut="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Pt(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var Et=0;function Ht(e){var s=+new Date,h=Math.max(0,16-(s-Et));return Et=s+h,window.setTimeout(e,h)}var Ct=window.requestAnimationFrame||Pt("RequestAnimationFrame")||Ht,Rt=window.cancelAnimationFrame||Pt("CancelAnimationFrame")||Pt("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function Ot(e,s,h){if(h&&Ct===Ht)e.call(s);else return Ct.call(window,f(e,s))}function ge(e){e&&Rt.call(window,e)}var $e={__proto__:null,extend:c,create:p,bind:f,get lastId(){return y},stamp:v,throttle:M,wrapNum:k,falseFn:E,formatNum:O,trim:z,splitWords:K,setOptions:q,getParamString:X,template:gt,isArray:pt,indexOf:wt,emptyImageUrl:ut,requestFn:Ct,cancelFn:Rt,requestAnimFrame:Ot,cancelAnimFrame:ge};function De(){}De.extend=function(e){var s=function(){q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=s.__super__=this.prototype,m=p(h);m.constructor=s,s.prototype=m;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(s[x]=this[x]);return e.statics&&c(s,e.statics),e.includes&&(_t(e.includes),c.apply(null,[m].concat(e.includes))),c(m,e),delete m.statics,delete m.includes,m.options&&(m.options=h.options?p(h.options):{},c(m.options,e.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,$=m._initHooks.length;B<$;B++)m._initHooks[B].call(this)}},s},De.include=function(e){var s=this.prototype.options;return c(this.prototype,e),e.options&&(this.prototype.options=s,this.mergeOptions(e.options)),this},De.mergeOptions=function(e){return c(this.prototype.options,e),this},De.addInitHook=function(e){var s=Array.prototype.slice.call(arguments,1),h=typeof e=="function"?e:function(){this[e].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function _t(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=pt(e)?e:[e];for(var s=0;s<e.length;s++)e[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ot={on:function(e,s,h){if(typeof e=="object")for(var m in e)this._on(m,e[m],s);else{e=K(e);for(var x=0,B=e.length;x<B;x++)this._on(e[x],s,h)}return this},off:function(e,s,h){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var m in e)this._off(m,e[m],s);else{e=K(e);for(var x=arguments.length===1,B=0,$=e.length;B<$;B++)x?this._off(e[B]):this._off(e[B],s,h)}return this},_on:function(e,s,h,m){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(e,s,h)===!1){h===this&&(h=void 0);var x={fn:s,ctx:h};m&&(x.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(x)}},_off:function(e,s,h){var m,x,B;if(this._events&&(m=this._events[e],!!m)){if(arguments.length===1){if(this._firingCount)for(x=0,B=m.length;x<B;x++)m[x].fn=E;delete this._events[e];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var $=this._listens(e,s,h);if($!==!1){var tt=m[$];this._firingCount&&(tt.fn=E,this._events[e]=m=m.slice()),m.splice($,1)}}},fire:function(e,s,h){if(!this.listens(e,h))return this;var m=c({},s,{type:e,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var x=this._events[e];if(x){this._firingCount=this._firingCount+1||1;for(var B=0,$=x.length;B<$;B++){var tt=x[B],lt=tt.fn;tt.once&&this.off(e,lt,tt.ctx),lt.call(tt.ctx||this,m)}this._firingCount--}}return h&&this._propagateEvent(m),this},listens:function(e,s,h,m){typeof e!="string"&&console.warn('"string" type argument expected');var x=s;typeof s!="function"&&(m=!!s,x=void 0,h=void 0);var B=this._events&&this._events[e];if(B&&B.length&&this._listens(e,x,h)!==!1)return!0;if(m){for(var $ in this._eventParents)if(this._eventParents[$].listens(e,s,h,m))return!0}return!1},_listens:function(e,s,h){if(!this._events)return!1;var m=this._events[e]||[];if(!s)return!!m.length;h===this&&(h=void 0);for(var x=0,B=m.length;x<B;x++)if(m[x].fn===s&&m[x].ctx===h)return x;return!1},once:function(e,s,h){if(typeof e=="object")for(var m in e)this._on(m,e[m],s,!0);else{e=K(e);for(var x=0,B=e.length;x<B;x++)this._on(e[x],s,h,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[v(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[v(e)],this},_propagateEvent:function(e){for(var s in this._eventParents)this._eventParents[s].fire(e.type,c({layer:e.target,propagatedFrom:e.target},e),!0)}};ot.addEventListener=ot.on,ot.removeEventListener=ot.clearAllEventListeners=ot.off,ot.addOneTimeEventListener=ot.once,ot.fireEvent=ot.fire,ot.hasEventListeners=ot.listens;var $t=De.extend(ot);function At(e,s,h){this.x=h?Math.round(e):e,this.y=h?Math.round(s):s}var Ve=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};At.prototype={clone:function(){return new At(this.x,this.y)},add:function(e){return this.clone()._add(jt(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(jt(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new At(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new At(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ve(this.x),this.y=Ve(this.y),this},distanceTo:function(e){e=jt(e);var s=e.x-this.x,h=e.y-this.y;return Math.sqrt(s*s+h*h)},equals:function(e){return e=jt(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=jt(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+O(this.x)+", "+O(this.y)+")"}};function jt(e,s,h){return e instanceof At?e:pt(e)?new At(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new At(e.x,e.y):new At(e,s,h)}function se(e,s){if(e)for(var h=s?[e,s]:e,m=0,x=h.length;m<x;m++)this.extend(h[m])}se.prototype={extend:function(e){var s,h;if(!e)return this;if(e instanceof At||typeof e[0]=="number"||"x"in e)s=h=jt(e);else if(e=Bt(e),s=e.min,h=e.max,!s||!h)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=h.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(e){return jt((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return jt(this.min.x,this.max.y)},getTopRight:function(){return jt(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var s,h;return typeof e[0]=="number"||e instanceof At?e=jt(e):e=Bt(e),e instanceof se?(s=e.min,h=e.max):s=h=e,s.x>=this.min.x&&h.x<=this.max.x&&s.y>=this.min.y&&h.y<=this.max.y},intersects:function(e){e=Bt(e);var s=this.min,h=this.max,m=e.min,x=e.max,B=x.x>=s.x&&m.x<=h.x,$=x.y>=s.y&&m.y<=h.y;return B&&$},overlaps:function(e){e=Bt(e);var s=this.min,h=this.max,m=e.min,x=e.max,B=x.x>s.x&&m.x<h.x,$=x.y>s.y&&m.y<h.y;return B&&$},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var s=this.min,h=this.max,m=Math.abs(s.x-h.x)*e,x=Math.abs(s.y-h.y)*e;return Bt(jt(s.x-m,s.y-x),jt(h.x+m,h.y+x))},equals:function(e){return e?(e=Bt(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function Bt(e,s){return!e||e instanceof se?e:new se(e,s)}function Ee(e,s){if(e)for(var h=s?[e,s]:e,m=0,x=h.length;m<x;m++)this.extend(h[m])}Ee.prototype={extend:function(e){var s=this._southWest,h=this._northEast,m,x;if(e instanceof fe)m=e,x=e;else if(e instanceof Ee){if(m=e._southWest,x=e._northEast,!m||!x)return this}else return e?this.extend(Kt(e)||ve(e)):this;return!s&&!h?(this._southWest=new fe(m.lat,m.lng),this._northEast=new fe(x.lat,x.lng)):(s.lat=Math.min(m.lat,s.lat),s.lng=Math.min(m.lng,s.lng),h.lat=Math.max(x.lat,h.lat),h.lng=Math.max(x.lng,h.lng)),this},pad:function(e){var s=this._southWest,h=this._northEast,m=Math.abs(s.lat-h.lat)*e,x=Math.abs(s.lng-h.lng)*e;return new Ee(new fe(s.lat-m,s.lng-x),new fe(h.lat+m,h.lng+x))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof fe||"lat"in e?e=Kt(e):e=ve(e);var s=this._southWest,h=this._northEast,m,x;return e instanceof Ee?(m=e.getSouthWest(),x=e.getNorthEast()):m=x=e,m.lat>=s.lat&&x.lat<=h.lat&&m.lng>=s.lng&&x.lng<=h.lng},intersects:function(e){e=ve(e);var s=this._southWest,h=this._northEast,m=e.getSouthWest(),x=e.getNorthEast(),B=x.lat>=s.lat&&m.lat<=h.lat,$=x.lng>=s.lng&&m.lng<=h.lng;return B&&$},overlaps:function(e){e=ve(e);var s=this._southWest,h=this._northEast,m=e.getSouthWest(),x=e.getNorthEast(),B=x.lat>s.lat&&m.lat<h.lat,$=x.lng>s.lng&&m.lng<h.lng;return B&&$},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,s){return e?(e=ve(e),this._southWest.equals(e.getSouthWest(),s)&&this._northEast.equals(e.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ve(e,s){return e instanceof Ee?e:new Ee(e,s)}function fe(e,s,h){if(isNaN(e)||isNaN(s))throw new Error("Invalid LatLng object: ("+e+", "+s+")");this.lat=+e,this.lng=+s,h!==void 0&&(this.alt=+h)}fe.prototype={equals:function(e,s){if(!e)return!1;e=Kt(e);var h=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return h<=(s===void 0?1e-9:s)},toString:function(e){return"LatLng("+O(this.lat,e)+", "+O(this.lng,e)+")"},distanceTo:function(e){return Dt.distance(this,Kt(e))},wrap:function(){return Dt.wrapLatLng(this)},toBounds:function(e){var s=180*e/40075017,h=s/Math.cos(Math.PI/180*this.lat);return ve([this.lat-s,this.lng-h],[this.lat+s,this.lng+h])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function Kt(e,s,h){return e instanceof fe?e:pt(e)&&typeof e[0]!="object"?e.length===3?new fe(e[0],e[1],e[2]):e.length===2?new fe(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new fe(e.lat,"lng"in e?e.lng:e.lon,e.alt):s===void 0?null:new fe(e,s,h)}var dt={latLngToPoint:function(e,s){var h=this.projection.project(e),m=this.scale(s);return this.transformation._transform(h,m)},pointToLatLng:function(e,s){var h=this.scale(s),m=this.transformation.untransform(e,h);return this.projection.unproject(m)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var s=this.projection.bounds,h=this.scale(e),m=this.transformation.transform(s.min,h),x=this.transformation.transform(s.max,h);return new se(m,x)},infinite:!1,wrapLatLng:function(e){var s=this.wrapLng?k(e.lng,this.wrapLng,!0):e.lng,h=this.wrapLat?k(e.lat,this.wrapLat,!0):e.lat,m=e.alt;return new fe(h,s,m)},wrapLatLngBounds:function(e){var s=e.getCenter(),h=this.wrapLatLng(s),m=s.lat-h.lat,x=s.lng-h.lng;if(m===0&&x===0)return e;var B=e.getSouthWest(),$=e.getNorthEast(),tt=new fe(B.lat-m,B.lng-x),lt=new fe($.lat-m,$.lng-x);return new Ee(tt,lt)}},Dt=c({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(e,s){var h=Math.PI/180,m=e.lat*h,x=s.lat*h,B=Math.sin((s.lat-e.lat)*h/2),$=Math.sin((s.lng-e.lng)*h/2),tt=B*B+Math.cos(m)*Math.cos(x)*$*$,lt=2*Math.atan2(Math.sqrt(tt),Math.sqrt(1-tt));return this.R*lt}}),Tt=6378137,Ut={R:Tt,MAX_LATITUDE:85.0511287798,project:function(e){var s=Math.PI/180,h=this.MAX_LATITUDE,m=Math.max(Math.min(h,e.lat),-h),x=Math.sin(m*s);return new At(this.R*e.lng*s,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(e){var s=180/Math.PI;return new fe((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*s,e.x*s/this.R)},bounds:function(){var e=Tt*Math.PI;return new se([-e,-e],[e,e])}()};function _e(e,s,h,m){if(pt(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=s,this._c=h,this._d=m}_e.prototype={transform:function(e,s){return this._transform(e.clone(),s)},_transform:function(e,s){return s=s||1,e.x=s*(this._a*e.x+this._b),e.y=s*(this._c*e.y+this._d),e},untransform:function(e,s){return s=s||1,new At((e.x/s-this._b)/this._a,(e.y/s-this._d)/this._c)}};function j(e,s,h,m){return new _e(e,s,h,m)}var G=c({},Dt,{code:"EPSG:3857",projection:Ut,transformation:function(){var e=.5/(Math.PI*Ut.R);return j(e,.5,-e,.5)}()}),Q=c({},G,{code:"EPSG:900913"});function mt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function yt(e,s){var h="",m,x,B,$,tt,lt;for(m=0,B=e.length;m<B;m++){for(tt=e[m],x=0,$=tt.length;x<$;x++)lt=tt[x],h+=(x?"L":"M")+lt.x+" "+lt.y;h+=s?Jt.svg?"z":"x":""}return h||"M0 0"}var ft=document.documentElement.style,Mt="ActiveXObject"in window,St=Mt&&!document.addEventListener,kt="msLaunchUri"in navigator&&!("documentMode"in document),xt=zi("webkit"),Wt=zi("android"),Ft=zi("android 2")||zi("android 3"),Yt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ne=Wt&&zi("Google")&&Yt<537&&!("AudioNode"in window),pe=!!window.opera,Me=!kt&&zi("chrome"),we=zi("gecko")&&!xt&&!pe&&!Mt,oi=!Me&&zi("safari"),Xe=zi("phantom"),Ci="OTransition"in ft,ei=navigator.platform.indexOf("Win")===0,pn=Mt&&"transition"in ft,Sn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ft,Ke="MozPerspective"in ft,ki=!window.L_DISABLE_3D&&(pn||Sn||Ke)&&!Ci&&!Xe,Hi=typeof orientation<"u"||zi("mobile"),Tl=Hi&&xt,Dl=Hi&&Sn,Is=!window.PointerEvent&&window.MSPointerEvent,Yo=!!(window.PointerEvent||Is),Xo="ontouchstart"in window||!!window.TouchEvent,Rl=!window.L_NO_TOUCH&&(Xo||Yo),Ol=Hi&&pe,Qo=Hi&&we,ta=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Il=function(){var e=!1;try{var s=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",E,s),window.removeEventListener("testPassiveEventSupport",E,s)}catch{}return e}(),Fl=function(){return!!document.createElement("canvas").getContext}(),Fs=!!(document.createElementNS&&mt("svg").createSVGRect),ea=!!Fs&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Nl=!Fs&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var s=e.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),zl=navigator.platform.indexOf("Mac")===0,jl=navigator.platform.indexOf("Linux")===0;function zi(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Jt={ie:Mt,ielt9:St,edge:kt,webkit:xt,android:Wt,android23:Ft,androidStock:ne,opera:pe,chrome:Me,gecko:we,safari:oi,phantom:Xe,opera12:Ci,win:ei,ie3d:pn,webkit3d:Sn,gecko3d:Ke,any3d:ki,mobile:Hi,mobileWebkit:Tl,mobileWebkit3d:Dl,msPointer:Is,pointer:Yo,touch:Rl,touchNative:Xo,mobileOpera:Ol,mobileGecko:Qo,retina:ta,passiveEvents:Il,canvas:Fl,svg:Fs,vml:Nl,inlineSvg:ea,mac:zl,linux:jl},ia=Jt.msPointer?"MSPointerDown":"pointerdown",na=Jt.msPointer?"MSPointerMove":"pointermove",Ns=Jt.msPointer?"MSPointerUp":"pointerup",ra=Jt.msPointer?"MSPointerCancel":"pointercancel",zs={touchstart:ia,touchmove:na,touchend:Ns,touchcancel:ra},sa={touchstart:Hl,touchmove:Kr,touchend:Kr,touchcancel:Kr},Yn={},oa=!1;function Ul(e,s,h){return s==="touchstart"&&js(),sa[s]?(h=sa[s].bind(this,h),e.addEventListener(zs[s],h,!1),h):(console.warn("wrong event specified:",s),E)}function Gl(e,s,h){if(!zs[s]){console.warn("wrong event specified:",s);return}e.removeEventListener(zs[s],h,!1)}function $l(e){Yn[e.pointerId]=e}function Vl(e){Yn[e.pointerId]&&(Yn[e.pointerId]=e)}function qr(e){delete Yn[e.pointerId]}function js(){oa||(document.addEventListener(ia,$l,!0),document.addEventListener(na,Vl,!0),document.addEventListener(Ns,qr,!0),document.addEventListener(ra,qr,!0),oa=!0)}function Kr(e,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var h in Yn)s.touches.push(Yn[h]);s.changedTouches=[s],e(s)}}function Hl(e,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&ii(s),Kr(e,s)}function Zl(e){var s={},h,m;for(m in e)h=e[m],s[m]=h&&h.bind?h.bind(e):h;return e=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var ql=200;function Kl(e,s){e.addEventListener("dblclick",s);var h=0,m;function x(B){if(B.detail!==1){m=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var $=ca(B);if(!($.some(function(lt){return lt instanceof HTMLLabelElement&&lt.attributes.for})&&!$.some(function(lt){return lt instanceof HTMLInputElement||lt instanceof HTMLSelectElement}))){var tt=Date.now();tt-h<=ql?(m++,m===2&&s(Zl(B))):m=1,h=tt}}}return e.addEventListener("click",x),{dblclick:s,simDblclick:x}}function Wl(e,s){e.removeEventListener("dblclick",s.dblclick),e.removeEventListener("click",s.simDblclick)}var Us=Jr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),xr=Jr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),aa=xr==="webkitTransition"||xr==="OTransition"?xr+"End":"transitionend";function la(e){return typeof e=="string"?document.getElementById(e):e}function mn(e,s){var h=e.style[s]||e.currentStyle&&e.currentStyle[s];if((!h||h==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(e,null);h=m?m[s]:null}return h==="auto"?null:h}function Le(e,s,h){var m=document.createElement(e);return m.className=s||"",h&&h.appendChild(m),m}function ze(e){var s=e.parentNode;s&&s.removeChild(e)}function wr(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Xn(e){var s=e.parentNode;s&&s.lastChild!==e&&s.appendChild(e)}function An(e){var s=e.parentNode;s&&s.firstChild!==e&&s.insertBefore(e,s.firstChild)}function Gs(e,s){if(e.classList!==void 0)return e.classList.contains(s);var h=Wr(e);return h.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(h)}function ue(e,s){if(e.classList!==void 0)for(var h=K(s),m=0,x=h.length;m<x;m++)e.classList.add(h[m]);else if(!Gs(e,s)){var B=Wr(e);$s(e,(B?B+" ":"")+s)}}function Ze(e,s){e.classList!==void 0?e.classList.remove(s):$s(e,z((" "+Wr(e)+" ").replace(" "+s+" "," ")))}function $s(e,s){e.className.baseVal===void 0?e.className=s:e.className.baseVal=s}function Wr(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function Di(e,s){"opacity"in e.style?e.style.opacity=s:"filter"in e.style&&Jl(e,s)}function Jl(e,s){var h=!1,m="DXImageTransform.Microsoft.Alpha";try{h=e.filters.item(m)}catch{if(s===1)return}s=Math.round(s*100),h?(h.Enabled=s!==100,h.Opacity=s):e.style.filter+=" progid:"+m+"(opacity="+s+")"}function Jr(e){for(var s=document.documentElement.style,h=0;h<e.length;h++)if(e[h]in s)return e[h];return!1}function Tn(e,s,h){var m=s||new At(0,0);e.style[Us]=(Jt.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(h?" scale("+h+")":"")}function We(e,s){e._leaflet_pos=s,Jt.any3d?Tn(e,s):(e.style.left=s.x+"px",e.style.top=s.y+"px")}function Dn(e){return e._leaflet_pos||new At(0,0)}var Lr,Cr,Vs;if("onselectstart"in document)Lr=function(){ae(window,"selectstart",ii)},Cr=function(){Re(window,"selectstart",ii)};else{var Qn=Jr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Lr=function(){if(Qn){var e=document.documentElement.style;Vs=e[Qn],e[Qn]="none"}},Cr=function(){Qn&&(document.documentElement.style[Qn]=Vs,Vs=void 0)}}function Hs(){ae(window,"dragstart",ii)}function Zs(){Re(window,"dragstart",ii)}var Yr,qs;function Ks(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(Xr(),Yr=e,qs=e.style.outlineStyle,e.style.outlineStyle="none",ae(window,"keydown",Xr))}function Xr(){Yr&&(Yr.style.outlineStyle=qs,Yr=void 0,qs=void 0,Re(window,"keydown",Xr))}function ua(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Ws(e){var s=e.getBoundingClientRect();return{x:s.width/e.offsetWidth||1,y:s.height/e.offsetHeight||1,boundingClientRect:s}}var Yl={__proto__:null,TRANSFORM:Us,TRANSITION:xr,TRANSITION_END:aa,get:la,getStyle:mn,create:Le,remove:ze,empty:wr,toFront:Xn,toBack:An,hasClass:Gs,addClass:ue,removeClass:Ze,setClass:$s,getClass:Wr,setOpacity:Di,testProp:Jr,setTransform:Tn,setPosition:We,getPosition:Dn,get disableTextSelection(){return Lr},get enableTextSelection(){return Cr},disableImageDrag:Hs,enableImageDrag:Zs,preventOutline:Ks,restoreOutline:Xr,getSizedParentNode:ua,getScale:Ws};function ae(e,s,h,m){if(s&&typeof s=="object")for(var x in s)Ys(e,x,s[x],h);else{s=K(s);for(var B=0,$=s.length;B<$;B++)Ys(e,s[B],h,m)}return this}var Zi="_leaflet_events";function Re(e,s,h,m){if(arguments.length===1)ha(e),delete e[Zi];else if(s&&typeof s=="object")for(var x in s)gn(e,x,s[x],h);else if(s=K(s),arguments.length===2)ha(e,function(tt){return wt(s,tt)!==-1});else for(var B=0,$=s.length;B<$;B++)gn(e,s[B],h,m);return this}function ha(e,s){for(var h in e[Zi]){var m=h.split(/\d/)[0];(!s||s(m))&&gn(e,m,null,null,h)}}var Js={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ys(e,s,h,m){var x=s+v(h)+(m?"_"+v(m):"");if(e[Zi]&&e[Zi][x])return this;var B=function(tt){return h.call(m||e,tt||window.event)},$=B;!Jt.touchNative&&Jt.pointer&&s.indexOf("touch")===0?B=Ul(e,s,B):Jt.touch&&s==="dblclick"?B=Kl(e,B):"addEventListener"in e?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?e.addEventListener(Js[s]||s,B,Jt.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(B=function(tt){tt=tt||window.event,Qs(e,tt)&&$(tt)},e.addEventListener(Js[s],B,!1)):e.addEventListener(s,$,!1):e.attachEvent("on"+s,B),e[Zi]=e[Zi]||{},e[Zi][x]=B}function gn(e,s,h,m,x){x=x||s+v(h)+(m?"_"+v(m):"");var B=e[Zi]&&e[Zi][x];if(!B)return this;!Jt.touchNative&&Jt.pointer&&s.indexOf("touch")===0?Gl(e,s,B):Jt.touch&&s==="dblclick"?Wl(e,B):"removeEventListener"in e?e.removeEventListener(Js[s]||s,B,!1):e.detachEvent("on"+s,B),e[Zi][x]=null}function Rn(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Xs(e){return Ys(e,"wheel",Rn),this}function kr(e){return ae(e,"mousedown touchstart dblclick contextmenu",Rn),e._leaflet_disable_click=!0,this}function ii(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function On(e){return ii(e),Rn(e),this}function ca(e){if(e.composedPath)return e.composedPath();for(var s=[],h=e.target;h;)s.push(h),h=h.parentNode;return s}function da(e,s){if(!s)return new At(e.clientX,e.clientY);var h=Ws(s),m=h.boundingClientRect;return new At((e.clientX-m.left)/h.x-s.clientLeft,(e.clientY-m.top)/h.y-s.clientTop)}var Xl=Jt.linux&&Jt.chrome?window.devicePixelRatio:Jt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function fa(e){return Jt.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/Xl:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function Qs(e,s){var h=s.relatedTarget;if(!h)return!0;try{for(;h&&h!==e;)h=h.parentNode}catch{return!1}return h!==e}var Qr={__proto__:null,on:ae,off:Re,stopPropagation:Rn,disableScrollPropagation:Xs,disableClickPropagation:kr,preventDefault:ii,stop:On,getPropagationPath:ca,getMousePosition:da,getWheelDelta:fa,isExternalTarget:Qs,addListener:ae,removeListener:Re},pa=$t.extend({run:function(e,s,h,m){this.stop(),this._el=e,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Dn(e),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ot(this._animate,this),this._step()},_step:function(e){var s=+new Date-this._startTime,h=this._duration*1e3;s<h?this._runFrame(this._easeOut(s/h),e):(this._runFrame(1),this._complete())},_runFrame:function(e,s){var h=this._startPos.add(this._offset.multiplyBy(e));s&&h._round(),We(this._el,h),this.fire("step")},_complete:function(){ge(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),ye=$t.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,s){s=q(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(Kt(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=xr&&Jt.any3d&&!Jt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ae(this._proxy,aa,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,s,h){if(s=s===void 0?this._zoom:this._limitZoom(s),e=this._limitCenter(Kt(e),s,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=c({animate:h.animate},h.zoom),h.pan=c({animate:h.animate,duration:h.duration},h.pan));var m=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,s,h.zoom):this._tryAnimatedPan(e,h.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(e,s,h.pan&&h.pan.noMoveStart),this},setZoom:function(e,s){return this._loaded?this.setView(this.getCenter(),e,{zoom:s}):(this._zoom=e,this)},zoomIn:function(e,s){return e=e||(Jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,s)},zoomOut:function(e,s){return e=e||(Jt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,s)},setZoomAround:function(e,s,h){var m=this.getZoomScale(s),x=this.getSize().divideBy(2),B=e instanceof At?e:this.latLngToContainerPoint(e),$=B.subtract(x).multiplyBy(1-1/m),tt=this.containerPointToLatLng(x.add($));return this.setView(tt,s,{zoom:h})},_getBoundsCenterZoom:function(e,s){s=s||{},e=e.getBounds?e.getBounds():ve(e);var h=jt(s.paddingTopLeft||s.padding||[0,0]),m=jt(s.paddingBottomRight||s.padding||[0,0]),x=this.getBoundsZoom(e,!1,h.add(m));if(x=typeof s.maxZoom=="number"?Math.min(s.maxZoom,x):x,x===1/0)return{center:e.getCenter(),zoom:x};var B=m.subtract(h).divideBy(2),$=this.project(e.getSouthWest(),x),tt=this.project(e.getNorthEast(),x),lt=this.unproject($.add(tt).divideBy(2).add(B),x);return{center:lt,zoom:x}},fitBounds:function(e,s){if(e=ve(e),!e.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(e,s);return this.setView(h.center,h.zoom,s)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,s){return this.setView(e,this._zoom,{pan:s})},panBy:function(e,s){if(e=jt(e).round(),s=s||{},!e.x&&!e.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){ue(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,h,s.duration||.25,s.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,s,h){if(h=h||{},h.animate===!1||!Jt.any3d)return this.setView(e,s,h);this._stop();var m=this.project(this.getCenter()),x=this.project(e),B=this.getSize(),$=this._zoom;e=Kt(e),s=s===void 0?$:s;var tt=Math.max(B.x,B.y),lt=tt*this.getZoomScale($,s),bt=x.distanceTo(m)||1,Nt=1.42,te=Nt*Nt;function me(qe){var Rr=qe?-1:1,bu=qe?lt:tt,Xi=lt*lt-tt*tt+Rr*te*te*bt*bt,xu=2*bu*te*bt,or=Xi/xu,fo=Math.sqrt(or*or+1)-or,wu=fo<1e-9?-18:Math.log(fo);return wu}function fi(qe){return(Math.exp(qe)-Math.exp(-qe))/2}function Qe(qe){return(Math.exp(qe)+Math.exp(-qe))/2}function yi(qe){return fi(qe)/Qe(qe)}var He=me(0);function Yi(qe){return tt*(Qe(He)/Qe(He+Nt*qe))}function co(qe){return tt*(Qe(He)*yi(He+Nt*qe)-fi(He))/te}function vs(qe){return 1-Math.pow(1-qe,1.5)}var Ba=Date.now(),Dr=(me(1)-He)/Nt,vu=h.duration?1e3*h.duration:1e3*Dr*.8;function Sa(){var qe=(Date.now()-Ba)/vu,Rr=vs(qe)*Dr;qe<=1?(this._flyToFrame=Ot(Sa,this),this._move(this.unproject(m.add(x.subtract(m).multiplyBy(co(Rr)/bt)),$),this.getScaleZoom(tt/Yi(Rr),$),{flyTo:!0})):this._move(e,s)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),Sa.call(this),this},flyToBounds:function(e,s){var h=this._getBoundsCenterZoom(e,s);return this.flyTo(h.center,h.zoom,s)},setMaxBounds:function(e){return e=ve(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var s=this.options.minZoom;return this.options.minZoom=e,this._loaded&&s!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var s=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&s!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,s){this._enforcingBounds=!0;var h=this.getCenter(),m=this._limitCenter(h,this._zoom,ve(e));return h.equals(m)||this.panTo(m,s),this._enforcingBounds=!1,this},panInside:function(e,s){s=s||{};var h=jt(s.paddingTopLeft||s.padding||[0,0]),m=jt(s.paddingBottomRight||s.padding||[0,0]),x=this.project(this.getCenter()),B=this.project(e),$=this.getPixelBounds(),tt=Bt([$.min.add(h),$.max.subtract(m)]),lt=tt.getSize();if(!tt.contains(B)){this._enforcingBounds=!0;var bt=B.subtract(tt.getCenter()),Nt=tt.extend(B).getSize().subtract(lt);x.x+=bt.x<0?-Nt.x:Nt.x,x.y+=bt.y<0?-Nt.y:Nt.y,this.panTo(this.unproject(x),s),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=c({animate:!1,pan:!0},e===!0?{animate:!0}:e);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),m=s.divideBy(2).round(),x=h.divideBy(2).round(),B=m.subtract(x);return!B.x&&!B.y?this:(e.animate&&e.pan?this.panBy(B):(e.pan&&this._rawPanBy(B),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=c({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=f(this._handleGeolocationResponse,this),h=f(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,h,e):navigator.geolocation.getCurrentPosition(s,h,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var s=e.code,h=e.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var s=e.coords.latitude,h=e.coords.longitude,m=new fe(s,h),x=m.toBounds(e.coords.accuracy*2),B=this._locateOptions;if(B.setView){var $=this.getBoundsZoom(x);this.setView(m,B.maxZoom?Math.min($,B.maxZoom):$)}var tt={latlng:m,bounds:x,timestamp:e.timestamp};for(var lt in e.coords)typeof e.coords[lt]=="number"&&(tt[lt]=e.coords[lt]);this.fire("locationfound",tt)}},addHandler:function(e,s){if(!s)return this;var h=this[e]=new s(this);return this._handlers.push(h),this.options[e]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ze(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ge(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)ze(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,s){var h="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),m=Le("div",h,s||this._mapPane);return e&&(this._panes[e]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),s=this.unproject(e.getBottomLeft()),h=this.unproject(e.getTopRight());return new Ee(s,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,s,h){e=ve(e),h=jt(h||[0,0]);var m=this.getZoom()||0,x=this.getMinZoom(),B=this.getMaxZoom(),$=e.getNorthWest(),tt=e.getSouthEast(),lt=this.getSize().subtract(h),bt=Bt(this.project(tt,m),this.project($,m)).getSize(),Nt=Jt.any3d?this.options.zoomSnap:1,te=lt.x/bt.x,me=lt.y/bt.y,fi=s?Math.max(te,me):Math.min(te,me);return m=this.getScaleZoom(fi,m),Nt&&(m=Math.round(m/(Nt/100))*(Nt/100),m=s?Math.ceil(m/Nt)*Nt:Math.floor(m/Nt)*Nt),Math.max(x,Math.min(B,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new At(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,s){var h=this._getTopLeftPoint(e,s);return new se(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,s){var h=this.options.crs;return s=s===void 0?this._zoom:s,h.scale(e)/h.scale(s)},getScaleZoom:function(e,s){var h=this.options.crs;s=s===void 0?this._zoom:s;var m=h.zoom(e*h.scale(s));return isNaN(m)?1/0:m},project:function(e,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(Kt(e),s)},unproject:function(e,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(jt(e),s)},layerPointToLatLng:function(e){var s=jt(e).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(e){var s=this.project(Kt(e))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(Kt(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(ve(e))},distance:function(e,s){return this.options.crs.distance(Kt(e),Kt(s))},containerPointToLayerPoint:function(e){return jt(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return jt(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var s=this.containerPointToLayerPoint(jt(e));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Kt(e)))},mouseEventToContainerPoint:function(e){return da(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var s=this._container=la(e);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ae(s,"scroll",this._onScroll,this),this._containerId=v(s)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Jt.any3d,ue(e,"leaflet-container"+(Jt.touch?" leaflet-touch":"")+(Jt.retina?" leaflet-retina":"")+(Jt.ielt9?" leaflet-oldie":"")+(Jt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=mn(e,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),We(this._mapPane,new At(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ue(e.markerPane,"leaflet-zoom-hide"),ue(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,s,h){We(this._mapPane,new At(0,0));var m=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var x=this._zoom!==s;this._moveStart(x,h)._move(e,s)._moveEnd(x),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(e,s){return e&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(e,s,h,m){s===void 0&&(s=this._zoom);var x=this._zoom!==s;return this._zoom=s,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),m?h&&h.pinch&&this.fire("zoom",h):((x||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ge(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){We(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[v(this._container)]=this;var s=e?Re:ae;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),Jt.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ge(this._resizeRequest),this._resizeRequest=Ot(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,s){for(var h=[],m,x=s==="mouseout"||s==="mouseover",B=e.target||e.srcElement,$=!1;B;){if(m=this._targets[v(B)],m&&(s==="click"||s==="preclick")&&this._draggableMoved(m)){$=!0;break}if(m&&m.listens(s,!0)&&(x&&!Qs(B,e)||(h.push(m),x))||B===this._container)break;B=B.parentNode}return!h.length&&!$&&!x&&this.listens(s,!0)&&(h=[this]),h},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var s=e.target||e.srcElement;if(!(!this._loaded||s._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(s))){var h=e.type;h==="mousedown"&&Ks(s),this._fireDOMEvent(e,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,s,h){if(e.type==="click"){var m=c({},e);m.type="preclick",this._fireDOMEvent(m,m.type,h)}var x=this._findEventTargets(e,s);if(h){for(var B=[],$=0;$<h.length;$++)h[$].listens(s,!0)&&B.push(h[$]);x=B.concat(x)}if(x.length){s==="contextmenu"&&ii(e);var tt=x[0],lt={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var bt=tt.getLatLng&&(!tt._radius||tt._radius<=10);lt.containerPoint=bt?this.latLngToContainerPoint(tt.getLatLng()):this.mouseEventToContainerPoint(e),lt.layerPoint=this.containerPointToLayerPoint(lt.containerPoint),lt.latlng=bt?tt.getLatLng():this.layerPointToLatLng(lt.layerPoint)}for($=0;$<x.length;$++)if(x[$].fire(s,lt,!0),lt.originalEvent._stopped||x[$].options.bubblingMouseEvents===!1&&wt(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,s=this._handlers.length;e<s;e++)this._handlers[e].disable()},whenReady:function(e,s){return this._loaded?e.call(s||this,{target:this}):this.on("load",e,s),this},_getMapPanePos:function(){return Dn(this._mapPane)||new At(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,s){var h=e&&s!==void 0?this._getNewPixelOrigin(e,s):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,s){var h=this.getSize()._divideBy(2);return this.project(e,s)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,s,h){var m=this._getNewPixelOrigin(h,s);return this.project(e,s)._subtract(m)},_latLngBoundsToNewLayerBounds:function(e,s,h){var m=this._getNewPixelOrigin(h,s);return Bt([this.project(e.getSouthWest(),s)._subtract(m),this.project(e.getNorthWest(),s)._subtract(m),this.project(e.getSouthEast(),s)._subtract(m),this.project(e.getNorthEast(),s)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,s,h){if(!h)return e;var m=this.project(e,s),x=this.getSize().divideBy(2),B=new se(m.subtract(x),m.add(x)),$=this._getBoundsOffset(B,h,s);return Math.abs($.x)<=1&&Math.abs($.y)<=1?e:this.unproject(m.add($),s)},_limitOffset:function(e,s){if(!s)return e;var h=this.getPixelBounds(),m=new se(h.min.add(e),h.max.add(e));return e.add(this._getBoundsOffset(m,s))},_getBoundsOffset:function(e,s,h){var m=Bt(this.project(s.getNorthEast(),h),this.project(s.getSouthWest(),h)),x=m.min.subtract(e.min),B=m.max.subtract(e.max),$=this._rebound(x.x,-B.x),tt=this._rebound(x.y,-B.y);return new At($,tt)},_rebound:function(e,s){return e+s>0?Math.round(e-s)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(s))},_limitZoom:function(e){var s=this.getMinZoom(),h=this.getMaxZoom(),m=Jt.any3d?this.options.zoomSnap:1;return m&&(e=Math.round(e/m)*m),Math.max(s,Math.min(h,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,s){var h=this._getCenterOffset(e)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,s),!0)},_createAnimProxy:function(){var e=this._proxy=Le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(s){var h=Us,m=this._proxy.style[h];Tn(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),m===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ze(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),s=this.getZoom();Tn(this._proxy,this.project(e,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,s,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(s),x=this._getCenterOffset(e)._divideBy(1-1/m);return h.animate!==!0&&!this.getSize().contains(x)?!1:(Ot(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(e,s,!0)},this),!0)},_animateZoom:function(e,s,h,m){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=s,ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:s,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ma(e,s){return new ye(e,s)}var oe=De.extend({options:{position:"topright"},initialize:function(e){q(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var s=this._map;return s&&s.removeControl(this),this.options.position=e,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var s=this._container=this.onAdd(e),h=this.getPosition(),m=e._controlCorners[h];return ue(s,"leaflet-control"),h.indexOf("bottom")!==-1?m.insertBefore(s,m.firstChild):m.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ze(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),In=function(e){return new oe(e)};ye.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},s="leaflet-",h=this._controlContainer=Le("div",s+"control-container",this._container);function m(x,B){var $=s+x+" "+s+B;e[x+B]=Le("div",$,h)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)ze(this._controlCorners[e]);ze(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Er=oe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,s,h,m){return h<m?-1:m<h?1:0}},initialize:function(e,s,h){q(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in e)this._addLayer(e[m],m);for(m in s)this._addLayer(s[m],m,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return oe.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,s){return this._addLayer(e,s),this._map?this._update():this},addOverlay:function(e,s){return this._addLayer(e,s,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var s=this._getLayer(v(e));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",s=this._container=Le("div",e),h=this.options.collapsed;s.setAttribute("aria-haspopup",!0),kr(s),Xs(s);var m=this._section=Le("section",e+"-list");h&&(this._map.on("click",this.collapse,this),ae(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=Le("a",e+"-toggle",s);x.href="#",x.title="Layers",x.setAttribute("role","button"),ae(x,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){ii(B),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Le("div",e+"-base",m),this._separator=Le("div",e+"-separator",m),this._overlaysList=Le("div",e+"-overlays",m),s.appendChild(m)},_getLayer:function(e){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&v(this._layers[s].layer)===e)return this._layers[s]},_addLayer:function(e,s,h){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:s,overlay:h}),this.options.sortLayers&&this._layers.sort(f(function(m,x){return this.options.sortFunction(m.layer,x.layer,m.name,x.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;wr(this._baseLayersList),wr(this._overlaysList),this._layerControlInputs=[];var e,s,h,m,x=0;for(h=0;h<this._layers.length;h++)m=this._layers[h],this._addItem(m),s=s||m.overlay,e=e||!m.overlay,x+=m.overlay?0:1;return this.options.hideSingleBase&&(e=e&&x>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=s&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var s=this._getLayer(v(e.target)),h=s.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;h&&this._map.fire(h,s)},_createRadioElement:function(e,s){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(s?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=h,m.firstChild},_addItem:function(e){var s=document.createElement("label"),h=this._map.hasLayer(e.layer),m;e.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=h):m=this._createRadioElement("leaflet-base-layers_"+v(this),h),this._layerControlInputs.push(m),m.layerId=v(e.layer),ae(m,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+e.name;var B=document.createElement("span");s.appendChild(B),B.appendChild(m),B.appendChild(x);var $=e.overlay?this._overlaysList:this._baseLayersList;return $.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,s,h,m=[],x=[];this._handlingClick=!0;for(var B=e.length-1;B>=0;B--)s=e[B],h=this._getLayer(s.layerId).layer,s.checked?m.push(h):s.checked||x.push(h);for(B=0;B<x.length;B++)this._map.hasLayer(x[B])&&this._map.removeLayer(x[B]);for(B=0;B<m.length;B++)this._map.hasLayer(m[B])||this._map.addLayer(m[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,s,h,m=this._map.getZoom(),x=e.length-1;x>=0;x--)s=e[x],h=this._getLayer(s.layerId).layer,s.disabled=h.options.minZoom!==void 0&&m<h.options.minZoom||h.options.maxZoom!==void 0&&m>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,ae(e,"click",ii),this.expand();var s=this;setTimeout(function(){Re(e,"click",ii),s._preventClick=!1})}}),Ql=function(e,s,h){return new Er(e,s,h)},ts=oe.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var s="leaflet-control-zoom",h=Le("div",s+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,s+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,s+"-out",h,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,s,h,m,x){var B=Le("a",h,m);return B.innerHTML=e,B.href="#",B.title=s,B.setAttribute("role","button"),B.setAttribute("aria-label",s),kr(B),ae(B,"click",On),ae(B,"click",x,this),ae(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var e=this._map,s="leaflet-disabled";Ze(this._zoomInButton,s),Ze(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(ue(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(ue(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});ye.mergeOptions({zoomControl:!0}),ye.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ts,this.addControl(this.zoomControl))});var tu=function(e){return new ts(e)},es=oe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var s="leaflet-control-scale",h=Le("div",s),m=this.options;return this._addScales(m,s+"-line",h),e.on(m.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),h},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,s,h){e.metric&&(this._mScale=Le("div",s,h)),e.imperial&&(this._iScale=Le("div",s,h))},_update:function(){var e=this._map,s=e.getSize().y/2,h=e.distance(e.containerPointToLatLng([0,s]),e.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(h)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var s=this._getRoundNum(e),h=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,h,s/e)},_updateImperial:function(e){var s=e*3.2808399,h,m,x;s>5280?(h=s/5280,m=this._getRoundNum(h),this._updateScale(this._iScale,m+" mi",m/h)):(x=this._getRoundNum(s),this._updateScale(this._iScale,x+" ft",x/s))},_updateScale:function(e,s,h){e.style.width=Math.round(this.options.maxWidth*h)+"px",e.innerHTML=s},_getRoundNum:function(e){var s=Math.pow(10,(Math.floor(e)+"").length-1),h=e/s;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,s*h}}),is=function(e){return new es(e)},eu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',qi=oe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Jt.inlineSvg?eu+" ":"")+"Leaflet</a>"},initialize:function(e){q(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=Le("div","leaflet-control-attribution"),kr(this._container);for(var s in e._layers)e._layers[s].getAttribution&&this.addAttribution(e._layers[s].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var s in this._attributions)this._attributions[s]&&e.push(s);var h=[];this.options.prefix&&h.push(this.options.prefix),e.length&&h.push(e.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});ye.mergeOptions({attributionControl:!0}),ye.addInitHook(function(){this.options.attributionControl&&new qi().addTo(this)});var ga=function(e){return new qi(e)};oe.Layers=Er,oe.Zoom=ts,oe.Scale=es,oe.Attribution=qi,In.layers=Ql,In.zoom=tu,In.scale=is,In.attribution=ga;var hi=De.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});hi.addTo=function(e,s){return e.addHandler(s,this),this};var iu={Events:ot},_a=Jt.touch?"touchstart mousedown":"mousedown",_n=$t.extend({options:{clickTolerance:3},initialize:function(e,s,h,m){q(this,m),this._element=e,this._dragStartTarget=s||e,this._preventOutline=h},enable:function(){this._enabled||(ae(this._dragStartTarget,_a,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),Re(this._dragStartTarget,_a,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Gs(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){_n._dragging===this&&this.finishDrag();return}if(!(_n._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(_n._dragging=this,this._preventOutline&&Ks(this._element),Hs(),Lr(),!this._moving)){this.fire("down");var s=e.touches?e.touches[0]:e,h=ua(this._element);this._startPoint=new At(s.clientX,s.clientY),this._startPos=Dn(this._element),this._parentScale=Ws(h);var m=e.type==="mousedown";ae(document,m?"mousemove":"touchmove",this._onMove,this),ae(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var s=e.touches&&e.touches.length===1?e.touches[0]:e,h=new At(s.clientX,s.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,ii(e),this._moved||(this.fire("dragstart"),this._moved=!0,ue(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),We(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Re(document,"mousemove touchmove",this._onMove,this),Re(document,"mouseup touchend touchcancel",this._onUp,this),Zs(),Cr();var s=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,s&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function ya(e,s,h){var m,x=[1,4,2,8],B,$,tt,lt,bt,Nt,te,me;for(B=0,Nt=e.length;B<Nt;B++)e[B]._code=mi(e[B],s);for(tt=0;tt<4;tt++){for(te=x[tt],m=[],B=0,Nt=e.length,$=Nt-1;B<Nt;$=B++)lt=e[B],bt=e[$],lt._code&te?bt._code&te||(me=yn(bt,lt,te,s,h),me._code=mi(me,s),m.push(me)):(bt._code&te&&(me=yn(bt,lt,te,s,h),me._code=mi(me,s),m.push(me)),m.push(lt));e=m}return e}function va(e,s){var h,m,x,B,$,tt,lt,bt,Nt;if(!e||e.length===0)throw new Error("latlngs not passed");gi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var te=Kt([0,0]),me=ve(e),fi=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());fi<1700&&(te=to(e));var Qe=e.length,yi=[];for(h=0;h<Qe;h++){var He=Kt(e[h]);yi.push(s.project(Kt([He.lat-te.lat,He.lng-te.lng])))}for(tt=lt=bt=0,h=0,m=Qe-1;h<Qe;m=h++)x=yi[h],B=yi[m],$=x.y*B.x-B.y*x.x,lt+=(x.x+B.x)*$,bt+=(x.y+B.y)*$,tt+=$*3;tt===0?Nt=yi[0]:Nt=[lt/tt,bt/tt];var Yi=s.unproject(jt(Nt));return Kt([Yi.lat+te.lat,Yi.lng+te.lng])}function to(e){for(var s=0,h=0,m=0,x=0;x<e.length;x++){var B=Kt(e[x]);s+=B.lat,h+=B.lng,m++}return Kt([s/m,h/m])}var nu={__proto__:null,clipPolygon:ya,polygonCenter:va,centroid:to};function ba(e,s){if(!s||!e.length)return e.slice();var h=s*s;return e=xa(e,h),e=ni(e,h),e}function eo(e,s,h){return Math.sqrt(Mr(e,s,h,!0))}function ru(e,s,h){return Mr(e,s,h)}function ni(e,s){var h=e.length,m=typeof Uint8Array<"u"?Uint8Array:Array,x=new m(h);x[0]=x[h-1]=1,ai(e,x,s,0,h-1);var B,$=[];for(B=0;B<h;B++)x[B]&&$.push(e[B]);return $}function ai(e,s,h,m,x){var B=0,$,tt,lt;for(tt=m+1;tt<=x-1;tt++)lt=Mr(e[tt],e[m],e[x],!0),lt>B&&($=tt,B=lt);B>h&&(s[$]=1,ai(e,s,h,m,$),ai(e,s,h,$,x))}function xa(e,s){for(var h=[e[0]],m=1,x=0,B=e.length;m<B;m++)su(e[m],e[x])>s&&(h.push(e[m]),x=m);return x<B-1&&h.push(e[B-1]),h}var Fn;function Nn(e,s,h,m,x){var B=m?Fn:mi(e,h),$=mi(s,h),tt,lt,bt;for(Fn=$;;){if(!(B|$))return[e,s];if(B&$)return!1;tt=B||$,lt=yn(e,s,tt,h,x),bt=mi(lt,h),tt===B?(e=lt,B=bt):(s=lt,$=bt)}}function yn(e,s,h,m,x){var B=s.x-e.x,$=s.y-e.y,tt=m.min,lt=m.max,bt,Nt;return h&8?(bt=e.x+B*(lt.y-e.y)/$,Nt=lt.y):h&4?(bt=e.x+B*(tt.y-e.y)/$,Nt=tt.y):h&2?(bt=lt.x,Nt=e.y+$*(lt.x-e.x)/B):h&1&&(bt=tt.x,Nt=e.y+$*(tt.x-e.x)/B),new At(bt,Nt,x)}function mi(e,s){var h=0;return e.x<s.min.x?h|=1:e.x>s.max.x&&(h|=2),e.y<s.min.y?h|=4:e.y>s.max.y&&(h|=8),h}function su(e,s){var h=s.x-e.x,m=s.y-e.y;return h*h+m*m}function Mr(e,s,h,m){var x=s.x,B=s.y,$=h.x-x,tt=h.y-B,lt=$*$+tt*tt,bt;return lt>0&&(bt=((e.x-x)*$+(e.y-B)*tt)/lt,bt>1?(x=h.x,B=h.y):bt>0&&(x+=$*bt,B+=tt*bt)),$=e.x-x,tt=e.y-B,m?$*$+tt*tt:new At(x,B)}function gi(e){return!pt(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function Ri(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gi(e)}function io(e,s){var h,m,x,B,$,tt,lt,bt;if(!e||e.length===0)throw new Error("latlngs not passed");gi(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var Nt=Kt([0,0]),te=ve(e),me=te.getNorthWest().distanceTo(te.getSouthWest())*te.getNorthEast().distanceTo(te.getNorthWest());me<1700&&(Nt=to(e));var fi=e.length,Qe=[];for(h=0;h<fi;h++){var yi=Kt(e[h]);Qe.push(s.project(Kt([yi.lat-Nt.lat,yi.lng-Nt.lng])))}for(h=0,m=0;h<fi-1;h++)m+=Qe[h].distanceTo(Qe[h+1])/2;if(m===0)bt=Qe[0];else for(h=0,B=0;h<fi-1;h++)if($=Qe[h],tt=Qe[h+1],x=$.distanceTo(tt),B+=x,B>m){lt=(B-m)/x,bt=[tt.x-lt*(tt.x-$.x),tt.y-lt*(tt.y-$.y)];break}var He=s.unproject(jt(bt));return Kt([He.lat+Nt.lat,He.lng+Nt.lng])}var ns={__proto__:null,simplify:ba,pointToSegmentDistance:eo,closestPointOnSegment:ru,clipSegment:Nn,_getEdgeIntersection:yn,_getBitCode:mi,_sqClosestPointOnSegment:Mr,isFlat:gi,_flat:Ri,polylineCenter:io},no={project:function(e){return new At(e.lng,e.lat)},unproject:function(e){return new fe(e.y,e.x)},bounds:new se([-180,-90],[180,90])},Oi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new se([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var s=Math.PI/180,h=this.R,m=e.lat*s,x=this.R_MINOR/h,B=Math.sqrt(1-x*x),$=B*Math.sin(m),tt=Math.tan(Math.PI/4-m/2)/Math.pow((1-$)/(1+$),B/2);return m=-h*Math.log(Math.max(tt,1e-10)),new At(e.lng*s*h,m)},unproject:function(e){for(var s=180/Math.PI,h=this.R,m=this.R_MINOR/h,x=Math.sqrt(1-m*m),B=Math.exp(-e.y/h),$=Math.PI/2-2*Math.atan(B),tt=0,lt=.1,bt;tt<15&&Math.abs(lt)>1e-7;tt++)bt=x*Math.sin($),bt=Math.pow((1-bt)/(1+bt),x/2),lt=Math.PI/2-2*Math.atan(B*bt)-$,$+=lt;return new fe($*s,e.x*s/h)}},Ki={__proto__:null,LonLat:no,Mercator:Oi,SphericalMercator:Ut},rs=c({},Dt,{code:"EPSG:3395",projection:Oi,transformation:function(){var e=.5/(Math.PI*Oi.R);return j(e,.5,-e,.5)}()}),ro=c({},Dt,{code:"EPSG:4326",projection:no,transformation:j(1/180,1,-1/180,.5)}),so=c({},dt,{projection:no,transformation:j(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,s){var h=s.lng-e.lng,m=s.lat-e.lat;return Math.sqrt(h*h+m*m)},infinite:!0});dt.Earth=Dt,dt.EPSG3395=rs,dt.EPSG3857=G,dt.EPSG900913=Q,dt.EPSG4326=ro,dt.Simple=so;var ci=$t.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[v(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[v(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var s=e.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var h=this.getEvents();s.on(h,this),this.once("remove",function(){s.off(h,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});ye.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var s=v(e);return this._layers[s]?this:(this._layers[s]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var s=v(e);return this._layers[s]?(this._loaded&&e.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return v(e)in this._layers},eachLayer:function(e,s){for(var h in this._layers)e.call(s,this._layers[h]);return this},_addLayers:function(e){e=e?pt(e)?e:[e]:[];for(var s=0,h=e.length;s<h;s++)this.addLayer(e[s])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[v(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var s=v(e);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,s=-1/0,h=this._getZoomSpan();for(var m in this._zoomBoundLayers){var x=this._zoomBoundLayers[m].options;e=x.minZoom===void 0?e:Math.min(e,x.minZoom),s=x.maxZoom===void 0?s:Math.max(s,x.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=e===1/0?void 0:e,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var tr=ci.extend({initialize:function(e,s){q(this,s),this._layers={};var h,m;if(e)for(h=0,m=e.length;h<m;h++)this.addLayer(e[h])},addLayer:function(e){var s=this.getLayerId(e);return this._layers[s]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var s=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(e){var s=typeof e=="number"?e:this.getLayerId(e);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var s=Array.prototype.slice.call(arguments,1),h,m;for(h in this._layers)m=this._layers[h],m[e]&&m[e].apply(m,s);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,s){for(var h in this._layers)e.call(s,this._layers[h]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return v(e)}}),ou=function(e,s){return new tr(e,s)},ji=tr.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),tr.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),tr.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new Ee;for(var s in this._layers){var h=this._layers[s];e.extend(h.getBounds?h.getBounds():h.getLatLng())}return e}}),au=function(e,s){return new ji(e,s)},er=De.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){q(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,s){var h=this._getIconUrl(e);if(!h){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(h,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(m,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(e,s){var h=this.options,m=h[s+"Size"];typeof m=="number"&&(m=[m,m]);var x=jt(m),B=jt(s==="shadow"&&h.shadowAnchor||h.iconAnchor||x&&x.divideBy(2,!0));e.className="leaflet-marker-"+s+" "+(h.className||""),B&&(e.style.marginLeft=-B.x+"px",e.style.marginTop=-B.y+"px"),x&&(e.style.width=x.x+"px",e.style.height=x.y+"px")},_createImg:function(e,s){return s=s||document.createElement("img"),s.src=e,s},_getIconUrl:function(e){return Jt.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function lu(e){return new er(e)}var Pr=er.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Pr.imagePath!="string"&&(Pr.imagePath=this._detectIconPath()),(this.options.imagePath||Pr.imagePath)+er.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var s=function(h,m,x){var B=m.exec(h);return B&&B[x]};return e=s(e,/^url\((['"])?(.+)\1\)$/,2),e&&s(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=Le("div","leaflet-default-icon-path",document.body),s=mn(e,"background-image")||mn(e,"backgroundImage");if(document.body.removeChild(e),s=this._stripUrl(s),s)return s;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),ss=hi.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new _n(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ue(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var s=this._marker,h=s._map,m=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,B=Dn(s._icon),$=h.getPixelBounds(),tt=h.getPixelOrigin(),lt=Bt($.min._subtract(tt).add(x),$.max._subtract(tt).subtract(x));if(!lt.contains(B)){var bt=jt((Math.max(lt.max.x,B.x)-lt.max.x)/($.max.x-lt.max.x)-(Math.min(lt.min.x,B.x)-lt.min.x)/($.min.x-lt.min.x),(Math.max(lt.max.y,B.y)-lt.max.y)/($.max.y-lt.max.y)-(Math.min(lt.min.y,B.y)-lt.min.y)/($.min.y-lt.min.y)).multiplyBy(m);h.panBy(bt,{animate:!1}),this._draggable._newPos._add(bt),this._draggable._startPos._add(bt),We(s._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=Ot(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(ge(this._panRequest),this._panRequest=Ot(this._adjustPan.bind(this,e)))},_onDrag:function(e){var s=this._marker,h=s._shadow,m=Dn(s._icon),x=s._map.layerPointToLatLng(m);h&&We(h,m),s._latlng=x,e.latlng=x,e.oldLatLng=this._oldLatLng,s.fire("move",e).fire("drag",e)},_onDragEnd:function(e){ge(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),os=ci.extend({options:{icon:new Pr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,s){q(this,s),this._latlng=Kt(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var s=this._latlng;return this._latlng=Kt(e),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=e.icon.createIcon(this._icon),m=!1;h!==this._icon&&(this._icon&&this._removeIcon(),m=!0,e.title&&(h.title=e.title),h.tagName==="IMG"&&(h.alt=e.alt||"")),ue(h,s),e.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ae(h,"focus",this._panOnFocus,this);var x=e.icon.createShadow(this._shadow),B=!1;x!==this._shadow&&(this._removeShadow(),B=!0),x&&(ue(x,s),x.alt=""),this._shadow=x,e.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&B&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Re(this._icon,"focus",this._panOnFocus,this),ze(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ze(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&We(this._icon,e),this._shadow&&We(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var s=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ss)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ss(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&Di(this._icon,e),this._shadow&&Di(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var s=this.options.icon.options,h=s.iconSize?jt(s.iconSize):jt(0,0),m=s.iconAnchor?jt(s.iconAnchor):jt(0,0);e.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:h.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function uu(e,s){return new os(e,s)}var rn=ci.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return q(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Wi=rn.extend({options:{fill:!0,radius:10},initialize:function(e,s){q(this,s),this._latlng=Kt(e),this._radius=this.options.radius},setLatLng:function(e){var s=this._latlng;return this._latlng=Kt(e),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var s=e&&e.radius||this._radius;return rn.prototype.setStyle.call(this,e),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,s=this._radiusY||e,h=this._clickTolerance(),m=[e+h,s+h];this._pxBounds=new se(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wa(e,s){return new Wi(e,s)}var oo=Wi.extend({initialize:function(e,s,h){if(typeof s=="number"&&(s=c({},h,{radius:s})),q(this,s),this._latlng=Kt(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new Ee(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:rn.prototype.setStyle,_project:function(){var e=this._latlng.lng,s=this._latlng.lat,h=this._map,m=h.options.crs;if(m.distance===Dt.distance){var x=Math.PI/180,B=this._mRadius/Dt.R/x,$=h.project([s+B,e]),tt=h.project([s-B,e]),lt=$.add(tt).divideBy(2),bt=h.unproject(lt).lat,Nt=Math.acos((Math.cos(B*x)-Math.sin(s*x)*Math.sin(bt*x))/(Math.cos(s*x)*Math.cos(bt*x)))/x;(isNaN(Nt)||Nt===0)&&(Nt=B/Math.cos(Math.PI/180*s)),this._point=lt.subtract(h.getPixelOrigin()),this._radius=isNaN(Nt)?0:lt.x-h.project([bt,e-Nt]).x,this._radiusY=lt.y-$.y}else{var te=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(te).x}this._updateBounds()}});function zn(e,s,h){return new oo(e,s,h)}var sn=rn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,s){q(this,s),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var s=1/0,h=null,m=Mr,x,B,$=0,tt=this._parts.length;$<tt;$++)for(var lt=this._parts[$],bt=1,Nt=lt.length;bt<Nt;bt++){x=lt[bt-1],B=lt[bt];var te=m(e,x,B,!0);te<s&&(s=te,h=m(e,x,B))}return h&&(h.distance=Math.sqrt(s)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return io(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,s){return s=s||this._defaultShape(),e=Kt(e),s.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new Ee,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return gi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var s=[],h=gi(e),m=0,x=e.length;m<x;m++)h?(s[m]=Kt(e[m]),this._bounds.extend(s[m])):s[m]=this._convertLatLngs(e[m]);return s},_project:function(){var e=new se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),s=new At(e,e);this._rawPxBounds&&(this._pxBounds=new se([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(e,s,h){var m=e[0]instanceof fe,x=e.length,B,$;if(m){for($=[],B=0;B<x;B++)$[B]=this._map.latLngToLayerPoint(e[B]),h.extend($[B]);s.push($)}else for(B=0;B<x;B++)this._projectLatlngs(e[B],s,h)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,h,m,x,B,$,tt,lt;for(h=0,x=0,B=this._rings.length;h<B;h++)for(lt=this._rings[h],m=0,$=lt.length;m<$-1;m++)tt=Nn(lt[m],lt[m+1],e,m,!0),tt&&(s[x]=s[x]||[],s[x].push(tt[0]),(tt[1]!==lt[m+1]||m===$-2)&&(s[x].push(tt[1]),x++))}},_simplifyPoints:function(){for(var e=this._parts,s=this.options.smoothFactor,h=0,m=e.length;h<m;h++)e[h]=ba(e[h],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,s){var h,m,x,B,$,tt,lt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(h=0,B=this._parts.length;h<B;h++)for(tt=this._parts[h],m=0,$=tt.length,x=$-1;m<$;x=m++)if(!(!s&&m===0)&&eo(e,tt[x],tt[m])<=lt)return!0;return!1}});function hu(e,s){return new sn(e,s)}sn._flat=Ri;var vn=sn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return va(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var s=sn.prototype._convertLatLngs.call(this,e),h=s.length;return h>=2&&s[0]instanceof fe&&s[0].equals(s[h-1])&&s.pop(),s},_setLatLngs:function(e){sn.prototype._setLatLngs.call(this,e),gi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,s=this.options.weight,h=new At(s,s);if(e=new se(e.min.subtract(h),e.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,x=this._rings.length,B;m<x;m++)B=ya(this._rings[m],e,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var s=!1,h,m,x,B,$,tt,lt,bt;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(B=0,lt=this._parts.length;B<lt;B++)for(h=this._parts[B],$=0,bt=h.length,tt=bt-1;$<bt;tt=$++)m=h[$],x=h[tt],m.y>e.y!=x.y>e.y&&e.x<(x.x-m.x)*(e.y-m.y)/(x.y-m.y)+m.x&&(s=!s);return s||sn.prototype._containsPoint.call(this,e,!0)}});function Br(e,s){return new vn(e,s)}var on=ji.extend({initialize:function(e,s){q(this,s),this._layers={},e&&this.addData(e)},addData:function(e){var s=pt(e)?e:e.features,h,m,x;if(s){for(h=0,m=s.length;h<m;h++)x=s[h],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var B=this.options;if(B.filter&&!B.filter(e))return this;var $=as(e,B);return $?($.feature=ds(e),$.defaultOptions=$.options,this.resetStyle($),B.onEachFeature&&B.onEachFeature(e,$),this.addLayer($)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=c({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(s){this._setLayerStyle(s,e)},this)},_setLayerStyle:function(e,s){e.setStyle&&(typeof s=="function"&&(s=s(e.feature)),e.setStyle(s))}});function as(e,s){var h=e.type==="Feature"?e.geometry:e,m=h?h.coordinates:null,x=[],B=s&&s.pointToLayer,$=s&&s.coordsToLatLng||ls,tt,lt,bt,Nt;if(!m&&!h)return null;switch(h.type){case"Point":return tt=$(m),La(B,e,tt,s);case"MultiPoint":for(bt=0,Nt=m.length;bt<Nt;bt++)tt=$(m[bt]),x.push(La(B,e,tt,s));return new ji(x);case"LineString":case"MultiLineString":return lt=us(m,h.type==="LineString"?0:1,$),new sn(lt,s);case"Polygon":case"MultiPolygon":return lt=us(m,h.type==="Polygon"?1:2,$),new vn(lt,s);case"GeometryCollection":for(bt=0,Nt=h.geometries.length;bt<Nt;bt++){var te=as({geometry:h.geometries[bt],type:"Feature",properties:e.properties},s);te&&x.push(te)}return new ji(x);case"FeatureCollection":for(bt=0,Nt=h.features.length;bt<Nt;bt++){var me=as(h.features[bt],s);me&&x.push(me)}return new ji(x);default:throw new Error("Invalid GeoJSON object.")}}function La(e,s,h,m){return e?e(s,h):new os(h,m&&m.markersInheritOptions&&m)}function ls(e){return new fe(e[1],e[0],e[2])}function us(e,s,h){for(var m=[],x=0,B=e.length,$;x<B;x++)$=s?us(e[x],s-1,h):(h||ls)(e[x]),m.push($);return m}function hs(e,s){return e=Kt(e),e.alt!==void 0?[O(e.lng,s),O(e.lat,s),O(e.alt,s)]:[O(e.lng,s),O(e.lat,s)]}function cs(e,s,h,m){for(var x=[],B=0,$=e.length;B<$;B++)x.push(s?cs(e[B],gi(e[B])?0:s-1,h,m):hs(e[B],m));return!s&&h&&x.length>0&&x.push(x[0].slice()),x}function ir(e,s){return e.feature?c({},e.feature,{geometry:s}):ds(s)}function ds(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var fs={toGeoJSON:function(e){return ir(this,{type:"Point",coordinates:hs(this.getLatLng(),e)})}};os.include(fs),oo.include(fs),Wi.include(fs),sn.include({toGeoJSON:function(e){var s=!gi(this._latlngs),h=cs(this._latlngs,s?1:0,!1,e);return ir(this,{type:(s?"Multi":"")+"LineString",coordinates:h})}}),vn.include({toGeoJSON:function(e){var s=!gi(this._latlngs),h=s&&!gi(this._latlngs[0]),m=cs(this._latlngs,h?2:s?1:0,!0,e);return s||(m=[m]),ir(this,{type:(h?"Multi":"")+"Polygon",coordinates:m})}}),tr.include({toMultiPoint:function(e){var s=[];return this.eachLayer(function(h){s.push(h.toGeoJSON(e).geometry.coordinates)}),ir(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(e){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(e);var h=s==="GeometryCollection",m=[];return this.eachLayer(function(x){if(x.toGeoJSON){var B=x.toGeoJSON(e);if(h)m.push(B.geometry);else{var $=ds(B);$.type==="FeatureCollection"?m.push.apply(m,$.features):m.push($)}}}),h?ir(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function ps(e,s){return new on(e,s)}var Ca=ps,nr=ci.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,s,h){this._url=e,this._bounds=ve(s),q(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ze(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Xn(this._image),this},bringToBack:function(){return this._map&&An(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=ve(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",s=this._image=e?this._url:Le("img");if(ue(s,"leaflet-image-layer"),this._zoomAnimated&&ue(s,"leaflet-zoom-animated"),this.options.className&&ue(s,this.options.className),s.onselectstart=E,s.onmousemove=E,s.onload=f(this.fire,this,"load"),s.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(e){var s=this._map.getZoomScale(e.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Tn(this._image,h,s)},_reset:function(){var e=this._image,s=new se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=s.getSize();We(e,s.min),e.style.width=h.x+"px",e.style.height=h.y+"px"},_updateOpacity:function(){Di(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),cu=function(e,s,h){return new nr(e,s,h)},Sr=nr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",s=this._image=e?this._url:Le("video");if(ue(s,"leaflet-image-layer"),this._zoomAnimated&&ue(s,"leaflet-zoom-animated"),this.options.className&&ue(s,this.options.className),s.onselectstart=E,s.onmousemove=E,s.onloadeddata=f(this.fire,this,"load"),e){for(var h=s.getElementsByTagName("source"),m=[],x=0;x<h.length;x++)m.push(h[x].src);this._url=h.length>0?m:[s.src];return}pt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var $=Le("source");$.src=this._url[B],s.appendChild($)}}});function ka(e,s,h){return new Sr(e,s,h)}var Ea=nr.extend({_initImage:function(){var e=this._image=this._url;ue(e,"leaflet-image-layer"),this._zoomAnimated&&ue(e,"leaflet-zoom-animated"),this.options.className&&ue(e,this.options.className),e.onselectstart=E,e.onmousemove=E}});function du(e,s,h){return new Ea(e,s,h)}var Ji=ci.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,s){e&&(e instanceof fe||pt(e))?(this._latlng=Kt(e),q(this,s)):(q(this,e),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&Di(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&Di(this._container,1),this.bringToFront(),this.options.interactive&&(ue(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(Di(this._container,0),this._removeTimeout=setTimeout(f(ze,void 0,this._container),200)):ze(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=Kt(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Xn(this._container),this},bringToBack:function(){return this._map&&An(this._container),this},_prepareOpen:function(e){var s=this._source;if(!s._map)return!1;if(s instanceof ji){s=null;var h=this._source._layers;for(var m in h)if(h[m]._map){s=h[m];break}if(!s)return!1;this._source=s}if(!e)if(s.getCenter)e=s.getCenter();else if(s.getLatLng)e=s.getLatLng();else if(s.getBounds)e=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")e.innerHTML=s;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),s=jt(this.options.offset),h=this._getAnchor();this._zoomAnimated?We(this._container,e.add(h)):s=s.add(e).add(h);var m=this._containerBottom=-s.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=m+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});ye.include({_initOverlay:function(e,s,h,m){var x=s;return x instanceof e||(x=new e(m).setContent(s)),h&&x.setLatLng(h),x}}),ci.include({_initOverlay:function(e,s,h,m){var x=h;return x instanceof e?(q(x,m),x._source=this):(x=s&&!m?s:new e(m,this),x.setContent(h)),x}});var bn=Ji.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Ji.prototype.openOn.call(this,e)},onAdd:function(e){Ji.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rn||this._source.on("preclick",Rn))},onRemove:function(e){Ji.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rn||this._source.off("preclick",Rn))},getEvents:function(){var e=Ji.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",s=this._container=Le("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Le("div",e+"-content-wrapper",s);if(this._contentNode=Le("div",e+"-content",h),kr(s),Xs(this._contentNode),ae(s,"contextmenu",Rn),this._tipContainer=Le("div",e+"-tip-container",s),this._tip=Le("div",e+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Le("a",e+"-close-button",s);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',ae(m,"click",function(x){ii(x),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,s=e.style;s.width="",s.whiteSpace="nowrap";var h=e.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),s.width=h+1+"px",s.whiteSpace="",s.height="";var m=e.offsetHeight,x=this.options.maxHeight,B="leaflet-popup-scrolled";x&&m>x?(s.height=x+"px",ue(e,B)):Ze(e,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var s=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),h=this._getAnchor();We(this._container,s.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,s=parseInt(mn(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+s,m=this._containerWidth,x=new At(this._containerLeft,-h-this._containerBottom);x._add(Dn(this._container));var B=e.layerPointToContainerPoint(x),$=jt(this.options.autoPanPadding),tt=jt(this.options.autoPanPaddingTopLeft||$),lt=jt(this.options.autoPanPaddingBottomRight||$),bt=e.getSize(),Nt=0,te=0;B.x+m+lt.x>bt.x&&(Nt=B.x+m-bt.x+lt.x),B.x-Nt-tt.x<0&&(Nt=B.x-tt.x),B.y+h+lt.y>bt.y&&(te=B.y+h-bt.y+lt.y),B.y-te-tt.y<0&&(te=B.y-tt.y),(Nt||te)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([Nt,te]))}},_getAnchor:function(){return jt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),fu=function(e,s){return new bn(e,s)};ye.mergeOptions({closePopupOnClick:!0}),ye.include({openPopup:function(e,s,h){return this._initOverlay(bn,e,s,h).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),ci.include({bindPopup:function(e,s){return this._popup=this._initOverlay(bn,this._popup,e,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof ji||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){On(e);var s=e.layer||e.target;if(this._popup._source===s&&!(s instanceof rn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=s,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var ms=Ji.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Ji.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Ji.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Ji.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",s=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Le("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var s,h,m=this._map,x=this._container,B=m.latLngToContainerPoint(m.getCenter()),$=m.layerPointToContainerPoint(e),tt=this.options.direction,lt=x.offsetWidth,bt=x.offsetHeight,Nt=jt(this.options.offset),te=this._getAnchor();tt==="top"?(s=lt/2,h=bt):tt==="bottom"?(s=lt/2,h=0):tt==="center"?(s=lt/2,h=bt/2):tt==="right"?(s=0,h=bt/2):tt==="left"?(s=lt,h=bt/2):$.x<B.x?(tt="right",s=0,h=bt/2):(tt="left",s=lt+(Nt.x+te.x)*2,h=bt/2),e=e.subtract(jt(s,h,!0)).add(Nt).add(te),Ze(x,"leaflet-tooltip-right"),Ze(x,"leaflet-tooltip-left"),Ze(x,"leaflet-tooltip-top"),Ze(x,"leaflet-tooltip-bottom"),ue(x,"leaflet-tooltip-"+tt),We(x,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&Di(this._container,e)},_animateZoom:function(e){var s=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(s)},_getAnchor:function(){return jt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),pu=function(e,s){return new ms(e,s)};ye.include({openTooltip:function(e,s,h){return this._initOverlay(ms,e,s,h).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),ci.include({bindTooltip:function(e,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ms,this._tooltip,e,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var s=e?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[s](h),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof ji||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var s=typeof e.getElement=="function"&&e.getElement();s&&(ae(s,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),ae(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var s=typeof e.getElement=="function"&&e.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var s=e.latlng,h,m;this._tooltip.options.sticky&&e.originalEvent&&(h=this._map.mouseEventToContainerPoint(e.originalEvent),m=this._map.containerPointToLayerPoint(h),s=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(s)}});var Ma=er.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var s=e&&e.tagName==="DIV"?e:document.createElement("div"),h=this.options;if(h.html instanceof Element?(wr(s),s.appendChild(h.html)):s.innerHTML=h.html!==!1?h.html:"",h.bgPos){var m=jt(h.bgPos);s.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function mu(e){return new Ma(e)}er.Default=Pr;var Ar=ci.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Jt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){q(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),ze(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Xn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(An(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=M(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof At?e:new At(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var s=this.getPane().children,h=-e(-1/0,1/0),m=0,x=s.length,B;m<x;m++)B=s[m].style.zIndex,s[m]!==this._container&&B&&(h=e(h,+B));isFinite(h)&&(this.options.zIndex=h+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Jt.ielt9){Di(this._container,this.options.opacity);var e=+new Date,s=!1,h=!1;for(var m in this._tiles){var x=this._tiles[m];if(!(!x.current||!x.loaded)){var B=Math.min(1,(e-x.loaded)/200);Di(x.el,B),B<1?s=!0:(x.active?h=!0:this._onOpaqueTile(x),x.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),s&&(ge(this._fadeFrame),this._fadeFrame=Ot(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=Le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,s=this.options.maxZoom;if(e!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===e?(this._levels[h].el.style.zIndex=s-Math.abs(e-h),this._onUpdateLevel(h)):(ze(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var m=this._levels[e],x=this._map;return m||(m=this._levels[e]={},m.el=Le("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=s,m.origin=x.project(x.unproject(x.getPixelOrigin()),e).round(),m.zoom=e,this._setZoomTransform(m,x.getCenter(),x.getZoom()),E(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var e,s,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)s=this._tiles[e],s.retain=s.current;for(e in this._tiles)if(s=this._tiles[e],s.current&&!s.active){var m=s.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var s in this._tiles)this._tiles[s].coords.z===e&&this._removeTile(s)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)ze(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,s,h,m){var x=Math.floor(e/2),B=Math.floor(s/2),$=h-1,tt=new At(+x,+B);tt.z=+$;var lt=this._tileCoordsToKey(tt),bt=this._tiles[lt];return bt&&bt.active?(bt.retain=!0,!0):(bt&&bt.loaded&&(bt.retain=!0),$>m?this._retainParent(x,B,$,m):!1)},_retainChildren:function(e,s,h,m){for(var x=2*e;x<2*e+2;x++)for(var B=2*s;B<2*s+2;B++){var $=new At(x,B);$.z=h+1;var tt=this._tileCoordsToKey($),lt=this._tiles[tt];if(lt&&lt.active){lt.retain=!0;continue}else lt&&lt.loaded&&(lt.retain=!0);h+1<m&&this._retainChildren(x,B,h+1,m)}},_resetView:function(e){var s=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var s=this.options;return s.minNativeZoom!==void 0&&e<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<e?s.maxNativeZoom:e},_setView:function(e,s,h,m){var x=Math.round(s);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var B=this.options.updateWhenZooming&&x!==this._tileZoom;(!m||B)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(e),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(e,s)},_setZoomTransforms:function(e,s){for(var h in this._levels)this._setZoomTransform(this._levels[h],e,s)},_setZoomTransform:function(e,s,h){var m=this._map.getZoomScale(h,e.zoom),x=e.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(s,h)).round();Jt.any3d?Tn(e.el,x,m):We(e.el,x)},_resetGrid:function(){var e=this._map,s=e.options.crs,h=this._tileSize=this.getTileSize(),m=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,s.wrapLng[0]],m).x/h.x),Math.ceil(e.project([0,s.wrapLng[1]],m).x/h.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([s.wrapLat[0],0],m).y/h.x),Math.ceil(e.project([s.wrapLat[1],0],m).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var s=this._map,h=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),m=s.getZoomScale(h,this._tileZoom),x=s.project(e,this._tileZoom).floor(),B=s.getSize().divideBy(m*2);return new se(x.subtract(B),x.add(B))},_update:function(e){var s=this._map;if(s){var h=this._clampZoom(s.getZoom());if(e===void 0&&(e=s.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(e),x=this._pxBoundsToTileRange(m),B=x.getCenter(),$=[],tt=this.options.keepBuffer,lt=new se(x.getBottomLeft().subtract([tt,-tt]),x.getTopRight().add([tt,-tt]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var bt in this._tiles){var Nt=this._tiles[bt].coords;(Nt.z!==this._tileZoom||!lt.contains(new At(Nt.x,Nt.y)))&&(this._tiles[bt].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(e,h);return}for(var te=x.min.y;te<=x.max.y;te++)for(var me=x.min.x;me<=x.max.x;me++){var fi=new At(me,te);if(fi.z=this._tileZoom,!!this._isValidTile(fi)){var Qe=this._tiles[this._tileCoordsToKey(fi)];Qe?Qe.current=!0:$.push(fi)}}if($.sort(function(He,Yi){return He.distanceTo(B)-Yi.distanceTo(B)}),$.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yi=document.createDocumentFragment();for(me=0;me<$.length;me++)this._addTile($[me],yi);this._level.el.appendChild(yi)}}}},_isValidTile:function(e){var s=this._map.options.crs;if(!s.infinite){var h=this._globalTileRange;if(!s.wrapLng&&(e.x<h.min.x||e.x>h.max.x)||!s.wrapLat&&(e.y<h.min.y||e.y>h.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(e);return ve(this.options.bounds).overlaps(m)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var s=this._map,h=this.getTileSize(),m=e.scaleBy(h),x=m.add(h),B=s.unproject(m,e.z),$=s.unproject(x,e.z);return[B,$]},_tileCoordsToBounds:function(e){var s=this._tileCoordsToNwSe(e),h=new Ee(s[0],s[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var s=e.split(":"),h=new At(+s[0],+s[1]);return h.z=+s[2],h},_removeTile:function(e){var s=this._tiles[e];s&&(ze(s.el),delete this._tiles[e],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){ue(e,"leaflet-tile");var s=this.getTileSize();e.style.width=s.x+"px",e.style.height=s.y+"px",e.onselectstart=E,e.onmousemove=E,Jt.ielt9&&this.options.opacity<1&&Di(e,this.options.opacity)},_addTile:function(e,s){var h=this._getTilePos(e),m=this._tileCoordsToKey(e),x=this.createTile(this._wrapCoords(e),f(this._tileReady,this,e));this._initTile(x),this.createTile.length<2&&Ot(f(this._tileReady,this,e,null,x)),We(x,h),this._tiles[m]={el:x,coords:e,current:!0},s.appendChild(x),this.fire("tileloadstart",{tile:x,coords:e})},_tileReady:function(e,s,h){s&&this.fire("tileerror",{error:s,tile:h,coords:e});var m=this._tileCoordsToKey(e);h=this._tiles[m],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Di(h.el,0),ge(this._fadeFrame),this._fadeFrame=Ot(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),s||(ue(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Jt.ielt9||!this._map._fadeAnimated?Ot(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var s=new At(this._wrapX?k(e.x,this._wrapX):e.x,this._wrapY?k(e.y,this._wrapY):e.y);return s.z=e.z,s},_pxBoundsToTileRange:function(e){var s=this.getTileSize();return new se(e.min.unscaleBy(s).floor(),e.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function gu(e){return new Ar(e)}var rr=Ar.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,s){this._url=e,s=q(this,s),s.detectRetina&&Jt.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,s){return this._url===e&&s===void 0&&(s=!0),this._url=e,s||this.redraw(),this},createTile:function(e,s){var h=document.createElement("img");return ae(h,"load",f(this._tileOnLoad,this,s,h)),ae(h,"error",f(this._tileOnError,this,s,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(e),h},getTileUrl:function(e){var s={r:Jt.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-e.y;this.options.tms&&(s.y=h),s["-y"]=h}return gt(this._url,c(s,this.options))},_tileOnLoad:function(e,s){Jt.ielt9?setTimeout(f(e,this,null,s),0):e(null,s)},_tileOnError:function(e,s,h){var m=this.options.errorTileUrl;m&&s.getAttribute("src")!==m&&(s.src=m),e(h,s)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,s=this.options.maxZoom,h=this.options.zoomReverse,m=this.options.zoomOffset;return h&&(e=s-e),e+m},_getSubdomain:function(e){var s=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var e,s;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(s=this._tiles[e].el,s.onload=E,s.onerror=E,!s.complete)){s.src=ut;var h=this._tiles[e].coords;ze(s),delete this._tiles[e],this.fire("tileabort",{tile:s,coords:h})}},_removeTile:function(e){var s=this._tiles[e];if(s)return s.el.setAttribute("src",ut),Ar.prototype._removeTile.call(this,e)},_tileReady:function(e,s,h){if(!(!this._map||h&&h.getAttribute("src")===ut))return Ar.prototype._tileReady.call(this,e,s,h)}});function ao(e,s){return new rr(e,s)}var gs=rr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,s){this._url=e;var h=c({},this.defaultWmsParams);for(var m in s)m in this.options||(h[m]=s[m]);s=q(this,s);var x=s.detectRetina&&Jt.retina?2:1,B=this.getTileSize();h.width=B.x*x,h.height=B.y*x,this.wmsParams=h},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,rr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var s=this._tileCoordsToNwSe(e),h=this._crs,m=Bt(h.project(s[0]),h.project(s[1])),x=m.min,B=m.max,$=(this._wmsVersion>=1.3&&this._crs===ro?[x.y,x.x,B.y,B.x]:[x.x,x.y,B.x,B.y]).join(","),tt=rr.prototype.getTileUrl.call(this,e);return tt+X(this.wmsParams,tt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+$},setParams:function(e,s){return c(this.wmsParams,e),s||this.redraw(),this}});function _u(e,s){return new gs(e,s)}rr.WMS=gs,ao.wms=_u;var an=ci.extend({options:{padding:.1},initialize:function(e){q(this,e),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,s){var h=this._map.getZoomScale(s,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,s),B=m.multiplyBy(-h).add(x).subtract(this._map._getNewPixelOrigin(e,s));Jt.any3d?Tn(this._container,B,h):We(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,s=this._map.getSize(),h=this._map.containerPointToLayerPoint(s.multiplyBy(-e)).round();this._bounds=new se(h,h.add(s.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),lo=an.extend({options:{tolerance:0},getEvents:function(){var e=an.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){an.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");ae(e,"mousemove",this._onMouseMove,this),ae(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ae(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){ge(this._redrawRequest),delete this._ctx,ze(this._container),Re(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var s in this._layers)e=this._layers[s],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){an.prototype._update.call(this);var e=this._bounds,s=this._container,h=e.getSize(),m=Jt.retina?2:1;We(s,e.min),s.width=m*h.x,s.height=m*h.y,s.style.width=h.x+"px",s.style.height=h.y+"px",Jt.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){an.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[v(e)]=e;var s=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var s=e._order,h=s.next,m=s.prev;h?h.prev=m:this._drawLast=m,m?m.next=h:this._drawFirst=h,delete e._order,delete this._layers[v(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var s=e.options.dashArray.split(/[, ]+/),h=[],m,x;for(x=0;x<s.length;x++){if(m=Number(s[x]),isNaN(m))return;h.push(m)}e.options._dashArray=h}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||Ot(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var s=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new se,this._redrawBounds.extend(e._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(e._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var s=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,s=this._redrawBounds;if(this._ctx.save(),s){var h=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)e=m.layer,(!s||e._pxBounds&&e._pxBounds.intersects(s))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,s){if(this._drawing){var h,m,x,B,$=e._parts,tt=$.length,lt=this._ctx;if(tt){for(lt.beginPath(),h=0;h<tt;h++){for(m=0,x=$[h].length;m<x;m++)B=$[h][m],lt[m?"lineTo":"moveTo"](B.x,B.y);s&&lt.closePath()}this._fillStroke(lt,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var s=e._point,h=this._ctx,m=Math.max(Math.round(e._radius),1),x=(Math.max(Math.round(e._radiusY),1)||m)/m;x!==1&&(h.save(),h.scale(1,x)),h.beginPath(),h.arc(s.x,s.y/x,m,0,Math.PI*2,!1),x!==1&&h.restore(),this._fillStroke(h,e)}},_fillStroke:function(e,s){var h=s.options;h.fill&&(e.globalAlpha=h.fillOpacity,e.fillStyle=h.fillColor||h.color,e.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(e.setLineDash&&e.setLineDash(s.options&&s.options._dashArray||[]),e.globalAlpha=h.opacity,e.lineWidth=h.weight,e.strokeStyle=h.color,e.lineCap=h.lineCap,e.lineJoin=h.lineJoin,e.stroke())},_onClick:function(e){for(var s=this._map.mouseEventToLayerPoint(e),h,m,x=this._drawFirst;x;x=x.next)h=x.layer,h.options.interactive&&h._containsPoint(s)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(h))&&(m=h);this._fireEvent(m?[m]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,s)}},_handleMouseOut:function(e){var s=this._hoveredLayer;s&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([s],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,s){if(!this._mouseHoverThrottled){for(var h,m,x=this._drawFirst;x;x=x.next)h=x.layer,h.options.interactive&&h._containsPoint(s)&&(m=h);m!==this._hoveredLayer&&(this._handleMouseOut(e),m&&(ue(this._container,"leaflet-interactive"),this._fireEvent([m],e,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,s,h){this._map._fireDOMEvent(s,h||s.type,e)},_bringToFront:function(e){var s=e._order;if(s){var h=s.next,m=s.prev;if(h)h.prev=m;else return;m?m.next=h:h&&(this._drawFirst=h),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(e)}},_bringToBack:function(e){var s=e._order;if(s){var h=s.next,m=s.prev;if(m)m.next=h;else return;h?h.prev=m:m&&(this._drawLast=m),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(e)}}});function _s(e){return Jt.canvas?new lo(e):null}var Tr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),yu={_initContainer:function(){this._container=Le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(an.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var s=e._container=Tr("shape");ue(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",e._path=Tr("path"),s.appendChild(e._path),this._updateStyle(e),this._layers[v(e)]=e},_addPath:function(e){var s=e._container;this._container.appendChild(s),e.options.interactive&&e.addInteractiveTarget(s)},_removePath:function(e){var s=e._container;ze(s),e.removeInteractiveTarget(s),delete this._layers[v(e)]},_updateStyle:function(e){var s=e._stroke,h=e._fill,m=e.options,x=e._container;x.stroked=!!m.stroke,x.filled=!!m.fill,m.stroke?(s||(s=e._stroke=Tr("stroke")),x.appendChild(s),s.weight=m.weight+"px",s.color=m.color,s.opacity=m.opacity,m.dashArray?s.dashStyle=pt(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=m.lineCap.replace("butt","flat"),s.joinstyle=m.lineJoin):s&&(x.removeChild(s),e._stroke=null),m.fill?(h||(h=e._fill=Tr("fill")),x.appendChild(h),h.color=m.fillColor||m.color,h.opacity=m.fillOpacity):h&&(x.removeChild(h),e._fill=null)},_updateCircle:function(e){var s=e._point.round(),h=Math.round(e._radius),m=Math.round(e._radiusY||h);this._setPath(e,e._empty()?"M0 0":"AL "+s.x+","+s.y+" "+h+","+m+" 0,"+65535*360)},_setPath:function(e,s){e._path.v=s},_bringToFront:function(e){Xn(e._container)},_bringToBack:function(e){An(e._container)}},sr=Jt.vml?Tr:mt,li=an.extend({_initContainer:function(){this._container=sr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ze(this._container),Re(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){an.prototype._update.call(this);var e=this._bounds,s=e.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,h.setAttribute("width",s.x),h.setAttribute("height",s.y)),We(h,e.min),h.setAttribute("viewBox",[e.min.x,e.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(e){var s=e._path=sr("path");e.options.className&&ue(s,e.options.className),e.options.interactive&&ue(s,"leaflet-interactive"),this._updateStyle(e),this._layers[v(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){ze(e._path),e.removeInteractiveTarget(e._path),delete this._layers[v(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var s=e._path,h=e.options;s&&(h.stroke?(s.setAttribute("stroke",h.color),s.setAttribute("stroke-opacity",h.opacity),s.setAttribute("stroke-width",h.weight),s.setAttribute("stroke-linecap",h.lineCap),s.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?s.setAttribute("stroke-dasharray",h.dashArray):s.removeAttribute("stroke-dasharray"),h.dashOffset?s.setAttribute("stroke-dashoffset",h.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),h.fill?(s.setAttribute("fill",h.fillColor||h.color),s.setAttribute("fill-opacity",h.fillOpacity),s.setAttribute("fill-rule",h.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(e,s){this._setPath(e,yt(e._parts,s))},_updateCircle:function(e){var s=e._point,h=Math.max(Math.round(e._radius),1),m=Math.max(Math.round(e._radiusY),1)||h,x="a"+h+","+m+" 0 1,0 ",B=e._empty()?"M0 0":"M"+(s.x-h)+","+s.y+x+h*2+",0 "+x+-h*2+",0 ";this._setPath(e,B)},_setPath:function(e,s){e._path.setAttribute("d",s)},_bringToFront:function(e){Xn(e._path)},_bringToBack:function(e){An(e._path)}});Jt.vml&&li.include(yu);function di(e){return Jt.svg||Jt.vml?new li(e):null}ye.include({getRenderer:function(e){var s=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var s=this._paneRenderers[e];return s===void 0&&(s=this._createRenderer({pane:e}),this._paneRenderers[e]=s),s},_createRenderer:function(e){return this.options.preferCanvas&&_s(e)||di(e)}});var uo=vn.extend({initialize:function(e,s){vn.prototype.initialize.call(this,this._boundsToLatLngs(e),s)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=ve(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Ui(e,s){return new uo(e,s)}li.create=sr,li.pointsToPath=yt,on.geometryToLayer=as,on.coordsToLatLng=ls,on.coordsToLatLngs=us,on.latLngToCoords=hs,on.latLngsToCoords=cs,on.getFeature=ir,on.asFeature=ds,ye.mergeOptions({boxZoom:!0});var re=hi.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Re(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ze(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Lr(),Hs(),this._startPoint=this._map.mouseEventToContainerPoint(e),ae(document,{contextmenu:On,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=Le("div","leaflet-zoom-box",this._container),ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var s=new se(this._point,this._startPoint),h=s.getSize();We(this._box,s.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(ze(this._box),Ze(this._container,"leaflet-crosshair")),Cr(),Zs(),Re(document,{contextmenu:On,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var s=new Ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ye.addInitHook("addHandler","boxZoom",re),ye.mergeOptions({doubleClickZoom:!0});var ho=hi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var s=this._map,h=s.getZoom(),m=s.options.zoomDelta,x=e.originalEvent.shiftKey?h-m:h+m;s.options.doubleClickZoom==="center"?s.setZoom(x):s.setZoomAround(e.containerPoint,x)}});ye.addInitHook("addHandler","doubleClickZoom",ho),ye.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ys=hi.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new _n(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=ve(this._map.options.maxBounds);this._offsetLimit=Bt(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var s=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(s),this._prunePositions(s)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,s){return e-(e-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;e.x<s.min.x&&(e.x=this._viscousLimit(e.x,s.min.x)),e.y<s.min.y&&(e.y=this._viscousLimit(e.y,s.min.y)),e.x>s.max.x&&(e.x=this._viscousLimit(e.x,s.max.x)),e.y>s.max.y&&(e.y=this._viscousLimit(e.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,s=Math.round(e/2),h=this._initialWorldOffset,m=this._draggable._newPos.x,x=(m-s+h)%e+s-h,B=(m+s+h)%e-s-h,$=Math.abs(x+h)<Math.abs(B+h)?x:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=$},_onDragEnd:function(e){var s=this._map,h=s.options,m=!h.inertia||e.noInertia||this._times.length<2;if(s.fire("dragend",e),m)s.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,$=h.easeLinearity,tt=x.multiplyBy($/B),lt=tt.distanceTo([0,0]),bt=Math.min(h.inertiaMaxSpeed,lt),Nt=tt.multiplyBy(bt/lt),te=bt/(h.inertiaDeceleration*$),me=Nt.multiplyBy(-te/2).round();!me.x&&!me.y?s.fire("moveend"):(me=s._limitOffset(me,s.options.maxBounds),Ot(function(){s.panBy(me,{duration:te,easeLinearity:$,noMoveStart:!0,animate:!0})}))}}});ye.addInitHook("addHandler","dragging",ys),ye.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ln=hi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),ae(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Re(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,s=document.documentElement,h=e.scrollTop||s.scrollTop,m=e.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(m,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var s=this._panKeys={},h=this.keyCodes,m,x;for(m=0,x=h.left.length;m<x;m++)s[h.left[m]]=[-1*e,0];for(m=0,x=h.right.length;m<x;m++)s[h.right[m]]=[e,0];for(m=0,x=h.down.length;m<x;m++)s[h.down[m]]=[0,e];for(m=0,x=h.up.length;m<x;m++)s[h.up[m]]=[0,-1*e]},_setZoomDelta:function(e){var s=this._zoomKeys={},h=this.keyCodes,m,x;for(m=0,x=h.zoomIn.length;m<x;m++)s[h.zoomIn[m]]=e;for(m=0,x=h.zoomOut.length;m<x;m++)s[h.zoomOut[m]]=-e},_addHooks:function(){ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Re(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var s=e.keyCode,h=this._map,m;if(s in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(m=this._panKeys[s],e.shiftKey&&(m=jt(m).multiplyBy(3)),h.options.maxBounds&&(m=h._limitOffset(jt(m),h.options.maxBounds)),h.options.worldCopyJump){var x=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(m)));h.panTo(x)}else h.panBy(m)}else if(s in this._zoomKeys)h.setZoom(h.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;On(e)}}});ye.addInitHook("addHandler","keyboard",ln),ye.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _i=hi.extend({addHooks:function(){ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Re(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var s=fa(e),h=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var m=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),m),On(e)},_performZoom:function(){var e=this._map,s=e.getZoom(),h=this._map.options.zoomSnap||0;e._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,B=h?Math.ceil(x/h)*h:x,$=e._limitZoom(s+(this._delta>0?B:-B))-s;this._delta=0,this._startTime=null,$&&(e.options.scrollWheelZoom==="center"?e.setZoom(s+$):e.setZoomAround(this._lastMousePos,s+$))}});ye.addInitHook("addHandler","scrollWheelZoom",_i);var Pa=600;ye.mergeOptions({tapHold:Jt.touchNative&&Jt.safari&&Jt.mobile,tapTolerance:15});var Ei=hi.extend({addHooks:function(){ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Re(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var s=e.touches[0];this._startPos=this._newPos=new At(s.clientX,s.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(ae(document,"touchend",ii),ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Pa),ae(document,"touchend touchcancel contextmenu",this._cancel,this),ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Re(document,"touchend",ii),Re(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Re(document,"touchend touchcancel contextmenu",this._cancel,this),Re(document,"touchmove",this._onMove,this)},_onMove:function(e){var s=e.touches[0];this._newPos=new At(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,s){var h=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});h._simulated=!0,s.target.dispatchEvent(h)}});ye.addInitHook("addHandler","tapHold",Ei),ye.mergeOptions({touchZoom:Jt.touch,bounceAtZoomLimits:!0});var Mi=hi.extend({addHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Re(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var s=this._map;if(!(!e.touches||e.touches.length!==2||s._animatingZoom||this._zooming)){var h=s.mouseEventToContainerPoint(e.touches[0]),m=s.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(h.add(m)._divideBy(2))),this._startDist=h.distanceTo(m),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),ae(document,"touchmove",this._onTouchMove,this),ae(document,"touchend touchcancel",this._onTouchEnd,this),ii(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var s=this._map,h=s.mouseEventToContainerPoint(e.touches[0]),m=s.mouseEventToContainerPoint(e.touches[1]),x=h.distanceTo(m)/this._startDist;if(this._zoom=s.getScaleZoom(x,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&x<1||this._zoom>s.getMaxZoom()&&x>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var B=h._add(m)._divideBy(2)._subtract(this._centerPoint);if(x===1&&B.x===0&&B.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),ge(this._animRequest);var $=f(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ot($,this,!0),ii(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ge(this._animRequest),Re(document,"touchmove",this._onTouchMove,this),Re(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ye.addInitHook("addHandler","touchZoom",Mi),ye.BoxZoom=re,ye.DoubleClickZoom=ho,ye.Drag=ys,ye.Keyboard=ln,ye.ScrollWheelZoom=_i,ye.TapHold=Ei,ye.TouchZoom=Mi,o.Bounds=se,o.Browser=Jt,o.CRS=dt,o.Canvas=lo,o.Circle=oo,o.CircleMarker=Wi,o.Class=De,o.Control=oe,o.DivIcon=Ma,o.DivOverlay=Ji,o.DomEvent=Qr,o.DomUtil=Yl,o.Draggable=_n,o.Evented=$t,o.FeatureGroup=ji,o.GeoJSON=on,o.GridLayer=Ar,o.Handler=hi,o.Icon=er,o.ImageOverlay=nr,o.LatLng=fe,o.LatLngBounds=Ee,o.Layer=ci,o.LayerGroup=tr,o.LineUtil=ns,o.Map=ye,o.Marker=os,o.Mixin=iu,o.Path=rn,o.Point=At,o.PolyUtil=nu,o.Polygon=vn,o.Polyline=sn,o.Popup=bn,o.PosAnimation=pa,o.Projection=Ki,o.Rectangle=uo,o.Renderer=an,o.SVG=li,o.SVGOverlay=Ea,o.TileLayer=rr,o.Tooltip=ms,o.Transformation=_e,o.Util=$e,o.VideoOverlay=Sr,o.bind=f,o.bounds=Bt,o.canvas=_s,o.circle=zn,o.circleMarker=wa,o.control=In,o.divIcon=mu,o.extend=c,o.featureGroup=au,o.geoJSON=ps,o.geoJson=Ca,o.gridLayer=gu,o.icon=lu,o.imageOverlay=cu,o.latLng=Kt,o.latLngBounds=ve,o.layerGroup=ou,o.map=ma,o.marker=uu,o.point=jt,o.polygon=Br,o.polyline=hu,o.popup=fu,o.rectangle=Ui,o.setOptions=q,o.stamp=v,o.svg=di,o.svgOverlay=du,o.tileLayer=ao,o.tooltip=pu,o.transformation=j,o.version=l,o.videoOverlay=ka;var jn=window.L;o.noConflict=function(){return window.L=jn,this},window.L=o})})(dh,dh.exports);var Wa=dh.exports;const Ge=_p(Wa);var Ii=63710088e-1,gb={centimeters:Ii*100,centimetres:Ii*100,degrees:Ii/111325,feet:Ii*3.28084,inches:Ii*39.37,kilometers:Ii/1e3,kilometres:Ii/1e3,meters:Ii,metres:Ii,miles:Ii/1609.344,millimeters:Ii*1e3,millimetres:Ii*1e3,nauticalmiles:Ii/1852,radians:1,yards:Ii*1.0936};function ll(t,n,o){o===void 0&&(o={});var l={type:"Feature"};return(o.id===0||o.id)&&(l.id=o.id),o.bbox&&(l.bbox=o.bbox),l.properties=n||{},l.geometry=t,l}function Lp(t,n,o){o===void 0&&(o={});for(var l=0,c=t;l<c.length;l++){var p=c[l];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<p[p.length-1].length;f++)if(p[p.length-1][f]!==p[0][f])throw new Error("First and last Position are not equivalent.")}var y={type:"Polygon",coordinates:t};return ll(y,n,o)}function Vo(t,n,o){if(o===void 0&&(o={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var l={type:"LineString",coordinates:t};return ll(l,n,o)}function _b(t,n){n===void 0&&(n="kilometers");var o=gb[n];if(!o)throw new Error(n+" units is invalid");return t*o}function za(t){var n=t%360;return n*Math.PI/180}function Cp(t,n,o){if(t!==null)for(var l,c,p,f,y,v,M,k=0,E=0,O,z=t.type,K=z==="FeatureCollection",q=z==="Feature",X=K?t.features.length:1,ht=0;ht<X;ht++){M=K?t.features[ht].geometry:q?t.geometry:t,O=M?M.type==="GeometryCollection":!1,y=O?M.geometries.length:1;for(var gt=0;gt<y;gt++){var pt=0,wt=0;if(f=O?M.geometries[gt]:M,f!==null){v=f.coordinates;var ut=f.type;switch(k=0,ut){case null:break;case"Point":if(n(v,E,ht,pt,wt)===!1)return!1;E++,pt++;break;case"LineString":case"MultiPoint":for(l=0;l<v.length;l++){if(n(v[l],E,ht,pt,wt)===!1)return!1;E++,ut==="MultiPoint"&&pt++}ut==="LineString"&&pt++;break;case"Polygon":case"MultiLineString":for(l=0;l<v.length;l++){for(c=0;c<v[l].length-k;c++){if(n(v[l][c],E,ht,pt,wt)===!1)return!1;E++}ut==="MultiLineString"&&pt++,ut==="Polygon"&&wt++}ut==="Polygon"&&pt++;break;case"MultiPolygon":for(l=0;l<v.length;l++){for(wt=0,c=0;c<v[l].length;c++){for(p=0;p<v[l][c].length-k;p++){if(n(v[l][c][p],E,ht,pt,wt)===!1)return!1;E++}wt++}pt++}break;case"GeometryCollection":for(l=0;l<f.geometries.length;l++)if(Cp(f.geometries[l],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function kp(t,n){var o,l,c,p,f,y,v,M,k,E,O=0,z=t.type==="FeatureCollection",K=t.type==="Feature",q=z?t.features.length:1;for(o=0;o<q;o++){for(y=z?t.features[o].geometry:K?t.geometry:t,M=z?t.features[o].properties:K?t.properties:{},k=z?t.features[o].bbox:K?t.bbox:void 0,E=z?t.features[o].id:K?t.id:void 0,v=y?y.type==="GeometryCollection":!1,f=v?y.geometries.length:1,c=0;c<f;c++){if(p=v?y.geometries[c]:y,p===null){if(n(null,O,M,k,E)===!1)return!1;continue}switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(p,O,M,k,E)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<p.geometries.length;l++)if(n(p.geometries[l],O,M,k,E)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}O++}}function yb(t,n,o){var l=o;return kp(t,function(c,p,f,y,v){l=n(l,c,p,f,y,v)}),l}function vb(t,n){kp(t,function(o,l,c,p,f){var y=o===null?null:o.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return n(ll(o,c,{bbox:p,id:f}),l,0)===!1?!1:void 0}var v;switch(y){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon";break}for(var M=0;M<o.coordinates.length;M++){var k=o.coordinates[M],E={type:v,coordinates:k};if(n(ll(E,c),l,M)===!1)return!1}})}function bb(t,n){vb(t,function(o,l,c){var p=0;if(o.geometry){var f=o.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var y,v=0,M=0,k=0;if(Cp(o,function(E,O,z,K,q){if(y===void 0||l>v||K>M||q>k){y=E,v=l,M=K,k=q,p=0;return}var X=Vo([y,E],o.properties);if(n(X,l,c,q,p)===!1)return!1;p++,y=E})===!1)return!1}}})}function xb(t,n,o){var l=o,c=!1;return bb(t,function(p,f,y,v,M){c===!1&&o===void 0?l=p:l=n(l,p,f,y,v,M),c=!0}),l}function pd(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function fh(t,n,o){o===void 0&&(o={});var l=pd(t),c=pd(n),p=za(c[1]-l[1]),f=za(c[0]-l[0]),y=za(l[1]),v=za(c[1]),M=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(y)*Math.cos(v);return _b(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)),o.units)}var md=6378137;function Ep(t){return yb(t,function(n,o){return n+wb(o)},0)}function wb(t){var n=0,o;switch(t.type){case"Polygon":return gd(t.coordinates);case"MultiPolygon":for(o=0;o<t.coordinates.length;o++)n+=gd(t.coordinates[o]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function gd(t){var n=0;if(t&&t.length>0){n+=Math.abs(_d(t[0]));for(var o=1;o<t.length;o++)n-=Math.abs(_d(t[o]))}return n}function _d(t){var n,o,l,c,p,f,y,v=0,M=t.length;if(M>2){for(y=0;y<M;y++)y===M-2?(c=M-2,p=M-1,f=0):y===M-1?(c=M-1,p=0,f=1):(c=y,p=y+1,f=y+2),n=t[c],o=t[p],l=t[f],v+=(Vu(l[0])-Vu(n[0]))*Math.sin(Vu(o[1]));v=v*md*md/2}return v}function Vu(t){return t*Math.PI/180}function ul(t,n){return n===void 0&&(n={}),xb(t,function(o,l){var c=l.geometry.coordinates;return o+fh(c[0],c[1],n)},0)}const Lb={class:"drawing-tools"},Cb={class:"mb-6"},kb={class:"grid grid-cols-2 gap-2"},Eb=["onClick"],Mb={class:"text-sm"},Pb={key:0,class:"mb-6"},Bb={class:"space-y-4"},Sb={class:"grid grid-cols-6 gap-2"},Ab=["onClick"],Tb={key:0},Db={class:"flex items-center space-x-2"},Rb={class:"text-sm"},Ob={class:"flex items-center space-x-2"},Ib={class:"text-sm"},Fb={class:"text-sm"},Nb=["value"],zb={key:1},jb={class:"mt-2 text-sm text-gray-600"},Ub={key:2},Gb={key:3},$b={class:"space-y-4"},Vb={class:"text-sm"},Hb={class:"flex items-center space-x-2"},Zb={class:"text-sm"},qb={class:"flex items-center space-x-2"},Kb={class:"text-sm"},Wb={key:1,class:"mb-6"},Jb={class:"space-y-2 text-sm"},Yb={class:"font-medium"},Xb={key:0},Qb={key:1},t1={key:2},e1={key:3},i1={key:4},n1={key:5},r1=dn({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","properties-update"],setup(t,{emit:n}){const o=t,l=n,c=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"}],p=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],f=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointill"},{value:"dashdot",label:"Tiret-point"}],y=ie("#3B82F6"),v=ie(.2),M=ie("#2563EB"),k=ie(1),E=ie(2),O=ie("solid"),z=ie(0),K=ie(0),q=Te(()=>{var _t,ot;return(ot=(_t=o.selectedShape)==null?void 0:_t.properties)!=null&&ot.type?["Circle","Semicircle","Rectangle","Polygon"].includes(o.selectedShape.properties.type):!1}),X=ie(""),ht=ie(14),gt=ie("#FFFFFF"),pt=ie(1),wt=ie("#000000"),ut=ie(1);_r(()=>o.selectedShape,_t=>{var ot,$t,At,Ve,jt,se,Bt,Ee,ve,fe,Kt,dt,Dt,Tt,Ut,_e,j,G,Q,mt;if(console.log("=== DRAWING TOOLS SHAPE UPDATE START ==="),console.log("Raw shape object:",xe(_t)),console.log("Shape constructor:",(ot=_t==null?void 0:_t.constructor)==null?void 0:ot.name),_t){if(!_t.properties||!_t.properties.type){console.warn("Invalid shape properties detected:",xe(_t.properties));const yt=_t instanceof Ge.Circle?($t=_t.options)!=null&&$t.isSemicircle?"semicircle":"circle":_t instanceof Ge.Rectangle?"rectangle":_t instanceof Ge.Polygon?"polygon":_t instanceof Ge.Polyline&&!(_t instanceof Ge.Polygon)?"line":"unknown";console.log("Detected shape type:",yt);const ft={type:yt,style:{color:((At=_t.options)==null?void 0:At.color)||"#3388ff",weight:((Ve=_t.options)==null?void 0:Ve.weight)||3,opacity:((jt=_t.options)==null?void 0:jt.opacity)||1,fillColor:((se=_t.options)==null?void 0:se.fillColor)||"#3388ff",fillOpacity:((Bt=_t.options)==null?void 0:Bt.fillOpacity)||.2,dashArray:((Ee=_t.options)==null?void 0:Ee.dashArray)||""}};if(_t instanceof Ge.Circle){const Mt=_t.getRadius();ft.radius=Mt,yt==="circle"?(ft.area=Math.PI*Math.pow(Mt,2),ft.perimeter=2*Math.PI*Mt):(ft.area=Math.PI*Math.pow(Mt,2)/2,ft.perimeter=Math.PI*Mt+2*Mt)}else if(_t instanceof Ge.Rectangle){const Mt=_t.getBounds(),St=Mt.getNorthEast(),kt=Mt.getSouthWest(),xt=fh([kt.lng,kt.lat],[St.lng,kt.lat],{units:"meters"}),Wt=fh([kt.lng,kt.lat],[kt.lng,St.lat],{units:"meters"});ft.width=xt,ft.height=Wt,ft.area=xt*Wt,ft.perimeter=2*(xt+Wt)}else if(_t instanceof Ge.Polygon){const St=_t.getLatLngs()[0].map(xt=>[xt.lng,xt.lat]);St.push(St[0]);const kt=Lp([St]);ft.area=Ep(kt),ft.perimeter=ul(Vo([...St]),{units:"meters"})}else if(_t instanceof Ge.Polyline&&!(_t instanceof Ge.Polygon)){const St=_t.getLatLngs().map(xt=>[xt.lng,xt.lat]),kt=Vo(St);ft.length=ul(kt,{units:"meters"})}console.log("Created base properties:",ft),_t.properties=ft}console.log("Final shape properties:",xe(_t.properties)),y.value=((ve=_t.properties.style)==null?void 0:ve.fillColor)||"#3B82F6",v.value=((fe=_t.properties.style)==null?void 0:fe.fillOpacity)||.2,M.value=((Kt=_t.properties.style)==null?void 0:Kt.color)||"#2563EB",k.value=((dt=_t.properties.style)==null?void 0:dt.opacity)||1,E.value=((Dt=_t.properties.style)==null?void 0:Dt.weight)||2,O.value=Et((Tt=_t.properties.style)==null?void 0:Tt.dashArray),z.value=_t.properties.radius||0,K.value=_t.properties.orientation||0,console.log("Updated UI controls:",{fillColor:y.value,fillOpacity:v.value,strokeColor:M.value,strokeOpacity:k.value,strokeWidth:E.value,strokeStyle:O.value,radius:z.value,startAngle:K.value}),_t&&((Ut=_t.properties)==null?void 0:Ut.type)==="text"&&(X.value=_t.properties.text||"",ht.value=((_e=_t.properties.style)==null?void 0:_e.fontSize)||14,gt.value=((j=_t.properties.style)==null?void 0:j.backgroundColor)||"#FFFFFF",pt.value=((G=_t.properties.style)==null?void 0:G.backgroundOpacity)||1,wt.value=((Q=_t.properties.style)==null?void 0:Q.borderColor)||"#000000",ut.value=((mt=_t.properties.style)==null?void 0:mt.borderOpacity)||1)}console.log("=== DRAWING TOOLS SHAPE UPDATE END ===")},{immediate:!0,deep:!0});const Pt=_t=>{switch(_t){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},Et=_t=>{if(!_t)return"solid";switch(_t){case"10,10":return"dashed";case"2,5":return"dotted";case"10,5,2,5":return"dashdot";default:return"solid"}},Ht=_t=>{M.value=_t,q.value&&(y.value=_t),Ct({strokeColor:_t,fillColor:q.value?_t:void 0})},Ct=_t=>{l("style-update",{..._t,fillOpacity:_t.fillOpacity!==void 0?parseFloat(_t.fillOpacity):void 0,strokeOpacity:_t.strokeOpacity!==void 0?parseFloat(_t.strokeOpacity):void 0,strokeWidth:_t.strokeWidth!==void 0?parseInt(_t.strokeWidth):void 0})},Rt=_t=>{var ot;if(((ot=o.selectedShape)==null?void 0:ot.type)==="Semicircle"){const $t=_t.startAngle||K.value;l("properties-update",{..._t,orientation:$t,style:{startAngle:$t,stopAngle:$t+180}})}else l("properties-update",_t)},Ot=_t=>{const ot={..._t,type:"text",style:{backgroundColor:gt.value,backgroundOpacity:pt.value,borderColor:wt.value,borderOpacity:ut.value,fontSize:`${ht.value}px`,text:X.value,padding:"5px 10px",borderRadius:"3px",fontWeight:"normal",color:"#000000"}},$t=`<div style="
    background-color: ${ot.style.backgroundColor};
    border: 1px solid ${ot.style.borderColor};
    padding: ${ot.style.padding};
    border-radius: ${ot.style.borderRadius};
    font-size: ${ot.style.fontSize};
    font-weight: ${ot.style.fontWeight};
    color: ${ot.style.color};
    opacity: ${ot.style.backgroundOpacity};"
  >${ot.style.text}</div>`;if(o.selectedShape&&o.selectedShape.layer){const At=Ge.divIcon({html:$t,className:""});o.selectedShape.layer.setIcon(At)}l("properties-update",ot)},ge={circle:"Cercle",semicircle:"Demi-cercle",rectangle:"Rectangle",polygon:"Polygone",line:"Ligne",text:"Texte",unknown:"Inconnu"},$e=_t=>`${(_t/1e4).toFixed(2)} ha`,De=_t=>`${(_t/100).toFixed(2)} ha`;return(_t,ot)=>{var $t,At,Ve,jt,se;return qt(),Qt("div",Lb,[F("div",Cb,[ot[28]||(ot[28]=F("h3",{class:"text-lg font-semibold mb-4"},"Outils de dessin",-1)),F("div",kb,[(qt(),Qt(ri,null,Mn(c,Bt=>F("button",{key:Bt.type,class:yr(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":_t.currentTool===Bt.type,"hover:bg-gray-50 border-gray-200":_t.currentTool!==Bt.type}]),onClick:Ee=>_t.$emit("tool-change",Bt.type)},[F("span",Mb,ce(Bt.label),1)],10,Eb)),64))])]),_t.selectedShape?(qt(),Qt("div",Pb,[ot[41]||(ot[41]=F("h3",{class:"text-lg font-semibold mb-4"},"Style",-1)),F("div",Bb,[F("div",null,[ot[29]||(ot[29]=F("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Couleurs prdfinies ",-1)),F("div",Sb,[(qt(),Qt(ri,null,Mn(p,Bt=>F("button",{key:Bt,class:"w-8 h-8 rounded-full border-2 border-gray-200",style:ml({backgroundColor:Bt}),onClick:Ee=>Ht(Bt)},null,12,Ab)),64))])]),q.value?(qt(),Qt("div",Tb,[ot[30]||(ot[30]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de remplissage ",-1)),F("div",Db,[ke(F("input",{type:"color","onUpdate:modelValue":ot[0]||(ot[0]=Bt=>y.value=Bt),class:"w-8 h-8 rounded border",onChange:ot[1]||(ot[1]=Bt=>Ct({fillColor:y.value}))},null,544),[[Fe,y.value]]),ke(F("input",{type:"range","onUpdate:modelValue":ot[2]||(ot[2]=Bt=>v.value=Bt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:ot[3]||(ot[3]=Bt=>Ct({fillOpacity:v.value}))},null,544),[[Fe,v.value]]),F("span",Rb,ce((v.value*100).toFixed(0))+"%",1)])])):Ae("",!0),F("div",null,[ot[31]||(ot[31]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de bordure ",-1)),F("div",Ob,[ke(F("input",{type:"color","onUpdate:modelValue":ot[4]||(ot[4]=Bt=>M.value=Bt),class:"w-8 h-8 rounded border",onChange:ot[5]||(ot[5]=Bt=>Ct({strokeColor:M.value}))},null,544),[[Fe,M.value]]),ke(F("input",{type:"range","onUpdate:modelValue":ot[6]||(ot[6]=Bt=>k.value=Bt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:ot[7]||(ot[7]=Bt=>Ct({strokeOpacity:k.value}))},null,544),[[Fe,k.value]]),F("span",Ib,ce((k.value*100).toFixed(0))+"%",1)])]),F("div",null,[ot[32]||(ot[32]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," paisseur de trait ",-1)),ke(F("input",{type:"range","onUpdate:modelValue":ot[8]||(ot[8]=Bt=>E.value=Bt),min:"1",max:"10",class:"w-full",onChange:ot[9]||(ot[9]=Bt=>Ct({strokeWidth:E.value}))},null,544),[[Fe,E.value]]),F("span",Fb,ce(E.value)+"px",1)]),F("div",null,[ot[33]||(ot[33]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Type de trait ",-1)),ke(F("select",{"onUpdate:modelValue":ot[10]||(ot[10]=Bt=>O.value=Bt),class:"w-full px-2 py-1 rounded border",onChange:ot[11]||(ot[11]=Bt=>Ct({dashArray:Pt(O.value)}))},[(qt(),Qt(ri,null,Mn(f,Bt=>F("option",{key:Bt.value,value:Bt.value},ce(Bt.label),9,Nb)),64))],544),[[zo,O.value]])]),(($t=_t.selectedShape.properties)==null?void 0:$t.type)==="Circle"||((At=_t.selectedShape.properties)==null?void 0:At.type)==="Semicircle"?(qt(),Qt("div",zb,[ot[35]||(ot[35]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Rayon (m) ",-1)),ke(F("input",{type:"number","onUpdate:modelValue":ot[12]||(ot[12]=Bt=>z.value=Bt),min:"1",class:"w-full px-2 py-1 rounded border",onChange:ot[13]||(ot[13]=Bt=>Rt({radius:z.value}))},null,544),[[Fe,z.value]]),F("div",jb,[hn(" Diamtre: "+ce((z.value*2).toFixed(1))+" m ",1),ot[34]||(ot[34]=F("br",null,null,-1)),hn(" Surface: "+ce($e(Math.PI*z.value*z.value)),1)])])):Ae("",!0),((Ve=_t.selectedShape.properties)==null?void 0:Ve.type)==="Semicircle"?(qt(),Qt("div",Ub,[ot[36]||(ot[36]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Angle de dpart () ",-1)),ke(F("input",{type:"number","onUpdate:modelValue":ot[14]||(ot[14]=Bt=>K.value=Bt),min:"0",max:"360",class:"w-full px-2 py-1 rounded border",onChange:ot[15]||(ot[15]=Bt=>Rt({startAngle:K.value}))},null,544),[[Fe,K.value]])])):Ae("",!0),((jt=_t.selectedShape.properties)==null?void 0:jt.type)==="text"?(qt(),Qt("div",Gb,[F("div",$b,[F("div",null,[ot[37]||(ot[37]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Texte ",-1)),ke(F("input",{type:"text","onUpdate:modelValue":ot[16]||(ot[16]=Bt=>X.value=Bt),class:"w-full px-2 py-1 rounded border",onChange:ot[17]||(ot[17]=Bt=>Ot({text:X.value})),placeholder:"Entrez votre texte..."},null,544),[[Fe,X.value]])]),F("div",null,[ot[38]||(ot[38]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Taille de la police ",-1)),ke(F("input",{type:"range","onUpdate:modelValue":ot[18]||(ot[18]=Bt=>ht.value=Bt),min:"10",max:"32",class:"w-full",onChange:ot[19]||(ot[19]=Bt=>Ot({fontSize:ht.value}))},null,544),[[Fe,ht.value]]),F("span",Vb,ce(ht.value)+"px",1)]),F("div",null,[ot[39]||(ot[39]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de fond ",-1)),F("div",Hb,[ke(F("input",{type:"color","onUpdate:modelValue":ot[20]||(ot[20]=Bt=>gt.value=Bt),class:"w-8 h-8 rounded border",onChange:ot[21]||(ot[21]=Bt=>Ot({backgroundColor:gt.value}))},null,544),[[Fe,gt.value]]),ke(F("input",{type:"range","onUpdate:modelValue":ot[22]||(ot[22]=Bt=>pt.value=Bt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:ot[23]||(ot[23]=Bt=>Ot({backgroundOpacity:pt.value}))},null,544),[[Fe,pt.value]]),F("span",Zb,ce((pt.value*100).toFixed(0))+"%",1)])]),F("div",null,[ot[40]||(ot[40]=F("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Couleur de bordure ",-1)),F("div",qb,[ke(F("input",{type:"color","onUpdate:modelValue":ot[24]||(ot[24]=Bt=>wt.value=Bt),class:"w-8 h-8 rounded border",onChange:ot[25]||(ot[25]=Bt=>Ot({borderColor:wt.value}))},null,544),[[Fe,wt.value]]),ke(F("input",{type:"range","onUpdate:modelValue":ot[26]||(ot[26]=Bt=>ut.value=Bt),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:ot[27]||(ot[27]=Bt=>Ot({borderOpacity:ut.value}))},null,544),[[Fe,ut.value]]),F("span",Kb,ce((ut.value*100).toFixed(0))+"%",1)])])])])):Ae("",!0)])])):Ae("",!0),(se=_t.selectedShape)!=null&&se.properties?(qt(),Qt("div",Wb,[ot[42]||(ot[42]=F("h3",{class:"text-lg font-semibold mb-4"},"Proprits",-1)),F("div",Jb,[F("div",Yb," Type: "+ce(ge[_t.selectedShape.properties.type]||"Non dfini"),1),_t.selectedShape.properties.area?(qt(),Qt("div",Xb," Surface: "+ce($e(_t.selectedShape.properties.area)),1)):Ae("",!0),_t.selectedShape.properties.length?(qt(),Qt("div",Qb," Longueur: "+ce(De(_t.selectedShape.properties.length)),1)):Ae("",!0),_t.selectedShape.properties.perimeter?(qt(),Qt("div",t1," Primtre: "+ce(De(_t.selectedShape.properties.perimeter)),1)):Ae("",!0),_t.selectedShape.properties.radius?(qt(),Qt("div",e1," Rayon: "+ce(De(_t.selectedShape.properties.radius)),1)):Ae("",!0),_t.selectedShape.properties.width?(qt(),Qt("div",i1," Largeur: "+ce(De(_t.selectedShape.properties.width)),1)):Ae("",!0),_t.selectedShape.properties.height?(qt(),Qt("div",n1," Hauteur: "+ce(De(_t.selectedShape.properties.height)),1)):Ae("",!0)])])):Ae("",!0)])}}}),s1=wp(r1,[["__scopeId","data-v-c3c4cc1b"]]);(()=>{var Kh,Wh;var t=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,c=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(i,r)=>()=>(r||i((r={exports:{}}).exports,r),r.exports),y=(i,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of l(r))!p.call(i,d)&&d!==a&&n(i,d,{get:()=>r[d],enumerable:!(u=o(r,d))||u.enumerable});return i},v=(i,r,a)=>(a=i!=null?t(c(i)):{},y(r||!i||!i.__esModule?n(a,"default",{value:i,enumerable:!0}):a,i)),M=f((i,r)=>{function a(){this.__data__=[],this.size=0}r.exports=a}),k=f((i,r)=>{function a(u,d){return u===d||u!==u&&d!==d}r.exports=a}),E=f((i,r)=>{var a=k();function u(d,g){for(var _=d.length;_--;)if(a(d[_][0],g))return _;return-1}r.exports=u}),O=f((i,r)=>{var a=E(),u=Array.prototype,d=u.splice;function g(_){var b=this.__data__,w=a(b,_);if(w<0)return!1;var P=b.length-1;return w==P?b.pop():d.call(b,w,1),--this.size,!0}r.exports=g}),z=f((i,r)=>{var a=E();function u(d){var g=this.__data__,_=a(g,d);return _<0?void 0:g[_][1]}r.exports=u}),K=f((i,r)=>{var a=E();function u(d){return a(this.__data__,d)>-1}r.exports=u}),q=f((i,r)=>{var a=E();function u(d,g){var _=this.__data__,b=a(_,d);return b<0?(++this.size,_.push([d,g])):_[b][1]=g,this}r.exports=u}),X=f((i,r)=>{var a=M(),u=O(),d=z(),g=K(),_=q();function b(w){var P=-1,U=w==null?0:w.length;for(this.clear();++P<U;){var I=w[P];this.set(I[0],I[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),ht=f((i,r)=>{var a=X();function u(){this.__data__=new a,this.size=0}r.exports=u}),gt=f((i,r)=>{function a(u){var d=this.__data__,g=d.delete(u);return this.size=d.size,g}r.exports=a}),pt=f((i,r)=>{function a(u){return this.__data__.get(u)}r.exports=a}),wt=f((i,r)=>{function a(u){return this.__data__.has(u)}r.exports=a}),ut=f((i,r)=>{var a=typeof Zn=="object"&&Zn&&Zn.Object===Object&&Zn;r.exports=a}),Pt=f((i,r)=>{var a=ut(),u=typeof self=="object"&&self&&self.Object===Object&&self,d=a||u||Function("return this")();r.exports=d}),Et=f((i,r)=>{var a=Pt(),u=a.Symbol;r.exports=u}),Ht=f((i,r)=>{var a=Et(),u=Object.prototype,d=u.hasOwnProperty,g=u.toString,_=a?a.toStringTag:void 0;function b(w){var P=d.call(w,_),U=w[_];try{w[_]=void 0;var I=!0}catch{}var nt=g.call(w);return I&&(P?w[_]=U:delete w[_]),nt}r.exports=b}),Ct=f((i,r)=>{var a=Object.prototype,u=a.toString;function d(g){return u.call(g)}r.exports=d}),Rt=f((i,r)=>{var a=Et(),u=Ht(),d=Ct(),g="[object Null]",_="[object Undefined]",b=a?a.toStringTag:void 0;function w(P){return P==null?P===void 0?_:g:b&&b in Object(P)?u(P):d(P)}r.exports=w}),Ot=f((i,r)=>{function a(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}r.exports=a}),ge=f((i,r)=>{var a=Rt(),u=Ot(),d="[object AsyncFunction]",g="[object Function]",_="[object GeneratorFunction]",b="[object Proxy]";function w(P){if(!u(P))return!1;var U=a(P);return U==g||U==_||U==d||U==b}r.exports=w}),$e=f((i,r)=>{var a=Pt(),u=a["__core-js_shared__"];r.exports=u}),De=f((i,r)=>{var a=$e(),u=function(){var g=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function d(g){return!!u&&u in g}r.exports=d}),_t=f((i,r)=>{var a=Function.prototype,u=a.toString;function d(g){if(g!=null){try{return u.call(g)}catch{}try{return g+""}catch{}}return""}r.exports=d}),ot=f((i,r)=>{var a=ge(),u=De(),d=Ot(),g=_t(),_=/[\\^$.*+?()[\]{}|]/g,b=/^\[object .+?Constructor\]$/,w=Function.prototype,P=Object.prototype,U=w.toString,I=P.hasOwnProperty,nt=RegExp("^"+U.call(I).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function st(Lt){if(!d(Lt)||u(Lt))return!1;var It=a(Lt)?nt:b;return It.test(g(Lt))}r.exports=st}),$t=f((i,r)=>{function a(u,d){return u==null?void 0:u[d]}r.exports=a}),At=f((i,r)=>{var a=ot(),u=$t();function d(g,_){var b=u(g,_);return a(b)?b:void 0}r.exports=d}),Ve=f((i,r)=>{var a=At(),u=Pt(),d=a(u,"Map");r.exports=d}),jt=f((i,r)=>{var a=At(),u=a(Object,"create");r.exports=u}),se=f((i,r)=>{var a=jt();function u(){this.__data__=a?a(null):{},this.size=0}r.exports=u}),Bt=f((i,r)=>{function a(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}r.exports=a}),Ee=f((i,r)=>{var a=jt(),u="__lodash_hash_undefined__",d=Object.prototype,g=d.hasOwnProperty;function _(b){var w=this.__data__;if(a){var P=w[b];return P===u?void 0:P}return g.call(w,b)?w[b]:void 0}r.exports=_}),ve=f((i,r)=>{var a=jt(),u=Object.prototype,d=u.hasOwnProperty;function g(_){var b=this.__data__;return a?b[_]!==void 0:d.call(b,_)}r.exports=g}),fe=f((i,r)=>{var a=jt(),u="__lodash_hash_undefined__";function d(g,_){var b=this.__data__;return this.size+=this.has(g)?0:1,b[g]=a&&_===void 0?u:_,this}r.exports=d}),Kt=f((i,r)=>{var a=se(),u=Bt(),d=Ee(),g=ve(),_=fe();function b(w){var P=-1,U=w==null?0:w.length;for(this.clear();++P<U;){var I=w[P];this.set(I[0],I[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),dt=f((i,r)=>{var a=Kt(),u=X(),d=Ve();function g(){this.size=0,this.__data__={hash:new a,map:new(d||u),string:new a}}r.exports=g}),Dt=f((i,r)=>{function a(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}r.exports=a}),Tt=f((i,r)=>{var a=Dt();function u(d,g){var _=d.__data__;return a(g)?_[typeof g=="string"?"string":"hash"]:_.map}r.exports=u}),Ut=f((i,r)=>{var a=Tt();function u(d){var g=a(this,d).delete(d);return this.size-=g?1:0,g}r.exports=u}),_e=f((i,r)=>{var a=Tt();function u(d){return a(this,d).get(d)}r.exports=u}),j=f((i,r)=>{var a=Tt();function u(d){return a(this,d).has(d)}r.exports=u}),G=f((i,r)=>{var a=Tt();function u(d,g){var _=a(this,d),b=_.size;return _.set(d,g),this.size+=_.size==b?0:1,this}r.exports=u}),Q=f((i,r)=>{var a=dt(),u=Ut(),d=_e(),g=j(),_=G();function b(w){var P=-1,U=w==null?0:w.length;for(this.clear();++P<U;){var I=w[P];this.set(I[0],I[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),mt=f((i,r)=>{var a=X(),u=Ve(),d=Q(),g=200;function _(b,w){var P=this.__data__;if(P instanceof a){var U=P.__data__;if(!u||U.length<g-1)return U.push([b,w]),this.size=++P.size,this;P=this.__data__=new d(U)}return P.set(b,w),this.size=P.size,this}r.exports=_}),yt=f((i,r)=>{var a=X(),u=ht(),d=gt(),g=pt(),_=wt(),b=mt();function w(P){var U=this.__data__=new a(P);this.size=U.size}w.prototype.clear=u,w.prototype.delete=d,w.prototype.get=g,w.prototype.has=_,w.prototype.set=b,r.exports=w}),ft=f((i,r)=>{var a=At(),u=function(){try{var d=a(Object,"defineProperty");return d({},"",{}),d}catch{}}();r.exports=u}),Mt=f((i,r)=>{var a=ft();function u(d,g,_){g=="__proto__"&&a?a(d,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[g]=_}r.exports=u}),St=f((i,r)=>{var a=Mt(),u=k();function d(g,_,b){(b!==void 0&&!u(g[_],b)||b===void 0&&!(_ in g))&&a(g,_,b)}r.exports=d}),kt=f((i,r)=>{function a(u){return function(d,g,_){for(var b=-1,w=Object(d),P=_(d),U=P.length;U--;){var I=P[u?U:++b];if(g(w[I],I,w)===!1)break}return d}}r.exports=a}),xt=f((i,r)=>{var a=kt(),u=a();r.exports=u}),Wt=f((i,r)=>{var a=Pt(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g?a.Buffer:void 0,b=_?_.allocUnsafe:void 0;function w(P,U){if(U)return P.slice();var I=P.length,nt=b?b(I):new P.constructor(I);return P.copy(nt),nt}r.exports=w}),Ft=f((i,r)=>{var a=Pt(),u=a.Uint8Array;r.exports=u}),Yt=f((i,r)=>{var a=Ft();function u(d){var g=new d.constructor(d.byteLength);return new a(g).set(new a(d)),g}r.exports=u}),ne=f((i,r)=>{var a=Yt();function u(d,g){var _=g?a(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}r.exports=u}),pe=f((i,r)=>{function a(u,d){var g=-1,_=u.length;for(d||(d=Array(_));++g<_;)d[g]=u[g];return d}r.exports=a}),Me=f((i,r)=>{var a=Ot(),u=Object.create,d=function(){function g(){}return function(_){if(!a(_))return{};if(u)return u(_);g.prototype=_;var b=new g;return g.prototype=void 0,b}}();r.exports=d}),we=f((i,r)=>{function a(u,d){return function(g){return u(d(g))}}r.exports=a}),oi=f((i,r)=>{var a=we(),u=a(Object.getPrototypeOf,Object);r.exports=u}),Xe=f((i,r)=>{var a=Object.prototype;function u(d){var g=d&&d.constructor,_=typeof g=="function"&&g.prototype||a;return d===_}r.exports=u}),Ci=f((i,r)=>{var a=Me(),u=oi(),d=Xe();function g(_){return typeof _.constructor=="function"&&!d(_)?a(u(_)):{}}r.exports=g}),ei=f((i,r)=>{function a(u){return u!=null&&typeof u=="object"}r.exports=a}),pn=f((i,r)=>{var a=Rt(),u=ei(),d="[object Arguments]";function g(_){return u(_)&&a(_)==d}r.exports=g}),Sn=f((i,r)=>{var a=pn(),u=ei(),d=Object.prototype,g=d.hasOwnProperty,_=d.propertyIsEnumerable,b=a(function(){return arguments}())?a:function(w){return u(w)&&g.call(w,"callee")&&!_.call(w,"callee")};r.exports=b}),Ke=f((i,r)=>{var a=Array.isArray;r.exports=a}),ki=f((i,r)=>{var a=9007199254740991;function u(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=a}r.exports=u}),Hi=f((i,r)=>{var a=ge(),u=ki();function d(g){return g!=null&&u(g.length)&&!a(g)}r.exports=d}),Tl=f((i,r)=>{var a=Hi(),u=ei();function d(g){return u(g)&&a(g)}r.exports=d}),Dl=f((i,r)=>{function a(){return!1}r.exports=a}),Is=f((i,r)=>{var a=Pt(),u=Dl(),d=typeof i=="object"&&i&&!i.nodeType&&i,g=d&&typeof r=="object"&&r&&!r.nodeType&&r,_=g&&g.exports===d,b=_?a.Buffer:void 0,w=b?b.isBuffer:void 0,P=w||u;r.exports=P}),Yo=f((i,r)=>{var a=Rt(),u=oi(),d=ei(),g="[object Object]",_=Function.prototype,b=Object.prototype,w=_.toString,P=b.hasOwnProperty,U=w.call(Object);function I(nt){if(!d(nt)||a(nt)!=g)return!1;var st=u(nt);if(st===null)return!0;var Lt=P.call(st,"constructor")&&st.constructor;return typeof Lt=="function"&&Lt instanceof Lt&&w.call(Lt)==U}r.exports=I}),Xo=f((i,r)=>{var a=Rt(),u=ki(),d=ei(),g="[object Arguments]",_="[object Array]",b="[object Boolean]",w="[object Date]",P="[object Error]",U="[object Function]",I="[object Map]",nt="[object Number]",st="[object Object]",Lt="[object RegExp]",It="[object Set]",Gt="[object String]",be="[object WeakMap]",N="[object ArrayBuffer]",V="[object DataView]",J="[object Float32Array]",at="[object Float64Array]",Y="[object Int8Array]",rt="[object Int16Array]",C="[object Int32Array]",S="[object Uint8Array]",T="[object Uint8ClampedArray]",A="[object Uint16Array]",D="[object Uint32Array]",R={};R[J]=R[at]=R[Y]=R[rt]=R[C]=R[S]=R[T]=R[A]=R[D]=!0,R[g]=R[_]=R[N]=R[b]=R[V]=R[w]=R[P]=R[U]=R[I]=R[nt]=R[st]=R[Lt]=R[It]=R[Gt]=R[be]=!1;function Z(H){return d(H)&&u(H.length)&&!!R[a(H)]}r.exports=Z}),Rl=f((i,r)=>{function a(u){return function(d){return u(d)}}r.exports=a}),Ol=f((i,r)=>{var a=ut(),u=typeof i=="object"&&i&&!i.nodeType&&i,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g&&a.process,b=function(){try{var w=d&&d.require&&d.require("util").types;return w||_&&_.binding&&_.binding("util")}catch{}}();r.exports=b}),Qo=f((i,r)=>{var a=Xo(),u=Rl(),d=Ol(),g=d&&d.isTypedArray,_=g?u(g):a;r.exports=_}),ta=f((i,r)=>{function a(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}r.exports=a}),Il=f((i,r)=>{var a=Mt(),u=k(),d=Object.prototype,g=d.hasOwnProperty;function _(b,w,P){var U=b[w];(!(g.call(b,w)&&u(U,P))||P===void 0&&!(w in b))&&a(b,w,P)}r.exports=_}),Fl=f((i,r)=>{var a=Il(),u=Mt();function d(g,_,b,w){var P=!b;b||(b={});for(var U=-1,I=_.length;++U<I;){var nt=_[U],st=w?w(b[nt],g[nt],nt,b,g):void 0;st===void 0&&(st=g[nt]),P?u(b,nt,st):a(b,nt,st)}return b}r.exports=d}),Fs=f((i,r)=>{function a(u,d){for(var g=-1,_=Array(u);++g<u;)_[g]=d(g);return _}r.exports=a}),ea=f((i,r)=>{var a=9007199254740991,u=/^(?:0|[1-9]\d*)$/;function d(g,_){var b=typeof g;return _=_??a,!!_&&(b=="number"||b!="symbol"&&u.test(g))&&g>-1&&g%1==0&&g<_}r.exports=d}),Nl=f((i,r)=>{var a=Fs(),u=Sn(),d=Ke(),g=Is(),_=ea(),b=Qo(),w=Object.prototype,P=w.hasOwnProperty;function U(I,nt){var st=d(I),Lt=!st&&u(I),It=!st&&!Lt&&g(I),Gt=!st&&!Lt&&!It&&b(I),be=st||Lt||It||Gt,N=be?a(I.length,String):[],V=N.length;for(var J in I)(nt||P.call(I,J))&&!(be&&(J=="length"||It&&(J=="offset"||J=="parent")||Gt&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||_(J,V)))&&N.push(J);return N}r.exports=U}),zl=f((i,r)=>{function a(u){var d=[];if(u!=null)for(var g in Object(u))d.push(g);return d}r.exports=a}),jl=f((i,r)=>{var a=Ot(),u=Xe(),d=zl(),g=Object.prototype,_=g.hasOwnProperty;function b(w){if(!a(w))return d(w);var P=u(w),U=[];for(var I in w)I=="constructor"&&(P||!_.call(w,I))||U.push(I);return U}r.exports=b}),zi=f((i,r)=>{var a=Nl(),u=jl(),d=Hi();function g(_){return d(_)?a(_,!0):u(_)}r.exports=g}),Jt=f((i,r)=>{var a=Fl(),u=zi();function d(g){return a(g,u(g))}r.exports=d}),ia=f((i,r)=>{var a=St(),u=Wt(),d=ne(),g=pe(),_=Ci(),b=Sn(),w=Ke(),P=Tl(),U=Is(),I=ge(),nt=Ot(),st=Yo(),Lt=Qo(),It=ta(),Gt=Jt();function be(N,V,J,at,Y,rt,C){var S=It(N,J),T=It(V,J),A=C.get(T);if(A){a(N,J,A);return}var D=rt?rt(S,T,J+"",N,V,C):void 0,R=D===void 0;if(R){var Z=w(T),H=!Z&&U(T),W=!Z&&!H&&Lt(T);D=T,Z||H||W?w(S)?D=S:P(S)?D=g(S):H?(R=!1,D=u(T,!0)):W?(R=!1,D=d(T,!0)):D=[]:st(T)||b(T)?(D=S,b(S)?D=Gt(S):(!nt(S)||I(S))&&(D=_(T))):R=!1}R&&(C.set(T,D),Y(D,T,at,rt,C),C.delete(T)),a(N,J,D)}r.exports=be}),na=f((i,r)=>{var a=yt(),u=St(),d=xt(),g=ia(),_=Ot(),b=zi(),w=ta();function P(U,I,nt,st,Lt){U!==I&&d(I,function(It,Gt){if(Lt||(Lt=new a),_(It))g(U,I,Gt,nt,P,st,Lt);else{var be=st?st(w(U,Gt),It,Gt+"",U,I,Lt):void 0;be===void 0&&(be=It),u(U,Gt,be)}},b)}r.exports=P}),Ns=f((i,r)=>{function a(u){return u}r.exports=a}),ra=f((i,r)=>{function a(u,d,g){switch(g.length){case 0:return u.call(d);case 1:return u.call(d,g[0]);case 2:return u.call(d,g[0],g[1]);case 3:return u.call(d,g[0],g[1],g[2])}return u.apply(d,g)}r.exports=a}),zs=f((i,r)=>{var a=ra(),u=Math.max;function d(g,_,b){return _=u(_===void 0?g.length-1:_,0),function(){for(var w=arguments,P=-1,U=u(w.length-_,0),I=Array(U);++P<U;)I[P]=w[_+P];P=-1;for(var nt=Array(_+1);++P<_;)nt[P]=w[P];return nt[_]=b(I),a(g,this,nt)}}r.exports=d}),sa=f((i,r)=>{function a(u){return function(){return u}}r.exports=a}),Yn=f((i,r)=>{var a=sa(),u=ft(),d=Ns(),g=u?function(_,b){return u(_,"toString",{configurable:!0,enumerable:!1,value:a(b),writable:!0})}:d;r.exports=g}),oa=f((i,r)=>{var a=800,u=16,d=Date.now;function g(_){var b=0,w=0;return function(){var P=d(),U=u-(P-w);if(w=P,U>0){if(++b>=a)return arguments[0]}else b=0;return _.apply(void 0,arguments)}}r.exports=g}),Ul=f((i,r)=>{var a=Yn(),u=oa(),d=u(a);r.exports=d}),Gl=f((i,r)=>{var a=Ns(),u=zs(),d=Ul();function g(_,b){return d(u(_,b,a),_+"")}r.exports=g}),$l=f((i,r)=>{var a=k(),u=Hi(),d=ea(),g=Ot();function _(b,w,P){if(!g(P))return!1;var U=typeof w;return(U=="number"?u(P)&&d(w,P.length):U=="string"&&w in P)?a(P[w],b):!1}r.exports=_}),Vl=f((i,r)=>{var a=Gl(),u=$l();function d(g){return a(function(_,b){var w=-1,P=b.length,U=P>1?b[P-1]:void 0,I=P>2?b[2]:void 0;for(U=g.length>3&&typeof U=="function"?(P--,U):void 0,I&&u(b[0],b[1],I)&&(U=P<3?void 0:U,P=1),_=Object(_);++w<P;){var nt=b[w];nt&&g(_,nt,w,U)}return _})}r.exports=d}),qr=f((i,r)=>{var a=na(),u=Vl(),d=u(function(g,_,b){a(g,_,b)});r.exports=d}),js=f((i,r)=>{var a=Rt(),u=ei(),d="[object Symbol]";function g(_){return typeof _=="symbol"||u(_)&&a(_)==d}r.exports=g}),Kr=f((i,r)=>{var a=Ke(),u=js(),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function _(b,w){if(a(b))return!1;var P=typeof b;return P=="number"||P=="symbol"||P=="boolean"||b==null||u(b)?!0:g.test(b)||!d.test(b)||w!=null&&b in Object(w)}r.exports=_}),Hl=f((i,r)=>{var a=Q(),u="Expected a function";function d(g,_){if(typeof g!="function"||_!=null&&typeof _!="function")throw new TypeError(u);var b=function(){var w=arguments,P=_?_.apply(this,w):w[0],U=b.cache;if(U.has(P))return U.get(P);var I=g.apply(this,w);return b.cache=U.set(P,I)||U,I};return b.cache=new(d.Cache||a),b}d.Cache=a,r.exports=d}),Zl=f((i,r)=>{var a=Hl(),u=500;function d(g){var _=a(g,function(w){return b.size===u&&b.clear(),w}),b=_.cache;return _}r.exports=d}),ql=f((i,r)=>{var a=Zl(),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,g=a(function(_){var b=[];return _.charCodeAt(0)===46&&b.push(""),_.replace(u,function(w,P,U,I){b.push(U?I.replace(d,"$1"):P||w)}),b});r.exports=g}),Kl=f((i,r)=>{function a(u,d){for(var g=-1,_=u==null?0:u.length,b=Array(_);++g<_;)b[g]=d(u[g],g,u);return b}r.exports=a}),Wl=f((i,r)=>{var a=Et(),u=Kl(),d=Ke(),g=js(),_=a?a.prototype:void 0,b=_?_.toString:void 0;function w(P){if(typeof P=="string")return P;if(d(P))return u(P,w)+"";if(g(P))return b?b.call(P):"";var U=P+"";return U=="0"&&1/P==-1/0?"-0":U}r.exports=w}),Us=f((i,r)=>{var a=Wl();function u(d){return d==null?"":a(d)}r.exports=u}),xr=f((i,r)=>{var a=Ke(),u=Kr(),d=ql(),g=Us();function _(b,w){return a(b)?b:u(b,w)?[b]:d(g(b))}r.exports=_}),aa=f((i,r)=>{var a=js();function u(d){if(typeof d=="string"||a(d))return d;var g=d+"";return g=="0"&&1/d==-1/0?"-0":g}r.exports=u}),la=f((i,r)=>{var a=xr(),u=aa();function d(g,_){_=a(_,g);for(var b=0,w=_.length;g!=null&&b<w;)g=g[u(_[b++])];return b&&b==w?g:void 0}r.exports=d}),mn=f((i,r)=>{var a=la();function u(d,g,_){var b=d==null?void 0:a(d,g);return b===void 0?_:b}r.exports=u}),Le=f((i,r)=>{(function(a,u){typeof i=="object"&&typeof r<"u"?r.exports=u():(a=a||self).RBush=u()})(i,function(){function a(N,V,J,at,Y){(function rt(C,S,T,A,D){for(;A>T;){if(A-T>600){var R=A-T+1,Z=S-T+1,H=Math.log(R),W=.5*Math.exp(2*H/3),it=.5*Math.sqrt(H*W*(R-W)/R)*(Z-R/2<0?-1:1),et=Math.max(T,Math.floor(S-Z*W/R+it)),vt=Math.min(A,Math.floor(S+(R-Z)*W/R+it));rt(C,S,et,vt,D)}var zt=C[S],Vt=T,Xt=A;for(u(C,T,S),D(C[A],zt)>0&&u(C,T,A);Vt<Xt;){for(u(C,Vt,Xt),Vt++,Xt--;D(C[Vt],zt)<0;)Vt++;for(;D(C[Xt],zt)>0;)Xt--}D(C[T],zt)===0?u(C,T,Xt):u(C,++Xt,A),Xt<=S&&(T=Xt+1),S<=Xt&&(A=Xt-1)}})(N,V,J||0,at||N.length-1,Y||d)}function u(N,V,J){var at=N[V];N[V]=N[J],N[J]=at}function d(N,V){return N<V?-1:N>V?1:0}var g=function(N){N===void 0&&(N=9),this._maxEntries=Math.max(4,N),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function _(N,V,J){if(!J)return V.indexOf(N);for(var at=0;at<V.length;at++)if(J(N,V[at]))return at;return-1}function b(N,V){w(N,0,N.children.length,V,N)}function w(N,V,J,at,Y){Y||(Y=Gt(null)),Y.minX=1/0,Y.minY=1/0,Y.maxX=-1/0,Y.maxY=-1/0;for(var rt=V;rt<J;rt++){var C=N.children[rt];P(Y,N.leaf?at(C):C)}return Y}function P(N,V){return N.minX=Math.min(N.minX,V.minX),N.minY=Math.min(N.minY,V.minY),N.maxX=Math.max(N.maxX,V.maxX),N.maxY=Math.max(N.maxY,V.maxY),N}function U(N,V){return N.minX-V.minX}function I(N,V){return N.minY-V.minY}function nt(N){return(N.maxX-N.minX)*(N.maxY-N.minY)}function st(N){return N.maxX-N.minX+(N.maxY-N.minY)}function Lt(N,V){return N.minX<=V.minX&&N.minY<=V.minY&&V.maxX<=N.maxX&&V.maxY<=N.maxY}function It(N,V){return V.minX<=N.maxX&&V.minY<=N.maxY&&V.maxX>=N.minX&&V.maxY>=N.minY}function Gt(N){return{children:N,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function be(N,V,J,at,Y){for(var rt=[V,J];rt.length;)if(!((J=rt.pop())-(V=rt.pop())<=at)){var C=V+Math.ceil((J-V)/at/2)*at;a(N,C,V,J,Y),rt.push(V,C,C,J)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function(N){var V=this.data,J=[];if(!It(N,V))return J;for(var at=this.toBBox,Y=[];V;){for(var rt=0;rt<V.children.length;rt++){var C=V.children[rt],S=V.leaf?at(C):C;It(N,S)&&(V.leaf?J.push(C):Lt(N,S)?this._all(C,J):Y.push(C))}V=Y.pop()}return J},g.prototype.collides=function(N){var V=this.data;if(!It(N,V))return!1;for(var J=[];V;){for(var at=0;at<V.children.length;at++){var Y=V.children[at],rt=V.leaf?this.toBBox(Y):Y;if(It(N,rt)){if(V.leaf||Lt(N,rt))return!0;J.push(Y)}}V=J.pop()}return!1},g.prototype.load=function(N){if(!N||!N.length)return this;if(N.length<this._minEntries){for(var V=0;V<N.length;V++)this.insert(N[V]);return this}var J=this._build(N.slice(),0,N.length-1,0);if(this.data.children.length)if(this.data.height===J.height)this._splitRoot(this.data,J);else{if(this.data.height<J.height){var at=this.data;this.data=J,J=at}this._insert(J,this.data.height-J.height-1,!0)}else this.data=J;return this},g.prototype.insert=function(N){return N&&this._insert(N,this.data.height-1),this},g.prototype.clear=function(){return this.data=Gt([]),this},g.prototype.remove=function(N,V){if(!N)return this;for(var J,at,Y,rt=this.data,C=this.toBBox(N),S=[],T=[];rt||S.length;){if(rt||(rt=S.pop(),at=S[S.length-1],J=T.pop(),Y=!0),rt.leaf){var A=_(N,rt.children,V);if(A!==-1)return rt.children.splice(A,1),S.push(rt),this._condense(S),this}Y||rt.leaf||!Lt(rt,C)?at?(J++,rt=at.children[J],Y=!1):rt=null:(S.push(rt),T.push(J),J=0,at=rt,rt=rt.children[0])}return this},g.prototype.toBBox=function(N){return N},g.prototype.compareMinX=function(N,V){return N.minX-V.minX},g.prototype.compareMinY=function(N,V){return N.minY-V.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function(N){return this.data=N,this},g.prototype._all=function(N,V){for(var J=[];N;)N.leaf?V.push.apply(V,N.children):J.push.apply(J,N.children),N=J.pop();return V},g.prototype._build=function(N,V,J,at){var Y,rt=J-V+1,C=this._maxEntries;if(rt<=C)return b(Y=Gt(N.slice(V,J+1)),this.toBBox),Y;at||(at=Math.ceil(Math.log(rt)/Math.log(C)),C=Math.ceil(rt/Math.pow(C,at-1))),(Y=Gt([])).leaf=!1,Y.height=at;var S=Math.ceil(rt/C),T=S*Math.ceil(Math.sqrt(C));be(N,V,J,T,this.compareMinX);for(var A=V;A<=J;A+=T){var D=Math.min(A+T-1,J);be(N,A,D,S,this.compareMinY);for(var R=A;R<=D;R+=S){var Z=Math.min(R+S-1,D);Y.children.push(this._build(N,R,Z,at-1))}}return b(Y,this.toBBox),Y},g.prototype._chooseSubtree=function(N,V,J,at){for(;at.push(V),!V.leaf&&at.length-1!==J;){for(var Y=1/0,rt=1/0,C=void 0,S=0;S<V.children.length;S++){var T=V.children[S],A=nt(T),D=(R=N,Z=T,(Math.max(Z.maxX,R.maxX)-Math.min(Z.minX,R.minX))*(Math.max(Z.maxY,R.maxY)-Math.min(Z.minY,R.minY))-A);D<rt?(rt=D,Y=A<Y?A:Y,C=T):D===rt&&A<Y&&(Y=A,C=T)}V=C||V.children[0]}var R,Z;return V},g.prototype._insert=function(N,V,J){var at=J?N:this.toBBox(N),Y=[],rt=this._chooseSubtree(at,this.data,V,Y);for(rt.children.push(N),P(rt,at);V>=0&&Y[V].children.length>this._maxEntries;)this._split(Y,V),V--;this._adjustParentBBoxes(at,Y,V)},g.prototype._split=function(N,V){var J=N[V],at=J.children.length,Y=this._minEntries;this._chooseSplitAxis(J,Y,at);var rt=this._chooseSplitIndex(J,Y,at),C=Gt(J.children.splice(rt,J.children.length-rt));C.height=J.height,C.leaf=J.leaf,b(J,this.toBBox),b(C,this.toBBox),V?N[V-1].children.push(C):this._splitRoot(J,C)},g.prototype._splitRoot=function(N,V){this.data=Gt([N,V]),this.data.height=N.height+1,this.data.leaf=!1,b(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function(N,V,J){for(var at,Y,rt,C,S,T,A,D=1/0,R=1/0,Z=V;Z<=J-V;Z++){var H=w(N,0,Z,this.toBBox),W=w(N,Z,J,this.toBBox),it=(Y=H,rt=W,C=void 0,S=void 0,T=void 0,A=void 0,C=Math.max(Y.minX,rt.minX),S=Math.max(Y.minY,rt.minY),T=Math.min(Y.maxX,rt.maxX),A=Math.min(Y.maxY,rt.maxY),Math.max(0,T-C)*Math.max(0,A-S)),et=nt(H)+nt(W);it<D?(D=it,at=Z,R=et<R?et:R):it===D&&et<R&&(R=et,at=Z)}return at||J-V},g.prototype._chooseSplitAxis=function(N,V,J){var at=N.leaf?this.compareMinX:U,Y=N.leaf?this.compareMinY:I;this._allDistMargin(N,V,J,at)<this._allDistMargin(N,V,J,Y)&&N.children.sort(at)},g.prototype._allDistMargin=function(N,V,J,at){N.children.sort(at);for(var Y=this.toBBox,rt=w(N,0,V,Y),C=w(N,J-V,J,Y),S=st(rt)+st(C),T=V;T<J-V;T++){var A=N.children[T];P(rt,N.leaf?Y(A):A),S+=st(rt)}for(var D=J-V-1;D>=V;D--){var R=N.children[D];P(C,N.leaf?Y(R):R),S+=st(C)}return S},g.prototype._adjustParentBBoxes=function(N,V,J){for(var at=J;at>=0;at--)P(V[at],N)},g.prototype._condense=function(N){for(var V=N.length-1,J=void 0;V>=0;V--)N[V].children.length===0?V>0?(J=N[V-1].children).splice(J.indexOf(N[V]),1):this.clear():b(N[V],this.toBBox)},g})}),ze=f(i=>{Object.defineProperty(i,"__esModule",{value:!0}),i.earthRadius=63710088e-1,i.factors={centimeters:i.earthRadius*100,centimetres:i.earthRadius*100,degrees:i.earthRadius/111325,feet:i.earthRadius*3.28084,inches:i.earthRadius*39.37,kilometers:i.earthRadius/1e3,kilometres:i.earthRadius/1e3,meters:i.earthRadius,metres:i.earthRadius,miles:i.earthRadius/1609.344,millimeters:i.earthRadius*1e3,millimetres:i.earthRadius*1e3,nauticalmiles:i.earthRadius/1852,radians:1,yards:i.earthRadius*1.0936},i.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/i.earthRadius,yards:1.0936133},i.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(A,D,R){R===void 0&&(R={});var Z={type:"Feature"};return(R.id===0||R.id)&&(Z.id=R.id),R.bbox&&(Z.bbox=R.bbox),Z.properties=D||{},Z.geometry=A,Z}i.feature=r;function a(A,D,R){switch(A){case"Point":return u(D).geometry;case"LineString":return b(D).geometry;case"Polygon":return g(D).geometry;case"MultiPoint":return I(D).geometry;case"MultiLineString":return U(D).geometry;case"MultiPolygon":return nt(D).geometry;default:throw new Error(A+" is invalid")}}i.geometry=a;function u(A,D,R){if(R===void 0&&(R={}),!A)throw new Error("coordinates is required");if(!Array.isArray(A))throw new Error("coordinates must be an Array");if(A.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!rt(A[0])||!rt(A[1]))throw new Error("coordinates must contain numbers");var Z={type:"Point",coordinates:A};return r(Z,D,R)}i.point=u;function d(A,D,R){return R===void 0&&(R={}),P(A.map(function(Z){return u(Z,D)}),R)}i.points=d;function g(A,D,R){R===void 0&&(R={});for(var Z=0,H=A;Z<H.length;Z++){var W=H[Z];if(W.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var it=0;it<W[W.length-1].length;it++)if(W[W.length-1][it]!==W[0][it])throw new Error("First and last Position are not equivalent.")}var et={type:"Polygon",coordinates:A};return r(et,D,R)}i.polygon=g;function _(A,D,R){return R===void 0&&(R={}),P(A.map(function(Z){return g(Z,D)}),R)}i.polygons=_;function b(A,D,R){if(R===void 0&&(R={}),A.length<2)throw new Error("coordinates must be an array of two or more positions");var Z={type:"LineString",coordinates:A};return r(Z,D,R)}i.lineString=b;function w(A,D,R){return R===void 0&&(R={}),P(A.map(function(Z){return b(Z,D)}),R)}i.lineStrings=w;function P(A,D){D===void 0&&(D={});var R={type:"FeatureCollection"};return D.id&&(R.id=D.id),D.bbox&&(R.bbox=D.bbox),R.features=A,R}i.featureCollection=P;function U(A,D,R){R===void 0&&(R={});var Z={type:"MultiLineString",coordinates:A};return r(Z,D,R)}i.multiLineString=U;function I(A,D,R){R===void 0&&(R={});var Z={type:"MultiPoint",coordinates:A};return r(Z,D,R)}i.multiPoint=I;function nt(A,D,R){R===void 0&&(R={});var Z={type:"MultiPolygon",coordinates:A};return r(Z,D,R)}i.multiPolygon=nt;function st(A,D,R){R===void 0&&(R={});var Z={type:"GeometryCollection",geometries:A};return r(Z,D,R)}i.geometryCollection=st;function Lt(A,D){if(D===void 0&&(D=0),D&&!(D>=0))throw new Error("precision must be a positive number");var R=Math.pow(10,D||0);return Math.round(A*R)/R}i.round=Lt;function It(A,D){D===void 0&&(D="kilometers");var R=i.factors[D];if(!R)throw new Error(D+" units is invalid");return A*R}i.radiansToLength=It;function Gt(A,D){D===void 0&&(D="kilometers");var R=i.factors[D];if(!R)throw new Error(D+" units is invalid");return A/R}i.lengthToRadians=Gt;function be(A,D){return V(Gt(A,D))}i.lengthToDegrees=be;function N(A){var D=A%360;return D<0&&(D+=360),D}i.bearingToAzimuth=N;function V(A){var D=A%(2*Math.PI);return D*180/Math.PI}i.radiansToDegrees=V;function J(A){var D=A%360;return D*Math.PI/180}i.degreesToRadians=J;function at(A,D,R){if(D===void 0&&(D="kilometers"),R===void 0&&(R="kilometers"),!(A>=0))throw new Error("length must be a positive number");return It(Gt(A,D),R)}i.convertLength=at;function Y(A,D,R){if(D===void 0&&(D="meters"),R===void 0&&(R="kilometers"),!(A>=0))throw new Error("area must be a positive number");var Z=i.areaFactors[D];if(!Z)throw new Error("invalid original units");var H=i.areaFactors[R];if(!H)throw new Error("invalid final units");return A/Z*H}i.convertArea=Y;function rt(A){return!isNaN(A)&&A!==null&&!Array.isArray(A)}i.isNumber=rt;function C(A){return!!A&&A.constructor===Object}i.isObject=C;function S(A){if(!A)throw new Error("bbox is required");if(!Array.isArray(A))throw new Error("bbox must be an Array");if(A.length!==4&&A.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");A.forEach(function(D){if(!rt(D))throw new Error("bbox must only contain numbers")})}i.validateBBox=S;function T(A){if(!A)throw new Error("id is required");if(["string","number"].indexOf(typeof A)===-1)throw new Error("id must be a number or a string")}i.validateId=T}),wr=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=ze();function a(V,J,at){if(V!==null)for(var Y,rt,C,S,T,A,D,R=0,Z=0,H,W=V.type,it=W==="FeatureCollection",et=W==="Feature",vt=it?V.features.length:1,zt=0;zt<vt;zt++){D=it?V.features[zt].geometry:et?V.geometry:V,H=D?D.type==="GeometryCollection":!1,T=H?D.geometries.length:1;for(var Vt=0;Vt<T;Vt++){var Xt=0,Pe=0;if(S=H?D.geometries[Vt]:D,S!==null){A=S.coordinates;var Oe=S.type;switch(R=at&&(Oe==="Polygon"||Oe==="MultiPolygon")?1:0,Oe){case null:break;case"Point":if(J(A,Z,zt,Xt,Pe)===!1)return!1;Z++,Xt++;break;case"LineString":case"MultiPoint":for(Y=0;Y<A.length;Y++){if(J(A[Y],Z,zt,Xt,Pe)===!1)return!1;Z++,Oe==="MultiPoint"&&Xt++}Oe==="LineString"&&Xt++;break;case"Polygon":case"MultiLineString":for(Y=0;Y<A.length;Y++){for(rt=0;rt<A[Y].length-R;rt++){if(J(A[Y][rt],Z,zt,Xt,Pe)===!1)return!1;Z++}Oe==="MultiLineString"&&Xt++,Oe==="Polygon"&&Pe++}Oe==="Polygon"&&Xt++;break;case"MultiPolygon":for(Y=0;Y<A.length;Y++){for(Pe=0,rt=0;rt<A[Y].length;rt++){for(C=0;C<A[Y][rt].length-R;C++){if(J(A[Y][rt][C],Z,zt,Xt,Pe)===!1)return!1;Z++}Pe++}Xt++}break;case"GeometryCollection":for(Y=0;Y<S.geometries.length;Y++)if(a(S.geometries[Y],J,at)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(V,J,at,Y){var rt=at;return a(V,function(C,S,T,A,D){S===0&&at===void 0?rt=C:rt=J(rt,C,S,T,A,D)},Y),rt}function d(V,J){var at;switch(V.type){case"FeatureCollection":for(at=0;at<V.features.length&&J(V.features[at].properties,at)!==!1;at++);break;case"Feature":J(V.properties,0);break}}function g(V,J,at){var Y=at;return d(V,function(rt,C){C===0&&at===void 0?Y=rt:Y=J(Y,rt,C)}),Y}function _(V,J){if(V.type==="Feature")J(V,0);else if(V.type==="FeatureCollection")for(var at=0;at<V.features.length&&J(V.features[at],at)!==!1;at++);}function b(V,J,at){var Y=at;return _(V,function(rt,C){C===0&&at===void 0?Y=rt:Y=J(Y,rt,C)}),Y}function w(V){var J=[];return a(V,function(at){J.push(at)}),J}function P(V,J){var at,Y,rt,C,S,T,A,D,R,Z,H=0,W=V.type==="FeatureCollection",it=V.type==="Feature",et=W?V.features.length:1;for(at=0;at<et;at++){for(T=W?V.features[at].geometry:it?V.geometry:V,D=W?V.features[at].properties:it?V.properties:{},R=W?V.features[at].bbox:it?V.bbox:void 0,Z=W?V.features[at].id:it?V.id:void 0,A=T?T.type==="GeometryCollection":!1,S=A?T.geometries.length:1,rt=0;rt<S;rt++){if(C=A?T.geometries[rt]:T,C===null){if(J(null,H,D,R,Z)===!1)return!1;continue}switch(C.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(J(C,H,D,R,Z)===!1)return!1;break}case"GeometryCollection":{for(Y=0;Y<C.geometries.length;Y++)if(J(C.geometries[Y],H,D,R,Z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}H++}}function U(V,J,at){var Y=at;return P(V,function(rt,C,S,T,A){C===0&&at===void 0?Y=rt:Y=J(Y,rt,C,S,T,A)}),Y}function I(V,J){P(V,function(at,Y,rt,C,S){var T=at===null?null:at.type;switch(T){case null:case"Point":case"LineString":case"Polygon":return J(r.feature(at,rt,{bbox:C,id:S}),Y,0)===!1?!1:void 0}var A;switch(T){case"MultiPoint":A="Point";break;case"MultiLineString":A="LineString";break;case"MultiPolygon":A="Polygon";break}for(var D=0;D<at.coordinates.length;D++){var R=at.coordinates[D],Z={type:A,coordinates:R};if(J(r.feature(Z,rt),Y,D)===!1)return!1}})}function nt(V,J,at){var Y=at;return I(V,function(rt,C,S){C===0&&S===0&&at===void 0?Y=rt:Y=J(Y,rt,C,S)}),Y}function st(V,J){I(V,function(at,Y,rt){var C=0;if(at.geometry){var S=at.geometry.type;if(!(S==="Point"||S==="MultiPoint")){var T,A=0,D=0,R=0;if(a(at,function(Z,H,W,it,et){if(T===void 0||Y>A||it>D||et>R){T=Z,A=Y,D=it,R=et,C=0;return}var vt=r.lineString([T,Z],at.properties);if(J(vt,Y,rt,et,C)===!1)return!1;C++,T=Z})===!1)return!1}}})}function Lt(V,J,at){var Y=at,rt=!1;return st(V,function(C,S,T,A,D){rt===!1&&at===void 0?Y=C:Y=J(Y,C,S,T,A,D),rt=!0}),Y}function It(V,J){if(!V)throw new Error("geojson is required");I(V,function(at,Y,rt){if(at.geometry!==null){var C=at.geometry.type,S=at.geometry.coordinates;switch(C){case"LineString":if(J(at,Y,rt,0,0)===!1)return!1;break;case"Polygon":for(var T=0;T<S.length;T++)if(J(r.lineString(S[T],at.properties),Y,rt,T)===!1)return!1;break}}})}function Gt(V,J,at){var Y=at;return It(V,function(rt,C,S,T){C===0&&at===void 0?Y=rt:Y=J(Y,rt,C,S,T)}),Y}function be(V,J){if(J=J||{},!r.isObject(J))throw new Error("options is invalid");var at=J.featureIndex||0,Y=J.multiFeatureIndex||0,rt=J.geometryIndex||0,C=J.segmentIndex||0,S=J.properties,T;switch(V.type){case"FeatureCollection":at<0&&(at=V.features.length+at),S=S||V.features[at].properties,T=V.features[at].geometry;break;case"Feature":S=S||V.properties,T=V.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=V;break;default:throw new Error("geojson is invalid")}if(T===null)return null;var A=T.coordinates;switch(T.type){case"Point":case"MultiPoint":return null;case"LineString":return C<0&&(C=A.length+C-1),r.lineString([A[C],A[C+1]],S,J);case"Polygon":return rt<0&&(rt=A.length+rt),C<0&&(C=A[rt].length+C-1),r.lineString([A[rt][C],A[rt][C+1]],S,J);case"MultiLineString":return Y<0&&(Y=A.length+Y),C<0&&(C=A[Y].length+C-1),r.lineString([A[Y][C],A[Y][C+1]],S,J);case"MultiPolygon":return Y<0&&(Y=A.length+Y),rt<0&&(rt=A[Y].length+rt),C<0&&(C=A[Y][rt].length-C-1),r.lineString([A[Y][rt][C],A[Y][rt][C+1]],S,J)}throw new Error("geojson is invalid")}function N(V,J){if(J=J||{},!r.isObject(J))throw new Error("options is invalid");var at=J.featureIndex||0,Y=J.multiFeatureIndex||0,rt=J.geometryIndex||0,C=J.coordIndex||0,S=J.properties,T;switch(V.type){case"FeatureCollection":at<0&&(at=V.features.length+at),S=S||V.features[at].properties,T=V.features[at].geometry;break;case"Feature":S=S||V.properties,T=V.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=V;break;default:throw new Error("geojson is invalid")}if(T===null)return null;var A=T.coordinates;switch(T.type){case"Point":return r.point(A,S,J);case"MultiPoint":return Y<0&&(Y=A.length+Y),r.point(A[Y],S,J);case"LineString":return C<0&&(C=A.length+C),r.point(A[C],S,J);case"Polygon":return rt<0&&(rt=A.length+rt),C<0&&(C=A[rt].length+C),r.point(A[rt][C],S,J);case"MultiLineString":return Y<0&&(Y=A.length+Y),C<0&&(C=A[Y].length+C),r.point(A[Y][C],S,J);case"MultiPolygon":return Y<0&&(Y=A.length+Y),rt<0&&(rt=A[Y].length+rt),C<0&&(C=A[Y][rt].length-C),r.point(A[Y][rt][C],S,J)}throw new Error("geojson is invalid")}i.coordAll=w,i.coordEach=a,i.coordReduce=u,i.featureEach=_,i.featureReduce=b,i.findPoint=N,i.findSegment=be,i.flattenEach=I,i.flattenReduce=nt,i.geomEach=P,i.geomReduce=U,i.lineEach=It,i.lineReduce=Gt,i.propEach=d,i.propReduce=g,i.segmentEach=st,i.segmentReduce=Lt}),Xn=f(i=>{Object.defineProperty(i,"__esModule",{value:!0});var r=wr();function a(u){var d=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(g){d[0]>g[0]&&(d[0]=g[0]),d[1]>g[1]&&(d[1]=g[1]),d[2]<g[0]&&(d[2]=g[0]),d[3]<g[1]&&(d[3]=g[1])}),d}a.default=a,i.default=a}),An=f((i,r)=>{var a=Le(),u=ze(),d=wr(),g=Xn().default,_=d.featureEach;d.coordEach,u.polygon;var b=u.featureCollection;function w(P){var U=new a(P);return U.insert=function(I){if(I.type!=="Feature")throw new Error("invalid feature");return I.bbox=I.bbox?I.bbox:g(I),a.prototype.insert.call(this,I)},U.load=function(I){var nt=[];return Array.isArray(I)?I.forEach(function(st){if(st.type!=="Feature")throw new Error("invalid features");st.bbox=st.bbox?st.bbox:g(st),nt.push(st)}):_(I,function(st){if(st.type!=="Feature")throw new Error("invalid features");st.bbox=st.bbox?st.bbox:g(st),nt.push(st)}),a.prototype.load.call(this,nt)},U.remove=function(I,nt){if(I.type!=="Feature")throw new Error("invalid feature");return I.bbox=I.bbox?I.bbox:g(I),a.prototype.remove.call(this,I,nt)},U.clear=function(){return a.prototype.clear.call(this)},U.search=function(I){var nt=a.prototype.search.call(this,this.toBBox(I));return b(nt)},U.collides=function(I){return a.prototype.collides.call(this,this.toBBox(I))},U.all=function(){var I=a.prototype.all.call(this);return b(I)},U.toJSON=function(){return a.prototype.toJSON.call(this)},U.fromJSON=function(I){return a.prototype.fromJSON.call(this,I)},U.toBBox=function(I){var nt;if(I.bbox)nt=I.bbox;else if(Array.isArray(I)&&I.length===4)nt=I;else if(Array.isArray(I)&&I.length===6)nt=[I[0],I[1],I[3],I[4]];else if(I.type==="Feature")nt=g(I);else if(I.type==="FeatureCollection")nt=g(I);else throw new Error("invalid geojson");return{minX:nt[0],minY:nt[1],maxX:nt[2],maxY:nt[3]}},U}r.exports=w,r.exports.default=w});Array.prototype.findIndex=Array.prototype.findIndex||function(i){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++)if(i.call(u,r[d],d,r))return d;return-1},Array.prototype.find=Array.prototype.find||function(i){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof i!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++){var g=r[d];if(i.call(u,g,d,r))return g}},typeof Object.assign!="function"&&(Object.assign=function(i){if(i==null)throw new TypeError("Cannot convert undefined or null to object");i=Object(i);for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])}return i}),function(i){i.forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(i,r){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),u=a.length>>>0;if(u===0)return!1;var d=r|0,g=Math.max(d>=0?d:u-Math.abs(d),0);function _(b,w){return b===w||typeof b=="number"&&typeof w=="number"&&isNaN(b)&&isNaN(w)}for(;g<u;){if(_(a[g],i))return!0;g++}return!1}});var Gs={version:"2.18.3"},ue=v(qr()),Ze={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},$s={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Wr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Di={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Jl={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},Jr={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},Tn={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},We={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Dn={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Lr={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Cr={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Vs={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Qn={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Hs={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Zs={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},Yr={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},qs={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},Ks={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},Xr={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},ua={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Ws={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},Yl={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},ae={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},Zi={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Re={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},ha={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},Js={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Ys=Qn,gn={en:Ze,de:$s,it:Wr,id:Di,ro:Jl,ru:Jr,es:Tn,nl:We,fr:Dn,pt:Ys,pt_br:Vs,pt_pt:Qn,zh:Lr,zh_tw:Cr,pl:Hs,sv:Zs,el:Yr,hu:qs,da:Ks,no:Xr,fa:ua,ua:Ws,tr:Yl,cz:ae,ja:Zi,fi:Re,ko:ha,ky:Js},Rn={_globalEditModeEnabled:!1,enableGlobalEditMode(i){let r={...i};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(a=>{this._isRelevantForEdit(a)&&a.pm.enable(r)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(i=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(i)},handleLayerAdditionInGlobalEditMode(){let i=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let r in i){let a=i[r];this._isRelevantForEdit(a)&&a.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:i}){this._addedLayersEdit[L.stamp(i)]=i},_isRelevantForEdit(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowEditing}},Xs=Rn,kr={_globalDragModeEnabled:!1,enableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},i.forEach(r=>{this._isRelevantForDrag(r)&&r.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let i=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,i.forEach(r=>{r.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let i=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let r in i){let a=i[r];this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}},_layerAddedDrag({layer:i}){this._addedLayersDrag[L.stamp(i)]=i},_isRelevantForDrag(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.draggable}},ii=kr,On={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(i=>{this._isRelevantForRemoval(i)&&(i.pm.enabled()&&i.pm.disable(),i.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(i=>{i.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(i){let r=i.target;this._isRelevantForRemoval(r)&&!r.pm.dragging()&&(r.removeFrom(this.map.pm._getContainingLayer()),r.remove(),r instanceof L.LayerGroup?(this._fireRemoveLayerGroup(r),this._fireRemoveLayerGroup(this.map,r)):(r.pm._fireRemove(r),r.pm._fireRemove(this.map,r)))},_isRelevantForRemoval(i){return i.pm&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let i=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:i}){this._addedLayersRemoval[L.stamp(i)]=i}},ca=On,da={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{this._isRelevantForRotate(i)&&i.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(i=>i instanceof L.Polyline).forEach(i=>{i.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(i){return i.pm&&i instanceof L.Polyline&&!(i instanceof L.LayerGroup)&&(!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1)&&!i._pmTempLayer&&i.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let i=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let r in i){let a=i[r];this._isRelevantForRemoval(a)&&a.pm.enableRotate()}},_layerAddedRotate({layer:i}){this._addedLayersRotate[L.stamp(i)]=i}},Xl=da,fa=v(qr()),Qs={_fireDrawStart(i="Draw",r={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},i,r)},_fireDrawEnd(i="Draw",r={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},i,r)},_fireCreate(i,r="Draw",a={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:i,layer:i},r,a)},_fireCenterPlaced(i="Draw",r={}){let a=i==="Draw"?this._layer:void 0,u=i!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:a,layer:u,latlng:this._layer.getLatLng()},i,r)},_fireCut(i,r,a,u="Draw",d={}){this.__fire(i,"pm:cut",{shape:this._shape,layer:r,originalLayer:a},u,d)},_fireEdit(i=this._layer,r="Edit",a={}){this.__fire(i,"pm:edit",{layer:this._layer,shape:this.getShape()},r,a)},_fireEnable(i="Edit",r={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDisable(i="Edit",r={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},i,r)},_fireUpdate(i="Edit",r={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},i,r)},_fireMarkerDragStart(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDrag(i,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDragEnd(i,r=void 0,a=void 0,u="Edit",d={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:i,shape:this.getShape(),indexPath:r,intersectionReset:a},u,d)},_fireDragStart(i="Edit",r={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},i,r)},_fireDrag(i,r="Edit",a={}){this.__fire(this._layer,"pm:drag",{...i,shape:this.getShape()},r,a)},_fireDragEnd(i="Edit",r={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragEnable(i="Edit",r={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},i,r)},_fireDragDisable(i="Edit",r={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},i,r)},_fireRemove(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:this.getShape()},a,u)},_fireVertexAdded(i,r,a,u="Edit",d={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:i,indexPath:r,latlng:a,shape:this.getShape()},u,d)},_fireVertexRemoved(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:i,indexPath:r,shape:this.getShape()},a,u)},_fireVertexClick(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireIntersect(i,r=this._layer,a="Edit",u={}){this.__fire(r,"pm:intersect",{layer:this._layer,intersection:i,shape:this.getShape()},a,u)},_fireLayerReset(i,r,a="Edit",u={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:i,indexPath:r,shape:this.getShape()},a,u)},_fireChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:i,shape:this.getShape()},r,a)},_fireTextChange(i,r="Edit",a={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:i,shape:this.getShape()},r,a)},_fireTextFocus(i="Edit",r={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},i,r)},_fireTextBlur(i="Edit",r={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},i,r)},_fireSnapDrag(i,r,a="Snapping",u={}){this.__fire(i,"pm:snapdrag",r,a,u)},_fireSnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:snap",r,a,u)},_fireUnsnap(i,r,a="Snapping",u={}){this.__fire(i,"pm:unsnap",r,a,u)},_fireRotationEnable(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},a,u)},_fireRotationDisable(i,r="Rotation",a={}){this.__fire(i,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},r,a)},_fireRotationStart(i,r,a="Rotation",u={}){this.__fire(i,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:r},a,u)},_fireRotation(i,r,a,u=this._rotationLayer,d="Rotation",g={}){this.__fire(i,"pm:rotate",{layer:u,helpLayer:this._layer,startAngle:this._startAngle,angle:u.pm.getAngle(),angleDiff:r,oldLatLngs:a,newLatLngs:u.getLatLngs()},d,g)},_fireRotationEnd(i,r,a,u="Rotation",d={}){this.__fire(i,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:r,angle:this._rotationLayer.pm.getAngle(),originLatLngs:a,newLatLngs:this._rotationLayer.getLatLngs()},u,d)},_fireActionClick(i,r,a,u="Toolbar",d={}){this.__fire(this._map,"pm:actionclick",{text:i.text,action:i,btnName:r,button:a},u,d)},_fireButtonClick(i,r,a="Toolbar",u={}){this.__fire(this._map,"pm:buttonclick",{btnName:i,button:r},a,u)},_fireLangChange(i,r,a,u,d="Global",g={}){this.__fire(this.map,"pm:langchange",{oldLang:i,activeLang:r,fallback:a,translations:u},d,g)},_fireGlobalDragModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalEditModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalRemovalModeToggled(i,r="Global",a={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:i,map:this.map},r,a)},_fireGlobalCutModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},i,r)},_fireGlobalDrawModeToggled(i="Global",r={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},i,r)},_fireGlobalRotateModeToggled(i="Global",r={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},i,r)},_fireRemoveLayerGroup(i,r=i,a="Edit",u={}){this.__fire(i,"pm:remove",{layer:r,shape:void 0},a,u)},_fireKeyeventEvent(i,r,a,u="Global",d={}){this.__fire(this.map,"pm:keyevent",{event:i,eventType:r,focusOn:a},u,d)},__fire(i,r,a,u,d={}){a=(0,fa.default)(a,d,{source:u}),L.PM.Utils._fireEvent(i,r,a)}},Qr=Qs,pa=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(i){this.map=i,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),i.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(i){let r="document";this.map.getContainer().contains(i.target)&&(r="map");let a={event:i,eventType:i.type,focusOn:r};this._lastEvents[i.type]=a,this._lastEvents.current=a,this.map.pm._fireKeyeventEvent(i,i.type,r)},_onBlur(i){i.altKey=!1;let r={event:i,eventType:i.type,focusOn:"document"};this._lastEvents[i.type]=r,this._lastEvents.current=r},getLastKeyEvent(i="current"){return this._lastEvents[i]},isShiftKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.shiftKey},isAltKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.altKey},isCtrlKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.ctrlKey},isMetaKeyPressed(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.metaKey},getPressedKey(){var i;return(i=this._lastEvents.current)==null?void 0:i.event.key}}),ye=pa,ma=v(mn());function oe(i){let r=L.PM.activeLang;return(0,ma.default)(gn[r],i)||(0,ma.default)(gn.en,i)||i}function In(i){for(let r=0;r<i.length;r+=1){let a=i[r];if(Array.isArray(a)){if(In(a))return!0}else if(a!=null&&a!=="")return!0}return!1}function Er(i){return i.reduce((r,a)=>{if(a.length!==0){let u=Array.isArray(a)?Er(a):a;Array.isArray(u)?u.length!==0&&r.push(u):r.push(u)}return r},[])}function Ql(i,r,a){let u={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:d,b:g,f:_}=u,b=i.lng,w=i.lat,P=a,U=Math.PI,I=r*U/180,nt=Math.sin(I),st=Math.cos(I),Lt=(1-_)*Math.tan(w*U/180),It=1/Math.sqrt(1+Lt*Lt),Gt=Lt*It,be=Math.atan2(Lt,st),N=It*nt,V=1-N*N,J=V*(d*d-g*g)/(g*g),at=1+J/16384*(4096+J*(-768+J*(320-175*J))),Y=J/1024*(256+J*(-128+J*(74-47*J))),rt=P/(g*at),C=2*Math.PI,S,T,A;for(;Math.abs(rt-C)>1e-12;){S=Math.cos(2*be+rt),T=Math.sin(rt),A=Math.cos(rt);let vt=Y*T*(S+Y/4*(A*(-1+2*S*S)-Y/6*S*(-3+4*T*T)*(-3+4*S*S)));C=rt,rt=P/(g*at)+vt}let D=Gt*T-It*A*st,R=Math.atan2(Gt*A+It*T*st,(1-_)*Math.sqrt(N*N+D*D)),Z=Math.atan2(T*nt,It*A-Gt*T*st),H=_/16*V*(4+_*(4-3*V)),W=Z-(1-H)*_*N*(rt+H*T*(S+H*A*(-1+2*S*S))),it=b+W*180/U,et=R*180/U;return L.latLng(it,et)}function ts(i,r,a,u,d=!0){let g,_,b,w=[];for(let P=0;P<a;P+=1){if(d)g=P*360/a+u,_=Ql(i,g,r),b=L.latLng(_.lng,_.lat);else{let U=i.lat+Math.cos(2*P*Math.PI/a)*r,I=i.lng+Math.sin(2*P*Math.PI/a)*r;b=L.latLng(U,I)}w.push(b)}return w}function tu(i,r,a){r=(r+360)%360;let u=Math.PI/180,d=180/Math.PI,{R:g}=L.CRS.Earth,_=i.lng*u,b=i.lat*u,w=r*u,P=Math.sin(b),U=Math.cos(b),I=Math.cos(a/g),nt=Math.sin(a/g),st=Math.asin(P*I+U*nt*Math.cos(w)),Lt=_+Math.atan2(Math.sin(w)*nt*U,I-P*Math.sin(st));Lt*=d;let It=Lt-360,Gt=Lt<-180?Lt+360:Lt;return Lt=Lt>180?It:Gt,L.latLng([st*d,Lt])}function es(i,r,a){let u=i.latLngToContainerPoint(r),d=i.latLngToContainerPoint(a),g=Math.atan2(d.y-u.y,d.x-u.x)*180/Math.PI+90;return g+=g<0?360:0,g}function is(i,r,a,u){let d=es(i,r,a);return tu(r,d,u)}function eu(i,r,a="asc"){if(!r||Object.keys(r).length===0)return(w,P)=>w-P;let u=Object.keys(r),d,g=u.length-1,_={};for(;g>=0;)d=u[g],_[d.toLowerCase()]=r[d],g-=1;function b(w){if(w instanceof L.Marker)return"Marker";if(w instanceof L.Circle)return"Circle";if(w instanceof L.CircleMarker)return"CircleMarker";if(w instanceof L.Rectangle)return"Rectangle";if(w instanceof L.Polygon)return"Polygon";if(w instanceof L.Polyline)return"Line"}return(w,P)=>{let U,I;if(U=b(w.layer).toLowerCase(),I=b(P.layer).toLowerCase(),!U||!I)return 0;let nt=U in _?_[U]:Number.MAX_SAFE_INTEGER,st=I in _?_[I]:Number.MAX_SAFE_INTEGER,Lt=0;return nt<st?Lt=-1:nt>st&&(Lt=1),a==="desc"?Lt*-1:Lt}}function qi(i,r=i.getLatLngs()){return i instanceof L.Polygon?L.polygon(r).getLatLngs():L.polyline(r).getLatLngs()}function ga(i,r){var a,u,d,g;if((u=(a=r.options.crs)==null?void 0:a.projection)!=null&&u.MAX_LATITUDE){let _=(g=(d=r.options.crs)==null?void 0:d.projection)==null?void 0:g.MAX_LATITUDE;i.lat=Math.max(Math.min(_,i.lat),-_)}return i}function hi(i){return i.options.renderer||i._map&&(i._map._getPaneRenderer(i.options.pane)||i._map.options.renderer||i._map._renderer)||i._renderer}var iu=L.Class.extend({includes:[Xs,ii,ca,Xl,Qr],initialize(i){this.map=i,this.Draw=new L.PM.Draw(i),this.Toolbar=new L.PM.Toolbar(i),this.Keyboard=ye(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(i)},setLang(i="en",r,a="en"){if(i=i.trim().toLowerCase(),!/^[a-z]{2}$/.test(i)){let d=i.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(d){let g=[`${d[1]}_${d[2]}`,`${d[1]}`];for(let _ of g)if(gn[_]){i=_;break}}}let u=L.PM.activeLang;r&&(gn[i]=(0,ue.default)(gn[a],r)),L.PM.activeLang=i,this.map.pm.Toolbar.reinit(),this._fireLangChange(u,i,a,gn[i])},addControls(i){this.Toolbar.addControls(i)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(i="Polygon",r){i==="Poly"&&(i="Polygon"),this.Draw.enable(i,r)},disableDraw(i="Polygon"){i==="Poly"&&(i="Polygon"),this.Draw.disable(i)},setPathOptions(i,r={}){let a=r.ignoreShapes||[],u=r.merge||!1;this.map.pm.Draw.shapes.forEach(d=>{a.indexOf(d)===-1&&this.map.pm.Draw[d].setPathOptions(i,u)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(i){let r=(0,ue.default)(this.globalOptions,i);r.editable&&(r.resizeableCircleMarker=r.editable,delete r.editable);let a=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!r.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),a=!0);let u=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!r.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),u=!0),this.map.pm.Draw.shapes.forEach(d=>{this.map.pm.Draw[d].setOptions(r)}),a&&this.map.pm.Draw.CircleMarker.enable(),u&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.setOptions(r)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=r,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(i=>{i.pm.enabled()&&i.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(i){return this.Draw.Cut.enable(i)},toggleGlobalCutMode(i){return this.Draw.Cut.toggle(i)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(i=!1){let r=L.PM.Utils.findLayers(this.map);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},getGeomanDrawLayers(i=!1){let r=L.PM.Utils.findLayers(this.map).filter(u=>u._drawnByGeoman===!0);if(!i)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(i){this._touchEventCounter===0&&(L.DomEvent.on(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(i){this._touchEventCounter===1&&(L.DomEvent.off(i,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(i,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(i){hi(this.map)._onMouseMove(this._createMouseEvent("mousemove",i))},_canvasTouchClick(i){let r="";i.type==="touchstart"||i.type==="pointerdown"?r="mousedown":(i.type==="touchend"||i.type==="pointerup"||i.type==="touchcancel"||i.type==="pointercancel")&&(r="mouseup"),r&&hi(this.map)._onClick(this._createMouseEvent(r,i))},_createMouseEvent(i,r){let a,u=r.touches[0]||r.changedTouches[0];try{a=new MouseEvent(i,{bubbles:r.bubbles,cancelable:r.cancelable,view:r.view,detail:u.detail,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,button:r.button,relatedTarget:r.relatedTarget})}catch{a=document.createEvent("MouseEvents"),a.initMouseEvent(i,r.bubbles,r.cancelable,r.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}return a}}),_a=iu,_n=L.Control.extend({includes:[Qr],options:{position:"topleft",disableByOtherButtons:!0},initialize(i){this._button=L.Util.extend({},this.options,i)},onAdd(i){return this._map=i,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let i=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),i?i.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(i){return typeof i=="boolean"?this._button.toggleStatus=i:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(i){i&&i.preventDefault(),!this._button.disabled&&(this._button.onClick(i,{button:this,event:i}),this._clicked(i),this._button.afterClick(i,{button:this,event:i}))},_makeButton(i){let r=this.options.position.indexOf("right")>-1?"pos-right":"",a=L.DomUtil.create("div",`button-container  ${r}`,this._container);i.title&&a.setAttribute("title",i.title);let u=L.DomUtil.create("a","leaflet-buttons-control-button",a);u.setAttribute("role","button"),u.setAttribute("tabindex","0"),u.href="#";let d=L.DomUtil.create("div",`leaflet-pm-actions-container ${r}`,a),g=i.actions,_={cancel:{text:oe("actions.cancel"),title:oe("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:oe("actions.finish"),title:oe("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:oe("actions.removeLastVertex"),title:oe("actions.removeLastVertex"),onClick(){this._map.pm.Draw[i.jsClass]._removeLastVertex()}},finish:{text:oe("actions.finish"),title:oe("actions.finish"),onClick(w){this._map.pm.Draw[i.jsClass]._finishShape(w)}}};i._preparedActions=g.map(w=>{let P=typeof w=="string"?w:w.name,U;if(_[P])U=_[P];else if(w.text)U=w;else return U;let I=L.DomUtil.create("a",`leaflet-pm-action ${r} action-${P}`,d);if(I.setAttribute("role","button"),I.setAttribute("tabindex","0"),I.href="#",U.title&&(I.title=U.title),I.innerHTML=U.text,L.DomEvent.disableClickPropagation(I),L.DomEvent.on(I,"click",L.DomEvent.stop),U._node=I,!i.disabled&&U.onClick){let nt=st=>{st.preventDefault();let Lt="",{buttons:It}=this._map.pm.Toolbar;for(let Gt in It)if(It[Gt]._button===i){Lt=Gt;break}this._fireActionClick(U,Lt,i)};L.DomEvent.addListener(I,"click",nt,this),L.DomEvent.addListener(I,"click",U.onClick,this),L.DomEvent.addListener(I,"click",()=>this._updateActiveAction(i))}return U}),this._updateActiveAction(i),i.toggleStatus&&L.DomUtil.addClass(a,"active");let b=L.DomUtil.create("div","control-icon",u);return i.iconUrl&&b.setAttribute("src",i.iconUrl),i.className&&L.DomUtil.addClass(b,i.className),L.DomEvent.disableClickPropagation(u),L.DomEvent.on(u,"click",L.DomEvent.stop),i.disabled||(L.DomEvent.addListener(u,"click",this._onBtnClick,this),L.DomEvent.addListener(u,"click",this._triggerClick,this)),i.disabled&&(L.DomUtil.addClass(u,"pm-disabled"),u.setAttribute("aria-disabled","true")),a},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let i="",{buttons:r}=this._map.pm.Toolbar;for(let a in r)if(r[a]._button===this._button){i=a;break}this._fireButtonClick(i,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let i="pm-disabled",r=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(r,i),r.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(r,i),r.setAttribute("aria-disabled","false"))},_updateActiveAction(i){var r;(r=i._preparedActions)==null||r.forEach(a=>{a!=null&&a._node&&(a.isActive&&a.isActive.call(this)?L.DomUtil.addClass(a._node,"active-action"):L.DomUtil.removeClass(a._node,"active-action"))})}}),ya=_n;L.Control.PMButton=ya;var va=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(i){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(i)},reinit(){let i=this.isVisible;this.removeControls(),this._defineButtons(),i&&this.addControls()},init(i){this.map=i,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(i){let r=`${i}Container`;return this[r]||(this[r]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${i} leaflet-bar leaflet-control`)),this[r]},getButtons(){return this.buttons},addControls(i=this.options){typeof i.editPolygon<"u"&&(i.editMode=i.editPolygon),typeof i.deleteLayer<"u"&&(i.removalMode=i.deleteLayer),L.Util.setOptions(this,i),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let i=this.getButtons(),r={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let a in i){let u=i[a];L.Util.setOptions(u,{className:r.geomanIcons[a]})}},removeControls(){let i=this.getButtons();for(let r in i)i[r].remove();this.isVisible=!1},toggleControls(i=this.options){this.isVisible?this.removeControls():this.addControls(i)},_addButton(i,r){return this.buttons[i]=r,this.options[i]=!!this.options[i]||!1,this.buttons[i]},triggerClickOnToggledButtons(i){for(let r in this.buttons){let a=this.buttons[r];a._button.disableByOtherButtons&&a!==i&&a.toggled()&&a._triggerClick()}},toggleButton(i,r,a=!0){i==="editPolygon"&&(i="editMode"),i==="deleteLayer"&&(i="removalMode");let u=i;return a&&this.triggerClickOnToggledButtons(this.buttons[u]),this.buttons[u]?this.buttons[u].toggle(r):!1},_defineButtons(){let i={className:"control-icon leaflet-pm-icon-marker",title:oe("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(nt,st)=>{this.map.pm.Draw[st.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:oe("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(nt,st)=>{this.map.pm.Draw[st.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},a={className:"control-icon leaflet-pm-icon-polyline",title:oe("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(nt,st)=>{this.map.pm.Draw[st.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={title:oe("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(nt,st)=>{this.map.pm.Draw[st.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},d={title:oe("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(nt,st)=>{this.map.pm.Draw[st.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:oe("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(nt,st)=>{this.map.pm.Draw[st.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:oe("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:oe("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},w={title:oe("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(nt,st)=>{this.map.pm.Draw[st.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},P={title:oe("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},U={title:oe("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},I={className:"control-icon leaflet-pm-icon-text",title:oe("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(nt,st)=>{this.map.pm.Draw[st.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(i)),this._addButton("drawPolyline",new L.Control.PMButton(a)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(u)),this._addButton("drawCircleMarker",new L.Control.PMButton(d)),this._addButton("drawText",new L.Control.PMButton(I)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(w)),this._addButton("removalMode",new L.Control.PMButton(P)),this._addButton("rotateMode",new L.Control.PMButton(U))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let i=this.getButtons(),r=[];this.options.drawControls===!1&&(r=r.concat(Object.keys(i).filter(a=>!i[a]._button.tool))),this.options.editControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="edit"))),this.options.optionsControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="options"))),this.options.customControls===!1&&(r=r.concat(Object.keys(i).filter(a=>i[a]._button.tool==="custom")));for(let a in i)if(this.options[a]&&r.indexOf(a)===-1){let u=i[a]._button.tool;u||(u="draw"),i[a].setPosition(this._getBtnPosition(u)),i[a].addTo(this.map)}},_getBtnPosition(i){return this.options.positions&&this.options.positions[i]?this.options.positions[i]:this.options.position},setBlockPosition(i,r){this.options.positions[i]=r,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(i,r){if(r)typeof r!="object"&&(r={name:r});else throw new TypeError("Button has no name");let a=this._btnNameMapping(i);if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");let u=this.map.pm.Draw.createNewDrawInstance(r.name,a);r={...this.buttons[a]._button,...r};let d=this.createCustomControl(r);return{drawInstance:u,control:d}},createCustomControl(i){if(!i.name)throw new TypeError("Button has no name");if(this.buttons[i.name])throw new TypeError("Button with this name already exists");i.onClick||(i.onClick=()=>{}),i.afterClick||(i.afterClick=()=>{}),i.toggle!==!1&&(i.toggle=!0),i.block&&(i.block=i.block.toLowerCase()),(!i.block||i.block==="draw")&&(i.block=""),i.className?i.className.indexOf("control-icon")===-1&&(i.className=`control-icon ${i.className}`):i.className="control-icon";let r={tool:i.block,className:i.className,title:i.title||"",jsClass:i.name,onClick:i.onClick,afterClick:i.afterClick,doToggle:i.toggle,toggleStatus:!1,disableOtherButtons:i.disableOtherButtons??!0,disableByOtherButtons:i.disableByOtherButtons??!0,cssToggle:i.toggle,position:this.options.position,actions:i.actions||[],disabled:!!i.disabled};this.options[i.name]!==!1&&(this.options[i.name]=!0);let a=this._addButton(i.name,new L.Control.PMButton(r));return this.changeControlOrder(),a},controlExists(i){return!!this.getButton(i)},getButton(i){return this.getButtons()[i]},getButtonsInBlock(i){let r={};if(i)for(let a in this.getButtons()){let u=this.getButtons()[a];(u._button.tool===i||i==="draw"&&!u._button.tool)&&(r[a]=u)}return r},changeControlOrder(i=[]){let r=this._shapeMapping(),a=[];i.forEach(g=>{r[g]?a.push(r[g]):a.push(g)});let u=this.getButtons(),d={};a.forEach(g=>{u[g]&&(d[g]=u[g])}),Object.keys(u).filter(g=>!u[g]._button.tool||u[g]._button.tool==="draw").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="edit").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="options").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="custom").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),this.map.pm.Toolbar.buttons=d,this._showHideButtons()},getControlOrder(){let i=this.getButtons(),r=[];for(let a in i)r.push(a);return r},changeActionsOfControl(i,r){let a=this._btnNameMapping(i);if(!a)throw new TypeError("No name passed");if(!r)throw new TypeError("No actions passed");if(!this.buttons[a])throw new TypeError("Button with this name not exists");this.buttons[a]._button.actions=r,this.changeControlOrder()},setButtonDisabled(i,r){let a=this._btnNameMapping(i);r?this.buttons[a].disable():this.buttons[a].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(i){let r=this._shapeMapping();return r[i]?r[i]:i}}),to=va,nu=v(qr()),ba={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(i){i.forEach(r=>{if(Array.isArray(r)){this._assignEvents(r);return}r.off("drag",this._handleSnapping,this),r.on("drag",this._handleSnapping,this),r.off("dragend",this._cleanupSnapping,this),r.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(i){if(i){let r=i.target;r._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(r=>{r.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(i){var b,w,P;let r=i.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((b=i==null?void 0:i.originalEvent)==null?void 0:b.altKey)||((P=(w=this._map)==null?void 0:w.pm)==null?void 0:P.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let a=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(a).length===0)return!1;let u=a.layer instanceof L.Marker||a.layer instanceof L.CircleMarker||!this.options.snapSegment,d;u?d=a.latlng:d=this._checkPrioritiySnapping(a);let g=this.options.snapDistance,_={marker:r,shape:this._shape,snapLatLng:d,segment:a.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:a.layer,distance:a.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),a.distance<g){r._orgLatLng=r.getLatLng(),r.setLatLng(d),r._snapped=!0,r._snapInfo=_;let U=()=>{this._snapLatLng=d,this._fireSnap(r,_),this._fireSnap(this._layer,_)},I=this._snapLatLng||{},nt=d||{};(I.lat!==nt.lat||I.lng!==nt.lng)&&U()}else this._snapLatLng&&(this._unsnap(_),r._snapped=!1,r._snapInfo=void 0,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList(){let i=[],r=[],a=this._map;a.off("layerremove",this._handleSnapLayerRemoval,this),a.on("layerremove",this._handleSnapLayerRemoval,this),a.eachLayer(u=>{if((u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&u.options.snapIgnore!==!0){if(u.options.snapIgnore===void 0&&(!L.PM.optIn&&u.options.pmIgnore===!0||L.PM.optIn&&u.options.pmIgnore!==!1))return;(u instanceof L.Circle||u instanceof L.CircleMarker)&&u.pm&&u.pm._hiddenPolyCircle?i.push(u.pm._hiddenPolyCircle):u instanceof L.ImageOverlay&&(u=L.rectangle(u.getBounds())),i.push(u);let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,r.push(d),(u instanceof L.Circle||u instanceof L.CircleMarker)&&r.push(d)}}),i=i.filter(u=>this._layer!==u),i=i.filter(u=>u._latlng||u._latlngs&&In(u._latlngs)),i=i.filter(u=>!u._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let u=L.polyline([],{color:"red",pmIgnore:!0});u._pmTempLayer=!0,r.push(u)}),this._snapList=i.concat(this._otherSnapLayers)):this._snapList=i,this.debugIndicatorLines=r},_handleSnapLayerRemoval({layer:i}){if(!i._leaflet_id)return;let r=this._snapList.findIndex(a=>a._leaflet_id===i._leaflet_id);r>-1&&this._snapList.splice(r,1)},_calcClosestLayer(i,r){return this._calcClosestLayers(i,r,1)[0]},_calcClosestLayers(i,r,a=1){let u=[],d={};r.forEach((_,b)=>{var P;if(_._parentCopy&&_._parentCopy===this._layer||((P=_.getLatLngs)==null?void 0:P.call(_).flat(5).length)<2)return;let w=this._calcLayerDistances(i,_);if(w.distance=Math.floor(w.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[b]){let U=L.polyline([],{color:"red",pmIgnore:!0});U._pmTempLayer=!0,this.debugIndicatorLines[b]=U}this.debugIndicatorLines[b].setLatLngs([i,w.latlng])}a===1&&(d.distance===void 0||w.distance-5<=d.distance)?(w.distance+5<d.distance&&(u=[]),d=w,d.layer=_,u.push(d)):a!==1&&(d={},d=w,d.layer=_,u.push(d))}),a!==1&&(u=u.sort((_,b)=>_.distance-b.distance)),a===-1&&(a=u.length);let g=this._getClosestLayerByPriority(u,a);return L.Util.isArray(g)?g:[g]},_calcLayerDistances(i,r){let a=this._map,u=r instanceof L.Marker||r instanceof L.CircleMarker,d=r instanceof L.Polygon,g=i;if(u){let _=r.getLatLng();return{latlng:{..._},distance:this._getDistance(a,_,g)}}return this._calcLatLngDistances(g,r.getLatLngs(),a,d)},_calcLatLngDistances(i,r,a,u=!1){let d,g,_,b=w=>{w.forEach((P,U)=>{if(Array.isArray(P)){b(P);return}if(this.options.snapSegment){let I=P,nt;u?nt=U+1===w.length?0:U+1:nt=U+1===w.length?void 0:U+1;let st=w[nt];if(st){let Lt=this._getDistanceToSegment(a,i,I,st);(g===void 0||Lt<g)&&(g=Lt,_=[I,st])}}else{let I=this._getDistance(a,i,P);(g===void 0||I<g)&&(g=I,d=P)}})};return b(r),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(a,i,_[0],_[1])},segment:_,distance:g}:{latlng:d,distance:g}},_getClosestLayerByPriority(i,r=1){i=i.sort((_,b)=>_._leaflet_id-b._leaflet_id);let a=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],u=this._map.pm.globalOptions.snappingOrder||[],d=0,g={};return u.concat(a).forEach(_=>{g[_]||(d+=1,g[_]=d)}),i.sort(eu("instanceofShape",g)),r===1?i[0]||{}:i.slice(0,r)},_checkPrioritiySnapping(i){let r=this._map,a=i.segment[0],u=i.segment[1],d=i.latlng,g=d;if(this.options.snapVertex){let _=this._getDistance(r,a,d),b=this._getDistance(r,u,d),w=_<b?a:u,P=_<b?_:b;if(this.options.snapMiddle){let I=L.PM.Utils.calcMiddleLatLng(r,a,u),nt=this._getDistance(r,I,d);nt<_&&nt<b&&(w=I,P=nt)}let U=this.options.snapDistance;P<U&&(g=w)}return{...g}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(i,r,a,u){let d=i.getMaxZoom();d===1/0&&(d=i.getZoom());let g=i.project(r,d),_=i.project(a,d),b=i.project(u,d),w=L.LineUtil.closestPointOnSegment(g,_,b);return i.unproject(w,d)},_getDistanceToSegment(i,r,a,u){let d=i.latLngToContainerPoint(r),g=i.latLngToContainerPoint(a),_=i.latLngToContainerPoint(u);return L.LineUtil.pointToSegmentDistance(d,g,_)},_getDistance(i,r,a){return i.latLngToContainerPoint(r).distanceTo(i.latLngToContainerPoint(a))}},eo=ba,ru=L.Class.extend({includes:[eo,Qr],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(i){L.Util.setOptions(this,i),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(i){let r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=i,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(a=>{this[a]=new L.PM.Draw[a](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(i,r=!1){r?this.options.pathOptions=(0,nu.default)(this.options.pathOptions,i):this.options.pathOptions=i},getShapes(){return this.shapes},getShape(){return this._shape},enable(i,r){if(!i)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[i].enable(r)},disable(){this.shapes.forEach(i=>{this[i].disable()})},addControls(){this.shapes.forEach(i=>{this[i].addButton()})},getActiveShape(){let i;return this.shapes.forEach(r=>{this[r]._enabled&&(i=r)}),i},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let i=[];this._map.eachLayer(r=>{(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&(r._pmTempLayer||i.push(r))}),this._enabled?i.forEach(r=>{L.PM.Utils.disablePopup(r)}):i.forEach(r=>{L.PM.Utils.enablePopup(r)})},createNewDrawInstance(i,r){let a=this._getShapeFromBtnName(r);if(this[i])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[a])throw new TypeError(`There is no class L.PM.Draw.${a}`);return this[i]=new L.PM.Draw[a](this._map),this[i].toolbarButtonName=i,this[i]._shape=i,this.shapes.push(i),this[r]&&this[i].setOptions(this[r].options),this[i].setOptions(this[i].options),this[i]},_getShapeFromBtnName(i){let r={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return r[i]?r[i]:this[i]?this[i]._shape:i},_finishLayer(i){i.pm&&(i.pm.setOptions(this.options),i.pm._shape=this._shape,i.pm._map=this._map),this._addDrawnLayerProp(i)},_addDrawnLayerProp(i){i._drawnByGeoman=!0},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),ni=ru;ni.Marker=ni.extend({initialize(i){this._map=i,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(oe("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},isRelevantMarker(i){return i instanceof L.Marker&&i.pm&&!i._pmTempLayer&&!i.pm._initTextMarker},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(i){if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new L.Marker(r,this.options.markerStyle);this._setPane(a,"markerPane"),this._finishLayer(a),a.pm||(a.options.draggable=!1),a.addTo(this._map.pm._getContainingLayer()),a.pm&&this.options.markerEditable?a.pm.enable():a.dragging&&a.dragging.disable(),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var i,r;(i=this.options.markerStyle)!=null&&i.icon&&((r=this._hintMarker)==null||r.setIcon(this.options.markerStyle.icon))}});var ai=63710088e-1,xa={centimeters:ai*100,centimetres:ai*100,degrees:ai/111325,feet:ai*3.28084,inches:ai*39.37,kilometers:ai/1e3,kilometres:ai/1e3,meters:ai,metres:ai,miles:ai/1609.344,millimeters:ai*1e3,millimetres:ai*1e3,nauticalmiles:ai/1852,radians:1,yards:ai*1.0936};function Fn(i,r,a){a===void 0&&(a={});var u={type:"Feature"};return(a.id===0||a.id)&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.properties=r||{},u.geometry=i,u}function Nn(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!io(i[0])||!io(i[1]))throw new Error("coordinates must contain numbers");var u={type:"Point",coordinates:i};return Fn(u,r,a)}function yn(i,r,a){if(a===void 0&&(a={}),i.length<2)throw new Error("coordinates must be an array of two or more positions");var u={type:"LineString",coordinates:i};return Fn(u,r,a)}function mi(i,r){r===void 0&&(r={});var a={type:"FeatureCollection"};return r.id&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.features=i,a}function su(i,r){r===void 0&&(r="kilometers");var a=xa[r];if(!a)throw new Error(r+" units is invalid");return i*a}function Mr(i,r){r===void 0&&(r="kilometers");var a=xa[r];if(!a)throw new Error(r+" units is invalid");return i/a}function gi(i){var r=i%(2*Math.PI);return r*180/Math.PI}function Ri(i){var r=i%360;return r*Math.PI/180}function io(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function ns(i){var r,a,u={type:"FeatureCollection",features:[]};if(i.type==="Feature"?a=i.geometry:a=i,a.type==="LineString")r=[a.coordinates];else if(a.type==="MultiLineString")r=a.coordinates;else if(a.type==="MultiPolygon")r=[].concat.apply([],a.coordinates);else if(a.type==="Polygon")r=a.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return r.forEach(function(d){r.forEach(function(g){for(var _=0;_<d.length-1;_++)for(var b=_;b<g.length-1;b++)if(!(d===g&&(Math.abs(_-b)===1||_===0&&b===d.length-2&&d[_][0]===d[d.length-1][0]&&d[_][1]===d[d.length-1][1]))){var w=no(d[_][0],d[_][1],d[_+1][0],d[_+1][1],g[b][0],g[b][1],g[b+1][0],g[b+1][1]);w&&u.features.push(Nn([w[0],w[1]]))}})}),u}function no(i,r,a,u,d,g,_,b){var w,P,U,I,nt,st={x:null,y:null,onLine1:!1,onLine2:!1};return w=(b-g)*(a-i)-(_-d)*(u-r),w===0?st.x!==null&&st.y!==null?st:!1:(P=r-g,U=i-d,I=(_-d)*P-(b-g)*U,nt=(a-i)*P-(u-r)*U,P=I/w,U=nt/w,st.x=i+P*(a-i),st.y=r+P*(u-r),P>=0&&P<=1&&(st.onLine1=!0),U>=0&&U<=1&&(st.onLine2=!0),st.onLine1&&st.onLine2?[st.x,st.y]:!1)}ni.Line=ni.extend({initialize(i){this._map=i,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(oe("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintLine(){let i=this._layer.getLatLngs();if(i.length>0){let r=i[i.length-1];this._hintline.setLatLngs([r,this._hintMarker.getLatLng()])}},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection(){return ns(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(i,r){let a=L.polyline(this._layer.getLatLngs());i&&(r||(r=this._hintMarker.getLatLng()),a.addLatLng(r));let u=ns(a.toGeoJSON(15));this._doesSelfIntersect=u.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(u,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(i){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,i.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._layer.getLatLngs(),u=a[a.length-1];if(r.equals(a[0])||a.length>0&&r.equals(u)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:r,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(r);let d=this._createMarker(r);this._setTooltipText(),this._setHintLineAfterNewVertex(r),this._fireVertexAdded(d,void 0,r,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(i)},_setHintLineAfterNewVertex(i){this._hintline.setLatLngs([i,i])},_removeLastVertex(){let i=this._markers;if(i.length<=1){this.disable();return}let r=this._layer.getLatLngs(),a=i[i.length-1],{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(i,a);i.pop(),this._layerGroup.removeLayer(a);let d=i[i.length-1],g=r.indexOf(d.getLatLng());r=r.slice(0,g+1),this._layer.setLatLngs(r),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(a,u,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=1)return;let r=L.polyline(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.options.snappable&&this._cleanupSnapping();let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),r.on("click",this._finishShape,this),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=1?r=oe("tooltips.continueLine"):r=oe("tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change(i){this._fireChange(i,"Draw")},setStyle(){var i,r;(i=this._layer)==null||i.setStyle(this.options.templineStyle),(r=this._hintline)==null||r.setStyle(this.options.hintlineStyle)}}),ni.Polygon=ni.Line.extend({initialize(i){this._map=i,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(i){L.PM.Draw.Line.prototype.enable.call(this,i),this._layer.pm._shape="Polygon"},_createMarker(i){let r=new L.Marker(i,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),this._layer.getLatLngs().flat().length===1?(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()):r.on("click",()=>1),r},_setTooltipText(){let{length:i}=this._layer.getLatLngs().flat(),r="";i<=2?r=oe("tooltips.continueLine"):r=oe("tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))}}),ni.Rectangle=ni.extend({initialize(i){this._map=i,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(i){if(L.Util.setOptions(this,i),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(oe("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let r=0;r<2;r+=1){let a=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._styleMarkers.push(a)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeStartingMarkers(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(r),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(a=>{L.DomUtil.addClass(a._icon,"visible"),a.setLatLng(r)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(oe("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let i=this._startMarker.getLatLng();i&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([i,i]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}let r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize(){let i=ga(this._startMarker.getLatLng(),this._map),r=ga(this._hintMarker.getLatLng(),this._map),a=L.PM.Utils._getRotatedRectangle(i,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(a),this.options.cursorMarker&&this._styleMarkers){let u=[];a.forEach(d=>{!d.equals(i,1e-8)&&!d.equals(r,1e-8)&&u.push(d)}),u.forEach((d,g)=>{try{this._styleMarkers[g].setLatLng(d)}catch{}})}},_findCorners(){let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.options.rectangleAngle||0,this._map)},_finishShape(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||a.equals(r))return;let u=L.rectangle([a,r],this.options.pathOptions);if(this.options.rectangleAngle){let g=L.PM.Utils._getRotatedRectangle(a,r,this.options.rectangleAngle||0,this._map);u.setLatLngs(g),u.pm&&u.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u);let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))},setStyle(){var i;(i=this._layer)==null||i.setStyle(this.options.pathOptions)}}),ni.CircleMarker=ni.extend({initialize(i){this._map=i,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(i){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let r={};L.extend(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(oe("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(oe("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(i=>{this.isRelevantMarker(i)&&i.pm.disable()})},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_placeCenterMarker(i){this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let r=this._hintMarker.getLatLng();this._centerMarker.setLatLng(r),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let i=this._centerMarker.getLatLng();i&&(this._layer.setLatLng(i),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(oe("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([i,r])},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let a=i;a.target=this._hintMarker,this._handleSnapping(a)}this._handleHintMarkerSnapping();let r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker(i){return i instanceof L.CircleMarker&&!(i instanceof L.Circle)&&i.pm&&!i._pmTempLayer},_createMarker(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!i.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng(),a=new this._BaseCircleClass(r,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(a),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(i){i.pm&&this.options.markerEditable&&i.pm.enable()},_finishShape(i){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._centerMarker.getLatLng(),a=this._defaultRadius;if(this.options[this._editableOption]){let _=this._hintMarker.getLatLng();a=this._distanceCalculation(r,_),this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?a=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(a=this.options[this._maxRadiusOption])}let u={...this.options.pathOptions,radius:a},d=new this._BaseCircleClass(r,u);this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),d.pm&&d.pm._updateHiddenPolyCircle(),this._fireCreate(d);let g=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(g))},_getNewDestinationOfHintMarker(){let i=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return i;let r=this._centerMarker.getLatLng(),a=this._distanceCalculation(r,i);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?i=is(this._map,r,i,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(i=is(this._map,r,i,this._getMaxDistanceInMeter()))}return i},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(i,r);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var r,a;let i={};L.extend(i,this.options.templineStyle),this.options[this._editableOption]&&(i.radius=0),(r=this._layer)==null||r.setStyle(i),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))}}),ni.Circle=ni.CircleMarker.extend({initialize(i){this._map=i,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(i,r){return this._map.distance(i,r)}});function Oi(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return i.geometry.coordinates;if(i.type==="Point")return i.coordinates}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return i;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ki(i){if(Array.isArray(i))return i;if(i.type==="Feature"){if(i.geometry!==null)return i.geometry.coordinates}else if(i.coordinates)return i.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function rs(i){return i.type==="Feature"?i.geometry:i}function ro(i,r){return i.type==="FeatureCollection"?"FeatureCollection":i.type==="GeometryCollection"?"GeometryCollection":i.type==="Feature"&&i.geometry!==null?i.geometry.type:i.type}function so(i,r,a){if(i!==null)for(var u,d,g,_,b,w,P,U=0,I=0,nt,st=i.type,Lt=st==="FeatureCollection",It=st==="Feature",Gt=Lt?i.features.length:1,be=0;be<Gt;be++){P=Lt?i.features[be].geometry:It?i.geometry:i,nt=P?P.type==="GeometryCollection":!1,b=nt?P.geometries.length:1;for(var N=0;N<b;N++){var V=0,J=0;if(_=nt?P.geometries[N]:P,_!==null){w=_.coordinates;var at=_.type;switch(U=0,at){case null:break;case"Point":if(r(w,I,be,V,J)===!1)return!1;I++,V++;break;case"LineString":case"MultiPoint":for(u=0;u<w.length;u++){if(r(w[u],I,be,V,J)===!1)return!1;I++,at==="MultiPoint"&&V++}at==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(u=0;u<w.length;u++){for(d=0;d<w[u].length-U;d++){if(r(w[u][d],I,be,V,J)===!1)return!1;I++}at==="MultiLineString"&&V++,at==="Polygon"&&J++}at==="Polygon"&&V++;break;case"MultiPolygon":for(u=0;u<w.length;u++){for(J=0,d=0;d<w[u].length;d++){for(g=0;g<w[u][d].length-U;g++){if(r(w[u][d][g],I,be,V,J)===!1)return!1;I++}J++}V++}break;case"GeometryCollection":for(u=0;u<_.geometries.length;u++)if(so(_.geometries[u],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ci(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var a=0;a<i.features.length&&r(i.features[a],a)!==!1;a++);}function tr(i,r,a){var u=a;return ci(i,function(d,g){g===0&&a===void 0?u=d:u=r(u,d,g)}),u}function ou(i,r){var a,u,d,g,_,b,w,P,U,I,nt=0,st=i.type==="FeatureCollection",Lt=i.type==="Feature",It=st?i.features.length:1;for(a=0;a<It;a++){for(b=st?i.features[a].geometry:Lt?i.geometry:i,P=st?i.features[a].properties:Lt?i.properties:{},U=st?i.features[a].bbox:Lt?i.bbox:void 0,I=st?i.features[a].id:Lt?i.id:void 0,w=b?b.type==="GeometryCollection":!1,_=w?b.geometries.length:1,d=0;d<_;d++){if(g=w?b.geometries[d]:b,g===null){if(r(null,nt,P,U,I)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(g,nt,P,U,I)===!1)return!1;break}case"GeometryCollection":{for(u=0;u<g.geometries.length;u++)if(r(g.geometries[u],nt,P,U,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}nt++}}function ji(i,r){ou(i,function(a,u,d,g,_){var b=a===null?null:a.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(Fn(a,d,{bbox:g,id:_}),u,0)===!1?!1:void 0}var w;switch(b){case"MultiPoint":w="Point";break;case"MultiLineString":w="LineString";break;case"MultiPolygon":w="Polygon";break}for(var P=0;P<a.coordinates.length;P++){var U=a.coordinates[P],I={type:w,coordinates:U};if(r(Fn(I,d),u,P)===!1)return!1}})}function au(i){if(!i)throw new Error("geojson is required");var r=[];return ji(i,function(a){er(a,r)}),mi(r)}function er(i,r){var a=[],u=i.geometry;if(u!==null){switch(u.type){case"Polygon":a=Ki(u);break;case"LineString":a=[Ki(u)]}a.forEach(function(d){var g=lu(d,i.properties);g.forEach(function(_){_.id=r.length,r.push(_)})})}}function lu(i,r){var a=[];return i.reduce(function(u,d){var g=yn([u,d],r);return g.bbox=Pr(u,d),a.push(g),d}),a}function Pr(i,r){var a=i[0],u=i[1],d=r[0],g=r[1],_=a<d?a:d,b=u<g?u:g,w=a>d?a:d,P=u>g?u:g;return[_,b,w,P]}var ss=au,os=v(An(),1);function uu(i,r){var a={},u=[];if(i.type==="LineString"&&(i=Fn(i)),r.type==="LineString"&&(r=Fn(r)),i.type==="Feature"&&r.type==="Feature"&&i.geometry!==null&&r.geometry!==null&&i.geometry.type==="LineString"&&r.geometry.type==="LineString"&&i.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var d=rn(i,r);return d&&u.push(d),mi(u)}var g=(0,os.default)();return g.load(ss(r)),ci(ss(i),function(_){ci(g.search(_),function(b){var w=rn(_,b);if(w){var P=Ki(w).join(",");a[P]||(a[P]=!0,u.push(w))}})}),mi(u)}function rn(i,r){var a=Ki(i),u=Ki(r);if(a.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(u.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var d=a[0][0],g=a[0][1],_=a[1][0],b=a[1][1],w=u[0][0],P=u[0][1],U=u[1][0],I=u[1][1],nt=(I-P)*(_-d)-(U-w)*(b-g),st=(U-w)*(g-P)-(I-P)*(d-w),Lt=(_-d)*(g-P)-(b-g)*(d-w);if(nt===0)return null;var It=st/nt,Gt=Lt/nt;if(It>=0&&It<=1&&Gt>=0&&Gt<=1){var be=d+It*(_-d),N=g+It*(b-g);return Nn([be,N])}return null}var Wi=uu,wa=v(An(),1);function oo(i,r,a){a===void 0&&(a={});var u=Oi(i),d=Oi(r),g=Ri(d[1]-u[1]),_=Ri(d[0]-u[0]),b=Ri(u[1]),w=Ri(d[1]),P=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(b)*Math.cos(w);return su(2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P)),a.units)}var zn=oo;function sn(i){var r=i[0],a=i[1],u=i[2],d=i[3],g=zn(i.slice(0,2),[u,a]),_=zn(i.slice(0,2),[r,d]);if(g>=_){var b=(a+d)/2;return[r,b-(u-r)/2,u,b+(u-r)/2]}else{var w=(r+u)/2;return[w-(d-a)/2,a,w+(d-a)/2,d]}}var hu=sn;function vn(i){var r=[1/0,1/0,-1/0,-1/0];return so(i,function(a){r[0]>a[0]&&(r[0]=a[0]),r[1]>a[1]&&(r[1]=a[1]),r[2]<a[0]&&(r[2]=a[0]),r[3]<a[1]&&(r[3]=a[1])}),r}vn.default=vn;var Br=vn;function on(i,r){r===void 0&&(r={});var a=r.precision,u=r.coordinates,d=r.mutate;if(a=a==null||isNaN(a)?6:a,u=u==null||isNaN(u)?3:u,!i)throw new Error("<geojson> is required");if(typeof a!="number")throw new Error("<precision> must be a number");if(typeof u!="number")throw new Error("<coordinates> must be a number");(d===!1||d===void 0)&&(i=JSON.parse(JSON.stringify(i)));var g=Math.pow(10,a);return so(i,function(_){as(_,g,u)}),i}function as(i,r,a){i.length>a&&i.splice(a,i.length);for(var u=0;u<i.length;u++)i[u]=Math.round(i[u]*r)/r;return i}var La=on;function ls(i,r,a){if(a===void 0&&(a={}),a.final===!0)return us(i,r);var u=Oi(i),d=Oi(r),g=Ri(u[0]),_=Ri(d[0]),b=Ri(u[1]),w=Ri(d[1]),P=Math.sin(_-g)*Math.cos(w),U=Math.cos(b)*Math.sin(w)-Math.sin(b)*Math.cos(w)*Math.cos(_-g);return gi(Math.atan2(P,U))}function us(i,r){var a=ls(r,i);return a=(a+180)%360,a}function hs(i,r,a,u){u===void 0&&(u={});var d=Oi(i),g=Ri(d[0]),_=Ri(d[1]),b=Ri(a),w=Mr(r,u.units),P=Math.asin(Math.sin(_)*Math.cos(w)+Math.cos(_)*Math.sin(w)*Math.cos(b)),U=g+Math.atan2(Math.sin(b)*Math.sin(w)*Math.cos(_),Math.cos(w)-Math.sin(_)*Math.sin(P)),I=gi(U),nt=gi(P);return Nn([I,nt],u.properties)}function cs(i,r,a){a===void 0&&(a={});var u=Nn([1/0,1/0],{dist:1/0}),d=0;return ji(i,function(g){for(var _=Ki(g),b=0;b<_.length-1;b++){var w=Nn(_[b]);w.properties.dist=zn(r,w,a);var P=Nn(_[b+1]);P.properties.dist=zn(r,P,a);var U=zn(w,P,a),I=Math.max(w.properties.dist,P.properties.dist),nt=ls(w,P),st=hs(r,I,nt+90,a),Lt=hs(r,I,nt-90,a),It=Wi(yn([st.geometry.coordinates,Lt.geometry.coordinates]),yn([w.geometry.coordinates,P.geometry.coordinates])),Gt=null;It.features.length>0&&(Gt=It.features[0],Gt.properties.dist=zn(r,Gt,a),Gt.properties.location=d+zn(w,Gt,a)),w.properties.dist<u.properties.dist&&(u=w,u.properties.index=b,u.properties.location=d),P.properties.dist<u.properties.dist&&(u=P,u.properties.index=b+1,u.properties.location=d+U),Gt&&Gt.properties.dist<u.properties.dist&&(u=Gt,u.properties.index=b),d+=U}}),u}var ir=cs;function ds(i,r){if(!i)throw new Error("line is required");if(!r)throw new Error("splitter is required");var a=ro(i),u=ro(r);if(a!=="LineString")throw new Error("line must be LineString");if(u==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(u==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var d=La(r,{precision:7});switch(u){case"Point":return ps(i,d);case"MultiPoint":return fs(i,d);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return fs(i,Wi(i,d))}}function fs(i,r){var a=[],u=(0,wa.default)();return ji(r,function(d){if(a.forEach(function(b,w){b.id=w}),!a.length)a=ps(i,d).features,a.forEach(function(b){b.bbox||(b.bbox=hu(Br(b)))}),u.load(mi(a));else{var g=u.search(d);if(g.features.length){var _=Ca(d,g);a=a.filter(function(b){return b.id!==_.id}),u.remove(_),ci(ps(_,d),function(b){a.push(b),u.insert(b)})}}}),mi(a)}function ps(i,r){var a=[],u=Ki(i)[0],d=Ki(i)[i.geometry.coordinates.length-1];if(nr(u,Oi(r))||nr(d,Oi(r)))return mi([i]);var g=(0,wa.default)(),_=ss(i);g.load(_);var b=g.search(r);if(!b.features.length)return mi([i]);var w=Ca(r,b),P=[u],U=tr(_,function(I,nt,st){var Lt=Ki(nt)[1],It=Oi(r);return st===w.id?(I.push(It),a.push(yn(I)),nr(It,Lt)?[It]:[It,Lt]):(I.push(Lt),I)},P);return U.length>1&&a.push(yn(U)),mi(a)}function Ca(i,r){if(!r.features.length)throw new Error("lines must contain features");if(r.features.length===1)return r.features[0];var a,u=1/0;return ci(r,function(d){var g=ir(d,i),_=g.properties.dist;_<u&&(a=d,u=_)}),a}function nr(i,r){return i[0]===r[0]&&i[1]===r[1]}var cu=ds;function Sr(i,r,a){if(a===void 0&&(a={}),!i)throw new Error("point is required");if(!r)throw new Error("polygon is required");var u=Oi(i),d=rs(r),g=d.type,_=r.bbox,b=d.coordinates;if(_&&Ea(u,_)===!1)return!1;g==="Polygon"&&(b=[b]);for(var w=!1,P=0;P<b.length&&!w;P++)if(ka(u,b[P][0],a.ignoreBoundary)){for(var U=!1,I=1;I<b[P].length&&!U;)ka(u,b[P][I],!a.ignoreBoundary)&&(U=!0),I++;U||(w=!0)}return w}function ka(i,r,a){var u=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var d=0,g=r.length-1;d<r.length;g=d++){var _=r[d][0],b=r[d][1],w=r[g][0],P=r[g][1],U=i[1]*(_-w)+b*(w-i[0])+P*(i[0]-_)===0&&(_-i[0])*(w-i[0])<=0&&(b-i[1])*(P-i[1])<=0;if(U)return!a;var I=b>i[1]!=P>i[1]&&i[0]<(w-_)*(i[1]-b)/(P-b)+_;I&&(u=!u)}return u}function Ea(i,r){return r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[0]&&r[3]>=i[1]}function du(i,r,a){a===void 0&&(a={});for(var u=Oi(i),d=Ki(r),g=0;g<d.length-1;g++){var _=!1;if(a.ignoreEndVertices&&(g===0&&(_="start"),g===d.length-2&&(_="end"),g===0&&g+1===d.length-1&&(_="both")),Ji(d[g],d[g+1],u,_,typeof a.epsilon>"u"?null:a.epsilon))return!0}return!1}function Ji(i,r,a,u,d){var g=a[0],_=a[1],b=i[0],w=i[1],P=r[0],U=r[1],I=a[0]-b,nt=a[1]-w,st=P-b,Lt=U-w,It=I*Lt-nt*st;if(d!==null){if(Math.abs(It)>d)return!1}else if(It!==0)return!1;if(u){if(u==="start")return Math.abs(st)>=Math.abs(Lt)?st>0?b<g&&g<=P:P<=g&&g<b:Lt>0?w<_&&_<=U:U<=_&&_<w;if(u==="end")return Math.abs(st)>=Math.abs(Lt)?st>0?b<=g&&g<P:P<g&&g<=b:Lt>0?w<=_&&_<U:U<_&&_<=w;if(u==="both")return Math.abs(st)>=Math.abs(Lt)?st>0?b<g&&g<P:P<g&&g<b:Lt>0?w<_&&_<U:U<_&&_<w}else return Math.abs(st)>=Math.abs(Lt)?st>0?b<=g&&g<=P:P<=g&&g<=b:Lt>0?w<=_&&_<=U:U<=_&&_<=w;return!1}var bn=du;function fu(i,r){var a=rs(i),u=rs(r),d=a.type,g=u.type,_=a.coordinates,b=u.coordinates;switch(d){case"Point":switch(g){case"Point":return gs(_,b);default:throw new Error("feature2 "+g+" geometry not supported")}case"MultiPoint":switch(g){case"Point":return ms(a,u);case"MultiPoint":return pu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return bn(u,a,{ignoreEndVertices:!0});case"LineString":return Ar(a,u);case"MultiPoint":return Ma(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return Sr(u,a,{ignoreBoundary:!0});case"LineString":return gu(a,u);case"Polygon":return rr(a,u);case"MultiPoint":return mu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+d+" geometry not supported")}}function ms(i,r){var a,u=!1;for(a=0;a<i.coordinates.length;a++)if(gs(i.coordinates[a],r.coordinates)){u=!0;break}return u}function pu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){for(var d=u[a],g=!1,_=0,b=i.coordinates;_<b.length;_++){var w=b[_];if(gs(d,w)){g=!0;break}}if(!g)return!1}return!0}function Ma(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(bn(g,i,{ignoreEndVertices:!0})&&(a=!0),!bn(g,i))return!1}return!!a}function mu(i,r){for(var a=0,u=r.coordinates;a<u.length;a++){var d=u[a];if(!Sr(d,i,{ignoreBoundary:!0}))return!1}return!0}function Ar(i,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(bn({type:"Point",coordinates:g},i,{ignoreEndVertices:!0})&&(a=!0),!bn({type:"Point",coordinates:g},i,{ignoreEndVertices:!1}))return!1}return a}function gu(i,r){var a=!1,u=0,d=Br(i),g=Br(r);if(!ao(d,g))return!1;for(u;u<r.coordinates.length-1;u++){var _=_u(r.coordinates[u],r.coordinates[u+1]);if(Sr({type:"Point",coordinates:_},i,{ignoreBoundary:!0})){a=!0;break}}return a}function rr(i,r){if(i.type==="Feature"&&i.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var a=Br(i),u=Br(r);if(!ao(a,u))return!1;for(var d=rs(r).coordinates,g=0,_=d;g<_.length;g++)for(var b=_[g],w=0,P=b;w<P.length;w++){var U=P[w];if(!Sr(U,i))return!1}return!0}function ao(i,r){return!(i[0]>r[0]||i[2]<r[2]||i[1]>r[1]||i[3]<r[3])}function gs(i,r){return i[0]===r[0]&&i[1]===r[1]}function _u(i,r){return[(i[0]+r[0])/2,(i[1]+r[1])/2]}var an=v(mn()),lo=i=>()=>i,_s=i=>{let r=i?(a,u)=>u.minus(a).abs().isLessThanOrEqualTo(i):lo(!1);return(a,u)=>r(a,u)?0:a.comparedTo(u)};function Tr(i){let r=i?(a,u,d,g,_)=>a.exponentiatedBy(2).isLessThanOrEqualTo(g.minus(u).exponentiatedBy(2).plus(_.minus(d).exponentiatedBy(2)).times(i)):lo(!1);return(a,u,d)=>{let g=a.x,_=a.y,b=d.x,w=d.y,P=_.minus(w).times(u.x.minus(b)).minus(g.minus(b).times(u.y.minus(w)));return r(P,g,_,b,w)?0:P.comparedTo(0)}}var yu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,sr=Math.ceil,li=Math.floor,di="[BigNumber Error] ",uo=di+"Number primitive has more than 15 significant digits: ",Ui=1e14,re=14,ho=9007199254740991,ys=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ln=1e7,_i=1e9;function Pa(i){var r,a,u,d=N.prototype={constructor:N,toString:null,valueOf:null},g=new N(1),_=20,b=4,w=-7,P=21,U=-1e7,I=1e7,nt=!1,st=1,Lt=0,It={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Gt="0123456789abcdefghijklmnopqrstuvwxyz",be=!0;function N(C,S){var T,A,D,R,Z,H,W,it,et=this;if(!(et instanceof N))return new N(C,S);if(S==null){if(C&&C._isBigNumber===!0){et.s=C.s,!C.c||C.e>I?et.c=et.e=null:C.e<U?et.c=[et.e=0]:(et.e=C.e,et.c=C.c.slice());return}if((H=typeof C=="number")&&C*0==0){if(et.s=1/C<0?(C=-C,-1):1,C===~~C){for(R=0,Z=C;Z>=10;Z/=10,R++);R>I?et.c=et.e=null:(et.e=R,et.c=[C]);return}it=String(C)}else{if(!yu.test(it=String(C)))return u(et,it,H);et.s=it.charCodeAt(0)==45?(it=it.slice(1),-1):1}(R=it.indexOf("."))>-1&&(it=it.replace(".","")),(Z=it.search(/e/i))>0?(R<0&&(R=Z),R+=+it.slice(Z+1),it=it.substring(0,Z)):R<0&&(R=it.length)}else{if(e(S,2,Gt.length,"Base"),S==10&&be)return et=new N(C),Y(et,_+et.e+1,b);if(it=String(C),H=typeof C=="number"){if(C*0!=0)return u(et,it,H,S);if(et.s=1/C<0?(it=it.slice(1),-1):1,N.DEBUG&&it.replace(/^0\.0*|\./,"").length>15)throw Error(uo+C)}else et.s=it.charCodeAt(0)===45?(it=it.slice(1),-1):1;for(T=Gt.slice(0,S),R=Z=0,W=it.length;Z<W;Z++)if(T.indexOf(A=it.charAt(Z))<0){if(A=="."){if(Z>R){R=W;continue}}else if(!D&&(it==it.toUpperCase()&&(it=it.toLowerCase())||it==it.toLowerCase()&&(it=it.toUpperCase()))){D=!0,Z=-1,R=0;continue}return u(et,String(C),H,S)}H=!1,it=a(it,S,10,et.s),(R=it.indexOf("."))>-1?it=it.replace(".",""):R=it.length}for(Z=0;it.charCodeAt(Z)===48;Z++);for(W=it.length;it.charCodeAt(--W)===48;);if(it=it.slice(Z,++W)){if(W-=Z,H&&N.DEBUG&&W>15&&(C>ho||C!==li(C)))throw Error(uo+et.s*C);if((R=R-Z-1)>I)et.c=et.e=null;else if(R<U)et.c=[et.e=0];else{if(et.e=R,et.c=[],Z=(R+1)%re,R<0&&(Z+=re),Z<W){for(Z&&et.c.push(+it.slice(0,Z)),W-=re;Z<W;)et.c.push(+it.slice(Z,Z+=re));Z=re-(it=it.slice(Z)).length}else Z-=W;for(;Z--;it+="0");et.c.push(+it)}}else et.c=[et.e=0]}N.clone=Pa,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(C){var S,T;if(C!=null)if(typeof C=="object"){if(C.hasOwnProperty(S="DECIMAL_PLACES")&&(T=C[S],e(T,0,_i,S),_=T),C.hasOwnProperty(S="ROUNDING_MODE")&&(T=C[S],e(T,0,8,S),b=T),C.hasOwnProperty(S="EXPONENTIAL_AT")&&(T=C[S],T&&T.pop?(e(T[0],-1e9,0,S),e(T[1],0,_i,S),w=T[0],P=T[1]):(e(T,-1e9,_i,S),w=-(P=T<0?-T:T))),C.hasOwnProperty(S="RANGE"))if(T=C[S],T&&T.pop)e(T[0],-1e9,-1,S),e(T[1],1,_i,S),U=T[0],I=T[1];else if(e(T,-1e9,_i,S),T)U=-(I=T<0?-T:T);else throw Error(di+S+" cannot be zero: "+T);if(C.hasOwnProperty(S="CRYPTO"))if(T=C[S],T===!!T)if(T)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))nt=T;else throw nt=!T,Error(di+"crypto unavailable");else nt=T;else throw Error(di+S+" not true or false: "+T);if(C.hasOwnProperty(S="MODULO_MODE")&&(T=C[S],e(T,0,9,S),st=T),C.hasOwnProperty(S="POW_PRECISION")&&(T=C[S],e(T,0,_i,S),Lt=T),C.hasOwnProperty(S="FORMAT"))if(T=C[S],typeof T=="object")It=T;else throw Error(di+S+" not an object: "+T);if(C.hasOwnProperty(S="ALPHABET"))if(T=C[S],typeof T=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(T))be=T.slice(0,10)=="0123456789",Gt=T;else throw Error(di+S+" invalid: "+T)}else throw Error(di+"Object expected: "+C);return{DECIMAL_PLACES:_,ROUNDING_MODE:b,EXPONENTIAL_AT:[w,P],RANGE:[U,I],CRYPTO:nt,MODULO_MODE:st,POW_PRECISION:Lt,FORMAT:It,ALPHABET:Gt}},N.isBigNumber=function(C){if(!C||C._isBigNumber!==!0)return!1;if(!N.DEBUG)return!0;var S,T,A=C.c,D=C.e,R=C.s;t:if({}.toString.call(A)=="[object Array]"){if((R===1||R===-1)&&D>=-1e9&&D<=_i&&D===li(D)){if(A[0]===0){if(D===0&&A.length===1)return!0;break t}if(S=(D+1)%re,S<1&&(S+=re),String(A[0]).length==S){for(S=0;S<A.length;S++)if(T=A[S],T<0||T>=Ui||T!==li(T))break t;if(T!==0)return!0}}}else if(A===null&&D===null&&(R===null||R===1||R===-1))return!0;throw Error(di+"Invalid BigNumber: "+C)},N.maximum=N.max=function(){return J(arguments,-1)},N.minimum=N.min=function(){return J(arguments,1)},N.random=function(){var C=9007199254740992,S=Math.random()*C&2097151?function(){return li(Math.random()*C)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(T){var A,D,R,Z,H,W=0,it=[],et=new N(g);if(T==null?T=_:e(T,0,_i),Z=sr(T/re),nt)if(crypto.getRandomValues){for(A=crypto.getRandomValues(new Uint32Array(Z*=2));W<Z;)H=A[W]*131072+(A[W+1]>>>11),H>=9e15?(D=crypto.getRandomValues(new Uint32Array(2)),A[W]=D[0],A[W+1]=D[1]):(it.push(H%1e14),W+=2);W=Z/2}else if(crypto.randomBytes){for(A=crypto.randomBytes(Z*=7);W<Z;)H=(A[W]&31)*281474976710656+A[W+1]*1099511627776+A[W+2]*4294967296+A[W+3]*16777216+(A[W+4]<<16)+(A[W+5]<<8)+A[W+6],H>=9e15?crypto.randomBytes(7).copy(A,W):(it.push(H%1e14),W+=7);W=Z/7}else throw nt=!1,Error(di+"crypto unavailable");if(!nt)for(;W<Z;)H=S(),H<9e15&&(it[W++]=H%1e14);for(Z=it[--W],T%=re,Z&&T&&(H=ys[re-T],it[W]=li(Z/H)*H);it[W]===0;it.pop(),W--);if(W<0)it=[R=0];else{for(R=-1;it[0]===0;it.splice(0,1),R-=re);for(W=1,H=it[0];H>=10;H/=10,W++);W<re&&(R-=re-W)}return et.e=R,et.c=it,et}}(),N.sum=function(){for(var C=1,S=arguments,T=new N(S[0]);C<S.length;)T=T.plus(S[C++]);return T},a=function(){var C="0123456789";function S(T,A,D,R){for(var Z,H=[0],W,it=0,et=T.length;it<et;){for(W=H.length;W--;H[W]*=A);for(H[0]+=R.indexOf(T.charAt(it++)),Z=0;Z<H.length;Z++)H[Z]>D-1&&(H[Z+1]==null&&(H[Z+1]=0),H[Z+1]+=H[Z]/D|0,H[Z]%=D)}return H.reverse()}return function(T,A,D,R,Z){var H,W,it,et,vt,zt,Vt,Xt,Pe=T.indexOf("."),Oe=_,Ce=b;for(Pe>=0&&(et=Lt,Lt=0,T=T.replace(".",""),Xt=new N(A),zt=Xt.pow(T.length-Pe),Lt=et,Xt.c=S(m(Mi(zt.c),zt.e,"0"),10,D,C),Xt.e=Xt.c.length),Vt=S(T,A,D,Z?(H=Gt,C):(H=C,Gt)),it=et=Vt.length;Vt[--et]==0;Vt.pop());if(!Vt[0])return H.charAt(0);if(Pe<0?--it:(zt.c=Vt,zt.e=it,zt.s=R,zt=r(zt,Xt,Oe,Ce,D),Vt=zt.c,vt=zt.r,it=zt.e),W=it+Oe+1,Pe=Vt[W],et=D/2,vt=vt||W<0||Vt[W+1]!=null,vt=Ce<4?(Pe!=null||vt)&&(Ce==0||Ce==(zt.s<0?3:2)):Pe>et||Pe==et&&(Ce==4||vt||Ce==6&&Vt[W-1]&1||Ce==(zt.s<0?8:7)),W<1||!Vt[0])T=vt?m(H.charAt(1),-Oe,H.charAt(0)):H.charAt(0);else{if(Vt.length=W,vt)for(--D;++Vt[--W]>D;)Vt[W]=0,W||(++it,Vt=[1].concat(Vt));for(et=Vt.length;!Vt[--et];);for(Pe=0,T="";Pe<=et;T+=H.charAt(Vt[Pe++]));T=m(T,it,H.charAt(0))}return T}}(),r=function(){function C(A,D,R){var Z,H,W,it,et=0,vt=A.length,zt=D%ln,Vt=D/ln|0;for(A=A.slice();vt--;)W=A[vt]%ln,it=A[vt]/ln|0,Z=Vt*W+it*zt,H=zt*W+Z%ln*ln+et,et=(H/R|0)+(Z/ln|0)+Vt*it,A[vt]=H%R;return et&&(A=[et].concat(A)),A}function S(A,D,R,Z){var H,W;if(R!=Z)W=R>Z?1:-1;else for(H=W=0;H<R;H++)if(A[H]!=D[H]){W=A[H]>D[H]?1:-1;break}return W}function T(A,D,R,Z){for(var H=0;R--;)A[R]-=H,H=A[R]<D[R]?1:0,A[R]=H*Z+A[R]-D[R];for(;!A[0]&&A.length>1;A.splice(0,1));}return function(A,D,R,Z,H){var W,it,et,vt,zt,Vt,Xt,Pe,Oe,Ce,Ie,vi,Oa,Cu,ku,xn,mo,Qi=A.s==D.s?1:-1,Pi=A.c,Je=D.c;if(!Pi||!Pi[0]||!Je||!Je[0])return new N(!A.s||!D.s||(Pi?Je&&Pi[0]==Je[0]:!Je)?NaN:Pi&&Pi[0]==0||!Je?Qi*0:Qi/0);for(Pe=new N(Qi),Oe=Pe.c=[],it=A.e-D.e,Qi=R+it+1,H||(H=Ui,it=Ei(A.e/re)-Ei(D.e/re),Qi=Qi/re|0),et=0;Je[et]==(Pi[et]||0);et++);if(Je[et]>(Pi[et]||0)&&it--,Qi<0)Oe.push(1),vt=!0;else{for(Cu=Pi.length,xn=Je.length,et=0,Qi+=2,zt=li(H/(Je[0]+1)),zt>1&&(Je=C(Je,zt,H),Pi=C(Pi,zt,H),xn=Je.length,Cu=Pi.length),Oa=xn,Ce=Pi.slice(0,xn),Ie=Ce.length;Ie<xn;Ce[Ie++]=0);mo=Je.slice(),mo=[0].concat(mo),ku=Je[0],Je[1]>=H/2&&ku++;do{if(zt=0,W=S(Je,Ce,xn,Ie),W<0){if(vi=Ce[0],xn!=Ie&&(vi=vi*H+(Ce[1]||0)),zt=li(vi/ku),zt>1)for(zt>=H&&(zt=H-1),Vt=C(Je,zt,H),Xt=Vt.length,Ie=Ce.length;S(Vt,Ce,Xt,Ie)==1;)zt--,T(Vt,xn<Xt?mo:Je,Xt,H),Xt=Vt.length,W=1;else zt==0&&(W=zt=1),Vt=Je.slice(),Xt=Vt.length;if(Xt<Ie&&(Vt=[0].concat(Vt)),T(Ce,Vt,Ie,H),Ie=Ce.length,W==-1)for(;S(Je,Ce,xn,Ie)<1;)zt++,T(Ce,xn<Ie?mo:Je,Ie,H),Ie=Ce.length}else W===0&&(zt++,Ce=[0]);Oe[et++]=zt,Ce[0]?Ce[Ie++]=Pi[Oa]||0:(Ce=[Pi[Oa]],Ie=1)}while((Oa++<Cu||Ce[0]!=null)&&Qi--);vt=Ce[0]!=null,Oe[0]||Oe.splice(0,1)}if(H==Ui){for(et=1,Qi=Oe[0];Qi>=10;Qi/=10,et++);Y(Pe,R+(Pe.e=et+it*re-1)+1,Z,vt)}else Pe.e=it,Pe.r=+vt;return Pe}}();function V(C,S,T,A){var D,R,Z,H,W;if(T==null?T=b:e(T,0,8),!C.c)return C.toString();if(D=C.c[0],Z=C.e,S==null)W=Mi(C.c),W=A==1||A==2&&(Z<=w||Z>=P)?h(W,Z):m(W,Z,"0");else if(C=Y(new N(C),S,T),R=C.e,W=Mi(C.c),H=W.length,A==1||A==2&&(S<=R||R<=w)){for(;H<S;W+="0",H++);W=h(W,R)}else if(S-=Z,W=m(W,R,"0"),R+1>H){if(--S>0)for(W+=".";S--;W+="0");}else if(S+=R-H,S>0)for(R+1==H&&(W+=".");S--;W+="0");return C.s<0&&D?"-"+W:W}function J(C,S){for(var T,A,D=1,R=new N(C[0]);D<C.length;D++)A=new N(C[D]),(!A.s||(T=jn(R,A))===S||T===0&&R.s===S)&&(R=A);return R}function at(C,S,T){for(var A=1,D=S.length;!S[--D];S.pop());for(D=S[0];D>=10;D/=10,A++);return(T=A+T*re-1)>I?C.c=C.e=null:T<U?C.c=[C.e=0]:(C.e=T,C.c=S),C}u=function(){var C=/^(-?)0([xbo])(?=\w[\w.]*$)/i,S=/^([^.]+)\.$/,T=/^\.([^.]+)$/,A=/^-?(Infinity|NaN)$/,D=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(R,Z,H,W){var it,et=H?Z:Z.replace(D,"");if(A.test(et))R.s=isNaN(et)?null:et<0?-1:1;else{if(!H&&(et=et.replace(C,function(vt,zt,Vt){return it=(Vt=Vt.toLowerCase())=="x"?16:Vt=="b"?2:8,!W||W==it?zt:vt}),W&&(it=W,et=et.replace(S,"$1").replace(T,"0.$1")),Z!=et))return new N(et,it);if(N.DEBUG)throw Error(di+"Not a"+(W?" base "+W:"")+" number: "+Z);R.s=null}R.c=R.e=null}}();function Y(C,S,T,A){var D,R,Z,H,W,it,et,vt=C.c,zt=ys;if(vt){t:{for(D=1,H=vt[0];H>=10;H/=10,D++);if(R=S-D,R<0)R+=re,Z=S,W=vt[it=0],et=li(W/zt[D-Z-1]%10);else if(it=sr((R+1)/re),it>=vt.length)if(A){for(;vt.length<=it;vt.push(0));W=et=0,D=1,R%=re,Z=R-re+1}else break t;else{for(W=H=vt[it],D=1;H>=10;H/=10,D++);R%=re,Z=R-re+D,et=Z<0?0:li(W/zt[D-Z-1]%10)}if(A=A||S<0||vt[it+1]!=null||(Z<0?W:W%zt[D-Z-1]),A=T<4?(et||A)&&(T==0||T==(C.s<0?3:2)):et>5||et==5&&(T==4||A||T==6&&(R>0?Z>0?W/zt[D-Z]:0:vt[it-1])%10&1||T==(C.s<0?8:7)),S<1||!vt[0])return vt.length=0,A?(S-=C.e+1,vt[0]=zt[(re-S%re)%re],C.e=-S||0):vt[0]=C.e=0,C;if(R==0?(vt.length=it,H=1,it--):(vt.length=it+1,H=zt[re-R],vt[it]=Z>0?li(W/zt[D-Z]%zt[Z])*H:0),A)for(;;)if(it==0){for(R=1,Z=vt[0];Z>=10;Z/=10,R++);for(Z=vt[0]+=H,H=1;Z>=10;Z/=10,H++);R!=H&&(C.e++,vt[0]==Ui&&(vt[0]=1));break}else{if(vt[it]+=H,vt[it]!=Ui)break;vt[it--]=0,H=1}for(R=vt.length;vt[--R]===0;vt.pop());}C.e>I?C.c=C.e=null:C.e<U&&(C.c=[C.e=0])}return C}function rt(C){var S,T=C.e;return T===null?C.toString():(S=Mi(C.c),S=T<=w||T>=P?h(S,T):m(S,T,"0"),C.s<0?"-"+S:S)}return d.absoluteValue=d.abs=function(){var C=new N(this);return C.s<0&&(C.s=1),C},d.comparedTo=function(C,S){return jn(this,new N(C,S))},d.decimalPlaces=d.dp=function(C,S){var T,A,D,R=this;if(C!=null)return e(C,0,_i),S==null?S=b:e(S,0,8),Y(new N(R),C+R.e+1,S);if(!(T=R.c))return null;if(A=((D=T.length-1)-Ei(this.e/re))*re,D=T[D])for(;D%10==0;D/=10,A--);return A<0&&(A=0),A},d.dividedBy=d.div=function(C,S){return r(this,new N(C,S),_,b)},d.dividedToIntegerBy=d.idiv=function(C,S){return r(this,new N(C,S),0,1)},d.exponentiatedBy=d.pow=function(C,S){var T,A,D,R,Z,H,W,it,et,vt=this;if(C=new N(C),C.c&&!C.isInteger())throw Error(di+"Exponent not an integer: "+rt(C));if(S!=null&&(S=new N(S)),H=C.e>14,!vt.c||!vt.c[0]||vt.c[0]==1&&!vt.e&&vt.c.length==1||!C.c||!C.c[0])return et=new N(Math.pow(+rt(vt),H?C.s*(2-s(C)):+rt(C))),S?et.mod(S):et;if(W=C.s<0,S){if(S.c?!S.c[0]:!S.s)return new N(NaN);A=!W&&vt.isInteger()&&S.isInteger(),A&&(vt=vt.mod(S))}else{if(C.e>9&&(vt.e>0||vt.e<-1||(vt.e==0?vt.c[0]>1||H&&vt.c[1]>=24e7:vt.c[0]<8e13||H&&vt.c[0]<=9999975e7)))return R=vt.s<0&&s(C)?-0:0,vt.e>-1&&(R=1/R),new N(W?1/R:R);Lt&&(R=sr(Lt/re+2))}for(H?(T=new N(.5),W&&(C.s=1),it=s(C)):(D=Math.abs(+rt(C)),it=D%2),et=new N(g);;){if(it){if(et=et.times(vt),!et.c)break;R?et.c.length>R&&(et.c.length=R):A&&(et=et.mod(S))}if(D){if(D=li(D/2),D===0)break;it=D%2}else if(C=C.times(T),Y(C,C.e+1,1),C.e>14)it=s(C);else{if(D=+rt(C),D===0)break;it=D%2}vt=vt.times(vt),R?vt.c&&vt.c.length>R&&(vt.c.length=R):A&&(vt=vt.mod(S))}return A?et:(W&&(et=g.div(et)),S?et.mod(S):R?Y(et,Lt,b,Z):et)},d.integerValue=function(C){var S=new N(this);return C==null?C=b:e(C,0,8),Y(S,S.e+1,C)},d.isEqualTo=d.eq=function(C,S){return jn(this,new N(C,S))===0},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(C,S){return jn(this,new N(C,S))>0},d.isGreaterThanOrEqualTo=d.gte=function(C,S){return(S=jn(this,new N(C,S)))===1||S===0},d.isInteger=function(){return!!this.c&&Ei(this.e/re)>this.c.length-2},d.isLessThan=d.lt=function(C,S){return jn(this,new N(C,S))<0},d.isLessThanOrEqualTo=d.lte=function(C,S){return(S=jn(this,new N(C,S)))===-1||S===0},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&this.c[0]==0},d.minus=function(C,S){var T,A,D,R,Z=this,H=Z.s;if(C=new N(C,S),S=C.s,!H||!S)return new N(NaN);if(H!=S)return C.s=-S,Z.plus(C);var W=Z.e/re,it=C.e/re,et=Z.c,vt=C.c;if(!W||!it){if(!et||!vt)return et?(C.s=-S,C):new N(vt?Z:NaN);if(!et[0]||!vt[0])return vt[0]?(C.s=-S,C):new N(et[0]?Z:b==3?-0:0)}if(W=Ei(W),it=Ei(it),et=et.slice(),H=W-it){for((R=H<0)?(H=-H,D=et):(it=W,D=vt),D.reverse(),S=H;S--;D.push(0));D.reverse()}else for(A=(R=(H=et.length)<(S=vt.length))?H:S,H=S=0;S<A;S++)if(et[S]!=vt[S]){R=et[S]<vt[S];break}if(R&&(D=et,et=vt,vt=D,C.s=-C.s),S=(A=vt.length)-(T=et.length),S>0)for(;S--;et[T++]=0);for(S=Ui-1;A>H;){if(et[--A]<vt[A]){for(T=A;T&&!et[--T];et[T]=S);--et[T],et[A]+=Ui}et[A]-=vt[A]}for(;et[0]==0;et.splice(0,1),--it);return et[0]?at(C,et,it):(C.s=b==3?-1:1,C.c=[C.e=0],C)},d.modulo=d.mod=function(C,S){var T,A,D=this;return C=new N(C,S),!D.c||!C.s||C.c&&!C.c[0]?new N(NaN):!C.c||D.c&&!D.c[0]?new N(D):(st==9?(A=C.s,C.s=1,T=r(D,C,0,3),C.s=A,T.s*=A):T=r(D,C,0,st),C=D.minus(T.times(C)),!C.c[0]&&st==1&&(C.s=D.s),C)},d.multipliedBy=d.times=function(C,S){var T,A,D,R,Z,H,W,it,et,vt,zt,Vt,Xt,Pe,Oe,Ce=this,Ie=Ce.c,vi=(C=new N(C,S)).c;if(!Ie||!vi||!Ie[0]||!vi[0])return!Ce.s||!C.s||Ie&&!Ie[0]&&!vi||vi&&!vi[0]&&!Ie?C.c=C.e=C.s=null:(C.s*=Ce.s,!Ie||!vi?C.c=C.e=null:(C.c=[0],C.e=0)),C;for(A=Ei(Ce.e/re)+Ei(C.e/re),C.s*=Ce.s,W=Ie.length,vt=vi.length,W<vt&&(Xt=Ie,Ie=vi,vi=Xt,D=W,W=vt,vt=D),D=W+vt,Xt=[];D--;Xt.push(0));for(Pe=Ui,Oe=ln,D=vt;--D>=0;){for(T=0,zt=vi[D]%Oe,Vt=vi[D]/Oe|0,Z=W,R=D+Z;R>D;)it=Ie[--Z]%Oe,et=Ie[Z]/Oe|0,H=Vt*it+et*zt,it=zt*it+H%Oe*Oe+Xt[R]+T,T=(it/Pe|0)+(H/Oe|0)+Vt*et,Xt[R--]=it%Pe;Xt[R]=T}return T?++A:Xt.splice(0,1),at(C,Xt,A)},d.negated=function(){var C=new N(this);return C.s=-C.s||null,C},d.plus=function(C,S){var T,A=this,D=A.s;if(C=new N(C,S),S=C.s,!D||!S)return new N(NaN);if(D!=S)return C.s=-S,A.minus(C);var R=A.e/re,Z=C.e/re,H=A.c,W=C.c;if(!R||!Z){if(!H||!W)return new N(D/0);if(!H[0]||!W[0])return W[0]?C:new N(H[0]?A:D*0)}if(R=Ei(R),Z=Ei(Z),H=H.slice(),D=R-Z){for(D>0?(Z=R,T=W):(D=-D,T=H),T.reverse();D--;T.push(0));T.reverse()}for(D=H.length,S=W.length,D-S<0&&(T=W,W=H,H=T,S=D),D=0;S;)D=(H[--S]=H[S]+W[S]+D)/Ui|0,H[S]=Ui===H[S]?0:H[S]%Ui;return D&&(H=[D].concat(H),++Z),at(C,H,Z)},d.precision=d.sd=function(C,S){var T,A,D,R=this;if(C!=null&&C!==!!C)return e(C,1,_i),S==null?S=b:e(S,0,8),Y(new N(R),C,S);if(!(T=R.c))return null;if(D=T.length-1,A=D*re+1,D=T[D]){for(;D%10==0;D/=10,A--);for(D=T[0];D>=10;D/=10,A++);}return C&&R.e+1>A&&(A=R.e+1),A},d.shiftedBy=function(C){return e(C,-9007199254740991,ho),this.times("1e"+C)},d.squareRoot=d.sqrt=function(){var C,S,T,A,D,R=this,Z=R.c,H=R.s,W=R.e,it=_+4,et=new N("0.5");if(H!==1||!Z||!Z[0])return new N(!H||H<0&&(!Z||Z[0])?NaN:Z?R:1/0);if(H=Math.sqrt(+rt(R)),H==0||H==1/0?(S=Mi(Z),(S.length+W)%2==0&&(S+="0"),H=Math.sqrt(+S),W=Ei((W+1)/2)-(W<0||W%2),H==1/0?S="5e"+W:(S=H.toExponential(),S=S.slice(0,S.indexOf("e")+1)+W),T=new N(S)):T=new N(H+""),T.c[0]){for(W=T.e,H=W+it,H<3&&(H=0);;)if(D=T,T=et.times(D.plus(r(R,D,it,1))),Mi(D.c).slice(0,H)===(S=Mi(T.c)).slice(0,H))if(T.e<W&&--H,S=S.slice(H-3,H+1),S=="9999"||!A&&S=="4999"){if(!A&&(Y(D,D.e+_+2,0),D.times(D).eq(R))){T=D;break}it+=4,H+=4,A=1}else{(!+S||!+S.slice(1)&&S.charAt(0)=="5")&&(Y(T,T.e+_+2,1),C=!T.times(T).eq(R));break}}return Y(T,T.e+_+1,b,C)},d.toExponential=function(C,S){return C!=null&&(e(C,0,_i),C++),V(this,C,S,1)},d.toFixed=function(C,S){return C!=null&&(e(C,0,_i),C=C+this.e+1),V(this,C,S)},d.toFormat=function(C,S,T){var A,D=this;if(T==null)C!=null&&S&&typeof S=="object"?(T=S,S=null):C&&typeof C=="object"?(T=C,C=S=null):T=It;else if(typeof T!="object")throw Error(di+"Argument not an object: "+T);if(A=D.toFixed(C,S),D.c){var R,Z=A.split("."),H=+T.groupSize,W=+T.secondaryGroupSize,it=T.groupSeparator||"",et=Z[0],vt=Z[1],zt=D.s<0,Vt=zt?et.slice(1):et,Xt=Vt.length;if(W&&(R=H,H=W,W=R,Xt-=R),H>0&&Xt>0){for(R=Xt%H||H,et=Vt.substr(0,R);R<Xt;R+=H)et+=it+Vt.substr(R,H);W>0&&(et+=it+Vt.slice(R)),zt&&(et="-"+et)}A=vt?et+(T.decimalSeparator||"")+((W=+T.fractionGroupSize)?vt.replace(new RegExp("\\d{"+W+"}\\B","g"),"$&"+(T.fractionGroupSeparator||"")):vt):et}return(T.prefix||"")+A+(T.suffix||"")},d.toFraction=function(C){var S,T,A,D,R,Z,H,W,it,et,vt,zt,Vt=this,Xt=Vt.c;if(C!=null&&(H=new N(C),!H.isInteger()&&(H.c||H.s!==1)||H.lt(g)))throw Error(di+"Argument "+(H.isInteger()?"out of range: ":"not an integer: ")+rt(H));if(!Xt)return new N(Vt);for(S=new N(g),it=T=new N(g),A=W=new N(g),zt=Mi(Xt),R=S.e=zt.length-Vt.e-1,S.c[0]=ys[(Z=R%re)<0?re+Z:Z],C=!C||H.comparedTo(S)>0?R>0?S:it:H,Z=I,I=1/0,H=new N(zt),W.c[0]=0;et=r(H,S,0,1),D=T.plus(et.times(A)),D.comparedTo(C)!=1;)T=A,A=D,it=W.plus(et.times(D=it)),W=D,S=H.minus(et.times(D=S)),H=D;return D=r(C.minus(T),A,0,1),W=W.plus(D.times(it)),T=T.plus(D.times(A)),W.s=it.s=Vt.s,R=R*2,vt=r(it,A,R,b).minus(Vt).abs().comparedTo(r(W,T,R,b).minus(Vt).abs())<1?[it,A]:[W,T],I=Z,vt},d.toNumber=function(){return+rt(this)},d.toPrecision=function(C,S){return C!=null&&e(C,1,_i),V(this,C,S,2)},d.toString=function(C){var S,T=this,A=T.s,D=T.e;return D===null?A?(S="Infinity",A<0&&(S="-"+S)):S="NaN":(C==null?S=D<=w||D>=P?h(Mi(T.c),D):m(Mi(T.c),D,"0"):C===10&&be?(T=Y(new N(T),_+D+1,b),S=m(Mi(T.c),T.e,"0")):(e(C,2,Gt.length,"Base"),S=a(m(Mi(T.c),D,"0"),10,C,A,!0)),A<0&&T.c[0]&&(S="-"+S)),S},d.valueOf=d.toJSON=function(){return rt(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,i!=null&&N.set(i),N}function Ei(i){var r=i|0;return i>0||i===r?r:r-1}function Mi(i){for(var r,a,u=1,d=i.length,g=i[0]+"";u<d;){for(r=i[u++]+"",a=re-r.length;a--;r="0"+r);g+=r}for(d=g.length;g.charCodeAt(--d)===48;);return g.slice(0,d+1||1)}function jn(i,r){var a,u,d=i.c,g=r.c,_=i.s,b=r.s,w=i.e,P=r.e;if(!_||!b)return null;if(a=d&&!d[0],u=g&&!g[0],a||u)return a?u?0:-b:_;if(_!=b)return _;if(a=_<0,u=w==P,!d||!g)return u?0:!d^a?1:-1;if(!u)return w>P^a?1:-1;for(b=(w=d.length)<(P=g.length)?w:P,_=0;_<b;_++)if(d[_]!=g[_])return d[_]>g[_]^a?1:-1;return w==P?0:w>P^a?1:-1}function e(i,r,a,u){if(i<r||i>a||i!==li(i))throw Error(di+(u||"Argument")+(typeof i=="number"?i<r||i>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function s(i){var r=i.c.length-1;return Ei(i.e/re)==r&&i.c[r]%2!=0}function h(i,r){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(r<0?"e":"e+")+r}function m(i,r,a){var u,d;if(r<0){for(d=a+".";++r;d+=a);i=d+i}else if(u=i.length,++r>u){for(d=a,r-=u;--r;d+=a);i+=d}else r<u&&(i=i.slice(0,r)+"."+i.slice(r));return i}var x=Pa(),B=x,$=class{constructor(i){Zt(this,"key");Zt(this,"left",null);Zt(this,"right",null);this.key=i}},tt=class extends ${constructor(i){super(i)}},lt=class{constructor(){Zt(this,"size",0);Zt(this,"modificationCount",0);Zt(this,"splayCount",0)}splay(i){let r=this.root;if(r==null)return this.compare(i,i),-1;let a=null,u=null,d=null,g=null,_=r,b=this.compare,w;for(;;)if(w=b(_.key,i),w>0){let P=_.left;if(P==null||(w=b(P.key,i),w>0&&(_.left=P.right,P.right=_,_=P,P=_.left,P==null)))break;a==null?u=_:a.left=_,a=_,_=P}else if(w<0){let P=_.right;if(P==null||(w=b(P.key,i),w<0&&(_.right=P.left,P.left=_,_=P,P=_.right,P==null)))break;d==null?g=_:d.right=_,d=_,_=P}else break;return d!=null&&(d.right=_.left,_.left=g),a!=null&&(a.left=_.right,_.right=u),this.root!==_&&(this.root=_,this.splayCount++),w}splayMin(i){let r=i,a=r.left;for(;a!=null;){let u=a;r.left=u.right,u.right=r,r=u,a=r.left}return r}splayMax(i){let r=i,a=r.right;for(;a!=null;){let u=a;r.right=u.left,u.left=r,r=u,a=r.right}return r}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let r=this.root,a=r,u=r.left;if(this.size--,u==null)this.root=r.right;else{let d=r.right;r=this.splayMax(u),r.right=d,this.root=r}return this.modificationCount++,a}addNewRoot(i,r){this.size++,this.modificationCount++;let a=this.root;if(a==null){this.root=i;return}r<0?(i.left=a,i.right=a.right,a.right=null):(i.right=a,i.left=a.left,a.left=null),this.root=i}_first(){let i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){let i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,r)=>i<r?-1:i>r?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},bt=class wo extends lt{constructor(a,u){super();Zt(this,"root",null);Zt(this,"compare");Zt(this,"validKey");Zt(this,Kh,"[object Set]");this.compare=a??this.defaultCompare(),this.validKey=u??(d=>d!=null&&d!=null)}delete(a){return this.validKey(a)?this._delete(a)!=null:!1}deleteAll(a){for(let u of a)this.delete(u)}forEach(a){let u=this[Symbol.iterator](),d;for(;d=u.next(),!d.done;)a(d.value,d.value,this)}add(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new tt(a),u),this}addAndReturn(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new tt(a),u),this.root.key}addAll(a){for(let u of a)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let d=u.right;for(;d!=null;)u=d,d=u.right;return u.key}firstAfter(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let d=u.left;for(;d!=null;)u=d,d=u.left;return u.key}retainAll(a){let u=new wo(this.compare,this.validKey),d=this.modificationCount;for(let g of a){if(d!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(g)&&this.splay(g)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(a){return!this.validKey(a)||this.splay(a)!=0?null:this.root.key}intersection(a){let u=new wo(this.compare,this.validKey);for(let d of this)a.has(d)&&u.add(d);return u}difference(a){let u=new wo(this.compare,this.validKey);for(let d of this)a.has(d)||u.add(d);return u}union(a){let u=this.clone();return u.addAll(a),u}clone(){let a=new wo(this.compare,this.validKey);return a.size=this.size,a.root=this.copyNode(this.root),a}copyNode(a){if(a==null)return null;function u(g,_){let b,w;do{if(b=g.left,w=g.right,b!=null){let P=new tt(b.key);_.left=P,u(b,P)}if(w!=null){let P=new tt(w.key);_.right=P,g=w,_=P}}while(w!=null)}let d=new tt(a.key);return u(a,d),d}toSet(){return this.clone()}entries(){return new me(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Wh=Symbol.iterator,Kh=Symbol.toStringTag,Wh)](){return new te(this.wrap())}},Nt=class{constructor(i){Zt(this,"tree");Zt(this,"path",new Array);Zt(this,"modificationCount",null);Zt(this,"splayCount");this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let a=this.tree.getRoot();for(;a!=null;)this.path.push(a),a=a.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],r=i.right;if(r!=null){for(;r!=null;)this.path.push(r),r=r.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},te=class extends Nt{getValue(i){return i.key}},me=class extends Nt{getValue(i){return[i.key,i.key]}},fi=i=>i,Qe=i=>{if(i){let r=new bt(_s(i)),a=new bt(_s(i)),u=(g,_)=>_.addAndReturn(g),d=g=>({x:u(g.x,r),y:u(g.y,a)});return d({x:new B(0),y:new B(0)}),d}return fi},yi=i=>({set:r=>{He=yi(r)},reset:()=>yi(i),compare:_s(i),snap:Qe(i),orient:Tr(i)}),He=yi(),Yi=(i,r)=>i.ll.x.isLessThanOrEqualTo(r.x)&&r.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(r.y)&&r.y.isLessThanOrEqualTo(i.ur.y),co=(i,r)=>{if(r.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(r.ll.x)||r.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(r.ll.y))return null;let a=i.ll.x.isLessThan(r.ll.x)?r.ll.x:i.ll.x,u=i.ur.x.isLessThan(r.ur.x)?i.ur.x:r.ur.x,d=i.ll.y.isLessThan(r.ll.y)?r.ll.y:i.ll.y,g=i.ur.y.isLessThan(r.ur.y)?i.ur.y:r.ur.y;return{ll:{x:a,y:d},ur:{x:u,y:g}}},vs=(i,r)=>i.x.times(r.y).minus(i.y.times(r.x)),Ba=(i,r)=>i.x.times(r.x).plus(i.y.times(r.y)),Dr=i=>Ba(i,i).sqrt(),vu=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return vs(d,u).div(Dr(d)).div(Dr(u))},Sa=(i,r,a)=>{let u={x:r.x.minus(i.x),y:r.y.minus(i.y)},d={x:a.x.minus(i.x),y:a.y.minus(i.y)};return Ba(d,u).div(Dr(d)).div(Dr(u))},qe=(i,r,a)=>r.y.isZero()?null:{x:i.x.plus(r.x.div(r.y).times(a.minus(i.y))),y:a},Rr=(i,r,a)=>r.x.isZero()?null:{x:a,y:i.y.plus(r.y.div(r.x).times(a.minus(i.x)))},bu=(i,r,a,u)=>{if(r.x.isZero())return Rr(a,u,i.x);if(u.x.isZero())return Rr(i,r,a.x);if(r.y.isZero())return qe(a,u,i.y);if(u.y.isZero())return qe(i,r,a.y);let d=vs(r,u);if(d.isZero())return null;let g={x:a.x.minus(i.x),y:a.y.minus(i.y)},_=vs(g,r).div(d),b=vs(g,u).div(d),w=i.x.plus(b.times(r.x)),P=a.x.plus(_.times(u.x)),U=i.y.plus(b.times(r.y)),I=a.y.plus(_.times(u.y)),nt=w.plus(P).div(2),st=U.plus(I).div(2);return{x:nt,y:st}},Xi=class Mp{constructor(r,a){Zt(this,"point");Zt(this,"isLeft");Zt(this,"segment");Zt(this,"otherSE");Zt(this,"consumedBy");r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=a}static compare(r,a){let u=Mp.comparePoints(r.point,a.point);return u!==0?u:(r.point!==a.point&&r.link(a),r.isLeft!==a.isLeft?r.isLeft?1:-1:or.compare(r.segment,a.segment))}static comparePoints(r,a){return r.x.isLessThan(a.x)?-1:r.x.isGreaterThan(a.x)?1:r.y.isLessThan(a.y)?-1:r.y.isGreaterThan(a.y)?1:0}link(r){if(r.point===this.point)throw new Error("Tried to link already linked events");let a=r.point.events;for(let u=0,d=a.length;u<d;u++){let g=a[u];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){let r=this.point.events.length;for(let a=0;a<r;a++){let u=this.point.events[a];if(u.segment.consumedBy===void 0)for(let d=a+1;d<r;d++){let g=this.point.events[d];g.consumedBy===void 0&&u.otherSE.point.events===g.otherSE.point.events&&u.segment.consume(g.segment)}}}getAvailableLinkedEvents(){let r=[];for(let a=0,u=this.point.events.length;a<u;a++){let d=this.point.events[a];d!==this&&!d.segment.ringOut&&d.segment.isInResult()&&r.push(d)}return r}getLeftmostComparator(r){let a=new Map,u=d=>{let g=d.otherSE;a.set(d,{sine:vu(this.point,r.point,g.point),cosine:Sa(this.point,r.point,g.point)})};return(d,g)=>{a.has(d)||u(d),a.has(g)||u(g);let{sine:_,cosine:b}=a.get(d),{sine:w,cosine:P}=a.get(g);return _.isGreaterThanOrEqualTo(0)&&w.isGreaterThanOrEqualTo(0)?b.isLessThan(P)?1:b.isGreaterThan(P)?-1:0:_.isLessThan(0)&&w.isLessThan(0)?b.isLessThan(P)?-1:b.isGreaterThan(P)?1:0:w.isLessThan(_)?-1:w.isGreaterThan(_)?1:0}}},xu=0,or=class Ja{constructor(r,a,u,d){Zt(this,"id");Zt(this,"leftSE");Zt(this,"rightSE");Zt(this,"rings");Zt(this,"windings");Zt(this,"ringOut");Zt(this,"consumedBy");Zt(this,"prev");Zt(this,"_prevInResult");Zt(this,"_beforeState");Zt(this,"_afterState");Zt(this,"_isInResult");this.id=++xu,this.leftSE=r,r.segment=this,r.otherSE=a,this.rightSE=a,a.segment=this,a.otherSE=r,this.rings=u,this.windings=d}static compare(r,a){let u=r.leftSE.point.x,d=a.leftSE.point.x,g=r.rightSE.point.x,_=a.rightSE.point.x;if(_.isLessThan(u))return 1;if(g.isLessThan(d))return-1;let b=r.leftSE.point.y,w=a.leftSE.point.y,P=r.rightSE.point.y,U=a.rightSE.point.y;if(u.isLessThan(d)){if(w.isLessThan(b)&&w.isLessThan(P))return 1;if(w.isGreaterThan(b)&&w.isGreaterThan(P))return-1;let I=r.comparePoint(a.leftSE.point);if(I<0)return 1;if(I>0)return-1;let nt=a.comparePoint(r.rightSE.point);return nt!==0?nt:-1}if(u.isGreaterThan(d)){if(b.isLessThan(w)&&b.isLessThan(U))return-1;if(b.isGreaterThan(w)&&b.isGreaterThan(U))return 1;let I=a.comparePoint(r.leftSE.point);if(I!==0)return I;let nt=r.comparePoint(a.rightSE.point);return nt<0?1:nt>0?-1:1}if(b.isLessThan(w))return-1;if(b.isGreaterThan(w))return 1;if(g.isLessThan(_)){let I=a.comparePoint(r.rightSE.point);if(I!==0)return I}if(g.isGreaterThan(_)){let I=r.comparePoint(a.rightSE.point);if(I<0)return 1;if(I>0)return-1}if(!g.eq(_)){let I=P.minus(b),nt=g.minus(u),st=U.minus(w),Lt=_.minus(d);if(I.isGreaterThan(nt)&&st.isLessThan(Lt))return 1;if(I.isLessThan(nt)&&st.isGreaterThan(Lt))return-1}return g.isGreaterThan(_)?1:g.isLessThan(_)||P.isLessThan(U)?-1:P.isGreaterThan(U)?1:r.id<a.id?-1:r.id>a.id?1:0}static fromRing(r,a,u){let d,g,_,b=Xi.comparePoints(r,a);if(b<0)d=r,g=a,_=1;else if(b>0)d=a,g=r,_=-1;else throw new Error(`Tried to create degenerate segment at [${r.x}, ${r.y}]`);let w=new Xi(d,!0),P=new Xi(g,!1);return new Ja(w,P,[u],[_])}replaceRightSE(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let r=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r.isLessThan(a)?r:a},ur:{x:this.rightSE.point.x,y:r.isGreaterThan(a)?r:a}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(r){return r.x.eq(this.leftSE.point.x)&&r.y.eq(this.leftSE.point.y)||r.x.eq(this.rightSE.point.x)&&r.y.eq(this.rightSE.point.y)}comparePoint(r){return He.orient(this.leftSE.point,r,this.rightSE.point)}getIntersection(r){let a=this.bbox(),u=r.bbox(),d=co(a,u);if(d===null)return null;let g=this.leftSE.point,_=this.rightSE.point,b=r.leftSE.point,w=r.rightSE.point,P=Yi(a,b)&&this.comparePoint(b)===0,U=Yi(u,g)&&r.comparePoint(g)===0,I=Yi(a,w)&&this.comparePoint(w)===0,nt=Yi(u,_)&&r.comparePoint(_)===0;if(U&&P)return nt&&!I?_:!nt&&I?w:null;if(U)return I&&g.x.eq(w.x)&&g.y.eq(w.y)?null:g;if(P)return nt&&_.x.eq(b.x)&&_.y.eq(b.y)?null:b;if(nt&&I)return null;if(nt)return _;if(I)return w;let st=bu(g,this.vector(),b,r.vector());return st===null||!Yi(d,st)?null:He.snap(st)}split(r){let a=[],u=r.events!==void 0,d=new Xi(r,!0),g=new Xi(r,!1),_=this.rightSE;this.replaceRightSE(g),a.push(g),a.push(d);let b=new Ja(d,_,this.rings.slice(),this.windings.slice());return Xi.comparePoints(b.leftSE.point,b.rightSE.point)>0&&b.swapEvents(),Xi.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(d.checkForConsuming(),g.checkForConsuming()),a}swapEvents(){let r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}consume(r){let a=this,u=r;for(;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;let d=Ja.compare(a,u);if(d!==0){if(d>0){let g=a;a=u,u=g}if(a.prev===u){let g=a;a=u,u=g}for(let g=0,_=u.rings.length;g<_;g++){let b=u.rings[g],w=u.windings[g],P=a.rings.indexOf(b);P===-1?(a.rings.push(b),a.windings.push(w)):a.windings[P]+=w}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};let a=this._afterState.rings,u=this._afterState.windings,d=this._afterState.multiPolys;for(let b=0,w=this.rings.length;b<w;b++){let P=this.rings[b],U=this.windings[b],I=a.indexOf(P);I===-1?(a.push(P),u.push(U)):u[I]+=U}let g=[],_=[];for(let b=0,w=a.length;b<w;b++){if(u[b]===0)continue;let P=a[b],U=P.poly;if(_.indexOf(U)===-1)if(P.isExterior)g.push(U);else{_.indexOf(U)===-1&&_.push(U);let I=g.indexOf(P.poly);I!==-1&&g.splice(I,1)}}for(let b=0,w=g.length;b<w;b++){let P=g[b].multiPoly;d.indexOf(P)===-1&&d.push(P)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let r=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(Aa.type){case"union":{let u=r.length===0,d=a.length===0;this._isInResult=u!==d;break}case"intersection":{let u,d;r.length<a.length?(u=r.length,d=a.length):(u=a.length,d=r.length),this._isInResult=d===Aa.numMultiPolys&&u<d;break}case"xor":{let u=Math.abs(r.length-a.length);this._isInResult=u%2===1;break}case"difference":{let u=d=>d.length===1&&d[0].isSubject;this._isInResult=u(r)!==u(a);break}}return this._isInResult}},fo=class{constructor(i,r,a){Zt(this,"poly");Zt(this,"isExterior");Zt(this,"segments");Zt(this,"bbox");if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=a,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let u=He.snap({x:new B(i[0][0]),y:new B(i[0][1])});this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let d=u;for(let g=1,_=i.length;g<_;g++){if(typeof i[g][0]!="number"||typeof i[g][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=He.snap({x:new B(i[g][0]),y:new B(i[g][1])});b.x.eq(d.x)&&b.y.eq(d.y)||(this.segments.push(or.fromRing(d,b,this)),b.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=b.x),b.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=b.y),b.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=b.x),b.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=b.y),d=b)}(!u.x.eq(d.x)||!u.y.eq(d.y))&&this.segments.push(or.fromRing(d,u,this))}getSweepEvents(){let i=[];for(let r=0,a=this.segments.length;r<a;r++){let u=this.segments[r];i.push(u.leftSE),i.push(u.rightSE)}return i}},wu=class{constructor(i,r){Zt(this,"multiPoly");Zt(this,"exteriorRing");Zt(this,"interiorRings");Zt(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new fo(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let a=1,u=i.length;a<u;a++){let d=new fo(i[a],this,!1);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.interiorRings.push(d)}this.multiPoly=r}getSweepEvents(){let i=this.exteriorRing.getSweepEvents();for(let r=0,a=this.interiorRings.length;r<a;r++){let u=this.interiorRings[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},Uh=class{constructor(i,r){Zt(this,"isSubject");Zt(this,"polys");Zt(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new B(Number.POSITIVE_INFINITY),y:new B(Number.POSITIVE_INFINITY)},ur:{x:new B(Number.NEGATIVE_INFINITY),y:new B(Number.NEGATIVE_INFINITY)}};for(let a=0,u=i.length;a<u;a++){let d=new wu(i[a],this);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.polys.push(d)}this.isSubject=r}getSweepEvents(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)i.push(u[d])}return i}},Ap=class ph{constructor(r){Zt(this,"events");Zt(this,"poly");Zt(this,"_isExteriorRing");Zt(this,"_enclosingRing");this.events=r;for(let a=0,u=r.length;a<u;a++)r[a].segment.ringOut=this;this.poly=null}static factory(r){let a=[];for(let u=0,d=r.length;u<d;u++){let g=r[u];if(!g.isInResult()||g.ringOut)continue;let _=null,b=g.leftSE,w=g.rightSE,P=[b],U=b.point,I=[];for(;_=b,b=w,P.push(b),b.point!==U;)for(;;){let nt=b.getAvailableLinkedEvents();if(nt.length===0){let It=P[0].point,Gt=P[P.length-1].point;throw new Error(`Unable to complete output ring starting at [${It.x}, ${It.y}]. Last matching segment found ends at [${Gt.x}, ${Gt.y}].`)}if(nt.length===1){w=nt[0].otherSE;break}let st=null;for(let It=0,Gt=I.length;It<Gt;It++)if(I[It].point===b.point){st=It;break}if(st!==null){let It=I.splice(st)[0],Gt=P.splice(It.index);Gt.unshift(Gt[0].otherSE),a.push(new ph(Gt.reverse()));continue}I.push({index:P.length,point:b.point});let Lt=b.getLeftmostComparator(_);w=nt.sort(Lt)[0].otherSE;break}a.push(new ph(P))}return a}getGeom(){let r=this.events[0].point,a=[r];for(let P=1,U=this.events.length-1;P<U;P++){let I=this.events[P].point,nt=this.events[P+1].point;He.orient(I,r,nt)!==0&&(a.push(I),r=I)}if(a.length===1)return null;let u=a[0],d=a[1];He.orient(u,r,d)===0&&a.shift(),a.push(a[0]);let g=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:a.length-1,b=this.isExteriorRing()?a.length:-1,w=[];for(let P=_;P!=b;P+=g)w.push([a[P].x.toNumber(),a[P].y.toNumber()]);return w}isExteriorRing(){if(this._isExteriorRing===void 0){let r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var d,g;let r=this.events[0];for(let _=1,b=this.events.length;_<b;_++){let w=this.events[_];Xi.compare(r,w)>0&&(r=w)}let a=r.segment.prevInResult(),u=a?a.prevInResult():null;for(;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return((d=u.ringOut)==null?void 0:d.enclosingRing())!==a.ringOut?a.ringOut:(g=a.ringOut)==null?void 0:g.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}},Gh=class{constructor(i){Zt(this,"exteriorRing");Zt(this,"interiorRings");this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){let i=this.exteriorRing.getGeom();if(i===null)return null;let r=[i];for(let a=0,u=this.interiorRings.length;a<u;a++){let d=this.interiorRings[a].getGeom();d!==null&&r.push(d)}return r}},Tp=class{constructor(i){Zt(this,"rings");Zt(this,"polys");this.rings=i,this.polys=this._composePolys(i)}getGeom(){let i=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getGeom();u!==null&&i.push(u)}return i}_composePolys(i){var a;let r=[];for(let u=0,d=i.length;u<d;u++){let g=i[u];if(!g.poly)if(g.isExteriorRing())r.push(new Gh(g));else{let _=g.enclosingRing();_!=null&&_.poly||r.push(new Gh(_)),(a=_==null?void 0:_.poly)==null||a.addInterior(g)}}return r}},Dp=class{constructor(i,r=or.compare){Zt(this,"queue");Zt(this,"tree");Zt(this,"segments");this.queue=i,this.tree=new bt(r),this.segments=[]}process(i){let r=i.segment,a=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(r),a;i.isLeft&&this.tree.add(r);let u=r,d=r;do u=this.tree.lastBefore(u);while(u!=null&&u.consumedBy!=null);do d=this.tree.firstAfter(d);while(d!=null&&d.consumedBy!=null);if(i.isLeft){let g=null;if(u){let b=u.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(g=b),!u.isAnEndpoint(b))){let w=this._splitSafely(u,b);for(let P=0,U=w.length;P<U;P++)a.push(w[P])}}let _=null;if(d){let b=d.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(_=b),!d.isAnEndpoint(b))){let w=this._splitSafely(d,b);for(let P=0,U=w.length;P<U;P++)a.push(w[P])}}if(g!==null||_!==null){let b=null;g===null?b=_:_===null?b=g:b=Xi.comparePoints(g,_)<=0?g:_,this.queue.delete(r.rightSE),a.push(r.rightSE);let w=r.split(b);for(let P=0,U=w.length;P<U;P++)a.push(w[P])}a.length>0?(this.tree.delete(r),a.push(i)):(this.segments.push(r),r.prev=u)}else{if(u&&d){let g=u.getIntersection(d);if(g!==null){if(!u.isAnEndpoint(g)){let _=this._splitSafely(u,g);for(let b=0,w=_.length;b<w;b++)a.push(_[b])}if(!d.isAnEndpoint(g)){let _=this._splitSafely(d,g);for(let b=0,w=_.length;b<w;b++)a.push(_[b])}}}this.tree.delete(r)}return a}_splitSafely(i,r){this.tree.delete(i);let a=i.rightSE;this.queue.delete(a);let u=i.split(r);return u.push(a),i.consumedBy===void 0&&this.tree.add(i),u}},Rp=class{constructor(){Zt(this,"type");Zt(this,"numMultiPolys")}run(i,r,a){po.type=i;let u=[new Uh(r,!0)];for(let w=0,P=a.length;w<P;w++)u.push(new Uh(a[w],!1));if(po.numMultiPolys=u.length,po.type==="difference"){let w=u[0],P=1;for(;P<u.length;)co(u[P].bbox,w.bbox)!==null?P++:u.splice(P,1)}if(po.type==="intersection")for(let w=0,P=u.length;w<P;w++){let U=u[w];for(let I=w+1,nt=u.length;I<nt;I++)if(co(U.bbox,u[I].bbox)===null)return[]}let d=new bt(Xi.compare);for(let w=0,P=u.length;w<P;w++){let U=u[w].getSweepEvents();for(let I=0,nt=U.length;I<nt;I++)d.add(U[I])}let g=new Dp(d),_=null;for(d.size!=0&&(_=d.first(),d.delete(_));_;){let w=g.process(_);for(let P=0,U=w.length;P<U;P++){let I=w[P];I.consumedBy===void 0&&d.add(I)}d.size!=0?(_=d.first(),d.delete(_)):_=null}He.reset();let b=Ap.factory(g.segments);return new Tp(b).getGeom()}},po=new Rp,Aa=po,Op=(i,...r)=>Aa.run("intersection",i,r),Ip=(i,...r)=>Aa.run("difference",i,r);He.set;function Ta(i){let r={type:"Feature"};return r.geometry=i,r}function Da(i){return i.type==="Feature"?i.geometry:i}function $h(i){return i&&i.geometry&&i.geometry.coordinates?i.geometry.coordinates:i}function Fp(i){return Ta({type:"LineString",coordinates:i})}function Np(i){return Ta({type:"MultiLineString",coordinates:i})}function Vh(i){return Ta({type:"Polygon",coordinates:i})}function Hh(i){return Ta({type:"MultiPolygon",coordinates:i})}function zp(i,r){let a=Da(i),u=Da(r),d=Op(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?Vh(d[0]):Hh(d)}function jp(i,r){let a=Da(i),u=Da(r),d=Ip(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?Vh(d[0]):Hh(d)}function Zh(i){return Array.isArray(i)?1+Zh(i[0]):-1}function Up(i){i instanceof L.Polyline&&(i=i.toGeoJSON(15));let r=$h(i),a=Zh(r),u=[];return a>1?r.forEach(d=>{u.push(Fp(d))}):u.push(i),u}function Gp(i){let r=[];return i.eachLayer(a=>{r.push($h(a.toGeoJSON(15)))}),Np(r)}ni.Cut=ni.Polygon.extend({initialize(i){this._map=i,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let i=this._layer.getLatLngs();if(i.length<=2)return;let r=L.polygon(i,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:u,originalLayer:d})=>{this._fireCut(d,u,d),this._fireCut(this._map,u,d),d.pm._fireEdit()}),this._editedLayers=[];let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},cut(i){let r=this._map._layers,a=i._latlngInfos||[];Object.keys(r).map(u=>r[u]).filter(u=>u.pm).filter(u=>!u._pmTempLayer).filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1).filter(u=>u instanceof L.Polyline).filter(u=>u!==i).filter(u=>u.pm.options.allowCutting).filter(u=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(u)>-1:!0).filter(u=>!this._layerGroup.hasLayer(u)).filter(u=>{try{let d=!!Wi(i.toGeoJSON(15),u.toGeoJSON(15)).features.length>0;return d||u instanceof L.Polyline&&!(u instanceof L.Polygon)?d:!!zp(i.toGeoJSON(15),u.toGeoJSON(15))}catch{return u instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(u=>{let d;if(u instanceof L.Polygon){d=L.polygon(u.getLatLngs());let w=d.getLatLngs();a.forEach(P=>{if(P&&P.snapInfo){let{latlng:U}=P,I=this._calcClosestLayer(U,[d]);if(I&&I.segment&&I.distance<this.options.snapDistance){let{segment:nt}=I;if(nt&&nt.length===2){let{indexPath:st,parentPath:Lt,newIndex:It}=L.PM.Utils._getIndexFromSegment(w,nt);(st.length>1?(0,an.default)(w,Lt):w).splice(It,0,U)}}}})}else d=u;let g=this._cutLayer(i,d),_=L.geoJSON(g,u.options);_.getLayers().length===1&&([_]=_.getLayers()),this._setPane(_,"layerPane");let b=_.addTo(this._map.pm._getContainingLayer());if(b.pm.enable(u.pm.options),b.pm.disable(),u._pmTempLayer=!0,i._pmTempLayer=!0,u.remove(),u.removeFrom(this._map.pm._getContainingLayer()),i.remove(),i.removeFrom(this._map.pm._getContainingLayer()),b.getLayers&&b.getLayers().length===0&&this._map.pm.removeLayer({target:b}),b instanceof L.LayerGroup?(b.eachLayer(w=>{this._addDrawnLayerProp(w)}),this._addDrawnLayerProp(b)):this._addDrawnLayerProp(b),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let w=this.options.layersToCut.indexOf(u);w>-1&&this.options.layersToCut.splice(w,1)}this._editedLayers.push({layer:b,originalLayer:u})})},_cutLayer(i,r){let a=L.geoJSON(),u;if(r instanceof L.Polygon)u=jp(r.toGeoJSON(15),i.toGeoJSON(15));else{let d=Up(r);d.forEach(g=>{let _=cu(g,i.toGeoJSON(15)),b;_&&_.features.length>0?b=L.geoJSON(_):b=L.geoJSON(g),b.getLayers().forEach(w=>{fu(i.toGeoJSON(15),w.toGeoJSON(15))||w.addTo(a)})}),d.length>1?u=Gp(a):u=a.toGeoJSON(15)}return u},_change:L.Util.falseFn}),ni.Text=ni.extend({initialize(i){this._map=i,this._shape="Text",this.toolbarButtonName="drawText"},enable(i){L.Util.setOptions(this,i),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(oe("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var i;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(i=this._hintMarker)==null||i.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(i){this.enabled()?this.disable():this.enable(i)},_syncHintMarker(i){if(this._hintMarker.setLatLng(i.latlng),this.options.snappable){let r=i;r.target=this._hintMarker,this._handleSnapping(r)}},_createMarker(i){var d,g,_,b;if(!i.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(i.latlng);let r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(d=this.options.textOptions)==null?void 0:d.className){let w=this.options.textOptions.className.split(" ");this.textArea.classList.add(...w)}let a=this._createTextIcon(this.textArea),u=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:a});if(this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm){u.pm.textArea=this.textArea,L.setOptions(u.pm,{removeIfEmpty:((g=this.options.textOptions)==null?void 0:g.removeIfEmpty)??!0});let w=((_=this.options.textOptions)==null?void 0:_.focusAfterDraw)??!0;u.pm._createTextMarker(w),(b=this.options.textOptions)!=null&&b.text&&u.pm.setText(this.options.textOptions.text)}this._fireCreate(u),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(i){this.enable(),this._hintMarker.setLatLng(i.latlng)},_createTextArea(){let i=document.createElement("textarea");return i.readOnly=!0,i.classList.add("pm-textarea","pm-disabled"),i},_createTextIcon(i){return L.divIcon({className:"pm-text-marker",html:i})}});var $p={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,hi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let i=this._getDOMElem();i&&(hi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(i)):L.DomEvent.on(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,hi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let i=this._getDOMElem();i&&(hi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(i)):L.DomEvent.off(i,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseDown(a),!1},_simulateMouseMoveEvent(i){let r=i.touches?i.touches[0]:i,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseMove(a),!1},_simulateMouseUpEvent(i){let r={originalEvent:i.touches?i.touches[0]:i,target:this._layer};return i.type.indexOf("touch")===-1&&(r.containerPoint=this._map.mouseEventToContainerPoint(i),r.latlng=this._map.containerPointToLatLng(r.containerPoint)),this._dragMixinOnMouseUp(r),!1},_dragMixinOnMouseDown(i){if(i.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(i);let r=i._fromLayerSync,a=this._syncLayers("_dragMixinOnMouseDown",i);if(this._layer instanceof L.Marker&&(this.options.snappable&&!r&&!a?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let u="resizeableCircleMarker";this._layer instanceof L.Circle&&(u="resizeableCircle"),this.options.snappable&&!r&&!a?this._layer.pm.options[u]||this._initSnappableMarkersDrag():this._layer.pm.options[u]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=i.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(i){this._overwriteEventIfItComesFromMarker(i);let r=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",i),this._dragging||(this._dragging=!0,L.DomUtil.addClass(r,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=i.latlng),this._onLayerDrag(i),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(i){let r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",i),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(i){let{latlng:r}=i,a={lat:r.lat-this._tempDragCoord.lat,lng:r.lng-this._tempDragCoord.lng},u=d=>d.map(g=>{if(Array.isArray(g))return u(g);let _={lat:g.lat+a.lat,lng:g.lng+a.lng};return(g.alt||g.alt===0)&&(_.alt=g.alt),_});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let d=u([this._layer.getLatLng()]);this._layer.setLatLng(d[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let d=this._layer.getLatLng();this._layer._snapped&&(d=this._layer._orgLatLng);let g=u([d]);this._layer.setLatLng(g[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let d=u([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(d),this._fireChange(this._layer.getBounds(),"Edit")}else{let d=u(this._layer.getLatLngs());this._layer.setLatLngs(d),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=r,i.layer=this._layer,this._fireDrag(i)},addDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.addClass(i,"leaflet-pm-draggable")},removeDraggingClass(){let i=this._getDOMElem();i&&L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_getDOMElem(){let i=null;return this._layer._path?i=this._layer._path:this._layer._renderer&&this._layer._renderer._container?i=this._layer._renderer._container:this._layer._image?i=this._layer._image:this._layer._icon&&(i=this._layer._icon),i},_overwriteEventIfItComesFromMarker(i){i.target.getLatLng&&(!i.target._radius||i.target._radius<=10)&&(i.containerPoint=this._map.mouseEventToContainerPoint(i.originalEvent),i.latlng=this._map.containerPointToLatLng(i.containerPoint))},_syncLayers(i,r){if(this.enabled())return!1;if(!r._fromLayerSync&&this._layer===r.target&&this.options.syncLayersOnDrag){r._fromLayerSync=!0;let a=[];if(L.Util.isArray(this.options.syncLayersOnDrag))a=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(u=>{u instanceof L.LayerGroup&&(a=a.concat(u.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let u in this._parentLayerGroup){let d=this._parentLayerGroup[u];d.pm&&(a=d.pm.getLayers(!0))}return L.Util.isArray(a)&&a.length>0&&(a=a.filter(u=>!!u.pm).filter(u=>!!u.pm.options.draggable),a.forEach(u=>{u!==this._layer&&u.pm[i]&&(u._snapped=!1,u.pm[i](r))})),a.length>0}return!1},_stopDOMImageDrag(i){return i.preventDefault(),!1}},Vp=$p,Hp=v(mn());function Zp(i,r,a,u){return a.unproject(r.transform(a.project(i,u)),u)}function qh(i,r,a){let u=a.getMaxZoom();if(u===1/0&&(u=a.getZoom()),L.Util.isArray(i)){let d=[];return i.forEach(g=>{d.push(qh(g,r,a))}),d}return i instanceof L.LatLng?Zp(i,r,a,u):null}function bs(i,r){r instanceof L.Layer&&(r=r.getLatLng());let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.project(r,a)}function Ra(i,r){let a=i.getMaxZoom();return a===1/0&&(a=i.getZoom()),i.unproject(r,a)}var qp={_onRotateStart(i){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=bs(this._map,this._rotationOriginLatLng),this._rotationStartPoint=bs(this._map,i.target.getLatLng()),this._initialRotateLatLng=qi(this._layer),this._startAngle=this.getAngle();let r=qi(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,r),this._fireRotationStart(this._map,r)},_onRotate(i){let r=bs(this._map,i.target.getLatLng()),a=this._rotationStartPoint,u=this._rotationOriginPoint,d=Math.atan2(r.y-u.y,r.x-u.x)-Math.atan2(a.y-u.y,a.x-u.x);this._layer.setLatLngs(this._rotateLayer(d,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let g=this;function _(U,I=[],nt=-1){if(nt>-1&&I.push(nt),L.Util.isArray(U[0]))U.forEach((st,Lt)=>_(st,I.slice(),Lt));else{let st=I.length>0?(0,Hp.default)(g._markers,I):g._markers[0];U.forEach((Lt,It)=>{st[It].setLatLng(Lt)})}}_(this._layer.getLatLngs());let b=qi(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(d,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let w=d*180/Math.PI;w=w<0?w+360:w;let P=w+this._startAngle;this._setAngle(P),this._rotationLayer.pm._setAngle(P),this._fireRotation(this._rotationLayer,w,b),this._fireRotation(this._map,w,b),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let i=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let r=qi(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=qi(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,i,r),this._fireRotationEnd(this._map,i,r),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(i,r,a,u,d){let g=bs(d,a);return this._matrix=u.clone().rotate(i,g).flip(),qh(r,this._matrix,d)},_setAngle(i){i=i<0?i+360:i,this._angle=i%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let i=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),r=i.getCenter();return i.removeFrom(this._layer._map),r},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(es(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),i),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=qi(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(i){let r=this.getAngle(),a=this._layer.getLatLngs(),u=i*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(u,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+i),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(u,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let d=this.getAngle()-r;d=d<0?d+360:d,this._startAngle=r,this._fireRotation(this._layer,d,a,this._layer),this._fireRotation(this._map||this._layer._map,d,a,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(i){let r=i-this.getAngle();this.rotateLayer(r)},getAngle(){return this._angle||0},setInitAngle(i){this._setAngle(i)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(i){this._rotationCenter=i,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(i)}},Kp=qp,Wp=L.Class.extend({includes:[Vp,eo,Kp,Qr],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(i){L.Util.setOptions(this,i)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(i,r){r==="layerPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(i.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(i,r){let a=r.target,u={layer:this._layer,marker:a,event:r},d="";return i==="move"?d="moveVertexValidation":i==="add"?d="addVertexValidation":i==="remove"&&(d="removeVertexValidation"),this.options[d]&&typeof this.options[d]=="function"&&!this.options[d](u)?(i==="move"&&(a._cancelDragEventChain=a.getLatLng()),!1):(a._cancelDragEventChain=null,!0)},_vertexValidationDrag(i){return i._cancelDragEventChain?(i._latlng=i._cancelDragEventChain,i.update(),!1):!0},_vertexValidationDragEnd(i){return i._cancelDragEventChain?(i._cancelDragEventChain=null,!1):!0}}),ui=Wp;ui.LayerGroup=L.Class.extend({initialize(i){this._layerGroup=i,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(u=>this._initLayer(u));let r=u=>{if(u.layer._pmTempLayer)return;this._layers=this.getLayers();let d=this._layers.filter(g=>!g.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in g.pm._parentLayerGroup));d.forEach(g=>{this._initLayer(g)}),d.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(r,100,this),this),this._layerGroup.on("layerremove",u=>{this._removeLayerFromGroup(u.target)},this);let a=u=>{u.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(a,100,this),this)},enable(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.enable(i,r)):a.pm.enable(i)})},disable(i=[]){i.length===0&&(this._layers=this.getLayers()),this._layers.forEach(r=>{r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1&&(i.push(r._leaflet_id),r.pm.disable(i)):r.pm.disable()})},enabled(i=[]){return i.length===0&&(this._layers=this.getLayers()),!!this._layers.find(r=>r instanceof L.LayerGroup?i.indexOf(r._leaflet_id)===-1?(i.push(r._leaflet_id),r.pm.enabled(i)):!1:r.pm.enabled())},toggleEdit(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=i,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.toggleEdit(i,r)):a.pm.toggleEdit(i)})},_initLayer(i){let r=L.Util.stamp(this._layerGroup);i.pm._parentLayerGroup||(i.pm._parentLayerGroup={}),i.pm._parentLayerGroup[r]=this._layerGroup},_removeLayerFromGroup(i){if(i.pm&&i.pm._layerGroup){let r=L.Util.stamp(this._layerGroup);delete i.pm._layerGroup[r]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(i=>i.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var i;return this._map||((i=this._layers.find(r=>!!r._map))==null?void 0:i._map)||null},getLayers(i=!1,r=!0,a=!0,u=[]){let d=[];return i?this._layerGroup.getLayers().forEach(g=>{d.push(g),g instanceof L.LayerGroup&&u.indexOf(g._leaflet_id)===-1&&(u.push(g._leaflet_id),d=d.concat(g.pm.getLayers(!0,!0,!0,u)))}):d=this._layerGroup.getLayers(),a&&(d=d.filter(g=>!(g instanceof L.LayerGroup))),r&&(d=d.filter(g=>!!g.pm),d=d.filter(g=>!g._pmTempLayer),d=d.filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)),d},setOptions(i,r=[]){r.length===0&&(this._layers=this.getLayers()),this.options=i,this._layers.forEach(a=>{a.pm&&(a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.setOptions(i,r)):a.pm.setOptions(i))})}}),ui.Marker=ui.extend({_shape:"Marker",initialize(i){this._layer=i,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(i={draggable:!0}){if(L.Util.setOptions(this,i),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(i){let r=i.target;r.remove(),this._fireRemove(r),this._fireRemove(this._map,r)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)}});var ar=v(mn()),Jp={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let i=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=i.filter((r,a,u)=>u.indexOf(r)===a)},_removeFromCache(i){let r=this.markerCache.indexOf(i);r>-1&&this.markerCache.splice(r,1)},renderLimits(i){this.markerCache.forEach(r=>{i.includes(r)?this._markerGroup.addLayer(r):this._markerGroup.removeLayer(r)})},applyLimitFilters({latlng:i={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let r=[...this._filterClosestMarkers(i)];this.renderLimits(r)},_filterClosestMarkers(i){let r=[...this.markerCache],a=this.options.limitMarkersToCount;return a===-1?r:(r.sort((u,d)=>{let g=u._latlng.distanceTo(i),_=d._latlng.distanceTo(i);return g-_}),r.filter((u,d)=>a>-1?d<a:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(i){this._preventRenderMarkers=!!i}},Yp=Jp;ui.Line=ui.extend({includes:[Yp],_shape:"Line",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(i){return this.enabled()?this.disable():this.enable(i),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let i=this._map,r=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(i),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let a=u=>{if(Array.isArray(u[0]))return u.map(a,this);let d=u.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&u.map((g,_)=>{let b=this.isPolygon()?(_+1)%u.length:_+1;return this._createMiddleMarker(d[_],d[b])}),d};this._markers=a(r),this.filterMarkerGroup(),i.addLayer(this._markerGroup)},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this.options.rotate?(r.on("dragstart",this._onRotateStart,this),r.on("drag",this._onRotate,this),r.on("dragend",this._onRotateEnd,this)):(r.on("click",this._onVertexClick,this),r.on("dragstart",this._onMarkerDragStart,this),r.on("move",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(r),r},_createMiddleMarker(i,r){if(!i||!r)return!1;let a=L.PM.Utils.calcMiddleLatLng(this._map,i.getLatLng(),r.getLatLng()),u=this._createMarker(a),d=L.divIcon({className:"marker-icon marker-icon-middle"});return u.setIcon(d),u.leftM=i,u.rightM=r,i._middleMarkerNext=u,r._middleMarkerPrev=u,u.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),u.on("movestart",this._onMiddleMarkerMoveStart,this),u},_onMiddleMarkerClick(i){let r=i.target;if(!this._vertexValidation("add",i))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMoveStart(i){let r=i.target;if(r.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",i)){r.on("move",this._onMiddleMarkerMovePrevent,this);return}r._dragging=!0,this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMovePrevent(i){let r=i.target;this._vertexValidationDrag(r)},_onMiddleMarkerMoveEnd(i){let r=i.target;if(r.off("move",this._onMiddleMarkerMovePrevent,this),r.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(r))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),setTimeout(()=>{delete r._dragging},100)},_addMarker(i,r,a){i.off("movestart",this._onMiddleMarkerMoveStart,this),i.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let u=i.getLatLng(),d=this._layer._latlngs;delete i.leftM,delete i.rightM;let{indexPath:g,index:_,parentPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),w=g.length>1?(0,ar.default)(d,b):d,P=g.length>1?(0,ar.default)(this._markers,b):this._markers;w.splice(_+1,0,u),P.splice(_+1,0,i),this._layer.setLatLngs(d),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(r,i),this._createMiddleMarker(i,a)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(i,L.PM.Utils.findDeepMarkerIndex(this._markers,i).indexPath,u),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return ns(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(i){let r=this._layer,a,u;if(this.options.allowSelfIntersection?a=!1:(u=ns(this._layer.toGeoJSON(15)),a=u.features.length>0),a){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return a;i?this._flashLayer():(r.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(u)}else r.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return a},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(i,r){i.forEach(a=>{Array.isArray(a)?this._updateDisabledMarkerStyle(a,r):a._icon&&(r&&!this._checkMarkerAllowedToDrag(a)?L.DomUtil.addClass(a._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(a._icon,"vertexmarker-disabled"))})},_removeMarker(i){let r=i.target;if(!this._vertexValidation("remove",i))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=qi(this._layer,this._layer.getLatLngs()));let a=this._layer.getLatLngs(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!u)return;let _=u.length>1?(0,ar.default)(a,g):a,b=u.length>1?(0,ar.default)(this._markers,g):this._markers,w=g[g.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!w&&(_.length<=2||this.isPolygon()&&_.length<=3)){this._flashLayer();return}_.splice(d,1),this._layer.setLatLngs(a),this.isPolygon()&&_.length<=2&&_.splice(0,_.length);let P=!1;if(_.length<=1&&(_.splice(0,_.length),g.length>1&&u.length>1&&(a=Er(a)),this._layer.setLatLngs(a),this._initMarkers(),P=!0),In(a)||this._layer.remove(),a=Er(a),this._layer.setLatLngs(a),this._markers=Er(this._markers),!P&&(b=u.length>1?(0,ar.default)(this._markers,g):this._markers,r._middleMarkerPrev&&(this._markerGroup.removeLayer(r._middleMarkerPrev),this._removeFromCache(r._middleMarkerPrev)),r._middleMarkerNext&&(this._markerGroup.removeLayer(r._middleMarkerNext),this._removeFromCache(r._middleMarkerNext)),this._markerGroup.removeLayer(r),this._removeFromCache(r),b)){let U,I;if(this.isPolygon()?(U=(d+1)%b.length,I=(d+(b.length-1))%b.length):(I=d-1<0?void 0:d-1,U=d+1>=b.length?void 0:d+1),U!==I){let nt=b[I],st=b[U];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(nt,st)}b.splice(d,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(i){let r=this._layer.getLatLngs(),a=i.getLatLng(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,i);(u.length>1?(0,ar.default)(r,g):r).splice(d,1,a),this._layer.setLatLngs(r)},_getNeighborMarkers(i){let{indexPath:r,index:a,parentPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,i),d=r.length>1?(0,ar.default)(this._markers,u):this._markers,g=(a+1)%d.length,_=(a+(d.length-1))%d.length,b=d[_],w=d[g];return{prevMarker:b,nextMarker:w}},_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=Wi(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=Wi(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return i.getLatLng()===this._markers[0][0].getLatLng()?_+=1:i.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&_<=2)},_onMarkerDragStart(i){let r=i.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",i))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,a),this.options.allowSelfIntersection||(this._coordsBeforeEdit=qi(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(r):this._markerAllowedToDrag=null},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r))return;let{indexPath:a,index:u,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!a)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(r);let g=a.length>1?(0,ar.default)(this._markers,d):this._markers,_=(u+1)%g.length,b=(u+(g.length-1))%g.length,w=r.getLatLng(),P=g[b].getLatLng(),U=g[_].getLatLng();if(r._middleMarkerNext){let I=L.PM.Utils.calcMiddleLatLng(this._map,w,U);r._middleMarkerNext.setLatLng(I)}if(r._middleMarkerPrev){let I=L.PM.Utils.calcMiddleLatLng(this._map,w,P);r._middleMarkerPrev.setLatLng(I)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),u=!this.options.allowSelfIntersection&&this.hasSelfIntersection();u&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(u=!1);let d=!this.options.allowSelfIntersection&&u;if(this._fireMarkerDragEnd(i,a,d),d){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(i,a);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(i){let r=i.target;if(r._dragging)return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireVertexClick(i,a)}}),ui.Polygon=ui.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(i){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(i),u=L.polyline([r.getLatLng(),i.getLatLng()]),d=L.polyline([i.getLatLng(),a.getLatLng()]),g=Wi(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=Wi(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return!(g<=2&&_<=2)}}),ui.Rectangle=ui.Polygon.extend({_shape:"Rectangle",_initMarkers(){let i=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,i.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((a,u)=>{let d=this._cornerMarkers.find(g=>g._index===u);d&&d.setLatLng(a)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(i,r){let a=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=i,a._index=r,a._pmTempLayer=!0,a.on("click",this._onVertexClick,this),this._markerGroup.addLayer(a),a},_addMarkerEvents(){this._markers[0].forEach(i=>{i.on("dragstart",this._onMarkerDragStart,this),i.on("drag",this._onMarkerDrag,this),i.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||i.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(i){if(!this._vertexValidation("move",i))return;let r=i.target,a=this._cornerMarkers;r._oppositeCornerLatLng=a.find(d=>d._index===(r._index+2)%4).getLatLng(),r._snapped=!1;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(i,u)},_onMarkerDrag(i){let r=i.target;if(!this._vertexValidationDrag(r)||r._index===void 0)return;this._adjustRectangleForMarkerMove(r);let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDrag(i,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(i){let r=i.target;if(!this._vertexValidationDragEnd(r))return;this._cornerMarkers.forEach(u=>{delete u._oppositeCornerLatLng});let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragEnd(i,a),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(i){L.extend(i._origLatLng,i._latlng);let r=L.PM.Utils._getRotatedRectangle(i.getLatLng(),i._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(r),this._adjustAllMarkers(i),this._layer.redraw()},_adjustAllMarkers(i){let r=this._layer.getLatLngs()[0];if(r&&r.length!==4&&r.length>0)r.forEach((a,u)=>{this._cornerMarkers[u].setLatLng(a)}),this._cornerMarkers.slice(r.length).forEach(a=>{a.setLatLng(r[0])});else if(!r||!r.length)console.error("The layer has no LatLngs");else{let a=r.findIndex(u=>i.getLatLng().equals(u));a>-1?(this._cornerMarkers[(i._index+1)%4].setLatLng(r[(a+1)%4]),this._cornerMarkers[(i._index+2)%4].setLatLng(r[(a+2)%4]),this._cornerMarkers[(i._index+3)%4].setLatLng(r[(a+3)%4])):this._cornerMarkers.forEach(u=>{u.setLatLng(r[u._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(es(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let i=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(i[0],i[2],this.getAngle(),this._map||this)}}),ui.CircleMarker=ui.extend({_shape:"CircleMarker",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let i=this._map;this._helperLayers&&(this._helperLayers.removeFrom(i),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(i);let r=this._layer.getLatLng(),a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._centerMarker=this._createCenterMarker(r),this._outerMarker=this._createOuterMarker(u),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(i,r){let a=this._map.project(i),u=L.point(a.x+r,a.y);return this._map.unproject(u)},_createHintLine(i,r){let a=i.getLatLng(),u=r.getLatLng();this._hintline=L.polyline([a,u],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(i){let r=this._createMarker(i);return this.options.draggable?(L.DomUtil.addClass(r._icon,"leaflet-pm-draggable"),r.on("move",this._moveCircle,this)):r.dragging.disable(),r},_createOuterMarker(i){let r=this._createMarker(i);return r.on("drag",this._resizeCircle,this),r},_createMarker(i){let r=new L.Marker(i,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=i,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("click",this._onVertexClick,this),this._helperLayers.addLayer(r),r},_moveCircle(i){if(i.target._cancelDragEventChain)return;let r=this._centerMarker.getLatLng();this._layer.setLatLng(r);let a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._outerMarker._latlng=u,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let i=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(i,r);this._outerMarker.setLatLng(a),this._centerMarker.setLatLng(i),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng();this._hintline.setLatLngs([i,r])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(i){this._vertexValidation("move",i)&&this._fireMarkerDragStart(i)},_onMarkerDrag(i){let r=i.target;r instanceof L.Marker&&!this._vertexValidationDrag(r)||this._fireMarkerDrag(i)},_onMarkerDragEnd(i){this._extedingMarkerDragEnd();let r=i.target;this._vertexValidationDragEnd(r)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(i))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let i=this._layer._map||this._map;if(i){let r=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),i,this._layer.getLatLng()),a=L.circle(this._layer.getLatLng(),this._layer.options);a.setRadius(r);let u=i&&i.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(a,200,!u).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(a,200,!u),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);return this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?r=is(this._map,i,r,this._getMinDistanceInMeter(i)):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(r=is(this._map,i,r,this._getMaxDistanceInMeter(i))),r},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let i=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(i,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(i,r){return this._map.project(i).distanceTo(this._map.project(r))},_getMinDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,i)},_getMaxDistanceInMeter(i){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,i)},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),ui.Circle=ui.CircleMarker.extend({_shape:"Circle",initialize(i){this._layer=i,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(i){L.PM.Edit.CircleMarker.prototype.enable.call(this,i||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let i=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(i,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let i=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!i).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!i),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(i,r){return this._map.distance(i,r)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(i){i.target._dragging||this._fireVertexClick(i,void 0)}}),ui.ImageOverlay=ui.extend({_shape:"ImageOverlay",initialize(i){this._layer=i,this._enabled=!1},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},enabled(){return this._enabled},enable(i={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,i),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let i=this._layer.getBounds(),r=i.getNorthWest(),a=i.getNorthEast(),u=i.getSouthEast(),d=i.getSouthWest();return[r,a,u,d]}}),ui.Text=ui.extend({_shape:"Text",initialize(i){this._layer=i,this._enabled=!1},enable(i){if(L.Util.setOptions(this,i),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let i=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),i.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(i){this.enabled()?this.disable():this.enable(i)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let i=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,i.off("pm:drag",this._handleSnapping,this),i.on("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.on("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this),i.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let i=this._layer;i.off("pm:drag",this._handleSnapping,this),i.off("pm:dragend",this._cleanupSnapping,this),i.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let i=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,r=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${i}px`,this.textArea.style.width=`${r}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(i){i.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(i={}){let r=this._hasFocus;this._hasFocus=i.type==="focus",!r!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(i){i&&(this.textArea.value=i),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let r=this.options.className.split(" ");this.textArea.classList.add(...r)}let i=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(i),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(i=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),i===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(i){i.preventDefault()}});var Lu=function(i,r,a,u,d,g){this._matrix=[i,r,a,u,d,g]};Lu.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Lu.prototype={transform(i){return this._transform(i.clone())},_transform(i){let r=this._matrix,{x:a,y:u}=i;return i.x=r[0]*a+r[1]*u+r[4],i.y=r[2]*a+r[3]*u+r[5],i},untransform(i){let r=this._matrix;return new L.Point((i.x/r[0]-r[4])/r[0],(i.y/r[2]-r[5])/r[2])},clone(){let i=this._matrix;return new L.PM.Matrix(i[0],i[1],i[2],i[3],i[4],i[5])},translate(i){if(i===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let r,a;return typeof i=="number"?(r=i,a=i):(r=i.x,a=i.y),this._add(1,0,0,1,r,a)},scale(i,r){if(i===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let a,u;return r=r||L.point(0,0),typeof i=="number"?(a=i,u=i):(a=i.x,u=i.y),this._add(a,0,0,u,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},rotate(i,r){let a=Math.cos(i),u=Math.sin(i);return r=r||new L.Point(0,0),this._add(a,u,-u,a,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(i,r,a,u,d,g){let _=[[],[],[]],b=this._matrix,w=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],P=[[i,a,d],[r,u,g],[0,0,1]],U;i&&i instanceof L.PM.Matrix&&(b=i._matrix,P=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(let I=0;I<3;I+=1)for(let nt=0;nt<3;nt+=1){U=0;for(let st=0;st<3;st+=1)U+=w[I][st]*P[st][nt];_[I][nt]=U}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};var Xp=Lu,Qp={calcMiddleLatLng(i,r,a){let u=i.project(r),d=i.project(a);return i.unproject(u._add(d)._divideBy(2))},findLayers(i){let r=[];return i.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&r.push(a)}),r=r.filter(a=>!!a.pm),r=r.filter(a=>!a._pmTempLayer),r=r.filter(a=>!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1),r},circleToPolygon(i,r=60,a=!0){let u=i.getLatLng(),d=i.getRadius(),g=ts(u,d,r,0,a),_=[];for(let b=0;b<g.length;b+=1){let w=[g[b].lat,g[b].lng];_.push(w)}return L.polygon(_,i.options)},disablePopup(i){i.getPopup()&&(i._tempPopupCopy=i.getPopup(),i.unbindPopup())},enablePopup(i){i._tempPopupCopy&&(i.bindPopup(i._tempPopupCopy),delete i._tempPopupCopy)},_fireEvent(i,r,a,u=!1){i.fire(r,a,u);let{groups:d}=this.getAllParentGroups(i);d.forEach(g=>{g.fire(r,a,u)})},getAllParentGroups(i){let r=[],a=[],u=d=>{for(let g in d._eventParents)if(r.indexOf(g)===-1){r.push(g);let _=d._eventParents[g];a.push(_),u(_)}};return!i._pmLastGroupFetch||!i._pmLastGroupFetch.time||new Date().getTime()-i._pmLastGroupFetch.time>1e3?(u(i),i._pmLastGroupFetch={time:new Date().getTime(),groups:a,groupIds:r},{groupIds:r,groups:a}):{groups:i._pmLastGroupFetch.groups,groupIds:i._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ts,getTranslation:oe,findDeepCoordIndex(i,r,a=!0){let u,d=_=>(b,w)=>{let P=_.concat(w);if(a){if(b.lat&&b.lat===r.lat&&b.lng===r.lng)return u=P,!0}else if(b.lat&&L.latLng(b).equals(r))return u=P,!0;return Array.isArray(b)&&b.some(d(P))};i.some(d([]));let g={};return u&&(g={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),g},findDeepMarkerIndex(i,r){let a,u=g=>(_,b)=>{let w=g.concat(b);return _._leaflet_id===r._leaflet_id?(a=w,!0):Array.isArray(_)&&_.some(u(w))};i.some(u([]));let d={};return a&&(d={indexPath:a,index:a[a.length-1],parentPath:a.slice(0,a.length-1)}),d},_getIndexFromSegment(i,r){if(r&&r.length===2){let a=this.findDeepCoordIndex(i,r[0]),u=this.findDeepCoordIndex(i,r[1]),d=Math.max(a.index,u.index);return(a.index===0||u.index===0)&&d!==1&&(d+=1),{indexA:a,indexB:u,newIndex:d,indexPath:a.indexPath,parentPath:a.parentPath}}return null},_getRotatedRectangle(i,r,a,u){let d=bs(u,i),g=bs(u,r),_=a*Math.PI/180,b=Math.cos(_),w=Math.sin(_),P=(g.x-d.x)*b+(g.y-d.y)*w,U=(g.y-d.y)*b-(g.x-d.x)*w,I=P*b+d.x,nt=P*w+d.y,st=-U*w+d.x,Lt=U*b+d.y,It=Ra(u,d),Gt=Ra(u,{x:I,y:nt}),be=Ra(u,g),N=Ra(u,{x:st,y:Lt});return[It,Gt,be,N]},pxRadiusToMeterRadius(i,r,a){let u=r.project(a),d=L.point(u.x+i,u.y);return r.distance(r.unproject(d),a)}},tm=Qp;L.PM=L.PM||{version:Gs.version,Map:_a,Toolbar:to,Draw:ni,Edit:ui,Utils:tm,Matrix:Xp,activeLang:"en",optIn:!1,initialize(i){this.addInitHooks(i)},setOptIn(i){this.optIn=!!i},addInitHooks(){function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(i);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(r);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(a);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(u);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(_);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(b);function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(w)},reInitLayer(i){i instanceof L.LayerGroup&&i.eachLayer(r=>{this.reInitLayer(r)}),i.pm||L.PM.optIn&&i.options.pmIgnore!==!1||i.options.pmIgnore||(i instanceof L.Map?i.pm=new L.PM.Map(i):i instanceof L.Marker?i.options.textMarker?(i.pm=new L.PM.Edit.Text(i),i.pm._initTextMarker(),i.pm._createTextMarker(!1)):i.pm=new L.PM.Edit.Marker(i):i instanceof L.Circle?i.pm=new L.PM.Edit.Circle(i):i instanceof L.CircleMarker?i.pm=new L.PM.Edit.CircleMarker(i):i instanceof L.Rectangle?i.pm=new L.PM.Edit.Rectangle(i):i instanceof L.Polygon?i.pm=new L.PM.Edit.Polygon(i):i instanceof L.Polyline?i.pm=new L.PM.Edit.Line(i):i instanceof L.LayerGroup?i.pm=new L.PM.Edit.LayerGroup(i):i instanceof L.ImageOverlay&&(i.pm=new L.PM.Edit.ImageOverlay(i)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(i){let r=this._map.mouseEventToLayerPoint(i),a,u;for(let d=this._drawFirst;d;d=d.next)a=d.layer,a.options.interactive&&a._containsPoint(r)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);u&&(L.DomEvent.fakeStop(i),this._fireEvent([u],i))}}),L.PM.initialize()})();function o1(){const t=ie(null),n=ie(null),o=E=>`${(E*100).toFixed(1)}%`,l=E=>`${E.toFixed(1)}`,c=E=>{if("getLatLngs"in E){const O=E.getLatLngs(),z=Lp([O[0].map(K=>[K.lng,K.lat])]);return Ep(z)}return 0},p=E=>{if("getLatLngs"in E){const O=E.getLatLngs();if(Array.isArray(O)){const z=Vo(O.map(K=>[K.lng,K.lat]));return ul(z,{units:"meters"})}}return 0},f=E=>{if("getLatLngs"in E){const O=E.getLatLngs(),z=Vo([...O[0].map(K=>[K.lng,K.lat]),[O[0][0].lng,O[0][0].lat]]);return ul(z,{units:"meters"})}return 0},y=E=>E._mRadius?E._mRadius:0,v=(E,O)=>{const z={type:O,style:E.options};switch(O){case"Circle":case"Semicircle":z.radius=y(E),z.area=Math.PI*Math.pow(z.radius,2),z.center=E.getLatLng(),O==="Semicircle"&&(z.area/=2,z.startAngle=E.options.startAngle,z.stopAngle=E.options.stopAngle);break;case"Rectangle":case"Polygon":z.area=c(E),z.perimeter=f(E);break;case"Line":case"Polyline":if(z.length=p(E),E.elevation){const K=E.elevation.gain,q=z.length;z.slope=K/q}break}return z},M=E=>{t.value=E,E?n.value=v(E.layer,E.type):n.value=null},k=Te(()=>{if(!n.value)return null;const E={...n.value};return E.area&&(E.areaFormatted=`${(E.area/1e4).toFixed(2)} ha`),E.length&&(E.lengthFormatted=`${E.length.toFixed(1)} m`),E.perimeter&&(E.perimeterFormatted=`${E.perimeter.toFixed(1)} m`),E.radius&&(E.radiusFormatted=`${E.radius.toFixed(1)} m`),E.slope&&(E.slopeFormatted=o(E.slope)),E.startAngle&&(E.startAngleFormatted=l(E.startAngle)),E.stopAngle&&(E.stopAngleFormatted=l(E.stopAngle)),E});return{selectedShape:t,shapeProperties:n,formattedProperties:k,updateSelectedShape:M,calculateProperties:v}}const yd=100;function a1(){const t=ie(!1),n=ie(null),o=p=>{if(p.length<=yd)return p;const f=Math.ceil(p.length/yd);return p.filter((y,v)=>v%f===0)},l=async(p,f=!0)=>{t.value=!0,n.value=null;try{const y=f?o(p):p;console.log("Points  envoyer:",y);const v={points:y.map(k=>({latitude:k.lat,longitude:k.lng}))};return console.log("Payload complet:",v),(await le.post("/elevation/",v)).data.results.map(k=>({lat:k.latitude,lng:k.longitude,elevation:k.elevation}))}catch(y){throw console.error("Erreur lors de la rcupration des donnes d'lvation:",y),n.value="Le service d'lvation est temporairement indisponible. Ressayez plus tard.",y}finally{t.value=!1}};return{loading:t,error:n,fetchElevation:l,calculateElevationProfile:async p=>{const f=await l(p);let y=1/0,v=-1/0,M=0,k=0;f.forEach((X,ht)=>{const gt=X.elevation||0;if(y=Math.min(y,gt),v=Math.max(v,gt),ht>0){const pt=f[ht-1].elevation||0,wt=gt-pt;wt>0?M+=wt:k+=Math.abs(wt)}});const E=f[0],z=(f[f.length-1].elevation||0)-(E.elevation||0),K=p.length,q=K>0?z/K:0;return{profile:f,stats:{minElevation:y,maxElevation:v,totalAscent:M,totalDescent:k,averageSlope:q}}}}}class hl extends Ge.Polygon{constructor(o,l,c,p=0,f=180,y=64){const v=hl.calculateArcPoints(o,l,c,p,f,y);super([v]);Zt(this,"center");Zt(this,"radius");Zt(this,"startAngle");Zt(this,"stopAngle");Zt(this,"numPoints");Zt(this,"map");this.map=o,this.center=l,this.radius=c,this.startAngle=p,this.stopAngle=f,this.numPoints=y}static calculateArcPoints(o,l,c,p,f,y){const v=[],M=f-p;v.push(l);const k=o.latLngToLayerPoint(l);for(let E=0;E<=y;E++){const z=(p+M*E/y)*Math.PI/180,K=k.x+c*Math.cos(z),q=k.y+c*Math.sin(z),X=o.layerPointToLatLng(new Ge.Point(K,q));v.push(X)}return v.push(l),v}setRadius(o){return this.radius=o,this.updateGeometry(),this}setAngles(o,l){return this.startAngle=(o%360+360)%360,this.stopAngle=(l%360+360)%360,this.stopAngle<=this.startAngle&&(this.stopAngle+=360),this.updateGeometry(),this}setOpeningAngle(o){const l=Math.max(0,Math.min(360,o));return this.stopAngle=this.startAngle+l,this.updateGeometry(),this}setCenter(o){return this.center=o,this.updateGeometry(),this}getCenter(){return this.center}getRadius(){return this.radius}getStartAngle(){return this.startAngle}getStopAngle(){return this.stopAngle}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this.map)return;const o=hl.calculateArcPoints(this.map,this.center,this.radius,this.startAngle,this.stopAngle,this.numPoints);this.setLatLngs([o])}}function l1(){const t=ie(null),n=ie(null),o=ie(""),l=ie(null),c=ie(!1),{calculateProperties:p}=o1(),{fetchElevation:f}=a1(),y=(O,z,K)=>(t.value=Ge.map(O).setView(z,K),Ge.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(t.value),n.value=new Ge.FeatureGroup().addTo(t.value),t.value.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),t.value.on("pm:drawstart",()=>{c.value=!0}),t.value.on("pm:drawend",()=>{c.value=!1}),t.value.on("pm:create",async q=>{var gt;const X=q.layer;(gt=n.value)==null||gt.addLayer(X),X.properties={style:{fillColor:"#3B82F6",fillOpacity:.2,color:"#2563EB",weight:2}};const ht=p(X);X.properties={...X.properties,...ht};try{const pt=E(X),wt=await f(pt);X.properties.elevation=wt}catch(pt){console.error("Erreur lors de la rcupration des donnes d'lvation:",pt)}l.value=X}),t.value.on("click",q=>{q.target===t.value&&(l.value=null)}),n.value.on("click",q=>{Ge.DomEvent.stopPropagation(q);const X=q.layer;l.value=X}),t.value.on("pm:edit",q=>{const X=q.layer;if(X){const ht=p(X);X.properties={...X.properties,...ht},X===l.value&&(l.value={...X})}}),t.value),v=O=>{var z;if(t.value)switch(t.value.pm.disableDraw(),t.value.pm.disableGlobalEditMode(),t.value.pm.disableGlobalDragMode(),t.value.pm.disableGlobalRemovalMode(),o.value=O,O){case"Circle":t.value.pm.enableDraw("Circle");break;case"Semicircle":let K=null,q=0,X=null,ht=0,gt=180;t.value.pm.disableDraw();const pt=Ge.DomUtil.create("div","drawing-help-message");pt.innerHTML="Cliquez pour placer le centre du demi-cercle",document.body.appendChild(pt);const wt=Pt=>{var Ct,Rt;K=Pt.latlng,X=new hl(t.value,K,0,0,180),X.addTo(t.value),pt.innerHTML="Dplacez la souris pour dfinir le rayon, cliquez pour valider";const Et=Ot=>{K&&X&&(q=K.distanceTo(Ot.latlng),X.setRadius(q))},Ht=Ot=>{var De,_t,ot,$t;pt.innerHTML="Dplacez la souris pour orienter le demi-cercle, cliquez pour valider",(De=t.value)==null||De.off("mousemove",Et),(_t=t.value)==null||_t.off("click",Ht);const ge=At=>{K&&X&&(ht=Math.atan2(At.latlng.lat-K.lat,At.latlng.lng-K.lng)*(180/Math.PI),X.setAngles(ht,ht+gt))},$e=At=>{var Bt,Ee,ve,fe;pt.innerHTML="Dplacez la souris pour ajuster l'angle d'ouverture, cliquez pour terminer",(Bt=t.value)==null||Bt.off("mousemove",ge),(Ee=t.value)==null||Ee.off("click",$e);const Ve=At.latlng,jt=Kt=>{if(K&&X){const dt=Math.atan2(Ve.lat-K.lat,Ve.lng-K.lng)*(180/Math.PI),Dt=Math.atan2(Kt.latlng.lat-K.lat,Kt.latlng.lng-K.lng)*(180/Math.PI);gt=Math.abs(Dt-dt),gt>360&&(gt=360),X.setAngles(ht,ht+gt)}},se=()=>{var Kt,dt,Dt,Tt;(Kt=t.value)==null||Kt.off("mousemove",jt),(dt=t.value)==null||dt.off("click",se),(Dt=document.querySelector(".drawing-help-message"))==null||Dt.remove(),X&&(X.properties={type:"Semicircle",radius:q,orientation:ht,openingAngle:gt,style:{fillColor:"#3B82F6",fillOpacity:.2,color:"#2563EB",weight:2,startAngle:ht,stopAngle:ht+gt}},(Tt=t.value)==null||Tt.fire("pm:create",{layer:X,shape:"Semicircle",workingLayer:X}))};(ve=t.value)==null||ve.on("mousemove",jt),(fe=t.value)==null||fe.once("click",se)};(ot=t.value)==null||ot.on("mousemove",ge),($t=t.value)==null||$t.once("click",$e)};(Ct=t.value)==null||Ct.on("mousemove",Et),(Rt=t.value)==null||Rt.once("click",Ht)};(z=t.value)==null||z.once("click",wt);break;case"Rectangle":t.value.pm.enableDraw("Rectangle");break;case"Polygon":t.value.pm.enableDraw("Polygon");break;case"Line":t.value.pm.enableDraw("Line");break;case"Text":t.value.pm.disableDraw(),t.value.dragging.disable();const ut=Ge.DomUtil.create("div","drawing-help-message");ut.innerHTML="Cliquez sur la carte pour placer le texte",document.body.appendChild(ut),t.value.once("click",Pt=>{var Ht;const Et=Ge.marker(Pt.latlng,{icon:Ge.divIcon({html:'<div class="text-annotation">Nouveau texte</div>',className:""}),draggable:!0});Et.properties={type:"text",text:"Nouveau texte",style:{fontSize:"14px",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderOpacity:1,padding:"5px 10px",borderRadius:"3px"}},Et.addTo(t.value),t.value.fire("pm:create",{layer:Et,shape:"Text",workingLayer:Et}),t.value.dragging.enable(),(Ht=document.querySelector(".drawing-help-message"))==null||Ht.remove()});break;case"edit":t.value.pm.enableGlobalEditMode();break;case"drag":t.value.pm.enableGlobalDragMode();break;case"delete":t.value.pm.enableGlobalRemovalMode();break}},M=O=>{if(!l.value)return;const z=l.value;z.properties=z.properties||{},z.properties.style=z.properties.style||{},z.properties.style={...z.properties.style,...O};const K={};O.fillColor&&(K.fillColor=O.fillColor),O.fillOpacity!==void 0&&(K.fillOpacity=O.fillOpacity),O.strokeColor&&(K.color=O.strokeColor),O.strokeOpacity!==void 0&&(K.opacity=O.strokeOpacity),O.strokeWidth!==void 0&&(K.weight=O.strokeWidth),O.dashArray&&(K.dashArray=O.dashArray),z.setStyle(K)},k=O=>{if(!l.value)return;const z=l.value;z.properties={...z.properties,...O},O.radius&&z instanceof Ge.Circle&&z.setRadius(O.radius)},E=O=>O instanceof Ge.Circle?[O.getLatLng()]:O instanceof Ge.Polygon?O.getLatLngs()[0]:O instanceof Ge.Polyline?O.getLatLngs():[];return Sh(()=>{t.value&&(t.value.remove(),t.value=null)}),{map:t,featureGroup:n,currentTool:o,selectedShape:l,isDrawing:c,initMap:y,setDrawingTool:v,updateShapeStyle:M,updateShapeProperties:k}}function u1(){const t=ie(null),n=ie("");return Wa.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}),Wa.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri"}),Wa.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:" OpenTopoMap contributors"}),{map:t,searchQuery:n,initMap:c=>{t.value=c},searchLocation:async()=>{if(!(!t.value||!n.value))try{const p=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(n.value)}`)).json();if(p&&p.length>0){const{lat:f,lon:y}=p[0];t.value.setView([f,y],13)}}catch(c){console.error("Erreur lors de la recherche de localisation:",c)}}}}const Pp="http://localhost:8000/api",pr=le.create({baseURL:Pp,headers:{"Content-Type":"application/json"}});pr.interceptors.request.use(t=>{const n=localStorage.getItem("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),t},t=>Promise.reject(t));pr.interceptors.response.use(t=>t,async t=>{const n=t.config;if(t.response.status===401&&!n._retry){n._retry=!0;try{const o=localStorage.getItem("refresh_token"),l=await le.post(`${Pp}/token/refresh/`,{refresh:o}),{access:c}=l.data;return localStorage.setItem("access_token",c),n.headers.Authorization=`Bearer ${c}`,pr(n)}catch{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login"}}return Promise.reject(t)});const h1=Tf("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>n=>t.plans.find(o=>o.id===n),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,o;const t=Jn();this.loading=!0;try{let l="/plans/";t.isConcessionnaire?l+="?concessionnaire="+((n=t.user)==null?void 0:n.id):t.isUtilisateur&&(l+="?utilisateur="+((o=t.user)==null?void 0:o.id));const c=await pr.get(l);this.plans=c.data}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async createPlan(t){this.loading=!0;try{const n=await pr.post("/plans/",t);return this.plans.push(n.data),n.data}catch(n){throw this.error="Erreur lors de la cration du plan",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var n,o;if(this.unsavedChanges){this.loading=!0;try{const l=await pr.patch(`/plans/${t}/`,{...this.currentPlan,version:((n=this.currentPlan)==null?void 0:n.version)||1}),c=this.plans.findIndex(p=>p.id===t);return c!==-1&&(this.plans[c]=l.data),((o=this.currentPlan)==null?void 0:o.id)===t&&(this.currentPlan=l.data),this.unsavedChanges=!1,l.data}catch(l){throw this.error="Erreur lors de la sauvegarde du plan",l}finally{this.loading=!1}}},async fetchPlanHistory(t){this.loading=!0;try{const n=await pr.get(`/plans/${t}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la rcupration de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(t,n){var o;this.loading=!0;try{const l=await pr.post(`/plans/${t}/restaurer/`,{version_id:n});((o=this.currentPlan)==null?void 0:o.id)===t&&(this.currentPlan=l.data);const c=this.plans.findIndex(p=>p.id===t);return c!==-1&&(this.plans[c]=l.data),l.data}catch(l){throw this.error="Erreur lors de la restauration de la version",l}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0}}}),c1={class:"h-full flex overflow-hidden"},d1={class:"flex-1 relative overflow-hidden"},f1={class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},vd=dn({__name:"MapView",setup(t){const n=ie(null);h1(),ie([]),ie(null);const o=ie({});ie({mousedown:null,mousemove:null,mouseup:null});const{currentTool:l,selectedShape:c,initMap:p,setDrawingTool:f,updateShapeStyle:y,updateShapeProperties:v}=l1(),{initMap:M}=u1();Ds(()=>{if(n.value){const E=[46.603354,1.888334],z=p(n.value,E,6);z&&M(z)}}),ie({rectangle:0,circle:0,semicircle:0,line:0}),_r(()=>o.value,E=>{k()},{deep:!0});function k(){console.log("Updating drawing style:",o.value)}return(E,O)=>(qt(),Qt("div",c1,[F("div",d1,[F("div",{ref_key:"mapContainer",ref:n,class:"absolute inset-0 w-full h-full"},null,512),F("div",f1,[si(s1,{"current-tool":Ti(l),"selected-shape":Ti(c),onToolChange:Ti(f),onStyleUpdate:Ti(y),onPropertiesUpdate:Ti(v)},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate","onPropertiesUpdate"])])])]))}}),p1={class:"fixed inset-0 z-50 overflow-y-auto"},m1={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},g1={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},_1={class:"mt-3 text-center sm:mt-0 sm:text-left"},y1={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},v1={class:"mt-4"},b1={class:"grid grid-cols-2 gap-4"},x1=["disabled"],w1={key:0,class:"mt-1 text-sm text-gray-500"},L1={class:"grid grid-cols-2 gap-4"},C1=["disabled"],k1={key:0,value:"ADMIN"},E1={key:0},M1=["value"],P1={key:0},B1={class:"grid grid-cols-2 gap-4"},S1={key:1,class:"rounded-md bg-red-50 p-4"},A1={class:"flex"},T1={class:"ml-3"},D1={class:"text-sm font-medium text-red-800"},R1={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},O1=["disabled"],I1={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},F1=dn({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]}},emits:["close","save"],setup(t,{emit:n}){var z,K,q,X,ht,gt,pt;const o=t,l=n,c=Jn(),p=ie(!1),f=ie(null),y=Te(()=>c.isAdmin),v=Te(()=>c.isDealer),M=Kn({first_name:((z=o.user)==null?void 0:z.first_name)||"",last_name:((K=o.user)==null?void 0:K.last_name)||"",email:((q=o.user)==null?void 0:q.email)||"",username:((X=o.user)==null?void 0:X.username)||"",company_name:((ht=o.user)==null?void 0:ht.company_name)||"",role:((gt=o.user)==null?void 0:gt.role)||(y.value?"ADMIN":"UTILISATEUR"),dealer:((pt=o.user)==null?void 0:pt.dealer)||"",password:"",password_confirm:""}),k=Te(()=>M.role==="UTILISATEUR"&&(y.value||v.value)),E=Te(()=>y.value?!0:v.value?!o.user||o.user.role==="UTILISATEUR":!1);async function O(){var wt,ut,Pt;f.value=null,p.value=!0;try{if(!o.user){if(M.password!==M.password_confirm)throw new Error("Les mots de passe ne correspondent pas");if(M.password.length<8)throw new Error("Le mot de passe doit contenir au moins 8 caractres")}const Et={...M};if(o.user){if(delete Et.password,delete Et.password_confirm,delete Et.username,Et.id=o.user.id,Et.role==="ADMIN"||Et.role==="CONCESSIONNAIRE")delete Et.dealer;else if(Et.role==="UTILISATEUR"){if(!Et.dealer)throw new Error("Un concessionnaire doit tre slectionn pour un client");Et.concessionnaire=Et.dealer,delete Et.dealer}}else if(Et.must_change_password=!0,Et.role==="ADMIN"||Et.role==="CONCESSIONNAIRE")delete Et.dealer;else if(Et.role==="UTILISATEUR"){if(!Et.dealer)throw new Error("Un concessionnaire doit tre slectionn pour un client");Et.concessionnaire=Et.dealer,delete Et.dealer}v.value&&Et.role==="UTILISATEUR"&&(Et.role="UTILISATEUR",Et.concessionnaire=(wt=c.user)==null?void 0:wt.id),console.log("Donnes envoyes:",Et),await l("save",Et)}catch(Et){f.value=((Pt=(ut=Et.response)==null?void 0:ut.data)==null?void 0:Pt.detail)||Et.message||"Une erreur est survenue"}finally{p.value=!1}}return(wt,ut)=>(qt(),Qt("div",p1,[F("div",m1,[ut[25]||(ut[25]=F("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[F("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),ut[26]||(ut[26]=F("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),F("div",g1,[F("div",null,[F("div",_1,[F("h3",y1,ce(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),F("div",v1,[F("form",{onSubmit:Dh(O,["prevent"]),class:"space-y-4"},[F("div",b1,[F("div",null,[ut[10]||(ut[10]=F("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),ke(F("input",{type:"text",id:"first_name","onUpdate:modelValue":ut[0]||(ut[0]=Pt=>M.first_name=Pt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Fe,M.first_name]])]),F("div",null,[ut[11]||(ut[11]=F("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),ke(F("input",{type:"text",id:"last_name","onUpdate:modelValue":ut[1]||(ut[1]=Pt=>M.last_name=Pt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Fe,M.last_name]])])]),F("div",null,[ut[12]||(ut[12]=F("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),ke(F("input",{type:"email",id:"email","onUpdate:modelValue":ut[2]||(ut[2]=Pt=>M.email=Pt),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Fe,M.email]])]),F("div",null,[ut[13]||(ut[13]=F("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),ke(F("input",{type:"text",id:"username","onUpdate:modelValue":ut[3]||(ut[3]=Pt=>M.username=Pt),required:"",disabled:!!o.user,class:yr(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!o.user}])},null,10,x1),[[Fe,M.username]]),o.user?(qt(),Qt("p",w1," Le nom d'utilisateur ne peut pas tre modifi aprs la cration. ")):Ae("",!0)]),F("div",null,[ut[14]||(ut[14]=F("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),ke(F("input",{type:"text",id:"company_name","onUpdate:modelValue":ut[4]||(ut[4]=Pt=>M.company_name=Pt),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Fe,M.company_name]])]),F("div",L1,[F("div",null,[ut[17]||(ut[17]=F("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),ke(F("select",{id:"role","onUpdate:modelValue":ut[5]||(ut[5]=Pt=>M.role=Pt),required:"",disabled:!E.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[y.value?(qt(),Qt("option",k1,"Admin")):Ae("",!0),ut[15]||(ut[15]=F("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1)),ut[16]||(ut[16]=F("option",{value:"UTILISATEUR"},"Client",-1))],8,C1),[[zo,M.role]])]),k.value?(qt(),Qt("div",E1,[ut[19]||(ut[19]=F("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),ke(F("select",{id:"dealer","onUpdate:modelValue":ut[6]||(ut[6]=Pt=>M.dealer=Pt),required:"",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ut[18]||(ut[18]=F("option",{value:""},"Slectionner un concessionnaire",-1)),(qt(!0),Qt(ri,null,Mn(t.dealers,Pt=>(qt(),Qt("option",{key:Pt.id,value:Pt.id},ce(Pt.company_name||Pt.full_name),9,M1))),128))],512),[[zo,M.dealer]])])):Ae("",!0)]),t.user?Ae("",!0):(qt(),Qt("div",P1,[F("div",B1,[F("div",null,[ut[20]||(ut[20]=F("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),ke(F("input",{type:"password",id:"password","onUpdate:modelValue":ut[7]||(ut[7]=Pt=>M.password=Pt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Fe,M.password]])]),F("div",null,[ut[21]||(ut[21]=F("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),ke(F("input",{type:"password",id:"password_confirm","onUpdate:modelValue":ut[8]||(ut[8]=Pt=>M.password_confirm=Pt),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Fe,M.password_confirm]])])]),ut[22]||(ut[22]=F("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe  sa premire connexion. ",-1))])),f.value?(qt(),Qt("div",S1,[F("div",A1,[ut[23]||(ut[23]=F("div",{class:"flex-shrink-0"},[F("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[F("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),F("div",T1,[F("h3",D1,ce(f.value),1)])])])):Ae("",!0),F("div",R1,[F("button",{type:"submit",disabled:p.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(qt(),Qt("svg",I1,ut[24]||(ut[24]=[F("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),F("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Ae("",!0),hn(" "+ce(p.value?"Enregistrement...":"Enregistrer"),1)],8,O1),F("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:ut[9]||(ut[9]=Pt=>wt.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),N1={class:"fixed inset-0 z-50 overflow-y-auto"},z1={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},j1={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},U1={class:"sm:flex sm:items-start"},G1={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},$1={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},V1={class:"mt-2"},H1={class:"text-sm text-gray-500"},Z1={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},q1=dn({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(n,o)=>(qt(),Qt("div",N1,[F("div",z1,[o[3]||(o[3]=F("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[F("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),o[4]||(o[4]=F("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),F("div",j1,[F("div",U1,[o[2]||(o[2]=F("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[F("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[F("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),F("div",G1,[F("h3",$1,ce(t.title),1),F("div",V1,[F("p",H1,ce(t.message),1)])])]),F("div",Z1,[F("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:o[0]||(o[0]=l=>n.$emit("confirm"))}," Confirmer "),F("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:o[1]||(o[1]=l=>n.$emit("cancel"))}," Annuler ")])])])]))}}),K1={class:"min-h-screen bg-gray-50 py-8"},W1={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},J1={class:"bg-white shadow rounded-lg mb-6 p-4"},Y1={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},X1={key:0},Q1=["value"],t3={class:"bg-white shadow rounded-lg"},e3={class:"overflow-x-auto"},i3={class:"min-w-full divide-y divide-gray-200"},n3={class:"bg-white divide-y divide-gray-200"},r3={class:"px-6 py-4 whitespace-nowrap"},s3={class:"flex items-center"},o3={class:"flex-shrink-0 h-10 w-10"},a3={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},l3={class:"text-primary-600 font-medium"},u3={class:"ml-4"},h3={class:"text-sm font-medium text-gray-900"},c3={class:"text-sm text-gray-500"},d3={class:"px-6 py-4 whitespace-nowrap"},f3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},p3={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},m3={class:"px-6 py-4 whitespace-nowrap"},g3={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},_3=["onClick"],y3=["onClick"],v3=dn({__name:"UserListView",setup(t){const n=Jn(),o=ie([]),l=ie([]),c=ie(!1),p=ie(!1),f=ie(null),y=ie(null),v=Kn({role:"",search:"",dealer:""}),M=Te(()=>n.isAdmin),k=Te(()=>n.isDealer),E=Te(()=>{let Ct=o.value;if(v.role&&(Ct=Ct.filter(Rt=>Rt.role===v.role)),v.search){const Rt=v.search.toLowerCase();Ct=Ct.filter(Ot=>Ot.username.toLowerCase().includes(Rt)||Ot.email.toLowerCase().includes(Rt)||Ot.first_name.toLowerCase().includes(Rt)||Ot.last_name.toLowerCase().includes(Rt)||Ot.company_name&&Ot.company_name.toLowerCase().includes(Rt))}return v.dealer&&(Ct=Ct.filter(Rt=>Rt.dealer===v.dealer)),Ct});Ds(async()=>{await O(),M.value&&await z()});async function O(){try{const Ct=await le.get("/users/");o.value=Ct.data}catch(Ct){console.error("Erreur lors de la rcupration des utilisateurs:",Ct)}}async function z(){try{const Ct=await le.get("/users/",{params:{role:"CONCESSIONNAIRE"}});l.value=Ct.data}catch(Ct){console.error("Erreur lors de la rcupration des concessionnaires:",Ct)}}function K(){f.value=null,c.value=!0}function q(Ct){f.value={...Ct},c.value=!0}function X(){c.value=!1,f.value=null}async function ht(Ct){try{Ct.id?await le.patch(`/users/${Ct.id}/`,Ct):await le.post("/users/",Ct),await O(),X()}catch(Rt){throw console.error("Erreur lors de la sauvegarde de l'utilisateur:",Rt),Rt}}function gt(Ct){y.value=Ct,p.value=!0}async function pt(){if(y.value)try{await le.delete(`/users/${y.value.id}/`),await O(),p.value=!1,y.value=null}catch(Ct){throw console.error("Erreur lors de la suppression de l'utilisateur:",Ct),Ct}}function wt(Ct,Rt){return`${(Ct==null?void 0:Ct.charAt(0))||""}${(Rt==null?void 0:Rt.charAt(0))||""}`.toUpperCase()}function ut(Ct){return{ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Utilisateur"}[Ct]||Ct}function Pt(Ct){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Et(Ct){return Ct?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function Ht(Ct){var Rt;return M.value?!0:k.value?Ct.role==="CLIENT"&&Ct.dealer===((Rt=n.user)==null?void 0:Rt.id):!1}return(Ct,Rt)=>(qt(),Qt("div",K1,[F("div",W1,[F("div",{class:"flex justify-between items-center mb-8"},[Rt[5]||(Rt[5]=F("h1",{class:"text-3xl font-extrabold text-gray-900"}," Gestion des Utilisateurs ",-1)),F("button",{onClick:K,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},Rt[4]||(Rt[4]=[F("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[F("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),hn(" Nouvel Utilisateur ")]))]),F("div",J1,[F("div",Y1,[F("div",null,[Rt[7]||(Rt[7]=F("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),ke(F("select",{id:"role-filter","onUpdate:modelValue":Rt[0]||(Rt[0]=Ot=>v.role=Ot),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},Rt[6]||(Rt[6]=[F("option",{value:""},"Tous les rles",-1),F("option",{value:"ADMIN"},"Admin",-1),F("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),F("option",{value:"CLIENT"},"Client",-1)]),512),[[zo,v.role]])]),F("div",null,[Rt[8]||(Rt[8]=F("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),ke(F("input",{type:"text",id:"search","onUpdate:modelValue":Rt[1]||(Rt[1]=Ot=>v.search=Ot),placeholder:"Nom, email...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Fe,v.search]])]),M.value?(qt(),Qt("div",X1,[Rt[10]||(Rt[10]=F("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),ke(F("select",{id:"dealer-filter","onUpdate:modelValue":Rt[2]||(Rt[2]=Ot=>v.dealer=Ot),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Rt[9]||(Rt[9]=F("option",{value:""},"Tous les concessionnaires",-1)),(qt(!0),Qt(ri,null,Mn(l.value,Ot=>(qt(),Qt("option",{key:Ot.id,value:Ot.id},ce(Ot.company_name||Ot.full_name),9,Q1))),128))],512),[[zo,v.dealer]])])):Ae("",!0)])]),F("div",t3,[F("div",e3,[F("table",i3,[Rt[11]||(Rt[11]=F("thead",{class:"bg-gray-50"},[F("tr",null,[F("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur "),F("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle "),F("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),F("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Concessionnaire "),F("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut "),F("th",{scope:"col",class:"relative px-6 py-3"},[F("span",{class:"sr-only"},"Actions")])])],-1)),F("tbody",n3,[(qt(!0),Qt(ri,null,Mn(E.value,Ot=>(qt(),Qt("tr",{key:Ot.id},[F("td",r3,[F("div",s3,[F("div",o3,[F("div",a3,[F("span",l3,ce(wt(Ot.first_name,Ot.last_name)),1)])]),F("div",u3,[F("div",h3,ce(Ot.company_name||`${Ot.first_name} ${Ot.last_name}`),1),F("div",c3,ce(Ot.username),1)])])]),F("td",d3,[F("span",{class:yr(Pt(Ot.role))},ce(ut(Ot.role)),3)]),F("td",f3,ce(Ot.email),1),F("td",p3,ce(Ot.dealer_name||"-"),1),F("td",m3,[F("span",{class:yr(Et(Ot.is_active))},ce(Ot.is_active?"Actif":"Inactif"),3)]),F("td",g3,[F("button",{onClick:ge=>q(Ot),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,_3),Ht(Ot)?(qt(),Qt("button",{key:0,onClick:ge=>gt(Ot),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,y3)):Ae("",!0)])]))),128))])])])])]),c.value?(qt(),Fo(F1,{key:0,user:f.value,dealers:l.value,onClose:X,onSave:ht},null,8,["user","dealers"])):Ae("",!0),p.value?(qt(),Fo(q1,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:pt,onCancel:Rt[3]||(Rt[3]=Ot=>p.value=!1)})):Ae("",!0)]))}}),Bp=hv({history:Uy("/"),routes:[{path:"/",name:"home",component:vd,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/projects",name:"projects",component:()=>Fr(()=>import("./ProjectsView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:v3,meta:{requiresAuth:!0,allowedRoles:["admin","dealer"]}},{path:"/profile",name:"profile",component:()=>Fr(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/settings",name:"settings",component:()=>Fr(()=>import("./SettingsView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/select-dealer",name:"selectDealer",component:()=>Fr(()=>import("./SelectDealerView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["client"]}},{path:"/login",name:"login",component:mb,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Fr(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Fr(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:tb,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:vd,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Fr(()=>import("./NotFoundView.js"),[])}]});Bp.beforeEach(async(t,n,o)=>{var v,M;const l=Jn();if(console.log("Route:",t.path,"Auth state:",{initialized:l.initialized,isAuthenticated:l.isAuthenticated,user:l.user}),!l.initialized)try{await l.initialize(window.INITIAL_STATE)}catch(k){console.error("Error initializing auth store:",k)}const c=l.isAuthenticated,p=(v=l.user)==null?void 0:v.must_change_password,f=(M=l.user)==null?void 0:M.user_type,y=l.hasDealer;if(t.meta.requiresAuth&&!c){o("/login");return}if(c&&p&&t.name!=="changePassword"){o({name:"changePassword"});return}if(t.name==="changePassword"&&!p){o({name:"home"});return}if(t.meta.allowedRoles&&f&&!t.meta.allowedRoles.includes(f)){o({name:"home"});return}if(c&&f==="client"&&!y&&t.name!=="selectDealer"){o({name:"selectDealer"});return}if(t.meta.requiresGuest&&c){o({name:"home"});return}if(t.path==="/login"&&c){o("/");return}o()});const jh=kg(T4),Sp=Pg();jh.use(Sp);jh.use(Bp);const b3=Jn(Sp);window.INITIAL_STATE&&b3.initialize(window.INITIAL_STATE);jh.mount("#app");export{ri as F,F as a,Ae as b,Qt as c,dn as d,Mn as e,ke as f,zh as g,qt as h,Jn as i,Kn as j,zo as k,w3 as l,hn as m,yr as n,Ds as o,si as p,Eo as q,ie as r,l0 as s,ce as t,h1 as u,Fe as v,Dh as w,U3 as x};
