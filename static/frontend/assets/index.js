var bm=Object.defineProperty;var xm=(e,i,s)=>i in e?bm(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s;var lt=(e,i,s)=>xm(e,typeof i!="symbol"?i+"":i,s);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const p of h)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function s(h){const p={};return h.integrity&&(p.integrity=h.integrity),h.referrerPolicy&&(p.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?p.credentials="include":h.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(h){if(h.ep)return;h.ep=!0;const p=s(h);fetch(h.href,p)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Bc(e){const i=Object.create(null);for(const s of e.split(","))i[s]=1;return s=>s in i}const Gt={},Is=[],Ii=()=>{},wm=()=>!1,xl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ac=e=>e.startsWith("onUpdate:"),Bn=Object.assign,Tc=(e,i)=>{const s=e.indexOf(i);s>-1&&e.splice(s,1)},Lm=Object.prototype.hasOwnProperty,zt=(e,i)=>Lm.call(e,i),pt=Array.isArray,Fs=e=>ea(e)==="[object Map]",Vs=e=>ea(e)==="[object Set]",ch=e=>ea(e)==="[object Date]",wt=e=>typeof e=="function",un=e=>typeof e=="string",Fi=e=>typeof e=="symbol",qt=e=>e!==null&&typeof e=="object",Od=e=>(qt(e)||wt(e))&&wt(e.then)&&wt(e.catch),Id=Object.prototype.toString,ea=e=>Id.call(e),Cm=e=>ea(e).slice(8,-1),Fd=e=>ea(e)==="[object Object]",Dc=e=>un(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Io=Bc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),wl=e=>{const i=Object.create(null);return s=>i[s]||(i[s]=e(s))},km=/-(\w)/g,mi=wl(e=>e.replace(km,(i,s)=>s?s.toUpperCase():"")),Em=/\B([A-Z])/g,ts=wl(e=>e.replace(Em,"-$1").toLowerCase()),Ll=wl(e=>e.charAt(0).toUpperCase()+e.slice(1)),Nu=wl(e=>e?`on${Ll(e)}`:""),Lr=(e,i)=>!Object.is(e,i),Ja=(e,...i)=>{for(let s=0;s<e.length;s++)e[s](...i)},Nd=(e,i,s,l=!1)=>{Object.defineProperty(e,i,{configurable:!0,enumerable:!1,writable:l,value:s})},sl=e=>{const i=parseFloat(e);return isNaN(i)?e:i};let hh;const Cl=()=>hh||(hh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kl(e){if(pt(e)){const i={};for(let s=0;s<e.length;s++){const l=e[s],h=un(l)?Bm(l):kl(l);if(h)for(const p in h)i[p]=h[p]}return i}else if(un(e)||qt(e))return e}const Mm=/;(?![^(]*\))/g,Pm=/:([^]+)/,Sm=/\/\*[^]*?\*\//g;function Bm(e){const i={};return e.replace(Sm,"").split(Mm).forEach(s=>{if(s){const l=s.split(Pm);l.length>1&&(i[l[0].trim()]=l[1].trim())}}),i}function $n(e){let i="";if(un(e))i=e;else if(pt(e))for(let s=0;s<e.length;s++){const l=$n(e[s]);l&&(i+=l+" ")}else if(qt(e))for(const s in e)e[s]&&(i+=s+" ");return i.trim()}const Am="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Tm=Bc(Am);function zd(e){return!!e||e===""}function Dm(e,i){if(e.length!==i.length)return!1;let s=!0;for(let l=0;s&&l<e.length;l++)s=Xr(e[l],i[l]);return s}function Xr(e,i){if(e===i)return!0;let s=ch(e),l=ch(i);if(s||l)return s&&l?e.getTime()===i.getTime():!1;if(s=Fi(e),l=Fi(i),s||l)return e===i;if(s=pt(e),l=pt(i),s||l)return s&&l?Dm(e,i):!1;if(s=qt(e),l=qt(i),s||l){if(!s||!l)return!1;const h=Object.keys(e).length,p=Object.keys(i).length;if(h!==p)return!1;for(const f in e){const y=e.hasOwnProperty(f),v=i.hasOwnProperty(f);if(y&&!v||!y&&v||!Xr(e[f],i[f]))return!1}}return String(e)===String(i)}function Rc(e,i){return e.findIndex(s=>Xr(s,i))}const $d=e=>!!(e&&e.__v_isRef===!0),Ge=e=>un(e)?e:e==null?"":pt(e)||qt(e)&&(e.toString===Id||!wt(e.toString))?$d(e)?Ge(e.value):JSON.stringify(e,jd,2):String(e),jd=(e,i)=>$d(i)?jd(e,i.value):Fs(i)?{[`Map(${i.size})`]:[...i.entries()].reduce((s,[l,h],p)=>(s[zu(l,p)+" =>"]=h,s),{})}:Vs(i)?{[`Set(${i.size})`]:[...i.values()].map(s=>zu(s))}:Fi(i)?zu(i):qt(i)&&!pt(i)&&!Fd(i)?String(i):i,zu=(e,i="")=>{var s;return Fi(e)?`Symbol(${(s=e.description)!=null?s:i})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nn;class Ud{constructor(i=!1){this.detached=i,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Nn,!i&&Nn&&(this.index=(Nn.scopes||(Nn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let i,s;if(this.scopes)for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].pause();for(i=0,s=this.effects.length;i<s;i++)this.effects[i].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let i,s;if(this.scopes)for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].resume();for(i=0,s=this.effects.length;i<s;i++)this.effects[i].resume()}}run(i){if(this._active){const s=Nn;try{return Nn=this,i()}finally{Nn=s}}}on(){Nn=this}off(){Nn=this.parent}stop(i){if(this._active){this._active=!1;let s,l;for(s=0,l=this.effects.length;s<l;s++)this.effects[s].stop();for(this.effects.length=0,s=0,l=this.cleanups.length;s<l;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,l=this.scopes.length;s<l;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!i){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0}}}function Gd(e){return new Ud(e)}function Vd(){return Nn}function Rm(e,i=!1){Nn&&Nn.cleanups.push(e)}let Zt;const $u=new WeakSet;class Hd{constructor(i){this.fn=i,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Nn&&Nn.active&&Nn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$u.has(this)&&($u.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||qd(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,dh(this),Kd(this);const i=Zt,s=xi;Zt=this,xi=!0;try{return this.fn()}finally{Wd(this),Zt=i,xi=s,this.flags&=-3}}stop(){if(this.flags&1){for(let i=this.deps;i;i=i.nextDep)Fc(i);this.deps=this.depsTail=void 0,dh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$u.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rc(this)&&this.run()}get dirty(){return rc(this)}}let Zd=0,Fo,No;function qd(e,i=!1){if(e.flags|=8,i){e.next=No,No=e;return}e.next=Fo,Fo=e}function Oc(){Zd++}function Ic(){if(--Zd>0)return;if(No){let i=No;for(No=void 0;i;){const s=i.next;i.next=void 0,i.flags&=-9,i=s}}let e;for(;Fo;){let i=Fo;for(Fo=void 0;i;){const s=i.next;if(i.next=void 0,i.flags&=-9,i.flags&1)try{i.trigger()}catch(l){e||(e=l)}i=s}}if(e)throw e}function Kd(e){for(let i=e.deps;i;i=i.nextDep)i.version=-1,i.prevActiveLink=i.dep.activeLink,i.dep.activeLink=i}function Wd(e){let i,s=e.depsTail,l=s;for(;l;){const h=l.prevDep;l.version===-1?(l===s&&(s=h),Fc(l),Om(l)):i=l,l.dep.activeLink=l.prevActiveLink,l.prevActiveLink=void 0,l=h}e.deps=i,e.depsTail=s}function rc(e){for(let i=e.deps;i;i=i.nextDep)if(i.dep.version!==i.version||i.dep.computed&&(Jd(i.dep.computed)||i.dep.version!==i.version))return!0;return!!e._dirty}function Jd(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ho))return;e.globalVersion=Ho;const i=e.dep;if(e.flags|=2,i.version>0&&!e.isSSR&&e.deps&&!rc(e)){e.flags&=-3;return}const s=Zt,l=xi;Zt=e,xi=!0;try{Kd(e);const h=e.fn(e._value);(i.version===0||Lr(h,e._value))&&(e._value=h,i.version++)}catch(h){throw i.version++,h}finally{Zt=s,xi=l,Wd(e),e.flags&=-3}}function Fc(e,i=!1){const{dep:s,prevSub:l,nextSub:h}=e;if(l&&(l.nextSub=h,e.prevSub=void 0),h&&(h.prevSub=l,e.nextSub=void 0),s.subs===e&&(s.subs=l,!l&&s.computed)){s.computed.flags&=-5;for(let p=s.computed.deps;p;p=p.nextDep)Fc(p,!0)}!i&&!--s.sc&&s.map&&s.map.delete(s.key)}function Om(e){const{prevDep:i,nextDep:s}=e;i&&(i.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=i,e.nextDep=void 0)}let xi=!0;const Xd=[];function Er(){Xd.push(xi),xi=!1}function Mr(){const e=Xd.pop();xi=e===void 0?!0:e}function dh(e){const{cleanup:i}=e;if(e.cleanup=void 0,i){const s=Zt;Zt=void 0;try{i()}finally{Zt=s}}}let Ho=0;class Im{constructor(i,s){this.sub=i,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Nc{constructor(i){this.computed=i,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(i){if(!Zt||!xi||Zt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Zt)s=this.activeLink=new Im(Zt,this),Zt.deps?(s.prevDep=Zt.depsTail,Zt.depsTail.nextDep=s,Zt.depsTail=s):Zt.deps=Zt.depsTail=s,Yd(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const l=s.nextDep;l.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=l),s.prevDep=Zt.depsTail,s.nextDep=void 0,Zt.depsTail.nextDep=s,Zt.depsTail=s,Zt.deps===s&&(Zt.deps=l)}return s}trigger(i){this.version++,Ho++,this.notify(i)}notify(i){Oc();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Ic()}}}function Yd(e){if(e.dep.sc++,e.sub.flags&4){const i=e.dep.computed;if(i&&!e.dep.subs){i.flags|=20;for(let l=i.deps;l;l=l.nextDep)Yd(l)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const ol=new WeakMap,Kr=Symbol(""),sc=Symbol(""),Zo=Symbol("");function Mn(e,i,s){if(xi&&Zt){let l=ol.get(e);l||ol.set(e,l=new Map);let h=l.get(s);h||(l.set(s,h=new Nc),h.map=l,h.key=s),h.track()}}function Qi(e,i,s,l,h,p){const f=ol.get(e);if(!f){Ho++;return}const y=v=>{v&&v.trigger()};if(Oc(),i==="clear")f.forEach(y);else{const v=pt(e),C=v&&Dc(s);if(v&&s==="length"){const M=Number(l);f.forEach((P,j)=>{(j==="length"||j===Zo||!Fi(j)&&j>=M)&&y(P)})}else switch((s!==void 0||f.has(void 0))&&y(f.get(s)),C&&y(f.get(Zo)),i){case"add":v?C&&y(f.get("length")):(y(f.get(Kr)),Fs(e)&&y(f.get(sc)));break;case"delete":v||(y(f.get(Kr)),Fs(e)&&y(f.get(sc)));break;case"set":Fs(e)&&y(f.get(Kr));break}}Ic()}function Fm(e,i){const s=ol.get(e);return s&&s.get(i)}function Bs(e){const i=It(e);return i===e?i:(Mn(i,"iterate",Zo),di(e)?i:i.map(Pn))}function El(e){return Mn(e=It(e),"iterate",Zo),e}const Nm={__proto__:null,[Symbol.iterator](){return ju(this,Symbol.iterator,Pn)},concat(...e){return Bs(this).concat(...e.map(i=>pt(i)?Bs(i):i))},entries(){return ju(this,"entries",e=>(e[1]=Pn(e[1]),e))},every(e,i){return Ji(this,"every",e,i,void 0,arguments)},filter(e,i){return Ji(this,"filter",e,i,s=>s.map(Pn),arguments)},find(e,i){return Ji(this,"find",e,i,Pn,arguments)},findIndex(e,i){return Ji(this,"findIndex",e,i,void 0,arguments)},findLast(e,i){return Ji(this,"findLast",e,i,Pn,arguments)},findLastIndex(e,i){return Ji(this,"findLastIndex",e,i,void 0,arguments)},forEach(e,i){return Ji(this,"forEach",e,i,void 0,arguments)},includes(...e){return Uu(this,"includes",e)},indexOf(...e){return Uu(this,"indexOf",e)},join(e){return Bs(this).join(e)},lastIndexOf(...e){return Uu(this,"lastIndexOf",e)},map(e,i){return Ji(this,"map",e,i,void 0,arguments)},pop(){return Po(this,"pop")},push(...e){return Po(this,"push",e)},reduce(e,...i){return fh(this,"reduce",e,i)},reduceRight(e,...i){return fh(this,"reduceRight",e,i)},shift(){return Po(this,"shift")},some(e,i){return Ji(this,"some",e,i,void 0,arguments)},splice(...e){return Po(this,"splice",e)},toReversed(){return Bs(this).toReversed()},toSorted(e){return Bs(this).toSorted(e)},toSpliced(...e){return Bs(this).toSpliced(...e)},unshift(...e){return Po(this,"unshift",e)},values(){return ju(this,"values",Pn)}};function ju(e,i,s){const l=El(e),h=l[i]();return l!==e&&!di(e)&&(h._next=h.next,h.next=()=>{const p=h._next();return p.value&&(p.value=s(p.value)),p}),h}const zm=Array.prototype;function Ji(e,i,s,l,h,p){const f=El(e),y=f!==e&&!di(e),v=f[i];if(v!==zm[i]){const P=v.apply(e,p);return y?Pn(P):P}let C=s;f!==e&&(y?C=function(P,j){return s.call(this,Pn(P),j,e)}:s.length>2&&(C=function(P,j){return s.call(this,P,j,e)}));const M=v.call(f,C,l);return y&&h?h(M):M}function fh(e,i,s,l){const h=El(e);let p=s;return h!==e&&(di(e)?s.length>3&&(p=function(f,y,v){return s.call(this,f,y,v,e)}):p=function(f,y,v){return s.call(this,f,Pn(y),v,e)}),h[i](p,...l)}function Uu(e,i,s){const l=It(e);Mn(l,"iterate",Zo);const h=l[i](...s);return(h===-1||h===!1)&&jc(s[0])?(s[0]=It(s[0]),l[i](...s)):h}function Po(e,i,s=[]){Er(),Oc();const l=It(e)[i].apply(e,s);return Ic(),Mr(),l}const $m=Bc("__proto__,__v_isRef,__isVue"),Qd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Fi));function jm(e){Fi(e)||(e=String(e));const i=It(this);return Mn(i,"has",e),i.hasOwnProperty(e)}class ef{constructor(i=!1,s=!1){this._isReadonly=i,this._isShallow=s}get(i,s,l){if(s==="__v_skip")return i.__v_skip;const h=this._isReadonly,p=this._isShallow;if(s==="__v_isReactive")return!h;if(s==="__v_isReadonly")return h;if(s==="__v_isShallow")return p;if(s==="__v_raw")return l===(h?p?Xm:sf:p?rf:nf).get(i)||Object.getPrototypeOf(i)===Object.getPrototypeOf(l)?i:void 0;const f=pt(i);if(!h){let v;if(f&&(v=Nm[s]))return v;if(s==="hasOwnProperty")return jm}const y=Reflect.get(i,s,on(i)?i:l);return(Fi(s)?Qd.has(s):$m(s))||(h||Mn(i,"get",s),p)?y:on(y)?f&&Dc(s)?y:y.value:qt(y)?h?af(y):sr(y):y}}class tf extends ef{constructor(i=!1){super(!1,i)}set(i,s,l,h){let p=i[s];if(!this._isShallow){const v=Yr(p);if(!di(l)&&!Yr(l)&&(p=It(p),l=It(l)),!pt(i)&&on(p)&&!on(l))return v?!1:(p.value=l,!0)}const f=pt(i)&&Dc(s)?Number(s)<i.length:zt(i,s),y=Reflect.set(i,s,l,on(i)?i:h);return i===It(h)&&(f?Lr(l,p)&&Qi(i,"set",s,l):Qi(i,"add",s,l)),y}deleteProperty(i,s){const l=zt(i,s);i[s];const h=Reflect.deleteProperty(i,s);return h&&l&&Qi(i,"delete",s,void 0),h}has(i,s){const l=Reflect.has(i,s);return(!Fi(s)||!Qd.has(s))&&Mn(i,"has",s),l}ownKeys(i){return Mn(i,"iterate",pt(i)?"length":Kr),Reflect.ownKeys(i)}}class Um extends ef{constructor(i=!1){super(!0,i)}set(i,s){return!0}deleteProperty(i,s){return!0}}const Gm=new tf,Vm=new Um,Hm=new tf(!0);const oc=e=>e,Va=e=>Reflect.getPrototypeOf(e);function Zm(e,i,s){return function(...l){const h=this.__v_raw,p=It(h),f=Fs(p),y=e==="entries"||e===Symbol.iterator&&f,v=e==="keys"&&f,C=h[e](...l),M=s?oc:i?ac:Pn;return!i&&Mn(p,"iterate",v?sc:Kr),{next(){const{value:P,done:j}=C.next();return j?{value:P,done:j}:{value:y?[M(P[0]),M(P[1])]:M(P),done:j}},[Symbol.iterator](){return this}}}}function Ha(e){return function(...i){return e==="delete"?!1:e==="clear"?void 0:this}}function qm(e,i){const s={get(h){const p=this.__v_raw,f=It(p),y=It(h);e||(Lr(h,y)&&Mn(f,"get",h),Mn(f,"get",y));const{has:v}=Va(f),C=i?oc:e?ac:Pn;if(v.call(f,h))return C(p.get(h));if(v.call(f,y))return C(p.get(y));p!==f&&p.get(h)},get size(){const h=this.__v_raw;return!e&&Mn(It(h),"iterate",Kr),Reflect.get(h,"size",h)},has(h){const p=this.__v_raw,f=It(p),y=It(h);return e||(Lr(h,y)&&Mn(f,"has",h),Mn(f,"has",y)),h===y?p.has(h):p.has(h)||p.has(y)},forEach(h,p){const f=this,y=f.__v_raw,v=It(y),C=i?oc:e?ac:Pn;return!e&&Mn(v,"iterate",Kr),y.forEach((M,P)=>h.call(p,C(M),C(P),f))}};return Bn(s,e?{add:Ha("add"),set:Ha("set"),delete:Ha("delete"),clear:Ha("clear")}:{add(h){!i&&!di(h)&&!Yr(h)&&(h=It(h));const p=It(this);return Va(p).has.call(p,h)||(p.add(h),Qi(p,"add",h,h)),this},set(h,p){!i&&!di(p)&&!Yr(p)&&(p=It(p));const f=It(this),{has:y,get:v}=Va(f);let C=y.call(f,h);C||(h=It(h),C=y.call(f,h));const M=v.call(f,h);return f.set(h,p),C?Lr(p,M)&&Qi(f,"set",h,p):Qi(f,"add",h,p),this},delete(h){const p=It(this),{has:f,get:y}=Va(p);let v=f.call(p,h);v||(h=It(h),v=f.call(p,h)),y&&y.call(p,h);const C=p.delete(h);return v&&Qi(p,"delete",h,void 0),C},clear(){const h=It(this),p=h.size!==0,f=h.clear();return p&&Qi(h,"clear",void 0,void 0),f}}),["keys","values","entries",Symbol.iterator].forEach(h=>{s[h]=Zm(h,e,i)}),s}function zc(e,i){const s=qm(e,i);return(l,h,p)=>h==="__v_isReactive"?!e:h==="__v_isReadonly"?e:h==="__v_raw"?l:Reflect.get(zt(s,h)&&h in l?s:l,h,p)}const Km={get:zc(!1,!1)},Wm={get:zc(!1,!0)},Jm={get:zc(!0,!1)};const nf=new WeakMap,rf=new WeakMap,sf=new WeakMap,Xm=new WeakMap;function Ym(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qm(e){return e.__v_skip||!Object.isExtensible(e)?0:Ym(Cm(e))}function sr(e){return Yr(e)?e:$c(e,!1,Gm,Km,nf)}function of(e){return $c(e,!1,Hm,Wm,rf)}function af(e){return $c(e,!0,Vm,Jm,sf)}function $c(e,i,s,l,h){if(!qt(e)||e.__v_raw&&!(i&&e.__v_isReactive))return e;const p=h.get(e);if(p)return p;const f=Qm(e);if(f===0)return e;const y=new Proxy(e,f===2?l:s);return h.set(e,y),y}function Cr(e){return Yr(e)?Cr(e.__v_raw):!!(e&&e.__v_isReactive)}function Yr(e){return!!(e&&e.__v_isReadonly)}function di(e){return!!(e&&e.__v_isShallow)}function jc(e){return e?!!e.__v_raw:!1}function It(e){const i=e&&e.__v_raw;return i?It(i):e}function Uc(e){return!zt(e,"__v_skip")&&Object.isExtensible(e)&&Nd(e,"__v_skip",!0),e}const Pn=e=>qt(e)?sr(e):e,ac=e=>qt(e)?af(e):e;function on(e){return e?e.__v_isRef===!0:!1}function qe(e){return lf(e,!1)}function e0(e){return lf(e,!0)}function lf(e,i){return on(e)?e:new t0(e,i)}class t0{constructor(i,s){this.dep=new Nc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?i:It(i),this._value=s?i:Pn(i),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(i){const s=this._rawValue,l=this.__v_isShallow||di(i)||Yr(i);i=l?i:It(i),Lr(i,s)&&(this._rawValue=i,this._value=l?i:Pn(i),this.dep.trigger())}}function xt(e){return on(e)?e.value:e}const n0={get:(e,i,s)=>i==="__v_raw"?e:xt(Reflect.get(e,i,s)),set:(e,i,s,l)=>{const h=e[i];return on(h)&&!on(s)?(h.value=s,!0):Reflect.set(e,i,s,l)}};function uf(e){return Cr(e)?e:new Proxy(e,n0)}function i0(e){const i=pt(e)?new Array(e.length):{};for(const s in e)i[s]=s0(e,s);return i}class r0{constructor(i,s,l){this._object=i,this._key=s,this._defaultValue=l,this.__v_isRef=!0,this._value=void 0}get value(){const i=this._object[this._key];return this._value=i===void 0?this._defaultValue:i}set value(i){this._object[this._key]=i}get dep(){return Fm(It(this._object),this._key)}}function s0(e,i,s){const l=e[i];return on(l)?l:new r0(e,i,s)}class o0{constructor(i,s,l){this.fn=i,this.setter=s,this._value=void 0,this.dep=new Nc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ho-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=l}notify(){if(this.flags|=16,!(this.flags&8)&&Zt!==this)return qd(this,!0),!0}get value(){const i=this.dep.track();return Jd(this),i&&(i.version=this.dep.version),this._value}set value(i){this.setter&&this.setter(i)}}function a0(e,i,s=!1){let l,h;return wt(e)?l=e:(l=e.get,h=e.set),new o0(l,h,s)}const Za={},al=new WeakMap;let Vr;function l0(e,i=!1,s=Vr){if(s){let l=al.get(s);l||al.set(s,l=[]),l.push(e)}}function u0(e,i,s=Gt){const{immediate:l,deep:h,once:p,scheduler:f,augmentJob:y,call:v}=s,C=le=>h?le:di(le)||h===!1||h===0?er(le,1):er(le);let M,P,j,J,R=!1,Z=!1;if(on(e)?(P=()=>e.value,R=di(e)):Cr(e)?(P=()=>C(e),R=!0):pt(e)?(Z=!0,R=e.some(le=>Cr(le)||di(le)),P=()=>e.map(le=>{if(on(le))return le.value;if(Cr(le))return C(le);if(wt(le))return v?v(le,2):le()})):wt(e)?i?P=v?()=>v(e,2):e:P=()=>{if(j){Er();try{j()}finally{Mr()}}const le=Vr;Vr=M;try{return v?v(e,3,[J]):e(J)}finally{Vr=le}}:P=Ii,i&&h){const le=P,Oe=h===!0?1/0:h;P=()=>er(le(),Oe)}const q=Vd(),xe=()=>{M.stop(),q&&q.active&&Tc(q.effects,M)};if(p&&i){const le=i;i=(...Oe)=>{le(...Oe),xe()}}let ie=Z?new Array(e.length).fill(Za):Za;const V=le=>{if(!(!(M.flags&1)||!M.dirty&&!le))if(i){const Oe=M.run();if(h||R||(Z?Oe.some((Ee,Pe)=>Lr(Ee,ie[Pe])):Lr(Oe,ie))){j&&j();const Ee=Vr;Vr=M;try{const Pe=[Oe,ie===Za?void 0:Z&&ie[0]===Za?[]:ie,J];v?v(i,3,Pe):i(...Pe),ie=Oe}finally{Vr=Ee}}}else M.run()};return y&&y(V),M=new Hd(P),M.scheduler=f?()=>f(V,!1):V,J=le=>l0(le,!1,M),j=M.onStop=()=>{const le=al.get(M);if(le){if(v)v(le,4);else for(const Oe of le)Oe();al.delete(M)}},i?l?V(!0):ie=M.run():f?f(V.bind(null,!0),!0):M.run(),xe.pause=M.pause.bind(M),xe.resume=M.resume.bind(M),xe.stop=xe,xe}function er(e,i=1/0,s){if(i<=0||!qt(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),i--,on(e))er(e.value,i,s);else if(pt(e))for(let l=0;l<e.length;l++)er(e[l],i,s);else if(Vs(e)||Fs(e))e.forEach(l=>{er(l,i,s)});else if(Fd(e)){for(const l in e)er(e[l],i,s);for(const l of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,l)&&er(e[l],i,s)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ta(e,i,s,l){try{return l?e(...l):e()}catch(h){Ml(h,i,s)}}function Ni(e,i,s,l){if(wt(e)){const h=ta(e,i,s,l);return h&&Od(h)&&h.catch(p=>{Ml(p,i,s)}),h}if(pt(e)){const h=[];for(let p=0;p<e.length;p++)h.push(Ni(e[p],i,s,l));return h}}function Ml(e,i,s,l=!0){const h=i?i.vnode:null,{errorHandler:p,throwUnhandledErrorInProduction:f}=i&&i.appContext.config||Gt;if(i){let y=i.parent;const v=i.proxy,C=`https://vuejs.org/error-reference/#runtime-${s}`;for(;y;){const M=y.ec;if(M){for(let P=0;P<M.length;P++)if(M[P](e,v,C)===!1)return}y=y.parent}if(p){Er(),ta(p,null,10,[e,v,C]),Mr();return}}c0(e,s,h,l,f)}function c0(e,i,s,l=!0,h=!1){if(h)throw e;console.error(e)}const zn=[];let Ri=-1;const Ns=[];let br=null,Ts=0;const cf=Promise.resolve();let ll=null;function zs(e){const i=ll||cf;return e?i.then(this?e.bind(this):e):i}function h0(e){let i=Ri+1,s=zn.length;for(;i<s;){const l=i+s>>>1,h=zn[l],p=qo(h);p<e||p===e&&h.flags&2?i=l+1:s=l}return i}function Gc(e){if(!(e.flags&1)){const i=qo(e),s=zn[zn.length-1];!s||!(e.flags&2)&&i>=qo(s)?zn.push(e):zn.splice(h0(i),0,e),e.flags|=1,hf()}}function hf(){ll||(ll=cf.then(ff))}function d0(e){pt(e)?Ns.push(...e):br&&e.id===-1?br.splice(Ts+1,0,e):e.flags&1||(Ns.push(e),e.flags|=1),hf()}function ph(e,i,s=Ri+1){for(;s<zn.length;s++){const l=zn[s];if(l&&l.flags&2){if(e&&l.id!==e.uid)continue;zn.splice(s,1),s--,l.flags&4&&(l.flags&=-2),l(),l.flags&4||(l.flags&=-2)}}}function df(e){if(Ns.length){const i=[...new Set(Ns)].sort((s,l)=>qo(s)-qo(l));if(Ns.length=0,br){br.push(...i);return}for(br=i,Ts=0;Ts<br.length;Ts++){const s=br[Ts];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}br=null,Ts=0}}const qo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ff(e){try{for(Ri=0;Ri<zn.length;Ri++){const i=zn[Ri];i&&!(i.flags&8)&&(i.flags&4&&(i.flags&=-2),ta(i,i.i,i.i?15:14),i.flags&4||(i.flags&=-2))}}finally{for(;Ri<zn.length;Ri++){const i=zn[Ri];i&&(i.flags&=-2)}Ri=-1,zn.length=0,df(),ll=null,(zn.length||Ns.length)&&ff()}}let Zn=null,pf=null;function ul(e){const i=Zn;return Zn=e,pf=e&&e.type.__scopeId||null,i}function Hr(e,i=Zn,s){if(!i||e._n)return e;const l=(...h)=>{l._d&&Ch(-1);const p=ul(i);let f;try{f=e(...h)}finally{ul(p),l._d&&Ch(1)}return f};return l._n=!0,l._c=!0,l._d=!0,l}function Bt(e,i){if(Zn===null)return e;const s=Tl(Zn),l=e.dirs||(e.dirs=[]);for(let h=0;h<i.length;h++){let[p,f,y,v=Gt]=i[h];p&&(wt(p)&&(p={mounted:p,updated:p}),p.deep&&er(f),l.push({dir:p,instance:s,value:f,oldValue:void 0,arg:y,modifiers:v}))}return e}function Ur(e,i,s,l){const h=e.dirs,p=i&&i.dirs;for(let f=0;f<h.length;f++){const y=h[f];p&&(y.oldValue=p[f].value);let v=y.dir[l];v&&(Er(),Ni(v,s,8,[e.el,y,e,i]),Mr())}}const f0=Symbol("_vte"),p0=e=>e.__isTeleport;function Vc(e,i){e.shapeFlag&6&&e.component?(e.transition=i,Vc(e.component.subTree,i)):e.shapeFlag&128?(e.ssContent.transition=i.clone(e.ssContent),e.ssFallback.transition=i.clone(e.ssFallback)):e.transition=i}/*! #__NO_SIDE_EFFECTS__ */function Kn(e,i){return wt(e)?Bn({name:e.name},i,{setup:e}):e}function mf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function cl(e,i,s,l,h=!1){if(pt(e)){e.forEach((R,Z)=>cl(R,i&&(pt(i)?i[Z]:i),s,l,h));return}if(zo(l)&&!h){l.shapeFlag&512&&l.type.__asyncResolved&&l.component.subTree.component&&cl(e,i,s,l.component.subTree);return}const p=l.shapeFlag&4?Tl(l.component):l.el,f=h?null:p,{i:y,r:v}=e,C=i&&i.r,M=y.refs===Gt?y.refs={}:y.refs,P=y.setupState,j=It(P),J=P===Gt?()=>!1:R=>zt(j,R);if(C!=null&&C!==v&&(un(C)?(M[C]=null,J(C)&&(P[C]=null)):on(C)&&(C.value=null)),wt(v))ta(v,y,12,[f,M]);else{const R=un(v),Z=on(v);if(R||Z){const q=()=>{if(e.f){const xe=R?J(v)?P[v]:M[v]:v.value;h?pt(xe)&&Tc(xe,p):pt(xe)?xe.includes(p)||xe.push(p):R?(M[v]=[p],J(v)&&(P[v]=M[v])):(v.value=[p],e.k&&(M[e.k]=v.value))}else R?(M[v]=f,J(v)&&(P[v]=f)):Z&&(v.value=f,e.k&&(M[e.k]=f))};f?(q.id=-1,Yn(q,s)):q()}}}Cl().requestIdleCallback;Cl().cancelIdleCallback;const zo=e=>!!e.type.__asyncLoader,gf=e=>e.type.__isKeepAlive;function m0(e,i){_f(e,"a",i)}function g0(e,i){_f(e,"da",i)}function _f(e,i,s=xn){const l=e.__wdc||(e.__wdc=()=>{let h=s;for(;h;){if(h.isDeactivated)return;h=h.parent}return e()});if(Pl(i,l,s),s){let h=s.parent;for(;h&&h.parent;)gf(h.parent.vnode)&&_0(l,i,s,h),h=h.parent}}function _0(e,i,s,l){const h=Pl(i,e,l,!0);Sl(()=>{Tc(l[i],h)},s)}function Pl(e,i,s=xn,l=!1){if(s){const h=s[e]||(s[e]=[]),p=i.__weh||(i.__weh=(...f)=>{Er();const y=na(s),v=Ni(i,s,e,f);return y(),Mr(),v});return l?h.unshift(p):h.push(p),p}}const or=e=>(i,s=xn)=>{(!Wo||e==="sp")&&Pl(e,(...l)=>i(...l),s)},y0=or("bm"),rr=or("m"),v0=or("bu"),b0=or("u"),Hc=or("bum"),Sl=or("um"),x0=or("sp"),w0=or("rtg"),L0=or("rtc");function C0(e,i=xn){Pl("ec",e,i)}const k0="components";function E0(e,i){return P0(k0,e,!0,i)||e}const M0=Symbol.for("v-ndc");function P0(e,i,s=!0,l=!1){const h=Zn||xn;if(h){const p=h.type;{const y=gg(p,!1);if(y&&(y===i||y===mi(i)||y===Ll(mi(i))))return p}const f=mh(h[e]||p[e],i)||mh(h.appContext[e],i);return!f&&l?p:f}}function mh(e,i){return e&&(e[i]||e[mi(i)]||e[Ll(mi(i))])}function Ot(e,i,s,l){let h;const p=s,f=pt(e);if(f||un(e)){const y=f&&Cr(e);let v=!1;y&&(v=!di(e),e=El(e)),h=new Array(e.length);for(let C=0,M=e.length;C<M;C++)h[C]=i(v?Pn(e[C]):e[C],C,void 0,p)}else if(typeof e=="number"){h=new Array(e);for(let y=0;y<e;y++)h[y]=i(y+1,y,void 0,p)}else if(qt(e))if(e[Symbol.iterator])h=Array.from(e,(y,v)=>i(y,v,void 0,p));else{const y=Object.keys(e);h=new Array(y.length);for(let v=0,C=y.length;v<C;v++){const M=y[v];h[v]=i(e[M],M,v,p)}}else h=[];return h}const lc=e=>e?Nf(e)?Tl(e):lc(e.parent):null,$o=Bn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>lc(e.parent),$root:e=>lc(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>vf(e),$forceUpdate:e=>e.f||(e.f=()=>{Gc(e.update)}),$nextTick:e=>e.n||(e.n=zs.bind(e.proxy)),$watch:e=>J0.bind(e)}),Gu=(e,i)=>e!==Gt&&!e.__isScriptSetup&&zt(e,i),S0={get({_:e},i){if(i==="__v_skip")return!0;const{ctx:s,setupState:l,data:h,props:p,accessCache:f,type:y,appContext:v}=e;let C;if(i[0]!=="$"){const J=f[i];if(J!==void 0)switch(J){case 1:return l[i];case 2:return h[i];case 4:return s[i];case 3:return p[i]}else{if(Gu(l,i))return f[i]=1,l[i];if(h!==Gt&&zt(h,i))return f[i]=2,h[i];if((C=e.propsOptions[0])&&zt(C,i))return f[i]=3,p[i];if(s!==Gt&&zt(s,i))return f[i]=4,s[i];uc&&(f[i]=0)}}const M=$o[i];let P,j;if(M)return i==="$attrs"&&Mn(e.attrs,"get",""),M(e);if((P=y.__cssModules)&&(P=P[i]))return P;if(s!==Gt&&zt(s,i))return f[i]=4,s[i];if(j=v.config.globalProperties,zt(j,i))return j[i]},set({_:e},i,s){const{data:l,setupState:h,ctx:p}=e;return Gu(h,i)?(h[i]=s,!0):l!==Gt&&zt(l,i)?(l[i]=s,!0):zt(e.props,i)||i[0]==="$"&&i.slice(1)in e?!1:(p[i]=s,!0)},has({_:{data:e,setupState:i,accessCache:s,ctx:l,appContext:h,propsOptions:p}},f){let y;return!!s[f]||e!==Gt&&zt(e,f)||Gu(i,f)||(y=p[0])&&zt(y,f)||zt(l,f)||zt($o,f)||zt(h.config.globalProperties,f)},defineProperty(e,i,s){return s.get!=null?e._.accessCache[i]=0:zt(s,"value")&&this.set(e,i,s.value,null),Reflect.defineProperty(e,i,s)}};function gh(e){return pt(e)?e.reduce((i,s)=>(i[s]=null,i),{}):e}let uc=!0;function B0(e){const i=vf(e),s=e.proxy,l=e.ctx;uc=!1,i.beforeCreate&&_h(i.beforeCreate,e,"bc");const{data:h,computed:p,methods:f,watch:y,provide:v,inject:C,created:M,beforeMount:P,mounted:j,beforeUpdate:J,updated:R,activated:Z,deactivated:q,beforeDestroy:xe,beforeUnmount:ie,destroyed:V,unmounted:le,render:Oe,renderTracked:Ee,renderTriggered:Pe,errorCaptured:F,serverPrefetch:te,expose:ye,inheritAttrs:ne,components:Be,directives:Fe,filters:re}=i;if(C&&A0(C,l,null),f)for(const ve in f){const H=f[ve];wt(H)&&(l[ve]=H.bind(s))}if(h){const ve=h.call(s,s);qt(ve)&&(e.data=sr(ve))}if(uc=!0,p)for(const ve in p){const H=p[ve],ee=wt(H)?H.bind(s,s):wt(H.get)?H.get.bind(s,s):Ii,se=!wt(H)&&wt(H.set)?H.set.bind(s):Ii,He=kt({get:ee,set:se});Object.defineProperty(l,ve,{enumerable:!0,configurable:!0,get:()=>He.value,set:Ye=>He.value=Ye})}if(y)for(const ve in y)yf(y[ve],l,s,ve);if(v){const ve=wt(v)?v.call(s):v;Reflect.ownKeys(ve).forEach(H=>{Xa(H,ve[H])})}M&&_h(M,e,"c");function Ae(ve,H){pt(H)?H.forEach(ee=>ve(ee.bind(s))):H&&ve(H.bind(s))}if(Ae(y0,P),Ae(rr,j),Ae(v0,J),Ae(b0,R),Ae(m0,Z),Ae(g0,q),Ae(C0,F),Ae(L0,Ee),Ae(w0,Pe),Ae(Hc,ie),Ae(Sl,le),Ae(x0,te),pt(ye))if(ye.length){const ve=e.exposed||(e.exposed={});ye.forEach(H=>{Object.defineProperty(ve,H,{get:()=>s[H],set:ee=>s[H]=ee})})}else e.exposed||(e.exposed={});Oe&&e.render===Ii&&(e.render=Oe),ne!=null&&(e.inheritAttrs=ne),Be&&(e.components=Be),Fe&&(e.directives=Fe),te&&mf(e)}function A0(e,i,s=Ii){pt(e)&&(e=cc(e));for(const l in e){const h=e[l];let p;qt(h)?"default"in h?p=fi(h.from||l,h.default,!0):p=fi(h.from||l):p=fi(h),on(p)?Object.defineProperty(i,l,{enumerable:!0,configurable:!0,get:()=>p.value,set:f=>p.value=f}):i[l]=p}}function _h(e,i,s){Ni(pt(e)?e.map(l=>l.bind(i.proxy)):e.bind(i.proxy),i,s)}function yf(e,i,s,l){let h=l.includes(".")?Df(s,l):()=>s[l];if(un(e)){const p=i[e];wt(p)&&ei(h,p)}else if(wt(e))ei(h,e.bind(s));else if(qt(e))if(pt(e))e.forEach(p=>yf(p,i,s,l));else{const p=wt(e.handler)?e.handler.bind(s):i[e.handler];wt(p)&&ei(h,p,e)}}function vf(e){const i=e.type,{mixins:s,extends:l}=i,{mixins:h,optionsCache:p,config:{optionMergeStrategies:f}}=e.appContext,y=p.get(i);let v;return y?v=y:!h.length&&!s&&!l?v=i:(v={},h.length&&h.forEach(C=>hl(v,C,f,!0)),hl(v,i,f)),qt(i)&&p.set(i,v),v}function hl(e,i,s,l=!1){const{mixins:h,extends:p}=i;p&&hl(e,p,s,!0),h&&h.forEach(f=>hl(e,f,s,!0));for(const f in i)if(!(l&&f==="expose")){const y=T0[f]||s&&s[f];e[f]=y?y(e[f],i[f]):i[f]}return e}const T0={data:yh,props:vh,emits:vh,methods:Ro,computed:Ro,beforeCreate:Fn,created:Fn,beforeMount:Fn,mounted:Fn,beforeUpdate:Fn,updated:Fn,beforeDestroy:Fn,beforeUnmount:Fn,destroyed:Fn,unmounted:Fn,activated:Fn,deactivated:Fn,errorCaptured:Fn,serverPrefetch:Fn,components:Ro,directives:Ro,watch:R0,provide:yh,inject:D0};function yh(e,i){return i?e?function(){return Bn(wt(e)?e.call(this,this):e,wt(i)?i.call(this,this):i)}:i:e}function D0(e,i){return Ro(cc(e),cc(i))}function cc(e){if(pt(e)){const i={};for(let s=0;s<e.length;s++)i[e[s]]=e[s];return i}return e}function Fn(e,i){return e?[...new Set([].concat(e,i))]:i}function Ro(e,i){return e?Bn(Object.create(null),e,i):i}function vh(e,i){return e?pt(e)&&pt(i)?[...new Set([...e,...i])]:Bn(Object.create(null),gh(e),gh(i??{})):i}function R0(e,i){if(!e)return i;if(!i)return e;const s=Bn(Object.create(null),e);for(const l in i)s[l]=Fn(e[l],i[l]);return s}function bf(){return{app:null,config:{isNativeTag:wm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let O0=0;function I0(e,i){return function(l,h=null){wt(l)||(l=Bn({},l)),h!=null&&!qt(h)&&(h=null);const p=bf(),f=new WeakSet,y=[];let v=!1;const C=p.app={_uid:O0++,_component:l,_props:h,_container:null,_context:p,_instance:null,version:yg,get config(){return p.config},set config(M){},use(M,...P){return f.has(M)||(M&&wt(M.install)?(f.add(M),M.install(C,...P)):wt(M)&&(f.add(M),M(C,...P))),C},mixin(M){return p.mixins.includes(M)||p.mixins.push(M),C},component(M,P){return P?(p.components[M]=P,C):p.components[M]},directive(M,P){return P?(p.directives[M]=P,C):p.directives[M]},mount(M,P,j){if(!v){const J=C._ceVNode||sn(l,h);return J.appContext=p,j===!0?j="svg":j===!1&&(j=void 0),e(J,M,j),v=!0,C._container=M,M.__vue_app__=C,Tl(J.component)}},onUnmount(M){y.push(M)},unmount(){v&&(Ni(y,C._instance,16),e(null,C._container),delete C._container.__vue_app__)},provide(M,P){return p.provides[M]=P,C},runWithContext(M){const P=Wr;Wr=C;try{return M()}finally{Wr=P}}};return C}}let Wr=null;function Xa(e,i){if(xn){let s=xn.provides;const l=xn.parent&&xn.parent.provides;l===s&&(s=xn.provides=Object.create(l)),s[e]=i}}function fi(e,i,s=!1){const l=xn||Zn;if(l||Wr){const h=Wr?Wr._context.provides:l?l.parent==null?l.vnode.appContext&&l.vnode.appContext.provides:l.parent.provides:void 0;if(h&&e in h)return h[e];if(arguments.length>1)return s&&wt(i)?i.call(l&&l.proxy):i}}function F0(){return!!(xn||Zn||Wr)}const xf={},wf=()=>Object.create(xf),Lf=e=>Object.getPrototypeOf(e)===xf;function N0(e,i,s,l=!1){const h={},p=wf();e.propsDefaults=Object.create(null),Cf(e,i,h,p);for(const f in e.propsOptions[0])f in h||(h[f]=void 0);s?e.props=l?h:of(h):e.type.props?e.props=h:e.props=p,e.attrs=p}function z0(e,i,s,l){const{props:h,attrs:p,vnode:{patchFlag:f}}=e,y=It(h),[v]=e.propsOptions;let C=!1;if((l||f>0)&&!(f&16)){if(f&8){const M=e.vnode.dynamicProps;for(let P=0;P<M.length;P++){let j=M[P];if(Bl(e.emitsOptions,j))continue;const J=i[j];if(v)if(zt(p,j))J!==p[j]&&(p[j]=J,C=!0);else{const R=mi(j);h[R]=hc(v,y,R,J,e,!1)}else J!==p[j]&&(p[j]=J,C=!0)}}}else{Cf(e,i,h,p)&&(C=!0);let M;for(const P in y)(!i||!zt(i,P)&&((M=ts(P))===P||!zt(i,M)))&&(v?s&&(s[P]!==void 0||s[M]!==void 0)&&(h[P]=hc(v,y,P,void 0,e,!0)):delete h[P]);if(p!==y)for(const P in p)(!i||!zt(i,P))&&(delete p[P],C=!0)}C&&Qi(e.attrs,"set","")}function Cf(e,i,s,l){const[h,p]=e.propsOptions;let f=!1,y;if(i)for(let v in i){if(Io(v))continue;const C=i[v];let M;h&&zt(h,M=mi(v))?!p||!p.includes(M)?s[M]=C:(y||(y={}))[M]=C:Bl(e.emitsOptions,v)||(!(v in l)||C!==l[v])&&(l[v]=C,f=!0)}if(p){const v=It(s),C=y||Gt;for(let M=0;M<p.length;M++){const P=p[M];s[P]=hc(h,v,P,C[P],e,!zt(C,P))}}return f}function hc(e,i,s,l,h,p){const f=e[s];if(f!=null){const y=zt(f,"default");if(y&&l===void 0){const v=f.default;if(f.type!==Function&&!f.skipFactory&&wt(v)){const{propsDefaults:C}=h;if(s in C)l=C[s];else{const M=na(h);l=C[s]=v.call(null,i),M()}}else l=v;h.ce&&h.ce._setProp(s,l)}f[0]&&(p&&!y?l=!1:f[1]&&(l===""||l===ts(s))&&(l=!0))}return l}const $0=new WeakMap;function kf(e,i,s=!1){const l=s?$0:i.propsCache,h=l.get(e);if(h)return h;const p=e.props,f={},y=[];let v=!1;if(!wt(e)){const M=P=>{v=!0;const[j,J]=kf(P,i,!0);Bn(f,j),J&&y.push(...J)};!s&&i.mixins.length&&i.mixins.forEach(M),e.extends&&M(e.extends),e.mixins&&e.mixins.forEach(M)}if(!p&&!v)return qt(e)&&l.set(e,Is),Is;if(pt(p))for(let M=0;M<p.length;M++){const P=mi(p[M]);bh(P)&&(f[P]=Gt)}else if(p)for(const M in p){const P=mi(M);if(bh(P)){const j=p[M],J=f[P]=pt(j)||wt(j)?{type:j}:Bn({},j),R=J.type;let Z=!1,q=!0;if(pt(R))for(let xe=0;xe<R.length;++xe){const ie=R[xe],V=wt(ie)&&ie.name;if(V==="Boolean"){Z=!0;break}else V==="String"&&(q=!1)}else Z=wt(R)&&R.name==="Boolean";J[0]=Z,J[1]=q,(Z||zt(J,"default"))&&y.push(P)}}const C=[f,y];return qt(e)&&l.set(e,C),C}function bh(e){return e[0]!=="$"&&!Io(e)}const Ef=e=>e[0]==="_"||e==="$stable",Zc=e=>pt(e)?e.map(Oi):[Oi(e)],j0=(e,i,s)=>{if(i._n)return i;const l=Hr((...h)=>Zc(i(...h)),s);return l._c=!1,l},Mf=(e,i,s)=>{const l=e._ctx;for(const h in e){if(Ef(h))continue;const p=e[h];if(wt(p))i[h]=j0(h,p,l);else if(p!=null){const f=Zc(p);i[h]=()=>f}}},Pf=(e,i)=>{const s=Zc(i);e.slots.default=()=>s},Sf=(e,i,s)=>{for(const l in i)(s||l!=="_")&&(e[l]=i[l])},U0=(e,i,s)=>{const l=e.slots=wf();if(e.vnode.shapeFlag&32){const h=i._;h?(Sf(l,i,s),s&&Nd(l,"_",h,!0)):Mf(i,l)}else i&&Pf(e,i)},G0=(e,i,s)=>{const{vnode:l,slots:h}=e;let p=!0,f=Gt;if(l.shapeFlag&32){const y=i._;y?s&&y===1?p=!1:Sf(h,i,s):(p=!i.$stable,Mf(i,h)),f=i}else i&&(Pf(e,i),f={default:1});if(p)for(const y in h)!Ef(y)&&f[y]==null&&delete h[y]},Yn=ig;function V0(e){return H0(e)}function H0(e,i){const s=Cl();s.__VUE__=!0;const{insert:l,remove:h,patchProp:p,createElement:f,createText:y,createComment:v,setText:C,setElementText:M,parentNode:P,nextSibling:j,setScopeId:J=Ii,insertStaticContent:R}=e,Z=(U,K,ce,Re=null,de=null,z=null,De=void 0,Ie=null,je=!!K.dynamicChildren)=>{if(U===K)return;U&&!So(U,K)&&(Re=Le(U),Ye(U,de,z,!0),U=null),K.patchFlag===-2&&(je=!1,K.dynamicChildren=null);const{type:he,ref:We,shapeFlag:ze}=K;switch(he){case Al:q(U,K,ce,Re);break;case Qr:xe(U,K,ce,Re);break;case Ya:U==null&&ie(K,ce,Re,De);break;case Lt:Be(U,K,ce,Re,de,z,De,Ie,je);break;default:ze&1?Oe(U,K,ce,Re,de,z,De,Ie,je):ze&6?Fe(U,K,ce,Re,de,z,De,Ie,je):(ze&64||ze&128)&&he.process(U,K,ce,Re,de,z,De,Ie,je,it)}We!=null&&de&&cl(We,U&&U.ref,z,K||U,!K)},q=(U,K,ce,Re)=>{if(U==null)l(K.el=y(K.children),ce,Re);else{const de=K.el=U.el;K.children!==U.children&&C(de,K.children)}},xe=(U,K,ce,Re)=>{U==null?l(K.el=v(K.children||""),ce,Re):K.el=U.el},ie=(U,K,ce,Re)=>{[U.el,U.anchor]=R(U.children,K,ce,Re,U.el,U.anchor)},V=({el:U,anchor:K},ce,Re)=>{let de;for(;U&&U!==K;)de=j(U),l(U,ce,Re),U=de;l(K,ce,Re)},le=({el:U,anchor:K})=>{let ce;for(;U&&U!==K;)ce=j(U),h(U),U=ce;h(K)},Oe=(U,K,ce,Re,de,z,De,Ie,je)=>{K.type==="svg"?De="svg":K.type==="math"&&(De="mathml"),U==null?Ee(K,ce,Re,de,z,De,Ie,je):te(U,K,de,z,De,Ie,je)},Ee=(U,K,ce,Re,de,z,De,Ie)=>{let je,he;const{props:We,shapeFlag:ze,transition:ot,dirs:ct}=U;if(je=U.el=f(U.type,z,We&&We.is,We),ze&8?M(je,U.children):ze&16&&F(U.children,je,null,Re,de,Vu(U,z),De,Ie),ct&&Ur(U,null,Re,"created"),Pe(je,U,U.scopeId,De,Re),We){for(const Tt in We)Tt!=="value"&&!Io(Tt)&&p(je,Tt,null,We[Tt],z,Re);"value"in We&&p(je,"value",null,We.value,z),(he=We.onVnodeBeforeMount)&&Ti(he,Re,U)}ct&&Ur(U,null,Re,"beforeMount");const _t=Z0(de,ot);_t&&ot.beforeEnter(je),l(je,K,ce),((he=We&&We.onVnodeMounted)||_t||ct)&&Yn(()=>{he&&Ti(he,Re,U),_t&&ot.enter(je),ct&&Ur(U,null,Re,"mounted")},de)},Pe=(U,K,ce,Re,de)=>{if(ce&&J(U,ce),Re)for(let z=0;z<Re.length;z++)J(U,Re[z]);if(de){let z=de.subTree;if(K===z||Of(z.type)&&(z.ssContent===K||z.ssFallback===K)){const De=de.vnode;Pe(U,De,De.scopeId,De.slotScopeIds,de.parent)}}},F=(U,K,ce,Re,de,z,De,Ie,je=0)=>{for(let he=je;he<U.length;he++){const We=U[he]=Ie?xr(U[he]):Oi(U[he]);Z(null,We,K,ce,Re,de,z,De,Ie)}},te=(U,K,ce,Re,de,z,De)=>{const Ie=K.el=U.el;let{patchFlag:je,dynamicChildren:he,dirs:We}=K;je|=U.patchFlag&16;const ze=U.props||Gt,ot=K.props||Gt;let ct;if(ce&&Gr(ce,!1),(ct=ot.onVnodeBeforeUpdate)&&Ti(ct,ce,K,U),We&&Ur(K,U,ce,"beforeUpdate"),ce&&Gr(ce,!0),(ze.innerHTML&&ot.innerHTML==null||ze.textContent&&ot.textContent==null)&&M(Ie,""),he?ye(U.dynamicChildren,he,Ie,ce,Re,Vu(K,de),z):De||H(U,K,Ie,null,ce,Re,Vu(K,de),z,!1),je>0){if(je&16)ne(Ie,ze,ot,ce,de);else if(je&2&&ze.class!==ot.class&&p(Ie,"class",null,ot.class,de),je&4&&p(Ie,"style",ze.style,ot.style,de),je&8){const _t=K.dynamicProps;for(let Tt=0;Tt<_t.length;Tt++){const Pt=_t[Tt],Kt=ze[Pt],Xt=ot[Pt];(Xt!==Kt||Pt==="value")&&p(Ie,Pt,Kt,Xt,de,ce)}}je&1&&U.children!==K.children&&M(Ie,K.children)}else!De&&he==null&&ne(Ie,ze,ot,ce,de);((ct=ot.onVnodeUpdated)||We)&&Yn(()=>{ct&&Ti(ct,ce,K,U),We&&Ur(K,U,ce,"updated")},Re)},ye=(U,K,ce,Re,de,z,De)=>{for(let Ie=0;Ie<K.length;Ie++){const je=U[Ie],he=K[Ie],We=je.el&&(je.type===Lt||!So(je,he)||je.shapeFlag&70)?P(je.el):ce;Z(je,he,We,null,Re,de,z,De,!0)}},ne=(U,K,ce,Re,de)=>{if(K!==ce){if(K!==Gt)for(const z in K)!Io(z)&&!(z in ce)&&p(U,z,K[z],null,de,Re);for(const z in ce){if(Io(z))continue;const De=ce[z],Ie=K[z];De!==Ie&&z!=="value"&&p(U,z,Ie,De,de,Re)}"value"in ce&&p(U,"value",K.value,ce.value,de)}},Be=(U,K,ce,Re,de,z,De,Ie,je)=>{const he=K.el=U?U.el:y(""),We=K.anchor=U?U.anchor:y("");let{patchFlag:ze,dynamicChildren:ot,slotScopeIds:ct}=K;ct&&(Ie=Ie?Ie.concat(ct):ct),U==null?(l(he,ce,Re),l(We,ce,Re),F(K.children||[],ce,We,de,z,De,Ie,je)):ze>0&&ze&64&&ot&&U.dynamicChildren?(ye(U.dynamicChildren,ot,ce,de,z,De,Ie),(K.key!=null||de&&K===de.subTree)&&Bf(U,K,!0)):H(U,K,ce,We,de,z,De,Ie,je)},Fe=(U,K,ce,Re,de,z,De,Ie,je)=>{K.slotScopeIds=Ie,U==null?K.shapeFlag&512?de.ctx.activate(K,ce,Re,De,je):re(K,ce,Re,de,z,De,je):Se(U,K,je)},re=(U,K,ce,Re,de,z,De)=>{const Ie=U.component=hg(U,Re,de);if(gf(U)&&(Ie.ctx.renderer=it),dg(Ie,!1,De),Ie.asyncDep){if(de&&de.registerDep(Ie,Ae,De),!U.el){const je=Ie.subTree=sn(Qr);xe(null,je,K,ce)}}else Ae(Ie,U,K,ce,de,z,De)},Se=(U,K,ce)=>{const Re=K.component=U.component;if(tg(U,K,ce))if(Re.asyncDep&&!Re.asyncResolved){ve(Re,K,ce);return}else Re.next=K,Re.update();else K.el=U.el,Re.vnode=K},Ae=(U,K,ce,Re,de,z,De)=>{const Ie=()=>{if(U.isMounted){let{next:ze,bu:ot,u:ct,parent:_t,vnode:Tt}=U;{const cn=Af(U);if(cn){ze&&(ze.el=Tt.el,ve(U,ze,De)),cn.asyncDep.then(()=>{U.isUnmounted||Ie()});return}}let Pt=ze,Kt;Gr(U,!1),ze?(ze.el=Tt.el,ve(U,ze,De)):ze=Tt,ot&&Ja(ot),(Kt=ze.props&&ze.props.onVnodeBeforeUpdate)&&Ti(Kt,_t,ze,Tt),Gr(U,!0);const Xt=wh(U),An=U.subTree;U.subTree=Xt,Z(An,Xt,P(An.el),Le(An),U,de,z),ze.el=Xt.el,Pt===null&&ng(U,Xt.el),ct&&Yn(ct,de),(Kt=ze.props&&ze.props.onVnodeUpdated)&&Yn(()=>Ti(Kt,_t,ze,Tt),de)}else{let ze;const{el:ot,props:ct}=K,{bm:_t,m:Tt,parent:Pt,root:Kt,type:Xt}=U,An=zo(K);Gr(U,!1),_t&&Ja(_t),!An&&(ze=ct&&ct.onVnodeBeforeMount)&&Ti(ze,Pt,K),Gr(U,!0);{Kt.ce&&Kt.ce._injectChildStyle(Xt);const cn=U.subTree=wh(U);Z(null,cn,ce,Re,U,de,z),K.el=cn.el}if(Tt&&Yn(Tt,de),!An&&(ze=ct&&ct.onVnodeMounted)){const cn=K;Yn(()=>Ti(ze,Pt,cn),de)}(K.shapeFlag&256||Pt&&zo(Pt.vnode)&&Pt.vnode.shapeFlag&256)&&U.a&&Yn(U.a,de),U.isMounted=!0,K=ce=Re=null}};U.scope.on();const je=U.effect=new Hd(Ie);U.scope.off();const he=U.update=je.run.bind(je),We=U.job=je.runIfDirty.bind(je);We.i=U,We.id=U.uid,je.scheduler=()=>Gc(We),Gr(U,!0),he()},ve=(U,K,ce)=>{K.component=U;const Re=U.vnode.props;U.vnode=K,U.next=null,z0(U,K.props,Re,ce),G0(U,K.children,ce),Er(),ph(U),Mr()},H=(U,K,ce,Re,de,z,De,Ie,je=!1)=>{const he=U&&U.children,We=U?U.shapeFlag:0,ze=K.children,{patchFlag:ot,shapeFlag:ct}=K;if(ot>0){if(ot&128){se(he,ze,ce,Re,de,z,De,Ie,je);return}else if(ot&256){ee(he,ze,ce,Re,de,z,De,Ie,je);return}}ct&8?(We&16&&Xe(he,de,z),ze!==he&&M(ce,ze)):We&16?ct&16?se(he,ze,ce,Re,de,z,De,Ie,je):Xe(he,de,z,!0):(We&8&&M(ce,""),ct&16&&F(ze,ce,Re,de,z,De,Ie,je))},ee=(U,K,ce,Re,de,z,De,Ie,je)=>{U=U||Is,K=K||Is;const he=U.length,We=K.length,ze=Math.min(he,We);let ot;for(ot=0;ot<ze;ot++){const ct=K[ot]=je?xr(K[ot]):Oi(K[ot]);Z(U[ot],ct,ce,null,de,z,De,Ie,je)}he>We?Xe(U,de,z,!0,!1,ze):F(K,ce,Re,de,z,De,Ie,je,ze)},se=(U,K,ce,Re,de,z,De,Ie,je)=>{let he=0;const We=K.length;let ze=U.length-1,ot=We-1;for(;he<=ze&&he<=ot;){const ct=U[he],_t=K[he]=je?xr(K[he]):Oi(K[he]);if(So(ct,_t))Z(ct,_t,ce,null,de,z,De,Ie,je);else break;he++}for(;he<=ze&&he<=ot;){const ct=U[ze],_t=K[ot]=je?xr(K[ot]):Oi(K[ot]);if(So(ct,_t))Z(ct,_t,ce,null,de,z,De,Ie,je);else break;ze--,ot--}if(he>ze){if(he<=ot){const ct=ot+1,_t=ct<We?K[ct].el:Re;for(;he<=ot;)Z(null,K[he]=je?xr(K[he]):Oi(K[he]),ce,_t,de,z,De,Ie,je),he++}}else if(he>ot)for(;he<=ze;)Ye(U[he],de,z,!0),he++;else{const ct=he,_t=he,Tt=new Map;for(he=_t;he<=ot;he++){const tn=K[he]=je?xr(K[he]):Oi(K[he]);tn.key!=null&&Tt.set(tn.key,he)}let Pt,Kt=0;const Xt=ot-_t+1;let An=!1,cn=0;const Ci=new Array(Xt);for(he=0;he<Xt;he++)Ci[he]=0;for(he=ct;he<=ze;he++){const tn=U[he];if(Kt>=Xt){Ye(tn,de,z,!0);continue}let Tn;if(tn.key!=null)Tn=Tt.get(tn.key);else for(Pt=_t;Pt<=ot;Pt++)if(Ci[Pt-_t]===0&&So(tn,K[Pt])){Tn=Pt;break}Tn===void 0?Ye(tn,de,z,!0):(Ci[Tn-_t]=he+1,Tn>=cn?cn=Tn:An=!0,Z(tn,K[Tn],ce,null,de,z,De,Ie,je),Kt++)}const zi=An?q0(Ci):Is;for(Pt=zi.length-1,he=Xt-1;he>=0;he--){const tn=_t+he,Tn=K[tn],ii=tn+1<We?K[tn+1].el:Re;Ci[he]===0?Z(null,Tn,ce,ii,de,z,De,Ie,je):An&&(Pt<0||he!==zi[Pt]?He(Tn,ce,ii,2):Pt--)}}},He=(U,K,ce,Re,de=null)=>{const{el:z,type:De,transition:Ie,children:je,shapeFlag:he}=U;if(he&6){He(U.component.subTree,K,ce,Re);return}if(he&128){U.suspense.move(K,ce,Re);return}if(he&64){De.move(U,K,ce,it);return}if(De===Lt){l(z,K,ce);for(let ze=0;ze<je.length;ze++)He(je[ze],K,ce,Re);l(U.anchor,K,ce);return}if(De===Ya){V(U,K,ce);return}if(Re!==2&&he&1&&Ie)if(Re===0)Ie.beforeEnter(z),l(z,K,ce),Yn(()=>Ie.enter(z),de);else{const{leave:ze,delayLeave:ot,afterLeave:ct}=Ie,_t=()=>l(z,K,ce),Tt=()=>{ze(z,()=>{_t(),ct&&ct()})};ot?ot(z,_t,Tt):Tt()}else l(z,K,ce)},Ye=(U,K,ce,Re=!1,de=!1)=>{const{type:z,props:De,ref:Ie,children:je,dynamicChildren:he,shapeFlag:We,patchFlag:ze,dirs:ot,cacheIndex:ct}=U;if(ze===-2&&(de=!1),Ie!=null&&cl(Ie,null,ce,U,!0),ct!=null&&(K.renderCache[ct]=void 0),We&256){K.ctx.deactivate(U);return}const _t=We&1&&ot,Tt=!zo(U);let Pt;if(Tt&&(Pt=De&&De.onVnodeBeforeUnmount)&&Ti(Pt,K,U),We&6)nt(U.component,ce,Re);else{if(We&128){U.suspense.unmount(ce,Re);return}_t&&Ur(U,null,K,"beforeUnmount"),We&64?U.type.remove(U,K,ce,it,Re):he&&!he.hasOnce&&(z!==Lt||ze>0&&ze&64)?Xe(he,K,ce,!1,!0):(z===Lt&&ze&384||!de&&We&16)&&Xe(je,K,ce),Re&&Ke(U)}(Tt&&(Pt=De&&De.onVnodeUnmounted)||_t)&&Yn(()=>{Pt&&Ti(Pt,K,U),_t&&Ur(U,null,K,"unmounted")},ce)},Ke=U=>{const{type:K,el:ce,anchor:Re,transition:de}=U;if(K===Lt){Je(ce,Re);return}if(K===Ya){le(U);return}const z=()=>{h(ce),de&&!de.persisted&&de.afterLeave&&de.afterLeave()};if(U.shapeFlag&1&&de&&!de.persisted){const{leave:De,delayLeave:Ie}=de,je=()=>De(ce,z);Ie?Ie(U.el,z,je):je()}else z()},Je=(U,K)=>{let ce;for(;U!==K;)ce=j(U),h(U),U=ce;h(K)},nt=(U,K,ce)=>{const{bum:Re,scope:de,job:z,subTree:De,um:Ie,m:je,a:he}=U;xh(je),xh(he),Re&&Ja(Re),de.stop(),z&&(z.flags|=8,Ye(De,U,K,ce)),Ie&&Yn(Ie,K),Yn(()=>{U.isUnmounted=!0},K),K&&K.pendingBranch&&!K.isUnmounted&&U.asyncDep&&!U.asyncResolved&&U.suspenseId===K.pendingId&&(K.deps--,K.deps===0&&K.resolve())},Xe=(U,K,ce,Re=!1,de=!1,z=0)=>{for(let De=z;De<U.length;De++)Ye(U[De],K,ce,Re,de)},Le=U=>{if(U.shapeFlag&6)return Le(U.component.subTree);if(U.shapeFlag&128)return U.suspense.next();const K=j(U.anchor||U.el),ce=K&&K[f0];return ce?j(ce):K};let Ze=!1;const Ve=(U,K,ce)=>{U==null?K._vnode&&Ye(K._vnode,null,null,!0):Z(K._vnode||null,U,K,null,null,null,ce),K._vnode=U,Ze||(Ze=!0,ph(),df(),Ze=!1)},it={p:Z,um:Ye,m:He,r:Ke,mt:re,mc:F,pc:H,pbc:ye,n:Le,o:e};return{render:Ve,hydrate:void 0,createApp:I0(Ve)}}function Vu({type:e,props:i},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&i&&i.encoding&&i.encoding.includes("html")?void 0:s}function Gr({effect:e,job:i},s){s?(e.flags|=32,i.flags|=4):(e.flags&=-33,i.flags&=-5)}function Z0(e,i){return(!e||e&&!e.pendingBranch)&&i&&!i.persisted}function Bf(e,i,s=!1){const l=e.children,h=i.children;if(pt(l)&&pt(h))for(let p=0;p<l.length;p++){const f=l[p];let y=h[p];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=h[p]=xr(h[p]),y.el=f.el),!s&&y.patchFlag!==-2&&Bf(f,y)),y.type===Al&&(y.el=f.el)}}function q0(e){const i=e.slice(),s=[0];let l,h,p,f,y;const v=e.length;for(l=0;l<v;l++){const C=e[l];if(C!==0){if(h=s[s.length-1],e[h]<C){i[l]=h,s.push(l);continue}for(p=0,f=s.length-1;p<f;)y=p+f>>1,e[s[y]]<C?p=y+1:f=y;C<e[s[p]]&&(p>0&&(i[l]=s[p-1]),s[p]=l)}}for(p=s.length,f=s[p-1];p-- >0;)s[p]=f,f=i[f];return s}function Af(e){const i=e.subTree.component;if(i)return i.asyncDep&&!i.asyncResolved?i:Af(i)}function xh(e){if(e)for(let i=0;i<e.length;i++)e[i].flags|=8}const K0=Symbol.for("v-scx"),W0=()=>fi(K0);function ei(e,i,s){return Tf(e,i,s)}function Tf(e,i,s=Gt){const{immediate:l,deep:h,flush:p,once:f}=s,y=Bn({},s),v=i&&l||!i&&p!=="post";let C;if(Wo){if(p==="sync"){const J=W0();C=J.__watcherHandles||(J.__watcherHandles=[])}else if(!v){const J=()=>{};return J.stop=Ii,J.resume=Ii,J.pause=Ii,J}}const M=xn;y.call=(J,R,Z)=>Ni(J,M,R,Z);let P=!1;p==="post"?y.scheduler=J=>{Yn(J,M&&M.suspense)}:p!=="sync"&&(P=!0,y.scheduler=(J,R)=>{R?J():Gc(J)}),y.augmentJob=J=>{i&&(J.flags|=4),P&&(J.flags|=2,M&&(J.id=M.uid,J.i=M))};const j=u0(e,i,y);return Wo&&(C?C.push(j):v&&j()),j}function J0(e,i,s){const l=this.proxy,h=un(e)?e.includes(".")?Df(l,e):()=>l[e]:e.bind(l,l);let p;wt(i)?p=i:(p=i.handler,s=i);const f=na(this),y=Tf(h,p.bind(l),s);return f(),y}function Df(e,i){const s=i.split(".");return()=>{let l=e;for(let h=0;h<s.length&&l;h++)l=l[s[h]];return l}}const X0=(e,i)=>i==="modelValue"||i==="model-value"?e.modelModifiers:e[`${i}Modifiers`]||e[`${mi(i)}Modifiers`]||e[`${ts(i)}Modifiers`];function Y0(e,i,...s){if(e.isUnmounted)return;const l=e.vnode.props||Gt;let h=s;const p=i.startsWith("update:"),f=p&&X0(l,i.slice(7));f&&(f.trim&&(h=s.map(M=>un(M)?M.trim():M)),f.number&&(h=s.map(sl)));let y,v=l[y=Nu(i)]||l[y=Nu(mi(i))];!v&&p&&(v=l[y=Nu(ts(i))]),v&&Ni(v,e,6,h);const C=l[y+"Once"];if(C){if(!e.emitted)e.emitted={};else if(e.emitted[y])return;e.emitted[y]=!0,Ni(C,e,6,h)}}function Rf(e,i,s=!1){const l=i.emitsCache,h=l.get(e);if(h!==void 0)return h;const p=e.emits;let f={},y=!1;if(!wt(e)){const v=C=>{const M=Rf(C,i,!0);M&&(y=!0,Bn(f,M))};!s&&i.mixins.length&&i.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}return!p&&!y?(qt(e)&&l.set(e,null),null):(pt(p)?p.forEach(v=>f[v]=null):Bn(f,p),qt(e)&&l.set(e,f),f)}function Bl(e,i){return!e||!xl(i)?!1:(i=i.slice(2).replace(/Once$/,""),zt(e,i[0].toLowerCase()+i.slice(1))||zt(e,ts(i))||zt(e,i))}function wh(e){const{type:i,vnode:s,proxy:l,withProxy:h,propsOptions:[p],slots:f,attrs:y,emit:v,render:C,renderCache:M,props:P,data:j,setupState:J,ctx:R,inheritAttrs:Z}=e,q=ul(e);let xe,ie;try{if(s.shapeFlag&4){const le=h||l,Oe=le;xe=Oi(C.call(Oe,le,M,P,J,j,R)),ie=y}else{const le=i;xe=Oi(le.length>1?le(P,{attrs:y,slots:f,emit:v}):le(P,null)),ie=i.props?y:Q0(y)}}catch(le){jo.length=0,Ml(le,e,1),xe=sn(Qr)}let V=xe;if(ie&&Z!==!1){const le=Object.keys(ie),{shapeFlag:Oe}=V;le.length&&Oe&7&&(p&&le.some(Ac)&&(ie=eg(ie,p)),V=$s(V,ie,!1,!0))}return s.dirs&&(V=$s(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(s.dirs):s.dirs),s.transition&&Vc(V,s.transition),xe=V,ul(q),xe}const Q0=e=>{let i;for(const s in e)(s==="class"||s==="style"||xl(s))&&((i||(i={}))[s]=e[s]);return i},eg=(e,i)=>{const s={};for(const l in e)(!Ac(l)||!(l.slice(9)in i))&&(s[l]=e[l]);return s};function tg(e,i,s){const{props:l,children:h,component:p}=e,{props:f,children:y,patchFlag:v}=i,C=p.emitsOptions;if(i.dirs||i.transition)return!0;if(s&&v>=0){if(v&1024)return!0;if(v&16)return l?Lh(l,f,C):!!f;if(v&8){const M=i.dynamicProps;for(let P=0;P<M.length;P++){const j=M[P];if(f[j]!==l[j]&&!Bl(C,j))return!0}}}else return(h||y)&&(!y||!y.$stable)?!0:l===f?!1:l?f?Lh(l,f,C):!0:!!f;return!1}function Lh(e,i,s){const l=Object.keys(i);if(l.length!==Object.keys(e).length)return!0;for(let h=0;h<l.length;h++){const p=l[h];if(i[p]!==e[p]&&!Bl(s,p))return!0}return!1}function ng({vnode:e,parent:i},s){for(;i;){const l=i.subTree;if(l.suspense&&l.suspense.activeBranch===e&&(l.el=e.el),l===e)(e=i.vnode).el=s,i=i.parent;else break}}const Of=e=>e.__isSuspense;function ig(e,i){i&&i.pendingBranch?pt(e)?i.effects.push(...e):i.effects.push(e):d0(e)}const Lt=Symbol.for("v-fgt"),Al=Symbol.for("v-txt"),Qr=Symbol.for("v-cmt"),Ya=Symbol.for("v-stc"),jo=[];let ti=null;function _e(e=!1){jo.push(ti=e?null:[])}function rg(){jo.pop(),ti=jo[jo.length-1]||null}let Ko=1;function Ch(e,i=!1){Ko+=e,e<0&&ti&&i&&(ti.hasOnce=!0)}function If(e){return e.dynamicChildren=Ko>0?ti||Is:null,rg(),Ko>0&&ti&&ti.push(e),e}function we(e,i,s,l,h,p){return If(w(e,i,s,l,h,p,!0))}function nr(e,i,s,l,h){return If(sn(e,i,s,l,h,!0))}function dl(e){return e?e.__v_isVNode===!0:!1}function So(e,i){return e.type===i.type&&e.key===i.key}const Ff=({key:e})=>e??null,Qa=({ref:e,ref_key:i,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?un(e)||on(e)||wt(e)?{i:Zn,r:e,k:i,f:!!s}:e:null);function w(e,i=null,s=null,l=0,h=null,p=e===Lt?0:1,f=!1,y=!1){const v={__v_isVNode:!0,__v_skip:!0,type:e,props:i,key:i&&Ff(i),ref:i&&Qa(i),scopeId:pf,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:l,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:Zn};return y?(qc(v,s),p&128&&e.normalize(v)):s&&(v.shapeFlag|=un(s)?8:16),Ko>0&&!f&&ti&&(v.patchFlag>0||p&6)&&v.patchFlag!==32&&ti.push(v),v}const sn=sg;function sg(e,i=null,s=null,l=0,h=null,p=!1){if((!e||e===M0)&&(e=Qr),dl(e)){const y=$s(e,i,!0);return s&&qc(y,s),Ko>0&&!p&&ti&&(y.shapeFlag&6?ti[ti.indexOf(e)]=y:ti.push(y)),y.patchFlag=-2,y}if(_g(e)&&(e=e.__vccOpts),i){i=og(i);let{class:y,style:v}=i;y&&!un(y)&&(i.class=$n(y)),qt(v)&&(jc(v)&&!pt(v)&&(v=Bn({},v)),i.style=kl(v))}const f=un(e)?1:Of(e)?128:p0(e)?64:qt(e)?4:wt(e)?2:0;return w(e,i,s,l,h,f,p,!0)}function og(e){return e?jc(e)||Lf(e)?Bn({},e):e:null}function $s(e,i,s=!1,l=!1){const{props:h,ref:p,patchFlag:f,children:y,transition:v}=e,C=i?lg(h||{},i):h,M={__v_isVNode:!0,__v_skip:!0,type:e.type,props:C,key:C&&Ff(C),ref:i&&i.ref?s&&p?pt(p)?p.concat(Qa(i)):[p,Qa(i)]:Qa(i):p,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:y,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:i&&e.type!==Lt?f===-1?16:f|16:f,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:v,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&$s(e.ssContent),ssFallback:e.ssFallback&&$s(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return v&&l&&Vc(M,v.clone(M)),M}function Jt(e=" ",i=0){return sn(Al,null,e,i)}function ag(e,i){const s=sn(Ya,null,e);return s.staticCount=i,s}function dt(e="",i=!1){return i?(_e(),nr(Qr,null,e)):sn(Qr,null,e)}function Oi(e){return e==null||typeof e=="boolean"?sn(Qr):pt(e)?sn(Lt,null,e.slice()):dl(e)?xr(e):sn(Al,null,String(e))}function xr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:$s(e)}function qc(e,i){let s=0;const{shapeFlag:l}=e;if(i==null)i=null;else if(pt(i))s=16;else if(typeof i=="object")if(l&65){const h=i.default;h&&(h._c&&(h._d=!1),qc(e,h()),h._c&&(h._d=!0));return}else{s=32;const h=i._;!h&&!Lf(i)?i._ctx=Zn:h===3&&Zn&&(Zn.slots._===1?i._=1:(i._=2,e.patchFlag|=1024))}else wt(i)?(i={default:i,_ctx:Zn},s=32):(i=String(i),l&64?(s=16,i=[Jt(i)]):s=8);e.children=i,e.shapeFlag|=s}function lg(...e){const i={};for(let s=0;s<e.length;s++){const l=e[s];for(const h in l)if(h==="class")i.class!==l.class&&(i.class=$n([i.class,l.class]));else if(h==="style")i.style=kl([i.style,l.style]);else if(xl(h)){const p=i[h],f=l[h];f&&p!==f&&!(pt(p)&&p.includes(f))&&(i[h]=p?[].concat(p,f):f)}else h!==""&&(i[h]=l[h])}return i}function Ti(e,i,s,l=null){Ni(e,i,7,[s,l])}const ug=bf();let cg=0;function hg(e,i,s){const l=e.type,h=(i?i.appContext:e.appContext)||ug,p={uid:cg++,vnode:e,type:l,parent:i,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ud(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:i?i.provides:Object.create(h.provides),ids:i?i.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kf(l,h),emitsOptions:Rf(l,h),emit:null,emitted:null,propsDefaults:Gt,inheritAttrs:l.inheritAttrs,ctx:Gt,data:Gt,props:Gt,attrs:Gt,slots:Gt,refs:Gt,setupState:Gt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=i?i.root:p,p.emit=Y0.bind(null,p),e.ce&&e.ce(p),p}let xn=null,fl,dc;{const e=Cl(),i=(s,l)=>{let h;return(h=e[s])||(h=e[s]=[]),h.push(l),p=>{h.length>1?h.forEach(f=>f(p)):h[0](p)}};fl=i("__VUE_INSTANCE_SETTERS__",s=>xn=s),dc=i("__VUE_SSR_SETTERS__",s=>Wo=s)}const na=e=>{const i=xn;return fl(e),e.scope.on(),()=>{e.scope.off(),fl(i)}},kh=()=>{xn&&xn.scope.off(),fl(null)};function Nf(e){return e.vnode.shapeFlag&4}let Wo=!1;function dg(e,i=!1,s=!1){i&&dc(i);const{props:l,children:h}=e.vnode,p=Nf(e);N0(e,l,p,i),U0(e,h,s);const f=p?fg(e,i):void 0;return i&&dc(!1),f}function fg(e,i){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,S0);const{setup:l}=s;if(l){Er();const h=e.setupContext=l.length>1?mg(e):null,p=na(e),f=ta(l,e,0,[e.props,h]),y=Od(f);if(Mr(),p(),(y||e.sp)&&!zo(e)&&mf(e),y){if(f.then(kh,kh),i)return f.then(v=>{Eh(e,v)}).catch(v=>{Ml(v,e,0)});e.asyncDep=f}else Eh(e,f)}else zf(e)}function Eh(e,i,s){wt(i)?e.type.__ssrInlineRender?e.ssrRender=i:e.render=i:qt(i)&&(e.setupState=uf(i)),zf(e)}function zf(e,i,s){const l=e.type;e.render||(e.render=l.render||Ii);{const h=na(e);Er();try{B0(e)}finally{Mr(),h()}}}const pg={get(e,i){return Mn(e,"get",""),e[i]}};function mg(e){const i=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,pg),slots:e.slots,emit:e.emit,expose:i}}function Tl(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(uf(Uc(e.exposed)),{get(i,s){if(s in i)return i[s];if(s in $o)return $o[s](e)},has(i,s){return s in i||s in $o}})):e.proxy}function gg(e,i=!0){return wt(e)?e.displayName||e.name:e.name||i&&e.__name}function _g(e){return wt(e)&&"__vccOpts"in e}const kt=(e,i)=>a0(e,i,Wo);function $f(e,i,s){const l=arguments.length;return l===2?qt(i)&&!pt(i)?dl(i)?sn(e,null,[i]):sn(e,i):sn(e,null,i):(l>3?s=Array.prototype.slice.call(arguments,2):l===3&&dl(s)&&(s=[s]),sn(e,i,s))}const yg="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fc;const Mh=typeof window<"u"&&window.trustedTypes;if(Mh)try{fc=Mh.createPolicy("vue",{createHTML:e=>e})}catch{}const jf=fc?e=>fc.createHTML(e):e=>e,vg="http://www.w3.org/2000/svg",bg="http://www.w3.org/1998/Math/MathML",Yi=typeof document<"u"?document:null,Ph=Yi&&Yi.createElement("template"),xg={insert:(e,i,s)=>{i.insertBefore(e,s||null)},remove:e=>{const i=e.parentNode;i&&i.removeChild(e)},createElement:(e,i,s,l)=>{const h=i==="svg"?Yi.createElementNS(vg,e):i==="mathml"?Yi.createElementNS(bg,e):s?Yi.createElement(e,{is:s}):Yi.createElement(e);return e==="select"&&l&&l.multiple!=null&&h.setAttribute("multiple",l.multiple),h},createText:e=>Yi.createTextNode(e),createComment:e=>Yi.createComment(e),setText:(e,i)=>{e.nodeValue=i},setElementText:(e,i)=>{e.textContent=i},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Yi.querySelector(e),setScopeId(e,i){e.setAttribute(i,"")},insertStaticContent(e,i,s,l,h,p){const f=s?s.previousSibling:i.lastChild;if(h&&(h===p||h.nextSibling))for(;i.insertBefore(h.cloneNode(!0),s),!(h===p||!(h=h.nextSibling)););else{Ph.innerHTML=jf(l==="svg"?`<svg>${e}</svg>`:l==="mathml"?`<math>${e}</math>`:e);const y=Ph.content;if(l==="svg"||l==="mathml"){const v=y.firstChild;for(;v.firstChild;)y.appendChild(v.firstChild);y.removeChild(v)}i.insertBefore(y,s)}return[f?f.nextSibling:i.firstChild,s?s.previousSibling:i.lastChild]}},wg=Symbol("_vtc");function Lg(e,i,s){const l=e[wg];l&&(i=(i?[i,...l]:[...l]).join(" ")),i==null?e.removeAttribute("class"):s?e.setAttribute("class",i):e.className=i}const pl=Symbol("_vod"),Uf=Symbol("_vsh"),Cg={beforeMount(e,{value:i},{transition:s}){e[pl]=e.style.display==="none"?"":e.style.display,s&&i?s.beforeEnter(e):Bo(e,i)},mounted(e,{value:i},{transition:s}){s&&i&&s.enter(e)},updated(e,{value:i,oldValue:s},{transition:l}){!i!=!s&&(l?i?(l.beforeEnter(e),Bo(e,!0),l.enter(e)):l.leave(e,()=>{Bo(e,!1)}):Bo(e,i))},beforeUnmount(e,{value:i}){Bo(e,i)}};function Bo(e,i){e.style.display=i?e[pl]:"none",e[Uf]=!i}const kg=Symbol(""),Eg=/(^|;)\s*display\s*:/;function Mg(e,i,s){const l=e.style,h=un(s);let p=!1;if(s&&!h){if(i)if(un(i))for(const f of i.split(";")){const y=f.slice(0,f.indexOf(":")).trim();s[y]==null&&el(l,y,"")}else for(const f in i)s[f]==null&&el(l,f,"");for(const f in s)f==="display"&&(p=!0),el(l,f,s[f])}else if(h){if(i!==s){const f=l[kg];f&&(s+=";"+f),l.cssText=s,p=Eg.test(s)}}else i&&e.removeAttribute("style");pl in e&&(e[pl]=p?l.display:"",e[Uf]&&(l.display="none"))}const Sh=/\s*!important$/;function el(e,i,s){if(pt(s))s.forEach(l=>el(e,i,l));else if(s==null&&(s=""),i.startsWith("--"))e.setProperty(i,s);else{const l=Pg(e,i);Sh.test(s)?e.setProperty(ts(l),s.replace(Sh,""),"important"):e[l]=s}}const Bh=["Webkit","Moz","ms"],Hu={};function Pg(e,i){const s=Hu[i];if(s)return s;let l=mi(i);if(l!=="filter"&&l in e)return Hu[i]=l;l=Ll(l);for(let h=0;h<Bh.length;h++){const p=Bh[h]+l;if(p in e)return Hu[i]=p}return i}const Ah="http://www.w3.org/1999/xlink";function Th(e,i,s,l,h,p=Tm(i)){l&&i.startsWith("xlink:")?s==null?e.removeAttributeNS(Ah,i.slice(6,i.length)):e.setAttributeNS(Ah,i,s):s==null||p&&!zd(s)?e.removeAttribute(i):e.setAttribute(i,p?"":Fi(s)?String(s):s)}function Dh(e,i,s,l,h){if(i==="innerHTML"||i==="textContent"){s!=null&&(e[i]=i==="innerHTML"?jf(s):s);return}const p=e.tagName;if(i==="value"&&p!=="PROGRESS"&&!p.includes("-")){const y=p==="OPTION"?e.getAttribute("value")||"":e.value,v=s==null?e.type==="checkbox"?"on":"":String(s);(y!==v||!("_value"in e))&&(e.value=v),s==null&&e.removeAttribute(i),e._value=s;return}let f=!1;if(s===""||s==null){const y=typeof e[i];y==="boolean"?s=zd(s):s==null&&y==="string"?(s="",f=!0):y==="number"&&(s=0,f=!0)}try{e[i]=s}catch{}f&&e.removeAttribute(h||i)}function tr(e,i,s,l){e.addEventListener(i,s,l)}function Sg(e,i,s,l){e.removeEventListener(i,s,l)}const Rh=Symbol("_vei");function Bg(e,i,s,l,h=null){const p=e[Rh]||(e[Rh]={}),f=p[i];if(l&&f)f.value=l;else{const[y,v]=Ag(i);if(l){const C=p[i]=Rg(l,h);tr(e,y,C,v)}else f&&(Sg(e,y,f,v),p[i]=void 0)}}const Oh=/(?:Once|Passive|Capture)$/;function Ag(e){let i;if(Oh.test(e)){i={};let l;for(;l=e.match(Oh);)e=e.slice(0,e.length-l[0].length),i[l[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ts(e.slice(2)),i]}let Zu=0;const Tg=Promise.resolve(),Dg=()=>Zu||(Tg.then(()=>Zu=0),Zu=Date.now());function Rg(e,i){const s=l=>{if(!l._vts)l._vts=Date.now();else if(l._vts<=s.attached)return;Ni(Og(l,s.value),i,5,[l])};return s.value=e,s.attached=Dg(),s}function Og(e,i){if(pt(i)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},i.map(l=>h=>!h._stopped&&l&&l(h))}else return i}const Ih=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ig=(e,i,s,l,h,p)=>{const f=h==="svg";i==="class"?Lg(e,l,f):i==="style"?Mg(e,s,l):xl(i)?Ac(i)||Bg(e,i,s,l,p):(i[0]==="."?(i=i.slice(1),!0):i[0]==="^"?(i=i.slice(1),!1):Fg(e,i,l,f))?(Dh(e,i,l),!e.tagName.includes("-")&&(i==="value"||i==="checked"||i==="selected")&&Th(e,i,l,f,p,i!=="value")):e._isVueCE&&(/[A-Z]/.test(i)||!un(l))?Dh(e,mi(i),l,p,i):(i==="true-value"?e._trueValue=l:i==="false-value"&&(e._falseValue=l),Th(e,i,l,f))};function Fg(e,i,s,l){if(l)return!!(i==="innerHTML"||i==="textContent"||i in e&&Ih(i)&&wt(s));if(i==="spellcheck"||i==="draggable"||i==="translate"||i==="form"||i==="list"&&e.tagName==="INPUT"||i==="type"&&e.tagName==="TEXTAREA")return!1;if(i==="width"||i==="height"){const h=e.tagName;if(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")return!1}return Ih(i)&&un(s)?!1:i in e}const kr=e=>{const i=e.props["onUpdate:modelValue"]||!1;return pt(i)?s=>Ja(i,s):i};function Ng(e){e.target.composing=!0}function Fh(e){const i=e.target;i.composing&&(i.composing=!1,i.dispatchEvent(new Event("input")))}const pi=Symbol("_assign"),en={created(e,{modifiers:{lazy:i,trim:s,number:l}},h){e[pi]=kr(h);const p=l||h.props&&h.props.type==="number";tr(e,i?"change":"input",f=>{if(f.target.composing)return;let y=e.value;s&&(y=y.trim()),p&&(y=sl(y)),e[pi](y)}),s&&tr(e,"change",()=>{e.value=e.value.trim()}),i||(tr(e,"compositionstart",Ng),tr(e,"compositionend",Fh),tr(e,"change",Fh))},mounted(e,{value:i}){e.value=i??""},beforeUpdate(e,{value:i,oldValue:s,modifiers:{lazy:l,trim:h,number:p}},f){if(e[pi]=kr(f),e.composing)return;const y=(p||e.type==="number")&&!/^0\d/.test(e.value)?sl(e.value):e.value,v=i??"";y!==v&&(document.activeElement===e&&e.type!=="range"&&(l&&i===s||h&&e.value.trim()===v)||(e.value=v))}},Gf={deep:!0,created(e,i,s){e[pi]=kr(s),tr(e,"change",()=>{const l=e._modelValue,h=js(e),p=e.checked,f=e[pi];if(pt(l)){const y=Rc(l,h),v=y!==-1;if(p&&!v)f(l.concat(h));else if(!p&&v){const C=[...l];C.splice(y,1),f(C)}}else if(Vs(l)){const y=new Set(l);p?y.add(h):y.delete(h),f(y)}else f(Vf(e,p))})},mounted:Nh,beforeUpdate(e,i,s){e[pi]=kr(s),Nh(e,i,s)}};function Nh(e,{value:i,oldValue:s},l){e._modelValue=i;let h;if(pt(i))h=Rc(i,l.props.value)>-1;else if(Vs(i))h=i.has(l.props.value);else{if(i===s)return;h=Xr(i,Vf(e,!0))}e.checked!==h&&(e.checked=h)}const zg={created(e,{value:i},s){e.checked=Xr(i,s.props.value),e[pi]=kr(s),tr(e,"change",()=>{e[pi](js(e))})},beforeUpdate(e,{value:i,oldValue:s},l){e[pi]=kr(l),i!==s&&(e.checked=Xr(i,l.props.value))}},Qn={deep:!0,created(e,{value:i,modifiers:{number:s}},l){const h=Vs(i);tr(e,"change",()=>{const p=Array.prototype.filter.call(e.options,f=>f.selected).map(f=>s?sl(js(f)):js(f));e[pi](e.multiple?h?new Set(p):p:p[0]),e._assigning=!0,zs(()=>{e._assigning=!1})}),e[pi]=kr(l)},mounted(e,{value:i}){zh(e,i)},beforeUpdate(e,i,s){e[pi]=kr(s)},updated(e,{value:i}){e._assigning||zh(e,i)}};function zh(e,i){const s=e.multiple,l=pt(i);if(!(s&&!l&&!Vs(i))){for(let h=0,p=e.options.length;h<p;h++){const f=e.options[h],y=js(f);if(s)if(l){const v=typeof y;v==="string"||v==="number"?f.selected=i.some(C=>String(C)===String(y)):f.selected=Rc(i,y)>-1}else f.selected=i.has(y);else if(Xr(js(f),i)){e.selectedIndex!==h&&(e.selectedIndex=h);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function js(e){return"_value"in e?e._value:e.value}function Vf(e,i){const s=i?"_trueValue":"_falseValue";return s in e?e[s]:i}const $g={created(e,i,s){qa(e,i,s,null,"created")},mounted(e,i,s){qa(e,i,s,null,"mounted")},beforeUpdate(e,i,s,l){qa(e,i,s,l,"beforeUpdate")},updated(e,i,s,l){qa(e,i,s,l,"updated")}};function jg(e,i){switch(e){case"SELECT":return Qn;case"TEXTAREA":return en;default:switch(i){case"checkbox":return Gf;case"radio":return zg;default:return en}}}function qa(e,i,s,l,h){const f=jg(e.tagName,s.props&&s.props.type)[h];f&&f(e,i,s,l)}const Ug=["ctrl","shift","alt","meta"],Gg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,i)=>Ug.some(s=>e[`${s}Key`]&&!i.includes(s))},Dl=(e,i)=>{const s=e._withMods||(e._withMods={}),l=i.join(".");return s[l]||(s[l]=(h,...p)=>{for(let f=0;f<i.length;f++){const y=Gg[i[f]];if(y&&y(h,i))return}return e(h,...p)})},Vg=Bn({patchProp:Ig},xg);let $h;function Hg(){return $h||($h=V0(Vg))}const Zg=(...e)=>{const i=Hg().createApp(...e),{mount:s}=i;return i.mount=l=>{const h=Kg(l);if(!h)return;const p=i._component;!wt(p)&&!p.render&&!p.template&&(p.template=h.innerHTML),h.nodeType===1&&(h.textContent="");const f=s(h,!1,qg(h));return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),f},i};function qg(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Kg(e){return un(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Hf;const Rl=e=>Hf=e,Zf=Symbol();function pc(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Uo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Uo||(Uo={}));function Wg(){const e=Gd(!0),i=e.run(()=>qe({}));let s=[],l=[];const h=Uc({install(p){Rl(h),h._a=p,p.provide(Zf,h),p.config.globalProperties.$pinia=h,l.forEach(f=>s.push(f)),l=[]},use(p){return this._a?s.push(p):l.push(p),this},_p:s,_a:null,_e:e,_s:new Map,state:i});return h}const qf=()=>{};function jh(e,i,s,l=qf){e.push(i);const h=()=>{const p=e.indexOf(i);p>-1&&(e.splice(p,1),l())};return!s&&Vd()&&Rm(h),h}function As(e,...i){e.slice().forEach(s=>{s(...i)})}const Jg=e=>e(),Uh=Symbol(),qu=Symbol();function mc(e,i){e instanceof Map&&i instanceof Map?i.forEach((s,l)=>e.set(l,s)):e instanceof Set&&i instanceof Set&&i.forEach(e.add,e);for(const s in i){if(!i.hasOwnProperty(s))continue;const l=i[s],h=e[s];pc(h)&&pc(l)&&e.hasOwnProperty(s)&&!on(l)&&!Cr(l)?e[s]=mc(h,l):e[s]=l}return e}const Xg=Symbol();function Yg(e){return!pc(e)||!e.hasOwnProperty(Xg)}const{assign:vr}=Object;function Qg(e){return!!(on(e)&&e.effect)}function e_(e,i,s,l){const{state:h,actions:p,getters:f}=i,y=s.state.value[e];let v;function C(){y||(s.state.value[e]=h?h():{});const M=i0(s.state.value[e]);return vr(M,p,Object.keys(f||{}).reduce((P,j)=>(P[j]=Uc(kt(()=>{Rl(s);const J=s._s.get(e);return f[j].call(J,J)})),P),{}))}return v=Kf(e,C,i,s,l,!0),v}function Kf(e,i,s={},l,h,p){let f;const y=vr({actions:{}},s),v={deep:!0};let C,M,P=[],j=[],J;const R=l.state.value[e];!p&&!R&&(l.state.value[e]={}),qe({});let Z;function q(F){let te;C=M=!1,typeof F=="function"?(F(l.state.value[e]),te={type:Uo.patchFunction,storeId:e,events:J}):(mc(l.state.value[e],F),te={type:Uo.patchObject,payload:F,storeId:e,events:J});const ye=Z=Symbol();zs().then(()=>{Z===ye&&(C=!0)}),M=!0,As(P,te,l.state.value[e])}const xe=p?function(){const{state:te}=s,ye=te?te():{};this.$patch(ne=>{vr(ne,ye)})}:qf;function ie(){f.stop(),P=[],j=[],l._s.delete(e)}const V=(F,te="")=>{if(Uh in F)return F[qu]=te,F;const ye=function(){Rl(l);const ne=Array.from(arguments),Be=[],Fe=[];function re(ve){Be.push(ve)}function Se(ve){Fe.push(ve)}As(j,{args:ne,name:ye[qu],store:Oe,after:re,onError:Se});let Ae;try{Ae=F.apply(this&&this.$id===e?this:Oe,ne)}catch(ve){throw As(Fe,ve),ve}return Ae instanceof Promise?Ae.then(ve=>(As(Be,ve),ve)).catch(ve=>(As(Fe,ve),Promise.reject(ve))):(As(Be,Ae),Ae)};return ye[Uh]=!0,ye[qu]=te,ye},le={_p:l,$id:e,$onAction:jh.bind(null,j),$patch:q,$reset:xe,$subscribe(F,te={}){const ye=jh(P,F,te.detached,()=>ne()),ne=f.run(()=>ei(()=>l.state.value[e],Be=>{(te.flush==="sync"?M:C)&&F({storeId:e,type:Uo.direct,events:J},Be)},vr({},v,te)));return ye},$dispose:ie},Oe=sr(le);l._s.set(e,Oe);const Pe=(l._a&&l._a.runWithContext||Jg)(()=>l._e.run(()=>(f=Gd()).run(()=>i({action:V}))));for(const F in Pe){const te=Pe[F];if(on(te)&&!Qg(te)||Cr(te))p||(R&&Yg(te)&&(on(te)?te.value=R[F]:mc(te,R[F])),l.state.value[e][F]=te);else if(typeof te=="function"){const ye=V(te,F);Pe[F]=ye,y.actions[F]=te}}return vr(Oe,Pe),vr(It(Oe),Pe),Object.defineProperty(Oe,"$state",{get:()=>l.state.value[e],set:F=>{q(te=>{vr(te,F)})}}),l._p.forEach(F=>{vr(Oe,f.run(()=>F({store:Oe,app:l._a,pinia:l,options:y})))}),R&&p&&s.hydrate&&s.hydrate(Oe.$state,R),C=!0,M=!0,Oe}/*! #__NO_SIDE_EFFECTS__ */function Kc(e,i,s){let l,h;const p=typeof i=="function";typeof e=="string"?(l=e,h=p?s:i):(h=e,l=e.id);function f(y,v){const C=F0();return y=y||(C?fi(Zf,null):null),y&&Rl(y),y=Hf,y._s.has(l)||(p?Kf(l,i,h,y):e_(l,h,y)),y._s.get(l)}return f.$id=l,f}function Wf(e,i){return function(){return e.apply(i,arguments)}}const{toString:t_}=Object.prototype,{getPrototypeOf:Wc}=Object,Ol=(e=>i=>{const s=t_.call(i);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Li=e=>(e=e.toLowerCase(),i=>Ol(i)===e),Il=e=>i=>typeof i===e,{isArray:Hs}=Array,Jo=Il("undefined");function n_(e){return e!==null&&!Jo(e)&&e.constructor!==null&&!Jo(e.constructor)&&ni(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Jf=Li("ArrayBuffer");function i_(e){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(e):i=e&&e.buffer&&Jf(e.buffer),i}const r_=Il("string"),ni=Il("function"),Xf=Il("number"),Fl=e=>e!==null&&typeof e=="object",s_=e=>e===!0||e===!1,tl=e=>{if(Ol(e)!=="object")return!1;const i=Wc(e);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},o_=Li("Date"),a_=Li("File"),l_=Li("Blob"),u_=Li("FileList"),c_=e=>Fl(e)&&ni(e.pipe),h_=e=>{let i;return e&&(typeof FormData=="function"&&e instanceof FormData||ni(e.append)&&((i=Ol(e))==="formdata"||i==="object"&&ni(e.toString)&&e.toString()==="[object FormData]"))},d_=Li("URLSearchParams"),[f_,p_,m_,g_]=["ReadableStream","Request","Response","Headers"].map(Li),__=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ia(e,i,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let l,h;if(typeof e!="object"&&(e=[e]),Hs(e))for(l=0,h=e.length;l<h;l++)i.call(null,e[l],l,e);else{const p=s?Object.getOwnPropertyNames(e):Object.keys(e),f=p.length;let y;for(l=0;l<f;l++)y=p[l],i.call(null,e[y],y,e)}}function Yf(e,i){i=i.toLowerCase();const s=Object.keys(e);let l=s.length,h;for(;l-- >0;)if(h=s[l],i===h.toLowerCase())return h;return null}const Zr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Qf=e=>!Jo(e)&&e!==Zr;function gc(){const{caseless:e}=Qf(this)&&this||{},i={},s=(l,h)=>{const p=e&&Yf(i,h)||h;tl(i[p])&&tl(l)?i[p]=gc(i[p],l):tl(l)?i[p]=gc({},l):Hs(l)?i[p]=l.slice():i[p]=l};for(let l=0,h=arguments.length;l<h;l++)arguments[l]&&ia(arguments[l],s);return i}const y_=(e,i,s,{allOwnKeys:l}={})=>(ia(i,(h,p)=>{s&&ni(h)?e[p]=Wf(h,s):e[p]=h},{allOwnKeys:l}),e),v_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),b_=(e,i,s,l)=>{e.prototype=Object.create(i.prototype,l),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:i.prototype}),s&&Object.assign(e.prototype,s)},x_=(e,i,s,l)=>{let h,p,f;const y={};if(i=i||{},e==null)return i;do{for(h=Object.getOwnPropertyNames(e),p=h.length;p-- >0;)f=h[p],(!l||l(f,e,i))&&!y[f]&&(i[f]=e[f],y[f]=!0);e=s!==!1&&Wc(e)}while(e&&(!s||s(e,i))&&e!==Object.prototype);return i},w_=(e,i,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=i.length;const l=e.indexOf(i,s);return l!==-1&&l===s},L_=e=>{if(!e)return null;if(Hs(e))return e;let i=e.length;if(!Xf(i))return null;const s=new Array(i);for(;i-- >0;)s[i]=e[i];return s},C_=(e=>i=>e&&i instanceof e)(typeof Uint8Array<"u"&&Wc(Uint8Array)),k_=(e,i)=>{const l=(e&&e[Symbol.iterator]).call(e);let h;for(;(h=l.next())&&!h.done;){const p=h.value;i.call(e,p[0],p[1])}},E_=(e,i)=>{let s;const l=[];for(;(s=e.exec(i))!==null;)l.push(s);return l},M_=Li("HTMLFormElement"),P_=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,l,h){return l.toUpperCase()+h}),Gh=(({hasOwnProperty:e})=>(i,s)=>e.call(i,s))(Object.prototype),S_=Li("RegExp"),ep=(e,i)=>{const s=Object.getOwnPropertyDescriptors(e),l={};ia(s,(h,p)=>{let f;(f=i(h,p,e))!==!1&&(l[p]=f||h)}),Object.defineProperties(e,l)},B_=e=>{ep(e,(i,s)=>{if(ni(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const l=e[s];if(ni(l)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},A_=(e,i)=>{const s={},l=h=>{h.forEach(p=>{s[p]=!0})};return Hs(e)?l(e):l(String(e).split(i)),s},T_=()=>{},D_=(e,i)=>e!=null&&Number.isFinite(e=+e)?e:i,Ku="abcdefghijklmnopqrstuvwxyz",Vh="0123456789",tp={DIGIT:Vh,ALPHA:Ku,ALPHA_DIGIT:Ku+Ku.toUpperCase()+Vh},R_=(e=16,i=tp.ALPHA_DIGIT)=>{let s="";const{length:l}=i;for(;e--;)s+=i[Math.random()*l|0];return s};function O_(e){return!!(e&&ni(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const I_=e=>{const i=new Array(10),s=(l,h)=>{if(Fl(l)){if(i.indexOf(l)>=0)return;if(!("toJSON"in l)){i[h]=l;const p=Hs(l)?[]:{};return ia(l,(f,y)=>{const v=s(f,h+1);!Jo(v)&&(p[y]=v)}),i[h]=void 0,p}}return l};return s(e,0)},F_=Li("AsyncFunction"),N_=e=>e&&(Fl(e)||ni(e))&&ni(e.then)&&ni(e.catch),np=((e,i)=>e?setImmediate:i?((s,l)=>(Zr.addEventListener("message",({source:h,data:p})=>{h===Zr&&p===s&&l.length&&l.shift()()},!1),h=>{l.push(h),Zr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",ni(Zr.postMessage)),z_=typeof queueMicrotask<"u"?queueMicrotask.bind(Zr):typeof process<"u"&&process.nextTick||np,Te={isArray:Hs,isArrayBuffer:Jf,isBuffer:n_,isFormData:h_,isArrayBufferView:i_,isString:r_,isNumber:Xf,isBoolean:s_,isObject:Fl,isPlainObject:tl,isReadableStream:f_,isRequest:p_,isResponse:m_,isHeaders:g_,isUndefined:Jo,isDate:o_,isFile:a_,isBlob:l_,isRegExp:S_,isFunction:ni,isStream:c_,isURLSearchParams:d_,isTypedArray:C_,isFileList:u_,forEach:ia,merge:gc,extend:y_,trim:__,stripBOM:v_,inherits:b_,toFlatObject:x_,kindOf:Ol,kindOfTest:Li,endsWith:w_,toArray:L_,forEachEntry:k_,matchAll:E_,isHTMLForm:M_,hasOwnProperty:Gh,hasOwnProp:Gh,reduceDescriptors:ep,freezeMethods:B_,toObjectSet:A_,toCamelCase:P_,noop:T_,toFiniteNumber:D_,findKey:Yf,global:Zr,isContextDefined:Qf,ALPHABET:tp,generateString:R_,isSpecCompliantForm:O_,toJSONObject:I_,isAsyncFn:F_,isThenable:N_,setImmediate:np,asap:z_};function Ct(e,i,s,l,h){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",i&&(this.code=i),s&&(this.config=s),l&&(this.request=l),h&&(this.response=h,this.status=h.status?h.status:null)}Te.inherits(Ct,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const ip=Ct.prototype,rp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{rp[e]={value:e}});Object.defineProperties(Ct,rp);Object.defineProperty(ip,"isAxiosError",{value:!0});Ct.from=(e,i,s,l,h,p)=>{const f=Object.create(ip);return Te.toFlatObject(e,f,function(v){return v!==Error.prototype},y=>y!=="isAxiosError"),Ct.call(f,e.message,i,s,l,h),f.cause=e,f.name=e.name,p&&Object.assign(f,p),f};const $_=null;function _c(e){return Te.isPlainObject(e)||Te.isArray(e)}function sp(e){return Te.endsWith(e,"[]")?e.slice(0,-2):e}function Hh(e,i,s){return e?e.concat(i).map(function(h,p){return h=sp(h),!s&&p?"["+h+"]":h}).join(s?".":""):i}function j_(e){return Te.isArray(e)&&!e.some(_c)}const U_=Te.toFlatObject(Te,{},null,function(i){return/^is[A-Z]/.test(i)});function Nl(e,i,s){if(!Te.isObject(e))throw new TypeError("target must be an object");i=i||new FormData,s=Te.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Z,q){return!Te.isUndefined(q[Z])});const l=s.metaTokens,h=s.visitor||M,p=s.dots,f=s.indexes,v=(s.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(i);if(!Te.isFunction(h))throw new TypeError("visitor must be a function");function C(R){if(R===null)return"";if(Te.isDate(R))return R.toISOString();if(!v&&Te.isBlob(R))throw new Ct("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(R)||Te.isTypedArray(R)?v&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function M(R,Z,q){let xe=R;if(R&&!q&&typeof R=="object"){if(Te.endsWith(Z,"{}"))Z=l?Z:Z.slice(0,-2),R=JSON.stringify(R);else if(Te.isArray(R)&&j_(R)||(Te.isFileList(R)||Te.endsWith(Z,"[]"))&&(xe=Te.toArray(R)))return Z=sp(Z),xe.forEach(function(V,le){!(Te.isUndefined(V)||V===null)&&i.append(f===!0?Hh([Z],le,p):f===null?Z:Z+"[]",C(V))}),!1}return _c(R)?!0:(i.append(Hh(q,Z,p),C(R)),!1)}const P=[],j=Object.assign(U_,{defaultVisitor:M,convertValue:C,isVisitable:_c});function J(R,Z){if(!Te.isUndefined(R)){if(P.indexOf(R)!==-1)throw Error("Circular reference detected in "+Z.join("."));P.push(R),Te.forEach(R,function(xe,ie){(!(Te.isUndefined(xe)||xe===null)&&h.call(i,xe,Te.isString(ie)?ie.trim():ie,Z,j))===!0&&J(xe,Z?Z.concat(ie):[ie])}),P.pop()}}if(!Te.isObject(e))throw new TypeError("data must be an object");return J(e),i}function Zh(e){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(l){return i[l]})}function Jc(e,i){this._pairs=[],e&&Nl(e,this,i)}const op=Jc.prototype;op.append=function(i,s){this._pairs.push([i,s])};op.toString=function(i){const s=i?function(l){return i.call(this,l,Zh)}:Zh;return this._pairs.map(function(h){return s(h[0])+"="+s(h[1])},"").join("&")};function G_(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ap(e,i,s){if(!i)return e;const l=s&&s.encode||G_;Te.isFunction(s)&&(s={serialize:s});const h=s&&s.serialize;let p;if(h?p=h(i,s):p=Te.isURLSearchParams(i)?i.toString():new Jc(i,s).toString(l),p){const f=e.indexOf("#");f!==-1&&(e=e.slice(0,f)),e+=(e.indexOf("?")===-1?"?":"&")+p}return e}class qh{constructor(){this.handlers=[]}use(i,s,l){return this.handlers.push({fulfilled:i,rejected:s,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){Te.forEach(this.handlers,function(l){l!==null&&i(l)})}}const lp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},V_=typeof URLSearchParams<"u"?URLSearchParams:Jc,H_=typeof FormData<"u"?FormData:null,Z_=typeof Blob<"u"?Blob:null,q_={isBrowser:!0,classes:{URLSearchParams:V_,FormData:H_,Blob:Z_},protocols:["http","https","file","blob","url","data"]},Xc=typeof window<"u"&&typeof document<"u",yc=typeof navigator=="object"&&navigator||void 0,K_=Xc&&(!yc||["ReactNative","NativeScript","NS"].indexOf(yc.product)<0),W_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",J_=Xc&&window.location.href||"http://localhost",X_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xc,hasStandardBrowserEnv:K_,hasStandardBrowserWebWorkerEnv:W_,navigator:yc,origin:J_},Symbol.toStringTag,{value:"Module"})),Sn={...X_,...q_};function Y_(e,i){return Nl(e,new Sn.classes.URLSearchParams,Object.assign({visitor:function(s,l,h,p){return Sn.isNode&&Te.isBuffer(s)?(this.append(l,s.toString("base64")),!1):p.defaultVisitor.apply(this,arguments)}},i))}function Q_(e){return Te.matchAll(/\w+|\[(\w*)]/g,e).map(i=>i[0]==="[]"?"":i[1]||i[0])}function ey(e){const i={},s=Object.keys(e);let l;const h=s.length;let p;for(l=0;l<h;l++)p=s[l],i[p]=e[p];return i}function up(e){function i(s,l,h,p){let f=s[p++];if(f==="__proto__")return!0;const y=Number.isFinite(+f),v=p>=s.length;return f=!f&&Te.isArray(h)?h.length:f,v?(Te.hasOwnProp(h,f)?h[f]=[h[f],l]:h[f]=l,!y):((!h[f]||!Te.isObject(h[f]))&&(h[f]=[]),i(s,l,h[f],p)&&Te.isArray(h[f])&&(h[f]=ey(h[f])),!y)}if(Te.isFormData(e)&&Te.isFunction(e.entries)){const s={};return Te.forEachEntry(e,(l,h)=>{i(Q_(l),h,s,0)}),s}return null}function ty(e,i,s){if(Te.isString(e))try{return(i||JSON.parse)(e),Te.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(s||JSON.stringify)(e)}const ra={transitional:lp,adapter:["xhr","http","fetch"],transformRequest:[function(i,s){const l=s.getContentType()||"",h=l.indexOf("application/json")>-1,p=Te.isObject(i);if(p&&Te.isHTMLForm(i)&&(i=new FormData(i)),Te.isFormData(i))return h?JSON.stringify(up(i)):i;if(Te.isArrayBuffer(i)||Te.isBuffer(i)||Te.isStream(i)||Te.isFile(i)||Te.isBlob(i)||Te.isReadableStream(i))return i;if(Te.isArrayBufferView(i))return i.buffer;if(Te.isURLSearchParams(i))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),i.toString();let y;if(p){if(l.indexOf("application/x-www-form-urlencoded")>-1)return Y_(i,this.formSerializer).toString();if((y=Te.isFileList(i))||l.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return Nl(y?{"files[]":i}:i,v&&new v,this.formSerializer)}}return p||h?(s.setContentType("application/json",!1),ty(i)):i}],transformResponse:[function(i){const s=this.transitional||ra.transitional,l=s&&s.forcedJSONParsing,h=this.responseType==="json";if(Te.isResponse(i)||Te.isReadableStream(i))return i;if(i&&Te.isString(i)&&(l&&!this.responseType||h)){const f=!(s&&s.silentJSONParsing)&&h;try{return JSON.parse(i)}catch(y){if(f)throw y.name==="SyntaxError"?Ct.from(y,Ct.ERR_BAD_RESPONSE,this,null,this.response):y}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Sn.classes.FormData,Blob:Sn.classes.Blob},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],e=>{ra.headers[e]={}});const ny=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),iy=e=>{const i={};let s,l,h;return e&&e.split(`
`).forEach(function(f){h=f.indexOf(":"),s=f.substring(0,h).trim().toLowerCase(),l=f.substring(h+1).trim(),!(!s||i[s]&&ny[s])&&(s==="set-cookie"?i[s]?i[s].push(l):i[s]=[l]:i[s]=i[s]?i[s]+", "+l:l)}),i},Kh=Symbol("internals");function Ao(e){return e&&String(e).trim().toLowerCase()}function nl(e){return e===!1||e==null?e:Te.isArray(e)?e.map(nl):String(e)}function ry(e){const i=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let l;for(;l=s.exec(e);)i[l[1]]=l[2];return i}const sy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Wu(e,i,s,l,h){if(Te.isFunction(l))return l.call(this,i,s);if(h&&(i=s),!!Te.isString(i)){if(Te.isString(l))return i.indexOf(l)!==-1;if(Te.isRegExp(l))return l.test(i)}}function oy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,s,l)=>s.toUpperCase()+l)}function ay(e,i){const s=Te.toCamelCase(" "+i);["get","set","has"].forEach(l=>{Object.defineProperty(e,l+s,{value:function(h,p,f){return this[l].call(this,i,h,p,f)},configurable:!0})})}let qn=class{constructor(i){i&&this.set(i)}set(i,s,l){const h=this;function p(y,v,C){const M=Ao(v);if(!M)throw new Error("header name must be a non-empty string");const P=Te.findKey(h,M);(!P||h[P]===void 0||C===!0||C===void 0&&h[P]!==!1)&&(h[P||v]=nl(y))}const f=(y,v)=>Te.forEach(y,(C,M)=>p(C,M,v));if(Te.isPlainObject(i)||i instanceof this.constructor)f(i,s);else if(Te.isString(i)&&(i=i.trim())&&!sy(i))f(iy(i),s);else if(Te.isHeaders(i))for(const[y,v]of i.entries())p(v,y,l);else i!=null&&p(s,i,l);return this}get(i,s){if(i=Ao(i),i){const l=Te.findKey(this,i);if(l){const h=this[l];if(!s)return h;if(s===!0)return ry(h);if(Te.isFunction(s))return s.call(this,h,l);if(Te.isRegExp(s))return s.exec(h);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,s){if(i=Ao(i),i){const l=Te.findKey(this,i);return!!(l&&this[l]!==void 0&&(!s||Wu(this,this[l],l,s)))}return!1}delete(i,s){const l=this;let h=!1;function p(f){if(f=Ao(f),f){const y=Te.findKey(l,f);y&&(!s||Wu(l,l[y],y,s))&&(delete l[y],h=!0)}}return Te.isArray(i)?i.forEach(p):p(i),h}clear(i){const s=Object.keys(this);let l=s.length,h=!1;for(;l--;){const p=s[l];(!i||Wu(this,this[p],p,i,!0))&&(delete this[p],h=!0)}return h}normalize(i){const s=this,l={};return Te.forEach(this,(h,p)=>{const f=Te.findKey(l,p);if(f){s[f]=nl(h),delete s[p];return}const y=i?oy(p):String(p).trim();y!==p&&delete s[p],s[y]=nl(h),l[y]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const s=Object.create(null);return Te.forEach(this,(l,h)=>{l!=null&&l!==!1&&(s[h]=i&&Te.isArray(l)?l.join(", "):l)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,s])=>i+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...s){const l=new this(i);return s.forEach(h=>l.set(h)),l}static accessor(i){const l=(this[Kh]=this[Kh]={accessors:{}}).accessors,h=this.prototype;function p(f){const y=Ao(f);l[y]||(ay(h,f),l[y]=!0)}return Te.isArray(i)?i.forEach(p):p(i),this}};qn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(qn.prototype,({value:e},i)=>{let s=i[0].toUpperCase()+i.slice(1);return{get:()=>e,set(l){this[s]=l}}});Te.freezeMethods(qn);function Ju(e,i){const s=this||ra,l=i||s,h=qn.from(l.headers);let p=l.data;return Te.forEach(e,function(y){p=y.call(s,p,h.normalize(),i?i.status:void 0)}),h.normalize(),p}function cp(e){return!!(e&&e.__CANCEL__)}function Zs(e,i,s){Ct.call(this,e??"canceled",Ct.ERR_CANCELED,i,s),this.name="CanceledError"}Te.inherits(Zs,Ct,{__CANCEL__:!0});function hp(e,i,s){const l=s.config.validateStatus;!s.status||!l||l(s.status)?e(s):i(new Ct("Request failed with status code "+s.status,[Ct.ERR_BAD_REQUEST,Ct.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function ly(e){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return i&&i[1]||""}function uy(e,i){e=e||10;const s=new Array(e),l=new Array(e);let h=0,p=0,f;return i=i!==void 0?i:1e3,function(v){const C=Date.now(),M=l[p];f||(f=C),s[h]=v,l[h]=C;let P=p,j=0;for(;P!==h;)j+=s[P++],P=P%e;if(h=(h+1)%e,h===p&&(p=(p+1)%e),C-f<i)return;const J=M&&C-M;return J?Math.round(j*1e3/J):void 0}}function cy(e,i){let s=0,l=1e3/i,h,p;const f=(C,M=Date.now())=>{s=M,h=null,p&&(clearTimeout(p),p=null),e.apply(null,C)};return[(...C)=>{const M=Date.now(),P=M-s;P>=l?f(C,M):(h=C,p||(p=setTimeout(()=>{p=null,f(h)},l-P)))},()=>h&&f(h)]}const ml=(e,i,s=3)=>{let l=0;const h=uy(50,250);return cy(p=>{const f=p.loaded,y=p.lengthComputable?p.total:void 0,v=f-l,C=h(v),M=f<=y;l=f;const P={loaded:f,total:y,progress:y?f/y:void 0,bytes:v,rate:C||void 0,estimated:C&&y&&M?(y-f)/C:void 0,event:p,lengthComputable:y!=null,[i?"download":"upload"]:!0};e(P)},s)},Wh=(e,i)=>{const s=e!=null;return[l=>i[0]({lengthComputable:s,total:e,loaded:l}),i[1]]},Jh=e=>(...i)=>Te.asap(()=>e(...i)),hy=Sn.hasStandardBrowserEnv?((e,i)=>s=>(s=new URL(s,Sn.origin),e.protocol===s.protocol&&e.host===s.host&&(i||e.port===s.port)))(new URL(Sn.origin),Sn.navigator&&/(msie|trident)/i.test(Sn.navigator.userAgent)):()=>!0,dy=Sn.hasStandardBrowserEnv?{write(e,i,s,l,h,p){const f=[e+"="+encodeURIComponent(i)];Te.isNumber(s)&&f.push("expires="+new Date(s).toGMTString()),Te.isString(l)&&f.push("path="+l),Te.isString(h)&&f.push("domain="+h),p===!0&&f.push("secure"),document.cookie=f.join("; ")},read(e){const i=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function py(e,i){return i?e.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):e}function dp(e,i){return e&&!fy(i)?py(e,i):i}const Xh=e=>e instanceof qn?{...e}:e;function es(e,i){i=i||{};const s={};function l(C,M,P,j){return Te.isPlainObject(C)&&Te.isPlainObject(M)?Te.merge.call({caseless:j},C,M):Te.isPlainObject(M)?Te.merge({},M):Te.isArray(M)?M.slice():M}function h(C,M,P,j){if(Te.isUndefined(M)){if(!Te.isUndefined(C))return l(void 0,C,P,j)}else return l(C,M,P,j)}function p(C,M){if(!Te.isUndefined(M))return l(void 0,M)}function f(C,M){if(Te.isUndefined(M)){if(!Te.isUndefined(C))return l(void 0,C)}else return l(void 0,M)}function y(C,M,P){if(P in i)return l(C,M);if(P in e)return l(void 0,C)}const v={url:p,method:p,data:p,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:y,headers:(C,M,P)=>h(Xh(C),Xh(M),P,!0)};return Te.forEach(Object.keys(Object.assign({},e,i)),function(M){const P=v[M]||h,j=P(e[M],i[M],M);Te.isUndefined(j)&&P!==y||(s[M]=j)}),s}const fp=e=>{const i=es({},e);let{data:s,withXSRFToken:l,xsrfHeaderName:h,xsrfCookieName:p,headers:f,auth:y}=i;i.headers=f=qn.from(f),i.url=ap(dp(i.baseURL,i.url),e.params,e.paramsSerializer),y&&f.set("Authorization","Basic "+btoa((y.username||"")+":"+(y.password?unescape(encodeURIComponent(y.password)):"")));let v;if(Te.isFormData(s)){if(Sn.hasStandardBrowserEnv||Sn.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((v=f.getContentType())!==!1){const[C,...M]=v?v.split(";").map(P=>P.trim()).filter(Boolean):[];f.setContentType([C||"multipart/form-data",...M].join("; "))}}if(Sn.hasStandardBrowserEnv&&(l&&Te.isFunction(l)&&(l=l(i)),l||l!==!1&&hy(i.url))){const C=h&&p&&dy.read(p);C&&f.set(h,C)}return i},my=typeof XMLHttpRequest<"u",gy=my&&function(e){return new Promise(function(s,l){const h=fp(e);let p=h.data;const f=qn.from(h.headers).normalize();let{responseType:y,onUploadProgress:v,onDownloadProgress:C}=h,M,P,j,J,R;function Z(){J&&J(),R&&R(),h.cancelToken&&h.cancelToken.unsubscribe(M),h.signal&&h.signal.removeEventListener("abort",M)}let q=new XMLHttpRequest;q.open(h.method.toUpperCase(),h.url,!0),q.timeout=h.timeout;function xe(){if(!q)return;const V=qn.from("getAllResponseHeaders"in q&&q.getAllResponseHeaders()),Oe={data:!y||y==="text"||y==="json"?q.responseText:q.response,status:q.status,statusText:q.statusText,headers:V,config:e,request:q};hp(function(Pe){s(Pe),Z()},function(Pe){l(Pe),Z()},Oe),q=null}"onloadend"in q?q.onloadend=xe:q.onreadystatechange=function(){!q||q.readyState!==4||q.status===0&&!(q.responseURL&&q.responseURL.indexOf("file:")===0)||setTimeout(xe)},q.onabort=function(){q&&(l(new Ct("Request aborted",Ct.ECONNABORTED,e,q)),q=null)},q.onerror=function(){l(new Ct("Network Error",Ct.ERR_NETWORK,e,q)),q=null},q.ontimeout=function(){let le=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded";const Oe=h.transitional||lp;h.timeoutErrorMessage&&(le=h.timeoutErrorMessage),l(new Ct(le,Oe.clarifyTimeoutError?Ct.ETIMEDOUT:Ct.ECONNABORTED,e,q)),q=null},p===void 0&&f.setContentType(null),"setRequestHeader"in q&&Te.forEach(f.toJSON(),function(le,Oe){q.setRequestHeader(Oe,le)}),Te.isUndefined(h.withCredentials)||(q.withCredentials=!!h.withCredentials),y&&y!=="json"&&(q.responseType=h.responseType),C&&([j,R]=ml(C,!0),q.addEventListener("progress",j)),v&&q.upload&&([P,J]=ml(v),q.upload.addEventListener("progress",P),q.upload.addEventListener("loadend",J)),(h.cancelToken||h.signal)&&(M=V=>{q&&(l(!V||V.type?new Zs(null,e,q):V),q.abort(),q=null)},h.cancelToken&&h.cancelToken.subscribe(M),h.signal&&(h.signal.aborted?M():h.signal.addEventListener("abort",M)));const ie=ly(h.url);if(ie&&Sn.protocols.indexOf(ie)===-1){l(new Ct("Unsupported protocol "+ie+":",Ct.ERR_BAD_REQUEST,e));return}q.send(p||null)})},_y=(e,i)=>{const{length:s}=e=e?e.filter(Boolean):[];if(i||s){let l=new AbortController,h;const p=function(C){if(!h){h=!0,y();const M=C instanceof Error?C:this.reason;l.abort(M instanceof Ct?M:new Zs(M instanceof Error?M.message:M))}};let f=i&&setTimeout(()=>{f=null,p(new Ct(`timeout ${i} of ms exceeded`,Ct.ETIMEDOUT))},i);const y=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(C=>{C.unsubscribe?C.unsubscribe(p):C.removeEventListener("abort",p)}),e=null)};e.forEach(C=>C.addEventListener("abort",p));const{signal:v}=l;return v.unsubscribe=()=>Te.asap(y),v}},yy=function*(e,i){let s=e.byteLength;if(s<i){yield e;return}let l=0,h;for(;l<s;)h=l+i,yield e.slice(l,h),l=h},vy=async function*(e,i){for await(const s of by(e))yield*yy(s,i)},by=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const i=e.getReader();try{for(;;){const{done:s,value:l}=await i.read();if(s)break;yield l}}finally{await i.cancel()}},Yh=(e,i,s,l)=>{const h=vy(e,i);let p=0,f,y=v=>{f||(f=!0,l&&l(v))};return new ReadableStream({async pull(v){try{const{done:C,value:M}=await h.next();if(C){y(),v.close();return}let P=M.byteLength;if(s){let j=p+=P;s(j)}v.enqueue(new Uint8Array(M))}catch(C){throw y(C),C}},cancel(v){return y(v),h.return()}},{highWaterMark:2})},zl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pp=zl&&typeof ReadableStream=="function",xy=zl&&(typeof TextEncoder=="function"?(e=>i=>e.encode(i))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),mp=(e,...i)=>{try{return!!e(...i)}catch{return!1}},wy=pp&&mp(()=>{let e=!1;const i=new Request(Sn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!i}),Qh=64*1024,vc=pp&&mp(()=>Te.isReadableStream(new Response("").body)),gl={stream:vc&&(e=>e.body)};zl&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(i=>{!gl[i]&&(gl[i]=Te.isFunction(e[i])?s=>s[i]():(s,l)=>{throw new Ct(`Response type '${i}' is not supported`,Ct.ERR_NOT_SUPPORT,l)})})})(new Response);const Ly=async e=>{if(e==null)return 0;if(Te.isBlob(e))return e.size;if(Te.isSpecCompliantForm(e))return(await new Request(Sn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(e)||Te.isArrayBuffer(e))return e.byteLength;if(Te.isURLSearchParams(e)&&(e=e+""),Te.isString(e))return(await xy(e)).byteLength},Cy=async(e,i)=>{const s=Te.toFiniteNumber(e.getContentLength());return s??Ly(i)},ky=zl&&(async e=>{let{url:i,method:s,data:l,signal:h,cancelToken:p,timeout:f,onDownloadProgress:y,onUploadProgress:v,responseType:C,headers:M,withCredentials:P="same-origin",fetchOptions:j}=fp(e);C=C?(C+"").toLowerCase():"text";let J=_y([h,p&&p.toAbortSignal()],f),R;const Z=J&&J.unsubscribe&&(()=>{J.unsubscribe()});let q;try{if(v&&wy&&s!=="get"&&s!=="head"&&(q=await Cy(M,l))!==0){let Oe=new Request(i,{method:"POST",body:l,duplex:"half"}),Ee;if(Te.isFormData(l)&&(Ee=Oe.headers.get("content-type"))&&M.setContentType(Ee),Oe.body){const[Pe,F]=Wh(q,ml(Jh(v)));l=Yh(Oe.body,Qh,Pe,F)}}Te.isString(P)||(P=P?"include":"omit");const xe="credentials"in Request.prototype;R=new Request(i,{...j,signal:J,method:s.toUpperCase(),headers:M.normalize().toJSON(),body:l,duplex:"half",credentials:xe?P:void 0});let ie=await fetch(R);const V=vc&&(C==="stream"||C==="response");if(vc&&(y||V&&Z)){const Oe={};["status","statusText","headers"].forEach(te=>{Oe[te]=ie[te]});const Ee=Te.toFiniteNumber(ie.headers.get("content-length")),[Pe,F]=y&&Wh(Ee,ml(Jh(y),!0))||[];ie=new Response(Yh(ie.body,Qh,Pe,()=>{F&&F(),Z&&Z()}),Oe)}C=C||"text";let le=await gl[Te.findKey(gl,C)||"text"](ie,e);return!V&&Z&&Z(),await new Promise((Oe,Ee)=>{hp(Oe,Ee,{data:le,headers:qn.from(ie.headers),status:ie.status,statusText:ie.statusText,config:e,request:R})})}catch(xe){throw Z&&Z(),xe&&xe.name==="TypeError"&&/fetch/i.test(xe.message)?Object.assign(new Ct("Network Error",Ct.ERR_NETWORK,e,R),{cause:xe.cause||xe}):Ct.from(xe,xe&&xe.code,e,R)}}),bc={http:$_,xhr:gy,fetch:ky};Te.forEach(bc,(e,i)=>{if(e){try{Object.defineProperty(e,"name",{value:i})}catch{}Object.defineProperty(e,"adapterName",{value:i})}});const ed=e=>`- ${e}`,Ey=e=>Te.isFunction(e)||e===null||e===!1,gp={getAdapter:e=>{e=Te.isArray(e)?e:[e];const{length:i}=e;let s,l;const h={};for(let p=0;p<i;p++){s=e[p];let f;if(l=s,!Ey(s)&&(l=bc[(f=String(s)).toLowerCase()],l===void 0))throw new Ct(`Unknown adapter '${f}'`);if(l)break;h[f||"#"+p]=l}if(!l){const p=Object.entries(h).map(([y,v])=>`adapter ${y} `+(v===!1?"is not supported by the environment":"is not available in the build"));let f=i?p.length>1?`since :
`+p.map(ed).join(`
`):" "+ed(p[0]):"as no adapter specified";throw new Ct("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return l},adapters:bc};function Xu(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Zs(null,e)}function td(e){return Xu(e),e.headers=qn.from(e.headers),e.data=Ju.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),gp.getAdapter(e.adapter||ra.adapter)(e).then(function(l){return Xu(e),l.data=Ju.call(e,e.transformResponse,l),l.headers=qn.from(l.headers),l},function(l){return cp(l)||(Xu(e),l&&l.response&&(l.response.data=Ju.call(e,e.transformResponse,l.response),l.response.headers=qn.from(l.response.headers))),Promise.reject(l)})}const _p="1.7.9",$l={};["object","boolean","number","function","string","symbol"].forEach((e,i)=>{$l[e]=function(l){return typeof l===e||"a"+(i<1?"n ":" ")+e}});const nd={};$l.transitional=function(i,s,l){function h(p,f){return"[Axios v"+_p+"] Transitional option '"+p+"'"+f+(l?". "+l:"")}return(p,f,y)=>{if(i===!1)throw new Ct(h(f," has been removed"+(s?" in "+s:"")),Ct.ERR_DEPRECATED);return s&&!nd[f]&&(nd[f]=!0,console.warn(h(f," has been deprecated since v"+s+" and will be removed in the near future"))),i?i(p,f,y):!0}};$l.spelling=function(i){return(s,l)=>(console.warn(`${l} is likely a misspelling of ${i}`),!0)};function My(e,i,s){if(typeof e!="object")throw new Ct("options must be an object",Ct.ERR_BAD_OPTION_VALUE);const l=Object.keys(e);let h=l.length;for(;h-- >0;){const p=l[h],f=i[p];if(f){const y=e[p],v=y===void 0||f(y,p,e);if(v!==!0)throw new Ct("option "+p+" must be "+v,Ct.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Ct("Unknown option "+p,Ct.ERR_BAD_OPTION)}}const il={assertOptions:My,validators:$l},Di=il.validators;let Jr=class{constructor(i){this.defaults=i,this.interceptors={request:new qh,response:new qh}}async request(i,s){try{return await this._request(i,s)}catch(l){if(l instanceof Error){let h={};Error.captureStackTrace?Error.captureStackTrace(h):h=new Error;const p=h.stack?h.stack.replace(/^.+\n/,""):"";try{l.stack?p&&!String(l.stack).endsWith(p.replace(/^.+\n.+\n/,""))&&(l.stack+=`
`+p):l.stack=p}catch{}}throw l}}_request(i,s){typeof i=="string"?(s=s||{},s.url=i):s=i||{},s=es(this.defaults,s);const{transitional:l,paramsSerializer:h,headers:p}=s;l!==void 0&&il.assertOptions(l,{silentJSONParsing:Di.transitional(Di.boolean),forcedJSONParsing:Di.transitional(Di.boolean),clarifyTimeoutError:Di.transitional(Di.boolean)},!1),h!=null&&(Te.isFunction(h)?s.paramsSerializer={serialize:h}:il.assertOptions(h,{encode:Di.function,serialize:Di.function},!0)),il.assertOptions(s,{baseUrl:Di.spelling("baseURL"),withXsrfToken:Di.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f=p&&Te.merge(p.common,p[s.method]);p&&Te.forEach(["delete","get","head","post","put","patch","common"],R=>{delete p[R]}),s.headers=qn.concat(f,p);const y=[];let v=!0;this.interceptors.request.forEach(function(Z){typeof Z.runWhen=="function"&&Z.runWhen(s)===!1||(v=v&&Z.synchronous,y.unshift(Z.fulfilled,Z.rejected))});const C=[];this.interceptors.response.forEach(function(Z){C.push(Z.fulfilled,Z.rejected)});let M,P=0,j;if(!v){const R=[td.bind(this),void 0];for(R.unshift.apply(R,y),R.push.apply(R,C),j=R.length,M=Promise.resolve(s);P<j;)M=M.then(R[P++],R[P++]);return M}j=y.length;let J=s;for(P=0;P<j;){const R=y[P++],Z=y[P++];try{J=R(J)}catch(q){Z.call(this,q);break}}try{M=td.call(this,J)}catch(R){return Promise.reject(R)}for(P=0,j=C.length;P<j;)M=M.then(C[P++],C[P++]);return M}getUri(i){i=es(this.defaults,i);const s=dp(i.baseURL,i.url);return ap(s,i.params,i.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(i){Jr.prototype[i]=function(s,l){return this.request(es(l||{},{method:i,url:s,data:(l||{}).data}))}});Te.forEach(["post","put","patch"],function(i){function s(l){return function(p,f,y){return this.request(es(y||{},{method:i,headers:l?{"Content-Type":"multipart/form-data"}:{},url:p,data:f}))}}Jr.prototype[i]=s(),Jr.prototype[i+"Form"]=s(!0)});let Py=class yp{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(p){s=p});const l=this;this.promise.then(h=>{if(!l._listeners)return;let p=l._listeners.length;for(;p-- >0;)l._listeners[p](h);l._listeners=null}),this.promise.then=h=>{let p;const f=new Promise(y=>{l.subscribe(y),p=y}).then(h);return f.cancel=function(){l.unsubscribe(p)},f},i(function(p,f,y){l.reason||(l.reason=new Zs(p,f,y),s(l.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const s=this._listeners.indexOf(i);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const i=new AbortController,s=l=>{i.abort(l)};return this.subscribe(s),i.signal.unsubscribe=()=>this.unsubscribe(s),i.signal}static source(){let i;return{token:new yp(function(h){i=h}),cancel:i}}};function Sy(e){return function(s){return e.apply(null,s)}}function By(e){return Te.isObject(e)&&e.isAxiosError===!0}const xc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xc).forEach(([e,i])=>{xc[i]=e});function vp(e){const i=new Jr(e),s=Wf(Jr.prototype.request,i);return Te.extend(s,Jr.prototype,i,{allOwnKeys:!0}),Te.extend(s,i,null,{allOwnKeys:!0}),s.create=function(h){return vp(es(e,h))},s}const an=vp(ra);an.Axios=Jr;an.CanceledError=Zs;an.CancelToken=Py;an.isCancel=cp;an.VERSION=_p;an.toFormData=Nl;an.AxiosError=Ct;an.Cancel=an.CanceledError;an.all=function(i){return Promise.all(i)};an.spread=Sy;an.isAxiosError=By;an.mergeConfig=es;an.AxiosHeaders=qn;an.formToJSON=e=>up(Te.isHTMLForm(e)?new FormData(e):e);an.getAdapter=gp.getAdapter;an.HttpStatusCode=xc;an.default=an;const{Axios:tC,AxiosError:nC,CanceledError:iC,isCancel:rC,CancelToken:sC,VERSION:oC,all:aC,Cancel:lC,isAxiosError:uC,spread:cC,toFormData:hC,AxiosHeaders:dC,HttpStatusCode:fC,formToJSON:pC,getAdapter:mC,mergeConfig:gC}=an,mt=an.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function bp(e){var l;const s=`; ${document.cookie}`.split(`; ${e}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}mt.interceptors.request.use(e=>{const i=bp("access_token");return i&&(e.headers.Authorization=`Bearer ${i}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));mt.interceptors.response.use(e=>e,async e=>{var s;const i=e.config;if(((s=e.response)==null?void 0:s.status)===401&&!i._retry){i._retry=!0;try{await jn().refreshToken();const h=bp("access_token");if(h)return i.headers.Authorization=`Bearer ${h}`,mt(i)}catch(l){console.error("Token refresh failed:",l),window.location.href="/login"}}return Promise.reject(e)});mt.defaults.baseURL="/api";mt.defaults.headers.common["Content-Type"]="application/json";mt.defaults.withCredentials=!0;function _l(e){var l;const s=`; ${document.cookie}`.split(`; ${e}=`);return s.length===2&&((l=s.pop())==null?void 0:l.split(";").shift())||null}mt.interceptors.request.use(e=>{const i=_l("access_token");return i&&(e.headers.Authorization=`Bearer ${i}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));mt.interceptors.response.use(e=>e,async e=>{var l,h;const i=jn(),s=e.config;if(((l=e.response)==null?void 0:l.status)===401&&!s._retry&&!((h=s.url)!=null&&h.includes("/token/refresh/"))){s._retry=!0;try{if(!_l("access_token"))throw new Error("No token available");await i.refreshToken();const f=_l("access_token");if(f)return s.headers.Authorization=`Bearer ${f}`,mt(s)}catch(p){console.error("Token refresh failed:",p),await i.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function Ay(e,i,s=1){const l=new Date;l.setTime(l.getTime()+s*24*60*60*1e3);const h=`expires=${l.toUTCString()}`;document.cookie=`${e}=${i};${h};path=/;secure;samesite=Strict`}function qr(e){if(!e)return"Non spécifié";const i=`${e.first_name} ${e.last_name.toUpperCase()}`;return e.company_name?`${i} (${e.company_name})`:i}const jn=Kc("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,concessionnaires:[]}),getters:{isAdmin:e=>{var i;return((i=e.user)==null?void 0:i.user_type)==="admin"},isDealer:e=>{var i;return((i=e.user)==null?void 0:i.user_type)==="dealer"},isClient:e=>{var i;return((i=e.user)==null?void 0:i.user_type)==="client"},currentUser:e=>e.user,hasDealer:e=>{var i;return!!((i=e.user)!=null&&i.dealer)}},actions:{async initialize(e){if(console.log("Initializing auth store with state:",e),!e){console.log("No initial state, attempting to restore session...");const s=await this.restoreSession();return this.initialized=!0,s}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const i=await this.restoreSession();return this.initialized=!0,i},async restoreSession(){console.log("Attempting to restore session...");try{if(!_l("access_token"))return console.log("No token found, skipping session restore"),this.isAuthenticated=!1,this.user=null,!1;const i=await mt.post("/token/refresh/");return i.data.user?(this.user=i.data.user,this.isAuthenticated=!0,this.mustChangePassword=i.data.user.must_change_password||!1,console.log("Session restored successfully"),!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,i){var s,l,h;try{const p=await mt.post("/token/",{username:e,password:i});if(!p.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${p.data.access}; path=/; secure; samesite=Strict`;const f=await this.fetchUserProfile();return this.user=f,this.isAuthenticated=!0,!0}catch(p){throw this.isAuthenticated=!1,this.user=null,((s=p.response)==null?void 0:s.status)===401?new Error("Identifiants incorrects"):(h=(l=p.response)==null?void 0:l.data)!=null&&h.detail?new Error(p.response.data.detail):p}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await mt.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,i){try{console.log("Attempting to change password...");const s=await mt.post("/users/change_password/",{old_password:e,password:i});return console.log("Password change response:",s.data),this.user={...this.user,must_change_password:!1},s.data}catch(s){throw console.error("Password change error:",s),s}},async refreshToken(){var e,i,s,l;try{console.log("Attempting to refresh token...");const h=await mt.post("/token/refresh/",{},{withCredentials:!0}),{access:p}=h.data;if(!p)throw new Error("No access token received");return console.log("Token refreshed successfully"),Ay("access_token",p,1),this.isAuthenticated=!0,p}catch(h){throw console.error("Error refreshing token:",{status:(e=h.response)==null?void 0:e.status,data:(i=h.response)==null?void 0:i.data}),(((s=h.response)==null?void 0:s.status)===401||((l=h.response)==null?void 0:l.status)===403)&&(console.log("Token refresh failed with auth error, logging out"),await this.logout()),h}},async fetchConcessionnaires(){this.loading=!0;try{const e=await mt.get("/users/",{params:{role:"dealer"}});this.concessionnaires=e.data}catch(e){throw this.error="Erreur lors de la récupération des concessionnaires",e}finally{this.loading=!1}},async setConcessionnaire(e,i){this.loading=!0;try{await mt.patch(`/users/${e}/`,{concessionnaire:i}),this.user&&this.user.id===e&&(this.user.dealer=i)}catch(s){throw this.error="Erreur lors de la mise à jour du concessionnaire",s}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await mt.post("/users/",e)).data}catch(i){throw this.error="Erreur lors de la création de l'utilisateur",i}finally{this.loading=!1}},async updateUserRole(e,i){this.loading=!0;try{const s=await mt.patch(`/users/${e}/`,{role:i});return this.user&&this.user.id===e&&(this.user.user_type=i),s.data}catch(s){throw this.error="Erreur lors de la mise à jour du rôle",s}finally{this.loading=!1}},async updateUserEmail(e){var i;this.loading=!0;try{const s=await mt.patch(`/users/${(i=this.user)==null?void 0:i.id}/`,{email:e});return this.user&&(this.user.email=e),s.data}catch(s){throw this.error="Erreur lors de la mise à jour de l'email",s}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ds=typeof document<"u";function xp(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ty(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&xp(e.default)}const Nt=Object.assign;function Yu(e,i){const s={};for(const l in i){const h=i[l];s[l]=wi(h)?h.map(e):e(h)}return s}const Go=()=>{},wi=Array.isArray,wp=/#/g,Dy=/&/g,Ry=/\//g,Oy=/=/g,Iy=/\?/g,Lp=/\+/g,Fy=/%5B/g,Ny=/%5D/g,Cp=/%5E/g,zy=/%60/g,kp=/%7B/g,$y=/%7C/g,Ep=/%7D/g,jy=/%20/g;function Yc(e){return encodeURI(""+e).replace($y,"|").replace(Fy,"[").replace(Ny,"]")}function Uy(e){return Yc(e).replace(kp,"{").replace(Ep,"}").replace(Cp,"^")}function wc(e){return Yc(e).replace(Lp,"%2B").replace(jy,"+").replace(wp,"%23").replace(Dy,"%26").replace(zy,"`").replace(kp,"{").replace(Ep,"}").replace(Cp,"^")}function Gy(e){return wc(e).replace(Oy,"%3D")}function Vy(e){return Yc(e).replace(wp,"%23").replace(Iy,"%3F")}function Hy(e){return e==null?"":Vy(e).replace(Ry,"%2F")}function Xo(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Zy=/\/$/,qy=e=>e.replace(Zy,"");function Qu(e,i,s="/"){let l,h={},p="",f="";const y=i.indexOf("#");let v=i.indexOf("?");return y<v&&y>=0&&(v=-1),v>-1&&(l=i.slice(0,v),p=i.slice(v+1,y>-1?y:i.length),h=e(p)),y>-1&&(l=l||i.slice(0,y),f=i.slice(y,i.length)),l=Xy(l??i,s),{fullPath:l+(p&&"?")+p+f,path:l,query:h,hash:Xo(f)}}function Ky(e,i){const s=i.query?e(i.query):"";return i.path+(s&&"?")+s+(i.hash||"")}function id(e,i){return!i||!e.toLowerCase().startsWith(i.toLowerCase())?e:e.slice(i.length)||"/"}function Wy(e,i,s){const l=i.matched.length-1,h=s.matched.length-1;return l>-1&&l===h&&Us(i.matched[l],s.matched[h])&&Mp(i.params,s.params)&&e(i.query)===e(s.query)&&i.hash===s.hash}function Us(e,i){return(e.aliasOf||e)===(i.aliasOf||i)}function Mp(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const s in e)if(!Jy(e[s],i[s]))return!1;return!0}function Jy(e,i){return wi(e)?rd(e,i):wi(i)?rd(i,e):e===i}function rd(e,i){return wi(i)?e.length===i.length&&e.every((s,l)=>s===i[l]):e.length===1&&e[0]===i}function Xy(e,i){if(e.startsWith("/"))return e;if(!e)return i;const s=i.split("/"),l=e.split("/"),h=l[l.length-1];(h===".."||h===".")&&l.push("");let p=s.length-1,f,y;for(f=0;f<l.length;f++)if(y=l[f],y!==".")if(y==="..")p>1&&p--;else break;return s.slice(0,p).join("/")+"/"+l.slice(f).join("/")}const yr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Yo;(function(e){e.pop="pop",e.push="push"})(Yo||(Yo={}));var Vo;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Vo||(Vo={}));function Yy(e){if(!e)if(Ds){const i=document.querySelector("base");e=i&&i.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),qy(e)}const Qy=/^[^#]+#/;function ev(e,i){return e.replace(Qy,"#")+i}function tv(e,i){const s=document.documentElement.getBoundingClientRect(),l=e.getBoundingClientRect();return{behavior:i.behavior,left:l.left-s.left-(i.left||0),top:l.top-s.top-(i.top||0)}}const jl=()=>({left:window.scrollX,top:window.scrollY});function nv(e){let i;if("el"in e){const s=e.el,l=typeof s=="string"&&s.startsWith("#"),h=typeof s=="string"?l?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!h)return;i=tv(h,e)}else i=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(i):window.scrollTo(i.left!=null?i.left:window.scrollX,i.top!=null?i.top:window.scrollY)}function sd(e,i){return(history.state?history.state.position-i:-1)+e}const Lc=new Map;function iv(e,i){Lc.set(e,i)}function rv(e){const i=Lc.get(e);return Lc.delete(e),i}let sv=()=>location.protocol+"//"+location.host;function Pp(e,i){const{pathname:s,search:l,hash:h}=i,p=e.indexOf("#");if(p>-1){let y=h.includes(e.slice(p))?e.slice(p).length:1,v=h.slice(y);return v[0]!=="/"&&(v="/"+v),id(v,"")}return id(s,e)+l+h}function ov(e,i,s,l){let h=[],p=[],f=null;const y=({state:j})=>{const J=Pp(e,location),R=s.value,Z=i.value;let q=0;if(j){if(s.value=J,i.value=j,f&&f===R){f=null;return}q=Z?j.position-Z.position:0}else l(J);h.forEach(xe=>{xe(s.value,R,{delta:q,type:Yo.pop,direction:q?q>0?Vo.forward:Vo.back:Vo.unknown})})};function v(){f=s.value}function C(j){h.push(j);const J=()=>{const R=h.indexOf(j);R>-1&&h.splice(R,1)};return p.push(J),J}function M(){const{history:j}=window;j.state&&j.replaceState(Nt({},j.state,{scroll:jl()}),"")}function P(){for(const j of p)j();p=[],window.removeEventListener("popstate",y),window.removeEventListener("beforeunload",M)}return window.addEventListener("popstate",y),window.addEventListener("beforeunload",M,{passive:!0}),{pauseListeners:v,listen:C,destroy:P}}function od(e,i,s,l=!1,h=!1){return{back:e,current:i,forward:s,replaced:l,position:window.history.length,scroll:h?jl():null}}function av(e){const{history:i,location:s}=window,l={value:Pp(e,s)},h={value:i.state};h.value||p(l.value,{back:null,current:l.value,forward:null,position:i.length-1,replaced:!0,scroll:null},!0);function p(v,C,M){const P=e.indexOf("#"),j=P>-1?(s.host&&document.querySelector("base")?e:e.slice(P))+v:sv()+e+v;try{i[M?"replaceState":"pushState"](C,"",j),h.value=C}catch(J){console.error(J),s[M?"replace":"assign"](j)}}function f(v,C){const M=Nt({},i.state,od(h.value.back,v,h.value.forward,!0),C,{position:h.value.position});p(v,M,!0),l.value=v}function y(v,C){const M=Nt({},h.value,i.state,{forward:v,scroll:jl()});p(M.current,M,!0);const P=Nt({},od(l.value,v,null),{position:M.position+1},C);p(v,P,!1),l.value=v}return{location:l,state:h,push:y,replace:f}}function lv(e){e=Yy(e);const i=av(e),s=ov(e,i.state,i.location,i.replace);function l(p,f=!0){f||s.pauseListeners(),history.go(p)}const h=Nt({location:"",base:e,go:l,createHref:ev.bind(null,e)},i,s);return Object.defineProperty(h,"location",{enumerable:!0,get:()=>i.location.value}),Object.defineProperty(h,"state",{enumerable:!0,get:()=>i.state.value}),h}function uv(e){return typeof e=="string"||e&&typeof e=="object"}function Sp(e){return typeof e=="string"||typeof e=="symbol"}const Bp=Symbol("");var ad;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ad||(ad={}));function Gs(e,i){return Nt(new Error,{type:e,[Bp]:!0},i)}function Xi(e,i){return e instanceof Error&&Bp in e&&(i==null||!!(e.type&i))}const ld="[^/]+?",cv={sensitive:!1,strict:!1,start:!0,end:!0},hv=/[.+*?^${}()[\]/\\]/g;function dv(e,i){const s=Nt({},cv,i),l=[];let h=s.start?"^":"";const p=[];for(const C of e){const M=C.length?[]:[90];s.strict&&!C.length&&(h+="/");for(let P=0;P<C.length;P++){const j=C[P];let J=40+(s.sensitive?.25:0);if(j.type===0)P||(h+="/"),h+=j.value.replace(hv,"\\$&"),J+=40;else if(j.type===1){const{value:R,repeatable:Z,optional:q,regexp:xe}=j;p.push({name:R,repeatable:Z,optional:q});const ie=xe||ld;if(ie!==ld){J+=10;try{new RegExp(`(${ie})`)}catch(le){throw new Error(`Invalid custom RegExp for param "${R}" (${ie}): `+le.message)}}let V=Z?`((?:${ie})(?:/(?:${ie}))*)`:`(${ie})`;P||(V=q&&C.length<2?`(?:/${V})`:"/"+V),q&&(V+="?"),h+=V,J+=20,q&&(J+=-8),Z&&(J+=-20),ie===".*"&&(J+=-50)}M.push(J)}l.push(M)}if(s.strict&&s.end){const C=l.length-1;l[C][l[C].length-1]+=.7000000000000001}s.strict||(h+="/?"),s.end?h+="$":s.strict&&!h.endsWith("/")&&(h+="(?:/|$)");const f=new RegExp(h,s.sensitive?"":"i");function y(C){const M=C.match(f),P={};if(!M)return null;for(let j=1;j<M.length;j++){const J=M[j]||"",R=p[j-1];P[R.name]=J&&R.repeatable?J.split("/"):J}return P}function v(C){let M="",P=!1;for(const j of e){(!P||!M.endsWith("/"))&&(M+="/"),P=!1;for(const J of j)if(J.type===0)M+=J.value;else if(J.type===1){const{value:R,repeatable:Z,optional:q}=J,xe=R in C?C[R]:"";if(wi(xe)&&!Z)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const ie=wi(xe)?xe.join("/"):xe;if(!ie)if(q)j.length<2&&(M.endsWith("/")?M=M.slice(0,-1):P=!0);else throw new Error(`Missing required param "${R}"`);M+=ie}}return M||"/"}return{re:f,score:l,keys:p,parse:y,stringify:v}}function fv(e,i){let s=0;for(;s<e.length&&s<i.length;){const l=i[s]-e[s];if(l)return l;s++}return e.length<i.length?e.length===1&&e[0]===80?-1:1:e.length>i.length?i.length===1&&i[0]===80?1:-1:0}function Ap(e,i){let s=0;const l=e.score,h=i.score;for(;s<l.length&&s<h.length;){const p=fv(l[s],h[s]);if(p)return p;s++}if(Math.abs(h.length-l.length)===1){if(ud(l))return 1;if(ud(h))return-1}return h.length-l.length}function ud(e){const i=e[e.length-1];return e.length>0&&i[i.length-1]<0}const pv={type:0,value:""},mv=/[a-zA-Z0-9_]/;function gv(e){if(!e)return[[]];if(e==="/")return[[pv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function i(J){throw new Error(`ERR (${s})/"${C}": ${J}`)}let s=0,l=s;const h=[];let p;function f(){p&&h.push(p),p=[]}let y=0,v,C="",M="";function P(){C&&(s===0?p.push({type:0,value:C}):s===1||s===2||s===3?(p.length>1&&(v==="*"||v==="+")&&i(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),p.push({type:1,value:C,regexp:M,repeatable:v==="*"||v==="+",optional:v==="*"||v==="?"})):i("Invalid state to consume buffer"),C="")}function j(){C+=v}for(;y<e.length;){if(v=e[y++],v==="\\"&&s!==2){l=s,s=4;continue}switch(s){case 0:v==="/"?(C&&P(),f()):v===":"?(P(),s=1):j();break;case 4:j(),s=l;break;case 1:v==="("?s=2:mv.test(v)?j():(P(),s=0,v!=="*"&&v!=="?"&&v!=="+"&&y--);break;case 2:v===")"?M[M.length-1]=="\\"?M=M.slice(0,-1)+v:s=3:M+=v;break;case 3:P(),s=0,v!=="*"&&v!=="?"&&v!=="+"&&y--,M="";break;default:i("Unknown state");break}}return s===2&&i(`Unfinished custom RegExp for param "${C}"`),P(),f(),h}function _v(e,i,s){const l=dv(gv(e.path),s),h=Nt(l,{record:e,parent:i,children:[],alias:[]});return i&&!h.record.aliasOf==!i.record.aliasOf&&i.children.push(h),h}function yv(e,i){const s=[],l=new Map;i=fd({strict:!1,end:!0,sensitive:!1},i);function h(P){return l.get(P)}function p(P,j,J){const R=!J,Z=hd(P);Z.aliasOf=J&&J.record;const q=fd(i,P),xe=[Z];if("alias"in P){const le=typeof P.alias=="string"?[P.alias]:P.alias;for(const Oe of le)xe.push(hd(Nt({},Z,{components:J?J.record.components:Z.components,path:Oe,aliasOf:J?J.record:Z})))}let ie,V;for(const le of xe){const{path:Oe}=le;if(j&&Oe[0]!=="/"){const Ee=j.record.path,Pe=Ee[Ee.length-1]==="/"?"":"/";le.path=j.record.path+(Oe&&Pe+Oe)}if(ie=_v(le,j,q),J?J.alias.push(ie):(V=V||ie,V!==ie&&V.alias.push(ie),R&&P.name&&!dd(ie)&&f(P.name)),Tp(ie)&&v(ie),Z.children){const Ee=Z.children;for(let Pe=0;Pe<Ee.length;Pe++)p(Ee[Pe],ie,J&&J.children[Pe])}J=J||ie}return V?()=>{f(V)}:Go}function f(P){if(Sp(P)){const j=l.get(P);j&&(l.delete(P),s.splice(s.indexOf(j),1),j.children.forEach(f),j.alias.forEach(f))}else{const j=s.indexOf(P);j>-1&&(s.splice(j,1),P.record.name&&l.delete(P.record.name),P.children.forEach(f),P.alias.forEach(f))}}function y(){return s}function v(P){const j=xv(P,s);s.splice(j,0,P),P.record.name&&!dd(P)&&l.set(P.record.name,P)}function C(P,j){let J,R={},Z,q;if("name"in P&&P.name){if(J=l.get(P.name),!J)throw Gs(1,{location:P});q=J.record.name,R=Nt(cd(j.params,J.keys.filter(V=>!V.optional).concat(J.parent?J.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),P.params&&cd(P.params,J.keys.map(V=>V.name))),Z=J.stringify(R)}else if(P.path!=null)Z=P.path,J=s.find(V=>V.re.test(Z)),J&&(R=J.parse(Z),q=J.record.name);else{if(J=j.name?l.get(j.name):s.find(V=>V.re.test(j.path)),!J)throw Gs(1,{location:P,currentLocation:j});q=J.record.name,R=Nt({},j.params,P.params),Z=J.stringify(R)}const xe=[];let ie=J;for(;ie;)xe.unshift(ie.record),ie=ie.parent;return{name:q,path:Z,params:R,matched:xe,meta:bv(xe)}}e.forEach(P=>p(P));function M(){s.length=0,l.clear()}return{addRoute:p,resolve:C,removeRoute:f,clearRoutes:M,getRoutes:y,getRecordMatcher:h}}function cd(e,i){const s={};for(const l of i)l in e&&(s[l]=e[l]);return s}function hd(e){const i={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:vv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(i,"mods",{value:{}}),i}function vv(e){const i={},s=e.props||!1;if("component"in e)i.default=s;else for(const l in e.components)i[l]=typeof s=="object"?s[l]:s;return i}function dd(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function bv(e){return e.reduce((i,s)=>Nt(i,s.meta),{})}function fd(e,i){const s={};for(const l in e)s[l]=l in i?i[l]:e[l];return s}function xv(e,i){let s=0,l=i.length;for(;s!==l;){const p=s+l>>1;Ap(e,i[p])<0?l=p:s=p+1}const h=wv(e);return h&&(l=i.lastIndexOf(h,l-1)),l}function wv(e){let i=e;for(;i=i.parent;)if(Tp(i)&&Ap(e,i)===0)return i}function Tp({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Lv(e){const i={};if(e===""||e==="?")return i;const l=(e[0]==="?"?e.slice(1):e).split("&");for(let h=0;h<l.length;++h){const p=l[h].replace(Lp," "),f=p.indexOf("="),y=Xo(f<0?p:p.slice(0,f)),v=f<0?null:Xo(p.slice(f+1));if(y in i){let C=i[y];wi(C)||(C=i[y]=[C]),C.push(v)}else i[y]=v}return i}function pd(e){let i="";for(let s in e){const l=e[s];if(s=Gy(s),l==null){l!==void 0&&(i+=(i.length?"&":"")+s);continue}(wi(l)?l.map(p=>p&&wc(p)):[l&&wc(l)]).forEach(p=>{p!==void 0&&(i+=(i.length?"&":"")+s,p!=null&&(i+="="+p))})}return i}function Cv(e){const i={};for(const s in e){const l=e[s];l!==void 0&&(i[s]=wi(l)?l.map(h=>h==null?null:""+h):l==null?l:""+l)}return i}const kv=Symbol(""),md=Symbol(""),Ul=Symbol(""),Qc=Symbol(""),Cc=Symbol("");function To(){let e=[];function i(l){return e.push(l),()=>{const h=e.indexOf(l);h>-1&&e.splice(h,1)}}function s(){e=[]}return{add:i,list:()=>e.slice(),reset:s}}function wr(e,i,s,l,h,p=f=>f()){const f=l&&(l.enterCallbacks[h]=l.enterCallbacks[h]||[]);return()=>new Promise((y,v)=>{const C=j=>{j===!1?v(Gs(4,{from:s,to:i})):j instanceof Error?v(j):uv(j)?v(Gs(2,{from:i,to:j})):(f&&l.enterCallbacks[h]===f&&typeof j=="function"&&f.push(j),y())},M=p(()=>e.call(l&&l.instances[h],i,s,C));let P=Promise.resolve(M);e.length<3&&(P=P.then(C)),P.catch(j=>v(j))})}function ec(e,i,s,l,h=p=>p()){const p=[];for(const f of e)for(const y in f.components){let v=f.components[y];if(!(i!=="beforeRouteEnter"&&!f.instances[y]))if(xp(v)){const M=(v.__vccOpts||v)[i];M&&p.push(wr(M,s,l,f,y,h))}else{let C=v();p.push(()=>C.then(M=>{if(!M)throw new Error(`Couldn't resolve component "${y}" at "${f.path}"`);const P=Ty(M)?M.default:M;f.mods[y]=M,f.components[y]=P;const J=(P.__vccOpts||P)[i];return J&&wr(J,s,l,f,y,h)()}))}}return p}function gd(e){const i=fi(Ul),s=fi(Qc),l=kt(()=>{const v=xt(e.to);return i.resolve(v)}),h=kt(()=>{const{matched:v}=l.value,{length:C}=v,M=v[C-1],P=s.matched;if(!M||!P.length)return-1;const j=P.findIndex(Us.bind(null,M));if(j>-1)return j;const J=_d(v[C-2]);return C>1&&_d(M)===J&&P[P.length-1].path!==J?P.findIndex(Us.bind(null,v[C-2])):j}),p=kt(()=>h.value>-1&&Sv(s.params,l.value.params)),f=kt(()=>h.value>-1&&h.value===s.matched.length-1&&Mp(s.params,l.value.params));function y(v={}){if(Pv(v)){const C=i[xt(e.replace)?"replace":"push"](xt(e.to)).catch(Go);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>C),C}return Promise.resolve()}return{route:l,href:kt(()=>l.value.href),isActive:p,isExactActive:f,navigate:y}}function Ev(e){return e.length===1?e[0]:e}const Mv=Kn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gd,setup(e,{slots:i}){const s=sr(gd(e)),{options:l}=fi(Ul),h=kt(()=>({[yd(e.activeClass,l.linkActiveClass,"router-link-active")]:s.isActive,[yd(e.exactActiveClass,l.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const p=i.default&&Ev(i.default(s));return e.custom?p:$f("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:h.value},p)}}}),Rs=Mv;function Pv(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const i=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(i))return}return e.preventDefault&&e.preventDefault(),!0}}function Sv(e,i){for(const s in i){const l=i[s],h=e[s];if(typeof l=="string"){if(l!==h)return!1}else if(!wi(h)||h.length!==l.length||l.some((p,f)=>p!==h[f]))return!1}return!0}function _d(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const yd=(e,i,s)=>e??i??s,Bv=Kn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:i,slots:s}){const l=fi(Cc),h=kt(()=>e.route||l.value),p=fi(md,0),f=kt(()=>{let C=xt(p);const{matched:M}=h.value;let P;for(;(P=M[C])&&!P.components;)C++;return C}),y=kt(()=>h.value.matched[f.value]);Xa(md,kt(()=>f.value+1)),Xa(kv,y),Xa(Cc,h);const v=qe();return ei(()=>[v.value,y.value,e.name],([C,M,P],[j,J,R])=>{M&&(M.instances[P]=C,J&&J!==M&&C&&C===j&&(M.leaveGuards.size||(M.leaveGuards=J.leaveGuards),M.updateGuards.size||(M.updateGuards=J.updateGuards))),C&&M&&(!J||!Us(M,J)||!j)&&(M.enterCallbacks[P]||[]).forEach(Z=>Z(C))},{flush:"post"}),()=>{const C=h.value,M=e.name,P=y.value,j=P&&P.components[M];if(!j)return vd(s.default,{Component:j,route:C});const J=P.props[M],R=J?J===!0?C.params:typeof J=="function"?J(C):J:null,q=$f(j,Nt({},R,i,{onVnodeUnmounted:xe=>{xe.component.isUnmounted&&(P.instances[M]=null)},ref:v}));return vd(s.default,{Component:q,route:C})||q}}});function vd(e,i){if(!e)return null;const s=e(i);return s.length===1?s[0]:s}const Dp=Bv;function Av(e){const i=yv(e.routes,e),s=e.parseQuery||Lv,l=e.stringifyQuery||pd,h=e.history,p=To(),f=To(),y=To(),v=e0(yr);let C=yr;Ds&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const M=Yu.bind(null,Le=>""+Le),P=Yu.bind(null,Hy),j=Yu.bind(null,Xo);function J(Le,Ze){let Ve,it;return Sp(Le)?(Ve=i.getRecordMatcher(Le),it=Ze):it=Le,i.addRoute(it,Ve)}function R(Le){const Ze=i.getRecordMatcher(Le);Ze&&i.removeRoute(Ze)}function Z(){return i.getRoutes().map(Le=>Le.record)}function q(Le){return!!i.getRecordMatcher(Le)}function xe(Le,Ze){if(Ze=Nt({},Ze||v.value),typeof Le=="string"){const ce=Qu(s,Le,Ze.path),Re=i.resolve({path:ce.path},Ze),de=h.createHref(ce.fullPath);return Nt(ce,Re,{params:j(Re.params),hash:Xo(ce.hash),redirectedFrom:void 0,href:de})}let Ve;if(Le.path!=null)Ve=Nt({},Le,{path:Qu(s,Le.path,Ze.path).path});else{const ce=Nt({},Le.params);for(const Re in ce)ce[Re]==null&&delete ce[Re];Ve=Nt({},Le,{params:P(ce)}),Ze.params=P(Ze.params)}const it=i.resolve(Ve,Ze),Et=Le.hash||"";it.params=M(j(it.params));const U=Ky(l,Nt({},Le,{hash:Uy(Et),path:it.path})),K=h.createHref(U);return Nt({fullPath:U,hash:Et,query:l===pd?Cv(Le.query):Le.query||{}},it,{redirectedFrom:void 0,href:K})}function ie(Le){return typeof Le=="string"?Qu(s,Le,v.value.path):Nt({},Le)}function V(Le,Ze){if(C!==Le)return Gs(8,{from:Ze,to:Le})}function le(Le){return Pe(Le)}function Oe(Le){return le(Nt(ie(Le),{replace:!0}))}function Ee(Le){const Ze=Le.matched[Le.matched.length-1];if(Ze&&Ze.redirect){const{redirect:Ve}=Ze;let it=typeof Ve=="function"?Ve(Le):Ve;return typeof it=="string"&&(it=it.includes("?")||it.includes("#")?it=ie(it):{path:it},it.params={}),Nt({query:Le.query,hash:Le.hash,params:it.path!=null?{}:Le.params},it)}}function Pe(Le,Ze){const Ve=C=xe(Le),it=v.value,Et=Le.state,U=Le.force,K=Le.replace===!0,ce=Ee(Ve);if(ce)return Pe(Nt(ie(ce),{state:typeof ce=="object"?Nt({},Et,ce.state):Et,force:U,replace:K}),Ze||Ve);const Re=Ve;Re.redirectedFrom=Ze;let de;return!U&&Wy(l,it,Ve)&&(de=Gs(16,{to:Re,from:it}),He(it,it,!0,!1)),(de?Promise.resolve(de):ye(Re,it)).catch(z=>Xi(z)?Xi(z,2)?z:se(z):H(z,Re,it)).then(z=>{if(z){if(Xi(z,2))return Pe(Nt({replace:K},ie(z.to),{state:typeof z.to=="object"?Nt({},Et,z.to.state):Et,force:U}),Ze||Re)}else z=Be(Re,it,!0,K,Et);return ne(Re,it,z),z})}function F(Le,Ze){const Ve=V(Le,Ze);return Ve?Promise.reject(Ve):Promise.resolve()}function te(Le){const Ze=Je.values().next().value;return Ze&&typeof Ze.runWithContext=="function"?Ze.runWithContext(Le):Le()}function ye(Le,Ze){let Ve;const[it,Et,U]=Tv(Le,Ze);Ve=ec(it.reverse(),"beforeRouteLeave",Le,Ze);for(const ce of it)ce.leaveGuards.forEach(Re=>{Ve.push(wr(Re,Le,Ze))});const K=F.bind(null,Le,Ze);return Ve.push(K),Xe(Ve).then(()=>{Ve=[];for(const ce of p.list())Ve.push(wr(ce,Le,Ze));return Ve.push(K),Xe(Ve)}).then(()=>{Ve=ec(Et,"beforeRouteUpdate",Le,Ze);for(const ce of Et)ce.updateGuards.forEach(Re=>{Ve.push(wr(Re,Le,Ze))});return Ve.push(K),Xe(Ve)}).then(()=>{Ve=[];for(const ce of U)if(ce.beforeEnter)if(wi(ce.beforeEnter))for(const Re of ce.beforeEnter)Ve.push(wr(Re,Le,Ze));else Ve.push(wr(ce.beforeEnter,Le,Ze));return Ve.push(K),Xe(Ve)}).then(()=>(Le.matched.forEach(ce=>ce.enterCallbacks={}),Ve=ec(U,"beforeRouteEnter",Le,Ze,te),Ve.push(K),Xe(Ve))).then(()=>{Ve=[];for(const ce of f.list())Ve.push(wr(ce,Le,Ze));return Ve.push(K),Xe(Ve)}).catch(ce=>Xi(ce,8)?ce:Promise.reject(ce))}function ne(Le,Ze,Ve){y.list().forEach(it=>te(()=>it(Le,Ze,Ve)))}function Be(Le,Ze,Ve,it,Et){const U=V(Le,Ze);if(U)return U;const K=Ze===yr,ce=Ds?history.state:{};Ve&&(it||K?h.replace(Le.fullPath,Nt({scroll:K&&ce&&ce.scroll},Et)):h.push(Le.fullPath,Et)),v.value=Le,He(Le,Ze,Ve,K),se()}let Fe;function re(){Fe||(Fe=h.listen((Le,Ze,Ve)=>{if(!nt.listening)return;const it=xe(Le),Et=Ee(it);if(Et){Pe(Nt(Et,{replace:!0,force:!0}),it).catch(Go);return}C=it;const U=v.value;Ds&&iv(sd(U.fullPath,Ve.delta),jl()),ye(it,U).catch(K=>Xi(K,12)?K:Xi(K,2)?(Pe(Nt(ie(K.to),{force:!0}),it).then(ce=>{Xi(ce,20)&&!Ve.delta&&Ve.type===Yo.pop&&h.go(-1,!1)}).catch(Go),Promise.reject()):(Ve.delta&&h.go(-Ve.delta,!1),H(K,it,U))).then(K=>{K=K||Be(it,U,!1),K&&(Ve.delta&&!Xi(K,8)?h.go(-Ve.delta,!1):Ve.type===Yo.pop&&Xi(K,20)&&h.go(-1,!1)),ne(it,U,K)}).catch(Go)}))}let Se=To(),Ae=To(),ve;function H(Le,Ze,Ve){se(Le);const it=Ae.list();return it.length?it.forEach(Et=>Et(Le,Ze,Ve)):console.error(Le),Promise.reject(Le)}function ee(){return ve&&v.value!==yr?Promise.resolve():new Promise((Le,Ze)=>{Se.add([Le,Ze])})}function se(Le){return ve||(ve=!Le,re(),Se.list().forEach(([Ze,Ve])=>Le?Ve(Le):Ze()),Se.reset()),Le}function He(Le,Ze,Ve,it){const{scrollBehavior:Et}=e;if(!Ds||!Et)return Promise.resolve();const U=!Ve&&rv(sd(Le.fullPath,0))||(it||!Ve)&&history.state&&history.state.scroll||null;return zs().then(()=>Et(Le,Ze,U)).then(K=>K&&nv(K)).catch(K=>H(K,Le,Ze))}const Ye=Le=>h.go(Le);let Ke;const Je=new Set,nt={currentRoute:v,listening:!0,addRoute:J,removeRoute:R,clearRoutes:i.clearRoutes,hasRoute:q,getRoutes:Z,resolve:xe,options:e,push:le,replace:Oe,go:Ye,back:()=>Ye(-1),forward:()=>Ye(1),beforeEach:p.add,beforeResolve:f.add,afterEach:y.add,onError:Ae.add,isReady:ee,install(Le){const Ze=this;Le.component("RouterLink",Rs),Le.component("RouterView",Dp),Le.config.globalProperties.$router=Ze,Object.defineProperty(Le.config.globalProperties,"$route",{enumerable:!0,get:()=>xt(v)}),Ds&&!Ke&&v.value===yr&&(Ke=!0,le(h.location).catch(Et=>{}));const Ve={};for(const Et in yr)Object.defineProperty(Ve,Et,{get:()=>v.value[Et],enumerable:!0});Le.provide(Ul,Ze),Le.provide(Qc,of(Ve)),Le.provide(Cc,v);const it=Le.unmount;Je.add(Le),Le.unmount=function(){Je.delete(Le),Je.size<1&&(C=yr,Fe&&Fe(),Fe=null,v.value=yr,Ke=!1,ve=!1),it()}}};function Xe(Le){return Le.reduce((Ze,Ve)=>Ze.then(()=>te(Ve)),Promise.resolve())}return nt}function Tv(e,i){const s=[],l=[],h=[],p=Math.max(i.matched.length,e.matched.length);for(let f=0;f<p;f++){const y=i.matched[f];y&&(e.matched.find(C=>Us(C,y))?l.push(y):s.push(y));const v=e.matched[f];v&&(i.matched.find(C=>Us(C,v))||h.push(v))}return[s,l,h]}function qs(){return fi(Ul)}function _C(e){return fi(Qc)}var ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Dv(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}var Op=Dv,Rv=typeof ir=="object"&&ir&&ir.Object===Object&&ir,Ov=Rv,Iv=Ov,Fv=typeof self=="object"&&self&&self.Object===Object&&self,Nv=Iv||Fv||Function("return this")(),Ip=Nv,zv=Ip,$v=function(){return zv.Date.now()},jv=$v,Uv=/\s/;function Gv(e){for(var i=e.length;i--&&Uv.test(e.charAt(i)););return i}var Vv=Gv,Hv=Vv,Zv=/^\s+/;function qv(e){return e&&e.slice(0,Hv(e)+1).replace(Zv,"")}var Kv=qv,Wv=Ip,Jv=Wv.Symbol,Fp=Jv,bd=Fp,Np=Object.prototype,Xv=Np.hasOwnProperty,Yv=Np.toString,Do=bd?bd.toStringTag:void 0;function Qv(e){var i=Xv.call(e,Do),s=e[Do];try{e[Do]=void 0;var l=!0}catch{}var h=Yv.call(e);return l&&(i?e[Do]=s:delete e[Do]),h}var e4=Qv,t4=Object.prototype,n4=t4.toString;function i4(e){return n4.call(e)}var r4=i4,xd=Fp,s4=e4,o4=r4,a4="[object Null]",l4="[object Undefined]",wd=xd?xd.toStringTag:void 0;function u4(e){return e==null?e===void 0?l4:a4:wd&&wd in Object(e)?s4(e):o4(e)}var c4=u4;function h4(e){return e!=null&&typeof e=="object"}var d4=h4,f4=c4,p4=d4,m4="[object Symbol]";function g4(e){return typeof e=="symbol"||p4(e)&&f4(e)==m4}var _4=g4,y4=Kv,Ld=Op,v4=_4,Cd=NaN,b4=/^[-+]0x[0-9a-f]+$/i,x4=/^0b[01]+$/i,w4=/^0o[0-7]+$/i,L4=parseInt;function C4(e){if(typeof e=="number")return e;if(v4(e))return Cd;if(Ld(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Ld(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=y4(e);var s=x4.test(e);return s||w4.test(e)?L4(e.slice(2),s?2:8):b4.test(e)?Cd:+e}var k4=C4,E4=Op,tc=jv,kd=k4,M4="Expected a function",P4=Math.max,S4=Math.min;function B4(e,i,s){var l,h,p,f,y,v,C=0,M=!1,P=!1,j=!0;if(typeof e!="function")throw new TypeError(M4);i=kd(i)||0,E4(s)&&(M=!!s.leading,P="maxWait"in s,p=P?P4(kd(s.maxWait)||0,i):p,j="trailing"in s?!!s.trailing:j);function J(Ee){var Pe=l,F=h;return l=h=void 0,C=Ee,f=e.apply(F,Pe),f}function R(Ee){return C=Ee,y=setTimeout(xe,i),M?J(Ee):f}function Z(Ee){var Pe=Ee-v,F=Ee-C,te=i-Pe;return P?S4(te,p-F):te}function q(Ee){var Pe=Ee-v,F=Ee-C;return v===void 0||Pe>=i||Pe<0||P&&F>=p}function xe(){var Ee=tc();if(q(Ee))return ie(Ee);y=setTimeout(xe,Z(Ee))}function ie(Ee){return y=void 0,j&&l?J(Ee):(l=h=void 0,f)}function V(){y!==void 0&&clearTimeout(y),C=0,l=v=h=y=void 0}function le(){return y===void 0?f:ie(tc())}function Oe(){var Ee=tc(),Pe=q(Ee);if(l=arguments,h=this,v=Ee,Pe){if(y===void 0)return R(v);if(P)return clearTimeout(y),y=setTimeout(xe,i),J(v)}return y===void 0&&(y=setTimeout(xe,i)),f}return Oe.cancel=V,Oe.flush=le,Oe}var A4=B4;const T4=Rp(A4),D4={class:"relative w-full"},R4={key:0,class:"absolute w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto z-[1001]"},O4=["onClick"],I4=Kn({__name:"SearchBar",emits:["select-location"],setup(e,{emit:i}){const s=qe(""),l=qe([]),h=i,p=T4(async v=>{if(v.length<3){l.value=[];return}try{const M=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(v)}`)).json();l.value=M}catch(C){console.error("Erreur lors de la recherche d'adresse:",C),l.value=[]}},300);function f(){p(s.value)}function y(v){s.value=v.display_name,l.value=[],h("select-location",{lat:parseFloat(v.lat),lng:parseFloat(v.lon)})}return(v,C)=>(_e(),we("div",D4,[Bt(w("input",{"onUpdate:modelValue":C[0]||(C[0]=M=>s.value=M),onInput:f,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[en,s.value]]),l.value.length>0?(_e(),we("div",R4,[(_e(!0),we(Lt,null,Ot(l.value,M=>(_e(),we("div",{key:M.place_id,onClick:P=>y(M),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Ge(M.display_name),9,O4))),128))])):dt("",!0)]))}}),zp=(e,i)=>{const s=e.__vccOpts||e;for(const[l,h]of i)s[l]=h;return s},Ed=zp(I4,[["__scopeId","data-v-0102bcad"]]),F4={class:"h-screen flex flex-col"},N4={key:0,class:"bg-white shadow-sm z-[2000]"},z4={class:"mx-auto px-4 sm:px-6 lg:px-8"},$4={class:"flex h-16 items-center justify-between"},j4={class:"flex items-center space-x-8"},U4={class:"hidden md:flex space-x-6"},G4={key:0,class:"hidden md:block flex-1 mx-8"},V4={key:1,class:"flex-1"},H4={class:"flex items-center space-x-2 md:space-x-4"},Z4={class:"flex md:hidden"},q4={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K4={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},W4={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},J4={class:"relative"},X4={class:"hidden md:flex flex-col items-end"},Y4={class:"text-sm font-medium text-gray-700"},Q4={key:0,class:"text-xs text-gray-500"},e1=["src","alt"],t1={key:0,class:"absolute right-0 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3000]"},n1={class:"md:hidden px-4 py-2 border-b border-gray-100"},i1={class:"text-sm font-medium text-gray-700"},r1={class:"text-xs text-gray-500"},s1={key:0,class:"md:hidden"},o1={class:"space-y-1 px-2 pb-3 pt-2"},a1={key:0,class:"px-4 py-3"},l1={class:"flex-1 overflow-auto"},u1={key:0,class:"fixed inset-0 bg-white z-[2001] flex flex-col items-center justify-center p-6 text-center"},c1=Kn({__name:"App",setup(e){const i=qs(),s=jn(),l=qe(!1),h=qe(!1),p=qe(!1);function f(){p.value=window.innerWidth<768}rr(()=>{f(),window.addEventListener("resize",f)}),Hc(()=>{window.removeEventListener("resize",f)});const y=kt(()=>{const ie=s.user;if(!ie)return"";const V=`${ie.first_name} ${ie.last_name.toUpperCase()}`;return ie.company_name?`${V} (${ie.company_name})`:V}),v=kt(()=>{var V;const ie=(V=s.user)==null?void 0:V.user_type;switch(console.log("User type:",ie),ie){case"admin":return"Accès administrateur";case"dealer":return"Accès concessionnaire";case"client":return"Accès client";default:return""}}),C=kt(()=>{var ie;return((ie=s.user)==null?void 0:ie.user_type)==="admin"}),M=qe(""),P=kt(()=>s.isAuthenticated),j=[{name:"Carte",to:"/"},{name:"Plans",to:"/plans"}],J=kt(()=>{var V;if(!P.value)return[];const ie=[...j];return C.value?ie.push({name:"Utilisateurs",to:"/users"}):((V=s.user)==null?void 0:V.user_type)==="dealer"&&ie.push({name:"Clients",to:"/clients"}),ie}),R=kt(()=>P.value?[{name:"Mon profil",to:"/profile"}]:[]);async function Z(){try{await s.logout(),i.push("/login")}catch(ie){console.error("Erreur lors de la déconnexion:",ie)}}function q(ie){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:ie.lat,lng:ie.lng,zoom:16}}))}rr(async()=>{console.log("App mounted, checking auth...");try{localStorage.getItem("token")?(console.log("Token found, checking auth..."),await s.checkAuth(),await s.fetchUserProfile()):console.log("No token found")}catch(ie){console.error("Auth check error:",ie),i.push("/login")}});const xe=kt(()=>{const ie="IrrigationDesign";if(!P.value)return`${ie} - Connexion`;const V=i.currentRoute.value,Oe={home:"Carte",plans:"Plans",users:"Utilisateurs",profile:"Mon profil",selectDealer:"Sélection du concessionnaire",changePassword:"Changement de mot de passe",map:"Carte"}[V.name]||"";return Oe?`${ie} - ${Oe}`:ie});return ei(xe,ie=>{document.title=ie},{immediate:!0}),(ie,V)=>(_e(),we("div",F4,[P.value?(_e(),we("header",N4,[w("nav",z4,[w("div",$4,[w("div",j4,[sn(xt(Rs),{to:"/",class:"text-xl font-semibold text-primary-600 truncate"},{default:Hr(()=>V[4]||(V[4]=[w("span",{class:"md:inline hidden"},"IrrigationDesign",-1),w("span",{class:"md:hidden inline"},"ID",-1)])),_:1}),w("div",U4,[(_e(!0),we(Lt,null,Ot(J.value,le=>(_e(),nr(xt(Rs),{key:le.name,to:le.to,class:$n(["text-sm font-medium transition-colors duration-200",[ie.$route.path===le.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Hr(()=>[Jt(Ge(le.name),1)]),_:2},1032,["to","class"]))),128))])]),ie.$route.path==="/"?(_e(),we("div",G4,[sn(Ed,{onSelectLocation:q})])):(_e(),we("div",V4)),w("div",H4,[w("div",Z4,[w("button",{onClick:V[0]||(V[0]=le=>h.value=!h.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500"},[V[5]||(V[5]=w("span",{class:"sr-only"},"Ouvrir le menu",-1)),(_e(),we("svg",q4,[h.value?(_e(),we("path",W4)):(_e(),we("path",K4))]))])]),V[6]||(V[6]=w("button",{class:"hidden md:flex p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[w("span",{class:"sr-only"},"Voir les notifications"),w("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])],-1)),w("div",J4,[w("button",{onClick:V[1]||(V[1]=le=>l.value=!l.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[w("div",X4,[w("span",Y4,Ge(y.value),1),v.value?(_e(),we("span",Q4,Ge(v.value),1)):dt("",!0)]),w("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:M.value||"https://ui-avatars.com/api/?name="+encodeURIComponent(y.value),alt:y.value},null,8,e1)]),l.value?(_e(),we("div",t1,[w("div",n1,[w("div",i1,Ge(y.value),1),w("div",r1,Ge(v.value),1)]),(_e(!0),we(Lt,null,Ot(R.value,le=>(_e(),nr(xt(Rs),{key:le.name,to:le.to,class:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:V[2]||(V[2]=Oe=>l.value=!1)},{default:Hr(()=>[Jt(Ge(le.name),1)]),_:2},1032,["to"]))),128)),w("button",{onClick:Z,class:"block w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50"}," Déconnexion ")])):dt("",!0)])])]),h.value?(_e(),we("div",s1,[w("div",o1,[(_e(!0),we(Lt,null,Ot(J.value,le=>(_e(),nr(xt(Rs),{key:le.name,to:le.to,class:$n(["block px-3 py-2 rounded-md text-base font-medium",[ie.$route.path===le.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:V[3]||(V[3]=Oe=>h.value=!1)},{default:Hr(()=>[Jt(Ge(le.name),1)]),_:2},1032,["to","class"]))),128))]),ie.$route.path==="/"?(_e(),we("div",a1,[sn(Ed,{onSelectLocation:q})])):dt("",!0)])):dt("",!0)])])):dt("",!0),w("main",l1,[p.value&&ie.$route.path==="/"?(_e(),we("div",u1,[V[8]||(V[8]=w("svg",{class:"w-24 h-24 text-primary-500 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),V[9]||(V[9]=w("h2",{class:"text-2xl font-bold text-gray-900 mb-4"}," Version bureau recommandée ",-1)),V[10]||(V[10]=w("p",{class:"text-gray-600 mb-8 max-w-md"}," Pour une meilleure expérience de conception d'irrigation, nous vous recommandons d'utiliser un écran plus large ou un ordinateur. ",-1)),sn(xt(Rs),{to:"/plans",class:"inline-flex items-center px-4 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700"},{default:Hr(()=>V[7]||(V[7]=[Jt(" Voir mes plans ")])),_:1})])):(_e(),nr(xt(Dp),{key:1}))])]))}}),h1="modulepreload",d1=function(e){return"/static/frontend/"+e},Md={},Ka=function(i,s,l){let h=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),y=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));h=Promise.allSettled(s.map(v=>{if(v=d1(v),v in Md)return;Md[v]=!0;const C=v.endsWith(".css"),M=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${M}`))return;const P=document.createElement("link");if(P.rel=C?"stylesheet":h1,C||(P.as="script"),P.crossOrigin="",P.href=v,y&&P.setAttribute("nonce",y),document.head.appendChild(P),C)return new Promise((j,J)=>{P.addEventListener("load",j),P.addEventListener("error",()=>J(new Error(`Unable to preload CSS for ${v}`)))})}))}function p(f){const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=f,window.dispatchEvent(y),!y.defaultPrevented)throw f}return h.then(f=>{for(const y of f||[])y.status==="rejected"&&p(y.reason);return i().catch(p)})},f1={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},p1={class:"max-w-md w-full space-y-8"},m1={class:"space-y-4"},g1={class:"mt-1"},_1={class:"mt-1"},y1={class:"mt-1"},v1={key:0,class:"rounded-md bg-red-50 p-4"},b1={class:"flex"},x1={class:"ml-3"},w1={class:"text-sm font-medium text-red-800"},L1={key:1,class:"rounded-md bg-yellow-50 p-4"},C1={class:"flex"},k1={class:"ml-3"},E1={class:"mt-2 text-sm text-yellow-700"},M1={class:"list-disc pl-5 space-y-1"},P1=["disabled"],S1={class:"absolute left-0 inset-y-0 flex items-center pl-3"},B1={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},A1={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},T1=Kn({__name:"ChangePasswordForm",setup(e){const i=qs(),s=jn(),l=sr({oldPassword:"",newPassword:"",confirmPassword:""}),h=qe(!1),p=qe("");rr(()=>{var C,M;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:s.isAuthenticated,userId:(C=s.user)==null?void 0:C.id,mustChangePassword:(M=s.user)==null?void 0:M.must_change_password})});const f=kt(()=>{const C=[];return l.newPassword&&l.newPassword.length<8&&C.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),l.newPassword&&l.confirmPassword&&l.newPassword!==l.confirmPassword&&C.push("Les mots de passe ne correspondent pas"),C}),y=kt(()=>l.oldPassword.length>0&&l.newPassword.length>=8&&l.newPassword===l.confirmPassword);async function v(){var C,M,P,j,J,R,Z,q;if(!y.value){p.value="Veuillez corriger les erreurs avant de continuer";return}if(!((C=s.user)!=null&&C.id)){p.value="Erreur : utilisateur non identifié";return}h.value=!0,p.value="";try{console.log("Submitting password change..."),await s.changePassword(l.oldPassword,l.newPassword),console.log("Password changed successfully"),i.push("/")}catch(xe){console.error("Password change failed:",xe),(P=(M=xe.response)==null?void 0:M.data)!=null&&P.detail?p.value=xe.response.data.detail:(J=(j=xe.response)==null?void 0:j.data)!=null&&J.old_password?p.value=xe.response.data.old_password[0]:(Z=(R=xe.response)==null?void 0:R.data)!=null&&Z.password?p.value=xe.response.data.password[0]:((q=xe.response)==null?void 0:q.status)===401?(p.value="Session expirée, veuillez vous reconnecter",await s.logout(),i.push("/login")):p.value="Une erreur est survenue lors du changement de mot de passe"}finally{h.value=!1}}return(C,M)=>(_e(),we("div",f1,[w("div",p1,[M[12]||(M[12]=w("div",null,[w("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),w("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),w("form",{class:"mt-8 space-y-6",onSubmit:Dl(v,["prevent"])},[w("div",m1,[w("div",null,[M[3]||(M[3]=w("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),w("div",g1,[Bt(w("input",{id:"old-password","onUpdate:modelValue":M[0]||(M[0]=P=>l.oldPassword=P),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[en,l.oldPassword]])])]),w("div",null,[M[4]||(M[4]=w("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),w("div",_1,[Bt(w("input",{id:"new-password","onUpdate:modelValue":M[1]||(M[1]=P=>l.newPassword=P),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[en,l.newPassword]])]),M[5]||(M[5]=w("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),w("div",null,[M[6]||(M[6]=w("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),w("div",y1,[Bt(w("input",{id:"confirm-password","onUpdate:modelValue":M[2]||(M[2]=P=>l.confirmPassword=P),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[en,l.confirmPassword]])])])]),p.value?(_e(),we("div",v1,[w("div",b1,[M[7]||(M[7]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",x1,[w("h3",w1,Ge(p.value),1)])])])):dt("",!0),f.value.length>0?(_e(),we("div",L1,[w("div",C1,[M[9]||(M[9]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),w("div",k1,[M[8]||(M[8]=w("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),w("div",E1,[w("ul",M1,[(_e(!0),we(Lt,null,Ot(f.value,(P,j)=>(_e(),we("li",{key:j},Ge(P),1))),128))])])])])])):dt("",!0),w("div",null,[w("button",{type:"submit",disabled:h.value||!y.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[w("span",S1,[h.value?(_e(),we("svg",A1,M[11]||(M[11]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(_e(),we("svg",B1,M[10]||(M[10]=[w("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Jt(" "+Ge(h.value?"Modification en cours...":"Changer le mot de passe"),1)],8,P1)])],32)])]))}}),$p="/static/frontend/assets/logo.svg",D1={class:"min-h-screen bg-white from-blue-50 to-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},R1={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},O1={class:"bg-white py-8 px-6 shadow-lg rounded-md sm:px-10"},I1={key:0,class:"rounded-md bg-red-50 p-4"},F1={class:"flex"},N1={class:"ml-3"},z1={class:"text-sm font-medium text-red-800"},$1={class:"mt-1"},j1={class:"mt-1 relative"},U1=["type"],G1={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},V1={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},H1={class:"flex items-center justify-between"},Z1={class:"flex items-center"},q1={class:"text-sm"},K1=["disabled"],W1={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},J1=Kn({__name:"LoginView",setup(e){const i=qs(),s=jn(),l=qe(!1),h=qe(null),p=qe(!1),f=sr({username:"",password:"",rememberMe:!1});rr(()=>{var v;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE),(v=window.INITIAL_STATE)!=null&&v.isAuthenticated&&(console.log("User is authenticated, redirecting to home"),i.push("/"))});async function y(){var v,C,M,P,j,J;l.value=!0,h.value=null;try{if(!f.username||!f.password){h.value="Veuillez remplir tous les champs";return}await s.login(f.username,f.password),(v=s.user)!=null&&v.must_change_password?i.push("/change-password"):i.push("/")}catch(R){console.error("Login error:",R),h.value=((M=(C=R==null?void 0:R.response)==null?void 0:C.data)==null?void 0:M.detail)||((J=(j=(P=R==null?void 0:R.response)==null?void 0:P.data)==null?void 0:j.non_field_errors)==null?void 0:J[0])||(R==null?void 0:R.message)||"Erreur lors de la connexion"}finally{l.value=!1}}return(v,C)=>{const M=E0("router-link");return _e(),we("div",D1,[C[12]||(C[12]=w("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[w("img",{src:$p,alt:"IrrigationDesign Logo",class:"mx-auto h-40 w-auto transition-transform duration-300 hover:scale-110"}),w("h2",{class:"mt-2 text-center text-3xl font-bold text-gray-800"}," IrrigationDesign "),w("p",{class:"mt-2 text-center text-sm text-gray-600"}," Connectez-vous pour accéder à votre espace ")],-1)),w("div",R1,[w("div",O1,[w("form",{class:"space-y-6",onSubmit:Dl(y,["prevent"])},[h.value?(_e(),we("div",I1,[w("div",F1,[C[4]||(C[4]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",N1,[w("h3",z1,Ge(h.value),1)])])])):dt("",!0),w("div",null,[C[5]||(C[5]=w("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),w("div",$1,[Bt(w("input",{id:"username","onUpdate:modelValue":C[0]||(C[0]=P=>f.username=P),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[en,f.username]])])]),w("div",null,[C[8]||(C[8]=w("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),w("div",j1,[Bt(w("input",{id:"password","onUpdate:modelValue":C[1]||(C[1]=P=>f.password=P),type:p.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,U1),[[$g,f.password]]),w("button",{type:"button",onClick:C[2]||(C[2]=P=>p.value=!p.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[p.value?(_e(),we("svg",G1,C[6]||(C[6]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(_e(),we("svg",V1,C[7]||(C[7]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),w("div",H1,[w("div",Z1,[Bt(w("input",{id:"remember-me","onUpdate:modelValue":C[3]||(C[3]=P=>f.rememberMe=P),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Gf,f.rememberMe]]),C[9]||(C[9]=w("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),w("div",q1,[sn(M,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Hr(()=>C[10]||(C[10]=[Jt(" Mot de passe oublié ? ")])),_:1})])]),w("div",null,[w("button",{type:"submit",disabled:l.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[l.value?(_e(),we("svg",W1,C[11]||(C[11]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):dt("",!0),Jt(" "+Ge(l.value?"Connexion en cours...":"Se connecter"),1)],8,K1)])],32)])])])}}});var kc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,i){(function(s,l){l(i)})(ir,function(s){var l="1.9.4";function h(t){var o,c,m,x;for(c=1,m=arguments.length;c<m;c++){x=arguments[c];for(o in x)t[o]=x[o]}return t}var p=Object.create||function(){function t(){}return function(o){return t.prototype=o,new t}}();function f(t,o){var c=Array.prototype.slice;if(t.bind)return t.bind.apply(t,c.call(arguments,1));var m=c.call(arguments,2);return function(){return t.apply(o,m.length?m.concat(c.call(arguments)):arguments)}}var y=0;function v(t){return"_leaflet_id"in t||(t._leaflet_id=++y),t._leaflet_id}function C(t,o,c){var m,x,B,W;return W=function(){m=!1,x&&(B.apply(c,x),x=!1)},B=function(){m?x=arguments:(t.apply(c,arguments),setTimeout(W,o),m=!0)},B}function M(t,o,c){var m=o[1],x=o[0],B=m-x;return t===m&&c?t:((t-x)%B+B)%B+x}function P(){return!1}function j(t,o){if(o===!1)return t;var c=Math.pow(10,o===void 0?6:o);return Math.round(t*c)/c}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function R(t){return J(t).split(/\s+/)}function Z(t,o){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?p(t.options):{});for(var c in o)t.options[c]=o[c];return t.options}function q(t,o,c){var m=[];for(var x in t)m.push(encodeURIComponent(c?x.toUpperCase():x)+"="+encodeURIComponent(t[x]));return(!o||o.indexOf("?")===-1?"?":"&")+m.join("&")}var xe=/\{ *([\w_ -]+) *\}/g;function ie(t,o){return t.replace(xe,function(c,m){var x=o[m];if(x===void 0)throw new Error("No value provided for variable "+c);return typeof x=="function"&&(x=x(o)),x})}var V=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function le(t,o){for(var c=0;c<t.length;c++)if(t[c]===o)return c;return-1}var Oe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ee(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var Pe=0;function F(t){var o=+new Date,c=Math.max(0,16-(o-Pe));return Pe=o+c,window.setTimeout(t,c)}var te=window.requestAnimationFrame||Ee("RequestAnimationFrame")||F,ye=window.cancelAnimationFrame||Ee("CancelAnimationFrame")||Ee("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ne(t,o,c){if(c&&te===F)t.call(o);else return te.call(window,f(t,o))}function Be(t){t&&ye.call(window,t)}var Fe={__proto__:null,extend:h,create:p,bind:f,get lastId(){return y},stamp:v,throttle:C,wrapNum:M,falseFn:P,formatNum:j,trim:J,splitWords:R,setOptions:Z,getParamString:q,template:ie,isArray:V,indexOf:le,emptyImageUrl:Oe,requestFn:te,cancelFn:ye,requestAnimFrame:ne,cancelAnimFrame:Be};function re(){}re.extend=function(t){var o=function(){Z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,m=p(c);m.constructor=o,o.prototype=m;for(var x in this)Object.prototype.hasOwnProperty.call(this,x)&&x!=="prototype"&&x!=="__super__"&&(o[x]=this[x]);return t.statics&&h(o,t.statics),t.includes&&(Se(t.includes),h.apply(null,[m].concat(t.includes))),h(m,t),delete m.statics,delete m.includes,m.options&&(m.options=c.options?p(c.options):{},h(m.options,t.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,W=m._initHooks.length;B<W;B++)m._initHooks[B].call(this)}},o},re.include=function(t){var o=this.prototype.options;return h(this.prototype,t),t.options&&(this.prototype.options=o,this.mergeOptions(t.options)),this},re.mergeOptions=function(t){return h(this.prototype.options,t),this},re.addInitHook=function(t){var o=Array.prototype.slice.call(arguments,1),c=typeof t=="function"?t:function(){this[t].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Se(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=V(t)?t:[t];for(var o=0;o<t.length;o++)t[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ae={on:function(t,o,c){if(typeof t=="object")for(var m in t)this._on(m,t[m],o);else{t=R(t);for(var x=0,B=t.length;x<B;x++)this._on(t[x],o,c)}return this},off:function(t,o,c){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var m in t)this._off(m,t[m],o);else{t=R(t);for(var x=arguments.length===1,B=0,W=t.length;B<W;B++)x?this._off(t[B]):this._off(t[B],o,c)}return this},_on:function(t,o,c,m){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(t,o,c)===!1){c===this&&(c=void 0);var x={fn:o,ctx:c};m&&(x.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(x)}},_off:function(t,o,c){var m,x,B;if(this._events&&(m=this._events[t],!!m)){if(arguments.length===1){if(this._firingCount)for(x=0,B=m.length;x<B;x++)m[x].fn=P;delete this._events[t];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var W=this._listens(t,o,c);if(W!==!1){var fe=m[W];this._firingCount&&(fe.fn=P,this._events[t]=m=m.slice()),m.splice(W,1)}}},fire:function(t,o,c){if(!this.listens(t,c))return this;var m=h({},o,{type:t,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var x=this._events[t];if(x){this._firingCount=this._firingCount+1||1;for(var B=0,W=x.length;B<W;B++){var fe=x[B],Me=fe.fn;fe.once&&this.off(t,Me,fe.ctx),Me.call(fe.ctx||this,m)}this._firingCount--}}return c&&this._propagateEvent(m),this},listens:function(t,o,c,m){typeof t!="string"&&console.warn('"string" type argument expected');var x=o;typeof o!="function"&&(m=!!o,x=void 0,c=void 0);var B=this._events&&this._events[t];if(B&&B.length&&this._listens(t,x,c)!==!1)return!0;if(m){for(var W in this._eventParents)if(this._eventParents[W].listens(t,o,c,m))return!0}return!1},_listens:function(t,o,c){if(!this._events)return!1;var m=this._events[t]||[];if(!o)return!!m.length;c===this&&(c=void 0);for(var x=0,B=m.length;x<B;x++)if(m[x].fn===o&&m[x].ctx===c)return x;return!1},once:function(t,o,c){if(typeof t=="object")for(var m in t)this._on(m,t[m],o,!0);else{t=R(t);for(var x=0,B=t.length;x<B;x++)this._on(t[x],o,c,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[v(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[v(t)],this},_propagateEvent:function(t){for(var o in this._eventParents)this._eventParents[o].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};Ae.addEventListener=Ae.on,Ae.removeEventListener=Ae.clearAllEventListeners=Ae.off,Ae.addOneTimeEventListener=Ae.once,Ae.fireEvent=Ae.fire,Ae.hasEventListeners=Ae.listens;var ve=re.extend(Ae);function H(t,o,c){this.x=c?Math.round(t):t,this.y=c?Math.round(o):o}var ee=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(t){return this.clone()._add(se(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(se(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new H(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new H(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ee(this.x),this.y=ee(this.y),this},distanceTo:function(t){t=se(t);var o=t.x-this.x,c=t.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(t){return t=se(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=se(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+j(this.x)+", "+j(this.y)+")"}};function se(t,o,c){return t instanceof H?t:V(t)?new H(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new H(t.x,t.y):new H(t,o,c)}function He(t,o){if(t)for(var c=o?[t,o]:t,m=0,x=c.length;m<x;m++)this.extend(c[m])}He.prototype={extend:function(t){var o,c;if(!t)return this;if(t instanceof H||typeof t[0]=="number"||"x"in t)o=c=se(t);else if(t=Ye(t),o=t.min,c=t.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(t){return se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return se(this.min.x,this.max.y)},getTopRight:function(){return se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var o,c;return typeof t[0]=="number"||t instanceof H?t=se(t):t=Ye(t),t instanceof He?(o=t.min,c=t.max):o=c=t,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(t){t=Ye(t);var o=this.min,c=this.max,m=t.min,x=t.max,B=x.x>=o.x&&m.x<=c.x,W=x.y>=o.y&&m.y<=c.y;return B&&W},overlaps:function(t){t=Ye(t);var o=this.min,c=this.max,m=t.min,x=t.max,B=x.x>o.x&&m.x<c.x,W=x.y>o.y&&m.y<c.y;return B&&W},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var o=this.min,c=this.max,m=Math.abs(o.x-c.x)*t,x=Math.abs(o.y-c.y)*t;return Ye(se(o.x-m,o.y-x),se(c.x+m,c.y+x))},equals:function(t){return t?(t=Ye(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Ye(t,o){return!t||t instanceof He?t:new He(t,o)}function Ke(t,o){if(t)for(var c=o?[t,o]:t,m=0,x=c.length;m<x;m++)this.extend(c[m])}Ke.prototype={extend:function(t){var o=this._southWest,c=this._northEast,m,x;if(t instanceof nt)m=t,x=t;else if(t instanceof Ke){if(m=t._southWest,x=t._northEast,!m||!x)return this}else return t?this.extend(Xe(t)||Je(t)):this;return!o&&!c?(this._southWest=new nt(m.lat,m.lng),this._northEast=new nt(x.lat,x.lng)):(o.lat=Math.min(m.lat,o.lat),o.lng=Math.min(m.lng,o.lng),c.lat=Math.max(x.lat,c.lat),c.lng=Math.max(x.lng,c.lng)),this},pad:function(t){var o=this._southWest,c=this._northEast,m=Math.abs(o.lat-c.lat)*t,x=Math.abs(o.lng-c.lng)*t;return new Ke(new nt(o.lat-m,o.lng-x),new nt(c.lat+m,c.lng+x))},getCenter:function(){return new nt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new nt(this.getNorth(),this.getWest())},getSouthEast:function(){return new nt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof nt||"lat"in t?t=Xe(t):t=Je(t);var o=this._southWest,c=this._northEast,m,x;return t instanceof Ke?(m=t.getSouthWest(),x=t.getNorthEast()):m=x=t,m.lat>=o.lat&&x.lat<=c.lat&&m.lng>=o.lng&&x.lng<=c.lng},intersects:function(t){t=Je(t);var o=this._southWest,c=this._northEast,m=t.getSouthWest(),x=t.getNorthEast(),B=x.lat>=o.lat&&m.lat<=c.lat,W=x.lng>=o.lng&&m.lng<=c.lng;return B&&W},overlaps:function(t){t=Je(t);var o=this._southWest,c=this._northEast,m=t.getSouthWest(),x=t.getNorthEast(),B=x.lat>o.lat&&m.lat<c.lat,W=x.lng>o.lng&&m.lng<c.lng;return B&&W},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,o){return t?(t=Je(t),this._southWest.equals(t.getSouthWest(),o)&&this._northEast.equals(t.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Je(t,o){return t instanceof Ke?t:new Ke(t,o)}function nt(t,o,c){if(isNaN(t)||isNaN(o))throw new Error("Invalid LatLng object: ("+t+", "+o+")");this.lat=+t,this.lng=+o,c!==void 0&&(this.alt=+c)}nt.prototype={equals:function(t,o){if(!t)return!1;t=Xe(t);var c=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return c<=(o===void 0?1e-9:o)},toString:function(t){return"LatLng("+j(this.lat,t)+", "+j(this.lng,t)+")"},distanceTo:function(t){return Ze.distance(this,Xe(t))},wrap:function(){return Ze.wrapLatLng(this)},toBounds:function(t){var o=180*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return Je([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new nt(this.lat,this.lng,this.alt)}};function Xe(t,o,c){return t instanceof nt?t:V(t)&&typeof t[0]!="object"?t.length===3?new nt(t[0],t[1],t[2]):t.length===2?new nt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new nt(t.lat,"lng"in t?t.lng:t.lon,t.alt):o===void 0?null:new nt(t,o,c)}var Le={latLngToPoint:function(t,o){var c=this.projection.project(t),m=this.scale(o);return this.transformation._transform(c,m)},pointToLatLng:function(t,o){var c=this.scale(o),m=this.transformation.untransform(t,c);return this.projection.unproject(m)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(t),m=this.transformation.transform(o.min,c),x=this.transformation.transform(o.max,c);return new He(m,x)},infinite:!1,wrapLatLng:function(t){var o=this.wrapLng?M(t.lng,this.wrapLng,!0):t.lng,c=this.wrapLat?M(t.lat,this.wrapLat,!0):t.lat,m=t.alt;return new nt(c,o,m)},wrapLatLngBounds:function(t){var o=t.getCenter(),c=this.wrapLatLng(o),m=o.lat-c.lat,x=o.lng-c.lng;if(m===0&&x===0)return t;var B=t.getSouthWest(),W=t.getNorthEast(),fe=new nt(B.lat-m,B.lng-x),Me=new nt(W.lat-m,W.lng-x);return new Ke(fe,Me)}},Ze=h({},Le,{wrapLng:[-180,180],R:6371e3,distance:function(t,o){var c=Math.PI/180,m=t.lat*c,x=o.lat*c,B=Math.sin((o.lat-t.lat)*c/2),W=Math.sin((o.lng-t.lng)*c/2),fe=B*B+Math.cos(m)*Math.cos(x)*W*W,Me=2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe));return this.R*Me}}),Ve=6378137,it={R:Ve,MAX_LATITUDE:85.0511287798,project:function(t){var o=Math.PI/180,c=this.MAX_LATITUDE,m=Math.max(Math.min(c,t.lat),-c),x=Math.sin(m*o);return new H(this.R*t.lng*o,this.R*Math.log((1+x)/(1-x))/2)},unproject:function(t){var o=180/Math.PI;return new nt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*o,t.x*o/this.R)},bounds:function(){var t=Ve*Math.PI;return new He([-t,-t],[t,t])}()};function Et(t,o,c,m){if(V(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=o,this._c=c,this._d=m}Et.prototype={transform:function(t,o){return this._transform(t.clone(),o)},_transform:function(t,o){return o=o||1,t.x=o*(this._a*t.x+this._b),t.y=o*(this._c*t.y+this._d),t},untransform:function(t,o){return o=o||1,new H((t.x/o-this._b)/this._a,(t.y/o-this._d)/this._c)}};function U(t,o,c,m){return new Et(t,o,c,m)}var K=h({},Ze,{code:"EPSG:3857",projection:it,transformation:function(){var t=.5/(Math.PI*it.R);return U(t,.5,-t,.5)}()}),ce=h({},K,{code:"EPSG:900913"});function Re(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function de(t,o){var c="",m,x,B,W,fe,Me;for(m=0,B=t.length;m<B;m++){for(fe=t[m],x=0,W=fe.length;x<W;x++)Me=fe[x],c+=(x?"L":"M")+Me.x+" "+Me.y;c+=o?ut.svg?"z":"x":""}return c||"M0 0"}var z=document.documentElement.style,De="ActiveXObject"in window,Ie=De&&!document.addEventListener,je="msLaunchUri"in navigator&&!("documentMode"in document),he=Wn("webkit"),We=Wn("android"),ze=Wn("android 2")||Wn("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ct=We&&Wn("Google")&&ot<537&&!("AudioNode"in window),_t=!!window.opera,Tt=!je&&Wn("chrome"),Pt=Wn("gecko")&&!he&&!_t&&!De,Kt=!Tt&&Wn("safari"),Xt=Wn("phantom"),An="OTransition"in z,cn=navigator.platform.indexOf("Win")===0,Ci=De&&"transition"in z,zi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ze,tn="MozPerspective"in z,Tn=!window.L_DISABLE_3D&&(Ci||zi||tn)&&!An&&!Xt,ii=typeof orientation<"u"||Wn("mobile"),Vl=ii&&he,Hl=ii&&zi,Ks=!window.PointerEvent&&window.MSPointerEvent,sa=!!(window.PointerEvent||Ks),oa="ontouchstart"in window||!!window.TouchEvent,Zl=!window.L_NO_TOUCH&&(oa||sa),ql=ii&&_t,aa=ii&&Pt,la=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kl=function(){var t=!1;try{var o=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",P,o),window.removeEventListener("testPassiveEventSupport",P,o)}catch{}return t}(),Wl=function(){return!!document.createElement("canvas").getContext}(),Ws=!!(document.createElementNS&&Re("svg").createSVGRect),ua=!!Ws&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jl=!Ws&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var o=t.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Xl=navigator.platform.indexOf("Mac")===0,Yl=navigator.platform.indexOf("Linux")===0;function Wn(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ut={ie:De,ielt9:Ie,edge:je,webkit:he,android:We,android23:ze,androidStock:ct,opera:_t,chrome:Tt,gecko:Pt,safari:Kt,phantom:Xt,opera12:An,win:cn,ie3d:Ci,webkit3d:zi,gecko3d:tn,any3d:Tn,mobile:ii,mobileWebkit:Vl,mobileWebkit3d:Hl,msPointer:Ks,pointer:sa,touch:Zl,touchNative:oa,mobileOpera:ql,mobileGecko:aa,retina:la,passiveEvents:Kl,canvas:Wl,svg:Ws,vml:Jl,inlineSvg:ua,mac:Xl,linux:Yl},ca=ut.msPointer?"MSPointerDown":"pointerdown",ha=ut.msPointer?"MSPointerMove":"pointermove",Js=ut.msPointer?"MSPointerUp":"pointerup",da=ut.msPointer?"MSPointerCancel":"pointercancel",Xs={touchstart:ca,touchmove:ha,touchend:Js,touchcancel:da},fa={touchstart:iu,touchmove:is,touchend:is,touchcancel:is},ar={},pa=!1;function Ql(t,o,c){return o==="touchstart"&&Ys(),fa[o]?(c=fa[o].bind(this,c),t.addEventListener(Xs[o],c,!1),c):(console.warn("wrong event specified:",o),P)}function eu(t,o,c){if(!Xs[o]){console.warn("wrong event specified:",o);return}t.removeEventListener(Xs[o],c,!1)}function tu(t){ar[t.pointerId]=t}function nu(t){ar[t.pointerId]&&(ar[t.pointerId]=t)}function ns(t){delete ar[t.pointerId]}function Ys(){pa||(document.addEventListener(ca,tu,!0),document.addEventListener(ha,nu,!0),document.addEventListener(Js,ns,!0),document.addEventListener(da,ns,!0),pa=!0)}function is(t,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in ar)o.touches.push(ar[c]);o.changedTouches=[o],t(o)}}function iu(t,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&hn(o),is(t,o)}function ru(t){var o={},c,m;for(m in t)c=t[m],o[m]=c&&c.bind?c.bind(t):c;return t=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var su=200;function ou(t,o){t.addEventListener("dblclick",o);var c=0,m;function x(B){if(B.detail!==1){m=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var W=va(B);if(!(W.some(function(Me){return Me instanceof HTMLLabelElement&&Me.attributes.for})&&!W.some(function(Me){return Me instanceof HTMLInputElement||Me instanceof HTMLSelectElement}))){var fe=Date.now();fe-c<=su?(m++,m===2&&o(ru(B))):m=1,c=fe}}}return t.addEventListener("click",x),{dblclick:o,simDblclick:x}}function au(t,o){t.removeEventListener("dblclick",o.dblclick),t.removeEventListener("click",o.simDblclick)}var Qs=ss(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pr=ss(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ma=Pr==="webkitTransition"||Pr==="OTransition"?Pr+"End":"transitionend";function ga(t){return typeof t=="string"?document.getElementById(t):t}function ki(t,o){var c=t.style[o]||t.currentStyle&&t.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(t,null);c=m?m[o]:null}return c==="auto"?null:c}function Dt(t,o,c){var m=document.createElement(t);return m.className=o||"",c&&c.appendChild(m),m}function Vt(t){var o=t.parentNode;o&&o.removeChild(t)}function Sr(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function lr(t){var o=t.parentNode;o&&o.lastChild!==t&&o.appendChild(t)}function $i(t){var o=t.parentNode;o&&o.firstChild!==t&&o.insertBefore(t,o.firstChild)}function eo(t,o){if(t.classList!==void 0)return t.classList.contains(o);var c=rs(t);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function bt(t,o){if(t.classList!==void 0)for(var c=R(o),m=0,x=c.length;m<x;m++)t.classList.add(c[m]);else if(!eo(t,o)){var B=rs(t);to(t,(B?B+" ":"")+o)}}function Yt(t,o){t.classList!==void 0?t.classList.remove(o):to(t,J((" "+rs(t)+" ").replace(" "+o+" "," ")))}function to(t,o){t.className.baseVal===void 0?t.className=o:t.className.baseVal=o}function rs(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Un(t,o){"opacity"in t.style?t.style.opacity=o:"filter"in t.style&&lu(t,o)}function lu(t,o){var c=!1,m="DXImageTransform.Microsoft.Alpha";try{c=t.filters.item(m)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):t.style.filter+=" progid:"+m+"(opacity="+o+")"}function ss(t){for(var o=document.documentElement.style,c=0;c<t.length;c++)if(t[c]in o)return t[c];return!1}function ji(t,o,c){var m=o||new H(0,0);t.style[Qs]=(ut.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(c?" scale("+c+")":"")}function nn(t,o){t._leaflet_pos=o,ut.any3d?ji(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}function Ui(t){return t._leaflet_pos||new H(0,0)}var Br,Ar,no;if("onselectstart"in document)Br=function(){vt(window,"selectstart",hn)},Ar=function(){$t(window,"selectstart",hn)};else{var ur=ss(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Br=function(){if(ur){var t=document.documentElement.style;no=t[ur],t[ur]="none"}},Ar=function(){ur&&(document.documentElement.style[ur]=no,no=void 0)}}function io(){vt(window,"dragstart",hn)}function ro(){$t(window,"dragstart",hn)}var os,so;function oo(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(as(),os=t,so=t.style.outlineStyle,t.style.outlineStyle="none",vt(window,"keydown",as))}function as(){os&&(os.style.outlineStyle=so,os=void 0,so=void 0,$t(window,"keydown",as))}function _a(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function ao(t){var o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}var uu={__proto__:null,TRANSFORM:Qs,TRANSITION:Pr,TRANSITION_END:ma,get:ga,getStyle:ki,create:Dt,remove:Vt,empty:Sr,toFront:lr,toBack:$i,hasClass:eo,addClass:bt,removeClass:Yt,setClass:to,getClass:rs,setOpacity:Un,testProp:ss,setTransform:ji,setPosition:nn,getPosition:Ui,get disableTextSelection(){return Br},get enableTextSelection(){return Ar},disableImageDrag:io,enableImageDrag:ro,preventOutline:oo,restoreOutline:as,getSizedParentNode:_a,getScale:ao};function vt(t,o,c,m){if(o&&typeof o=="object")for(var x in o)uo(t,x,o[x],c);else{o=R(o);for(var B=0,W=o.length;B<W;B++)uo(t,o[B],c,m)}return this}var ri="_leaflet_events";function $t(t,o,c,m){if(arguments.length===1)ya(t),delete t[ri];else if(o&&typeof o=="object")for(var x in o)Ei(t,x,o[x],c);else if(o=R(o),arguments.length===2)ya(t,function(fe){return le(o,fe)!==-1});else for(var B=0,W=o.length;B<W;B++)Ei(t,o[B],c,m);return this}function ya(t,o){for(var c in t[ri]){var m=c.split(/\d/)[0];(!o||o(m))&&Ei(t,m,null,null,c)}}var lo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function uo(t,o,c,m){var x=o+v(c)+(m?"_"+v(m):"");if(t[ri]&&t[ri][x])return this;var B=function(fe){return c.call(m||t,fe||window.event)},W=B;!ut.touchNative&&ut.pointer&&o.indexOf("touch")===0?B=Ql(t,o,B):ut.touch&&o==="dblclick"?B=ou(t,B):"addEventListener"in t?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?t.addEventListener(lo[o]||o,B,ut.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(B=function(fe){fe=fe||window.event,ho(t,fe)&&W(fe)},t.addEventListener(lo[o],B,!1)):t.addEventListener(o,W,!1):t.attachEvent("on"+o,B),t[ri]=t[ri]||{},t[ri][x]=B}function Ei(t,o,c,m,x){x=x||o+v(c)+(m?"_"+v(m):"");var B=t[ri]&&t[ri][x];if(!B)return this;!ut.touchNative&&ut.pointer&&o.indexOf("touch")===0?eu(t,o,B):ut.touch&&o==="dblclick"?au(t,B):"removeEventListener"in t?t.removeEventListener(lo[o]||o,B,!1):t.detachEvent("on"+o,B),t[ri][x]=null}function Gi(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function co(t){return uo(t,"wheel",Gi),this}function Tr(t){return vt(t,"mousedown touchstart dblclick contextmenu",Gi),t._leaflet_disable_click=!0,this}function hn(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Vi(t){return hn(t),Gi(t),this}function va(t){if(t.composedPath)return t.composedPath();for(var o=[],c=t.target;c;)o.push(c),c=c.parentNode;return o}function ba(t,o){if(!o)return new H(t.clientX,t.clientY);var c=ao(o),m=c.boundingClientRect;return new H((t.clientX-m.left)/c.x-o.clientLeft,(t.clientY-m.top)/c.y-o.clientTop)}var cu=ut.linux&&ut.chrome?window.devicePixelRatio:ut.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xa(t){return ut.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/cu:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function ho(t,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==t;)c=c.parentNode}catch{return!1}return c!==t}var ls={__proto__:null,on:vt,off:$t,stopPropagation:Gi,disableScrollPropagation:co,disableClickPropagation:Tr,preventDefault:hn,stop:Vi,getPropagationPath:va,getMousePosition:ba,getWheelDelta:xa,isExternalTarget:ho,addListener:vt,removeListener:$t},wa=ve.extend({run:function(t,o,c,m){this.stop(),this._el=t,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Ui(t),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ne(this._animate,this),this._step()},_step:function(t){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),t):(this._runFrame(1),this._complete())},_runFrame:function(t,o){var c=this._startPos.add(this._offset.multiplyBy(t));o&&c._round(),nn(this._el,c),this.fire("step")},_complete:function(){Be(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),St=ve.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,o){o=Z(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(Xe(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pr&&ut.any3d&&!ut.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),vt(this._proxy,ma,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),t=this._limitCenter(Xe(t),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=h({animate:c.animate},c.zoom),c.pan=h({animate:c.animate,duration:c.duration},c.pan));var m=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,o,c.zoom):this._tryAnimatedPan(t,c.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(t,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(t,o){return this._loaded?this.setView(this.getCenter(),t,{zoom:o}):(this._zoom=t,this)},zoomIn:function(t,o){return t=t||(ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,o)},zoomOut:function(t,o){return t=t||(ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,o)},setZoomAround:function(t,o,c){var m=this.getZoomScale(o),x=this.getSize().divideBy(2),B=t instanceof H?t:this.latLngToContainerPoint(t),W=B.subtract(x).multiplyBy(1-1/m),fe=this.containerPointToLatLng(x.add(W));return this.setView(fe,o,{zoom:c})},_getBoundsCenterZoom:function(t,o){o=o||{},t=t.getBounds?t.getBounds():Je(t);var c=se(o.paddingTopLeft||o.padding||[0,0]),m=se(o.paddingBottomRight||o.padding||[0,0]),x=this.getBoundsZoom(t,!1,c.add(m));if(x=typeof o.maxZoom=="number"?Math.min(o.maxZoom,x):x,x===1/0)return{center:t.getCenter(),zoom:x};var B=m.subtract(c).divideBy(2),W=this.project(t.getSouthWest(),x),fe=this.project(t.getNorthEast(),x),Me=this.unproject(W.add(fe).divideBy(2).add(B),x);return{center:Me,zoom:x}},fitBounds:function(t,o){if(t=Je(t),!t.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(t,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,o){return this.setView(t,this._zoom,{pan:o})},panBy:function(t,o){if(t=se(t).round(),o=o||{},!t.x&&!t.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new wa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){bt(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,o,c){if(c=c||{},c.animate===!1||!ut.any3d)return this.setView(t,o,c);this._stop();var m=this.project(this.getCenter()),x=this.project(t),B=this.getSize(),W=this._zoom;t=Xe(t),o=o===void 0?W:o;var fe=Math.max(B.x,B.y),Me=fe*this.getZoomScale(W,o),$e=x.distanceTo(m)||1,et=1.42,ft=et*et;function Mt(Qt){var jr=Qt?-1:1,Tu=Qt?Me:fe,ci=Me*Me-fe*fe+jr*ft*ft*$e*$e,Du=2*Tu*ft*$e,gr=ci/Du,ko=Math.sqrt(gr*gr+1)-gr,Ru=ko<1e-9?-18:Math.log(ko);return Ru}function vn(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function ln(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}function kn(Qt){return vn(Qt)/ln(Qt)}var Wt=Mt(0);function ui(Qt){return fe*(ln(Wt)/ln(Wt+et*Qt))}function Co(Qt){return fe*(ln(Wt)*kn(Wt+et*Qt)-vn(Wt))/ft}function Ps(Qt){return 1-Math.pow(1-Qt,1.5)}var Fa=Date.now(),$r=(Mt(1)-Wt)/et,Au=c.duration?1e3*c.duration:1e3*$r*.8;function Na(){var Qt=(Date.now()-Fa)/Au,jr=Ps(Qt)*$r;Qt<=1?(this._flyToFrame=ne(Na,this),this._move(this.unproject(m.add(x.subtract(m).multiplyBy(Co(jr)/$e)),W),this.getScaleZoom(fe/ui(jr),W),{flyTo:!0})):this._move(t,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Na.call(this),this},flyToBounds:function(t,o){var c=this._getBoundsCenterZoom(t,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(t){return t=Je(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var o=this.options.minZoom;return this.options.minZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var o=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&o!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,o){this._enforcingBounds=!0;var c=this.getCenter(),m=this._limitCenter(c,this._zoom,Je(t));return c.equals(m)||this.panTo(m,o),this._enforcingBounds=!1,this},panInside:function(t,o){o=o||{};var c=se(o.paddingTopLeft||o.padding||[0,0]),m=se(o.paddingBottomRight||o.padding||[0,0]),x=this.project(this.getCenter()),B=this.project(t),W=this.getPixelBounds(),fe=Ye([W.min.add(c),W.max.subtract(m)]),Me=fe.getSize();if(!fe.contains(B)){this._enforcingBounds=!0;var $e=B.subtract(fe.getCenter()),et=fe.extend(B).getSize().subtract(Me);x.x+=$e.x<0?-et.x:et.x,x.y+=$e.y<0?-et.y:et.y,this.panTo(this.unproject(x),o),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},t===!0?{animate:!0}:t);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),m=o.divideBy(2).round(),x=c.divideBy(2).round(),B=m.subtract(x);return!B.x&&!B.y?this:(t.animate&&t.pan?this.panBy(B):(t.pan&&this._rawPanBy(B),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=f(this._handleGeolocationResponse,this),c=f(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,t):navigator.geolocation.getCurrentPosition(o,c,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var o=t.code,c=t.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var o=t.coords.latitude,c=t.coords.longitude,m=new nt(o,c),x=m.toBounds(t.coords.accuracy*2),B=this._locateOptions;if(B.setView){var W=this.getBoundsZoom(x);this.setView(m,B.maxZoom?Math.min(W,B.maxZoom):W)}var fe={latlng:m,bounds:x,timestamp:t.timestamp};for(var Me in t.coords)typeof t.coords[Me]=="number"&&(fe[Me]=t.coords[Me]);this.fire("locationfound",fe)}},addHandler:function(t,o){if(!o)return this;var c=this[t]=new o(this);return this._handlers.push(c),this.options[t]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Vt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Be(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Vt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,o){var c="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),m=Dt("div",c,o||this._mapPane);return t&&(this._panes[t]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),o=this.unproject(t.getBottomLeft()),c=this.unproject(t.getTopRight());return new Ke(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,o,c){t=Je(t),c=se(c||[0,0]);var m=this.getZoom()||0,x=this.getMinZoom(),B=this.getMaxZoom(),W=t.getNorthWest(),fe=t.getSouthEast(),Me=this.getSize().subtract(c),$e=Ye(this.project(fe,m),this.project(W,m)).getSize(),et=ut.any3d?this.options.zoomSnap:1,ft=Me.x/$e.x,Mt=Me.y/$e.y,vn=o?Math.max(ft,Mt):Math.min(ft,Mt);return m=this.getScaleZoom(vn,m),et&&(m=Math.round(m/(et/100))*(et/100),m=o?Math.ceil(m/et)*et:Math.floor(m/et)*et),Math.max(x,Math.min(B,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,o){var c=this._getTopLeftPoint(t,o);return new He(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(t)/c.scale(o)},getScaleZoom:function(t,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var m=c.zoom(t*c.scale(o));return isNaN(m)?1/0:m},project:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(Xe(t),o)},unproject:function(t,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(se(t),o)},layerPointToLatLng:function(t){var o=se(t).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(t){var o=this.project(Xe(t))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Xe(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Je(t))},distance:function(t,o){return this.options.crs.distance(Xe(t),Xe(o))},containerPointToLayerPoint:function(t){return se(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return se(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var o=this.containerPointToLayerPoint(se(t));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Xe(t)))},mouseEventToContainerPoint:function(t){return ba(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var o=this._container=ga(t);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");vt(o,"scroll",this._onScroll,this),this._containerId=v(o)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ut.any3d,bt(t,"leaflet-container"+(ut.touch?" leaflet-touch":"")+(ut.retina?" leaflet-retina":"")+(ut.ielt9?" leaflet-oldie":"")+(ut.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=ki(t,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),nn(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(bt(t.markerPane,"leaflet-zoom-hide"),bt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,o,c){nn(this._mapPane,new H(0,0));var m=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var x=this._zoom!==o;this._moveStart(x,c)._move(t,o)._moveEnd(x),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(t,o){return t&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(t,o,c,m){o===void 0&&(o=this._zoom);var x=this._zoom!==o;return this._zoom=o,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),m?c&&c.pinch&&this.fire("zoom",c):((x||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Be(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){nn(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[v(this._container)]=this;var o=t?$t:vt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ut.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Be(this._resizeRequest),this._resizeRequest=ne(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,o){for(var c=[],m,x=o==="mouseout"||o==="mouseover",B=t.target||t.srcElement,W=!1;B;){if(m=this._targets[v(B)],m&&(o==="click"||o==="preclick")&&this._draggableMoved(m)){W=!0;break}if(m&&m.listens(o,!0)&&(x&&!ho(B,t)||(c.push(m),x))||B===this._container)break;B=B.parentNode}return!c.length&&!W&&!x&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var o=t.target||t.srcElement;if(!(!this._loaded||o._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(o))){var c=t.type;c==="mousedown"&&oo(o),this._fireDOMEvent(t,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,o,c){if(t.type==="click"){var m=h({},t);m.type="preclick",this._fireDOMEvent(m,m.type,c)}var x=this._findEventTargets(t,o);if(c){for(var B=[],W=0;W<c.length;W++)c[W].listens(o,!0)&&B.push(c[W]);x=B.concat(x)}if(x.length){o==="contextmenu"&&hn(t);var fe=x[0],Me={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var $e=fe.getLatLng&&(!fe._radius||fe._radius<=10);Me.containerPoint=$e?this.latLngToContainerPoint(fe.getLatLng()):this.mouseEventToContainerPoint(t),Me.layerPoint=this.containerPointToLayerPoint(Me.containerPoint),Me.latlng=$e?fe.getLatLng():this.layerPointToLatLng(Me.layerPoint)}for(W=0;W<x.length;W++)if(x[W].fire(o,Me,!0),Me.originalEvent._stopped||x[W].options.bubblingMouseEvents===!1&&le(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,o=this._handlers.length;t<o;t++)this._handlers[t].disable()},whenReady:function(t,o){return this._loaded?t.call(o||this,{target:this}):this.on("load",t,o),this},_getMapPanePos:function(){return Ui(this._mapPane)||new H(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,o){var c=t&&o!==void 0?this._getNewPixelOrigin(t,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,o){var c=this.getSize()._divideBy(2);return this.project(t,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,o,c){var m=this._getNewPixelOrigin(c,o);return this.project(t,o)._subtract(m)},_latLngBoundsToNewLayerBounds:function(t,o,c){var m=this._getNewPixelOrigin(c,o);return Ye([this.project(t.getSouthWest(),o)._subtract(m),this.project(t.getNorthWest(),o)._subtract(m),this.project(t.getSouthEast(),o)._subtract(m),this.project(t.getNorthEast(),o)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,o,c){if(!c)return t;var m=this.project(t,o),x=this.getSize().divideBy(2),B=new He(m.subtract(x),m.add(x)),W=this._getBoundsOffset(B,c,o);return Math.abs(W.x)<=1&&Math.abs(W.y)<=1?t:this.unproject(m.add(W),o)},_limitOffset:function(t,o){if(!o)return t;var c=this.getPixelBounds(),m=new He(c.min.add(t),c.max.add(t));return t.add(this._getBoundsOffset(m,o))},_getBoundsOffset:function(t,o,c){var m=Ye(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),x=m.min.subtract(t.min),B=m.max.subtract(t.max),W=this._rebound(x.x,-B.x),fe=this._rebound(x.y,-B.y);return new H(W,fe)},_rebound:function(t,o){return t+o>0?Math.round(t-o)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(o))},_limitZoom:function(t){var o=this.getMinZoom(),c=this.getMaxZoom(),m=ut.any3d?this.options.zoomSnap:1;return m&&(t=Math.round(t/m)*m),Math.max(o,Math.min(c,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,o){var c=this._getCenterOffset(t)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var t=this._proxy=Dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(o){var c=Qs,m=this._proxy.style[c];ji(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),m===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Vt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),o=this.getZoom();ji(this._proxy,this.project(t,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(o),x=this._getCenterOffset(t)._divideBy(1-1/m);return c.animate!==!0&&!this.getSize().contains(x)?!1:(ne(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(t,o,!0)},this),!0)},_animateZoom:function(t,o,c,m){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=o,bt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:o,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function La(t,o){return new St(t,o)}var yt=re.extend({options:{position:"topright"},initialize:function(t){Z(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var o=this._map;return o&&o.removeControl(this),this.options.position=t,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var o=this._container=this.onAdd(t),c=this.getPosition(),m=t._controlCorners[c];return bt(o,"leaflet-control"),c.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Vt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Hi=function(t){return new yt(t)};St.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},o="leaflet-",c=this._controlContainer=Dt("div",o+"control-container",this._container);function m(x,B){var W=o+x+" "+o+B;t[x+B]=Dt("div",W,c)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Vt(this._controlCorners[t]);Vt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Dr=yt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,o,c,m){return c<m?-1:m<c?1:0}},initialize:function(t,o,c){Z(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in t)this._addLayer(t[m],m);for(m in o)this._addLayer(o[m],m,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return yt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,o){return this._addLayer(t,o),this._map?this._update():this},addOverlay:function(t,o){return this._addLayer(t,o,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var o=this._getLayer(v(t));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){bt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(bt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",o=this._container=Dt("div",t),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Tr(o),co(o);var m=this._section=Dt("section",t+"-list");c&&(this._map.on("click",this.collapse,this),vt(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var x=this._layersLink=Dt("a",t+"-toggle",o);x.href="#",x.title="Layers",x.setAttribute("role","button"),vt(x,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){hn(B),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Dt("div",t+"-base",m),this._separator=Dt("div",t+"-separator",m),this._overlaysList=Dt("div",t+"-overlays",m),o.appendChild(m)},_getLayer:function(t){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&v(this._layers[o].layer)===t)return this._layers[o]},_addLayer:function(t,o,c){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(f(function(m,x){return this.options.sortFunction(m.layer,x.layer,m.name,x.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Sr(this._baseLayersList),Sr(this._overlaysList),this._layerControlInputs=[];var t,o,c,m,x=0;for(c=0;c<this._layers.length;c++)m=this._layers[c],this._addItem(m),o=o||m.overlay,t=t||!m.overlay,x+=m.overlay?0:1;return this.options.hideSingleBase&&(t=t&&x>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=o&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var o=this._getLayer(v(t.target)),c=o.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(t,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(o?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=c,m.firstChild},_addItem:function(t){var o=document.createElement("label"),c=this._map.hasLayer(t.layer),m;t.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=c):m=this._createRadioElement("leaflet-base-layers_"+v(this),c),this._layerControlInputs.push(m),m.layerId=v(t.layer),vt(m,"click",this._onInputClick,this);var x=document.createElement("span");x.innerHTML=" "+t.name;var B=document.createElement("span");o.appendChild(B),B.appendChild(m),B.appendChild(x);var W=t.overlay?this._overlaysList:this._baseLayersList;return W.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,o,c,m=[],x=[];this._handlingClick=!0;for(var B=t.length-1;B>=0;B--)o=t[B],c=this._getLayer(o.layerId).layer,o.checked?m.push(c):o.checked||x.push(c);for(B=0;B<x.length;B++)this._map.hasLayer(x[B])&&this._map.removeLayer(x[B]);for(B=0;B<m.length;B++)this._map.hasLayer(m[B])||this._map.addLayer(m[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,o,c,m=this._map.getZoom(),x=t.length-1;x>=0;x--)o=t[x],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&m<c.options.minZoom||c.options.maxZoom!==void 0&&m>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,vt(t,"click",hn),this.expand();var o=this;setTimeout(function(){$t(t,"click",hn),o._preventClick=!1})}}),hu=function(t,o,c){return new Dr(t,o,c)},us=yt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var o="leaflet-control-zoom",c=Dt("div",o+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,o,c,m,x){var B=Dt("a",c,m);return B.innerHTML=t,B.href="#",B.title=o,B.setAttribute("role","button"),B.setAttribute("aria-label",o),Tr(B),vt(B,"click",Vi),vt(B,"click",x,this),vt(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var t=this._map,o="leaflet-disabled";Yt(this._zoomInButton,o),Yt(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(bt(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(bt(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});St.mergeOptions({zoomControl:!0}),St.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new us,this.addControl(this.zoomControl))});var du=function(t){return new us(t)},cs=yt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var o="leaflet-control-scale",c=Dt("div",o),m=this.options;return this._addScales(m,o+"-line",c),t.on(m.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),c},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,o,c){t.metric&&(this._mScale=Dt("div",o,c)),t.imperial&&(this._iScale=Dt("div",o,c))},_update:function(){var t=this._map,o=t.getSize().y/2,c=t.distance(t.containerPointToLatLng([0,o]),t.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var o=this._getRoundNum(t),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/t)},_updateImperial:function(t){var o=t*3.2808399,c,m,x;o>5280?(c=o/5280,m=this._getRoundNum(c),this._updateScale(this._iScale,m+" mi",m/c)):(x=this._getRoundNum(o),this._updateScale(this._iScale,x+" ft",x/o))},_updateScale:function(t,o,c){t.style.width=Math.round(this.options.maxWidth*c)+"px",t.innerHTML=o},_getRoundNum:function(t){var o=Math.pow(10,(Math.floor(t)+"").length-1),c=t/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),hs=function(t){return new cs(t)},fu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',si=yt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ut.inlineSvg?fu+" ":"")+"Leaflet</a>"},initialize:function(t){Z(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Dt("div","leaflet-control-attribution"),Tr(this._container);for(var o in t._layers)t._layers[o].getAttribution&&this.addAttribution(t._layers[o].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var o in this._attributions)this._attributions[o]&&t.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),t.length&&c.push(t.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});St.mergeOptions({attributionControl:!0}),St.addInitHook(function(){this.options.attributionControl&&new si().addTo(this)});var Ca=function(t){return new si(t)};yt.Layers=Dr,yt.Zoom=us,yt.Scale=cs,yt.Attribution=si,Hi.layers=hu,Hi.zoom=du,Hi.scale=hs,Hi.attribution=Ca;var gn=re.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(t,o){return t.addHandler(o,this),this};var pu={Events:Ae},ka=ut.touch?"touchstart mousedown":"mousedown",Mi=ve.extend({options:{clickTolerance:3},initialize:function(t,o,c,m){Z(this,m),this._element=t,this._dragStartTarget=o||t,this._preventOutline=c},enable:function(){this._enabled||(vt(this._dragStartTarget,ka,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mi._dragging===this&&this.finishDrag(!0),$t(this._dragStartTarget,ka,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!eo(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Mi._dragging===this&&this.finishDrag();return}if(!(Mi._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Mi._dragging=this,this._preventOutline&&oo(this._element),io(),Br(),!this._moving)){this.fire("down");var o=t.touches?t.touches[0]:t,c=_a(this._element);this._startPoint=new H(o.clientX,o.clientY),this._startPos=Ui(this._element),this._parentScale=ao(c);var m=t.type==="mousedown";vt(document,m?"mousemove":"touchmove",this._onMove,this),vt(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var o=t.touches&&t.touches.length===1?t.touches[0]:t,c=new H(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,hn(t),this._moved||(this.fire("dragstart"),this._moved=!0,bt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),bt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),nn(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Yt(document.body,"leaflet-dragging"),this._lastTarget&&(Yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$t(document,"mousemove touchmove",this._onMove,this),$t(document,"mouseup touchend touchcancel",this._onUp,this),ro(),Ar();var o=this._moved&&this._moving;this._moving=!1,Mi._dragging=!1,o&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Ea(t,o,c){var m,x=[1,4,2,8],B,W,fe,Me,$e,et,ft,Mt;for(B=0,et=t.length;B<et;B++)t[B]._code=wn(t[B],o);for(fe=0;fe<4;fe++){for(ft=x[fe],m=[],B=0,et=t.length,W=et-1;B<et;W=B++)Me=t[B],$e=t[W],Me._code&ft?$e._code&ft||(Mt=Pi($e,Me,ft,o,c),Mt._code=wn(Mt,o),m.push(Mt)):($e._code&ft&&(Mt=Pi($e,Me,ft,o,c),Mt._code=wn(Mt,o),m.push(Mt)),m.push(Me));t=m}return t}function Ma(t,o){var c,m,x,B,W,fe,Me,$e,et;if(!t||t.length===0)throw new Error("latlngs not passed");Ln(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ft=Xe([0,0]),Mt=Je(t),vn=Mt.getNorthWest().distanceTo(Mt.getSouthWest())*Mt.getNorthEast().distanceTo(Mt.getNorthWest());vn<1700&&(ft=fo(t));var ln=t.length,kn=[];for(c=0;c<ln;c++){var Wt=Xe(t[c]);kn.push(o.project(Xe([Wt.lat-ft.lat,Wt.lng-ft.lng])))}for(fe=Me=$e=0,c=0,m=ln-1;c<ln;m=c++)x=kn[c],B=kn[m],W=x.y*B.x-B.y*x.x,Me+=(x.x+B.x)*W,$e+=(x.y+B.y)*W,fe+=W*3;fe===0?et=kn[0]:et=[Me/fe,$e/fe];var ui=o.unproject(se(et));return Xe([ui.lat+ft.lat,ui.lng+ft.lng])}function fo(t){for(var o=0,c=0,m=0,x=0;x<t.length;x++){var B=Xe(t[x]);o+=B.lat,c+=B.lng,m++}return Xe([o/m,c/m])}var mu={__proto__:null,clipPolygon:Ea,polygonCenter:Ma,centroid:fo};function Pa(t,o){if(!o||!t.length)return t.slice();var c=o*o;return t=Sa(t,c),t=dn(t,c),t}function po(t,o,c){return Math.sqrt(Rr(t,o,c,!0))}function gu(t,o,c){return Rr(t,o,c)}function dn(t,o){var c=t.length,m=typeof Uint8Array<"u"?Uint8Array:Array,x=new m(c);x[0]=x[c-1]=1,fn(t,x,o,0,c-1);var B,W=[];for(B=0;B<c;B++)x[B]&&W.push(t[B]);return W}function fn(t,o,c,m,x){var B=0,W,fe,Me;for(fe=m+1;fe<=x-1;fe++)Me=Rr(t[fe],t[m],t[x],!0),Me>B&&(W=fe,B=Me);B>c&&(o[W]=1,fn(t,o,c,m,W),fn(t,o,c,W,x))}function Sa(t,o){for(var c=[t[0]],m=1,x=0,B=t.length;m<B;m++)_u(t[m],t[x])>o&&(c.push(t[m]),x=m);return x<B-1&&c.push(t[B-1]),c}var Zi;function qi(t,o,c,m,x){var B=m?Zi:wn(t,c),W=wn(o,c),fe,Me,$e;for(Zi=W;;){if(!(B|W))return[t,o];if(B&W)return!1;fe=B||W,Me=Pi(t,o,fe,c,x),$e=wn(Me,c),fe===B?(t=Me,B=$e):(o=Me,W=$e)}}function Pi(t,o,c,m,x){var B=o.x-t.x,W=o.y-t.y,fe=m.min,Me=m.max,$e,et;return c&8?($e=t.x+B*(Me.y-t.y)/W,et=Me.y):c&4?($e=t.x+B*(fe.y-t.y)/W,et=fe.y):c&2?($e=Me.x,et=t.y+W*(Me.x-t.x)/B):c&1&&($e=fe.x,et=t.y+W*(fe.x-t.x)/B),new H($e,et,x)}function wn(t,o){var c=0;return t.x<o.min.x?c|=1:t.x>o.max.x&&(c|=2),t.y<o.min.y?c|=4:t.y>o.max.y&&(c|=8),c}function _u(t,o){var c=o.x-t.x,m=o.y-t.y;return c*c+m*m}function Rr(t,o,c,m){var x=o.x,B=o.y,W=c.x-x,fe=c.y-B,Me=W*W+fe*fe,$e;return Me>0&&($e=((t.x-x)*W+(t.y-B)*fe)/Me,$e>1?(x=c.x,B=c.y):$e>0&&(x+=W*$e,B+=fe*$e)),W=t.x-x,fe=t.y-B,m?W*W+fe*fe:new H(x,B)}function Ln(t){return!V(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Gn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ln(t)}function mo(t,o){var c,m,x,B,W,fe,Me,$e;if(!t||t.length===0)throw new Error("latlngs not passed");Ln(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var et=Xe([0,0]),ft=Je(t),Mt=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Mt<1700&&(et=fo(t));var vn=t.length,ln=[];for(c=0;c<vn;c++){var kn=Xe(t[c]);ln.push(o.project(Xe([kn.lat-et.lat,kn.lng-et.lng])))}for(c=0,m=0;c<vn-1;c++)m+=ln[c].distanceTo(ln[c+1])/2;if(m===0)$e=ln[0];else for(c=0,B=0;c<vn-1;c++)if(W=ln[c],fe=ln[c+1],x=W.distanceTo(fe),B+=x,B>m){Me=(B-m)/x,$e=[fe.x-Me*(fe.x-W.x),fe.y-Me*(fe.y-W.y)];break}var Wt=o.unproject(se($e));return Xe([Wt.lat+et.lat,Wt.lng+et.lng])}var ds={__proto__:null,simplify:Pa,pointToSegmentDistance:po,closestPointOnSegment:gu,clipSegment:qi,_getEdgeIntersection:Pi,_getBitCode:wn,_sqClosestPointOnSegment:Rr,isFlat:Ln,_flat:Gn,polylineCenter:mo},go={project:function(t){return new H(t.lng,t.lat)},unproject:function(t){return new nt(t.y,t.x)},bounds:new He([-180,-90],[180,90])},Vn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new He([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var o=Math.PI/180,c=this.R,m=t.lat*o,x=this.R_MINOR/c,B=Math.sqrt(1-x*x),W=B*Math.sin(m),fe=Math.tan(Math.PI/4-m/2)/Math.pow((1-W)/(1+W),B/2);return m=-c*Math.log(Math.max(fe,1e-10)),new H(t.lng*o*c,m)},unproject:function(t){for(var o=180/Math.PI,c=this.R,m=this.R_MINOR/c,x=Math.sqrt(1-m*m),B=Math.exp(-t.y/c),W=Math.PI/2-2*Math.atan(B),fe=0,Me=.1,$e;fe<15&&Math.abs(Me)>1e-7;fe++)$e=x*Math.sin(W),$e=Math.pow((1-$e)/(1+$e),x/2),Me=Math.PI/2-2*Math.atan(B*$e)-W,W+=Me;return new nt(W*o,t.x*o/c)}},oi={__proto__:null,LonLat:go,Mercator:Vn,SphericalMercator:it},fs=h({},Ze,{code:"EPSG:3395",projection:Vn,transformation:function(){var t=.5/(Math.PI*Vn.R);return U(t,.5,-t,.5)}()}),_o=h({},Ze,{code:"EPSG:4326",projection:go,transformation:U(1/180,1,-1/180,.5)}),yo=h({},Le,{projection:go,transformation:U(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,o){var c=o.lng-t.lng,m=o.lat-t.lat;return Math.sqrt(c*c+m*m)},infinite:!0});Le.Earth=Ze,Le.EPSG3395=fs,Le.EPSG3857=K,Le.EPSG900913=ce,Le.EPSG4326=_o,Le.Simple=yo;var _n=ve.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[v(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[v(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var o=t.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});St.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var o=v(t);return this._layers[o]?this:(this._layers[o]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var o=v(t);return this._layers[o]?(this._loaded&&t.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return v(t)in this._layers},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},_addLayers:function(t){t=t?V(t)?t:[t]:[];for(var o=0,c=t.length;o<c;o++)this.addLayer(t[o])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[v(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var o=v(t);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,o=-1/0,c=this._getZoomSpan();for(var m in this._zoomBoundLayers){var x=this._zoomBoundLayers[m].options;t=x.minZoom===void 0?t:Math.min(t,x.minZoom),o=x.maxZoom===void 0?o:Math.max(o,x.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=t===1/0?void 0:t,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var cr=_n.extend({initialize:function(t,o){Z(this,o),this._layers={};var c,m;if(t)for(c=0,m=t.length;c<m;c++)this.addLayer(t[c])},addLayer:function(t){var o=this.getLayerId(t);return this._layers[o]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var o=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(t){var o=typeof t=="number"?t:this.getLayerId(t);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var o=Array.prototype.slice.call(arguments,1),c,m;for(c in this._layers)m=this._layers[c],m[t]&&m[t].apply(m,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,o){for(var c in this._layers)t.call(o,this._layers[c]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return v(t)}}),yu=function(t,o){return new cr(t,o)},Jn=cr.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),cr.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),cr.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Ke;for(var o in this._layers){var c=this._layers[o];t.extend(c.getBounds?c.getBounds():c.getLatLng())}return t}}),vu=function(t,o){return new Jn(t,o)},hr=re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){Z(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,o){var c=this._getIconUrl(t);if(!c){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(m,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(t,o){var c=this.options,m=c[o+"Size"];typeof m=="number"&&(m=[m,m]);var x=se(m),B=se(o==="shadow"&&c.shadowAnchor||c.iconAnchor||x&&x.divideBy(2,!0));t.className="leaflet-marker-"+o+" "+(c.className||""),B&&(t.style.marginLeft=-B.x+"px",t.style.marginTop=-B.y+"px"),x&&(t.style.width=x.x+"px",t.style.height=x.y+"px")},_createImg:function(t,o){return o=o||document.createElement("img"),o.src=t,o},_getIconUrl:function(t){return ut.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function bu(t){return new hr(t)}var Or=hr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Or.imagePath!="string"&&(Or.imagePath=this._detectIconPath()),(this.options.imagePath||Or.imagePath)+hr.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var o=function(c,m,x){var B=m.exec(c);return B&&B[x]};return t=o(t,/^url\((['"])?(.+)\1\)$/,2),t&&o(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Dt("div","leaflet-default-icon-path",document.body),o=ki(t,"background-image")||ki(t,"backgroundImage");if(document.body.removeChild(t),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),ps=gn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Mi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),bt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var o=this._marker,c=o._map,m=this._marker.options.autoPanSpeed,x=this._marker.options.autoPanPadding,B=Ui(o._icon),W=c.getPixelBounds(),fe=c.getPixelOrigin(),Me=Ye(W.min._subtract(fe).add(x),W.max._subtract(fe).subtract(x));if(!Me.contains(B)){var $e=se((Math.max(Me.max.x,B.x)-Me.max.x)/(W.max.x-Me.max.x)-(Math.min(Me.min.x,B.x)-Me.min.x)/(W.min.x-Me.min.x),(Math.max(Me.max.y,B.y)-Me.max.y)/(W.max.y-Me.max.y)-(Math.min(Me.min.y,B.y)-Me.min.y)/(W.min.y-Me.min.y)).multiplyBy(m);c.panBy($e,{animate:!1}),this._draggable._newPos._add($e),this._draggable._startPos._add($e),nn(o._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ne(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Be(this._panRequest),this._panRequest=ne(this._adjustPan.bind(this,t)))},_onDrag:function(t){var o=this._marker,c=o._shadow,m=Ui(o._icon),x=o._map.layerPointToLatLng(m);c&&nn(c,m),o._latlng=x,t.latlng=x,t.oldLatLng=this._oldLatLng,o.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Be(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ms=_n.extend({options:{icon:new Or,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,o){Z(this,o),this._latlng=Xe(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var o=this._latlng;return this._latlng=Xe(t),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=t.icon.createIcon(this._icon),m=!1;c!==this._icon&&(this._icon&&this._removeIcon(),m=!0,t.title&&(c.title=t.title),c.tagName==="IMG"&&(c.alt=t.alt||"")),bt(c,o),t.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vt(c,"focus",this._panOnFocus,this);var x=t.icon.createShadow(this._shadow),B=!1;x!==this._shadow&&(this._removeShadow(),B=!0),x&&(bt(x,o),x.alt=""),this._shadow=x,t.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),x&&B&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$t(this._icon,"focus",this._panOnFocus,this),Vt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Vt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&nn(this._icon,t),this._shadow&&nn(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(bt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ps)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ps(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Un(this._icon,t),this._shadow&&Un(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var o=this.options.icon.options,c=o.iconSize?se(o.iconSize):se(0,0),m=o.iconAnchor?se(o.iconAnchor):se(0,0);t.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:c.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xu(t,o){return new ms(t,o)}var gi=_n.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return Z(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ai=gi.extend({options:{fill:!0,radius:10},initialize:function(t,o){Z(this,o),this._latlng=Xe(t),this._radius=this.options.radius},setLatLng:function(t){var o=this._latlng;return this._latlng=Xe(t),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var o=t&&t.radius||this._radius;return gi.prototype.setStyle.call(this,t),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,o=this._radiusY||t,c=this._clickTolerance(),m=[t+c,o+c];this._pxBounds=new He(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ba(t,o){return new ai(t,o)}var vo=ai.extend({initialize:function(t,o,c){if(typeof o=="number"&&(o=h({},c,{radius:o})),Z(this,o),this._latlng=Xe(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Ke(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:gi.prototype.setStyle,_project:function(){var t=this._latlng.lng,o=this._latlng.lat,c=this._map,m=c.options.crs;if(m.distance===Ze.distance){var x=Math.PI/180,B=this._mRadius/Ze.R/x,W=c.project([o+B,t]),fe=c.project([o-B,t]),Me=W.add(fe).divideBy(2),$e=c.unproject(Me).lat,et=Math.acos((Math.cos(B*x)-Math.sin(o*x)*Math.sin($e*x))/(Math.cos(o*x)*Math.cos($e*x)))/x;(isNaN(et)||et===0)&&(et=B/Math.cos(Math.PI/180*o)),this._point=Me.subtract(c.getPixelOrigin()),this._radius=isNaN(et)?0:Me.x-c.project([$e,t-et]).x,this._radiusY=Me.y-W.y}else{var ft=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ft).x}this._updateBounds()}});function Ki(t,o,c){return new vo(t,o,c)}var _i=gi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,o){Z(this,o),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var o=1/0,c=null,m=Rr,x,B,W=0,fe=this._parts.length;W<fe;W++)for(var Me=this._parts[W],$e=1,et=Me.length;$e<et;$e++){x=Me[$e-1],B=Me[$e];var ft=m(t,x,B,!0);ft<o&&(o=ft,c=m(t,x,B))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,o){return o=o||this._defaultShape(),t=Xe(t),o.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Ke,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ln(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var o=[],c=Ln(t),m=0,x=t.length;m<x;m++)c?(o[m]=Xe(t[m]),this._bounds.extend(o[m])):o[m]=this._convertLatLngs(t[m]);return o},_project:function(){var t=new He;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),o=new H(t,t);this._rawPxBounds&&(this._pxBounds=new He([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(t,o,c){var m=t[0]instanceof nt,x=t.length,B,W;if(m){for(W=[],B=0;B<x;B++)W[B]=this._map.latLngToLayerPoint(t[B]),c.extend(W[B]);o.push(W)}else for(B=0;B<x;B++)this._projectLatlngs(t[B],o,c)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,m,x,B,W,fe,Me;for(c=0,x=0,B=this._rings.length;c<B;c++)for(Me=this._rings[c],m=0,W=Me.length;m<W-1;m++)fe=qi(Me[m],Me[m+1],t,m,!0),fe&&(o[x]=o[x]||[],o[x].push(fe[0]),(fe[1]!==Me[m+1]||m===W-2)&&(o[x].push(fe[1]),x++))}},_simplifyPoints:function(){for(var t=this._parts,o=this.options.smoothFactor,c=0,m=t.length;c<m;c++)t[c]=Pa(t[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,o){var c,m,x,B,W,fe,Me=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(c=0,B=this._parts.length;c<B;c++)for(fe=this._parts[c],m=0,W=fe.length,x=W-1;m<W;x=m++)if(!(!o&&m===0)&&po(t,fe[x],fe[m])<=Me)return!0;return!1}});function wu(t,o){return new _i(t,o)}_i._flat=Gn;var Si=_i.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ma(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var o=_i.prototype._convertLatLngs.call(this,t),c=o.length;return c>=2&&o[0]instanceof nt&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(t){_i.prototype._setLatLngs.call(this,t),Ln(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ln(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,o=this.options.weight,c=new H(o,o);if(t=new He(t.min.subtract(c),t.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,x=this._rings.length,B;m<x;m++)B=Ea(this._rings[m],t,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var o=!1,c,m,x,B,W,fe,Me,$e;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(B=0,Me=this._parts.length;B<Me;B++)for(c=this._parts[B],W=0,$e=c.length,fe=$e-1;W<$e;fe=W++)m=c[W],x=c[fe],m.y>t.y!=x.y>t.y&&t.x<(x.x-m.x)*(t.y-m.y)/(x.y-m.y)+m.x&&(o=!o);return o||_i.prototype._containsPoint.call(this,t,!0)}});function Ir(t,o){return new Si(t,o)}var yi=Jn.extend({initialize:function(t,o){Z(this,o),this._layers={},t&&this.addData(t)},addData:function(t){var o=V(t)?t:t.features,c,m,x;if(o){for(c=0,m=o.length;c<m;c++)x=o[c],(x.geometries||x.geometry||x.features||x.coordinates)&&this.addData(x);return this}var B=this.options;if(B.filter&&!B.filter(t))return this;var W=gs(t,B);return W?(W.feature=xs(t),W.defaultOptions=W.options,this.resetStyle(W),B.onEachFeature&&B.onEachFeature(t,W),this.addLayer(W)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(o){this._setLayerStyle(o,t)},this)},_setLayerStyle:function(t,o){t.setStyle&&(typeof o=="function"&&(o=o(t.feature)),t.setStyle(o))}});function gs(t,o){var c=t.type==="Feature"?t.geometry:t,m=c?c.coordinates:null,x=[],B=o&&o.pointToLayer,W=o&&o.coordsToLatLng||_s,fe,Me,$e,et;if(!m&&!c)return null;switch(c.type){case"Point":return fe=W(m),Aa(B,t,fe,o);case"MultiPoint":for($e=0,et=m.length;$e<et;$e++)fe=W(m[$e]),x.push(Aa(B,t,fe,o));return new Jn(x);case"LineString":case"MultiLineString":return Me=ys(m,c.type==="LineString"?0:1,W),new _i(Me,o);case"Polygon":case"MultiPolygon":return Me=ys(m,c.type==="Polygon"?1:2,W),new Si(Me,o);case"GeometryCollection":for($e=0,et=c.geometries.length;$e<et;$e++){var ft=gs({geometry:c.geometries[$e],type:"Feature",properties:t.properties},o);ft&&x.push(ft)}return new Jn(x);case"FeatureCollection":for($e=0,et=c.features.length;$e<et;$e++){var Mt=gs(c.features[$e],o);Mt&&x.push(Mt)}return new Jn(x);default:throw new Error("Invalid GeoJSON object.")}}function Aa(t,o,c,m){return t?t(o,c):new ms(c,m&&m.markersInheritOptions&&m)}function _s(t){return new nt(t[1],t[0],t[2])}function ys(t,o,c){for(var m=[],x=0,B=t.length,W;x<B;x++)W=o?ys(t[x],o-1,c):(c||_s)(t[x]),m.push(W);return m}function vs(t,o){return t=Xe(t),t.alt!==void 0?[j(t.lng,o),j(t.lat,o),j(t.alt,o)]:[j(t.lng,o),j(t.lat,o)]}function bs(t,o,c,m){for(var x=[],B=0,W=t.length;B<W;B++)x.push(o?bs(t[B],Ln(t[B])?0:o-1,c,m):vs(t[B],m));return!o&&c&&x.length>0&&x.push(x[0].slice()),x}function dr(t,o){return t.feature?h({},t.feature,{geometry:o}):xs(o)}function xs(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var ws={toGeoJSON:function(t){return dr(this,{type:"Point",coordinates:vs(this.getLatLng(),t)})}};ms.include(ws),vo.include(ws),ai.include(ws),_i.include({toGeoJSON:function(t){var o=!Ln(this._latlngs),c=bs(this._latlngs,o?1:0,!1,t);return dr(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),Si.include({toGeoJSON:function(t){var o=!Ln(this._latlngs),c=o&&!Ln(this._latlngs[0]),m=bs(this._latlngs,c?2:o?1:0,!0,t);return o||(m=[m]),dr(this,{type:(c?"Multi":"")+"Polygon",coordinates:m})}}),cr.include({toMultiPoint:function(t){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(t).geometry.coordinates)}),dr(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(t){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(t);var c=o==="GeometryCollection",m=[];return this.eachLayer(function(x){if(x.toGeoJSON){var B=x.toGeoJSON(t);if(c)m.push(B.geometry);else{var W=xs(B);W.type==="FeatureCollection"?m.push.apply(m,W.features):m.push(W)}}}),c?dr(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function Ls(t,o){return new yi(t,o)}var Ta=Ls,fr=_n.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,o,c){this._url=t,this._bounds=Je(o),Z(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(bt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Vt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&lr(this._image),this},bringToBack:function(){return this._map&&$i(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Je(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",o=this._image=t?this._url:Dt("img");if(bt(o,"leaflet-image-layer"),this._zoomAnimated&&bt(o,"leaflet-zoom-animated"),this.options.className&&bt(o,this.options.className),o.onselectstart=P,o.onmousemove=P,o.onload=f(this.fire,this,"load"),o.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(t){var o=this._map.getZoomScale(t.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ji(this._image,c,o)},_reset:function(){var t=this._image,o=new He(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();nn(t,o.min),t.style.width=c.x+"px",t.style.height=c.y+"px"},_updateOpacity:function(){Un(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Lu=function(t,o,c){return new fr(t,o,c)},Fr=fr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",o=this._image=t?this._url:Dt("video");if(bt(o,"leaflet-image-layer"),this._zoomAnimated&&bt(o,"leaflet-zoom-animated"),this.options.className&&bt(o,this.options.className),o.onselectstart=P,o.onmousemove=P,o.onloadeddata=f(this.fire,this,"load"),t){for(var c=o.getElementsByTagName("source"),m=[],x=0;x<c.length;x++)m.push(c[x].src);this._url=c.length>0?m:[o.src];return}V(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var W=Dt("source");W.src=this._url[B],o.appendChild(W)}}});function Da(t,o,c){return new Fr(t,o,c)}var Ra=fr.extend({_initImage:function(){var t=this._image=this._url;bt(t,"leaflet-image-layer"),this._zoomAnimated&&bt(t,"leaflet-zoom-animated"),this.options.className&&bt(t,this.options.className),t.onselectstart=P,t.onmousemove=P}});function Cu(t,o,c){return new Ra(t,o,c)}var li=_n.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,o){t&&(t instanceof nt||V(t))?(this._latlng=Xe(t),Z(this,o)):(Z(this,t),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Un(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Un(this._container,1),this.bringToFront(),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Un(this._container,0),this._removeTimeout=setTimeout(f(Vt,void 0,this._container),200)):Vt(this._container),this.options.interactive&&(Yt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Xe(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&lr(this._container),this},bringToBack:function(){return this._map&&$i(this._container),this},_prepareOpen:function(t){var o=this._source;if(!o._map)return!1;if(o instanceof Jn){o=null;var c=this._source._layers;for(var m in c)if(c[m]._map){o=c[m];break}if(!o)return!1;this._source=o}if(!t)if(o.getCenter)t=o.getCenter();else if(o.getLatLng)t=o.getLatLng();else if(o.getBounds)t=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")t.innerHTML=o;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),o=se(this.options.offset),c=this._getAnchor();this._zoomAnimated?nn(this._container,t.add(c)):o=o.add(t).add(c);var m=this._containerBottom=-o.y,x=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=m+"px",this._container.style.left=x+"px"}},_getAnchor:function(){return[0,0]}});St.include({_initOverlay:function(t,o,c,m){var x=o;return x instanceof t||(x=new t(m).setContent(o)),c&&x.setLatLng(c),x}}),_n.include({_initOverlay:function(t,o,c,m){var x=c;return x instanceof t?(Z(x,m),x._source=this):(x=o&&!m?o:new t(m,this),x.setContent(c)),x}});var Bi=li.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,li.prototype.openOn.call(this,t)},onAdd:function(t){li.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof gi||this._source.on("preclick",Gi))},onRemove:function(t){li.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof gi||this._source.off("preclick",Gi))},getEvents:function(){var t=li.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",o=this._container=Dt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Dt("div",t+"-content-wrapper",o);if(this._contentNode=Dt("div",t+"-content",c),Tr(o),co(this._contentNode),vt(o,"contextmenu",Gi),this._tipContainer=Dt("div",t+"-tip-container",o),this._tip=Dt("div",t+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Dt("a",t+"-close-button",o);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',vt(m,"click",function(x){hn(x),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,o=t.style;o.width="",o.whiteSpace="nowrap";var c=t.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var m=t.offsetHeight,x=this.options.maxHeight,B="leaflet-popup-scrolled";x&&m>x?(o.height=x+"px",bt(t,B)):Yt(t,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),c=this._getAnchor();nn(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,o=parseInt(ki(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,m=this._containerWidth,x=new H(this._containerLeft,-c-this._containerBottom);x._add(Ui(this._container));var B=t.layerPointToContainerPoint(x),W=se(this.options.autoPanPadding),fe=se(this.options.autoPanPaddingTopLeft||W),Me=se(this.options.autoPanPaddingBottomRight||W),$e=t.getSize(),et=0,ft=0;B.x+m+Me.x>$e.x&&(et=B.x+m-$e.x+Me.x),B.x-et-fe.x<0&&(et=B.x-fe.x),B.y+c+Me.y>$e.y&&(ft=B.y+c-$e.y+Me.y),B.y-ft-fe.y<0&&(ft=B.y-fe.y),(et||ft)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([et,ft]))}},_getAnchor:function(){return se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ku=function(t,o){return new Bi(t,o)};St.mergeOptions({closePopupOnClick:!0}),St.include({openPopup:function(t,o,c){return this._initOverlay(Bi,t,o,c).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),_n.include({bindPopup:function(t,o){return this._popup=this._initOverlay(Bi,this._popup,t,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Jn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Vi(t);var o=t.layer||t.target;if(this._popup._source===o&&!(o instanceof gi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=o,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Cs=li.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){li.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){li.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=li.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",o=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Dt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var o,c,m=this._map,x=this._container,B=m.latLngToContainerPoint(m.getCenter()),W=m.layerPointToContainerPoint(t),fe=this.options.direction,Me=x.offsetWidth,$e=x.offsetHeight,et=se(this.options.offset),ft=this._getAnchor();fe==="top"?(o=Me/2,c=$e):fe==="bottom"?(o=Me/2,c=0):fe==="center"?(o=Me/2,c=$e/2):fe==="right"?(o=0,c=$e/2):fe==="left"?(o=Me,c=$e/2):W.x<B.x?(fe="right",o=0,c=$e/2):(fe="left",o=Me+(et.x+ft.x)*2,c=$e/2),t=t.subtract(se(o,c,!0)).add(et).add(ft),Yt(x,"leaflet-tooltip-right"),Yt(x,"leaflet-tooltip-left"),Yt(x,"leaflet-tooltip-top"),Yt(x,"leaflet-tooltip-bottom"),bt(x,"leaflet-tooltip-"+fe),nn(x,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Un(this._container,t)},_animateZoom:function(t){var o=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(o)},_getAnchor:function(){return se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Eu=function(t,o){return new Cs(t,o)};St.include({openTooltip:function(t,o,c){return this._initOverlay(Cs,t,o,c).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),_n.include({bindTooltip:function(t,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Cs,this._tooltip,t,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var o=t?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Jn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&(vt(o,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),vt(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var o=typeof t.getElement=="function"&&t.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var o=t.latlng,c,m;this._tooltip.options.sticky&&t.originalEvent&&(c=this._map.mouseEventToContainerPoint(t.originalEvent),m=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(o)}});var Oa=hr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var o=t&&t.tagName==="DIV"?t:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Sr(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var m=se(c.bgPos);o.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Mu(t){return new Oa(t)}hr.Default=Or;var Nr=_n.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ut.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){Z(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Vt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(lr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($i(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=C(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof H?t:new H(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var o=this.getPane().children,c=-t(-1/0,1/0),m=0,x=o.length,B;m<x;m++)B=o[m].style.zIndex,o[m]!==this._container&&B&&(c=t(c,+B));isFinite(c)&&(this.options.zIndex=c+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ut.ielt9){Un(this._container,this.options.opacity);var t=+new Date,o=!1,c=!1;for(var m in this._tiles){var x=this._tiles[m];if(!(!x.current||!x.loaded)){var B=Math.min(1,(t-x.loaded)/200);Un(x.el,B),B<1?o=!0:(x.active?c=!0:this._onOpaqueTile(x),x.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(Be(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=Dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,o=this.options.maxZoom;if(t!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===t?(this._levels[c].el.style.zIndex=o-Math.abs(t-c),this._onUpdateLevel(c)):(Vt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var m=this._levels[t],x=this._map;return m||(m=this._levels[t]={},m.el=Dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=o,m.origin=x.project(x.unproject(x.getPixelOrigin()),t).round(),m.zoom=t,this._setZoomTransform(m,x.getCenter(),x.getZoom()),P(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var t,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)o=this._tiles[t],o.retain=o.current;for(t in this._tiles)if(o=this._tiles[t],o.current&&!o.active){var m=o.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var o in this._tiles)this._tiles[o].coords.z===t&&this._removeTile(o)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Vt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,o,c,m){var x=Math.floor(t/2),B=Math.floor(o/2),W=c-1,fe=new H(+x,+B);fe.z=+W;var Me=this._tileCoordsToKey(fe),$e=this._tiles[Me];return $e&&$e.active?($e.retain=!0,!0):($e&&$e.loaded&&($e.retain=!0),W>m?this._retainParent(x,B,W,m):!1)},_retainChildren:function(t,o,c,m){for(var x=2*t;x<2*t+2;x++)for(var B=2*o;B<2*o+2;B++){var W=new H(x,B);W.z=c+1;var fe=this._tileCoordsToKey(W),Me=this._tiles[fe];if(Me&&Me.active){Me.retain=!0;continue}else Me&&Me.loaded&&(Me.retain=!0);c+1<m&&this._retainChildren(x,B,c+1,m)}},_resetView:function(t){var o=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var o=this.options;return o.minNativeZoom!==void 0&&t<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<t?o.maxNativeZoom:t},_setView:function(t,o,c,m){var x=Math.round(o);this.options.maxZoom!==void 0&&x>this.options.maxZoom||this.options.minZoom!==void 0&&x<this.options.minZoom?x=void 0:x=this._clampZoom(x);var B=this.options.updateWhenZooming&&x!==this._tileZoom;(!m||B)&&(this._tileZoom=x,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),x!==void 0&&this._update(t),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(t,o)},_setZoomTransforms:function(t,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],t,o)},_setZoomTransform:function(t,o,c){var m=this._map.getZoomScale(c,t.zoom),x=t.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(o,c)).round();ut.any3d?ji(t.el,x,m):nn(t.el,x)},_resetGrid:function(){var t=this._map,o=t.options.crs,c=this._tileSize=this.getTileSize(),m=this._tileZoom,x=this._map.getPixelWorldBounds(this._tileZoom);x&&(this._globalTileRange=this._pxBoundsToTileRange(x)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,o.wrapLng[0]],m).x/c.x),Math.ceil(t.project([0,o.wrapLng[1]],m).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([o.wrapLat[0],0],m).y/c.x),Math.ceil(t.project([o.wrapLat[1],0],m).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),m=o.getZoomScale(c,this._tileZoom),x=o.project(t,this._tileZoom).floor(),B=o.getSize().divideBy(m*2);return new He(x.subtract(B),x.add(B))},_update:function(t){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(t===void 0&&(t=o.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(t),x=this._pxBoundsToTileRange(m),B=x.getCenter(),W=[],fe=this.options.keepBuffer,Me=new He(x.getBottomLeft().subtract([fe,-fe]),x.getTopRight().add([fe,-fe]));if(!(isFinite(x.min.x)&&isFinite(x.min.y)&&isFinite(x.max.x)&&isFinite(x.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var $e in this._tiles){var et=this._tiles[$e].coords;(et.z!==this._tileZoom||!Me.contains(new H(et.x,et.y)))&&(this._tiles[$e].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(t,c);return}for(var ft=x.min.y;ft<=x.max.y;ft++)for(var Mt=x.min.x;Mt<=x.max.x;Mt++){var vn=new H(Mt,ft);if(vn.z=this._tileZoom,!!this._isValidTile(vn)){var ln=this._tiles[this._tileCoordsToKey(vn)];ln?ln.current=!0:W.push(vn)}}if(W.sort(function(Wt,ui){return Wt.distanceTo(B)-ui.distanceTo(B)}),W.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var kn=document.createDocumentFragment();for(Mt=0;Mt<W.length;Mt++)this._addTile(W[Mt],kn);this._level.el.appendChild(kn)}}}},_isValidTile:function(t){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(t.x<c.min.x||t.x>c.max.x)||!o.wrapLat&&(t.y<c.min.y||t.y>c.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(t);return Je(this.options.bounds).overlaps(m)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var o=this._map,c=this.getTileSize(),m=t.scaleBy(c),x=m.add(c),B=o.unproject(m,t.z),W=o.unproject(x,t.z);return[B,W]},_tileCoordsToBounds:function(t){var o=this._tileCoordsToNwSe(t),c=new Ke(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var o=t.split(":"),c=new H(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(t){var o=this._tiles[t];o&&(Vt(o.el),delete this._tiles[t],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){bt(t,"leaflet-tile");var o=this.getTileSize();t.style.width=o.x+"px",t.style.height=o.y+"px",t.onselectstart=P,t.onmousemove=P,ut.ielt9&&this.options.opacity<1&&Un(t,this.options.opacity)},_addTile:function(t,o){var c=this._getTilePos(t),m=this._tileCoordsToKey(t),x=this.createTile(this._wrapCoords(t),f(this._tileReady,this,t));this._initTile(x),this.createTile.length<2&&ne(f(this._tileReady,this,t,null,x)),nn(x,c),this._tiles[m]={el:x,coords:t,current:!0},o.appendChild(x),this.fire("tileloadstart",{tile:x,coords:t})},_tileReady:function(t,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:t});var m=this._tileCoordsToKey(t);c=this._tiles[m],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Un(c.el,0),Be(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(bt(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ut.ielt9||!this._map._fadeAnimated?ne(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var o=new H(this._wrapX?M(t.x,this._wrapX):t.x,this._wrapY?M(t.y,this._wrapY):t.y);return o.z=t.z,o},_pxBoundsToTileRange:function(t){var o=this.getTileSize();return new He(t.min.unscaleBy(o).floor(),t.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Pu(t){return new Nr(t)}var pr=Nr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,o){this._url=t,o=Z(this,o),o.detectRetina&&ut.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,o){return this._url===t&&o===void 0&&(o=!0),this._url=t,o||this.redraw(),this},createTile:function(t,o){var c=document.createElement("img");return vt(c,"load",f(this._tileOnLoad,this,o,c)),vt(c,"error",f(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(t),c},getTileUrl:function(t){var o={r:ut.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-t.y;this.options.tms&&(o.y=c),o["-y"]=c}return ie(this._url,h(o,this.options))},_tileOnLoad:function(t,o){ut.ielt9?setTimeout(f(t,this,null,o),0):t(null,o)},_tileOnError:function(t,o,c){var m=this.options.errorTileUrl;m&&o.getAttribute("src")!==m&&(o.src=m),t(c,o)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,m=this.options.zoomOffset;return c&&(t=o-t),t+m},_getSubdomain:function(t){var o=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var t,o;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(o=this._tiles[t].el,o.onload=P,o.onerror=P,!o.complete)){o.src=Oe;var c=this._tiles[t].coords;Vt(o),delete this._tiles[t],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(t){var o=this._tiles[t];if(o)return o.el.setAttribute("src",Oe),Nr.prototype._removeTile.call(this,t)},_tileReady:function(t,o,c){if(!(!this._map||c&&c.getAttribute("src")===Oe))return Nr.prototype._tileReady.call(this,t,o,c)}});function bo(t,o){return new pr(t,o)}var ks=pr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,o){this._url=t;var c=h({},this.defaultWmsParams);for(var m in o)m in this.options||(c[m]=o[m]);o=Z(this,o);var x=o.detectRetina&&ut.retina?2:1,B=this.getTileSize();c.width=B.x*x,c.height=B.y*x,this.wmsParams=c},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,pr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var o=this._tileCoordsToNwSe(t),c=this._crs,m=Ye(c.project(o[0]),c.project(o[1])),x=m.min,B=m.max,W=(this._wmsVersion>=1.3&&this._crs===_o?[x.y,x.x,B.y,B.x]:[x.x,x.y,B.x,B.y]).join(","),fe=pr.prototype.getTileUrl.call(this,t);return fe+q(this.wmsParams,fe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+W},setParams:function(t,o){return h(this.wmsParams,t),o||this.redraw(),this}});function Su(t,o){return new ks(t,o)}pr.WMS=ks,bo.wms=Su;var vi=_n.extend({options:{padding:.1},initialize:function(t){Z(this,t),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),bt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,o){var c=this._map.getZoomScale(o,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),x=this._map.project(this._center,o),B=m.multiplyBy(-c).add(x).subtract(this._map._getNewPixelOrigin(t,o));ut.any3d?ji(this._container,B,c):nn(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-t)).round();this._bounds=new He(c,c.add(o.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),xo=vi.extend({options:{tolerance:0},getEvents:function(){var t=vi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){vi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");vt(t,"mousemove",this._onMouseMove,this),vt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),vt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Be(this._redrawRequest),delete this._ctx,Vt(this._container),$t(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var o in this._layers)t=this._layers[o],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vi.prototype._update.call(this);var t=this._bounds,o=this._container,c=t.getSize(),m=ut.retina?2:1;nn(o,t.min),o.width=m*c.x,o.height=m*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",ut.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){vi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[v(t)]=t;var o=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var o=t._order,c=o.next,m=o.prev;c?c.prev=m:this._drawLast=m,m?m.next=c:this._drawFirst=c,delete t._order,delete this._layers[v(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var o=t.options.dashArray.split(/[, ]+/),c=[],m,x;for(x=0;x<o.length;x++){if(m=Number(o[x]),isNaN(m))return;c.push(m)}t.options._dashArray=c}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ne(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var o=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new He,this._redrawBounds.extend(t._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(t._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var o=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)t=m.layer,(!o||t._pxBounds&&t._pxBounds.intersects(o))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,o){if(this._drawing){var c,m,x,B,W=t._parts,fe=W.length,Me=this._ctx;if(fe){for(Me.beginPath(),c=0;c<fe;c++){for(m=0,x=W[c].length;m<x;m++)B=W[c][m],Me[m?"lineTo":"moveTo"](B.x,B.y);o&&Me.closePath()}this._fillStroke(Me,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var o=t._point,c=this._ctx,m=Math.max(Math.round(t._radius),1),x=(Math.max(Math.round(t._radiusY),1)||m)/m;x!==1&&(c.save(),c.scale(1,x)),c.beginPath(),c.arc(o.x,o.y/x,m,0,Math.PI*2,!1),x!==1&&c.restore(),this._fillStroke(c,t)}},_fillStroke:function(t,o){var c=o.options;c.fill&&(t.globalAlpha=c.fillOpacity,t.fillStyle=c.fillColor||c.color,t.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(t.setLineDash&&t.setLineDash(o.options&&o.options._dashArray||[]),t.globalAlpha=c.opacity,t.lineWidth=c.weight,t.strokeStyle=c.color,t.lineCap=c.lineCap,t.lineJoin=c.lineJoin,t.stroke())},_onClick:function(t){for(var o=this._map.mouseEventToLayerPoint(t),c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(c))&&(m=c);this._fireEvent(m?[m]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,o)}},_handleMouseOut:function(t){var o=this._hoveredLayer;o&&(Yt(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,o){if(!this._mouseHoverThrottled){for(var c,m,x=this._drawFirst;x;x=x.next)c=x.layer,c.options.interactive&&c._containsPoint(o)&&(m=c);m!==this._hoveredLayer&&(this._handleMouseOut(t),m&&(bt(this._container,"leaflet-interactive"),this._fireEvent([m],t,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,o,c){this._map._fireDOMEvent(o,c||o.type,t)},_bringToFront:function(t){var o=t._order;if(o){var c=o.next,m=o.prev;if(c)c.prev=m;else return;m?m.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(t)}},_bringToBack:function(t){var o=t._order;if(o){var c=o.next,m=o.prev;if(m)m.next=c;else return;c?c.prev=m:m&&(this._drawLast=m),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(t)}}});function Es(t){return ut.canvas?new xo(t):null}var zr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Bu={_initContainer:function(){this._container=Dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(vi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var o=t._container=zr("shape");bt(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",t._path=zr("path"),o.appendChild(t._path),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){var o=t._container;this._container.appendChild(o),t.options.interactive&&t.addInteractiveTarget(o)},_removePath:function(t){var o=t._container;Vt(o),t.removeInteractiveTarget(o),delete this._layers[v(t)]},_updateStyle:function(t){var o=t._stroke,c=t._fill,m=t.options,x=t._container;x.stroked=!!m.stroke,x.filled=!!m.fill,m.stroke?(o||(o=t._stroke=zr("stroke")),x.appendChild(o),o.weight=m.weight+"px",o.color=m.color,o.opacity=m.opacity,m.dashArray?o.dashStyle=V(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=m.lineCap.replace("butt","flat"),o.joinstyle=m.lineJoin):o&&(x.removeChild(o),t._stroke=null),m.fill?(c||(c=t._fill=zr("fill")),x.appendChild(c),c.color=m.fillColor||m.color,c.opacity=m.fillOpacity):c&&(x.removeChild(c),t._fill=null)},_updateCircle:function(t){var o=t._point.round(),c=Math.round(t._radius),m=Math.round(t._radiusY||c);this._setPath(t,t._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+m+" 0,"+65535*360)},_setPath:function(t,o){t._path.v=o},_bringToFront:function(t){lr(t._container)},_bringToBack:function(t){$i(t._container)}},mr=ut.vml?zr:Re,pn=vi.extend({_initContainer:function(){this._container=mr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=mr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Vt(this._container),$t(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vi.prototype._update.call(this);var t=this._bounds,o=t.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),nn(c,t.min),c.setAttribute("viewBox",[t.min.x,t.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(t){var o=t._path=mr("path");t.options.className&&bt(o,t.options.className),t.options.interactive&&bt(o,"leaflet-interactive"),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Vt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[v(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var o=t._path,c=t.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(t,o){this._setPath(t,de(t._parts,o))},_updateCircle:function(t){var o=t._point,c=Math.max(Math.round(t._radius),1),m=Math.max(Math.round(t._radiusY),1)||c,x="a"+c+","+m+" 0 1,0 ",B=t._empty()?"M0 0":"M"+(o.x-c)+","+o.y+x+c*2+",0 "+x+-c*2+",0 ";this._setPath(t,B)},_setPath:function(t,o){t._path.setAttribute("d",o)},_bringToFront:function(t){lr(t._path)},_bringToBack:function(t){$i(t._path)}});ut.vml&&pn.include(Bu);function yn(t){return ut.svg||ut.vml?new pn(t):null}St.include({getRenderer:function(t){var o=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var o=this._paneRenderers[t];return o===void 0&&(o=this._createRenderer({pane:t}),this._paneRenderers[t]=o),o},_createRenderer:function(t){return this.options.preferCanvas&&Es(t)||yn(t)}});var wo=Si.extend({initialize:function(t,o){Si.prototype.initialize.call(this,this._boundsToLatLngs(t),o)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Je(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Xn(t,o){return new wo(t,o)}pn.create=mr,pn.pointsToPath=de,yi.geometryToLayer=gs,yi.coordsToLatLng=_s,yi.coordsToLatLngs=ys,yi.latLngToCoords=vs,yi.latLngsToCoords=bs,yi.getFeature=dr,yi.asFeature=xs,St.mergeOptions({boxZoom:!0});var gt=gn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){vt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$t(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Vt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Br(),io(),this._startPoint=this._map.mouseEventToContainerPoint(t),vt(document,{contextmenu:Vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Dt("div","leaflet-zoom-box",this._container),bt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var o=new He(this._point,this._startPoint),c=o.getSize();nn(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Vt(this._box),Yt(this._container,"leaflet-crosshair")),Ar(),ro(),$t(document,{contextmenu:Vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var o=new Ke(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});St.addInitHook("addHandler","boxZoom",gt),St.mergeOptions({doubleClickZoom:!0});var Lo=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var o=this._map,c=o.getZoom(),m=o.options.zoomDelta,x=t.originalEvent.shiftKey?c-m:c+m;o.options.doubleClickZoom==="center"?o.setZoom(x):o.setZoomAround(t.containerPoint,x)}});St.addInitHook("addHandler","doubleClickZoom",Lo),St.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ms=gn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Mi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}bt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Yt(this._map._container,"leaflet-grab"),Yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=Je(this._map.options.maxBounds);this._offsetLimit=Ye(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,o){return t-(t-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;t.x<o.min.x&&(t.x=this._viscousLimit(t.x,o.min.x)),t.y<o.min.y&&(t.y=this._viscousLimit(t.y,o.min.y)),t.x>o.max.x&&(t.x=this._viscousLimit(t.x,o.max.x)),t.y>o.max.y&&(t.y=this._viscousLimit(t.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,o=Math.round(t/2),c=this._initialWorldOffset,m=this._draggable._newPos.x,x=(m-o+c)%t+o-c,B=(m+o+c)%t-o-c,W=Math.abs(x+c)<Math.abs(B+c)?x:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=W},_onDragEnd:function(t){var o=this._map,c=o.options,m=!c.inertia||t.noInertia||this._times.length<2;if(o.fire("dragend",t),m)o.fire("moveend");else{this._prunePositions(+new Date);var x=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,W=c.easeLinearity,fe=x.multiplyBy(W/B),Me=fe.distanceTo([0,0]),$e=Math.min(c.inertiaMaxSpeed,Me),et=fe.multiplyBy($e/Me),ft=$e/(c.inertiaDeceleration*W),Mt=et.multiplyBy(-ft/2).round();!Mt.x&&!Mt.y?o.fire("moveend"):(Mt=o._limitOffset(Mt,o.options.maxBounds),ne(function(){o.panBy(Mt,{duration:ft,easeLinearity:W,noMoveStart:!0,animate:!0})}))}}});St.addInitHook("addHandler","dragging",Ms),St.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bi=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),vt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$t(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,o=document.documentElement,c=t.scrollTop||o.scrollTop,m=t.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(m,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var o=this._panKeys={},c=this.keyCodes,m,x;for(m=0,x=c.left.length;m<x;m++)o[c.left[m]]=[-1*t,0];for(m=0,x=c.right.length;m<x;m++)o[c.right[m]]=[t,0];for(m=0,x=c.down.length;m<x;m++)o[c.down[m]]=[0,t];for(m=0,x=c.up.length;m<x;m++)o[c.up[m]]=[0,-1*t]},_setZoomDelta:function(t){var o=this._zoomKeys={},c=this.keyCodes,m,x;for(m=0,x=c.zoomIn.length;m<x;m++)o[c.zoomIn[m]]=t;for(m=0,x=c.zoomOut.length;m<x;m++)o[c.zoomOut[m]]=-t},_addHooks:function(){vt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$t(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var o=t.keyCode,c=this._map,m;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(m=this._panKeys[o],t.shiftKey&&(m=se(m).multiplyBy(3)),c.options.maxBounds&&(m=c._limitOffset(se(m),c.options.maxBounds)),c.options.worldCopyJump){var x=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(m)));c.panTo(x)}else c.panBy(m)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Vi(t)}}});St.addInitHook("addHandler","keyboard",bi),St.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Cn=gn.extend({addHooks:function(){vt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$t(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var o=xa(t),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var m=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),m),Vi(t)},_performZoom:function(){var t=this._map,o=t.getZoom(),c=this._map.options.zoomSnap||0;t._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),x=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,B=c?Math.ceil(x/c)*c:x,W=t._limitZoom(o+(this._delta>0?B:-B))-o;this._delta=0,this._startTime=null,W&&(t.options.scrollWheelZoom==="center"?t.setZoom(o+W):t.setZoomAround(this._lastMousePos,o+W))}});St.addInitHook("addHandler","scrollWheelZoom",Cn);var Ia=600;St.mergeOptions({tapHold:ut.touchNative&&ut.safari&&ut.mobile,tapTolerance:15});var Dn=gn.extend({addHooks:function(){vt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$t(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var o=t.touches[0];this._startPos=this._newPos=new H(o.clientX,o.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(vt(document,"touchend",hn),vt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),Ia),vt(document,"touchend touchcancel contextmenu",this._cancel,this),vt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){$t(document,"touchend",hn),$t(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),$t(document,"touchend touchcancel contextmenu",this._cancel,this),$t(document,"touchmove",this._onMove,this)},_onMove:function(t){var o=t.touches[0];this._newPos=new H(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,o){var c=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});St.addInitHook("addHandler","tapHold",Dn),St.mergeOptions({touchZoom:ut.touch,bounceAtZoomLimits:!0});var Rn=gn.extend({addHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),vt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Yt(this._map._container,"leaflet-touch-zoom"),$t(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var o=this._map;if(!(!t.touches||t.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(m)._divideBy(2))),this._startDist=c.distanceTo(m),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),vt(document,"touchmove",this._onTouchMove,this),vt(document,"touchend touchcancel",this._onTouchEnd,this),hn(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(t.touches[0]),m=o.mouseEventToContainerPoint(t.touches[1]),x=c.distanceTo(m)/this._startDist;if(this._zoom=o.getScaleZoom(x,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&x<1||this._zoom>o.getMaxZoom()&&x>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,x===1)return}else{var B=c._add(m)._divideBy(2)._subtract(this._centerPoint);if(x===1&&B.x===0&&B.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),Be(this._animRequest);var W=f(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ne(W,this,!0),hn(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Be(this._animRequest),$t(document,"touchmove",this._onTouchMove,this),$t(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});St.addInitHook("addHandler","touchZoom",Rn),St.BoxZoom=gt,St.DoubleClickZoom=Lo,St.Drag=Ms,St.Keyboard=bi,St.ScrollWheelZoom=Cn,St.TapHold=Dn,St.TouchZoom=Rn,s.Bounds=He,s.Browser=ut,s.CRS=Le,s.Canvas=xo,s.Circle=vo,s.CircleMarker=ai,s.Class=re,s.Control=yt,s.DivIcon=Oa,s.DivOverlay=li,s.DomEvent=ls,s.DomUtil=uu,s.Draggable=Mi,s.Evented=ve,s.FeatureGroup=Jn,s.GeoJSON=yi,s.GridLayer=Nr,s.Handler=gn,s.Icon=hr,s.ImageOverlay=fr,s.LatLng=nt,s.LatLngBounds=Ke,s.Layer=_n,s.LayerGroup=cr,s.LineUtil=ds,s.Map=St,s.Marker=ms,s.Mixin=pu,s.Path=gi,s.Point=H,s.PolyUtil=mu,s.Polygon=Si,s.Polyline=_i,s.Popup=Bi,s.PosAnimation=wa,s.Projection=oi,s.Rectangle=wo,s.Renderer=vi,s.SVG=pn,s.SVGOverlay=Ra,s.TileLayer=pr,s.Tooltip=Cs,s.Transformation=Et,s.Util=Fe,s.VideoOverlay=Fr,s.bind=f,s.bounds=Ye,s.canvas=Es,s.circle=Ki,s.circleMarker=Ba,s.control=Hi,s.divIcon=Mu,s.extend=h,s.featureGroup=vu,s.geoJSON=Ls,s.geoJson=Ta,s.gridLayer=Pu,s.icon=bu,s.imageOverlay=Lu,s.latLng=Xe,s.latLngBounds=Je,s.layerGroup=yu,s.map=La,s.marker=xu,s.point=se,s.polygon=Ir,s.polyline=wu,s.popup=ku,s.rectangle=Xn,s.setOptions=Z,s.stamp=v,s.svg=yn,s.svgOverlay=Cu,s.tileLayer=bo,s.tooltip=Eu,s.transformation=U,s.version=l,s.videoOverlay=Da;var Wi=window.L;s.noConflict=function(){return window.L=Wi,this},window.L=s})})(kc,kc.exports);var bn=kc.exports;const tt=Rp(bn);var Hn=63710088e-1,X1={centimeters:Hn*100,centimetres:Hn*100,degrees:Hn/111325,feet:Hn*3.28084,inches:Hn*39.37,kilometers:Hn/1e3,kilometres:Hn/1e3,meters:Hn,metres:Hn,miles:Hn/1609.344,millimeters:Hn*1e3,millimetres:Hn*1e3,nauticalmiles:Hn/1852,radians:1,yards:Hn*1.0936};function yl(e,i,s){s===void 0&&(s={});var l={type:"Feature"};return(s.id===0||s.id)&&(l.id=s.id),s.bbox&&(l.bbox=s.bbox),l.properties=i||{},l.geometry=e,l}function Ec(e,i,s){s===void 0&&(s={});for(var l=0,h=e;l<h.length;l++){var p=h[l];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<p[p.length-1].length;f++)if(p[p.length-1][f]!==p[0][f])throw new Error("First and last Position are not equivalent.")}var y={type:"Polygon",coordinates:e};return yl(y,i,s)}function Qo(e,i,s){if(s===void 0&&(s={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var l={type:"LineString",coordinates:e};return yl(l,i,s)}function Y1(e,i){i===void 0&&(i="kilometers");var s=X1[i];if(!s)throw new Error(i+" units is invalid");return e*s}function Wa(e){var i=e%360;return i*Math.PI/180}function jp(e,i,s){if(e!==null)for(var l,h,p,f,y,v,C,M=0,P=0,j,J=e.type,R=J==="FeatureCollection",Z=J==="Feature",q=R?e.features.length:1,xe=0;xe<q;xe++){C=R?e.features[xe].geometry:Z?e.geometry:e,j=C?C.type==="GeometryCollection":!1,y=j?C.geometries.length:1;for(var ie=0;ie<y;ie++){var V=0,le=0;if(f=j?C.geometries[ie]:C,f!==null){v=f.coordinates;var Oe=f.type;switch(M=0,Oe){case null:break;case"Point":if(i(v,P,xe,V,le)===!1)return!1;P++,V++;break;case"LineString":case"MultiPoint":for(l=0;l<v.length;l++){if(i(v[l],P,xe,V,le)===!1)return!1;P++,Oe==="MultiPoint"&&V++}Oe==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(l=0;l<v.length;l++){for(h=0;h<v[l].length-M;h++){if(i(v[l][h],P,xe,V,le)===!1)return!1;P++}Oe==="MultiLineString"&&V++,Oe==="Polygon"&&le++}Oe==="Polygon"&&V++;break;case"MultiPolygon":for(l=0;l<v.length;l++){for(le=0,h=0;h<v[l].length;h++){for(p=0;p<v[l][h].length-M;p++){if(i(v[l][h][p],P,xe,V,le)===!1)return!1;P++}le++}V++}break;case"GeometryCollection":for(l=0;l<f.geometries.length;l++)if(jp(f.geometries[l],i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Up(e,i){var s,l,h,p,f,y,v,C,M,P,j=0,J=e.type==="FeatureCollection",R=e.type==="Feature",Z=J?e.features.length:1;for(s=0;s<Z;s++){for(y=J?e.features[s].geometry:R?e.geometry:e,C=J?e.features[s].properties:R?e.properties:{},M=J?e.features[s].bbox:R?e.bbox:void 0,P=J?e.features[s].id:R?e.id:void 0,v=y?y.type==="GeometryCollection":!1,f=v?y.geometries.length:1,h=0;h<f;h++){if(p=v?y.geometries[h]:y,p===null){if(i(null,j,C,M,P)===!1)return!1;continue}switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(i(p,j,C,M,P)===!1)return!1;break}case"GeometryCollection":{for(l=0;l<p.geometries.length;l++)if(i(p.geometries[l],j,C,M,P)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}j++}}function Q1(e,i,s){var l=s;return Up(e,function(h,p,f,y,v){l=i(l,h,p,f,y,v)}),l}function eb(e,i){Up(e,function(s,l,h,p,f){var y=s===null?null:s.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return i(yl(s,h,{bbox:p,id:f}),l,0)===!1?!1:void 0}var v;switch(y){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon";break}for(var C=0;C<s.coordinates.length;C++){var M=s.coordinates[C],P={type:v,coordinates:M};if(i(yl(P,h),l,C)===!1)return!1}})}function tb(e,i){eb(e,function(s,l,h){var p=0;if(s.geometry){var f=s.geometry.type;if(!(f==="Point"||f==="MultiPoint")){var y,v=0,C=0,M=0;if(jp(s,function(P,j,J,R,Z){if(y===void 0||l>v||R>C||Z>M){y=P,v=l,C=R,M=Z,p=0;return}var q=Qo([y,P],s.properties);if(i(q,l,h,Z,p)===!1)return!1;p++,y=P})===!1)return!1}}})}function nb(e,i,s){var l=s,h=!1;return tb(e,function(p,f,y,v,C){h===!1&&s===void 0?l=p:l=i(l,p,f,y,v,C),h=!0}),l}function Pd(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Mc(e,i,s){s===void 0&&(s={});var l=Pd(e),h=Pd(i),p=Wa(h[1]-l[1]),f=Wa(h[0]-l[0]),y=Wa(l[1]),v=Wa(h[1]),C=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(f/2),2)*Math.cos(y)*Math.cos(v);return Y1(2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C)),s.units)}var Sd=6378137;function Pc(e){return Q1(e,function(i,s){return i+ib(s)},0)}function ib(e){var i=0,s;switch(e.type){case"Polygon":return Bd(e.coordinates);case"MultiPolygon":for(s=0;s<e.coordinates.length;s++)i+=Bd(e.coordinates[s]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Bd(e){var i=0;if(e&&e.length>0){i+=Math.abs(Ad(e[0]));for(var s=1;s<e.length;s++)i-=Math.abs(Ad(e[s]))}return i}function Ad(e){var i,s,l,h,p,f,y,v=0,C=e.length;if(C>2){for(y=0;y<C;y++)y===C-2?(h=C-2,p=C-1,f=0):y===C-1?(h=C-1,p=0,f=1):(h=y,p=y+1,f=y+2),i=e[h],s=e[p],l=e[f],v+=(nc(l[0])-nc(i[0]))*Math.sin(nc(s[1]));v=v*Sd*Sd/2}return v}function nc(e){return e*Math.PI/180}function vl(e,i){return i===void 0&&(i={}),nb(e,function(s,l){var h=l.geometry.coordinates;return s+Mc(h[0],h[1],i)},0)}const rb={class:"drawing-tools"},sb={class:"mb-4"},ob={class:"grid grid-cols-2 gap-2"},ab=["onClick"],lb={class:"text-sm"},ub={key:0,class:"space-y-2"},cb={class:"border rounded overflow-hidden"},hb={class:"p-3 space-y-3"},db={class:"grid grid-cols-6 gap-2"},fb=["onClick"],pb={class:"space-y-2"},mb={class:"flex items-center gap-2"},gb={class:"flex items-center gap-2"},_b=["value"],yb={key:0,class:"flex items-center gap-2"},vb=Kn({__name:"DrawingTools",props:{currentTool:{},selectedShape:{}},emits:["tool-change","style-update","delete-shape"],setup(e,{emit:i}){const s=e,l=i,h=[{type:"Circle",label:"Cercle"},{type:"Semicircle",label:"Demi-cercle"},{type:"Rectangle",label:"Rectangle"},{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Text",label:"Texte"},{type:"delete",label:"Supprimer"}],p=["#2563EB","#DC2626","#059669","#D97706","#7C3AED","#DB2777"],f=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillé"},{value:"dashdot",label:"Tiret-point"}],y=qe("#3B82F6"),v=qe(.2),C=qe("#2563EB");qe(1);const M=qe(2),P=qe("solid"),j=qe({style:!1}),J=kt(()=>{var ie,V;return(V=(ie=s.selectedShape)==null?void 0:ie.properties)!=null&&V.type?["Circle","Rectangle","Polygon"].includes(s.selectedShape.properties.type):!1}),R=ie=>{j.value[ie]=!j.value[ie]},Z=ie=>{switch(ie){case"dashed":return"10,10";case"dotted":return"2,5";case"dashdot":return"10,5,2,5";default:return""}},q=ie=>{C.value=ie,J.value&&(y.value=ie),xe({strokeColor:ie,fillColor:J.value?ie:void 0})},xe=ie=>{const V={...ie};ie.strokeStyle&&(V.dashArray=Z(ie.strokeStyle)),ie.fillOpacity!==void 0&&(V.fillOpacity=parseFloat(ie.fillOpacity)),ie.strokeOpacity!==void 0&&(V.strokeOpacity=parseFloat(ie.strokeOpacity)),ie.strokeWidth!==void 0&&(V.weight=parseInt(ie.strokeWidth)),ie.strokeColor&&(V.color=ie.strokeColor),l("style-update",V)};return(ie,V)=>(_e(),we("div",rb,[w("div",sb,[w("div",ob,[(_e(!0),we(Lt,null,Ot(h.filter(le=>le.type!=="delete"),le=>(_e(),we("button",{key:le.type,class:$n(["flex items-center justify-center p-2 rounded border",{"bg-blue-50 border-blue-200":ie.currentTool===le.type,"hover:bg-gray-50 border-gray-200":ie.currentTool!==le.type}]),onClick:Oe=>ie.$emit("tool-change",le.type)},[w("span",lb,Ge(le.label),1)],10,ab))),128))]),ie.selectedShape?(_e(),we("button",{key:0,class:$n(["w-full mt-2 flex items-center justify-center p-2 rounded border border-red-500 bg-red-50 hover:bg-red-100 text-red-700 transition-colors duration-200",{"bg-red-100 border-red-600":ie.currentTool==="delete"}]),onClick:V[0]||(V[0]=le=>ie.$emit("delete-shape"))},V[12]||(V[12]=[w("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),w("span",{class:"text-sm font-medium"},"Supprimer la forme",-1)]),2)):dt("",!0)]),ie.selectedShape?(_e(),we("div",ub,[w("div",cb,[w("button",{class:"w-full px-3 py-2 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:V[1]||(V[1]=le=>R("style"))},[V[14]||(V[14]=w("span",{class:"font-medium"},"Style",-1)),(_e(),we("svg",{class:$n(["w-5 h-5 transform transition-transform",{"rotate-180":!j.value.style}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},V[13]||(V[13]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Bt(w("div",hb,[w("div",db,[(_e(),we(Lt,null,Ot(p,le=>w("button",{key:le,class:"w-6 h-6 rounded-full border hover:scale-110 transition-transform",style:kl({backgroundColor:le}),onClick:Oe=>q(le)},null,12,fb)),64))]),w("div",pb,[w("div",mb,[V[15]||(V[15]=w("span",{class:"text-xs text-gray-500"},"Contour",-1)),Bt(w("input",{type:"color","onUpdate:modelValue":V[2]||(V[2]=le=>C.value=le),class:"w-6 h-6",onChange:V[3]||(V[3]=le=>xe({strokeColor:C.value})),title:"Couleur du contour"},null,544),[[en,C.value]]),Bt(w("input",{type:"range","onUpdate:modelValue":V[4]||(V[4]=le=>M.value=le),min:"1",max:"10",class:"flex-1",onChange:V[5]||(V[5]=le=>xe({strokeWidth:M.value})),title:"Épaisseur du contour"},null,544),[[en,M.value]])]),w("div",gb,[V[16]||(V[16]=w("span",{class:"text-xs text-gray-500"},"Style",-1)),Bt(w("select",{"onUpdate:modelValue":V[6]||(V[6]=le=>P.value=le),class:"flex-1 text-sm border rounded px-1 py-0.5",onChange:V[7]||(V[7]=le=>xe({strokeStyle:P.value}))},[(_e(),we(Lt,null,Ot(f,le=>w("option",{key:le.value,value:le.value},Ge(le.label),9,_b)),64))],544),[[Qn,P.value]])]),J.value?(_e(),we("div",yb,[V[17]||(V[17]=w("span",{class:"text-xs text-gray-500"},"Remplissage",-1)),Bt(w("input",{type:"color","onUpdate:modelValue":V[8]||(V[8]=le=>y.value=le),class:"w-6 h-6",onChange:V[9]||(V[9]=le=>xe({fillColor:y.value})),title:"Couleur de remplissage"},null,544),[[en,y.value]]),Bt(w("input",{type:"range","onUpdate:modelValue":V[10]||(V[10]=le=>v.value=le),min:"0",max:"1",step:"0.1",class:"flex-1",onChange:V[11]||(V[11]=le=>xe({fillOpacity:v.value})),title:"Opacité du remplissage"},null,544),[[en,v.value]])])):dt("",!0)])],512),[[Cg,!j.value.style]])])])):dt("",!0)]))}}),bb=zp(vb,[["__scopeId","data-v-2fd4924b"]]);(()=>{var lh,uh;var e=Object.create,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,h=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),y=(n,r,a,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let d of l(r))!p.call(n,d)&&d!==a&&i(n,d,{get:()=>r[d],enumerable:!(u=s(r,d))||u.enumerable});return n},v=(n,r,a)=>(a=n!=null?e(h(n)):{},y(r||!n||!n.__esModule?i(a,"default",{value:n,enumerable:!0}):a,n)),C=f((n,r)=>{function a(){this.__data__=[],this.size=0}r.exports=a}),M=f((n,r)=>{function a(u,d){return u===d||u!==u&&d!==d}r.exports=a}),P=f((n,r)=>{var a=M();function u(d,g){for(var _=d.length;_--;)if(a(d[_][0],g))return _;return-1}r.exports=u}),j=f((n,r)=>{var a=P(),u=Array.prototype,d=u.splice;function g(_){var b=this.__data__,k=a(b,_);if(k<0)return!1;var S=b.length-1;return k==S?b.pop():d.call(b,k,1),--this.size,!0}r.exports=g}),J=f((n,r)=>{var a=P();function u(d){var g=this.__data__,_=a(g,d);return _<0?void 0:g[_][1]}r.exports=u}),R=f((n,r)=>{var a=P();function u(d){return a(this.__data__,d)>-1}r.exports=u}),Z=f((n,r)=>{var a=P();function u(d,g){var _=this.__data__,b=a(_,d);return b<0?(++this.size,_.push([d,g])):_[b][1]=g,this}r.exports=u}),q=f((n,r)=>{var a=C(),u=j(),d=J(),g=R(),_=Z();function b(k){var S=-1,G=k==null?0:k.length;for(this.clear();++S<G;){var N=k[S];this.set(N[0],N[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),xe=f((n,r)=>{var a=q();function u(){this.__data__=new a,this.size=0}r.exports=u}),ie=f((n,r)=>{function a(u){var d=this.__data__,g=d.delete(u);return this.size=d.size,g}r.exports=a}),V=f((n,r)=>{function a(u){return this.__data__.get(u)}r.exports=a}),le=f((n,r)=>{function a(u){return this.__data__.has(u)}r.exports=a}),Oe=f((n,r)=>{var a=typeof ir=="object"&&ir&&ir.Object===Object&&ir;r.exports=a}),Ee=f((n,r)=>{var a=Oe(),u=typeof self=="object"&&self&&self.Object===Object&&self,d=a||u||Function("return this")();r.exports=d}),Pe=f((n,r)=>{var a=Ee(),u=a.Symbol;r.exports=u}),F=f((n,r)=>{var a=Pe(),u=Object.prototype,d=u.hasOwnProperty,g=u.toString,_=a?a.toStringTag:void 0;function b(k){var S=d.call(k,_),G=k[_];try{k[_]=void 0;var N=!0}catch{}var ge=g.call(k);return N&&(S?k[_]=G:delete k[_]),ge}r.exports=b}),te=f((n,r)=>{var a=Object.prototype,u=a.toString;function d(g){return u.call(g)}r.exports=d}),ye=f((n,r)=>{var a=Pe(),u=F(),d=te(),g="[object Null]",_="[object Undefined]",b=a?a.toStringTag:void 0;function k(S){return S==null?S===void 0?_:g:b&&b in Object(S)?u(S):d(S)}r.exports=k}),ne=f((n,r)=>{function a(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}r.exports=a}),Be=f((n,r)=>{var a=ye(),u=ne(),d="[object AsyncFunction]",g="[object Function]",_="[object GeneratorFunction]",b="[object Proxy]";function k(S){if(!u(S))return!1;var G=a(S);return G==g||G==_||G==d||G==b}r.exports=k}),Fe=f((n,r)=>{var a=Ee(),u=a["__core-js_shared__"];r.exports=u}),re=f((n,r)=>{var a=Fe(),u=function(){var g=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}();function d(g){return!!u&&u in g}r.exports=d}),Se=f((n,r)=>{var a=Function.prototype,u=a.toString;function d(g){if(g!=null){try{return u.call(g)}catch{}try{return g+""}catch{}}return""}r.exports=d}),Ae=f((n,r)=>{var a=Be(),u=re(),d=ne(),g=Se(),_=/[\\^$.*+?()[\]{}|]/g,b=/^\[object .+?Constructor\]$/,k=Function.prototype,S=Object.prototype,G=k.toString,N=S.hasOwnProperty,ge=RegExp("^"+G.call(N).replace(_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ce(Ue){if(!d(Ue)||u(Ue))return!1;var Qe=a(Ue)?ge:b;return Qe.test(g(Ue))}r.exports=Ce}),ve=f((n,r)=>{function a(u,d){return u==null?void 0:u[d]}r.exports=a}),H=f((n,r)=>{var a=Ae(),u=ve();function d(g,_){var b=u(g,_);return a(b)?b:void 0}r.exports=d}),ee=f((n,r)=>{var a=H(),u=Ee(),d=a(u,"Map");r.exports=d}),se=f((n,r)=>{var a=H(),u=a(Object,"create");r.exports=u}),He=f((n,r)=>{var a=se();function u(){this.__data__=a?a(null):{},this.size=0}r.exports=u}),Ye=f((n,r)=>{function a(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}r.exports=a}),Ke=f((n,r)=>{var a=se(),u="__lodash_hash_undefined__",d=Object.prototype,g=d.hasOwnProperty;function _(b){var k=this.__data__;if(a){var S=k[b];return S===u?void 0:S}return g.call(k,b)?k[b]:void 0}r.exports=_}),Je=f((n,r)=>{var a=se(),u=Object.prototype,d=u.hasOwnProperty;function g(_){var b=this.__data__;return a?b[_]!==void 0:d.call(b,_)}r.exports=g}),nt=f((n,r)=>{var a=se(),u="__lodash_hash_undefined__";function d(g,_){var b=this.__data__;return this.size+=this.has(g)?0:1,b[g]=a&&_===void 0?u:_,this}r.exports=d}),Xe=f((n,r)=>{var a=He(),u=Ye(),d=Ke(),g=Je(),_=nt();function b(k){var S=-1,G=k==null?0:k.length;for(this.clear();++S<G;){var N=k[S];this.set(N[0],N[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),Le=f((n,r)=>{var a=Xe(),u=q(),d=ee();function g(){this.size=0,this.__data__={hash:new a,map:new(d||u),string:new a}}r.exports=g}),Ze=f((n,r)=>{function a(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}r.exports=a}),Ve=f((n,r)=>{var a=Ze();function u(d,g){var _=d.__data__;return a(g)?_[typeof g=="string"?"string":"hash"]:_.map}r.exports=u}),it=f((n,r)=>{var a=Ve();function u(d){var g=a(this,d).delete(d);return this.size-=g?1:0,g}r.exports=u}),Et=f((n,r)=>{var a=Ve();function u(d){return a(this,d).get(d)}r.exports=u}),U=f((n,r)=>{var a=Ve();function u(d){return a(this,d).has(d)}r.exports=u}),K=f((n,r)=>{var a=Ve();function u(d,g){var _=a(this,d),b=_.size;return _.set(d,g),this.size+=_.size==b?0:1,this}r.exports=u}),ce=f((n,r)=>{var a=Le(),u=it(),d=Et(),g=U(),_=K();function b(k){var S=-1,G=k==null?0:k.length;for(this.clear();++S<G;){var N=k[S];this.set(N[0],N[1])}}b.prototype.clear=a,b.prototype.delete=u,b.prototype.get=d,b.prototype.has=g,b.prototype.set=_,r.exports=b}),Re=f((n,r)=>{var a=q(),u=ee(),d=ce(),g=200;function _(b,k){var S=this.__data__;if(S instanceof a){var G=S.__data__;if(!u||G.length<g-1)return G.push([b,k]),this.size=++S.size,this;S=this.__data__=new d(G)}return S.set(b,k),this.size=S.size,this}r.exports=_}),de=f((n,r)=>{var a=q(),u=xe(),d=ie(),g=V(),_=le(),b=Re();function k(S){var G=this.__data__=new a(S);this.size=G.size}k.prototype.clear=u,k.prototype.delete=d,k.prototype.get=g,k.prototype.has=_,k.prototype.set=b,r.exports=k}),z=f((n,r)=>{var a=H(),u=function(){try{var d=a(Object,"defineProperty");return d({},"",{}),d}catch{}}();r.exports=u}),De=f((n,r)=>{var a=z();function u(d,g,_){g=="__proto__"&&a?a(d,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[g]=_}r.exports=u}),Ie=f((n,r)=>{var a=De(),u=M();function d(g,_,b){(b!==void 0&&!u(g[_],b)||b===void 0&&!(_ in g))&&a(g,_,b)}r.exports=d}),je=f((n,r)=>{function a(u){return function(d,g,_){for(var b=-1,k=Object(d),S=_(d),G=S.length;G--;){var N=S[u?G:++b];if(g(k[N],N,k)===!1)break}return d}}r.exports=a}),he=f((n,r)=>{var a=je(),u=a();r.exports=u}),We=f((n,r)=>{var a=Ee(),u=typeof n=="object"&&n&&!n.nodeType&&n,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g?a.Buffer:void 0,b=_?_.allocUnsafe:void 0;function k(S,G){if(G)return S.slice();var N=S.length,ge=b?b(N):new S.constructor(N);return S.copy(ge),ge}r.exports=k}),ze=f((n,r)=>{var a=Ee(),u=a.Uint8Array;r.exports=u}),ot=f((n,r)=>{var a=ze();function u(d){var g=new d.constructor(d.byteLength);return new a(g).set(new a(d)),g}r.exports=u}),ct=f((n,r)=>{var a=ot();function u(d,g){var _=g?a(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}r.exports=u}),_t=f((n,r)=>{function a(u,d){var g=-1,_=u.length;for(d||(d=Array(_));++g<_;)d[g]=u[g];return d}r.exports=a}),Tt=f((n,r)=>{var a=ne(),u=Object.create,d=function(){function g(){}return function(_){if(!a(_))return{};if(u)return u(_);g.prototype=_;var b=new g;return g.prototype=void 0,b}}();r.exports=d}),Pt=f((n,r)=>{function a(u,d){return function(g){return u(d(g))}}r.exports=a}),Kt=f((n,r)=>{var a=Pt(),u=a(Object.getPrototypeOf,Object);r.exports=u}),Xt=f((n,r)=>{var a=Object.prototype;function u(d){var g=d&&d.constructor,_=typeof g=="function"&&g.prototype||a;return d===_}r.exports=u}),An=f((n,r)=>{var a=Tt(),u=Kt(),d=Xt();function g(_){return typeof _.constructor=="function"&&!d(_)?a(u(_)):{}}r.exports=g}),cn=f((n,r)=>{function a(u){return u!=null&&typeof u=="object"}r.exports=a}),Ci=f((n,r)=>{var a=ye(),u=cn(),d="[object Arguments]";function g(_){return u(_)&&a(_)==d}r.exports=g}),zi=f((n,r)=>{var a=Ci(),u=cn(),d=Object.prototype,g=d.hasOwnProperty,_=d.propertyIsEnumerable,b=a(function(){return arguments}())?a:function(k){return u(k)&&g.call(k,"callee")&&!_.call(k,"callee")};r.exports=b}),tn=f((n,r)=>{var a=Array.isArray;r.exports=a}),Tn=f((n,r)=>{var a=9007199254740991;function u(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=a}r.exports=u}),ii=f((n,r)=>{var a=Be(),u=Tn();function d(g){return g!=null&&u(g.length)&&!a(g)}r.exports=d}),Vl=f((n,r)=>{var a=ii(),u=cn();function d(g){return u(g)&&a(g)}r.exports=d}),Hl=f((n,r)=>{function a(){return!1}r.exports=a}),Ks=f((n,r)=>{var a=Ee(),u=Hl(),d=typeof n=="object"&&n&&!n.nodeType&&n,g=d&&typeof r=="object"&&r&&!r.nodeType&&r,_=g&&g.exports===d,b=_?a.Buffer:void 0,k=b?b.isBuffer:void 0,S=k||u;r.exports=S}),sa=f((n,r)=>{var a=ye(),u=Kt(),d=cn(),g="[object Object]",_=Function.prototype,b=Object.prototype,k=_.toString,S=b.hasOwnProperty,G=k.call(Object);function N(ge){if(!d(ge)||a(ge)!=g)return!1;var Ce=u(ge);if(Ce===null)return!0;var Ue=S.call(Ce,"constructor")&&Ce.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&k.call(Ue)==G}r.exports=N}),oa=f((n,r)=>{var a=ye(),u=Tn(),d=cn(),g="[object Arguments]",_="[object Array]",b="[object Boolean]",k="[object Date]",S="[object Error]",G="[object Function]",N="[object Map]",ge="[object Number]",Ce="[object Object]",Ue="[object RegExp]",Qe="[object Set]",st="[object String]",At="[object WeakMap]",$="[object ArrayBuffer]",X="[object DataView]",ae="[object Float32Array]",ke="[object Float64Array]",ue="[object Int8Array]",be="[object Int16Array]",E="[object Int32Array]",A="[object Uint8Array]",D="[object Uint8ClampedArray]",T="[object Uint16Array]",O="[object Uint32Array]",I={};I[ae]=I[ke]=I[ue]=I[be]=I[E]=I[A]=I[D]=I[T]=I[O]=!0,I[g]=I[_]=I[$]=I[b]=I[X]=I[k]=I[S]=I[G]=I[N]=I[ge]=I[Ce]=I[Ue]=I[Qe]=I[st]=I[At]=!1;function Q(Y){return d(Y)&&u(Y.length)&&!!I[a(Y)]}r.exports=Q}),Zl=f((n,r)=>{function a(u){return function(d){return u(d)}}r.exports=a}),ql=f((n,r)=>{var a=Oe(),u=typeof n=="object"&&n&&!n.nodeType&&n,d=u&&typeof r=="object"&&r&&!r.nodeType&&r,g=d&&d.exports===u,_=g&&a.process,b=function(){try{var k=d&&d.require&&d.require("util").types;return k||_&&_.binding&&_.binding("util")}catch{}}();r.exports=b}),aa=f((n,r)=>{var a=oa(),u=Zl(),d=ql(),g=d&&d.isTypedArray,_=g?u(g):a;r.exports=_}),la=f((n,r)=>{function a(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}r.exports=a}),Kl=f((n,r)=>{var a=De(),u=M(),d=Object.prototype,g=d.hasOwnProperty;function _(b,k,S){var G=b[k];(!(g.call(b,k)&&u(G,S))||S===void 0&&!(k in b))&&a(b,k,S)}r.exports=_}),Wl=f((n,r)=>{var a=Kl(),u=De();function d(g,_,b,k){var S=!b;b||(b={});for(var G=-1,N=_.length;++G<N;){var ge=_[G],Ce=k?k(b[ge],g[ge],ge,b,g):void 0;Ce===void 0&&(Ce=g[ge]),S?u(b,ge,Ce):a(b,ge,Ce)}return b}r.exports=d}),Ws=f((n,r)=>{function a(u,d){for(var g=-1,_=Array(u);++g<u;)_[g]=d(g);return _}r.exports=a}),ua=f((n,r)=>{var a=9007199254740991,u=/^(?:0|[1-9]\d*)$/;function d(g,_){var b=typeof g;return _=_??a,!!_&&(b=="number"||b!="symbol"&&u.test(g))&&g>-1&&g%1==0&&g<_}r.exports=d}),Jl=f((n,r)=>{var a=Ws(),u=zi(),d=tn(),g=Ks(),_=ua(),b=aa(),k=Object.prototype,S=k.hasOwnProperty;function G(N,ge){var Ce=d(N),Ue=!Ce&&u(N),Qe=!Ce&&!Ue&&g(N),st=!Ce&&!Ue&&!Qe&&b(N),At=Ce||Ue||Qe||st,$=At?a(N.length,String):[],X=$.length;for(var ae in N)(ge||S.call(N,ae))&&!(At&&(ae=="length"||Qe&&(ae=="offset"||ae=="parent")||st&&(ae=="buffer"||ae=="byteLength"||ae=="byteOffset")||_(ae,X)))&&$.push(ae);return $}r.exports=G}),Xl=f((n,r)=>{function a(u){var d=[];if(u!=null)for(var g in Object(u))d.push(g);return d}r.exports=a}),Yl=f((n,r)=>{var a=ne(),u=Xt(),d=Xl(),g=Object.prototype,_=g.hasOwnProperty;function b(k){if(!a(k))return d(k);var S=u(k),G=[];for(var N in k)N=="constructor"&&(S||!_.call(k,N))||G.push(N);return G}r.exports=b}),Wn=f((n,r)=>{var a=Jl(),u=Yl(),d=ii();function g(_){return d(_)?a(_,!0):u(_)}r.exports=g}),ut=f((n,r)=>{var a=Wl(),u=Wn();function d(g){return a(g,u(g))}r.exports=d}),ca=f((n,r)=>{var a=Ie(),u=We(),d=ct(),g=_t(),_=An(),b=zi(),k=tn(),S=Vl(),G=Ks(),N=Be(),ge=ne(),Ce=sa(),Ue=aa(),Qe=la(),st=ut();function At($,X,ae,ke,ue,be,E){var A=Qe($,ae),D=Qe(X,ae),T=E.get(D);if(T){a($,ae,T);return}var O=be?be(A,D,ae+"",$,X,E):void 0,I=O===void 0;if(I){var Q=k(D),Y=!Q&&G(D),oe=!Q&&!Y&&Ue(D);O=D,Q||Y||oe?k(A)?O=A:S(A)?O=g(A):Y?(I=!1,O=u(D,!0)):oe?(I=!1,O=d(D,!0)):O=[]:Ce(D)||b(D)?(O=A,b(A)?O=st(A):(!ge(A)||N(A))&&(O=_(D))):I=!1}I&&(E.set(D,O),ue(O,D,ke,be,E),E.delete(D)),a($,ae,O)}r.exports=At}),ha=f((n,r)=>{var a=de(),u=Ie(),d=he(),g=ca(),_=ne(),b=Wn(),k=la();function S(G,N,ge,Ce,Ue){G!==N&&d(N,function(Qe,st){if(Ue||(Ue=new a),_(Qe))g(G,N,st,ge,S,Ce,Ue);else{var At=Ce?Ce(k(G,st),Qe,st+"",G,N,Ue):void 0;At===void 0&&(At=Qe),u(G,st,At)}},b)}r.exports=S}),Js=f((n,r)=>{function a(u){return u}r.exports=a}),da=f((n,r)=>{function a(u,d,g){switch(g.length){case 0:return u.call(d);case 1:return u.call(d,g[0]);case 2:return u.call(d,g[0],g[1]);case 3:return u.call(d,g[0],g[1],g[2])}return u.apply(d,g)}r.exports=a}),Xs=f((n,r)=>{var a=da(),u=Math.max;function d(g,_,b){return _=u(_===void 0?g.length-1:_,0),function(){for(var k=arguments,S=-1,G=u(k.length-_,0),N=Array(G);++S<G;)N[S]=k[_+S];S=-1;for(var ge=Array(_+1);++S<_;)ge[S]=k[S];return ge[_]=b(N),a(g,this,ge)}}r.exports=d}),fa=f((n,r)=>{function a(u){return function(){return u}}r.exports=a}),ar=f((n,r)=>{var a=fa(),u=z(),d=Js(),g=u?function(_,b){return u(_,"toString",{configurable:!0,enumerable:!1,value:a(b),writable:!0})}:d;r.exports=g}),pa=f((n,r)=>{var a=800,u=16,d=Date.now;function g(_){var b=0,k=0;return function(){var S=d(),G=u-(S-k);if(k=S,G>0){if(++b>=a)return arguments[0]}else b=0;return _.apply(void 0,arguments)}}r.exports=g}),Ql=f((n,r)=>{var a=ar(),u=pa(),d=u(a);r.exports=d}),eu=f((n,r)=>{var a=Js(),u=Xs(),d=Ql();function g(_,b){return d(u(_,b,a),_+"")}r.exports=g}),tu=f((n,r)=>{var a=M(),u=ii(),d=ua(),g=ne();function _(b,k,S){if(!g(S))return!1;var G=typeof k;return(G=="number"?u(S)&&d(k,S.length):G=="string"&&k in S)?a(S[k],b):!1}r.exports=_}),nu=f((n,r)=>{var a=eu(),u=tu();function d(g){return a(function(_,b){var k=-1,S=b.length,G=S>1?b[S-1]:void 0,N=S>2?b[2]:void 0;for(G=g.length>3&&typeof G=="function"?(S--,G):void 0,N&&u(b[0],b[1],N)&&(G=S<3?void 0:G,S=1),_=Object(_);++k<S;){var ge=b[k];ge&&g(_,ge,k,G)}return _})}r.exports=d}),ns=f((n,r)=>{var a=ha(),u=nu(),d=u(function(g,_,b){a(g,_,b)});r.exports=d}),Ys=f((n,r)=>{var a=ye(),u=cn(),d="[object Symbol]";function g(_){return typeof _=="symbol"||u(_)&&a(_)==d}r.exports=g}),is=f((n,r)=>{var a=tn(),u=Ys(),d=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;function _(b,k){if(a(b))return!1;var S=typeof b;return S=="number"||S=="symbol"||S=="boolean"||b==null||u(b)?!0:g.test(b)||!d.test(b)||k!=null&&b in Object(k)}r.exports=_}),iu=f((n,r)=>{var a=ce(),u="Expected a function";function d(g,_){if(typeof g!="function"||_!=null&&typeof _!="function")throw new TypeError(u);var b=function(){var k=arguments,S=_?_.apply(this,k):k[0],G=b.cache;if(G.has(S))return G.get(S);var N=g.apply(this,k);return b.cache=G.set(S,N)||G,N};return b.cache=new(d.Cache||a),b}d.Cache=a,r.exports=d}),ru=f((n,r)=>{var a=iu(),u=500;function d(g){var _=a(g,function(k){return b.size===u&&b.clear(),k}),b=_.cache;return _}r.exports=d}),su=f((n,r)=>{var a=ru(),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,g=a(function(_){var b=[];return _.charCodeAt(0)===46&&b.push(""),_.replace(u,function(k,S,G,N){b.push(G?N.replace(d,"$1"):S||k)}),b});r.exports=g}),ou=f((n,r)=>{function a(u,d){for(var g=-1,_=u==null?0:u.length,b=Array(_);++g<_;)b[g]=d(u[g],g,u);return b}r.exports=a}),au=f((n,r)=>{var a=Pe(),u=ou(),d=tn(),g=Ys(),_=a?a.prototype:void 0,b=_?_.toString:void 0;function k(S){if(typeof S=="string")return S;if(d(S))return u(S,k)+"";if(g(S))return b?b.call(S):"";var G=S+"";return G=="0"&&1/S==-1/0?"-0":G}r.exports=k}),Qs=f((n,r)=>{var a=au();function u(d){return d==null?"":a(d)}r.exports=u}),Pr=f((n,r)=>{var a=tn(),u=is(),d=su(),g=Qs();function _(b,k){return a(b)?b:u(b,k)?[b]:d(g(b))}r.exports=_}),ma=f((n,r)=>{var a=Ys();function u(d){if(typeof d=="string"||a(d))return d;var g=d+"";return g=="0"&&1/d==-1/0?"-0":g}r.exports=u}),ga=f((n,r)=>{var a=Pr(),u=ma();function d(g,_){_=a(_,g);for(var b=0,k=_.length;g!=null&&b<k;)g=g[u(_[b++])];return b&&b==k?g:void 0}r.exports=d}),ki=f((n,r)=>{var a=ga();function u(d,g,_){var b=d==null?void 0:a(d,g);return b===void 0?_:b}r.exports=u}),Dt=f((n,r)=>{(function(a,u){typeof n=="object"&&typeof r<"u"?r.exports=u():(a=a||self).RBush=u()})(n,function(){function a($,X,ae,ke,ue){(function be(E,A,D,T,O){for(;T>D;){if(T-D>600){var I=T-D+1,Q=A-D+1,Y=Math.log(I),oe=.5*Math.exp(2*Y/3),me=.5*Math.sqrt(Y*oe*(I-oe)/I)*(Q-I/2<0?-1:1),pe=Math.max(D,Math.floor(A-Q*oe/I+me)),Ne=Math.min(T,Math.floor(A+(I-Q)*oe/I+me));be(E,A,pe,Ne,O)}var rt=E[A],at=D,ht=T;for(u(E,D,A),O(E[T],rt)>0&&u(E,D,T);at<ht;){for(u(E,at,ht),at++,ht--;O(E[at],rt)<0;)at++;for(;O(E[ht],rt)>0;)ht--}O(E[D],rt)===0?u(E,D,ht):u(E,++ht,T),ht<=A&&(D=ht+1),A<=ht&&(T=ht-1)}})($,X,ae||0,ke||$.length-1,ue||d)}function u($,X,ae){var ke=$[X];$[X]=$[ae],$[ae]=ke}function d($,X){return $<X?-1:$>X?1:0}var g=function($){$===void 0&&($=9),this._maxEntries=Math.max(4,$),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function _($,X,ae){if(!ae)return X.indexOf($);for(var ke=0;ke<X.length;ke++)if(ae($,X[ke]))return ke;return-1}function b($,X){k($,0,$.children.length,X,$)}function k($,X,ae,ke,ue){ue||(ue=st(null)),ue.minX=1/0,ue.minY=1/0,ue.maxX=-1/0,ue.maxY=-1/0;for(var be=X;be<ae;be++){var E=$.children[be];S(ue,$.leaf?ke(E):E)}return ue}function S($,X){return $.minX=Math.min($.minX,X.minX),$.minY=Math.min($.minY,X.minY),$.maxX=Math.max($.maxX,X.maxX),$.maxY=Math.max($.maxY,X.maxY),$}function G($,X){return $.minX-X.minX}function N($,X){return $.minY-X.minY}function ge($){return($.maxX-$.minX)*($.maxY-$.minY)}function Ce($){return $.maxX-$.minX+($.maxY-$.minY)}function Ue($,X){return $.minX<=X.minX&&$.minY<=X.minY&&X.maxX<=$.maxX&&X.maxY<=$.maxY}function Qe($,X){return X.minX<=$.maxX&&X.minY<=$.maxY&&X.maxX>=$.minX&&X.maxY>=$.minY}function st($){return{children:$,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function At($,X,ae,ke,ue){for(var be=[X,ae];be.length;)if(!((ae=be.pop())-(X=be.pop())<=ke)){var E=X+Math.ceil((ae-X)/ke/2)*ke;a($,E,X,ae,ue),be.push(X,E,E,ae)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function($){var X=this.data,ae=[];if(!Qe($,X))return ae;for(var ke=this.toBBox,ue=[];X;){for(var be=0;be<X.children.length;be++){var E=X.children[be],A=X.leaf?ke(E):E;Qe($,A)&&(X.leaf?ae.push(E):Ue($,A)?this._all(E,ae):ue.push(E))}X=ue.pop()}return ae},g.prototype.collides=function($){var X=this.data;if(!Qe($,X))return!1;for(var ae=[];X;){for(var ke=0;ke<X.children.length;ke++){var ue=X.children[ke],be=X.leaf?this.toBBox(ue):ue;if(Qe($,be)){if(X.leaf||Ue($,be))return!0;ae.push(ue)}}X=ae.pop()}return!1},g.prototype.load=function($){if(!$||!$.length)return this;if($.length<this._minEntries){for(var X=0;X<$.length;X++)this.insert($[X]);return this}var ae=this._build($.slice(),0,$.length-1,0);if(this.data.children.length)if(this.data.height===ae.height)this._splitRoot(this.data,ae);else{if(this.data.height<ae.height){var ke=this.data;this.data=ae,ae=ke}this._insert(ae,this.data.height-ae.height-1,!0)}else this.data=ae;return this},g.prototype.insert=function($){return $&&this._insert($,this.data.height-1),this},g.prototype.clear=function(){return this.data=st([]),this},g.prototype.remove=function($,X){if(!$)return this;for(var ae,ke,ue,be=this.data,E=this.toBBox($),A=[],D=[];be||A.length;){if(be||(be=A.pop(),ke=A[A.length-1],ae=D.pop(),ue=!0),be.leaf){var T=_($,be.children,X);if(T!==-1)return be.children.splice(T,1),A.push(be),this._condense(A),this}ue||be.leaf||!Ue(be,E)?ke?(ae++,be=ke.children[ae],ue=!1):be=null:(A.push(be),D.push(ae),ae=0,ke=be,be=be.children[0])}return this},g.prototype.toBBox=function($){return $},g.prototype.compareMinX=function($,X){return $.minX-X.minX},g.prototype.compareMinY=function($,X){return $.minY-X.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function($){return this.data=$,this},g.prototype._all=function($,X){for(var ae=[];$;)$.leaf?X.push.apply(X,$.children):ae.push.apply(ae,$.children),$=ae.pop();return X},g.prototype._build=function($,X,ae,ke){var ue,be=ae-X+1,E=this._maxEntries;if(be<=E)return b(ue=st($.slice(X,ae+1)),this.toBBox),ue;ke||(ke=Math.ceil(Math.log(be)/Math.log(E)),E=Math.ceil(be/Math.pow(E,ke-1))),(ue=st([])).leaf=!1,ue.height=ke;var A=Math.ceil(be/E),D=A*Math.ceil(Math.sqrt(E));At($,X,ae,D,this.compareMinX);for(var T=X;T<=ae;T+=D){var O=Math.min(T+D-1,ae);At($,T,O,A,this.compareMinY);for(var I=T;I<=O;I+=A){var Q=Math.min(I+A-1,O);ue.children.push(this._build($,I,Q,ke-1))}}return b(ue,this.toBBox),ue},g.prototype._chooseSubtree=function($,X,ae,ke){for(;ke.push(X),!X.leaf&&ke.length-1!==ae;){for(var ue=1/0,be=1/0,E=void 0,A=0;A<X.children.length;A++){var D=X.children[A],T=ge(D),O=(I=$,Q=D,(Math.max(Q.maxX,I.maxX)-Math.min(Q.minX,I.minX))*(Math.max(Q.maxY,I.maxY)-Math.min(Q.minY,I.minY))-T);O<be?(be=O,ue=T<ue?T:ue,E=D):O===be&&T<ue&&(ue=T,E=D)}X=E||X.children[0]}var I,Q;return X},g.prototype._insert=function($,X,ae){var ke=ae?$:this.toBBox($),ue=[],be=this._chooseSubtree(ke,this.data,X,ue);for(be.children.push($),S(be,ke);X>=0&&ue[X].children.length>this._maxEntries;)this._split(ue,X),X--;this._adjustParentBBoxes(ke,ue,X)},g.prototype._split=function($,X){var ae=$[X],ke=ae.children.length,ue=this._minEntries;this._chooseSplitAxis(ae,ue,ke);var be=this._chooseSplitIndex(ae,ue,ke),E=st(ae.children.splice(be,ae.children.length-be));E.height=ae.height,E.leaf=ae.leaf,b(ae,this.toBBox),b(E,this.toBBox),X?$[X-1].children.push(E):this._splitRoot(ae,E)},g.prototype._splitRoot=function($,X){this.data=st([$,X]),this.data.height=$.height+1,this.data.leaf=!1,b(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function($,X,ae){for(var ke,ue,be,E,A,D,T,O=1/0,I=1/0,Q=X;Q<=ae-X;Q++){var Y=k($,0,Q,this.toBBox),oe=k($,Q,ae,this.toBBox),me=(ue=Y,be=oe,E=void 0,A=void 0,D=void 0,T=void 0,E=Math.max(ue.minX,be.minX),A=Math.max(ue.minY,be.minY),D=Math.min(ue.maxX,be.maxX),T=Math.min(ue.maxY,be.maxY),Math.max(0,D-E)*Math.max(0,T-A)),pe=ge(Y)+ge(oe);me<O?(O=me,ke=Q,I=pe<I?pe:I):me===O&&pe<I&&(I=pe,ke=Q)}return ke||ae-X},g.prototype._chooseSplitAxis=function($,X,ae){var ke=$.leaf?this.compareMinX:G,ue=$.leaf?this.compareMinY:N;this._allDistMargin($,X,ae,ke)<this._allDistMargin($,X,ae,ue)&&$.children.sort(ke)},g.prototype._allDistMargin=function($,X,ae,ke){$.children.sort(ke);for(var ue=this.toBBox,be=k($,0,X,ue),E=k($,ae-X,ae,ue),A=Ce(be)+Ce(E),D=X;D<ae-X;D++){var T=$.children[D];S(be,$.leaf?ue(T):T),A+=Ce(be)}for(var O=ae-X-1;O>=X;O--){var I=$.children[O];S(E,$.leaf?ue(I):I),A+=Ce(E)}return A},g.prototype._adjustParentBBoxes=function($,X,ae){for(var ke=ae;ke>=0;ke--)S(X[ke],$)},g.prototype._condense=function($){for(var X=$.length-1,ae=void 0;X>=0;X--)$[X].children.length===0?X>0?(ae=$[X-1].children).splice(ae.indexOf($[X]),1):this.clear():b($[X],this.toBBox)},g})}),Vt=f(n=>{Object.defineProperty(n,"__esModule",{value:!0}),n.earthRadius=63710088e-1,n.factors={centimeters:n.earthRadius*100,centimetres:n.earthRadius*100,degrees:n.earthRadius/111325,feet:n.earthRadius*3.28084,inches:n.earthRadius*39.37,kilometers:n.earthRadius/1e3,kilometres:n.earthRadius/1e3,meters:n.earthRadius,metres:n.earthRadius,miles:n.earthRadius/1609.344,millimeters:n.earthRadius*1e3,millimetres:n.earthRadius*1e3,nauticalmiles:n.earthRadius/1852,radians:1,yards:n.earthRadius*1.0936},n.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n.earthRadius,yards:1.0936133},n.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(T,O,I){I===void 0&&(I={});var Q={type:"Feature"};return(I.id===0||I.id)&&(Q.id=I.id),I.bbox&&(Q.bbox=I.bbox),Q.properties=O||{},Q.geometry=T,Q}n.feature=r;function a(T,O,I){switch(T){case"Point":return u(O).geometry;case"LineString":return b(O).geometry;case"Polygon":return g(O).geometry;case"MultiPoint":return N(O).geometry;case"MultiLineString":return G(O).geometry;case"MultiPolygon":return ge(O).geometry;default:throw new Error(T+" is invalid")}}n.geometry=a;function u(T,O,I){if(I===void 0&&(I={}),!T)throw new Error("coordinates is required");if(!Array.isArray(T))throw new Error("coordinates must be an Array");if(T.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!be(T[0])||!be(T[1]))throw new Error("coordinates must contain numbers");var Q={type:"Point",coordinates:T};return r(Q,O,I)}n.point=u;function d(T,O,I){return I===void 0&&(I={}),S(T.map(function(Q){return u(Q,O)}),I)}n.points=d;function g(T,O,I){I===void 0&&(I={});for(var Q=0,Y=T;Q<Y.length;Q++){var oe=Y[Q];if(oe.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var me=0;me<oe[oe.length-1].length;me++)if(oe[oe.length-1][me]!==oe[0][me])throw new Error("First and last Position are not equivalent.")}var pe={type:"Polygon",coordinates:T};return r(pe,O,I)}n.polygon=g;function _(T,O,I){return I===void 0&&(I={}),S(T.map(function(Q){return g(Q,O)}),I)}n.polygons=_;function b(T,O,I){if(I===void 0&&(I={}),T.length<2)throw new Error("coordinates must be an array of two or more positions");var Q={type:"LineString",coordinates:T};return r(Q,O,I)}n.lineString=b;function k(T,O,I){return I===void 0&&(I={}),S(T.map(function(Q){return b(Q,O)}),I)}n.lineStrings=k;function S(T,O){O===void 0&&(O={});var I={type:"FeatureCollection"};return O.id&&(I.id=O.id),O.bbox&&(I.bbox=O.bbox),I.features=T,I}n.featureCollection=S;function G(T,O,I){I===void 0&&(I={});var Q={type:"MultiLineString",coordinates:T};return r(Q,O,I)}n.multiLineString=G;function N(T,O,I){I===void 0&&(I={});var Q={type:"MultiPoint",coordinates:T};return r(Q,O,I)}n.multiPoint=N;function ge(T,O,I){I===void 0&&(I={});var Q={type:"MultiPolygon",coordinates:T};return r(Q,O,I)}n.multiPolygon=ge;function Ce(T,O,I){I===void 0&&(I={});var Q={type:"GeometryCollection",geometries:T};return r(Q,O,I)}n.geometryCollection=Ce;function Ue(T,O){if(O===void 0&&(O=0),O&&!(O>=0))throw new Error("precision must be a positive number");var I=Math.pow(10,O||0);return Math.round(T*I)/I}n.round=Ue;function Qe(T,O){O===void 0&&(O="kilometers");var I=n.factors[O];if(!I)throw new Error(O+" units is invalid");return T*I}n.radiansToLength=Qe;function st(T,O){O===void 0&&(O="kilometers");var I=n.factors[O];if(!I)throw new Error(O+" units is invalid");return T/I}n.lengthToRadians=st;function At(T,O){return X(st(T,O))}n.lengthToDegrees=At;function $(T){var O=T%360;return O<0&&(O+=360),O}n.bearingToAzimuth=$;function X(T){var O=T%(2*Math.PI);return O*180/Math.PI}n.radiansToDegrees=X;function ae(T){var O=T%360;return O*Math.PI/180}n.degreesToRadians=ae;function ke(T,O,I){if(O===void 0&&(O="kilometers"),I===void 0&&(I="kilometers"),!(T>=0))throw new Error("length must be a positive number");return Qe(st(T,O),I)}n.convertLength=ke;function ue(T,O,I){if(O===void 0&&(O="meters"),I===void 0&&(I="kilometers"),!(T>=0))throw new Error("area must be a positive number");var Q=n.areaFactors[O];if(!Q)throw new Error("invalid original units");var Y=n.areaFactors[I];if(!Y)throw new Error("invalid final units");return T/Q*Y}n.convertArea=ue;function be(T){return!isNaN(T)&&T!==null&&!Array.isArray(T)}n.isNumber=be;function E(T){return!!T&&T.constructor===Object}n.isObject=E;function A(T){if(!T)throw new Error("bbox is required");if(!Array.isArray(T))throw new Error("bbox must be an Array");if(T.length!==4&&T.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");T.forEach(function(O){if(!be(O))throw new Error("bbox must only contain numbers")})}n.validateBBox=A;function D(T){if(!T)throw new Error("id is required");if(["string","number"].indexOf(typeof T)===-1)throw new Error("id must be a number or a string")}n.validateId=D}),Sr=f(n=>{Object.defineProperty(n,"__esModule",{value:!0});var r=Vt();function a(X,ae,ke){if(X!==null)for(var ue,be,E,A,D,T,O,I=0,Q=0,Y,oe=X.type,me=oe==="FeatureCollection",pe=oe==="Feature",Ne=me?X.features.length:1,rt=0;rt<Ne;rt++){O=me?X.features[rt].geometry:pe?X.geometry:X,Y=O?O.type==="GeometryCollection":!1,D=Y?O.geometries.length:1;for(var at=0;at<D;at++){var ht=0,Ft=0;if(A=Y?O.geometries[at]:O,A!==null){T=A.coordinates;var jt=A.type;switch(I=ke&&(jt==="Polygon"||jt==="MultiPolygon")?1:0,jt){case null:break;case"Point":if(ae(T,Q,rt,ht,Ft)===!1)return!1;Q++,ht++;break;case"LineString":case"MultiPoint":for(ue=0;ue<T.length;ue++){if(ae(T[ue],Q,rt,ht,Ft)===!1)return!1;Q++,jt==="MultiPoint"&&ht++}jt==="LineString"&&ht++;break;case"Polygon":case"MultiLineString":for(ue=0;ue<T.length;ue++){for(be=0;be<T[ue].length-I;be++){if(ae(T[ue][be],Q,rt,ht,Ft)===!1)return!1;Q++}jt==="MultiLineString"&&ht++,jt==="Polygon"&&Ft++}jt==="Polygon"&&ht++;break;case"MultiPolygon":for(ue=0;ue<T.length;ue++){for(Ft=0,be=0;be<T[ue].length;be++){for(E=0;E<T[ue][be].length-I;E++){if(ae(T[ue][be][E],Q,rt,ht,Ft)===!1)return!1;Q++}Ft++}ht++}break;case"GeometryCollection":for(ue=0;ue<A.geometries.length;ue++)if(a(A.geometries[ue],ae,ke)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function u(X,ae,ke,ue){var be=ke;return a(X,function(E,A,D,T,O){A===0&&ke===void 0?be=E:be=ae(be,E,A,D,T,O)},ue),be}function d(X,ae){var ke;switch(X.type){case"FeatureCollection":for(ke=0;ke<X.features.length&&ae(X.features[ke].properties,ke)!==!1;ke++);break;case"Feature":ae(X.properties,0);break}}function g(X,ae,ke){var ue=ke;return d(X,function(be,E){E===0&&ke===void 0?ue=be:ue=ae(ue,be,E)}),ue}function _(X,ae){if(X.type==="Feature")ae(X,0);else if(X.type==="FeatureCollection")for(var ke=0;ke<X.features.length&&ae(X.features[ke],ke)!==!1;ke++);}function b(X,ae,ke){var ue=ke;return _(X,function(be,E){E===0&&ke===void 0?ue=be:ue=ae(ue,be,E)}),ue}function k(X){var ae=[];return a(X,function(ke){ae.push(ke)}),ae}function S(X,ae){var ke,ue,be,E,A,D,T,O,I,Q,Y=0,oe=X.type==="FeatureCollection",me=X.type==="Feature",pe=oe?X.features.length:1;for(ke=0;ke<pe;ke++){for(D=oe?X.features[ke].geometry:me?X.geometry:X,O=oe?X.features[ke].properties:me?X.properties:{},I=oe?X.features[ke].bbox:me?X.bbox:void 0,Q=oe?X.features[ke].id:me?X.id:void 0,T=D?D.type==="GeometryCollection":!1,A=T?D.geometries.length:1,be=0;be<A;be++){if(E=T?D.geometries[be]:D,E===null){if(ae(null,Y,O,I,Q)===!1)return!1;continue}switch(E.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ae(E,Y,O,I,Q)===!1)return!1;break}case"GeometryCollection":{for(ue=0;ue<E.geometries.length;ue++)if(ae(E.geometries[ue],Y,O,I,Q)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Y++}}function G(X,ae,ke){var ue=ke;return S(X,function(be,E,A,D,T){E===0&&ke===void 0?ue=be:ue=ae(ue,be,E,A,D,T)}),ue}function N(X,ae){S(X,function(ke,ue,be,E,A){var D=ke===null?null:ke.type;switch(D){case null:case"Point":case"LineString":case"Polygon":return ae(r.feature(ke,be,{bbox:E,id:A}),ue,0)===!1?!1:void 0}var T;switch(D){case"MultiPoint":T="Point";break;case"MultiLineString":T="LineString";break;case"MultiPolygon":T="Polygon";break}for(var O=0;O<ke.coordinates.length;O++){var I=ke.coordinates[O],Q={type:T,coordinates:I};if(ae(r.feature(Q,be),ue,O)===!1)return!1}})}function ge(X,ae,ke){var ue=ke;return N(X,function(be,E,A){E===0&&A===0&&ke===void 0?ue=be:ue=ae(ue,be,E,A)}),ue}function Ce(X,ae){N(X,function(ke,ue,be){var E=0;if(ke.geometry){var A=ke.geometry.type;if(!(A==="Point"||A==="MultiPoint")){var D,T=0,O=0,I=0;if(a(ke,function(Q,Y,oe,me,pe){if(D===void 0||ue>T||me>O||pe>I){D=Q,T=ue,O=me,I=pe,E=0;return}var Ne=r.lineString([D,Q],ke.properties);if(ae(Ne,ue,be,pe,E)===!1)return!1;E++,D=Q})===!1)return!1}}})}function Ue(X,ae,ke){var ue=ke,be=!1;return Ce(X,function(E,A,D,T,O){be===!1&&ke===void 0?ue=E:ue=ae(ue,E,A,D,T,O),be=!0}),ue}function Qe(X,ae){if(!X)throw new Error("geojson is required");N(X,function(ke,ue,be){if(ke.geometry!==null){var E=ke.geometry.type,A=ke.geometry.coordinates;switch(E){case"LineString":if(ae(ke,ue,be,0,0)===!1)return!1;break;case"Polygon":for(var D=0;D<A.length;D++)if(ae(r.lineString(A[D],ke.properties),ue,be,D)===!1)return!1;break}}})}function st(X,ae,ke){var ue=ke;return Qe(X,function(be,E,A,D){E===0&&ke===void 0?ue=be:ue=ae(ue,be,E,A,D)}),ue}function At(X,ae){if(ae=ae||{},!r.isObject(ae))throw new Error("options is invalid");var ke=ae.featureIndex||0,ue=ae.multiFeatureIndex||0,be=ae.geometryIndex||0,E=ae.segmentIndex||0,A=ae.properties,D;switch(X.type){case"FeatureCollection":ke<0&&(ke=X.features.length+ke),A=A||X.features[ke].properties,D=X.features[ke].geometry;break;case"Feature":A=A||X.properties,D=X.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=X;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var T=D.coordinates;switch(D.type){case"Point":case"MultiPoint":return null;case"LineString":return E<0&&(E=T.length+E-1),r.lineString([T[E],T[E+1]],A,ae);case"Polygon":return be<0&&(be=T.length+be),E<0&&(E=T[be].length+E-1),r.lineString([T[be][E],T[be][E+1]],A,ae);case"MultiLineString":return ue<0&&(ue=T.length+ue),E<0&&(E=T[ue].length+E-1),r.lineString([T[ue][E],T[ue][E+1]],A,ae);case"MultiPolygon":return ue<0&&(ue=T.length+ue),be<0&&(be=T[ue].length+be),E<0&&(E=T[ue][be].length-E-1),r.lineString([T[ue][be][E],T[ue][be][E+1]],A,ae)}throw new Error("geojson is invalid")}function $(X,ae){if(ae=ae||{},!r.isObject(ae))throw new Error("options is invalid");var ke=ae.featureIndex||0,ue=ae.multiFeatureIndex||0,be=ae.geometryIndex||0,E=ae.coordIndex||0,A=ae.properties,D;switch(X.type){case"FeatureCollection":ke<0&&(ke=X.features.length+ke),A=A||X.features[ke].properties,D=X.features[ke].geometry;break;case"Feature":A=A||X.properties,D=X.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":D=X;break;default:throw new Error("geojson is invalid")}if(D===null)return null;var T=D.coordinates;switch(D.type){case"Point":return r.point(T,A,ae);case"MultiPoint":return ue<0&&(ue=T.length+ue),r.point(T[ue],A,ae);case"LineString":return E<0&&(E=T.length+E),r.point(T[E],A,ae);case"Polygon":return be<0&&(be=T.length+be),E<0&&(E=T[be].length+E),r.point(T[be][E],A,ae);case"MultiLineString":return ue<0&&(ue=T.length+ue),E<0&&(E=T[ue].length+E),r.point(T[ue][E],A,ae);case"MultiPolygon":return ue<0&&(ue=T.length+ue),be<0&&(be=T[ue].length+be),E<0&&(E=T[ue][be].length-E),r.point(T[ue][be][E],A,ae)}throw new Error("geojson is invalid")}n.coordAll=k,n.coordEach=a,n.coordReduce=u,n.featureEach=_,n.featureReduce=b,n.findPoint=$,n.findSegment=At,n.flattenEach=N,n.flattenReduce=ge,n.geomEach=S,n.geomReduce=G,n.lineEach=Qe,n.lineReduce=st,n.propEach=d,n.propReduce=g,n.segmentEach=Ce,n.segmentReduce=Ue}),lr=f(n=>{Object.defineProperty(n,"__esModule",{value:!0});var r=Sr();function a(u){var d=[1/0,1/0,-1/0,-1/0];return r.coordEach(u,function(g){d[0]>g[0]&&(d[0]=g[0]),d[1]>g[1]&&(d[1]=g[1]),d[2]<g[0]&&(d[2]=g[0]),d[3]<g[1]&&(d[3]=g[1])}),d}a.default=a,n.default=a}),$i=f((n,r)=>{var a=Dt(),u=Vt(),d=Sr(),g=lr().default,_=d.featureEach;d.coordEach,u.polygon;var b=u.featureCollection;function k(S){var G=new a(S);return G.insert=function(N){if(N.type!=="Feature")throw new Error("invalid feature");return N.bbox=N.bbox?N.bbox:g(N),a.prototype.insert.call(this,N)},G.load=function(N){var ge=[];return Array.isArray(N)?N.forEach(function(Ce){if(Ce.type!=="Feature")throw new Error("invalid features");Ce.bbox=Ce.bbox?Ce.bbox:g(Ce),ge.push(Ce)}):_(N,function(Ce){if(Ce.type!=="Feature")throw new Error("invalid features");Ce.bbox=Ce.bbox?Ce.bbox:g(Ce),ge.push(Ce)}),a.prototype.load.call(this,ge)},G.remove=function(N,ge){if(N.type!=="Feature")throw new Error("invalid feature");return N.bbox=N.bbox?N.bbox:g(N),a.prototype.remove.call(this,N,ge)},G.clear=function(){return a.prototype.clear.call(this)},G.search=function(N){var ge=a.prototype.search.call(this,this.toBBox(N));return b(ge)},G.collides=function(N){return a.prototype.collides.call(this,this.toBBox(N))},G.all=function(){var N=a.prototype.all.call(this);return b(N)},G.toJSON=function(){return a.prototype.toJSON.call(this)},G.fromJSON=function(N){return a.prototype.fromJSON.call(this,N)},G.toBBox=function(N){var ge;if(N.bbox)ge=N.bbox;else if(Array.isArray(N)&&N.length===4)ge=N;else if(Array.isArray(N)&&N.length===6)ge=[N[0],N[1],N[3],N[4]];else if(N.type==="Feature")ge=g(N);else if(N.type==="FeatureCollection")ge=g(N);else throw new Error("invalid geojson");return{minX:ge[0],minY:ge[1],maxX:ge[2],maxY:ge[3]}},G}r.exports=k,r.exports.default=k});Array.prototype.findIndex=Array.prototype.findIndex||function(n){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof n!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++)if(n.call(u,r[d],d,r))return d;return-1},Array.prototype.find=Array.prototype.find||function(n){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof n!="function")throw new TypeError("callback must be a function");for(var r=Object(this),a=r.length>>>0,u=arguments[1],d=0;d<a;d++){var g=r[d];if(n.call(u,g,d,r))return g}},typeof Object.assign!="function"&&(Object.assign=function(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");n=Object(n);for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a!=null)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n}),function(n){n.forEach(function(r){r.hasOwnProperty("remove")||Object.defineProperty(r,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(n,r){if(this==null)throw new TypeError('"this" is null or not defined');var a=Object(this),u=a.length>>>0;if(u===0)return!1;var d=r|0,g=Math.max(d>=0?d:u-Math.abs(d),0);function _(b,k){return b===k||typeof b=="number"&&typeof k=="number"&&isNaN(b)&&isNaN(k)}for(;g<u;){if(_(a[g],n))return!0;g++}return!1}});var eo={version:"2.18.3"},bt=v(ns()),Yt={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},to={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},rs={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Un={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},lu={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},ss={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},ji={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},nn={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Ui={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Br={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Ar={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},no={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ur={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},io={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},ro={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},os={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},so={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},oo={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},as={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},_a={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},ao={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},uu={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},vt={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},ri={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},$t={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},ya={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},lo={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},uo=ur,Ei={en:Yt,de:to,it:rs,id:Un,ro:lu,ru:ss,es:ji,nl:nn,fr:Ui,pt:uo,pt_br:no,pt_pt:ur,zh:Br,zh_tw:Ar,pl:io,sv:ro,el:os,hu:so,da:oo,no:as,fa:_a,ua:ao,tr:uu,cz:vt,ja:ri,fi:$t,ko:ya,ky:lo},Gi={_globalEditModeEnabled:!1,enableGlobalEditMode(n){let r={...n};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(a=>{this._isRelevantForEdit(a)&&a.pm.enable(r)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(n=>{n.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(n=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(n)},handleLayerAdditionInGlobalEditMode(){let n=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let r in n){let a=n[r];this._isRelevantForEdit(a)&&a.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:n}){this._addedLayersEdit[L.stamp(n)]=n},_isRelevantForEdit(n){return n.pm&&!(n instanceof L.LayerGroup)&&(!L.PM.optIn&&!n.options.pmIgnore||L.PM.optIn&&n.options.pmIgnore===!1)&&!n._pmTempLayer&&n.pm.options.allowEditing}},co=Gi,Tr={_globalDragModeEnabled:!1,enableGlobalDragMode(){let n=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},n.forEach(r=>{this._isRelevantForDrag(r)&&r.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let n=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,n.forEach(r=>{r.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let n=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let r in n){let a=n[r];this._isRelevantForDrag(a)&&a.pm.enableLayerDrag()}},_layerAddedDrag({layer:n}){this._addedLayersDrag[L.stamp(n)]=n},_isRelevantForDrag(n){return n.pm&&!(n instanceof L.LayerGroup)&&(!L.PM.optIn&&!n.options.pmIgnore||L.PM.optIn&&n.options.pmIgnore===!1)&&!n._pmTempLayer&&n.pm.options.draggable}},hn=Tr,Vi={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(n=>{this._isRelevantForRemoval(n)&&(n.pm.enabled()&&n.pm.disable(),n.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(n=>{n.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(n){let r=n.target;this._isRelevantForRemoval(r)&&!r.pm.dragging()&&(r.removeFrom(this.map.pm._getContainingLayer()),r.remove(),r instanceof L.LayerGroup?(this._fireRemoveLayerGroup(r),this._fireRemoveLayerGroup(this.map,r)):(r.pm._fireRemove(r),r.pm._fireRemove(this.map,r)))},_isRelevantForRemoval(n){return n.pm&&!(n instanceof L.LayerGroup)&&(!L.PM.optIn&&!n.options.pmIgnore||L.PM.optIn&&n.options.pmIgnore===!1)&&!n._pmTempLayer&&n.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let n=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let r in n){let a=n[r];this._isRelevantForRemoval(a)&&(a.pm.enabled()&&a.pm.disable(),a.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:n}){this._addedLayersRemoval[L.stamp(n)]=n}},va=Vi,ba={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(n=>n instanceof L.Polyline).forEach(n=>{this._isRelevantForRotate(n)&&n.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(n=>n instanceof L.Polyline).forEach(n=>{n.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(n){return n.pm&&n instanceof L.Polyline&&!(n instanceof L.LayerGroup)&&(!L.PM.optIn&&!n.options.pmIgnore||L.PM.optIn&&n.options.pmIgnore===!1)&&!n._pmTempLayer&&n.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let n=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let r in n){let a=n[r];this._isRelevantForRemoval(a)&&a.pm.enableRotate()}},_layerAddedRotate({layer:n}){this._addedLayersRotate[L.stamp(n)]=n}},cu=ba,xa=v(ns()),ho={_fireDrawStart(n="Draw",r={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},n,r)},_fireDrawEnd(n="Draw",r={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},n,r)},_fireCreate(n,r="Draw",a={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:n,layer:n},r,a)},_fireCenterPlaced(n="Draw",r={}){let a=n==="Draw"?this._layer:void 0,u=n!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:a,layer:u,latlng:this._layer.getLatLng()},n,r)},_fireCut(n,r,a,u="Draw",d={}){this.__fire(n,"pm:cut",{shape:this._shape,layer:r,originalLayer:a},u,d)},_fireEdit(n=this._layer,r="Edit",a={}){this.__fire(n,"pm:edit",{layer:this._layer,shape:this.getShape()},r,a)},_fireEnable(n="Edit",r={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},n,r)},_fireDisable(n="Edit",r={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},n,r)},_fireUpdate(n="Edit",r={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},n,r)},_fireMarkerDragStart(n,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:n,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDrag(n,r=void 0,a="Edit",u={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:n,shape:this.getShape(),indexPath:r},a,u)},_fireMarkerDragEnd(n,r=void 0,a=void 0,u="Edit",d={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:n,shape:this.getShape(),indexPath:r,intersectionReset:a},u,d)},_fireDragStart(n="Edit",r={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},n,r)},_fireDrag(n,r="Edit",a={}){this.__fire(this._layer,"pm:drag",{...n,shape:this.getShape()},r,a)},_fireDragEnd(n="Edit",r={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},n,r)},_fireDragEnable(n="Edit",r={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},n,r)},_fireDragDisable(n="Edit",r={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},n,r)},_fireRemove(n,r=n,a="Edit",u={}){this.__fire(n,"pm:remove",{layer:r,shape:this.getShape()},a,u)},_fireVertexAdded(n,r,a,u="Edit",d={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:n,indexPath:r,latlng:a,shape:this.getShape()},u,d)},_fireVertexRemoved(n,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:n,indexPath:r,shape:this.getShape()},a,u)},_fireVertexClick(n,r,a="Edit",u={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:n,indexPath:r,shape:this.getShape()},a,u)},_fireIntersect(n,r=this._layer,a="Edit",u={}){this.__fire(r,"pm:intersect",{layer:this._layer,intersection:n,shape:this.getShape()},a,u)},_fireLayerReset(n,r,a="Edit",u={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:n,indexPath:r,shape:this.getShape()},a,u)},_fireChange(n,r="Edit",a={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:n,shape:this.getShape()},r,a)},_fireTextChange(n,r="Edit",a={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:n,shape:this.getShape()},r,a)},_fireTextFocus(n="Edit",r={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},n,r)},_fireTextBlur(n="Edit",r={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},n,r)},_fireSnapDrag(n,r,a="Snapping",u={}){this.__fire(n,"pm:snapdrag",r,a,u)},_fireSnap(n,r,a="Snapping",u={}){this.__fire(n,"pm:snap",r,a,u)},_fireUnsnap(n,r,a="Snapping",u={}){this.__fire(n,"pm:unsnap",r,a,u)},_fireRotationEnable(n,r,a="Rotation",u={}){this.__fire(n,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},a,u)},_fireRotationDisable(n,r="Rotation",a={}){this.__fire(n,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},r,a)},_fireRotationStart(n,r,a="Rotation",u={}){this.__fire(n,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:r},a,u)},_fireRotation(n,r,a,u=this._rotationLayer,d="Rotation",g={}){this.__fire(n,"pm:rotate",{layer:u,helpLayer:this._layer,startAngle:this._startAngle,angle:u.pm.getAngle(),angleDiff:r,oldLatLngs:a,newLatLngs:u.getLatLngs()},d,g)},_fireRotationEnd(n,r,a,u="Rotation",d={}){this.__fire(n,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:r,angle:this._rotationLayer.pm.getAngle(),originLatLngs:a,newLatLngs:this._rotationLayer.getLatLngs()},u,d)},_fireActionClick(n,r,a,u="Toolbar",d={}){this.__fire(this._map,"pm:actionclick",{text:n.text,action:n,btnName:r,button:a},u,d)},_fireButtonClick(n,r,a="Toolbar",u={}){this.__fire(this._map,"pm:buttonclick",{btnName:n,button:r},a,u)},_fireLangChange(n,r,a,u,d="Global",g={}){this.__fire(this.map,"pm:langchange",{oldLang:n,activeLang:r,fallback:a,translations:u},d,g)},_fireGlobalDragModeToggled(n,r="Global",a={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:n,map:this.map},r,a)},_fireGlobalEditModeToggled(n,r="Global",a={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:n,map:this.map},r,a)},_fireGlobalRemovalModeToggled(n,r="Global",a={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:n,map:this.map},r,a)},_fireGlobalCutModeToggled(n="Global",r={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},n,r)},_fireGlobalDrawModeToggled(n="Global",r={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},n,r)},_fireGlobalRotateModeToggled(n="Global",r={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},n,r)},_fireRemoveLayerGroup(n,r=n,a="Edit",u={}){this.__fire(n,"pm:remove",{layer:r,shape:void 0},a,u)},_fireKeyeventEvent(n,r,a,u="Global",d={}){this.__fire(this.map,"pm:keyevent",{event:n,eventType:r,focusOn:a},u,d)},__fire(n,r,a,u,d={}){a=(0,xa.default)(a,d,{source:u}),L.PM.Utils._fireEvent(n,r,a)}},ls=ho,wa=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(n){this.map=n,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),n.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(n){let r="document";this.map.getContainer().contains(n.target)&&(r="map");let a={event:n,eventType:n.type,focusOn:r};this._lastEvents[n.type]=a,this._lastEvents.current=a,this.map.pm._fireKeyeventEvent(n,n.type,r)},_onBlur(n){n.altKey=!1;let r={event:n,eventType:n.type,focusOn:"document"};this._lastEvents[n.type]=r,this._lastEvents.current=r},getLastKeyEvent(n="current"){return this._lastEvents[n]},isShiftKeyPressed(){var n;return(n=this._lastEvents.current)==null?void 0:n.event.shiftKey},isAltKeyPressed(){var n;return(n=this._lastEvents.current)==null?void 0:n.event.altKey},isCtrlKeyPressed(){var n;return(n=this._lastEvents.current)==null?void 0:n.event.ctrlKey},isMetaKeyPressed(){var n;return(n=this._lastEvents.current)==null?void 0:n.event.metaKey},getPressedKey(){var n;return(n=this._lastEvents.current)==null?void 0:n.event.key}}),St=wa,La=v(ki());function yt(n){let r=L.PM.activeLang;return(0,La.default)(Ei[r],n)||(0,La.default)(Ei.en,n)||n}function Hi(n){for(let r=0;r<n.length;r+=1){let a=n[r];if(Array.isArray(a)){if(Hi(a))return!0}else if(a!=null&&a!=="")return!0}return!1}function Dr(n){return n.reduce((r,a)=>{if(a.length!==0){let u=Array.isArray(a)?Dr(a):a;Array.isArray(u)?u.length!==0&&r.push(u):r.push(u)}return r},[])}function hu(n,r,a){let u={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:d,b:g,f:_}=u,b=n.lng,k=n.lat,S=a,G=Math.PI,N=r*G/180,ge=Math.sin(N),Ce=Math.cos(N),Ue=(1-_)*Math.tan(k*G/180),Qe=1/Math.sqrt(1+Ue*Ue),st=Ue*Qe,At=Math.atan2(Ue,Ce),$=Qe*ge,X=1-$*$,ae=X*(d*d-g*g)/(g*g),ke=1+ae/16384*(4096+ae*(-768+ae*(320-175*ae))),ue=ae/1024*(256+ae*(-128+ae*(74-47*ae))),be=S/(g*ke),E=2*Math.PI,A,D,T;for(;Math.abs(be-E)>1e-12;){A=Math.cos(2*At+be),D=Math.sin(be),T=Math.cos(be);let Ne=ue*D*(A+ue/4*(T*(-1+2*A*A)-ue/6*A*(-3+4*D*D)*(-3+4*A*A)));E=be,be=S/(g*ke)+Ne}let O=st*D-Qe*T*Ce,I=Math.atan2(st*T+Qe*D*Ce,(1-_)*Math.sqrt($*$+O*O)),Q=Math.atan2(D*ge,Qe*T-st*D*Ce),Y=_/16*X*(4+_*(4-3*X)),oe=Q-(1-Y)*_*$*(be+Y*D*(A+Y*T*(-1+2*A*A))),me=b+oe*180/G,pe=I*180/G;return L.latLng(me,pe)}function us(n,r,a,u,d=!0){let g,_,b,k=[];for(let S=0;S<a;S+=1){if(d)g=S*360/a+u,_=hu(n,g,r),b=L.latLng(_.lng,_.lat);else{let G=n.lat+Math.cos(2*S*Math.PI/a)*r,N=n.lng+Math.sin(2*S*Math.PI/a)*r;b=L.latLng(G,N)}k.push(b)}return k}function du(n,r,a){r=(r+360)%360;let u=Math.PI/180,d=180/Math.PI,{R:g}=L.CRS.Earth,_=n.lng*u,b=n.lat*u,k=r*u,S=Math.sin(b),G=Math.cos(b),N=Math.cos(a/g),ge=Math.sin(a/g),Ce=Math.asin(S*N+G*ge*Math.cos(k)),Ue=_+Math.atan2(Math.sin(k)*ge*G,N-S*Math.sin(Ce));Ue*=d;let Qe=Ue-360,st=Ue<-180?Ue+360:Ue;return Ue=Ue>180?Qe:st,L.latLng([Ce*d,Ue])}function cs(n,r,a){let u=n.latLngToContainerPoint(r),d=n.latLngToContainerPoint(a),g=Math.atan2(d.y-u.y,d.x-u.x)*180/Math.PI+90;return g+=g<0?360:0,g}function hs(n,r,a,u){let d=cs(n,r,a);return du(r,d,u)}function fu(n,r,a="asc"){if(!r||Object.keys(r).length===0)return(k,S)=>k-S;let u=Object.keys(r),d,g=u.length-1,_={};for(;g>=0;)d=u[g],_[d.toLowerCase()]=r[d],g-=1;function b(k){if(k instanceof L.Marker)return"Marker";if(k instanceof L.Circle)return"Circle";if(k instanceof L.CircleMarker)return"CircleMarker";if(k instanceof L.Rectangle)return"Rectangle";if(k instanceof L.Polygon)return"Polygon";if(k instanceof L.Polyline)return"Line"}return(k,S)=>{let G,N;if(G=b(k.layer).toLowerCase(),N=b(S.layer).toLowerCase(),!G||!N)return 0;let ge=G in _?_[G]:Number.MAX_SAFE_INTEGER,Ce=N in _?_[N]:Number.MAX_SAFE_INTEGER,Ue=0;return ge<Ce?Ue=-1:ge>Ce&&(Ue=1),a==="desc"?Ue*-1:Ue}}function si(n,r=n.getLatLngs()){return n instanceof L.Polygon?L.polygon(r).getLatLngs():L.polyline(r).getLatLngs()}function Ca(n,r){var a,u,d,g;if((u=(a=r.options.crs)==null?void 0:a.projection)!=null&&u.MAX_LATITUDE){let _=(g=(d=r.options.crs)==null?void 0:d.projection)==null?void 0:g.MAX_LATITUDE;n.lat=Math.max(Math.min(_,n.lat),-_)}return n}function gn(n){return n.options.renderer||n._map&&(n._map._getPaneRenderer(n.options.pane)||n._map.options.renderer||n._map._renderer)||n._renderer}var pu=L.Class.extend({includes:[co,hn,va,cu,ls],initialize(n){this.map=n,this.Draw=new L.PM.Draw(n),this.Toolbar=new L.PM.Toolbar(n),this.Keyboard=St(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(n)},setLang(n="en",r,a="en"){if(n=n.trim().toLowerCase(),!/^[a-z]{2}$/.test(n)){let d=n.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(d){let g=[`${d[1]}_${d[2]}`,`${d[1]}`];for(let _ of g)if(Ei[_]){n=_;break}}}let u=L.PM.activeLang;r&&(Ei[n]=(0,bt.default)(Ei[a],r)),L.PM.activeLang=n,this.map.pm.Toolbar.reinit(),this._fireLangChange(u,n,a,Ei[n])},addControls(n){this.Toolbar.addControls(n)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(n="Polygon",r){n==="Poly"&&(n="Polygon"),this.Draw.enable(n,r)},disableDraw(n="Polygon"){n==="Poly"&&(n="Polygon"),this.Draw.disable(n)},setPathOptions(n,r={}){let a=r.ignoreShapes||[],u=r.merge||!1;this.map.pm.Draw.shapes.forEach(d=>{a.indexOf(d)===-1&&this.map.pm.Draw[d].setPathOptions(n,u)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(n){let r=(0,bt.default)(this.globalOptions,n);r.editable&&(r.resizeableCircleMarker=r.editable,delete r.editable);let a=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!r.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),a=!0);let u=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!r.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),u=!0),this.map.pm.Draw.shapes.forEach(d=>{this.map.pm.Draw[d].setOptions(r)}),a&&this.map.pm.Draw.CircleMarker.enable(),u&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.setOptions(r)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=r,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(n=>{n.pm.enabled()&&n.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(n){return this.Draw.Cut.enable(n)},toggleGlobalCutMode(n){return this.Draw.Cut.toggle(n)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(n=!1){let r=L.PM.Utils.findLayers(this.map);if(!n)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},getGeomanDrawLayers(n=!1){let r=L.PM.Utils.findLayers(this.map).filter(u=>u._drawnByGeoman===!0);if(!n)return r;let a=L.featureGroup();return a._pmTempLayer=!0,r.forEach(u=>{a.addLayer(u)}),a},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(n){this._touchEventCounter===0&&(L.DomEvent.on(n,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(n,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(n){this._touchEventCounter===1&&(L.DomEvent.off(n,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(n,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(n){gn(this.map)._onMouseMove(this._createMouseEvent("mousemove",n))},_canvasTouchClick(n){let r="";n.type==="touchstart"||n.type==="pointerdown"?r="mousedown":(n.type==="touchend"||n.type==="pointerup"||n.type==="touchcancel"||n.type==="pointercancel")&&(r="mouseup"),r&&gn(this.map)._onClick(this._createMouseEvent(r,n))},_createMouseEvent(n,r){let a,u=r.touches[0]||r.changedTouches[0];try{a=new MouseEvent(n,{bubbles:r.bubbles,cancelable:r.cancelable,view:r.view,detail:u.detail,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY,ctrlKey:r.ctrlKey,altKey:r.altKey,shiftKey:r.shiftKey,metaKey:r.metaKey,button:r.button,relatedTarget:r.relatedTarget})}catch{a=document.createEvent("MouseEvents"),a.initMouseEvent(n,r.bubbles,r.cancelable,r.view,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.button,r.relatedTarget)}return a}}),ka=pu,Mi=L.Control.extend({includes:[ls],options:{position:"topleft",disableByOtherButtons:!0},initialize(n){this._button=L.Util.extend({},this.options,n)},onAdd(n){return this._map=n,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let n=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),n?n.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(n){return typeof n=="boolean"?this._button.toggleStatus=n:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(n){n&&n.preventDefault(),!this._button.disabled&&(this._button.onClick(n,{button:this,event:n}),this._clicked(n),this._button.afterClick(n,{button:this,event:n}))},_makeButton(n){let r=this.options.position.indexOf("right")>-1?"pos-right":"",a=L.DomUtil.create("div",`button-container  ${r}`,this._container);n.title&&a.setAttribute("title",n.title);let u=L.DomUtil.create("a","leaflet-buttons-control-button",a);u.setAttribute("role","button"),u.setAttribute("tabindex","0"),u.href="#";let d=L.DomUtil.create("div",`leaflet-pm-actions-container ${r}`,a),g=n.actions,_={cancel:{text:yt("actions.cancel"),title:yt("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:yt("actions.finish"),title:yt("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:yt("actions.removeLastVertex"),title:yt("actions.removeLastVertex"),onClick(){this._map.pm.Draw[n.jsClass]._removeLastVertex()}},finish:{text:yt("actions.finish"),title:yt("actions.finish"),onClick(k){this._map.pm.Draw[n.jsClass]._finishShape(k)}}};n._preparedActions=g.map(k=>{let S=typeof k=="string"?k:k.name,G;if(_[S])G=_[S];else if(k.text)G=k;else return G;let N=L.DomUtil.create("a",`leaflet-pm-action ${r} action-${S}`,d);if(N.setAttribute("role","button"),N.setAttribute("tabindex","0"),N.href="#",G.title&&(N.title=G.title),N.innerHTML=G.text,L.DomEvent.disableClickPropagation(N),L.DomEvent.on(N,"click",L.DomEvent.stop),G._node=N,!n.disabled&&G.onClick){let ge=Ce=>{Ce.preventDefault();let Ue="",{buttons:Qe}=this._map.pm.Toolbar;for(let st in Qe)if(Qe[st]._button===n){Ue=st;break}this._fireActionClick(G,Ue,n)};L.DomEvent.addListener(N,"click",ge,this),L.DomEvent.addListener(N,"click",G.onClick,this),L.DomEvent.addListener(N,"click",()=>this._updateActiveAction(n))}return G}),this._updateActiveAction(n),n.toggleStatus&&L.DomUtil.addClass(a,"active");let b=L.DomUtil.create("div","control-icon",u);return n.iconUrl&&b.setAttribute("src",n.iconUrl),n.className&&L.DomUtil.addClass(b,n.className),L.DomEvent.disableClickPropagation(u),L.DomEvent.on(u,"click",L.DomEvent.stop),n.disabled||(L.DomEvent.addListener(u,"click",this._onBtnClick,this),L.DomEvent.addListener(u,"click",this._triggerClick,this)),n.disabled&&(L.DomUtil.addClass(u,"pm-disabled"),u.setAttribute("aria-disabled","true")),a},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let n="",{buttons:r}=this._map.pm.Toolbar;for(let a in r)if(r[a]._button===this._button){n=a;break}this._fireButtonClick(n,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let n="pm-disabled",r=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(r,n),r.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(r,n),r.setAttribute("aria-disabled","false"))},_updateActiveAction(n){var r;(r=n._preparedActions)==null||r.forEach(a=>{a!=null&&a._node&&(a.isActive&&a.isActive.call(this)?L.DomUtil.addClass(a._node,"active-action"):L.DomUtil.removeClass(a._node,"active-action"))})}}),Ea=Mi;L.Control.PMButton=Ea;var Ma=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(n){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(n)},reinit(){let n=this.isVisible;this.removeControls(),this._defineButtons(),n&&this.addControls()},init(n){this.map=n,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(n){let r=`${n}Container`;return this[r]||(this[r]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${n} leaflet-bar leaflet-control`)),this[r]},getButtons(){return this.buttons},addControls(n=this.options){typeof n.editPolygon<"u"&&(n.editMode=n.editPolygon),typeof n.deleteLayer<"u"&&(n.removalMode=n.deleteLayer),L.Util.setOptions(this,n),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let n=this.getButtons(),r={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let a in n){let u=n[a];L.Util.setOptions(u,{className:r.geomanIcons[a]})}},removeControls(){let n=this.getButtons();for(let r in n)n[r].remove();this.isVisible=!1},toggleControls(n=this.options){this.isVisible?this.removeControls():this.addControls(n)},_addButton(n,r){return this.buttons[n]=r,this.options[n]=!!this.options[n]||!1,this.buttons[n]},triggerClickOnToggledButtons(n){for(let r in this.buttons){let a=this.buttons[r];a._button.disableByOtherButtons&&a!==n&&a.toggled()&&a._triggerClick()}},toggleButton(n,r,a=!0){n==="editPolygon"&&(n="editMode"),n==="deleteLayer"&&(n="removalMode");let u=n;return a&&this.triggerClickOnToggledButtons(this.buttons[u]),this.buttons[u]?this.buttons[u].toggle(r):!1},_defineButtons(){let n={className:"control-icon leaflet-pm-icon-marker",title:yt("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(ge,Ce)=>{this.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:yt("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(ge,Ce)=>{this.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},a={className:"control-icon leaflet-pm-icon-polyline",title:yt("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(ge,Ce)=>{this.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},u={title:yt("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(ge,Ce)=>{this.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},d={title:yt("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(ge,Ce)=>{this.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:yt("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(ge,Ce)=>{this.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},_={title:yt("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},b={title:yt("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},k={title:yt("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(ge,Ce)=>{this.map.pm.Draw[Ce.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},S={title:yt("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},G={title:yt("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},N={className:"control-icon leaflet-pm-icon-text",title:yt("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(ge,Ce)=>{this.map.pm.Draw[Ce.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(n)),this._addButton("drawPolyline",new L.Control.PMButton(a)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(u)),this._addButton("drawCircleMarker",new L.Control.PMButton(d)),this._addButton("drawText",new L.Control.PMButton(N)),this._addButton("editMode",new L.Control.PMButton(_)),this._addButton("dragMode",new L.Control.PMButton(b)),this._addButton("cutPolygon",new L.Control.PMButton(k)),this._addButton("removalMode",new L.Control.PMButton(S)),this._addButton("rotateMode",new L.Control.PMButton(G))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let n=this.getButtons(),r=[];this.options.drawControls===!1&&(r=r.concat(Object.keys(n).filter(a=>!n[a]._button.tool))),this.options.editControls===!1&&(r=r.concat(Object.keys(n).filter(a=>n[a]._button.tool==="edit"))),this.options.optionsControls===!1&&(r=r.concat(Object.keys(n).filter(a=>n[a]._button.tool==="options"))),this.options.customControls===!1&&(r=r.concat(Object.keys(n).filter(a=>n[a]._button.tool==="custom")));for(let a in n)if(this.options[a]&&r.indexOf(a)===-1){let u=n[a]._button.tool;u||(u="draw"),n[a].setPosition(this._getBtnPosition(u)),n[a].addTo(this.map)}},_getBtnPosition(n){return this.options.positions&&this.options.positions[n]?this.options.positions[n]:this.options.position},setBlockPosition(n,r){this.options.positions[n]=r,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(n,r){if(r)typeof r!="object"&&(r={name:r});else throw new TypeError("Button has no name");let a=this._btnNameMapping(n);if(!r.name)throw new TypeError("Button has no name");if(this.buttons[r.name])throw new TypeError("Button with this name already exists");let u=this.map.pm.Draw.createNewDrawInstance(r.name,a);r={...this.buttons[a]._button,...r};let d=this.createCustomControl(r);return{drawInstance:u,control:d}},createCustomControl(n){if(!n.name)throw new TypeError("Button has no name");if(this.buttons[n.name])throw new TypeError("Button with this name already exists");n.onClick||(n.onClick=()=>{}),n.afterClick||(n.afterClick=()=>{}),n.toggle!==!1&&(n.toggle=!0),n.block&&(n.block=n.block.toLowerCase()),(!n.block||n.block==="draw")&&(n.block=""),n.className?n.className.indexOf("control-icon")===-1&&(n.className=`control-icon ${n.className}`):n.className="control-icon";let r={tool:n.block,className:n.className,title:n.title||"",jsClass:n.name,onClick:n.onClick,afterClick:n.afterClick,doToggle:n.toggle,toggleStatus:!1,disableOtherButtons:n.disableOtherButtons??!0,disableByOtherButtons:n.disableByOtherButtons??!0,cssToggle:n.toggle,position:this.options.position,actions:n.actions||[],disabled:!!n.disabled};this.options[n.name]!==!1&&(this.options[n.name]=!0);let a=this._addButton(n.name,new L.Control.PMButton(r));return this.changeControlOrder(),a},controlExists(n){return!!this.getButton(n)},getButton(n){return this.getButtons()[n]},getButtonsInBlock(n){let r={};if(n)for(let a in this.getButtons()){let u=this.getButtons()[a];(u._button.tool===n||n==="draw"&&!u._button.tool)&&(r[a]=u)}return r},changeControlOrder(n=[]){let r=this._shapeMapping(),a=[];n.forEach(g=>{r[g]?a.push(r[g]):a.push(g)});let u=this.getButtons(),d={};a.forEach(g=>{u[g]&&(d[g]=u[g])}),Object.keys(u).filter(g=>!u[g]._button.tool||u[g]._button.tool==="draw").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="edit").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="options").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).filter(g=>u[g]._button.tool==="custom").forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),Object.keys(u).forEach(g=>{a.indexOf(g)===-1&&(d[g]=u[g])}),this.map.pm.Toolbar.buttons=d,this._showHideButtons()},getControlOrder(){let n=this.getButtons(),r=[];for(let a in n)r.push(a);return r},changeActionsOfControl(n,r){let a=this._btnNameMapping(n);if(!a)throw new TypeError("No name passed");if(!r)throw new TypeError("No actions passed");if(!this.buttons[a])throw new TypeError("Button with this name not exists");this.buttons[a]._button.actions=r,this.changeControlOrder()},setButtonDisabled(n,r){let a=this._btnNameMapping(n);r?this.buttons[a].disable():this.buttons[a].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(n){let r=this._shapeMapping();return r[n]?r[n]:n}}),fo=Ma,mu=v(ns()),Pa={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(n){n.forEach(r=>{if(Array.isArray(r)){this._assignEvents(r);return}r.off("drag",this._handleSnapping,this),r.on("drag",this._handleSnapping,this),r.off("dragend",this._cleanupSnapping,this),r.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(n){if(n){let r=n.target;r._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(r=>{r.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(n){var b,k,S;let r=n.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((b=n==null?void 0:n.originalEvent)==null?void 0:b.altKey)||((S=(k=this._map)==null?void 0:k.pm)==null?void 0:S.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let a=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(a).length===0)return!1;let u=a.layer instanceof L.Marker||a.layer instanceof L.CircleMarker||!this.options.snapSegment,d;u?d=a.latlng:d=this._checkPrioritiySnapping(a);let g=this.options.snapDistance,_={marker:r,shape:this._shape,snapLatLng:d,segment:a.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:a.layer,distance:a.distance};if(this._fireSnapDrag(_.marker,_),this._fireSnapDrag(this._layer,_),a.distance<g){r._orgLatLng=r.getLatLng(),r.setLatLng(d),r._snapped=!0,r._snapInfo=_;let G=()=>{this._snapLatLng=d,this._fireSnap(r,_),this._fireSnap(this._layer,_)},N=this._snapLatLng||{},ge=d||{};(N.lat!==ge.lat||N.lng!==ge.lng)&&G()}else this._snapLatLng&&(this._unsnap(_),r._snapped=!1,r._snapInfo=void 0,this._fireUnsnap(_.marker,_),this._fireUnsnap(this._layer,_));return!0},_createSnapList(){let n=[],r=[],a=this._map;a.off("layerremove",this._handleSnapLayerRemoval,this),a.on("layerremove",this._handleSnapLayerRemoval,this),a.eachLayer(u=>{if((u instanceof L.Polyline||u instanceof L.Marker||u instanceof L.CircleMarker||u instanceof L.ImageOverlay)&&u.options.snapIgnore!==!0){if(u.options.snapIgnore===void 0&&(!L.PM.optIn&&u.options.pmIgnore===!0||L.PM.optIn&&u.options.pmIgnore!==!1))return;(u instanceof L.Circle||u instanceof L.CircleMarker)&&u.pm&&u.pm._hiddenPolyCircle?n.push(u.pm._hiddenPolyCircle):u instanceof L.ImageOverlay&&(u=L.rectangle(u.getBounds())),n.push(u);let d=L.polyline([],{color:"red",pmIgnore:!0});d._pmTempLayer=!0,r.push(d),(u instanceof L.Circle||u instanceof L.CircleMarker)&&r.push(d)}}),n=n.filter(u=>this._layer!==u),n=n.filter(u=>u._latlng||u._latlngs&&Hi(u._latlngs)),n=n.filter(u=>!u._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let u=L.polyline([],{color:"red",pmIgnore:!0});u._pmTempLayer=!0,r.push(u)}),this._snapList=n.concat(this._otherSnapLayers)):this._snapList=n,this.debugIndicatorLines=r},_handleSnapLayerRemoval({layer:n}){if(!n._leaflet_id)return;let r=this._snapList.findIndex(a=>a._leaflet_id===n._leaflet_id);r>-1&&this._snapList.splice(r,1)},_calcClosestLayer(n,r){return this._calcClosestLayers(n,r,1)[0]},_calcClosestLayers(n,r,a=1){let u=[],d={};r.forEach((_,b)=>{var S;if(_._parentCopy&&_._parentCopy===this._layer||((S=_.getLatLngs)==null?void 0:S.call(_).flat(5).length)<2)return;let k=this._calcLayerDistances(n,_);if(k.distance=Math.floor(k.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[b]){let G=L.polyline([],{color:"red",pmIgnore:!0});G._pmTempLayer=!0,this.debugIndicatorLines[b]=G}this.debugIndicatorLines[b].setLatLngs([n,k.latlng])}a===1&&(d.distance===void 0||k.distance-5<=d.distance)?(k.distance+5<d.distance&&(u=[]),d=k,d.layer=_,u.push(d)):a!==1&&(d={},d=k,d.layer=_,u.push(d))}),a!==1&&(u=u.sort((_,b)=>_.distance-b.distance)),a===-1&&(a=u.length);let g=this._getClosestLayerByPriority(u,a);return L.Util.isArray(g)?g:[g]},_calcLayerDistances(n,r){let a=this._map,u=r instanceof L.Marker||r instanceof L.CircleMarker,d=r instanceof L.Polygon,g=n;if(u){let _=r.getLatLng();return{latlng:{..._},distance:this._getDistance(a,_,g)}}return this._calcLatLngDistances(g,r.getLatLngs(),a,d)},_calcLatLngDistances(n,r,a,u=!1){let d,g,_,b=k=>{k.forEach((S,G)=>{if(Array.isArray(S)){b(S);return}if(this.options.snapSegment){let N=S,ge;u?ge=G+1===k.length?0:G+1:ge=G+1===k.length?void 0:G+1;let Ce=k[ge];if(Ce){let Ue=this._getDistanceToSegment(a,n,N,Ce);(g===void 0||Ue<g)&&(g=Ue,_=[N,Ce])}}else{let N=this._getDistance(a,n,S);(g===void 0||N<g)&&(g=N,d=S)}})};return b(r),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(a,n,_[0],_[1])},segment:_,distance:g}:{latlng:d,distance:g}},_getClosestLayerByPriority(n,r=1){n=n.sort((_,b)=>_._leaflet_id-b._leaflet_id);let a=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],u=this._map.pm.globalOptions.snappingOrder||[],d=0,g={};return u.concat(a).forEach(_=>{g[_]||(d+=1,g[_]=d)}),n.sort(fu("instanceofShape",g)),r===1?n[0]||{}:n.slice(0,r)},_checkPrioritiySnapping(n){let r=this._map,a=n.segment[0],u=n.segment[1],d=n.latlng,g=d;if(this.options.snapVertex){let _=this._getDistance(r,a,d),b=this._getDistance(r,u,d),k=_<b?a:u,S=_<b?_:b;if(this.options.snapMiddle){let N=L.PM.Utils.calcMiddleLatLng(r,a,u),ge=this._getDistance(r,N,d);ge<_&&ge<b&&(k=N,S=ge)}let G=this.options.snapDistance;S<G&&(g=k)}return{...g}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(n,r,a,u){let d=n.getMaxZoom();d===1/0&&(d=n.getZoom());let g=n.project(r,d),_=n.project(a,d),b=n.project(u,d),k=L.LineUtil.closestPointOnSegment(g,_,b);return n.unproject(k,d)},_getDistanceToSegment(n,r,a,u){let d=n.latLngToContainerPoint(r),g=n.latLngToContainerPoint(a),_=n.latLngToContainerPoint(u);return L.LineUtil.pointToSegmentDistance(d,g,_)},_getDistance(n,r,a){return n.latLngToContainerPoint(r).distanceTo(n.latLngToContainerPoint(a))}},po=Pa,gu=L.Class.extend({includes:[po,ls],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(n){L.Util.setOptions(this,n),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(n){let r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=n,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(a=>{this[a]=new L.PM.Draw[a](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(n,r=!1){r?this.options.pathOptions=(0,mu.default)(this.options.pathOptions,n):this.options.pathOptions=n},getShapes(){return this.shapes},getShape(){return this._shape},enable(n,r){if(!n)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[n].enable(r)},disable(){this.shapes.forEach(n=>{this[n].disable()})},addControls(){this.shapes.forEach(n=>{this[n].addButton()})},getActiveShape(){let n;return this.shapes.forEach(r=>{this[r]._enabled&&(n=r)}),n},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let n=[];this._map.eachLayer(r=>{(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&(r._pmTempLayer||n.push(r))}),this._enabled?n.forEach(r=>{L.PM.Utils.disablePopup(r)}):n.forEach(r=>{L.PM.Utils.enablePopup(r)})},createNewDrawInstance(n,r){let a=this._getShapeFromBtnName(r);if(this[n])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[a])throw new TypeError(`There is no class L.PM.Draw.${a}`);return this[n]=new L.PM.Draw[a](this._map),this[n].toolbarButtonName=n,this[n]._shape=n,this.shapes.push(n),this[r]&&this[n].setOptions(this[r].options),this[n].setOptions(this[n].options),this[n]},_getShapeFromBtnName(n){let r={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return r[n]?r[n]:this[n]?this[n]._shape:n},_finishLayer(n){n.pm&&(n.pm.setOptions(this.options),n.pm._shape=this._shape,n.pm._map=this._map),this._addDrawnLayerProp(n)},_addDrawnLayerProp(n){n._drawnByGeoman=!0},_setPane(n,r){r==="layerPane"?n.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?n.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(n.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),dn=gu;dn.Marker=dn.extend({initialize(n){this._map=n,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(n){L.Util.setOptions(this,n),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(yt("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(r=>{this.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(n=>{this.isRelevantMarker(n)&&n.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(n){this.enabled()?this.disable():this.enable(n)},isRelevantMarker(n){return n instanceof L.Marker&&n.pm&&!n._pmTempLayer&&!n.pm._initTextMarker},_syncHintMarker(n){if(this._hintMarker.setLatLng(n.latlng),this.options.snappable){let r=n;r.target=this._hintMarker,this._handleSnapping(r)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(n){if(!n.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(n.latlng);let r=this._hintMarker.getLatLng(),a=new L.Marker(r,this.options.markerStyle);this._setPane(a,"markerPane"),this._finishLayer(a),a.pm||(a.options.draggable=!1),a.addTo(this._map.pm._getContainingLayer()),a.pm&&this.options.markerEditable?a.pm.enable():a.dragging&&a.dragging.disable(),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var n,r;(n=this.options.markerStyle)!=null&&n.icon&&((r=this._hintMarker)==null||r.setIcon(this.options.markerStyle.icon))}});var fn=63710088e-1,Sa={centimeters:fn*100,centimetres:fn*100,degrees:fn/111325,feet:fn*3.28084,inches:fn*39.37,kilometers:fn/1e3,kilometres:fn/1e3,meters:fn,metres:fn,miles:fn/1609.344,millimeters:fn*1e3,millimetres:fn*1e3,nauticalmiles:fn/1852,radians:1,yards:fn*1.0936};function Zi(n,r,a){a===void 0&&(a={});var u={type:"Feature"};return(a.id===0||a.id)&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.properties=r||{},u.geometry=n,u}function qi(n,r,a){if(a===void 0&&(a={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!mo(n[0])||!mo(n[1]))throw new Error("coordinates must contain numbers");var u={type:"Point",coordinates:n};return Zi(u,r,a)}function Pi(n,r,a){if(a===void 0&&(a={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var u={type:"LineString",coordinates:n};return Zi(u,r,a)}function wn(n,r){r===void 0&&(r={});var a={type:"FeatureCollection"};return r.id&&(a.id=r.id),r.bbox&&(a.bbox=r.bbox),a.features=n,a}function _u(n,r){r===void 0&&(r="kilometers");var a=Sa[r];if(!a)throw new Error(r+" units is invalid");return n*a}function Rr(n,r){r===void 0&&(r="kilometers");var a=Sa[r];if(!a)throw new Error(r+" units is invalid");return n/a}function Ln(n){var r=n%(2*Math.PI);return r*180/Math.PI}function Gn(n){var r=n%360;return r*Math.PI/180}function mo(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function ds(n){var r,a,u={type:"FeatureCollection",features:[]};if(n.type==="Feature"?a=n.geometry:a=n,a.type==="LineString")r=[a.coordinates];else if(a.type==="MultiLineString")r=a.coordinates;else if(a.type==="MultiPolygon")r=[].concat.apply([],a.coordinates);else if(a.type==="Polygon")r=a.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return r.forEach(function(d){r.forEach(function(g){for(var _=0;_<d.length-1;_++)for(var b=_;b<g.length-1;b++)if(!(d===g&&(Math.abs(_-b)===1||_===0&&b===d.length-2&&d[_][0]===d[d.length-1][0]&&d[_][1]===d[d.length-1][1]))){var k=go(d[_][0],d[_][1],d[_+1][0],d[_+1][1],g[b][0],g[b][1],g[b+1][0],g[b+1][1]);k&&u.features.push(qi([k[0],k[1]]))}})}),u}function go(n,r,a,u,d,g,_,b){var k,S,G,N,ge,Ce={x:null,y:null,onLine1:!1,onLine2:!1};return k=(b-g)*(a-n)-(_-d)*(u-r),k===0?Ce.x!==null&&Ce.y!==null?Ce:!1:(S=r-g,G=n-d,N=(_-d)*S-(b-g)*G,ge=(a-n)*S-(u-r)*G,S=N/k,G=ge/k,Ce.x=n+S*(a-n),Ce.y=r+S*(u-r),S>=0&&S<=1&&(Ce.onLine1=!0),G>=0&&G<=1&&(Ce.onLine2=!0),Ce.onLine1&&Ce.onLine2?[Ce.x,Ce.y]:!1)}dn.Line=dn.extend({initialize(n){this._map=n,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(n){L.Util.setOptions(this,n),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(yt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(n){this.enabled()?this.disable():this.enable(n)},_syncHintLine(){let n=this._layer.getLatLngs();if(n.length>0){let r=n[n.length-1];this._hintline.setLatLngs([r,this._hintMarker.getLatLng()])}},_syncHintMarker(n){if(this._hintMarker.setLatLng(n.latlng),this.options.snappable){let a=n;a.target=this._hintMarker,this._handleSnapping(a)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let r=this._layer._defaultShape().slice();r.push(this._hintMarker.getLatLng()),this._change(r)},hasSelfIntersection(){return ds(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(n,r){let a=L.polyline(this._layer.getLatLngs());n&&(r||(r=this._hintMarker.getLatLng()),a.addLatLng(r));let u=ds(a.toGeoJSON(15));this._doesSelfIntersect=u.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(u,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(n){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,n.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(n.latlng);let r=this._hintMarker.getLatLng(),a=this._layer.getLatLngs(),u=a[a.length-1];if(r.equals(a[0])||a.length>0&&r.equals(u)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:r,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(r);let d=this._createMarker(r);this._setTooltipText(),this._setHintLineAfterNewVertex(r),this._fireVertexAdded(d,void 0,r,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(n)},_setHintLineAfterNewVertex(n){this._hintline.setLatLngs([n,n])},_removeLastVertex(){let n=this._markers;if(n.length<=1){this.disable();return}let r=this._layer.getLatLngs(),a=n[n.length-1],{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(n,a);n.pop(),this._layerGroup.removeLayer(a);let d=n[n.length-1],g=r.indexOf(d.getLatLng());r=r.slice(0,g+1),this._layer.setLatLngs(r),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(a,u,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let n=this._layer.getLatLngs();if(n.length<=1)return;let r=L.polyline(n,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.options.snappable&&this._cleanupSnapping();let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},_createMarker(n){let r=new L.Marker(n,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),r.on("click",this._finishShape,this),r},_setTooltipText(){let{length:n}=this._layer.getLatLngs().flat(),r="";n<=1?r=yt("tooltips.continueLine"):r=yt("tooltips.finishLine"),this._hintMarker.setTooltipContent(r)},_change(n){this._fireChange(n,"Draw")},setStyle(){var n,r;(n=this._layer)==null||n.setStyle(this.options.templineStyle),(r=this._hintline)==null||r.setStyle(this.options.hintlineStyle)}}),dn.Polygon=dn.Line.extend({initialize(n){this._map=n,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(n){L.PM.Draw.Line.prototype.enable.call(this,n),this._layer.pm._shape="Polygon"},_createMarker(n){let r=new L.Marker(n,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._markers.push(r),this._layer.getLatLngs().flat().length===1?(r.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(r)-1,this.options.snappable&&this._cleanupSnapping()):r.on("click",()=>1),r},_setTooltipText(){let{length:n}=this._layer.getLatLngs().flat(),r="";n<=2?r=yt("tooltips.continueLine"):r=yt("tooltips.finishPoly"),this._hintMarker.setTooltipContent(r)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let n=this._layer.getLatLngs();if(n.length<=2)return;let r=L.polygon(n,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))}}),dn.Rectangle=dn.extend({initialize(n){this._map=n,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(n){if(L.Util.setOptions(this,n),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(yt("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let r=0;r<2;r+=1){let a=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(a,"vertexPane"),a._pmTempLayer=!0,this._layerGroup.addLayer(a),this._styleMarkers.push(a)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(n){this.enabled()?this.disable():this.enable(n)},_placeStartingMarkers(n){this._hintMarker._snapped||this._hintMarker.setLatLng(n.latlng);let r=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(r),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(a=>{L.DomUtil.addClass(a._icon,"visible"),a.setLatLng(r)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(yt("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let n=this._startMarker.getLatLng();n&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([n,n]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(n){if(this._hintMarker.setLatLng(n.latlng),this.options.snappable){let a=n;a.target=this._hintMarker,this._handleSnapping(a)}let r=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(r,"Draw")},_syncRectangleSize(){let n=Ca(this._startMarker.getLatLng(),this._map),r=Ca(this._hintMarker.getLatLng(),this._map),a=L.PM.Utils._getRotatedRectangle(n,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(a),this.options.cursorMarker&&this._styleMarkers){let u=[];a.forEach(d=>{!d.equals(n,1e-8)&&!d.equals(r,1e-8)&&u.push(d)}),u.forEach((d,g)=>{try{this._styleMarkers[g].setLatLng(d)}catch{}})}},_findCorners(){let n=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(n[0],n[2],this.options.rectangleAngle||0,this._map)},_finishShape(n){this._hintMarker._snapped||this._hintMarker.setLatLng(n.latlng);let r=this._hintMarker.getLatLng(),a=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||a.equals(r))return;let u=L.rectangle([a,r],this.options.pathOptions);if(this.options.rectangleAngle){let g=L.PM.Utils._getRotatedRectangle(a,r,this.options.rectangleAngle||0,this._map);u.setLatLngs(g),u.pm&&u.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(u,"layerPane"),this._finishLayer(u),u.addTo(this._map.pm._getContainingLayer()),this._fireCreate(u);let d=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(d))},setStyle(){var n;(n=this._layer)==null||n.setStyle(this.options.pathOptions)}}),dn.CircleMarker=dn.extend({initialize(n){this._map=n,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(n){if(L.Util.setOptions(this,n),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let r={};L.extend(r,this.options.templineStyle),r.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),r),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(yt("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(yt("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(n=>{this.isRelevantMarker(n)&&n.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(n=>{this.isRelevantMarker(n)&&n.pm.disable()})},enabled(){return this._enabled},toggle(n){this.enabled()?this.disable():this.enable(n)},_placeCenterMarker(n){this._hintMarker._snapped||this._hintMarker.setLatLng(n.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let r=this._hintMarker.getLatLng();this._centerMarker.setLatLng(r),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let n=this._centerMarker.getLatLng();n&&(this._layer.setLatLng(n),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(yt("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let n=this._centerMarker.getLatLng(),r=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([n,r])},_syncCircleRadius(){let n=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(n,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a)},_syncHintMarker(n){if(this._hintMarker.setLatLng(n.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let a=n;a.target=this._hintMarker,this._handleSnapping(a)}this._handleHintMarkerSnapping();let r=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(r,"Draw")},isRelevantMarker(n){return n instanceof L.CircleMarker&&!(n instanceof L.Circle)&&n.pm&&!n._pmTempLayer},_createMarker(n){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!n.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(n.latlng);let r=this._hintMarker.getLatLng(),a=new this._BaseCircleClass(r,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(a),this._fireCreate(a),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(n){n.pm&&this.options.markerEditable&&n.pm.enable()},_finishShape(n){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(n.latlng);let r=this._centerMarker.getLatLng(),a=this._defaultRadius;if(this.options[this._editableOption]){let _=this._hintMarker.getLatLng();a=this._distanceCalculation(r,_),this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?a=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(a=this.options[this._maxRadiusOption])}let u={...this.options.pathOptions,radius:a},d=new this._BaseCircleClass(r,u);this._setPane(d,"layerPane"),this._finishLayer(d),d.addTo(this._map.pm._getContainingLayer()),d.pm&&d.pm._updateHiddenPolyCircle(),this._fireCreate(d);let g=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(g))},_getNewDestinationOfHintMarker(){let n=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return n;let r=this._centerMarker.getLatLng(),a=this._distanceCalculation(r,n);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?n=hs(this._map,r,n,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(n=hs(this._map,r,n,this._getMaxDistanceInMeter()))}return n},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let n=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._distanceCalculation(n,r);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var r,a;let n={};L.extend(n,this.options.templineStyle),this.options[this._editableOption]&&(n.radius=0),(r=this._layer)==null||r.setStyle(n),(a=this._hintline)==null||a.setStyle(this.options.hintlineStyle)},_distanceCalculation(n,r){return this._map.project(n).distanceTo(this._map.project(r))}}),dn.Circle=dn.CircleMarker.extend({initialize(n){this._map=n,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(n,r){return this._map.distance(n,r)}});function Vn(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function oi(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function fs(n){return n.type==="Feature"?n.geometry:n}function _o(n,r){return n.type==="FeatureCollection"?"FeatureCollection":n.type==="GeometryCollection"?"GeometryCollection":n.type==="Feature"&&n.geometry!==null?n.geometry.type:n.type}function yo(n,r,a){if(n!==null)for(var u,d,g,_,b,k,S,G=0,N=0,ge,Ce=n.type,Ue=Ce==="FeatureCollection",Qe=Ce==="Feature",st=Ue?n.features.length:1,At=0;At<st;At++){S=Ue?n.features[At].geometry:Qe?n.geometry:n,ge=S?S.type==="GeometryCollection":!1,b=ge?S.geometries.length:1;for(var $=0;$<b;$++){var X=0,ae=0;if(_=ge?S.geometries[$]:S,_!==null){k=_.coordinates;var ke=_.type;switch(G=0,ke){case null:break;case"Point":if(r(k,N,At,X,ae)===!1)return!1;N++,X++;break;case"LineString":case"MultiPoint":for(u=0;u<k.length;u++){if(r(k[u],N,At,X,ae)===!1)return!1;N++,ke==="MultiPoint"&&X++}ke==="LineString"&&X++;break;case"Polygon":case"MultiLineString":for(u=0;u<k.length;u++){for(d=0;d<k[u].length-G;d++){if(r(k[u][d],N,At,X,ae)===!1)return!1;N++}ke==="MultiLineString"&&X++,ke==="Polygon"&&ae++}ke==="Polygon"&&X++;break;case"MultiPolygon":for(u=0;u<k.length;u++){for(ae=0,d=0;d<k[u].length;d++){for(g=0;g<k[u][d].length-G;g++){if(r(k[u][d][g],N,At,X,ae)===!1)return!1;N++}ae++}X++}break;case"GeometryCollection":for(u=0;u<_.geometries.length;u++)if(yo(_.geometries[u],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function _n(n,r){if(n.type==="Feature")r(n,0);else if(n.type==="FeatureCollection")for(var a=0;a<n.features.length&&r(n.features[a],a)!==!1;a++);}function cr(n,r,a){var u=a;return _n(n,function(d,g){g===0&&a===void 0?u=d:u=r(u,d,g)}),u}function yu(n,r){var a,u,d,g,_,b,k,S,G,N,ge=0,Ce=n.type==="FeatureCollection",Ue=n.type==="Feature",Qe=Ce?n.features.length:1;for(a=0;a<Qe;a++){for(b=Ce?n.features[a].geometry:Ue?n.geometry:n,S=Ce?n.features[a].properties:Ue?n.properties:{},G=Ce?n.features[a].bbox:Ue?n.bbox:void 0,N=Ce?n.features[a].id:Ue?n.id:void 0,k=b?b.type==="GeometryCollection":!1,_=k?b.geometries.length:1,d=0;d<_;d++){if(g=k?b.geometries[d]:b,g===null){if(r(null,ge,S,G,N)===!1)return!1;continue}switch(g.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(r(g,ge,S,G,N)===!1)return!1;break}case"GeometryCollection":{for(u=0;u<g.geometries.length;u++)if(r(g.geometries[u],ge,S,G,N)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ge++}}function Jn(n,r){yu(n,function(a,u,d,g,_){var b=a===null?null:a.type;switch(b){case null:case"Point":case"LineString":case"Polygon":return r(Zi(a,d,{bbox:g,id:_}),u,0)===!1?!1:void 0}var k;switch(b){case"MultiPoint":k="Point";break;case"MultiLineString":k="LineString";break;case"MultiPolygon":k="Polygon";break}for(var S=0;S<a.coordinates.length;S++){var G=a.coordinates[S],N={type:k,coordinates:G};if(r(Zi(N,d),u,S)===!1)return!1}})}function vu(n){if(!n)throw new Error("geojson is required");var r=[];return Jn(n,function(a){hr(a,r)}),wn(r)}function hr(n,r){var a=[],u=n.geometry;if(u!==null){switch(u.type){case"Polygon":a=oi(u);break;case"LineString":a=[oi(u)]}a.forEach(function(d){var g=bu(d,n.properties);g.forEach(function(_){_.id=r.length,r.push(_)})})}}function bu(n,r){var a=[];return n.reduce(function(u,d){var g=Pi([u,d],r);return g.bbox=Or(u,d),a.push(g),d}),a}function Or(n,r){var a=n[0],u=n[1],d=r[0],g=r[1],_=a<d?a:d,b=u<g?u:g,k=a>d?a:d,S=u>g?u:g;return[_,b,k,S]}var ps=vu,ms=v($i(),1);function xu(n,r){var a={},u=[];if(n.type==="LineString"&&(n=Zi(n)),r.type==="LineString"&&(r=Zi(r)),n.type==="Feature"&&r.type==="Feature"&&n.geometry!==null&&r.geometry!==null&&n.geometry.type==="LineString"&&r.geometry.type==="LineString"&&n.geometry.coordinates.length===2&&r.geometry.coordinates.length===2){var d=gi(n,r);return d&&u.push(d),wn(u)}var g=(0,ms.default)();return g.load(ps(r)),_n(ps(n),function(_){_n(g.search(_),function(b){var k=gi(_,b);if(k){var S=oi(k).join(",");a[S]||(a[S]=!0,u.push(k))}})}),wn(u)}function gi(n,r){var a=oi(n),u=oi(r);if(a.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(u.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var d=a[0][0],g=a[0][1],_=a[1][0],b=a[1][1],k=u[0][0],S=u[0][1],G=u[1][0],N=u[1][1],ge=(N-S)*(_-d)-(G-k)*(b-g),Ce=(G-k)*(g-S)-(N-S)*(d-k),Ue=(_-d)*(g-S)-(b-g)*(d-k);if(ge===0)return null;var Qe=Ce/ge,st=Ue/ge;if(Qe>=0&&Qe<=1&&st>=0&&st<=1){var At=d+Qe*(_-d),$=g+Qe*(b-g);return qi([At,$])}return null}var ai=xu,Ba=v($i(),1);function vo(n,r,a){a===void 0&&(a={});var u=Vn(n),d=Vn(r),g=Gn(d[1]-u[1]),_=Gn(d[0]-u[0]),b=Gn(u[1]),k=Gn(d[1]),S=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(b)*Math.cos(k);return _u(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)),a.units)}var Ki=vo;function _i(n){var r=n[0],a=n[1],u=n[2],d=n[3],g=Ki(n.slice(0,2),[u,a]),_=Ki(n.slice(0,2),[r,d]);if(g>=_){var b=(a+d)/2;return[r,b-(u-r)/2,u,b+(u-r)/2]}else{var k=(r+u)/2;return[k-(d-a)/2,a,k+(d-a)/2,d]}}var wu=_i;function Si(n){var r=[1/0,1/0,-1/0,-1/0];return yo(n,function(a){r[0]>a[0]&&(r[0]=a[0]),r[1]>a[1]&&(r[1]=a[1]),r[2]<a[0]&&(r[2]=a[0]),r[3]<a[1]&&(r[3]=a[1])}),r}Si.default=Si;var Ir=Si;function yi(n,r){r===void 0&&(r={});var a=r.precision,u=r.coordinates,d=r.mutate;if(a=a==null||isNaN(a)?6:a,u=u==null||isNaN(u)?3:u,!n)throw new Error("<geojson> is required");if(typeof a!="number")throw new Error("<precision> must be a number");if(typeof u!="number")throw new Error("<coordinates> must be a number");(d===!1||d===void 0)&&(n=JSON.parse(JSON.stringify(n)));var g=Math.pow(10,a);return yo(n,function(_){gs(_,g,u)}),n}function gs(n,r,a){n.length>a&&n.splice(a,n.length);for(var u=0;u<n.length;u++)n[u]=Math.round(n[u]*r)/r;return n}var Aa=yi;function _s(n,r,a){if(a===void 0&&(a={}),a.final===!0)return ys(n,r);var u=Vn(n),d=Vn(r),g=Gn(u[0]),_=Gn(d[0]),b=Gn(u[1]),k=Gn(d[1]),S=Math.sin(_-g)*Math.cos(k),G=Math.cos(b)*Math.sin(k)-Math.sin(b)*Math.cos(k)*Math.cos(_-g);return Ln(Math.atan2(S,G))}function ys(n,r){var a=_s(r,n);return a=(a+180)%360,a}function vs(n,r,a,u){u===void 0&&(u={});var d=Vn(n),g=Gn(d[0]),_=Gn(d[1]),b=Gn(a),k=Rr(r,u.units),S=Math.asin(Math.sin(_)*Math.cos(k)+Math.cos(_)*Math.sin(k)*Math.cos(b)),G=g+Math.atan2(Math.sin(b)*Math.sin(k)*Math.cos(_),Math.cos(k)-Math.sin(_)*Math.sin(S)),N=Ln(G),ge=Ln(S);return qi([N,ge],u.properties)}function bs(n,r,a){a===void 0&&(a={});var u=qi([1/0,1/0],{dist:1/0}),d=0;return Jn(n,function(g){for(var _=oi(g),b=0;b<_.length-1;b++){var k=qi(_[b]);k.properties.dist=Ki(r,k,a);var S=qi(_[b+1]);S.properties.dist=Ki(r,S,a);var G=Ki(k,S,a),N=Math.max(k.properties.dist,S.properties.dist),ge=_s(k,S),Ce=vs(r,N,ge+90,a),Ue=vs(r,N,ge-90,a),Qe=ai(Pi([Ce.geometry.coordinates,Ue.geometry.coordinates]),Pi([k.geometry.coordinates,S.geometry.coordinates])),st=null;Qe.features.length>0&&(st=Qe.features[0],st.properties.dist=Ki(r,st,a),st.properties.location=d+Ki(k,st,a)),k.properties.dist<u.properties.dist&&(u=k,u.properties.index=b,u.properties.location=d),S.properties.dist<u.properties.dist&&(u=S,u.properties.index=b+1,u.properties.location=d+G),st&&st.properties.dist<u.properties.dist&&(u=st,u.properties.index=b),d+=G}}),u}var dr=bs;function xs(n,r){if(!n)throw new Error("line is required");if(!r)throw new Error("splitter is required");var a=_o(n),u=_o(r);if(a!=="LineString")throw new Error("line must be LineString");if(u==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(u==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var d=Aa(r,{precision:7});switch(u){case"Point":return Ls(n,d);case"MultiPoint":return ws(n,d);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return ws(n,ai(n,d))}}function ws(n,r){var a=[],u=(0,Ba.default)();return Jn(r,function(d){if(a.forEach(function(b,k){b.id=k}),!a.length)a=Ls(n,d).features,a.forEach(function(b){b.bbox||(b.bbox=wu(Ir(b)))}),u.load(wn(a));else{var g=u.search(d);if(g.features.length){var _=Ta(d,g);a=a.filter(function(b){return b.id!==_.id}),u.remove(_),_n(Ls(_,d),function(b){a.push(b),u.insert(b)})}}}),wn(a)}function Ls(n,r){var a=[],u=oi(n)[0],d=oi(n)[n.geometry.coordinates.length-1];if(fr(u,Vn(r))||fr(d,Vn(r)))return wn([n]);var g=(0,Ba.default)(),_=ps(n);g.load(_);var b=g.search(r);if(!b.features.length)return wn([n]);var k=Ta(r,b),S=[u],G=cr(_,function(N,ge,Ce){var Ue=oi(ge)[1],Qe=Vn(r);return Ce===k.id?(N.push(Qe),a.push(Pi(N)),fr(Qe,Ue)?[Qe]:[Qe,Ue]):(N.push(Ue),N)},S);return G.length>1&&a.push(Pi(G)),wn(a)}function Ta(n,r){if(!r.features.length)throw new Error("lines must contain features");if(r.features.length===1)return r.features[0];var a,u=1/0;return _n(r,function(d){var g=dr(d,n),_=g.properties.dist;_<u&&(a=d,u=_)}),a}function fr(n,r){return n[0]===r[0]&&n[1]===r[1]}var Lu=xs;function Fr(n,r,a){if(a===void 0&&(a={}),!n)throw new Error("point is required");if(!r)throw new Error("polygon is required");var u=Vn(n),d=fs(r),g=d.type,_=r.bbox,b=d.coordinates;if(_&&Ra(u,_)===!1)return!1;g==="Polygon"&&(b=[b]);for(var k=!1,S=0;S<b.length&&!k;S++)if(Da(u,b[S][0],a.ignoreBoundary)){for(var G=!1,N=1;N<b[S].length&&!G;)Da(u,b[S][N],!a.ignoreBoundary)&&(G=!0),N++;G||(k=!0)}return k}function Da(n,r,a){var u=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var d=0,g=r.length-1;d<r.length;g=d++){var _=r[d][0],b=r[d][1],k=r[g][0],S=r[g][1],G=n[1]*(_-k)+b*(k-n[0])+S*(n[0]-_)===0&&(_-n[0])*(k-n[0])<=0&&(b-n[1])*(S-n[1])<=0;if(G)return!a;var N=b>n[1]!=S>n[1]&&n[0]<(k-_)*(n[1]-b)/(S-b)+_;N&&(u=!u)}return u}function Ra(n,r){return r[0]<=n[0]&&r[1]<=n[1]&&r[2]>=n[0]&&r[3]>=n[1]}function Cu(n,r,a){a===void 0&&(a={});for(var u=Vn(n),d=oi(r),g=0;g<d.length-1;g++){var _=!1;if(a.ignoreEndVertices&&(g===0&&(_="start"),g===d.length-2&&(_="end"),g===0&&g+1===d.length-1&&(_="both")),li(d[g],d[g+1],u,_,typeof a.epsilon>"u"?null:a.epsilon))return!0}return!1}function li(n,r,a,u,d){var g=a[0],_=a[1],b=n[0],k=n[1],S=r[0],G=r[1],N=a[0]-b,ge=a[1]-k,Ce=S-b,Ue=G-k,Qe=N*Ue-ge*Ce;if(d!==null){if(Math.abs(Qe)>d)return!1}else if(Qe!==0)return!1;if(u){if(u==="start")return Math.abs(Ce)>=Math.abs(Ue)?Ce>0?b<g&&g<=S:S<=g&&g<b:Ue>0?k<_&&_<=G:G<=_&&_<k;if(u==="end")return Math.abs(Ce)>=Math.abs(Ue)?Ce>0?b<=g&&g<S:S<g&&g<=b:Ue>0?k<=_&&_<G:G<_&&_<=k;if(u==="both")return Math.abs(Ce)>=Math.abs(Ue)?Ce>0?b<g&&g<S:S<g&&g<b:Ue>0?k<_&&_<G:G<_&&_<k}else return Math.abs(Ce)>=Math.abs(Ue)?Ce>0?b<=g&&g<=S:S<=g&&g<=b:Ue>0?k<=_&&_<=G:G<=_&&_<=k;return!1}var Bi=Cu;function ku(n,r){var a=fs(n),u=fs(r),d=a.type,g=u.type,_=a.coordinates,b=u.coordinates;switch(d){case"Point":switch(g){case"Point":return ks(_,b);default:throw new Error("feature2 "+g+" geometry not supported")}case"MultiPoint":switch(g){case"Point":return Cs(a,u);case"MultiPoint":return Eu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return Bi(u,a,{ignoreEndVertices:!0});case"LineString":return Nr(a,u);case"MultiPoint":return Oa(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return Fr(u,a,{ignoreBoundary:!0});case"LineString":return Pu(a,u);case"Polygon":return pr(a,u);case"MultiPoint":return Mu(a,u);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+d+" geometry not supported")}}function Cs(n,r){var a,u=!1;for(a=0;a<n.coordinates.length;a++)if(ks(n.coordinates[a],r.coordinates)){u=!0;break}return u}function Eu(n,r){for(var a=0,u=r.coordinates;a<u.length;a++){for(var d=u[a],g=!1,_=0,b=n.coordinates;_<b.length;_++){var k=b[_];if(ks(d,k)){g=!0;break}}if(!g)return!1}return!0}function Oa(n,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Bi(g,n,{ignoreEndVertices:!0})&&(a=!0),!Bi(g,n))return!1}return!!a}function Mu(n,r){for(var a=0,u=r.coordinates;a<u.length;a++){var d=u[a];if(!Fr(d,n,{ignoreBoundary:!0}))return!1}return!0}function Nr(n,r){for(var a=!1,u=0,d=r.coordinates;u<d.length;u++){var g=d[u];if(Bi({type:"Point",coordinates:g},n,{ignoreEndVertices:!0})&&(a=!0),!Bi({type:"Point",coordinates:g},n,{ignoreEndVertices:!1}))return!1}return a}function Pu(n,r){var a=!1,u=0,d=Ir(n),g=Ir(r);if(!bo(d,g))return!1;for(u;u<r.coordinates.length-1;u++){var _=Su(r.coordinates[u],r.coordinates[u+1]);if(Fr({type:"Point",coordinates:_},n,{ignoreBoundary:!0})){a=!0;break}}return a}function pr(n,r){if(n.type==="Feature"&&n.geometry===null||r.type==="Feature"&&r.geometry===null)return!1;var a=Ir(n),u=Ir(r);if(!bo(a,u))return!1;for(var d=fs(r).coordinates,g=0,_=d;g<_.length;g++)for(var b=_[g],k=0,S=b;k<S.length;k++){var G=S[k];if(!Fr(G,n))return!1}return!0}function bo(n,r){return!(n[0]>r[0]||n[2]<r[2]||n[1]>r[1]||n[3]<r[3])}function ks(n,r){return n[0]===r[0]&&n[1]===r[1]}function Su(n,r){return[(n[0]+r[0])/2,(n[1]+r[1])/2]}var vi=v(ki()),xo=n=>()=>n,Es=n=>{let r=n?(a,u)=>u.minus(a).abs().isLessThanOrEqualTo(n):xo(!1);return(a,u)=>r(a,u)?0:a.comparedTo(u)};function zr(n){let r=n?(a,u,d,g,_)=>a.exponentiatedBy(2).isLessThanOrEqualTo(g.minus(u).exponentiatedBy(2).plus(_.minus(d).exponentiatedBy(2)).times(n)):xo(!1);return(a,u,d)=>{let g=a.x,_=a.y,b=d.x,k=d.y,S=_.minus(k).times(u.x.minus(b)).minus(g.minus(b).times(u.y.minus(k)));return r(S,g,_,b,k)?0:S.comparedTo(0)}}var Bu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mr=Math.ceil,pn=Math.floor,yn="[BigNumber Error] ",wo=yn+"Number primitive has more than 15 significant digits: ",Xn=1e14,gt=14,Lo=9007199254740991,Ms=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],bi=1e7,Cn=1e9;function Ia(n){var r,a,u,d=$.prototype={constructor:$,toString:null,valueOf:null},g=new $(1),_=20,b=4,k=-7,S=21,G=-1e7,N=1e7,ge=!1,Ce=1,Ue=0,Qe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},st="0123456789abcdefghijklmnopqrstuvwxyz",At=!0;function $(E,A){var D,T,O,I,Q,Y,oe,me,pe=this;if(!(pe instanceof $))return new $(E,A);if(A==null){if(E&&E._isBigNumber===!0){pe.s=E.s,!E.c||E.e>N?pe.c=pe.e=null:E.e<G?pe.c=[pe.e=0]:(pe.e=E.e,pe.c=E.c.slice());return}if((Y=typeof E=="number")&&E*0==0){if(pe.s=1/E<0?(E=-E,-1):1,E===~~E){for(I=0,Q=E;Q>=10;Q/=10,I++);I>N?pe.c=pe.e=null:(pe.e=I,pe.c=[E]);return}me=String(E)}else{if(!Bu.test(me=String(E)))return u(pe,me,Y);pe.s=me.charCodeAt(0)==45?(me=me.slice(1),-1):1}(I=me.indexOf("."))>-1&&(me=me.replace(".","")),(Q=me.search(/e/i))>0?(I<0&&(I=Q),I+=+me.slice(Q+1),me=me.substring(0,Q)):I<0&&(I=me.length)}else{if(t(A,2,st.length,"Base"),A==10&&At)return pe=new $(E),ue(pe,_+pe.e+1,b);if(me=String(E),Y=typeof E=="number"){if(E*0!=0)return u(pe,me,Y,A);if(pe.s=1/E<0?(me=me.slice(1),-1):1,$.DEBUG&&me.replace(/^0\.0*|\./,"").length>15)throw Error(wo+E)}else pe.s=me.charCodeAt(0)===45?(me=me.slice(1),-1):1;for(D=st.slice(0,A),I=Q=0,oe=me.length;Q<oe;Q++)if(D.indexOf(T=me.charAt(Q))<0){if(T=="."){if(Q>I){I=oe;continue}}else if(!O&&(me==me.toUpperCase()&&(me=me.toLowerCase())||me==me.toLowerCase()&&(me=me.toUpperCase()))){O=!0,Q=-1,I=0;continue}return u(pe,String(E),Y,A)}Y=!1,me=a(me,A,10,pe.s),(I=me.indexOf("."))>-1?me=me.replace(".",""):I=me.length}for(Q=0;me.charCodeAt(Q)===48;Q++);for(oe=me.length;me.charCodeAt(--oe)===48;);if(me=me.slice(Q,++oe)){if(oe-=Q,Y&&$.DEBUG&&oe>15&&(E>Lo||E!==pn(E)))throw Error(wo+pe.s*E);if((I=I-Q-1)>N)pe.c=pe.e=null;else if(I<G)pe.c=[pe.e=0];else{if(pe.e=I,pe.c=[],Q=(I+1)%gt,I<0&&(Q+=gt),Q<oe){for(Q&&pe.c.push(+me.slice(0,Q)),oe-=gt;Q<oe;)pe.c.push(+me.slice(Q,Q+=gt));Q=gt-(me=me.slice(Q)).length}else Q-=oe;for(;Q--;me+="0");pe.c.push(+me)}}else pe.c=[pe.e=0]}$.clone=Ia,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(E){var A,D;if(E!=null)if(typeof E=="object"){if(E.hasOwnProperty(A="DECIMAL_PLACES")&&(D=E[A],t(D,0,Cn,A),_=D),E.hasOwnProperty(A="ROUNDING_MODE")&&(D=E[A],t(D,0,8,A),b=D),E.hasOwnProperty(A="EXPONENTIAL_AT")&&(D=E[A],D&&D.pop?(t(D[0],-1e9,0,A),t(D[1],0,Cn,A),k=D[0],S=D[1]):(t(D,-1e9,Cn,A),k=-(S=D<0?-D:D))),E.hasOwnProperty(A="RANGE"))if(D=E[A],D&&D.pop)t(D[0],-1e9,-1,A),t(D[1],1,Cn,A),G=D[0],N=D[1];else if(t(D,-1e9,Cn,A),D)G=-(N=D<0?-D:D);else throw Error(yn+A+" cannot be zero: "+D);if(E.hasOwnProperty(A="CRYPTO"))if(D=E[A],D===!!D)if(D)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ge=D;else throw ge=!D,Error(yn+"crypto unavailable");else ge=D;else throw Error(yn+A+" not true or false: "+D);if(E.hasOwnProperty(A="MODULO_MODE")&&(D=E[A],t(D,0,9,A),Ce=D),E.hasOwnProperty(A="POW_PRECISION")&&(D=E[A],t(D,0,Cn,A),Ue=D),E.hasOwnProperty(A="FORMAT"))if(D=E[A],typeof D=="object")Qe=D;else throw Error(yn+A+" not an object: "+D);if(E.hasOwnProperty(A="ALPHABET"))if(D=E[A],typeof D=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(D))At=D.slice(0,10)=="0123456789",st=D;else throw Error(yn+A+" invalid: "+D)}else throw Error(yn+"Object expected: "+E);return{DECIMAL_PLACES:_,ROUNDING_MODE:b,EXPONENTIAL_AT:[k,S],RANGE:[G,N],CRYPTO:ge,MODULO_MODE:Ce,POW_PRECISION:Ue,FORMAT:Qe,ALPHABET:st}},$.isBigNumber=function(E){if(!E||E._isBigNumber!==!0)return!1;if(!$.DEBUG)return!0;var A,D,T=E.c,O=E.e,I=E.s;e:if({}.toString.call(T)=="[object Array]"){if((I===1||I===-1)&&O>=-1e9&&O<=Cn&&O===pn(O)){if(T[0]===0){if(O===0&&T.length===1)return!0;break e}if(A=(O+1)%gt,A<1&&(A+=gt),String(T[0]).length==A){for(A=0;A<T.length;A++)if(D=T[A],D<0||D>=Xn||D!==pn(D))break e;if(D!==0)return!0}}}else if(T===null&&O===null&&(I===null||I===1||I===-1))return!0;throw Error(yn+"Invalid BigNumber: "+E)},$.maximum=$.max=function(){return ae(arguments,-1)},$.minimum=$.min=function(){return ae(arguments,1)},$.random=function(){var E=9007199254740992,A=Math.random()*E&2097151?function(){return pn(Math.random()*E)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(D){var T,O,I,Q,Y,oe=0,me=[],pe=new $(g);if(D==null?D=_:t(D,0,Cn),Q=mr(D/gt),ge)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(Q*=2));oe<Q;)Y=T[oe]*131072+(T[oe+1]>>>11),Y>=9e15?(O=crypto.getRandomValues(new Uint32Array(2)),T[oe]=O[0],T[oe+1]=O[1]):(me.push(Y%1e14),oe+=2);oe=Q/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(Q*=7);oe<Q;)Y=(T[oe]&31)*281474976710656+T[oe+1]*1099511627776+T[oe+2]*4294967296+T[oe+3]*16777216+(T[oe+4]<<16)+(T[oe+5]<<8)+T[oe+6],Y>=9e15?crypto.randomBytes(7).copy(T,oe):(me.push(Y%1e14),oe+=7);oe=Q/7}else throw ge=!1,Error(yn+"crypto unavailable");if(!ge)for(;oe<Q;)Y=A(),Y<9e15&&(me[oe++]=Y%1e14);for(Q=me[--oe],D%=gt,Q&&D&&(Y=Ms[gt-D],me[oe]=pn(Q/Y)*Y);me[oe]===0;me.pop(),oe--);if(oe<0)me=[I=0];else{for(I=-1;me[0]===0;me.splice(0,1),I-=gt);for(oe=1,Y=me[0];Y>=10;Y/=10,oe++);oe<gt&&(I-=gt-oe)}return pe.e=I,pe.c=me,pe}}(),$.sum=function(){for(var E=1,A=arguments,D=new $(A[0]);E<A.length;)D=D.plus(A[E++]);return D},a=function(){var E="0123456789";function A(D,T,O,I){for(var Q,Y=[0],oe,me=0,pe=D.length;me<pe;){for(oe=Y.length;oe--;Y[oe]*=T);for(Y[0]+=I.indexOf(D.charAt(me++)),Q=0;Q<Y.length;Q++)Y[Q]>O-1&&(Y[Q+1]==null&&(Y[Q+1]=0),Y[Q+1]+=Y[Q]/O|0,Y[Q]%=O)}return Y.reverse()}return function(D,T,O,I,Q){var Y,oe,me,pe,Ne,rt,at,ht,Ft=D.indexOf("."),jt=_,Rt=b;for(Ft>=0&&(pe=Ue,Ue=0,D=D.replace(".",""),ht=new $(T),rt=ht.pow(D.length-Ft),Ue=pe,ht.c=A(m(Rn(rt.c),rt.e,"0"),10,O,E),ht.e=ht.c.length),at=A(D,T,O,Q?(Y=st,E):(Y=E,st)),me=pe=at.length;at[--pe]==0;at.pop());if(!at[0])return Y.charAt(0);if(Ft<0?--me:(rt.c=at,rt.e=me,rt.s=I,rt=r(rt,ht,jt,Rt,O),at=rt.c,Ne=rt.r,me=rt.e),oe=me+jt+1,Ft=at[oe],pe=O/2,Ne=Ne||oe<0||at[oe+1]!=null,Ne=Rt<4?(Ft!=null||Ne)&&(Rt==0||Rt==(rt.s<0?3:2)):Ft>pe||Ft==pe&&(Rt==4||Ne||Rt==6&&at[oe-1]&1||Rt==(rt.s<0?8:7)),oe<1||!at[0])D=Ne?m(Y.charAt(1),-jt,Y.charAt(0)):Y.charAt(0);else{if(at.length=oe,Ne)for(--O;++at[--oe]>O;)at[oe]=0,oe||(++me,at=[1].concat(at));for(pe=at.length;!at[--pe];);for(Ft=0,D="";Ft<=pe;D+=Y.charAt(at[Ft++]));D=m(D,me,Y.charAt(0))}return D}}(),r=function(){function E(T,O,I){var Q,Y,oe,me,pe=0,Ne=T.length,rt=O%bi,at=O/bi|0;for(T=T.slice();Ne--;)oe=T[Ne]%bi,me=T[Ne]/bi|0,Q=at*oe+me*rt,Y=rt*oe+Q%bi*bi+pe,pe=(Y/I|0)+(Q/bi|0)+at*me,T[Ne]=Y%I;return pe&&(T=[pe].concat(T)),T}function A(T,O,I,Q){var Y,oe;if(I!=Q)oe=I>Q?1:-1;else for(Y=oe=0;Y<I;Y++)if(T[Y]!=O[Y]){oe=T[Y]>O[Y]?1:-1;break}return oe}function D(T,O,I,Q){for(var Y=0;I--;)T[I]-=Y,Y=T[I]<O[I]?1:0,T[I]=Y*Q+T[I]-O[I];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,O,I,Q,Y){var oe,me,pe,Ne,rt,at,ht,Ft,jt,Rt,Ut,En,Ga,Iu,Fu,Ai,Mo,hi=T.s==O.s?1:-1,On=T.c,rn=O.c;if(!On||!On[0]||!rn||!rn[0])return new $(!T.s||!O.s||(On?rn&&On[0]==rn[0]:!rn)?NaN:On&&On[0]==0||!rn?hi*0:hi/0);for(Ft=new $(hi),jt=Ft.c=[],me=T.e-O.e,hi=I+me+1,Y||(Y=Xn,me=Dn(T.e/gt)-Dn(O.e/gt),hi=hi/gt|0),pe=0;rn[pe]==(On[pe]||0);pe++);if(rn[pe]>(On[pe]||0)&&me--,hi<0)jt.push(1),Ne=!0;else{for(Iu=On.length,Ai=rn.length,pe=0,hi+=2,rt=pn(Y/(rn[0]+1)),rt>1&&(rn=E(rn,rt,Y),On=E(On,rt,Y),Ai=rn.length,Iu=On.length),Ga=Ai,Rt=On.slice(0,Ai),Ut=Rt.length;Ut<Ai;Rt[Ut++]=0);Mo=rn.slice(),Mo=[0].concat(Mo),Fu=rn[0],rn[1]>=Y/2&&Fu++;do{if(rt=0,oe=A(rn,Rt,Ai,Ut),oe<0){if(En=Rt[0],Ai!=Ut&&(En=En*Y+(Rt[1]||0)),rt=pn(En/Fu),rt>1)for(rt>=Y&&(rt=Y-1),at=E(rn,rt,Y),ht=at.length,Ut=Rt.length;A(at,Rt,ht,Ut)==1;)rt--,D(at,Ai<ht?Mo:rn,ht,Y),ht=at.length,oe=1;else rt==0&&(oe=rt=1),at=rn.slice(),ht=at.length;if(ht<Ut&&(at=[0].concat(at)),D(Rt,at,Ut,Y),Ut=Rt.length,oe==-1)for(;A(rn,Rt,Ai,Ut)<1;)rt++,D(Rt,Ai<Ut?Mo:rn,Ut,Y),Ut=Rt.length}else oe===0&&(rt++,Rt=[0]);jt[pe++]=rt,Rt[0]?Rt[Ut++]=On[Ga]||0:(Rt=[On[Ga]],Ut=1)}while((Ga++<Iu||Rt[0]!=null)&&hi--);Ne=Rt[0]!=null,jt[0]||jt.splice(0,1)}if(Y==Xn){for(pe=1,hi=jt[0];hi>=10;hi/=10,pe++);ue(Ft,I+(Ft.e=pe+me*gt-1)+1,Q,Ne)}else Ft.e=me,Ft.r=+Ne;return Ft}}();function X(E,A,D,T){var O,I,Q,Y,oe;if(D==null?D=b:t(D,0,8),!E.c)return E.toString();if(O=E.c[0],Q=E.e,A==null)oe=Rn(E.c),oe=T==1||T==2&&(Q<=k||Q>=S)?c(oe,Q):m(oe,Q,"0");else if(E=ue(new $(E),A,D),I=E.e,oe=Rn(E.c),Y=oe.length,T==1||T==2&&(A<=I||I<=k)){for(;Y<A;oe+="0",Y++);oe=c(oe,I)}else if(A-=Q,oe=m(oe,I,"0"),I+1>Y){if(--A>0)for(oe+=".";A--;oe+="0");}else if(A+=I-Y,A>0)for(I+1==Y&&(oe+=".");A--;oe+="0");return E.s<0&&O?"-"+oe:oe}function ae(E,A){for(var D,T,O=1,I=new $(E[0]);O<E.length;O++)T=new $(E[O]),(!T.s||(D=Wi(I,T))===A||D===0&&I.s===A)&&(I=T);return I}function ke(E,A,D){for(var T=1,O=A.length;!A[--O];A.pop());for(O=A[0];O>=10;O/=10,T++);return(D=T+D*gt-1)>N?E.c=E.e=null:D<G?E.c=[E.e=0]:(E.e=D,E.c=A),E}u=function(){var E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,A=/^([^.]+)\.$/,D=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(I,Q,Y,oe){var me,pe=Y?Q:Q.replace(O,"");if(T.test(pe))I.s=isNaN(pe)?null:pe<0?-1:1;else{if(!Y&&(pe=pe.replace(E,function(Ne,rt,at){return me=(at=at.toLowerCase())=="x"?16:at=="b"?2:8,!oe||oe==me?rt:Ne}),oe&&(me=oe,pe=pe.replace(A,"$1").replace(D,"0.$1")),Q!=pe))return new $(pe,me);if($.DEBUG)throw Error(yn+"Not a"+(oe?" base "+oe:"")+" number: "+Q);I.s=null}I.c=I.e=null}}();function ue(E,A,D,T){var O,I,Q,Y,oe,me,pe,Ne=E.c,rt=Ms;if(Ne){e:{for(O=1,Y=Ne[0];Y>=10;Y/=10,O++);if(I=A-O,I<0)I+=gt,Q=A,oe=Ne[me=0],pe=pn(oe/rt[O-Q-1]%10);else if(me=mr((I+1)/gt),me>=Ne.length)if(T){for(;Ne.length<=me;Ne.push(0));oe=pe=0,O=1,I%=gt,Q=I-gt+1}else break e;else{for(oe=Y=Ne[me],O=1;Y>=10;Y/=10,O++);I%=gt,Q=I-gt+O,pe=Q<0?0:pn(oe/rt[O-Q-1]%10)}if(T=T||A<0||Ne[me+1]!=null||(Q<0?oe:oe%rt[O-Q-1]),T=D<4?(pe||T)&&(D==0||D==(E.s<0?3:2)):pe>5||pe==5&&(D==4||T||D==6&&(I>0?Q>0?oe/rt[O-Q]:0:Ne[me-1])%10&1||D==(E.s<0?8:7)),A<1||!Ne[0])return Ne.length=0,T?(A-=E.e+1,Ne[0]=rt[(gt-A%gt)%gt],E.e=-A||0):Ne[0]=E.e=0,E;if(I==0?(Ne.length=me,Y=1,me--):(Ne.length=me+1,Y=rt[gt-I],Ne[me]=Q>0?pn(oe/rt[O-Q]%rt[Q])*Y:0),T)for(;;)if(me==0){for(I=1,Q=Ne[0];Q>=10;Q/=10,I++);for(Q=Ne[0]+=Y,Y=1;Q>=10;Q/=10,Y++);I!=Y&&(E.e++,Ne[0]==Xn&&(Ne[0]=1));break}else{if(Ne[me]+=Y,Ne[me]!=Xn)break;Ne[me--]=0,Y=1}for(I=Ne.length;Ne[--I]===0;Ne.pop());}E.e>N?E.c=E.e=null:E.e<G&&(E.c=[E.e=0])}return E}function be(E){var A,D=E.e;return D===null?E.toString():(A=Rn(E.c),A=D<=k||D>=S?c(A,D):m(A,D,"0"),E.s<0?"-"+A:A)}return d.absoluteValue=d.abs=function(){var E=new $(this);return E.s<0&&(E.s=1),E},d.comparedTo=function(E,A){return Wi(this,new $(E,A))},d.decimalPlaces=d.dp=function(E,A){var D,T,O,I=this;if(E!=null)return t(E,0,Cn),A==null?A=b:t(A,0,8),ue(new $(I),E+I.e+1,A);if(!(D=I.c))return null;if(T=((O=D.length-1)-Dn(this.e/gt))*gt,O=D[O])for(;O%10==0;O/=10,T--);return T<0&&(T=0),T},d.dividedBy=d.div=function(E,A){return r(this,new $(E,A),_,b)},d.dividedToIntegerBy=d.idiv=function(E,A){return r(this,new $(E,A),0,1)},d.exponentiatedBy=d.pow=function(E,A){var D,T,O,I,Q,Y,oe,me,pe,Ne=this;if(E=new $(E),E.c&&!E.isInteger())throw Error(yn+"Exponent not an integer: "+be(E));if(A!=null&&(A=new $(A)),Y=E.e>14,!Ne.c||!Ne.c[0]||Ne.c[0]==1&&!Ne.e&&Ne.c.length==1||!E.c||!E.c[0])return pe=new $(Math.pow(+be(Ne),Y?E.s*(2-o(E)):+be(E))),A?pe.mod(A):pe;if(oe=E.s<0,A){if(A.c?!A.c[0]:!A.s)return new $(NaN);T=!oe&&Ne.isInteger()&&A.isInteger(),T&&(Ne=Ne.mod(A))}else{if(E.e>9&&(Ne.e>0||Ne.e<-1||(Ne.e==0?Ne.c[0]>1||Y&&Ne.c[1]>=24e7:Ne.c[0]<8e13||Y&&Ne.c[0]<=9999975e7)))return I=Ne.s<0&&o(E)?-0:0,Ne.e>-1&&(I=1/I),new $(oe?1/I:I);Ue&&(I=mr(Ue/gt+2))}for(Y?(D=new $(.5),oe&&(E.s=1),me=o(E)):(O=Math.abs(+be(E)),me=O%2),pe=new $(g);;){if(me){if(pe=pe.times(Ne),!pe.c)break;I?pe.c.length>I&&(pe.c.length=I):T&&(pe=pe.mod(A))}if(O){if(O=pn(O/2),O===0)break;me=O%2}else if(E=E.times(D),ue(E,E.e+1,1),E.e>14)me=o(E);else{if(O=+be(E),O===0)break;me=O%2}Ne=Ne.times(Ne),I?Ne.c&&Ne.c.length>I&&(Ne.c.length=I):T&&(Ne=Ne.mod(A))}return T?pe:(oe&&(pe=g.div(pe)),A?pe.mod(A):I?ue(pe,Ue,b,Q):pe)},d.integerValue=function(E){var A=new $(this);return E==null?E=b:t(E,0,8),ue(A,A.e+1,E)},d.isEqualTo=d.eq=function(E,A){return Wi(this,new $(E,A))===0},d.isFinite=function(){return!!this.c},d.isGreaterThan=d.gt=function(E,A){return Wi(this,new $(E,A))>0},d.isGreaterThanOrEqualTo=d.gte=function(E,A){return(A=Wi(this,new $(E,A)))===1||A===0},d.isInteger=function(){return!!this.c&&Dn(this.e/gt)>this.c.length-2},d.isLessThan=d.lt=function(E,A){return Wi(this,new $(E,A))<0},d.isLessThanOrEqualTo=d.lte=function(E,A){return(A=Wi(this,new $(E,A)))===-1||A===0},d.isNaN=function(){return!this.s},d.isNegative=function(){return this.s<0},d.isPositive=function(){return this.s>0},d.isZero=function(){return!!this.c&&this.c[0]==0},d.minus=function(E,A){var D,T,O,I,Q=this,Y=Q.s;if(E=new $(E,A),A=E.s,!Y||!A)return new $(NaN);if(Y!=A)return E.s=-A,Q.plus(E);var oe=Q.e/gt,me=E.e/gt,pe=Q.c,Ne=E.c;if(!oe||!me){if(!pe||!Ne)return pe?(E.s=-A,E):new $(Ne?Q:NaN);if(!pe[0]||!Ne[0])return Ne[0]?(E.s=-A,E):new $(pe[0]?Q:b==3?-0:0)}if(oe=Dn(oe),me=Dn(me),pe=pe.slice(),Y=oe-me){for((I=Y<0)?(Y=-Y,O=pe):(me=oe,O=Ne),O.reverse(),A=Y;A--;O.push(0));O.reverse()}else for(T=(I=(Y=pe.length)<(A=Ne.length))?Y:A,Y=A=0;A<T;A++)if(pe[A]!=Ne[A]){I=pe[A]<Ne[A];break}if(I&&(O=pe,pe=Ne,Ne=O,E.s=-E.s),A=(T=Ne.length)-(D=pe.length),A>0)for(;A--;pe[D++]=0);for(A=Xn-1;T>Y;){if(pe[--T]<Ne[T]){for(D=T;D&&!pe[--D];pe[D]=A);--pe[D],pe[T]+=Xn}pe[T]-=Ne[T]}for(;pe[0]==0;pe.splice(0,1),--me);return pe[0]?ke(E,pe,me):(E.s=b==3?-1:1,E.c=[E.e=0],E)},d.modulo=d.mod=function(E,A){var D,T,O=this;return E=new $(E,A),!O.c||!E.s||E.c&&!E.c[0]?new $(NaN):!E.c||O.c&&!O.c[0]?new $(O):(Ce==9?(T=E.s,E.s=1,D=r(O,E,0,3),E.s=T,D.s*=T):D=r(O,E,0,Ce),E=O.minus(D.times(E)),!E.c[0]&&Ce==1&&(E.s=O.s),E)},d.multipliedBy=d.times=function(E,A){var D,T,O,I,Q,Y,oe,me,pe,Ne,rt,at,ht,Ft,jt,Rt=this,Ut=Rt.c,En=(E=new $(E,A)).c;if(!Ut||!En||!Ut[0]||!En[0])return!Rt.s||!E.s||Ut&&!Ut[0]&&!En||En&&!En[0]&&!Ut?E.c=E.e=E.s=null:(E.s*=Rt.s,!Ut||!En?E.c=E.e=null:(E.c=[0],E.e=0)),E;for(T=Dn(Rt.e/gt)+Dn(E.e/gt),E.s*=Rt.s,oe=Ut.length,Ne=En.length,oe<Ne&&(ht=Ut,Ut=En,En=ht,O=oe,oe=Ne,Ne=O),O=oe+Ne,ht=[];O--;ht.push(0));for(Ft=Xn,jt=bi,O=Ne;--O>=0;){for(D=0,rt=En[O]%jt,at=En[O]/jt|0,Q=oe,I=O+Q;I>O;)me=Ut[--Q]%jt,pe=Ut[Q]/jt|0,Y=at*me+pe*rt,me=rt*me+Y%jt*jt+ht[I]+D,D=(me/Ft|0)+(Y/jt|0)+at*pe,ht[I--]=me%Ft;ht[I]=D}return D?++T:ht.splice(0,1),ke(E,ht,T)},d.negated=function(){var E=new $(this);return E.s=-E.s||null,E},d.plus=function(E,A){var D,T=this,O=T.s;if(E=new $(E,A),A=E.s,!O||!A)return new $(NaN);if(O!=A)return E.s=-A,T.minus(E);var I=T.e/gt,Q=E.e/gt,Y=T.c,oe=E.c;if(!I||!Q){if(!Y||!oe)return new $(O/0);if(!Y[0]||!oe[0])return oe[0]?E:new $(Y[0]?T:O*0)}if(I=Dn(I),Q=Dn(Q),Y=Y.slice(),O=I-Q){for(O>0?(Q=I,D=oe):(O=-O,D=Y),D.reverse();O--;D.push(0));D.reverse()}for(O=Y.length,A=oe.length,O-A<0&&(D=oe,oe=Y,Y=D,A=O),O=0;A;)O=(Y[--A]=Y[A]+oe[A]+O)/Xn|0,Y[A]=Xn===Y[A]?0:Y[A]%Xn;return O&&(Y=[O].concat(Y),++Q),ke(E,Y,Q)},d.precision=d.sd=function(E,A){var D,T,O,I=this;if(E!=null&&E!==!!E)return t(E,1,Cn),A==null?A=b:t(A,0,8),ue(new $(I),E,A);if(!(D=I.c))return null;if(O=D.length-1,T=O*gt+1,O=D[O]){for(;O%10==0;O/=10,T--);for(O=D[0];O>=10;O/=10,T++);}return E&&I.e+1>T&&(T=I.e+1),T},d.shiftedBy=function(E){return t(E,-9007199254740991,Lo),this.times("1e"+E)},d.squareRoot=d.sqrt=function(){var E,A,D,T,O,I=this,Q=I.c,Y=I.s,oe=I.e,me=_+4,pe=new $("0.5");if(Y!==1||!Q||!Q[0])return new $(!Y||Y<0&&(!Q||Q[0])?NaN:Q?I:1/0);if(Y=Math.sqrt(+be(I)),Y==0||Y==1/0?(A=Rn(Q),(A.length+oe)%2==0&&(A+="0"),Y=Math.sqrt(+A),oe=Dn((oe+1)/2)-(oe<0||oe%2),Y==1/0?A="5e"+oe:(A=Y.toExponential(),A=A.slice(0,A.indexOf("e")+1)+oe),D=new $(A)):D=new $(Y+""),D.c[0]){for(oe=D.e,Y=oe+me,Y<3&&(Y=0);;)if(O=D,D=pe.times(O.plus(r(I,O,me,1))),Rn(O.c).slice(0,Y)===(A=Rn(D.c)).slice(0,Y))if(D.e<oe&&--Y,A=A.slice(Y-3,Y+1),A=="9999"||!T&&A=="4999"){if(!T&&(ue(O,O.e+_+2,0),O.times(O).eq(I))){D=O;break}me+=4,Y+=4,T=1}else{(!+A||!+A.slice(1)&&A.charAt(0)=="5")&&(ue(D,D.e+_+2,1),E=!D.times(D).eq(I));break}}return ue(D,D.e+_+1,b,E)},d.toExponential=function(E,A){return E!=null&&(t(E,0,Cn),E++),X(this,E,A,1)},d.toFixed=function(E,A){return E!=null&&(t(E,0,Cn),E=E+this.e+1),X(this,E,A)},d.toFormat=function(E,A,D){var T,O=this;if(D==null)E!=null&&A&&typeof A=="object"?(D=A,A=null):E&&typeof E=="object"?(D=E,E=A=null):D=Qe;else if(typeof D!="object")throw Error(yn+"Argument not an object: "+D);if(T=O.toFixed(E,A),O.c){var I,Q=T.split("."),Y=+D.groupSize,oe=+D.secondaryGroupSize,me=D.groupSeparator||"",pe=Q[0],Ne=Q[1],rt=O.s<0,at=rt?pe.slice(1):pe,ht=at.length;if(oe&&(I=Y,Y=oe,oe=I,ht-=I),Y>0&&ht>0){for(I=ht%Y||Y,pe=at.substr(0,I);I<ht;I+=Y)pe+=me+at.substr(I,Y);oe>0&&(pe+=me+at.slice(I)),rt&&(pe="-"+pe)}T=Ne?pe+(D.decimalSeparator||"")+((oe=+D.fractionGroupSize)?Ne.replace(new RegExp("\\d{"+oe+"}\\B","g"),"$&"+(D.fractionGroupSeparator||"")):Ne):pe}return(D.prefix||"")+T+(D.suffix||"")},d.toFraction=function(E){var A,D,T,O,I,Q,Y,oe,me,pe,Ne,rt,at=this,ht=at.c;if(E!=null&&(Y=new $(E),!Y.isInteger()&&(Y.c||Y.s!==1)||Y.lt(g)))throw Error(yn+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+be(Y));if(!ht)return new $(at);for(A=new $(g),me=D=new $(g),T=oe=new $(g),rt=Rn(ht),I=A.e=rt.length-at.e-1,A.c[0]=Ms[(Q=I%gt)<0?gt+Q:Q],E=!E||Y.comparedTo(A)>0?I>0?A:me:Y,Q=N,N=1/0,Y=new $(rt),oe.c[0]=0;pe=r(Y,A,0,1),O=D.plus(pe.times(T)),O.comparedTo(E)!=1;)D=T,T=O,me=oe.plus(pe.times(O=me)),oe=O,A=Y.minus(pe.times(O=A)),Y=O;return O=r(E.minus(D),T,0,1),oe=oe.plus(O.times(me)),D=D.plus(O.times(T)),oe.s=me.s=at.s,I=I*2,Ne=r(me,T,I,b).minus(at).abs().comparedTo(r(oe,D,I,b).minus(at).abs())<1?[me,T]:[oe,D],N=Q,Ne},d.toNumber=function(){return+be(this)},d.toPrecision=function(E,A){return E!=null&&t(E,1,Cn),X(this,E,A,2)},d.toString=function(E){var A,D=this,T=D.s,O=D.e;return O===null?T?(A="Infinity",T<0&&(A="-"+A)):A="NaN":(E==null?A=O<=k||O>=S?c(Rn(D.c),O):m(Rn(D.c),O,"0"):E===10&&At?(D=ue(new $(D),_+O+1,b),A=m(Rn(D.c),D.e,"0")):(t(E,2,st.length,"Base"),A=a(m(Rn(D.c),O,"0"),10,E,T,!0)),T<0&&D.c[0]&&(A="-"+A)),A},d.valueOf=d.toJSON=function(){return be(this)},d._isBigNumber=!0,d[Symbol.toStringTag]="BigNumber",d[Symbol.for("nodejs.util.inspect.custom")]=d.valueOf,n!=null&&$.set(n),$}function Dn(n){var r=n|0;return n>0||n===r?r:r-1}function Rn(n){for(var r,a,u=1,d=n.length,g=n[0]+"";u<d;){for(r=n[u++]+"",a=gt-r.length;a--;r="0"+r);g+=r}for(d=g.length;g.charCodeAt(--d)===48;);return g.slice(0,d+1||1)}function Wi(n,r){var a,u,d=n.c,g=r.c,_=n.s,b=r.s,k=n.e,S=r.e;if(!_||!b)return null;if(a=d&&!d[0],u=g&&!g[0],a||u)return a?u?0:-b:_;if(_!=b)return _;if(a=_<0,u=k==S,!d||!g)return u?0:!d^a?1:-1;if(!u)return k>S^a?1:-1;for(b=(k=d.length)<(S=g.length)?k:S,_=0;_<b;_++)if(d[_]!=g[_])return d[_]>g[_]^a?1:-1;return k==S?0:k>S^a?1:-1}function t(n,r,a,u){if(n<r||n>a||n!==pn(n))throw Error(yn+(u||"Argument")+(typeof n=="number"?n<r||n>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function o(n){var r=n.c.length-1;return Dn(n.e/gt)==r&&n.c[r]%2!=0}function c(n,r){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(r<0?"e":"e+")+r}function m(n,r,a){var u,d;if(r<0){for(d=a+".";++r;d+=a);n=d+n}else if(u=n.length,++r>u){for(d=a,r-=u;--r;d+=a);n+=d}else r<u&&(n=n.slice(0,r)+"."+n.slice(r));return n}var x=Ia(),B=x,W=class{constructor(n){lt(this,"key");lt(this,"left",null);lt(this,"right",null);this.key=n}},fe=class extends W{constructor(n){super(n)}},Me=class{constructor(){lt(this,"size",0);lt(this,"modificationCount",0);lt(this,"splayCount",0)}splay(n){let r=this.root;if(r==null)return this.compare(n,n),-1;let a=null,u=null,d=null,g=null,_=r,b=this.compare,k;for(;;)if(k=b(_.key,n),k>0){let S=_.left;if(S==null||(k=b(S.key,n),k>0&&(_.left=S.right,S.right=_,_=S,S=_.left,S==null)))break;a==null?u=_:a.left=_,a=_,_=S}else if(k<0){let S=_.right;if(S==null||(k=b(S.key,n),k<0&&(_.right=S.left,S.left=_,_=S,S=_.right,S==null)))break;d==null?g=_:d.right=_,d=_,_=S}else break;return d!=null&&(d.right=_.left,_.left=g),a!=null&&(a.left=_.right,_.right=u),this.root!==_&&(this.root=_,this.splayCount++),k}splayMin(n){let r=n,a=r.left;for(;a!=null;){let u=a;r.left=u.right,u.right=r,r=u,a=r.left}return r}splayMax(n){let r=n,a=r.right;for(;a!=null;){let u=a;r.right=u.left,u.left=r,r=u,a=r.right}return r}_delete(n){if(this.root==null||this.splay(n)!=0)return null;let r=this.root,a=r,u=r.left;if(this.size--,u==null)this.root=r.right;else{let d=r.right;r=this.splayMax(u),r.right=d,this.root=r}return this.modificationCount++,a}addNewRoot(n,r){this.size++,this.modificationCount++;let a=this.root;if(a==null){this.root=n;return}r<0?(n.left=a,n.right=a.right,a.right=null):(n.right=a,n.left=a.left,a.left=null),this.root=n}_first(){let n=this.root;return n==null?null:(this.root=this.splayMin(n),this.root)}_last(){let n=this.root;return n==null?null:(this.root=this.splayMax(n),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(n){return this.validKey(n)&&this.splay(n)==0}defaultCompare(){return(n,r)=>n<r?-1:n>r?1:0}wrap(){return{getRoot:()=>this.root,setRoot:n=>{this.root=n},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:n=>{this.splayCount=n},splay:n=>this.splay(n),has:n=>this.has(n)}}},$e=class Oo extends Me{constructor(a,u){super();lt(this,"root",null);lt(this,"compare");lt(this,"validKey");lt(this,lh,"[object Set]");this.compare=a??this.defaultCompare(),this.validKey=u??(d=>d!=null&&d!=null)}delete(a){return this.validKey(a)?this._delete(a)!=null:!1}deleteAll(a){for(let u of a)this.delete(u)}forEach(a){let u=this[Symbol.iterator](),d;for(;d=u.next(),!d.done;)a(d.value,d.value,this)}add(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new fe(a),u),this}addAndReturn(a){let u=this.splay(a);return u!=0&&this.addNewRoot(new fe(a),u),this.root.key}addAll(a){for(let u of a)this.add(u)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)<0)return this.root.key;let u=this.root.left;if(u==null)return null;let d=u.right;for(;d!=null;)u=d,d=u.right;return u.key}firstAfter(a){if(a==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(a)>0)return this.root.key;let u=this.root.right;if(u==null)return null;let d=u.left;for(;d!=null;)u=d,d=u.left;return u.key}retainAll(a){let u=new Oo(this.compare,this.validKey),d=this.modificationCount;for(let g of a){if(d!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(g)&&this.splay(g)==0&&u.add(this.root.key)}u.size!=this.size&&(this.root=u.root,this.size=u.size,this.modificationCount++)}lookup(a){return!this.validKey(a)||this.splay(a)!=0?null:this.root.key}intersection(a){let u=new Oo(this.compare,this.validKey);for(let d of this)a.has(d)&&u.add(d);return u}difference(a){let u=new Oo(this.compare,this.validKey);for(let d of this)a.has(d)||u.add(d);return u}union(a){let u=this.clone();return u.addAll(a),u}clone(){let a=new Oo(this.compare,this.validKey);return a.size=this.size,a.root=this.copyNode(this.root),a}copyNode(a){if(a==null)return null;function u(g,_){let b,k;do{if(b=g.left,k=g.right,b!=null){let S=new fe(b.key);_.left=S,u(b,S)}if(k!=null){let S=new fe(k.key);_.right=S,g=k,_=S}}while(k!=null)}let d=new fe(a.key);return u(a,d),d}toSet(){return this.clone()}entries(){return new Mt(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(uh=Symbol.iterator,lh=Symbol.toStringTag,uh)](){return new ft(this.wrap())}},et=class{constructor(n){lt(this,"tree");lt(this,"path",new Array);lt(this,"modificationCount",null);lt(this,"splayCount");this.tree=n,this.splayCount=n.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let n=this.path[this.path.length-1];return this.getValue(n)}rebuildPath(n){this.path.splice(0,this.path.length),this.tree.splay(n),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(n){for(;n!=null;)this.path.push(n),n=n.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let a=this.tree.getRoot();for(;a!=null;)this.path.push(a),a=a.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let n=this.path[this.path.length-1],r=n.right;if(r!=null){for(;r!=null;)this.path.push(r),r=r.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===n;)n=this.path.pop();return this.path.length>0}},ft=class extends et{getValue(n){return n.key}},Mt=class extends et{getValue(n){return[n.key,n.key]}},vn=n=>n,ln=n=>{if(n){let r=new $e(Es(n)),a=new $e(Es(n)),u=(g,_)=>_.addAndReturn(g),d=g=>({x:u(g.x,r),y:u(g.y,a)});return d({x:new B(0),y:new B(0)}),d}return vn},kn=n=>({set:r=>{Wt=kn(r)},reset:()=>kn(n),compare:Es(n),snap:ln(n),orient:zr(n)}),Wt=kn(),ui=(n,r)=>n.ll.x.isLessThanOrEqualTo(r.x)&&r.x.isLessThanOrEqualTo(n.ur.x)&&n.ll.y.isLessThanOrEqualTo(r.y)&&r.y.isLessThanOrEqualTo(n.ur.y),Co=(n,r)=>{if(r.ur.x.isLessThan(n.ll.x)||n.ur.x.isLessThan(r.ll.x)||r.ur.y.isLessThan(n.ll.y)||n.ur.y.isLessThan(r.ll.y))return null;let a=n.ll.x.isLessThan(r.ll.x)?r.ll.x:n.ll.x,u=n.ur.x.isLessThan(r.ur.x)?n.ur.x:r.ur.x,d=n.ll.y.isLessThan(r.ll.y)?r.ll.y:n.ll.y,g=n.ur.y.isLessThan(r.ur.y)?n.ur.y:r.ur.y;return{ll:{x:a,y:d},ur:{x:u,y:g}}},Ps=(n,r)=>n.x.times(r.y).minus(n.y.times(r.x)),Fa=(n,r)=>n.x.times(r.x).plus(n.y.times(r.y)),$r=n=>Fa(n,n).sqrt(),Au=(n,r,a)=>{let u={x:r.x.minus(n.x),y:r.y.minus(n.y)},d={x:a.x.minus(n.x),y:a.y.minus(n.y)};return Ps(d,u).div($r(d)).div($r(u))},Na=(n,r,a)=>{let u={x:r.x.minus(n.x),y:r.y.minus(n.y)},d={x:a.x.minus(n.x),y:a.y.minus(n.y)};return Fa(d,u).div($r(d)).div($r(u))},Qt=(n,r,a)=>r.y.isZero()?null:{x:n.x.plus(r.x.div(r.y).times(a.minus(n.y))),y:a},jr=(n,r,a)=>r.x.isZero()?null:{x:a,y:n.y.plus(r.y.div(r.x).times(a.minus(n.x)))},Tu=(n,r,a,u)=>{if(r.x.isZero())return jr(a,u,n.x);if(u.x.isZero())return jr(n,r,a.x);if(r.y.isZero())return Qt(a,u,n.y);if(u.y.isZero())return Qt(n,r,a.y);let d=Ps(r,u);if(d.isZero())return null;let g={x:a.x.minus(n.x),y:a.y.minus(n.y)},_=Ps(g,r).div(d),b=Ps(g,u).div(d),k=n.x.plus(b.times(r.x)),S=a.x.plus(_.times(u.x)),G=n.y.plus(b.times(r.y)),N=a.y.plus(_.times(u.y)),ge=k.plus(S).div(2),Ce=G.plus(N).div(2);return{x:ge,y:Ce}},ci=class Gp{constructor(r,a){lt(this,"point");lt(this,"isLeft");lt(this,"segment");lt(this,"otherSE");lt(this,"consumedBy");r.events===void 0?r.events=[this]:r.events.push(this),this.point=r,this.isLeft=a}static compare(r,a){let u=Gp.comparePoints(r.point,a.point);return u!==0?u:(r.point!==a.point&&r.link(a),r.isLeft!==a.isLeft?r.isLeft?1:-1:gr.compare(r.segment,a.segment))}static comparePoints(r,a){return r.x.isLessThan(a.x)?-1:r.x.isGreaterThan(a.x)?1:r.y.isLessThan(a.y)?-1:r.y.isGreaterThan(a.y)?1:0}link(r){if(r.point===this.point)throw new Error("Tried to link already linked events");let a=r.point.events;for(let u=0,d=a.length;u<d;u++){let g=a[u];this.point.events.push(g),g.point=this.point}this.checkForConsuming()}checkForConsuming(){let r=this.point.events.length;for(let a=0;a<r;a++){let u=this.point.events[a];if(u.segment.consumedBy===void 0)for(let d=a+1;d<r;d++){let g=this.point.events[d];g.consumedBy===void 0&&u.otherSE.point.events===g.otherSE.point.events&&u.segment.consume(g.segment)}}}getAvailableLinkedEvents(){let r=[];for(let a=0,u=this.point.events.length;a<u;a++){let d=this.point.events[a];d!==this&&!d.segment.ringOut&&d.segment.isInResult()&&r.push(d)}return r}getLeftmostComparator(r){let a=new Map,u=d=>{let g=d.otherSE;a.set(d,{sine:Au(this.point,r.point,g.point),cosine:Na(this.point,r.point,g.point)})};return(d,g)=>{a.has(d)||u(d),a.has(g)||u(g);let{sine:_,cosine:b}=a.get(d),{sine:k,cosine:S}=a.get(g);return _.isGreaterThanOrEqualTo(0)&&k.isGreaterThanOrEqualTo(0)?b.isLessThan(S)?1:b.isGreaterThan(S)?-1:0:_.isLessThan(0)&&k.isLessThan(0)?b.isLessThan(S)?-1:b.isGreaterThan(S)?1:0:k.isLessThan(_)?-1:k.isGreaterThan(_)?1:0}}},Du=0,gr=class rl{constructor(r,a,u,d){lt(this,"id");lt(this,"leftSE");lt(this,"rightSE");lt(this,"rings");lt(this,"windings");lt(this,"ringOut");lt(this,"consumedBy");lt(this,"prev");lt(this,"_prevInResult");lt(this,"_beforeState");lt(this,"_afterState");lt(this,"_isInResult");this.id=++Du,this.leftSE=r,r.segment=this,r.otherSE=a,this.rightSE=a,a.segment=this,a.otherSE=r,this.rings=u,this.windings=d}static compare(r,a){let u=r.leftSE.point.x,d=a.leftSE.point.x,g=r.rightSE.point.x,_=a.rightSE.point.x;if(_.isLessThan(u))return 1;if(g.isLessThan(d))return-1;let b=r.leftSE.point.y,k=a.leftSE.point.y,S=r.rightSE.point.y,G=a.rightSE.point.y;if(u.isLessThan(d)){if(k.isLessThan(b)&&k.isLessThan(S))return 1;if(k.isGreaterThan(b)&&k.isGreaterThan(S))return-1;let N=r.comparePoint(a.leftSE.point);if(N<0)return 1;if(N>0)return-1;let ge=a.comparePoint(r.rightSE.point);return ge!==0?ge:-1}if(u.isGreaterThan(d)){if(b.isLessThan(k)&&b.isLessThan(G))return-1;if(b.isGreaterThan(k)&&b.isGreaterThan(G))return 1;let N=a.comparePoint(r.leftSE.point);if(N!==0)return N;let ge=r.comparePoint(a.rightSE.point);return ge<0?1:ge>0?-1:1}if(b.isLessThan(k))return-1;if(b.isGreaterThan(k))return 1;if(g.isLessThan(_)){let N=a.comparePoint(r.rightSE.point);if(N!==0)return N}if(g.isGreaterThan(_)){let N=r.comparePoint(a.rightSE.point);if(N<0)return 1;if(N>0)return-1}if(!g.eq(_)){let N=S.minus(b),ge=g.minus(u),Ce=G.minus(k),Ue=_.minus(d);if(N.isGreaterThan(ge)&&Ce.isLessThan(Ue))return 1;if(N.isLessThan(ge)&&Ce.isGreaterThan(Ue))return-1}return g.isGreaterThan(_)?1:g.isLessThan(_)||S.isLessThan(G)?-1:S.isGreaterThan(G)?1:r.id<a.id?-1:r.id>a.id?1:0}static fromRing(r,a,u){let d,g,_,b=ci.comparePoints(r,a);if(b<0)d=r,g=a,_=1;else if(b>0)d=a,g=r,_=-1;else throw new Error(`Tried to create degenerate segment at [${r.x}, ${r.y}]`);let k=new ci(d,!0),S=new ci(g,!1);return new rl(k,S,[u],[_])}replaceRightSE(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let r=this.leftSE.point.y,a=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r.isLessThan(a)?r:a},ur:{x:this.rightSE.point.x,y:r.isGreaterThan(a)?r:a}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(r){return r.x.eq(this.leftSE.point.x)&&r.y.eq(this.leftSE.point.y)||r.x.eq(this.rightSE.point.x)&&r.y.eq(this.rightSE.point.y)}comparePoint(r){return Wt.orient(this.leftSE.point,r,this.rightSE.point)}getIntersection(r){let a=this.bbox(),u=r.bbox(),d=Co(a,u);if(d===null)return null;let g=this.leftSE.point,_=this.rightSE.point,b=r.leftSE.point,k=r.rightSE.point,S=ui(a,b)&&this.comparePoint(b)===0,G=ui(u,g)&&r.comparePoint(g)===0,N=ui(a,k)&&this.comparePoint(k)===0,ge=ui(u,_)&&r.comparePoint(_)===0;if(G&&S)return ge&&!N?_:!ge&&N?k:null;if(G)return N&&g.x.eq(k.x)&&g.y.eq(k.y)?null:g;if(S)return ge&&_.x.eq(b.x)&&_.y.eq(b.y)?null:b;if(ge&&N)return null;if(ge)return _;if(N)return k;let Ce=Tu(g,this.vector(),b,r.vector());return Ce===null||!ui(d,Ce)?null:Wt.snap(Ce)}split(r){let a=[],u=r.events!==void 0,d=new ci(r,!0),g=new ci(r,!1),_=this.rightSE;this.replaceRightSE(g),a.push(g),a.push(d);let b=new rl(d,_,this.rings.slice(),this.windings.slice());return ci.comparePoints(b.leftSE.point,b.rightSE.point)>0&&b.swapEvents(),ci.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),u&&(d.checkForConsuming(),g.checkForConsuming()),a}swapEvents(){let r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let a=0,u=this.windings.length;a<u;a++)this.windings[a]*=-1}consume(r){let a=this,u=r;for(;a.consumedBy;)a=a.consumedBy;for(;u.consumedBy;)u=u.consumedBy;let d=rl.compare(a,u);if(d!==0){if(d>0){let g=a;a=u,u=g}if(a.prev===u){let g=a;a=u,u=g}for(let g=0,_=u.rings.length;g<_;g++){let b=u.rings[g],k=u.windings[g],S=a.rings.indexOf(b);S===-1?(a.rings.push(b),a.windings.push(k)):a.windings[S]+=k}u.rings=null,u.windings=null,u.consumedBy=a,u.leftSE.consumedBy=a.leftSE,u.rightSE.consumedBy=a.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};let a=this._afterState.rings,u=this._afterState.windings,d=this._afterState.multiPolys;for(let b=0,k=this.rings.length;b<k;b++){let S=this.rings[b],G=this.windings[b],N=a.indexOf(S);N===-1?(a.push(S),u.push(G)):u[N]+=G}let g=[],_=[];for(let b=0,k=a.length;b<k;b++){if(u[b]===0)continue;let S=a[b],G=S.poly;if(_.indexOf(G)===-1)if(S.isExterior)g.push(G);else{_.indexOf(G)===-1&&_.push(G);let N=g.indexOf(S.poly);N!==-1&&g.splice(N,1)}}for(let b=0,k=g.length;b<k;b++){let S=g[b].multiPoly;d.indexOf(S)===-1&&d.push(S)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let r=this.beforeState().multiPolys,a=this.afterState().multiPolys;switch(za.type){case"union":{let u=r.length===0,d=a.length===0;this._isInResult=u!==d;break}case"intersection":{let u,d;r.length<a.length?(u=r.length,d=a.length):(u=a.length,d=r.length),this._isInResult=d===za.numMultiPolys&&u<d;break}case"xor":{let u=Math.abs(r.length-a.length);this._isInResult=u%2===1;break}case"difference":{let u=d=>d.length===1&&d[0].isSubject;this._isInResult=u(r)!==u(a);break}}return this._isInResult}},ko=class{constructor(n,r,a){lt(this,"poly");lt(this,"isExterior");lt(this,"segments");lt(this,"bbox");if(!Array.isArray(n)||n.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=a,this.segments=[],typeof n[0][0]!="number"||typeof n[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let u=Wt.snap({x:new B(n[0][0]),y:new B(n[0][1])});this.bbox={ll:{x:u.x,y:u.y},ur:{x:u.x,y:u.y}};let d=u;for(let g=1,_=n.length;g<_;g++){if(typeof n[g][0]!="number"||typeof n[g][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=Wt.snap({x:new B(n[g][0]),y:new B(n[g][1])});b.x.eq(d.x)&&b.y.eq(d.y)||(this.segments.push(gr.fromRing(d,b,this)),b.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=b.x),b.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=b.y),b.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=b.x),b.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=b.y),d=b)}(!u.x.eq(d.x)||!u.y.eq(d.y))&&this.segments.push(gr.fromRing(d,u,this))}getSweepEvents(){let n=[];for(let r=0,a=this.segments.length;r<a;r++){let u=this.segments[r];n.push(u.leftSE),n.push(u.rightSE)}return n}},Ru=class{constructor(n,r){lt(this,"multiPoly");lt(this,"exteriorRing");lt(this,"interiorRings");lt(this,"bbox");if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ko(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let a=1,u=n.length;a<u;a++){let d=new ko(n[a],this,!1);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.interiorRings.push(d)}this.multiPoly=r}getSweepEvents(){let n=this.exteriorRing.getSweepEvents();for(let r=0,a=this.interiorRings.length;r<a;r++){let u=this.interiorRings[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)n.push(u[d])}return n}},th=class{constructor(n,r){lt(this,"isSubject");lt(this,"polys");lt(this,"bbox");if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof n[0][0][0]=="number"&&(n=[n])}catch{}this.polys=[],this.bbox={ll:{x:new B(Number.POSITIVE_INFINITY),y:new B(Number.POSITIVE_INFINITY)},ur:{x:new B(Number.NEGATIVE_INFINITY),y:new B(Number.NEGATIVE_INFINITY)}};for(let a=0,u=n.length;a<u;a++){let d=new Ru(n[a],this);d.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=d.bbox.ll.x),d.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=d.bbox.ll.y),d.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=d.bbox.ur.x),d.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=d.bbox.ur.y),this.polys.push(d)}this.isSubject=r}getSweepEvents(){let n=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getSweepEvents();for(let d=0,g=u.length;d<g;d++)n.push(u[d])}return n}},Jp=class Sc{constructor(r){lt(this,"events");lt(this,"poly");lt(this,"_isExteriorRing");lt(this,"_enclosingRing");this.events=r;for(let a=0,u=r.length;a<u;a++)r[a].segment.ringOut=this;this.poly=null}static factory(r){let a=[];for(let u=0,d=r.length;u<d;u++){let g=r[u];if(!g.isInResult()||g.ringOut)continue;let _=null,b=g.leftSE,k=g.rightSE,S=[b],G=b.point,N=[];for(;_=b,b=k,S.push(b),b.point!==G;)for(;;){let ge=b.getAvailableLinkedEvents();if(ge.length===0){let Qe=S[0].point,st=S[S.length-1].point;throw new Error(`Unable to complete output ring starting at [${Qe.x}, ${Qe.y}]. Last matching segment found ends at [${st.x}, ${st.y}].`)}if(ge.length===1){k=ge[0].otherSE;break}let Ce=null;for(let Qe=0,st=N.length;Qe<st;Qe++)if(N[Qe].point===b.point){Ce=Qe;break}if(Ce!==null){let Qe=N.splice(Ce)[0],st=S.splice(Qe.index);st.unshift(st[0].otherSE),a.push(new Sc(st.reverse()));continue}N.push({index:S.length,point:b.point});let Ue=b.getLeftmostComparator(_);k=ge.sort(Ue)[0].otherSE;break}a.push(new Sc(S))}return a}getGeom(){let r=this.events[0].point,a=[r];for(let S=1,G=this.events.length-1;S<G;S++){let N=this.events[S].point,ge=this.events[S+1].point;Wt.orient(N,r,ge)!==0&&(a.push(N),r=N)}if(a.length===1)return null;let u=a[0],d=a[1];Wt.orient(u,r,d)===0&&a.shift(),a.push(a[0]);let g=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:a.length-1,b=this.isExteriorRing()?a.length:-1,k=[];for(let S=_;S!=b;S+=g)k.push([a[S].x.toNumber(),a[S].y.toNumber()]);return k}isExteriorRing(){if(this._isExteriorRing===void 0){let r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var d,g;let r=this.events[0];for(let _=1,b=this.events.length;_<b;_++){let k=this.events[_];ci.compare(r,k)>0&&(r=k)}let a=r.segment.prevInResult(),u=a?a.prevInResult():null;for(;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return((d=u.ringOut)==null?void 0:d.enclosingRing())!==a.ringOut?a.ringOut:(g=a.ringOut)==null?void 0:g.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}},nh=class{constructor(n){lt(this,"exteriorRing");lt(this,"interiorRings");this.exteriorRing=n,n.poly=this,this.interiorRings=[]}addInterior(n){this.interiorRings.push(n),n.poly=this}getGeom(){let n=this.exteriorRing.getGeom();if(n===null)return null;let r=[n];for(let a=0,u=this.interiorRings.length;a<u;a++){let d=this.interiorRings[a].getGeom();d!==null&&r.push(d)}return r}},Xp=class{constructor(n){lt(this,"rings");lt(this,"polys");this.rings=n,this.polys=this._composePolys(n)}getGeom(){let n=[];for(let r=0,a=this.polys.length;r<a;r++){let u=this.polys[r].getGeom();u!==null&&n.push(u)}return n}_composePolys(n){var a;let r=[];for(let u=0,d=n.length;u<d;u++){let g=n[u];if(!g.poly)if(g.isExteriorRing())r.push(new nh(g));else{let _=g.enclosingRing();_!=null&&_.poly||r.push(new nh(_)),(a=_==null?void 0:_.poly)==null||a.addInterior(g)}}return r}},Yp=class{constructor(n,r=gr.compare){lt(this,"queue");lt(this,"tree");lt(this,"segments");this.queue=n,this.tree=new $e(r),this.segments=[]}process(n){let r=n.segment,a=[];if(n.consumedBy)return n.isLeft?this.queue.delete(n.otherSE):this.tree.delete(r),a;n.isLeft&&this.tree.add(r);let u=r,d=r;do u=this.tree.lastBefore(u);while(u!=null&&u.consumedBy!=null);do d=this.tree.firstAfter(d);while(d!=null&&d.consumedBy!=null);if(n.isLeft){let g=null;if(u){let b=u.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(g=b),!u.isAnEndpoint(b))){let k=this._splitSafely(u,b);for(let S=0,G=k.length;S<G;S++)a.push(k[S])}}let _=null;if(d){let b=d.getIntersection(r);if(b!==null&&(r.isAnEndpoint(b)||(_=b),!d.isAnEndpoint(b))){let k=this._splitSafely(d,b);for(let S=0,G=k.length;S<G;S++)a.push(k[S])}}if(g!==null||_!==null){let b=null;g===null?b=_:_===null?b=g:b=ci.comparePoints(g,_)<=0?g:_,this.queue.delete(r.rightSE),a.push(r.rightSE);let k=r.split(b);for(let S=0,G=k.length;S<G;S++)a.push(k[S])}a.length>0?(this.tree.delete(r),a.push(n)):(this.segments.push(r),r.prev=u)}else{if(u&&d){let g=u.getIntersection(d);if(g!==null){if(!u.isAnEndpoint(g)){let _=this._splitSafely(u,g);for(let b=0,k=_.length;b<k;b++)a.push(_[b])}if(!d.isAnEndpoint(g)){let _=this._splitSafely(d,g);for(let b=0,k=_.length;b<k;b++)a.push(_[b])}}}this.tree.delete(r)}return a}_splitSafely(n,r){this.tree.delete(n);let a=n.rightSE;this.queue.delete(a);let u=n.split(r);return u.push(a),n.consumedBy===void 0&&this.tree.add(n),u}},Qp=class{constructor(){lt(this,"type");lt(this,"numMultiPolys")}run(n,r,a){Eo.type=n;let u=[new th(r,!0)];for(let k=0,S=a.length;k<S;k++)u.push(new th(a[k],!1));if(Eo.numMultiPolys=u.length,Eo.type==="difference"){let k=u[0],S=1;for(;S<u.length;)Co(u[S].bbox,k.bbox)!==null?S++:u.splice(S,1)}if(Eo.type==="intersection")for(let k=0,S=u.length;k<S;k++){let G=u[k];for(let N=k+1,ge=u.length;N<ge;N++)if(Co(G.bbox,u[N].bbox)===null)return[]}let d=new $e(ci.compare);for(let k=0,S=u.length;k<S;k++){let G=u[k].getSweepEvents();for(let N=0,ge=G.length;N<ge;N++)d.add(G[N])}let g=new Yp(d),_=null;for(d.size!=0&&(_=d.first(),d.delete(_));_;){let k=g.process(_);for(let S=0,G=k.length;S<G;S++){let N=k[S];N.consumedBy===void 0&&d.add(N)}d.size!=0?(_=d.first(),d.delete(_)):_=null}Wt.reset();let b=Jp.factory(g.segments);return new Xp(b).getGeom()}},Eo=new Qp,za=Eo,em=(n,...r)=>za.run("intersection",n,r),tm=(n,...r)=>za.run("difference",n,r);Wt.set;function $a(n){let r={type:"Feature"};return r.geometry=n,r}function ja(n){return n.type==="Feature"?n.geometry:n}function ih(n){return n&&n.geometry&&n.geometry.coordinates?n.geometry.coordinates:n}function nm(n){return $a({type:"LineString",coordinates:n})}function im(n){return $a({type:"MultiLineString",coordinates:n})}function rh(n){return $a({type:"Polygon",coordinates:n})}function sh(n){return $a({type:"MultiPolygon",coordinates:n})}function rm(n,r){let a=ja(n),u=ja(r),d=em(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?rh(d[0]):sh(d)}function sm(n,r){let a=ja(n),u=ja(r),d=tm(a.coordinates,u.coordinates);return d.length===0?null:d.length===1?rh(d[0]):sh(d)}function oh(n){return Array.isArray(n)?1+oh(n[0]):-1}function om(n){n instanceof L.Polyline&&(n=n.toGeoJSON(15));let r=ih(n),a=oh(r),u=[];return a>1?r.forEach(d=>{u.push(nm(d))}):u.push(n),u}function am(n){let r=[];return n.eachLayer(a=>{r.push(ih(a.toGeoJSON(15)))}),im(r)}dn.Cut=dn.Polygon.extend({initialize(n){this._map=n,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let n=this._layer.getLatLngs();if(n.length<=2)return;let r=L.polygon(n,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:u,originalLayer:d})=>{this._fireCut(d,u,d),this._fireCut(this._map,u,d),d.pm._fireEdit()}),this._editedLayers=[];let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},cut(n){let r=this._map._layers,a=n._latlngInfos||[];Object.keys(r).map(u=>r[u]).filter(u=>u.pm).filter(u=>!u._pmTempLayer).filter(u=>!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&u.options.pmIgnore===!1).filter(u=>u instanceof L.Polyline).filter(u=>u!==n).filter(u=>u.pm.options.allowCutting).filter(u=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(u)>-1:!0).filter(u=>!this._layerGroup.hasLayer(u)).filter(u=>{try{let d=!!ai(n.toGeoJSON(15),u.toGeoJSON(15)).features.length>0;return d||u instanceof L.Polyline&&!(u instanceof L.Polygon)?d:!!rm(n.toGeoJSON(15),u.toGeoJSON(15))}catch{return u instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(u=>{let d;if(u instanceof L.Polygon){d=L.polygon(u.getLatLngs());let k=d.getLatLngs();a.forEach(S=>{if(S&&S.snapInfo){let{latlng:G}=S,N=this._calcClosestLayer(G,[d]);if(N&&N.segment&&N.distance<this.options.snapDistance){let{segment:ge}=N;if(ge&&ge.length===2){let{indexPath:Ce,parentPath:Ue,newIndex:Qe}=L.PM.Utils._getIndexFromSegment(k,ge);(Ce.length>1?(0,vi.default)(k,Ue):k).splice(Qe,0,G)}}}})}else d=u;let g=this._cutLayer(n,d),_=L.geoJSON(g,u.options);_.getLayers().length===1&&([_]=_.getLayers()),this._setPane(_,"layerPane");let b=_.addTo(this._map.pm._getContainingLayer());if(b.pm.enable(u.pm.options),b.pm.disable(),u._pmTempLayer=!0,n._pmTempLayer=!0,u.remove(),u.removeFrom(this._map.pm._getContainingLayer()),n.remove(),n.removeFrom(this._map.pm._getContainingLayer()),b.getLayers&&b.getLayers().length===0&&this._map.pm.removeLayer({target:b}),b instanceof L.LayerGroup?(b.eachLayer(k=>{this._addDrawnLayerProp(k)}),this._addDrawnLayerProp(b)):this._addDrawnLayerProp(b),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let k=this.options.layersToCut.indexOf(u);k>-1&&this.options.layersToCut.splice(k,1)}this._editedLayers.push({layer:b,originalLayer:u})})},_cutLayer(n,r){let a=L.geoJSON(),u;if(r instanceof L.Polygon)u=sm(r.toGeoJSON(15),n.toGeoJSON(15));else{let d=om(r);d.forEach(g=>{let _=Lu(g,n.toGeoJSON(15)),b;_&&_.features.length>0?b=L.geoJSON(_):b=L.geoJSON(g),b.getLayers().forEach(k=>{ku(n.toGeoJSON(15),k.toGeoJSON(15))||k.addTo(a)})}),d.length>1?u=am(a):u=a.toGeoJSON(15)}return u},_change:L.Util.falseFn}),dn.Text=dn.extend({initialize(n){this._map=n,this._shape="Text",this.toolbarButtonName="drawText"},enable(n){L.Util.setOptions(this,n),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(yt("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var n;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(n=this._hintMarker)==null||n.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(n){this.enabled()?this.disable():this.enable(n)},_syncHintMarker(n){if(this._hintMarker.setLatLng(n.latlng),this.options.snappable){let r=n;r.target=this._hintMarker,this._handleSnapping(r)}},_createMarker(n){var d,g,_,b;if(!n.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(n.latlng);let r=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(d=this.options.textOptions)==null?void 0:d.className){let k=this.options.textOptions.className.split(" ");this.textArea.classList.add(...k)}let a=this._createTextIcon(this.textArea),u=new L.Marker(r,{textMarker:!0,_textMarkerOverPM:!0,icon:a});if(this._setPane(u,"markerPane"),this._finishLayer(u),u.pm||(u.options.draggable=!1),u.addTo(this._map.pm._getContainingLayer()),u.pm){u.pm.textArea=this.textArea,L.setOptions(u.pm,{removeIfEmpty:((g=this.options.textOptions)==null?void 0:g.removeIfEmpty)??!0});let k=((_=this.options.textOptions)==null?void 0:_.focusAfterDraw)??!0;u.pm._createTextMarker(k),(b=this.options.textOptions)!=null&&b.text&&u.pm.setText(this.options.textOptions.text)}this._fireCreate(u),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(n){this.enable(),this._hintMarker.setLatLng(n.latlng)},_createTextArea(){let n=document.createElement("textarea");return n.readOnly=!0,n.classList.add("pm-textarea","pm-disabled"),n},_createTextIcon(n){return L.divIcon({className:"pm-text-marker",html:n})}});var lm={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,gn(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let n=this._getDOMElem();n&&(gn(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(n)):L.DomEvent.on(n,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,gn(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let n=this._getDOMElem();n&&(gn(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(n)):L.DomEvent.off(n,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(n){let r=n.touches?n.touches[0]:n,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseDown(a),!1},_simulateMouseMoveEvent(n){let r=n.touches?n.touches[0]:n,a={originalEvent:r,target:this._layer};return a.containerPoint=this._map.mouseEventToContainerPoint(r),a.latlng=this._map.containerPointToLatLng(a.containerPoint),this._dragMixinOnMouseMove(a),!1},_simulateMouseUpEvent(n){let r={originalEvent:n.touches?n.touches[0]:n,target:this._layer};return n.type.indexOf("touch")===-1&&(r.containerPoint=this._map.mouseEventToContainerPoint(n),r.latlng=this._map.containerPointToLatLng(r.containerPoint)),this._dragMixinOnMouseUp(r),!1},_dragMixinOnMouseDown(n){if(n.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(n);let r=n._fromLayerSync,a=this._syncLayers("_dragMixinOnMouseDown",n);if(this._layer instanceof L.Marker&&(this.options.snappable&&!r&&!a?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let u="resizeableCircleMarker";this._layer instanceof L.Circle&&(u="resizeableCircle"),this.options.snappable&&!r&&!a?this._layer.pm.options[u]||this._initSnappableMarkersDrag():this._layer.pm.options[u]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=n.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(n){this._overwriteEventIfItComesFromMarker(n);let r=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",n),this._dragging||(this._dragging=!0,L.DomUtil.addClass(r,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=n.latlng),this._onLayerDrag(n),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(n){let r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",n),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,r&&L.DomUtil.removeClass(r,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(n){let{latlng:r}=n,a={lat:r.lat-this._tempDragCoord.lat,lng:r.lng-this._tempDragCoord.lng},u=d=>d.map(g=>{if(Array.isArray(g))return u(g);let _={lat:g.lat+a.lat,lng:g.lng+a.lng};return(g.alt||g.alt===0)&&(_.alt=g.alt),_});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let d=u([this._layer.getLatLng()]);this._layer.setLatLng(d[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let d=this._layer.getLatLng();this._layer._snapped&&(d=this._layer._orgLatLng);let g=u([d]);this._layer.setLatLng(g[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let d=u([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(d),this._fireChange(this._layer.getBounds(),"Edit")}else{let d=u(this._layer.getLatLngs());this._layer.setLatLngs(d),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=r,n.layer=this._layer,this._fireDrag(n)},addDraggingClass(){let n=this._getDOMElem();n&&L.DomUtil.addClass(n,"leaflet-pm-draggable")},removeDraggingClass(){let n=this._getDOMElem();n&&L.DomUtil.removeClass(n,"leaflet-pm-draggable")},_getDOMElem(){let n=null;return this._layer._path?n=this._layer._path:this._layer._renderer&&this._layer._renderer._container?n=this._layer._renderer._container:this._layer._image?n=this._layer._image:this._layer._icon&&(n=this._layer._icon),n},_overwriteEventIfItComesFromMarker(n){n.target.getLatLng&&(!n.target._radius||n.target._radius<=10)&&(n.containerPoint=this._map.mouseEventToContainerPoint(n.originalEvent),n.latlng=this._map.containerPointToLatLng(n.containerPoint))},_syncLayers(n,r){if(this.enabled())return!1;if(!r._fromLayerSync&&this._layer===r.target&&this.options.syncLayersOnDrag){r._fromLayerSync=!0;let a=[];if(L.Util.isArray(this.options.syncLayersOnDrag))a=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(u=>{u instanceof L.LayerGroup&&(a=a.concat(u.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let u in this._parentLayerGroup){let d=this._parentLayerGroup[u];d.pm&&(a=d.pm.getLayers(!0))}return L.Util.isArray(a)&&a.length>0&&(a=a.filter(u=>!!u.pm).filter(u=>!!u.pm.options.draggable),a.forEach(u=>{u!==this._layer&&u.pm[n]&&(u._snapped=!1,u.pm[n](r))})),a.length>0}return!1},_stopDOMImageDrag(n){return n.preventDefault(),!1}},um=lm,cm=v(ki());function hm(n,r,a,u){return a.unproject(r.transform(a.project(n,u)),u)}function ah(n,r,a){let u=a.getMaxZoom();if(u===1/0&&(u=a.getZoom()),L.Util.isArray(n)){let d=[];return n.forEach(g=>{d.push(ah(g,r,a))}),d}return n instanceof L.LatLng?hm(n,r,a,u):null}function Ss(n,r){r instanceof L.Layer&&(r=r.getLatLng());let a=n.getMaxZoom();return a===1/0&&(a=n.getZoom()),n.project(r,a)}function Ua(n,r){let a=n.getMaxZoom();return a===1/0&&(a=n.getZoom()),n.unproject(r,a)}var dm={_onRotateStart(n){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ss(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ss(this._map,n.target.getLatLng()),this._initialRotateLatLng=si(this._layer),this._startAngle=this.getAngle();let r=si(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,r),this._fireRotationStart(this._map,r)},_onRotate(n){let r=Ss(this._map,n.target.getLatLng()),a=this._rotationStartPoint,u=this._rotationOriginPoint,d=Math.atan2(r.y-u.y,r.x-u.x)-Math.atan2(a.y-u.y,a.x-u.x);this._layer.setLatLngs(this._rotateLayer(d,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let g=this;function _(G,N=[],ge=-1){if(ge>-1&&N.push(ge),L.Util.isArray(G[0]))G.forEach((Ce,Ue)=>_(Ce,N.slice(),Ue));else{let Ce=N.length>0?(0,cm.default)(g._markers,N):g._markers[0];G.forEach((Ue,Qe)=>{Ce[Qe].setLatLng(Ue)})}}_(this._layer.getLatLngs());let b=si(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(d,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let k=d*180/Math.PI;k=k<0?k+360:k;let S=k+this._startAngle;this._setAngle(S),this._rotationLayer.pm._setAngle(S),this._fireRotation(this._rotationLayer,k,b),this._fireRotation(this._map,k,b),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let n=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let r=si(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=si(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,n,r),this._fireRotationEnd(this._map,n,r),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(n,r,a,u,d){let g=Ss(d,a);return this._matrix=u.clone().rotate(n,g).flip(),ah(r,this._matrix,d)},_setAngle(n){n=n<0?n+360:n,this._angle=n%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let n=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),r=n.getCenter();return n.removeFrom(this._layer._map),r},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(cs(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let n={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),n),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=si(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(n){let r=this.getAngle(),a=this._layer.getLatLngs(),u=n*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(u,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+n),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(u,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let d=this.getAngle()-r;d=d<0?d+360:d,this._startAngle=r,this._fireRotation(this._layer,d,a,this._layer),this._fireRotation(this._map||this._layer._map,d,a,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(n){let r=n-this.getAngle();this.rotateLayer(r)},getAngle(){return this._angle||0},setInitAngle(n){this._setAngle(n)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(n){this._rotationCenter=n,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(n)}},fm=dm,pm=L.Class.extend({includes:[um,po,fm,ls],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(n){L.Util.setOptions(this,n)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(n,r){r==="layerPane"?n.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":r==="vertexPane"?n.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":r==="markerPane"&&(n.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(n,r){let a=r.target,u={layer:this._layer,marker:a,event:r},d="";return n==="move"?d="moveVertexValidation":n==="add"?d="addVertexValidation":n==="remove"&&(d="removeVertexValidation"),this.options[d]&&typeof this.options[d]=="function"&&!this.options[d](u)?(n==="move"&&(a._cancelDragEventChain=a.getLatLng()),!1):(a._cancelDragEventChain=null,!0)},_vertexValidationDrag(n){return n._cancelDragEventChain?(n._latlng=n._cancelDragEventChain,n.update(),!1):!0},_vertexValidationDragEnd(n){return n._cancelDragEventChain?(n._cancelDragEventChain=null,!1):!0}}),mn=pm;mn.LayerGroup=L.Class.extend({initialize(n){this._layerGroup=n,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(u=>this._initLayer(u));let r=u=>{if(u.layer._pmTempLayer)return;this._layers=this.getLayers();let d=this._layers.filter(g=>!g.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in g.pm._parentLayerGroup));d.forEach(g=>{this._initLayer(g)}),d.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(r,100,this),this),this._layerGroup.on("layerremove",u=>{this._removeLayerFromGroup(u.target)},this);let a=u=>{u.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(a,100,this),this)},enable(n,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=n,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.enable(n,r)):a.pm.enable(n)})},disable(n=[]){n.length===0&&(this._layers=this.getLayers()),this._layers.forEach(r=>{r instanceof L.LayerGroup?n.indexOf(r._leaflet_id)===-1&&(n.push(r._leaflet_id),r.pm.disable(n)):r.pm.disable()})},enabled(n=[]){return n.length===0&&(this._layers=this.getLayers()),!!this._layers.find(r=>r instanceof L.LayerGroup?n.indexOf(r._leaflet_id)===-1?(n.push(r._leaflet_id),r.pm.enabled(n)):!1:r.pm.enabled())},toggleEdit(n,r=[]){r.length===0&&(this._layers=this.getLayers()),this._options=n,this._layers.forEach(a=>{a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.toggleEdit(n,r)):a.pm.toggleEdit(n)})},_initLayer(n){let r=L.Util.stamp(this._layerGroup);n.pm._parentLayerGroup||(n.pm._parentLayerGroup={}),n.pm._parentLayerGroup[r]=this._layerGroup},_removeLayerFromGroup(n){if(n.pm&&n.pm._layerGroup){let r=L.Util.stamp(this._layerGroup);delete n.pm._layerGroup[r]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(n=>n.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var n;return this._map||((n=this._layers.find(r=>!!r._map))==null?void 0:n._map)||null},getLayers(n=!1,r=!0,a=!0,u=[]){let d=[];return n?this._layerGroup.getLayers().forEach(g=>{d.push(g),g instanceof L.LayerGroup&&u.indexOf(g._leaflet_id)===-1&&(u.push(g._leaflet_id),d=d.concat(g.pm.getLayers(!0,!0,!0,u)))}):d=this._layerGroup.getLayers(),a&&(d=d.filter(g=>!(g instanceof L.LayerGroup))),r&&(d=d.filter(g=>!!g.pm),d=d.filter(g=>!g._pmTempLayer),d=d.filter(g=>!L.PM.optIn&&!g.options.pmIgnore||L.PM.optIn&&g.options.pmIgnore===!1)),d},setOptions(n,r=[]){r.length===0&&(this._layers=this.getLayers()),this.options=n,this._layers.forEach(a=>{a.pm&&(a instanceof L.LayerGroup?r.indexOf(a._leaflet_id)===-1&&(r.push(a._leaflet_id),a.pm.setOptions(n,r)):a.pm.setOptions(n))})}}),mn.Marker=mn.extend({_shape:"Marker",initialize(n){this._layer=n,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(n={draggable:!0}){if(L.Util.setOptions(this,n),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(n){this.enabled()?this.disable():this.enable(n)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(n){let r=n.target;r.remove(),this._fireRemove(r),this._fireRemove(this._map,r)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let n=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,n.off("pm:drag",this._handleSnapping,this),n.on("pm:drag",this._handleSnapping,this),n.off("pm:dragend",this._cleanupSnapping,this),n.on("pm:dragend",this._cleanupSnapping,this),n.off("pm:dragstart",this._unsnap,this),n.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let n=this._layer;n.off("pm:drag",this._handleSnapping,this),n.off("pm:dragend",this._cleanupSnapping,this),n.off("pm:dragstart",this._unsnap,this)}});var _r=v(ki()),mm={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let n=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=n.filter((r,a,u)=>u.indexOf(r)===a)},_removeFromCache(n){let r=this.markerCache.indexOf(n);r>-1&&this.markerCache.splice(r,1)},renderLimits(n){this.markerCache.forEach(r=>{n.includes(r)?this._markerGroup.addLayer(r):this._markerGroup.removeLayer(r)})},applyLimitFilters({latlng:n={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let r=[...this._filterClosestMarkers(n)];this.renderLimits(r)},_filterClosestMarkers(n){let r=[...this.markerCache],a=this.options.limitMarkersToCount;return a===-1?r:(r.sort((u,d)=>{let g=u._latlng.distanceTo(n),_=d._latlng.distanceTo(n);return g-_}),r.filter((u,d)=>a>-1?d<a:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(n){this._preventRenderMarkers=!!n}},gm=mm;mn.Line=mn.extend({includes:[gm],_shape:"Line",initialize(n){this._layer=n,this._enabled=!1},enable(n){if(L.Util.setOptions(this,n),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let n=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(n,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(n){return this.enabled()?this.disable():this.enable(n),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let n=this._map,r=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(n),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let a=u=>{if(Array.isArray(u[0]))return u.map(a,this);let d=u.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&u.map((g,_)=>{let b=this.isPolygon()?(_+1)%u.length:_+1;return this._createMiddleMarker(d[_],d[b])}),d};this._markers=a(r),this.filterMarkerGroup(),n.addLayer(this._markerGroup)},_createMarker(n){let r=new L.Marker(n,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this.options.rotate?(r.on("dragstart",this._onRotateStart,this),r.on("drag",this._onRotate,this),r.on("dragend",this._onRotateEnd,this)):(r.on("click",this._onVertexClick,this),r.on("dragstart",this._onMarkerDragStart,this),r.on("move",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||r.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(r),r},_createMiddleMarker(n,r){if(!n||!r)return!1;let a=L.PM.Utils.calcMiddleLatLng(this._map,n.getLatLng(),r.getLatLng()),u=this._createMarker(a),d=L.divIcon({className:"marker-icon marker-icon-middle"});return u.setIcon(d),u.leftM=n,u.rightM=r,n._middleMarkerNext=u,r._middleMarkerPrev=u,u.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),u.on("movestart",this._onMiddleMarkerMoveStart,this),u},_onMiddleMarkerClick(n){let r=n.target;if(!this._vertexValidation("add",n))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMoveStart(n){let r=n.target;if(r.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",n)){r.on("move",this._onMiddleMarkerMovePrevent,this);return}r._dragging=!0,this._addMarker(r,r.leftM,r.rightM)},_onMiddleMarkerMovePrevent(n){let r=n.target;this._vertexValidationDrag(r)},_onMiddleMarkerMoveEnd(n){let r=n.target;if(r.off("move",this._onMiddleMarkerMovePrevent,this),r.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(r))return;let a=L.divIcon({className:"marker-icon"});r.setIcon(a),setTimeout(()=>{delete r._dragging},100)},_addMarker(n,r,a){n.off("movestart",this._onMiddleMarkerMoveStart,this),n.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let u=n.getLatLng(),d=this._layer._latlngs;delete n.leftM,delete n.rightM;let{indexPath:g,index:_,parentPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),k=g.length>1?(0,_r.default)(d,b):d,S=g.length>1?(0,_r.default)(this._markers,b):this._markers;k.splice(_+1,0,u),S.splice(_+1,0,n),this._layer.setLatLngs(d),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(r,n),this._createMiddleMarker(n,a)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(n,L.PM.Utils.findDeepMarkerIndex(this._markers,n).indexPath,u),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return ds(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(n){let r=this._layer,a,u;if(this.options.allowSelfIntersection?a=!1:(u=ds(this._layer.toGeoJSON(15)),a=u.features.length>0),a){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return a;n?this._flashLayer():(r.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(u)}else r.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return a},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(n,r){n.forEach(a=>{Array.isArray(a)?this._updateDisabledMarkerStyle(a,r):a._icon&&(r&&!this._checkMarkerAllowedToDrag(a)?L.DomUtil.addClass(a._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(a._icon,"vertexmarker-disabled"))})},_removeMarker(n){let r=n.target;if(!this._vertexValidation("remove",n))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=si(this._layer,this._layer.getLatLngs()));let a=this._layer.getLatLngs(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!u)return;let _=u.length>1?(0,_r.default)(a,g):a,b=u.length>1?(0,_r.default)(this._markers,g):this._markers,k=g[g.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!k&&(_.length<=2||this.isPolygon()&&_.length<=3)){this._flashLayer();return}_.splice(d,1),this._layer.setLatLngs(a),this.isPolygon()&&_.length<=2&&_.splice(0,_.length);let S=!1;if(_.length<=1&&(_.splice(0,_.length),g.length>1&&u.length>1&&(a=Dr(a)),this._layer.setLatLngs(a),this._initMarkers(),S=!0),Hi(a)||this._layer.remove(),a=Dr(a),this._layer.setLatLngs(a),this._markers=Dr(this._markers),!S&&(b=u.length>1?(0,_r.default)(this._markers,g):this._markers,r._middleMarkerPrev&&(this._markerGroup.removeLayer(r._middleMarkerPrev),this._removeFromCache(r._middleMarkerPrev)),r._middleMarkerNext&&(this._markerGroup.removeLayer(r._middleMarkerNext),this._removeFromCache(r._middleMarkerNext)),this._markerGroup.removeLayer(r),this._removeFromCache(r),b)){let G,N;if(this.isPolygon()?(G=(d+1)%b.length,N=(d+(b.length-1))%b.length):(N=d-1<0?void 0:d-1,G=d+1>=b.length?void 0:d+1),G!==N){let ge=b[N],Ce=b[G];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(ge,Ce)}b.splice(d,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(r,u),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(n){let r=this._layer.getLatLngs(),a=n.getLatLng(),{indexPath:u,index:d,parentPath:g}=L.PM.Utils.findDeepMarkerIndex(this._markers,n);(u.length>1?(0,_r.default)(r,g):r).splice(d,1,a),this._layer.setLatLngs(r)},_getNeighborMarkers(n){let{indexPath:r,index:a,parentPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,n),d=r.length>1?(0,_r.default)(this._markers,u):this._markers,g=(a+1)%d.length,_=(a+(d.length-1))%d.length,b=d[_],k=d[g];return{prevMarker:b,nextMarker:k}},_checkMarkerAllowedToDrag(n){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(n),u=L.polyline([r.getLatLng(),n.getLatLng()]),d=L.polyline([n.getLatLng(),a.getLatLng()]),g=ai(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=ai(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return n.getLatLng()===this._markers[0][0].getLatLng()?_+=1:n.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&_<=2)},_onMarkerDragStart(n){let r=n.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",n))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(n,a),this.options.allowSelfIntersection||(this._coordsBeforeEdit=si(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(r):this._markerAllowedToDrag=null},_onMarkerDrag(n){let r=n.target;if(!this._vertexValidationDrag(r))return;let{indexPath:a,index:u,parentPath:d}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);if(!a)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(r);let g=a.length>1?(0,_r.default)(this._markers,d):this._markers,_=(u+1)%g.length,b=(u+(g.length-1))%g.length,k=r.getLatLng(),S=g[b].getLatLng(),G=g[_].getLatLng();if(r._middleMarkerNext){let N=L.PM.Utils.calcMiddleLatLng(this._map,k,G);r._middleMarkerNext.setLatLng(N)}if(r._middleMarkerPrev){let N=L.PM.Utils.calcMiddleLatLng(this._map,k,S);r._middleMarkerPrev.setLatLng(N)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(n,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(n){let r=n.target;if(!this._vertexValidationDragEnd(r))return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r),u=!this.options.allowSelfIntersection&&this.hasSelfIntersection();u&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(u=!1);let d=!this.options.allowSelfIntersection&&u;if(this._fireMarkerDragEnd(n,a,d),d){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(n,a);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(n){let r=n.target;if(r._dragging)return;let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireVertexClick(n,a)}}),mn.Polygon=mn.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(n){let{prevMarker:r,nextMarker:a}=this._getNeighborMarkers(n),u=L.polyline([r.getLatLng(),n.getLatLng()]),d=L.polyline([n.getLatLng(),a.getLatLng()]),g=ai(this._layer.toGeoJSON(15),u.toGeoJSON(15)).features.length,_=ai(this._layer.toGeoJSON(15),d.toGeoJSON(15)).features.length;return!(g<=2&&_<=2)}}),mn.Rectangle=mn.Polygon.extend({_shape:"Rectangle",_initMarkers(){let n=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,n.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((a,u)=>{let d=this._cornerMarkers.find(g=>g._index===u);d&&d.setLatLng(a)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(n,r){let a=new L.Marker(n,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(a,"vertexPane"),a._origLatLng=n,a._index=r,a._pmTempLayer=!0,a.on("click",this._onVertexClick,this),this._markerGroup.addLayer(a),a},_addMarkerEvents(){this._markers[0].forEach(n=>{n.on("dragstart",this._onMarkerDragStart,this),n.on("drag",this._onMarkerDrag,this),n.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||n.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(n){if(!this._vertexValidation("move",n))return;let r=n.target,a=this._cornerMarkers;r._oppositeCornerLatLng=a.find(d=>d._index===(r._index+2)%4).getLatLng(),r._snapped=!1;let{indexPath:u}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragStart(n,u)},_onMarkerDrag(n){let r=n.target;if(!this._vertexValidationDrag(r)||r._index===void 0)return;this._adjustRectangleForMarkerMove(r);let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDrag(n,a),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(n){let r=n.target;if(!this._vertexValidationDragEnd(r))return;this._cornerMarkers.forEach(u=>{delete u._oppositeCornerLatLng});let{indexPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,r);this._fireMarkerDragEnd(n,a),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(n){L.extend(n._origLatLng,n._latlng);let r=L.PM.Utils._getRotatedRectangle(n.getLatLng(),n._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(r),this._adjustAllMarkers(n),this._layer.redraw()},_adjustAllMarkers(n){let r=this._layer.getLatLngs()[0];if(r&&r.length!==4&&r.length>0)r.forEach((a,u)=>{this._cornerMarkers[u].setLatLng(a)}),this._cornerMarkers.slice(r.length).forEach(a=>{a.setLatLng(r[0])});else if(!r||!r.length)console.error("The layer has no LatLngs");else{let a=r.findIndex(u=>n.getLatLng().equals(u));a>-1?(this._cornerMarkers[(n._index+1)%4].setLatLng(r[(a+1)%4]),this._cornerMarkers[(n._index+2)%4].setLatLng(r[(a+2)%4]),this._cornerMarkers[(n._index+3)%4].setLatLng(r[(a+3)%4])):this._cornerMarkers.forEach(u=>{u.setLatLng(r[u._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(cs(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let n=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(n[0],n[2],this.getAngle(),this._map||this)}}),mn.CircleMarker=mn.extend({_shape:"CircleMarker",initialize(n){this._layer=n,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(n={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,n),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(n){this.enabled()?this.disable():this.enable(n)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let n=this._map;this._helperLayers&&(this._helperLayers.removeFrom(n),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(n);let r=this._layer.getLatLng(),a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._centerMarker=this._createCenterMarker(r),this._outerMarker=this._createOuterMarker(u),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(n,r){let a=this._map.project(n),u=L.point(a.x+r,a.y);return this._map.unproject(u)},_createHintLine(n,r){let a=n.getLatLng(),u=r.getLatLng();this._hintline=L.polyline([a,u],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(n){let r=this._createMarker(n);return this.options.draggable?(L.DomUtil.addClass(r._icon,"leaflet-pm-draggable"),r.on("move",this._moveCircle,this)):r.dragging.disable(),r},_createOuterMarker(n){let r=this._createMarker(n);return r.on("drag",this._resizeCircle,this),r},_createMarker(n){let r=new L.Marker(n,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=n,r._pmTempLayer=!0,r.on("dragstart",this._onMarkerDragStart,this),r.on("drag",this._onMarkerDrag,this),r.on("dragend",this._onMarkerDragEnd,this),r.on("click",this._onVertexClick,this),this._helperLayers.addLayer(r),r},_moveCircle(n){if(n.target._cancelDragEventChain)return;let r=this._centerMarker.getLatLng();this._layer.setLatLng(r);let a=this._layer._radius,u=this._getLatLngOnCircle(r,a);this._outerMarker._latlng=u,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let n=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(n,r);this._outerMarker.setLatLng(a),this._centerMarker.setLatLng(n),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let n=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(n,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(a),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let n=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng();this._hintline.setLatLngs([n,r])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(n){this._vertexValidation("move",n)&&this._fireMarkerDragStart(n)},_onMarkerDrag(n){let r=n.target;r instanceof L.Marker&&!this._vertexValidationDrag(r)||this._fireMarkerDrag(n)},_onMarkerDragEnd(n){this._extedingMarkerDragEnd();let r=n.target;this._vertexValidationDragEnd(r)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(n))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let n=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,n.off("pm:drag",this._handleSnapping,this),n.on("pm:drag",this._handleSnapping,this),n.off("pm:dragend",this._cleanupSnapping,this),n.on("pm:dragend",this._cleanupSnapping,this),n.off("pm:dragstart",this._unsnap,this),n.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let n=this._layer;n.off("pm:drag",this._handleSnapping,this),n.off("pm:dragend",this._cleanupSnapping,this),n.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let n=this._layer._map||this._map;if(n){let r=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),n,this._layer.getLatLng()),a=L.circle(this._layer.getLatLng(),this._layer.options);a.setRadius(r);let u=n&&n.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(a,200,!u).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(a,200,!u),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let n=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(n,r);return this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?r=hs(this._map,n,r,this._getMinDistanceInMeter(n)):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&(r=hs(this._map,n,r,this._getMaxDistanceInMeter(n))),r},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let n=this._centerMarker.getLatLng(),r=this._outerMarker.getLatLng(),a=this._distanceCalculation(n,r);this.options[this._minRadiusOption]&&a<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&a>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(n,r){return this._map.project(n).distanceTo(this._map.project(r))},_getMinDistanceInMeter(n){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,n)},_getMaxDistanceInMeter(n){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,n)},_onVertexClick(n){n.target._dragging||this._fireVertexClick(n,void 0)}}),mn.Circle=mn.CircleMarker.extend({_shape:"Circle",initialize(n){this._layer=n,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(n){L.PM.Edit.CircleMarker.prototype.enable.call(this,n||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let n=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(n,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let n=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!n).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!n),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(n,r){return this._map.distance(n,r)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(n){n.target._dragging||this._fireVertexClick(n,void 0)}}),mn.ImageOverlay=mn.extend({_shape:"ImageOverlay",initialize(n){this._layer=n,this._enabled=!1},toggleEdit(n){this.enabled()?this.disable():this.enable(n)},enabled(){return this._enabled},enable(n={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,n),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let n=this._layer.getBounds(),r=n.getNorthWest(),a=n.getNorthEast(),u=n.getSouthEast(),d=n.getSouthWest();return[r,a,u,d]}}),mn.Text=mn.extend({_shape:"Text",initialize(n){this._layer=n,this._enabled=!1},enable(n){if(L.Util.setOptions(this,n),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let n=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),n.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(n){this.enabled()?this.disable():this.enable(n)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let n=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,n.off("pm:drag",this._handleSnapping,this),n.on("pm:drag",this._handleSnapping,this),n.off("pm:dragend",this._cleanupSnapping,this),n.on("pm:dragend",this._cleanupSnapping,this),n.off("pm:dragstart",this._unsnap,this),n.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let n=this._layer;n.off("pm:drag",this._handleSnapping,this),n.off("pm:dragend",this._cleanupSnapping,this),n.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let n=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,r=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${n}px`,this.textArea.style.width=`${r}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(n){n.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(n={}){let r=this._hasFocus;this._hasFocus=n.type==="focus",!r!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(n){n&&(this.textArea.value=n),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let r=this.options.className.split(" ");this.textArea.classList.add(...r)}let n=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(n),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(n=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),n===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(n){n.preventDefault()}});var Ou=function(n,r,a,u,d,g){this._matrix=[n,r,a,u,d,g]};Ou.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Ou.prototype={transform(n){return this._transform(n.clone())},_transform(n){let r=this._matrix,{x:a,y:u}=n;return n.x=r[0]*a+r[1]*u+r[4],n.y=r[2]*a+r[3]*u+r[5],n},untransform(n){let r=this._matrix;return new L.Point((n.x/r[0]-r[4])/r[0],(n.y/r[2]-r[5])/r[2])},clone(){let n=this._matrix;return new L.PM.Matrix(n[0],n[1],n[2],n[3],n[4],n[5])},translate(n){if(n===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let r,a;return typeof n=="number"?(r=n,a=n):(r=n.x,a=n.y),this._add(1,0,0,1,r,a)},scale(n,r){if(n===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let a,u;return r=r||L.point(0,0),typeof n=="number"?(a=n,u=n):(a=n.x,u=n.y),this._add(a,0,0,u,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},rotate(n,r){let a=Math.cos(n),u=Math.sin(n);return r=r||new L.Point(0,0),this._add(a,u,-u,a,r.x,r.y)._add(1,0,0,1,-r.x,-r.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(n,r,a,u,d,g){let _=[[],[],[]],b=this._matrix,k=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],S=[[n,a,d],[r,u,g],[0,0,1]],G;n&&n instanceof L.PM.Matrix&&(b=n._matrix,S=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]]);for(let N=0;N<3;N+=1)for(let ge=0;ge<3;ge+=1){G=0;for(let Ce=0;Ce<3;Ce+=1)G+=k[N][Ce]*S[Ce][ge];_[N][ge]=G}return this._matrix=[_[0][0],_[1][0],_[0][1],_[1][1],_[0][2],_[1][2]],this}};var _m=Ou,ym={calcMiddleLatLng(n,r,a){let u=n.project(r),d=n.project(a);return n.unproject(u._add(d)._divideBy(2))},findLayers(n){let r=[];return n.eachLayer(a=>{(a instanceof L.Polyline||a instanceof L.Marker||a instanceof L.Circle||a instanceof L.CircleMarker||a instanceof L.ImageOverlay)&&r.push(a)}),r=r.filter(a=>!!a.pm),r=r.filter(a=>!a._pmTempLayer),r=r.filter(a=>!L.PM.optIn&&!a.options.pmIgnore||L.PM.optIn&&a.options.pmIgnore===!1),r},circleToPolygon(n,r=60,a=!0){let u=n.getLatLng(),d=n.getRadius(),g=us(u,d,r,0,a),_=[];for(let b=0;b<g.length;b+=1){let k=[g[b].lat,g[b].lng];_.push(k)}return L.polygon(_,n.options)},disablePopup(n){n.getPopup()&&(n._tempPopupCopy=n.getPopup(),n.unbindPopup())},enablePopup(n){n._tempPopupCopy&&(n.bindPopup(n._tempPopupCopy),delete n._tempPopupCopy)},_fireEvent(n,r,a,u=!1){n.fire(r,a,u);let{groups:d}=this.getAllParentGroups(n);d.forEach(g=>{g.fire(r,a,u)})},getAllParentGroups(n){let r=[],a=[],u=d=>{for(let g in d._eventParents)if(r.indexOf(g)===-1){r.push(g);let _=d._eventParents[g];a.push(_),u(_)}};return!n._pmLastGroupFetch||!n._pmLastGroupFetch.time||new Date().getTime()-n._pmLastGroupFetch.time>1e3?(u(n),n._pmLastGroupFetch={time:new Date().getTime(),groups:a,groupIds:r},{groupIds:r,groups:a}):{groups:n._pmLastGroupFetch.groups,groupIds:n._pmLastGroupFetch.groupIds}},createGeodesicPolygon:us,getTranslation:yt,findDeepCoordIndex(n,r,a=!0){let u,d=_=>(b,k)=>{let S=_.concat(k);if(a){if(b.lat&&b.lat===r.lat&&b.lng===r.lng)return u=S,!0}else if(b.lat&&L.latLng(b).equals(r))return u=S,!0;return Array.isArray(b)&&b.some(d(S))};n.some(d([]));let g={};return u&&(g={indexPath:u,index:u[u.length-1],parentPath:u.slice(0,u.length-1)}),g},findDeepMarkerIndex(n,r){let a,u=g=>(_,b)=>{let k=g.concat(b);return _._leaflet_id===r._leaflet_id?(a=k,!0):Array.isArray(_)&&_.some(u(k))};n.some(u([]));let d={};return a&&(d={indexPath:a,index:a[a.length-1],parentPath:a.slice(0,a.length-1)}),d},_getIndexFromSegment(n,r){if(r&&r.length===2){let a=this.findDeepCoordIndex(n,r[0]),u=this.findDeepCoordIndex(n,r[1]),d=Math.max(a.index,u.index);return(a.index===0||u.index===0)&&d!==1&&(d+=1),{indexA:a,indexB:u,newIndex:d,indexPath:a.indexPath,parentPath:a.parentPath}}return null},_getRotatedRectangle(n,r,a,u){let d=Ss(u,n),g=Ss(u,r),_=a*Math.PI/180,b=Math.cos(_),k=Math.sin(_),S=(g.x-d.x)*b+(g.y-d.y)*k,G=(g.y-d.y)*b-(g.x-d.x)*k,N=S*b+d.x,ge=S*k+d.y,Ce=-G*k+d.x,Ue=G*b+d.y,Qe=Ua(u,d),st=Ua(u,{x:N,y:ge}),At=Ua(u,g),$=Ua(u,{x:Ce,y:Ue});return[Qe,st,At,$]},pxRadiusToMeterRadius(n,r,a){let u=r.project(a),d=L.point(u.x+n,u.y);return r.distance(r.unproject(d),a)}},vm=ym;L.PM=L.PM||{version:eo.version,Map:ka,Toolbar:fo,Draw:dn,Edit:mn,Utils:vm,Matrix:_m,activeLang:"en",optIn:!1,initialize(n){this.addInitHooks(n)},setOptIn(n){this.optIn=!!n},addInitHooks(){function n(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(n);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(r);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(a);function u(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(u);function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(_);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(b);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(k)},reInitLayer(n){n instanceof L.LayerGroup&&n.eachLayer(r=>{this.reInitLayer(r)}),n.pm||L.PM.optIn&&n.options.pmIgnore!==!1||n.options.pmIgnore||(n instanceof L.Map?n.pm=new L.PM.Map(n):n instanceof L.Marker?n.options.textMarker?(n.pm=new L.PM.Edit.Text(n),n.pm._initTextMarker(),n.pm._createTextMarker(!1)):n.pm=new L.PM.Edit.Marker(n):n instanceof L.Circle?n.pm=new L.PM.Edit.Circle(n):n instanceof L.CircleMarker?n.pm=new L.PM.Edit.CircleMarker(n):n instanceof L.Rectangle?n.pm=new L.PM.Edit.Rectangle(n):n instanceof L.Polygon?n.pm=new L.PM.Edit.Polygon(n):n instanceof L.Polyline?n.pm=new L.PM.Edit.Line(n):n instanceof L.LayerGroup?n.pm=new L.PM.Edit.LayerGroup(n):n instanceof L.ImageOverlay&&(n.pm=new L.PM.Edit.ImageOverlay(n)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(n){let r=this._map.mouseEventToLayerPoint(n),a,u;for(let d=this._drawFirst;d;d=d.next)a=d.layer,a.options.interactive&&a._containsPoint(r)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);u&&(L.DomEvent.fakeStop(n),this._fireEvent([u],n))}}),L.PM.initialize()})();function xb(){const e=qe(null),i=qe(null),s=R=>`${(R*100).toFixed(1)}%`,l=R=>`${((R%360+360)%360).toFixed(1)}°`,h=R=>(R%360+360)%360,p=(R,Z,q)=>{const xe=h(Z);let V=h(q)-xe;return V<=0&&(V+=360),Math.PI*R*V/180},f=(R,Z,q)=>{const xe=h(Z);let V=h(q)-xe;return V<=0&&(V+=360),Math.PI*R*R*V/360},y=R=>{if("getLatLngs"in R){const q=R.getLatLngs();if(Array.isArray(q)&&q[0]){const ie=(Array.isArray(q[0])?q[0]:q).map(le=>[le.lng,le.lat]),V=Ec([ie]);return Pc(V)}}return 0},v=R=>{if("getLatLngs"in R){const q=R.getLatLngs();if(Array.isArray(q)){const xe=(Array.isArray(q[0])?q[0]:q).map(V=>[V.lng,V.lat]),ie=Qo(xe);return vl(ie,{units:"meters"})}}return 0},C=R=>{if("getLatLngs"in R){const q=R.getLatLngs();if(Array.isArray(q)&&q[0]){const ie=[...(Array.isArray(q[0])?q[0]:q).map(le=>[le.lng,le.lat])];ie.length>0&&ie.push(ie[0]);const V=Qo(ie);return vl(V,{units:"meters"})}}return 0},M=R=>{const Z=R;return Z._mRadius?Z._mRadius:Z.getRadius?Z.getRadius():0},P=(R,Z)=>{var xe,ie;console.log("=== CALCULATE PROPERTIES START ==="),console.log("Input:",{type:Z,layer:{constructor:(xe=R==null?void 0:R.constructor)==null?void 0:xe.name,_mRadius:R._mRadius,_latlng:R._latlng,options:R.options}});const q={type:Z,style:R.options};try{switch(Z){case"Circle":const V=M(R);console.log("Circle radius calculation:",{_mRadius:R._mRadius,calculatedRadius:V,getRadius:(ie=R.getRadius)==null?void 0:ie.call(R)}),q.radius=V,q.diameter=q.radius*2,q.area=Math.PI*Math.pow(q.radius,2),q.perimeter=2*Math.PI*q.radius,q.center=R.getLatLng(),console.log("Circle properties calculated:",q);break;case"Semicircle":q.radius=M(R),q.diameter=q.radius*2,q.center=R.getLatLng(),q.startAngle=h(R.options.startAngle||0),q.stopAngle=h(R.options.stopAngle||180),q.arcLength=p(q.radius,q.startAngle,q.stopAngle),q.area=f(q.radius,q.startAngle,q.stopAngle),q.chordLength=2*q.radius*Math.abs(Math.sin((q.stopAngle-q.startAngle)*Math.PI/360)),console.log("Semicircle properties calculated:",q);break;case"Rectangle":case"Polygon":q.area=y(R),q.perimeter=C(R),console.log("Rectangle/Polygon properties calculated:",q);break;case"Line":case"Polyline":if(q.length=v(R),R.elevation){const le=R.elevation.gain,Oe=q.length;q.slope=le/Oe}console.log("Line/Polyline properties calculated:",q);break}}catch(V){console.error("Error calculating properties:",V)}return console.log("=== CALCULATE PROPERTIES END ==="),console.log("Final properties:",q),q},j=R=>{var Z,q,xe,ie,V,le;if(console.log("=== UPDATE SELECTED SHAPE START ==="),console.log("Input shape:",{type:R==null?void 0:R.type,properties:R==null?void 0:R.properties,layer:R!=null&&R.layer?{type:R.layer.constructor.name,options:R.layer.options,_mRadius:R.layer._mRadius,_latlng:R.layer._latlng,bounds:(q=(Z=R.layer).getBounds)==null?void 0:q.call(Z)}:{type:(xe=R==null?void 0:R.constructor)==null?void 0:xe.name,options:R==null?void 0:R.options,_mRadius:R==null?void 0:R._mRadius,_latlng:R==null?void 0:R._latlng,bounds:(ie=R==null?void 0:R.getBounds)==null?void 0:ie.call(R)}}),(V=e.value)!=null&&V.off&&e.value.off("properties:updated"),e.value=R,R){R.on&&(console.log("Adding properties:updated event listener"),R.on("properties:updated",Ee=>{var ye;console.log("Properties updated event received:",{event:Ee,shape:{_mRadius:Ee.shape._mRadius,_latlng:Ee.shape._latlng,properties:Ee.shape.properties,constructor:Ee.shape.constructor.name}});const Pe=Ee.shape,F=((ye=Pe.properties)==null?void 0:ye.type)||"unknown";console.log("Updating properties for shape:",{type:F,_mRadius:Pe._mRadius,_latlng:Pe._latlng,currentProperties:Pe.properties});const te=P(Pe,F);console.log("Recalculated properties:",te),i.value={...te},Pe.properties={...te},console.log("Updated shapeProperties:",i.value)}));const Oe=P(R.layer||R,R.type||((le=R.properties)==null?void 0:le.type));console.log("Initial calculated properties:",Oe),i.value={...Oe},R.layer?R.layer.properties={...Oe}:R.properties={...Oe},console.log("Initial shapeProperties set:",i.value)}else console.log("No shape provided, clearing properties"),i.value=null;console.log("=== UPDATE SELECTED SHAPE END ===")},J=kt(()=>{if(!i.value)return null;const R={...i.value};return R.area&&(R.areaFormatted=`${(R.area/1e4).toFixed(2)} ha`),R.length&&(R.lengthFormatted=`${R.length.toFixed(1)} m`),R.arcLength&&(R.arcLengthFormatted=`${R.arcLength.toFixed(1)} m`),R.perimeter&&(R.perimeterFormatted=`${(R.perimeter/1e3).toFixed(2)} km`),R.radius&&(R.radiusFormatted=`${R.radius.toFixed(1)} m`),R.diameter&&(R.diameterFormatted=`${R.diameter.toFixed(1)} m`),R.width&&(R.widthFormatted=`${R.width.toFixed(1)} m`),R.height&&(R.heightFormatted=`${R.height.toFixed(1)} m`),R.chordLength&&(R.chordLengthFormatted=`${R.chordLength.toFixed(1)} m`),R.slope&&(R.slopeFormatted=s(R.slope)),R.startAngle&&(R.startAngleFormatted=l(R.startAngle)),R.stopAngle&&(R.stopAngleFormatted=l(R.stopAngle)),R});return{selectedShape:e,shapeProperties:i,formattedProperties:J,updateSelectedShape:j,calculateProperties:P,normalizeAngle:h,calculateArcLength:p,calculateSectorArea:f}}class Os extends tt.Polygon{constructor(s,l,h=0,p=180,f={}){super([[]],{...f,pmIgnore:!1,interactive:!0,className:"leaflet-semicircle"});lt(this,"center");lt(this,"radius");lt(this,"startAngle");lt(this,"stopAngle");lt(this,"numPoints");lt(this,"properties");lt(this,"pm");this.center=s,this.radius=l,this.startAngle=this.normalizeAngle(h),this.stopAngle=this.normalizeAngle(p),this.numPoints=64,this.properties={type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle,style:{...f,startAngle:this.startAngle,stopAngle:this.stopAngle}},this.on("pm:enable",y=>{var v;this.pm&&(this.pm._layers=[],this.pm._markers=[],(v=this.pm._markerGroup)==null||v.clearLayers())}),this.on("pm:vertexadded",y=>{var v;this.pm&&((v=this.pm._markerGroup)==null||v.clearLayers())}),this.on("add",()=>{this._map&&(this.updateGeometry(),this.pm&&this.pm.enable({allowSelfIntersection:!1,preventMarkerRemoval:!0}))})}normalizeAngle(s){return(s%360+360)%360}calculateArcPoints(){if(!this._map)return[];const s=[],l=(this.stopAngle-this.startAngle+360)%360;s.push(this.center);for(let h=0;h<=this.numPoints;h++){const f=(this.startAngle+l*h/this.numPoints)*Math.PI/180,y=this.radius*Math.cos(f),C=this.radius*Math.sin(f)/111319.9,M=y/(111319.9*Math.cos(this.center.lat*Math.PI/180)),P=tt.latLng(this.center.lat+C,this.center.lng+M);s.push(P)}return s.push(this.center),s}setRadius(s){return s<=0?this:(this.radius=s,this.properties.radius=s,this.updateGeometry(),this)}setAngles(s,l){const h=this.normalizeAngle(s),p=this.normalizeAngle(l),f=this.getOpeningAngle();let y=(p-h+360)%360;const v=45;return Math.abs(y-f)>v&&(y>f?y=f+v:y=f-v),y=Math.max(0,Math.min(360,y)),this.startAngle=h,this.stopAngle=(h+y)%360,this.properties.startAngle=this.startAngle,this.properties.stopAngle=this.stopAngle,this.properties.style.startAngle=this.startAngle,this.properties.style.stopAngle=this.stopAngle,this.updateGeometry(),this}setOpeningAngle(s){return s<0||s>360?this:(this.stopAngle=this.normalizeAngle(this.startAngle+s),this.updateGeometry(),this)}setCenter(s){return!s.lat||!s.lng?this:(this.center=s,this.updateGeometry(),this)}getCenter(){return this.center}getRadius(){return this.radius}getStartAngle(){return this.startAngle}getStopAngle(){return this.stopAngle}getOpeningAngle(){return(this.stopAngle-this.startAngle+360)%360}updateGeometry(){if(!this._map)return;const s=this.calculateArcPoints();s.length>0&&this.setLatLngs([s])}toGeoJSON(){const s=super.toGeoJSON();return{...s,properties:{...s.properties,type:"Semicircle",radius:this.radius,startAngle:this.startAngle,stopAngle:this.stopAngle}}}}const bl=(e,i)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${i})`;const s=parseInt(e.slice(1,3),16),l=parseInt(e.slice(3,5),16),h=parseInt(e.slice(5,7),16);return`rgba(${s}, ${l}, ${h}, ${i})`},Td=(e,i)=>{e.style.fontSize=i.fontSize,e.style.color=i.color,e.style.backgroundColor=bl(i.backgroundColor,i.backgroundOpacity),i.hasBorder?e.style.border=`${i.borderWidth} solid ${bl(i.borderColor,i.borderOpacity)}`:e.style.border="none",e.style.padding=i.padding,e.style.borderRadius=i.borderRadius},In=e=>{document.querySelectorAll(".drawing-help-message").forEach(l=>l.remove());const s=tt.DomUtil.create("div","drawing-help-message");return s.innerHTML=e,s.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(s),s};function ic(e,i,s){const l=156543.03392*Math.cos(i*Math.PI/180)/Math.pow(2,s);return e/l}const Ht=(e,i="m",s="")=>{let l,h;return i==="m²"?e>=1e4?(l=(e/1e4).toFixed(2),h="ha"):(l=e.toFixed(2),h="m²"):i==="m"?e>=1e3?(l=(e/1e3).toFixed(2),h="km"):(l=e.toFixed(2),h="m"):(l=e.toFixed(2),h=i),s?`${s}: ${l} ${h}`:`${l} ${h}`},Dd=e=>`${((e%360+360)%360).toFixed(1)}°`,wb=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1});function Lb(){const e=qe(null),i=qe(null),s=qe(""),l=qe(null),h=qe(!1),p=(F,te="Double-cliquez pour éditer")=>{const ye={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ne=(Ye,Ke)=>{var Le;const Je=((Le=e.value)==null?void 0:Le.getZoom())||14,nt=F.lat,Xe=ic(Ke.physicalSize,nt,Je);return`<div class="text-container" style="width:${Xe}px;height:${Xe}px;transform:rotate(${Ke.rotation}deg)">
        <div class="text-annotation" style="font-size:${Xe*.2}px;color:${Ke.color};background-color:${bl(Ke.backgroundColor,Ke.backgroundOpacity)};border:${Ke.hasBorder?Ke.borderWidth+" solid "+bl(Ke.borderColor,Ke.borderOpacity):"none"};padding:${Ke.padding};border-radius:${Ke.borderRadius}">${Ye}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},Be=()=>{if(!e.value)return;const Ye=e.value.getZoom(),Ke=re.getLatLng().lat;ic(re.properties.style.physicalSize,Ke,Ye);const Je=re.getIcon(),nt={html:ne(re.properties.text,re.properties.style),className:Je.options.className};re.setIcon(tt.divIcon(nt))},Fe=tt.divIcon({html:ne(te,ye),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),re=tt.marker(F,{icon:Fe,draggable:!1,pmIgnore:!0});re.properties={type:"text",text:te,style:{...ye}},e.value&&(e.value.on("zoomend",Be),re.on("remove",()=>{var Ye;(Ye=e.value)==null||Ye.off("zoomend",Be)})),Be();let Se=!1,Ae=!1,ve=0,H=0;const ee=Ye=>{if(!e.value)return;const Ke=Ye.target;if(Ke.classList.contains("rotate")){Se=!0;const Je=re.getLatLng(),nt=e.value.mouseEventToLatLng(Ye);ve=Math.atan2(nt.lat-Je.lat,nt.lng-Je.lng)*180/Math.PI,H=re.properties.style.rotation||0}else Ke.classList.contains("move")&&(Ae=!0,e.value.latLngToLayerPoint(re.getLatLng()));document.addEventListener("mousemove",se),document.addEventListener("mouseup",He)},se=Ye=>{if(!(!Ae||!e.value)){if(Se){const Ke=re.getLatLng(),Je=e.value.mouseEventToLatLng(Ye),nt=Math.atan2(Je.lat-Ke.lat,Je.lng-Ke.lng)*180/Math.PI,Xe=(H+(nt-ve))%360;re.properties.style.rotation=Xe;const Le=re.getIcon(),Ze={html:ne(re.properties.text,re.properties.style),className:Le.options.className};re.setIcon(tt.divIcon(Ze))}else if(Ae){const Ke=wb(Ye),Je=e.value.mouseEventToLatLng(Ke);re.setLatLng(Je)}}},He=()=>{Se=!1,Ae=!1,document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",He)};return re.on("add",()=>{const Ye=re.getElement();Ye&&Ye.querySelectorAll(".control-button").forEach(Je=>{Je.addEventListener("mousedown",ee)})}),re.on("remove",()=>{const Ye=re.getElement();Ye&&Ye.querySelectorAll(".control-button").forEach(Je=>{Je.removeEventListener("mousedown",ee)})}),re.on("dblclick",Ye=>{var Ze;tt.DomEvent.stopPropagation(Ye);const Ke=(Ze=re.getElement())==null?void 0:Ze.querySelector(".text-annotation");if(!Ke)return;Ke.contentEditable="true",Ke.focus(),Ke.classList.add("editing");const Je=window.getSelection(),nt=document.createRange();nt.selectNodeContents(Ke),Je==null||Je.removeAllRanges(),Je==null||Je.addRange(nt);const Xe=()=>{Ke.contentEditable="false",Ke.classList.remove("editing");const Ve=Ke.innerText.trim();if(Ve){re.properties.text=Ve;const it=re.getIcon(),Et={html:ne(Ve,re.properties.style),className:it.options.className};re.setIcon(tt.divIcon(Et))}Ke.removeEventListener("blur",Xe),Ke.removeEventListener("keydown",Le)},Le=Ve=>{Ve.key==="Enter"&&!Ve.shiftKey&&(Ve.preventDefault(),Xe())};Ke.addEventListener("blur",Xe),Ke.addEventListener("keydown",Le)}),re},f=(F,te)=>{const ye=tt.DomUtil.create("div","measure-tooltip");if(ye.innerHTML=te,ye.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(ye),e.value){const ne=e.value.latLngToContainerPoint(F);ye.style.left=`${ne.x+10}px`,ye.style.top=`${ne.y-25}px`}return ye},y=(F,te,ye)=>{F.on("mouseover",()=>{const ne=f(F.getLatLng(),ye());F.measureDiv=ne}),F.on("mousemove",ne=>{if(F.measureDiv&&e.value){const Be=e.value.latLngToContainerPoint(ne.latlng);F.measureDiv.style.left=`${Be.x+10}px`,F.measureDiv.style.top=`${Be.y-25}px`}}),F.on("mouseout",()=>{F.measureDiv&&(F.measureDiv.remove(),F.measureDiv=void 0)})};xb();let v=[];const C=()=>{v.forEach(F=>{F&&F.remove&&("measureDiv"in F&&F.measureDiv&&(F.measureDiv.remove(),F.measureDiv=void 0),i.value&&i.value.removeLayer(F),F.remove())}),v=[],document.querySelectorAll(".measure-tooltip").forEach(F=>{F.remove()})},M=(F,te="#2563EB")=>{const ye=tt.circleMarker(F,{radius:6,color:te,fillColor:te,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return i.value&&i.value.addLayer(ye),ye},P=(F,te)=>{var ne,Be,Fe,re,Se,Ae;console.log("=== CALCULATING SHAPE PROPERTIES START ==="),console.log("Input layer:",{type:te,instanceof:{Circle:F instanceof tt.Circle,Rectangle:F instanceof tt.Rectangle,Polygon:F instanceof tt.Polygon,Polyline:F instanceof tt.Polyline,CircleArc:F instanceof Os},options:F.options});const ye={type:te,style:F.options||{}};try{if(F instanceof tt.Circle){const ve=F.getRadius(),H=F.getLatLng();ye.radius=ve,ye.diameter=ve*2,ye.area=Math.PI*Math.pow(ve,2),ye.perimeter=2*Math.PI*ve,ye.center=H,ye.surfaceInterieure=ye.area,ye.surfaceExterieure=ye.area,console.log("Circle properties calculated:",ye)}else if(F instanceof Os){const ve=F.getRadius(),H=F.getCenter(),ee=F.getStartAngle(),se=F.getStopAngle(),He=F.getOpeningAngle();ye.radius=ve,ye.diameter=ve*2,ye.area=Math.PI*Math.pow(ve,2)*He/360,ye.arcLength=2*Math.PI*ve*He/360,ye.perimeter=ye.arcLength+2*ve,ye.center=H,ye.startAngle=ee,ye.stopAngle=se,ye.openingAngle=He,ye.surfaceInterieure=ye.area,ye.surfaceExterieure=ye.area,console.log("CircleArc properties calculated:",ye)}else if(F instanceof tt.Rectangle){const ve=F.getBounds(),H=ve.getNorthEast(),ee=ve.getSouthWest(),se=Mc([ee.lng,ee.lat],[H.lng,ee.lat],{units:"meters"}),He=Mc([ee.lng,ee.lat],[ee.lng,H.lat],{units:"meters"});ye.width=se,ye.height=He,ye.area=se*He,ye.perimeter=2*(se+He),ye.surfaceInterieure=ye.area,ye.surfaceExterieure=ye.area,ye.dimensions={width:se,height:He},console.log("Rectangle properties calculated:",ye)}else if(F instanceof tt.Polygon){const H=F.getLatLngs()[0].map(se=>[se.lng,se.lat]);H.push(H[0]);const ee=Ec([H]);ye.area=Pc(ee),ye.perimeter=vl(Qo([...H]),{units:"meters"}),ye.surfaceInterieure=ye.area,ye.surfaceExterieure=ye.area,console.log("Polygon properties calculated:",ye)}else if(F instanceof tt.Polyline&&!(F instanceof tt.Polygon)){const H=F.getLatLngs().map(He=>[He.lng,He.lat]),ee=Qo(H);ye.length=vl(ee,{units:"meters"});const se=10;ye.surfaceInfluence=ye.length*se,ye.dimensions={width:se},console.log("Polyline properties calculated:",ye)}ye.style={...ye.style,color:((ne=F.options)==null?void 0:ne.color)||"#3388ff",weight:((Be=F.options)==null?void 0:Be.weight)||3,opacity:((Fe=F.options)==null?void 0:Fe.opacity)||1,fillColor:((re=F.options)==null?void 0:re.fillColor)||"#3388ff",fillOpacity:((Se=F.options)==null?void 0:Se.fillOpacity)||.2,dashArray:((Ae=F.options)==null?void 0:Ae.dashArray)||""}}catch(ve){console.error("Error calculating shape properties:",ve)}return console.log("=== CALCULATING SHAPE PROPERTIES END ==="),console.log("Final properties:",ye),ye},j=(F,te=2)=>{var re;if(!e.value){console.warn("Map is not available for text size update");return}const ye=e.value.getZoom(),ne=F.getLatLng().lat,Be=ic(te,ne,ye),Fe=(re=F.getElement())==null?void 0:re.querySelector(".text-annotation");Fe&&(F.properties.style.fontSize=`${Be}px`,F.properties.physicalWidth=te,F.properties.physicalHeight=te,Td(Fe,F.properties.style))},J=(F,te,ye)=>{const ne=tt.map(F).setView(te,ye);e.value=ne,tt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(ne);const Be=new tt.FeatureGroup;return Be.addTo(ne),i.value=Be,ne.pm.addControls({position:"topleft",drawMarker:!1,drawPolyline:!1,drawRectangle:!1,drawPolygon:!1,drawCircle:!1,drawCircleMarker:!1,drawText:!1,editMode:!1,dragMode:!1,cutPolygon:!1,removalMode:!1}),ne.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:Be,templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ne.on("pm:drawstart",Fe=>{h.value=!0,Fe.shape==="Circle"&&s.value==="Semicircle"&&(ne.getContainer().style.cursor="crosshair")}),ne.on("pm:drawend",()=>{h.value=!1,ne.getContainer().style.cursor="",l.value&&In("Cliquez sur la forme pour afficher les points de contrôle")}),ne.on("pm:create",async Fe=>{var Ae,ve,H;const re=Fe.layer;(Ae=i.value)==null||Ae.addLayer(re);let Se="unknown";if(re instanceof tt.Circle?Se=s.value==="Semicircle"?"Semicircle":"Circle":re instanceof tt.Rectangle?Se="Rectangle":re instanceof tt.Polygon?Se="Polygon":re instanceof tt.Polyline&&!(re instanceof tt.Polygon)&&(Se="Line"),re.properties=P(re,Se),l.value=re,Se==="Semicircle"){const ee=re.getLatLng(),se=re.getRadius();(ve=i.value)==null||ve.removeLayer(re);const He=new Os(ee,se);He.properties=P(He,"Semicircle"),(H=i.value)==null||H.addLayer(He),l.value=He,Pe(He)}else re instanceof tt.Circle?V(re):re instanceof tt.Rectangle?le(re):re instanceof tt.Polygon?Ee(re):re instanceof tt.Polyline&&!(re instanceof tt.Polygon)&&Oe(re);In("Cliquez sur la forme pour afficher les points de contrôle")}),ne.on("click",Fe=>{Fe.target===ne&&(C(),l.value=null,document.querySelectorAll(".drawing-help-message").forEach(Se=>Se.remove()))}),Be.on("click",Fe=>{var Se,Ae,ve;tt.DomEvent.stopPropagation(Fe);const re=Fe.layer;C(),(Se=document.querySelector(".drawing-help-message"))==null||Se.remove(),l.value=re,re instanceof Os||((Ae=re.properties)==null?void 0:Ae.type)==="Semicircle"?(re.pm&&(re.pm._layers=[],re.pm._markers=[],(ve=re.pm._markerGroup)==null||ve.clearLayers()),Pe(re)):re instanceof tt.Circle?V(re):re instanceof tt.Rectangle?le(re):re instanceof tt.Polygon?Ee(re):re instanceof tt.Polyline&&!(re instanceof tt.Polygon)&&Oe(re)}),ne.on("pm:edit",Fe=>{var Se,Ae;console.log("=== PM:EDIT EVENT START ==="),console.log("Event details:",Fe);const re=Fe.layer;if(re){console.log("Layer before update:",{type:(Se=re.properties)==null?void 0:Se.type,properties:re.properties,options:re.options,_mRadius:re._mRadius,_latlng:re._latlng,constructor:re.constructor.name});let ve="unknown";re instanceof tt.Circle?(ve=((Ae=re.properties)==null?void 0:Ae.type)==="Semicircle"?"Semicircle":"Circle",console.log("Circle detected with radius:",re.getRadius())):re instanceof tt.Rectangle?ve="Rectangle":re instanceof tt.Polygon?ve="Polygon":re instanceof tt.Polyline&&!(re instanceof tt.Polygon)&&(ve="Line"),console.log("Detected shape type:",ve);const H=P(re,ve);if(console.log("Newly calculated properties:",H),l.value&&l.value===re){console.log("Updating selected shape...",{currentRadius:re._mRadius,newRadius:H.radius});const ee={...H};re.properties=ee,l.value=null,zs(()=>{l.value=re}),console.log("Emitting properties:updated event with:",{shape:{_mRadius:re._mRadius,_latlng:re._latlng,properties:ee,constructor:re.constructor.name}}),re.fire("properties:updated",{shape:re,properties:ee}),console.log("Shape properties after update:",{layerRadius:re._mRadius,propertiesRadius:re.properties.radius,fullProperties:re.properties})}ve==="Semicircle"?Pe(re):re instanceof tt.Circle?V(re):re instanceof tt.Rectangle?le(re):re instanceof tt.Polygon?Ee(re):re instanceof tt.Polyline&&Oe(re),In("Utilisez les points de contrôle pour modifier la forme")}console.log("=== PM:EDIT EVENT END ===")}),ne.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(Fe=>Fe.remove()),In("Déplacez la forme à l'endroit souhaité")}),ne.on("pm:dragend",Fe=>{var re;if(Fe.layer&&l.value===Fe.layer){const Se=Fe.layer,Ae=((re=Se.properties)==null?void 0:re.type)||"unknown",ve=P(Se,Ae);Se.properties={...ve},l.value=null,zs(()=>{l.value=Se}),Se.fire("properties:updated",{shape:Se,properties:Se.properties})}setTimeout(()=>{In("Cliquez sur la forme pour afficher les points de contrôle")},100)}),ne.on("pm:remove",()=>{var Fe;(Fe=document.querySelector(".drawing-help-message"))==null||Fe.remove()}),ne.on("pm:select",Fe=>{var Se;const re=Fe.layer;document.querySelectorAll(".drawing-help-message").forEach(Ae=>Ae.remove()),re instanceof Os||((Se=re.properties)==null?void 0:Se.type)==="Semicircle"?In(`Points de contrôle : <span style="color: #059669">●</span> Ajuster le rayon, <span style="color: #2563EB">●</span> et <span style="color: #DC2626">●</span> Modifier l'ouverture du demi-cercle`):In("Utilisez les points de contrôle pour modifier la forme")}),ne.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(Fe=>Fe.remove())}),ne},R=()=>{if(!e.value||!i.value)return;const F=i.value.getBounds();F.isValid()&&e.value.fitBounds(F,{padding:[50,50],maxZoom:19})},Z=F=>{if(e.value){console.log("=== SETTING DRAWING TOOL START ==="),console.log("Current tool:",s.value),console.log("New tool:",F),document.querySelectorAll(".drawing-help-message").forEach(te=>te.remove());try{console.log("Disabling all modes...");const te=e.value.pm;te.globalEditModeEnabled()&&te.disableGlobalEditMode(),te.globalDragModeEnabled()&&te.disableGlobalDragMode(),te.globalRemovalModeEnabled()&&te.disableGlobalRemovalMode(),te.disableDraw(),C()}catch(te){console.error("Error disabling modes:",te)}if(s.value=F,console.log("Tool set to:",s.value),!F){console.log("No tool selected, clearing control points"),C();return}setTimeout(()=>{var te,ye,ne,Be,Fe,re,Se;try{switch(console.log("Enabling tool:",F),F){case"Circle":In("Cliquez et maintenez pour dessiner un cercle, relâchez pour terminer"),(te=e.value)==null||te.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Semicircle":In("Cliquez et maintenez pour dessiner un demi-cercle, relâchez pour terminer"),(ye=e.value)==null||ye.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":In("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(ne=e.value)==null||ne.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":In("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Be=e.value)==null||Be.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":In("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Fe=e.value)==null||Fe.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Text":if(In("Cliquez pour ajouter du texte, double-cliquez pour éditer"),e.value){const Ae=ve=>{if(!e.value||!i.value)return;const H=p(ve.latlng);i.value.addLayer(H),l.value=H,e.value.off("click",Ae),Z("")};e.value.on("click",Ae)}break;case"drag":In("Cliquez et maintenez une forme pour la déplacer"),(re=e.value)==null||re.pm.enableGlobalDragMode();break;case"delete":In("Cliquez sur une forme pour la supprimer"),(Se=e.value)==null||Se.pm.enableGlobalRemovalMode();break}console.log("Tool enabled successfully")}catch(Ae){console.error("Error enabling tool:",Ae)}},100),console.log("=== SETTING DRAWING TOOL END ===")}},q=F=>{var ye;if(!l.value)return;const te=l.value;if(te.properties=te.properties||{},te.properties.style=te.properties.style||{},te.properties.style={...te.properties.style,...F},te.properties.type==="text"){const ne=te.properties._textLayer,Be=(ye=ne==null?void 0:ne.getElement())==null?void 0:ye.querySelector(".text-annotation");Be&&Td(Be,te.properties.style);const Fe={color:F.borderColor||te.properties.style.borderColor,weight:parseInt(F.borderWidth||te.properties.style.borderWidth),opacity:F.borderOpacity??te.properties.style.borderOpacity};"setStyle"in te&&te.setStyle(Fe)}else{const ne={};F.fillColor&&(ne.fillColor=F.fillColor),F.fillOpacity!==void 0&&(ne.fillOpacity=F.fillOpacity),F.strokeColor&&(ne.color=F.strokeColor),F.strokeOpacity!==void 0&&(ne.opacity=F.strokeOpacity),F.strokeWidth!==void 0&&(ne.weight=F.strokeWidth),F.dashArray&&(ne.dashArray=F.dashArray),"setStyle"in te&&te.setStyle(ne)}},xe=F=>{if(!l.value)return;const te=l.value;te.properties={...te.properties,...F},F.radius&&te instanceof tt.Circle&&te.setRadius(F.radius)},ie=(F,te)=>tt.latLng((F.lat+te.lat)/2,(F.lng+te.lng)/2),V=F=>{if(!e.value||!i.value)return;C();const te=F.getLatLng(),ye=F.getRadius(),ne=M(te,"#059669");v.push(ne),y(ne,F,()=>{const Fe=Math.PI*ye*ye;return[Ht(ye,"m","Rayon"),Ht(Fe,"m²","Surface")].join("<br>")});const Be=[];[0,45,90,135,180,225,270,315].forEach(Fe=>{const re=Fe*Math.PI/180,Se=tt.latLng(te.lat+ye/111319.9*Math.sin(re),te.lng+ye/(111319.9*Math.cos(te.lat*Math.PI/180))*Math.cos(re)),Ae=M(Se,"#2563EB");Be.push(Ae),v.push(Ae),y(Ae,F,()=>{const ve=te.distanceTo(Ae.getLatLng());return Ht(ve,"m","Distance du centre")}),Ae.on("mousedown",ve=>{if(!e.value)return;tt.DomEvent.stopPropagation(ve),e.value.dragging.disable();let H=!0;const ee=He=>{if(!H)return;const Ye=te.distanceTo(He.latlng);F.setRadius(Ye),Be.forEach((Je,nt)=>{const Xe=nt*45*Math.PI/180,Le=tt.latLng(te.lat+Ye/111319.9*Math.sin(Xe),te.lng+Ye/(111319.9*Math.cos(te.lat*Math.PI/180))*Math.cos(Xe));Je.setLatLng(Le)});const Ke=P(F,"Circle");F.properties={...Ke},F.fire("properties:updated",{shape:F,properties:F.properties})},se=()=>{H=!1,e.value&&(e.value.off("mousemove",ee),document.removeEventListener("mouseup",se),e.value.dragging.enable())};e.value.on("mousemove",ee),document.addEventListener("mouseup",se)})}),ne.on("mousedown",Fe=>{if(!e.value)return;tt.DomEvent.stopPropagation(Fe),e.value.dragging.disable();let re=!0;const Se=ve=>{re&&(F.setLatLng(ve.latlng),ne.setLatLng(ve.latlng),Be.forEach((H,ee)=>{const se=ee*45*Math.PI/180,He=tt.latLng(ve.latlng.lat+ye/111319.9*Math.sin(se),ve.latlng.lng+ye/(111319.9*Math.cos(ve.latlng.lat*Math.PI/180))*Math.cos(se));H.setLatLng(He)}))},Ae=()=>{re=!1,e.value&&(e.value.off("mousemove",Se),document.removeEventListener("mouseup",Ae),e.value.dragging.enable())};e.value.on("mousemove",Se),document.addEventListener("mouseup",Ae)})},le=F=>{if(!e.value||!i.value)return;C();const te=F.getBounds(),ye=te.getCenter(),ne=[te.getNorthWest(),te.getNorthEast(),te.getSouthEast(),te.getSouthWest()],Be=M(ye,"#059669");v.push(Be),y(Be,F,()=>{const Se=F.getBounds(),Ae=Se.getNorthEast().distanceTo(Se.getNorthWest()),ve=Se.getNorthWest().distanceTo(Se.getSouthWest()),H=Ae*ve;return[Ht(Ae,"m","Largeur"),Ht(ve,"m","Hauteur"),Ht(H,"m²","Surface")].join("<br>")});const Fe=[];ne.forEach((Se,Ae)=>{const ve=M(Se,"#DC2626");Fe.push(ve),v.push(ve),y(ve,F,()=>{const H=F.getBounds(),ee=H.getNorthEast().distanceTo(H.getNorthWest()),se=H.getNorthWest().distanceTo(H.getSouthWest());return[Ht(ee,"m","Largeur"),Ht(se,"m","Hauteur")].join("<br>")})});const re=[];ne.forEach((Se,Ae)=>{const ve=ne[(Ae+1)%4],H=ie(Se,ve),ee=M(H,"#2563EB");re.push(ee),v.push(ee),y(ee,F,()=>{const se=F.getBounds(),He=se.getNorthEast().distanceTo(se.getNorthWest()),Ye=se.getNorthWest().distanceTo(se.getSouthWest());return[Ht(He,"m","Largeur"),Ht(Ye,"m","Hauteur")].join("<br>")})}),Be.on("mousedown",Se=>{if(!e.value)return;tt.DomEvent.stopPropagation(Se),e.value.dragging.disable();let Ae=!0;const ve=F.getBounds(),H=Se.latlng,ee=He=>{if(!Ae)return;const Ye=He.latlng.lng-H.lng,Ke=He.latlng.lat-H.lat,Je=tt.latLngBounds(tt.latLng(ve.getSouth()+Ke,ve.getWest()+Ye),tt.latLng(ve.getNorth()+Ke,ve.getEast()+Ye));F.setBounds(Je);const nt=[Je.getNorthWest(),Je.getNorthEast(),Je.getSouthEast(),Je.getSouthWest()];Be.setLatLng(Je.getCenter()),Fe.forEach((Xe,Le)=>{Xe.setLatLng(nt[Le])}),re.forEach((Xe,Le)=>{const Ze=nt[Le],Ve=nt[(Le+1)%4];Xe.setLatLng(ie(Ze,Ve))})},se=()=>{Ae=!1,e.value&&(e.value.off("mousemove",ee),document.removeEventListener("mouseup",se),e.value.dragging.enable())};e.value.on("mousemove",ee),document.addEventListener("mouseup",se)}),Fe.forEach((Se,Ae)=>{Se.on("mousedown",ve=>{if(!e.value)return;tt.DomEvent.stopPropagation(ve),e.value.dragging.disable();let H=!0;const ee=He=>{if(!H)return;const Ye=(Ae+2)%4,Ke=ne[Ye],Je=tt.latLngBounds(Ke,He.latlng);F.setBounds(Je);const nt=[Je.getNorthWest(),Je.getNorthEast(),Je.getSouthEast(),Je.getSouthWest()];Be.setLatLng(Je.getCenter()),Fe.forEach((Xe,Le)=>{Xe.setLatLng(nt[Le])}),re.forEach((Xe,Le)=>{const Ze=nt[Le],Ve=nt[(Le+1)%4];Xe.setLatLng(ie(Ze,Ve))})},se=()=>{H=!1,e.value&&(e.value.off("mousemove",ee),document.removeEventListener("mouseup",se),e.value.dragging.enable())};e.value.on("mousemove",ee),document.addEventListener("mouseup",se)})})},Oe=F=>{if(!e.value||!i.value)return;C();const te=F.getLatLngs();te.forEach((ne,Be)=>{const Fe=M(ne,"#059669");v.push(Fe),y(Fe,F,()=>{const re=te.reduce((Ae,ve,H)=>H===0?0:Ae+ve.distanceTo(te[H-1]),0);let Se=te.slice(0,Be+1).reduce((Ae,ve,H)=>H===0?0:Ae+ve.distanceTo(te[H-1]),0);return[Ht(Se,"m","Distance depuis le début"),Ht(re,"m","Longueur totale")].join("<br>")}),Fe.on("mousedown",re=>{if(!e.value)return;tt.DomEvent.stopPropagation(re),e.value.dragging.disable();let Se=!0;const Ae=H=>{Se&&(te[Be]=H.latlng,F.setLatLngs(te),Fe.setLatLng(H.latlng),ye())},ve=()=>{Se=!1,e.value&&(e.value.off("mousemove",Ae),document.removeEventListener("mouseup",ve),e.value.dragging.enable(),Oe(F))};e.value.on("mousemove",Ae),document.addEventListener("mouseup",ve)})});const ye=()=>{v.slice(te.length).forEach(ne=>{i.value&&i.value.removeLayer(ne)}),v=v.slice(0,te.length);for(let ne=0;ne<te.length-1;ne++){const Be=ie(te[ne],te[ne+1]),Fe=M(Be,"#2563EB");v.push(Fe),y(Fe,F,()=>{const re=te[ne].distanceTo(te[ne+1]),Se=te.reduce((ve,H,ee)=>ee===0?0:ve+H.distanceTo(te[ee-1]),0),Ae=te.slice(0,ne+1).reduce((ve,H,ee)=>ee===0?0:ve+H.distanceTo(te[ee-1]),0)+re/2;return[Ht(re,"m","Longueur du segment"),Ht(re/2,"m","Demi-segment"),Ht(Ae,"m","Distance depuis le début"),Ht(Se,"m","Longueur totale")].join("<br>")}),Fe.on("mousedown",re=>{if(!e.value)return;tt.DomEvent.stopPropagation(re),e.value.dragging.disable();let Se=!0;const Ae=H=>{Se&&(te.splice(ne+1,0,H.latlng),F.setLatLngs(te),Oe(F))},ve=()=>{Se=!1,e.value&&(e.value.off("mousemove",Ae),e.value.dragging.enable())};e.value.on("mousemove",Ae),document.addEventListener("mouseup",ve)})}};ye()},Ee=F=>{if(!e.value||!i.value)return;C();const te=F.getLatLngs()[0],ye=te.map(Se=>[Se.lng,Se.lat]);ye.push(ye[0]);const ne=Ec([ye]),Be=Pc(ne),Fe=te.reduce((Se,Ae,ve)=>{const H=te[(ve+1)%te.length];return Se+Ae.distanceTo(H)},0);te.forEach((Se,Ae)=>{const ve=M(Se,"#059669");v.push(ve),y(ve,F,()=>{const H=te[(Ae-1+te.length)%te.length],ee=te[(Ae+1)%te.length],se=Se.distanceTo(H),He=Se.distanceTo(ee);return[Ht(se,"m","Distance au point précédent"),Ht(He,"m","Distance au point suivant"),Ht(Fe,"m","Périmètre total"),Ht(Be,"m²","Surface")].join("<br>")}),ve.on("mousedown",H=>{if(tt.DomEvent.stopPropagation(H),!e.value)return;e.value.dragging.disable();let ee=!0;const se=Ye=>{ee&&(tt.DomEvent.stopPropagation(Ye),te[Ae]=Ye.latlng,F.setLatLngs([te]),ve.setLatLng(Ye.latlng),re())},He=()=>{ee=!1,e.value&&(e.value.off("mousemove",se),document.removeEventListener("mouseup",He),e.value.dragging.enable())};e.value.on("mousemove",se),document.addEventListener("mouseup",He)})});const re=()=>{const Se=F.getLatLngs()[0];v.slice(Se.length).forEach(Ae=>{i.value&&i.value.removeLayer(Ae)}),v=v.slice(0,Se.length);for(let Ae=0;Ae<Se.length;Ae++){const ve=Se[(Ae+1)%Se.length],H=ie(Se[Ae],ve),ee=M(H,"#2563EB");v.push(ee),y(ee,F,()=>{const se=Se[Ae].distanceTo(ve);return[Ht(se,"m","Longueur du segment"),Ht(Fe,"m","Périmètre total"),Ht(Be,"m²","Surface")].join("<br>")})}};re()},Pe=F=>{if(!e.value||!i.value)return;C();const te=F.getCenter(),ye=F.getRadius(),ne=F.getStartAngle(),Be=F.getStopAngle(),Fe=[ne,Be];Fe.forEach((Ae,ve)=>{const H=Ae*Math.PI/180,ee=tt.latLng(te.lat+ye/111319.9*Math.sin(H),te.lng+ye/(111319.9*Math.cos(te.lat*Math.PI/180))*Math.cos(H)),se=M(ee,"#DC2626");v.push(se),y(se,F,()=>`Angle: ${Dd(Ae)}`),se.on("mousedown",He=>{if(!e.value)return;tt.DomEvent.stopPropagation(He),e.value.dragging.disable();let Ye=!0;const Ke=v.find(Xe=>Xe.options.color==="#2563EB");Ke&&Ke.setStyle({opacity:0,fillOpacity:0});const Je=Xe=>{if(!Ye||!e.value)return;const Le=Math.atan2(Xe.latlng.lat-te.lat,Xe.latlng.lng-te.lng)*180/Math.PI,Ze=tt.latLng(te.lat+ye/111319.9*Math.sin(Le*Math.PI/180),te.lng+ye/(111319.9*Math.cos(te.lat*Math.PI/180))*Math.cos(Le*Math.PI/180));se.setLatLng(Ze),ve===0?F.setAngles(Le,F.getStopAngle()):F.setAngles(F.getStartAngle(),Le);const Ve=P(F,"Semicircle");F.properties={...Ve},F.fire("properties:updated",{shape:F,properties:F.properties})},nt=()=>{Ye=!1,e.value&&(e.value.off("mousemove",Je),document.removeEventListener("mouseup",nt),e.value.dragging.enable(),Pe(F))};e.value.on("mousemove",Je),document.addEventListener("mouseup",nt)})});const re=M(te,"#059669");v.push(re),y(re,F,()=>{const Ae=Math.PI*ye*ye*F.getOpeningAngle()/360;return[Ht(ye,"m","Rayon"),Ht(Ae,"m²","Surface"),`Angle: ${Dd(F.getOpeningAngle())}`].join("<br>")});const Se=F.getOpeningAngle();if(Se>5){const ve=((ne+Be)/2+360)%360*Math.PI/180,H=tt.latLng(te.lat+ye/111319.9*Math.sin(ve),te.lng+ye/(111319.9*Math.cos(te.lat*Math.PI/180))*Math.cos(ve)),ee=M(H,"#2563EB");v.push(ee),y(ee,F,()=>Ht(ye,"m","Rayon")),ee.on("mousedown",se=>{if(!e.value)return;tt.DomEvent.stopPropagation(se),e.value.dragging.disable();let He=!0;const Ye=Je=>{if(!He)return;const nt=te.distanceTo(Je.latlng);if(F.setRadius(nt),(Math.atan2(Je.latlng.lat-te.lat,Je.latlng.lng-te.lng)*180/Math.PI-ne+360)%360<=Se){const Ze=tt.latLng(te.lat+nt/111319.9*Math.sin(ve),te.lng+nt/(111319.9*Math.cos(te.lat*Math.PI/180))*Math.cos(ve));ee.setLatLng(Ze);const Ve=P(F,"Semicircle");F.properties={...Ve},F.fire("properties:updated",{shape:F,properties:F.properties}),Fe.forEach((it,Et)=>{const U=it*Math.PI/180,K=tt.latLng(te.lat+nt/111319.9*Math.sin(U),te.lng+nt/(111319.9*Math.cos(te.lat*Math.PI/180))*Math.cos(U));v[Et].setLatLng(K)})}},Ke=()=>{He=!1,e.value&&(e.value.off("mousemove",Ye),document.removeEventListener("mouseup",Ke),e.value.dragging.enable())};e.value.on("mousemove",Ye),document.addEventListener("mouseup",Ke)})}re.on("mousedown",Ae=>{if(!e.value)return;tt.DomEvent.stopPropagation(Ae),e.value.dragging.disable();let ve=!0;const H=se=>{if(!ve)return;F.setCenter(se.latlng),re.setLatLng(se.latlng);const He=P(F,"Semicircle");F.properties={...He},F.fire("properties:updated",{shape:F,properties:F.properties}),Pe(F)},ee=()=>{ve=!1,e.value&&(e.value.off("mousemove",H),document.removeEventListener("mouseup",ee),e.value.dragging.enable())};e.value.on("mousemove",H),document.addEventListener("mouseup",ee)})};return Sl(()=>{e.value&&(e.value.remove(),e.value=null)}),{map:e,featureGroup:i,currentTool:s,selectedShape:l,isDrawing:h,initMap:J,setDrawingTool:Z,updateShapeStyle:q,updateShapeProperties:xe,updateTextFixedSize:j,adjustView:R,clearActiveControlPoints:C}}function Cb(){const e=qe(null),i=qe(""),s=qe("Ville"),l={Ville:bn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19}),Satellite:bn.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19}),Cadastre:bn.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19})};return{map:e,searchQuery:i,currentBaseMap:s,baseMaps:l,initMap:y=>{e.value=y,bn.control.layers(l).addTo(y),l[s.value].addTo(y)},searchLocation:async()=>{if(!(!e.value||!i.value))try{const v=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(i.value)}`)).json();if(v&&v.length>0){const{lat:C,lon:M}=v[0];e.value.setView([C,M],13)}}catch(y){console.error("Erreur lors de la recherche de localisation:",y)}},changeBaseMap:y=>{!e.value||!l[y]||(Object.values(l).forEach(v=>{var C;(C=e.value)!=null&&C.hasLayer(v)&&e.value.removeLayer(v)}),l[y].addTo(e.value),s.value=y)}}}const Gl=Kc("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:e=>i=>e.plans.find(s=>s.id===i),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var i,s;const e=jn();this.loading=!0;try{let l="/plans/";e.isDealer?l+="?concessionnaire="+((i=e.user)==null?void 0:i.id):e.isClient&&(l+="?utilisateur="+((s=e.user)==null?void 0:s.id));const h=await mt.get(l);this.plans=h.data}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async fetchPlansWithDetails(){var i,s;const e=jn();this.loading=!0;try{let l="/plans/";const h={include_details:!0};e.isDealer?h.concessionnaire=(i=e.user)==null?void 0:i.id:e.isClient&&(h.utilisateur=(s=e.user)==null?void 0:s.id);const p=await mt.get(l,{params:h});return this.plans=p.data,p}catch(l){throw this.error="Erreur lors du chargement des plans",l}finally{this.loading=!1}},async createPlan(e){this.loading=!0;try{console.log("Creating plan with data:",e);const i=await mt.post("/plans/",e);return console.log("Plan creation response:",i.data),this.plans.push(i.data),i.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error="Erreur lors de la création du plan",i}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){var i,s;if(this.unsavedChanges){this.loading=!0;try{const l=await mt.patch(`/plans/${e}/`,{...this.currentPlan,version:((i=this.currentPlan)==null?void 0:i.version)||1}),h=this.plans.findIndex(p=>p.id===e);return h!==-1&&(this.plans[h]=l.data),((s=this.currentPlan)==null?void 0:s.id)===e&&(this.currentPlan=l.data),this.unsavedChanges=!1,l.data}catch(l){throw this.error="Erreur lors de la sauvegarde du plan",l}finally{this.loading=!1}}},async updatePlanDetails(e,i){var s;try{const l=await mt.patch(`/plans/${e}/`,i),h=this.plans.findIndex(p=>p.id===e);return h!==-1&&(this.plans[h]={...this.plans[h],...l.data}),((s=this.currentPlan)==null?void 0:s.id)===e&&(this.currentPlan={...this.currentPlan,...l.data}),l.data}catch(l){throw console.error("Erreur lors de la mise à jour du plan:",l),l}},async fetchPlanHistory(e){this.loading=!0;try{const i=await mt.get(`/plans/${e}/historique/`);return this.planHistory=i.data,i.data}catch(i){throw this.error="Erreur lors de la récupération de l'historique",i}finally{this.loading=!1}},async restorePlanVersion(e,i){var s;this.loading=!0;try{const l=await mt.post(`/plans/${e}/restaurer/`,{version_id:i});((s=this.currentPlan)==null?void 0:s.id)===e&&(this.currentPlan=l.data);const h=this.plans.findIndex(p=>p.id===e);return h!==-1&&(this.plans[h]=l.data),l.data}catch(l){throw this.error="Erreur lors de la restauration de la version",l}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.stopAutoSave()},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var i;this.loading=!0;try{await mt.delete(`/plans/${e}/`),this.plans=this.plans.filter(s=>s.id!==e),((i=this.currentPlan)==null?void 0:i.id)===e&&this.clearCurrentPlan()}catch(s){throw this.error="Erreur lors de la suppression du plan",s}finally{this.loading=!1}}}}),Vp=Kc("drawing",{state:()=>({currentPlanId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType},actions:{setCurrentPlan(e){this.currentPlanId=e,e===null&&this.clearElements()},clearCurrentPlan(){this.currentPlanId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1},addElement(e){!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e),this.unsavedChanges=!0},updateElement(e){const i=this.elements.findIndex(s=>s.id===e.id);if(i!==-1){const s=this.elements[i].type_forme;this.elements[i]={...e,type_forme:s},this.unsavedChanges=!0}},removeElement(e){const i=this.elements.findIndex(s=>s.id===e);i!==-1&&(this.elements.splice(i,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){this.currentStyle={...this.currentStyle,...e}},async loadPlanElements(e){var i;this.loading=!0;try{const l=(await mt.get(`/plans/${e}/`)).data;this.elements=l.formes.map(h=>({...h,type_forme:h.type_forme})),this.currentPlanId=e,this.unsavedChanges=!1,l.preferences&&(l.preferences.currentTool&&this.setCurrentTool(l.preferences.currentTool),l.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...l.preferences.currentStyle}),l.preferences.lastUsedType&&(this.lastUsedType=l.preferences.lastUsedType)),(i=this.selectedElement)!=null&&i.type_forme&&this.setCurrentTool(this.selectedElement.type_forme)}catch(s){throw console.error("Erreur lors du chargement des éléments:",s),this.error="Erreur lors du chargement des éléments du plan",s}finally{this.loading=!1}},async saveToPlan(e){Gl(),this.loading=!0;try{const i=e||this.currentPlanId;if(!i)throw new Error("Aucun plan sélectionné pour la sauvegarde");const s=this.elements.map(h=>({...h,type_forme:h.type_forme||this.lastUsedType})),l=await mt.post(`/plans/${i}/save_with_elements/`,{formes:s,connexions:[],annotations:[],preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});return this.elements=l.data.formes.map(h=>({...h,type_forme:h.type_forme})),this.unsavedChanges=!1,l.data}catch(i){throw console.error("Erreur lors de la sauvegarde:",i),this.error="Erreur lors de la sauvegarde du plan",i}finally{this.loading=!1}}}}),kb={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Eb={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},Mb={key:0,class:"mb-4"},Pb={key:0,class:"animate-pulse"},Sb=["value"],Bb={key:1,class:"mb-4"},Ab={key:0,class:"animate-pulse"},Tb=["disabled"],Db={value:null},Rb=["value"],Ob={class:"mb-4"},Ib={class:"mb-6"},Fb={class:"flex justify-end space-x-3"},Nb=["disabled"],zb={key:0},$b={key:1},Hp=Kn({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","dealerSelected","clientSelected"],setup(e,{expose:i,emit:s}){const l=e,h=s,p=jn(),f=Gl();qe(!1);const y=qe(!1),v=qe(null),C=qe([]),M=qe([]),P=qe(null),j=qe(null),J=qe(!1),R=qe(!1),Z=qe({nom:"",description:"",concessionnaire:null,client:null}),q=kt(()=>{var Pe,F;return((Pe=p.user)==null?void 0:Pe.user_type)==="admin"?Z.value.nom.trim()&&Z.value.concessionnaire&&Z.value.client:((F=p.user)==null?void 0:F.user_type)==="dealer"?Z.value.nom.trim()&&Z.value.client:Z.value.nom.trim()});ei(()=>Z.value.concessionnaire,async Pe=>{if(l.modelValue)if(console.log("[NewPlanModal] Concessionnaire changed:",Pe),Pe){const F=C.value.find(te=>te.id===Pe);F&&await V(F)}else M.value=[],P.value=null,j.value=null,Z.value.client=null}),ei(()=>l.modelValue,Pe=>{var F,te;Pe?((F=p.user)==null?void 0:F.user_type)==="admin"?xe():((te=p.user)==null?void 0:te.user_type)==="dealer"&&ie(p.user.id):(Z.value={nom:"",description:"",concessionnaire:null,client:null},P.value=null,j.value=null,M.value=[],C.value=[],v.value=null)}),kt(()=>{var Pe;return((Pe=p.user)==null?void 0:Pe.user_type)==="admin"?P.value?M.value:[]:M.value});async function xe(){console.log("[NewPlanModal] Loading dealers..."),J.value=!0;try{const Pe=await mt.get("/users/",{params:{role:"CONCESSIONNAIRE"}});console.log("[NewPlanModal] Dealers loaded:",Pe.data),C.value=Pe.data}catch(Pe){console.error("[NewPlanModal] Error loading dealers:",Pe)}finally{J.value=!1}}async function ie(Pe){console.log("[NewPlanModal] Loading clients for dealer:",Pe),R.value=!0;try{const F=await mt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Pe}});console.log("[NewPlanModal] Clients loaded:",F.data),M.value=Array.isArray(F.data)?F.data:[F.data]}catch(F){console.error("[NewPlanModal] Error loading clients:",F),M.value=[]}finally{R.value=!1}}async function V(Pe){if(l.modelValue){console.log("[NewPlanModal] Selecting dealer:",Pe),P.value=Pe,Z.value.concessionnaire=Pe.id,R.value=!0;try{const F=await mt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:Pe.id}});console.log("[NewPlanModal] Clients loaded:",F.data),M.value=Array.isArray(F.data)?F.data:[F.data]}catch(F){console.error("[NewPlanModal] Error loading clients:",F),M.value=[]}finally{R.value=!1}}}function le(Pe){l.modelValue&&(console.log("[NewPlanModal] Client selected:",Pe),j.value=Pe,Z.value.client=Pe.id,h("clientSelected",Pe))}function Oe(){h("update:modelValue",!1),Z.value={nom:"",description:"",concessionnaire:null,client:null},P.value=null,j.value=null,M.value=[],v.value=null}async function Ee(){var Pe,F,te,ye,ne;v.value=null,y.value=!0;try{const Be={nom:Z.value.nom.trim(),description:Z.value.description.trim()};((Pe=p.user)==null?void 0:Pe.user_type)==="admin"?(Be.concessionnaire=Z.value.concessionnaire,Be.client=Z.value.client):((F=p.user)==null?void 0:F.user_type)==="dealer"?(Be.concessionnaire=p.user.id,Be.client=Z.value.client):((te=p.user)==null?void 0:te.user_type)==="client"&&(Be.client=p.user.id);const Fe=await f.createPlan(Be);h("created",Fe.id),Oe()}catch(Be){console.error("[NewPlanModal] Error creating plan:",Be),v.value=((ne=(ye=Be.response)==null?void 0:ye.data)==null?void 0:ne.detail)||Be.message||"Une erreur est survenue lors de la création du plan"}finally{y.value=!1}}return i({dealers:C,dealerClients:M,selectedDealer:P,selectedClient:j,loadDealers:xe,loadDealerClients:ie,selectDealer:V,selectClient:le}),(Pe,F)=>{var te,ye;return Pe.modelValue?(_e(),we("div",kb,[w("div",Eb,[w("div",{class:"flex justify-between items-center mb-4"},[F[5]||(F[5]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),w("button",{onClick:Oe,class:"text-gray-400 hover:text-gray-500"},F[4]||(F[4]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),xt(p).isAdmin?(_e(),we("div",Mb,[F[8]||(F[8]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Concessionnaire",-1)),J.value?(_e(),we("div",Pb,F[6]||(F[6]=[w("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Bt((_e(),we("select",{key:1,"onUpdate:modelValue":F[0]||(F[0]=ne=>Z.value.concessionnaire=ne),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[F[7]||(F[7]=w("option",{value:null},"Sélectionnez un concessionnaire",-1)),(_e(!0),we(Lt,null,Ot(C.value,ne=>(_e(),we("option",{key:ne.id,value:ne.id},Ge(ne.first_name)+" "+Ge(ne.last_name)+" ("+Ge(ne.company_name)+") ",9,Sb))),128))],512)),[[Qn,Z.value.concessionnaire]])])):dt("",!0),((te=xt(p).user)==null?void 0:te.user_type)==="admin"||((ye=xt(p).user)==null?void 0:ye.user_type)==="dealer"?(_e(),we("div",Bb,[F[10]||(F[10]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Client",-1)),R.value?(_e(),we("div",Ab,F[9]||(F[9]=[w("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Bt((_e(),we("select",{key:1,"onUpdate:modelValue":F[1]||(F[1]=ne=>Z.value.client=ne),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!M.value.length},[w("option",Db,Ge(M.value.length?"Sélectionnez un client":"Aucun client disponible"),1),(_e(!0),we(Lt,null,Ot(M.value,ne=>(_e(),we("option",{key:ne.id,value:ne.id},Ge(ne.first_name)+" "+Ge(ne.last_name)+" ("+Ge(ne.company_name)+") ",9,Rb))),128))],8,Tb)),[[Qn,Z.value.client]])])):dt("",!0),w("div",Ob,[F[11]||(F[11]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Bt(w("input",{"onUpdate:modelValue":F[2]||(F[2]=ne=>Z.value.nom=ne),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[en,Z.value.nom]])]),w("div",Ib,[F[12]||(F[12]=w("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Bt(w("textarea",{"onUpdate:modelValue":F[3]||(F[3]=ne=>Z.value.description=ne),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[en,Z.value.description]])]),w("div",Fb,[w("button",{onClick:Oe,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),w("button",{onClick:Ee,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!q.value||y.value},[y.value?(_e(),we("span",zb,"Création en cours...")):(_e(),we("span",$b,"Créer le plan"))],8,Nb)])])])):dt("",!0)}}}),jb={class:"h-full flex"},Ub={class:"flex-1 relative"},Gb={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[1000]"},Vb={class:"text-center max-w-lg mx-auto p-8"},Hb={class:"space-y-4"},Zb={key:1,class:"absolute bottom-6 left-6 z-[1000]"},qb={class:"bg-white rounded-lg shadow-lg p-3 mb-3"},Kb={class:"grid grid-cols-3 gap-2"},Wb=["onClick"],Jb={class:"bg-white rounded-lg shadow-lg p-3 space-y-2"},Xb={class:"flex flex-col mb-2"},Yb={class:"text-xl font-bold text-gray-800 mb-1"},Qb={key:0,class:"text-sm text-gray-500"},ex={class:"grid grid-cols-1 gap-2"},tx=["disabled"],nx={key:0,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ix={key:1,class:"animate-spin h-5 w-5 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},rx={key:0,class:"text-xs text-gray-500 mt-2"},sx={key:2,class:"fixed bottom-6 right-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg z-[2000] flex items-center transform transition-all duration-300 ease-in-out",role:"alert"},ox={key:3,class:"drawing-tools-container absolute top-4 right-4 z-[1000]"},ax={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},lx={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4"},ux={class:"flex justify-between items-center mb-4"},cx={key:0,class:"space-y-4"},hx={key:0,class:"space-y-2"},dx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},fx=["onClick"],px={class:"font-medium text-gray-900"},mx={key:1,class:"space-y-2"},gx={class:"flex items-center mb-4"},_x={class:"text-sm text-gray-600"},yx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},vx=["onClick"],bx={class:"font-medium text-gray-900"},xx={key:2,class:"space-y-2"},wx={class:"flex items-center mb-4"},Lx={class:"text-sm text-gray-600"},Cx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},kx=["onClick"],Ex={class:"font-medium text-gray-900"},Mx={class:"text-sm text-gray-500"},Px={class:"text-xs text-gray-400 mt-1"},Sx={key:1,class:"space-y-4"},Bx={key:0,class:"space-y-2"},Ax={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Tx=["onClick"],Dx={class:"font-medium text-gray-900"},Rx={key:1,class:"space-y-2"},Ox={class:"flex items-center mb-4"},Ix={class:"text-sm text-gray-600"},Fx={class:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto"},Nx=["onClick"],zx={class:"font-medium text-gray-900"},$x={class:"text-sm text-gray-500"},jx={class:"text-xs text-gray-400 mt-1"},Ux={key:2,class:"max-h-96 overflow-y-auto"},Gx={key:0,class:"text-center py-8"},Vx={key:1,class:"space-y-2"},Hx=["onClick"],Zx={class:"font-medium text-gray-900"},qx={class:"text-sm text-gray-500"},Kx={class:"text-xs text-gray-400 mt-1"},Rd=Kn({__name:"MapView",setup(e){const i=qe(null),s=Gl(),l=Vp(),h=qe([]);qe(null),qe({}),qe({mousedown:null,mousemove:null,mouseup:null});const{currentTool:p,selectedShape:f,map:y,initMap:v,setDrawingTool:C,updateShapeStyle:M,updateShapeProperties:P,featureGroup:j,adjustView:J}=Lb(),{initMap:R,baseMaps:Z,currentBaseMap:q,changeBaseMap:xe}=Cb();qs();const ie=qe(!1),V=qe(!1),le=qe(null);qe({nom:"",description:""});const Oe=qe(!1),Ee=qe(!1),Pe=jn(),F=qe([]),te=qe([]),ye=qe([]),ne=qe(null),Be=qe(null),Fe=qe(!1),re=qe(!1),Se=qe(!1),Ae=qe(null),ve=kt(()=>{var de,z,De;if(console.log("[MapView][filteredClients] Computing with:",{userType:(de=Pe.user)==null?void 0:de.user_type,selectedDealer:ne.value,dealerClients:te.value}),((z=Pe.user)==null?void 0:z.user_type)==="admin"){const Ie=ne.value?te.value:[];return console.log("[MapView][filteredClients] Admin clients:",Ie),Ie}else if(((De=Pe.user)==null?void 0:De.user_type)==="dealer")return console.log("[MapView][filteredClients] Dealer clients:",te.value),te.value;return console.log("[MapView][filteredClients] No clients returned"),[]}),H=kt(()=>{var de;return f.value?{type:((de=f.value.properties)==null?void 0:de.type)||"unknown",properties:f.value.properties||{},layer:f.value}:null});function ee(de){const z=de.getCenter(),De=de.getZoom(),Ie={lat:z.lat,lng:z.lng,zoom:De};document.cookie=`mapState=${JSON.stringify(Ie)};max-age=2592000;path=/`}function se(){const z=document.cookie.split(";").find(De=>De.trim().startsWith("mapState="));if(z)try{return JSON.parse(z.split("=")[1])}catch(De){return console.error("Erreur lors de la lecture du cookie de position:",De),null}return null}rr(async()=>{var je,he;console.log("[onMounted] Starting initialization..."),await s.fetchPlans();const de=se(),z=de?[de.lat,de.lng]:[46.603354,1.888334],De=(de==null?void 0:de.zoom)??6;if(i.value&&!y.value){const We=v(i.value,z,De);We.pm.setLang("fr"),We.pm.addControls({rotateMode:!1}),bn.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19}).addTo(We),R(We),We.on("moveend",()=>{ee(We)}),window.addEventListener("map-set-location",ze=>{if(We&&ze.detail){const{lat:ot,lng:ct,zoom:_t}=ze.detail;We.flyTo([ot,ct],_t,{duration:1.5,easeLinearity:.25})}})}const Ie=localStorage.getItem("lastPlanId");if(Ie)try{await He(parseInt(Ie))}catch(We){console.error("Error loading last plan:",We)}((je=Pe.user)==null?void 0:je.user_type)==="admin"&&(console.log("[onMounted] Loading dealers for admin..."),await Le()),((he=Pe.user)==null?void 0:he.user_type)==="dealer"&&(console.log("[onMounted] Loading clients for dealer..."),await Ze())}),ei(()=>l.hasUnsavedChanges,de=>{de&&le.value&&s.markUnsavedChanges()}),ei(y,async de=>{de&&s.currentPlan&&(Re(),await l.loadPlanElements(s.currentPlan.id),await He(s.currentPlan.id))}),ei(()=>s.currentPlan,async de=>{de?(le.value=de,s.setCurrentPlan(de),l.setCurrentPlan(de.id)):(le.value=null,Re())},{immediate:!0}),Hc(()=>{y.value&&y.value.off("moveend")});async function He(de){try{Re(),await l.loadPlanElements(de);const z=s.getPlanById(de);z&&(le.value=z,s.setCurrentPlan(z),l.setCurrentPlan(z.id),localStorage.setItem("lastPlanId",z.id.toString()),y.value&&j.value&&l.getCurrentElements.forEach(De=>{var We;if(!j.value||!De.data)return;let Ie=null;const{style:je={},...he}=De.data;switch(De.type_forme){case"CERCLE":{const ze=he;ze.center&&ze.radius&&(Ie=bn.circle([ze.center[1],ze.center[0]],{...je,radius:ze.radius}));break}case"RECTANGLE":{const ze=he;ze.bounds&&(Ie=bn.rectangle([[ze.bounds.southWest[1],ze.bounds.southWest[0]],[ze.bounds.northEast[1],ze.bounds.northEast[0]]],je));break}case"DEMI_CERCLE":{const ze=he;ze.center&&ze.radius&&(Ie=new Os(bn.latLng(ze.center[1],ze.center[0]),ze.radius,ze.startAngle,ze.endAngle,je));break}case"LIGNE":{const ze=he;if(ze.points){const ot=ze.points.map(ct=>bn.latLng(ct[1],ct[0]));Ie=bn.polyline(ot,je)}break}case"TEXTE":{const ze=he;if(ze.position&&ze.content){const ot=bn.divIcon({html:`<div class="text-annotation" style="font-size: ${je.fontSize||"14px"}">${ze.content}</div>`,className:"text-container"});Ie=bn.marker([ze.position[1],ze.position[0]],{icon:ot,...je})}break}}Ie&&(Ie.properties={type:De.type_forme,style:je,...he},(We=j.value)==null||We.addLayer(Ie),h.value.push({id:De.id,type:De.type_forme,layer:Ie,properties:Ie.properties}),he.rotation&&typeof Ie.setRotation=="function"&&Ie.setRotation(he.rotation))})),V.value=!1}catch(z){console.error("Erreur lors du chargement du plan:",z)}}async function Ye(){if(!le.value||!j.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}Oe.value=!0;try{const de=[];j.value.eachLayer(z=>{var he,We,ze,ot,ct,_t,Tt,Pt;const De={style:{color:((he=z.options)==null?void 0:he.color)||"#3388ff",fillColor:((We=z.options)==null?void 0:We.fillColor)||"#3388ff",fillOpacity:((ze=z.options)==null?void 0:ze.fillOpacity)||.2,weight:((ot=z.options)==null?void 0:ot.weight)||3,opacity:((ct=z.options)==null?void 0:ct.opacity)||1}};let Ie,je;if(z instanceof bn.Circle)Ie="CERCLE",je={...De,center:[z.getLatLng().lng,z.getLatLng().lat],radius:z.getRadius()};else if(z instanceof bn.Rectangle){Ie="RECTANGLE";const Kt=z.getBounds();je={...De,bounds:{southWest:[Kt.getSouthWest().lng,Kt.getSouthWest().lat],northEast:[Kt.getNorthEast().lng,Kt.getNorthEast().lat]}}}else if(((_t=z.properties)==null?void 0:_t.type)==="Semicircle")Ie="DEMI_CERCLE",je={...De,center:[z.getLatLng().lng,z.getLatLng().lat],radius:z.getRadius(),startAngle:z.properties.style.startAngle||0,endAngle:z.properties.style.stopAngle||180};else if(z instanceof bn.Polyline&&!(z instanceof bn.Polygon)){Ie="LIGNE";const Kt=z.getLatLngs();je={...De,points:Kt.map(Xt=>[Xt.lng,Xt.lat])}}else((Tt=z.properties)==null?void 0:Tt.type)==="text"&&(Ie="TEXTE",je={...De,position:[z.getLatLng().lng,z.getLatLng().lat],content:z.properties.text,style:{...z.properties.style,fontSize:z.properties.style.fontSize}});Ie&&je&&de.push({id:z.id,type_forme:Ie,data:{...je,rotation:((Pt=z.properties)==null?void 0:Pt.rotation)||0}})}),l.elements=de,await l.saveToPlan(le.value.id),Ee.value=!0,setTimeout(()=>{Ee.value=!1},3e3)}catch(de){console.error("Erreur lors de la sauvegarde du plan:",de)}finally{Oe.value=!1}}Sl(()=>{Pe.user||ce(),s.clearCurrentPlan(),l.clearCurrentPlan()});function Ke(de){P(de)}function Je(de){try{const z=new Date(de);return isNaN(z.getTime())?(console.error("Date invalide reçue:",de),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(z)}catch(z){return console.error("Erreur lors du formatage de la date:",z),"Date invalide"}}const nt=()=>{J()},Xe=()=>{f.value&&j.value&&(C(""),j.value.removeLayer(f.value),f.value=null)};async function Le(){Fe.value=!0;try{const de=await mt.get("/users/",{params:{role:"CONCESSIONNAIRE"}});F.value=de.data}catch(de){console.error("Erreur lors du chargement des concessionnaires:",de)}finally{Fe.value=!1}}async function Ze(){var de;console.log("[loadDealerClients] Starting..."),console.log("[loadDealerClients] authStore.user:",Pe.user),re.value=!0;try{const z=(de=Pe.user)==null?void 0:de.id;if(console.log("[loadDealerClients] Using dealerId:",z),!z){console.error("[loadDealerClients] No dealer ID available");return}const De=await mt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:z}});console.log("[loadDealerClients] Response:",De.data),Array.isArray(De.data)?te.value=De.data:De.data?te.value=[De.data]:te.value=[],console.log("[loadDealerClients] Processed clients:",te.value)}catch(z){console.error("[loadDealerClients] Error:",z),te.value=[]}finally{re.value=!1}}async function Ve(de){if(console.log("[MapView][selectClient] Starting with client:",de),console.log("[MapView][selectClient] Current state:",{selectedDealer:ne.value,selectedClient:Be.value,newPlanModalRef:!!Ae.value}),Ae.value){console.log("[MapView][selectClient] Using NewPlanModal ref"),Ae.value.selectClient(de),Be.value=de,console.log("[MapView][selectClient] Updated selectedClient:",Be.value),Se.value=!0;try{const z={client:de.id};ne.value&&(z.concessionnaire=ne.value.id);const De=await mt.get("/plans/",{params:z});console.log("[MapView][selectClient] Loaded client plans:",De.data),ye.value=De.data}catch(z){console.error("[MapView][selectClient] Error loading client plans:",z),ye.value=[]}finally{Se.value=!1}}else console.warn("[MapView][selectClient] NewPlanModal ref is not available")}function it(){ne.value=null,Be.value=null,te.value=[],ye.value=[]}function Et(){Be.value=null,ye.value=[]}async function U(de){const z=await s.getPlanById(de);z&&(le.value=z,s.setCurrentPlan(z),l.setCurrentPlan(z.id),ie.value=!1)}async function K(de){try{Ae.value?(await Ae.value.selectDealer(de),ne.value=de,te.value=Ae.value.dealerClients):console.warn("[MapView][selectDealer] NewPlanModal ref is not available")}catch(z){console.error("[MapView][selectDealer] Error:",z)}}ei(ne,async de=>{var z;if(de&&((z=Pe.user)==null?void 0:z.user_type)==="admin"){re.value=!0;try{const De=await mt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:de.id}});te.value=Array.isArray(De.data)?De.data:[De.data]}catch(De){console.error("[MapView][watch selectedDealer] Error loading clients:",De),te.value=[]}finally{re.value=!1}}});function ce(){localStorage.removeItem("lastPlanId")}function Re(){j.value&&j.value.clearLayers(),h.value=[]}return(de,z)=>{var De,Ie,je;return _e(),we("div",jb,[w("div",Ub,[le.value?dt("",!0):(_e(),we("div",Gb,[w("div",Vb,[z[10]||(z[10]=ag('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+$p+'" alt="IrrigationDesign Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur IrrigationDesign</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),w("div",Hb,[w("button",{onClick:z[0]||(z[0]=he=>ie.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},z[8]||(z[8]=[w("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Jt(" Créer un nouveau plan ")])),w("button",{onClick:z[1]||(z[1]=he=>V.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},z[9]||(z[9]=[w("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Jt(" Charger un plan existant ")]))])])])),w("div",{ref_key:"mapContainer",ref:i,class:"absolute inset-0 w-full h-full"},null,512),le.value?(_e(),we("div",Zb,[w("div",qb,[z[11]||(z[11]=w("h2",{class:"text-sm font-semibold text-gray-700 mb-2"},"Type de carte",-1)),w("div",Kb,[(_e(!0),we(Lt,null,Ot(xt(Z),(he,We)=>(_e(),we("button",{key:We,onClick:ze=>xt(xe)(We),class:$n(["px-3 py-2 text-sm rounded-md transition-colors duration-200",{"bg-primary-600 text-white":xt(q)===We,"bg-gray-100 text-gray-700 hover:bg-gray-200":xt(q)!==We}])},Ge(We),11,Wb))),128))])]),w("div",Jb,[w("div",Xb,[w("h1",Yb,Ge(((De=le.value)==null?void 0:De.nom)||"Aucun plan chargé"),1),(Ie=le.value)!=null&&Ie.description?(_e(),we("span",Qb,Ge(le.value.description),1)):dt("",!0)]),w("div",ex,[w("button",{onClick:z[2]||(z[2]=he=>ie.value=!0),class:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},z[12]||(z[12]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Jt(" Nouveau plan ")])),w("button",{onClick:z[3]||(z[3]=he=>V.value=!0),class:"flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},z[13]||(z[13]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Jt(" Charger un plan ")])),le.value?(_e(),we("button",{key:0,onClick:Ye,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors duration-200",disabled:Oe.value},[Oe.value?(_e(),we("svg",ix,z[15]||(z[15]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(_e(),we("svg",nx,z[14]||(z[14]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"},null,-1)]))),Jt(" "+Ge(Oe.value?"Sauvegarde...":"Enregistrer"),1)],8,tx)):dt("",!0),w("button",{onClick:nt,class:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"},z[16]||(z[16]=[w("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),Jt(" Ajuster la vue ")]))]),(je=le.value)!=null&&je.date_modification?(_e(),we("div",rx," Dernière sauvegarde : "+Ge(Je(le.value.date_modification)),1)):dt("",!0)])])):dt("",!0),Ee.value?(_e(),we("div",sx,z[17]||(z[17]=[w("svg",{class:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),w("span",{class:"font-medium"},"Plan sauvegardé avec succès",-1)]))):dt("",!0),le.value?(_e(),we("div",ox,[sn(bb,{"current-tool":xt(p),"selected-shape":H.value,onToolChange:xt(C),onStyleUpdate:xt(M),onPropertiesUpdate:Ke,onDeleteShape:Xe},null,8,["current-tool","selected-shape","onToolChange","onStyleUpdate"])])):dt("",!0),sn(Hp,{ref_key:"newPlanModalRef",ref:Ae,modelValue:ie.value,"onUpdate:modelValue":z[4]||(z[4]=he=>ie.value=he),onCreated:U,onDealerSelected:z[5]||(z[5]=he=>ne.value=he),onClientSelected:z[6]||(z[6]=he=>Be.value=he)},null,8,["modelValue"]),V.value?(_e(),we("div",ax,[w("div",lx,[w("div",ux,[z[19]||(z[19]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),w("button",{onClick:z[7]||(z[7]=he=>V.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},z[18]||(z[18]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),xt(Pe).isAdmin?(_e(),we("div",cx,[ne.value?Be.value?(_e(),we("div",xx,[w("div",wx,[w("button",{onClick:Et,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},z[28]||(z[28]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Jt(" Retour à la liste des clients ")])),z[29]||(z[29]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",Lx,Ge(Be.value.first_name)+" "+Ge(Be.value.last_name)+" ("+Ge(Be.value.company_name)+") ",1)]),z[31]||(z[31]=w("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),w("div",Cx,[Se.value?(_e(),we(Lt,{key:0},Ot(3,he=>w("div",{key:he,class:"animate-pulse"},z[30]||(z[30]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),w("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(_e(!0),we(Lt,{key:1},Ot(ye.value,he=>(_e(),we("button",{key:he.id,onClick:We=>He(he.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",Ex,Ge(he.nom),1),w("div",Mx,Ge(he.description),1),w("div",Px," Modifié le "+Ge(Je(he.date_modification)),1)],8,kx))),128))])])):(_e(),we("div",mx,[w("div",gx,[w("button",{onClick:it,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},z[23]||(z[23]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Jt(" Retour à la liste des concessionnaires ")])),z[24]||(z[24]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",_x,Ge(ne.value.first_name)+" "+Ge(ne.value.last_name)+" ("+Ge(ne.value.company_name)+") ",1)]),z[27]||(z[27]=w("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),w("div",yx,[re.value?(_e(),we(Lt,{key:0},Ot(3,he=>w("div",{key:he,class:"animate-pulse"},z[25]||(z[25]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(_e(!0),we(Lt,{key:1},Ot(ve.value,he=>(_e(),we("button",{key:he.id,onClick:We=>Ve(he),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",bx,Ge(he.first_name)+" "+Ge(he.last_name)+" ("+Ge(he.company_name)+")",1)]),z[26]||(z[26]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,vx))),128))])])):(_e(),we("div",hx,[z[22]||(z[22]=w("h3",{class:"font-medium text-gray-700"},"Sélectionnez un concessionnaire",-1)),w("div",dx,[Fe.value?(_e(),we(Lt,{key:0},Ot(3,he=>w("div",{key:he,class:"animate-pulse"},z[20]||(z[20]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(_e(!0),we(Lt,{key:1},Ot(F.value,he=>(_e(),we("button",{key:he.id,onClick:We=>K(he),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",px,Ge(he.first_name)+" "+Ge(he.last_name)+" ("+Ge(he.company_name)+")",1)]),z[21]||(z[21]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,fx))),128))])]))])):xt(Pe).isDealer?(_e(),we("div",Sx,[Be.value?(_e(),we("div",Rx,[w("div",Ox,[w("button",{onClick:Et,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},z[35]||(z[35]=[w("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Jt(" Retour à la liste des clients ")])),z[36]||(z[36]=w("span",{class:"mx-2 text-gray-400"},"|",-1)),w("span",Ix,Ge(Be.value.first_name)+" "+Ge(Be.value.last_name),1)]),z[38]||(z[38]=w("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),w("div",Fx,[Se.value?(_e(),we(Lt,{key:0},Ot(3,he=>w("div",{key:he,class:"animate-pulse"},z[37]||(z[37]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),w("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(_e(!0),we(Lt,{key:1},Ot(ye.value,he=>(_e(),we("button",{key:he.id,onClick:We=>He(he.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",zx,Ge(he.nom),1),w("div",$x,Ge(he.description),1),w("div",jx," Modifié le "+Ge(Je(he.date_modification)),1)],8,Nx))),128))])])):(_e(),we("div",Bx,[z[34]||(z[34]=w("h3",{class:"font-medium text-gray-700"},"Sélectionnez un client",-1)),w("div",Ax,[re.value?(_e(),we(Lt,{key:0},Ot(3,he=>w("div",{key:he,class:"animate-pulse"},z[32]||(z[32]=[w("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[w("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),w("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(_e(!0),we(Lt,{key:1},Ot(ve.value,he=>(_e(),we("button",{key:he.id,onClick:We=>Ve(he),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",null,[w("div",Dx,Ge(he.first_name)+" "+Ge(he.last_name)+" ("+Ge(he.company_name)+")",1)]),z[33]||(z[33]=w("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,Tx))),128))])]))])):(_e(),we("div",Ux,[xt(s).plans.length===0?(_e(),we("div",Gx,z[39]||(z[39]=[w("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(_e(),we("div",Vx,[(_e(!0),we(Lt,null,Ot(xt(s).plans,he=>(_e(),we("button",{key:he.id,onClick:We=>He(he.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[w("div",Zx,Ge(he.nom),1),w("div",qx,Ge(he.description),1),w("div",Kx," Modifié le "+Ge(Je(he.date_modification)),1)],8,Hx))),128))]))]))])])):dt("",!0)])])}}}),Wx={class:"fixed inset-0 z-50 overflow-y-auto"},Jx={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Xx={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Yx={class:"mt-3 text-center sm:mt-0 sm:text-left"},Qx={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},e3={class:"mt-4"},t3={class:"grid grid-cols-2 gap-4"},n3=["disabled"],i3={key:0,class:"mt-1 text-sm text-gray-500"},r3={class:"grid grid-cols-2 gap-4"},s3={key:0},o3=["disabled"],a3=["value"],l3={key:1},u3=["disabled"],c3=["value"],h3={key:0},d3={class:"grid grid-cols-2 gap-4"},f3={key:1,class:"rounded-md bg-red-50 p-4"},p3={class:"flex"},m3={class:"ml-3"},g3={class:"text-sm font-medium text-red-800"},_3={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},y3=["disabled"],v3={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Zp=Kn({__name:"UserFormModal",props:{user:{type:Object,default:null},dealers:{type:Array,default:()=>[]},isAdmin:{type:Boolean,required:!0},currentDealer:{type:String,default:""}},emits:["close","save"],setup(e,{emit:i}){var R,Z,q,xe,ie,V,le;const s=e,l=i,h=jn(),p=qe(!1),f=qe(null),y=kt(()=>{var Oe;return s.isAdmin?s.user?s.user.id!==((Oe=h.user)==null?void 0:Oe.id):!0:!1}),v=kt(()=>s.isAdmin?[{value:"ADMIN",label:"Administrateur"},{value:"CONCESSIONNAIRE",label:"Concessionnaire"},{value:"UTILISATEUR",label:"Client"}]:[{value:"UTILISATEUR",label:"Client"}]),C=kt(()=>s.isAdmin?P.role==="UTILISATEUR":!0),M=kt(()=>s.dealers.filter(Oe=>Oe.role==="CONCESSIONNAIRE")),P=sr({first_name:((R=s.user)==null?void 0:R.first_name)||"",last_name:((Z=s.user)==null?void 0:Z.last_name)||"",email:((q=s.user)==null?void 0:q.email)||"",username:((xe=s.user)==null?void 0:xe.username)||"",company_name:((ie=s.user)==null?void 0:ie.company_name)||"",role:((V=s.user)==null?void 0:V.role)||(s.isAdmin?"":"UTILISATEUR"),dealer:((le=s.user)==null?void 0:le.concessionnaire)||s.currentDealer,password:"",password_confirm:""}),j=()=>{if(!P.first_name||!P.last_name)return f.value="Le prénom et le nom sont requis",!1;if(!P.email)return f.value="L'email est requis",!1;if(!P.username)return f.value="Le nom d'utilisateur est requis",!1;if(!s.user){if(!P.password)return f.value="Le mot de passe est requis",!1;if(P.password!==P.password_confirm)return f.value="Les mots de passe ne correspondent pas",!1}return P.role==="UTILISATEUR"&&!P.dealer?(f.value="Un concessionnaire doit être sélectionné pour un client",!1):!0},J=async()=>{var Oe;if(f.value=null,!!j()){p.value=!0;try{const Ee={...P};(Oe=s.user)!=null&&Oe.id&&(Ee.id=s.user.id,delete Ee.password,delete Ee.password_confirm),Ee.role==="UTILISATEUR"&&Ee.dealer&&(Ee.concessionnaire=Ee.dealer),delete Ee.dealer,await l("save",Ee),l("close")}catch(Ee){console.error("Erreur formulaire:",Ee),f.value=Ee.message,p.value=!1}}};return(Oe,Ee)=>(_e(),we("div",Wx,[w("div",Jx,[Ee[24]||(Ee[24]=w("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[w("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),Ee[25]||(Ee[25]=w("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),w("div",Xx,[w("div",null,[w("div",Yx,[w("h3",Qx,Ge(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),w("div",e3,[w("form",{onSubmit:Dl(J,["prevent"]),class:"space-y-4"},[w("div",t3,[w("div",null,[Ee[10]||(Ee[10]=w("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),Bt(w("input",{type:"text",id:"first_name","onUpdate:modelValue":Ee[0]||(Ee[0]=Pe=>P.first_name=Pe),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[en,P.first_name]])]),w("div",null,[Ee[11]||(Ee[11]=w("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Bt(w("input",{type:"text",id:"last_name","onUpdate:modelValue":Ee[1]||(Ee[1]=Pe=>P.last_name=Pe),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[en,P.last_name]])])]),w("div",null,[Ee[12]||(Ee[12]=w("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Bt(w("input",{type:"email",id:"email","onUpdate:modelValue":Ee[2]||(Ee[2]=Pe=>P.email=Pe),required:"",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[en,P.email]])]),w("div",null,[Ee[13]||(Ee[13]=w("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Bt(w("input",{type:"text",id:"username","onUpdate:modelValue":Ee[3]||(Ee[3]=Pe=>P.username=Pe),required:"",disabled:!!s.user,class:$n(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",{"bg-gray-100":!!s.user}])},null,10,n3),[[en,P.username]]),s.user?(_e(),we("p",i3," Le nom d'utilisateur ne peut pas être modifié après la création. ")):dt("",!0)]),w("div",null,[Ee[14]||(Ee[14]=w("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Nom de l'entreprise",-1)),Bt(w("input",{type:"text",id:"company_name","onUpdate:modelValue":Ee[4]||(Ee[4]=Pe=>P.company_name=Pe),class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[en,P.company_name]])]),w("div",r3,[s.isAdmin?(_e(),we("div",s3,[Ee[16]||(Ee[16]=w("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Bt(w("select",{id:"role","onUpdate:modelValue":Ee[5]||(Ee[5]=Pe=>P.role=Pe),required:"",disabled:!y.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Ee[15]||(Ee[15]=w("option",{value:""},"Sélectionner un rôle",-1)),(_e(!0),we(Lt,null,Ot(v.value,Pe=>(_e(),we("option",{key:Pe.value,value:Pe.value},Ge(Pe.label),9,a3))),128))],8,o3),[[Qn,P.role]])])):dt("",!0),C.value?(_e(),we("div",l3,[Ee[18]||(Ee[18]=w("label",{for:"dealer",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Bt(w("select",{id:"dealer","onUpdate:modelValue":Ee[6]||(Ee[6]=Pe=>P.dealer=Pe),required:"",disabled:!s.isAdmin,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Ee[17]||(Ee[17]=w("option",{value:""},"Sélectionner un concessionnaire",-1)),(_e(!0),we(Lt,null,Ot(M.value,Pe=>(_e(),we("option",{key:Pe.id,value:Pe.id},Ge(xt(qr)(Pe)),9,c3))),128))],8,u3),[[Qn,P.dealer]])])):dt("",!0)]),e.user?dt("",!0):(_e(),we("div",h3,[w("div",d3,[w("div",null,[Ee[19]||(Ee[19]=w("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Bt(w("input",{type:"password",id:"password","onUpdate:modelValue":Ee[7]||(Ee[7]=Pe=>P.password=Pe),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[en,P.password]])]),w("div",null,[Ee[20]||(Ee[20]=w("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Bt(w("input",{type:"password",id:"password_confirm","onUpdate:modelValue":Ee[8]||(Ee[8]=Pe=>P.password_confirm=Pe),required:"",autocomplete:"new-password",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[en,P.password_confirm]])])]),Ee[21]||(Ee[21]=w("p",{class:"mt-1 text-sm text-gray-500"}," L'utilisateur devra changer son mot de passe à sa première connexion. ",-1))])),f.value?(_e(),we("div",f3,[w("div",p3,[Ee[22]||(Ee[22]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",m3,[w("h3",g3,Ge(f.value),1)])])])):dt("",!0),w("div",_3,[w("button",{type:"submit",disabled:p.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(_e(),we("svg",v3,Ee[23]||(Ee[23]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):dt("",!0),Jt(" "+Ge(p.value?"Enregistrement...":"Enregistrer"),1)],8,y3),w("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:Ee[9]||(Ee[9]=Pe=>Oe.$emit("close"))}," Annuler ")])],32)])])])])])]))}}),b3={class:"fixed inset-0 z-50 overflow-y-auto"},x3={class:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0"},w3={class:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},L3={class:"sm:flex sm:items-start"},C3={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},k3={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},E3={class:"mt-2"},M3={class:"text-sm text-gray-500"},P3={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},qp=Kn({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(i,s)=>(_e(),we("div",b3,[w("div",x3,[s[3]||(s[3]=w("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[w("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[4]||(s[4]=w("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),w("div",w3,[w("div",L3,[s[2]||(s[2]=w("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[w("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),w("div",C3,[w("h3",k3,Ge(e.title),1),w("div",E3,[w("p",M3,Ge(e.message),1)])])]),w("div",P3,[w("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:s[0]||(s[0]=l=>i.$emit("confirm"))}," Confirmer "),w("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:w-auto sm:text-sm",onClick:s[1]||(s[1]=l=>i.$emit("cancel"))}," Annuler ")])])])]))}}),S3={class:"h-full bg-gray-50"},B3={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},A3={class:"flex justify-between items-center mb-8"},T3={class:"text-3xl font-extrabold text-gray-900"},D3={class:"bg-white shadow rounded-lg mb-6 p-4"},R3={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},O3={key:0},I3=["placeholder"],F3={key:1},N3=["value"],z3={class:"bg-white shadow rounded-lg"},$3={class:"overflow-x-auto"},j3={class:"min-w-full divide-y divide-gray-200"},U3={class:"bg-gray-50"},G3={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},V3={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},H3={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Z3={class:"bg-white divide-y divide-gray-200"},q3={class:"px-6 py-4 whitespace-nowrap"},K3={class:"flex items-center"},W3={class:"flex-shrink-0 h-10 w-10"},J3={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},X3={class:"text-primary-600 font-medium"},Y3={class:"ml-4"},Q3={class:"text-sm font-medium text-gray-900"},ew={class:"text-sm text-gray-500"},tw={class:"px-6 py-4 whitespace-nowrap"},nw={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},iw={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},rw={class:"px-6 py-4 whitespace-nowrap"},sw={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ow=["onClick"],aw=["onClick"],lw=Kn({__name:"UserListView",setup(e){const i=jn(),s=qe([]),l=qe([]),h=qe(!1),p=qe(!1),f=qe(null),y=qe(null),v=sr({role:"",search:"",dealer:""}),C=kt(()=>i.isAdmin),M=kt(()=>i.isDealer),P=kt(()=>s.value.filter(ne=>ne.role==="CONCESSIONNAIRE")),j=kt(()=>{var Be;console.log("Computing filtered users..."),console.log("Current users:",s.value),console.log("Is admin:",C.value),console.log("Is dealer:",M.value),console.log("Current filters:",v);let ne=s.value;if(M.value&&(console.log("Filtering for dealer:",(Be=i.user)==null?void 0:Be.id),ne=ne.filter(Fe=>{var re;return Fe.role==="UTILISATEUR"&&Fe.dealer===((re=i.user)==null?void 0:re.id)}),console.log("Filtered users for dealer:",ne)),C.value&&(v.role&&(ne=ne.filter(Fe=>Fe.role===v.role),console.log("Filtered by role:",ne)),v.dealer&&(ne=ne.filter(Fe=>String(Fe.dealer)===String(v.dealer)),console.log("Filtered by dealer:",ne))),v.search){const Fe=v.search.toLowerCase();ne=ne.filter(re=>re.username.toLowerCase().includes(Fe)||re.email.toLowerCase().includes(Fe)||re.first_name.toLowerCase().includes(Fe)||re.last_name.toLowerCase().includes(Fe)||re.company_name&&re.company_name.toLowerCase().includes(Fe)),console.log("Filtered by search:",ne)}return console.log("Final filtered users:",ne),ne});rr(async()=>{await J(),C.value&&await R()});async function J(){try{console.log("Fetching users...");const ne=await mt.get("/users/");console.log("Users API response:",ne.data),s.value=ne.data,console.log("Users after assignment:",s.value)}catch(ne){console.error("Erreur lors de la récupération des utilisateurs:",ne)}}async function R(){try{const ne=await mt.get("/users/",{params:{role:"CONCESSIONNAIRE"}});l.value=ne.data}catch(ne){console.error("Erreur lors de la récupération des concessionnaires:",ne)}}function Z(){f.value=null,h.value=!0}function q(ne){f.value={...ne},h.value=!0}function xe(){h.value=!1,f.value=null}async function ie(ne){var Be;try{let Fe;const re=!!ne.id,Se={...ne};return delete Se.dealer_name,delete Se.full_name,delete Se.user_type,delete Se.permissions,re?Fe=await mt.patch(`/users/${ne.id}/`,Se):Fe=await mt.post("/users/",Se),await J(),xe(),Fe.data}catch(Fe){const re=((Be=Fe.response)==null?void 0:Be.data)||{};let Se="";throw typeof re=="object"&&(Se=Object.entries(re).map(([Ae,ve])=>Array.isArray(ve)?ve[0]:ve).filter(Ae=>Ae).join(`
`)),Se||(Se="Une erreur est survenue lors de la sauvegarde"),new Error(Se)}}function V(ne){y.value=ne,p.value=!0}async function le(){if(y.value)try{await mt.delete(`/users/${y.value.id}/`),await J(),p.value=!1,y.value=null}catch(ne){throw console.error("Erreur lors de la suppression de l'utilisateur:",ne),ne}}function Oe(ne,Be){return`${(ne==null?void 0:ne.charAt(0))||""}${(Be==null?void 0:Be.charAt(0))||""}`.toUpperCase()}const Ee={ADMIN:"Admin",CONCESSIONNAIRE:"Concessionnaire",UTILISATEUR:"Client"};function Pe(ne){return Ee[ne]||ne}function F(ne){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function te(ne){return ne?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}function ye(ne){var Be;return C.value?!0:M.value?ne.role==="UTILISATEUR"&&ne.dealer===((Be=i.user)==null?void 0:Be.id):!1}return(ne,Be)=>{var Fe,re;return _e(),we("div",S3,[w("div",B3,[w("div",A3,[w("h1",T3,Ge(C.value?"Gestion des utilisateurs":"Mes clients"),1),w("button",{onClick:Z,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[Be[4]||(Be[4]=w("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),Jt(" "+Ge(C.value?"Nouvel utilisateur":"Nouveau client"),1)])]),w("div",D3,[w("div",R3,[C.value?(_e(),we("div",O3,[Be[6]||(Be[6]=w("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Bt(w("select",{id:"role-filter","onUpdate:modelValue":Be[0]||(Be[0]=Se=>v.role=Se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},Be[5]||(Be[5]=[w("option",{value:""},"Tous les rôles",-1),w("option",{value:"ADMIN"},"Admin",-1),w("option",{value:"CONCESSIONNAIRE"},"Concessionnaire",-1),w("option",{value:"UTILISATEUR"},"Client",-1)]),512),[[Qn,v.role]])])):dt("",!0),w("div",null,[Be[7]||(Be[7]=w("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Bt(w("input",{type:"text",id:"search","onUpdate:modelValue":Be[1]||(Be[1]=Se=>v.search=Se),placeholder:C.value?"Nom, email...":"Rechercher un client...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,8,I3),[[en,v.search]])]),C.value?(_e(),we("div",F3,[Be[9]||(Be[9]=w("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Concessionnaire",-1)),Bt(w("select",{id:"dealer-filter","onUpdate:modelValue":Be[2]||(Be[2]=Se=>v.dealer=Se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[Be[8]||(Be[8]=w("option",{value:""},"Tous les concessionnaires",-1)),(_e(!0),we(Lt,null,Ot(P.value,Se=>(_e(),we("option",{key:Se.id,value:Se.id},Ge(Se.company_name||`${Se.first_name} ${Se.last_name}`),9,N3))),128))],512),[[Qn,v.dealer]])])):dt("",!0)])]),w("div",z3,[w("div",$3,[w("table",j3,[w("thead",U3,[w("tr",null,[w("th",G3,Ge(C.value?"Utilisateur":"Client"),1),C.value?(_e(),we("th",V3," Rôle ")):dt("",!0),Be[10]||(Be[10]=w("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),C.value?(_e(),we("th",H3," Concessionnaire ")):dt("",!0),Be[11]||(Be[11]=w("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),Be[12]||(Be[12]=w("th",{scope:"col",class:"relative px-6 py-3"},[w("span",{class:"sr-only"},"Actions")],-1))])]),w("tbody",Z3,[(_e(!0),we(Lt,null,Ot(j.value,Se=>(_e(),we("tr",{key:Se.id},[w("td",q3,[w("div",K3,[w("div",W3,[w("div",J3,[w("span",X3,Ge(Oe(Se.first_name,Se.last_name)),1)])]),w("div",Y3,[w("div",Q3,Ge(xt(qr)(Se)),1),w("div",ew,Ge(Se.username),1)])])]),w("td",tw,[w("span",{class:$n(F(Se.role))},Ge(Pe(Se.role)),3)]),w("td",nw,Ge(Se.email),1),w("td",iw,Ge(Se.dealer_name||"-"),1),w("td",rw,[w("span",{class:$n(te(Se.is_active))},Ge(Se.is_active?"Actif":"Inactif"),3)]),w("td",sw,[w("button",{onClick:Ae=>q(Se),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,ow),ye(Se)?(_e(),we("button",{key:0,onClick:Ae=>V(Se),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,aw)):dt("",!0)])]))),128))])])])])]),h.value?(_e(),nr(Zp,{key:0,user:f.value,dealers:l.value,"is-admin":C.value,"current-dealer":(re=(Fe=xt(i).user)==null?void 0:Fe.id)==null?void 0:re.toString(),onClose:xe,onSave:ie},null,8,["user","dealers","is-admin","current-dealer"])):dt("",!0),p.value?(_e(),nr(qp,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:le,onCancel:Be[3]||(Be[3]=Se=>p.value=!1)})):dt("",!0)])}}}),uw={class:"h-full bg-gray-50"},cw={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},hw={class:"sm:flex sm:items-center"},dw={class:"sm:flex-auto"},fw={class:"text-2xl font-semibold text-gray-900"},pw={class:"mt-2 text-sm text-gray-700"},mw={key:0,class:"mt-8"},gw={class:"mb-6"},_w=["value"],yw={key:0,class:"mb-6"},vw=["value"],bw={key:1,class:"mt-8"},xw={class:"mb-6"},ww=["value"],Lw={class:"mt-8"},Cw={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},kw={class:"overflow-x-auto"},Ew={class:"min-w-full divide-y divide-gray-300"},Mw={class:"bg-gray-50"},Pw={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},Sw={class:"ml-2 flex-none rounded"},Bw={key:0,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Aw={key:1,scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Tw={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Dw={class:"ml-2 flex-none rounded"},Rw={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Ow={class:"ml-2 flex-none rounded"},Iw={class:"divide-y divide-gray-200 bg-white"},Fw={key:0},Nw={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},zw={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},$w={key:0,class:"px-3 py-4 text-sm text-gray-900"},jw={key:0,class:"flex items-center"},Uw={class:"h-8 w-8 flex-shrink-0"},Gw={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Vw={class:"text-primary-700 font-medium text-sm"},Hw={class:"ml-3"},Zw={class:"font-medium"},qw={key:1,class:"text-gray-500"},Kw={key:1,class:"px-3 py-4 text-sm text-gray-900"},Ww={key:0,class:"flex items-center"},Jw={class:"h-8 w-8 flex-shrink-0"},Xw={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Yw={class:"text-primary-700 font-medium text-sm"},Qw={class:"ml-3"},eL={class:"font-medium"},tL={key:1,class:"text-gray-500"},nL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},iL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},rL={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},sL=["onClick"],oL=["onClick"],aL=["onClick"],lL={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},uL={class:"bg-white rounded-lg p-6 max-w-md w-full"},cL={class:"flex justify-between items-center mb-4"},hL={key:0,class:"space-y-4"},dL=["value"],fL=["value"],pL={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},mL={class:"flex"},gL={class:"ml-3"},_L={class:"text-sm font-medium text-red-800"},yL={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},vL=["disabled"],bL={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xL=Kn({__name:"PlansView",setup(e){const i=qs(),s=Gl(),l=jn(),h=Vp(),p=qe([]),f=qe([]),y=qe([]),v=qe(!1),C=qe(!1),M=qe({nom:"",description:"",client:null}),P=qe({id:0,nom:"",description:"",concessionnaire:null,client:null}),j=qe(!1),J=qe(null),R=qe(null),Z=qe(null),q=qe("date_modification"),xe=qe("desc"),ie=kt(()=>R.value?y.value.filter(H=>H.concessionnaire===R.value):y.value),V=kt(()=>{let H=p.value;return l.isAdmin?R.value&&(H=H.filter(ee=>ee.concessionnaire===R.value),Z.value&&(H=H.filter(ee=>ee.client===Z.value))):l.isDealer&&(H=H.filter(ee=>{var se;return ee.concessionnaire===((se=l.user)==null?void 0:se.id)}),Z.value&&(H=H.filter(ee=>ee.client===Z.value))),[...H].sort((ee,se)=>{if(q.value==="nom")return xe.value==="asc"?ee.nom.localeCompare(se.nom):se.nom.localeCompare(ee.nom);{const He=new Date(ee[q.value]).getTime(),Ye=new Date(se[q.value]).getTime();return xe.value==="asc"?He-Ye:Ye-He}})});kt(()=>p.value.filter(H=>{var ee;return H.createur.id===((ee=l.user)==null?void 0:ee.id)})),kt(()=>p.value.filter(H=>{var ee,se,He;return l.isAdmin?H.createur.id!==((ee=l.user)==null?void 0:ee.id):l.isDealer?H.concessionnaire===((se=l.user)==null?void 0:se.id):H.client===((He=l.user)==null?void 0:He.id)}));const le=kt(()=>l.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:p.value}:l.isDealer?{title:"Plans des clients",description:"Plans où vous êtes assigné comme concessionnaire",plans:p.value.filter(H=>{var ee;return H.concessionnaire===((ee=l.user)==null?void 0:ee.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:p.value.filter(H=>{var ee,se;return H.client===((ee=l.user)==null?void 0:ee.id)||H.createur.id===((se=l.user)==null?void 0:se.id)})});rr(async()=>{var H;await Oe(),l.isAdmin?await Ee():l.isDealer&&await Fe(((H=l.user)==null?void 0:H.id)||0)});async function Oe(){try{const H=await s.fetchPlansWithDetails();p.value=H.data}catch(H){console.error("Erreur lors du chargement des plans:",H)}}async function Ee(){try{const[H,ee]=await Promise.all([mt.get("/users/",{params:{role:"CONCESSIONNAIRE"}}),mt.get("/users/",{params:{role:"UTILISATEUR"}})]);f.value=H.data,y.value=ee.data}catch(H){console.error("Erreur lors du chargement des dealers et clients:",H)}}function Pe(){v.value=!0,M.value={nom:"",description:"",client:null}}async function F(H){try{s.setCurrentPlan(H),await h.loadPlanElements(H.id),i.push("/")}catch(ee){console.error("Erreur lors du chargement du plan:",ee),alert("Une erreur est survenue lors du chargement du plan")}}async function te(H){var ee;if(H!=null&&H.id&&confirm("Êtes-vous sûr de vouloir supprimer ce plan ?"))try{await s.deletePlan(H.id),await Oe(),((ee=s.currentPlan)==null?void 0:ee.id)===H.id&&s.clearCurrentPlan()}catch(se){console.error("Erreur lors de la suppression du plan:",se),alert("Une erreur est survenue lors de la suppression du plan")}}function ye(H){return new Date(H).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ne(H){return H?(H.first_name.charAt(0)+H.last_name.charAt(0)).toUpperCase():""}function Be(H){P.value={id:H.id,nom:H.nom,description:H.description,concessionnaire:H.concessionnaire||null,client:H.client||null},H.concessionnaire&&Fe(H.concessionnaire),C.value=!0}async function Fe(H){try{const ee=await mt.get("/users/",{params:{role:"UTILISATEUR",concessionnaire:H}});y.value=ee.data}catch(ee){console.error("Erreur lors du chargement des clients:",ee),y.value=[]}}async function re(){var H,ee,se,He,Ye;J.value=null,j.value=!0;try{if(!P.value.nom.trim())throw new Error("Le nom du plan est requis");if(P.value.client&&!P.value.concessionnaire)throw new Error("Un concessionnaire doit être sélectionné pour assigner un client");await s.updatePlanDetails(P.value.id,{nom:P.value.nom.trim(),description:P.value.description.trim(),concessionnaire:P.value.concessionnaire,client:P.value.client})&&(C.value=!1,await Oe())}catch(Ke){if(console.error("Erreur lors de la mise à jour du plan:",Ke),(ee=(H=Ke.response)==null?void 0:H.data)!=null&&ee.detail)J.value=Ke.response.data.detail;else if((He=(se=Ke.response)==null?void 0:se.data)!=null&&He.non_field_errors)J.value=Ke.response.data.non_field_errors[0];else if((Ye=Ke.response)!=null&&Ye.data){const Je=Object.entries(Ke.response.data).map(([nt,Xe])=>`${nt}: ${Array.isArray(Xe)?Xe[0]:Xe}`);J.value=Je.join(`
`)}else J.value=Ke.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{j.value=!1}}ei(()=>P.value.concessionnaire,async H=>{H?await Fe(H):(y.value=[],P.value.client=null)});function Se(H){const ee=l.user;return ee?ee.user_type==="admin"?!0:ee.user_type==="dealer"?H.concessionnaire===ee.id:H.client===ee.id||H.createur.id===ee.id:!1}kt(()=>{const H=new Map;return p.value.forEach(ee=>{ee.createur&&H.set(ee.createur.id,ee.createur),ee.concessionnaire_details&&H.set(ee.concessionnaire_details.id,ee.concessionnaire_details),ee.client_details&&H.set(ee.client_details.id,ee.client_details)}),H});async function Ae(H){await Oe(),i.push("/")}function ve(H){q.value===H?xe.value=xe.value==="asc"?"desc":"asc":(q.value=H,xe.value="desc")}return(H,ee)=>(_e(),we("div",uw,[w("div",cw,[w("div",hw,[w("div",dw,[w("h1",fw,Ge(le.value.title),1),w("p",pw,Ge(le.value.description),1)]),w("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[w("button",{onClick:Pe,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),xt(l).isAdmin?(_e(),we("div",mw,[w("div",gw,[ee[14]||(ee[14]=w("label",{for:"dealer-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par concessionnaire",-1)),Bt(w("select",{id:"dealer-filter","onUpdate:modelValue":ee[0]||(ee[0]=se=>R.value=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ee[13]||(ee[13]=w("option",{value:null},"Tous les concessionnaires",-1)),(_e(!0),we(Lt,null,Ot(f.value,se=>(_e(),we("option",{key:se.id,value:se.id},Ge(se.first_name)+" "+Ge(se.last_name)+" ("+Ge(se.company_name)+") ",9,_w))),128))],512),[[Qn,R.value]])]),R.value?(_e(),we("div",yw,[ee[16]||(ee[16]=w("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),Bt(w("select",{id:"client-filter","onUpdate:modelValue":ee[1]||(ee[1]=se=>Z.value=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ee[15]||(ee[15]=w("option",{value:null},"Tous les clients",-1)),(_e(!0),we(Lt,null,Ot(ie.value,se=>(_e(),we("option",{key:se.id,value:se.id},Ge(se.first_name)+" "+Ge(se.last_name)+" ("+Ge(se.company_name)+") ",9,vw))),128))],512),[[Qn,Z.value]])])):dt("",!0)])):xt(l).isDealer?(_e(),we("div",bw,[w("div",xw,[ee[18]||(ee[18]=w("label",{for:"client-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par client",-1)),Bt(w("select",{id:"client-filter","onUpdate:modelValue":ee[2]||(ee[2]=se=>Z.value=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ee[17]||(ee[17]=w("option",{value:null},"Tous les clients",-1)),(_e(!0),we(Lt,null,Ot(y.value,se=>(_e(),we("option",{key:se.id,value:se.id},Ge(se.first_name)+" "+Ge(se.last_name)+" ("+Ge(se.company_name)+") ",9,ww))),128))],512),[[Qn,Z.value]])])])):dt("",!0),w("div",Lw,[w("div",Cw,[w("div",kw,[w("table",Ew,[w("thead",Mw,[w("tr",null,[w("th",Pw,[w("button",{onClick:ee[3]||(ee[3]=se=>ve("nom")),class:"group inline-flex items-center"},[ee[20]||(ee[20]=Jt(" Nom ")),w("span",Sw,[(_e(),we("svg",{class:$n(["h-5 w-5",{"text-gray-900":q.value==="nom","text-gray-400":q.value!=="nom","rotate-180":q.value==="nom"&&xe.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ee[19]||(ee[19]=[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ee[25]||(ee[25]=w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),xt(l).isDealer?dt("",!0):(_e(),we("th",Bw," Concessionnaire ")),xt(l).isClient?dt("",!0):(_e(),we("th",Aw," Client ")),w("th",Tw,[w("button",{onClick:ee[4]||(ee[4]=se=>ve("date_creation")),class:"group inline-flex items-center"},[ee[22]||(ee[22]=Jt(" Créé le ")),w("span",Dw,[(_e(),we("svg",{class:$n(["h-5 w-5",{"text-gray-900":q.value==="date_creation","text-gray-400":q.value!=="date_creation","rotate-180":q.value==="date_creation"&&xe.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ee[21]||(ee[21]=[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),w("th",Rw,[w("button",{onClick:ee[5]||(ee[5]=se=>ve("date_modification")),class:"group inline-flex items-center"},[ee[24]||(ee[24]=Jt(" Modifié le ")),w("span",Ow,[(_e(),we("svg",{class:$n(["h-5 w-5",{"text-gray-900":q.value==="date_modification","text-gray-400":q.value!=="date_modification","rotate-180":q.value==="date_modification"&&xe.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ee[23]||(ee[23]=[w("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ee[26]||(ee[26]=w("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[w("span",{class:"sr-only"},"Actions")],-1))])]),w("tbody",Iw,[V.value.length===0?(_e(),we("tr",Fw,ee[27]||(ee[27]=[w("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):dt("",!0),(_e(!0),we(Lt,null,Ot(V.value,se=>(_e(),we("tr",{key:se.id,class:"hover:bg-gray-50"},[w("td",Nw,Ge(se.nom),1),w("td",zw,Ge(se.description||"-"),1),xt(l).isDealer?dt("",!0):(_e(),we("td",$w,[se.concessionnaire_details?(_e(),we("div",jw,[w("div",Uw,[w("div",Gw,[w("span",Vw,Ge(ne(se.concessionnaire_details)),1)])]),w("div",Hw,[w("div",Zw,Ge(xt(qr)(se.concessionnaire_details)),1)])])):(_e(),we("div",qw,"-"))])),xt(l).isClient?dt("",!0):(_e(),we("td",Kw,[se.client_details?(_e(),we("div",Ww,[w("div",Jw,[w("div",Xw,[w("span",Yw,Ge(ne(se.client_details)),1)])]),w("div",Qw,[w("div",eL,Ge(xt(qr)(se.client_details)),1)])])):(_e(),we("div",tL,"-"))])),w("td",nL,Ge(ye(se.date_creation)),1),w("td",iL,Ge(ye(se.date_modification)),1),w("td",rL,[w("button",{onClick:He=>F(se),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,sL),w("button",{onClick:He=>Be(se),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,oL),Se(se)?(_e(),we("button",{key:0,onClick:He=>te(se),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,aL)):dt("",!0)])]))),128))])])])])]),sn(Hp,{modelValue:v.value,"onUpdate:modelValue":ee[6]||(ee[6]=se=>v.value=se),dealers:f.value,clients:y.value,onCreated:Ae},null,8,["modelValue","dealers","clients"]),C.value?(_e(),we("div",lL,[w("div",uL,[w("div",cL,[ee[29]||(ee[29]=w("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),w("button",{onClick:ee[7]||(ee[7]=se=>C.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ee[28]||(ee[28]=[w("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),w("form",{onSubmit:Dl(re,["prevent"]),class:"space-y-4"},[w("div",null,[ee[30]||(ee[30]=w("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Bt(w("input",{type:"text",id:"edit-nom","onUpdate:modelValue":ee[8]||(ee[8]=se=>P.value.nom=se),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:""},null,512),[[en,P.value.nom]])]),w("div",null,[ee[31]||(ee[31]=w("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Bt(w("textarea",{id:"edit-description","onUpdate:modelValue":ee[9]||(ee[9]=se=>P.value.description=se),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[en,P.value.description]])]),xt(l).isAdmin?(_e(),we("div",hL,[w("div",null,[ee[33]||(ee[33]=w("label",{for:"edit-concessionnaire",class:"block text-sm font-medium text-gray-700"}," Concessionnaire ",-1)),Bt(w("select",{id:"edit-concessionnaire","onUpdate:modelValue":ee[10]||(ee[10]=se=>P.value.concessionnaire=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ee[32]||(ee[32]=w("option",{value:null},"Aucun",-1)),(_e(!0),we(Lt,null,Ot(f.value,se=>(_e(),we("option",{key:se.id,value:se.id},Ge(xt(qr)(se)),9,dL))),128))],512),[[Qn,P.value.concessionnaire]])]),w("div",null,[ee[35]||(ee[35]=w("label",{for:"edit-client",class:"block text-sm font-medium text-gray-700"}," Client ",-1)),Bt(w("select",{id:"edit-client","onUpdate:modelValue":ee[11]||(ee[11]=se=>P.value.client=se),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ee[34]||(ee[34]=w("option",{value:null},"Aucun",-1)),(_e(!0),we(Lt,null,Ot(ie.value,se=>(_e(),we("option",{key:se.id,value:se.id},Ge(xt(qr)(se)),9,fL))),128))],512),[[Qn,P.value.client]])])])):dt("",!0),J.value?(_e(),we("div",pL,[w("div",mL,[ee[36]||(ee[36]=w("div",{class:"flex-shrink-0"},[w("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),w("div",gL,[w("p",_L,Ge(J.value),1)])])])):dt("",!0),w("div",yL,[w("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:ee[12]||(ee[12]=se=>C.value=!1)}," Annuler "),w("button",{type:"submit",disabled:j.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[j.value?(_e(),we("svg",bL,ee[37]||(ee[37]=[w("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),w("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):dt("",!0),Jt(" "+Ge(j.value?"Enregistrement...":"Enregistrer"),1)],8,vL)])],32)])])):dt("",!0)])]))}}),wL={class:"h-full bg-gray-50"},LL={class:"container mx-auto px-4 py-8"},CL={class:"sm:flex sm:items-center"},kL={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},EL={class:"mt-8"},ML={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg"},PL={class:"overflow-x-auto"},SL={class:"min-w-full divide-y divide-gray-300"},BL={class:"divide-y divide-gray-200 bg-white"},AL={key:0,class:"animate-pulse"},TL={key:1},DL={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6"},RL={class:"flex items-center"},OL={class:"h-10 w-10 flex-shrink-0"},IL={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},FL={class:"text-primary-600 font-medium"},NL={class:"ml-4"},zL={class:"font-medium text-gray-900"},$L={class:"text-gray-500"},jL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},UL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},GL={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},VL={class:"flex items-center"},HL={class:"font-medium"},ZL={class:"text-gray-400 ml-1"},qL={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6"},KL=["onClick"],WL=["onClick"],JL=Kn({__name:"ClientListView",setup(e){qs();const i=jn(),s=qe([]),l=qe(!0),h=qe(!1),p=qe(!1),f=qe(null),y=qe(null);rr(async()=>{await v()});async function v(){var Z;try{const q=await mt.get("/users/",{params:{dealer:(Z=i.user)==null?void 0:Z.id,role:"UTILISATEUR",include_plans:!0}});s.value=q.data}catch(q){console.error("Error fetching clients:",q)}finally{l.value=!1}}function C(Z,q){return`${(Z==null?void 0:Z.charAt(0))||""}${(q==null?void 0:q.charAt(0))||""}`.toUpperCase()}function M(Z){f.value=Z,h.value=!0}function P(){h.value=!1,f.value=null}async function j(Z){var q;try{const xe=!!Z.id,ie=xe?`/users/${Z.id}/`:"/users/",V=xe?"patch":"post";Z.role="UTILISATEUR",Z.concessionnaire=(q=i.user)==null?void 0:q.id,await mt[V](ie,Z),await v(),P()}catch(xe){throw console.error("Erreur lors de la sauvegarde du client:",xe),xe}}function J(Z){y.value=Z,p.value=!0}async function R(){if(y.value)try{await mt.delete(`/users/${y.value.id}/`),await v(),p.value=!1,y.value=null}catch(Z){throw console.error("Erreur lors de la suppression du client:",Z),Z}}return(Z,q)=>{var xe,ie;return _e(),we("div",wL,[w("div",LL,[w("div",CL,[q[3]||(q[3]=w("div",{class:"sm:flex-auto"},[w("h1",{class:"text-2xl font-semibold text-gray-900"},"Clients"),w("p",{class:"mt-2 text-sm text-gray-700"}," Liste de vos clients et leurs plans associés ")],-1)),w("div",kL,[w("button",{onClick:q[0]||(q[0]=V=>h.value=!0),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},q[2]||(q[2]=[w("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Jt(" Ajouter un client ")]))])]),w("div",EL,[w("div",ML,[w("div",PL,[w("table",SL,[q[6]||(q[6]=w("thead",{class:"bg-gray-50"},[w("tr",null,[w("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"}," Client "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Email "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise "),w("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Nombre de plans "),w("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6"},[w("span",{class:"sr-only"},"Actions")])])],-1)),w("tbody",BL,[l.value?(_e(),we("tr",AL,q[4]||(q[4]=[w("td",{colspan:"5",class:"py-4 px-6"},[w("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):s.value.length===0?(_e(),we("tr",TL,q[5]||(q[5]=[w("td",{colspan:"5",class:"py-4 px-6 text-center text-gray-500"}," Aucun client trouvé ",-1)]))):dt("",!0),(_e(!0),we(Lt,null,Ot(s.value,V=>(_e(),we("tr",{key:V.id,class:"hover:bg-gray-50"},[w("td",DL,[w("div",RL,[w("div",OL,[w("div",IL,[w("span",FL,Ge(C(V.first_name,V.last_name)),1)])]),w("div",NL,[w("div",zL,Ge(xt(qr)(V)),1),w("div",$L,Ge(V.username),1)])])]),w("td",jL,Ge(V.email),1),w("td",UL,Ge(V.company_name||"-"),1),w("td",GL,[w("div",VL,[w("span",HL,Ge(V.plans_count||0),1),w("span",ZL,"plan"+Ge((V.plans_count||0)>1?"s":""),1)])]),w("td",qL,[w("button",{onClick:le=>M(V),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,KL),w("button",{onClick:le=>J(V),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,WL)])]))),128))])])])])]),h.value?(_e(),nr(Zp,{key:0,user:f.value||{},dealers:[{...xt(i).user,role:"CONCESSIONNAIRE"}],"is-admin":!1,"current-dealer":(ie=(xe=xt(i).user)==null?void 0:xe.id)==null?void 0:ie.toString(),onClose:P,onSave:j},null,8,["user","dealers","current-dealer"])):dt("",!0),p.value?(_e(),nr(qp,{key:1,title:"Supprimer le client",message:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible.",onConfirm:R,onCancel:q[1]||(q[1]=V=>p.value=!1)})):dt("",!0)])])}}}),Kp=Av({history:lv("/"),routes:[{path:"/",name:"home",component:Rd,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/plans",name:"plans",component:xL,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/users",name:"users",component:lw,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/clients",name:"clients",component:JL,meta:{requiresAuth:!0,allowedRoles:["dealer"]}},{path:"/profile",name:"profile",component:()=>Ka(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/login",name:"login",component:J1,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Ka(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Ka(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:T1,meta:{requiresAuth:!0,allowedRoles:["admin","dealer","client"]}},{path:"/map",name:"map",component:Rd,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Ka(()=>import("./NotFoundView.js"),[])}]});Kp.beforeEach(async(e,i,s)=>{var y,v;const l=jn();if(console.log("Route:",e.path,"Auth state:",{initialized:l.initialized,isAuthenticated:l.isAuthenticated,user:l.user}),!l.initialized)try{await l.initialize(window.INITIAL_STATE)}catch(C){console.error("Error initializing auth store:",C)}const h=l.isAuthenticated,p=(y=l.user)==null?void 0:y.must_change_password,f=(v=l.user)==null?void 0:v.user_type;if(e.meta.requiresAuth&&!h){s("/login");return}if(h&&p&&e.name!=="changePassword"){s({name:"changePassword"});return}if(e.name==="changePassword"&&!p){s({name:"home"});return}if(e.meta.allowedRoles&&f&&!e.meta.allowedRoles.includes(f)){s({name:"home"});return}if(e.meta.requiresGuest&&h){s({name:"home"});return}s()});const eh=Zg(c1),Wp=Wg();eh.use(Wp);eh.use(Kp);const XL=jn(Wp);window.INITIAL_STATE&&XL.initialize(window.INITIAL_STATE);eh.mount("#app");export{sr as a,w as b,we as c,Kn as d,dt as e,Bt as f,_e as g,ag as h,Jt as i,sn as j,Hr as k,E0 as l,_C as m,$n as n,rr as o,qs as p,qe as r,Ge as t,jn as u,en as v,Dl as w};
